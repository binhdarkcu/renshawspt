-- phpMyAdmin SQL Dump
-- version 4.8.0
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: Dec 20, 2018 at 03:13 AM
-- Server version: 10.1.31-MariaDB
-- PHP Version: 5.6.35

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `wordpress`
--

-- --------------------------------------------------------

--
-- Table structure for table `mm_actions`
--

CREATE TABLE `mm_actions` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `event_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `action_type` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `action_value` longtext COLLATE utf8_unicode_ci NOT NULL,
  `event_attributes` longtext COLLATE utf8_unicode_ci NOT NULL,
  `status` tinyint(4) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_actions`
--

INSERT INTO `mm_actions` (`id`, `event_type`, `action_type`, `action_value`, `event_attributes`, `status`) VALUES
(1, 'mm_member_status_change', 'action_send_email', 'a:5:{s:9:\"emailToId\";s:2:\"-1\";s:11:\"emailFromId\";i:1;s:7:\"emailCC\";s:0:\"\";s:12:\"emailSubject\";s:24:\"Your Account Is Past Due\";s:9:\"emailBody\";s:315:\"[MM_Member_Data name=\'firstName\'],\n	\nYour recent payment was declined.\n	\nPlease update your billing information to reactivate your account.\nTo update your credit card details, please click the link below:\n			\n[MM_CorePage_Link type=\'myaccount\' autoLogin=\'true\']\n	\nThank you for your prompt attention to this matter.\";}', 'a:1:{s:9:\"status_id\";i:5;}', 1);

-- --------------------------------------------------------

--
-- Table structure for table `mm_affiliate_partner_payouts`
--

CREATE TABLE `mm_affiliate_partner_payouts` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `affiliate_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `product_id` int(11) NOT NULL,
  `commission_profile_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_affiliate_providers`
--

CREATE TABLE `mm_affiliate_providers` (
  `id` int(11) UNSIGNED NOT NULL,
  `provider_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `provider_token` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `additional_data` text COLLATE utf8_unicode_ci,
  `active` smallint(5) UNSIGNED NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_affiliate_providers`
--

INSERT INTO `mm_affiliate_providers` (`id`, `provider_name`, `provider_token`, `additional_data`, `active`) VALUES
(1, 'None', 'default', NULL, 1),
(2, 'iDevAffiliate', 'idevaffiliate', NULL, 0);

-- --------------------------------------------------------

--
-- Table structure for table `mm_affiliate_provider_mappings`
--

CREATE TABLE `mm_affiliate_provider_mappings` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `affiliate_provider_id` int(11) UNSIGNED NOT NULL,
  `membership_level_id` int(11) UNSIGNED NOT NULL,
  `payout_profile_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `additional_data` text COLLATE utf8_unicode_ci
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_affiliate_rebill_commissions`
--

CREATE TABLE `mm_affiliate_rebill_commissions` (
  `affiliate_provider_id` int(11) UNSIGNED NOT NULL,
  `affiliate_id` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
  `order_number` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `transaction_id` bigint(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_api_keys`
--

CREATE TABLE `mm_api_keys` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `api_key` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `api_secret` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `status` tinyint(4) NOT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_api_keys`
--

INSERT INTO `mm_api_keys` (`id`, `name`, `api_key`, `api_secret`, `status`, `date_added`) VALUES
(1, 'Default Access', 'kqfkqzkdtg', '0ns52dqinz', 1, '2018-11-20 23:34:41');

-- --------------------------------------------------------

--
-- Table structure for table `mm_applied_bundles`
--

CREATE TABLE `mm_applied_bundles` (
  `access_type` enum('user','membership') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'membership',
  `access_type_id` int(11) UNSIGNED DEFAULT NULL,
  `bundle_id` int(11) UNSIGNED NOT NULL,
  `days_calc_method` enum('join_date','custom_date','fixed') COLLATE utf8_unicode_ci DEFAULT 'join_date',
  `days_calc_value` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `status` tinyint(4) NOT NULL DEFAULT '1',
  `pending_status` tinyint(4) NOT NULL DEFAULT '0',
  `imported` tinyint(4) NOT NULL DEFAULT '0',
  `status_updated` datetime DEFAULT NULL,
  `subscribed_provider_id` int(11) UNSIGNED DEFAULT NULL,
  `subscribed_list_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `cancellation_date` timestamp NULL DEFAULT NULL,
  `expiration_date` timestamp NULL DEFAULT NULL,
  `apply_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_bundles`
--

CREATE TABLE `mm_bundles` (
  `id` int(11) UNSIGNED NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  `is_free` int(11) NOT NULL,
  `status` tinyint(4) NOT NULL,
  `dflt_membership_id` int(11) UNSIGNED NOT NULL DEFAULT '0',
  `expire_amount` int(10) DEFAULT NULL,
  `expire_period` enum('days','weeks','months') COLLATE utf8_unicode_ci DEFAULT 'months',
  `expires` tinyint(4) NOT NULL DEFAULT '0',
  `short_name` varchar(10) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_bundle_categories`
--

CREATE TABLE `mm_bundle_categories` (
  `category_id` bigint(20) UNSIGNED NOT NULL,
  `bundle_id` int(11) UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_bundle_products`
--

CREATE TABLE `mm_bundle_products` (
  `bundle_id` int(11) UNSIGNED NOT NULL,
  `product_id` int(11) UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_card_on_file`
--

CREATE TABLE `mm_card_on_file` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `payment_service_id` int(11) NOT NULL,
  `payment_service_identifier` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `original_order_id` bigint(20) UNSIGNED DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_commission_profiles`
--

CREATE TABLE `mm_commission_profiles` (
  `id` int(11) UNSIGNED NOT NULL,
  `name` varchar(191) COLLATE utf8_unicode_ci NOT NULL,
  `is_default` tinyint(4) NOT NULL DEFAULT '0',
  `description` text COLLATE utf8_unicode_ci,
  `initial_commission_enabled` tinyint(4) NOT NULL DEFAULT '1',
  `rebill_commissions_enabled` tinyint(4) NOT NULL DEFAULT '0',
  `rebill_commission_type` enum('default','percent','flatrate') COLLATE utf8_unicode_ci DEFAULT 'default',
  `rebill_commission_value` decimal(20,2) NOT NULL,
  `do_limit_rebill_commissions` tinyint(4) NOT NULL DEFAULT '0',
  `rebill_commission_limit` int(11) UNSIGNED NOT NULL,
  `do_reverse_commissions` tinyint(4) NOT NULL DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_commission_profiles`
--

INSERT INTO `mm_commission_profiles` (`id`, `name`, `is_default`, `description`, `initial_commission_enabled`, `rebill_commissions_enabled`, `rebill_commission_type`, `rebill_commission_value`, `do_limit_rebill_commissions`, `rebill_commission_limit`, `do_reverse_commissions`) VALUES
(1, 'Standard Commission Profile', 1, 'This is the default commission profile', 1, 0, 'default', '0.00', 0, 0, 1);

-- --------------------------------------------------------

--
-- Table structure for table `mm_container`
--

CREATE TABLE `mm_container` (
  `id` int(11) NOT NULL,
  `name` varchar(191) COLLATE utf8_unicode_ci NOT NULL,
  `obj` mediumtext COLLATE utf8_unicode_ci NOT NULL,
  `is_system` tinyint(4) NOT NULL DEFAULT '0',
  `date_added` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_container`
--

INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(1, 'membermouseservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX01lbWJlck1vdXNlU2VydmljZQp7CglwdWJsaWMgc3RhdGljICRTRVJWRVJJUCA9IE1NX0NFTlRSQUxfU0VSVkVSOyAKCglwcml2YXRlIHN0YXRpYyAkQ0hFQ0tJTl9GQUlMX01BWF9DT1VOVCA9IDEwOwoJcHJpdmF0ZSBzdGF0aWMgJENIRUNLSU5fSU5URVJWQUwgPSA0OwoJcHJpdmF0ZSBzdGF0aWMgJENIRUNLSU5fV0FSTklOR19USFJFU0hPTEQgPSA3OwoJcHVibGljIHN0YXRpYyAkREVGQVVMVF9NSU5PUl9WRVJTSU9OID0gIjEwMCI7CgkKCXB1YmxpYyBzdGF0aWMgJFVTQUdFX1BBSURfTUVNQkVSUyA9ICJ1c2FnZV9wYWlkX21lbWJlcnMiOwoJcHVibGljIHN0YXRpYyAkVVNBR0VfRlJFRV9NRU1CRVJTID0gInVzYWdlX2ZyZWVfbWVtYmVycyI7CglwdWJsaWMgc3RhdGljICRVU0FHRV9QQUlEX0JVTkRMRVMgPSAidXNhZ2VfcGFpZF9idW5kbGVzIjsKCXB1YmxpYyBzdGF0aWMgJFVTQUdFX0ZSRUVfQlVORExFUyA9ICJ1c2FnZV9mcmVlX2J1bmRsZXMiOwoJcHVibGljIHN0YXRpYyAkVVNBR0VfT1JERVJTID0gInVzYWdlX29yZGVycyI7CglwdWJsaWMgc3RhdGljICRDT05GSUdfUEFZTUVOVF9NRVRIT0RTID0gImNvbmZpZ19wYXltZW50X21ldGhvZHMiOwoJcHVibGljIHN0YXRpYyAkQ09ORklHX01FTUJFUlNISVBTX0ZSRUUgPSAiY29uZmlnX2ZyZWVfbWVtYmVyc2hpcHMiOwoJcHVibGljIHN0YXRpYyAkQ09ORklHX01FTUJFUlNISVBTX1BBSUQgPSAiY29uZmlnX3BhaWRfbWVtYmVyc2hpcHMiOwoJcHVibGljIHN0YXRpYyAkQ09ORklHX0JVTkRMRVNfRlJFRSA9ICJjb25maWdfZnJlZV9idW5kbGVzIjsKCXB1YmxpYyBzdGF0aWMgJENPTkZJR19CVU5ETEVTX1BBSUQgPSAiY29uZmlnX3BhaWRfYnVuZGxlcyI7CglwdWJsaWMgc3RhdGljICRDT05GSUdfUFJPRFVDVFMgPSAiY29uZmlnX3Byb2R1Y3RzIjsKCXB1YmxpYyBzdGF0aWMgJENPTkZJR19ERUZBVUxUX0VNUExPWUVFX0VNQUlMID0gImNvbmZpZ19kZmx0X2VtcGxveWVlX2VtYWlsIjsKCXB1YmxpYyBzdGF0aWMgJENPTkZJR19ERUZBVUxUX0VNUExPWUVFX05BTUUgPSAiY29uZmlnX2RmbHRfZW1wbG95ZWVfbmFtZSI7CglwdWJsaWMgc3RhdGljICRDT05GSUdfQ1VSUkVOQ1kgPSAiY29uZmlnX2N1cnJlbmN5IjsKCQoJcHVibGljIHN0YXRpYyAkUFJPUFNfV1BfVkVSU0lPTiA9ICJ3cF92ZXJzaW9uIjsKCXB1YmxpYyBzdGF0aWMgJFBST1BTX1BIUF9WRVJTSU9OID0gInBocF92ZXJzaW9uIjsKCXB1YmxpYyBzdGF0aWMgJFBST1BTX01NX0JFVEEgPSAibW1fYmV0YSI7CgkKCXB1YmxpYyBzdGF0aWMgJE1FVEhPRF9BVVRIT1JJWkUgPSAiYXV0aG9yaXplUGx1Z2luIjsKCXB1YmxpYyBzdGF0aWMgJE1FVEhPRF9BQ1RJVkFURSA9ICJhY3RpdmF0ZVBsdWdpbiI7CglwdWJsaWMgc3RhdGljICRNRVRIT0RfREVBQ1RJVkFURSA9ICJkZWFjdGl2YXRlUGx1Z2luIjsKCXB1YmxpYyBzdGF0aWMgJE1FVEhPRF9SRVBPUlRfU0NIRURVTEVfU1RBVEUgPSAicmVwb3J0U2NoZWR1bGVTdGF0ZSI7CgkKCXB1YmxpYyBzdGF0aWMgJE9QVElPTl9LRVlfQ0hFQ0tJTl9GQUlMRURfQ09VTlQgPSAibW0tb3B0aW9uLWZhaWxlZC1jaGVja2luLWNvdW50IjsKCXByaXZhdGUgc3RhdGljICRDQUNIRURfTElDRU5TRV9PQkogPSBudWxsOwoJcHJpdmF0ZSBzdGF0aWMgJEFVVEhfTE9DSyA9IGZhbHNlOwoJcHJpdmF0ZSBzdGF0aWMgJEFVVEhfTE9DS19JREVOVElGSUVSID0gIm1tLWF1dGhvcml6YXRpb24tbG9jayI7CgoJCgkvKioKCSAqIERldGVybWluZXMgaWYgdGhlIHBsdWdpbiBzaG91bGQgYXV0aG9yaXplIHdpdGggTU0gY2VudHJhbAoJICovCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBkb0F1dGhvcml6ZSgpCgl7CgkJJGxvY2tTdGF0dXMgPSBzZWxmOjphY3F1aXJlU2VtYXBob3JlKCk7CgkJaWYgKCRsb2NrU3RhdHVzID09PSAwKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJaWYoIXByZWdfbWF0Y2goIi8ocGx1Z2luc1wucGhwKS8iLCAkX1NFUlZFUlsiUEhQX1NFTEYiXSkpCgkJewoJCQkkbGFzdENoZWNraW4gPSBiYXNlNjRfZGVjb2RlKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0xBU1RfQ0hFQ0tJTikpOwoJCQkkbmV4dENoZWNrID0gc3RydG90aW1lKCIrIi5zZWxmOjokQ0hFQ0tJTl9JTlRFUlZBTC4iIGRheSIsIHN0cnRvdGltZSgkbGFzdENoZWNraW4pKTsKCQkJJHRvZGF5ID0gZGF0ZSgiWS1tLWQgaDppOnMiKTsgCgkJCWlmKHN0cnRvdGltZSgkdG9kYXkpID49ICRuZXh0Q2hlY2spCgkJCXsgCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfSAKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGhhc1N1cnBhc3NlZEZhaWxlZFRocmVzaG9sZE1heCgpCgl7CgkJJGNudCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oc2VsZjo6JE9QVElPTl9LRVlfQ0hFQ0tJTl9GQUlMRURfQ09VTlQpOwoJCWlmKGlzX251bGwoJGNudCkgfHwgZW1wdHkoJGNudCkpCgkJewoJCQkkY250ID0gMDsKCQl9CgkJaWYoJGNudD49c2VsZjo6JENIRUNLSU5fRkFJTF9NQVhfQ09VTlQpCgkJeyAKCQkJcmV0dXJuIHRydWU7CgkJfSAKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIHVwZGF0ZUZhaWxlZFJlcXVlc3RDb3VudCgpCgl7CgkgICAgZ2xvYmFsICR3cGRiOwoJICAgIAoJICAgIGlmICghaXNfb2JqZWN0KCR3cGRiKSkKCSAgICB7CgkgICAgICAgIHJldHVybjsgLy9lcnJvcgoJICAgIH0KCSAgICAKCSAgICAvL2FjcXVpcmUgc2VtYXBob3JlCgkgICAgJGludGVybmFsTG9ja0lEID0gIm1tLXNlcnZpY2UtZmFpbHVyZS1jaGVjay1pbnRlcm5hbCI7CgkgICAgJGxvY2tBY3F1aXJlZCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgSUYoSVNfRlJFRV9MT0NLKCVzKSxDT0FMRVNDRShHRVRfTE9DSyglcywwKSwtMSksMCkiLCRpbnRlcm5hbExvY2tJRCwkaW50ZXJuYWxMb2NrSUQpKTsKCSAgICBpZiAoJGxvY2tBY3F1aXJlZCA9PSAiMSIpCgkgICAgeyAgICAKICAgICAgICAJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0xBU1RfQ0hFQ0tJTiwgYmFzZTY0X2VuY29kZShkYXRlKCJZLW0tZCBoOmk6cyIpKSk7CiAgICAgICAgCQkkY250ID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihzZWxmOjokT1BUSU9OX0tFWV9DSEVDS0lOX0ZBSUxFRF9DT1VOVCk7CiAgICAgICAgCQlpZihlbXB0eSgkY250KSB8fCAhaXNfbnVtZXJpYygkY250KSkKICAgICAgICAJCXsKICAgICAgICAJCQkkY250ID0gMDsKICAgICAgICAJCX0KICAgICAgICAJCSRjbnQrKzsKICAgICAgICAJCQkKICAgICAgICAJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oc2VsZjo6JE9QVElPTl9LRVlfQ0hFQ0tJTl9GQUlMRURfQ09VTlQsICRjbnQpOwogICAgICAgIAkJaWYgKCRjbnQgPiBzZWxmOjokQ0hFQ0tJTl9XQVJOSU5HX1RIUkVTSE9MRCkKICAgICAgICAJCXsKICAgICAgICAJCQlzZWxmOjpzZW5kV2FybmluZ0VtYWlsKCk7CiAgICAgICAgCQl9CiAgICAgICAgCQkvL3JlbGVhc2Ugc2VtYXBob3JlCiAgICAgICAgCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoIlNFTEVDVCBSRUxFQVNFX0xPQ0soJXMpIiwkaW50ZXJuYWxMb2NrSUQpKTsKCSAgICB9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYXV0aG9yaXplKCRyZWZyZXNoQ2xhc3Nlcz10cnVlKQoJewoJCWlmICgkcmVmcmVzaENsYXNzZXMpCgkJewoJCQkvL2NsYXNzIHJlZnJlc2ggcmVxdWVzdHMgbWVhbnMgdGhlIGNhbGwgaXMgY29taW5nIGZyb20gZXh0ZXJuYWwsIGF0dGVtcHQgdG8gYWNxdWlyZSB0aGUgc2VtYXBob3JlCgkJCWlmICgoc2VsZjo6JEFVVEhfTE9DSyA9PT0gZmFsc2UpICAmJiAoc2VsZjo6YWNxdWlyZVNlbWFwaG9yZSgpID09PSAwKSkKCQkJewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgkJJHVybCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oInNpdGV1cmwiKTsKCQkkdmVyc2lvbiA9IE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCk7CgkJJHBvc3R2YXJzID0gInVybD0iLnVybGVuY29kZSgkdXJsKS4iJnZlcnNpb249Ii4kdmVyc2lvbjsKCQkkbWlub3JWZXJzaW9uID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfTUlOT1JfVkVSU0lPTik7CgoJCWlmKCRtaW5vclZlcnNpb24gIT09IGZhbHNlICYmIGludHZhbCgkbWlub3JWZXJzaW9uKSA+IDApCgkJewoJCQkkcG9zdHZhcnMgLj0gIiZtaW5vcl92ZXJzaW9uPSIuJG1pbm9yVmVyc2lvbjsKCQl9CgkJZWxzZSAKCQl7CgkJCSRwb3N0dmFycyAuPSAiJm1pbm9yX3ZlcnNpb249Ii5zZWxmOjokREVGQVVMVF9NSU5PUl9WRVJTSU9OOwoJCX0KCQkKCQlpZihjbGFzc19leGlzdHMoIk1NX0FwcGxpZWRCdW5kbGUiKSkKCQl7CgkJCSRwb3N0dmFycyAuPSAiJnN0YXRpc3RpY3M9Ii51cmxlbmNvZGUoanNvbl9lbmNvZGUoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpnZW5lcmF0ZVN0YXRpc3RpY3MoKSkpOwoJCX0KCQkKCQkkcG9zdHZhcnMgLj0gIiZwcm9wZXJ0aWVzPSIudXJsZW5jb2RlKGpzb25fZW5jb2RlKE1NX01lbWJlck1vdXNlU2VydmljZTo6Z2VuZXJhdGVQcm9wZXJ0aWVzKCkpKTsKCQkKCQkkcG9zdHZhcnMgLj0gIiZnZXRfY2xhc3Nlcz0iLigkcmVmcmVzaENsYXNzZXMgPyAiMSIgOiAiMCIpOwoKCQkkanNvbl9kYXRhID0gc2VsZjo6c2VuZFJlcXVlc3Qoc2VsZjo6JE1FVEhPRF9BVVRIT1JJWkUsICRwb3N0dmFycyk7CgkJCgkJaWYoJGpzb25fZGF0YSA9PT0gZmFsc2UpCgkJeyAgCgkJCXNlbGY6OnVwZGF0ZUZhaWxlZFJlcXVlc3RDb3VudCgpOwoJCQlpZiAoc2VsZjo6aGFzU3VycGFzc2VkRmFpbGVkVGhyZXNob2xkTWF4KCkpCgkJCXsKCQkJCWlmKE1NX1V0aWxzOjppc01lbWJlck1vdXNlQWN0aXZlKCkpCgkJCQl7CgkJCQkJc2VsZjo6aW5pdGlhdGVQbHVnaW5EZWFjdGl2YXRpb24oKTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWVsc2UgaWYoc2VsZjo6aXNVbmF1dGhvcml6ZWRSZXN1bHQoJGpzb25fZGF0YSkpCgkJewoJCQlpZihNTV9VdGlsczo6aXNNZW1iZXJNb3VzZUFjdGl2ZSgpKQoJCQl7CgkJCQlzZWxmOjppbml0aWF0ZVBsdWdpbkRlYWN0aXZhdGlvbigpOwoJCQl9CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oc2VsZjo6JE9QVElPTl9LRVlfQ0hFQ0tJTl9GQUlMRURfQ09VTlQsIDApOwoJCSRqc29uID0gJGpzb25fZGF0YS0+cmVzcG9uc2VfZGF0YTsKCQlpZiAoJHJlZnJlc2hDbGFzc2VzICYmIHNlbGY6OiRBVVRIX0xPQ0spCgkJewoJCQlzZWxmOjpyZWxlYXNlU2VtYXBob3JlKCk7CgkJfQoJCXJldHVybiBzZWxmOjp1cGRhdGVMaWNlbnNlRGF0YSgkanNvbik7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYWN0aXZhdGVQbHVnaW4oKQoJewoJCSRwb3N0dmFycyA9ICJ1cmw9Ii5NTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCJzaXRldXJsIik7CgkJc2VsZjo6c2VuZFJlcXVlc3Qoc2VsZjo6JE1FVEhPRF9BQ1RJVkFURSwgJHBvc3R2YXJzKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBkZWFjdGl2YXRlUGx1Z2luKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8gY2xlYXIgbGljZW5zZSBkYXRhCgkJTU1fT3B0aW9uVXRpbHM6OnNldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfTElDRU5TRV9EQVRBLCAiIik7CgkJTU1fT3B0aW9uVXRpbHM6OnNldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfTEFTVF9DSEVDS0lOLCAiIik7CgkJCgkJJHBvc3R2YXJzID0gInVybD0iLk1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oInNpdGV1cmwiKTsKCQlzZWxmOjpzZW5kUmVxdWVzdChzZWxmOjokTUVUSE9EX0RFQUNUSVZBVEUsICRwb3N0dmFycyk7CgkJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0NPTlRBSU5FUjsKCQkkd3BkYi0+cXVlcnkoJHNxbCk7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBmb3JjZXMgYSBjaGVja2luCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcGluZygpCgl7CgkJLy8gY2hlY2sgaWYgTWVtYmVyTW91c2UgcGx1Z2luIGlzIGFjdGl2ZQoJCWlmKCFNTV9VdGlsczo6aXNNZW1iZXJNb3VzZUFjdGl2ZSgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTWVtYmVyTW91c2UgcGx1Z2luIGlzIGN1cnJlbnRseSBkZWFjdGl2YXRlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlyZXR1cm4gc2VsZjo6YXV0aG9yaXplKGZhbHNlKTsKCX0KCQoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gdXBkYXRlTGljZW5zZURhdGEoJGpzb24pCgl7CgkJaWYoaXNzZXQoJGpzb24tPmlzVmFsaWQpKQoJCXsKCQkJaWYoaXNzZXQoJGpzb24tPmxpY2Vuc2VEYXRhKSkKCQkJewoJCQkJJGxpY2Vuc2UgPSBuZXcgTU1fTGljZW5zZSgiIiwgZmFsc2UpOwoJCQkJJGxpY2Vuc2UtPnNldERhdGEoJGpzb24tPmxpY2Vuc2VEYXRhKTsKCQkJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0xBU1RfQ0hFQ0tJTiwgYmFzZTY0X2VuY29kZShkYXRlKCJZLW0tZCBoOmk6cyIpKSk7CgkJCQlNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OnN0b3JlTGljZW5zZSgkbGljZW5zZSk7CgkJCX0KCQkJCgkJCWlmKCFlbXB0eSgkanNvbi0+Y2xhc3NlcykpCgkJCXsJCgkJCQlzZWxmOjpzYXZlRHluYW1pY0NsYXNzZXMoJGpzb24tPmNsYXNzZXMpOwoJCQl9CgkJCQoJCQlpZighZW1wdHkoJGpzb24tPm5vdGlmaWNhdGlvbnMpICYmIGlzX2FycmF5KCRqc29uLT5ub3RpZmljYXRpb25zKSkKCQkJewoJCQkJZm9yZWFjaCgkanNvbi0+bm90aWZpY2F0aW9ucyBhcyAkbm90aWZpY2F0aW9uKQoJCQkJewoJCQkJCXN3aXRjaCgkbm90aWZpY2F0aW9uLT50eXBlKQoJCQkJCXsKCQkJCQkJY2FzZSAibWFqb3ItdmVyc2lvbi11cGdyYWRlIjoKCQkJCQkJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1VQR1JBREVfTk9USUNFLCAkbm90aWZpY2F0aW9uLT52YWx1ZSk7CgkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQljYXNlICJtaW5vci12ZXJzaW9uLXVwZ3JhZGUiOgogICAgICAgIAkJCQkJTU1fT3B0aW9uVXRpbHM6OnNldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfTUlOT1JfVkVSU0lPTiwgJG5vdGlmaWNhdGlvbi0+dmFsdWUpOwoJCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkKCQkJcmV0dXJuIHRydWU7CgkJfQoJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkKCS8qKiBVVElMSVRJRVMgKiovCgkKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIHNhdmVEeW5hbWljQ2xhc3NlcygkY2xhc3NlcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoaXNfb2JqZWN0KCRjbGFzc2VzKSB8fCBpc19hcnJheSgkY2xhc3NlcykpCgkJewoJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQ09OVEFJTkVSLiIgV0hFUkUgaXNfc3lzdGVtPScwJyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCgkJCWZvcmVhY2goJGNsYXNzZXMgYXMgJGNsYXNzTmFtZT0+JGNsYXNzRW50cnkpCgkJCXsKCQkJCSRzcWwgPSAiSU5TRVJUIElOVE8gIi5NTV9UQUJMRV9DT05UQUlORVIuIiBTRVQgbmFtZT0nJXMnLCBvYmo9JyVzJywgZGF0ZV9hZGRlZD1OT1coKSI7CgkJCQkKCQkJCWlmKHN0cnRvbG93ZXIoJGNsYXNzTmFtZSkgPT0gIm1lbWJlcm1vdXNlc2VydmljZSIpCgkJCQl7CgkJCQkJJHNxbCA9ICJVUERBVEUgIi5NTV9UQUJMRV9DT05UQUlORVIuIiBTRVQgbmFtZT0nJXMnLCBvYmo9JyVzJywgZGF0ZV9hZGRlZD1OT1coKSB3aGVyZSBuYW1lPSdtZW1iZXJtb3VzZXNlcnZpY2UnIExJTUlUIDEiOwoJCQkJfQoJCQkJCgkJCQlpZigkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJGNsYXNzTmFtZSwgJGNsYXNzRW50cnkpKSkKCQkJCXsKCQkJCQkkY2FjaGVSZXN1bHQgPSBzZWxmOjpjYWNoZUNsYXNzKCRjbGFzc05hbWUsICRjbGFzc0VudHJ5KTsKCQkJCX0KCQkJfQoJCQkKCQkJTU1fU2Vzc2lvbjo6dmFsdWUoTU1fU2Vzc2lvbjo6JEtFWV9VU0lOR19EQl9DQUNIRSwgISRjYWNoZVJlc3VsdCk7CgkJfQoJCQoJCXJldHVybiB0cnVlOwoJfQoKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGNhY2hlQ2xhc3MoJGNsYXNzTmFtZSwgJGNsYXNzRW50cnkpCgl7CgkJJGZpbGVQYXRoID0gTU1fUExVR0lOX0FCU1BBVEguIi9jb20vbWVtYmVybW91c2UvY2FjaGUiOwoJCQoJCWlmKGlzX2RpcigkZmlsZVBhdGgpKQoJCXsKCQkJaWYoaXNfd3JpdGVhYmxlKCRmaWxlUGF0aCkpCgkJCXsKCQkJCWlmKHByZWdfbWF0Y2goIi8obWVtYmVybW91c2Vfc2NoZW1hKSQvIiwgJGNsYXNzTmFtZSkpCgkJCQl7CgkJCQkJJGZpbGVQYXRoIC49ICIvIi4kY2xhc3NOYW1lLiIuc3FsIjsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkZmlsZVBhdGggLj0gIi8iLmJhc2U2NF9lbmNvZGUoJGNsYXNzTmFtZSkuIi5jYWNoZSI7CgkJCQl9CgkJCQkKCQkJCSRmaCA9IGZvcGVuKCRmaWxlUGF0aCwgJ3cnKTsKCQkJCWZ3cml0ZSgkZmgsICRjbGFzc0VudHJ5KTsKCQkJCWZjbG9zZSgkZmgpOwoJCQkJCgkJCQlpZihmaWxlX2V4aXN0cygkZmlsZVBhdGgpKQoJCQkJewoJCQkJCUBjaG1vZCgkZmlsZVBhdGgsIDA3NDQpOwoJCQkJfQoJCQkJCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfSAKCQoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gc2VuZFJlcXVlc3QoJG1ldGhvZCwgJHBvc3R2YXJzKQoJewoJCSR1cmwgPSBzZWxmOjokU0VSVkVSSVAuJG1ldGhvZDsKCQkKCQkkcmVzcG9uc2UgPSB3cF9yZW1vdGVfcG9zdCgkdXJsLCBhcnJheSgnbWV0aG9kJyA9PiAnUE9TVCcsCgkJCQkJCQkJCQkJICAgJ3RpbWVvdXQnID0+IDQ1LAoJCQkJCQkJCQkJCSAgICdib2R5Jz0+JHBvc3R2YXJzKSk7CgkJCgkJaWYgKGlzX3dwX2Vycm9yKCRyZXNwb25zZSkgfHwgKGlzc2V0KCRyZXNwb25zZVsncmVzcG9uc2UnXSkgJiYgaXNzZXQoJHJlc3BvbnNlWydyZXNwb25zZSddWydjb2RlJ10pICYmICgkcmVzcG9uc2VbJ3Jlc3BvbnNlJ11bJ2NvZGUnXSAhPSAiMjAwIikpIHx8IAoJCQkJKCFpc3NldCgkcmVzcG9uc2VbJ2JvZHknXSkpICkgCgkJewoJCQkvLyB1bmFibGUgdG8gY29ubmVjdCB0byBzZXJ2ZXIKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQllbHNlIAoJCXsKCQkJCgkJCSRqc29uID0ganNvbl9kZWNvZGUoJHJlc3BvbnNlWydib2R5J10pOwoJCQlpZighaXNfbnVsbCgkanNvbikgJiYgaXNzZXQoJGpzb24tPnJlc3BvbnNlX2RhdGEpKQoJCQl7CQoJCQkJJG9yaWdSZXNwb25zZSA9ICRqc29uLT5yZXNwb25zZV9kYXRhOwoJCQkJaWYoaXNfc3RyaW5nKCRqc29uLT5yZXNwb25zZV9kYXRhKSkKCQkJCXsKCQkJCQkkanNvbi0+cmVzcG9uc2VfZGF0YSA9IGpzb25fZGVjb2RlKCRqc29uLT5yZXNwb25zZV9kYXRhKTsKCQkJCQkJCgkJCQkJaWYoaXNfbnVsbCgkanNvbi0+cmVzcG9uc2VfZGF0YSkpCgkJCQkJewoJCQkJCQkkanNvbi0+cmVzcG9uc2VfZGF0YSA9ICRvcmlnUmVzcG9uc2U7CgkJCQkJfQoJCQkJfQoJCQkKCQkJCS8vIHZhbGlkYXRlIGxpY2Vuc2UgZGF0YSBmb3IgYXV0aG9yaXphdGlvbnMKCQkJCWlmKCRtZXRob2QgPT0gc2VsZjo6JE1FVEhPRF9BVVRIT1JJWkUgJiYgKCFpc3NldCgkanNvbi0+cmVzcG9uc2VfZGF0YS0+bGljZW5zZURhdGEpIHx8ICFpc3NldCgkanNvbi0+cmVzcG9uc2VfZGF0YS0+bGljZW5zZURhdGEtPmlkKSkpCgkJCQl7CgkJCQkJJGVycm9yID0gbmV3IHN0ZENsYXNzKCk7CgkJCQkJJGVycm9yLT5yZXNwb25zZV9jb2RlID0gIjQwMSI7CgkJCQkJcmV0dXJuICRlcnJvcjsKCQkJCX0KCQkJCQoJCQkJcmV0dXJuICRqc29uOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCS8vIGxpY2Vuc2UgaXMgY2FuY2VsZWQKCQkJCSRlcnJvciA9IG5ldyBzdGRDbGFzcygpOwoJCQkJJGVycm9yLT5yZXNwb25zZV9jb2RlID0gIjQwMSI7CgkJCQlyZXR1cm4gJGVycm9yOwoJCQl9CgkJfQoJfQoJCgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1N1Y2Nlc3NmdWxSZXN1bHQoJHJlc3VsdCkKCXsgCgkJaWYoIWlzX251bGwoJHJlc3VsdCkgJiYgKCRyZXN1bHQtPnJlc3BvbnNlX2NvZGUgPT0gIjIwMCIpKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNVbmF1dGhvcml6ZWRSZXN1bHQoJHJlc3VsdCkKCXsKCQlpZiAoKCRyZXN1bHQgIT0gbnVsbCkgJiYgKGlzc2V0KCRyZXN1bHQtPnJlc3BvbnNlX2NvZGUpKSAmJiAoJHJlc3VsdC0+cmVzcG9uc2VfY29kZSA9PSAiNDAxIikpCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkKCS8qKiBTSVRFIFNUQVRTIEFORCBQUk9QRVJUSUVTICoqLwoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlU3RhdGlzdGljcygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzdGF0aXN0aWNzID0gYXJyYXkoc2VsZjo6JFVTQUdFX1BBSURfTUVNQkVSUyA9PiAwLAoJCQkJCQkJc2VsZjo6JFVTQUdFX0ZSRUVfTUVNQkVSUyA9PiAwLAoJCQkJCQkJc2VsZjo6JFVTQUdFX1BBSURfQlVORExFUyA9PiAwLAoJCQkJCQkJc2VsZjo6JFVTQUdFX0ZSRUVfQlVORExFUyA9PiAwLAoJCQkJCQkJc2VsZjo6JFVTQUdFX09SREVSUyA9PiAwLAoJCQkJCQkJc2VsZjo6JENPTkZJR19QQVlNRU5UX01FVEhPRFMgPT4gIiIsCgkJCQkJCQlzZWxmOjokQ09ORklHX01FTUJFUlNISVBTX1BBSUQgPT4gMCwKCQkJCQkJCXNlbGY6OiRDT05GSUdfTUVNQkVSU0hJUFNfRlJFRSA9PiAwLAoJCQkJCQkJc2VsZjo6JENPTkZJR19CVU5ETEVTX1BBSUQgPT4gMCwKCQkJCQkJCXNlbGY6OiRDT05GSUdfQlVORExFU19GUkVFID0+IDAsCgkJCQkJCQlzZWxmOjokQ09ORklHX1BST0RVQ1RTID0+IDAsCgkJCQkJCQlzZWxmOjokQ09ORklHX0RFRkFVTFRfRU1QTE9ZRUVfRU1BSUwgPT4gIiIsCgkJCQkJCQlzZWxmOjokQ09ORklHX0RFRkFVTFRfRU1QTE9ZRUVfTkFNRSAgPT4gIiIJCQkJCgkJKTsKCQkKCQkkY2hlY2tUYWJsZXNFeGlzdCA9ICR3cGRiLT5xdWVyeSgiU0hPVyBUQUJMRVMgTElLRSAnIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiciKTsKCQlpZiAoJGNoZWNrVGFibGVzRXhpc3QgIT09IDApIC8vaWYgdGhlIHVzZXIgZGF0YSB0YWJsZSBkb2Vzbid0IGV4aXN0cywgd2UgYXJlIGluIHRoZSBpbnN0YWxsLCBkb24ndCB0cnkgdG8gZ2F0aGVyIHRoZSBvdGhlciBzdGF0aXN0aWNzCgkJewkJCgkJCS8vIFBBSUQgTUVNQkVSUyAoVVNBR0UpCgkJCSRiYXNlU3FsID0gIlNFTEVDVCBjb3VudCh1LndwX3VzZXJfaWQpIGFzIHRvdGFsIEZST00gIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiB1LCAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLiIgbSBXSEVSRSAiOwoJCQkkYmFzZVNxbCAuPSAidS5tZW1iZXJzaGlwX2xldmVsX2lkID0gbS5pZCBBTkQgKHUuc3RhdHVzID0gJyIuTU1fU3RhdHVzOjokQUNUSVZFLiInIE9SIHUuc3RhdHVzID0gJyIuTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04uIicpICI7CgkJCQoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJGJhc2VTcWwuIiBBTkQgbS5pc19mcmVlICE9ICcxJzsiKTsKCQkJCgkJCWlmKCRyZXN1bHQpCgkJCXsKCQkJCSRwYWlkTWVtYmVycyA9ICRyZXN1bHQtPnRvdGFsOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHBhaWRNZW1iZXJzID0gMDsKCQkJfQoJCQkKCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JFVTQUdFX1BBSURfTUVNQkVSU10gPSAkcGFpZE1lbWJlcnM7CgkJCQoJCQkvLyBGUkVFIE1FTUJFUlMgKFVTQUdFKQoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJGJhc2VTcWwuIiBBTkQgbS5pc19mcmVlID0gJzEnOyIpOwoJCQkKCQkJaWYoJHJlc3VsdCkKCQkJewoJCQkJJGZyZWVNZW1iZXJzID0gJHJlc3VsdC0+dG90YWw7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkZnJlZU1lbWJlcnMgPSAwOwoJCQl9CgkJCQoJCQkkc3RhdGlzdGljc1tzZWxmOjokVVNBR0VfRlJFRV9NRU1CRVJTXSA9ICRmcmVlTWVtYmVyczsKCQkJCgkJCS8vIFBBSUQgQlVORExFUyAoVVNBR0UpCgkJCSRiYXNlU3FsID0gIlNFTEVDVCBjb3VudCgxKSBhcyB0b3RhbF9idW5kbGVzIEZST00gIi5NTV9UQUJMRV9BUFBMSUVEX0JVTkRMRVMuIiBhcHBCdW5kbGVzLCB7JHdwZGItPnVzZXJzfSB1c2VycywgIjsKCQkJJGJhc2VTcWwgLj0gTU1fVEFCTEVfQlVORExFUy4iIGJ1bmRsZXMgV0hFUkUgYXBwQnVuZGxlcy5hY2Nlc3NfdHlwZT0nIi5NTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfVVNFUi4iJyBBTkQgYXBwQnVuZGxlcy5hY2Nlc3NfdHlwZV9pZCA9IHVzZXJzLmlkICI7CgkJCSRiYXNlU3FsIC49ICJBTkQgKGFwcEJ1bmRsZXMuc3RhdHVzPSciLk1NX1N0YXR1czo6JEFDVElWRS4iJyBPUiBhcHBCdW5kbGVzLnN0YXR1cz0nIi5NTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTi4iJykgQU5EIGFwcEJ1bmRsZXMuYnVuZGxlX2lkID0gYnVuZGxlcy5pZCAiOwoJCQkKCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRiYXNlU3FsLiIgQU5EIGJ1bmRsZXMuaXNfZnJlZSA9ICcwJzsiKTsKCQkJCgkJCWlmKCRyZXN1bHQpCgkJCXsKCQkJCSRwYWlkQnVuZGxlcyA9ICRyZXN1bHQtPnRvdGFsX2J1bmRsZXM7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkcGFpZEJ1bmRsZXMgPSAwOwoJCQl9CgkJCQoJCQkkc3RhdGlzdGljc1tzZWxmOjokVVNBR0VfUEFJRF9CVU5ETEVTXSA9ICRwYWlkQnVuZGxlczsKCQkJCgkJCS8vIEZSRUUgQlVORExFUyAoVVNBR0UpCgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3JvdygkYmFzZVNxbC4iIEFORCBidW5kbGVzLmlzX2ZyZWUgPSAnMSc7Iik7CgkJCQoJCQlpZigkcmVzdWx0KQoJCQl7CgkJCQkkZnJlZUJ1bmRsZXMgPSAkcmVzdWx0LT50b3RhbF9idW5kbGVzOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJGZyZWVCdW5kbGVzID0gMDsKCQkJfQoJCQkKCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JFVTQUdFX0ZSRUVfQlVORExFU10gPSAkZnJlZUJ1bmRsZXM7CgkKCQkJLy8gT1JERVJTCgkJCSRiYXNlU3FsID0gIlNFTEVDVCBjb3VudChvLmlkKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfT1JERVJTLiIgbyI7CgkJCQoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJGJhc2VTcWwpOwoJCQkKCQkJaWYoJHJlc3VsdCkKCQkJewoJCQkJJG9yZGVycyA9ICRyZXN1bHQtPnRvdGFsOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG9yZGVycyA9IDA7CgkJCX0KCQkJCgkJCSRzdGF0aXN0aWNzW3NlbGY6OiRVU0FHRV9PUkRFUlNdID0gJG9yZGVyczsKCQkJCgkJCS8vIFBBWU1FTlQgTUVUSE9EUwoJCQkkcGF5bWVudE1ldGhvZHMgPSBhcnJheSgpOwoJCQkKCQkJJHNlcnZpY2VzID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRBdmFpbGFibGVQYXltZW50U2VydmljZXMoKTsKCQkJCQoJCQlmb3JlYWNoICgkc2VydmljZXMgYXMgJHNlcnZpY2UpCgkJCXsKCQkJCWlmICgkc2VydmljZSBpbnN0YW5jZW9mIE1NX1BheW1lbnRTZXJ2aWNlKQoJCQkJewoJCQkJCWFycmF5X3B1c2goJHBheW1lbnRNZXRob2RzLCAkc2VydmljZS0+Z2V0VG9rZW4oKSk7CgkJCQl9CgkJCX0KCQkJCgkJCSRzdGF0aXN0aWNzW3NlbGY6OiRDT05GSUdfUEFZTUVOVF9NRVRIT0RTXSA9IGpvaW4oIiwgIiwgJHBheW1lbnRNZXRob2RzKTsKCQkJCgkJCS8vIFBBSUQgTUVNQkVSU0hJUCBMRVZFTFMKCQkJJHBhaWRNZW1iZXJzaGlwcyA9IE1NX01lbWJlcnNoaXBMZXZlbDo6Z2V0TWVtYmVyc2hpcExldmVsc0xpc3QoZmFsc2UsIE1NX01lbWJlcnNoaXBMZXZlbDo6JFNVQl9UWVBFX1BBSUQpOwoJCQkKCQkJaWYoJHBhaWRNZW1iZXJzaGlwcyAmJiBpc19hcnJheSgkcGFpZE1lbWJlcnNoaXBzKSkKCQkJewoJCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JENPTkZJR19NRU1CRVJTSElQU19QQUlEXSA9IGNvdW50KCRwYWlkTWVtYmVyc2hpcHMpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRzdGF0aXN0aWNzW3NlbGY6OiRDT05GSUdfTUVNQkVSU0hJUFNfUEFJRF0gPSAwOwoJCQl9CgkJCQoJCQkvLyBGUkVFIE1FTUJFUlNISVAgTEVWRUxTCgkJCSRmcmVlTWVtYmVyc2hpcHMgPSBNTV9NZW1iZXJzaGlwTGV2ZWw6OmdldE1lbWJlcnNoaXBMZXZlbHNMaXN0KGZhbHNlLCBNTV9NZW1iZXJzaGlwTGV2ZWw6OiRTVUJfVFlQRV9GUkVFKTsKCQkJCgkJCWlmKCRmcmVlTWVtYmVyc2hpcHMgJiYgaXNfYXJyYXkoJGZyZWVNZW1iZXJzaGlwcykpCgkJCXsKCQkJCSRzdGF0aXN0aWNzW3NlbGY6OiRDT05GSUdfTUVNQkVSU0hJUFNfRlJFRV0gPSBjb3VudCgkZnJlZU1lbWJlcnNoaXBzKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRzdGF0aXN0aWNzW3NlbGY6OiRDT05GSUdfTUVNQkVSU0hJUFNfRlJFRV0gPSAwOwoJCQl9CgkJCQoJCQkvLyBQQUlEIEJVTkRMRVMKCQkJJHBhaWRCdW5kbGVzID0gTU1fQnVuZGxlOjpnZXRCdW5kbGVzTGlzdChmYWxzZSwgTU1fQnVuZGxlOjokU1VCX1RZUEVfUEFJRCk7CgkJCQoJCQlpZigkcGFpZEJ1bmRsZXMgJiYgaXNfYXJyYXkoJHBhaWRCdW5kbGVzKSkKCQkJewoJCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JENPTkZJR19CVU5ETEVTX1BBSURdID0gY291bnQoJHBhaWRCdW5kbGVzKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRzdGF0aXN0aWNzW3NlbGY6OiRDT05GSUdfQlVORExFU19QQUlEXSA9IDA7CgkJCX0KCQkJCgkJCS8vIEZSRUUgQlVORExFUwoJCQkkZnJlZUJ1bmRsZXMgPSBNTV9CdW5kbGU6OmdldEJ1bmRsZXNMaXN0KGZhbHNlLCBNTV9CdW5kbGU6OiRTVUJfVFlQRV9GUkVFKTsKCQkJCgkJCWlmKCRmcmVlQnVuZGxlcyAmJiBpc19hcnJheSgkZnJlZUJ1bmRsZXMpKQoJCQl7CgkJCQkkc3RhdGlzdGljc1tzZWxmOjokQ09ORklHX0JVTkRMRVNfRlJFRV0gPSBjb3VudCgkZnJlZUJ1bmRsZXMpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JENPTkZJR19CVU5ETEVTX0ZSRUVdID0gMDsKCQkJfQoJCQkKCQkJLy8gUFJPRFVDVFMKCQkJJHByb2R1Y3RzID0gTU1fUHJvZHVjdDo6Z2V0QWxsKCk7CgkJCQoJCQlpZigkcHJvZHVjdHMgJiYgaXNfYXJyYXkoJHByb2R1Y3RzKSkKCQkJewoJCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JENPTkZJR19QUk9EVUNUU10gPSBjb3VudCgkcHJvZHVjdHMpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JENPTkZJR19QUk9EVUNUU10gPSAwOwoJCQl9CgkJCQoJCQkvLyBERUZBVUxUIEVNUExPWUVFIEFDQ09VTlQKCQkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmdldERlZmF1bHQoKTsKCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JENPTkZJR19ERUZBVUxUX0VNUExPWUVFX0VNQUlMXSA9ICIiOwoJCQkkc3RhdGlzdGljc1tzZWxmOjokQ09ORklHX0RFRkFVTFRfRU1QTE9ZRUVfTkFNRV0gPSAiIjsKCQkJCgkJCWlmKCRlbXBsb3llZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkc3RhdGlzdGljc1tzZWxmOjokQ09ORklHX0RFRkFVTFRfRU1QTE9ZRUVfRU1BSUxdID0gJGVtcGxveWVlLT5nZXRFbWFpbCgpOwoJCQkJJHN0YXRpc3RpY3Nbc2VsZjo6JENPTkZJR19ERUZBVUxUX0VNUExPWUVFX05BTUVdID0gJGVtcGxveWVlLT5nZXREaXNwbGF5TmFtZSgpOwoJCQl9CgkJfQoJCSRzdGF0aXN0aWNzW3NlbGY6OiRDT05GSUdfQ1VSUkVOQ1ldID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQ1VSUkVOQ1kpOwoJCQoJCXJldHVybiAkc3RhdGlzdGljczsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZVByb3BlcnRpZXMoKQoJewoJCWdsb2JhbCAkd3BfdmVyc2lvbjsKCQkkcHJvcGVydGllcyA9IGFycmF5KCk7CgkJCgkJJHByb3BlcnRpZXNbc2VsZjo6JFBST1BTX1dQX1ZFUlNJT05dID0gJHdwX3ZlcnNpb247CgkJJHByb3BlcnRpZXNbc2VsZjo6JFBST1BTX1BIUF9WRVJTSU9OXSA9IHBocHZlcnNpb24oKTsKCgkJaWYoTU1fSVNfQkVUQSA9PSB0cnVlKQoJCXsKCQkJJHByb3BlcnRpZXNbc2VsZjo6JFBST1BTX01NX0JFVEFdID0gInRydWUiOwoJCX0KCQllbHNlCgkJewoJCQkkcHJvcGVydGllc1tzZWxmOjokUFJPUFNfTU1fQkVUQV0gPSAiZmFsc2UiOwoJCX0KCQkKCQlyZXR1cm4gJHByb3BlcnRpZXM7Cgl9CgkKCQoJLyoqIFBFUk1JU1NJT05TICoqLwoJCglwdWJsaWMgc3RhdGljICRQWU1UX1NFUlZJQ0VfQVVUSE9SSVpFTkVUID0gInB5bXRfc2VydmljZV9hdXRob3JpemVuZXQiOwoJcHVibGljIHN0YXRpYyAkUFlNVF9TRVJWSUNFX0FVVEhPUklaRU5FVF9DSU0gPSAicHltdF9zZXJ2aWNlX2F1dGhvcml6ZW5ldF9jaW0iOwoJcHVibGljIHN0YXRpYyAkUFlNVF9TRVJWSUNFX1BBWVBBTCA9ICJweW10X3NlcnZpY2VfcGF5cGFsIjsKCXB1YmxpYyBzdGF0aWMgJFBZTVRfU0VSVklDRV9DTElDS0JBTksgPSAicHltdF9zZXJ2aWNlX2NsaWNrYmFuayI7CglwdWJsaWMgc3RhdGljICRQWU1UX1NFUlZJQ0VfQ0hBUkdJRlkgPSAicHltdF9zZXJ2aWNlX2NoYXJnaWZ5IjsKCXB1YmxpYyBzdGF0aWMgJFBZTVRfU0VSVklDRV9TVFJJUEUgPSAicHltdF9zZXJ2aWNlX3N0cmlwZSI7CglwdWJsaWMgc3RhdGljICRQWU1UX1NFUlZJQ0VfQlJBSU5UUkVFID0gInB5bXRfc2VydmljZV9icmFpbnRyZWUiOwoJcHVibGljIHN0YXRpYyAkUFlNVF9TRVJWSUNFX0xJTUVMSUdIVCA9ICJweW10X3NlcnZpY2VfbGltZWxpZ2h0IjsKCXB1YmxpYyBzdGF0aWMgJFBZTVRfU0VSVklDRV9MSVRMRSA9ICJweW10X3NlcnZpY2VfbGl0bGUiOwoJcHVibGljIHN0YXRpYyAkUFlNVF9TRVJWSUNFX0NPSU5CQVNFID0gInB5bXRfc2VydmljZV9jb2luYmFzZSI7CglwdWJsaWMgc3RhdGljICRQWU1UX1NFUlZJQ0VfVFdPQ0hFQ0tPVVQgPSAicHltdF9zZXJ2aWNlX3R3b2NoZWNrb3V0IjsKCXB1YmxpYyBzdGF0aWMgJE1BWF9OVU1CRVJfTUVNQkVSUyA9ICJtYXhfbnVtYmVyX21lbWJlcnMiOwoJcHVibGljIHN0YXRpYyAkU0hPV19NTV9GT09URVIgPSAic2hvd19tbV9mb290ZXIiOwoJcHVibGljIHN0YXRpYyAkRkVBVFVSRV9CVU5ETEVTID0gImZlYXR1cmVfYnVuZGxlcyI7CglwdWJsaWMgc3RhdGljICRGRUFUVVJFX0RSSVBfQ09OVEVOVF9TQ0hFRFVMRSA9ICJmZWF0dXJlX2RyaXBfY29udGVudF9zY2hlZHVsZSI7CglwdWJsaWMgc3RhdGljICRGRUFUVVJFX1BIUF9JTlRFUkZBQ0UgPSAiZmVhdHVyZV9waHBfaW50ZXJmYWNlIjsKCXB1YmxpYyBzdGF0aWMgJEZFQVRVUkVfUFVTSF9OT1RJRklDQVRJT05TID0gImZlYXR1cmVfcHVzaF9ub3RpZmljYXRpb25zIjsKCXB1YmxpYyBzdGF0aWMgJEZFQVRVUkVfQVBJID0gImZlYXR1cmVfYXBpIjsKCXB1YmxpYyBzdGF0aWMgJEZFQVRVUkVfU01BUlRfQ09OVEVOVF9UQUdTID0gImZlYXR1cmVfc21hcnRfY29udGVudF90YWdzIjsKCXB1YmxpYyBzdGF0aWMgJEZFQVRVUkVfQUZGSUxJQVRFX01HTVQgPSAiZmVhdHVyZV9hZmZpbGlhdGVfbWdtdCI7CglwdWJsaWMgc3RhdGljICRGRUFUVVJFX0xPQURfQkFMQU5DSU5HID0gImZlYXR1cmVfbG9hZF9iYWxhbmNpbmciOwoJcHVibGljIHN0YXRpYyAkRkVBVFVSRV9FTVBMT1lFRV9BQ0NPVU5UUyA9ICJmZWF0dXJlX2VtcGxveWVlX2FjY291bnRzIjsKCXB1YmxpYyBzdGF0aWMgJEZFQVRVUkVfQURWX1NVQlNDUklQVElPTl9NR01UID0gImZlYXR1cmVfYWR2X3N1YnNjcmlwdGlvbl9tZ210IjsKCXB1YmxpYyBzdGF0aWMgJEZFQVRVUkVfUkVQT1JUSU5HX1NVSVRFID0gImZlYXR1cmVfcmVwb3J0aW5nX3N1aXRlIjsKCXB1YmxpYyBzdGF0aWMgJEVYVEVOU0lPTl9VU0VSVk9JQ0UgPSAiZXh0ZW5zaW9uX3VzZXJ2b2ljZSI7CglwdWJsaWMgc3RhdGljICRFWFRFTlNJT05fU09DSUFMX0xPR0lOID0gImV4dGVuc2lvbl9zb2NpYWxfbG9naW4iOwoJcHVibGljIHN0YXRpYyAkRVhURU5TSU9OX0dPT0dMRV9FQ09NTUVSQ0UgPSAiZXh0ZW5zaW9uX2dvb2dsZV9lY29tbWVyY2UiOwoJcHVibGljIHN0YXRpYyAkU1VQUE9SVF9FTUFJTCA9ICJzdXBwb3J0X2VtYWlsIjsKCXB1YmxpYyBzdGF0aWMgJFNVUFBPUlRfUEhPTkUgPSAic3VwcG9ydF9waG9uZSI7CglwdWJsaWMgc3RhdGljICRVTkxJTUlURURfTUVNQkVSUyA9IC0xOwoJCglwdWJsaWMgc3RhdGljICRBQ1RJVkUgPSAxOwoJcHVibGljIHN0YXRpYyAkSU5BQ1RJVkUgPSAwOwoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24oJGtleSkKCXsKCQkkbGljZW5zZSA9IG5ldyBNTV9MaWNlbnNlKCk7CgkJCgkJaWYoJGxpY2Vuc2UtPmlzVmFsaWQoKSkKCQl7CgkJCSRwZXJtaXNzaW9ucyA9ICRsaWNlbnNlLT5nZXRQZXJtaXNzaW9ucygpOwoJCQkKCQkJaWYoJHBlcm1pc3Npb25zKQoJCQl7CgkJCQkkcGVybWlzc2lvbnMgPSBqc29uX2RlY29kZSgkcGVybWlzc2lvbnMpOwoJCQkJCgkJCQkvKiogVEVTVElORyBQVVJQT1NFUyBPTkxZICoqLwoJCQkJaWYoJGtleSA9PSAicHltdF9zZXJ2aWNlX3R3b2NoZWNrb3V0IikKCQkJCXsKICAJCQkgICRwZXJtaXNzaW9ucy0+JGtleSA9IDE7CQogIAkJICB9CgkJCQkKCQkJCWlmKGlzX29iamVjdCgkcGVybWlzc2lvbnMpICYmIGlzc2V0KCRwZXJtaXNzaW9ucy0+JGtleSkpCgkJCQl7CgkJCQkJcmV0dXJuICRwZXJtaXNzaW9ucy0+JGtleTsKCQkJCX0KCQkJfQoJCQkKCQkJcmV0dXJuIHNlbGY6OiRJTkFDVElWRTsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TWVtYmVyTGltaXQoKQoJewoJCSRsaWNlbnNlID0gbmV3IE1NX0xpY2Vuc2UoKTsKCQkKCQlpZigkbGljZW5zZS0+aXNWYWxpZCgpKQoJCXsKCQkJJHBlcm1pc3Npb25zID0gJGxpY2Vuc2UtPmdldFBlcm1pc3Npb25zKCk7CgkJCQkKCQkJaWYoJHBlcm1pc3Npb25zKQoJCQl7CgkJCQkkcGVybWlzc2lvbnMgPSBqc29uX2RlY29kZSgkcGVybWlzc2lvbnMpOwoJCQkJCgkJCQlpZihpc19vYmplY3QoJHBlcm1pc3Npb25zKSAmJiBpc3NldCgkcGVybWlzc2lvbnMtPm1heF9udW1iZXJfbWVtYmVycykpCgkJCQl7CgkJCQkJcmV0dXJuICRwZXJtaXNzaW9ucy0+bWF4X251bWJlcl9tZW1iZXJzOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiAtMTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVcGdyYWRlVXJsKCRmZWF0dXJlPSIiKQoJewoJCSRsaWNlbnNlID0gbmV3IE1NX0xpY2Vuc2UoKTsKCQlpZihlbXB0eSgkZmVhdHVyZSkpCgkJewoJCQlzd2l0Y2goJGxpY2Vuc2UtPmdldHBlcm1pc3Npb25zUHJvZmlsZUlkKCkpCgkJCXsKCQkJCS8vIGZyZWUKCQkJCWNhc2UgMToKCQkJCQlyZXR1cm4gImh0dHBzOi8vbWVtYmVybW91c2UuY29tL2NoZWNrb3V0Lz9yaWQ9cEs0RTE4IjsKCgkJCQkvLyBzdGFydGVyIHYxCgkJCQljYXNlIDI6CgkJCQkJcmV0dXJuICJodHRwczovL21lbWJlcm1vdXNlLmNvbS9jaGVja291dC8/cmlkPXB3NDIzNyI7CgkJCQkKCQkJCS8vIGdyb3d0aCB2MQoJCQkJY2FzZSAzOiAKCQkJCQlyZXR1cm4gImh0dHBzOi8vbWVtYmVybW91c2UuY29tL2NoZWNrb3V0Lz9yaWQ9cHc0MjM3IjsKCQkJCQoJCQkJLy8gcHJvZmVzc2lvbmFsIHYxCgkJCQljYXNlIDQ6CgkJCQkJcmV0dXJuICJodHRwczovL21lbWJlcm1vdXNlLmNvbS9jaGVja291dC8/cmlkPXB2QlF0SCI7CgkJCQkJCgkJCQkvLyBzdGFydGVyIHYyCgkJCQljYXNlIDU6CgkJCQkJcmV0dXJuICJodHRwczovL21lbWJlcm1vdXNlLmNvbS9jaGVja291dC8/cmlkPXBqV2I4biI7CgkJCQkJCgkJCQkvLyBidWlsZGVyIHYyCgkJCQljYXNlIDY6CgkJCQkJcmV0dXJuICJodHRwczovL21lbWJlcm1vdXNlLmNvbS9jaGVja291dC8/cmlkPXBOV3hrUyI7CgkJCQkJCgkJCQkvLyBncm93dGggdjIKCQkJCWNhc2UgNzoKCQkJCQlyZXR1cm4gImh0dHBzOi8vbWVtYmVybW91c2UuY29tL2NoZWNrb3V0Lz9yaWQ9cHc0MjM3IjsKCQkJCQkKCQkJCS8vIGFkdmFuY2VkIHYyCgkJCQljYXNlIDEwOgoJCQkJCXJldHVybiAiaHR0cHM6Ly9tZW1iZXJtb3VzZS5jb20vY2hlY2tvdXQvP3JpZD1wNE51MXUiOwoJCQkJCQoJCQkJLy8gcHJlbWl1bSB2MgoJCQkJY2FzZSA4OgoJCQkJCXJldHVybiAiaHR0cHM6Ly9tZW1iZXJtb3VzZS5jb20vY2hlY2tvdXQvP3JpZD1wdkJRdEgiOwoJCQkJCQoJCQkJLy8gcHJvZmVzc2lvbmFsIHYyCgkJCQljYXNlIDk6CgkJCQkJcmV0dXJuICJodHRwczovL21lbWJlcm1vdXNlLmNvbS9jaGVja291dC8/cmlkPXB2QlF0SCI7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiAiaHR0cHM6Ly9tZW1iZXJtb3VzZS5jb20vY2hlY2tvdXQvP3JpZD1wSzRFMTgiOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiaHR0cDovL21lbWJlcm1vdXNlLmNvbS91cGdyYWRlLnBocD9wcm9maWxlaWQ9Ii4kbGljZW5zZS0+Z2V0cGVybWlzc2lvbnNQcm9maWxlSWQoKS4iJmZlYXR1cmU9Ii4kZmVhdHVyZTsKCQl9Cgl9CgkKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGluaXRpYXRlUGx1Z2luRGVhY3RpdmF0aW9uKCkKCXsKCQkvLyBpZiBsb2dnZWQgaW4gYXMgYW4gYWRtaW4gYW5kIGluIHRoZSBhZG1pbiBhcmVhLCBkaXNhYmxlIHRoZSBwbHVnaW4gdGhyb3VnaCBXb3JkUHJlc3MsIG90aGVyd2lzZQoJCS8vIG1hbnVhbGx5IGRlYWN0aXZhdGUgdGhlIHBsdWdpbiB0aHJvdWdoIHRoZSBkYXRhYmFzZQoJCWlmKGlzX2FkbWluKCkpCgkJewoJCQlpZighcHJlZ19tYXRjaCgiLyhwbHVnaW5zXC5waHApLyIsICRfU0VSVkVSWyJQSFBfU0VMRiJdKSkKCQkJewoJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwicGx1Z2luIGRlYWN0aXZhdGVkIGZyb20gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjppbml0aWF0ZVBsdWdpbkRlYWN0aXZhdGlvbiIpOwoJCQkJaGVhZGVyKCJMb2NhdGlvbjogcGx1Z2lucy5waHA/Ii5NTV9TZXNzaW9uOjokUEFSQU1fQ09NTUFORF9ERUFDVElWQVRFLiI9MSZkZWFjdGl2YXRlPXRydWUiKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlzZWxmOjptYW51YWxseURlYWN0aXZhdGVQbHVnaW4oKTsKCQl9Cgl9CgkKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIG1hbnVhbGx5RGVhY3RpdmF0ZVBsdWdpbigpCgl7CgkJJHBsdWdpbnMgPSBnZXRfb3B0aW9uKCdhY3RpdmVfcGx1Z2lucycpOwoJCgkJaWYoaXNfYXJyYXkoJHBsdWdpbnMpICYmIGNvdW50KCRwbHVnaW5zKSA+IDApCgkJewoJCQkkcGx1Z2luTmFtZSA9IE1NX1BMVUdJTl9OQU1FLiIvaW5kZXgucGhwIjsKCQkJJGtleSA9IGFycmF5X3NlYXJjaCgkcGx1Z2luTmFtZSwgJHBsdWdpbnMsIHRydWUpOwoJCQkJCgkJCWlmKCRrZXkgIT09IGZhbHNlKQoJCQl7CgkJCQl1bnNldCgkcGx1Z2luc1ska2V5XSk7CgkJCX0KCQkJCQoJCQl1cGRhdGVfb3B0aW9uKCJhY3RpdmVfcGx1Z2lucyIsICRwbHVnaW5zKTsKCQkJCgkJCS8vIHNlbmQgYW4gZW1haWwgdG8gdGhlIGRlZmF1bHQgZW1wbG95ZWUKCQkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmdldERlZmF1bHQoKTsKCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCSRlbWFpbC0+c2V0Q29udGV4dChuZXcgTU1fQ29udGV4dCgpKTsKCQkJJGVtYWlsLT5zZXRTdWJqZWN0KCJNZW1iZXJNb3VzZSBkZWFjdGl2YXRlZCBvbiAiLmdldF9vcHRpb24oJ3NpdGV1cmwnKSk7CgkJCSRlbWFpbC0+c2V0RnJvbU5hbWUoIk1lbWJlck1vdXNlIE5vdGlmaWNhdGlvbiIpOwoJCQkkZW1haWwtPnNldEZyb21BZGRyZXNzKCJkby1ub3QtcmVwbHlAbWVtYmVybW91c2UuY29tIik7CgkJCSRlbWFpbC0+c2V0VG9OYW1lKCRlbXBsb3llZS0+Z2V0Rmlyc3ROYW1lKCkpOwoJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkKCQkJJGJvZHkgPSAiTWVtYmVyTW91c2UgaGFzIGJlZW4gZGVhY3RpdmF0ZWQgb24gIi5nZXRfb3B0aW9uKCdzaXRldXJsJykuIi5cblxuVGhpcyBpcyBtb3N0IGxpa2VseSBiZWNhdXNlIHlvdXIgTWVtYmVyTW91c2UgbGljZW5zZSBoYXMgZXhwaXJlZC5cblxuIjsKCQkJJGJvZHkgLj0gIklmIHlvdSB0aGluayB0aGlzIHdhcyBkb25lIGluIGVycm9yLCBwbGVhc2UgY29udGFjdCB1cyBhdCBzdXBwb3J0QG1lbWJlcm1vdXNlLmNvbS5cblxuVGhhbmsgeW91LFxuTWVtYmVyTW91c2UgU3VwcG9ydCBUZWFtIjsKCQkJJGVtYWlsLT5zZXRCb2R5KCRib2R5KTsKCQkJCgkJCSRlbWFpbC0+c2VuZCgpOwoJCQkKCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwicGx1Z2luIGRlYWN0aXZhdGVkIGZyb20gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjptYW51YWxseURlYWN0aXZhdGVQbHVnaW4oKSIpOwoJCQlzZWxmOjpkZWFjdGl2YXRlUGx1Z2luKCk7CgkJfQoJfQoJCgkKCS8qKiBMSUNFTlNFIEhFTFBFUiBNRVRIT0RTICoqLwoJLyoqCgkgKiBUaGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIGFzc29jaWF0ZWQgd2l0aCBhbmQgY2FsbGVkIGZyb20gdGhlIE1NX0xpY2Vuc2UgY2xhc3MuIFRoZXkncmUgcHV0IGhlcmUgdG8gZW5zdXJlCgkgKiB0aGUgaGlnaGVzdCBsZXZlbCBvZiBzZWN1cml0eSBob3dldmVyIHRoZSBhcHBsaWNhdGlvbiBzaG91bGRuJ3QgaW50ZXJhY3Qgd2l0aCB0aGVtIGRpcmVjdGx5IG9uIHRoaXMgY2xhc3MsCgkgKiB0aGV5IHNob3VsZCB1c2UgTU1fTGljZW5zZSBhcyB0aGUgbWFpbiBvYmplY3QgdG8gaW50ZXJmYWNlIHdpdGguCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TGljZW5zZShNTV9MaWNlbnNlICRsaWNlbnNlKQoJewoJCS8vYXR0ZW1wdCB0byByZXRyaWV2ZSBjYWNoZWQgbGljZW5zZSBvYmplY3QgZnJvbSBwcml2YXRlIHN0YXRpYyB2YXJpYWJsZS4gVGhpcyBwcmV2ZW50cyB1bm5lY2Vzc2FyeSBkYiBoaXQgYW5kIGRlY29kaW5nCgkJJGNhY2hlZE9iakV4aXN0cyA9IChzZWxmOjokQ0FDSEVEX0xJQ0VOU0VfT0JKICE9PSBudWxsKTsKCQkKCQlpZiAoISRjYWNoZWRPYmpFeGlzdHMpCgkJewoJCQkvL3JldHJpZXZlIGNhY2hlZCBsaWNlbnNlIGRhdGEgZnJvbSBvcHRpb24KCQkJJGxpY2Vuc2VEYXRhID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfTElDRU5TRV9EQVRBKTsKCQkJaWYoZW1wdHkoJGxpY2Vuc2VEYXRhKSB8fCBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmRvQXV0aG9yaXplKCkpCgkJCXsKCQkJCU1NX01lbWJlck1vdXNlU2VydmljZTo6YXV0aG9yaXplKGZhbHNlKTsKCQkJCXNlbGY6OnJlbGVhc2VTZW1hcGhvcmUoKTsKCQkJCSRsaWNlbnNlRGF0YSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0xJQ0VOU0VfREFUQSk7CgkJCX0KCQkJCgkJCWlmKGVtcHR5KCRsaWNlbnNlRGF0YSkgJiYgTU1fVXRpbHM6OmlzTWVtYmVyTW91c2VBY3RpdmUoKSkKCQkJewoJCQkJTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjppbml0aWF0ZVBsdWdpbkRlYWN0aXZhdGlvbigpOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCQoJCQkvLyB1bm9iZnVzY2F0ZSBsaWNlbnNlIGRhdGEKCQkJJGxpY2Vuc2VEYXRhID0gdW5zZXJpYWxpemUoYmFzZTY0X2RlY29kZSgkbGljZW5zZURhdGEpKTsKCQkJaWYgKGlzX29iamVjdCgkbGljZW5zZURhdGEpKQoJCQl7CgkJCQlzZWxmOjokQ0FDSEVEX0xJQ0VOU0VfT0JKID0gJGxpY2Vuc2VEYXRhOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkkbGljZW5zZURhdGEgPSBzZWxmOjokQ0FDSEVEX0xJQ0VOU0VfT0JKOwoJCX0KCQkKCQlpZighaXNfbnVsbCgkbGljZW5zZURhdGEpICYmIGlzc2V0KCRsaWNlbnNlRGF0YS0+aWQpKQoJCXsKCQkJJGxpY2Vuc2UtPnNldElkKCRsaWNlbnNlRGF0YS0+aWQpOwoJCQkkbGljZW5zZS0+c2V0TWVtYmVySWQoJGxpY2Vuc2VEYXRhLT5tZW1iZXJJZCk7CgkJCSRsaWNlbnNlLT5zZXROYW1lKCRsaWNlbnNlRGF0YS0+bmFtZSk7CgkJCSRsaWNlbnNlLT5zZXRVcmwoJGxpY2Vuc2VEYXRhLT51cmwpOwoJCQkkbGljZW5zZS0+c2V0QXBpS2V5KCRsaWNlbnNlRGF0YS0+YXBpS2V5KTsKCQkJJGxpY2Vuc2UtPnNldEFwaVNlY3JldCgkbGljZW5zZURhdGEtPmFwaVNlY3JldCk7CgkJCSRsaWNlbnNlLT5zZXRNYWpvclZlcnNpb24oJGxpY2Vuc2VEYXRhLT5tYWpvclZlcnNpb24pOwoJCQkkbGljZW5zZS0+c2V0TWlub3JWZXJzaW9uKCRsaWNlbnNlRGF0YS0+bWlub3JWZXJzaW9uKTsKCQkJJGxpY2Vuc2UtPnNldFBlcm1pc3Npb25zUHJvZmlsZUlkKCRsaWNlbnNlRGF0YS0+cGVybWlzc2lvbnNQcm9maWxlSWQpOwoJCQkkbGljZW5zZS0+c2V0UGVybWlzc2lvbnMoJGxpY2Vuc2VEYXRhLT5wZXJtaXNzaW9ucyk7CgkJCSRsaWNlbnNlLT5zZXRTdGF0dXMoJGxpY2Vuc2VEYXRhLT5zdGF0dXMpOwoJCQkkbGljZW5zZS0+c2V0TGFzdFVwZGF0ZWQoJGxpY2Vuc2VEYXRhLT5sYXN0VXBkYXRlZCk7CgkJCSRsaWNlbnNlLT5zZXREYXRlQWRkZWQoJGxpY2Vuc2VEYXRhLT5kYXRlQWRkZWQpOwoJCQkkbGljZW5zZS0+c2V0QXV0aEtleShiYXNlNjRfZW5jb2RlKGdldF9vcHRpb24oInNpdGV1cmwiKSkpOwoJCQkkbGljZW5zZS0+dmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc3RvcmVMaWNlbnNlKE1NX0xpY2Vuc2UgJGxpY2Vuc2UpCgl7CgkJJGxpY2Vuc2VEYXRhID0gYmFzZTY0X2VuY29kZShzZXJpYWxpemUoc2VsZjo6cGFja2FnZVVwTGljZW5zZURhdGEoJGxpY2Vuc2UpKSk7CgkJTU1fT3B0aW9uVXRpbHM6OnNldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfTElDRU5TRV9EQVRBLCAkbGljZW5zZURhdGEpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHZhbGlkYXRlTGljZW5zZShNTV9MaWNlbnNlICRsaWNlbnNlKQoJewoJCSRhdXRoS2V5ID0gYmFzZTY0X2RlY29kZSgkbGljZW5zZS0+Z2V0QXV0aEtleSgpKTsKCQkKCQlpZihlbXB0eSgkYXV0aEtleSkgfHwgKCRhdXRoS2V5ICE9IGdldF9vcHRpb24oInNpdGV1cmwiKSkpCgkJewoJCQlzZWxmOjppbml0aWF0ZVBsdWdpbkRlYWN0aXZhdGlvbigpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoJCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBwYWNrYWdlVXBMaWNlbnNlRGF0YShNTV9MaWNlbnNlICRsaWNlbnNlKQoJewoJCSRkYXRhID0gbmV3IHN0ZENsYXNzKCk7CgkKCQkkZGF0YS0+aWQgPSAkbGljZW5zZS0+Z2V0SWQoKTsKCQkkZGF0YS0+bWVtYmVySWQgPSAkbGljZW5zZS0+Z2V0TWVtYmVySWQoKTsKCQkkZGF0YS0+bmFtZSA9ICRsaWNlbnNlLT5nZXROYW1lKCk7CgkJJGRhdGEtPnVybCA9ICRsaWNlbnNlLT5nZXRVcmwoKTsKCQkkZGF0YS0+YXBpS2V5ID0gJGxpY2Vuc2UtPmdldEFwaUtleSgpOwoJCSRkYXRhLT5hcGlTZWNyZXQgPSAkbGljZW5zZS0+Z2V0QXBpU2VjcmV0KCk7CgkJJGRhdGEtPm1ham9yVmVyc2lvbiA9ICRsaWNlbnNlLT5nZXRNYWpvclZlcnNpb24oKTsKCQkkZGF0YS0+bWlub3JWZXJzaW9uID0gJGxpY2Vuc2UtPmdldE1pbm9yVmVyc2lvbigpOwoJCSRkYXRhLT5wZXJtaXNzaW9uc1Byb2ZpbGVJZCA9ICRsaWNlbnNlLT5nZXRwZXJtaXNzaW9uc1Byb2ZpbGVJZCgpOwoJCSRkYXRhLT5wZXJtaXNzaW9ucyA9ICRsaWNlbnNlLT5nZXRQZXJtaXNzaW9ucygpOwoJCSRkYXRhLT5zdGF0dXMgPSAkbGljZW5zZS0+Z2V0U3RhdHVzKCk7CgkJJGRhdGEtPmlzQXJjaGl2ZWRGbGFnID0gJGxpY2Vuc2UtPmlzQXJjaGl2ZWQoKTsKCQkkZGF0YS0+bGFzdFVwZGF0ZWQgPSAkbGljZW5zZS0+Z2V0TGFzdFVwZGF0ZWQoKTsKCQkkZGF0YS0+ZGF0ZUFkZGVkID0gJGxpY2Vuc2UtPmdldERhdGVBZGRlZCgpOwoJCgkJcmV0dXJuICRkYXRhOwoJfQoJCgkKCS8qKiBQUk9URUNURUQgVVRJTElURVMgKiovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGVuY3J5cHRQYXNzd29yZCgkcGFzc3dvcmQpCgl7CgkJZm9yKCRpPTA7ICRpPDU7ICRpKyspCgkJewoJCQkkcGFzc3dvcmQgPSBzdHJyZXYoYmFzZTY0X2VuY29kZSgkcGFzc3dvcmQpKTsKCQl9CgkJCQoJCXJldHVybiAkcGFzc3dvcmQ7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBkZWNyeXB0UGFzc3dvcmQoJHBhc3N3b3JkKQoJewoJCWZvcigkaT0wOyAkaTw1OyAkaSsrKQoJCXsKCQkJJHBhc3N3b3JkID0gYmFzZTY0X2RlY29kZShzdHJyZXYoJHBhc3N3b3JkKSk7CgkJfQoKCQlyZXR1cm4gJHBhc3N3b3JkOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcmVndWxhdGVTY2hlZHVsaW5nRW50cmllcygpCgl7CgkgICAgZ2xvYmFsICR3cGRiOwoJICAgIAoJCSRsb2NrTmFtZSA9IHN1YnN0cigieyR3cGRiLT5wcmVmaXh9LW1tLXNjaGVkdWxpbmctcmVndWxhdG9yIiwwLDYzKTsgLy9vcHRpb24gYW5kIGxvY2sgaWRlbnRpZmllciBhcmUgdGhlIHNhbWUKCQkkZGF0YU9wdGlvbk5hbWUgPSBzdWJzdHIoInskd3BkYi0+cHJlZml4fW1tLXNjaHJlZy1kYXRhIiwwLDYzKTsKCQkkbWV0aG9kID0gInJlcG9ydER1cGxpY2F0ZVNjaGVkdWxlcyI7CgkgICAgJHVybCA9IHNlbGY6OiRTRVJWRVJJUC4kbWV0aG9kOwoJICAgIAoJICAgICRvcHRpb25WYWx1ZSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oJGxvY2tOYW1lKTsKCSAgICAKCSAgICBpZiAoJG9wdGlvblZhbHVlID09IGZhbHNlKQoJICAgIHsKCSAgICAgICAgCgkgICAgICAgICRsb2NrQWNxdWlyZWQgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIENPQUxFU0NFKEdFVF9MT0NLKCd7JGxvY2tOYW1lfScsMCksMCkiKTsKCSAgICAgICAgCgkgICAgICAgIGlmICgkbG9ja0FjcXVpcmVkID09IDEpIC8vYmVnaW4gbG9ja2VkIHNlY3Rpb24KCSAgICAgICAgewoJICAgICAgICAgICAgLy9zZXQgdGltZSBsaW1pdCB0byBpbmZpbml0ZQoJICAgICAgICAgICAgc2V0X3RpbWVfbGltaXQoMCk7CgkgICAgICAgICAgICAKCSAgICAgICAgICAgIC8vdXNlZCBsYXRlciB0byBkZXRlcm1pbmUgaG93IHRvIGFjdCBpbiB0aGUgZXZlbnQgb2YgdHJhbnNtaXNzaW9uIGVycm9ycwoJICAgICAgICAgICAgJHN0b3JlRm9yTGF0ZXIgPSBmYWxzZTsKCSAgICAgICAgICAgIAoJICAgICAgICAgICAgJHNlVGFibGUgPSBNTV9UQUJMRV9TQ0hFRFVMRURfRVZFTlRTOwoJICAgICAgICAgICAgJHNwVGFibGUgPSBNTV9UQUJMRV9TQ0hFRFVMRURfUEFZTUVOVFM7CgkgICAgICAgICAgICAKCSAgICAgICAgICAgIC8vcmV0cmlldmUgdXNlciBpZCwgb3JkZXIgaWQsIG9yZGVyIG51bWJlciwgaG93IG1hbnkgZnV0dXJlIHNjaGVkdWxlZCBldmVudHMgdGhlcmUgYXJlLCBhbmQgYSBsaXN0IG9mIGV2ZW50IGlkcwoJICAgICAgICAgICAgLy9mb3IgZXZlcnkgb3JkZXIgaXRlbSB0aGF0IGhhcyBtb3JlIHRoYW4gb25lIHVucHJvY2Vzc2VkICh3ZSBjYW4gYXNzdW1lIGZ1dHVyZSkgc2NoZWR1bGVkIGV2ZW50CgkgICAgICAgICAgICAvL3RoZXNlIHZpb2xhdGUgdGhlIGNvbnN0cmFpbnQgdGhhdCBldmVyeSBvcmRlciBpdGVtIGhhcyBhdCBtb3N0IG9uZSBmdXR1cmUgc2NoZWR1bGVkIHBheW1lbnQgZXZlbnQKCSAgICAgICAgICAgICRzcWwgPSAiU0VMRUNUIEEuc2NoZWR1bGVfaWRzLCBBLm9yZGVyX2l0ZW1faWQsIEEuZnJlcSwgby5pZCBBUyBvcmRlcl9pZCwgby5vcmRlcl9udW1iZXIsIG8udXNlcl9pZCBGUk9NICIuCgkgICAgICAgICAgICAiKFNFTEVDVCBncm91cF9jb25jYXQoc2UuaWQpIEFTIHNjaGVkdWxlX2lkcywgc3Aub3JkZXJfaXRlbV9pZCwgQ09VTlQoMSkgQVMgZnJlcSBGUk9NIHskc2VUYWJsZX0gc2UgSU5ORVIgSk9JTiB7JHNwVGFibGV9IHNwICIuCgkgICAgICAgICAgICAiT04gKHNlLmlkID0gc3AuaWQpIFdIRVJFIChzZS5wcm9jZXNzZWRfZGF0ZSBJUyBOVUxMKSBHUk9VUCBCWSBzcC5vcmRlcl9pdGVtX2lkIEhBVklORyBmcmVxID4gMSkgQVMgQSAiLgoJICAgICAgICAgICAgIklOTkVSIEpPSU4gbW1fb3JkZXJfaXRlbXMgb2kgT04gKEEub3JkZXJfaXRlbV9pZCA9IG9pLmlkKSBJTk5FUiBKT0lOIG1tX29yZGVycyBvIE9OIChvaS5vcmRlcl9pZCA9IG8uaWQpIjsKCSAgICAgICAgICAgICRvY2N1cnJlbmNlcyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCSAgICAgICAgICAgIAoJICAgICAgICAgICAgaWYgKGNvdW50KCRvY2N1cnJlbmNlcykgPiAwKQoJICAgICAgICAgICAgewoJICAgICAgICAgICAgICAgICRsaWNlbnNlID0gbmV3IE1NX0xpY2Vuc2UoIiIsZmFsc2UpOwoJICAgICAgICAgICAgICAgIE1NX01lbWJlck1vdXNlU2VydmljZTo6Z2V0TGljZW5zZSgkbGljZW5zZSk7CgkgICAgICAgICAgICAgICAgJHBhY2thZ2VkRGF0YSA9IGFycmF5KCJhcGlfa2V5IiAgICAgICA9PiAkbGljZW5zZS0+Z2V0QXBpS2V5KCksCgkgICAgICAgICAgICAgICAgICAgICJhcGlfc2VjcmV0IiAgICAgPT4gJGxpY2Vuc2UtPmdldEFwaVNlY3JldCgpLAoJICAgICAgICAgICAgICAgICAgICAiY29tbWFuZCIJCSAgPT4gInJlcG9ydER1cGxpY2F0ZVNjaGVkdWxlcyIsCgkgICAgICAgICAgICAgICAgICAgICJkYXRhIiAJICAgICAgPT4gJG9jY3VycmVuY2VzCgkgICAgICAgICAgICAgICAgKTsKCSAgICAgICAgICAgICAgICAKCSAgICAgICAgICAgICAgICAvL3NlbmQgcGFja2FnZWQgZGF0YSB0byBjZW50cmFsCgkgICAgICAgICAgICAgICAgCgkgICAgICAgICAgICAgICAgJHJlc3BvbnNlID0gd3BfcmVtb3RlX3Bvc3QoJHVybCwgYXJyYXkoJ21ldGhvZCcgPT4gJ1BPU1QnLAoJICAgICAgICAgICAgICAgICAgICAndGltZW91dCcgPT4gMTIwLAoJICAgICAgICAgICAgICAgICAgICAnYm9keSc9PiRwYWNrYWdlZERhdGEpKTsKCSAgICAgICAgICAgICAgICAKCSAgICAgICAgICAgICAgICBpZiAoaXNfd3BfZXJyb3IoJHJlc3BvbnNlKSB8fCAoaXNzZXQoJHJlc3BvbnNlWydyZXNwb25zZSddKSAmJiBpc3NldCgkcmVzcG9uc2VbJ3Jlc3BvbnNlJ11bJ2NvZGUnXSkgJiYgKCRyZXNwb25zZVsncmVzcG9uc2UnXVsnY29kZSddICE9ICIyMDAiKSkgfHwKCSAgICAgICAgICAgICAgICAgICAgKCFpc3NldCgkcmVzcG9uc2VbJ2JvZHknXSkpICkKCSAgICAgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgICAgIC8vIHVuYWJsZSB0byBjb25uZWN0IHRvIHNlcnZlcgoJICAgICAgICAgICAgICAgICAgICAkc3RvcmVGb3JMYXRlciA9IHRydWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UKCSAgICAgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgICAgICRqc29uID0ganNvbl9kZWNvZGUoJHJlc3BvbnNlWydib2R5J10pOwoJICAgICAgICAgICAgICAgICAgICBpZiAoIWlzc2V0KCRqc29uLT5yZXNwb25zZV9jb2RlKSB8fCAoJGpzb24tPnJlc3BvbnNlX2NvZGUgIT0gIjIwMCIpKQoJICAgICAgICAgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgICAgICAgICAkc3RvcmVGb3JMYXRlciA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgCgkgICAgICAgICAgICAgICAgaWYgKCRzdG9yZUZvckxhdGVyKQoJICAgICAgICAgICAgICAgIHsKCSAgICAgICAgICAgICAgICAgICAgdXBkYXRlX29wdGlvbigkZGF0YU9wdGlvbk5hbWUsJG9jY3VycmVuY2VzLHRydWUpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAKCSAgICAgICAgICAgICAgICAvL25vdyByZW1vdmUgZHVwbGljYXRlZCBzY2hlZHVsZXMKCSAgICAgICAgICAgICAgICBmb3JlYWNoICgkb2NjdXJyZW5jZXMgYXMgJG9jY3VycmVuY2UpCgkgICAgICAgICAgICAgICAgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJG9jY3VycmVuY2UtPnNjaGVkdWxlX2lkcykgJiYgKHN0cnBvcygkb2NjdXJyZW5jZS0+c2NoZWR1bGVfaWRzLCIsIikgIT09IGZhbHNlKSkKCSAgICAgICAgICAgICAgICAgICAgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgdGhlIGZpcnN0IGlkLCBkZWxldGUgdGhlIHJlbWFpbmluZyBpZHMKCSAgICAgICAgICAgICAgICAgICAgICAgICRyZW1haW5pbmdTY2hlZHVsZXMgPSBzdWJzdHIoJG9jY3VycmVuY2UtPnNjaGVkdWxlX2lkcyxzdHJwb3MoJG9jY3VycmVuY2UtPnNjaGVkdWxlX2lkcywiLCIpKzEpOwoJICAgICAgICAgICAgICAgICAgICAgICAgJGRlbGV0ZVF1ZXJ5QSA9ICJERUxFVEUgRlJPTSB7JHNlVGFibGV9IFdIRVJFIChwcm9jZXNzZWRfZGF0ZSBJUyBOVUxMKSBBTkQgaWQgSU4gKHskcmVtYWluaW5nU2NoZWR1bGVzfSkiOwoJICAgICAgICAgICAgICAgICAgICAgICAgJHdwZGItPnF1ZXJ5KCRkZWxldGVRdWVyeUEpOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIAoJICAgICAgICAgICAgICAgICRkZWxldGVRdWVyeUIgPSAiREVMRVRFIHNwIEZST00geyRzcFRhYmxlfSBzcCBMRUZUIEpPSU4geyRzZVRhYmxlfSBzZSBPTiAoc2UuaWQgPSBzcC5pZCkgV0hFUkUgc2UuaWQgSVMgTlVMTCI7CgkgICAgICAgICAgICAgICAgJHdwZGItPnF1ZXJ5KCRkZWxldGVRdWVyeUIpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgCgkgICAgICAgICAgICAvL3NldCB0aGUgb3B0aW9uIHNvIHRoaXMgZG9lc24ndCBydW4gYWdhaW4KCSAgICAgICAgICAgIGlmICgkc3RvcmVGb3JMYXRlcikKCSAgICAgICAgICAgIHsKCSAgICAgICAgICAgICAgICB1cGRhdGVfb3B0aW9uKCRsb2NrTmFtZSwicGVuZGluZyIsdHJ1ZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlCgkgICAgICAgICAgICB7CgkgICAgICAgICAgICAgICAgdXBkYXRlX29wdGlvbigkbG9ja05hbWUsImNvbXBsZXRlZCIsdHJ1ZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAKCSAgICAgICAgICAgIC8vZW5kIGxvY2tlZCBzZWN0aW9uCgkgICAgICAgICAgICAkd3BkYi0+cXVlcnkoIlNFTEVDVCBSRUxFQVNFX0xPQ0soJ3skbG9ja05hbWV9JykiKTsKCSAgICAgICAgfQoJICAgIH0KCSAgICBlbHNlIGlmICgkb3B0aW9uVmFsdWUgPT0gInBlbmRpbmciKQoJICAgIHsKCSAgICAgICAgJGRhdGFPcHRpb25WYWx1ZSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oJGRhdGFPcHRpb25OYW1lKTsKCSAgICAgICAgaWYgKCRkYXRhT3B0aW9uVmFsdWUgIT09IGZhbHNlKQoJICAgICAgICB7CgkgICAgICAgICAgICAvL3RoZSBzY2hlZHVsaW5nIHJlZ3VsYXRvciBjb21wbGV0ZWQsIGJ1dCB0aGVyZSB3YXMgcHJldmlvdXNseSBhbiBpc3N1ZSBzZW5kaW5nIHRoZSBkYXRhIHRvIGNlbnRyYWwsIHRyeSBhZ2FpbgoJICAgICAgICAgICAgJGxpY2Vuc2UgPSBuZXcgTU1fTGljZW5zZSgiIixmYWxzZSk7CgkgICAgICAgICAgICBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmdldExpY2Vuc2UoJGxpY2Vuc2UpOwoJICAgICAgICAgICAgCgkgICAgICAgICAgICAkcGFja2FnZWREYXRhID0gYXJyYXkoImFwaV9rZXkiICAgICAgID0+ICRsaWNlbnNlLT5nZXRBcGlLZXkoKSwKCSAgICAgICAgICAgICAgICAiYXBpX3NlY3JldCIgICAgPT4gJGxpY2Vuc2UtPmdldEFwaVNlY3JldCgpLAoJICAgICAgICAgICAgICAgICJjb21tYW5kIgkJICA9PiAicmVwb3J0RHVwbGljYXRlU2NoZWR1bGVzIiwKCSAgICAgICAgICAgICAgICAiZGF0YSIgCSAgICAgID0+ICRkYXRhT3B0aW9uVmFsdWUKCSAgICAgICAgICAgICk7CgkgICAgICAgICAgICAKCSAgICAgICAgICAgICRyZXNwb25zZSA9IHdwX3JlbW90ZV9wb3N0KCR1cmwsIGFycmF5KCdtZXRob2QnID0+ICdQT1NUJywKCSAgICAgICAgICAgICAgICAndGltZW91dCcgPT4gMTIwLAoJICAgICAgICAgICAgICAgICdib2R5Jz0+JHBhY2thZ2VkRGF0YSkpOwoJICAgICAgICAgICAgCgkgICAgICAgICAgICBpZiAoaXNfd3BfZXJyb3IoJHJlc3BvbnNlKSB8fCAoaXNzZXQoJHJlc3BvbnNlWydyZXNwb25zZSddKSAmJiBpc3NldCgkcmVzcG9uc2VbJ3Jlc3BvbnNlJ11bJ2NvZGUnXSkgJiYgKCRyZXNwb25zZVsncmVzcG9uc2UnXVsnY29kZSddICE9ICIyMDAiKSkgfHwKCSAgICAgICAgICAgICAgICAoIWlzc2V0KCRyZXNwb25zZVsnYm9keSddKSkgKQoJICAgICAgICAgICAgewoJICAgICAgICAgICAgICAgIC8vIHVuYWJsZSB0byBjb25uZWN0IHRvIHNlcnZlcgoJICAgICAgICAgICAgICAgIHVwZGF0ZV9vcHRpb24oJGxvY2tOYW1lLCJjb21wbGV0ZWQiLHRydWUpOyAvL3NldCBvcHRpb24gdG8gY29tcGxldGVkLCBidXQgbGVhdmUgdGhlIGRhdGEgc28gaXQgY2FuIHBvdGVudGlhbGx5IGJlIHJldHJpZXZlZCBsYXRlcgoJICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UKCSAgICAgICAgICAgIHsKCSAgICAgICAgICAgICAgICAkanNvbiA9IGpzb25fZGVjb2RlKCRyZXNwb25zZVsnYm9keSddKTsKCSAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJGpzb24tPnJlc3BvbnNlX2NvZGUpICYmICgkanNvbi0+cmVzcG9uc2VfY29kZSA9PSAiMjAwIikpCgkgICAgICAgICAgICAgICAgewoJICAgICAgICAgICAgICAgICAgICBkZWxldGVfb3B0aW9uKCRkYXRhT3B0aW9uTmFtZSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vcmVnYXJkbGVzcyBvZiBvdXRjb21lLCBzZXQgcGF0Y2ggYXMgY29tcGxldGVkCgkgICAgICAgIHVwZGF0ZV9vcHRpb24oJGxvY2tOYW1lLCJjb21wbGV0ZWQiLHRydWUpOwoJICAgIH0KCSAgICAKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJlZ2lzdGVyT3JwaGFuZWRTY2hlZHVsZXMoKQoJewoJICAgIAogICAgICAgIGdsb2JhbCAkd3BkYjsKCSAgICAKCSAgICAkbG9ja05hbWUgPSBzdWJzdHIoInskd3BkYi0+cHJlZml4fW1tLXVucmVnLXNjaGVkdWxlcy11cGRhdGUiLDAsNjMpOyAvL29wdGlvbiBhbmQgbG9jayBpZGVudGlmaWVyIGFyZSB0aGUgc2FtZQoJICAgICRkYXRhT3B0aW9uTmFtZSA9IHN1YnN0cigieyR3cGRiLT5wcmVmaXh9bW0tdW5yZWdzY2hlZC1kYXRhIiwwLDYzKTsKCSAgICAkbWV0aG9kID0gInJlcG9ydFVucmVnaXN0ZXJlZFNjaGVkdWxlcyI7CgkgICAgJHVybCA9IHNlbGY6OiRTRVJWRVJJUC4kbWV0aG9kOwoJICAgIAogICAgICAgICRsb2NrQWNxdWlyZWQgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIENPQUxFU0NFKEdFVF9MT0NLKCd7JGxvY2tOYW1lfScsMCksMCkiKTsgICAgCiAgICAgICAgaWYgKCRsb2NrQWNxdWlyZWQgPT0gMSkgLy9iZWdpbiBsb2NrZWQgc2VjdGlvbgogICAgICAgIHsKICAgICAgICAgICAgJHNlVGFibGUgPSBNTV9UQUJMRV9TQ0hFRFVMRURfRVZFTlRTOwogICAgICAgICAgICAkc3BUYWJsZSA9IE1NX1RBQkxFX1NDSEVEVUxFRF9QQVlNRU5UUzsKICAgICAgICAgICAgJG9pVGFibGUgPSBNTV9UQUJMRV9PUkRFUl9JVEVNUzsKICAgICAgICAgICAgJG9UYWJsZSAgPSBNTV9UQUJMRV9PUkRFUlM7CiAgICAgICAgICAgICRzYWZlRGF0ZSA9IGRhdGUoIlktbS1kIEg6aSIsc3RydG90aW1lKCItMjQgSG91cnMiKSk7CiAgICAgICAgICAgICRvcHRpb25WYWx1ZSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oJGxvY2tOYW1lKTsKICAgICAgICAgICAgCiAgICAgICAgICAgICRzcWxIZWFkID0gIlNFTEVDVCBzZS5pZCBBUyBldmVudF9pZCwgY29uY2F0KG8udXNlcl9pZCwnIycsby5vcmRlcl9udW1iZXIpIEFTIHJlY29yZCAiOwogICAgICAgICAgICAkc3FsQm9keSA9ICJGUk9NIHskc3BUYWJsZX0gc3AgSU5ORVIgSk9JTiB7JHNlVGFibGV9IHNlIE9OIChzcC5pZCA9IHNlLmlkKSAiLgogICAgICAgICAgICAgICAgIklOTkVSIEpPSU4geyRvaVRhYmxlfSBvaSBPTiAoc3Aub3JkZXJfaXRlbV9pZCA9IG9pLmlkKSAiLgogICAgICAgICAgICAgICAgIklOTkVSIEpPSU4geyRvVGFibGV9IG8gT04gKG9pLm9yZGVyX2lkID0gby5pZCkgIi4KICAgICAgICAgICAgICAgICJMRUZUIEpPSU4gbW1fcXVldWVkX3NjaGVkdWxlZF9ldmVudHMgcSBvbiAoc2UuaWQgPSBxLmV2ZW50X2lkKSAiLgogICAgICAgICAgICAgICAgIldIRVJFIChzZS5zY2hlZHVsZWRfZGF0ZSA8ICd7JHNhZmVEYXRlfScpIEFORCAoc2Uuc3RhdHVzID0gMCkgQU5EIChzZS5wcm9jZXNzZWRfZGF0ZSBJUyBOVUxMKSBBTkQgKG9pLnN0YXR1cyA9IDEpIEFORCAocS5ldmVudF9pZCBJUyBOVUxMKSI7CiAgICAgICAgICAgIAogICAgICAgICAgICAvL3NldCB0aW1lIGxpbWl0IHRvIGluZmluaXRlCiAgICAgICAgICAgIHNldF90aW1lX2xpbWl0KDApOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCRvcHRpb25WYWx1ZSA9PSBmYWxzZSkgLy9uZXZlciBiZWVuIHNldAogICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgLy91c2VkIGxhdGVyIHRvIGRldGVybWluZSBob3cgdG8gYWN0IGluIHRoZSBldmVudCBvZiB0cmFuc21pc3Npb24gZXJyb3JzCiAgICAgICAgICAgICAgICAkc3RvcmVGb3JMYXRlciA9IGZhbHNlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvL2ZpbmQgb3JwaGFuZWQgc2NoZWR1bGVzCiAgICAgICAgICAgICAgICAkc3FsID0gJHNxbEhlYWQuJHNxbEJvZHk7CiAgICAgICAgICAgICAgICAkdW5yZWdSZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICR1bnJlZ09iaiA9IG5ldyBzdGRDbGFzcygpOwogICAgICAgICAgICAgICAgJHVucmVnT2JqLT5jb3VudCA9IGNvdW50KCR1bnJlZ1Jlc3VsdHMpOwogICAgICAgICAgICAgICAgJHVucmVnT2JqLT5kYXRhID0gIiI7CiAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoJHVucmVnT2JqLT5jb3VudCA+IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGZpcnN0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkdW5yZWdSZXN1bHRzIGFzICRhUmVzdWx0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRmaXJzdCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHVucmVnT2JqLT5kYXRhID0gJGFSZXN1bHQtPnJlY29yZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRmaXJzdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR1bnJlZ09iai0+ZGF0YSAuPSAifHskYVJlc3VsdC0+cmVjb3JkfSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRsaWNlbnNlID0gbmV3IE1NX0xpY2Vuc2UoIiIsZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIE1NX01lbWJlck1vdXNlU2VydmljZTo6Z2V0TGljZW5zZSgkbGljZW5zZSk7IC8vY2F1c2VzIGEgcmVtb3RlIGF1dGg/CiAgICAgICAgICAgICAgICAgICAgJHBhY2thZ2VkRGF0YSA9IGFycmF5KCJhcGlfa2V5IiAgICAgICAgPT4gJGxpY2Vuc2UtPmdldEFwaUtleSgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYXBpX3NlY3JldCIgICAgID0+ICRsaWNlbnNlLT5nZXRBcGlTZWNyZXQoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNvbW1hbmQiCQkgID0+ICJyZXBvcnRVbnJlZ2lzdGVyZWRTY2hlZHVsZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZGF0YSIgCSAgICAgICAgICA9PiAkdW5yZWdPYmoKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vc2VuZCBwYWNrYWdlZCBkYXRhIHRvIGNlbnRyYWwKICAgICAgICAgICAgICAgICAgICAkcmVzcG9uc2UgPSB3cF9yZW1vdGVfcG9zdCgkdXJsLCBhcnJheSgnbWV0aG9kJyA9PiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgICAgICd0aW1lb3V0JyA9PiAxMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICdib2R5Jz0+JHBhY2thZ2VkRGF0YSkpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChpc193cF9lcnJvcigkcmVzcG9uc2UpIHx8IChpc3NldCgkcmVzcG9uc2VbJ3Jlc3BvbnNlJ10pICYmIGlzc2V0KCRyZXNwb25zZVsncmVzcG9uc2UnXVsnY29kZSddKSAmJiAoJHJlc3BvbnNlWydyZXNwb25zZSddWydjb2RlJ10gIT0gIjIwMCIpKSB8fCAoIWlzc2V0KCRyZXNwb25zZVsnYm9keSddKSkgKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdW5hYmxlIHRvIGNvbm5lY3QgdG8gc2VydmVyCiAgICAgICAgICAgICAgICAgICAgICAgICRzdG9yZUZvckxhdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGpzb24gPSBqc29uX2RlY29kZSgkcmVzcG9uc2VbJ2JvZHknXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaXNzZXQoJGpzb24tPnJlc3BvbnNlX2NvZGUpIHx8ICgkanNvbi0+cmVzcG9uc2VfY29kZSAhPSAiMjAwIikpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzdG9yZUZvckxhdGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoJHN0b3JlRm9yTGF0ZXIpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVfb3B0aW9uKCRkYXRhT3B0aW9uTmFtZSwkdW5yZWdPYmosdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vc2V0IHRoZSBvcHRpb24gc28gdGhpcyBkb2Vzbid0IHJ1biBhZ2FpbgogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVfb3B0aW9uKCRsb2NrTmFtZSwicGVuZGluZyIsdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZV9vcHRpb24oJGxvY2tOYW1lLCJjb21wbGV0ZWQiLHRydWUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCSAgICAgICAgIH0gIAoJICAgICAgICAgZWxzZSBpZiAoJG9wdGlvblZhbHVlID09ICJwZW5kaW5nIikKCSAgICAgICAgIHsKICAgICAgICAJICAgICAgICRkYXRhT3B0aW9uVmFsdWUgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCRkYXRhT3B0aW9uTmFtZSk7CiAgICAgICAgCSAgICAgICBpZiAoJGRhdGFPcHRpb25WYWx1ZSAhPT0gZmFsc2UpCiAgICAgICAgCSAgICAgICB7CiAgICAgICAgCSAgICAgICAgICAgLy90aGUgc2NoZWR1bGluZyByZWd1bGF0b3IgY29tcGxldGVkLCBidXQgdGhlcmUgd2FzIHByZXZpb3VzbHkgYW4gaXNzdWUgc2VuZGluZyB0aGUgZGF0YSB0byBjZW50cmFsLCB0cnkgYWdhaW4KICAgICAgICAJICAgICAgICAgICAkbGljZW5zZSA9IG5ldyBNTV9MaWNlbnNlKCIiLGZhbHNlKTsKICAgICAgICAJICAgICAgICAgICBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmdldExpY2Vuc2UoJGxpY2Vuc2UpOwogICAgICAgIAkgICAgICAgICAgICAKICAgICAgICAJICAgICAgICAgICAkcGFja2FnZWREYXRhID0gYXJyYXkoImFwaV9rZXkiICAgICAgID0+ICRsaWNlbnNlLT5nZXRBcGlLZXkoKSwKICAgICAgICAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImFwaV9zZWNyZXQiICAgID0+ICRsaWNlbnNlLT5nZXRBcGlTZWNyZXQoKSwKICAgICAgICAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImNvbW1hbmQiCQk9PiAicmVwb3J0VW5yZWdpc3RlcmVkU2NoZWR1bGVzIiwKICAgICAgICAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImRhdGEiIAkgICAgICAgID0+ICRkYXRhT3B0aW9uVmFsdWUKICAgICAgICAJICAgICAgICAgICApOwogICAgICAgIAkgICAgICAgICAgICAKICAgICAgICAJICAgICAgICAgICAkcmVzcG9uc2UgPSB3cF9yZW1vdGVfcG9zdCgkdXJsLCBhcnJheSgnbWV0aG9kJyA9PiAnUE9TVCcsCiAgICAgICAgCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpbWVvdXQnID0+IDEyMCwKICAgICAgICAJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYm9keSc9PiRwYWNrYWdlZERhdGEpKTsKICAgICAgICAJICAgICAgICAgICAgCiAgICAgICAgCSAgICAgICAgICAgaWYgKGlzX3dwX2Vycm9yKCRyZXNwb25zZSkgfHwgKGlzc2V0KCRyZXNwb25zZVsncmVzcG9uc2UnXSkgJiYgaXNzZXQoJHJlc3BvbnNlWydyZXNwb25zZSddWydjb2RlJ10pICYmICgkcmVzcG9uc2VbJ3Jlc3BvbnNlJ11bJ2NvZGUnXSAhPSAiMjAwIikpIHx8ICghaXNzZXQoJHJlc3BvbnNlWydib2R5J10pKSApCiAgICAgICAgCSAgICAgICAgICAgewogICAgICAgIAkgICAgICAgICAgICAgICAvLyB1bmFibGUgdG8gY29ubmVjdCB0byBzZXJ2ZXIKICAgICAgICAJICAgICAgICAgICAgICAgTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIlVuYWJsZSB0byB0cmFuc21pdCBvcnBoYW5lZCBzY2hlZHVsZSByZXN1bHRzIHRvIGNlbnRyYWw6ICIucHJpbnRfcigkcmVzcG9uc2UsdHJ1ZSkpOwogICAgICAgIAkgICAgICAgICAgIH0KICAgICAgICAJICAgICAgICAgICBlbHNlCiAgICAgICAgCSAgICAgICAgICAgewogICAgICAgIAkgICAgICAgICAgICAgICAkanNvbiA9IGpzb25fZGVjb2RlKCRyZXNwb25zZVsnYm9keSddKTsKICAgICAgICAJICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRqc29uLT5yZXNwb25zZV9jb2RlKSAmJiAoJGpzb24tPnJlc3BvbnNlX2NvZGUgPT0gIjIwMCIpKQogICAgICAgIAkgICAgICAgICAgICAgICB7CiAgICAgICAgCSAgICAgICAgICAgICAgICAgICBkZWxldGVfb3B0aW9uKCRkYXRhT3B0aW9uTmFtZSk7CiAgICAgICAgCSAgICAgICAgICAgICAgIH0KICAgICAgICAJICAgICAgICAgICB9CiAgICAgICAgCSAgICAgICB9CiAgICAgICAgCSAgICAgICAKICAgICAgICAJICAgICAgIC8vcmVnYXJkbGVzcyBvZiBvdXRjb21lLCBzZXQgcGF0Y2ggYXMgY29tcGxldGVkCiAgICAgICAgCSAgICAgICB1cGRhdGVfb3B0aW9uKCRsb2NrTmFtZSwiY29tcGxldGVkIix0cnVlKTsKCSAgICAgICAgICB9CgkgICAgICAgICAgIAoJICAgICAgICAgIC8vbm93IGZvcmNlIHJlcmVnaXN0cmF0aW9uIG9mIG9ycGhhbmVkIHNjaGVkdWxlcyB1c2luZyB0aGUgcXVldWUgdGFibGUKCSAgICAgICAgICAkcXVldWVDb21tYW5kID0gKGNsYXNzX2V4aXN0cygiTU1fU2NoZWR1bGVkRXZlbnQiLGZhbHNlKSk/TU1fU2NoZWR1bGVkRXZlbnQ6OiRRVUVVRV9DT01NQU5EX1VQREFURToiMCI7CgkgICAgICAgICAgJG5vdyA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJICAgICAgICAgICRyZWdzcWxTdWJxdWVyeSA9ICJTRUxFQ1Qgc2UuaWQsICd7JHF1ZXVlQ29tbWFuZH0nLCAneyRub3d9JyB7JHNxbEJvZHl9IjsKCSAgICAgICAgICAkcVRhYmxlID0gTU1fVEFCTEVfUVVFVUVEX1NDSEVEVUxFRF9FVkVOVFM7CgkgICAgICAgICAgJHJlZ3NxbFF1ZXJ5ID0gIklOU0VSVCBJTlRPIHskcVRhYmxlfSAoZXZlbnRfaWQsIGNvbW1hbmQsIHF1ZXVlZF9kYXRlKSB7JHJlZ3NxbFN1YnF1ZXJ5fSI7CgkgICAgICAgICAgJHdwZGItPnF1ZXJ5KCRyZWdzcWxRdWVyeSk7CgkgICAgCgkgICAgICAgICAgLy9lbmQgbG9ja2VkIHNlY3Rpb24KCSAgICAgICAgICAkd3BkYi0+cXVlcnkoIlNFTEVDVCBSRUxFQVNFX0xPQ0soJ3skbG9ja05hbWV9JykiKTsKICAgICAgICB9Cgl9CgkKCQoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gc2VuZFdhcm5pbmdFbWFpbCgpCgl7CgkJaWYgKGNsYXNzX2V4aXN0cygiTU1fRW1haWwiKSAmJiBmdW5jdGlvbl9leGlzdHMoIndwX21haWwiKSkKCQl7CgkJCSRzaXRlVXJsID0gZ2V0X29wdGlvbignc2l0ZXVybCcpOwoJCQkkZW1wbG95ZWUgPSBNTV9FbXBsb3llZTo6Z2V0RGVmYXVsdCgpOwoJCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkJJGVtYWlsLT5zZXRDb250ZXh0KG5ldyBNTV9Db250ZXh0KCkpOwoJCQkkZW1haWwtPnNldFN1YmplY3QoIkFMRVJUIC0gTWVtYmVyTW91c2UgZGVhY3RpdmF0aW9uIHdhcm5pbmcgZm9yIHskc2l0ZVVybH0iKTsKCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgiTWVtYmVyTW91c2UgTm90aWZpY2F0aW9uIik7CgkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoImRvLW5vdC1yZXBseUBtZW1iZXJtb3VzZS5jb20iKTsKCQkJJGVtYWlsLT5zZXRUb05hbWUoJGVtcGxveWVlLT5nZXRGaXJzdE5hbWUoKSk7CgkJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCRlbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCQkKCQkJJGJvZHkgPSAiVGhpcyBpcyBhbiBhdXRvbWF0ZWQgbm90aWNlIHRvIGluZm9ybSB5b3UgdGhhdCBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIE1lbWJlck1vdXNlIHBsdWdpbiAiLgoJCQkJCSJvbiB5b3VyIHNpdGUgdG8gdGhlIE1lbWJlck1vdXNlIGNlbnRyYWwgc2VydmVyIGhhcyBiZWVuIGZhaWxpbmcgb24gYSBjb25zaXN0ZW50IGJhc2lzLiBUaGUgIi4KCQkJCQkibWFpbiBjYXVzZXMgZm9yIHRoaXMgYXJlIG5ldHdvcmsgb3V0YWdlcyBvciBibG9ja3MgYnkgc2VjdXJpdHkgcGx1Z2lucy5cblxuIi4KCQkJCQkiV2UgcmVjb21tZW5kOlxuMSkgdGhhdCB5b3Ugd29yayB3aXRoIHlvdXIgaG9zdCBwcm92aWRlciB0byByZXZpZXcgc2VydmVyIGxvZ3Mgb3ZlciB0aGUgIi4KCQkJCQkicGFzdCBjb3VwbGUgb2YgZGF5cyB0byBzZWUgaWYgdGhlcmUgYXJlIGFueSBlcnJvcnMgdG8gaW5kaWNhdGUgd2hhdCBtaWdodCBiZSBvY2N1cnJpbmcgdG8gIi4KCQkJCQkiY2F1c2UgdGhpcy4gXG4iLgoJCQkJCSIyKSByZXZpZXcgYW55IG5ldyBzZWN1cml0eSBzZXR0aW5ncyBvbiB0aGUgc2VydmVyIG9yIHNlY3VyaXR5IHBsdWdpbnMgdGhhdCBtaWdodCBoYXZlIGJlZW4gIi4KCQkJCQkiYWRkZWQsIGFzIHRoZXNlIGNhbiBpbnRlcmZlcmUgd2l0aCBjb21tdW5pY2F0aW9uXG5cbkFmdGVyIGdhdGhlcmluZyB0aGlzIGluZm9ybWF0aW9uICIuCgkJCQkJImFuZCBtYWtpbmcgYW55IG5lY2Vzc2FyeSBjaGFuZ2VzLCBwbGVhc2UgY29udGFjdCB0aGUgTWVtYmVyTW91c2UgU3VwcG9ydCBUZWFtIGF0ICIuCgkJCQkJInN1cHBvcnRAbWVtYmVybW91c2UuY29tIHNvIHdlIGNhbiBtb25pdG9yIHlvdXIgbGljZW5zZSBhbmQgbWFrZSBzdXJlIHRoYXQgeW91ciBwbHVnaW4gIi4KCQkJCQkic3VjY2Vzc2Z1bGx5IGF1dGhvcml6ZXMuXG5JTVBPUlRBTlQ6IElmIHRoZSBzaXR1YXRpb24gaXMgbm90IGZpeGVkIHdpdGhpbiA3IGRheXMsICIuCgkJCQkJInRoZSBNZW1iZXJNb3VzZSBwbHVnaW4gd2lsbCBkZWFjdGl2YXRlLiI7CgkJCSRlbWFpbC0+c2V0Qm9keSgkYm9keSk7CgkJCQkKCQkJJGVtYWlsLT5zZW5kKCk7CgkJfQoJfQoJCgkKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGFjcXVpcmVTZW1hcGhvcmUoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoIWlzX29iamVjdCgkd3BkYikpCgkJewoJCQlyZXR1cm4gLTE7IC8vZXJyb3IKCQl9CgkJCgkJJGxvY2tBY3F1aXJlZCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgSUYoSVNfRlJFRV9MT0NLKCVzKSxDT0FMRVNDRShHRVRfTE9DSyglcywwKSwtMSksMCkiLHNlbGY6OiRBVVRIX0xPQ0tfSURFTlRJRklFUixzZWxmOjokQVVUSF9MT0NLX0lERU5USUZJRVIpKTsKCQlpZiAoJGxvY2tBY3F1aXJlZCA9PSAiMSIpCgkJewoJCQlzZWxmOjokQVVUSF9MT0NLID0gdHJ1ZTsKCQl9CgkJcmV0dXJuIGludHZhbCgkbG9ja0FjcXVpcmVkKTsgLy8tMSBlcnJvciwgMCBub3QgYWNxdWlyZWQsIDEgYWNxdWlyZWQKCX0KCQoJCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiByZWxlYXNlU2VtYXBob3JlKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGlzX29iamVjdCgkd3BkYikgJiYgc2VsZjo6JEFVVEhfTE9DSykKCQl7CgkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgiU0VMRUNUIFJFTEVBU0VfTE9DSyglcykiLHNlbGY6OiRBVVRIX0xPQ0tfSURFTlRJRklFUikpOwoJCQlzZWxmOjokQVVUSF9MT0NLID0gZmFsc2U7CgkJfQoJfQp9Cg==', 1, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(2, 'managetransactionsview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX01hbmFnZVRyYW5zYWN0aW9uc1ZpZXcgZXh0ZW5kcyBNTV9SQkFDR2VuZXJhbEVtcGxveWVlVmlldwp7CQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0VBUkNIID0gInNlYXJjaCI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9SRVNFVF9GT1JNID0gInJlc2V0Rm9ybSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TVE9SRV9TRUFSQ0hfU1RBVEUgPSAic3RvcmVTZWFyY2hTdGF0ZSI7CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KQoJewoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKQoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRVNFVF9GT1JNOgoJCQkJCXJldHVybiAkdGhpcy0+Z2VuZXJhdGVTZWFyY2hGb3JtKCRwb3N0KTsKCQkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TRUFSQ0g6CgkJCQkJcmV0dXJuICR0aGlzLT5nZW5lcmF0ZURhdGFHcmlkKCRwb3N0KTsKCQkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TVE9SRV9TRUFSQ0hfU1RBVEU6CgkJCQkJcmV0dXJuICR0aGlzLT5zdG9yZVNlYXJjaFN0YXRlKCRwb3N0KTsKCQkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVTZWFyY2hGb3JtKCRwb3N0PW51bGwpCgl7CgkJcmV0dXJuIE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvbWFuYWdlX3RyYW5zYWN0aW9ucy5mb3JtLnBocCIsICRwb3N0KTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVEYXRhR3JpZCgkcG9zdD1udWxsKQoJewoJCXJldHVybiBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iL21hbmFnZV90cmFuc2FjdGlvbnMuZGF0YWdyaWQucGhwIiwgJHBvc3QpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZWFyY2goJHBvc3QsIE1NX0RhdGFHcmlkICRkZykKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkb3B0aW1pemVkUXVlcnkgPSAkdGhpcy0+Y29uc3RydWN0UXVlcnkoJHBvc3QsICRkZyk7CgkJJG9wdGltaXplZFF1ZXJ5IC49ICRkZy0+Z2V0TGltaXRTcWwoKTsKCQkKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkb3B0aW1pemVkUXVlcnksIE9CSkVDVF9LKTsKCQlyZXR1cm4gYXJyYXlfdmFsdWVzKCRyb3dzKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gY29uc3RydWN0UXVlcnkoJHBvc3QsIE1NX0RhdGFHcmlkICRkZykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy90cmltIGFsbCB0aGUgd2hpdGVzcGFjZSBmcm9tIHRoZSBwYXJhbWV0ZXJzCgkJZm9yZWFjaCAoJHBvc3QgYXMgJGs9PiYkdikKCQl7CgkJCWlmICgoIWlzX2FycmF5KCR2KSkgJiYgKHN0cnBvcygkdiwibW1fIikgPT0gMCkpCgkJCXsKCQkJCSR2ID0gdHJpbSgkdik7CgkJCX0KCQl9CgkJCgkJJHRyYW5zYWN0aW9uc1RhYmxlID0gTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HOwoJCSRvcmRlcnNUYWJsZSA9IE1NX1RBQkxFX09SREVSUzsKCQkkdXNlckRhdGFUYWJsZSA9IE1NX1RBQkxFX1VTRVJfREFUQTsKCQkkb3JkZXJJdGVtc1RhYmxlID0gTU1fVEFCTEVfT1JERVJfSVRFTVM7CgkJCgkJJHNxbCA9IAkiU0VMRUNUIHQuaWQsIHQudHJhbnNhY3Rpb25fZGF0ZSwtKHQuYW1vdW50KSBhcyB0cmFuc2FjdGlvbl9hbW91bnQsdC5jdXJyZW5jeSwgdC50cmFuc2FjdGlvbl90eXBlLCBvLm9yZGVyX251bWJlciwgby5hZmZpbGlhdGVfaWQsIG8uc3ViX2FmZmlsaWF0ZV9pZCwgIi4KCQkJCSJtdWQuZmlyc3RfbmFtZSwgbXVkLmxhc3RfbmFtZSwgbXVkLndwX3VzZXJfaWQgYXMgdXNlcl9pZCwgdS51c2VyX2VtYWlsLCBvaS5kZXNjcmlwdGlvbiwgdC5pc190ZXN0ICI7CgkJCgkJJHNxbEZyb20gPSAgIkZST00geyR0cmFuc2FjdGlvbnNUYWJsZX0gdCAiLgoJCQkJCSJJTk5FUiBKT0lOIHskb3JkZXJzVGFibGV9IG8gT04gKHQub3JkZXJfaWQgPSBvLmlkKSAiLgoJCQkJCSJJTk5FUiBKT0lOIHskdXNlckRhdGFUYWJsZX0gbXVkIE9OIChvLnVzZXJfaWQgPSBtdWQud3BfdXNlcl9pZCkgIi4KCQkJCQkiSU5ORVIgSk9JTiB7JHdwZGItPnVzZXJzfSB1IE9OIChvLnVzZXJfaWQgPSB1LklEKSAiLgoJCQkJCSJMRUZUIEpPSU4geyRvcmRlckl0ZW1zVGFibGV9IG9pIE9OICh0Lm9yZGVyX2l0ZW1faWQgPSBvaS5pZCkgIjsKCQkKCQkkd2hlcmVTUUwgPSBhcnJheSgpOwoJCQoJCSRzcWxXaGVyZSA9ICIiOwoJCSRzcWxPcmRlckJ5ID0gIiI7CgkJCgkJaWYgKCFlbXB0eSgkcG9zdFsnbW1fZnJvbV9kYXRlJ10pKQoJCXsKCQkJJHN0YXJ0RGF0ZSA9IE1NX1V0aWxzOjpkYXRlVG9VVEMoJHBvc3RbJ21tX2Zyb21fZGF0ZSddLCAiWS1tLWQgSDppIiwgIjAwOjAwOjAwIik7CgkJCSR3aGVyZVNRTFtdICA9ICR3cGRiLT5wcmVwYXJlKCJ0LnRyYW5zYWN0aW9uX2RhdGUgPj0gJXMiLCRzdGFydERhdGUpOwoJCX0KCQkKCQlpZiAoIWVtcHR5KCRwb3N0WydtbV90b19kYXRlJ10pKQoJCXsKCQkJJGVuZERhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvVVRDKCRwb3N0WydtbV90b19kYXRlJ10sICJZLW0tZCBIOmkiLCAiMjM6NTk6NTkiKTsKCQkJJHdoZXJlU1FMW10gID0gJHdwZGItPnByZXBhcmUoInQudHJhbnNhY3Rpb25fZGF0ZSA8PSAlcyIsJGVuZERhdGUpOwoJCX0KCQkKCQkkcG9zc2libGVUcmFuc2FjdGlvblR5cGVzID0gYXJyYXkoTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUZVTkQpOwoJCSR0cmFuc2FjdGlvblR5cGVzID0gKGlzc2V0KCRwb3N0WydtbV90cmFuc2FjdGlvbl90eXBlcyddKSAmJiBpc19hcnJheSgkcG9zdFsnbW1fdHJhbnNhY3Rpb25fdHlwZXMnXSkpPyRwb3N0WydtbV90cmFuc2FjdGlvbl90eXBlcyddOmFycmF5KCk7CgkJCgkJZm9yZWFjaCAoJHRyYW5zYWN0aW9uVHlwZXMgYXMgJGs9PiR0eXBlKQoJCXsKCQkJLy9maWx0ZXIgYnkgdGhlIGxpc3Qgb2YgdHlwZXMgd2UgYXJlIGFsbG93aW5nIHRvIGJlIHNlYXJjaGVkLCB3aGljaCBlbGltaW5hdGVzIGluamVjdGlvbiBwb3NzaWJpbGl0aWVzCgkJCWlmICghaW5fYXJyYXkoJHR5cGUsJHBvc3NpYmxlVHJhbnNhY3Rpb25UeXBlcykpCgkJCXsKCQkJCXVuc2V0KCR0cmFuc2FjdGlvblR5cGVzWyRrXSk7CgkJCX0KCQl9CgkJCgkJaWYgKGNvdW50KCR0cmFuc2FjdGlvblR5cGVzKSA+IDApCgkJewoJCQkkd2hlcmVTUUxbXSA9ICJ0LnRyYW5zYWN0aW9uX3R5cGUgSU4gKCIuaW1wbG9kZSgiLCIsJHRyYW5zYWN0aW9uVHlwZXMpLiIpIjsKCQl9CgkJZWxzZQoJCXsKCQkJLy9ubyBzcGVjaWZpYyB0eXBlcyB3ZXJlIHNlbnQsIHNvIHNlYXJjaCBvbiBldmVyeXRoaW5nCgkJCSR3aGVyZVNRTFtdID0gInQudHJhbnNhY3Rpb25fdHlwZSBJTiAoIi5pbXBsb2RlKCIsIiwkcG9zc2libGVUcmFuc2FjdGlvblR5cGVzKS4iKSI7CgkJfQoJCQoJCS8vb3JkZXIgbnVtYmVyCgkJaWYgKCFlbXB0eSgkcG9zdFsnbW1fb3JkZXJfbnVtYmVyJ10pKQoJCXsKCQkJJHdoZXJlU1FMW10gPSAkd3BkYi0+cHJlcGFyZSgiby5vcmRlcl9udW1iZXIgPSAlcyIsJHBvc3RbJ21tX29yZGVyX251bWJlciddKTsKCQl9CgkJCgkJLy9wcm9kdWN0cyBhbmQgY291cG9ucwoJCSRpdGVtVHlwZUZpbHRlciA9IGZ1bmN0aW9uKCRwb3N0VmFyLCRpdGVtVHlwZUlkKSB1c2UgKCRwb3N0LCR3cGRiKQoJCXsKCQkJaWYgKCFlbXB0eSgkcG9zdFskcG9zdFZhcl0pICYmIGlzX2FycmF5KCRwb3N0WyRwb3N0VmFyXSkpCgkJCXsKCQkJCWZvcmVhY2ggKCRwb3N0WyRwb3N0VmFyXSBhcyAkaz0+JHYpCgkJCQl7CgkJCQkJaWYgKCFpc19udW1lcmljKCR2KSkKCQkJCQl7CgkJCQkJCXVuc2V0KCRwb3N0WyRrXSk7IC8vaW50ZWdlcnMgb25seSwgZGlzY2FyZCBhbGwgbm9uLWludGVnZXJzCgkJCQkJfQoJCQkJfQoJCQkJJGl0ZW1JZFN0cmluZyA9IGltcGxvZGUoIiwiLCRwb3N0WyRwb3N0VmFyXSk7CgkJCQkkd2hlcmVTdHJpbmcgPSAkd3BkYi0+cHJlcGFyZSgiKChvaS5pdGVtX3R5cGUgPSAlcykgQU5EIChvaS5pdGVtX2lkIElOICh7JGl0ZW1JZFN0cmluZ30pKSkiLCRpdGVtVHlwZUlkKTsKCQkJCXJldHVybiAkd2hlcmVTdHJpbmc7CgkJCX0KCQkJcmV0dXJuIG51bGw7CgkJfTsKCQkkcHJvZHVjdElkRmlsdGVyU3RyaW5nID0gJGl0ZW1UeXBlRmlsdGVyKCJtbV9wcm9kdWN0X2lkcyIsTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpOwoJCWlmICgkcHJvZHVjdElkRmlsdGVyU3RyaW5nICE9PSBudWxsKQoJCXsKCQkJJHdoZXJlU1FMW10gPSAkcHJvZHVjdElkRmlsdGVyU3RyaW5nOwoJCX0KCQkKCQkKCQlpZiAoIWVtcHR5KCRwb3N0WydtbV9jb3Vwb25faWRzJ10pICYmIGlzX2FycmF5KCRwb3N0WydtbV9jb3Vwb25faWRzJ10pKQoJCXsKCQkJJHZhbGlkTnVtZXJpY0lkcyA9IGFycmF5KCk7CgkJCWZvcmVhY2ggKCRwb3N0WydtbV9jb3Vwb25faWRzJ10gYXMgJHBvdGVudGlhbElkKQoJCQl7CgkJCQlpZiAoaXNfbnVtZXJpYygkcG90ZW50aWFsSWQpKQoJCQkJewoJCQkJCSR2YWxpZE51bWVyaWNJZHNbXSA9ICRwb3RlbnRpYWxJZDsKCQkJCX0KCQkJfQoJCQkJCgkJCWlmIChjb3VudCgkdmFsaWROdW1lcmljSWRzKSkKCQkJewoJCQkJLy9jb3Vwb24gZmlsdGVyaW5nIGlzIGEgc3BlY2lhbCBjYXNlLCBiZWNhdXNlIGNvdXBvbnMgYXJlIHNwZWNpYWwgb3JkZXIgaXRlbXMgaW4gdGhlIHNhbWUgb3JkZXIgYXMgdGhlIGl0ZW0gdGhlIHRyYW5zYWN0aW9uIGlzIHRpZWQgdG8uLi4KCQkJCS8vdG8gZmlsdGVyIGNvcnJlY3RseSwgd2Ugd2lsbCBjb25kaXRpb25hbGx5IGpvaW4gYWdhaW4gdGhlIG9yZGVyIGl0ZW1zIHRhYmxlLCB1c2luZyB0aGUgZGlzY291bnQgdHlwZQoJCQkJJHNxbEZyb20gLj0gIklOTkVSIEpPSU4geyRvcmRlckl0ZW1zVGFibGV9IGNvdXBvbl9pdGVtcyBPTiAoKGNvdXBvbl9pdGVtcy5pdGVtX3R5cGU9JyIuTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX0RJU0NPVU5ULiInKSAiLgoJCQkJCQkiQU5EICh0Lm9yZGVyX2lkID0gY291cG9uX2l0ZW1zLm9yZGVyX2lkKSkgIjsKCQkJCSR3aGVyZVNRTFtdID0gImNvdXBvbl9pdGVtcy5pdGVtX2lkIElOICgiLmltcGxvZGUoIiwiLCR2YWxpZE51bWVyaWNJZHMpLiIpIjsKCQkJfQoJCX0KCQkKCQkvLyBGaXJzdCBOYW1lCgkJaWYoIWVtcHR5KCRwb3N0WydtbV9maXJzdF9uYW1lJ10pKQoJCXsKCQkJJHdoZXJlU1FMW10gPSAkd3BkYi0+cHJlcGFyZSgibXVkLmZpcnN0X25hbWUgTElLRSAlcyIsJyUnLiR3cGRiLT5lc2NfbGlrZSgkcG9zdFsnbW1fZmlyc3RfbmFtZSddKS4nJScpOwoJCX0KCQkKCQkvLyBMYXN0IE5hbWUKCQlpZighZW1wdHkoJHBvc3RbJ21tX2xhc3RfbmFtZSddKSkKCQl7CgkJCSR3aGVyZVNRTFtdID0gJHdwZGItPnByZXBhcmUoIm11ZC5sYXN0X25hbWUgTElLRSAlcyIsJyUnLiR3cGRiLT5lc2NfbGlrZSgkcG9zdFsnbW1fbGFzdF9uYW1lJ10pLiclJyk7CgkJfQoJCQoJCS8vIEVtYWlsCgkJaWYoIWVtcHR5KCRwb3N0WydtbV9lbWFpbCddKSkKCQl7CgkJCSR3aGVyZVNRTFtdID0gJHdwZGItPnByZXBhcmUoInUudXNlcl9lbWFpbCBMSUtFICVzIiwnJScuJHdwZGItPmVzY19saWtlKCRwb3N0WydtbV9lbWFpbCddKS4nJScpOwoJCX0KCQkKCQkvLyB1c2VyIGlkCgkJaWYgKCFlbXB0eSgkcG9zdFsnbW1fbWVtYmVyX2lkJ10pKQoJCXsKCQkJJHdoZXJlU1FMW10gPSAkd3BkYi0+cHJlcGFyZSgibXVkLndwX3VzZXJfaWQgPSAlcyIsJHBvc3RbJ21tX21lbWJlcl9pZCddKTsKCQl9CgkJCgkJLy8gYWZmaWxpYXRlIElEcwoJCWlmICghZW1wdHkoJHBvc3RbJ21tX2FmZmlsaWF0ZV9pZCddKSkKCQl7CgkJCSR3aGVyZVNRTFtdID0gJHdwZGItPnByZXBhcmUoIm8uYWZmaWxpYXRlX2lkIExJS0UgJXMiLCclJy4kd3BkYi0+ZXNjX2xpa2UoJHBvc3RbJ21tX2FmZmlsaWF0ZV9pZCddKS4nJScpOwoJCX0KCQkKCQlpZiAoIWVtcHR5KCRwb3N0WydtbV9zdWJfYWZmaWxpYXRlX2lkJ10pKQoJCXsKCQkJJHdoZXJlU1FMW10gPSAkd3BkYi0+cHJlcGFyZSgiby5zdWJfYWZmaWxpYXRlX2lkIExJS0UgJXMiLCclJy4kd3BkYi0+ZXNjX2xpa2UoJHBvc3RbJ21tX3N1Yl9hZmZpbGlhdGVfaWQnXSkuJyUnKTsKCQl9CgkJCgkJCgkJaWYoaXNzZXQoJGRnLT5zb3J0QnkpICYmICFpc19udWxsKCRkZy0+c29ydEJ5KSAmJiAhZW1wdHkoJGRnLT5zb3J0QnkpKQoJCXsKCQkJJHNvcnRCeSA9ICgkZGctPnNvcnRCeSA9PSAibGFzdF9uYW1lIik/Imxhc3RfbmFtZSwgZmlyc3RfbmFtZSI6JGRnLT5zb3J0Qnk7CgkJCSRzcWxPcmRlckJ5ID0gc3RyX3JlcGxhY2UoIiciLCIiLCR3cGRiLT5wcmVwYXJlKCJPUkRFUiBCWSAlcyAlcyIsJHNvcnRCeSwkZGctPnNvcnREaXIpKTsKCQl9CgkJCgkJaWYgKGNvdW50KCR3aGVyZVNRTCkpCgkJewoJCQkkc3FsV2hlcmUgLj0gIldIRVJFICIuaW1wbG9kZSgiIEFORCAiLCR3aGVyZVNRTCk7CgkJfQoKCQkvLyB1cGRhdGVkIHRvIGJlIG15c3FsIDUuNiBjb21wbGlhbnQKCQkkc3FsUmVzdWx0Q291bnQgPSAic2VsZWN0IGNvdW50KHQuaWQpIGFzIHRvdGFsICI7CgkJJHNxbFJlc3VsdENvdW50IC49ICRzcWxGcm9tOwoJCSRzcWxSZXN1bHRDb3VudCAuPSAkc3FsV2hlcmU7IAoJCSR0b3RhbFJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Zhcigkc3FsUmVzdWx0Q291bnQpOwoKCQkkbWFzdGVyUXVlcnkgPSAieyRzcWx9LHskdG90YWxSZXN1bHRzfSBhcyB0b3RhbCB7JHNxbEZyb219IHskc3FsV2hlcmV9IHskc3FsT3JkZXJCeX0iOwogCQlyZXR1cm4gJG1hc3RlclF1ZXJ5OwoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiBzdG9yZVNlYXJjaFN0YXRlKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJtbV9zaG93X3NlYXJjaCJdKSkKCQl7CgkJCWlmKGlzc2V0KCRwb3N0WyJtbV9hZG1pbl9pZCJdKSkKCQkJewoJCQkJJG9wdGlvbk5hbWUgPSBNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfU0hPV19UUkFOU0FDVElPTlNfU0VBUkNILiItIi4kcG9zdFsibW1fYWRtaW5faWQiXTsKCQkJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oJG9wdGlvbk5hbWUsICRwb3N0WyJtbV9zaG93X3NlYXJjaCJdKTsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzdG9yZSBzZWFyY2ggc3RhdGUuIENvdWxkbid0IGZpbmQgY3VycmVudCB1c2VyIElELiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzdG9yZSBzZWFyY2ggc3RhdGUuIE1pc3NpbmcgY3VycmVudCBzdGF0ZSB2YWx1ZS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEdyaWRIZWFkZXJzKCkKCXsKCQkvLyBkZWZpbmUgZGF0YWdyaWQgaGVhZGVycwoJCSRoZWFkZXJzID0gYXJyYXkKCQkoCgkJCQkndHlwZScJCQkJCT0+IGFycmF5KCdjb250ZW50JyA9PiAnVHlwZScsICdsYWJlbCc9PidUeXBlJywgImF0dHIiID0+ICJzdHlsZT0nd2lkdGg6NDBweDsnIiksCgkJCQkndHJhbnNhY3Rpb25fZGF0ZScJCT0+IGFycmF5KCdjb250ZW50JyA9PiAnPGEgb25jbGljaz0ibW1qcy5zb3J0KFwndHJhbnNhY3Rpb25fZGF0ZVwnKTsiIGhyZWY9IiMiPicuX21tdCgiRGF0ZSIpLic8L2E+JywgJ2xhYmVsJz0+J0RhdGUnKSwKCQkJCSdvcmRlcl9udW1iZXInCQkJPT4gYXJyYXkoJ2NvbnRlbnQnID0+ICc8YSBvbmNsaWNrPSJtbWpzLnNvcnQoXCdvcmRlcl9udW1iZXJcJyk7IiBocmVmPSIjIj4nLl9tbXQoIk9yZGVyICMiKS4nPC9hPicsICdsYWJlbCc9PidPcmRlciMnLCAiYXR0ciIgPT4gInN0eWxlPSd3aWR0aDo2NXB4OyciKSwKCQkJCSd0cmFuc2FjdGlvbl9hbW91bnQnCT0+IGFycmF5KCdjb250ZW50JyA9PiAnPGEgb25jbGljaz0ibW1qcy5zb3J0KFwndHJhbnNhY3Rpb25fYW1vdW50XCcpOyIgaHJlZj0iIyI+Jy5fbW10KCJBbW91bnQiKS4nPC9hPicsICdsYWJlbCc9PidBbW91bnQnKSwKCQkJCSdsYXN0X25hbWUnCQkJCT0+IGFycmF5KCdjb250ZW50JyA9PiAnPGEgb25jbGljaz0ibW1qcy5zb3J0KFwnbGFzdF9uYW1lXCcpOyIgaHJlZj0iIyI+Jy5fbW10KCJOYW1lIikuJzwvYT4nLCAnbGFiZWwnPT4nTmFtZScpLAoJCQkJJ3VzZXJfZW1haWwnCQkJPT4gYXJyYXkoJ2NvbnRlbnQnID0+ICc8YSBvbmNsaWNrPSJtbWpzLnNvcnQoXCd1c2VyX2VtYWlsXCcpOyIgaHJlZj0iIyI+Jy5fbW10KCJFbWFpbCIpLic8L2E+JywgJ2xhYmVsJz0+J0VtYWlsJyksCgkJCQknYWZmaWxpYXRlX2lkJwkJCT0+IGFycmF5KCdjb250ZW50JyA9PiAnPGEgb25jbGljaz0ibW1qcy5zb3J0KFwnYWZmaWxpYXRlX2lkXCcpOyIgaHJlZj0iIyI+Jy5fbW10KCJBZmZpbGlhdGUiKS4nPC9hPicsICdsYWJlbCc9PidBZmZpbGlhdGUnKSwKCQkJCSdzdWJfYWZmaWxpYXRlX2lkJwkJPT4gYXJyYXkoJ2NvbnRlbnQnID0+ICc8YSBvbmNsaWNrPSJtbWpzLnNvcnQoXCdzdWJfYWZmaWxpYXRlX2lkXCcpOyIgaHJlZj0iIyI+Jy5fbW10KCJTdWItQWZmaWxpYXRlIikuJzwvYT4nLCAnbGFiZWwnPT4nU3ViLUFmZmlsaWF0ZScpLAoJCQkJJ2Rlc2NyaXB0aW9uJwkJCT0+IGFycmF5KCdjb250ZW50JyA9PiAnPGEgb25jbGljaz0ibW1qcy5zb3J0KFwnZGVzY3JpcHRpb25cJyk7IiBocmVmPSIjIj4nLl9tbXQoIkRlc2NyaXB0aW9uIikuJzwvYT4nLCAnbGFiZWwnPT4nRGVzY3JpcHRpb24nKQoJCSk7CgkJcmV0dXJuICRoZWFkZXJzOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRDU1ZIZWFkZXJzKCkKCXsKCQkkaGVhZGVycyA9ICR0aGlzLT5nZXRHcmlkSGVhZGVycygpOwoJCQoJCSRjc3ZIZWFkZXJzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkaGVhZGVycyBhcyAkaz0+JHYpCgkJewoJCQlpZiAoaXNzZXQoJHZbJ2xhYmVsJ10pKQoJCQl7CgkJCQkkY3N2SGVhZGVyc1tdID0gJHZbJ2xhYmVsJ107CgkJCQkKCQkJCWlmKHN0cnRvbG93ZXIoJHZbJ2xhYmVsJ10pID09ICJhbW91bnQiKQoJCQkJewoJCQkJCSRjc3ZIZWFkZXJzW10gPSAiQ3VycmVuY3kiOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJLy9kZXJpdmUgdGhlIHRpdGxlIGZyb20gdGhlIGtleSBvZiB0aGUgaGVhZGVycyBhcnJheQoJCQkJJHNwbGl0ID0gZXhwbG9kZSgiXyIsJGspOwoJCQkJZm9yZWFjaCAoJHNwbGl0IGFzICYkd29yZCkKCQkJCXsKCQkJCQkkd29yZCA9IHVjZmlyc3QoJHdvcmQpOwoJCQkJfQoJCQkJJGNzdkhlYWRlcnNbXSA9IGltcGxvZGUoIiAiLCRzcGxpdCk7CgkJCX0KCQl9CgkJCgkJcmV0dXJuICRjc3ZIZWFkZXJzOwoJfQp9Cg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(3, 'paypalservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIE1NX1BheVBhbFNlcnZpY2UgaGFuZGxzIFBheVBhbCB0cmFuc2FjdGlvbnMgYW5kIG5vdGlmaWNhdGlvbnMgbWFkZSB1c2luZyBQYXlQYWwgU3RhbmRhcmQgYW5kIEV4cHJlc3MgQ2hlY2tvdXQKICogSXQgYWxzbyBoYXMgdGhlIGNhcGFiaWxpdHkgdG8gY3JlYXRlIG9yZGVycyBiYXNlZCBvbiBjb3JyZWN0bHkgZm9ybWF0dGVkIGluY29taW5nIElQTnMuCiAqIAogKiBUaGUgZmFjaWxpdGF0b3Igb2YgdGhlIG9yZGVyIGNyZWF0aW9uIHByb2Nlc3MgZm9yIElQTnMgaXMgdGhlICdjdXN0b20nIGZpZWxkIHRoYXQgUGF5UGFsIGFsbG93cyBtZXJjaGFudHMgdG8gc2VuZAogKiBXaGlsZSB0aGlzIGZpZWxkIGlzIGxpbWl0ZWQgdG8gMjU1IGNoYXJhY3RlcnMsIHRoZSBzY2hlbWUgdXNlZCBieSB0aGlzIGNsYXNzIHN0aWxsIG9wZW5zIHVwIHRoZSBwb3NzaWJpbGl0eSBmb3IgbW9kZXJhdGUgdG8KICogbGFyZ2Ugb3JkZXJzIHRvIGJlIGNyZWF0ZWQgZnJvbSBhbiBleHRlcm5hbCBmb3JtIG9yIGEgbGluay4KICogCiAqIFRoZSBzY2hlbWUgaXM6IG9yZGVySXRlbUlkIHwgcHJvZHVjdCBxdWFudGl0eSB4IHByb2R1Y3QgaWQgfCBjb3Vwb24gcXVhbnRpdHkgKiBjb3Vwb24gaWQgfCBzaGlwcGluZyBpZCAqIHNoaXBwaW5nIGFtb3VudAogKiBtdWx0aXBsZSBwcm9kdWN0cyBhbmQvb3IgY291cG9ucyBhcmUgc2VwYXJhdGVkIGJ5IGFuIGFtcGVyc2FuZCAoJikuIE9yZGVyIEl0ZW0gSWQgb25seSBleGlzdHMgaWYgdGhlIG9yZGVyIGNvbnRhaW5zIG9ubHkgb25lIHByb2R1Y3QuCiAqIAogKiBBbiBleGFtcGxlIGN1c3RvbSBmaWVsZCBtaWdodCBiZTogfDIqMTQmMSo1fDEqMjB8MyoxNC45NSAKICogd2hpY2ggZGVjb2RlcyB0bzogTm8gb3JkZXIgaXRlbSBpZCwgMnggcHJvZHVjdCBpZCAxNCwgMSB4IHByb2R1Y3QgaWQgNSwgMSB4IGNvdXBvbiBpZCAyMCwgYW5kIHNoaXBwaW5nIG1ldGhvZCB3aXRoIGlkIDMgYW5kIGFtb3VudCAkMTQuOTUKICoKICogCiAqLwpjbGFzcyBNTV9QYXlQYWxTZXJ2aWNlIGV4dGVuZHMgTU1fUGF5bWVudFNlcnZpY2UKewoJcHJvdGVjdGVkICR0b2tlbiA9ICJQQVlQQUwiOyAKCQoJLy9wYXlwYWwgcGF5bWVudCBzdGF0dXNlcwoJcHVibGljIHN0YXRpYyAkUEFZTUVOVF9TVEFUVVNfQ0FOQ0VMRURfUkVWRVJTQUwgPSAiQ2FuY2VsZWRfUmV2ZXJzYWwiOwoJcHVibGljIHN0YXRpYyAkUEFZTUVOVF9TVEFUVVNfQ09NUExFVEVEID0gIkNvbXBsZXRlZCI7CglwdWJsaWMgc3RhdGljICRQQVlNRU5UX1NUQVRVU19ERU5JRUQgPSAiRGVuaWVkIjsKCXB1YmxpYyBzdGF0aWMgJFBBWU1FTlRfU1RBVFVTX0VYUElSRUQgPSAiRXhwaXJlZCI7CglwdWJsaWMgc3RhdGljICRQQVlNRU5UX1NUQVRVU19GQUlMRUQgPSAiRmFpbGVkIjsKCXB1YmxpYyBzdGF0aWMgJFBBWU1FTlRfU1RBVFVTX0lOX1BST0dSRVNTID0gIkluLVByb2dyZXNzIjsKCXB1YmxpYyBzdGF0aWMgJFBBWU1FTlRfU1RBVFVTX1BBUlRJQUxMWV9SRUZVTkRFRCA9ICJQYXJ0aWFsbHlfUmVmdW5kZWQiOwoJcHVibGljIHN0YXRpYyAkUEFZTUVOVF9TVEFUVVNfUEVORElORyA9ICJQZW5kaW5nIjsKCXB1YmxpYyBzdGF0aWMgJFBBWU1FTlRfU1RBVFVTX1BST0NFU1NFRCA9ICJQcm9jZXNzZWQiOwoJcHVibGljIHN0YXRpYyAkUEFZTUVOVF9TVEFUVVNfUkVGVU5ERUQgPSAiUmVmdW5kZWQiOwoJcHVibGljIHN0YXRpYyAkUEFZTUVOVF9TVEFUVVNfUkVWRVJTRUQgPSAiUmV2ZXJzZWQiOwoJcHVibGljIHN0YXRpYyAkUEFZTUVOVF9TVEFUVVNfVk9JREVEID0gIlZvaWRlZCI7CgkKCXB1YmxpYyBzdGF0aWMgJERGTFRfTE9DQUxFID0gIkRGTFRfTE9DQUxFIjsKCglwdWJsaWMgc3RhdGljICRJUE5fVVNFUl9BR0VOVCA9ICJNRU1CRVJNT1VTRVNFUlZJQ0UiOwoJCgkvL2ludGVybmFsIGVycm9ycwoJcHJpdmF0ZSBzdGF0aWMgJE1VTFRJUExFX1NVQlNDUklQVElPTlNfRVJST1IgPSAibXVsdGlwbGVfc3Vic2NyaXB0aW9uc19lcnJvciI7CgkKCS8vaXBuIHByb2Nlc3Npbmcgc3RhdHVzZXMKCXByaXZhdGUgc3RhdGljICRJUE5fU1RBVFVTX1BST0NFU1NFRCA9IDE7Cglwcml2YXRlIHN0YXRpYyAkSVBOX1NUQVRVU19EVVBMSUNBVEUgPSAyOwoJCgkvL3Byb2R1Y3Rpb24gYW5kIHNhbmRib3ggdXJscwoJcHJvdGVjdGVkICRzYW5kYm94VXJsICAgID0gImh0dHBzOi8vd3d3LnNhbmRib3gucGF5cGFsLmNvbS9jZ2ktYmluL3dlYnNjciI7Cglwcm90ZWN0ZWQgJHByb2R1Y3Rpb25VcmwgPSAiaHR0cHM6Ly93d3cucGF5cGFsLmNvbS9jZ2ktYmluL3dlYnNjciI7CgkKCS8vcHJvZHVjdGlvbiBhbmQgc2FuZGJveCBudnAgZW5kcG9pbnRzCglwcm90ZWN0ZWQgJHNhbmRib3hOdnBFbmRwb2ludCAgICA9ICJodHRwczovL2FwaS0zdC5zYW5kYm94LnBheXBhbC5jb20vbnZwIjsKCXByb3RlY3RlZCAkcHJvZHVjdGlvbk52cEVuZHBvaW50ID0gImh0dHBzOi8vYXBpLTN0LnBheXBhbC5jb20vbnZwIjsKCQoJLy9jb25maWd1cmF0aW9uIGZpZWxkcwoJcHJvdGVjdGVkICRlbWFpbCA9ICIiOwoJcHJvdGVjdGVkICRsb2NhbGUgPSAiIjsKCXByb3RlY3RlZCAkdXNlU2FuZGJveCA9IGZhbHNlOwoJCgkvL2FwaSBjb25maWd1cmF0aW9uIGZpZWxkcywgZm9yIHVzZSB3aXRoIEV4cHJlc3MgQ2hlY2tvdXQgQVBJIChjYW4gYmUgdXNlZCB0byBjYW5jZWwgc3Vic2NyaXB0aW9ucykKCXByb3RlY3RlZCAkYXBpVXNlcm5hbWUgID0gIiI7Cglwcm90ZWN0ZWQgJGFwaVBhc3N3b3JkICA9ICIiOwoJcHJvdGVjdGVkICRhcGlTaWduYXR1cmUgPSAiIjsKCQoJLy9wZHQgaWRlbnRpdHkgdG9rZW4KCXByb3RlY3RlZCAkcGR0SWRlbnRpdHlUb2tlbiA9ICIiOwoJCgkvL3RoZSBmb2xsb3dpbmcgZmllbGRzIHNob3VsZCBub3QgYmUgcGVyc2lzdGVkL3NlcmlhbGl6ZWQKCXByb3RlY3RlZCAkZXhjbHVzaW9ucyA9IGFycmF5KCJzYW5kYm94VXJsIiwgInByb2R1Y3Rpb25VcmwiLCJzYW5kYm94TnZwRW5kcG9pbnQiLCJwcm9kdWN0aW9uTnZwRW5kcG9pbnQiKTsKCQoJLy9UT0RPOiBSRUZBQ1RPUjogTkVWRVIgU0hJUCBUTyBQUk9EVUNUSU9OIFdJVEggJHNraXBWYWxpZGF0aW9uIEFTIFRSVUU7IEZPUiBMT0NBTCBURVNUSU5HIE9OTFkhCglwcml2YXRlICRza2lwVmFsaWRhdGlvbiA9IGZhbHNlOwoJcHJpdmF0ZSAkYWxsb3dPcmRlckNyZWF0aW9uID0gZmFsc2U7CgkKCXByb3RlY3RlZCAkc3VwcG9ydGVkQ3VycmVuY2llcyA9IGFycmF5KCJVU0QiLCJBVUQiLCJCUkwiLCJDQUQiLCJDSEYiLCJDWksiLCJES0siLCJFVVIiLCJHQlAiLAoJCQkJCQkJCQkJICAgIkhLRCIsIkhVRiIsIklMUyIsIkpQWSIsIk1YTiIsIk1ZUiIsIk5PSyIsIk5aRCIsIlBIUCIsCgkJCQkJCQkJCQkgICAiUExOIiwiU0VLIiwiU0dEIiwiVEhCIiwiVFJZIiwiVFdEIik7CgkKCXB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJcGFyZW50OjppbnN0YWxsKCk7CgkJCgkJJHNxbFtdID0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX1BBWVBBTF9JUE5fTE9HLiIgKFxuIi4KCQkJCSJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSJvcmRlcl9pZCBiaWdpbnQoMjApLFxuIi4KCQkJCSJvcmRlcl9pdGVtX2lkIGJpZ2ludCgyMCksXG4iLgoJCQkJInR4bl9pZCB2YXJjaGFyKDIwKSxcbiIuCgkJCQkidHhuX3R5cGUgdmFyY2hhcigzMiksXG4iLgoJCQkJInN1YnNjcl9pZCB2YXJjaGFyKDIwKSxcbiIuCgkJCQkicGF5bWVudF9zdGF0dXMgdmFyY2hhcigzMiksXG4iLgoJCQkJImlwbl9jb250ZW50IHRleHQgbm90IG51bGwsXG4iLgoJCQkJInJlY2VpdmVkIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKGlkKSxcbiIuCgkJCQkiS0VZIG1tX3BheXBhbF9pcG5fbG9nX3R4bl9pZF9pZHggKHR4bl9pZCkiLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCQkKCQkkc3FsW10gPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfUEFZUEFMX1NVQlNDUl9MSU5LUy4iIChcbiIuCgkJCQkic3Vic2NyX2lkIHZhcmNoYXIoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJvcmRlcl9pdGVtX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoc3Vic2NyX2lkLG9yZGVyX2l0ZW1faWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCQkKCQkKCQlmb3JlYWNoICgkc3FsIGFzICRxdWVyeSkKCQl7CgkJCWRiZGVsdGEoJHF1ZXJ5KTsKCQl9CgkJCgl9CgkKCQoJLyoqCgkgKiBVc2VkIHRvIHJlcG9ydCB3aGF0IGZlYXR1cmVzIHRoZSBQYXlQYWwgU2VydmljZSBzdXBwb3J0cwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6c3VwcG9ydHNGZWF0dXJlKCkKCSAqIAoJICogQHBhcmFtICRmZWF0dXJlQ29uc3QgYSBjb25zdCBhcyBkZWZpbmVkIGluIE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXMKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHN1cHBvcnRlZCwgZmFsc2UgaWYgbm90IHN1cHBvcnRlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gc3VwcG9ydHNGZWF0dXJlKCRmZWF0dXJlQ29uc3QpCgl7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6T0ZGU0lURV9TRVJWSUNFOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OkNPVVBPTlM7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6VEVTVF9NT0RFOwoJCXJldHVybiBpbl9hcnJheSgkZmVhdHVyZUNvbnN0LCRzdXBwb3J0ZWQsdHJ1ZSk7Cgl9CgkKCS8qKgoJICogUmV0dXJucyB0aGUgaHRtbCB0aGF0IHdpbGwgYmUgdXNlZCBvbiB0aGUgcGF5bWVudCBtZXRob2Qgc2V0dGluZ3Mgc2NyZWVuIGZvciBjb25maWd1cmluZyBQYXlQYWwKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmRpc3BsYXlDb25maWdPcHRpb25zKCkKCSAqIAoJICogQHJldHVybiBTdHJpbmcgY29udGFpbmluZyB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cgaHRtbAoJICovCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJewoJCSRjb25maWdfb3B0aW9ucyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS9wYXlwYWxfY29uZmlnLmh0bWwucGhwIiwkdGhpcyk7CgkJcmV0dXJuICRjb25maWdfb3B0aW9uczsKCX0KCQoJLyoqCgkgKiBWYWxpZGF0ZXMgYW5kIGNvbmZpZ3VyZXMgdGhlIG9iamVjdCB3aXRoIHRoZSBzZXR0aW5ncyBpbmZvcm1hdGlvbiBnZW5lcmF0ZWQgYnkgc3VibWlzc2lvbiBvZiB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NDb25maWdPcHRpb25zKCkKCSAqCgkgKiBAcGFyYW0gJHBvc3QgYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSBwb3N0ZWQgZnJvbSB0aGUgcGF5bWVudCBtZXRob2RzIHNldHRpbmdzIHNjcmVlbgoJICogQHJldHVybiBBbiBNTV9SZXNwb25zZSBvZiB0eXBlIE1NX1Jlc3BvbnNlOjpTVUNDRVNTIGluZGljYXRpbmcgc3VjY2Vzc2Z1bCB2YWxpZGF0aW9uIGFuZCBhc3NpZ21lbnQuIE9uIGVycm9yLCB0aGUgdHlwZSB3aWxsIGJlIE1NX1Jlc3BvbnNlOjpFUlJPUiBhbmQgdGhlIG1lc3NhZ2Ugd2lsbCBjb250YWluIHRoZSBlcnJvciBtZXNzYWdlcwoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc0NvbmZpZ09wdGlvbnMoJHBvc3QpCgl7CgkJJGFjdGl2ZSA9IGlzc2V0KCRwb3N0WydvZmZzaXRlX3BheW1lbnRfc2VydmljZXMnXSkgJiYgaW5fYXJyYXkoc3RydG9sb3dlcigkdGhpcy0+Z2V0VG9rZW4oKSksICRwb3N0WydvZmZzaXRlX3BheW1lbnRfc2VydmljZXMnXSk7CgkJJHRoaXMtPnNldEFjdGl2ZSgkYWN0aXZlKTsKCQlpZiAoJGFjdGl2ZSkKCQl7CgkJCSR0aGlzLT5pbnN0YWxsKCk7CgkJCSRjb25maWcgPSBpc3NldCgkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ3BheXBhbCddKT8kcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ3BheXBhbCddOmFycmF5KCk7CgkJCWlmICghaXNzZXQoJGNvbmZpZ1snZW1haWwnXSkgfHwgZW1wdHkoJGNvbmZpZ1snZW1haWwnXSkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlBheVBhbCBDb25maWd1cmF0aW9uIEVycm9yOiBwbGVhc2UgZW50ZXIgYW4gZW1haWwgYWRkcmVzcyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJZWxzZSBpZiAoaXNzZXQoJGNvbmZpZ1snZW1haWwnXSkpCgkJCXsKCQkJCS8vVE9ETzogRlVUVVJFOiB2YWxpZGF0ZSBlbWFpbD8KCQkJCSR0aGlzLT5zZXRFbWFpbCgkY29uZmlnWydlbWFpbCddKTsKCQkJfQoKCQkJJHRoaXMtPnNldExvY2FsZSgkY29uZmlnWydsb2NhbGUnXSk7CgkJCSR0aGlzLT51c2VTYW5kYm94KChpc3NldCgkY29uZmlnWyd1c2Vfc2FuZGJveCddKSAmJiAoc3RydG9sb3dlcigkY29uZmlnWyd1c2Vfc2FuZGJveCddKSA9PSAidHJ1ZSIpKT90cnVlOmZhbHNlKTsKCQkJCgkJCSRjb25maWdbJ3BkdF9pZGVudGl0eV90b2tlbiddID0gIWVtcHR5KCRjb25maWdbJ3BkdF9pZGVudGl0eV90b2tlbiddKT8kY29uZmlnWydwZHRfaWRlbnRpdHlfdG9rZW4nXToiIjsKCQkJJHRoaXMtPnNldFBEVElkZW50aXR5VG9rZW4oJGNvbmZpZ1sncGR0X2lkZW50aXR5X3Rva2VuJ10pOwoJCQkKCQkJJGNvbmZpZ1snYXBpX3VzZXJuYW1lJ10gPSAhZW1wdHkoJGNvbmZpZ1snYXBpX3VzZXJuYW1lJ10pPyRjb25maWdbJ2FwaV91c2VybmFtZSddOiIiOwoJCQkkY29uZmlnWydhcGlfcGFzc3dvcmQnXSA9ICFlbXB0eSgkY29uZmlnWydhcGlfcGFzc3dvcmQnXSk/JGNvbmZpZ1snYXBpX3Bhc3N3b3JkJ106IiI7CgkJCSRjb25maWdbJ2FwaV9zaWduYXR1cmUnXSA9ICFlbXB0eSgkY29uZmlnWydhcGlfc2lnbmF0dXJlJ10pPyRjb25maWdbJ2FwaV9zaWduYXR1cmUnXToiIjsKCQkJCgkJCWlmICghZW1wdHkoJGNvbmZpZ1snYXBpX3VzZXJuYW1lJ10pIHx8ICFlbXB0eSgkY29uZmlnWydhcGlfcGFzc3dvcmQnXSkgfHwgIWVtcHR5KCRjb25maWdbJ2FwaV9zaWduYXR1cmUnXSkpCgkJCXsKCQkJCSRhbGxBcmVDb25maWd1cmVkID0gKCFlbXB0eSgkY29uZmlnWydhcGlfdXNlcm5hbWUnXSkgJiYgIWVtcHR5KCRjb25maWdbJ2FwaV9wYXNzd29yZCddKSAmJiAhZW1wdHkoJGNvbmZpZ1snYXBpX3NpZ25hdHVyZSddKSk7CgkJCQlpZiAoISRhbGxBcmVDb25maWd1cmVkKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlBheVBhbCBDb25maWd1cmF0aW9uIEVycm9yOiBUaGUgQVBJIGNyZWRlbnRpYWxzIG11c3QgYWxsIGJlIGZpbGxlZCBvdXQgaW4gb3JkZXIgdG8gdXNlIHRoZSBQYXlQYWwgQVBJLiBJdCBpcyBub3QgcmVxdWlyZWQsIGJ1dCB3aXRob3V0IHRoZSBBUEksIHJlZnVuZHMgYW5kIHJlY3VycmluZyBwcm9kdWN0IGNhbmNlbGxhdGlvbnMgY2Fubm90IGJlIHBlcmZvcm1lZCBmcm9tIHdpdGhpbiBNZW1iZXJNb3VzZSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQkJJHRoaXMtPnNldEFQSVVzZXJuYW1lKCRjb25maWdbJ2FwaV91c2VybmFtZSddKTsKCQkJJHRoaXMtPnNldEFQSVBhc3N3b3JkKCRjb25maWdbJ2FwaV9wYXNzd29yZCddKTsKCQkJJHRoaXMtPnNldEFQSVNpZ25hdHVyZSgkY29uZmlnWydhcGlfc2lnbmF0dXJlJ10pOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRFbWFpbCgpCgl7CgkJcmV0dXJuICR0aGlzLT5lbWFpbDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RW1haWwoJGVtYWlsKQoJewoJCSR0aGlzLT5lbWFpbCA9ICRlbWFpbDsKCX0KCQoJCgkvKioKCSAqIFJlZnVuZHMgdGhlIHRyYW5zYWN0aW9uIHdpdGggdGhlIHN1cHBsaWVkIGlkIGlmIGFwaSBjcmVkZW50aWFscyBhcmUgcHJlc2VudC4gSWYgbm90LCBhbiBlcnJvciBtZXNzYWdlIGRpcmVjdGluZyB0aGUgdXNlciB0byB0aGUKCSAqIFBheVBhbCBpbnRlcmZhY2UgaXMgcmV0dXJuZWQKCSAqCgkgKiBAcGFyYW0gaW50ZWdlciAkdHJhbnNhY3Rpb25JZCBUaGUgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24gaWQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBSZXByZXNlbnRpbmcgdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBvZiB0aGUgcmVmdW5kIG9wZXJhdGlvbgoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQpCgl7CgkJaWYgKCFlbXB0eSgkdGhpcy0+YXBpVXNlcm5hbWUpICYmICFlbXB0eSgkdGhpcy0+YXBpUGFzc3dvcmQpICYmICFlbXB0eSgkdGhpcy0+YXBpU2lnbmF0dXJlKSkKCQl7CgkJCSRyZWZ1bmRSZXNwb25zZSA9ICR0aGlzLT5leHByZXNzQ2hlY2tvdXRSZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCk7CgkJCXJldHVybiAkcmVmdW5kUmVzcG9uc2U7CgkJfQoJCSRwYXlwYWxVcmwgPSAiaHR0cHM6Ly93d3cucGF5cGFsLmNvbSI7CgkJJGVycm9yTWVzc2FnZSA9ICJUbyByZWZ1bmQgdGhpcyB0cmFuc2FjdGlvbiwgdXNlIHRoZSA8YSBocmVmPSd7JHBheXBhbFVybH0nIHRhcmdldD0nX2JsYW5rJz5QYXlQYWwgaW50ZXJmYWNlIGF0IHskcGF5cGFsVXJsfTwvYT4iOwoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5UGF5bWVudEZvcm0oTU1fT3JkZXIgJG9yZGVyKQoJewoJCSR0ZW1wbGF0ZURhdGEgPSBuZXcgc3RkQ2xhc3MoKTsKCQkkdGVtcGxhdGVEYXRhLT5mb3JtX2Rlc3RpbmF0aW9uID0gJHRoaXMtPmdldFBheXBhbFN0YW5kYXJkVXJsKCk7CgkJCgkJJHRlbXBsYXRlRGF0YS0+dG9rZW4gPSAkdGhpcy0+Z2V0VG9rZW4oKTsKCQkkdGVtcGxhdGVEYXRhLT5jb25maWdBcnJheSA9ICR0aGlzLT5nZXRQYXltZW50Q29uZmlnQXJyYXkoJG9yZGVyKTsgCgkJJGh0bWw9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS9wYXlwYWxfcGF5bWVudF9mb3JtLmh0bWwucGhwIiwkdGVtcGxhdGVEYXRhKTsKCQlyZXR1cm4gJGh0bWw7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGtleS92YWx1ZSBwYWlycyBuZWNlc3NhcnkgdG8gY3JlYXRlIGEgcGF5cGFsIHN0YW5kYXJkIHN1YnNjcmliZSBidXR0b24KCSAqIElmIGFuIG9yZGVyIGNvbnRhaW5zIGEgc2luZ2xlIHJlY3VycmluZyBwcm9kdWN0LCBzZW5kIHRoZSB1c2VyX2lkICsgInwiICsgb3JkZXJfaXRlbV9pZCBpbiB0aGUgJ2N1c3RvbScKCSAqIGZpZWxkIGluIHRoZSBQYXlQYWwgcmVxdWVzdC4gCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyCgkgKiBAcmV0dXJuIGFycmF5IG9mIGtleS92YWx1ZSBwYWlycwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0UGF5bWVudENvbmZpZ0FycmF5KE1NX09yZGVyICRvcmRlcikKCXsKCQkKCQkkb3JkZXJQcm9kdWN0SXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJJHJlY3VycmluZ0l0ZW1zID0gYXJyYXkoKTsKCQkKCQkkb3JkZXJIYXNSZWd1bGFyUHJvZHVjdCA9IGZhbHNlOwoJCSRvcmRlckhhc1JlY3VycmluZ1Byb2R1Y3QgPSBmYWxzZTsKCQkKCQkkZXJyb3IgPSAiIjsKCQkkaXRlbURlc2NyaXB0aW9uID0gIiI7CgkKCQlmb3JlYWNoICgkb3JkZXJQcm9kdWN0SXRlbXMgYXMgJGVhY2hQcm9kdWN0SXRlbSkKCQl7CgkJCSRlYWNoUHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRlYWNoUHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpKTsKCQkJJGl0ZW1EZXNjcmlwdGlvbiA9ICgkZWFjaFByb2R1Y3RJdGVtLT5nZXRRdWFudGl0eSgpID4gMSk/KCRlYWNoUHJvZHVjdEl0ZW0tPmdldFF1YW50aXR5KCkuIiB4ICIuJGVhY2hQcm9kdWN0LT5nZXROYW1lKCkpOiRlYWNoUHJvZHVjdC0+Z2V0TmFtZSgpOwoJCQlpZiAoJGVhY2hQcm9kdWN0LT5pc1JlY3VycmluZygpKQoJCQl7CgkJCQkkcmVjdXJyaW5nSXRlbURhdGEgPSBuZXcgc3RkQ2xhc3MoKTsKCQkJCSRyZWN1cnJpbmdJdGVtRGF0YS0+aXRlbSA9ICRlYWNoUHJvZHVjdEl0ZW07CgkJCQkkcmVjdXJyaW5nSXRlbURhdGEtPnByb2R1Y3QgPSAkZWFjaFByb2R1Y3Q7CgkJCQkkcmVjdXJyaW5nSXRlbXNbXSA9ICRyZWN1cnJpbmdJdGVtRGF0YTsKCQkJCWlmICgkb3JkZXJIYXNSZWN1cnJpbmdQcm9kdWN0KQoJCQkJewoJCQkJCSRlcnJvciA9IHNlbGY6OiRNVUxUSVBMRV9TVUJTQ1JJUFRJT05TX0VSUk9SOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRvcmRlckhhc1JlY3VycmluZ1Byb2R1Y3QgPSB0cnVlOwoJCQkJfQoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRvcmRlckhhc1JlZ3VsYXJQcm9kdWN0ID0gdHJ1ZTsgLy9ub3QgYmVpbmcgdXNlZCB5ZXQsIGJ1dCBhdmFpbGFibGUgaWYgbmVlZGVkIGluIHRoZSBmdXR1cmUKCQkJfQoJCX0KCQkKCQlpZiAoY291bnQoJG9yZGVyUHJvZHVjdEl0ZW1zKSA+IDEpIC8vaXRlbWRlc2NyaXB0aW9uIGlzIHNldCBpbiB0aGUgbG9vcCBhYm92ZQoJCXsKCQkJJGl0ZW1EZXNjcmlwdGlvbiA9IGdldF9ibG9naW5mbygpIC4gIiBwcm9kdWN0cyI7CgkJfQoJCQoJCQoJCS8vSWYgdGhlcmUgYXJlIG5vIHJlY3VycmluZyBwcm9kdWN0cywgdXNlIHRoZSBfeGNsaWNrIGNvbW1hbmQgKEJ1eSBOb3cgQnV0dG9uIGFuYWxvZ3VlKSB0byBzZW5kIHRoZSBkYXRhIHRvIFBheVBhbAoJCS8vT3RoZXJ3aXNlLCB3ZSBtdXN0IHVzZSBfeGNsaWNrX3N1YnNjcmlwdGlvbnMKCQkkYmlsbGluZ0NvbmZpZyA9IGFycmF5KCk7CgkJaWYgKCEkb3JkZXJIYXNSZWN1cnJpbmdQcm9kdWN0KQoJCXsKCQkJJGFtb3VudFRvQmlsbCA9ICgkb3JkZXItPmdldFN1YnRvdGFsKCkgLSBhYnMoJG9yZGVyLT5nZXREaXNjb3VudCgpKSk7CgkJCSRhbW91bnRUb0JpbGwgPSAoJGFtb3VudFRvQmlsbCA8IDApPzA6JGFtb3VudFRvQmlsbDsgLy9pZiB0aGUgZGlzY291bnQgaXMgZ3JlYXRlciB0aGFuIHRoZSBvcmRlciBhbW91bnQsIHNldCBwcmljZSBiZWNvbWVzICQwIGluc3RlYWQgb2YgbmVnYXRpdmUKCQkJCgkJCSRiaWxsaW5nQ29uZmlnWydjbWQnXSA9ICdfeGNsaWNrJzsKCQkJJGJpbGxpbmdDb25maWdbJ2Ftb3VudCddID0gJGFtb3VudFRvQmlsbDsgLy9kaXNjb3VudCBoYXMgdG8gYmUgY29tYmluZWQgaW50byBpdGVtIHByaWNlIGJlY2F1c2UgdGhlcmUgaXMgbm8gcGF5cGFsIHZhcmlhYmxlIGZvciBkaXNjb3VudHMKCQkJJGJpbGxpbmdDb25maWdbJ2l0ZW1fbmFtZSddID0gJGl0ZW1EZXNjcmlwdGlvbjsKCQkJJGJpbGxpbmdDb25maWdbJ3VwbG9hZCddID0gJzEnOwoJCQkkYmlsbGluZ0NvbmZpZ1snbm9fc2hpcHBpbmcnXSA9ICcxJzsgLy9kb24ndCBwcm9tcHQgZm9yIHNoaXBwaW5nIGFkZHJlc3MsIHdlIGFscmVhZHkgaGF2ZSBpdAoJCQkkYmlsbGluZ0NvbmZpZ1snc2hpcHBpbmcnXSA9ICRvcmRlci0+Z2V0U2hpcHBpbmcoKTsKCQkJCgkJCS8vIFRPRE8gYWRkIHRheCBiYWNrIGluIHdoZW4gc3VwcG9ydGVkIGJ5IE1lbWJlck1vdXNlOyBjdXJyZW50bHkgaW5jbHVkaW5nIHRoZSB0YXggd2lsbAoJCQkvLyBtYWtlIGl0IHNvIHRoYXQgUGF5UGFsJ3MgYnVpbHQtaW4gdGF4IGNhbGN1bGF0aW9uIGZ1bmN0aW9uYWxpdHkgaXMgYnlwYXNzZWQKCQkJLy8kYmlsbGluZ0NvbmZpZ1sndGF4J10gPSAkb3JkZXItPmdldFRheCgpOwoJCQkvL3RoaXMgY2FuIGJlIGJyb2tlbiBvdXQgaW50byBpbmRpdmlkdWFsIGl0ZW1zIGxhdGVyLCBidXQgdGhlbiB0aGUgZGlzY291bnRzIG11c3QgYmUgY2FsY3VsYXRlZCBwZXItaXRlbQoJCQkvL3NlZSBodHRwczovL2Ntcy5wYXlwYWwuY29tL2F1L2NnaS1iaW4vP2NtZD1fcmVuZGVyLWNvbnRlbnQmY29udGVudF9JRD1kZXZlbG9wZXIvZV9ob3d0b19odG1sX2NhcnRfdXBsb2FkIGZvciBkZXRhaWxzCgkJfQoJCWVsc2UKCQl7CgkJCS8vb3JkZXIgaGFzIGEgcmVjdXJyaW5nIHByb2R1Y3QKCQkJJHJlY3VycmluZ0l0ZW1EYXRhID0gcmVzZXQoJHJlY3VycmluZ0l0ZW1zKTsKCQkJJHJlY3VycmluZ0l0ZW0gPSAkcmVjdXJyaW5nSXRlbURhdGEtPml0ZW07CgkJCSRyZWN1cnJpbmdQcm9kdWN0ID0gJHJlY3VycmluZ0l0ZW1EYXRhLT5wcm9kdWN0OwoJCQkkYmlsbGluZ0NvbmZpZ1snY21kJ10gPSAnX3hjbGljay1zdWJzY3JpcHRpb25zJzsKCQkJJGJpbGxpbmdDb25maWdbJ25vX25vdGUnXSA9IDE7CgkJCSRiaWxsaW5nQ29uZmlnWydzcmMnXSA9ICIxIjsgLy9TZXQgcmVjdXJyaW5nIHBheW1lbnRzIHVudGlsIGNhbmNlbGVkCgkJCSRiaWxsaW5nQ29uZmlnWydpdGVtX25hbWUnXSA9ICRpdGVtRGVzY3JpcHRpb247CgkJCSRiaWxsaW5nQ29uZmlnWydpdGVtX251bWJlciddID0gJHJlY3VycmluZ1Byb2R1Y3QtPmdldElkKCk7CgkJCQoJCQkkbGltaXRNb2RpZmllciA9IDA7CgkJCWlmICgoJG9yZGVyLT5nZXRUb3RhbCgpICE9ICRyZWN1cnJpbmdJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSkgfHwgKCRyZWN1cnJpbmdJdGVtLT5oYXNUcmlhbFBlcmlvZCgpKSkKCQkJewoJCQkgICAgaWYgKCRyZWN1cnJpbmdJdGVtLT5oYXNUcmlhbFBlcmlvZCgpKQoJCQkJewoJCQkJICAgIC8vaWYgdGhlIHByb2R1Y3QgaXMgY29uZmlndXJlZCB3aXRoIGEgdHJpYWwsIG1vZGlmeSB0aGUgdHJpYWwgYW1vdW50IGZvciBvdXIgbmVlZHMgaWYgbmVjZXNzYXJ5CgkJCQkJJHBheXBhbFVuaXRzID0gJHRoaXMtPmNvbnZlcnRNTVRvUGF5cGFsVW5pdHMoJHJlY3VycmluZ1Byb2R1Y3QtPmdldFRyaWFsRHVyYXRpb24oKSwkcmVjdXJyaW5nUHJvZHVjdC0+Z2V0VHJpYWxGcmVxdWVuY3koKSk7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJICAgIC8vaWYgdGhlIHByb2R1Y3QgZG9lcyBub3QgaGF2ZSBhIHRyaWFsLCBidXQgd2UgbmVlZCB0byBjcmVhdGUgb25lIHRvIGFjY291bnQgZm9yIGRpc2NvdW50cyBvciBwcm9yYXRpb25zLCBtb2RpZnkgdGhlIGxpbWl0IGNvdW50ZXIgdG8gYWRqdXN0IGZvciB0aGF0CgkJCQkJJHBheXBhbFVuaXRzID0gJHRoaXMtPmNvbnZlcnRNTVRvUGF5cGFsVW5pdHMoJHJlY3VycmluZ1Byb2R1Y3QtPmdldFJlYmlsbFBlcmlvZCgpLCAkcmVjdXJyaW5nUHJvZHVjdC0+Z2V0UmViaWxsRnJlcXVlbmN5KCkpOwoJCQkJCSRsaW1pdE1vZGlmaWVyID0gMTsKCQkJCX0KCQkJCSRiaWxsaW5nQ29uZmlnWydhMSddID0gJG9yZGVyLT5nZXRUb3RhbCgpOwoJCQkJJGJpbGxpbmdDb25maWdbJ3AxJ10gPSAkcGF5cGFsVW5pdHNbJ251bVVuaXRzJ107CgkJCQkkYmlsbGluZ0NvbmZpZ1sndDEnXSA9ICRwYXlwYWxVbml0c1sndW5pdE5hbWUnXTsKCQkJfQoJCQkKCQkJJHJlZ3VsYXJQZXJpb2RQYXlwYWxVbml0cyA9ICR0aGlzLT5jb252ZXJ0TU1Ub1BheXBhbFVuaXRzKCRyZWN1cnJpbmdJdGVtLT5nZXRSZWJpbGxQZXJpb2QoKSwgJHJlY3VycmluZ0l0ZW0tPmdldFJlYmlsbEZyZXF1ZW5jeSgpKTsKCQkJJGJpbGxpbmdDb25maWdbJ2EzJ10gPSAkcmVjdXJyaW5nSXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCk7CgkJCSRiaWxsaW5nQ29uZmlnWydwMyddID0gJHJlZ3VsYXJQZXJpb2RQYXlwYWxVbml0c1snbnVtVW5pdHMnXTsKCQkJJGJpbGxpbmdDb25maWdbJ3QzJ10gPSAkcmVndWxhclBlcmlvZFBheXBhbFVuaXRzWyd1bml0TmFtZSddOwoJCQlpZiAoJHJlY3VycmluZ1Byb2R1Y3QtPmRvTGltaXRQYXltZW50cygpKQoJCQl7CgkJCQkkYmlsbGluZ0NvbmZpZ1snc3J0J10gPSAoJHJlY3VycmluZ1Byb2R1Y3QtPmdldE51bWJlck9mUGF5bWVudHMoKSAtICRsaW1pdE1vZGlmaWVyKTsKCQkJfQoJCX0KCQkKCQkvL2dldCBjb25maXJtYXRpb24gdXJsIHRvIHJlZGlyZWN0IHRvIG9uIHN1Y2Nlc3MKCQkkcmV0dXJuVXJsID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6Z2V0Q29uZmlybWF0aW9uVXJsRm9yT3JkZXIoJG9yZGVyKTsKCQkKCQkKCQkkcGF5bWVudENvbmZpZyA9IGFycmF5KCk7CgkJJHBheW1lbnRDb25maWdbJ2lzX3N0YW5kYXJkJ10gICAgID0gICAiMSI7IAoJCSRwYXltZW50Q29uZmlnWydidXNpbmVzcyddICAgICAgICA9ICAgJHRoaXMtPmdldEVtYWlsKCk7IC8vcmVjZWl2ZXIncyBQYXlQYWwgZW1haWwKCQkkcGF5bWVudENvbmZpZ1snY3VzdG9tJ10gICAgICAgICAgPSAgICR0aGlzLT5lbmNvZGVDdXN0b21GaWVsZCgkb3JkZXIpOwoJCSRwYXltZW50Q29uZmlnWydpbnZvaWNlJ10gICAgICAgICA9ICAgJG9yZGVyLT5nZXRPcmRlck51bWJlcigpOyAvL2ludm9pY2UgKG9yZGVyKSBudW1iZXIKCQkkcGF5bWVudENvbmZpZ1snbm90aWZ5X3VybCddICAgICAgPSAgIE1NX1BMVUdJTl9VUkwuIi94LnBocD9zZXJ2aWNlPXBheXBhbCI7CgkJJHBheW1lbnRDb25maWdbJ2NidCddICAgICAgICAgICAgID0gICAiUmV0dXJuIHRvICIuTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbigiYmxvZ25hbWUiKTsgLy9UaGUgdGV4dCBvZiB0aGUgYnV0dG9uIHRoZSB1c2VyIHNlZXMgYWZ0ZXIgcGF5bWVudAoJCSRwYXltZW50Q29uZmlnWydjYW5jZWxfcmV0dXJuJ10gICA9ICAgTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbigic2l0ZXVybCIpOwoJCSRwYXltZW50Q29uZmlnWydjdXJyZW5jeV9jb2RlJ10gICA9ICAgJG9yZGVyLT5nZXRDdXJyZW5jeSgpOyAKCQkKCQlpZigkdGhpcy0+Z2V0TG9jYWxlKCkgIT0gIiIgJiYgJHRoaXMtPmdldExvY2FsZSgpICE9IHNlbGY6OiRERkxUX0xPQ0FMRSkKCQl7CgkJCSRwYXltZW50Q29uZmlnWydsYyddID0gICAkdGhpcy0+Z2V0TG9jYWxlKCk7CgkJfQoJCQoJCSRwYXltZW50Q29uZmlnWydibiddCQkJICA9ICAgIk1lbWJlck1vdXNlX1NQIjsgLy8gUGF5UGFsIFBhcnRuZXJzaGlwIFByb2dyYW0gTWVtYmVyTW91c2UgQk4gY29kZQoJCQoJCWlmICghZW1wdHkoJGVycm9yKSkKCQl7CgkJCSRwYXltZW50Q29uZmlnWydlcnJvciddICAgICA9ICRlcnJvcjsKCQl9CgkJaWYgKCRyZXR1cm5VcmwgIT09IGZhbHNlKQoJCXsKCQkJJHBheW1lbnRDb25maWdbJ3JldHVybiddID0gJHJldHVyblVybDsKCQkJJHBheW1lbnRDb25maWdbJ3JtJ10gICAgID0gJzInOyAvL2hvdyBwYXlwYWwgcmVkaXJlY3RzIHRvIHRoZSByZXR1cm4gdXJsLiAwID0gR0VUcyB0aGUgcmV0dXJudXJsLCAxID0gR0VUcyB3aXRoIHBheW1lbnQgdmFyaWFibGVzLCAyID0gUE9TVHMgd2l0aCBwYXltZW50IHZhcmlhYmxlcwoJCX0KCQkKCQkkcGF5bWVudENvbmZpZyA9ICRiaWxsaW5nQ29uZmlnICsgJHBheW1lbnRDb25maWc7CgkJcmV0dXJuICRwYXltZW50Q29uZmlnOwkJCgl9CgkKCQoJLyoqCgkgKiBDcmVhdGUgYSB2YWx1ZSB0byBiZSBlbWJlZGRlZCBpbiB0aGUgJ2N1c3RvbScgZmllbGQgZm9yIGEgUGF5UGFsIFN0YW5kYXJkIG9yZGVyLgoJICogSXQgaXMgbGltaXRlZCB0byAyNTUtY2hhcnMgKGN1cnJlbnRseSBub3QgZW5mb3JjZWQpIGFuZCBjb250YWlucyB0aGUgCgkgKiBvcmRlciBpdGVtIGlkIChvcHRpb25hbCwgZm9yIG9uZSBwcm9kdWN0IHN1YnNjcmlwdGlvbnMgb25seSksIHRoZSBwcm9kdWN0IGlkcy9xdWFudGl0aWVzLCAKCSAqIHRoZSBjb3Vwb24gaWRzL3F1YW50aXRpZXMsIGFuZCB0aGUgc2hpcHBpbmcgbWV0aG9kIGlkIHBsdXMgdGhlIGFtb3VudC4gVGhlIGl0ZW1zIGFyZSBzZXBhcmF0ZWQgYnkKCSAqIHBpcGVzLCB3aXRoIG11bHRpcGxlIGl0ZW1zIGluIGVhY2ggc2VjdGlvbiBzZXBhcmF0ZWQgYnkgYW1wZXJzYW5kcy4gU2VlIHRoZSBjbGFzcyBkZXNjcmlwdGlvbiBmb3IgbW9yZSBkZXRhaWwKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgdG8gZW5jb2RlIGludG8gYSBjdXN0b20gZmllbGQKCSAqIEByZXR1cm4gU3RyaW5nIGNvbnRhaW5pbmcgdGhlIGVuY29kZWQgb3JkZXIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGVuY29kZUN1c3RvbUZpZWxkKE1NX09yZGVyICRvcmRlcikKCXsKCQkKCQkkcHJvZHVjdEl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCSRjb3Vwb25JdGVtcyA9ICRvcmRlci0+Z2V0Q291cG9ucygpOwoJCQoJCS8vc2VjdGlvbiAxIC0gb3JkZXIgaXRlbSBpZCAob25seSBmb3IgJ2J1eSBub3cnIG9yZGVycyBhbmQgc3Vic2NyaXB0aW9ucyB0aGF0IGNvbnRhaW4gMSBwcm9kdWN0KQoJCSRpdGVtSWRTZWN0aW9uID0gIiI7CgkJaWYgKGNvdW50KCRwcm9kdWN0SXRlbXMpID09IDEpCgkJewoJCQkkcHJvZHVjdEl0ZW0gPSByZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQkJaWYgKCRwcm9kdWN0SXRlbS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkaXRlbUlkU2VjdGlvbiA9ICRwcm9kdWN0SXRlbS0+Z2V0SWQoKTsKCQkJfQoJCX0KCQkKCQkvL3NlY3Rpb24gMiAtIHByb2R1Y3QgaWRzCgkJJHByb2R1Y3RJZFNlY3Rpb24gPSAiIjsKCQlyZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQlmb3JlYWNoICgkcHJvZHVjdEl0ZW1zIGFzICRlYWNoUHJvZHVjdEl0ZW0pCgkJewoJCQlpZiAoIWVtcHR5KCRwcm9kdWN0SWRTZWN0aW9uKSkKCQkJewoJCQkJJHByb2R1Y3RJZFNlY3Rpb24uPSImIjsKCQkJfQoJCQkkcHJvZHVjdElkU2VjdGlvbi49KCRlYWNoUHJvZHVjdEl0ZW0tPmdldFF1YW50aXR5KCkuIioiLiRlYWNoUHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpKTsKCQl9CgkJCgkJLy9zZWN0aW9uIDMgLSBjb3Vwb24gaWRzCgkJJGNvdXBvbklkU2VjdGlvbiA9ICIiOwoJCXJlc2V0KCRjb3Vwb25JdGVtcyk7CgkJZm9yZWFjaCAoJGNvdXBvbkl0ZW1zIGFzICRlYWNoY291cG9uSXRlbSkKCQl7CgkJCWlmICghZW1wdHkoJGNvdXBvbklkU2VjdGlvbikpCgkJCXsKCQkJCSRjb3Vwb25JZFNlY3Rpb24uPSImIjsKCQkJfQoJCQkkY291cG9uSWRTZWN0aW9uLj0oJGVhY2hjb3Vwb25JdGVtLT5nZXRRdWFudGl0eSgpLiIqIi4kZWFjaGNvdXBvbkl0ZW0tPmdldEl0ZW1JZCgpKTsKCQl9CgkJCgkJLy9zZWN0aW9uIDQgLSBubyBzaGlwcGluZyB5ZXQKCQkkc2hpcHBpbmdTZWN0aW9uID0gIiI7CgkJCgkJCgkJLy9jb21iaW5lIHRoZSBzZWN0aW9ucwoJCSRlbmNvZGVkRmllbGQgPSAieyRpdGVtSWRTZWN0aW9ufXx7JHByb2R1Y3RJZFNlY3Rpb259fHskY291cG9uSWRTZWN0aW9ufXx7JHNoaXBwaW5nU2VjdGlvbn0iOwoJCQoJCXJldHVybiAkZW5jb2RlZEZpZWxkOwoJfQoJCgkKCS8qKgoJICogUHJvY2Vzc2VzIElQTiBub3RpZmljYXRpb25zCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpwcm9jZXNzTm90aWZpY2F0aW9uKCkKCSAqIAoJICogQHBhcmFtICRyZXF1ZXN0IGFycmF5IGNvbnRhaW5pbmcgdGhlIElQTiB2YXJpYWJsZXMsIGdlbmVyYWxseSBhIGNvcHkgb2YgdGhlICRfUE9TVAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlIHByb2Nlc3NpbmcgdGhlIElQTgoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc05vdGlmaWNhdGlvbigkcmVxdWVzdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHJlcXVlc3QgPSAoZW1wdHkoJHJlcXVlc3QpICYmICFlbXB0eSgkX1BPU1QpICYmIGlzX2FycmF5KCRfUE9TVCkpPyRfUE9TVDokcmVxdWVzdDsgLy9pZiBmb3Igc29tZSByZWFzb24gcmVxdWVzdCBpc250IHNldCBidXQgdGhlcmUgaXMgYSAkX1BPU1QsIHVzZSB0aGUgJF9QT1NUCgkJCgkJLy92YWxpZGF0ZSB0aGUgSVBOCgkJJHJlcyA9ICR0aGlzLT52YWxpZGF0ZUlQTigkcmVxdWVzdCk7CgkJaWYgKCRyZXMtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBJUE4gTm90aWZpY2F0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2RldGVybWluZSBpZiB0aGlzIElQTiBpcyBmb3IgYSBub3JtYWwgb3JkZXIgb3IgYSBzdWJzY3JpcHRpb24gdXNpbmcgdHJhbnNhY3Rpb24gdHlwZSAodHhuX3R5cGUpCgkJJHR4bl90eXBlID0gIWVtcHR5KCRyZXF1ZXN0Wyd0eG5fdHlwZSddKT8kcmVxdWVzdFsndHhuX3R5cGUnXToiIjsKCQkKCQlzd2l0Y2ggKCR0eG5fdHlwZSkKCQl7CgkJCWNhc2UgJ3N1YnNjcl9zaWdudXAnOgoJCQljYXNlICdzdWJzY3JfcGF5bWVudCc6CgkJCWNhc2UgJ3N1YnNjcl9tb2RpZnknOgoJCQljYXNlICdzdWJzY3JfZmFpbGVkJzoKCQkJY2FzZSAnc3Vic2NyX2NhbmNlbCc6CgkJCQlyZXR1cm4gJHRoaXMtPnByb2Nlc3NTdWJzY3JpcHRpb25Ob3RpZmljYXRpb24oJHJlcXVlc3QpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJ3dlYl9hY2NlcHQnOgoJCQljYXNlICdjYXJ0JzoKCQkJY2FzZSAnZXhwcmVzc19jaGVja291dCc6CgkJCQkvL2NhcnQgc3R1ZmYgKG5vIHN1YnNjcmlwdGlvbnMpCgkJCQlyZXR1cm4gJHRoaXMtPnByb2Nlc3NPcmRlck5vdGlmaWNhdGlvbigkcmVxdWVzdCk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCWlmICgoc3RyY2FzZWNtcCgkcmVxdWVzdFsncGF5bWVudF9zdGF0dXMnXSwiUmVmdW5kZWQiKSA9PSAwKSAmJiAhZW1wdHkoJHJlcXVlc3RbJ3BhcmVudF90eG5faWQnXSkpCgkJCQl7CgkJCQkJcmV0dXJuICR0aGlzLT5wcm9jZXNzUmVmdW5kTm90aWZpY2F0aW9uKCRyZXF1ZXN0KTsKCQkJCX0KCQkJCS8vb3RoZXJ3aXNlLCB0aGlzIGlzIGFuIHVucmVjb2duaXplZCB0eG5fdHlwZSwgcmV0dXJuIGFuIGVycm9yCgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZSIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CQoJCX0KCQkKCX0KCQoJCgkvKioKCSAqIExvY2F0ZXMgYW4gb3JkZXIgaXRlbSBpZCB1c2luZyBhbiBJUE4uIFRoZSBwcm9jZWR1cmUgaXMgYXMgZm9sbG93czoKCSAqIAoJICogMS4gdXNlIGludm9pY2Ugd2hpY2ggaG9sZHMgdGhlIG9yZGVyICMuIElmIHRoZXJlIGlzIG9ubHkgb25lIHByb2R1Y3QgaXRlbSwgcmV0dXJuIGl0LCBvdGhlcndpc2UKCSAqICAgIG1hdGNoIGFnYWluc3QgdGhlIHByb2R1Y3QgaXRlbSBpZHMgaW4gdGhlIElQTgoJICogRnV0dXJlIHN0ZXAgMiBjb3VsZCBiZSB0byBzZWFyY2ggYnkgcGF5cGFsIGVtYWlsIGFuZCBwcm9kdWN0IGlkLCBidXQgdGhpcyBsb2dpYyB3b3VsZCBuZWVkIHRvIGJlIHZlcnkgc3BlY2lmaWMKCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IFRoZSBJUE4gZmllbGRzLiBUaGlzIGlzIGN1cnJlbnRseSB0aGUgJF9QT1NUIHN1cGVyZ2xvYmFsCgkgKiBAcmV0dXJuIE1NX09yZGVySXRlbSB0aGUgb3JkZXIgaXRlbSBpZCBvbiBzdWNjZXNzLCBudWxsIGlmIHRoZSBvcmRlciBpdGVtIGlkIGNvdWxkIG5vdCBiZSBsb2NhdGVkCgkgKi8KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxvY2F0ZU9yZGVySXRlbUlkRnJvbUlQTigkcmVxdWVzdCkKCXsgCgkJLy9zdGVwIDEgLSBhdHRlbXB0IHRvIHJldHJpZXZlIHRoZSBkYXRhIGZyb20gdGhlIGN1c3RvbSBmaWVsZAoJCWlmICghZW1wdHkoJHJlcXVlc3RbJ2N1c3RvbSddKSkKCQl7CgkJCSRleHBsb2RlZCA9IGV4cGxvZGUoInwiLCRyZXF1ZXN0WydjdXN0b20nXSk7CgkJCWlmIChjb3VudCgkZXhwbG9kZWQpID4gMSkKCQkJeyAKCQkJCSRvcmRlckl0ZW1JZCA9IHJlc2V0KCRleHBsb2RlZCk7CgkJCQlpZiAoIWVtcHR5KCRvcmRlckl0ZW1JZCkpCgkJCQl7CgkJCQkJcmV0dXJuICRvcmRlckl0ZW1JZDsKCQkJCX0KCQkJfQoJCX0KCQkKCQkvL3JlYWNoaW5nIHRoaXMgcG9pbnQgYXNzdW1lcyBzdGVwIDEgZmFpbGVkIGF0IHNvbWUgcG9pbnQKCQkvL3N0ZXAgMiAtIHVzZSB0aGUgaW52b2ljZSBmaWVsZC4gVGhpcyBtZXRob2QgYXNzdW1lcyB0aGVyZSBpcyBvbmx5IG9uZSBwcm9kdWN0IGluIHRoZSBvcmRlci4gSWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSwKCQkvL2l0IGRvZXNudCBtYWtlIHNlbnNlIHRvIHRyeSB0byBtYXRjaCBhbiBvcmRlciBpdGVtIHdpdGggbXVsdGlwbGUgcHJvZHVjdHMKCQkkaXRlbU51bWJlciA9IGlzc2V0KCRyZXF1ZXN0WydpdGVtX251bWJlciddKT8kcmVxdWVzdFsnaXRlbV9udW1iZXInXTokcmVxdWVzdFsnaXRlbV9udW1iZXIxJ107CgkJaWYgKCFlbXB0eSgkcmVxdWVzdFsnaW52b2ljZSddKSAmJiAhZW1wdHkoJGl0ZW1OdW1iZXIpKQoJCXsKCQkJJG9yZGVyID0gTU1fT3JkZXI6OmdldERhdGFCeU9yZGVyTnVtYmVyKCRyZXF1ZXN0WydpbnZvaWNlJ10pOwoJCQlpZiAoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRwcm9kdWN0SXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCQlpZiAoaXNzZXQoJHByb2R1Y3RJdGVtc1skaXRlbU51bWJlcl0pKQoJCQkJewoJCQkJCXJldHVybiAkcHJvZHVjdEl0ZW1zWyRpdGVtTnVtYmVyXTsKCQkJCX0KCQkJfQoJCX0KCQkKCQkvL2NvdWxkbnQgcmVsaWFibHkgbWF0Y2ggdGhlIG9yZGVyLCByZXR1cm4gbnVsbCByZXByZXNlbnRpbmcgZmFpbHVyZQoJCXJldHVybiBudWxsOwoJfQoJCgkKCS8qKgoJICogT24gcGF5cGFsIHNpZ251cCBhbmQvb3IgZmlyc3QgcGF5bWVudHMgd2UgdmVyaWZ5IHRoYXQgdGhlIGluaXRpYWwgcGF5bWVudCBpcyBjb3JyZWN0IGZvciB0aGUgdHJpYWwgYW5kIHRoZQoJICogcmVndWxhciBwYXltZW50cyBhbG9uZyB3aXRoIGZyZXF1ZW5jeSBhbmQgcGVyaW9kIG9mIGJpbGxpbmcuCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbQoJICogQHBhcmFtIHN0cmluZyAkdHJpYWxQZXJpb2QKCSAqIEBwYXJhbSBmbG9hdCAkdHJpYWxQYXltZW50CgkgKiBAcGFyYW0gc3RyaW5nICRyZWd1bGFyUGVyaW9kCgkgKiBAcGFyYW0gZmxvYXQgJHJlZ3VsYXJBbW91bnQKCSAqIEBwYXJhbSBib29sICR1c2VUcmlhbCBpbmRpY2F0ZXMgaWYgdGhlIG9yZGVyIGl0ZW0gc2hvdWxkIGNvbXBhcmUgdG8gdHJpYWwgdmFsdWVzLgoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgcGF5cGFsIGdhdGV3YXkgcmVmbGVjdHMgdGhlIHNhbWUgdmFsdWVzIGFzIHdoYXQgd2FzIG9yZGVyZWQgb24gTU0uCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBpc1ZhbGlkUGF5cGFsR2F0ZXdheVNpZ251cEluZm8oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sICRwZXJpb2QsICRwYXltZW50LCAkdXNlVHJpYWw9ZmFsc2UpCgl7ICAgICAKCQlpZigkdXNlVHJpYWwpCgkJewoJCQkkdHJpYWxBbXQgPSAkb3JkZXJJdGVtLT5nZXRUcmlhbEFtb3VudCgpOwoJCQlpZihmbG9hdHZhbCgkcGF5bWVudCkgIT0gZmxvYXR2YWwoJHRyaWFsQW10KSkKCQkJewoJCQkJLy8gaWYgZXhpc3Rpbmcgb3JkZXJpdGVtIGlzIDAgYnV0IHBheW1lbnQgdHJpYWwgd2FzIGdyZWF0ZXIgaXQgCgkJCQkvLyBpcyBhc3N1bWVkIGEgcHJvcmF0ZWQgYW1vdW50IGR1ZSB0byB1cGdyYWRlLgoJCQkJLy8gVE9ETzogY2FsY3VsYXRlIHdoYXQgd2FzIHRoZSBwcm9yYXRlZCBhbW91bnQgYW5kIHNlZSBpZiBpdCBtYXRjaGVzICRwYXltZW50CgkJCQkkb3JkZXJJZCA9ICRvcmRlckl0ZW0tPmdldE9yZGVySWQoKTsKCQkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJZCk7CgkJCQkkZGlzY291bnQgPSAkb3JkZXItPmdldERpc2NvdW50KCk7CgkJCQkKCQkJCWlmKGZsb2F0dmFsKCR0cmlhbEFtdCk+MCkKCQkJCXsKCQkJCQkkdHJpYWxNaW51c0Rpc2NvdW50ID0gZmxvYXR2YWwoJHRyaWFsQW10KS1hYnMoJGRpc2NvdW50KTsgCgkJCQkJaWYoZmxvYXR2YWwoJHBheW1lbnQpICE9IGZsb2F0dmFsKCR0cmlhbE1pbnVzRGlzY291bnQpKQoJCQkJCXsgCgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7IAoJCQkJCSR0b3RhbCAgPSRvcmRlckl0ZW0tPmdldFRvdGFsKCktYWJzKCRkaXNjb3VudCk7CgkJCQkJaWYoZmxvYXR2YWwoJHBheW1lbnQpICE9IGZsb2F0dmFsKCR0b3RhbCkpCgkJCQkJewoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfSAKCQkJCX0KCgkJCQkvLyB2ZXJpZnkgbm8gdHJpYWwgcGVyaW9kIGFzc29jaWF0ZWQgYXMgdGhpcyBjb3VsZCBqdXN0IGJlIGEgZGlzY291bnQKCQkJCWlmKCEkb3JkZXJJdGVtLT5oYXNUcmlhbFBlcmlvZCgpKQoJCQkJewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSRhbXQgPSAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKTsKCQkJaWYoZmxvYXR2YWwoJHBheW1lbnQpICE9IGZsb2F0dmFsKCRhbXQpKQoJCQl7IAoJCQkJIHJldHVybiBmYWxzZTsKCQkJfQkKCQl9CgkJCgkJLy8gZ2V0IHRoZSBwZXJpb2QgLyBmcmVxdWVuY3kgYnkgd2hpY2ggcGF5bWVudCBpcyBkdWUgCgkJJHBlcmlvZEFycj0gZXhwbG9kZSgiICIsICRwZXJpb2QpOyAKCQlpZihjb3VudCgkcGVyaW9kQXJyKT09MikKCQl7CgkJCSRwYXlwYWxQZXJpb2QgPSBpbnR2YWwoJHBlcmlvZEFyclswXSk7CgkJCSRwYXlwYWxGcmVxdWVuY3kgPSBzdHJ0b2xvd2VyKCRwZXJpb2RBcnJbMV0pOyAgIAoJCQkkcGVyaW9kT2ZSZWJpbGwgPSAoJHVzZVRyaWFsKT8kb3JkZXJJdGVtLT5nZXRUcmlhbER1cmF0aW9uKCk6JG9yZGVySXRlbS0+Z2V0UmViaWxsUGVyaW9kKCk7CgkJCSRmcmVxdWVuY3lPZlJlYmlsbCA9ICgkdXNlVHJpYWwpPyRvcmRlckl0ZW0tPmdldFRyaWFsRnJlcXVlbmN5KCk6JG9yZGVySXRlbS0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7IAoJCQkKCQkJLy8gYm90aCBmcmVxdWVuY3kgYW5kIHBlcmlvZCBtdXN0IG1hdGNoCgkJCWlmKGludHZhbCgkcGF5cGFsUGVyaW9kKT09aW50dmFsKCRwZXJpb2RPZlJlYmlsbCkpCgkJCXsgIAoJCQkJc3dpdGNoKHN0cnRvbG93ZXIoJGZyZXF1ZW5jeU9mUmViaWxsKSkKCQkJCXsKCQkJCQljYXNlICJtb250aHMiOgoJCQkJCQlyZXR1cm4gKCRwYXlwYWxGcmVxdWVuY3kgPT09ICJtIik7IAoJCQkJCWNhc2UgImRheXMiOgoJCQkJCQlyZXR1cm4gKCRwYXlwYWxGcmVxdWVuY3kgPT09ICJkIik7IAoJCQkJCWNhc2UgIndlZWtzIjoKCQkJCQkJcmV0dXJuICgkcGF5cGFsRnJlcXVlbmN5ID09PSAidyIpOwoJCQkJCWNhc2UgInllYXJzIjoKCQkJCQkJcmV0dXJuICgkcGF5cGFsRnJlcXVlbmN5ID09PSAieSIpOwoJCQkJfSAKCQkJfSAgCgkJfSAKCQllbHNlCgkJewoJCQkkcGVyaW9kT2ZSZWJpbGwgPSAoJHVzZVRyaWFsKT8kb3JkZXJJdGVtLT5nZXRUcmlhbER1cmF0aW9uKCk6JG9yZGVySXRlbS0+Z2V0UmViaWxsUGVyaW9kKCk7CgkJCSRmcmVxdWVuY3lPZlJlYmlsbCA9ICgkdXNlVHJpYWwpPyRvcmRlckl0ZW0tPmdldFRyaWFsRnJlcXVlbmN5KCk6JG9yZGVySXRlbS0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7IAoJCQlpZihpbnR2YWwoJHBlcmlvZE9mUmViaWxsKTw9MCkKCQkJewoJCQkJLy8gbm8gcGVyaW9kIGluZm9ybWF0aW9uCgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQkKCQl9IAoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKioKCSAqIEF0IHRoZSBoaWdoZXN0IGxldmVsLCB0aGVyZSBhcmUgdHdvIGNsYXNzaWZpY2F0aW9ucyBvZiBJUE4gdGhhdCBNZW1iZXJNb3VzZSBpcyBtYWlubHkgY29uY2VybmVkIHdpdGguIElQTnMgZm9yIHN1YnNjcmlwdGlvbnMsIGFuZCAKCSAqIElQTnMgZm9yIG9yZGVycy4gVGhpcyBtZXRob2QgcHJvY2Vzc2VzIHN1YnNjcmlwdGlvbiBJUE5zCgkgKiAKCSAqIEBwYXJhbSAkcmVxdWVzdCBhcnJheQoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwcm9jZXNzU3Vic2NyaXB0aW9uTm90aWZpY2F0aW9uKCRyZXF1ZXN0KQoJewkKCQkvL3B1bGwgYSBmZXcgcmVxdWlyZWQgdmFyaWFibGVzIGludG8gbG9jYWwgc2NvcGUsIGZvciBjb252ZW5pZW5jZQoJCSR0eG5fdHlwZSA9ICFlbXB0eSgkcmVxdWVzdFsndHhuX3R5cGUnXSk/JHJlcXVlc3RbJ3R4bl90eXBlJ106IiI7CgkJJHR4bl9pZCA9ICFlbXB0eSgkcmVxdWVzdFsndHhuX2lkJ10pPyRyZXF1ZXN0Wyd0eG5faWQnXToiIjsKCQkkc3Vic2NyX2lkID0gIWVtcHR5KCRyZXF1ZXN0WydzdWJzY3JfaWQnXSk/JHJlcXVlc3RbJ3N1YnNjcl9pZCddOiIiOwoJCSRwYXltZW50U3RhdHVzID0gIWVtcHR5KCRyZXF1ZXN0WydwYXltZW50X3N0YXR1cyddKT8kcmVxdWVzdFsncGF5bWVudF9zdGF0dXMnXToiIjsKCQkvL21jX2dyb3NzCgkJCgkJLy9hdHRlbXB0IHRvIGZpbmQgdGhlIG9yZGVyIGl0ZW0gaWQKCQkkb3JkZXJJdGVtSWQgPSAkdGhpcy0+bG9va3VwT3JkZXJJdGVtSWRGcm9tU3Vic2NyaXB0aW9uKCRzdWJzY3JfaWQpOwkKCQkkb3JkZXJJdGVtSWQgPSAoaXNfbnVsbCgkb3JkZXJJdGVtSWQpKT8kdGhpcy0+bG9jYXRlT3JkZXJJdGVtSWRGcm9tSVBOKCRyZXF1ZXN0KTokb3JkZXJJdGVtSWQ7CgkJCgkJLy9pZiBvcmRlciBpdGVtIGlkIHdhcyBmb3VuZCwgcmV0cmlldmUgaXRlbSBlbnRpdHkgaWYgaXQgZXhpc3RzIAoJCSRvcmRlckl0ZW0gPSBudWxsOwoJCWlmICghaXNfbnVsbCgkb3JkZXJJdGVtSWQpKQoJCXsKCQkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oJG9yZGVySXRlbUlkKTsKCQkJJG9yZGVySXRlbSA9ICghJG9yZGVySXRlbS0+aXNWYWxpZCgpKT9udWxsOiRvcmRlckl0ZW07CgkJfQoJCSRvcmRlcklkID0gKGlzX251bGwoJG9yZGVySXRlbSkpP251bGw6JG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpOwoJCQoJCQoJCSRkdXBsaWNhdGVDaGVja1Jlc3BvbnNlID0gJHRoaXMtPmF0b21pY0R1cGxpY2F0ZUNoZWNrQW5kTG9nKCRyZXF1ZXN0LCJzdWJzY3JpcHRpb24iLCRvcmRlcklkLCRvcmRlckl0ZW1JZCk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRkdXBsaWNhdGVDaGVja1Jlc3BvbnNlKSkKCQl7CSAgCgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRHVwbGljYXRlIElQTiBkZXRlY3RlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRpcG5JZCA9ICRkdXBsaWNhdGVDaGVja1Jlc3BvbnNlLT5tZXNzYWdlOwoJCQoJCQoJCXN3aXRjaCAoJHR4bl90eXBlKQoJCXsKCQkJY2FzZSAnc3Vic2NyX3NpZ251cCc6CgkJCQlpZiAoZW1wdHkoJG9yZGVySXRlbUlkKSkKCQkJCXsKCQkJCQkkY3JlYXRlUmVzcG9uc2UgPSAkdGhpcy0+Y3JlYXRlT3JkZXJGcm9tU3Vic2NyaXB0aW9uSVBOKCRyZXF1ZXN0KTsKCQkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGNyZWF0ZVJlc3BvbnNlKSkKCQkJCQl7CgkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkY3JlYXRlUmVzcG9uc2UtPm1lc3NhZ2UsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJCSRvcmRlckl0ZW1JZCA9ICRjcmVhdGVSZXNwb25zZS0+bWVzc2FnZTsKCQkJCX0KCQkJCSR0aGlzLT5saW5rU3Vic2NyaXB0aW9uVG9PcmRlckl0ZW1JZCgkc3Vic2NyX2lkLCAkb3JkZXJJdGVtSWQpOwoJCQkJCSAgCgkJCQkvKgoJCQkJICogVmVyaWZ5IHRoYXQgdGhlIGNhbGxiYWNrIGFtb3VudCBzaG91bGQgbWF0Y2ggb3JpZ2luYXRpbmcgcGVyaW9kL2ZyZXF1ZW5jeS9hbW91bnQKCQkJCSAqIAoJCQkJICogRnJvbSBwYXlwYWw6CgkJCQkgKiBwZXJpb2QxIC0gdHJpYWwgZHVyYXRpb24gKGlmIGF2YWlsYWJsZSkKCQkJCSAqIHBlcmlvZDMgLSByZWd1bGFyIGR1cmF0aW9uCgkJCQkgKiBtY19hbW91bnQxIC0gdHJpYWwgYW1vdW50CgkJCQkgKiBtY19hbW91bnQzIC0gcmVndWxhciBjb3N0CgkJCQkgKi8KCQkJCSR0cmlhbFBlcmlvZCA9ICFlbXB0eSgkcmVxdWVzdFsncGVyaW9kMSddKT8kcmVxdWVzdFsncGVyaW9kMSddOiIiOwoJCQkJJHRyaWFsUGF5bWVudEFtb3VudCA9ICFlbXB0eSgkcmVxdWVzdFsnbWNfYW1vdW50MSddKT8kcmVxdWVzdFsnbWNfYW1vdW50MSddOiIiOwoJCQkJJHJlZ3VsYXJQZXJpb2QgPSAhZW1wdHkoJHJlcXVlc3RbJ3BlcmlvZDMnXSk/JHJlcXVlc3RbJ3BlcmlvZDMnXToiIjsKCQkJCSRyZWd1bGFyQW1vdW50ID0gIWVtcHR5KCRyZXF1ZXN0WydtY19hbW91bnQzJ10pPyRyZXF1ZXN0WydtY19hbW91bnQzJ106IiI7CgoJCQkJJG5vdFRhbXBlcmVkV2l0aCA9IHRydWU7CgkJCQlpZiAoJG9yZGVySXRlbS0+aGFzVHJpYWxQZXJpb2QoKSkKCQkJCXsKCQkJCQkkbm90VGFtcGVyZWRXaXRoID0gJG5vdFRhbXBlcmVkV2l0aCAmJiAoJHRoaXMtPmlzVmFsaWRQYXlwYWxHYXRld2F5U2lnbnVwSW5mbygkb3JkZXJJdGVtLCAkdHJpYWxQZXJpb2QsICR0cmlhbFBheW1lbnRBbW91bnQsIHRydWUpKTsKCQkJCX0KCQkJCQoJCQkJaWYgKCRub3RUYW1wZXJlZFdpdGggPT09IHRydWUpCgkJCQl7CgkJCQkJJG5vdFRhbXBlcmVkV2l0aCA9ICRub3RUYW1wZXJlZFdpdGggJiYgKCR0aGlzLT5pc1ZhbGlkUGF5cGFsR2F0ZXdheVNpZ251cEluZm8oJG9yZGVySXRlbSwgJHJlZ3VsYXJQZXJpb2QsICRyZWd1bGFyQW1vdW50LCBmYWxzZSkpOwoJCQkJfQoJCQkJCgkJCQlpZiAoJG5vdFRhbXBlcmVkV2l0aCkKCQkJCXsgIAoJCQkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKTsKCQkJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCQl9CgkJCQllbHNlCgkJCQl7ICAKCQkJCQkvLyBzZXQgdG8gdGFtcGVyZWQgZGF0YSB3aGVyZSBwZXJpb2QvZnJlcXVlbmN5L2Ftb3VudCBhcmUgaW52YWxpZAoJCQkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfR0FURVdBWV9QQVlNRU5UX01JU01BVENIKTsKCQkJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCQl9IAoJCQkJCQoJCQkJLy9kZWFsIHdpdGggdGhlIHNjZW5hcmlvIHdoZXJlIHRoZSBpbml0aWFsIG9yZGVyIGFtb3VudCB3YXMgJDAKCQkJCWlmICghaXNfbnVsbCgkb3JkZXJJdGVtKSkKCQkJCXsKCQkJCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKTsKCQkJCQlpZiAoJG9yZGVyLT5pc1ZhbGlkKCkgJiYgKCRvcmRlci0+Z2V0VG90YWwoKSA9PSAwLjAwKSkKCQkJCQl7CgkJCQkJCS8vIG9ubHkgYWxsb3cgYWNjZXNzIGluIHRoaXMgY2FzZSBpZiB0YW1wZXIgaXMgbm9uIGV2aWRlbnQuICAKCQkJCQkJaWYoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgIT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX0dBVEVXQVlfUEFZTUVOVF9NSVNNQVRDSCkKCQkJCQkJewoJCQkJCQkJLy8JZm9yIHdoYXRldmVyIHJlYXNvbiAoY291cG9ucywgZnJlZSB0cmlhbCwgZXRjKSB0aGUgaW5pdGlhbCBvcmRlciBhbW91bnQgd2FzICQwLCBzbyBhcHBseSBhY2Nlc3Mgbm93CgkJCQkJCQkkYWNjZXNzUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXIoJG9yZGVyKTsKCQkJCQkJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkYWNjZXNzUmVzcG9uc2UpKQoJCQkJCQkJewoJCQkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgYXNzaWduaW5nIGFjY2VzcyBmcm9tICQwIG9yZGVyIHdpdGggb3JkZXIgaWQgeyRvcmRlci0+Z2V0SWQoKX0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9ICAKCQkJCQoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJCQlicmVhazsKCQkJY2FzZSAnc3Vic2NyX3BheW1lbnQnOgoJCQkJLy9UT0RPOiBSRUZBQ1RPUjogc2V0IHN0YXR1cyB0byBwYWlkX2NvbXBsZXRlZCBpZiBpdHMgZm9yIHRoZSBmdWxsIGFtb3VudCwgY2hlY2sgdGhhdCBwYXltZW50IHN0YXR1cyBpcyBmYWN0b3JlZCBpbiBjb3JyZWN0bHkKCQkJCSRwYXltZW50QW1vdW50ID0gJHJlcXVlc3RbJ21jX2dyb3NzJ107CgkJCQlpZiAoZW1wdHkoJG9yZGVySXRlbUlkKSkKCQkJCXsKCQkJCQkkY3JlYXRlUmVzcG9uc2UgPSAkdGhpcy0+Y3JlYXRlT3JkZXJGcm9tU3Vic2NyaXB0aW9uSVBOKCRyZXF1ZXN0LE1NX09yZGVyOjokUEFJRF9DT01QTEVURSk7CgkJCQkJaWYgKCRjcmVhdGVSZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCQkJCXsKCQkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRjcmVhdGVSZXNwb25zZS0+bWVzc2FnZSwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCQl9CgkJCQkJJG9yZGVySXRlbUlkID0gJGNyZWF0ZVJlc3BvbnNlLT5tZXNzYWdlOwkJCQkJCgkJCQkJJHRoaXMtPmxpbmtTdWJzY3JpcHRpb25Ub09yZGVySXRlbUlkKCRzdWJzY3JfaWQsICRvcmRlckl0ZW1JZCk7CQkJCQkJCgkJCQl9CgkJCQkKCQkJCS8vYXQgdGhpcyBwb2ludCwgdGhlcmUgaGFzIHRvIGJlIGFuIG9yZGVySXRlbUlkIG9yIGVsc2Ugd2Ugd291bGQgaGF2ZSBiYWlsZWQKCQkJCS8vY3JlYXRlIHRoZSBvcmRlckl0ZW0gZm9yIGxhdGVyIHVzZQoJCQkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oJG9yZGVySXRlbUlkKTsKCQkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwkJCQkKCQkJCQoJCQkJLy9mb3IgYW4gb3JkZXIgd2l0aCBhIGZyZWUgdHJpYWwsIGFueSBwYXltZW50IHJlY2VpdmVkIHdpbGwgYmUgYSByZWJpbGwgKHRoZXJlIGlzIG5vIElQTiByZWNlaXZlZCBmb3IgYSAkMCBwYXltZW50KQoJCQkJaWYgKCgkb3JkZXJJdGVtLT5nZXRBbW91bnQoKSA+IDAuMDApICYmICEkdGhpcy0+aXNTdWJzY3JpcHRpb25SZWJpbGwoJHJlcXVlc3QpKSAKCQkJCXsKCQkJCQkvL1RoaXMgaXMgYSBmaXJzdCBwYXltZW50CgkJCQkJIAoJCQkJCS8qCgkJCQkJICogSWYgc29tZW9uZSBzcG9vZnMgdGhlIHBheW1lbnQgcHJvY2VzcyBhbmQgd2UgZ2V0IGEgY2FsbGJhY2sgZm9yIGFuIGl0ZW0gYnV0IHRoZSBwcmljZSBkb2Vzbid0IG1hdGNoLAoJCQkJCSAqIHdlIHdhbnQgdG8gZmxhZyB0aGlzIGFuZCBjaGVjayBmb3IgdGhpcyB3aGVuIGFsbG93aW5nIGNvbnRlbnQgYWNjZXNzLgoJCQkJCSAqLwoJCQkJCSR0b3RhbE93ZWQgPSAkb3JkZXItPmdldFRvdGFsKCk7ICAKCQkJCQkkdGhpcy0+bW9kaWZ5Rm9yR2F0ZXdheVByaWNlTWlzbWF0Y2goJHBheW1lbnRBbW91bnQsJHRvdGFsT3dlZCwkb3JkZXJJdGVtLCRvcmRlcik7IAoJCQkJCQoJCQkJCS8qCgkJCQkJICogSWYgdGhlIHVzZXIgaGFkIHRhbXBlcmVkIHdpdGggdGhlIGRhdGEsIGRvIG5vdCBtYWtlIHRoZSBzdGF0dXMgb2YgdGhpcyB1c2VyIGFjdGl2ZQoJCQkJCSAqLwoJCQkJCWlmKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpICE9IE1NX09yZGVySXRlbTo6JFNUQVRVU19HQVRFV0FZX1BBWU1FTlRfTUlTTUFUQ0gpCgkJCQkJeyAKCQkJCQkJLy9ncmFudCBhY2Nlc3MgYmFzZWQgb24gdGhlIG9yZGVyCgkJCQkJCU1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbkFjY2Vzc0Zyb21PcmRlcigkb3JkZXIpOwoJCQkJCX0gCgkJCQkJCgkJCQkJLy9ub3cgbG9nIHRvIHRyYW5zYWN0aW9ucyB0YWJsZQoJCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSwgaXRlbTogeyRvcmRlckl0ZW0tPmdldERlc2NyaXB0aW9uKCl9IjsKCQkJCQlpZiAoJHRoaXMtPnVzZVNhbmRib3gpCgkJCQkJewoJCQkJCQkkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUZXN0VHJhbnNhY3Rpb25FbnRyeSgkb3JkZXItPmdldElkKCksJG9yZGVySXRlbUlkLCAkcGF5bWVudEFtb3VudCwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsZmFsc2UsJHRoaXMtPmdldElkKCksJGlwbklkKTsKCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCRvcmRlckl0ZW1JZCwgJHBheW1lbnRBbW91bnQsICRvcmRlci0+Z2V0Q3VycmVuY3koKSwgJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24sIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5ULGZhbHNlLCR0aGlzLT5nZXRJZCgpLCRpcG5JZCk7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZSAKCQkJCXsKCQkJCQkvL1RoaXMgaXMgYSByZWJpbGwuIEN1cnJlbnRseSBNZW1iZXJNb3VzZSBkb2Vzbid0IGhhdmUgYSBzY2hlZHVsZXIsIGhlbmNlIGRvZXNuJ3QgZ2VuZXJhdGUgcmVndWxhciBjaGFyZ2VzLgoJCQkJCS8vSGVuY2UsIHdlIG5lZWQgdG8gbWFrZSB0d28gZW50cmllcyBpbiB0aGUgdHJhbnNhY3Rpb25zIHRhYmxlICh1c2luZyB0aGUgJGJhbGFuY2UgZmxhZykgdG8gY3JlYXRlIGEgY2hhcmdlIHRvIGFwcGx5IHRoZSBwYXltZW50IGFnYWluc3QKCQkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJSZWN1cnJpbmcgcGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9LCBpdGVtOiB7JG9yZGVySXRlbS0+Z2V0RGVzY3JpcHRpb24oKX0iOwoJCQkJCWlmICgkdGhpcy0+dXNlU2FuZGJveCkKCQkJCQl7CgkJCQkJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbUlkLCAkcGF5bWVudEFtb3VudCwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULHRydWUsJHRoaXMtPmdldElkKCksJGlwbklkKTsKCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtSWQsICRwYXltZW50QW1vdW50LCAkb3JkZXItPmdldEN1cnJlbmN5KCksICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+Z2V0SWQoKSwkaXBuSWQpOwoJCQkJCX0KCQkJCX0KCQkJCS8vaWYgdGhpcyBpcyBhIHBheW1lbnQgZm9sbG93aW5nIGEgcmViaWxsIGZhaWx1cmUsIHJlc2V0IHRoZSBzdGF0dXMgdG8gcmVjdXJyaW5nCgkJCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCQkJewoJCQkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKTsKCQkJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCQkJTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQWNjZXNzRnJvbU9yZGVySXRlbXMoJG9yZGVyLT5nZXRDdXN0b21lcigpLCBhcnJheSgkb3JkZXJJdGVtKSk7CgkJCQl9CgkJCQkKCQkJCS8vY2hlY2sgaWYgaXRlbSBoYXMgYSBsaW1pdCBvbiB0aGUgbnVtYmVyIG9mIHJlYmlsbHMsIGNoYW5nZSB0aGUgc3RhdHVzIGlmIGl0IGRvZXMKCQkJCSR0aGlzLT5jaGVja1BheW1lbnRQbGFuQ29tcGxldGlvbigkb3JkZXJJdGVtKTsKCQkJCQoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlLT5tZXNzYWdlLCgkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpP01NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRTVUNDRVNTOk1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQlicmVhazsKCQkJY2FzZSAnc3Vic2NyX21vZGlmeSc6CgkJCQkvL3N1YnNjcl9tb2RpZnkgc2hvdWxkIG5ldmVyIGJlIGdlbmVyYXRlZCB0aHJvdWdoIG1lbWJlcm1vdXNlLCBob3dldmVyIGlmIGN1c3RvbWVyJ3MgY2hhbmdlIHRoZSBmdW5kaW5nIHNvdXJjZSBvciBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGVpciBhY2NvdW50CgkJCQkvL3RoaXMgSVBOIHR5cGUgd2lsbCBiZSBpc3N1ZWQsIHNhZmUgdG8gaWdub3JlLgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJCQlicmVhazsKCQkJY2FzZSAnc3Vic2NyX2ZhaWxlZCc6CgkJCQkvL3JlYmlsbCAob3IgcG9zc2libHkgaW5pdGlhbCBwYXltZW50KSBmYWlsZWQuIFBheVBhbCB3aWxsIGF1dG9tYXRpY2FsbHkgcmV0cnksIG5vIGFjdGlvbiByZXF1aXJlZCB5ZXQKCQkJCWlmICghaXNfbnVsbCgkb3JkZXJJdGVtKSkKCQkJCXsKCQkJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKTsKCQkJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCQkJcGFyZW50OjpoYW5kbGVPdmVyZHVlU3Vic2NyaXB0aW9uSXRlbSgkb3JkZXJJdGVtKTsKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlBheVBhbCBTdWJzY3JpcHRpb24gUmViaWxsIEZhaWxlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEZBSUxFRCk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAnc3Vic2NyX2NhbmNlbCc6CgkJCQkvL1RoZSBzdWJzY3JpcHRpb24gd2FzIGNhbmNlbGxlZCwgcmV2b2tlIGFjY2VzcwoJCQkJaWYgKCFpc19udWxsKCRvcmRlckl0ZW0pKQoJCQkJewoJCQkJCSRyZXNwb25zZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJCQl7CgkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24gZm9yIG9yZGVyIGlkIHskb3JkZXJJdGVtLT5nZXRPcmRlcklkKCl9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJCX0KCQkJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpOwoJCQkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCX0KCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJ3N1YnNjcl9lb3QnOgoJCQkJLy90aGUgc3Vic2NyaXB0aW9uIHRlcm0gaGFzIGVuZGVkLiAKCQkJCWlmICghaXNfbnVsbCgkb3JkZXJJdGVtKSkKCQkJCXsKCQkJCQlpZiAoJG9yZGVySXRlbS0+aXNSZWN1cnJpbmcoKSAmJiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORykpCgkJCQkJewoJCQkJCQkvL2FjdGl2ZSBvcmRlciBpdGVtLCB0ZXJtIGhhcyBlbmRlZAoJCQkJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DT01QTEVURSk7CgkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbnJlY29nbml6ZWQgVHJhbnNhY3Rpb24gVHlwZSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCWJyZWFrOwoJCX0KCQkKCX0KCQoJLyoqCgkgKiBQcm9jZXNzIHJlZnVuZCBJUE5zCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGUgY29udGVudHMgb2YgdGhlIElQTi4gV2lsbCBiZSB0aGUgc2FtZSBhcyB0aGUgY29udGVudHMgb2YgJF9QT1NUCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHByb2Nlc3NSZWZ1bmROb3RpZmljYXRpb24oJHJlcXVlc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRwYXJlbnRfdHhuX2lkID0gJHJlcXVlc3RbJ3BhcmVudF90eG5faWQnXTsKCQkkcmVmdW5kQW1vdW50ICA9ICRyZXF1ZXN0WydtY19ncm9zcyddOwoJCQoJCS8vYnJpZGdlIGZyb20gdGhlIElQTiB0YWJsZSB0byB0aGUgdHJhbnNhY3Rpb25zIHRhYmxlLCB1c2luZyB0aGUgUGF5UGFsIHR4bl9pZCBvZiB0aGUgcmVmdW5kZWQgdHJhbnNhY3Rpb24gKHRoZSBwYXJlbnQpCgkJJHRyYW5zYWN0aW9uc1RhYmxlID0gTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HOwoJCSRpcG5UYWJsZSA9IE1NX1RBQkxFX1BBWVBBTF9JUE5fTE9HOwoJCSRzcWwgPSAiU0VMRUNUIHQuKiBmcm9tIHskaXBuVGFibGV9IGksIHskdHJhbnNhY3Rpb25zVGFibGV9IHQgd2hlcmUgKGkudHhuX2lkPSVzKSBhbmQgKHQucGF5bWVudF9zZXJ2aWNlX2lkPSVkKSBhbmQgKHQucGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZD1pLmlkKSI7CgkJJHRyYW5zYWN0aW9uUm93ID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoJHNxbCwkcGFyZW50X3R4bl9pZCwkdGhpcy0+Z2V0SWQoKSkpOwoJCWlmIChpc19udWxsKCR0cmFuc2FjdGlvblJvdykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlBheVBhbCByZWZ1bmQgSVBOIGNvdWxkIG5vdCBiZSBwcm9jZXNzZWQ6IFRyYW5zYWN0aW9uIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9sb2cgdGhpcyBJUE4KCQkkaXBuUmVzcG9uc2UgPSAkdGhpcy0+bG9nSVBOKCRyZXF1ZXN0LCBNTV9QYXlQYWxTZXJ2aWNlOjokSVBOX1NUQVRVU19QUk9DRVNTRUQsJHRyYW5zYWN0aW9uUm93LT5vcmRlcl9pZCwkdHJhbnNhY3Rpb25Sb3ctPm9yZGVyX2l0ZW1faWQpOwoJCWlmICghKCRpcG5SZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSB8fCAoJGlwblJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciBsb2dnaW5nIElQTiBmb3Igb3JkZXIgaXRlbSBpZCB7JHRyYW5zYWN0aW9uUm93LT5vcmRlcl9pdGVtX2lkfSIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vZG9uJ3QgcHJvY2VlZCBpZiB0aGUgdHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgYmVlbiByZWZ1bmRlZAoJCWlmICghZW1wdHkoJHRyYW5zYWN0aW9uUm93LT5yZWZ1bmRfaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciByZWZ1bmRpbmcgUGF5UGFsIHR4bl9pZCB7JHBhcmVudF90eG5faWR9OiB0aGUgdHJhbnNhY3Rpb24gaXMgYWxyZWFkeSByZWZ1bmRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGlwbklkID0gJGlwblJlc3BvbnNlLT5tZXNzYWdlOwoJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlJlZnVuZCBmb3IgdHJhbnNhY3Rpb24jIHskdHJhbnNhY3Rpb25Sb3ctPmlkfSI7CgkJaWYgKCR0aGlzLT51c2VTYW5kYm94KQoJCXsKCQkJJHJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCR0cmFuc2FjdGlvblJvdy0+b3JkZXJfaWQsCgkJCQkJJHRyYW5zYWN0aW9uUm93LT5vcmRlcl9pdGVtX2lkLAoJCQkJCSRyZWZ1bmRBbW91bnQsCgkJCQkJJHRyYW5zYWN0aW9uUm93LT5jdXJyZW5jeSwKCQkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwKCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCWZhbHNlLAoJCQkJCSR0aGlzLT5nZXRJZCgpLAoJCQkJCSRpcG5JZCwKCQkJCQlNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwKCQkJCQkkdHJhbnNhY3Rpb25Sb3ctPmlkKTsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJHRyYW5zYWN0aW9uUm93LT5vcmRlcl9pZCwgCgkJCQkJCQkJCQkJCSAJCQkgICR0cmFuc2FjdGlvblJvdy0+b3JkZXJfaXRlbV9pZCwgCgkJCQkJCQkJCQkJCQkJCSAgJHJlZnVuZEFtb3VudCwgCgkJCQkJCQkJCQkJCQkJCSAgJHRyYW5zYWN0aW9uUm93LT5jdXJyZW5jeSwKCQkJCQkJCQkJCQkJCQkJICAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgCgkJCQkJCQkJCQkJCQkJCSAgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCwKCQkJCQkJCQkJCQkJCQkJICBmYWxzZSwKCQkJCQkJCQkJCQkJCQkJICAkdGhpcy0+Z2V0SWQoKSwKCQkJCQkJCQkJCQkJCQkJICAkaXBuSWQsCgkJCQkJCQkJCQkJCSAgCQkJICBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwKCQkJCQkJCQkJCQkJICAJCQkgICR0cmFuc2FjdGlvblJvdy0+aWQpOwoJCX0KCQlpZiAoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzcG9uc2UpKQoJCXsKCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJVUERBVEUgIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBTRVQgcmVmdW5kX2lkID0gJXMgV0hFUkUgaWQgPSAlcyIsJHJlc3BvbnNlLT5tZXNzYWdlLCR0cmFuc2FjdGlvblJvdy0+aWQpKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCS8qCgkgKiBJZiBzb21lb25lIHNwb29mcyB0aGUgcGF5bWVudCBwcm9jZXNzIGFuZCB3ZSBnZXQgYSBjYWxsYmFjayBmb3IgYW4gaXRlbSBidXQgdGhlIHByaWNlIGRvZXNuJ3QgbWF0Y2gsCgkgKiB3ZSB3YW50IHRvIGZsYWcgdGhpcyBhbmQgY2hlY2sgZm9yIHRoaXMgd2hlbiBhbGxvd2luZyBjb250ZW50IGFjY2Vzcy4KCSAqIAoJICogQHBhcmFtIGZsb2F0ICR0b3RhbFBhaWQgaXMgYSB2YWx1ZSBvZiB0aGUgYW1vdW50IHBhaWQgdmlhIHBheXBhbAoJICogQHBhcmFtIGZsb2F0ICR0b3RhbE93ZWQgaXMgYSB2YWx1ZSBvZiB0aGUgYW1vdW50IG93ZWQKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gbW9kaWZ5Rm9yR2F0ZXdheVByaWNlTWlzbWF0Y2goJHRvdGFsUGFpZCwkdG90YWxPd2VkLE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLE1NX09yZGVyICRvcmRlcikKCXsKCQlpZihmbG9hdHZhbCgkdG90YWxQYWlkKTxmbG9hdHZhbCgkdG90YWxPd2VkKSkKCQl7ICAKCQkJaWYoIWlzX251bGwoJG9yZGVySXRlbSkpCgkJCXsgIAoJCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19HQVRFV0FZX1BBWU1FTlRfTUlTTUFUQ0gpOwoJCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCQl9CgkJCWVsc2V7CgkJCQkkcHJvZHVjdEl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCSAKCQkJCWlmKGlzX2FycmF5KCRwcm9kdWN0SXRlbXMpKXsKCQkJCQlmb3JlYWNoKCRwcm9kdWN0SXRlbXMgYXMgJGl0ZW1JZD0+JGl0ZW1PYmopeyAgCgkJCQkJCSRpdGVtT2JqLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX0dBVEVXQVlfUEFZTUVOVF9NSVNNQVRDSCk7CgkJCQkJCSRpdGVtT2JqLT5jb21taXREYXRhKCk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoJCgkvKioKCSAqIFByb2Nlc3NlcyBJUE5zIGZvciB3ZWJfYWNjZXB0LCBjYXJ0LCBhbmQgZXhwcmVzc19jaGVja291dCB0eG5fdHlwZXMuIEluIE1lbWJlck1vdXNlLCB0aGlzIGN1cnJlbnRseSB0cmFuc2xhdGVzIHRvIG9yZGVycyB3aXRoCgkgKiBub24tcmVjdXJyaW5nIHByb2R1Y3RzCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBBbiBhcnJheSBjb250YWluaW5nIHRoZSBJUE4gZGF0YSwgdXN1YWxseSB0aGUgJF9QT1NUCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyB0aGUgc3VjY2Vzcy9mYWlsdXJlIHByb2Nlc3NpbmcgdGhpcyBJUE4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NPcmRlck5vdGlmaWNhdGlvbigkcmVxdWVzdCkKCXsgCgkJJHJlcXVlc3QgPSAoZW1wdHkoJHJlcXVlc3QpICYmICFlbXB0eSgkX1BPU1QpICYmIGlzX2FycmF5KCRfUE9TVCkpPyRfUE9TVDokcmVxdWVzdDsgLy9pZiBmb3Igc29tZSByZWFzb24gcmVxdWVzdCBpc250IHNldCBidXQgdGhlcmUgaXMgYSAkX1BPU1QsIHVzZSB0aGUgJF9QT1NUCgkJCgkJJG9yZGVyTnVtYmVyID0gKGVtcHR5KCRyZXF1ZXN0WydpbnZvaWNlJ10pKT9udWxsOiRyZXF1ZXN0WydpbnZvaWNlJ107CgkJJG9yZGVySXRlbUlkID0gJHRoaXMtPmxvY2F0ZU9yZGVySXRlbUlkRnJvbUlQTigkcmVxdWVzdCk7CgkJCgkJaWYgKCFpc19udWxsKCRvcmRlckl0ZW1JZCkpCgkJewoJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkb3JkZXJJdGVtSWQpOwoJCQkkb3JkZXJJdGVtID0gKCEkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpP251bGw6JG9yZGVySXRlbTsKCQl9CgkJJG9yZGVySWQgPSAoaXNfbnVsbCgkb3JkZXJJdGVtKSk/bnVsbDokb3JkZXJJdGVtLT5nZXRPcmRlcklkKCk7CgkJCgkJJGR1cGxpY2F0ZUNoZWNrUmVzcG9uc2UgPSAkdGhpcy0+YXRvbWljRHVwbGljYXRlQ2hlY2tBbmRMb2coJHJlcXVlc3QsIm9yZGVyIiwkb3JkZXJJZCwkb3JkZXJJdGVtSWQpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkZHVwbGljYXRlQ2hlY2tSZXNwb25zZSkpCgkJewkgIAoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkR1cGxpY2F0ZSBJUE4gZGV0ZWN0ZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkaXBuSWQgPSAkZHVwbGljYXRlQ2hlY2tSZXNwb25zZS0+bWVzc2FnZTsKCQkKCQkvL2JlY2F1c2UgdGhlIElQTiB0eXBlcyBoYW5kbGVkIGJ5IHRoaXMgbWV0aG9kIGluY2x1ZGUgY2FydCB1cGxvYWQsIHRoaXMgSVBOIGNvdWxkIGhhdmUgbXVsdGlwbGUgaXRlbXMgYXNzb2NpYXRlZCB3aXRoIGl0LCBzbyBicmlkZ2UgZnJvbQoJCS8vb3JkZXIgaXRlbSB0byB0aGUgb3JkZXIgdG8gZW5zdXJlIGFjY2VzcyB0byBhbGwgaXRlbXMKCQkkb3JkZXIgPSBNTV9PcmRlcjo6Z2V0RGF0YUJ5T3JkZXJOdW1iZXIoJG9yZGVyTnVtYmVyKTsKCQkKCQlpZiAoISRvcmRlci0+aXNWYWxpZCgpKQoJCXsgCgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGxvY2F0ZSB0aGUgb3JkZXIgcmVmZXJyZWQgdG8gYnkgdGhpcyBJUE4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQogCgkJJGN1cnJlbmN5ICA9ICFlbXB0eSgkcmVxdWVzdFsnbWNfY3VycmVuY3knXSk/JHJlcXVlc3RbJ21jX2N1cnJlbmN5J106JG9yZGVyLT5nZXRDdXJyZW5jeSgpOyAvL2lmIGZvciB3aGF0ZXZlciByZWFzb24gY3VycmVuY3kgaXMgbm90IHNlbnQsIGFzc3VtZSBpdHMgdGhlIHNhbWUgYXMgdGhlIG9yZGVyIGN1cnJlbmN5CgkJLy9UT0RPOiBSRUZBQ1RPUjogaGFuZGxlIHRoZSBzY2VuYXJpbyB3aGVyZSB0aGUgb3JkZXIgY3VycmVuY3kgZGlmZmVycyBmcm9tIHRoZSBJUE4gY3VycmVuY3k/IFByZXZlbnRzIHNvbWVib2R5IHBheWluZyAkMTAwIFVTRCBmb3IgYW4gb3JkZXIgdmFsdWVkIGF0ICQxMDAgR0JQCgkJCgkJJHRvdGFsUGFpZCA9ICRyZXF1ZXN0WydtY19ncm9zcyddOwoJCSR0b3RhbE93ZWQgPSAkb3JkZXItPmdldFRvdGFsKCk7IAoJCQoJCSRwYXltZW50U3RhdHVzID0gKCFlbXB0eSgkcmVxdWVzdFsncGF5bWVudF9zdGF0dXMnXSkpPyRyZXF1ZXN0WydwYXltZW50X3N0YXR1cyddOiIiOyAKCQlpZiAoJHBheW1lbnRTdGF0dXMgPT0gTU1fUGF5UGFsU2VydmljZTo6JFBBWU1FTlRfU1RBVFVTX0NPTVBMRVRFRCkKCQl7CgkJCSR0aGlzLT5tb2RpZnlGb3JHYXRld2F5UHJpY2VNaXNtYXRjaCgkdG90YWxQYWlkLCR0b3RhbE93ZWQsJG9yZGVySXRlbSwkb3JkZXIpOwoJCQkKCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9IjsKCQkJaWYgKCR0aGlzLT51c2VTYW5kYm94KQoJCQl7CgkJCQkkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUZXN0VHJhbnNhY3Rpb25FbnRyeSgkb3JkZXItPmdldElkKCksJG9yZGVySXRlbUlkLCAkdG90YWxQYWlkLCAkY3VycmVuY3ksICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCxmYWxzZSwkdGhpcy0+Z2V0SWQoKSwkaXBuSWQpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCRvcmRlckl0ZW1JZCwgJHRvdGFsUGFpZCwgJGN1cnJlbmN5LCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsZmFsc2UsJHRoaXMtPmdldElkKCksJGlwbklkKTsKCQkJfQoJCQkKCQkJaWYgKCR0b3RhbFBhaWQgPj0gJHRvdGFsT3dlZCkKCQkJewoJCQkJJGFjY2Vzc1Jlc3BvbnNlID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQWNjZXNzRnJvbU9yZGVyKCRvcmRlcik7CgkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGFjY2Vzc1Jlc3BvbnNlKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGFzc2lnbmluZyBhY2Nlc3MgZnJvbSBvcmRlciBpZCB7JG9yZGVyLT5nZXRJZCgpfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCX0KCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIERldGVjdHMgaWYgYW4gSVBOIGlzIGEgZmlyc3QgcmVjZWl2ZWQgcGF5bWVudCBvciBpZiBhIHBheW1lbnQgaGFzIGFscmVhZHkgYmUgcmVjb3JkZWQsIGluIHdoaWNoIGNhc2UgdGhpcyBJUE4gCgkgKiBjYW4gYmUgY29uc2lkZXJlZCBhIHJlYmlsbC4gQSBwYXltZW50IGlzIGNvbnNpZGVyZWQgYSByZWJpbGwgaWYgYSBwYXltZW50IGhhcyBhbHJlYWR5IGJlZW4gbWFkZSB0byB0aGUgc3Vic2NyX2lkIGluIHRoZSBJUE4KCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIElQTiwgdXN1YWxseSB0aGUgJF9QT1NUCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGlzIHBheW1lbnQgaXMgYSByZWJpbGwsIGZhbHNlIG90aGVyd2lzZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gaXNTdWJzY3JpcHRpb25SZWJpbGwoJHJlcXVlc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSR0eG5fdHlwZSA9ICFlbXB0eSgkcmVxdWVzdFsndHhuX3R5cGUnXSk/JHJlcXVlc3RbJ3R4bl90eXBlJ106IiI7CgkJJHR4bl9pZCA9ICFlbXB0eSgkcmVxdWVzdFsndHhuX2lkJ10pPyRyZXF1ZXN0Wyd0eG5faWQnXToiIjsKCQkkc3Vic2NyX2lkID0gaXNzZXQoJHJlcXVlc3RbJ3N1YnNjcl9pZCddKT8kcmVxdWVzdFsnc3Vic2NyX2lkJ106IiI7CQoJCQoJCWlmICgkdHhuX3R5cGUgIT0gInN1YnNjcl9wYXltZW50IikKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJHJlYmlsbENoZWNrU1FMID0gIlNFTEVDVCBDT1VOVCgqKSBmcm9tICIuTU1fVEFCTEVfUEFZUEFMX0lQTl9MT0cuIiBXSEVSRSAoc3Vic2NyX2lkID0gJXMpIEFORCAodHhuX3R5cGUgPSAlcykgQU5EICh0eG5faWQgIT0gJXMpIjsKCQkkbnVtUGF5bWVudHMgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkcmViaWxsQ2hlY2tTUUwsJHN1YnNjcl9pZCwkdHhuX3R5cGUsJHR4bl9pZCkpOwoJCWlmIChpc19udWxsKCRudW1QYXltZW50cykpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCXJldHVybiAoJG51bVBheW1lbnRzPjApOwoJfQoJCgkKCQoJLyoqCgkgKiBDcmVhdGVzIGFuIG9yZGVyIGZyb20gdGhlIElQTiBub3RpZmljYXRpb24sIGFuZCByZXR1cm5zIHRoZSBvcmRlciBpdGVtIGlkLiBUaGUgb3JkZXIgbXVzdCBpbmNsdWRlIGFuIGl0ZW1fbnVtYmVyCgkgKiBMSU1JVEFUSU9OOiBUaGlzIG1ldGhvZCBjYW4gb25seSBjcmVhdGUgYW4gb3JkZXIgd2l0aCBhIHNpbmdsZSBwcm9kdWN0IG9mIHF1YW50aXR5IG9uZS4gV2hpbGUgaXRzIHBvc3NpYmxlIG11bHRpcGxlIHByb2R1Y3RzL3F1YW50aXRpZXMgY2FuIGJlIAoJICogZW5jb2RlZCB1c2luZyB0aGUgaXRlbV9udW1iZXIvY3VzdG9tIGZpZWxkcyBpbiB0aGUgZnV0dXJlLCB0aGlzIGJlaGF2aW9yIGRvZXMgbm90IGV4aXN0IG5vdwoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgQW4gYXJyYXkgY29udGFpbmluZyB0aGUgSVBOLCB1c3VhbGx5IHRoZSAkX1BPU1QKCSAqIEBwYXJhbSBpbnQgJGluaXRpYWxTdGF0dXMgKG9wdGlvbmFsKSBBbiBNTV9PcmRlciBjb25zdGFudCByZXByZXNlbnRpbmcgdGhlIHN0YXR1cyB0byBwbGFjZSB0aGUgY3JlYXRlZCBvcmRlciBpbgoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIG9yZGVyIGl0ZW0gaWQgYXMgdGhlIG1lc3NhZ2Ugb24gc3VjY2Vzcywgb3IgYW4gZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBjcmVhdGVPcmRlckZyb21TdWJzY3JpcHRpb25JUE4oJHJlcXVlc3QsJGluaXRpYWxTdGF0dXM9bnVsbCkKCXsKCQkKCQkvL2lmIG9yZGVyIGNyZWF0aW9uIGlzIG5vdCBhbGxvd2VkLCByZXR1cm4gYW4gZXJyb3IKCQlpZiAoISR0aGlzLT5hbGxvd09yZGVyQ3JlYXRpb24pCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJSZWNlaXZlZCBzdWJzY3JpcHRpb24gSVBOIHRoYXQgY291bGQgbm90IGJlIHRpZWQgdG8gYW4gb3JkZXIsIGFuZCBhdXRvbWF0aWMgb3JkZXIgY3JlYXRpb24gaXMgZGlzYWJsZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL3Rlc3QgcmVjZWl2ZXJfZW1haWwgKGFzIHBlciB0aGUgSVBOIGd1aWRlIHBhZ2UgMTUpIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBJUE4gaXMgbm90IGJlaW5nIHNwb29mZWQuCgkJLy9wcmV2ZW50cyBhIHVzZXIgZnJvbSBzZXR0aW5nIHVwIGEgUGF5UGFsIGFjY291bnQsIHBvaW50aW5nIHRvIGEgTWVtYmVyTW91c2UgY2FsbGJhY2sgdXJsLCBtYWtpbmcgYSB0cmFuc2FjdGlvbgoJCS8vdG8gcGF5IHRoZW1zZWx2ZXMsIGFuZCBoYXZpbmcgYW4gYWNjb3VudCBjcmVhdGVkCgkJaWYgKGVtcHR5KCRyZXF1ZXN0WydyZWNlaXZlcl9lbWFpbCddKSB8fCAoJHJlcXVlc3RbJ3JlY2VpdmVyX2VtYWlsJ10gIT0gJHRoaXMtPmVtYWlsKSkKCQl7CgkJCSRyZWNlaXZlcl9lbWFpbCA9ICFlbXB0eSgkcmVxdWVzdFsncmVjZWl2ZXJfZW1haWwnXSk/JHJlcXVlc3RbJ3JlY2VpdmVyX2VtYWlsJ106Ijxub3Qgc2V0PiI7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoImNyZWF0ZU9yZGVyRnJvbVN1YnNjcmlwdGlvbklQTjogUmVjZWl2ZXIgZW1haWwgeyRyZWNlaXZlcl9lbWFpbH0gZG9lcyBub3QgbWF0Y2gsIHBvc3NpYmx5IGEgc3Bvb2ZlZCBJUE4iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQoJCWlmIChlbXB0eSgkcmVxdWVzdFsnaXRlbV9udW1iZXInXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJjcmVhdGVPcmRlckZyb21TdWJzY3JpcHRpb25JUE46IElQTiBkb2VzIG5vdCBpbmNsdWRlIGFuIGl0ZW0gbnVtYmVyIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcmVxdWVzdFsnaXRlbV9udW1iZXInXSk7CgkJaWYgKCEkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiY3JlYXRlT3JkZXJGcm9tU3Vic2NyaXB0aW9uSVBOOiBSZWNlaXZlZCBpbnZhbGlkIGl0ZW0gbnVtYmVyOiB7JHJlcXVlc3RbJ2l0ZW1fbnVtYmVyJ119OyBubyBtYXRjaGluZyBwcm9kdWN0IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKGVtcHR5KCRyZXF1ZXN0WydwYXllcl9lbWFpbCddKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoImNyZWF0ZU9yZGVyRnJvbVN1YnNjcmlwdGlvbklQTjogSVBOIGRvZXMgbm90IGluY2x1ZGUgYSBwYXllciBlbWFpbCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vY3JlYXRlIGEgbmV3IG9yZGVyCgkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCk7IAoJCQoJCS8vY3JlYXRlIG9yIGxvb2t1cCB0aGUgY3VzdG9tZXIKCQkkdXNlckVtYWlsID0gJHJlcXVlc3RbJ3BheWVyX2VtYWlsJ107CgkJJHVzZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkdXNlckVtYWlsKTsKCQkKCQlpZiAoISR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQkkdXNlci0+Y29tbWl0RGF0YSgpOwoJCX0KCQkKCQkvL2xpbmsgb3JkZXIgdG8gY3VzdG9tZXIKCQkkb3JkZXItPnNldEN1c3RvbWVyKCR1c2VyKTsKCQkKCQkKCQkvL3NldCB0aGUgb3JkZXIgYmlsbGluZyBhZGRyZXNzCgkJJGJpbGxpbmdBZGRyZXNzID0gbmV3IE1NX0N1c3RvbWVyQWRkcmVzcygpOwoJCSRiaWxsaW5nQWRkcmVzcy0+c2V0Rmlyc3ROYW1lKGlzc2V0KCRyZXF1ZXN0WydmaXJzdF9uYW1lJ10pPyRyZXF1ZXN0WydmaXJzdF9uYW1lJ106IiIpOwoJCSRiaWxsaW5nQWRkcmVzcy0+c2V0TGFzdE5hbWUoaXNzZXQoJHJlcXVlc3RbJ2xhc3RfbmFtZSddKT8kcmVxdWVzdFsnbGFzdF9uYW1lJ106IiIpOwoJCSRiaWxsaW5nQWRkcmVzcy0+c2V0QWRkcmVzc0xpbmUxKGlzc2V0KCRyZXF1ZXN0WydhZGRyZXNzX3N0cmVldCddKT8kcmVxdWVzdFsnYWRkcmVzc19zdHJlZXQnXToiIik7CgkJJGJpbGxpbmdBZGRyZXNzLT5zZXRDaXR5KGlzc2V0KCRyZXF1ZXN0WydhZGRyZXNzX2NpdHknXSk/JHJlcXVlc3RbJ2FkZHJlc3NfY2l0eSddOiIiKTsKCQkkYmlsbGluZ0FkZHJlc3MtPnNldFN0YXRlKGlzc2V0KCRyZXF1ZXN0WydhZGRyZXNzX3N0YXRlJ10pPyRyZXF1ZXN0WydhZGRyZXNzX3N0YXRlJ106IiIpOwoJCSRiaWxsaW5nQWRkcmVzcy0+c2V0Q291bnRyeShpc3NldCgkcmVxdWVzdFsnYWRkcmVzc19jb3VudHJ5X2NvZGUnXSk/JHJlcXVlc3RbJ2FkZHJlc3NfY291bnRyeV9jb2RlJ106IiIpOyAvL2lzbyAzMTY2CgkJJGJpbGxpbmdBZGRyZXNzLT5zZXRQb3N0YWxDb2RlKGlzc2V0KCRyZXF1ZXN0WydhZGRyZXNzX3ppcCddKT8kcmVxdWVzdFsnYWRkcmVzc196aXAnXToiIik7CgkJJG9yZGVyLT5zZXRCaWxsaW5nQWRkcmVzcygkYmlsbGluZ0FkZHJlc3MpOwoJCQoJCS8vYWRkIHRoZSBwcm9kdWN0IHRvIHRoZSBvcmRlcgoJCSRvcmRlci0+YWRkUHJvZHVjdCgkcHJvZHVjdCk7CgkJCgkJLy9vbmx5IG9uZSBhZGRyZXNzIGNvbWVzIHRocm91Z2ggd2l0aCBhIHN1YnNjcmlwdGlvbjsgYWRkIGJpbGxpbmcgYWRkcmVzcyB0byBzaGlwcGluZyBhZGRyZXNzCgkJaWYgKCRwcm9kdWN0LT5pc1NoaXBwYWJsZSgpKQoJCXsKCQkJJG9yZGVyLT5zZXRTaGlwcGluZ0FkZHJlc3MoJGJpbGxpbmdBZGRyZXNzKTsKCQl9CgkJCgkJJG9yZGVyLT5jYWxjdWxhdGVUb3RhbCgpOwoJCQoJCWlmICghaXNfbnVsbCgkaW5pdGlhbFN0YXR1cykgJiYgaXNfaW50KCRpbml0aWFsU3RhdHVzKSkKCQl7CgkJCSRvcmRlci0+c2V0T3JkZXJTdGF0dXMoJGluaXRpYWxTdGF0dXMpOwoJCX0KCQkKCQkvL1RPRE86IFJFRkFDVE9SOiBob3cgZG9lcyB0aGUgY3VzdG9tZXIgcGFzc3dvcmQgZ2V0IHNldD8hCgkJCgkJJHJlcyA9ICRvcmRlci0+Y29tbWl0RGF0YSgpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXMpKQoJCXsKCQkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJJHRoZU9yZGVySXRlbSA9IHJlc2V0KCRwcm9kdWN0SXRlbXMpOyAvL2N1cnJlbnRseSB0aGlzIG9wZXJhdGVzIHVuZGVyIHRoZSBhc3N1bXB0aW9uIHRoYXQgdGhlcmUgd2lsbCBvbmx5IGJlIG9uZSBwcm9kdWN0IGluIGEgc3Vic2NyaXB0aW9uCgkJCSRyZXNwb25zZSA9IG5ldyBNTV9SZXNwb25zZSgkdGhlT3JkZXJJdGVtLT5nZXRJZCgpKTsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlc3BvbnNlID0gbmV3IE1NX1Jlc3BvbnNlKCIiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkkcmVzcG9uc2UtPm1lc3NhZ2UgPSAoJHJlcyBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKT8kcmVzLT5tZXNzYWdlOiJjcmVhdGVPcmRlckZyb21TdWJzY3JpcHRpb25JUE46IEVycm9yIGNyZWF0aW5nIG9yZGVyIGZyb20gSVBOIjsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9CQkKCX0KCQoJLyoqCgkgKiBsb29rcyB1cCBhbiBvcmRlciBpdGVtIGlkIHVzaW5nIGEgUGF5UGFsIHN1YnNjcmliZXIgaWQgKHN1YnNjcl9pZCkKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkc3Vic2NyX2lkIFRoZSBzdWJzY3JfaWQgZnJvbSB0aGUgSVBOCgkgKiBAcmV0dXJuIGludCBjb250YWluaW5nIHRoZSBvcmRlciBpdGVtIGlkLCBudWxsIGlmIG5vdCBmb3VuZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9va3VwT3JkZXJJdGVtSWRGcm9tU3Vic2NyaXB0aW9uKCRzdWJzY3JfaWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChlbXB0eSgkc3Vic2NyX2lkKSkKCQl7CgkJCXJldHVybiBudWxsOwoJCX0KCQkKCQkkbG9va3VwU1FMID0gIlNFTEVDVCBvcmRlcl9pdGVtX2lkIGZyb20gIi5NTV9UQUJMRV9QQVlQQUxfU1VCU0NSX0xJTktTLiIgV0hFUkUgc3Vic2NyX2lkID0gJXMiOwoJCSRvcmRlckl0ZW1JZCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCRsb29rdXBTUUwsJHN1YnNjcl9pZCkpOwoJCXJldHVybiAkb3JkZXJJdGVtSWQ7Cgl9CgkKCQoJLyoqCgkgKiBsaW5rIGEgcGF5cGFsIHN1YnNjcl9pZCB0byBhbiBvcmRlciBpdGVtIGlkLiBTaW1wbGlmaWVzIHRoZSBsb29rdXAgcHJvY2VzcyB3aGVuIGFuIElQTiB3aXRob3V0IGFuIG9yZGVyIG51bWJlciBpcyByZWNlaXZlZAoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRzdWJzY3JfaWQgVGhlIFBheVBhbCBzdWJzY3JfaWQgZmllbGQgZnJvbSB0aGUgSVBOLiBTaG91bGQgYmUgYW4gaW50LCBidXQgdGhpcyBpcyBub3QgZ3VhcmFudGVlZCBzaW5jZSB0aGUgdmFsdWUgY29tZXMgZnJvbSBhbiBleHRlcm5hbCBzeXN0ZW0KCSAqIEBwYXJhbSBpbnQgJG9yZGVySXRlbUlkIFRoZSBvcmRlciBpdGVtIGlkIHRvIGFzc29jaWF0ZSB0aGUgc3Vic2NyX2lkIHRvCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUgaW4gY3JlYXRpbmcgdGhlIGRiIGxpbmsKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxpbmtTdWJzY3JpcHRpb25Ub09yZGVySXRlbUlkKCRzdWJzY3JfaWQsICRvcmRlckl0ZW1JZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFlbXB0eSgkc3Vic2NyX2lkKSAmJiAhZW1wdHkoJG9yZGVySXRlbUlkKSkKCQl7CgkJCSRpbnNlcnRTUUwgPSAiSU5TRVJUIElHTk9SRSBJTlRPICIuTU1fVEFCTEVfUEFZUEFMX1NVQlNDUl9MSU5LUy4iIHNldCBzdWJzY3JfaWQgPSAlcywgb3JkZXJfaXRlbV9pZD0lZCI7CQoJCQkkcmVzID0gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRpbnNlcnRTUUwsJHN1YnNjcl9pZCwkb3JkZXJJdGVtSWQpKTsKCQkJaWYgKCRyZXMgPT09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBsaW5raW5nIFBheVBhbCBzdWJzY3JfaWQgeyRzdWJzY3JfaWR9IHRvIG9yZGVyIGl0ZW0gaWQgeyRvcmRlckl0ZW1JZH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkF0dGVtcHRlZCB0byBsaW5rIFBheVBhbCBzdWJzY3JfaWQgdG8gYW4gb3JkZXIgaXRlbSBpZCwgYnV0IG9uZSBvciBib3RoIG9mIHRoZSBpZHMgd2FzIG51bGwiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIExvZ3MgYW4gSVBOIHJlcXVlc3QuIFRoaXMgaXMgbmVjZXNzYXJ5IGZvciBkdXBsaWNhdGUgZGV0ZWN0aW9uLCBhbmQgcG90ZW50aWFsbHkgZm9yIHRyb3VibGVzaG9vdGluZwoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgVGhpcyBpcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBJUE4gdmFyaWFibGVzLCB0eXBpY2FsbHkgaWRlbnRpY2FsIHRvICRfUE9TVAoJICogQHBhcmFtIGludCAkaXBuU3RhdHVzIFJlcHJlc2VudHMgaG93IHRoaXMgSVBOIHdhcyBwcm9jZXNzZWQuIE9uZSBvZiB0aGUgY29uc3RhbnRzIGFzc29jaWF0ZWQgd2l0aCBJUE4gcHJvY2Vzc2luZyBzdGF0dXMgaW4gTU1fUGF5UGFsU2VydmljZQoJICogQHBhcmFtIGludCAkb3JkZXJJZCAob3B0aW9uYWwpIFRoZSBvcmRlciBpZCBhc3NvY2lhdGVkIHdpdGggdGhpcyBJUE4KCSAqIEBwYXJhbSBpbnQgJG9yZGVySXRlbUlkIChvcHRpb25hbCkgVGhlIG9yZGVyIGl0ZW0gaWQgYXNzb2NpYXRlZCB3aXRoIHRoaXMgSVBOCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgaWQgb2YgdGhlIHJvdyBpbiB0aGUgSVBOIGxvZyB0YWJsZSBpZiBzdWNjZXNzZnVsLCBvciBhbiBlcnJvciBtZXNzYWdlIGlmIGZhaWxlZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9nSVBOKCRyZXF1ZXN0LCAkaXBuU3RhdHVzLCAkb3JkZXJJZD1udWxsLCAkb3JkZXJJdGVtSWQ9bnVsbCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzdWJzY3JfaWQgPSBpc3NldCgkcmVxdWVzdFsnc3Vic2NyX2lkJ10pPyRyZXF1ZXN0WydzdWJzY3JfaWQnXTpudWxsOwoJCSR0eG5faWQgPSBpc3NldCgkcmVxdWVzdFsndHhuX2lkJ10pPyRyZXF1ZXN0Wyd0eG5faWQnXTpudWxsOwoJCSR0eG5fdHlwZSA9IGlzc2V0KCRyZXF1ZXN0Wyd0eG5fdHlwZSddKT8kcmVxdWVzdFsndHhuX3R5cGUnXTpudWxsOwoJCSRwYXltZW50X3N0YXR1cyA9IGlzc2V0KCRyZXF1ZXN0WydwYXltZW50X3N0YXR1cyddKT8kcmVxdWVzdFsncGF5bWVudF9zdGF0dXMnXTpudWxsOwoJCQoJCS8vb3JkZXIgaXRlbSBpZCBjYW4gYmUgdXNlZCB0byBnZXQgb3JkZXIgaWQsIGlmIGFwcHJvcHJpYXRlCgkJaWYgKGlzX251bGwoJG9yZGVySWQpICYmICFlbXB0eSgkb3JkZXJJZCkpCgkJewoJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkb3JkZXJJdGVtSWQpOwoJCQlpZiAoJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkb3JkZXJJZCA9ICRvcmRlckl0ZW0tPmdldE9yZGVySWQoKTsKCQkJfQoJCX0KCQkKCQkkaW5zZXJ0RGF0YSA9IGFycmF5KAoJCQkib3JkZXJfaWQiPT4kb3JkZXJJZCwKCQkJIm9yZGVyX2l0ZW1faWQiID0+ICRvcmRlckl0ZW1JZCwKCQkJInR4bl9pZCIgPT4gJHR4bl9pZCwKCQkJInR4bl90eXBlIiA9PiAkdHhuX3R5cGUsCgkJCSJzdWJzY3JfaWQiPT4kc3Vic2NyX2lkLAoJCQkicGF5bWVudF9zdGF0dXMiPT4kcGF5bWVudF9zdGF0dXMsCgkJCSJpcG5fY29udGVudCI9PnNlcmlhbGl6ZSgkcmVxdWVzdCksCgkJCSJyZWNlaXZlZCIgPT5NTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKQoJCSk7CgkJCgkJJHJlcyA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfUEFZUEFMX0lQTl9MT0csJGluc2VydERhdGEpOwoJCWlmICgkcmVzID09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgbG9nZ2luZyBJUE4gdG8gZGF0YWJhc2UiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCR3cGRiLT5pbnNlcnRfaWQpOwoJfQoJCgkKCS8qKgoJICogRGV0ZWN0cyB3aGV0aGVyIHRoaXMgSVBOIGhhcyBiZWVuIHJlY2VpdmVkIG9yIG5vdCBmb3IgdGhpcyBzdWJzY3JpcHRpb24KCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IFRoZSBJUE4gcmVxdWVzdC4gVGhpcyBpcyBjdXJyZW50bHkgdGhlICRfUE9TVAoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhpcyBpcyBhIGR1cGxpY2F0ZSwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBpc0R1cGxpY2F0ZVN1YnNjcmlwdGlvbklQTigkcmVxdWVzdCkKCXsKCQkvL1RPRE86IFJFRkFDVE9SOiBjaGVjayB0aGlzIGxvZ2ljLCBzcGVjaWZpY2FsbHkgaWYgdHhuX2lkIGlzIG51bGwKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHN1YnNjcl9pZCA9IGlzc2V0KCRyZXF1ZXN0WydzdWJzY3JfaWQnXSk/JHJlcXVlc3RbJ3N1YnNjcl9pZCddOm51bGw7CgkJJHR4bl9pZCA9IGlzc2V0KCRyZXF1ZXN0Wyd0eG5faWQnXSk/JHJlcXVlc3RbJ3R4bl9pZCddOm51bGw7CgkJJHR4bl90eXBlID0gaXNzZXQoJHJlcXVlc3RbJ3R4bl90eXBlJ10pPyRyZXF1ZXN0Wyd0eG5fdHlwZSddOm51bGw7CgkJCgkJJGR1cGVDaGVja1NRTCA9ICJzZWxlY3QgY291bnQoKikgZnJvbSAiLk1NX1RBQkxFX1BBWVBBTF9JUE5fTE9HLiAiIHdoZXJlICIuCgkJCQkJCSIoc3Vic2NyX2lkID0gJXMpIGFuZCAodHhuX2lkID0gJXMpIGFuZCAodHhuX3R5cGUgPSAlcykiOwoJCSRudW1SZWNvcmRzID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGR1cGVDaGVja1NRTCwkc3Vic2NyX2lkLCR0eG5faWQsJHR4bl90eXBlKSk7CgkJcmV0dXJuICgkbnVtUmVjb3Jkcz4wKTsKCX0KCQoJCgkvKioKCSAqIERldGVjdHMgd2hldGhlciB0aGlzIElQTiBoYXMgYmVlbiByZWNlaXZlZCBvciBub3QgZm9yIHRoaXMgb25lLXRpbWUgcHVyY2hhc2UgcGF5bWVudAoJICoKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGUgSVBOIHJlcXVlc3QuIFRoaXMgaXMgdXN1YWxseSBidXQgbm90IGFsd2F5cyB0aGUgc2FtZSBhcyAkX1BPU1QKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHRoaXMgaXMgYSBkdXBsaWNhdGUsIGZhbHNlIG90aGVyd2lzZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gaXNEdXBsaWNhdGVPcmRlcklQTigkcmVxdWVzdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkdHhuX2lkID0gaXNzZXQoJHJlcXVlc3RbJ3R4bl9pZCddKT8kcmVxdWVzdFsndHhuX2lkJ106bnVsbDsKCQkKCQkkZHVwZUNoZWNrU1FMID0gInNlbGVjdCBjb3VudCgqKSBmcm9tICIuTU1fVEFCTEVfUEFZUEFMX0lQTl9MT0cuICIgd2hlcmUgIi4KCQkJCSIodHhuX2lkID0gJXMpIGFuZCAoKHR4bl90eXBlID0gJ3dlYl9hY2NlcHQnKSBvciAodHhuX3R5cGUgPSAnY2FydCcpIG9yICh0eG5fdHlwZSA9ICdleHByZXNzX2NoZWNrb3V0JykpIjsKCQkkbnVtUmVjb3JkcyA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCRkdXBlQ2hlY2tTUUwsJHR4bl9pZCkpOwoJCXJldHVybiAoJG51bVJlY29yZHM+MCk7Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIGNyZWF0ZXMgYSBkYXRhYmFzZSBtYW5hZ2VkIGxvY2ssIGNoZWNrcyB0byBzZWUgaWYgYW4gSVBOIGlzIGEgZHVwbGljYXRlLCBsb2dzIHRoZSBuZXcgSVBOLCBhbmQgdGhlbiB1bmxvY2tzIHRoZSBkYgoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRyZXF1ZXN0IFRoZSBJUE4gcmVxdWVzdCwgdXN1YWxseSBidXQgbm90IGFsd2F5cyB0aGUgc2FtZSBhcyAkX1BPU1QKCSAqIEBwYXJhbSBzdHJpbmcgJHR5cGUgKG9wdGlvbmFsKSBUaGlzIHdpbGwgYmUgZWl0aGVyICJvcmRlciIgb3IgInN1YnNjcmlwdGlvbiIuIERlZmF1bHRzIHRvICJzdWJzY3JpcHRpb24iCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugd2l0aCBzdGF0dXMgc3VjY2VzcyBpZiB0aGUgSVBOIGlzIE5PVCBhIGR1cGxpY2F0ZSwgZXJyb3Igb3RoZXJ3aXNlLiBUaGUgbG9nZ2VkIElQTidzIGlkIGlzIHRoZSBtZXNzYWdlIGluIGJvdGggY2FzZXMKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGF0b21pY0R1cGxpY2F0ZUNoZWNrQW5kTG9nKCRyZXF1ZXN0LCR0eXBlPSJzdWJzY3JpcHRpb24iLCRvcmRlcklkPW51bGwsICRvcmRlckl0ZW1JZD1udWxsKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3Vic2NyX2lkID0gaXNzZXQoJHJlcXVlc3RbJ3N1YnNjcl9pZCddKT8kcmVxdWVzdFsnc3Vic2NyX2lkJ106IiI7CgkJJHR4bl9pZCA9IGlzc2V0KCRyZXF1ZXN0Wyd0eG5faWQnXSk/JHJlcXVlc3RbJ3R4bl9pZCddOiIiOwoJCSR0eG5fdHlwZSA9IGlzc2V0KCRyZXF1ZXN0Wyd0eG5fdHlwZSddKT8kcmVxdWVzdFsndHhuX3R5cGUnXToiIjsKCQkKCQkvL3dhaXQgdXAgdG8gMTAgc2VjcyB0byBhY3F1aXJlIGFuIGlwbi1zcGVjaWZpYyBsb2NrLiAKCQkvL015U1FMIDUuNysgaW1wb3NlcyBhIDY0IGNoYXIgbWF4IGZvciBsb2NrIGlkZW50aWZpZXJzLCBzbyB1c2UgdGhlIG1kNSBvZiB0aGUgdHhuX3R5cGUsIHR4bl9pZCwgYW5kIHN1YnNjcl9pZCB0byBjcmVhdGUgYSB1bmlxdWUgaWRlbnRpZmllcgoJCSRsb2NrTmFtZSA9ICJtbV9wYXlwYWxfaXBuX2xvY2stIi5tZDUoInskdHhuX3R5cGV9fHskdHhuX2lkfXx7JHN1YnNjcl9pZH0iKTsJCQoJCSRsb2NrQWNxdWlyZWQgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIENPQUxFU0NFKEdFVF9MT0NLKCd7JGxvY2tOYW1lfScsMTApLDApIik7CgkJaWYgKCRsb2NrQWNxdWlyZWQgIT0gIjEiKQoJCXsKCQkJJGlzRHVwbGljYXRlID0gdHJ1ZTsKCQl9CgkJZWxzZSAKCQl7CgkJCS8vZHVwZSBjaGVjawoJCQkkaXNEdXBsaWNhdGUgPSAoc3RydG9sb3dlcigkdHlwZSkgPT0gIm9yZGVyIik/JHRoaXMtPmlzRHVwbGljYXRlT3JkZXJJUE4oJHJlcXVlc3QpOiR0aGlzLT5pc0R1cGxpY2F0ZVN1YnNjcmlwdGlvbklQTigkcmVxdWVzdCk7CgkJfQoJCgkJLy9sb2cgdGhlIGlwbgoJCSRpcG5TdGF0dXMgPSAoJGlzRHVwbGljYXRlKT9NTV9QYXlQYWxTZXJ2aWNlOjokSVBOX1NUQVRVU19EVVBMSUNBVEU6TU1fUGF5UGFsU2VydmljZTo6JElQTl9TVEFUVVNfUFJPQ0VTU0VEOwoJCSRpcG5Mb2dSZXNwb25zZSA9ICR0aGlzLT5sb2dJUE4oJHJlcXVlc3QsICRpcG5TdGF0dXMgLCRvcmRlcklkICwkb3JkZXJJdGVtSWQpOwoJCSRpcG5Mb2dJZCA9IE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJGlwbkxvZ1Jlc3BvbnNlKT8kaXBuTG9nUmVzcG9uc2UtPm1lc3NhZ2U6ZmFsc2U7CgkJCgkJLy9yZWxlYXNlIHRoZSBsb2NrCgkJaWYgKCRsb2NrQWNxdWlyZWQgPT0gIjEiKQoJCXsKCQkJJHdwZGItPnF1ZXJ5KCJTRUxFQ1QgUkVMRUFTRV9MT0NLKCd7JGxvY2tOYW1lfScpIik7CgkJfQoJCQoJCWlmICgkaXNEdXBsaWNhdGUpCgkJewoJCQkvL2R1cGVzIGNhdXNlIHRoaXMgZnVuY3Rpb24gdG8gcmV0dXJuIGFuIGVycm9yIHJlc3BvbnNlCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGlwbkxvZ0lkLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkaXBuTG9nSWQpOwoJCX0KCX0gCgkKCS8qKgoJICogVmFsaWRhdGVzIHRoZSBJUE4gd2l0aCBQYXlQYWwKCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IFRoZSBjb250ZW50cyBvZiB0aGUgaW5pdGlhbCBpcG4gUE9TVAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3NmdWwgdmFsaWRhdGlvbiBvciBmYWlsdXJlCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gdmFsaWRhdGVJUE4oJHJlcXVlc3QpCgl7CQoJCWlmICgkdGhpcy0+c2tpcFZhbGlkYXRpb24pCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCQoJCSRwb3N0RGF0YSA9ICIiOwoJCQoJCWZvcmVhY2ggKCRyZXF1ZXN0IGFzICRrZXk9PiR2YWx1ZSkgCgkJeyAgICAgICAgIAoJCQkkdmFsdWUgPSB1cmxlbmNvZGUoc3RyaXBzbGFzaGVzKCR2YWx1ZSkpOyAKCQkJJHBvc3REYXRhICAuPSAiJiRrZXk9JHZhbHVlIjsKCQl9CgkJCQkKCQkkdmFsaWRhdGlvblVybCA9ICR0aGlzLT5nZXRQYXlwYWxTdGFuZGFyZFVybCgpLiI/Y21kPV9ub3RpZnktdmFsaWRhdGUiOwoJIAkkcmVzcG9uc2UgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdmFsaWRhdGlvblVybCwiUE9TVCIsJHBvc3REYXRhLGFycmF5KENVUkxPUFRfRk9SQklEX1JFVVNFPT4xLCBDVVJMT1BUX0hUVFBIRUFERVI9PmFycmF5KCdDb25uZWN0aW9uOiBDbG9zZScsICJVc2VyLUFnZW50OiAiIC4gc2VsZjo6JElQTl9VU0VSX0FHRU5UKSkpOwoJCWlmICgoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpICYmICgkcmVzcG9uc2UtPm1lc3NhZ2UgPT0gIlZFUklGSUVEIikpCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCQllbHNlIAoJCXsKCQkJLy93ZSBoYXZlIHRvIGNoYW5nZSB0aGUgdHlwZSB0byBlcnJvciBiZWNhdXNlIE1NX1Jlc3BvbnNlOjpFUlJPUiBpcyBvbmx5IHJldHVybmVkIGZyb20gZG9IdHRwUmVxdWVzdCBpZiB0aGVyZSB3YXMgYSBjb21tdW5pY2F0aW9ucyBlcnJvcgoJCQkvL2ZvciB0aGUgcHVycG9zZXMgb2YgdGhpcyBtZXRob2QsIGVycm9yIGFsc28gaW5jbHVkZXMgc3VjY2Vzc2Z1bCByZXF1ZXN0cyBpbmRpY2F0aW5nIGFuIGludmFsaWQgSVBOCgkJCSRyZXNwb25zZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCgkKCS8qKgoJICogVGFrZXMgTWVtYmVyTW91c2UgdW5pdHMgZm9yIHJlY3VycmluZyBpbnRlcnZhbHMgYW5kIGNvbnZlcnRzIHRvIFBheVBhbCB1bml0cy4KCSAqIFBheVBhbCB0YWtlcyBtb250aHMsZGF5cyx3ZWVrcywgYW5kIHllYXJzLCBhbmQgY29udmVydHMgdGhlIHVuaXQgbmFtZSB0byAnTScsIkQnLCdXJywgYW5kICdZJwoJICogCgkgKiBAcGFyYW0gaW50ZWdlciAkbnVtVW5pdHMKCSAqIEBwYXJhbSBzdHJpbmcgJHVuaXROYW1lCgkgKiAKCSAqIEByZXR1cm4gYm9vbGVhbiBmYWxzZSBvbiBpbnZhbGlkIGlucHV0LCBvdGhlcndpc2UgYW4gYXJyYXkgY29udGFpbmluZyBrZXlzICdudW1Vbml0cycgYW5kICd1bml0TmFtZScgYWxvbmcgd2l0aCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNvbnZlcnRNTVRvUGF5cGFsVW5pdHMoJG51bVVuaXRzLCAkdW5pdE5hbWUpCgl7CgkJaWYgKCFpc19udW1lcmljKCRudW1Vbml0cykgfHwgKCRudW1Vbml0cyA9PSAwKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJc3dpdGNoICgkdW5pdE5hbWUpCgkJewoJCQljYXNlICJtb250aHMiOgoJCQkJcmV0dXJuIGFycmF5KCJudW1Vbml0cyI9PiRudW1Vbml0cywgInVuaXROYW1lIj0+Ik0iKTsKCQkJCWJyZWFrOwoJCQljYXNlICJkYXlzIjoKCQkJCXJldHVybiBhcnJheSgibnVtVW5pdHMiPT4kbnVtVW5pdHMsICJ1bml0TmFtZSI9PiJEIik7CgkJCQlicmVhazsKCQkJY2FzZSAid2Vla3MiOgoJCQkJcmV0dXJuIGFycmF5KCJudW1Vbml0cyI9PiRudW1Vbml0cywgInVuaXROYW1lIj0+IlciKTsKCQkJCWJyZWFrOwoJCQljYXNlICJ5ZWFycyI6CgkJCQlyZXR1cm4gYXJyYXkoIm51bVVuaXRzIj0+JG51bVVuaXRzLCAidW5pdE5hbWUiPT4iWSIpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCXJldHVybiBmYWxzZTsgLy9zaG91bGRuJ3QgZXZlciByZWFjaCBoZXJlCgl9CgkKCQoJLyoqCgkgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNlcnZpY2UgaXMgb3BlcmF0aW5nIGluIHNhbmRib3ggb3IgcHJvZHVjdGlvbiBtb2RlLCBhbmQgcmV0dXJucyB0aGUgYXBwcm9wcmlhdGUKCSAqIFBheVBhbCBTdGFuZGFyZCBwdXJjaGFzZSB1cmwuCgkgKiAKCSAqIEByZXR1cm4gc3RyaW5nIFRoZSB1cmwgdG8gc3VibWl0IHB1cmNoYXNlcyB0bwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0UGF5cGFsU3RhbmRhcmRVcmwoKQoJewoJCWlmICgkdGhpcy0+dXNlU2FuZGJveCkKCQl7CgkJCXJldHVybiAkdGhpcy0+c2FuZGJveFVybDsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkdGhpcy0+cHJvZHVjdGlvblVybDsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIGEgVVJMIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBsaW5rIHRvIGluaXRpYXRlIGEgUGF5UGFsIHB1cmNoYXNlLCBpZS4gYSBvbmUtY2xpY2stYnV5IGxpbmsKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgYmVpbmcgdXNlZCB0byBnZW5lcmF0ZSB0aGUgbGluawoJICogQHJldHVybiBib29sZWFufHN0cmluZyBmYWxzZSBvbiBlcnJvciwgdGhlIHB1cmNoYXNlIGxpbmsgKGFzIGEgc3RyaW5nKSBvbiBzdWNjZXNzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXlwYWxQdXJjaGFzZVVybChNTV9PcmRlciAkb3JkZXIpCgl7CgkJaWYgKGlzX251bGwoJG9yZGVyKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJGNvbmZpZ0FycmF5ID0gJHRoaXMtPmdldFBheW1lbnRDb25maWdBcnJheSgkb3JkZXIpOwoJCWlmICgkY29uZmlnQXJyYXkgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkkcHVyY2hhc2VVcmwgPSAkdGhpcy0+Z2V0UGF5cGFsU3RhbmRhcmRVcmwoKTsKCQkkcHVyY2hhc2VVcmwgLj0gIj8iLmh0dHBfYnVpbGRfcXVlcnkoJGNvbmZpZ0FycmF5KTsKCQlyZXR1cm4gJHB1cmNoYXNlVXJsOwoJfQoJCgkKCS8qKgoJICogV2l0aCBubyBwYXJhbWV0ZXJzIChvciBlbXB0eSBwYXJhbWV0ZXJzKSBzdXBwbGllZCwgdGhpcyBtZXRob2QgcmVwb3J0cyB3aGV0aGVyIHRoZSBQYXlQYWwgc2FuZGJveCBpcyBiZWluZyB1c2VkLgoJICogV2hlbiBhIHBhcmFtZXRlciBpcyBzdXBwbGllZCwgdGhlIG1vZGUgb2Ygb3BlcmF0aW9uIGlzIGNoYW5nZWQgdG8gbWF0Y2ggdGhlIHBhcmFtZXRlcgoJICoKCSAqIEBwYXJhbSBib29sZWFuICRuZXdTZXR0aW5nIChvcHRpb25hbCkgSWYgdHJ1ZSwgdXNlIHRoZSBzYW5kYm94LCBpZiBmYWxzZSwgdXNlIGxpdmUgUGF5UGFsIHNlcnZlcnMKCSAqIEByZXR1cm4gYm9vbGVhbiBUcnVlIGlmIHRoaXMgcHJvdmlkZXIgaXMgY29uZmlndXJlZCB0byB1c2UgdGhlIHNhbmRib3gsIGZhbHNlIGlmIGl0IGlzIHVzaW5nIHByb2R1Y3Rpb24uCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB1c2VTYW5kYm94KCRuZXdTZXR0aW5nPSIiKQoJewoJCWlmICgkbmV3U2V0dGluZyAhPT0gIiIpCgkJewoJCQkkdGhpcy0+dXNlU2FuZGJveCA9IChib29sKSRuZXdTZXR0aW5nOwoJCX0KCQlyZXR1cm4gJHRoaXMtPnVzZVNhbmRib3g7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldExvY2FsZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5sb2NhbGU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldExvY2FsZSgkbG9jYWxlKQoJewoJCSR0aGlzLT5sb2NhbGUgPSAkbG9jYWxlOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBUElVc2VybmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcGlVc2VybmFtZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0QVBJVXNlcm5hbWUoJGFwaVVzZXJuYW1lKQoJewoJCSR0aGlzLT5hcGlVc2VybmFtZSA9ICRhcGlVc2VybmFtZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QVBJUGFzc3dvcmQoKQoJewoJCXJldHVybiAkdGhpcy0+YXBpUGFzc3dvcmQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldEFQSVBhc3N3b3JkKCRhcGlQYXNzd29yZCkKCXsKCQkkdGhpcy0+YXBpUGFzc3dvcmQgPSAkYXBpUGFzc3dvcmQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEFQSVNpZ25hdHVyZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcGlTaWduYXR1cmU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldEFQSVNpZ25hdHVyZSgkYXBpU2lnbmF0dXJlKQoJewoJCSR0aGlzLT5hcGlTaWduYXR1cmUgPSAkYXBpU2lnbmF0dXJlOwoJfQoJCQoJCgkvKioKCSAqIFZhbGlkYXRlIHRoYXQgYSBwcm9kdWN0IGNhbiBiZSBjaGFyZ2VkIGJ5IFBheVBhbAoJICogCgkgKiBAcGFyYW0gTU1fUHJvZHVjdCAkcHJvZHVjdCB0byB2YWxpZGF0ZQoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3MgaWYgaXRzIGNoYXJnZWFibGUgb3IgdGhlIGVycm9ycyBvdGhlcndpc2UgKGFjdHVhbCBlcnJvcnMgYXJlIHBsYWNlZCBpbiB0aGUgbWVzc2FnZSBmaWVsZCBhcyBhbiBhcnJheSkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHZhbGlkYXRlUHJvZHVjdElzQ2hhcmdlYWJsZShNTV9Qcm9kdWN0ICRwcm9kdWN0KQoJewoJCS8vVE9ETzogUmVmYWN0b3I6IEZpbmlzaCBtZSBvciByZW1vdmUgbWUKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UERUSWRlbnRpdHlUb2tlbigpCgl7CgkJcmV0dXJuICR0aGlzLT5wZHRJZGVudGl0eVRva2VuOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRQRFRJZGVudGl0eVRva2VuKCRwZHRJZGVudGl0eVRva2VuKQoJewoJCSR0aGlzLT5wZHRJZGVudGl0eVRva2VuID0gJHBkdElkZW50aXR5VG9rZW47Cgl9CgoJCgkvKioKCSAqIFBheVBhbCBzdWJzY3JpcHRpb25zIGFyZSBtYW5hZ2VkIHRocm91Z2ggdGhlaXIgaW50ZXJmYWNlCgkgKiAKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmNhbmNlbFN1YnNjcmlwdGlvbigpCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG9yZGVyIGl0ZW0gbGlua2VkIHRvIHRoZSBzdWJzY3JpcHRpb24gdG8gY2FuY2VsCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgSWYgZXhwcmVzcyBjaGVja291dCBjYW5jZWxsYXRpb24gZmFpbHMgb3IgY2FuJ3QgYmUgZG9uZSwgdGhpcyB3aWxsIGhhdmUgdGhlIGVycm9yIHR5cGUgd2l0aCB0aGUgZXJyb3IgbWVzc2FnZSBkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlaXIgUGF5UGFsIGFjY291bnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNhbmNlbFN1YnNjcmlwdGlvbihNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSkKCXsKCQlpZiAoIWVtcHR5KCR0aGlzLT5hcGlVc2VybmFtZSkgJiYgIWVtcHR5KCR0aGlzLT5hcGlQYXNzd29yZCkgJiYgIWVtcHR5KCR0aGlzLT5hcGlTaWduYXR1cmUpKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5leHByZXNzQ2hlY2tvdXRDYW5jZWxTdWJzY3JpcHRpb24oJG9yZGVySXRlbSk7CgkJfQoJCSRwYXlwYWxVcmwgPSAiaHR0cHM6Ly93d3cucGF5cGFsLmNvbSI7CgkJJGVycm9yTWVzc2FnZSA9ICJUbyBjYW5jZWwgdGhpcyBzdWJzY3JpcHRpb24sIHVzZSB0aGUgUGF5UGFsIGludGVyZmFjZSBhdCB7JHBheXBhbFVybH0iOwoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBhcHByb3ByaWF0ZSBOVlAgQVBJIGVuZHBvaW50IGJhc2VkIG9uIHdoZXRoZXIgdGhlIGNsYXNzIGlzIGluIHNhbmRib3ggbW9kZSBvciBub3QKCSAqIAoJICogQHJldHVybiBzdHJpbmcgVGhlIHVybCB0byB0aGUgTlZQIEFQSSBlbmRwb2ludCB0aGF0IHNob3VsZCBiZSB1c2VkIGJhc2VkIG9uIHRoZSBtb2RlIHRoZSBjbGFzcyBpcyBpbgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0TlZQRW5kcG9pbnQoKQoJewoJCXJldHVybiAoJHRoaXMtPnVzZVNhbmRib3gpPyR0aGlzLT5zYW5kYm94TnZwRW5kcG9pbnQ6JHRoaXMtPnByb2R1Y3Rpb25OdnBFbmRwb2ludDsKCX0KCQoJCgkvKioKCSAqIFBlcmZvcm1zIGFuIEV4cHJlc3MgQ2hlY2tvdXQgTlZQIEFQSSBvcGVyYXRpb24gYXMgcGFzc2VkIGluICRhY3Rpb24uCgkgKgoJICogQWx0aG91Z2ggdGhlIFBheVBhbCBTdGFuZGFyZCBBUEkgcHJvdmlkZXMgbm8gZmFjaWxpdHkgZm9yIGNhbmNlbGxpbmcgYSBzdWJzY3JpcHRpb24sIHRoZSBQYXlQYWwKCSAqIEV4cHJlc3MgQ2hlY2tvdXQgIE5WUCBBUEkgY2FuIGJlIHVzZWQuCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSBsaW5rZWQgdG8gdGhlIHN1YnNjcmlwdGlvbiB0byBjYW5jZWwKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBUaGUgcmVzdWx0IG9mIHRoZSBjYW5jZWxsYXRpb24gYXR0ZW1wdAoJICogCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBleHByZXNzQ2hlY2tvdXRDYW5jZWxTdWJzY3JpcHRpb24oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0pCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vbWFrZSBzdXJlIHRoaXMgaXMgYSBwcm9kdWN0LiAKCQlpZiAoJG9yZGVySXRlbS0+Z2V0SXRlbVR5cGUoKSAhPSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQXR0ZW1wdGVkIHRvIGNhbmNlbCBhIG5vbi1wcm9kdWN0IGl0ZW0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vdGhlbiBtYWtlIHN1cmUgaXRzIG5vdCBhbHJlYWR5IGNhbmNlbGxlZAoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb246IFRoZSBzdWJzY3JpcHRpb24gaGFzIGFscmVhZHkgYmVlbiBjYW5jZWxsZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRzdWJzY3JfaWQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgiU0VMRUNUIHN1YnNjcl9pZCBGUk9NICIuTU1fVEFCTEVfUEFZUEFMX1NVQlNDUl9MSU5LUy4iIFdIRVJFIG9yZGVyX2l0ZW1faWQ9JXMiLCRvcmRlckl0ZW0tPmdldElkKCkpKTsKCQlpZiAoaXNfbnVsbCgkc3Vic2NyX2lkKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNhbmNlbCBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbiBub3QgZm91bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRhcGlSZXF1ZXN0WydVU0VSJ10gICAgICA9IHVybGVuY29kZSgkdGhpcy0+Z2V0QVBJVXNlcm5hbWUoKSk7CgkJJGFwaVJlcXVlc3RbJ1BXRCddICAgICAgID0gdXJsZW5jb2RlKCR0aGlzLT5nZXRBUElQYXNzd29yZCgpKTsKCQkkYXBpUmVxdWVzdFsnU0lHTkFUVVJFJ10gPSB1cmxlbmNvZGUoJHRoaXMtPmdldEFQSVNpZ25hdHVyZSgpKTsKCQkkYXBpUmVxdWVzdFsnVkVSU0lPTiddICAgPSAiNzYuMCI7CgkJJGFwaVJlcXVlc3RbJ01FVEhPRCddICAgID0gIk1hbmFnZVJlY3VycmluZ1BheW1lbnRzUHJvZmlsZVN0YXR1cyI7CgkJJGFwaVJlcXVlc3RbJ1BST0ZJTEVJRCddID0gdXJsZW5jb2RlKCRzdWJzY3JfaWQpOwoJCSRhcGlSZXF1ZXN0WydBQ1RJT04nXSAgICA9IHVybGVuY29kZSgnQ2FuY2VsJyk7CgkJJGFwaVJlcXVlc3RbJ05PVEUnXSAgICAgID0gdXJsZW5jb2RlKCdTdWJzY3JpcHRpb24gY2FuY2VsbGVkIHRocm91Z2ggTWVtYmVyTW91c2UnKTsKCQkKCQkkY2FuY2VsUmVzcG9uc2UgPSAkdGhpcy0+cGFyc2VFeHByZXNzQ2hlY2tvdXRSZXNwb25zZSgkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0TlZQRW5kcG9pbnQoKSwiUE9TVCIsJGFwaVJlcXVlc3QpKTsKCQkKCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCRjYW5jZWxSZXNwb25zZSkpCgkJewoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpOwoJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJfQoJCWVsc2UgCgkJewoJCQkvLyB0aGVyZSB3YXMgYW4gZXJyb3IgdGhhdCBvY2N1cmVkIGluIGNhbmNlbGxpbmcgdGhlIHN1YnNjcmlwdGlvbiBpbiBQYXlQYWwsIGNhbmNlbCByZWN1cnJpbmcKCQkJLy8gaW4gTU0gYW5kIGluZm9ybSB0aGUgY3VzdG9tZXIgdGhhdCB0aGV5IHNob3VsZCBjYW5jZWwgdGhlIHN1YnNjcmlwdGlvbiBtYW51YWxseSB2aWEgUGF5UGFsCgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCgkJCSRwYXlwYWxVcmwgPSAiaHR0cHM6Ly93d3cucGF5cGFsLmNvbSI7CgkJCSRwYXlQYWxFcnJvck1zZyA9ICRjYW5jZWxSZXNwb25zZS0+bWVzc2FnZTsKCQkJJGVycm9yTXNnID0gIlRoaXMgc3Vic2NyaXB0aW9uIGhhcyBiZWVuIGNhbmNlbGVkIGluIE1lbWJlck1vdXNlLlxuXG5Ib3dldmVyLCBhbiBlcnJvciBvY2N1cmVkIHdoZW4gYXR0ZW1wdGluZyB0byBjYW5jZWwgdGhlIHN1YnNjcmlwdGlvbiBpbiBQYXlQYWwuXG5cbiI7CgkJCSRlcnJvck1zZyAuPSAiVGhlIGVycm9yIG1lc3NhZ2UgcmV0dXJuZWQgZnJvbSBQYXlQYWwgd2FzOlxueyRwYXlQYWxFcnJvck1zZ31cblxuIjsKCQkJJGVycm9yTXNnIC49ICJUbyBlbnN1cmUgdGhpcyBzdWJzY3JpcHRpb24gaXMgY2FuY2VsZWQgaW4gUGF5UGFsLCB1c2UgdGhlIFBheVBhbCBpbnRlcmZhY2UgYXQgeyRwYXlwYWxVcmx9IjsKCQkJCgkJCSRjYW5jZWxSZXNwb25zZS0+c2V0TWVzc2FnZSgkZXJyb3JNc2cpOwoJCX0KCQlyZXR1cm4gJGNhbmNlbFJlc3BvbnNlOwoJfQoJCgkKCS8qKgoJICogVXNlcyB0aGUgRXhwcmVzc0NoZWNrb3V0IE5WUCB0byBhdHRlbXB0IHRvIHJlZnVuZCBhIHRyYW5zYWN0aW9uCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJHRyYW5zYWN0aW9uSWQgVGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIGlkCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgcmVwcmVzZW50aW5nIHRoZSBzdGF0dXMgb2YgdGhlIHJlZnVuZCBhdHRlbXB0IChzdWNjZXNzLCBmYWlsdXJlIG9yIGVycm9yKQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gZXhwcmVzc0NoZWNrb3V0UmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChlbXB0eSgkdHJhbnNhY3Rpb25JZCkpCgkJewoJCQkvL3Nob3VsZCBuZXZlciBoYXBwZW4KCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcmVmdW5kIHRyYW5zYWN0aW9uOiBubyB0cmFuc2FjdGlvbiBpZCB3YXMgc3VwcGxpZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJJHNxbCA9ICJTRUxFQ1QgaS50eG5faWQsIHQuKiBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgdCBMRUZUIEpPSU4gIi5NTV9UQUJMRV9QQVlQQUxfSVBOX0xPRy4iIGkgT04gKHQucGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCA9IGkuaWQpIFdIRVJFIHQuaWQ9JXMgQU5EIHQucGF5bWVudF9zZXJ2aWNlX2lkPSVzIExJTUlUIDEiOwoJCSR0eG5JbmZvID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoJHNxbCwkdHJhbnNhY3Rpb25JZCwkdGhpcy0+Z2V0SWQoKSkpOwoJCWlmIChpc19udWxsKCR0eG5JbmZvKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHJlZnVuZCB0cmFuc2FjdGlvbjogdGhlIHRyYW5zYWN0aW9uIGlkIGlzIGludmFsaWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQkJCgkJLy9tYWtlIHN1cmUgaXRzIG5vdCBhbHJlYWR5IHJlZnVuZGVkCgkJaWYgKCFpc19udWxsKCR0eG5JbmZvLT5yZWZ1bmRfaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcmVmdW5kIHRyYW5zYWN0aW9uOiB0aGUgdHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgYmVlbiByZWZ1bmRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCQoJCSRhcGlSZXF1ZXN0WydVU0VSJ10gICAgICAgICAgPSB1cmxlbmNvZGUoJHRoaXMtPmdldEFQSVVzZXJuYW1lKCkpOwoJCSRhcGlSZXF1ZXN0WydQV0QnXSAgICAgICAgICAgPSB1cmxlbmNvZGUoJHRoaXMtPmdldEFQSVBhc3N3b3JkKCkpOwoJCSRhcGlSZXF1ZXN0WydTSUdOQVRVUkUnXSAgICAgPSB1cmxlbmNvZGUoJHRoaXMtPmdldEFQSVNpZ25hdHVyZSgpKTsKCQkkYXBpUmVxdWVzdFsnVkVSU0lPTiddICAgICAgID0gIjkyLjAiOwoJCSRhcGlSZXF1ZXN0WydNRVRIT0QnXSAgICAgICAgPSAiUmVmdW5kVHJhbnNhY3Rpb24iOwoJCSRhcGlSZXF1ZXN0WydSRUZVTkRUWVBFJ10gICAgPSB1cmxlbmNvZGUoJ0Z1bGwnKTsKCQkkYXBpUmVxdWVzdFsnQ1VSUkVOQ1lDT0RFJ10gID0gJHR4bkluZm8tPmN1cnJlbmN5OwoJCSRhcGlSZXF1ZXN0WydUUkFOU0FDVElPTklEJ10gPSAkdHhuSW5mby0+dHhuX2lkOwoJCgkJJHJlZnVuZFJlc3BvbnNlID0gJHRoaXMtPnBhcnNlRXhwcmVzc0NoZWNrb3V0UmVzcG9uc2UoJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldE5WUEVuZHBvaW50KCksIlBPU1QiLCRhcGlSZXF1ZXN0KSk7CgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVmdW5kUmVzcG9uc2UpKQoJCXsKCQkJJHJlc3BvbnNlRGF0YSA9ICRyZWZ1bmRSZXNwb25zZS0+bWVzc2FnZTsKCQkJLy9ub3Qgc3VyZSBob3cgaSBmZWVsIGFib3V0IHRoaXMgbmV4dCBwYXJ0IC0gaWYgcGF5cGFsIHJldHVybnMgdGhlIHRvdGFsIGFtb3VudCByZWZ1bmRlZCwgaXQgdXNlcyB0aGF0Li4uIAoJCQkvL290aGVyd2lzZSBpdCBhc3N1bWVzIHRoZSBhbW91bnQgbWF0Y2hlcyB0aGUgYW1vdW50IG9mIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbi4gU2VlbXMgbGlrZSBhIHNhZmUgYXNzdW1wdGlvbiwgYnV0Li4KCQkJJHRyYW5zYWN0aW9uQW1vdW50ID0gZmxvYXR2YWwoaXNzZXQoJHJlc3BvbnNlRGF0YVsnVE9UQUxSRUZVTkRFREFNT1VOVCddKT8kcmVzcG9uc2VEYXRhWydUT1RBTFJFRlVOREVEQU1PVU5UJ106JHR4bkluZm8tPmFtb3VudCk7CgkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlJlZnVuZCBmb3IgdHJhbnNhY3Rpb24jIHskdHJhbnNhY3Rpb25JZH0iOwoJCQkkdHJhbnNhY3Rpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSAKCQkJaWYgKCR0aGlzLT51c2VTYW5kYm94KQoJCQl7CgkJCQkkcmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJHR4bkluZm8tPm9yZGVyX2lkLAoJCQkJCQkkdHhuSW5mby0+b3JkZXJfaXRlbV9pZCwKCQkJCQkJJHRyYW5zYWN0aW9uQW1vdW50LAoJCQkJCQkkdHhuSW5mby0+Y3VycmVuY3ksCgkJCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCQlmYWxzZSwKCQkJCQkJJHRoaXMtPmdldElkKCksCgkJCQkJCW51bGwsCgkJCQkJCSR0cmFuc2FjdGlvbkRhdGUsCgkJCQkJCSR0cmFuc2FjdGlvbklkKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkcmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkdHhuSW5mby0+b3JkZXJfaWQsCgkJCQkJJHR4bkluZm8tPm9yZGVyX2l0ZW1faWQsCgkJCQkJJHRyYW5zYWN0aW9uQW1vdW50LAoJCQkJCSR0eG5JbmZvLT5jdXJyZW5jeSwKCQkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwKCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCWZhbHNlLAoJCQkJCSR0aGlzLT5nZXRJZCgpLAoJCQkJCW51bGwsCgkJCQkJJHRyYW5zYWN0aW9uRGF0ZSwKCQkJCQkkdHJhbnNhY3Rpb25JZCk7CgkJCX0KCQkJaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3BvbnNlKSkKCQkJewoJCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJVUERBVEUgIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBTRVQgcmVmdW5kX2lkID0gJXMgV0hFUkUgaWQgPSAlcyIsJHJlc3BvbnNlLT5tZXNzYWdlLCR0cmFuc2FjdGlvbklkKSk7CgkJCX0KCQkJCgkJfQoJCQoJCXJldHVybiAkcmVmdW5kUmVzcG9uc2U7CQkKCX0KCQoJCgkvKioKCSAqIFRyYW5zbGF0ZXMgdGhlIHJhdyByZXNwb25zZSByZWNlaXZlZCBmcm9tIHRoZSBOVlAgZW5kcG9pbnQgaW50byBhbiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlCgkgKiAKCSAqIEBwYXJhbSBNTV9SZXNwb25zZSAkcmVzcG9uc2UgQSB3cmFwcGVyIGFyb3VuZCB0aGUgcmVzcG9uc2UgZnJvbSB0aGUgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBlbmRwb2ludCAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBUaGUgdHJhbnNsYXRlZCByZXN1bHRzIG9mIHRoZSBvcGVyYXRpb24KCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHBhcnNlRXhwcmVzc0NoZWNrb3V0UmVzcG9uc2UoTU1fUmVzcG9uc2UgJHJlc3BvbnNlLCRyZXNwb25zZVR5cGU9IkNBTkNFTCIpCgl7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6dHJhbnNsYXRlKCRyZXNwb25zZSk7CgkJfQoJCQoJCSRyZXNwb25zZVR5cGUgPSBzdHJ0b3VwcGVyKCRyZXNwb25zZVR5cGUpOwoJCXBhcnNlX3N0cigkcmVzcG9uc2UtPm1lc3NhZ2UsJHJlc3VsdERhdGEpOwoJCQoJCSRvcGVyYXRpb25SZXN1bHQgPSBpc3NldCgkcmVzdWx0RGF0YVsnQUNLJ10pPyRyZXN1bHREYXRhWydBQ0snXToiRmFpbHVyZSI7CgkJaWYgKCRvcGVyYXRpb25SZXN1bHQgPT0gIkZhaWx1cmUiKQoJCXsKCQkJJHJlYXNvbiA9IChpc3NldCgkcmVzdWx0RGF0YVsnTF9MT05HTUVTU0FHRTAnXSkpPyRyZXN1bHREYXRhWydMX0xPTkdNRVNTQUdFMCddOiJUaGVyZSB3YXMgYW4gdW5rbm93biBlcnJvciI7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkcmVhc29uLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJHJlc3VsdERhdGEpOwoJfQoKCQoJLyoqCgkgKiBQYXlQYWwgc3Vic2NyaXB0aW9ucyBhcmUgbWFuYWdlZCB0aHJvdWdoIHRoZWlyIGludGVyZmFjZQoJICogCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjp1cGRhdGVTdWJzY3JpcHRpb25JbmZvKCkKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSBsaW5rZWQgdG8gdGhlIHN1YnNjcmlwdGlvbiB0byB1cGRhdGUKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gKG9wdGlvbmFsKSBUaGUgbmV3IGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uIHRvIHVwZGF0ZSB0aGUgc3Vic2NyaXB0aW9uIHdpdGgKCSAqIEBwYXJhbSBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzIChvcHRpb25hbCkgVGhlIG5ldyBiaWxsaW5nIGFkZHJlc3MgdG8gdXBkYXRlIHRoZSBzdWJzY3JpcHRpb24gd2l0aAoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgRm9yIFBheVBhbCwgdGhpcyB3aWxsIGFsd2F5cyBiZSBhbiBlcnJvciwgd2l0aCB0aGUgZXJyb3IgbWVzc2FnZSBkaXJlY3RpbmcgdGhlIHVzZXIgdG8gdGhlaXIgUGF5UGFsIGFjY291bnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sIE1NX0NhcmRJbmZvICRjYXJkSW5mbz1udWxsLCBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzPW51bGwpCgl7CgkJJHBheXBhbFVybCA9ICJodHRwczovL3d3dy5wYXlwYWwuY29tIjsKCQkkZXJyb3JNZXNzYWdlID0gIlRvIHVwZGF0ZSBwYXltZW50IGluZm9ybWF0aW9uLCB1c2UgdGhlIFBheVBhbCBpbnRlcmZhY2UgYXQgeyRwYXlwYWxVcmx9IjsKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGVycm9yTWVzc2FnZSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJfQoJCgkKCS8qKiAKCSAqIEludGVyY2VwdHMgUERUIHRva2VucyBhbmQgdXNlIHRoZW0gcHJpb3IgdG8gcmVuZGVyaW5nIHRoZSBjb25maXJtYXRpb24gcGFnZSwgaWYgbmVjZXNzYXJ5CgkgKiAKCSAqIENyaXRlcmlhIGFyZToKCSAqIDEuIFBEVCBpZGVudGl0eSB0b2tlbiBtdXN0IGJlIHNldAoJICogMi4gQ29yZVBhZ2VFbmdpbmUgY2xhc3MgbXVzdCBiZSBsb2FkYWJsZQoJICogMy4gVGhlIGN1cnJlbnQgcGFnZSBtdXN0IGJlIGEgY29uZmlybWF0aW9uIHBhZ2UKCSAqIDQuIFRoZSBQYXlQYWwgdHJhbnNhY3Rpb24gaWQgcGFyYW1ldGVyICgndHgnKSBtdXN0IGJlIHNldCBpbiB0aGUgdXJsIHF1ZXJ5c3RyaW5nCgkgKiA1LiBUaGVyZSBtdXN0IGJlIGEgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24ga2V5IGluIHRoZSB1cmwgcXVlcnlzdHJpbmcKCSAqIElmIGFsbCBvZiB0aGVzZSBjcml0ZXJpYSBhcmUgbWV0LCB3ZSB3YW50IHRvIGNoZWNrIHRvIHNlZSBpZiB0aGUgcGF5bWVudCBJUE4gYXJyaXZlZCBmaXJzdC4gSWYgbm90LCB0aGVuIHdlIHJldHJpZXZlIHRoZQoJICogcGF5bWVudCBzdGF0dXMgdXNpbmcgUERUIGFuZCB1c2UgdGhhdCB0byB1cGRhdGUgdGhlIG9yZGVyCgkgKiovCglwdWJsaWMgZnVuY3Rpb24gZG9Jbml0SG9vaygpIAoJeyAKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHRoaXNQYWdlID0gTU1fVXRpbHM6OmNvbnN0cnVjdFBhZ2VVcmwoKTsKCQlpZiAoIWVtcHR5KCR0aGlzLT5wZHRJZGVudGl0eVRva2VuKSAmJiBjbGFzc19leGlzdHMoIk1NX0NvcmVQYWdlRW5naW5lIikgJiYgTU1fQ29yZVBhZ2VFbmdpbmU6OmlzQ29uZmlybWF0aW9uUGFnZUJ5VXJsKCR0aGlzUGFnZSkgJiYgIWVtcHR5KCRfR0VUWyd0eCddKSAmJiAhZW1wdHkoJF9HRVRbTU1fU2Vzc2lvbjo6JEtFWV9UUkFOU0FDVElPTl9LRVldKSkKCQl7CgkJCSR0cmFuc2FjdGlvbktleSA9IE1NX1RyYW5zYWN0aW9uS2V5OjpnZXRUcmFuc2FjdGlvbkJ5S2V5KCRfR0VUW01NX1Nlc3Npb246OiRLRVlfVFJBTlNBQ1RJT05fS0VZXSk7CgkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkdHJhbnNhY3Rpb25LZXktPmdldE9yZGVySWQoKSk7CgkJCWlmICgkb3JkZXItPmlzVmFsaWQoKSAmJiAoKCRvcmRlci0+Z2V0T3JkZXJTdGF0dXMoKSA9PSBNTV9PcmRlcjo6JFBFTkRJTkcpIHx8ICgkb3JkZXItPmdldE9yZGVyU3RhdHVzKCkgPT0gTU1fT3JkZXI6OiRBV0FJVElOR19QQVlNRU5UKSkpCgkJCXsKCQkJCS8vYSB2YWxpZCBvcmRlciB0aGF0IGhhc24ndCByZWNlaXZlZCBhIHBheW1lbnQgbWVhbnMgdGhhdCB0aGUgSVBOIGhhc24ndCBiZWVuIHJlY2VpdmVkIHlldCwgc2VuZCBmb3IgcGR0IGluZm9ybWF0aW9uCgkJCQkkcG9zdERhdGFbJ2NtZCddID0gJ19ub3RpZnktc3luY2gnOwoJCQkJJHBvc3REYXRhWyd0eCddID0gJF9HRVRbJ3R4J107CgkJCQkkcG9zdERhdGFbJ2F0J10gPSAkdGhpcy0+Z2V0UERUSWRlbnRpdHlUb2tlbigpOwoJCQkJJHBkdFJlc3BvbnNlID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldFBheXBhbFN0YW5kYXJkVXJsKCksIlBPU1QiLCRwb3N0RGF0YSk7CgkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcGR0UmVzcG9uc2UpKQoJCQkJewoJCQkJCSRsaW5lcyA9IGV4cGxvZGUoIlxuIiwgJHBkdFJlc3BvbnNlLT5tZXNzYWdlKTsKCQkJCQkkcGR0UmVzcG9uc2VEYXRhID0gYXJyYXkoKTsKCQkJCQlpZiAoc3RyY21wICgkbGluZXNbMF0sICJTVUNDRVNTIikgPT0gMCkgIC8vd2Ugb25seSBjYXJlIHRvIGNvbnRpbnVlIGlmIHRoZSBwYXltZW50IHdhcyBzdWNjZXNzZnVsCgkJCQkJewoJCQkJCQlmb3IgKCRpPTE7ICRpPGNvdW50KCRsaW5lcyk7JGkrKykKCQkJCQkJewoJCQkJCQkJQGxpc3QoJGtleSwkdmFsKSA9IGV4cGxvZGUoIj0iLCAkbGluZXNbJGldKTsKCQkJCQkJCSRwZHRSZXNwb25zZURhdGFbdXJsZGVjb2RlKCRrZXkpXSA9IHVybGRlY29kZSgkdmFsKTsKCQkJCQkJfQoJCQkJCQoJCQkJCQoJCQkJCQkvL3NlbmQgcGR0IHJlcXVlc3QgdGhyb3VnaCBpcG4gcGF0aHdheSBlbXVsYXRpbmcgYW4gSVBOIGlmIHBheW1lbnQgd2FzIHN1Y2Nlc3NmdWwJCQkKCQkJCQkJaWYgKGlzc2V0KCRwZHRSZXNwb25zZURhdGFbJ3N1YnNjcl9pZCddKSkKCQkJCQkJewoJCQkJCQkJJHBkdFJlc3BvbnNlRGF0YVsndHhuX3R5cGUnXSA9ICdzdWJzY3JfcGF5bWVudCc7CgkJCQkJCQkkdGhpcy0+cHJvY2Vzc1N1YnNjcmlwdGlvbk5vdGlmaWNhdGlvbigkcGR0UmVzcG9uc2VEYXRhKTsKCQkJCQkJfQoJCQkJCQllbHNlIAoJCQkJCQl7CgkJCQkJCQkkcGR0UmVzcG9uc2VEYXRhWyd0eG5fdHlwZSddID0gJ3dlYl9hY2NlcHQnOwoJCQkJCQkJJHRoaXMtPnByb2Nlc3NPcmRlck5vdGlmaWNhdGlvbigkcGR0UmVzcG9uc2VEYXRhKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gaW5UZXN0TW9kZSgpCgl7CgkJcmV0dXJuICR0aGlzLT51c2VTYW5kYm94OwoJfQoJCgkKCS8qKgoJICogQ2hhbmdlcyB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGlzIHBheW1lbnQgc2VydmljZSB0byB1c2UgdGhlIHRlc3QgbW9kZSBzZXR0aW5ncywgaWYgYXZhaWxhYmxlLgoJICogSWYgdGhlIGNvbmZpZ3VyYXRpb24gd2FzIGFibGUgdG8gYmUgc3VjY2Vzc2Z1bGx5IGNoYW5nZWQgdG8gYmUgYSB0ZXN0IG1vZGUgY29uZmlndXJhdGlvbiwgdHJ1ZSBpcyByZXR1cm5lZCwgb3RoZXJ3aXNlIGZhbHNlCgkgKgoJICogIEByZXR1cm4gYm9vbAoJICovCglwdWJsaWMgZnVuY3Rpb24gc3dpdGNoVG9UZXN0TW9kZSgpCgl7CgkJJHRoaXMtPnVzZVNhbmRib3ggPSB0cnVlOwoJCXJldHVybiB0cnVlOwoJfQp9Cg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(4, 'limelightproductsview', 'LyoqCiAqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9MaW1lTGlnaHRQcm9kdWN0c1ZpZXcgZXh0ZW5kcyBNTV9SQkFDUHJvZHVjdE1hbmFnZXJWaWV3CnsJCglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9HRVRfTUVNQkVSTU9VU0VfUFJPRFVDVF9ERVNDID0gImdldE1NUHJvZHVjdERlc2NyaXB0aW9uIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0dFVF9MSU1FTElHSFRfUFJPRFVDVFMgPSAiZ2V0TGltZUxpZ2h0UHJvZHVjdHMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fR0VUX0xJTUVMSUdIVF9QUk9EVUNUX0RFU0MgPSAiZ2V0TExQcm9kdWN0RGVzY3JpcHRpb24iOwoJCgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0FWRToKCQkJCQlyZXR1cm4gJHRoaXMtPnNhdmVMaW1lTGlnaHRQcm9kdWN0KCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUxpbWVMaWdodFByb2R1Y3QoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fR0VUX01FTUJFUk1PVVNFX1BST0RVQ1RfREVTQzoKCQkJCQlyZXR1cm4gJHRoaXMtPmdldE1NUHJvZHVjdERlc2NyaXB0aW9uKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0dFVF9MSU1FTElHSFRfUFJPRFVDVFM6CgkJCQkJcmV0dXJuICR0aGlzLT5nZXRMaW1lTGlnaHRQcm9kdWN0cygkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9HRVRfTElNRUxJR0hUX1BST0RVQ1RfREVTQzoKCQkJCQlyZXR1cm4gJHRoaXMtPmdldExpbWVMaWdodFByb2R1Y3REZXNjcmlwdGlvbigkcG9zdCk7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgkcG9zdCkKCXsKCQlyZXR1cm4gcGFyZW50OjpnZXREYXRhKE1NX1RBQkxFX0xJTUVMSUdIVF9QUk9EVUNUUywgbnVsbCwgJHBvc3QpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldExpbWVMaWdodFByb2R1Y3RSZWYoJHBvc3QpCgl7CgkJJGxpbWVMaWdodFByb2R1Y3QgPSBuZXcgTU1fTGltZUxpZ2h0UHJvZHVjdCgpOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkgCgkJewoJCQkkbGltZUxpZ2h0UHJvZHVjdCA9IG5ldyBNTV9MaW1lTGlnaHRQcm9kdWN0KCRwb3N0WyJpZCJdKTsKCQkJCgkJCWlmKCEkbGltZUxpZ2h0UHJvZHVjdC0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDYW5ub3QgdXBkYXRlIExpbWUgTGlnaHQgcHJvZHVjdCBtYXBwaW5nLiBJbnZhbGlkIElEICd7JHBvc3RbJ2lkJ119JyBwYXNzZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJcmV0dXJuICRsaW1lTGlnaHRQcm9kdWN0OwoJfSAKCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlTGltZUxpZ2h0UHJvZHVjdCgkcG9zdCkKCXsgCgkJLy8gZ2V0IExpbWUgTGlnaHQgcHJvZHVjdCAKCQkkbGltZUxpZ2h0U2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2UoTU1fUGF5bWVudFNlcnZpY2U6OiRMSU1FTElHSFRfU0VSVklDRV9UT0tFTik7CgkJJHJlc3VsdCA9ICRsaW1lTGlnaHRTZXJ2aWNlLT5nZXRQcm9kdWN0KCRwb3N0WyJsaW1lbGlnaHRfcHJvZHVjdF9pZCJdKTsKCQkKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCBzYXZlIExpbWUgTGlnaHQgcHJvZHVjdCBtYXBwaW5nLiBJbnZhbGlkIExpbWUgTGlnaHQgcHJvZHVjdCBJRCAneyRwb3N0WydsaW1lbGlnaHRfcHJvZHVjdF9pZCddfScgcGFzc2VkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkbGxQcm9kdWN0SW5mbyA9ICRyZXN1bHQtPm1lc3NhZ2U7CgkJCgkJLy8gZ2V0IE1lbWJlck1vdXNlIHByb2R1Y3QKCQkkbW1Qcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJHBvc3RbIm1tX3Byb2R1Y3RfaWQiXSk7CgkJCgkJaWYoISRtbVByb2R1Y3QtPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCBzYXZlIExpbWUgTGlnaHQgcHJvZHVjdCBtYXBwaW5nLiBJbnZhbGlkIE1lbWJlck1vdXNlIHByb2R1Y3QgSUQgJ3skcG9zdFsnbW1fcHJvZHVjdF9pZCddfScgcGFzc2VkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvLyB2YWxpZGF0ZSBtYXBwaW5nCgkgCSRwcmljZU1pc21hdGNoID0gIiI7CgkgCSRzdWJzY3JpcHRpb25NaXNtYXRjaCA9ICIiOwoJCSRzaGlwcGluZ01pc21hdGNoID0gIiI7CgkJCgkJJG1tQW1vdW50ID0gKCRtbVByb2R1Y3QtPmhhc1RyaWFsKCkpID8gJG1tUHJvZHVjdC0+Z2V0VHJpYWxBbW91bnQoZmFsc2UpIDogJG1tUHJvZHVjdC0+Z2V0UHJpY2UoZmFsc2UpOwoJCQoJCWlmKGZsb2F0dmFsKCRsbFByb2R1Y3RJbmZvWyJwcm9kdWN0X3ByaWNlIl0pICE9ICRtbUFtb3VudCkKCQl7CgkJCSRwcmljZU1pc21hdGNoID0gIlBSSUNFIE1JU01BVENIXG4iOwoJCQkkcHJpY2VNaXNtYXRjaCAuPSAiTGltZSBMaWdodCBQcmljZTogIi5fbW1mKCRsbFByb2R1Y3RJbmZvWyJwcm9kdWN0X3ByaWNlIl0sICJVU0QiKS4iXG4iOwoJCQkkcHJpY2VNaXNtYXRjaCAuPSAiTWVtYmVyTW91c2UgUHJpY2U6ICIuJG1tQW1vdW50LiJcblxuIjsKCQl9CgkJCgkJJGxsSXNTdWJzY3JpcHRpb24gPSAoJGxsUHJvZHVjdEluZm9bInByb2R1Y3RfcmViaWxsX3Byb2R1Y3QiXSA9PSAiMCIpID8gZmFsc2UgOiB0cnVlOwoJCWlmKCRsbElzU3Vic2NyaXB0aW9uICE9ICRtbVByb2R1Y3QtPmlzUmVjdXJyaW5nKCkpCgkJewoJCQkkc3Vic2NyaXB0aW9uTWlzbWF0Y2ggPSAiU1VCU0NSSVBUSU9OIE1JU01BVENIXG4iOwoJCQkkc3Vic2NyaXB0aW9uTWlzbWF0Y2ggLj0gIkxpbWUgTGlnaHQgUHJvZHVjdCBpcyBTdWJzY3J0aXBpb246ICI7CgkJCSRzdWJzY3JpcHRpb25NaXNtYXRjaCAuPSAoJGxsSXNTdWJzY3JpcHRpb24pID8gIlllcyIgOiAiTm8iOwoJCQkkc3Vic2NyaXB0aW9uTWlzbWF0Y2ggLj0gIlxuIjsKCQkJJHN1YnNjcmlwdGlvbk1pc21hdGNoIC49ICJNZW1iZXJNb3VzZSBQcm9kdWN0IGlzIFN1YnNjcmlwdGlvbjogIjsKCQkJJHN1YnNjcmlwdGlvbk1pc21hdGNoIC49ICgkbW1Qcm9kdWN0LT5pc1JlY3VycmluZygpKSA/ICJZZXMiIDogIk5vIjsKCQkJJHN1YnNjcmlwdGlvbk1pc21hdGNoIC49ICJcblxuIjsKCQl9CgkJCgkJJGxsUmVxdWlyZXNTaGlwcGluZyA9ICgkbGxQcm9kdWN0SW5mb1sicHJvZHVjdF9pc19zaGlwcGFibGUiXSA9PSAiMCIpID8gZmFsc2UgOiB0cnVlOwoJCWlmKCRsbFJlcXVpcmVzU2hpcHBpbmcgIT0gJG1tUHJvZHVjdC0+aXNTaGlwcGFibGUoKSkKCQl7CgkJCSRzaGlwcGluZ01pc21hdGNoID0gIlNISVBQSU5HIFJFUVVJUkVNRU5UIE1JU01BVENIXG4iOwoJCQkkc2hpcHBpbmdNaXNtYXRjaCAuPSAiTGltZSBMaWdodCBQcm9kdWN0IGlzIFNoaXBwYWJsZTogIjsKCQkJJHNoaXBwaW5nTWlzbWF0Y2ggLj0gKCRsbFJlcXVpcmVzU2hpcHBpbmcpID8gIlllcyIgOiAiTm8iOwoJCQkkc2hpcHBpbmdNaXNtYXRjaCAuPSAiXG4iOwoJCQkkc2hpcHBpbmdNaXNtYXRjaCAuPSAiTWVtYmVyTW91c2UgUHJvZHVjdCBpcyBTaGlwcGFibGU6ICI7CgkJCSRzaGlwcGluZ01pc21hdGNoIC49ICgkbW1Qcm9kdWN0LT5pc1NoaXBwYWJsZSgpKSA/ICJZZXMiIDogIk5vIjsKCQkJJHNoaXBwaW5nTWlzbWF0Y2ggLj0gIlxuXG4iOwoJCX0KCQkKCQlpZighZW1wdHkoJHByaWNlTWlzbWF0Y2gpIHx8ICFlbXB0eSgkc3Vic2NyaXB0aW9uTWlzbWF0Y2gpIHx8ICFlbXB0eSgkc2hpcHBpbmdNaXNtYXRjaCkpCgkJewoJCQkkZXJyb3JNc2cgPSAiSW52YWxpZCBwcm9kdWN0IG1hcHBpbmc6XG5MaW1lIExpZ2h0IHByb2R1Y3Qgc2V0dGluZ3MgbXVzdCBtYXRjaCB0aGUgTWVtYmVyTW91c2UgcHJvZHVjdCBzZXR0aW5ncy5cblxuIjsKCQkJCgkJCSRlcnJvck1zZyAuPSAkcHJpY2VNaXNtYXRjaDsKCQkJJGVycm9yTXNnIC49ICRzdWJzY3JpcHRpb25NaXNtYXRjaDsKCQkJJGVycm9yTXNnIC49ICRzaGlwcGluZ01pc21hdGNoOwoJCQkKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZXJyb3JNc2csIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0gCgoJCSRtYXBBbGwgPSAoJHBvc3RbImxpbWVsaWdodF9jYW1wYWlnbl9tYXBfYWxsIl0gPT0gIjEiKTsKCSAJaWYoISRtYXBBbGwgJiYgaXNfYXJyYXkoJHBvc3RbImxpbWVsaWdodF9jYW1wYWlnbl9pZCJdKSkKCSAJeyAKCSAJCSRsbENhbXBhaWduTmFtZXMgPSBleHBsb2RlKCJ8IiwkcG9zdFsibGltZWxpZ2h0X2NhbXBhaWduX25hbWUiXSk7CgkgCQlpZihjb3VudCgkbGxDYW1wYWlnbk5hbWVzKT09Y291bnQoJHBvc3RbImxpbWVsaWdodF9jYW1wYWlnbl9pZCJdKSkKCSAJCXsgCgkJIAkJZm9yKCRpPTA7ICRpPGNvdW50KCRwb3N0WyJsaW1lbGlnaHRfY2FtcGFpZ25faWQiXSk7ICRpKyspCgkJIAkJeyAKCQkgCQkJJGxpbWVMaWdodFByb2R1Y3QgPSAkdGhpcy0+Z2V0TGltZUxpZ2h0UHJvZHVjdFJlZigkcG9zdCk7CgkJIAkJCWlmKCRsaW1lTGlnaHRQcm9kdWN0IGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpCgkJIAkJCXsKCQkgCQkJCXJldHVybiAkbGltZUxpZ2h0UHJvZHVjdDsKCQkgCQkJfQoKCQkgCQkJaWYoTU1fTGltZUxpZ2h0UHJvZHVjdDo6aGFzRXhpc3RpbmdQcm9kdWN0TWFwcGluZ3MoJHBvc3RbImxpbWVsaWdodF9wcm9kdWN0X2lkIl0sJHBvc3RbIm1tX3Byb2R1Y3RfaWQiXSkpCgkJIAkJCXsKCQkgCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZXJlIGFscmVhZHkgZXhpc3RzIG1hcHBpbmdzIHRvIHRoaXMgTGltZSBMaWdodCBwcm9kdWN0LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCSAJCQl9CgkJIAkJCQoJCSAJCQkkbGltZUxpZ2h0UHJvZHVjdC0+c2V0TU1Qcm9kdWN0SWQoJHBvc3RbIm1tX3Byb2R1Y3RfaWQiXSk7CgkJIAkJCSRsaW1lTGlnaHRQcm9kdWN0LT5zZXRMaW1lTGlnaHRQcm9kdWN0SWQoJHBvc3RbImxpbWVsaWdodF9wcm9kdWN0X2lkIl0pOwoJCSAJCQkkbGltZUxpZ2h0UHJvZHVjdC0+c2V0TGltZUxpZ2h0UHJvZHVjdE5hbWUoJHBvc3RbImxpbWVsaWdodF9wcm9kdWN0X25hbWUiXSk7CgkJCQkgCSRsaW1lTGlnaHRQcm9kdWN0LT5zZXRMaW1lTGlnaHRDYW1wYWlnbklkKCRwb3N0WyJsaW1lbGlnaHRfY2FtcGFpZ25faWQiXVskaV0pOwoJCQkJIAkkbGltZUxpZ2h0UHJvZHVjdC0+c2V0TGltZUxpZ2h0Q2FtcGFpZ25OYW1lKCRsbENhbXBhaWduTmFtZXNbJGldKTsKCQkJCQkkcmVzcG9uc2UgPSAkbGltZUxpZ2h0UHJvZHVjdC0+Y29tbWl0RGF0YSgpOwoJCQkJCWlmKCRyZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCQkJCXsKCQkJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJCQl9CgkJIAkJfSAKCSAJCX0KCSAJCWVsc2UgCgkgCQl7CgkgCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBudW1iZXIgb2YgY2FtcGFpZ24gc2VsZWN0aW9ucy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCSAJCX0KCSAJCXJldHVybiB0cnVlOwoJIAl9CgkgCWVsc2UKCSAJewoJCSAJJGxpbWVMaWdodFByb2R1Y3QgPSAkdGhpcy0+Z2V0TGltZUxpZ2h0UHJvZHVjdFJlZigkcG9zdCk7CiAJCQlpZigkbGltZUxpZ2h0UHJvZHVjdCBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKQogCQkJewogCQkJCXJldHVybiAkbGltZUxpZ2h0UHJvZHVjdDsKIAkJCX0KCiAJCQlpZihpbnR2YWwoJHBvc3RbImlkIl0pPjApCiAJCQl7CiAJCQkJaWYoTU1fTGltZUxpZ2h0UHJvZHVjdDo6aGFzRXhpc3RpbmdQcm9kdWN0TWFwcGluZ3MoJHBvc3RbImxpbWVsaWdodF9wcm9kdWN0X2lkIl0sJHBvc3RbIm1tX3Byb2R1Y3RfaWQiXSxpbnR2YWwoJHBvc3RbImlkIl0pKSkKIAkJCQl7CiAJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZXJlIGFscmVhZHkgZXhpc3RzIG1hcHBpbmdzIHRvIHRoaXMgTGltZSBMaWdodCBwcm9kdWN0LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwogCQkJCX0KIAkJCX0KIAkJCWVsc2UKIAkJCXsKIAkJCQlpZihNTV9MaW1lTGlnaHRQcm9kdWN0OjpoYXNFeGlzdGluZ1Byb2R1Y3RNYXBwaW5ncygkcG9zdFsibGltZWxpZ2h0X3Byb2R1Y3RfaWQiXSwkcG9zdFsibW1fcHJvZHVjdF9pZCJdKSkKIAkJCQl7CiAJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZXJlIGFscmVhZHkgZXhpc3RzIG1hcHBpbmdzIHRvIHRoaXMgTGltZSBMaWdodCBwcm9kdWN0LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwogCQkJCX0KIAkJCX0KIAkJCQogCQkJCiAJCQkkbGltZUxpZ2h0UHJvZHVjdC0+c2V0TU1Qcm9kdWN0SWQoJHBvc3RbIm1tX3Byb2R1Y3RfaWQiXSk7CiAJCQkkbGltZUxpZ2h0UHJvZHVjdC0+c2V0TGltZUxpZ2h0UHJvZHVjdElkKCRwb3N0WyJsaW1lbGlnaHRfcHJvZHVjdF9pZCJdKTsKIAkJCSRsaW1lTGlnaHRQcm9kdWN0LT5zZXRMaW1lTGlnaHRQcm9kdWN0TmFtZSgkcG9zdFsibGltZWxpZ2h0X3Byb2R1Y3RfbmFtZSJdKTsKIAkJCWlmKCRtYXBBbGwpCiAJCQl7CiAJCQkJaWYoaW50dmFsKCRwb3N0WyJpZCJdKT4wKQogCQkJCQlNTV9MaW1lTGlnaHRQcm9kdWN0OjpyZW1vdmVFeGlzdGluZ1Byb2R1Y3RNYXBwaW5ncygkcG9zdFsibGltZWxpZ2h0X3Byb2R1Y3RfaWQiXSwgJHBvc3RbImlkIl0pOwogCQkJCQoJCQkgCSRsaW1lTGlnaHRQcm9kdWN0LT5zZXRMaW1lTGlnaHRDYW1wYWlnbklkKDApOwoJCQkgCSRsaW1lTGlnaHRQcm9kdWN0LT5zZXRMaW1lTGlnaHRDYW1wYWlnbk5hbWUoIkFMTCIpOwogCQkJfQogCQkJZWxzZSAKIAkJCXsKCQkJIAkkbGltZUxpZ2h0UHJvZHVjdC0+c2V0TGltZUxpZ2h0Q2FtcGFpZ25JZCgkcG9zdFsibGltZWxpZ2h0X2NhbXBhaWduX2lkIl0pOwoJCQkgCSRsaW1lTGlnaHRQcm9kdWN0LT5zZXRMaW1lTGlnaHRDYW1wYWlnbk5hbWUoJHBvc3RbImxpbWVsaWdodF9jYW1wYWlnbl9uYW1lIl0pOwogCQkJfQoJCQlyZXR1cm4gJGxpbWVMaWdodFByb2R1Y3QtPmNvbW1pdERhdGEoKTsKCSAJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHJlbW92ZUxpbWVMaWdodFByb2R1Y3QoJHBvc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkKCQl7CgkJCSRsaW1lTGlnaHRQcm9kdWN0ID0gbmV3IE1NX0xpbWVMaWdodFByb2R1Y3QoJHBvc3RbImlkIl0sIGZhbHNlKTsKCQkJJHJlc3VsdCA9ICRsaW1lTGlnaHRQcm9kdWN0LT5kZWxldGUoKTsKCQkJCgkJCWlmKCRyZXN1bHQpIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0gCgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJlbW92aW5nIExpbWUgTGlnaHQgcHJvZHVjdCBtYXBwaW5nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBMaW1lIExpZ2h0IHByb2R1Y3QgbWFwcGluZy4gTm8gSUQgc3BlY2lmaWVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldExpbWVMaWdodFByb2R1Y3RzKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJjYW1wYWlnbl9pZCJdKSkKCQl7CgkJCSRsaW1lTGlnaHRTZXJ2aWNlID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRQYXltZW50U2VydmljZShNTV9QYXltZW50U2VydmljZTo6JExJTUVMSUdIVF9TRVJWSUNFX1RPS0VOKTsKCQkJcmV0dXJuIE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGltZUxpZ2h0U2VydmljZS0+Z2V0UHJvZHVjdHNCeUNhbXBhaWduKCRwb3N0WyJjYW1wYWlnbl9pZCJdKSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgcHJvZHVjdHMuIE5vIENhbXBhaWduIElEIHNwZWNpZmllZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0TGltZUxpZ2h0UHJvZHVjdERlc2NyaXB0aW9uKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJwcm9kdWN0X2lkIl0pKQoJCXsKCQkJJGxpbWVMaWdodFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldFBheW1lbnRTZXJ2aWNlKE1NX1BheW1lbnRTZXJ2aWNlOjokTElNRUxJR0hUX1NFUlZJQ0VfVE9LRU4pOwoJCQlyZXR1cm4gJGxpbWVMaWdodFNlcnZpY2UtPmdldFByb2R1Y3REZXNjcmlwdGlvbigkcG9zdFsicHJvZHVjdF9pZCJdKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBwcm9kdWN0IGluZm9ybWF0aW9uLiBObyBwcm9kdWN0IElEIHNwZWNpZmllZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0TU1Qcm9kdWN0RGVzY3JpcHRpb24oJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbIm1tX3Byb2R1Y3RfaWQiXSkpCgkJewoJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRwb3N0WyJtbV9wcm9kdWN0X2lkIl0pOwoJCQkKCQkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJewoJCQkJJG1tUHJvZHVjdERlc2NyaXB0aW9uID0gJHByb2R1Y3QtPmdldEJpbGxpbmdEZXNjcmlwdGlvbigpLiIgIjsKCQkJCSAKCQkJCWlmKCRwcm9kdWN0LT5oYXNUcmlhbCgpKQoJCQkJewoJCQkJCSRtbVByb2R1Y3REZXNjcmlwdGlvbiAuPSBNTV9VdGlsczo6Z2V0SWNvbignY2xvY2stbycsICdiZWlnZScsICcxLjNlbScsICcycHgnLCAnSGFzIFRyaWFsJywgJ21hcmdpbi1yaWdodDo1cHg7Jyk7CgkJCQl9CgkJCQkgCgkJCQlpZigkcHJvZHVjdC0+aXNSZWN1cnJpbmcoKSkKCQkJCXsKCQkJCQlpZigkcHJvZHVjdC0+ZG9MaW1pdFBheW1lbnRzKCkpCgkJCQkJewoJCQkJCQkkbW1Qcm9kdWN0RGVzY3JpcHRpb24gLj0gTU1fVXRpbHM6OmdldEljb24oJ2NhbGVuZGFyLW8nLCAnYmVpZ2UnLCAnMS4zZW0nLCAnMnB4JywgJ1BheW1lbnQgUGxhbicsICdtYXJnaW4tcmlnaHQ6NXB4OycpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkbW1Qcm9kdWN0RGVzY3JpcHRpb24gLj0gTU1fVXRpbHM6OmdldEljb24oJ3JlZnJlc2gnLCAnYmVpZ2UnLCAnMS4zZW0nLCAnMnB4JywgJ1N1YnNjcmlwdGlvbicsICdtYXJnaW4tcmlnaHQ6NXB4OycpOwoJCQkJCX0KCQkJCX0KCQkJCSAKCQkJCWlmKCRwcm9kdWN0LT5pc1NoaXBwYWJsZSgpKQoJCQkJewoJCQkJCSRtbVByb2R1Y3REZXNjcmlwdGlvbiAuPSBNTV9VdGlsczo6Z2V0SWNvbigndHJ1Y2snLCAnYmVpZ2UnLCAnMS4zZW0nLCAnMnB4JywgJ1JlcXVpcmVzIFNoaXBwaW5nJywgJ21hcmdpbi1yaWdodDo1cHg7Jyk7CgkJCQl9CgkJCQkgCgkJCQlpZigkcHJvZHVjdC0+Z2V0U2t1KCkgIT0gIiIpCgkJCQl7CgkJCQkJJG1tUHJvZHVjdERlc2NyaXB0aW9uIC49IE1NX1V0aWxzOjpnZXRJY29uKCdiYXJjb2RlJywgJ2JlaWdlJywgJzEuM2VtJywgJzJweCcsICJTS1UgWyIuJHByb2R1Y3QtPmdldFNrdSgpLiJdIiwgJ21hcmdpbi1yaWdodDo1cHg7Jyk7CgkJCQl9CgkJCQkKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG1tUHJvZHVjdERlc2NyaXB0aW9uKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIE1lbWJlck1vdXNlIHByb2R1Y3QgZGVzY3JpcHRpb24uIEludmFsaWQgcHJvZHVjdCBJRCAneyRwb3N0WyJtbV9wcm9kdWN0X2lkIl19Jy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIE1lbWJlck1vdXNlIHByb2R1Y3QgZGVzY3JpcHRpb24uIE5vIHByb2R1Y3QgSUQgc3BlY2lmaWVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KfQo=', 0, '2018-11-21 06:38:53'),
(5, 'smarttagutil', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCiBjbGFzcyBNTV9TbWFydFRhZ1V0aWwgCiB7CiAJLy8gdG8gYmUgdXNlZCB3aGVuIGNvbnRleHQgaXMgZGVyaXZlZCBmcm9tIHNvbWV0aGluZyB0aGF0IGlzIG5vdCBvZiBnbG9iYWwgY29udGV4dC4KIAlwdWJsaWMgc3RhdGljICRjb250ZXh0ID0gbnVsbDsKIAkKIAlwdWJsaWMgc3RhdGljICRBVkFJTEFCTEVfU01BUlRfVEFHU19DQUNIRV9LRVkgPSAibW0tYXZhaWxhYmxlLXNtYXJ0LXRhZ3MiOwogCQogCXByaXZhdGUgc3RhdGljICR0YWdzUmVnaXN0ZXJlZCA9IGZhbHNlOwogCQogCQoJcHVibGljIGZ1bmN0aW9uIHJlZ2lzdGVyU21hcnRUYWdzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJaWYgKCFzZWxmOjokdGFnc1JlZ2lzdGVyZWQpCgkJewoJCQkkc21hcnR0YWdzID0gc2VsZjo6Z2V0U21hcnRUYWdzKCk7CgkJCQoJCQkkZG9udFRleHR1cml6ZSA9IGFycmF5KCk7CgkJCWZvcmVhY2goJHNtYXJ0dGFncyBhcyAkc21hcnR0YWcpCgkJCXsKCQkJCSRkb250VGV4dHVyaXplW10gPSAkc21hcnR0YWctPm5hbWU7CgkJCQlhZGRfc2hvcnRjb2RlKCRzbWFydHRhZy0+bmFtZSwgYXJyYXkoJHRoaXMsICdhZGRTaG9ydENvZGUnKSk7CgkJCX0KCQkJCgkJCWFkZF9maWx0ZXIoJ25vX3RleHR1cml6ZV9zaG9ydGNvZGVzJywgZnVuY3Rpb24oJGxpc3QpIHVzZSAoJGRvbnRUZXh0dXJpemUpIHsgCgkJCQkvL1RPRE86IHdoeSBkb2VzIHRoaXMgc2hvdyB1cCBtdWx0aXBsZSB0aW1lcz8KCQkJCSRsaXN0ICs9ICRkb250VGV4dHVyaXplOyAKCQkJCXJldHVybiAkbGlzdDsKCQkJfSApOwoJCQlzZWxmOjokdGFnc1JlZ2lzdGVyZWQgPSB0cnVlOwoJCX0KCX0KIAkKCQoJcHVibGljIGZ1bmN0aW9uIGFkZFNob3J0Q29kZSgkYXR0cywgJGNvbnRlbnQ9bnVsbCwgJGNvZGU9IiIpCgl7CgkJcmV0dXJuICR0aGlzLT5wcm9jZXNzKCRjb250ZW50LCAkY29kZSwgJGF0dHMpOwoJfQoJCiAJLyoKIAkgKiBAcGFyYW0gJGNvbnRlbnQgaXMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgZGF0YSB0byBiZSBwYXJzZWQgZm9yIHRhZ3MuCiAJICogQHBhcmFtICRjb250ZXh0IGlzIGFuIGFzc29jaWF0aXZlIGFycmF5IHRvIGJlIGJvdW5kIHdpdGggdGhlIGVuZ2luZSBmb3IgcHJvY2Vzc2luZy4KIAkgKiBAcmV0dXJucyBmaWx0ZXJlZCBzbWFydHRhZyBjb250ZW50LgogCSAqLwogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc0NvbnRlbnQoJGNvbnRlbnQsIE1NX0NvbnRleHQgJGNvbnRleHQpCiAJewoJIAkkc21hcnRUYWdVdGlsID0gbmV3IE1NX1NtYXJ0VGFnVXRpbCgpOwoJIAkkc21hcnRUYWdVdGlsLT5yZWdpc3RlclNtYXJ0VGFncygpOwoJIAkKIAkJc2VsZjo6JGNvbnRleHQgPSAkY29udGV4dDsKIAkJcmV0dXJuIE1NX1RhZ1Byb2Nlc3Nvcjo6cHJvY2Vzc1NtYXJ0VGFncygkY29udGVudCk7CiAJfQogCQoJCiAJLyoqCiAJICogQHJldHVybiBNTV9Vc2VyCiAJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCRpZ25vcmVDb250ZXh0PWZhbHNlKQoJewoJCWdsb2JhbCAkY3VycmVudF91c2VyOwoJCSR1c2VyID0gbmV3IE1NX1VzZXIoKTsKCQkkdXNlcklkID0gMDsKCQkKCQkvLyBjaGVjayBTbWFydFRhZyBjb250ZXh0CgkJaWYoISRpZ25vcmVDb250ZXh0KQoJCXsKCQkJaWYoc2VsZjo6JGNvbnRleHQgaW5zdGFuY2VvZiBNTV9Db250ZXh0KQoJCQl7CgkJCQlpZihzZWxmOjokY29udGV4dC0+Z2V0VXNlcigpICYmIHNlbGY6OiRjb250ZXh0LT5nZXRVc2VyKCktPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkdXNlciA9IHNlbGY6OiRjb250ZXh0LT5nZXRVc2VyKCk7CgkJCQl9CgkJCX0KCQkKCQkJaWYoIWlzX251bGwoJHVzZXIpICYmICR1c2VyIGluc3RhbmNlb2YgTU1fVXNlciAmJiAkdXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gJHVzZXI7CgkJCX0KCQl9CgkJCgkJLy8gY2hlY2sgaWYgYSB1c2VyIGlzIGN1cnJlbnRseSBsb2dnZWQgaW4KCQlpZihpc191c2VyX2xvZ2dlZF9pbigpKQoJCXsKCQkJaWYoTU1fRW1wbG95ZWU6OmlzRW1wbG95ZWUoJGN1cnJlbnRfdXNlci0+SUQpKQoJCQl7CgkJCQkkdXNlciA9IE1NX1ByZXZpZXc6OmdldERhdGEoKS0+Z2V0VXNlcigpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHVzZXIgPSBNTV9Vc2VyOjpnZXRDdXJyZW50V1BVc2VyKCk7CgkJCX0KCQkJCgkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXJldHVybiAkdXNlcjsKCQkJfQoJCX0KCQkKCQkvLyBjaGVjayBpZiB0aGVyZSdzIGEgdHJhbnNhY3Rpb24ga2V5CgkJaWYoaXNzZXQoJF9SRVFVRVNUW01NX1Nlc3Npb246OiRLRVlfVFJBTlNBQ1RJT05fS0VZXSkpCgkJewoJCQkkdHJhbnNSZWYgPSBNTV9UcmFuc2FjdGlvbktleTo6Z2V0VHJhbnNhY3Rpb25CeUtleSgkX1JFUVVFU1RbTU1fU2Vzc2lvbjo6JEtFWV9UUkFOU0FDVElPTl9LRVldKTsKCQkJJHVzZXJJZCA9ICgkdHJhbnNSZWYtPmlzVmFsaWQoKSkgPyAkdHJhbnNSZWYtPmdldFVzZXJJZCgpIDogMDsKCQkJCgkJCWlmKCR1c2VySWQgIT0gMCkKCQkJewoJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdXNlcklkKTsKCQkJCQkKCQkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJcmV0dXJuICR1c2VyOwoJCQkJfQoJCQl9CgkJfQoJCQoJCS8vIGNoZWNrIGlmIHRoZXJlJ3MgYSB1c2VyIElEIGluIHRoZSBzZXNzaW9uCgkJaWYoTU1fU2Vzc2lvbjo6dmFsdWUoTU1fU2Vzc2lvbjo6JEtFWV9MQVNUX1VTRVJfSUQpICE9PSBmYWxzZSkKCQl7CgkJCSR1c2VySWQgPSBNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xBU1RfVVNFUl9JRCk7CgkJCQoJCQlpZigkdXNlcklkICE9IDApCgkJCXsKCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHVzZXJJZCk7CgkJCQkJCgkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCXJldHVybiAkdXNlcjsKCQkJCX0KCQkJfQoJCX0KCQkKCQlyZXR1cm4gJHVzZXI7Cgl9CgkKCQoJLyoqCgkgKiBAcmV0dXJuIE1NX09yZGVyCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q3VycmVudE9yZGVyKCkKCXsKCQkvLyBjaGVjayBTbWFydFRhZyBjb250ZXh0CgkJaWYoc2VsZjo6JGNvbnRleHQgaW5zdGFuY2VvZiBNTV9Db250ZXh0KQoJCXsKCQkJaWYoc2VsZjo6JGNvbnRleHQtPmdldE9yZGVyKCkgJiYgc2VsZjo6JGNvbnRleHQtPmdldE9yZGVyKCktPmlzVmFsaWQoKSkKCQkJewoJCQkJJG9yZGVyID0gc2VsZjo6JGNvbnRleHQtPmdldE9yZGVyKCk7CgkJCX0KCQl9CgkJCgkJaWYoaXNzZXQoJG9yZGVyKSAmJiAhaXNfbnVsbCgkb3JkZXIpICYmICRvcmRlciBpbnN0YW5jZW9mIE1NX09yZGVyICYmICRvcmRlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuICRvcmRlcjsKCQl9CgkJCgkJaWYoaXNzZXQoJF9SRVFVRVNUW01NX1Nlc3Npb246OiRLRVlfVFJBTlNBQ1RJT05fS0VZXSkpCgkJewoJCQkkdHJhbnNSZWYgPSBNTV9UcmFuc2FjdGlvbktleTo6Z2V0VHJhbnNhY3Rpb25CeUtleSgkX1JFUVVFU1RbTU1fU2Vzc2lvbjo6JEtFWV9UUkFOU0FDVElPTl9LRVldKTsKCQkJJG9yZGVySWQgPSAoJHRyYW5zUmVmLT5pc1ZhbGlkKCkpID8gJHRyYW5zUmVmLT5nZXRPcmRlcklkKCkgOiAwOwoJCQkJCgkJCWlmKGludHZhbCgkb3JkZXJJZCkgPiAwKQoJCQl7CgkJCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySWQpOwoJCQkJCQoJCQkJaWYoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJcmV0dXJuICRvcmRlcjsKCQkJCX0KCQkJfQoJCX0KCQkKCQkvLyBjaGVjayBpZiB0aGVyZSdzIGFuIG9yZGVyIElEIGluIHRoZSBzZXNzaW9uCgkJaWYoTU1fU2Vzc2lvbjo6dmFsdWUoTU1fU2Vzc2lvbjo6JEtFWV9MQVNUX09SREVSX0lEKSAhPT0gZmFsc2UpCgkJewoJCQkkb3JkZXJJZCA9IE1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9PUkRFUl9JRCk7CgkJCQkKCQkJaWYoaW50dmFsKCRvcmRlcklkKSA+IDApCgkJCXsKCQkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJZCk7CgkJCQkJCgkJCQlpZigkb3JkZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQlyZXR1cm4gJG9yZGVyOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fT3JkZXIoKTsKCX0KCQoJCgkvKioKCSAqIEByZXR1cm4gTU1fUHJvZHVjdAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEN1cnJlbnRQcm9kdWN0KCkKCXsKCQkvLyBjaGVjayBTbWFydFRhZyBjb250ZXh0CgkJaWYoc2VsZjo6JGNvbnRleHQgaW5zdGFuY2VvZiBNTV9Db250ZXh0KQoJCXsKCQkJaWYoc2VsZjo6JGNvbnRleHQtPmdldFByb2R1Y3QoKSAmJiBzZWxmOjokY29udGV4dC0+Z2V0UHJvZHVjdCgpLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRwcm9kdWN0ID0gc2VsZjo6JGNvbnRleHQtPmdldFByb2R1Y3QoKTsKCQkJfQoJCX0KCQoJCWlmKGlzc2V0KCRwcm9kdWN0KSAmJiAhaXNfbnVsbCgkcHJvZHVjdCkgJiYgJHByb2R1Y3QgaW5zdGFuY2VvZiBNTV9Qcm9kdWN0ICYmICRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gJHByb2R1Y3Q7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUHJvZHVjdCgpOwoJfQoJCgkKCS8qKgoJICogQHJldHVybiBNTV9BZmZpbGlhdGVWTwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEN1cnJlbnRBZmZpbGlhdGVWTygpCgl7CgkJLy8gY2hlY2sgU21hcnRUYWcgY29udGV4dAoJCWlmKHNlbGY6OiRjb250ZXh0IGluc3RhbmNlb2YgTU1fQ29udGV4dCkKCQl7CgkJCWlmKHNlbGY6OiRjb250ZXh0LT5nZXRBZmZpbGlhdGUoKSAmJiBzZWxmOjokY29udGV4dC0+Z2V0QWZmaWxpYXRlKCktPmlzVmFsaWQoKSkKCQkJewoJCQkJJGFmZmlsaWF0ZSA9IHNlbGY6OiRjb250ZXh0LT5nZXRBZmZpbGlhdGUoKTsKCQkJfQoJCX0KCQoJCWlmKGlzc2V0KCRhZmZpbGlhdGUpICYmICFpc19udWxsKCRhZmZpbGlhdGUpICYmICRhZmZpbGlhdGUgaW5zdGFuY2VvZiBNTV9BZmZpbGlhdGVWTyAmJiAkYWZmaWxpYXRlLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gJGFmZmlsaWF0ZTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9BZmZpbGlhdGVWTygpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3MoJGNvbnRlbnQsICRjb2RlLCAkYXR0cykKIAl7CiAJCWdsb2JhbCAkY3VycmVudF91c2VyOwogCQkKIAkJLy8gcHJvY2VzcyBEZWNpc2lvbiB0YWdzCiAJCWlmKE1NX0RlY2lzaW9uVGFnUHJvY2Vzc29yOjppc0RlY2lzaW9uU21hcnRUYWcoc3RydG9sb3dlcigkY29kZSkpKQogCQl7CiAJCQlyZXR1cm4gTU1fRGVjaXNpb25UYWdQcm9jZXNzb3I6OnByb2Nlc3NTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSwgJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CiAJCX0KIAkJCiAJCS8vIHByb2Nlc3MgQ29udGVudCB0YWdzCiAJCWlmKE1NX0NvbnRlbnRUYWdQcm9jZXNzb3I6OmlzQ29udGVudFNtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpKSkKIAkJewogCQkJcmV0dXJuIE1NX0NvbnRlbnRUYWdQcm9jZXNzb3I6OnByb2Nlc3NTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSwgJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CiAJCX0KIAkJCiAJCS8vIHByb2Nlc3MgQ29yZSBQYWdlIHRhZ3MKIAkJaWYoTU1fQ29yZVBhZ2VUYWdQcm9jZXNzb3I6OmlzQ29yZVBhZ2VTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSkpCiAJCXsKIAkJCXJldHVybiBNTV9Db3JlUGFnZVRhZ1Byb2Nlc3Nvcjo6cHJvY2Vzc1NtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpLCAkY29udGVudCwgJGF0dHMsICRjb2RlKTsKIAkJfQogCQkKIAkJLy8gcHJvY2VzcyBGb3JtIHRhZ3MKIAkJaWYoTU1fRm9ybVRhZ1Byb2Nlc3Nvcjo6aXNGb3JtU21hcnRUYWcoc3RydG9sb3dlcigkY29kZSkpKQogCQl7CiAJCQlyZXR1cm4gTU1fRm9ybVRhZ1Byb2Nlc3Nvcjo6cHJvY2Vzc1NtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpLCAkY29udGVudCwgJGF0dHMsICRjb2RlKTsKIAkJfQogCQkKIAkJLy8gcHJvY2VzcyBFbXBsb3llZSB0YWdzCiAJCWlmKE1NX0VtcGxveWVlVGFnUHJvY2Vzc29yOjppc0VtcGxveWVlU21hcnRUYWcoc3RydG9sb3dlcigkY29kZSkpKQogCQl7CiAJCQlyZXR1cm4gTU1fRW1wbG95ZWVUYWdQcm9jZXNzb3I6OnByb2Nlc3NTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSwgJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CiAJCX0KIAkJCiAJCS8vIHByb2Nlc3MgTWVtYmVyIHRhZ3MKIAkJaWYoTU1fTWVtYmVyVGFnUHJvY2Vzc29yOjppc01lbWJlclNtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpKSkKIAkJewogCQkJcmV0dXJuIE1NX01lbWJlclRhZ1Byb2Nlc3Nvcjo6cHJvY2Vzc1NtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpLCAkY29udGVudCwgJGF0dHMsICRjb2RlKTsKIAkJfQogCQkKIAkJLy8gcHJvY2VzcyBPcmRlciB0YWdzCiAJCWlmKE1NX09yZGVyVGFnUHJvY2Vzc29yOjppc09yZGVyU21hcnRUYWcoc3RydG9sb3dlcigkY29kZSkpKQogCQl7CiAJCQlyZXR1cm4gTU1fT3JkZXJUYWdQcm9jZXNzb3I6OnByb2Nlc3NTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSwgJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CiAJCX0KIAkJCiAJCS8vIHByb2Nlc3MgUHJvZHVjdCB0YWdzCiAJCWlmKE1NX1Byb2R1Y3RUYWdQcm9jZXNzb3I6OmlzUHJvZHVjdFNtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpKSkKIAkJewogCQkJcmV0dXJuIE1NX1Byb2R1Y3RUYWdQcm9jZXNzb3I6OnByb2Nlc3NTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSwgJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CiAJCX0KIAkJCiAJCS8vIHByb2Nlc3MgQWZmaWxpYXRlIHRhZ3MKIAkJaWYoTU1fQWZmaWxpYXRlVGFnUHJvY2Vzc29yOjppc0FmZmlsaWF0ZVNtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpKSkKIAkJewogCQkJcmV0dXJuIE1NX0FmZmlsaWF0ZVRhZ1Byb2Nlc3Nvcjo6cHJvY2Vzc1NtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpLCAkY29udGVudCwgJGF0dHMsICRjb2RlKTsKIAkJfQogCQkKIAkJLy8gcHJvY2VzcyBFcnJvciB0YWdzCiAJCWlmKE1NX0Vycm9yVGFnUHJvY2Vzc29yOjppc0Vycm9yU21hcnRUYWcoc3RydG9sb3dlcigkY29kZSkpKQogCQl7CiAJCQlyZXR1cm4gTU1fRXJyb3JUYWdQcm9jZXNzb3I6OnByb2Nlc3NTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSwgJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CiAJCX0KIAkJCiAJCS8vIHByb2Nlc3MgQ3VzdG9tIEZpZWxkIHRhZ3MKIAkJaWYoTU1fQ3VzdG9tRmllbGRUYWdQcm9jZXNzb3I6OmlzQ3VzdG9tRmllbGRTbWFydFRhZyhzdHJ0b2xvd2VyKCRjb2RlKSkpCiAJCXsKIAkJCXJldHVybiBNTV9DdXN0b21GaWVsZFRhZ1Byb2Nlc3Nvcjo6cHJvY2Vzc1NtYXJ0VGFnKHN0cnRvbG93ZXIoJGNvZGUpLCAkY29udGVudCwgJGF0dHMsICRjb2RlKTsKIAkJfQogCQkgCQkKCQlyZXR1cm4gIlt7JGNvZGV9XSBpcyBub3QgYSB2YWxpZCBTbWFydFRhZyI7CiAJfQogCQogCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2F2ZVRhZ3MoJGNvbnRlbnQsICRwb3N0SWQpCiAJewogCQlnbG9iYWwgJHdwZGI7CiAJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9QT1NUU19BQ0NFU1MuIiB3aGVyZSBwb3N0X2lkPSd7JHBvc3RJZH0nIGFuZCBpc19zbWFydF9jb250ZW50PScxJyI7CiAJCSR3cGRiLT5xdWVyeSgkc3FsKTsKIAkJCgkgCSRwYXR0ZXJuID0gIlxbW15cXV0rXF0iOwoJICAgIHByZWdfbWF0Y2hfYWxsKCcvJy4kcGF0dGVybi4nLycsICRjb250ZW50LCAkbWF0Y2hlcyk7CgoJICAgIGlmKGlzc2V0KCRtYXRjaGVzWzBdKSAmJiBjb3VudCgkbWF0Y2hlc1swXSk+MCkKCSAgICB7CgkJCWZvcigkaT0wOyAkaTxjb3VudCgkbWF0Y2hlc1swXSk7ICRpKyspCgkJCXsKCQkJCXNlbGY6OmFkZFNob3J0Q29kZUFjY2VzcyhzaG9ydGNvZGVfcGFyc2VfYXR0cygkbWF0Y2hlc1swXVskaV0pLCAkcG9zdElkKTsKCQkJfQoJCX0KIAl9CiAJCiAJCiAJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gYWRkU2hvcnRDb2RlQWNjZXNzKCRhdHRzLCAkcG9zdElkKQogCXsKIAkJZ2xvYmFsICR3cGRiOwogCQkKIAkJJHR5cGUgPSAiIjsKIAkJJHR5cGVJZCA9IDA7CiAJCSRkYXlzID0gMDsKIAkJJHF1ZXVlID0gYXJyYXkoKTsKIAkJaWYoaXNfYXJyYXkoJGF0dHMpKQogCQl7CiAJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKIAkJCXsKIAkJCQlpZihwcmVnX21hdGNoKCIvKG1lbWJlcnNoaXBpZHxoYXNidW5kbGUpLyIsIHN0cnRvbG93ZXIoJGspKSkKIAkJCQl7CiAJCQkJCXN3aXRjaCgkaykKIAkJCQkJewogCQkJCQkJY2FzZSAibWVtYmVyc2hpcGlkIjoKIAkJCQkJCQkkdHlwZSA9IE1NX1RZUEVfTUVNQkVSU0hJUF9MRVZFTDsKIAkJCQkJCQkkdHlwZUlkID0gaW50dmFsKHByZWdfcmVwbGFjZSgiL1teMC05XSsvIiwgIiIsICR2KSk7CiAJCQkJCQkJYnJlYWs7CiAJCQkJCQljYXNlICJoYXNidW5kbGUiOgogCQkJCQkJCSR0eXBlID0gTU1fVFlQRV9CVU5ETEU7CiAJCQkJCQkJJHR5cGVJZCA9IGludHZhbChwcmVnX3JlcGxhY2UoIi9bXjAtOV0rLyIsICIiLCAkdikpOwogCQkJCQkJCWJyZWFrOwogCQkJCQl9CiAJCQkJfQogCQkJCWVsc2UgaWYocHJlZ19tYXRjaCgiLyhkYXlzYXNtZW1iZXJ8ZGF5c3dpdGhidW5kbGUpLyIsIHN0cnRvbG93ZXIoJHYpKSkKIAkJCQl7CiAJCQkJCSRkYXlzID0gaW50dmFsKHByZWdfcmVwbGFjZSgiL1teMC05XSsvIiwgIiIsICR2KSk7CiAJCQkJfQogCQkJfQogCQkJCiAJCQlpZigkdHlwZUlkPjAgJiYgJGRheXM+PTAgJiYgJHBvc3RJZD4wICYmICgkdHlwZSA9PSBNTV9UWVBFX01FTUJFUlNISVBfTEVWRUwgfHwgJHR5cGUgPT0gTU1fVFlQRV9CVU5ETEUpKQogCQkJewogCQkJCSRrZXkgPSAkdHlwZUlkLiJfIi4kdHlwZS4iXyIuJHBvc3RJZC4iXyIuJGRheXM7CiAJCQkJaWYoIWlzc2V0KCRxdWV1ZVska2V5XSkpCiAJCQkJewogCQkJCQkkcXVldWVbJGtleV0gPSAxOwoJIAkJCQkkc3FsID0gIklOU0VSVCBJTlRPICIuTU1fVEFCTEVfUE9TVFNfQUNDRVNTLiIgU0VUIAoJIAkJCQkJCQlwb3N0X2lkPSd7JHBvc3RJZH0nLCAKCSAJCQkJCQkJYWNjZXNzX3R5cGUgPSAneyR0eXBlfScsCgkgCQkJCQkJCWFjY2Vzc19pZD0neyR0eXBlSWR9JywKCSAJCQkJCQkJZGF5cz0neyRkYXlzfScsCgkgCQkJCQkJCWlzX3NtYXJ0X2NvbnRlbnQ9JzEnCQkJCgkgCQkJCSI7CgkgCQkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKIAkJCQl9CiAJCQl9CiAJCX0KIAl9CiAJCiAJCiAJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRTbWFydFRhZ3NSZWdleCgpCiAJewogCQlpZiAoIXNlbGY6OiR0YWdzUmVnaXN0ZXJlZCkKIAkJewogCQkJJHNtYXJ0VGFnVXRpbCA9IG5ldyBNTV9TbWFydFRhZ1V0aWwoKTsKIAkJCSRzbWFydFRhZ1V0aWwtPnJlZ2lzdGVyU21hcnRUYWdzKCk7CiAJCX0KIAkJCQogCQkkc21hcnR0YWdzID0gc2VsZjo6Z2V0U21hcnRUYWdzKCk7CiAJCQkKIAkJaWYgKGVtcHR5KCRzbWFydHRhZ3MpIHx8ICFpc19hcnJheSgkc21hcnR0YWdzKSkKIAkJewogCQkJcmV0dXJuIGZhbHNlOwogCQl9CiAJCQkKIAkJJHJlZ2V4ID0gIiI7CiAJCSRmaXJzdEFwcGVuZCA9IHRydWU7CiAJCWZvcmVhY2ggKCRzbWFydHRhZ3MgYXMgJHN0T2JqKQogCQl7CiAJCQlpZiAoJGZpcnN0QXBwZW5kKQogCQkJewogCQkJCSRmaXJzdEFwcGVuZCA9IGZhbHNlOwogCQkJfQogCQkJZWxzZSAKIAkJCXsKIAkJCQkkcmVnZXguPSJ8IjsKIAkJCX0KIAkJCSRyZWdleC49ICRzdE9iai0+bmFtZTsKIAkJfQogCQkJCiAJCXJldHVybiAkcmVnZXg7CiAJfQogCQogCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0U21hcnRUYWdzKCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkJCiAJCSR0YWdzQ2FjaGVkID0gZmFsc2U7CiAJCSRzbWFydHRhZ3MgPSBNTV9PYmplY3RDYWNoZTo6Z2V0KHNlbGY6OiRBVkFJTEFCTEVfU01BUlRfVEFHU19DQUNIRV9LRVksJHRhZ3NDYWNoZWQpOwogCQkKIAkJaWYgKCEkdGFnc0NhY2hlZCkKIAkJewogCQkJJHNtYXJ0dGFncyA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1NNQVJUVEFHUyk7CiAJCQkKIAkJCWlmKGlzX251bGwoJHNtYXJ0dGFncykgfHwgZW1wdHkoJHNtYXJ0dGFncykpCiAJCQl7CiAJCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfU01BUlRUQUdTLiIgV0hFUkUgYXV0b2xvYWQ9MSI7CiAJCQkJJHNtYXJ0dGFncyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsJCiAJCQkJTU1fT3B0aW9uVXRpbHM6OnNldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfU01BUlRUQUdTLCRzbWFydHRhZ3MpOwogCQkJfQogCQkJTU1fT2JqZWN0Q2FjaGU6OnNldChzZWxmOjokQVZBSUxBQkxFX1NNQVJUX1RBR1NfQ0FDSEVfS0VZLCRzbWFydHRhZ3MpOwogCQl9CiAJCXJldHVybiAkc21hcnR0YWdzOwogCX0KIH0K', 0, '2018-11-21 06:38:53'),
(6, 'smarttaggroup', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fU21hcnRUYWdHcm91cCBleHRlbmRzIE1NX0VudGl0eQp7CQoJcHJpdmF0ZSAkbmFtZSA9ICIiOwoJcHJpdmF0ZSAkcGFyZW50SWQgPSAwOwoJcHJpdmF0ZSAkY2hpbGRyZW4gPSBhcnJheSgpOwoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0RGF0YSgpIHsKCQkvLyBkbyBub3RoaW5nCgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiBjb21taXREYXRhKCkgewoJCS8vIGRvIG5vdGhpbmcKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCXRyeSAKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPm5hbWUgPSAkZGF0YS0+bmFtZTsKCQkJJHRoaXMtPnBhcmVudElkID0gJGRhdGEtPnBhcmVudF9pZDsKCQkJCgkJCS8vIGdldCBjaGlsZCBncm91cHMKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfU01BUlRUQUdfR1JPVVBTLiIgV0hFUkUgcGFyZW50X2lkPSd7JHRoaXMtPmlkfScgQU5EIHZpc2libGU9JzEnIE9SREVSIEJZIG5hbWUgYXNjIjsKCQkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCQoJCQlpZigkcm93cykgCgkJCXsKCQkJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQkJCXsKCQkJCQkkZ3JvdXAgPSBuZXcgTU1fU21hcnRUYWdHcm91cCgpOwoJCQkJCSRncm91cC0+c2V0RGF0YSgkcm93KTsKCQkJCQkKCQkJCQlpZigkZ3JvdXAtPmlzVmFsaWQoKSkgewoJCQkJCQlhcnJheV9wdXNoKCR0aGlzLT5jaGlsZHJlbiwgJGdyb3VwKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCS8vIGdldCBjaGlsZCBTbWFydFRhZ3MKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfU01BUlRUQUdTLiIgV0hFUkUgZ3JvdXBfaWQ9J3skdGhpcy0+aWR9JyBBTkQgdmlzaWJsZT0nMScgT1JERVIgQlkgbmFtZSBhc2MiOwoJCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkJCgkJCWlmKCRyb3dzKSAKCQkJewoJCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQkJewoJCQkJCSRzbWFydFRhZyA9IG5ldyBNTV9TbWFydFRhZygpOwoJCQkJCSRzbWFydFRhZy0+c2V0RGF0YSgkcm93KTsKCQkJCQkKCQkJCQlpZigkc21hcnRUYWctPmlzVmFsaWQoKSkgewoJCQkJCQlhcnJheV9wdXNoKCR0aGlzLT5jaGlsZHJlbiwgJHNtYXJ0VGFnKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIHsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVIdG1sKCkgCgl7CgkJJGh0bWwgPSAiPGRpdiBpZD1cIm1tLXNtYXJ0dGFnLWdyb3VwIi4kdGhpcy0+aWQuIlwiIHN0eWxlPVwibWFyZ2luLWJvdHRvbTo2cHg7IGZvbnQtc2l6ZTogMTJweDsgY3Vyc29yOnBvaW50ZXI7XCIgb25jbGljaz1cInN0bF9qcy50b2dnbGVTbWFydFRhZ0dyb3VwKCciLiR0aGlzLT5pZC4iJyk7XCI+IjsKCQkkaHRtbCAuPSAiPHNwYW4gaWQ9XCJtbS1zbWFydHRhZy1ncm91cCIuJHRoaXMtPmlkLiItY2xvc2VkLWltZ1wiPiIuTU1fVXRpbHM6OmdldEljb24oJ3BsdXMtc3F1YXJlJywgJ2JsdWUnLCAnMS4yZW0nLCAnMXB4JykuIjwvc3Bhbj4gIjsKCQkkaHRtbCAuPSAiPHNwYW4gaWQ9XCJtbS1zbWFydHRhZy1ncm91cCIuJHRoaXMtPmlkLiItb3Blbi1pbWdcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPiIuTU1fVXRpbHM6OmdldEljb24oJ21pbnVzLXNxdWFyZScsICdibHVlJywgJzEuMmVtJywgJzFweCcpLiI8L3NwYW4+ICI7CgkJJGh0bWwgLj0gJHRoaXMtPm5hbWU7CgkJJGh0bWwgLj0gIjwvZGl2PiI7CgkJCgkJaWYoY291bnQoJHRoaXMtPmNoaWxkcmVuKSA+IDApIAoJCXsKCQkJJGh0bWwgLj0gIjxkaXYgaWQ9XCJtbS1zbWFydHRhZy1ncm91cCIuJHRoaXMtPmlkLiItY2hpbGRyZW5cIiBzdHlsZT1cImRpc3BsYXk6bm9uZTsgbWFyZ2luLWxlZnQ6MTBweDsgbWFyZ2luLWJvdHRvbTo2cHg7XCI+IjsKCQkJCQkKCQkJZm9yZWFjaCgkdGhpcy0+Y2hpbGRyZW4gYXMgJGNoaWxkKQoJCQl7CgkJCQlpZigkY2hpbGQgaW5zdGFuY2VvZiBNTV9TbWFydFRhZ0dyb3VwKSB7CgkJCQkJJGh0bWwgLj0gJGNoaWxkLT5nZW5lcmF0ZUh0bWwoKTsKCQkJCX0KCQkJCWVsc2UgewoJCQkJCSRodG1sIC49ICRjaGlsZC0+Z2VuZXJhdGVIdG1sKCk7CgkJCQl9CgkJCX0JCgkJCQkKCQkJJGh0bWwgLj0gIjwvZGl2PiI7CgkJfQoJCQoJCXJldHVybiAkaHRtbDsKCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBnZXROYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm5hbWU7Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UGFyZW50SWQoKQoJewoJCXJldHVybiAkdGhpcy0+cGFyZW50SWQ7Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2hpbGRyZW4oKQoJewoJCXJldHVybiAkdGhpcy0+Y2hpbGRyZW47Cgl9CgkKfQo=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(7, 'myaccountform', 'Y2xhc3MgTU1fTXlBY2NvdW50Rm9ybSBleHRlbmRzIE1NX0Fic3RyYWN0Rm9ybQp7CglwdWJsaWMgJHVzZXI7CgkKCS8qKgoJICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4gVGFrZXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzCgkgKiBAcGFyYW0gQXJyYXkgJHBhcmFtcyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBmb3JtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBhcmFtcz1udWxsKQoJewkKCQlpZighaXNfbnVsbCgkcGFyYW1zKSkKCQl7CgkJCWlmKGlzX2FycmF5KCRwYXJhbXMpICYmIGNvdW50KCRwYXJhbXMpID4gMCkKCQkJewoJCQkJZm9yZWFjaCgkcGFyYW1zIGFzICRrPT4kdikKCQkJCXsKCQkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkJJCRrZXkgPSAkdjsKCQkJCX0KCQkJfQoJCQkKCQkJJHRoaXMtPmluaXRpYWxpemUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpbml0aWFsaXplKCkKCXsKCQlnbG9iYWwgJGN1cnJlbnRfdXNlcjsKCQkkdGhpcy0+dXNlciA9IE1NX1VzZXI6OmdldEN1cnJlbnRXUFVzZXIoKTsKCQkKCQlpZigkdGhpcy0+dXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJJHRoaXMtPmlzVmFsaWQgPSB0cnVlOwoJCQkKCQkJaWYoJHRoaXMtPnVzZXItPmlzQWRtaW4oKSkKCQkJewoJCQkJJHRoaXMtPmlzVmFsaWQgPSBmYWxzZTsKCQkJCSR0aGlzLT5lcnJvciA9ICJZb3UgY2Fubm90IHZpZXcgdGhpcyBwYWdlIGFzIGFuIGFkbWluaXN0cmF0b3IiOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSR0aGlzLT5pc1ZhbGlkID0gZmFsc2U7CgkJCSR0aGlzLT5lcnJvciA9ICJJbnZhbGlkIHVzZXIiOwoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIGFsbCBvZiB0aGUgSFRNTCB0aGF0IHNob3VsZCBzaG93IHVwIGF0IAoJICogdGhlIHRvcCBvZiB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbi4KCSAqIEByZXR1cm4gU3RyaW5nIGhlYWRlciBIVE1MIGZvciB0aGUgY2hlY2tvdXQgZm9ybQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVGb3JtSGVhZGVyKCkKCXsJCQoJCXJldHVybiAkdGhpcy0+Z2V0SmF2YXNjcmlwdEluY2x1ZGVzKCk7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyBhbGwgb2YgdGhlIEhUTUwgdGhhdCBzaG91bGQgc2hvdyB1cCBhdAoJICogdGhlIGJvdHRvbSBvZiB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbi4KCSAqIAoJICogQHJldHVybiBTdHJpbmcgZm9vdGVyIEhUTUwgZm9yIHRoZSBjaGVja291dCBmb3JtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcm1Gb290ZXIoKQoJewoJCXJldHVybiAkdGhpcy0+Z2V0SW5pdEphdmFzY3JpcHQoKTsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGluY2x1ZGUgc3RhdGVtZW50cyBmb3IgcmVxdWlyZWQgamF2YXNjcmlwdCBmaWxlcy4KCSAqIEByZXR1cm4gU3RyaW5nIHRoYXQgY29udGFpbnMgdGhlIGphdmFzY3JpcHQgZm9yIGluY2x1ZGluZyByZXF1aXJlZCBqYXZhc2NyaXB0IGZpbGVzLgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SmF2YXNjcmlwdEluY2x1ZGVzKCkKCXsKCQkkdmVyc2lvbiA9IE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCk7CgkJJHVzZU1NQ1NTID0gKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1VTRV9NTV9DU1NfTVlfQUNDT1VOVCkgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCQkKCQlpZigkdXNlTU1DU1MpCgkJewoJCQl3cF9lbnF1ZXVlX3N0eWxlKCJtZW1iZXJtb3VzZS1teWFjb3VudC1jc3MiLCBwbHVnaW5zX3VybChNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9jc3MvdXNlci9tbS1teWFjY291bnQuY3NzIiksIGFycmF5KCksICR2ZXJzaW9uKTsKCQl9CgkJCgkJd3BfZW5xdWV1ZV9zY3JpcHQoIm1lbWJlcm1vdXNlLW15YWNjb3VudC1qcyIsIHBsdWdpbnNfdXJsKE1NX1BMVUdJTl9OQU1FLiIvcmVzb3VyY2VzL2pzL3VzZXIvbW0tbXlhY2NvdW50LmpzIiksIGFycmF5KCksICR2ZXJzaW9uLCB0cnVlKTsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGphdmFzY3JpcHQgdG8gaW5pdGlhbGl6ZSB0aGUgTXkgQWNjb3VudCBmb3JtLiAKCSAqIEBwYXJhbSBhcnJheSAkZGVmYXVsdERhdGEgdGhpcyBjb250YWlucyB0aGUgZGVmYXVsdCBkYXRhIHVzZWQgdG8gcHJlcG9wdWxhdGUgY2VydGFpbiBmb3JtIGVsZW1lbnRzCgkgKiBAcmV0dXJuIFN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBqYXZhc2NyaXB0IHRvIGluaXRpYWxpemVzIHRoZSBjaGVja291dCBmb3JtLgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SW5pdEphdmFzY3JpcHQoKQoJewoJCXJldHVybiAiIjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9TZWN0aW9uIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGNoZWNraW5nIGlmIHRoZSBjdXJyZW50IHVzZXIgCgkgKiBzaG91bGQgc2VlIHRoZSBjb250ZW50cyBvZiB0aGlzIHNlY3Rpb24gYmFzZWQgb24gdGhlIGZvcm0gY29uZmlndXJhdGlvbi4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX3NlY3Rpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkJCgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQkkZm9ybSA9IE1NX09iamVjdENhY2hlOjpnZXQoTU1fT2JqZWN0Q2FjaGU6OiRLRVlfTEFTVF9GT1JNKTsKCQkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsKCQkJCWNhc2UgImdpZnRzIjoKCQkJCQkkaGFzR2lmdHMgPSAkZm9ybS0+dXNlci0+aGFzR2lmdHMoKTsKCQkJCQkkb3V0cHV0U3RyIC49ICI8ZGl2ICIuKCgkaGFzR2lmdHMgPT0gZmFsc2UpID8gInN0eWxlPVwiZGlzcGxheTpub25lO1wiIiA6ICIiKS4iPlxuIjsKCQkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSAic29jaWFsbG9naW4iOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxkaXYgIi4oKCFNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uOjpzb2NpYWxMb2dpbkVuYWJsZWQoKSkgPyAic3R5bGU9XCJkaXNwbGF5Om5vbmU7XCIiIDogIiIpLiI+XG4iOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCB0eXBlIG9mICd7JHR5cGV9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfS4iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQkKCQkJJG91dHB1dFN0ciAuPSBkb19zaG9ydGNvZGUoJGNvbnRlbnQpLiI8L2Rpdj5cbiI7CgkJCXJldHVybiAkb3V0cHV0U3RyOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRmllbGQgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGZvcm0gZmllbGQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZmllbGQoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd7JGNvZGV9JyBTbWFydFRhZyBpcyBub3Qgc3VwcG9ydGVkIGZvciBNeSBBY2NvdW50IGZvcm1zLiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRGF0YSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhlIAoJICogZGF0YSBlbGVtZW50IGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZCBhbmQgdGhlIGZvcm0gY29uZmlndXJhdGlvbi4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX2RhdGEoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCgkJaWYoaXNzZXQoJG5hbWUpKQoJCXsKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJG5hbWUpKQoJCQl7CgkJCQljYXNlICJmaXJzdG5hbWUiOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnVzZXItPmdldEZpcnN0TmFtZSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAibGFzdG5hbWUiOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnVzZXItPmdldExhc3ROYW1lKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJwaG9uZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+dXNlci0+Z2V0UGhvbmUoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImVtYWlsIjoKCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT51c2VyLT5nZXRFbWFpbCgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAidXNlcm5hbWUiOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnVzZXItPmdldFVzZXJuYW1lKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJwYXNzd29yZCI6CgkJCQkJCgkJCQkJaWYoIWlzX251bGwoJGZvcm0tPnVzZXItPmdldFBhc3N3b3JkKCkpKQoJCQkJCXsKCQkJCQkJZm9yKCRpID0gMDsgJGkgPCBzdHJsZW4oJGZvcm0tPnVzZXItPmdldFBhc3N3b3JkKCkpOyAkaSsrKQoJCQkJCQl7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICIqIjsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICIqKioqKioqKiI7CgkJCQkJfQkJCQkJCgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJyZWdpc3RyYXRpb25kYXRlIjoKCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT51c2VyLT5nZXRSZWdpc3RyYXRpb25EYXRlKHRydWUpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAibWVtYmVyc2hpcGxldmVsbmFtZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+dXNlci0+Z2V0TWVtYmVyc2hpcE5hbWUoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImJpbGxpbmdhZGRyZXNzIjoKCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT51c2VyLT5nZXRCaWxsaW5nQWRkcmVzcygpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiYmlsbGluZ2NpdHkiOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnVzZXItPmdldEJpbGxpbmdDaXR5KCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJiaWxsaW5nc3RhdGUiOgoJCQkJCWdsb2JhbCAkd3BkYjsKCQkJCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfY29sKCJTRUxFQ1QgYG5hbWVgIGZyb20gIiAuIE1NX1RBQkxFX0NPVU5UUllfU1VCRElWSVNJT05TIC4gIiB3aGVyZSBgaXNvYCA9ICciIC4gJGZvcm0tPnVzZXItPmdldEJpbGxpbmdDb3VudHJ5KCkgLiAiJyBBTkQgYGNvZGVgID0gJyIgLiAkZm9ybS0+dXNlci0+Z2V0QmlsbGluZ1N0YXRlKCkgLiAiJyIpOwoJCQkJCSRvdXRwdXRTdHIgLj0gaXNzZXQoJHJlc3VsdHNbMF0pID8gJHJlc3VsdHNbMF0gOiAkZm9ybS0+dXNlci0+Z2V0QmlsbGluZ1N0YXRlKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJiaWxsaW5nemlwY29kZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+dXNlci0+Z2V0QmlsbGluZ1ppcENvZGUoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImJpbGxpbmdjb3VudHJ5IjoKCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT51c2VyLT5nZXRCaWxsaW5nQ291bnRyeU5hbWUoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInNoaXBwaW5nYWRkcmVzcyI6CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+dXNlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJzaGlwcGluZ2NpdHkiOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnVzZXItPmdldFNoaXBwaW5nQ2l0eSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAic2hpcHBpbmdzdGF0ZSI6CgkJCQkJZ2xvYmFsICR3cGRiOwoJCQkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9jb2woIlNFTEVDVCBgbmFtZWAgZnJvbSAiIC4gTU1fVEFCTEVfQ09VTlRSWV9TVUJESVZJU0lPTlMgLiAiIHdoZXJlIGBpc29gID0gJyIgLiAkZm9ybS0+dXNlci0+Z2V0U2hpcHBpbmdDb3VudHJ5KCkgLiAiJyBBTkQgYGNvZGVgID0gJyIgLiAkZm9ybS0+dXNlci0+Z2V0U2hpcHBpbmdTdGF0ZSgpIC4gIiciKTsKCQkJCQkkb3V0cHV0U3RyIC49IGlzc2V0KCRyZXN1bHRzWzBdKSA/ICRyZXN1bHRzWzBdIDogJGZvcm0tPnVzZXItPmdldFNoaXBwaW5nU3RhdGUoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInNoaXBwaW5nemlwY29kZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+dXNlci0+Z2V0U2hpcHBpbmdaaXBDb2RlKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJzaGlwcGluZ2NvdW50cnkiOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnVzZXItPmdldFNoaXBwaW5nQ291bnRyeU5hbWUoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImN1c3RvbWZpZWxkcyI6CgkJCQkJJGZpZWxkcyA9IE1NX0N1c3RvbUZpZWxkOjpnZXRDdXN0b21GaWVsZHNMaXN0KHRydWUpOwoJCQkJCQoJCQkJCWZvcmVhY2goJGZpZWxkcyBhcyAkaWQ9PiRkaXNwbGF5TmFtZSkKCQkJCQl7CgkJCQkJCSRjdXN0b21GaWVsZCA9IG5ldyBNTV9DdXN0b21GaWVsZCgkaWQpOwoJCQkJCQkJCgkJCQkJCWlmKCRjdXN0b21GaWVsZC0+aXNWYWxpZCgpKQoJCQkJCQl7CgkJCQkJCQkkaWQgPSAkY3VzdG9tRmllbGQtPmdldElkKCk7CgkJCQkJCQkkdmFsdWUgPSAkZm9ybS0+dXNlci0+Z2V0Q3VzdG9tRGF0YUJ5RmllbGRJZCgkaWQpLT5nZXRWYWx1ZSgpOwoJCQkJCQkJCgkJCQkJCQkkb3V0cHV0U3RyIC49ICI8cCBpZD1cIm1tLWVsZW1lbnQtY3VzdG9tLWZpZWxkLXskaWR9XCIgY2xhc3M9XCJtbS1teWFjY291bnQtZWxlbWVudFwiPgoiOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPHNwYW4gaWQ9XCJtbS1sYWJlbC1jdXN0b20tZmllbGQteyRpZH1cIiBjbGFzcz1cIm1tLW15YWNjb3VudC1sYWJlbFwiPiI7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICRjdXN0b21GaWVsZC0+Z2V0RGlzcGxheU5hbWUoKS4iOiAiOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPC9zcGFuPgoiOwoJCQkJCQkJaWYoJHZhbHVlICE9ICIiKQoJCQkJCQkJewoJCQkJCQkJCS8vIGhhbmRsZSByZW5kZXJpbmcgb2YgY2hlY2tib3ggdmFsdWVzCgkJCQkJCQkJaWYoJHZhbHVlID09IE1NX0N1c3RvbUZpZWxkOjokQ0hFQ0tCT1hfT04pCgkJCQkJCQkJewoJCQkJCQkJCQkkdmFsdWUgPSBNTV9VdGlsczo6Z2V0Q2hlY2tJY29uKCk7CgkJCQkJCQkJfQoJCQkJCQkJCWVsc2UgaWYoJHZhbHVlID09IE1NX0N1c3RvbUZpZWxkOjokQ0hFQ0tCT1hfT0ZGKQoJCQkJCQkJCXsKCQkJCQkJCQkJJHZhbHVlID0gTU1fVXRpbHM6OmdldENyb3NzSWNvbigpOwoJCQkJCQkJCX0KCQkJCQkJCQllbHNlIAoJCQkJCQkJCXsKCQkJCQkJCQkJJHZhbHVlID0gc3RyaXBzbGFzaGVzKCR2YWx1ZSk7CgkJCQkJCQkJCgkJCQkJCQkJCS8vIGFiYnJldmlhdGUgc3RyaW5ncyBvdmVyIDMwMCBjaGFyYWN0ZXJzCgkJCQkJCQkJCWlmKHN0cmxlbigkdmFsdWUpID49IDMwMCkKCQkJCQkJCQkJewoJCQkJCQkJCQkJJHZhbHVlID0gTU1fVXRpbHM6OmFiYnJldlN0cmluZygkdmFsdWUsIDMwMCk7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxzcGFuIGlkPVwibW0tZGF0YS1jdXN0b20tZmllbGQteyRpZH1cIiBjbGFzcz1cIm1tLW15YWNjb3VudC1kYXRhXCI+IjsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gKCR2YWx1ZSAhPSAiIikgPyAkdmFsdWUgOiBNTV9OT19EQVRBOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPC9zcGFuPgoiOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPC9wPgoiOwoJCQkJCQl9CgkJCQkJfQoJCQkJCQoJCQkJCWJyZWFrOwoJCQkJCgkJCQljYXNlICJzdWJzY3JpcHRpb25zIjoKCQkJCQkkdmlldyA9IG5ldyBNTV9TdWJzY3JpcHRpb25zVmlldygpOwoJCQkJCSRkYXRhR3JpZCA9IG5ldyBNTV9EYXRhR3JpZChudWxsLCAiZGF0ZV9hZGRlZCIsICJkZXNjIiwgNSk7CgkJCQkJJGRhdGEgPSAkdmlldy0+Z2V0Vmlld0RhdGEoJGZvcm0tPnVzZXItPmdldElkKCksICRkYXRhR3JpZCk7CgkJCQkJJHJvd3MgPSAkdmlldy0+Z2VuZXJhdGVSb3dzKCRkYXRhLCBmYWxzZSk7CgkJCQkJJGRhdGFHcmlkLT5zZXRSb3dzKCRyb3dzKTsKCQkJCQkkZGF0YUdyaWQtPnNldEhlYWRlcnMoYXJyYXkoImZvcmNlLXNldC1oZWFkZXJzIikpOwoJCQkJCQkKCQkJCQlpZihjb3VudCgkcm93cykgPiAwKQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAkZGF0YUdyaWQtPmdlbmVyYXRlSHRtbCgibXlhY2NvdW50X3N1YnNjcmlwdGlvbnMuZGF0YWdyaWQucGhwIik7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRvdXRwdXRTdHIgLj0gIjxlbT5ObyBzdWJzY3JpcHRpb25zPC9lbT4iOwoJCQkJCX0KCQkJCQkKCQkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSAib3JkZXJoaXN0b3J5IjoKCQkJCQkkdmlldyA9IG5ldyBNTV9UcmFuc2FjdGlvbkhpc3RvcnlWaWV3KCk7CgkJCQkJJGRhdGFHcmlkID0gbmV3IE1NX0RhdGFHcmlkKG51bGwsICJkYXRlIiwgImRlc2MiLCA1KTsKCQkJCQkkZGF0YSA9ICR2aWV3LT5nZXRWaWV3RGF0YSgkZm9ybS0+dXNlci0+Z2V0SWQoKSwgJGRhdGFHcmlkKTsKCQkJCQkkcm93cyA9ICR2aWV3LT5nZW5lcmF0ZVJvd3MoJGRhdGEsIGZhbHNlKTsKCQkJCQkkZGF0YUdyaWQtPnNldFJvd3MoJHJvd3MpOwoJCQkJCSRkYXRhR3JpZC0+c2V0SGVhZGVycyhhcnJheSgiZm9yY2Utc2V0LWhlYWRlcnMiKSk7CgkJCQkJCgkJCQkJaWYoY291bnQoJHJvd3MpID4gMCkKCQkJCQl7CgkJCQkJCSRvdXRwdXRTdHIgLj0gJGRhdGFHcmlkLT5nZW5lcmF0ZUh0bWwoIm15YWNjb3VudF9vcmRlcmhpc3RvcnkuZGF0YWdyaWQucGhwIik7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRvdXRwdXRTdHIgLj0gIjxlbT5ObyBvcmRlcnMgcGxhY2VkPC9lbT4iOwoJCQkJCX0KCQkJCQkKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImdpZnRzIjoKCQkJCQkkdmlldyA9IG5ldyBNTV9HaWZ0SGlzdG9yeVZpZXcoKTsKCQkJCQkkZGF0YUdyaWQgPSBuZXcgTU1fRGF0YUdyaWQobnVsbCwgImRhdGVfZ2lmdGVkIiwgImRlc2MiLCA1KTsKCQkJCQkkZGF0YSA9ICR2aWV3LT5nZXRWaWV3RGF0YSgkZm9ybS0+dXNlci0+Z2V0SWQoKSwgJGRhdGFHcmlkKTsKCQkJCQkkcm93cyA9ICR2aWV3LT5nZW5lcmF0ZVJvd3MoJGRhdGEsIGZhbHNlKTsKCQkJCQkkZGF0YUdyaWQtPnNldFJvd3MoJHJvd3MpOwoJCQkJCSRkYXRhR3JpZC0+c2V0SGVhZGVycyhhcnJheSgiZm9yY2Utc2V0LWhlYWRlcnMiKSk7CgkJCQkJCQoJCQkJCWlmKGNvdW50KCRyb3dzKSA+IDApCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICRkYXRhR3JpZC0+Z2VuZXJhdGVIdG1sKCJteWFjY291bnRfZ2lmdGhpc3RvcnkuZGF0YWdyaWQucGhwIik7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRvdXRwdXRTdHIgLj0gIjxlbT5ObyBnaWZ0cyBwdXJjaGFzZWQ8L2VtPiI7CgkJCQkJfQoJCQkJCQkKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInNvY2lhbGxvZ2luIjoKCQkJCQkkdmlldyA9IG5ldyBNTV9Tb2NpYWxMb2dpblZpZXcoKTsKCQkJCQkkZGF0YUdyaWQgPSBuZXcgTU1fRGF0YUdyaWQobnVsbCwgIm5hbWUiLCAiZGVzYyIsIDUpOwoJCQkJCSRkYXRhID0gJHZpZXctPmdldFZpZXdEYXRhKCRmb3JtLT51c2VyLT5nZXRJZCgpLCAkZGF0YUdyaWQpOwoJCQkJCSRyb3dzID0gJHZpZXctPmdlbmVyYXRlUm93cygkZGF0YSwgZmFsc2UpOwoJCQkJCSRkYXRhR3JpZC0+c2V0Um93cygkcm93cyk7CgkJCQkJJGRhdGFHcmlkLT5zZXRIZWFkZXJzKGFycmF5KCJmb3JjZS1zZXQtaGVhZGVycyIpKTsKCQkJCQkKCQkJCQlpZihjb3VudCgkcm93cykgPiAwKQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAkZGF0YUdyaWQtPmdlbmVyYXRlSHRtbCgibXlhY2NvdW50X3NvY2lhbGxvZ2luLmRhdGFncmlkLnBocCIpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICI8ZW0+Tm8gU29jaWFsIE5ldHdvcmtzIExpbmtlZDwvZW0+IjsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQkJCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIG5hbWUgb2YgJ3skbmFtZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCQlicmVhazsKCQkJfQoJCQkKCQkJcmV0dXJuICRvdXRwdXRTdHI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ25hbWUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfS4iOwoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9NZXNzYWdlIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIHJlbmRlcmluZyB0aGUgCgkgKiBtZXNzYWdlIGVsZW1lbnQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fbWVzc2FnZSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiIjsKCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsKCQkJCWNhc2UgImVycm9yIjoKCQkJCQlpZigkZm9ybS0+ZXJyb3IgIT0gIiIpCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICI8cCBjbGFzcz1cIm1tLWVycm9yXCI+Ii4kZm9ybS0+ZXJyb3IuIjwvcD4iOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0cjsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndHlwZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciB7JGNvZGV9IFNtYXJ0VGFnIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fQnV0dG9uIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIAoJICogcmV0dXJuaW5nIHRoZSBhcHByb3ByaWF0ZSBqYXZhc2NyaXB0IHRvIHN1Ym1pdCB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9idXR0b24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCgkJaWYoaXNzZXQoJHR5cGUpKQoJCXsKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCQl7CgkJCQljYXNlICJ1cGRhdGVhY2NvdW50ZGV0YWlscyI6CgkJCQkJJG91dHB1dFN0ciAuPSAiamF2YXNjcmlwdDpteWFjY291bnRfanMudXBkYXRlQWNjb3VudERldGFpbHMoeyRmb3JtLT51c2VyLT5nZXRJZCgpfSk7IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInVwZGF0ZWJpbGxpbmdpbmZvIjoKCQkJCQkkb3V0cHV0U3RyIC49ICJqYXZhc2NyaXB0Om15YWNjb3VudF9qcy51cGRhdGVCaWxsaW5nSW5mbyh7JGZvcm0tPnVzZXItPmdldElkKCl9KTsiOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAidXBkYXRlc2hpcHBpbmdpbmZvIjoKCQkJCQkkb3V0cHV0U3RyIC49ICJqYXZhc2NyaXB0Om15YWNjb3VudF9qcy51cGRhdGVTaGlwcGluZ0luZm8oeyRmb3JtLT51c2VyLT5nZXRJZCgpfSk7IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInZpZXdvcmRlcmhpc3RvcnkiOgoJCQkJCSRvdXRwdXRTdHIgLj0gImphdmFzY3JpcHQ6bXlhY2NvdW50X2pzLnZpZXdPcmRlckhpc3RvcnkoeyRmb3JtLT51c2VyLT5nZXRJZCgpfSk7IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInZpZXdnaWZ0aGlzdG9yeSI6CgkJCQkJJG91dHB1dFN0ciAuPSAiamF2YXNjcmlwdDpteWFjY291bnRfanMudmlld0dpZnRIaXN0b3J5KHskZm9ybS0+dXNlci0+Z2V0SWQoKX0pOyI7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJjYW5jZWxtZW1iZXJzaGlwIjoKCQkJCQkkb3V0cHV0U3RyIC49IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokU0FWRVRIRVNBTEUpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0cjsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndHlwZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciB7JGNvZGV9IFNtYXJ0VGFnIjsKCQl9Cgl9Cn0KCg==', 0, '2018-11-21 06:38:53'),
(8, 'customfieldtagprocessor', 'Y2xhc3MgTU1fQ3VzdG9tRmllbGRUYWdQcm9jZXNzb3IKewkKCXB1YmxpYyBzdGF0aWMgJFRBR19DVVNUT01fRklFTERfREFUQSA9ICJtbV9jdXN0b21maWVsZF9kYXRhIjsKCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIFNtYXJ0VGFnIGlzIHJlbGF0ZWQgdG8gY3VzdG9tIGZpZWxkcy4KCSAqIAoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcmV0dXJuIEJvb2xlYW4gcmV0dXJucyB0cnVlIGlmIHRoZSBTbWFydFRhZyBwYXNzZWQgaXMgcmVsYXRlZCB0byBjdXN0b20gZmllbGRzLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzQ3VzdG9tRmllbGRTbWFydFRhZygkc21hcnRUYWcpCgl7CgkJc3dpdGNoKCRzbWFydFRhZykgCgkJewoJCQljYXNlIHNlbGY6OiRUQUdfQ1VTVE9NX0ZJRUxEX0RBVEE6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgbmFtZSBhbmQgYSBudW1iZXIgb2YgcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBTbWFydFRhZyBhbmQgbWFrZXMgYSBjYWxsIHRvIAoJICogdGhlIGFwcHJvcHJpYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBTbWFydFRhZyBuYW1lLgoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IHRvIHByb2Nlc3MKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc1NtYXJ0VGFnKCRzbWFydFRhZywgJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlzd2l0Y2goJHNtYXJ0VGFnKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JFRBR19DVVNUT01fRklFTERfREFUQToKCQkJCXJldHVybiBzZWxmOjptbV9jdXN0b21maWVsZF9kYXRhKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gIkludmFsaWQgQ3VzdG9tIEZpZWxkIFNtYXJ0VGFnIHskc21hcnRUYWd9IGZvdW5kIjsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fQ3VzdG9tRmllbGRfRGF0YSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciAKCSAqIHJldHVybmluZyBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VzdG9tIGZpZWxkIElEIHBhc3NlZC4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbW1fY3VzdG9tZmllbGRfZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCWlmKCFlbXB0eSgkYXR0cykpIAoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpIAoJCQl7CgkJCQkkJGsgPSAkdjsKCQkJfQoJCX0KCQkKCQlpZihpc3NldCgkaWQpICYmIGlzc2V0KCRuYW1lKSkKCQl7CgkJCSRjdXN0b21GaWVsZCA9IG5ldyBNTV9DdXN0b21GaWVsZCgkaWQpOwoJCQkKCQkJaWYoJGN1c3RvbUZpZWxkLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXN3aXRjaChzdHJ0b2xvd2VyKCRuYW1lKSkKCQkJCXsKCQkJCQljYXNlICJkaXNwbGF5bmFtZSI6CgkJCQkJCXJldHVybiAkY3VzdG9tRmllbGQtPmdldERpc3BsYXlOYW1lKCk7CgkJCQkJCgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgbmFtZSAneyRuYW1lfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgY3VzdG9tIGZpZWxkIElEIG9mICd7JGlkfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiAnaWQnIGFuZCAnbmFtZScgYXR0cmlidXRlcyBhcmUgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0iOwoJCX0KCX0KfQo=', 0, '2018-11-21 06:38:53'),
(9, 'abstractemailserviceprovider', 'YWJzdHJhY3QgY2xhc3MgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlciB7CgkKCXB1YmxpYyBzdGF0aWMgJExJU1RfVFlQRV9BQ1RJVkUgPSAiYWN0aXZlIjsKCXB1YmxpYyBzdGF0aWMgJExJU1RfVFlQRV9DQU5DRUxFRCA9ICJjYW5jZWxlZCI7CgkKCXByaXZhdGUgJG5hbWU7Cglwcml2YXRlICR0b2tlbjsKCQoJcHVibGljIGZ1bmN0aW9uIGhhbmRsZU9wdGlvbnNEaWFsb2coJG9wdGlvbkRhdGEpIHt9CglwdWJsaWMgZnVuY3Rpb24gY29uZmlndXJlRnJvbU9wdGlvbnMoJG9wdGlvbkRhdGEpIHsgcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOyB9CglwdWJsaWMgZnVuY3Rpb24gZ2V0TGlzdHMoKSB7fQoJcHVibGljIGZ1bmN0aW9uIGFkZE1lbWJlclRvTGlzdCgkZW1haWwsJGxpc3RJZCwkaW5jbHVkZUJ1bmRsZUluZm89dHJ1ZSkgeyByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7fQoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZU1lbWJlckZyb21MaXN0KCRlbWFpbCwkbGlzdElkKSB7IHJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTt9CglwdWJsaWMgZnVuY3Rpb24gY2hhbmdlTWVtYmVyc2hpcExldmVsKCRlbWFpbCwgJG5ld01lbWJlclR5cGUpIHsgcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpO30KCXB1YmxpYyBmdW5jdGlvbiB1cGRhdGVNZW1iZXIoJGVtYWlsLCRsaXN0SWQsJG5ld0VtYWlsPSIiKSB7IHJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTt9CgkKCS8qKgoJICogCgkgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBhbGwgcHJvdmlkZXJzLiAKCSAqIEBwYXJhbSBTdHJpbmcgJHByb3ZpZGVyX2luZm8gQW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgcHJvdmlkZXIgaW5mb3JtYXRpb24gZnJvbSB0aGUgZGF0YSBzdG9yZQoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pIAoJewoJCSR0aGlzLT5uYW1lID0gJHByb3ZpZGVyX2luZm8tPnByb3ZpZGVyX25hbWU7CgkJJHRoaXMtPnRva2VuID0gJHByb3ZpZGVyX2luZm8tPnByb3ZpZGVyX3Rva2VuOwoJfQoJCgkvKioKCSAqIFJldHVybnMgYW4gb2JqZWN0IGNhcGFibGUgb2YgcmVuZGVyaW5nIHRoZSBkZWZhdWx0IG9wdGlvbnMgZGlhbG9nCgkgKiBAcGFyYW0gQXJyYXkgJHBvc3QgQW55IGRhdGEgcG9zdGVkIG5lY2Vzc2FyeSB0byBkcmF3IHRoZSBvcHRpb25zIGRpYWxvZwoJICogQHJldHVybiBPYmplY3Qgb2YgdHlwZSBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckRpYWxvZyByZXByZXNlbnRpbmcgdGhlIGRpYWxvZyB0byBkcmF3CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJPcHRpb25zRGlhbG9nKCRwb3N0KSB7CgkJJGZvcm0gPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJEaWFsb2coKTsKCQlyZXR1cm4gJGZvcm07Cgl9CgkKCS8qKgoJICogVGhlIGRlZmF1bHQgc2VuZCBhY3Rpb24gaXMgdG8gcm91dGUgdGhlIG1lc3NhZ2UgdG8gd3BfbWFpbC4gd3BfbWFpbCBzdXBwb3J0cyBvbmUgbWVzc2FnZSB0eXBlLCB3aXRoIHRoZQoJICogY29udGVudC10eXBlIHNldCB1c2luZyB0aGUgd3BfbWFpbF9jb250ZW50X3R5cGUgZmlsdGVyLCBzbyBodG1sIHdpbGwgYmUgZmF2b3JlZCBidXQgdGV4dCB3aWxsIGJlIHVzZWQgaW4KCSAqIGl0cyBhYnNlbnNlLiBOb3RlIHRoYXQgYm9keUhUTUwgYW5kIGJvZHlUZXh0IGFyZSBib3RoIG9wdGlvbmFsLCBidXQgb25lIG9mIHRoZW0gaXMgZXhwZWN0ZWQgdG8gY29udGFpbiBhIChub24tbnVsbCkgdmFsdWUKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkdG9BZGRyZXNzIC0gTWVzc2FnZSBSZWNpcGllbnQKCSAqIEBwYXJhbSBTdHJpbmcgJHN1YmplY3QgLSBNZXNzYWdlIFN1YmplY3QKCSAqIEBwYXJhbSBTdHJpbmcgJGJvZHlIVE1MIC0gVGhlIGh0bWwgY29udGVudCBvZiB0aGUgbWVzc2FnZQoJICogQHBhcmFtIFN0cmluZyAkYm9keVRleHQgLSBUaGUgdGV4dCBjb250ZW50IG9mIHRoZSBtZXNzYWdlCgkgKiBAcGFyYW0gU3RyaW5nICRoZWFkZXJzIC0gQWRkaXRpb25hbCBoZWFkZXJzIHRvIHNlbmQgd2l0aCB0aGUgbWVzc2FnZQoJICogQHBhcmFtIGFycmF5ICRhdHRhY2htZW50cyAtIEFuIGFycmF5IG9mIGZpbGVzIHRvIGF0dGFjaAoJICovCglwdWJsaWMgZnVuY3Rpb24gc2VuZCgkdG9BZGRyZXNzLCAkc3ViamVjdCwgJGJvZHlIVE1MPSIiLCAkYm9keVRleHQ9IiIsICRoZWFkZXJzPSIiLCAkYXR0YWNobWVudHM9IiIpIAoJewoJCS8vaWYgYXR0YWNobWVudHMgd2FzIG5vdCBzZXQsIGluaXRpYWxpemUgaXQgdG8gYW4gZW1wdHkgYXJyYXkKCQlpZiAoZW1wdHkoJGF0dGFjaG1lbnRzKSkgCgkJewoJCQkkYXR0YWNobWVudHMgPSBhcnJheSgpOwoJCX0KCQllbHNlIGlmICghaXNfYXJyYXkoJGF0dGFjaG1lbnRzKSkgCgkJewoJCQkvL2lmIGEgc2luZ2xlIGF0dGFjaG1lbnQgd2FzIHNlbnQgYXMgYSBzdHJpbmcsIGNvbnZlcnQgaXQgaW50byBhbiBhcnJheQoJCQkkYXR0YWNobWVudHMgPSBhcnJheSgkYXR0YWNobWVudHMpOwoJCX0KCQlpZiAoIWVtcHR5KCRib2R5SFRNTCkpIAoJCXsKCQkJQHdwX21haWwoJHRvQWRkcmVzcywgJHN1YmplY3QsICRib2R5SFRNTCwgJGhlYWRlcnMsICRhdHRhY2htZW50cyk7CgkJfQoJCWVsc2UgaWYgKCFlbXB0eSgkYm9keVRleHQpKSAKCQl7CgkJCUB3cF9tYWlsKCR0b0FkZHJlc3MsICRzdWJqZWN0LCAkYm9keVRleHQsICRoZWFkZXJzLCAkYXR0YWNobWVudHMpOwoJCX0KCX0KCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBkaXNwbGF5YWJsZSBuYW1lIG9mIHRoZSBwcm92aWRlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0TmFtZSgpIAoJewoJCXJldHVybiAkdGhpcy0+bmFtZTsKCX0KCQoJLyoqCgkgKiBTZXRzIHRoZSBkaXNwbGF5YWJsZSBuYW1lIG9mIHRoZSBwcm92aWRlcgoJICogQHBhcmFtIFN0cmluZyAkbmV3TmFtZQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0TmFtZSgkbmV3TmFtZSkgCgl7CgkJJHRoaXMtPm5hbWUgPSAkbmV3TmFtZTsKCX0KCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBwcm92aWRlciB0b2tlbgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0VG9rZW4oKSAKCXsKCQlyZXR1cm4gJHRoaXMtPnRva2VuOwoJfQoJCgkvKioKCSAqIFNldHMgdGhlIHByb3ZpZGVyIHRvZWtuCgkgKiBAcGFyYW0gU3RyaW5nICRuZXdUb2tlbgoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0VG9rZW4oJG5ld1Rva2VuKSAKCXsKCQkkdGhpcy0+dG9rZW4gPSAkbmV3VG9rZW47Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJzaXN0TGlzdE1hcHBpbmdzKCRwcm92aWRlcl9pZCwgJG1hcCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCU1NX1RyYW5zYWN0aW9uOjpiZWdpbigpOwoJCXRyeSAKCQl7CgkJCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoICR3cGRiLT5wcmVwYXJlKCJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0VNQUlMX1BST1ZJREVSX01BUFBJTkdTLiIgV0hFUkUgZW1haWxfc2VydmljZV9wcm92aWRlcl9pZCA9ICVkIiwgJHByb3ZpZGVyX2lkKSk7CgkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCSAJewoJCSAJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8gcmVtb3ZlIHRoZSBleGlzdGluZyBtZW1iZXIgdHlwZSB0byBsaXN0IG1hcHBpbmdzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJIAl9CgkJCWZvcmVhY2goJG1hcCBhcyAkbWVtYmVyX3R5cGVfaWQ9PiRsaXN0X2lkKSAKCQkJewoJCQkJJGxpc3RfaWQgPSBodG1sX2VudGl0eV9kZWNvZGUoJGxpc3RfaWQsRU5UX0NPTVBBVCB8IEVOVF9IVE1MNDAxLCAiVVRGLTgiKTsKCQkJCSRzcWwgPSAiSU5TRVJUIElOVE8gIi5NTV9UQUJMRV9FTUFJTF9QUk9WSURFUl9NQVBQSU5HUy4iIFNFVCAiLgoJCQkJCSAgICJtZW1iZXJfdHlwZV9pZCA9ICVkLCIuCgkJCQkJICAgImxpc3RfaWQgPSAlcywiLgoJCQkJCSAgICJlbWFpbF9zZXJ2aWNlX3Byb3ZpZGVyX2lkID0gJWQiOwoJCQkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSggJHdwZGItPnByZXBhcmUoJHNxbCwgJG1lbWJlcl90eXBlX2lkLGh0bWxfZW50aXR5X2RlY29kZSgkbGlzdF9pZCxFTlRfQ09NUEFUIHwgRU5UX0hUTUw0MDEsICJVVEYtOCIpLCAkcHJvdmlkZXJfaWQpKTsKCQkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQkgCXsKCQkJIAkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8gYWRkIG5ldyBtZW1iZXIgdHlwZSB0byBsaXN0IG1hcHBpbmcgKCIuJHNxbC4iKSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkgCX0KCQkJCQoJCQl9CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSAKCQl7CgkJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byBtYXAgbWVtYmVyIHR5cGVzIHRvIGVtYWlsIHNlcnZpY2UgcHJvdmlkZXIgbGlzdHMiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJTU1fVHJhbnNhY3Rpb246OmNvbW1pdCgpOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldExpc3RJZEZvck1lbWJlcnNoaXBMZXZlbCgkbWVtYmVyc2hpcElkKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCR0aGlzLT5nZXRUb2tlbigpKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJaWYgKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSkKCQl7CgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgiU0VMRUNUIGxpc3RfaWQgRlJPTSAiLk1NX1RBQkxFX0VNQUlMX1BST1ZJREVSX01BUFBJTkdTLiIgV0hFUkUgbWVtYmVyX3R5cGVfaWQgPSAlZCBhbmQgZW1haWxfc2VydmljZV9wcm92aWRlcl9pZCA9ICVkIiwgJG1lbWJlcnNoaXBJZCwgJHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKSkpOwoJCQkKCQkJaWYoIWVtcHR5KCRyZXN1bHQpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXN1bHQsIE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJObyBsaXN0IGFzc29jaWF0ZWQgd2l0aCBtZW1iZXJzaGlwIGxldmVsIElEIHskbWVtYmVyc2hpcElkfSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkvL3Nob3VsZCBuZXZlciBoYXBwZW4KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byByZXRyaWV2ZSBpbmZvcm1hdGlvbiBmb3IgdGhlIGVtYWlsIHNlcnZpY2UgcHJvdmlkZXIiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRMaXN0SWRGb3JNZW1iZXIoJGVtYWlsKQoJewoJCSRtZW1iZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkZW1haWwpOwoJCQoJCWlmICghJG1lbWJlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGxvY2F0ZSBtZW1iZXIgd2l0aCBlbWFpbCBhZGRyZXNzIHskZW1haWx9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJG1lbWJlcnNoaXBJZCA9ICRtZW1iZXItPmdldE1lbWJlcnNoaXBJZCgpOwoJCXJldHVybiAkdGhpcy0+Z2V0TGlzdElkRm9yTWVtYmVyc2hpcExldmVsKCRtZW1iZXJzaGlwSWQpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGlzdElkRm9yQnVuZGxlKCRidW5kbGVJZCwgJGxpc3RUeXBlKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoJGxpc3RUeXBlICE9IHNlbGY6OiRMSVNUX1RZUEVfQUNUSVZFICYmICRsaXN0VHlwZSAhPSBzZWxmOjokTElTVF9UWVBFX0NBTkNFTEVEKQoJCXsKCQkJJGxpc3RUeXBlID0gc2VsZjo6JExJU1RfVFlQRV9BQ1RJVkU7CgkJfQoJCQoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkdGhpcy0+Z2V0VG9rZW4oKSk7CgkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJewoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoIlNFTEVDVCBsaXN0X2lkIEZST00gIi5NTV9UQUJMRV9FTUFJTF9QUk9WSURFUl9CVU5ETEVfTUFQUElOR1MuIiBXSEVSRSBidW5kbGVfaWQgPSAlZCBhbmQgbGlzdF90eXBlID0gJyVzJyBhbmQgZW1haWxfc2VydmljZV9wcm92aWRlcl9pZCA9ICVkIiwgJGJ1bmRsZUlkLCAkbGlzdFR5cGUsICRwcm92aWRlcl9lbnRpdHktPmdldElkKCkpKTsKCQkJCgkJCWlmKCFlbXB0eSgkcmVzdWx0KSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzdWx0LCBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTm8gbGlzdCBhc3NvY2lhdGVkIHdpdGggYnVuZGxlIElEIHskYnVuZGxlSWR9IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCS8vc2hvdWxkIG5ldmVyIGhhcHBlbgoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIHJldHJpZXZlIGluZm9ybWF0aW9uIGZvciB0aGUgZW1haWwgc2VydmljZSBwcm92aWRlciIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KfQo=', 0, '2018-11-21 06:38:53'),
(10, 'membercontroller', 'Y2xhc3MgTWVtYmVyQ29udHJvbGxlciBpbXBsZW1lbnRzIFJlc3RDb250cm9sbGVyIAp7Cglwcml2YXRlIHN0YXRpYyAkUkVHRVhfSU5URUdFUl9PTkxZID0gIl5bMC05XSskIjsKCXByaXZhdGUgc3RhdGljICRSRUdFWF9GTE9BVF9PTkxZID0gIl5bMC05XC5dKyQiOwoJcHJpdmF0ZSBzdGF0aWMgJFJFR0VYX0NPTlRBSU5TX05VTUJFUlMgPSAiWzAtOV0rIjsKCXByaXZhdGUgc3RhdGljICRSRUdFWF9DT05UQUlOU19TT01FVEhJTkcgPSAiW1x3XFdcLVwuXSsiOwoJcHJpdmF0ZSBzdGF0aWMgJFJFR0VYX0NPTlRBSU5TX0FMUEhBID0gIlthLXpBLVpdKyI7Cglwcml2YXRlIHN0YXRpYyAkUkVHRVhfQk9PTEVBTl9PTkxZID0gIl4oMHwxKSQiOwoJcHJpdmF0ZSBzdGF0aWMgJFJFR0VYX0NPTlRBSU5TX0VNQUlMID0gIihcQCkiOwoJcHJpdmF0ZSBzdGF0aWMgJFJFR0VYX0FMUEhBTlVNRVJJQ19PTkxZID0gIl5bYS16QS1aMC05XF9cLVwuXHNdKyQiOwoJCiAgICBmdW5jdGlvbiBleGVjdXRlKFJlc3RTZXJ2ZXIgJHJlc3QpIHt9CiAgICAKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRNZW1iZXIoJHJlc3QpCiAgICB7CiAgICAJJHBvc3QgPSAkcmVzdC0+Z2V0UmVxdWVzdCgpLT5nZXRQb3N0KCk7CiAgICAgICAgTU1fTG9nQXBpOjpsb2dSZXF1ZXN0KGpzb25fZW5jb2RlKCRwb3N0KSwgIi9nZXRNZW1iZXIiKTsKICAgICAgICAKICAgICAgICBpZighVXRpbHM6OmlzQXV0aGVudGljYXRlZCgkcG9zdCkpCiAgICAgICAgewoJICAgIAlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCBudWxsLCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgsIFJFU1BPTlNFX0VSUk9SX0NPREVfQVVUSCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9BVVRIKTsKICAgICAgICB9CiAgICAgICAgCgkJJHJlcSA9IG5ldyBzdGRDbGFzcygpOwoJCWlmKCFlbXB0eSgkcG9zdFsibWVtYmVyX2lkIl0pKQoJCXsKCQkJJHJlcS0+bWVtYmVyX2lkID0gc2VsZjo6JFJFR0VYX0lOVEVHRVJfT05MWTsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlcS0+ZW1haWwgPSBzZWxmOjokUkVHRVhfQ09OVEFJTlNfRU1BSUw7CgkJfQoJCSRkYXRhID0gVXRpbHM6OnByb2Nlc3NBcGlSZXF1ZXN0RGF0YSgkcG9zdCwgJHJlcSk7CiAgICAgICAgCgkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGRhdGEpKQoJCXsKCQkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgbnVsbCwgJGRhdGEtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfTUlTU0lOR19QQVJBTVMsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfTUlTU0lOR19QQVJBTVMpOwoJCX0KCQkKCQkkcmVzdWx0ID0gTU1fQVBJU2VydmljZTo6Z2V0TWVtYmVyKCRkYXRhKTsKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQl7CgkgICAgCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRyZXN1bHQtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfQ09ORkxJQ1QsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQ09ORkxJQ1QpOwoJCX0KCQkKCSAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAkcmVzdWx0LT5tZXNzYWdlKTsKICAgIH0KICAgIAogICAgcHVibGljIGZ1bmN0aW9uIHVwZGF0ZU1lbWJlcigkcmVzdCkKICAgIHsJCiAgICAJJHBvc3QgPSAkcmVzdC0+Z2V0UmVxdWVzdCgpLT5nZXRQb3N0KCk7CiAgICAgICAgTU1fTG9nQXBpOjpsb2dSZXF1ZXN0KGpzb25fZW5jb2RlKCRwb3N0KSwgIi91cGRhdGVNZW1iZXIiKTsKICAgICAgICAKICAgICAgICBpZighVXRpbHM6OmlzQXV0aGVudGljYXRlZCgkcG9zdCkpCiAgICAgICAgewoJICAgIAlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCBudWxsLCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgsIFJFU1BPTlNFX0VSUk9SX0NPREVfQVVUSCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9BVVRIKTsKICAgICAgICB9CiAgICAgICAgCiAgICAJJHJlcSA9IG5ldyBzdGRDbGFzcygpOwoJCWlmKCFlbXB0eSgkcG9zdFsibWVtYmVyX2lkIl0pKQoJCXsKCQkJJHJlcS0+bWVtYmVyX2lkID0gc2VsZjo6JFJFR0VYX0lOVEVHRVJfT05MWTsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlcS0+ZW1haWwgPSBzZWxmOjokUkVHRVhfQ09OVEFJTlNfRU1BSUw7CgkJfQoJCSRkYXRhID0gVXRpbHM6OnByb2Nlc3NBcGlSZXF1ZXN0RGF0YSgkcG9zdCwgJHJlcSk7CgkJCgkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGRhdGEpKQoJCXsKCQkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgbnVsbCwgJGRhdGEtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfTUlTU0lOR19QQVJBTVMsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfTUlTU0lOR19QQVJBTVMpOwoJCX0KICAgICAgICAKCQkkcmVzdWx0ID0gTU1fQVBJU2VydmljZTo6dXBkYXRlTWVtYmVyKCRkYXRhKTsKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQl7CgkJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRyZXN1bHQtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfQ09ORkxJQ1QsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQ09ORkxJQ1QpOwoJCX0KCQkKCSAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAkcmVzdWx0LT5tZXNzYWdlKTsKICAgIH0KICAgIAogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZU1lbWJlcigkcmVzdCkKICAgIHsKICAgIAkkcG9zdCA9ICRyZXN0LT5nZXRSZXF1ZXN0KCktPmdldFBvc3QoKTsKICAgICAgICBNTV9Mb2dBcGk6OmxvZ1JlcXVlc3QoanNvbl9lbmNvZGUoJHBvc3QpLCAiL2NyZWF0ZU1lbWJlciIpOwogICAgICAgIAogICAgICAgIGlmKCFVdGlsczo6aXNBdXRoZW50aWNhdGVkKCRwb3N0KSkKICAgICAgICB7CgkgICAgCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQVVUSCwgUkVTUE9OU0VfRVJST1JfQ09ERV9BVVRILCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgpOwogICAgICAgIH0KICAgICAgICAKICAgIAkkcmVxID0gbmV3IHN0ZENsYXNzKCk7CiAgICAJJHJlcS0+bWVtYmVyc2hpcF9sZXZlbF9pZCA9IHNlbGY6OiRSRUdFWF9JTlRFR0VSX09OTFk7CgkJJHJlcS0+ZW1haWwgPSBzZWxmOjokUkVHRVhfQ09OVEFJTlNfRU1BSUw7CgkJJGRhdGEgPSBVdGlsczo6cHJvY2Vzc0FwaVJlcXVlc3REYXRhKCRwb3N0LCAkcmVxKTsKCQkKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkZGF0YSkpCgkJewoJCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCBudWxsLCAkZGF0YS0+bWVzc2FnZSwgUkVTUE9OU0VfRVJST1JfQ09ERV9NSVNTSU5HX1BBUkFNUywgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9NSVNTSU5HX1BBUkFNUyk7CgkJfQogICAgICAgIAoJCSRyZXN1bHQgPSBNTV9BUElTZXJ2aWNlOjpjcmVhdGVNZW1iZXIoJGRhdGEpOwoJCQogICAgCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJewoJCQkkdXNlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRkYXRhLT5lbWFpbCk7CgkJCQoJCQlpZighJHVzZXItPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgbnVsbCwgIkZhaWxlZCB0byBjcmVhdGUgdXNlciB3aXRoIGVtYWlsIGFkZHJlc3MgeyRkYXRhLT5lbWFpbH0iLCBSRVNQT05TRV9FUlJPUl9DT0RFX0NPTkZMSUNULCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0NPTkZMSUNUKTsKCQkJfQoJCQkKCQkJJHVzZXJEYXRhID0gYXJyYXkoCgkJCQknbWVtYmVyX2lkJwkJCT0+ICR1c2VyLT5nZXRJZCgpLAoJCQkJJ3VzZXJuYW1lJwkJCT0+ICR1c2VyLT5nZXRVc2VybmFtZSgpLAoJCQkJJ2VtYWlsJyAJCQk9PiAkdXNlci0+Z2V0RW1haWwoKSwKCQkJCSdwYXNzd29yZCcJCQk9PiAkdXNlci0+Z2V0UGFzc3dvcmQoKSwKCQkJCSdjb25maXJtYXRpb25VcmwnCT0+ICRyZXN1bHQtPmdldERhdGEoTU1fUmVzcG9uc2U6OiREQVRBX0tFWV9VUkwpCgkJCSk7CgoJICAgCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAkdXNlckRhdGEsICR1c2VyRGF0YSk7CgkJfQoJCWVsc2UKCQl7CgkgICAgCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRyZXN1bHQtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfQ09ORkxJQ1QsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQ09ORkxJQ1QpOwoJCX0KICAgIH0KICAgIAogICAgcHVibGljIGZ1bmN0aW9uIHB1cmNoYXNlQnVuZGxlKCRyZXN0KQogICAgewogICAgCSRwb3N0ID0gJHJlc3QtPmdldFJlcXVlc3QoKS0+Z2V0UG9zdCgpOwogICAgCU1NX0xvZ0FwaTo6bG9nUmVxdWVzdChqc29uX2VuY29kZSgkcG9zdCksICIvcHVyY2hhc2VCdW5kbGUiKTsKICAgIAogICAgCWlmKCFVdGlsczo6aXNBdXRoZW50aWNhdGVkKCRwb3N0KSkKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQVVUSCwgUkVTUE9OU0VfRVJST1JfQ09ERV9BVVRILCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgpOwogICAgCX0KICAKICAgIAkkcmVxID0gbmV3IHN0ZENsYXNzKCk7CiAgICAJJHJlcS0+ZW1haWwgPSBzZWxmOjokUkVHRVhfQ09OVEFJTlNfQUxQSEE7CgkJJHJlcS0+cHJvZHVjdF9pZCA9IHNlbGY6OiRSRUdFWF9JTlRFR0VSX09OTFk7CgkJJGRhdGEgPSBVdGlsczo6cHJvY2Vzc0FwaVJlcXVlc3REYXRhKCRwb3N0LCAkcmVxKTsKCQkKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkZGF0YSkpCgkJewoJCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCBudWxsLCAkZGF0YS0+bWVzc2FnZSwgUkVTUE9OU0VfRVJST1JfQ09ERV9NSVNTSU5HX1BBUkFNUywgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9NSVNTSU5HX1BBUkFNUyk7CgkJfQogICAgCiAgICAJJHJlc3VsdCA9IE1NX0FQSVNlcnZpY2U6OnB1cmNoYXNlQnVuZGxlKCRkYXRhKTsKICAgIAkKICAgIAlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQogICAgCXsKICAgIAkJJHVybCA9ICRyZXN1bHQtPmdldERhdGEoTU1fUmVzcG9uc2U6OiREQVRBX0tFWV9VUkwpOwogICAgCQlpZighZW1wdHkoJHVybCkpCiAgICAJCXsJCgkgICAgCQkkdXNlckRhdGEgPSBhcnJheSgKCSAgICAJCQknY29uZmlybWF0aW9uVXJsJyA9PiAkcmVzdWx0LT5nZXREYXRhKE1NX1Jlc3BvbnNlOjokREFUQV9LRVlfVVJMKQoJICAgIAkJKTsKICAgIAkKICAgIAkJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsICR1c2VyRGF0YSwgJHVzZXJEYXRhKTsKICAgIAkJfQogICAgCQllbHNlCiAgICAJCXsKICAgIAkJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsICRyZXN1bHQtPm1lc3NhZ2UpOwogICAgCQl9CiAgICAJfQogICAgCWVsc2UKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRyZXN1bHQtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfQ09ORkxJQ1QsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQ09ORkxJQ1QpOwogICAgCX0KICAgIH0KICAgIAogICAgcHVibGljIGZ1bmN0aW9uIGFkZEJ1bmRsZSgkcmVzdCkKICAgIHsKICAgIAkkcG9zdCA9ICRyZXN0LT5nZXRSZXF1ZXN0KCktPmdldFBvc3QoKTsKICAgIAlNTV9Mb2dBcGk6OmxvZ1JlcXVlc3QoanNvbl9lbmNvZGUoJHBvc3QpLCAiL2FkZEJ1bmRsZSIpOwogICAgCiAgICAJaWYoIVV0aWxzOjppc0F1dGhlbnRpY2F0ZWQoJHBvc3QpKQogICAgCXsKICAgIAkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgbnVsbCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9BVVRILCBSRVNQT05TRV9FUlJPUl9DT0RFX0FVVEgsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQVVUSCk7CiAgICAJfQogICAgCQogICAgCSRyZXEgPSBuZXcgc3RkQ2xhc3MoKTsKICAgIAkkcmVxLT5tZW1iZXJfaWQgPSBzZWxmOjokUkVHRVhfSU5URUdFUl9PTkxZOwogICAgCSRyZXEtPmJ1bmRsZV9pZCA9IHNlbGY6OiRSRUdFWF9JTlRFR0VSX09OTFk7CiAgICAJJGRhdGEgPSBVdGlsczo6cHJvY2Vzc0FwaVJlcXVlc3REYXRhKCRwb3N0LCAkcmVxKTsKICAgIAogICAgCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRkYXRhKSkKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRkYXRhLT5tZXNzYWdlLCBSRVNQT05TRV9FUlJPUl9DT0RFX01JU1NJTkdfUEFSQU1TLCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX01JU1NJTkdfUEFSQU1TKTsKICAgIAl9CiAgICAKICAgIAkkcmVzdWx0ID0gTU1fQVBJU2VydmljZTo6YWRkQnVuZGxlKCRkYXRhKTsKICAgIAlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRyZXN1bHQtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfQ09ORkxJQ1QsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQ09ORkxJQ1QpOwogICAgCX0KICAgIAogICAgCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsICRyZXN1bHQtPm1lc3NhZ2UpOwogICAgfQogICAgCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQnVuZGxlKCRyZXN0KQogICAgewogICAgCSRwb3N0ID0gJHJlc3QtPmdldFJlcXVlc3QoKS0+Z2V0UG9zdCgpOwogICAgCU1NX0xvZ0FwaTo6bG9nUmVxdWVzdChqc29uX2VuY29kZSgkcG9zdCksICIvcmVtb3ZlQnVuZGxlIik7CiAgICAKICAgIAlpZighVXRpbHM6OmlzQXV0aGVudGljYXRlZCgkcG9zdCkpCiAgICAJewogICAgCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCBudWxsLCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgsIFJFU1BPTlNFX0VSUk9SX0NPREVfQVVUSCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9BVVRIKTsKICAgIAl9CiAgICAJCiAgICAJJHJlcSA9IG5ldyBzdGRDbGFzcygpOwogICAgCSRyZXEtPm1lbWJlcl9pZCA9IHNlbGY6OiRSRUdFWF9JTlRFR0VSX09OTFk7CiAgICAJJHJlcS0+YnVuZGxlX2lkID0gc2VsZjo6JFJFR0VYX0lOVEVHRVJfT05MWTsKICAgIAkkZGF0YSA9IFV0aWxzOjpwcm9jZXNzQXBpUmVxdWVzdERhdGEoJHBvc3QsICRyZXEpOwogICAgCiAgICAJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGRhdGEpKQogICAgCXsKICAgIAkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgbnVsbCwgJGRhdGEtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfTUlTU0lOR19QQVJBTVMsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfTUlTU0lOR19QQVJBTVMpOwogICAgCX0KICAgIAogICAgCSRyZXN1bHQgPSBNTV9BUElTZXJ2aWNlOjpyZW1vdmVCdW5kbGUoJGRhdGEpOwogICAgCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQogICAgCXsKICAgIAkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgbnVsbCwgJHJlc3VsdC0+bWVzc2FnZSwgUkVTUE9OU0VfRVJST1JfQ09ERV9DT05GTElDVCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9DT05GTElDVCk7CiAgICAJfQogICAgCiAgICAJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgJHJlc3VsdC0+bWVzc2FnZSk7CiAgICB9CiAgICAKICAgIHB1YmxpYyBmdW5jdGlvbiBhZGRNZW1iZXIoJHJlc3QpCiAgICB7CiAgICAJJHBvc3QgPSAkcmVzdC0+Z2V0UmVxdWVzdCgpLT5nZXRQb3N0KCk7CiAgICAJTU1fTG9nQXBpOjpsb2dSZXF1ZXN0KGpzb25fZW5jb2RlKCRwb3N0KSwgIi9hZGRNZW1iZXIiKTsKICAgIAogICAgCWlmKCFVdGlsczo6aXNBdXRoZW50aWNhdGVkKCRwb3N0KSkKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQVVUSCwgUkVTUE9OU0VfRVJST1JfQ09ERV9BVVRILCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgpOwogICAgCX0KICAgIAkKICAgIAkkcmVxID0gbmV3IHN0ZENsYXNzKCk7CiAgICAJJHJlcS0+bWVtYmVyc2hpcF9sZXZlbF9pZCA9IHNlbGY6OiRSRUdFWF9JTlRFR0VSX09OTFk7CgkJJHJlcS0+ZW1haWwgPSBzZWxmOjokUkVHRVhfQ09OVEFJTlNfRU1BSUw7CiAgICAJJGRhdGEgPSBVdGlsczo6cHJvY2Vzc0FwaVJlcXVlc3REYXRhKCRwb3N0LCAkcmVxKTsKICAgIAogICAgCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRkYXRhKSkKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRkYXRhLT5tZXNzYWdlLCBSRVNQT05TRV9FUlJPUl9DT0RFX01JU1NJTkdfUEFSQU1TLCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX01JU1NJTkdfUEFSQU1TKTsKICAgIAl9CiAgICAKICAgIAkkcmVzdWx0ID0gTU1fQVBJU2VydmljZTo6YWRkTWVtYmVyKCRkYXRhKTsKICAgIAlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsICRyZXN1bHQtPm1lc3NhZ2UsIFJFU1BPTlNFX0VSUk9SX0NPREVfQ09ORkxJQ1QsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQ09ORkxJQ1QpOwogICAgCX0KICAgIAogICAgCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsICRyZXN1bHQtPm1lc3NhZ2UpOwogICAgfQogICAgCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0TWVtYmVyc2hpcExldmVscygkcmVzdCkKICAgIHsKICAgIAkkcG9zdCA9ICRyZXN0LT5nZXRSZXF1ZXN0KCktPmdldFBvc3QoKTsKICAgIAlNTV9Mb2dBcGk6OmxvZ1JlcXVlc3QoanNvbl9lbmNvZGUoJHBvc3QpLCAiL2dldE1lbWJlcnNoaXBMZXZlbHMiKTsKICAgIAogICAgCWlmKCFVdGlsczo6aXNBdXRoZW50aWNhdGVkKCRwb3N0KSkKICAgIAl7CiAgICAJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsIG51bGwsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfQVVUSCwgUkVTUE9OU0VfRVJST1JfQ09ERV9BVVRILCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgpOwogICAgCX0KICAgIAogICAgCSRyZXN1bHQgPSBNTV9BUElTZXJ2aWNlOjpnZXRNZW1iZXJzaGlwTGV2ZWxzKCk7CiAgICAJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCiAgICAJewogICAgCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCBudWxsLCAkcmVzdWx0LT5tZXNzYWdlLCBSRVNQT05TRV9FUlJPUl9DT0RFX0NPTkZMSUNULCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0NPTkZMSUNUKTsKICAgIAl9CiAgICAKICAgIAlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAkcmVzdWx0LT5tZXNzYWdlKTsKICAgIH0KICAgIAogICAgcHVibGljIGZ1bmN0aW9uIGdldEJ1bmRsZXMoJHJlc3QpCiAgICB7CiAgICAJJHBvc3QgPSAkcmVzdC0+Z2V0UmVxdWVzdCgpLT5nZXRQb3N0KCk7CiAgICAJTU1fTG9nQXBpOjpsb2dSZXF1ZXN0KGpzb25fZW5jb2RlKCRwb3N0KSwgIi9nZXRCdW5kbGVzIik7CiAgICAKICAgIAlpZighVXRpbHM6OmlzQXV0aGVudGljYXRlZCgkcG9zdCkpCiAgICAJewogICAgCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCBudWxsLCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX0FVVEgsIFJFU1BPTlNFX0VSUk9SX0NPREVfQVVUSCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9BVVRIKTsKICAgIAl9CiAgICAKICAgIAkkcmVzdWx0ID0gTU1fQVBJU2VydmljZTo6Z2V0QnVuZGxlcygpOwogICAgCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQogICAgCXsKICAgIAkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgbnVsbCwgJHJlc3VsdC0+bWVzc2FnZSwgUkVTUE9OU0VfRVJST1JfQ09ERV9DT05GTElDVCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9DT05GTElDVCk7CiAgICAJfQogICAgCiAgICAJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgJHJlc3VsdC0+bWVzc2FnZSk7CiAgICB9Cn0=', 0, '2018-11-21 06:38:53'),
(11, 'curlresponse', 'IyBDdXJsUmVzcG9uc2UKIwojIEF1dGhvciAgU2VhbiBIdWJlciAtIHNodWJlckBodWJlcnJ5LmNvbQojIERhdGUgICAgTWF5IDIwMDgKIwojIEEgYmFzaWMgQ1VSTCB3cmFwcGVyIGZvciBQSFAKIwojIFNlZSB0aGUgUkVBRE1FIGZvciBkb2N1bWVudGF0aW9uL2V4YW1wbGVzIG9yIGh0dHA6Ly9waHAubmV0L2N1cmwgZm9yIG1vcmUgaW5mb3JtYXRpb24KIyBhYm91dCB0aGUgbGliY3VybCBleHRlbnNpb24gZm9yIFBIUCAtLSBodHRwOi8vZ2l0aHViLmNvbS9zaHViZXIvY3VybC90cmVlL21hc3RlcgojCgpjbGFzcyBNTV9DdXJsUmVzcG9uc2UKewogICAgcHVibGljICRib2R5ID0gJyc7CiAgICBwdWJsaWMgJGhlYWRlcnMgPSBhcnJheSgpOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcmVzcG9uc2UpCiAgICB7CiAgICAgICAgIyBFeHRyYWN0IGhlYWRlcnMgZnJvbSByZXNwb25zZQogICAgICAgICRwYXR0ZXJuID0gJyNIVFRQL1xkXC5cZC4qPyQuKj9cclxuXHJcbiNpbXMnOwogICAgICAgIHByZWdfbWF0Y2hfYWxsKCRwYXR0ZXJuLCAkcmVzcG9uc2UsICRtYXRjaGVzKTsKICAgICAgICAkaGVhZGVycyA9IGV4cGxvZGUoIlxyXG4iLCBzdHJfcmVwbGFjZSgiXHJcblxyXG4iLCAnJywgYXJyYXlfcG9wKCRtYXRjaGVzWzBdKSkpOwoKICAgICAgICAjIEV4dHJhY3QgdGhlIHZlcnNpb24gYW5kIHN0YXR1cyBmcm9tIHRoZSBmaXJzdCBoZWFkZXIKICAgICAgICAkdmVyc2lvbl9hbmRfc3RhdHVzID0gYXJyYXlfc2hpZnQoJGhlYWRlcnMpOwogICAgICAgIHByZWdfbWF0Y2goJyNIVFRQLyhcZFwuXGQpXHMoXGRcZFxkKVxzKC4qKSMnLCAkdmVyc2lvbl9hbmRfc3RhdHVzLCAkbWF0Y2hlcyk7CiAgICAgICAgJHRoaXMtPmhlYWRlcnNbJ0h0dHAtVmVyc2lvbiddID0gJG1hdGNoZXNbMV07CiAgICAgICAgJHRoaXMtPmhlYWRlcnNbJ1N0YXR1cy1Db2RlJ10gPSAkbWF0Y2hlc1syXTsKICAgICAgICAkdGhpcy0+aGVhZGVyc1snU3RhdHVzJ10gPSAkbWF0Y2hlc1syXS4nICcuJG1hdGNoZXNbM107CgogICAgICAgICMgQ29udmVydCBoZWFkZXJzIGludG8gYW4gYXNzb2NpYXRpdmUgYXJyYXkKICAgICAgICBmb3JlYWNoICgkaGVhZGVycyBhcyAkaGVhZGVyKSB7CiAgICAgICAgICAgIHByZWdfbWF0Y2goJyMoLio/KVw6XHMoLiopIycsICRoZWFkZXIsICRtYXRjaGVzKTsKICAgICAgICAgICAgJHRoaXMtPmhlYWRlcnNbJG1hdGNoZXNbMV1dID0gJG1hdGNoZXNbMl07CiAgICAgICAgfQoKICAgICAgICAjIFJlbW92ZSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZSBib2R5CiAgICAgICAgJHRoaXMtPmJvZHkgPSBwcmVnX3JlcGxhY2UoJHBhdHRlcm4sICcnLCAkcmVzcG9uc2UpOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBfX3RvU3RyaW5nKCkKICAgIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmJvZHk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGhlYWRlcnMoKXsKICAgICAgICByZXR1cm4gJHRoaXMtPmhlYWRlcnM7CiAgICB9Cn0K', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(12, 'event', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0V2ZW50CnsJCglwdWJsaWMgc3RhdGljICRNRU1CRVJfQUREID0gIm1tX21lbWJlcl9hZGQiOwoJcHVibGljIHN0YXRpYyAkUFJPRFVDVF9QVVJDSEFTRSA9ICJtbV9wcm9kdWN0X3B1cmNoYXNlIjsKCXB1YmxpYyBzdGF0aWMgJE1FTUJFUl9TVEFUVVNfQ0hBTkdFID0gIm1tX21lbWJlcl9zdGF0dXNfY2hhbmdlIjsKCXB1YmxpYyBzdGF0aWMgJE1FTUJFUl9NRU1CRVJTSElQX0NIQU5HRSA9ICJtbV9tZW1iZXJfbWVtYmVyc2hpcF9jaGFuZ2UiOwoJcHVibGljIHN0YXRpYyAkTUVNQkVSX0FDQ09VTlRfVVBEQVRFID0gIm1tX21lbWJlcl9hY2NvdW50X3VwZGF0ZSI7CglwdWJsaWMgc3RhdGljICRNRU1CRVJfREVMRVRFID0gIm1tX21lbWJlcl9kZWxldGUiOwoJcHVibGljIHN0YXRpYyAkQlVORExFX0FERCA9ICJtbV9idW5kbGVzX2FkZCI7CglwdWJsaWMgc3RhdGljICRCVU5ETEVfU1RBVFVTX0NIQU5HRSA9ICJtbV9idW5kbGVzX3N0YXR1c19jaGFuZ2UiOwoJcHVibGljIHN0YXRpYyAkUEFZTUVOVF9SRUNFSVZFRCA9ICJtbV9wYXltZW50X3JlY2VpdmVkIjsKCXB1YmxpYyBzdGF0aWMgJFBBWU1FTlRfUkVCSUxMID0gIm1tX3BheW1lbnRfcmViaWxsIjsKCXB1YmxpYyBzdGF0aWMgJFBBWU1FTlRfUkVCSUxMX0RFQ0xJTkVEID0gIm1tX3BheW1lbnRfcmViaWxsX2RlY2xpbmVkIjsKCXB1YmxpYyBzdGF0aWMgJFJFRlVORF9JU1NVRUQgPSAibW1fcmVmdW5kX2lzc3VlZCI7CglwdWJsaWMgc3RhdGljICRCSUxMSU5HX1NVQlNDUklQVElPTl9VUERBVEVEID0gIm1tX2JpbGxpbmdfc3Vic2NyaXB0aW9uX3VwZGF0ZWQiOwoJcHVibGljIHN0YXRpYyAkQklMTElOR19TVUJTQ1JJUFRJT05fUkVCSUxMX0RBVEVfQ0hBTkdFRCA9ICJtbV9iaWxsaW5nX3N1YnNjcmlwdGlvbl9yZWJpbGxfZGF0ZV9jaGFuZ2VkIjsKCXB1YmxpYyBzdGF0aWMgJEJJTExJTkdfU1VCU0NSSVBUSU9OX0NBTkNFTEVEID0gIm1tX2JpbGxpbmdfc3Vic2NyaXB0aW9uX2NhbmNlbGVkIjsKCXB1YmxpYyBzdGF0aWMgJEFGRklMSUFURV9JTkZPX0NIQU5HRUQgPSAibW1fYWZmaWxpYXRlX2luZm9fY2hhbmdlZCI7CglwdWJsaWMgc3RhdGljICRDT01NSVNTSU9OX0lOSVRJQUwgPSAibW1fY29tbWlzc2lvbl9pbml0aWFsIjsKCXB1YmxpYyBzdGF0aWMgJENPTU1JU1NJT05fUkVCSUxMID0gIm1tX2NvbW1pc3Npb25fcmViaWxsIjsKCXB1YmxpYyBzdGF0aWMgJENBTkNFTF9DT01NSVNTSU9OID0gIm1tX2NvbW1pc3Npb25fY2FuY2VsIjsKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwYWNrYWdlTWVtYmVyRGF0YSgkbWVtYmVySWQsICRhY2N0SW5mb0NoYW5nZXM9bnVsbCkKCXsKCQkkdXNlckRhdGEgPSBhcnJheSgpOwoJCQoJCSR1c2VyID0gbmV3IE1NX1VzZXIoJG1lbWJlcklkKTsKCQkKCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJJHVzZXJEYXRhID0gYXJyYXkoCgkJCQknbWVtYmVyX2lkJz0+JHVzZXItPmdldElkKCksCgkJCQkncmVnaXN0ZXJlZCc9PiR1c2VyLT5nZXRSZWdpc3RyYXRpb25EYXRlKCksCgkJCQknY2FuY2VsbGF0aW9uX2RhdGUnPT4iIiwKCQkJCSdsYXN0X2xvZ2dlZF9pbic9PiR1c2VyLT5nZXRMYXN0TG9naW5EYXRlKCksCgkJCQknbGFzdF91cGRhdGVkJz0+JHVzZXItPmdldExhc3RVcGRhdGVkRGF0ZSgpLAoJCQkJJ2RheXNfYXNfbWVtYmVyJz0+JHVzZXItPmdldERheXNBc01lbWJlcigpLAoJCQkJJ3N0YXR1cyc9PiR1c2VyLT5nZXRTdGF0dXMoKSwKCQkJCSdzdGF0dXNfbmFtZSc9Pk1NX1N0YXR1czo6Z2V0TmFtZSgkdXNlci0+Z2V0U3RhdHVzKCkpLAoJCQkJJ21lbWJlcnNoaXBfbGV2ZWwnPT4kdXNlci0+Z2V0TWVtYmVyc2hpcElkKCksCgkJCQknbWVtYmVyc2hpcF9sZXZlbF9uYW1lJz0+JHVzZXItPmdldE1lbWJlcnNoaXBOYW1lKCksCgkJCQknaXNfY29tcGxpbWVudGFyeSc9PiR1c2VyLT5pc0NvbXBsaW1lbnRhcnkoKSA/ICd0cnVlJyA6ICdmYWxzZScsCgkJCQknZmlyc3RfbmFtZSc9PiR1c2VyLT5nZXRGaXJzdE5hbWUoKSwKCQkJCSdsYXN0X25hbWUnPT4kdXNlci0+Z2V0TGFzdE5hbWUoKSwKCQkJCSd1c2VybmFtZSc9PiR1c2VyLT5nZXRVc2VybmFtZSgpLAoJCQkJJ2VtYWlsJyA9PiAkdXNlci0+Z2V0RW1haWwoKSwKCQkJCSdwaG9uZScgPT4gJHVzZXItPmdldFBob25lKCksCgkJCQknYmlsbGluZ19hZGRyZXNzJz0+JHVzZXItPmdldEJpbGxpbmdBZGRyZXNzKCksCgkJCQknYmlsbGluZ19jaXR5Jz0+JHVzZXItPmdldEJpbGxpbmdDaXR5KCksCgkJCQknYmlsbGluZ19zdGF0ZSc9PiR1c2VyLT5nZXRCaWxsaW5nU3RhdGUoKSwKCQkJCSdiaWxsaW5nX3ppcF9jb2RlJz0+JHVzZXItPmdldEJpbGxpbmdaaXBDb2RlKCksCgkJCQknYmlsbGluZ19jb3VudHJ5Jz0+JHVzZXItPmdldEJpbGxpbmdDb3VudHJ5TmFtZSgpLAoJCQkJJ3NoaXBwaW5nX2FkZHJlc3MnPT4kdXNlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCksCgkJCQknc2hpcHBpbmdfY2l0eSc9PiR1c2VyLT5nZXRTaGlwcGluZ0NpdHkoKSwKCQkJCSdzaGlwcGluZ19zdGF0ZSc9PiR1c2VyLT5nZXRTaGlwcGluZ1N0YXRlKCksCgkJCQknc2hpcHBpbmdfemlwX2NvZGUnPT4kdXNlci0+Z2V0U2hpcHBpbmdaaXBDb2RlKCksCgkJCQknc2hpcHBpbmdfY291bnRyeSc9PiR1c2VyLT5nZXRTaGlwcGluZ0NvdW50cnlOYW1lKCkKCQkJKTsKCQkJCgkJCWlmKCR1c2VyLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKCQkJewoJCQkJJHVzZXJEYXRhWydjYW5jZWxsYXRpb25fZGF0ZSddID0gJHVzZXItPmdldENhbmNlbGxhdGlvbkRhdGUoKTsKCQkJfQoJCQkKCQkJLy8gbGFzdCB2YWx1ZXMgZm9yIGFjY291bnQgaW5mbyBjaGFuZ2VzCgkJCWlmKCFpc19udWxsKCRhY2N0SW5mb0NoYW5nZXMpICYmIGNvdW50KCRhY2N0SW5mb0NoYW5nZXMpID4gMCkKCQkJewoJCQkJZm9yZWFjaCgkYWNjdEluZm9DaGFuZ2VzIGFzICRrZXk9PiR2YWx1ZSkKCQkJCXsKCQkJCQkkdXNlckRhdGFbImxhc3RfeyRrZXl9Il0gPSAkdmFsdWU7CgkJCQl9CgkJCX0KCQkJCgkJCS8vIGN1c3RvbSBmaWVsZHMKCQkJJGZpZWxkcyA9IE1NX0N1c3RvbUZpZWxkOjpnZXRDdXN0b21GaWVsZHNMaXN0KCk7CgkJCWZvcmVhY2goJGZpZWxkcyBhcyAkaWQ9PiR2YWwpCgkJCXsKCQkJCSRjdXN0b21GaWVsZCA9IG5ldyBNTV9DdXN0b21GaWVsZCgkaWQpOwoJCQkJCQoJCQkJaWYoJGN1c3RvbUZpZWxkLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHVzZXJEYXRhWyJjZl8iLiRjdXN0b21GaWVsZC0+Z2V0SWQoKV0gPSBodG1sZW50aXRpZXMoJHVzZXItPmdldEN1c3RvbURhdGFCeUZpZWxkSWQoJGN1c3RvbUZpZWxkLT5nZXRJZCgpKS0+Z2V0VmFsdWUoKSxFTlRfUVVPVEVTLCAnVVRGLTgnLCB0cnVlKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQlyZXR1cm4gJHVzZXJEYXRhOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHBhY2thZ2VCdW5kbGVEYXRhKCRtZW1iZXJJZCwgJGJ1bmRsZUlkKQoJewoJCSR1c2VyRGF0YSA9IGFycmF5KCk7CgkKCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRtZW1iZXJJZCk7CgkKCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJJHVzZXJEYXRhID0gc2VsZjo6cGFja2FnZU1lbWJlckRhdGEoJG1lbWJlcklkKTsKCQkJJGFwcGxpZWRCdW5kbGUgPSBNTV9BcHBsaWVkQnVuZGxlOjpnZXRBcHBsaWVkQnVuZGxlKCRtZW1iZXJJZCwgJGJ1bmRsZUlkKTsKCQkJCgkJCWlmKCRhcHBsaWVkQnVuZGxlLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSR1c2VyRGF0YVsiYnVuZGxlX2lkIl0gPSAkYXBwbGllZEJ1bmRsZS0+Z2V0QnVuZGxlSWQoKTsKCQkJCQoJCQkJaWYoJGJ1bmRsZUlkID09IE1NX0FwcGxpZWRCdW5kbGU6OiRTQU1QTEVfQVBQTElFRF9CVU5ETEVfSUQpCgkJCQl7CgkJCQkJJHVzZXJEYXRhWyJidW5kbGVfbmFtZSJdID0gIlNhbXBsZSBCdW5kbGUiOwoJCQkJCSR1c2VyRGF0YVsiZGF5c193aXRoX2J1bmRsZSJdID0gIjUiOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSR1c2VyRGF0YVsiYnVuZGxlX25hbWUiXSA9ICRhcHBsaWVkQnVuZGxlLT5nZXRCdW5kbGUoKS0+Z2V0TmFtZSgpOwoJCQkJCSR1c2VyRGF0YVsiZGF5c193aXRoX2J1bmRsZSJdID0gJHVzZXItPmdldERheXNXaXRoQnVuZGxlKCRhcHBsaWVkQnVuZGxlLT5nZXRCdW5kbGVJZCgpKTsKCQkJCX0KCQkJCQoJCQkJJHVzZXJEYXRhWyJidW5kbGVfaXNfY29tcGxpbWVudGFyeSJdID0gJGFwcGxpZWRCdW5kbGUtPmlzQ29tcGxpbWVudGFyeSgpID8gJ3RydWUnIDogJ2ZhbHNlJzsKCQkJCSR1c2VyRGF0YVsiYnVuZGxlX3N0YXR1cyJdID0gJGFwcGxpZWRCdW5kbGUtPmdldFN0YXR1cygpOwoJCQkJJHVzZXJEYXRhWyJidW5kbGVfc3RhdHVzX25hbWUiXSA9IE1NX1N0YXR1czo6Z2V0TmFtZSgkYXBwbGllZEJ1bmRsZS0+Z2V0U3RhdHVzKCkpOwoJCQkJJHVzZXJEYXRhWyJidW5kbGVfZGF0ZV9hZGRlZCJdID0gJGFwcGxpZWRCdW5kbGUtPmdldEFwcGx5RGF0ZSgpOwoJCQkJJHVzZXJEYXRhWyJidW5kbGVfbGFzdF91cGRhdGVkIl0gPSAkYXBwbGllZEJ1bmRsZS0+Z2V0U3RhdHVzVXBkYXRlZERhdGUoKTsKCQkJCSR1c2VyRGF0YVsnYnVuZGxlX2NhbmNlbGxhdGlvbl9kYXRlJ10gPSAiIjsKCQkJCQoJCQkJaWYoJGFwcGxpZWRCdW5kbGUtPmlzUGVuZGluZ0NhbmNlbGxhdGlvbigpKQoJCQkJewoJCQkJCSR1c2VyRGF0YVsnYnVuZGxlX2NhbmNlbGxhdGlvbl9kYXRlJ10gPSAkYXBwbGllZEJ1bmRsZS0+Z2V0Q2FuY2VsbGF0aW9uRGF0ZSgpOzsKCQkJCX0KCQkJCQoJCQl9CgkJfQoJCgkJcmV0dXJuICR1c2VyRGF0YTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHBhY2thZ2VQcm9kdWN0RGF0YSgkcHJvZHVjdElkLCAkdXNlcklkLCAkb3JkZXJJZCwgJG9yZGVySXRlbUlkID0gbnVsbCkKCXsgCgkJJHVzZXJQcm9kdWN0RGF0YSA9IHNlbGY6OnBhY2thZ2VPcmRlckRhdGEoJHVzZXJJZCwgJG9yZGVySWQsICRvcmRlckl0ZW1JZCk7ICAKCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRwcm9kdWN0SWQpOwoJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJeyAgCgkJCSRrZXkgPSAicHJvZHVjdF8iOwoJCQkkdXNlclByb2R1Y3REYXRhWyRrZXkuImlkIl0gPSAkcHJvZHVjdC0+Z2V0SWQoKTsKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJyZWZlcmVuY2Vfa2V5Il0gPSAkcHJvZHVjdC0+Z2V0UmVmZXJlbmNlS2V5KCk7CgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4ibmFtZSJdID0gJHByb2R1Y3QtPmdldE5hbWUoKTsKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJza3UiXSA9ICRwcm9kdWN0LT5nZXRTa3UoKTsKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJkZXNjcmlwdGlvbiJdID0gJHByb2R1Y3QtPmdldERlc2NyaXB0aW9uKCk7ICAKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJwcmljZSJdID0gJHByb2R1Y3QtPmdldFByaWNlKGZhbHNlKTsKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJjdXJyZW5jeSJdID0gJHByb2R1Y3QtPmdldEN1cnJlbmN5KCk7CgkJCSAKCQkJJHJlYmlsbERhdGEgPSBNTV9PcmRlclV0aWxzOjpnZXRSZWJpbGxBbW91bnRzKG5ldyBNTV9PcmRlcigkb3JkZXJJZCkpOyAKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJyZWJpbGxfdG90YWwiXSA9ICRyZWJpbGxEYXRhWyJyZWJpbGxfdG90YWwiXTsKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJyZWJpbGxfc2hpcHBpbmciXSA9ICRyZWJpbGxEYXRhWyJyZWJpbGxfc2hpcHBpbmciXTsKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJyZWJpbGxfc3VidG90YWwiXSA9ICRyZWJpbGxEYXRhWyJyZWJpbGxfc3VidG90YWwiXTsKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJyZWJpbGxfZGlzY291bnQiXSA9ICRyZWJpbGxEYXRhWyJyZWJpbGxfZGlzY291bnQiXTsKCQkJCgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4icmViaWxsX3BlcmlvZCJdID0gJHByb2R1Y3QtPmdldFJlYmlsbFBlcmlvZCgpOyAKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJyZWJpbGxfZnJlcXVlbmN5Il0gPSAkcHJvZHVjdC0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7IAoJCQkkdXNlclByb2R1Y3REYXRhWyRrZXkuImxpbWl0X3BheW1lbnRzIl0gPSAkcHJvZHVjdC0+ZG9MaW1pdFBheW1lbnRzKCk7CgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4ibnVtYmVyX29mX3BheW1lbnRzIl0gPSAwOwoJCQlpZigkcHJvZHVjdC0+ZG9MaW1pdFBheW1lbnRzKCkpCgkJCXsKCQkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4ibnVtYmVyX29mX3BheW1lbnRzIl0gPSAkcHJvZHVjdC0+Z2V0TnVtYmVyT2ZQYXltZW50cygpOwkKCQkJfQoJCQkgCgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4iaGFzX3RyaWFsIl0gPSAkcHJvZHVjdC0+aGFzVHJpYWwoKTsgCgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4ibGltaXRfdHJpYWwiXSA9ICRwcm9kdWN0LT5kb0xpbWl0VHJpYWwoKTsgCgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4ibGltaXRfdHJpYWxfYWx0X3Byb2R1Y3RfaWQiXSA9IDA7CgkJCWlmKCRwcm9kdWN0LT5kb0xpbWl0VHJpYWwoKSkKCQkJewoJCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJsaW1pdF90cmlhbF9hbHRfcHJvZHVjdF9pZCJdID0gJHByb2R1Y3QtPmdldExpbWl0VHJpYWxBbHRQcm9kdWN0SWQoKTsKCQkJfQoJCQkKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJpc19zaGlwcGFibGUiXSA9ICRwcm9kdWN0LT5pc1NoaXBwYWJsZSgpOyAKCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJ0cmlhbF9hbW91bnQiXSA9IDA7CgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4idHJpYWxfZHVyYXRpb24iXSA9IDA7CgkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4idHJpYWxfZnJlcXVlbmN5Il0gPSAwOwoJCQlpZigkcHJvZHVjdC0+aGFzVHJpYWwoKSkKCQkJewoJCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJ0cmlhbF9hbW91bnQiXSA9ICRwcm9kdWN0LT5nZXRUcmlhbEFtb3VudCgpOwoJCQkJJHVzZXJQcm9kdWN0RGF0YVska2V5LiJ0cmlhbF9kdXJhdGlvbiJdID0gJHByb2R1Y3QtPmdldFRyaWFsRHVyYXRpb24oKTsKCQkJCSR1c2VyUHJvZHVjdERhdGFbJGtleS4idHJpYWxfZnJlcXVlbmN5Il0gPSAkcHJvZHVjdC0+Z2V0VHJpYWxGcmVxdWVuY3koKTsKCQkJfSAgCgkJfSAKCQlyZXR1cm4gJHVzZXJQcm9kdWN0RGF0YTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHBhY2thZ2VPcmRlckRhdGEoJG1lbWJlcklkLCAkb3JkZXJJZCwgJG9yZGVySXRlbUlkPW51bGwsICR0cmFuc2FjdGlvbklkPW51bGwsICRpc1JlYmlsbD1mYWxzZSkKCXsKCQkkdXNlckRhdGEgPSBhcnJheSgpOwoJCgkJJHVzZXIgPSBuZXcgTU1fVXNlcigkbWVtYmVySWQpOwoJCQoJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQkkdXNlckRhdGEgPSBzZWxmOjpwYWNrYWdlTWVtYmVyRGF0YSgkbWVtYmVySWQpOwoJCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySWQpOwoJCQkKCQkJaWYoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSR1c2VyRGF0YVsib3JkZXJfaWQiXSA9ICRvcmRlcklkOwoJCQkJJHVzZXJEYXRhWyJvcmRlcl9udW1iZXIiXSA9ICRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKTsKCQkJCQoJCQkJJHVzZXJEYXRhWyJvcmRlcl9pdGVtX2lkIl0gPSAiIjsKCQkJCWlmKCFlbXB0eSgkb3JkZXJJdGVtSWQpKQoJCQkJewoJCQkJCSR1c2VyRGF0YVsib3JkZXJfaXRlbV9pZCJdID0gJG9yZGVySXRlbUlkOwoJCQkJfQoJCQkJCgkJCQkkdXNlckRhdGFbIm9yZGVyX3RyYW5zYWN0aW9uX2lkIl0gPSAiIjsKCQkJCWlmKCFlbXB0eSgkdHJhbnNhY3Rpb25JZCkpCgkJCQl7CgkJCQkJJHVzZXJEYXRhWyJvcmRlcl90cmFuc2FjdGlvbl9pZCJdID0gJHRyYW5zYWN0aW9uSWQ7CgkJCQl9CgoJCQkJJHVzZXJEYXRhWyJvcmRlcl9pcF9hZGRyZXNzIl0gPSAkb3JkZXItPmdldElQQWRkcmVzcygpOwoJCQkJJHVzZXJEYXRhWyJvcmRlcl9zaGlwcGluZ19tZXRob2QiXSA9ICRvcmRlci0+Z2V0U2hpcHBpbmdPcHRpb25EZXNjcmlwdGlvbigpOwoJCQkJJHVzZXJEYXRhWyJvcmRlcl9iaWxsaW5nX2FkZHJlc3MiXSA9ICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0QWRkcmVzc0xpbmUxKCk7CgkJCQkkdXNlckRhdGFbIm9yZGVyX2JpbGxpbmdfY2l0eSJdID0gJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpLT5nZXRDaXR5KCk7CgkJCQkkdXNlckRhdGFbIm9yZGVyX2JpbGxpbmdfc3RhdGUiXSA9ICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0U3RhdGUoKTsKCQkJCSR1c2VyRGF0YVsib3JkZXJfYmlsbGluZ196aXBjb2RlIl0gPSAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCktPmdldFBvc3RhbENvZGUoKTsKCQkJCSR1c2VyRGF0YVsib3JkZXJfYmlsbGluZ19jb3VudHJ5Il0gPSAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCktPmdldENvdW50cnkoKTsKCQkJCSR1c2VyRGF0YVsib3JkZXJfc2hpcHBpbmdfYWRkcmVzcyJdID0gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0QWRkcmVzc0xpbmUxKCk7CgkJCQkkdXNlckRhdGFbIm9yZGVyX3NoaXBwaW5nX2NpdHkiXSA9ICRvcmRlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCktPmdldENpdHkoKTsKCQkJCSR1c2VyRGF0YVsib3JkZXJfc2hpcHBpbmdfc3RhdGUiXSA9ICRvcmRlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCktPmdldFN0YXRlKCk7CgkJCQkkdXNlckRhdGFbIm9yZGVyX3NoaXBwaW5nX3ppcGNvZGUiXSA9ICRvcmRlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCktPmdldFBvc3RhbENvZGUoKTsKCQkJCSR1c2VyRGF0YVsib3JkZXJfc2hpcHBpbmdfY291bnRyeSJdID0gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0Q291bnRyeSgpOwoJCQkJJHVzZXJEYXRhWyJvcmRlcl9hZmZpbGlhdGVfaWQiXSA9ICRvcmRlci0+Z2V0QWZmaWxpYXRlSWQoKTsKCQkJCSR1c2VyRGF0YVsib3JkZXJfc3ViYWZmaWxpYXRlX2lkIl0gPSAkb3JkZXItPmdldFN1YkFmZmlsaWF0ZUlkKCk7CgkJCQkKCQkJCSRvcmRlckl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCQkJJHByb2R1Y3RJbmZvID0gYXJyYXkoKTsKCQkJCQoJCQkJZm9yZWFjaCgkb3JkZXJJdGVtcyBhcyAkb3JkZXJJdGVtKQoJCQkJewoJCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCkpOwoJCQkJCQoJCQkJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkkY3JudFByb2R1Y3RJbmZvID0gYXJyYXkoKTsKCQkJCQkJJGNybnRQcm9kdWN0SW5mb1siaWQiXSA9ICRwcm9kdWN0LT5nZXRJZCgpOwoJCQkJCQkkY3JudFByb2R1Y3RJbmZvWyJuYW1lIl0gPSAkcHJvZHVjdC0+Z2V0TmFtZSgpOwoJCQkJCQkkY3JudFByb2R1Y3RJbmZvWyJza3UiXSA9ICRwcm9kdWN0LT5nZXRTa3UoKTsKCQkJCQkJJGNybnRQcm9kdWN0SW5mb1siYW1vdW50Il0gPSAkb3JkZXJJdGVtLT5nZXRBbW91bnQoKTsKCQkJCQkJJGNybnRQcm9kdWN0SW5mb1sicXVhbnRpdHkiXSA9ICRvcmRlckl0ZW0tPmdldFF1YW50aXR5KCk7CgkJCQkJCSRjcm50UHJvZHVjdEluZm9bInRvdGFsIl0gPSAkb3JkZXJJdGVtLT5nZXRUb3RhbCgpOwoJCQkJCQkkY3JudFByb2R1Y3RJbmZvWyJpc19yZWN1cnJpbmciXSA9ICRvcmRlckl0ZW0tPmlzUmVjdXJyaW5nKCk7CgkJCQkJCSRjcm50UHJvZHVjdEluZm9bInJlY3VycmluZ19hbW91bnQiXSA9ICRvcmRlckl0ZW0tPmdldFJlY3VycmluZ0Ftb3VudCgpOwoJCQkJCQkkY3JudFByb2R1Y3RJbmZvWyJyZWJpbGxfcGVyaW9kIl0gPSAkb3JkZXJJdGVtLT5nZXRSZWJpbGxQZXJpb2QoKTsKCQkJCQkJJGNybnRQcm9kdWN0SW5mb1sicmViaWxsX2ZyZXF1ZW5jeSJdID0gJG9yZGVySXRlbS0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7CgkJCQkJCQoJCQkJCQkkcHJvZHVjdEluZm9bXSA9ICRjcm50UHJvZHVjdEluZm87CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkkdXNlckRhdGFbIm9yZGVyX3Byb2R1Y3RzIl0gPSBqc29uX2VuY29kZSgkcHJvZHVjdEluZm8pOwoJCQkJCgkJCQkvLyBkZXRlcm1pbmUgb3JkZXIgdG90YWwgYW5kIGRpc2NvdW50IGFtb3VudCBiYXNlZCBvbiBpZiB0aGlzIGlzIGEgcmViaWxsIHBheW1lbnQgb3Igbm90CgkJCQlpZighJGlzUmViaWxsKQoJCQkJewoJCQkJCSR1c2VyRGF0YVsib3JkZXJfdG90YWwiXSA9ICRvcmRlci0+Z2V0VG90YWwoKTsKCQkJCQkkdXNlckRhdGFbIm9yZGVyX3N1YnRvdGFsIl0gPSAkb3JkZXItPmdldFN1YnRvdGFsKCk7CgkJCQkJJHVzZXJEYXRhWyJvcmRlcl9zaGlwcGluZyJdID0gJG9yZGVyLT5nZXRTaGlwcGluZygpOwoJCQkJCSR1c2VyRGF0YVsib3JkZXJfZGlzY291bnQiXSA9IGFicyhmbG9hdHZhbCgkb3JkZXItPmdldERpc2NvdW50KCkpKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkZGF0YSA9IE1NX09yZGVyVXRpbHM6OmdldFJlYmlsbEFtb3VudHMoJG9yZGVyKTsKCQkJCQkkdXNlckRhdGFbIm9yZGVyX3RvdGFsIl0gPSAkZGF0YVsicmViaWxsX3RvdGFsIl07CgkJCQkJJHVzZXJEYXRhWyJvcmRlcl9zdWJ0b3RhbCJdID0gJGRhdGFbInJlYmlsbF9zdWJ0b3RhbCJdOwoJCQkJCSR1c2VyRGF0YVsib3JkZXJfc2hpcHBpbmciXSA9ICRkYXRhWyJyZWJpbGxfc2hpcHBpbmciXTsKCQkJCQkkdXNlckRhdGFbIm9yZGVyX2Rpc2NvdW50Il0gPSAkZGF0YVsicmViaWxsX2Rpc2NvdW50Il07CgkJCQl9CgkJCQkKCQkJCSRvcmRlckl0ZW1zID0gJG9yZGVyLT5nZXRDb3Vwb25zKCk7CgkJCQkkY291cG9uSW5mbyA9IGFycmF5KCk7CgkJCQkKCQkJCWZvcmVhY2goJG9yZGVySXRlbXMgYXMgJG9yZGVySXRlbSkKCQkJCXsKCQkJCQkkY291cG9uID0gbmV3IE1NX0NvdXBvbigkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCQkJCQoJCQkJCWlmKCRjb3Vwb24tPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCWlmKCghJGlzUmViaWxsKSB8fCAoJGlzUmViaWxsICYmICRjb3Vwb24tPmdldFJlY3VycmluZ0JpbGxpbmdTZXR0aW5nKCkgPT0gTU1fQ291cG9uOjokVFlQRV9SRUNVUlJJTkdfQklMTElOR19TRVRUSU5HX0FMTCkpCgkJCQkJCXsKCQkJCQkJCSRjcm50Q291cG9uSW5mbyA9IGFycmF5KCk7CgkJCQkJCQkkY3JudENvdXBvbkluZm9bImlkIl0gPSAkY291cG9uLT5nZXRJZCgpOwoJCQkJCQkJJGNybnRDb3Vwb25JbmZvWyJuYW1lIl0gPSAkY291cG9uLT5nZXRDb3Vwb25OYW1lKCk7CgkJCQkJCQkkY3JudENvdXBvbkluZm9bImNvZGUiXSA9ICRjb3Vwb24tPmdldENvdXBvbkNvZGUoKTsKCQkJCQkKCQkJCQkJCSRjb3Vwb25JbmZvW10gPSAkY3JudENvdXBvbkluZm87CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQkKCQkJCSR1c2VyRGF0YVsib3JkZXJfY291cG9ucyJdID0ganNvbl9lbmNvZGUoJGNvdXBvbkluZm8pOwoJCQkJCgkJCQkkb3JkZXJJdGVtcyA9ICRvcmRlci0+Z2V0UHJvcmF0aW9ucygpOwoJCQkJJHByb3JhdGlvbkluZm8gPSBhcnJheSgpOwoJCQkJCgkJCQlmb3JlYWNoKCRvcmRlckl0ZW1zIGFzICRvcmRlckl0ZW0pCgkJCQl7CgkJCQkJJGNybnRQcm9yYXRpb25JbmZvID0gYXJyYXkoKTsKCQkJCQkkY3JudFByb3JhdGlvbkluZm9bImFtb3VudCJdID0gJG9yZGVySXRlbS0+Z2V0VG90YWwoKTsKCQkJCQkkY3JudFByb3JhdGlvbkluZm9bImRlc2NyaXB0aW9uIl0gPSAkb3JkZXJJdGVtLT5nZXREZXNjcmlwdGlvbigpOwoJCQkJCQoJCQkJCSRwcm9yYXRpb25JbmZvW10gPSAkY3JudFByb3JhdGlvbkluZm87CgkJCQl9CgkJCQkKCQkJCSR1c2VyRGF0YVsib3JkZXJfcHJvcmF0aW9ucyJdID0ganNvbl9lbmNvZGUoJHByb3JhdGlvbkluZm8pOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkdXNlckRhdGE7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcGFja2FnZUFmZmlsaWF0ZURhdGEoTU1fQ29tbWlzc2lvblByb2ZpbGUgJGNvbW1pc3Npb25Qcm9maWxlLCAkYWZmaWxpYXRlSWQsICRvcmRlck51bWJlciwgJG9yZGVyVG90YWwsICRvcmRlckRhdGEsICRpc1JlYmlsbD1mYWxzZSkKCXsKCQkkYWZmaWxpYXRlRGF0YSA9IGFycmF5KCk7CgkJCgkJJGFmZmlsaWF0ZURhdGFbIm1lbWJlcl9pZCJdID0gJG9yZGVyRGF0YVsibWVtYmVyX2lkIl07CgkJJGFmZmlsaWF0ZURhdGFbIm9yZGVyX2lkIl0gPSAkb3JkZXJEYXRhWyJvcmRlcl9pZCJdOwoJCSRhZmZpbGlhdGVEYXRhWyJvcmRlcl9hZmZpbGlhdGVfaWQiXSA9ICRhZmZpbGlhdGVJZDsKCQkkYWZmaWxpYXRlRGF0YVsib3JkZXJfc3ViYWZmaWxpYXRlX2lkIl0gPSAkb3JkZXJEYXRhWyJvcmRlcl9zdWJhZmZpbGlhdGVfaWQiXTsKCQkkYWZmaWxpYXRlRGF0YVsib3JkZXJfbnVtYmVyIl0gPSAkb3JkZXJOdW1iZXI7CgkJJGFmZmlsaWF0ZURhdGFbIm9yZGVyX3RvdGFsIl0gPSAkb3JkZXJUb3RhbDsKCQkkYWZmaWxpYXRlRGF0YVsib3JkZXJfaXBfYWRkcmVzcyJdID0gJG9yZGVyRGF0YVsib3JkZXJfaXBfYWRkcmVzcyJdOwoJCSRhZmZpbGlhdGVEYXRhWyJvcmRlcl9wcm9kdWN0cyJdID0gJG9yZGVyRGF0YVsib3JkZXJfcHJvZHVjdHMiXTsKCQkkYWZmaWxpYXRlRGF0YVsib3JkZXJfY291cG9ucyJdID0gJG9yZGVyRGF0YVsib3JkZXJfY291cG9ucyJdOwoJCSRhZmZpbGlhdGVEYXRhWyJvcmRlcl9wcm9yYXRpb25zIl0gPSAkb3JkZXJEYXRhWyJvcmRlcl9wcm9yYXRpb25zIl07CgkJCgkJJGFmZmlsaWF0ZURhdGFbInJlYmlsbF9jb21taXNzaW9uX2ZsYXRfcmF0ZSJdID0gIiI7CgkJJGFmZmlsaWF0ZURhdGFbInJlYmlsbF9jb21taXNzaW9uX3BlcmNlbnQiXSA9ICIiOwoJCQoJCWlmKCRpc1JlYmlsbCAmJiAkY29tbWlzc2lvblByb2ZpbGUtPmdldFJlYmlsbENvbW1pc3Npb25UeXBlKCkgIT0gTU1fQ29tbWlzc2lvblByb2ZpbGU6OiRDT01NSVNTSU9OX1RZUEVfREVGQVVMVCkKCQl7CgkJCXN3aXRjaCgkY29tbWlzc2lvblByb2ZpbGUtPmdldFJlYmlsbENvbW1pc3Npb25UeXBlKCkpCgkJCXsKCQkJCWNhc2UgTU1fQ29tbWlzc2lvblByb2ZpbGU6OiRDT01NSVNTSU9OX1RZUEVfUEVSQ0VOVDoKCQkJCQkkYWZmaWxpYXRlRGF0YVsicmViaWxsX2NvbW1pc3Npb25fcGVyY2VudCJdID0gaW50dmFsKCRjb21taXNzaW9uUHJvZmlsZS0+Z2V0UmViaWxsQ29tbWlzc2lvblZhbHVlKCkpIC8gMTAwOwoJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCWNhc2UgTU1fQ29tbWlzc2lvblByb2ZpbGU6OiRDT01NSVNTSU9OX1RZUEVfRkxBVFJBVEU6CgkJCQkJJGFmZmlsaWF0ZURhdGFbInJlYmlsbF9jb21taXNzaW9uX2ZsYXRfcmF0ZSJdID0gJGNvbW1pc3Npb25Qcm9maWxlLT5nZXRSZWJpbGxDb21taXNzaW9uVmFsdWUoKTsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gJGFmZmlsaWF0ZURhdGE7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TmFtZSgkZXZlbnRUeXBlLCAkZG9Mb3dlcmNhc2U9ZmFsc2UpCgl7CgkJJGV2ZW50TmFtZSA9ICIiOwoJCgkJc3dpdGNoKCRldmVudFR5cGUpCgkJewoJCQljYXNlIHNlbGY6OiRQUk9EVUNUX1BVUkNIQVNFOgoJCQkJJGV2ZW50TmFtZSA9ICJQcm9kdWN0IFB1cmNoYXNlZCI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIHNlbGY6OiRNRU1CRVJfQUREOgoJCQkJJGV2ZW50TmFtZSA9ICJNZW1iZXIgQWRkZWQiOwoJCQkJYnJlYWs7CgkKCQkJY2FzZSBzZWxmOjokTUVNQkVSX0FDQ09VTlRfVVBEQVRFOgoJCQkJJGV2ZW50TmFtZSA9ICJNZW1iZXIgQWNjb3VudCBVcGRhdGVkIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlIHNlbGY6OiRNRU1CRVJfU1RBVFVTX0NIQU5HRToKCQkJCSRldmVudE5hbWUgPSAiTWVtYmVyc2hpcCBTdGF0dXMgQ2hhbmdlZCI7CgkJCQlicmVhazsKCQoJCQljYXNlIHNlbGY6OiRNRU1CRVJfTUVNQkVSU0hJUF9DSEFOR0U6CgkJCQkkZXZlbnROYW1lID0gIk1lbWJlcnNoaXAgTGV2ZWwgQ2hhbmdlZCI7CgkJCQlicmVhazsKCQoJCQljYXNlIHNlbGY6OiRNRU1CRVJfREVMRVRFOgoJCQkJJGV2ZW50TmFtZSA9ICJNZW1iZXIgRGVsZXRlZCI7CgkJCQlicmVhazsKCQoJCQljYXNlIHNlbGY6OiRCVU5ETEVfQUREOgoJCQkJJGV2ZW50TmFtZSA9ICJCdW5kbGUgQWRkZWQiOwoJCQkJYnJlYWs7CgkKCQkJY2FzZSBzZWxmOjokQlVORExFX1NUQVRVU19DSEFOR0U6CgkJCQkkZXZlbnROYW1lID0gIkJ1bmRsZSBTdGF0dXMgQ2hhbmdlZCI7CgkJCQlicmVhazsKCQoJCQljYXNlIHNlbGY6OiRQQVlNRU5UX1JFQ0VJVkVEOgoJCQkJJGV2ZW50TmFtZSA9ICJQYXltZW50IFJlY2VpdmVkIjsKCQkJCWJyZWFrOwoJCgkJCWNhc2Ugc2VsZjo6JFBBWU1FTlRfUkVCSUxMOgoJCQkJJGV2ZW50TmFtZSA9ICJSZWJpbGwgUGF5bWVudCBSZWNlaXZlZCI7CgkJCQlicmVhazsKCQoJCQljYXNlIHNlbGY6OiRQQVlNRU5UX1JFQklMTF9ERUNMSU5FRDoKCQkJCSRldmVudE5hbWUgPSAiUmViaWxsIFBheW1lbnQgRmFpbGVkIjsKCQkJCWJyZWFrOwoJCgkJCWNhc2Ugc2VsZjo6JFJFRlVORF9JU1NVRUQ6CgkJCQkkZXZlbnROYW1lID0gIlJlZnVuZCBJc3N1ZWQiOwoJCQkJYnJlYWs7CgkKCQkJY2FzZSBzZWxmOjokQ09NTUlTU0lPTl9JTklUSUFMOgoJCQkJJGV2ZW50TmFtZSA9ICJBZmZpbGlhdGUgQ29tbWlzc2lvbiAoSW5pdGlhbCkiOwoJCQkJYnJlYWs7CgkKCQkJY2FzZSBzZWxmOjokQ09NTUlTU0lPTl9SRUJJTEw6CgkJCQkkZXZlbnROYW1lID0gIkFmZmlsaWF0ZSBDb21taXNzaW9uIChSZWJpbGwpIjsKCQkJCWJyZWFrOwoJCgkJCWNhc2Ugc2VsZjo6JENBTkNFTF9DT01NSVNTSU9OOgoJCQkJJGV2ZW50TmFtZSA9ICJDYW5jZWwgQWZmaWxpYXRlIENvbW1pc3Npb24iOwoJCQkJYnJlYWs7CgkJfQoJCgkJcmV0dXJuICgkZG9Mb3dlcmNhc2UpID8gc3RydG9sb3dlcigkZXZlbnROYW1lKSA6ICRldmVudE5hbWU7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RXZlbnRUeXBlc0xpc3QoJHNlbGVjdGVkRXZlbnQ9IiIpCgl7CgkJJGxpc3QgPSBhcnJheSgpOwoJCS8vIG1lbWJlciBldmVudHMKCQkkbGlzdFtNTV9FdmVudDo6JE1FTUJFUl9BRERdID0gTU1fRXZlbnQ6OmdldE5hbWUoTU1fRXZlbnQ6OiRNRU1CRVJfQUREKTsKCQkkbGlzdFtNTV9FdmVudDo6JE1FTUJFUl9BQ0NPVU5UX1VQREFURV0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JE1FTUJFUl9BQ0NPVU5UX1VQREFURSk7CgkJJGxpc3RbTU1fRXZlbnQ6OiRNRU1CRVJfU1RBVFVTX0NIQU5HRV0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JE1FTUJFUl9TVEFUVVNfQ0hBTkdFKTsKCQkkbGlzdFtNTV9FdmVudDo6JE1FTUJFUl9NRU1CRVJTSElQX0NIQU5HRV0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JE1FTUJFUl9NRU1CRVJTSElQX0NIQU5HRSk7CgkJJGxpc3RbTU1fRXZlbnQ6OiRNRU1CRVJfREVMRVRFXSA9IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokTUVNQkVSX0RFTEVURSk7CgkJCgkJLy8gYnVuZGxlIGV2ZW50cwoJCSRsaXN0W01NX0V2ZW50OjokQlVORExFX0FERF0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JEJVTkRMRV9BREQpOwoJCSRsaXN0W01NX0V2ZW50OjokQlVORExFX1NUQVRVU19DSEFOR0VdID0gTU1fRXZlbnQ6OmdldE5hbWUoTU1fRXZlbnQ6OiRCVU5ETEVfU1RBVFVTX0NIQU5HRSk7CgkJCgkJLy8gb3JkZXIgZXZlbnRzCgkJJGxpc3RbTU1fRXZlbnQ6OiRQUk9EVUNUX1BVUkNIQVNFXSA9IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokUFJPRFVDVF9QVVJDSEFTRSk7CgkJJGxpc3RbTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQ0VJVkVEXSA9IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokUEFZTUVOVF9SRUNFSVZFRCk7CgkJJGxpc3RbTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQklMTF0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMKTsKCQkkbGlzdFtNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMX0RFQ0xJTkVEXSA9IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTExfREVDTElORUQpOwoJCSRsaXN0W01NX0V2ZW50OjokUkVGVU5EX0lTU1VFRF0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JFJFRlVORF9JU1NVRUQpOwoJCQoJCS8vIGFmZmlsaWF0ZSBldmVudHMKCQkkbGlzdFtNTV9FdmVudDo6JENPTU1JU1NJT05fSU5JVElBTF0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JENPTU1JU1NJT05fSU5JVElBTCk7CgkJJGxpc3RbTU1fRXZlbnQ6OiRDT01NSVNTSU9OX1JFQklMTF0gPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JENPTU1JU1NJT05fUkVCSUxMKTsKCQkkbGlzdFtNTV9FdmVudDo6JENBTkNFTF9DT01NSVNTSU9OXSA9IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokQ0FOQ0VMX0NPTU1JU1NJT04pOwoJCQoJCXJldHVybiAkbGlzdDsKCX0KfQo=', 0, '2018-11-21 06:38:53'),
(13, 'aweberoauthadapter', 'aW50ZXJmYWNlIE1NX0FXZWJlck9BdXRoQWRhcHRlciB7CgogICAgcHVibGljIGZ1bmN0aW9uIHJlcXVlc3QoJG1ldGhvZCwgJHVyaSwgJGRhdGEgPSBhcnJheSgpKTsKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRSZXF1ZXN0VG9rZW4oJGNhbGxiYWNrVXJsPWZhbHNlKTsKCn0KCgo=', 0, '2018-11-21 06:38:53'),
(14, 'checkoutview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKSAKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9DaGVja291dFZpZXcgZXh0ZW5kcyBNTV9WaWV3CnsgIAoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQVBQTFlfQ09VUE9OID0gImFwcGx5Q291cG9uIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0xPQURfU1RBVEVTID0gImxvYWRTdGF0ZXMiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fQVBQTFlfQ09VUE9OOgoJCQkJCXJldHVybiAkdGhpcy0+YXBwbHlEaXNjb3VudCgkcG9zdCk7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9MT0FEX1NUQVRFUzoKCQkJCQlyZXR1cm4gJHRoaXMtPmxvYWRTdGF0ZXMoJHBvc3QpOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gYXBwbHlEaXNjb3VudCgkcG9zdCkKCXsKCQkkcmVzdWx0ID0gbmV3IHN0ZENsYXNzKCk7CgkJJHJlc3VsdC0+bWVzc2FnZSA9ICIiOwoJCSRyZXN1bHQtPmlzRXJyb3IgPSAiMCI7CgkJJHJlc3VsdC0+ZGlzY291bnQgPSAiMC4wMCI7CgkJJGNvdXBvbkRpc2NvdW50ID0gMDsKCQkkcHJvcmF0aW9uRGlzY291bnQgPSAwOyAKCQkKCQkvLyBjaGVjayBmb3IgY291cG9uCgkJaWYoIWVtcHR5KCRwb3N0WyJjb3Vwb25fY29kZSJdKSkKCQl7CgkJCSRjb3Vwb25Db2RlID0gKGlzc2V0KCRwb3N0WyJjb3Vwb25fY29kZSJdKSkgPyAkcG9zdFsiY291cG9uX2NvZGUiXSA6IE1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9DT1VQT05fVkFMVUUpOwoJCQkkY291cG9uID0gTU1fQ291cG9uOjpnZXREYXRhQnlDb2RlKCRjb3Vwb25Db2RlKTsKCQkJCgkJCWlmKCRjb3Vwb24tPmlzVmFsaWQoKSkKCQkJewoJCQkJaWYoTU1fQ291cG9uOjpoYXNBdmFpbGFibGVDb3Vwb24oJGNvdXBvbkNvZGUpKQoJCQkJewoJCQkJCSRoYXNQcm9kdWN0ID0gZmFsc2U7CgkJCQkJCgkJCQkJaWYoaXNzZXQoJHBvc3RbInByb2R1Y3RfaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJwcm9kdWN0X2lkIl0pID4gMCkKCQkJCQl7CgkJCQkJCWlmKCRjb3Vwb24tPmhhc1Byb2R1Y3QoJHBvc3RbInByb2R1Y3RfaWQiXSkpCgkJCQkJCXsKCQkJCQkJCSRoYXNQcm9kdWN0ID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCX0KCQkJCQkJCgkJCQkJaWYoJGhhc1Byb2R1Y3QpCgkJCQkJewoJCQkJCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xBU1RfQ09VUE9OX1ZBTFVFLCAkY291cG9uQ29kZSk7CgkJCQoJCQkJCQlpZihpc3NldCgkcG9zdFsicHJvZHVjdF9wcmljZSJdKSkKCQkJCQkJewoJCQkJCQkJJGRpc2NvdW50ZWRQcmljZSA9ICR0aGlzLT5nZXREaXNjb3VudFByaWNlKCRjb3Vwb24sICRwb3N0WyJwcm9kdWN0X3ByaWNlIl0pOwoJCQkJCQkJCgkJCQkJCQkkcmVzdWx0LT5tZXNzYWdlID0gIkNvdXBvbiBhcHBsaWVkIHN1Y2Nlc3NmdWxseSI7CgkJCQkJCQkKCQkJCQkJCWlmKCRkaXNjb3VudGVkUHJpY2UgIT09IE1NX0NvdXBvbjo6JFRZUEVfRlJFRSkKCQkJCQkJCXsKCQkJCQkJCQkkY291cG9uRGlzY291bnQgPSBmbG9hdHZhbCgkcG9zdFsicHJvZHVjdF9wcmljZSJdKSAtIGZsb2F0dmFsKCRkaXNjb3VudGVkUHJpY2UpOwoJCQkJCQkJfQoJCQkJCQkJZWxzZQoJCQkJCQkJewoJCQkJCQkJCSRjb3Vwb25EaXNjb3VudCA9IE1NX0NvdXBvbjo6JFRZUEVfRlJFRTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRyZXN1bHQtPm1lc3NhZ2UgPSAiSW52YWxpZCBjb3Vwb24gY29kZSI7CgkJCQkJCQkkcmVzdWx0LT5pc0Vycm9yID0gIjEiOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRyZXN1bHQtPm1lc3NhZ2UgPSAiVGhpcyBjb3Vwb24gY2Fubm90IGJlIHVzZWQgZm9yIHRoaXMgcHJvZHVjdCI7CgkJCQkJCSRyZXN1bHQtPmlzRXJyb3IgPSAiMSI7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRyZXN1bHQtPm1lc3NhZ2UgPSAiVGhpcyBjb3Vwb24gaXMgbm8gbG9uZ2VyIHZhbGlkIjsKCQkJCQkkcmVzdWx0LT5pc0Vycm9yID0gIjEiOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJaWYoaXNzZXQoJHBvc3RbImNvdXBvbl9jb2RlIl0pICYmICFlbXB0eSgkcG9zdFsiY291cG9uX2NvZGUiXSkpCgkJCQl7CgkJCQkJJHJlc3VsdC0+bWVzc2FnZSA9ICJJbnZhbGlkIGNvdXBvbiBjb2RlIjsKCQkJCQkkcmVzdWx0LT5pc0Vycm9yID0gIjEiOwoJCQkJfQoJCQkJCgkJCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xBU1RfQ09VUE9OX1ZBTFVFLCAkY291cG9uQ29kZSk7CgkJCX0KCQkJCgkJCWlmKCRyZXN1bHQtPmlzRXJyb3IgPT0gIjEiKQoJCQl7CgkJCQlNTV9TZXNzaW9uOjpjbGVhcihNTV9TZXNzaW9uOjokS0VZX0xBU1RfQ09VUE9OX1ZBTFVFKTsKCQkJfQoJCX0KCQkKCQlpZigkY291cG9uRGlzY291bnQgIT09IE1NX0NvdXBvbjo6JFRZUEVfRlJFRSkKCQl7CgkJCWlmKCRjb3Vwb25EaXNjb3VudCA+IDApCgkJCXsKCQkJCSRyZXN1bHQtPmRpc2NvdW50ICs9ICRjb3Vwb25EaXNjb3VudDsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkcmVzdWx0LT5kaXNjb3VudCA9ICRjb3Vwb25EaXNjb3VudDsKCQl9CgkJCQoJCS8vIGNoZWNrIGZvciBwcm9yYXRpb24KCQlpZihpc191c2VyX2xvZ2dlZF9pbigpICYmICgkcmVzdWx0LT5kaXNjb3VudCAhPT0gTU1fQ291cG9uOjokVFlQRV9GUkVFKSkKCQl7CgkJCWdsb2JhbCAkY3VycmVudF91c2VyOwoJCQkkdXNlciA9IE1NX1VzZXI6OmdldEN1cnJlbnRXUFVzZXIoKTsKCQkJCgkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkgJiYgaXNzZXQoJHBvc3RbInByb2R1Y3RfaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJwcm9kdWN0X2lkIl0pID4gMCkKCQkJewoJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcG9zdFsicHJvZHVjdF9pZCJdKTsKCQkJCQoJCQkJLy8gbWFrZSBzdXJlIHByb2R1Y3QgaXMgYXNzb2NpYXRlZCB3aXRoIGEgbWVtYmVyc2hpcCBhbmQgaXMgcmVjdXJyaW5nCgkJCQlpZigkcHJvZHVjdC0+aXNSZWN1cnJpbmcoKSAmJiAkcHJvZHVjdC0+Z2V0QXNzb2NpYXRlZE1lbWJlcnNoaXAoKS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRwcm9yYXRpb25EaXNjb3VudCA9IE1NX1BheW1lbnRVdGlsczo6Y2FsY3VsYXRlTWVtYmVyc2hpcFN1YnNjcmlwdGlvbkNyZWRpdCgkdXNlcik7CgkKCQkJCQlpZihlbXB0eSgkY291cG9uRGlzY291bnQpIHx8ICgkY291cG9uRGlzY291bnQgIT09IE1NX0NvdXBvbjo6JFRZUEVfRlJFRSkpCgkJCQkJewkKCQkJCQkJJHJlc3VsdC0+ZGlzY291bnQgKz0gJHByb3JhdGlvbkRpc2NvdW50OwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkKCQlpZihmbG9hdHZhbCgkcmVzdWx0LT5kaXNjb3VudCkgPiBmbG9hdHZhbCgkcG9zdFsicHJvZHVjdF9wcmljZSJdKSkKCQl7CgkJCSRyZXN1bHQtPmRpc2NvdW50ID0gZmxvYXR2YWwoJHBvc3RbInByb2R1Y3RfcHJpY2UiXSk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoanNvbl9lbmNvZGUoJHJlc3VsdCkpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldERpc2NvdW50UHJpY2UoTU1fQ291cG9uICRjb3Vwb24sICRwcm9kdWN0UHJpY2UpCgl7CQoJCWlmKCRjb3Vwb24tPmlzVmFsaWQoKSkKCQl7CgkJCSR2YWx1ZSA9ICRwcm9kdWN0UHJpY2U7CgkJCSRkaXNjb3VudCA9ICRjb3Vwb24tPmdldENvdXBvblZhbHVlKCk7CgkJCQoJCQlpZigkY291cG9uLT5nZXRDb3Vwb25UeXBlKCkgPT0gTU1fQ291cG9uOjokVFlQRV9QRVJDRU5UQUdFKQoJCQl7CgkJCQkkdmFsdWUgPSAkcHJvZHVjdFByaWNlIC0gKCRwcm9kdWN0UHJpY2UgKiAoJGRpc2NvdW50LzEwMCkpOwoJCQl9CgkJCWVsc2UgaWYoJGNvdXBvbi0+Z2V0Q291cG9uVHlwZSgpID09IE1NX0NvdXBvbjo6JFRZUEVfRE9MTEFSKQoJCQl7CgkJCQkkdmFsdWUgPSAkcHJvZHVjdFByaWNlIC0gJGRpc2NvdW50OwoJCQl9CgkJCWVsc2UgaWYoJGNvdXBvbi0+Z2V0Q291cG9uVHlwZSgpID09IE1NX0NvdXBvbjo6JFRZUEVfRlJFRSkKCQkJewoJCQkJcmV0dXJuIE1NX0NvdXBvbjo6JFRZUEVfRlJFRTsKCQkJfQoJCQkKCQkJcmV0dXJuIG51bWJlcl9mb3JtYXQoJHZhbHVlLCAyLCAnLicsICcnKTsKCQl9CgkJCgkJcmV0dXJuICRwcm9kdWN0UHJpY2U7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGxvYWRTdGF0ZXMoJHBvc3QpCgl7CgkJZ2xvYmFsICRjdXJyZW50X3VzZXI7CgkKCQl0cnkKCQl7IAoJCQlpZighaXNzZXQoJHBvc3RbJ2NvdW50cnknXSkgfHwgISRwb3N0Wydjb3VudHJ5J10pCgkJCXsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIk1pc3NpbmcgY291bnRyeSBJU08gY29kZSIpOwoJCQl9CgkKCQkJaWYoIWlzX2FycmF5KCRzdGF0ZXMgPSBNTV9Db3VudHJ5U3ViZGl2aXNpb25VdGlsczo6Z2V0Q291bnRyeVN1YmRpdnNpb25MaXN0KGFycmF5KCRwb3N0Wydjb3VudHJ5J10pKSkpCgkJCXsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIk5vIHN0YXRlcyBmb3VuZCBmb3IgSVNPIGNvZGU6IHskcG9zdFsnY291bnRyeSddfSIpOwoJCQl9CgkJCQkKCQkJJGRlZmF1bHRTdGF0ZSAJID0gbnVsbDsKCQkJJGRlZmF1bHRDb3VudHJ5ID0gbnVsbDsKCQkJCQoJCQlpZihpc191c2VyX2xvZ2dlZF9pbigpKQoJCQl7CgkJCQkkc3RhdGVGdW5jdGlvbiAgID0gJHBvc3RbJ3R5cGUnXSA9PSAiYmlsbGluZyIgPyAiZ2V0QmlsbGluZ1N0YXRlIiA6ICJnZXRTaGlwcGluZ1N0YXRlIjsKCQkJCSRjb3VudHJ5RnVuY3Rpb24gPSAkcG9zdFsndHlwZSddID09ICJiaWxsaW5nIiA/ICJnZXRCaWxsaW5nQ291bnRyeSIgOiAiZ2V0U2hpcHBpbmdDb3VudHJ5IjsKCQkJCSR1c2VyIAkJCSAgPSBNTV9Vc2VyOjpnZXRDdXJyZW50V1BVc2VyKCk7CgkJCQkkZGVmYXVsdFN0YXRlIAkgID0gJHVzZXItPiRzdGF0ZUZ1bmN0aW9uKCkgPyAkdXNlci0+JHN0YXRlRnVuY3Rpb24oKSA6IG51bGw7CgkJCQkkZGVmYXVsdENvdW50cnkgID0gJHVzZXItPiRjb3VudHJ5RnVuY3Rpb24oKSA/ICR1c2VyLT4kY291bnRyeUZ1bmN0aW9uKCkgOiBudWxsOwoJCQl9CgkJCQkKCQkJJG9wdGlvbnMgPSAiIjsKCQkJJGNvdW50ICAgPSAwOwoJCQlmb3JlYWNoKCRzdGF0ZXNbJHBvc3RbJ2NvdW50cnknXV0gYXMgJHN0YXRlX2lzbyA9PiAkc3RhdGVfbmFtZSkKCQkJewoJCQkJaWYoaXNfdXNlcl9sb2dnZWRfaW4oKSkKCQkJCXsKCQkJCQlpZihpc3NldCgkc3RhdGVzWyRkZWZhdWx0Q291bnRyeV1bJGRlZmF1bHRTdGF0ZV0pKQoJCQkJCXsKCQkJCQkJJHNlbGVjdGVkID0gJGRlZmF1bHRTdGF0ZSA9PSAkc3RhdGVfaXNvOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkc2VsZWN0ZWQgPSAkY291bnQgPT09IDA7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRzZWxlY3RlZCA9ICRjb3VudCA9PT0gMDsKCQkJCX0KCQoJCQkJJG9wdGlvbnMgLj0gIjxvcHRpb24gdmFsdWU9J3skc3RhdGVfaXNvfSciIC4gKCRzZWxlY3RlZCA/ICIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyIgOiAiIikgLiAiPnskc3RhdGVfbmFtZX08L29wdGlvbj5cbiI7CgkJCQkkY291bnQrKzsKCQkJfQoJCQkkb3B0aW9ucyAuPSAiPG9wdGlvbiB2YWx1ZT0nLTEnPk90aGVyLi4uPC9vcHRpb24+XG4iOwoJCQkJCgkJCSRNTV9SZXNwb25zZSA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCQkkTU1fUmVzcG9uc2UtPmRhdGFbJ2h0bWwnXSA9ICRvcHRpb25zOwoJCQkkTU1fUmVzcG9uc2UtPmRhdGFbJ3R5cGUnXSA9ICRwb3N0Wyd0eXBlJ10gPyAkcG9zdFsndHlwZSddIDogJ2JpbGxpbmcnOwoJCgkJCXJldHVybiAkTU1fUmVzcG9uc2U7CgkJfQoJCWNhdGNoKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCSRNTV9SZXNwb25zZSA9IG5ldyBNTV9SZXNwb25zZSgkZS0+Z2V0TWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJcmV0dXJuICRNTV9SZXNwb25zZTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBPdmVycmlkZSBvZiBwYXJlbnQgdG8gYWxsb3cgdXNlcnMgd2l0aG91dCByb2xlcyB0byBsb2dpbgoJICoge0Bpbmhlcml0RG9jfQoJICogQHNlZSBNTV9WaWV3OjpjYW5DYWxsTWV0aG9kKCkKCSAqLwoJCglwdWJsaWMgZnVuY3Rpb24gY2FuQ2FsbE1ldGhvZCgkcmVxdWVzdCkKCXsKCQkkYWxsb3dlZEFjdGlvbnMgPSBhcnJheShzZWxmOjokTU1fSlNBQ1RJT05fQVBQTFlfQ09VUE9OLHNlbGY6OiRNTV9KU0FDVElPTl9MT0FEX1NUQVRFUywgc2VsZjo6JE1NX0pTQUNUSU9OX1ZBTElEQVRFX0lOUFVUKTsKCQlpZiAoKCRyZXF1ZXN0WydtZXRob2QnXSAhPSAicGVyZm9ybUFjdGlvbiIpIHx8ICghaXNzZXQoJHJlcXVlc3RbJ21tX2FjdGlvbiddKSkgfHwgKCFpbl9hcnJheSgkcmVxdWVzdFsnbW1fYWN0aW9uJ10sJGFsbG93ZWRBY3Rpb25zKSkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0KfQo=', 0, '2018-11-21 06:38:53'),
(15, 'testdatautils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1Rlc3REYXRhVXRpbHMKewoJcHVibGljIHN0YXRpYyAkVU5JUVVFX1RFU1RfRU1BSUxfREVMSU1JVEVSID0gIl9fIjsKCQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcmV0cmlldmVzIGNoZWNrb3V0IGZvcm0gdGVzdCBkYXRhIGZyb20gdGhlIGRhdGFiYXNlCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGNoZWNrb3V0IGZvcm0gdGVzdCBkYXRhCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q2hlY2tvdXRGb3JtVGVzdERhdGEoKQoJewoJCSRkYXRhID0gYXJyYXkoKTsKCQoJCSRyYXdEYXRhID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQ0hFQ0tPVVRfRk9STV9URVNUX0RBVEEpOwoJCgkJaWYoIWVtcHR5KCRyYXdEYXRhKSkKCQl7CgkJCSRkYXRhID0gJHJhd0RhdGE7CgkJfQoJCgkJcmV0dXJuICRkYXRhOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gc2F2ZXMgY2hlY2tvdXQgZm9ybSB0ZXN0IGRhdGEgaW4gdGhlIGRhdGFiYXNlCgkgKiBAcGFyYW0gYXJyYXkgJGRhdGEgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgY2hlY2tvdXQgZm9ybSB0ZXN0IGRhdGEKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzYXZlQ2hlY2tvdXRGb3JtVGVzdERhdGEoJGRhdGEpCgl7CgkJaWYoIWlzX251bGwoJGRhdGEpICYmIGlzX2FycmF5KCRkYXRhKSkKCQl7CgkJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0NIRUNLT1VUX0ZPUk1fVEVTVF9EQVRBLCAkZGF0YSk7CgkJfQoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcmV0cmlldmVzIGEgc2luZ2xlIGNoZWNrb3V0IGZvcm0gdGVzdCBkYXRhIHZhbHVlIGZyb20gdGhlIGRhdGEgcGFzc2VkCgkgKiBAcGFyYW0gYXJyYXkgJGRhdGEgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgY2hlY2tvdXQgZm9ybSB0ZXN0IGRhdGEKCSAqIEBwYXJhbSBhcnJheSAka2V5IHRoZSBrZXkgb2YgdGhlIHRlc3QgZGF0YSB0byBsb29rdXAKCSAqIEByZXR1cm4gYXJyYXkgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgY2hlY2tvdXQgZm9ybSB0ZXN0IGRhdGEKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRUZXN0VmFsdWUoJGRhdGEsICRrZXksICRkb0Zvcm1hdD1mYWxzZSkKCXsKCQlpZighaXNfbnVsbCgkZGF0YSkgJiYgIWVtcHR5KCRrZXkpICYmIGlzc2V0KCRkYXRhWyRrZXldKSAmJiAhZW1wdHkoJGRhdGFbJGtleV0pKQoJCXsKCQkJLy8gbWFrZSBlbWFpbCBhZGRyZXNzIHVuaXF1ZQoJCQlpZigkZG9Gb3JtYXQpCgkJCXsKCQkJCWdsb2JhbCAkd3BkYjsKCQkJCSRzcWwgPSAiU0VMRUNUIE1BWChJRCkgYXMgbWF4aWQgRlJPTSB7JHdwZGItPnVzZXJzfSI7CgkJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkKCQkJCWlmKCRyZXN1bHQpCgkJCQl7CgkJCQkJJHVuaXF1ZUlkID0gKGludHZhbCgkcmVzdWx0LT5tYXhpZCkgKyAxKTsKCQkJCX0KCQoJCQkJaWYoc3RycG9zKCRrZXksICJlbWFpbCIpICE9PSBmYWxzZSkKCQkJCXsKCQkJCQkkdW5pcXVlRW1haWwgPSBzdWJzdHJfcmVwbGFjZSgkZGF0YVska2V5XSwgc2VsZjo6JFVOSVFVRV9URVNUX0VNQUlMX0RFTElNSVRFUi4kdW5pcXVlSWQsIHN0cnBvcygkZGF0YVska2V5XSwgIkAiKSwgMCk7CgkJCQkJcmV0dXJuICR1bmlxdWVFbWFpbDsKCQkJCX0KCQkJCWVsc2UgaWYoc3RycG9zKCRrZXksICJ1c2VybmFtZSIpICE9PSBmYWxzZSkKCQkJCXsKCQkJCQkkdW5pcXVlVXNlcm5hbWUgPSAkZGF0YVska2V5XS4kdW5pcXVlSWQ7CgkJCQkJcmV0dXJuICR1bmlxdWVVc2VybmFtZTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJcmV0dXJuICRkYXRhWyRrZXldOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuICRkYXRhWyRrZXldOwoJCQl9CgkJfQoJCXJldHVybiAiIjsKCX0KCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCB0YWtlcyBhbiBlbWFpbCBhZGRyZXNzIGFuZCBpZiB0aGUgc3lzdGVtIGlzIGN1cnJlbnRseSBjb25maWd1cmVkIHRvIHVzZSB0ZXN0IG1vZGUsCgkgKiB3aWxsIHJlcGxhY2UgdGhlIGRlbGltaXRlciAoZGVmaW5lZCBpbiAkVU5JUVVFX1RFU1RfRU1BSUxfREVMSU1JVEVSKSBpbiB0aGUgZW1haWwgYWRkcmVzcyB3aXRoCgkgKiBhICcrJyBzbyB0aGF0IHRoZSBlbWFpbCBhZGRyZXNzIGlzIHZhbGlkIGJ1dCB1bmlxdWUgYW5kIGNhbiByZWNlaXZlIGVtYWlscy4gV2UgY2FuJ3QganVzdCBtYWtlIHRoZQoJICogZGVsaW1pdGVyICcrJyBiZWNhdXNlIFdvcmRQcmVzcyBjb25zaWRlcnMgdGhpcyBhbiBpbGxlZ2FsIGNoYXJhY3RlciB3aGVuIGNyZWF0aW5nIHVzZXJuYW1lcy4KCSAqCgkgKiBAcGFyYW0gU3RyaW5nICRzdWJqZWN0RW1haWwgdGhlIGVtYWlsIHRvIGNvbnZlcnQKCSAqIEByZXR1cm4gU3RyaW5nIHRoZSBvcmlnaW5hbCBlbWFpbCBpZiBub3QgaW4gdGVzdCBtb2RlIG9yIGlmIHRoZSBlbWFpbCBpcyBub3QgYSB2YXJpYW50IG9mIHRoZSB0ZXN0IGVtYWlsIG9yIGEgY29udmVydGVkIGVtYWlsIHRoYXQgcmVwbGFjZWQgdGhlIGRlbGltaXRlciB3aXRoIGEgJysnCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY29udmVydFRlc3RFbWFpbCgkc3ViamVjdEVtYWlsKQoJewoJCSR0ZXN0RGF0YSA9IHNlbGY6OmdldENoZWNrb3V0Rm9ybVRlc3REYXRhKCk7CgkJJHRlc3RFbWFpbCA9IHNlbGY6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9lbWFpbCIpOwoJCgkJaWYoIWVtcHR5KCR0ZXN0RW1haWwpKQoJCXsKCQkJJGRlbGltSW5kZXggPSBzdHJwb3MoJHN1YmplY3RFbWFpbCwgc2VsZjo6JFVOSVFVRV9URVNUX0VNQUlMX0RFTElNSVRFUik7CgkJCSRhdEluZGV4ID0gc3RycG9zKCRzdWJqZWN0RW1haWwsICJAIik7CgkJCQkKCQkJaWYoJGRlbGltSW5kZXggIT09IGZhbHNlICYmICRhdEluZGV4ICE9PSBmYWxzZSkKCQkJewoJCQkJJHBpZWNlcyA9IGV4cGxvZGUoc2VsZjo6JFVOSVFVRV9URVNUX0VNQUlMX0RFTElNSVRFUiwgJHN1YmplY3RFbWFpbCk7CgkKCQkJCWlmKGNvdW50KCRwaWVjZXMpID09IDIpCgkJCQl7CgkJCQkJJGF0SW5kZXggPSBzdHJwb3MoJHBpZWNlc1sxXSwgIkAiKTsKCQkJCQkJCgkJCQkJaWYoJGF0SW5kZXggIT09IGZhbHNlKQoJCQkJCXsKCQkJCQkJJG1vZGlmaWVkRW1haWwgPSAkcGllY2VzWzBdLnN1YnN0cigkcGllY2VzWzFdLCAkYXRJbmRleCk7CgkKCQkJCQkJaWYoJG1vZGlmaWVkRW1haWwgPT0gJHRlc3RFbWFpbCkKCQkJCQkJewoJCQkJCQkJcmV0dXJuIHN0cl9yZXBsYWNlKHNlbGY6OiRVTklRVUVfVEVTVF9FTUFJTF9ERUxJTUlURVIsICIrIiwgJHN1YmplY3RFbWFpbCk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkKCQlyZXR1cm4gJHN1YmplY3RFbWFpbDsKCX0KfQo=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(16, 'importwizardview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0ltcG9ydFdpemFyZFZpZXcgZXh0ZW5kcyBNTV9SQkFDR2VuZXJhbEVtcGxveWVlVmlldwp7CQoJcHVibGljIHN0YXRpYyAkUkVRVUlSRURfTlVNX0NPTFVNTlMgPSAyMzsKCXB1YmxpYyBzdGF0aWMgJElNUE9SVF9TT1VSQ0VfQ09NUFVURVIgPSAiY29tcHV0ZXIiOwoJcHVibGljIHN0YXRpYyAkSU1QT1JUX1NPVVJDRV9VUkwgPSAidXJsIjsKCQoJcHJpdmF0ZSAkaW1wb3J0RmlsZSA9ICIiOwoJcHJpdmF0ZSAkbmV3TWVtYmVyQ291bnQgPSAwOwoJcHJpdmF0ZSAkdXBkYXRlZE1lbWJlckNvdW50ID0gMDsKCXByaXZhdGUgJG1lbWJlcnNoaXBMZXZlbElkID0gMDsKCXByaXZhdGUgJG1lbWJlcnNoaXA7CgkKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1VQTE9BRF9GSUxFID0gInVwbG9hZEZpbGUiOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KQoJewoJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKQoJCXsKCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fVVBMT0FEX0ZJTEU6CgkJCQlyZXR1cm4gJHRoaXMtPnVwbG9hZEZpbGUoKTsKCQkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gaW1wb3J0KCRwb3N0KQoJewoJCSRtdGltZSA9IGV4cGxvZGUoIiAiLCBtaWNyb3RpbWUoKSk7CgkJJGV4ZWN1dGlvblN0YXJ0VGltZSA9ICRtdGltZVsxXSArICRtdGltZVswXTsKCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCgkJJHRoaXMtPnByaW50TGluZSgiPHRleHRhcmVhIGlkPVwibW0taW1wb3J0LXJlc3VsdHMtbG9nXCIgc3R5bGU9XCJ3aWR0aDogNzAwcHg7IGhlaWdodDogNDAwcHg7IGZvbnQtZmFtaWx5OiBjb3VyaWVyOyBmb250LXNpemU6IDEycHg7IG1hcmdpbi10b3A6MjBweDtcIj4iKTsKCQkKCQlpZihpc3NldCgkcG9zdFsibW0taW1wb3J0LWZpbGUtc291cmNlIl0pKQoJCXsKCQkJJGltcG9ydFNvdXJjZSA9ICRwb3N0WyJtbS1pbXBvcnQtZmlsZS1zb3VyY2UiXTsKCQkJCgkJCXN3aXRjaCgkaW1wb3J0U291cmNlKQoJCQl7CgkJCQljYXNlIHNlbGY6OiRJTVBPUlRfU09VUkNFX0NPTVBVVEVSOgoJCQkJCWlmKGlzc2V0KCRwb3N0WyJtbS1pbXBvcnQtZmlsZS1mcm9tLWNvbXB1dGVyIl0pKQoJCQkJCXsKCQkJCQkJJHRoaXMtPmltcG9ydEZpbGUgPSAkcG9zdFsibW0taW1wb3J0LWZpbGUtZnJvbS1jb21wdXRlciJdOwoJCQkJCQkKCQkJCQkJaWYoIXByZWdfbWF0Y2goIi8oXC5jc3YpJC8iLCBzdHJ0b2xvd2VyKCR0aGlzLT5pbXBvcnRGaWxlKSkpCgkJCQkJCXsKCQkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgZmlsZSBleHRlbnNpb24gb24gJ3skdGhpcy0+aW1wb3J0RmlsZX0nLiBNdXN0IGJlIC5jc3YuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiTWlzc2luZyBpbXBvcnQgZmlsZSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JElNUE9SVF9TT1VSQ0VfVVJMOgoJCQkJCWlmKGlzc2V0KCRwb3N0WyJtbS1pbXBvcnQtZmlsZS1mcm9tLXVybCJdKSkKCQkJCQl7CgkJCQkJCSR0aGlzLT5wcmludExpbmUoIkRvd25sb2FkaW5nIGltcG9ydCBmaWxlIGZyb20gVVJMICd7JHBvc3RbIm1tLWltcG9ydC1maWxlLWZyb20tdXJsIl19Jy4uLiAiKTsKCQkJCQkJJHRoaXMtPmltcG9ydEZpbGUgPSBkb3dubG9hZF91cmwoJHBvc3RbIm1tLWltcG9ydC1maWxlLWZyb20tdXJsIl0pOwoJCQkJCQkKCQkJCQkJaWYoJHRoaXMtPmltcG9ydEZpbGUgaW5zdGFuY2VvZiBXUF9FcnJvcikKCQkJCQkJewoJCQkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZG93bmxvYWRpbmcgaW1wb3J0IGZpbGUuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQkkdGhpcy0+cHJpbnRMaW5lKCJjb21wbGV0ZVxuXG4iKTsKCQkJCQkJCQoJCQkJCQkJaWYoIXByZWdfbWF0Y2goIi8oXC5jc3YpJC8iLCBzdHJ0b2xvd2VyKCRwb3N0WyJtbS1pbXBvcnQtZmlsZS1mcm9tLXVybCJdKSkpCgkJCQkJCQl7CgkJCQkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBmaWxlIGV4dGVuc2lvbiBvbiAneyR0aGlzLT5pbXBvcnRGaWxlfScuIE11c3QgYmUgLmNzdi4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJNaXNzaW5nIGltcG9ydCBmaWxlIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJJbnZhbGlkIGltcG9ydCBmaWxlIHNvdXJjZSAneyRwb3N0WyJtbS1pbXBvcnQtZmlsZS1zb3VyY2UiXX0nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJYnJlYWs7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiTWlzc2luZyBpbXBvcnQgZmlsZSBzb3VyY2UiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkZXhlY3V0aW9uU3RhdHVzKSkKCQl7CgkJCWlmKGlzc2V0KCRwb3N0WyJtbS1tZW1iZXJzaGlwLXNlbGVjdG9yIl0pKQoJCQl7CgkJCQkkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPSAkcG9zdFsibW0tbWVtYmVyc2hpcC1zZWxlY3RvciJdOwoJCQkJCgkJCQkkdGhpcy0+bWVtYmVyc2hpcCA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkKTsKCQkJCQoJCQkJaWYoISR0aGlzLT5tZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBNZW1iZXJzaGlwIGxldmVsIElEICd7JHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkfScuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJNZW1iZXJzaGlwIGxldmVsIElEIGlzIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQoJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRleGVjdXRpb25TdGF0dXMpKQoJCQl7CgkJCQlpZihpc3NldCgkcG9zdFsibW0tc2VuZC13ZWxjb21lLWVtYWlsIl0pICYmICRwb3N0WyJtbS1zZW5kLXdlbGNvbWUtZW1haWwiXSA9PSAib24iKQoJCQkJewoJCQkJCSR0aGlzLT5kb0ltcG9ydCh0cnVlKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJJHRoaXMtPmRvSW1wb3J0KGZhbHNlKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQkkdGhpcy0+cHJpbnRMaW5lKCI8L3RleHRhcmVhPiIpOwoKCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRleGVjdXRpb25TdGF0dXMpKQoJCXsKCQkJJG10aW1lID0gZXhwbG9kZSgiICIsIG1pY3JvdGltZSgpKTsKCQkJJGVuZHRpbWUgPSAkbXRpbWVbMV0gKyAkbXRpbWVbMF07CgkJCSR0b3RhbEV4ZWN1dGlvblRpbWUgPSByb3VuZCgoJGVuZHRpbWUgLSAkZXhlY3V0aW9uU3RhcnRUaW1lKSwgMik7CgkJCQoJCQl1bmxpbmsoJHRoaXMtPmltcG9ydEZpbGUpOwoJCQkKCQkJJHJlc3VsdHNIdG1sID0gIjxzY3JpcHQ+IjsKCQkJJHJlc3VsdHNIdG1sIC49ICJqUXVlcnkoXCIjbW0taW1wb3J0LXByb2dyZXNzLW1lc3NhZ2VcIikuaHRtbChcIklNUE9SVCBDT01QTEVURUQgU1VDQ0VTU0ZVTExZICh7JHRvdGFsRXhlY3V0aW9uVGltZX0gc2VjcylcIik7CgkJCSI7CgkJCSRyZXN1bHRzSHRtbCAuPSAialF1ZXJ5KFwiI21tLXByb2dyZXNzYmFyLWNvbnRhaW5lclwiKS5oaWRlKCk7CgkJCSI7CgkJCSRyZXN1bHRzSHRtbCAuPSAialF1ZXJ5KFwiI21tLXJlc3VsdHMtY29udGFpbmVyXCIpLmh0bWwoJyI7CgkJCSRyZXN1bHRzSHRtbCAuPSAiPHA+eyR0aGlzLT5uZXdNZW1iZXJDb3VudH0gbWVtYmVycyBpbXBvcnRlZDwvcD4iOwoJCQkkcmVzdWx0c0h0bWwgLj0gIjxwPnskdGhpcy0+dXBkYXRlZE1lbWJlckNvdW50fSBtZW1iZXJzIHVwZGF0ZWQ8L3A+IjsKCQkJJHJlc3VsdHNIdG1sIC49ICI8cD48YSBjbGFzcz1cIm1tLXVpLWJ1dHRvbiBncmVlblwiIGhyZWY9XCIiLk1NX1V0aWxzOjpjb25zdHJ1Y3RQYWdlVXJsKCkuIlwiPkltcG9ydCBNb3JlIE1lbWJlcnM8L2E+PC9wPiI7CgkJCSRyZXN1bHRzSHRtbCAuPSAiJyk7CgkJCSI7CgkJCSRyZXN1bHRzSHRtbCAuPSAiPC9zY3JpcHQ+IjsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlc3VsdHNIdG1sID0gIjxzY3JpcHQ+IjsKCQkJJHJlc3VsdHNIdG1sIC49ICJqUXVlcnkoXCIjbW0taW1wb3J0LXByb2dyZXNzLW1lc3NhZ2VcIikuaHRtbChcIklNUE9SVCBGQUlMRURcIik7CgkJCSI7CgkJCSRyZXN1bHRzSHRtbCAuPSAialF1ZXJ5KFwiI21tLXByb2dyZXNzYmFyLWNvbnRhaW5lclwiKS5oaWRlKCk7CgkJCSI7CgkJCSRyZXN1bHRzSHRtbCAuPSAialF1ZXJ5KFwiI21tLWltcG9ydC1yZXN1bHRzLWxvZ1wiKS5oaWRlKCk7CgkJCSI7CgkJCSRyZXN1bHRzSHRtbCAuPSAialF1ZXJ5KFwiI21tLXJlc3VsdHMtY29udGFpbmVyXCIpLmh0bWwoJyI7CgkJCSRyZXN1bHRzSHRtbCAuPSAiPHA+RmF0YWwgRXJyb3I6IHskZXhlY3V0aW9uU3RhdHVzLT5tZXNzYWdlfTwvcD4iOwoJCQkkcmVzdWx0c0h0bWwgLj0gIjxwPjxhIGNsYXNzPVwibW0tdWktYnV0dG9uXCIgaHJlZj1cIiIuTU1fVXRpbHM6OmNvbnN0cnVjdFBhZ2VVcmwoKS4iXCI+VHJ5IEFnYWluPC9hPjwvcD4iOwoJCQkkcmVzdWx0c0h0bWwgLj0gIicpOwoJCQkiOwoJCQkkcmVzdWx0c0h0bWwgLj0gIjwvc2NyaXB0PiI7CgkJfQoJCQoJCSR0aGlzLT5wcmludExpbmUoJHJlc3VsdHNIdG1sKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBkb0ltcG9ydCgkZG9TZW5kV2VsY29tZUVtYWlsKQoJewoJCSRoZWFkZXJTa2lwcGVkID0gZmFsc2U7CgkJJGNybnRSb3cgPSAwOwoJIAkkY3VzdG9tRmllbGRJZHMgPSBhcnJheSgpOwoJCQoJIAlpbmlfc2V0KCdhdXRvX2RldGVjdF9saW5lX2VuZGluZ3MnLCB0cnVlKTsKCSAJCgkJaWYoKCRoYW5kbGUgPSBmb3BlbigkdGhpcy0+aW1wb3J0RmlsZSwgInIiKSkgIT09IGZhbHNlKQoJCXsKCQkJd2hpbGUoKCRjc3ZEYXRhID0gZmdldGNzdigkaGFuZGxlLCAxMDAwLCAiLCIpKSAhPT0gZmFsc2UpCgkJCXsKCQkJCSRjcm50Q29sdW1uQ291bnQgPSBjb3VudCgkY3N2RGF0YSk7CgkJCQkkY3JudFJvdysrOwoJCQoJCQkJaWYoISRoZWFkZXJTa2lwcGVkKQoJCQkJewoJCQkJCS8vIGdyYWIgY3VzdG9tIGZpZWxkIElEcwoJCQkJCWlmKCRjcm50Q29sdW1uQ291bnQgPiBzZWxmOjokUkVRVUlSRURfTlVNX0NPTFVNTlMpCgkJCQkJewoJCQkJCQlmb3IoJGkgPSBzZWxmOjokUkVRVUlSRURfTlVNX0NPTFVNTlM7ICRpIDwgJGNybnRDb2x1bW5Db3VudDsgJGkrKykKCQkJCQkJewoJCQkJCQkJaWYocHJlZ19tYXRjaCgiLyhjdXN0b20pLyIsIHN0cnRvbG93ZXIoJGNzdkRhdGFbJGldKSkpCgkJCQkJCQl7CgkJCQkJCQkJJGZpZWxkSWQgPSBwcmVnX3JlcGxhY2UoIi9bXjAtOV0rLyIsICIiLCAkY3N2RGF0YVskaV0pOwoJCQkJCQkJCSRjdXN0b21GaWVsZElkc1skaV0gPSAkZmllbGRJZDsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkKCQkJCQkkaGVhZGVyU2tpcHBlZCA9IHRydWU7CgkJCQkJY29udGludWU7CgkJCQl9CgkJCgkJCQkkdGhpcy0+cHJpbnRMaW5lKCJST1cgeyRjcm50Um93fTogIik7CgkJCgkJCQlpZihpbnR2YWwoJGNybnRDb2x1bW5Db3VudCkgPCBzZWxmOjokUkVRVUlSRURfTlVNX0NPTFVNTlMpCgkJCQl7CgkJCQkJJHRoaXMtPnByaW50TGluZSgiRVJST1I6IEludmFsaWQgY29sdW1uIGNvdW50IG9mIHskY3JudENvbHVtbkNvdW50fSBmb3VuZC4gVGhlcmUgc2hvdWxkIGJlIGF0IGxlYXN0ICIuc2VsZjo6JFJFUVVJUkVEX05VTV9DT0xVTU5TLiIgY29sdW1ucyBpbiBlYWNoIHJvdy5cbiIpOwoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQoJCQkJJHJvd0RhdGEgPSAkdGhpcy0+cGFyc2VSb3dEYXRhKCRjc3ZEYXRhKTsKCQkKCQkJCWlmKCFpc3NldCgkcm93RGF0YS0+ZW1haWwpIHx8IGVtcHR5KCRyb3dEYXRhLT5lbWFpbCkpCgkJCQl7CgkJCQkJJHRoaXMtPnByaW50TGluZSgiRVJST1I6IEVtYWlsIGFkZHJlc3MgaXMgcmVxdWlyZWQuXG4iKTsKCQkJCQljb250aW51ZTsKCQkJCX0KCQkKCQkJCSR1c2VyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJHJvd0RhdGEtPmVtYWlsKTsKCQkJCQoJCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkaXNVcGRhdGUgPSB0cnVlOwoJCQkJCQoJCQkJCS8vIGRldGVybWluZSBpZiB0aGlzIGlzIGp1c3QgYSBXb3JkUHJlc3MgdXNlciwgaWYgc28sIGNyZWF0ZSBhIHJvdyBpbiBNTSB1c2VyIGRhdGEgdGFibGUKCQkJCQkvLyBzbyB0aGF0IHRoZSB1cGRhdGUgZ29lcyB0aHJvdWdoIHN1Y2Nlc3NmdWxseQoJCQkJCWdsb2JhbCAkd3BkYjsKCQkJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiBXSEVSRSB3cF91c2VyX2lkPSd7JHVzZXItPmdldElkKCl9JyBMSU1JVCAxOyI7CgkJCQkJJG1tVXNlckRhdGEgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJCQkKCQkJCQlpZighJG1tVXNlckRhdGEpCgkJCQkJewoJCQkJCQkkbW1Vc2VyRGF0YSA9IGFycmF5KCk7CgkJCQkJCSRtbVVzZXJEYXRhWyJ3cF91c2VyX2lkIl0gPSAkdXNlci0+Z2V0SWQoKTsKCQkJCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfVVNFUl9EQVRBLCAkbW1Vc2VyRGF0YSk7CgkJCQkJCQkJCgkJCQkJCSR0aGlzLT5wcmludExpbmUoIk1JR1JBVElORyBFWElTVElORyBXT1JEUFJFU1MgVVNFUiAneyRyb3dEYXRhLT5lbWFpbH0nOlxuIik7CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQkkdGhpcy0+cHJpbnRMaW5lKCJVUERBVElORyBFWElTVElORyBNRU1CRVIgJ3skcm93RGF0YS0+ZW1haWx9JzpcbiIpOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkaXNVcGRhdGUgPSBmYWxzZTsKCQkJCQkkdGhpcy0+cHJpbnRMaW5lKCJBRERJTkcgTkVXIE1FTUJFUiAneyRyb3dEYXRhLT5lbWFpbH0nOlxuIik7CgkJCQkJJHVzZXItPnNldEltcG9ydGVkRmxhZyh0cnVlKTsKCQkJCX0KCQkJCQoJCQkJLy8gc2V0IGZpZWxkcyBvbiB1c2VyIG9iamVjdAoJCQkJJHVzZXItPnNldEVtYWlsKCRyb3dEYXRhLT5lbWFpbCk7CgkJCQkkdXNlci0+c2V0TWVtYmVyc2hpcElkKCR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCk7CgoJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPnN0YXR1cykgJiYgIWVtcHR5KCRyb3dEYXRhLT5zdGF0dXMpKQoJCQkJewoJCQkJCS8vIG9ubHkgc2V0IHN0YXR1cyBpZiBpdCdzIHZhbGlkCgkJCQkJaWYoTU1fU3RhdHVzOjpnZXROYW1lKCRyb3dEYXRhLT5zdGF0dXMpICE9ICIiKQoJCQkJCXsKCQkJCQkJJHVzZXItPnNldFN0YXR1cygkcm93RGF0YS0+c3RhdHVzKTsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWlmKCRkb1NlbmRXZWxjb21lRW1haWwpCgkJCQl7CgkJCQkJaWYoJHVzZXItPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JEFDVElWRSkKCQkJCQl7CgkJCQkJCSR1c2VyLT5zZXRTZW5kV2VsY29tZUVtYWlsRmxhZyh0cnVlKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHVzZXItPnNldFNlbmRXZWxjb21lRW1haWxGbGFnKGZhbHNlKTsKCQkJCX0KCgkJCQlpZihpc3NldCgkcm93RGF0YS0+dXNlcm5hbWUpICYmICFlbXB0eSgkcm93RGF0YS0+dXNlcm5hbWUpKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRVc2VybmFtZSgkcm93RGF0YS0+dXNlcm5hbWUpOwoJCQkJfQoJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPmZpcnN0TmFtZSkgJiYgIWVtcHR5KCRyb3dEYXRhLT5maXJzdE5hbWUpKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRGaXJzdE5hbWUoJHJvd0RhdGEtPmZpcnN0TmFtZSk7CgkJCQl9CgkJCQlpZihpc3NldCgkcm93RGF0YS0+bGFzdE5hbWUpICYmICFlbXB0eSgkcm93RGF0YS0+bGFzdE5hbWUpKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRMYXN0TmFtZSgkcm93RGF0YS0+bGFzdE5hbWUpOwoJCQkJfQoJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPnBob25lKSAmJiAhZW1wdHkoJHJvd0RhdGEtPnBob25lKSkKCQkJCXsKCQkJCQkkdXNlci0+c2V0UGhvbmUoJHJvd0RhdGEtPnBob25lKTsKCQkJCX0KCQkJCWlmKGlzc2V0KCRyb3dEYXRhLT5yZWdpc3RyYXRpb25EYXRlKSAmJiAhZW1wdHkoJHJvd0RhdGEtPnJlZ2lzdHJhdGlvbkRhdGUpKQoJCQkJewoJCQkJCSR0aW1lc3RhbXAgPSBzdHJ0b3RpbWUoJHJvd0RhdGEtPnJlZ2lzdHJhdGlvbkRhdGUpOwoJCQkKCQkJCQlpZigkdGltZXN0YW1wICE9IC0xKQoJCQkJCXsKCQkJCQkJJHVzZXItPnNldFJlZ2lzdHJhdGlvbkRhdGUoZGF0ZSgiWS1tLWQiLCAkdGltZXN0YW1wKSk7CgkJCQkJfQoJCQkJfQoJCQkJaWYoJHRoaXMtPm1lbWJlcnNoaXAtPmRvZXNFeHBpcmUoKSkKCQkJCXsKCQkJCQlpZihpc3NldCgkcm93RGF0YS0+ZXhwaXJhdGlvbkRhdGUpICYmICFlbXB0eSgkcm93RGF0YS0+ZXhwaXJhdGlvbkRhdGUpKQoJCQkJCXsKCQkJCQkJJHRpbWVzdGFtcCA9IHN0cnRvdGltZSgkcm93RGF0YS0+ZXhwaXJhdGlvbkRhdGUpOwoJCQkJCQkJCgkJCQkJCWlmKCR0aW1lc3RhbXAgIT0gLTEpCgkJCQkJCXsKCQkJCQkJCSRleHBpcmF0aW9uRGF0ZSA9IGRhdGUoIlktbS1kIiwgJHRpbWVzdGFtcCk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCS8vIHNldCBleHBpcmF0aW9uIGRhdGUgYmFzZWQgb24gc3RhcnQgZGF0ZQoJCQkJCQlpZihpc3NldCgkcm93RGF0YS0+cmVnaXN0cmF0aW9uRGF0ZSkgJiYgIWVtcHR5KCRyb3dEYXRhLT5yZWdpc3RyYXRpb25EYXRlKSkKCQkJCQkJewoJCQkJCQkJJHRpbWVzdGFtcCA9IHN0cnRvdGltZSgkcm93RGF0YS0+cmVnaXN0cmF0aW9uRGF0ZSk7CgkJCQkJCQkJCgkJCQkJCQlpZigkdGltZXN0YW1wICE9IC0xKQoJCQkJCQkJewoJCQkJCQkJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCIsICR0aW1lc3RhbXApOwoJCQkJCQkJfQoJCQkJCQkJZWxzZSAKCQkJCQkJCXsKCQkJCQkJCQkkc3RhcnREYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJZWxzZSAKCQkJCQkJewoJCQkJCQkJJHN0YXJ0RGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQkkZXhwaXJhdGlvbkRhdGUgPSAkdGhpcy0+bWVtYmVyc2hpcC0+Z2V0RXhwaXJhdGlvbkRhdGUoJHN0YXJ0RGF0ZSk7CgkJCQkJfQoJCQkJCQoJCQkJCSR1c2VyLT5zZXRFeHBpcmF0aW9uRGF0ZSgkZXhwaXJhdGlvbkRhdGUpOwoJCQkJfQoJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPnBhc3N3b3JkKSAmJiAhZW1wdHkoJHJvd0RhdGEtPnBhc3N3b3JkKSkKCQkJCXsKCQkJCQkvLyBvbmx5IHNldCBwYXNzd29yZCBmb3IgbmV3IG1lbWJlcnMKCQkJCQlpZighJGlzVXBkYXRlKQoJCQkJCXsKCQkJCQkJJHVzZXItPnNldFBhc3N3b3JkKCRyb3dEYXRhLT5wYXNzd29yZCk7CgkJCQkJfQoJCQkJfQoJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPmJpbGxpbmdBZGRyZXNzKSAmJiAhZW1wdHkoJHJvd0RhdGEtPmJpbGxpbmdBZGRyZXNzKSkKCQkJCXsKCQkJCQkkdXNlci0+c2V0QmlsbGluZ0FkZHJlc3MoJHJvd0RhdGEtPmJpbGxpbmdBZGRyZXNzKTsKCQkJCX0KCQkJCWlmKGlzc2V0KCRyb3dEYXRhLT5iaWxsaW5nQ2l0eSkgJiYgIWVtcHR5KCRyb3dEYXRhLT5iaWxsaW5nQ2l0eSkpCgkJCQl7CgkJCQkJJHVzZXItPnNldEJpbGxpbmdDaXR5KCRyb3dEYXRhLT5iaWxsaW5nQ2l0eSk7CgkJCQl9CgkJCQlpZihpc3NldCgkcm93RGF0YS0+YmlsbGluZ1N0YXRlKSAmJiAhZW1wdHkoJHJvd0RhdGEtPmJpbGxpbmdTdGF0ZSkpCgkJCQl7CgkJCQkJJHVzZXItPnNldEJpbGxpbmdTdGF0ZSgkcm93RGF0YS0+YmlsbGluZ1N0YXRlKTsKCQkJCX0KCQkJCWlmKGlzc2V0KCRyb3dEYXRhLT5iaWxsaW5nWmlwKSAmJiAhZW1wdHkoJHJvd0RhdGEtPmJpbGxpbmdaaXApKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRCaWxsaW5nWmlwQ29kZSgkcm93RGF0YS0+YmlsbGluZ1ppcCk7CgkJCQl9CgkJCQlpZihpc3NldCgkcm93RGF0YS0+YmlsbGluZ0NvdW50cnkpICYmICFlbXB0eSgkcm93RGF0YS0+YmlsbGluZ0NvdW50cnkpKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRCaWxsaW5nQ291bnRyeSgkcm93RGF0YS0+YmlsbGluZ0NvdW50cnkpOwoJCQkJfQoJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPnNoaXBwaW5nQWRkcmVzcykgJiYgIWVtcHR5KCRyb3dEYXRhLT5zaGlwcGluZ0FkZHJlc3MpKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRTaGlwcGluZ0FkZHJlc3MoJHJvd0RhdGEtPnNoaXBwaW5nQWRkcmVzcyk7CgkJCQl9CgkJCQlpZihpc3NldCgkcm93RGF0YS0+c2hpcHBpbmdDaXR5KSAmJiAhZW1wdHkoJHJvd0RhdGEtPnNoaXBwaW5nQ2l0eSkpCgkJCQl7CgkJCQkJJHVzZXItPnNldFNoaXBwaW5nQ2l0eSgkcm93RGF0YS0+c2hpcHBpbmdDaXR5KTsKCQkJCX0KCQkJCWlmKGlzc2V0KCRyb3dEYXRhLT5zaGlwcGluZ1N0YXRlKSAmJiAhZW1wdHkoJHJvd0RhdGEtPnNoaXBwaW5nU3RhdGUpKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRTaGlwcGluZ1N0YXRlKCRyb3dEYXRhLT5zaGlwcGluZ1N0YXRlKTsKCQkJCX0KCQkJCWlmKGlzc2V0KCRyb3dEYXRhLT5zaGlwcGluZ1ppcCkgJiYgIWVtcHR5KCRyb3dEYXRhLT5zaGlwcGluZ1ppcCkpCgkJCQl7CgkJCQkJJHVzZXItPnNldFNoaXBwaW5nWmlwQ29kZSgkcm93RGF0YS0+c2hpcHBpbmdaaXApOwoJCQkJfQoJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPnNoaXBwaW5nQ291bnRyeSkgJiYgIWVtcHR5KCRyb3dEYXRhLT5zaGlwcGluZ0NvdW50cnkpKQoJCQkJewoJCQkJCSR1c2VyLT5zZXRTaGlwcGluZ0NvdW50cnkoJHJvd0RhdGEtPnNoaXBwaW5nQ291bnRyeSk7CgkJCQl9CgkJCQkKCQkJCSR1c2VyLT5zZXRJc0NTVkltcG9ydCh0cnVlKTsgCgkJCQkkcmVzdWx0ID0gJHVzZXItPmNvbW1pdERhdGEoKTsgCgkJCgkJCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQkJCXsKCQkJCQkkdGhpcy0+cHJpbnRMaW5lKCJcdEVSUk9SICIuKCgkaXNVcGRhdGUpID8gIlVQREFUSU5HIiA6ICJBRERJTkciKS4iIE1FTUJFUjogIi4kcmVzdWx0LT5tZXNzYWdlLiJcbiIpOwoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCWlmKCRpc1VwZGF0ZSkKCQkJCQl7CgkJCQkJCSR0aGlzLT51cGRhdGVkTWVtYmVyQ291bnQrKzsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJHRoaXMtPm5ld01lbWJlckNvdW50Kys7CgkJCQkJfQoJCQkJCgkJCQkJJHRoaXMtPnByaW50TGluZSgiXHRNRU1CRVIgIi4oKCRpc1VwZGF0ZSkgPyAiVVBEQVRFRCIgOiAiQURERUQiKS4iIFNVQ0NFU1NGVUxMWVxuIik7CgkJCQl9CgkJCgkJCQkvLyBhZGQgY3VzdG9tIGRhdGEKCQkJCWlmKCRjcm50Q29sdW1uQ291bnQgPiBzZWxmOjokUkVRVUlSRURfTlVNX0NPTFVNTlMpCgkJCQl7CgkJCQkJZm9yKCRpID0gc2VsZjo6JFJFUVVJUkVEX05VTV9DT0xVTU5TOyAkaSA8ICRjcm50Q29sdW1uQ291bnQ7ICRpKyspCgkJCQkJewoJCQkJCQlpZighZW1wdHkoJGNzdkRhdGFbJGldKSkKCQkJCQkJewoJCQkJCQkJJHVzZXItPnNldEN1c3RvbURhdGEoJGN1c3RvbUZpZWxkSWRzWyRpXSwgJGNzdkRhdGFbJGldKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkKCQkJCS8vIGFkZCBidW5kbGVzCgkJCQlpZihpc3NldCgkcm93RGF0YS0+YnVuZGxlcykgJiYgY291bnQoJHJvd0RhdGEtPmJ1bmRsZXMpID4gMCkKCQkJCXsKCQkJCQlmb3IoJGkgPSAwOyAkaSA8IGNvdW50KCRyb3dEYXRhLT5idW5kbGVzKTsgJGkrKykKCQkJCQl7CgkJCQkJCSRidW5kbGVJZCA9ICRyb3dEYXRhLT5idW5kbGVzWyRpXTsKCQkJCQkJCgkJCQkJCWlmKGludHZhbCgkYnVuZGxlSWQpID4gMCkKCQkJCQkJewoJCQkJCQkJJHJlc3VsdCA9ICR1c2VyLT5hZGRCdW5kbGUoJGJ1bmRsZUlkLCB0cnVlKTsKCQkJCQkJCQoJCQkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJCQkJCQl7CgkJCQkJCQkJJHRoaXMtPnByaW50TGluZSgiXHRFUlJPUiBBRERJTkcgQlVORExFIElEICd7JGJ1bmRsZUlkfSc6ICIuJHJlc3VsdC0+bWVzc2FnZS4iXG4iKTsKCQkJCQkJCX0KCQkJCQkJCWVsc2UKCQkJCQkJCXsKCQkJCQkJCQkkYXBwbGllZEJ1bmRsZSA9IE1NX0FwcGxpZWRCdW5kbGU6OmdldEFwcGxpZWRCdW5kbGUoJHVzZXItPmdldElkKCksICRidW5kbGVJZCk7CgkJCQkJCQkJCgkJCQkJCQkJaWYoJGFwcGxpZWRCdW5kbGUtPmlzVmFsaWQoKSkKCQkJCQkJCQl7CgkJCQkJCQkJCS8vIHNldCBzdGF0dXMgCgkJCQkJCQkJCWlmKGlzc2V0KCRyb3dEYXRhLT5idW5kbGVTdGF0dXNbJGldKSAmJiAhZW1wdHkoJHJvd0RhdGEtPmJ1bmRsZVN0YXR1c1skaV0pKQoJCQkJCQkJCQl7CgkJCQkJCQkJCQlpZihNTV9TdGF0dXM6OmlzVmFsaWRTdGF0dXMoJHJvd0RhdGEtPmJ1bmRsZVN0YXR1c1skaV0pKQoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCSRhcHBsaWVkQnVuZGxlLT5zZXRTdGF0dXMoJHJvd0RhdGEtPmJ1bmRsZVN0YXR1c1skaV0pOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJCQoJCQkJCQkJCQkvLyBzZXQgc3RhcnQgZGF0ZQoJCQkJCQkJCQlpZihpc3NldCgkcm93RGF0YS0+YnVuZGxlU3RhcnREYXRlc1skaV0pICYmICFlbXB0eSgkcm93RGF0YS0+YnVuZGxlU3RhcnREYXRlc1skaV0pKQoJCQkJCQkJCQl7CgkJCQkJCQkJCQkkdGltZXN0YW1wID0gc3RydG90aW1lKCRyb3dEYXRhLT5idW5kbGVTdGFydERhdGVzWyRpXSk7CgkJCQkJCQkJCQkJCgkJCQkJCQkJCQlpZigkdGltZXN0YW1wICE9IC0xKQoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCSRhcHBsaWVkQnVuZGxlLT5zZXRBcHBseURhdGUoZGF0ZSgiWS1tLWQiLCAkdGltZXN0YW1wKSk7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQkJCgkJCQkJCQkJCS8vIHNldCBleHBpcmF0aW9uIGRhdGUKCQkJCQkJCQkJaWYoJGFwcGxpZWRCdW5kbGUtPmRvZXNFeHBpcmUoKSkKCQkJCQkJCQkJewoJCQkJCQkJCQkJaWYoaXNzZXQoJHJvd0RhdGEtPmJ1bmRsZUV4cGlyYXRpb25EYXRlc1skaV0pICYmICFlbXB0eSgkcm93RGF0YS0+YnVuZGxlRXhwaXJhdGlvbkRhdGVzWyRpXSkpCgkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJJHRpbWVzdGFtcCA9IHN0cnRvdGltZSgkcm93RGF0YS0+YnVuZGxlRXhwaXJhdGlvbkRhdGVzWyRpXSk7CgkJCQkJCQkJCQkJCQoJCQkJCQkJCQkJCWlmKCR0aW1lc3RhbXAgIT0gLTEpCgkJCQkJCQkJCQkJewoJCQkJCQkJCQkJCQkkZXhwaXJhdGlvbkRhdGUgPSBkYXRlKCJZLW0tZCIsICR0aW1lc3RhbXApOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJCWVsc2UKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkvLyBzZXQgZXhwaXJhdGlvbiBkYXRlIGJhc2VkIG9uIHN0YXJ0IGRhdGUKCQkJCQkJCQkJCQlpZihpc3NldCgkcm93RGF0YS0+YnVuZGxlU3RhcnREYXRlc1skaV0pICYmICFlbXB0eSgkcm93RGF0YS0+YnVuZGxlU3RhcnREYXRlc1skaV0pKQoJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJJHRpbWVzdGFtcCA9IHN0cnRvdGltZSgkcm93RGF0YS0+YnVuZGxlU3RhcnREYXRlc1skaV0pOwoJCQkJCQkJCQkKCQkJCQkJCQkJCQkJaWYoJHRpbWVzdGFtcCAhPSAtMSkKCQkJCQkJCQkJCQkJewoJCQkJCQkJCQkJCQkJJHN0YXJ0RGF0ZSA9IGRhdGUoIlktbS1kIiwgJHRpbWVzdGFtcCk7CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJCQkkc3RhcnREYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJJHN0YXJ0RGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCgkJCQkJCQkJCQkJJGV4cGlyYXRpb25EYXRlID0gJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZSgpLT5nZXRFeHBpcmF0aW9uRGF0ZSgkc3RhcnREYXRlKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkKCQkJCQkJCQkJCSRhcHBsaWVkQnVuZGxlLT5zZXRFeHBpcmF0aW9uRGF0ZSgkZXhwaXJhdGlvbkRhdGUpOwoJCQkJCQkJCQl9CgkJCQkJCQkJCQoJCQkJCQkJCQkkYXBwbGllZEJ1bmRsZS0+Y29tbWl0RGF0YSgpOwoJCQkJCQkJCX0KCQkJCQkJCQkKCQkJCQkJCQkkdGhpcy0+cHJpbnRMaW5lKCJcdEJVTkRMRSBJRCAneyRidW5kbGVJZH0nIEFEREVEIFNVQ0NFU1NGVUxMWVxuIik7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCgkJCQkkdGhpcy0+cHJpbnRMaW5lKCJcbiIpOwoJCQl9CgkJCgkJCWZjbG9zZSgkaGFuZGxlKTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcGFyc2VSb3dEYXRhKCRyYXdEYXRhKQoJewoJCWxpc3QoJHVzZXJuYW1lLCAkZW1haWwsICRwaG9uZSwgJHJlZ2lzdHJhdGlvbkRhdGUsICRleHBpcmF0aW9uRGF0ZSwgJHBhc3N3b3JkLCAkZmlyc3ROYW1lLCAkbGFzdE5hbWUsICRiaWxsaW5nQWRkcmVzcywgJGJpbGxpbmdDaXR5LAoJCQkJJGJpbGxpbmdTdGF0ZSwgJGJpbGxpbmdaaXAsICRiaWxsaW5nQ291bnRyeSwgJHNoaXBwaW5nQWRkcmVzcywgJHNoaXBwaW5nQ2l0eSwgJHNoaXBwaW5nU3RhdGUsICRzaGlwcGluZ1ppcCwKCQkJCSRzaGlwcGluZ0NvdW50cnksICRzdGF0dXMsICRidW5kbGVzLCAkYnVuZGxlU3RhdHVzLCAkYnVuZGxlU3RhcnREYXRlcywgJGJ1bmRsZUV4cGlyYXRpb25EYXRlcykgPSAkcmF3RGF0YTsKCQoJCSRkYXRhID0gbmV3IHN0ZENsYXNzKCk7CgkKCQkkZGF0YS0+dXNlcm5hbWUgPSB0cmltKCR1c2VybmFtZSk7CgkJJGRhdGEtPmVtYWlsID0gdHJpbSgkZW1haWwpOwoJCSRkYXRhLT5waG9uZSA9ICRwaG9uZTsKCQkkZGF0YS0+cmVnaXN0cmF0aW9uRGF0ZSA9ICRyZWdpc3RyYXRpb25EYXRlOwoJCSRkYXRhLT5leHBpcmF0aW9uRGF0ZSA9ICRleHBpcmF0aW9uRGF0ZTsKCQkkZGF0YS0+cGFzc3dvcmQgPSAkcGFzc3dvcmQ7CgkJJGRhdGEtPmZpcnN0TmFtZSA9ICRmaXJzdE5hbWU7CgkJJGRhdGEtPmxhc3ROYW1lID0gJGxhc3ROYW1lOwoJCSRkYXRhLT5iaWxsaW5nQWRkcmVzcyA9ICRiaWxsaW5nQWRkcmVzczsKCQkkZGF0YS0+YmlsbGluZ0NpdHkgPSAkYmlsbGluZ0NpdHk7CgkJJGRhdGEtPmJpbGxpbmdTdGF0ZSA9ICRiaWxsaW5nU3RhdGU7CgkJJGRhdGEtPmJpbGxpbmdaaXAgPSAkYmlsbGluZ1ppcDsKCQkkZGF0YS0+YmlsbGluZ0NvdW50cnkgPSAkYmlsbGluZ0NvdW50cnk7CgkJJGRhdGEtPnNoaXBwaW5nQWRkcmVzcyA9ICRzaGlwcGluZ0FkZHJlc3M7CgkJJGRhdGEtPnNoaXBwaW5nQ2l0eSA9ICRzaGlwcGluZ0NpdHk7CgkJJGRhdGEtPnNoaXBwaW5nU3RhdGUgPSAkc2hpcHBpbmdTdGF0ZTsKCQkkZGF0YS0+c2hpcHBpbmdaaXAgPSAkc2hpcHBpbmdaaXA7CgkJJGRhdGEtPnNoaXBwaW5nQ291bnRyeSA9ICRzaGlwcGluZ0NvdW50cnk7CgkJJGRhdGEtPnN0YXR1cyA9ICRzdGF0dXM7CgkJCgkJaWYoIWVtcHR5KCRidW5kbGVzKSkKCQl7CgkJCSRkYXRhLT5idW5kbGVzID0gZXhwbG9kZSgifCIsICRidW5kbGVzKTsKCQl9CgkJZWxzZQoJCXsKCQkJJGRhdGEtPmJ1bmRsZXMgPSBhcnJheSgpOwoJCX0KCQkKCQlpZighZW1wdHkoJGJ1bmRsZVN0YXR1cykpCgkJewoJCQkkZGF0YS0+YnVuZGxlU3RhdHVzID0gZXhwbG9kZSgifCIsICRidW5kbGVTdGF0dXMpOwoJCX0KCQllbHNlCgkJewoJCQkkZGF0YS0+YnVuZGxlU3RhdHVzID0gYXJyYXkoKTsKCQl9CgkJCgkJaWYoIWVtcHR5KCRidW5kbGVTdGFydERhdGVzKSkKCQl7CgkJCSRkYXRhLT5idW5kbGVTdGFydERhdGVzID0gZXhwbG9kZSgifCIsICRidW5kbGVTdGFydERhdGVzKTsKCQl9CgkJZWxzZQoJCXsKCQkJJGRhdGEtPmJ1bmRsZVN0YXJ0RGF0ZXMgPSBhcnJheSgpOwoJCX0KCQkKCQlpZighZW1wdHkoJGJ1bmRsZUV4cGlyYXRpb25EYXRlcykpCgkJewoJCQkkZGF0YS0+YnVuZGxlRXhwaXJhdGlvbkRhdGVzID0gZXhwbG9kZSgifCIsICRidW5kbGVFeHBpcmF0aW9uRGF0ZXMpOwoJCX0KCQllbHNlCgkJewoJCQkkZGF0YS0+YnVuZGxlRXhwaXJhdGlvbkRhdGVzID0gYXJyYXkoKTsKCQl9CgkKCQlyZXR1cm4gJGRhdGE7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcHJpbnRMaW5lKCRzdHIpCgl7CgkJZWNobyAkc3RyOwoJCSR0aGlzLT5mbHVzaEJ1ZmZlcnMoKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBmbHVzaEJ1ZmZlcnMoKQoJewoJCUBvYl9lbmRfZmx1c2goKTsKCQlAb2JfZmx1c2goKTsKCQlAZmx1c2goKTsKCQlAb2Jfc3RhcnQoKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBjbGVhclRlc3REYXRhKCRpZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSB3cF91c2VycyBXSEVSRSBJRCA+PSAneyRpZH0nOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQkKCQkkc3FsID0gIkRFTEVURSBGUk9NIG1tX3VzZXJfZGF0YSBXSEVSRSB3cF91c2VyX2lkID49ICd7JGlkfSc7IjsKCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQoJCSRzcWwgPSAiREVMRVRFIEZST00gbW1fY3VzdG9tX2ZpZWxkX2RhdGEgV0hFUkUgdXNlcl9pZCA+PSAneyRpZH0nOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQkKCQkkc3FsID0gIkRFTEVURSBGUk9NIG1tX2FwcGxpZWRfYnVuZGxlcyBXSEVSRSBhY2Nlc3NfdHlwZSA9ICd1c2VyJyBBTkQgYWNjZXNzX3R5cGVfaWQgPj0gJ3skaWR9JzsiOwoJCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHNxbCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHVwbG9hZEZpbGUoKQoJewoJCSRlcnJvciA9ICIiOwoJCSRtc2cgPSAiIjsKCQkkZmlsZUVsZW1lbnROYW1lID0gJ2ZpbGVUb1VwbG9hZCc7CgkKCQlpZighZW1wdHkoJF9GSUxFU1skZmlsZUVsZW1lbnROYW1lXVsnZXJyb3InXSkpCgkJewoJCQlzd2l0Y2goJF9GSUxFU1skZmlsZUVsZW1lbnROYW1lXVsnZXJyb3InXSkKCQkJewoJCgkJCQljYXNlICcxJzoKCQkJCQkkZXJyb3IgPSAnVGhlIHVwbG9hZGVkIGZpbGUgZXhjZWVkcyB0aGUgdXBsb2FkX21heF9maWxlc2l6ZSBkaXJlY3RpdmUgaW4gcGhwLmluaSc7CgkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJY2FzZSAnMic6CgkJCQkJJGVycm9yID0gJ1RoZSB1cGxvYWRlZCBmaWxlIGV4Y2VlZHMgdGhlIE1BWF9GSUxFX1NJWkUgZGlyZWN0aXZlIHRoYXQgd2FzIHNwZWNpZmllZCBpbiB0aGUgSFRNTCBmb3JtJzsKCQkJCQlicmVhazsKCQkJCQkJCgkJCQljYXNlICczJzoKCQkJCQkkZXJyb3IgPSAnVGhlIHVwbG9hZGVkIGZpbGUgd2FzIG9ubHkgcGFydGlhbGx5IHVwbG9hZGVkJzsKCQkJCQlicmVhazsKCQkJCQkJCgkJCQljYXNlICc0JzoKCQkJCQkkZXJyb3IgPSAnTm8gZmlsZSB3YXMgdXBsb2FkZWQnOwoJCQkJCWJyZWFrOwoJCgkJCQljYXNlICc2JzoKCQkJCQkkZXJyb3IgPSAnTWlzc2luZyBhIHRlbXBvcmFyeSBmb2xkZXInOwoJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCWNhc2UgJzcnOgoJCQkJCSRlcnJvciA9ICdGYWlsZWQgdG8gd3JpdGUgZmlsZSB0byBkaXNrJzsKCQkJCQlicmVhazsKCQkJCQkJCgkJCQljYXNlICc4JzoKCQkJCQkkZXJyb3IgPSAnRmlsZSB1cGxvYWQgc3RvcHBlZCBieSBleHRlbnNpb24nOwoJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCWNhc2UgJzk5OSc6CgkJCQlkZWZhdWx0OgoJCQkJCSRlcnJvciA9ICdObyBlcnJvciBjb2RlIGF2YWlhYmxlJzsKCQkJfQoJCX0KCQllbHNlaWYoZW1wdHkoJF9GSUxFU1snZmlsZVRvVXBsb2FkJ11bJ3RtcF9uYW1lJ10pIHx8ICRfRklMRVNbJ2ZpbGVUb1VwbG9hZCddWyd0bXBfbmFtZSddID09ICdub25lJykKCQl7CgkJCSRlcnJvciA9ICdObyBmaWxlIHdhcyB1cGxvYWRlZCc7CgkJfQoJCWVsc2UKCQl7CgkJCSRtc2cgLj0gIiBGaWxlIE5hbWU6ICIgLiAkX0ZJTEVTWydmaWxlVG9VcGxvYWQnXVsnbmFtZSddIC4gIiwgIjsKCQkJJG1zZyAuPSAiIEZpbGUgU2l6ZTogIiAuIEBmaWxlc2l6ZSgkX0ZJTEVTWydmaWxlVG9VcGxvYWQnXVsndG1wX25hbWUnXSk7CgkKCQkJJGZpbGVUeXBlQXJyID0gd3BfY2hlY2tfZmlsZXR5cGUoJF9GSUxFU1snZmlsZVRvVXBsb2FkJ11bJ25hbWUnXSk7CgkJCSRleHRlbnNpb24gPSBzdHJ0b2xvd2VyKCRmaWxlVHlwZUFyclsiZXh0Il0pOwoJCQkkbWltZVR5cGUgPSAoaXNzZXQoJGZpbGVUeXBlQXJyWyJ0eXBlIl0pICYmICFpc19udWxsKCRmaWxlVHlwZUFyclsidHlwZSJdKSk/JGZpbGVUeXBlQXJyWyJ0eXBlIl06ImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSI7CgkKCQkJLy8gdXNlZCB0aGlzIG1ldGhvZCBpbiBjYXNlIHdlIHdhbnQgdG8gc3VwcG9ydCBvdGhlciB1cGxvYWQgdHlwZXMKCQkJLy8gbmVlZHMgdG8gYmUgY2hlY2tlZCBoZXJlIGFzIHlvdSBjYW4gaW52b2tlIHRoaXMgdGhyb3VnaCBtb2R1bGUtaGFuZGxlCgkJCWlmKCFpbl9hcnJheSgkZXh0ZW5zaW9uLCBhcnJheSgnY3N2JykpKQoJCQl7CgkJCQllY2hvICI8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+dG9wLm1tanMuc3RvcFVwbG9hZCgnMCcsJ0ZpbGUgd2FzIG5vdCB1cGxvYWRlZCBzdWNjZXNzZnVsbHksIHBsZWFzZSBjaGVjayB0aGUgZmlsZSB0eXBlIFt7JG1pbWVUeXBlfV0nKTs8L3NjcmlwdD4iOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJLy9mb3Igc2VjdXJpdHkgcmVhc29ucywgd2UgZm9yY2UgdGhlIHJlbW92YWwgb2YgYWxsIHVwbG9hZGVkIGZpbGVzCgkJCQkkb3ZlcnJpZGVzID0gYXJyYXkoJ3Rlc3RfZm9ybScgPT4gZmFsc2UpOwoJCQkJJGZpbGU9d3BfaGFuZGxlX3VwbG9hZCgkX0ZJTEVTWydmaWxlVG9VcGxvYWQnXSwgJG92ZXJyaWRlcyk7CgkJCQkJCgkJCQlAdW5saW5rKCRfRklMRVNbJ2ZpbGVUb1VwbG9hZCddKTsKCQkJCQkKCQkJCSRmaWxlRXhpc3RzID0gZmFsc2U7CgkJCQlpZihmaWxlX2V4aXN0cygkZmlsZVsnZmlsZSddKSl7CgkJCQkJJGZpbGVFeGlzdHMgPSB0cnVlOwoJCQkJfQoJCQkJCQoJCQkJaWYoIWlzc2V0KCRmaWxlWyJlcnJvciJdKSAmJiBpc3NldCgkZmlsZVsidXJsIl0pICYmICRmaWxlRXhpc3RzKSB7CgkJCQkJZWNobyAiPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPnRvcC5tbWpzLnN0b3BVcGxvYWQoJzEnLCciLiRmaWxlWyJ1cmwiXS4iJywnIi4kZmlsZVsiZmlsZSJdLiInKTs8L3NjcmlwdD4iOwoJCQkJfQoJCQkJZWxzZSBpZighJGZpbGVFeGlzdHMpewoJCQkJCWVjaG8gIjxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0Jz50b3AubW1qcy5zdG9wVXBsb2FkKCcwJywnIi5wcmVnX3JlcGxhY2UoIi9bXCdcIl0rLyIsIiIsICJGaWxlIHdhcyBub3QgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5LCBwbGVhc2UgY2hlY2sgZGlyZWN0b3J5IHBlcm1pc3Npb25zLiIpLiInKTs8L3NjcmlwdD4iOwoJCQkJfQoJCQkJZWxzZSB7CgkJCQkJZWNobyAiPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPnRvcC5tbWpzLnN0b3BVcGxvYWQoJzAnLCciLnByZWdfcmVwbGFjZSgiL1tcJ1wiXSsvIiwiIiwgJGZpbGVbImVycm9yIl0pLiInKTs8L3NjcmlwdD4iOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiAiIjsKCX0KfQo=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(17, '1clickpurchaseform', 'Y2xhc3MgTU1fMUNsaWNrUHVyY2hhc2VGb3JtIGV4dGVuZHMgTU1fQWJzdHJhY3RGb3JtCnsKCXB1YmxpYyAkcHJvZHVjdDsKCXB1YmxpYyAkdXNlcjsKCXB1YmxpYyAkbWVtYmVyRGF0YTsKCXB1YmxpYyAkY291cG9uc0F2YWlsYWJsZSA9IGZhbHNlOwoJcHVibGljICRwcm9kdWN0SWQgPSAwOwoJcHVibGljICRwcm9kdWN0TmFtZSA9ICIiOwoJcHVibGljICRhY2Nlc3NOYW1lID0gIiI7CglwdWJsaWMgJHByb2R1Y3RQcmljZSA9ICIiOwoJcHVibGljICRwcm9kdWN0UHJpY2VEZXNjcmlwdGlvbiA9ICIiOwoJcHVibGljICRwcm9kdWN0RGVzY3JpcHRpb24gPSAiIjsKCXB1YmxpYyAkaXNTaGlwcGFibGUgPSBmYWxzZTsKCXB1YmxpYyAkc2hpcHBpbmdNZXRob2RzID0gIiI7CglwdWJsaWMgJHNoaXBwaW5nQ291bnRyeUxpc3QgPSAiIjsKCQkKCS8qKgoJICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4gVGFrZXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzCgkgKiBAcGFyYW0gQXJyYXkgJHBhcmFtcyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBmb3JtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBhcmFtcz1udWxsKQoJewkKCQkkdGhpcy0+cHJvZHVjdCA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudFByb2R1Y3QoKTsKCQkKCQlpZigkdGhpcy0+cHJvZHVjdC0+aXNWYWxpZCgpKQoJCXsKCQkJJHRoaXMtPmluaXRpYWxpemUoKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAiIjsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpbml0aWFsaXplKCkKCXsKCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCgkJJHRoaXMtPnVzZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRVc2VyKHRydWUpOwoJCQoJCWlmKCR0aGlzLT5wcm9kdWN0LT5oYXNUcmlhbCgpKQoJCXsKCQkJJHRoaXMtPnByb2R1Y3RQcmljZSA9ICR0aGlzLT5wcm9kdWN0LT5nZXRUcmlhbEFtb3VudCh0cnVlKTsKCQl9CgkJZWxzZQoJCXsKCQkJJHRoaXMtPnByb2R1Y3RQcmljZSA9ICR0aGlzLT5wcm9kdWN0LT5nZXRQcmljZSh0cnVlKTsKCQl9CgkJCgkJJHRoaXMtPnByb2R1Y3REZXNjcmlwdGlvbiA9ICR0aGlzLT5wcm9kdWN0LT5nZXREZXNjcmlwdGlvbigpOwoJCSR0aGlzLT5wcm9kdWN0UHJpY2VEZXNjcmlwdGlvbiA9ICR0aGlzLT5wcm9kdWN0LT5nZXRCaWxsaW5nRGVzY3JpcHRpb24odHJ1ZSwgZmFsc2UpOwoJCSR0aGlzLT5pc1NoaXBwYWJsZSA9IChib29sKSAkdGhpcy0+cHJvZHVjdC0+aXNTaGlwcGFibGUoKTsKCQkkdGhpcy0+cHJvZHVjdElkID0gJHRoaXMtPnByb2R1Y3QtPmdldElkKCk7CgkJCgkJJG1lbWJlcnNoaXAgPSAkdGhpcy0+cHJvZHVjdC0+Z2V0QXNzb2NpYXRlZE1lbWJlcnNoaXAoKTsKCQkkYnVuZGxlID0gJHRoaXMtPnByb2R1Y3QtPmdldEFzc29jaWF0ZWRCdW5kbGUoKTsKCQkkdGhpcy0+cHJvZHVjdE5hbWUgPSAkdGhpcy0+cHJvZHVjdC0+Z2V0TmFtZSgpOwoJCQoJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJewoJCQkkdGhpcy0+YWNjZXNzTmFtZSA9ICRtZW1iZXJzaGlwLT5nZXROYW1lKCk7CgkJfQoJCWVsc2UgaWYoJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCXsKCQkJJHRoaXMtPmFjY2Vzc05hbWUgPSAkYnVuZGxlLT5nZXROYW1lKCk7CgkJfQoJCQoJCSR0aGlzLT5jb3Vwb25zQXZhaWxhYmxlID0gTU1fQ291cG9uOjpoYXNBdmFpbGFibGVDb3Vwb24oKTsKCQkKCQkvLyBzZXQgZGVmYXVsdCBtZW1iZXIgZGF0YSB2YWx1ZXMKCQkkdGhpcy0+bWVtYmVyRGF0YSA9IGFycmF5KCk7CgkJCgkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3VzZXJfaWQiXSA9ICIiOwoJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19tZXRob2QiXSA9ICIiOwoJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIl0gPSAiIjsKCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdID0gIiI7CgkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIl0gPSAiIjsKCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfemlwIl0gPSAiIjsKCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID0gIiI7CgkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2NvdXBvbl9jb2RlIl0gPSAiIjsKCQkKCQlpZihNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9VU0VfQ0hFQ0tPVVRfRk9STV9URVNUX0RBVEEpID09ICIxIikKCQl7CgkJCSR0ZXN0RGF0YSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldENoZWNrb3V0Rm9ybVRlc3REYXRhKCk7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIl0gPSBNTV9UZXN0RGF0YVV0aWxzOjpnZXRUZXN0VmFsdWUoJHRlc3REYXRhLCAibW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcyIpOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX3NoaXBwaW5nX2NpdHkiKTsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIl0gPSBNTV9UZXN0RGF0YVV0aWxzOjpnZXRUZXN0VmFsdWUoJHRlc3REYXRhLCAibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiKTsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCIpOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiKTsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX21ldGhvZCJdID0gIiI7CgkJfQoJCQoJCWlmKCR0aGlzLT51c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfdXNlcl9pZCJdID0gJHRoaXMtPnVzZXItPmdldElkKCk7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19tZXRob2QiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcyJdID0gJHRoaXMtPnVzZXItPmdldFNoaXBwaW5nQWRkcmVzcygpOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdID0gJHRoaXMtPnVzZXItPmdldFNoaXBwaW5nQ2l0eSgpOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSA9ICR0aGlzLT51c2VyLT5nZXRTaGlwcGluZ1N0YXRlKCk7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ196aXAiXSA9ICR0aGlzLT51c2VyLT5nZXRTaGlwcGluZ1ppcENvZGUoKTsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXSA9ICR0aGlzLT51c2VyLT5nZXRTaGlwcGluZ0NvdW50cnkoKTsKCQl9CgkJCgkJLy8gY291bnRyaWVzCgkJaWYoaXNfbnVsbCgkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdKSB8fCAkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID09ICIiKQoJCXsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXSA9IE1NX0NvdW50cnlVdGlsczo6JERGTFRfQ09VTlRSWV9JU087CgkJfQoKCQkkdGhpcy0+c2hpcHBpbmdDb3VudHJ5TGlzdCA9IE1NX0h0bWxVdGlsczo6Z2V0Q291bnRyeUxpc3QoJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXSk7CgkJCgkJJHRoaXMtPmlzVmFsaWQgPSB0cnVlOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgYWxsIG9mIHRoZSBIVE1MIHRoYXQgc2hvdWxkIHNob3cgdXAgYXQgCgkgKiB0aGUgdG9wIG9mIHRoZSBmb3JtIGJhc2VkIG9uIHRoZSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uLgoJICogQHJldHVybiBTdHJpbmcgaGVhZGVyIEhUTUwgZm9yIHRoZSBjaGVja291dCBmb3JtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcm1IZWFkZXIoKQoJewoJCSRzdHIgPSAiIjsKCQkKCQkkc3RyIC49ICR0aGlzLT5nZXRKYXZhc2NyaXB0SW5jbHVkZXMoKTsKCQkKCQkkc3RyIC49ICI8Zm9ybSBpZD0nbW1fMWNsaWNrcHVyY2hhc2VfZm9ybScgbmFtZT0nbW1fMWNsaWNrcHVyY2hhc2VfZm9ybSc+CiI7CgkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX3Byb2R1Y3RfaWQnIG5hbWU9J21tX3Byb2R1Y3RfaWQnIHZhbHVlPSd7JHRoaXMtPnByb2R1Y3RJZH0nIC8+CiI7CgkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2lzX3NoaXBwYWJsZScgbmFtZT0nbW1faXNfc2hpcHBhYmxlJyB2YWx1ZT0nIi4oKCR0aGlzLT5pc1NoaXBwYWJsZSA9PSB0cnVlKSA/ICIxIiA6ICIwIikuIicgLz4KIjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fZGF0YV9wcm9kdWN0X3ByaWNlJyB2YWx1ZT0nIi4oKCR0aGlzLT5wcm9kdWN0UHJpY2UgPT0gIiIgfHwgc3RydG9sb3dlcigkdGhpcy0+cHJvZHVjdFByaWNlKSA9PSAiZnJlZSIpID8gX21tZigwLjAwKSA6ICR0aGlzLT5wcm9kdWN0UHJpY2UpLiInIC8+CiI7CgkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2RhdGFfc2hpcHBpbmdfcHJpY2UnIHZhbHVlPScwJyAvPgoiOwoJCSRzdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9kYXRhX2Rpc2NvdW50JyB2YWx1ZT0nMCcgLz4KIjsKCQkkZm9ybUlkID0gTU1fVXRpbHM6OmNyZWF0ZVJhbmRvbVN0cmluZygxMCk7CgkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX3N1Ym1pc3Npb25fbXV0ZXgnIHZhbHVlPSd7JGZvcm1JZH0nIC8+IjsKCQkKCQlyZXR1cm4gJHN0cjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIGFsbCBvZiB0aGUgSFRNTCB0aGF0IHNob3VsZCBzaG93IHVwIGF0CgkgKiB0aGUgYm90dG9tIG9mIHRoZSBmb3JtIGJhc2VkIG9uIHRoZSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uLgoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBmb290ZXIgSFRNTCBmb3IgdGhlIGNoZWNrb3V0IGZvcm0KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRm9ybUZvb3RlcigpCgl7CgkJJHN0ciA9ICIiOwoJCQoJCSRzdHIgLj0gIjwvZm9ybT4KIjsKCQkkc3RyIC49ICR0aGlzLT5nZXRJbml0SmF2YXNjcmlwdCgkdGhpcy0+bWVtYmVyRGF0YSk7CgkKCQlyZXR1cm4gJHN0cjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGluY2x1ZGUgc3RhdGVtZW50cyBmb3IgcmVxdWlyZWQgamF2YXNjcmlwdCBmaWxlcy4KCSAqIEByZXR1cm4gU3RyaW5nIHRoYXQgY29udGFpbnMgdGhlIGphdmFzY3JpcHQgZm9yIGluY2x1ZGluZyByZXF1aXJlZCBqYXZhc2NyaXB0IGZpbGVzLgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SmF2YXNjcmlwdEluY2x1ZGVzKCkKCXsKCQkkc3RyID0gIiI7CgkJCgkJJHVzZXJKU0RpciA9IE1NX1BMVUdJTl9OQU1FLiIvcmVzb3VyY2VzL2pzL3VzZXIvIjsKCQkkanNGaWxlVXJsID0gcGx1Z2luc191cmwoInskdXNlckpTRGlyfW1tLTFjbGlja3B1cmNoYXNlLWZvcm0uanMiKTsKCQkkc3RyIC49ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSInLiRqc0ZpbGVVcmwuJz92ZXI9Jy5NZW1iZXJNb3VzZTo6Z2V0UGx1Z2luVmVyc2lvbigpLiciPjwvc2NyaXB0PgonOwoJCXJldHVybiAkc3RyOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgamF2YXNjcmlwdCB0byBpbml0aWFsaXplIHRoZSBjaGVja291dCBmb3JtLiAKCSAqIEBwYXJhbSBhcnJheSAkZGVmYXVsdERhdGEgdGhpcyBjb250YWlucyB0aGUgZGVmYXVsdCBkYXRhIHVzZWQgdG8gcHJlcG9wdWxhdGUgY2VydGFpbiBmb3JtIGVsZW1lbnRzCgkgKiBAcmV0dXJuIFN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBqYXZhc2NyaXB0IHRvIGluaXRpYWxpemVzIHRoZSBjaGVja291dCBmb3JtLgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SW5pdEphdmFzY3JpcHQoJGRlZmF1bHREYXRhKQoJewoJCSRzdHIgPSAiPHNjcmlwdD4KIjsKCQkkc3RyIC49ICJqUXVlcnkoZnVuY3Rpb24oKSB7CiI7CgkJJHN0ciAuPSAib25lY2xpY2twdXJjaGFzZV9qcy5jb3VudHJ5Q2hhbmdlSGFuZGxlcihcInNoaXBwaW5nXCIpOwoiOwoJCWlmKGlzc2V0KCRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSkpCgkJewoJCQkkc3RyIC49ICJvbmVjbGlja3B1cmNoYXNlX2pzLmluaXRTdGF0ZURyb3Bkb3duKFwic2hpcHBpbmdcIiwgXCJ7JGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSJdfVwiKTsKIjsKCQl9CgkJCgkJJHN0ciAuPSAib25lY2xpY2twdXJjaGFzZV9qcy5zaGlwcGluZ01ldGhvZENoYW5nZUhhbmRsZXIoKTsKIjsKCQkkc3RyIC49ICJvbmVjbGlja3B1cmNoYXNlX2pzLmRpc2NvdW50Q2hhbmdlSGFuZGxlcihvbmVjbGlja3B1cmNoYXNlX2pzLmZvcm1hdE1vbmV5KFwiMC4wMFwiKSk7CiI7CQoJCSRzdHIgLj0gIm9uZWNsaWNrcHVyY2hhc2VfanMuYXBwbHlDb3Vwb24oKTsKIjsJCQoJCSRzdHIgLj0gIn0pOwoiOwoJCQoJCSRzdHIgLj0gIjwvc2NyaXB0PgoiOwoJCQoJCXJldHVybiAkc3RyOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9Gb3JtX1NlY3Rpb24gdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY2hlY2tpbmcgaWYgdGhlIGN1cnJlbnQgdXNlciAKCSAqIHNob3VsZCBzZWUgdGhlIGNvbnRlbnRzIG9mIHRoaXMgc2VjdGlvbiBiYXNlZCBvbiB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fc2VjdGlvbigkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiIjsKCQkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCQoJCWlmKGlzc2V0KCR0eXBlKSkKCQl7CQoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsKCQkJCWNhc2UgInNoaXBwaW5naW5mbyI6CgkJCQkJJG91dHB1dFN0ciAuPSAiPGRpdiAiLigoJGZvcm0tPmlzU2hpcHBhYmxlID09IGZhbHNlKSA/ICJzdHlsZT1cImRpc3BsYXk6bm9uZTtcIiIgOiAiIikuIj4KIjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImNvdXBvbiI6CgkJCQkJJG91dHB1dFN0ciAuPSAiPGRpdiAiLigoISRmb3JtLT5jb3Vwb25zQXZhaWxhYmxlKSA/ICJzdHlsZT1cImRpc3BsYXk6bm9uZTtcIiIgOiAiIikuIj4KIjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0uIjsKCQkJCQlicmVhazsKCQkJfQoJCQkJCgkJCSRvdXRwdXRTdHIgLj0gZG9fc2hvcnRjb2RlKCRjb250ZW50KS4iPC9kaXY+CiI7CgkJCXJldHVybiAkb3V0cHV0U3RyOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRmllbGQgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGZvcm0gZmllbGQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZmllbGQoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCQoJCWlmKCFpc3NldCgkdHlwZSkpCgkJewoJCQkkdHlwZSA9ICJpbnB1dCI7CgkJfQoJCQoJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQl7CgkJCWNhc2UgImlucHV0IjoKCQkJCWlmKGlzc2V0KCRuYW1lKSkKCQkJCXsKCQkJCQkkb3V0cHV0U3RyID0gc2VsZjo6Z2VuZXJhdGVJbnB1dEZvcm1GaWVsZChzdHJ0b2xvd2VyKCRuYW1lKSwgJGZvcm0tPm1lbWJlckRhdGEsICRmb3JtLCAkYXR0cyk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAnbmFtZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9IHdpdGggdHlwZSB7JHR5cGV9LiI7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkKCQkJY2FzZSAiY3VzdG9tIjoKCQkJY2FzZSAiY3VzdG9tLWhpZGRlbiI6CgkJCQlpZihpc3NldCgkaWQpKQoJCQkJewoJCQkJCSRjdXN0b21GaWVsZCA9IE1NX0N1c3RvbUZpZWxkOjpnZXREYXRhQnlGaWVsZElkKCRpZCk7CgkJCQoJCQkJCWlmKCRjdXN0b21GaWVsZC0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJJGNybnRWYWx1ZSA9ICIiOwoJCQkJCQlpZihpc3NldCgkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9Il0pICYmICRmb3JtLT5tZW1iZXJEYXRhWyJtbV9jdXN0b21fZmllbGRfeyRpZH0iXSAhPSAiIikKCQkJCQkJewoJCQkJCQkJJGNybnRWYWx1ZSA9ICRmb3JtLT5tZW1iZXJEYXRhWyJtbV9jdXN0b21fZmllbGRfeyRpZH0iXTsKCQkJCQkJfQoJCQkJCgkJCQkJCWlmKCR0eXBlID09ICJjdXN0b20taGlkZGVuIikKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2N1c3RvbV9maWVsZF97JGlkfScgbmFtZT0nbW1fY3VzdG9tX2ZpZWxkX3skaWR9JyAiOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkY3JudFZhbHVlKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgIjsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIi8+CiI7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICRjdXN0b21GaWVsZC0+ZHJhdygkY3JudFZhbHVlLCAkY2xhc3MpOwoJCQkKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9jdXN0b21fZmllbGRfeyRpZH1fdHlwZScgIjsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gInZhbHVlPSciLiRjdXN0b21GaWVsZC0+Z2V0VHlwZSgpLiInICI7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICIvPgoiOwoJCQkJCQl9CgkJCQkKCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2N1c3RvbV9maWVsZF97JGlkfV9sYWJlbCcgIjsKCQkJCQkJCQkKCQkJCQkJaWYoaXNzZXQoJGZvcm0tPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF97JGlkfV9sYWJlbCJdKSkKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9X2xhYmVsIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyAiOwoJCQkJCQl9CgkJCQkJCQkJCgkJCQkJCSRvdXRwdXRTdHIgLj0gIi8+CiI7CgkJCQkJCWlmKGlzc2V0KCRpc3JlcXVpcmVkKSAmJiBzdHJ0b2xvd2VyKCRpc3JlcXVpcmVkKSA9PSAidHJ1ZSIpCgkJCQkJCXsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9jdXN0b21fZmllbGRfeyRpZH1fcmVxdWlyZWQnIHZhbHVlPScxJyAvPgoiOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2N1c3RvbV9maWVsZF97JGlkfV9yZXF1aXJlZCcgdmFsdWU9JzAnIC8+CiI7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAiSW52YWxpZCBjdXN0b20gZmllbGQgSUQgb2YgJ3skaWR9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSI7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ2lkJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0gd2l0aCB0eXBlIHskdHlwZX0uIjsKCQkJCX0KCQkJCQoJCQkJYnJlYWs7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBJbnZhbGlkIHR5cGUgb2YgJ3skdHlwZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCWJyZWFrOwoJCX0KCQkJCgkJcmV0dXJuICRvdXRwdXRTdHI7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVJbnB1dEZvcm1GaWVsZCgkbmFtZSwgJGRlZmF1bHREYXRhLCAkZm9ybT1udWxsLCAkY3VzdG9tQ3NzQ2xhc3M9Im1tLXRleHRGaWVsZCIsICRhdHRzPW51bGwpCgl7CgkJJG91dHB1dFN0ciA9ICIiOwoJCQoJCXN3aXRjaChzdHJ0b2xvd2VyKCRuYW1lKSkKCQl7CQkKCQkJY2FzZSAic2hpcHBpbmdhZGRyZXNzIjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nbW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcycgbmFtZT0nbW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcycgdmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJzaGlwcGluZ2NpdHkiOgoJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdtbV9maWVsZF9zaGlwcGluZ19jaXR5JyBuYW1lPSdtbV9maWVsZF9zaGlwcGluZ19jaXR5JyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgY2xhc3M9J3skY3VzdG9tQ3NzQ2xhc3N9JyAvPgoiOwoJCQkJYnJlYWs7CgkJCQkJCgkJCWNhc2UgInNoaXBwaW5nc3RhdGUiOgoJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdtbV9maWVsZF9zaGlwcGluZ19zdGF0ZScgbmFtZT0nbW1fZmllbGRfc2hpcHBpbmdfc3RhdGUnIHZhbHVlPSciLmh0bWxlbnRpdGllcyhzdHJpcHNsYXNoZXMoJGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSJdKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgY2xhc3M9J3skY3VzdG9tQ3NzQ2xhc3N9JyAvPgoiOwoJCQkJJG91dHB1dFN0ciAuPSAiPHNlbGVjdCBpZD0nbW1fZmllbGRfc2hpcHBpbmdfc3RhdGVfZGQnIHNpemU9JzEnIG9uY2hhbmdlPVwib25lY2xpY2twdXJjaGFzZV9qcy5zdGF0ZUNoYW5nZUhhbmRsZXIoJ3NoaXBwaW5nJyk7XCIgY2xhc3M9XCJtbS1zZWxlY3RMaXN0XCI+CiI7CgkJCQkkb3V0cHV0U3RyIC49IE1NX0h0bWxVdGlsczo6Z2V0VVNTdGF0ZXNMaXN0KCk7CgkJCQkkb3V0cHV0U3RyIC49ICI8L3NlbGVjdD4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJzaGlwcGluZ3ppcGNvZGUiOgoJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdtbV9maWVsZF9zaGlwcGluZ196aXAnIG5hbWU9J21tX2ZpZWxkX3NoaXBwaW5nX3ppcCcgdmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCJdKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgY2xhc3M9J3skY3VzdG9tQ3NzQ2xhc3N9JyAvPgoiOwoJCQkJYnJlYWs7CgkJCQkJCgkJCWNhc2UgInNoaXBwaW5nY291bnRyeSI6CgkJCQkkb3V0cHV0U3RyIC49ICI8c2VsZWN0IGlkPSdtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5JyBuYW1lPSdtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5JyBvbmNoYW5nZT1cIm9uZWNsaWNrcHVyY2hhc2VfanMuY291bnRyeUNoYW5nZUhhbmRsZXIoJ3NoaXBwaW5nJyk7XCIgY2xhc3M9XCJtbS1zZWxlY3RMaXN0XCI+CiI7CgkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT5zaGlwcGluZ0NvdW50cnlMaXN0OwoJCQkJJG91dHB1dFN0ciAuPSAiPC9zZWxlY3Q+CiI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlICJzaGlwcGluZ21ldGhvZCI6CgkJCQlpZighaXNfbnVsbCgkYXR0cykgJiYgaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJCQl7CgkJCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCQkJewoJCQkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkJCSQka2V5ID0gJHY7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkkc2VsZWN0ZWRTaGlwcGluZ01ldGhvZCA9ICRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfbWV0aG9kIl07CgkJCQkKCQkJCWlmKGVtcHR5KCRzZWxlY3RlZFNoaXBwaW5nTWV0aG9kKSAmJiBpc3NldCgkZGVmYXVsdCkpCgkJCQl7CgkJCQkJJHNlbGVjdGVkU2hpcHBpbmdNZXRob2QgPSAkZGVmYXVsdDsKCQkJCX0KCQkJCQoJCQkJJGZvcm0tPnNoaXBwaW5nTWV0aG9kcyA9IE1NX0h0bWxVdGlsczo6Z2V0U2hpcHBpbmdNZXRob2RMaXN0KCRzZWxlY3RlZFNoaXBwaW5nTWV0aG9kKTsKCQkJCQoJCQkJJG91dHB1dFN0ciAuPSAiPHNlbGVjdCBpZD0nbW1fZmllbGRfc2hpcHBpbmdfbWV0aG9kJyBuYW1lPSdtbV9maWVsZF9zaGlwcGluZ19tZXRob2QnIG9uY2hhbmdlPSdvbmVjbGlja3B1cmNoYXNlX2pzLnNoaXBwaW5nTWV0aG9kQ2hhbmdlSGFuZGxlcigpOycgY2xhc3M9XCJtbS1zZWxlY3RMaXN0XCI+CiI7CgkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT5zaGlwcGluZ01ldGhvZHM7CgkJCQkkb3V0cHV0U3RyIC49ICI8L3NlbGVjdD4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJjb3Vwb25jb2RlIjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nbW1fZmllbGRfY291cG9uX2NvZGUnIG5hbWU9J21tX2ZpZWxkX2NvdXBvbl9jb2RlJyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfY291cG9uX2NvZGUiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInIG9ua2V5ZG93bj0ncmV0dXJuIG9uZWNsaWNrcHVyY2hhc2VfanMuY291cG9uQ2hlY2soZXZlbnQpOycgY2xhc3M9J3skY3VzdG9tQ3NzQ2xhc3N9JyAvPgoiOwoJCQkJYnJlYWs7CgkJfQoJCQoJCXJldHVybiAkb3V0cHV0U3RyOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9Gb3JtX0RhdGEgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGRhdGEgZWxlbWVudCBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQgYW5kIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9kYXRhKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJJG91dHB1dFN0ciA9ICI8c3BhbiBjbGFzcz1cIm1tLWRhdGFcIj4iOwoJCgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQkkZm9ybSA9IE1NX09iamVjdENhY2hlOjpnZXQoTU1fT2JqZWN0Q2FjaGU6OiRLRVlfTEFTVF9GT1JNKTsKCQoJCWlmKGlzc2V0KCRuYW1lKSkKCQl7CgkJCXN3aXRjaChzdHJ0b2xvd2VyKCRuYW1lKSkKCQkJewoJCQkJY2FzZSAicHJvZHVjdG5hbWUiOgoJCQkJCSR1c2VBY2Nlc3NOYW1lID0gdHJ1ZTsKCQkJCQlpZihpc3NldCgkdXNlYWNjZXNzbmFtZSkpCgkJCQkJewoJCQkJCQlpZigkdXNlQWNjZXNzTmFtZSA9PSAiZmFsc2UiKQoJCQkJCQl7CgkJCQkJCQkkdXNlQWNjZXNzTmFtZSA9IGZhbHNlOwoJCQkJCQl9CgkJCQkJfQoJCQkJCQoJCQkJCWlmKCR1c2VBY2Nlc3NOYW1lID09IHRydWUpCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT5hY2Nlc3NOYW1lOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT5wcm9kdWN0TmFtZTsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJwcm9kdWN0ZGVzY3JpcHRpb24iOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnByb2R1Y3REZXNjcmlwdGlvbjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInByb2R1Y3RwcmljZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+cHJvZHVjdFByaWNlOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAicHJvZHVjdHByaWNlZGVzY3JpcHRpb24iOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnByb2R1Y3RQcmljZURlc2NyaXB0aW9uOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAic2hpcHBpbmdwcmljZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAiPHNwYW4gaWQ9XCJtbV9sYWJlbF9zaGlwcGluZ19wcmljZVwiPjwvc3Bhbj4iOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiZGlzY291bnQiOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxzcGFuIGlkPVwibW1fbGFiZWxfZGlzY291bnRcIj48L3NwYW4+IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInRvdGFscHJpY2UiOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxzcGFuIGlkPVwibW1fbGFiZWxfdG90YWxfcHJpY2VcIj48L3NwYW4+IjsKCQkJCQlicmVhazsKCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgbmFtZSBvZiAneyRuYW1lfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0ci4iPC9zcGFuPgoiOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICduYW1lJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fTWVzc2FnZSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhlIAoJICogbWVzc2FnZSBlbGVtZW50IGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZCBhbmQgdGhlIGZvcm0gY29uZmlndXJhdGlvbi4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX21lc3NhZ2UoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCSRvdXRwdXRTdHIgPSAiIjsKCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsKCQkJCWNhc2UgImNvdXBvbnN1Y2Nlc3MiOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxzcGFuIGlkPVwibW1fbGFiZWxfY291cG9uX3N1Y2Nlc3NcIiBjbGFzcz1cIm1tLWNvdXBvblN1Y2Nlc3NNZXNzYWdlXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48L3NwYW4+IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImNvdXBvbmVycm9yIjoKCQkJCQkkb3V0cHV0U3RyIC49ICI8c3BhbiBpZD1cIm1tX2xhYmVsX2NvdXBvbl9lcnJvclwiIGNsYXNzPVwibW0tY291cG9uRXJyb3JNZXNzYWdlXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmVcIj48L3NwYW4+IjsKCQkJCQlicmVhazsKCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0cjsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndHlwZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciB7JGNvZGV9IFNtYXJ0VGFnIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fQnV0dG9uIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIAoJICogcmV0dXJuaW5nIHRoZSBhcHByb3ByaWF0ZSBqYXZhc2NyaXB0IHRvIHN1Ym1pdCB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9idXR0b24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCSRvdXRwdXRTdHIgPSAiIjsKCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsJCgkJCQljYXNlICJhcHBseWNvdXBvbiI6CgkJCQkJJG91dHB1dFN0ciAuPSAiamF2YXNjcmlwdDpvbmVjbGlja3B1cmNoYXNlX2pzLmFwcGx5Q291cG9uKCk7IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIHR5cGUgb2YgJ3skdHlwZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCQlicmVhazsKCQkJfQoJCQkKCQkJcmV0dXJuICRvdXRwdXRTdHI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3R5cGUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgeyRjb2RlfSBTbWFydFRhZyI7CgkJfQoJfQp9Cgo=', 0, '2018-11-21 06:38:53'),
(18, 'view', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmFic3RyYWN0IGNsYXNzIE1NX1ZpZXcKeyAKICAgIHB1YmxpYyBzdGF0aWMgJE1NX05PTkNFX0FDVElPTl9DSEVDS09VVF9GT1JNID0gIm1tLWNoZWNrb3V0IjsKICAgIHB1YmxpYyBzdGF0aWMgJE1NX05PTkNFX05BTUVfQ0hFQ0tPVVRfRk9STSAgID0gIm1tLXNlY3VyaXR5IjsKCQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT04gPSAibW1fYWN0aW9uIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTTU9EVUxFID0gIm1tX21vZHVsZSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TQVZFID0gInNhdmUiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUkVNT1ZFID0gInJlbW92ZSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TSE9XX0RJQUxPRyA9ICJzaG93RGlhbG9nIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1JFRlJFU0hfVklFVyA9ICJyZWZyZXNoVmlldyI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TSE9XX0JVWV9OT1dfTElOS1MgPSAic2hvd1B1cmNoYXNlTGlua3MiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fVkFMSURBVEVfSU5QVVQgPSAidmFsaWRhdGVJbnB1dCI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9MT0dJTiA9ICJsb2dpbiI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9SRVNFVF9QQVNTV09SRCA9ICJyZXNldFBhc3N3b3JkIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0xPQURfU1RBVEVTID0gImxvYWRTdGF0ZXMiOwoJCgkvL2ZvciB1c2UgaW4gc3ViY2xhc3NlcyBpbXBsZW1lbnRpbmcgcmJhYy4gYXJyYXkgc3RydWN0dXJlIGhhcyBtZXRob2QgbmFtZXMgYXMga2V5cywgCgkvL2FuZCBhcnJheXMgY29udGFpbmluZyB2YWxpZCByb2xlcyAoZnJvbSBNTV9Sb2xlKSBhcyB0aGUgdmFsdWVzCglwcm90ZWN0ZWQgJHBlcm1pc3Npb25zID0gYXJyYXkoKTsKCQoJZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQogCXsKIAkJLy8gZG8gbm90aGluZwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gY2FsbE1ldGhvZCgkcG9zdCkgCiAJewogCQlpZiAoaXNzZXQoJHBvc3RbIm1ldGhvZCJdKSAmJiBtZXRob2RfZXhpc3RzKCR0aGlzLCAkcG9zdFsibWV0aG9kIl0pICYmICR0aGlzLT5jYW5DYWxsTWV0aG9kKCRwb3N0KSkgCgkJewoJCQkkbWV0aG9kID0gJHBvc3RbJ21ldGhvZCddOwoJCQlyZXR1cm4gJHRoaXMtPiRtZXRob2QoJHBvc3QpOwoJCX0JCQoJCXJldHVybiAwOwogCX0KIAkKIAkKIAkvKioKIAkgKiBEZXRlcm1pbmVzIGlmIHRoZSBjYWxsZXIgaGFzIHBlcm1pc3Npb24gdG8gcGVyZm9ybSB0aGUgcmVxdWVzdGVkIGFjdGlvbi4gVGhlIG1ldGhvZCByZXF1ZXN0ZWQgc2hvdWxkIGJlIHN0b3JlZCBpbiAKIAkgKiAkcmVxdWVzdFsnbWV0aG9kJ10sIGFuZCB3aWxsIHVzdWFsbHkgYmUgdGhlIHBlcmZvcm1BY3Rpb24gcm91dGluZyBtZXRob2Qgb2YgdGhlIHZpZXcuIFRoZSBhY3Rpb24gcmVxdWVzdGVkIHNob3VsZCBiZQogCSAqIHN0b3JlZCBpbiAkcmVxdWVzdFsnbW1fYWN0aW9uJ10uIAogCSAqIAogCSAqIEBwYXJhbSBzdHJpbmcgJHJlcXVlc3QKIAkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBhY2Nlc3MgaXMgYWxsb3dlZCwgZmFsc2Ugb3RoZXJ3aXNlCiAJICovCiAJcHVibGljIGZ1bmN0aW9uIGNhbkNhbGxNZXRob2QoJHJlcXVlc3QpCiAJewogCQlyZXR1cm4gZmFsc2U7CQogCX0KIAkKCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQlpZihpc3NldCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSkgCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFRlJFU0hfVklFVzoKCQkJCQlyZXR1cm4gJHRoaXMtPnJlZnJlc2hWaWV3KCRwb3N0KTsKCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0hPV19ESUFMT0c6CgkJCQkJcmV0dXJuICR0aGlzLT5zaG93RGlhbG9nKCRwb3N0KTsKCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fVkFMSURBVEVfSU5QVVQ6CgkJCQkJcmV0dXJuICR0aGlzLT52YWxpZGF0ZUlucHV0KCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICIiOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJNTV9WaWV3LnBlcmZvcm1BY3Rpb24oKTogJyIuc2VsZjo6JE1NX0pTQUNUSU9OLiInIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiB2YWxpZGF0ZUlucHV0KCRwb3N0KQogIAl7CgkJZ2xvYmFsICR3cGRiOwoJICAKCQl0cnkKCQl7CSAKCQkJLyoKCQkJICogVE9ETzogVmVyaWZ5IGl0cyBub3QgdXNlZCBhbnl3aGVyZSBlbHNlIGFuZCByZW1vdmUKCQkJICovCgkJCXN3aXRjaCgkcG9zdFsnaW5wdXRfdHlwZSddKQoJCQl7CgkJCQljYXNlICdFTUFJTCc6CgkJCQkJaWYoIU1NX1V0aWxzOjpoYXNWYWxpZEVtYWlsKCRwb3N0WyJpbnB1dF92YWx1ZSJdKSkKCQkJCQl7CgkJCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIlByb3ZpZGVkIGVtYWlsIGFkZHJlc3Mgd2FzIGVtcHR5IG9yIGludmFsaWQuIik7CgkJCQkJfQoJCQkJCWJyZWFrOwoKCQkJCWNhc2UgJ1VSTCc6CgkJCQkJaWYoIWZpbHRlcl92YXIoJHBvc3RbJ2lucHV0X3ZhbHVlJ10sIEZJTFRFUl9WQUxJREFURV9VUkwpIHx8ICFwcmVnX21hdGNoKCIvXmh0dHBzPzpcL1wvLyIsICRwb3N0WydpbnB1dF92YWx1ZSddKSkKCQkJCQl7CgkJCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIkludmFsaWQgVVJMICh7JHBvc3RbJ2lucHV0X3ZhbHVlJ119KSBlbnRlcmVkIGZvciB7JHBvc3RbJ2lucHV0X2xhYmVsJ119Iik7CgkJCQkJfQoJCQkJCWJyZWFrOwoKCQkJCWRlZmF1bHQ6CgkJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigiSW52YWxpZCBJbnB1dCBUeXBlIHJlcXVlc3RpbmcgdmFsaWRhdGlvbi4uLiIpOwoJCQkJCWJyZWFrOwoJCQl9CiAgICAJfSAKICAgIAljYXRjaChFeGNlcHRpb24gJGUpCiAgICAJewogICAgICAJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZS0+Z2V0TWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKICAgIAl9CiAgICAKICAgIAlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CiAJCglwcml2YXRlIGZ1bmN0aW9uIHNob3dSZXNwb25zZURpYWxvZygkcG9zdCkKCXsKCQkkaW5mby0+bWVzc2FnZSA9ICghaXNzZXQoJHBvc3RbIm1lc3NhZ2UiXSkpPyJPaCwgc29tZXRoaW5nIGJhZCBoYXBwZW5lZCI6JHBvc3RbIm1lc3NhZ2UiXTsKIAkJJG1zZyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvcmVzcG9uc2UucGhwIiwgJGluZm8pOwogCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRtc2cpOwoJfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVmcmVzaFZpZXcoJHBvc3QpCgl7CgkJJGNybnRNb2R1bGUgPSAkdGhpcy0+Z2V0TW9kdWxlKCRwb3N0LCAkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKTsKCQkKCQlpZigkY3JudE1vZHVsZSAhPSAiIiAmJiBzdHJwb3MoJGNybnRNb2R1bGUsIi4uIikgPT09IGZhbHNlKSAKCQl7IAoJCQkkX1JFUVVFU1RbIm1vZHVsZSJdID0gJGNybnRNb2R1bGU7CgkJCQoJCQlvYl9zdGFydCgpOwoJCQlpbmNsdWRlKCRtb2R1bGU9TU1fTU9EVUxFUy4iLyIuJGNybnRNb2R1bGUuIi5waHAiKTsKCQkJJGNvbnRlbnRzID0gb2JfZ2V0X2NvbnRlbnRzKCk7CgkJCW9iX2VuZF9jbGVhbigpOwoJCQlyZXR1cm4gJGNvbnRlbnRzOwoJCX0KCQllbHNlIAoJCXsKCQkJJGVycm9yTXNnID0gIk1NX1ZpZXcucmVmcmVzaFZpZXcoKTogcmVxdWVzdGVkIG1vZHVsZSBkb2VzIG5vdCBleGlzdDoiLihpc3NldCgkcG9zdFtzZWxmOjokTU1fSlNNT0RVTEVdKT8kcG9zdFtzZWxmOjokTU1fSlNNT0RVTEVdOiIiKTsKCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgJGVycm9yTXNnKTsKCQkJcmV0dXJuIDA7CgkJfQoJfQoJCgkKCS8qKgoJICogVGFrZXMgJHJlcXVlc3QgYXJyYXkgYW5kIHRyYW5zZm9ybXMgaXQgaW50byBhbiBzdGRDbGFzcyBvYmplY3QuIAoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QKCSAqIEByZXR1cm4gc3RkQ2xhc3MgQSB2YWx1ZSBvYmplY3Qgb2YgdHlwZSBzdGRDbGFzcwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gY3JlYXRlVmFsdWVPYmplY3RGcm9tUmVxdWVzdCgkcmVxdWVzdCkKCXsKCQkkaW5mbyA9IG5ldyBzdGRDbGFzcygpOwoJCWlmICghaXNfYXJyYXkoJHJlcXVlc3QpKQoJCXsKCQkJcmV0dXJuICRpbmZvOwoJCX0KCQlmb3JlYWNoICgkcmVxdWVzdCBhcyAka2V5PT4kdmFsdWUpCgkJewoJCQkkaW5mby0+JGtleSA9ICR2YWx1ZTsKCQl9CgkJCgkJJGluZm8tPmlkID0gaXNzZXQoJGluZm8tPmlkKT8kaW5mby0+aWQ6IiI7CgkJcmV0dXJuICRpbmZvOwoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiBzaG93RGlhbG9nKCRwb3N0KQoJewoJCSRpbmZvID0gJHRoaXMtPmNyZWF0ZVZhbHVlT2JqZWN0RnJvbVJlcXVlc3QoJHBvc3QpOwoKCQkkY3JudE1vZHVsZSA9ICR0aGlzLT5nZXRNb2R1bGUoJHBvc3QpOwoJCQoJCWlmKCRjcm50TW9kdWxlICE9ICIiKSAKCQl7CgkJCXJldHVybiBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iLyIuJGNybnRNb2R1bGUuIi5kaWFsb2cucGhwIiwgJGluZm8pOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTU1fVmlldy5zaG93RGlhbG9nKCk6ICIuc2VsZjo6JE1NX0pTTU9EVUxFLiIgcmVxdWVzdGVkIG1vZHVsZSBkb2VzIG5vdCBleGlzdCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldE1vZHVsZSgkcG9zdCwgJGFjdGlvbj0iIikKCXsJCgkJaWYoJHRoaXMgaW5zdGFuY2VvZiBNTV9NZW1iZXJzaGlwTGV2ZWxzVmlldykgCgkJewoJCQlyZXR1cm4gTU1fTU9EVUxFX01FTUJFUlNISVBfTEVWRUxTOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fQ29tbWlzc2lvblByb2ZpbGVzVmlldykgCgkJewoJCQlyZXR1cm4gTU1fTU9EVUxFX0NPTU1JU1NJT05fUFJPRklMRVM7CgkJfQoJCWVsc2UgaWYoJHRoaXMgaW5zdGFuY2VvZiBNTV9MaW1lTGlnaHRQcm9kdWN0c1ZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9MSU1FTElHSFRfUFJPRFVDVFM7CgkJfQoJCWVsc2UgaWYoJHRoaXMgaW5zdGFuY2VvZiBNTV9MaW1lTGlnaHRTaGlwcGluZ01ldGhvZHNWaWV3KSAKCQl7CgkJCXJldHVybiBNTV9NT0RVTEVfTElNRUxJR0hUX1NISVBQSU5HX01FVEhPRFM7CgkJfQoJCWVsc2UgaWYoJHRoaXMgaW5zdGFuY2VvZiBNTV9BcGlWaWV3KSAKCQl7CgkJCXJldHVybiBNTV9NT0RVTEVfQVBJOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fUHJvZHVjdFZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9QUk9EVUNUUzsKCQl9CgkJZWxzZSBpZigkdGhpcyBpbnN0YW5jZW9mIE1NX0FjdGl2aXR5TG9nVmlldykgCgkJewoJCQlyZXR1cm4gTU1fTU9EVUxFX0FDVElWSVRZX0xPRzsKCQl9CgkJZWxzZSBpZigkdGhpcyBpbnN0YW5jZW9mIE1NX1BheVBhbElQTkxvZ1ZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9QQVlQQUxfSVBOX0xPRzsKCQl9CgkJZWxzZSBpZigkdGhpcyBpbnN0YW5jZW9mIE1NX1RyYW5zYWN0aW9uSGlzdG9yeVZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19UUkFOU0FDVElPTl9ISVNUT1JZOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fU3Vic2NyaXB0aW9uc1ZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19TVUJTQ1JJUFRJT05TOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fR2lmdEhpc3RvcnlWaWV3KSAKCQl7CgkJCXJldHVybiBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfR0lGVF9ISVNUT1JZOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fRHJpcENvbnRlbnRTY2hlZHVsZVZpZXcpCgkJewoJCQlyZXR1cm4gTU1fTU9EVUxFX0RSSVBfQ09OVEVOVF9TQ0hFRFVMRTsKCQl9CgkJZWxzZSBpZigkdGhpcyBpbnN0YW5jZW9mIE1NX0NvdXBvblZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9DT1VQT05TOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fUHVzaE5vdGlmaWNhdGlvblZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9QVVNIX05PVElGSUNBVElPTlM7CgkJfQoJCWVsc2UgaWYoJHRoaXMgaW5zdGFuY2VvZiBNTV9DdXN0b21GaWVsZFZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9DVVNUT01fRklFTERTOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fQnVuZGxlc1ZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9CVU5ETEVTOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fRW1wbG95ZWVzVmlldykgCgkJewoJCQlyZXR1cm4gTU1fTU9EVUxFX0VNUExPWUVFUzsKCQl9CgkJZWxzZSBpZigkdGhpcyBpbnN0YW5jZW9mIE1NX01lbWJlcnNWaWV3KSAKCQl7CQoJCQlyZXR1cm4gTU1fTU9EVUxFX0JST1dTRV9NRU1CRVJTOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fTWVtYmVyRGV0YWlsc1ZpZXcgJiYgaW5fYXJyYXkoJGFjdGlvbixhcnJheShNTV9NZW1iZXJEZXRhaWxzVmlldzo6JE1NX0pTQUNUSU9OX1VQREFURV9NRU1CRVIsc2VsZjo6JE1NX0pTQUNUSU9OX1JFRlJFU0hfVklFVykpKQoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19HRU5FUkFMOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fQWNjZXNzUmlnaHRzVmlldyB8fCAkdGhpcyBpbnN0YW5jZW9mIE1NX0NvcmVQYWdlc1ZpZXcpIAoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9NRVRBOwoJCX0KCQllbHNlIGlmKCR0aGlzIGluc3RhbmNlb2YgTU1fRGFzaGJvYXJkVmlldykgCgkJewoJCQlyZXR1cm4gTU1fTU9EVUxFX0RBU0hCT0FSRDsKCQl9CgkJZWxzZSBpZigkdGhpcyBpbnN0YW5jZW9mIE1NX0VtYWlsSW50ZWdyYXRpb25WaWV3KSAKCQl7CgkJCXJldHVybiBNTV9NT0RVTEVfRU1BSUxfSU5URUdSQVRJT047CgkJfQoJCWVsc2UgaWYoJHRoaXMgaW5zdGFuY2VvZiBNTV9TaGlwcGluZ01ldGhvZHNWaWV3KQoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9TSElQUElORzsKCQl9CgkJZWxzZSBpZigkdGhpcyBpbnN0YW5jZW9mIE1NX0R1cGxpY2F0ZVN1YnNjcmlwdGlvbnNWaWV3KQoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9EVVBMSUNBVEVfU1VCU0NSSVBUSU9OX1RPT0w7CgkJfQoJCWVsc2UgaWYgKCR0aGlzIGluc3RhbmNlb2YgTU1fRGlhZ25vc3RpY3NWaWV3KQoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9ESUFHTk9TVElDUzsKCQl9CgkJZWxzZSBpZiAoJHRoaXMgaW5zdGFuY2VvZiBNTV9TYWZlTW9kZVZpZXcpCgkJewoJCQlyZXR1cm4gTU1fTU9EVUxFX1NBRkVfTU9ERTsKCQl9CgkJZWxzZSBpZiAoJHRoaXMgaW5zdGFuY2VvZiBNTV9SZXBhaXJDb3JlUGFnZXNWaWV3KQoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9SRVBBSVJfQ09SRV9QQUdFUzsKCQl9CgkJZWxzZSBpZiAoJHRoaXMgaW5zdGFuY2VvZiBNTV9Vc2VyRGVmaW5lZFBhZ2VWaWV3KQoJCXsKCQkJcmV0dXJuIE1NX01PRFVMRV9VU0VSX0RFRklORURfUEFHRVM7CgkJfQoJCWVsc2UgaWYgKCR0aGlzIGluc3RhbmNlb2YgTU1fU21hcnRUYWdMaWJyYXJ5VmlldykKCQl7IAoJCQlpZigkcG9zdFtzZWxmOjokTU1fSlNNT0RVTEVdID09IE1NX01PRFVMRV9TTUFSVFRBR19MT09LVVApCgkJCXsKCQkJCXJldHVybiBNTV9NT0RVTEVfU01BUlRUQUdfTE9PS1VQOwoJCQl9CgkJCXJldHVybiBNTV9NT0RVTEVfU01BUlRUQUdfTElCUkFSWTsKCQl9IAoJCWVsc2UgCgkJewoJCQlyZXR1cm4gIiI7CgkJfQoJfQoJCiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoJHRhYmxlTmFtZSwgJGZpZWxkcz1udWxsLCBNTV9EYXRhR3JpZCAkZGc9bnVsbCwgJHdoZXJlID0gIiIsICRnZXRUb3RhbD1mYWxzZSkKIAl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRjb2x1bW5zID0gKGlzX251bGwoJGZpZWxkcykpID8gInRibC4qIiA6IGltcGxvZGUoIiwiLCAkZmllbGRzKTsKCQkKIAkJJHNxbFJlc3VsdENvdW50ID0gIlNFTEVDVCBjb3VudChkaXN0aW5jdCBpZCkgYXMgdG90YWwgRlJPTSAiLiR0YWJsZU5hbWU7CgkJaWYoIWVtcHR5KCR3aGVyZSkpCgkJewoJCQlpZihwcmVnX21hdGNoKCIvXih3aGVyZSkvIiwgc3RydG9sb3dlcih0cmltKCR3aGVyZSkpKSkKCQkJewoJCQkJJHNxbFJlc3VsdENvdW50Lj0gIiB7JHdoZXJlfSAiOwoJCQl9CQoJCQllbHNlCgkJCXsKCQkJCSRzcWxSZXN1bHRDb3VudC49ICIgd2hlcmUgeyR3aGVyZX0gIjsKCQkJfQoJCX0KCQkKCQkkY291bnRSb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsUmVzdWx0Q291bnQpOwoJCQoJCWlmKCRjb3VudFJvdykgCgkJewoJCQkkc3FsID0gIlNFTEVDVCAneyRjb3VudFJvdy0+dG90YWx9JyBhcyB0b3RhbCwgIi4kY29sdW1ucy4iIEZST00gIi4kdGFibGVOYW1lLiIgYXMgdGJsICI7CgkJfQoJCWVsc2UgCgkJewoJCQkkc3FsID0gIlNFTEVDVCAiLiRjb2x1bW5zLiIgRlJPTSAiLiR0YWJsZU5hbWUuIiBhcyB0YmwgIjsKCQl9CgkJCgkJaWYoIWVtcHR5KCR3aGVyZSkpCgkJewoJCQlpZihwcmVnX21hdGNoKCIvXih3aGVyZSkvIiwgc3RydG9sb3dlcih0cmltKCR3aGVyZSkpKSkKCQkJewoJCQkJJHNxbC49ICIgeyR3aGVyZX0gIjsKCQkJfQkKCQkJZWxzZQoJCQl7CgkJCQkkc3FsLj0gIiB3aGVyZSB7JHdoZXJlfSAiOwoJCQl9CgkJfQoJCQoJCWlmKCFpc19udWxsKCRkZykgJiYgIWlzX251bGwoJGRnLT5zb3J0QnkpICYmICFlbXB0eSgkZGctPnNvcnRCeSkpIAoJCXsKCQkJJHNxbC49ICJPUkRFUiBCWSB7JGRnLT5zb3J0Qnl9IHskZGctPnNvcnREaXJ9IjsKCQl9CgkJCgkJaWYoJGdldFRvdGFsKQoJCXsKCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCQoJCWlmKCFpc19udWxsKCRkZykpIAoJCXsKCQkJJHNxbCAuPSAkZGctPmdldExpbWl0U3FsKCk7CgkJfQoKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQoJCWlmKCEkcmVzdWx0IHx8IGlzX251bGwoJHJlc3VsdCkpIAoJCXsKCQkJcmV0dXJuIGFycmF5KCk7CgkJfQoJCQoJCXJldHVybiAkcmVzdWx0OwogCX0KIAkKIAlwcm90ZWN0ZWQgZnVuY3Rpb24gY2hlY2tBamF4UmVmZXJlcigkYWN0aW9uLCAkbmFtZSkKCXsKCQkvLyBGb3Igbm93LCB3ZSdyZSBkaXNhYmxpbmcgdGhpcywgYWx3YXlzIHJldHVybiB0cnVlCgkJcmV0dXJuIHRydWU7CiAgCQkvL3JldHVybiBjaGVja19hamF4X3JlZmVyZXIoICRhY3Rpb24sICRuYW1lLCBmYWxzZSApOwoJfQp9Cg==', 0, '2018-11-21 06:38:53'),
(19, 'loginformview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0xvZ2luRm9ybVZpZXcgZXh0ZW5kcyBNTV9WaWV3CnsJCiAgcHVibGljIHN0YXRpYyAkTU1fTk9OQ0VfQUNUSU9OX0xPR0lOX0ZPUk0gPSAibW0tbG9naW4iOwogIHB1YmxpYyBzdGF0aWMgJE1NX05PTkNFX05BTUVfTE9HSU5fRk9STSAgID0gIm1tLXNlY3VyaXR5IjsKCiAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKICB7CiAgCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKICB9CiAgCglwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0xPR0lOOgoJCQkJCXJldHVybiAkdGhpcy0+bG9naW4oJHBvc3QpOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbG9naW4oJHBvc3QpCgl7CQogIAl0cnkKICAgIHsgCiAgCSAgJF9QT1NUWydyZW1lbWJlcm1lJ10gPSAoJF9QT1NUWydyZW1lbWJlcm1lJ10gPT0gInRydWUiKTsKCSAgJHVzZXIgICAgICAgID0gd3Bfc2lnbm9uKCk7CiAgICAgICRyZWRpcmVjdF90byA9IGFwcGx5X2ZpbHRlcnMoJ2xvZ2luX3JlZGlyZWN0JywgJycsICcnLCAkdXNlcik7CiAgICAgIAogICAgICBpZihpc193cF9lcnJvcigkdXNlcikpCiAgICAgIHsKICAgICAgICAkRXJyb3JNZXNzYWdlSW5mbyA9IE1NX01lc3NhZ2VzOjpnZXQoTU1fU2Vzc2lvbjo6JEtFWV9FUlJPUlMpOwogICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJEVycm9yTWVzc2FnZUluZm9bY291bnQoJEVycm9yTWVzc2FnZUluZm8pLTFdKTsKICAgICAgfQogICAgICAKICAgICAgJE1NX1Jlc3BvbnNlID0gbmV3IE1NX1Jlc3BvbnNlKCk7CiAgICAgICRNTV9SZXNwb25zZS0+ZGF0YVsncmVkaXJlY3RfdG8nXSA9ICRyZWRpcmVjdF90bzsKICAgICAgCiAgICAgIHJldHVybiAkTU1fUmVzcG9uc2U7CiAgICB9IAogICAgY2F0Y2goRXhjZXB0aW9uICRlKQogICAgewogICAgICAkTU1fUmVzcG9uc2UgPSBuZXcgTU1fUmVzcG9uc2UoJGUtPmdldE1lc3NhZ2UoKSwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CiAgICAgIAogICAgICBpZihNTV9TZXNzaW9uOjp2YWx1ZSgncmVkaXJlY3RfdG8nKSkKICAgICAgewogICAgICAgICRNTV9SZXNwb25zZS0+ZGF0YVsncmVkaXJlY3RfdG8nXSA9IE1NX1Nlc3Npb246OnZhbHVlKCdyZWRpcmVjdF90bycpOwogICAgICAgIE1NX1Nlc3Npb246OmNsZWFyKCdyZWRpcmVjdF90bycpOwogICAgICB9CiAgICAgIAogICAgICByZXR1cm4gJE1NX1Jlc3BvbnNlOwogICAgfQoJfQoJCgkKCS8qKgoJICogT3ZlcnJpZGUgb2YgcGFyZW50IHRvIGFsbG93IHVzZXJzIHdpdGhvdXQgcm9sZXMgdG8gbG9naW4KCSAqIHtAaW5oZXJpdERvY30KCSAqIEBzZWUgTU1fVmlldzo6Y2FuQ2FsbE1ldGhvZCgpCgkgKi8KCQoJcHVibGljIGZ1bmN0aW9uIGNhbkNhbGxNZXRob2QoJHJlcXVlc3QpCgl7CgkJJGFsbG93ZWRBY3Rpb25zID0gYXJyYXkoc2VsZjo6JE1NX0pTQUNUSU9OX0xPR0lOKTsKCQlpZiAoKCRyZXF1ZXN0WydtZXRob2QnXSAhPSAicGVyZm9ybUFjdGlvbiIpIHx8ICghaXNzZXQoJHJlcXVlc3RbJ21tX2FjdGlvbiddKSkgfHwgKCFpbl9hcnJheSgkcmVxdWVzdFsnbW1fYWN0aW9uJ10sJGFsbG93ZWRBY3Rpb25zKSkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCX0KCQp9Cg==', 0, '2018-11-21 06:38:53'),
(20, 'logapi', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fTG9nQXBpIGV4dGVuZHMgTU1fRW50aXR5CnsKCXByaXZhdGUgJG1lc3NhZ2UgPSAiIjsKCXByaXZhdGUgJHJlcXVlc3QgPSAiIjsKCXByaXZhdGUgJGlwYWRkcmVzcyA9ICIiOwoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9MT0dfQVBJLiIgV0hFUkUgaWQ9JyIuJHRoaXMtPmlkLiInOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIHsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbG9nUmVxdWVzdCgkbWVzc2FnZSwgJHJlcXVlc3Q9IiIpCgl7CgkJJGFwaSA9IG5ldyBNTV9Mb2dBcGkoKTsKCQkkYXBpLT5zZXRJcEFkZHJlc3MoJF9TRVJWRVJbIlJFTU9URV9BRERSIl0pOwoJCSRhcGktPnNldE1lc3NhZ2UoJG1lc3NhZ2UpOwoJCSRhcGktPnNldFJlcXVlc3QoJHJlcXVlc3QpOwoJCSRhcGktPmNvbW1pdERhdGEoKTsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHByaW50TG9nKCRkYXRlMSwgJGRhdGUyKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gInNlbGVjdCAqIGZyb20gICIuTU1fVEFCTEVfTE9HX0FQSS4iIHdoZXJlIERBVEUoZGF0ZV9hZGRlZCkgPj0gREFURSgnIi4kZGF0ZTEuIicpIGFuZCBEQVRFKGRhdGVfYWRkZWQpPD1EQVRFKCciLiRkYXRlMi4iJykgb3JkZXIgYnkgaWQgZGVzYyI7CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJaWYoaXNfYXJyYXkoJHJvd3MpKXsKCQkJcmV0dXJuICRyb3dzOwoJCX0KCQlyZXR1cm4gYXJyYXkoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5IAoJCXsKCQkJJHRoaXMtPm1lc3NhZ2UgPSAkZGF0YS0+bWVzc2FnZTsKCQkJJHRoaXMtPnJlcXVlc3QgPSAkZGF0YS0+cmVxdWVzdDsKCQkJJHRoaXMtPmlwYWRkcmVzcyA9ICRkYXRhLT5pcGFkZHJlc3M7CgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIAoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0RGF0YSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQlpZihpbnR2YWwoJHRoaXMtPmlkKT4wKXsKCQkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9MT0dfQVBJLiIgc2V0IAoJCQkJCQltZXNzYWdlPSclcycsIAoJCQkJCQlyZXF1ZXN0PSclcycsCgkJCQkJCWlwYWRkcmVzcz0nJXMnCgkJCQkJd2hlcmUgCgkJCQkJCWlkPSd7JHRoaXMtPmlkfScKCQkJIjsKCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5tZXNzYWdlLCAkdGhpcy0+cmVxdWVzdCwgJHRoaXMtPmlwYWRkcmVzcykpOwoJCX0KCQllbHNlewoJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfTE9HX0FQSS4iIHNldCAKCQkJCQltZXNzYWdlPSclcycsIAoJCQkJCXJlcXVlc3Q9JyVzJywKCQkJCQlpcGFkZHJlc3M9JyVzJwoJCQkiOwoJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPm1lc3NhZ2UsICR0aGlzLT5yZXF1ZXN0LCAkdGhpcy0+aXBhZGRyZXNzKSk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TWVzc2FnZSgkbXNnKXsKCQkkdGhpcy0+bWVzc2FnZSA9ICRtc2c7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRNZXNzYWdlKCl7CgkJcmV0dXJuICR0aGlzLT5tZXNzYWdlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0SXBBZGRyZXNzKCRyZXEpewoJCSR0aGlzLT5pcGFkZHJlc3MgPSAkcmVxOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0SXBBZGRyZXNzKCl7CgkJcmV0dXJuICR0aGlzLT5pcGFkZHJlc3M7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRSZXF1ZXN0KCRyZXEpewoJCSR0aGlzLT5yZXF1ZXN0ID0gJHJlcTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlcXVlc3QoKXsKCQlyZXR1cm4gJHRoaXMtPnJlcXVlc3Q7Cgl9Cn0=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(21, 'diagnosticsview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0RpYWdub3N0aWNzVmlldyBleHRlbmRzIE1NX1JCQUNBZG1pblZpZXcKewoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0VUX0RJQUdOT1NUSUNTX01PREUgPSAic2V0RGlhZ25vc3RpY3NNb2RlIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0NMRUFSX0xPRyA9ICJjbGVhckxvZyI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TVE9SRV9GSUxURVJfU1RBVEUgPSAic3RvcmVGaWx0ZXJTdGF0ZSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9SRVNFVF9GT1JNID0gInJlc2V0Rm9ybSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9GSUxURVIgPSAiZmlsdGVyIjsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQogCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUkVTRVRfRk9STToKCQkJCQlyZXR1cm4gJHRoaXMtPmdlbmVyYXRlRmlsdGVyQ3JpdGVyaWFGb3JtKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NFVF9ESUFHTk9TVElDU19NT0RFOgoJCQkJCXJldHVybiAkdGhpcy0+c2V0RGlhZ25vc3RpY3NNb2RlKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NMRUFSX0xPRzoKCQkJCQlyZXR1cm4gJHRoaXMtPmNsZWFyTG9nKCk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TVE9SRV9GSUxURVJfU1RBVEU6CgkJCQkJcmV0dXJuICR0aGlzLT5zdG9yZUZpbHRlclN0YXRlKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0ZJTFRFUjoKCQkJCQlyZXR1cm4gJHRoaXMtPmdlbmVyYXRlRGF0YUdyaWQoJHBvc3QpOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSxNTV9SZXNwb25zZTo6JFNVQ0NFU1MsdHJ1ZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQogCQoJCiAJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKCRzb3J0Qnk9bnVsbCwgJHNvcnREaXI9bnVsbCkKCXsKCQlyZXR1cm4gcGFyZW50OjpnZXREYXRhKE1NX1RBQkxFX0RJQUdOT1NUSUNfTE9HLCBudWxsLCAkc29ydEJ5LCAkc29ydERpcik7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNldERpYWdub3N0aWNzTW9kZSgkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsibmV3TW9kZSJdKSAmJiAhZW1wdHkoJHBvc3RbIm5ld01vZGUiXSkpIAoJCXsKCQkJTU1fRGlhZ25vc3RpY0xvZzo6c2V0TW9kZSgkcG9zdFsibmV3TW9kZSJdKTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRGlhZ25vc3RpYyBtb2RlIGNoYW5nZWQiLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyx0cnVlKTsKCQl9CgkJCgkgCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkRpYWdub3N0aWMgbW9kZSBzZXR0aW5nIHdhcyB1bmNoYW5nZWQiLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyx0cnVlKTsJCSAJCgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNsZWFyTG9nKCkKCXsKCQlpZiAoTU1fRGlhZ25vc3RpY0xvZzo6Y2xlYXJMb2coKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkRpYWdub3N0aWMgTG9nIGNsZWFyZWQgc3VjY2Vzc2Z1bGx5IixNTV9SZXNwb25zZTo6JFNVQ0NFU1MsdHJ1ZSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNsZWFyaW5nIERpYWdub3N0aWMgTG9nIixNTV9SZXNwb25zZTo6JEVSUk9SLHRydWUpOwoJCX0KCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gc3RvcmVGaWx0ZXJTdGF0ZSgkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsibW1fc2hvd19maWx0ZXJzIl0pICYmIGlzc2V0KCRwb3N0WyJtbV9hZG1pbl9pZCJdKSkKCQl7CgkJCSRvcHRpb25OYW1lID0gTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1NIT1dfRElBR05PU1RJQ1NfTE9HX0ZJTFRFUlMuIi0iLiRwb3N0WyJtbV9hZG1pbl9pZCJdOwoJCQlNTV9PcHRpb25VdGlsczo6c2V0T3B0aW9uKCRvcHRpb25OYW1lLCAkcG9zdFsibW1fc2hvd19maWx0ZXJzIl0pOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRmlsdGVyQ3JpdGVyaWFGb3JtKCRwb3N0PW51bGwpCgl7CgkJcmV0dXJuIE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvZGlhZ25vc3RpY3MuZm9ybS5waHAiLCAkcG9zdCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGZpbHRlcigkcG9zdCwgTU1fRGF0YUdyaWQgJGRnKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSR3aGVyZUNvbmRpdGlvbnMgPSBhcnJheSgpOwoJCSR3aGVyZVNxbCA9ICIiOwoJCSRvcmRlckJ5U3FsID0gIiI7CgkKCQlpZighZW1wdHkoJHBvc3RbIm1tX2V2ZW50X3R5cGVzIl0pICYmIGlzX2FycmF5KCRwb3N0WydtbV9ldmVudF90eXBlcyddKSkKCQl7CgkJCSRldmVudFR5cGVzID0gYXJyYXkoKTsKCQkJZm9yZWFjaCAoJHBvc3RbJ21tX2V2ZW50X3R5cGVzJ10gYXMgJHYpCgkJCXsKCQkJCSRldmVudFR5cGVzW10gPSAkd3BkYi0+cHJlcGFyZSgiJyVzJyIsJHYpOwoJCQl9CgkJCSR3aGVyZUNvbmRpdGlvbnNbXSA9ICJ0eXBlIElOICgiLmltcGxvZGUoIiwiLCRldmVudFR5cGVzKS4iKSI7CgkJfQoJCgkJaWYoIWVtcHR5KCRwb3N0WydtbV9mcm9tX2RhdGUnXSkpCgkJewoJCQkkZnJvbURhdGUgPSBkYXRlKCJZLW0tZCBIOmk6cyIsc3RydG90aW1lKCRwb3N0WydtbV9mcm9tX2RhdGUnXSkpOwoJCQkkd2hlcmVDb25kaXRpb25zW10gPSAiZXZlbnRfZGF0ZSA+PSAneyRmcm9tRGF0ZX0nIjsKCQl9CgkKCQlpZighZW1wdHkoJHBvc3RbJ21tX3RvX2RhdGUnXSkpCgkJewoJCQkkdG9EYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiLHN0cnRvdGltZSgkcG9zdFsnbW1fdG9fZGF0ZSddKSk7CgkJCSR3aGVyZUNvbmRpdGlvbnNbXSA9ICJldmVudF9kYXRlIDw9ICd7JHRvRGF0ZX0nIjsKCQl9CgkKCQlpZighZW1wdHkoJHBvc3RbJ21tX2xpbmVfbnVtYmVyJ10pKQoJCXsKCQkJJHdoZXJlQ29uZGl0aW9uc1tdID0gJHdwZGItPnByZXBhcmUoImxpbmUgPSAlZCIsJHBvc3RbJ21tX2xpbmVfbnVtYmVyJ10pOwoJCX0KCQkKCQkkc3RyaW5nRmlsdGVycyA9IGFycmF5KCJpcF9hZGRyZXNzIiA9PiAibW1faXBfYWRkcmVzcyIsCgkJCQkic2Vzc2lvbiIgICAgPT4gIm1tX2RpYWdub3N0aWNfc2Vzc2lvbl9pZCIsCgkJCQkibG9jYXRpb24iICAgPT4gIm1tX2V2ZW50X2xvY2F0aW9uIiwKCQkJCSJldmVudF9kYXRhIiA9PiAibW1fZXZlbnRfZGF0YSIpOwoJCWZvcmVhY2ggKCRzdHJpbmdGaWx0ZXJzIGFzICRrPT4kdikKCQl7CgkJCWlmKCFlbXB0eSgkcG9zdFskdl0pKQoJCQl7CgkJCQkkd2hlcmVDb25kaXRpb25zW10gPSAkd3BkYi0+cHJlcGFyZSgieyRrfSBMSUtFICclJSVzJSUnIiwkcG9zdFskdl0pOwoJCQl9CgkJfQoJCgkJaWYoaXNzZXQoJGRnLT5zb3J0QnkpICYmICFpc19udWxsKCRkZy0+c29ydEJ5KSAmJiAhZW1wdHkoJGRnLT5zb3J0QnkpKQoJCXsKCQkJJG9yZGVyQnlTcWwgPSAiIE9SREVSIEJZIHskZGctPnNvcnRCeX0geyRkZy0+c29ydERpcn0gIjsKCQl9CgkJCgkJaWYgKGNvdW50KCR3aGVyZUNvbmRpdGlvbnMpKQoJCXsKCQkJJHdoZXJlU3FsID0gIiBXSEVSRSAiLmFycmF5X3NoaWZ0KCR3aGVyZUNvbmRpdGlvbnMpOwoJCQlpZiAoY291bnQoJHdoZXJlQ29uZGl0aW9ucykpCgkJCXsKCQkJCSR3aGVyZVNxbCAuPSAiIEFORCAiLmltcGxvZGUoIiBBTkQgIiwkd2hlcmVDb25kaXRpb25zKTsKCQkJfQoJCX0KCQoJCSRzcWxSZXN1bHRDb3VudCA9ICJTRUxFQ1QgQ09VTlQoKikgQVMgdG90YWwgRlJPTSAiLk1NX1RBQkxFX0RJQUdOT1NUSUNfTE9HOwoJCSRzcWxSZXN1bHRDb3VudCAuPSAkd2hlcmVTcWw7CgkJJGNvdW50Um93ID0gJHdwZGItPmdldF9yb3coJHNxbFJlc3VsdENvdW50KTsKCQlpZigkY291bnRSb3ctPnRvdGFsIDw9IDApCgkJewoJCQlyZXR1cm4gYXJyYXkoKTsKCQl9CgkJCgkJJHNxbCA9ICJzZWxlY3QgKiwgJ3skY291bnRSb3ctPnRvdGFsfScgYXMgdG90YWwgRlJPTSAiLk1NX1RBQkxFX0RJQUdOT1NUSUNfTE9HOwoJCSRzcWwgLj0gJHdoZXJlU3FsOwoJCSRzcWwgLj0gJG9yZGVyQnlTcWw7CgkKCQkkc3FsIC49ICRkZy0+Z2V0TGltaXRTcWwoKTsKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsLCBPQkpFQ1RfSyk7CgkJcmV0dXJuIGFycmF5X3ZhbHVlcygkcm93cyk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YUdyaWQoJHBvc3Q9bnVsbCkKCXsKCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9kaWFnbm9zdGljcy5kYXRhZ3JpZC5waHAiLCAkcG9zdCk7Cgl9CgkKfQo=', 0, '2018-11-21 06:38:53'),
(22, 'reportlinechart', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUmVwb3J0TGluZUNoYXJ0IGV4dGVuZHMgTU1fUmVwb3J0VmlzdWFsRWxlbWVudAp7CgkvL3RoZSBuYW1lIG9mIHRoZSBmaWVsZCBpbiB0aGUgc291cmNlIGRhdGEgdGhhdCB3aWxsIGJlIGNoYXJ0ZWQgYWdhaW5zdCB0aGUgY2F0ZWdvcnkgYXhpcyAoeC1heGlzKQoJcHJvdGVjdGVkICRjYXRlZ29yeUZpZWxkID0gImNhdGVnb3J5IjsKCQoJLy90aGUgbmFtZSBvZiB0aGUgZmllbGQgaW4gdGhlIHNvdXJjZSBkYXRhIHRoYXQgd2lsbCBiZSBjaGFydGVkIGFnYWluc3QgdGhlIHZhbHVlIGF4aXMgKHktYXhpcykKCXByb3RlY3RlZCAkdmFsdWVGaWVsZCA9ICJ2YWx1ZSI7CgkKCS8vdGhlIHRpdGxlIG9mIHRoZSBjaGFydCAoZGlzcGxheWVkKQoJcHJvdGVjdGVkICR0aXRsZSA9ICIiOwoJCgkvL211c3QgYmUgc2V0IHRvIHRydWUgaWYgdGhlIGNhdGVnb3J5IGF4aXMgKHgtYXhpcykgdXNlcyBkYXRlIHZhbHVlcy4gCglwcm90ZWN0ZWQgJGNhdGVnb3J5QXhpc0lzRGF0ZXMgPSBmYWxzZTsKCQoJLy9pZiB0aGUgdGhlIGNhdGVnb3J5IGF4aXMgdXNlcyBkYXRlcyBmb3IgdGhlIHNvdXJjZSBkYXRhLCBEYXRlZm9ybWF0IG11c3QgYmUgc2V0IHRvIG1hdGNoIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGVzIGluIHRoZSBzb3VyY2UgZGF0YQoJcHJvdGVjdGVkICRkYXRlRm9ybWF0ID0gIllZWVktTU0tREQiOwoJCgkvL2Rlc2NyaWJlcyB0aGUgc2NhbGUgb2YgdGhlIGRhdGEgYmVpbmcgc3VwcGxpZWQgdG8gdGhlIGdyYXBoLCBzbyBpdCBjYW4gYmUgcmVuZGVyZWQgY29ycmVjdGx5LiBTZWUgdGhlIHJlc29sdXRpb24gY29uc3RhbnRzIGJlbG93Cglwcm90ZWN0ZWQgJHJlc29sdXRpb24gPSAiIjsKCQoJLy90aGUgdGhyZXNob2xkIGFmdGVyIHdoaWNoIGEgc2Nyb2xsYmFyIGlzIGFkZGVkIHRvIHRoZSBsaW5lIGNoYXJ0Cglwcm90ZWN0ZWQgJHNjcm9sbFRocmVzaG9sZCA9IDI1OwoKCS8vaW5kaWNhdGVzIHdoZXRoZXIgdGhlIHZhbHVlIGF4aXMgaXMgY3VycmVuY3kKCXByb3RlY3RlZCAkY3VycmVuY3lWYWx1ZXMgPSBmYWxzZTsKCQoJLy9pZiB0aGUgdmFsdWUgYXhpcyBpcyBhIGN1cnJlbmN5IHZhbHVlLCB0aGlzIGZpZWxkIGRlbm90ZXMgd2hpY2gKCXByb3RlY3RlZCAkY3VycmVuY3lUeXBlID0gIiI7CgkKCS8vdGhlIHRpdGxlIGZvciB0aGUgdmFsdWUgYXhpcyAob3B0aW9uYWwpCglwcm90ZWN0ZWQgJHZhbHVlQXhpc1RpdGxlID0gIiI7CgkKCQoJLy9yZXNvbHV0aW9uIGNvbnN0YW50cwoJcHVibGljIHN0YXRpYyAkSE9VUlMgID0gImhvdXJzIjsKCXB1YmxpYyBzdGF0aWMgJERBWVMgICA9ICJkYXlzIjsKCXB1YmxpYyBzdGF0aWMgJFdFRUtTICA9ICJ3ZWVrcyI7CglwdWJsaWMgc3RhdGljICRNT05USFMgPSAibW9udGhzIjsJCglwdWJsaWMgc3RhdGljICRZRUFSUyAgPSAieWVhcnMiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGNvbnRhaW5lciA9ICIiLCAkZGlyZWN0aXZlcyA9ICIiKSAKCXsKCQkkdGhpcy0+bW9kZWwgPSBhcnJheSgpOwoJCSR0aGlzLT5zZXRSZXNvbHV0aW9uKHNlbGY6OiRNT05USFMpOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJGNvbnRhaW5lciwkZGlyZWN0aXZlcyk7Cgl9CgoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEphdmFzY3JpcHREZXBlbmRlbmNpZXMoKQoJewoJCXJldHVybiBhcnJheSAoCgkJCQlNTV9QTFVHSU5fVVJMLiIvcmVzb3VyY2VzL2pzL2FtY2hhcnRzL2FtY2hhcnRzL2FtY2hhcnRzLmpzIiwKCQkJCU1NX1BMVUdJTl9VUkwuIi9yZXNvdXJjZXMvanMvYW1jaGFydHMvYW1jaGFydHMvc2VyaWFsLmpzIiAKCQkpOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyKE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbCAkbW9kZWwgPSBudWxsKQoJewoJCWlmICghaXNfbnVsbCgkbW9kZWwpKQoJCXsKCQkJJHRoaXMtPmFkZE1vZGVsKCRtb2RlbCk7CgkJfQoJCQoJCSRvdXRwdXQgPSAiIjsKCQlpZiAoIWVtcHR5KCR0aGlzLT5jb250YWluZXIpICYmIGlzX2FycmF5KCR0aGlzLT5tb2RlbCkgJiYgKGNvdW50KCR0aGlzLT5tb2RlbCkgPiAwKSkKCQl7CgkJCS8vZmlyc3QgZ2VuZXJhdGUgdGhlIGdyYXBoIGNvZGUgZm9yIHRoZSBsaW5lcwoJCQkkbGMgPSAwOyAvL2xpbmUgY291bnRlciAoYXMgaW4gIyBvZiBsaW5lcyBvbiB0aGUgY2hhcnQpCgkJCSRjaGFydERhdGEgPSBhcnJheSgpOwoJCQkkZ3JhcGhBcnJheSA9IGFycmF5KCk7CgkJCWZvcmVhY2ggKCR0aGlzLT5tb2RlbCBhcyAkbGluZU1vZGVsKQoJCQl7CgkJCQkkbGMrKzsKCQkJCSRsaW5lQ29sb3IgPSAkdGhpcy0+Z2V0Q29sb3JGb3JQb3NpdGlvbigkbGMpOwoJCQkJJGdyYXBoQ29kZSAgID0gIntcbiI7CgkJCQlpZiAoJHRoaXMtPmN1cnJlbmN5VmFsdWVzKQoJCQkJewoJCQkJCSRncmFwaENvZGUgIC49ICIJJ2JhbGxvb25UZXh0JzogJzxiPltbZm9ybWF0dGVkX3ZhbHVlX3skbGN9XV08L2I+JyxcbiI7CgkJCQl9CgkJCQkkZ3JhcGhDb2RlICAuPSAiCSdidWxsZXQnOiAncm91bmQnLFxuIjsKCQkJCSRncmFwaENvZGUgIC49ICIJJ3R5cGUnOidzbW9vdGhlZExpbmUnLFxuIjsKCQkJCSRncmFwaENvZGUgIC49ICIJJ2lkJzogJ3skdGhpcy0+Y29udGFpbmVyfV9ncmFwaHskbGN9JyxcbiI7CgkJCQkkZ3JhcGhDb2RlICAuPSAiICAgICdsaW5lQ29sb3InOid7JGxpbmVDb2xvcn0nLFxuIjsKCQkJCWlmICgkbGluZU1vZGVsLT5nZXRUaXRsZSgpICE9ICIiKQoJCQkJewoJCQkJCSRncmFwaENvZGUgIC49ICIJJ3RpdGxlJzogJ3skbGluZU1vZGVsLT5nZXRUaXRsZSgpfScsXG4iOwoJCQkJfQoJCQkJaWYgKCR0aGlzLT5jdXJyZW5jeVZhbHVlcykKCQkJCXsKCQkJCQkkZ3JhcGhDb2RlICAuPSAiCSdsZWdlbmRWYWx1ZVRleHQnOiAnW1tmb3JtYXR0ZWRfdmFsdWVfeyRsY31dXScsXG4iOwoJCQkJfQoJCQkJJGdyYXBoQ29kZSAgLj0gIgkndmFsdWVGaWVsZCc6ICd7JHRoaXMtPnZhbHVlRmllbGR9eyRsY30nXG4iOwoJCQkJJGdyYXBoQ29kZSAuPSAifVxuIjsKCQkJCSRncmFwaEFycmF5W10gPSAkZ3JhcGhDb2RlOwoJCQkKCQkJCSR0bXBWYWx1ZXMgPSAkbGluZU1vZGVsLT5nZXRWYWx1ZXMoKTsKCQkJCSRtZXRhT3ZlcnJpZGUgPSBhcnJheSgncG9zdGZpeF9pc28nPT5mYWxzZSk7IC8vaW4gY2FzZSBpdHMgbmVlZGVkIGluIHRoZSBjdXJyZW5jeSBmb3JtYXR0aW5nIGJlbG93CgkJCQlmb3JlYWNoICgkdG1wVmFsdWVzIGFzICR0bXBQYWlyKQoJCQkJewoJCQkJCS8vJGNoYXJ0RGF0YVtdID0gYXJyYXkoInskdGhpcy0+Y2F0ZWdvcnlGaWVsZH0iPT4kdG1wUGFpclsnY2F0ZWdvcnknXSwgInskdGhpcy0+dmFsdWVGaWVsZH17JGxjfSI9PiR0bXBQYWlyWyd2YWx1ZSddKTsKCQkJCQkkY2hhcnREYXRhWyR0bXBQYWlyWydjYXRlZ29yeSddXVsieyR0aGlzLT5jYXRlZ29yeUZpZWxkfSJdID0gJHRtcFBhaXJbJ2NhdGVnb3J5J107CgkJCQkJJGNoYXJ0RGF0YVskdG1wUGFpclsnY2F0ZWdvcnknXV1bInskdGhpcy0+dmFsdWVGaWVsZH17JGxjfSJdID0gJHRtcFBhaXJbJ3ZhbHVlJ107CgkJCQkJaWYgKCR0aGlzLT5jdXJyZW5jeVZhbHVlcykKCQkJCQl7CgkJCQkJCSRjaGFydERhdGFbJHRtcFBhaXJbJ2NhdGVnb3J5J11dWyJmb3JtYXR0ZWRfdmFsdWVfeyRsY30iXSA9IGh0bWxfZW50aXR5X2RlY29kZShfbW1vZigkdG1wUGFpclsndmFsdWUnXSwkdGhpcy0+Y3VycmVuY3lUeXBlLCRtZXRhT3ZlcnJpZGUpLEVOVF9DT01QQVQsIlVURi04Iik7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCSRncmFwaENvZGUgPSBpbXBsb2RlKCIsIiwkZ3JhcGhBcnJheSk7CgkJCQoJCQkkanNvbkRhdGEgPSBqc29uX2VuY29kZShhcnJheV92YWx1ZXMoJGNoYXJ0RGF0YSkpOwoJCQkkb3V0cHV0IC49ICI8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+XG4iOwoJCQkkb3V0cHV0IC49ICJqUXVlcnkoZnVuY3Rpb24oKSB7XG4iOwoJCQkkb3V0cHV0IC49ICJ2YXIgeyR0aGlzLT5jb250YWluZXJ9X2NoYXJ0ID0gQW1DaGFydHMubWFrZUNoYXJ0KCd7JHRoaXMtPmNvbnRhaW5lcn0nLCB7XG4iOwoJCQkkb3V0cHV0IC49ICIndHlwZSc6ICdzZXJpYWwnLFxuIjsKCQkJLy8kb3V0cHV0IC49ICInc3RhcnREdXJhdGlvbic6IDAuMyxcbiI7CgkJCSRvdXRwdXQgLj0gIidwYXRoVG9JbWFnZXMnOiAnIi5NTV9QTFVHSU5fVVJMLiIvcmVzb3VyY2VzL2pzL2FtY2hhcnRzL2FtY2hhcnRzL2ltYWdlcy8nLFxuIjsKCQkJJG91dHB1dCAuPSAiJ2NhdGVnb3J5RmllbGQnOiAneyR0aGlzLT5jYXRlZ29yeUZpZWxkfScsXG4iOwoJCQkkcGFyc2VEYXRlcyA9ICJmYWxzZSI7CgkJCWlmICgkdGhpcy0+Y2F0ZWdvcnlBeGlzSXNEYXRlcykKCQkJewoJCQkJJHBhcnNlRGF0ZXMgPSAidHJ1ZSI7CgkJCQkkb3V0cHV0IC49ICInZGF0YURhdGVGb3JtYXQnOiAneyR0aGlzLT5kYXRlRm9ybWF0fScsXG4iOwoJCQl9CgkJCSRvdXRwdXQgLj0gIidjYXRlZ29yeUF4aXMnOiB7XG4iOwoJCQlpZiAoZW1wdHkoJHRoaXMtPnJlc29sdXRpb24pKQoJCQl7CgkJCQkkb3V0cHV0IC49ICInbWluUGVyaW9kJzogJ3skdGhpcy0+cmVzb2x1dGlvbn0nLFxuIjsKCQkJfQoJCQkkb3V0cHV0IC49ICIncGFyc2VEYXRlcyc6IHskcGFyc2VEYXRlc31cbiI7CgkJCSRvdXRwdXQgLj0gIn0sXG4iOwoJCQkkb3V0cHV0IC49ICInY2hhcnRDdXJzb3InOiB7b25lQmFsbG9vbk9ubHk6dHJ1ZX0sXG4iOwoJCQkkb3V0cHV0IC49ICInY2hhcnRTY3JvbGxiYXInOiB7fSxcbiI7CgkJCSRvdXRwdXQgLj0gIid0cmVuZExpbmVzJzogW10sXG4iOwoJCQkkb3V0cHV0IC49ICInZ3JhcGhzJzogW1xuIjsKCQkJJG91dHB1dCAuPSAkZ3JhcGhDb2RlOwoJCQkkb3V0cHV0IC49ICJdLFxuIjsKCQkJJG91dHB1dCAuPSAiJ2d1aWRlcyc6IFtdLFxuIjsKCQkJJG91dHB1dCAuPSAiJ3ZhbHVlQXhlcyc6IFtcbiI7CgkJCSRvdXRwdXQgLj0gIntcbiI7CgkJCSRvdXRwdXQgLj0gIgknaWQnOiAnVmFsdWVBeGlzLTEnLFxuIjsKCQkJaWYgKCFlbXB0eSgkdGhpcy0+dmFsdWVBeGlzVGl0bGUpKQoJCQl7CgkJCQkkb3V0cHV0IC49ICIJJ3RpdGxlJzogJ3skdGhpcy0+dmFsdWVBeGlzVGl0bGV9J1xuIjsKCQkJfQoJCQkkb3V0cHV0IC49ICJ9XG4iOwoJCQkkb3V0cHV0IC49ICJdLFxuIjsKCQkJJG91dHB1dCAuPSAiJ2FsbExhYmVscyc6IFtdLFxuIjsKCQkJJG91dHB1dCAuPSAiJ2JhbGxvb24nOiB7fSxcbiI7CgkJCSRvdXRwdXQgLj0gIidsZWdlbmQnOiB7XG4iOwoJCQkvLyRvdXRwdXQgLj0gIid1c2VHcmFwaFNldHRpbmdzJzogdHJ1ZVxuIjsKCQkJJG91dHB1dCAuPSAifSxcbiI7CgkJCWlmICghZW1wdHkoJHRoaXMtPnRpdGxlKSkgCgkJCXsKCQkJCSRvdXRwdXQgLj0gIid0aXRsZXMnOiBbXG4iOwoJCQkJJG91dHB1dCAuPSAie1xuIjsKCQkJCSRvdXRwdXQgLj0gIgknaWQnOiAnVGl0bGUtMScsXG4iOwoJCQkJJG91dHB1dCAuPSAiCSdzaXplJzogMTUsXG4iOwoJCQkJJG91dHB1dCAuPSAiCSd0ZXh0JzogJ3skdGhpcy0+dGl0bGV9J1xuIjsKCQkJCSRvdXRwdXQgLj0gIn1cbiI7CgkJCQkkb3V0cHV0IC49ICJdLFxuIjsKCQkJfQoJCQkkb3V0cHV0IC49ICInZGF0YVByb3ZpZGVyJzogeyRqc29uRGF0YX1cbiI7CgkJCSRvdXRwdXQgLj0gIn0pO1xuIjsKCQkJJG91dHB1dCAuPSAifSk7XG4iOwoJCQkkb3V0cHV0IC49ICI8L3NjcmlwdD5cbiI7CgkJfQoJCXJldHVybiAkb3V0cHV0OwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlGaWVsZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5jYXRlZ29yeUZpZWxkOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0Q2F0ZWdvcnlGaWVsZCgkY2F0ZWdvcnlGaWVsZCkKCXsKCQkkdGhpcy0+Y2F0ZWdvcnlGaWVsZCA9ICRjYXRlZ29yeUZpZWxkOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0VmFsdWVGaWVsZCgpCgl7CgkJcmV0dXJuICR0aGlzLT52YWx1ZUZpZWxkOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0VmFsdWVGaWVsZCgkdmFsdWVGaWVsZCkKCXsKCQkkdGhpcy0+dmFsdWVGaWVsZCA9ICR2YWx1ZUZpZWxkOwoJCXJldHVybiAkdGhpczsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldFRpdGxlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRpdGxlOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0VGl0bGUoJHRpdGxlKQoJewoJCSR0aGlzLT50aXRsZSA9ICR0aXRsZTsKCQlyZXR1cm4gJHRoaXM7Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHNldHMgdGhlIG1vZGVsIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBvbmUgb2YgdGhlIGxpbmVzIG9uIHRoZSBncmFwaAoJICogQG92ZXJyaWRlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRNb2RlbCgkbW9kZWwpCgl7CgkJaWYgKCRtb2RlbCBpbnN0YW5jZW9mIE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbCkKCQl7CgkJCSR0aGlzLT5tb2RlbCA9IGFycmF5KCRtb2RlbCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBhZGRNb2RlbCgkbW9kZWwpCgl7CgkJaWYgKCRtb2RlbCBpbnN0YW5jZW9mIE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbCkKCQl7CgkJCSR0aGlzLT5tb2RlbFtdID0gJG1vZGVsOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2F0ZWdvcmllc0FyZURhdGVzKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5jYXRlZ29yeUF4aXNJc0RhdGVzOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDYXRlZ29yaWVzQXJlRGF0ZXMoJGNhdGVnb3JpZXNBcmVEYXRlcykgCgl7CgkJJHRoaXMtPmNhdGVnb3J5QXhpc0lzRGF0ZXMgPSAkY2F0ZWdvcmllc0FyZURhdGVzOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRlRm9ybWF0KCkgCgl7CgkJcmV0dXJuICR0aGlzLT5kYXRlRm9ybWF0OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRlRm9ybWF0KCRkYXRlRm9ybWF0KSAKCXsKCQkkdGhpcy0+ZGF0ZUZvcm1hdCA9ICRkYXRlRm9ybWF0OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZXNvbHV0aW9uKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5yZXNvbHV0aW9uOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRSZXNvbHV0aW9uKCRyZXNvbHV0aW9uVW5pdCwkaW50ZXJ2YWw9MSkgCgl7CgkJc3dpdGNoICgkcmVzb2x1dGlvblVuaXQpIAoJCXsKCQkJY2FzZSBzZWxmOjokSE9VUlM6CgkJCQkkdG1wVW5pdCA9ICJoaCI7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokREFZUzoKCQkJCSR0bXBVbml0ID0gIkREIjsKCQkJCWJyZWFrOwoJCQljYXNlIHNlbGY6OiRXRUVLUzoKCQkJCSRpbnRlcnZhbCAqPSA3OwoJCQkJJHRtcFVuaXQgPSAiREQiOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JE1PTlRIUzoKCQkJCSR0bXBVbml0ID0gIk1NIjsKCQkJCWJyZWFrOwoJCQljYXNlIHNlbGY6OiRZRUFSUzoKCQkJCSR0bXBVbml0ID0gIllZWVkiOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JE1PTlRIUzoKCQkJZGVmYXVsdDoKCQkJCSR0bXBVbml0ID0gIk1NIjsKCQkJCWJyZWFrOwkKCQl9CgkJJHRoaXMtPnJlc29sdXRpb24gPSAoaW50dmFsKCRpbnRlcnZhbCkgPiAxKT8ieyRpbnRlcnZhbH17JHRtcFVuaXR9IjokdG1wVW5pdDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U2Nyb2xsVGhyZXNob2xkKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5zY3JvbGxUaHJlc2hvbGQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFNjcm9sbFRocmVzaG9sZCgkc2Nyb2xsVGhyZXNob2xkKSAKCXsKCQkkdGhpcy0+c2Nyb2xsVGhyZXNob2xkID0gJHNjcm9sbFRocmVzaG9sZDsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldEN1cnJlbmN5VmFsdWVzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmN1cnJlbmN5VmFsdWVzOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0Q3VycmVuY3lWYWx1ZXMoJGN1cnJlbmN5VmFsdWVzKQoJewoJCSR0aGlzLT5jdXJyZW5jeVZhbHVlcyA9ICRjdXJyZW5jeVZhbHVlczsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldEN1cnJlbmN5VHlwZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5jdXJyZW5jeVR5cGU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRDdXJyZW5jeVR5cGUoJGN1cnJlbmN5VHlwZSkKCXsKCQkkdGhpcy0+Y3VycmVuY3lUeXBlID0gJGN1cnJlbmN5VHlwZTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldFZhbHVlQXhpc1RpdGxlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnZhbHVlQXhpc1RpdGxlOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0VmFsdWVBeGlzVGl0bGUoJHZhbHVlQXhpc1RpdGxlKQoJewoJCSR0aGlzLT52YWx1ZUF4aXNUaXRsZSA9ICR2YWx1ZUF4aXNUaXRsZTsKCX0JCn0K', 0, '2018-11-21 06:38:53'),
(23, 'oauthuser', 'LyoqCiAqIE1NX09BdXRoVXNlcgogKgogKiBTaW1wbGUgZGF0YSBjbGFzcyByZXByZXNlbnRpbmcgdGhlIHVzZXIgaW4gYW4gT0F1dGggYXBwbGljYXRpb24uCiAqIEBwYWNrYWdlCiAqIEB2ZXJzaW9uICRpZCQKICovCmNsYXNzIE1NX09BdXRoVXNlciB7CgoJcHVibGljICRhdXRob3JpemVkVG9rZW4gPSBmYWxzZTsKCXB1YmxpYyAkcmVxdWVzdFRva2VuID0gZmFsc2U7CglwdWJsaWMgJHZlcmlmaWVyID0gZmFsc2U7CglwdWJsaWMgJHRva2VuU2VjcmV0ID0gZmFsc2U7CglwdWJsaWMgJGFjY2Vzc1Rva2VuID0gZmFsc2U7CgoJLyoqCgkgKiBpc0F1dGhvcml6ZWQKCSAqCgkgKiBDaGVja3MgaWYgdGhpcyB1c2VyIGlzIGF1dGhvcml6ZWQuCgkgKiBAYWNjZXNzIHB1YmxpYwoJICogQHJldHVybiB2b2lkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBpc0F1dGhvcml6ZWQoKSB7CgkJaWYgKGVtcHR5KCR0aGlzLT5hdXRob3JpemVkVG9rZW4pICYmIGVtcHR5KCR0aGlzLT5hY2Nlc3NUb2tlbikpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQlyZXR1cm4gdHJ1ZTsKCX0KCgoJLyoqCgkgKiBnZXRIaWdoZXN0UHJpb3JpdHlUb2tlbgoJICoKCSAqIFJldHVybnMgaGlnaGVzdCBwcmlvcml0eSB0b2tlbiAtIHVzZWQgdG8gZGVmaW5lIGF1dGhvcml6YXRpb24KCSAqIHN0YXRlIGZvciBhIGdpdmVuIE1NX09BdXRoVXNlcgoJICogQGFjY2VzcyBwdWJsaWMKCSAqIEByZXR1cm4gdm9pZAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SGlnaGVzdFByaW9yaXR5VG9rZW4oKSB7CgkJaWYgKCFlbXB0eSgkdGhpcy0+YWNjZXNzVG9rZW4pKSByZXR1cm4gJHRoaXMtPmFjY2Vzc1Rva2VuOwoJCWlmICghZW1wdHkoJHRoaXMtPmF1dGhvcml6ZWRUb2tlbikpIHJldHVybiAkdGhpcy0+YXV0aG9yaXplZFRva2VuOwoJCWlmICghZW1wdHkoJHRoaXMtPnJlcXVlc3RUb2tlbikpIHJldHVybiAkdGhpcy0+cmVxdWVzdFRva2VuOwoKCQkvLyBSZXR1cm4gbm8gdG9rZW4sIG5ldyB1c2VyCgkJcmV0dXJuICcnOwoJfQoKfQo=', 0, '2018-11-21 06:38:53'),
(24, 'oauthserviceprovider', 'LyoqCiAqIE1NX09BdXRoU2VydmljZVByb3ZpZGVyCiAqCiAqIFJlcHJlc2VudHMgdGhlIHNlcnZpY2UgcHJvdmlkZXIgaW4gdGhlIE9BdXRoIGF1dGhlbnRpY2F0aW9uIG1vZGVsLgogKiBUaGUgY2xhc3MgdGhhdCBpbXBsZW1lbnRzIHRoZSBzZXJ2aWNlIHByb3ZpZGVyIHdpbGwgY29udGFpbiB0aGUKICogc3BlY2lmaWMga25vd2xlZGdlIGFib3V0IHRoZSBBUEkgd2UgYXJlIGludGVyZmFjaW5nIHdpdGgsIGFuZAogKiBwcm92aWRlIHVzZWZ1bCBtZXRob2RzIGZvciBpbnRlcmZhY2luZyB3aXRoIGl0cyBBUEkuCiAqCiAqIEZvciBleGFtcGxlLCBhbiBNTV9PQXV0aFNlcnZpY2VQcm92aWRlciB3b3VsZCBrbm93IHRoZSBVUkxzIG5lY2Vzc2FyeQogKiB0byBwZXJmb3JtIHNwZWNpZmljIGFjdGlvbnMsIHRoZSB0eXBlIG9mIGRhdGEgdGhhdCB0aGUgQVBJIGNhbGxzCiAqIHdvdWxkIHJldHVybiwgYW5kIHdvdWxkIGJlIHJlc3BvbnNpYmxlIGZvciBtYW5pcHVsYXRpbmcgdGhlIHJlc3VsdHMKICogaW50byBhIHVzZWZ1bCBtYW5uZXIuCiAqCiAqIEl0IHNob3VsZCBiZSBub3RlZCB0aGF0IHRoZSBtZXRob2RzIGVuZm9yY2VkIGJ5IHRoZSBNTV9PQXV0aFNlcnZpY2VQcm92aWRlcgogKiBpbnRlcmZhY2UgYXJlIG1hZGUgc28gdGhhdCBpdCBjYW4gaW50ZXJhY3Qgd2l0aCBvdXIgTU1fT0F1dGhBcHBsaWNhdGlvbgogKiBjbGVhbmx5LCByYXRoZXIgdGhhbiBmcm9tIGEgZ2VuZXJhbCB1c2UgcGVyc3BlY3RpdmUsIHRob3VnaCBzb21lCiAqIG1ldGhvZHMgZm9yIHRob3NlIHB1cnBvc2VzIGRvIGV4aXN0cyAoc3VjaCBhcyBnZXRVc2VyRGF0YSkuCiAqCiAqIEBwYWNrYWdlCiAqIEB2ZXJzaW9uICRpZCQKICovCmludGVyZmFjZSBNTV9PQXV0aFNlcnZpY2VQcm92aWRlciB7CgoJcHVibGljIGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuVXJsKCk7CglwdWJsaWMgZnVuY3Rpb24gZ2V0QXV0aG9yaXplVXJsKCk7CglwdWJsaWMgZnVuY3Rpb24gZ2V0UmVxdWVzdFRva2VuVXJsKCk7CglwdWJsaWMgZnVuY3Rpb24gZ2V0QXV0aFRva2VuRnJvbVVybCgpOwoJcHVibGljIGZ1bmN0aW9uIGdldEJhc2VVcmkoKTsKCXB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyRGF0YSgpOwoKfQoKCg==', 0, '2018-11-21 06:38:53'),
(25, 'transactionlog', 'LyoqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKi8KY2xhc3MgTU1fVHJhbnNhY3Rpb25Mb2cgCnsKCXB1YmxpYyBzdGF0aWMgJFRSQU5TQUNUSU9OX1RZUEVfQ0hBUkdFICAgICAgICAgICAJICA9ICIxIjsKCXB1YmxpYyBzdGF0aWMgJFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCAgICAgICAgICAgCSAgPSAiMiI7CglwdWJsaWMgc3RhdGljICRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19DSEFSR0UgIAkgID0gIjMiOwoJcHVibGljIHN0YXRpYyAkVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCAJICA9ICI0IjsKCXB1YmxpYyBzdGF0aWMgJFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5EICAgICAgICAgICAgCSAgPSAiNSI7CglwdWJsaWMgc3RhdGljICRUUkFOU0FDVElPTl9UWVBFX0NSRURJVCAgICAgICAgICAgCSAgPSAiNiI7CglwdWJsaWMgc3RhdGljICRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRUJBQ0sgICAgICAgICAgICA9ICI3IjsKCQoJLyoqCgkgKiBDcmVhdGUgYW4gZW50cnkgaW4gdGhlIHRyYW5zYWN0aW9ucyB0YWJsZQoJICogCgkgKiBBbiBvcmRlciBpZCBtdXN0IGJlIHN1cHBsaWVkCgkgKiBBbiBvcmRlciBpdGVtIGlkIG11c3QgYmUgc3VwcGxpZWQgZm9yIHRyYW5zYWN0aW9ucyBvZiB0eXBlICRUUkFOU0FDVElPTl9UWVBFX1JFQklMTCwgYmVjYXVzZSBvbmx5IGFuIGl0ZW0gY2FuIHJlY3VyCgkgKiAKCSAqIEBwYXJhbSBpbnQgJG9yZGVySWQgVGhlIGlkIGZvciB0aGUgb3JkZXIgYmVpbmcgcmVmZXJlbmNlZC4gUmVxdWlyZWQKCSAqIEBwYXJhbSBpbnQgJG9yZGVySXRlbUlkIFRoZSBpZCBmb3IgYW4gb3JkZXIgaXRlbSBiZWluZyByZWZlcmVuY2VkCgkgKiBAcGFyYW0gZmxvYXQgJGFtb3VudCBUaGUgZG9sbGFyIGFtb3VudCBvZiB0aGUgdHJhbnNhY3Rpb24KCSAqIEBwYXJhbSBzdHJpbmcgJGN1cnJlbmN5Q29kZSBUaGUgMy1jaGFyIGlzbyBjdXJyZW5jeSBjb2RlIG9mIHRoZSBjdXJyZW5jeSB0aGlzIHRyYW5zYWN0aW9uIHRvb2sgcGxhY2UgaW4KCSAqIEBwYXJhbSBTdHJpbmcgJGRlc2NyaXB0aW9uIEEgZGVzY3JpcHRpb24gb2YgdGhlIHRyYW5zYWN0aW9uCgkgKiBAcGFyYW0gaW50ICR0cmFuc2FjdGlvblR5cGUgVGhlIHR5cGUgb2YgdGhlIHRyYW5zYWN0aW9uLCBvbmUgb2YgdGhlIGNvbnN0YW50cyBpbiBNTV9UcmFuc2FjdGlvbkxvZwoJICogQHBhcmFtIGJvb2xlYW4gJGJhbGFuY2UgSWYgdHJ1ZSwgYSBtYXRjaGluZyB0cmFuc2FjdGlvbiB3aXRoIGEgbmVnYXRpdmUgYmFsYW5jZSB3aWxsIGJlIGVudGVyZWQgaW4gdGhlIHRyYW5zYWN0aW9ucyB0YWJsZSwgc28gdGhhdCB0aGUgdGFibGUgd2lsbCBzdW0gY29ycmVjdGx5CgkgKiBAcGFyYW0gaW50ICRwYXltZW50U2VydmljZUlkIFRoZSBwYXltZW50IHNlcnZpY2UgdXNlZCB0byBwcm9jZXNzIHRoaXMgdHJhbnNhY3Rpb24KCSAqIEBwYXJhbSBpbnQgJHBheW1lbnRTZXJ2aWNlRGV0YWlsSWQgVGhlIGlkIG9mIHRoZSBlbnRyeSBpbiB0aGUgcGF5bWVudC1zZXJ2aWNlLXNwZWNpZmljIHRhYmxlIHByb3ZpZGluZyBtb3JlIGRldGFpbHMgZm9yIHRoaXMgdHJhbnNhY3Rpb24KCSAqIEBwYXJhbSBzdHJpbmcgJHRyYW5zYWN0aW9uRGF0ZSBUaGUgZGF0ZSB0byBhc3NvY2lhdGUgdGhpcyB0cmFuc2FjdGlvbiB3aXRoLiBBIGRhdGV0aW1lIHJlY29nbml6YWJsZSBieSBzdHJ0b3RpbWUgaXMgZXhwZWN0ZWQuIElmIG51bGwsIHRoZSBjdXJyZW50IGRhdGUvdGltZSBpcyB1c2VkLiBJZiBpbnRlZ2VyLCBpdCBpcyBhc3N1bWVkIHRvIGJlIGEgdW5peCB0aW1lc3RhbXAgYW5kIGNvbnZlcnRlZCB0byBzdHJpbmcKCSAqIEBwYXJhbSBpbnQgJHJlZnVuZElkIEluIHRoZSBjYXNlIG9mIHJlZnVuZHMsIHRoZSBpZCBvZiB0aGUgb3JpZ2luYWwgdHJhbnNhY3Rpb24gdGhhdCB3YXMgcmVmdW5kZWQKCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBpZCBvZiB0aGUgY3JlYXRlZCB0cmFuc2FjdGlvbiBvbiBzdWNjZXNzLCBvciBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2Ugb24gZmFpbHVyZQoJICogCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkb3JkZXJJZCwgJG9yZGVySXRlbUlkPW51bGwsICRhbW91bnQsICRjdXJyZW5jeUNvZGUsICRkZXNjcmlwdGlvbiwgJHRyYW5zYWN0aW9uVHlwZSwgJGJhbGFuY2U9ZmFsc2UsICRwYXltZW50U2VydmljZUlkPW51bGwsICRwYXltZW50U2VydmljZURldGFpbElkPW51bGwsICR0cmFuc2FjdGlvbkRhdGU9bnVsbCwgJHJlZnVuZElkPW51bGwsICRpc1Rlc3Q9ZmFsc2UpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChpc19udWxsKCRvcmRlcklkKSkgLy90cmFuc2FjdGlvbnMgbXVzdCBiZSB0aWVkIHRvIGF0IGxlYXN0IGFuIG9yZGVyCgkJeyAKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQXR0ZW1wdGVkIHRvIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIHdpdGggbnVsbCBvcmRlciBpZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICghaXNfbnVsbCgkdHJhbnNhY3Rpb25EYXRlKSkgLy9tYWtlIHN1cmUgYW55IHN1cHBsaWVkIGRhdGVzIGFyZSBpbiBteXNxbCBmb3JtYXQsIGludHMgYXJlIGFzc3VtZWQgdG8gYWxyZWFkeSBiZSB0aW1lc3RhbXBzCgkJewoJCQlpZiAoIWlzX2ludCgkdHJhbnNhY3Rpb25EYXRlKSkgCgkJCXsKCQkJCSR0cmFuc2FjdGlvbkRhdGUgPSBzdHJ0b3RpbWUoJHRyYW5zYWN0aW9uRGF0ZSk7CgkJCX0KCQkJJHRyYW5zYWN0aW9uRGF0ZSA9IGRhdGUoIlktbS1kIEg6aTpzIiwkdHJhbnNhY3Rpb25EYXRlKTsgCgkJfQogCgkJLy9kbyB0cmFuc2FjdGlvbiB0eXBlLXNwZWNpZmljIG9wZXJhdGlvbnMgYmVsb3csIHN1Y2ggYXMgYmFsYW5jaW5nIHRoZSB0cmFuc2FjdGlvbgoJCXN3aXRjaCAoJHRyYW5zYWN0aW9uVHlwZSkKCQl7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRToKCQkJCSRhbW91bnQgPSBhYnMoJGFtb3VudCk7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVDoKCQkJCSRhbW91bnQgPSAtKGFicygkYW1vdW50KSk7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQ6CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19DSEFSR0U6CgkJCQkvL2NvcnJlY3QgdGhlIHNpZ24sIGlmIG5lY2Vzc2FyeSwgbWFraW5nIHBheW1lbnRzIG5lZ2F0aXZlIGFuZCBjaGFyZ2VzIHBvc2l0aXZlCgkJCQkkYW1vdW50ID0gYWJzKCRhbW91bnQpOwoJCQkJJGFtb3VudCA9ICgkdHJhbnNhY3Rpb25UeXBlID09IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCk/KC0kYW1vdW50KTokYW1vdW50OwoJCQkJaWYgKGlzX251bGwoJG9yZGVySXRlbUlkKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJBdHRlbXB0ZWQgdG8gY3JlYXRlIGEgcmViaWxsIHRyYW5zYWN0aW9uIHdpdGggbnVsbCBvcmRlciBpdGVtIGlkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJCWlmICgkYmFsYW5jZSkgCgkJCQl7CgkJCQkJJHJlYmlsbEJhbGFuY2VEZXNjcmlwdGlvbiA9ICgkdHJhbnNhY3Rpb25UeXBlID09IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfQ0hBUkdFKT8iUmViaWxsIHBheW1lbnQiOiJSZWJpbGwgY2hhcmdlIjsgCgkJCQkJJHJlYmlsbEJhbGFuY2VUcmFuc2FjdGlvblR5cGUgPSAoJHRyYW5zYWN0aW9uVHlwZSA9PSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX0NIQVJHRSk/TU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UOk1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfQ0hBUkdFOwoJCQkJCSRiYWxhbmNlUmVzdWx0ID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVySWQsICRvcmRlckl0ZW1JZCwgLSRhbW91bnQsICRjdXJyZW5jeUNvZGUsICRyZWJpbGxCYWxhbmNlRGVzY3JpcHRpb24sICRyZWJpbGxCYWxhbmNlVHJhbnNhY3Rpb25UeXBlLGZhbHNlLG51bGwsbnVsbCwkdHJhbnNhY3Rpb25EYXRlLG51bGwsJGlzVGVzdCk7CgkJCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRiYWxhbmNlUmVzdWx0KSkKCQkJCQl7CgkJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHJlYmlsbCB0cmFuc2FjdGlvbiBmb3Igb3JkZXIgaXRlbSAjIHskb3JkZXJJdGVtSWR9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5EOiAKCQkJCSRhbW91bnQgPSAtKGFicygkYW1vdW50KSk7IC8vZm9yY2UgcmVmdW5kcyB0byBiZSBleHByZXNzZWQgYXMgbmVnYXRpdmUgdmFsdWVzLiBBICJwb3NpdGl2ZSByZWZ1bmQiIGlzIGEgY3JlZGl0LCB3aGljaCBpcyBjdXJyZW50bHkgdW5zdXBwb3J0ZWQgICAKCQkJCWJyZWFrOwoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9DSEFSR0VCQUNLOgoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJBdHRlbXB0ZWQgdG8gY3JlYXRlIHRyYW5zYWN0aW9uIHdpdGggdW5rbm93biB0cmFuc2FjdGlvbiB0eXBlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCWJyZWFrOwkJCgkJfQoJCQoJCSRjdXJyZW5jeUNvZGUgPSBzdHJ0b3VwcGVyKCRjdXJyZW5jeUNvZGUpOwoJCWlmICghTU1fQ3VycmVuY3lVdGlsOjppc1N1cHBvcnRlZEN1cnJlbmN5KCRjdXJyZW5jeUNvZGUpKQoJCXsJCgkJCSRjdXJyZW5jeUNvZGUgPSAiVVNEIjsJCgkJfQoJCQoJCSRpbnNlcnREYXRhID0gYXJyYXkoCgkJCSdvcmRlcl9pZCcgPT4gJG9yZGVySWQsCgkJCSdvcmRlcl9pdGVtX2lkJyA9PiAkb3JkZXJJdGVtSWQsCgkJCSdhbW91bnQnID0+ICRhbW91bnQsCgkJCSdjdXJyZW5jeScgPT4gJGN1cnJlbmN5Q29kZSwKCQkJJ2Rlc2NyaXB0aW9uJyA9PiAkZGVzY3JpcHRpb24sCgkJCSdwYXltZW50X3NlcnZpY2VfaWQnID0+ICRwYXltZW50U2VydmljZUlkLAoJCQkncGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCcgPT4gJHBheW1lbnRTZXJ2aWNlRGV0YWlsSWQsCgkJCSd0cmFuc2FjdGlvbl90eXBlJyA9PiAkdHJhbnNhY3Rpb25UeXBlLAoJCQkndHJhbnNhY3Rpb25fZGF0ZScJCQk9PiAoaXNfbnVsbCgkdHJhbnNhY3Rpb25EYXRlKSk/TU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk6JHRyYW5zYWN0aW9uRGF0ZSwKCQkJJ2lzX3Rlc3QnCQkJCQk9PiAoYm9vbCkkaXNUZXN0CgkJKTsKCQkKCQlpZiAoIWlzX251bGwoJHJlZnVuZElkKSkKCQl7CgkJCSRpbnNlcnREYXRhWydyZWZ1bmRfaWQnXSA9ICRyZWZ1bmRJZDsKCQl9CgkJCgkJJHJlcyA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLCAkaW5zZXJ0RGF0YSk7CgkJaWYgKCRyZXMgPT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJEYXRhYmFzZSBlcnJvciBjcmVhdGluZyBlbnRyeSBpbnRvIHRyYW5zYWN0aW9ucyBsb2ciLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdHJhbnNhY3Rpb25JZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJCgkJLy8gZGlzcGF0Y2ggcHVzaCBub3RpZmljYXRpb25zCgkJaWYoJHRyYW5zYWN0aW9uVHlwZSA9PSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCB8fAoJCQkkdHJhbnNhY3Rpb25UeXBlID09IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCB8fAoJCQkkdHJhbnNhY3Rpb25UeXBlID09IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUZVTkQpCgkJewoJCQkkbWVtYmVySWQgPSBNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlcklkKTsKCQkJCgkJCWlmKCRtZW1iZXJJZCA+IDApCgkJCXsKCQkJCXN3aXRjaCAoJHRyYW5zYWN0aW9uVHlwZSkKCQkJCXsKCQkJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UOgoJCQkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQ0VJVkVELCBNTV9FdmVudDo6cGFja2FnZU9yZGVyRGF0YSgkbWVtYmVySWQsICRvcmRlcklkLCAkb3JkZXJJdGVtSWQsICR0cmFuc2FjdGlvbklkKSk7CgkJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVDoKCQkJCQkJZG9fYWN0aW9uKE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTEwsIE1NX0V2ZW50OjpwYWNrYWdlT3JkZXJEYXRhKCRtZW1iZXJJZCwgJG9yZGVySWQsICRvcmRlckl0ZW1JZCwgJHRyYW5zYWN0aW9uSWQsIHRydWUpKTsKCQkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORDoKCQkJCQkJJHJlc3VsdCA9IHNlbGY6OmdldFRyYW5zYWN0aW9uSW5mbygkcmVmdW5kSWQpOwoJCQkJCQkkaXNSZWJpbGwgPSBmYWxzZTsKCQkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSAmJiAkcmVzdWx0LT5tZXNzYWdlLT50cmFuc2FjdGlvbl90eXBlID09IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCkKCQkJCQkJewoJCQkJCQkJJGlzUmViaWxsID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRSRUZVTkRfSVNTVUVELCBNTV9FdmVudDo6cGFja2FnZU9yZGVyRGF0YSgkbWVtYmVySWQsICRvcmRlcklkLCAkb3JkZXJJdGVtSWQsICRyZWZ1bmRJZCwgJGlzUmViaWxsKSk7CgkJCQkJCWJyZWFrOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHRyYW5zYWN0aW9uSWQpOwoJfQoJCgkKCS8qKgoJICogY3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkgaXMgYSBjb252ZW5pZW5jZSBtZXRob2Qgd2hpY2ggcHJldmVudHMgY2FsbGVycyBmcm9tIGhhdmluZyB0byBmaWxsIG91dCBhbGwgb2YgdGhlIGRlZmF1bHRlZCBwYXJhbWV0ZXJzIGluIG9yZGVyIHRvIGFjY2VzcyAkaXNUZXN0IGF0IHRoZSBlbmQgb2YgdGhlIGxpc3QKCSAqIAoJICogQHNlZSBjcmVhdGVUcmFuc2FjdGlvbkVudHJ5CgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yZGVySWQsICRvcmRlckl0ZW1JZD1udWxsLCAkYW1vdW50LCAkY3VycmVuY3lDb2RlLCAkZGVzY3JpcHRpb24sICR0cmFuc2FjdGlvblR5cGUsICRiYWxhbmNlPWZhbHNlLCAkcGF5bWVudFNlcnZpY2VJZD1udWxsLCAkcGF5bWVudFNlcnZpY2VEZXRhaWxJZD1udWxsLCAkdHJhbnNhY3Rpb25EYXRlPW51bGwsICRyZWZ1bmRJZD1udWxsKQoJewoJCXJldHVybiBzZWxmOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlcklkLCAkb3JkZXJJdGVtSWQsICRhbW91bnQsICRjdXJyZW5jeUNvZGUsICRkZXNjcmlwdGlvbiwgJHRyYW5zYWN0aW9uVHlwZSwgJGJhbGFuY2UsICRwYXltZW50U2VydmljZUlkLCAkcGF5bWVudFNlcnZpY2VEZXRhaWxJZCwgJHRyYW5zYWN0aW9uRGF0ZSwgJHJlZnVuZElkLCB0cnVlKTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgaW5mbyBhYm91dCBhIHNwZWNpZmljIHRyYW5zYWN0aW9uLiBFc3NlbnRpYWxseSBhIHBhc3N0aHJvdWdoIGZvciB3cGRiLT5nZXRfcm93CgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICR0cmFuc2FjdGlvbklkIFRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiBpZCB0byBsb29rdXAKCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIGFuIG9iamVjdCBvZiB0eXBlIHN0ZENsYXNzICh3aGljaCBpbiB0dXJuIGNvbnRhaW5zIHRoZSB0cmFuc2FjdGlvbiBpbmZvcm1hdGlvbikgb24gc3VjY2VzcywgYSBkZXNjcmlwdGl2ZSBlcnJvciBtZXNzYWdlIG9uIGZhaWx1cmUKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbkluZm8oJHRyYW5zYWN0aW9uSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChlbXB0eSgkdHJhbnNhY3Rpb25JZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUcmFuc2FjdGlvbiBJZCB3YXMgaW52YWxpZCBvciBub3Qgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkc3FsID0gIlNFTEVDVCAqIGZyb20gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiB3aGVyZSBpZCA9ICVzIjsKCQkkdHJhbnNhY3Rpb25JbmZvID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoJHNxbCwkdHJhbnNhY3Rpb25JZCkpOwoJCQoJCWlmICgkdHJhbnNhY3Rpb25JbmZvID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGxvb2tpbmcgdXAgdHJhbnNhY3Rpb24iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCR0cmFuc2FjdGlvbkluZm8pOwkJCgl9Cn0KCg==', 0, '2018-11-21 06:38:53'),
(26, 'userdefinedpageview', 'Y2xhc3MgTU1fVXNlckRlZmluZWRQYWdlVmlldyBleHRlbmRzIE1NX1JCQUNHZW5lcmFsRW1wbG95ZWVWaWV3IAp7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0FWRToKCQkJCQlyZXR1cm4gJHRoaXMtPnNhdmVVc2VyRGVmaW5lZFBhZ2UoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUkVNT1ZFOgoJCQkJCXJldHVybiAkdGhpcy0+cmVtb3ZlVXNlckRlZmluZWRQYWdlKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKCRkZykKIAl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRyb3dzID0gcGFyZW50OjpnZXREYXRhKE1NX1RBQkxFX1VTRVJfREVGSU5FRF9QQUdFUywgbnVsbCwgJGRnKTsKCQkKCQlyZXR1cm4gJHJvd3M7CiAJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHJlbW92ZVVzZXJEZWZpbmVkUGFnZSgkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsiaWQiXSkpCgkJewoJCQkkaWQgPSAoaXNzZXQoJHBvc3RbImlkIl0pKT8kcG9zdFsiaWQiXToiMCI7CgkJCSRwYWdlID0gbmV3IE1NX1VzZXJEZWZpbmVkUGFnZSgkaWQpOwoJCQkkcGFnZS0+ZGVsZXRlKCk7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlVXNlckRlZmluZWRQYWdlKCRwb3N0KXsKCQkKCQkkYmxhbmtGaWVsZHMgPSBhcnJheSgibW1fcGFnZV9uYW1lIiwibW1fcGFnZV91cmwiKTsKCQlmb3JlYWNoKCRibGFua0ZpZWxkcyBhcyAkZmllbGQpCgkJewoJCQlpZigkcG9zdFskZmllbGRdID09ICIiKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJ7JGZpZWxkfSBtdXN0IGJlIGNvbXBsZXRlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CQoJCX0KCQkKCQkkaWQgPSAoaXNzZXQoJHBvc3RbImlkIl0pKT8kcG9zdFsiaWQiXToiMCI7CgkJJHVkUGFnZSA9IG5ldyBNTV9Vc2VyRGVmaW5lZFBhZ2UoJGlkKTsKCQkkdWRQYWdlLT5zZXROYW1lKCRwb3N0WyJtbV9wYWdlX25hbWUiXSk7CgkJJHVkUGFnZS0+c2V0VXJsKCRwb3N0WyJtbV9wYWdlX3VybCJdKTsKCQkkcmV0ID0gJHVkUGFnZS0+Y29tbWl0RGF0YSgpOwoJCWlmKCRyZXQhPT1mYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVzZXItZGVmaW5lZCBwYWdlIHNhdmVkIHN1Y2Nlc3NmdWxseSIpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2F2ZSB1c2VyLWRlZmluZWQgcGFnZSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQp9', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(27, 'orderitem', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogTU1fT3JkZXJJdGVtIHJlcHJlc2VudHMgdGhlIGxpbmUgaXRlbXMgYXR0YWNoZWQgdG8gYW4gb3JkZXIuIFRoZXNlIGNhbiBlaXRoZXIgYmUgcHJvZHVjdHMgb3IgY291cG9ucwogKiBBcyBmYXIgYXMgdGhlIGF0dHJpYnV0ZXMgb2YgdGhpcyBjbGFzcywgdGhlIGl0ZW0gdHlwZSBpcyBlaXRoZXIgT1JERVJfSVRFTV9QUk9EVUNUIG9yIE9SREVSX0lURU1fRElTQ09VTlQuIFRoZSBkZXNjcmlwdGlvbiBpcyBhIHNpbXBsZSBkZXNjcmlwdGlvbiBvZiB0aGUgbGluZSBpdGVtCiAqIFRoZSBhbW91bnQgaXMgdGhlIHBlcl91bml0IGFtb3VudCwgdGhlIHF1YW50aXR5IGlzIHRoZSBudW1iZXIgb2YgdW5pdHMsIGFuZCB0aGUgdG90YWwgaXMgKGFtb3VudCAqIHF1YW50aXR5KSwgd2hpY2ggaW4gdGhlIGZ1dHVyZSBtYXkgYmUgbW9kaWZpZWQgYnkgCiAqIHRheGVzIGFuZC9vciBzaGlwcGluZwogKiBBbHRob3VnaCB0aGUgdG90YWwgY29sdW1uIGNvdWxkIGJlIGNhbGN1bGF0ZWQgZHluYW1pY2FsbHkgKGFuZCB0aHVzIG5vdCBzdG9yZWQpLCBzdG9yaW5nIGl0IGFsbG93cyBmdXR1cmUgcmVwb3J0aW5nIHRvIGJlIGRvbmUgYnkgc3VtbWluZyB0aGUgdG90YWwgY29sdW1uIG9mIHRoZQogKiBkYXRhYmFzZSB0YWJsZSBmb3IgZWFjaCBvcmRlciwgd2hpY2ggd2lsbCBzaW1wbGlmeSByZXBvcnQgaW1wbGVtZW50YXRpb24gYW5kIG9mZmVyIHNwZWVkIGFkdmFudGFnZXMgd2hpbGUgc2ltdWx0YW5lb3VzIHJlZHVjaW5nIHNlcnZlci9kYXRhYmFzZSBsb2FkCiAqCiAqLwoKY2xhc3MgTU1fT3JkZXJJdGVtIGV4dGVuZHMgTU1fRW50aXR5CnsKCXByaXZhdGUgJG9yZGVySWQgPSAiIjsKCXByaXZhdGUgJGl0ZW1UeXBlOwoJcHJpdmF0ZSAkaXRlbUlkOwoJcHJpdmF0ZSAkZGVzY3JpcHRpb247Cglwcml2YXRlICRhbW91bnQ7Cglwcml2YXRlICRxdWFudGl0eTsKCXByaXZhdGUgJHRvdGFsOwoJcHJpdmF0ZSAkc3RhdHVzID0gIiI7Cglwcml2YXRlICRpc0dpZnQgPSBmYWxzZTsKCXByaXZhdGUgJGlzUmVjdXJyaW5nID0gZmFsc2U7Cglwcml2YXRlICRyZWN1cnJpbmdBbW91bnQgPSAiIjsKCXByaXZhdGUgJHJlY3VycmluZ0Rpc2NvdW50ID0gIiI7Cglwcml2YXRlICR0cmlhbEFtb3VudCA9ICIiOwoJcHJpdmF0ZSAkdHJpYWxGcmVxdWVuY3kgPSAiIjsKCXByaXZhdGUgJHRyaWFsRHVyYXRpb24gPSAiIjsKCXByaXZhdGUgJHJlYmlsbFBlcmlvZCA9ICIiOwoJcHJpdmF0ZSAkcmViaWxsRnJlcXVlbmN5ID0gIiI7Cglwcml2YXRlICRtYXhSZWJpbGxzID0gMDsKCXByaXZhdGUgJGN1cnJlbmN5ID0gIiI7CgkKCXByaXZhdGUgJGlzVGVzdCA9IGZhbHNlOwoJCglwdWJsaWMgc3RhdGljICRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCA9IDE7CglwdWJsaWMgc3RhdGljICRPUkRFUl9JVEVNX1RZUEVfRElTQ09VTlQgPSAyOwoJcHVibGljIHN0YXRpYyAkT1JERVJfSVRFTV9UWVBFX1BST1JBVElPTiA9IDM7CgkKCXB1YmxpYyBzdGF0aWMgJFNUQVRVU19SRUNVUlJJTkcgPSAxOwoJcHVibGljIHN0YXRpYyAkU1RBVFVTX1JFQ1VSUklOR19DT01QTEVURSA9IDI7CglwdWJsaWMgc3RhdGljICRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCA9IDM7CglwdWJsaWMgc3RhdGljICRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQgPSA0OwoJcHVibGljIHN0YXRpYyAkU1RBVFVTX1JFQ1VSUklOR19QRU5ESU5HX09WRVJEVUUgPSA1OwoJcHVibGljIHN0YXRpYyAkU1RBVFVTX0dBVEVXQVlfUEFZTUVOVF9NSVNNQVRDSCA9IDY7CgkKCXByaXZhdGUgJG9yZGVyUmVmZXJlbmNlOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGlkPSIiLCRnZXREYXRhPXRydWUsTU1fT3JkZXIgJG9yZGVyUmVmZXJlbmNlPW51bGwpCgl7CgkJJHRoaXMtPmN1cnJlbmN5ID0gTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJGlkLCRnZXREYXRhKTsKCQlpZiAoIWlzX251bGwoJG9yZGVyUmVmZXJlbmNlKSkKCQl7CgkJCSR0aGlzLT5vcmRlclJlZmVyZW5jZSA9ICRvcmRlclJlZmVyZW5jZTsKCQl9Cgl9CgkKCS8qKgoJICogRGVzdHJveSByZW1vdmVzIHRoZSByZWZlcmVuY2UgdG8gdGhlIHBhcmVudCBvcmRlciwgdGh1cyBicmVha2luZyB0aGUgY2lyY3VsYXIgcmVmZXJlbmNlIHRoYXQgY291bGQga2VlcCBib3RoIGZyb20gYmVpbmcgY29sbGVjdGVkLiAKCSAqIEluIFBIUCA8PSA1LjIsIGFuZCA1LjMrIHdoZW4gdXNpbmcgdGhlIG9sZCBnYXJiYWdlIGNvbGxlY3RvciwgZGVzdHJveSgpIG11c3QgYmUgY2FsbGVkIG1hbnVhbGx5IHRvIGZyZWUgdGhlIHVzZWQgbWVtb3J5LgoJICogSW4gVEhFT1JZIFBIUCA1LjQrIGNhbiBkbyB0aGlzIGF1dG9tYXRpY2FsbHkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koKQoJewoJCXVuc2V0KCR0aGlzLT5vcmRlclJlZmVyZW5jZSk7Cgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIGRiIHJlY29yZCBmb3IgdGhpcyBlbnRpdHkgZnJvbSB0aGUgZGF0YWJhc2UKCSAqIAoJICogQHNlZSBNTV9FbnRpdHk6OmdldERhdGEoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCWlmIChpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQkkc3FsID0gIlNFTEVDVCAqIGZyb20gIi5NTV9UQUJMRV9PUkRFUl9JVEVNUy4iIHdoZXJlIGlkPXskdGhpcy0+aWR9IjsKCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQlpZigkcmVzdWx0KSAKCQkJewoJCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCgkKCS8qKgoJICogUG9wdWxhdGUgdGhpcyBlbnRpdHkgYmFzZWQgb24gdGhlIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QgJGRhdGEsIHdoaWNoIGlzIGdlbmVyYWxseSByZXR1cm5lZCBmcm9tIGEgd3BkYiBkYXRhYmFzZSBxdWVyeQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJGRhdGEgQW4gb2JqZWN0IHdob3NlIGF0dHJpYnV0ZXMgcmVwcmVzZW50IHRoZSByb3cgaW4gdGhlIHVuZGVybHlpbmcgZGF0YWJhc2UgdGFibGUKCSAqIEBzZWUgTU1fRW50aXR5OjpzZXREYXRhKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5CgkJewoJCQkkdGhpcy0+aWQgPSAkZGF0YS0+aWQ7CgkJCSR0aGlzLT5vcmRlcklkID0gJGRhdGEtPm9yZGVyX2lkOwoJCQkkdGhpcy0+aXRlbVR5cGUgPSAkZGF0YS0+aXRlbV90eXBlOwoJCQkkdGhpcy0+aXRlbUlkID0gJGRhdGEtPml0ZW1faWQ7CgkJCSR0aGlzLT5kZXNjcmlwdGlvbiA9ICRkYXRhLT5kZXNjcmlwdGlvbjsKCQkJJHRoaXMtPmFtb3VudCA9ICRkYXRhLT5hbW91bnQ7CgkJCSR0aGlzLT5xdWFudGl0eSA9ICRkYXRhLT5xdWFudGl0eTsKCQkJJHRoaXMtPnRvdGFsID0gJGRhdGEtPnRvdGFsOwoJCQkkdGhpcy0+c3RhdHVzID0gJGRhdGEtPnN0YXR1czsKCQkJJHRoaXMtPnJlY3VycmluZ0Ftb3VudCA9ICRkYXRhLT5yZWN1cnJpbmdfYW1vdW50OwoJCQkkdGhpcy0+cmVjdXJyaW5nRGlzY291bnQgPSAkZGF0YS0+cmVjdXJyaW5nX2Rpc2NvdW50OwoJCQkkdGhpcy0+aXNSZWN1cnJpbmcgPSAoJGRhdGEtPmlzX3JlY3VycmluZyA9PSAxKT90cnVlOmZhbHNlOwoJCQkkdGhpcy0+aXNHaWZ0ID0gKCRkYXRhLT5pc19naWZ0ID09IDEpP3RydWU6ZmFsc2U7CgkJCSR0aGlzLT50cmlhbEFtb3VudCA9ICRkYXRhLT50cmlhbF9hbW91bnQ7CgkJCSR0aGlzLT50cmlhbER1cmF0aW9uID0gJGRhdGEtPnRyaWFsX2R1cmF0aW9uOwoJCQkkdGhpcy0+dHJpYWxGcmVxdWVuY3kgPSAkZGF0YS0+dHJpYWxfZnJlcXVlbmN5OwoJCQkkdGhpcy0+cmViaWxsUGVyaW9kID0gJGRhdGEtPnJlYmlsbF9wZXJpb2Q7CgkJCSR0aGlzLT5yZWJpbGxGcmVxdWVuY3kgPSAkZGF0YS0+cmViaWxsX2ZyZXF1ZW5jeTsKCQkJJHRoaXMtPm1heFJlYmlsbHMgPSAhaXNfbnVsbCgkZGF0YS0+bWF4X3JlYmlsbHMpPyRkYXRhLT5tYXhfcmViaWxsczowOwoJCQkkdGhpcy0+Y3VycmVuY3kgPSAhZW1wdHkoJGRhdGEtPmN1cnJlbmN5KT8kZGF0YS0+Y3VycmVuY3k6JHRoaXMtPmN1cnJlbmN5OwoJCQkkdGhpcy0+aXNUZXN0ID0gKCRkYXRhLT5pc190ZXN0ID09ICIxIik7CgkJCQoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSAKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJCgkvKioKCSAqIENvbW1pdCB0aGUgY29udGVudHMgb2YgdGhpcyBlbnRpdHkgdG8gdGhlIGRhdGFiYXNlCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IHJlcHJlc2VudGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqIEBzZWUgTU1fRW50aXR5Ojpjb21taXREYXRhKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkdGhpcy0+Y2FsY3VsYXRlVG90YWwoKTsgLy9tYWtlIHN1cmUgdGhlIHRvdGFsIGlzIGFjY3VyYXRlIAoJCSRpc1VwZGF0ZSA9IChpbnR2YWwoJHRoaXMtPmlkKSA+MCk/dHJ1ZTpmYWxzZTsKCQkKCQkkaXRlbURhdGEgPSBhcnJheSggICJvcmRlcl9pZCIgIAkJCT0+ICR0aGlzLT5vcmRlcklkLAoJCQkJCQkgICAgIml0ZW1fdHlwZSIgIAkJCT0+ICR0aGlzLT5pdGVtVHlwZSwKCQkJCQkJCSJpdGVtX2lkIiAgICAJCQk9PiAkdGhpcy0+aXRlbUlkLAoJCQkJCQkJImRlc2NyaXB0aW9uIgkJCT0+ICR0aGlzLT5kZXNjcmlwdGlvbiwKCQkJCQkJCSJhbW91bnQiCSAJCQk9PiAkdGhpcy0+YW1vdW50LAoJCQkJCQkJInF1YW50aXR5IgkgCQkJPT4gJHRoaXMtPnF1YW50aXR5LAoJCQkJCQkJInRvdGFsIgkJCQkJPT4gJHRoaXMtPnRvdGFsLAoJCQkJCQkJInN0YXR1cyIgICAgICAJCQk9PiAkdGhpcy0+c3RhdHVzLAoJCQkJCQkJInJlY3VycmluZ19hbW91bnQiICAJPT4gJHRoaXMtPnJlY3VycmluZ0Ftb3VudCwKCQkJCQkJCSJyZWN1cnJpbmdfZGlzY291bnQiICAJPT4gJHRoaXMtPnJlY3VycmluZ0Rpc2NvdW50LAoJCQkJCQkJImlzX3JlY3VycmluZyIJCQk9PiAoJHRoaXMtPmlzUmVjdXJyaW5nKT8xOjAsCgkJCQkJCQkiY3VycmVuY3kiCQkJCT0+ICR0aGlzLT5jdXJyZW5jeSwKCQkJCQkJCSJpc19naWZ0IgkJCQk9PiAoJHRoaXMtPmlzR2lmdCk/MTowLAoJCQkJCQkJImlzX3Rlc3QiCQkJCT0+ICgkdGhpcy0+aXNUZXN0KT8xOjAKCQkpOwoJCQoJCQoJCWlmICghZW1wdHkoJHRoaXMtPnRyaWFsRHVyYXRpb24pICYmICFlbXB0eSgkdGhpcy0+dHJpYWxGcmVxdWVuY3kpKQoJCXsKCQkJJGl0ZW1EYXRhWyd0cmlhbF9hbW91bnQnXSAgICA9ICR0aGlzLT50cmlhbEFtb3VudDsKCQkJJGl0ZW1EYXRhWyd0cmlhbF9kdXJhdGlvbiddICA9ICR0aGlzLT50cmlhbER1cmF0aW9uOwoJCQkkaXRlbURhdGFbJ3RyaWFsX2ZyZXF1ZW5jeSddID0gJHRoaXMtPnRyaWFsRnJlcXVlbmN5OwoJCX0KCQkKCQlpZiAoIWVtcHR5KCR0aGlzLT5yZWJpbGxQZXJpb2QpICYmICFlbXB0eSgkdGhpcy0+cmViaWxsRnJlcXVlbmN5KSkKCQl7CgkJCSRpdGVtRGF0YVsncmViaWxsX3BlcmlvZCddID0gJHRoaXMtPnJlYmlsbFBlcmlvZDsKCQkJJGl0ZW1EYXRhWydyZWJpbGxfZnJlcXVlbmN5J10gPSAkdGhpcy0+cmViaWxsRnJlcXVlbmN5OwoJCX0KCQkKCQlpZiAoJHRoaXMtPmlzUmVjdXJyaW5nKCkgJiYgKCR0aGlzLT5tYXhSZWJpbGxzPjApKQoJCXsKCQkJJGl0ZW1EYXRhWydtYXhfcmViaWxscyddID0gJHRoaXMtPm1heFJlYmlsbHM7CgkJfQoJCQoJCWlmICghJGlzVXBkYXRlKQoJCXsKCQkJLy90aGlzIGlzIGEgbmV3IHJlY29yZAoJCQkkcmVzdWx0ID0gJHdwZGItPmluc2VydChNTV9UQUJMRV9PUkRFUl9JVEVNUywkaXRlbURhdGEpOwoJCX0KCQllbHNlIAoJCXsKCQkJJHVwZGF0ZVdoZXJlID0gYXJyYXkoImlkIj0+JHRoaXMtPmlkKTsKCQkJJHJlc3VsdCA9ICR3cGRiLT51cGRhdGUoTU1fVEFCTEVfT1JERVJfSVRFTVMsJGl0ZW1EYXRhLCR1cGRhdGVXaGVyZSk7CgkJfQoJCQoJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byBjcmVhdGUgb3JkZXIgaXRlbTogZXJyb3IgPSAiLiR3cGRiLT5sYXN0X2Vycm9yLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJCgkJaWYgKCEkaXNVcGRhdGUpCgkJewoJCQkvL3JldHJpZXZlL3NldCB0aGUgbmV3bHkgYXNzaWduZWQgaWQgd2hlbiBjcmVhdGluZwoJCQkkdGhpcy0+aWQgPSAkd3BkYi0+aW5zZXJ0X2lkOwoJCQkKCQkJaWYgKCR0aGlzLT5pdGVtVHlwZSA9PSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfRElTQ09VTlQpCgkJCXsKCQkJCSRjb3Vwb24gPSBuZXcgTU1fQ291cG9uKCR0aGlzLT5pdGVtSWQpOwoJCQkJaWYgKCRjb3Vwb24tPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkvL3VwZGF0ZSB0aGUgY291cG9uIHN0YXRpc3RpY3MKCQkJCQkkb3JkZXJOZWVkc0Rlc3Ryb3lpbmcgPSBmYWxzZTsKCQkJCQlpZiAoIWVtcHR5KCR0aGlzLT5vcmRlclJlZmVyZW5jZSkgJiYgKCR0aGlzLT5vcmRlclJlZmVyZW5jZSBpbnN0YW5jZW9mIE1NX09yZGVyKSkKCQkJCQl7CgkJCQkJCSRvcmRlciA9ICR0aGlzLT5vcmRlclJlZmVyZW5jZTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCR0aGlzLT5vcmRlcklkKTsKCQkJCQkJJG9yZGVyTmVlZHNEZXN0cm95aW5nID0gdHJ1ZTsgLy90aGlzIGlzIGEgbmV3IG9iamVjdCwgc28gaXQgbXVzdCBiZSBkZXN0cm95ZWQgaW4gc2NvcGUgdG8gcHJldmVudCBtZW1vcnkgbGVha3MKCQkJCQl9CgkJCQkJCgkJCQkJaWYgKCRvcmRlci0+aXNWYWxpZCgpKSAvL2Fzc3VtZXMgdGhlIG9yZGVyIGNvbW1pdHRlZCBzdWNjZXNzZnVsbHkgcHJpb3IgdG8gY2FzY2FkaW5nIGRvd24gdG8gdGhlIGl0ZW0gY29tbWl0cwoJCQkJCXsKCQkJCQkJJGNvdXBvblVzZXIgPSAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJCQkJCWlmICgkY291cG9uVXNlci0+aXNWYWxpZCgpKQoJCQkJCQl7CgkJCQkJCQkkcHJvZHVjdEl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCQkJCQkJaWYgKGNvdW50KCRwcm9kdWN0SXRlbXMpID09IDEpCgkJCQkJCQl7CgkJCQkJCQkJLy9vbmx5IG9uZSBwcm9kdWN0LCBhc3N1bWUgaXQgd2FzIHZhbGlkYXRlZCB0aGF0IHRoZSBjb3Vwb24gY291bGQgYmUgYXBwbGllZCB0byB0aGlzIHByb2R1Y3QgcHJpb3IgdG8gdGhpcyBwb2ludAoJCQkJCQkJCSRwcm9kdWN0SXRlbSA9IHJlc2V0KCRwcm9kdWN0SXRlbXMpOwoJCQkJCQkJCU1NX0NvdXBvbjo6YWRkVXNlZCgkY291cG9uLT5nZXRDb3Vwb25Db2RlKCksJGNvdXBvblVzZXItPmdldElkKCksJHByb2R1Y3RJdGVtLT5nZXRJdGVtSWQoKSwgJHByb2R1Y3RJdGVtLT5nZXRJZCgpKTsKCQkJCQkJCX0KCQkJCQkJCWVsc2UgaWYgKCRjb3VudCgkcHJvZHVjdEl0ZW0pID4gMSkKCQkJCQkJCXsKCQkJCQkJCQkvL3RoZSBvcmRlciBoYXMgbW9yZSB0aGFuIG9uZSBwcm9kdWN0LCBmaW5kIHRoZSBwcm9kdWN0cyB0aGF0IHRoZSBjb3Vwb24gYXBwbGllcyB0bwoJCQkJCQkJCSR2YWxpZFByb2R1Y3RzID0gJGNvdXBvbi0+Z2V0UHJvZHVjdHMoKTsKCQkJCQkJCQlmb3JlYWNoICgkcHJvZHVjdEl0ZW1zIGFzICRhUHJvZHVjdEl0ZW0pCgkJCQkJCQkJewoJCQkJCQkJCQkkYVByb2R1Y3RJdGVtID0gbmV3IE1NX09yZGVySXRlbSgpOwoJCQkJCQkJCQlpZiAoaW5fYXJyYXkoJGFQcm9kdWN0SXRlbS0+Z2V0SXRlbUlkKCksJHZhbGlkUHJvZHVjdHMpKQoJCQkJCQkJCQl7CgkJCQkJCQkJCQlNTV9Db3Vwb246OmFkZFVzZWQoJGNvdXBvbi0+Z2V0Q291cG9uQ29kZSgpLCRjb3Vwb25Vc2VyLT5nZXRJZCgpLCRhUHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpLCAkYVByb2R1Y3RJdGVtLT5nZXRJZCgpKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQkKCQkJCQkJaWYgKCRvcmRlck5lZWRzRGVzdHJveWluZykKCQkJCQkJewoJCQkJCQkJJG9yZGVyLT5kZXN0cm95KCk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0gLy9lbmQgY291cG9uIGhhbmRsaW5nCgkJfSAvL2VuZCBlbnRpdHkgY3JlYXRpb24gaGFuZGxpbmcKCQkKCQkJCgkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgaHVtYW4tcmVhZGFibGUgYmlsbGluZyBkZXNjcmlwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBvcmRlciBpdGVtIChpLmUuICQ5IGV2ZXJ5IG1vbnRoLCAKCSAqIDE0LWRheSB0cmlhbCB0aGVuIDIgcGF5bWVudHMgb2YgJDEwKQoJICogCgkgKiBAcGFyYW0gQm9vbGVhbiAkaW5jbHVkZVRyaWFsRGVzY3JpcHRpb24gaW5kaWNhdGVzIHdoZXRoZXIgdGhlIHRyaWFsIGRlc2NyaXB0aW9uIHNob3VsZCBiZSBpbmNsdWRlZAoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBjb250YWluaW5nIGEgYmlsbGluZyBkZXNjcmlwdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBvcmRlciBpdGVtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRCaWxsaW5nRGVzY3JpcHRpb24oJGluY2x1ZGVUcmlhbERlc2NyaXB0aW9uPXRydWUpCgl7CgkJJGJpbGxpbmdEZXNjcmlwdGlvbiA9ICIiOwoJCSR0cmlhbERlc2NyaXB0aW9uID0gIiI7CgkJJHByaWNpbmdEZXNjcmlwdGlvbiA9ICIiOwoJCQoJCWlmKCFpc19udWxsKCR0aGlzLT5nZXRUcmlhbER1cmF0aW9uKCkpICYmICRpbmNsdWRlVHJpYWxEZXNjcmlwdGlvbikKCQl7CgkJCSR0cmlhbERlc2NyaXB0aW9uID0gJHRoaXMtPmdldFRyaWFsRHVyYXRpb24oKS4iICIuc3Vic3RyKCR0aGlzLT5nZXRUcmlhbEZyZXF1ZW5jeSgpLCAwLCAtMSkuIiAiOwoJCgkJCWlmKCR0aGlzLT5nZXRUcmlhbEFtb3VudCgpID09IDAuMDApCgkJCXsKCQkJCSR0cmlhbERlc2NyaXB0aW9uIC49ICJmcmVlIHRyaWFsIjsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSR0cmlhbERlc2NyaXB0aW9uIC49ICJ0cmlhbCBmb3IgPHNwYW4gc3R5bGU9J2ZvbnQtZmFtaWx5OmNvdXJpZXI7IGZvbnQtc2l6ZToxMnB4Oyc+Ii5fbW1mKCR0aGlzLT5nZXRUcmlhbEFtb3VudCgpLCAkdGhpcy0+Z2V0Q3VycmVuY3koKSkuIjwvc3Bhbj4iOwoJCQl9CgkJfQoJCgkJaWYoJHRoaXMtPmlzUmVjdXJyaW5nKCkpCgkJewoJCQkkcHJpY2luZ0Rlc2NyaXB0aW9uID0gIjxzcGFuIHN0eWxlPSdmb250LWZhbWlseTpjb3VyaWVyOyBmb250LXNpemU6MTJweDsnPiIuX21tZigkdGhpcy0+Z2V0UmVjdXJyaW5nQW1vdW50KCksICR0aGlzLT5nZXRDdXJyZW5jeSgpKS4iPC9zcGFuPiAiOwoJCQkKCQkJaWYoIWlzX251bGwoJHRoaXMtPmdldE1heFJlYmlsbHMoKSkgJiYgJHRoaXMtPmdldE1heFJlYmlsbHMoKSA+IDApCgkJCXsKCQkJCSR0bXBEZXNjcmlwdGlvbiA9ICR0aGlzLT5nZXRNYXhSZWJpbGxzKCkuIiAiOwoJCQkJJHRtcERlc2NyaXB0aW9uIC49ICgkdGhpcy0+Z2V0TWF4UmViaWxscygpID09IDEpID8gInBheW1lbnQiOiJwYXltZW50cyI7CgkJCQkkdG1wRGVzY3JpcHRpb24gLj0gIiBvZiAiLiRwcmljaW5nRGVzY3JpcHRpb247CgkKCQkJCSRwcmljaW5nRGVzY3JpcHRpb24gPSAkdG1wRGVzY3JpcHRpb247CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlpZihpbnR2YWwoJHRoaXMtPmdldFJlYmlsbFBlcmlvZCgpKSA9PSAxKQoJCQkJewoJCQkJCSRwcmljaW5nRGVzY3JpcHRpb24gLj0gImV2ZXJ5ICIuc3Vic3RyKCR0aGlzLT5nZXRSZWJpbGxGcmVxdWVuY3koKSwgMCwgLTEpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRwcmljaW5nRGVzY3JpcHRpb24gLj0gImV2ZXJ5ICIuJHRoaXMtPmdldFJlYmlsbFBlcmlvZCgpLiIgIi4kdGhpcy0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJHByaWNpbmdEZXNjcmlwdGlvbiA9ICI8c3BhbiBzdHlsZT0nZm9udC1mYW1pbHk6Y291cmllcjsgZm9udC1zaXplOjEycHg7Jz4iLl9tbWYoJHRoaXMtPmdldEFtb3VudCgpLCAkdGhpcy0+Z2V0Q3VycmVuY3koKSkuIjwvc3Bhbj4gIjsKCQl9CgkKCQlpZighZW1wdHkoJHRyaWFsRGVzY3JpcHRpb24pICYmICRpbmNsdWRlVHJpYWxEZXNjcmlwdGlvbikKCQl7CgkJCSRiaWxsaW5nRGVzY3JpcHRpb24gPSAkdHJpYWxEZXNjcmlwdGlvbi4iIHRoZW4gIjsKCQl9CgkKCQlyZXR1cm4gJGJpbGxpbmdEZXNjcmlwdGlvbi4kcHJpY2luZ0Rlc2NyaXB0aW9uOwoJfQoJCgkKCS8qKgoJICogY2FsY3VsYXRlVG90YWwgdXNlcyB0aGUgcGVyLWl0ZW0gYW1vdW50IGFuZCBxdWFudGl0eSwgYW5kIHdoZXRoZXIgdGhpcyBpcyBhIGRpc2NvdW50IG9yIHByb2R1Y3QgaXRlbSwgCgkgKiB0byBjYWxjdWxhdGUgdGhlIHRvdGFsCgkgKiAKCSAqIEByZXR1cm4gZmxvYXQgVGhlIHRvdGFsIGZvciB0aGlzIGxpbmUgaXRlbSwgcG9zaXRpdmUgZm9yIHB1cmNoYXNlLCBuZWdhdGl2ZSBmb3IgZGlzY291bnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNhbGN1bGF0ZVRvdGFsKCkKCXsKCQkkdGhpcy0+dG90YWwgPSAwOwoJCWlmICgoJHRoaXMtPml0ZW1UeXBlID09IE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9ESVNDT1VOVCkpCgkJewoJCQkkbXVsdGlwbGllciA9IC0xOwoJCQlpZiAoaXNfbnVsbCgkdGhpcy0+b3JkZXJSZWZlcmVuY2UpKQoJCQl7CgkJCQlyZXR1cm4gMDsgLy9UT0RPOiBSRUZBQ1RPUjogaG93IHRvIGNhdGNoIHRoYXQgdGhlIGNhbGxpbmcgY29kZSBkaWRudCBlc3RhYmxpc2ggYW4gb3JkZXIgcmVmZXJlbmNlIG9uIGl0ZW0gY3JlYXRpb24/CgkJCX0KCQkJCgkJCSRjb3Vwb24gPSBuZXcgTU1fQ291cG9uKCR0aGlzLT5pdGVtSWQpOwoJCQlpZiAoJGNvdXBvbi0+aXNWYWxpZCgpKQoJCQl7CQkJCQoJCQkJLy9jaGVjayBmb3IgZWxpZ2libGUgcHJvZHVjdHMKCQkJCSRvcmRlclByb2R1Y3RJdGVtcyA9ICR0aGlzLT5vcmRlclJlZmVyZW5jZS0+Z2V0UHJvZHVjdHMoKTsgLy9yZXR1cm5zIGFycmF5IG9mIG9yZGVyIGl0ZW1zIG9mIHR5cGUgcHJvZHVjdCwga2V5ZWQgYnkgdGhlIHByb2R1Y3QgaWQKCQkJCSRjb3Vwb24tPmdldEFzc29jUHJvZHVjdHMoKTsKCQkJCSRvcmRlclByb2R1Y3RJZHMgPSBhcnJheV9rZXlzKCRvcmRlclByb2R1Y3RJdGVtcyk7CgkJCQkkY291cG9uUHJvZHVjdElkcyA9ICRjb3Vwb24tPmdldFByb2R1Y3RzKCk7IC8vcmV0dXJucyBhcnJheSBvZiBwcm9kdWN0IGlkcwoJCQkJJGludGVyc2VjdGlvbiA9IGFycmF5X2ludGVyc2VjdCgkb3JkZXJQcm9kdWN0SWRzLCAkY291cG9uUHJvZHVjdElkcyk7CgkJCQkkcHJvZHVjdFJlc3RyaWN0aW9ucyA9IChjb3VudCgkY291cG9uUHJvZHVjdElkcykgPiAwKTsKCQkJCSRvcmRlckhhc1F1YWxpZnlpbmdQcm9kdWN0cyA9ICgoY291bnQoJGludGVyc2VjdGlvbikgPiAwKSB8fCAoY291bnQoJGNvdXBvblByb2R1Y3RJZHMpID09IDApKTsKCQkJCQoJCQkJaWYgKCRjb3Vwb24tPmdldENvdXBvblR5cGUoKSA9PSBNTV9Db3Vwb246OiRUWVBFX0RPTExBUikKCQkJCXsKCQkJCQkkdGhpcy0+YW1vdW50ID0gJGNvdXBvbi0+Z2V0Q291cG9uVmFsdWUoKTsKCQkJCQlpZiAoKCEkcHJvZHVjdFJlc3RyaWN0aW9ucykgfHwgKCgkcHJvZHVjdFJlc3RyaWN0aW9ucykgJiYgKCRvcmRlckhhc1F1YWxpZnlpbmdQcm9kdWN0cykpKQoJCQkJCXsKCQkJCQkJJHRoaXMtPnRvdGFsID0gYWJzKGZsb2F0dmFsKCR0aGlzLT5hbW91bnQpICogZmxvYXR2YWwoJHRoaXMtPnF1YW50aXR5KSkgKiAkbXVsdGlwbGllcjsKCQkJCQkJCgkJCQkJCWlmICgkY291cG9uLT5nZXRSZWN1cnJpbmdCaWxsaW5nU2V0dGluZygpID09ICJhbGwiKQoJCQkJCQl7CgkJCQkJCQkvL3RoaXMgY291bGQgYmUgaW50ZXJwcmV0ZWQgaW4gMiB3YXlzOiBhIGZpeGVkICQgYW1vdW50IG9mZiBwZXIgb3JkZXIgcmViaWxsLCBvciBhIGZpeGVkICRhbW91bnQgb2ZmIHBlciBpdGVtIHJlYmlsbAoJCQkJCQkJLy90aGlzIGltcGxlbWVudGF0aW9uIGFzc3VtZXMgdGhlICQgYW1vdW50IGlzIGRpc2NvdW50ZWQgZnJvbSB0aGUgb3JkZXIuIFNvIGZvciBpbnN0YW5jZSwgaWYgaW4gdGhlIGZ1dHVyZSBtdWx0aXBsZSBwcm9kdWN0cyBhcmUKCQkJCQkJCS8vYWxsb3dlZCwgYW5kIGEgJDEwIGNvdXBvbiBpcyBhcHBsaWVkIHRvIGFsbCByZWJpbGxzIG9mIGFuIG9yZGVyIGNvbnNpc3Rpbmcgb2YgMiByZWN1cnJpbmcgcHJvZHVjdHMsICQ1IHdpbGwgYmUgZGlzY291bnRlZCBmcm9tIGVhY2gsCgkJCQkJCQkvL21ha2luZyB0aGUgdG90YWwgZGlzY291bnQgJDEwLCBpbnN0ZWFkIG9mIGRpc2NvdW50aW5nICQxMCBmcm9tIGVhY2ggcHJvZHVjdCAod2hpY2ggd291bGQgbWFrZSB0aGUgdG90YWwgZGlzY291bnQgJDIwKQoJCQkJCQkJLy9UaGlzIHdpbGwgbm90IGJlIGFjdGl2ZSBpbml0aWFsbHksIGJ1dCB3cml0aW5nIHRoaXMgY29kZSBub3cgbWVhbnMgbGVzcyB3aWxsIGhhdmUgdG8gYmUgcmV0cm9maXR0ZWQuCgkJCQkJCQkvL0ltcG9ydGFudCBsaW1pdGF0aW9uOiBUaGlzIGNvZGUgYXNzdW1lcyB0aGF0IGNvdXBvbnMgYXJlIG5vdCBzdGFja2FibGUKCQkJCQkJCSRhcHBseVRvSWRzID0gKCEkcHJvZHVjdFJlc3RyaWN0aW9ucyk/JG9yZGVyUHJvZHVjdElkczokaW50ZXJzZWN0aW9uOwoJCQkJCQkJJG51bWJlck9mUXVhbGlmeWluZ1Byb2R1Y3RzID0gY291bnQoJGFwcGx5VG9JZHMpOwoJCQkJCQkJJGRpc2NvdW50U3BsaXQgPSByb3VuZCgoJGNvdXBvbi0+Z2V0Q291cG9uVmFsdWUoZmFsc2UpLyRudW1iZXJPZlF1YWxpZnlpbmdQcm9kdWN0cyksMik7CgkJCQkJCQkkcmVtYWluZGVyID0gJGNvdXBvbi0+Z2V0Q291cG9uVmFsdWUoZmFsc2UpIC0gKCRkaXNjb3VudFNwbGl0ICogJG51bWJlck9mUXVhbGlmeWluZ1Byb2R1Y3RzKTsKCQkJCQkJCSRpID0gMDsKCQkJCQkJCWZvcmVhY2ggKCRhcHBseVRvSWRzIGFzICRlbGlnaWJsZUlkKQoJCQkJCQkJewoJCQkJCQkJCSRlbGlnaWJsZVByb2R1Y3RJdGVtID0gJG9yZGVyUHJvZHVjdEl0ZW1zWyRlbGlnaWJsZUlkXTsKCQkJCQkJCQkkb3JkZXJQcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJGVsaWdpYmxlUHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpKTsKCQkJCQkJCQlpZiAoJG9yZGVyUHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJCQkJCXsKCQkJCQkJCQkJJG5ld1JlY3VycmluZ1ByaWNlID0gJGVsaWdpYmxlUHJvZHVjdEl0ZW0tPmdldFF1YW50aXR5KCkgKiAkb3JkZXJQcm9kdWN0LT5nZXRQcmljZShmYWxzZSk7CgkJCQkJCQkJCSRuZXdSZWN1cnJpbmdQcmljZSAtPSAkZGlzY291bnRTcGxpdDsKCQkJCQkJCQkJaWYgKCgrKyRpKSA9PSAkbnVtYmVyT2ZRdWFsaWZ5aW5nUHJvZHVjdHMpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRuZXdSZWN1cnJpbmdQcmljZS09ICRyZW1haW5kZXI7CgkJCQkJCQkJCX0KCQkJCQkJCQkJJG5ld1JlY3VycmluZ1ByaWNlID0gKCRuZXdSZWN1cnJpbmdQcmljZT49MCk/JG5ld1JlY3VycmluZ1ByaWNlOjAuMDA7CgkJCQkJCQkJCSRlbGlnaWJsZVByb2R1Y3RJdGVtLT5zZXRSZWN1cnJpbmdBbW91bnQoJG5ld1JlY3VycmluZ1ByaWNlKTsKCQkJCQkJCQkJJGVsaWdpYmxlUHJvZHVjdEl0ZW0tPnNldFJlY3VycmluZ0Rpc2NvdW50KCRkaXNjb3VudFNwbGl0KTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQllbHNlIGlmICgkY291cG9uLT5nZXRDb3Vwb25UeXBlKCkgPT0gTU1fQ291cG9uOjokVFlQRV9QRVJDRU5UQUdFKQoJCQkJewoJCQkJCS8vZ2V0IGZyYWMgZGlnaXRzIGJhc2VkIG9uIHRoZSBhY3RpdmUgY3VycmVuY3kKCQkJCQkkY3VycmVuY3lNZXRhZGF0YSA9IE1NX0N1cnJlbmN5VXRpbDo6Z2V0Q3VycmVuY3lNZXRhZGF0YSgkdGhpcy0+Y3VycmVuY3kpOwoJCQkJCSRmcmFjRGlnaXRzID0gaXNzZXQoJGN1cnJlbmN5TWV0YWRhdGFbJ2ludF9mcmFjX2RpZ2l0cyddKT9pbnR2YWwoJGN1cnJlbmN5TWV0YWRhdGFbJ2ludF9mcmFjX2RpZ2l0cyddKToyOwoJCQkJCQoJCQkJCSR0b3RhbFRvQXBwbHlDb3Vwb25BZ2FpbnN0ID0gMDsKCQkJCQkkYXBwbHlUb0lkcyA9IGFycmF5KCk7CgkJCQkJaWYgKCEkcHJvZHVjdFJlc3RyaWN0aW9ucykKCQkJCQl7CgkJCQkJCS8vd2l0aCBubyByZXN0cmljdGlvbnMsIHRoYXQgbWVhbnMgaXQgYXBwbGllZCB0byB0aGUgZW50aXJlIG9yZGVyLCBtaW51cyB0YXggYW5kIHNoaXBwaW5nCgkJCQkJCSRhcHBseVRvSWRzID0gJG9yZGVyUHJvZHVjdElkczsKCQkJCQl9CgkJCQkJZWxzZSBpZiAoJHByb2R1Y3RSZXN0cmljdGlvbnMgJiYgJG9yZGVySGFzUXVhbGlmeWluZ1Byb2R1Y3RzKSAvL3N0YXRlZCB0aGlzIHdheSBmb3IgcmVhZGFiaWxpdHkKCQkJCQl7CgkJCQkJCSRhcHBseVRvSWRzID0gJGludGVyc2VjdGlvbjsKCQkJCQl9CgkJCQkJCgkJCQkJZm9yZWFjaCAoJGFwcGx5VG9JZHMgYXMgJGVsaWdpYmxlSWQpCgkJCQkJewoJCQkJCQkkZWxpZ2libGVQcm9kdWN0SXRlbSA9ICRvcmRlclByb2R1Y3RJdGVtc1skZWxpZ2libGVJZF07CgkJCQkJCSR0b3RhbFRvQXBwbHlDb3Vwb25BZ2FpbnN0ICs9ICgkZWxpZ2libGVQcm9kdWN0SXRlbS0+Z2V0QW1vdW50KCkgKiAkZWxpZ2libGVQcm9kdWN0SXRlbS0+Z2V0UXVhbnRpdHkoKSk7CgkJCQkJCWlmICgkY291cG9uLT5nZXRSZWN1cnJpbmdCaWxsaW5nU2V0dGluZygpID09ICJhbGwiKQoJCQkJCQl7CgkJCQkJCQkkb3JkZXJQcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJGVsaWdpYmxlUHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpKTsKCQkJCQkJCWlmICgkb3JkZXJQcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCQkJCQl7CgkJCQkJCQkJJG9yaWdpbmFsUHJpY2UgPSAkb3JkZXJQcm9kdWN0LT5nZXRQcmljZShmYWxzZSk7CgkJCQkJCQkJJG5ld1JlY3VycmluZ1ByaWNlID0gJG9yaWdpbmFsUHJpY2UgLSAoJG9yaWdpbmFsUHJpY2UgKiBhYnMoZmxvYXR2YWwoJGNvdXBvbi0+Z2V0Q291cG9uVmFsdWUoZmFsc2UpKS8xMDApKTsKCQkJCQkJCQkKCQkJCQkJCQkkbmV3UmVjdXJyaW5nUHJpY2UgPSByb3VuZCgkbmV3UmVjdXJyaW5nUHJpY2UsJGZyYWNEaWdpdHMsUEhQX1JPVU5EX0hBTEZfRE9XTik7IAoJCQkJCQkJCQoJCQkJCQkJCSRuZXdSZWN1cnJpbmdQcmljZSA9ICgkbmV3UmVjdXJyaW5nUHJpY2U+PTApPyRuZXdSZWN1cnJpbmdQcmljZTowLjAwOwoJCQkJCQkJCSRlbGlnaWJsZVByb2R1Y3RJdGVtLT5zZXRSZWN1cnJpbmdBbW91bnQoJG5ld1JlY3VycmluZ1ByaWNlKTsKCQkJCQkJCQkkcmVjdXJyaW5nRGlzY291bnQgPSAkb3JpZ2luYWxQcmljZSAtICRuZXdSZWN1cnJpbmdQcmljZTsKCQkJCQkJCQkkZWxpZ2libGVQcm9kdWN0SXRlbS0+c2V0UmVjdXJyaW5nRGlzY291bnQoJHJlY3VycmluZ0Rpc2NvdW50KTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQkvL25vdyB0aGF0IHdlIGhhdmUgdGhlIGVsaWdpYmxlIGFtb3VudCwgYXBwbHkgdGhlIGRpc2NvdW50CgkJCQkJCgkJCQkJJHRoaXMtPnRvdGFsID0gcm91bmQoKGFicyhmbG9hdHZhbCgkdG90YWxUb0FwcGx5Q291cG9uQWdhaW5zdCkpICogYWJzKGZsb2F0dmFsKCRjb3Vwb24tPmdldENvdXBvblZhbHVlKGZhbHNlKSkvMTAwKSksJGZyYWNEaWdpdHMsUEhQX1JPVU5EX0hBTEZfRE9XTikgKiAkbXVsdGlwbGllcjsKCQkJCQkkdGhpcy0+YW1vdW50ID0gJHRoaXMtPnRvdGFsOwoJCQkJfQoJCQkJZWxzZSBpZigkY291cG9uLT5nZXRDb3Vwb25UeXBlKCkgPT0gTU1fQ291cG9uOjokVFlQRV9GUkVFKQoJCQkJewoJCQkJCSR0b3RhbFRvQXBwbHlDb3Vwb25BZ2FpbnN0ID0gMDsKCQkJCQkkYXBwbHlUb0lkcyA9IGFycmF5KCk7CgkJCQkJaWYgKCEkcHJvZHVjdFJlc3RyaWN0aW9ucykKCQkJCQl7CgkJCQkJCS8vd2l0aCBubyByZXN0cmljdGlvbnMsIHRoYXQgbWVhbnMgaXQgYXBwbGllZCB0byB0aGUgZW50aXJlIG9yZGVyLCBtaW51cyB0YXggYW5kIHNoaXBwaW5nCgkJCQkJCSRhcHBseVRvSWRzID0gJG9yZGVyUHJvZHVjdElkczsKCQkJCQl9CgkJCQkJZWxzZSBpZiAoJHByb2R1Y3RSZXN0cmljdGlvbnMgJiYgJG9yZGVySGFzUXVhbGlmeWluZ1Byb2R1Y3RzKSAvL3N0YXRlZCB0aGlzIHdheSBmb3IgcmVhZGFiaWxpdHkKCQkJCQl7CgkJCQkJCSRhcHBseVRvSWRzID0gJGludGVyc2VjdGlvbjsKCQkJCQl9CgkJCQkJCgkJCQkJZm9yZWFjaCAoJGFwcGx5VG9JZHMgYXMgJGVsaWdpYmxlSWQpCgkJCQkJewoJCQkJCQkkZWxpZ2libGVQcm9kdWN0SXRlbSA9ICRvcmRlclByb2R1Y3RJdGVtc1skZWxpZ2libGVJZF07CgkJCQkJCSR0b3RhbFRvQXBwbHlDb3Vwb25BZ2FpbnN0ICs9ICgkZWxpZ2libGVQcm9kdWN0SXRlbS0+Z2V0QW1vdW50KCkgKiAkZWxpZ2libGVQcm9kdWN0SXRlbS0+Z2V0UXVhbnRpdHkoKSk7CgkJCQkJCWlmICgkZWxpZ2libGVQcm9kdWN0SXRlbS0+aXNSZWN1cnJpbmcoKSkKCQkJCQkJewoJCQkJCQkJJG9yZGVyUHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRlbGlnaWJsZVByb2R1Y3RJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCQkJCQlpZiAoJG9yZGVyUHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJCQkJewoJCQkJCQkJCSRlbGlnaWJsZVByb2R1Y3RJdGVtLT5zZXRSZWN1cnJpbmdBbW91bnQoMC4wMCk7CgkJCQkJCQkJJGVsaWdpYmxlUHJvZHVjdEl0ZW0tPnNldFJlY3VycmluZ0Rpc2NvdW50KCRvcmRlclByb2R1Y3QtPmdldFByaWNlKGZhbHNlKSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJCgkJCQkJLy8gZnJlZSBvcmRlcnMgc2hvdWxkbid0IGJlIGNoYXJnZWQgc2hpcHBpbmcsIHNvIGluY2x1ZGUgc2hpcHBpbmcgaW4gdGhlIGRpc2NvdW50CgkJCQkJJHRvdGFsVG9BcHBseUNvdXBvbkFnYWluc3QgKz0gJHRoaXMtPm9yZGVyUmVmZXJlbmNlLT5nZXRTaGlwcGluZygpOwoJCQkJCQoJCQkJCS8vbm93IHRoYXQgd2UgaGF2ZSB0aGUgZWxpZ2libGUgYW1vdW50LCBhcHBseSB0aGUgZGlzY291bnQKCQkJCQkkdGhpcy0+dG90YWwgPSBhYnMoZmxvYXR2YWwoJHRvdGFsVG9BcHBseUNvdXBvbkFnYWluc3QpKSAqICRtdWx0aXBsaWVyOwoJCQkJCSR0aGlzLT5hbW91bnQgPSAkdGhpcy0+dG90YWw7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBpZiAoJHRoaXMtPml0ZW1UeXBlID09IE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9QUk9EVUNUKQoJCXsKCQkJJG11bHRpcGxpZXIgPSAxOwoJCQkkdGhpcy0+dG90YWwgPSBhYnMoZmxvYXR2YWwoJHRoaXMtPmFtb3VudCkgKiBmbG9hdHZhbCgkdGhpcy0+cXVhbnRpdHkpKSAqICRtdWx0aXBsaWVyOwoJCX0KCQllbHNlIGlmICgkdGhpcy0+aXRlbVR5cGUgPT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST1JBVElPTikKCQl7CgkJCSRtdWx0aXBsaWVyID0gLTE7CgkJCSR0aGlzLT50b3RhbCA9IGFicyhmbG9hdHZhbCgkdGhpcy0+YW1vdW50KSAqIGZsb2F0dmFsKCR0aGlzLT5xdWFudGl0eSkpICogJG11bHRpcGxpZXI7CgkJfQoJCQkKCQlyZXR1cm4gJHRoaXMtPnRvdGFsOwoJfQoJCgkvKioKCSAqIGdldE9yZGVySWQgcmV0dXJucyB0aGUgaWQgZm9yIHRoZSBvcmRlciB0aGlzIGl0ZW0gaXMgYXR0YWNoZWQgdG8KCSAqIAoJICogQHJldHVybiBTdHJpbmcgaWQgZm9yIHRoZSBvcmRlciB0aGlzIGl0ZW0gaXMgYXR0YWNoZWQgdG8KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldE9yZGVySWQoKQoJewoJCXJldHVybiAkdGhpcy0+b3JkZXJJZDsKCX0KCQoJLyoqCgkgKiBzZXRPcmRlcklkIFNldHMgdGhlIGlkIGZvciB0aGUgb3JkZXIgdGhpcyBpdGVtIGlzIGF0dGFjaGVkIHRvCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJG9yZGVySWQgVGhlIHRoZSBpZCBmb3IgdGhlIG9yZGVyIHRoaXMgaXRlbSBpcyBhdHRhY2hlZCB0bwoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0T3JkZXJJZCgkb3JkZXJJZCkKCXsKCQkkdGhpcy0+b3JkZXJJZCA9ICRvcmRlcklkOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgdHlwZSBvZiBpdGVtIHJlcHJlc2VudGVkLiBJZiB0aGUgb3JkZXIgaXRlbSByZXByZXNlbnRzIGEgcHJvZHVjdCBvciBhIGNvdXBvbiwgdGhlIGl0ZW0gdHlwZSBuZWVkcyB0byBoYXZlIGJlZW4gc2V0IGluIG9yZGVyIHRvIGFsbG93IE1lbWJlck1vdXNlIHRvIAoJICogcHJvcGVybHkgYWNjZXNzIHRoZSBwcm9kdWN0IG9yIGNvdXBvbiBpbmZvcm1hdGlvbiB0aGF0IHRoZSBpdGVtIHJlcHJlc2VudHMuIFRoZSBwb3NzaWJsZSB2YWx1ZXMgZm9yIGl0ZW0gdHlwZSBhcmUgcmVwcmVzZW50ZWQgYXMgY29uc3RhbnRzIGluIAoJICogTU1fT3JkZXJJdGVtCgkgKiAKCSAqIEByZXR1cm4gaW50IEFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSB0eXBlIG9mIGl0ZW0gdGhpcyBpcwoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SXRlbVR5cGUoKQoJewoJCXJldHVybiAkdGhpcy0+aXRlbVR5cGU7Cgl9CgkKCQoJLyoqCgkgKiBTZXRzIHRoZSB0eXBlIG9mIGl0ZW0gcmVwcmVzZW50ZWQuIElmIHRoZSBvcmRlciBpdGVtIHJlcHJlc2VudHMgYSBwcm9kdWN0IG9yIGEgY291cG9uLCB0aGUgaXRlbSB0eXBlIG11c3QgYmUgc2V0IGluIG9yZGVyIHRvIGFsbG93IE1lbWJlck1vdXNlIHRvIAoJICogcHJvcGVybHkgYWNjZXNzIHRoZSBwcm9kdWN0IG9yIGNvdXBvbiBpbmZvcm1hdGlvbiB0aGF0IHRoZSBpdGVtIHJlcHJlc2VudHMuIFRoZSBwb3NzaWJsZSB2YWx1ZXMgZm9yIGl0ZW0gdHlwZSBhcmUgcmVwcmVzZW50ZWQgYXMgY29uc3RhbnRzIGluIAoJICogTU1fT3JkZXJJdGVtCgkgKiAKCSAqIEBwYXJhbSBpbnQgJGl0ZW1UeXBlIEFuIGludGVnZXIgcmVwcmVzZW50aW5nIHRoZSB0eXBlIG9mIGl0ZW0gdGhpcyBpcwoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0SXRlbVR5cGUoJGl0ZW1UeXBlKQoJewoJCSR0aGlzLT5pdGVtVHlwZSA9ICRpdGVtVHlwZTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGlkIGZvciBhbnkgbGlua2VkIGl0ZW0uIElmIHRoaXMgb3JkZXIgaXRlbSBpcyBhIHByb2R1Y3QsIHRoZSBpdGVtIGlkIGlzIHNldCB0byB0aGUgcHJvZHVjdCBpZC4gSWYgdGhlIG9yZGVyIGl0ZW0gaXMgYSBjb3Vwb24sIHRoZSBpdGVtIGlkIGlzCgkgKiB0aGUgY291cG9uIGlkLiBJZiBhZGRpdGlvbmFsIG9yZGVyIGl0ZW0gdHlwZXMgYXJlIGFkZGVkIGluIHRoZSBmdXR1cmUsIHRoZSBpdGVtIGlkIGFsbG93cyBhIGxpbmsgdG8gYmUgbWFkZSB0byBhbm90aGVyIG9iamVjdCBmcm9tIHdoaWNoIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24KCSAqIGNhbiBiZSBvYnRhaW5lZC4KCSAqIAoJICogQHJldHVybiBpbnQgVGhlIGlkIG9mIGFueSBsaW5rZWQgaXRlbQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SXRlbUlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPml0ZW1JZDsKCX0KCQoJCgkvKioKCSAqIFNldHMgdGhlIGl0ZW0gaWQgZm9yIHRoZSBsaW5rZWQgaXRlbS4gSWYgdGhpcyBvcmRlciBpdGVtIGlzIGEgcHJvZHVjdCwgdGhlIGl0ZW0gaWQgaXMgc2V0IHRvIHRoZSBwcm9kdWN0IGlkLiBJZiB0aGUgb3JkZXIgaXRlbSBpcyBhIGNvdXBvbiwgdGhlIGl0ZW0gaWQgaXMKCSAqIHRoZSBjb3Vwb24gaWQuIElmIGFkZGl0aW9uYWwgb3JkZXIgaXRlbSB0eXBlcyBhcmUgYWRkZWQgaW4gdGhlIGZ1dHVyZSwgdGhlIGl0ZW0gaWQgYWxsb3dzIGEgbGluayB0byBiZSBtYWRlIHRvIGFub3RoZXIgb2JqZWN0IGZyb20gd2hpY2ggbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbgoJICogY2FuIGJlIG9idGFpbmVkLgoJICogCgkgKiBAcGFyYW0gaW50ICRpdGVtSWQgVGhlIGlkIG9mIGFueSBsaW5rZWQgaXRlbQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0SXRlbUlkKCRpdGVtSWQpCgl7CgkJJHRoaXMtPml0ZW1JZCA9ICRpdGVtSWQ7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBkZXNjcmlwdGlvbiBmb3IgdGhpcyBvcmRlciBpdGVtCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIGRlc2NyaXB0aW9uIG9mIHRoZSBpdGVtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXREZXNjcmlwdGlvbigpCgl7CgkJcmV0dXJuICR0aGlzLT5kZXNjcmlwdGlvbjsKCX0KCQoJCgkvKioKCSAqIEEgZGVzY3JpcHRpb24gb2YgdGhpcyBvcmRlciBpdGVtCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJGRlc2NyaXB0aW9uIFRoZSBvcmRlciBpdGVtIGRlc2NyaXB0aW9uCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXREZXNjcmlwdGlvbigkZGVzY3JpcHRpb24pCgl7CgkJJHRoaXMtPmRlc2NyaXB0aW9uID0gJGRlc2NyaXB0aW9uOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgdW5pdCBwcmljZSBvZiB0aGUgb3JkZXIgaXRlbSwgcHJpb3IgdG8gdGF4ZXMsIHNoaXBwaW5nLCBhbmQgZGlzY291bnRzCgkgKiAKCSAqIEByZXR1cm4gZmxvYXQgVGhlIHVuaXQgcHJpY2Ugb2YgdGhpcyBpdGVtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRBbW91bnQoKQoJewoJCXJldHVybiBudW1iZXJfZm9ybWF0KGZsb2F0dmFsKCR0aGlzLT5hbW91bnQpLE1NX0N1cnJlbmN5VXRpbDo6Z2V0UHJlY2lzaW9uRm9yQ3VycmVuY3koJHRoaXMtPmN1cnJlbmN5KSwnLicsJycpOwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgdW5pdCBwcmljZSBvZiB0aGUgb3JkZXIgaXRlbSwgcHJpb3IgdG8gdGF4ZXMsIHNoaXBwaW5nLCBhbmQgZGlzY291bnRzCgkgKiAKCSAqIEBwYXJhbSBmbG9hdCAkYW1vdW50IFRoZSB1bml0IHByaWNlIG9mIHRoaXMgaXRlbQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0QW1vdW50KCRhbW91bnQpCgl7CgkJJHRoaXMtPmFtb3VudCA9ICRhbW91bnQ7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBxdWFudGl0eSBvcmRlcmVkIGZvciB0aGlzIG9yZGVyIGl0ZW0KCSAqIAoJICogQHJldHVybiBpbnQgVGhlIHF1YW50aXR5IG9yZGVyZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFF1YW50aXR5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnF1YW50aXR5OwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgcXVhbnRpdHkgb3JkZXJlZCBmb3IgdGhpcyBvcmRlciBpdGVtCgkgKiAKCSAqIEBwYXJhbSBpbnQgVGhlIHF1YW50aXR5IG9yZGVyZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFF1YW50aXR5KCRxdWFudGl0eSkKCXsKCQkkdGhpcy0+cXVhbnRpdHkgPSAkcXVhbnRpdHk7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSB0b3RhbCwgYWZ0ZXIgdGF4ZXMsIHNoaXBwaW5nLCBhbmQgZGlzY291bnRzCgkgKiAKCSAqIEByZXR1cm4gZmxvYXQgVGhlIHRvdGFsIGZvciB0aGUgb3JkZXIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFRvdGFsKCkKCXsKCQlyZXR1cm4gbnVtYmVyX2Zvcm1hdChmbG9hdHZhbCgkdGhpcy0+dG90YWwpLE1NX0N1cnJlbmN5VXRpbDo6Z2V0UHJlY2lzaW9uRm9yQ3VycmVuY3koJHRoaXMtPmN1cnJlbmN5KSwnLicsJycpOwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgdG90YWwsIGFmdGVyIHRheGVzLCBzaGlwcGluZywgYW5kIGRpc2NvdW50cwoJICogCgkgKiBAcGFyYW0gZmxvYXQgJHRvdGFsIFRoZSB0b3RhbCBmb3IgdGhlIG9yZGVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRUb3RhbCgkdG90YWwpCgl7CgkJJHRoaXMtPnRvdGFsID0gJHRvdGFsOwoJfQoJCgkKCS8qKgoJICogU2V0IHRoZSBzdGF0dXMgb2YgdGhpcyBvcmRlciBpdGVtLiBUaGlzIGlzIG9uZSBvZiB0aGUgc3RhdGljIGNvbnN0YW50cyBpbiBNTV9PcmRlckl0ZW0KCSAqIAoJICogQHBhcmFtIGludCAkc3RhdHVzIFRoZSBzdGF0dXMgb2YgdGhpcyBvcmRlciBpdGVtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRTdGF0dXMoJHN0YXR1cykKCXsKCQkkdGhpcy0+c3RhdHVzID0gJHN0YXR1czsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIHN0YXR1cyBvZiB0aGlzIG9yZGVyIGl0ZW0uIFRoaXMgaXMgb25lIG9mIHRoZSBzdGF0aWMgY29uc3RhbnRzIGluIE1NX09yZGVySXRlbQoJICogCgkgKiBAcmV0dXJuIGludCBUaGUgc3RhdHVzIG9mIHRoaXMgb3JkZXIgaXRlbQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdHVzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnN0YXR1czsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmVjdXJyaW5nQW1vdW50KCRyZWN1cnJpbmdBbW91bnQpCgl7CgkJJHRoaXMtPnJlY3VycmluZ0Ftb3VudCA9ICRyZWN1cnJpbmdBbW91bnQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlY3VycmluZ0Ftb3VudCgpCgl7CgkJcmV0dXJuICR0aGlzLT5yZWN1cnJpbmdBbW91bnQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFJlY3VycmluZ0Rpc2NvdW50KCRyZWN1cnJpbmdEaXNjb3VudCkKCXsKCQkkdGhpcy0+cmVjdXJyaW5nRGlzY291bnQgPSAkcmVjdXJyaW5nRGlzY291bnQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlY3VycmluZ0Rpc2NvdW50KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnJlY3VycmluZ0Rpc2NvdW50OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRJc1JlY3VycmluZygkaXNSZWN1cnJpbmcpCgl7CgkJJHRoaXMtPmlzUmVjdXJyaW5nID0gKGJvb2wpJGlzUmVjdXJyaW5nOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpc1JlY3VycmluZygpCgl7CgkJcmV0dXJuICR0aGlzLT5pc1JlY3VycmluZzsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0SXNHaWZ0KCRpc0dpZnQpCgl7CgkJJHRoaXMtPmlzR2lmdCA9IChib29sKSRpc0dpZnQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGlzR2lmdCgpCgl7CgkJcmV0dXJuICR0aGlzLT5pc0dpZnQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFRyaWFsRnJlcXVlbmN5KCR0cmlhbEZyZXF1ZW5jeSkKCXsKCQkkdGhpcy0+dHJpYWxGcmVxdWVuY3kgPSAkdHJpYWxGcmVxdWVuY3k7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRyaWFsRnJlcXVlbmN5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRyaWFsRnJlcXVlbmN5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRUcmlhbER1cmF0aW9uKCR0cmlhbER1cmF0aW9uKQoJewoJCSR0aGlzLT50cmlhbER1cmF0aW9uID0gJHRyaWFsRHVyYXRpb247Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRyaWFsRHVyYXRpb24oKQoJewoJCXJldHVybiAkdGhpcy0+dHJpYWxEdXJhdGlvbjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmViaWxsRnJlcXVlbmN5KCRyZWJpbGxGcmVxdWVuY3kpCgl7CgkJJHRoaXMtPnJlYmlsbEZyZXF1ZW5jeSA9ICRyZWJpbGxGcmVxdWVuY3k7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlYmlsbEZyZXF1ZW5jeSgpCgl7CgkJcmV0dXJuICR0aGlzLT5yZWJpbGxGcmVxdWVuY3k7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFJlYmlsbFBlcmlvZCgkcmViaWxsUGVyaW9kKQoJewoJCSR0aGlzLT5yZWJpbGxQZXJpb2QgPSAkcmViaWxsUGVyaW9kOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZWJpbGxQZXJpb2QoKQoJewoJCXJldHVybiAkdGhpcy0+cmViaWxsUGVyaW9kOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRNYXhSZWJpbGxzKCRtYXhSZWJpbGxzKQoJewoJCSR0aGlzLT5tYXhSZWJpbGxzID0gJG1heFJlYmlsbHM7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldE1heFJlYmlsbHMoKQoJewoJCXJldHVybiAkdGhpcy0+bWF4UmViaWxsczsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VHJpYWxBbW91bnQoJHRyaWFsQW1vdW50KQoJewoJCSR0aGlzLT50cmlhbEFtb3VudCA9ICR0cmlhbEFtb3VudDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VHJpYWxBbW91bnQoKQoJewoJCXJldHVybiBudW1iZXJfZm9ybWF0KGZsb2F0dmFsKCR0aGlzLT50cmlhbEFtb3VudCksTU1fQ3VycmVuY3lVdGlsOjpnZXRQcmVjaXNpb25Gb3JDdXJyZW5jeSgkdGhpcy0+Y3VycmVuY3kpLCcuJywnJyk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldEN1cnJlbmN5KCRjdXJyZW5jeSkKCXsKCQkkdGhpcy0+Y3VycmVuY3kgPSAkY3VycmVuY3k7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEN1cnJlbmN5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmN1cnJlbmN5OwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0SXNUZXN0KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmlzVGVzdDsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIHNldElzVGVzdCgkaXNUZXN0KQoJewoJCSR0aGlzLT5pc1Rlc3QgPSAkaXNUZXN0OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBoYXNUcmlhbFBlcmlvZCgpCgl7CgkJcmV0dXJuICghZW1wdHkoJHRoaXMtPnRyaWFsRHVyYXRpb24pKTsKCX0KCQp9Cg==', 0, '2018-11-21 06:38:53'),
(28, 'connectionutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0Nvbm5lY3Rpb25VdGlscwp7IAkKCQoJLyoqCgkgKiBDbG9zZXMgYSBjb25uZWN0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgdGVybWluYXRpbmcgYSBzY3JpcHQncyBvcGVyYXRpb24uIFRoaXMgaXMgdXNlZnVsIGlmIHlvdSBuZWVkIHRvCgkgKiByZXNwb25kIGltbWVkaWF0ZWx5IHRvIGEgcmVxdWVzdC4KCSAqIAoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCBDb250ZW50IHRoYXQgc2hvdWxkIChpbiB0aGVvcnkpIGJlIG91dHB1dHRlZCBiZWZvcmUgdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkIAoJICogCgkgKi8KIAlwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNsb3NlQ29ubmVjdGlvbkFuZENvbnRpbnVlUHJvY2Vzc2luZygkY29udGVudD0iIikKCXsKCQlAb2JfZW5kX2NsZWFuKCk7CgkJaGVhZGVyKCJDb25uZWN0aW9uOiBjbG9zZSIpOwoJCWlnbm9yZV91c2VyX2Fib3J0KCk7IC8vIG9wdGlvbmFsCgkJCgkJaWYgKCFlbXB0eSgkY29udGVudCkpCgkJewoJCQlvYl9zdGFydCgpOwoJCQllY2hvICRjb250ZW50OwoJCQkkc2l6ZSA9IG9iX2dldF9sZW5ndGgoKTsKCQkJaGVhZGVyKCJDb250ZW50LUxlbmd0aDogeyRzaXplfSIpOwoJCX0KCQllbHNlIAoJCXsKCQkJaGVhZGVyKCJDb250ZW50LUxlbmd0aDogMCIpOwoJCX0KCQlAb2JfZW5kX2ZsdXNoKCk7IC8vIFN0cmFuZ2UgYmVoYXZpb3VyLCB3aWxsIG5vdCB3b3JrCgkJQGZsdXNoKCk7ICAgICAgICAvLyBVbmxlc3MgYm90aCBhcmUgY2FsbGVkIQoJfQp9Cg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(29, 'reportbase', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KYWJzdHJhY3QgY2xhc3MgTU1fUmVwb3J0QmFzZSBpbXBsZW1lbnRzIE1NX1JlcG9ydEJhc2VJbnRlcmZhY2UKewoJCglwcm90ZWN0ZWQgJHRva2VuID0gIiI7CgkKCXByb3RlY3RlZCAkamF2YXNjcmlwdERlcGVuZGVuY2llcyA9IGFycmF5KCk7Cglwcm90ZWN0ZWQgJGNzc0RlcGVuZGVuY2llcyA9IGFycmF5KCk7CgkKCXByb3RlY3RlZCAkdmlzdWFsRWxlbWVudHMgPSBhcnJheSgpOwoJCglwcm90ZWN0ZWQgJGZvcm1UZW1wbGF0ZSA9ICIiOwoJCglwdWJsaWMgc3RhdGljICREQVRBX1NUQVRVU19MT0FESU5HID0gImxvYWRpbmciOwoJcHVibGljIHN0YXRpYyAkREFUQV9TVEFUVVNfTE9BREVEICA9ICJsb2FkZWQiOwoJCgkvL2RlZmF1bHRzCglwdWJsaWMgc3RhdGljICRERUZBVUxUX0RBVEVfTk9XID0gIm1tLXJlcG9ydC1kZWZhdWx0LWRhdGUtbm93IjsKCXB1YmxpYyBzdGF0aWMgJERFRkFVTFRfREFURV8zTU9OVEhTX0FHTyA9ICJtbS1yZXBvcnQtZGVmYXVsdC1kYXRlLTNtb24tcGFzdCI7CgkJCgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkYXV0b0VucXVldWVEZXBlbmRlbmNpZXM9dHJ1ZSkKCXsJCgkJJHRoaXMtPmZvcm1UZW1wbGF0ZSA9IE1NX1RFTVBMQVRFX1JFUE9SVElORy5ESVJFQ1RPUllfU0VQQVJBVE9SLiJmb3JtIi5ESVJFQ1RPUllfU0VQQVJBVE9SLiJyZXBvcnRmb3JtLmh0bWwucGhwIjsKCQlpZiAoaXNfYXJyYXkoJHRoaXMtPnZpc3VhbEVsZW1lbnRzKSAmJiAoY291bnQoJHRoaXMtPnZpc3VhbEVsZW1lbnRzKT4wKSkKCQl7CgkJCWlmICgkYXV0b0VucXVldWVEZXBlbmRlbmNpZXMpCgkJCXsKCQkJCWZvcmVhY2ggKCR0aGlzLT52aXN1YWxFbGVtZW50cyBhcyAkZWxlbWVudCkKCQkJCXsKCQkJCQkkZGVwZW5kZW5jaWVzID0gY2FsbF91c2VyX2Z1bmMoYXJyYXkoJGVsZW1lbnQsImdldERlcGVuZGVuY2llcyIpLCRlbGVtZW50KTsKCQkJCQlpZiAoaXNfYXJyYXkoJGRlcGVuZGVuY2llcykgJiYgKGNvdW50KCRkZXBlbmRlbmNpZXMpPjEpKQoJCQkJCXsKCQkJCQkJJHRoaXMtPnJlZ2lzdGVyRGVwZW5kZW5jaWVzKCRkZXBlbmRlbmNpZXMpOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQl9CgoJCQkkdGhpcy0+ZW5xdWV1ZURlcGVuZGVuY2llcygpOwoJCX0KCQkKCQkvL3doZW4gdG8gcmVhcCBleHBpcmVkIHJlcG9ydGluZyBjYWNoZSBlbnRyaWVzIGlzIGEgZGlmZmljdWx0IGRlY2lzaW9uLCBiZWNhdXNlIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoYXQgc3RhbGUgZGF0YSBpcwoJCS8vZWplY3RlZCBmcm9tIHRoZSBjYWNoZSwgYnV0IHdlIGRvbid0IHdhbnQgdG8gaXNzdWUgdG9vIG1hbnkgc3VwZXJmbHVvdXMgZGVsZXRlIHF1ZXJpZXMgZHVlIHRvIHRoZSBvdmVyaGVhZCBpbmN1cnJlZC4KCQkvL3RoaXMgbWFrZXMgdGhlIHJlcG9ydCBjbGFzcyBjb25zdHJ1Y3RvciBhIGdvb2QgcGxhY2UgZm9yIGl0LCBiZWNhdXNlIHdlIGRvbid0IHJlYWxseSBjYXJlIGlmIGNhY2hlIGRhdGEgaXMgZXhwaXJlZCB1bnRpbCBpdAoJCS8vaXMgdGltZSB0byBnZW5lcmF0ZSBhIHJlcG9ydAoJCU1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OmNsZWFyRGF0YUNhY2hlKHRydWUpOwoJfQoJCgkvKioKCSAqIENyZWF0ZXMgYSBkaXYgdXNpbmcgJGVsZW1lbnRJZGVudGlmaWVyIGFzIHRoZSBlbGVtZW50IGlkIGFuZCBjb250YWluaW5nCgkgKiB0aGUgdmlzdWFsIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoICRlbGVtZW50SWRlbnRpZmllcgoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRlbGVtZW50SWRlbnRpZmllciBUaGUgaWRlbnRpZmllciBvZiB0aGUgdmlzdWFsIGVsZW1lbnQgdGhlIGRpdiBpcyBtZWFudCB0byBjb250YWluCgkgKiBAcGFyYW0gYXJyYXkgJHBhcmFtcyBBbiBhcnJheSBvZiB0aGUgcGFyYW1ldGVycyB0byBiZSB1c2VkIGluIHJlbmRlcmluZyB0aGUgdmlzdWFsIGVsZW1lbnQKCSAqIEBwYXJhbSBzdHJpbmcgJHdpZHRoIFRoZSB3ZWlnaHQgb2YgdGhlIGVsZW1lbnQgY29udGFpbmVyLiBUaGlzIGlzIGluc2VydGVkIGRpcmVjdGx5IGludG8gdGhlIHN0eWxlIHRhZywgc28gY2FuIGluY2x1ZGUgcHggb3IgZW0KCSAqIEBwYXJhbSBzdHJpbmcgJGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBlbGVtZW50IGNvbnRhaW5lci4gVGhpcyBpcyBpbnNlcnRlZCBkaXJlY3RseSBpbnRvIHRoZSBzdHlsZSB0YWcsIHNvIGNhbiBpbmNsdWRlIHB4IG9yIGVtCgkgKiBAcGFyYW0gYXJyYXkgJGF0dHJpYnV0ZXMgQW4gYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJlZCBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSB0YWcgb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50CgkgKiBAcGFyYW0gYXJyYXkgJGRpcmVjdGl2ZXMgQW4gYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJlZCBkaXJlY3RpdmVzIHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIHZpc3VhbCBlbGVtZW50IChub3QgcGFyYW1ldGVycywgaS5lLiBzb3J0aW5nIGFuZCBwYWdpbmF0aW9uIHNldHRpbmdzKQoJICogQHBhcmFtIGJvb2xlYW4gJGlzU3RhdGljIFdoZXRoZXIgb3Igbm90IHRoaXMgZWxlbWVudCBzaG91bGQgcmVhY3QgdG8gcGFyYW1ldGVyIGNoYW5nZXMgYWZ0ZXIgaXRzIGluaXRpYWwgcmVuZGVyaW5nCgkgKiAKCSAqIEByZXR1cm4gc3RyaW5nIFRoZSBodG1sL2Nzcy9qcwoJICovCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXM9IiIsICR3aWR0aD0iIiwkaGVpZ2h0PSIiLCRhdHRyaWJ1dGVzPSIiLCAkZGlyZWN0aXZlcz1hcnJheSgpLCRpc1N0YXRpYz1mYWxzZSkKCXsKCQkkb3V0cHV0ID0gIiI7CgkJJGF0dHJpYlN0cmluZyA9ICIiOwoJCSRzdHlsZSA9ICIiOwoJCQoJCS8vY2FsbCBtZXRob2QgdG8gZ2V0IGF0dHJpYnV0ZXMKCQkkYXR0cmlidXRlcyA9ICR0aGlzLT5jYWxjdWxhdGVFbGVtZW50QXR0cmlidXRlcygkd2lkdGgsJGhlaWdodCwkYXR0cmlidXRlcyx0cnVlLCRpc1N0YXRpYyk7CgkJCgkJJHJlbmRlclJlc3BvbnNlID0gJHRoaXMtPnJlbmRlclZpc3VhbEVsZW1lbnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzRXJyb3IoJHJlbmRlclJlc3BvbnNlKSkKCQl7CgkJCSRhdHRyaWJTdHJpbmcgPSAoIWVtcHR5KCRhdHRyaWJ1dGVzWydhdHRyaWJ1dGVzJ10pKT8kYXR0cmlidXRlc1snYXR0cmlidXRlcyddOiIiOwoJCQkkc3R5bGUgPSAoIWVtcHR5KCRhdHRyaWJ1dGVzWydzdHlsZSddKSk/JGF0dHJpYnV0ZXNbJ3N0eWxlJ106IiI7CgkJfQoJCQoJCWlmIChNTV9SZXBvcnRSZXNwb25zZTo6aXNTdWNjZXNzKCRyZW5kZXJSZXNwb25zZSkpCgkJewoJCQkkZGF0YVN0YXR1cyA9IHNlbGY6OiREQVRBX1NUQVRVU19MT0FERUQ7CgkJCSRvdXRwdXQgLj0gIjxkaXYgaWQ9J3skZWxlbWVudElkZW50aWZpZXJ9JyBkYXRhLXN0YXR1cz0neyRkYXRhU3RhdHVzfScgeyRhdHRyaWJTdHJpbmd9IHskc3R5bGV9PlxuIjsKCQkJJG91dHB1dCAuPSAkcmVuZGVyUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCSRvdXRwdXQgLj0gIjwvZGl2PlxuIjsKCQkJCgkJCSRwYXJhbXNKc29uID0ganNvbl9lbmNvZGUoJHBhcmFtcyk7CgkJCSRvdXRwdXQuPSAiPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPm1tanMucHVzaFBhcmFtcygneyRlbGVtZW50SWRlbnRpZmllcn0nLHskcGFyYW1zSnNvbn0pOzwvc2NyaXB0PlxuIjsKCQl9CgkJZWxzZSBpZiAoTU1fUmVwb3J0UmVzcG9uc2U6OmlzTm90UmVhZHkoJHJlbmRlclJlc3BvbnNlKSkKCQl7CgkJCSRkYXRhU3RhdHVzID0gc2VsZjo6JERBVEFfU1RBVFVTX0xPQURJTkc7CgkJCSRvdXRwdXQgLj0gIjxkaXYgaWQ9J3skZWxlbWVudElkZW50aWZpZXJ9JyBkYXRhLXN0YXR1cz0neyRkYXRhU3RhdHVzfScgeyRhdHRyaWJTdHJpbmd9IHskc3R5bGV9PlxuIjsKCQkJJG91dHB1dCAuPSAiPC9kaXY+XG4iOwoJCQkKCQkJJHBhcmFtc0pzb24gPSBqc29uX2VuY29kZSgkcGFyYW1zKTsKCQkJJG91dHB1dC49ICI8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+bW1qcy5wdXNoUGFyYW1zKCd7JGVsZW1lbnRJZGVudGlmaWVyfScseyRwYXJhbXNKc29ufSk7PC9zY3JpcHQ+XG4iOwoJCX0KCQllbHNlIGlmIChNTV9SZXBvcnRSZXNwb25zZTo6aGFzTm9EYXRhKCRyZW5kZXJSZXNwb25zZSkpCgkJewoJCQkkZGF0YVN0YXR1cyA9IHNlbGY6OiREQVRBX1NUQVRVU19MT0FERUQ7CgkJCSRvdXRwdXQgLj0gIjxkaXYgaWQ9J3skZWxlbWVudElkZW50aWZpZXJ9JyBjbGFzcz0nbW0tbm8tZGF0YS1wbGFjZWhvbGRlcicgZGF0YS1zdGF0dXM9J3skZGF0YVN0YXR1c30nIHskYXR0cmliU3RyaW5nfSB7JHN0eWxlfT5cbiI7CgkJCSRvdXRwdXQgLj0gIjxwPjxzcGFuPjxpIGNsYXNzPSdmYSBmYS13YXJuaW5nJz48L2k+IDxzdHJvbmc+SGV5IHRoZXJlITwvc3Ryb25nPjwvc3Bhbj4gIFlvdSBkb24ndCBoYXZlIGFueSByZXBvcnRpbmcgZGF0YSB5ZXQsIGJ1dCBhcyBzb29uIGFzIHlvdSBnZXQgc29tZSBtZW1iZXJzIHdlJ2xsIHNob3cgeW91IHNvbWUgY29vbCBncmFwaHMgaGVyZSE8L3A+XG4iOwoJCQkkb3V0cHV0IC49ICI8L2Rpdj5cbiI7CgkJfQoJCWVsc2UKCQl7CgkJCS8vZXJyb3IKCQkJJGRhdGFTdGF0dXMgPSBzZWxmOjokREFUQV9TVEFUVVNfTE9BREVEOwoJCQkkb3V0cHV0IC49ICI8ZGl2IGlkPSd7JGVsZW1lbnRJZGVudGlmaWVyfScgY2xhc3M9J21tLW5vLWRhdGEtcGxhY2Vob2xkZXInIGRhdGEtc3RhdHVzPSd7JGRhdGFTdGF0dXN9JyB7JGF0dHJpYlN0cmluZ30geyRzdHlsZX0+XG4iOwoJCQkkb3V0cHV0IC49ICI8cD48c3Bhbj48aSBjbGFzcz0nZmEgZmEtZXJyb3InPjwvaT4gPHN0cm9uZz5IZXkgdGhlcmUhPC9zdHJvbmc+PC9zcGFuPiAgVGhlcmUgd2FzIGFuIGVycm9yIGdlbmVyYXRpbmcgdGhpcyBncmFwaCEgUGxlYXNlIHRyeSBhZ2FpbiwgYW5kIGlmIHRoZSBlcnJvciBjb250aW51ZXMsIGNvbnRhY3QgTWVtYmVyTW91c2Ugc3VwcG9ydDwvcD5cbiI7CgkJCSRvdXRwdXQgLj0gIjwvZGl2PlxuIjsKCQl9CgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgkKCQoJLyoqCgkgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIGNyZWF0aW5nIGEgdmlzdWFsIGVsZW1lbnQgdGhhdCBkb2Vzbid0IHJlc3BvbmQgdG8gcGFnZSBhY3Rpb25zIGFmdGVyIHRoZSBmaXJzdCByZW5kZXJpbmcKCSAqIEBzZWUgTU1fUmVwb3J0QmFzZTo6Y3JlYXRlVmlzdWFsRWxlbWVudAoJICovCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlU3RhdGljVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXM9IiIsICR3aWR0aD0iIiwkaGVpZ2h0PSIiLCRhdHRyaWJ1dGVzPSIiLCAkZGlyZWN0aXZlcz1hcnJheSgpKQoJewoJCXJldHVybiAkdGhpcy0+Y3JlYXRlVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsJHBhcmFtcywkd2lkdGgsJGhlaWdodCwkYXR0cmlidXRlcywkZGlyZWN0aXZlcyx0cnVlKTsKCX0KCQoJCgkvKioKCSAqIENyZWF0ZXMgYSBkaXYgdXNpbmcgJGVsZW1lbnRJZGVudGlmaWVyIGFzIHRoZSBlbGVtZW50IGlkLCB0byBzZXJ2ZSBhcyBhIHBsYWNlaG9sZGVyIGZvciBhIHZpc3VhbCBlbGVtZW50IHRvIGJlIGxvYWRlZCBpbiB0aGUgCgkgKiBmdXR1cmUuCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJGVsZW1lbnRJZGVudGlmaWVyIFRoZSBpZGVudGlmaWVyIG9mIHRoZSB2aXN1YWwgZWxlbWVudCB0aGUgZGl2IGlzIG1lYW50IHRvIGNvbnRhaW4KCSAqIEBwYXJhbSBzdHJpbmcgJHdpZHRoIFRoZSB3ZWlnaHQgb2YgdGhlIGVsZW1lbnQgY29udGFpbmVyLiBUaGlzIGlzIGluc2VydGVkIGRpcmVjdGx5IGludG8gdGhlIHN0eWxlIHRhZywgc28gY2FuIGluY2x1ZGUgcHggb3IgZW0KCSAqIEBwYXJhbSBzdHJpbmcgJGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBlbGVtZW50IGNvbnRhaW5lci4gVGhpcyBpcyBpbnNlcnRlZCBkaXJlY3RseSBpbnRvIHRoZSBzdHlsZSB0YWcsIHNvIGNhbiBpbmNsdWRlIHB4IG9yIGVtCgkgKiBAcGFyYW0gYXJyYXkgJGF0dHJpYnV0ZXMgQW4gYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJlZCBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSB0YWcgb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50CgkgKiBAcGFyYW0gYXJyYXkgJGRpcmVjdGl2ZXMgQW4gYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJlZCBkaXJlY3RpdmVzIHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIHZpc3VhbCBlbGVtZW50IChub3QgcGFyYW1ldGVycywgaS5lLiBzb3J0aW5nIGFuZCBwYWdpbmF0aW9uIHNldHRpbmdzKQoJICogQHBhcmFtIHN0cmluZyAkdmlzaWJsZSBXaGV0aGVyIG9yIG5vdCB0aGUgZGl2IHNob3VsZCBiZSB2aXNpYmxlCgkgKiAKCSAqIEByZXR1cm4gc3RyaW5nIFRoZSBodG1sL2Nzcy9qcwoJICovCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlVmlzdWFsRWxlbWVudFBsYWNlaG9sZGVyKCRlbGVtZW50SWRlbnRpZmllciwgJHdpZHRoPSIiLCAkaGVpZ2h0PSIiLCAkYXR0cmlidXRlcz0iIiwgJGRpcmVjdGl2ZXM9YXJyYXkoKSwgJHZpc2libGU9ZmFsc2UpCgl7CgkJJG91dHB1dCA9ICIiOwoJCgkJLy9jYWxsIG1ldGhvZCB0byBnZXQgYXR0cmlidXRlcwoJCSRhdHRyaWJ1dGVzID0gJHRoaXMtPmNhbGN1bGF0ZUVsZW1lbnRBdHRyaWJ1dGVzKCR3aWR0aCwkaGVpZ2h0LCRhdHRyaWJ1dGVzLCR2aXNpYmxlKTsKCQkkYXR0cmliU3RyaW5nID0gKCFlbXB0eSgkYXR0cmlidXRlc1snYXR0cmlidXRlcyddKSk/JGF0dHJpYnV0ZXNbJ2F0dHJpYnV0ZXMnXToiIjsKCQkkc3R5bGUgPSAoIWVtcHR5KCRhdHRyaWJ1dGVzWydzdHlsZSddKSk/JGF0dHJpYnV0ZXNbJ3N0eWxlJ106IiI7CgkJCgkJJGRhdGFTdGF0dXMgPSBzZWxmOjokREFUQV9TVEFUVVNfTE9BREVEOwoJCSRvdXRwdXQgLj0gIjxkaXYgaWQ9J3skZWxlbWVudElkZW50aWZpZXJ9JyBkYXRhLXN0YXR1cz0neyRkYXRhU3RhdHVzfScgeyRhdHRyaWJTdHJpbmd9IHskc3R5bGV9PlxuIjsKCQkkb3V0cHV0IC49ICI8L2Rpdj5cbiI7CgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgkKCQoJLyoqCgkgKiBDb252ZXJ0cyB0aGUgaGVpZ2h0LCB3aWR0aCwgYXR0cmlidXRlcywgYW5kIHZpc2libGUgcGFyYW1ldGVycyBpbnRvIGEgc3RyaW5nIHRvIGJlIGluc2VydGVkIGludG8gdGhlICdzdHlsZScgdGFnCgkgKiBhbmQgYSBzdHJpbmcgb2YgY3VzdG9tIGF0dHJpYnV0ZSBwYWlycywgYm90aCBvZiB3aGljaCBhcmUgcmV0dXJuZWQgaW4gYW4gYXJyYXkKCSAqICAKCSAqIEBwYXJhbSBzdHJpbmcgJHdpZHRoIFRoZSB3ZWlnaHQgb2YgdGhlIGVsZW1lbnQgY29udGFpbmVyLiBUaGlzIGlzIGluc2VydGVkIGRpcmVjdGx5IGludG8gdGhlIHN0eWxlIHRhZywgc28gY2FuIGluY2x1ZGUgcHggb3IgZW0KCSAqIEBwYXJhbSBzdHJpbmcgJGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBlbGVtZW50IGNvbnRhaW5lci4gVGhpcyBpcyBpbnNlcnRlZCBkaXJlY3RseSBpbnRvIHRoZSBzdHlsZSB0YWcsIHNvIGNhbiBpbmNsdWRlIHB4IG9yIGVtCgkgKiBAcGFyYW0gYXJyYXkgJGF0dHJpYnV0ZXMgQW4gYXJyYXkgb2Yga2V5LXZhbHVlIHBhaXJlZCBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSB0YWcgb2YgdGhlIGNvbnRhaW5lciBlbGVtZW50CgkgKiBAcGFyYW0gc3RyaW5nICR2aXNpYmxlIFdoZXRoZXIgb3Igbm90IHRoZSBkaXYgc2hvdWxkIGJlIHZpc2libGUKCSAqIAoJICogQHJldHVybiBhcnJheSBjb250YWluaW5nIGtleXMgJ2F0dHJpYnV0ZXMnIGFuZCAnc3R5bGUnIGFuZCBzdHJpbmcgdmFsdWVzIGZvciBlYWNoIGlmIHRoZXkgZXhpc3QuIElmIG5laXRoZXIgaXMgc2V0LCBhbiBlbXB0eSBhcnJheSBpcyByZXR1cm5lZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gY2FsY3VsYXRlRWxlbWVudEF0dHJpYnV0ZXMoJHdpZHRoPSIiLCAkaGVpZ2h0PSIiLCAkYXR0cmlidXRlcz0iIiwgJHZpc2libGU9dHJ1ZSwgJGlzU3RhdGljPWZhbHNlKQoJewoJCWlmIChpc19udW1lcmljKCRoZWlnaHQpKQoJCXsKCQkJJGhlaWdodC49InB4IjsKCQl9CgkJCgkJaWYgKGlzX251bWVyaWMoJHdpZHRoKSkKCQl7CgkJCSR3aWR0aC49InB4IjsKCQl9CgkJCgkJaWYgKCFpc19hcnJheSgkYXR0cmlidXRlcykpCgkJewoJCQkkYXR0cmlidXRlcyA9IGFycmF5KCk7CgkJfQoJCQoJCSR2ZUNsYXNzID0gJGlzU3RhdGljPyJtbS1yZXBvcnQtc3RhdGljLXZpc3VhbC1lbGVtZW50IjoibW0tcmVwb3J0LXZpc3VhbC1lbGVtZW50IjsKCQkkYXR0cmlidXRlc1snY2xhc3MnXSA9ICghZW1wdHkoJGF0dHJpYnV0ZXNbJ2NsYXNzJ10pKT8ieyRhdHRyaWJ1dGVzWydjbGFzcyddfSB7JHZlQ2xhc3N9IjoieyR2ZUNsYXNzfSI7CgkJCgkJJHN0eWxlID0gKCFlbXB0eSgkYXR0cmlidXRlc1snc3R5bGUnXSkpPyRhdHRyaWJ1dGVzWydzdHlsZSddOiIiOwoJCSRzdHlsZSAuPSAoJGhlaWdodCAhPSAiIik/ImhlaWdodDp7JGhlaWdodH07ICI6IiI7CgkJJHN0eWxlIC49ICgkd2lkdGggIT0gIiIpPyJ3aWR0aDp7JHdpZHRofTsgIjoiIjsKCQkkc3R5bGUgLj0gISR2aXNpYmxlPyJkaXNwbGF5Om5vbmU7ICI6IiI7CgkJJHN0eWxlID0gKCRzdHlsZSAhPSAiIik/InN0eWxlPSd7JHN0eWxlfSciOiRzdHlsZTsKCQkKCQkkYXR0cmliU3RyaW5nID0gIiI7CgkJaWYgKGlzX2FycmF5KCRhdHRyaWJ1dGVzKSkKCQl7CgkJCWlmIChpc3NldCgkYXR0cmlidXRlc1snc3R5bGUnXSkpCgkJCXsKCQkJCXVuc2V0KCRhdHRyaWJ1dGVzWydzdHlsZSddKTsgLy9oYW5kbGVkIGFib3ZlCgkJCX0KCQkJCgkJCWZvcmVhY2ggKCRhdHRyaWJ1dGVzIGFzICRrPT4kdikKCQkJewoJCQkJJGF0dHJpYlN0cmluZyAuPSAieyRrfT0neyR2fScgIjsKCQkJfQoJCX0KCQkKCQkkcmV0dXJuVmFsdWVzID0gYXJyYXkoKTsKCQlpZiAoIWVtcHR5KCRzdHlsZSkpCgkJewoJCQkkcmV0dXJuVmFsdWVzWydzdHlsZSddID0gJHN0eWxlOwoJCX0KCQkKCQlpZiAoIWVtcHR5KCRhdHRyaWJTdHJpbmcpKQoJCXsKCQkJJHJldHVyblZhbHVlc1snYXR0cmlidXRlcyddID0gJGF0dHJpYlN0cmluZzsKCQl9CgkJCgkJcmV0dXJuICRyZXR1cm5WYWx1ZXM7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBodG1sL2phdmFzY3JpcHQgZm9yIHRoZSByZXF1ZXN0ZWQgdmlzdWFsIGVsZW1lbnQKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkZWxlbWVudElkZW50aWZpZXIKCSAqIEBwYXJhbSBhcnJheSAkcGFyYW1zCgkgKiBAcGFyYW0gaW50ICR3aWR0aAoJICogQHBhcmFtIGludCAkaGVpZ2h0CgkgKiBAcGFyYW0gYXJyYXkgJGRpcmVjdGl2ZXMKCSAqIAoJICogQHJldHVybiBNTV9SZXBvcnRSZXNwb25zZSBjb250YWluaW5nIHZpc3VhbCBlbGVtZW50IGNvZGUgaWYgdGhlIGlkZW50aWZpZXIgY291bGQgYmUgZm91bmQgYW5kIHRoZSBkYXRhIGlzIHJlYWR5LgoJICovCglwdWJsaWMgYWJzdHJhY3QgZnVuY3Rpb24gcmVuZGVyVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXM9IiIsICR3aWR0aD0iIiwgJGhlaWdodD0iIiwgJGRpcmVjdGl2ZXM9YXJyYXkoKSk7CgkKCQoJLyoqCgkgKiByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSB0b2tlbiBpZGVudGlmeWluZyB0aGUgc3BlY2lmaWMgcmVwb3J0CgkgKiBAcmV0dXJuIHN0cmluZyB0aGUgdmFsdWUgb2YgdGhlIHRva2VuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRUb2tlbigpCgl7CgkJcmV0dXJuICR0aGlzLT50b2tlbjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVnaXN0ZXJEZXBlbmRlbmNpZXMoJGRlcGVuZGVuY2llcykKCXsKCQkkdGhpcy0+Y3NzRGVwZW5kZW5jaWVzID0gYXJyYXlfbWVyZ2UoJHRoaXMtPmNzc0RlcGVuZGVuY2llcywoaXNzZXQoJGRlcGVuZGVuY2llc1snY3NzJ10pPyRkZXBlbmRlbmNpZXNbJ2NzcyddOmFycmF5KCkpKTsKCQkkdGhpcy0+amF2YXNjcmlwdERlcGVuZGVuY2llcyA9IGFycmF5X21lcmdlKCR0aGlzLT5qYXZhc2NyaXB0RGVwZW5kZW5jaWVzLChpc3NldCgkZGVwZW5kZW5jaWVzWydqcyddKT8kZGVwZW5kZW5jaWVzWydqcyddOmFycmF5KCkpKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZW5xdWV1ZURlcGVuZGVuY2llcygpIAoJewoJCWZvcmVhY2ggKCR0aGlzLT5jc3NEZXBlbmRlbmNpZXMgYXMgJGRlcGVuZGVuY3kpCgkJewoJCQl3cF9lbnF1ZXVlX3N0eWxlKGJhc2VuYW1lKCRkZXBlbmRlbmN5KSwkZGVwZW5kZW5jeSk7CgkJfQoJCQoJCWZvcmVhY2ggKCR0aGlzLT5qYXZhc2NyaXB0RGVwZW5kZW5jaWVzIGFzICRkZXBlbmRlbmN5KQoJCXsKCQkJd3BfZW5xdWV1ZV9zY3JpcHQoYmFzZW5hbWUoJGRlcGVuZGVuY3kpLCRkZXBlbmRlbmN5KTsKCQl9CQoJfSAKCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyRm9ybSgkY29uZmlndXJhdGlvbkFycmF5LCAkaWQ9Im1tLWZvcm0tY29udGFpbmVyIiwgJGNsYXNzPSJtbS1yZXBvcnQtcGFyYW1zIiwkc3R5bGU9IiIpCgl7CgkJaWYgKCFpc19hcnJheSgkY29uZmlndXJhdGlvbkFycmF5KSkKCQl7CgkJCXJldHVybiAiIjsKCQl9CgkJCgkJJHN1Ym1pdEJ1dHRvbnMgPSAiIjsKCQkkY29udGVudCA9ICIiOwoJCWZvcmVhY2ggKCRjb25maWd1cmF0aW9uQXJyYXkgYXMgJHNwZWMpCgkJewoJCQlpZiAoaW5fYXJyYXkoJHNwZWNbJ3R5cGUnXSxhcnJheSgic3VibWl0LWJ1dHRvbiIsInJlc2V0LWJ1dHRvbiIpKSkKCQkJewoJCQkJJHRoaXNDbGFzcyA9IGlzc2V0KCRzcGVjWydjbGFzcyddKT8iY2xhc3M9J3skc3BlY1snY2xhc3MnXX0nICI6ImNsYXNzPSdtbS11aS1idXR0b24gYmx1ZSBtbS1yZXBvcnQtc3VibWl0dGVyJyAiOwoJCQkJJHRoaXNTdHlsZSA9IGlzc2V0KCRzcGVjWydzdHlsZSddKT8ic3R5bGU9J3skc3BlY1snc3R5bGUnXX0nICI6IiI7CgkJCQlzd2l0Y2ggKCRzcGVjWyd0eXBlJ10pCgkJCQl7CgkJCQkJY2FzZSAnc3VibWl0LWJ1dHRvbic6CgkJCQkJCSR2YWx1ZSA9IGlzc2V0KCRzcGVjWyd2YWx1ZSddKT8kc3BlY1sndmFsdWUnXToiIjsKCQkJCQkJJHN1Ym1pdEJ1dHRvbnMuPSAiPGlucHV0IHR5cGU9J2J1dHRvbicgeyR0aGlzQ2xhc3N9eyR0aGlzU3R5bGV9IHZhbHVlPSd7JHZhbHVlfSc+XG4iOwoJCQkJCQlicmVhazsKCQkJCQljYXNlICdyZXNldC1idXR0b24nOgoJCQkJCQkkdmFsdWUgPSBpc3NldCgkc3BlY1sndmFsdWUnXSk/JHNwZWNbJ3ZhbHVlJ106IiI7CgkJCQkJCSRzdWJtaXRCdXR0b25zLj0gIjxpbnB1dCB0eXBlPSdidXR0b24nIHskdGhpc0NsYXNzfXskdGhpc1N0eWxlfSB2YWx1ZT0neyR2YWx1ZX0nIG9uY2xpY2s9J21tanMucmVzZXRGb3JtKCknPlxuIjsKCQkJCQkJYnJlYWs7CgkJCQkJZGVmYXVsdDoKCQkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQkJZWxzZSBpZiAoJHNwZWNbJ3R5cGUnXSA9PSAiYmxhbmtfcm93IikKCQkJewoJCQkJJGNvbnRlbnQuPSAiPHRyPlxuPHRkIGNvbHNwYW49JzInPiZuYnNwOzwvdGQ+XG48L3RyPlxuIjsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkdmFsdWUgPSAkdGhpcy0+cHJvY2Vzc0Zvcm1WYWx1ZSgkc3BlYyk7CgkJCQkkdGhpc0NsYXNzID0gaXNzZXQoJHNwZWNbJ2NsYXNzJ10pPyRzcGVjWydjbGFzcyddOiIiOwoJCQkJJHRoaXNJZCA9IGlzc2V0KCRzcGVjWydpZCddKT8iaWQ9J3skc3BlY1snaWQnXX0nICI6IiI7CgkJCQkkY29udGVudC49Ijx0cj5cbiI7CgkJCQkkY29udGVudC49Ijx0ZD57JHNwZWNbJ2xhYmVsJ119PC90ZD5cbiI7CgkJCQkkY29udGVudC49Ijx0ZD5cbiI7CgkJCQkkdmFsaWRhdGlvblN0cmluZyA9ICR0aGlzLT5nZXRWYWxpZGF0aW9uU3RyaW5nKCRzcGVjKTsKCQkJCXN3aXRjaCAoJHNwZWNbJ3R5cGUnXSkKCQkJCXsKCQkJCQljYXNlICdkYXRlJzoKCQkJCQkJJGNvbnRlbnQuPSBNTV9VdGlsczo6Z2V0Q2FsZW5kYXJJY29uKCk7CgkJCQkJCSRjb250ZW50Lj0iIDxpbnB1dCB0eXBlPSd0ZXh0JyB7JHZhbGlkYXRpb25TdHJpbmd9IG5hbWU9J3skc3BlY1snbmFtZSddfScgeyR0aGlzSWR9IHZhbHVlPSd7JHZhbHVlfScgY2xhc3M9J21tLXJlcG9ydGluZy1kYXRlcGlja2VyIHskY2xhc3N9Jz5cbiI7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgJ2Ryb3Bkb3duJzoKCQkJCQkJJGNvbnRlbnQuPSI8c2VsZWN0IG5hbWU9J3skc3BlY1snbmFtZSddfScgeyR2YWxpZGF0aW9uU3RyaW5nfSB7JHRoaXNJZH0+XG4iOwoJCQkJCQlpZiAoaXNzZXQoJHNwZWNbJ29wdGlvbnMnXSkgJiYgaXNfYXJyYXkoJHNwZWNbJ29wdGlvbnMnXSkpCgkJCQkJCXsKCQkJCQkJCSRjb250ZW50Lj0gTU1fSHRtbFV0aWxzOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRzcGVjWydvcHRpb25zJ10sJHZhbHVlKTsKCQkJCQkJfQoJCQkJCQkkY29udGVudC49Ijwvc2VsZWN0PlxuIjsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAnY2hlY2tib3gnOgoJCQkJCQkkZGVmYXVsdENoZWNrID0gKGlzc2V0KCRzcGVjWydjaGVja2VkQnlEZWZhdWx0J10pICYmIChmaWx0ZXJfdmFyKCRzcGVjWydjaGVja2VkQnlEZWZhdWx0J10sRklMVEVSX1ZBTElEQVRFX0JPT0xFQU4pKSk/J2NoZWNrZWQ9ImNoZWNrZWQiICc6IiI7CgkJCQkJCSRjb250ZW50Lj0iPGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSd7JHNwZWNbJ25hbWUnXX0nIHskdmFsaWRhdGlvblN0cmluZ30geyR0aGlzSWR9IHskZGVmYXVsdENoZWNrfS8+XG4iOwoJCQkJCQlicmVhazsKCQkJCQlkZWZhdWx0OgoJCQkJCQkkY29udGVudC49IiZuYnNwOyI7CgkJCQl9CgkJCQkkY29udGVudC49IjwvdGQ+XG4iOwoJCQkJJGNvbnRlbnQuPSI8L3RyPlxuIjsKCQkJfQoJCX0KCQkkcCA9IG5ldyBzdGRDbGFzcygpOwoJCSRwLT5jb250ZW50ID0gJGNvbnRlbnQ7CgkJJHAtPmlkID0gJGlkOwoJCSRwLT5jbGFzcyA9ICRjbGFzczsKCQkkcC0+c3R5bGUgPSAkc3R5bGU7CgkJJHAtPmJ1dHRvbnMgPSAkc3VibWl0QnV0dG9uczsKCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCR0aGlzLT5mb3JtVGVtcGxhdGUsJHApOwoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiBwcm9jZXNzRm9ybVZhbHVlKCRzcGVjKQoJewoJCSR2YWx1ZSA9ICIiOwoJCWlmIChpc3NldCgkc3BlY1snZGVmYXVsdCddKSkKCQl7CgkJCXN3aXRjaCAoJHNwZWNbJ2RlZmF1bHQnXSkKCQkJewoJCQkJY2FzZSBzZWxmOjokREVGQVVMVF9EQVRFX05PVzoKCQkJCQkkdmFsdWUgPSBkYXRlKCJtL2QvWSIsTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCd0aW1lc3RhbXAnKSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIHNlbGY6OiRERUZBVUxUX0RBVEVfM01PTlRIU19BR086CgkJCQkJJHZhbHVlID0gZGF0ZSgibS9kL1kiLHN0cnRvdGltZSgiLTMgbW9udGhzIixNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoJ3RpbWVzdGFtcCcpKSk7CgkJCQkJYnJlYWs7CgkJCQlkZWZhdWx0OgoJCQkJCSR2YWx1ZSA9ICRzcGVjWydkZWZhdWx0J107CgkJCQkJYnJlYWs7CgkJCX0KCQl9CgkJcmV0dXJuICR2YWx1ZTsKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0VmFsaWRhdGlvblN0cmluZygkc3BlYykKCXsKCQlpZiAoaXNzZXQoJHNwZWNbJ3ZhbGlkYXRpb24nXSkpCgkJewoJCQlpZiAoZW1wdHkoJHNwZWNbJ3ZhbGlkYXRpb24nXSkpCgkJCXsKCQkJCXJldHVybiAiIjsKCQkJfQoJCQlyZXR1cm4gJHNwZWNbJ3ZhbGlkYXRpb24nXTsKCQl9CgkJCgkJLy9ubyBjdXN0b20gdmFsaWRhdG9yIHN1cHBsaWVkLCB1c2Ugb24gb2YgdGhlIHN0YW5kYXJkIG9uZXMKCQkkdmFsaWRhdGlvbnMgPSBhcnJheSgpOwoJCWlmIChpc3NldCgkc3BlY1sncmVxdWlyZWQnXSkgJiYgKCRzcGVjWydyZXF1aXJlZCddID09IHRydWUpKQoJCXsKCQkJJHZhbGlkYXRpb25zW10gPSAnZGF0YS1yZXF1aXJlZD0idHJ1ZSInOwoJCX0KCQlzd2l0Y2ggKCRzcGVjWyd0eXBlJ10pCgkJewoJCQljYXNlICdkYXRlJzoKCQkJCSR2YWxpZGF0aW9uc1tdID0gJ2RhdGEtcGFyc2xleS10cmlnZ2VyPSJjaGFuZ2UiIGRhdGEtdHlwZT0iZGF0ZWlzbyInOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6IAoJCQkJYnJlYWs7CgkJfQoJCSR2YWxpZGF0aW9uU3RyaW5nID0gaW1wbG9kZSgiICIsJHZhbGlkYXRpb25zKTsKCQlyZXR1cm4gJHZhbGlkYXRpb25TdHJpbmc7Cgl9Cn0KCi8vVE9ETzogdGhlIGludGVyZmFjZSBiZWxvdyBpcyB0byBjaXJjdW12ZW50IHBocCBsaW1pdGF0aW9uIG9uIGFic3RyYWN0IHN0YXRpYyBtZXRob2RzLi4uIHRoaXMgbWF5IGJlIGEgY29kZSBzbWVsbCwgaW52ZXN0aWdhdGUgbGF0ZXIKCmludGVyZmFjZSBNTV9SZXBvcnRCYXNlSW50ZXJmYWNlIHsKCXN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZURhdGEoJHF1ZXJ5SWRlbnRpZmllciwgJHBhcmFtcyk7Cn0KCg==', 0, '2018-11-21 06:38:53'),
(30, 'dripcontentscheduleview', 'Y2xhc3MgTU1fRHJpcENvbnRlbnRTY2hlZHVsZVZpZXcgZXh0ZW5kcyBNTV9SQkFDUHJvZHVjdE1hbmFnZXJWaWV3CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0FDQ0VTU19SSUdIVFNfQUREID0gImFkZEFjY2Vzc1JpZ2h0cyI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9BQ0NFU1NfUklHSFRTX0RJQUxPRyA9ICJhY2Nlc3NSaWdodHNEaWFsb2ciOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQUNDRVNTX1JJR0hUU19VUERBVEUgPSAidXBkYXRlQWNjZXNzUmlnaHRzIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0FDQ0VTU19SSUdIVFNfVVBEQVRFX0RJQUxPRyA9ICJ1cGRhdGVBY2Nlc3NSaWdodHNEaWFsb2ciOwoJCgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fQUNDRVNTX1JJR0hUU19BREQ6CgkJCQkJcmV0dXJuICR0aGlzLT5zYXZlQWNjZXNzUmlnaHRzKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0FDQ0VTU19SSUdIVFNfRElBTE9HOgoJCQkJCXJldHVybiAkdGhpcy0+YWNjZXNzUmlnaHRzRGlhbG9nKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0FDQ0VTU19SSUdIVFNfVVBEQVRFX0RJQUxPRzoKCQkJCQlyZXR1cm4gJHRoaXMtPnVwZGF0ZUFjY2Vzc1JpZ2h0c0RpYWxvZygkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9BQ0NFU1NfUklHSFRTX1VQREFURToKCQkJCQlyZXR1cm4gJHRoaXMtPnVwZGF0ZUFjY2Vzc1JpZ2h0cygkcG9zdCk7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gdXBkYXRlQWNjZXNzUmlnaHRzKCRwb3N0KQoJewoJCSRwb3N0WyJlZGl0X2lkIl0gPSAxOwoJCQoJCWlmKCRwb3N0WyJzaG91bGRfcmVtb3ZlIl09PSIxIikKCQl7CgkJCSRkYXRhID0gYXJyYXkoCgkJCQknYWNjZXNzX2lkJz0+JHBvc3RbImFjY2Vzc19pZCJdLAoJCQkJJ2FjY2Vzc190eXBlJz0+JHBvc3RbImFjY2Vzc190eXBlIl0sCgkJCQknZGF5Jz0+JHBvc3RbImRheSJdLAoJCQkJJ3Bvc3RfSUQnPT4kcG9zdFsicG9zdF9pZCJdLAoJCQkpOwoJCQkKCQkJJGFjY2Vzc1JpZ2h0cyA9IG5ldyBNTV9BY2Nlc3NSaWdodHNWaWV3KCk7CgkJCSRyZXNwb25zZSA9ICRhY2Nlc3NSaWdodHMtPnJlbW92ZUFjY2Vzc1JpZ2h0cygkZGF0YSk7CgkJCQoJCQlpZigkcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRTVUNDRVNTKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTdWNjZXNzZnVsbHkgcmVtb3ZlZCBhY2Nlc3MgcmlnaHRzIik7CgkJCX0KCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9CgkJcmV0dXJuICR0aGlzLT5zYXZlQWNjZXNzUmlnaHRzKCRwb3N0KTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlQWNjZXNzUmlnaHRzKCRwb3N0KQoJewoJCSRwb3N0RWxlbSA9ICJtbV9tZW1iZXJfdHlwZXNfb3B0IjsKCQkKCQlpZigkcG9zdFsiYWNjZXNzX3R5cGUiXSAhPSAibWVtYmVyX3R5cGUiKSAKCQl7CgkJCSRwb3N0RWxlbSA9ICJtbV9hY2Nlc3NfdGFnc19vcHQiOwoJCX0KCgkJJGRhdGEgPSBhcnJheSgKCQkJJ3Bvc3RfSUQnPT4kcG9zdFsicG9zdF9pZCJdLAoJCQkndHlwZSc9PiRwb3N0WyJhY2Nlc3NfdHlwZSJdLAoJCQknZWRpdF9pZCc9PigoaXNzZXQoJHBvc3RbImVkaXRfaWQiXSkpPyRwb3N0WyJlZGl0X2lkIl06MCksCgkJCSdkYXknPT4kcG9zdFsiZGF5Il0sCgkJCSRwb3N0RWxlbT0+JHBvc3RbImFjY2Vzc19pZCJdLAoJCSk7CgkJCgkJJGFjY2Vzc1JpZ2h0cyA9IG5ldyBNTV9BY2Nlc3NSaWdodHNWaWV3KCk7CgkJJHJlc3BvbnNlID0gJGFjY2Vzc1JpZ2h0cy0+c2F2ZUFjY2Vzc1JpZ2h0cygkZGF0YSk7CgkJCgkJaWYoJHJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUykKCQl7CgkJCWlmKGlzc2V0KCRwb3N0WyJjZWxsX2lkIl0pKXsKCQkJCSRyZXNwb25zZUFyciA9IGFycmF5KAoJCQkJCQknY2VsbF9pZCc9PiRwb3N0WyJjZWxsX2lkIl0sCgkJCQkJCSdwb3N0X2lkJz0+JHBvc3RbInBvc3RfaWQiXSwKCQkJCQkJJ2FjY2Vzc190eXBlJz0+JHBvc3RbImFjY2Vzc190eXBlIl0sCgkJCQkJCSdhY2Nlc3NfaWQnPT4kcG9zdFsiYWNjZXNzX2lkIl0sCgkJCQkJCSdpbWFnZSc9Pk1NX1V0aWxzOjpnZXRDaGVja0ljb24oKQoJCQkJKTsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlQXJyKTsKCQkJfQoJCQllbHNlIHsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkFjY2VzcyByaWdodHMgc2F2ZWQiKTsKCQkJfQoJCX0KCQlyZXR1cm4gJHJlc3BvbnNlOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHVwZGF0ZUFjY2Vzc1JpZ2h0c0RpYWxvZygkcG9zdCkKCXsKCQkkaW5mbyA9IG5ldyBzdGRDbGFzcygpOwoJCQoJCSRyZXEgPSBhcnJheSgiYWNjZXNzX3R5cGUiLCAiYWNjZXNzX2lkIiwgInBvc3RfaWQiLCJkYXkiKTsKCQkKCQlmb3JlYWNoKCRyZXEgYXMgJGtleSl7CgkJCWlmKCFpc3NldCgkcG9zdFska2V5XSkpewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgeyRrZXl9LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCSRpbmZvLT4ka2V5ID0gJHBvc3RbJGtleV07CgkJfQoJCQoJCSRvYmogPSBudWxsOwoJCWlmKCRwb3N0WyJhY2Nlc3NfdHlwZSJdPT0ibWVtYmVyX3R5cGUiKQoJCXsKCQkJJG9iaj0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkcG9zdFsiYWNjZXNzX2lkIl0pOwoJCX0KCQllbHNlCgkJewoJCQkkb2JqPSBuZXcgTU1fQnVuZGxlKCRwb3N0WyJhY2Nlc3NfaWQiXSk7CgkJfQoJCQoJCSR0aGlzUG9zdCA9IGdldF9wb3N0KCRwb3N0WyJwb3N0X2lkIl0pOwoJCQoJCSRpbmZvLT5wYWdlX25hbWUgPSAkdGhpc1Bvc3QtPnBvc3RfdGl0bGU7CgkJJGluZm8tPnR5cGVfbmFtZSA9ICRvYmotPmdldE5hbWUoKTsKCQkkaW5mby0+ZGF5ID0gJHBvc3RbImRheSJdOwoJCSRpbmZvLT5kaWFsb2cgPSAidXBkYXRlQWNjZXNzUmlnaHRzIjsKCQkkYWNjZXNzUmlnaHRzRm9ybSA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvIi5NTV9NT0RVTEVfRFJJUF9DT05URU5UX1NDSEVEVUxFLiIuZGlhbG9nLnBocCIsICRpbmZvKTsKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRhY2Nlc3NSaWdodHNGb3JtKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBhY2Nlc3NSaWdodHNEaWFsb2coJHBvc3QpCgl7CgkJJGluZm8gPSBuZXcgc3RkQ2xhc3MoKTsKCQkKCQlpZighaXNzZXQoJHBvc3RbInR5cGUiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZmluZCBhY2Nlc3MgdHlwZS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGlkID0gcHJlZ19yZXBsYWNlKCIvW14wLTldKy8iLCAiIiwgJHBvc3RbInR5cGUiXSk7CgkJaWYocHJlZ19tYXRjaCgiLyhtdF8pLyIsICRwb3N0WyJ0eXBlIl0pKQoJCXsKCQkJJG1lbWJlclR5cGUgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRpZCk7CgkJCWlmKCEkbWVtYmVyVHlwZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJJbnZhbGlkIG1lbWJlcnNoaXAgbGV2ZWwuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJJGluZm8tPmlkID0gJGlkOwoJCQkkaW5mby0+dHlwZT0gIm1lbWJlcl90eXBlIjsKCQl9CgkJZWxzZSBpZihwcmVnX21hdGNoKCIvKGF0XykvIiwgJHBvc3RbInR5cGUiXSkpCgkJewoJCQkkYWNjZXNzVGFnID0gbmV3IE1NX0J1bmRsZSgkaWQpOwoJCQlpZighJGFjY2Vzc1RhZy0+aXNWYWxpZCgpKXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgYnVuZGxlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCSRpbmZvLT5pZCA9ICRpZDsKCQkJJGluZm8tPnR5cGUgPSAiYWNjZXNzX3RhZyI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgYWNjZXNzIHR5cGUuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRwb3N0cyA9IGdldF9wb3N0cyhhcnJheSgicG9zdF90eXBlIj0+InBvc3QiKSk7CgkJJHBhZ2VzID0gZ2V0X3BhZ2VzKGFycmF5KCJwb3N0X3R5cGUiPT4icGFnZSIpKTsKCQkKCQkkcG9zdFNlbGVjdCA9IE1NX1V0aWxzOjpjcmVhdGVPcHRpb25zQXJyYXkoJHBvc3RzLCAiSUQiLCAicG9zdF90aXRsZSIpOwoJCSRwYWdlQXJyID0gTU1fVXRpbHM6OmNyZWF0ZU9wdGlvbnNBcnJheSgkcGFnZXMsICJJRCIsICJwb3N0X3RpdGxlIik7CgkJJHBhZ2VTZWxlY3QgPSBhcnJheSgpOwoJCWZvcmVhY2goJHBhZ2VBcnIgYXMgJGs9PiR2KQoJCXsKCQkJaWYoIU1NX0NvcmVQYWdlRW5naW5lOjppc0NvcmVQYWdlKCRrKSkKCQkJewoJCQkJJHBhZ2VTZWxlY3RbJGtdID0gJHY7CgkJCX0KCQl9CgkJCgkJJGluZm8tPnBvc3RzX3NlbGVjdCA9IE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkcG9zdFNlbGVjdCk7CgkJJGluZm8tPnBhZ2VzX3NlbGVjdCA9IE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkcGFnZVNlbGVjdCk7CgkJJGluZm8tPnR5cGVfbmFtZSA9ICRwb3N0WyJ0eXBlX25hbWUiXTsKCQkkaW5mby0+ZGlhbG9nID0gInNob3dBZGRBY2Nlc3NSaWd0aHMiOwoJCSRhY2Nlc3NSaWdodHNGb3JtID0gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi8iLk1NX01PRFVMRV9EUklQX0NPTlRFTlRfU0NIRURVTEUuIi5kaWFsb2cucGhwIiwgJGluZm8pOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGFjY2Vzc1JpZ2h0c0Zvcm0pOwoJfQp9', 0, '2018-11-21 06:38:53'),
(31, 'error', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fRXJyb3IKewoJcHVibGljIHN0YXRpYyAkVVJMX1BBUkFNID0gImNvZGUiOwoJCglwdWJsaWMgc3RhdGljICRHRU5FUkFMID0gMTAwMDEwOwoJcHVibGljIHN0YXRpYyAkQUNDRVNTX0RFTklFRCA9IDEwMDAyMDsKCXB1YmxpYyBzdGF0aWMgJExPR0lOX1JFUVVJUkVEID0gMTAwMDIxOwoJcHVibGljIHN0YXRpYyAkQUNDT1VOVF9DQU5DRUxFRCA9IDEwMDAzMDsKCXB1YmxpYyBzdGF0aWMgJEFDQ09VTlRfTE9DS0VEID0gMTAwMDMxOwoJcHVibGljIHN0YXRpYyAkQUNDT1VOVF9QQVVTRUQgPSAxMDAwMzI7CglwdWJsaWMgc3RhdGljICRBQ0NPVU5UX09WRVJEVUUgPSAxMDAwMzM7CglwdWJsaWMgc3RhdGljICRBQ0NPVU5UX0VYUElSRUQgPSAxMDAwMzQ7CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TWVzc2FnZSgkZXJyb3JDb2RlPTApCgl7CgkJaWYoaXNzZXQoJF9SRVFVRVNUW01NX1Nlc3Npb246OiRQQVJBTV9NRVNTQUdFX0tFWV0pKQoJCXsKCQkJcmV0dXJuIGh0bWxzcGVjaWFsY2hhcnMoc3RyaXBzbGFzaGVzKHVybGRlY29kZSgkX1JFUVVFU1RbTU1fU2Vzc2lvbjo6JFBBUkFNX01FU1NBR0VfS0VZXSkpLCBFTlRfUVVPVEVTLCAnVVRGLTgnKTsKCQl9CgkJCgkJaWYoaXNzZXQoJF9SRVFVRVNUW3NlbGY6OiRVUkxfUEFSQU1dKSkKCQl7CgkJCSRlcnJvckNvZGUgPSAkX1JFUVVFU1Rbc2VsZjo6JFVSTF9QQVJBTV07CgkJfQoJCQkJCgkJc3dpdGNoKGludHZhbCgkZXJyb3JDb2RlKSkKCQl7CgkJCWNhc2Ugc2VsZjo6JEdFTkVSQUw6CgkJCWNhc2Ugc2VsZjo6JEFDQ0VTU19ERU5JRUQ6CgkJCQlyZXR1cm4gIllvdSBkb24ndCBoYXZlIGFjY2VzcyB0byB2aWV3IHRoaXMgcGFnZSI7CgkJCQkKCQkJY2FzZSBzZWxmOjokTE9HSU5fUkVRVUlSRUQ6CgkJCQlyZXR1cm4gIllvdSBtdXN0IGxvZ2luIGluIG9yZGVyIHRvIGFjY2VzcyB0aGlzIHBhZ2UiOwoJCQkJCgkJCWNhc2Ugc2VsZjo6JEFDQ09VTlRfQ0FOQ0VMRUQ6CgkJCWNhc2Ugc2VsZjo6JEFDQ09VTlRfUEFVU0VEOgoJCQkJcmV0dXJuICJZb3VyIGFjY291bnQgaGFzIGJlZW4gY2FuY2VsZWQiOwoJCQkJCgkJCWNhc2Ugc2VsZjo6JEFDQ09VTlRfTE9DS0VEOgoJCQkJcmV0dXJuICJZb3VyIGFjY291bnQgaGFzIGJlZW4gbG9ja2VkIjsKCQkJCgkJCWNhc2Ugc2VsZjo6JEFDQ09VTlRfT1ZFUkRVRToKCQkJCXJldHVybiAiWW91ciBhY2NvdW50IGlzIG92ZXJkdWUgYW5kIG11c3QgYmUgYnJvdWdodCB1cCB0byBkYXRlIGJlZm9yZSB5b3UgY2FuIGFjY2VzcyBwcm90ZWN0ZWQgY29udGVudCI7CgkJCQkKCQkJY2FzZSBzZWxmOjokQUNDT1VOVF9FWFBJUkVEOgoJCQkJcmV0dXJuICJZb3VyIGFjY291bnQgaGFzIGV4cGlyZWQiOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gIkFuIGVycm9yIGhhcyBvY2N1cnJlZCI7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:53'),
(32, 'resetpasswordform', 'Y2xhc3MgTU1fUmVzZXRQYXNzd29yZEZvcm0gZXh0ZW5kcyBNTV9BYnN0cmFjdEZvcm0KewoJcHVibGljICRzdWNjZXNzID0gIiI7CgkKCS8qKgoJICogRGVmYXVsdCBjb25zdHJ1Y3Rvci4gVGFrZXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzCgkgKiBAcGFyYW0gQXJyYXkgJHBhcmFtcyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBmb3JtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBhcmFtcz1udWxsKQoJewkKCQlpZighaXNfbnVsbCgkcGFyYW1zKSkKCQl7CgkJCWlmKGlzX2FycmF5KCRwYXJhbXMpICYmIGNvdW50KCRwYXJhbXMpID4gMCkKCQkJewoJCQkJZm9yZWFjaCgkcGFyYW1zIGFzICRrPT4kdikKCQkJCXsKCQkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkJJCRrZXkgPSAkdjsKCQkJCX0KCQkJfQoJCQkKCQkJJHRoaXMtPmluaXRpYWxpemUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpbml0aWFsaXplKCkKCXsKICAJCXRyeQogIAkJewogICAgCQkkcmVzdWx0ID0gc2VsZjo6Y2hlY2tJbnB1dCgpOwoJCQoJCQlpZigkcmVzdWx0WydzdWNjZXNzJ10gPT09IGZhbHNlKQoJCQl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCRyZXN1bHRbJ21lc3NhZ2UnXSk7CgkJCX0KICAgICAgCiAgICAgIAkkdGhpcy0+aXNWYWxpZCA9IHRydWU7CiAgCQl9CiAgCQljYXRjaChFeGNlcHRpb24gJGUpCiAgCQl7CiAgICAJCSR0aGlzLT5lcnJvciA9ICRlLT5nZXRNZXNzYWdlKCk7CiAgICAJCSR0aGlzLT5pc1ZhbGlkID0gZmFsc2U7CiAgCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBjaGVja3MgdG8gc2VlIGlmIHRoZSBwcm92aWRlZCBpbnB1dCB0byBhY2Nlc3MgdGhpcyBmb3JtL3BhZ2UgYWxsb3dzIGFjY2Vzcy4KCSAqIEByZXR1cm4gQXJyYXkgY29udGFpbmluZyByZXN1bHQgaW5mbwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNoZWNrSW5wdXQoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcmVzcG9uc2UgPSBhcnJheSgpOwoJCQoJCXRyeQoJCXsKCSAgICAJaWYoIWlzc2V0KCRfUkVRVUVTVFtNTV9SZXNldFBhc3N3b3JkRm9ybVZpZXc6OiRNTV9QQVJBTV9LRVlfS0VZXSkgfHwgIXN0cmxlbih0cmltKCRfUkVRVUVTVFtNTV9SZXNldFBhc3N3b3JkRm9ybVZpZXc6OiRNTV9QQVJBTV9LRVlfS0VZXSkpKQoJICAgIAl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJNaXNzaW5nIG9yIGludmFsaWQgdmVyaWZpY2F0aW9uIGtleSIpOwoJICAgIAl9CiAgICAJCgkgICAgCWlmKCFpc3NldCgkX1JFUVVFU1RbTU1fUmVzZXRQYXNzd29yZEZvcm1WaWV3OjokTU1fUEFSQU1fS0VZX0VNQUlMXSkgfHwgIXN0cmxlbih0cmltKCRfUkVRVUVTVFtNTV9SZXNldFBhc3N3b3JkRm9ybVZpZXc6OiRNTV9QQVJBTV9LRVlfRU1BSUxdKSkpCgkgICAgCXsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIk1pc3Npbmcgb3IgaW52YWxpZCByZXF1aXJlZCB2ZXJpZmljYXRpb24gZmllbGQiKTsKCSAgICAJfQogICAgCQoJICAgIAkkZm9yZ290UGFzc3dvcmRIYXNoID0gdXJsZGVjb2RlKHRyaW0oJF9SRVFVRVNUW01NX1Jlc2V0UGFzc3dvcmRGb3JtVmlldzo6JE1NX1BBUkFNX0tFWV9LRVldKSk7CgkgICAgCSRlbWFpbCAgICAgICAgICAgICAgPSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmRlY3J5cHRQYXNzd29yZCh1cmxkZWNvZGUodHJpbSgkX1JFUVVFU1RbTU1fUmVzZXRQYXNzd29yZEZvcm1WaWV3OjokTU1fUEFSQU1fS0VZX0VNQUlMXSkpKTsKICAgIAkKCSAgICAJaWYoZmlsdGVyX3ZhcigkZW1haWwsIEZJTFRFUl9WQUxJREFURV9FTUFJTCkgPT09IGZhbHNlKQoJICAgIAl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJJbnZhbGlkIHJlcXVpcmVkIHZlcmlmaWNhdGlvbiBmaWVsZCIpOwoJICAgIAl9CiAgICAJCgkgICAgCSRyZXN1bHRzID0gJHdwZGItPmdldF9jb2woIlNFTEVDVCBgSURgIEZST00gYHskd3BkYi0+dXNlcnN9YCBXSEVSRSBgdXNlcl9lbWFpbGAgPSAneyRlbWFpbH0nIEFORCBgdXNlcl9hY3RpdmF0aW9uX2tleWAgPSAneyRmb3Jnb3RQYXNzd29yZEhhc2h9JyIpOwogICAgCQoJICAgIAlpZihjb3VudCgkcmVzdWx0cykgPT09IDApCgkgICAgCXsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIkludmFsaWQgdmVyaWZpY2F0aW9uIGRhdGEgcHJvdmlkZWQsIGNhbm5vdCBjb250aW51ZSIpOwoJICAgIAl9CiAgICAJCgkgICAgICAkbWVtYmVyID0gbmV3IE1NX1VzZXIoJHJlc3VsdHNbMF0pOwogICAgICAKCSAgICAgIGlmKCRtZW1iZXItPmlzVmFsaWQoKSA9PT0gZmFsc2UpCgkgICAgICB7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJJbnZhbGlkIHZlcmlmaWNhdGlvbiBkYXRhIHByb3ZpZGVkLCBjYW5ub3QgY29udGludWUiKTsKCSAgICAgIH0KCQkJCgkJCSRyZXNwb25zZVsnc3VjY2VzcyddID0gdHJ1ZTsKCQkJJHJlc3BvbnNlWydtZW1iZXInXSAgPSAkbWVtYmVyOwoJCX0KCQljYXRjaChFeGNlcHRpb24gJGUpCgkJewoJCQkkcmVzcG9uc2VbJ3N1Y2Nlc3MnXSA9IGZhbHNlOwoJCQkkcmVzcG9uc2VbJ21lc3NhZ2UnXSA9ICRlLT5nZXRNZXNzYWdlKCk7CgkJfQoJCQoJCXJldHVybiAkcmVzcG9uc2U7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyBhbGwgb2YgdGhlIEhUTUwgdGhhdCBzaG91bGQgc2hvdyB1cCBhdCAKCSAqIHRoZSB0b3Agb2YgdGhlIGZvcm0gYmFzZWQgb24gdGhlIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24uCgkgKiBAcmV0dXJuIFN0cmluZyBoZWFkZXIgSFRNTCBmb3IgdGhlIGNoZWNrb3V0IGZvcm0KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRm9ybUhlYWRlcigpCgl7CQkKCQkkaHRtbCAgPSAkdGhpcy0+Z2V0SmF2YXNjcmlwdEluY2x1ZGVzKCk7CgkJCgkJJGh0bWwgLj0gIjxmb3JtIG1ldGhvZD1cInBvc3RcIiBpZD1cIm1tLXJlc2V0cGFzc3dvcmQtZm9ybVwiIHRlc3Rpbmc9XCJ0ZXN0aW5nXCI+CiI7CiAgICAkaHRtbCAuPSAiPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBpZD1cImtcIiBuYW1lPVwia1wiIHZhbHVlPVwieyRfUkVRVUVTVFtNTV9SZXNldFBhc3N3b3JkRm9ybVZpZXc6OiRNTV9QQVJBTV9LRVlfS0VZXX1cIiAvPgoiOyAgCiAgICAkaHRtbCAuPSAiPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBpZD1cImVcIiBuYW1lPVwiZVwiIHZhbHVlPVwieyRfUkVRVUVTVFtNTV9SZXNldFBhc3N3b3JkRm9ybVZpZXc6OiRNTV9QQVJBTV9LRVlfRU1BSUxdfVwiIC8+CiI7CiAgCgkJcmV0dXJuICRodG1sOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgYWxsIG9mIHRoZSBIVE1MIHRoYXQgc2hvdWxkIHNob3cgdXAgYXQKCSAqIHRoZSBib3R0b20gb2YgdGhlIGZvcm0gYmFzZWQgb24gdGhlIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24uCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIGZvb3RlciBIVE1MIGZvciB0aGUgY2hlY2tvdXQgZm9ybQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVGb3JtRm9vdGVyKCkKCXsKICAJJGh0bWwgID0gd3Bfbm9uY2VfZmllbGQoIE1NX1Jlc2V0UGFzc3dvcmRGb3JtVmlldzo6JE1NX05PTkNFX0FDVElPTl9SRVNFVF9QQVNTV09SRF9GT1JNLCBNTV9SZXNldFBhc3N3b3JkRm9ybVZpZXc6OiRNTV9OT05DRV9OQU1FX1JFU0VUX1BBU1NXT1JEX0ZPUk0sIHRydWUsIGZhbHNlKTsKCQkkaHRtbCAuPSAiPC9mb3JtPgoiOwoJCSRodG1sIC49ICR0aGlzLT5nZXRJbml0SmF2YXNjcmlwdCgpOwoJCXJldHVybiAkaHRtbDsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGluY2x1ZGUgc3RhdGVtZW50cyBmb3IgcmVxdWlyZWQgamF2YXNjcmlwdCBmaWxlcy4KCSAqIEByZXR1cm4gU3RyaW5nIHRoYXQgY29udGFpbnMgdGhlIGphdmFzY3JpcHQgZm9yIGluY2x1ZGluZyByZXF1aXJlZCBqYXZhc2NyaXB0IGZpbGVzLgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SmF2YXNjcmlwdEluY2x1ZGVzKCkKCXsKCQkkdmVyc2lvbiA9IE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCk7CgkJJHVzZU1NQ1NTID0gKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1VTRV9NTV9DU1NfUkVTRVRfUEFTU1dPUkQpID09ICIxIikgPyB0cnVlIDogZmFsc2U7CgkJCgkJaWYoJHVzZU1NQ1NTKQoJCXsKCQkJd3BfZW5xdWV1ZV9zdHlsZSgibWVtYmVybW91c2UtcmVzZXQtcGFzc3dvcmQtY3NzIiwgcGx1Z2luc191cmwoTU1fUExVR0lOX05BTUUuIi9yZXNvdXJjZXMvY3NzL3VzZXIvbW0tcmVzZXRwYXNzd29yZC5jc3MiKSwgYXJyYXkoKSwgJHZlcnNpb24pOwoJCX0KCQkKCQl3cF9lbnF1ZXVlX3NjcmlwdCgibWVtYmVybW91c2UtcmVzZXQtcGFzc3dvcmQiLCBwbHVnaW5zX3VybChNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9qcy91c2VyL21tLXJlc2V0cGFzc3dvcmQuanMiKSwgYXJyYXkoKSwgJHZlcnNpb24sIHRydWUpOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgamF2YXNjcmlwdCB0byBpbml0aWFsaXplIHRoZSBSZXNldCBQYXNzd29yZCBmb3JtLiAKCSAqIEBwYXJhbSBhcnJheSAkZGVmYXVsdERhdGEgdGhpcyBjb250YWlucyB0aGUgZGVmYXVsdCBkYXRhIHVzZWQgdG8gcHJlcG9wdWxhdGUgY2VydGFpbiBmb3JtIGVsZW1lbnRzCgkgKiBAcmV0dXJuIFN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBqYXZhc2NyaXB0IHRvIGluaXRpYWxpemVzIHRoZSBjaGVja291dCBmb3JtLgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0SW5pdEphdmFzY3JpcHQoKQoJewoJCXJldHVybiAiPHNjcmlwdD52YXIgbW1fbm9uY2VfbmFtZV9yZXNldHBhc3N3b3JkX2Zvcm0gPSAnIiAuIE1NX1Jlc2V0UGFzc3dvcmRGb3JtVmlldzo6JE1NX05PTkNFX05BTUVfUkVTRVRfUEFTU1dPUkRfRk9STSAuICInOzwvc2NyaXB0PiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fU2VjdGlvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjaGVja2luZyBpZiB0aGUgY3VycmVudCB1c2VyIAoJICogc2hvdWxkIHNlZSB0aGUgY29udGVudHMgb2YgdGhpcyBzZWN0aW9uIGJhc2VkIG9uIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9zZWN0aW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAneyRjb2RlfScgU21hcnRUYWcgaXMgbm90IHN1cHBvcnRlZCBmb3IgUmVzZXQgUGFzc3dvcmQgZm9ybXMuIjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9GaWVsZCB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhlIAoJICogZm9ybSBmaWVsZCBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQgYW5kIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9maWVsZCgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiIjsKCgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQkkZm9ybSA9IE1NX09iamVjdENhY2hlOjpnZXQoTU1fT2JqZWN0Q2FjaGU6OiRLRVlfTEFTVF9GT1JNKTsKCQkKCQlpZighaXNzZXQoJHR5cGUpKQoJCXsKCQkJJHR5cGUgPSAiaW5wdXQiOwoJCX0KCQkKCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJewoJCQljYXNlICJpbnB1dCI6CgkJCQlpZihpc3NldCgkbmFtZSkpCgkJCQl7CgkJCQkJc3dpdGNoKHN0cnRvbG93ZXIoJG5hbWUpKQoJCQkJCXsKCQkJCQkJY2FzZSAicGFzc3dvcmQiOgoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGlkPVwicGFzc3dvcmRcIiBuYW1lPVwicGFzc3dvcmRcIiBjbGFzcz1cIm1tLWZpZWxkXCIgIi4oaXNzZXQoJGF0dHNbJ3BsYWNlaG9sZGVyJ10pICYmIHN0cmxlbih0cmltKCRhdHRzWydwbGFjZWhvbGRlciddKSkgPyAiIHBsYWNlaG9sZGVyPVwieyRhdHRzWydwbGFjZWhvbGRlciddfVwiIiA6ICIiKS4iIC8+IjsKCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCWNhc2UgInBhc3N3b3JkLWNvbmZpcm0iOgoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGlkPVwicGFzc3dvcmRfY29uZmlybVwiIG5hbWU9XCJwYXNzd29yZF9jb25maXJtXCIgY2xhc3M9XCJtbS1maWVsZFwiICIuKGlzc2V0KCRhdHRzWydwbGFjZWhvbGRlciddKSAmJiBzdHJsZW4odHJpbSgkYXR0c1sncGxhY2Vob2xkZXInXSkpID8gIiBwbGFjZWhvbGRlcj1cInskYXR0c1sncGxhY2Vob2xkZXInXX1cIiIgOiAiIikuIiAvPiI7CgkJCQkJCQlicmVhazsKCgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCBuYW1lIG9mICd7JG5hbWV9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSB3aXRoIHR5cGUgeyR0eXBlfS4iOwoJCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ25hbWUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSB3aXRoIHR5cGUgeyR0eXBlfS4iOwoJCQkJfQoJCQkJCgkJCQlicmVhazsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQkJYnJlYWs7CgkJfQoJCQkKCQlyZXR1cm4gJG91dHB1dFN0cjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9EYXRhIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIHJlbmRlcmluZyB0aGUgCgkgKiBkYXRhIGVsZW1lbnQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3skY29kZX0nIFNtYXJ0VGFnIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIFJlc2V0IFBhc3N3b3JkIGZvcm1zLiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fTWVzc2FnZSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhlIAoJICogbWVzc2FnZSBlbGVtZW50IGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZCBhbmQgdGhlIGZvcm0gY29uZmlndXJhdGlvbi4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX21lc3NhZ2UoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCgkJaWYoaXNzZXQoJHR5cGUpKQoJCXsKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCQl7CgkJCQljYXNlICJlcnJvciI6CgkJCQkJaWYoJGZvcm0tPmVycm9yICE9ICIiKQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAiPHAgY2xhc3M9XCJtbS1lcnJvclwiPiIuJGZvcm0tPmVycm9yLiI8L3A+IjsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJzdWNjZXNzIjoKCQkJCQlpZigkZm9ybS0+c3VjY2VzcyAhPSAiIikKCQkJCQl7CgkJCQkJCSRvdXRwdXRTdHIgLj0gIjxwIGNsYXNzPVwibW0tc3VjY2Vzc1wiPiIuJGZvcm0tPnN1Y2Nlc3MuIjwvcD4iOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0cjsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndHlwZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciB7JGNvZGV9IFNtYXJ0VGFnIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fQnV0dG9uIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIAoJICogcmV0dXJuaW5nIHRoZSBhcHByb3ByaWF0ZSBqYXZhc2NyaXB0IHRvIHN1Ym1pdCB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9idXR0b24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCgkJaWYoaXNzZXQoJHR5cGUpKQoJCXsKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCQl7CgkJCQljYXNlICJzdWJtaXQiOgoJCQkJCWlmKCFpc3NldCgkbGFiZWwpKQoJCQkJCXsKCQkJCQkJJGxhYmVsID0gIlN1Ym1pdCI7CgkJCQkJfQoJCQkJCWlmKCFpc3NldCgkY29sb3IpKQoJCQkJCXsKCQkJCQkJJGNvbG9yID0gIiI7CgkJCQkJfQoJCQkJCWlmKCFpc3NldCgkY2xhc3MpKQoJCQkJCXsKCQkJCQkJJGN1c3RvbUNsYXNzID0gIm1tLWJ1dHRvbiB7JGNvbG9yfSI7CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQkkY3VzdG9tQ2xhc3MgPSAkY2xhc3M7CgkJCQkJfQoJCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPVwic3VibWl0XCIgbmFtZT1cInN1Ym1pdFwiIHZhbHVlPVwieyRsYWJlbH1cIiBpZD1cIm1tLXN1Ym1pdC1idXR0b25cIiBjbGFzcz1cInskY3VzdG9tQ2xhc3N9XCIgLz4iOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0cjsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndHlwZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciB7JGNvZGV9IFNtYXJ0VGFnIjsKCQl9CgkJCgl9Cn0KCg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(33, 'protectedcontentview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KIGNsYXNzIE1NX1Byb3RlY3RlZENvbnRlbnRWaWV3CiB7CgogCXB1YmxpYyBmdW5jdGlvbiBwb3N0UHVibGlzaGluZ0JveCgkcG9zdCkKIAl7CQogCQkkaW5mbyA9IG5ldyBzdGRDbGFzcygpOwogCQkKIAkJLy8vaW5pdGlhbGl6YXRpb24KIAkJJGluZm8tPmV4aXN0aW5nX2FjY2Vzc19yaWdodHMgPSAiIjsKIAkJJGluZm8tPnByb3RlY3RlZF9jYXRlZ29yaWVzID0gIiI7CiAJCSRpbmZvLT5leGlzdGluZ19jb3JlcGFnZV9mZWF0dXJlcyA9ICIiOwogCQkkaW5mby0+bW1fY29yZV9wYWdlc19tZXRhX3N0eWxlID0gIiI7CiAJCSRpbmZvLT5tbV9wcm90ZWN0ZWRfY2F0ZWdvcnlfbWV0YSA9ICJkaXNwbGF5Om5vbmU7IjsKIAkJJGluZm8tPmlzX2ZyZWUgPSAncGFpZCc7CiAJCQogCQlpZighaXNzZXQoJHBvc3QtPnBhZ2VfdHlwZSkpCiAJCXsKIAkJCSRwb3N0LT5wYWdlX3R5cGUgPSBudWxsOwogCQl9CgogCQlpZighTU1fQWNjZXNzUmlnaHRzVmlldzo6aXNQYWdlKCRwb3N0LT5wYWdlX3R5cGUpKQogCQl7CiAJCQkkaW5mby0+bW1fY29yZV9wYWdlc19tZXRhX3N0eWxlID0gImRpc3BsYXk6IG5vbmU7IjsKIAkJfQogCQllbHNlCiAJCXsKIAkJCS8vLy8vIHNldHVwIGNvcmUgcGFnZSBkcm9wZG93bgogCQkJJGRlZmF1bHRfcGFnZXMgPSBNTV9Db3JlUGFnZTo6Z2V0RGVmYXVsdFBhZ2VzKCk7CiAJCQkkZGVmYXVsdFBhZ2VQcm9wZXJ0aWVzID0gbnVsbDsKIAkJCWlmKE1NX0NvcmVQYWdlOjppc0RlZmF1bHRDb3JlUGFnZSgkcG9zdC0+SUQpKQogCQkJewogCQkJCSRkZWZhdWx0UGFnZVByb3BlcnRpZXMgPSBNTV9Db3JlUGFnZTo6Z2V0RGVmYXVsdENvcmVQYWdlU2V0dGluZ3NCeUlkKCRwb3N0LT5JRCk7CiAJCQl9CiAJCQkKIAkJCSRwYWdlcyA9IGFycmF5KCk7CiAJCQlmb3JlYWNoKCRkZWZhdWx0X3BhZ2VzIGFzICRyb3cpCiAJCQl7CiAJCQkJaWYoaXNzZXQoJGRlZmF1bHRQYWdlUHJvcGVydGllcy0+Y29yZV9wYWdlX3R5cGVfaWQpICYmIGludHZhbCgkZGVmYXVsdFBhZ2VQcm9wZXJ0aWVzLT5jb3JlX3BhZ2VfdHlwZV9pZCk+MCAmJiAkcm93LT5pZCA9PSAkZGVmYXVsdFBhZ2VQcm9wZXJ0aWVzLT5jb3JlX3BhZ2VfdHlwZV9pZCkKIAkJCQl7CiAJCQkJCSRwYWdlc1skcm93LT5pZF0gPSAkcm93LT5uYW1lOwkKIAkJCQl9CiAJCQkJZWxzZSBpZihNTV9Db3JlUGFnZTo6aXNBdmFpbGFibGUoJHJvdy0+aWQsICRwb3N0LT5JRCkpCiAJCQkJewogCQkJCQkkcGFnZXNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsJCiAJCQkJfQogCQkJfQogCQkJCiAJCQkkcGFnZV9zZXR0aW5ncyA9IE1NX0NvcmVQYWdlOjpnZXRDb3JlUGFnZVNldHRpbmdzQnlQYWdlSUQoJHBvc3QtPklEKTsKIAkJCSRjb3JlUGFnZVR5cGVJZCA9IGFycmF5KCk7CiAJCQlpZihpc19hcnJheSgkcGFnZV9zZXR0aW5ncykpCiAJCQl7CiAJCQkJaWYoY291bnQoJHBhZ2Vfc2V0dGluZ3MpPT0xKQogCQkJCXsKIAkJCQkJJHBhZ2Vfc2V0dGluZyA9ICRwYWdlX3NldHRpbmdzWzBdOwoJIAkJCQkkY29yZVBhZ2VUeXBlSWQgPSAkcGFnZV9zZXR0aW5nLT5jb3JlX3BhZ2VfdHlwZV9pZDsKCSAJCQkJCgkJCQkJJGRlZmF1bHQgPSBNTV9Db3JlUGFnZTo6Z2V0RGVmYXVsdENvcmVQYWdlQnlUeXBlKCRjb3JlUGFnZVR5cGVJZCk7CgkgCQkJCQoJCQkJCWlmICgoJGRlZmF1bHQgIT0gbnVsbCkgJiYgKCRkZWZhdWx0LT5wYWdlX2lkID09ICRwb3N0LT5JRCkpCgkgCQkJCXsKCSAJCQkJCSRpbmZvLT5kZWZhdWx0X2ljb24gPSBNTV9VdGlsczo6Z2V0RGVmYXVsdEZsYWcoIkRlZmF1bHQgQ29yZSBQYWdlIiwgIiIsIHRydWUsICdtYXJnaW4tcmlnaHQ6NXB4OycpOwoJIAkJCQl9CiAJCQkJfQogCQkJCWVsc2UgaWYgKGNvdW50KCRwYWdlX3NldHRpbmdzKSA+IDEpCiAJCQkJewkKCSAJCQkJZm9yZWFjaCgkcGFnZV9zZXR0aW5ncyBhcyAkc2V0dGluZykKCSAJCQkJewoJIAkJCQkJJGNvcmVQYWdlVHlwZUlkID0gJHNldHRpbmctPmNvcmVfcGFnZV90eXBlX2lkOwoJIAkJCQl9CgkJCQkJJGRlZmF1bHQgPSBNTV9Db3JlUGFnZTo6Z2V0RGVmYXVsdENvcmVQYWdlQnlUeXBlKCRjb3JlUGFnZVR5cGVJZCk7CgkJCQkJaWYoaXNzZXQoJHBvc3QtPklEKSAmJiBpc3NldCgkZGVmYXVsdC0+cGFnZV9pZCkpCgkJCQkJewkKCQkJCQkJaWYoJGRlZmF1bHQtPnBhZ2VfaWQgPT0gJHBvc3QtPklEKQoJCSAJCQkJewoJCSAJCQkJCSRpbmZvLT5kZWZhdWx0X2ljb24gPSBNTV9VdGlsczo6Z2V0RGVmYXVsdEZsYWcoIkRlZmF1bHQgQ29yZSBQYWdlIiwgIiIsIHRydWUsICdtYXJnaW4tcmlnaHQ6NXB4OycpOwoJCSAJCQkJfQoJCQkJCX0KIAkJCQl9CiAJCQl9CiAJCQkKIAkJCWlmKCRjb3JlUGFnZVR5cGVJZD09TU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT04pewogCQkJCSRjb3JlUGFnZVR5cGVJZCA9IE1NX0NvcmVQYWdlVHlwZTo6JFBBSURfQ09ORklSTUFUSU9OOwogCQkJCSRpbmZvLT5pc19mcmVlID0gJ2ZyZWUnOwogCQkJfQoKIAkJCSRpbmZvLT5jb3JlUGFnZVR5cGVJZCA9ICRjb3JlUGFnZVR5cGVJZDsKIAkJCSRpbmZvLT5leGlzdGluZ19jb3JlcGFnZV9mZWF0dXJlcyA9IE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkcGFnZXMsICRjb3JlUGFnZVR5cGVJZCk7CiAJCX0KIAkJCiAJCS8vIGdyYWIgc29tZSBkYXRhIGZvciBhY2Nlc3MgcmlnaHRzCgkJJHBjID0gbmV3IE1NX1Byb3RlY3RlZENvbnRlbnRFbmdpbmUoKTsKCQkkcm93cyA9ICRwYy0+Z2V0UG9zdEFjY2Vzc1JpZ2h0cygkcG9zdC0+SUQpOwoJCQoJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQl7CgkJCSRyb3ctPmVkaXRfaWNvbiA9IE1NX1V0aWxzOjpnZXRJY29uKCdwZW5jaWwnLCAneWVsbG93JywgJzEuM2VtJywgJzJweCcpOwoJCQkKCQkJaWYoJHJvdy0+YWNjZXNzX3R5cGUgPT0gIm1lbWJlcl90eXBlIikKCQkJewoJCQkJJHJvdy0+dHlwZV9pY29uID0gTU1fVXRpbHM6OmdldEFjY2Vzc0ljb24oTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkcm93LT50eXBlX2ljb24gPSBNTV9VdGlsczo6Z2V0QWNjZXNzSWNvbihNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9CVU5ETEUpOwoJCQl9CgkJCQkKCQkJJHJvdy0+ZGVsZXRlX2ljb24gPSBNTV9VdGlsczo6Z2V0SWNvbigndHJhc2gtbycsICdyZWQnLCAnMS4zZW0nLCAnMnB4Jyk7CgkJCQoJCQkkaW5mby0+ZXhpc3RpbmdfYWNjZXNzX3JpZ2h0cyAuPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fVEVNUExBVEVfTUVUQS4iL2FjY2Vzc3Jvdy5odG1sLnBocCIsICRyb3cpOwoJCX0KCQkKCQkvLyBhZGQgcHJvdGVjdGVkIGNhdGVnb3JpZXMKCQkkY2F0ZWdvcmllcyA9IGdldF90aGVfY2F0ZWdvcnkoJHBvc3QtPklEKTsKCQkJCgkJaWYoaXNfYXJyYXkoJGNhdGVnb3JpZXMpICYmIGNvdW50KCRjYXRlZ29yaWVzKSA+IDApCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCSRjYXRlZ29yeUlkcyA9IGFycmF5KCk7CgkJCQoJCQlmb3JlYWNoKCRjYXRlZ29yaWVzIGFzICRjYXRlZ29yeSkKCQkJewoJCQkJJG1lbWJlcnNoaXBzID0gYXJyYXkoKTsKCQkJCSRidW5kbGVzID0gYXJyYXkoKTsKCQkJCQoJCQkJLy8gY2hlY2sgbWVtYmVyc2hpcCBsZXZlbHMKCQkJCSRzcWwgPSAiU0VMRUNUIG1lbWJlcnNoaXBzLmlkLCBtZW1iZXJzaGlwcy5uYW1lIEZST00gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMX0NBVEVHT1JJRVMuIiBhcyBjYXRlZ29yaWVzLCAiOwoJCQkJJHNxbCAuPSBNTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIGFzIG1lbWJlcnNoaXBzIFdIRVJFIGNhdGVnb3JpZXMuY2F0ZWdvcnlfaWQgPSAneyRjYXRlZ29yeS0+dGVybV9pZH0nICI7CgkJCQkkc3FsIC49ICJBTkQgY2F0ZWdvcmllcy5tZW1iZXJzaGlwX2xldmVsX2lkID0gbWVtYmVyc2hpcHMuaWQgT1JERVIgQlkgbWVtYmVyc2hpcHMubmFtZSBBU0M7IjsKCQkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQkJCgkJCQlpZigkcmVzdWx0cykKCQkJCXsKCQkJCQlmb3JlYWNoKCRyZXN1bHRzIGFzICRyb3cpCgkJCQkJewoJCQkJCQkkbWVtYmVyc2hpcHNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQkJCQl9CQkKCQkJCX0KCQkKCQkJCS8vIGNoZWNrIGJ1bmRsZXMKCQkJCSRzcWwgPSAiU0VMRUNUIGJ1bmRsZXMuaWQsIGJ1bmRsZXMubmFtZSBGUk9NICIuTU1fVEFCTEVfQlVORExFX0NBVEVHT1JJRVMuIiBhcyBjYXRlZ29yaWVzLCAiOwoJCQkJJHNxbCAuPSBNTV9UQUJMRV9CVU5ETEVTLiIgYXMgYnVuZGxlcyBXSEVSRSBjYXRlZ29yaWVzLmNhdGVnb3J5X2lkID0gJ3skY2F0ZWdvcnktPnRlcm1faWR9JyAiOwoJCQkJJHNxbCAuPSAiQU5EIGNhdGVnb3JpZXMuYnVuZGxlX2lkID0gYnVuZGxlcy5pZCBPUkRFUiBCWSBidW5kbGVzLm5hbWUgQVNDOyI7CgkJCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQkJCWlmKCRyZXN1bHRzKQoJCQkJewoJCQkJCWZvcmVhY2goJHJlc3VsdHMgYXMgJHJvdykKCQkJCQl7CgkJCQkJCSRidW5kbGVzWyRyb3ctPmlkXSA9ICRyb3ctPm5hbWU7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQlpZihjb3VudCgkbWVtYmVyc2hpcHMpID4gMCB8fCBjb3VudCgkYnVuZGxlcykgPiAwKQoJCQkJewoJCQkJCSRpbmZvLT5tbV9wcm90ZWN0ZWRfY2F0ZWdvcnlfbWV0YSA9ICIiOwoJCQkJCQoJCQkJCSRpbmZvLT5wcm90ZWN0ZWRfY2F0ZWdvcmllcyAuPSAiPGRpdiBzdHlsZT1cImZvbnQtc2l6ZToxMnB4OyBsaW5lLWhlaWdodDoyMnB4OyBtYXJnaW4tYm90dG9tOjEwcHg7XCI+IjsKCQkJCQkkaW5mby0+cHJvdGVjdGVkX2NhdGVnb3JpZXMgLj0gTU1fVXRpbHM6OmdldEljb24oJ2Jvb2ttYXJrJywgJ3R1cnEnLCAnMS4zZW0nLCAnMnB4Jyk7CgkJCQkJJGluZm8tPnByb3RlY3RlZF9jYXRlZ29yaWVzIC49ICIgPHN0cm9uZz57JGNhdGVnb3J5LT5uYW1lfTwvc3Ryb25nPjxici8+IjsKCQkJCQkKCQkJCQlmb3JlYWNoKCRtZW1iZXJzaGlwcyBhcyAkaWQ9PiRuYW1lKQoJCQkJCXsKCQkJCQkJJHVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoTU1fTU9EVUxFX1BST0RVQ1RfU0VUVElOR1MsIE1NX01PRFVMRV9NRU1CRVJTSElQX0xFVkVMUykuIiZhdXRvbG9hZD0iLiRpZDsKCQkJCQkJJGluZm8tPnByb3RlY3RlZF9jYXRlZ29yaWVzIC49IE1NX1V0aWxzOjpnZXRBY2Nlc3NJY29uKE1NX09yZGVySXRlbUFjY2Vzczo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVAsICcnLCAnbWFyZ2luLWxlZnQ6MjBweDsnKTsKCQkJCQkJJGluZm8tPnByb3RlY3RlZF9jYXRlZ29yaWVzIC49ICIgIi5NTV9VdGlsczo6YWJicmV2U3RyaW5nKCRuYW1lLCAyNSk7CgkJCQkJCSRpbmZvLT5wcm90ZWN0ZWRfY2F0ZWdvcmllcyAuPSAiPHNwYW4gc3R5bGU9J2Zsb2F0OnJpZ2h0Oyc+PGEgaHJlZj0neyR1cmx9JyB0aXRsZT0nRWRpdCB7JG5hbWV9JyB0YXJnZXQ9J19ibGFuayc+Ii5NTV9VdGlsczo6Z2V0SWNvbigncGVuY2lsJywgJ3llbGxvdycsICcxLjNlbScsICcycHgnKS4iPC9hPjwvc3Bhbj48YnIvPiI7CgkJCQkJfQoJCQkJCQoJCQkJCWZvcmVhY2goJGJ1bmRsZXMgYXMgJGlkPT4kbmFtZSkKCQkJCQl7CgkJCQkJCSR1cmwgPSBNTV9Nb2R1bGVVdGlsczo6Z2V0VXJsKE1NX01PRFVMRV9QUk9EVUNUX1NFVFRJTkdTLCBNTV9NT0RVTEVfQlVORExFUykuIiZhdXRvbG9hZD0iLiRpZDsKCQkJCQkJJGluZm8tPnByb3RlY3RlZF9jYXRlZ29yaWVzIC49IE1NX1V0aWxzOjpnZXRBY2Nlc3NJY29uKE1NX09yZGVySXRlbUFjY2Vzczo6JEFDQ0VTU19UWVBFX0JVTkRMRSwgJycsICdtYXJnaW4tbGVmdDoyMHB4OycpOwoJCQkJCQkkaW5mby0+cHJvdGVjdGVkX2NhdGVnb3JpZXMgLj0gIiAiLk1NX1V0aWxzOjphYmJyZXZTdHJpbmcoJG5hbWUsIDI1KS4iPC9zcGFuPiAiOwoJCQkJCQkkaW5mby0+cHJvdGVjdGVkX2NhdGVnb3JpZXMgLj0gIjxzcGFuIHN0eWxlPSdmbG9hdDpyaWdodDsnPjxhIGhyZWY9J3skdXJsfScgdGl0bGU9J0VkaXQgeyRuYW1lfScgdGFyZ2V0PSdfYmxhbmsnPiIuTU1fVXRpbHM6OmdldEljb24oJ3BlbmNpbCcsICd5ZWxsb3cnLCAnMS4zZW0nLCAnMnB4JykuIjwvYT48L3NwYW4+PGJyLz4iOwoJCQkJCX0KCQkJCQkKCQkJCQkkaW5mby0+cHJvdGVjdGVkX2NhdGVnb3JpZXMgLj0gIjwvZGl2PiI7CgkJCQkJJGluZm8tPnByb3RlY3RlZF9jYXRlZ29yaWVzIC49ICI8ZGl2IGNsYXNzPVwiY2xlYXJcIj48L2Rpdj4iOwoJCQkJfQoJCQl9CgkJfQogCQkKCQkvLyBOb3QgdXNpbmcgTU1fUmVzcG9uc2UgYmVjYXVzZSB0aGlzIGlzIG5vdCBhIEFKQVggcmVzcG9uc2UuCgkJZWNobyBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iL3BhZ2VfbWV0YS5waHAiLCAkaW5mbyk7CiAJfQogfQ==', 0, '2018-11-21 06:38:53'),
(34, 'customeraddress', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogQ3VzdG9tZXJBZGRyZXNzIGlzIGFuIGFic3RyYWN0aW9uIG9mIGFuIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIGEgY3VzdG9tZXIsIGllIGEgYmlsbGluZyBvciBzaGlwcGluZyBhZGRyZXNzCiAqLwogCmNsYXNzIE1NX0N1c3RvbWVyQWRkcmVzcyB7CgkKCXByaXZhdGUgJGZpcnN0TmFtZSA9ICIiOwoJcHJpdmF0ZSAkbGFzdE5hbWUgPSAiIjsKCXByaXZhdGUgJGFkZHJlc3MxID0gIiI7Cglwcml2YXRlICRhZGRyZXNzMiA9ICIiOwoJcHJpdmF0ZSAkY2l0eSA9ICIiOwoJcHJpdmF0ZSAkc3RhdGUgPSAiIjsKCXByaXZhdGUgJHBvc3RhbENvZGUgPSAiIjsKCXByaXZhdGUgJHByb3ZpbmNlID0gIiI7Cglwcml2YXRlICRjb3VudHJ5ID0gIiI7Cglwcml2YXRlICRwaG9uZSA9ICIiOwoKCQoJLyoqCgkgKiBDb25zdHJ1Y3Rvci4gQWxsb3dzIHBvcHVsYXRpb24gb2YgdGhlIGFkZHJlc3Mgb2JqZWN0IG9uIGNyZWF0aW9uCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkZmlyc3ROYW1lPSIiLCAkbGFzdE5hbWU9IiIsICRhZGRyZXNzMT0iIiwgJGFkZHJlc3MyPSIiLCAkY2l0eT0iIiwgJHN0YXRlPSIiLCAkcG9zdGFsQ29kZT0iIiwgJHByb3ZpbmNlPSIiLCAkY291bnRyeT0iIiwgJHBob25lPSIiKQoJewoJCSRmaWVsZHMgPSBhcnJheSgiZmlyc3ROYW1lIiwgImxhc3ROYW1lIiwgImFkZHJlc3MxIiwgImFkZHJlc3MyIiwgImNpdHkiLCAic3RhdGUiLCAicG9zdGFsQ29kZSIsICJwcm92aW5jZSIsICJjb3VudHJ5IiwgInBob25lIik7CgkJZm9yZWFjaCAoJGZpZWxkcyBhcyAkZmllbGQpCgkJewoJCQkkdGhpcy0+JGZpZWxkID0gJCRmaWVsZDsKCQl9Cgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIGZpcnN0IG5hbWUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYWRkcmVzcwoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Rmlyc3ROYW1lKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5maXJzdE5hbWU7Cgl9CgkKCS8qKgoJICogU2V0IHRoZSBmaXJzdCBuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFkZHJlc3MKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkbmV3Rmlyc3ROYW1lIFRoZSBuZXcgZmlyc3QgbmFtZQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0Rmlyc3ROYW1lKCRuZXdGaXJzdE5hbWUpCgl7CgkJJHRoaXMtPmZpcnN0TmFtZSA9ICRuZXdGaXJzdE5hbWU7Cgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIGxhc3QgbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhZGRyZXNzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5sYXN0TmFtZTsKCX0KCQoJLyoqCgkgKiBTZXQgdGhlIGxhc3QgbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhZGRyZXNzCgkgKgoJICogQHBhcmFtIFN0cmluZyAkbmV3TGFzdE5hbWUgVGhlIG5ldyBsYXN0IG5hbWUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldExhc3ROYW1lKCRuZXdMYXN0TmFtZSkKCXsKCQkkdGhpcy0+bGFzdE5hbWUgPSAkbmV3TGFzdE5hbWU7Cgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIGFkZHJlc3MgbGluZTEKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFkZHJlc3NMaW5lMSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hZGRyZXNzMTsKCX0KCQoJLyoqCgkgKiBTZXRzIHRoZSBhZGRyZXNzIGxpbmUxCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBZGRyZXNzTGluZTEoJG5ld0FkZHJlc3MxKQoJewoJCSR0aGlzLT5hZGRyZXNzMSA9ICRuZXdBZGRyZXNzMTsJCgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIGFkZHJlc3MgbGluZTIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFkZHJlc3NMaW5lMigpCgl7CgkJcmV0dXJuICR0aGlzLT5hZGRyZXNzMjsKCX0KCQoJLyoqCgkgKiBTZXRzIHRoZSBhZGRyZXNzIGxpbmUyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBZGRyZXNzTGluZTIoJG5ld0FkZHJlc3MyKQoJewoJCSR0aGlzLT5hZGRyZXNzMiA9ICRuZXdBZGRyZXNzMjsKCX0KCQoJLyoqCgkgKiBSZXRyaWV2ZSB0aGUgYWRkcmVzcyBjaXR5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRDaXR5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmNpdHk7Cgl9CgkKCS8qKgoJICogU2V0cyB0aGUgYWRkcmVzcyBjaXR5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRDaXR5KCRuZXdDaXR5KQoJewoJCSR0aGlzLT5jaXR5ID0gJG5ld0NpdHk7Cgl9CgkKCQoJLyoqCgkgKiBSZXRyaWV2ZSB0aGUgc3RhdGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYWRkcmVzcwoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdGUoKQoJewoJCXJldHVybiAkdGhpcy0+c3RhdGU7Cgl9CgkKCS8qKgoJICogU2V0IHRoZSBzdGF0ZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhZGRyZXNzCgkgKgoJICogQHBhcmFtIFN0cmluZyAkbmV3U3RhdGUgVGhlIG5ldyBzdGF0ZQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdGUoJG5ld1N0YXRlKQoJewoJCSR0aGlzLT5zdGF0ZSA9ICRuZXdTdGF0ZTsKCX0KCQoJLyoqCgkgKiBSZXRyaWV2ZSB0aGUgcG9zdGFsIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYWRkcmVzcwoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UG9zdGFsQ29kZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5wb3N0YWxDb2RlOwoJfQoJCgkvKioKCSAqIFNldCB0aGUgcG9zdGFsIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgYWRkcmVzcwoJICoKCSAqIEBwYXJhbSBTdHJpbmcgJG5ld1Bvc3RhbENvZGUgVGhlIG5ldyBwb3N0YWwgY29kZQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0UG9zdGFsQ29kZSgkbmV3UG9zdGFsQ29kZSkKCXsKCQkkdGhpcy0+cG9zdGFsQ29kZSA9ICRuZXdQb3N0YWxDb2RlOwoJfQoJCgkvKioKCSAqIFJldHJpZXZlIHRoZSBhZGRyZXNzIHByb3ZpbmNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm92aW5jZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5wcm92aW5jZTsKCX0KCQoJLyoqCgkgKiBTZXRzIHRoZSBhZGRyZXNzIHByb3ZpbmNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRQcm92aW5jZSgkbmV3UHJvdmluY2UpCgl7CgkJJHRoaXMtPnByb3ZpbmNlID0gJG5ld1Byb3ZpbmNlOwoJfQoJCgkvKioKCSAqIFJldHJpZXZlIHRoZSBhZGRyZXNzIGNvdW50cnkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldENvdW50cnkoKQoJewoJCXJldHVybiAkdGhpcy0+Y291bnRyeTsKCX0KCQoJLyoqCgkgKiBTZXRzIHRoZSBhZGRyZXNzIGNvdW50cnkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldENvdW50cnkoJG5ld0NvdW50cnkpCgl7CgkJJHRoaXMtPmNvdW50cnkgPSAkbmV3Q291bnRyeTsKCX0KCQoJLyoqCgkgKiBSZXRyaWV2ZSB0aGUgYWRkcmVzcyBwaG9uZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UGhvbmUoKQoJewoJCXJldHVybiAkdGhpcy0+cGhvbmU7Cgl9CgkKCS8qKgoJICogU2V0cyB0aGUgYWRkcmVzcyBwaG9uZQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0UGhvbmUoJG5ld1Bob25lKQoJewoJCSR0aGlzLT5waG9uZSA9ICRuZXdQaG9uZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0QmlsbGluZ0FkZHJlc3MoJGRhdGEpCgl7CgkJJHRoaXMtPmZpcnN0TmFtZSA9ICRkYXRhLT5iaWxsaW5nX2ZpcnN0X25hbWU7CgkJJHRoaXMtPmxhc3ROYW1lID0gJGRhdGEtPmJpbGxpbmdfbGFzdF9uYW1lOwoJCSR0aGlzLT5waG9uZSA9ICRkYXRhLT5iaWxsaW5nX3Bob25lOwoJCSR0aGlzLT5hZGRyZXNzMSA9ICRkYXRhLT5iaWxsaW5nX2FkZHJlc3MxOwoJCSR0aGlzLT5hZGRyZXNzMiA9ICRkYXRhLT5iaWxsaW5nX2FkZHJlc3MyOwoJCSR0aGlzLT5jaXR5ID0gJGRhdGEtPmJpbGxpbmdfY2l0eTsKCQkkdGhpcy0+cHJvdmluY2UgPSAkZGF0YS0+YmlsbGluZ19wcm92aW5jZTsKCQkkdGhpcy0+c3RhdGUgPSAkZGF0YS0+YmlsbGluZ19zdGF0ZTsKCQkkdGhpcy0+cG9zdGFsQ29kZSA9ICRkYXRhLT5iaWxsaW5nX3Bvc3RhbF9jb2RlOwoJCSR0aGlzLT5jb3VudHJ5ID0gJGRhdGEtPmJpbGxpbmdfY291bnRyeTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U2hpcHBpbmdBZGRyZXNzKCRkYXRhKQoJewoJCSR0aGlzLT5maXJzdE5hbWUgPSAkZGF0YS0+c2hpcHBpbmdfZmlyc3RfbmFtZTsKCQkkdGhpcy0+bGFzdE5hbWUgPSAkZGF0YS0+c2hpcHBpbmdfbGFzdF9uYW1lOwoJCSR0aGlzLT5waG9uZSA9ICRkYXRhLT5zaGlwcGluZ19waG9uZTsKCQkkdGhpcy0+YWRkcmVzczEgPSAkZGF0YS0+c2hpcHBpbmdfYWRkcmVzczE7CgkJJHRoaXMtPmFkZHJlc3MyID0gJGRhdGEtPnNoaXBwaW5nX2FkZHJlc3MyOwoJCSR0aGlzLT5jaXR5ID0gJGRhdGEtPnNoaXBwaW5nX2NpdHk7CgkJJHRoaXMtPnByb3ZpbmNlID0gJGRhdGEtPnNoaXBwaW5nX3Byb3ZpbmNlOwoJCSR0aGlzLT5zdGF0ZSA9ICRkYXRhLT5zaGlwcGluZ19zdGF0ZTsKCQkkdGhpcy0+cG9zdGFsQ29kZSA9ICRkYXRhLT5zaGlwcGluZ19wb3N0YWxfY29kZTsKCQkkdGhpcy0+Y291bnRyeSA9ICRkYXRhLT5zaGlwcGluZ19jb3VudHJ5OwoJfQp9', 0, '2018-11-21 06:38:53'),
(35, 'cronengine', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQ3JvbkVuZ2luZQp7CglwdWJsaWMgc3RhdGljICRNTV9DUk9OX0hPT0sgPSAibW1fY3Jvbl9ob29rIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0NIRUNLX1NDSEVEVUxFRF9FVkVOVF9RVUVVRSA9ICJtbV9jaGVja19zY2hlZHVsZWRfZXZlbnRfcXVldWUiOwoJcHVibGljIHN0YXRpYyAkTU1fU0VTU0lPTl9SRUFQID0gIm1tX3Nlc3Npb25fcmVhcCI7CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2V0dXAoKQoJewoJCWlmKCF3cF9uZXh0X3NjaGVkdWxlZChzZWxmOjokTU1fQ1JPTl9IT09LKSkKCQl7CgkJCXdwX3NjaGVkdWxlX2V2ZW50KHRpbWUoKSwgJ3R3aWNlZGFpbHknLCBzZWxmOjokTU1fQ1JPTl9IT09LKTsKCQl9CgkJCgkJaWYoIXdwX25leHRfc2NoZWR1bGVkKHNlbGY6OiRNTV9DSEVDS19TQ0hFRFVMRURfRVZFTlRfUVVFVUUpKQoJCXsKCQkJd3Bfc2NoZWR1bGVfZXZlbnQodGltZSgpLCAncXVldWVfY2hlY2tfaW50ZXJ2YWwnLCBzZWxmOjokTU1fQ0hFQ0tfU0NIRURVTEVEX0VWRU5UX1FVRVVFKTsKCQl9CgkJCgkJaWYoIXdwX25leHRfc2NoZWR1bGVkKHNlbGY6OiRNTV9TRVNTSU9OX1JFQVApKQoJCXsKCQkJd3Bfc2NoZWR1bGVfZXZlbnQodGltZSgpLCAnc2Vzc2lvbl9yZWFwX2ludGVydmFsJywgc2VsZjo6JE1NX1NFU1NJT05fUkVBUCk7CgkJfQoJCQoJCSRjZSA9IG5ldyBNTV9Dcm9uRW5naW5lKCk7CgkJYWRkX2FjdGlvbihzZWxmOjokTU1fQ1JPTl9IT09LLCBhcnJheSgkY2UsICdwZXJmb3JtRGFpbHlUYXNrcycpKTsKCQlhZGRfYWN0aW9uKHNlbGY6OiRNTV9DSEVDS19TQ0hFRFVMRURfRVZFTlRfUVVFVUUsYXJyYXkoJ01NX1NjaGVkdWxlZEV2ZW50JywnY2FsbFN5bmNocm9uaXphdGlvbkhhbmRsZXInKSk7CgkJYWRkX2FjdGlvbihzZWxmOjokTU1fU0VTU0lPTl9SRUFQLGFycmF5KCRjZSwncmVhcFNlc3Npb25zJykpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNsZWFudXAoKQoJewoJCXdwX2NsZWFyX3NjaGVkdWxlZF9ob29rKCBzZWxmOjokTU1fQ1JPTl9IT09LICk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtRGFpbHlUYXNrcygpCgl7CgkJJHRoaXMtPmNoZWNrRm9yRXhwaXJlZEFjY2VzcygpOwoJCSR0aGlzLT5jaGVja0ZvckNhbmNlbGVkQWNjZXNzKCk7CgkJJHRoaXMtPmNoZWNrRm9yT3ZlcmR1ZUFjY2VzcygpOwoJCU1NX0FjdGl2aXR5TG9nOjpwZXJmb3JtQ2xlYW51cCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmVhcFNlc3Npb25zKCkKCXsKICAJCU1NX1Nlc3Npb246OnNlc3Npb25SZWFwKCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gY2hlY2tGb3JFeHBpcmVkQWNjZXNzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8gY2hlY2sgbWVtYmVyc2hpcHMKCQkkc3FsID0gIlNFTEVDVCB3cF91c2VyX2lkIEZST00gIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiBXSEVSRSBzdGF0dXMgIT0gIi5NTV9TdGF0dXM6OiRFWFBJUkVEOwoJCSRzcWwgLj0gIiBBTkQgZXhwaXJhdGlvbl9kYXRlIDwgJyIuTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCkuIicgQU5EIGV4cGlyYXRpb25fZGF0ZSAhPSAnMDAwMC0wMC0wMCAwMDowMDowMCciOwoJCQoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJZm9yZWFjaCgkcmVzdWx0IGFzICRyb3cpCgkJewoJCQkkY3JudFVzZXIgPSBuZXcgTU1fVXNlcigkcm93LT53cF91c2VyX2lkKTsKCQkKCQkJaWYoJGNybnRVc2VyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCS8vIGdldCBzdGF0dXMgbWV0aG9kIHVwZGF0ZXMgc3RhdHVzIGFwcHJvcHJpcmF0ZWx5CgkJCQkkY3JudFVzZXItPmdldFN0YXR1cygpOwoJCQl9CgkJfQoJCQoJCS8vIGNoZWNrIGJ1bmRsZXMKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9BUFBMSUVEX0JVTkRMRVMuIiBXSEVSRSAiOwoJCSRzcWwgLj0gImFjY2Vzc190eXBlID0gJyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIuIicgQU5EIHN0YXR1cyAhPSAiLk1NX1N0YXR1czo6JEVYUElSRUQ7CgkJJHNxbCAuPSAiIEFORCBleHBpcmF0aW9uX2RhdGUgPCAnIi5NTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKS4iJyBBTkQgZXhwaXJhdGlvbl9kYXRlICE9ICcwMDAwLTAwLTAwIDAwOjAwOjAwJyI7CgkJCgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQlmb3JlYWNoKCRyZXN1bHQgYXMgJHJvdykKCQl7CgkJCSRjcm50QnVuZGxlID0gTU1fQXBwbGllZEJ1bmRsZTo6Z2V0QXBwbGllZEJ1bmRsZSgkcm93LT5hY2Nlc3NfdHlwZV9pZCwgJHJvdy0+YnVuZGxlX2lkKTsKCQkKCQkJaWYoJGNybnRCdW5kbGUtPmlzVmFsaWQoKSkKCQkJewoJCQkJLy8gZ2V0IHN0YXR1cyBtZXRob2QgdXBkYXRlcyBzdGF0dXMgYXBwcm9wcmlyYXRlbHkKCQkJCSRjcm50QnVuZGxlLT5nZXRTdGF0dXMoKTsKCQkJfQoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBjaGVja0ZvckNhbmNlbGVkQWNjZXNzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8gY2hlY2sgbWVtYmVyc2hpcHMKCQkkc3FsID0gIlNFTEVDVCB3cF91c2VyX2lkIEZST00gIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiBXSEVSRSBzdGF0dXMgPSAiLk1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OOwoJCSRzcWwgLj0gIiBBTkQgY2FuY2VsbGF0aW9uX2RhdGUgPCAnIi5NTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKS4iJyBBTkQgY2FuY2VsbGF0aW9uX2RhdGUgIT0gJzAwMDAtMDAtMDAgMDA6MDA6MDAnIjsKCQkKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQoJCWZvcmVhY2goJHJlc3VsdCBhcyAkcm93KQoJCXsKCQkJJGNybnRVc2VyID0gbmV3IE1NX1VzZXIoJHJvdy0+d3BfdXNlcl9pZCk7CgkJCgkJCWlmKCRjcm50VXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQkvLyBnZXQgc3RhdHVzIG1ldGhvZCB1cGRhdGVzIHN0YXR1cyBhcHByb3ByaXJhdGVseQoJCQkJJGNybnRVc2VyLT5nZXRTdGF0dXMoKTsKCQkJfQoJCX0KCQkKCQkvLyBjaGVjayBidW5kbGVzCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgV0hFUkUgIjsKCQkkc3FsIC49ICJhY2Nlc3NfdHlwZSA9ICciLk1NX0FwcGxpZWRCdW5kbGU6OiRBQ0NFU1NfVFlQRV9VU0VSLiInIEFORCBzdGF0dXMgPSAiLk1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OOwoJCSRzcWwgLj0gIiBBTkQgY2FuY2VsbGF0aW9uX2RhdGUgPCAnIi5NTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKS4iJyBBTkQgY2FuY2VsbGF0aW9uX2RhdGUgIT0gJzAwMDAtMDAtMDAgMDA6MDA6MDAnIjsKCQkKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQoJCWZvcmVhY2goJHJlc3VsdCBhcyAkcm93KQoJCXsKCQkJJGNybnRCdW5kbGUgPSBNTV9BcHBsaWVkQnVuZGxlOjpnZXRBcHBsaWVkQnVuZGxlKCRyb3ctPmFjY2Vzc190eXBlX2lkLCAkcm93LT5idW5kbGVfaWQpOwoJCQoJCQlpZigkY3JudEJ1bmRsZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkvLyBnZXQgc3RhdHVzIG1ldGhvZCB1cGRhdGVzIHN0YXR1cyBhcHByb3ByaXJhdGVseQoJCQkJJGNybnRCdW5kbGUtPmdldFN0YXR1cygpOwoJCQl9CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGNoZWNrRm9yT3ZlcmR1ZUFjY2VzcygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRwZW5kaW5nT3ZlcmR1ZVN1YnNjcmlwdGlvbnNUYWJsZSA9IE1NX1RBQkxFX0FVVEhORVRfUEVORElOR19PVkVSRFVFX1NVQlNDUklQVElPTlM7CgkJLy9ydW4gdGhlIGNoZWNrIG9ubHkgaWYgdGhlIGF1dGhuZXQgcGVuZGluZyBzdWJzY3JpcHRpb24gdGFibGUgd2FzIGdlbmVyYXRlZCBhdCBzb21lIHBvaW50LCBvdGhlcndpc2UgdGhpcyB3aWxsIGdlbmVyYXRlIGFuIGVycm9yCgkJaWYgKCR3cGRiLT5nZXRfdmFyKCJTSE9XIFRBQkxFUyBMSUtFICd7JHBlbmRpbmdPdmVyZHVlU3Vic2NyaXB0aW9uc1RhYmxlfSciKSA9PSAkcGVuZGluZ092ZXJkdWVTdWJzY3JpcHRpb25zVGFibGUpCgkJewoJCQkkc3FsID0gIlNFTEVDVCBpZCwgb3JkZXJfaXRlbV9pZCBGUk9NIHskcGVuZGluZ092ZXJkdWVTdWJzY3JpcHRpb25zVGFibGV9IFdIRVJFIGlzX3Byb2Nlc3NlZCA9IDAgQU5EICI7CgkJCSRzcWwgLj0gIm92ZXJkdWVfZGF0ZSA8ICciLk1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpLiInIEFORCBvdmVyZHVlX2RhdGUgIT0gJzAwMDAtMDAtMDAgMDA6MDA6MDAnIjsKCQkJCgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCQoJCQlmb3JlYWNoKCRyZXN1bHQgYXMgJHJvdykKCQkJewoJCQkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oJHJvdy0+b3JkZXJfaXRlbV9pZCk7CgkJCQoJCQkJaWYoJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSR1c2VySWQgPSBNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdXNlcklkKTsKCQkJCQkKCQkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJJHVzZXItPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRPVkVSRFVFKTsKCQkJCQkJJHJlc3VsdCA9ICR1c2VyLT5jb21taXRTdGF0dXNPbmx5KCk7CgkJCQkJCQoJCQkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCQkJCQl7CgkJCQkJCQlNTV9QYXltZW50VXRpbHM6OmNhbmNlbFN1YnNjcmlwdGlvbkZvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQkJCQkJCQoJCQkJCQkJJHdwZGItPnVwZGF0ZSgkcGVuZGluZ092ZXJkdWVTdWJzY3JpcHRpb25zVGFibGUsCgkJCQkJCQkJYXJyYXkoJ2lzX3Byb2Nlc3NlZCcgPT4gMSksCgkJCQkJCQkJYXJyYXkoICdJRCcgPT4gJHJvdy0+aWQgKSwKCQkJCQkJCQlhcnJheSgnJWQnKSwgYXJyYXkoJyVkJykpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQkvLyBjbGVhbiB1cCBhbnkgcGVuZGluZyBvdmVyZHVlIHN1YnNjcmlwdGlvbnMgdGhhdCBhcmUgb3ZlciAzIG1vbnRocyBvbGQKCQkJJGRhdGUgPSBkYXRlKCdZLW0tZCcsIHN0cnRvdGltZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKS4nIC0zIG1vbnRoJykpOwoJCQkkc3FsID0gImRlbGV0ZSBmcm9tIHskcGVuZGluZ092ZXJkdWVTdWJzY3JpcHRpb25zVGFibGV9IHdoZXJlIG92ZXJkdWVfZGF0ZSA8ICd7JGRhdGV9JyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYWRkUXVldWVDaGVja0ludGVydmFsUmVjdXJyZW5jZU9wdGlvbigkc2NoZWR1bGVzKQoJewoJCS8vIEFkZHMgdGhlIHF1ZXVlIGNoZWNrIGludGVydmFsIHNwZWNpZmllZCBiZWxvdyB0byB0aGUgZXhpc3Rpbmcgc2NoZWR1bGVzLgoJCSRzY2hlZHVsZXNbJ3F1ZXVlX2NoZWNrX2ludGVydmFsJ10gPSBhcnJheSgKCQkJJ2ludGVydmFsJyA9PiAxODAwLAoJCQknZGlzcGxheScgPT4gX18oICdFdmVyeSAzMCBtaW5zJyApCgkJKTsKCQkkc2NoZWR1bGVzWydzZXNzaW9uX3JlYXBfaW50ZXJ2YWwnXSA9IGFycmF5KAoJCQknaW50ZXJ2YWwnID0+IDMwMCwKCQkJJ2Rpc3BsYXknID0+IF9fKCAnRXZlcnkgNSBtaW51dGVzJyApCgkJKTsKCQlyZXR1cm4gJHNjaGVkdWxlczsKCX0KfQ==', 0, '2018-11-21 06:38:53'),
(36, 'duplicatesubscriptionsview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0R1cGxpY2F0ZVN1YnNjcmlwdGlvbnNWaWV3IGV4dGVuZHMgTU1fUkJBQ0FkbWluVmlldwp7CQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0VBUkNIID0gInNlYXJjaCI7CQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0FOQ0VMX1NVQlNDUklQVElPTiA9ICJjYW5jZWxTdWJzY3JpcHRpb24iOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TRUFSQ0g6CgkJCQkJcmV0dXJuICR0aGlzLT5nZW5lcmF0ZURhdGFHcmlkKCRwb3N0KTsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NBTkNFTF9TVUJTQ1JJUFRJT046CgkJCQkJcmV0dXJuICR0aGlzLT5jYW5jZWxEdXBsaWNhdGVTdWJzY3JpcHRpb24oJHBvc3QpOwkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQogCXB1YmxpYyBmdW5jdGlvbiBzZWFyY2goJHBvc3QsIE1NX0RhdGFHcmlkICRkZykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJG9pdCA9IE1NX1RBQkxFX09SREVSX0lURU1TOwoJCSRvdCA9IE1NX1RBQkxFX09SREVSUzsKCQkkdXQgPSAkd3BkYi0+dXNlcnM7CgkJJHVkdCA9IE1NX1RBQkxFX1VTRVJfREFUQTsKCQkKCQkkc3FsID0gIlNFTEVDVCBvaS5pZCwgbXUud3BfdXNlcl9pZCBhcyB1c2VyX2lkLCBDT05DQVQobXUuZmlyc3RfbmFtZSwnICcsbXUubGFzdF9uYW1lKSBBUyBtZW1iZXJfbmFtZSwgdS51c2VyX2VtYWlsLCAiLgoJCQkgICAib2kuZGVzY3JpcHRpb24gQVMgcHJvZHVjdCwgby5vcmRlcl9udW1iZXIsIG8uZGF0ZV9hZGRlZCwiOyAKCQkKCQkkc3FsRnJvbSA9ICAiRlJPTSB7JG9pdH0gb2kgTEVGVCBKT0lOIHskb3R9IG8gT04gKG9pLm9yZGVyX2lkID0gby5pZCkgSU5ORVIgSk9JTiAiLgoJCQkJCSIoU0VMRUNUIENPVU5UKGZvLnVzZXJfaWQpIEFTIGZyZXEgLGZvLnVzZXJfaWQsIGZvaS5pdGVtX2lkIEZST00geyRvaXR9IGZvaSBMRUZUIEpPSU4geyRvdH0gZm8gIi4KCQkJCQkiT04gKGZvaS5vcmRlcl9pZCA9IGZvLmlkKSBXSEVSRSBmb2kuaXNfcmVjdXJyaW5nPTEgQU5EIGZvaS5pdGVtX3R5cGU9JXMgQU5EIGZvaS5zdGF0dXM9JXMgIi4KCQkJCQkiR1JPVVAgQlkgZm8udXNlcl9pZCxmb2kuaXRlbV9pZCBoYXZpbmcgZnJlcSA+IDEpIEFTIGZ0IE9OICgob2kuaXRlbV9pZCA9IGZ0Lml0ZW1faWQpIEFORCAiLgoJCQkJCSIoby51c2VyX2lkID0gZnQudXNlcl9pZCkpIExFRlQgSk9JTiB7JHV0fSB1IE9OICh1LmlkID0gby51c2VyX2lkKSAgTEVGVCBKT0lOIHskdWR0fSBtdSBPTiAiLgoJCQkJCSIobXUud3BfdXNlcl9pZCA9IG8udXNlcl9pZCkgV0hFUkUgb2kuaXNfcmVjdXJyaW5nPTEgIi4KCQkJCQkiQU5EIG9pLml0ZW1fdHlwZT0lcyBBTkQgb2kuc3RhdHVzPSVzIE9SREVSIEJZIG8udXNlcl9pZCBkZXNjIjsKCQkKCQkkc3FsRnJvbSA9ICR3cGRiLT5wcmVwYXJlKCRzcWxGcm9tLE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkcsTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QsTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyxNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCk7CgkJCgkJJHNxbFJlc3VsdENvdW50ID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCAiOwoJCSRzcWxSZXN1bHRDb3VudCAuPSAkc3FsRnJvbTsKCQkkY291bnRSb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsUmVzdWx0Q291bnQpOwoJCQoJCWlmKCRjb3VudFJvdy0+dG90YWwgPiAwKSAKCQl7CgkJCSRzcWwgLj0gIiB7JGNvdW50Um93LT50b3RhbH0gYXMgdG90YWwgeyRzcWxGcm9tfSI7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gYXJyYXkoKTsKCQl9CgoJCSRzcWwgLj0gIix7JGRnLT5zb3J0Qnl9IHskZGctPnNvcnREaXJ9ICI7CgkJJHNxbCAuPSAkZGctPmdldExpbWl0U3FsKCk7CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCwgT0JKRUNUX0spOwkJCgkJcmV0dXJuIGFycmF5X3ZhbHVlcygkcm93cyk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YUdyaWQoJHBvc3Q9bnVsbCkKCXsKCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9kdXBsaWNhdGVfc3Vic2NyaXB0aW9ucy5kYXRhZ3JpZC5waHAiLCAkcG9zdCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGNhbmNlbER1cGxpY2F0ZVN1YnNjcmlwdGlvbigkcG9zdCkKCXsKCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkcG9zdFsnb3JkZXJJdGVtSWQnXSk7CgkJaWYgKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQl7CgkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQlpZiAoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRwYXltZW50U2VydmljZSA9ICRvcmRlci0+Z2V0UGF5bWVudE1ldGhvZCgpOwoJCQkJJGNhbmNlbFJlc3VsdCA9ICRwYXltZW50U2VydmljZS0+Y2FuY2VsU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0pOwoJCQkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzU3VjY2VzcygkY2FuY2VsUmVzdWx0KSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGNhbmNlbFJlc3VsdC0+Z2V0TWVzc2FnZSgpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBjYW5jZWwgc3Vic2NyaXB0aW9uOiBJbnZhbGlkIE9yZGVyIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGNhbmNlbCBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbiBpcyBpbnZhbGlkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CiB9Cg==', 0, '2018-11-21 06:38:53'),
(37, 'affiliateintegrationview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQWZmaWxpYXRlSW50ZWdyYXRpb25WaWV3IGV4dGVuZHMgTU1fUkJBQ0FkbWluVmlldwp7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TSE9XX0FERElUSU9OQUxfT1BUSU9OU19ESUFMT0cgPSAic2hvd0FkZGl0aW9uYWxPcHRpb25zRGlhbG9nIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NIT1dfUFJPVklERVJfT1BUSU9OUyA9ICJzaG93UHJvdmlkZXJPcHRpb25zIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NBVkVfUFJPVklERVJfT1BUSU9OUyA9ICJzYXZlUHJvdmlkZXJPcHRpb25zIjsKIAkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NIT1dfUFJPVklERVJfT1BUSU9OUzoKCQkJCQlyZXR1cm4gJHRoaXMtPmdldFByb3ZpZGVyT3B0aW9ucygkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TSE9XX0FERElUSU9OQUxfT1BUSU9OU19ESUFMT0c6CgkJCQkJcmV0dXJuICR0aGlzLT5nZW5lcmF0ZUFkZGl0aW9uYWxPcHRpb25zRGlhbG9nKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NBVkVfUFJPVklERVJfT1BUSU9OUzoKCQkJCQlyZXR1cm4gJHRoaXMtPnNhdmVQcm92aWRlck9wdGlvbnMoJHBvc3QpOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUFkZGl0aW9uYWxPcHRpb25zRGlhbG9nKCRwb3N0KSAKCXsKCQlpZiAoIWlzc2V0KCRwb3N0Wydwcm92aWRlcl90b2tlbiddKSkgCgkJewoJCQkvL3Nob3VsZG50IGV2ZXIgaGFwcGVuCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byByZXRyaWV2ZSBwcm92aWRlciBvcHRpb25zOiBubyB0b2tlbiB3YXMgcmVxdWVzdGVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHByb3ZpZGVyX3Rva2VuID0gJHBvc3RbJ3Byb3ZpZGVyX3Rva2VuJ107CgkJJHByb3ZpZGVyID0gTU1fQWZmaWxpYXRlUHJvdmlkZXJGYWN0b3J5OjpnZXRQcm92aWRlcigkcHJvdmlkZXJfdG9rZW4pOwoJCWlmICgkcHJvdmlkZXIgIT0gbnVsbCkgCgkJewoJCQkkY29uZmlnX3Jlc3BvbnNlID0gJHByb3ZpZGVyLT5jb25maWd1cmVGcm9tT3B0aW9ucygkcG9zdCk7CgkJCWlmICgkY29uZmlnX3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJCXsKCQkJCXJldHVybiAkY29uZmlnX3Jlc3BvbnNlOwoJCQl9CgkJCQoJCQkvLyBnZW5lcmF0ZSBIVE1MCgkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0ID0gIjxkaXYgc3R5bGU9XCJ3aWR0aDo1MDBweDtcIj4iOwoJCQkKCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gJHByb3ZpZGVyLT5yZW5kZXJBZGRpdGlvbmFsT3B0aW9ucygpOwoJCQkKCQkJaWYoJHByb3ZpZGVyLT5zdXBwb3J0c0ZlYXR1cmUoTU1fQWZmaWxpYXRlUHJvdmlkZXJGZWF0dXJlczo6QUZGSUxJQVRFX0FDQ09VTlRfQ1JFQVRJT04pKQoJCQl7CgkJCQkkcHJvZmlsZXNfcmVzcG9uc2UgPSAkcHJvdmlkZXItPmdldFBheW91dFByb2ZpbGVzKCk7CgkJCQkKCQkJCWlmICgkcHJvZmlsZXNfcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQkJCXsKCQkJCQlyZXR1cm4gJHByb2ZpbGVzX3Jlc3BvbnNlOwoJCQkJfQoJCQkJZWxzZSBpZiAoaXNfYXJyYXkoJHByb2ZpbGVzX3Jlc3BvbnNlLT5tZXNzYWdlKSAmJiAoY291bnQoJHByb2ZpbGVzX3Jlc3BvbnNlLT5tZXNzYWdlKSA9PSAwKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGlzIGFmZmlsaWF0ZSBwcm92aWRlciBoYXMgbm8gcGF5b3V0IHByb2ZpbGVzIGNvbmZpZ3VyZWQuIik7CgkJCQl9CgkJCQkkcHJvZmlsZXMgPSBhcnJheSgiIj0+Ik5vbmUiKSArICRwcm9maWxlc19yZXNwb25zZS0+bWVzc2FnZTsKCQkJCQkKCQkJCSRlbmNvZGUgPSBjcmVhdGVfZnVuY3Rpb24oJyYka2V5LCR2YWwnLCAnJGtleT1odG1sZW50aXRpZXMoJGtleSxFTlRfQ09NUEFUIHwgRU5UX0hUTUw0MDEsICJVVEYtOCIpOyAkdmFsPWh0bWxlbnRpdGllcygkdmFsLEVOVF9DT01QQVQgfCBFTlRfSFRNTDQwMSwgIlVURi04Iik7Jyk7CgkJCQlhcnJheV93YWxrKCRwcm9maWxlcywkZW5jb2RlKTsgLy9lbmNvZGUgaHRtbF9lbnRpdGllcyBzbyBmdW5reSB1c2VyIGRhdGEgZG9lc24ndC9jYW4ndCBicmVhayB0aGUgaW50ZXJmYWNlCgkJCQkKCQkJCS8vIGFkZCBhZmZpbGlhdGUgYWNjb3VudCBjcmVhdGlvbiBzZWN0aW9uCgkJCQkkbWVtYmVyc2hpcF9tYXBwaW5ncyA9ICR0aGlzLT5nZXRDdXJyZW50TWFwcGluZ3MoJHByb3ZpZGVyX3Rva2VuKTsKCQkJCSRtZW1iZXJzaGlwTHZsTWFwcGluZ0Rlc2MgPSAiWW91IGNhbiBvcHRpb25hbGx5IGluc3RydWN0IE1lbWJlck1vdXNlIHRvIGNyZWF0ZSBhbiBhZmZpbGlhdGUgYWNjb3VudCB3aGVuIG5ldyBtZW1iZXJzIHNpZ24gdXAgZm9yIGEgcGFydGljdWxhciBtZW1iZXJzaGlwIGxldmVsLiBGb3IgZWFjaCBtZW1iZXJzaGlwIGxldmVsLCBzZWxlY3QgYSBzcGVjaWZpYyBwYXlvdXQgbGV2ZWwgYW5kIHdoZW4gbWVtYmVycyBzaWduIHVwIGZvciB0aGF0IG1lbWJlcnNoaXAgbGV2ZWwsIGFuIGFmZmlsaWF0ZSBhY2NvdW50IHdpbGwgYmUgY3JlYXRlZCB3aXRoIHRoYXQgcGF5b3V0IGxldmVsLiBTZXR0aW5nIHRoZSBwYXlvdXQgbGV2ZWwgdG8gTm9uZSBpbmRpY2F0ZXMgdGhhdCBhbiBhZmZpbGlhdGUgYWNjb3VudCBzaG91bGQgbm90IGJlIGNyZWF0ZWQgZm9yIHRoYXQgbWVtYmVyc2hpcCBsZXZlbC4iOwoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gIjxwIGNsYXNzPVwibW0tc2VjdGlvbi1oZWFkZXJcIiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweDsgbWFyZ2luLWJvdHRvbToxMHB4O1wiPkF1dG9tYXRpYyBBZmZpbGlhdGUgQWNjb3VudCBDcmVhdGlvbiAiLk1NX1V0aWxzOjpnZXRJbmZvSWNvbigkbWVtYmVyc2hpcEx2bE1hcHBpbmdEZXNjKS4iPC9wPiI7CgkJCQkKCQkJCSRkYXRhR3JpZCA9IG5ldyBNTV9EYXRhR3JpZCgpOwoJCQkJJGRhdGFHcmlkLT5zaG93UGFnaW5nQ29udHJvbHMgPSBmYWxzZTsKCQkJCSRkYXRhR3JpZC0+d2lkdGggPSAiNTAwcHg7IjsKCQkJCSRyb3dzID0gYXJyYXkoKTsKCQkJCQoJCQkJJGhlYWRlcnMgPSBhcnJheQoJCQkJKAoJCQkJCSdtZW1iZXJzaGlwJz0+IGFycmF5KCdjb250ZW50JyA9PiAnTWVtYmVyc2hpcCBMZXZlbCcpLAoJCQkJCSdwcm9maWxlJwk9PiBhcnJheSgnY29udGVudCcgPT4gJ1BheW91dCBMZXZlbCcpCgkJCQkpOwoJCQkJCgkJCQlmb3JlYWNoICgkbWVtYmVyc2hpcF9tYXBwaW5ncyBhcyAkbWVtYmVyc2hpcF9pZD0+JG1lbWJlcnNoaXBfZGF0YSkgCgkJCQl7CgkJCQkJJHJvd3NbXSA9IGFycmF5CgkJCQkJKAoJCQkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICRtZW1iZXJzaGlwX2RhdGFbJ21lbWJlcnNoaXBfbmFtZSddKSwKCQkJCQkJYXJyYXkoICdjb250ZW50JyA9PiAiPHNlbGVjdCBuYW1lPSdtZW1iZXJzaGlwX2xldmVsX21hcHBpbmdzW3skbWVtYmVyc2hpcF9pZH1dJz4iLk1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkcHJvZmlsZXMsICRtZW1iZXJzaGlwX2RhdGFbJ3BheW91dF9wcm9maWxlX2lkJ10pLiI8L3NlbGVjdD4iKSwKCQkJCQkpOwoJCQkJfQoJCQkJCgkJCQkkZGF0YUdyaWQtPnNldEhlYWRlcnMoJGhlYWRlcnMpOwoJCQkJJGRhdGFHcmlkLT5zZXRSb3dzKCRyb3dzKTsJCgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAkZGF0YUdyaWQtPmdlbmVyYXRlSHRtbCgpOwoJCQkJCgkJCQkvLyBhZGQgc2VuZCBhZmZpbGlhdGUgd2VsY29tZSBlbWFpbCBzZWN0aW9uCgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAiPHNjcmlwdD4KZnVuY3Rpb24gaW5zZXJ0V2VsY29tZUVtYWlsVGVtcGxhdGUoKQp7Cgl2YXIgc3RyID0gJ1dlbGNvbWUgdG8gT3VyIEFmZmlsaWF0ZSBQcm9ncmFtJzsKCWpRdWVyeSgnI2lkZXZhZmZpbGlhdGUtc2VuZC1hZmZpbGlhdGUtd2VsY29tZS1lbWFpbC1zdWJqZWN0JykudmFsKHN0cik7CgoJdmFyIHN0ciA9ICdIaSBbTU1fTWVtYmVyX0RhdGEgbmFtZT1cJ2ZpcnN0TmFtZVwnXSxcXG5cXG4nOwoKCXN0ciArPSAnVGhhbmsgeW91IGZvciBqb2luaW5nIG91ciBhZmZpbGlhdGUgcHJvZ3JhbS5cXG5cXG4nOwoJc3RyICs9ICdZb3UgY2FuIGxvZ2luIHdpdGggdGhlIGZvbGxvd2luZyBjcmVkZW50aWFsczpcXG4nOwoJc3RyICs9ICc8YSBocmVmPVwiW01NX0FmZmlsaWF0ZV9EYXRhIG5hbWU9XCd1cmxcJ11cIj5bTU1fQWZmaWxpYXRlX0RhdGEgbmFtZT1cJ3VybFwnXTwvYT5cXG4nOwoJc3RyICs9ICdVc2VybmFtZTogW01NX0FmZmlsaWF0ZV9EYXRhIG5hbWU9XCd1c2VybmFtZVwnXVxcbic7CglzdHIgKz0gJ1Bhc3N3b3JkOiBbTU1fQWZmaWxpYXRlX0RhdGEgbmFtZT1cJ3Bhc3N3b3JkXCddXFxuXFxuJzsKCXN0ciArPSAnSWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucywgcGxlYXNlIGNvbnRhY3QgdXMgYXQgW01NX0VtcGxveWVlX0RhdGEgbmFtZT1cJ2VtYWlsXCddLlxcblxcbic7CglzdHIgKz0gJ1RoYW5rcyxcXG5bTU1fRW1wbG95ZWVfRGF0YSBuYW1lPVwnZGlzcGxheU5hbWVcJ10nOwoJCglqUXVlcnkoJyNpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtYm9keScpLnZhbChzdHIpOwp9PC9zY3JpcHQ+IjsKCQkJCQoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gIjxwIHN0eWxlPSd3aWR0aDo3MDBweDsnPklmIHlvdSd2ZSBjb25maWd1cmVkIE1lbWJlck1vdXNlIHRvIGF1dG9tYXRpY2FsbHkgY3JlYXRlIGFmZmlsaWF0ZSBhY2NvdW50cyB0aGVuIHlvdSBjYW4gYWxzbyBpbmRpY2F0ZSB0aGF0IGEgd2VsY29tZSBlbWFpbAoJCQkJCQliZSBzZW50IHRvIHRoZXNlIGFmZmlsaWF0ZXMgYW5kIGluY2x1ZGUgdGhlIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBhc3NvY2lhdGVkIHdpdGggdGhlaXIgbmV3IGFmZmlsaWF0ZSBhY2NvdW50LjwvcD4iOwoJCQkJCQkKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICI8cD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2lkZXZhZmZpbGlhdGVfc2VuZF9hZmZpbGlhdGVfd2VsY29tZV9lbWFpbCcgaWQ9J2lkZXZhZmZpbGlhdGVfc2VuZF9hZmZpbGlhdGVfd2VsY29tZV9lbWFpbCcgIjsKCQkJCQoJCQkJJHNlbmRfYWZmaWxpYXRlX3dlbGNvbWVfZW1haWwgPSAkcHJvdmlkZXItPmdldFNlbmRBZmZpbGlhdGVXZWxjb21lRW1haWwoKTs7CgkJCQkkYWZmaWxpYXRlX3dlbGNvbWVfZW1haWxfc3ViamVjdCA9ICRwcm92aWRlci0+Z2V0QWZmaWxpYXRlV2VsY29tZUVtYWlsU3ViamVjdCgpOwoJCQkJJGFmZmlsaWF0ZV93ZWxjb21lX2VtYWlsX2JvZHkgPSAkcHJvdmlkZXItPmdldEFmZmlsaWF0ZVdlbGNvbWVFbWFpbEJvZHkoKTsKCQkJCQoJCQkJaWYoJHNlbmRfYWZmaWxpYXRlX3dlbGNvbWVfZW1haWwgPT0gIjEiKQoJCQkJewoJCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICJjaGVja2VkIjsKCQkJCX0KCQkJCQoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gIiBvbmNoYW5nZT0nbW1qcy5zZXRTZW5kQWZmaWxpYXRlRW1haWxTZWN0aW9uU3RhdGUoKTsnLz4gU2VuZCBXZWxjb21lIEVtYWlsIHdoZW4gQWZmaWxpYXRlIEFjY291bnRzIGFyZSBDcmVhdGVkPC9wPiI7CgkJCQkKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICI8ZGl2IGlkPSdpZGV2YWZmaWxpYXRlX3NlbmRfYWZmaWxpYXRlX3dlbGNvbWVfZW1haWxfc2VjdGlvbicgIjsKCQkJCQoJCQkJaWYoJHNlbmRfYWZmaWxpYXRlX3dlbGNvbWVfZW1haWwgIT0gIjEiKQoJCQkJewoJCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICJzdHlsZT0nZGlzcGxheTpub25lOyciOwoJCQkJfQoJCQkJCgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAiPiI7CgkJCQkKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICI8YSBocmVmPSdqYXZhc2NyaXB0Omluc2VydFdlbGNvbWVFbWFpbFRlbXBsYXRlKCk7JyBjbGFzcz0nbW0tdWktYnV0dG9uJyBzdHlsZT0nZm9udC1zaXplOjEwcHg7IHBhZGRpbmc6IDJweCA1cHg7Jz5Vc2UgRGVhZnVsdCBFbWFpbCBUZW1wbGF0ZTwvYT4iOwoJCQkJCgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsiPic7CgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDo1cHgiPlN1YmplY3QqJzsKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICc8aW5wdXQgaWQ9ImlkZXZhZmZpbGlhdGUtc2VuZC1hZmZpbGlhdGUtd2VsY29tZS1lbWFpbC1zdWJqZWN0IiBuYW1lPSJpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtc3ViamVjdCIgdHlwZT0idGV4dCIgJzsKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICdzdHlsZT0id2lkdGg6NDU0cHg7IGZvbnQtZmFtaWx5OmNvdXJpZXI7IGZvbnQtc2l6ZTogMTFweDsiIHZhbHVlPSInLiRhZmZpbGlhdGVfd2VsY29tZV9lbWFpbF9zdWJqZWN0LiciLz48L2Rpdj4nOwoJCQkJCQoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6NXB4Ij4nOwoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gJ0JvZHkqJy5NTV9TbWFydFRhZ0xpYnJhcnlWaWV3OjpzbWFydFRhZ0xpYnJhcnlCdXR0b25zKCJpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtYm9keSIpOwoJCQkJIAoJCQkJJHZhbGlkU21hcnRUYWdzID0gIk9ubHkgdGhlIGZvbGxvd2luZyBTbWFydFRhZ3MgY2FuIGJlIHVzZWQgaGVyZTpcbiI7CgkJCQkkdmFsaWRTbWFydFRhZ3MgLj0gIltNTV9BY2Nlc3NfRGVjaXNpb25dICh5b3UgbXVzdCBwcm92aWRlIGFuIElEKVxuIjsKCQkJCSR2YWxpZFNtYXJ0VGFncyAuPSAiW01NX0NvbnRlbnRfRGF0YV0gKHlvdSBtdXN0IHByb3ZpZGUgYW4gSUQpXG4iOwoJCQkJJHZhbGlkU21hcnRUYWdzIC49ICJbTU1fQ29udGVudF9MaW5rXSAoeW91IG11c3QgcHJvdmlkZSBhbiBJRClcbiI7CgkJCQkkdmFsaWRTbWFydFRhZ3MgLj0gIltNTV9Db3JlUGFnZV9MaW5rXVxuIjsKCQkJCSR2YWxpZFNtYXJ0VGFncyAuPSAiW01NX0N1c3RvbUZpZWxkX0RhdGFdXG4iOwoJCQkJJHZhbGlkU21hcnRUYWdzIC49ICJbTU1fRW1wbG95ZWVfRGF0YV1cbiI7CgkJCQkkdmFsaWRTbWFydFRhZ3MgLj0gIltNTV9NZW1iZXJfRGF0YV1cbiI7CgkJCQkkdmFsaWRTbWFydFRhZ3MgLj0gIltNTV9NZW1iZXJfRGVjaXNpb25dXG4iOwoJCQkJJHZhbGlkU21hcnRUYWdzIC49ICJbTU1fTWVtYmVyX0xpbmtdXG4iOwoJCQkJJHZhbGlkU21hcnRUYWdzIC49ICJbTU1fUHVyY2hhc2VfTGlua10iOwoJCQkJCQkKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICc8c3BhbiBzdHlsZT0iZm9udC1zaXplOjExcHg7IGNvbG9yOiM2NjY2NjY7IG1hcmdpbi1sZWZ0OiA1cHg7Ij48ZW0+Tm90ZTogT25seSBjZXJ0YWluIFNtYXJ0VGFncyBjYW4gYmUgdXNlZCBoZXJlPC9lbT48L3NwYW4+JzsKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49IE1NX1V0aWxzOjpnZXRJbmZvSWNvbigkdmFsaWRTbWFydFRhZ3MpOwoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gJzxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyBjb2xvcjojNjY2NjY2OyBtYXJnaW4tdG9wOjVweDsiPjxlbT5UaGUgZm9sbG93aW5nIFNtYXJ0VGFncyBhcmUgcmVjb21tZW5kZWQ6PC9lbT4gPHN0cm9uZz48Y29kZT5bTU1fQWZmaWxpYXRlX0RhdGEgbmFtZT0idXJsIl08L2NvZGU+IDxjb2RlPltNTV9BZmZpbGlhdGVfRGF0YSBuYW1lPSJ1c2VybmFtZSJdPC9jb2RlPiA8Y29kZT5bTU1fQWZmaWxpYXRlX0RhdGEgbmFtZT0icGFzc3dvcmQiXTwvY29kZT48L3N0cm9uZz48L2Rpdj4nOwoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gIjwvZGl2PiI7CgkJCQkJCgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAnPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDo1cHgiPic7CgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAnPHRleHRhcmVhIGlkPSJpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtYm9keSIgbmFtZT0iaWRldmFmZmlsaWF0ZS1zZW5kLWFmZmlsaWF0ZS13ZWxjb21lLWVtYWlsLWJvZHkiICc7IAoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gJ3N0eWxlPSJ3aWR0aDo1MDBweDsgaGVpZ2h0OjE4MHB4OyBmb250LWZhbWlseTpjb3VyaWVyOyBmb250LXNpemU6IDExcHg7Ij4nOwoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gaHRtbGVudGl0aWVzKCRhZmZpbGlhdGVfd2VsY29tZV9lbWFpbF9ib2R5LCBFTlRfUVVPVEVTLCAnVVRGLTgnLCB0cnVlKTsKCQkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICc8L3RleHRhcmVhPic7CgkJCQkkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCAuPSAnPC9kaXY+JzsKCQkJCQoJCQkJJGFkZGl0aW9uYWxfb3B0aW9uc19vdXRwdXQgLj0gIjwvZGl2PiI7CgkJCX0KCgkJCSRhZGRpdGlvbmFsX29wdGlvbnNfb3V0cHV0IC49ICI8L2Rpdj4iOwoJCQkKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkYWRkaXRpb25hbF9vcHRpb25zX291dHB1dCk7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gcmV0cmlldmUgcHJvdmlkZXIgY29uZmlndXJhdGlvbiBmb3IgeyRwcm92aWRlcl90b2tlbn0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDdXJyZW50TWFwcGluZ3MoJHByb3ZpZGVyX3Rva2VuKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJG1hcHBpbmdzID0gYXJyYXkoKTsKCQkKCQkvL2ZpcnN0IGdldCBwcm92aWRlciBpZAoJCSRzcWwgPSAic2VsZWN0IGlkIGZyb20gIi5NTV9UQUJMRV9BRkZJTElBVEVfUFJPVklERVJTLiIgd2hlcmUgcHJvdmlkZXJfdG9rZW49JyVzJyI7CgkJJHByb3ZpZGVyX2lkID0gJHdwZGItPmdldF9jb2woJHdwZGItPnByZXBhcmUoJHNxbCwkcHJvdmlkZXJfdG9rZW4pKTsKCQkKCQkvL3RoZW4gY2xlYW51cCBtYXBwaW5ncyBmb3IgZGVsZXRlZCBtZW1iZXJzaGlwIGxldmVscwoJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9BRkZJTElBVEVfUFJPVklERVJfTUFQUElOR1MuIiB3aGVyZSBtZW1iZXJzaGlwX2xldmVsX2lkIE5PVCBJTiAoc2VsZWN0IGlkIGZyb20gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iKSI7CgkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQoJCS8vbm93IGdldCBtZW1iZXJzaGlwIGxldmVscwoJCSRzcWwgPSAic2VsZWN0IGlkLCBuYW1lIGZyb20gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIG9yZGVyIGJ5IG5hbWUiOwoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCRzcWwsJHByb3ZpZGVyX2lkKSxBUlJBWV9BKTsKCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkcm93bnVtPT4kbWVtYmVyc2hpcF9sZXZlbCkKCQl7CgkJCSRtYXBwaW5nc1skbWVtYmVyc2hpcF9sZXZlbFsnaWQnXV1bJ21lbWJlcnNoaXBfbmFtZSddID0gJG1lbWJlcnNoaXBfbGV2ZWxbJ25hbWUnXTsKCQkJJG1hcHBpbmdzWyRtZW1iZXJzaGlwX2xldmVsWydpZCddXVsncGF5b3V0X3Byb2ZpbGVfaWQnXSA9ICIiOwoJCX0KCQkKCQkvL25vdyB1cGRhdGUgd2l0aCBhbnkgbWFwcGluZ3MgcHJlc2VudCBpbiB0aGUgdGFibGUKCQkkc3FsID0gInNlbGVjdCBtZW1iZXJzaGlwX2xldmVsX2lkLCBwYXlvdXRfcHJvZmlsZV9pZCBmcm9tICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSX01BUFBJTkdTLgoJCQkJIiB3aGVyZSBhZmZpbGlhdGVfcHJvdmlkZXJfaWQ9JyVzJyI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoJHNxbCwkcHJvdmlkZXJfaWQpLEFSUkFZX0EpOwoJCWZvcmVhY2ggKCRyZXN1bHRzIGFzICRyb3dudW09PiRzaW5nbGVfbWFwcGluZykgCgkJewoJCQkkbWVtYmVyc2hpcF9pZCA9ICRzaW5nbGVfbWFwcGluZ1snbWVtYmVyc2hpcF9sZXZlbF9pZCddOwoJCQkkbWFwcGluZ3NbJG1lbWJlcnNoaXBfaWRdWydwYXlvdXRfcHJvZmlsZV9pZCddID0gJHNpbmdsZV9tYXBwaW5nWydwYXlvdXRfcHJvZmlsZV9pZCddOwoJCX0KCQlyZXR1cm4gJG1hcHBpbmdzOwkJCgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm92aWRlck9wdGlvbnMoJHBvc3QpIAoJewoJCWlmICghaXNzZXQoJHBvc3RbJ3Byb3ZpZGVyX3Rva2VuJ10pKSAKCQl7CgkJCS8vc2hvdWxkbnQgZXZlciBoYXBwZW4KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIHJldHJpZXZlIHByb3ZpZGVyIG9wdGlvbnM6IG5vIHRva2VuIHdhcyByZXF1ZXN0ZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkcHJvdmlkZXJfdG9rZW4gPSAkcG9zdFsncHJvdmlkZXJfdG9rZW4nXTsKCQkkcHJvdmlkZXIgPSBNTV9BZmZpbGlhdGVQcm92aWRlckZhY3Rvcnk6OmdldFByb3ZpZGVyKCRwcm92aWRlcl90b2tlbik7CgkJaWYgKCRwcm92aWRlciAhPSBudWxsKSAKCQl7CgkJCSRjYWxsX3Jlc3BvbnNlID0gJHByb3ZpZGVyLT5yZW5kZXJPcHRpb25zRGlhbG9nKCRwb3N0KTsKCQkJLy9pZiBjYWxsX3Jlc3BvbnNlIGlzIGFuIE1NX1Jlc3BvbnNlIG9iamVjdCwgcmV0dXJuIGl0LCBvdGhlcndpc2Ugd3JhcCBpdCBpbiBhbiBNTV9SZXNwb25zZSBhbmQgcmV0dXJuIGl0CgkJCXJldHVybiAoJGNhbGxfcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSk/JGNhbGxfcmVzcG9uc2U6KG5ldyBNTV9SZXNwb25zZSgkY2FsbF9yZXNwb25zZSxNTV9SZXNwb25zZTo6JFNVQ0NFU1MpKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byByZXRyaWV2ZSBwcm92aWRlciBjb25maWd1cmF0aW9uIGZvciB7JHByb3ZpZGVyX3Rva2VufSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2F2ZVByb3ZpZGVyT3B0aW9ucygkcG9zdCkgCgl7CgkJaWYgKCFpc3NldCgkcG9zdFsncHJvdmlkZXJfdG9rZW4nXSkpIAoJCXsKCQkJLy9zaG91bGRudCBldmVyIGhhcHBlbgoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBwcm92aWRlciBvcHRpb25zOiBubyB0b2tlbiB3YXMgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkcHJvdmlkZXJfdG9rZW4gPSAkcG9zdFsncHJvdmlkZXJfdG9rZW4nXTsKCQkkcHJvdmlkZXIgPSBNTV9BZmZpbGlhdGVQcm92aWRlckZhY3Rvcnk6OmdldFByb3ZpZGVyKCRwcm92aWRlcl90b2tlbik7CgkJaWYgKCRwcm92aWRlciAhPSBudWxsKSAKCQl7CgkJCXJldHVybiAkcHJvdmlkZXItPmhhbmRsZU9wdGlvbnNEaWFsb2coJHBvc3QpOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNhdmUgcHJvdmlkZXIgY29uZmlndXJhdGlvbiBmb3IgdW5rbm93biBwcm92aWRlciB7JHByb3ZpZGVyX3Rva2VufSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQogCQp9Cg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(38, 'pushnotificationengine', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUHVzaE5vdGlmaWNhdGlvbkVuZ2luZQp7Cglwcml2YXRlICRhY3Rpb25zID0gbnVsbDsKCXByaXZhdGUgJHBhcmFtcyA9IGFycmF5KCk7CgkKCXB1YmxpYyBmdW5jdGlvbiBwcm9kdWN0UHVyY2hhc2UoJHBhcmFtcykKCXsKCQkkdGhpcy0+YWN0aW9ucyA9IE1NX0FjdGlvbjo6ZmluZEFjdGlvbnNCeUV2ZW50VHlwZShNTV9FdmVudDo6JFBST0RVQ1RfUFVSQ0hBU0UpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5sb2dBY3Rpdml0eShNTV9FdmVudDo6JFBST0RVQ1RfUFVSQ0hBU0UsICRwYXJhbXMpOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBtZW1iZXJBZGRlZCgkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokTUVNQkVSX0FERCk7CgkJJHRoaXMtPnBhcmFtcyA9ICRwYXJhbXM7CgkJJHRoaXMtPmxvZ0FjdGl2aXR5KE1NX0V2ZW50OjokTUVNQkVSX0FERCwgJHBhcmFtcyk7CgkJJHRoaXMtPnBlcmZvcm1BY3Rpb25zKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBtZW1iZXJTdGF0dXNDaGFuZ2VkKCRwYXJhbXMpCgl7CgkJJHRoaXMtPmFjdGlvbnMgPSBNTV9BY3Rpb246OmZpbmRBY3Rpb25zQnlFdmVudFR5cGUoTU1fRXZlbnQ6OiRNRU1CRVJfU1RBVFVTX0NIQU5HRSk7CgkJJHRoaXMtPnBhcmFtcyA9ICRwYXJhbXM7CgkJJHRoaXMtPmxvZ0FjdGl2aXR5KE1NX0V2ZW50OjokTUVNQkVSX1NUQVRVU19DSEFOR0UsICRwYXJhbXMpOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbWVtYmVyTWVtYmVyc2hpcENoYW5nZWQoJHBhcmFtcykKCXsKCQkkdGhpcy0+YWN0aW9ucyA9IE1NX0FjdGlvbjo6ZmluZEFjdGlvbnNCeUV2ZW50VHlwZShNTV9FdmVudDo6JE1FTUJFUl9NRU1CRVJTSElQX0NIQU5HRSk7CgkJJHRoaXMtPnBhcmFtcyA9ICRwYXJhbXM7CgkJJHRoaXMtPmxvZ0FjdGl2aXR5KE1NX0V2ZW50OjokTUVNQkVSX01FTUJFUlNISVBfQ0hBTkdFLCAkcGFyYW1zKTsKCQkkdGhpcy0+cGVyZm9ybUFjdGlvbnMoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIG1lbWJlckFjY291bnRVcGRhdGVkKCRwYXJhbXMpCgl7CgkJJHRoaXMtPmFjdGlvbnMgPSBNTV9BY3Rpb246OmZpbmRBY3Rpb25zQnlFdmVudFR5cGUoTU1fRXZlbnQ6OiRNRU1CRVJfQUNDT1VOVF9VUERBVEUpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbWVtYmVyRGVsZXRlZCgkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokTUVNQkVSX0RFTEVURSk7CgkJJHRoaXMtPnBhcmFtcyA9ICRwYXJhbXM7CgkJJHRoaXMtPnBlcmZvcm1BY3Rpb25zKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBidW5kbGVBZGRlZCgkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokQlVORExFX0FERCk7CgkJJHRoaXMtPnBhcmFtcyA9ICRwYXJhbXM7CgkJJHRoaXMtPmxvZ0FjdGl2aXR5KE1NX0V2ZW50OjokQlVORExFX0FERCwgJHBhcmFtcyk7CgkJJHRoaXMtPnBlcmZvcm1BY3Rpb25zKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBidW5kbGVTdGF0dXNDaGFuZ2VkKCRwYXJhbXMpCgl7CgkJJHRoaXMtPmFjdGlvbnMgPSBNTV9BY3Rpb246OmZpbmRBY3Rpb25zQnlFdmVudFR5cGUoTU1fRXZlbnQ6OiRCVU5ETEVfU1RBVFVTX0NIQU5HRSk7CgkJJHRoaXMtPnBhcmFtcyA9ICRwYXJhbXM7CgkJJHRoaXMtPmxvZ0FjdGl2aXR5KE1NX0V2ZW50OjokQlVORExFX1NUQVRVU19DSEFOR0UsICRwYXJhbXMpOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcGF5bWVudFJlY2VpdmVkKCRwYXJhbXMpCgl7CgkJJHRoaXMtPmFjdGlvbnMgPSBNTV9BY3Rpb246OmZpbmRBY3Rpb25zQnlFdmVudFR5cGUoTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQ0VJVkVEKTsKCQkkdGhpcy0+cGFyYW1zID0gJHBhcmFtczsKCQkkdGhpcy0+bG9nQWN0aXZpdHkoTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQ0VJVkVELCAkcGFyYW1zKTsKCQkkdGhpcy0+cGVyZm9ybUFjdGlvbnMoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlYmlsbFBheW1lbnRSZWNlaXZlZCgkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTEwpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5sb2dBY3Rpdml0eShNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMLCAkcGFyYW1zKTsKCQkkdGhpcy0+cGVyZm9ybUFjdGlvbnMoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlYmlsbFBheW1lbnREZWNsaW5lZCgkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTExfREVDTElORUQpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5sb2dBY3Rpdml0eShNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMX0RFQ0xJTkVELCAkcGFyYW1zKTsKCQkkdGhpcy0+cGVyZm9ybUFjdGlvbnMoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGJpbGxpbmdTdWJzY3JpcHRpb25VcGRhdGVkKCRwYXJhbXMpCgl7CgkJJHRoaXMtPmFjdGlvbnMgPSBNTV9BY3Rpb246OmZpbmRBY3Rpb25zQnlFdmVudFR5cGUoTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9VUERBVEVEKTsKCQkkdGhpcy0+cGFyYW1zID0gJHBhcmFtczsKCQkkdGhpcy0+bG9nQWN0aXZpdHkoTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9VUERBVEVELCAkcGFyYW1zKTsKCQkkdGhpcy0+cGVyZm9ybUFjdGlvbnMoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGJpbGxpbmdTdWJzY3JpcHRpb25SZWJpbGxEYXRlQ2hhbmdlZCgkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokQklMTElOR19TVUJTQ1JJUFRJT05fUkVCSUxMX0RBVEVfQ0hBTkdFRCk7CgkJJHRoaXMtPnBhcmFtcyA9ICRwYXJhbXM7CgkJJHRoaXMtPmxvZ0FjdGl2aXR5KE1NX0V2ZW50OjokQklMTElOR19TVUJTQ1JJUFRJT05fUkVCSUxMX0RBVEVfQ0hBTkdFRCwgJHBhcmFtcyk7CgkJJHRoaXMtPnBlcmZvcm1BY3Rpb25zKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBiaWxsaW5nU3Vic2NyaXB0aW9uQ2FuY2VsZWQoJHBhcmFtcykKCXsKCQkkdGhpcy0+YWN0aW9ucyA9IE1NX0FjdGlvbjo6ZmluZEFjdGlvbnNCeUV2ZW50VHlwZShNTV9FdmVudDo6JEJJTExJTkdfU1VCU0NSSVBUSU9OX0NBTkNFTEVEKTsKCQkkdGhpcy0+cGFyYW1zID0gJHBhcmFtczsKCQkkdGhpcy0+bG9nQWN0aXZpdHkoTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9DQU5DRUxFRCwgJHBhcmFtcyk7CgkJJHRoaXMtPnBlcmZvcm1BY3Rpb25zKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZWZ1bmRJc3N1ZWQoJHBhcmFtcykKCXsKCQkkdGhpcy0+YWN0aW9ucyA9IE1NX0FjdGlvbjo6ZmluZEFjdGlvbnNCeUV2ZW50VHlwZShNTV9FdmVudDo6JFJFRlVORF9JU1NVRUQpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5sb2dBY3Rpdml0eShNTV9FdmVudDo6JFJFRlVORF9JU1NVRUQsICRwYXJhbXMpOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gYWZmaWxpYXRlSW5mb0NoYW5nZWQoJHBhcmFtcykKCXsKCQkkdGhpcy0+YWN0aW9ucyA9IE1NX0FjdGlvbjo6ZmluZEFjdGlvbnNCeUV2ZW50VHlwZShNTV9FdmVudDo6JEFGRklMSUFURV9JTkZPX0NIQU5HRUQpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5sb2dBY3Rpdml0eShNTV9FdmVudDo6JEFGRklMSUFURV9JTkZPX0NIQU5HRUQsICRwYXJhbXMpOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaW5pdGlhbENvbW1pc3Npb24oJHBhcmFtcykKCXsJCgkJJHRoaXMtPmFjdGlvbnMgPSBNTV9BY3Rpb246OmZpbmRBY3Rpb25zQnlFdmVudFR5cGUoTU1fRXZlbnQ6OiRDT01NSVNTSU9OX0lOSVRJQUwpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmViaWxsQ29tbWlzc2lvbigkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokQ09NTUlTU0lPTl9SRUJJTEwpOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY2FuY2VsQ29tbWlzc2lvbigkcGFyYW1zKQoJewoJCSR0aGlzLT5hY3Rpb25zID0gTU1fQWN0aW9uOjpmaW5kQWN0aW9uc0J5RXZlbnRUeXBlKE1NX0V2ZW50OjokQ0FOQ0VMX0NPTU1JU1NJT04pOwoJCSR0aGlzLT5wYXJhbXMgPSAkcGFyYW1zOwoJCSR0aGlzLT5wZXJmb3JtQWN0aW9ucygpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGxvZ0FjdGl2aXR5KCRldmVudFR5cGUsICRwYXJhbXMpCgl7CgkJaWYoaXNzZXQoJHBhcmFtc1sibWVtYmVyX2lkIl0pKQoJCXsKCQkJJGxvZ1BhcmFtcyA9IGFycmF5KCk7CgkJCQoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRwYXJhbXNbIm1lbWJlcl9pZCJdKTsKCQkJCgkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXN3aXRjaCgkZXZlbnRUeXBlKQoJCQkJewoJCQkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfQUREOgoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUNDRVNTX0VWRU5UXSA9ICRldmVudFR5cGU7CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BQ0NFU1NfSURdID0gJHBhcmFtc1sibWVtYmVyc2hpcF9sZXZlbCJdOwoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUNDRVNTX0lTX0NPTVBMSU1FTlRBUlldID0gJHBhcmFtc1siaXNfY29tcGxpbWVudGFyeSJdOwoJCQkJCQlNTV9BY3Rpdml0eUxvZzo6bG9nKCR1c2VyLCBNTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfQUNDRVNTX1JJR0hUUywgJGxvZ1BhcmFtcyk7CgkJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCQljYXNlIE1NX0V2ZW50OjokTUVNQkVSX1NUQVRVU19DSEFOR0U6CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BQ0NFU1NfRVZFTlRdID0gJGV2ZW50VHlwZTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FDQ0VTU19JRF0gPSAkcGFyYW1zWyJtZW1iZXJzaGlwX2xldmVsIl07CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BQ0NFU1NfSVNfQ09NUExJTUVOVEFSWV0gPSAkcGFyYW1zWyJpc19jb21wbGltZW50YXJ5Il07CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BQ0NFU1NfU1RBVFVTXSA9ICRwYXJhbXNbInN0YXR1cyJdOwoJCQkJCQkKCQkJCQkJaWYoJHBhcmFtc1sic3RhdHVzIl0gPT0gTU1fU3RhdHVzOjokRVJST1IpCgkJCQkJCXsKCQkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BQ0NFU1NfU1RBVFVTX01FU1NBR0VdID0gJHVzZXItPmdldFN0YXR1c01lc3NhZ2UoKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJTU1fQWN0aXZpdHlMb2c6OmxvZygkdXNlciwgTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0FDQ0VTU19SSUdIVFMsICRsb2dQYXJhbXMpOwoJCQkJCQlicmVhazsKCQkJCQkJCgkJCQkJY2FzZSBNTV9FdmVudDo6JE1FTUJFUl9NRU1CRVJTSElQX0NIQU5HRToKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FDQ0VTU19FVkVOVF0gPSAkZXZlbnRUeXBlOwoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUNDRVNTX0lEXSA9ICRwYXJhbXNbIm1lbWJlcnNoaXBfbGV2ZWwiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FDQ0VTU19JU19DT01QTElNRU5UQVJZXSA9ICRwYXJhbXNbImlzX2NvbXBsaW1lbnRhcnkiXTsKCQkJCQkJTU1fQWN0aXZpdHlMb2c6OmxvZygkdXNlciwgTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0FDQ0VTU19SSUdIVFMsICRsb2dQYXJhbXMpOwoJCQkJCQlicmVhazsKCQkJCQkJCgkJCQkJY2FzZSBNTV9FdmVudDo6JEJVTkRMRV9BREQ6CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BQ0NFU1NfRVZFTlRdID0gJGV2ZW50VHlwZTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FDQ0VTU19JRF0gPSAkcGFyYW1zWyJidW5kbGVfaWQiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FDQ0VTU19JU19DT01QTElNRU5UQVJZXSA9ICRwYXJhbXNbImJ1bmRsZV9pc19jb21wbGltZW50YXJ5Il07CgkJCQkJCU1NX0FjdGl2aXR5TG9nOjpsb2coJHVzZXIsIE1NX0FjdGl2aXR5TG9nOjokRVZFTlRfVFlQRV9BQ0NFU1NfUklHSFRTLCAkbG9nUGFyYW1zKTsKCQkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJCWNhc2UgTU1fRXZlbnQ6OiRCVU5ETEVfU1RBVFVTX0NIQU5HRToKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FDQ0VTU19FVkVOVF0gPSAkZXZlbnRUeXBlOwoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUNDRVNTX0lEXSA9ICRwYXJhbXNbImJ1bmRsZV9pZCJdOwoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUNDRVNTX0lTX0NPTVBMSU1FTlRBUlldID0gJHBhcmFtc1siYnVuZGxlX2lzX2NvbXBsaW1lbnRhcnkiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FDQ0VTU19TVEFUVVNdID0gJHBhcmFtc1siYnVuZGxlX3N0YXR1cyJdOwoJCQkJCQlNTV9BY3Rpdml0eUxvZzo6bG9nKCR1c2VyLCBNTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfQUNDRVNTX1JJR0hUUywgJGxvZ1BhcmFtcyk7CgkJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCQljYXNlIE1NX0V2ZW50OjokUEFZTUVOVF9SRUNFSVZFRDoKCQkJCQljYXNlIE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTEw6CgkJCQkJY2FzZSBNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMX0RFQ0xJTkVEOgoJCQkJCWNhc2UgTU1fRXZlbnQ6OiRSRUZVTkRfSVNTVUVEOgoJCQkJCWNhc2UgTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9VUERBVEVEOgoJCQkJCWNhc2UgTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9SRUJJTExfREFURV9DSEFOR0VEOgoJCQkJCWNhc2UgTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9DQU5DRUxFRDoKCQkJCQljYXNlIE1NX0V2ZW50OjokQUZGSUxJQVRFX0lORk9fQ0hBTkdFRDogCgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9CSUxMSU5HX0VWRU5UXSA9ICRldmVudFR5cGU7CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9CSUxMSU5HX09SREVSX0lEXSA9ICRwYXJhbXNbIm9yZGVyX2lkIl07CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9CSUxMSU5HX09SREVSX05VTUJFUl0gPSAkcGFyYW1zWyJvcmRlcl9udW1iZXIiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0JJTExJTkdfT1JERVJfVE9UQUxdID0gJHBhcmFtc1sib3JkZXJfdG90YWwiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0JJTExJTkdfT1JERVJfRElTQ09VTlRdID0gJHBhcmFtc1sib3JkZXJfZGlzY291bnQiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0JJTExJTkdfT1JERVJfSVBfQUREUkVTU10gPSAkcGFyYW1zWyJvcmRlcl9pcF9hZGRyZXNzIl07CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9CSUxMSU5HX09SREVSX1BST0RVQ1RTXSA9ICRwYXJhbXNbIm9yZGVyX3Byb2R1Y3RzIl07CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9CSUxMSU5HX09SREVSX0NPVVBPTlNdID0gJHBhcmFtc1sib3JkZXJfY291cG9ucyJdOwoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQklMTElOR19PUkRFUl9QUk9SQVRJT05TXSA9ICRwYXJhbXNbIm9yZGVyX3Byb3JhdGlvbnMiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0JJTExJTkdfT1JERVJfQUZGRklMSUFURV9JRF0gPSAkcGFyYW1zWyJvcmRlcl9hZmZpbGlhdGVfaWQiXTsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0JJTExJTkdfT1JERVJfU1VCQUZGRklMSUFURV9JRF0gPSAkcGFyYW1zWyJvcmRlcl9zdWJhZmZpbGlhdGVfaWQiXTsKCQkJCQkJCgkJCQkJCWdsb2JhbCAkd3BkYjsKCQkJCQkJCQoJCQkJCQkkc3FsID0gJHdwZGItPnByZXBhcmUoIlNFTEVDVCBwYXltZW50X2lkIEZST00gIi5NTV9UQUJMRV9PUkRFUlMuIiBXSEVSRSBpZCA9ICVzIExJTUlUIDEiLCRwYXJhbXNbIm9yZGVyX2lkIl0pOwoJCQkJCQkkcHltdFNlcnZpY2VJZCA9ICR3cGRiLT5nZXRfdmFyKCRzcWwpOwoJCQkJCQkJCgkJCQkJCWlmICgkcHltdFNlcnZpY2VJZCAhPT0gZmFsc2UpCgkJCQkJCXsKCQkJCQkJCSRweW10U2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2VCeUlkKCRweW10U2VydmljZUlkKTsKCQkJCQkJCQkgCgkJCQkJCQlpZighaXNfbnVsbCgkcHltdFNlcnZpY2UpICYmICEkcHltdFNlcnZpY2UtPnN1cHBvcnRzRmVhdHVyZShNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpNT0RJRllfUkVCSUxMX0RBVEUpKQoJCQkJCQkJeyAKCQkJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQklMTElOR19PUkRFUl9UT1RBTF0gPSAiU2VlICIuJHB5bXRTZXJ2aWNlLT5nZXROYW1lKCkuIiBmb3IgZGV0YWlscy4gIjsKCQkJCQkJCX0gIAoJCQkJCQl9CgkJCQkJCQoJCQkJCQkvLyBnZXQgY3VycmVudCByZWJpbGwgZGF0ZSBmb3IgJ3JlYmlsbCBkYXRlIGNoYW5nZWQnIGV2ZW50CgkJCQkJCWlmKCRldmVudFR5cGUgPT0gTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9SRUJJTExfREFURV9DSEFOR0VEICYmICFlbXB0eSgkcGFyYW1zWyJvcmRlcl9pdGVtX2lkIl0pKQoJCQkJCQl7CgkJCQkJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkcGFyYW1zWyJvcmRlcl9pdGVtX2lkIl0pOwoJCQkJCQkJCgkJCQkJCQlpZigkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCQkJCQl7CgkJCQkJCQkJJHNjaGVkdWxlZFBheW1lbnRFdmVudCA9IE1NX1NjaGVkdWxlZFBheW1lbnRFdmVudDo6ZmluZE5leHRTY2hlZHVsZWRFdmVudEJ5T3JkZXJJdGVtSWQoJG9yZGVySXRlbS0+Z2V0SWQoKSk7CgkJCQkJCQkJaWYgKCRzY2hlZHVsZWRQYXltZW50RXZlbnQtPmlzVmFsaWQoKSkKCQkJCQkJCQl7CgkJCQkJCQkJCSRjcm50UmViaWxsRGF0ZSA9IGRhdGUoIk0gZCwgWSIsIHN0cnRvdGltZSgkc2NoZWR1bGVkUGF5bWVudEV2ZW50LT5nZXRTY2hlZHVsZWREYXRlKCkpKTsKCQkJCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0JJTExJTkdfTkVYVF9SRUJJTExfREFURV0gPSAkY3JudFJlYmlsbERhdGU7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCQoJCQkJCQlpZigkZXZlbnRUeXBlID09IE1NX0V2ZW50OjokQUZGSUxJQVRFX0lORk9fQ0hBTkdFRCkKCQkJCQkJewoJCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9UUkFDS0lOR19FVkVOVF0gPSAkZXZlbnRUeXBlOwoJCQkJCQkJTU1fQWN0aXZpdHlMb2c6OmxvZygkdXNlciwgTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0FGRklMSUFURV9UUkFDS0lORywgJGxvZ1BhcmFtcyk7CgkJCQkJCX0KCQkJCQkJZWxzZSAKCQkJCQkJewoJCQkJCQkJTU1fQWN0aXZpdHlMb2c6OmxvZygkdXNlciwgTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0JJTExJTkcsICRsb2dQYXJhbXMpOwoJCQkJCQl9CgkJCQkJCWJyZWFrOwoJCQkJfQoJCQl9CgkJfQoJfSAKCQoJCglwcml2YXRlIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb25zKCkKCXsKCQlpZihpc19hcnJheSgkdGhpcy0+YWN0aW9ucykpCgkJewoJCQlmb3JlYWNoKCR0aGlzLT5hY3Rpb25zIGFzICRhY3Rpb24pCgkJCXsKCQkJCWlmKCRhY3Rpb24tPmlzVmFsaWQoKSAmJiAkYWN0aW9uLT5pc0FjdGl2ZSgpKQoJCQkJewkKCQkJCQkvLyBjaGVjayBhY3Rpb24gYXR0cmlidXRlcwoJCQkJCSRkb0NvbnRpbnVlID0gdHJ1ZTsKCQkJCQkKCQkJCQlzd2l0Y2goJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCkpCgkJCQkJewoJCQkJCQljYXNlIE1NX0V2ZW50OjokUFJPRFVDVF9QVVJDSEFTRToKCQkJCQkJCSRldmVudEF0dHJpYnV0ZXMgPSAkYWN0aW9uLT5nZXRFdmVudEF0dHJpYnV0ZXMoKTsKCQkJCQkJCWlmKGlzX2FycmF5KCRldmVudEF0dHJpYnV0ZXMpICYmIGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbInByb2R1Y3RfaWQiXSkpCgkJCQkJCQl7CgkJCQkJCQkJaWYoaXNzZXQoJGV2ZW50QXR0cmlidXRlc1sicHJvZHVjdF9pZCJdKSkKCQkJCQkJCQl7CgkJCQkJCQkJCSRwcm9kdWN0SWQgPSAkZXZlbnRBdHRyaWJ1dGVzWyJwcm9kdWN0X2lkIl07ICAKCQkJCQkJCQkJaWYoaW50dmFsKCRwcm9kdWN0SWQpID4gMCAmJiBpbnR2YWwoJHByb2R1Y3RJZCkgIT0gaW50dmFsKCR0aGlzLT5wYXJhbXNbInByb2R1Y3RfaWQiXSkpCgkJCQkJCQkJCXsgCgkJCQkJCQkJCQkkZG9Db250aW51ZSA9IGZhbHNlOwoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJYnJlYWs7CgkJCQkJCQkKCQkJCQkJLy8gZm9yIHRoZSBtZW1iZXIgYWRkZWQgZXZlbnQsIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGF0IHRoZSBtZW1iZXJzaGlwIGxldmVsIG9mIHRoZSBtZW1iZXIKCQkJCQkJLy8gZXF1YWxzIHRoZSBwdXNoIG5vdGlmaWNhdGlvbiBjb25maWd1cmF0aW9uCgkJCQkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfQUREOgoJCQkJCQkJJGV2ZW50QXR0cmlidXRlcyA9ICRhY3Rpb24tPmdldEV2ZW50QXR0cmlidXRlcygpOwoJCQkJCQkJaWYoaXNfYXJyYXkoJGV2ZW50QXR0cmlidXRlcykgJiYgaXNzZXQoJGV2ZW50QXR0cmlidXRlc1sibWVtYmVyc2hpcF9sZXZlbF9pZCJdKSkKCQkJCQkJCXsKCQkJCQkJCQkkbWVtYmVyc2hpcExldmVsSWQgPSAkZXZlbnRBdHRyaWJ1dGVzWyJtZW1iZXJzaGlwX2xldmVsX2lkIl07CgkJCQkJCQkJaWYoaW50dmFsKCRtZW1iZXJzaGlwTGV2ZWxJZCkgPiAwICYmIGludHZhbCgkbWVtYmVyc2hpcExldmVsSWQpICE9IGludHZhbCgkdGhpcy0+cGFyYW1zWyJtZW1iZXJzaGlwX2xldmVsIl0pKQoJCQkJCQkJCXsKCQkJCQkJCQkJJGRvQ29udGludWUgPSBmYWxzZTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQkvLyBmb3IgdGhlIG1lbWJlcnNoaXAgbGV2ZWwgc3RhdHVzIGNoYW5nZSBldmVudCwgY2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIG1lbWJlcnNoaXAgbGV2ZWwgCgkJCQkJCS8vIGFuZCB0aGUgc3RhdHVzIG9mIHRoZSBtZW1iZXJzaGlwIGxldmVsIGVxdWFscyB0aGUgcHVzaCBub3RpZmljYXRpb24gY29uZmlndXJhdGlvbgoJCQkJCQljYXNlIE1NX0V2ZW50OjokTUVNQkVSX1NUQVRVU19DSEFOR0U6CgkJCQkJCQkkZXZlbnRBdHRyaWJ1dGVzID0gJGFjdGlvbi0+Z2V0RXZlbnRBdHRyaWJ1dGVzKCk7CgkJCQkJCQlpZihpc19hcnJheSgkZXZlbnRBdHRyaWJ1dGVzKSkKCQkJCQkJCXsKCQkJCQkJCQlpZihpc3NldCgkZXZlbnRBdHRyaWJ1dGVzWyJtZW1iZXJzaGlwX2xldmVsX2lkIl0pIHx8IGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbInN0YXR1c19pZCJdKSkKCQkJCQkJCQl7CgkJCQkJCQkJCWlmKGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbIm1lbWJlcnNoaXBfbGV2ZWxfaWQiXSkpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRtZW1iZXJzaGlwTGV2ZWxJZCA9ICRldmVudEF0dHJpYnV0ZXNbIm1lbWJlcnNoaXBfbGV2ZWxfaWQiXTsKCQkJCQkJCQkJCWlmKGludHZhbCgkbWVtYmVyc2hpcExldmVsSWQpID4gMCAmJiBpbnR2YWwoJG1lbWJlcnNoaXBMZXZlbElkKSAhPSBpbnR2YWwoJHRoaXMtPnBhcmFtc1sibWVtYmVyc2hpcF9sZXZlbCJdKSkKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkkZG9Db250aW51ZSA9IGZhbHNlOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJCQkKCQkJCQkJCQkJaWYoaXNzZXQoJGV2ZW50QXR0cmlidXRlc1sic3RhdHVzX2lkIl0pKQoJCQkJCQkJCQl7CgkJCQkJCQkJCQkkc3RhdHVzSWQgPSAkZXZlbnRBdHRyaWJ1dGVzWyJzdGF0dXNfaWQiXTsKCQkJCQkJCQkJCWlmKGludHZhbCgkc3RhdHVzSWQpID4gMCAmJiBpbnR2YWwoJHN0YXR1c0lkKSAhPSBpbnR2YWwoJHRoaXMtPnBhcmFtc1sic3RhdHVzIl0pKQoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCSRkb0NvbnRpbnVlID0gZmFsc2U7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQkvLyBmb3IgdGhlIGJ1bmRsZSBhZGRlZCBldmVudCwgY2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1bmRsZSBiZWluZyBhZGRlZCAKCQkJCQkJLy8gZXF1YWxzIHRoZSBwdXNoIG5vdGlmaWNhdGlvbiBjb25maWd1cmF0aW9uCgkJCQkJCWNhc2UgTU1fRXZlbnQ6OiRCVU5ETEVfQUREOgoJCQkJCQkJJGV2ZW50QXR0cmlidXRlcyA9ICRhY3Rpb24tPmdldEV2ZW50QXR0cmlidXRlcygpOwoJCQkJCQkJaWYoaXNfYXJyYXkoJGV2ZW50QXR0cmlidXRlcykgJiYgaXNzZXQoJGV2ZW50QXR0cmlidXRlc1siYnVuZGxlX2lkIl0pKQoJCQkJCQkJewoJCQkJCQkJCSRidW5kbGVJZCA9ICRldmVudEF0dHJpYnV0ZXNbImJ1bmRsZV9pZCJdOwoJCQkJCQkJCWlmKGludHZhbCgkYnVuZGxlSWQpID4gMCAmJiBpbnR2YWwoJGJ1bmRsZUlkKSAhPSBpbnR2YWwoJHRoaXMtPnBhcmFtc1siYnVuZGxlX2lkIl0pKQoJCQkJCQkJCXsKCQkJCQkJCQkJJGRvQ29udGludWUgPSBmYWxzZTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJLy8gZm9yIHRoZSBidW5kbGUgc3RhdHVzIGNoYW5nZSBldmVudCwgY2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGJ1bmRsZSBhbmQgdGhlIHN0YXR1cyAKCQkJCQkJLy8gb2YgdGhlIGJ1bmRsZSBlcXVhbHMgdGhlIHB1c2ggbm90aWZpY2F0aW9uIGNvbmZpZ3VyYXRpb24KCQkJCQkJY2FzZSBNTV9FdmVudDo6JEJVTkRMRV9TVEFUVVNfQ0hBTkdFOgoJCQkJCQkJJGV2ZW50QXR0cmlidXRlcyA9ICRhY3Rpb24tPmdldEV2ZW50QXR0cmlidXRlcygpOwoJCQkJCQkJaWYoaXNfYXJyYXkoJGV2ZW50QXR0cmlidXRlcykpCgkJCQkJCQl7CgkJCQkJCQkJaWYoaXNzZXQoJGV2ZW50QXR0cmlidXRlc1siYnVuZGxlX2lkIl0pIHx8IGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbInN0YXR1c19pZCJdKSkKCQkJCQkJCQl7CgkJCQkJCQkJCWlmKGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbImJ1bmRsZV9pZCJdKSkKCQkJCQkJCQkJewoJCQkJCQkJCQkJJGJ1bmRsZUlkID0gJGV2ZW50QXR0cmlidXRlc1siYnVuZGxlX2lkIl07CgkJCQkJCQkJCQlpZihpbnR2YWwoJGJ1bmRsZUlkKSA+IDAgJiYgaW50dmFsKCRidW5kbGVJZCkgIT0gaW50dmFsKCR0aGlzLT5wYXJhbXNbImJ1bmRsZV9pZCJdKSkKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkkZG9Db250aW51ZSA9IGZhbHNlOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJCQoJCQkJCQkJCQlpZihpc3NldCgkZXZlbnRBdHRyaWJ1dGVzWyJzdGF0dXNfaWQiXSkpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRzdGF0dXNJZCA9ICRldmVudEF0dHJpYnV0ZXNbInN0YXR1c19pZCJdOwoJCQkJCQkJCQkJaWYoaW50dmFsKCRzdGF0dXNJZCkgPiAwICYmIGludHZhbCgkc3RhdHVzSWQpICE9IGludHZhbCgkdGhpcy0+cGFyYW1zWyJidW5kbGVfc3RhdHVzIl0pKQoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCSRkb0NvbnRpbnVlID0gZmFsc2U7CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQkJCgkJCQkJaWYoJGRvQ29udGludWUpCgkJCQkJewoJCQkJCQlzd2l0Y2goJGFjdGlvbi0+Z2V0QWN0aW9uVHlwZSgpKQoJCQkJCQl7CgkJCQkJCQljYXNlIE1NX0FjdGlvbjo6JE1NX0FDVElPTl9TRU5EX0VNQUlMOgoJCQkJCQkJCSR0aGlzLT5hY3Rpb25fc2VuZEVtYWlsKCRhY3Rpb24pOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQoJCQkJCQkJY2FzZSBNTV9BY3Rpb246OiRNTV9BQ1RJT05fTk9USUZZX1pBUElFUjoKCQkJCQkJCQkkdGhpcy0+YWN0aW9uX25vdGlmeVphcGllcigkYWN0aW9uKTsKCQkJCQkJCQlicmVhazsKCQkJCQoJCQkJCQkJY2FzZSBNTV9BY3Rpb246OiRNTV9BQ1RJT05fQ0FMTF9TQ1JJUFQ6CgkJCQkJCQkJJHRoaXMtPmFjdGlvbl9jYWxsU2NyaXB0VXJsKCRhY3Rpb24pOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGFjdGlvbl9zZW5kRW1haWwoJGFjdGlvbikKCXsKCQkkZG9TZW5kRW1haWwgPSBmYWxzZTsKCQkKCQlzd2l0Y2goJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCkpCgkJewoJCQljYXNlIE1NX0V2ZW50OjokUFJPRFVDVF9QVVJDSEFTRTogIAoJCQkJJGFjdGlvblZhbHVlID0gJGFjdGlvbi0+Z2V0QWN0aW9uVmFsdWUoKTsgIAoJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdGhpcy0+cGFyYW1zWyJtZW1iZXJfaWQiXSk7CgkJCQkkZnJvbUVtcGxveWVlID0gbmV3IE1NX0VtcGxveWVlKCRhY3Rpb25WYWx1ZVsiZW1haWxGcm9tSWQiXSk7CgkJCQkkY29udGV4dCA9IG5ldyBNTV9Db250ZXh0KCR1c2VyLCAkZnJvbUVtcGxveWVlKTsKCQkJCSRjb250ZXh0LT5zZXRQcm9kdWN0KG5ldyBNTV9Qcm9kdWN0KCR0aGlzLT5wYXJhbXNbInByb2R1Y3RfaWQiXSkpOwoJCQkJJGNvbnRleHQtPnNldE9yZGVyKG5ldyBNTV9PcmRlcigkdGhpcy0+cGFyYW1zWyJvcmRlcl9pZCJdKSk7CgkJCQkkZG9TZW5kRW1haWwgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfQUREOgoJCQljYXNlIE1NX0V2ZW50OjokTUVNQkVSX0FDQ09VTlRfVVBEQVRFOgoJCQljYXNlIE1NX0V2ZW50OjokTUVNQkVSX0RFTEVURToKCQkJY2FzZSBNTV9FdmVudDo6JE1FTUJFUl9NRU1CRVJTSElQX0NIQU5HRToKCQkJY2FzZSBNTV9FdmVudDo6JE1FTUJFUl9TVEFUVVNfQ0hBTkdFOgoJCQljYXNlIE1NX0V2ZW50OjokQlVORExFX0FERDoKCQkJY2FzZSBNTV9FdmVudDo6JEJVTkRMRV9TVEFUVVNfQ0hBTkdFOgoJCQkJJGFjdGlvblZhbHVlID0gJGFjdGlvbi0+Z2V0QWN0aW9uVmFsdWUoKTsKCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHRoaXMtPnBhcmFtc1sibWVtYmVyX2lkIl0pOwoJCQkJJGZyb21FbXBsb3llZSA9IG5ldyBNTV9FbXBsb3llZSgkYWN0aW9uVmFsdWVbImVtYWlsRnJvbUlkIl0pOwoJCQkJJGNvbnRleHQgPSBuZXcgTU1fQ29udGV4dCgkdXNlciwgJGZyb21FbXBsb3llZSk7CgkJCQkkZG9TZW5kRW1haWwgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9FdmVudDo6JFBBWU1FTlRfUkVDRUlWRUQ6CgkJCWNhc2UgTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQklMTDoKCQkJY2FzZSBNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMX0RFQ0xJTkVEOgoJCQljYXNlIE1NX0V2ZW50OjokUkVGVU5EX0lTU1VFRDoKCQkJY2FzZSBNTV9FdmVudDo6JENPTU1JU1NJT05fSU5JVElBTDoKCQkJY2FzZSBNTV9FdmVudDo6JENPTU1JU1NJT05fUkVCSUxMOgoJCQljYXNlIE1NX0V2ZW50OjokQ0FOQ0VMX0NPTU1JU1NJT046CgkJCQkkYWN0aW9uVmFsdWUgPSAkYWN0aW9uLT5nZXRBY3Rpb25WYWx1ZSgpOwoJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdGhpcy0+cGFyYW1zWyJtZW1iZXJfaWQiXSk7CgkJCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJHRoaXMtPnBhcmFtc1sib3JkZXJfaWQiXSk7CgkJCQkkZnJvbUVtcGxveWVlID0gbmV3IE1NX0VtcGxveWVlKCRhY3Rpb25WYWx1ZVsiZW1haWxGcm9tSWQiXSk7CgkJCQkkY29udGV4dCA9IG5ldyBNTV9Db250ZXh0KCR1c2VyLCAkZnJvbUVtcGxveWVlLCAkb3JkZXIpOwoJCQkJCgkJCQlpZigkYWN0aW9uLT5nZXRFdmVudFR5cGUoKSA9PSBNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMIHx8ICRhY3Rpb24tPmdldEV2ZW50VHlwZSgpID09IE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTExfREVDTElORUQpCgkJCQl7CgkJCQkJJG9yZGVyQXR0cmlidXRlcyA9IGFycmF5KCJpc19yZWJpbGwiPT50cnVlKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJJG9yZGVyQXR0cmlidXRlcyA9IGFycmF5KCJpc19yZWJpbGwiPT5mYWxzZSk7CgkJCQl9CgkJCQkKCQkJCS8vIElmIGEgdHJhbnNhY3Rpb24gaWQgZXhpc3RzIGluIHRoZSBwYXJhbWV0ZXIgbGlzdCwgdGhlbiBzdHVmZiBpdCBpbnRvIHRoZSBvcmRlciBhdHRyaWJ1dGVzLgoJCQkJLy8gVGhpcyB3YXkgd2hlbiB3ZSBkbyB0aGUgc21hcnQgdGFnIHByb2Nlc3NpbmcsIHdlIGFyZSBzdXJlIHRvIHBvaW50IHRvIHRoZSBjb3JyZWN0CgkJCQkvLyBhbW91bnQgZm9yICd0b3RhbCcuCgkJCQlpZihpc3NldCgkdGhpcy0+cGFyYW1zWyJvcmRlcl90cmFuc2FjdGlvbl9pZCJdKSkKCQkJCXsKCQkJCQlpZihpc3NldCgkb3JkZXJBdHRyaWJ1dGVzKSAmJiBpc19hcnJheSgkb3JkZXJBdHRyaWJ1dGVzKSkKCQkJCQl7CgkJCQkJCSRvcmRlckF0dHJpYnV0ZXNbInRyYW5zYWN0aW9uX2lkIl0gPSAkdGhpcy0+cGFyYW1zWyJvcmRlcl90cmFuc2FjdGlvbl9pZCJdOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkb3JkZXJBdHRyaWJ1dGVzID0gYXJyYXkoInRyYW5zYWN0aW9uX2lkIj0+JHRoaXMtPnBhcmFtc1sib3JkZXJfdHJhbnNhY3Rpb25faWQiXSk7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkkY29udGV4dC0+c2V0T3JkZXJBdHRyaWJ1dGVzKCRvcmRlckF0dHJpYnV0ZXMpOwoJCQkJCgkJCQkkZG9TZW5kRW1haWwgPSB0cnVlOwoJCQkJYnJlYWs7CgkJfQoJCQoJCWlmKCRkb1NlbmRFbWFpbCkKCQl7IAoJCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJJGVtYWlsLT5zZXRTdWJqZWN0KCRhY3Rpb25WYWx1ZVsiZW1haWxTdWJqZWN0Il0pOwoJCQkkZW1haWwtPnNldEJvZHkoJGFjdGlvblZhbHVlWyJlbWFpbEJvZHkiXSk7CgkJCSRlbWFpbC0+c2V0RnJvbU5hbWUoJGZyb21FbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGZyb21FbXBsb3llZS0+Z2V0RW1haWwoKSk7IAoJCQkKCQkJaWYoaXNzZXQoJGFjdGlvblZhbHVlWyJlbWFpbENDIl0pICYmICFlbXB0eSgkYWN0aW9uVmFsdWVbImVtYWlsQ0MiXSkpCgkJCXsKCQkJCSRjY0VtYWlscyA9IGV4cGxvZGUoIiwiLCAkYWN0aW9uVmFsdWVbImVtYWlsQ0MiXSk7CgkJCQkKCQkJCWZvcmVhY2goJGNjRW1haWxzIGFzICRjY0VtYWlsKQoJCQkJewoJCQkJCSRlbWFpbC0+YWRkQ0ModHJpbSgkY2NFbWFpbCkpOwoJCQkJfQoJCQl9CgkJCQoJCQlpZigkYWN0aW9uVmFsdWVbImVtYWlsVG9JZCJdID09IE1NX0FjdGlvbjo6JENVUlJFTlRfTUVNQkVSX1BMQUNFSE9MREVSKQoJCQl7CgkJCQkkZW1haWwtPnNldFRvTmFtZSgkdXNlci0+Z2V0Rmlyc3ROYW1lKCkpOwoJCQkJJGVtYWlsLT5zZXRUb0FkZHJlc3MoJHVzZXItPmdldEVtYWlsKCkpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRvRW1wbG95ZWUgPSBuZXcgTU1fRW1wbG95ZWUoJGFjdGlvblZhbHVlWyJlbWFpbFRvSWQiXSk7CgkJCQkkZW1haWwtPnNldFRvTmFtZSgkdG9FbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkdG9FbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCX0KCQkJCgkJCSRlbWFpbC0+c2VuZCgpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHNlbmRpbmcgcHVzaCBub3RpZmljYXRpb24gZW1haWwuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGFjdGlvbl9ub3RpZnlaYXBpZXIoJGFjdGlvbikKCXsKCQkkZXZlbnRUeXBlTmFtZSA9IE1NX0V2ZW50OjpnZXROYW1lKCRhY3Rpb24tPmdldEV2ZW50VHlwZSgpKTsKCQkkYWN0aW9uVmFsdWUgPSAkYWN0aW9uLT5nZXRBY3Rpb25WYWx1ZSgpOwoJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHRoaXMtPnBhcmFtc1sibWVtYmVyX2lkIl0pOwoJCSRmcm9tRW1wbG95ZWUgPSBuZXcgTU1fRW1wbG95ZWUoJGFjdGlvblZhbHVlWyJlbWFpbEZyb21JZCJdKTsKCQkkY29udGV4dCA9IG5ldyBNTV9Db250ZXh0KCR1c2VyLCAkZnJvbUVtcGxveWVlKTsKCQkKCQkkYm9keSA9ICIiOwoJCQoJCS8vIFRPRE8gcmV2aWV3IHRoaXMgbWVjaGFuaXNtIGZvciBlZmZlY3RpdmVuZXNzIGluIHBhcnNpbmcgY29udGVudAoJCS8vIHRoZSBjb250ZW50cyBvZiAkdGhpcy0+cGFyYW1zIGlzIGdlbmVyYXRlZCBieSBvbmUgb2YgdGhlIHBhY2thZ2UuLi4oKSBmdW5jdGlvbnMgaW4gdGhlIE1NX0V2ZW50IGNsYXNzCgkJZm9yZWFjaCgkdGhpcy0+cGFyYW1zIGFzICRrZXk9PiR2YWx1ZSkKCQl7CQoJCQlpZighZW1wdHkoJHZhbHVlKSkKCQkJewoJCQkJJGRlY29kZWRWYWx1ZSA9IGpzb25fZGVjb2RlKCR2YWx1ZSk7CgkJCQkKCQkJCWlmKCFpc19hcnJheSgkZGVjb2RlZFZhbHVlKSkKCQkJCXsKCQkJCQkkYm9keSAuPSAieyRrZXl9OiB7JHZhbHVlfSI7CgkJCQl9CgkJCQllbHNlIGlmKCFlbXB0eSgkZGVjb2RlZFZhbHVlKSkKCQkJCXsJCgkJCQkJZm9yZWFjaCgkZGVjb2RlZFZhbHVlIGFzICRhcnJJbmRleD0+JGFyclZhbHVlKQoJCQkJCXsKCQkJCQkJJGJvZHkgLj0gInska2V5fVt7JGFyckluZGV4fV06ICI7CgkJCQkJCgkJCQkJCWlmKGlzX29iamVjdCgkYXJyVmFsdWUpKQoJCQkJCQl7CgkJCQkJCQkkYm9keSAuPSAiXG4iOwoJCQkJCQkJCgkJCQkJCQlmb3JlYWNoKCRhcnJWYWx1ZSBhcyAkb2JqS2V5PT4kb2JqVmFsdWUpCgkJCQkJCQl7CgkJCQkJCQkJJGJvZHkgLj0gIi17JGFyckluZGV4fS0geyRvYmpLZXl9OiB7JG9ialZhbHVlfVxuIjsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRib2R5IC49ICJ7JGFyclZhbHVlfVxuIjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRib2R5IC49ICJ7JGtleX06IjsKCQkJfQoJCQkJCQoJCQkkYm9keSAuPSAiXG4iOwoJCX0KCQkKCQlpZighZW1wdHkoJGFjdGlvblZhbHVlWyJ6YXBpZXJBZGRpdGlvbmFsSW5mbyJdKSkKCQl7CgkJCSRib2R5IC49ICJcbj09PT09PT09PT09PT09PT09IEFERElUSU9OQUwgSU5GTyA9PT09PT09PT09PT09PT09PVxuIjsKCQkJJGJvZHkgLj0gJGFjdGlvblZhbHVlWyJ6YXBpZXJBZGRpdGlvbmFsSW5mbyJdOwoJCX0KCQkKCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkkZW1haWwtPnNldENvbnRleHQoJGNvbnRleHQpOwoJCSRlbWFpbC0+c2V0U3ViamVjdCgiWmFwaWVyIE5vdGlmaWNhdGlvbiAoeyRldmVudFR5cGVOYW1lfSkiKTsKCQkkZW1haWwtPnNldEJvZHkoJGJvZHkpOwoJCSRlbWFpbC0+c2V0RnJvbU5hbWUoJGZyb21FbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJJGVtYWlsLT5zZXRGcm9tQWRkcmVzcygkZnJvbUVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCgkJJGVtYWlsLT5zZXRUb05hbWUoIlphcGllciIpOwoJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCRhY3Rpb25WYWx1ZVsiemFwaWVyTWFpbGJveCJdKTsKCQkJCgkJJGVtYWlsLT5zZW5kKCk7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGFjdGlvbl9jYWxsU2NyaXB0VXJsKCRhY3Rpb24pCgl7CgkJJGFjdGlvblZhbHVlID0gJGFjdGlvbi0+Z2V0QWN0aW9uVmFsdWUoKTsKIAoJCSR1cmwgPSAiIjsKCQkKCQlpZihpc19hcnJheSgkYWN0aW9uVmFsdWUpICYmIGlzc2V0KCRhY3Rpb25WYWx1ZVsic2NyaXB0VXJsIl0pKQoJCXsKCQkJJHVybCA9ICRhY3Rpb25WYWx1ZVsic2NyaXB0VXJsIl07CgkJfQoJCQoJCWlmKCFlbXB0eSgkdXJsKSkKCQl7CQoJCQkkcG9zdHZhcnMgPSAiZXZlbnRfdHlwZT17JGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCl9JiI7CgkJCSRwb3N0dmFycyAuPSAkdGhpcy0+YXJyYXlUb1F1ZXJ5c3RyaW5nKCR0aGlzLT5wYXJhbXMpOwoJCQkKCQkJaWYocHJlZ19tYXRjaCgiLyhcPykvIiwgJHVybCkpCgkJCXsKCQkJCSR1cmwgPSAkdXJsLiImIi4kcG9zdHZhcnM7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdXJsID0gJHVybC4iPyIuJHBvc3R2YXJzOwoJCQl9CgkJCQoJCQkkY2ggPSBjdXJsX2luaXQoJHVybCk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9QT1NULCAwKTsKCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0hFQURFUiwgMCk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgMSk7ICAKCQkJJGNvbnRlbnRzID0gY3VybF9leGVjKCRjaCk7CgkJCWN1cmxfY2xvc2UoJGNoKTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gYXJyYXlUb1F1ZXJ5c3RyaW5nKCRwYXJhbXMpCgl7CQoJCSRxdWVyeXN0cmluZyA9ICIiOwoJCWZvcmVhY2goJHBhcmFtcyBhcyAka2V5PT4kdmFsdWUpCgkJewoJCQlpZighaXNfYXJyYXkoJHZhbHVlKSkKCQkJewoJCQkJJHF1ZXJ5c3RyaW5nIC49ICRrZXkuIj0iLnVybGVuY29kZSgkdmFsdWUpLiImIjsKCQkJfQoJCX0KCQlyZXR1cm4gJHF1ZXJ5c3RyaW5nOwoJfQp9', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(39, 'authorizenetservice', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBNTV9BdXRob3JpemVOZXRTZXJ2aWNlIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNTV9QYXltZW50U2VydmljZSBpbnRlcmZhY2UgdXNpbmcgQXV0aG9yaXplLm5ldCBBSU0gZm9yIHJlZ3VsYXIgY2hhcmdlcyBhbmQKICogQVJCIGZvciByZWN1cnJpbmcgY2hhcmdlcy4gQmVjYXVzZSBBUkIgdHJhbnNhY3Rpb25zIGFyZSBwcm9jZXNzZWQgYmFzZWQgb24gYSByZW1vdGUgc2NoZWR1bGVyLCBhbiBpbml0aWFsIEFJTSBjaGFyZ2UgaXMgc2VudCB0aHJvdWdoCiAqIGZvciBzdWJzY3JpcHRpb25zLCBhbmQgdGhlIEFSQiB0cmFuc2FjdGlvbiBpcyBzZXR1cCB0byBkZWFsIHdpdGggcmVjdXJyZW5jZXMKICovCmNsYXNzIE1NX0F1dGhvcml6ZU5ldFNlcnZpY2UgZXh0ZW5kcyBNTV9QYXltZW50U2VydmljZSBpbXBsZW1lbnRzIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcgp7Cglwcm90ZWN0ZWQgJHRva2VuID0gIkFVVEhPUklaRU5FVCI7CgkKCXByb3RlY3RlZCAkbG9naW4gPSAiIjsKCXByb3RlY3RlZCAkdHJhbnNhY3Rpb25fa2V5ID0gIiI7Cglwcm90ZWN0ZWQgJGFjY2VwdGVkQ2FyZFR5cGVzID0gYXJyYXkoKTsKCQoJcHJvdGVjdGVkICR1c2luZ1Rlc3RHYXRld2F5ID0gZmFsc2U7CgkKCXByb3RlY3RlZCAkYWNjZXB0SlNFbmFibGVkID0gZmFsc2U7Cglwcm90ZWN0ZWQgJHRlc3RQdWJsaWNDbGllbnRLZXkgPSAiIjsKCXByb3RlY3RlZCAkbGl2ZVB1YmxpY0NsaWVudEtleSA9ICIiOwoJCglwdWJsaWMgc3RhdGljICRBVVRITkVUX0NBUkRUWVBFX01BU1RFUkNBUkQgPSAibWFzdGVyY2FyZCI7CglwdWJsaWMgc3RhdGljICRBVVRITkVUX0NBUkRUWVBFX1ZJU0EgICAgICAgPSAidmlzYSI7CglwdWJsaWMgc3RhdGljICRBVVRITkVUX0NBUkRUWVBFX0FNRVggICAgICAgPSAiYW1leCI7CglwdWJsaWMgc3RhdGljICRBVVRITkVUX0NBUkRUWVBFX0RJU0NPVkVSICAgPSAiZGlzY292ZXIiOwoJCgkvKgoJICogQXV0aG9yaXplLm5ldCBpcyBjaGFuZ2luZyB0byB1c2UgQWthbWFpIGVuZHBvaW50cyB3aGlsZSBldmVyeXRoaW5nIGVsc2UKCSAqIHdpbGwgcmVtYWluIGluIHRhY3QuICBUaGUgZm9sbG93aW5nIFVSTCdzIGFyZSBwYXJ0IG9mIHRoZWlyIHR3byBwaGFzZSBhcHByb2FjaCB0byAKCSAqIG9uYm9hcmRpbmcgZXhpc3RpbmcgY3VzdG9tZXJzIHRvIHVzaW5nIHRoZSBuZXcgZW5kcG9pbnRzOgoJICogCgkgKgkJLSBodHRwczovL2FwaTIuYXV0aG9yaXplLm5ldC94bWwvdjEvcmVxdWVzdC5hcGkgCgkgKgkJLSBodHRwczovL2FwaTIuYXV0aG9yaXplLm5ldC9zb2FwL3YxL1NlcnZpY2UuYXNteCAKCSAqICAJLSBodHRwczovL3NlY3VyZTIuYXV0aG9yaXplLm5ldC9nYXRld2F5L3RyYW5zYWN0LmRsbAoJICogIAoJICogIFRoZSB0ZXN0L3NhbmRib3ggQVBJJ3MgcmVtYWluIHRoZSBzYW1lLiAgRm9yIHJlZmVyZW5jZSwgdGhlIG9sZCB1cmwncyB3ZXJlOgoJICogIAoJICogIAktIGh0dHBzOi8vc2VjdXJlLmF1dGhvcml6ZS5uZXQvZ2F0ZXdheS90cmFuc2FjdC5kbGwKCSAqICAJLSBodHRwczovL2FwaS5hdXRob3JpemUubmV0L3htbC92MS9yZXF1ZXN0LmFwaQoJICogIAktIGh0dHBzOi8vYXBpLmF1dGhvcml6ZS5uZXQvc29hcC92MS9TZXJ2aWNlLmFzbXgKCSAqLwoKCS8vQUlNIGdhdGV3YXkgdXJscwoJcHVibGljIHN0YXRpYyAkUFJPRFVDVElPTl9BSU1fR0FURVdBWV9VUkwgPSAiaHR0cHM6Ly9zZWN1cmUyLmF1dGhvcml6ZS5uZXQvZ2F0ZXdheS90cmFuc2FjdC5kbGwiOwoJcHVibGljIHN0YXRpYyAkVEVTVF9BSU1fR0FURVdBWV9VUkwgICAgICAgPSAiaHR0cHM6Ly90ZXN0LmF1dGhvcml6ZS5uZXQvZ2F0ZXdheS90cmFuc2FjdC5kbGwiOwoJCgkvL0FSQiBnYXRld2F5IHVybHMKCXB1YmxpYyBzdGF0aWMgJFBST0RVQ1RJT05fQVJCX0dBVEVXQVlfVVJMID0gImh0dHBzOi8vYXBpMi5hdXRob3JpemUubmV0L3htbC92MS9yZXF1ZXN0LmFwaSI7CglwdWJsaWMgc3RhdGljICRURVNUX0FSQl9HQVRFV0FZX1VSTCAgICAgICA9ICJodHRwczovL2FwaXRlc3QuYXV0aG9yaXplLm5ldC94bWwvdjEvcmVxdWVzdC5hcGkiOwoJIAoJLy92b2lkIHdpbmRvdyAoaW4gaG91cnMpLiBUcmFuc2FjdGlvbnMgb3V0IG9mIHRoaXMgd2luZG93IGFyZSBhc3N1bWVkIHNldHRsZWQKCXByaXZhdGUgJHZvaWRXaW5kb3cgPSA0ODsgCgkKCXByb3RlY3RlZCAkc3VwcG9ydGVkQ3VycmVuY2llcyA9IGFycmF5KCJVU0QiLCJDQUQiLCJHQlAiLCJFVVIiLCJBVUQiLCJOWkQiKTsKCQoJcHVibGljIGZ1bmN0aW9uIGluc3RhbGwoKQoJewoJCQkJCgkJcGFyZW50OjppbnN0YWxsKCk7CgoJCSRzcWwgPSBhcnJheSgpOwoJCSRzcWxbXSA9ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9BVVRITkVUX0FJTV9UUkFOU0FDVElPTlMuIiAoXG4iLgoJCQkJICJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSAib3JkZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkgInhfdHJhbnNfaWQgYmlnaW50KDIwKSxcbiIuCgkJCQkgImxhc3RfZm91ciB2YXJjaGFyKDQpIE5VTEwsXG4iLgoJCQkJICJhbW91bnQgZGVjaW1hbCgxMCwyKSBOT1QgTlVMTCxcbiIuCgkJCQkgInhfY3VycmVuY3lfY29kZSBjaGFyKDMpIE5PVCBOVUxMIERFRkFVTFQgJ1VTRCcsXG4iLgoJCQkJICJ0cmFuc2FjdGlvbl9kYXRlIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSAiUFJJTUFSWSBLRVkgIChpZClcbiIuCgkJCQkgIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCgkJJHNxbFtdID0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0FVVEhORVRfQVJCX1NVQlNDUklQVElPTlMuIiAoXG4iLgoJCQkJICJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSAib3JkZXJfaXRlbV9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSAieF9zdWJzY3JpcHRpb25faWQgdmFyY2hhcigyNTUpIE5PVCBOVUxMLFxuIi4KCQkJCSAibGFzdF9mb3VyIHZhcmNoYXIoNCkgTlVMTCxcbiIuCgkJCQkgInRyYW5zYWN0aW9uX2RhdGUgZGF0ZXRpbWUgTk9UIE5VTEwsXG4iLgoJCQkJICJQUklNQVJZIEtFWSAgKGlkKVxuIi4KCQkJCSAiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTsiOwoJCQoJCSRzcWxbXSA9ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9BVVRITkVUX0FSQl9TVUJTQ1JJUFRJT05fSElTVE9SWS4iIChcbiIuCgkJCQkieF90cmFuc19pZCBiaWdpbnQoMjApIE5PVCBOVUxMIFVOSVFVRSxcbiIuCgkJCQkieF9yZXNwb25zZV9jb2RlIElOVCxcbiIuCgkJCQkieF9yZXNwb25zZV9zdWJjb2RlIElOVCxcbiIuCgkJCQkieF9yZXNwb25zZV9yZWFzb25fY29kZSBJTlQsXG4iLgoJCQkJInhfcmVzcG9uc2VfcmVhc29uX3RleHQgVkFSQ0hBUigyNTUpLFxuIi4KCQkJCSJ4X2ludm9pY2VfbnVtIHZhcmNoYXIoMjU1KSxcbiIuCgkJCQkieF9jdXN0X2lkIHZhcmNoYXIoMjU1KSxcbiIuCgkJCQkieF9zdWJzY3JpcHRpb25faWQgdmFyY2hhcigyNTUpLFxuIi4KCQkJCSJ4X3N1YnNjcmlwdGlvbl9wYXludW0gSU5ULFxuIi4KCQkJCSJ0cmFuc2FjdGlvbl9kYXRlIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKHhfdHJhbnNfaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCQkKCQkkc3FsW10gPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQVVUSE5FVF9QRU5ESU5HX09WRVJEVUVfU1VCU0NSSVBUSU9OUy4iIChcbiIuCgkJCQkiaWQgYmlnaW50KDIwKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCxcbiIuCgkJCQkib3JkZXJfaXRlbV9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJvdmVyZHVlX2RhdGUgZGF0ZXRpbWUgTk9UIE5VTEwsXG4iLgoJCQkJImlzX3Byb2Nlc3NlZCBUSU5ZSU5UIE5PVCBOVUxMIERFRkFVTFQgMCxcbiIuCgkJCQkiUFJJTUFSWSBLRVkgIChpZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTsiOwoJCQoJCWZvcmVhY2ggKCRzcWwgYXMgJHF1ZXJ5KQoJCXsKCQkJZGJkZWx0YSgkcXVlcnkpOwoJCX0KCX0KCQoJLyoqCgkgKiBSZXBvcnQgdGhlIGZlYXR1cmVzIHRoZSBBdXRob3JpemVOZXRTZXJ2aWNlIHN1cHBvcnRzCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpzdXBwb3J0c0ZlYXR1cmUoKQoJICoKCSAqIEBwYXJhbSAkZmVhdHVyZUNvbnN0IGEgY29uc3QgYXMgZGVmaW5lZCBpbiBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdCBzdXBwb3J0ZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHN1cHBvcnRzRmVhdHVyZSgkZmVhdHVyZUNvbnN0KQoJewoJCSRzdXBwb3J0ZWQgPSBhcnJheSgpOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9OU0lURV9TRVJWSUNFOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OkNPVVBPTlM7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6VE9LRU5fRVhDSEFOR0U7CgkJcmV0dXJuIGluX2FycmF5KCRmZWF0dXJlQ29uc3QsJHN1cHBvcnRlZCx0cnVlKTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGh0bWwgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHBheW1lbnQgbWV0aG9kIHNldHRpbmdzIHNjcmVlbiBmb3IgY29uZmlndXJpbmcgQXV0aG9yaXplLm5ldCBpbnRlZ3JhdGlvbgoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6ZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZyBodG1sCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgl7CgkJJGNvbmZpZ19vcHRpb25zID0gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCJ7JHRoaXMtPmdldFRlbXBsYXRlRGlyKCl9L2F1dGhvcml6ZW5ldF9jb25maWcuaHRtbC5waHAiLCR0aGlzKTsKCQlyZXR1cm4gJGNvbmZpZ19vcHRpb25zOwoJfQoJCgkKCS8qKgoJICogVmFsaWRhdGVzIGFuZCBjb25maWd1cmVzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc2V0dGluZ3MgaW5mb3JtYXRpb24gZ2VuZXJhdGVkIGJ5IHN1Ym1pc3Npb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gZGlhbG9nCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpwcm9jZXNzQ29uZmlnT3B0aW9ucygpCgkgKiAKCSAqIEBwYXJhbSAkcG9zdCBBbiBhcnJheSBjb250YWluaW5nIHRoZSBkYXRhIHBvc3RlZCBmcm9tIHRoZSBwYXltZW50IG1ldGhvZHMgc2V0dGluZ3Mgc2NyZWVuCgkgKiBAcmV0dXJuIEFuIE1NX1Jlc3BvbnNlIG9mIHR5cGUgTU1fUmVzcG9uc2U6OlNVQ0NFU1MgaW5kaWNhdGluZyBzdWNjZXNzZnVsIHZhbGlkYXRpb24gYW5kIGFzc2lnbWVudC4gT24gZXJyb3IsIHRoZSB0eXBlIHdpbGwgYmUgTU1fUmVzcG9uc2U6OkVSUk9SIGFuZCB0aGUgbWVzc2FnZSB3aWxsIGNvbnRhaW4gdGhlIGVycm9yIG1lc3NhZ2VzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzQ29uZmlnT3B0aW9ucygkcG9zdCkKCXsKCQkkYWN0aXZlID0gKGlzc2V0KCRwb3N0WydvbnNpdGVfcGF5bWVudF9zZXJ2aWNlJ10pICYmIChzdHJ0b2xvd2VyKCR0aGlzLT5nZXRUb2tlbigpKSA9PSAkcG9zdFsnb25zaXRlX3BheW1lbnRfc2VydmljZSddKSk7CgkJJHRoaXMtPnNldEFjdGl2ZSgkYWN0aXZlKTsKCQkKCQlpZiAoJGFjdGl2ZSkKCQl7CgkJCSR0aGlzLT5pbnN0YWxsKCk7CgkJCSRjb25maWcgPSBpc3NldCgkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2F1dGhvcml6ZW5ldCddKT8kcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2F1dGhvcml6ZW5ldCddOmFycmF5KCk7CgkJCSRjaGVja19ub3RfZW1wdHkgPSBhcnJheSgnbG9naW4nPT4nTG9naW4nLCAndHJhbnNhY3Rpb25fa2V5Jz0+J1RyYW5zYWN0aW9uIEtleScpOwoJCQkkZW1wdHlfZXJyb3JzID0gIiI7CgkJCWZvcmVhY2ggKCRjaGVja19ub3RfZW1wdHkgYXMgJGNoZWNrPT4kZGlzcGxheU5hbWUpCgkJCXsKCQkJCWlmICghaXNzZXQoJGNvbmZpZ1skY2hlY2tdKSB8fCBlbXB0eSgkY29uZmlnWyRjaGVja10pKQoJCQkJewoJCQkJCSRlbXB0eV9lcnJvcnMgPSAiQXV0aG9yaXplLm5ldDogcGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHskZGlzcGxheU5hbWV9XG4iOwoJCQkJfQoJCQl9CgkJCWlmICgkZW1wdHlfZXJyb3JzICE9ICIiKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlbXB0eV9lcnJvcnMsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJLy9pZiBoZXJlLCB0aGF0IG1lYW5zIHRoZXkgYXJlIGFsbCBvawoJCQlpZiAoIWlzc2V0KCRjb25maWdbJ2FjY2VwdF9qc19lbmFibGVkJ10pKQoJCQl7CgkJCSAgICAvL3RoaXMgaWYgY2FuIGJlIHJlbW92ZWQgYWZ0ZXIgdGhlIHZhciBpcyBhZGRlZCB0byB0aGUgdGVtcGxhdGUKCQkJICAgICRjb25maWdbJ2FjY2VwdF9qc19lbmFibGVkJ10gPSBmYWxzZTsKCQkJfQoJCQkkdGhpcy0+c2V0QWNjZXB0SlNFbmFibGVkKCRjb25maWdbJ2FjY2VwdF9qc19lbmFibGVkJ10pOwoJCQkKCQkJJHRoaXMtPnNldExvZ2luKCRjb25maWdbJ2xvZ2luJ10pOwoJCQkkdGhpcy0+c2V0VHJhbnNhY3Rpb25LZXkoJGNvbmZpZ1sndHJhbnNhY3Rpb25fa2V5J10pOwoJCQkkdGhpcy0+dXNlVGVzdEdhdGV3YXkoKGlzc2V0KCRjb25maWdbJ3VzZV90ZXN0X2dhdGV3YXknXSkgJiYgKHN0cnRvbG93ZXIoJGNvbmZpZ1sndXNlX3Rlc3RfZ2F0ZXdheSddKSA9PSAidHJ1ZSIpKT90cnVlOmZhbHNlKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogUmV0cmlldmVzIHRoZSBsb2dpbiwgd2hpY2ggaXMgdXNlZCBhcyB0aGUgbG9naW4gZm9yIHRoZSBhdXRob3JpemUubmV0IGFjY291bnQKCSAqIAoJICogQHJldHVybiBTdHJpbmcgVGhlIEFQSSBsb2dpbiAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldExvZ2luKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxvZ2luOwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgbG9naW4gdGhhdCB3aWxsIGJlIHVzZWQgdG8gYWNjZXNzIHRoZSBhdXRob3JpemUubmV0IGFjY291bnQKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkbG9naW4gVGhlIEFQSSBsb2dpbgoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0TG9naW4oJGxvZ2luKQoJewoJCSR0aGlzLT5sb2dpbiA9ICRsb2dpbjsKCX0KCQoJCgkvKioKCSAqIFJldHJpZXZlcyB0aGUgdHJhbnNhY3Rpb24ga2V5LCB3aGljaCBpcyB1c2VkIHRvIGF1dGhlbnRpY2F0ZSB0byB0aGUgYXV0aG9yaXplLm5ldCBhY2NvdW50CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbktleSgpCgl7CgkJcmV0dXJuICR0aGlzLT50cmFuc2FjdGlvbl9rZXk7Cgl9CgkKCQoJLyoqCgkgKiBTZXRzIHRoZSB0cmFuc2FjdGlvbiBrZXkgdGhhdCB3aWxsIGJlIHVzZWQgdG8gYXV0aGVudGljYXRlIHRvIHRoZSBhdXRob3JpemUubmV0IGFjY291bnQKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkdHJhbnNhY3Rpb25fa2V5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRUcmFuc2FjdGlvbktleSgkdHJhbnNhY3Rpb25fa2V5KQoJewoJCSR0aGlzLT50cmFuc2FjdGlvbl9rZXkgPSAkdHJhbnNhY3Rpb25fa2V5OwoJfQoJCgkKCS8qKgoJICogUmV0cmlldmVzIHRoZSBhY2NlcHRlZCBjYXJkIHR5cGVzIGFycmF5CgkgKiAKCSAqIEByZXR1cm4gYXJyYXkgVGhlIGFjY2VwdGVkIGNhcmQgdHlwZSwgZW1wdHkgYXJyYXkgaWYgbm9uZSBzZXQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFjY2VwdGVkQ2FyZFR5cGVzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFjY2VwdGVkQ2FyZFR5cGVzOwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgYWNjZXB0ZWQgY2FyZCB0eXBlcyBhcnJheQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJGFjY2VwdGVkQ2FyZFR5cGVzIFRoZSBhY2NlcHRlZCBjYXJkIHR5cGUsIGVtcHR5IGFycmF5IGZvciBub25lCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBY2NlcHRlZENhcmRUeXBlcygkYWNjZXB0ZWRDYXJkVHlwZXMpCgl7CgkJJHRoaXMtPmFjY2VwdGVkQ2FyZFR5cGVzID0gJGFjY2VwdGVkQ2FyZFR5cGVzOwoJfQoJCgkKCS8qKgoJICogUHJvY2Vzc2VzICdzaWxlbnQgcG9zdCcgbm90aWZpY2F0aW9ucyB0byBkZXRlcm1pbmUgdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBvZiByZWJpbGxzCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpoYW5kbGVDYWxsYmFjaygpCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzTm90aWZpY2F0aW9uKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL1RPRE86IFJFRkFDVE9SOiBzdG9yZSBtZDUgaGFzaCB2YWx1ZSBkdXJpbmcgc2V0dXAsIHVzZSBpdCB0byBjb21wdXRlIGFuZCB2ZXJpZnkgdGhlIHNlY3VyaXR5IG9mIHNpbGVudCBwb3N0cyAKCQkvLyAgICAgIGh0dHA6Ly9zdXBwb3J0LmF1dGhvcml6ZS5uZXQvYXV0aGtiL2luZGV4P3BhZ2U9Y29udGVudCZpZD1BNTg4JmFjdHA9TElTVCBoYXMgZGV0YWlscwoJCQoJCSRyZXF1ZXN0ID0gKGVtcHR5KCRyZXF1ZXN0KSAmJiAhZW1wdHkoJF9QT1NUKSAmJiBpc19hcnJheSgkX1BPU1QpKT8kX1BPU1Q6JHJlcXVlc3Q7IC8vaWYgZm9yIHNvbWUgcmVhc29uIHJlcXVlc3QgaXNudCBzZXQgYnV0IHRoZXJlIGlzIGEgJF9QT1NULCB1c2UgdGhlICRfUE9TVAoJCQoJCWlmIChpc3NldCgkcmVxdWVzdFsneF9zdWJzY3JpcHRpb25faWQnXSkgJiYgIWVtcHR5KCRyZXF1ZXN0Wyd4X3N1YnNjcmlwdGlvbl9pZCddKSkKCQl7CgkJCS8vdGhpcyBpcyBhIHRyYW5zYWN0aW9uIHJlbGF0ZWQgdG8gYSBzdWJzY3JpcHRpb24KCQkJJHN1YnNjcmlwdGlvbklkID0gJHJlcXVlc3RbJ3hfc3Vic2NyaXB0aW9uX2lkJ107CgkJCSRhbW91bnQgPSB0cmltKCRyZXF1ZXN0Wyd4X2Ftb3VudCddKTsKCQkJJGFtb3VudCA9IG51bWJlcl9mb3JtYXQoJGFtb3VudCwyLCIuIiwiIik7CgkJCSRpdGVtUmV0cmlldmFsU3FsID0gIlNFTEVDVCBvcmRlcl9pdGVtX2lkIGZyb20gIi5NTV9UQUJMRV9BVVRITkVUX0FSQl9TVUJTQ1JJUFRJT05TLiIgd2hlcmUgeF9zdWJzY3JpcHRpb25faWQgPSAlcyI7CgkJCSRvcmRlckl0ZW1JZCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCRpdGVtUmV0cmlldmFsU3FsLCRzdWJzY3JpcHRpb25JZCkpOwoJCQkKCQkJCgkJCWlmIChlbXB0eSgkb3JkZXJJdGVtSWQpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIk5vIG1hdGNoaW5nIHN1YnNjcmlwdGlvbiBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oJG9yZGVySXRlbUlkKTsKCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQoJCQlpZiAoaXNzZXQoJHJlcXVlc3RbJ3hfdHJhbnNfaWQnXSkgJiYgIWVtcHR5KCRyZXF1ZXN0Wyd4X3RyYW5zX2lkJ10pKQoJCQl7CgkJCQkvL05PVEU6IFRoZXJlIGFyZSBtb3JlIGZpZWxkcyB0aGF0IGNhbiBiZSBhY2Nlc3NlZCwgd2hpY2ggbWF5IGNvbWUgaW4gaGFuZHkgd2hlbiBpbXBsZW1lbnRpbmcgYW5vdGhlciBBUEksIHN1Y2ggYXMgQ0lNCgkJCQkvL3VzZSB0aGUgdHJhbnNhY3Rpb24gaWQgdG8ga2VlcCB0cmFjayBvZiB3aGljaCBjYWxsYmFja3MgaGF2ZSBiZWVuIHJlY2VpdmVkCgkJCQkkdHJhbnNhY3Rpb25JZCAgID0gaXNzZXQoJHJlcXVlc3RbJ3hfdHJhbnNfaWQnXSk/JHJlcXVlc3RbJ3hfdHJhbnNfaWQnXToiIjsKCQkJCSRyZXNwb25zZUNvZGUgICAgPSBpc3NldCgkcmVxdWVzdFsneF9yZXNwb25zZV9jb2RlJ10pPyRyZXF1ZXN0Wyd4X3Jlc3BvbnNlX2NvZGUnXToiIjsKCQkJCSRyZXNwb25zZVN1YmNvZGUgPSBpc3NldCgkcmVxdWVzdFsneF9yZXNwb25zZV9zdWJjb2RlJ10pPyRyZXF1ZXN0Wyd4X3Jlc3BvbnNlX3N1YmNvZGUnXToiIjsKCQkJCSRyZWFzb25Db2RlICAgICAgPSBpc3NldCgkcmVxdWVzdFsneF9yZXNwb25zZV9yZWFzb25fY29kZSddKT8kcmVxdWVzdFsneF9yZXNwb25zZV9yZWFzb25fY29kZSddOiIiOwoJCQkJJHJlc3BvbnNlUmVhc29uVGV4dCA9IGlzc2V0KCRyZXF1ZXN0Wyd4X3Jlc3BvbnNlX3JlYXNvbl90ZXh0J10pPyRyZXF1ZXN0Wyd4X3Jlc3BvbnNlX3JlYXNvbl90ZXh0J106IiI7CgkJCQkkaW52b2ljZU51bSA9IGlzc2V0KCRyZXF1ZXN0Wyd4X2ludm9pY2VfbnVtJ10pPyRyZXF1ZXN0Wyd4X2ludm9pY2VfbnVtJ106IiI7CgkJCQkkY3VzdElkID0gaXNzZXQoJHJlcXVlc3RbJ3hfY3VzdF9pZCddKT8kcmVxdWVzdFsneF9jdXN0X2lkJ106IiI7CgkJCQkkc3Vic2NyaXB0aW9uSWQgPSBpc3NldCgkcmVxdWVzdFsneF9zdWJzY3JpcHRpb25faWQnXSk/JHJlcXVlc3RbJ3hfc3Vic2NyaXB0aW9uX2lkJ106IiI7CgkJCQkkc3Vic2NyaXB0aW9uUGF5bnVtID0gaXNzZXQoJHJlcXVlc3RbJ3hfc3Vic2NyaXB0aW9uX3BheW51bSddKT8kcmVxdWVzdFsneF9zdWJzY3JpcHRpb25fcGF5bnVtJ106IiI7CgkJCQkKCQkJCSRzdWJzY3JpcHRpb25Mb29rdXBTcWwgPSAiU0VMRUNUIGNvdW50KCopIGZyb20gIi5NTV9UQUJMRV9BVVRITkVUX0FSQl9TVUJTQ1JJUFRJT05fSElTVE9SWS4iIHdoZXJlIHhfdHJhbnNfaWQ9JXMiOwoJCQkJJHN1YnNjcmlwdGlvbkNvdW50ID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHN1YnNjcmlwdGlvbkxvb2t1cFNxbCwkdHJhbnNhY3Rpb25JZCkpOwoJCQkJaWYgKCRzdWJzY3JpcHRpb25Db3VudCA+IDApCgkJCQl7CgkJCQkJLy90aGlzIGlzIGEgbWVzc2FnZSB3ZSBoYXZlIGFscmVhZHkgcmVjZWl2ZWQKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkR1cGxpY2F0ZSB0cmFuc2F0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJCgkJCQkkc3Vic2NyaXB0aW9uSGlzdG9yeURhdGEgPSBhcnJheSgKCQkJCQkJInhfdHJhbnNfaWQiICAgICAgICAgICAgID0+ICR0cmFuc2FjdGlvbklkLAoJCQkJCQkieF9yZXNwb25zZV9jb2RlIiAgICAgICAgPT4gJHJlc3BvbnNlQ29kZSwKCQkJCQkJInhfcmVzcG9uc2Vfc3ViY29kZSIgICAgID0+ICRyZXNwb25zZVN1YmNvZGUsCgkJCQkJCSJ4X3Jlc3BvbnNlX3JlYXNvbl9jb2RlIiA9PiAkcmVhc29uQ29kZSwKCQkJCQkJInhfcmVzcG9uc2VfcmVhc29uX3RleHQiID0+ICRyZXNwb25zZVJlYXNvblRleHQsCgkJCQkJCSJ4X2ludm9pY2VfbnVtIiAgICAgICAgICA9PiAkaW52b2ljZU51bSwKCQkJCQkJInhfY3VzdF9pZCIgICAgICAgICAgICAgID0+ICRjdXN0SWQsCgkJCQkJCSJ4X3N1YnNjcmlwdGlvbl9pZCIgICAgICA9PiAkc3Vic2NyaXB0aW9uSWQsCgkJCQkJCSJ4X3N1YnNjcmlwdGlvbl9wYXludW0iICA9PiAkc3Vic2NyaXB0aW9uUGF5bnVtLAoJCQkJCQkidHJhbnNhY3Rpb25fZGF0ZSIgICAgICAgPT4gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCkKCQkJCQkJKTsKCQkJCQoJCQkJJHJlcyA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQVVUSE5FVF9BUkJfU1VCU0NSSVBUSU9OX0hJU1RPUlksJHN1YnNjcmlwdGlvbkhpc3RvcnlEYXRhKTsKCQkJCWlmICgkcmVzID09PSBmYWxzZSkKCQkJCXsKCQkJCQkvL3RoZXJlIHdhcyBhbiBlcnJvciBsb2dnaW5nIHRoZSBjYWxsYmFjay4gSGF2ZSB0byBleGl0LCBiZWNhdXNlIHRoZSBpZCBmcm9tIGFib3ZlIGlzIHVzZWQgaW4gdGhlIGJlbG93IHRyYW5zYWN0aW9ucwoJCQkJCS8vVE9ETzogUkVGQUNUT1I6IHJldHVybiBhIG5vbi0yMDAgc3RhdHVzLCBzbyBhdXRobmV0IGtub3dzIHRoaXMgc2lsZW50IHBvc3Qgd2FzbnQgcHJvY2Vzc2VkKD8pCgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciByZWNvcmRpbmcgdGhlIEFSQiBub3RpZmljYXRpb24gdG8gdGhlIGRhdGFiYXNlIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJCgkJCQkvL25vdyBkZXRlcm1pbmUgd2hhdCB0byBkbwoJCQkJc3dpdGNoICgkcmVzcG9uc2VDb2RlKQoJCQkJewoJCQkJCWNhc2UgMTogLy9zdWNjZXNzLCBwZXJmb3JtIGFueSBzdWNjZXNzZnVsLXJlYmlsbC1kcml2ZW4gb3BlcmF0aW9ucwoJCQkJCQkvL1RPRE86IFJFRkFDVE9SOiBkZXRlY3Qgd2hlbiByZWJpbGxpbmcgY29tcGxldGUgYW5kIHNldCBvcmRlciBpdGVtIHN0YXR1cwoJCQkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0sIGl0ZW06IHskb3JkZXJJdGVtLT5nZXREZXNjcmlwdGlvbigpfSI7CgkJCQkJCWlmICgkdGhpcy0+dXNpbmdUZXN0R2F0ZXdheSkKCQkJCQkJewoJCQkJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSwgJGFtb3VudCwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULHRydWUsJHRoaXMtPmdldElkKCksJHRyYW5zYWN0aW9uSWQpOwoJCQkJCQl9CgkJCQkJCWVsc2UgCgkJCQkJCXsKCQkJCQkJCU1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSwgJGFtb3VudCwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULHRydWUsJHRoaXMtPmdldElkKCksJHRyYW5zYWN0aW9uSWQpOwoJCQkJCQl9CgkJCQkJCSR0aGlzLT5jaGVja1BheW1lbnRQbGFuQ29tcGxldGlvbigkb3JkZXJJdGVtKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAyOiAKCQkJCQkJLy9kZWNsaW5lZCwgcGVyZm9ybSBhbnkgZGVjbGluZWQtcmViaWxsLWRyaXZlbiBvcGVyYXRpb25zCgkJCQkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpOwoJCQkJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCQkJCXBhcmVudDo6aGFuZGxlT3ZlcmR1ZVN1YnNjcmlwdGlvbkl0ZW0oJG9yZGVySXRlbSk7CgkJCQkJCSRyZXR1cm5UeXBlID0gKCRyZXMtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRTVUNDRVNTKT9NTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokU1VDQ0VTUzpNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1I7CgkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkcmVzLT5tZXNzYWdlLCRyZXR1cm5UeXBlKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAzOiAKCQkJCQkJLy9lcnJvciwgcGVyZm9ybSBhbnkgZXJyb3ItcmVzcG9uc2Ugb3BlcmF0aW9ucyBoZXJlCgkJCQkJCWlmICgkcmVhc29uQ29kZSA9PSA4KQoJCQkJCQl7CgkJCQkJCQkvL3RoaXMgbWVhbnMgdGhlIGNhcmQgd2FzIGV4cGlyZWQuIEN1cnJlbnRseSB0cmVhdCBhcyBhIGRlY2xpbmUvZmFpbAoJCQkJCQkJLy9UT0RPOiBSRUZBQ1RPUjogdmVyaWZ5IHRoYXQgZXhwaXJlZCBjYXJkcyBzaG91bGQgYmUgdHJlYXRlZCBhcyBkZWNsaW5lcwoJCQkJCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCk7CgkJCQkJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCQkJCQlwYXJlbnQ6OmhhbmRsZU92ZXJkdWVTdWJzY3JpcHRpb25JdGVtKCRvcmRlckl0ZW0pOwoJCQkJCQkJJHJldHVyblR5cGUgPSAoJHJlcy0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpP01NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRTVUNDRVNTOk1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUjsKCQkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkcmVzLT5tZXNzYWdlLCRyZXR1cm5UeXBlKTsKCQkJCQkJfQoJCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsgLy9ldmVuIHRob3VnaCB0aGUgcmViaWxsIGZhaWxlZCwgcmV0dXJuIHN1Y2Nlc3MgdG8gbGV0IHRoZSBjYWxsZXIga25vdyB3ZSBwcm9jZXNzZWQgdGhlIG1lc3NhZ2Ugc3VjY2Vzc2Z1bGx5CgkJCQkJCWJyZWFrOwoJCQkJCWRlZmF1bHQ6CgkJCQkJCS8vdW5rbm93biByZXNwb25zZSBjb2RlCgkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5rbm93biBSZXNwb25zZSBDb2RlIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJCQlicmVhazsKCQkJCX0KCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOyAvL3RoaXMgbGluZSBtYXkgc2VlbSBzdXBlcmZsdW91cyBmb3Igbm93LCBidXQgZ3VhcmRzIGFnYWluc3QgYWRkaW5nIGZ1dHVyZSBicmFuY2hlcyB0byBoYW5kbGUgbm9uLXJlYmlsbHMKCQkJCQkJCgkJCX0JCQkKCQl9CgkJCQoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogV2l0aCBubyBwYXJhbWV0ZXJzIChvciBlbXB0eSBwYXJhbWV0ZXJzKSBzdXBwbGllZCwgdGhpcyBtZXRob2QgcmVwb3J0cyB3aGV0aGVyIHRoZSB0ZXN0IGdhdGV3YXkgaXMgYmVpbmcgdXNlZC4KCSAqIFdoZW4gYSBwYXJhbWV0ZXIgaXMgc3VwcGxpZWQsIHRoZSBtb2RlIG9mIG9wZXJhdGlvbiBpcyBjaGFuZ2VkIHRvIG1hdGNoIHRoZSBwYXJhbWV0ZXIKCSAqIAoJICogQHBhcmFtIGJvb2xlYW4gJG5ld1NldHRpbmcgKG9wdGlvbmFsKSBJZiB0cnVlLCB1c2UgdGhlIHRlc3QgZ2F0ZXdheXMsIGlmIGZhbHNlLCB1c2UgdGhlIHByb2R1Y3Rpb24gZ2F0ZXdheXMKCSAqIEByZXR1cm4gYm9vbGVhbiBUcnVlIGlmIHRoaXMgcHJvdmlkZXIgaXMgY29uZmlndXJlZCB0byB1c2UgdGhlIHRlc3QgZ2F0ZXdheSwgZmFsc2UgaWYgaXQgaXMgdXNpbmcgcHJvZHVjdGlvbi4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVzZVRlc3RHYXRld2F5KCRuZXdTZXR0aW5nPSIiKQoJewoJCWlmICgkbmV3U2V0dGluZyAhPT0gIiIpCgkJewoJCQkkdGhpcy0+dXNpbmdUZXN0R2F0ZXdheSA9IChib29sKSRuZXdTZXR0aW5nOwoJCX0KCQlyZXR1cm4gJHRoaXMtPnVzaW5nVGVzdEdhdGV3YXk7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm4gdGhlIHVybCB0byBzdWJtaXQgQUlNIHRyYW5zYWN0aW9ucyB0bwoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIGVpdGhlciB0aGUgdGVzdCBvciBwcm9kdWN0aW9uIGdhdGV3YXkgdXJsCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0QUlNR2F0ZXdheVVSTCgpCgl7CgkJcmV0dXJuICgkdGhpcy0+dXNpbmdUZXN0R2F0ZXdheSk/TU1fQXV0aG9yaXplTmV0U2VydmljZTo6JFRFU1RfQUlNX0dBVEVXQVlfVVJMOk1NX0F1dGhvcml6ZU5ldFNlcnZpY2U6OiRQUk9EVUNUSU9OX0FJTV9HQVRFV0FZX1VSTDsKCX0KCQoJCgkvKioKCSAqIFJldHVybiB0aGUgdXJsIHRvIHN1Ym1pdCBBUkIgdHJhbnNhY3Rpb25zIHRvCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIGNvbnRhaW5pbmcgZWl0aGVyIHRoZSB0ZXN0IG9yIHByb2R1Y3Rpb24gZ2F0ZXdheSB1cmwKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRBUkJHYXRld2F5VVJMKCkKCXsKCQlyZXR1cm4gKCR0aGlzLT51c2luZ1Rlc3RHYXRld2F5KT9NTV9BdXRob3JpemVOZXRTZXJ2aWNlOjokVEVTVF9BUkJfR0FURVdBWV9VUkw6TU1fQXV0aG9yaXplTmV0U2VydmljZTo6JFBST0RVQ1RJT05fQVJCX0dBVEVXQVlfVVJMOwoJfQoJCgkKCS8qKgoJICogQ29uc3RydWN0cyBhbmQgc2VuZHMgYSBjaGFyZ2UgdG8gYXV0aG9yaXplLm5ldCB1c2luZyB0aGUgc3VwcGxpZWQgb3JkZXIgYW5kIGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uCgkgKiBJZiBhbnkgaXRlbXMgYXJlIHJlY3VycmluZywgYWxzbyBjb25zdHJ1Y3RzIHRoZSBBUkIgcmVjdXJyaW5nIGNoYXJnZXMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmNoYXJnZU9yZGVyKCkKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgY29udGFpbmluZyB0aGUgaW5mb3JtYXRpb24gdG8gdXNlIGluIGNvbnN0cnVjdGluZyB0aGUgdHJhbnNhY3Rpb24KCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gVGhlIGNyZWRpdCBjYXJkIGluZm8gdG8gdXNlIHRvIGNoYXJnZSB0aGUgb3JkZXIKCSAqIEBwYXJhbSBib29sZWFuICR2YWxpZGF0ZSAob3B0aW9uYWwpIFdoZXRoZXIgb3Igbm90IHRvIGVuc3VyZSB0aGUgb3JkZXIgaXMgdmFsaWQgYmVmb3JlIHByb2NlZWRpbmcuIERlZmF1bHRzIHRvIHRydWUuIElmIGZhbHNlLCB0aGlzIGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBjaGFyZ2VzIG5vdCB0aWVkIHRvIGNvbXBsZXRlZCBvcmRlcnMKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0dXMgb2YgdGhlIHRyYW5zYWN0aW9uCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjaGFyZ2VPcmRlcihNTV9PcmRlciAkb3JkZXIsIE1NX0NhcmRJbmZvICRjYXJkSW5mbz1udWxsLCR2YWxpZGF0ZT10cnVlKQoJeyAKCQlwYXJlbnQ6OmNoYXJnZU9yZGVyKCRvcmRlciwkY2FyZEluZm8sICR2YWxpZGF0ZSk7CgkJCgkJaWYgKCEoJGNhcmRJbmZvIGluc3RhbmNlb2YgTU1fQ2FyZEluZm8pKQoJCXsgIAoJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiUGxlYXNlIHN1cHBseSB2YWxpZCBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsgCgkJfQoJCQoJCSRjYXJkVmFsaWRhdGlvbiA9ICRjYXJkSW5mby0+dmFsaWRhdGUoKTsKCQlpZiAoJGNhcmRWYWxpZGF0aW9uICE9PSB0cnVlKQoJCXsgIAoJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkY2FyZFZhbGlkYXRpb24sTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsgCgkJfQkJCQoJCQoJCS8vZmlyc3QgZG8gdGhlIEFSQiBzdWJzY3JpcHRpb25zLCBiZWNhdXNlIGl0cyBlYXNpZXIgdG8gcmV2ZXJzZSB0aGFuIHRoZSBBSU0gY2hhcmdlCgkJJGNyZWF0ZWRTdWJzY3JpcHRpb25zID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkb3JkZXItPmdldFByb2R1Y3RzKCkgYXMgJGFQcm9kdWN0SXRlbSkKCQl7CgkJCS8vVE9ETzogUkVGQUNUT1I6IHRoZSBzZW5kQUlNQ2hhcmdlIG1ldGhvZCBkb2VzIHRoZSBleGFjdCBzYW1lIGNvbnZlcnNpb24gZnJvbSBvcmRlcml0ZW0gdG8gcHJvZHVjdC4gSXQgd291bGQgYmUgbmljZSBpZiB0aG9zZSBlbnRpdGllcyBjb3VsZCBiZSBzaGFyZWQgaGVyZSB0byBhdm9pZAoJCQkvLwkJCQkgIHJlbG9va2luZyB0aGVtIHVwIGluIHRoZSBkYi4uLgoJCQkKCQkJaWYgKCRhUHJvZHVjdEl0ZW0tPmlzUmVjdXJyaW5nKCkgfHwgKHRyaW0oJGFQcm9kdWN0SXRlbS0+Z2V0VHJpYWxEdXJhdGlvbigpKSAhPSBmYWxzZSkpCgkJCXsKCQkJCSRhcmJSZXNwb25zZSA9ICR0aGlzLT5jcmVhdGVBUkJTdWJzY3JpcHRpb24oJG9yZGVyLCRhUHJvZHVjdEl0ZW0sJGNhcmRJbmZvKTsKCQkJCWlmICghKCRhcmJSZXNwb25zZSBpbnN0YW5jZW9mIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UpKQoJCQkJeyAgCgkJCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRyYW5zYWN0aW9uOiBJbnRlcm5hbCBFcnJvciIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsgIAoJCQkJfQoJCQkJaWYgKCRhcmJSZXNwb25zZS0+Z2V0U3RhdHVzKCkgIT0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1MpCgkJCQl7CgkJCQkJLy9UT0RPOiBSRUZBQ1RPUjogcmV2aWV3IGFsbCBhcmIgbm9uLXN1Y2Nlc3MgcmVzcG9uc2VzIHRvIGRldGVybWluZSBpZiB0aGV5IEFMTCBzaG91bGQgdHJhbnNsYXRlIHRvIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUgoJCQkJCSRlcnJvciA9ICRhcmJSZXNwb25zZS0+Z2V0TWVzc2FnZSgpOwoJCQkJCSRkZXRhaWxzID0gKGVtcHR5KCRlcnJvcikpPyIiOiI6IHskZXJyb3J9IjsgCgkJCQkJCgkJCQkJLy9jYW5jZWwgYW55IGFscmVhZHkgY3JlYXRlZCBzdWJzY3JpcHRpb25zCgkJCQkJJHRoaXMtPnJldmVyc2VTdWJzY3JpcHRpb25zKCRjcmVhdGVkU3Vic2NyaXB0aW9ucyk7ICAgCgkJCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRyYW5zYWN0aW9ueyRkZXRhaWxzfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsgIAoJCQkJfQoJCQkJCgkJCQlpZigkdGhpcy0+aXNQZW5kaW5nT3ZlcmR1ZVN1YnNjcmlwdGlvbigkYVByb2R1Y3RJdGVtKSkKCQkJCXsKCQkJCQkkYVByb2R1Y3RJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19QRU5ESU5HX09WRVJEVUUpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRhUHJvZHVjdEl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKTsKCQkJCX0KCQkJCSRhUHJvZHVjdEl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCSRjcmVhdGVkU3Vic2NyaXB0aW9uc1tdID0gJGFQcm9kdWN0SXRlbTsKCQkJfQoJCX0KCQkKCQkvL05vdyBkbyB0aGUgQUlNIGNoYXJnZSB0byBjb3ZlciBub24tcmVjdXJyaW5nIHByb2R1Y3RzIGFuZCB0cmlhbCBwZXJpb2RzCgkJaWYgKCRvcmRlci0+Z2V0VG90YWwoKSA+IDAuMDApIC8vZnJlZSB0cmlhbHMgZG9uJ3QgbmVlZCB0byBnbyB0byB0aGUgZ2F0ZXdheQoJCXsKCQkJJGFpbVJlc3BvbnNlID0gJHRoaXMtPnNlbmRBaW1DaGFyZ2UoJG9yZGVyLCAkY2FyZEluZm8pOwoJCQlpZiAoISgkYWltUmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKSkKCQkJewoJCQkJJHRoaXMtPnJldmVyc2VTdWJzY3JpcHRpb25zKCRjcmVhdGVkU3Vic2NyaXB0aW9ucyk7IAoJCQkJCgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlRoZXJlIHdhcyBhbiBlcnJvciBwcm9jZXNzaW5nIHRoZSB0cmFuc2FjdGlvbjogSW50ZXJuYWwgRXJyb3IiLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQkKCQkJaWYgKCRhaW1SZXNwb25zZS0+Z2V0U3RhdHVzKCkgIT0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1MpCgkJCXsJCSAgCgkJCQkkdGhpcy0+cmV2ZXJzZVN1YnNjcmlwdGlvbnMoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKTsgCgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gJGFpbVJlc3BvbnNlOwoJCQl9CgkJfQoJCQoJCS8vYXQgdGhpcyBwb2ludCBhbGwgdGhlIHJlY3VycmluZyBwcm9kdWN0cyBoYXZlIGhhZCBzdWJzY3JpcHRpb25zIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5LCBhbmQgYW55IHJlcXVpcmVkIEFJTSBjaGFyZ2UgaGFzIGJlZW4gbWFkZSwgc28gcmV0dXJuIHN1Y2Nlc3Mgc3RhdHVzCgkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRQQUlEX0NPTVBMRVRFKTsKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsgCgl9IAoJCgkvKioKCSAqIENhbmNlbHMgdGhlIEFSQiBzdWJzY3JpcHRpb25zIGF0dGFjaGVkIHRvIHRoZSBvcmRlciBpdGVtcyBpbiBhbiBhcnJheQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHN1YnNjcmlwdGlvbkFycmF5IEFuIGFycmF5IG9mIG9yZGVyIGl0ZW1zIHJlcHJlc2VudGluZyByZWN1cnJpbmcgcHJvZHVjdHMgdGhhdCBoYXZlIHN1YnNjcmlwdGlvbnMKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiByZXZlcnNlU3Vic2NyaXB0aW9ucygkc3Vic2NyaXB0aW9uQXJyYXkpCgl7CgkJZm9yZWFjaCAoJHN1YnNjcmlwdGlvbkFycmF5IGFzICRjYW5jZWxNZSkKCQl7CgkJCSR0aGlzLT5jYW5jZWxTdWJzY3JpcHRpb24oJGNhbmNlbE1lKTsgLy9yZXR1cm4gdmFsdWUgZG9lc250IG1hdHRlcgoJCX0KCX0KCQoJLyoqCgkgKiBTZW5kcyBhbiBvcmRlciB0byB0aGUgQUlNIGdhdGV3YXkgdG8gYmUgY2hhcmdlZCwgYW5kIHJldHVybnMgYW4gaW5kaWNhdG9yIG9mIHRoZSByZXNwb25zZQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIFRoZSBvcmRlciB0byBjaGFyZ2UKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gVGhlIGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uIHRvIGNoYXJnZQoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIHJlcHJlc2VudGluZyB0aGUgc3RhdHVzIG9mIHRoZSB0cmFuc2FjdGlvbgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2VuZEFpbUNoYXJnZShNTV9PcmRlciAkb3JkZXIsIE1NX0NhcmRJbmZvICRjYXJkSW5mbykKCXsKCQkkY3VzdG9tZXIgPSAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJJGJpbGxpbmdBZGRyZXNzID0gJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpOwoJCSRhZGRyZXNzMiA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUyKCk7CgkJJGNvbWJpbmVkQWRkcmVzcyA9ICghZW1wdHkoJGFkZHJlc3MyKSk/KCRiaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUxKCkuIiAiLiRhZGRyZXNzMik6JGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKTsKCQkKCQkkcG9zdF92YWx1ZXMgPSBhcnJheSgKCQkJCSJ4X2xvZ2luIgkJCT0+ICR0aGlzLT5nZXRMb2dpbigpLAoJCQkJInhfdHJhbl9rZXkiCQk9PiAkdGhpcy0+Z2V0VHJhbnNhY3Rpb25LZXkoKSwKCQkKCQkJCSJ4X3ZlcnNpb24iCQkJPT4gIjMuMSIsCgkJCQkieF9kZWxpbV9kYXRhIgkJPT4gIlRSVUUiLAoJCQkJInhfZGVsaW1fY2hhciIJCT0+ICJ8IiwKCQkJCSJ4X3JlbGF5X3Jlc3BvbnNlIgk9PiAiRkFMU0UiLAoJCQoJCQkJInhfdHlwZSIJCQk9PiAiQVVUSF9DQVBUVVJFIiwKCQkJCSJ4X21ldGhvZCIJCQk9PiAiQ0MiLAoJCQkJInhfY2FyZF9udW0iCQk9PiAkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKSwKCQkJCSJ4X2V4cF9kYXRlIgkJPT4gJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKS4kY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCksCgkJCgkJCQkieF9hbW91bnQiCQkJPT4gIG51bWJlcl9mb3JtYXQoJG9yZGVyLT5nZXRUb3RhbCgpLDIsJy4nLCcnKSwKCQkJCSJ4X2N1cnJlbmN5X2NvZGUiICAgPT4gICRvcmRlci0+Z2V0Q3VycmVuY3koKSwKCQkJCSJ4X2ludm9pY2VfbnVtIgkgICAgPT4gICRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSwKCQkJCSJ4X2Rlc2NyaXB0aW9uIgkJPT4gIk9yZGVyIyIuJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLAoJCQoJCQkJInhfZmlyc3RfbmFtZSIJCT0+ICB1Y2ZpcnN0KCRiaWxsaW5nQWRkcmVzcy0+Z2V0Rmlyc3ROYW1lKCkpLAoJCQkJInhfbGFzdF9uYW1lIgkJPT4gIHVjZmlyc3QoJGJpbGxpbmdBZGRyZXNzLT5nZXRMYXN0TmFtZSgpKSwKCQkJCSJ4X2FkZHJlc3MiCQkJPT4gICRjb21iaW5lZEFkZHJlc3MsCgkJCQkieF9jaXR5IiAgICAgICAgICAgID0+ICAkYmlsbGluZ0FkZHJlc3MtPmdldENpdHkoKSwKCQkJCSJ4X3N0YXRlIgkJCT0+ICAkYmlsbGluZ0FkZHJlc3MtPmdldFN0YXRlKCksCgkJCQkieF96aXAiCQkJCT0+ICAkYmlsbGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKSwKCQkJCSJ4X2NvdW50cnkiICAgICAgICAgPT4gICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q291bnRyeSgpLAoJCQkJInhfZW1haWwiCQkJPT4gICRjdXN0b21lci0+Z2V0RW1haWwoKSwKCQkJCSJ4X2N1c3RfaWQiICAgICAgICAgPT4gICRjdXN0b21lci0+Z2V0SWQoKSwKCQkJCSJ4X2N1c3RfaXAiICAgICAgICAgPT4gIE1NX1V0aWxzOjpnZXRDbGllbnRJUEFkZHJlc3MoKQoJCSk7CgkJCgkJaWYgKCRvcmRlci0+aXNTaGlwcGFibGUoKSkKCQl7CgkJCSRzaGlwcGluZ0FkZHJlc3MgPSAkb3JkZXItPmdldFNoaXBwaW5nQWRkcmVzcygpOwkJCQoJCQkkYWRkcmVzczIgPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTIoKTsKCQkJJGNvbWJpbmVkQWRkcmVzcyA9ICghZW1wdHkoJGFkZHJlc3MyKSk/KCRzaGlwcGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpLiIgIi4kYWRkcmVzczIpOiRzaGlwcGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpOwoJCQkkc2hpcHBpbmdfdmFsdWVzID0gYXJyYXkoCgkJCQkieF9zaGlwX3RvX2ZpcnN0X25hbWUiID0+ICRzaGlwcGluZ0FkZHJlc3MtPmdldEZpcnN0TmFtZSgpLAoJCQkJInhfc2hpcF90b19sYXN0X25hbWUiICA9PiAkc2hpcHBpbmdBZGRyZXNzLT5nZXRMYXN0TmFtZSgpLAoJCQkJInhfc2hpcF90b19hZGRyZXNzIiAgICA9PiAkY29tYmluZWRBZGRyZXNzLAoJCQkJInhfc2hpcF90b19jaXR5IiAgICAgICA9PiAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCksCgkJCQkieF9zaGlwX3RvX3N0YXRlIiAgICAgID0+ICRzaGlwcGluZ0FkZHJlc3MtPmdldFN0YXRlKCksCgkJCQkieF9zaGlwX3RvX3ppcCIgICAgICAgID0+ICRzaGlwcGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKSwKCQkJCSJ4X3NoaXBfdG9fY291bnRyeSIgICAgPT4gJHNoaXBwaW5nQWRkcmVzcy0+Z2V0Q291bnRyeSgpCgkJCSk7CgkJCSRwb3N0X3ZhbHVlcyArPSAkc2hpcHBpbmdfdmFsdWVzOwoJCX0KCQkKCQkvL2FkZCBpdGVtIGluZm9ybWF0aW9uOiBmb3JtYXQgaXMgaWQ8fD5uYW1lPHw+ZGVzY3JpcHRpb248fD5xdWFudGl0eTx8PnByaWNlPHw+dGF4YWJsZQoJCSRsaW5lX2l0ZW1zPSIiOwoJCSRsaW1pdGVyID0gMDsKCQlmb3JlYWNoICgkb3JkZXItPmdldFByb2R1Y3RzKCkgYXMgJGVhY2hQcm9kdWN0SXRlbSkKCQl7CgkJCWlmICgoKyskbGltaXRlcikgPj0gMzApCgkJCXsKCQkJCWJyZWFrOyAvL2xpbWl0IG9mIDMwIGl0ZW1zIGNhbiBiZSBzdWJtaXR0ZWQKCQkJfQoJCQkkcHJlZml4ID0gZW1wdHkoJGxpbmVfaXRlbXMpPyIiOiImIjsKCQkJJGl0ZW1faWQgICAgICA9IHVybGVuY29kZSgkZWFjaFByb2R1Y3RJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCSRpdGVtX25hbWUgICAgPSBzdWJzdHIoJGVhY2hQcm9kdWN0SXRlbS0+Z2V0RGVzY3JpcHRpb24oKSwwLDMxKTsgLy9zcGVjIGxpbWl0cyB0aGlzIGZpZWxkIGF0IDMxIGNoYXJzCgkJCSRpdGVtX2Rlc2NyICAgPSBzdWJzdHIoJGVhY2hQcm9kdWN0SXRlbS0+Z2V0RGVzY3JpcHRpb24oKSwwLDI1NSk7IC8vc3BlYyBsaW1pdHMgdGhpcyBmaWVsZCBhdCAyNTUgY2hhcnMKCQkJJGl0ZW1fcXR5ICAgICA9IHVybGVuY29kZSgkZWFjaFByb2R1Y3RJdGVtLT5nZXRRdWFudGl0eSgpKTsKCQkJJGl0ZW1fcHJpY2UgICA9IHVybGVuY29kZSgkZWFjaFByb2R1Y3RJdGVtLT5nZXRBbW91bnQoKSk7CgkJCSRpdGVtX3RheGFibGUgPSB1cmxlbmNvZGUoKCRvcmRlci0+Z2V0VGF4KGZhbHNlKSA9PSAwKT8iRiI6IlQiKTsKCQkJCgkJCSRsaW5lX2l0ZW1zIC49ICJ7JHByZWZpeH14X2xpbmVfaXRlbT17JGl0ZW1faWR9PHw+eyRpdGVtX25hbWV9PHw+eyRpdGVtX2Rlc2NyfTx8PnskaXRlbV9xdHl9PHw+eyRpdGVtX3ByaWNlfTx8PnskaXRlbV90YXhhYmxlfSI7CgkJfQoJCQoJCSRwb3N0X3N0cmluZyA9ICIiOwoJCWZvcmVhY2goICRwb3N0X3ZhbHVlcyBhcyAka2V5ID0+ICR2YWx1ZSApCgkJewoJCQkkcG9zdF9zdHJpbmcgLj0gIiRrZXk9IiAuIHVybGVuY29kZSggJHZhbHVlICkgLiAiJiI7CgkJfQoJCSRwb3N0X3N0cmluZyAuPSAkbGluZV9pdGVtczsKCQkKCQlyZXR1cm4gJHRoaXMtPnBhcnNlQUlNR2F0ZXdheVJlc3BvbnNlKCR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRBSU1HYXRld2F5VVJMKCksIlBPU1QiLCRwb3N0X3N0cmluZyksJG9yZGVyLCRjYXJkSW5mbyk7Cgl9CgkKCQoJLyoqCgkgKiBQYXJzZXMgdGhlIHJlc3BvbnNlIGZyb20gdGhlIEhUVFAgQUlNIHJlcXVlc3QsIHBlcmZvcm1zIHRoZSBhcHByb3ByaWF0ZSBhY3Rpb25zIGFuZCByZXR1cm5zIGEgUGF5bWVudFNlcnZpY2VSZXNwb25zZSB0byBpbmRpY2F0ZSB0aGUgdHJhbnNhY3Rpb24gc3RhdHVzCgkgKiBUaGlzIG1ldGhvZCBhbHNvIHNhdmVzIHRoZSBzdGF0dXMgYW5kIHRyYW5zYWN0aW9uIGlkIHJlY2VpdmVkIGZyb20gdGhlIHJlbW90ZSBnYXRld2F5IGFuZCBhc3NvY2lhdGVzIGl0IHdpdGggdGhlIG9yZGVyCgkgKiAKCSAqIEBwYXJhbSBNTV9SZXNwb25zZSAkcmVzcG9uc2UgVGhlIHJlc3BvbnNlIGZyb20gdGhlIEFJTSBnYXRld2F5LCBpbiBhbiBNTV9SZXNwb25zZSB3cmFwcGVyCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIFRoZSBvcmRlciB0aGUgcmVzcG9uc2UgaXMgbGlua2VkIHRvCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIFRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB1c2VkIHRvIGNoYXJnZSB0aGUgb3JkZXIgKG5lZWRlZCB0byBvYnRhaW4gdGhlIGxhc3QgNCBkaWdpdHMgZm9yIHN0b3JpbmcgaW4gdGhlIGRiKQoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgcmVwcmVzZW50aW5nIHRoZSBzdGF0dXMgb2YgdGhlIHRyYW5zYWN0aW9uCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwYXJzZUFJTUdhdGV3YXlSZXNwb25zZShNTV9SZXNwb25zZSAkcmVzcG9uc2UsTU1fT3JkZXIgJG9yZGVyLE1NX0NhcmRJbmZvICRjYXJkSW5mbykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCRyZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb246IEVycm9yIGNvbm5lY3RpbmcgdG8gbWVyY2hhbnQgZ2F0ZXdheSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHJlc3BvbnNlRGF0YSA9IGV4cGxvZGUoInwiLCRyZXNwb25zZS0+bWVzc2FnZSk7CgkJaWYgKCFpc19hcnJheSgkcmVzcG9uc2VEYXRhKSkKCQl7CgkJCS8vdGhlIGRhdGEgd2FzIG5vdCBpbiB0aGUgZm9ybWF0IGV4cGVjdGVkLCB0aGlzIGlzIGFuIGVycm9yCgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRyYW5zYWN0aW9uOiBJbnZhbGlkIFJlc3BvbnNlIGZyb20gbWVyY2hhbnQgZ2F0ZXdheSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJc3dpdGNoICgkcmVzcG9uc2VEYXRhWzBdKQoJCXsKCQkJY2FzZSAnMSc6CgkJCWNhc2UgJzQnOgoJCQkJLy8xIGlzIHN1Y2Nlc3MsIDQgaXMgaGVsZCBmb3IgcmV2aWV3CgkJCQkkdHJhbnNhY3Rpb25BbW91bnQgPSBmbG9hdHZhbChpc3NldCgkcmVzcG9uc2VEYXRhWzldKT8kcmVzcG9uc2VEYXRhWzldOjApOwoJCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9IjsKCQkJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJCSRpbnNlcnREYXRhID0gYXJyYXkoICJvcmRlcl9pZCIgICAgICAgICAgPT4gJG9yZGVyLT5nZXRJZCgpLAoJCQkJCQkJCQkgInhfdHJhbnNfaWQiICAgICAgICA9PiBpc3NldCgkcmVzcG9uc2VEYXRhWzZdKT8kcmVzcG9uc2VEYXRhWzZdOjAsCgkJCQkJCQkJCSAibGFzdF9mb3VyIiAgICAgICAgID0+IHN1YnN0cigkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKSwtNCksCgkJCQkJCQkJCSAiYW1vdW50IiAgICAgICAgICAgID0+ICR0cmFuc2FjdGlvbkFtb3VudCwKCQkJCQkJCQkJICJ4X2N1cnJlbmN5X2NvZGUiICAgPT4gJG9yZGVyLT5nZXRDdXJyZW5jeSgpLAoJCQkJCQkJCQkgInRyYW5zYWN0aW9uX2RhdGUiICA9PiAkdHJhbnNhY3Rpb25EYXRlCgkJCQkJCSk7CgkJCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0FVVEhORVRfQUlNX1RSQU5TQUNUSU9OUywkaW5zZXJ0RGF0YSk7CgkJCQkkYWltVHJhbnNhY3Rpb25JZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJCQkvL25vdyBsb2cgdGhlIHBheW1lbnQgaW4gdGhlIHRyYW5zYWN0aW9ucyB0YWJsZQoJCQkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJCSRvcmRlckl0ZW1JZCA9IG51bGw7CgkJCQlpZiAoY291bnQoJHByb2R1Y3RJdGVtcykgPT0gMSkKCQkJCXsKCQkJCQkkb3JkZXJJdGVtID0gcmVzZXQoJHByb2R1Y3RJdGVtcyk7CgkJCQkJJG9yZGVySXRlbUlkID0gJG9yZGVySXRlbS0+Z2V0SWQoKTsKCQkJCX0KCQkJCWlmICgkdGhpcy0+dXNpbmdUZXN0R2F0ZXdheSkKCQkJCXsKCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtSWQsJHRyYW5zYWN0aW9uQW1vdW50LCAkb3JkZXItPmdldEN1cnJlbmN5KCksICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCxmYWxzZSwkdGhpcy0+aWQsJGFpbVRyYW5zYWN0aW9uSWQsJHRyYW5zYWN0aW9uRGF0ZSk7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCU1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbUlkLCR0cmFuc2FjdGlvbkFtb3VudCwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsZmFsc2UsJHRoaXMtPmlkLCRhaW1UcmFuc2FjdGlvbklkLCR0cmFuc2FjdGlvbkRhdGUpOwkKCQkJCX0KCQkJCS8vc2VuZCBlYWNoIGl0ZW0gaW4gdGhlIG9yZGVyIHRvIGJlIGNoZWNrZWQgCgkJCQlmb3JlYWNoICgkcHJvZHVjdEl0ZW1zIGFzICRjaGVja09yZGVySXRlbSkKCQkJCXsKCQkJCQkkdGhpcy0+Y2hlY2tQYXltZW50UGxhbkNvbXBsZXRpb24oJGNoZWNrT3JkZXJJdGVtKTsKCQkJCX0JCgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJCWJyZWFrOwoJCQljYXNlICcyJzoKCQkJCS8vZGVjbGluZWQKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlIHRyYW5zYWN0aW9uIHdhcyBkZWNsaW5lZCIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRGQUlMRUQpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJzMnOgoJCQkJLy9lcnJvcgoJCQkJJGRldGFpbHMgPSAoaXNzZXQoJHJlc3BvbnNlRGF0YVszXSkgJiYgIWVtcHR5KCRyZXNwb25zZURhdGFbM10pKT8iOiB7JHJlc3BvbnNlRGF0YVszXX0iOiIiOwoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUaGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgdHJhbnNhY3Rpb257JGRldGFpbHN9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQkvL3Byb2Nlc3MgYXMgZXJyb3IKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRyYW5zYWN0aW9uOiBJbnZhbGlkIFJlc3BvbnNlIGZyb20gbWVyY2hhbnQgZ2F0ZXdheSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCWJyZWFrOwoJCX0KCX0KCQoJCgkvKioKCSAqIENyZWF0ZXMgYW4gQXV0b21hdGVkIFJlY3VycmluZyBCaWxsaW5nIChBUkIpIHN1YnNjcmlwdGlvbiBmcm9tIGEgcHJvZHVjdCBhdHRhY2hlZCB0byBhbiBvcmRlcgoJICogTm90ZTogY3VycmVuY3kgaXMgbm90IGV4cGxpY2l0bHkgc3BlY2lmaWVkIGluIEFSQiByZXF1ZXN0cy4gVGhlIGFtb3VudCBpcyBhc3N1bWVkIHRvIGJlIGluIHdoYXRldmVyIGN1cnJlbmN5IHRoZSBnYXRld2F5IGlzIAoJICogY29uZmlndXJlZCB0byBwcm9jZXNzIGluIAoJICogCgkgKiBAcGFyYW0gIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgdGhlIHByb2R1Y3QgaXMgYXR0YWNoZWQgdG8KCSAqIEBwYXJhbSAgTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG9yZGVyIGl0ZW0gY29udGFpbmluZyB0aGUgcHJvZHVjdCB0byBjcmVhdGUgYW4gQVJCIHN1YnNjcmlwdGlvbiBmb3IKCSAqIEBwYXJhbSAgTU1fQ2FyZEluZm8gJGNhcmRJbmZvIFRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byB1c2Ugd2hlbiBjcmVhdGluZyB0aGUgc3Vic2NyaXB0aW9uCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBjb250YWluIHRoZSBzdGF0dXMgb2YgdGhlIHRyYW5zYWN0aW9uCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBjcmVhdGVBUkJTdWJzY3JpcHRpb24oTU1fT3JkZXIgJG9yZGVyLCBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvKQoJewoJCSRjdXN0b21lciAgICAgICAgPSAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJJGJpbGxpbmdBZGRyZXNzICA9ICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKTsKCQkkc2hpcHBpbmdBZGRyZXNzID0gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKTsKCQkKCQkvL0FSQiBzdXBwb3J0cyBtdWx0aXBsZSB0cmlhbCBvY2N1cnJlbmNlcywgYnV0IG1tIG9ubHkgc3VwcG9ydHMgb25lIHRyaWFsIHBheW1lbnQuIEhlbmNlLCB0aGUgdHJpYWwgcGF5bWVudCBpcyBoYW5kbGVkIGJ5IHRoZSBpbml0aWFsIEFJTQoJCS8vY2hhcmdlLCBhbmQgY2FuIGJlIGlnbm9yZWQgaW4gb3VyIEFSQiBzZXR1cC4gT3VyIG9ubHkgaW50ZXJlc3QgaW4gdGhlIHRyaWFsIGlzIGluIGNvcnJlY3RseSBjYWxjdWxhdGluZyB0aGUgc3RhcnQgZGF0ZQoJCQoJCS8vZmlyc3QsIG1ha2Ugc3VyZSB0aGlzIGlzIGEgcHJvZHVjdC4gSWYgbm90LCBzb21ldGhpbmcgZ290IG1lc3NlZCB1cCBhYm92ZQoJCWlmICgkb3JkZXJJdGVtLT5nZXRJdGVtVHlwZSgpICE9IE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9QUk9EVUNUKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJBdHRlbXB0ZWQgdG8gYmlsbCBhIG5vbi1wcm9kdWN0IGl0ZW0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCkpOwoJCSRuZXh0UmViaWxsQW1vdW50ID0gbnVtYmVyX2Zvcm1hdCgkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSwyLCcuJywnJyk7CgkJJHBheW1lbnRTY2hlZHVsZSA9ICR0aGlzLT5nZXRBUkJQYXltZW50U2NoZWR1bGVGcm9tUHJvZHVjdCgkcHJvZHVjdCk7CgkJCgkJLy90ZW1wb3JhcmlseSBhZGp1c3QgdGhlIHRpbWV6b25lIHRvIHN5bmMgd2l0aCB0aGUgYXV0aG9yaXplbmV0IHNlcnZlcnMsIGZvciBkYXRlIGNhbGN1bGF0aW9uCgkJJHNlcnZlclRpbWV6b25lID0gZGF0ZV9kZWZhdWx0X3RpbWV6b25lX2dldCgpOwoJCWRhdGVfZGVmYXVsdF90aW1lem9uZV9zZXQoJ0FtZXJpY2EvQ2hpY2FnbycpOwoJCWlmICgkcHJvZHVjdC0+aGFzVHJpYWwoKSkKCQl7CgkJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCIsc3RydG90aW1lKCIreyRwYXltZW50U2NoZWR1bGVbJ3RyaWFsTGVuZ3RoJ119IHskcGF5bWVudFNjaGVkdWxlWyd0cmlhbFVuaXQnXX0iKSk7IC8vbm90ZTogdGhpcyBhc3N1bWVzIHRoZSBzeXN0ZW0gdGltZSBpcyBjb3JyZWN0IQoJCX0KCQllbHNlIAoJCXsKCQkJJHN0YXJ0RGF0ZSA9IGRhdGUoIlktbS1kIixzdHJ0b3RpbWUoIit7JHBheW1lbnRTY2hlZHVsZVsnbGVuZ3RoJ119IHskcGF5bWVudFNjaGVkdWxlWyd1bml0J119IikpOyAvL2Fsc28gYXNzdW1lcyB0aGUgc3lzdGVtIHRpbWUgaXMgY29ycmVjdCEKCQl9CgkJCgkJLy9oYW5kbGUgc3BlY2lhbCBjYXNlIHdoZXJlIHRoZSBzdXBwbGllZCBjYXJkIGV4cGlyZXMgcHJpb3IgdG8gdGhlIGZpcnN0IHJlYmlsbC4gVGhlIGZpcnN0IGNoYXJnZSBpcyBhbHdheXMgaGFuZGxlZCBieSBBSU0sIHNvIHRoZSBzdWJzY3JpcHRpb24gaXMgb2sgdG8gYWxsb3cgaW4gdGhhdCBjYXNlCgkJCgkJLy9zdGFydCBieSBzZXR0aW5nIGV4cGlyZWREYXRlIHRvIGJlIHRoZSBsYXN0IGRheSBvZiB0aGUgY2MgZXhwaXJhdGlvbiBtb250aCwgYXQgMTE6NTlwbQoJCSRleHBpcmVkRGF0ZSA9ICRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvblllYXIoKS4iLSIuJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKS4iLSIuZGF0ZSgidCIsZ21ta3RpbWUoMCwwLDAsJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKSwxLCRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvblllYXIoKSkpLiIgMjM6NTkiOwoJCQoJCS8vYW55IHRpbWUgYWZ0ZXIgdGhhdCBpcyBleHBpcmVkLCBzbyByZXR1cm4gb2sKCQlpZiAoc3RydG90aW1lKCRzdGFydERhdGUpID4gc3RydG90aW1lKCRleHBpcmVkRGF0ZSkpCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCQoJCQkvLyBpbnNlcnQgYSByb3cgaW50byB0aGUgcGVuZGluZyBvdmVyZHVlIHN1YnNjcmlwdGlvbnMgdGFibGUKCQkJJGluc2VydERhdGEgPSBhcnJheSggIm9yZGVyX2l0ZW1faWQiID0+ICRvcmRlckl0ZW0tPmdldElkKCksICJvdmVyZHVlX2RhdGUiID0+ICRzdGFydERhdGUpOwoJCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0FVVEhORVRfUEVORElOR19PVkVSRFVFX1NVQlNDUklQVElPTlMsJGluc2VydERhdGEpOwoJCQkKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJXYXJuaW5nOiBTdWJzY3JpcHRpb24gc3RhcnRzIGFmdGVyIGNhcmQgaGFzIGV4cGlyZWQsIHNvIHJlYmlsbHMgd2lsbCBmYWlsLiBBbGxvd2luZyBjaGFyZ2UgdG8gZ28gdGhyb3VnaC4uLiIpOwkKCQl9CgkJCgkJLy9kZWZpbmUgdmFyaWFibGVzIHRvIHNlbmQKCQkkYW1vdW50ID0gICAgICAgICAgICRuZXh0UmViaWxsQW1vdW50OwoJCSRyZWZJZCAgPSAgICAgICAgICAgJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLiItIi4kcHJvZHVjdC0+Z2V0SWQoKTsKCQkkbmFtZSAgID0gICAgICAgICAgIHN1YnN0cigkcHJvZHVjdC0+Z2V0TmFtZSgpLDAsNTApOwoJCSRkZXNjcmlwdGlvbiA9ICAgICAgc3Vic3RyKCRwcm9kdWN0LT5nZXROYW1lKCksMCwyNTUpOwoJCSRsZW5ndGggPSAgICAgICAgICAgJHBheW1lbnRTY2hlZHVsZVsnbGVuZ3RoJ107CgkJJHVuaXQgICA9ICAgICAgICAgICAkcGF5bWVudFNjaGVkdWxlWyd1bml0J107ICAgICAgCgkJCgkJLy9ub3cgbGV0cyBkZXRlcm1pbmUgdGhlIG51bWJlciBvZiByZWJpbGxzIHRvIHNjaGVkdWxlICh0b3RhbE9jY3VycmVuY2VzKS4gV2Uga25vdyB0aGF0IGJlY2F1c2UgQVJCIGlzIGJhdGNoZWQsIHRoYXQgaXQgaXMgYWx3YXlzIHByZWNlZGVkIGJ5IGFuIEFJTSBjaGFyZ2UgaW4gTWVtYmVyTW91c2UsIG9mZnNldHRpbmcgdGhlCgkJLy9wYXltZW50IGxpbWl0IGJ5IDEuIEJ1dCBpZiB0aGUgcHJvZHVjdCBoYXMgYSB0cmlhbCwgdGhlIEFJTSBjaGFyZ2UgY292ZXJzIHRoZSB0cmlhbCwgd2hpY2ggbmVnYXRlcyB0aGUgb2Zmc2V0LgoJCWlmICgkcHJvZHVjdC0+ZG9MaW1pdFBheW1lbnRzKCkpCgkJewoJCQkkdG90YWxPY2N1cnJlbmNlcyA9ICgkcHJvZHVjdC0+aGFzVHJpYWwoKSk/JHByb2R1Y3QtPmdldE51bWJlck9mUGF5bWVudHMoKTooJHByb2R1Y3QtPmdldE51bWJlck9mUGF5bWVudHMoKS0xKTsKCQl9CgkJZWxzZQoJCXsKCQkJJHRvdGFsT2NjdXJyZW5jZXMgPSAiOTk5OSI7CgkJfQoJCQoJCSRjYXJkTnVtYmVyID0gICAgICAgJGNhcmRJbmZvLT5nZXRDYXJkTnVtYmVyKCk7CgkJJGV4cGlyYXRpb25EYXRlID0gICBkYXRlKCJZLW0iLG1rdGltZSgwLDAsMCwkY2FyZEluZm8tPmdldEV4cGlyYXRpb25Nb250aCgpLDEsJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uWWVhcigpKSk7CgkJJGN1c3RvbWVySWQgICAgID0gICAkY3VzdG9tZXItPmdldElkKCk7CgkJJGN1c3RvbWVyRW1haWwgID0gICAkY3VzdG9tZXItPmdldEVtYWlsKCk7CgkJJGN1c3RvbWVyUGhvbmUgID0gICAkY3VzdG9tZXItPmdldFBob25lKCk7CgkJJGZpcnN0TmFtZSA9IAkJJGJpbGxpbmdBZGRyZXNzLT5nZXRGaXJzdE5hbWUoKTsKCQkkbGFzdE5hbWUgPSAJCSRiaWxsaW5nQWRkcmVzcy0+Z2V0TGFzdE5hbWUoKTsKCQkKCQkkYWRkcmVzczIgPSAgICAgICAgICRiaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUyKCk7CgkJJGNvbWJpbmVkQmlsbGluZ0FkZHJlc3MgPSAoIWVtcHR5KCRhZGRyZXNzMikpPygkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpLiIgIi4kYWRkcmVzczIpOiRiaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUxKCk7CgkJJGNvbWJpbmVkQmlsbGluZ0FkZHJlc3MgPSBzdWJzdHIoJGNvbWJpbmVkQmlsbGluZ0FkZHJlc3MsMCw2MCk7CgkJCgkJJGJpbGxpbmdDaXR5ID0gICAgICBzdWJzdHIoJGJpbGxpbmdBZGRyZXNzLT5nZXRDaXR5KCksMCw0MCk7CgkJJGJpbGxpbmdTdGF0ZSA9ICAgICAkYmlsbGluZ0FkZHJlc3MtPmdldFN0YXRlKCk7CgkJJGJpbGxpbmdaaXAgICA9ICAgICAkYmlsbGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKTsKCQkkYmlsbGluZ0NvdW50cnkgPSAgICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q291bnRyeSgpOwoJCQoJCWlmICgkcHJvZHVjdC0+aXNTaGlwcGFibGUoKSkKCQl7CgkJCSRzaGlwcGluZ0ZpcnN0TmFtZSA9IAkJJHNoaXBwaW5nQWRkcmVzcy0+Z2V0Rmlyc3ROYW1lKCk7CgkJCSRzaGlwcGluZ0xhc3ROYW1lID0gCQkkc2hpcHBpbmdBZGRyZXNzLT5nZXRMYXN0TmFtZSgpOwoJCQlpZiAoZW1wdHkoJHNoaXBwaW5nRmlyc3ROYW1lKSB8fCBlbXB0eSgkc2hpcHBpbmdMYXN0TmFtZSkpIC8vcmVxdWlyZWQuIElmIGVtcHR5LCB1c2luZyBiaWxsaW5nIG5hbWUKCQkJewoJCQkJJHNoaXBwaW5nRmlyc3ROYW1lID0gJGZpcnN0TmFtZTsKCQkJCSRzaGlwcGluZ0xhc3ROYW1lICA9ICRsYXN0TmFtZTsgCgkJCX0KCQkJCgkJCSRzaGlwcGluZ0FkZHJlc3MyID0gICAgICAgICAkc2hpcHBpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTIoKTsKCQkJJGNvbWJpbmVkU2hpcHBpbmdBZGRyZXNzID0gICghZW1wdHkoJHNoaXBwaW5nQWRkcmVzczIpKT8oJHNoaXBwaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUxKCkuIiAiLiRzaGlwcGluZ0FkZHJlc3MyKTokc2hpcHBpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKTsKCQkJJGNvbWJpbmVkU2hpcHBpbmdBZGRyZXNzID0gIHN1YnN0cigkY29tYmluZWRTaGlwcGluZ0FkZHJlc3MsMCw2MCk7CgkJCQoJCQkkc2hpcHBpbmdDaXR5ID0gICAgICAJCXN1YnN0cigkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCksMCw0MCk7CgkJCSRzaGlwcGluZ1N0YXRlID0gICAgCQkkc2hpcHBpbmdBZGRyZXNzLT5nZXRTdGF0ZSgpOwoJCQkkc2hpcHBpbmdaaXAgICA9ICAgICAJCSRzaGlwcGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKTsKCQkJJHNoaXBwaW5nQ291bnRyeSA9ICAgCQkkc2hpcHBpbmdBZGRyZXNzLT5nZXRDb3VudHJ5KCk7CgkJfQoJCQoJICAgLyoKCQkqIFZhbGlkYXRlIHRoYXQgdGhlIGZpZWxkcyByZXF1aXJlZCBieSB0aGUgQVJCIEFQSSBhcmUgbm9uLWVtcHR5IGFuZCB0aGUgdmFsdWVzIGZhbGwgd2l0aGluIHRoZSBhcHByb3ByaWF0ZSByYW5nZXMKCQkqLwoJCQoJCS8vdmFsaWRhdGUgdGhlIHBheW1lbnQgc2NoZWR1bGUKCQlpZiAoKCRwYXltZW50U2NoZWR1bGVbJ3VuaXQnXSA9PSAnZGF5cycpICYmICgoJHBheW1lbnRTY2hlZHVsZVsnbGVuZ3RoJ10gPCA3KSB8fCAoJHBheW1lbnRTY2hlZHVsZVsnbGVuZ3RoJ10gPiAzNjUpKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgc3Vic2NyaXB0aW9uOiBUaGUgdGVybSBpcyBub3Qgc3VwcG9ydGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoKCRwYXltZW50U2NoZWR1bGVbJ3VuaXQnXSA9PSAnbW9udGhzJykgJiYgKCgkcGF5bWVudFNjaGVkdWxlWydsZW5ndGgnXSA8IDEpIHx8ICgkcGF5bWVudFNjaGVkdWxlWydsZW5ndGgnXSA+IDEyKSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHN1YnNjcmlwdGlvbjogVGhlIHRlcm0gaXMgbm90IHN1cHBvcnRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy92YWxpZGF0ZSB0aGF0IHRoZXJlIGlzIGEgYmlsbGluZyBmaXJzdCBuYW1lIGFuZCBsYXN0IG5hbWUKCQlpZiAoZW1wdHkoJGZpcnN0TmFtZSkgfHwgZW1wdHkoJGxhc3ROYW1lKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgc3Vic2NyaXB0aW9uOiBCaWxsaW5nIGZpcnN0IG5hbWUgYW5kIGxhc3QgbmFtZSBhcmUgcmVxdWlyZWQgZmllbGRzIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCSAgIC8qCgkJKiBFbmQgVmFsaWRhdGlvbnMKCQkqLwoJCQoJCSR4bWxDb250ZW50ID0KCQknPD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4nIC4KCQknPEFSQkNyZWF0ZVN1YnNjcmlwdGlvblJlcXVlc3QgeG1sbnM9IkFuZXRBcGkveG1sL3YxL3NjaGVtYS9BbmV0QXBpU2NoZW1hLnhzZCI+JyAuCgkJCSI8bWVyY2hhbnRBdXRoZW50aWNhdGlvbj4iLgoJCQkJIjxuYW1lPnskdGhpcy0+Z2V0TG9naW4oKX08L25hbWU+Ii4KCQkJCSI8dHJhbnNhY3Rpb25LZXk+eyR0aGlzLT5nZXRUcmFuc2FjdGlvbktleSgpfTwvdHJhbnNhY3Rpb25LZXk+Ii4KCQkJIjwvbWVyY2hhbnRBdXRoZW50aWNhdGlvbj4iLgoJCQkiPHJlZklkPnskcmVmSWR9PC9yZWZJZD4iLgoJCQkiPHN1YnNjcmlwdGlvbj4iLgoJCQkJIjxuYW1lPnskbmFtZX08L25hbWU+Ii4KCQkJCSI8cGF5bWVudFNjaGVkdWxlPiIuCgkJCQkJIjxpbnRlcnZhbD4iLgoJCQkJCQkiPGxlbmd0aD57JGxlbmd0aH08L2xlbmd0aD4iLgoJCQkJCQkiPHVuaXQ+eyR1bml0fTwvdW5pdD4iLgoJCQkJCSI8L2ludGVydmFsPiIuCgkJCQkJIjxzdGFydERhdGU+eyRzdGFydERhdGV9PC9zdGFydERhdGU+Ii4KCQkJCQkiPHRvdGFsT2NjdXJyZW5jZXM+eyR0b3RhbE9jY3VycmVuY2VzfTwvdG90YWxPY2N1cnJlbmNlcz4iLgoJCQkJIjwvcGF5bWVudFNjaGVkdWxlPiIuCgkJCQkiPGFtb3VudD57JGFtb3VudH08L2Ftb3VudD4iLgoJCQkJIjxwYXltZW50PiIuCgkJCQkJIjxjcmVkaXRDYXJkPiIuCgkJCQkJCSI8Y2FyZE51bWJlcj57JGNhcmROdW1iZXJ9PC9jYXJkTnVtYmVyPiIuCgkJCQkJCSI8ZXhwaXJhdGlvbkRhdGU+eyRleHBpcmF0aW9uRGF0ZX08L2V4cGlyYXRpb25EYXRlPiIuCgkJCQkJIjwvY3JlZGl0Q2FyZD4iLgoJCQkJIjwvcGF5bWVudD4iLgoJCQkJIjxvcmRlcj4iLgoJCQkJCSI8aW52b2ljZU51bWJlcj57JHJlZklkfTwvaW52b2ljZU51bWJlcj4iLgoJCQkJCSI8ZGVzY3JpcHRpb24+eyRkZXNjcmlwdGlvbn08L2Rlc2NyaXB0aW9uPiIuCgkJCQkiPC9vcmRlcj4iLgoJCQkJIjxjdXN0b21lcj4iLgoJCQkJCSI8aWQ+eyRjdXN0b21lcklkfTwvaWQ+Ii4KCQkJCQkiPGVtYWlsPnskY3VzdG9tZXJFbWFpbH08L2VtYWlsPiIuCgkJCQkJIjxwaG9uZU51bWJlcj57JGN1c3RvbWVyUGhvbmV9PC9waG9uZU51bWJlcj4iLgoJCQkJIjwvY3VzdG9tZXI+Ii4KCQkJCSI8YmlsbFRvPiIuCgkJCQkJIjxmaXJzdE5hbWU+eyRmaXJzdE5hbWV9PC9maXJzdE5hbWU+Ii4KCQkJCQkiPGxhc3ROYW1lPnskbGFzdE5hbWV9PC9sYXN0TmFtZT4iLgoJCQkJCSI8YWRkcmVzcz57JGNvbWJpbmVkQmlsbGluZ0FkZHJlc3N9PC9hZGRyZXNzPiIuCgkJCQkJIjxjaXR5PnskYmlsbGluZ0NpdHl9PC9jaXR5PiIuCgkJCQkJIjxzdGF0ZT57JGJpbGxpbmdTdGF0ZX08L3N0YXRlPiIuCgkJCQkJIjx6aXA+eyRiaWxsaW5nWmlwfTwvemlwPiIuCgkJCQkJIjxjb3VudHJ5PnskYmlsbGluZ0NvdW50cnl9PC9jb3VudHJ5PiIuCgkJCQkiPC9iaWxsVG8+IjsKCQlpZiAoJHByb2R1Y3QtPmlzU2hpcHBhYmxlKCkpCgkJewoJCQkkeG1sQ29udGVudC49CgkJCQkiPHNoaXBUbz4iLgoJCQkJCSI8Zmlyc3ROYW1lPnskc2hpcHBpbmdGaXJzdE5hbWV9PC9maXJzdE5hbWU+Ii4KCQkJCQkiPGxhc3ROYW1lPnskc2hpcHBpbmdMYXN0TmFtZX08L2xhc3ROYW1lPiIuCgkJCQkJIjxhZGRyZXNzPnskY29tYmluZWRTaGlwcGluZ0FkZHJlc3N9PC9hZGRyZXNzPiIuCgkJCQkJIjxjaXR5Pnskc2hpcHBpbmdDaXR5fTwvY2l0eT4iLgoJCQkJCSI8c3RhdGU+eyRzaGlwcGluZ1N0YXRlfTwvc3RhdGU+Ii4KCQkJCQkiPHppcD57JHNoaXBwaW5nWmlwfTwvemlwPiIuCgkJCQkJIjxjb3VudHJ5Pnskc2hpcHBpbmdDb3VudHJ5fTwvY291bnRyeT4iLgoJCQkJIjwvc2hpcFRvPiI7CgkJfQoJJHhtbENvbnRlbnQuPQoJCQkiPC9zdWJzY3JpcHRpb24+Ii4KCQkiPC9BUkJDcmVhdGVTdWJzY3JpcHRpb25SZXF1ZXN0PiI7CgkJQGRhdGVfZGVmYXVsdF90aW1lem9uZV9zZXQoJHNlcnZlclRpbWV6b25lKTsKCQkKCQkkaGVhZGVyQ3VybE9wdGlvbnMgPSBhcnJheShDVVJMT1BUX0hUVFBIRUFERVI9PmFycmF5KCJDb250ZW50LVR5cGU6IHRleHQveG1sIikpOwoJCXJldHVybiAkdGhpcy0+cGFyc2VBUkJHYXRld2F5UmVzcG9uc2UoJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldEFSQkdhdGV3YXlVUkwoKSwiUE9TVCIsJHhtbENvbnRlbnQsJGhlYWRlckN1cmxPcHRpb25zKSwkb3JkZXJJdGVtLCRjYXJkSW5mbyk7Cgl9CgkKCQoJLyoqCgkgKiBQcm9jZXNzIHRoZSByZXN1bHRzIG9mIGFuIEFSQiBzdWJzY3JpcHRpb24gcmVxdWVzdAoJICogCgkgKiBAcGFyYW0gTU1fUmVzcG9uc2UgJHJhd1Jlc3BvbnNlIFRoZSByYXcgcmVzcG9uc2UgZnJvbSB0aGUgcmVtb3RlIGdhdGV3YXksIHdoaWNoIHNob3VsZCBjb250YWluIGFuIFhNTCByZXNwb25zZSwgd3JhcHBlZCBpbiBhbiBNTV9SZXNwb25zZSBvYmplY3QKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSB3aGljaCBob2xkcyB0aGUgcHJvZHVjdCBpbmZvcm1hdGlvbiBmb3IgdGhlIHN1YnNjcmlwdGlvbiBiZWluZyBjcmVhdGVkCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIFRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB1c2VkIHRvIGNoYXJnZSB0aGUgb3JkZXIsIG5lZWRlZCB0byBvYnRhaW4gdGhlIGxhc3QgNCBkaWdpdHMgZm9yIHN0b3JpbmcKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIHJlcHJlc2VudGluZyB0aGUgc3RhdHVzIG9mIHRoZSB0cmFuc2FjdGlvbgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcGFyc2VBUkJHYXRld2F5UmVzcG9uc2UoTU1fUmVzcG9uc2UgJHJhd1Jlc3BvbnNlLE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCBNTV9DYXJkSW5mbyAkY2FyZEluZm8pCgl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJCgkJCWlmICgkcmF3UmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBzdWJzY3JpcHRpb246IFRoZXJlIHdhcyBhbiBlcnJvciBjb25uZWN0aW5nIHRvIG1lcmNoYW50IGdhdGV3YXkiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCWxpYnhtbF91c2VfaW50ZXJuYWxfZXJyb3JzKHRydWUpOyAvL3ByZXZlbnRzIGltcHJvcGVyIHhtbG5zIGF0dHJpYnV0ZSBmcm9tIEF1dGhvcml6ZW5ldCBmcm9tIGdlbmVyYXRpbmcgZXJyb3JzCgkJCXRyeQoJCQl7CgkJCQkkeG1sUmVzcG9uc2UgPSBuZXcgU2ltcGxlWE1MRWxlbWVudCgkcmF3UmVzcG9uc2UtPm1lc3NhZ2UpOwoJCQkJJHJlc3VsdENvZGUgPSBzdHJ0b3VwcGVyKCR4bWxSZXNwb25zZS0+bWVzc2FnZXMtPnJlc3VsdENvZGUpOwoJCQl9CgkJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3Mgc3Vic2NyaXB0aW9uIGdhdGV3YXkgcmVzcG9uc2UiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCXN3aXRjaCAoJHJlc3VsdENvZGUpCgkJCXsKCQkJCWNhc2UgJ09LJzoKCQkJCQkkaW5zZXJ0RGF0YSA9IGFycmF5KCAib3JkZXJfaXRlbV9pZCIgICAgICA9PiAkb3JkZXJJdGVtLT5nZXRJZCgpLAoJCQkJCQkJCQkJICJ4X3N1YnNjcmlwdGlvbl9pZCIgID0+ICR4bWxSZXNwb25zZS0+c3Vic2NyaXB0aW9uSWQsCgkJCQkJCQkJCQkgImxhc3RfZm91ciIgICAgICAgICAgPT4gc3Vic3RyKCRjYXJkSW5mby0+Z2V0Q2FyZE51bWJlcigpLC00KSwKCQkJCQkJCQkJCSAidHJhbnNhY3Rpb25fZGF0ZSIgICA9PiBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKQogCQkJCQkJCSk7CgkJCQkJJHdwZGItPmluc2VydChNTV9UQUJMRV9BVVRITkVUX0FSQl9TVUJTQ1JJUFRJT05TLCRpbnNlcnREYXRhKTsKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJ0VSUk9SJzoKCQkJCQkkY29kZSA9ICR4bWxSZXNwb25zZS0+bWVzc2FnZXMtPm1lc3NhZ2UtPmNvZGU7CgkJCQkJJG1lc3NhZ2UgPSAkeG1sUmVzcG9uc2UtPm1lc3NhZ2VzLT5tZXNzYWdlLT50ZXh0OwoJCQkJCSRlcnJvciA9ICghZW1wdHkoJGNvZGUpICYmICFlbXB0eSgkbWVzc2FnZSkpPyJ7JGNvZGV9OnskbWVzc2FnZX0iOiJ7JGNvZGV9eyRtZXNzYWdlfSI7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRlcnJvcixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlRoZXJlIHdhcyBhbiBlcnJvciBzZXR0aW5nIHVwIGEgc3Vic2NyaXB0aW9uOiBJbnZhbGlkIFJlc3BvbnNlIGZyb20gbWVyY2hhbnQgZ2F0ZXdheSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCQlicmVhazsKCQkJfQoJfQoJCgkKCS8qKgoJICogVXRpbGl0eSBtZXRob2QgdG8gZXh0cmFjdCB0aGUgcGF5bWVudCBzY2hlZHVsZSBmcm9tIGEgcHJvZHVjdCwgYW5kIHRyYW5zbGF0ZSB0aGUgTWVtYmVyTW91c2UgdW5pdHMgb2YgdGltZSBpbnRvIEFSQiB1bml0cwoJICogCgkgKiBAcGFyYW0gTU1fUHJvZHVjdCAkcHJvZHVjdCBUaGUgcHJvZHVjdCB0byBleHRyYWN0IHNjaGVkdWxlIGluZm9ybWF0aW9uIGZyb20KCSAqIEByZXR1cm4gYXJyYXkgQW4gYXJyYXkgY29udGFpbmluZyB0aGUga2V5cyAncmVjdXJyaW5nJyAoYSBib29sZWFuKSwndHJpYWxMZW5ndGgnLCd0cmlhbFVuaXQnLCdsZW5ndGgnLCBhbmQgJ3VuaXQnLCB3aXRoIHRoZSBsYXN0IDQgdHJhbnNsYXRlZCBpbnRvIEFSQiB1bml0cwoJICovCglwcml2YXRlIGZ1bmN0aW9uIGdldEFSQlBheW1lbnRTY2hlZHVsZUZyb21Qcm9kdWN0KE1NX1Byb2R1Y3QgJHByb2R1Y3QpCgl7CgkJCSRwYXltZW50U2NoZWR1bGUgPSBhcnJheSgpOwoJCQkkcGF5bWVudFNjaGVkdWxlWydyZWN1cnJpbmcnXSAgID0gJHByb2R1Y3QtPmlzUmVjdXJyaW5nKCk7CgkJCSRwYXltZW50U2NoZWR1bGVbJ3RyaWFsVW5pdCddICAgPSAkcHJvZHVjdC0+Z2V0VHJpYWxGcmVxdWVuY3koKTsKCQkJJHBheW1lbnRTY2hlZHVsZVsndHJpYWxMZW5ndGgnXSA9ICRwcm9kdWN0LT5nZXRUcmlhbER1cmF0aW9uKCk7CgkJCSRwYXltZW50U2NoZWR1bGVbJ3VuaXQnXSAgICAgICAgPSAkcHJvZHVjdC0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7CgkJCSRwYXltZW50U2NoZWR1bGVbJ2xlbmd0aCddICAgICAgPSAkcHJvZHVjdC0+Z2V0UmViaWxsUGVyaW9kKCk7CgkJCQoJCQkvL3RyYW5zbGF0ZSBtZW1iZXJtb3VzZSBsZW5ndGggdW5pdHMgdG8gQXV0aG9yaXplLm5ldCB1bml0cyByZWNvZ25pemVkIGJ5IEFSQiBzY2hlbWEuIEFjY2VwdGVkIHZhbHVlcyBhcmUgZGF5cyBhbmQgbW9udGhzCgkJCSR0cmFuc2xhdGlvbkhlbHBlciA9IGFycmF5KCJ0cmlhbFVuaXQiPT4idHJpYWxMZW5ndGgiLCAidW5pdCI9PiJsZW5ndGgiKTsKIAkJCQoJCQlmb3JlYWNoICgkdHJhbnNsYXRpb25IZWxwZXIgYXMgJHVuaXROYW1lPT4kbGVuZ3RoTmFtZSkKCQkJewoJCQkJaWYgKCRwYXltZW50U2NoZWR1bGVbJHVuaXROYW1lXSA9PSAieWVhcnMiKQoJIAkJCXsKCSAJCQkJJHBheW1lbnRTY2hlZHVsZVskbGVuZ3RoTmFtZV0gPSBpbnR2YWwoJHBheW1lbnRTY2hlZHVsZVskbGVuZ3RoTmFtZV0pICogMTI7CgkgCQkJCSRwYXltZW50U2NoZWR1bGVbJHVuaXROYW1lXSA9ICJtb250aHMiOwoJIAkJCX0KCSAJCQllbHNlIGlmICgkcGF5bWVudFNjaGVkdWxlWyR1bml0TmFtZV0gPT0gIndlZWtzIikKCSAJCQl7CgkgCQkJCSRwYXltZW50U2NoZWR1bGVbJGxlbmd0aE5hbWVdID0gaW50dmFsKCRwYXltZW50U2NoZWR1bGVbJGxlbmd0aE5hbWVdKSAqIDc7CgkgCQkJCSRwYXltZW50U2NoZWR1bGVbJHVuaXROYW1lXSA9ICJkYXlzIjsKCSAJCQl9CgkJCX0KIAkJCXJldHVybiAkcGF5bWVudFNjaGVkdWxlOwoJfQoJCgkKCS8qKgoJICogUmVzcG9uZCB0byBldmVudHMgZ2VuZXJhdGVkIGJ5IE1lbWJlck1vdXNlCgkgKgoJICogQHNlZSBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXI6OmV2ZW50UmVjZWl2ZWQoKQoJICogQHBhcmFtIGludGVnZXIgJGV2ZW50VHlwZSBBbiBldmVudCBjb25zdGFudCBlbnVtZXJhdGVkIGluIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcgoJICogQHBhcmFtIHZhcmlhYmxlICRldmVudERhdGEgQW55IGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBldmVudAoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlIHByb2Nlc3NpbmcgdGhlIGV2ZW50CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBldmVudFJlY2VpdmVkKCRldmVudFR5cGUsICRldmVudERhdGEpCgl7CgkJJHJlc3BvbnNlID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJc3dpdGNoICgkZXZlbnRUeXBlKQoJCXsKCQkJY2FzZSBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXI6OlBST0RVQ1RfQURERUQ6CgkJCWNhc2UgTU1fTWVtYmVyTW91c2VFdmVudExpc3RlbmVyOjpQUk9EVUNUX1VQREFURUQ6CgkJCQlpZiAoJGV2ZW50RGF0YSBpbnN0YW5jZW9mIE1NX1Byb2R1Y3QpCgkJCQl7CgkJCQkJJHByb2R1Y3QgPSAkZXZlbnREYXRhOwoJCQkJCWlmICgkcHJvZHVjdC0+aXNSZWN1cnJpbmcoKSkKCQkJCQl7CgkJCQkJCSRwYXltZW50U2NoZWR1bGUgPSAkdGhpcy0+Z2V0QVJCUGF5bWVudFNjaGVkdWxlRnJvbVByb2R1Y3QoJHByb2R1Y3QpOwoJCQkJCQkvL1ZhbGlkYXRlIHRoYXQgdGhlIGZpZWxkcyByZXF1aXJlZCBieSB0aGUgQVJCIEFQSSBhcmUgbm9uLWVtcHR5IGFuZCB0aGUgdmFsdWVzIGZhbGwgd2l0aGluIHRoZSBhcHByb3ByaWF0ZSByYW5nZXMKCQkJCQkJaWYgKCgkcGF5bWVudFNjaGVkdWxlWyd1bml0J10gPT0gJ2RheXMnKSAmJiAoKCRwYXltZW50U2NoZWR1bGVbJ2xlbmd0aCddIDwgNykgfHwgKCRwYXltZW50U2NoZWR1bGVbJ2xlbmd0aCddID4gMzY1KSkpCgkJCQkJCXsKCQkJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yOiBBdXRob3JpemUubmV0IG9ubHkgc3VwcG9ydHMgcmVjdXJyaW5nIGJpbGxpbmcgd2l0aCBhIHRlcm0gb2YgYXQgbGVhc3QgNyBkYXlzIGFuZCBhdCBtb3N0IDM2NSBkYXlzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJaWYgKCgkcGF5bWVudFNjaGVkdWxlWyd1bml0J10gPT0gJ21vbnRocycpICYmICgoJHBheW1lbnRTY2hlZHVsZVsnbGVuZ3RoJ10gPCAxKSB8fCAoJHBheW1lbnRTY2hlZHVsZVsnbGVuZ3RoJ10gPiAxMikpKQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvcjogQXV0aG9yaXplLm5ldCBkb2VzIG5vdCBzdXBwb3J0IHRoZSByZWN1cnJpbmcgc2NoZWR1bGUgeW91IGhhdmUgZW50ZXJlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJCXJldHVybiAkcmVzcG9uc2U7Cgl9CgkKCQoJLyoqCgkgKiBSZWZ1bmRzIHRoZSB0cmFuc2FjdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBpZC4gIElmIGEgdmFsaWQgdHJhbnNhY3Rpb24gaWQgaXMgc3VwcGxpZWQsIGZpcnN0IHRoZSB0cmFuc2FjdGlvbiBpcyBjaGVja2VkIHRvIHNlZSBpZiBpdCBpcyB3aXRoaW4KCSAqIHRoZSAkdm9pZFdpbmRvdy4gVW5zZXR0bGVkIHRyYW5zYWN0aW9ucyBuZWVkIHRvIGJlIHZvaWRlZCAodGhleSBjYW4ndCBiZSByZWZ1bmRlZCBiZWNhdXNlIHRoZXkgaGF2ZW4ndCBiZWVuIHNlbnQgdG8gdGhlIHByb2Nlc3NvciB5ZXQpIGFuZCBzZXR0bGVkIAoJICogdHJhbnNhY3Rpb25zIG5lZWQgdG8gYmUgY3JlZGl0ZWQuIEZvciB0cmFuc2FjdGlvbnMgd2l0aGluIHRoZSAkdm9pZFdpbmRvdywgYSB2b2lkIGlzIGF0dGVtcHRlZCBmaXJzdCwgYW5kIGlmIHRoYXQgZmFpbHMsIGEgcmVmdW5kIGlzIGF0dGVtcHRlZC4KCSAqIEZvciB0cmFuc2FjdGlvbnMgb3V0c2lkZSB0aGUgdm9pZFdpbmRvdywgYSByZWZ1bmQgaXMgZGlyZWN0bHkgYXR0ZW1wdGVkLgoJICogCgkgKiBAcGFyYW0gaW50ZWdlciAkdHJhbnNhY3Rpb25JZCBUaGUgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24gaWQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBSZXByZXNlbnRpbmcgdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBvZiB0aGUgcmVmdW5kIG9wZXJhdGlvbgoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vbWFrZSBzdXJlIHdlIGhhdmUgYSB2YWxpZCB0cmFuc2FjdGlvbiBpZAoJCWlmIChlbXB0eSgkdHJhbnNhY3Rpb25JZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZCwgaW52YWxpZCB0cmFuc2FjdGlvbiBpZCBzdXBwbGllZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9tYWtlIHN1cmUgdGhlIHRyYW5zYWN0aW9uIGV4aXN0cwoJCSR0cmFuc2FjdGlvblJvdyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBmcm9tICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgd2hlcmUgaWQgPSAlcyIsJHRyYW5zYWN0aW9uSWQpKTsKCQlpZiAoaXNfbnVsbCgkdHJhbnNhY3Rpb25Sb3cpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQsIHRyYW5zYWN0aW9uIGRvZXMgbm90IGV4aXN0IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL21ha2Ugc3VyZSBpdHMgbm90IGFscmVhZHkgcmVmdW5kZWQKCQlpZiAoIWlzX251bGwoJHRyYW5zYWN0aW9uUm93LT5yZWZ1bmRfaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUcmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlZnVuZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2RldGVybWluZSB3aGVyZSB0aGUgdHJhbnNhY3Rpb24gaW5mb3JtYXRpb24gaXMgc3RvcmVkIGJhc2VkIG9uIHRoZSB0eXBlCgkJJHhfdHJhbnNfaWQgPSAiIjsKCQkkbGFzdEZvdXIgID0gIiI7CgkJJHRyYW5zYWN0aW9uQW1vdW50ID0gYWJzKCR0cmFuc2FjdGlvblJvdy0+YW1vdW50KTsKCQkkZ2F0ZXdheVRyYW5zYWN0aW9uRGF0ZSA9ICIiOwoJCSRnYXRld2F5UmVmdW5kUmVxdWlyZWQgPSBmYWxzZTsKCQlzd2l0Y2ggKCR0cmFuc2FjdGlvblJvdy0+dHJhbnNhY3Rpb25fdHlwZSkKCQl7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQ6CgkJCQkvL3RyYW5zYWN0aW9uIGluZm8gZm9yIGluaXRpYWwgYW5kIG5vbi1yZWN1cnJpbmcgY2hhcmdlcyBpcyBpbiB0aGUgYWltIHRyYW5zYWN0aW9ucyB0YWJsZSwgcmV0cmlldmUgdGhlIHhfdHJhbnNfaWQgYW5kIHRoZSBsYXN0X2ZvdXIKCQkJCSRhaW1UcmFuc2FjdGlvbkluZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgiU0VMRUNUIHhfdHJhbnNfaWQsIGxhc3RfZm91ciwgdHJhbnNhY3Rpb25fZGF0ZSBmcm9tICIuTU1fVEFCTEVfQVVUSE5FVF9BSU1fVFJBTlNBQ1RJT05TLiIgd2hlcmUgaWQ9JXMiLCR0cmFuc2FjdGlvblJvdy0+cGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCkpOwoJCQkJaWYgKGlzX251bGwoJGFpbVRyYW5zYWN0aW9uSW5mbykpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcmVmdW5kIHRyYW5zYWN0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJJHhfdHJhbnNfaWQgPSAkYWltVHJhbnNhY3Rpb25JbmZvLT54X3RyYW5zX2lkOwoJCQkJJGxhc3RGb3VyICA9ICRhaW1UcmFuc2FjdGlvbkluZm8tPmxhc3RfZm91cjsKCQkJCSRnYXRld2F5VHJhbnNhY3Rpb25EYXRlID0gJGFpbVRyYW5zYWN0aW9uSW5mby0+dHJhbnNhY3Rpb25fZGF0ZTsKCQkJCSRnYXRld2F5UmVmdW5kUmVxdWlyZWQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UOgoJCQkJLy90cmFuc2FjdGlvbiBpbmZvIGZvciBzdWJzY3JpcHRpb25zIGlzIHN0b3JlZCBiZXR3ZWVuIHRoZSBhcmIgc3Vic2NyaXB0aW9ucyB0YWJsZSBhbmQgc3Vic2NyaXB0aW9ucyBoaXN0b3J5IHRhYmxlLCByZXRyaWV2ZSB0aGUgbGFzdF9mb3VyIGFuZCB0aGUgeF90cmFuc19pZAoJCQkJJGFyYlRyYW5zYWN0aW9uUXVlcnkgPSAiU0VMRUNUIGFyYmgueF90cmFuc19pZCxhcmJ0Lmxhc3RfZm91cixhcmJoLnRyYW5zYWN0aW9uX2RhdGUgZnJvbSAiLk1NX1RBQkxFX0FVVEhORVRfQVJCX1NVQlNDUklQVElPTl9ISVNUT1JZLiIgYXJiaCAiLgoJCQkJCQkJCQkgICAiTEVGVCBKT0lOICIuTU1fVEFCTEVfQVVUSE5FVF9BUkJfU1VCU0NSSVBUSU9OUy4iIGFyYnQgT04gKGFyYmgueF9zdWJzY3JpcHRpb25faWQgPSBhcmJ0Lnhfc3Vic2NyaXB0aW9uX2lkKSAiLgoJCQkJCQkJCQkgICAiV0hFUkUgYXJiaC54X3RyYW5zX2lkID0gJXMiOwoJCQkJJGFyYlRyYW5zYWN0aW9uSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCRhcmJUcmFuc2FjdGlvblF1ZXJ5LCR0cmFuc2FjdGlvblJvdy0+cGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCkpOwoJCQkJJHhfdHJhbnNfaWQgPSAkYXJiVHJhbnNhY3Rpb25JbmZvLT54X3RyYW5zX2lkOwoJCQkJJGxhc3RGb3VyICA9ICRhcmJUcmFuc2FjdGlvbkluZm8tPmxhc3RfZm91cjsKCQkJCSRnYXRld2F5VHJhbnNhY3Rpb25EYXRlID0gJGFyYlRyYW5zYWN0aW9uSW5mby0+dHJhbnNhY3Rpb25fZGF0ZTsKCQkJCSRnYXRld2F5UmVmdW5kUmVxdWlyZWQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRToKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX0NIQVJHRToKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHJlZnVuZCB0cmFuc2FjdGlvbjogTm90IGEgcGF5bWVudCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUsIHVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGZpbmFsUmVzcG9uc2UgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIHJlZnVuZGluZyB0aGUgZGVzaWduYXRlZCB0cmFuc2FjdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsgLy9wbGFjZWhvbGRlcgoJCQoJCWlmICgkZ2F0ZXdheVJlZnVuZFJlcXVpcmVkKQoJCXsgCgkJCWlmIChlbXB0eSgkeF90cmFuc19pZCkpIC8vbmVjZXNzYXJ5IGZvciBib3RoIHZvaWRzIGFuZCBjcmVkaXRzCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQSBjb25maWd1cmF0aW9uIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBkdXJpbmcgdGhlIGF0dGVtcHQgdG8gdm9pZCB0aGUgdHJhbnNhY3Rpb24iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCQoJCQkkY3VycmVudFRpbWUgPSBjdXJyZW50X3RpbWUoJ3RpbWVzdGFtcCcsMSk7CgkJCSRnYXRld2F5VHJhbnNhY3Rpb25EYXRlID0gc3RydG90aW1lKCRnYXRld2F5VHJhbnNhY3Rpb25EYXRlKTsKCQkJJHZvaWRXaW5kb3dJblNlY29uZHMgPSAkdGhpcy0+dm9pZFdpbmRvdyAqIDM2MDA7IC8vMzYwMCBzZWNzIGluIGFuIGhvdXIKCQkJCgkJCS8vaWYgdGhlcmUgaXMgbm8gdHJhbnNhY3Rpb24gZGF0ZSAoZm9yIHdoYXRldmVyIHJlYXNvbikgb3IgdGhlIHRyYW5zYWN0aW9uIGlzIHdpdGhpbiB0aGUgd2luZG93LCBhdHRlbXB0IGEgdm9pZCBmaXJzdAoJCQlpZiAoZW1wdHkoJGdhdGV3YXlUcmFuc2FjdGlvbkRhdGUpIHx8ICgoJGN1cnJlbnRUaW1lIC0gJHZvaWRXaW5kb3dJblNlY29uZHMpIDw9ICRnYXRld2F5VHJhbnNhY3Rpb25EYXRlKSkKCQkJewoJCQkJJGZpbmFsUmVzcG9uc2UgPSAkdGhpcy0+c2VuZEFJTVRyYW5zYWN0aW9uVm9pZCgkeF90cmFuc19pZCwkdHJhbnNhY3Rpb25JZCk7CgkJCX0KCQkJCgkJCS8vaWYgdGhlIHZvaWQgd2FzIG5vdCBzdWNjZXNzZnVsIChvciBub3QgYXR0ZW1wdGVkKSBhbmQgd2UgaGF2ZSB0aGUgbGFzdCBmb3VyIGRpZ2l0cywgYXR0ZW1wdCBhIGNyZWRpdAoJCQlpZiAoKCRmaW5hbFJlc3BvbnNlLT5nZXRTdGF0dXMoKSAhPSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokU1VDQ0VTUykgJiYgIWVtcHR5KCRsYXN0Rm91cikpCgkJCXsKCQkJCSRmaW5hbFJlc3BvbnNlID0gJHRoaXMtPnNlbmRBSU1UcmFuc2FjdGlvbkNyZWRpdCgkeF90cmFuc19pZCwgJGxhc3RGb3VyLCAkdHJhbnNhY3Rpb25BbW91bnQsJHRyYW5zYWN0aW9uSWQpOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkZmluYWxSZXNwb25zZTsKCQkKCX0KCQoJCgkvKioKCSAqIFNlbmQgYSBsaW5rZWQgQ3JlZGl0IHRvIEF1dGhvcml6ZS5uZXQgdG8gY29tcGxldGVseSByZWZ1bmQgYSB0cmFuc2FjdGlvbgoJICogCgkgKiBAcGFyYW0gc3RyaW5nICR4X3RyYW5zX2lkIFRoZSBBdXRob3JpemUubmV0IHVuaXF1ZSB0cmFuc2FjdGlvbiBpZAoJICogQHBhcmFtIHN0cmluZyAkbGFzdEZvdXIgVGhlIGxhc3QgZm91ciBkaWdpdHMgb2YgdGhlIGNyZWRpdCBjYXJkIGJlaW5nIHJlZnVuZGVkCgkgKiBAcGFyYW0gZmxvYXQgJHRyYW5zYWN0aW9uQW1vdW50IFRoZSBkb2xsYXIgYW1vdW50IGJlaW5nIHJlZnVuZGVkIChzaG91bGQgZXF1YWwgdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uIGFtb3VudCwgYXMgY3VycmVudGx5IHBhcnRpYWwgcmVmdW5kcyBhcmUgbm90IHN1cHBvcnRlZCkKCSAqIEBwYXJhbSBpbnRlZ2VyICRvcmlnaW5hbFRyYW5zYWN0aW9uSWQgVGhlIGlkIG9mIHRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiBiZWluZyByZWZ1bmRlZAoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyB0aGUgc3VjY2VzcyBvZiBmYWlsdXJlIG9mIHRoZSBvcGVyYXRpb24KCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNlbmRBSU1UcmFuc2FjdGlvbkNyZWRpdCgkeF90cmFuc19pZCwgJGxhc3RGb3VyLCR0cmFuc2FjdGlvbkFtb3VudCwkb3JpZ2luYWxUcmFuc2FjdGlvbklkKQoJewoJCWlmIChlbXB0eSgkeF90cmFuc19pZCkgfHwgZW1wdHkoJGxhc3RGb3VyKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgQXV0aG9yaXplLm5ldCByZWZ1bmQgKGNyZWRpdCk6IEVpdGhlciB0aGUgdHJhbnNhY3Rpb24gaWQgb3IgdGhlIGxhc3QgNCBvZiB0aGUgY3JlZGl0IGNhcmQgYXJlIHVuYXZhaWxhYmxlIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkvL1RPRE86IFJFRkFDVE9SOiBXaWxsIHRoZSBnYXRld2F5IHByb2Nlc3MgYSBjcmVkaXQgZm9yIGEgdHJhbnNhY3Rpb25BbW91bnQgb2YgJDA/CgkJCgkJJHBvc3RWYWx1ZXMgPSBhcnJheSgKCQkJCSJ4X2xvZ2luIgkJCT0+ICR0aGlzLT5nZXRMb2dpbigpLAoJCQkJInhfdHJhbl9rZXkiCQk9PiAkdGhpcy0+Z2V0VHJhbnNhY3Rpb25LZXkoKSwKCQkKCQkJCSJ4X3ZlcnNpb24iCQkJPT4gIjMuMSIsCgkJCQkieF9kZWxpbV9kYXRhIgkJPT4gIlRSVUUiLAoJCQkJInhfZGVsaW1fY2hhciIJCT0+ICJ8IiwKCQkJCSJ4X3JlbGF5X3Jlc3BvbnNlIgk9PiAiRkFMU0UiLAoJCQoJCQkJInhfdHlwZSIJCQk9PiAiQ1JFRElUIiwKCQkJCSJ4X2NhcmRfbnVtIgkJPT4gJGxhc3RGb3VyLAoJCQkJInhfYW1vdW50IgkJCT0+ICR0cmFuc2FjdGlvbkFtb3VudCwKCQkJCSJ4X3RyYW5zX2lkIiAgICAgICAgPT4gJHhfdHJhbnNfaWQKCQkpOwoJCQoJCSRwb3N0U3RyaW5nID0gIiI7CgkJZm9yZWFjaCggJHBvc3RWYWx1ZXMgYXMgJGtleSA9PiAkdmFsdWUgKQoJCXsKCQkJJHBvc3RTdHJpbmcgLj0gIiRrZXk9IiAuIHVybGVuY29kZSggJHZhbHVlICkgLiAiJiI7CgkJfQoJCQoJCSRjcmVkaXRSZXNwb25zZSA9ICR0aGlzLT5wYXJzZUFJTVZvaWRBbmRDcmVkaXRSZXNwb25zZXMoJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldEFJTUdhdGV3YXlVUkwoKSwiUE9TVCIsJHBvc3RTdHJpbmcpLCRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpOwoJCXJldHVybiAkY3JlZGl0UmVzcG9uc2U7Cgl9CgkKCQoJLyoqCgkgKiBBdHRlbXB0IHRvIHZvaWQgYSB0cmFuc2FjdGlvbiB3aXRoIHRoZSBBdXRob3JpemUubmV0IHRyYW5zYWN0aW9uIGlkZW50aWZpZXIgc3VwcGxpZWQuIFZvaWRzIGNhbiBvbmx5IGJlIGlzc3VlZCBvbiB1bnNldHRsZWQgdHJhbnNhY3Rpb25zCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJHhfdHJhbnNfaWQgVGhlIEF1dGhvcml6ZS5uZXQgdHJhbnNhY3Rpb24gaWQKCSAqIEBwYXJhbSBpbnRlZ2VyICRvcmlnaW5hbFRyYW5zYWN0aW9uSWQgVGhlIGlkIG9mIHRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiBiZWluZyByZWZ1bmRlZAoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNlbmRBSU1UcmFuc2FjdGlvblZvaWQoJHhfdHJhbnNfaWQsJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCkKCXsKCQlpZiAoZW1wdHkoJHhfdHJhbnNfaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJBIGNvbmZpZ3VyYXRpb24gZXJyb3Igd2FzIGVuY291bnRlcmVkIGR1cmluZyB0aGUgYXR0ZW1wdCB0byB2b2lkIHRoZSB0cmFuc2FjdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHBvc3RWYWx1ZXMgPSBhcnJheSgKCQkJCSJ4X2xvZ2luIgkJCT0+ICR0aGlzLT5nZXRMb2dpbigpLAoJCQkJInhfdHJhbl9rZXkiCQk9PiAkdGhpcy0+Z2V0VHJhbnNhY3Rpb25LZXkoKSwKCQkJCQkKCQkJCSJ4X3ZlcnNpb24iCQkJPT4gIjMuMSIsCgkJCQkieF9kZWxpbV9kYXRhIgkJPT4gIlRSVUUiLAoJCQkJInhfZGVsaW1fY2hhciIJCT0+ICJ8IiwKCQkJCSJ4X3JlbGF5X3Jlc3BvbnNlIgk9PiAiRkFMU0UiLAoJCQkJCQoJCQkJInhfdHlwZSIJCQk9PiAiVk9JRCIsCgkJCQkieF90cmFuc19pZCIgICAgICAgID0+ICR4X3RyYW5zX2lkCgkJKTsKCQkJCgkJJHBvc3RTdHJpbmcgPSAiIjsKCQlmb3JlYWNoKCAkcG9zdFZhbHVlcyBhcyAka2V5ID0+ICR2YWx1ZSApCgkJewoJCQkkcG9zdFN0cmluZyAuPSAiJGtleT0iIC4gdXJsZW5jb2RlKCAkdmFsdWUgKSAuICImIjsKCQl9CgkJCQoJCSR2b2lkUmVzcG9uc2UgPSAkdGhpcy0+cGFyc2VBSU1Wb2lkQW5kQ3JlZGl0UmVzcG9uc2VzKCR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRBSU1HYXRld2F5VVJMKCksIlBPU1QiLCRwb3N0U3RyaW5nKSwkb3JpZ2luYWxUcmFuc2FjdGlvbklkKTsJCgkJcmV0dXJuICR2b2lkUmVzcG9uc2U7Cgl9CgkKCQoJLyoqCgkgKiBQcm9jZXNzZXMgdGhlIHJlc3BvbnNlcyByZXR1cm5lZCBhcyBhIHJlc3VsdCBhZ2FpbnN0IFZPSUQgYW5kIENSRURJVCBvcGVyYXRpb25zCgkgKiAKCSAqIEBwYXJhbSBNTV9SZXNwb25zZSAkcmVzcG9uc2UgQW4gTU1fUmVzcG9uc2Ugb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJhdyByZXNwb25zZSBmcm9tIEF1dGhvcml6ZS5uZXQgYXMgdGhlIG1lc3NhZ2UgaWYgdGhlIHRyYW5zbWlzc2lvbiB3YXMgc3VjY2Vzc2Z1bAoJICogQHBhcmFtIGludGVnZXIgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCBUaGUgb3JpZ2luYWwgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24gYmVpbmcgcmVmdW5kZWQKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgd2hldGhlciB0aGUgb3BlcmF0aW9uIHBlcmZvcm1lZCB3YXMgc3VjY2Vzc2Z1bCBmcm9tIHRoZSBzdGFuZHBvaW50IG9mIHRoZSBNZW1iZXJNb3VzZSBwYXltZW50IHNlcnZpY2UgZnJhbWV3b3JrCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwYXJzZUFJTVZvaWRBbmRDcmVkaXRSZXNwb25zZXMoTU1fUmVzcG9uc2UgJHJlc3BvbnNlLCAkb3JpZ2luYWxUcmFuc2FjdGlvbklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoJHJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlRoZXJlIHdhcyBhbiBlcnJvciByZWZ1bmRpbmcgdGhlIHRyYW5zYWN0aW9uOiBFcnJvciBjb25uZWN0aW5nIHRvIG1lcmNoYW50IGdhdGV3YXkiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRyZXNwb25zZURhdGEgPSBleHBsb2RlKCJ8IiwkcmVzcG9uc2UtPm1lc3NhZ2UpOwoJCWlmICghaXNfYXJyYXkoJHJlc3BvbnNlRGF0YSkpCgkJewoJCQkvL3RoZSBkYXRhIHdhcyBub3QgaW4gdGhlIGZvcm1hdCBleHBlY3RlZCwgdGhpcyBpcyBhbiBlcnJvcgoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlRoZXJlIHdhcyBhbiBlcnJvciByZWZ1bmRpbmcgdGhlIHRyYW5zYWN0aW9uOiBJbnZhbGlkIFJlc3BvbnNlIGZyb20gbWVyY2hhbnQgZ2F0ZXdheSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJc3dpdGNoICgkcmVzcG9uc2VEYXRhWzBdKQoJCXsKCQkJY2FzZSAnMSc6CgkJCWNhc2UgJzQnOgoJCQkJCgkJCQkvL2dldCBvcmlnaW5hbCB0cmFuc2FjdGlvbiBkZXRhaWxzCgkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIFdIRVJFIGlkPSVzIiwkb3JpZ2luYWxUcmFuc2FjdGlvbklkKSk7CgkJCQkKCQkJCS8vbG9nIGdhdGV3YXkgcmVzcG9uc2UgaW4gQUlNIHRyYW5zYWN0aW9uIHRhYmxlCgkJCQkkdHJhbnNhY3Rpb25BbW91bnQgPSBmbG9hdHZhbChpc3NldCgkcmVzcG9uc2VEYXRhWzldKT8kcmVzcG9uc2VEYXRhWzldOjApOwoJCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUmVmdW5kIGZvciB0cmFuc2FjdGlvbiMgeyRvcmlnaW5hbFRyYW5zYWN0aW9uSWR9IjsKCQkJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJCSRpbnNlcnREYXRhID0gYXJyYXkoICJvcmRlcl9pZCIgICAgICAgICAgPT4gJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pZCwKCQkJCQkJInhfdHJhbnNfaWQiICAgICAgICA9PiBpc3NldCgkcmVzcG9uc2VEYXRhWzZdKT8kcmVzcG9uc2VEYXRhWzZdOjAsCgkJCQkJCSJhbW91bnQiICAgICAgICAgICAgPT4gLShhYnMoJHRyYW5zYWN0aW9uQW1vdW50KSksCgkJCQkJCSJ0cmFuc2FjdGlvbl9kYXRlIiAgPT4gJHRyYW5zYWN0aW9uRGF0ZQoJCQkJKTsKCQkJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQVVUSE5FVF9BSU1fVFJBTlNBQ1RJT05TLCRpbnNlcnREYXRhKTsKCQkJCSRhaW1UcmFuc2FjdGlvbklkID0gJHdwZGItPmluc2VydF9pZDsKCQkJCQoJCQkJaWYgKCR0aGlzLT51c2luZ1Rlc3RHYXRld2F5KQoJCQkJewoJCQkJCSRyZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUZXN0VHJhbnNhY3Rpb25FbnRyeSgkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPm9yZGVyX2lkLAoJCQkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pdGVtX2lkLAoJCQkJCQkJJHRyYW5zYWN0aW9uQW1vdW50LAoJCQkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5jdXJyZW5jeSwKCQkJCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCwKCQkJCQkJCWZhbHNlLAoJCQkJCQkJJHRoaXMtPmdldElkKCksCgkJCQkJCQkkYWltVHJhbnNhY3Rpb25JZCwKCQkJCQkJCSR0cmFuc2FjdGlvbkRhdGUsCgkJCQkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbklkKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkkcmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPm9yZGVyX2lkLCAKCQkJCQkJCQkJCQkJCQkgCQkJICAkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPm9yZGVyX2l0ZW1faWQsIAoJCQkJCQkJCQkJCQkJCSAJCQkgICR0cmFuc2FjdGlvbkFtb3VudCwgCgkJCQkJCQkJCQkJCQkJCQkJICAkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPmN1cnJlbmN5LAoJCQkJCQkJCQkJCQkJCSAJCQkgICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCAKCQkJCQkJCQkJCQkJCQkJCQkgIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUZVTkQsIAoJCQkJCQkJCQkJCQkJCQkJCSAgZmFsc2UsCgkJCQkJCQkJCQkJCQkJCQkJICAkdGhpcy0+Z2V0SWQoKSwKCQkJCQkJCQkJCQkJCQkJCQkgICRhaW1UcmFuc2FjdGlvbklkLCAKCQkJCQkJCQkJCQkJCQkJCQkgICR0cmFuc2FjdGlvbkRhdGUsIAoJCQkJCQkJCQkJCQkJCQkJCSAgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCk7CgkJCQl9CgkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzcG9uc2UpKQoJCQkJewoJCQkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgiVVBEQVRFICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgU0VUIHJlZnVuZF9pZCA9ICVzIFdIRVJFIGlkID0gJXMiLCRyZXNwb25zZS0+bWVzc2FnZSwkb3JpZ2luYWxUcmFuc2FjdGlvbklkKSk7CgkJCQl9CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJCWJyZWFrOwoJCQljYXNlICcyJzoKCQkJCS8vZGVjbGluZWQKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlIG1lcmNoYW50IGdhdGV3YXkgZGVjbGluZWQgdG8gcGVyZm9ybSB0aGUgcmVmdW5kIG9wZXJhdGlvbiIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRGQUlMRUQpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJzMnOgoJCQkJLy9lcnJvcgoJCQkJJGRldGFpbHMgPSAoaXNzZXQoJHJlc3BvbnNlRGF0YVszXSkgJiYgIWVtcHR5KCRyZXNwb25zZURhdGFbM10pKT8iOiB7JHJlc3BvbnNlRGF0YVszXX0iOiIiOwoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUaGVyZSB3YXMgYW4gZXJyb3IgcGVyZm9ybWluZyB0aGUgcmVmdW5kIG9wZXJhdGlvbnskZGV0YWlsc30iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCS8vcHJvY2VzcyBhcyBlcnJvcgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUaGVyZSB3YXMgYW4gZXJyb3IgcGVyZm9ybWluZyB0aGUgcmVmdW5kIG9wZXJhdGlvbjogSW52YWxpZCBSZXNwb25zZSBmcm9tIG1lcmNoYW50IGdhdGV3YXkiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQlicmVhazsKCQl9Cgl9CgkKCQoJcHJpdmF0ZSBmdW5jdGlvbiBpc1BlbmRpbmdPdmVyZHVlU3Vic2NyaXB0aW9uKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHBlbmRpbmdPdmVyZHVlU3Vic2NyaXB0aW9ucyA9IE1NX1RBQkxFX0FVVEhORVRfUEVORElOR19PVkVSRFVFX1NVQlNDUklQVElPTlM7CgkJJHBlbmRpbmdPdmVyZHVlU3Vic2NyaXB0aW9uSWQgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIGlkIGZyb20geyRwZW5kaW5nT3ZlcmR1ZVN1YnNjcmlwdGlvbnN9IHdoZXJlIG9yZGVyX2l0ZW1faWQ9J3skb3JkZXJJdGVtLT5nZXRJZCgpfSciKTsKCQkJCgkJaWYgKCFpc19udWxsKCRwZW5kaW5nT3ZlcmR1ZVN1YnNjcmlwdGlvbklkKSkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCQoJLyoqCgkgKiBDYW5jZWwgdGhlIHN1YnNjcmlwdGlvbiBhdHRhY2hlZCB0byBhIHJlY3VycmluZyBvcmRlciBpdGVtCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpjYW5jZWxTdWJzY3JpcHRpb24oKQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBwcm9kdWN0IHRvIGJlIGNhbmNlbGxlZAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcywgZmFpbHVyZSBvciBlcnJvci4gTm9uLXN1Y2Nlc3Mgc3RhdGVzIG1heSByZXR1cm4gYSBkZXNjcmlwdGl2ZSBtZXNzYWdlIGluZGljYXRpbmcgd2hhdCBoYXBwZW5lZAoJICovCglwdWJsaWMgZnVuY3Rpb24gY2FuY2VsU3Vic2NyaXB0aW9uKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL2ZpcnN0LCBtYWtlIHN1cmUgdGhpcyBpcyBhIHByb2R1Y3QuIElmIG5vdCwgc29tZXRoaW5nIGdvdCBtZXNzZWQgdXAgYWJvdmUKCQlpZiAoJG9yZGVySXRlbS0+Z2V0SXRlbVR5cGUoKSAhPSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQXR0ZW1wdGVkIHRvIGNhbmNlbCBhIG5vbi1wcm9kdWN0IGl0ZW0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vdGhlbiBtYWtlIHN1cmUgaXRzIG5vdCBhbHJlYWR5IGNhbmNlbGxlZAoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb246IFRoZSBzdWJzY3JpcHRpb24gaGFzIGFscmVhZHkgYmVlbiBjYW5jZWxsZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJJHN1YnNjcmlwdGlvbnNUYWJsZSA9IE1NX1RBQkxFX0FVVEhORVRfQVJCX1NVQlNDUklQVElPTlM7CgkJJHBlbmRpbmdPdmVyZHVlU3Vic2NyaXB0aW9ucyA9IE1NX1RBQkxFX0FVVEhORVRfUEVORElOR19PVkVSRFVFX1NVQlNDUklQVElPTlM7CgkJJHhfc3Vic2NyaXB0aW9uX2lkID0gJHdwZGItPmdldF92YXIoIlNFTEVDVCB4X3N1YnNjcmlwdGlvbl9pZCBmcm9tIHskc3Vic2NyaXB0aW9uc1RhYmxlfSB3aGVyZSBvcmRlcl9pdGVtX2lkPSd7JG9yZGVySXRlbS0+Z2V0SWQoKX0nIik7CgkJaWYgKGlzX251bGwoJHhfc3Vic2NyaXB0aW9uX2lkKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCgkJCS8vIGNoZWNrIGlmIGl0ZW0gaXMgaW4gdGhlIHBlbmRpbmcgb3ZlcmR1ZSBzdWJzY3JpcHRpb25zIHRhYmxlCgkJCSRwZW5kaW5nT3ZlcmR1ZVN1YnNjcmlwdGlvbklkID0gJHdwZGItPmdldF92YXIoIlNFTEVDVCBpZCBmcm9tIHskcGVuZGluZ092ZXJkdWVTdWJzY3JpcHRpb25zfSB3aGVyZSBvcmRlcl9pdGVtX2lkPSd7JG9yZGVySXRlbS0+Z2V0SWQoKX0nIik7CgkJCQoJCQlpZiAoaXNfbnVsbCgkcGVuZGluZ092ZXJkdWVTdWJzY3JpcHRpb25JZCkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNhbmNlbCBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbiBub3QgZm91bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkvLyByZW1vdmUgaXRlbSBmb3IgcGVuZGluZyBvdmVyZHVlIHN1YnNjcmlwdGlvbnMgdGFibGUKCQkJCSR3cGRiLT5kZWxldGUoJHBlbmRpbmdPdmVyZHVlU3Vic2NyaXB0aW9ucywgYXJyYXkoJ0lEJyA9PiAkcGVuZGluZ092ZXJkdWVTdWJzY3JpcHRpb25JZCksIGFycmF5KCclZCcpKTsKCQkJCQoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJCX0KCQl9CgkJCgkJJHhtbENvbnRlbnQgPQoJCSc8P3htbCB2ZXJzaW9uPSIxLjAiIGVuY29kaW5nPSJ1dGYtOCI/PicgLgoJCSc8QVJCQ2FuY2VsU3Vic2NyaXB0aW9uUmVxdWVzdCB4bWxucz0iQW5ldEFwaS94bWwvdjEvc2NoZW1hL0FuZXRBcGlTY2hlbWEueHNkIj4nIC4KCQkiPG1lcmNoYW50QXV0aGVudGljYXRpb24+Ii4KCQkiPG5hbWU+eyR0aGlzLT5nZXRMb2dpbigpfTwvbmFtZT4iLgoJCSI8dHJhbnNhY3Rpb25LZXk+eyR0aGlzLT5nZXRUcmFuc2FjdGlvbktleSgpfTwvdHJhbnNhY3Rpb25LZXk+Ii4KCQkiPC9tZXJjaGFudEF1dGhlbnRpY2F0aW9uPiIuCgkJIjxzdWJzY3JpcHRpb25JZD57JHhfc3Vic2NyaXB0aW9uX2lkfTwvc3Vic2NyaXB0aW9uSWQ+Ii4KCQkiPC9BUkJDYW5jZWxTdWJzY3JpcHRpb25SZXF1ZXN0PiI7CgkKCQkkaGVhZGVyQ3VybE9wdGlvbnMgPSBhcnJheShDVVJMT1BUX0hUVFBIRUFERVI9PmFycmF5KCJDb250ZW50LVR5cGU6IHRleHQveG1sIikpOwoJCSRjYW5jZWxSZXNwb25zZSA9ICR0aGlzLT5wYXJzZUFSQkNhbmNlbE9yVXBkYXRlUmVzcG9uc2UoJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldEFSQkdhdGV3YXlVUkwoKSwiUE9TVCIsJHhtbENvbnRlbnQsJGhlYWRlckN1cmxPcHRpb25zKSk7CgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzU3VjY2VzcygkY2FuY2VsUmVzcG9uc2UpIHx8IE1NX1V0aWxzOjppc1NpdGVBZG1pbigpKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKTsKCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCX0KCQlyZXR1cm4gJGNhbmNlbFJlc3BvbnNlOwoJfQoJCgkKCS8qKgoJICogUHJvY2VzcyB0aGUgcmVzdWx0cyBvZiBhbiBBUkIgY2FuY2VsIHN1YnNjcmlwdGlvbiByZXF1ZXN0IG9yIHVwZGF0ZSBzdWJzY3JpcHRpb24gcmVxdWVzdC4gVGhlIHJlc3BvbnNlIGZyb20gYSBjYW5jZWwgb3IgdXBkYXRlIGlzIAoJICogaWRlbnRpY2FsIHRvIHRoYXQgb2YgYSBjcmVhdGUgd2l0aCB0aGUgZXhjZXB0aW9uIHRoYXQgdGhlIHN1YnNjcmlwdGlvbiBpZCBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIHJlc3BvbnNlCgkgKgoJICogQHBhcmFtIE1NX1Jlc3BvbnNlICRyYXdSZXNwb25zZSBUaGUgcmF3IHJlc3BvbnNlIGZyb20gdGhlIHJlbW90ZSBnYXRld2F5LCB3aGljaCBzaG91bGQgY29udGFpbiBhbiBYTUwgcmVzcG9uc2UsIHdyYXBwZWQgaW4gYW4gTU1fUmVzcG9uc2Ugb2JqZWN0CgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIGl0ZW0gbGlua2VkIHRvIHRoZSBzdWJzY3JpcHRpb24gdGhhdCBpcyBiZWluZyBjYW5jZWxsZWQgb3IgdXBkYXRlZAoJICogQHBhcmFtIGJvb2xlYW4gJGNhbmNlbGxhdGlvbiAob3B0aW9uYWwpIFRoaXMgaXMgdHJ1ZSBpZiB0aGUgaW5jb21pbmcgcmVzcG9uc2UgaXMgYSByZXN1bHQgb2YgYSBjYW5jZWxsYXRpb24gcmVxdWVzdC4gRmFsc2UgaW5kaWNhdGVzIHRoYXQgdGhlIHJlcXVlc3Qgd2FzIGFuIHVwZGF0ZS4gRGVmYXVsdHMgdG8gZmFsc2UKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIHJlcHJlc2VudGluZyB0aGUgc3RhdHVzIG9mIHRoZSBjYW5jZWwgb3IgdXBkYXRlIG9wZXJhdGlvbgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcGFyc2VBUkJDYW5jZWxPclVwZGF0ZVJlc3BvbnNlKE1NX1Jlc3BvbnNlICRyYXdSZXNwb25zZSkKCXsKCQlpZiAoJHJhd1Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHN1YnNjcmlwdGlvbjogVGhlcmUgd2FzIGFuIGVycm9yIGNvbm5lY3RpbmcgdG8gbWVyY2hhbnQgZ2F0ZXdheSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCQoJCWxpYnhtbF91c2VfaW50ZXJuYWxfZXJyb3JzKHRydWUpOyAvL3ByZXZlbnRzIGltcHJvcGVyIHhtbG5zIGF0dHJpYnV0ZSBmcm9tIEF1dGhvcml6ZW5ldCBmcm9tIGdlbmVyYXRpbmcgZXJyb3JzCgkJdHJ5CgkJewoJCQkkeG1sUmVzcG9uc2UgPSBuZXcgU2ltcGxlWE1MRWxlbWVudCgkcmF3UmVzcG9uc2UtPm1lc3NhZ2UpOwoJCQkkcmVzdWx0Q29kZSA9IHN0cnRvdXBwZXIoJHhtbFJlc3BvbnNlLT5tZXNzYWdlcy0+cmVzdWx0Q29kZSk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIHN1YnNjcmlwdGlvbiBnYXRld2F5IHJlc3BvbnNlIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkJCgkJc3dpdGNoICgkcmVzdWx0Q29kZSkKCQl7CgkJCWNhc2UgJ09LJzoKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJ0VSUk9SJzoKCQkJCSRjb2RlID0gJHhtbFJlc3BvbnNlLT5tZXNzYWdlcy0+bWVzc2FnZS0+Y29kZTsKCQkJCSRtZXNzYWdlID0gJHhtbFJlc3BvbnNlLT5tZXNzYWdlcy0+bWVzc2FnZS0+dGV4dDsKCQkJCWlmICgkY29kZSA9PSAiRTAwMDM4IikKCQkJCXsKCQkJCSAgICAvL1RoaXMgaXMgdGhlIGNvZGUgZm9yIHN1YnNjcmlwdGlvbiBhbHJlYWR5IGNhbmNlbGxlZCByZW1vdGVseS4gVHJlYXQgYXMgYSBub24tZXJyb3IKCQkJCSAgICByZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJCX0KCQkJCSRlcnJvciA9ICghZW1wdHkoJGNvZGUpICYmICFlbXB0eSgkbWVzc2FnZSkpPyJ7JGNvZGV9OnskbWVzc2FnZX0iOiJ7JGNvZGV9eyRtZXNzYWdlfSI7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGVycm9yLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IEludmFsaWQgUmVzcG9uc2UgZnJvbSBtZXJjaGFudCBnYXRld2F5IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJYnJlYWs7CgkJfQoJfQoJCgkKCS8qKgoJICogVXBkYXRlcyB0aGUgcGF5bWVudCBnYXRld2F5IHdpdGggbmV3IGluZm9ybWF0aW9uLCBhbmQgdXBkYXRlIHRoZSBNZW1iZXJNb3VzZSBvcmRlciB3aXRoIHRoZSBuZXcgYmlsbGluZyBhZGRyZXNzCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjp1cGRhdGVTdWJzY3JpcHRpb25JbmZvKCkKCSAqCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG9yZGVyIGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBzdWJzY3JpcHRpb24gYmVpbmcgdXBkYXRlZAoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyAob3B0aW9uYWwpIFRoZSBuZXcgY2FyZCB0byBzdG9yZSBvbiBmaWxlCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyBUaGUgbmV3IGJpbGxpbmcgYWRkcmVzcyB0byBzdG9yZS4gU2hvdWxkIGJlIHRoZSBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VzdG9tZXIncyBjYXJkIG9uIGZpbGUKCSAqCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgcmVwcmVzZW50aW5nIHN1Y2Nlc3Mgb3IgZXJyb3IuIENvbnRhaW5zIGEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZSBvbiBlcnJvcgoJICovCglwdWJsaWMgZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9uSW5mbyhNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3M9bnVsbCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmdldEl0ZW1UeXBlKCkgIT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkF0dGVtcHRlZCB0byB1cGRhdGUgYSBub24tcHJvZHVjdCBpdGVtIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkc3Vic2NyaXB0aW9uc1RhYmxlID0gTU1fVEFCTEVfQVVUSE5FVF9BUkJfU1VCU0NSSVBUSU9OUzsKCQkkeF9zdWJzY3JpcHRpb25faWQgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIHhfc3Vic2NyaXB0aW9uX2lkIGZyb20geyRzdWJzY3JpcHRpb25zVGFibGV9IHdoZXJlIG9yZGVyX2l0ZW1faWQ9J3skb3JkZXJJdGVtLT5nZXRJZCgpfSciKTsKCQlpZiAoaXNfbnVsbCgkeF9zdWJzY3JpcHRpb25faWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy91cGRhdGUgY3JlZGl0IGNhcmQgaW5mbyBpZiBzdXBwbGllZAoJCSRwYXltZW50WG1sID0gIiI7CgkJaWYgKCFpc19udWxsKCRjYXJkSW5mbykpCgkJewoJCQkkY2FyZE51bWJlciA9ICAgICAgICRjYXJkSW5mby0+Z2V0Q2FyZE51bWJlcigpOwoJCQkkZXhwaXJhdGlvbkRhdGUgPSAgIGRhdGUoIlktbSIsbWt0aW1lKDAsMCwwLCRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvbk1vbnRoKCksMSwkY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCkpKTsKCQkJJHBheW1lbnRYbWwgPSAiPHBheW1lbnQ+Ii4KCQkJCQkJCSAgIjxjcmVkaXRDYXJkPiIuCgkJCQkJCQkJICAiPGNhcmROdW1iZXI+eyRjYXJkTnVtYmVyfTwvY2FyZE51bWJlcj4iLgoJCQkJCQkJCSAgIjxleHBpcmF0aW9uRGF0ZT57JGV4cGlyYXRpb25EYXRlfTwvZXhwaXJhdGlvbkRhdGU+Ii4KCQkJCQkJICAJICAiPC9jcmVkaXRDYXJkPiIuCgkJCQkJCSAgIjwvcGF5bWVudD4iOwoJCX0KCQkKCQkvL3VwZGF0ZSBjdXN0b21lciBpbmZvCgkJJGN1c3RvbWVyWG1sID0gIiI7CgkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJaWYgKCRvcmRlci0+aXNWYWxpZCgpKQoJCXsKCQkJJGN1c3RvbWVyICAgICAgID0gICAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJCSRjdXN0b21lcklkICAgICA9ICAgJGN1c3RvbWVyLT5nZXRJZCgpOwoJCQkkY3VzdG9tZXJFbWFpbCAgPSAgICRjdXN0b21lci0+Z2V0RW1haWwoKTsKCQkJJGN1c3RvbWVyUGhvbmUgID0gICAkY3VzdG9tZXItPmdldFBob25lKCk7CgkJCQoJCQkkY3VzdG9tZXJYbWwgCT0gCSI8Y3VzdG9tZXI+Ii4KCQkJCQkJCQkJIjxpZD57JGN1c3RvbWVySWR9PC9pZD4iLgoJCQkJCQkJCQkiPGVtYWlsPnskY3VzdG9tZXJFbWFpbH08L2VtYWlsPiIuCgkJCQkJCQkJCSI8cGhvbmVOdW1iZXI+eyRjdXN0b21lclBob25lfTwvcGhvbmVOdW1iZXI+Ii4KCQkJCQkJCQkiPC9jdXN0b21lcj4iOwoJCX0KCQkKCQkvL3VwZGF0ZSBiaWxsaW5nIGFkZHJlc3MgaWYgc3VwcGxpZWQKCQkkYmlsbHRvWG1sID0gIiI7CgkJaWYgKCFpc19udWxsKCRiaWxsaW5nQWRkcmVzcykpCgkJewoJCQkkZmlyc3ROYW1lIAkJCQk9IAkkYmlsbGluZ0FkZHJlc3MtPmdldEZpcnN0TmFtZSgpOwoJCQkkbGFzdE5hbWUJCQkJPSAJJGJpbGxpbmdBZGRyZXNzLT5nZXRMYXN0TmFtZSgpOwoJCQlpZiAoZW1wdHkoJGZpcnN0TmFtZSkgfHwgZW1wdHkoJGxhc3ROYW1lKSkKCQkJewoJCQkJJGZpcnN0TmFtZSA9ICRjdXN0b21lci0+Z2V0Rmlyc3ROYW1lKCk7CgkJCQkkbGFzdE5hbWUgID0gJGN1c3RvbWVyLT5nZXRMYXN0TmFtZSgpOwoJCQl9CgkJCSRhZGRyZXNzMiAJCQkJPSAgICRiaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUyKCk7CgkJCSRjb21iaW5lZEJpbGxpbmdBZGRyZXNzID0gICAoIWVtcHR5KCRhZGRyZXNzMikpPygkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpLiIgIi4kYWRkcmVzczIpOiRiaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUxKCk7CgkJCSRjb21iaW5lZEJpbGxpbmdBZGRyZXNzID0gICBzdWJzdHIoJGNvbWJpbmVkQmlsbGluZ0FkZHJlc3MsMCw2MCk7CgkJCSRiaWxsaW5nQ2l0eSAJCQk9ICAgc3Vic3RyKCRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpLDAsNDApOwoJCQkkYmlsbGluZ1N0YXRlCQkJPSAgICRiaWxsaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKTsKCQkJJGJpbGxpbmdaaXAgCQkJPSAgICRiaWxsaW5nQWRkcmVzcy0+Z2V0UG9zdGFsQ29kZSgpOwoJCQkkYmlsbGluZ0NvdW50cnkgCQk9ICAgJGJpbGxpbmdBZGRyZXNzLT5nZXRDb3VudHJ5KCk7CgkJCSRiaWxsdG9YbWwgCQkJCT0gICAiPGJpbGxUbz4iLgoJCQkJCQkJCQkJCSI8Zmlyc3ROYW1lPnskZmlyc3ROYW1lfTwvZmlyc3ROYW1lPiIuCgkJCQkJCQkJCQkJIjxsYXN0TmFtZT57JGxhc3ROYW1lfTwvbGFzdE5hbWU+Ii4KCQkJCQkJCQkJCQkiPGFkZHJlc3M+eyRjb21iaW5lZEJpbGxpbmdBZGRyZXNzfTwvYWRkcmVzcz4iLgoJCQkJCQkJCQkJCSI8Y2l0eT57JGJpbGxpbmdDaXR5fTwvY2l0eT4iLgoJCQkJCQkJCQkJCSI8c3RhdGU+eyRiaWxsaW5nU3RhdGV9PC9zdGF0ZT4iLgoJCQkJCQkJCQkJCSI8emlwPnskYmlsbGluZ1ppcH08L3ppcD4iLgoJCQkJCQkJCQkJCSI8Y291bnRyeT57JGJpbGxpbmdDb3VudHJ5fTwvY291bnRyeT4iLgoJCQkJCQkJCQkJIjwvYmlsbFRvPiI7CgkJfQoJCQoJCS8vbm93IGNyZWF0ZSB0aGUgZmluYWwgc2NoZW1hIHRvIHNlbmQKCQkkeG1sQ29udGVudCA9CgkJJzw/eG1sIHZlcnNpb249IjEuMCIgZW5jb2Rpbmc9InV0Zi04Ij8+JyAuCgkJJzxBUkJVcGRhdGVTdWJzY3JpcHRpb25SZXF1ZXN0IHhtbG5zPSJBbmV0QXBpL3htbC92MS9zY2hlbWEvQW5ldEFwaVNjaGVtYS54c2QiPicgLgoJCSI8bWVyY2hhbnRBdXRoZW50aWNhdGlvbj4iLgoJCSI8bmFtZT57JHRoaXMtPmdldExvZ2luKCl9PC9uYW1lPiIuCgkJIjx0cmFuc2FjdGlvbktleT57JHRoaXMtPmdldFRyYW5zYWN0aW9uS2V5KCl9PC90cmFuc2FjdGlvbktleT4iLgoJCSI8L21lcmNoYW50QXV0aGVudGljYXRpb24+Ii4KCQkiPHN1YnNjcmlwdGlvbklkPnskeF9zdWJzY3JpcHRpb25faWR9PC9zdWJzY3JpcHRpb25JZD4iLgoJCSI8c3Vic2NyaXB0aW9uPiIuCgkJJHBheW1lbnRYbWwuCgkJJGN1c3RvbWVyWG1sLgoJCSRiaWxsdG9YbWwuCgkJIjwvc3Vic2NyaXB0aW9uPiIuCgkJIjwvQVJCVXBkYXRlU3Vic2NyaXB0aW9uUmVxdWVzdD4iOwoJCQoJCSRoZWFkZXJDdXJsT3B0aW9ucyA9IGFycmF5KENVUkxPUFRfSFRUUEhFQURFUj0+YXJyYXkoIkNvbnRlbnQtVHlwZTogdGV4dC94bWwiKSk7CgkJJGdhdGV3YXlVcGRhdGVSZXNwb25zZSA9ICR0aGlzLT5wYXJzZUFSQkNhbmNlbE9yVXBkYXRlUmVzcG9uc2UoJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldEFSQkdhdGV3YXlVUkwoKSwiUE9TVCIsJHhtbENvbnRlbnQsJGhlYWRlckN1cmxPcHRpb25zKSk7CgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGdhdGV3YXlVcGRhdGVSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGdhdGV3YXlVcGRhdGVSZXNwb25zZTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBwYXJlbnQ6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oJG9yZGVySXRlbSwkY2FyZEluZm8sJGJpbGxpbmdBZGRyZXNzKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjppblRlc3RNb2RlKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGluVGVzdE1vZGUoKQoJewoJCXJldHVybiAkdGhpcy0+dXNlVGVzdEdhdGV3YXkoKTsKCX0KCQoJCgkvKioKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN3aXRjaFRvVGVzdE1vZGUoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gc3dpdGNoVG9UZXN0TW9kZSgpCgl7CgkJcmV0dXJuICR0aGlzLT51c2VUZXN0R2F0ZXdheSh0cnVlKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gaXNBY2NlcHRKU0VuYWJsZWQoKQoJewoJCXJldHVybiAkdGhpcy0+YWNjZXB0SlNFbmFibGVkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY2NlcHRKU0VuYWJsZWQoJGFjY2VwdEpTRW5hYmxlZCkKCXsKCQkkdGhpcy0+YWNjZXB0SlNFbmFibGVkID0gKGJvb2wpJGFjY2VwdEpTRW5hYmxlZDsKCX0KCQoJCgkvKioKCSAqIGNoZWNrb3V0SW5pdCBpcyBjYWxsZWQgZnJvbSB0aGUgY2hlY2tvdXQgZm9ybSBwcmlvciB0byB0aGUgcGFnZSBiZWluZyByZW5kZXJlZC4KCSAqCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpjaGVja291dEluaXQoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hlY2tvdXRJbml0KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFjY2VwdEpTSW5pdChhcnJheSgiYWNjZXB0SlMiLCJtZW1iZXJtb3VzZS1jaGVja291dC1mb3JtIikpOwoJfQoJCgkKCS8qKgoJICogTG9hZCBBY2NlcHQuanMgb24gbXkgYWNjb3VudCBwYWdlIHRvIHN1cHBvcnQgdGhlIGNhcmQgdXBkYXRlIG9wZXJhdGlvbgoJICoKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6Om15QWNjb3VudEluaXQoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gbXlBY2NvdW50SW5pdCgpCgl7CgkJLy9jdXJyZW50bHkgdGhlIG15IGFjY291bnQgaW5pdCBwcm9jZXNzIGZvciBhY2NlcHQuanMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyB0aGUgY2hlY2tvdXQgaW5pdCBwcm9jZXNzCgkJcmV0dXJuICR0aGlzLT5hY2NlcHRKU0luaXQoYXJyYXkoImFjY2VwdEpTIiwibWVtYmVybW91c2UtbXlhY2NvdW50LWpzIikpOwoJfQoJCgkKCS8qKgoJICogSWYgQWNjZXB0LmpzIGlzIGJlaW5nIHVzZWQsIHRoZSBqYXZhc2NyaXB0IGxpYnJhcnkgaXMgZW5xdWV1ZWQsIGFzIHdlbGwgYXMgYSBjdXN0b20gYnJpZGdlCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkYnJpZGdlRGVwZW5kZW5jaWVzIFRoZSBkZXBlbmRlbmNpZXMgdG8gcGFzcyB0byB3cF9lbnF1ZXVlX3NjcmlwdCB3aGVuIGxvYWRpbmcgdGhlIHRva2VuLWV4Y2hhbmdlIGJyaWRnZSBqcwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gYWNjZXB0SlNJbml0KCRicmlkZ2VEZXBlbmRlbmNpZXM9YXJyYXkoKSkKCXsKCQkvL1RoZSBmcm9udC1lbmQgdGFza3MgYXJlIG9ubHkgcmVsZXZlbnQgaWYgQWNjZXB0LmpzIGlzIGVuYWJsZWQKCQlpZiAoJHRoaXMtPmFjY2VwdEpTRW5hYmxlZCkKCQl7CgkJCS8vYWRkIGEgY2xvc3VyZSBhdHRhY2hlZCB0byB0aGUgJ3NjcmlwdF9sb2FkZXJfdGFnJyBmaWx0ZXIgdG8gYWRkIHRoZSByZXF1aXJlZCBjaGFyc2V0IGF0dHJpYnV0ZSB0byB0aGUgc2NyaXB0IGxvYWQgdGFnCgkJCS8vdGhpcyBpcyBhIGhhY2tpc2ggd2F5IHRvIGdldCBhcm91bmQgd3BfZW5xdWV1ZV9zY3JpcHRzIG5vdCBzdXBwb3J0aW5nIGF0dHJpYnV0ZXMgZm9yIHRoZSBnZW5lcmF0ZWQgc2NyaXB0IHRhZwoJCQlhZGRfZmlsdGVyKCdzY3JpcHRfbG9hZGVyX3RhZycsIGZ1bmN0aW9uKCR0YWcsICRoYW5kbGUsICRzcmMpIHsKCQkJCWlmICggJGhhbmRsZSA9PT0gJ2FjY2VwdEpTJykKCQkJCXsKCQkJCQkkdGFnID0gIjxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0JyBzcmM9J3skc3JjfScgY2hhcnNldD0ndXRmOCc+PC9zY3JpcHQ+IjsKCQkJCX0KCQkJCXJldHVybiAkdGFnOwoJCQl9LCAxMCwgMyApOwoJCQkJCQoJCQkJLy93aGVuIGVucXVldWluZyBhY2NlcHQuanMsIHRoZSAkdmVyIHBhcmFtZXRlciBmb3Igd3BfZW5xdWV1ZV9zY3JpcHQgTVVTVCBiZSBudWxsLCBvdGhlcndpc2Ugd3AgYXR0YWNoZXMgaXRzIHZlcnNpb24gdG8gdGhlIHNjcmlwdC4KCQkJCS8vb25lIG9mIHRoZSBpbnRlcm5hbCBjaGVja3Mgb2YgdGhlIGxpYnJhcnkgdG8gZGV0ZXJtaW5lIGlmIGl0IGlzIGJlaW5nIGxvYWRlZCBmcm9tIENETiBpcyBhIHVybCBsZW5ndGggY2hlY2ssIGFuZCBhbiBhdHRhY2hlZCB2ZXJzaW9uCgkJCQkvL2NoYW5nZXMgdGhlIGxlbmd0aCBvZiB0aGUgdXJsLCBjYXVzaW5nIHRoYXQgY2hlY2sgdG8gaW5jb3JyZWN0bHkgZmFpbAoJCQkJaWYgKCR0aGlzLT50ZXN0TW9kZSkKCQkJCXsKCQkJCQl3cF9lbnF1ZXVlX3NjcmlwdCgiYWNjZXB0SlMiLCAiaHR0cHM6Ly9qc3Rlc3QuYXV0aG9yaXplLm5ldC92MS9BY2NlcHQuanMiLCBhcnJheSgpLG51bGwsIHRydWUpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXdwX2VucXVldWVfc2NyaXB0KCJhY2NlcHRKUyIsICJodHRwczovL2pzLmF1dGhvcml6ZS5uZXQvdjEvQWNjZXB0LmpzIiwgYXJyYXkoKSwgbnVsbCwgdHJ1ZSk7CgkJCQl9CgkJCQl3cF9lbnF1ZXVlX3NjcmlwdCgibWVtYmVybW91c2UtYWNjZXB0SlMiLCBwbHVnaW5zX3VybChNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9qcy9jb21tb24vbW0tYXV0aG9yaXplbmV0LXRva2VuLWV4Y2hhbmdlLmpzIiksICRicmlkZ2VEZXBlbmRlbmNpZXMsIE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCksIHRydWUpOwoJCQkJd3BfbG9jYWxpemVfc2NyaXB0KCdtZW1iZXJtb3VzZS1hY2NlcHRKUycsICdhdXRob3JpemVuZXRKU0luZm8nLCBhcnJheSgnYXV0aG5ldFB1YmxpY0NsaWVudEtleScgPT4gJHRoaXMtPmluVGVzdE1vZGUoKT8kdGhpcy0+Z2V0VGVzdFB1YmxpY0NsaWVudEtleSgpOiR0aGlzLT5nZXRMaXZlUHVibGljQ2xpZW50S2V5KCksCgkJCQkJCSdhcGlMb2dpbklEJyA9PiAkdGhpcy0+aW5UZXN0TW9kZSgpPyR0aGlzLT5nZXRUZXN0QVBJTG9naW4oKTokdGhpcy0+Z2V0TGl2ZUFQSUxvZ2luKCksCgkJCQkJCSdpbXByb3BlclJlc3BvbnNlRXJyb3JNc2cnID0+IF9tbXQoIkFuIGltcHJvcGVyIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmcm9tIEF1dGhvcml6ZS5uZXQsIHBsZWFzZSB0cnkgYWdhaW4iKSkpOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VGVzdFB1YmxpY0NsaWVudEtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT50ZXN0UHVibGljQ2xpZW50S2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRUZXN0UHVibGljQ2xpZW50S2V5KCR0ZXN0UHVibGljQ2xpZW50S2V5KQoJewoJCSR0aGlzLT50ZXN0UHVibGljQ2xpZW50S2V5ID0gJHRlc3RQdWJsaWNDbGllbnRLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldExpdmVQdWJsaWNDbGllbnRLZXkoKQoJewoJCXJldHVybiAkdGhpcy0+bGl2ZVB1YmxpY0NsaWVudEtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TGl2ZVB1YmxpY0NsaWVudEtleSgkbGl2ZVB1YmxpY0NsaWVudEtleSkKCXsKCQkkdGhpcy0+bGl2ZVB1YmxpY0NsaWVudEtleSA9ICRsaXZlUHVibGljQ2xpZW50S2V5OwoJfQoJCn0=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(40, 'limelightservice', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogTU1fTGltZUxpZ2h0U2VydmljZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTU1fUGF5bWVudFNlcnZpY2UgaW50ZXJmYWNlIHVzaW5nIExpbWUgTGlnaHQgQ1JNICh3d3cubGltZWxpZ2h0Y3JtLmNvbSkKICovCmNsYXNzIE1NX0xpbWVMaWdodFNlcnZpY2UgZXh0ZW5kcyBNTV9QYXltZW50U2VydmljZQp7IAoJcHVibGljIHN0YXRpYyAkTE9HX0xFVkVMX0VSUk9SID0gMzsKCXB1YmxpYyBzdGF0aWMgJExPR19MRVZFTF9XQVJOSU5HID0gMjsKCXB1YmxpYyBzdGF0aWMgJExPR19MRVZFTF9JTkZPID0gMTsKCQoJcHJvdGVjdGVkICR0b2tlbiA9ICJMSU1FTElHSFQiOyAKCglwcm90ZWN0ZWQgJHVybCA9ICIiOwoJcHJvdGVjdGVkICRhcGlVc2VybmFtZSA9ICIiOwkKCXByb3RlY3RlZCAkYXBpUGFzc3dvcmQgPSAiIjsJCgkKCXByb3RlY3RlZCAkc3VwcG9ydGVkQ3VycmVuY2llcyA9IGFycmF5KCJVU0QiLCJFVVIiLCJHQlAiLCJDQUQiLCJBVUQiLCJaQVIiLCJKUFkiLCJES0siLCJOT0siLCJTRUsiLCJCUkwiLCJDTFAiLCJNWE4iLCJLUlciLAoJCSJOWkQiLCJQTE4iLCJTR0QiLCJIS0QiLCJBUlMiLCJDT1AiLCJQRU4iKTsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGluc3RhbGwoKSAKCXsgCgkJcGFyZW50OjppbnN0YWxsKCk7CgkJCgkJJHNxbCA9ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9MSU1FTElHSFRfUFJPRFVDVFMuIiAoXG4iLgoJCQkJImlkIEJJR0lOVCgyMCkgVU5TSUdORUQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4iLgoJCQkJIm1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgQklHSU5UKDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkibGltZWxpZ2h0X3Byb2R1Y3RfaWQgQklHSU5UKDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkibGltZWxpZ2h0X3Byb2R1Y3RfbmFtZSBWQVJDSEFSKDIwMCkgTk9UIE5VTEwsXG4iLgoJCQkJImxpbWVsaWdodF9jYW1wYWlnbl9pZCBCSUdJTlQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJsaW1lbGlnaHRfY2FtcGFpZ25fbmFtZSBWQVJDSEFSKDIwMCkgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpLFxuIi4KCQkJCSJVTklRVUUgS0VZIGxpbWVsaWdodF90b19tbV9wcm9kdWN0X2lkeCAobWVtYmVybW91c2VfcHJvZHVjdF9pZCxsaW1lbGlnaHRfY2FtcGFpZ25faWQpLFxuIi4KCQkJCSJVTklRVUUgS0VZIGxpbWVsaWdodF9jYW1wYWlnbl9wcm9kdWN0X2lkeCAobGltZWxpZ2h0X3Byb2R1Y3RfaWQsbGltZWxpZ2h0X2NhbXBhaWduX2lkKVxuIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpO1xuIjsKCQkKCQkkc3FsIC49ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9MSU1FTElHSFRfU0hJUFBJTkdfTUVUSE9EUy4iIChcbiIuCgkJCQkiaWQgaW50KDExKSBVTlNJR05FRCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCxcbiIuCgkJCQkibWVtYmVybW91c2Vfc2hpcHBpbmdfb3B0aW9uX2tleSB2YXJjaGFyKDI1NSkgQ09MTEFURSB1dGY4X2JpbiBOT1QgTlVMTCxcbiIuCgkJCQkibGltZWxpZ2h0X3NoaXBwaW5nX21ldGhvZF9pZCBCSUdJTlQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJsaW1lbGlnaHRfc2hpcHBpbmdfbWV0aG9kX25hbWUgVkFSQ0hBUigyMDApIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKGlkKSxcbiIuCgkJCQkiVU5JUVVFIEtFWSBsaW1lbGlnaHRfdG9fbW1fc2hpcHBpbmdfaWR4IChtZW1iZXJtb3VzZV9zaGlwcGluZ19vcHRpb25fa2V5KSxcbiIuCgkJCQkiVU5JUVVFIEtFWSBsaW1lbGlnaHRfc2hpcHBpbmdfaWR4IChsaW1lbGlnaHRfc2hpcHBpbmdfbWV0aG9kX2lkKVxuIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpO1xuIjsKCQkKCQkkc3FsLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9DSEFSR0VTLiIgKFxuIi4KCQkJCSJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSJvcmRlcl9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJvcmRlcl9pdGVtX2lkIGJpZ2ludCgyMCkgTlVMTCxcbiIuCgkJCQkiY2hhcmdlX2lkIGJpZ2ludCgyMCksXG4iLgoJCQkJInN1YnNjcmlwdGlvbl9pZCBWQVJDSEFSKDEwMCksXG4iLgoJCQkJImNhbXBhaWduX2lkIGJpZ2ludCgyMCksXG4iLgoJCQkJInByb2R1Y3RfaWQgYmlnaW50KDIwKSxcbiIuCgkJCQkic2hpcHBpbmdfaWQgYmlnaW50KDIwKSxcbiIuCgkJCQkiY3VzdG9tZXJfaWQgYmlnaW50KDIwKSxcbiIuCgkJCQkiYW1vdW50IGRlY2ltYWwoMTAsMikgTk9UIE5VTEwsXG4iLgoJCQkJInRyYW5zYWN0aW9uX2RhdGUgZGF0ZXRpbWUgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpLFxuIi4KCQkJCSJLRVkgbW1fbGltZWxpZ2h0X2NoYXJnZV9jaGFyZ2VfaWRfaWR4IChjaGFyZ2VfaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7XG4iOwoJCQoJCSRzcWwgLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLiIgKFxuIi4KCQkJCSJpZCBCSUdJTlQoMjApIFVOU0lHTkVEIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSJvcmRlcl9pZCBCSUdJTlQoMjApIFVOU0lHTkVEIE5PVCBOVUxMLFxuIi4KCQkJCSJvcmRlcl9zdGF0dXMgSU5UKDExKSxcbiIuCgkJCQkib3JkZXJfdG90YWwgZGVjaW1hbCgxMCwyKSBOT1QgTlVMTCxcbiIuCgkJCQkicmVmdW5kX2Ftb3VudCBkZWNpbWFsKDEwLDIpIE5PVCBOVUxMLFxuIi4KCQkJCSJlbWFpbCBWQVJDSEFSKDEwMCkgTk9UIE5VTEwsXG4iLgoJCQkJImN1c3RvbWVyX2lkIEJJR0lOVCgyMCkgVU5TSUdORUQgTk9UIE5VTEwsXG4iLgoJCQkJImNhbXBhaWduX2lkIEJJR0lOVCgyMCkgVU5TSUdORUQgTk9UIE5VTEwsXG4iLgoJCQkJInByb2R1Y3RfaWRzIFZBUkNIQVIoMTAwKSBOT1QgTlVMTCxcbiIuCgkJCQkic2hpcHBpbmdfaWQgSU5UKDExKSBVTlNJR05FRCBOT1QgTlVMTCxcbiIuCgkJCQkic3Vic2NyaXB0aW9uc19hY3RpdmUgVkFSQ0hBUigxMDApIE5PVCBOVUxMLFxuIi4KCQkJCSJzdWJzY3JpcHRpb25faWRzIFRFWFQgTk9UIE5VTEwsXG4iLgoJCQkJImFjdGlvbl9pZCBWQVJDSEFSKDMwKSxcbiIuCgkJCQkiYWZmaWxpYXRlX2lkIFZBUkNIQVIoMTAwKSxcbiIuCgkJCQkic3ViYWZmaWxpYXRlX2lkIFZBUkNIQVIoMTAwKSxcbiIuCgkJCQkiaXBfYWRkcmVzcyBWQVJDSEFSKDQwKSxcbiIuCgkJCQkibWVzc2FnZSBWQVJDSEFSKDM1NSkgTlVMTCxcbiIuCgkJCQkibG9nX2xldmVsIElOVCgxMSkgVU5TSUdORUQgTlVMTCxcbiIuCgkJCQkiZGF0ZV9yZWNlaXZlZCBEQVRFVElNRSBOT1QgTlVMTCxcbiIuCgkJCQkiUFJJTUFSWSBLRVkgIChpZCkiLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7XG4iOwoJCWRiRGVsdGEoJHNxbCk7Cgl9CgkKCQoJLyoqCgkgKiBSZXBvcnQgdGhlIGZlYXR1cmVzIHRoZSBMaW1lIExpZ2h0IHNlcnZpY2Ugc3VwcG9ydHMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN1cHBvcnRzRmVhdHVyZSgpCgkgKgoJICogQHBhcmFtIGludGVnZXIgJGZlYXR1cmVDb25zdCBhIGNvbnN0IGFzIGRlZmluZWQgaW4gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlcwoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3Qgc3VwcG9ydGVkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdXBwb3J0c0ZlYXR1cmUoJGZlYXR1cmVDb25zdCkKCXsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpPTlNJVEVfU0VSVklDRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDQVJEX09OX0ZJTEU7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6VFJBTlNBQ1RJT05fUEFHRV9BQ1RJT05TOwoJCXJldHVybiBpbl9hcnJheSgkZmVhdHVyZUNvbnN0LCRzdXBwb3J0ZWQsdHJ1ZSk7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBodG1sIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSBwYXltZW50IG1ldGhvZCBzZXR0aW5ncyBzY3JlZW4gZm9yIGNvbmZpZ3VyaW5nIExpbWUgTGlnaHQKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmRpc3BsYXlDb25maWdPcHRpb25zKCkKCSAqIAoJICogQHJldHVybiBTdHJpbmcgY29udGFpbmluZyB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cgaHRtbAoJICovCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJewoJCSRjb25maWdfb3B0aW9ucyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS9saW1lbGlnaHRfY29uZmlnLmh0bWwucGhwIiwkdGhpcyk7CgkJcmV0dXJuICRjb25maWdfb3B0aW9uczsKCX0KCQoJCgkvKioKCSAqIFZhbGlkYXRlcyBhbmQgY29uZmlndXJlcyB0aGUgb2JqZWN0IHdpdGggdGhlIHNldHRpbmdzIGluZm9ybWF0aW9uIGdlbmVyYXRlZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6cHJvY2Vzc0NvbmZpZ09wdGlvbnMoKQoJICoKCSAqIEBwYXJhbSAkcG9zdCBBbiBhcnJheSBjb250YWluaW5nIHRoZSBkYXRhIHBvc3RlZCBmcm9tIHRoZSBwYXltZW50IG1ldGhvZHMgc2V0dGluZ3Mgc2NyZWVuCgkgKiBAcmV0dXJuIEFuIE1NX1Jlc3BvbnNlIG9mIHR5cGUgTU1fUmVzcG9uc2U6OlNVQ0NFU1MgaW5kaWNhdGluZyBzdWNjZXNzZnVsIHZhbGlkYXRpb24gYW5kIGFzc2lnbWVudC4gT24gZXJyb3IsIHRoZSB0eXBlIHdpbGwgYmUgTU1fUmVzcG9uc2U6OkVSUk9SIGFuZCB0aGUgbWVzc2FnZSB3aWxsIGNvbnRhaW4gdGhlIGVycm9yIG1lc3NhZ2VzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzQ29uZmlnT3B0aW9ucygkcG9zdCkgCgl7IAoJCSRhY3RpdmUgPSAoaXNzZXQoJHBvc3RbJ29uc2l0ZV9wYXltZW50X3NlcnZpY2UnXSkgJiYgKHN0cnRvbG93ZXIoJHRoaXMtPmdldFRva2VuKCkpID09ICRwb3N0WydvbnNpdGVfcGF5bWVudF9zZXJ2aWNlJ10pKTsKCQkkdGhpcy0+c2V0QWN0aXZlKCRhY3RpdmUpOwoJCQoJCWlmICgkYWN0aXZlKQoJCXsKCQkJJHRoaXMtPmluc3RhbGwoKTsKCQkJJGNvbmZpZyA9IGlzc2V0KCRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsnbGltZWxpZ2h0J10pPyRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsnbGltZWxpZ2h0J106YXJyYXkoKTsKCQkJJGVtcHR5X2Vycm9ycyA9ICIiOwoJCQkkcmVxdWlyZWRWYWx1ZXMgPSBhcnJheSgidXJsIj0+IkxpbWUgTGlnaHQgVVJMIiwgImFwaV91c2VybmFtZSI9PiJBUEkgVXNlcm5hbWUiLCAiYXBpX3Bhc3N3b3JkIj0+IkFQSSBQYXNzd29yZCIpOwoJCQlmb3JlYWNoICgkcmVxdWlyZWRWYWx1ZXMgYXMgJGs9PiR2KQoJCQl7CgkJCQlpZiAoZW1wdHkoJGNvbmZpZ1ska10pKQoJCQkJewoJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkxpbWUgTGlnaHQ6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgeyR2fVxuIjsKCQkJCX0KCQkJfQoJCQkKCQkJaWYgKCRlbXB0eV9lcnJvcnMgIT0gIiIpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGVtcHR5X2Vycm9ycyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJLy9pZiBoZXJlLCB0aGF0IG1lYW5zIHRoZSByZXF1aXJlZCB2YWx1ZXMgYXJlIHByZXNlbnQKCQkJJHRoaXMtPnNldFVSTCgkY29uZmlnWyd1cmwnXSk7CgkJCSR0aGlzLT5zZXRBUElVc2VybmFtZSgkY29uZmlnWydhcGlfdXNlcm5hbWUnXSk7CgkJCSR0aGlzLT5zZXRBUElQYXNzd29yZCgkY29uZmlnWydhcGlfcGFzc3dvcmQnXSk7CgoJCQkvLyB2YWxpZGF0ZSBjcmVkZW50aWFscwoJCQkkcmVzcG9uc2UgPSAkdGhpcy0+dmFsaWRhdGVDcmVkZW50aWFscygpOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJewoJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJfQoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBDaGFyZ2UgYW4gb3JkZXIuCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGNoYXJnZQoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyBUaGUgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24gdG8gdXNlIGluIGNoYXJnaW5nIHRoZSBvcmRlcgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXR1cyBvZiB0aGUgY2hhcmdlIGF0dGVtcHQuIEluIHRoaXMgY2FzZSwgaXQgd2lsbCBhbHdheXMgYmUgYW4gZXJyb3Igb2JqZWN0CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjaGFyZ2VPcmRlcihNTV9PcmRlciAkb3JkZXIsIE1NX0NhcmRJbmZvICRjYXJkSW5mbz1udWxsLCAkdmFsaWRhdGU9dHJ1ZSkgCgl7IAoJCWdsb2JhbCAkd3BkYjsKCQkKCQlwYXJlbnQ6OmNoYXJnZU9yZGVyKCRvcmRlciwkY2FyZEluZm8sJHZhbGlkYXRlKTsKCQkKCQkkdHJ5Q2FyZE9uRmlsZSA9IGlzX251bGwoJGNhcmRJbmZvKTsKCQkKCQlpZiAoISR0cnlDYXJkT25GaWxlKSAKCQl7CgkJCSRjYXJkVmFsaWRhdGlvbiA9ICRjYXJkSW5mby0+dmFsaWRhdGUoKTsKCQkJaWYgKCRjYXJkVmFsaWRhdGlvbiAhPT0gdHJ1ZSkKCQkJeyAKCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNoYXJnZSBvcmRlcjogeyRjYXJkVmFsaWRhdGlvbn0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCS8vIHBsYWNlIG9yZGVyCgkJCSRjaGFyZ2VSZXNwb25zZSA9ICR0aGlzLT5zZW5kTGltZUxpZ2h0Q2hhcmdlKCRvcmRlciwgJGNhcmRJbmZvKTsKCQl9CgkJZWxzZSAKCQl7CQkKCQkJJGNhcmRPbkZpbGVJZCA9ICR0aGlzLT5sb29rdXBDYXJkT25GaWxlKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKSk7CgkJCQoJCQlpZiAoJGNhcmRPbkZpbGVJZCA9PT0gZmFsc2UpCgkJCXsgCgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkludmFsaWQgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7IAoJCQl9CgkJCQoJCQkvLyBwbGFjZSBvcmRlciB3aXRoIGNhcmQgb24gZmlsZQoJCQkkY2hhcmdlUmVzcG9uc2UgPSAkdGhpcy0+c2VuZExpbWVMaWdodENoYXJnZSgkb3JkZXIsIG51bGwsICRjYXJkT25GaWxlSWQpOwoJCX0KCQkKCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY2hhcmdlUmVzcG9uc2UpIHx8IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRmFpbGVkKCRjaGFyZ2VSZXNwb25zZSkpCgkJeyAKCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQlyZXR1cm4gJGNoYXJnZVJlc3BvbnNlOwoJCX0KCQkKCQkkY2hhcmdlUmVzcG9uc2UgPSAkY2hhcmdlUmVzcG9uc2UtPmdldE1lc3NhZ2UoKTsKCQkkY2hhcmdlT2JqZWN0ID0gJGNoYXJnZVJlc3BvbnNlLT5tZXNzYWdlOwoJCQoJCSRwcm9kdWN0SXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJJG9yZGVySXRlbUlkID0gbnVsbDsKCQlpZiAoY291bnQoJHByb2R1Y3RJdGVtcykgPT0gMSkKCQl7CgkJCSRvcmRlckl0ZW0gPSByZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQkJJG9yZGVySXRlbUlkID0gJG9yZGVySXRlbS0+Z2V0SWQoKTsKCQl9CgkJCgkJLy8gc3RvcmUgb3JkZXIgSUQgYXMgY2FyZC1vbi1maWxlIElECgkJJHRoaXMtPnVwZGF0ZUNhcmRPbkZpbGUoJG9yZGVyLCAkY2hhcmdlT2JqZWN0WyJvcmRlcklkIl0pOwoJCQoJCS8vIHVwZGF0ZSBzdWJzY3JpcHRpb24gbGlua3MgdGFibGUKCQkkbW1Qcm9kdWN0ID0gJGNoYXJnZVJlc3BvbnNlLT5nZXREYXRhKCJtbVByb2R1Y3QiKTsKCQkkbGltZUxpZ2h0UHJvZHVjdCA9ICRjaGFyZ2VSZXNwb25zZS0+Z2V0RGF0YSgibGxQcm9kdWN0Iik7CgkJJGxpbWVMaWdodFNoaXBwaW5nSWQgPSAkY2hhcmdlUmVzcG9uc2UtPmdldERhdGEoImxsU2hpcHBpbmdJZCIpOwoJCWlmKCRtbVByb2R1Y3QtPmlzVmFsaWQoKSAmJiAkbW1Qcm9kdWN0LT5pc1JlY3VycmluZygpKQoJCXsKCQkJLy8gdXBkYXRlIG9yZGVyIGl0ZW0gc3RhdHVzCgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKTsKCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCX0KCQkKCQkvLyB1cGRhdGUgbGltZSBsaWdodCBjaGFyZ2VzIHRhYmxlCgkJJGxpbWVMaWdodENoYXJnZUlkID0gJHRoaXMtPmxvZ0xpbWVMaWdodENoYXJnZSgkb3JkZXIsICRvcmRlckl0ZW1JZCwgJGNoYXJnZU9iamVjdFsib3JkZXJJZCJdLCAkY2hhcmdlT2JqZWN0WyJjdXN0b21lcklkIl0sIAoJCQkJJGNoYXJnZU9iamVjdFsic3Vic2NyaXB0aW9uX2lkW3skbGltZUxpZ2h0UHJvZHVjdC0+Z2V0TGltZUxpZ2h0UHJvZHVjdElkKCl9XSJdLCAkbGltZUxpZ2h0UHJvZHVjdC0+Z2V0TGltZUxpZ2h0Q2FtcGFpZ25JZCgpLCAKCQkJCSRsaW1lTGlnaHRQcm9kdWN0LT5nZXRMaW1lTGlnaHRQcm9kdWN0SWQoKSwgJGxpbWVMaWdodFNoaXBwaW5nSWQsICRvcmRlci0+Z2V0VG90YWwoKSk7CgoJCS8vIG5vdyBsb2cgdGhlIHBheW1lbnQgaW4gdGhlIHRyYW5zYWN0aW9ucyB0YWJsZQoJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0iOwoJCSRyZXMgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkb3JkZXItPmdldElkKCksICRvcmRlckl0ZW1JZCwgJG9yZGVyLT5nZXRUb3RhbCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCx0cnVlLCR0aGlzLT5pZCwkbGltZUxpZ2h0Q2hhcmdlSWQsJHRyYW5zYWN0aW9uRGF0ZSk7CgkJCgkJLy9yZWFjaGluZyB0aGlzIHBvaW50IG1lYW5zIHRoYXQgdGhlIG9yZGVyIHdhcyBwbGFjZWQgc3VjY2Vzc2Z1bGx5CgkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRQQUlEX0NPTVBMRVRFKTsKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0JCgkKCQoJLyoqCgkgKiBTZW5kcyBhIGNoYXJnZSB0byBMaW1lIExpZ2h0LCBhbmQgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgdW5maWx0ZXJlZCByZXN1bHQuCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gKG9wdGlvbmFsKSBUaGUgY3JlZGl0IGNhcmQgdG8gY2hhcmdlLiBFaXRoZXIgY2FyZE9uRmlsZUlkIG9yIGNhcmRJbmZvIHNob3VsZCBiZSBzdXBwbGllZCwgYnV0IG5vdCBib3RoCgkgKiBAcGFyYW0gTnVtYmVyICRjYXJkT25GaWxlSWQgKG9wdGlvbmFsKSBUaGUgY2FyZE9uRmlsZUlkIHRvIGNoYXJnZSB3aGljaCByZXByZXNlbnRzIGEgTGltZSBMaWdodCBvcmRlciBJRC4gRWl0aGVyIGNhcmRPbkZpbGVJZCBvciBjYXJkSW5mbyBzaG91bGQgYmUgc3VwcGxpZWQsIGJ1dCBub3QgYm90aAoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgT24gc3VjY2VzcywgY29udGFpbnMgdGhlIGNoYXJnZSBvYmplY3QgcmV0dXJuZWQgYnkgTGltZSBMaWdodCwgb24gZmFpbHVyZSBjb250YWlucyBhbiBlcnJvciBtZXNzYWdlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBzZW5kTGltZUxpZ2h0Q2hhcmdlKCRvcmRlciwgJGNhcmRJbmZvPW51bGwsICRjYXJkT25GaWxlSWQ9bnVsbCkKCXsKCQlpZiAoaXNfbnVsbCgkY2FyZE9uRmlsZUlkKSAmJiBpc19udWxsKCRjYXJkSW5mbykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY2hhcmdlOiBObyBwYXltZW50IG1ldGhvZCB3YXMgcHJvdmlkZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIGdldCB0aGUgTGltZSBMaWdodCBjYW1wYWlnbiBJRCwgcHJvZHVjdCBJRCBhbmQgc2hpcHBpbmcgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBNTSBwcm9kdWN0IGJlaW5nIHB1cmNoYXNlZAoJCS8vIGFuZCBzaGlwcGluZyBtZXRob2QgYXBwbGllZCB0byB0aGUgb3JkZXIKCQkkbW1Qcm9kdWN0ID0gbnVsbDsKCQkkbGltZUxpZ2h0U2hpcHBpbmcgPSBuZXcgTU1fTGltZUxpZ2h0U2hpcHBpbmdNZXRob2QoKTsKCQkKCQlmb3JlYWNoKCRvcmRlci0+Z2V0UHJvZHVjdHMoKSBhcyAkb3JkZXJJdGVtKQoJCXsKCQkJJG1tUHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRvcmRlckl0ZW0tPmdldEl0ZW1JZCgpKTsKCQkJCQoJCQlpZigkbW1Qcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRsaW1lTGlnaHRQcm9kdWN0ID0gTU1fTGltZUxpZ2h0UHJvZHVjdDo6ZmluZEJ5TU1Qcm9kdWN0SWQoJG1tUHJvZHVjdC0+Z2V0SWQoKSk7CgkJCQkKCQkJCWlmKCEkbGltZUxpZ2h0UHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBjaGFyZ2U6IFRoZSBwcm9kdWN0ICd7JG1tUHJvZHVjdC0+Z2V0TmFtZSgpfScgaXMgbm90IG1hcHBlZCB0byBhIHByb2R1Y3QgaW4gTGltZSBMaWdodC4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCQkJCgkJCQlpZigkbW1Qcm9kdWN0LT5pc1NoaXBwYWJsZSgpKQoJCQkJewoJCQkJCSRzaGlwcGluZ09wdGlvbktleSA9ICRvcmRlci0+Z2V0U2hpcHBpbmdPcHRpb25LZXkoKTsKCQkJCQkKCQkJCQlpZighZW1wdHkoJHNoaXBwaW5nT3B0aW9uS2V5KSkKCQkJCQl7CgkJCQkJCSRsaW1lTGlnaHRTaGlwcGluZyA9IE1NX0xpbWVMaWdodFNoaXBwaW5nTWV0aG9kOjpmaW5kQnlNTVNoaXBwaW5nT3B0aW9uS2V5KCRzaGlwcGluZ09wdGlvbktleSk7CgkJCQoJCQkJCQlpZighJGxpbWVMaWdodFNoaXBwaW5nLT5pc1ZhbGlkKCkpCgkJCQkJCXsKCQkJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBjaGFyZ2U6IFRoZSBzaGlwcGluZyBtZXRob2QgJ3skb3JkZXItPmdldFNoaXBwaW5nT3B0aW9uRGVzY3JpcHRpb24oKX0nIGlzIG5vdCBtYXBwZWQgdG8gYSBzaGlwcGluZyBtZXRob2QgaW4gTGltZSBMaWdodC4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQkJCgkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQkvLyBwb3B1bGF0ZSBjb21tb24gY2hhcmdlIGRhdGEKCQkkY2hhcmdlRGF0YSA9IGFycmF5KCk7CgkJCgkJJGNoYXJnZURhdGFbJ2NhbXBhaWduSWQnXSA9ICRsaW1lTGlnaHRQcm9kdWN0LT5nZXRMaW1lTGlnaHRDYW1wYWlnbklkKCk7CgkJJGNoYXJnZURhdGFbJ3Byb2R1Y3RJZCddID0gJGxpbWVMaWdodFByb2R1Y3QtPmdldExpbWVMaWdodFByb2R1Y3RJZCgpOwoJCQoJCWlmKCRsaW1lTGlnaHRTaGlwcGluZy0+aXNWYWxpZCgpKQoJCXsKCQkJJGNoYXJnZURhdGFbJ3NoaXBwaW5nSWQnXSA9ICRsaW1lTGlnaHRTaGlwcGluZy0+Z2V0TGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZCgpOwoJCX0KCQllbHNlIAoJCXsKCQkJLy8gTGltZSBMaWdodCByZXF1aXJlcyBhIHNoaXBwaW5nIElEIHRvIGJlIHBhc3NlZAoJCQkvLyBUT0RPIHRlbXBvcmFyeSBjb2RlIC0tIHJlbW92ZSB0aGlzIG9uY2UgTGltZSBMaWdodCBoYXMgZml4ZWQgdGhlIGlzc3VlIG9uIHRoZWlyIGVuZC4gVWx0aW1hdGVseSwKCQkJLy8gd2Ugd2lsbCBiZSBhYmxlIHRvIHBhc3MgYSBzaGlwcGluZyBJRCBvZiAwIG9yIC0xIHRvIGluZGljYXRlIHRoYXQgdGhlIGRlZmF1bHQgZnJlZSBzaGlwcGluZyBtZXRob2QgCgkJCS8vIHNob3VsZCBiZSB1c2VkIG9uIHRoZSBMaW1lIExpZ2h0IHNpZGUKCQkJLy8gY2hlY2sgZm9yIHNoaXBwaW5nIG92ZXJyaWRlIGFuZCB1c2UgdGhhdCBpZiBpdCBleGlzdHMKCQkJJHNoaXBwaW5nSWRPdmVycmlkZSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oIm1tLWxpbWVsaWdodC1zaGlwcGluZy1pZC1vdmVycmlkZSIpOwoJCQkKCQkJaWYoIWVtcHR5KCRzaGlwcGluZ0lkT3ZlcnJpZGUpKQoJCQl7CgkJCQkkY2hhcmdlRGF0YVsnc2hpcHBpbmdJZCddID0gJHNoaXBwaW5nSWRPdmVycmlkZTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRjaGFyZ2VEYXRhWydzaGlwcGluZ0lkJ10gPSAxOwoJCQl9CgkJfQoKCQkkY2hhcmdlRGF0YVsnaXBBZGRyZXNzJ10gPSAkb3JkZXItPmdldElQQWRkcmVzcygpOwoJCQkKCQkkY2hhcmdlRGF0YVsnbm90ZXMnXSA9ICJNZW1iZXJNb3VzZSBPcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0iOwoKCQkkY2hhcmdlRGF0YVsnQUZJRCddID0gJG9yZGVyLT5nZXRBZmZpbGlhdGVJZCgpOwoJCSRjaGFyZ2VEYXRhWydTSUQnXSA9ICRvcmRlci0+Z2V0U3ViQWZmaWxpYXRlSWQoKTsKCQkKCQkvLyByZXRyaWV2ZSB0aGUgZmlyc3QgY291cG9uIG9uIHRoZSBvcmRlciBhbmQgYXNzaWduIGl0IGFzIHRoZSBwcm9tbyBjb2RlCgkJJG9yZGVySXRlbXMgPSAkb3JkZXItPmdldENvdXBvbnMoKTsKCQkKCQlmb3JlYWNoKCRvcmRlckl0ZW1zIGFzICRvcmRlckl0ZW0pCgkJewoJCQkkY291cG9uID0gbmV3IE1NX0NvdXBvbigkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCgkJCWlmKCRjb3Vwb24tPmlzVmFsaWQoKSkKCQkJewoJCQkJJGNoYXJnZURhdGFbJ3Byb21vQ29kZSddID0gJGNvdXBvbi0+Z2V0Q291cG9uQ29kZSgpOwoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJCgkJaWYgKCFpc19udWxsKCRjYXJkSW5mbykpCgkJewoJCQkkY3VzdG9tZXIgPSAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJCSAKCQkJJGNoYXJnZURhdGFbJ2ZpcnN0TmFtZSddID0gJGN1c3RvbWVyLT5nZXRGaXJzdE5hbWUoKTsKCQkJJGNoYXJnZURhdGFbJ2xhc3ROYW1lJ10gPSAkY3VzdG9tZXItPmdldExhc3ROYW1lKCk7CgkJCSRjaGFyZ2VEYXRhWydwaG9uZSddID0gJGN1c3RvbWVyLT5nZXRQaG9uZSgpOwoJCQkkY2hhcmdlRGF0YVsnZW1haWwnXSA9IHVybGVuY29kZSgkY3VzdG9tZXItPmdldEVtYWlsKCkpOwoJCQkKCQkJJGNhcmRUeXBlID0gJGNhcmRJbmZvLT5nZXRDYXJkVHlwZSgpOwoJCQkKCQkJc3dpdGNoKCRjYXJkVHlwZSkKCQkJewoJCQkJY2FzZSBNTV9DYXJkSW5mbzo6JENBUkRfVFlQRV9JTlZBTElEOgoJCQkJCS8vIGRlZmF1bHQgaW52YWxpZCBjYXJkIHR5cGVzIHRvIFZJU0EgdG8gY292ZXIgdGhlIGNhc2Ugd2hlcmUgY3VzdG9tZXJzIGFyZSB1c2luZyAKCQkJCQkvLyBMaW1lIExpZ2h0IHRlc3QgY3JlZGl0IGNhcmQgbnVtYmVycwoJCQkJCSRjaGFyZ2VEYXRhWydjcmVkaXRDYXJkVHlwZSddID0gTU1fQ2FyZEluZm86OiRDQVJEX1RZUEVfVklTQTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgTU1fQ2FyZEluZm86OiRDQVJEX1RZUEVfRElORVJTOgoJCQkJY2FzZSBNTV9DYXJkSW5mbzo6JENBUkRfVFlQRV9KQ0I6CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIGNyZWRpdCBjYXJkIHR5cGUgb2YgJ3skY2FyZFR5cGV9Jy4gTGltZSBMaWdodCBvbmx5IGFjY2VwdHMgVklTQSwgTWFzdGVyIENhcmQsIEFNRVggYW5kIERpc2NvdmVyLiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJJGNoYXJnZURhdGFbJ2NyZWRpdENhcmRUeXBlJ10gPSAkY2FyZFR5cGU7CgkJCQkJYnJlYWs7CgkJCX0KCQkJCgkJCSRjaGFyZ2VEYXRhWydjcmVkaXRDYXJkTnVtYmVyJ10gPSAkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKTsKCQkJJGNoYXJnZURhdGFbJ2V4cGlyYXRpb25EYXRlJ10gPSAkY2FyZEluZm8tPmdldEV4cGlyYXRpb25Nb250aCgpLnN1YnN0cigkY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCksIC0yKTsKCQkJJGNoYXJnZURhdGFbJ0NWViddID0gJGNhcmRJbmZvLT5nZXRDVlYoKTsKCQkJJGNoYXJnZURhdGFbJ3RyYW5UeXBlJ10gPSAnU2FsZSc7IAoKCQkJJGNoYXJnZURhdGFbJ2JpbGxpbmdTYW1lQXNTaGlwcGluZyddID0gIk5PIjsKCQkJJGJpbGxpbmdBZGRyZXNzID0gJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpOwoJCQkkc2hpcHBpbmdBZGRyZXNzID0gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKTsKCQkJIAoJCQkkY2hhcmdlRGF0YVsnYmlsbGluZ0FkZHJlc3MxJ10gPSAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpOwoJCQkkY2hhcmdlRGF0YVsnYmlsbGluZ0FkZHJlc3MyJ10gPSAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMigpOwoJCQkkY2hhcmdlRGF0YVsnYmlsbGluZ0NpdHknXSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpOwoJCQkkY2hhcmdlRGF0YVsnYmlsbGluZ1N0YXRlJ10gPSAkYmlsbGluZ0FkZHJlc3MtPmdldFN0YXRlKCk7CgkJCSRjaGFyZ2VEYXRhWydiaWxsaW5nWmlwJ10gPSAkYmlsbGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKTsKCQkJJGNoYXJnZURhdGFbJ2JpbGxpbmdDb3VudHJ5J10gPSAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKTsKCQkJCgkJCSRjaGFyZ2VEYXRhWydzaGlwcGluZ0FkZHJlc3MxJ10gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKTsKCQkJJGNoYXJnZURhdGFbJ3NoaXBwaW5nQWRkcmVzczInXSA9ICRzaGlwcGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMigpOwoJCQkkY2hhcmdlRGF0YVsnc2hpcHBpbmdDaXR5J10gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCk7CgkJCSRjaGFyZ2VEYXRhWydzaGlwcGluZ1N0YXRlJ10gPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRTdGF0ZSgpOwoJCQkkY2hhcmdlRGF0YVsnc2hpcHBpbmdaaXAnXSA9ICRzaGlwcGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKTsKCQkJJGNoYXJnZURhdGFbJ3NoaXBwaW5nQ291bnRyeSddID0gJHNoaXBwaW5nQWRkcmVzcy0+Z2V0Q291bnRyeSgpOwoJCQkKCQkJLy8gcGxhY2UgbmV3IG9yZGVyCgkJCSRjaGFyZ2VSZXN1bHQgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0VHJhbnNhY3Rpb25BUEkoIk5ld09yZGVyIiksICJQT1NUIiwgJGNoYXJnZURhdGEpOwoJCX0KCQllbHNlIAoJCXsKCQkJJGNoYXJnZURhdGFbImluaXRpYWxpemVOZXdTdWJzY3JpcHRpb24iXSA9IDE7CgkJCSRjaGFyZ2VEYXRhWydwcmV2aW91c09yZGVySWQnXSA9ICRjYXJkT25GaWxlSWQ7CgkJCQoJCQkvLyBwbGFjZSBvcmRlciB1c2luZyBjYXJkIG9uIGZpbGUKCQkJJGNoYXJnZVJlc3VsdCA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRUcmFuc2FjdGlvbkFQSSgiTmV3T3JkZXJDYXJkT25GaWxlIiksICJQT1NUIiwgJGNoYXJnZURhdGEpOwoJCX0KCgkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkY2hhcmdlUmVzdWx0KSkKCQl7CgkJCSRjaGFyZ2VSZXN1bHQtPmFkZERhdGEoIm1tUHJvZHVjdCIsICRtbVByb2R1Y3QpOwoJCQkkY2hhcmdlUmVzdWx0LT5hZGREYXRhKCJsbFByb2R1Y3QiLCAkbGltZUxpZ2h0UHJvZHVjdCk7CgkJCSRjaGFyZ2VSZXN1bHQtPmFkZERhdGEoImxsU2hpcHBpbmdJZCIsICRjaGFyZ2VEYXRhWydzaGlwcGluZ0lkJ10pOwoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGNoYXJnZVJlc3VsdCk7CgkJfQoJCWVsc2UKCQl7CgkJCSRlcnJvck1zZyA9ICJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZSI7CgkJCQoJCQlpZihpc3NldCgkY2hhcmdlUmVzdWx0LT5tZXNzYWdlKSAmJiAoaXNzZXQoJGNoYXJnZVJlc3VsdC0+bWVzc2FnZVsiZXJyb3JNZXNzYWdlIl0pIHx8IGlzc2V0KCRjaGFyZ2VSZXN1bHQtPm1lc3NhZ2VbImRlY2xpbmVSZWFzb24iXSkpKQoJCQl7CgkJCQlpZihpc3NldCgkY2hhcmdlUmVzdWx0LT5tZXNzYWdlWyJlcnJvck1lc3NhZ2UiXSkpCgkJCQl7CgkJCQkJJGVycm9yTXNnIC49ICI6IHskY2hhcmdlUmVzdWx0LT5tZXNzYWdlWyJlcnJvck1lc3NhZ2UiXX0iOwoJCQkJfQoJCQkJZWxzZSBpZihpc3NldCgkY2hhcmdlUmVzdWx0LT5tZXNzYWdlWyJkZWNsaW5lUmVhc29uIl0pKQoJCQkJewoJCQkJCSRlcnJvck1zZyAuPSAiOiB7JGNoYXJnZVJlc3VsdC0+bWVzc2FnZVsiZGVjbGluZVJlYXNvbiJdfSI7CgkJCQl9CgkJCX0KCQkJCgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNc2csIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQkKCQoJCgkvKioKCSAqIExvb2tzIHVwIHRoZSBMaW1lIExpZ2h0IGNhcmQgb24gZmlsZSBpZCBsaW5rZWQgdG8gYSBNZW1iZXJNb3VzZSB1c2VyCgkgKiAKCSAqIEBwYXJhbSBpbnQgJHVzZXJJZCBUaGUgTWVtYmVyTW91c2UgdXNlciBpZAoJICogQHJldHVybiBUaGUgKHN0cmluZykgTGltZSBMaWdodCBjYXJkIG9uIGZpbGUgaWQgaWYgZm91bmQsIGJvb2xlYW4gZmFsc2UgaWYgbm90IGZvdW5kIG9yIGVycm9yZWQKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxvb2t1cENhcmRPbkZpbGUoJHVzZXJJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGxvb2t1cFNRTCA9ICJTRUxFQ1QgcGF5bWVudF9zZXJ2aWNlX2lkZW50aWZpZXIgZnJvbSAiLk1NX1RBQkxFX0NBUkRfT05fRklMRS4iIFdIRVJFIHVzZXJfaWQ9J3skdXNlcklkfSciOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3JvdygkbG9va3VwU1FMKTsKCQlpZiAoaXNfbnVsbCgkcm93KSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuICRyb3ctPnBheW1lbnRfc2VydmljZV9pZGVudGlmaWVyOwoJfQkKCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBjYXJkIG9uIGZpbGUgZW50cnkgZm9yIHRoZSBtZW1iZXIgaWYgb25lIGRvZXNuJ3QgZXhpc3RzIGFuZCB1cGRhdGVzCgkgKiB0aGUgY2FyZCBvbiBmaWxlIGlmIGl0IGFscmVhZHkgZXhpc3RzCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgdGhlIG9yZGVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2FyZCBiZWluZyBzdG9yZWQKCSAqIEBwYXJhbSBTdHJpbmcgJGNhcmRPbkZpbGVJZCB0aGUgSUQgb2YgdGhlIGNhcmQgb24gZmlsZSBpbiBMaW1lIExpZ2h0CgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiB1cGRhdGVDYXJkT25GaWxlKE1NX09yZGVyICRvcmRlciwgJGNhcmRPbkZpbGVJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJGRvVXBkYXRlID0gZmFsc2U7CgkJCgkJLy8gY2hlY2sgaWYgZW50cnkgYWxyZWFkeSBleGlzdHMgZm9yIHRoaXMgdXNlcgoJCSRzcWwgPSAiU0VMRUNUIGlkLCBjb3VudCgqKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfQ0FSRF9PTl9GSUxFIC4iIFdIRVJFICI7CgkJJHNxbCAuPSAidXNlcl9pZD0neyRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKX0nIEFORCBwYXltZW50X3NlcnZpY2VfaWQ9J3skb3JkZXItPmdldFBheW1lbnRNZXRob2QoKS0+Z2V0SWQoKX0nIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQoJCWlmKGlzc2V0KCRyb3ctPnRvdGFsKSAmJiBpbnR2YWwoJHJvdy0+dG90YWwpID4gMCkKCQl7CgkJCSRkb1VwZGF0ZSA9IHRydWU7CgkJfQoKCQkkY29mRGF0YSA9IGFycmF5KCJwYXltZW50X3NlcnZpY2VfaWRlbnRpZmllciI9PiRjYXJkT25GaWxlSWQsICJvcmlnaW5hbF9vcmRlcl9pZCI9PiRvcmRlci0+Z2V0SWQoKSk7CgkJCgkJaWYoISRkb1VwZGF0ZSkKCQl7CgkJCS8vIGNyZWF0ZSBlbnRyeSBpbiBjYXJkIG9uIGZpbGUgdGFibGUKCQkJJGNvZkRhdGFbInVzZXJfaWQiXSA9ICRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKTsKCQkJJGNvZkRhdGFbInBheW1lbnRfc2VydmljZV9pZCJdID0gJG9yZGVyLT5nZXRQYXltZW50TWV0aG9kKCktPmdldElkKCk7CgkJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ0FSRF9PTl9GSUxFLCAkY29mRGF0YSk7CgkJfQoJCWVsc2UKCQl7CgkJCS8vIHVwZGF0ZSBleGlzdGluZyBlbnRyeSBpbiBjYXJkIG9uIGZpbGUgdGFibGUKCQkJJHdoZXJlQ2xhdXNlID0gYXJyYXkoInVzZXJfaWQiPT4kb3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCksICJwYXltZW50X3NlcnZpY2VfaWQiPT4kb3JkZXItPmdldFBheW1lbnRNZXRob2QoKS0+Z2V0SWQoKSk7CgkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQ0FSRF9PTl9GSUxFLCAkY29mRGF0YSwgJHdoZXJlQ2xhdXNlKTsKCQl9Cgl9CgkKCQoJLyoqIAoJICogVGhpcyBtZXRob2QgbG9ncyBhIExpbWUgTGlnaHQgY2hhcmdlCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciBhbiBpbnN0YW5jZSBvZiB0aGUgTWVtYmVyTW91c2Ugb3JkZXIgb2JqZWN0CgkgKiBAcGFyYW0gc3RyaW5nICRvcmRlckl0ZW1JZCB0aGUgTWVtYmVyTW91c2Ugb3JkZXIgaXRlbSBJRAoJICogQHBhcmFtIHN0cmluZyAkbGxPcmRlcklkIHRoZSBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIExpbWUgTGlnaHQgb3JkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJGN1c3RvbWVySWQgdGhlIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgTGltZSBMaWdodCBjdXN0b21lcgoJICogQHBhcmFtIHN0cmluZyAkc3Vic2NyaXB0aW9uSWQgdGhlIExpbWUgTGlnaHQgc3Vic2NyaXB0aW9uIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgb3JkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJGNhbXBhaWduSWQgdGhlIExpbWUgTGlnaHQgY2FtcGFpZ24gSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmRlcgoJICogQHBhcmFtIHN0cmluZyAkcHJvZHVjdElkIHRoZSBMaW1lIExpZ2h0IHByb2R1Y3QgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmRlcgoJICogQHBhcmFtIHN0cmluZyAkc2hpcHBpbmdJZCB0aGUgSUQgb2YgdGhlIHNoaXBwaW5nIG1ldGhvZCBhcHBsaWVkIHRvIHRoZSBvcmRlcgoJICogQHBhcmFtIHN0cmluZyAkb3JkZXJUb3RhbCB0aGUgdG90YWwgYW1vdW50IGNoYXJnZWQgb24gdGhlIG9yZGVyCgkgKiAKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBsb2dMaW1lTGlnaHRDaGFyZ2UoTU1fT3JkZXIgJG9yZGVyLCAkb3JkZXJJdGVtSWQsICRsbE9yZGVySWQsICRjdXN0b21lcklkLCAkc3Vic2NyaXB0aW9uSWQsICRjYW1wYWlnbklkLCAkcHJvZHVjdElkLCAkc2hpcHBpbmdJZCwgJG9yZGVyVG90YWwpCgl7CgkJZ2xvYmFsICR3cGRiOwoKCQkkdHJhbnNhY3Rpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJJGluc2VydERhdGEgPSBhcnJheSggIm9yZGVyX2lkIgk9PiAkb3JkZXItPmdldElkKCksCgkJCQkib3JkZXJfaXRlbV9pZCIgICAgIAk9PiAkb3JkZXJJdGVtSWQsCgkJCQkiY2hhcmdlX2lkIiAgICAgCSAJPT4gJGxsT3JkZXJJZCwKCQkJCSJzdWJzY3JpcHRpb25faWQiCQk9PiAkc3Vic2NyaXB0aW9uSWQsCgkJCQkiY3VzdG9tZXJfaWQiICAgICAJIAk9PiAkY3VzdG9tZXJJZCwKCQkJCSJjYW1wYWlnbl9pZCIgICAgIAkgCT0+ICRjYW1wYWlnbklkLAoJCQkJInByb2R1Y3RfaWQiICAgICAJIAk9PiAkcHJvZHVjdElkLAoJCQkJInNoaXBwaW5nX2lkIiAgICAgCSAJPT4gJHNoaXBwaW5nSWQsCgkJCQkiYW1vdW50IiAgICAgICAgICAgIAk9PiAkb3JkZXJUb3RhbCwKCQkJCSJ0cmFuc2FjdGlvbl9kYXRlIiAgCT0+ICR0cmFuc2FjdGlvbkRhdGUKCQkpOwoJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfTElNRUxJR0hUX0NIQVJHRVMsJGluc2VydERhdGEpOwoJCXJldHVybiAkd3BkYi0+aW5zZXJ0X2lkOwoJfQoJCgkKCS8qKgoJICogVXBkYXRlcyB0aGUgcGF5bWVudCBnYXRld2F5IHdpdGggbmV3IGluZm9ybWF0aW9uLCBhbmQgdXBkYXRlcyB0aGUgTWVtYmVyTW91c2Ugb3JkZXIgd2l0aCB0aGUgbmV3IGJpbGxpbmcgYWRkcmVzcwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6dXBkYXRlU3Vic2NyaXB0aW9uSW5mbygpCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSByZXByZXNlbnRpbmcgdGhlIHN1YnNjcmlwdGlvbiBiZWluZyB1cGRhdGVkCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIChvcHRpb25hbCkgVGhlIG5ldyBjYXJkIHRvIHN0b3JlIG9uIGZpbGUKCSAqIEBwYXJhbSBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzIFRoZSBuZXcgYmlsbGluZyBhZGRyZXNzIHRvIHN0b3JlLiBTaG91bGQgYmUgdGhlIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXN0b21lcidzIGNhcmQgb24gZmlsZQoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgcmVwcmVzZW50aW5nIHN1Y2Nlc3Mgb3IgZXJyb3IuIENvbnRhaW5zIGEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZSBvbiBlcnJvcgoJICogCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB1cGRhdGVTdWJzY3JpcHRpb25JbmZvKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcz1udWxsKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGlzX251bGwoJGNhcmRJbmZvKSB8fCBpc19udWxsKCRiaWxsaW5nQWRkcmVzcykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yOiBCb3RoIGEgY3JlZGl0IGNhcmQgYW5kIGEgYmlsbGluZyBhZGRyZXNzIG11c3QgYmUgc3VwcGxpZWQgdG8gdXBkYXRlIGEgc3Vic2NyaXB0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkY2FyZFZhbGlkID0gJGNhcmRJbmZvLT52YWxpZGF0ZSgpOwoJCWlmICgkY2FyZFZhbGlkICE9PSB0cnVlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvcjogeyRjYXJkVmFsaWR9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkY3VzdG9tZXJJZCA9IE1NX09yZGVyOjpnZXRVc2VySWRCeU9yZGVySWQoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKTsKCQlpZiAoJGN1c3RvbWVySWQgPT0gLTEpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byB1cGRhdGUgc3Vic2NyaXB0aW9uOiBjdXN0b21lciB3YXMgbm90IGZvdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkb3JkZXJJZCA9ICR0aGlzLT5sb29rdXBMaW1lTGlnaHRPcmRlckZyb21PcmRlckl0ZW1JZCgkb3JkZXJJdGVtLT5nZXRJZCgpKTsKCgkJaWYgKGlzX251bGwoJG9yZGVySWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogTGltZSBMaWdodCBvcmRlciB3YXMgbm90IGZvdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkYWN0aW9ucyA9IGFycmF5KCJjY19wYXltZW50X3R5cGUiLCAiY2NfbnVtYmVyIiwgImNjX2V4cGlyYXRpb25fZGF0ZSIsICJiaWxsaW5nX2FkZHJlc3MxIiwgCgkJCQkiYmlsbGluZ19jaXR5IiwgImJpbGxpbmdfc3RhdGUiLCAiYmlsbGluZ196aXAiLCAiYmlsbGluZ19jb3VudHJ5Iik7CgkJJG9yZGVySWRzID0gYXJyYXkoKTsKCQkkdmFsdWVzID0gYXJyYXkoKTsKCQkKCQlmb3JlYWNoKCRhY3Rpb25zIGFzICRhY3Rpb25OYW1lKQoJCXsKCQkJJG9yZGVySWRzW10gPSAkb3JkZXJJZDsKCQkJCgkJCXN3aXRjaCgkYWN0aW9uTmFtZSkKCQkJewoJCQkJY2FzZSAiY2NfcGF5bWVudF90eXBlIjoKCQkJCQkkY2FyZFR5cGUgPSAkY2FyZEluZm8tPmdldENhcmRUeXBlKCk7CgkJCQkJCgkJCQkJc3dpdGNoKCRjYXJkVHlwZSkKCQkJCQl7CgkJCQkJCWNhc2UgTU1fQ2FyZEluZm86OiRDQVJEX1RZUEVfSU5WQUxJRDoKCQkJCQkJCS8vIGRlZmF1bHQgaW52YWxpZCBjYXJkIHR5cGVzIHRvIFZJU0EgdG8gY292ZXIgdGhlIGNhc2Ugd2hlcmUgY3VzdG9tZXJzIGFyZSB1c2luZwoJCQkJCQkJLy8gTGltZSBMaWdodCB0ZXN0IGNyZWRpdCBjYXJkIG51bWJlcnMKCQkJCQkJCSR2YWx1ZXNbXSA9IE1NX0NhcmRJbmZvOjokQ0FSRF9UWVBFX1ZJU0E7CgkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJY2FzZSBNTV9DYXJkSW5mbzo6JENBUkRfVFlQRV9ESU5FUlM6CgkJCQkJCWNhc2UgTU1fQ2FyZEluZm86OiRDQVJEX1RZUEVfSkNCOgoJCQkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogSW52YWxpZCBjcmVkaXQgY2FyZCB0eXBlIG9mICd7JGNhcmRUeXBlfScuIExpbWUgTGlnaHQgb25seSBhY2NlcHRzIFZJU0EsIE1hc3RlciBDYXJkLCBBTUVYIGFuZCBEaXNjb3Zlci4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkkdmFsdWVzW10gPSAkY2FyZFR5cGU7CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJjY19udW1iZXIiOgoJCQkJCSR2YWx1ZXNbXSA9ICRjYXJkSW5mby0+Z2V0Q2FyZE51bWJlcigpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiY2NfZXhwaXJhdGlvbl9kYXRlIjoKCQkJCQkkdmFsdWVzW10gPSAkY2FyZEluZm8tPmdldEV4cGlyYXRpb25Nb250aCgpLnN1YnN0cigkY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCksIC0yKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImJpbGxpbmdfYWRkcmVzczEiOgoJCQkJCSR2YWx1ZXNbXSA9ICJcInskYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpfVwiIjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImJpbGxpbmdfY2l0eSI6CgkJCQkJJHZhbHVlc1tdID0gIlwieyRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpfVwiIjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImJpbGxpbmdfc3RhdGUiOgoJCQkJCSR2YWx1ZXNbXSA9ICJcInskYmlsbGluZ0FkZHJlc3MtPmdldFN0YXRlKCl9XCIiOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiYmlsbGluZ196aXAiOgoJCQkJCSR2YWx1ZXNbXSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0UG9zdGFsQ29kZSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiYmlsbGluZ19jb3VudHJ5IjoKCQkJCQkkdmFsdWVzW10gPSAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKTsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQkkZGF0YSA9IGFycmF5KCk7CgkJJGRhdGFbIm9yZGVyX2lkcyJdID0gaW1wbG9kZSgiLCIsICRvcmRlcklkcyk7CgkJJGRhdGFbImFjdGlvbnMiXSA9IGltcGxvZGUoIiwiLCAkYWN0aW9ucyk7CgkJJGRhdGFbInZhbHVlcyJdID0gaW1wbG9kZSgiLCIsICR2YWx1ZXMpOwoJCQoJCSRvcFJlc3BvbnNlID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldE1lbWJlcnNoaXBBUEkoIm9yZGVyX3VwZGF0ZSIpLCAiUE9TVCIsICRkYXRhKTsKCQkKCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJG9wUmVzcG9uc2UpKQoJCXsKCQkJJG9wUmVzcG9uc2UtPm1lc3NhZ2UgPSAiVW5hYmxlIHRvIHVwZGF0ZSBzdWJzY3JpcHRpb24uIFBsZWFzZSB0cnkgdXBkYWluZyB0aGUgc3Vic2NyaXB0aW9uIGZyb20gdGhlIExpbWUgTGlnaHQgaW50ZXJmYWNlLiI7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkb3BSZXNwb25zZS0+bWVzc2FnZSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCgkJLy8gcmVzZXQgcmVjdXJyaW5nIGJpbGxpbmcgaW4gTGltZSBMaWdodCBpZiB0aGUgbGFzdCByZWJpbGwgcGF5bWVudCBmYWlsZWQKCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCXsKCQkJJHN1YnNjcmlwdGlvbklkID0gJHRoaXMtPmxvb2t1cFN1YnNjcmlwdGlvbkZyb21PcmRlckl0ZW1JZCgkb3JkZXJJdGVtLT5nZXRJZCgpKTsKCQkJaWYgKGlzX251bGwoJHN1YnNjcmlwdGlvbklkKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcmVzdGFydCBzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbiBub3QgZm91bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCS8vIHJlc2V0IHN1YnNjcmlwdGlvbiBpbiBMaW1lIExpZ2h0CgkJCSRvcFJlc3BvbnNlID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldE1lbWJlcnNoaXBBUEkoInN1YnNjcmlwdGlvbl91cGRhdGUiKSwgIlBPU1QiLCBhcnJheSgidmFsdWVzIj0+JHN1YnNjcmlwdGlvbklkLCJhY3Rpb25zIj0+InN0YXJ0IikpOwoJCQkKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRvcFJlc3BvbnNlKSkKCQkJewoJCQkJaWYgKCgkb3BSZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSAmJiAoJG9wUmVzcG9uc2UtPmdldERhdGEoImh0dHBfY29kZSIpKSkKCQkJCXsKCQkJCQkkb3BSZXNwb25zZS0+bWVzc2FnZSA9ICJFcnJvciByZXN0YXJ0aW5nIHN1YnNjcmlwdGlvbi4gSW52YWxpZCBiaWxsaW5nIGluZm9ybWF0aW9uLiI7CgkJCQl9CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJG9wUmVzcG9uc2UtPm1lc3NhZ2UsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlwYXJlbnQ6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oJG9yZGVySXRlbSwkY2FyZEluZm8sJGJpbGxpbmdBZGRyZXNzKTsKCQkKCQkvLyBzdGF0dXMgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGNoYW5nZWQgdG8gcmVjdXJyaW5nIHdoZW4gdGhlIG5leHQgcmViaWxsIHBheW1lbnQgY29tZXMgaW4gYnV0CgkJLy8gd2l0aCBMaW1lIExpZ2h0IGl0J3MgcG9zc2libGUgdGhhdCB0aGUgbmV4dCByZWJpbGwgd29uJ3QgaGFwcGVuIGltbWVkaWF0ZWx5IHNvIHdlJ2xsIG1hbnVhbGx5CgkJLy8gc2V0IHRoZSBzdGF0dXMgdG8gcmVjdXJyaW5nLgoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpCgkJewoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCgkJCSR1c2VyID0gbmV3IE1NX1VzZXIoTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpKTsKCQkJcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OnRyYW5zbGF0ZShNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXJJdGVtcygkdXNlciwgYXJyYXkoJG9yZGVySXRlbSkpKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBDYW5jZWxzIHRoZSB1c2VyJ3Mgc3Vic2NyaXB0aW9uLiAKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmNhbmNlbFN1YnNjcmlwdGlvbigpCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgcHJvZHVjdCBpdGVtIHdob3NlIHN1YnNjcmlwdGlvbiBpcyBiZWluZyBjYW5jZWxsZWQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gY2FuY2VsU3Vic2NyaXB0aW9uKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtKSAKCXsKCQlpZiAoISRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQ291bGQgbm90IGNhbmNlbCBzdWJzY3JpcHRpb246IGludmFsaWQgb3JkZXIgaXRlbSBzdXBwbGllZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9maXJzdCwgbWFrZSBzdXJlIHRoaXMgaXMgYSBwcm9kdWN0LiBJZiBub3QsIHNvbWV0aGluZyBnb3QgbWVzc2VkIHVwIGFib3ZlCgkJaWYgKCRvcmRlckl0ZW0tPmdldEl0ZW1UeXBlKCkgIT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkF0dGVtcHRlZCB0byBjYW5jZWwgYSBub24tcHJvZHVjdCBpdGVtIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL3RoZW4gbWFrZSBzdXJlIGl0cyBub3QgYWxyZWFkeSBjYW5jZWxsZWQKCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGNhbmNlbGxpbmcgc3Vic2NyaXB0aW9uOiBUaGUgc3Vic2NyaXB0aW9uIGhhcyBhbHJlYWR5IGJlZW4gY2FuY2VsbGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkc3Vic2NyaXB0aW9uSWQgPSAkdGhpcy0+bG9va3VwU3Vic2NyaXB0aW9uRnJvbU9yZGVySXRlbUlkKCRvcmRlckl0ZW0tPmdldElkKCkpOwoJCWlmIChpc19udWxsKCRzdWJzY3JpcHRpb25JZCkpCgkJewoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpOwoJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCQkKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY2FuY2VsIHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy8gY2FuY2VsIHN1YnNjcmlwdGlvbiBpbiBMaW1lIExpZ2h0CgkJJG9wUmVzcG9uc2UgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0TWVtYmVyc2hpcEFQSSgic3Vic2NyaXB0aW9uX3VwZGF0ZSIpLCAiUE9TVCIsIGFycmF5KCJ2YWx1ZXMiPT4kc3Vic2NyaXB0aW9uSWQsImFjdGlvbnMiPT4ic3RvcCIpKTsKCQkKCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJG9wUmVzcG9uc2UpKQoJCXsKCQkJaWYgKCgkb3BSZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSAmJiAoJG9wUmVzcG9uc2UtPmdldERhdGEoImh0dHBfY29kZSIpKSkKCQkJewoJCQkJJG9wUmVzcG9uc2UtPm1lc3NhZ2UgPSAiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIFBsZWFzZSB0cnkgY2FuY2VsbGluZyBtYW51YWxseSBmcm9tIHRoZSBMaW1lIExpZ2h0IGludGVyZmFjZS4iOwoJCQl9CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkb3BSZXNwb25zZS0+bWVzc2FnZSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQllbHNlCgkJewoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpOwoJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogUmVmdW5kcyBhIHRyYW5zYWN0aW9uCgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICR0cmFuc2FjdGlvbklkIFRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiB0byByZWZ1bmQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3MsIGZhaWx1cmUsIG9yIGVycm9yCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCkKCXsKCQlnbG9iYWwgJHdwZGI7IAoJCQoJCWlmIChlbXB0eSgkdHJhbnNhY3Rpb25JZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNvdWxkIG5vdCByZWZ1bmQgdHJhbnNhY3Rpb246IGludmFsaWQgb3JkZXIgaXRlbSBzdXBwbGllZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9tYWtlIHN1cmUgdGhlIHRyYW5zYWN0aW9uIGV4aXN0cwoJCSR0cmFuc2FjdGlvbkxvb2t1cFJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmdldFRyYW5zYWN0aW9uSW5mbygkdHJhbnNhY3Rpb25JZCk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCR0cmFuc2FjdGlvbkxvb2t1cFJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kLCB0cmFuc2FjdGlvbiBkb2VzIG5vdCBleGlzdCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHRyYW5zYWN0aW9uUm93ID0gJHRyYW5zYWN0aW9uTG9va3VwUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCgkJLy9tYWtlIHN1cmUgaXQncyBub3QgYWxyZWFkeSByZWZ1bmRlZAoJCWlmICghaXNfbnVsbCgkdHJhbnNhY3Rpb25Sb3ctPnJlZnVuZF9pZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlRyYW5zYWN0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVmdW5kZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCXN3aXRjaCAoJHRyYW5zYWN0aW9uUm93LT50cmFuc2FjdGlvbl90eXBlKQoJCXsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVDoKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQ6CgkJCQkkbG9va3VwU1FMID0gIlNFTEVDVCAqIGZyb20gIi5NTV9UQUJMRV9MSU1FTElHSFRfQ0hBUkdFUy4iIFdIRVJFIGlkID0gJXMiOwoJCQkJJGxpbWVMaWdodENoYXJnZUluZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgkbG9va3VwU1FMLCR0cmFuc2FjdGlvblJvdy0+cGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCkpOwoJCQkJJG9yZGVySWQgPSAkbGltZUxpZ2h0Q2hhcmdlSW5mby0+Y2hhcmdlX2lkOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRToKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX0NIQVJHRToKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHJlZnVuZCB0cmFuc2FjdGlvbjogTm90IGEgcGF5bWVudCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUsIHVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHJlZnVuZEFtb3VudCA9IGZsb2F0dmFsKGFicygkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCkpOwoJCQoJCWlmKCRyZWZ1bmRBbW91bnQgPiAwKQoJCXsKCQkJLy8gaXNzdWUgcmVmdW5kCgkJCSRvcFJlc3BvbnNlID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldE1lbWJlcnNoaXBBUEkoIm9yZGVyX3JlZnVuZCIpLCAiUE9TVCIsIGFycmF5KCdvcmRlcl9pZCc9PiRvcmRlcklkLCAnYW1vdW50Jz0+JHJlZnVuZEFtb3VudCwgJ2tlZXBfcmVjdXJyaW5nJz0+JzEnKSk7CgkJCQoJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJG9wUmVzcG9uc2UpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIHJlZnVuZGluZyB0cmFuc2FjdGlvbi4gUGxlYXNlIHRyeSBhdHRlbXB0aW5nIHRoaXMgcmVmdW5kIG1hbnVhbGx5IGZyb20gdGhlIExpbWUgTGlnaHQgaW50ZXJmYWNlLiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkvL3JlZnVuZCB3YXMgc3VjY2VzcyBmb3IgZXhlY3V0aW9uIHRvIHJlYWNoIHRoaXMgcG9pbnQsIGxvZyBpdCBpbiB0aGUgdHJhbnNhY3Rpb24gdGFibGUKCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJSZWZ1bmQgZm9yIHRyYW5zYWN0aW9uIyB7JHRyYW5zYWN0aW9uUm93LT5pZH0iOwoJCSRyZWZ1bmRUcmFuc2FjdGlvblJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJHRyYW5zYWN0aW9uUm93LT5vcmRlcl9pZCwKCQkJCSR0cmFuc2FjdGlvblJvdy0+b3JkZXJfaXRlbV9pZCwKCQkJCSR0cmFuc2FjdGlvblJvdy0+YW1vdW50LAoJCQkJJHRyYW5zYWN0aW9uUm93LT5jdXJyZW5jeSwKCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCwKCQkJCWZhbHNlLAoJCQkJJHRoaXMtPmdldElkKCksCgkJCQkiIiwKCQkJCU1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpLAoJCQkJJHRyYW5zYWN0aW9uUm93LT5pZCk7CgkJCgkJaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlZnVuZFRyYW5zYWN0aW9uUmVzcG9uc2UpKQoJCXsKCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJVUERBVEUgIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBTRVQgcmVmdW5kX2lkID0gJXMgV0hFUkUgaWQgPSAlcyIsJHJlZnVuZFRyYW5zYWN0aW9uUmVzcG9uc2UtPm1lc3NhZ2UsJHRyYW5zYWN0aW9uUm93LT5pZCkpOwoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsgLy8gc3VjY2Vzc3MKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIExpbWUgTGlnaHQgb3JkZXIgSUQgbGlua2VkIHRvIHRoZSBvcmRlciBpdGVtCgkgKgoJICogQHBhcmFtIGludCAkb3JkZXJJdGVtSWQgdGhlIGlkIG9mIHRoZSBvcmRlciBpdGVtIHRvIGxvb2sgdXAKCSAqIEByZXR1cm4gc3RyaW5nIG9yZGVyIElEIG9uIHN1Y2Nlc3MsIG51bGwgb24gZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9va3VwTGltZUxpZ2h0T3JkZXJGcm9tT3JkZXJJdGVtSWQoJG9yZGVySXRlbUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCWlmIChlbXB0eSgkb3JkZXJJdGVtSWQpKQoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCgkJJG9yZGVySXRlbSA9IG51bGw7CgkJJGxvb2t1cFF1ZXJ5ID0gIlNFTEVDVCBjaGFyZ2VfaWQgRlJPTSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9DSEFSR0VTLiIgV0hFUkUgb3JkZXJfaXRlbV9pZD0lcyI7CgkJJG9yZGVySWQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkbG9va3VwUXVlcnksJG9yZGVySXRlbUlkKSk7CgkJcmV0dXJuICRvcmRlcklkOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgb3JkZXIgaXRlbSBsaW5rZWQgdG8gdGhlIExpbWUgTGlnaHQgb3JkZXIgSUQgcHJvdmlkZWQKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkbGxPcmRlcklkIHRoZSBMaW1lIExpZ2h0IG9yZGVyIElEIHRvIGxvb2t1cAoJICogQHJldHVybiBNTV9PcmRlckl0ZW0gaWYgdGhlIGxvb2t1cCBpcyBzdWNjZXNzZnVsLCBudWxsIGlmIGl0IGZhaWxzCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBsb29rdXBPcmRlckl0ZW1Gcm9tTGltZUxpZ2h0T3JkZXIoJGxsT3JkZXJJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGVtcHR5KCRsbE9yZGVySWQpKQoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCQoJCSRvcmRlckl0ZW0gPSBudWxsOwkJCgkJJGxvb2t1cFF1ZXJ5ID0gIlNFTEVDVCBvcmRlcl9pdGVtX2lkIEZST00gIi5NTV9UQUJMRV9MSU1FTElHSFRfQ0hBUkdFUy4iIFdIRVJFIGNoYXJnZV9pZD0lcyBMSU1JVCAxOyI7CgkJJG9yZGVySXRlbUlkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGxvb2t1cFF1ZXJ5LCRsbE9yZGVySWQpKTsKCQlpZiAoIWlzX251bGwoJG9yZGVySXRlbUlkKSkKCQl7CgkJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRvcmRlckl0ZW1JZCk7CgkJCWlmICghJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbnVsbDsKCQkJfQoJCX0KCQlyZXR1cm4gJG9yZGVySXRlbTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIG9yZGVyIGl0ZW0gYXNzb2NpYXRlZCB3aXRoIHRoZSBMaW1lIExpZ2h0IHN1YnNjcmlwdGlvbiBJRAoJICoKCSAqIEBwYXJhbSBpbnQgJG9yZGVySXRlbUlkIHRoZSBpZCBvZiB0aGUgb3JkZXIgaXRlbSB0byBsb29rIHVwCgkgKiBAcmV0dXJuIE1NX09yZGVySXRlbSBpZiB0aGUgbG9va3VwIGlzIHN1Y2Nlc3NmdWwsIG51bGwgaWYgaXQgZmFpbHMKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxvb2t1cE9yZGVySXRlbUZyb21MaW1lTGlnaHRTdWJzY3JpcHRpb24oJHN1YnNjcmlwdGlvbklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCWlmIChlbXB0eSgkc3Vic2NyaXB0aW9uSWQpKQoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCgkJJG9yZGVySXRlbSA9IG51bGw7CgkJJGxvb2t1cFF1ZXJ5ID0gIlNFTEVDVCBvcmRlcl9pdGVtX2lkIEZST00gIi5NTV9UQUJMRV9MSU1FTElHSFRfQ0hBUkdFUy4iIFdIRVJFIHN1YnNjcmlwdGlvbl9pZD0lcyBMSU1JVCAxOyI7CgkJJG9yZGVySXRlbUlkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGxvb2t1cFF1ZXJ5LCRzdWJzY3JpcHRpb25JZCkpOwoJCWlmICghaXNfbnVsbCgkb3JkZXJJdGVtSWQpKQoJCXsKCQkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oJG9yZGVySXRlbUlkKTsKCQkJaWYgKCEkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXJldHVybiBudWxsOwoJCQl9CgkJfQoJCXJldHVybiAkb3JkZXJJdGVtOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgTGltZSBMaWdodCBzdWJzY3JpcHRpb24gSUQgbGlua2VkIHRvIHRoZSBvcmRlciBpdGVtCgkgKgoJICogQHBhcmFtIGludCAkb3JkZXJJdGVtSWQgdGhlIGlkIG9mIHRoZSBvcmRlciBpdGVtIHRvIGxvb2sgdXAKCSAqIEByZXR1cm4gc3RyaW5nIHN1YnNjcmlwdGlvbiBJRCBvbiBzdWNjZXNzLCBudWxsIG9uIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxvb2t1cFN1YnNjcmlwdGlvbkZyb21PcmRlckl0ZW1JZCgkb3JkZXJJdGVtSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJaWYgKGVtcHR5KCRvcmRlckl0ZW1JZCkpCgkJewoJCQlyZXR1cm4gbnVsbDsKCQl9CgkKCQkkbG9va3VwUXVlcnkgPSAiU0VMRUNUIHN1YnNjcmlwdGlvbl9pZCBGUk9NICIuTU1fVEFCTEVfTElNRUxJR0hUX0NIQVJHRVMuIiBXSEVSRSBvcmRlcl9pdGVtX2lkPSVzIExJTUlUIDE7IjsKCQkkc3Vic2NyaXB0aW9uSWQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkbG9va3VwUXVlcnksJG9yZGVySXRlbUlkKSk7CgkJcmV0dXJuICRzdWJzY3JpcHRpb25JZDsKCX0KCQoJCgkvKioKCSAqIFByb2Nlc3NlcyBMaW1lIExpZ2h0IElQTiBub3RpZmljYXRpb25zLiBVc2VkIHRvIG5vdGlmeSBNZW1iZXJNb3VzZSBvZiBzYWxlcywgcmViaWxscywgcmVmdW5kcywgYW5kIGNhbmNlbGxhdGlvbnMsIGV2ZW4gdGhvc2UKCSAqIGluaXRpYXRlZCBmcm9tIHRoZSBMaW1lIExpZ2h0IHNpZGUKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NOb3RpZmljYXRpb24oKQoJICoKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGUgJF9QT1NUIHN1cGVyZ2xvYmFsLCB3aGljaCB3aWxsIGNvbnRhaW4gdGhlIElQTgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgdGhlIHN0YXR1cyBvZiBhbnkgb3BlcmF0aW9ucyBwZXJmb3JtZWQgaW4gdGhlIG1ldGhvZC4gVGhlIG1lc3NhZ2UgZmllbGQgb2YgdGhlIHJlc3BvbnNlIHdpbGwgYmUgZWNob2VkIHRvIHRoZSBzY3JpcHQgY2FsbGVyIHZlcmJhdGltCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzTm90aWZpY2F0aW9uKCRyZXF1ZXN0KSAKCXsKCQkkdGhpcy0+aW5zdGFsbCgpOwoJCQoJCSRyZXF1ZXN0ID0gJF9SRVFVRVNUOwoJCQoJCWlmICghZW1wdHkoJHJlcXVlc3RbJ29wJ10pICYmICgkcmVxdWVzdFsnb3AnXSA9PSAiY29uZiIpKQoJCXsKCQkJLy8gbm9ybWFsaXplIGRhdGEgZnJvbSBzdWNjZXNzIFVSTAoJCQkkbm9ybWFsaXplZFJlcXVlc3QgPSBhcnJheSgpOwoJCQkKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJvcCJdID0gImNvbmYiOwoJCQkkbm9ybWFsaXplZFJlcXVlc3RbIm9yZGVyX2lkIl0gPSAkcmVxdWVzdFsib3JkZXJfaWQiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJjdXN0b21lcl9pZCJdID0gJHJlcXVlc3RbIkN1c3RvbWVyX0lkIl07CgkJCSRub3JtYWxpemVkUmVxdWVzdFsiZmlyc3RfbmFtZSJdID0gJHJlcXVlc3RbIkJpbGxfRmlyc3QiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJsYXN0X25hbWUiXSA9ICRyZXF1ZXN0WyJCaWxsX0xhc3QiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJwaG9uZSJdID0gJHJlcXVlc3RbIkJpbGxfUGhvbmUiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJlbWFpbCJdID0gJHJlcXVlc3RbImVfbWFpbCJdOwoJCQkkbm9ybWFsaXplZFJlcXVlc3RbImNhbXBhaWduX2lkIl0gPSAkcmVxdWVzdFsiQ2FtcGFpZ25fSWQiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJwcm9kdWN0X2lkcyJdID0gJHJlcXVlc3RbIlByb2R1Y3RfSWRfQ1NWIl07CgkJCSRub3JtYWxpemVkUmVxdWVzdFsic3Vic2NyaXB0aW9uX2lkcyJdID0gJHJlcXVlc3RbIlN1YnNjcmlwdGlvbl9JZF9DU1YiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJhY3Rpb25faWQiXSA9ICJpbml0aWFsIjsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJvcmRlcl9zdGF0dXMiXSA9ICIxIjsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJhZmZpbGlhdGUiXSA9IChpc3NldCgkcmVxdWVzdFsiQWZmaWxpYXRlIl0pKSA/ICRyZXF1ZXN0WyJBZmZpbGlhdGUiXSA6ICIiOwoJCQkkbm9ybWFsaXplZFJlcXVlc3RbInN1Yl9hZmZpbGlhdGUiXSA9IChpc3NldCgkcmVxdWVzdFsiU3ViX0FmZmlsaWF0ZSJdKSkgPyAkcmVxdWVzdFsiU3ViX0FmZmlsaWF0ZSJdIDogIiI7CgkJCSRub3JtYWxpemVkUmVxdWVzdFsic2hpcHBpbmdfYWRkcmVzcyJdID0gJHJlcXVlc3RbIlNoaXBfQWRkcmVzczEiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJzaGlwcGluZ19jaXR5Il0gPSAkcmVxdWVzdFsiU2hpcF9DaXR5Il07CgkJCSRub3JtYWxpemVkUmVxdWVzdFsic2hpcHBpbmdfc3RhdGVfZGVzYyJdID0gJHJlcXVlc3RbIlNoaXBfU3RhdGUiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJzaGlwcGluZ196aXAiXSA9ICRyZXF1ZXN0WyJTaGlwX1ppcCJdOwoJCQkkbm9ybWFsaXplZFJlcXVlc3RbInNoaXBwaW5nX2NvdW50cnkiXSA9ICRyZXF1ZXN0WyJTaGlwX0NvdW50cnlfSVNPIl07CgkJCSRub3JtYWxpemVkUmVxdWVzdFsiYmlsbGluZ19hZGRyZXNzIl0gPSAkcmVxdWVzdFsiQmlsbF9BZGRyZXNzMSJdOwoJCQkkbm9ybWFsaXplZFJlcXVlc3RbImJpbGxpbmdfY2l0eSJdID0gJHJlcXVlc3RbIkJpbGxfQ2l0eSJdOwoJCQkkbm9ybWFsaXplZFJlcXVlc3RbImJpbGxpbmdfc3RhdGVfZGVzYyJdID0gJHJlcXVlc3RbIkJpbGxfU3RhdGUiXTsKCQkJJG5vcm1hbGl6ZWRSZXF1ZXN0WyJiaWxsaW5nX3ppcCJdID0gJHJlcXVlc3RbIkJpbGxfWmlwIl07CgkJCSRub3JtYWxpemVkUmVxdWVzdFsiYmlsbGluZ19jb3VudHJ5Il0gPSAkcmVxdWVzdFsiQmlsbF9Db3VudHJ5X0lTTyJdOwoJCQkkbm9ybWFsaXplZFJlcXVlc3RbIm9yZGVyX3RvdGFsIl0gPSAkcmVxdWVzdFsiYW1vdW50Il07CgkJCSRub3JtYWxpemVkUmVxdWVzdFsic2hpcHBpbmdfaWQiXSA9ICRyZXF1ZXN0WyJTaGlwcGluZ0lkIl07CgkJCSRub3JtYWxpemVkUmVxdWVzdFsiaXBfYWRkcmVzcyJdID0gJHJlcXVlc3RbImlwQWRkcmVzcyJdOwoJCQkKCQkJJHJlcXVlc3QgPSAkbm9ybWFsaXplZFJlcXVlc3Q7CgkJfQoJCgkJLy9tYWtlIHN1cmUgcmVxdWlyZWQgZmllbGRzIGV4aXN0CgkJJHJlcXVpcmVkID0gYXJyYXkoIm9yZGVyX2lkIiA9PiAib3JkZXIgSUQiLAoJCQkJImN1c3RvbWVyX2lkIiA9PiAiY3VzdG9tZXIgSUQiLAoJCQkJImZpcnN0X25hbWUiID0+ICJmaXJzdCBuYW1lIiwKCQkJCSJsYXN0X25hbWUiID0+ICJsYXN0IG5hbWUiLAoJCQkJInBob25lIiA9PiAicGhvbmUiLAoJCQkJImVtYWlsIiA9PiAiZW1haWwiLAoJCQkJImNhbXBhaWduX2lkIiA9PiAiY2FtcGFpZ24gSUQiLAoJCQkJInByb2R1Y3RfaWRzIiA9PiAicHJvZHVjdCBJRCIsCgkJCQkic3Vic2NyaXB0aW9uX2lkcyIgPT4gInN1YnNjcmlwdGlvbiBJRCIsCgkJCQkib3JkZXJfc3RhdHVzIiA9PiAib3JkZXIgc3RhdHVzIiwKCQkJCSJvcmRlcl90b3RhbCIgPT4gIm9yZGVyIHRvdGFsIiwKCQkJCSJzaGlwcGluZ19pZCIgPT4gInNoaXBwaW5nIElEIiwKCQkJCSJpcF9hZGRyZXNzIiA9PiAiSVAgYWRkcmVzcyIsCgkJCQkiYWN0aW9uX2lkIiA9PiAiYWN0aW9uIElEIiwKCQkJCSJhZmZpbGlhdGUiID0+ICJhZmZpbGlhdGUiLAoJCQkJInN1Yl9hZmZpbGlhdGUiID0+ICJzdWItYWZmaWxpYXRlIiwKCQkJCSJzaGlwcGluZ19hZGRyZXNzIiA9PiAic2hpcHBpbmcgYWRkcmVzcyIsCgkJCQkic2hpcHBpbmdfY2l0eSIgPT4gInNoaXBwaW5nIGNpdHkiLAoJCQkJInNoaXBwaW5nX3N0YXRlX2Rlc2MiID0+ICJzaGlwcGluZyBzdGF0ZSIsCgkJCQkic2hpcHBpbmdfemlwIiA9PiAic2hpcHBpbmcgemlwIGNvZGUiLAoJCQkJInNoaXBwaW5nX2NvdW50cnkiID0+ICJzaGlwcGluZyBjb3VudHJ5IiwKCQkJCSJiaWxsaW5nX2FkZHJlc3MiID0+ICJiaWxsaW5nIGFkZHJlc3MiLAoJCQkJImJpbGxpbmdfY2l0eSIgPT4gImJpbGxpbmcgY2l0eSIsCgkJCQkiYmlsbGluZ19zdGF0ZV9kZXNjIiA9PiAiYmlsbGluZyBzdGF0ZSIsCgkJCQkiYmlsbGluZ196aXAiID0+ICJiaWxsaW5nIHppcCBjb2RlIiwKCQkJCSJiaWxsaW5nX2NvdW50cnkiID0+ICJiaWxsaW5nIGNvdW50cnkiCgkJKTsKCQkKCQlmb3JlYWNoICgkcmVxdWlyZWQgYXMgJGs9PiR2KQoJCXsKCQkJaWYoIWlzc2V0KCRyZXF1ZXN0WyRrXSkpCgkJCXsKCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZ1Jlc3BvbnNlKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwiTGltZSBMaWdodCBJUE46IE1pc3NpbmcgcmVxdWlyZWQgZmllbGQgeyRyZXF1aXJlZFska119Iik7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNhbm5vdCBwcm9jZXNzIExpbWUgTGlnaHQgbm90aWZpY2F0aW9uIHdpdGhvdXQgYSB7JHZ9ICh7JGt9KSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJLy8gY29udmVydCAzLWFscGhhIGNvdW50cnkgY29kZXMgdG8gMi1hbHBoYSBjb3VudHJ5IGNvZGVzCgkJaWYoaXNzZXQoJHJlcXVlc3RbJ2JpbGxpbmdfY291bnRyeSddKSkKCQl7CgkJCSRyZXF1ZXN0WydiaWxsaW5nX2NvdW50cnknXSA9IE1NX0NvdW50cnlVdGlsczo6Y29udmVydElTTzMoJHJlcXVlc3RbJ2JpbGxpbmdfY291bnRyeSddKTsKCQl9CgkJCgkJaWYoaXNzZXQoJHJlcXVlc3RbJ3NoaXBwaW5nX2NvdW50cnknXSkpCgkJewoJCQkkcmVxdWVzdFsnc2hpcHBpbmdfY291bnRyeSddID0gTU1fQ291bnRyeVV0aWxzOjpjb252ZXJ0SVNPMygkcmVxdWVzdFsnc2hpcHBpbmdfY291bnRyeSddKTsKCQl9CgkJCgkJJGFjdGlvbklkID0gJHJlcXVlc3RbJ2FjdGlvbl9pZCddOwoJCQoJCS8vIGNoZWNrIGZvciBkdXBsaWNhdGUgSVBOIGJlZm9yZSBjb250aW51aW5nIG9uIGluaXRpYWwgYmlsbGluZ3MgYW5kIHJlYmlsbHMuIHdlJ3JlIG5vdCBjaGVja2luZwoJCS8vIGZvciBkdXBsaWNhdGVzIG9uIGNhbmNlbGxhdGlvbiBvciByZWFjdGl2YXRpb24gYmVpbmcgaXNzdWVkIGJlY2F1c2UgTGltZSBMaWdodCBkb2Vzbid0CgkJLy8gcHJvdmlkZSBzdWZmaWNpZW50IGRhdGEgdG8gYmUgYWJsZSBkaXN0aW5ndWlzaCBiZXR3ZWVuIGxlZ2l0aW1hdGUgZHVwbGljYXRlIGV2ZW50cyBvZiB0aGlzIHR5cGUKCQkvLyBvbiB0aGUgc2FtZSBvcmRlci4KCQlpZigkYWN0aW9uSWQgPT0gImluaXRpYWwiIHx8ICRhY3Rpb25JZCA9PSAicmViaWxsIiB8fCAkYWN0aW9uSWQgPT0gInJlZnVuZCIgfHwgJGFjdGlvbklkID09ICJ2b2lkIikKCQl7CgkJCSRkdXBsaWNhdGVDaGVja1Jlc3BvbnNlID0gJHRoaXMtPmF0b21pY0R1cGxpY2F0ZUNoZWNrQW5kTG9nKCRyZXF1ZXN0KTsKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRkdXBsaWNhdGVDaGVja1Jlc3BvbnNlKSkKCQkJewoJCQkJaWYgKCFlbXB0eSgkcmVxdWVzdFsnb3AnXSkgJiYgKCRyZXF1ZXN0WydvcCddID09ICJjb25mIikpCgkJCQl7CgkJCQkJJHRoaXMtPnJlZGlyZWN0VG9Db25maXJtYXRpb25QYWdlKCRyZXF1ZXN0KTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nUmVzcG9uc2UoTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCJMaW1lIExpZ2h0IFByb2Nlc3MgTm90aWZpY2F0aW9uIChkdXBsaWNhdGUgSVBOIGRldGVjdGVkKSIpOwoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRHVwbGljYXRlIElQTiBkZXRlY3RlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQl9CgkJCgkJc3dpdGNoICgkYWN0aW9uSWQpCgkJewoJCQljYXNlICJpbml0aWFsIjoKCQkJCS8vIElmIHRoZSBvcmRlciBvcmlnaW5hdGVkIGZyb20gTU0sIExpbWUgTGlnaHQgd2lsbCBzdGlsbCBzZW5kIGEgbm90aWZpY2F0aW9uLiBJbiB0aGlzIGNhc2UsIHdlCgkJCQkvLyB3YW50IHRvIGlnbm9yZSB0aGUgSVBOCgkJCQkkZHVwbGljYXRlQ2hlY2tSZXNwb25zZSA9ICR0aGlzLT5pc0R1cGxpY2F0ZU9yZGVyKCRyZXF1ZXN0KTsKCQkJCWlmKCRkdXBsaWNhdGVDaGVja1Jlc3BvbnNlKQoJCQkJewoJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZ1Jlc3BvbnNlKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwiTGltZSBMaWdodCBQcm9jZXNzIE5vdGlmaWNhdGlvbjogSWdub3JlIElQTiAoZHVwbGljYXRlIG9yZGVyIGRldGVjdGVkKSIpOwoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSWdub3JlIElQTi4gRHVwbGljYXRlIG9yZGVyIGRldGVjdGVkLiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCSRyZXN1bHQgPSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjp0cmFuc2xhdGUoJHRoaXMtPmNyZWF0ZU9yZGVyc0Zyb21JUE4oJHJlcXVlc3QpKTsKCQkJCQkKCQkJCQlpZiAoIWVtcHR5KCRyZXF1ZXN0WydvcCddKSAmJiAoJHJlcXVlc3RbJ29wJ10gPT0gImNvbmYiKSkKCQkJCQl7CgkJCQkJCSR0aGlzLT5yZWRpcmVjdFRvQ29uZmlybWF0aW9uUGFnZSgkcmVxdWVzdCk7CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQlyZXR1cm4gJHJlc3VsdDsKCQkJCQl9CgkJCQl9CgkJCQlicmVhazsKCQkJCQoJCQljYXNlICJyZWJpbGwiOgoJCQkJcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OnRyYW5zbGF0ZSgkdGhpcy0+cHJvY2Vzc1JlYmlsbE5vdGlmaWNhdGlvbigkcmVxdWVzdCkpOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSAiY2FuY2VsIjoKCQkJCXJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjp0cmFuc2xhdGUoJHRoaXMtPnByb2Nlc3NDYW5jZWxsYXRpb25Ob3RpZmljYXRpb24oJHJlcXVlc3QpKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgImhvbGQiOgoJCQkJcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OnRyYW5zbGF0ZSgkdGhpcy0+cHJvY2Vzc0hvbGROb3RpZmljYXRpb24oJHJlcXVlc3QpKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgInJlc2V0X3JlY3VycmluZyI6CgkJCQlyZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6dHJhbnNsYXRlKCR0aGlzLT5wcm9jZXNzVW5jYW5jZWxsYXRpb25Ob3RpZmljYXRpb24oJHJlcXVlc3QpKTsKCQkJCWJyZWFrOwoKCQkJY2FzZSAidm9pZCI6CgkJCWNhc2UgInJlZnVuZCI6CgkJCQlyZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6dHJhbnNsYXRlKCR0aGlzLT5wcm9jZXNzUmVmdW5kTm90aWZpY2F0aW9uKCRyZXF1ZXN0KSk7CgkJCQlicmVhazsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJYnJlYWs7CQoJCX0KCX0KCQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gY3JlYXRlcyBhIGRhdGFiYXNlIG1hbmFnZWQgbG9jaywgY2hlY2tzIHRvIHNlZSBpZiBhbiBJUE4gaXMgYSBkdXBsaWNhdGUsIGxvZ3MgdGhlIG5ldyBJUE4sIGFuZCB0aGVuIHVubG9ja3MgdGhlIGRiCgkgKgoJICogQHBhcmFtIHN0cmluZyAkcmVxdWVzdCBUaGUgSVBOIHJlcXVlc3QsIHVzdWFsbHkgYnV0IG5vdCBhbHdheXMgdGhlIHNhbWUgYXMgJF9QT1NUCgkgKgoJICogQHJldHVybiBNTV9SZXNwb25zZSB3aXRoIHN0YXR1cyBzdWNjZXNzIGlmIHRoZSBJUE4gaXMgTk9UIGEgZHVwbGljYXRlLCBlcnJvciBvdGhlcndpc2UuIFRoZSBsb2dnZWQgSVBOJ3MgaWQgaXMgdGhlIG1lc3NhZ2UgaW4gYm90aCBjYXNlcwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gYXRvbWljRHVwbGljYXRlQ2hlY2tBbmRMb2coJHJlcXVlc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoKCQkkY3VzdG9tZXJfaWQgPSBpc3NldCgkcmVxdWVzdFsnY3VzdG9tZXJfaWQnXSk/JHJlcXVlc3RbJ2N1c3RvbWVyX2lkJ106IiI7CgkJJG9yZGVyX2lkID0gaXNzZXQoJHJlcXVlc3RbJ29yZGVyX2lkJ10pPyRyZXF1ZXN0WydvcmRlcl9pZCddOiIiOwoJCSRhY3Rpb25faWQgPSBpc3NldCgkcmVxdWVzdFsnYWN0aW9uX2lkJ10pPyRyZXF1ZXN0WydhY3Rpb25faWQnXToiIjsKCQkKCQlpZighZW1wdHkoJG9yZGVyX2lkKSAmJiAhZW1wdHkoJGFjdGlvbl9pZCkpCgkJewoJCQkvL3dhaXQgdXAgdG8gNSBzZWNzIHRvIGFjcXVpcmUgYW4gaXBuLXNwZWNpZmljIGxvY2sKCQkJJGxvY2tOYW1lID0gIm1tX2xpbWVsaWdodF9pcG5fbG9jay0iLm1kNSgieyRjdXN0b21lcl9pZH18eyRvcmRlcl9pZH18eyRhY3Rpb25faWR9Iik7CgkJCSRsb2NrQWNxdWlyZWQgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIENPQUxFU0NFKEdFVF9MT0NLKCd7JGxvY2tOYW1lfScsMTApLDApIik7CgkJCWlmICgkbG9ja0FjcXVpcmVkICE9ICIxIikKCQkJewoJCQkJJGlzRHVwbGljYXRlID0gdHJ1ZTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCS8vZHVwZSBjaGVjawoJCQkJJGlzRHVwbGljYXRlID0gJHRoaXMtPmlzRHVwbGljYXRlT3JkZXJJUE4oJHJlcXVlc3QpOwoJCQl9CgkJCgkJCS8vbG9nIHRoZSBpcG4KCQkJJGlwbkxvZ1Jlc3BvbnNlID0gc2VsZjo6bG9nSVBOKCRyZXF1ZXN0KTsKCQkJJGlwbkxvZ0lkID0gTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkaXBuTG9nUmVzcG9uc2UpPyRpcG5Mb2dSZXNwb25zZS0+bWVzc2FnZTpmYWxzZTsKCQkKCQkJLy9yZWxlYXNlIHRoZSBsb2NrCgkJCWlmICgkbG9ja0FjcXVpcmVkID09ICIxIikKCQkJewoJCQkJJHdwZGItPnF1ZXJ5KCJTRUxFQ1QgUkVMRUFTRV9MT0NLKCd7JGxvY2tOYW1lfScpIik7CgkJCX0KCQkKCQkJaWYgKCRpc0R1cGxpY2F0ZSkKCQkJewoJCQkJLy9kdXBlcyBjYXVzZSB0aGlzIGZ1bmN0aW9uIHRvIHJldHVybiBhbiBlcnJvciByZXNwb25zZQoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkaXBuTG9nSWQsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRpcG5Mb2dJZCk7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogRGV0ZWN0cyB3aGV0aGVyIHRoaXMgSVBOIGhhcyBiZWVuIHJlY2VpdmVkIG9yIG5vdCBmb3IgdGhpcyBwdXJjaGFzZSBwYXltZW50CgkgKgoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IFRoZSBJUE4gcmVxdWVzdC4gVGhpcyBpcyB1c3VhbGx5IGJ1dCBub3QgYWx3YXlzIHRoZSBzYW1lIGFzICRfUkVRVUVTVAoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhpcyBpcyBhIGR1cGxpY2F0ZSwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBpc0R1cGxpY2F0ZU9yZGVySVBOKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRjdXN0b21lcl9pZCA9IGlzc2V0KCRyZXF1ZXN0WydjdXN0b21lcl9pZCddKT8kcmVxdWVzdFsnY3VzdG9tZXJfaWQnXTpudWxsOwoJCSRvcmRlcl9pZCA9IGlzc2V0KCRyZXF1ZXN0WydvcmRlcl9pZCddKT8kcmVxdWVzdFsnb3JkZXJfaWQnXTpudWxsOwoJCSRhY3Rpb25faWQgPSBpc3NldCgkcmVxdWVzdFsnYWN0aW9uX2lkJ10pPyRyZXF1ZXN0WydhY3Rpb25faWQnXTpudWxsOwoJCQoJCSRkdXBlQ2hlY2tTUUwgPSAic2VsZWN0IGNvdW50KCopIGZyb20gIi5NTV9UQUJMRV9MSU1FTElHSFRfSVBOX0xPRy4gIiB3aGVyZSAob3JkZXJfaWQgPSAlcykgYW5kIChjdXN0b21lcl9pZCA9ICVzKSBhbmQgKGFjdGlvbl9pZCA9ICclcycpIjsKCQkkbnVtUmVjb3JkcyA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCRkdXBlQ2hlY2tTUUwsJG9yZGVyX2lkLCRjdXN0b21lcl9pZCwkYWN0aW9uX2lkKSk7CgkJcmV0dXJuICgkbnVtUmVjb3Jkcz4wKTsKCX0KCQoJCgkvKioKCSAqIERldGVjdHMgd2hldGhlciBhIE1lbWJlck1vdXNlIG9yZGVyIGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZCBmb3IgdGhlIGFzc29jaWF0ZWQgTGltZSBMaWdodCBvcmRlciBvciBub3QKCSAqCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgVGhlIElQTiByZXF1ZXN0LiBUaGlzIGlzIHVzdWFsbHkgYnV0IG5vdCBhbHdheXMgdGhlIHNhbWUgYXMgJF9SRVFVRVNUCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGlzIGlzIGEgZHVwbGljYXRlLCBmYWxzZSBvdGhlcndpc2UKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGlzRHVwbGljYXRlT3JkZXIoJHJlcXVlc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJJG9yZGVyX2lkID0gaXNzZXQoJHJlcXVlc3RbJ29yZGVyX2lkJ10pPyRyZXF1ZXN0WydvcmRlcl9pZCddOm51bGw7CgkJCgkJJGR1cGVDaGVja1NRTCA9ICJzZWxlY3QgY291bnQoKikgZnJvbSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9DSEFSR0VTLiAiIHdoZXJlIChjaGFyZ2VfaWQgPSAlcykiOwoJCSRudW1SZWNvcmRzID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGR1cGVDaGVja1NRTCwkb3JkZXJfaWQpKTsKCQlyZXR1cm4gKCRudW1SZWNvcmRzPjApOwoJfQoJCgkKCS8qKgoJICogTG9va3MgdXAgdGhlIG9yZGVyIHRoZW4gdGhlIHVzZXIgaXMgcmVkaXJlY3RlZCB0byB0aGUgY29uZmlybWF0aW9uIHBhZ2UgZm9yIHRoZSByZWZlcmVuY2VkIG9yZGVyCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGUgJF9SRVFVRVNUIHN1cGVyZ2xvYmFsLCB3aGljaCB3aWxsIGNvbnRhaW5zIHRoZSBJUE4KCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHJlZGlyZWN0VG9Db25maXJtYXRpb25QYWdlKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsKCgkJJG9yZGVySXRlbSA9ICR0aGlzLT5sb29rdXBPcmRlckl0ZW1Gcm9tTGltZUxpZ2h0T3JkZXIoJHJlcXVlc3RbIm9yZGVyX2lkIl0pOwoJCQoJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQl7CgkJCSR1c2VySWQgPSBNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQoJCQlpZigkdXNlcklkICE9IC0xKQoJCQl7CgkJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCR1c2VySWQpOwoJCQkJCgkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9VU0VSX0lELCAkdXNlci0+Z2V0SWQoKSk7CgkJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkJJGNvbmZpcm1hdGlvblVybCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmdldENvbmZpcm1hdGlvblVybEZvck9yZGVyKCRvcmRlcik7CgkJCQkJaWYgKCRjb25maXJtYXRpb25VcmwgIT09IGZhbHNlKQoJCQkJCXsKCQkJCQkJd3BfcmVkaXJlY3QoJGNvbmZpcm1hdGlvblVybCk7CgkJCQkJCWV4aXQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCQoJCWV4aXQ7Cgl9CgkKCQoJLyoqCgkgKiBQcm9jZXNzIG5vdGlmaWNhdGlvbiBvZiBhIHJlYmlsbCBmcm9tIExpbWUgTGlnaHQKCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0CgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwcm9jZXNzUmViaWxsTm90aWZpY2F0aW9uKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsgIAoJCSRzdWJzY3JpcHRpb25JZCA9ICIiOwoJCSRzdWJzY3JpcHRpb25JZHMgPSBleHBsb2RlKCIsIiwgJHJlcXVlc3RbJ3N1YnNjcmlwdGlvbl9pZHMnXSk7CgkJCgkJaWYoJHN1YnNjcmlwdGlvbklkcyAhPT0gZmFsc2UgJiYgaXNfYXJyYXkoJHN1YnNjcmlwdGlvbklkcykpCgkJewoJCQkkc3Vic2NyaXB0aW9uSWQgPSAkc3Vic2NyaXB0aW9uSWRzWzBdOwoJCX0KCQkKCQkkcHJvZHVjdElkID0gIiI7CgkJJHByb2R1Y3RJZHMgPSBleHBsb2RlKCIsIiwgJHJlcXVlc3RbInByb2R1Y3RfaWRzIl0pOwoJCQoJCWlmKCRwcm9kdWN0SWRzICE9PSBmYWxzZSAmJiBpc19hcnJheSgkcHJvZHVjdElkcykpCgkJewoJCQkkcHJvZHVjdElkID0gJHByb2R1Y3RJZHNbMF07CgkJfQoJCXNlbGY6OmxvZ0lQTigkcmVxdWVzdCwgIlJlcXVlc3QgZnJvbSBMaW1lTGlnaHRDUk0gc3Vic2NyaXB0aW9uSWQ6ICIuJHN1YnNjcmlwdGlvbklkKTsKCQkKCQkkb3JkZXJJdGVtID0gJHRoaXMtPmxvb2t1cE9yZGVySXRlbUZyb21MaW1lTGlnaHRTdWJzY3JpcHRpb24oJHN1YnNjcmlwdGlvbklkKTsKCQlpZiAoaXNfbnVsbCgkb3JkZXJJdGVtKSkKCQl7CgkJCXNlbGY6OmxvZ0lQTigkcmVxdWVzdCwgIlVuYWJsZSB0byBwcm9jZXNzIExpbWUgTGlnaHQgcmVjdXJyaW5nIHBheW1lbnQgbm90aWZpY2F0aW9uOiBjb3VsZCBub3QgZmluZCBhIG1hdGNoaW5nIG9yZGVyLiIsIHNlbGY6OiRMT0dfTEVWRUxfV0FSTklORyk7IAoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyBMaW1lIExpZ2h0IHJlY3VycmluZyBwYXltZW50IG5vdGlmaWNhdGlvbjogY291bGQgbm90IGZpbmQgYSBtYXRjaGluZyBvcmRlciIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRvcmRlclN0YXR1cyA9ICRyZXF1ZXN0WyJvcmRlcl9zdGF0dXMiXTsKCQkKCQkvLyByZWJpbGwgd2FzIGRlY2xpbmVkLCBoYW5kbGUgb3ZlcmR1ZSBzdWJzY3JpcHRpb24KCQlpZigkb3JkZXJTdGF0dXMgIT0gIjEiKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJcGFyZW50OjpoYW5kbGVPdmVyZHVlU3Vic2NyaXB0aW9uSXRlbSgkb3JkZXJJdGVtKTsKCQkJCgkJCXNlbGY6OmxvZ0lQTigkcmVxdWVzdCwgIlJlYmlsbCBwYXltZW50IHdhcyBkZWNsaW5lZC4iLCBzZWxmOjokTE9HX0xFVkVMX1dBUk5JTkcpOwoJCQlNTV9EaWFnbm9zdGljTG9nOjpsb2dSZXNwb25zZShNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsIlJlYmlsbCBwYXltZW50IHdhcyBkZWNsaW5lZC4gTWFyayBvcmRlciBpdGVtIGFzIG92ZXJkdWUuIik7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJCgkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJc2VsZjo6bG9nSVBOKCRyZXF1ZXN0LCAiUmVxdWVzdCBmcm9tIExpbWUgTGlnaHQgaGFzIGJlZW4gbWFwcGVkIHRvIG9yZGVyOiAiLiRvcmRlci0+Z2V0SWQoKS4iLCBvcmRlciBpdGVtOiAiLiRvcmRlckl0ZW0tPmdldElkKCkpOwoJCQoJCS8vIHJldHJpZXZlIG1hdGNoaW5nIE1lbWJlck1vdXNlIHByb2R1Y3QKCQkkc3FsID0gIlNFTEVDVCBtZW1iZXJtb3VzZV9wcm9kdWN0X2lkIGZyb20gIi5NTV9UQUJMRV9MSU1FTElHSFRfUFJPRFVDVFMuIiB3aGVyZSAobGltZWxpZ2h0X2NhbXBhaWduX2lkPScwJyBPUiBsaW1lbGlnaHRfY2FtcGFpZ25faWQ9JXMpIEFORCBsaW1lbGlnaHRfcHJvZHVjdF9pZD0lcyI7CgkJJG1tUHJvZHVjdElkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHNxbCwkcmVxdWVzdFsiY2FtcGFpZ25faWQiXSwkcHJvZHVjdElkKSk7CgkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkbW1Qcm9kdWN0SWQpOwoJCWlmIChpc19udWxsKCRtbVByb2R1Y3RJZCkgfHwgISRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJewoJCQkvLyBza2lwIHByb2Nlc3NpbmcgcmViaWxsIHNpbmNlIHByb2R1Y3QgaXMgbm90IG1hcHBlZAoJCQlzZWxmOjpsb2dJUE4oJHJlcXVlc3QsICJTa2lwIHByb2Nlc3NpbmcgcmViaWxsIGJlY2F1c2UgTGltZSBMaWdodCBjYW1wYWlnbiBJRCB7JHJlcXVlc3RbImNhbXBhaWduX2lkIl19LCBwcm9kdWN0IElEIHskcHJvZHVjdElkfSBpcyBub3QgbGlua2VkIHRvIGEgTWVtYmVyTW91c2UgcHJvZHVjdCIsIHNlbGY6OiRMT0dfTEVWRUxfV0FSTklORyk7CgkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZ1Jlc3BvbnNlKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwiU2tpcCBwcm9jZXNzaW5nIHJlYmlsbCBiZWNhdXNlIExpbWUgTGlnaHQgY2FtcGFpZ24gSUQgeyRyZXF1ZXN0WyJjYW1wYWlnbl9pZCJdfSwgcHJvZHVjdCBJRCB7JHByb2R1Y3RJZH0gaXMgbm90IGxpbmtlZCB0byBhIE1lbWJlck1vdXNlIHByb2R1Y3QiKTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCQkKCQkkcHJvZHVjdEl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCSRvcmRlckl0ZW1Qcm9kdWN0SWQgPSBudWxsOwoJCWlmIChjb3VudCgkcHJvZHVjdEl0ZW1zKSA9PSAxKQoJCXsKCQkJJG9yZGVySXRlbSA9IHJlc2V0KCRwcm9kdWN0SXRlbXMpOwoJCQkkb3JkZXJJdGVtUHJvZHVjdElkID0gJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCk7CgkJfQoJCQoJCWlmKGlzX251bGwoJG9yZGVySXRlbVByb2R1Y3RJZCkpCgkJeyAKCQkJc2VsZjo6bG9nSVBOKCRyZXF1ZXN0LCAiU2tpcCBwcm9jZXNzaW5nIHJlYmlsbCBiZWNhdXNlIGEgTWVtYmVyTW91c2UgcHJvZHVjdCBjb3VsZCBub3QgYmUgZm91bmQgb24gdGhlIG9yaWdpbmFsIG9yZGVyIGl0ZW0uIiwgc2VsZjo6JExPR19MRVZFTF9XQVJOSU5HKTsKCQkJCgkJCS8vIHNraXAgcHJvY2Vzc2luZyByZWJpbGwgc2luY2UgcHJvZHVjdCBjb3VsZCBub3QgYmUgZm91bmQgb24gb3JpZ2luYWwgb3JkZXIgaXRlbQoJCQlNTV9EaWFnbm9zdGljTG9nOjpsb2dSZXNwb25zZShNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsIlNraXAgcHJvY2Vzc2luZyByZWJpbGwgYmVjYXVzZSBhIE1lbWJlck1vdXNlIHByb2R1Y3QgY291bGQgbm90IGJlIGZvdW5kIG9uIHRoZSBvcmlnaW5hbCBvcmRlciBpdGVtLiIpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfSAKCQkKCQkkZGF0YSA9IE1NX09yZGVyVXRpbHM6OmdldFJlYmlsbEFtb3VudHMoJG9yZGVyKTsKCQkKCQkvLyB1cGRhdGUgTGltZSBMaWdodCBjaGFyZ2VzIHRhYmxlCgkJJGxpbWVMaWdodENoYXJnZUlkID0gJHRoaXMtPmxvZ0xpbWVMaWdodENoYXJnZSgkb3JkZXIsICRvcmRlckl0ZW0tPmdldElkKCksICRyZXF1ZXN0WyJvcmRlcl9pZCJdLCAkcmVxdWVzdFsiY3VzdG9tZXJfaWQiXSwgJHN1YnNjcmlwdGlvbklkLAoJCQkJJHJlcXVlc3RbImNhbXBhaWduX2lkIl0sICRwcm9kdWN0SWQsICRyZXF1ZXN0WyJzaGlwcGluZ19pZCJdLCAkZGF0YVsicmViaWxsX3RvdGFsIl0pOwoJCQoJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJSZWN1cnJpbmcgcGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9LCBpdGVtOiB7JG9yZGVySXRlbS0+Z2V0RGVzY3JpcHRpb24oKX0iOwoJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtLT5nZXRJZCgpLCAkcmVxdWVzdFsib3JkZXJfdG90YWwiXSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULHRydWUsJHRoaXMtPmdldElkKCksJGxpbWVMaWdodENoYXJnZUlkLCR0cmFuc2FjdGlvbkRhdGUpOwoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpCgkJewoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCgkJCXNlbGY6OmxvZ0lQTigkcmVxdWVzdCwgIlByZXZpb3VzIG9yZGVyIGl0ZW0gaGFzIHN0YXR1cyBzZXQgdG8gU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVELiAiLiR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBzZWxmOjokTE9HX0xFVkVMX1dBUk5JTkcpOwoJCQlNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXJJdGVtcygkb3JkZXItPmdldEN1c3RvbWVyKCksIGFycmF5KCRvcmRlckl0ZW0pKTsgLy9yZWluc3RhdGUgYWNjZXNzCgkJfQoJCQoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZSkpCgkJewoJCQlzZWxmOjpsb2dJUE4oJHJlcXVlc3QsICJGYWlsZWQgd3JpdGluZyB0cmFuc2FjdGlvbiBsb2cgOiAiLmpzb25fZW5jb2RlKCR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlKSwgc2VsZjo6JExPR19MRVZFTF9XQVJOSU5HKTsKCQkJcmV0dXJuICR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlOwoJCX0gCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOyAKCX0gCgkKCS8qKgoJICogUHJvY2VzcyBub3RpZmljYXRpb24gb2YgYSB1bi1jYW5jZWxsYXRpb24gZnJvbSBMaW1lIExpZ2h0CgkgKgoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0CgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwcm9jZXNzVW5jYW5jZWxsYXRpb25Ob3RpZmljYXRpb24oJHJlcXVlc3QpCgl7CgkJJG9yZGVySXRlbSA9ICR0aGlzLT5sb29rdXBPcmRlckl0ZW1Gcm9tTGltZUxpZ2h0T3JkZXIoJHJlcXVlc3RbJ29yZGVyX2lkJ10pOwoJCWlmIChpc19udWxsKCRvcmRlckl0ZW0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgTGltZSBMaWdodCB1bi1jYW5jZWxsYXRpb246IGNvdWxkIG5vdCBmaW5kIGEgbWF0Y2hpbmcgb3JkZXIgaXRlbSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICgkb3JkZXJJdGVtLT5pc1JlY3VycmluZygpICYmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkpCgkJewoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCgkJfQoJCSR1c2VyID0gbmV3IE1NX1VzZXIoTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpKTsKCQlyZXR1cm4gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQWNjZXNzRnJvbU9yZGVySXRlbXMoJHVzZXIsIGFycmF5KCRvcmRlckl0ZW0pKTsKCX0KCQoJCgkvKioKCSAqIFByb2Nlc3Mgbm90aWZpY2F0aW9uIG9mIGEgY2FuY2VsbGF0aW9uIGZyb20gTGltZSBMaWdodAoJICoKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcHJvY2Vzc0NhbmNlbGxhdGlvbk5vdGlmaWNhdGlvbigkcmVxdWVzdCkKCXsKCQkkb3JkZXJJdGVtID0gJHRoaXMtPmxvb2t1cE9yZGVySXRlbUZyb21MaW1lTGlnaHRPcmRlcigkcmVxdWVzdFsnb3JkZXJfaWQnXSk7CgkJaWYgKGlzX251bGwoJG9yZGVySXRlbSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyBMaW1lIExpZ2h0IGNhbmNlbGxhdGlvbjogY291bGQgbm90IGZpbmQgYSBtYXRjaGluZyBvcmRlciBpdGVtIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmlzUmVjdXJyaW5nKCkgJiYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpICE9IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQl9CgkJCgkJcmV0dXJuIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCX0KCQoJCgkvKioKCSAqIFByb2Nlc3Mgbm90aWZpY2F0aW9uIG9mIGEgaG9sZCBmcm9tIExpbWUgTGlnaHQKCSAqCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHByb2Nlc3NIb2xkTm90aWZpY2F0aW9uKCRyZXF1ZXN0KQoJewoJCSRvcmRlckl0ZW0gPSAkdGhpcy0+bG9va3VwT3JkZXJJdGVtRnJvbUxpbWVMaWdodE9yZGVyKCRyZXF1ZXN0WydvcmRlcl9pZCddKTsKCQlpZiAoaXNfbnVsbCgkb3JkZXJJdGVtKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIExpbWUgTGlnaHQgY2FuY2VsbGF0aW9uOiBjb3VsZCBub3QgZmluZCBhIG1hdGNoaW5nIG9yZGVyIGl0ZW0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlyZXR1cm4gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6cmV2b2tlQWNjZXNzRm9yT3JkZXJJdGVtKCRvcmRlckl0ZW0pOwoJfQoJCgkKCS8qKgoJICogUHJvY2VzcyBub3RpZmljYXRpb24gb2YgYSB2b2lkIG9yIHJlZnVuZCBmcm9tIExpbWUgTGlnaHQKCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0CgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwcm9jZXNzUmVmdW5kTm90aWZpY2F0aW9uKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkbG9va3VwU1FMID0gIlNFTEVDVCBpZCBGUk9NICIuTU1fVEFCTEVfTElNRUxJR0hUX0NIQVJHRVMuIiBXSEVSRSBjaGFyZ2VfaWQ9JXMgTElNSVQgMSI7CgkJCgkJJG9yaWdpbmFsSVBOSUQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkbG9va3VwU1FMLCRyZXF1ZXN0WydvcmRlcl9pZCddKSk7CgkJaWYgKGlzX251bGwoJG9yaWdpbmFsSVBOSUQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kOiBDb3VsZCBub3QgZmluZCB0aGUgTGltZSBMaWdodCBvcmRlciIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vZmluZCB0aGUgbWF0Y2hpbmcgdHJhbnNhY3Rpb24KCQkkdHJhbnNhY3Rpb25Sb3cgPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIFdIRVJFIHBheW1lbnRfc2VydmljZV9pZD0lcyBBTkQgcGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZD0lcyIsJHRoaXMtPmdldElkKCksJG9yaWdpbmFsSVBOSUQpKTsKCQlpZiAoaXNfbnVsbCgkdHJhbnNhY3Rpb25Sb3cpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kOiBDb3VsZCBub3QgZmluZCB0aGUgbWF0Y2hpbmcgdHJhbnNhY3Rpb24gZm9yIHRoZSBMaW1lIExpZ2h0IGNoYXJnZSBiZWluZyByZWZ1bmRlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vaWYgdGhlIHRyYW5zYWN0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVmdW5kZWQsIGJhaWwKCQlpZiAoIWVtcHR5KCR0cmFuc2FjdGlvblJvdy0+cmVmdW5kX2lkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZDogdGhlIGRlc2lnbmF0ZWQgTGltZSBMaWdodCB0cmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlZnVuZGVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9jcmVhdGUgYSByZWZ1bmQgdHJhbnNhY3Rpb24KCQkkcmVmdW5kQW1vdW50ID0gKGlzc2V0KCRyZXF1ZXN0WyJyZWZ1bmRfYW1vdW50Il0pKSA/ICRyZXF1ZXN0WyJyZWZ1bmRfYW1vdW50Il06JHRyYW5zYWN0aW9uUm93LT5hbW91bnQ7CgkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUmVmdW5kIGZvciB0cmFuc2FjdGlvbiMgeyR0cmFuc2FjdGlvblJvdy0+aWR9IjsKCQkkcmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkdHJhbnNhY3Rpb25Sb3ctPm9yZGVyX2lkLAoJCQkJJHRyYW5zYWN0aW9uUm93LT5vcmRlcl9pdGVtX2lkLAoJCQkJJHJlZnVuZEFtb3VudCwKCQkJCSR0cmFuc2FjdGlvblJvdy0+Y3VycmVuY3ksCgkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwKCQkJCU1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUZVTkQsCgkJCQlmYWxzZSwKCQkJCSR0aGlzLT5nZXRJZCgpLAoJCQkJJG9yaWdpbmFsSVBOSUQsCgkJCQlNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwKCQkJCSR0cmFuc2FjdGlvblJvdy0+aWQpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXNwb25zZSkpCgkJewoJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoIlVQREFURSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIFNFVCByZWZ1bmRfaWQgPSAlcyBXSEVSRSBpZCA9ICVzIiwkcmVzcG9uc2UtPm1lc3NhZ2UsJHRyYW5zYWN0aW9uUm93LT5pZCkpOwoJCX0KCQkKCQkvL2lmIGV4ZWN1dGlvbiBnZXRzIGhlcmUsIGV2ZXJ5dGhpbmcgaXMgcHJvYmFibHkgb2sKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGFuIG9uZSBvciBtb3JlIG9yZGVycyBmcm9tIGFuIGluY29taW5nIElQTiByZXF1ZXN0LCBpZiBwb3NzaWJsZQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgVGhlIElQTiByZXF1ZXN0IHRvIGF0dGVtcHQgdG8gY3JlYXRlIGFuIG9yZGVyIGZyb20KCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNyZWF0ZU9yZGVyc0Zyb21JUE4oJHJlcXVlc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRvcmRlclN0YXR1cyA9ICRyZXF1ZXN0WydvcmRlcl9zdGF0dXMnXTsKCQkKCQlpZigkb3JkZXJTdGF0dXMgIT0gIjEiKQoJCXsKCQkJLy8gb3JkZXIgd2FzIGRlY2xpbmVkIHNvIGlnbm9yZSBJUE4KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCQkKCQkkbGxPcmRlcklkID0gJHJlcXVlc3RbJ29yZGVyX2lkJ107CgkJJGN1c3RvbWVySWQgPSAkcmVxdWVzdFsnY3VzdG9tZXJfaWQnXTsKCQkkY2FtcGFpZ25JZCA9ICRyZXF1ZXN0WydjYW1wYWlnbl9pZCddOwoJCSRwcm9kdWN0SWRzID0gZXhwbG9kZSgiLCIsICRyZXF1ZXN0Wydwcm9kdWN0X2lkcyddKTsKCQkkc3Vic2NyaXB0aW9uSWRzID0gZXhwbG9kZSgiLCIsICRyZXF1ZXN0WydzdWJzY3JpcHRpb25faWRzJ10pOwoJCQoJCSRmaXJzdE5hbWUgPSAkcmVxdWVzdFsnZmlyc3RfbmFtZSddOwoJCSRsYXN0TmFtZSAgPSAkcmVxdWVzdFsnbGFzdF9uYW1lJ107CgkJJGVtYWlsID0gJHJlcXVlc3RbJ2VtYWlsJ107CgkJJHBob25lID0gaXNzZXQoJHJlcXVlc3RbJ3Bob25lJ10pID8gJHJlcXVlc3RbInBob25lIl06IiI7CgkJJGlwQWRkcmVzcyA9IGlzc2V0KCRyZXF1ZXN0WydpcF9hZGRyZXNzJ10pID8gJHJlcXVlc3RbImlwX2FkZHJlc3MiXToiIjsKCQkKCQkkYmlsbGluZ0FkZHJlc3MxID0gaXNzZXQoJHJlcXVlc3RbJ2JpbGxpbmdfYWRkcmVzcyddKSA/ICRyZXF1ZXN0WyJiaWxsaW5nX2FkZHJlc3MiXToiIjsKCQkkYmlsbGluZ0NpdHkgPSBpc3NldCgkcmVxdWVzdFsnYmlsbGluZ19jaXR5J10pID8gJHJlcXVlc3RbImJpbGxpbmdfY2l0eSJdOiIiOwoJCSRiaWxsaW5nU3RhdGUgPSBpc3NldCgkcmVxdWVzdFsnYmlsbGluZ19zdGF0ZV9pZCddKSA/ICRyZXF1ZXN0WyJiaWxsaW5nX3N0YXRlX2lkIl06IiI7CgkJJGJpbGxpbmdTdGF0ZSA9IChlbXB0eSgkYmlsbGluZ1N0YXRlKSAmJiBpc3NldCgkcmVxdWVzdFsiYmlsbGluZ19zdGF0ZV9kZXNjIl0pKSA/ICRyZXF1ZXN0WyJiaWxsaW5nX3N0YXRlX2Rlc2MiXSA6ICRiaWxsaW5nU3RhdGU7CgkJJGJpbGxpbmdaaXBDb2RlID0gaXNzZXQoJHJlcXVlc3RbJ2JpbGxpbmdfemlwJ10pID8gJHJlcXVlc3RbImJpbGxpbmdfemlwIl06IiI7CgkJJGJpbGxpbmdDb3VudHJ5ID0gaXNzZXQoJHJlcXVlc3RbJ2JpbGxpbmdfY291bnRyeSddKSA/ICRyZXF1ZXN0WyJiaWxsaW5nX2NvdW50cnkiXToiIjsKCQkkYmlsbGluZ0FkZHJlc3MgPSBuZXcgTU1fQ3VzdG9tZXJBZGRyZXNzKCRmaXJzdE5hbWUsJGxhc3ROYW1lLCRiaWxsaW5nQWRkcmVzczEsIiIsJGJpbGxpbmdDaXR5LCRiaWxsaW5nU3RhdGUsJGJpbGxpbmdaaXBDb2RlLCIiLCRiaWxsaW5nQ291bnRyeSk7CgkJCgkJJHNoaXBwaW5nSWQgPSBpc3NldCgkcmVxdWVzdFsnc2hpcHBpbmdfaWQnXSkgPyAkcmVxdWVzdFsic2hpcHBpbmdfaWQiXToiIjsKCQkkc2hpcHBpbmdBZGRyZXNzMSA9IGlzc2V0KCRyZXF1ZXN0WydzaGlwcGluZ19hZGRyZXNzJ10pID8gJHJlcXVlc3RbInNoaXBwaW5nX2FkZHJlc3MiXToiIjsKCQkkc2hpcHBpbmdDaXR5ID0gaXNzZXQoJHJlcXVlc3RbJ3NoaXBwaW5nX2NpdHknXSkgPyAkcmVxdWVzdFsic2hpcHBpbmdfY2l0eSJdOiIiOwoJCSRzaGlwcGluZ1N0YXRlID0gaXNzZXQoJHJlcXVlc3RbJ3NoaXBwaW5nX3N0YXRlX2lkJ10pID8gJHJlcXVlc3RbInNoaXBwaW5nX3N0YXRlX2lkIl06IiI7CgkJJHNoaXBwaW5nU3RhdGUgPSAoZW1wdHkoJHNoaXBwaW5nU3RhdGUpICYmIGlzc2V0KCRyZXF1ZXN0WyJzaGlwcGluZ19zdGF0ZV9kZXNjIl0pKSA/ICRyZXF1ZXN0WyJzaGlwcGluZ19zdGF0ZV9kZXNjIl0gOiAkc2hpcHBpbmdTdGF0ZTsKCQkkc2hpcHBpbmdaaXBDb2RlID0gaXNzZXQoJHJlcXVlc3RbJ3NoaXBwaW5nX3ppcCddKSA/ICRyZXF1ZXN0WyJzaGlwcGluZ196aXAiXToiIjsKCQkkc2hpcHBpbmdDb3VudHJ5ID0gaXNzZXQoJHJlcXVlc3RbJ3NoaXBwaW5nX2NvdW50cnknXSkgPyAkcmVxdWVzdFsic2hpcHBpbmdfY291bnRyeSJdOiIiOwoJCSRzaGlwcGluZ0FkZHJlc3MgPSBuZXcgTU1fQ3VzdG9tZXJBZGRyZXNzKCRmaXJzdE5hbWUsJGxhc3ROYW1lLCRzaGlwcGluZ0FkZHJlc3MxLCIiLCRzaGlwcGluZ0NpdHksJHNoaXBwaW5nU3RhdGUsJHNoaXBwaW5nWmlwQ29kZSwiIiwkc2hpcHBpbmdDb3VudHJ5KTsKCQkKCQkkYWZmaWxpYXRlSWQgPSBpc3NldCgkcmVxdWVzdFsnYWZmaWxpYXRlJ10pID8gJHJlcXVlc3RbImFmZmlsaWF0ZSJdOiIiOwoJCSRzdWJhZmZpbGlhdGVJZCA9IGlzc2V0KCRyZXF1ZXN0WydzdWJfYWZmaWxpYXRlJ10pID8gJHJlcXVlc3RbInN1Yl9hZmZpbGlhdGUiXToiIjsKCQkKCQkvLyBpdGVyYXRlIG92ZXIgcHJvZHVjdHMgaW4gdGhlIG9yZGVyCgkJZm9yKCRpID0gMDsgJGkgPCBjb3VudCgkcHJvZHVjdElkcyk7ICRpKyspCgkJewoJCQkkcHJvZHVjdElkID0gJHByb2R1Y3RJZHNbJGldOwoJCQkkc3Vic2NyaXB0aW9uSWQgPSAkc3Vic2NyaXB0aW9uSWRzWyRpXTsKCQkJJGNyZWF0ZVJlc3BvbnNlID0gJHRoaXMtPl9fY3JlYXRlT3JkZXIoJGxsT3JkZXJJZCwgJGN1c3RvbWVySWQsICRjYW1wYWlnbklkLCAkcHJvZHVjdElkLCAkc3Vic2NyaXB0aW9uSWQsICRiaWxsaW5nQWRkcmVzcywgJHNoaXBwaW5nQWRkcmVzcywgJHNoaXBwaW5nSWQsICRmaXJzdE5hbWUsICRsYXN0TmFtZSwgJGVtYWlsLCAkcGhvbmUsICRhZmZpbGlhdGVJZCwgJHN1YmFmZmlsaWF0ZUlkLCAkaXBBZGRyZXNzKTsKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRjcmVhdGVSZXNwb25zZSkpCgkJCXsKCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZ1Jlc3BvbnNlKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwiTGltZSBMaWdodCBJUE46IGVycm9yIGNyZWF0aW5nIGxpbWVsaWdodCBvcmRlciMgeyRsbE9yZGVySWR9OiIuJGNyZWF0ZVJlc3BvbnNlLT5tZXNzYWdlKTsKCQkJCXJldHVybiAkY3JlYXRlUmVzcG9uc2U7CgkJCX0KCQl9CgkJCgkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nUmVzcG9uc2UoTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCJMaW1lIExpZ2h0IElQTjogY29tcGxldGVkIElQTiBjcmVhdGUgbWV0aG9kIik7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogX19jcmVhdGVPcmRlcigpIGlzIGFuIGludGVybmFsIG1ldGhvZCB0aGF0IGNyZWF0ZXMgYW4gb3JkZXIgdXNpbmcgTGltZSBMaWdodC1zdXBwbGllZCBwYXJhbWV0ZXJzLCBsb2dzIHRoZSBhcHByb3ByaWF0ZSBkYXRhCgkgKiBhbmQgYXBwbGllcyB0aGUgYXBwcm9wcmlhdGUgYWNjZXNzCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJGxsT3JkZXJJZCB0aGUgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBMaW1lIExpZ2h0IG9yZGVyCgkgKiBAcGFyYW0gc3RyaW5nICRjdXN0b21lcklkIHRoZSBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIExpbWUgTGlnaHQgY3VzdG9tZXIKCSAqIEBwYXJhbSBzdHJpbmcgJGNhbXBhaWduSWQgdGhlIExpbWUgTGlnaHQgY2FtcGFpZ24gSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmRlcgoJICogQHBhcmFtIHN0cmluZyAkcHJvZHVjdElkIHRoZSBMaW1lIExpZ2h0IHByb2R1Y3QgSUQgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmRlcgoJICogQHBhcmFtIHN0cmluZyAkc3Vic2NyaXB0aW9uSWQgdGhlIExpbWUgTGlnaHQgc3Vic2NyaXB0aW9uIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgb3JkZXIKCSAqIEBwYXJhbSBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzIHRoZSBiaWxsaW5nIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmRlcgoJICogQHBhcmFtIE1NX0N1c3RvbWVyQWRkcmVzcyAkc2hpcHBpbmdBZGRyZXNzIHRoZSBzaGlwcGluZyBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgb3JkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJHNoaXBwaW5nSWQgdGhlIElEIG9mIHRoZSBzaGlwcGluZyBtZXRob2QgYXBwbGllZCB0byB0aGUgb3JkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJGZpcnN0TmFtZSB0aGUgY3VzdG9tZXIncyBmaXJzdCBuYW1lIAoJICogQHBhcmFtIHN0cmluZyAkbGFzdE5hbWUgdGhlIGN1c3RvbWVyJ3MgbGFzdCBuYW1lIAoJICogQHBhcmFtIHN0cmluZyAkZW1haWwgdGhlIGN1c3RvbWVyJ3MgZW1haWwgYWRkcmVzcwoJICogQHBhcmFtIHN0cmluZyAkcGhvbmUgdGhlIGN1c3RvbWVyJ3MgcGhvbmUgbnVtYmVyCgkgKiBAcGFyYW0gc3RyaW5nICRhZmZpbGlhdGVJZCB0aGUgYWZmaWxpYXRlIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgb3JkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJHN1YmFmZmlsaWF0ZUlkIHRoZSBzdWItYWZmaWxpYXRlIElEIGFzc29jaWF0ZWQgd2l0aCB0aGUgb3JkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJGlwQWRkcmVzcyB0aGUgSVAgYWRkcmVzcyBhc3NvY2lhdGVkIHdpdGggdGhlIG9yZGVyCgkgKiAKCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBNTV9PcmRlciBvYmplY3Qgb24gc3VjY2VzcyBvciBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2Ugb24gZXJyb3IKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBfX2NyZWF0ZU9yZGVyKCRsbE9yZGVySWQsICRjdXN0b21lcklkLCAkY2FtcGFpZ25JZCwgJHByb2R1Y3RJZCwgJHN1YnNjcmlwdGlvbklkLCAkYmlsbGluZ0FkZHJlc3MsICRzaGlwcGluZ0FkZHJlc3MsICRzaGlwcGluZ0lkLCAkZmlyc3ROYW1lLCAkbGFzdE5hbWUsICRlbWFpbCwgJHBob25lLCAkYWZmaWxpYXRlSWQsICRzdWJhZmZpbGlhdGVJZCwgJGlwQWRkcmVzcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8gcmV0cmlldmUgbWF0Y2hpbmcgTWVtYmVyTW91c2UgcHJvZHVjdAoJCSRzcWwgPSAiU0VMRUNUIG1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgZnJvbSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9QUk9EVUNUUy4iIHdoZXJlIChsaW1lbGlnaHRfY2FtcGFpZ25faWQgPSAnMCcgT1IgbGltZWxpZ2h0X2NhbXBhaWduX2lkPSVzKSBBTkQgbGltZWxpZ2h0X3Byb2R1Y3RfaWQ9JXMiOwoJCSRtbVByb2R1Y3RJZCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCRzcWwsJGNhbXBhaWduSWQsJHByb2R1Y3RJZCkpOwoJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJG1tUHJvZHVjdElkKTsKCQlpZiAoaXNfbnVsbCgkbW1Qcm9kdWN0SWQpIHx8ICEkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCXsKCQkJLy8gc2tpcCBjcmVhdGluZyBvcmRlciBzaW5jZSBwcm9kdWN0IGlzIG5vdCBtYXBwZWQKCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nUmVzcG9uc2UoTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCJTa2lwIGNyZWF0aW5nIG9yZGVyIGJlY2F1c2UgTGltZSBMaWdodCBjYW1wYWlnbiBJRCB7JGNhbXBhaWduSWR9LCBwcm9kdWN0IElEIHskcHJvZHVjdElkfSBpcyBub3QgbGlua2VkIHRvIGEgTWVtYmVyTW91c2UgcHJvZHVjdCIpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCQoJCSR1c2VyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGVtYWlsKTsKCQlpZiAoISR1c2VyLT5pc1ZhbGlkKCkpIC8vdGhpcyBpcyBhIG5ldyBjdXN0b21lcgoJCXsKCQkJJHVzZXItPnNldEZpcnN0TmFtZSgkZmlyc3ROYW1lKTsKCQkJJHVzZXItPnNldExhc3ROYW1lKCRsYXN0TmFtZSk7CgkJCSR1c2VyLT5zZXRFbWFpbCgkZW1haWwpOwoJCQkkdXNlci0+c2V0UGhvbmUoJHBob25lKTsKCQkJJHVzZXItPnNldEZ1bGxCaWxsaW5nQWRkcmVzcygkYmlsbGluZ0FkZHJlc3MpOwoJCQkkdXNlci0+c2V0RnVsbFNoaXBwaW5nQWRkcmVzcygkc2hpcHBpbmdBZGRyZXNzKTsKCQkJJHVzZXItPmNvbW1pdERhdGEoKTsKCQl9CgkJCgkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCk7CgkJJG9yZGVyLT5zZXRDdXN0b21lcigkdXNlcik7CgkJJG9yZGVyLT5zZXRJUEFkZHJlc3MoJGlwQWRkcmVzcyk7CgkJJG9yZGVyLT5hZGRQcm9kdWN0KCRwcm9kdWN0KTsKCgkJJG9yZGVyLT5zZXRDdXJyZW5jeSgiVVNEIik7IC8vIExpbWUgTGlnaHQgb25seSBzdXBwb3J0cyBVU0QKCQkKCQkkb3JkZXItPnNldEJpbGxpbmdBZGRyZXNzKCRiaWxsaW5nQWRkcmVzcyk7CgkJaWYgKCRwcm9kdWN0LT5pc1NoaXBwYWJsZSgpKQoJCXsKCQkJJG9yZGVyLT5zZXRTaGlwcGFibGUodHJ1ZSk7CgkJCSRvcmRlci0+c2V0U2hpcHBpbmdBZGRyZXNzKCRzaGlwcGluZ0FkZHJlc3MpOwoJCQkKCQkJaWYoIWVtcHR5KCRzaGlwcGluZ0lkKSkKCQkJewoJCQkJLy8gcmV0cmlldmUgbWF0Y2hpbmcgTWVtYmVyTW91c2Ugc2hpcHBpbmcgbWV0aG9kCgkJCQkkc3FsID0gIlNFTEVDVCBtZW1iZXJtb3VzZV9zaGlwcGluZ19vcHRpb25fa2V5IGZyb20gIi5NTV9UQUJMRV9MSU1FTElHSFRfU0hJUFBJTkdfTUVUSE9EUy4iIHdoZXJlIGxpbWVsaWdodF9zaGlwcGluZ19tZXRob2RfaWQ9JXMiOwoJCQkJJG1tU2hpcHBpbmdPcHRpb25LZXkgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkc3FsLCRzaGlwcGluZ0lkKSk7CgkJCQkKCQkJCWlmICgkbW1TaGlwcGluZ09wdGlvbktleSkKCQkJCXsKCQkJCQkkb3JkZXItPnNldFNoaXBwaW5nTWV0aG9kRnJvbUtleSgkbW1TaGlwcGluZ09wdGlvbktleSk7CgkJCQl9CgkJCX0KCQl9CgkJJG9yZGVyLT5zZXRQYXltZW50TWV0aG9kKCR0aGlzKTsKCQkKCQkvL2FkZCBhZmZpbGlhdGUgaW5mbwoJCWlmICghZW1wdHkoJGFmZmlsaWF0ZUlkKSkKCQl7CgkJCSRvcmRlci0+c2V0QWZmaWxpYXRlSWQoJGFmZmlsaWF0ZUlkKTsKCQl9CgkJCgkJaWYgKCFlbXB0eSgkc3ViYWZmaWxpYXRlSWQpKQoJCXsKCQkJJG9yZGVyLT5zZXRTdWJBZmZpbGlhdGVJZCgkc3ViYWZmaWxpYXRlSWQpOwoJCX0KCQkKCQkkb3JkZXItPnNldE9yZGVyU3RhdHVzKE1NX09SREVSOjokUEFJRF9DT01QTEVURSk7CgkJJG9yZGVyQ3JlYXRpb25SZXNwb25zZSA9ICRvcmRlci0+Y29tbWl0RGF0YSgpOwoJCQoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkb3JkZXJDcmVhdGlvblJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkb3JkZXJDcmVhdGlvblJlc3BvbnNlOwoJCX0KCQkKCQkkcHJvZHVjdEl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCSRvcmRlckl0ZW1JZCA9IG51bGw7CgkJaWYgKGNvdW50KCRwcm9kdWN0SXRlbXMpID09IDEpCgkJewoJCQkkb3JkZXJJdGVtID0gcmVzZXQoJHByb2R1Y3RJdGVtcyk7CgkJCSRvcmRlckl0ZW1JZCA9ICRvcmRlckl0ZW0tPmdldElkKCk7CgkJfQoJCQoJCS8vIHN0b3JlIG9yZGVyIElEIGFzIGNhcmQtb24tZmlsZSBJRAoJCSR0aGlzLT51cGRhdGVDYXJkT25GaWxlKCRvcmRlciwgJGxsT3JkZXJJZCk7CgkJCgkJLy8gbWFyayBvcmRlciBpdGVtIGFzIHJlY3VycmluZwoJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkgJiYgJHByb2R1Y3QtPmlzUmVjdXJyaW5nKCkpCgkJewoJCQkvL2luIG90aGVyIHNlcnZpY2VzIHRoaXMgaXMgZG9uZSBhZnRlciBwYXltZW50IGlzIHJlY2VpdmVkLCBob3dldmVyIHdpdGggTGltZSBMaWdodCwgcGF5bWVudCBoYXBwZW5zIHByaW9yIHRvIG9yZGVyIGNyZWF0aW9uIHNvIHdlIHNldCB0aGUgc3RhdHVzIGluIHRoaXMgcHJvY2VzcwoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQl9CgkJCgkJLy8gdXBkYXRlIGxpbWUgbGlnaHQgY2hhcmdlcyB0YWJsZQoJCSRsaW1lTGlnaHRDaGFyZ2VJZCA9ICR0aGlzLT5sb2dMaW1lTGlnaHRDaGFyZ2UoJG9yZGVyLCAkb3JkZXJJdGVtSWQsICRsbE9yZGVySWQsICRjdXN0b21lcklkLCAkc3Vic2NyaXB0aW9uSWQsIAoJCQkJJGNhbXBhaWduSWQsICRwcm9kdWN0SWQsICRzaGlwcGluZ0lkLCAkb3JkZXItPmdldFRvdGFsKCkpOwoJCQoJCS8vIG5vdyBsb2cgdGhlIHBheW1lbnQgaW4gdGhlIHRyYW5zYWN0aW9ucyB0YWJsZQoJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0iOwoJCSRyZXMgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkb3JkZXItPmdldElkKCksICRvcmRlckl0ZW1JZCwgJG9yZGVyLT5nZXRUb3RhbCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCx0cnVlLCR0aGlzLT5pZCwkbGltZUxpZ2h0Q2hhcmdlSWQsJHRyYW5zYWN0aW9uRGF0ZSk7CgkJCgkJLy9ub3cgYXNzaWduIGFueSBhY2Nlc3MgZ3JhbnRlZCBieSB0aGUgb3JkZXIKCQkkYWNjZXNzUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXIoJG9yZGVyKTsKCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGFjY2Vzc1Jlc3BvbnNlKSkKCQl7CgkJCSRhY2Nlc3NSZXNwb25zZS0+bWVzc2FnZSA9ICJFcnJvciBhc3NpZ25pbmcgYWNjZXNzIG9yZGVyIHdpdGggb3JkZXIgaWQgeyRvcmRlci0+Z2V0SWQoKX06IHskYWNjZXNzUmVzcG9uc2UtPm1lc3NhZ2V9IjsKCQkJcmV0dXJuICRhY2Nlc3NSZXNwb25zZTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkb3JkZXIpOwoJfQoJCgkvKioKCSAqIExvZ3MgYSBMaW1lIExpZ2h0IElQTiByZXF1ZXN0LgoJICoKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGlzIGlzIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIElQTiB2YXJpYWJsZXMsIHR5cGljYWxseSBpZGVudGljYWwgdG8gJF9QT1NUCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGlkIG9mIHRoZSByb3cgaW4gdGhlIElQTiBsb2cgdGFibGUgaWYgc3VjY2Vzc2Z1bCwgb3IgYW4gZXJyb3IgbWVzc2FnZSBpZiBmYWlsZWQKCSAqLwoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gbG9nSVBOKCRyZXF1ZXN0LCAkbWVzc2FnZT1udWxsLCAkbG9nTGV2ZWw9IiIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICgkbG9nTGV2ZWwgPT0gIiIpCgkJewoJCSAgICAkbG9nTGV2ZWwgPSBzZWxmOjokTE9HX0xFVkVMX0lORk87CgkJfQoJCSRpcG5EYXRhID0gYXJyYXkoIm9yZGVyX2lkIiAgICAgIAkJPT4gJHJlcXVlc3RbJ29yZGVyX2lkJ10sCgkJCQkJCSAib3JkZXJfc3RhdHVzIiAgICAgCT0+ICRyZXF1ZXN0WydvcmRlcl9zdGF0dXMnXSwKCQkJCQkJICJvcmRlcl90b3RhbCIgICAgICAgCT0+ICRyZXF1ZXN0WydvcmRlcl90b3RhbCddLAoJCQkJCQkgInJlZnVuZF9hbW91bnQiICAgICAgIAk9PiBpc3NldCgkcmVxdWVzdFsncmVmdW5kX2Ftb3VudCddKSA/ICRyZXF1ZXN0WyJyZWZ1bmRfYW1vdW50Il0gOiAiIiwKCQkJCQkJICJlbWFpbCIgICAgICAgCQkJPT4gJHJlcXVlc3RbJ2VtYWlsJ10sCgkJCQkJCSAiY3VzdG9tZXJfaWQiICAgIAkJPT4gJHJlcXVlc3RbJ2N1c3RvbWVyX2lkJ10sCgkJCQkJCSAiY2FtcGFpZ25faWQiICAgICAgICAJPT4gJHJlcXVlc3RbJ2NhbXBhaWduX2lkJ10sCgkJCQkJCSAicHJvZHVjdF9pZHMiICAgICAgICAJPT4gJHJlcXVlc3RbJ3Byb2R1Y3RfaWRzJ10sCgkJCQkJCSAic2hpcHBpbmdfaWQiIAkJCT0+ICRyZXF1ZXN0WydzaGlwcGluZ19pZCddLAoJCQkJCQkgInN1YnNjcmlwdGlvbnNfYWN0aXZlIgk9PiBpc3NldCgkcmVxdWVzdFsnc3Vic2NyaXB0aW9uc19hY3RpdmUnXSkgPyAkcmVxdWVzdFsnc3Vic2NyaXB0aW9uc19hY3RpdmUnXSA6ICIiLAoJCQkJCQkgInN1YnNjcmlwdGlvbl9pZHMiICAgCT0+ICRyZXF1ZXN0WydzdWJzY3JpcHRpb25faWRzJ10sCgkJCQkJCSAiYWN0aW9uX2lkIiAgICAgIAkJPT4gJHJlcXVlc3RbJ2FjdGlvbl9pZCddLAoJCQkJCQkgImFmZmlsaWF0ZV9pZCIgICAgICAgICA9PiAkcmVxdWVzdFsnYWZmaWxpYXRlJ10sCgkJCQkJCSAic3ViYWZmaWxpYXRlX2lkIiAgIAk9PiAkcmVxdWVzdFsnc3ViX2FmZmlsaWF0ZSddLAoJCQkJCQkgImlwX2FkZHJlc3MiICAgICAgICAgCT0+ICRyZXF1ZXN0WydpcF9hZGRyZXNzJ10sCgkJCQkJCSAibG9nX2xldmVsIgkJCT0+ICRsb2dMZXZlbAoJCSk7CgkJCgkJaWYoIWlzX251bGwoJG1lc3NhZ2UpKXsKCQkJJGlwbkRhdGFbIm1lc3NhZ2UiXSA9ICRtZXNzYWdlOwoJCX0KCQllbHNlewoJCQkkaXBuRGF0YVsibWVzc2FnZSJdID0gIk9yZGVyICgiLiRyZXF1ZXN0WydvcmRlcl9pZCddLiIpIGNhbGxiYWNrIGZvciBhY3Rpb24gIi4kcmVxdWVzdFsnYWN0aW9uX2lkJ107CgkJfQoJCQoJCSRpcG5EYXRhWydkYXRlX3JlY2VpdmVkJ10gPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkkcmVzdWx0ID0gJHdwZGItPmluc2VydChNTV9UQUJMRV9MSU1FTElHSFRfSVBOX0xPRywkaXBuRGF0YSk7CgkJaWYgKCRyZXN1bHQgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGxvZyBMaW1lIExpZ2h0IElQTiB0byB0aGUgZGF0YWJhc2UiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCR3cGRiLT5pbnNlcnRfaWQpOwoJfQoJCgkvKiogCgkgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBjdXN0b21zIGFjdGlvbnMgdG8gYWRkIHRvIGVhY2ggcm93IG9mIHRoZSB0cmFuc2FjdGlvbnMgcGFnZS4KCSAqIAoJICogQHBhcmFtICR0cmFuc2FjdGlvbklkIHRoZSBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIHRyYW5zYWN0aW9uCgkgKiAKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmdldFRyYW5zYWN0aW9uUGFnZUFjdGlvbnMoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0VHJhbnNhY3Rpb25QYWdlQWN0aW9ucygkdHJhbnNhY3Rpb25JZCkgCgl7IAoJCSR0cmFuc2FjdGlvbkxvb2t1cFJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmdldFRyYW5zYWN0aW9uSW5mbygkdHJhbnNhY3Rpb25JZCk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCR0cmFuc2FjdGlvbkxvb2t1cFJlc3BvbnNlKSkKCQl7CgkJCS8vIGNvdWxkbid0IGxvY2F0ZSB0cmFuc2FjdGlvbgoJCQlyZXR1cm4gIiI7CgkJfQoJCQoJCSR0cmFuc2FjdGlvblJvdyA9ICR0cmFuc2FjdGlvbkxvb2t1cFJlc3BvbnNlLT5tZXNzYWdlOwoJCQoJCS8vIGxvb2t1cCBMaW1lIExpZ2h0IG9yZGVyIElECgkJZ2xvYmFsICR3cGRiOwoJCSRsb29rdXBTUUwgPSAiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9DSEFSR0VTLiIgV0hFUkUgaWQgPSAlcyI7CgkJJGxpbWVMaWdodENoYXJnZUluZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgkbG9va3VwU1FMLCR0cmFuc2FjdGlvblJvdy0+cGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCkpOwoJCQkJCgkJaWYoJGxpbWVMaWdodENoYXJnZUluZm8pCgkJewoJCQkkdXJsID0gJHRoaXMtPmdldFVSTCgpOwoJCQkkdXJsIC49ICIvYWRtaW4vb3JkZXJzLnBocD9zaG93X2RldGFpbHM9c2hvd19kZXRhaWxzPXNob3dfZGV0YWlscyZzaG93X2ZvbGRlcj12aWV3X2FsbCZmcm9tUG9zdD0xJmFjdD0mcGFnZT0wJnNob3dfYnlfaWQ9IjsKCQkJJHVybCAuPSAkbGltZUxpZ2h0Q2hhcmdlSW5mby0+Y2hhcmdlX2lkOwoJCQkKCQkJcmV0dXJuICI8YSBocmVmPVwieyR1cmx9XCIgdGFyZ2V0PVwiX2JsYW5rXCIgdGl0bGU9XCJWaWV3IG9yZGVyIGluIExpbWUgTGlnaHRcIj4iLk1NX1V0aWxzOjpnZXRJY29uKCdzaGFyZS1zcXVhcmUnLCAnYmx1ZScsICcxLjNlbScsICcxcHgnKS4iPC9hPiI7CgkJfQoJCQoJCXJldHVybiAiIjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldExvZ2dpbmdPcmRlclVybCgkb3JkZXJJZCkKCXsKCQkkdXJsID0gJHRoaXMtPmdldFVSTCgpOwoJCSR1cmwgLj0gIi9hZG1pbi9vcmRlcnMucGhwP3Nob3dfZGV0YWlscz1zaG93X2RldGFpbHM9c2hvd19kZXRhaWxzJnNob3dfZm9sZGVyPXZpZXdfYWxsJmZyb21Qb3N0PTEmYWN0PSZwYWdlPTAmc2hvd19ieV9pZD0iLiRvcmRlcklkOwoJCXJldHVybiAiPGEgaHJlZj1cInskdXJsfVwiIHRhcmdldD1cIl9ibGFua1wiIHRpdGxlPVwiVmlldyBvcmRlciBpbiBMaW1lIExpZ2h0XCI+Ii4kb3JkZXJJZC4iPC9hPiI7CQkKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TG9nZ2luZ0N1c3RvbWVyVXJsKCRjdXN0b21lcklkKQoJewoJCSR1cmwgPSAkdGhpcy0+Z2V0VVJMKCk7CgkJJHVybCAuPSAiL2FkbWluL2N1c3RvbWVycy9kZXRhaWxzLnBocD9pZD0iLiRjdXN0b21lcklkOwoJCXJldHVybiAiPGEgaHJlZj1cInskdXJsfVwiIHRhcmdldD1cIl9ibGFua1wiIHRpdGxlPVwiVmlldyBjdXN0b21lciBpbiBMaW1lIExpZ2h0XCI+Ii4kY3VzdG9tZXJJZC4iPC9hPiI7CQkKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEFQSVVzZXJuYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFwaVVzZXJuYW1lOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBUElVc2VybmFtZSgkYXBpVXNlcm5hbWUpCgl7CgkJJHRoaXMtPmFwaVVzZXJuYW1lID0gJGFwaVVzZXJuYW1lOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRVUkwoKQoJewoJCXJldHVybiAkdGhpcy0+dXJsOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRVUkwoJHVybCkKCXsKCQlpZihzdWJzdHIoJHVybCwgLTEpID09ICIvIikKCQl7CgkJCSR0aGlzLT51cmwgPSBzdWJzdHIoJHVybCwgMCwgc3RybGVuKCR1cmwpLTEpOwoJCX0KCQllbHNlCgkJewoJCQkkdGhpcy0+dXJsID0gJHVybDsKCQl9CgkJCgkJLy8gbWFrZSBzdXJlIFVSTCBpcyBzZWN1cmUKCQlpZihzdHJpcG9zKCR0aGlzLT51cmwsICJodHRwcyIpID09PSBmYWxzZSkKCQl7CgkJCSR0aGlzLT51cmwgPSBwcmVnX3JlcGxhY2UoIi8oaHR0cFw6KS8iLCAiaHR0cHM6IiwgJHRoaXMtPnVybCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRNZW1iZXJzaGlwQVBJKCRhcGlDYWxsKQoJewoJCXJldHVybiAkdGhpcy0+Z2V0VVJMKCkuIi9hZG1pbi9tZW1iZXJzaGlwLnBocD91c2VybmFtZT17JHRoaXMtPmdldEFQSVVzZXJuYW1lKCl9JnBhc3N3b3JkPXskdGhpcy0+Z2V0QVBJUGFzc3dvcmQoKX0mbWV0aG9kPXskYXBpQ2FsbH0iOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbkFQSSgkYXBpQ2FsbCkKCXsKCQlyZXR1cm4gJHRoaXMtPmdldFVSTCgpLiIvYWRtaW4vdHJhbnNhY3QucGhwP3VzZXJuYW1lPXskdGhpcy0+Z2V0QVBJVXNlcm5hbWUoKX0mcGFzc3dvcmQ9eyR0aGlzLT5nZXRBUElQYXNzd29yZCgpfSZtZXRob2Q9eyRhcGlDYWxsfSI7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEFQSVBhc3N3b3JkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFwaVBhc3N3b3JkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBUElQYXNzd29yZCgkYXBpUGFzc3dvcmQpCgl7CgkJJHRoaXMtPmFwaVBhc3N3b3JkID0gJGFwaVBhc3N3b3JkOwoJfQoJCgkKCS8qKgoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6ZG9IVFRQUmVxdWVzdCgpCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBkb0hUVFBSZXF1ZXN0KCRyZW1vdGVVcmwsICRtZXRob2Q9IlBPU1QiLCAkZGF0YT0iIiwgJG9wdGlvbnM9YXJyYXkoKSkKCXsJCgkJLy8gcGFzc2luZyBhbiBlbXB0eSBhcnJheSBmb3IgJG9wdGlvbnMgaW5zdGVhZCBvZiBwYXNzaW5nIHRoZSBvcHRpb25zIHRocm91Z2ggYmVjYXVzZSB3ZSdyZQoJCS8vIG92ZXJyaWRpbmcgdGhlIG9wdGlvbnMgYXJyYXkgdG8gYmUgdXNlZCB0byBpbmRpY2F0ZSBpZiB0aGVyZSBhcmUgYW55IEpTT04gZmllbGRzIGluIHRoZSByZXN1bHRzCgkJJHJlc3BvbnNlID0gcGFyZW50Ojpkb0hUVFBSZXF1ZXN0KCRyZW1vdGVVcmwsJG1ldGhvZCwkZGF0YSxhcnJheSgpKTsKCQkkb3BTdGF0dXMgPSBNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXNwb25zZSk7CgkJJG9wU3RhdHVzID0gKCRvcFN0YXR1cyAmJiAoKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSAmJiAoJHJlc3BvbnNlLT5nZXREYXRhKCJodHRwX2NvZGUiKSAhPSAiNDAzIikpKTsgLy9mb3JiaWRkZW4gc3RhdHVzIGlzIGEgZmFpbHVyZSwgYnV0IHJldHVybnMgYSByZXN1bHQgCgkJCgkJaWYoISRvcFN0YXR1cykKCQl7CgkJCSRyZXNwb25zZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJCQoJCSRqc29uRmllbGRzID0gYXJyYXkoKTsKCQlpZihpc3NldCgkb3B0aW9uc1sianNvbl9maWVsZHMiXSkpCgkJewoJCQkkanNvbkZpZWxkcyA9IGV4cGxvZGUoIiwiLCAkb3B0aW9uc1sianNvbl9maWVsZHMiXSk7CgkJfQoJCQoJCS8vIExpbWUgTGlnaHQgcmV0dXJucyBkYXRhIGFzIGEgc3RyaW5nIG9mIG5hbWUvdmFsdWUgcGFpcnMgc2VwYXJhdGVkIGJ5ICYuCgkJLy8gUGFyc2UgdGhpcyBzdHJpbmcgdG8gdHVybiBpdCBpbnRvIGFuIGFycmF5IGtleWVkIGJ5IHRoZSBwYXJhbWV0ZXIgbmFtZXMuCgkJJHJhd0RhdGEgPSAkcmVzcG9uc2UtPm1lc3NhZ2U7CgkJJHByb2Nlc3NlZERhdGEgPSBhcnJheSgpOwoJCQoJCWlmKHByZWdfbWF0Y2goIi9bXCZdKy8iLCAkcmF3RGF0YSkpCgkJewoJCQkkaXRlbSA9IGV4cGxvZGUoIiYiLCRyYXdEYXRhKTsKCQkJCQoJCQlmb3IoJGk9MDsgJGk8Y291bnQoJGl0ZW0pOyAkaSsrKQoJCQl7CgkJCQkkcGFyYW1zID0gZXhwbG9kZSgiPSIsICRpdGVtWyRpXSk7CgkJCQkKCQkJCWlmKGlzc2V0KCRwYXJhbXNbMV0pKQoJCQkJewoJCQkJCWlmKGluX2FycmF5KCRwYXJhbXNbMF0sICRqc29uRmllbGRzKSkKCQkJCQl7CgkJCQkJCSRwcm9jZXNzZWREYXRhWyRwYXJhbXNbMF1dID0ganNvbl9kZWNvZGUoJHBhcmFtc1sxXSk7CgkJCQkJfQoJCQkJCWVsc2UgaWYocHJlZ19tYXRjaCgiL1tcLF0rLyIsICRwYXJhbXNbMV0pKQoJCQkJCXsKCQkJCQkJLy8gaGFzIGNvbW1hcywgY291bGQgcnVpbiBldmVuIHBhaXJpbmcgaWYgYm90Y2hlZC4KCQkJCQkJJHByb2Nlc3NlZERhdGFbJHBhcmFtc1swXV0gPSBNTV9VdGlsczo6ZXhwbG9kZSgiLCIsICRwYXJhbXNbMV0pOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkcHJvY2Vzc2VkRGF0YVskcGFyYW1zWzBdXSA9IHVybGRlY29kZSgkcGFyYW1zWzFdKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHByb2Nlc3NlZERhdGFbJHBhcmFtc1swXV0gPSAiIjsKCQkJCX0KCQkJfQoJCX0KCQllbHNlIGlmKHByZWdfbWF0Y2goIi8oXD0pLyIsICRyYXdEYXRhKSkKCQl7CgkJCSRwYXJhbXMgPSBleHBsb2RlKCI9IiwgJHJhd0RhdGEpOwoJCQoJCQlpZihpbl9hcnJheSgkcGFyYW1zWzBdLCAkanNvbkZpZWxkcykpCgkJCXsKCQkJCSRwcm9jZXNzZWREYXRhWyRwYXJhbXNbMF1dID0ganNvbl9kZWNvZGUoJHBhcmFtc1sxXSk7CgkJCX0KCQkJZWxzZSBpZihwcmVnX21hdGNoKCIvW1wsXSsvIiwgJHBhcmFtc1sxXSkpCgkJCXsKCQkJCS8vIGhhcyBjb21tYXMsIGNvdWxkIHJ1aW4gZXZlbiBwYWlyaW5nIGlmIGJvdGNoZWQuCgkJCQkkcHJvY2Vzc2VkRGF0YVskcGFyYW1zWzBdXSA9IE1NX1V0aWxzOjpleHBsb2RlKCIsIiwgJHBhcmFtc1sxXSk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkcHJvY2Vzc2VkRGF0YVskcGFyYW1zWzBdXSA9IHVybGRlY29kZSgkcGFyYW1zWzFdKTsKCQkJfQoJCX0KCQllbHNlIGlmKHByZWdfbWF0Y2goIi9bMC05XSsvIiwgdHJpbSgkcmF3RGF0YSkpKQoJCXsKCQkJJHByb2Nlc3NlZERhdGEgPSBhcnJheSgicmVzcG9uc2VfY29kZSI9PiRyYXdEYXRhKTsKCQl9CgkJZWxzZQoJCXsKCQkJJHByb2Nlc3NlZERhdGEgPSBmYWxzZTsKCQl9CgkJCgkJaWYgKCEkdGhpcy0+bGltZWxpZ2h0Q2FsbFN1Y2Nlc3NmdWwoJHByb2Nlc3NlZERhdGEpKQoJCXsKCQkJJHJlc3BvbnNlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQl9CgkJCgkJJHJlc3BvbnNlLT5tZXNzYWdlID0gJHByb2Nlc3NlZERhdGE7CgkJCgkJcmV0dXJuICRyZXNwb25zZTsKCX0KCQoJCgkvKioKCSAqIAoJICogQVBJIENBTEwgQ09OVkVOSUVOQ0UgTUVUSE9EUwoJICogCgkgKi8KCglwcm90ZWN0ZWQgZnVuY3Rpb24gdmFsaWRhdGVDcmVkZW50aWFscygpCgl7CgkJJHJlc3VsdCA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRNZW1iZXJzaGlwQVBJKCJ2YWxpZGF0ZV9jcmVkZW50aWFscyIpKTsKCgkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjb25uZWN0aW5nIHRvIExpbWUgTGlnaHQuIEludmFsaWQgY3JlZGVudGlhbHMuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIHJldHVybnMgYW4gYXJyYXkgb2YgY2FtcGFpZ25zIChpZCBhcyB0aGUga2V5LCBuYW1lIGFzIHRoZSB2YWx1ZSkKCSAqIAoJICogQHJldHVybiBBcnJheQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2FtcGFpZ25zKCkKCXsKCQkkcmVzdWx0ID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldE1lbWJlcnNoaXBBUEkoImNhbXBhaWduX2ZpbmRfYWN0aXZlIikpOwoJCgkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJewoJCQlyZXR1cm4gYXJyYXkoIjAiPT4iRXJyb3IgcmV0cmlldmluZyBMaW1lIExpZ2h0IGNhbXBhaWducyIpOwoJCX0KCQkKCQkvLyBwcm9jZXNzIHJlc3VsdHMKCQkkY2FtcGFpZ25zID0gYXJyYXkoKTsKCQkJCgkJZm9yKCRpID0gMDsgJGkgPCBjb3VudCgkcmVzdWx0LT5tZXNzYWdlWyJjYW1wYWlnbl9pZCJdKTsgJGkrKykKCQl7CgkJCSRjYW1wYWlnbnNbJHJlc3VsdC0+bWVzc2FnZVsiY2FtcGFpZ25faWQiXVskaV1dID0gJHJlc3VsdC0+bWVzc2FnZVsiY2FtcGFpZ25fbmFtZSJdWyRpXTsKCQl9CgoJCWFzb3J0KCRjYW1wYWlnbnMpOwoJCXJldHVybiAkY2FtcGFpZ25zOwoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgcmV0dXJucyBhbiBhcnJheSBvZiBwcm9kdWN0cyAoaWQgYXMgdGhlIGtleSwgbmFtZSBhcyB0aGUgdmFsdWUpCgkgKiAKCSAqIEByZXR1cm4gQXJyYXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3RzQnlDYW1wYWlnbigkY2FtcGFpZ25JZCkKCXsKCQkvLyBwcm9jZXNzIHJlc3VsdHMKCQkkcHJvZHVjdHMgPSBhcnJheSgpOwoJCWlmKGlzX2FycmF5KCRjYW1wYWlnbklkKSl7CgkJCSRleGlzdGluZ1Byb2R1Y3RzID0gYXJyYXkoKTsKCQkJZm9yZWFjaCgkY2FtcGFpZ25JZCBhcyAkaWQpewoJCQkJaWYoaW50dmFsKCRpZCk+MCl7CgkJCQkJJG5ld1Byb2R1Y3RzID0gJHRoaXMtPmdldENhbXBhaWduUHJvZHVjdHMoJGlkKTsgCgkJCQkJIAoJCQkJCWlmKGNvdW50KCRleGlzdGluZ1Byb2R1Y3RzKTw9MCkKCQkJCQl7CgkJCQkJCSRleGlzdGluZ1Byb2R1Y3RzID0gJG5ld1Byb2R1Y3RzOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlpZihjb3VudCgkbmV3UHJvZHVjdHMpPjApCgkJCQkJCXsKCQkJCQkJCSRzaW1pbGFyUHJvZHVjdHMgPSBhcnJheSgpOwoJCQkJCQkJZm9yZWFjaCgkbmV3UHJvZHVjdHMgYXMgJGtleT0+JHByb2R1Y3QpCgkJCQkJCQl7CgkJCQkJCQkJZm9yZWFjaCgkZXhpc3RpbmdQcm9kdWN0cyBhcyAka2V5Mj0+JHByb2R1Y3QyKQoJCQkJCQkJCXsKCQkJCQkJCQkJaWYoJGtleT09JGtleTIpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRzaW1pbGFyUHJvZHVjdHNbJGtleV0gPSAkcHJvZHVjdDI7CgkJCQkJCQkJCX0KCQkJCQkJCQl9ICAKCQkJCQkJCX0KCQkJCQkJCSRleGlzdGluZ1Byb2R1Y3RzID0gJHNpbWlsYXJQcm9kdWN0czsKCQkJCQkJfQoJCQkJCX0gCgkJCQl9CgkJCX0gCgkJCSRwcm9kdWN0cyA9ICRleGlzdGluZ1Byb2R1Y3RzOwoJCX0KCQllbHNlewoJCQkkcHJvZHVjdHMgPSAkdGhpcy0+Z2V0Q2FtcGFpZ25Qcm9kdWN0cygkY2FtcGFpZ25JZCk7CgkJfQoJCWFzb3J0KCRwcm9kdWN0cyk7CgkJcmV0dXJuICRwcm9kdWN0czsKCX0KCQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldENhbXBhaWduUHJvZHVjdHMoJGNhbXBhaWduSWQpCgl7CgkJJHJlc3VsdCA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRNZW1iZXJzaGlwQVBJKCJjYW1wYWlnbl92aWV3IiksICJQT1NUIiwgYXJyYXkoImNhbXBhaWduX2lkIj0+JGNhbXBhaWduSWQpKTsKCQkKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQl7CgkJCXJldHVybiBhcnJheSgiMCI9PiJFcnJvciByZXRyaWV2aW5nIExpbWUgTGlnaHQgcHJvZHVjdHMiKTsKCQl9CgkJCgkJLy8gcHJvY2VzcyByZXN1bHRzCgkJJHByb2R1Y3RzID0gYXJyYXkoKTsKCQkKCQlpZihpc19hcnJheSgkcmVzdWx0LT5tZXNzYWdlWyJwcm9kdWN0X2lkIl0pKQoJCXsKCQkJZm9yKCRpID0gMDsgJGkgPCBjb3VudCgkcmVzdWx0LT5tZXNzYWdlWyJwcm9kdWN0X2lkIl0pOyAkaSsrKQoJCQl7CgkJCSRwcm9kdWN0c1skcmVzdWx0LT5tZXNzYWdlWyJwcm9kdWN0X2lkIl1bJGldXSA9ICRyZXN1bHQtPm1lc3NhZ2VbInByb2R1Y3RfbmFtZSJdWyRpXTsKCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkkcHJvZHVjdHNbJHJlc3VsdC0+bWVzc2FnZVsicHJvZHVjdF9pZCJdXSA9ICRyZXN1bHQtPm1lc3NhZ2VbInByb2R1Y3RfbmFtZSJdOwoJCX0KCQlyZXR1cm4gJHByb2R1Y3RzOwoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgcmV0dXJucyBhIExpbWUgTGlnaHQgcHJvZHVjdAoJICogCgkgKiBAcGFyYW0gJHByb2R1Y3RJZCB0aGUgSUQgb2YgdGhlIExpbWUgTGlnaHQgcHJvZHVjdAoJICoKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3QoJHByb2R1Y3RJZCkKCXsKCQkkcmVzdWx0ID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldE1lbWJlcnNoaXBBUEkoInByb2R1Y3RfaW5kZXgiKSwgIlBPU1QiLCBhcnJheSgicHJvZHVjdF9pZCI9PiRwcm9kdWN0SWQpKTsKCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBMaW1lIExpZ2h0IHByb2R1Y3QiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJcmV0dXJuICRyZXN1bHQ7Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgTGltZSBMaWdodCBwcm9kdWN0IGRlc2NyaXB0aW9uCgkgKiAKCSAqIEBwYXJhbSAkcHJvZHVjdElkIHRoZSBJRCBvZiB0aGUgTGltZSBMaWdodCBwcm9kdWN0CgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3REZXNjcmlwdGlvbigkcHJvZHVjdElkKQoJewoJCSRyZXN1bHQgPSAkdGhpcy0+Z2V0UHJvZHVjdCgkcHJvZHVjdElkKTsKCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBMaW1lIExpZ2h0IHByb2R1Y3QgaW5mb3JtYXRpb24iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy8gcHJvY2VzcyByZXN1bHRzCgkJJHByb2R1Y3REZXNjcmlwdGlvbiA9ICIiOwoJCQkKCQkkcHJvZHVjdERlc2NyaXB0aW9uIC49ICJOYW1lOiB7JHJlc3VsdC0+bWVzc2FnZVsicHJvZHVjdF9uYW1lIl19XG4iOwoJCQoJCWlmKCRyZXN1bHQtPm1lc3NhZ2VbInByb2R1Y3RfZGVzY3JpcHRpb24iXSAhPSAiIikKCQl7CgkJCSRwcm9kdWN0RGVzY3JpcHRpb24gLj0gIkRlc2NyaXB0aW9uOiB7JHJlc3VsdC0+bWVzc2FnZVsicHJvZHVjdF9kZXNjcmlwdGlvbiJdfVxuIjsKCQl9CgkJCgkJJHByb2R1Y3REZXNjcmlwdGlvbiAuPSAiU0tVOiB7JHJlc3VsdC0+bWVzc2FnZVsicHJvZHVjdF9za3UiXX1cblxuIjsKCQkkcHJvZHVjdERlc2NyaXB0aW9uIC49ICJQcmljZTogIi5fbW1mKCRyZXN1bHQtPm1lc3NhZ2VbInByb2R1Y3RfcHJpY2UiXSwgIlVTRCIpLiJcblxuIjsKCQkKCQkkcHJvZHVjdERlc2NyaXB0aW9uIC49ICJTdWJzY3JpcHRpb246ICI7CgkJJHByb2R1Y3REZXNjcmlwdGlvbiAuPSAoJHJlc3VsdC0+bWVzc2FnZVsicHJvZHVjdF9yZWJpbGxfcHJvZHVjdCJdID09ICIwIikgPyAiTm8iIDogIlllcyI7CgkJJHByb2R1Y3REZXNjcmlwdGlvbiAuPSAiXG4iOwoJCQoJCSRwcm9kdWN0RGVzY3JpcHRpb24gLj0gIkhhcyBUcmlhbDogIjsKCQkkcHJvZHVjdERlc2NyaXB0aW9uIC49ICgkcmVzdWx0LT5tZXNzYWdlWyJwcm9kdWN0X2lzX3RyaWFsIl0gPT0gIjEiKSA/ICJZZXMiIDogIk5vIjsKCQkkcHJvZHVjdERlc2NyaXB0aW9uIC49ICJcbiI7CgoJCSRwcm9kdWN0RGVzY3JpcHRpb24gLj0gIklzIFNoaXBwYWJsZTogIjsKCQkkcHJvZHVjdERlc2NyaXB0aW9uIC49ICgkcmVzdWx0LT5tZXNzYWdlWyJwcm9kdWN0X2lzX3NoaXBwYWJsZSJdID09ICIxIikgPyAiWWVzIiA6ICJObyI7CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcHJvZHVjdERlc2NyaXB0aW9uKTsKCX0KCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIHJldHVybnMgYW4gYXJyYXkgb2Ygc2hpcHBpbmcgbWV0aG9kcyAoaWQgYXMgdGhlIGtleSwgbmFtZSBhcyB0aGUgdmFsdWUpCgkgKiAKCSAqIEByZXR1cm4gQXJyYXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nTWV0aG9kcygpCgl7CgkJJHJlc3VsdCA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRNZW1iZXJzaGlwQVBJKCJzaGlwcGluZ19tZXRob2RfZmluZCIpLCAiUE9TVCIsIGFycmF5KCJjYW1wYWlnbl9pZCI9PiJhbGwiLCJyZXR1cm5fdHlwZSI9PiJzaGlwcGluZ19tZXRob2RfdmlldyIpLCBhcnJheSgianNvbl9maWVsZHMiPT4iZGF0YSIpKTsKCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCXsKCQkJcmV0dXJuIGFycmF5KCIwIj0+IkVycm9yIHJldHJpZXZpbmcgTGltZSBMaWdodCBzaGlwcGluZyBtZXRob2RzIik7CgkJfQoJCQoJCS8vIHByb2Nlc3MgcmVzdWx0cwoJCSRzaGlwcGluZ01ldGhvZHMgPSBhcnJheSgpOwoJCQkKCQlmb3IoJGkgPSAwOyAkaSA8IGNvdW50KCRyZXN1bHQtPm1lc3NhZ2VbInNoaXBwaW5nX2lkcyJdKTsgJGkrKykKCQl7CgkJCSRzaGlwcGluZ0lkID0gJHJlc3VsdC0+bWVzc2FnZVsic2hpcHBpbmdfaWRzIl1bJGldOwoJCQkkc2hpcHBpbmdEYXRhID0gJHJlc3VsdC0+bWVzc2FnZVsiZGF0YSJdLT4kc2hpcHBpbmdJZDsKCQkJJHNoaXBwaW5nTWV0aG9kc1skc2hpcHBpbmdJZF0gPSB1cmxkZWNvZGUoJHNoaXBwaW5nRGF0YS0+bmFtZSk7CgkJfQoJCQoJCXJldHVybiAkc2hpcHBpbmdNZXRob2RzOwoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgcmV0dXJucyBhIExpbWUgTGlnaHQgc2hpcHBpbmcgbWV0aG9kCgkgKiAKCSAqIEBwYXJhbSAkc2hpcHBpbmdJZCB0aGUgSUQgb2YgdGhlIExpbWUgTGlnaHQgcHJvZHVjdAoJICoKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nTWV0aG9kKCRzaGlwcGluZ0lkKQoJewoJCSRyZXN1bHQgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0TWVtYmVyc2hpcEFQSSgic2hpcHBpbmdfbWV0aG9kX3ZpZXciKSwgIlBPU1QiLCBhcnJheSgic2hpcHBpbmdfaWQiPT4kc2hpcHBpbmdJZCkpOwoJCgkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIExpbWUgTGlnaHQgc2hpcHBpbmcgbWV0aG9kIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCXJldHVybiAkcmVzdWx0OwoJfQoJCgoJLyoqCgkgKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgTGltZSBMaWdodCBzaGlwcGluZyBtZXRob2QgZGVzY3JpcHRpb24KCSAqIAoJICogQHBhcmFtICRzaGlwcGluZ0lkIHRoZSBJRCBvZiB0aGUgTGltZSBMaWdodCBzaGlwcGluZyBtZXRob2QKCSAqCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRTaGlwcGluZ0Rlc2NyaXB0aW9uKCRzaGlwcGluZ0lkKQoJewoJCSRyZXN1bHQgPSAkdGhpcy0+Z2V0U2hpcHBpbmdNZXRob2QoJHNoaXBwaW5nSWQpOwoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBMaW1lIExpZ2h0IHNoaXBwaW5nIG1ldGhvZCBpbmZvcm1hdGlvbiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCS8vIHByb2Nlc3MgcmVzdWx0cwoJCSRzaGlwcGluZ0Rlc2NyaXB0aW9uID0gIiI7CgkJCQoJCSRzaGlwcGluZ0Rlc2NyaXB0aW9uIC49ICJOYW1lOiB7JHJlc3VsdC0+bWVzc2FnZVsibmFtZSJdfVxuIjsKCQkkc2hpcHBpbmdEZXNjcmlwdGlvbiAuPSAiRGVzY3JpcHRpb246IHskcmVzdWx0LT5tZXNzYWdlWyJkZXNjcmlwdGlvbiJdfVxuXG4iOwoJCgkJJHNoaXBwaW5nRGVzY3JpcHRpb24gLj0gIkdyb3VwIE5hbWU6IHskcmVzdWx0LT5tZXNzYWdlWyJncm91cF9uYW1lIl19XG4iOwoJCSRzaGlwcGluZ0Rlc2NyaXB0aW9uIC49ICJDb2RlOiB7JHJlc3VsdC0+bWVzc2FnZVsiY29kZSJdfVxuXG4iOwoJCQoJCSRzaGlwcGluZ0Rlc2NyaXB0aW9uIC49ICJJbml0aWFsIFByaWNlOiAiLl9tbWYoZmxvYXR2YWwoJHJlc3VsdC0+bWVzc2FnZVsiaW5pdGlhbF9hbW91bnQiXSksICJVU0QiKS4iXG4iOwoJCSRzaGlwcGluZ0Rlc2NyaXB0aW9uIC49ICJTdWJzY3JpcHRpb24gUHJpY2U6ICIuX21tZihmbG9hdHZhbCgkcmVzdWx0LT5tZXNzYWdlWyJzdWJzY3JpcHRpb25fYW1vdW50Il0pLCAiVVNEIik7CgkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRzaGlwcGluZ0Rlc2NyaXB0aW9uKTsKCX0KCQoJCglwcml2YXRlIGZ1bmN0aW9uIGxpbWVsaWdodENhbGxTdWNjZXNzZnVsKCRyZXN1bHQpCgl7CgkJaWYoISRyZXN1bHQpIAoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQoJCWlmKCFpc3NldCgkcmVzdWx0WyJyZXNwb25zZSJdKSAmJiAhaXNzZXQoJHJlc3VsdFsicmVzcG9uc2VDb2RlIl0pICYmICFpc3NldCgkcmVzdWx0WyJyZXNwb25zZV9jb2RlIl0pKSAKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkKCQlpZihpc3NldCgkcmVzdWx0WyJyZXNwb25zZSJdKSAmJiBzdHJwb3MoJHJlc3VsdFsicmVzcG9uc2UiXSwgIjEwMCIpID09PSBmYWxzZSkgCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCgkJaWYoaXNzZXQoJHJlc3VsdFsicmVzcG9uc2VDb2RlIl0pICYmIHN0cnBvcygkcmVzdWx0WyJyZXNwb25zZUNvZGUiXSwgIjEwMCIpID09PSBmYWxzZSkgCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCgkJaWYoaXNzZXQoJHJlc3VsdFsicmVzcG9uc2VfY29kZSJdKSkgCgkJewoJCQlpZihpc19hcnJheSgkcmVzdWx0WyJyZXNwb25zZV9jb2RlIl0pKQoJCQl7CgkJCQlmb3JlYWNoKCRyZXN1bHRbInJlc3BvbnNlX2NvZGUiXSBhcyAkcmVzdWx0SXRlbSkKCQkJCXsKCQkJCQlpZigkcmVzdWx0SXRlbSAhPSAiMTAwIiAmJiAkcmVzdWx0SXRlbSAhPSAiMzQzIikKCQkJCQl7CgkJCQkJCXJldHVybiBmYWxzZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJZWxzZSBpZihzdHJwb3MoJHJlc3VsdFsicmVzcG9uc2VfY29kZSJdLCAiMTAwIikgPT09IGZhbHNlICYmIHN0cnBvcygkcmVzdWx0WyJyZXNwb25zZV9jb2RlIl0sICIzNDMiKSA9PT0gZmFsc2UpCgkJCXsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCQoJCXJldHVybiB0cnVlOwoJfQp9', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(41, 'affiliatevo', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0FmZmlsaWF0ZVZPIGV4dGVuZHMgTU1fRW50aXR5CnsKCXByaXZhdGUgJHVzZXJuYW1lID0gIiI7Cglwcml2YXRlICRwYXNzd29yZCA9ICIiOwoJcHJpdmF0ZSAkdXJsID0gIiI7CgoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKQoJewoJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCSR0aGlzLT51c2VybmFtZSA9ICRkYXRhWyJ1c2VybmFtZSJdOwoJCSR0aGlzLT5wYXNzd29yZCA9ICRkYXRhWyJwYXNzd29yZCJdOwoJCXBhcmVudDo6dmFsaWRhdGUoKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0RGF0YSgpCgl7CgkJcmV0dXJuIGZhbHNlOwoJfQoKCQoJLyoqIEdFVFRFUlMvU0VUVEVSUyAqKi8KCQoJcHVibGljIGZ1bmN0aW9uIGdldFVzZXJuYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVzZXJuYW1lOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRVc2VybmFtZSgkdmFsKQoJewoJCSR0aGlzLT51c2VybmFtZSA9ICR2YWw7Cgl9CgkKCglwdWJsaWMgZnVuY3Rpb24gZ2V0UGFzc3dvcmQoKQoJewoJCXJldHVybiAkdGhpcy0+cGFzc3dvcmQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRQYXNzd29yZCgkdmFsKQoJewoJCSR0aGlzLT5wYXNzd29yZCA9ICR2YWw7Cgl9CgkKCglwdWJsaWMgZnVuY3Rpb24gZ2V0VXJsKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVybDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFVybCgkdmFsKQoJewoJCSR0aGlzLT51cmwgPSAkdmFsOwoJfQp9Cg==', 0, '2018-11-21 06:38:53'),
(42, 'rbacanalystview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCgphYnN0cmFjdCBjbGFzcyBNTV9SQkFDQW5hbHlzdFZpZXcgZXh0ZW5kcyBNTV9SQkFDQmFzZVZpZXcKewoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCQkkdGhpcy0+cGVybWlzc2lvbnMgPSBhcnJheSgKCQkJCSIqIiAgPT4gIGFycmF5KE1NX1JvbGU6OiRST0xFX0FETUlOSVNUUkFUT1IsIE1NX1JvbGU6OiRST0xFX0FOQUxZU1QpCgkJCQkpOwoJfQoKfQ==', 0, '2018-11-21 06:38:53'),
(43, 'socialloginrequest', 'LyoqCiAqIAogKgogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICoKICogTU1fU29jaWFsTG9naW5SZXF1ZXN0IGlzIHJlc3BvbnNpYmxlIGZvciBwcm9jZXNzaW5nIHNvY2lhbCBuZXR3b3JrIHByb3ZpZGVyIHNpZ251cHMuCiAqLwoKY2xhc3MgTU1fU29jaWFsTG9naW5SZXF1ZXN0IGV4dGVuZHMgTU1fRnJlZU1lbWJlcldlYmZvcm1SZXF1ZXN0CnsJCQoJCglwcml2YXRlICRzdG9yZWRSZXN1bHQgPSAiIjsKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdCgkcmVzdWx0KQoJewoJCS8vb3ZlcnJpZGVuIHRvIGtpbGwgdGhlIGRlZmF1bHQgcmVkaXJlY3QsIHNvIHRoYXQgdGhlIHNvY2lhbCBsb2dpbiBhdXRoIHByb2Nlc3MgaGFzIGEgY2hhbmNlIHRvIGxpbmsgdGhlIGFjY291bnRzCgkJJHRoaXMtPnN0b3JlZFJlc3VsdCA9ICRyZXN1bHQ7Cgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2QgcmVkaXJlY3RzIHRvIHRoZSBwcm9wZXIgY29uZmlybWF0aW9uIHBhZ2UuIEl0IGlzIG1lYW50IHRvIGJlIGNhbGxlZCBhZnRlciB0aGUgc29jaWFsIGxvZ2luIGF1dGggcHJvY2VzcyBoYXMgbGlua2VkIHRoZQoJICogbmV3bHkgY3JlYXRlZCBhY2NvdW50IHRvIHRoZSB1bmlxdWUgc29jaWFsIG5ldHdvcmsgaWQgc3VwcGxpZWQgYnkgdGhlIHNvY2lhbCBwcm92aWRlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gY29tcGxldGVTaWdudXAoKQoJewoJCXJldHVybiBwYXJlbnQ6OmhhbmRsZVJlc3VsdCgkdGhpcy0+c3RvcmVkUmVzdWx0KTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldE5ld1VzZXIoKQoJewoJCXJldHVybiAkdGhpcy0+bmV3VXNlcjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc3VibWl0UmVxdWVzdCgpCgl7CgkJcGFyZW50OjpzdWJtaXRSZXF1ZXN0KCk7CgkJcmV0dXJuICR0aGlzLT5zdG9yZWRSZXN1bHQ7Cgl9Cn0K', 0, '2018-11-21 06:38:53'),
(44, 'reportingdashboard', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fUmVwb3J0aW5nRGFzaGJvYXJkIGV4dGVuZHMgTU1fUmVwb3J0QmFzZSAKewoJCglwcm90ZWN0ZWQgJHZpc3VhbEVsZW1lbnRzID0gYXJyYXkoIk1NX1JlcG9ydExpbmVDaGFydCIsIk1NX1JlcG9ydER5bmFtaWNDb250ZW50Iik7CgkKCS8vdmlzdWFsIGVsZW1lbnQgaWRlbnRpZmllcnMKCXB1YmxpYyBzdGF0aWMgJFRPVEFMX01FTUJFUlNfVkFMVUUgCQkJIAk9ICAgInJlcG9ydGluZ19kYXNoYm9hcmRfdG90YWxfbWVtYmVycyI7CglwdWJsaWMgc3RhdGljICRUT1RBTF9SRU5URU5USU9OX0RVUkFUSU9OX1ZBTFVFICA9ICAgInJlcG9ydGluZ19kYXNoYm9hcmRfdG90YWxfcmV0ZW50aW9uX2R1cmF0aW9uX3ZhbHVlIjsKCXB1YmxpYyBzdGF0aWMgJFRPVEFMX0NVU1RPTUVSX1ZBTFVFIAkJIAk9ICAgInJlcG9ydGluZ19kYXNoYm9hcmRfdG90YWxfY3VzdG9tZXJfdmFsdWUiOwoJcHVibGljIHN0YXRpYyAkVE9UQUxfRU5HQUdFTUVOVF9WQUxVRSAJCSAJPSAgICJyZXBvcnRpbmdfZGFzaGJvYXJkX3RvdGFsX2VuZ2FnZW1lbnRfdmFsdWUiOwoJCglwdWJsaWMgc3RhdGljICRORVdfTUVNQkVSU19MSU5FQ0hBUlQgCQkgCT0gICAicmVwb3J0aW5nX2Rhc2hib2FyZF9uZXdfbWVtYmVyc19saW5lY2hhcnQiOwoJcHVibGljIHN0YXRpYyAkUkFOR0VfQURKVVNURURfQ0hVUk4gIAkJIAk9ICAgInJlcG9ydGluZ19kYXNoYm9hcmRfcmFuZ2VfYWRqdXN0ZWRfY2h1cm4iOwoJcHVibGljIHN0YXRpYyAkQVZHX0RBSUxZX1JFVkVOVUUgICAgIAkJIAk9ICAgInJlcG9ydGluZ19kYXNoYm9hcmRfYXZnX2RhaWx5X3JldmVudWUiOwoJcHVibGljIHN0YXRpYyAkQVZHX01PTlRITFlfUkVWRU5VRSAgIAkJIAk9ICAgInJlcG9ydGluZ19kYXNoYm9hcmRfYXZnX21vbnRobHlfcmV2ZW51ZSI7CglwdWJsaWMgc3RhdGljICRUT1RBTF9SRVZFTlVFICAgICAgICAgCQkgCT0gICAicmVwb3J0aW5nX2Rhc2hib2FyZF90b3RhbF9yZXZlbnVlIjsKCXB1YmxpYyBzdGF0aWMgJFJBTkdFX0FESlVTVEVEX1JFVEVOVElPTl9SQVRFIAk9ICAgInJlcG9ydGluZ19kYXNoYm9hcmRfcmFuZ2VfYWRqdXN0ZWRfcmV0ZW50aW9uX3JhdGUiOwoJCglwdWJsaWMgc3RhdGljICREQVNIQk9BUkRfUkVWRU5VRV9MSU5FQ0hBUlQgICAJPSAgICJyZXBvcnRpbmdfZGFzaGJvYXJkX3JldmVudWVfbGluZWNoYXJ0IjsKCQoJLy9xdWVyeSBpZGVudGlmaWVycwoJcHVibGljIHN0YXRpYyAkREFTSEJPQVJEX1JFVkVOVUVfUVVFUlkgPSAicmVwb3J0aW5nX2Rhc2hib2FyZF9yZXZlbnVlX3F1ZXJ5IjsKCXB1YmxpYyBzdGF0aWMgJERBU0hCT0FSRF9SRVRFTlRJT05fRFVSQVRJT05fUVVFUlkgPSAicmVwb3J0aW5nX2Rhc2hib2FyZF9yZXRlbnRpb25fZHVyYXRpb25fcXVlcnkiOwoJcHVibGljIHN0YXRpYyAkREFTSEJPQVJEX1RPVEFMX0NVU1RPTUVSX1ZBTFVFX1FVRVJZID0gInJlcG9ydGluZ19kYXNoYm9hcmRfdG90YWxfY3VzdG9tZXJfdmFsdWVfcXVlcnkiOwoJcHVibGljIHN0YXRpYyAkREFTSEJPQVJEX0NIVVJOX1JFVEVOVElPTl9SQVRFX1FVRVJZID0gInJlcG9ydGluZ19kYXNoYm9hcmRfY2h1cm5fcmV0ZW50aW9uX3JhdGVfcXVlcnkiOwoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJWaXN1YWxFbGVtZW50KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKSAKCXsKCQlzd2l0Y2ggKCRlbGVtZW50SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JFRPVEFMX01FTUJFUlNfVkFMVUU6CgkJCQlyZXR1cm4gJHRoaXMtPmdldFRvdGFsTWVtYmVycygpOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JFRPVEFMX1JFTlRFTlRJT05fRFVSQVRJT05fVkFMVUU6CgkJCQlyZXR1cm4gJHRoaXMtPmdldFRvdGFsUmV0ZW50aW9uRHVyYXRpb24oKTsKCQkJCWJyZWFrOwoJCQljYXNlIHNlbGY6OiRUT1RBTF9DVVNUT01FUl9WQUxVRToKCQkJCXJldHVybiAkdGhpcy0+Z2V0VG90YWxDdXN0b21lclZhbHVlKCk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokVE9UQUxfRU5HQUdFTUVOVF9WQUxVRToKCQkJCXJldHVybiAkdGhpcy0+Z2V0VG90YWxFbmdhZ2VtZW50KCk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokTkVXX01FTUJFUlNfTElORUNIQVJUOgoJCQkJJG5tciA9IG5ldyBNTV9OZXdNZW1iZXJzQ29tcGFyaXNvblJlcG9ydChmYWxzZSk7CgkJCQkkcGFyYW1zWyd0eXBlJ10gPSBpc3NldCgkcGFyYW1zWydncmFwaF9pbnRlcnZhbCddKT8kcGFyYW1zWydncmFwaF9pbnRlcnZhbCddOiJ3ZWVrbHkiOwoJCQkJcmV0dXJuICRubXItPnJlbmRlck5ld01lbWJlcnNDb21wYXJpc29uTGluZUNoYXJ0KHNlbGY6OiRORVdfTUVNQkVSU19MSU5FQ0hBUlQsJHBhcmFtcywkd2lkdGgsJGhlaWdodCwkZGlyZWN0aXZlcyk7CgkJCWNhc2Ugc2VsZjo6JERBU0hCT0FSRF9SRVZFTlVFX0xJTkVDSEFSVDoKCQkJCXJldHVybiAkdGhpcy0+cmVuZGVyUmV2ZW51ZUxpbmVjaGFydChzZWxmOjokREFTSEJPQVJEX1JFVkVOVUVfTElORUNIQVJULCAkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQsICRkaXJlY3RpdmVzKTsKCQkJCWJyZWFrOwoJCQljYXNlIHNlbGY6OiRBVkdfREFJTFlfUkVWRU5VRToKCQkJCXJldHVybiAkdGhpcy0+Z2V0UmV2ZW51ZUJ5VW5pdChzZWxmOjokQVZHX0RBSUxZX1JFVkVOVUUsJHBhcmFtcywkd2lkdGgsJGhlaWdodCwkZGlyZWN0aXZlcyk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokQVZHX01PTlRITFlfUkVWRU5VRToKCQkJCXJldHVybiAkdGhpcy0+Z2V0UmV2ZW51ZUJ5VW5pdChzZWxmOjokQVZHX01PTlRITFlfUkVWRU5VRSwkcGFyYW1zLCR3aWR0aCwkaGVpZ2h0LCRkaXJlY3RpdmVzLCJNT05USCIpOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JFRPVEFMX1JFVkVOVUU6CgkJCQlyZXR1cm4gJHRoaXMtPmdldFJldmVudWVCeVVuaXQoc2VsZjo6JFRPVEFMX1JFVkVOVUUsJHBhcmFtcywkd2lkdGgsJGhlaWdodCwkZGlyZWN0aXZlcywiQUxMVElNRSIpOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JFJBTkdFX0FESlVTVEVEX0NIVVJOOgoJCQkJcmV0dXJuICR0aGlzLT5nZXRDaHVybihzZWxmOjokUkFOR0VfQURKVVNURURfQ0hVUk4sICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JFJBTkdFX0FESlVTVEVEX1JFVEVOVElPTl9SQVRFOgoJCQkJcmV0dXJuICR0aGlzLT5nZXRSZXRlbnRpb25SYXRlKHNlbGY6OiRSQU5HRV9BREpVU1RFRF9SRVRFTlRJT05fUkFURSwkcGFyYW1zLCR3aWR0aCwkaGVpZ2h0LCRkaXJlY3RpdmVzKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiVW5hYmxlIHRvIHJlbmRlciB2aXN1YWwgZWxlbWVudDogaWRlbnRpZmllciAiLigoIWlzX2FycmF5KCRlbGVtZW50SWRlbnRpZmllcikgJiYgIWlzX29iamVjdCgkZWxlbWVudElkZW50aWZpZXIpKT8ieyRlbGVtZW50SWRlbnRpZmllcn0gIjoiIikuInVua25vd24iLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VG90YWxNZW1iZXJzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJG1lbWJlckNvdW50U3RhdHVzZXMgPSBhcnJheShNTV9TdGF0dXM6OiRBQ1RJVkUsIE1NX1N0YXR1czo6JE9WRVJEVUUsIE1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OKTsKCQkkc3RhdHVzZXMgPSBpbXBsb2RlKCIsIiwkbWVtYmVyQ291bnRTdGF0dXNlcyk7CgkJJHNxbCA9ICJTRUxFQ1QgQ09VTlQoKikgQVMgdG90YWxfbWVtYmVycyBGUk9NICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgbXVkIHdoZXJlIG11ZC5zdGF0dXMgSU4gKHskc3RhdHVzZXN9KSI7CgkJJHRvdGFsTWVtYmVycyA9ICR3cGRiLT5nZXRfdmFyKCRzcWwpOwoJCSRkeW5hbWljQ29udGVudCA9IE1NX1JlcG9ydER5bmFtaWNDb250ZW50OjpjcmVhdGVOdW1lcmljRHluYW1pY0NvbnRlbnQoc2VsZjo6JFRPVEFMX01FTUJFUlNfVkFMVUUsICR0b3RhbE1lbWJlcnMpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGR5bmFtaWNDb250ZW50LT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRvdGFsUmV0ZW50aW9uRHVyYXRpb24oKQoJewkKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JERBU0hCT0FSRF9SRVRFTlRJT05fRFVSQVRJT05fUVVFUlksIGFycmF5KCksIiIsZmFsc2UpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQkkcmF3TnVtYmVycyA9ICRkYXRhUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCgkJJHZhbHVlID0gMDsKCQkkc3VidW5pdCA9ICJIb3VycyI7CgkJaWYgKCFpc19udWxsKCRyYXdOdW1iZXJzKSAmJiAoJHJhd051bWJlcnMtPm51bV9tZW1iZXJzID4gMCkpCgkJewoJCQkkYXZlcmFnZVJldGVudGlvbkhvdXJzID0gcm91bmQoaW50dmFsKCRyYXdOdW1iZXJzLT5yZXRlbnRpb25faG91cnMpL2ludHZhbCgkcmF3TnVtYmVycy0+bnVtX21lbWJlcnMpLDIpOwoJCQlpZiAoJGF2ZXJhZ2VSZXRlbnRpb25Ib3VycyA+PSAyNCkKCQkJewoJCQkJLy9UT0RPOiBldmFsdWF0ZSBpZiB0aGUgZm9sbG93aW5nIGNhbiBidXN0IE1BWElOVAoJCQkJJGF2ZXJhZ2VSZXRlbnRpb25EYXlzID0gaW50dmFsKGZsb29yKCRhdmVyYWdlUmV0ZW50aW9uSG91cnMvMjQpKTsKCQkJCSR2YWx1ZSA9ICRhdmVyYWdlUmV0ZW50aW9uRGF5czsKCQkJCSRzdWJ1bml0ID0gImRheXMiOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSR2YWx1ZT0kYXZlcmFnZVJldGVudGlvbkhvdXJzOyAKCQkJCSRzdWJ1bml0ID0gImhvdXJzIjsKCQkJfQoJCX0KCQkkZHluYW1pY0NvbnRlbnQgPSBNTV9SZXBvcnREeW5hbWljQ29udGVudDo6Y3JlYXRlTnVtZXJpY0R5bmFtaWNDb250ZW50KHNlbGY6OiRUT1RBTF9SRU5URU5USU9OX0RVUkFUSU9OX1ZBTFVFLCAkdmFsdWUsJHN1YnVuaXQsInN1Yi12YWx1ZSIpOwkJCgkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgkZHluYW1pY0NvbnRlbnQtPnJlbmRlcigpKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VG90YWxDdXN0b21lclZhbHVlKCkKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JERBU0hCT0FSRF9UT1RBTF9DVVNUT01FUl9WQUxVRV9RVUVSWSwgYXJyYXkoKSwiIixmYWxzZSk7CgkJaWYgKCFNTV9SZXBvcnRSZXNwb25zZTo6aXNTdWNjZXNzKCRkYXRhUmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuICRkYXRhUmVzcG9uc2U7CgkJfQoJCQoJCSRjdXN0b21lclZhbHVlID0gJGRhdGFSZXNwb25zZS0+bWVzc2FnZTsKCQkkZHluYW1pY0NvbnRlbnQgPSBNTV9SZXBvcnREeW5hbWljQ29udGVudDo6Y3JlYXRlQ3VycmVuY3lEeW5hbWljQ29udGVudChzZWxmOjokVE9UQUxfQ1VTVE9NRVJfVkFMVUUsJGN1c3RvbWVyVmFsdWUsIF9tbWZjKCkpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGR5bmFtaWNDb250ZW50LT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRvdGFsRW5nYWdlbWVudCgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRleGNsdWRlZFVzZXJTdGF0dXNlcyA9IGltcGxvZGUoIiwiLGFycmF5KE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTixNTV9TdGF0dXM6OiRFUlJPUikpOwoJCSRzcWwgPSAiU0VMRUNUIFgucGFnZV9jb3VudCwgWC50aW1lc3BhbiwgWS51c2VyX2NvdW50LCAoWC5wYWdlX2NvdW50L1gudGltZXNwYW4vWS51c2VyX2NvdW50KSBBUyB0b3RhbF9lbmdhZ2VtZW50IEZST00gIi4KCQkJICAgIihTRUxFQ1QgVElNRVNUQU1QRElGRihEQVksTUlOKGRhdGVfYWRkZWQpLE1BWChkYXRlX2FkZGVkKSkgQVMgdGltZXNwYW4sICBDT1VOVCgqKSBBUyBwYWdlX2NvdW50ICIuCgkJCSAgICJGUk9NICIuTU1fVEFCTEVfRVZFTlRfTE9HLiIgV0hFUkUgZXZlbnRfdHlwZT0nIi5NTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfUEFHRV9BQ0NFU1MuIicpIEFTIFgsICAiLgoJCQkgICAiKFNFTEVDVCBDT1VOVCgxKSBBUyB1c2VyX2NvdW50IEZST00gIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiBXSEVSRSBzdGF0dXMgTk9UIElOICh7JGV4Y2x1ZGVkVXNlclN0YXR1c2VzfSkpIEFTIFkiOwoJCSR0b3RhbEVuZ2FnbWVudFJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkkdG90YWxFbmdhZ21lbnQgPSBpc19udWxsKCR0b3RhbEVuZ2FnbWVudFJlc3VsdHMpPzA6JHRvdGFsRW5nYWdtZW50UmVzdWx0cy0+dG90YWxfZW5nYWdlbWVudDsKCQkkdG90YWxFbmdhZ21lbnQgPSByb3VuZCgkdG90YWxFbmdhZ21lbnQsMik7CgkJJGR5bmFtaWNDb250ZW50ID0gTU1fUmVwb3J0RHluYW1pY0NvbnRlbnQ6OmNyZWF0ZU51bWVyaWNEeW5hbWljQ29udGVudChzZWxmOjokVE9UQUxfRU5HQUdFTUVOVF9WQUxVRSwgJHRvdGFsRW5nYWdtZW50LCJwYWdlcy9kYXkiLCJzdWItdmFsdWUiKTsKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRkeW5hbWljQ29udGVudC0+cmVuZGVyKCkpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJSZXZlbnVlTGluZWNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcykKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JERBU0hCT0FSRF9SRVZFTlVFX1FVRVJZLCAkcGFyYW1zLCIiLGZhbHNlKTsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJCgkJJG1vZGVsID0gTU1fUmVwb3J0Q2F0ZWdvcnlWYWx1ZU1vZGVsOjpjcmVhdGVGcm9tRGF0YSgkZGF0YVJlc3BvbnNlLT5tZXNzYWdlLCAiZGF0ZSIsICJhbW91bnQiKTsKCQkKCQkvL25vdyBjcmVhdGUgdGhlIGxpbmUgY2hhcnQKCQkkbGluZSA9IG5ldyBNTV9SZXBvcnRMaW5lQ2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyKTsKCQkkbGluZS0+c2V0Q2F0ZWdvcmllc0FyZURhdGVzKHRydWUpOwoJCSRsaW5lLT5zZXREYXRlRm9ybWF0KCJNTS1ERC1ZWVlZIik7CgkJJGxpbmUtPmFkZE1vZGVsKCRtb2RlbCk7CgkJCgkJLy9zZXQgdGhlIGdyYXBoIHJlc29sdXRpb24gYmFzZWQgb24gd2hhdCB0aGUgdXNlciBjaG9zZQoJCSRyZXNvbHV0aW9uID0gTU1fUmVwb3J0TGluZUNoYXJ0OjokREFZUzsKCQlpZiAoaXNzZXQoJHBhcmFtc1snZ3JhcGhfaW50ZXJ2YWwnXSkpCgkJewoJCQlzd2l0Y2ggKCRwYXJhbXNbJ2dyYXBoX2ludGVydmFsJ10pCgkJCXsKCQkJCWNhc2UgJ3dlZWtseSc6CgkJCQkJJHJlc29sdXRpb24gPSBNTV9SZXBvcnRMaW5lQ2hhcnQ6OiRXRUVLUzsKCQkJCQlicmVhazsKCQkJCWNhc2UgJ21vbnRobHknOgoJCQkJCSRyZXNvbHV0aW9uID0gTU1fUmVwb3J0TGluZUNoYXJ0OjokTU9OVEhTOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlicmVhazsKCQkJfQoJCX0KCQkkbGluZS0+c2V0UmVzb2x1dGlvbigkcmVzb2x1dGlvbik7CgkJJGxpbmUtPnNldEN1cnJlbmN5VmFsdWVzKHRydWUpOwoJCSRsaW5lLT5zZXRDdXJyZW5jeVR5cGUoTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpKTsKCQkkbGluZS0+c2V0VmFsdWVBeGlzVGl0bGUodWNmaXJzdCgkcGFyYW1zWydncmFwaF9pbnRlcnZhbCddKS4iIHJldmVudWUgaW4gIi5NTV9DdXJyZW5jeVV0aWw6OmdldEFjdGl2ZUN1cnJlbmN5KCkpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGxpbmUtPnJlbmRlcigpKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlQ2h1cm5BbmRSZXRlbnRpb25EYXRhKCRwYXJhbXMpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJaWYgKCFpc19hcnJheSgkcGFyYW1zKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBEYXNoYm9hcmQgY2h1cm4gZGF0YTogSW1wcm9wZXIgcGFyYW1ldGVyIGZvcm1hdCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmIChlbXB0eSgkcGFyYW1zWydzdGFydF9kYXRlJ10pIHx8IGVtcHR5KCRwYXJhbXNbJ2VuZF9kYXRlJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIERhc2hib2FyZCBjaHVybiBkYXRhOiBTdGFydCBhbmQgRW5kIGRhdGUgbXVzdCBiZSBzdXBwbGllZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCAwMDowMCIsc3RydG90aW1lKCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkpOwoJCSRlbmREYXRlICAgPSBkYXRlKCJZLW0tZCAyMzo1OTo1OSIsc3RydG90aW1lKCRwYXJhbXNbJ2VuZF9kYXRlJ10pKTsKCQkkc3RhcnRUaW1lID0gc3RydG90aW1lKCRzdGFydERhdGUpOwoJCSRlbmRUaW1lICAgPSBzdHJ0b3RpbWUoJGVuZERhdGUpOwoJCQoJCS8vcHJlZGljdGl2ZSBjaHVybiBpcyBjYWxjdWxhdGVkIHVzaW5nIHRoZSBmb3JtdWxhIDMwICogKCBzdW1tYXRpb24gb2YgdGhlIG51bWJlciBvZiBjaHVybnMgZWFjaCBkYXkgaW4gdGhlIHBlcmlvZC9zdW1tYXRpb24gb2YgY3VzdG9tZXJzIGF0IHRoZSBzdGFydCBvZiBlYWNoIGRheSBpbiB0aGUgcGVyaW9kKQoJCS8vZmlyc3QsIGdldCB0aGUgbnVtYmVyIG9mIGN1c3RvbWVycyBvbiB0aGUgZmlyc3QgZGF5LiBUaGlzIHNob3VsZCBiZSB0aGUgbnVtYmVyIG9mIHVzZXJzIHJlZ2lzdGVyZWQgYmVmb3JlIHRoZSBzdGFydCBkYXRlIHdobyBhcmUgZWl0aGVyIG5vdCBjYW5jZWxsZWQgb3IgY2FuY2VsbGVkIGFmdGVyIHRoYXQgZGF5CgkJJHdhc09uY2VBY3RpdmVTdHJpbmcgPSBpbXBsb2RlKCIsIixhcnJheShNTV9TdGF0dXM6OiRDQU5DRUxFRCxNTV9TdGF0dXM6OiRQQVVTRUQsTU1fU3RhdHVzOjokRVhQSVJFRCkpOwoJCSRuZXZlckFjdGl2YXRlU3RyaW5nID0gaW1wbG9kZSgiLCIsYXJyYXkoTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OLE1NX1N0YXR1czo6JEVSUk9SKSk7CgkJJGFjdGl2ZWlzaFN0cmluZyA9IGltcGxvZGUoIiwiLGFycmF5KE1NX1N0YXR1czo6JEFDVElWRSwgTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04sTU1fU3RhdHVzOjokT1ZFUkRVRSxNTV9TdGF0dXM6OiRMT0NLRUQpKTsKCQkkY2FuY2VsaXNoU3RyaW5nID0gaW1wbG9kZSgiLCIsYXJyYXkoTU1fU3RhdHVzOjokQ0FOQ0VMRUQsTU1fU3RhdHVzOjokUEFVU0VEKSk7IC8vVE9ETzogYWRkIGV4cGlyZWQ/CgkJCgkJJHVzZXJEYXRhVGFibGUgPSBNTV9UQUJMRV9VU0VSX0RBVEE7CgkJJHNxbCA9ICJTRUxFQ1QgQ09VTlQoKikgQVMgc3RhcnRDdXN0b21lcnMgRlJPTSB7JHdwZGItPnVzZXJzfSB1IElOTkVSIEpPSU4geyR1c2VyRGF0YVRhYmxlfSBtdWQgT04gKHUuSUQgPSBtdWQud3BfdXNlcl9pZCkgV0hFUkUgIi4KCQkJICAgInUudXNlcl9yZWdpc3RlcmVkIDwgJ3skc3RhcnREYXRlfScgQU5EIChtdWQuc3RhdHVzIElOICh7JGFjdGl2ZWlzaFN0cmluZ30pKSBPUiAoKG11ZC5zdGF0dXMgSU4gKHskd2FzT25jZUFjdGl2ZVN0cmluZ30pKSBBTkQgKG11ZC5zdGF0dXNfdXBkYXRlZCA+ICd7JHN0YXJ0RGF0ZX0nKSkiOwoJCSRzdGFydEN1c3RvbWVycyA9ICR3cGRiLT5nZXRfdmFyKCRzcWwpOwoJCQoJCWlmIChpc19udWxsKCRzdGFydEN1c3RvbWVycykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJFcnJvciBnZW5lcmF0aW5nIGNodXJuIGRhdGEiLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL3NlY29uZCwgc2V0IHVwIGEgdHJhY2tpbmcgc3RydWN0dXJlIGFuZCB0aGUgZ2V0IHRoZSBsaXN0IG9mIGN1c3RvbWVycyB3aG8gZWl0aGVyIHNpZ25lZCB1cCBvciBiZWNhbWUgbm90IGFjdGl2ZSB3aXRoaW4gdGhlIGRhdGUgcmFuZ2UKCQkkbWF0cml4ID0gYXJyYXkoKTsKCQlmb3IgKCRpPSRzdGFydFRpbWU7ICRpPD0kZW5kVGltZTsgJGkrPTg2NDAwKSAvL2RhaWx5IHZhbHVlcwoJCXsKCQkJJGN1cnJlbnREYXRlID0gZGF0ZSgiWS1tLWQiLCRpKTsKCQkJJG1hdHJpeFskY3VycmVudERhdGVdID0gYXJyYXkoInN0YXJ0Q3VzdG9tZXJzIj0+MCwic2lnbnVwcyI9PjAsImNhbmNlbHMiPT4wKTsKCQl9CgkJCgkJLy9ub3cgcHVsbCB0aGUgc2lnbnVwcyBhbmQgY2FuY2VscywgYW5kIHBsYWNlIHRoZW0gaW50byB0aGUgc3RydWN0dXJlCgkJJHNxbCA9ICJTRUxFQ1QgJ3NpZ251cHMnIEFTIGV2ZW50X3R5cGUsIERBVEUodXNlcl9yZWdpc3RlcmVkKSBBUyBldmVudF9kYXRlIEZST00geyR3cGRiLT51c2Vyc30gdTEgSU5ORVIgSk9JTiB7JHVzZXJEYXRhVGFibGV9IG11MSBPTiAiLgoJCQkgICAiKHUxLklEID0gbXUxLndwX3VzZXJfaWQpIFdIRVJFIChtdTEuc3RhdHVzIE5PVCBJTiAoeyRuZXZlckFjdGl2YXRlU3RyaW5nfSkpIEFORCB1MS51c2VyX3JlZ2lzdGVyZWQgQkVUV0VFTiAneyRzdGFydERhdGV9JyBBTkQgJ3skZW5kRGF0ZX0nICIuCgkJCSAgICJVTklPTiBBTEwgU0VMRUNUICdjYW5jZWxzJyBBUyBldmVudF90eXBlLCBEQVRFKG11Mi5zdGF0dXNfdXBkYXRlZCkgQVMgZXZlbnRfZGF0ZSBGUk9NIHskdXNlckRhdGFUYWJsZX0gbXUyIFdIRVJFIG11Mi5zdGF0dXMgSU4gKHskY2FuY2VsaXNoU3RyaW5nfSkgIi4KCQkJICAgIkFORCBtdTIuc3RhdHVzX3VwZGF0ZWQgQkVUV0VFTiAneyRzdGFydERhdGV9JyBBTkQgJ3skZW5kRGF0ZX0nIjsKCQkKCQkkcmVzID0gX21tbXEoJHNxbCwgdHJ1ZSk7CgkJCgkJaWYgKCRyZXMpCgkJewogIAkJLy9pbmlfc2V0KCdtZW1vcnlfbGltaXQnLCcxMk0nKTsKICAJCSRmZXRjaF9vYmplY3RfZnVuY3Rpb24gPSBfbW1tZCgpLiJfZmV0Y2hfb2JqZWN0IjsKICAJCSRmcmVlX3Jlc3VsdF9mdW5jdGlvbiA9IF9tbW1kKCkuIl9mcmVlX3Jlc3VsdCI7CiAgCQkkZXJyb3JfZnVuY3Rpb24gPSBfbW1tZCgpLiJfZXJyb3IiOwogIAkJCgkJCXdoaWxlICgkcm93ID0gQCRmZXRjaF9vYmplY3RfZnVuY3Rpb24oJHJlcykpCgkJCXsKCQkJCSRtYXRyaXhbJHJvdy0+ZXZlbnRfZGF0ZV1bJHJvdy0+ZXZlbnRfdHlwZV0gKz0gMTsJCQkJCQoJCQkJLy9lcnJvcl9sb2cobnVtYmVyX2Zvcm1hdChtZW1vcnlfZ2V0X3VzYWdlKHRydWUpLzEwMDAwMDAsIDIpLiIgTUIiKTsKCQkJfQoJCQkKCQkJaWYgKCRlcnJvcl9tZXNzYWdlID0gJGVycm9yX2Z1bmN0aW9uKCR3cGRiLT5kYmgpKQoJCQl7CiAgCQkgIHJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgY2h1cm4gZGF0YSAoeyRlcnJvcl9tZXNzYWdlfSkiLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwkKCQkJfQoJCQkKCQkJQCRmcmVlX3Jlc3VsdF9mdW5jdGlvbigkcmVzKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgY2h1cm4gZGF0YSIsTU1fUmVwb3J0UmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vbm93IHVwZGF0ZSB0aGUgc3RydWN0dXJlIHdpdGggdGhlIGNhbGN1bGF0ZWQgIyBvZiBtZW1iZXJzIGF0IHRoZSBzdGFydCBvZiBlYWNoIGRheQoJCSRjdXN0b21lckNvdW50ID0gJHN0YXJ0Q3VzdG9tZXJzOwoJCWZvcmVhY2ggKCRtYXRyaXggYXMgJiRkYXRlSW5mbykKCQl7CgkJCSRkYXRlSW5mb1snc3RhcnRDdXN0b21lcnMnXSA9ICRjdXN0b21lckNvdW50OwoJCQkkY3VzdG9tZXJDb3VudCs9ICRkYXRlSW5mb1snc2lnbnVwcyddOwoJCQkkY3VzdG9tZXJDb3VudC09ICRkYXRlSW5mb1snY2FuY2VscyddOwoJCX0KCQkvL21hdHJpeCBpcyBub3cgdXBkYXRlZCB3aXRoIHRoZSBjdXJyZW50IGNvdW50cywgbWFrZSBvbmUgbW9yZSBwYXNzIHRvIGNhbGN1bGF0ZSB0aGUgY2h1cm4gcmF0ZQoJCSRzdW1EYWlseUNodXJuID0gMDsKCQkkc3VtRGFpbHlTdGFydEN1c3RvbWVycyA9IDA7CgkJZm9yZWFjaCAoJG1hdHJpeCBhcyAmJGRhdGVJbmZvKQoJCXsKCQkJJHN1bURhaWx5Q2h1cm4gKz0gJGRhdGVJbmZvWydjYW5jZWxzJ107CgkJCSRzdW1EYWlseVN0YXJ0Q3VzdG9tZXJzICs9ICRkYXRlSW5mb1snc3RhcnRDdXN0b21lcnMnXTsKCQl9CgkJCgkJJGNodXJuID0gKCRzdW1EYWlseVN0YXJ0Q3VzdG9tZXJzID09IDApPzA6KGludHZhbCgoMzAgKiAoJHN1bURhaWx5Q2h1cm4vJHN1bURhaWx5U3RhcnRDdXN0b21lcnMpKSAqIDEwMCkpOwoJCSRyZXRlbnRpb25SYXRlID0gMTAwIC0gJGNodXJuOwoJCSRkYXRhc2V0ID0gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlU2luZ2xlUmVwb3J0RGF0YXNldCgkcGFyYW1zLGFycmF5KCJjaHVybiI9PiRjaHVybiwgInJldGVudGlvbl9yYXRlIj0+JHJldGVudGlvblJhdGUpKTsKCQlyZXR1cm4gJGRhdGFzZXQ7CQkKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlUmV2ZW51ZURhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFpc19hcnJheSgkcGFyYW1zKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBEYXNoYm9hcmQgcmV2ZW51ZSBkYXRhOiBJbXByb3BlciBwYXJhbWV0ZXIgZm9ybWF0IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKGVtcHR5KCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkgfHwgZW1wdHkoJHBhcmFtc1snZW5kX2RhdGUnXSkgfHwgZW1wdHkoJHBhcmFtc1snZ3JhcGhfaW50ZXJ2YWwnXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZ2VuZXJhdGUgRGFzaGJvYXJkIHJldmVudWUgZGF0YTogU3RhcnQgYW5kIEVuZCBkYXRlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkcGF5bWVudFN0YXR1c2VzID0gaW1wbG9kZSgiLCIsYXJyYXkoTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UKSk7CgkJJHN0YXJ0VGltZSA9IGlzX2ludCgkcGFyYW1zWydzdGFydF9kYXRlJ10pPyRwYXJhbXNbJ3N0YXJ0X2RhdGUnXTpzdHJ0b3RpbWUoJHBhcmFtc1snc3RhcnRfZGF0ZSddKTsKCQkkZW5kVGltZSA9IGlzX2ludCgkcGFyYW1zWydlbmRfZGF0ZSddKT8kcGFyYW1zWydlbmRfZGF0ZSddOnN0cnRvdGltZSgkcGFyYW1zWydlbmRfZGF0ZSddKTsKCQkKCQkkc3RhcnREYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiLCRzdGFydFRpbWUpOyAvL215c3FsIGZvcm1hdAoJCSRlbmREYXRlID0gICBkYXRlKCJZLW0tZCBIOmk6cyIsJGVuZFRpbWUpOwoJCQoJCSR0cmFuc2FjdGlvbnNUYWJsZSA9IE1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRzsKCQkkb3JkZXJzVGFibGUgPSBNTV9UQUJMRV9PUkRFUlM7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgdC5hbW91bnQsIHQudHJhbnNhY3Rpb25fZGF0ZSBGUk9NIHskdHJhbnNhY3Rpb25zVGFibGV9IHQgSU5ORVIgSk9JTiB7JG9yZGVyc1RhYmxlfSBvIG9uICh0Lm9yZGVyX2lkID0gby5pZCkgV0hFUkUgIi4KCQkJICAgInQudHJhbnNhY3Rpb25fdHlwZSBJTiAoeyRwYXltZW50U3RhdHVzZXN9KSBBTkQgdC50cmFuc2FjdGlvbl9kYXRlIEJFVFdFRU4gJ3skc3RhcnREYXRlfScgQU5EICd7JGVuZERhdGV9JyI7CgkJCgkJJHJlc3VsdCA9IF9tbW1xKCRzcWwsIHRydWUpOwoJCQoJCWlmICgkcmVzdWx0KSAKCQl7CgkgIAkJJGZldGNoX2Fzc29jX2Z1bmN0aW9uID0gX21tbWQoKS4iX2ZldGNoX2Fzc29jIjsKCSAgCQkkZmV0Y2hfbnVtX3Jvd3MgPSBfbW1tZCgpLiJfbnVtX3Jvd3MiOwoJICAJCSRmcmVlX3Jlc3VsdF9mdW5jdGlvbiA9IF9tbW1kKCkuIl9mcmVlX3Jlc3VsdCI7CgkgIAkJJGVycm9yX2Z1bmN0aW9uID0gX21tbWQoKS4iX2Vycm9yIjsKICAJCQoJCQlpZiAoJHJvdyA9IEAkZmV0Y2hfYXNzb2NfZnVuY3Rpb24oJHJlc3VsdCkpCgkJCXsJCgkJCQkvL2NyZWF0ZSB0aGUgdGhyZWUgcmVzdWx0IHNldHM6IGRhaWx5LCB3ZWVrbHksIG1vbnRobHkuLiBhbmQgaW5pdGlhbGl6ZQoJCQkJJGRhaWx5UmVzdWx0c2V0ID0gYXJyYXkoKTsKCQkJCSR3ZWVrbHlSZXN1bHRzZXQgPSBhcnJheSgpOwoJCQkJJG1vbnRobHlSZXN1bHRzZXQgPSBhcnJheSgpOwoJCQkJCgkJCQkvL2luaXRpYWxpemUgZGFpbHkKCQkJCSRjb3VudGVyU3RhcnRUaW1lID0gc3RydG90aW1lKGRhdGUoIlktbS1kIDAwOjAwOjAwIiwkc3RhcnRUaW1lKSk7CgkJCQkkY291bnRlckVuZFRpbWUgPSBzdHJ0b3RpbWUoZGF0ZSgiWS1tLWQgMjM6NTk6NTkiLCRlbmRUaW1lKSk7CgkJCQkKCQkJCSRzdGFydERheU9mV2VlayA9IGRhdGUoInciLCRjb3VudGVyU3RhcnRUaW1lKTsKCQkJCSRzdW5kYXlPZlN0YXJ0V2Vla09mZnNldCA9ICRjb3VudGVyU3RhcnRUaW1lIC0gc3RydG90aW1lKCIteyRzdGFydERheU9mV2Vla30gZGF5cyIsJGNvdW50ZXJTdGFydFRpbWUpOwoJCQkJJGZpcnN0U3VuZGF5ID0gZGF0ZSgibS1kLVkiLCRjb3VudGVyU3RhcnRUaW1lIC0gJHN1bmRheU9mU3RhcnRXZWVrT2Zmc2V0KTsKCQkJCSR3ZWVrbHlDb3VudGVyID0gJHN0YXJ0RGF5T2ZXZWVrOwoJCQkJJHdlZWtseVJlc3VsdHNldFskZmlyc3RTdW5kYXldID0gMDsKCQkJCQoJCQkJZm9yICgkaT0kY291bnRlclN0YXJ0VGltZTsgJGk8PSAkY291bnRlckVuZFRpbWU7ICRpKz04NjQwMCkgLy84NjQwMCBzZWNzIGluIGEgZGF5CgkJCQl7CgkJCQkJJGN1cnJlbnREYXRlID0gZGF0ZSgibS1kLVkiLCRpKTsKCQkJCQkkZGFpbHlSZXN1bHRzZXRbJGN1cnJlbnREYXRlXSA9IDA7CgkJCQkJCgkJCQkJLy9pbml0aWFsaXplIHdlZWtseSAoc3RvcmUgb25seSB0aGUgc3VuZGF5IHN0YXJ0aW5nIHRoZSB3ZWVrLi4gd2Vla3MgZ28gZnJvbSBTdW4gLSBTYXQpCgkJCQkJaWYgKCgoJHdlZWtseUNvdW50ZXIrKyklNykgPT0gMCkgLy82MDQ4MDAgc2VjcyBpbiBhIHdlZWsKCQkJCQl7CgkJCQkJCSRzdW5kYXlEYXRlID0gZGF0ZSgibS1kLVkiLCRpKTsKCQkJCQkJJHdlZWtseVJlc3VsdHNldFskc3VuZGF5RGF0ZV0gPSAwOwoJCQkJCQkkd2Vla2x5Q291bnRlciA9IDE7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkvL2luaXRpYWxpemUgbW9udGhseQoJCQkJJHN0YXJ0TW9udGhUaW1lID0gc3RydG90aW1lKGRhdGUoIlktbS0wMSAwMDowMCIsJGNvdW50ZXJTdGFydFRpbWUpKTsKCQkJCWZvciAoJGk9JHN0YXJ0TW9udGhUaW1lOyAkaTw9ICRlbmRUaW1lOyAkaT1zdHJ0b3RpbWUoIisxIG1vbnRoIiwkaSkpIC8vaGF2ZSB0byB1c2Ugc3RydG90aW1lIGZvciBtb250aGx5IGJlY2F1c2UgaXRzIG5vdCBhIHJlYWwgbWVhc3VyZW1lbnQKCQkJCXsKCQkJCQkkZmlyc3REYXlPZk1vbnRoRGF0ZSA9IGRhdGUoIm0tMDEtWSIsJGkpOwoJCQkJCSRtb250aGx5UmVzdWx0c2V0WyRmaXJzdERheU9mTW9udGhEYXRlXSA9IDA7CgkJCQl9CgkJCQkKCQkJCWRvCgkJCQl7CiAgCQkJCSR0cmFuc2FjdGlvblRpbWVzdGFtcCA9IHN0cnRvdGltZSgkcm93Wyd0cmFuc2FjdGlvbl9kYXRlJ10pOwoJCQkJCSR0cmFuc2FjdGlvbkRhdGUgPSBkYXRlKCJtLWQtWSIsJHRyYW5zYWN0aW9uVGltZXN0YW1wKTsKCQkJCQkkdHJhbnNhY3Rpb25BbW91bnQgPSAtKCRyb3dbJ2Ftb3VudCddKTsKCQkJCQkKCQkJCQkvL2FkZCBkYWlseQoJCQkJCSRkYWlseVJlc3VsdHNldFskdHJhbnNhY3Rpb25EYXRlXSArPSAkdHJhbnNhY3Rpb25BbW91bnQ7IAoJCQkJCQoJCQkJCS8vYWRkIHdlZWtseQoJCQkJCSR3ZWVrT2Zmc2V0ID0gZGF0ZSgidyIsJHRyYW5zYWN0aW9uVGltZXN0YW1wKTsKCQkJCQkkdHJhbnNhY3Rpb25XZWVrU3RhcnREYXRlID0gZGF0ZSgibS1kLVkiLCR0cmFuc2FjdGlvblRpbWVzdGFtcCAtICgkd2Vla09mZnNldCAqIDg2NDAwKSk7CgkJCQkJJHdlZWtseVJlc3VsdHNldFskdHJhbnNhY3Rpb25XZWVrU3RhcnREYXRlXSArPSAkdHJhbnNhY3Rpb25BbW91bnQ7CgkJCQkJCgkJCQkJLy9hZGQgbW9udGhseQoJCQkJCSRtb250aGx5UmVzdWx0c2V0W2RhdGUoIm0tMDEtWSIsJHRyYW5zYWN0aW9uVGltZXN0YW1wKV0gKz0gJHRyYW5zYWN0aW9uQW1vdW50OwoJCQkJfQoJCQkJd2hpbGUgKCRyb3cgPSBAJGZldGNoX2Fzc29jX2Z1bmN0aW9uKCRyZXN1bHQpKTsKCQkJCQoJCQkJaWYgKCRlcnJvcl9tZXNzYWdlID0gJGVycm9yX2Z1bmN0aW9uKCR3cGRiLT5kYmgpKQogIAkJCQl7CiAgICAJCSAgCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJFcnJvciBnZW5lcmF0aW5nIGNodXJuIGRhdGEgKHskZXJyb3JfbWVzc2FnZX0pIixNTV9SZXBvcnRSZXNwb25zZTo6JEVSUk9SKTsJCiAgCQkJCX0KCQkJCQoJCQkJQCRmcmVlX3Jlc3VsdF9mdW5jdGlvbigkcmVzdWx0KTsKCQkJCQoJCQkJLy90cmFuc2Zvcm0gaW50byBmaW5hbCByZXN1bHRzZXRzCgkJCQkkZmluYWxEYWlseVJlc3VsdHNldCA9IGFycmF5KCk7CgkJCQlmb3JlYWNoICgkZGFpbHlSZXN1bHRzZXQgYXMgJGs9PiR2KQoJCQkJewoJCQkJCSRmaW5hbERhaWx5UmVzdWx0c2V0W10gPSBhcnJheSgnZGF0ZSc9PiRrLCAnYW1vdW50Jz0+JHYpOwoJCQkJfQoJCQkJdW5zZXQgKCRkYWlseVJlc3VsdHNldCk7CgkJCQkKCQkJCSRmaW5hbFdlZWtseVJlc3VsdHNldCA9IGFycmF5KCk7CgkJCQlmb3JlYWNoICgkd2Vla2x5UmVzdWx0c2V0IGFzICRrPT4kdikKCQkJCXsKCQkJCQkkZmluYWxXZWVrbHlSZXN1bHRzZXRbXSA9IGFycmF5KCdkYXRlJz0+JGssICdhbW91bnQnPT4kdik7CgkJCQl9CgkJCQl1bnNldCgkd2Vla2x5UmVzdWx0c2V0KTsKCQkJCQoJCQkJJGZpbmFsTW9udGhseVJlc3VsdHNldCA9IGFycmF5KCk7CgkJCQlmb3JlYWNoICgkbW9udGhseVJlc3VsdHNldCBhcyAkaz0+JHYpCgkJCQl7CgkJCQkJJGZpbmFsTW9udGhseVJlc3VsdHNldFtdID0gYXJyYXkoJ2RhdGUnPT4kaywgJ2Ftb3VudCc9PiR2KTsKCQkJCX0KCQkJCXVuc2V0KCRtb250aGx5UmVzdWx0c2V0KTsKCQkJCQoJCQkJLy9yZXR1cm4gdGhlIGNyZWF0ZWQgcmVzdWx0c2V0cwoJCQkJJGRzQXJyYXkgPSBhcnJheSgiZGFpbHkiICAgPT4gICRmaW5hbERhaWx5UmVzdWx0c2V0LAoJCQkJCQkJCSAid2Vla2x5IiAgPT4gICRmaW5hbFdlZWtseVJlc3VsdHNldCwKCQkJCQkJCQkgIm1vbnRobHkiID0+ICAkZmluYWxNb250aGx5UmVzdWx0c2V0KTsKCQkJCSRkYXRhc2V0ID0gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlQ29tcG91bmRSZXBvcnREYXRhc2V0KCRwYXJhbXMsJGRzQXJyYXlbJHBhcmFtc1snZ3JhcGhfaW50ZXJ2YWwnXV0pOwoJCQkJdW5zZXQoJGRzQXJyYXlbJHBhcmFtc1snZ3JhcGhfaW50ZXJ2YWwnXV0pOwoJCQkJZm9yZWFjaCAoJGRzQXJyYXkgYXMgJGRzVHlwZT0+JGRzUmVzdWx0c2V0KQoJCQkJewoJCQkJCSRjaGFuZ2VkUGFyYW1zID0gYXJyYXkoImdyYXBoX2ludGVydmFsIj0+JGRzVHlwZSkgKyAkcGFyYW1zOwoJCQkJCSRkYXRhc2V0LT5hZGRBZGRpdGlvbmFsRGF0YXNldCgkY2hhbmdlZFBhcmFtcywgJGRzUmVzdWx0c2V0KTsKCQkJCX0KCQkJCXVuc2V0KCRkc0FycmF5KTsKCQkJCXJldHVybiAkZGF0YXNldDsKCQkJfQoJCQllbHNlIC8vbm8gcmVzdWx0cyByZXR1cm5lZAoJCQl7CgkJCQlAJGZyZWVfcmVzdWx0X2Z1bmN0aW9uKCRyZXN1bHQpOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnREYXRhc2V0KCJObyBEYXRhIixNTV9SZXBvcnREYXRhc2V0OjokTk9fREFUQSk7CgkJCX0KCQkJCgkJfQoJCWVsc2UgCgkJewoJCQkvL2Vycm9yIHJ1bm5pbmcgcXVlcnksIHJldHVybiBlcnJvciBzdGF0dXMKCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnREYXRhc2V0KCJlcnJvciBleGVjdXRpbmcgcXVlcnkiLE1NX1JlcG9ydERhdGFzZXQ6OiRFUlJPUik7CgkJfQoJCQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRDaHVybigkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpCgl7CgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksIHNlbGY6OiREQVNIQk9BUkRfQ0hVUk5fUkVURU5USU9OX1JBVEVfUVVFUlksICRwYXJhbXMsIiIsZmFsc2UpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQlpZiAoIWlzX2FycmF5KCRkYXRhUmVzcG9uc2UtPm1lc3NhZ2UpIHx8ICFpc3NldCgkZGF0YVJlc3BvbnNlLT5tZXNzYWdlWydjaHVybiddKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIkVycm9yIGNhbGN1bGF0aW5nIHJldGVudGlvbiByYXRlIixNTV9SZXBvcnRSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGNodXJuID0gJGRhdGFSZXNwb25zZS0+bWVzc2FnZVsnY2h1cm4nXTsKCQkkZHluYW1pY0NvbnRlbnQgPSBNTV9SZXBvcnREeW5hbWljQ29udGVudDo6Y3JlYXRlTnVtZXJpY0R5bmFtaWNDb250ZW50KHNlbGY6OiRSQU5HRV9BREpVU1RFRF9DSFVSTiwgJGNodXJuLCIlIik7CgkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgkZHluYW1pY0NvbnRlbnQtPnJlbmRlcigpKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmV0ZW50aW9uUmF0ZSgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpCgl7CgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksIHNlbGY6OiREQVNIQk9BUkRfQ0hVUk5fUkVURU5USU9OX1JBVEVfUVVFUlksICRwYXJhbXMsIiIsZmFsc2UpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQlpZiAoIWlzX2FycmF5KCRkYXRhUmVzcG9uc2UtPm1lc3NhZ2UpIHx8ICFpc3NldCgkZGF0YVJlc3BvbnNlLT5tZXNzYWdlWydyZXRlbnRpb25fcmF0ZSddKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIkVycm9yIGNhbGN1bGF0aW5nIHJldGVudGlvbiByYXRlIixNTV9SZXBvcnRSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHJldGVudGlvblJhdGUgPSAkZGF0YVJlc3BvbnNlLT5tZXNzYWdlWydyZXRlbnRpb25fcmF0ZSddOwoJCSRkeW5hbWljQ29udGVudCA9IE1NX1JlcG9ydER5bmFtaWNDb250ZW50OjpjcmVhdGVOdW1lcmljRHluYW1pY0NvbnRlbnQoc2VsZjo6JFJBTkdFX0FESlVTVEVEX1JFVEVOVElPTl9SQVRFLCAkcmV0ZW50aW9uUmF0ZSwiJSIpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGR5bmFtaWNDb250ZW50LT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFJldmVudWVCeVVuaXQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQsICRkaXJlY3RpdmVzLCR1bml0PSJEQVkiKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoIWlzX2FycmF5KCRwYXJhbXMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIERhc2hib2FyZCByZXZlbnVlIGRhdGE6IEltcHJvcGVyIHBhcmFtZXRlciBmb3JtYXQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoZW1wdHkoJHBhcmFtc1snc3RhcnRfZGF0ZSddKSB8fCBlbXB0eSgkcGFyYW1zWydlbmRfZGF0ZSddKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBhdmVyYWdlIGRhaWx5IHJldmVudWUgY29udGVudDogU3RhcnQgYW5kIEVuZCBkYXRlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkc3RhcnREYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiLHN0cnRvdGltZSgkcGFyYW1zWydzdGFydF9kYXRlJ10pKTsgLy9teXNxbCBmb3JtYXQKCQkkZW5kRGF0ZSA9ICAgZGF0ZSgiWS1tLWQgSDppOnMiLHN0cnRvdGltZSgkcGFyYW1zWydlbmRfZGF0ZSddKSk7CgkJCgkJJHRyYW5zYWN0aW9uc1RhYmxlID0gTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HOwoJCSRwYXltZW50VHJhbnNhY3Rpb25UeXBlcyA9IGltcGxvZGUoIiwiLGFycmF5KE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5ULE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCkpOwoJCQoJCWlmICgkdW5pdCAhPSAiQUxMVElNRSIpCgkJewoJCQkkc3FsID0gInNlbGVjdCBYLnRvdGFsX3JldmVudWUvWS50b3RhbF90aW1lX3VuaXRzIEFTIHJldmVudWUgRlJPTSAoU0VMRUNUIEFCUyhTVU0oYW1vdW50KSkgQVMgdG90YWxfcmV2ZW51ZSBGUk9NIHskdHJhbnNhY3Rpb25zVGFibGV9IFdIRVJFICIuCgkJCQkgICAidHJhbnNhY3Rpb25fdHlwZSBJTiAoeyRwYXltZW50VHJhbnNhY3Rpb25UeXBlc30pIEFORCB0cmFuc2FjdGlvbl9kYXRlIEJFVFdFRU4gJ3skc3RhcnREYXRlfScgQU5EICd7JGVuZERhdGV9JykgQVMgWCwgIi4KCQkJCSAgICIoU0VMRUNUIFRJTUVTVEFNUERJRkYoeyR1bml0fSwneyRzdGFydERhdGV9JywneyRlbmREYXRlfScpIEFTIHRvdGFsX3RpbWVfdW5pdHMpIEFTIFkiOwoJCX0KCQllbHNlIAoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgQUJTKFNVTShhbW91bnQpKSBBUyByZXZlbnVlIEZST00geyR0cmFuc2FjdGlvbnNUYWJsZX0gV0hFUkUgIi4KCQkJCSAgICJ0cmFuc2FjdGlvbl90eXBlIElOICh7JHBheW1lbnRUcmFuc2FjdGlvblR5cGVzfSkgQU5EIHRyYW5zYWN0aW9uX2RhdGUgQkVUV0VFTiAneyRzdGFydERhdGV9JyBBTkQgJ3skZW5kRGF0ZX0nIjsKCQl9CgkJJHJldmVudWUgPSAkd3BkYi0+Z2V0X3Zhcigkc3FsKTsKCQkKCQkkbWV0YU92ZXJyaWRlID0gYXJyYXkoJ2ludF9mcmFjX2RpZ2l0cyc9PjAsJ3Bvc3RmaXhfaXNvJz0+ZmFsc2UpOwoJCSRyZXZlbnVlID0gX21tb2YoJHJldmVudWUsTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpLCRtZXRhT3ZlcnJpZGUpOyAKCQkkZHluYW1pY0NvbnRlbnQgPSBNTV9SZXBvcnREeW5hbWljQ29udGVudDo6Y3JlYXRlRnJvbUNvbnRlbnQoJGVsZW1lbnRJZGVudGlmaWVyLCRyZXZlbnVlKTsKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRkeW5hbWljQ29udGVudC0+cmVuZGVyKCkpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVSZXRlbnRpb25EdXJhdGlvbkRhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGN1cnJlbnRUaW1lID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJJHNxbCA9ICJTRUxFQ1QgQ09VTlQoKikgQVMgbnVtX21lbWJlcnMsIFNVTShUSU1FU1RBTVBESUZGKEhPVVIsbXVkLmJlY2FtZV9hY3RpdmUsSUYobXVkLnN0YXR1cz0yLG11ZC5zdGF0dXNfdXBkYXRlZCwneyRjdXJyZW50VGltZX0nKSkpIEFTIHJldGVudGlvbl9ob3VycyBGUk9NICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgbXVkICIuCgkJCQkiSU5ORVIgSk9JTiAoU0VMRUNUIERJU1RJTkNUIG8udXNlcl9pZCBGUk9NICIuTU1fVEFCTEVfT1JERVJTLiIgbyBJTk5FUiBKT0lOICIuTU1fVEFCTEVfT1JERVJfSVRFTVMuIiBvaSBPTiAoby5pZCA9IG9pLm9yZGVyX2lkKSBXSEVSRSBvaS5pc19yZWN1cnJpbmc9MSkgQVMgUSBPTiAiLgoJCQkJIihtdWQud3BfdXNlcl9pZCA9IFEudXNlcl9pZCkiOwoJCSRyYXdOdW1iZXJzID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYgKGlzX251bGwoJHJhd051bWJlcnMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnREYXRhc2V0KCJlcnJvciBleGVjdXRpbmcgcXVlcnkiLE1NX1JlcG9ydERhdGFzZXQ6OiRFUlJPUik7CgkJfQoJCSRkYXRhc2V0ID0gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlU2luZ2xlUmVwb3J0RGF0YXNldCgkcGFyYW1zLCRyYXdOdW1iZXJzKTsKCQlyZXR1cm4gJGRhdGFzZXQ7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZVRvdGFsQ3VzdG9tZXJWYWx1ZURhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy9nZXQgZnJhYyBkaWdpdHMgYmFzZWQgb24gdGhlIGFjdGl2ZSBjdXJyZW5jeQoJCSRjdXJyZW5jeU1ldGFkYXRhID0gTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeU1ldGFkYXRhKCk7CgkJJGZyYWNEaWdpdHMgPSBpc3NldCgkY3VycmVuY3lNZXRhZGF0YVsnaW50X2ZyYWNfZGlnaXRzJ10pP2ludHZhbCgkY3VycmVuY3lNZXRhZGF0YVsnaW50X2ZyYWNfZGlnaXRzJ10pOjI7CgkJCgkJJGV4Y2x1ZGVkVXNlclN0YXR1c2VzID0gaW1wbG9kZSgiLCIsYXJyYXkoTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OLE1NX1N0YXR1czo6JEVSUk9SKSk7CgkJJHBheW1lbnRUcmFuc2FjdGlvblR5cGVzID0gaW1wbG9kZSgiLCIsYXJyYXkoTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UKSk7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgSUYgKFkubWVtYmVyX2NvdW50PjAsKFgudG90YWxfcmV2ZW51ZS9ZLm1lbWJlcl9jb3VudCksMCkgQVMgY3VzdG9tZXJfdmFsdWUgRlJPTSAiLgoJCQkJIihTRUxFQ1QgSUZOVUxMKEFCUyhTVU0odC5hbW91bnQpKSwwKSBBUyB0b3RhbF9yZXZlbnVlIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiB0IFdIRVJFICIuCgkJCQkidC50cmFuc2FjdGlvbl90eXBlIElOICh7JHBheW1lbnRUcmFuc2FjdGlvblR5cGVzfSkpIEFTIFgsICIuCgkJCQkiKFNFTEVDVCBDT1VOVCgqKSBBUyBtZW1iZXJfY291bnQgRlJPTSAiLk1NX1RBQkxFX1VTRVJfREFUQS4iIFdIRVJFIHN0YXR1cyBOT1QgSU4gIi4KCQkJCSIoeyRleGNsdWRlZFVzZXJTdGF0dXNlc30pKSBBUyBZIjsKCQkkY3VzdG9tZXJWYWx1ZSA9ICR3cGRiLT5nZXRfdmFyKCRzcWwpOwoKCQlpZiAoaXNfbnVsbCgkY3VzdG9tZXJWYWx1ZSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydERhdGFzZXQoImVycm9yIGV4ZWN1dGluZyBxdWVyeSIsTU1fUmVwb3J0RGF0YXNldDo6JEVSUk9SKTsKCQl9CgkJJGN1c3RvbWVyVmFsdWUgPSBpc19udWxsKCRjdXN0b21lclZhbHVlKT8wLjAwOnJvdW5kKCRjdXN0b21lclZhbHVlLCRmcmFjRGlnaXRzKTsgCgkJJGRhdGFzZXQgPSBNTV9SZXBvcnREYXRhc2V0OjpjcmVhdGVTaW5nbGVSZXBvcnREYXRhc2V0KCRwYXJhbXMsJGN1c3RvbWVyVmFsdWUpOwoJCXJldHVybiAkZGF0YXNldDsKCX0KCQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVEYXRhKCRxdWVyeUlkZW50aWZpZXIsICRwYXJhbXMpCgl7CgkJc3dpdGNoICgkcXVlcnlJZGVudGlmaWVyKQoJCXsKCQkJY2FzZSBzZWxmOjokREFTSEJPQVJEX1JFVkVOVUVfUVVFUlk6CgkJCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVSZXZlbnVlRGF0YSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQljYXNlIHNlbGY6OiREQVNIQk9BUkRfUkVURU5USU9OX0RVUkFUSU9OX1FVRVJZOgoJCQkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlUmV0ZW50aW9uRHVyYXRpb25EYXRhKCRwYXJhbXMpOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JERBU0hCT0FSRF9UT1RBTF9DVVNUT01FUl9WQUxVRV9RVUVSWToKCQkJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVRvdGFsQ3VzdG9tZXJWYWx1ZURhdGEoJHBhcmFtcyk7IAoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JERBU0hCT0FSRF9DSFVSTl9SRVRFTlRJT05fUkFURV9RVUVSWToKCQkJCXJldHVybiBzZWxmOjpnZW5lcmF0ZUNodXJuQW5kUmV0ZW50aW9uRGF0YSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZ2VuZXJhdGluZyBkYXRhIGZvciB1bmtub3duIHF1ZXJ5IGlkZW50aWZpZXIgeyRxdWVyeUlkZW50aWZpZXJ9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKfQoK', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(45, 'coupon', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCgpjbGFzcyBNTV9Db3Vwb24gZXh0ZW5kcyBNTV9FbnRpdHkKewoJcHVibGljIHN0YXRpYyAkVFlQRV9QRVJDRU5UQUdFID0gInBlcmNlbnRhZ2UiOwoJcHVibGljIHN0YXRpYyAkVFlQRV9ET0xMQVIgPSAiZG9sbGFyIjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfRlJFRSA9ICJmcmVlIjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfUkVDVVJSSU5HX0JJTExJTkdfU0VUVElOR19BTEwgPSAiYWxsIjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfUkVDVVJSSU5HX0JJTExJTkdfU0VUVElOR19GSVJTVCA9ICJmaXJzdCI7CgkKCXB1YmxpYyAkc2hvdWxkVXBkYXRlUHJvZHVjdHMgPSB0cnVlOwoKCXByaXZhdGUgJGNvdXBvbkNvZGUgPSAiIjsKCXByaXZhdGUgJGNvdXBvblR5cGUgPSAiIjsKCXByaXZhdGUgJGNvdXBvblZhbHVlID0gIiI7Cglwcml2YXRlICRjb3Vwb25WYWx1ZUN1cnJlbmN5ID0gIiI7Cglwcml2YXRlICRkZXNjcmlwdGlvbiA9ICIiOwoJcHJpdmF0ZSAkcXVhbnRpdHkgPSAiIjsKCXByaXZhdGUgJHN0YXJ0RGF0ZSA9ICIiOwoJcHJpdmF0ZSAkZW5kRGF0ZSA9ICIiOwoJcHJpdmF0ZSAkY291cG9uTmFtZSA9ICIiOwoJcHJpdmF0ZSAkcmVjdXJyaW5nQmlsbGluZ1NldHRpbmcgPSAiZmlyc3QiOwoJcHJpdmF0ZSAkaXNHaWZ0ID0gZmFsc2U7Cglwcml2YXRlICRpc0FyY2hpdmVkID0gZmFsc2U7Cglwcml2YXRlICRnaWZ0VXNlcklkID0gIiI7Cglwcml2YXRlICRnaWZ0T3JkZXJJdGVtSWQgPSAiIjsKCXByaXZhdGUgJHByb2R1Y3RzID0gYXJyYXkoKTsKCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0NPVVBPTlMuIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIiciOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCgkJaWYoJHJlc3VsdCkKCQl7CgkJCSR0aGlzLT5zZXREYXRhKCRyZXN1bHQpOwoJCX0KCQllbHNlIAoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCQoJcHVibGljIGZ1bmN0aW9uIGhhc1Byb2R1Y3QoJHByb2R1Y3RJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJzZWxlY3QgY291bnQoKikgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX0NPVVBPTl9SRVNUUklDVElPTlMuIgoJCQkJCSB3aGVyZSBjb3Vwb25faWQ9J3skdGhpcy0+aWR9JyAiOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZigkcm93LT50b3RhbD4wKQoJCXsKCQkJJHNxbCA9ICJzZWxlY3QgY291bnQoKikgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX0NPVVBPTl9SRVNUUklDVElPTlMuIgoJCQkJCQkgd2hlcmUgY291cG9uX2lkPSd7JHRoaXMtPmlkfScgYW5kIHByb2R1Y3RfaWQ9J3skcHJvZHVjdElkfScgIjsKCQkJCgkJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJcmV0dXJuICRyb3ctPnRvdGFsPjA7CgkJfQoJCXJldHVybiB0cnVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Rm9ybUZpZWxkcygpCgl7CgkJJGluZm8gPSBuZXcgc3RkQ2xhc3MoKTsKCQkkaW5mby0+Y291cG9uX2NvZGUgPSAkdGhpcy0+Y291cG9uQ29kZTsKCQkkaW5mby0+Y291cG9uX3R5cGUgPSAkdGhpcy0+Y291cG9uVHlwZTsKCQkkaW5mby0+Y291cG9uX3ZhbHVlID0gJHRoaXMtPmNvdXBvblZhbHVlOwoJCSRpbmZvLT5kZXNjcmlwdGlvbiA9ICR0aGlzLT5kZXNjcmlwdGlvbjsKCQkkaW5mby0+cXVhbnRpdHkgPSAkdGhpcy0+cXVhbnRpdHk7CgkJJGluZm8tPnN0YXJ0X2RhdGUgPSAkdGhpcy0+c3RhcnREYXRlOwoJCSRpbmZvLT5lbmRfZGF0ZSA9ICR0aGlzLT5lbmREYXRlOwoJCSRpbmZvLT5jb3Vwb25fbmFtZSA9ICR0aGlzLT5jb3Vwb25OYW1lOwoJCSRpbmZvLT5yZWN1cnJpbmdfYmlsbGluZ19zZXR0aW5nID0gJHRoaXMtPnJlY3VycmluZ0JpbGxpbmdTZXR0aW5nOwoJCSRpbmZvLT5wcm9kdWN0cyA9ICR0aGlzLT5wcm9kdWN0czsKCQkkaW5mby0+aXNfYXJjaGl2ZWQgPSAkdGhpcy0+aXNBcmNoaXZlZDsKCQlyZXR1cm4gJGluZm87Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5IAoJCXsKCQkJJHRoaXMtPmNvdXBvbkNvZGUgPSAkZGF0YS0+Y291cG9uX2NvZGU7CgkJCSR0aGlzLT5jb3Vwb25UeXBlID0gJGRhdGEtPmNvdXBvbl90eXBlOwoJCQkkdGhpcy0+Y291cG9uVmFsdWUgPSAkZGF0YS0+Y291cG9uX3ZhbHVlOwoJCQkkdGhpcy0+Y291cG9uVmFsdWVDdXJyZW5jeSA9ICRkYXRhLT5jb3Vwb25fdmFsdWVfY3VycmVuY3k7CgkJCSR0aGlzLT5kZXNjcmlwdGlvbiA9ICRkYXRhLT5kZXNjcmlwdGlvbjsKCQkJJHRoaXMtPnF1YW50aXR5ID0gJGRhdGEtPnF1YW50aXR5OwoJCQkkdGhpcy0+c3RhcnREYXRlID0gJGRhdGEtPnN0YXJ0X2RhdGU7CgkJCSR0aGlzLT5lbmREYXRlID0gJGRhdGEtPmVuZF9kYXRlOwoJCQkkdGhpcy0+cmVjdXJyaW5nQmlsbGluZ1NldHRpbmcgPSAkZGF0YS0+cmVjdXJyaW5nX2JpbGxpbmdfc2V0dGluZzsKCQkJJHRoaXMtPmlzR2lmdCA9IChpc3NldCgkZGF0YS0+aXNfZ2lmdCkgJiYgJGRhdGEtPmlzX2dpZnQgPT0gMSk/dHJ1ZTpmYWxzZTsKCQkJJHRoaXMtPmlzQXJjaGl2ZWQgPSAoaXNzZXQoJGRhdGEtPmlzX2FyY2hpdmVkKSAmJiAkZGF0YS0+aXNfYXJjaGl2ZWQgPT0gMSk/dHJ1ZTpmYWxzZTsKCQkJJHRoaXMtPmdpZnRVc2VySWQgPSAoaXNzZXQoJGRhdGEtPmdpZnRfdXNlcl9pZCkpID8gJGRhdGEtPmdpZnRfdXNlcl9pZDowOwoJCQkkdGhpcy0+Z2lmdE9yZGVySXRlbUlkID0gKGlzc2V0KCRkYXRhLT5naWZ0X29yZGVyX2l0ZW1faWQpKSA/ICRkYXRhLT5naWZ0X29yZGVyX2l0ZW1faWQ6MDsKCQkJJHRoaXMtPmNvdXBvbk5hbWUgPSAkZGF0YS0+Y291cG9uX25hbWU7CgkJCQoJCQlpZihpc3NldCgkZGF0YS0+cHJvZHVjdHMpICYmIGlzX2FycmF5KCRkYXRhLT5wcm9kdWN0cykpCgkJCXsKCQkJCSR0aGlzLT5wcm9kdWN0cyA9ICRkYXRhLT5wcm9kdWN0czsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSR0aGlzLT5nZXRBc3NvY1Byb2R1Y3RzKCk7CgkJCX0KCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBc3NvY1Byb2R1Y3RzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfQ09VUE9OX1JFU1RSSUNUSU9OUy4iIHdoZXJlIGNvdXBvbl9pZD0neyR0aGlzLT5pZH0nIjsKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQkkcHJvZHVjdHMgPSBhcnJheSgpOwoJCWlmKGlzX2FycmF5KCRyb3dzKSAmJiBjb3VudCgkcm93cyk+MCl7CgkJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQkJewoJCQkJJHByb2R1Y3RzWyRyb3ctPnByb2R1Y3RfaWRdID0gJHJvdy0+cHJvZHVjdF9pZDsKCQkJfQoJCX0KCQkkdGhpcy0+cHJvZHVjdHMgPSRwcm9kdWN0czsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlUHJvZHVjdHMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZigkdGhpcy0+c2hvdWxkVXBkYXRlUHJvZHVjdHMpCgkJewoJCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQ09VUE9OX1JFU1RSSUNUSU9OUy4iIHdoZXJlIGNvdXBvbl9pZD0neyR0aGlzLT5pZH0nIjsKCQkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQlpZighZW1wdHkoJHRoaXMtPnByb2R1Y3RzKSAmJiBpc19hcnJheSgkdGhpcy0+cHJvZHVjdHMpKXsKCQkJCWZvcmVhY2goJHRoaXMtPnByb2R1Y3RzIGFzICRrPT4kdil7CgkJCQkJJHNxbCA9ICJpbnNlcnQgaW50byAiLk1NX1RBQkxFX0NPVVBPTl9SRVNUUklDVElPTlMuIiBzZXQKCQkJCQkJY291cG9uX2lkPSd7JHRoaXMtPmlkfScsCgkJCQkJCXByb2R1Y3RfaWQ9JXMsCgkJCQkJCWRhdGVfYWRkZWQ9Tk9XKCksCgkJCQkJCWRhdGVfbW9kaWZpZWQ9Tk9XKCkKCQkJCQkiOwoJCQkJCQoJCQkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkc3FsLCRrKSk7CgkJCQl9CgkJCX0KCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZW1vdmUoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0iZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9DT1VQT05TLiIgd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyBsaW1pdCAxIjsKCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJJHRoaXMtPmludmFsaWRhdGUoKTsKCX0KCglwcml2YXRlIGZ1bmN0aW9uIGNvZGVFeGlzdHMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCBmcm9tICIuTU1fVEFCTEVfQ09VUE9OUy4iIHdoZXJlIGNvdXBvbl9jb2RlPSciLiR0aGlzLT5jb3Vwb25Db2RlLiInIGFuZCBpZCAhPSciLiR0aGlzLT5pZC4iJyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCXJldHVybiAkcm93LT50b3RhbD4wOwkKCX0KCQkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoJHRoaXMtPmNvZGVFeGlzdHMoKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJGNvdXBvbkRhdGEgPSBhcnJheSgKCQkJCSJjb3Vwb25fY29kZSIgICAgICAgICAgICAgICAgID0+ICR0aGlzLT5jb3Vwb25Db2RlLAoJCQkJImNvdXBvbl90eXBlIiAgICAgICAgICAgICAgICAgPT4gJHRoaXMtPmNvdXBvblR5cGUsCgkJCQkiY291cG9uX3ZhbHVlIiAgICAgICAgICAgICAgICA9PiAkdGhpcy0+Y291cG9uVmFsdWUsCgkJCQkiY291cG9uX3ZhbHVlX2N1cnJlbmN5IiAgICAgICA9PiAoJHRoaXMtPmNvdXBvblR5cGUgPT0gTU1fQ291cG9uOjokVFlQRV9ET0xMQVIpP01NX0N1cnJlbmN5VXRpbDo6Z2V0QWN0aXZlQ3VycmVuY3koKTpudWxsLAoJCQkJImRlc2NyaXB0aW9uIiAgICAgICAgICAgICAgICAgPT4gJHRoaXMtPmRlc2NyaXB0aW9uLAoJCQkJInJlY3VycmluZ19iaWxsaW5nX3NldHRpbmciICAgPT4gJHRoaXMtPnJlY3VycmluZ0JpbGxpbmdTZXR0aW5nLAoJCQkJInF1YW50aXR5IiAgICAgICAgICAgICAgICAgICAgPT4gJHRoaXMtPnF1YW50aXR5LAoJCQkJInN0YXJ0X2RhdGUiICAgICAgICAgICAgICAgICAgPT4gJHRoaXMtPnN0YXJ0RGF0ZSwKCQkJCSJlbmRfZGF0ZSIgICAgICAgICAgICAgICAgICAgID0+ICR0aGlzLT5lbmREYXRlLAoJCQkJImNvdXBvbl9uYW1lIiAgICAgICAgICAgICAgICAgPT4gJHRoaXMtPmNvdXBvbk5hbWUsCgkJCQkiZGF0ZV9tb2RpZmllZCIgICAgICAgICAgICAgICA9PiBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwKCQkJCSJpc19naWZ0IgkJCQkJICA9PiAoJHRoaXMtPmlzR2lmdCk/MTowLAoJCQkJImlzX2FyY2hpdmVkIgkJCQkgID0+ICgkdGhpcy0+aXNBcmNoaXZlZCk/MTowLAoJCQkJImdpZnRfdXNlcl9pZCIJCQkJICA9PiAkdGhpcy0+Z2lmdFVzZXJJZCwKCQkJCSJnaWZ0X29yZGVyX2l0ZW1faWQiCQkgID0+ICR0aGlzLT5naWZ0T3JkZXJJdGVtSWQsCgkJKTsKCQkKCQlpZihpbnR2YWwoJHRoaXMtPmlkKT4wKQoJCXsKCQkJaWYgKCR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQ09VUE9OUywkY291cG9uRGF0YSwgYXJyYXkoImlkIj0+JHRoaXMtPmlkKSkgIT09IGZhbHNlKQoJCQl7CgkJCQkkdGhpcy0+c2F2ZVByb2R1Y3RzKCk7CgkJCQlyZXR1cm4gJHRoaXMtPmlkOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCWlmICgkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0NPVVBPTlMsJGNvdXBvbkRhdGEpICE9PSBmYWxzZSkKCQkJewoJCQkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkJCSR0aGlzLT5zYXZlUHJvZHVjdHMoKTsKCQkJCXJldHVybiAkdGhpcy0+aWQ7CgkJCX0KCgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQkKCQkKCS8qKiBHRVRURVJTIC8gU0VUVEVSUyAqKi8KCQoJcHVibGljIGZ1bmN0aW9uIHNldFByb2R1Y3RzKCRwcm9kcykKCXsKCQkkdGhpcy0+cHJvZHVjdHMgPSAkcHJvZHM7IAoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvZHVjdHMoKQoJewoJCXJldHVybiAkdGhpcy0+cHJvZHVjdHM7IAoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRDb3Vwb25Db2RlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmNvdXBvbkNvZGU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldENvdXBvbkNvZGUoJHZhbCkKCXsKCQkkdGhpcy0+Y291cG9uQ29kZSA9ICR2YWw7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldENvdXBvblR5cGUoKQoJewoJCXJldHVybiAkdGhpcy0+Y291cG9uVHlwZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0Q291cG9uVHlwZSgkdmFsKQoJewoJCSR0aGlzLT5jb3Vwb25UeXBlID0gJHZhbDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q291cG9uVmFsdWUoJGRvRm9ybWF0PWZhbHNlKQoJewoJCWlmICgkdGhpcy0+Z2V0Q291cG9uVHlwZSgpID09IE1NX0NvdXBvbjo6JFRZUEVfRE9MTEFSKQoJCXsKCQkJcmV0dXJuICRkb0Zvcm1hdCA/IF9tbWYoJHRoaXMtPmNvdXBvblZhbHVlLCR0aGlzLT5jb3Vwb25WYWx1ZUN1cnJlbmN5KSA6IG51bWJlcl9mb3JtYXQoZmxvYXR2YWwoJHRoaXMtPmNvdXBvblZhbHVlKSxNTV9DdXJyZW5jeVV0aWw6OmdldFByZWNpc2lvbkZvckN1cnJlbmN5KCR0aGlzLT5jb3Vwb25WYWx1ZUN1cnJlbmN5KSwnLicsJycpOwoJCX0KCQllbHNlIAoJCXsKCQkJLy90aGlzIG1lYW5zIGl0cyBlaXRoZXIgZnJlZSBvciBhIHBlcmNlbnRhZ2Ugb2ZmCgkJCXJldHVybiBudW1iZXJfZm9ybWF0KGZsb2F0dmFsKCR0aGlzLT5jb3Vwb25WYWx1ZSksMCwnLicsJycpOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0Q291cG9uVmFsdWUoJHZhbCkKCXsKCQkkdGhpcy0+Y291cG9uVmFsdWUgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXREZXNjcmlwdGlvbigpCgl7CgkJcmV0dXJuICR0aGlzLT5kZXNjcmlwdGlvbjsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0RGVzY3JpcHRpb24oJHZhbCkKCXsKCQkkdGhpcy0+ZGVzY3JpcHRpb24gPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRRdWFudGl0eSgpCgl7CgkJaWYoJHRoaXMtPnF1YW50aXR5ID09ICItMSIpCgkJewoJCQlyZXR1cm4gIiI7CgkJfQoJCQoJCXJldHVybiAkdGhpcy0+cXVhbnRpdHk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldFF1YW50aXR5KCR2YWwpCgl7CgkJaWYoJHRoaXMtPnF1YW50aXR5ID09ICIiIHx8ICR0aGlzLT5xdWFudGl0eSA9PSAiLTEiIHx8IHN0cnRvbG93ZXIoJHRoaXMtPnF1YW50aXR5KSA9PSAidW5saW1pdGVkIikKCQl7CgkJCSR0aGlzLT5xdWFudGl0eSA9ICAiLTEiOwoJCX0KCQkKCQkkdGhpcy0+cXVhbnRpdHkgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRTdGFydERhdGUoJGZvcm1hdHRlZD10cnVlKQoJewoJCWlmKCRmb3JtYXR0ZWQpCgkJewoJCQlpZihlbXB0eSgkdGhpcy0+c3RhcnREYXRlKSkKCQkJewoJCQkJcmV0dXJuIE1NX1V0aWxzOjpkYXRlVG9Mb2NhbChNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwgIm0vZC9ZIik7CgkJCX0KCQkJCgkJCWlmKHByZWdfbWF0Y2goIi8oMDAwMCkvIiwgJHRoaXMtPnN0YXJ0RGF0ZSkpCgkJCXsKCQkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCksICJtL2QvWSIpOwoJCQl9CgkJCQoJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5zdGFydERhdGUsICJtL2QvWSIpOwoJCX0KCQkKCQlyZXR1cm4gJHRoaXMtPnN0YXJ0RGF0ZTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0U3RhcnREYXRlKCR2YWwpCgl7CgkJJHRoaXMtPnN0YXJ0RGF0ZSA9ICR2YWw7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldEVuZERhdGUoJGZvcm1hdHRlZD10cnVlKQoJewoJCWlmKCRmb3JtYXR0ZWQpCgkJewoJCQlpZihlbXB0eSgkdGhpcy0+ZW5kRGF0ZSkpCgkJCXsKCQkJCXJldHVybiAiIjsKCQkJfQoJCQkKCQkJaWYocHJlZ19tYXRjaCgiLygwMDAwKS8iLCR0aGlzLT5lbmREYXRlKSkKCQkJewoJCQkJcmV0dXJuICIiOwoJCQl9CgkJCQoJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5lbmREYXRlLCAibS9kL1kiKTsKCQl9CgkJCgkJcmV0dXJuICR0aGlzLT5lbmREYXRlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRFbmREYXRlKCR2YWwpCgl7CgkJJHRoaXMtPmVuZERhdGUgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZWN1cnJpbmdCaWxsaW5nU2V0dGluZygpCgl7CgkJcmV0dXJuICR0aGlzLT5yZWN1cnJpbmdCaWxsaW5nU2V0dGluZzsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0UmVjdXJyaW5nQmlsbGluZ1NldHRpbmcoJHZhbCkKCXsKCQkkdGhpcy0+cmVjdXJyaW5nQmlsbGluZ1NldHRpbmcgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRDb3Vwb25OYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmNvdXBvbk5hbWU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldENvdXBvbk5hbWUoJHZhbCkKCXsKCQkkdGhpcy0+Y291cG9uTmFtZSA9ICR2YWw7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRJc0FyY2hpdmVkKCRpc0FyY2hpdmVkKQoJewoJCSR0aGlzLT5pc0FyY2hpdmVkID0gKGJvb2wpJGlzQXJjaGl2ZWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpc0FyY2hpdmVkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmlzQXJjaGl2ZWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRJc0dpZnQoJGlzR2lmdCkKCXsKCQkkdGhpcy0+aXNHaWZ0ID0gKGJvb2wpJGlzR2lmdDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGlzR2lmdCgpCgl7CgkJcmV0dXJuICR0aGlzLT5pc0dpZnQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldEdpZnRVc2VySWQoKQoJewoJCXJldHVybiAkdGhpcy0+Z2lmdFVzZXJJZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0R2lmdFVzZXJJZCgkdXNlcklkKQoJewoJCSR0aGlzLT5naWZ0VXNlcklkID0gJHVzZXJJZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0R2lmdE9yZGVySXRlbUlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmdpZnRPcmRlckl0ZW1JZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0R2lmdE9yZGVySXRlbUlkKCRvcmRlckl0ZW1JZCkKCXsKCQkkdGhpcy0+Z2lmdE9yZGVySXRlbUlkID0gJG9yZGVySXRlbUlkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDb3Vwb25WYWx1ZUN1cnJlbmN5KCRjdXJyZW5jeSkKCXsKCQkkdGhpcy0+Y291cG9uVmFsdWVDdXJyZW5jeSA9ICRjdXJyZW5jeTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q291cG9uVmFsdWVDdXJyZW5jeSgpCgl7CgkJcmV0dXJuICR0aGlzLT5jb3Vwb25WYWx1ZUN1cnJlbmN5OwoJfQoJCgkKCS8qKiBVVElMSVRJRVMgKiovCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RGF0YUJ5Q29kZSgkY291cG9uQ29kZSkKCXsKCQkkY291cG9uID0gbmV3IE1NX0NvdXBvbigpOwoJCQoJCWlmKCFlbXB0eSgkY291cG9uQ29kZSkpCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCSRzcWwgPSAkd3BkYi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0NPVVBPTlMuIiBXSEVSRSBjb3Vwb25fY29kZT0lcyIsJGNvdXBvbkNvZGUpOwoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJCWlmKCRyZXN1bHQpCgkJCXsKCQkJCSRjb3Vwb24tPnNldElkKCRyZXN1bHQtPmlkKTsKCQkJCSRjb3Vwb24tPnNldERhdGEoJHJlc3VsdCk7CgkJCX0KCQl9CgkKCQlyZXR1cm4gJGNvdXBvbjsKCX0KCQkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q291cG9uQWx0SW5mbygkdXNlcklkLCAkcHJvZHVjdElkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gInNlbGVjdCBjLiogZnJvbSAiLk1NX1RBQkxFX0NPVVBPTl9VU0FHRS4iIHUsICIuTU1fVEFCTEVfQ09VUE9OUy4iIGMKCQkJCQl3aGVyZQoJCQkJCQl1LnVzZXJfaWQ9J3skdXNlcklkfScgYW5kIAoJCQkJCQl1LiBwcm9kdWN0X2lkPSd7JHByb2R1Y3RJZH0nIGFuZCAKCQkJCQkJdS5jb3Vwb25faWQ9Yy5pZCBsaW1pdCAxICAiOwoJCQoJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlyZXR1cm4gJHJvdzsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1c2VySGFzUHJvZHVjdENvdXBvbigkdXNlcklkLCAkcHJvZHVjdElkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCBmcm9tICIuTU1fVEFCTEVfQ09VUE9OX1VTQUdFLiIKCQkJCQl3aGVyZSB1c2VyX2lkPSd7JHVzZXJJZH0nIGFuZCBwcm9kdWN0X2lkPSd7JHByb2R1Y3RJZH0nICAiOwoJCQoJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlyZXR1cm4gJHJvdy0+dG90YWw+MDsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZW1vdmVVc2VkKE1NX09yZGVyICRvcmRlcikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHByb2R1Y3RzID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCWlmKGlzX2FycmF5KCRwcm9kdWN0cykgJiYgY291bnQoJHByb2R1Y3RzKT4wKQoJCXsKCQkJZm9yZWFjaCgkcHJvZHVjdHMgYXMgJG9yZGVySXRlbSl7CgkJCQlpZigkb3JkZXJJdGVtIGluc3RhbmNlb2YgIE1NX09yZGVySXRlbSl7IAoJCQkJCSRzcWwgPSAiZGVsZXRlIGZyb20gCgkJCQkJCQkJIi5NTV9UQUJMRV9DT1VQT05fVVNBR0UuIiAKCQkJCQkJCXdoZXJlCgkJCQkJCQkJcHJvZHVjdF9vcmRlcl9pdGVtX2lkID0gJ3skb3JkZXJJdGVtLT5nZXRJZCgpfScgQU5EIAoJCQkJCQkJCXVzZXJfaWQgPSAneyRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKX0nIEFORCAKCQkJCQkJCQlwcm9kdWN0X2lkID0gJ3skb3JkZXJJdGVtLT5nZXRJdGVtSWQoKX0nIAoJCQkJCQkJbGltaXQgMQoJCQkJCSI7IAoJCQkJCSR3cGRiLT5xdWVyeSgkc3FsKTsgCgkJCQl9ICAKCQkJfQoJCX0KCX0KCQkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYWRkVXNlZCgkY29kZSwgJHVzZXJJZCwgJHByb2R1Y3RJZCwgJG9yZGVySXRlbUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkY291cG9uID0gTU1fQ291cG9uOjpnZXREYXRhQnlDb2RlKCRjb2RlKTsKCQkKCQlpZigkY291cG9uLT5pc1ZhbGlkKCkpCgkJewoJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfQ09VUE9OX1VTQUdFLiIgc2V0IAoJCQkJY291cG9uX2lkID0gJyIuJGNvdXBvbi0+Z2V0SWQoKS4iJywgCgkJCQl1c2VyX2lkID0gJ3skdXNlcklkfScsIAoJCQkJcHJvZHVjdF9pZCA9ICd7JHByb2R1Y3RJZH0nLAoJCQkJcHJvZHVjdF9vcmRlcl9pdGVtX2lkID0gJ3skb3JkZXJJdGVtSWR9JwoJCQkiOwoJCQkKCQkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCX0KCX0KCQoJCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBoYXNBdmFpbGFibGVDb3Vwb24oJGNvZGU9IiIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRteXNxbE5vdyA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCSRjb2RlU1FMID0gZW1wdHkoJGNvZGUpPyIiOiR3cGRiLT5wcmVwYXJlKCIoYy5jb3Vwb25fY29kZT0lcykgQU5EICIsJGNvZGUpOwoJCSRzcWwgPSAiU0VMRUNUIGMuaWQgRlJPTSAiLk1NX1RBQkxFX0NPVVBPTlMuIiBjICIuCgkJCSAgICJXSEVSRSB7JGNvZGVTUUx9Ii4KCQkJICAgIihjLmlzX2FyY2hpdmVkID0gJzAnKSBBTkQgKGMuc3RhcnRfZGF0ZSA8PSAneyRteXNxbE5vd30nKSBBTkQgKChjLmVuZF9kYXRlID0gJycpIE9SIChjLmVuZF9kYXRlIExJS0UgJzAwMDAtJScpIE9SIChjLmVuZF9kYXRlID49ICd7JG15c3FsTm93fScpKSIuCgkJCSAgICJBTkQgKChjLnF1YW50aXR5ID0gJy0xJykgT1IgKGMucXVhbnRpdHkgPiAoc2VsZWN0IGNvdW50KCopIEFTIHRvdGFsIEZST00gIi5NTV9UQUJMRV9DT1VQT05fVVNBR0UuIiB1IFdIRVJFIHUuY291cG9uX2lkID0gYy5pZCkpKSI7CgkJCgkJcmV0dXJuICgkd3BkYi0+cXVlcnkoJHNxbCkgPiAwKTsKCX0KCQoKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNCZWluZ1VzZWQoJGlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCBmcm9tICIuTU1fVEFCTEVfQ09VUE9OX1VTQUdFLiIgd2hlcmUgY291cG9uX2lkPSd7JGlkfScgIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJcmV0dXJuICRyb3ctPnRvdGFsPjA7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0R2lmdENvdXBvbkNvZGUoJG9yZGVySXRlbUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gInNlbGVjdCBjb3Vwb25fY29kZSBmcm9tICIuTU1fVEFCTEVfQ09VUE9OUy4iIHdoZXJlIGdpZnRfb3JkZXJfaXRlbV9pZD0neyRvcmRlckl0ZW1JZH0nIGxpbWl0IDE7IjsKCQkKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJvdyAmJiBpc3NldCgkcm93LT5jb3Vwb25fY29kZSkpCgkJewoJCQlyZXR1cm4gJHJvdy0+Y291cG9uX2NvZGU7CgkJfQoJCQoJCXJldHVybiAiIjsKCX0KCQoJLyoqCgkgKiBHZW5lcmF0ZXMgYSBuZXcgcmFuZG9tIDggYWxwaGFudW1lcmljIHN0cmluZwoJICogQHJldHVybiBNTV9SZXNwb25zZSBBIHJlc3BvbnNlIHRoYXQgY29udGFpbnMgdGhlIGdlbmVyYXRlZCBjb2RlIGluIHRoZSBtZXNzYWdlIG9uIHN1Y2Nlc3MsIGFuZCBhbiBlcnJvciByZXNwb25zZSBvbiBlcnJvcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlQ291cG9uQ29kZSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJLy9jcmVhdGUgYSByYW5kb20gOC1jaGFyIHN0cmluZyBhbmQgbWFrZSBzdXJlIGl0cyB1bmlxdWUKCQlkbwoJCXsKCQkJJG5ld0tleSA9IHNlbGY6OmNyZWF0ZVJhbmRvbUlkZW50aWZpZXIoKTsKCQkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9DT1VQT05TLiIgd2hlcmUgY291cG9uX2NvZGU9JyVzJyIsJG5ld0tleSkpOwoJCX0KCQl3aGlsZSAoY291bnQoJHJlc3VsdHMpID4gMCk7IC8vaXRlcmF0ZSB3aGlsZSBrZXkgaXMgbm90IHVuaXF1ZS4KCQoJCS8vc2hvdWxkIGJlIHNhZmUKCQlpZigkcmVzdWx0cyA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBjb3Vwb24gY29kZSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG5ld0tleSxNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwoJCX0KCX0KCQoJCgkvKioKCSAqIEdlbmVyYXRlcyBhIG5ldyByYW5kb20gOCBhbHBoYW51bWVyaWMgc3RyaW5nCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY3JlYXRlUmFuZG9tSWRlbnRpZmllcigpCgl7CgkJLy9nZW5lcmF0ZSB0aGUga2V5CgkJJG5ld0tleSA9ICIiOwoJCWZvciAoJGk9MDsgJGk8ODsgJGkrKykgLy9jcmVhdGUgcmFuZG9tIDggY2hhciBzdHJpbmcKCQl7CgkJCSR0eXBlID0gcmFuZCgxLDIpOwoJCQlzd2l0Y2ggKCR0eXBlKSB7CgkJCQljYXNlIDE6IC8vbnVtZXJpYwoJCQkJCSRuZXdLZXkuPWNocihyYW5kKDQ4LDU3KSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlIDI6IC8vdXBwZXIgYWxwaGEKCQkJCWRlZmF1bHQ6CgkJCQkJJG5ld0tleS49Y2hyKHJhbmQoNjUsOTApKTsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQlyZXR1cm4gJG5ld0tleTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFsbENvZGVzKCRleGNsdWRlRnJlZUNvdXBvbnM9ZmFsc2UpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUIGlkLCBjb3Vwb25fY29kZSBGUk9NICIuTU1fVEFCTEVfQ09VUE9OUzsKCQlpZiAoJGV4Y2x1ZGVGcmVlQ291cG9ucykKCQl7CgkJCSRzcWwuPSAiIFdIRVJFIGNvdXBvbl90eXBlICE9ICdmcmVlJyI7CgkJfQoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCSRjb3Vwb25Db2RlcyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJHJvdykKCQl7CgkJCSRjb3Vwb25Db2Rlc1skcm93LT5pZF0gPSAkcm93LT5jb3Vwb25fY29kZTsKCQl9CgkJcmV0dXJuICRjb3Vwb25Db2RlczsKCX0KfQo=', 0, '2018-11-21 06:38:53'),
(46, 'bbpressextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmNsYXNzIE1NX0JCUHJlc3NFeHRlbnNpb24gZXh0ZW5kcyBNTV9FeHRlbnNpb24KewkKCXByb3RlY3RlZCBzdGF0aWMgJE9QVElPTl9BQ1RJVkUgPSAiYWN0aXZlIjsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRhdXRvbG9hZERlcGVuZGVuY2llcz10cnVlLCRjb25maWdEYXRhPSIiKSAKCXsgCgkJcGFyZW50OjpfX2NvbnN0cnVjdCgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCSR0aGlzLT50b2tlbiA9IE1NX0V4dGVuc2lvbjo6JEJCUFJFU1NfVE9LRU47Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkb0luaXRIb29rKCkgCgl7CgkJaWYoJHRoaXMtPmlzQWN0aXZlKCkgJiYgJHRoaXMtPmhhc1Blcm1pc3Npb24oKSkKCQl7CgkJCQoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGlzQWN0aXZlKCkKCXsKCQkvLyBjaGVjayBpZiBMaW1pdCBMb2dpbiBBdHRlbXB0cyBwbHVnaW4gaXMgYWN0aXZlCgkJJHBsdWdpbnMgPSBnZXRfb3B0aW9uKCdhY3RpdmVfcGx1Z2lucycpOwoJCSRyZXF1aXJlZF9wbHVnaW4gPSAiTWVtYmVyTW91c2ViYlByZXNzL2luZGV4LnBocCI7CgkJJGlzQWN0aXZlID0gZmFsc2U7CgkJCgkJaWYoaW5fYXJyYXkoJHJlcXVpcmVkX3BsdWdpbiwgJHBsdWdpbnMpKQoJCXsKCQkJJGlzQWN0aXZlID0gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuICRpc0FjdGl2ZSAmJiAkdGhpcy0+aGFzUGVybWlzc2lvbigpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaGFzUGVybWlzc2lvbigpCgl7CgkJcmV0dXJuIHRydWU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlMaXN0aW5nSXRlbSgpIAoJewoJCSRjcm50UGFnZSA9IE1NX01vZHVsZVV0aWxzOjpnZXRQYWdlKCk7CgkJJGV4dFVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoJGNybnRQYWdlLCBNTV9NT0RVTEVfRVhURU5TSU9OUykuIiYiLk1NX3Nlc3Npb246OiRQQVJBTV9TVUJNT0RVTEUuIj0iLk1NX0V4dGVuc2lvbjo6JEJCUFJFU1NfVE9LRU47CgkJPz4KCQk8ZGl2IGNsYXNzPSJtbS1leHRlbnNpb24gPD9waHAgZWNobyAkdGhpcy0+aXNBY3RpdmUoKSA/ICdtbS1leHRlbnNpb24tYWN0aXZlJyA6ICcnOyA/PiI+CgkJPGEgaHJlZj0iPD9waHAgZWNobyAkZXh0VXJsOyA/PiI+PGltZyBzcmM9Imh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9wbHVnaW5faW1hZ2VzL2xvZ29zL2V4dGVuc2lvbnMtYmJwcmVzcy5qcGciIC8+PC9hPgoJCTwvZGl2PgoJCTw/cGhwCgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5Q29uZmlnU2NyZWVuKCkgCgl7IAoJPz4KCQkKCQk8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNGRkY7IHBhZGRpbmc6MTBweDsgd2lkdGg6MjYwcHg7Ij4KCQkJPGltZyBzcmM9Imh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9wbHVnaW5faW1hZ2VzL2xvZ29zL2V4dGVuc2lvbnMtYmJwcmVzcy5qcGciIHN0eWxlPSJ3aWR0aDoyNjBweDsiIC8+CgkJPC9kaXY+CgkJCgkJPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNXB4OyI+CgkJCTxhIGhyZWY9Imh0dHA6Ly9zdXBwb3J0Lm1lbWJlcm1vdXNlLmNvbS9zdXBwb3J0L3NvbHV0aW9ucy9hcnRpY2xlcy85MDAwMDIwMTg2LWJicHJlc3MtZXh0ZW5zaW9uIiB0YXJnZXQ9Il9ibGFuayI+TmVlZCBoZWxwIGNvbmZpZ3VyaW5nIHRoZSBiYlByZXNzIGV4dGVuc2lvbj88L2E+CgkJPC9kaXY+CgkJCgkJPHAgc3R5bGU9IndpZHRoOjYwMHB4OyBmb250LXNpemU6MTJweDsiPgoJCWJiUHJlc3Mgd2FzIGJ1aWx0IGJ5IHRoZSBjcmVhdG9ycyBvZiBXb3JkUHJlc3MgYW5kIGVuYWJsZXMgZm9ydW0gZnVuY3Rpb25hbGl0eSBvbiB5b3VyIFdvcmRQcmVzcyBzaXRlLiBVc2luZyB0aGlzIAoJCWV4dGVuc2lvbiB5b3UnbGwgYmUgYWJsZSB0byBwcm90ZWN0IGJiUHJlc3MgZm9ydW1zIGJhc2VkIG9uIGEgbWVtYmVyJ3MgYWNjZXNzIHJpZ2h0cyBpbiBNZW1iZXJNb3VzZS4gSW4gb3JkZXIgCgkJdG8gdXNlIHRoaXMgZXh0ZW5zaW9uLCB0aGUgYmJQcmVzcyBwbHVnaW4gbXVzdCBiZSBpbnN0YWxsZWQgYW5kIGFjdGl2YXRlZC4KCQk8L3A+CgkJCgkJPHA+CgkJCTw/cGhwIGlmKCEkdGhpcy0+aXNBY3RpdmUoKSkgeyA/PgoJCQk8YSBocmVmPSJodHRwczovL21lbWJlcm1vdXNlLmNvbS9hc3NldHMvZXh0ZW5zaW9ucy9NZW1iZXJNb3VzZWJiUHJlc3MuemlwIiBjbGFzcz0ibW0tdWktYnV0dG9uIGdyZWVuIj48P3BocCBlY2hvIE1NX1V0aWxzOjpnZXRJY29uKCdkb3dubG9hZCcsICcnLCAnMS4zZW0nLCAnMnB4Jyk7ID8+IERvd25sb2FkIGJiUHJlc3MgRXh0ZW5zaW9uPC9hPgoJCQk8P3BocCB9IGVsc2UgeyA/PgoJCQk8P3BocCBlY2hvIE1NX1V0aWxzOjpnZXRDaGVja0ljb24oKTsgPz4gYmJQcmVzcyBFeHRlbnNpb24gQWN0aXZhdGVkCgkJCTw/cGhwIH0gPz4KCQkJCgkJCTw/cGhwIAoJCQkkcGx1Z2lucyA9IGdldF9vcHRpb24oJ2FjdGl2ZV9wbHVnaW5zJyk7CgkJCSRyZXF1aXJlZF9wbHVnaW4gPSAiYmJwcmVzcy9iYnByZXNzLnBocCI7CgkJCQoJCQlpZighaW5fYXJyYXkoJHJlcXVpcmVkX3BsdWdpbiwgJHBsdWdpbnMpKQoJCQl7CgkJCT8+CgkJCTxhIGhyZWY9Imh0dHA6Ly9iYnByZXNzLm9yZyIgY2xhc3M9Im1tLXVpLWJ1dHRvbiBibHVlIiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTBweDsiPjw/cGhwIGVjaG8gTU1fVXRpbHM6OmdldEljb24oJ2Rvd25sb2FkJywgJycsICcxLjNlbScsICcycHgnKTsgPz4gRG93bmxvYWQgYmJQcmVzczwvYT4KCQkJPD9waHAgfSBlbHNlIHsgPz4KCQkJPHNwYW4gc3R5bGU9Im1hcmdpbi1sZWZ0OjEwcHg7Ij48P3BocCBlY2hvIE1NX1V0aWxzOjpnZXRDaGVja0ljb24oKTsgPz4gYmJQcmVzcyBBY3RpdmF0ZWQ8L3NwYW4+CgkJCTw/cGhwIH0gPz4KCQk8L3A+Cgk8P3BocAoJfQp9', 0, '2018-11-21 06:38:53'),
(47, 'paymentutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1BheW1lbnRVdGlscwp7CgkvKioKCSAqIFRoaXMgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvciBjYWxjdWxhdGluZyB0aGUgdW51c2VkIGFtb3VudCBvbiBhIG1lbWJlcidzIG1lbWJlcnNoaXAgbGV2ZWwgc3Vic2NyaXB0aW9uCgkgKiAKCSAqIEBwYXJhbSBNTV9Vc2VyICR1c2VyIHRoZSB1c2VyIG1ha2luZyB0aGUgcHVyY2hhc2UKCSAqIEByZXR1cm4gbnVtYmVyIHRoZSBwcm9yYXRpb24gYW1vdW50CgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY2FsY3VsYXRlTWVtYmVyc2hpcFN1YnNjcmlwdGlvbkNyZWRpdChNTV9Vc2VyICR1c2VyKQoJewoJCWlmKCR1c2VyLT5pc1ZhbGlkKCkgJiYgTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfRU5BQkxFX01FTUJFUlNISVBfUFJPUkFUSU9OKSA9PSAiMSIpCgkJewoJCQkvLyBnZXQgbWVtYmVyJ3MgYWN0aXZlIHN1YnNjcmlwdGlvbnMKCQkJJG1lbWJlcnNoaXBTdWJzY3JpcHRpb25zID0gJHVzZXItPmdldEFjdGl2ZU1lbWJlcnNoaXBTdWJzY3JpcHRpb25zKCk7CgkJCQoJCQlmb3JlYWNoKCRtZW1iZXJzaGlwU3Vic2NyaXB0aW9ucyBhcyAkbWVtYmVyc2hpcFN1YnNjcmlwdGlvbikKCQkJewoJCQkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oJG1lbWJlcnNoaXBTdWJzY3JpcHRpb25bIm9yZGVySXRlbUlkIl0pOwoJCQkJCgkJCQlpZigkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJZ2xvYmFsICR3cGRiOwoJCQkJCQoJCQkJCS8vIGxvb2t1cCB0aGUgbGFzdCB0cmFuc2FjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhlIGFjdGl2ZSBzdWJzY3JpcHRpb24KCQkJCQkkdHJhbnNUeXBlUGF5bWVudCA9IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UOwoJCQkJCSR0cmFuc1R5cGVSZWN1cnJpbmdQYXltZW50ID0gTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UOwoJCQkJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIFdIRVJFIG9yZGVyX2l0ZW1faWQgPSB7JG9yZGVySXRlbS0+Z2V0SWQoKX0gQU5EICI7CgkJCQkJJHNxbCAuPSAidHJhbnNhY3Rpb25fdHlwZSBJTiAoeyR0cmFuc1R5cGVQYXltZW50fSwgeyR0cmFuc1R5cGVSZWN1cnJpbmdQYXltZW50fSkgIjsKCQkJCQkkc3FsIC49ICJPUkRFUiBCWSB0cmFuc2FjdGlvbl9kYXRlIERFU0MgTElNSVQgMTsiOwoJCQkJCQkKCQkJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQkJaWYoJHJlc3VsdCkKCQkJCQl7CgkJCQkJCSRsYXN0QmlsbERhdGUgPSAkcmVzdWx0LT50cmFuc2FjdGlvbl9kYXRlOwoJCQkJCQkkbGFzdEJpbGxBbW91bnQgPSBhYnMoJHJlc3VsdC0+YW1vdW50KTsKCQkJCQkJJHN1YnNjcmlwdGlvbkxlbmd0aCA9ICRvcmRlckl0ZW0tPmdldFJlYmlsbFBlcmlvZCgpOwoJCQkJCQkkcmViaWxsRnJlcXVlbmN5ID0gJG9yZGVySXRlbS0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7CgkJCQkJCQoJCQkJCQlzd2l0Y2goJHJlYmlsbEZyZXF1ZW5jeSkKCQkJCQkJewkJCgkJCQkJCQljYXNlICJ3ZWVrcyI6CgkJCQkJCQkJJHN1YnNjcmlwdGlvbkxlbmd0aCA9ICRzdWJzY3JpcHRpb25MZW5ndGggKiA3OwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQoJCQkJCQkJY2FzZSAibW9udGhzIjoKCQkJCQkJCQkkc3Vic2NyaXB0aW9uTGVuZ3RoID0gJHN1YnNjcmlwdGlvbkxlbmd0aCAqIDMwOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQoJCQkJCQkJY2FzZSAieWVhcnMiOgoJCQkJCQkJCSRzdWJzY3JpcHRpb25MZW5ndGggPSAkc3Vic2NyaXB0aW9uTGVuZ3RoICogMzY1OwoJCQkJCQkJCWJyZWFrOwkJCQkKCQkJCQkJfQoJCQkJCQkKCQkJCQkJLy8gY2FsY3VsYXRlIHRoZSBjcmVkaXQgYXZhaWxhYmxlIGJhc2VkIG9uIHRoZSBudW1iZXIgb2YgZGF5cyB0aGUgbWVtYmVyIGhhcyB1c2VkIHNvIGZhcgoJCQkJCQkkZGF5c1VzZWQgPSBmbG9vcigodGltZSgpIC0gc3RydG90aW1lKCRsYXN0QmlsbERhdGUpKSAvICg2MCo2MCoyNCkpOwoJCQkJCQkkZGFpbHlQcmljZSA9ICRsYXN0QmlsbEFtb3VudCAvICRzdWJzY3JpcHRpb25MZW5ndGg7CgkJCQkJCSR0b3RhbENyZWRpdCA9ICgkc3Vic2NyaXB0aW9uTGVuZ3RoIC0gJGRheXNVc2VkKSAqICRkYWlseVByaWNlOwoJCQkJCQkKCQkJCQkJaWYoJHRvdGFsQ3JlZGl0ID4gMCkKCQkJCQkJewoJCQkJCQkJcmV0dXJuICR0b3RhbENyZWRpdDsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJYnJlYWs7IC8vIGFzc3VtZSBvbmUgbWVtYmVyc2hpcCBzdWJzY3JpcHRpb24gb25seQoJCQl9CgkJfQoJCQoJCXJldHVybiAwOwoJfSAKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCBpcyByZXNvbnNpYmxlIGZvciBkZXRlcm1pbmluZyBpZiBhIHByb3JhdGlvbiBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgb3JkZXIsIGNhbGN1bGF0ZXMgaXQgYW5kIAoJICogYXBwbGllcyBpdCB0byB0aGUgb3JkZXIKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciB0aGUgb3JkZXIgdG8gYXBwbHkgYSBwcm9yYXRpb24gdG8KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBhcHBseVByb3JhdGlvbihNTV9PcmRlciAkb3JkZXIpCgl7CgkJaWYoJG9yZGVyLT5pc1ZhbGlkKCkgJiYgKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0VOQUJMRV9NRU1CRVJTSElQX1BST1JBVElPTikgPT0gIjEiKSkKCQl7CgkJCSR1c2VyID0gJG9yZGVyLT5nZXRDdXN0b21lcigpOwoJCQkkb3JkZXJQcm9kdWN0SXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCQoJCQlmb3JlYWNoICgkb3JkZXJQcm9kdWN0SXRlbXMgYXMgJG9yZGVyUHJvZHVjdEl0ZW0pCgkJCXsKCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJG9yZGVyUHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpKTsKCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlpZigkdXNlci0+aXNWYWxpZCgpICYmICRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCS8vIGNoZWNrIGlmIHByb2R1Y3QgaXMgYXNzb2NpYXRlZCB3aXRoIGEgbWVtYmVyc2hpcCBsZXZlbCBhbmQgaXMgYSBzdWJzY3JpcHRpb24KCQkJCSRuZXdNZW1iZXJzaGlwTGV2ZWwgPSAkcHJvZHVjdC0+Z2V0QXNzb2NpYXRlZE1lbWJlcnNoaXAoKTsKCQkJCQoJCQkJLy8gY2hlY2sgaWYgY3VzdG9tZXIgaXMgb24gc2FtZSBtZW1iZXJzaGlwIGxldmVsIGJ1dCBpcyBub3cgCgkJCQkvLyBvYnRhaW5pbmcgYSBuZXcgcHJvZHVjdCBpZC4gIElmIHNvLCBwcm9yYXRpb24gc2hvdWxkIHN0aWxsIG9jY3VyLiAKCQkJCSRjdXN0b21lcnNQcm9kdWN0cyA9ICR1c2VyLT5nZXRQcm9kdWN0c1B1cmNoYXNlZChhcnJheSgwKSk7CiAKCQkJCWlmKCRuZXdNZW1iZXJzaGlwTGV2ZWwtPmlzVmFsaWQoKSAKCQkJCQkJCSYmICgkbmV3TWVtYmVyc2hpcExldmVsLT5nZXRJZCgpICE9ICR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSAKCQkJCQkJCQkJCQl8fCAhaW5fYXJyYXkoJHByb2R1Y3QtPmdldElkKCksJGN1c3RvbWVyc1Byb2R1Y3RzKSkgCgkJCQkJCQkmJiAkcHJvZHVjdC0+aXNSZWN1cnJpbmcoKSkKCQkJCXsKCQkJCQkkcHJvcmF0aW9uQW1vdW50ID0gTU1fUGF5bWVudFV0aWxzOjpjYWxjdWxhdGVNZW1iZXJzaGlwU3Vic2NyaXB0aW9uQ3JlZGl0KCR1c2VyKTsKCQkJCQkKCQkJCQlpZigkcHJvcmF0aW9uQW1vdW50ID4gMCkKCQkJCQl7CgkJCQkJCS8vIGFkZCBwcm9yYXRpb24gaXRlbSB0byB0aGUgb3JkZXIKCQkJCQkJJGl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCk7CgkJCQkJCSRpdGVtLT5zZXRJdGVtVHlwZShNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPUkFUSU9OKTsKCQkJCQkJJGl0ZW0tPnNldEl0ZW1JZChudWxsKTsKCQkJCQkJJGl0ZW0tPnNldERlc2NyaXB0aW9uKCRuZXdNZW1iZXJzaGlwTGV2ZWwtPmdldE5hbWUoKSk7CgkJCQkJCSRpdGVtLT5zZXRRdWFudGl0eSgxKTsKCQkJCQkJJGl0ZW0tPnNldEFtb3VudCgkcHJvcmF0aW9uQW1vdW50KTsKCQkJCQkJJG9yZGVyLT5hZGRQcm9yYXRpb24oJGl0ZW0pOwoJCQkJCQkkb3JkZXItPmNvbW1pdERhdGEoKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yIGxvb2tpbmcgdXAgdGhlIG9yZGVyIGl0ZW0gYXNzb2NpYXRlZCB3aXRoIHRoZSB1c2VyIGFuZCBhY2Nlc3MgCgkgKiBpbmZvcm1hdGlvbiBwYXNzZWQgYW5kIGNhbmNlbGxpbmcgdGhlIGFzc29jaWF0ZWQgc3Vic2NyaXB0aW9uIGlmIHRoZXJlIGlzIG9uZS4KCSAqIAoJICogQHBhcmFtIE1NX1VzZXIgJHVzZXIgdGhlIHVzZXIgdG8gY2FuY2VsIHRoZSBzdWJzY3JpcHRpb24gZm9yCgkgKiBAcGFyYW0gT2JqZWN0ICRhY2Nlc3NPYmplY3QgdGhpcyB3aWxsIGVpdGhlciBiZSBhbiBpbnN0YW5jZSBvZiBNTV9NZW1iZXJzaGlwTGV2ZWwgb3IgTU1fQnVuZGxlIGFuZCByZXByZXNlbnRzIHRoZSBhY2Nlc3MgcmlnaHQgdG8gY2FuY2VsCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGEgcmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgaWYgdGhlIG9wZXJhdGlvbiB3ZW50IHRocm91Z2ggc3VjY2Vzc2Z1bGx5IG9yIG5vdC4gSWYgdGhlcmUgaXMgbm8gc3Vic2NyaXB0aW9uIGF0dGFjaGVkIHRvICRhY2Nlc3NPYmplY3QsIHN1Y2Nlc3MgaXMgcmV0dXJuZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjYW5jZWxTdWJzY3JpcHRpb24oTU1fVXNlciAkdXNlciwgJGFjY2Vzc09iamVjdCkKCXsKCQkkYWNjZXNzVHlwZSA9ICIiOwoJCSRhY2Nlc3NUeXBlSWQgPSAwOwoJCSRjYW5jZWxlZE9yZGVySXRlbXMgPSBhcnJheSgpOwoJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQoJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQlpZigkYWNjZXNzT2JqZWN0IGluc3RhbmNlb2YgTU1fTWVtYmVyc2hpcExldmVsKQoJCQl7CgkJCQkkYWNjZXNzVHlwZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQOwoJCQkJJGFjY2Vzc1R5cGVJZCA9ICRhY2Nlc3NPYmplY3QtPmdldElkKCk7CgkJCX0KCQkJZWxzZSBpZigkYWNjZXNzT2JqZWN0IGluc3RhbmNlb2YgTU1fQnVuZGxlKQoJCQl7CgkJCQkkYWNjZXNzVHlwZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OiRBQ0NFU1NfVFlQRV9CVU5ETEU7CgkJCQkkYWNjZXNzVHlwZUlkID0gJGFjY2Vzc09iamVjdC0+Z2V0SWQoKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNhbmNlbGxpbmcgc3Vic2NyaXB0aW9uLiBJbnZhbGlkIGFjY2VzcyBvYmplY3QuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJGV4ZWN1dGlvblN0YXR1cykpCgkJCXsKCQkJCSRpdGVtcyA9IE1NX09yZGVySXRlbUFjY2Vzczo6Z2V0T3JkZXJJdGVtQnlBY2Nlc3MoJHVzZXItPmdldElkKCksICRhY2Nlc3NUeXBlLCAkYWNjZXNzVHlwZUlkKTsKCQkJCQoJCQkJZm9yZWFjaCgkaXRlbXMgYXMgJG9yZGVySXRlbUFjY2VzcykKCQkJCXsKCQkJCQlpZigkb3JkZXJJdGVtQWNjZXNzLT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkb3JkZXJJdGVtQWNjZXNzLT5nZXRPcmRlckl0ZW1JZCgpKTsKCQkJCQkJCgkJCQkJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQkJCQkJewoJCQkJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkJCQkKCQkJCQkJCWlmKCRvcmRlci0+aXNWYWxpZCgpKQoJCQkJCQkJewoJCQkJCQkJCSRwYXltZW50U2VydmljZSA9ICRvcmRlci0+Z2V0UGF5bWVudE1ldGhvZCgpOwoJCQkJCQkJCQoJCQkJCQkJCWlmKCFpc19udWxsKCRwYXltZW50U2VydmljZSkpCgkJCQkJCQkJewoJCQkJCQkJCQlpZigkb3JkZXJJdGVtLT5pc1JlY3VycmluZygpICYmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSAhPSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRwYXltZW50UmVzcG9uc2UgPSAkcGF5bWVudFNlcnZpY2UtPmNhbmNlbFN1YnNjcmlwdGlvbigkb3JkZXJJdGVtKTsKCQkJCQkJCQkJCQoJCQkJCQkJCQkJaWYoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCRwYXltZW50UmVzcG9uc2UpKQoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCWRvX2FjdGlvbihNTV9FdmVudDo6JEJJTExJTkdfU1VCU0NSSVBUSU9OX0NBTkNFTEVELCBNTV9FdmVudDo6cGFja2FnZU9yZGVyRGF0YSgkb3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCksICRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSkpOwoJCQkJCQkJCQkJCQoJCQkJCQkJCQkJCSRjYW5jZWxlZE9yZGVySXRlbXNbXSA9ICRvcmRlckl0ZW0tPmdldElkKCk7CgkJCQkJCQkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgkcGF5bWVudFJlc3BvbnNlLT5nZXRNZXNzYWdlKCksIE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk7CgkJCQkJCQkJCQkJJGV4ZWN1dGlvblN0YXR1cy0+YWRkRGF0YSgib3JkZXJJdGVtcyIsICRjYW5jZWxlZE9yZGVySXRlbXMpOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJewoJCQkJCQkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoJHBheW1lbnRSZXNwb25zZS0+Z2V0TWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCXsKCQkJCQkJCQkJCS8vIG5vIHN1YnNjcmlwdGlvbiB0byBjYW5jZWwKCQkJCQkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCQllbHNlCgkJCQkJCQkJewoJCQkJCQkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjYW5jZWxsaW5nIHN1YnNjcmlwdGlvbi4gSW52YWxpZCBwYXltZW50IHNlcnZpY2UuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJZWxzZQoJCQkJCQkJewoJCQkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNhbmNlbGxpbmcgc3Vic2NyaXB0aW9uLiBJbnZhbGlkIG9yZGVyLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIEludmFsaWQgb3JkZXIgaXRlbS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkvLyBubyBzdWJzY3JpcHRpb24gdG8gY2FuY2VsCgkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCXJldHVybiAkZXhlY3V0aW9uU3RhdHVzOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuICRleGVjdXRpb25TdGF0dXM7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIEludmFsaWQgdXNlci4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCBpcyByZXNwb25zaWJsZSBmb3IgY2FuY2VsbGluZyBhIHN1YnNjcmlwdGlvbiBhc3NvY2lhdGVkIHdpdGggYSBwYXJ0aWN1bGFyIG9yZGVyIGl0ZW0uCgkgKgoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtIHRoZSBvcmRlciBpdGVtIHRvIGNhbmNlbCBzdWJzY3JpcHRpb24gZm9yCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGEgcmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgaWYgdGhlIG9wZXJhdGlvbiB3ZW50IHRocm91Z2ggc3VjY2Vzc2Z1bGx5IG9yIG5vdAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNhbmNlbFN1YnNjcmlwdGlvbkZvck9yZGVySXRlbShNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSkKCXsKCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkKCQlpZigkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJewoJCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKTsKCgkJCWlmKCRvcmRlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkcGF5bWVudFNlcnZpY2UgPSAkb3JkZXItPmdldFBheW1lbnRNZXRob2QoKTsKCQkJCQkKCQkJCWlmKCFpc19udWxsKCRwYXltZW50U2VydmljZSkpCgkJCQl7CgkJCQkJaWYoJG9yZGVySXRlbS0+aXNSZWN1cnJpbmcoKSAmJiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgIT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpKQoJCQkJCXsKCQkJCQkJJHBheW1lbnRSZXNwb25zZSA9ICRwYXltZW50U2VydmljZS0+Y2FuY2VsU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0pOwoJCQkJCQkKCQkJCQkJaWYoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCRwYXltZW50UmVzcG9uc2UpKQoJCQkJCQl7CQoJCQkJCQkJZG9fYWN0aW9uKE1NX0V2ZW50OjokQklMTElOR19TVUJTQ1JJUFRJT05fQ0FOQ0VMRUQsIE1NX0V2ZW50OjpwYWNrYWdlT3JkZXJEYXRhKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKSwgJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtLT5nZXRJZCgpKSk7CgkJCQkJCQkKCQkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoJHBheW1lbnRSZXNwb25zZS0+Z2V0TWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgkcGF5bWVudFJlc3BvbnNlLT5nZXRNZXNzYWdlKCksIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCS8vIG5vIHN1YnNjcmlwdGlvbiB0byBjYW5jZWwKCQkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjYW5jZWxsaW5nIHN1YnNjcmlwdGlvbi4gSW52YWxpZCBwYXltZW50IHNlcnZpY2UuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjYW5jZWxsaW5nIHN1YnNjcmlwdGlvbi4gSW52YWxpZCBvcmRlci4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJcmV0dXJuICRleGVjdXRpb25TdGF0dXM7CgkJfQoJCWVsc2UKCQl7CgkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNhbmNlbGxpbmcgc3Vic2NyaXB0aW9uLiBJbnZhbGlkIG9yZGVyIGl0ZW0uIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yIHVwZGF0aW5nIHRoZSB0aGUgYmlsbGluZyBkZXRhaWxzIGFzc29jaWF0ZWQgd2l0aCBhIHBhcnRpY3VsYXIgb3JkZXIgaXRlbS4KCSAqCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gdGhlIG9yZGVyIGl0ZW0gdG8gdXBkYXRlIHRoZSBiaWxsaW5nIGRldGFpbHMgZm9yCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIHRoZSBjcmVkaXQgY2FyZCBpbmZvIHRvIHVzZSBvbiB0aGUgc3Vic2NyaXB0aW9uCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyB0aGUgYmlsbGluZyBhZGRyZXNzIHRvIHVzZSBvbiB0aGUgc3Vic2NyaXB0aW9uCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGEgcmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgaWYgdGhlIG9wZXJhdGlvbiB3ZW50IHRocm91Z2ggc3VjY2Vzc2Z1bGx5IG9yIG5vdAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHVwZGF0ZVN1YnNjcmlwdGlvbkJpbGxpbmdJbmZvKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcz1udWxsKQoJewoJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQoJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQl7CgkJCS8vY3JlYXRlIHV0aWxpemVzIHRoZSBvYmplY3QgY2FjaGUKCQkJJG9yZGVyID0gTU1fT3JkZXI6OmNyZWF0ZSgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoKCQkJaWYoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRwYXltZW50U2VydmljZSA9ICRvcmRlci0+Z2V0UGF5bWVudE1ldGhvZCgpOwoJCQkJCQoJCQkJaWYoIWlzX251bGwoJHBheW1lbnRTZXJ2aWNlKSkKCQkJCXsKCQkJCQlpZigkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HCgkJCQkJCXx8ICRvcmRlckl0ZW0tPmdldFN0YXR1cygpID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCkKCQkJCQl7CgkJCQkJCSRwYXltZW50UmVzcG9uc2UgPSAkcGF5bWVudFNlcnZpY2UtPnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oJG9yZGVySXRlbSwgJGNhcmRJbmZvLCAkYmlsbGluZ0FkZHJlc3MpOwoJCQkJCQkKCQkJCQkJaWYoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCRwYXltZW50UmVzcG9uc2UpKQoJCQkJCQl7CgkJCQkJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkJCQkJCgkJCQkJCQkJaWYoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCQkJCQkJewoJCQkJCQkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9VUERBVEVELCBNTV9FdmVudDo6cGFja2FnZU9yZGVyRGF0YSgkb3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCksICRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSkpOwoJCQkJCQkJCX0KCQkJCQkJCQkKCQkJCQkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCRwYXltZW50UmVzcG9uc2UtPmdldE1lc3NhZ2UoKSwgTU1fUmVzcG9uc2U6OiRTVUNDRVNTKTsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoJHBheW1lbnRSZXNwb25zZS0+Z2V0TWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkvLyBubyBzdWJzY3JpcHRpb24gdG8gdXBkYXRlCgkJCQkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgdXBkYXRpbmcgYmlsbGluZyBpbmZvcm1hdGlvbi4gSW52YWxpZCBwYXltZW50IHNlcnZpY2UuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciB1cGRhdGluZyBiaWxsaW5nIGluZm9ybWF0aW9uLiBJbnZhbGlkIG9yZGVyLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQoJCQlyZXR1cm4gJGV4ZWN1dGlvblN0YXR1czsKCQl9CgkJZWxzZQoJCXsKCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgdXBkYXRpbmcgc3Vic2NyaXB0aW9uLiBJbnZhbGlkIG9yZGVyIGl0ZW0uIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(48, 'decisiontagprocessor_v1', 'Y2xhc3MgTU1fRGVjaXNpb25UYWdQcm9jZXNzb3JfVjEgZXh0ZW5kcyBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcgp7CQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBtbV9tZW1iZXJfZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkdXNlciA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudFVzZXIoKTsKCQkKCQkkZW5hYmxlRGVidWcgPSBmYWxzZTsKCQkkZGVidWdTdHIgPSAiIjsKCQkkYXR0clN0ciA9ICIiOwoJCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cyk+MCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleT0kdjsKCQkJCSRhdHRyU3RyIC49ICRrZXkuIj0iLiR2LiIsICI7CgkJCX0KCQl9CgkJCgkJJGRlYnVnU3RyIC49ICI8IS0tIC0tLSAtLT4iOwoJCSRkZWJ1Z1N0ciAuPSAiPCEtLSBtbV9tZW1iZXJfZGVjaXNpb246IGF0dHJpYnV0ZXM6IHskYXR0clN0cn0gLS0+IjsKCQkKCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJJGRlYnVnU3RyIC49ICI8IS0tIG1tX21lbWJlcl9kZWNpc2lvbjogdXNlciB2YWxpZDogdHJ1ZSAtLT4iOwoJCQoJCQkkc3RhdHVzQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkbWVtYmVyc2hpcENoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkJJGJ1bmRsZUNoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkJJGlzRnJlZUNoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkJJGRheXNBc01lbWJlciA9IDA7CgkJCSRkYXlzQXNNZW1iZXJDb21wYXJpc29uID0gIj4iOwoJCQkJCgkJCS8vIGdldCBudW1iZXIgb2YgZGF5cyBhcyBtZW1iZXIKCQkJaWYoaXNzZXQoJGRheXNhc21lbWJlcikpCgkJCXsKCQkJCWlmKGludHZhbCgkZGF5c2FzbWVtYmVyKSA8IDApCgkJCQl7CgkJCQkJJGRheXNBc01lbWJlckNvbXBhcmlzb24gPSAiPCI7CgkJCQl9CgkJCQkJCgkJCQkkZGF5c0FzTWVtYmVyID0gYWJzKCRkYXlzYXNtZW1iZXIpOwoJCQl9CgkJCQkKCQkJLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IG1lbWJlciBoYXMgdGhlIGFwcHJvcHJpYXRlIHN0YXR1cwoJCQlpZihpc3NldCgkc3RhdHVzKSkKCQkJewoJCQkJJHN0YXR1c0NoZWNrID0gc2VsZjo6JEZBSUw7CgkJCQkkbmVnYXRlUmVzdWx0ID0gc2VsZjo6ZG9OZWdhdGVWYWx1ZSgkc3RhdHVzKTsKCQkJCWlmKCRuZWdhdGVSZXN1bHQpCgkJCQl7CgkJCQkJJHN0YXR1cyA9IHN1YnN0cigkc3RhdHVzLCAxKTsKCQkJCX0KCQkJCQoJCQkJaWYocHJlZ19tYXRjaCgiLyhhY3RpdmV8cGF1c2VkfG92ZXJkdWV8bG9ja2VkfGV4cGlyZWR8Y2FuY2VsZWR8cGVuZGluZ19jYW5jZWwpLyIsIHN0cnRvbG93ZXIoJHN0YXR1cykpKQoJCQkJewoJCQkJCWlmKHN0cnRvbG93ZXIoJHN0YXR1cykgPT0gImFjdGl2ZSIpCgkJCQkJewoJCQkJCQlpZigkbmVnYXRlUmVzdWx0KQoJCQkJCQl7CgkJCQkJCQkkc3RhdHVzQ2hlY2sgPSAoJHVzZXItPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JEFDVElWRSkgPyBzZWxmOjokUEFTUyA6IHNlbGY6OiRGQUlMOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHN0YXR1c0NoZWNrID0gKCR1c2VyLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRBQ1RJVkUpID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHN0YXR1cykgPT0gInBhdXNlZCIpCgkJCQkJewoJCQkJCQlpZigkbmVnYXRlUmVzdWx0KQoJCQkJCQl7CgkJCQkJCQkkc3RhdHVzQ2hlY2sgPSAoJHVzZXItPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JFBBVVNFRCkgPyBzZWxmOjokUEFTUyA6IHNlbGY6OiRGQUlMOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHN0YXR1c0NoZWNrID0gKCR1c2VyLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRQQVVTRUQpID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHN0YXR1cykgPT0gImNhbmNlbGVkIikKCQkJCQl7CgkJCQkJCWlmKCRuZWdhdGVSZXN1bHQpCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNDaGVjayA9ICgkdXNlci0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNDaGVjayA9ICgkdXNlci0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHN0YXR1cykgPT0gImV4cGlyZWQiKQoJCQkJCXsKCQkJCQkJaWYoJG5lZ2F0ZVJlc3VsdCkKCQkJCQkJewoJCQkJCQkJJHN0YXR1c0NoZWNrID0gKCR1c2VyLT5nZXRTdGF0dXMoKSAhPSBNTV9TdGF0dXM6OiRFWFBJUkVEKSA/IHNlbGY6OiRQQVNTIDogc2VsZjo6JEZBSUw7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQkkc3RhdHVzQ2hlY2sgPSAoJHVzZXItPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JEVYUElSRUQpID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHN0YXR1cykgPT0gIm92ZXJkdWUiKQoJCQkJCXsKCQkJCQkJaWYoJG5lZ2F0ZVJlc3VsdCkKCQkJCQkJewoJCQkJCQkJJHN0YXR1c0NoZWNrID0gKCR1c2VyLT5nZXRTdGF0dXMoKSAhPSBNTV9TdGF0dXM6OiRPVkVSRFVFKSA/IHNlbGY6OiRQQVNTIDogc2VsZjo6JEZBSUw7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQkkc3RhdHVzQ2hlY2sgPSAoJHVzZXItPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JE9WRVJEVUUpID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHN0YXR1cykgPT0gInBlbmRpbmdfY2FuY2VsIikKCQkJCQl7CgkJCQkJCWlmKCRuZWdhdGVSZXN1bHQpCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNDaGVjayA9ICgkdXNlci0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04pID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNDaGVjayA9ICgkdXNlci0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04pID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHN0YXR1cykgPT0gImxvY2tlZCIpCgkJCQkJewoJCQkJCQlpZigkbmVnYXRlUmVzdWx0KQoJCQkJCQl7CgkJCQkJCQkkc3RhdHVzQ2hlY2sgPSAoJHVzZXItPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JExPQ0tFRCkgPyBzZWxmOjokUEFTUyA6IHNlbGY6OiRGQUlMOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHN0YXR1c0NoZWNrID0gKCR1c2VyLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRMT0NLRUQpID8gc2VsZjo6JFBBU1MgOiBzZWxmOjokRkFJTDsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQkJCgkJCS8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCBtZW1iZXIgaGFzIHRoZSBhcHByb3ByaWF0ZSBtZW1iZXJzaGlwIGxldmVsCgkJCWlmKGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCQl7CgkJCQkkbWVtYmVyc2hpcENoZWNrID0gc2VsZjo6JEZBSUw7CgkJCgkJCQkkbWVtYmVyc2hpcEFyciA9IGV4cGxvZGUoIiwiLCAkbWVtYmVyc2hpcGlkKTsKCQkKCQkJCWZvcigkaT0wOyAkaTxjb3VudCgkbWVtYmVyc2hpcEFycik7ICRpKyspCgkJCQl7CgkJCQkJaWYoaW50dmFsKCRtZW1iZXJzaGlwQXJyWyRpXSkgPCAwKQoJCQkJCXsKCQkJCQkJaWYoJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpID09IGFicygkbWVtYmVyc2hpcEFyclskaV0pKQoJCQkJCQl7CgkJCQkJCQlpZigkbWVtYmVyc2hpcENoZWNrID09IHNlbGY6OiRGQUlMKQoJCQkJCQkJewoJCQkJCQkJCSRtZW1iZXJzaGlwQ2hlY2sgPSBzZWxmOjokRkFJTDsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRtZW1iZXJzaGlwQ2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UgaWYoJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpID09ICRtZW1iZXJzaGlwQXJyWyRpXSkKCQkJCQl7CgkJCQkJCSRtZW1iZXJzaGlwQ2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG1lbWJlcnNoaXBDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCX0KCQkJCQoJCQkvLyBjaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgbWVtYmVyIGhhcyB0aGUgYXBwcm9wcmlhdGUgYnVuZGxlCgkJCWlmKGlzc2V0KCRoYXNidW5kbGUpKQoJCQl7CgkJCQkkYnVuZGxlQ2hlY2sgPSBzZWxmOjokRkFJTDsKCQkJCSRuZWdhdGVSZXN1bHQgPSBmYWxzZTsKCQkJCSRidW5kbGVBcnIgPSBleHBsb2RlKCIsIiwgJGhhc2J1bmRsZSk7CgkJCQkKCQkJCSRjb21wYXJlID0gYXJyYXkoKTsKCQkJCQoJCQkJLy8gZ2V0IGRhdGEgZnJvbSBwcmV2aWV3IGJhcgoJCQkJaWYoTU1fRW1wbG95ZWU6OmlzRW1wbG95ZWUoJHVzZXItPmdldElkKCkpKQoJCQkJewoJCQkJCSRjb21wYXJlID0gTU1fUHJldmlldzo6Z2V0RGF0YSgpLT5nZXRCdW5kbGVzKCk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGFwcGxpZWRCdW5kbGVzID0gJHVzZXItPmdldEFwcGxpZWRCdW5kbGVzKCk7CgkJCQkJCQoJCQkJCWZvcmVhY2goJGFwcGxpZWRCdW5kbGVzIGFzICRhcHBsaWVkQnVuZGxlKQoJCQkJCXsKCQkJCQkJJGNvbXBhcmVbXSA9ICRhcHBsaWVkQnVuZGxlLT5nZXRCdW5kbGVJZCgpOwoJCQkJCX0KCQkJCQkKCQkJCQkvLyBnZXQgYnVuZGxlIGFwcGxpZWQgdG8gdGhlIG1lbWJlcidzIGFjY291bnQgdmlhIHRoZWlyIG1lbWJlcnNoaXAgbGV2ZWwKCQkJCQkkbWVtYmVyc2hpcCA9ICR1c2VyLT5nZXRNZW1iZXJzaGlwTGV2ZWwoKTsKCQkJCQkkbWVtYmVyc2hpcEJ1bmRsZXMgPSAkbWVtYmVyc2hpcC0+Z2V0QnVuZGxlcygpOwoJCQkJCQkKCQkJCQlmb3JlYWNoKCRtZW1iZXJzaGlwQnVuZGxlcyBhcyAkaWQ9PiRuYW1lKQoJCQkJCXsKCQkJCQkJJGNvbXBhcmVbXSA9ICRpZDsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWZvcigkaT0wOyAkaTxjb3VudCgkYnVuZGxlQXJyKTsgJGkrKykKCQkJCXsKCQkJCQlpZihpbnR2YWwoJGJ1bmRsZUFyclskaV0pIDwgMCkKCQkJCQl7CgkJCQkJCSRuZWdhdGVSZXN1bHQgPSB0cnVlOwoJCQkJCQkkYnVuZGxlQXJyWyRpXSA9IGFicyhpbnR2YWwoJGJ1bmRsZUFyclskaV0pKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJG5lZ2F0ZVJlc3VsdCA9IGZhbHNlOwoJCQkJCX0KCQkJCQkKCQkJCQlpZihpbl9hcnJheSgkYnVuZGxlQXJyWyRpXSwgJGNvbXBhcmUpKQoJCQkJCXsKCQkJCQkJaWYoISRuZWdhdGVSZXN1bHQpCgkJCQkJCXsKCQkJCQkJCSRidW5kbGVDaGVjayA9IHNlbGY6OiRQQVNTOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSBpZigkbmVnYXRlUmVzdWx0KQoJCQkJCXsKCQkJCQkJJGJ1bmRsZUNoZWNrID0gc2VsZjo6JFBBU1M7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRidW5kbGVDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCX0KCQkKCQkJLy8gY2hlY2sgdG8gc2VlIGlmIGN1cnJlbnQgbWVtYmVyIGhhcyB0aGUgYXBwcm9wcmlhdGUgbWVtYmVyc2hpcCB0eXBlIChmcmVlIG9yIHBhaWQpCgkJCWlmKGlzc2V0KCRpc2ZyZWUpKQoJCQl7CgkJCQkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokRkFJTDsKCQkJCQkKCQkJCSRtZW1iZXJUeXBlID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgpOwoJCQkJJG1lbWJlclR5cGUtPnNldElkKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSk7CgkJCQkkbWVtYmVyVHlwZS0+Z2V0RGF0YSgpOwoJCQkJCQkKCQkJCWlmKCRtZW1iZXJUeXBlLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJGlzRnJlZU1lbWJlciA9ICRtZW1iZXJUeXBlLT5pc0ZyZWUoKTsKCQkKCQkJCQlpZigoc3RydG9sb3dlcigkaXNmcmVlKSA9PSAidHJ1ZSIgJiYgJGlzRnJlZU1lbWJlciA9PSB0cnVlKSB8fCAoc3RydG9sb3dlcigkaXNmcmVlKSA9PSAiZmFsc2UiICYmICRpc0ZyZWVNZW1iZXIgPT0gZmFsc2UpKQoJCQkJCXsKCQkJCQkJJGlzRnJlZUNoZWNrID0gc2VsZjo6JFBBU1M7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRpc0ZyZWVDaGVjayA9IHNlbGY6OiRGQUlMOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRpc0ZyZWVDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJGRlYnVnU3RyIC49ICI8IS0tIG1tX21lbWJlcl9kZWNpc2lvbjogdXNlciB2YWxpZDogZmFsc2UgLS0+IjsKCQkJJHN0YXR1c0NoZWNrID0gJG1lbWJlcnNoaXBDaGVjayA9ICRidW5kbGVDaGVjayA9ICRpc0ZyZWVDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCSRkYXlzQXNNZW1iZXIgPSAwOwoJCX0KCQkKCQkkZGVidWdTdHIgLj0gIjwhLS0gbW1fbWVtYmVyX2RlY2lzaW9uOiBzdGF0dXNDaGVjazogJ3skc3RhdHVzQ2hlY2t9JyAtLT4iOwoJCSRkZWJ1Z1N0ciAuPSAiPCEtLSBtbV9tZW1iZXJfZGVjaXNpb246IG1lbWJlcnNoaXBDaGVjazogJ3skbWVtYmVyc2hpcENoZWNrfScgLS0+IjsKCQkkZGVidWdTdHIgLj0gIjwhLS0gbW1fbWVtYmVyX2RlY2lzaW9uOiBwcm9kdWN0QnVuZGxlQ2hlY2s6ICd7JGJ1bmRsZUNoZWNrfScgLS0+IjsKCQkkZGVidWdTdHIgLj0gIjwhLS0gbW1fbWVtYmVyX2RlY2lzaW9uOiBpc0ZyZWVDaGVjazogJ3skaXNGcmVlQ2hlY2t9JyAtLT4iOwoJCQoJCS8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB2aXNpdG9yIGlzIGEgbWVtYmVyCgkJaWYoaXNzZXQoJGlzbWVtYmVyKSkKCQl7CgkJCSRpc01lbWJlckNoZWNrID0gc2VsZjo6JEZBSUw7CgkJCgkJCWlmKCgkaXNtZW1iZXIgPT0gInRydWUiICYmICR1c2VyLT5pc1ZhbGlkKCkpIHx8ICgkaXNtZW1iZXIgPT0gImZhbHNlIiAmJiAhJHVzZXItPmlzVmFsaWQoKSkpCgkJCXsKCQkJCSRpc01lbWJlckNoZWNrID0gc2VsZjo6JFBBU1M7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkaXNNZW1iZXJDaGVjayA9IHNlbGY6OiRGQUlMOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSRpc01lbWJlckNoZWNrID0gc2VsZjo6JElHTk9SRTsKCQl9CgkJIAoJCSRkZWJ1Z1N0ciAuPSAiPCEtLSBtbV9tZW1iZXJfZGVjaXNpb246IGlzTWVtYmVyQ2hlY2s6ICd7JGlzTWVtYmVyQ2hlY2t9JyAtLT4iOwoJCQoJCS8vIHJlbmRlciBjb250ZW50IGlmIGV2ZXJ5dGhpbmcgY2hlY2tzIG91dAoJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQkkZGVidWdTdHIgLj0gIjwhLS0gbW1fbWVtYmVyX2RlY2lzaW9uOiBSRU5ERVIgdXNlciBpcyB2YWxpZCAtLT4iOwoJCQlpZihzZWxmOjpwYXNzKCRzdGF0dXNDaGVjaykgJiYgc2VsZjo6cGFzcygkbWVtYmVyc2hpcENoZWNrKSAmJiBzZWxmOjpwYXNzKCRidW5kbGVDaGVjaykKCQkJCSYmIHNlbGY6OnBhc3MoJGlzRnJlZUNoZWNrKSAmJiBzZWxmOjpwYXNzKCRpc01lbWJlckNoZWNrKSkKCQkJewoJCQkJJGRlYnVnU3RyIC49ICI8IS0tIG1tX21lbWJlcl9kZWNpc2lvbjogUkVOREVSIGNoZWNrcyBwYXNzZWQgLS0+IjsKCQoJCQkJaWYoJHVzZXItPmlzQWRtaW4oKSB8fCBNTV9FbXBsb3llZTo6aXNFbXBsb3llZSgkdXNlci0+Z2V0SWQoKSkpCgkJCQl7CgkJCQkJJHByZXZpZXdfb2JqID0gTU1fUHJldmlldzo6Z2V0RGF0YSgpOwoJCQkJCSRtZW1iZXJzaGlwSWQgPSAkcHJldmlld19vYmotPmdldE1lbWJlcnNoaXBJZCgpOwoJCQkJCSRkZWJ1Z1N0ciAuPSAiPCEtLSBtbV9tZW1iZXJfZGVjaXNpb246IFJFTkRFUiB1c2VyIGlzIGFkbWluLCB1c2UgbWVtYmVyc2hpcCBsZXZlbCB7JG1lbWJlcnNoaXBJZH0gLS0+IjsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkbWVtYmVyc2hpcElkID0gJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpOwoJCQkJCSRkZWJ1Z1N0ciAuPSAiPCEtLSBtbV9tZW1iZXJfZGVjaXNpb246IFJFTkRFUiB1c2UgbWVtYmVyc2hpcCBsZXZlbCB7JG1lbWJlcnNoaXBJZH0gLS0+IjsKCQkJCX0KCQkKCQkJCWlmKHNlbGY6OmNoZWNrRGF5c1dpdGhBY2Nlc3MoJHVzZXIsIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQLCAkbWVtYmVyc2hpcElkLCAkZGF5c0FzTWVtYmVyLCAkZGF5c0FzTWVtYmVyQ29tcGFyaXNvbikpCgkJCQl7CgkJCQkJJGRlYnVnU3RyIC49ICI8IS0tIG1tX21lbWJlcl9kZWNpc2lvbjogRE8gUkVOREVSIC0tPiI7CgkJCQkJcmV0dXJuIGRvX3Nob3J0Y29kZSgkY29udGVudCk7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBpZihzZWxmOjpwYXNzKCRpc01lbWJlckNoZWNrLCB0cnVlKSkKCQl7CgkJCSRkZWJ1Z1N0ciAuPSAiPCEtLSBtbV9tZW1iZXJfZGVjaXNpb246IHVzZXIgaXMgbm90IHZhbGlkLCBETyBSRU5ERVIgLS0+IjsKCQkJcmV0dXJuIGRvX3Nob3J0Y29kZSgkY29udGVudCk7CgkJfQoJCQoJCWlmKCRlbmFibGVEZWJ1ZykKCQl7CgkJCWVjaG8gJGRlYnVnU3RyOwoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fT3JkZXJfRGVjaXNpb24gdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgZGV0ZXJtaW5pbmcKCSAqIHdoZXRoZXIgb3Igbm90IHRoZSBjb250ZW50IHNob3VsZCBiZSBkaXNwbGF5ZWQgYmFzZWQgb24gdGhlIHBhcmFtZXRlcnMgcGFzc2VkLiBJdCBjYW4gYmUKCSAqIHVzZWQgaW4gdGhlIGNvbnRleHQgb2YgYSBjaGVja291dCBmb3JtIG9yIGEgY29uZmlybWF0aW9uIHBhZ2UKCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbW1fb3JkZXJfZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCSRvcmRlciA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudE9yZGVyKCk7CgkJJHByb2R1Y3RJZCA9IDA7CgkJJG1lbWJlcnNoaXBJZCA9IDA7CgkJJGlzU2hpcHBhYmxlID0gZmFsc2U7CgkJJGlzRnJlZSA9IGZhbHNlOwoJCSRkYXRhU2V0ID0gZmFsc2U7CgkJCgkJaWYoaXNzZXQoJGZvcm0pICYmICFlbXB0eSgkZm9ybSkpCgkJewoJCQkvLyBnZXQgZGF0YSBmcm9tIENoZWNrb3V0IEZvcm0KCQkJJGRhdGFTZXQgPSB0cnVlOwoJCQkkcHJvZHVjdElkID0gJGZvcm0tPnByb2R1Y3RJZDsKCQkJJG1lbWJlcnNoaXBJZCA9ICRmb3JtLT5tZW1iZXJzaGlwTGV2ZWxJZDsKCQkJJGlzRnJlZSA9ICRmb3JtLT5pc0ZyZWU7CgkJCSRpc1NoaXBwYWJsZSA9ICRmb3JtLT5pc1NoaXBwYWJsZTsKCQl9CgkJZWxzZSBpZigkb3JkZXItPmlzVmFsaWQoKSkKCQl7CgkJCS8vIGdldCBkYXRhIGZyb20gb3JkZXIKCQkJJHByb2R1Y3RzID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCQlpZihjb3VudCgkcHJvZHVjdHMpID4gMCkKCQkJewoJCQkJJG9yZGVySXRlbSA9IGFycmF5X3BvcCgkcHJvZHVjdHMpOyAvLyBjdXJyZW50bHkgYXNzdW1pbmcgc3VwcG9ydGluZyAxIHByb2R1Y3QgcGVyIG9yZGVyCgkJCQlpZigkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHByb2R1Y3RJZCA9ICRvcmRlckl0ZW0tPmdldEl0ZW1JZCgpOwoJCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJHByb2R1Y3RJZCk7CgkJCQkJCgkJCQkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCSRkYXRhU2V0ID0gdHJ1ZTsKCQkJCQkJJGlzRnJlZSA9IGZhbHNlOwoJCQkJCQkkaXNTaGlwcGFibGUgPSAkcHJvZHVjdC0+aXNTaGlwcGFibGUoKTsKCQkJCQkJJGFzc29jTWVtYmVyc2hpcCA9ICRwcm9kdWN0LT5nZXRBc3NvY2lhdGVkTWVtYmVyc2hpcCgpOwoJCQkJCQkKCQkJCQkJaWYoJGFzc29jTWVtYmVyc2hpcC0+aXNWYWxpZCgpKQoJCQkJCQl7CgkJCQkJCQkkbWVtYmVyc2hpcElkID0gJGFzc29jTWVtYmVyc2hpcC0+Z2V0SWQoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJLy8gaWYgdGhlIGZvcm0gb3Igb3JkZXIgaXMgbm90IHNldCB0aGVuIHRoYXQgbWVhbnMgaXQgd2FzIGEgZnJlZSBtZW1iZXIgc2lnbiB1cAoJCQkvLyBjb25maXJtIHRoYXQgdGhpcyBpcyBhIGNvbmZpcm1hdGlvbiBwYWdlIGFuZCB0aGVuIHBvcHVsYXRlIHRoZSBkYXRhIGZyb20gdGhlIAoJCQkvLyB1c2VyIGluIHRoZSBzZXNzaW9uCgkJCWdsb2JhbCAkcG9zdDsKCQkJCgkJCWlmKGlzc2V0KCRwb3N0LT5JRCkgJiYgaW50dmFsKCRwb3N0LT5JRCk+MCkKCQkJewoJCQkJJHBvc3RJZCA9ICRwb3N0LT5JRDsKCQkJfQoJCQllbHNlIGlmKGlzc2V0KCRwb3N0LT5kYXRhLT5JRCkgJiYgaW50dmFsKCRwb3N0LT5kYXRhLT5JRCkpCgkJCXsKCQkJCSRwb3N0SWQgPSAkcG9zdC0+ZGF0YS0+SUQ7CgkJCX0KCQkJCgkJCWlmKE1NX0NvcmVQYWdlRW5naW5lOjppc0NvbmZpcm1hdGlvblBhZ2UoJHBvc3RJZCkpCgkJCXsKCQkJCSR1c2VyID0gTU1fU21hcnRUYWdVdGlsOjpnZXRDdXJyZW50VXNlcigpOwoJCQkJCgkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRkYXRhU2V0ID0gdHJ1ZTsKCQkJCQkkaXNGcmVlID0gJHVzZXItPmdldE1lbWJlcnNoaXBMZXZlbCgpLT5pc0ZyZWUoKTsKCQkJCQkkaXNTaGlwcGFibGUgPSBmYWxzZTsKCQkJCQkkcHJvZHVjdElkID0gMDsKCQkJCQkkbWVtYmVyc2hpcElkID0gJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpOwoJCQkJfQoJCQl9CgkJfQoJCQoJCWlmKCRkYXRhU2V0KQoJCXsKCQkJJHByb2R1Y3RDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCSRtZW1iZXJzaGlwQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkaXNTaGlwcGFibGVDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCQoJCQkvLyBjaGVjayBmb3IgcHJvZHVjdAoJCQlpZihpc3NldCgkcHJvZHVjdGlkKSkKCQkJewoJCQkJJHByb2R1Y3RDaGVjayA9IHNlbGY6OiRGQUlMOwoJCQkKCQkJCSRwcm9kdWN0QXJyID0gZXhwbG9kZSgiLCIsICRwcm9kdWN0aWQpOwoJCQkKCQkJCWZvcigkaSA9IDA7ICRpIDwgY291bnQoJHByb2R1Y3RBcnIpOyAkaSsrKQoJCQkJewoJCQkJCWlmKGludHZhbCgkcHJvZHVjdEFyclskaV0pIDwgMCkKCQkJCQl7CgkJCQkJCWlmKCRwcm9kdWN0SWQgPT0gYWJzKCRwcm9kdWN0QXJyWyRpXSkpCgkJCQkJCXsKCQkJCQkJCWlmKCRwcm9kdWN0Q2hlY2sgPT0gc2VsZjo6JEZBSUwpCgkJCQkJCQl7CgkJCQkJCQkJJHByb2R1Y3RDaGVjayA9IHNlbGY6OiRGQUlMOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHByb2R1Y3RDaGVjayA9IHNlbGY6OiRQQVNTOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSBpZigkcHJvZHVjdElkID09ICRwcm9kdWN0QXJyWyRpXSkKCQkJCQl7CgkJCQkJCSRwcm9kdWN0Q2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHByb2R1Y3RDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCX0KCQkJCgkJCS8vIGNoZWNrIGZvciBtZW1iZXJzaGlwCgkJCWlmKGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCQl7CgkJCQkkbWVtYmVyc2hpcENoZWNrID0gc2VsZjo6JEZBSUw7CgkJCQkJCgkJCQkkbWVtYmVyc2hpcEFyciA9IGV4cGxvZGUoIiwiLCAkbWVtYmVyc2hpcGlkKTsKCQkJCQkKCQkJCWZvcigkaSA9IDA7ICRpIDwgY291bnQoJG1lbWJlcnNoaXBBcnIpOyAkaSsrKQoJCQkJewoJCQkJCWlmKGludHZhbCgkbWVtYmVyc2hpcEFyclskaV0pIDwgMCkKCQkJCQl7CgkJCQkJCWlmKCRtZW1iZXJzaGlwSWQgPT0gYWJzKCRtZW1iZXJzaGlwQXJyWyRpXSkpCgkJCQkJCXsKCQkJCQkJCWlmKCRtZW1iZXJzaGlwQ2hlY2sgPT0gc2VsZjo6JEZBSUwpCgkJCQkJCQl7CgkJCQkJCQkJJG1lbWJlcnNoaXBDaGVjayA9IHNlbGY6OiRGQUlMOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJG1lbWJlcnNoaXBDaGVjayA9IHNlbGY6OiRQQVNTOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSBpZigkbWVtYmVyc2hpcElkID09ICRtZW1iZXJzaGlwQXJyWyRpXSkKCQkJCQl7CgkJCQkJCSRtZW1iZXJzaGlwQ2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG1lbWJlcnNoaXBDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCX0KCQkJCgkJIAkvLyBjaGVjayBpZiBtZW1iZXJzaGlwIGlzIGZyZWUKCQkJaWYoaXNzZXQoJGlzZnJlZSkpCgkgCQl7CgkgCQkgCSRpc0ZyZWVDaGVjayA9IHNlbGY6OiRGQUlMOwoJIAkJCSAJIAoJIAkJCWlmKChzdHJ0b2xvd2VyKCRpc2ZyZWUpID09ICJ0cnVlIiAmJiAkaXNGcmVlID09IHRydWUpIAoJIAkJCQkJfHwgKHN0cnRvbG93ZXIoJGlzZnJlZSkgPT0gImZhbHNlIiAmJiAkaXNGcmVlID09IGZhbHNlKSkKCSAJCQl7CgkgCQkJCSRpc0ZyZWVDaGVjayA9IHNlbGY6OiRQQVNTOwoJIAkJCX0KCSAJCQllbHNlCgkgCQkJewoJIAkJCQkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokRkFJTDsKCSAJCQl9CgkJIAl9CgkJIAllbHNlCgkJIAl7CgkJIAkJJGlzRnJlZUNoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkgCX0KCQkJCgkJIAkvLyBjaGVjayBpZiBwcm9kdWN0IGlzIHNoaXBwYWJsZQoJCQlpZihpc3NldCgkaXNzaGlwcGFibGUpKQoJIAkJewoJIAkJIAkkaXNTaGlwcGFibGVDaGVjayA9IHNlbGY6OiRGQUlMOwoJIAkJCSAJIAoJIAkJCWlmKChzdHJ0b2xvd2VyKCRpc3NoaXBwYWJsZSkgPT0gInRydWUiICYmICRpc1NoaXBwYWJsZSA9PSB0cnVlKSAKCSAJCQkJCXx8IChzdHJ0b2xvd2VyKCRpc3NoaXBwYWJsZSkgPT0gImZhbHNlIiAmJiAkaXNTaGlwcGFibGUgPT0gZmFsc2UpKQoJIAkJCXsKCSAJCQkJJGlzU2hpcHBhYmxlQ2hlY2sgPSBzZWxmOjokUEFTUzsKCSAJCQl9CgkgCQkJZWxzZQoJIAkJCXsKCSAJCQkJJGlzU2hpcHBhYmxlQ2hlY2sgPSBzZWxmOjokRkFJTDsKCSAJCQl9CgkJIAl9CgkJIAllbHNlCgkJIAl7CgkJIAkJJGlzU2hpcHBhYmxlQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCSAJfQoJCSAJCgkJIAlpZihzZWxmOjpwYXNzKCRwcm9kdWN0Q2hlY2spICYmIHNlbGY6OnBhc3MoJG1lbWJlcnNoaXBDaGVjaykKCQkgCQkJJiYgc2VsZjo6cGFzcygkaXNGcmVlQ2hlY2spICYmIHNlbGY6OnBhc3MoJGlzU2hpcHBhYmxlQ2hlY2spKQoJCSAJewoJCSAJCXJldHVybiBkb19zaG9ydGNvZGUoJGNvbnRlbnQpOwoJCSAJfQoJCSAJZWxzZQoJCSAJewoJCSAJCXJldHVybiAiIjsKCQkgCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICIiOwoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fQWZmaWxpYXRlX0RlY2lzaW9uIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGRldGVybWluaW5nCgkgKiB3aGV0aGVyIG9yIG5vdCB0aGUgY29udGVudCBzaG91bGQgYmUgZGlzcGxheWVkIGJhc2VkIG9uIHRoZSBwYXJhbWV0ZXJzIHBhc3NlZCBhbmQgdGhlIGN1cnJlbnQgCgkgKiBhZmZpbGlhdGUvc3ViYWZmaWxpYXRlIHZhbHVlcyBzdG9yZWQgaW4gY29va2llcwoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBtbV9hZmZpbGlhdGVfZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlpZihzZWxmOjpjaGVja0Nvb2tpZXMoJGF0dHMpKQoJCXsKCQkJcmV0dXJuIGRvX3Nob3J0Y29kZSgkY29udGVudCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0N1c3RvbV9EZWNpc2lvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBkZXRlcm1pbmluZwoJICogd2hldGhlciBvciBub3QgdGhlIGNvbnRlbnQgc2hvdWxkIGJlIGRpc3BsYXllZCBiYXNlZCBvbiB0aGUgcGFyYW1ldGVycyBwYXNzZWQgYW5kIHRoZSBjdXJyZW50IAoJICogdmFsdWVzIHN0b3JlZCBpbiBjb29raWVzCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX2N1c3RvbV9kZWNpc2lvbigkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCWlmKHNlbGY6OmNoZWNrQ29va2llcygkYXR0cykpCgkJewoJCQlyZXR1cm4gZG9fc2hvcnRjb2RlKCRjb250ZW50KTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICIiOwoJCX0KCX0KCQogCXByb3RlY3RlZCBzdGF0aWMgZnVuY3Rpb24gY2hlY2tDb29raWVzKCRhdHRzKQogCXsKIAkJJHRlc3RSZXN1bHRzID0gYXJyYXkoKTsKIAkJJGNoZWNrQ3RyID0gMDsKIAkJCQogCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKIAkJewkKIAkJCWZvcmVhY2goJGF0dHMgYXMgJGtleT0+JGNoZWNrVmFsdWVzKQogCQkJewogCQkJCSR0ZXN0UmVzdWx0c1skY2hlY2tDdHJdID0gJGNvb2tpZXNDaGVjayA9IHNlbGY6OiRGQUlMOwogCQkJCQogCQkJCS8vIGdldCB2YWx1ZSBzZXQgaW4gY29va2llcyBmb3IgdGhlIGN1cnJlbnQga2V5CiAJCQkJaWYoc3RydG9sb3dlcigka2V5KSA9PSAiYWZmaWxpYXRlIikKIAkJCQl7CiAJCQkJCSRjb29raWVWYWx1ZSA9IE1NX0Nvb2tpZXM6OmdldEFmZmlsaWF0ZVZhbHVlKCk7CiAJCQkJfQogCQkJCWVsc2UgaWYoc3RydG9sb3dlcigka2V5KSA9PSAic3ViYWZmaWxpYXRlIikKIAkJCQl7CiAJCQkJCSRjb29raWVWYWx1ZSA9IE1NX0Nvb2tpZXM6OmdldFN1YkFmZmlsaWF0ZVZhbHVlKCk7CiAJCQkJfQogCQkJCWVsc2UKIAkJCQl7CiAJCQkJCSRjb29raWVWYWx1ZSA9IE1NX0Nvb2tpZXM6OmdldENvb2tpZSgka2V5KTsKIAkJCQl9CgkKIAkJCQlpZihwcmVnX21hdGNoKCIvLC8iLCAkY2hlY2tWYWx1ZXMpKQogCQkJCXsKIAkJCQkJLy9lY2hvICI8IS0tIGNoZWNrQ29va2llczoga2V5OiAneyRrZXl9JyBtdWx0aXBsZSB2YWx1ZXMuLi4gLS0+IjsKIAkJCQkJLy9lY2hvICI8IS0tIGNoZWNrQ29va2llczogY29va2llIHZhbHVlOiAneyRjb29raWVWYWx1ZX0nIC0tPiI7CiAJCQkJCSRjaGVja1ZhbHVlc0FyciA9IGV4cGxvZGUoIiwiLCAkY2hlY2tWYWx1ZXMpOwogCQkJCQkKIAkJCQkJZm9yKCRpPTA7ICRpIDwgY291bnQoJGNoZWNrVmFsdWVzQXJyKTsgJGkrKykKIAkJCQkJewogCQkJCQkJJGNybnRWYWx1ZSA9ICRjaGVja1ZhbHVlc0FyclskaV07CiAJCQkJCQkKIAkJCQkJCWlmKHNlbGY6OmRvTmVnYXRlVmFsdWUoJGNybnRWYWx1ZSkpCiAJCQkJCQl7CiAJCQkJCQkJJGNybnRWYWx1ZSA9IHN1YnN0cigkY3JudFZhbHVlLCAxKTsKIAkJCQkJCQkvL2VjaG8gIjwhLS0gY2hlY2tDb29raWVzOiBrZXk6ICd7JGtleX0nIHZhbHVlLXskaX06ICd7JGNybnRWYWx1ZX0nIC0tPiI7CiAJCQkJCQkJaWYoc3RydG9sb3dlcigkY29va2llVmFsdWUpICE9IHN0cnRvbG93ZXIoJGNybnRWYWx1ZSkpCiAJCQkJCQkJewogCQkJCQkJCQkkdGVzdFJlc3VsdHNbJGNoZWNrQ3RyXSA9IHNlbGY6OiRQQVNTOwogCQkJCQkJCQlicmVhazsKIAkJCQkJCQl9CiAJCQkJCQkJZWxzZSBpZigkdGVzdFJlc3VsdHNbJGNoZWNrQ3RyXSA9PSBzZWxmOjokRkFJTCkKIAkJCQkJCQl7CiAJCQkJCQkJCSR0ZXN0UmVzdWx0c1skY2hlY2tDdHJdID0gc2VsZjo6JEZBSUw7CiAJCQkJCQkJfQogCQkJCQkJfQogCQkJCQkJZWxzZSAKIAkJCQkJCXsKCSAJCQkJCQlpZihzdHJ0b2xvd2VyKCRjb29raWVWYWx1ZSkgPT0gc3RydG9sb3dlcigkY3JudFZhbHVlKSkKCSAJCQkJCQl7CgkgCQkJCQkJCSR0ZXN0UmVzdWx0c1skY2hlY2tDdHJdID0gc2VsZjo6JFBBU1M7CgkgCQkJCQkJCWJyZWFrOwoJIAkJCQkJCX0KCSAJCQkJCQllbHNlIGlmKCRjb29raWVzQ2hlY2sgPT0gc2VsZjo6JEZBSUwpCgkgCQkJCQkJewoJIAkJCQkJCQkkdGVzdFJlc3VsdHNbJGNoZWNrQ3RyXSA9IHNlbGY6OiRGQUlMOwoJIAkJCQkJCX0KIAkJCQkJCX0KIAkJCQkJfQogCQkJCX0KIAkJCQllbHNlCiAJCQkJewogCQkJCQkkY3JudFZhbHVlID0gJGNoZWNrVmFsdWVzOwogCQkJCQlpZihzZWxmOjpkb05lZ2F0ZVZhbHVlKCRjcm50VmFsdWUpKQogCQkJCQl7CiAJCQkJCQkkY3JudFZhbHVlID0gc3Vic3RyKCRjcm50VmFsdWUsIDEpOwogCQkJCQkJaWYoc3RydG9sb3dlcigkY29va2llVmFsdWUpICE9IHN0cnRvbG93ZXIoJGNybnRWYWx1ZSkpCiAJCQkJCQl7CiAJCQkJCQkJJHRlc3RSZXN1bHRzWyRjaGVja0N0cl0gPSBzZWxmOjokUEFTUzsKIAkJCQkJCX0KIAkJCQkJCWVsc2UKIAkJCQkJCXsKIAkJCQkJCQkkdGVzdFJlc3VsdHNbJGNoZWNrQ3RyXSA9IHNlbGY6OiRGQUlMOwogCQkJCQkJfQogCQkJCQl9CiAJCQkJCWVsc2UKIAkJCQkJewogCQkJCQkJaWYoc3RydG9sb3dlcigkY29va2llVmFsdWUpID09IHN0cnRvbG93ZXIoJGNybnRWYWx1ZSkpCiAJCQkJCQl7CiAJCQkJCQkJJHRlc3RSZXN1bHRzWyRjaGVja0N0cl0gPSBzZWxmOjokUEFTUzsKIAkJCQkJCX0KIAkJCQkJCWVsc2UKIAkJCQkJCXsKIAkJCQkJCQkkdGVzdFJlc3VsdHNbJGNoZWNrQ3RyXSA9IHNlbGY6OiRGQUlMOwogCQkJCQkJfQogCQkJCQl9CiAJCQkJfQogCQkJCQogCQkJCSRjaGVja0N0cisrOwogCQkJfQogCQl9CiAJCQogCQkkdGVzdFBhc3NlZCA9IHRydWU7CiAJCWZvcigkaSA9IDA7ICRpIDwgY291bnQoJHRlc3RSZXN1bHRzKTsgJGkrKykKIAkJewogCQkJJHRlc3RQYXNzZWQgPSAkdGVzdFBhc3NlZCAmJiBzZWxmOjpwYXNzKCR0ZXN0UmVzdWx0c1skaV0pOwogCQl9CiAJCQogCQlyZXR1cm4gJHRlc3RQYXNzZWQ7CiAJfQogCQogCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGRvTmVnYXRlVmFsdWUoJHZhbHVlKQogCXsKIAkJaWYoc3RycG9zKCR2YWx1ZSwgIi0iKSA9PT0gMCkKIAkJewogCQkJcmV0dXJuIHRydWU7CiAJCX0KIAkJZWxzZQogCQl7CiAJCQlyZXR1cm4gZmFsc2U7CiAJCX0KIAl9Cn0K', 0, '2018-11-21 06:38:53'),
(49, 'cancellationmethod', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQ2FuY2VsbGF0aW9uTWV0aG9kCnsKCXB1YmxpYyBzdGF0aWMgJE9WRVJEVUVfQ0hBTkdFID0gImNoYW5nZV90b19vdmVyZHVlIjsgLy8gVE9ETyByZW1vdmUgYnkgY3JlYXRlIE1NIGFjdGlvbiB0byBoYW5kbGUgb3ZlcmR1ZSBwYXltZW50cwoJcHVibGljIHN0YXRpYyAkT1ZFUkRVRV9FTUFJTCA9ICJzZW5kX2VtYWlsX3JlbWluZGVyIjsgLy8gVE9ETyByZW1vdmUKCXB1YmxpYyBzdGF0aWMgJENBTkNFTF9IQVJEID0gImhhcmQiOwoJcHVibGljIHN0YXRpYyAkQ0FOQ0VMX1BBVVNFID0gInBhdXNlIjsKfQo=', 0, '2018-11-21 06:38:53'),
(50, 'abstractaffiliateprovider', 'YWJzdHJhY3QgY2xhc3MgTU1fQWJzdHJhY3RBZmZpbGlhdGVQcm92aWRlciB7CgkKCXByaXZhdGUgJG5hbWU7Cglwcml2YXRlICR0b2tlbjsKCQoJcHVibGljIGZ1bmN0aW9uIGhhbmRsZU9wdGlvbnNEaWFsb2coJG9wdGlvbkRhdGEpIHt9CglwdWJsaWMgZnVuY3Rpb24gY29uZmlndXJlRnJvbU9wdGlvbnMoJG9wdGlvbkRhdGEpIHsgcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOyB9CglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyQWRkaXRpb25hbE9wdGlvbnMoKSB7IHJldHVybiAiIjsgfQoJcHVibGljIGZ1bmN0aW9uIGdldEFmZmlsaWF0ZVRyYWNraW5nSWQoKSB7IHJldHVybiAiIjsgfQoJcHVibGljIGZ1bmN0aW9uIGdldFN1YmFmZmlsaWF0ZVRyYWNraW5nSWQoKSB7IHJldHVybiAiIjsgfQoJcHVibGljIGZ1bmN0aW9uIGdldFBheW91dFByb2ZpbGVzKCkge30KCXB1YmxpYyBmdW5jdGlvbiBjcmVhdGVBZmZpbGlhdGVBY2NvdW50KCR1c2VyRGF0YSkgeyByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7IH0KCXB1YmxpYyBmdW5jdGlvbiB0cmFja0NvbW1pc3Npb24oTU1fQ29tbWlzc2lvblByb2ZpbGUgJGNvbW1pc3Npb25Qcm9maWxlLCAkYWZmaWxpYXRlSWQsICRvcmRlck51bWJlciwgJG9yZGVyRGF0YSwgJG9yZGVyVG90YWwsICRpc1JlYmlsbCkgeyByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7IH0KCXB1YmxpYyBmdW5jdGlvbiByZXZlcnNlQ29tbWlzc2lvbigkYWZmaWxpYXRlSWQsICRvcmRlck51bWJlcikgeyByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7IH0KCXB1YmxpYyBmdW5jdGlvbiBzdXBwb3J0c0ZlYXR1cmUoJGZlYXR1cmVDb25zdCkgeyByZXR1cm4gZmFsc2U7IH0KCQoJLyoqCgkgKiAKCSAqIERlZmF1bHQgY29uc3RydWN0b3IgZm9yIGFsbCBwcm92aWRlcnMuIAoJICogQHBhcmFtIFN0cmluZyAkcHJvdmlkZXJfaW5mbyBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBwcm92aWRlciBpbmZvcm1hdGlvbiBmcm9tIHRoZSBkYXRhIHN0b3JlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcHJvdmlkZXJfaW5mbykgCgl7CgkJJHRoaXMtPm5hbWUgPSAkcHJvdmlkZXJfaW5mby0+cHJvdmlkZXJfbmFtZTsKCQkkdGhpcy0+dG9rZW4gPSAkcHJvdmlkZXJfaW5mby0+cHJvdmlkZXJfdG9rZW47Cgl9CgkKCS8qKgoJICogUmV0dXJucyBhbiBvYmplY3QgY2FwYWJsZSBvZiByZW5kZXJpbmcgdGhlIGRlZmF1bHQgb3B0aW9ucyBkaWFsb2cKCSAqIEBwYXJhbSBBcnJheSAkcG9zdCBBbnkgZGF0YSBwb3N0ZWQgbmVjZXNzYXJ5IHRvIGRyYXcgdGhlIG9wdGlvbnMgZGlhbG9nCgkgKiBAcmV0dXJuIE9iamVjdCBvZiB0eXBlIE1NX0FmZmlsaWF0ZVByb3ZpZGVyRGlhbG9nIHJlcHJlc2VudGluZyB0aGUgZGlhbG9nIHRvIGRyYXcKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbmRlck9wdGlvbnNEaWFsb2coJHBvc3QpIAoJewoJCSRmb3JtID0gbmV3IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRGlhbG9nKCk7CgkJcmV0dXJuICRmb3JtOwoJfQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGRpc3BsYXlhYmxlIG5hbWUgb2YgdGhlIHByb3ZpZGVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXROYW1lKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5uYW1lOwoJfQoJCgkvKioKCSAqIFNldHMgdGhlIGRpc3BsYXlhYmxlIG5hbWUgb2YgdGhlIHByb3ZpZGVyCgkgKiBAcGFyYW0gU3RyaW5nICRuZXdOYW1lCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXROYW1lKCRuZXdOYW1lKSAKCXsKCQkkdGhpcy0+bmFtZSA9ICRuZXdOYW1lOwoJfQoJCgkvKioKCSAqIFJldHVybnMgdGhlIHByb3ZpZGVyIHRva2VuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRUb2tlbigpIAoJewoJCXJldHVybiAkdGhpcy0+dG9rZW47Cgl9CgkKCS8qKgoJICogU2V0cyB0aGUgcHJvdmlkZXIgdG9la24KCSAqIEBwYXJhbSBTdHJpbmcgJG5ld1Rva2VuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRUb2tlbigkbmV3VG9rZW4pIAoJewoJCSR0aGlzLT50b2tlbiA9ICRuZXdUb2tlbjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcnNpc3RQcm9maWxlTWFwcGluZ3MoJHByb3ZpZGVyX2lkLCAkbWFwKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJTU1fVHJhbnNhY3Rpb246OmJlZ2luKCk7CgkJdHJ5IAoJCXsKCQkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSggJHdwZGItPnByZXBhcmUoIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSX01BUFBJTkdTLiIgV0hFUkUgYWZmaWxpYXRlX3Byb3ZpZGVyX2lkID0gJWQiLCAkcHJvdmlkZXJfaWQpKTsKCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJIAl7CgkJIAkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byByZW1vdmUgdGhlIGV4aXN0aW5nIG1lbWJlcnNoaXAgbGV2ZWwgZnJvbSBsaXN0IG1hcHBpbmdzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJIAl9CgkJCWZvcmVhY2goJG1hcCBhcyAkbWVtYmVyc2hpcF9pZD0+JHByb2ZpbGVfaWQpIAoJCQl7CgkJCQkkcHJvZmlsZV9pZCA9IGh0bWxfZW50aXR5X2RlY29kZSgkcHJvZmlsZV9pZCxFTlRfQ09NUEFUIHwgRU5UX0hUTUw0MDEsICJVVEYtOCIpOwoJCQkJJHNxbCA9ICJJTlNFUlQgSU5UTyAiLk1NX1RBQkxFX0FGRklMSUFURV9QUk9WSURFUl9NQVBQSU5HUy4iIFNFVCAiLgoJCQkJCSAgICJtZW1iZXJzaGlwX2xldmVsX2lkID0gJWQsIi4KCQkJCQkgICAicGF5b3V0X3Byb2ZpbGVfaWQgPSAlcywiLgoJCQkJCSAgICJhZmZpbGlhdGVfcHJvdmlkZXJfaWQgPSAlZCI7CgkJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkbWVtYmVyc2hpcF9pZCwgaHRtbF9lbnRpdHlfZGVjb2RlKCRwcm9maWxlX2lkLEVOVF9DT01QQVQgfCBFTlRfSFRNTDQwMSwgIlVURi04IiksICRwcm92aWRlcl9pZCkpOwoJCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCSAJewoJCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byBhZGQgbmV3IG1lbWJlcnNoaXAgbGV2ZWwgdG8gcGF5b3V0IHByb2ZpbGUgbWFwcGluZyAoIi4kc3FsLiIpIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCSAJfQoJCQkJCgkJCX0KCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIAoJCXsKCQkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIG1hcCBtZW1iZXJzaGlwIGxldmVscyB0byBhZmZpbGlhdGUgcHJvdmlkZXIgcGF5b3V0IHByb2ZpbGVzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCU1NX1RyYW5zYWN0aW9uOjpjb21taXQoKTsKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9maWxlSWRGb3JNZW1iZXJzaGlwTGV2ZWwoJG1lbWJlcnNoaXBJZCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fQWZmaWxpYXRlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkdGhpcy0+Z2V0VG9rZW4oKSk7CgkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJewoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoIlNFTEVDVCBwYXlvdXRfcHJvZmlsZV9pZCBGUk9NICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSX01BUFBJTkdTLiIgV0hFUkUgbWVtYmVyc2hpcF9sZXZlbF9pZCA9ICVkIGFuZCBhZmZpbGlhdGVfcHJvdmlkZXJfaWQgPSAlZCIsICRtZW1iZXJzaGlwSWQsICRwcm92aWRlcl9lbnRpdHktPmdldElkKCkpKTsKCQkJJHByb2ZpbGVJZCA9ICgkcmVzdWx0ICE9IG51bGwpPyRyZXN1bHQ6IiI7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHByb2ZpbGVJZCwgTU1fUmVzcG9uc2U6OiRTVUNDRVNTKTsKCQl9CgkJZWxzZSAKCQl7CgkJCS8vc2hvdWxkIG5ldmVyIGhhcHBlbgoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIHJldHJpZXZlIGluZm9ybWF0aW9uIGZvciB0aGUgYWZmaWxpYXRlIHByb3ZpZGVyIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkvKioKCSAqIE1ha2VzIGFuIEhUVFAgY29ubmVjdGlvbiB0byBhIHJlbW90ZSBVUkwgYW5kIHJldHVybnMgdGhlIHJlc3BvbnNlCgkgKgoJICogQHBhcmFtIFN0cmluZyAkcmVtb3RlVXJsIFRoZSByZW1vdGUgVVJMIHRvIGNvbm5lY3QgdG8KCSAqIEBwYXJhbSBTdHJpbmcgJG1ldGhvZCBUaGUgdHlwZSBvZiBjb25uZWN0aW9uIHRvIG1ha2UuIE9ubHkgUE9TVCBvciBHRVQgaHR0cCB2ZXJicyBjdXJyZW50bHkgc3VwcG9ydGVkLCB2YWx1ZSBpcyBQT1NUIGJ5IGRlZmF1bHQKCSAqIEBwYXJhbSBhcnJheS9TdHJpbmcgJGRhdGEgKG9wdGlvbmFsKSBBbiBhcnJheSBvZiBrZXkvdmFsdWUgcGFpcnMsIG9yIGEgc3RyaW5nLCB0byBQT1NUIHRvIHRoZSByZW1vdGUgVVJMIHdoZW4gdGhlIGNvbm5lY3Rpb25NZXRob2QgaXMgc2V0IHRvIFBPU1QuIElmIHRoaXMgcGFyYW1ldGVyIGlzIGFuIGFycmF5LCBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgc3VpdGFibGUgZm9yIFBPU1RpbmcgYW5kIHVybCBlbmNvZGVkCgkgKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnMgKG9wdGlvbmFsKSBBbiBhcnJheSBvZiBjdXJsb3B0aW9ucyB0byBwYXNzIGRpcmVjdGx5IHRvIHRoZSB1bmRlcmx5aW5nIGN1cmwgaW1wbGVtZW50YXRpb24KCSAqCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIFdyYXBwZXIgYXJvdW5kIHRoZSByZW1vdGUgcmVzcG9uc2UsIHdpdGggdGhlIHJhdyByZXNwb25zZSBpbiB0aGUgTU1fUmVzcG9uc2UgbWVzc2FnZSBvbiBzdWNjZXNzLCBhbmQgYSBkZXNjcmlwdGl2ZSBlcnJvciBtZXNzYWdlIGluIHRoZSByZXNwb25zZSBtZXNzYWdlIG90aGVyd2lzZS4KCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGRvSFRUUFJlcXVlc3QoJHJlbW90ZVVybCwgJG1ldGhvZD0iUE9TVCIsICRkYXRhPSIiLCAkb3B0aW9ucz1hcnJheSgpKQoJewoJCSRwb3N0X3N0cmluZyA9ICIiOwoJCWlmIChpc19hcnJheSgkZGF0YSkpCgkJewoJCQlmb3JlYWNoKCAkZGF0YSBhcyAka2V5ID0+ICR2YWx1ZSApCgkJCXsKCQkJCSRwb3N0X3N0cmluZyAuPSAiJGtleT0iIC4gdXJsZW5jb2RlKCR2YWx1ZSkgLiAiJiI7CgkJCX0KCQkJJHBvc3Rfc3RyaW5nID0gcnRyaW0oICRwb3N0X3N0cmluZywgIiYgIiApOwoJCX0KCQllbHNlCgkJewoJCQkkcG9zdF9zdHJpbmcgPSAkZGF0YTsKCQl9CgkJCgkJJHJlcXVlc3QgPSBjdXJsX2luaXQoJHJlbW90ZVVybCk7IC8vIGluaXRpYXRlIGN1cmwgb2JqZWN0CgkKCQkkZGVmYXVsdE9wdGlvbnMgPSBhcnJheShDVVJMT1BUX0hFQURFUj0+RkFMU0UsCgkJCQlDVVJMT1BUX1JFVFVSTlRSQU5TRkVSPT4xLAoJCQkJQ1VSTE9QVF9TU0xfVkVSSUZZUEVFUj0+MAoJCSk7CgkJJG9wdGlvbnMgKz0gJGRlZmF1bHRPcHRpb25zOyAvL21lcmdlIGluIHRoZSBkZWZhdWx0cywgYnV0IGRvbid0IG92ZXJyaWRlIGV4cGxpY2l0bHkgc2V0IG9wdGlvbnMKCQoJCSRtZXRob2QgPSBzdHJ0b3VwcGVyKCRtZXRob2QpOwoJCWlmKCRtZXRob2QgPT0gJ1BPU1QnKQoJCXsKCQkJJHBvc3RPcHRpb25zID0gYXJyYXkoQ1VSTE9QVF9DVVNUT01SRVFVRVNUICA9PiAiUE9TVCIsCgkJCQkJCQkJIENVUkxPUFRfUE9TVEZJRUxEUyAgICAgPT4gJHBvc3Rfc3RyaW5nKTsKCQkJLy9UT0RPOiBQSFAgNS4yIHdvcmthcm91bmQgLSByZW1vdmUgb25jZSBzdXBwb3J0IGlzIGRyb3BwZWQKCQkJaWYgKHZlcnNpb25fY29tcGFyZShQSFBfVkVSU0lPTiwgJzUuMy4yJykgPj0gMCkKCQkJewoJCQkJJHBvc3RPcHRpb25zW0NVUkxPUFRfUE9TVFJFRElSXSA9IDc7CgkJCX0KCQkJaWYgKCFpbmlfZ2V0KCdzYWZlX21vZGUnKSAmJiAhaW5pX2dldCgnb3Blbl9iYXNlZGlyJykpCgkJCXsKCQkJCSRwb3N0T3B0aW9uc1tDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OXSA9IHRydWU7CgkJCX0KCQkJZm9yZWFjaCAoJHBvc3RPcHRpb25zIGFzICRjdXJsT3B0aW9uPT4kY3VybE9wdGlvblZhbHVlKQoJCQl7CgkJCQlpZiAoIWlzc2V0KCRvcHRpb25zWyRjdXJsT3B0aW9uXSkpCgkJCQl7CgkJCQkJJG9wdGlvbnNbJGN1cmxPcHRpb25dID0gJGN1cmxPcHRpb25WYWx1ZTsKCQkJCX0KCQkJfQoJCX0KCQllbHNlIGlmICgkbWV0aG9kICE9ICdHRVQnKQoJCXsKCQkJaWYgKCFpc3NldCgkb3B0aW9uc1tDVVJMT1BUX0NVU1RPTVJFUVVFU1RdKSkKCQkJewoJCQkJJG9wdGlvbnNbQ1VSTE9QVF9DVVNUT01SRVFVRVNUXSA9ICRwb3N0X3N0cmluZzsKCQkJfQoJCX0KCQoJCWN1cmxfc2V0b3B0X2FycmF5KCRyZXF1ZXN0LCAkb3B0aW9ucyk7CgkKCQkkcmF3X3Jlc3BvbnNlID0gY3VybF9leGVjKCRyZXF1ZXN0KTsgLy8gZXhlY3V0ZSBjdXJsIHBvc3QgYW5kIHN0b3JlIHJlc3VsdHMgaW4gJHJhd19yZXNwb25zZQoJCgkJJGN1cmxfZXJyb3IgPSBjdXJsX2Vycm9yKCRyZXF1ZXN0KTsKCQoJCSRyZXNwb25zZU9iaiA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCSRyZXNwb25zZU9iai0+YWRkRGF0YSgiaHR0cF9jb2RlIixjdXJsX2dldGluZm8oJHJlcXVlc3QsQ1VSTElORk9fSFRUUF9DT0RFKSk7CgkKCQljdXJsX2Nsb3NlKCRyZXF1ZXN0KTsgLy8gY2xvc2UgY3VybCBvYmplY3QKCQoJCWlmICgkY3VybF9lcnJvciA9PSAiIikKCQl7CgkJCSRyZXNwb25zZU9iai0+bWVzc2FnZSA9ICRyYXdfcmVzcG9uc2U7CgkJCSRyZXNwb25zZU9iai0+YWRkRGF0YSgidXJsIiwgJHJlbW90ZVVybC4iPyIuJHBvc3Rfc3RyaW5nKTsKCQkJcmV0dXJuICRyZXNwb25zZU9iajsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlc3BvbnNlT2JqLT5tZXNzYWdlID0gJGN1cmxfZXJyb3I7CgkJCSRyZXNwb25zZU9iai0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCXJldHVybiAkcmVzcG9uc2VPYmo7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:53'),
(51, 'reportdynamiccontent', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUmVwb3J0RHluYW1pY0NvbnRlbnQgZXh0ZW5kcyBNTV9SZXBvcnRWaXN1YWxFbGVtZW50CnsKCQoJcHJvdGVjdGVkICRhbmltYXRlID0gdHJ1ZTsKCXByb3RlY3RlZCAkY29udGVudElzQ3VycmVuY3kgPSBmYWxzZTsKCXByb3RlY3RlZCAkc2hvd0N1cnJlbmN5RnJhY3Rpb25hbENvbXBvbmVudCA9IHRydWU7Cglwcm90ZWN0ZWQgJHBvc3RmaXhJc28gPSBmYWxzZTsKCQoJcHJvdGVjdGVkICR1bml0U3BlY2lmaWVyQ2xhc3MgPSAiIjsKCQoJLy9tb2RlbCBpcyBleHBlY3RlZCB0byBjb250YWluIHNvbWUgY29tYmluYXRpb24gb2YgYW4gaWQsIGNsYXNzLCBhbmQgY29udGVudAkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRKYXZhc2NyaXB0RGVwZW5kZW5jaWVzKCkKCXsKCQlyZXR1cm4gYXJyYXkoTU1fUExVR0lOX1VSTC4iL3Jlc291cmNlcy9qcy9hZG1pbi9qcXVlcnkuYW5pbWF0ZU51bWJlci5taW4uanMiKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNyZWF0ZUN1cnJlbmN5RHluYW1pY0NvbnRlbnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkY3VycmVuY3lWYWx1ZSwkY3VycmVuY3lDb2RlLCAkdW5pdFNwZWNpZmllcj0iIiwkdW5pdFNwZWNpZmllckNsYXNzPSIiKQoJewoJCSRkeW5hbWljQ29udGVudCA9IG5ldyBNTV9SZXBvcnREeW5hbWljQ29udGVudCgkZWxlbWVudElkZW50aWZpZXIpOwoJCSRkeW5hbWljQ29udGVudC0+Y29udGVudElzQ3VycmVuY3kgPSB0cnVlOwoJCSRkeW5hbWljQ29udGVudC0+bW9kZWwgPSBhcnJheSgpOwoJCSRkeW5hbWljQ29udGVudC0+bW9kZWxbJ2N1cnJlbmN5Q29kZSddICA9ICRjdXJyZW5jeUNvZGU7CgkJJGR5bmFtaWNDb250ZW50LT5tb2RlbFsnY29udGVudCddID0gJGN1cnJlbmN5VmFsdWU7CgkJJGR5bmFtaWNDb250ZW50LT5tb2RlbFsndW5pdFNwZWNpZmllciddID0gJHVuaXRTcGVjaWZpZXI7CgkJJGR5bmFtaWNDb250ZW50LT5tb2RlbFsndW5pdFNwZWNpZmllckNsYXNzJ10gPSAkdW5pdFNwZWNpZmllckNsYXNzOwoJCXJldHVybiAkZHluYW1pY0NvbnRlbnQ7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVOdW1lcmljRHluYW1pY0NvbnRlbnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkbnVtZXJpY1ZhbHVlLCR1bml0U3BlY2lmaWVyPSIiLCR1bml0U3BlY2lmaWVyQ2xhc3M9IiIpCgl7CgkJJGR5bmFtaWNDb250ZW50ID0gbmV3IE1NX1JlcG9ydER5bmFtaWNDb250ZW50KCRlbGVtZW50SWRlbnRpZmllcik7CgkJJGR5bmFtaWNDb250ZW50LT5jb250ZW50SXNDdXJyZW5jeSA9IGZhbHNlOwoJCSRkeW5hbWljQ29udGVudC0+bW9kZWwgPSBhcnJheSgpOwoJCSRkeW5hbWljQ29udGVudC0+bW9kZWxbJ2NvbnRlbnQnXSA9ICRudW1lcmljVmFsdWU7CgkJJGR5bmFtaWNDb250ZW50LT5tb2RlbFsndW5pdFNwZWNpZmllciddID0gJHVuaXRTcGVjaWZpZXI7CgkJJGR5bmFtaWNDb250ZW50LT5tb2RlbFsndW5pdFNwZWNpZmllckNsYXNzJ10gPSAkdW5pdFNwZWNpZmllckNsYXNzOwoJCXJldHVybiAkZHluYW1pY0NvbnRlbnQ7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVGcm9tQ29udGVudCgkZWxlbWVudElkZW50aWZpZXIsICRjb250ZW50KQoJewoJCSRkeW5hbWljQ29udGVudCA9IG5ldyBNTV9SZXBvcnREeW5hbWljQ29udGVudCgkZWxlbWVudElkZW50aWZpZXIpOwoJCSRkeW5hbWljQ29udGVudC0+Y29udGVudElzQ3VycmVuY3kgPSBmYWxzZTsKCQkkZHluYW1pY0NvbnRlbnQtPmFuaW1hdGUgPSBmYWxzZTsKCQkkZHluYW1pY0NvbnRlbnQtPm1vZGVsID0gYXJyYXkoKTsKCQkkZHluYW1pY0NvbnRlbnQtPm1vZGVsWydjb250ZW50J10gPSAkY29udGVudDsKCQlyZXR1cm4gJGR5bmFtaWNDb250ZW50OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXIoKQoJewoJCSRvdXRwdXQgPSAiIjsKCQkkY29udGVudCA9ICR0aGlzLT5tb2RlbFsnY29udGVudCddOwoJCSRwcmVmaXggPSBpc3NldCgkdGhpcy0+bW9kZWxbJ3ByZWZpeCddKT8kdGhpcy0+bW9kZWxbJ3ByZWZpeCddOiIiOwoJCSRwb3N0Zml4ID0gaXNzZXQoJHRoaXMtPm1vZGVsWydwb3N0Zml4J10pPyR0aGlzLT5tb2RlbFsncG9zdGZpeCddOiIiOwoJCQoJCWlmICgkdGhpcy0+YW5pbWF0ZSAmJiBpc19udW1lcmljKCRjb250ZW50KSkKCQl7CgkJCWlmICgkdGhpcy0+Y29udGVudElzQ3VycmVuY3kgJiYgaXNzZXQoJHRoaXMtPm1vZGVsWydjdXJyZW5jeUNvZGUnXSkgJiYgTU1fQ3VycmVuY3lVdGlsOjppc1N1cHBvcnRlZEN1cnJlbmN5KCR0aGlzLT5tb2RlbFsnY3VycmVuY3lDb2RlJ10pKQoJCQl7CgkJCQkvL3dlIGtub3cgdGhlIG51bWJlciwgc28gd2UgY2FuIHVzZSBNQUdJQyB0byBzcGxpdCB0aGUgbnVtYmVyIG91dCBmcm9tIHRoZSByZXN0IG9mIHRoZSBmb3JtYXR0aW5nCgkJCQkkY3VycmVuY3lNZXRhZGF0YSA9IE1NX0N1cnJlbmN5VXRpbDo6Z2V0Q3VycmVuY3lNZXRhZGF0YSgkdGhpcy0+bW9kZWxbJ2N1cnJlbmN5Q29kZSddKTsKCQkJCSR0cyA9ICRjdXJyZW5jeU1ldGFkYXRhWydtb25fdGhvdXNhbmRzX3NlcCddOwoJCQkJJGRwID0gJGN1cnJlbmN5TWV0YWRhdGFbJ21vbl9kZWNpbWFsX3BvaW50J107CgkJCQkkZHBzID0gJGN1cnJlbmN5TWV0YWRhdGFbJ2ludF9mcmFjX2RpZ2l0cyddOwoJCQkJJHplcm8gPSAwLjAwOwoJCQkJCgkJCQkkbWV0YU92ZXJyaWRlID0gYXJyYXkoImludF9mcmFjX2RpZ2l0cyI9PigkdGhpcy0+c2hvd0N1cnJlbmN5RnJhY3Rpb25hbENvbXBvbmVudCA9PSBmYWxzZSk/MDokY3VycmVuY3lNZXRhZGF0YVsnaW50X2ZyYWNfZGlnaXRzJ10sJ3Bvc3RmaXhfaXNvJz0+JHRoaXMtPnBvc3RmaXhJc28pOwkJCQkKCQkJCSRmb3JtYXR0ZWRWYWx1ZSA9IF9tbW9mKCRjb250ZW50LCR0aGlzLT5tb2RlbFsnY3VycmVuY3lDb2RlJ10sJG1ldGFPdmVycmlkZSk7CgkJCQkKCQkJCSRjb21wb25lbnRzID0gcHJlZ19zcGxpdCgiL1swLTl7JHRzfV0rW3skZHB9XSpbMC05XSovIiwgJGZvcm1hdHRlZFZhbHVlKTsKCQkJCWlmIChpc19hcnJheSgkY29tcG9uZW50cykgJiYgKGNvdW50KCRjb21wb25lbnRzKSA9PSAyKSAmJiAoJGRwID09ICIuIikpCgkJCQl7CgkJCQkJJHByZWZpeC49ICRjb21wb25lbnRzWzBdOwoJCQkJCSRwb3N0Zml4ID0gJGNvbXBvbmVudHNbMV0uJHBvc3RmaXg7CgkJCQkJJGNvbnRlbnQgPSBudW1iZXJfZm9ybWF0KCRjb250ZW50LCRkcHMsIi4iLCIiKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJOb25BbmltYXRlZCgkY29udGVudCwkcHJlZml4LCRwb3N0Zml4KTsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkaXNGbG9hdCA9IGlzX2Zsb2F0KDArJGNvbnRlbnQpOwoJCQkJaWYgKCgkY29udGVudCA9PSAwKSAmJiAoKHN0cmluZykkY29udGVudCAhPT0gIjAuMDAiKSkKCQkJCXsKCQkJCQkkaXNGbG9hdCA9IGZhbHNlOwoJCQkJfQkJCQoJCQkJJHRzID0gIiwiOwoJCQkJJGRwcyA9ICRpc0Zsb2F0PzI6MDsKCQkJCSR6ZXJvID0gJGlzRmxvYXQ/IjAuMDAiOiIwIjsKCQkJfQoJCQkKCQkJJG91dHB1dCAuPSAieyRwcmVmaXh9PHNwYW4gY2xhc3M9J21tLXJlcG9ydC1hbmltYXRlZCcgZGF0YS1hbmltLXRhcmdldD0neyRjb250ZW50fScgZGF0YS1hbmltLXNlcD0neyR0c30nIGRhdGEtYW5pbS1kcHM9J3skZHBzfSc+eyR6ZXJvfTwvc3Bhbj57JHBvc3RmaXh9IjsKCQkJaWYgKCFlbXB0eSgkdGhpcy0+bW9kZWxbJ3VuaXRTcGVjaWZpZXInXSkpCgkJCXsKCQkJCSRjbG9zZVNwYW4gPSBmYWxzZTsKCQkJCWlmICghZW1wdHkoJHRoaXMtPm1vZGVsWyd1bml0U3BlY2lmaWVyQ2xhc3MnXSkpCgkJCQl7CgkJCQkJJG91dHB1dC49ICI8c3BhbiBjbGFzcz0neyR0aGlzLT5tb2RlbFsndW5pdFNwZWNpZmllckNsYXNzJ119Jz4iOwoJCQkJCSRjbG9zZVNwYW4gPSB0cnVlOwoJCQkJfQoJCQkJJG91dHB1dCAuPSAiIHskdGhpcy0+bW9kZWxbJ3VuaXRTcGVjaWZpZXInXX0iOwoJCQkJJG91dHB1dCAuPSAoJGNsb3NlU3Bhbik/Ijwvc3Bhbj4iOiIiOwoJCQl9CgkJCSRvdXRwdXQgLj0gIjxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0Jz5tbWpzLmFuaW1hdGUoJ3skdGhpcy0+Y29udGFpbmVyfScpOzwvc2NyaXB0PiI7CgkJCXJldHVybiAkb3V0cHV0OwoJCX0JCgkJZWxzZSAKCQl7CgkJCXJldHVybiAkdGhpcy0+cmVuZGVyTm9uQW5pbWF0ZWQoJGNvbnRlbnQsJHByZWZpeCwkcG9zdGZpeCk7CgkJfQkKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVuZGVyTm9uQW5pbWF0ZWQoJGNvbnRlbnQsICRwcmVmaXg9IiIsICRwb3N0Zml4PSIiKQoJewoJCSRvdXRwdXQgPSAieyRwcmVmaXh9eyRjb250ZW50fXskcG9zdGZpeH0iOwoJCWlmICghZW1wdHkoJHRoaXMtPm1vZGVsWyd1bml0U3BlY2lmaWVyJ10pKQoJCXsKCQkJJGNsb3NlU3BhbiA9IGZhbHNlOwoJCQlpZiAoIWVtcHR5KCR0aGlzLT5tb2RlbFsndW5pdFNwZWNpZmllckNsYXNzJ10pKQoJCQl7CgkJCQkkb3V0cHV0Lj0gIjxzcGFuIGNsYXNzPSd7JHRoaXMtPm1vZGVsWyd1bml0U3BlY2lmaWVyQ2xhc3MnXX0nPiI7CgkJCQkkY2xvc2VTcGFuID0gdHJ1ZTsKCQkJfQoJCQkkb3V0cHV0IC49ICIgeyR0aGlzLT5tb2RlbFsndW5pdFNwZWNpZmllciddfSI7CgkJCSRvdXRwdXQgLj0gKCRjbG9zZVNwYW4pPyI8L3NwYW4+IjoiIjsKCQl9CgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRBbmltYXRlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFuaW1hdGU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBbmltYXRlKCRhbmltYXRlKQoJewoJCSR0aGlzLT5hbmltYXRlID0gJGFuaW1hdGU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRTaG93Q3VycmVuY3lGcmFjdGlvbmFsQ29tcG9uZW50KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnNob3dDdXJyZW5jeUZyYWN0aW9uYWxDb21wb25lbnQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRTaG93Q3VycmVuY3lGcmFjdGlvbmFsQ29tcG9uZW50KCRzaG93Q3VycmVuY3lGcmFjdGlvbmFsQ29tcG9uZW50KQoJewoJCSR0aGlzLT5zaG93Q3VycmVuY3lGcmFjdGlvbmFsQ29tcG9uZW50ID0gJHNob3dDdXJyZW5jeUZyYWN0aW9uYWxDb21wb25lbnQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRQb3N0Zml4SXNvKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnBvc3RmaXhJc287Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRQb3N0Zml4SXNvKCRwb3N0Zml4SXNvKQoJewoJCSR0aGlzLT5wb3N0Zml4SXNvID0gJHBvc3RmaXhJc287Cgl9CgkKfQoK', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(52, 'getresponseemailserviceprovider', 'LyoqCiAqIAogKiBAYXV0aG9yIEJlbiBEYXVnaHRyeSwgTWVtYmVyTW91c2UgTExDCiAqIFRoaXMgaXMgYW4gaW1wbGVtZW50YXRpb24gb2YgdGhlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIgaW50ZXJmYWNlIGZvciBHZXRSZXNwb25zZS4gVGhlIEdldFJlc3BvbnNlIEFQSSBpcyBhIAogKiBKU09OLVJQQyBhcGkgd2hpY2ggaXMgZG9jdW1lbnRlZCBhdCBodHRwczovL2dpdGh1Yi5jb20vR2V0UmVzcG9uc2UvRGV2Wm9uZS90cmVlL21hc3Rlci9BUEkKICogQW4gQVBJIGtleSBpcyB1c2VkIGZvciBhdXRoZW50aWNhdGlvbiwgYW5kIHJlcXVlc3RzIGFyZSBzZW50IHRvIHRoZSBlbmRwb2ludCBhdCB0aGUgVVJMIGJlbG93IGluICRHRVRSRVNQT05TRV9ERUZBVUxUX1VSTAogKiBUaGUgaGlnaGVzdCBsZXZlbCBvZiBHZXRSZXNwb25zZSBhY2NvdW50IGlzIHRoZSBHZXRSZXNwb25zZTM2MCBhY2NvdW50LCBhbmQgdGhlc2UgYWNjb3VudHMgaGF2ZSBjdXN0b20gYXBpIHVybHMsIHNvIHRoaXMgcGFyYW1ldGVyIGlzCiAqIGNvbmZpZ3VyYWJsZQogKgogKi8KY2xhc3MgTU1fR2V0UmVzcG9uc2VFbWFpbFNlcnZpY2VQcm92aWRlciBleHRlbmRzIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXIgCnsKCXByaXZhdGUgJGFwaUtleTsKCXByaXZhdGUgJGFwaVVybDsKCXByaXZhdGUgJGlzMzYwID0gZmFsc2U7CgkKCS8vdGhpcyB2YXJpYWJsZSBpcyBhIHBsYWNlaG9sZGVyIGZvciB0aGUganNvbi1ycGMgY2xpZW50Cglwcml2YXRlICRjbGllbnQ7CgkKCS8vdGhlIGRlZmF1bHQgQVBJIHVybAoJcHJpdmF0ZSBzdGF0aWMgJEdFVFJFU1BPTlNFX0RFRkFVTFRfVVJMID0gImh0dHA6Ly9hcGkyLmdldHJlc3BvbnNlLmNvbSI7CgkKCQoJLyoqCgkgKgoJICogVGhlIEdldFJlc3BvbnNlIGFwaSByZXF1aXJlcyBhbiBhcGlLZXkgYW5kIGFuIGFwaVVybCBmb3IgYWNjZXNzLCBzbyB0aGVzZSBhcmUgcmVxdWlyZWQgcGFyYW1ldGVycyBmb3IgCgkgKiB0aGUgY29uc3RydWN0b3IKCSAqIAoJICogQHBhcmFtIE9iamVjdCAkcHJvdmlkZXJfaW5mbyBPcHRpb25zIG9iamVjdAoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pCgl7CgkJJGFkZGl0aW9uYWxfZGF0YSA9IChpc19vYmplY3QoJHByb3ZpZGVyX2luZm8pICYmIGlzc2V0KCRwcm92aWRlcl9pbmZvLT5hZGRpdGlvbmFsX2RhdGEpKT91bnNlcmlhbGl6ZSgkcHJvdmlkZXJfaW5mby0+YWRkaXRpb25hbF9kYXRhKTphcnJheSgpOwoJCWlmICghZW1wdHkoJHByb3ZpZGVyX2luZm8tPmFwaV9rZXkpKQoJCXsKCQkJcGFyZW50OjpfX2NvbnN0cnVjdCgkcHJvdmlkZXJfaW5mbyk7CgkJCQoJCQkkdGhpcy0+YXBpS2V5ID0gJHByb3ZpZGVyX2luZm8tPmFwaV9rZXk7CgkJCSR0aGlzLT5pczM2MCA9IGlzc2V0KCRhZGRpdGlvbmFsX2RhdGFbJ2lzMzYwJ10pPyhib29sKSRhZGRpdGlvbmFsX2RhdGFbJ2lzMzYwJ106ZmFsc2U7CgkJCSR0aGlzLT5hcGlVcmwgPSBpc3NldCgkYWRkaXRpb25hbF9kYXRhWydhcGlVcmwnXSk/JGFkZGl0aW9uYWxfZGF0YVsnYXBpVXJsJ106TU1fR2V0UmVzcG9uc2VFbWFpbFNlcnZpY2VQcm92aWRlcjo6JEdFVFJFU1BPTlNFX0RFRkFVTFRfVVJMOwoJCQkKCQkJJHRoaXMtPmNsaWVudCA9IG5ldyBNTV9qc29uUlBDQ2xpZW50KCR0aGlzLT5hcGlVcmwpOwoJCX0KCX0KCQoJCgkvKioKCSAqIEFkZHMgYSBtZW1iZXIgdG8gYSBsaXN0IGFuZCBzeW5jcyBjdXN0b20gZmllbGQgZGF0YSB3aXRoIGZpcnN0IG5hbWUsIGxhc3QgbmFtZSwgYW5kIHByb2R1Y3QgYnVuZGxlIHN0YXR1cwoJICogCgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmFkZE1lbWJlclRvTGlzdCgpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyB0byBhZGQgdG8gdGhlIGxpc3QKCSAqIEBwYXJhbSAkbGlzdElkIFN0cmluZyBUaGUgaWQgb2YgdGhlIGxpc3QKCSAqIEBwYXJhbSAkaW5jbHVkZUJ1bmRsZUluZm8gaW5kaWNhdGVzIGlmIGJ1bmRsZSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcGFzc2VkCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBhZGRNZW1iZXJUb0xpc3QoJGVtYWlsLCRsaXN0SWQsJGluY2x1ZGVCdW5kbGVJbmZvPXRydWUpIAoJewoJCWlmIChlbXB0eSgkbGlzdElkKSkKCQl7CgkJCS8vbm8gbGlzdCBzdXBwbGllZCwgbm90aGluZyB0byBkby4uLiByZXR1cm4gc3VjY2VzcwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCSRtZW1iZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkZW1haWwpOwoJCQoJCWlmICghJG1lbWJlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgbWVtYmVyIHdpdGggZW1haWwgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkY3VzdG9tc19yZXNwb25zZSA9ICR0aGlzLT5nZXRNZW1iZXJDdXN0b21GaWVsZHMoJGVtYWlsLCB0cnVlLCAkaW5jbHVkZUJ1bmRsZUluZm8pOwoJCWlmICgkY3VzdG9tc19yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKSAKCQl7CgkJCXJldHVybiAkY3VzdG9tc19yZXNwb25zZTsKCQl9CgkJCgkJdHJ5CgkJewoJCQkkcGFyYW1zID0gYXJyYXkoKTsKCQkJJHBhcmFtc1snY2FtcGFpZ24nXSA9ICRsaXN0SWQ7CgkJCSRwYXJhbXNbJ25hbWUnXSA9ICRtZW1iZXItPmdldEZ1bGxOYW1lKCk7CgkJCSRwYXJhbXNbJ2VtYWlsJ10gPSAkZW1haWw7CgkJCSRwYXJhbXNbJ2N5Y2xlX2RheSddID0gMDsKCQkJJHBhcmFtc1snaXAnXSA9IE1NX1V0aWxzOjpnZXRDbGllbnRJUEFkZHJlc3MoKTsKCQkJJHBhcmFtc1snY3VzdG9tcyddID0gJGN1c3RvbXNfcmVzcG9uc2UtPm1lc3NhZ2U7CgkJCSRyZXNwb25zZSA9ICR0aGlzLT5jbGllbnQtPmFkZF9jb250YWN0KCR0aGlzLT5nZXRBcGlLZXkoKSwkcGFyYW1zKTsKCQkJaWYgKCFpc19hcnJheSgkcmVzcG9uc2UpIHx8ICghaXNzZXQoJHJlc3BvbnNlWydxdWV1ZWQnXSkpIHx8ICgkcmVzcG9uc2VbJ3F1ZXVlZCddICE9IDEpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBhZGRpbmcgeyRlbWFpbH0gdG8gbGlzdDogeyRyZXNwb25zZX0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBhZGRpbmcgeyRlbWFpbH0gdG8gbGlzdCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0JCgkKCQoJLyoqCgkgKgoJICogR2V0cyB0aGUgY3VzdG9tIGZpZWxkcyB0byBhc3NvY2lhdGUgd2l0aCBhIG1lbWJlci4gQ3VycmVudGx5IHRoaXMgaXMgZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCBlbWFpbCwgYW5kIGFueSBhY2Nlc3MgdGFncwoJICogR2V0UmVzcG9uc2UgaXMgbW9yZSBmbGV4aWJsZSB0aGFuIHRoZSBvdGhlciBwcm92aWRlcnMsIHNvIHRoaXMgY2FuIGJlIGV4cGFuZGVkIGluIHRoZSBmdXR1cmUsIGF0IHRoZSBjb250YWN0IGxldmVsCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJGVtYWlsIFRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSBtZW1iZXIKCSAqIEBwYXJhbSBib29sZWFuICRzdHJ1Y3R1cmVkIChvcHRpb25hbCkgRGV0ZXJtaW5lcyB3aGV0aGVyIG9yIG5vdCB0byBzdHJ1Y3R1cmUgdGhlIGZpZWxkcyBpbiB0aGUgY3VzdG9tIGZpZWxkcyBmb3JtYXQgcmVxdWlyZWQgYnkgR2V0UmVzcG9uc2UKCSAqIEBwYXJhbSAkaW5jbHVkZUJ1bmRsZUluZm8gaW5kaWNhdGVzIGlmIGJ1bmRsZSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcGFzc2VkCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgbWVyZ2UgZGF0YSBhcyBrZXktdmFsdWUgcGFpcnMgb24gc3VjY2VzcywgTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgZXJyb3Igc3RhdGUgb3RoZXJ3aXNlCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0TWVtYmVyQ3VzdG9tRmllbGRzKCRlbWFpbCwkc3RydWN0dXJlZD10cnVlLCRpbmNsdWRlQnVuZGxlSW5mbz10cnVlKQoJewoJCSR1c2VyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGVtYWlsKTsKCQkKCQlpZiAoISR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIHVzZXIgaW5mb3JtYXRpb24gZm9yIHskZW1haWx9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkKCQkkY3VzdG9tcyA9IGFycmF5KCk7CgkJJGZpcnN0TmFtZSA9ICR1c2VyLT5nZXRGaXJzdE5hbWUoKTsKCQkkbGFzdE5hbWUgPSAkdXNlci0+Z2V0TGFzdE5hbWUoKTsKCQkKCQlpZighZW1wdHkoJGZpcnN0TmFtZSkpCgkJewoJCQkkY3VzdG9tc1snZmlyc3RfbmFtZSddID0gJGZpcnN0TmFtZTsKCQl9CgkJCgkJaWYoIWVtcHR5KCRsYXN0TmFtZSkpCgkJewoJCQkkY3VzdG9tc1snbGFzdF9uYW1lJ10gPSAkbGFzdE5hbWU7CgkJfQoJCQoJCWlmKCRpbmNsdWRlQnVuZGxlSW5mbykKCQl7CgkJCS8vc2V0IGFsbCBhY2Nlc3MgdGFncyBmYWxzZSB0byBzdGFydAoJCQlmb3JlYWNoIChNTV9CdW5kbGU6OmdldEJ1bmRsZVNob3J0TmFtZXMoKSBhcyAkcmVxVGFnPT4kcmVxTmFtZSkKCQkJewoJCQkJJHJlcVRhZyA9IHN0cnRvdXBwZXIoJHJlcVRhZyk7CgkJCQkkY3VzdG9tc1skcmVxVGFnXSA9ICJGQUxTRSI7CgkJCX0KCQkKCQkJLy9ub3cgc2V0IHRoZSBvbmVzIHRoZSB1c2VyIGhhcyBlcXVhbCB0byB0cnVlCgkJCSRhcHBsaWVkQnVuZGxlcyA9ICR1c2VyLT5nZXRBcHBsaWVkQnVuZGxlcygpOwoJCQkKCQkJZm9yZWFjaCAoJGFwcGxpZWRCdW5kbGVzIGFzICRhcHBsaWVkQnVuZGxlKQoJCQl7CgkJCQkkYnVuZGxlID0gJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZSgpOwoJCQkJCQoJCQkJaWYoJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRzaG9ydE5hbWUgPSBzdHJ0b3VwcGVyKCRidW5kbGUtPmdldFNob3J0TmFtZSgpKTsKCQkJCQkkY3VzdG9tc1skc2hvcnROYW1lXSA9ICJUUlVFIjsKCQkJCX0KCQkJfQoJCX0KCQkKCQlpZiAoJHN0cnVjdHVyZWQpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCR0aGlzLT50cmFuc2Zvcm1DdXN0b21GaWVsZFN0cnVjdHVyZSgkY3VzdG9tcykpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRjdXN0b21zKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBSZWZvcm1hdHMgYSBrZXkvdmFsdWUgYXJyYXkgaW50byB0aGUgbmVzdGVkIGFycmF5IHN0cnVjdHVyZSB1c2VkIGJ5IEdldFJlc3BvbnNlIGZvciBjdXN0b20gZmllbGRzCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkY3VzdG9tcyBBIGtleS92YWx1ZSBhcnJheSBvZiB0aGUgY3VzdG9tIGZpZWxkIGRhdGEKCSAqIEByZXR1cm4gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgbmVzdGVkIGFycmF5cyBpbiBhIGZvcm1hdCBhY2NlcHRhYmxlIGZvciB0cmFuc2l0IHRvIEdldFJlc3BvbnNlCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gdHJhbnNmb3JtQ3VzdG9tRmllbGRTdHJ1Y3R1cmUoJGN1c3RvbXMpCgl7CgkJJHN0cnVjdHVyZWRBcnJheSA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJGN1c3RvbXMgYXMgJGs9PiR2KQoJCXsKCQkJJHN0cnVjdHVyZWRBcnJheVtdID0gYXJyYXkoIm5hbWUiPT4kaywiY29udGVudCI9PiR2KTsKCQl9CgkJcmV0dXJuICRzdHJ1Y3R1cmVkQXJyYXk7Cgl9CQoJCgkKCS8qKgoJICogQ2hhbmdlcyBhIG1lbWJlcnMgbGlzdCBzdWJzY3JpcHRpb24gYmFzZWQgb24gYSBjaGFuZ2UgaW4gbWVtYmVyc2hpcCBsZXZlbC4gCgkgKiBHZXRSZXNwb25zZSBhbGxvd3MgYSBvbmUtb3BlcmF0aW9uIG1vdmUKCSAqIAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIG1lbWJlciB0byBiZSB1cGRhdGVkCgkgKiBAcGFyYW0gJG5ld01lbWJlclR5cGUgaW50IFRoZSBtZW1iZXIgdHlwZSBpZCBvZiB0aGUgbWVtYmVyJ3MgbmV3IG1lbWJlciB0eXBlCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoJGVtYWlsLCRuZXdNZW1iZXJUeXBlKSAKCXsKCQkvL3N0ZXAgMTogZ2V0IHRoZSBtZW1iZXIncyBjdXJyZW50IGluZm9ybWF0aW9uCgkJJG1lbWJlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRlbWFpbCk7CgkJCgkJaWYgKCEkbWVtYmVyLT5pc1ZhbGlkKCkpIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgbWVtYmVyIHdpdGggZW1haWwgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL3N0ZXAgMjogZGVhbCB3aXRoIHRoZSAzIHBvc3NpYmxlIHNjZW5hcmlvcyAtIAoJCS8vYS4gdGhlIG1lbWJlciBpcyBub3QgY3VycmVudGx5IHN1YnNjcmliZWQgdG8gYSBsaXN0LCBidXQgdGhlIG5ldyBtZW1iZXJ0eXBlIGhhcyBhIGxpc3QgCgkJLy9iLiB0aGUgbWVtYmVyIGlzIHN1YnNjcmliZWQgdG8gYSBsaXN0LCBidXQgdGhlIG5ldyBtZW1iZXIgdHlwZSBkb2VzIE5PVCBoYXZlIGEgbGlzdAoJCS8vYy4gdGhlIG1lbWJlciBpcyBzdWJzY3JpYmVkIHRvIGEgbGlzdCwgYW5kIHRoZWlyIG5ldyBtZW1iZXIgdHlwZSBoYXMgYSBkaWZmZXJlbnQgbGlzdAoJCS8vZC4gdGhlIGxpc3QgZm9yIHRoZSBvbGQgYW5kIG5ldyBtZW1iZXIgdHlwZXMgYXJlIHRoZSBzYW1lLCBpbiB3aGljaCB1cGRhdGUgYW5kIHJldHVybiB0cnVlCgkJCgkJLy9nZXQgdGhlIG9sZCBsaXN0CgkJJG9sZExpc3RJZCA9ICRtZW1iZXItPmdldFN1YnNjcmliZWRMaXN0SWQoKTsKCQkKCQkvL2dldCB0aGUgbmV3IGxpc3QKCQkkbmV3TGlzdElkID0gKGVtcHR5KCRuZXdNZW1iZXJUeXBlKSk/JHRoaXMtPmdldExpc3RJZEZvck1lbWJlcigkZW1haWwpOiR0aGlzLT5nZXRMaXN0SWRGb3JNZW1iZXJzaGlwTGV2ZWwoJG5ld01lbWJlclR5cGUpOwoJCWlmICgkbmV3TGlzdElkLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRuZXdMaXN0SWQtPm1lc3NhZ2UsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRuZXdMaXN0SWQgPSAkbmV3TGlzdElkLT5tZXNzYWdlOwoJCQoJCWlmIChlbXB0eSgkb2xkTGlzdElkKSkKCQl7CgkJCS8vdGhlIG1lbWJlciB3YXMgcHJldmlvdXNseSBub3Qgc3Vic2NyaWJlZCB0byBhIGxpc3QsIHNvIHRoaXMgaXMgYSBzaW1wbGUgYWRkIG9wZXJhdGlvbiAtIGZ1bGZpbGxzIGNvbmRpdGlvbiBhLgoJCQlyZXR1cm4gJHRoaXMtPmFkZE1lbWJlclRvTGlzdCgkZW1haWwsICRuZXdMaXN0SWQpOwoJCX0KCQkKCQlpZiAoZW1wdHkoJG5ld0xpc3RJZCkpCgkJewoJCQkvL3RoZXJlIGlzIGFuIG9sZExpc3RJZCwgYnV0IG5vdCBhIGRlc3RpbmF0aW9uIChuZXdMaXN0SWQpLCB3aGljaCBtZWFucyBpdHMgYSBzaW1wbGUgcmVtb3ZlIG9wZXJhdGlvbiAtIGZ1bGZpbGxzIGNvbmRpdGlvbiBiCgkJCXJldHVybiAkdGhpcy0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGVtYWlsLCAkb2xkTGlzdElkKTsKCQl9CgkJCgkJaWYgKCRvbGRMaXN0SWQgPT0gJG5ld0xpc3RJZCkKCQl7CgkJCS8vbGlzdCBpcyB0aGUgc2FtZSwgdXBkYXRlIG1lbWJlciBhbmQgcmV0dXJuIC0gY29uZGl0aW9uIGQuCgkJCXJldHVybiAkdGhpcy0+dXBkYXRlTWVtYmVyKCRlbWFpbCwgJG9sZExpc3RJZCk7CgkJfQoJCQoJCSRvbGRMaXN0RXhpc3RzID0gdHJ1ZTsKCQkkbmV3TGlzdEV4aXN0cyA9IHRydWU7CgkJCgkJdHJ5IAoJCXsKCQkJLy9yZXRyaWV2ZSB0aGUgbGlzdHMKCQkJJGxpc3RzUmVzcG9uc2UgPSAkdGhpcy0+Z2V0TGlzdHMoKTsKCQkJaWYgKCRsaXN0c1Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJCXsKCQkJCS8vZXJyb3IgcmV0cmlldmluZyB0aGUgY2FtcGFpZ25zIChhIGJhc2ljIG9wKS4uIHNvbWV0aGluZyBpcyB3cm9uZywgc28gcmVwb3J0IGl0CgkJCQlyZXR1cm4gJGxpc3RzUmVzcG9uc2U7CgkJCX0KCQkJLy9ub3cgdGVzdCB0byBtYWtlIHN1cmUgdGhlIGxpc3RzIHN0aWxsIGV4aXN0CgkJCSRsaXN0cyA9ICRsaXN0c1Jlc3BvbnNlLT5tZXNzYWdlOwoJCQlpZiAoIWFycmF5X2tleV9leGlzdHMoJG9sZExpc3RJZCwgJGxpc3RzKSkKCQkJewoJCQkJJG9sZExpc3RFeGlzdHMgPSBmYWxzZTsKCQkJfQoJCQkKCQkJaWYgKCFhcnJheV9rZXlfZXhpc3RzKCRuZXdMaXN0SWQsICRsaXN0cykpCgkJCXsKCQkJCSRuZXdMaXN0RXhpc3RzID0gZmFsc2U7CgkJCX0KCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGUtPmdldE1lc3NhZ2UoKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJCgkJaWYgKCEkb2xkTGlzdEV4aXN0cyAmJiAkbmV3TGlzdEV4aXN0cykKCQl7CgkJCXJldHVybiAkdGhpcy0+YWRkTWVtYmVyVG9MaXN0KCRlbWFpbCwgJG5ld0xpc3RJZCk7ICAvL3NvdXJjZSBsaXN0IHdhcyBbcHJvYmFibHldIGRlbGV0ZWQsIG1ha2luZyB0aGlzIGNvbmRpdGlvbiBhCgkJfQoJCQoJCWlmICgkb2xkTGlzdEV4aXN0cyAmJiAhJG5ld0xpc3RFeGlzdHMpCgkJewoJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZU1lbWJlckZyb21MaXN0KCRlbWFpbCwgJG9sZExpc3RJZCk7IC8vZGVzdGluYXRpb24gbGlzdCB3YXMgW3Byb2JhYmx5XSBkZWxldGVkIG1ha2luZyB0aGlzIGNvbmRpdGlvbiBiCgkJfQoJCQoJCXRyeSAKCQl7CgkJCS8vaWYgZXhlY3V0aW9uIHJlYWNoZXMgaGVyZSwgdGhlcmUgaXMgYSBvbGRMaXN0SWQgYW5kIGEgbmV3TGlzdElkLCBzbyBmaW5kIChhbmQgdXBkYXRlKSB0aGUgY29udGFjdCBhbmQgcHJvY2VzcyB0aGUgbW92ZSAtIGZ1bGZpbGxzIGNvbmRpdGlvbiBjLgoJCQkkY29udGFjdElkX3Jlc3BvbnNlID0gJHRoaXMtPmdldENvbnRhY3RJZCgkZW1haWwsICRvbGRMaXN0SWQpOwoJCQlpZiAoJGNvbnRhY3RJZF9yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCQl7CgkJCQlyZXR1cm4gJGNvbnRhY3RJZF9yZXNwb25zZTsgLy9lcnJvciByZXRyaWV2aW5nIHRoZSBjb250YWN0IGlkCgkJCX0KCQkJJGNvbnRhY3RJZCA9ICRjb250YWN0SWRfcmVzcG9uc2UtPm1lc3NhZ2U7IC8vYW4gYXJyYXkKCQkJaWYgKGVtcHR5KCRjb250YWN0SWQpKQoJCQl7CgkJCQkvL2NvbnRhY3Qgd2FzIG5vdCBmb3VuZCBvbiB0aGUgb2xkIGxpc3QsIHRyeSBpdCBhcyBhIHNpbXBsZSBhZGQKCQkJCXJldHVybiAkdGhpcy0+YWRkTWVtYmVyVG9MaXN0KCRlbWFpbCwgJG5ld0xpc3RJZCk7CgkJCX0KCQkJCgkJCSR0aGlzLT51cGRhdGVNZW1iZXJXaXRoQ29udGFjdElkKCRjb250YWN0SWQsJGVtYWlsKTsgLy9zeW5jIGFueSBjdXN0b20gZmllbGQgY2hhbmdlcwoJCQkKCQkJLy9wZXJmb3JtIHRoZSBtb3ZlCgkJCSRwYXJhbXMgPSBhcnJheSgpOwoJCQkkcGFyYW1zWydjb250YWN0J10gPSAkY29udGFjdElkOwoJCQkkcGFyYW1zWydjYW1wYWlnbiddID0gJG5ld0xpc3RJZDsKCQkJJHJlc3BvbnNlID0gJHRoaXMtPmNsaWVudC0+bW92ZV9jb250YWN0KCR0aGlzLT5nZXRBcGlLZXkoKSwkcGFyYW1zKTsKCQkJaWYgKGlzX2FycmF5KCRyZXNwb25zZSkgJiYgKCRyZXNwb25zZVsndXBkYXRlZCddID09IDEpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ2hhbmdlIGxpc3Qgb3BlcmF0aW9uIHNlbnQgdG8gR2V0UmVzcG9uc2UsIGJ1dCB0aGUgcmVtb3RlIHNpZGUgZGlkIG5vdCByZXR1cm4gdGhlIGV4cGVjdGVkIHJlc3BvbnNlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZS0+Z2V0TWVzc2FnZSgpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIENvbmZpZ3VyZXMgdGhlIEdldFJlc3BvbnNlIHByb3ZpZGVyIGluIG9yZGVyIHRvIGRvIHRoZSBpbml0aWFsIGNvbm5lY3QKCSAqIAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpjb25maWd1cmVGcm9tT3B0aW9ucygpCgkgKiBAcGFyYW0gQW4gYXJyYXkgY29udGFpbmluZyB0aGUgdmFsdWVzIHBvc3RlZCBmcm9tIHRoZSBmb3JtIHJlbmRlcmVkIGJ5IHJlbmRlck9wdGlvbnNEaWFsb2cKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbmZpZ3VyZUZyb21PcHRpb25zKCRvcHRpb25EYXRhKSAKCXsKCQlpZiAoaXNzZXQoJG9wdGlvbkRhdGFbJ2dldHJlc3BvbnNlX2FwaV9rZXknXSkgJiYgIWVtcHR5KCRvcHRpb25EYXRhWydnZXRyZXNwb25zZV9hcGlfa2V5J10pKSAKCQl7CgkJCSR0aGlzLT5zZXRBUElLZXkoJG9wdGlvbkRhdGFbJ2dldHJlc3BvbnNlX2FwaV9rZXknXSk7CgkJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnaXMzNjAnXSkgJiYgKChib29sKSRvcHRpb25EYXRhKSkKCQkJewoJCQkJJHRoaXMtPnNldEdldFJlc3BvbnNlMzYwKHRydWUpOwoJCQkJJHRoaXMtPnNldEFwaVVybCgkb3B0aW9uRGF0YVsnY3VzdG9tX2FwaV91cmwnXSk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdGhpcy0+c2V0R2V0UmVzcG9uc2UzNjAoZmFsc2UpOwoJCQkJJHRoaXMtPnNldEFwaVVybChNTV9HZXRSZXNwb25zZUVtYWlsU2VydmljZVByb3ZpZGVyOjokR0VUUkVTUE9OU0VfREVGQVVMVF9VUkwpOwoJCQl9CgkJCSR0aGlzLT5jbGllbnQgPSBuZXcgTU1fanNvblJQQ0NsaWVudCgkdGhpcy0+Z2V0QXBpVXJsKCkpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlBsZWFzZSBlbnRlciBhIHZhbGlkIEFQSSBrZXkgdG8gdXNlIEdldFJlc3BvbnNlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgl9CgkKCQoJLyoqCgkgKgoJICogUmV0dXJuIHRoZSBsaXN0cyAoY2FtcGFpZ25zKSBhc3NvY2lhdGVkIHdpdGggdGhlIGNvbmZpZ3VyZWQgYXBpS2V5LCBpbiBhbiBhcnJheSBrZXllZCBieSBpZCB3aXRoIHRoZSB2YWx1ZXMgYmVpbmcgbGlzdCBuYW1lcwoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIGxpc3RzIGFzIHRoZSBtZXNzYWdlIG9uIHN1Y2Nlc3MsIGFuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGVycm9yIHN0YXRlIG90aGVyd2lzZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGlzdHMoKSAKCXsKCQl0cnkgCgkJewoJCQkkbGlzdF9hcnJheSA9ICR0aGlzLT5jbGllbnQtPmdldF9jYW1wYWlnbnMoJHRoaXMtPmdldEFwaUtleSgpKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZXJlIHdhcyBhbiBlcnJvciBjb25uZWN0aW5nIHRvIEdldFJlc3BvbnNlLiBQbGVhc2UgY2hlY2sgeW91ciBjb25maWd1cmF0aW9uIHNldHRpbmdzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGxpc3RfYXJyYXkgPSAoaXNfYXJyYXkoJGxpc3RfYXJyYXkpKT8kbGlzdF9hcnJheTphcnJheSgpOwoJCSRsaXN0cyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJGxpc3RfYXJyYXkgYXMgJGNhbXBhaWduX2lkPT4kY2FtcGFpZ25fZGF0YSkKCQl7CgkJCSRjYW1wYWlnbl9uYW1lID0gKGlzc2V0KCRjYW1wYWlnbl9kYXRhWyduYW1lJ10pKT8kY2FtcGFpZ25fZGF0YVsnbmFtZSddOiRjYW1wYWlnbl9pZDsKCQkJJGxpc3RzWyRjYW1wYWlnbl9pZF0gPSAkY2FtcGFpZ25fbmFtZTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkbGlzdHMsTU1fUmVzcG9uc2U6OiRTVUNDRVNTKTsKCX0JCgkKCQoJLyoqCgkgKiBSZXNwb25kcyB0byBkYXRhIGNvbGxlY3RlZCBmcm9tIHRoZSBmb3JtIHJlbmRlcmVkIGJ5IHJlbmRlck9wdGlvbnNEaWFsb2cKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6aGFuZGxlT3B0aW9uc0RpYWxvZygpCgkgKiBAcGFyYW0gJG9wdGlvbkRhdGEgQXJyYXkgY29udGFpbmluZyB0aGUgcG9zdGVkIHZhbHVlcwoJICogQHJldHVybiBNTV9SZXNwb25zZSBvYmplY3QgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGhhbmRsZU9wdGlvbnNEaWFsb2coJG9wdGlvbkRhdGEpIAoJewoJCWlmIChpc19hcnJheSgkb3B0aW9uRGF0YSkgJiYgKGlzc2V0KCRvcHRpb25EYXRhWydnZXRyZXNwb25zZV9hcGlfa2V5J10pKSAmJiAhZW1wdHkoJG9wdGlvbkRhdGFbJ2dldHJlc3BvbnNlX2FwaV9rZXknXSkpCgkJewoJCQkvL21ha2Ugc3VyZSB0aGVyZSBpcyBhIGN1c3RvbSBhcGkgdXJsIGlmIHRoZXkgc2VsZWN0ZWQgdGhhdCB0aGlzIGlzIGEgZ2V0cmVzcG9uc2UzNjAgYWNjb3VudAoJCQlpZiAoaXNzZXQoJG9wdGlvbkRhdGFbJ2lzMzYwJ10pICYmICgkb3B0aW9uRGF0YVsnaXMzNjAnXSA9PSB0cnVlKSAmJiAoIWlzc2V0KCRvcHRpb25EYXRhWydjdXN0b21fYXBpX3VybCddKSB8fCBlbXB0eSgkb3B0aW9uRGF0YVsnY3VzdG9tX2FwaV91cmwnXSkpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvcjogTm8gY3VzdG9tIHVybCBzdXBwbGllZC4gRm9yIEdldFJlc3BvbnNlMzYwIGFjY291bnRzLCBhIGN1c3RvbSBBUEkgdXJsIGlzIHJlcXVpcmVkLiBUaGlzIGNhbiBiZSBvYnRhaW5lZCBmcm9tIHlvdXIgR2V0UmVzcG9uc2UgYWNjb3VudCBtYW5hZ2VyIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJJHByb3ZpZGVyX3Rva2VuID0gJG9wdGlvbkRhdGFbJ3Byb3ZpZGVyX3Rva2VuJ107CgkJCSRhcGlfa2V5ID0gJG9wdGlvbkRhdGFbJ2dldHJlc3BvbnNlX2FwaV9rZXknXTsKCQkJJHByb3NwZWN0X2xpc3RfaWQgPSAkb3B0aW9uRGF0YVsncHJvc3BlY3RfbGlzdF9pZCddOwoJCQkkY2FuY2VsbGF0aW9uX2xpc3RfaWQgPSAkb3B0aW9uRGF0YVsnY2FuY2VsbGF0aW9uX2xpc3RfaWQnXTsKCQkJCQoJCQkkdGhpcy0+c2V0QVBJS2V5KCRhcGlfa2V5KTsKCQkJaWYgKGlzc2V0KCRvcHRpb25EYXRhWydpczM2MCddKSkKCQkJewoJCQkJJHRoaXMtPnNldEdldFJlc3BvbnNlMzYwKCRvcHRpb25EYXRhWydpczM2MCddKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSR0aGlzLT5zZXRHZXRSZXNwb25zZTM2MChmYWxzZSk7CgkJCX0KCQkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkcHJvdmlkZXJfdG9rZW4pOwoJCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCS8vZmlyc3Qgd3JpdGUgdGhlIHByb3ZpZGVyJ3MgY29uZmlndXJhdGlvbiBvcHRpb25zCgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRBUElLZXkoJGFwaV9rZXkpOwoJCQkJaWYgKCR0aGlzLT5pc0dldFJlc3BvbnNlMzYwKCkpCgkJCQl7CgkJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJpczM2MCIsIHRydWUpOwoJCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldENvbmZpZ09wdGlvbigiYXBpVXJsIiwgJG9wdGlvbkRhdGFbJ2N1c3RvbV9hcGlfdXJsJ10pOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldENvbmZpZ09wdGlvbigiaXMzNjAiLCBmYWxzZSk7CgkJCQl9CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRBY3RpdmUodHJ1ZSk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRQcm9zcGVjdExpc3RJRCgkcHJvc3BlY3RfbGlzdF9pZCk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRDYW5jZWxsYXRpb25MaXN0SUQoJGNhbmNlbGxhdGlvbl9saXN0X2lkKTsKCQkJCSRjb21taXRfcmVzcG9uc2UgPSAkcHJvdmlkZXJfZW50aXR5LT5jb21taXREYXRhKCk7CgkJCQlpZiAoJGNvbW1pdF9yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCQkJewoJCQkJCS8vcGFzcyB0aHJvdWdoIGVycm9ycyBjb21taXR0aW5nIHRvIHRoZSBkYXRhYmFzZQoJCQkJCXJldHVybiAkY29tbWl0X3Jlc3BvbnNlOwoJCQkJfQoJCQkJLy9ub3cgd3JpdGUgdGhlIGxpc3QgbWFwcGluZ3MKCQkJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnbWVtYmVyX3R5cGVfbWFwcGluZ3MnXSkgJiYgaXNfYXJyYXkoJG9wdGlvbkRhdGFbJ21lbWJlcl90eXBlX21hcHBpbmdzJ10pKQoJCQkJewoJCQkJCSRwcm92aWRlcl9pZCA9ICRwcm92aWRlcl9lbnRpdHktPmdldElkKCk7CgkJCQkJcmV0dXJuICR0aGlzLT5wZXJzaXN0TGlzdE1hcHBpbmdzKCRwcm92aWRlcl9pZCwkb3B0aW9uRGF0YVsnbWVtYmVyX3R5cGVfbWFwcGluZ3MnXSk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkvL2ZhaWxlZCB0byBsb2FkIGVudGl0eSBmcm9tIHRhYmxlCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJLy9vcHRpb25EYXRhIGlzIG5vdCBhbiBhcnJheSwgb3IgdGhlIGFwaSBrZXkgd2FzIG5vdCBzZW50CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byBzYXZlIHNldHRpbmdzOiBJbmNvcnJlY3Qgb3B0aW9ucyBmb3JtYXQgb3IgQVBJIEtleSBub3Qgc2VudCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJICogUmVtb3ZlcyBhIG1lbWJlciBmcm9tIGEgbGlzdAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpyZW1vdmVNZW1iZXJGcm9tTGlzdCgpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyB0byByZW1vdmUgZnJvbSB0aGUgbGlzdAoJICogQHBhcmFtICRsaXN0SWQgU3RyaW5nIFRoZSBpZCBvZiB0aGUgbGlzdAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGVtYWlsLCAkbGlzdElkKSAgCgl7CgkJaWYgKGVtcHR5KCRsaXN0SWQpKSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkKCQl0cnkgCgkJewoJCQkkY29udGFjdElkX3Jlc3BvbnNlID0gJHRoaXMtPmdldENvbnRhY3RJZCgkZW1haWwsICRsaXN0SWQpOwoJCQlpZiAoJGNvbnRhY3RJZF9yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCQl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCRjb250YWN0SWRfcmVzcG9uc2UtPm1lc3NhZ2UpOwoJCQl9CgkJCSRjb250YWN0SWQgPSAkY29udGFjdElkX3Jlc3BvbnNlLT5tZXNzYWdlOwoJCQlpZiAoZW1wdHkoJGNvbnRhY3RJZCkpCgkJCXsKCQkJCS8vY29udGFjdCBpcyBub3Qgb24gdGhlIGxpc3QsIHJldHVybiBzdWNjZXNzCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0KCQkJCgkJCSRwYXJhbXMgPSBhcnJheSgpOwoJCQkkcGFyYW1zWydjb250YWN0J10gPSAkY29udGFjdElkOwoJCQkkcmVzcG9uc2UgPSAkdGhpcy0+Y2xpZW50LT5kZWxldGVfY29udGFjdCgkdGhpcy0+Z2V0QXBpS2V5KCksJHBhcmFtcyk7CgkJCWlmIChpc19hcnJheSgkcmVzcG9uc2UpICYmICgkcmVzcG9uc2VbJ2RlbGV0ZWQnXSA9PSAxKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOyAvL3JlbW90ZSBzaWRlIHJldHVybmVkIGV4cGVjdGVkIHN1Y2Nlc3MgbWVzc2FnZQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiR2V0UmVzcG9uc2UgcmVtb3ZhbCByZXF1ZXN0IHNlbnQsIGJ1dCByZW1vdGUgc2lkZSBkaWQgbm90IHJldHVybiBleHBlY3RlZCBtZXNzYWdlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmVtb3ZpbmcgeyRlbWFpbH0gZnJvbSBsaXN0OiIuJGUtPmdldE1lc3NhZ2UoKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogVGFrZXMgYW4gZW1haWwgYWRkcmVzcyBhbmQgcmV0cmlldmVzIHRoZSBHZXRSZXNwb25zZSBjb250YWN0SWQgZm9yIHRoYXQgY29udGFjdC4gCgkgKiBSZXVybmQgdGhlIGZpcnN0IGlkIGlmIG11bHRpcGxlIHZhbHVlcyBhcmUgcmV0dXJuZWQgKHNob3VsZG4ndCBoYXBwZW4pLCByZXR1cm5zIGVtcHR5IHN0cmluZyBpZiBjb250YWN0IGlzIG5vdCBmb3VuZAoJICogQWxsIHJldHVybiB2YWx1ZXMgYXJlIHdyYXBwZWQgaW4gYW4gTU1fUmVzcG9uc2UKCSAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGFwaSByZXR1cm5zIGFuIGVycm9yIGNvbmRpdGlvbgoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRlbWFpbCBUaGUgZW1haWwgb2YgdGhlIGNvbnRhY3QKCSAqIEBwYXJhbSBTdHJpbmcgJGxpc3RJZCBUaGUgQ2FtcGFpZ25JZCBvZiB0aGUgY2FtcGFpZ24gdG8gc2VhcmNoIGZvciB0aGUgY29udGFjdCBpbiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgQW4gTU1fUmVzcG9uc2Ugb2JqZWN0IGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgY29udGFjdCBpZHMgaW4gdGhlIG1lc3NhZ2Ugb24gc3VjY2VzcywgdGhlIGVycm9yIGNvbmRpdGlvbiBvbiBmYWlsdXJlIAoJICovCglwcml2YXRlIGZ1bmN0aW9uIGdldENvbnRhY3RJZCgkZW1haWwsJGxpc3RJZCkKCXsKCQlpZiAoZW1wdHkoJGxpc3RJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcmV0dXJuIEdldFJlc3BvbnNlIGNvbnRhY3RJZCBmb3IgeyRlbWFpbH0gYmVjYXVzZSBubyBjYW1wYWlnbiB3YXMgc3VwcGxpZWQiKTsKCQl9CgkJCgkJdHJ5IAoJCXsKCQkJJHBhcmFtcyA9IGFycmF5KCk7CgkJCSRwYXJhbXNbJ2NhbXBhaWducyddID0gYXJyYXkoJGxpc3RJZCk7CgkJCSRwYXJhbXNbJ2VtYWlsJ10gPSBhcnJheSgiRVFVQUxTIj0+JGVtYWlsKTsKCQkJJHJlc3BvbnNlID0gJHRoaXMtPmNsaWVudC0+Z2V0X2NvbnRhY3RzKCR0aGlzLT5nZXRBcGlLZXkoKSwgJHBhcmFtcyk7CgkJCWlmIChpc19hcnJheSgkcmVzcG9uc2UpKQoJCQl7CgkJCQlpZiAoY291bnQoJHJlc3BvbnNlKSA9PSAwKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIiIpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJlc2V0KCRyZXNwb25zZSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShrZXkoJHJlc3BvbnNlKSk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIGNvbnRhY3RJZCBmb3IgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIGNvbnRhY3RJZCBmb3IgJGVtYWlsIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBVcGRhdGVzIGEgbWVtYmVycyBpbmZvcm1hdGlvbiBhdHRhY2hlZCB0byBhIHN1YnNjcmliZWQgbGlzdAoJICogCgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OnVwZGF0ZU1lbWJlcigpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgb2YgdGhlIG1lbWJlciB0byBiZSB1cGRhdGVkCgkgKiBAcGFyYW0gJGxpc3RJZCBTdHJpbmcgVGhlIGlkIG9mIHRoZSBsaXN0IHdoZXJlIHRoZSBtZW1iZXIncyBzdWJzY3JpcHRpb24gaW5mbyBzaG91bGQgYmUgdXBkYXRlZAoJICogQHBhcmFtICRuZXdFbWFpbCBTdHJpbmcgKG9wdGlvbmFsKSAtIFRoZSBtZW1iZXIncyBuZXcgZW1haWwgaW4gdGhlIGNhc2Ugd2hlcmUgdGhlIHVwZGF0ZSBpcyBhbiBlbWFpbCBhZGRyZXNzIGNoYW5nZQoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZSAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZU1lbWJlcigkZW1haWwsJGxpc3RJZCwkbmV3RW1haWw9IiIpIAoJewoJCSRjb250YWN0SWRSZXNwb25zZSA9ICR0aGlzLT5nZXRDb250YWN0SWQoJGVtYWlsLCAkbGlzdElkKTsKCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGNvbnRhY3RJZFJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkY29udGFjdElkUmVzcG9uc2U7CgkJfQoJCSRjb250YWN0SWQgPSAkY29udGFjdElkUmVzcG9uc2UtPm1lc3NhZ2U7CgkJcmV0dXJuICR0aGlzLT51cGRhdGVNZW1iZXJXaXRoQ29udGFjdElkKCRjb250YWN0SWQsICRlbWFpbCwkbmV3RW1haWwpOwoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgYWxsb3dzIGEgbWVtYmVyIHRvIGJlIHVwZGF0ZWQgYmFzZWQgb24gdGhlaXIgR2V0UmVzcG9uc2UgY29udGFjdCBpZC4gUGxhY2luZyB0aGlzIGxvZ2ljIGhlcmUgaW5zdGVhZCBvZgoJICogaW4gdXBkYXRlTWVtYmVyIGVsaW1pbmF0ZXMgdGhlIG5lZWQgdG8gbWFrZSBhIGR1cGxpY2F0ZSBjYWxsIHRvIHJldHJpZXZlIHRoZSBjb250YWN0IGlkIGlmIHlvdSBhbHJlYWR5IGhhdmUgaXQKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkY29udGFjdElkIC0gVGhlIGlkIG9mIHRoZSBjb250YWN0LCB3aGljaCBpcyB1bmlxdWUgdG8gYSBjYW1wYWlnbgoJICogQHBhcmFtIFN0cmluZyAkY3VycmVudEVtYWlsIC0gVGhlIGN1cnJlbnQgZW1haWwgYWRkcmVzcyBvZiB0aGUgY29udGFjdAoJICogQHBhcmFtIFN0cmluZyAkbmV3RW1haWwgKG9wdGlvbmFsKSAtIElmIGNoYW5naW5nIGVtYWlsIGFkZHJlc3NlcywgdGhpcyBpcyB0aGUgbmV3IGVtYWlsCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gdXBkYXRlTWVtYmVyV2l0aENvbnRhY3RJZCgkY29udGFjdElkLCAkY3VycmVudEVtYWlsLCAkbmV3RW1haWw9IiIpCgl7CgkJdHJ5CgkJewoJCQlpZihlbXB0eSgkY29udGFjdElkKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ29udGFjdCBJRCBpcyByZXF1aXJlZCB3aGlsZSBhdHRlbXB0aW5nIHRvIHVwZGF0ZSBpbmZvcm1hdGlvbiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCS8vZ2V0IHRoZSBvbGQgY29udGFjdCBpbmZvCgkJCSRwYXJhbXMgPSBhcnJheSgpOwoJCQkkcGFyYW1zWydjb250YWN0J10gPSAkY29udGFjdElkOwoJCQkkb2xkQ29udGFjdCA9ICR0aGlzLT5jbGllbnQtPmdldF9jb250YWN0KCR0aGlzLT5nZXRBcGlLZXkoKSwkcGFyYW1zKTsKCQkJaWYgKCFpc19hcnJheSgkb2xkQ29udGFjdCkgfHwgIWFycmF5X2tleV9leGlzdHMoJGNvbnRhY3RJZCwgJG9sZENvbnRhY3QpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gbG9jYXRlIGV4aXN0aW5nIEdldFJlc3BvbnNlIGNvbnRhY3QgeyRjb250YWN0SUR9IHdoaWxlIGF0dGVtcHRpbmcgdG8gdXBkYXRlIGluZm9ybWF0aW9uIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJJG1lcmdlUmVzcG9uc2UgPSAkdGhpcy0+Z2V0TWVtYmVyQ3VzdG9tRmllbGRzKCRjdXJyZW50RW1haWwsZmFsc2UpOwoJCQlpZiAoJG1lcmdlUmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQkJewoJCQkJLy9jYW4ndCByZXRyaWV2ZSBkYXRhIHRvIHVwZGF0ZSB3aXRoIGZyb20gTWVtYmVyTW91c2UgZm9yIHNvbWUgcmVhc29uCgkJCQlyZXR1cm4gJG1lcmdlUmVzcG9uc2U7CgkJCX0KCQkJCgkJCWlmICgkbmV3RW1haWwgIT0gIiIpCgkJCXsKCQkJCS8vZ2V0IHRoZSBjb250YWN0IGN1c3RvbSBmaWVsZHMKCQkJCSRvbGRDdXN0b21GaWVsZHMgPSAkdGhpcy0+Z2V0X2NvbnRhY3RfY3VzdG9tcygkdGhpcy0+Z2V0QXBpS2V5KCksJHBhcmFtcyk7CgkJCQlpZiAoIWlzX2FycmF5KCRvbGRDdXN0b21GaWVsZHMpKQoJCQkJewoJCQkJCSRvbGRDdXN0b21GaWVsZHMgPSBhcnJheSgpOwoJCQkJfQoJCQkJCgkJCQkkbWVyZ2VEYXRhID0gJG1lcmdlUmVzcG9uc2UtPm1lc3NhZ2UgKyAkb2xkQ3VzdG9tRmllbGRzOyAvL21lcmdlIHRoZSByZXRyaWV2ZWQgY3VzdG9tIGZpZWxkcyB3aXRoIHRoZSBkYXRhIGZyb20gbW0JCQkJCgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJG1lcmdlRGF0YSA9ICRtZXJnZVJlc3BvbnNlLT5tZXNzYWdlOwoJCQl9CgkJCQoJCQkkY3VzdG9tRmllbGRzID0gJHRoaXMtPnRyYW5zZm9ybUN1c3RvbUZpZWxkU3RydWN0dXJlKCRtZXJnZURhdGEpOwoJCQkKCQkJLy9UaGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB0aGF0IG5lZWQgdG8gYmUgYWRkcmVzc2VkIGhlcmU6IFVwZGF0aW5nIGEgY29udGFjdCwgYW5kIGNoYW5naW5nIGEgY29udGFjdCdzIGVtYWlsCgkJCS8vdGhlIEdldFJlc3BvbnNlIEFQSSBhZGRfY29udGFjdCBtZXRob2QgaXMgdXNlZCB0byBib3RoIGFkZCBhbmQgdXBkYXRlLiBUaGUgZGVmYXVsdCBhY3Rpb24gaXMgZm9yIEdldFJlc3BvbnNlIHRvIGF1dG9kZXRlY3QuCgkJCS8vSW4gYm90aCBjYXNlcywgdGhlIGN1cnJlbnQgZW1haWwgbmVlZHMgdG8gYmUgcGFydCBvZiBhbiBhZGRfY29udGFjdCByZXF1ZXN0CgkJCS8vdGhlcmUgaXMgbm8gbWV0aG9kIHRvIGNoYW5nZSBlbWFpbCBhZGRyZXNzIChwcmVzdW1hYmx5IGJlY2F1c2Ugb2YgdGhlIG9wdC1pbiByZXFzKSwgc28gdG8gY2hhbmdlIGVtYWlsLCB3ZQoJCQkvL2RlbGV0ZSB0aGUgb2xkIG9uZSBhZnRlciBhZGRpbmcgdGhlIG5ldyBvbmUKCQkJCgkJCXVuc2V0KCRvbGRDb250YWN0WyRjb250YWN0SWRdWydvcmlnaW4nXSk7CgkJCXVuc2V0KCRvbGRDb250YWN0WyRjb250YWN0SWRdWydjcmVhdGVkX29uJ10pOwoJCQl1bnNldCgkb2xkQ29udGFjdFskY29udGFjdElkXVsnY2hhbmdlZF9vbiddKTsKCQkJJG9sZENvbnRhY3RbJGNvbnRhY3RJZF1bJ2VtYWlsJ10gPSAoJG5ld0VtYWlsID09ICIiKT8kY3VycmVudEVtYWlsOiRuZXdFbWFpbDsKCQkJJG9sZENvbnRhY3RbJGNvbnRhY3RJZF1bJ2N1c3RvbXMnXSA9ICRjdXN0b21GaWVsZHM7CgkJCSRyZXNwb25zZSA9ICR0aGlzLT5jbGllbnQtPmFkZF9jb250YWN0KCR0aGlzLT5nZXRBcGlLZXkoKSwkb2xkQ29udGFjdFskY29udGFjdElkXSk7CgkJCQoJCQlpZiAoIWlzX2FycmF5KCRyZXNwb25zZSkgfHwgKCFpc3NldCgkcmVzcG9uc2VbJ3F1ZXVlZCddKSkgfHwgKCRyZXNwb25zZVsncXVldWVkJ10gIT0gMSkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIHskb2xkQ29udGFjdFskY29udGFjdElkXVsnZW1haWwnXX0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCWlmICgkbmV3RW1haWwgIT0gIiIpCgkJCXsKCQkJCS8vcmVtb3ZlIHRoZSBvbGQgZW1haWwKCQkJCSRkZWxldGVQYXJhbXNbJ2NvbnRhY3QnXSA9ICRjb250YWN0SWQ7CgkJCQkkcmVzcG9uc2UgPSAkdGhpcy0+Y2xpZW50LT5kZWxldGVfY29udGFjdCgkdGhpcy0+Z2V0QXBpS2V5KCksJGRlbGV0ZVBhcmFtcyk7CgkJCQlpZiAoIWlzX2FycmF5KCRyZXNwb25zZSkgfHwgKCFpc3NldCgkcmVzcG9uc2VbJ2RlbGV0ZWQnXSkpIHx8ICgkcmVzcG9uc2VbJ2RlbGV0ZWQnXSAhPSAxKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJHZXRSZXNwb25zZSByZW1vdmFsIHJlcXVlc3Qgc2VudCwgYnV0IHJlbW90ZSBzaWRlIGRpZCBub3QgcmV0dXJuIGV4cGVjdGVkIG1lc3NhZ2UiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlLT5nZXRNZXNzYWdlKCksTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJICogUmV0dXJuIGEgREhUTUwvSmF2YXNjcmlwdCBkaWFsb2cgY2FwYWJsZSBvZiBjb2xsZWN0aW5nIHRoZSBvcHRpb25zIG5lZWRlZCB0byBjb25maWd1cmUgdGhlIHByb3ZpZGVyCgkgKiBHZXRSZXNwb25zZSBoYXMgbXVsdGlwbGUgYWNjb3VudCB0eXBlcy4gVGhlIGhpZ2hlc3QgYWNjb3VudCBsZXZlbCAoR2V0UmVzcG9uc2UzNjApIHVzZXMgYSBjdXN0b20gYXBpIHVybCB0byBjb25uZWN0IHRvIHRoZSBhcGkuCgkgKiBAcmV0dXJuIFN0cmluZyB0aGUgbWFya3VwIGZvciB0aGUgb3B0aW9ucyBkaWFsb2cKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbmRlck9wdGlvbnNEaWFsb2coJHBvc3QpCgl7CgkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCR0aGlzLT5nZXRUb2tlbigpKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJCgkJJGFwaV9rZXlfdmFsdWUgID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0QVBJS2V5KCk6IiI7CgkJJGFwaV91cmxfdmFsdWUgID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0Q29uZmlnT3B0aW9uKCJhcGlVcmwiKToiIjsKCQkkaXMzNjAgPSAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKT8kcHJvdmlkZXJfZW50aXR5LT5nZXRDb25maWdPcHRpb24oImlzMzYwIik6IiI7CgkJJGdldHJlc3BvbnNlMzYwID0gKCRpczM2MCA9PSB0cnVlKT8iY2hlY2tlZCI6IiI7IC8vdGhpcyB2YXJpYWJsZSBvbmx5IGRldGVybWluZXMgd2hldGhlciB0aGUgY2hlY2tib3ggc3RhcnRzIG9mZiBhcyBjaGVja2VkCgkJJGdyMzYwX3N0eWxlID0gKGlzc2V0KCRnZXRyZXNwb25zZTM2MCkpPyJkaXNwbGF5Om5vbmU7IjoiIjsKCQkkY3VzdG9tX2FwaV91cmwgPSAoKGJvb2wpJGlzMzYwID09PSB0cnVlKT8kYXBpX3VybF92YWx1ZToiIjsKCQkKCQkkZm9ybSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckRpYWxvZygpOwoJCSRmb3JtLT5kaWFsb2cgPSA8PDxPUFRJT05TCgkJPGRpdiBpZD0ibW0tcHJvdmlkZXItY29uZmlnLW9wdGlvbnMiPgoJCQk8bGFiZWwgc3R5bGU9ImZsb2F0OmxlZnQ7IHdpZHRoOjE2ZW07Ij5BUEkgS2V5PC9sYWJlbD4KCQkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImdldHJlc3BvbnNlX2FwaV9rZXkiIGlkPSJnZXRyZXNwb25zZV9hcGlfa2V5IiBzaXplPSIzNyIgdmFsdWU9InskYXBpX2tleV92YWx1ZX0iLz48YnIvPgoJCQk8bGFiZWwgc3R5bGU9ImZsb2F0OmxlZnQ7IHdpZHRoOjE2ZW07Ij5HZXRSZXNwb25zZTM2MCBBY2NvdW50PC9sYWJlbD4KCQkJPGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJpczM2MCIgdmFsdWU9InRydWUiIHskZ2V0cmVzcG9uc2UzNjB9IG9uQ2xpY2s9ImpRdWVyeSgnI2dyMzYwJykudG9nZ2xlKCk7Ii8+PGJyLz4KCQkJPHNwYW4gaWQ9J2dyMzYwJyBzdHlsZT0neyRncjM2MF9zdHlsZX0nPgoJCQkJPGxhYmVsIHN0eWxlPSJmbG9hdDpsZWZ0OyB3aWR0aDoxNmVtOyI+Q3VzdG9tIEFQSSBVUkw8L2xhYmVsPgoJCQkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImN1c3RvbV9hcGlfdXJsIiB2YWx1ZT0ieyRjdXN0b21fYXBpX3VybH0iIHNpemU9IjM3IiAvPgoJCQk8L3NwYW4+CgkJCTxici8+CgkJCTxici8+CgkJCSpOb3RlOiBHZXRSZXNwb25zZSB1c2VzIHRoZSB0ZXJtIDxpPkNhbXBhaWduPC9pPiBmb3Igd2hhdCBNZW1iZXJNb3VzZSBjb25zaWRlcnMgdG8gYmUgYSA8aT5saXN0PC9pPiA8YnIvPgoJCTwvZGl2PgpPUFRJT05TOwoJCXJldHVybiAkZm9ybTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGNvbmZpZ3VyZWQgQVBJIGtleQoJICogCgkgKiBAcmV0dXJuIFRoZSBBUEkga2V5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRBcGlLZXkoKQoJewoJCXJldHVybiAkdGhpcy0+YXBpS2V5OwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgQVBJIGtleQoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRhcGlLZXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldEFwaUtleSgkYXBpS2V5KQoJewoJCSR0aGlzLT5hcGlLZXkgPSAkYXBpS2V5OwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgY29uZmlndXJlZCBBUEkgdXJsLiBGb3Igbm9uLUdldFJlc3BvbnNlMzYwIGFjY291bnRzLCB0aGlzIHNob3VsZCBhbHdheXMgYmUgdGhlIGRlZmF1bHQKCSAqIAoJICogQHJldHVybiBUaGUgQVBJIHVybCAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFwaVVybCgpCgl7CgkJcmV0dXJuIChlbXB0eSgkdGhpcy0+YXBpVXJsKSk/TU1fR2V0UmVzcG9uc2VFbWFpbFNlcnZpY2VQcm92aWRlcjo6JEdFVFJFU1BPTlNFX0RFRkFVTFRfVVJMOiR0aGlzLT5hcGlVcmw7Cgl9CgkKCQoJLyoqCgkgKiBTZXQgdGhlIEFQSSB1cmwKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkYXBpVXJsCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBcGlVcmwoJGFwaVVybCkKCXsKCQkkdGhpcy0+YXBpVXJsID0gJGFwaVVybDsKCX0KCQoJCgkvKioKCSAqIFNldHMgd2hldGhlciBvciBub3QgdGhlIGFjY291bnQgYmVpbmcgY29ubmVjdGVkIHRvIGlzIGEgR2V0UmVzcG9uc2UzNjAgYWNjb3VudAoJICogCgkgKiBAcGFyYW0gYm9vbGVhbiB0cnVlIG9yIGZhbHNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRHZXRSZXNwb25zZTM2MCgkaXMzNjApCgl7CgkJJHRoaXMtPmlzMzYwID0gKGJvb2wpJGlzMzYwOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgYWNjb3VudCBiZWluZyBjb25uZWN0ZWQgdG8gaXMgYSBHZXRSZXNwb25zZTM2MCBhY2NvdW50CgkgKiAKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIG9yIGZhbHNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBpc0dldFJlc3BvbnNlMzYwKCkKCXsKCQlyZXR1cm4gKGJvb2wpJHRoaXMtPmlzMzYwOwoJfQp9Cg==', 0, '2018-11-21 06:38:53'),
(53, 'sync', 'YWJzdHJhY3QgY2xhc3MgTU1fU3luY3sKCXB1YmxpYyAkdGFibGVOYW1lUHJlZml4ID0gIlRhYmxlc19pbl8iOwoJcHJvdGVjdGVkICRkYiA9IG51bGw7Cglwcm90ZWN0ZWQgJGRiTmFtZSA9ICIiOwoJcHJvdGVjdGVkICRERUJVRyA9IGZhbHNlOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGRiUmVmLCAkZGJOYW1lKXsKCQkkdGhpcy0+ZGIgPSAkZGJSZWY7CgkJJHRoaXMtPmRiTmFtZSA9ICRkYk5hbWU7Cgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiBpc1ZhbGlkQ29sdW1uT2JqZWN0KCRjb2x1bW4pewoJCWlmKCFpc3NldCgkY29sdW1uLT5GaWVsZCkpewoJCQkkdGhpcy0+c2hvd0RlYnVnKCJDb2x1bW5zIGFycmF5IG11c3QgY29udGFpbiBhbiBpbmRleCBvZiBGaWVsZCIpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWlmKCFpc3NldCgkY29sdW1uLT5UeXBlKSl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkNvbHVtbnMgYXJyYXkgbXVzdCBjb250YWluIGFuIGluZGV4IG9mIFR5cGUiKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQlpZighaXNzZXQoJGNvbHVtbi0+TnVsbCkpewoJCQkkdGhpcy0+c2hvd0RlYnVnKCJDb2x1bW5zIGFycmF5IG11c3QgY29udGFpbiBhbiBpbmRleCBvZiBOdWxsIik7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJaWYoIWlzc2V0KCRjb2x1bW4tPktleSkpewoJCQkkdGhpcy0+c2hvd0RlYnVnKCJDb2x1bW5zIGFycmF5IG11c3QgY29udGFpbiBhbiBpbmRleCBvZiBLZXkiKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQlpZighaXNzZXQoJGNvbHVtbi0+RGVmYXVsdCkgJiYgIWlzX251bGwoJGNvbHVtbi0+RGVmYXVsdCkpewoJCQkkdGhpcy0+c2hvd0RlYnVnKCJDb2x1bW5zIGFycmF5IG11c3QgY29udGFpbiBhbiBpbmRleCBvZiBEZWZhdWx0Iik7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJaWYoIWlzc2V0KCRjb2x1bW4tPkV4dHJhKSl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkNvbHVtbnMgYXJyYXkgbXVzdCBjb250YWluIGFuIGluZGV4IG9mIEV4dHJhIik7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuIHRydWU7Cgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiBhbHRlclRhYmxlU3FsKCR0YWJsZU5hbWUsICRjb2x1bW4sICRhZnRlclNxbD0iIil7CgkJaWYoIWlzX29iamVjdCgkY29sdW1uKSl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkNvbHVtbnMgbXVzdCBiZSBhbiBvYmplY3Qgb2YgY29sdW1uIik7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJaWYoISR0aGlzLT5pc1ZhbGlkQ29sdW1uT2JqZWN0KCRjb2x1bW4pKXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkkZmllbGQgPSAkY29sdW1uLT5GaWVsZDsKCQkkdHlwZSA9ICRjb2x1bW4tPlR5cGU7CgkJJGlzTnVsbCA9ICgkY29sdW1uLT5OdWxsID09ICJOTyIpPyJOT1QgTlVMTCI6Ik5VTEwiOwoJCSRrZXkgPSAkY29sdW1uLT5LZXk7CgkJJGRlZmF1bHRTdHIgPSAoaXNfbnVsbCgkY29sdW1uLT5EZWZhdWx0KSB8fCBwcmVnX21hdGNoKCIvKFRJTUVTVEFNUCkvIiwgJGNvbHVtbi0+RGVmYXVsdCkpPyRjb2x1bW4tPkRlZmF1bHQ6Iid7JGNvbHVtbi0+RGVmYXVsdH0nIjsKCQkkZGVmYXVsdFZhbHVlID0gKCFlbXB0eSgkY29sdW1uLT5EZWZhdWx0KSk/IiBERUZBVUxUICIuJGRlZmF1bHRTdHIuIiI6IiI7CgkJJGV4dHJhID0gKCRjb2x1bW4tPkV4dHJhPT0iYXV0b19pbmNyZW1lbnQiKT8kY29sdW1uLT5FeHRyYToiIjsKCQoJCSRwcmltYXJ5S2V5ID0gIiI7CgkJJGluZGV4ZXMgPSAiIjsKCQkKCQlpZigka2V5ID09ICJQUkkiKXsKCQkJJHByaW1hcnlLZXkgPSAiLCBhZGQgcHJpbWFyeSBrZXkoIi4kZmllbGQuIikiOwoJCX0KCQllbHNlIGlmKCRrZXkgPT0gIk1VTCIpewoJCQkkaW5kZXhlcyA9ICIsIGFkZCBpbmRleCgiLiRmaWVsZC4iKSI7CgkJfQoJCQoJCSRzcWwgPSAiYWx0ZXIgdGFibGUgYHskdGFibGVOYW1lfWAgYWRkIGAiLiRmaWVsZC4iYCAiLiR0eXBlLiIgIi4kaXNOdWxsLiIgIi4kZGVmYXVsdFZhbHVlLiIgIi4kZXh0cmEuIiAiLiRhZnRlclNxbC4kaW5kZXhlcy4kcHJpbWFyeUtleTsKCQkKCQlyZXR1cm4gJHNxbDsKCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNyZWF0ZVRhYmxlU3FsKCR0YWJsZU5hbWUsICRjb2x1bW5zKXsKCQlpZighaXNfYXJyYXkoJGNvbHVtbnMpKXsKCQkJJHRoaXMtPnNob3dEZWJ1ZygiQ29sdW1ucyBtdXN0IGJlIGFuIGFycmF5IG9mIGNvbHVtbnMiKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkkcHJpbWFyeUtleSA9ICIiOwoJCSRpbmRleGVzID0gIiI7CgkJJHNxbCA9ICJjcmVhdGUgdGFibGUgaWYgbm90IGV4aXN0cyBgeyR0YWJsZU5hbWV9YCAoIjsKCQlmb3JlYWNoKCRjb2x1bW5zIGFzICRmaWVsZE5hbWU9PiRhdHRyKXsKCQkJaWYoISR0aGlzLT5pc1ZhbGlkQ29sdW1uT2JqZWN0KCRhdHRyKSl7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJCgkJCSRmaWVsZCA9ICRhdHRyLT5GaWVsZDsKCQkJJHR5cGUgPSAkYXR0ci0+VHlwZTsKCQkJJGlzTnVsbCA9ICgkYXR0ci0+TnVsbCA9PSAiTk8iKT8iTk9UIE5VTEwiOiJOVUxMIjsKCQkJJGtleSA9ICRhdHRyLT5LZXk7CgkJCSRkZWZhdWx0U3RyID0gKGlzX251bGwoJGF0dHItPkRlZmF1bHQpIHx8IHByZWdfbWF0Y2goIi8oVElNRVNUQU1QKS8iLCAkYXR0ci0+RGVmYXVsdCkpPyRhdHRyLT5EZWZhdWx0OiIneyRhdHRyLT5EZWZhdWx0fSciOwoJCQkkZGVmYXVsdFZhbHVlID0gKCFlbXB0eSgkYXR0ci0+RGVmYXVsdCkpPyIgREVGQVVMVCAiLiRkZWZhdWx0U3RyLiIiOiIiOwoJCQkkZXh0cmEgPSAoJGF0dHItPkV4dHJhPT0iYXV0b19pbmNyZW1lbnQiKT8kYXR0ci0+RXh0cmE6IiI7CgkJCQoJCQlpZigka2V5ID09ICJQUkkiKXsKCQkJCSRwcmltYXJ5S2V5ID0gIlBSSU1BUlkgS0VZKCIuJGZpZWxkTmFtZS4iKSI7CgkJCX0KCQkJCgkJCWlmKCRrZXkgPT0gIk1VTCIpewoJCQkJJGluZGV4ZXMuPSAiSU5ERVgoIi4kZmllbGROYW1lLiIpLCI7CgkJCX0KCQkJCgkJCSRzcWwuPSAiYHskZmllbGROYW1lfWAgIi4kdHlwZS4iICIuJGlzTnVsbC4iICIuJGRlZmF1bHRWYWx1ZS4iICIuJGV4dHJhLiIsIjsKCQl9CgkJJHNxbC49ICRpbmRleGVzOwoJCSRzcWwuPSRwcmltYXJ5S2V5OwoJCSRzcWwuPSAiKTsiOwoJCQoJCXJldHVybiAkc3FsOwoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiB0YWJsZUV4aXN0cygkdGFibGVOYW1lKQoJewoJCSRzcWwgPSAic2hvdyB0YWJsZXMgbGlrZSAneyR0YWJsZU5hbWV9JyI7CgkJJHJvd3MgPSAkdGhpcy0+ZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCWlmKGlzX2FycmF5KCRyb3dzKSAmJiBjb3VudCgkcm93cyk+PTEpewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZmllbGRFeGlzdHMoJGNvbHVtbiwgJHRhYmxlKQoJewoJCSRzcWwgPSAiZGVzY3JpYmUgeyR0YWJsZX0iOwoJCSRyb3dzID0gJHRoaXMtPmRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQoJCWZvcigkaT0wOyAkaTxjb3VudCgkcm93cyk7ICRpKyspCgkJewoJCQlpZigkY29sdW1uID09ICRyb3dzWyRpXS0+RmllbGQpCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNob3dEZWJ1Zygkc3RyKXsKCQlpZigkdGhpcy0+REVCVUcpewoJCQllY2hvIGdldF9jbGFzcygkdGhpcykuIiA6ICIuJHN0ci4iPGJyIC8+IjsKCQl9Cgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiB2YWxpZGF0ZURiUmVmKCl7CgkJaWYoIW1ldGhvZF9leGlzdHMoJHRoaXMtPmRiLCAiZ2V0X3Jlc3VsdHMiKSl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkRCIEFkYXB0ZXIgZG9lcyBub3QgaGF2ZSBhIGdldF9yZXN1bHRzIGZ1bmN0aW9uIik7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuIHRydWU7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0Q29sdW1ucygkdGFibGVOYW1lKXsKCQkkc3FsID0gImRlc2NyaWJlICIuJHRhYmxlTmFtZS4iOyI7CgkJJHJvd3MgPSAkdGhpcy0+ZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCWlmKCFpc19hcnJheSgkcm93cykpewoJCQkkdGhpcy0+c2hvd0RlYnVnKCJnZXRfcmVzdWx0cyBkaWQgbm90IHJldHVybiBhbiBhcnJheSA6ICIuanNvbl9lbmNvZGUoJHJvd3MpKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkkY29sdW1ucyA9IGFycmF5KCk7CgkJZm9yZWFjaCgkcm93cyBhcyAkcm93KXsKCQkJLyoKCQkJICogb2JqZWN0KHN0ZENsYXNzKSM1ICg2KSB7IFsiRmllbGQiXT0+IHN0cmluZygyKSAiaWQiIFsiVHlwZSJdPT4gc3RyaW5nKDcpICJpbnQoMTEpIiBbIk51bGwiXT0+IHN0cmluZygyKSAiTk8iIAoJCQkgKiBbIktleSJdPT4gc3RyaW5nKDMpICJQUkkiIFsiRGVmYXVsdCJdPT4gTlVMTCBbIkV4dHJhIl09PiBzdHJpbmcoMTQpICJhdXRvX2luY3JlbWVudCIgfQoJCQkgKi8KCQkJJGNvbHVtbnNbJHJvdy0+RmllbGRdID0gJHJvdzsKCQl9CgkJCgkJcmV0dXJuICRjb2x1bW5zOwoJfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0VGFibGVzKCl7CgkJJHNxbCA9ICJzaG93IHRhYmxlczsiOwoJCSRyb3dzID0gJHRoaXMtPmRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQlpZighaXNfYXJyYXkoJHJvd3MpKXsKCQkJJHRoaXMtPnNob3dEZWJ1ZygiZ2V0X3Jlc3VsdHMgZGlkIG5vdCByZXR1cm4gYW4gYXJyYXkgOiAiLmpzb25fZW5jb2RlKCRyb3dzKSk7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJZm9yZWFjaCgkcm93cyBhcyAkcm93KXsKCQkJJGtleSA9ICR0aGlzLT50YWJsZU5hbWVQcmVmaXguJHRoaXMtPmRiTmFtZTsKCQkJaWYoJHJvdy0+JGtleSA9PSAibW1fY291cG9uX3ZpZXciKXsKCQkJCWNvbnRpbnVlOwoJCQl9CgkJCSR0YWJsZXNbJHJvdy0+JGtleV0gPSAkdGhpcy0+Z2V0Q29sdW1ucygkcm93LT4ka2V5KTsKCQl9CgkJcmV0dXJuICR0YWJsZXM7Cgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiBpc1NhZmUoJGRpck5hbWUpewoJCWlmKCFpc19kaXIoJGRpck5hbWUpKXsKCQkJJHRoaXMtPnNob3dEZWJ1ZygiRGlyZWN0b3J5IGlzIG5vdCBmb3VuZCA6IHskZGlyTmFtZX0iKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQlpZighaXNfd3JpdGVhYmxlKCRkaXJOYW1lKSl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkRpcmVjdG9yeSBpcyBub3Qgd3JpdGVhYmxlIDogeyRkaXJOYW1lfSIpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCWlmKCEkdGhpcy0+dmFsaWRhdGVEYlJlZigpKXsKCQkJJHRoaXMtPnNob3dEZWJ1ZygiREIgQWRhcHRlciBkb2VzIG5vdCBoYXZlIHRoZSBwcm9wZXIgZnVuY3Rpb25zIik7CgkJCXJldHVybiBmYWxzZTsJCgkJfQoJCQoJCXJldHVybiB0cnVlOwoJfQoJCglhYnN0cmFjdCBmdW5jdGlvbiBleHBvcnRGaWxlKCRkaXIpOwoJYWJzdHJhY3QgZnVuY3Rpb24gZXhwb3J0U2NyZWVuKCk7Cn0=', 0, '2018-11-21 06:38:53'),
(54, 'objectcache', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhlIG9iamVjdCBjYWNoZSBpcyBtZWFudCB0byBiZSBhIHdyYXBwZXIgYXJvdW5kIGFuIGluLW1lbW9yeSBwZXItcHJvY2VzcyBjYWNoZSAKICogCiAqLwpjbGFzcyBNTV9PYmplY3RDYWNoZQp7CglwdWJsaWMgc3RhdGljICRLRVlfTEFTVF9GT1JNID0gImxhc3QtZm9ybSI7CgkKCXByb3RlY3RlZCBzdGF0aWMgJFdQX0NBQ0hFX0dST1VQID0gIm1lbWJlcm1vdXNlLWNhY2hlIjsKCQoJcHJvdGVjdGVkIHN0YXRpYyAkY2FjaGVEYXRhID0gYXJyYXkoKTsKCQoJCgkvKioKCSAqIFJldHJpZXZlIGEgdmFsdWUgZm9yIHRoZSBzdXBwbGllZCBrZXkKCSAqIAoJICogQHBhcmFtIHN0cmluZyAka2V5IFRoZSBrZXkgdG8gcmV0cmlldmUKCSAqIEBwYXJhbSBib29sZWFuICRleGlzdHMgSWYgdGhlIGtleSBleGlzdHMgaW4gdGhlIGNhY2hlOyB1c2VkIHRvIGRpc2FtYmlndWF0ZSBudWxsIHJldHVybiB2YWx1ZXMuIFZhcmlhYmxlIGlzIHBhc3NlZCBpbiBieSByZWZlcmVuY2UKCSAqIAoJICogQHJldHVybiBtaXhlZCBUaGUgc3RvcmVkIHZhbHVlLCBudWxsIGlmIG5vdCBmb3VuZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldCgka2V5LCAmJGV4aXN0cz1udWxsKQoJewoJCWlmIChpc3NldChzZWxmOjokY2FjaGVEYXRhWyRrZXldKSkKCQl7CgkJCSRleGlzdHMgPSB0cnVlOwoJCQlyZXR1cm4gc2VsZjo6JGNhY2hlRGF0YVska2V5XTsKCQl9CgkJZWxzZSAKCQl7CgkJCSRleGlzdHMgPSBmYWxzZTsKCQkJcmV0dXJuIG51bGw7CgkJfQoJfQoJCgkKCS8qKgoJICogU3RvcmUgYSB2YWx1ZSBmb3IgdGhlIHN1cHBsaWVkIGtleQoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRrZXkKCSAqIEBwYXJhbSBtaXhlZCAkdmFsdWUKCSAqIAoJICogQHJldHVybiBib29sZWFuIHRydWUgb24gc3VjY2VzcywgZmFsc2Ugb24gZmFpbHVyZS4gZmFsc2UgbW9zdCBsaWtlbHkgaW5kaWNhdGVzIGEgZmFpbHVyZSBvZiB0aGUgdW5kZXJseWluZyBjYWNoaW5nIG1lY2hhbmlzbQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNldCgka2V5LCAkdmFsdWUpCgl7CgkJc2VsZjo6JGNhY2hlRGF0YVska2V5XSA9ICR2YWx1ZTsKCQlyZXR1cm4gdHJ1ZTsKCX0KCQoJCgkvKioKCSAqIERlbGV0ZSBhIHZhbHVlIHdpdGggdGhlIGFzc29jaWF0ZWQga2V5IGZyb20gdGhlIGNhY2hlCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJGtleQoJICogCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBvbiBmYWlsdXJlLiBmYWxzZSBtb3N0IGxpa2VseSBpbmRpY2F0ZXMgYSBmYWlsdXJlIG9mIHRoZSB1bmRlcmx5aW5nIGNhY2hpbmcgbWVjaGFuaXNtCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZGVsZXRlKCRrZXk9IiIpCgl7CgkJdW5zZXQoc2VsZjo6JGNhY2hlRGF0YVska2V5XSk7CgkJcmV0dXJuIHRydWU7Cgl9CgkKCQoJLyoqCgkgKiBEZWxldGUgYWxsIGNhY2hlZCB2YWx1ZXMgZnJvbSB0aGUgY2FjaGUKCSAqIAoJICogQHJldHVybiBib29sZWFuIHRydWUgb24gc3VjY2VzcywgZmFsc2Ugb24gZmFpbHVyZS4gZmFsc2UgbW9zdCBsaWtlbHkgaW5kaWNhdGVzIGEgZmFpbHVyZSBvZiB0aGUgdW5kZXJseWluZyBjYWNoaW5nIG1lY2hhbmlzbQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZsdXNoKCkKCXsKCQlzZWxmOjokY2FjaGVEYXRhID0gYXJyYXkoKTsKCX0KfQ==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(55, 'flatrateshippingmethod', 'LyoqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJtb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KCmNsYXNzIE1NX0ZsYXRSYXRlU2hpcHBpbmdNZXRob2QgZXh0ZW5kcyBNTV9TaGlwcGluZ01ldGhvZAp7CgkKCXByb3RlY3RlZCAkdG9rZW4gPSAiRkxBVFJBVEUiOwoJCgkvKioKCSAqIENyZWF0ZS9NYWludGFpbiB0aGUgZmxhdC1yYXRlIG9wdGlvbnMgdGFibGUKCSAqIEBzZWUgTU1fU2hpcHBpbmdNZXRob2Q6Omluc3RhbGwoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gaW5zdGFsbCgpCgl7CgkJcGFyZW50OjppbnN0YWxsKCk7CgkJCgkJJHNxbFtdID0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0ZMQVRSQVRFX1NISVBQSU5HX09QVElPTlMuIiAoXG4iLgoJCQkJICJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSAib3B0aW9uX25hbWUgdmFyY2hhcigyNTUpIE5PVCBOVUxMLFxuIi4KCQkJCSAicmF0ZSBkZWNpbWFsKDEwLDIpIE5PVCBOVUxMLFxuIi4KCQkJCSAiUFJJTUFSWSBLRVkgIChpZClcbiIuCgkJCQkgIikiOwoJCgkJZm9yZWFjaCAoJHNxbCBhcyAkcXVlcnkpCgkJewoJCQlkYmRlbHRhKCRxdWVyeSk7CgkJfQoJfQoJCgkKCS8qKgoJICogUmV0dXJucyBhbiBhcnJheSBvZiBvYmplY3RzIHJlcHJlc2VudGluZyB2YWxpZCBzaGlwcGluZyBvcHRpb25zIGZvciB0aGlzIHNoaXBwaW5nIG1ldGhvZC4gVGhlIG9iamVjdCBjb250YWlucyBhIAoJICoga2V5LCBkZXNjcmlwdGlvbiwgYW5kIGEgcmF0ZS4gVGhlIGtleSBpcyBhIHVuaXF1ZSBpZGVudGlmaWVyIHRoYXQgdGhlIHNoaXBwaW5nIG1ldGhvZCBzaG91bGQgYmUgYWJsZSB0byB1c2UgbGF0ZXIgdG8gCgkgKiB1bmlxdWVseSBpZGVudGlmeSB0aGUgb3B0aW9uIGNob3Nlbi4ga2V5cyBhcmUgYWx3YXlzIGluIHRoZSBmb3JtICI8dG9rZW4+LTxpZGVudGlmaWVyPiIKCSAqIAoJICogQHNlZSBNTV9TaGlwcGluZ01ldGhvZDo6Z2V0U2hpcHBpbmdPcHRpb25zKCkKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGNhbGN1bGF0ZSBzaGlwcGluZyBmb3IuIElycmVsZXZhbnQgZm9yIGZsYXQgcmF0ZSBtZXRob2QKCSAqIEByZXR1cm4gYXJyYXkgJHNoaXBwaW5nT3B0aW9ucyBhbiBhcnJheSBvZiBvYmplY3RzIGNvbnRhaW5pbmcga2V5LCBuYW1lLCBhbmQgcmF0ZSBmb3IgdGhlIHZhbGlkIHNoaXBwaW5nIG9wdGlvbnMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nT3B0aW9ucygkb3JkZXI9IiIpCgl7CgkJZ2xvYmFsICR3cGRiOwoKCQkkc2hpcHBpbmdPcHRpb25zID0gYXJyYXkoKTsKCQkKCQkkdGFibGVTaGlwcGluZ09wdGlvbnMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoIlNFTEVDVCBpZCwgb3B0aW9uX25hbWUsIHJhdGUgZnJvbSAiLk1NX1RBQkxFX0ZMQVRSQVRFX1NISVBQSU5HX09QVElPTlMuIiBvcmRlciBieSByYXRlIGFzYyIpOwoJCWlmICghaXNfbnVsbCgkdGFibGVTaGlwcGluZ09wdGlvbnMpKQoJCXsKCQkJZm9yZWFjaCAoJHRhYmxlU2hpcHBpbmdPcHRpb25zIGFzICRlYWNoVGFibGVPcHRpb24pCgkJCXsKCQkJCSRrZXkgPSAieyR0aGlzLT50b2tlbn0teyRlYWNoVGFibGVPcHRpb24tPmlkfSI7CgkJCQkkc2hpcHBpbmdPcHRpb25zW10gPSBuZXcgTU1fU2hpcHBpbmdPcHRpb24oJGtleSwkZWFjaFRhYmxlT3B0aW9uLT5vcHRpb25fbmFtZSwgJGVhY2hUYWJsZU9wdGlvbi0+cmF0ZSwgJGVhY2hUYWJsZU9wdGlvbi0+aWQsJHRoaXMtPm5hbWUpOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkc2hpcHBpbmdPcHRpb25zOwoJfQoJCgkKCS8qKgoJICogVGFrZXMgYW4gaWRlbnRpZmllciBmb3IgYSBzaGlwcGluZyBvcHRpb24sIGFuZCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSByYXRlIGFuZCB0aGUgZGVzY3JpcHRpb24KCSAqIEBzZWUgTU1fU2hpcHBpbmdNZXRob2Q6OmdldFNoaXBwaW5nT3B0aW9uQnlLZXkoKQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIFRoZSBvcmRlciB0byB1c2UgaW4gcmF0ZSBjYWxjdWxhdGlvbgoJICogQHBhcmFtIHN0cmluZyAkc2hpcHBpbmdPcHRpb25LZXkgVGhlIGtleSByZWZlcmVuY2luZyB0aGUgc2hpcHBpbmcgb3B0aW9uIHRvIHVzZSBpbiByYXRlIGNhbGN1bGF0aW9uCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBpbiByYXRlIGxvb2t1cC4gT24gc3VjY2VzcywgdGhlIG1lc3NhZ2Ugd2lsbCBjb250YWluIGFuIE1NX1NoaXBwaW5nT3B0aW9uIG9iamVjdAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0U2hpcHBpbmdPcHRpb25CeUtleShNTV9PcmRlciAkb3JkZXIsICRzaGlwcGluZ09wdGlvbktleSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGVtcHR5KCRzaGlwcGluZ09wdGlvbktleSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIHNoaXBwaW5nIHJhdGU6IE5vIHNoaXBwaW5nIG1ldGhvZCBzcGVjaWZpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2tleXMgbG9vayBsaWtlIDxUT0tFTj4tPEtFWT4sIHNvIHNhbml0aXplIHRoZSBrZXkgaW4gY2FzZSB0aGUgdG9rZW4gaGFzIGFscmVhZHkgYmVlbiByZW1vdmVkCgkJJHNoaXBwaW5nT3B0aW9uS2V5ID0gcHJlZ19yZXBsYWNlKCIveyR0aGlzLT50b2tlbn0tLyIsICIiLCAkc2hpcHBpbmdPcHRpb25LZXksMSk7CgkJaWYgKCRzaGlwcGluZ09wdGlvbktleSA9PSAiIikKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgc2hpcHBpbmcgcmF0ZTogSW52YWxpZCBzaGlwcGluZyBtZXRob2QiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2ZvciB0aGUgZmxhdCByYXRlIG1ldGhvZCwgdGhlIGtleSBpcyB0aGUgaWQgZm9yIHRoZSBvcHRpb24gaW4gdGhlIHRhYmxlLCBzbyBkbyBhIGxvb2t1cAoJCXJldHVybiAkdGhpcy0+Z2V0U2hpcHBpbmdPcHRpb25CeUlkKCRzaGlwcGluZ09wdGlvbktleSk7Cgl9CgoJCgkvKioKCSAqIFJldHVybnMgdGhlIGZsYXQgcmF0ZSBzaGlwcGluZyBvcHRpb24gd2l0aCB0aGUgc3BlY2lmaWVkIGlkCgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICRpZCBUaGUgaWQgb2YgdGhlIHNoaXBwaW5nIG9wdGlvbiBpbiB0aGUgZmxhdCByYXRlIG9wdGlvbnMgdGFibGUKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgTU1fU2hpcHBpbmdPcHRpb24gaWYgZm91bmQgb24gc3VjY2Vzcywgb3IgYSBkZXNjcmlwdGl2ZSBlcnJvciBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRTaGlwcGluZ09wdGlvbkJ5SWQoJGlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCWlmIChlbXB0eSgkaWQpIHx8ICFpc19udW1lcmljKCRpZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIHNoaXBwaW5nIHJhdGU6IEludmFsaWQgc2hpcHBpbmcgbWV0aG9kIGlkIHNwZWNpZmllZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJLy9mb3IgdGhlIGZsYXQgcmF0ZSBtZXRob2QsIHRoZSBrZXkgaXMgdGhlIGlkIGZvciB0aGUgb3B0aW9uIGluIHRoZSB0YWJsZSwgc28gZG8gYSBsb29rdXAKCQkkc2hpcHBpbmdSYXRlUm93ID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9GTEFUUkFURV9TSElQUElOR19PUFRJT05TLiIgd2hlcmUgaWQ9JWQiLCRpZCkpOwoJCgkJaWYgKCFpc19udWxsKCRzaGlwcGluZ1JhdGVSb3cpKQoJCXsKCQkJJHNoaXBwaW5nT3B0aW9uID0gbmV3IE1NX1NoaXBwaW5nT3B0aW9uKCJ7JHRoaXMtPnRva2VufS17JGlkfSIsJHNoaXBwaW5nUmF0ZVJvdy0+b3B0aW9uX25hbWUsJHNoaXBwaW5nUmF0ZVJvdy0+cmF0ZSwkaWQpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRzaGlwcGluZ09wdGlvbik7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgc2hpcHBpbmcgbWV0aG9kOiBpZCBub3QgZm91bmQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIEFkZHMgYW4gb3B0aW9uIGFuZCBpdHMgcmF0ZSB0byB0aGUgZmxhdCByYXRlIHRhYmxlCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgVGhlIG5hbWUgb2YgdGhlIG9wdGlvbgoJICogQHBhcmFtIGZsb2F0ICRyYXRlIFRoZSBjb3N0IG9mIHRoaXMgb3B0aW9uLCBjdXJyZW50bHkgcGVyIG9yZGVyCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBhZGRPcHRpb24oJG5hbWUsICRyYXRlKQoJewoJCWdsb2JhbCAkd3BkYjsgCgkJCgkJJG5hbWUgPSB0cmltKCRuYW1lKTsKCQlpZiAoJG5hbWUgPT09ICIiKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiUGxlYXNlIGVudGVyIGEgbmFtZSBmb3IgdGhpcyBzaGlwcGluZyBtZXRob2QiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoKCRyYXRlICE9IDAgJiYgZW1wdHkoJHJhdGUpKSB8fCAhaXNfbnVtZXJpYygkcmF0ZSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJQbGVhc2UgZW50ZXIgYSB2YWxpZCByYXRlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHNoaXBwaW5nT3B0aW9uRGF0YSA9IGFycmF5KCJvcHRpb25fbmFtZSI9PiRuYW1lLCAicmF0ZSI9PiRyYXRlLCAiY3VycmVuY3kiPT5NTV9DdXJyZW5jeVV0aWw6OmdldEFjdGl2ZUN1cnJlbmN5KCkpOwoJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0ZMQVRSQVRFX1NISVBQSU5HX09QVElPTlMsJHNoaXBwaW5nT3B0aW9uRGF0YSk7CgkJCgkJaWYgKCRyZXN1bHQgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgc2hpcHBpbmcgbWV0aG9kIik7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCR3cGRiLT5pbnNlcnRfaWQpOwoJCX0KCX0KCQoJCgkvKioKCSAqIFVwZGF0ZSBhbiBvcHRpb24gYW5kIGl0cyByYXRlIGluIHRoZSBmbGF0IHJhdGUgdGFibGUKCSAqCgkgKiBAcGFyYW0gc3RyaW5nICRuYW1lIFRoZSBuYW1lIG9mIHRoZSBvcHRpb24KCSAqIEBwYXJhbSBmbG9hdCAkcmF0ZSBUaGUgY29zdCBvZiB0aGlzIG9wdGlvbiwgY3VycmVudGx5IHBlciBvcmRlcgoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gdXBkYXRlT3B0aW9uKCRuYW1lLCAkcmF0ZSwgJGlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRuYW1lID0gdHJpbSgkbmFtZSk7CgkJaWYgKCRuYW1lID09PSAiIikKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlBsZWFzZSBlbnRlciBhIG5hbWUiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCWlmICgoJHJhdGUgIT0gMCAmJiBlbXB0eSgkcmF0ZSkpIHx8ICFpc19udW1lcmljKCRyYXRlKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlBsZWFzZSBlbnRlciBhIHZhbGlkIHJhdGUiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoZW1wdHkoJGlkKSB8fCAhaXNfbnVtZXJpYygkaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBzaGlwcGluZyBtZXRob2Qgc2VsZWN0ZWQgZm9yIHVwZGF0ZSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJJHNoaXBwaW5nT3B0aW9uRGF0YSA9IGFycmF5KCJvcHRpb25fbmFtZSI9PiRuYW1lLCAicmF0ZSI9PiRyYXRlLCAiY3VycmVuY3kiPT5NTV9DdXJyZW5jeVV0aWw6OmdldEFjdGl2ZUN1cnJlbmN5KCkpOwoJCSRyZXN1bHQgPSAkd3BkYi0+dXBkYXRlKE1NX1RBQkxFX0ZMQVRSQVRFX1NISVBQSU5HX09QVElPTlMsJHNoaXBwaW5nT3B0aW9uRGF0YSxhcnJheSgiaWQiPT4kaWQpKTsKCQoJCWlmICgkcmVzdWx0ID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIHNoaXBwaW5nIG1ldGhvZCIpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJfQoJCgkKCS8qKgoJICogRGVsZXRlIGEgcmF0ZSBmcm9tIHRoZSBmbGF0IHJhdGUgdGFibGUKCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHJhdGVJZCBUaGUgaWQgb2YgdGhlIG9wdGlvbiB0byBkZWxldGUgZnJvbSB0aGUgZmxhdCByYXRlIHRhYmxlCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIHJlcHJlc2VudGluZyB3aGV0aGVyIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwgb3Igbm90CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkZWxldGVPcHRpb24oJG9wdGlvbklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoZW1wdHkoJG9wdGlvbklkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGRlbGV0aW5nIHNoaXBwaW5nIG1ldGhvZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRkZWxldGVPcHRpb25TUUwgPSAiREVMRVRFIEZST00gIi5NTV9UQUJMRV9GTEFUUkFURV9TSElQUElOR19PUFRJT05TLiIgV0hFUkUgaWQgPSAlZCI7CgkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkZGVsZXRlT3B0aW9uU1FMLCRvcHRpb25JZCkpOwoJCQoJCWlmICgkcmVzdWx0ID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGRlbGV0aW5nIHNoaXBwaW5nIG1ldGhvZCIpOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCX0KCQoJCn0KCg==', 0, '2018-11-21 06:38:53'),
(56, 'mailchimpemailserviceprovider', 'Y2xhc3MgTU1fTWFpbENoaW1wRW1haWxTZXJ2aWNlUHJvdmlkZXIgZXh0ZW5kcyBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyCnsKCXByaXZhdGUgc3RhdGljICRDT05GSVJNX05FVkVSX1RYVCA9ICJuZXZlciI7Cglwcml2YXRlIHN0YXRpYyAkQ09ORklSTV9GSVJTVF9MSVNUX1RYVCA9ICJmaXJzdF9saXN0X29ubHkiOwoJcHJpdmF0ZSBzdGF0aWMgJENPTkZJUk1fRVZFUllfTElTVF9NT1ZFX1RYVCA9ICJiZWZvcmVfZXZlcnlfbGlzdF9tb3ZlIjsKCQoJcHJpdmF0ZSAkYXBpS2V5OwoJcHJpdmF0ZSAkY29uZmlybU9wdEluOwoJcHJvdGVjdGVkICRhcGlVcmw7CgoJLyoqCgkgKgoJICogVGhlIG1haWxjaGltcCBhcGkgcmVxdWlyZXMgYW4gYXBpS2V5IGZvciBhY2Nlc3MsIHNvIGl0IGlzIGEgcmVxdWlyZWQgcGFyYW1ldGVyIGZvciB0aGUgY29uc3RydWN0b3IKCSAqIEBwYXJhbSBPYmplY3QgJHByb3ZpZGVyX2luZm8gT3B0aW9ucyBvYmplY3QKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwcm92aWRlcl9pbmZvKQoJeyAKCQlpZiAoaXNfb2JqZWN0KCRwcm92aWRlcl9pbmZvKSAmJiAoaXNzZXQoJHByb3ZpZGVyX2luZm8tPmFwaV9rZXkpKSAmJiAhZW1wdHkoJHByb3ZpZGVyX2luZm8tPmFwaV9rZXkpKQoJCXsKCQkJcGFyZW50OjpfX2NvbnN0cnVjdCgkcHJvdmlkZXJfaW5mbyk7CgkJCSR0aGlzLT5zZXRBUElLZXkoJHByb3ZpZGVyX2luZm8tPmFwaV9rZXkpOwoJCQkkdGhpcy0+Y29uZmlybU9wdEluID0gaXNzZXQoJGFkZGl0aW9uYWxfZGF0YVsnY29uZmlybV9vcHRfaW4nXSk/JGFkZGl0aW9uYWxfZGF0YVsnY29uZmlybV9vcHRfaW4nXTpzZWxmOjokQ09ORklSTV9ORVZFUl9UWFQ7CgkJfQoJfQoKCgkvKioKCSAqIFJldHVybnMgYXJyYXkgb2YgaGVhZGVycyBjb250YWluaW5nIHRoZSBiYXNpYyBhdXRoZW50aWNhdGlvbiBoZWFkZXJzIHRvIGF1dGggYWdhaW5zdCB0aGUgbWFpbGNoaW1wIHYzIGFwaQoJICoKCSAqIEByZXR1cm4gYXJyYXkgb2YgaGVhZGVycwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0SGVhZGVycygpCgl7CgkJJGhlYWRlckFycmF5ID0gYXJyYXkoJ0F1dGhvcml6YXRpb24nID0+ICdCYXNpYyAnIC4gYmFzZTY0X2VuY29kZSgiYW55c3RyaW5nOnskdGhpcy0+YXBpS2V5fSIpKTsKCQlyZXR1cm4gJGhlYWRlckFycmF5OwoJfQoKCgkvKioKCSAqIFRha2VzIHRoZSBvdXRwdXQgZnJvbSBhIHdwX3JlbW90ZV9yZXF1ZXN0KCkgY2FsbCBhbmQgcmV0dXJucyBhbiBNTV9SZXNwb25zZSBvYmplY3QgY29udGFpbmluZyB0aGUgcmVzcG9uc2UgcmV0dXJuZWQgZnJvbSB0aGUgYXBpCgkgKiBJZiB0aGUgSFRUUCBjb2RlIGZyb20gdGhlIHJlcXVlc3Qgd2FzIG5vdCBhIDIwMCwgdGhlbiB0aGUgcmV0dXJuZWQgTU1fUmVzcG9uc2Ugb2JqZWN0IGlzIG9mIHR5cGUgTU1fUmVzcG9uc2U6OkVycm9yCgkgKgoJICogQHBhcmFtIHVua25vd24gJGFwaVJlc3BvbnNlIFRoZSBvdXRwdXQgb2YgYSB3cF9yZW1vdGVfcmVxdWVzdCgpIGNhbGwKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2YgdHlwZSBzdWNjZXNzIGlmIHRoZSBodHRwIHJlc3BvbnNlIGNvZGUgd2FzIDIwMCwgZXJyb3Igb3RoZXJ3aXNlLiBUaGUgbWVzc2FnZSBmaWVsZCBvZiB0aGUgTU1fUmVzcG9uc2UgY29udGFpbnMgdGhlIGNhbGwgb3V0cHV0CgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiB0cmFuc2xhdGVSZXNwb25zZSgkYXBpUmVzcG9uc2UpCgl7CgkJJHJlc3BvbnNlQ29kZSA9IHdwX3JlbW90ZV9yZXRyaWV2ZV9yZXNwb25zZV9jb2RlKCRhcGlSZXNwb25zZSk7CgoJCWlmICgoJHJlc3BvbnNlQ29kZSA9PSAiMjAwIikgJiYgKGlzc2V0KCRhcGlSZXNwb25zZVsnYm9keSddKSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRhcGlSZXNwb25zZVsnYm9keSddKTsKCQl9CgkJZWxzZQoJCXsKCQkJJG1tUmVzcG9uc2UgPSBuZXcgTU1fUmVzcG9uc2UoIiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCWlmIChpc3NldCgkYXBpUmVzcG9uc2VbJ2JvZHknXSkpCgkJCXsKCQkJCSRib2R5ID0ganNvbl9kZWNvZGUoJGFwaVJlc3BvbnNlWydib2R5J10pOwoJCQkJaWYgKCgkYm9keSAhPT0gZmFsc2UpICYmIGlzc2V0KCRib2R5LT5kZXRhaWwpKQoJCQkJewoJCQkJCSRtbVJlc3BvbnNlLT5tZXNzYWdlID0gJGJvZHktPmRldGFpbDsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkbW1SZXNwb25zZS0+bWVzc2FnZSA9IHdwX3JlbW90ZV9yZXRyaWV2ZV9yZXNwb25zZV9tZXNzYWdlKCRhcGlSZXNwb25zZSk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkbW1SZXNwb25zZS0+bWVzc2FnZSA9IHdwX3JlbW90ZV9yZXRyaWV2ZV9yZXNwb25zZV9tZXNzYWdlKCRhcGlSZXNwb25zZSk7CgkJCX0KCQl9CgkJcmV0dXJuICRtbVJlc3BvbnNlOwoJfSAKCQoJCgkKCS8qKgoJICogQ2FsbCB0aGUgTWFpbGNoaW1wIHYzIGFwaSBhbmQgcmV0dXJuIHRoZSByZXNwb25zZQoJICoKCSAqIEBwYXJhbSBzdHJpbmcgJGVuZHBvaW50IFRoZSByZXNvdXJjZSB0byBjYWxsLCByZWxhdGl2ZSB0byB0aGUgYmFzZSBhcGkgdXJsCgkgKiBAcGFyYW0gc3RyaW5nICRtZXRob2QgVGhlIEhUVFAgVmVyYiB0byB1c2UKCSAqIEBwYXJhbSBzdHJpbmcgJGRhdGEgQW55IGRhdGEgdGhhdCBuZWVkcyB0byBiZSBzZW50IHRvIHRoZSByZW1vdGUgdXJsCgkgKiBAcGFyYW0gYXJyYXkgJGhlYWRlcnMgQW55IGN1c3RvbSBoZWFkZXJzIHRoYXQgbmVlZCB0byBiZSBzZXQgZm9yIHRoZSBjYWxsCgkgKgoJICogQHJldHVybiBNTV9SZXNwb25zZSB3aXRoIHN0YXRlIHN1Y2Nlc3Mgb3IgZXJyb3IuIE9uIHN1Y2Nlc3MsIHRoZSBtZXNzYWdlIGNvbnRhaW5zIHRoZSByZXNwb25zZSwgb24gZXJyb3IgaXQgd2lsbCBjb250YWluIGEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZQoJICoKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNhbGxBcGkoJGVuZHBvaW50LCAkbWV0aG9kPSJHRVQiLCAkZGF0YT0iIiwgJGhlYWRlcnM9YXJyYXkoKSkKCXsKCQlpZiAoY291bnQoJGhlYWRlcnMpID09IDApCgkJewoJCQkkaGVhZGVycyA9ICR0aGlzLT5nZXRIZWFkZXJzKCk7CgkJfQoKCQkkY2FsbFVybCA9ICR0aGlzLT5hcGlVcmwuInskZW5kcG9pbnR9IjsKCQkKCQlzd2l0Y2ggKCRtZXRob2QpCgkJewoJCQljYXNlICJQT1NUIjoKCQkJCSRhcGlSZXNwb25zZSA9IHdwX3JlbW90ZV9yZXF1ZXN0KCRjYWxsVXJsLCBhcnJheSgnbWV0aG9kJyAgPT4gJ1BPU1QnLAoJCQkJJ2hlYWRlcnMnID0+ICRoZWFkZXJzLAoJCQkJJ2JvZHknICAgID0+ICRkYXRhKSk7CgkJCQkgCgkJCQlyZXR1cm4gJHRoaXMtPnRyYW5zbGF0ZVJlc3BvbnNlKCRhcGlSZXNwb25zZSk7CgkJCQlicmVhazsKCQkJY2FzZSAiREVMRVRFIjoKCQkJCSRhcGlSZXNwb25zZSA9IHdwX3JlbW90ZV9yZXF1ZXN0KCRjYWxsVXJsLCBhcnJheSgnbWV0aG9kJyAgPT4gJ0RFTEVURScsCgkJCQknaGVhZGVycycgPT4gJGhlYWRlcnMpKTsKCQkJCXJldHVybiAkdGhpcy0+dHJhbnNsYXRlUmVzcG9uc2UoJGFwaVJlc3BvbnNlKTsKCQkJCWJyZWFrOwoJCQljYXNlICJQVVQiOgoJCQkJLy9jdXJyZW50bHkgdW51c2VkCgkJCQkkYXBpUmVzcG9uc2UgPSB3cF9yZW1vdGVfcmVxdWVzdCgkY2FsbFVybCwgYXJyYXkoJ21ldGhvZCcgID0+ICdQVVQnLAoJCQkJJ2hlYWRlcnMnID0+ICRoZWFkZXJzLAoJCQkJJ2JvZHknICAgID0+ICRkYXRhKSk7CgkJCQlyZXR1cm4gJHRoaXMtPnRyYW5zbGF0ZVJlc3BvbnNlKCRhcGlSZXNwb25zZSk7CgkJCQlicmVhazsKCQkJY2FzZSAiUEFUQ0giOgoJCQkJJGFwaVJlc3BvbnNlID0gd3BfcmVtb3RlX3JlcXVlc3QoJGNhbGxVcmwsIGFycmF5KCdtZXRob2QnICA9PiAnUEFUQ0gnLAoJCQkJJ2hlYWRlcnMnID0+ICRoZWFkZXJzLAoJCQkJJ2JvZHknICAgID0+ICRkYXRhKSk7CgkJCQlyZXR1cm4gJHRoaXMtPnRyYW5zbGF0ZVJlc3BvbnNlKCRhcGlSZXNwb25zZSk7CgkJCQlicmVhazsKCQkJY2FzZSAiR0VUIjoKCQkJZGVmYXVsdDoKCQkJCSRhcGlSZXNwb25zZSA9IHdwX3JlbW90ZV9yZXF1ZXN0KCRjYWxsVXJsLCBhcnJheSgnbWV0aG9kJyAgPT4gJ0dFVCcsCgkJCQknaGVhZGVycycgPT4gJGhlYWRlcnMpKTsKCQkJCXJldHVybiAkdGhpcy0+dHJhbnNsYXRlUmVzcG9uc2UoJGFwaVJlc3BvbnNlKTsKCQkJCWJyZWFrOwoJCX0KCgoJfQoKCS8qKgoJICoKCSAqIFJldHVybiB0aGUgbGlzdHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25maWd1cmVkIGFwaUtleSwga2V5ZWQgYnkgaWQgd2l0aCB0aGUgdmFsdWVzIGJlaW5nIGxpc3QgbmFtZXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyBsaXN0cyBhcyB0aGUgbWVzc2FnZSBvbiBzdWNjZXNzLCBhbiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBlcnJvciBzdGF0ZSBvdGhlcndpc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldExpc3RzKCRmaWx0ZXJzPWFycmF5KCksICRzdGFydD0wLCAkbGltaXQ9MTAwKQoJewoJCSRxdWVyeVN0cmluZyA9ICIiOwoJCWlmIChpc19udW1lcmljKCRzdGFydCkgJiYgKCRzdGFydCA+IDApKQoJCXsKCQkJJHF1ZXJ5U3RyaW5nIC49ICJvZmZzZXQ9eyRzdGFydH0mIjsKCQl9CgkJJGxpbWl0ID0gKGlzX251bWVyaWMoJGxpbWl0KSk/JGxpbWl0OjEwMDsKCQkkcXVlcnlTdHJpbmcgLj0gImNvdW50PXskbGltaXR9IjsKCQkkY2FsbFJlc3BvbnNlID0gJHRoaXMtPmNhbGxBcGkoIi9saXN0cz97JHF1ZXJ5U3RyaW5nfSIpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkY2FsbFJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkY2FsbFJlc3BvbnNlOwoJCX0KCQkkY2FsbE1zZyA9IGpzb25fZGVjb2RlKCRjYWxsUmVzcG9uc2UtPm1lc3NhZ2UpOwoJCWlmICghaXNzZXQoJGNhbGxNc2ctPmxpc3RzKSB8fCAhKGlzX2FycmF5KCRjYWxsTXNnLT5saXN0cykpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTm8gbGlzdHMgZm91bmRzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGxpc3RzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkY2FsbE1zZy0+bGlzdHMgYXMgJGxpc3RPYmplY3QpCgkJewoJCQkkbGlzdHNbJGxpc3RPYmplY3QtPmlkXSA9ICRsaXN0T2JqZWN0LT5uYW1lOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRsaXN0cyk7Cgl9CgoKCS8qKgoJICogUmV0dXJuIGEgREhUTUwvSmF2YXNjcmlwdCBkaWFsb2cgY2FwYWJsZSBvZiBjb2xsZWN0aW5nIHRoZSBvcHRpb25zIG5lZWRlZCB0byBjb25maWd1cmUgdGhlIHByb3ZpZGVyCgkgKiBAcmV0dXJuIFN0cmluZyB0aGUgbWFya3VwIGZvciB0aGUgb3B0aW9ucyBkaWFsb2cKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbmRlck9wdGlvbnNEaWFsb2coJHBvc3QpCgl7CgkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCR0aGlzLT5nZXRUb2tlbigpKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJJGFwaV9rZXlfdmFsdWUgPSAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKT8kcHJvdmlkZXJfZW50aXR5LT5nZXRBUElLZXkoKToiIjsKCQkkY29uZmlybV9vcHRfaW4gPSAkcHJvdmlkZXJfZW50aXR5LT5nZXRDb25maWdPcHRpb24oImNvbmZpcm1fb3B0X2luIik7IAoJCSRmb3JtID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRGlhbG9nKCk7IAoJCQoJCSRvcHRpb25zID0gIjxvcHRpb24gdmFsdWU9JyIuc2VsZjo6JENPTkZJUk1fTkVWRVJfVFhULiInICIuKCgkY29uZmlybV9vcHRfaW49PXNlbGY6OiRDT05GSVJNX05FVkVSX1RYVCk/InNlbGVjdGVkIjoiIikuIj4iLl9tbXQoIk5ldmVyIikuIjwvb3B0aW9uPgoJCQkJPG9wdGlvbiB2YWx1ZT0nIi5zZWxmOjokQ09ORklSTV9GSVJTVF9MSVNUX1RYVC4iJyIuKCgkY29uZmlybV9vcHRfaW49PXNlbGY6OiRDT05GSVJNX0ZJUlNUX0xJU1RfVFhUKT8ic2VsZWN0ZWQiOiIiKS4iPiIuX21tdCgiRmlyc3QgTGlzdCBPbmx5IikuIjwvb3B0aW9uPgoJCQkJPG9wdGlvbiB2YWx1ZT0nIi5zZWxmOjokQ09ORklSTV9FVkVSWV9MSVNUX01PVkVfVFhULiInIi4oKCRjb25maXJtX29wdF9pbj09c2VsZjo6JENPTkZJUk1fRVZFUllfTElTVF9NT1ZFX1RYVCk/InNlbGVjdGVkIjoiIikuIj4iLl9tbXQoIkJlZm9yZSBFdmVyeSBMaXN0IE1vdmUiKS4iPC9vcHRpb24+IjsKCQkkZm9ybS0+ZGlhbG9nID0gPDw8T1BUSU9OUwoJCTxkaXYgaWQ9Im1tLXByb3ZpZGVyLWNvbmZpZy1vcHRpb25zIj4KCQkJPGxhYmVsIHN0eWxlPSJmbG9hdDpsZWZ0OyB3aWR0aDo4ZW07Ij5BUEkgS2V5OgoJCQk8L2xhYmVsPgoJCQk8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibWFpbGNoaW1wX2FwaV9rZXkiIGlkPSJtYWlsY2hpbXBfYXBpX2tleSIgc2l6ZT0iMzciIHZhbHVlPSJ7JGFwaV9rZXlfdmFsdWV9Ii8+PGJyLz4KCQkJPGJyIC8+CgkJCTxsYWJlbCBzdHlsZT0idmVydGljYWwtYWxpZ246bWlkZGxlOyBmbG9hdDpsZWZ0OyB3aWR0aDoxMGVtOyI+Q29uZmlybWVkIE9wdC1JbjoKCQkJPC9sYWJlbD4KCQkJPHNlbGVjdCBuYW1lPSdjb25maXJtX29wdF9pbicgaWQ9J2NvbmZpcm1fb3B0X2luJz4KCQkJCXskb3B0aW9uc30KCQkJPC9zZWxlY3Q+CgkJCTxici8+CgkJPC9kaXY+Ck9QVElPTlM7CgkJcmV0dXJuICRmb3JtOwoJfQoKCgkvKioKCSAqIFJlc3BvbmRzIHRvIGRhdGEgY29sbGVjdGVkIGZyb20gdGhlIGZvcm0gcmVuZGVyZWQgYnkgcmVuZGVyT3B0aW9uc0RpYWxvZwoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpoYW5kbGVPcHRpb25zRGlhbG9nKCkKCSAqIEBwYXJhbSAkb3B0aW9uRGF0YSBBcnJheSBjb250YWluaW5nIHRoZSBwb3N0ZWQgdmFsdWVzCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gaGFuZGxlT3B0aW9uc0RpYWxvZygkb3B0aW9uRGF0YSkKCXsKCQlpZiAoaXNfYXJyYXkoJG9wdGlvbkRhdGEpICYmIChpc3NldCgkb3B0aW9uRGF0YVsnbWFpbGNoaW1wX2FwaV9rZXknXSkpICYmICFlbXB0eSgkb3B0aW9uRGF0YVsnbWFpbGNoaW1wX2FwaV9rZXknXSkpCgkJewoJCQlpZihpc3NldCgkb3B0aW9uRGF0YVsnY29uZmlybV9vcHRfaW4nXSkpCgkJCXsKCQkJCSRwcm92aWRlcl90b2tlbiA9ICRvcHRpb25EYXRhWydwcm92aWRlcl90b2tlbiddOwoJCQkJJGFwaV9rZXkgPSAkb3B0aW9uRGF0YVsnbWFpbGNoaW1wX2FwaV9rZXknXTsKCQkJCSRwcm9zcGVjdF9saXN0X2lkID0gJG9wdGlvbkRhdGFbJ3Byb3NwZWN0X2xpc3RfaWQnXTsKCQkJCSRjYW5jZWxsYXRpb25fbGlzdF9pZCA9ICRvcHRpb25EYXRhWydjYW5jZWxsYXRpb25fbGlzdF9pZCddOwoJCQkJJGNvbmZpcm1fb3B0X2luID0gJG9wdGlvbkRhdGFbJ2NvbmZpcm1fb3B0X2luJ107CgkKCQkJCSR0aGlzLT5zZXRBUElLZXkoJGFwaV9rZXkpOwoJCQkJJHRoaXMtPnNldENvbmZpcm1PcHRJbigkY29uZmlybV9vcHRfaW4pOwoJCQkJCgkJCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyKCk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkcHJvdmlkZXJfdG9rZW4pOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCQkJaWYgKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkvL2ZpcnN0IHdyaXRlIHRoZSBwcm92aWRlcidzIGNvbmZpZ3VyYXRpb24gb3B0aW9ucwoJCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldEFQSUtleSgkYXBpX2tleSk7CgkJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0QWN0aXZlKHRydWUpOwoJCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldFByb3NwZWN0TGlzdElEKCRwcm9zcGVjdF9saXN0X2lkKTsKCQkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRDYW5jZWxsYXRpb25MaXN0SUQoJGNhbmNlbGxhdGlvbl9saXN0X2lkKTsKCQkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRDb25maWdPcHRpb24oImNvbmZpcm1fb3B0X2luIiwgJGNvbmZpcm1fb3B0X2luKTsKCQkJCQkkY29tbWl0X3Jlc3BvbnNlID0gJHByb3ZpZGVyX2VudGl0eS0+Y29tbWl0RGF0YSgpOwoJCQkJCWlmICgkY29tbWl0X3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJCQkJewoJCQkJCQkvL3Bhc3MgdGhyb3VnaCBlcnJvcnMgY29tbWl0dGluZyB0byB0aGUgZGF0YWJhc2UKCQkJCQkJcmV0dXJuICRjb21taXRfcmVzcG9uc2U7CgkJCQkJfQoJCQkJCS8vbm93IHdyaXRlIHRoZSBsaXN0IG1hcHBpbmdzCgkJCQkJaWYgKGlzc2V0KCRvcHRpb25EYXRhWydtZW1iZXJfdHlwZV9tYXBwaW5ncyddKSAmJiBpc19hcnJheSgkb3B0aW9uRGF0YVsnbWVtYmVyX3R5cGVfbWFwcGluZ3MnXSkpCgkJCQkJewoJCQkJCQkkcHJvdmlkZXJfaWQgPSAkcHJvdmlkZXJfZW50aXR5LT5nZXRJZCgpOwoJCQkJCQlyZXR1cm4gJHRoaXMtPnBlcnNpc3RMaXN0TWFwcGluZ3MoJHByb3ZpZGVyX2lkLCRvcHRpb25EYXRhWydtZW1iZXJfdHlwZV9tYXBwaW5ncyddKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJLy9mYWlsZWQgdG8gbG9hZCBlbnRpdHkgZnJvbSB0YWJsZQoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byBzYXZlIHNldHRpbmdzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncywgY291bGQgbm90IGZpbmQgY29uZmlybWVkIG9wdC1pbiB2YWx1ZS4iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCS8vb3B0aW9uRGF0YSBpcyBub3QgYW4gYXJyYXksIG9yIHRoZSBhcGkga2V5IHdhcyBub3Qgc2VudAoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBzZXR0aW5nczogSW5jb3JyZWN0IG9wdGlvbnMgZm9ybWF0IG9yIEFQSSBLZXkgbm90IHNlbnQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCgkvKioKCSAqIENvbmZpZ3VyZXMgdGhlIG1haWxjaGltcCBwcm92aWRlciBpbiBvcmRlciB0byBkbyB0aGUgaW5pdGlhbCBjb25uZWN0CgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmNvbmZpZ3VyZUZyb21PcHRpb25zKCkKCSAqIEBwYXJhbSAkb3B0aW9uRGF0YSBBcnJheSBUaGUgdmFsdWVzIHBvc3RlZCBmcm9tIHRoZSBmb3JtIHJlbmRlcmVkIGJ5IHJlbmRlck9wdGlvbnNEaWFsb2cKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbmZpZ3VyZUZyb21PcHRpb25zKCRvcHRpb25EYXRhKQoJewoJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnbWFpbGNoaW1wX2FwaV9rZXknXSkpCgkJewoJCQkkdGhpcy0+c2V0QVBJS2V5KCRvcHRpb25EYXRhWydtYWlsY2hpbXBfYXBpX2tleSddKTsKCQl9CgkJCgkJaWYoaXNzZXQoJG9wdGlvbkRhdGFbJ2NvbmZpcm1fb3B0X2luJ10pKQoJCXsKCQkJJHRoaXMtPmNvbmZpcm1PcHRJbiA9ICRvcHRpb25EYXRhWydjb25maXJtX29wdF9pbiddOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgoKCS8qKgoJICogQWRkcyBhIG1lbWJlciB0byBhIGxpc3QKCSAqCgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmFkZE1lbWJlclRvTGlzdCgpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyB0byBhZGQgdG8gdGhlIGxpc3QKCSAqIEBwYXJhbSAkbGlzdElkIFN0cmluZyBUaGUgaWQgb2YgdGhlIGxpc3QKCSAqIEBwYXJhbSAkaW5jbHVkZUJ1bmRsZUluZm8gaW5kaWNhdGVzIGlmIGJ1bmRsZSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcGFzc2VkCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBhZGRNZW1iZXJUb0xpc3QoJGVtYWlsLCRsaXN0SWQsJGluY2x1ZGVCdW5kbGVJbmZvPXRydWUpCgl7CgkJJG1lbWJlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRlbWFpbCk7CgoJCWlmICghJG1lbWJlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgbWVtYmVyIHdpdGggZW1haWwgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkdGhpcy0+YWRkUmVxdWlyZWRNZXJnZVZhcnMoJGxpc3RJZCwkaW5jbHVkZUJ1bmRsZUluZm8pOwoJCSRtZXJnZXZhcnNSZXNwb25zZSA9ICR0aGlzLT5nZXRNZW1iZXJEYXRhVG9NZXJnZSgkZW1haWwsJGluY2x1ZGVCdW5kbGVJbmZvKTsKCQlpZiAoJG1lcmdldmFyc1Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJG1lcmdldmFyc1Jlc3BvbnNlOwoJCX0KCQkvL3JldHVybmVkIG1lc3NhZ2UgaXMgYW4gb2JqZWN0IGtleWVkIGJ5IHRhZywgd2l0aCB2YWx1ZXMgYmVpbmcgdGhlIG1lbWJlci1zcGVjaWZpYyBtZXJnZSB2YXIgdmFsdWVzCgkJCgkJJGpzb25PYmplY3QgPSBuZXcgc3RkQ2xhc3MoKTsKCQkkanNvbk9iamVjdC0+ZW1haWxfYWRkcmVzcyA9ICRlbWFpbDsKCQkkanNvbk9iamVjdC0+ZW1haWxfdHlwZSA9ICJodG1sIjsKCQkkanNvbk9iamVjdC0+c3RhdHVzID0gJHRoaXMtPmdldFN0YXR1c0ZvclVzZXIoJGVtYWlsLCAkbGlzdElkKTsgIAoJCSRqc29uT2JqZWN0LT5tZXJnZV9maWVsZHMgPSAkbWVyZ2V2YXJzUmVzcG9uc2UtPm1lc3NhZ2U7CgkJJGpzb25EYXRhID0gJHRoaXMtPmpzb25FbmNvZGUoJGpzb25PYmplY3QpOwoJCQoJCSRlbmRwb2ludFVybCA9ICIvbGlzdHMveyRsaXN0SWR9L21lbWJlcnMiOwoJCSRjYWxsUmVzcG9uc2UgPSAkdGhpcy0+Y2FsbEFwaSgkZW5kcG9pbnRVcmwsIlBPU1QiLCRqc29uRGF0YSk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRjYWxsUmVzcG9uc2UpKQoJCXsKCQkJLy9UT0RPOiByZXRyaWV2ZSBmcmllbmRseSBuYW1lIGZvciBsaXN0SWQKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgYWRkaW5nIHskZW1haWx9IHRvIGxpc3Qgd2l0aCBpZCB7JGxpc3RJZH06IHskY2FsbFJlc3BvbnNlLT5tZXNzYWdlfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KIAoKCS8qKgoJICogR2V0cyB0aGUgZXhpc3Rpbmcgc3RhdHVzIGZvciBhIG1haWxjaGltcCB1c2VyLgoJICoKCSAqIEBwYXJhbSAkZW1haWwgU3RyaW5nIFRoZSBlbWFpbCBhZGRyZXNzIHRvIHJlbW92ZSBmcm9tIHRoZSBsaXN0CgkgKiBAcGFyYW0gJGxpc3RJZCBTdHJpbmcgVGhlIGlkIG9mIHRoZSBsaXN0CgkgKiBAcmV0dXJuIHBlbmRpbmcgfCBzdWJzY3JpYmVkIGRlcGVuZGluZyBvbiBjb25maWd1cmF0aW9uIHNldHRpbmcuCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0U3RhdHVzRm9yVXNlcigkZW1haWwsICRsaXN0SWQpCgl7IAoJCSRzdGF0dXMgPSAic3Vic2NyaWJlZCI7CgkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCR0aGlzLT5nZXRUb2tlbigpKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJaWYgKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSkKCQl7IAoJCQkkdGhpcy0+YXBpS2V5ID0gJHByb3ZpZGVyX2VudGl0eS0+Z2V0QVBJS2V5KCk7CgkJCSR0aGlzLT5jb25maXJtT3B0SW4gPSAkcHJvdmlkZXJfZW50aXR5LT5nZXRDb25maWdPcHRpb24oImNvbmZpcm1fb3B0X2luIik7CgkJCSAKCQkJLyoKCQkJICogSWYgY29uZmlndXJhdGlvbiBpcyBzZXQgdG8gbmV2ZXIgdmFsaWRhdGUsIGp1c3QKCQkJICogc2V0IGFzIHN1YnNjcmliZWQuCgkJCSAqLwoJCQlpZigkdGhpcy0+Y29uZmlybU9wdEluPT1zZWxmOjokQ09ORklSTV9ORVZFUl9UWFQpCgkJCXsKCQkJCSRzdGF0dXMgPSAic3Vic2NyaWJlZCI7CgkJCX0KCQkJLyoKCQkJICogSWYgY29uZmlndXJhdGlvbiBpcyBzZXQgdG8gdmFsaWRhdGUgb24gZmlyc3QgbGlzdCBvbmx5CgkJCSAqIHRoZW4gY2hlY2sgdG8gc2VlIGlmIHRoZXkgaGF2ZSBzdWJzY3JpYmVkIGFuZCBzZXQgc3RhdHVzIGFjY29yZGluZ2x5LgoJCQkgKi8KCQkJZWxzZSBpZigkdGhpcy0+Y29uZmlybU9wdEluPT1zZWxmOjokQ09ORklSTV9GSVJTVF9MSVNUX1RYVCkKCQkJewoJCQkJJHN0YXR1cyA9ICJzdWJzY3JpYmVkIjsKCQkJCSR1c2VyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGVtYWlsKTsKCQkJCSRsaXN0SWQgPSAkdXNlci0+Z2V0U3Vic2NyaWJlZExpc3RJZCgpOwoJCQkJJGhhc0V4aXN0aW5nTGlzdElkID0gc3RybGVuKCRsaXN0SWQpPjAgJiYgIWlzX251bGwoJGxpc3RJZCk7CgkJCQlpZighJGhhc0V4aXN0aW5nTGlzdElkKQoJCQkJewoJCQkJCSRzdGF0dXMgPSAicGVuZGluZyI7CgkJCQl9IAoJCQl9CgkJCS8qCgkJCSAqIGltcGxpZWQgZWxzZSA9PiBwZW5kaW5nLgoJCQkgKi8KCQl9IAoJCQoJCXJldHVybiAkc3RhdHVzOwoJfQoJCgkKCgkvKioKCSAqIENoZWNrcyB0byBzZWUgaWYgYSB1c2VycyBpcyBzdWJzY3JpYmVkIHRvIGEgbGlzdAoJICogCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyB0byByZW1vdmUgZnJvbSB0aGUgbGlzdAoJICogQHBhcmFtICRsaXN0SWQgU3RyaW5nIFRoZSBpZCBvZiB0aGUgbGlzdAoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgaGFzIHN1YnNjcmliZWQgdG8gbGlzdElkIG9yIG90aGVyd2lzZSBmYWxzZS4KCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBoYXNTdWJzY3JpYmVkKCRlbWFpbCwgJGxpc3RJZCkKCXsgIAoJCSRlbWFpbFN0ciA9IG1kNShzdHJ0b2xvd2VyKCRlbWFpbCkpOwoJCSRlbmRwb2ludFVybCA9ICIvbGlzdHMveyRsaXN0SWR9L21lbWJlcnMvIi4kZW1haWxTdHI7CgkJJGNhbGxSZXNwb25zZSA9ICR0aGlzLT5jYWxsQXBpKCRlbmRwb2ludFVybCk7IAoJCXJldHVybiAhTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGNhbGxSZXNwb25zZSk7IAoJfQoJCgoJLyoqCgkgKiBSZW1vdmVzIGEgbWVtYmVyIGZyb20gYSBsaXN0CgkgKgoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpyZW1vdmVNZW1iZXJGcm9tTGlzdCgpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyB0byByZW1vdmUgZnJvbSB0aGUgbGlzdAoJICogQHBhcmFtICRsaXN0SWQgU3RyaW5nIFRoZSBpZCBvZiB0aGUgbGlzdAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGVtYWlsLCAkbGlzdElkKQoJewoJCWlmIChlbXB0eSgkbGlzdElkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJJGVtYWlsSGFzaCA9IG1kNShzdHJ0b2xvd2VyKCRlbWFpbCkpOwoJCSRjYWxsUmVzcG9uc2UgPSAkdGhpcy0+Y2FsbEFwaSgiL2xpc3RzL3skbGlzdElkfS9tZW1iZXJzL3skZW1haWxIYXNofSIsIkRFTEVURSIpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkY2FsbFJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJlbW92aW5nIHskZW1haWx9IGZyb20gbGlzdCB3aXRoIGlkIHskbGlzdElkfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCgoJLyoqCgkgKiBDaGFuZ2VzIGEgbWVtYmVycyBsaXN0IHN1YnNjcmlwdGlvbiBiYXNlZCBvbiBhIGNoYW5nZSBpbiBtZW1iZXJzaGlwIGxldmVsLgoJICogUGVyZm9ybXMgYSByZW1vdmUsIGxvb2tzIHVwIHRoZSBsaXN0IChpZiBhbnkpIGZvciB0aGUgbmV3IG1lbWJlcnNoaXAgbGV2ZWwsIGFuZCB0aGVuIHBlcmZvcm1zIGFuIGFkZAoJICoKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6Y2hhbmdlTWVtYmVyc2hpcExldmVsKCkKCSAqCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgbWVtYmVyIHRvIGJlIHVwZGF0ZWQKCSAqIEBwYXJhbSAkbmV3TWVtYmVyVHlwZSBpbnQgVGhlIG1lbWJlcnNoaXAgbGV2ZWwgaWQgb2YgdGhlIG1lbWJlcidzIG5ldyBtZW1iZXJzaGlwIGxldmVsCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoJGVtYWlsLCRuZXdNZW1iZXJUeXBlKQoJewoKCQkkb3ZlcmFsbF9zdWNjZXNzID0gdHJ1ZTsKCQkkb3ZlcmFsbF9zdGF0dXMgPSAiIjsKCQkkbGlzdEZyaWVuZGx5TmFtZXMgPSAkdGhpcy0+Z2V0TGlzdHMoKTsKCgkJJG1lbWJlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRlbWFpbCk7CgoJCWlmICghJG1lbWJlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgbWVtYmVyIHdpdGggZW1haWwgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkb2xkTGlzdElkID0gJG1lbWJlci0+Z2V0U3Vic2NyaWJlZExpc3RJZCgpOwoJCWlmICghZW1wdHkoJG9sZExpc3RJZCkpCgkJewoJCQkkb2xkUmVtb3ZlUmVzdWx0ID0gJHRoaXMtPnJlbW92ZU1lbWJlckZyb21MaXN0KCRlbWFpbCwkb2xkTGlzdElkKTsKCQkJaWYgKCRvbGRSZW1vdmVSZXN1bHQgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQkJewoJCQkJJG92ZXJhbGxfc3VjY2VzcyA9IGZhbHNlOwoJCQkJJG92ZXJhbGxfc3RhdHVzIC49ICJ7JG9sZFJlbW92ZVJlc3VsdC0+bWVzc2FnZX1cbiI7CgkJCX0KCQl9CgoJCS8vY29udGludWUgb24gZGVzcGl0ZSBzdGF0ZSBvZiByZW1vdmUKCQkkbmV3TGlzdElkID0gKGVtcHR5KCRuZXdNZW1iZXJUeXBlKSk/JHRoaXMtPmdldExpc3RJZEZvck1lbWJlcigkZW1haWwpOiR0aGlzLT5nZXRMaXN0SWRGb3JNZW1iZXJzaGlwTGV2ZWwoJG5ld01lbWJlclR5cGUpOwoJCWlmICgkbmV3TGlzdElkLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQkkb3ZlcmFsbF9zdGF0dXMuPSRuZXdMaXN0SWQtPm1lc3NhZ2U7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG92ZXJhbGxfc3RhdHVzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCgkJJG5ld0xpc3RJZCA9ICRuZXdMaXN0SWQtPm1lc3NhZ2U7CgkJaWYgKGVtcHR5KCRuZXdMaXN0SWQpKQoJCXsKCQkJLy9ubyBsaXN0IHRvIGFkZCB0bywgc28gc3VjY2VzcwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoKCQkkbmV3QWRkUmVzdWx0ID0gJHRoaXMtPmFkZE1lbWJlclRvTGlzdCgkZW1haWwsICRuZXdMaXN0SWQpOwoJCWlmICgkbmV3QWRkUmVzdWx0ID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQkkb3ZlcmFsbF9zdWNjZXNzID0gZmFsc2U7CgkJCSRvdmVyYWxsX3N0YXR1cyAuPSAieyRuZXdBZGRSZXN1bHQtPm1lc3NhZ2V9XG4iOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRvdmVyYWxsX3N0YXR1cyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJZWxzZQoJCXsKCQkJLy9zdWNjZXNzCgkJCWlmICghJG92ZXJhbGxfc3VjY2VzcykKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiT3BlcmF0aW9uIHN1Y2NlZWRlZCwgYnV0IHRoZSBmb2xsb3dpbmcgZXJyb3JzIHdlcmUgZW5jb3VudGVyZWQ6IHskb3ZlcmFsbF9zdGF0dXN9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bCIpOwoJCQl9CgkJfQoJfQoKCgkvKioKCSAqIFVwZGF0ZXMgYSBtZW1iZXJzIGluZm9ybWF0aW9uIGF0dGFjaGVkIHRvIGEgc3Vic2NyaWJlZCBsaXN0CgkgKgoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjp1cGRhdGVNZW1iZXIoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIG9mIHRoZSBtZW1iZXIgdG8gYmUgdXBkYXRlZAoJICogQHBhcmFtICRsaXN0SWQgU3RyaW5nIFRoZSBpZCBvZiB0aGUgbGlzdCB3aGVyZSB0aGUgbWVtYmVyJ3Mgc3Vic2NyaXB0aW9uIGluZm8gc2hvdWxkIGJlIHVwZGF0ZWQKCSAqIEBwYXJhbSAkbmV3RW1haWwgU3RyaW5nIChvcHRpb25hbCkgLSBUaGUgbWVtYmVyJ3MgbmV3IGVtYWlsIGluIHRoZSBjYXNlIHdoZXJlIHRoZSB1cGRhdGUgaXMgYW4gZW1haWwgYWRkcmVzcyBjaGFuZ2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZU1lbWJlcigkZW1haWwsICRsaXN0SWQsJG5ld0VtYWlsPSIiKQoJewoJCWlmIChlbXB0eSgkbGlzdElkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsgLy9ubyBsaXN0IHdhcyBwYXNzZWQgaW4sIHNvIHN1Y2Nlc3MKCQl9CgkJJHRoaXMtPmFkZFJlcXVpcmVkTWVyZ2VWYXJzKCRsaXN0SWQpOwoJCSRtZXJnZV92YXJzX3Jlc3BvbnNlID0gJHRoaXMtPmdldE1lbWJlckRhdGFUb01lcmdlKGVtcHR5KCRuZXdFbWFpbCk/JGVtYWlsOiRuZXdFbWFpbCk7CgkJaWYgKCRtZXJnZV92YXJzX3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJG1lcmdlX3ZhcnNfcmVzcG9uc2U7CgkJfQoJCSRqc29uT2JqZWN0ID0gbmV3IHN0ZENsYXNzKCk7CgkJJGpzb25PYmplY3QtPmVtYWlsX2FkZHJlc3MgPSAoIWVtcHR5KCRuZXdFbWFpbCkpPyRuZXdFbWFpbDokZW1haWw7CgkJJGpzb25PYmplY3QtPmVtYWlsX3R5cGUgPSAiaHRtbCI7CgkJJGpzb25PYmplY3QtPnN0YXR1cyA9ICR0aGlzLT5nZXRTdGF0dXNGb3JVc2VyKCRlbWFpbCwgJGxpc3RJZCk7CgkJJGpzb25PYmplY3QtPm1lcmdlX2ZpZWxkcyA9ICRtZXJnZV92YXJzX3Jlc3BvbnNlLT5tZXNzYWdlOwoJCSRqc29uRGF0YSA9ICR0aGlzLT5qc29uRW5jb2RlKCRqc29uT2JqZWN0KTsKCQkkc3Vic2NyaWJlckhhc2ggPSBtZDUoc3RydG9sb3dlcigkZW1haWwpKTsKCQkkcmVzcG9uc2UgPSAkdGhpcy0+Y2FsbEFwaSgiL2xpc3RzL3skbGlzdElkfS9tZW1iZXJzL3skc3Vic2NyaWJlckhhc2h9IiwiUEFUQ0giLCRqc29uRGF0YSk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXNwb25zZSkpCgkJewoJCQkvL1RPRE86IHVzZSBsaXN0IGZyaWVuZGx5IG5hbWUgaW4gZXJyb3IgbXNnCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIHskZW1haWx9IG9uIGxpc3Qgd2l0aCBpZCB7JGxpc3RJZH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgoJfQoKCgkvKioKCSAqCgkgKiBSZXR1cm5zIHRoZSBhcGkga2V5CgkgKiBAcmV0dXJuIFN0cmluZyB0aGUgYXBpIGtleQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0QVBJS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFwaUtleTsKCX0KCgkvKioKCSAqCgkgKiBTZXRzIHRoZSBhcGkga2V5CgkgKiBAcGFyYW0gU3RyaW5nICRhcGlLZXkgVGhlIG5ldyBhcGkga2V5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBUElLZXkoJGFwaUtleSkKCXsKCQkkdGhpcy0+YXBpS2V5ID0gJGFwaUtleTsKCQkJCgkJJGtleUNvbXBvbmVudHMgPSBleHBsb2RlKCItIiwkdGhpcy0+YXBpS2V5KTsKCQkkbGVuZ3RoID0gY291bnQoJGtleUNvbXBvbmVudHMpOwoJCWlmICgkbGVuZ3RoID4gMSkKCQl7CgkJCSRkYXRhY2VudGVyID0gJGtleUNvbXBvbmVudHNbJGxlbmd0aC0xXTsKCQkJJHRoaXMtPmFwaVVybCA9ICJodHRwczovL3skZGF0YWNlbnRlcn0uYXBpLm1haWxjaGltcC5jb20vMy4wIjsKCQl9CgkJZWxzZQoJCXsKCQkJLy9pbmNvcnJlY3QgYXBpIGtleSBmb3JtYXQKCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkluY29ycmVjdCBhcGkga2V5IGZvcm1hdDogbm8gZGF0YWNlbnRlciBjb21wb25lbnQiKTsKCQl9Cgl9CgoKCS8qKgoJICoKCSAqIEdldHMgdGhlIG1lbWJlciBkYXRhIHRvIG1lcmdlLiBDdXJyZW50bHkgdGhpcyBpcyBmaXJzdF9uYW1lLCBsYXN0X25hbWUsIGVtYWlsLCBhbmQgYW55IGJ1bmRsZXMKCSAqCgkgKiBAcGFyYW0gU3RyaW5nICRlbWFpbCBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgbWVtYmVyCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgYW4gb2JqZWN0IG9mIG1lcmdlIGRhdGEgYXMga2V5LXZhbHVlIHBhaXJzIG9uIHN1Y2Nlc3MsIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGVycm9yIHN0YXRlIG90aGVyd2lzZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0TWVtYmVyRGF0YVRvTWVyZ2UoJGVtYWlsLCRpbmNsdWRlQnVuZGxlSW5mbz10cnVlKQoJewoJCSR1c2VyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGVtYWlsKTsKCgkJaWYgKCEkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyB1c2VyIGluZm9ybWF0aW9uIGZvciB7JGVtYWlsfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoKCQkkbWVyZ2VWYXJPYmogPSBuZXcgc3RkQ2xhc3MoKTsKCQkkbWVyZ2VWYXJPYmotPkZOQU1FID0gJHVzZXItPmdldEZpcnN0TmFtZSgpOwoJCSRtZXJnZVZhck9iai0+TE5BTUUgPSAkdXNlci0+Z2V0TGFzdE5hbWUoKTsKCgoJCWlmKCRpbmNsdWRlQnVuZGxlSW5mbykKCQl7CgkJCS8vc2V0IGFsbCBidW5kbGVzIGZhbHNlIHRvIHN0YXJ0CgkJCWZvcmVhY2ggKE1NX0J1bmRsZTo6Z2V0QnVuZGxlU2hvcnROYW1lcygpIGFzICRyZXFUYWc9PiRyZXFOYW1lKQoJCQl7CgkJCQkkcmVxVGFnID0gc3RydG91cHBlcigkcmVxVGFnKTsKCQkJCSRtZXJnZVZhck9iai0+JHJlcVRhZyA9ICJGQUxTRSI7CgkJCX0KCgkJCS8vbm93IHNldCB0aGUgb25lcyB0aGUgdXNlciBoYXMgZXF1YWwgdG8gdHJ1ZQoJCQkkYXBwbGllZEJ1bmRsZXMgPSAkdXNlci0+Z2V0QXBwbGllZEJ1bmRsZXMoKTsKCgkJCWZvcmVhY2ggKCRhcHBsaWVkQnVuZGxlcyBhcyAkYXBwbGllZEJ1bmRsZSkKCQkJewoJCQkJJGJ1bmRsZSA9ICRhcHBsaWVkQnVuZGxlLT5nZXRCdW5kbGUoKTsKCQkJCQkKCQkJCWlmKCRidW5kbGUtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkc2hvcnROYW1lID0gc3RydG91cHBlcigkYnVuZGxlLT5nZXRTaG9ydE5hbWUoKSk7CgkJCQkJJG1lcmdlVmFyT2JqLT4kc2hvcnROYW1lID0gIlRSVUUiOwoJCQkJfQoJCQl9CgkJfQoKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRtZXJnZVZhck9iaik7Cgl9CgoKCS8qKgoJICogQWRkcyBtZXJnZSB2YXJpYWJsZXMgdG8gdGhlIGxpc3QgaWYgdGhleSBhcmUgbm90IGFscmVhZHkgcHJlc2VudC4gVGhpcyBpcyBjcnVjaWFsLCBiZWNhdXNlIHRyeWluZyB0byB1cGRhdGUgYSBtZXJnZSB2YXIgdGhhdCBpc24ndAoJICogY3VycmVudGx5IGF0dGFjaGVkIHRvIHRoZSBsaXN0IHdpbGwgY2F1c2UgYW4gZXJyb3IuIEN1cnJlbnRseSB1c2VkIHRvIGFkZCBidW5kbGVzCgkgKgoJICogQHBhcmFtIFN0cmluZyAkbGlzdElkIFRoZSBpZCBvZiB0aGUgbGlzdCB0byBhZGQgdGhlIG1lcmdlIHZhcnMgdG8KCSAqIEBwYXJhbSAkaW5jbHVkZUJ1bmRsZUluZm8gaW5kaWNhdGVzIGlmIGJ1bmRsZSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcGFzc2VkCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBhZGRSZXF1aXJlZE1lcmdlVmFycygkbGlzdElkLCRpbmNsdWRlQnVuZGxlSW5mbz10cnVlKQoJewoJCSRtdkNhY2hlID0gJHRoaXMtPmdldExpc3RNZXJnZVZhcnMoJGxpc3RJZCk7CgkJaWYgKCRtdkNhY2hlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJG12Q2FjaGU7CgkJfQoJCSRtdkNhY2hlID0gJG12Q2FjaGUtPm1lc3NhZ2U7CgoJCWlmKCRpbmNsdWRlQnVuZGxlSW5mbykKCQl7CgkJCWZvcmVhY2ggKE1NX0J1bmRsZTo6Z2V0QnVuZGxlU2hvcnROYW1lcygpIGFzICRyZXFUYWc9PiRyZXFOYW1lKQoJCQl7CgkJCQkkcmVxVGFnID0gc3RydG91cHBlcigkcmVxVGFnKTsgLy9tYWlsY2hpbXAgb25seSBzdXBwb3J0cyB1cHBlcmNhc2UgdGFncwoJCQkJaWYgKCFpc3NldCgkbXZDYWNoZVskcmVxVGFnXSkpCgkJCQl7CgkJCQkJLy9hZGQgdGhpcyBtZXJnZVZhciB0byB0aGUgbGlzdAoJCQkJCSRqc29uT2JqZWN0ID0gbmV3IHN0ZENsYXNzKCk7CgkJCQkJJGpzb25PYmplY3QtPnRhZyA9ICRyZXFUYWc7CgkJCQkJJGpzb25PYmplY3QtPm5hbWUgPSAkcmVxTmFtZTsKCQkJCQkkanNvbk9iamVjdC0+dHlwZSA9ICJ0ZXh0IjsKCQkJCQkkanNvbkRhdGEgPSAkdGhpcy0+anNvbkVuY29kZSgkanNvbk9iamVjdCk7CgkJCQkJJHJlc3BvbnNlID0gJHRoaXMtPmNhbGxBcGkoIi9saXN0cy97JGxpc3RJZH0vbWVyZ2UtZmllbGRzIiwiUE9TVCIsJGpzb25EYXRhKTsKCQkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJCQl7CgkJCQkJCW5ldyBNTV9SZXNwb25zZSgiRXJyb3IgYWRkaW5nIHskcmVxVGFnfSBtZXJnZV92YXIgdG8gdGhlIGxpc3Qgd2l0aCBpZCB7JGxpc3RJZH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KCgoJLyoqCgkgKiBSZXR1cm5zIHRoZSBtZXJnZV92YXJzIGluIGVzc2VudGlhbGx5IHRoZSBzYW1lIGZvcm1hdCB0aGF0IG1haWxjaGltcCBkb2VzLCBleGNlcHQgdGhpcyB0aW1lIHRoZXkgYXJlIGtleWVkIGJ5IHRoZSB0YWcKCSAqCgkgKiBAcGFyYW0gU3RyaW5nICRsaXN0SWQgVGhlIGlkIG9mIHRoZSBsaXN0IHRvIHJldHJpZXZlIG1lcmdlX3ZhcnMgZm9yCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBnZXRMaXN0TWVyZ2VWYXJzKCRsaXN0SWQpCgl7CgkJJG12Q2FjaGUgPSBhcnJheSgpOwoJCSRtdlJlc3BvbnNlID0gJHRoaXMtPmNhbGxBcGkoIi9saXN0cy97JGxpc3RJZH0vbWVyZ2UtZmllbGRzIik7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRtdlJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgbWVyZ2UgdmFycyBmb3IgbGlzdCB3aXRoIGlkIHskbGlzdElkfSIpOwoJCX0KCQkkbXZzID0ganNvbl9kZWNvZGUoJG12UmVzcG9uc2UtPm1lc3NhZ2UpOwoJCWlmICghaXNzZXQoJG12cy0+bWVyZ2VfZmllbGRzKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkluY29ycmVjdCBmb3JtYXQgcmV0dXJuZWQgd2hlbiByZXRyaWV2aW5nIG1lcmdlIHZhcnMgZm9yIGxpc3Qgd2l0aCBpZCB7JGxpc3RJZH0iKTsKCQl9CgkJZm9yZWFjaCAoJG12cy0+bWVyZ2VfZmllbGRzIGFzICRtZXJnZUZpZWxkT2JqKQoJCXsKCQkJJG12Q2FjaGVbJG1lcmdlRmllbGRPYmotPnRhZ10gPSAkbWVyZ2VGaWVsZE9iajsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkbXZDYWNoZSk7Cgl9CgoKCXByb3RlY3RlZCBmdW5jdGlvbiBqc29uRW5jb2RlKCRvYmplY3QpCgl7CgkJaWYgKGZ1bmN0aW9uX2V4aXN0cygid3BfanNvbl9lbmNvZGUiKSkKCQl7CgkJCXJldHVybiB3cF9qc29uX2VuY29kZSgkb2JqZWN0KTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIGpzb25fZW5jb2RlKCRvYmplY3QpOwoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDb25maXJtT3B0SW4oJGRhdGEpCgl7CgkJcmV0dXJuICR0aGlzLT5jb25maXJtT3B0SW47Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc2V0Q29uZmlybU9wdEluKCRkYXRhKQoJewoJCSR0aGlzLT5jb25maXJtT3B0SW4gPSAkZGF0YTsKCX0KfQo=', 0, '2018-11-21 06:38:53'),
(57, 'twitterloginextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmNsYXNzIE1NX1R3aXR0ZXJMb2dpbkV4dGVuc2lvbiBleHRlbmRzIE1NX0Fic3RyYWN0U29jaWFsTG9naW5FeHRlbnNpb24KewkKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRhdXRvbG9hZERlcGVuZGVuY2llcz10cnVlLCRjb25maWdEYXRhPSIiKSAKCXsgCgkJLy90d2l0dGVyIHNwZWNpZmljIHNldHRpbmdzCgkJJHRoaXMtPnRva2VuID0gTU1fRXh0ZW5zaW9uOjokVFdJVFRFUl9MT0dJTl9UT0tFTjsKCQkkdGhpcy0+bGlzdGluZ0ltYWdlICA9ICJodHRwczovL21lbWJlcm1vdXNlLmNvbS9hc3NldHMvcGx1Z2luX2ltYWdlcy9sb2dvcy9leHRlbnNpb25zLXR3aXR0ZXIuanBnIjsKCQkkdGhpcy0+ZXh0ZW5zaW9uTmFtZSA9ICJMb2dpbiB3aXRoIFR3aXR0ZXIiOwoJCSR0aGlzLT5wcm92aWRlck5hbWUgID0gIlR3aXR0ZXIiOwoJCSR0aGlzLT5rZXlOYW1lICAgICAgID0gIkFQSSBLZXkiOwoJCSR0aGlzLT5zZWNyZXROYW1lICAgID0gIkFQSSBTZWNyZXQiOwoJCSR0aGlzLT5wcm92aWRlc0VtYWlsID0gZmFsc2U7CgkgCSR0aGlzLT5zdXBwb3J0QXJ0aWNsZVVybCA9ICJodHRwOi8vc3VwcG9ydC5tZW1iZXJtb3VzZS5jb20vc3VwcG9ydC9zb2x1dGlvbnMvYXJ0aWNsZXMvOTAwMDAyMDMwOS1jb25maWd1cmluZy10d2l0dGVyLWxvZ2luIjsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7Cgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiBnZXRIeWJyaWRBdXRoQ29uZmlnKCkKCXsKCQkkY29uZmlnID0gcGFyZW50OjpnZXRIeWJyaWRBdXRoQ29uZmlnKCk7CgkJJGNvbmZpZ1sicHJvdmlkZXJzIl0gPSBhcnJheSAoCgkJCQkkdGhpcy0+dG9rZW4gPT4gYXJyYXkgKAoJCQkJCQkiZW5hYmxlZCIgPT4gdHJ1ZSwKCQkJCQkJImtleXMiICAgID0+IGFycmF5ICggImtleSIgPT4gJHRoaXMtPmFwaUtleSwgInNlY3JldCIgPT4gJHRoaXMtPmFwaVNlY3JldCApCQkJCQkJCQoJCQkJKQoJCSk7CgkJcmV0dXJuICRjb25maWc7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdTY3JlZW4oKQoJewoJCSRjYWxsYmFja1VybCA9ICR0aGlzLT5saWJyYXJ5VXJsLiIvaW5kZXgucGhwP2hhdXRoLmRvbmU9VHdpdHRlciI7CgkJJHRoaXMtPmFkZGl0aW9uYWxJbmZvID0gIjx0cj4KCQkJCTx0ZCBOT1dSQVA+Q2FsbGJhY2sgVVJMPC90ZD4KCQkJCTx0ZCBOT1dSQVA+CgkJCQkJPHNwYW4gc3R5bGU9J2ZvbnQtZmFtaWx5OmNvdXJpZXI7IGZvbnQtc2l6ZToxMXB4Oyc+CgkJCQkJPGlucHV0IGlkPSdtbS10d2l0dGVyLWNhbGxiYWNrLXVybCcgdHlwZT0ndGV4dCcgcmVhZG9ubHkgdmFsdWU9J3skY2FsbGJhY2tVcmx9JyBzdHlsZT0nd2lkdGg6NjAwcHgnIG9uY2xpY2s9XCJqUXVlcnkoJyNtbS1nb29nbGUtY2FsbGJhY2stdXJsJykuZm9jdXMoKTsgalF1ZXJ5KCcjbW0tZ29vZ2xlLWNhbGxiYWNrLXVybCcpLnNlbGVjdCgpO1wiIC8+CgkJCQkJPC9zcGFuPgoJCQkJPC90ZD4KCQkJPC90cj5cbiI7CgkJcmV0dXJuIHBhcmVudDo6ZGlzcGxheUNvbmZpZ1NjcmVlbigpOwkKCX0KfQ==', 0, '2018-11-21 06:38:53'),
(58, 'affiliateproviderdialog', 'Y2xhc3MgTU1fQWZmaWxpYXRlUHJvdmlkZXJEaWFsb2cgewoJCglwdWJsaWMgJGRpYWxvZyA9ICIiOwoJcHVibGljICRjb250cm9scyA9ICIiOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJJHRoaXMtPmNvbnRyb2xzID0gPDw8Q29udHJvbHMKCQkJPGJ1dHRvbiBpZD0iYWZmaWxpYXRlLXByb3ZpZGVyLWNvbmZpZ3VyZSIgY2xhc3M9Im1tLXVpLWJ1dHRvbiBibHVlIiBvbkNsaWNrPSJtbWpzLnNob3dBZGRpdGlvbmFsT3B0aW9uc0RpYWxvZyhqUXVlcnkoJyNwcm92aWRlci1jb25maWctZm9ybSA6aW5wdXQnKS5zZXJpYWxpemVBcnJheSgpKTsgcmV0dXJuIGZhbHNlOyIgc3R5bGU9ImN1cnNvcjpwb2ludGVyIj5Db25maWd1cmU8L2J1dHRvbj4KCQkJPGJ1dHRvbiBpZD0icmVzZXQiIGNsYXNzPSJtbS11aS1idXR0b24iIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uQ2xpY2s9Im1tanMucHJvdmlkZXJPcHRpb25zUmVzZXQoKTsgcmV0dXJuIGZhbHNlOyIgc3R5bGU9ImN1cnNvcjpwb2ludGVyIj5SZXNldDwvYnV0dG9uPgpDb250cm9sczsKCX0KCQkKfQoK', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(59, 'limelightproduct', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0xpbWVMaWdodFByb2R1Y3QgZXh0ZW5kcyBNTV9FbnRpdHkKewkKCXByaXZhdGUgJG1tUHJvZHVjdElkID0gIiI7Cglwcml2YXRlICRsaW1lTGlnaHRQcm9kdWN0SWQgPSAiIjsKCXByaXZhdGUgJGxpbWVMaWdodFByb2R1Y3ROYW1lID0gIiI7Cglwcml2YXRlICRsaW1lTGlnaHRDYW1wYWlnbklkID0gIiI7Cglwcml2YXRlICRsaW1lTGlnaHRDYW1wYWlnbk5hbWUgPSAiIjsKCQoJcHJpdmF0ZSAkbGFzdExpbWVMaWdodENhbXBhaWduSWQgPSAiIjsKCXByaXZhdGUgJGxhc3RMaW1lTGlnaHRQcm9kdWN0SWQgPSAiIjsKCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfTElNRUxJR0hUX1BST0RVQ1RTLiIgV0hFUkUgaWQ9JyIuJHRoaXMtPmlkLiInOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5tbVByb2R1Y3RJZCA9ICRkYXRhLT5tZW1iZXJtb3VzZV9wcm9kdWN0X2lkOwoJCQkkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdElkID0gJGRhdGEtPmxpbWVsaWdodF9wcm9kdWN0X2lkOwoJCQkkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdE5hbWUgPSAkZGF0YS0+bGltZWxpZ2h0X3Byb2R1Y3RfbmFtZTsKCQkJJHRoaXMtPmxpbWVMaWdodENhbXBhaWduSWQgPSAkZGF0YS0+bGltZWxpZ2h0X2NhbXBhaWduX2lkOwoJCQkkdGhpcy0+bGltZUxpZ2h0Q2FtcGFpZ25OYW1lID0gJGRhdGEtPmxpbWVsaWdodF9jYW1wYWlnbl9uYW1lOwoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSAKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBoYXNFeGlzdGluZ1Byb2R1Y3RNYXBwaW5ncygkbGltZUxpZ2h0UHJvZHVjdElkLCAkbW1Qcm9kdWN0SWQsICRtYXBwaW5nSWQ9MCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJzZWxlY3QgY291bnQoKikgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9QUk9EVUNUUy4iCgkJCQkJIHdoZXJlIAoJCQkJCQlsaW1lbGlnaHRfcHJvZHVjdF9pZCA9JyIuJGxpbWVMaWdodFByb2R1Y3RJZC4iJyAgQU5EIAoJCQkJCQltZW1iZXJtb3VzZV9wcm9kdWN0X2lkICE9JyIuJG1tUHJvZHVjdElkLiInICBBTkQgCgkJCQkJCWlkIT0nIi4kbWFwcGluZ0lkLiInIAoJCQkJCQkJCSI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCXJldHVybiAkcm93LT50b3RhbD4wOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJlbW92ZUV4aXN0aW5nUHJvZHVjdE1hcHBpbmdzKCRsaW1lTGlnaHRQcm9kdWN0SWQsICRtYXBwaW5nSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9MSU1FTElHSFRfUFJPRFVDVFMuIiB3aGVyZSBsaW1lbGlnaHRfcHJvZHVjdF9pZD0nIi4kbGltZUxpZ2h0UHJvZHVjdElkLiInIEFORCBpZCE9JyIuJG1hcHBpbmdJZC4iJyAiOyAKCQkkd3BkYi0+cXVlcnkoJHNxbCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCFNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokUFlNVF9TRVJWSUNFX0xJTUVMSUdIVCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogTGltZSBMaWdodCBpcyBub3QgYWN0aXZlIGZvciB0aGlzIE1lbWJlck1vdXNlIGxpY2Vuc2UiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGRvVXBkYXRlID0gaXNzZXQoJHRoaXMtPmlkKSAmJiAkdGhpcy0+aWQgIT0gIiIgJiYgaW50dmFsKCR0aGlzLT5pZCkgPiAwOwoJCSAKCQlNTV9UcmFuc2FjdGlvbjo6YmVnaW4oKTsKCQl0cnkKCQl7CQoJCQkvLyBjaGVjayBpZiBjYW1wYWlnbi9wcm9kdWN0IHBhaXIgaXMgYWxyZWFkeSBzZXQKCQkJaWYoISRkb1VwZGF0ZSB8fCAoKCFlbXB0eSgkdGhpcy0+bGFzdExpbWVMaWdodENhbXBhaWduSWQpICYmICgkdGhpcy0+bGFzdExpbWVMaWdodENhbXBhaWduSWQgIT0gJHRoaXMtPmxpbWVMaWdodENhbXBhaWduSWQpKQoJCQkJfHwgKCFlbXB0eSgkdGhpcy0+bGFzdExpbWVMaWdodFByb2R1Y3RJZCkgJiYgKCR0aGlzLT5sYXN0TGltZUxpZ2h0UHJvZHVjdElkICE9ICR0aGlzLT5saW1lTGlnaHRQcm9kdWN0SWQpKSkpCgkJCXsKCQkJCSRzcWwgPSAiU0VMRUNUIG1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgRlJPTSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9QUk9EVUNUUy4iIFdIRVJFIGxpbWVsaWdodF9wcm9kdWN0X2lkPSciLiR0aGlzLT5saW1lTGlnaHRQcm9kdWN0SWQuIicgQU5EICI7CgkJCQkkc3FsIC49ICJsaW1lbGlnaHRfY2FtcGFpZ25faWQ9JyIuJHRoaXMtPmxpbWVMaWdodENhbXBhaWduSWQuIic7IjsKCQkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJCQoJCQkJaWYoJHJlc3VsdCkKCQkJCXsKCQkJCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRyZXN1bHQtPm1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQpOwoJCQkJCSRwcm9kdWN0TmFtZSA9ICgkcHJvZHVjdC0+aXNWYWxpZCgpKSA/ICRwcm9kdWN0LT5nZXROYW1lKCkgOiAiIjsKCQkJCQkJCgkJCQkJJGVycm9yTXNnID0gIlRoZSBMaW1lIExpZ2h0IHByb2R1Y3QgJ3skdGhpcy0+bGltZUxpZ2h0UHJvZHVjdE5hbWV9JyBpbiBjYW1wYWlnbiAneyR0aGlzLT5saW1lTGlnaHRDYW1wYWlnbk5hbWV9J1xuIjsKCQkJCQkkZXJyb3JNc2cgLj0gImlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIE1lbWJlck1vdXNlIHByb2R1Y3QgJ3skcHJvZHVjdE5hbWV9JyI7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZXJyb3JNc2csIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCQoJCQlpZighJGRvVXBkYXRlKSAKCQkJewkKCQkJCSRzcWwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9MSU1FTElHSFRfUFJPRFVDVFMuIiBzZXQgIiAuCgkJCSAJCQkiCW1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQ9JyVkJywiIC4KCQkJIAkJCSIJbGltZWxpZ2h0X3Byb2R1Y3RfaWQ9JyVkJywiIC4KCQkJIAkJCSIJbGltZWxpZ2h0X3Byb2R1Y3RfbmFtZT0nJXMnLCIgLgoJCQkgCQkJIglsaW1lbGlnaHRfY2FtcGFpZ25faWQ9JyVkJywiIC4KCQkJIAkJCSIJbGltZWxpZ2h0X2NhbXBhaWduX25hbWU9JyVzJyIgLgoJCQkgCQkJIiI7CgkJCX0KCQkJZWxzZSAKCQkJewkKCQkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfTElNRUxJR0hUX1BST0RVQ1RTLiIgc2V0ICIgLgoJCQkgCQkJIgltZW1iZXJtb3VzZV9wcm9kdWN0X2lkPSclZCcsIiAuCgkJCSAJCQkiCWxpbWVsaWdodF9wcm9kdWN0X2lkPSclZCcsIiAuCgkJCSAJCQkiCWxpbWVsaWdodF9wcm9kdWN0X25hbWU9JyVzJywiIC4KCQkJIAkJCSIJbGltZWxpZ2h0X2NhbXBhaWduX2lkPSclZCcsIiAuCgkJCSAJCQkiCWxpbWVsaWdodF9jYW1wYWlnbl9uYW1lPSclcyciIC4KCQkJIAkJCSIJd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyIgLgoJCQkgCQkJIiI7CgkJIAl9IAoJCSAJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPm1tUHJvZHVjdElkLCAkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdElkLCAkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdE5hbWUsIAoJCSAJCQkJCQkJCQkJJHRoaXMtPmxpbWVMaWdodENhbXBhaWduSWQsICR0aGlzLT5saW1lTGlnaHRDYW1wYWlnbk5hbWUpOwoJCSAJCgkJIAkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7IAoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkgCXsKCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBwcm9kdWN0IG1hcHBpbmciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkgCX0KCQkgCQoJCSAJaWYoISRkb1VwZGF0ZSkgCgkJIAl7CgkJIAkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkgCX0KCQl9CgkJY2F0Y2goRXhjZXB0aW9uICRleCkKCQl7CgkJIAlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHByb2R1Y3QgbWFwcGluZyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkgCgkJTU1fVHJhbnNhY3Rpb246OmNvbW1pdCgpOwoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0gCgkKCXB1YmxpYyBmdW5jdGlvbiBkZWxldGUoKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9QUk9EVUNUUy4iIFdIRVJFIGlkPSclZCcgTElNSVQgMSI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmlkKSk7CgkJCgkJaWYoJHJlc3VsdHMpIAoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKiogSEVMUEVSIE1FVEhPRFMgKiovCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEJ5TU1Qcm9kdWN0SWQoJHByb2R1Y3RJZCkKCXsKCQlpZiAoZW1wdHkoJHByb2R1Y3RJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX0xpbWVMaWdodFByb2R1Y3QoKTsKCQl9CgkJCgkJZ2xvYmFsICR3cGRiOwogCQkKCQkkc3FsID0gIlNFTEVDVCBpZCBGUk9NICIuTU1fVEFCTEVfTElNRUxJR0hUX1BST0RVQ1RTLiIgV0hFUkUgbWVtYmVybW91c2VfcHJvZHVjdF9pZD0nJXMnIExJTUlUIDE7IjsKCQkkbGxQcm9kdWN0SW5kZXggPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkc3FsLCRwcm9kdWN0SWQpKTsKCQkKCQlpZiAoIWlzX251bGwoJGxsUHJvZHVjdEluZGV4KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fTGltZUxpZ2h0UHJvZHVjdCgkbGxQcm9kdWN0SW5kZXgpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX0xpbWVMaWdodFByb2R1Y3QoKTsgLy9yZXR1cm4gYW4gaW52YWxpZCBlbnRpdHkgaWYgdGhlIHByb2R1Y3QgbWFwcGluZyBjb3VsZCBub3QgYmUgZm91bmQKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVbm1hcHBlZFByb2R1Y3RzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkc3FsID0gIlNFTEVDVCBwLiogZnJvbSAiLk1NX1RBQkxFX1BST0RVQ1RTLiIgcCBMRUZUIEpPSU4gIi5NTV9UQUJMRV9MSU1FTElHSFRfUFJPRFVDVFMuIiBsbHAgT04gKHAuaWQgPSBsbHAubWVtYmVybW91c2VfcHJvZHVjdF9pZCkgd2hlcmUgbGxwLm1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgSVMgTlVMTCBvcmRlciBieSBtZW1iZXJtb3VzZV9wcm9kdWN0X2lkIGFzYyI7CgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkKCQkkcHJvZHVjdHMgPSBhcnJheSgpOwoJCgkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCXsKCQkJJHByb2R1Y3RzWyRyb3ctPmlkXSA9ICRyb3ctPm5hbWU7CgkJfQoJCgkJcmV0dXJuICRwcm9kdWN0czsKCX0KCQoJCgkvKiogR0VUVEVSUy9TRVRURVJTICoqLwoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TU1Qcm9kdWN0SWQoJGlkKSAKCXsKCQkkdGhpcy0+bW1Qcm9kdWN0SWQgPSAkaWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRNTVByb2R1Y3RJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5tbVByb2R1Y3RJZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldExpbWVMaWdodFByb2R1Y3RJZCgkaWQpCgl7CgkJJHRoaXMtPmxhc3RMaW1lTGlnaHRQcm9kdWN0SWQgPSAkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdElkOwoJCSR0aGlzLT5saW1lTGlnaHRQcm9kdWN0SWQgPSAkaWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRMaW1lTGlnaHRQcm9kdWN0SWQoKQoJewoJCXJldHVybiAkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdElkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TGltZUxpZ2h0UHJvZHVjdE5hbWUoJHN0cikKCXsKCQkkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdE5hbWUgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGltZUxpZ2h0UHJvZHVjdE5hbWUoKQoJewoJCXJldHVybiAkdGhpcy0+bGltZUxpZ2h0UHJvZHVjdE5hbWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaW1lTGlnaHRDYW1wYWlnbklkKCRpZCkKCXsKCQkkdGhpcy0+bGFzdExpbWVMaWdodENhbXBhaWduSWQgPSAkdGhpcy0+bGltZUxpZ2h0Q2FtcGFpZ25JZDsKCQkkdGhpcy0+bGltZUxpZ2h0Q2FtcGFpZ25JZCA9ICRpZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldExpbWVMaWdodENhbXBhaWduSWQoKQoJewoJCXJldHVybiAkdGhpcy0+bGltZUxpZ2h0Q2FtcGFpZ25JZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldExpbWVMaWdodENhbXBhaWduTmFtZSgkc3RyKQoJewoJCSR0aGlzLT5saW1lTGlnaHRDYW1wYWlnbk5hbWUgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGltZUxpZ2h0Q2FtcGFpZ25OYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxpbWVMaWdodENhbXBhaWduTmFtZTsKCX0KfQo=', 0, '2018-11-21 06:38:53'),
(60, 'twocheckoutservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fU3RyaXBlU2VydmljZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTU1fUGF5bWVudFNlcnZpY2UgaW50ZXJmYWNlIHVzaW5nIFN0cmlwZSAod3d3LnN0cmlwZS5jb20pCiAqLwoKY2xhc3MgTU1fVHdvQ2hlY2tvdXRTZXJ2aWNlIGV4dGVuZHMgTU1fUGF5bWVudFNlcnZpY2UgaW1wbGVtZW50cyBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXIKewoJcHJvdGVjdGVkIHN0YXRpYyAkREVGQVVMVF9SRUZVTkRfQ0FURUdPUlkgPSA1OyAvLyAnb3RoZXInIGZyb20gMkNoZWNrb3V0Cglwcm90ZWN0ZWQgc3RhdGljICRERUZBVUxUX1JFRlVORF9DT01NRU5UICA9ICdNZW1iZXJNb3VzZSBSZWZ1bmQuJzsKCQoJcHJvdGVjdGVkICR0b2tlbiA9ICJUV09DSEVDS09VVCI7IAoJCglwcm90ZWN0ZWQgJHVzZXJuYW1lID0gYXJyYXkoCgkJInRlc3QiID0+IGFycmF5KAoJCQkic2VsbGVyIiA9PiAiIiwKCQkJImFwaSIgPT4gIiIsCgkJKSwgCgkJImxpdmUiID0+IGFycmF5KAoJCQkic2VsbGVyIiA9PiAiIiwKCQkJImFwaSIgPT4gIiIsCgkJKSwgCgkpOwoJCglwcm90ZWN0ZWQgJHBhc3N3b3JkID0gYXJyYXkoCgkJInRlc3QiID0+IGFycmF5KAoJCQkic2VsbGVyIiA9PiAiIiwKCQkJImFwaSIgPT4gIiIsCgkJKSwgCgkJImxpdmUiID0+IGFycmF5KAoJCQkic2VsbGVyIiA9PiAiIiwKCQkJImFwaSIgPT4gIiIsCgkJKSwgCgkpOwoJCglwcm90ZWN0ZWQgJHB1YmxpY0tleSA9IGFycmF5KAoJCSd0ZXN0JyA9PiAnJywgCgkJJ2xpdmUnID0+ICcnCgkpOwoJCglwcm90ZWN0ZWQgJHByaXZhdGVLZXkgPSBhcnJheSgKCQkndGVzdCcgPT4gJycsIAoJCSdsaXZlJyA9PiAnJwoJKTsKCQoJcHJvdGVjdGVkICRzZWxsZXJJZCA9IGFycmF5KAoJCSd0ZXN0JyA9PiAnJywgCgkJJ2xpdmUnID0+ICcnCgkpOwoJCglwcm90ZWN0ZWQgJHNlY3JldFdvcmQgPSBhcnJheSgKCQkndGVzdCcgPT4gJycsIAoJCSdsaXZlJyA9PiAnJwoJKTsKCQoJcHJvdGVjdGVkICR0ZXN0TW9kZSA9IGZhbHNlOwkKCQoJcHJvdGVjdGVkICRzdXBwb3J0ZWRDdXJyZW5jaWVzID0gYXJyYXkoIkFSUyIsIkFVRCIsIkJSTCIsIkdCUCIsIkNBRCIsIkRLSyIsCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiRVVSIiwiSEtEIiwiSU5SIiwiSUxTIiwiSlBZIiwiTFRMIiwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJNWVIiLCJNWE4iLCJOWkQiLCJOT0siLCJQSFAiLCJST04iLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlJVQiIsIlNHRCIsIlpBUiIsIlNFSyIsIkNIRiIsIlRSWSIsCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQUVEIiwiVVNEIik7CgkKCXByb3RlY3RlZCAkZXJyb3JDb2RlcyA9IGFycmF5KAoJCS8qKgoJCSAqIGh0dHBzOi8vd3d3LjJjaGVja291dC5jb20vZG9jdW1lbnRhdGlvbi9wYXltZW50LWFwaS9jcmVhdGUtc2FsZQoJCSAqLwoJCSIyMDAiID0+IGFycmF5KAoJCQkibWVzc2FnZSIgPT4gIlVuYWJsZSB0byBwcm9jZXNzIHRoZSByZXF1ZXN0IiwKCQkJImNhdXNlIiAgID0+ICJJbmNvcnJlY3QgYXR0cmlidXRlcyBvciBtYWxmb3JtZWQgSlNPTiBvYmplY3QuIiwKCQkJInR5cGUiICAgID0+ICJmYWlsZWQiLAoJCSksCgkJIjMwMCIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiVW5hdXRob3JpemVkIiwKCQkJImNhdXNlIiAgID0+ICJTZWxsZXIgdW5hdXRob3JpemVkIHRvIHVzZSB0aGUgQVBJIG9yIGluY29ycmVjdCBwcml2YXRlIGtleS4gSW52YWxpZCBUb2tlbiIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJIjQwMCIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiQmFkIHJlcXVlc3QgLSBwYXJhbWV0ZXIgZXJyb3IiLAoJCQkiY2F1c2UiICAgPT4gIk1pc3NpbmcgcmVxdWlyZWQgYXR0cmlidXRlcyBvciBpbnZhbGlkIHRva2VuLiIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJIjYwMCIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiQXV0aG9yaXphdGlvbiBGYWlsZWQiLAoJCQkiY2F1c2UiICAgPT4gIkNyZWRpdCBDYXJkIGZhaWxlZCB0byBhdXRob3JpemUuIiwKCQkJInR5cGUiICAgID0+ICJlcnJvciIsCgkJKSwKCQkiNjAxIiA9PiBhcnJheSgKCQkJIm1lc3NhZ2UiID0+ICJQYXltZW50IEF1dGhvcml6YXRpb24gRmFpbGVkOiAgUGxlYXNlIHVwZGF0ZSB5b3VyIGNhcmRzIGV4cGlyYXRpb24gZGF0ZSBhbmQgdHJ5IGFnYWluLCBvciB0cnkgYW5vdGhlciBwYXltZW50IG1ldGhvZC4iLAoJCQkiY2F1c2UiICAgPT4gIkludmFsaWQgRXhwaXJhdGlvbiBEYXRlLiIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJIjYwMiIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiUGF5bWVudCBBdXRob3JpemF0aW9uIEZhaWxlZDogIFBsZWFzZSB2ZXJpZnkgeW91ciBDcmVkaXQgQ2FyZCBkZXRhaWxzIGFyZSBlbnRlcmVkIGNvcnJlY3RseSBhbmQgdHJ5IGFnYWluLCBvciB0cnkgYW5vdGhlciBwYXltZW50IG1ldGhvZC4iLAoJCQkiY2F1c2UiICAgPT4gIkNyZWRpdCBDYXJkIGZhaWxlZCB0byBhdXRob3JpemUuIiwKCQkJInR5cGUiICAgID0+ICJlcnJvciIsCgkJKSwKCQkiNjAzIiA9PiBhcnJheSgKCQkJIm1lc3NhZ2UiID0+ICJZb3VyIGNyZWRpdCBjYXJkIGhhcyBiZWVuIGRlY2xpbmVkIGJlY2F1c2Ugb2YgdGhlIGN1cnJlbmN5IHlvdSBhcmUgYXR0ZW1wdGluZyB0byBwYXkgaW4uICBQbGVhc2UgY2hhbmdlIHRoZSBjdXJyZW5jeSBvZiB0aGUgdHJhbnNhY3Rpb24gb3IgdXNlIGEgZGlmZmVyZW50IGNhcmQgYW5kIHRyeSBhZ2Fpbi4iLAoJCQkiY2F1c2UiICAgPT4gIkludmFsaWQgQ3VycmVuY3kgZm9yIGNhcmQgdHlwZS4iLAoJCQkidHlwZSIgICAgPT4gImVycm9yIiwKCQkpLAoJCSI2MDQiID0+IGFycmF5KAoJCQkibWVzc2FnZSIgPT4gIlBheW1lbnQgQXV0aG9yaXphdGlvbiBGYWlsZWQ6IENyZWRpdCBpcyBub3QgZW5hYmxlZCBvbiB0aGlzIHR5cGUgb2YgY2FyZCwgcGxlYXNlIGNvbnRhY3QgeW91ciBiYW5rIGZvciBtb3JlIGluZm9ybWF0aW9uIG9yIHRyeSBhbm90aGVyIHBheW1lbnQgbWV0aG9kLiIsCgkJCSJjYXVzZSIgICA9PiAiQ3JlZGl0IENhcmQgZmFpbGVkIHRvIGF1dGhvcml6ZS4iLAoJCQkidHlwZSIgICAgPT4gImVycm9yIiwKCQkpLAoJCSI2MDUiID0+IGFycmF5KAoJCQkibWVzc2FnZSIgPT4gIlBheW1lbnQgQXV0aG9yaXphdGlvbiBGYWlsZWQ6IEludmFsaWQgdHJhbnNhY3Rpb24gdHlwZSBmb3IgdGhpcyBjcmVkaXQgY2FyZCwgcGxlYXNlIHVzZSBhIGRpZmZlcmVudCBjYXJkIGFuZCB0cnkgc3VibWl0dGluZyB0aGUgcGF5bWVudCBhZ2Fpbiwgb3IgY29udGFjdCB5b3VyIGJhbmsgZm9yIG1vcmUgaW5mb3JtYXRpb24uIiwKCQkJImNhdXNlIiAgID0+ICJJbnZhbGlkIHRyYW5zYWN0aW9uIHR5cGUgZm9yIGNyZWRpdCBjYXJkLiIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJIjYwNiIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiUGF5bWVudCBBdXRob3JpemF0aW9uIEZhaWxlZDogUGxlYXNlIHVzZSBhIGRpZmZlcmVudCBjcmVkaXQgY2FyZCBvciBwYXltZW50IG1ldGhvZCBhbmQgdHJ5IGFnYWluLCBvciBjb250YWN0IHlvdXIgYmFuayBmb3IgbW9yZSBpbmZvcm1hdGlvbi4iLAoJCQkiY2F1c2UiICAgPT4gIkNyZWRpdCBDYXJkIGZhaWxlZCB0byBhdXRob3JpemUuIiwKCQkJInR5cGUiICAgID0+ICJlcnJvciIsCgkJKSwKCQkiNjA3IiA9PiBhcnJheSgKCQkJIm1lc3NhZ2UiID0+ICJQYXltZW50IEF1dGhvcml6YXRpb24gRmFpbGVkOiBQbGVhc2UgdmVyaWZ5IHlvdXIgaW5mb3JtYXRpb24gYW5kIHRyeSBhZ2Fpbiwgb3IgdHJ5IGFub3RoZXIgcGF5bWVudCBtZXRob2QuIiwKCQkJImNhdXNlIiAgID0+ICJDcmVkaXQgQ2FyZCBmYWlsZWQgdG8gYXV0aG9yaXplLiIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJLyoqCgkJICogaHR0cHM6Ly93d3cuMmNoZWNrb3V0LmNvbS9kb2N1bWVudGF0aW9uL2FwaS9zYWxlcy9yZWZ1bmQtaW52b2ljZQoJCSAqLwoJCSJQQVJBTUVURVJfTUlTU0lORyIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiUmVxdWlyZWQgcGFyYW1ldGVyIG1pc3NpbmciLAoJCQkiY2F1c2UiICAgPT4gIlJlcXVpcmVkIHBhcmFtZXRlciBtaXNzaW5nIiwKCQkJInR5cGUiICAgID0+ICJmYWlsZWQiLAoJCSksCgkJIlBBUkFNRVRFUl9JTlZBTElEIiA9PiBhcnJheSgKCQkJIm1lc3NhZ2UiID0+ICJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIiLAoJCQkiY2F1c2UiICAgPT4gIkludmFsaWQgdmFsdWUgZm9yIHBhcmFtZXRlciIsCgkJCSJ0eXBlIiAgICA9PiAiZmFpbGVkIiwKCQkpLAoJCSJSRUNPUkRfTk9UX0ZPVU5EIiA9PiBhcnJheSgKCQkJIm1lc3NhZ2UiID0+ICJVbmFibGUgdG8gZmluZCByZWNvcmQiLAoJCQkiY2F1c2UiICAgPT4gIlVuYWJsZSB0byBmaW5kIHJlY29yZCIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJIkZPUkJJRERFTiIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiQWNjZXNzIGRlbmllZCB0byBzYWxlLiIsCgkJCSJjYXVzZSIgICA9PiAiQWNjZXNzIGRlbmllZCB0byBzYWxlLiIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJIkFNQklHVU9VUyIgPT4gYXJyYXkoCgkJCSJtZXNzYWdlIiA9PiAiQW1iaWd1b3VzIHJlcXVlc3QuIE11bHRpcGxlIGludm9pY2VzIG9uIHNhbGUuIGludm9pY2VfaWQgcGFyYW1ldGVyIHJlcXVpcmVkLiIsCgkJCSJjYXVzZSIgICA9PiAiQW1iaWd1b3VzIHJlcXVlc3QuIE11bHRpcGxlIGludm9pY2VzIG9uIHNhbGUuIGludm9pY2VfaWQgcGFyYW1ldGVyIHJlcXVpcmVkLiIsCgkJCSJ0eXBlIiAgICA9PiAiZXJyb3IiLAoJCSksCgkJIlRPT19MT1ciID0+IGFycmF5KAoJCQkibWVzc2FnZSIgPT4gIkFtb3VudCBtdXN0IGJlIGF0IGxlYXN0IDAuMDEiLAoJCQkiY2F1c2UiICAgPT4gIkFtb3VudCBtdXN0IGJlIGF0IGxlYXN0IDAuMDEiLAoJCQkidHlwZSIgICAgPT4gImVycm9yIiwKCQkpLAoJCSJOT1RISU5HX1RPX0RPIiA9PiBhcnJheSgKCQkJIm1lc3NhZ2UiID0+ICJJbnZvaWNlIHdhcyBhbHJlYWR5IHJlZnVuZGVkIiwKCQkJImNhdXNlIiAgID0+ICJJbnZvaWNlIHdhcyBhbHJlYWR5IHJlZnVuZGVkIiwKCQkJInR5cGUiICAgID0+ICJlcnJvciIsCgkJKSwKCQkiVE9PX0hJR0giID0+IGFycmF5KAoJCQkibWVzc2FnZSIgPT4gIkFtb3VudCBncmVhdGVyIHRoYW4gcmVtYWluaW5nIGJhbGFuY2Ugb24gaW52b2ljZSIsCgkJCSJjYXVzZSIgICA9PiAiQW1vdW50IGdyZWF0ZXIgdGhhbiByZW1haW5pbmcgYmFsYW5jZSBvbiBpbnZvaWNlIiwKCQkJInR5cGUiICAgID0+ICJlcnJvciIsCgkJKSwKCQkiVE9PX0xBVEUiID0+IGFycmF5KAoJCQkibWVzc2FnZSIgPT4gIkludm9pY2UgdG9vIG9sZCB0byByZWZ1bmQiLAoJCQkiY2F1c2UiICAgPT4gIkludm9pY2UgdG9vIG9sZCB0byByZWZ1bmQiLAoJCQkidHlwZSIgICAgPT4gImVycm9yIiwKCQkpLAoJKTsKCgkKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRhdXRvbG9hZD10cnVlKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJGF1dG9sb2FkKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gbG9hZERlcGVuZGVuY2llcygpCgl7CgkJcmVxdWlyZV9vbmNlKE1NX0xJQl9ESVIuIi8yY2hlY2tvdXQvVHdvY2hlY2tvdXQucGhwIik7Cgl9CQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsKCkgCgl7IAoJCXBhcmVudDo6aW5zdGFsbCgpOwoJCQoJCSRzcWwgPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfVFdPQ0hFQ0tPVVRfQ0hBUkdFUy4iIChcbiIuCgkJCQkiaWQgYmlnaW50KDIwKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCxcbiIuCgkJCQkib3JkZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkib3JkZXJfaXRlbV9pZCBiaWdpbnQoMjApIE5VTEwsXG4iLgoJCQkJImNoYXJnZV9pZCB2YXJjaGFyKDI1NSkgQ09MTEFURSB1dGY4X2JpbixcbiIuCgkJCQkiY3VzdG9tZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkiYW1vdW50IGRlY2ltYWwoMTAsMikgTk9UIE5VTEwsXG4iLgoJCQkJImN1cnJlbmN5IGNoYXIoMykgTk9UIE5VTEwgREVGQVVMVCAndXNkJyxcbiIuCgkJCQkidHJhbnNhY3Rpb25fZGF0ZSBkYXRldGltZSBOT1QgTlVMTCxcbiIuCgkJCQkiUFJJTUFSWSBLRVkgIChpZCksXG4iLgoJCQkJIktFWSBtbV9zdHJpcGVfY2hhcmdlX2NoYXJnZV9pZF9pZHggKGNoYXJnZV9pZClcbiIuCgkJCQkiKTtcbiI7CgoJCSRzcWwgLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX1RXT0NIRUNLT1VUX1dFQkhPT0tTLiIgKFxuIi4KCQkJCSJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSJ3ZWJob29rX2lkIHZhcmNoYXIoMjU1KSxcbiIuCgkJCQkid2ViaG9va19kYXRhIGxvbmd0ZXh0LFxuIi4KCQkJCSJkYXRlX3JlY2VpdmVkIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKGlkKVxuIi4KCQkJCSIpO1xuIjsKCQkKCQlkYkRlbHRhKCRzcWwpOwoJfQoJCgkKCS8qKgoJICogUmVwb3J0IHRoZSBmZWF0dXJlcyB0aGUgU3RyaXBlIHNlcnZpY2Ugc3VwcG9ydHMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN1cHBvcnRzRmVhdHVyZSgpCgkgKgoJICogQHBhcmFtIGludGVnZXIgJGZlYXR1cmVDb25zdCBhIGNvbnN0IGFzIGRlZmluZWQgaW4gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlcwoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3Qgc3VwcG9ydGVkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdXBwb3J0c0ZlYXR1cmUoJGZlYXR1cmVDb25zdCkKCXsKCQkvLyRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OkNBUkRfT05fRklMRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpPTlNJVEVfU0VSVklDRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDT1VQT05TOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OlRPS0VOX0VYQ0hBTkdFOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok1PRElGWV9SRUJJTExfREFURTsKCQlyZXR1cm4gaW5fYXJyYXkoJGZlYXR1cmVDb25zdCwkc3VwcG9ydGVkLHRydWUpOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgaHRtbCB0aGF0IHdpbGwgYmUgdXNlZCBvbiB0aGUgcGF5bWVudCBtZXRob2Qgc2V0dGluZ3Mgc2NyZWVuIGZvciBjb25maWd1cmluZyBTdHJpcGUKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmRpc3BsYXlDb25maWdPcHRpb25zKCkKCSAqIAoJICogQHJldHVybiBTdHJpbmcgY29udGFpbmluZyB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cgaHRtbAoJICovCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJewoJCSRjb25maWdfb3B0aW9ucyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS90d29jaGVja291dF9jb25maWcuaHRtbC5waHAiLCR0aGlzKTsKCQlyZXR1cm4gJGNvbmZpZ19vcHRpb25zOwoJfQoJCgkKCS8qKgoJICogVmFsaWRhdGVzIGFuZCBjb25maWd1cmVzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc2V0dGluZ3MgaW5mb3JtYXRpb24gZ2VuZXJhdGVkIGJ5IHN1Ym1pc3Npb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gZGlhbG9nCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpwcm9jZXNzQ29uZmlnT3B0aW9ucygpCgkgKgoJICogQHBhcmFtICRwb3N0IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGRhdGEgcG9zdGVkIGZyb20gdGhlIHBheW1lbnQgbWV0aG9kcyBzZXR0aW5ncyBzY3JlZW4KCSAqIEByZXR1cm4gQW4gTU1fUmVzcG9uc2Ugb2YgdHlwZSBNTV9SZXNwb25zZTo6U1VDQ0VTUyBpbmRpY2F0aW5nIHN1Y2Nlc3NmdWwgdmFsaWRhdGlvbiBhbmQgYXNzaWdtZW50LiBPbiBlcnJvciwgdGhlIHR5cGUgd2lsbCBiZSBNTV9SZXNwb25zZTo6RVJST1IgYW5kIHRoZSBtZXNzYWdlIHdpbGwgY29udGFpbiB0aGUgZXJyb3IgbWVzc2FnZXMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NDb25maWdPcHRpb25zKCRwb3N0KSAKCXsgCQoJCSRhY3RpdmUgPSAoaXNzZXQoJHBvc3RbJ29uc2l0ZV9wYXltZW50X3NlcnZpY2UnXSkgJiYgKHN0cnRvbG93ZXIoJHRoaXMtPmdldFRva2VuKCkpID09ICRwb3N0WydvbnNpdGVfcGF5bWVudF9zZXJ2aWNlJ10pKTsKCQkkdGhpcy0+c2V0QWN0aXZlKCRhY3RpdmUpOwoJCQoJCWlmICgkYWN0aXZlKQoJCXsKCQkJJHRoaXMtPmluc3RhbGwoKTsKCQkJJGNvbmZpZyA9IGlzc2V0KCRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsndHdvY2hlY2tvdXQnXSkgPyAkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ3R3b2NoZWNrb3V0J10gOiBhcnJheSgpOwoJCQkkZW1wdHlfZXJyb3JzID0gIiI7CgkJCSRjb25maWdbJ3Rlc3RfbW9kZSddID0gaXNzZXQoJGNvbmZpZ1sndGVzdF9tb2RlJ10pID8gKGJvb2wpJGNvbmZpZ1sndGVzdF9tb2RlJ10gOiBmYWxzZTsKCQkJCgkJCWZvcmVhY2ggKCRjb25maWcgYXMgJGsgPT4gJHYpCgkJCXsKICAJCQkJaWYgKCRrID09ICd0ZXN0X21vZGUnKQogIAkJCQl7CiAgICAJCQkJY29udGludWU7CiAgCQkJCX0KICAJCQkKICAJCQkJaWYgKCEkdikKICAJCQkJewogICAgCQkJCSRlbXB0eV9lcnJvcnMgLj0gIjJDaGVja291dDogUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHRoZSAiIC4gdWNmaXJzdChzdHJfcmVwbGFjZSgiXyIsICIgIiwgJGspIC4gIlxuIik7CiAgCQkJCX0KCQkJfQoJCQkKCQkJLyoqCiAgCQkgCSogQXV0aGVudGljYXRlIFVzZXIgaW5wdXQKICAJCSAJKi8KCSAgICAgIHRyeQoJICAgICAgewoJICAgICAgCS8qKgoJICAgICAgICAgKiBBdXRoZW50aWNhdGVzIGFjY2VzcyB0byBBZG1pbiBBUEkuIFVzZXJuYW1lICYgUGFzc3dvcmQgYXJlIG9ubHkgbmVlZGVkCgkgICAgICAgICAqLwoJCQkJVHdvY2hlY2tvdXQ6OnVzZXJuYW1lKCRjb25maWdbJGNvbmZpZ1sndGVzdF9tb2RlJ10gPyAndGVzdCcgOiAnbGl2ZSddWydhcGknXVsndXNlcm5hbWUnXSk7CgkJCQlUd29jaGVja291dDo6cGFzc3dvcmQoJGNvbmZpZ1skY29uZmlnWyd0ZXN0X21vZGUnXSA/ICd0ZXN0JyA6ICdsaXZlJ11bJ2FwaSddWydwYXNzd29yZCddKTsKCQkJCVR3b2NoZWNrb3V0OjpzYW5kYm94KCRjb25maWdbJ3Rlc3RfbW9kZSddID09IDEpOwoJCQkJJGNvbXBhbnkgPSBUd29jaGVja291dF9Db21wYW55OjpyZXRyaWV2ZSgpOwoJICAgICAgfQoJICAgICAgY2F0Y2ggKFR3b2NoZWNrb3V0X0Vycm9yICRlKQoJICAgICAgewoJICAgICAgCSRlbXB0eV9lcnJvcnMgLj0gIjJDaGVja291dCBBUEkgQXV0aGVudGljYXRpb246ICIgLiAkZS0+Z2V0TWVzc2FnZSgpOwoJICAgICAgfQoJCQkKCQkJaWYgKCRlbXB0eV9lcnJvcnMgIT0gIiIpCgkJCXsJCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlbXB0eV9lcnJvcnMsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCS8vaWYgaGVyZSwgdGhhdCBtZWFucyB0aGV5IGFyZSBhbGwgb2sKCQkJJHRoaXMtPnNldFRlc3RNb2RlKCRjb25maWdbJ3Rlc3RfbW9kZSddKTsKCQkJLy8kdGhpcy0+c2V0VXNlcm5hbWUoJGNvbmZpZ1sndGVzdCddWydzZWxsZXInXVsndXNlcm5hbWUnXSwgJ3Rlc3QnLCAnc2VsbGVyJyk7CgkJCSR0aGlzLT5zZXRVc2VybmFtZSgkY29uZmlnWyd0ZXN0J11bJ2FwaSddWyd1c2VybmFtZSddLCAndGVzdCcsICdhcGknKTsKCQkJLy8kdGhpcy0+c2V0VXNlcm5hbWUoJGNvbmZpZ1snbGl2ZSddWydzZWxsZXInXVsndXNlcm5hbWUnXSwgJ2xpdmUnLCAnc2VsbGVyJyk7CgkJCSR0aGlzLT5zZXRVc2VybmFtZSgkY29uZmlnWydsaXZlJ11bJ2FwaSddWyd1c2VybmFtZSddLCAnbGl2ZScsICdhcGknKTsKCQkJLy8kdGhpcy0+c2V0UGFzc3dvcmQoJGNvbmZpZ1sndGVzdCddWydzZWxsZXInXVsncGFzc3dvcmQnXSwgJ3Rlc3QnLCAnc2VsbGVyJyk7CgkJCSR0aGlzLT5zZXRQYXNzd29yZCgkY29uZmlnWyd0ZXN0J11bJ2FwaSddWydwYXNzd29yZCddLCAndGVzdCcsICdhcGknKTsKCQkJLy8kdGhpcy0+c2V0UGFzc3dvcmQoJGNvbmZpZ1snbGl2ZSddWydzZWxsZXInXVsncGFzc3dvcmQnXSwgJ2xpdmUnLCAnc2VsbGVyJyk7CgkJCSR0aGlzLT5zZXRQYXNzd29yZCgkY29uZmlnWydsaXZlJ11bJ2FwaSddWydwYXNzd29yZCddLCAnbGl2ZScsICdhcGknKTsKCQkJJHRoaXMtPnNldFB1YmxpY0tleSgkY29uZmlnWyd0ZXN0J11bJ3B1YmxpY19rZXknXSwgJ3Rlc3QnKTsKCQkJJHRoaXMtPnNldFB1YmxpY0tleSgkY29uZmlnWydsaXZlJ11bJ3B1YmxpY19rZXknXSwgJ2xpdmUnKTsKCQkJJHRoaXMtPnNldFByaXZhdGVLZXkoJGNvbmZpZ1sndGVzdCddWydwcml2YXRlX2tleSddLCAndGVzdCcpOwoJCQkkdGhpcy0+c2V0UHJpdmF0ZUtleSgkY29uZmlnWydsaXZlJ11bJ3ByaXZhdGVfa2V5J10sICdsaXZlJyk7CgkJCSR0aGlzLT5zZXRTZWxsZXJJZCgkY29uZmlnWyd0ZXN0J11bJ3NlbGxlcl9pZCddLCAndGVzdCcpOwoJCQkkdGhpcy0+c2V0U2VsbGVySWQoJGNvbmZpZ1snbGl2ZSddWydzZWxsZXJfaWQnXSwgJ2xpdmUnKTsKCQkJJHRoaXMtPnNldFNlY3JldFdvcmQoJGNvbmZpZ1sndGVzdCddWydzZWNyZXRfd29yZCddLCAndGVzdCcpOwoJCQkkdGhpcy0+c2V0U2VjcmV0V29yZCgkY29uZmlnWydsaXZlJ11bJ3NlY3JldF93b3JkJ10sICdsaXZlJyk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIFJlc3BvbmQgdG8gU3RyaXBlIHdlYmhvb2tzLiBVc2VkIHRvIGRldGVjdCByZWZ1bmRzIGlzc3VlZCBieSB0aGUgb3RoZXIgc2lkZQoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6cHJvY2Vzc05vdGlmaWNhdGlvbigpCgkgKgoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IFRoZSAkX1BPU1Qgc3VwZXJnbG9iYWwgaWYgaXQgZXhpc3RzLCBhIGJsYW5rIGFycmF5IGlmIG5vdC4gSWdub3JlZCBpbiB0aGlzIGltcGxlbWVudGF0aW9uIGluIGZhdm9yIG9mIHBocDovL2lucHV0CgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyB0aGUgc3RhdHVzIG9mIGFueSBvcGVyYXRpb25zIHBlcmZvcm1lZCBpbiB0aGUgbWV0aG9kLiBUaGUgbWVzc2FnZSBmaWVsZCBvZiB0aGUgcmVzcG9uc2Ugd2lsbCBiZSBlY2hvZWQgdG8gdGhlIHNjcmlwdCBjYWxsZXIgdmVyYmF0aW0KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NOb3RpZmljYXRpb24oJHJlcXVlc3QpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkd2ViaG9vayA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJF9QT1NUIGFzICRrID0+ICR2KSB7CgkJICAgICR3ZWJob29rWyRrXSA9ICR2OwoJCX0KCgkJJHBhc3NiYWNrID0gVHdvY2hlY2tvdXRfTm90aWZpY2F0aW9uOjpjaGVjaygkd2ViaG9vaywgJHRoaXMtPmdldFNlY3JldFdvcmQoJHRoaXMtPmdldFRlc3RNb2RlKCkgPyAidGVzdCIgOiAibGl2ZSIpKTsKCgkJaWYoJHBhc3NiYWNrWydyZXNwb25zZV9jb2RlJ10gIT0gIlN1Y2Nlc3MiKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRwYXNzYmFja1sncmVzcG9uc2VfbWVzc2FnZSddKTsKCQl9CgkJCgkJaWYgKGlzc2V0KCR3ZWJob29rWydtZXNzYWdlX2lkJ10pICYmICR0aGlzLT5pc0R1cGxpY2F0ZVdlYmhvb2soJHdlYmhvb2tbJ21lc3NhZ2VfaWQnXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkR1cGxpY2F0ZSB3ZWJob29rIik7CgkJfQoJCQoJCS8vbG9nIHRoZSB3ZWJob29rCgkJJHdwZGItPmluc2VydCgKCQkJTU1fVEFCTEVfVFdPQ0hFQ0tPVVRfV0VCSE9PS1MsIAoJCQlhcnJheSgKCQkJCSJ3ZWJob29rX2lkIiAJID0+ICR3ZWJob29rWydtZXNzYWdlX2lkJ10sIAoJCQkJIndlYmhvb2tfZGF0YSIgID0+IHNlcmlhbGl6ZSgkd2ViaG9vayksIAoJCQkJImRhdGVfcmVjZWl2ZWQiID0+IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpCgkJCSkKCQkpOwoJCQoJCWlmICghaXNzZXQoJHdlYmhvb2tbJ21lc3NhZ2VfdHlwZSddKSkKCQl7CgkJCS8vd2UgZG9uJ3QgcmVjb2duaXplIHRoaXMgd2ViaG9vaywgc28ganVzdCBpZ25vcmUgaXQKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJfQoJCQkJCgkJc3dpdGNoICgkd2ViaG9va1snbWVzc2FnZV90eXBlJ10pCgkJewoJCQljYXNlICdSRUZVTkRfSVNTVUVEJzoKCQkJCgkJCQkkaXRlbUNvdW50ID0gJHdlYmhvb2tbJ2l0ZW1fY291bnQnXTsKCQkJCQoJCQkJLy8gUGFydGlhbCBSZWZ1bmQgb3Igbm90IGEgcmVmdW5kIGF0IGFsbCwgaWdub3JlIGZvciBub3cKCQkJCWlmKCR3ZWJob29rWyJpdGVtX25hbWVfeyRpdGVtQ291bnR9Il0gPT0gIlBhcnRpYWwgUmVmdW5kIiB8fCAkd2ViaG9va1siaXRlbV90eXBlX3skaXRlbUNvdW50fSJdICE9ICJyZWZ1bmQiKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJfQoJCQkKCQkJCSR0cmFuc2FjdGlvbkxvb2t1cFNRTCA9ICIKCQkJCQlTRUxFQ1QgCgkJCQkJdC5pZCBhcyB0cmFuc2FjdGlvbl9pZCAKCQkJCQlGUk9NICIgLiBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cgLiAiIHQgCgkJCQkJTEVGVCBKT0lOICgiIC4gTU1fVEFCTEVfVFdPQ0hFQ0tPVVRfQ0hBUkdFUyAuICIgYykgCgkJCQkJT04gdC5vcmRlcl9pZCA9IGMub3JkZXJfaWQKCQkJCQlXSEVSRSB0LnBheW1lbnRfc2VydmljZV9pZCA9ICVzIAoJCQkJCUFORCAoCgkJCQkJCXQudHJhbnNhY3Rpb25fdHlwZSA9ICVzIE9SIAoJCQkJCQl0LnRyYW5zYWN0aW9uX3R5cGUgPSAlcwoJCQkJCSkgCgkJCQkJQU5EIHQucGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCA9IGMuaWQgCgkJCQkJQU5EIGMuY2hhcmdlX2lkID0gJXMgCgkJCQkJQU5EIHQucmVmdW5kX2lkIElTIE5VTEwKCQkJCSI7CgkJCQkJCgkJCQkkY2hhcmdlSW5mbyA9IAkkd3BkYi0+Z2V0X3JvdygKCQkJCQkJCQkJCSR3cGRiLT5wcmVwYXJlKAoJCQkJCQkJCQkJCSR0cmFuc2FjdGlvbkxvb2t1cFNRTCwKCQkJCQkJCQkJCQkkdGhpcy0+Z2V0SWQoKSwKCQkJCQkJCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCwgCgkJCQkJCQkJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULAoJCQkJCQkJCQkJCSR3ZWJob29rWydzYWxlX2lkJ10KCQkJCQkJCQkJCSkKCQkJCQkJCQkJKTsKCQkJCQoJCQkJaWYgKCRjaGFyZ2VJbmZvICE9IG51bGwpCgkJCQl7CgkJCQkJJHJlZnVuZFJlc3BvbnNlID0gJHRoaXMtPl9yZWZ1bmRUcmFuc2FjdGlvbigkY2hhcmdlSW5mby0+dHJhbnNhY3Rpb25faWQsIGZhbHNlKTsKCQkJCX0KCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQkvL3dlIGRvbid0IHJlY29nbml6ZSB0aGlzIHdlYmhvb2ssIHNvIGp1c3QgaWdub3JlIGl0CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBEZXRlY3RzIGlmIHRoZSB3ZWJob29rIHdpdGggdGhlIHN1cHBsaWVkIGlkIGhhcyBiZWVuIHByb2Nlc3NlZCBiZWZvcmUKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkd2ViaG9va0lkCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGlzIGlzIGEgZHVwbGljYXRlIGlkLCBmYWxzZSBvdGhlcndpc2UKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBpc0R1cGxpY2F0ZVdlYmhvb2soJHdlYmhvb2tJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGNvdW50ID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoIlNFTEVDVCBjb3VudCgqKSBGUk9NICIuTU1fVEFCTEVfVFdPQ0hFQ0tPVVRfV0VCSE9PS1MuIiBXSEVSRSB3ZWJob29rX2lkPSVzIiwkd2ViaG9va0lkKSk7CgkJcmV0dXJuICghaXNfbnVsbCgkY291bnQpICYmICgkY291bnQ+MCkpOwoJfQoJCgkKCS8qKgoJICogQ2hhcmdlIGFuIG9yZGVyCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGNoYXJnZQoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyBUaGUgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24gdG8gdXNlIGluIGNoYXJnaW5nIHRoZSBvcmRlcgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXR1cyBvZiB0aGUgY2hhcmdlIGF0dGVtcHQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNoYXJnZU9yZGVyKE1NX09yZGVyICRvcmRlciwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsICR2YWxpZGF0ZT10cnVlKSAKCXsgCgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRwYXJlbnRSZXNwb25zZSA9IHBhcmVudDo6Y2hhcmdlT3JkZXIoJG9yZGVyLCRjYXJkSW5mbywkdmFsaWRhdGUpOwoJCWlmICghTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCRwYXJlbnRSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJHBhcmVudFJlc3BvbnNlOwoJCX0KCQkKCQkkdHJ5Q2FyZE9uRmlsZSA9IGlzX251bGwoJGNhcmRJbmZvKTsKCQlpZiAoISR0cnlDYXJkT25GaWxlKSAKCQl7CgkJCSRjYXJkVmFsaWRhdGlvbiA9ICRjYXJkSW5mby0+dmFsaWRhdGUoKTsKCQkJaWYgKCRjYXJkVmFsaWRhdGlvbiAhPT0gdHJ1ZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY2hhcmdlIG9yZGVyOiB7JGNhcmRWYWxpZGF0aW9ufSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlpZiAoJG9yZGVyLT5nZXRUb3RhbCgpID4gMC4wMCkKCQl7CQoJCQkkY2hhcmdlUmVzcG9uc2UgPSAkdGhpcy0+c2VuZDJDT0NoYXJnZSgkb3JkZXIsICRjYXJkSW5mbyk7CgkJCQoJCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY2hhcmdlUmVzcG9uc2UpIHx8IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRmFpbGVkKCRjaGFyZ2VSZXNwb25zZSkpCgkJCXsKCQkJCXJldHVybiAkY2hhcmdlUmVzcG9uc2U7CgkJCX0KCQkJCgkJCS8vbG9nIHRvIHRyYW5zYWN0aW9ucyB0YWJsZXMKCQkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJJG9yZGVySXRlbUlkID0gbnVsbDsKCQkJaWYgKGNvdW50KCRwcm9kdWN0SXRlbXMpID09IDEpCgkJCXsKCQkJCSRvcmRlckl0ZW0gICA9IHJlc2V0KCRwcm9kdWN0SXRlbXMpOwoJCQkJJG9yZGVySXRlbUlkID0gJG9yZGVySXRlbS0+Z2V0SWQoKTsKCQkJfQoJCQkKCQkJJGNoYXJnZU9iamVjdCA9ICRjaGFyZ2VSZXNwb25zZS0+Z2V0TWVzc2FnZSgpOwoJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0iOwoJCQkkdHJhbnNhY3Rpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSRpbnNlcnREYXRhID0gYXJyYXkoIAoJCQkJIm9yZGVyX2lkIiAgICAgICAgID0+ICRvcmRlci0+Z2V0SWQoKSwKCQkJCSJvcmRlcl9pdGVtX2lkIiAgICA9PiAkb3JkZXJJdGVtSWQsCgkJCQkiY2hhcmdlX2lkIiAgICAgCSA9PiAkY2hhcmdlT2JqZWN0WydyZXNwb25zZSddWydvcmRlck51bWJlciddLAoJCQkJImN1c3RvbWVyX2lkIiAgICAgID0+ICRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKSwKCQkJCSJhbW91bnQiICAgICAgICAgICA9PiAkb3JkZXItPmdldFRvdGFsKCksCgkJCQkiY3VycmVuY3kiICAgICAgICAgPT4gJG9yZGVyLT5nZXRDdXJyZW5jeSgpLAoJCQkJInRyYW5zYWN0aW9uX2RhdGUiID0+ICR0cmFuc2FjdGlvbkRhdGUKCQkJKTsKCQkJJHdwZGItPmluc2VydChNTV9UQUJMRV9UV09DSEVDS09VVF9DSEFSR0VTLCRpbnNlcnREYXRhKTsKCQkJJHR3b0NoZWNrb3V0Q2hhcmdlSWQgPSAkd3BkYi0+aW5zZXJ0X2lkOwoJCQkKCQkJLy9ub3cgbG9nIHRoZSBwYXltZW50IGluIHRoZSB0cmFuc2FjdGlvbnMgdGFibGUKCQkJJHJlcyA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbUlkLCRvcmRlci0+Z2V0VG90YWwoKSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCx0cnVlLCR0aGlzLT5pZCwkdHdvQ2hlY2tvdXRDaGFyZ2VJZCwkdHJhbnNhY3Rpb25EYXRlKTsKCQl9CgkJCgkJLy9yZWFjaGluZyB0aGlzIHBvaW50IG1lYW5zIHRoZSBzdWJzY3JpcHRpb25zIHdlcmUgc2NoZWR1bGVkIGFuZCB0aGUgaW5pdGlhbCBjaGFyZ2Ugd2FzIHN1Y2Nlc3NmdWwKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIFNlbmQgYSBjaGFyZ2UgdG8gU3RyaXBlLCBhbmQgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgdW5maWx0ZXJlZCByZXN1bHQuCgkgKiAKCSAqIEBwYXJhbSBvYmplY3QgICRvcmRlciBUaGUgZW50aXJlIE1NX09yZGVyIG9iamVjdCBzbyB3ZSBjYW4gcmVmZXJlbmNlIGRhdGEgbmVlZGVkCgkgKiBAcGFyYW0gc3RyaW5nICAkY2FyZEluZm8gVGhlIGNyZWRpdCBjYXJkIHRvIGNoYXJnZQoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgT24gc3VjY2VzcywgY29udGFpbnMgdGhlIHN0cmlwZSBjaGFyZ2Ugb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBnYXRld2F5LCBvbiBmYWlsdXJlIGNvbnRhaW5zIGFuIGVycm9yIG1lc3NhZ2UKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNlbmQyQ09DaGFyZ2UoJG9yZGVyLCAkY2FyZEluZm8gPSBudWxsKQoJewkKCQlpZiAoaXNfbnVsbCgkb3JkZXItPmdldEN1cnJlbmN5KCkpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogTm8gY3VycmVuY3kgd2FzIHNlbGVjdGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoaXNfbnVsbCgkY2FyZEluZm8pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogTm8gcGF5bWVudCBtZXRob2Qgd2FzIHByb3ZpZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoaXNfbnVsbCgkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCkpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogTm8gYmlsbGluZyBhZGRyZXNzIHdhcyBwcm92aWRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCFpc19udW1lcmljKCRvcmRlci0+Z2V0VG90YWwoKSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY2hhcmdlOiBSZWNlaXZlZCBhIG5vbi1udW1lcmljIGFtb3VudCB0byBjaGFyZ2UiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRhbW91bnQgPSBpbnR2YWwoc3RydmFsKCRvcmRlci0+Z2V0VG90YWwoKSAqIDEwMCkpOwoJCQoJCWlmICghaXNfaW50KCRhbW91bnQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogUmVjZWl2ZWQgYW4gaW1wcm9wZXJseSBmb3JtYXR0ZWQgYW1vdW50IHRvIGNoYXJnZSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNoYXJnZV9kYXRhID0gYXJyYXkoKTsKCQkkY2hhcmdlX2RhdGFbJ21lcmNoYW50T3JkZXJJZCddID0gJG9yZGVyLT5nZXRPcmRlck51bWJlcigpOwoJCSRjaGFyZ2VfZGF0YVsndG9rZW4nXSAJCQkgID0gJGNhcmRJbmZvLT5nZXRUb2tlbigpOwoJCSRjaGFyZ2VfZGF0YVsnY3VycmVuY3knXSAJCSAgPSAkb3JkZXItPmdldEN1cnJlbmN5KCk7CgkJJGNoYXJnZV9kYXRhWyd0b3RhbCddIAkJCSAgPSAkb3JkZXItPmdldFRvdGFsKCk7CgkJJGNoYXJnZV9kYXRhWydiaWxsaW5nQWRkciddIAkgID0gYXJyYXkoCgkJCSJuYW1lIiAJCQk9PiAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCktPmdldEZpcnN0TmFtZSgpIC4gIiAiIC4gJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpLT5nZXRGaXJzdE5hbWUoKSwKCQkJImFkZHJMaW5lMSIgCT0+ICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0QWRkcmVzc0xpbmUxKCksCgkJCSJjaXR5IiAJCQk9PiAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCktPmdldENpdHkoKSwKCQkJInN0YXRlIiAJCQk9PiAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCktPmdldFN0YXRlKCksCgkJCSJ6aXBDb2RlIiAJCT0+ICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0UG9zdGFsQ29kZSgpLAoJCQkiY291bnRyeSIgCQk9PiAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCktPmdldENvdW50cnkoKSwKCQkJImVtYWlsIiAJCQk9PiAkb3JkZXItPmdldEN1c3RvbWVyKCktPmdldEVtYWlsKCksCgkJCSJwaG9uZU51bWJlciIgCT0+ICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0UGhvbmUoKSwKCQkpOwoJCQoJCWlmKCFpc19udWxsKCRvcmRlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCkpKQoJCXsKCQkJJGNoYXJnZV9kYXRhWydzaGlwcGluZ0FkZHInXSA9IGFycmF5KAoJCQkJIm5hbWUiIAkJCT0+ICRvcmRlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCktPmdldEZpcnN0TmFtZSgpIC4gIiAiIC4gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0Rmlyc3ROYW1lKCksCgkJCQkiYWRkckxpbmUxIiAJPT4gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0QWRkcmVzc0xpbmUxKCksCgkJCQkiY2l0eSIgCQkJPT4gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0Q2l0eSgpLAoJCQkJInN0YXRlIiAJCQk9PiAkb3JkZXItPmdldFNoaXBwaW5nQWRkcmVzcygpLT5nZXRTdGF0ZSgpLAoJCQkJInppcENvZGUiIAkJPT4gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0UG9zdGFsQ29kZSgpLAoJCQkJImNvdW50cnkiIAkJPT4gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0Q291bnRyeSgpLAoJCQkJImVtYWlsIiAJCQk9PiAkb3JkZXItPmdldEN1c3RvbWVyKCktPmdldEVtYWlsKCksCgkJCQkicGhvbmVOdW1iZXIiIAk9PiAkb3JkZXItPmdldFNoaXBwaW5nQWRkcmVzcygpLT5nZXRQaG9uZSgpLAoJCQkpOwoJCX0KCQkKCQl0cnkgCgkJewoJCQlUd29jaGVja291dDo6cHJpdmF0ZUtleSgkdGhpcy0+Z2V0UHJpdmF0ZUtleSgkdGhpcy0+Z2V0VGVzdE1vZGUoKSA/ICJ0ZXN0IiA6ICJsaXZlIikpOwoJCQlUd29jaGVja291dDo6c2VsbGVySWQoJHRoaXMtPmdldFNlbGxlcklkKCR0aGlzLT5nZXRUZXN0TW9kZSgpID8gInRlc3QiIDogImxpdmUiKSk7CgkJCVR3b2NoZWNrb3V0OjpzYW5kYm94KCR0aGlzLT5nZXRUZXN0TW9kZSgpKTsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKFR3b2NoZWNrb3V0X0NoYXJnZTo6YXV0aCgkY2hhcmdlX2RhdGEpKTsKCQl9IAoJCWNhdGNoIChUd29jaGVja291dF9FcnJvciAkZSkKCQl7CgkJCWlmKGlzc2V0KCR0aGlzLT5lcnJvckNvZGVzWyRlLT5nZXRDb2RlKCldKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCR0aGlzLT5lcnJvckNvZGVzWyRlLT5nZXRDb2RlKCldWydjYXVzZSddLCAkdGhpcy0+ZXJyb3JDb2Rlc1skZS0+Z2V0Q29kZSgpXVsndHlwZSddID09ICJmYWlsZWQiID8gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEZBSUxFRCA6IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGUtPmdldE1lc3NhZ2UoKSwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEZBSUxFRCk7CgkJCX0KCQl9Cgl9CgkKCQoJLyoqCgkgKiBSZWZ1bmRzIGEgdHJhbnNhY3Rpb24KCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIHRvIHJlZnVuZAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcywgZmFpbHVyZSwgb3IgZXJyb3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkKQoJewoJCXJldHVybiAkdGhpcy0+X3JlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkLCB0cnVlKTsKCX0KCQoJCgkvKioKCSAqIEludGVybmFsIHJlZnVuZCBtZXRob2QgdGhhdCBhbGxvd3MgYSByZWZ1bmQgdG8gYmUgcHJvY2Vzc2VkIHRoZSBzYW1lIHdheSwgZXZlbiBpZiBpdCBpcyBpbml0aWF0ZWQgb24gU3RyaXBlIGFuZCBzZW50IHRvIHVzIHZpYSB3ZWJob29rCgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICR0cmFuc2FjdGlvbklkIFRoZSBpZCBvZiB0aGUgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24gYmVpbmcgcmVmdW5kZWQKCSAqIEBwYXJhbSBib29sZWFuICRzaG91bGRBdHRlbXB0R2F0ZXdheVJlZnVuZCAob3B0aW9uYWwpIEluZGljYXRlcyB3aGV0aGVyIHRoZSBtZXRob2Qgc2hvdWxkIGF0dGVtcHQgdG8gaXNzdWUgYSByZWZ1bmQgdGhyb3VnaCB0aGUgU3RyaXBlIGFwaS4gSWYgU3RyaXBlIG5vdGlmaWVzIHVzIHZpYSB3ZWJob29rLCB0aGUgY2hhcmdlIGlzIGFscmVhZHkgcmVmdW5kZWQsIHNvIHRoaXMgc2hvdWxkIGJlIGZhbHNlCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gX3JlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkLCAkc2hvdWxkQXR0ZW1wdEdhdGV3YXlSZWZ1bmQgPSB0cnVlLCAkcmVmdW5kQW1vdW50ID0gbnVsbCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vIG1ha2Ugc3VyZSB3ZSBoYXZlIGEgdmFsaWQgdHJhbnNhY3Rpb24gaWQKCQlpZiAoZW1wdHkoJHRyYW5zYWN0aW9uSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQsIGludmFsaWQgdHJhbnNhY3Rpb24gaWQgc3VwcGxpZWQiLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvLyBtYWtlIHN1cmUgdGhlIHRyYW5zYWN0aW9uIGV4aXN0cwoJCSR0cmFuc2FjdGlvblJvdyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBmcm9tICIgLiBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cgLiAiIHdoZXJlIGlkID0gJXMiLCAkdHJhbnNhY3Rpb25JZCkpOwoJCQkJCgkJaWYgKGlzX251bGwoJHRyYW5zYWN0aW9uUm93KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kLCB0cmFuc2FjdGlvbiBkb2VzIG5vdCBleGlzdCIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIG1ha2Ugc3VyZSBpdHMgbm90IGFscmVhZHkgcmVmdW5kZWQKCQlpZiAoIWlzX251bGwoJHRyYW5zYWN0aW9uUm93LT5yZWZ1bmRfaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUcmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlZnVuZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvLyBkZXRlcm1pbmUgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIGluZm9ybWF0aW9uIGlzIHN0b3JlZCBiYXNlZCBvbiB0aGUgdHlwZQoJCWlmKCFpc19udWxsKCRyZWZ1bmRBbW91bnQpICYmICRyZWZ1bmRBbW91bnQgPiAwICYmICRyZWZ1bmRBbW91bnQgIT0gYWJzKCR0cmFuc2FjdGlvblJvdy0+YW1vdW50KSkgewoJCQkkdHJhbnNhY3Rpb25BbW91bnQgPSAkcmVmdW5kQW1vdW50OwoJCX0gZWxzZSB7CgkJCSR0cmFuc2FjdGlvbkFtb3VudCA9IGFicygkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCk7CgkJfQoJCQoJCSRnYXRld2F5UmVmdW5kUmVxdWlyZWQgPSBmYWxzZTsKCQlzd2l0Y2ggKCR0cmFuc2FjdGlvblJvdy0+dHJhbnNhY3Rpb25fdHlwZSkKCQl7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQ6CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UOgoJCQkJJHR3b0NoZWNrT3V0Q2hhcmdlUXVlcnkgPSAiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX1RXT0NIRUNLT1VUX0NIQVJHRVMuIiBXSEVSRSBpZCA9ICVzIjsKCQkJCSR0d29DaGVja091dENoYXJnZUluZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgkdHdvQ2hlY2tPdXRDaGFyZ2VRdWVyeSwkdHJhbnNhY3Rpb25Sb3ctPnBheW1lbnRfc2VydmljZV9kZXRhaWxfaWQpKTsKCQkJCSR0d29DaGVja091dENoYXJnZUlkID0gJHR3b0NoZWNrT3V0Q2hhcmdlSW5mby0+Y2hhcmdlX2lkOwoJCQkJJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCA9IHRydWU7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfQ0hBUkdFOgoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfQ0hBUkdFOgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcmVmdW5kIHRyYW5zYWN0aW9uOiBOb3QgYSBwYXltZW50IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZSwgdW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCAmJiAkc2hvdWxkQXR0ZW1wdEdhdGV3YXlSZWZ1bmQpCgkJewoJCQlpZiAoZW1wdHkoJHR3b0NoZWNrT3V0Q2hhcmdlSWQpKSAvL25lY2Vzc2FyeSBmb3IgYm90aCB2b2lkcyBhbmQgY3JlZGl0cwoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkEgY29uZmlndXJhdGlvbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgZHVyaW5nIHRoZSBhdHRlbXB0IHRvIHZvaWQgdGhlIHRyYW5zYWN0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCXJldHVybiAkdGhpcy0+cmVmdW5kMkNPQ2hhcmdlSWQoJHR3b0NoZWNrT3V0Q2hhcmdlSWQsJHRyYW5zYWN0aW9uSWQpOwoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsgLy9zdWNjZXNzCgl9CQoJCgkKCS8qKgoJICogUmVmdW5kcyBhIFN0cmlwZSBjaGFyZ2UsIGFuZCBsb2dzIHRoZSByZWZ1bmQgaW4gdGhlIHRyYW5zYWN0aW9uIHRhYmxlCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJHN0cmlwZUNoYXJnZUlkIFRoZSBTdHJpcGUgaWRlbnRpZmllciBmb3IgdGhlIGNoYXJnZSB0byBiZSByZWZ1bmRlZAoJICogQHBhcmFtIGludCAkb3JpZ2luYWxUcmFuc2FjdGlvbklkIFRoZSBpZGVudGlmaWVyIGZvciB0aGUgbWVtYmVybW91c2UgdHJhbnNhY3Rpb24KCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiByZWZ1bmQyQ09DaGFyZ2VJZCgkdHdvQ2hlY2tPdXRDaGFyZ2VJZCwgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGFscmVhZHlSZWZ1bmRlZCA9IGZhbHNlOwoJCXRyeSAKCQl7CQoJCQkvLyBEbyB0aGUgMkNoZWNrb3V0IHJlZnVuZAoJCQlUd29jaGVja291dDo6dXNlcm5hbWUoJHRoaXMtPmdldFVzZXJuYW1lKCgkdGhpcy0+Z2V0VGVzdE1vZGUoKSA/ICJ0ZXN0IiA6ICJsaXZlIiksICJhcGkiKSk7CgkJCVR3b2NoZWNrb3V0OjpwYXNzd29yZCgkdGhpcy0+Z2V0UGFzc3dvcmQoKCR0aGlzLT5nZXRUZXN0TW9kZSgpID8gInRlc3QiIDogImxpdmUiKSwgImFwaSIpKTsKCQkJVHdvY2hlY2tvdXQ6OnNhbmRib3goJHRoaXMtPmdldFRlc3RNb2RlKCkpOwoJCQkKCQkJJGFyZ3MgPSBhcnJheSgKCQkJCSdzYWxlX2lkJyAgPT4gJHR3b0NoZWNrT3V0Q2hhcmdlSWQsCgkJCQknY2F0ZWdvcnknID0+IHNlbGY6OiRERUZBVUxUX1JFRlVORF9DQVRFR09SWSwKCQkJCSdjb21tZW50JyAgPT4gc2VsZjo6JERFRkFVTFRfUkVGVU5EX0NPTU1FTlQsCgkJCSk7CgkJCQoJCQkkcmVzdWx0ID0gVHdvY2hlY2tvdXRfU2FsZTo6cmVmdW5kKCRhcmdzKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CQoJCQlpZihpc3NldCgkdGhpcy0+ZXJyb3JDb2Rlc1skZS0+Z2V0Q29kZSgpXSkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkdGhpcy0+ZXJyb3JDb2Rlc1skZS0+Z2V0Q29kZSgpXVsnY2F1c2UnXSwgJHRoaXMtPmVycm9yQ29kZXNbJGUtPmdldENvZGUoKV1bJ3R5cGUnXSA9PSAiZmFpbGVkIiA/IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRGQUlMRUQgOiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRlLT5nZXRNZXNzYWdlKCksIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRGQUlMRUQpOwoJCQl9CgkJfQoJCQkKCQkvLyBnZXQgb3JpZ2luYWwgdHJhbnNhY3Rpb24gZGV0YWlscwoJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgV0hFUkUgaWQ9JXMiLCRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpKTsKCQlpZiAoISRhbHJlYWR5UmVmdW5kZWQgfHwgKCRhbHJlYWR5UmVmdW5kZWQgJiYgaXNfbnVsbCgkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPnJlZnVuZF9pZCkpKQoJCXsKCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUmVmdW5kIGZvciB0cmFuc2FjdGlvbiMgeyRvcmlnaW5hbFRyYW5zYWN0aW9uSWR9IjsKCQkJJHRyYW5zYWN0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkKCQkJJHJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoCgkJCQkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pZCwKCQkJCQkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPm9yZGVyX2l0ZW1faWQsCgkJCQkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5hbW91bnQsCgkJCQkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5jdXJyZW5jeSwKCQkJCQkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwKCQkJCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCQkJCWZhbHNlLAoJCQkJCQkJCSR0aGlzLT5nZXRJZCgpLAoJCQkJCQkJCW51bGwsCgkJCQkJCQkJJHRyYW5zYWN0aW9uRGF0ZSwKCQkJCQkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbklkCgkJCQkJCQkpOwoJCQkJCQkJCgkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXNwb25zZSkpCgkJCXsKCQkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgiVVBEQVRFICIgLiBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cgLiAiIFNFVCByZWZ1bmRfaWQgPSAlcyBXSEVSRSBpZCA9ICVzIiwgJHJlc3BvbnNlLT5tZXNzYWdlLCAkb3JpZ2luYWxUcmFuc2FjdGlvbklkKSk7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CQkKCX0KCQoJLyoqCgkgKiBSZXNwb25kIHRvIGV2ZW50cyBnZW5lcmF0ZWQgYnkgTWVtYmVyTW91c2UKCSAqCgkgKiBAc2VlIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6ZXZlbnRSZWNlaXZlZCgpCgkgKiBAcGFyYW0gaW50ZWdlciAkZXZlbnRUeXBlIEFuIGV2ZW50IGNvbnN0YW50IGVudW1lcmF0ZWQgaW4gTU1fTWVtYmVyTW91c2VFdmVudExpc3RlbmVyCgkgKiBAcGFyYW0gdmFyaWFibGUgJGV2ZW50RGF0YSBBbnkgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIGV2ZW50CgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUgcHJvY2Vzc2luZyB0aGUgZXZlbnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGV2ZW50UmVjZWl2ZWQoJGV2ZW50VHlwZSwgJGV2ZW50RGF0YSkKCXsKCQkkcmVzcG9uc2UgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQlzd2l0Y2ggKCRldmVudFR5cGUpCgkJewoJCQljYXNlIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6UFJPRFVDVF9BRERFRDoKCQkJY2FzZSBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXI6OlBST0RVQ1RfVVBEQVRFRDoKCQkJCWlmICgkZXZlbnREYXRhIGluc3RhbmNlb2YgTU1fUHJvZHVjdCkKCQkJCXsKCQkJCQkkcHJvZHVjdCA9ICRldmVudERhdGE7CgkJCQkJaWYgKCRwcm9kdWN0LT5pc1JlY3VycmluZygpKQoJCQkJCXsKCQkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3I6IDJDaGVja291dCBjdXJyZW50bHkgZG9lcyBub3Qgc3VwcG9ydCByZWN1cnJpbmcgYmlsbGluZyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJfQoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCQlyZXR1cm4gJHJlc3BvbnNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY2FuY2VsU3Vic2NyaXB0aW9uKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtKQoJewkKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFVzZXJuYW1lKCR0eXBlPSdsaXZlJywgJHN1YnR5cGU9J3NlbGxlcicpCgl7CgkJcmV0dXJuICR0aGlzLT51c2VybmFtZVskdHlwZV1bJHN1YnR5cGVdOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRVc2VybmFtZSgkdXNlcm5hbWUsICR0eXBlPSdsaXZlJywgJHN1YnR5cGU9J3NlbGxlcicpCgl7CQoJCSR0aGlzLT51c2VybmFtZVskdHlwZV1bJHN1YnR5cGVdID0gJHVzZXJuYW1lOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXNzd29yZCgkdHlwZT0nbGl2ZScsICRzdWJ0eXBlPSdzZWxsZXInKQoJewoJCXJldHVybiAkdGhpcy0+cGFzc3dvcmRbJHR5cGVdWyRzdWJ0eXBlXTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UGFzc3dvcmQoJHBhc3N3b3JkLCAkdHlwZT0nbGl2ZScsICRzdWJ0eXBlPSdzZWxsZXInKQoJewoJCSR0aGlzLT5wYXNzd29yZFskdHlwZV1bJHN1YnR5cGVdID0gJHBhc3N3b3JkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQdWJsaWNLZXkoJHR5cGU9J2xpdmUnKQoJewoJCXJldHVybiAkdGhpcy0+cHVibGljS2V5WyR0eXBlXTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UHVibGljS2V5KCRwdWJsaWNLZXksICR0eXBlPSdsaXZlJykKCXsKCQkkdGhpcy0+cHVibGljS2V5WyR0eXBlXSA9ICRwdWJsaWNLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFByaXZhdGVLZXkoJHR5cGU9J2xpdmUnKQoJewoJCXJldHVybiAkdGhpcy0+cHJpdmF0ZUtleVskdHlwZV07Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFByaXZhdGVLZXkoJHByaXZhdGVLZXksICR0eXBlPSdsaXZlJykKCXsKCQkkdGhpcy0+cHJpdmF0ZUtleVskdHlwZV0gPSAkcHJpdmF0ZUtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U2VsbGVySWQoJHR5cGU9J2xpdmUnKQoJewoJCXJldHVybiAkdGhpcy0+c2VsbGVySWRbJHR5cGVdOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRTZWxsZXJJZCgkc2VsbGVySWQsICR0eXBlPSdsaXZlJykKCXsKCQkkdGhpcy0+c2VsbGVySWRbJHR5cGVdID0gJHNlbGxlcklkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRTZWNyZXRXb3JkKCR0eXBlPSdsaXZlJykKCXsKCQlyZXR1cm4gJHRoaXMtPnNlY3JldFdvcmRbJHR5cGVdOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRTZWNyZXRXb3JkKCRzZWNyZXRXb3JkLCAkdHlwZT0nbGl2ZScpCgl7CgkJJHRoaXMtPnNlY3JldFdvcmRbJHR5cGVdID0gJHNlY3JldFdvcmQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFRlc3RNb2RlKCR0ZXN0TW9kZSkKCXsKCQkkdGVzdE1vZGUgPSAoYm9vbCkkdGVzdE1vZGU7CgkJJHRoaXMtPnRlc3RNb2RlID0gJHRlc3RNb2RlOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUZXN0TW9kZSgpCgl7CgkJcmV0dXJuICR0aGlzLT50ZXN0TW9kZTsKCX0KCQogIC8qKgoJICogY2hlY2tvdXRJbml0IGlzIGNhbGxlZCBmcm9tIHRoZSBjaGVja291dCBmb3JtIHByaW9yIHRvIHRoZSBwYWdlIGJlaW5nIHJlbmRlcmVkLgoJICogCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpjaGVja291dEluaXQoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hlY2tvdXRJbml0KCkKCXsKCQl3cF9lbnF1ZXVlX3NjcmlwdCgiMkNPSlMiLCAiaHR0cHM6Ly93d3cuMmNoZWNrb3V0LmNvbS9jaGVja291dC9hcGkvMmNvLm1pbi5qcyIsIGFycmF5KCksIE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCksIHRydWUpOwoJCXdwX2VucXVldWVfc2NyaXB0KCJtZW1iZXJtb3VzZS0yQ09KUyIsIHBsdWdpbnNfdXJsKE1NX1BMVUdJTl9OQU1FLiIvcmVzb3VyY2VzL2pzL2NvbW1vbi9tbS0yQ08tdG9rZW4tZXhjaGFuZ2UuanMiKSwgYXJyYXkoIjJDT0pTIiwibWVtYmVybW91c2UtY2hlY2tvdXQtZm9ybSIpLCBNZW1iZXJNb3VzZTo6Z2V0UGx1Z2luVmVyc2lvbigpLCB0cnVlKTsKCQl3cF9sb2NhbGl6ZV9zY3JpcHQoJ21lbWJlcm1vdXNlLTJDT0pTJywgJ18yQ09KU0luZm8nLCBhcnJheSgnXzJDT1B1YmxpY0tleScgPT4gJHRoaXMtPmdldFB1YmxpY0tleSgkdGhpcy0+Z2V0VGVzdE1vZGUoKT8ndGVzdCc6J2xpdmUnKSwgJ18yQ09TZWxsZXJJZCcgPT4gJHRoaXMtPmdldFNlbGxlcklkKCR0aGlzLT5nZXRUZXN0TW9kZSgpPyd0ZXN0JzonbGl2ZScpLCAnZW52aXJvbm1lbnQnID0+ICR0aGlzLT5nZXRUZXN0TW9kZSgpPydzYW5kYm94JzoncHJvZHVjdGlvbicpKTsKCX0JCgkgIAp9', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(61, 'corepageengine', 'LyoqCiAqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9Db3JlUGFnZUVuZ2luZQp7CQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENoZWNrb3V0UGFnZVN0YXRpY0xpbmsoJGlkLCAkaXNNZW1iZXJzaGlwPWZhbHNlKQoJewoJCSRsaW5rU3R5bGUgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9QVVJDSEFTRV9MSU5LX1NUWUxFKTsKCQkkY2hlY2tvdXRVcmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JENIRUNLT1VULCAnJyk7CgkJJHBhcmFtTmFtZSA9ICIiOwoJCSR2YWx1ZSA9ICIiOwoJCQoJCXN3aXRjaCgkbGlua1N0eWxlKQoJCXsKCQkJY2FzZSBNTV9MSU5LX1NUWUxFX0VYUExJQ0lUOgoJCQkJJHBhcmFtTmFtZSA9ICgkaXNNZW1iZXJzaGlwKSA/ICJtaWQiIDogInBpZCI7CgkJCQkkdmFsdWUgPSAkaWQ7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX0xJTktfU1RZTEVfUkVGRVJFTkNFOgoJCQkJJHBhcmFtTmFtZSA9ICJyaWQiOwoJCQkJCgkJCQlpZigkaXNNZW1iZXJzaGlwKQoJCQkJewoJCQkJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkaWQpOwoJCQkJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkkdmFsdWUgPSAkbWVtYmVyc2hpcC0+Z2V0UmVmZXJlbmNlS2V5KCk7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJGlkKTsKCQkJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJJHZhbHVlID0gJHByb2R1Y3QtPmdldFJlZmVyZW5jZUtleSgpOwoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrOwoJCX0KCQkKCQlpZighZW1wdHkoJHBhcmFtTmFtZSkgJiYgIWVtcHR5KCR2YWx1ZSkpCgkJewoJCQlyZXR1cm4gTU1fVXRpbHM6OmFwcGVuZFVybFBhcmFtKCRjaGVja291dFVybCwgJHBhcmFtTmFtZSwgJHZhbHVlKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICRjaGVja291dFVybDsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UmVkZWVtR2lmdFBhZ2VTdGF0aWNMaW5rKCRpZCwgJGlzTWVtYmVyc2hpcD1mYWxzZSkKCXsKCQkkcmVkZWVtR2lmdFVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokUkVERUVNX0dJRlQsICcnKTsKCQkkdmFsdWUgPSAiIjsKCQkKCQlpZigkaXNNZW1iZXJzaGlwKQoJCXsKCQkJJG1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRpZCk7CgkJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSR2YWx1ZSA9ICRtZW1iZXJzaGlwLT5nZXRSZWZlcmVuY2VLZXkoKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRpZCk7CgkJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSR2YWx1ZSA9ICRwcm9kdWN0LT5nZXRSZWZlcmVuY2VLZXkoKTsKCQkJfQoJCX0KCQkKCQlpZighZW1wdHkoJHZhbHVlKSkKCQl7CgkJCXJldHVybiBNTV9VdGlsczo6YXBwZW5kVXJsUGFyYW0oJHJlZGVlbUdpZnRVcmwsICJyaWQiLCAkdmFsdWUpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gJHJlZGVlbUdpZnRVcmw7CgkJfQoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNDaGVja291dENvcmVQYWdlKCRwYWdlSWQpCgl7CgkJcmV0dXJuIHNlbGY6OmlzQ29yZVBhZ2UoJHBhZ2VJZCxNTV9Db3JlUGFnZVR5cGU6OiRDSEVDS09VVCk7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1JlZGVlbUdpZnRDb3JlUGFnZSgkcGFnZUlkKQoJewoJCXJldHVybiBzZWxmOjppc0NvcmVQYWdlKCRwYWdlSWQsTU1fQ29yZVBhZ2VUeXBlOjokUkVERUVNX0dJRlQpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzTWVtYmVySG9tZVBhZ2UoJHBhZ2VJZCkKCXsKCQlyZXR1cm4gc2VsZjo6aXNDb3JlUGFnZSgkcGFnZUlkLE1NX0NvcmVQYWdlVHlwZTo6JE1FTUJFUl9IT01FX1BBR0UpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNTYXZlVGhlU2FsZVBhZ2UoJHBhZ2VJZCkKCXsKCQlyZXR1cm4gc2VsZjo6aXNDb3JlUGFnZSgkcGFnZUlkLE1NX0NvcmVQYWdlVHlwZTo6JFNBVkVUSEVTQUxFKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzTG9naW5Db3JlUGFnZSgkcGFnZUlkKQoJewoJCXJldHVybiBzZWxmOjppc0NvcmVQYWdlKCRwYWdlSWQsTU1fQ29yZVBhZ2VUeXBlOjokTE9HSU5fUEFHRSk7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc015QWNjb3VudENvcmVQYWdlKCRwYWdlSWQpCgl7CgkJcmV0dXJuIHNlbGY6OmlzQ29yZVBhZ2UoJHBhZ2VJZCxNTV9Db3JlUGFnZVR5cGU6OiRNWV9BQ0NPVU5UKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzRXJyb3JDb3JlUGFnZSgkcGFnZUlkKQoJewoJCXJldHVybiBzZWxmOjppc0NvcmVQYWdlKCRwYWdlSWQsTU1fQ29yZVBhZ2VUeXBlOjokRVJST1IpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNDb25maXJtYXRpb25QYWdlKCRwYWdlSWQpCgl7CgkJcmV0dXJuIChzZWxmOjppc0NvcmVQYWdlKCRwYWdlSWQsTU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT04pIHx8IHNlbGY6OmlzQ29yZVBhZ2UoJHBhZ2VJZCxNTV9Db3JlUGFnZVR5cGU6OiRQQUlEX0NPTkZJUk1BVElPTikpOwoJfQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGRldGVybWluZXMgaWYgdGhlIHBhZ2UgVVJMIHBhc3NlZCBpcyBhIGNvbmZpcm1hdGlvbiBwYWdlCgkgKiBAcGFyYW0gU3RyaW5nICRwYWdlVXJsIHRoZSBVUkwgdG8gY2hlY2sgaWYgaXQncyBhIGNvbmZpcm1hdGlvbiBwYWdlCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBhIGNvbmZpcm1hdGlvbiBwYWdlLCBmYWxzZSBpZiBub3QKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc0NvbmZpcm1hdGlvblBhZ2VCeVVybCgkcGFnZVVybCkKCXsKCQkkY29yZVBhZ2VUeXBlcyA9IGFycmF5KE1NX0NvcmVQYWdlVHlwZTo6JFBBSURfQ09ORklSTUFUSU9OLE1NX0NvcmVQYWdlVHlwZTo6JEZSRUVfQ09ORklSTUFUSU9OKTsKCQlyZXR1cm4gc2VsZjo6aXNDb3JlUGFnZU9mVHlwZSgkcGFnZVVybCwgJGNvcmVQYWdlVHlwZXMpOwoJfQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGRldGVybWluZXMgaWYgdGhlIHBhZ2UgVVJMIHBhc3NlZCBpcyB0aGUgbG9nb3V0IHBhZ2UKCSAqIEBwYXJhbSBTdHJpbmcgJHBhZ2VVcmwgdGhlIFVSTCB0byBjaGVjayBpZiBpdCdzIHRoZSBsb2dvdXQgcGFnZQoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhlIGxvZ291dCBwYWdlLCBmYWxzZSBpZiBub3QKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc0xvZ291dFBhZ2VCeVVybCgkcGFnZVVybCkKCXsKCQkkY29yZVBhZ2VUeXBlcyA9IGFycmF5KE1NX0NvcmVQYWdlVHlwZTo6JExPR09VVF9QQUdFKTsKCQlyZXR1cm4gc2VsZjo6aXNDb3JlUGFnZU9mVHlwZSgkcGFnZVVybCwgJGNvcmVQYWdlVHlwZXMpOwoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgZGV0ZXJtaW5lcyBpZiB0aGUgcGFnZSBVUkwgcGFzc2VkIGlzIGEgY2hlY2tvdXQsIGNvbmZpcm1hdGlvbiwgbG9naW4gb3IgbXkgYWNjb3VudCBwYWdlCgkgKiBAcGFyYW0gU3RyaW5nICRwYWdlVXJsIHRoZSBVUkwgdG8gY2hlY2sgaWYgaXQncyBhIGNoZWNrb3V0LCBjb25maXJtYXRpb24sIGxvZ2luIG9yIG15IGFjY291bnQgcGFnZQoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhlIGxvZ291dCBwYWdlLCBmYWxzZSBpZiBub3QKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1NtYXJ0VGFnQ29yZVBhZ2UoJHBhZ2VVcmwpCgl7CgkJJGNvcmVQYWdlVHlwZXMgPSBhcnJheShNTV9Db3JlUGFnZVR5cGU6OiRQQUlEX0NPTkZJUk1BVElPTixNTV9Db3JlUGFnZVR5cGU6OiRGUkVFX0NPTkZJUk1BVElPTixNTV9Db3JlUGFnZVR5cGU6OiRMT0dJTl9QQUdFLE1NX0NvcmVQYWdlVHlwZTo6JENIRUNLT1VULE1NX0NvcmVQYWdlVHlwZTo6JFJFREVFTV9HSUZULE1NX0NvcmVQYWdlVHlwZTo6JE1ZX0FDQ09VTlQpOwoJCXJldHVybiBzZWxmOjppc0NvcmVQYWdlT2ZUeXBlKCRwYWdlVXJsLCAkY29yZVBhZ2VUeXBlcyk7Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCBkZXRlcm1pbmVzIGlmIHRoZSBwYWdlIFVSTCBwYXNzZWQgaXMgb25lIG9mIHRoZSB0eXBlcyBlbnVtZXJhdGVkIGluICRjb3JlUGFnZVR5cGVzCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHBhZ2VVcmwgdGhlIFVSTCB0byBjaGVjawoJICogQHBhcmFtIGFycmF5ICRjb3JlUGFnZVR5cGVzIFRoZSB0eXBlcyBvZiBjb3JlIHBhZ2VzIHRvIHRlc3QgZm9yLiBUaGlzIGFycmF5IHNob3VsZCBjb250YWluIHZhbHVlcyBlbnVtZXJhdGVkIGluIE1NX0NvcmVQYWdlVHlwZQoJICogCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgbG9nb3V0IHBhZ2UsIGZhbHNlIGlmIG5vdAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzQ29yZVBhZ2VPZlR5cGUoJHBhZ2VVcmwsJGNvcmVQYWdlVHlwZXMpCgl7CgkJaWYgKGVtcHR5KCRjb3JlUGFnZVR5cGVzKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJaWYgKCFpc19hcnJheSgkY29yZVBhZ2VUeXBlcykpCgkJewoJCQkkY29yZVBhZ2VUeXBlcyA9IGFycmF5KCRjb3JlUGFnZVR5cGVzKTsKCQl9CgkJCgkJJGNvcmVQYWdlQ2FjaGUgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9DT1JFX1BBR0VfQ0FDSEUpOwoJCWlmICghaXNfYXJyYXkoJGNvcmVQYWdlQ2FjaGUpKQoJCXsKCQkJJGNvcmVQYWdlQ2FjaGUgPSBzZWxmOjpjcmVhdGVDb3JlUGFnZUNhY2hlKCk7CgkJfQoJCQoJCWlmICghaXNfYXJyYXkoJGNvcmVQYWdlQ2FjaGUpKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkKCQkkc2VhcmNoVXJsID0gcHJlZ19yZXBsYWNlKCIoaHR0cHM/Oi8vKSIsICIiLCAkcGFnZVVybCk7CgkJZm9yZWFjaCAoJGNvcmVQYWdlQ2FjaGUgYXMgJGNvcmVQYWdlVHlwZUlkID0+ICRjb3JlUGFnZUFycmF5KQoJCXsKCQkJaWYgKGluX2FycmF5KCRjb3JlUGFnZVR5cGVJZCwkY29yZVBhZ2VUeXBlcykpCgkJCXsKCQkJCWZvcmVhY2ggKCRjb3JlUGFnZUFycmF5IGFzICRwYWdlSUQgPT4gJHBhZ2VJbmZvKSAKCQkJCXsKCQkJCQlpZiAoIWVtcHR5KCRwYWdlSW5mb1sncGVybWFsaW5rJ10pICYmIChzdHJwb3MoJHNlYXJjaFVybCwkcGFnZUluZm9bJ3Blcm1hbGluayddKSAhPT0gZmFsc2UpKQoJCQkJCXsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJlZGlyZWN0VG9TYXZlVGhlU2FsZVBhZ2UoJHBhZ2VJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGN1cnJlbnRVc2VyID0gc2VsZjo6Z2V0Q3VycmVudFVzZXIoKTsKCQkKCQlpZighJGN1cnJlbnRVc2VyLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWVsc2UKCQl7CgkJCSRtZW1iZXJzaGlwSWQgPSAkY3VycmVudFVzZXItPmdldE1lbWJlcnNoaXBJZCgpOwoJCQkkY3BlID0gbmV3IE1NX0NvcmVQYWdlRW5naW5lKCk7CgkJCSRzcGVjaWZpY1BhZ2VJZCA9ICRjcGUtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoTU1fQ29yZVBhZ2VUeXBlOjokU0FWRVRIRVNBTEUsIE1NX1RZUEVfTUVNQkVSU0hJUF9MRVZFTCwgJG1lbWJlcnNoaXBJZCk7CgkJCWlmKCRwYWdlSWQgIT0gJHNwZWNpZmljUGFnZUlkKQoJCQl7CgkJCQkkdXJsID0gIiI7CgkJCQlpZihpbnR2YWwoJHBhZ2VJZCkgPiAwKQoJCQkJewoJCQkJCSR1cmwgPSAkY3BlLT5nZXRGb3JtYXR0ZWRVcmwoJHNwZWNpZmljUGFnZUlkKTsKCQkJCX0JCgkJCQkKCQkJCWlmKCFlbXB0eSgkdXJsKSkKCQkJCXsKCQkJCQl3cF9yZWRpcmVjdCgkdXJsKTsKCQkJCQlleGl0OwoJCQkJfQoJCQl9CgkJfQoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJlZGlyZWN0VG9NZW1iZXJIb21lUGFnZSgkcGFnZUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRjdXJyZW50VXNlciA9IHNlbGY6OmdldEN1cnJlbnRVc2VyKCk7CgkKCQlpZighJGN1cnJlbnRVc2VyLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCWVsc2UKCQl7CgkJCSRtZW1iZXJzaGlwSWQgPSAkY3VycmVudFVzZXItPmdldE1lbWJlcnNoaXBJZCgpOwoJCQkkY3BlID0gbmV3IE1NX0NvcmVQYWdlRW5naW5lKCk7CgkJCSRzcGVjaWZpY1BhZ2VJZCA9ICRjcGUtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoTU1fQ29yZVBhZ2VUeXBlOjokTUVNQkVSX0hPTUVfUEFHRSwgTU1fVFlQRV9NRU1CRVJTSElQX0xFVkVMLCAkbWVtYmVyc2hpcElkKTsKCQkJaWYoJHBhZ2VJZCAhPSAkc3BlY2lmaWNQYWdlSWQpCgkJCXsKCQkJCSR1cmwgPSAiIjsKCQkJCWlmKGludHZhbCgkcGFnZUlkKSA+IDApCgkJCQl7CgkJCQkJJHVybCA9ICRjcGUtPmdldEZvcm1hdHRlZFVybCgkc3BlY2lmaWNQYWdlSWQpOwoJCQkJfQoJCgkJCQlpZighZW1wdHkoJHVybCkpCgkJCQl7CgkJCQkJd3BfcmVkaXJlY3QoJHVybCk7CgkJCQkJZXhpdDsKCQkJCX0KCQkJfQoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIGZvciBvbi10aGUtZmx5IHJlZGlyZWN0aW9uIGJhc2VkIG9uIHdoZXRoZXIgb3Igbm90IAoJICogdGhlIHVzZXIgbWF5IGJlIGdvaW5nIHRvIHRoZSBob21lIHBhZ2UuICAKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZWRpcmVjdFRvU2l0ZUhvbWVQYWdlKCRmb3JjZT1mYWxzZSkKCXsJCgkJJHNldHRpbmcgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9PTl9MT0dJTl9VU0VfV1BfRlJPTlRQQUdFKTsKCQkkdXNlTWJySG9tZXBhZ2UgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BRlRFUl9MT0dJTl9VU0VfV1BfRlJPTlRQQUdFKTsKCQkKCQlpZigkc2V0dGluZyAhPSAiMSIgJiYgJHVzZU1ickhvbWVwYWdlICE9ICIxIikKCQl7CQoJCQkkY3AgPSBuZXcgTU1fQ29yZVBhZ2VFbmdpbmUoKTsKCQkJCgkJCWlmKCRmb3JjZSkKCQkJewoJCQkJJGNvcmVQYWdlVHlwZUlkID0gTU1fQ29yZVBhZ2VUeXBlOjokTUVNQkVSX0hPTUVfUEFHRTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRjb3JlUGFnZVR5cGVJZCA9ICRjcC0+ZGV0ZXJtaW5lQ29yZVBhZ2UoKTsKCQkJfQoJCQkKCQkJJGN1cnJlbnRVc2VyID0gc2VsZjo6Z2V0Q3VycmVudFVzZXIoKTsKCQkJCgkJCS8vIGNoZWNrIGlmIHVzZXIgaXMgdmFsaWQgYW5kIHRoYXQgdGhlIG1lbWJlcnNoaXAgSUQgaXMgbm90IHNldCB0byAnbm9uZScuIFRoaXMgCgkJCS8vIGlzIG9ubHkgZG9uZSBpbiB0aGUgY2FzZSB3aGVyZSB0aGUgdXNlciBpcyBnZW5lcmF0ZWQgYnkgdGhlIHByZXZpZXcgc2V0dGluZ3MKCQkJLy8gYmFyIGFuZCB0aGUgbWVtYmVyc2hpcCBsZXZlbCBhc3NpZ25lZCB0byB0aGUgdXNlciBpcyAnbm9uLW1lbWJlcicKCQkJaWYoJGN1cnJlbnRVc2VyLT5pc1ZhbGlkKCkgJiYgJGN1cnJlbnRVc2VyLT5nZXRNZW1iZXJzaGlwSWQoKSAhPSAibm9uZSIpCgkJCXsKCQkJCWlmKCRjb3JlUGFnZVR5cGVJZCA9PSBNTV9Db3JlUGFnZVR5cGU6OiRNRU1CRVJfSE9NRV9QQUdFKQoJCQkJewoJCQkJCSR1cmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKCRjb3JlUGFnZVR5cGVJZCk7CgkJCQkJaWYoIWVtcHR5KCR1cmwpKQoJCQkJCXsJCQkJCQkKCQkJCQkJd3BfcmVkaXJlY3QoJHVybCk7CgkJCQkJCWV4aXQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEN1cnJlbnRVc2VyKCkKCXsKCQlnbG9iYWwgJHVzZXIsICRjdXJyZW50X3VzZXI7CgkJCgkJJGN1cnJlbnRVc2VyID0gbmV3IE1NX1VzZXIoKTsKCQkKCQlpZihNTV9FbXBsb3llZTo6aXNFbXBsb3llZSgpKQoJCXsKCQkJJHByZXZpZXdPYmogPSBNTV9QcmV2aWV3OjpnZXREYXRhKCk7CgkJCWlmKCRwcmV2aWV3T2JqICE9PSBmYWxzZSkKCQkJewoJCQkJJGN1cnJlbnRVc2VyID0gJHByZXZpZXdPYmotPmdldFVzZXIoKTsKCQkJfQoJCX0KCQllbHNlIGlmKGlzc2V0KCR1c2VyLT5JRCkpCgkJewoJCQkkY3VycmVudFVzZXIgPSBuZXcgTU1fVXNlcigkdXNlci0+SUQpOwoJCX0KCQllbHNlIGlmKGlzc2V0KCR1c2VyLT5kYXRhLT5JRCkpCgkJewoJCQkkY3VycmVudFVzZXIgPSBuZXcgTU1fVXNlcigkdXNlci0+ZGF0YS0+SUQpOwoJCX0KCQllbHNlIGlmKGlzc2V0KCRjdXJyZW50X3VzZXItPklEKSkKCQl7CgkJCSRjdXJyZW50VXNlciA9IE1NX1VzZXI6OmdldEN1cnJlbnRXUFVzZXIoKTsKCQl9CgkJCgkJcmV0dXJuICRjdXJyZW50VXNlcjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNhdmVDb3JlUGFnZXMoJGlkLCAkcG9zdCkKCXsJCgkJLy8gc2F2ZSBjb3JlIHBhZ2UgZGF0YSBpZiBuZWNlc3NhcnkKCQlpZigkcG9zdC0+cG9zdF9zdGF0dXMgIT0gJ2F1dG8tZHJhZnQnCgkJCSYmIGZhbHNlID09PSAod3BfaXNfcG9zdF9hdXRvc2F2ZSgkcG9zdCkgfHwgd3BfaXNfcG9zdF9yZXZpc2lvbigkcG9zdCkpCgkJCSYmIGlzc2V0KCRfUE9TVFsnc2F2ZS1tbS1jb3JlcGFnZXMtbm9uY2UnXSkgJiYgd3BfdmVyaWZ5X25vbmNlKCRfUE9TVFsnc2F2ZS1tbS1jb3JlcGFnZXMtbm9uY2UnXSwgJ3NhdmUtbW0tY29yZXBhZ2VzJykpIAoJCXsKCQkJJGNvcmVQYWdlVmlldyA9IG5ldyBNTV9Db3JlUGFnZXNWaWV3KCk7CgkJCQoJCQlpZihpc3NldCgkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bImNvcmVfcGFnZV90eXBlX2lkIl0pICYmIGludHZhbCgkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bImNvcmVfcGFnZV90eXBlX2lkIl0pPjApCgkJCXsKCQkJCSRjb3JlUGFnZVZpZXctPnNhdmVDb3JlUGFnZSgkcG9zdCk7CgkJCX0KCQkJZWxzZSBpZihpc3NldCgkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bImNvcmVfcGFnZV90eXBlX2lkIl0pICYmIGludHZhbCgkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bImNvcmVfcGFnZV90eXBlX2lkIl0pPT0nJykKCQkJewoJCQkJJGNvcmVQYWdlRW5naW5lID0gbmV3IE1NX0NvcmVQYWdlRW5naW5lKCk7CgkJCQlpZighTU1fQ29yZVBhZ2U6OmlzRGVmYXVsdENvcmVQYWdlKCRfUE9TVFsicG9zdF9JRCJdKSkKCQkJCQkkY29yZVBhZ2VFbmdpbmUtPnJlbW92ZUNvcmVQYWdlQnlJZCgkX1BPU1RbInBvc3RfSUQiXSk7CgkJCX0KCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNGcm9udFBhZ2UoKQoJewkKCQkkc2hvd09uRnJvbnQgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCJzaG93X29uX2Zyb250Iik7CgkJaWYoaXNfZnJvbnRfcGFnZSgpKXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCWVsc2UgaWYoJHNob3dPbkZyb250ID09ICJwb3N0cyIgJiYgaXNfaG9tZSgpKXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBkZXRlcm1pbmVDb3JlUGFnZSgpCgl7CQoJCWdsb2JhbCAkd3BfcXVlcnk7CQoJCWlmKGlzc2V0KCR3cF9xdWVyeS0+cG9zdC0+SUQpICYmIGludHZhbCgkd3BfcXVlcnktPnBvc3QtPklEKT4wKXsgCgkJCSRwb3N0SWQgPSAkd3BfcXVlcnktPnBvc3QtPklEOwoJCQkkc2hvd09uRnJvbnQgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCJzaG93X29uX2Zyb250Iik7CgkJCQoJCQlpZihpc19mcm9udF9wYWdlKCkpCgkJCXsKCQkJCXJldHVybiBNTV9Db3JlUGFnZVR5cGU6OiRNRU1CRVJfSE9NRV9QQUdFOwoJCQl9CgkJCWVsc2UgaWYoJHNob3dPbkZyb250ID09ICJwb3N0cyIgJiYgaXNfaG9tZSgpKQoJCQl7CgkJCQlyZXR1cm4gTU1fQ29yZVBhZ2VUeXBlOjokTUVNQkVSX0hPTUVfUEFHRTsKCQkJfQoJCX0KCQlyZXR1cm4gTU1fQ29yZVBhZ2VUeXBlOjokTk9fUEFHRTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVcmwoJGNvcmVQYWdlVHlwZUlkLCAkcGFyYW1zPW51bGwsICR1c2VyPW51bGwpCgl7CgkJJGNwZSA9IG5ldyBNTV9Db3JlUGFnZUVuZ2luZSgpOwoJCXN3aXRjaCgkY29yZVBhZ2VUeXBlSWQpCgkJewoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SOgoJCQkJcmV0dXJuICRjcGUtPmdldEVycm9yUGFnZSgkcGFyYW1zKTsKCQkKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRNRU1CRVJfSE9NRV9QQUdFOgoJCQkJcmV0dXJuICRjcGUtPmdldEhvbWVQYWdlKCRwYXJhbXMsICR1c2VyKTsKCQkKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRNWV9BQ0NPVU5UOgoJCQkJcmV0dXJuICRjcGUtPmdldE15QWNjb3VudFBhZ2UoJHBhcmFtcyk7CgkJCgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokQ0hFQ0tPVVQ6CgkJCQlyZXR1cm4gJGNwZS0+Z2V0Q2hlY2tvdXRQYWdlKCRwYXJhbXMpOwoJCQoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JFJFREVFTV9HSUZUOgoJCQkJcmV0dXJuICRjcGUtPmdldFJlZGVlbUdpZnRQYWdlKCRwYXJhbXMpOwoJCQoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JExPR0lOX1BBR0U6CgkJCQlyZXR1cm4gJGNwZS0+Z2V0TG9naW5QYWdlKCRwYXJhbXMpOwoJCQoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JExPR09VVF9QQUdFOgoJCQkJcmV0dXJuICRjcGUtPmdldExvZ291dFBhZ2UoJHBhcmFtcyk7CgkJCgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokRk9SR09UX1BBU1NXT1JEOgoJCQkJcmV0dXJuICRjcGUtPmdldEZvcmdvdFBhc3N3b3JkUGFnZSgkcGFyYW1zKTsKCQkJCgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokUkVTRVRfUEFTU1dPUkQ6CgkJCQlyZXR1cm4gJGNwZS0+Z2V0UmVzZXRQYXNzd29yZFBhZ2UoJHBhcmFtcyk7CgkJCQkJCgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokUEFJRF9DT05GSVJNQVRJT046CgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT046CgkJCQlyZXR1cm4gJGNwZS0+Z2V0Q29uZmlybWF0aW9uUGFnZSgkcGFyYW1zKTsKCQkKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRTQVZFVEhFU0FMRToKCQkJCXJldHVybiAkY3BlLT5nZXRTYXZlVGhlU2FsZVBhZ2UoJHBhcmFtcywgJHVzZXIpOwoJCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICIiOwoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDb25maXJtYXRpb25QYWdlKCRwYXJhbXM9bnVsbCkKCXsKCQkkcGFnZV9pZCA9IDA7CgkJCgkJaWYoKGJvb2wpICRwYXJhbXNbImlzRnJlZSJdKQoJCXsKCQkJJHBhZ2VfaWQgPSAkdGhpcy0+Z2V0Q29yZVBhZ2VJZEJ5UmVmVHlwZShNTV9Db3JlUGFnZVR5cGU6OiRGUkVFX0NPTkZJUk1BVElPTiwgJHBhcmFtc1sicmVmVHlwZSJdLCAkcGFyYW1zWyJyZWZJZCJdKTsKCQkJCgkJCWlmKGludHZhbCgkcGFnZV9pZCkgPD0gMCkgCgkJCXsKCQkJCSRwYWdlX2lkID0gJHRoaXMtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoTU1fQ29yZVBhZ2VUeXBlOjokUEFJRF9DT05GSVJNQVRJT04sICRwYXJhbXNbInJlZlR5cGUiXSwgJHBhcmFtc1sicmVmSWQiXSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCSRwYWdlX2lkID0gJHRoaXMtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoTU1fQ29yZVBhZ2VUeXBlOjokUEFJRF9DT05GSVJNQVRJT04sICRwYXJhbXNbInJlZlR5cGUiXSwgJHBhcmFtc1sicmVmSWQiXSk7CgkJfQoJCQoJCWlmKGludHZhbCgkcGFnZV9pZCkgPiAwKQoJCXsKCQkJaWYoaXNzZXQoJHBhcmFtc1sib3JkZXJJZCJdKSkKCQkJewogCQkJCSRvcmRlcklkID0gJHBhcmFtc1sib3JkZXJJZCJdOwogCQkJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9PUkRFUl9JRCwgJG9yZGVySWQpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG9yZGVySWQgPSBNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xBU1RfT1JERVJfSUQpOwoJCQl9CgkJCQogCQkJJHVzZXJJZCA9IE1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9VU0VSX0lEKTsKIAkJCQogCQkJaWYoaW50dmFsKCR1c2VySWQpIDw9IDApCiAJCQl7CiAJCQkJJGN1cnJlbnRVc2VyID0gc2VsZjo6Z2V0Q3VycmVudFVzZXIoKTsKIAkJCQkkdXNlcklkID0gKCRjdXJyZW50VXNlci0+aXNWYWxpZCgpKSA/ICRjdXJyZW50VXNlci0+Z2V0SWQoKSA6IDA7CiAJCQl9CiAJCQkKIAkJCSR1cmwgPSAkdGhpcy0+Z2V0Rm9ybWF0dGVkVXJsKCRwYWdlX2lkKTsKIAkJCQogCQkJaWYoIWlzc2V0KCRvcmRlcklkKSkKIAkJCXsKIAkJCQkkb3JkZXJJZCA9IDA7CiAJCQl9CiAJCQkKIAkJCS8vIGdldCBhIHRyYW5zYWN0aW9uIGtleQogCQkJJHRyYW5zS2V5UmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbktleTo6Z2VuZXJhdGVLZXkoJHVzZXJJZCwgJG9yZGVySWQpOwogCQkJCiAJCQlpZiAoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkdHJhbnNLZXlSZXNwb25zZSkpCiAJCQl7CiAJCQkJJHRyYW5zS2V5ID0gJHRyYW5zS2V5UmVzcG9uc2UtPm1lc3NhZ2U7CiAJCQkJJHVybCA9IE1NX1V0aWxzOjphcHBlbmRVcmxQYXJhbSgkdXJsLCBNTV9TZXNzaW9uOjokS0VZX1RSQU5TQUNUSU9OX0tFWSwgJHRyYW5zS2V5KTsKIAkJCX0KCQkJCQoJCQlyZXR1cm4gJHVybDsKCQl9CgkJCgkJcmV0dXJuICIiOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldEZvcmdvdFBhc3N3b3JkUGFnZSgkcGFyYW1zPW51bGwpCgl7CgkJJHVzZU1NUmVzZXRQYXNzd29yZFBhZ2UgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9VU0VfTU1fUkVTRVRfUEFTU1dPUkRfUEFHRSk7CgkJaWYoJHVzZU1NUmVzZXRQYXNzd29yZFBhZ2UgPT0gIjEiKQoJCXsKCQkJJHBhZ2VfaWQgPSAkdGhpcy0+Z2V0Q29yZVBhZ2VJZEJ5UmVmVHlwZShNTV9Db3JlUGFnZVR5cGU6OiRGT1JHT1RfUEFTU1dPUkQsIG51bGwsIG51bGwpOwoJCQlyZXR1cm4gJHRoaXMtPmdldEZvcm1hdHRlZFVybCgkcGFnZV9pZCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiB3cF9sb3N0cGFzc3dvcmRfdXJsKCk7CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldFJlc2V0UGFzc3dvcmRQYWdlKCRwYXJhbXM9bnVsbCkKCXsKCQkkcGFnZV9pZCA9ICR0aGlzLT5nZXRDb3JlUGFnZUlkQnlSZWZUeXBlKE1NX0NvcmVQYWdlVHlwZTo6JFJFU0VUX1BBU1NXT1JELCBudWxsLCBudWxsKTsKCQlyZXR1cm4gJHRoaXMtPmdldEZvcm1hdHRlZFVybCgkcGFnZV9pZCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0TXlBY2NvdW50UGFnZSgkcGFyYW1zPW51bGwpCgl7CgkJJHBhZ2VfaWQgPSAkdGhpcy0+Z2V0Q29yZVBhZ2VJZEJ5UmVmVHlwZShNTV9Db3JlUGFnZVR5cGU6OiRNWV9BQ0NPVU5ULCBudWxsLCBudWxsKTsKCQlyZXR1cm4gJHRoaXMtPmdldEZvcm1hdHRlZFVybCgkcGFnZV9pZCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0TG9nb3V0UGFnZSgkcGFyYW1zPW51bGwpCgl7CgkJZ2xvYmFsICR3cF9xdWVyeTsKCQkkY3VycmVudFVzZXIgPSBzZWxmOjpnZXRDdXJyZW50VXNlcigpOwoJCQoJCWlmKCEkY3VycmVudFVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCSRwYWdlX2lkID0gJHRoaXMtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoTU1fQ29yZVBhZ2VUeXBlOjokTE9HT1VUX1BBR0UsIG51bGwsIG51bGwpOwoJCQlyZXR1cm4gJHRoaXMtPmdldEZvcm1hdHRlZFVybCgkcGFnZV9pZCk7CgkJfQoJCWVsc2UgCgkJewoJCQkvLyB1c2VyIGlzIGxvZ2dlZCBpbiwgbGV0cyBmaW5kIHRoZXJlIG1lbWJlcnNoaXAgaW5mbwoJCQkkbWVtYmVyc2hpcElkID0gJGN1cnJlbnRVc2VyLT5nZXRNZW1iZXJzaGlwSWQoKTsKCQoJCQkvLyB1c2VyIGhhcyBhIG1lbWJlciB0eXBlLCBjaGVjayBmb3Igc3BlY2lmaWMgbWVtYmVyIHR5cGUgcGFnZQoJCQkkcGFnZUlkID0gJHRoaXMtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoTU1fQ29yZVBhZ2VUeXBlOjokTE9HT1VUX1BBR0UsIE1NX1RZUEVfTUVNQkVSU0hJUF9MRVZFTCwgJG1lbWJlcnNoaXBJZCk7CgoJCQlpZihpbnR2YWwoJHBhZ2VJZCk+MCkKCQkJewoJCQkJJG9sZFVybCA9ICIiOwoJCQkJaWYoaXNzZXQoJHdwX3F1ZXJ5LT5wb3N0LT5JRCkgJiYgaW50dmFsKCR3cF9xdWVyeS0+cG9zdC0+SUQpPjApewoJCQkJCSRvbGRVcmwgPSAkdGhpcy0+Z2V0Rm9ybWF0dGVkVXJsKCR3cF9xdWVyeS0+cG9zdC0+SUQpOwoJCQkJfQoJCQkJJG5ld1VybCA9ICR0aGlzLT5nZXRGb3JtYXR0ZWRVcmwoJHBhZ2VJZCk7CgkJCQkKCQkJCWlmKCRvbGRVcmwgPT0gJG5ld1VybCkKCQkJCXsKCQkJCQlyZXR1cm4gIiI7CgkJCQl9CgkJCQlyZXR1cm4gJG5ld1VybDsKCQkJfQoJCX0KCQkJCgkJcmV0dXJuICIiOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldExvZ2luUGFnZSgkcGFyYW1zPW51bGwpCgl7CgkJJHBhZ2VfaWQgPSAkdGhpcy0+Z2V0Q29yZVBhZ2VJZEJ5UmVmVHlwZShNTV9Db3JlUGFnZVR5cGU6OiRMT0dJTl9QQUdFLCBudWxsLCBudWxsKTsKCQlyZXR1cm4gJHRoaXMtPmdldEZvcm1hdHRlZFVybCgkcGFnZV9pZCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0Q2hlY2tvdXRQYWdlKCRwYXJhbXM9bnVsbCkKCXsKCQkkcGFnZV9pZCA9ICR0aGlzLT5nZXRDb3JlUGFnZUlkQnlSZWZUeXBlKE1NX0NvcmVQYWdlVHlwZTo6JENIRUNLT1VULCBudWxsLCBudWxsKTsKCQlyZXR1cm4gJHRoaXMtPmdldEZvcm1hdHRlZFVybCgkcGFnZV9pZCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0UmVkZWVtR2lmdFBhZ2UoJHBhcmFtcz1udWxsKQoJewoJCSRwYWdlX2lkID0gJHRoaXMtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoTU1fQ29yZVBhZ2VUeXBlOjokUkVERUVNX0dJRlQsIG51bGwsIG51bGwpOwoJCXJldHVybiAkdGhpcy0+Z2V0Rm9ybWF0dGVkVXJsKCRwYWdlX2lkKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRFcnJvclBhZ2UoJGVycm9yQ29kZSkKCXsKCQkkcGFnZV9pZCA9ICR0aGlzLT5nZXRDb3JlUGFnZUlkQnlSZWZUeXBlKE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SLCBudWxsLCBudWxsKTsKCQkkdXJsID0gJHRoaXMtPmdldEZvcm1hdHRlZFVybCgkcGFnZV9pZCk7CgkJCgkJaWYoaXNzZXQoJGVycm9yQ29kZSkgJiYgIWVtcHR5KCRlcnJvckNvZGUpKQoJCXsKCQkJJHVybCA9IE1NX1V0aWxzOjphcHBlbmRVcmxQYXJhbSgkdXJsLCBNTV9FcnJvcjo6JFVSTF9QQVJBTSwgJGVycm9yQ29kZSwgdHJ1ZSk7CgkJfQoJCQoJCXJldHVybiAkdXJsOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHVuZGVmaW5lZEFjdGlvbigpCgl7CgkJdHJpZ2dlcl9lcnJvcihfX0ZJTEVfXy4iIDogIi5fX0xJTkVfXy4iIHNob3VsZCBiZSBkZWZpbmVkIGZvciBjb3JlcGFnZXR5cGUuIik7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkVXJsKCRwYWdlX2lkKQoJewoJCWlmKGludHZhbCgkcGFnZV9pZCk+MCkKCQl7CgkJCWlmKCEkdGhpcy0+YXJlUGVybWFsaW5rc1VzZWQoKSkKCQkJewoJCQkJJHRoaXNQb3N0ID0gZ2V0X3Bvc3QoJHBhZ2VfaWQpOwoJCQkJCgkJCQkkZ2V0TmFtZSA9ICJwIjsKCQkJCWlmKGlzc2V0KCR0aGlzUG9zdC0+cG9zdF90eXBlKSAmJiAkdGhpc1Bvc3QtPnBvc3RfdHlwZT09InBhZ2UiKXsKCQkJCQkkZ2V0TmFtZSA9ICJwYWdlX2lkIjsJCgkJCQl9CgkJCQkKCQkJCSR1cmwgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCJzaXRldXJsIik7CgkJCQkkdXJsID0gcHJlZ19yZXBsYWNlKCIvKFwvKSQvIiwiIiwkdXJsKS4iLz8iLiRnZXROYW1lLiI9Ii4kcGFnZV9pZDsKCQkJCQoJCQkJcmV0dXJuICR1cmw7CgkJCX0KCQkJZWxzZQoJCQkJcmV0dXJuIGdldF9wZXJtYWxpbmsoJHBhZ2VfaWQpOwkKCQl9CgkJcmV0dXJuICIiOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gYXJlUGVybWFsaW5rc1VzZWQoKQoJewoJCXJldHVybiBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCdwZXJtYWxpbmtfc3RydWN0dXJlJykgIT0gJyc7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q29yZVBhZ2VJZCgkY29yZV9wYWdlX3R5cGUsICR0eXBlX25hbWUsICR0eXBlX2lkKQoJewoJCSRjcCA9IG5ldyBNTV9Db3JlUGFnZUVuZ2luZSgpOwoJCWlmKCFpc19udWxsKCR0eXBlX2lkKSkKCQl7CgkJCXJldHVybiAkY3AtPmdldENvcmVQYWdlSWRCeVJlZlR5cGUoJGNvcmVfcGFnZV90eXBlLCAkdHlwZV9uYW1lLCAkdHlwZV9pZCk7CgkJfQoJCXJldHVybiAwOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldFNhdmVUaGVTYWxlUGFnZSgkcGFyYW1zPW51bGwsICR1c2VyPW51bGwpCgl7CgkJaWYoIWlzX251bGwoJHVzZXIpKQoJCXsKCQkJJGN1cnJlbnRVc2VyID0gJHVzZXI7CgkJfQoJCWVsc2UKCQl7CgkJCSRjdXJyZW50VXNlciA9IHNlbGY6OmdldEN1cnJlbnRVc2VyKCk7CgkJfQoJCQoJCWlmKCEkY3VycmVudFVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiAiIjsKCQl9CgkJZWxzZQoJCXsKCQkJLy8vIHVzZXIgaXMgbG9nZ2VkIGluLCBsZXRzIGZpbmQgdGhlcmUgbWVtYmVyc2hpcCBpbmZvCgkJCSRtZW1iZXJfdHlwZV9pZCA9ICRjdXJyZW50VXNlci0+Z2V0TWVtYmVyc2hpcElkKCk7CgkJCQoJCQkvLy91c2VyIGhhcyBhIG1lbWJlciB0eXBlLCBjaGVjayBmb3Igc3BlY2lmaWMgbWVtYmVyIHR5cGUgcGFnZQoJCQkkcGFnZV9pZCA9ICR0aGlzLT5nZXRDb3JlUGFnZUlkQnlSZWZUeXBlKE1NX0NvcmVQYWdlVHlwZTo6JFNBVkVUSEVTQUxFLCBNTV9UWVBFX01FTUJFUlNISVBfTEVWRUwsICRtZW1iZXJfdHlwZV9pZCk7CgkJCWlmKGludHZhbCgkcGFnZV9pZCk+MCkKCQkJewoJCQkJcmV0dXJuICR0aGlzLT5nZXRGb3JtYXR0ZWRVcmwoJHBhZ2VfaWQpOwoJCQl9CgkJfQkKCQlyZXR1cm4gIiI7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0SG9tZVBhZ2UoJHBhcmFtcz1udWxsLCAkdXNlcj1udWxsKQoJewoJCWdsb2JhbCAkd3BfcXVlcnk7CgkJaWYoIWlzX251bGwoJHVzZXIpKQoJCXsKCQkJJGN1cnJlbnRVc2VyID0gJHVzZXI7CgkJfQoJCWVsc2UKCQl7CgkJCSRjdXJyZW50VXNlciA9IHNlbGY6OmdldEN1cnJlbnRVc2VyKCk7CgkJfQoJCQoJCWlmKCEkY3VycmVudFVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiAiIjsKCQl9CgkJZWxzZQoJCXsKCQkJLy8vIHVzZXIgaXMgbG9nZ2VkIGluLCBsZXRzIGZpbmQgdGhlcmUgbWVtYmVyc2hpcCBpbmZvCgkJCSRtZW1iZXJzaGlwSWQgPSAkY3VycmVudFVzZXItPmdldE1lbWJlcnNoaXBJZCgpOwoJCgkJCS8vL3VzZXIgaGFzIGEgbWVtYmVyIHR5cGUsIGNoZWNrIGZvciBzcGVjaWZpYyBtZW1iZXIgdHlwZSBwYWdlCgkJCSRwYWdlSWQgPSAkdGhpcy0+Z2V0Q29yZVBhZ2VJZEJ5UmVmVHlwZShNTV9Db3JlUGFnZVR5cGU6OiRNRU1CRVJfSE9NRV9QQUdFLCBNTV9UWVBFX01FTUJFUlNISVBfTEVWRUwsICRtZW1iZXJzaGlwSWQpOwoKCQkJaWYoaW50dmFsKCRwYWdlSWQpPjApCgkJCXsKCQkJCSRvbGRVcmwgPSAiIjsKCQkJCWlmKGlzc2V0KCR3cF9xdWVyeS0+cG9zdC0+SUQpICYmIGludHZhbCgkd3BfcXVlcnktPnBvc3QtPklEKT4wKQoJCQkJewoJCQkJCSRvbGRVcmwgPSAkdGhpcy0+Z2V0Rm9ybWF0dGVkVXJsKCR3cF9xdWVyeS0+cG9zdC0+SUQpOwoJCQkJfQoJCQkJJG5ld1VybCA9ICR0aGlzLT5nZXRGb3JtYXR0ZWRVcmwoJHBhZ2VJZCk7CgkJCQkKCQkJCWlmKCRvbGRVcmwgPT0gJG5ld1VybCkKCQkJCXsKCQkJCQlyZXR1cm4gIiI7CgkJCQl9CgkJCQlyZXR1cm4gJG5ld1VybDsKCQkJfQoJCX0JCgkJcmV0dXJuICIiOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQWxsUmVmZXJlbmNlcygkcGFnZUlkKQoJewoJCSRjb3JlUGFnZSA9IG5ldyBNTV9Db3JlUGFnZSgpOwoJCSRjb3JlUGFnZS0+c2V0UGFnZUlkKCRwYWdlSWQpOwoJCXJldHVybiAkY29yZVBhZ2UtPnNldFJlZmVyZW5jZVBhZ2VzKGFycmF5KCkpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2F2ZVNwZWNpZmljUGFnZSgkcGFnZUlkLCAkY29yZVBhZ2VUeXBlSWQsICRyZWZJZCwgJHJlZlR5cGUpCgl7CgkJLy8vLyBnZXQgZGVmYXVsdCBwYWdlIGluZm8gdG8gZGV0ZXJtaW5lIGNhbGxiYWNrIG1ldGhvZAoJCSRyb3cgPSBNTV9Db3JlUGFnZTo6Z2V0RGVmYXVsdENvcmVQYWdlQnlUeXBlKCRjb3JlUGFnZVR5cGVJZCk7CgkJaWYoISRyb3cpCgkJeyAKCQkJTU1fTWVzc2FnZXM6OmFkZEVycm9yKCJVbmFibGUgdG8gc2F2ZSBNZW1iZXJtb3VzZSBDb3JlIFBhZ2UgT3B0aW9uczogQ291bGQgbm90IGZpbmQgZGVmYXVsdCBjb3JlIHBhZ2UgYnkgQ29yZSBQYWdlIFR5cGUgKHskY29yZVBhZ2VUeXBlSWR9KS4iKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkJCgkJLy8vIGVuc3VyZSByZWYgaWQgaXMgYW4gYXJyYXkgYW5kIGRlbGV0ZSBleGlzdGluZyBzYXZlZCBkYXRhCgkJJHJlZmVyZW5jZUlkcyA9IChpc19hcnJheSgkcmVmSWQpKT8kcmVmSWQ6YXJyYXkoJHJlZklkKTsKCQkKCQkkY29yZVBhZ2UgPSBuZXcgTU1fQ29yZVBhZ2UoKTsKCQkkY29yZVBhZ2UtPnNldFBhZ2VJZCgkcGFnZUlkKTsKCQkkY29yZVBhZ2UtPnNldFJlZlR5cGUoJHJlZlR5cGUpOwoJCSRjb3JlUGFnZS0+c2V0Q29yZVBhZ2VUeXBlSWQoJGNvcmVQYWdlVHlwZUlkKTsKCQlyZXR1cm4gJGNvcmVQYWdlLT5zZXRSZWZlcmVuY2VQYWdlcygkcmVmZXJlbmNlSWRzKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGhhc1JlZmVyZW5jZXMoJHBhZ2VJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJzZWxlY3QgY291bnQoKikgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMgLiIgd2hlcmUgcGFnZV9pZD0neyRwYWdlSWR9JyBhbmQgcmVmX2lkPjAgYW5kIHJlZl90eXBlIElTIE5PVCBOVUxMIGFuZCByZWZfdHlwZSAhPSAnJyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCXJldHVybiAkcm93LT50b3RhbD4wOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2F2ZURlZmF1bHRQYWdlKCRwYWdlSWQsICRjb3JlUGFnZVR5cGVJZCwgJG92ZXJyaWRlPWZhbHNlKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZighJG92ZXJyaWRlKQoJCXsJCgkJCWlmKE1NX0NvcmVQYWdlOjpoYXNEZWZhdWx0Q29yZVBhZ2UoJGNvcmVQYWdlVHlwZUlkLCAkcGFnZUlkKSkKCQkJewoJCQkJTU1fTWVzc2FnZXM6OmFkZEVycm9yKCJDb3JlIHBhZ2UgY291bGQgbm90IGJlIHNhdmVkIHNpbmNlIG9uZSBpcyBhbHJlYWR5IGRlZmluZWQuIik7IAoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfQoJCQoJCSRjb3JlUGFnZSA9IG5ldyBNTV9Db3JlUGFnZSgpOwoJCSRjb3JlUGFnZS0+c2V0Q29yZVBhZ2VUeXBlSWQoJGNvcmVQYWdlVHlwZUlkKTsKCQkkY29yZVBhZ2UtPnNldFBhZ2VJZCgkcGFnZUlkKTsKCQlyZXR1cm4gJGNvcmVQYWdlLT5zZXRBc0RlZmF1bHRQYWdlKCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNDb3JlUGFnZSgkcGFnZUlkLCAkY29yZVBhZ2VUeXBlSWQ9MCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGNvcmVQYWdlQ2FjaGUgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9DT1JFX1BBR0VfQ0FDSEUpOwoJCWlmICghaXNfYXJyYXkoJGNvcmVQYWdlQ2FjaGUpKQoJCXsKCQkJJGNvcmVQYWdlQ2FjaGUgPSBzZWxmOjpjcmVhdGVDb3JlUGFnZUNhY2hlKCk7CgkJfQoJCQoJCWlmICghaXNfYXJyYXkoJGNvcmVQYWdlQ2FjaGUpKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQlmb3JlYWNoICgkY29yZVBhZ2VDYWNoZSBhcyAkcmVnaXN0ZXJlZENvcmVQYWdlVHlwZUlkID0+ICRjb3JlUGFnZUFycmF5KQoJCXsKCQkJaWYgKCgkY29yZVBhZ2VUeXBlSWQgPT0gMCkgfHwgKCRjb3JlUGFnZVR5cGVJZCA9PSAkcmVnaXN0ZXJlZENvcmVQYWdlVHlwZUlkKSkKCQkJewoJCQkJaWYgKGFycmF5X2tleV9leGlzdHMoJHBhZ2VJZCwgJGNvcmVQYWdlQXJyYXkpKQoJCQkJewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q29yZVBhZ2VJZEJ5UmVmVHlwZSgkY29yZVBhZ2VUeXBlSWQsICRyZWZUeXBlLCAkcmVmSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRyb3dzID0gTU1fQ29yZVBhZ2U6OmdldEFsbFJlZmVyZW5jZXNUb0NvcmVQYWdlVHlwZSgkY29yZVBhZ2VUeXBlSWQpOwoJCWlmKCRyb3dzID09IDApCgkJewoJCQlyZXR1cm4gJHJvd3M7CgkJfQoJCQkKCQkkZGVmYXVsdF9wYWdlID0gMDsKCQlmb3JlYWNoKCRyb3dzIGFzICRyb3cpCgkJewoJCQlpZigkcm93LT5yZWZfdHlwZSA9PSAkcmVmVHlwZSAmJiAkcm93LT5yZWZfaWQ9PSRyZWZJZCkKCQkJewoJCQkJcmV0dXJuICRyb3ctPnBhZ2VfaWQ7CgkJCX0KCQkJZWxzZSBpZihpc19udWxsKCRyb3ctPnJlZl90eXBlKSB8fCBlbXB0eSgkcm93LT5yZWZfdHlwZSkpCgkJCXsKCQkJCSRkZWZhdWx0X3BhZ2UgPSAkcm93LT5wYWdlX2lkOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkZGVmYXVsdF9wYWdlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQ29yZVBhZ2VCeUlkKCRwYWdlSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vL3VwZGF0ZSBjb3JlIHBhZ2UgdG8gbm90aGluZy4KCQkkY3AgPSBuZXcgTU1fQ29yZVBhZ2UoKTsKCQkkY3AtPnNldFBhZ2VJZCgkcGFnZUlkKTsKCQkkY3AtPnJlbW92ZUNvcmVQYWdlKCk7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVDb3JlUGFnZUNhY2hlKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGNvcmVQYWdlQ2FjaGUgPSBhcnJheSgpOwoJCSRzcWwgPSAiU0VMRUNUIGlkLHBhZ2VfaWQsY29yZV9wYWdlX3R5cGVfaWQscmVmX3R5cGUscmVmX2lkIEZST00gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgV0hFUkUgcGFnZV9pZCBJUyBOT1QgTlVMTCI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJHJvdykKCQl7CgkJCSRwZXJtYWxpbmsgPSBnZXRfcGVybWFsaW5rKCRyb3ctPnBhZ2VfaWQpOwoJCQlpZiAoIWVtcHR5KCRwZXJtYWxpbmspKQoJCQl7CgkJCQkkcGVybWFsaW5rID0gcHJlZ19yZXBsYWNlKCIoaHR0cHM/Oi8vKSIsICIiLCAkcGVybWFsaW5rICk7CgkJCX0KCQkJJGNvcmVQYWdlQ2FjaGVbJHJvdy0+Y29yZV9wYWdlX3R5cGVfaWRdWyRyb3ctPnBhZ2VfaWRdID0gYXJyYXkoInJlZl90eXBlIiAgPT4gJHJvdy0+cmVmX3R5cGUsCgkJCQkJCQkJCQkJCQkJCQkJCSAgICJyZWZfaWQiICAgID0+ICRyb3ctPnJlZl9pZCwKCQkJCQkJCQkJCQkJCQkJCQkJICAgInBlcm1hbGluayIgPT4gJHBlcm1hbGluawoJCQkpOwoJCX0KCQkKCQlNTV9PcHRpb25VdGlsczo6c2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9DT1JFX1BBR0VfQ0FDSEUsJGNvcmVQYWdlQ2FjaGUpOwoJCXJldHVybiAkY29yZVBhZ2VDYWNoZTsKCX0KfQo=', 0, '2018-11-21 06:38:53'),
(62, 'paymentservicemediator', 'LyoqCiAqCiAqTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwoKLyoqCiAqIE1NX1BheW1lbnRTZXJ2aWNlTWVkaWF0b3IgaXMgYSBjbGFzcyB0aGF0IHNlcnZlcyBhcyBhIG1lZGlhdG9yIGJldHdlZW4gTWVtYmVyTW91c2UgYW5kIHRoZSBhY3RpdmUgcGF5bWVudCBzZXJ2aWNlcwogKiBJdCBub3RpZmllcyB0aGUgcGF5bWVudCBzZXJ2aWNlcyB0aGF0IHRoZXkgbmVlZCB0byBwZXJmb3JtIG5vbi1wYXltZW50IHNwZWNpZmljIHRhc2tzIHN1Y2ggYXMgdXBkYXRpbmcgcHJvZHVjdCBpbmZvcm1hdGlvbi4KICogVGhlIG1lZGlhdG9yIG1heSB1cGRhdGUgbXVsdGlwbGUgcGF5bWVudCBzZXJ2aWNlcyBhcyBhIHJlc3VsdCBvZiBvbmUgY2FsbCwgZGVwZW5kaW5nIG9uIGNvbmZpZ3VyYXRpb24KICovCgpjbGFzcyBNTV9QYXltZW50U2VydmljZU1lZGlhdG9yIHsKCQoJcHJpdmF0ZSAkYXN5bmMgICAgICA9IGZhbHNlOyAvL2NvbWluZyBzb29uCglwcml2YXRlICRhY3RpdmVPbmx5ID0gdHJ1ZTsgIC8vZGV0ZXJtaW5lcyB3aGV0aGVyIGluYWN0aXZlIHNlcnZpY2VzIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBhbHNvCgkKCQoJLyoqCgkgKiBOb3RpZmllcyBwYXltZW50IHNlcnZpY2VzIGEgbmV3IHByb2R1Y3Qgd2FzIGFkZGVkCgkgKiAKCSAqIEBwYXJhbSBNTV9Qcm9kdWN0ICRwcm9kdWN0IFRoZSBuZXdseSBhZGRlZCBwcm9kdWN0CgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBhbGwgdGhlIG5vdGlmaWVkIHNlcnZpY2VzIGhhbmRsZWQgdGhlIG5vdGlmaWNhdGlvbiB3aXRob3V0IGVycm9yLCBmYWxzZSBvdGhlcndpc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG5vdGlmeVByb2R1Y3RBZGRlZChNTV9Qcm9kdWN0ICRwcm9kdWN0KQoJewoJCXJldHVybiAkdGhpcy0+bm90aWZ5U2VydmljZXNPZkV2ZW50KE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6UFJPRFVDVF9BRERFRCwgJHByb2R1Y3QpOwoJfQoJCgoJLyoqCgkgKiBOb3RpZmllcyBwYXltZW50IHNlcnZpY2VzIGEgcHJvZHVjdCB3YXMgdXBkYXRlZAoJICoKCSAqIEBwYXJhbSBNTV9Qcm9kdWN0ICRwcm9kdWN0IFRoZSB1cGRhdGVkIHByb2R1Y3QKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIGFsbCB0aGUgbm90aWZpZWQgc2VydmljZXMgaGFuZGxlZCB0aGUgbm90aWZpY2F0aW9uIHdpdGhvdXQgZXJyb3IsIGZhbHNlIG90aGVyd2lzZQoJICovCglwdWJsaWMgZnVuY3Rpb24gbm90aWZ5UHJvZHVjdFVwZGF0ZWQoTU1fUHJvZHVjdCAkcHJvZHVjdCkKCXsKCQlyZXR1cm4gJHRoaXMtPm5vdGlmeVNlcnZpY2VzT2ZFdmVudChNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXI6OlBST0RVQ1RfVVBEQVRFRCwkcHJvZHVjdCk7Cgl9CgkKCgkvKioKCSAqIE5vdGlmaWVzIHBheW1lbnQgc2VydmljZXMgYSBwcm9kdWN0IHdhcyByZW1vdmVkCgkgKgoJICogQHBhcmFtIE1NX1Byb2R1Y3QgJHByb2R1Y3QgVGhlIHJlbW92ZWQgcHJvZHVjdAoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgYWxsIHRoZSBub3RpZmllZCBzZXJ2aWNlcyBoYW5kbGVkIHRoZSBub3RpZmljYXRpb24gd2l0aG91dCBlcnJvciwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBub3RpZnlQcm9kdWN0UmVtb3ZlZChNTV9Qcm9kdWN0ICRwcm9kdWN0KQoJewoJCXJldHVybiAkdGhpcy0+bm90aWZ5U2VydmljZXNPZkV2ZW50KE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6UFJPRFVDVF9SRU1PVkVELCRwcm9kdWN0KTsKCX0KCQoJCgkvKioKCSAqIE5vdGlmaWVzIHBheW1lbnQgc2VydmljZXMgYSBuZXcgY291cG9uIHdhcyBhZGRlZAoJICoKCSAqIEBwYXJhbSBNTV9Db3VwbiAkY291cG9uIFRoZSBuZXdseSBhZGRlZCBjb3Vwb24KCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIGFsbCB0aGUgbm90aWZpZWQgc2VydmljZXMgaGFuZGxlZCB0aGUgbm90aWZpY2F0aW9uIHdpdGhvdXQgZXJyb3IsIGZhbHNlIG90aGVyd2lzZQoJICovCglwdWJsaWMgZnVuY3Rpb24gbm90aWZ5Q291cG9uQWRkZWQoTU1fQ291cG9uICRjb3Vwb24pCgl7CgkJcmV0dXJuICR0aGlzLT5ub3RpZnlTZXJ2aWNlc09mRXZlbnQoTU1fTWVtYmVyTW91c2VFdmVudExpc3RlbmVyOjpDT1VQT05fQURERUQsICRjb3Vwb24pOwoJfQoJCgkKCS8qKgoJICogTm90aWZpZXMgcGF5bWVudCBzZXJ2aWNlcyBhIGNvdXBvbiB3YXMgdXBkYXRlZAoJICoKCSAqIEBwYXJhbSBNTV9Db3VwbiAkY291cG9uIFRoZSB1cGRhdGVkIGNvdXBvbgoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgYWxsIHRoZSBub3RpZmllZCBzZXJ2aWNlcyBoYW5kbGVkIHRoZSBub3RpZmljYXRpb24gd2l0aG91dCBlcnJvciwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBub3RpZnlDb3Vwb25VcGRhdGVkKE1NX0NvdXBvbiAkY291cG9uKQoJewoJCXJldHVybiAkdGhpcy0+bm90aWZ5U2VydmljZXNPZkV2ZW50KE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6Q09VUE9OX1VQREFURUQsICRjb3Vwb24pOwoJfQoJCgkKCS8qKgoJICogTm90aWZpZXMgcGF5bWVudCBzZXJ2aWNlcyBhIGNvdXBvbiB3YXMgcmVtb3ZlZAoJICoKCSAqIEBwYXJhbSBNTV9Db3VwbiAkY291cG9uIFRoZSByZW1vdmVkIGNvdXBvbgoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgYWxsIHRoZSBub3RpZmllZCBzZXJ2aWNlcyBoYW5kbGVkIHRoZSBub3RpZmljYXRpb24gd2l0aG91dCBlcnJvciwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBub3RpZnlDb3Vwb25SZW1vdmVkKE1NX0NvdXBvbiAkY291cG9uKQoJewoJCXJldHVybiAkdGhpcy0+bm90aWZ5U2VydmljZXNPZkV2ZW50KE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6Q09VUE9OX1JFTU9WRUQsICRjb3Vwb24pOwoJfQoKCQoJLyoqCgkgKiBOb3RpZmllcyBzZXJ2aWNlcyB0aGF0IGFuIGV2ZW50IHdhcyByZWNlaXZlZCwgYW5kIHBhc3NlcyB0aHJvdWdoIHRoZSBldmVudCB0eXBlIGFuZCBhc3NvY2lhdGVkIGRhdGEKCSAqIAoJICogQHBhcmFtIGludGVnZXIgJGV2ZW50VHlwZSBPbmUgb2YgdGhlIGNvbnN0YW50cyBkZWZpbmVkIGluIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcgoJICogQHBhcmFtIHZhcmllcyAkZXZlbnREYXRhIFRoZSBkYXRhIGF0dGFjaGVkIHRvIHRoZSBldmVudAoJICogQHJldHVybiBib29sZWFuIGJvb2xlYW4gdHJ1ZSBpZiBhbGwgdGhlIG5vdGlmaWVkIHNlcnZpY2VzIGhhbmRsZWQgdGhlIG5vdGlmaWNhdGlvbiB3aXRob3V0IGVycm9yLCBmYWxzZSBvdGhlcndpc2UuIFRoaXMgaXMgcGFzc2VkIHRocm91Z2ggdG8gdGhlIGNhbGxlcgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbm90aWZ5U2VydmljZXNPZkV2ZW50KCRldmVudFR5cGUsICRldmVudERhdGEpCgl7CgkJJHBvdGVudGlhbFNlcnZpY2VzID0gKCR0aGlzLT5hY3RpdmVPbmx5KT9NTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldEF2YWlsYWJsZVBheW1lbnRTZXJ2aWNlcygpOk1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2VzQXJyYXkoKTsKCQkkb3ZlcmFsbFN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCS8vVE9ETzogUkVGQUNUT1I6IGltcGxlbWVudCBhc3luY2ggZnVuY3Rpb25hbGl0eQoJCWZvcmVhY2ggKCRwb3RlbnRpYWxTZXJ2aWNlcyBhcyAkcG90ZW50aWFsU2VydmljZSkKCQl7CgkJCWlmICgkcG90ZW50aWFsU2VydmljZSBpbnN0YW5jZW9mIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcikKCQkJewoJCQkJLy9vbmx5IHNlbmQgZXZlbnRzIHRvIHNlcnZpY2VzIHRoYXQgaW1wbGVtZW50IHRoZSBsaXN0ZW5lciBpbnRlcmZhY2UKCQkJCSRvdmVyYWxsU3RhdHVzID0gKCRvdmVyYWxsU3RhdHVzLT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk/KCRwb3RlbnRpYWxTZXJ2aWNlLT5ldmVudFJlY2VpdmVkKCRldmVudFR5cGUsICRldmVudERhdGEpKTokb3ZlcmFsbFN0YXR1czsKCQkJfQoJCX0KCQlyZXR1cm4gJG92ZXJhbGxTdGF0dXM7Cgl9Cn0K', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(63, 'customform', 'Y2xhc3MgTU1fQ3VzdG9tRm9ybSBleHRlbmRzIE1NX0Fic3RyYWN0Rm9ybQp7CglwdWJsaWMgJG1lbWJlckRhdGEgPSBudWxsOwoJcHVibGljICRzdWNjZXNzID0gIiI7CglwdWJsaWMgJG9uU3VjY2Vzc1VybCA9ICIiOwoJCgkvKioKCSAqIERlZmF1bHQgY29uc3RydWN0b3IuIFRha2VzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwoJICogQHBhcmFtIEFycmF5ICRwYXJhbXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgZm9ybSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwYXJhbXM9bnVsbCkKCXsJCgkJaWYoIWlzX251bGwoJHBhcmFtcykpCgkJewoJCQlpZihpc19hcnJheSgkcGFyYW1zKSAmJiBjb3VudCgkcGFyYW1zKSA+IDApCgkJCXsKCQkJCWZvcmVhY2goJHBhcmFtcyBhcyAkaz0+JHYpCgkJCQl7CgkJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJCSQka2V5ID0gJHY7CgkJCQl9CgkJCX0KCQkJCgkJCWlmKGlzc2V0KCRvbnN1Y2Nlc3MpKQoJCQl7CgkJCQkkdGhpcy0+b25TdWNjZXNzVXJsID0gJG9uc3VjY2VzczsKCQkJfQoJCQkKCQkJJHRoaXMtPmluaXRpYWxpemUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpbml0aWFsaXplKCkKCXsKCQlnbG9iYWwgJGN1cnJlbnRfdXNlcjsKCQkJCgkJJHVzZXIgPSBNTV9Vc2VyOjpnZXRDdXJyZW50V1BVc2VyKCk7CgkJCgkJLy8gaGFuZGxlIGZvcm0gc3VibWlzc2lvbi4uLgoJCWlmKGNvdW50KCRfUE9TVCkgPiAwKQoJCXsJCgkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCS8vIGl0ZXJhdGUgb3ZlciBwb3N0IHZhcmlhYmxlcyBhbmQgc2F2ZSBjdXN0b20gZGF0YSBvbiBjdXJyZW50IHVzZXIKCQkJCWZvcmVhY2goJF9QT1NUIGFzICRrPT4kdikKCQkJCXsKCQkJCQlpZihwcmVnX21hdGNoKCIvKG1tX2N1c3RvbV9maWVsZF8pLyIsICRrKSkKCQkJCQl7CgkJCQkJCS8vIGJ5cGFzcyByYWRpbyBidXR0b24gYW5kIGNoZWNrYm94IGhlbHBlciBmaWVsZHMKCQkJCQkJaWYoc3RycG9zKCRrLCAnaGVscGVyJykgPT09IGZhbHNlKQoJCQkJCQl7CgkJCQkJCQkkZmllbGRJZCA9IHByZWdfcmVwbGFjZSgiL1teMC05XSsvIiwgIiIsICRrKTsKCQkJCQkJCSRyZXNwb25zZSA9ICR1c2VyLT5zZXRDdXN0b21EYXRhKCRmaWVsZElkLCAkdik7CgkJCQoJCQkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJCQkJCXsKCQkJCQkJCQlpZighZW1wdHkoJHYpKQoJCQkJCQkJCXsKCQkJCQkJCQkJJHRoaXMtPmVycm9yID0gX21tdCgiRXJyb3Igc2F2aW5nIGRhdGEiKS4iOiB7JHJlc3BvbnNlLT5tZXNzYWdlfSI7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkvLyBkb2VzIGFjY291bnQgdXBkYXRlIGV2ZW50IG5lZWQgdG8gYmUgZGlzcGF0Y2hlZD8KCQkJCSRmaWVsZHMgPSBNTV9DdXN0b21GaWVsZDo6Z2V0Q3VzdG9tRmllbGRzTGlzdCgpOwoJCQkJZm9yZWFjaCgkZmllbGRzIGFzICRpZD0+JHZhbCkKCQkJCXsKCQkJCQlpZihNTV9DdXN0b21GaWVsZERhdGE6Ondhc1JlY2VudGx5VXBkYXRlZCgkaWQsICR1c2VyLT5nZXRJZCgpKSkKCQkJCQl7CgkJCQkJCWRvX2FjdGlvbihNTV9FdmVudDo6JE1FTUJFUl9BQ0NPVU5UX1VQREFURSwgTU1fRXZlbnQ6OnBhY2thZ2VNZW1iZXJEYXRhKCR1c2VyLT5nZXRJZCgpKSk7CgkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJCQkKCQkJCWlmKGVtcHR5KCRtZXNzYWdlKSkKCQkJCXsKCQkJCQkkdGhpcy0+c3VjY2VzcyA9IF9tbXQoIkRhdGEgc2F2ZWQgc3VjY2Vzc2Z1bGx5Iik7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJHRoaXMtPmVycm9yID0gX21tdCgiRXJyb3Igc2F2aW5nIGRhdGE6IHlvdSBtdXN0IGJlIGxvZ2dlZCBpbiIpOwoJCQl9CgkJfQoJCQoJCS8vIHNldCBjdXN0b20gZGF0YSB2YWx1ZXMKCQkkdGhpcy0+bWVtYmVyRGF0YSA9IGFycmF5KCk7CgkJCQoJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQkvLyBnZXQgY3VzdG9tIGZpZWxkIGRhdGEKCQkJJGN1c3RvbUZpZWxkcyA9IE1NX0N1c3RvbUZpZWxkOjpnZXRDdXN0b21GaWVsZERhdGFCeVVzZXIoJHVzZXItPmdldElkKCkpOwoJCQoJCQlmb3JlYWNoKCRjdXN0b21GaWVsZHMgYXMgJGZpZWxkKQoJCQl7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkXyIuJGZpZWxkLT5pZF0gPSAkZmllbGQtPnZhbHVlOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF8iLiRmaWVsZC0+aWQuIl9sYWJlbCJdID0gc3RydG9sb3dlcigkZmllbGQtPmRpc3BsYXlfbmFtZSk7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJLy8gZ2V0IGN1c3RvbSBmaWVsZCBsYWJlbHMKCQkJJGN1c3RvbUZpZWxkcyA9IE1NX0N1c3RvbUZpZWxkOjpnZXRDdXN0b21GaWVsZHNMaXN0KCk7CgkJCgkJCWZvcmVhY2goJGN1c3RvbUZpZWxkcyBhcyAkaWQ9PiRkaXNwbGF5TmFtZSkKCQkJewoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF8iLiRpZC4iX2xhYmVsIl0gPSBzdHJ0b2xvd2VyKCRkaXNwbGF5TmFtZSk7CgkJCX0KCQl9CgkJCgkJLy8gZ3JhYiBjdXN0b20gZGF0YSBmcm9tICRfUkVRVUVTVCBvYmplY3QKCQlpZigkX1JFUVVFU1QpCgkJewoJCQlmb3JlYWNoKCRfUkVRVUVTVCBhcyAka2V5PT4kdmFsdWUpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrZXkpOwoJCQoJCQkJLy8gc2VlIGlmIGN1c3RvbSBmaWVsZCBkYXRhIGlzIGNvbnRhaW5lZCBpbiB0aGUgJF9SRVFVRVNUIG9iamVjdAoJCQkJaWYoc3RycG9zKCRrZXksICJjZl8iKSAhPT0gZmFsc2UpCgkJCQl7CgkJCQkJJGFyciA9IGV4cGxvZGUoIl8iLCAka2V5KTsKCQkKCQkJCQlpZihjb3VudCgkYXJyKSA9PSAyKQoJCQkJCXsKCQkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF8iLiRhcnJbMV1dID0gJHZhbHVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkKCQkkdGhpcy0+aXNWYWxpZCA9IHRydWU7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyBhbGwgb2YgdGhlIEhUTUwgdGhhdCBzaG91bGQgc2hvdyB1cCBhdCAKCSAqIHRoZSB0b3Agb2YgdGhlIGZvcm0gYmFzZWQgb24gdGhlIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24uCgkgKiBAcmV0dXJuIFN0cmluZyBoZWFkZXIgSFRNTCBmb3IgdGhlIGNoZWNrb3V0IGZvcm0KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRm9ybUhlYWRlcigpCgl7CQkKCQkkaHRtbCA9ICR0aGlzLT5nZXRKYXZhc2NyaXB0SW5jbHVkZXMoKTsKCQkkaHRtbCAuPSAiPGZvcm0gaWQ9XCJtbV9jdXN0b21fZm9ybVwiIG5hbWU9XCJtbV9jdXN0b21fZm9ybVwiIG1ldGhvZD1cInBvc3RcIj4KIjsKCQkkaHRtbCAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J2hhc0Zvcm1TdWJtaXR0ZWQnIHZhbHVlPScnIC8+CiI7CgkJcmV0dXJuICRodG1sOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgYWxsIG9mIHRoZSBIVE1MIHRoYXQgc2hvdWxkIHNob3cgdXAgYXQKCSAqIHRoZSBib3R0b20gb2YgdGhlIGZvcm0gYmFzZWQgb24gdGhlIHRoZSBjdXJyZW50IGNvbmZpZ3VyYXRpb24uCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIGZvb3RlciBIVE1MIGZvciB0aGUgY2hlY2tvdXQgZm9ybQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVGb3JtRm9vdGVyKCkKCXsKCQkkaHRtbCA9ICI8L2Zvcm0+CiI7CgkJJGh0bWwgLj0gJHRoaXMtPmdldEluaXRKYXZhc2NyaXB0KCk7CgkJcmV0dXJuICRodG1sOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgaW5jbHVkZSBzdGF0ZW1lbnRzIGZvciByZXF1aXJlZCBqYXZhc2NyaXB0IGZpbGVzLgoJICogQHJldHVybiBTdHJpbmcgdGhhdCBjb250YWlucyB0aGUgamF2YXNjcmlwdCBmb3IgaW5jbHVkaW5nIHJlcXVpcmVkIGphdmFzY3JpcHQgZmlsZXMuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRKYXZhc2NyaXB0SW5jbHVkZXMoKQoJewoJCSR2ZXJzaW9uID0gTWVtYmVyTW91c2U6OmdldFBsdWdpblZlcnNpb24oKTsKCQl3cF9lbnF1ZXVlX3NjcmlwdCgibWVtYmVybW91c2UtY3VzdG9tLWZvcm0iLCBwbHVnaW5zX3VybChNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9qcy91c2VyL21tLWN1c3RvbS1mb3JtLmpzIiksIGFycmF5KCksICR2ZXJzaW9uLCB0cnVlKTsKCQkKCQkvLyBkZXRlcm1pbmUgaWYgdGhlIHVzZXIgc2hvdWxkIGJlIHJlZGlyZWN0ZWQgdG8gYSBzdWNjZXNzIFVSTAoJCWlmKCFlbXB0eSgkdGhpcy0+c3VjY2VzcykgJiYgIWVtcHR5KCR0aGlzLT5vblN1Y2Nlc3NVcmwpKQoJCXsKCQkJcmV0dXJuICI8c2NyaXB0PndpbmRvdy5sb2NhdGlvbiA9IFwieyR0aGlzLT5vblN1Y2Nlc3NVcmx9XCI7PC9zY3JpcHQ+CiI7CgkJfQoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgamF2YXNjcmlwdCB0byBpbml0aWFsaXplIHRoZSBDdXN0b20gZm9ybS4gCgkgKiBAcGFyYW0gYXJyYXkgJGRlZmF1bHREYXRhIHRoaXMgY29udGFpbnMgdGhlIGRlZmF1bHQgZGF0YSB1c2VkIHRvIHByZXBvcHVsYXRlIGNlcnRhaW4gZm9ybSBlbGVtZW50cwoJICogQHJldHVybiBTdHJpbmcgdGhhdCBjb250YWlucyB0aGUgamF2YXNjcmlwdCB0byBpbml0aWFsaXplcyB0aGUgY2hlY2tvdXQgZm9ybS4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEluaXRKYXZhc2NyaXB0KCkKCXsKCQlyZXR1cm4gIiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fU2VjdGlvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjaGVja2luZyBpZiB0aGUgY3VycmVudCB1c2VyIAoJICogc2hvdWxkIHNlZSB0aGUgY29udGVudHMgb2YgdGhpcyBzZWN0aW9uIGJhc2VkIG9uIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9zZWN0aW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAneyRjb2RlfScgU21hcnRUYWcgaXMgbm90IHN1cHBvcnRlZCBmb3IgQ3VzdG9tIGZvcm1zLiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRmllbGQgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGZvcm0gZmllbGQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZmllbGQoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCQoJCWlmKCFpc3NldCgkdHlwZSkpCgkJewoJCQkkdHlwZSA9ICJjdXN0b20iOwoJCX0KCQkKCQlpZighaXNzZXQoJGNsYXNzKSB8fCBlbXB0eSgkY2xhc3MpKQoJCXsKCQkJJGNsYXNzID0gIm1tLXRleHRGaWVsZCI7CgkJfQoJCQoJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQl7CgkJCWNhc2UgImN1c3RvbSI6CgkJCWNhc2UgImN1c3RvbS1oaWRkZW4iOgoJCQkJaWYoaXNzZXQoJGlkKSkKCQkJCXsKCQkJCQkkY3VzdG9tRmllbGQgPSBNTV9DdXN0b21GaWVsZDo6Z2V0RGF0YUJ5RmllbGRJZCgkaWQpOwoJCQkJCQkKCQkJCQlpZigkY3VzdG9tRmllbGQtPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCSRjcm50VmFsdWUgPSAiIjsKCQkJCQkJaWYoaXNzZXQoJGZvcm0tPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF97JGlkfSJdKSAmJiAkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9Il0gIT0gIiIpCgkJCQkJCXsKCQkJCQkJCSRjcm50VmFsdWUgPSAkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9Il07CgkJCQkJCX0KCQkJCQkJCgkJCQkJCWlmKCR0eXBlID09ICJjdXN0b20taGlkZGVuIikKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2N1c3RvbV9maWVsZF97JGlkfScgbmFtZT0nbW1fY3VzdG9tX2ZpZWxkX3skaWR9JyAiOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkY3JudFZhbHVlKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgIjsJCQkJCQkJCQoJCQkJCQkJJG91dHB1dFN0ciAuPSAiLz4KIjsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gJGN1c3RvbUZpZWxkLT5kcmF3KCRjcm50VmFsdWUsICRjbGFzcyk7CgkJCQkJCQkKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9jdXN0b21fZmllbGRfeyRpZH1fdHlwZScgIjsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gInZhbHVlPSciLiRjdXN0b21GaWVsZC0+Z2V0VHlwZSgpLiInICI7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICIvPgoiOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fY3VzdG9tX2ZpZWxkX3skaWR9X2xhYmVsJyAiOwoJCQkJCQoJCQkJCQlpZihpc3NldCgkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9X2xhYmVsIl0pKQoJCQkJCQl7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICJ2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRmb3JtLT5tZW1iZXJEYXRhWyJtbV9jdXN0b21fZmllbGRfeyRpZH1fbGFiZWwiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInICI7CgkJCQkJCX0KCQkJCQkKCQkJCQkJJG91dHB1dFN0ciAuPSAiLz4KIjsKCQkJCQkJaWYoaXNzZXQoJGlzcmVxdWlyZWQpICYmIHN0cnRvbG93ZXIoJGlzcmVxdWlyZWQpID09ICJ0cnVlIikKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2N1c3RvbV9maWVsZF97JGlkfV9yZXF1aXJlZCcgdmFsdWU9JzEnIC8+CiI7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fY3VzdG9tX2ZpZWxkX3skaWR9X3JlcXVpcmVkJyB2YWx1ZT0nMCcgLz4KIjsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICJJbnZhbGlkIGN1c3RvbSBmaWVsZCBJRCBvZiAneyRpZH0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAnaWQnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSB3aXRoIHR5cGUgeyR0eXBlfS4iOwoJCQkJfQoJCQkJCQoJCQkJYnJlYWs7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBJbnZhbGlkIHR5cGUgb2YgJ3skdHlwZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCWJyZWFrOwoJCX0KCQkJCgkJcmV0dXJuICRvdXRwdXRTdHI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRGF0YSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhlIAoJICogZGF0YSBlbGVtZW50IGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZCBhbmQgdGhlIGZvcm0gY29uZmlndXJhdGlvbi4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX2RhdGEoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd7JGNvZGV9JyBTbWFydFRhZyBpcyBub3Qgc3VwcG9ydGVkIGZvciBDdXN0b20gZm9ybXMuIjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9NZXNzYWdlIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIHJlbmRlcmluZyB0aGUgCgkgKiBtZXNzYWdlIGVsZW1lbnQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fbWVzc2FnZSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiIjsKCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsKCQkJCWNhc2UgImVycm9yIjoKCQkJCQlpZigkZm9ybS0+ZXJyb3IgIT0gIiIpCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICI8cCBjbGFzcz1cIm1tLWVycm9yXCI+Ii4kZm9ybS0+ZXJyb3IuIjwvcD4iOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInN1Y2Nlc3MiOgoJCQkJCWlmKCRmb3JtLT5zdWNjZXNzICE9ICIiKQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAiPHAgY2xhc3M9XCJtbS1zdWNjZXNzXCI+Ii4kZm9ybS0+c3VjY2Vzcy4iPC9wPiI7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiAiSW52YWxpZCB0eXBlIG9mICd7JHR5cGV9JyBwYXNzZWQgdG8geyRjb2RlfSI7CgkJCQkJYnJlYWs7CgkJCX0KCQkJCgkJCXJldHVybiAkb3V0cHV0U3RyOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIHskY29kZX0gU21hcnRUYWciOwoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9CdXR0b24gdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgCgkgKiByZXR1cm5pbmcgdGhlIGFwcHJvcHJpYXRlIGphdmFzY3JpcHQgdG8gc3VibWl0IHRoZSBmb3JtIGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZC4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX2J1dHRvbigkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiIjsKCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsKCQkJCWNhc2UgInN1Ym1pdCI6CgkJCQkJaWYoIWlzc2V0KCRsYWJlbCkpCgkJCQkJewoJCQkJCQkkbGFiZWwgPSAiU3VibWl0IjsKCQkJCQl9CgkJCQkJaWYoIWlzc2V0KCRjb2xvcikpCgkJCQkJewoJCQkJCQkkY29sb3IgPSAiIjsKCQkJCQl9CgkJCQkJaWYoIWlzc2V0KCRjbGFzcykpCgkJCQkJewoJCQkJCQkkY3VzdG9tQ2xhc3MgPSAibW0tYnV0dG9uIHskY29sb3J9IjsKCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCSRjdXN0b21DbGFzcyA9ICRjbGFzczsKCQkJCQl9CgkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9XCJzdWJtaXRcIiBuYW1lPVwibW1fY3VzdG9tX2Zvcm1fc3VibWl0XCIgdmFsdWU9XCJ7JGxhYmVsfVwiIGlkPVwibW0tc3VibWl0LWJ1dHRvblwiIGNsYXNzPVwieyRjdXN0b21DbGFzc31cIiBvbmNsaWNrPVwicmV0dXJuIGN1c3RvbWZvcm1fanMuY2hlY2tGaWVsZHMoKTtcIiAvPiI7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiAiSW52YWxpZCB0eXBlIG9mICd7JHR5cGV9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSI7CgkJCQkJYnJlYWs7CgkJCX0KCQkJCgkJCXJldHVybiAkb3V0cHV0U3RyOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIHskY29kZX0gU21hcnRUYWciOwoJCX0KCX0KfQoK', 0, '2018-11-21 06:38:53'),
(64, 'accessrightsview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCiBjbGFzcyBNTV9BY2Nlc3NSaWdodHNWaWV3IGV4dGVuZHMgTU1fUkJBQ0dlbmVyYWxFbXBsb3llZVZpZXcKIHsKIAogCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0dFVF9BQ0NFU1NfUklHSFRTX09QVElPTlMgPSAiZ2V0QWNjZXNzUmlnaHRzT3B0aW9ucyI7CiAJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUkVGUkVTSF9NRVRBX0JPWCA9ICJyZWZyZXNoTWV0YUJveCI7CiAJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUkVNT1ZFX0FDQ0VTU19SSUdIVFMgPSAicmVtb3ZlQWNjZXNzUmlnaHRzIjsKIAlwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9FRElUX0FDQ0VTU19SSUdIVCA9ICJlZGl0QWNjZXNzUmlnaHQiOwogCQogCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCiAJewogCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0FWRToKCQkJCQlyZXR1cm4gJHRoaXMtPnNhdmVBY2Nlc3NSaWdodHMoJHBvc3QpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fRURJVF9BQ0NFU1NfUklHSFQ6CgkJCQkJcmV0dXJuICR0aGlzLT5lZGl0QWNjZXNzUmlnaHQoJHBvc3QpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fR0VUX0FDQ0VTU19SSUdIVFNfT1BUSU9OUzoKCQkJCQlyZXR1cm4gJHRoaXMtPmdldEFjY2Vzc1JpZ2h0c09wdGlvbnMoJHBvc3QpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUkVGUkVTSF9NRVRBX0JPWDoKCQkJCQlyZXR1cm4gJHRoaXMtPnJlZnJlc2hNZXRhQm94KCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRV9BQ0NFU1NfUklHSFRTOgoJCQkJCXJldHVybiAkdGhpcy0+cmVtb3ZlQWNjZXNzUmlnaHRzKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZWRpdEFjY2Vzc1JpZ2h0KCRwb3N0KQogCXsKCQkkcGMgPSBuZXcgTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZSgpOwoJCSRpbmZvPW5ldyBzdGRDbGFzcygpOwkKCQkkaW5mby0+YWNjZXNzX3R5cGUgPSIiOwoJCSRpbmZvLT5hY2Nlc3NfaWQgPSIiOwoJCSRpbmZvLT5kYXkgPSAiMCI7CgkJJGluZm8tPm9wdGlvbnMgPSAiIjsKCQkkYWNjZXNzX2FyciA9IGFycmF5KCdtdCc9PidNZW1iZXJzaGlwIExldmVsJywnYXQnPT4nQnVuZGxlJyk7CgkJJGluZm8tPmFjY2Vzc19yaWdodHNfY2hvaWNlID0gIiI7CgkJCgkJJGluZm8tPmFjY2Vzc19yaWdodHNfbXRfc3R5bGUgPSAiZGlzcGxheTpub25lOyI7CgkJJGluZm8tPmFjY2Vzc19yaWdodHNfYXRfc3R5bGUgPSAiZGlzcGxheTpub25lOyI7CgkJJGluZm8tPmVkaXQgPSAiMCI7CgkJaWYoaXNzZXQoJHBvc3RbImFjY2Vzc190eXBlIl0pICYmIGlzc2V0KCRwb3N0WyJhY2Nlc3NfaWQiXSkpCgkJewoJCQkkaW5mby0+ZWRpdCA9ICIxIjsKCQkJJGluZm8tPmFjY2Vzc190eXBlID0gJHBvc3RbImFjY2Vzc190eXBlIl07CgkJCSRpbmZvLT5hY2Nlc3NfaWQgPSAkcG9zdFsiYWNjZXNzX2lkIl07CgkJCSRpbmZvLT5kYXkgPSAkcGMtPmdldERheXMoJHBvc3RbImFjY2Vzc19pZCJdLCAkcG9zdFsiYWNjZXNzX3R5cGUiXSwgJHBvc3RbInBvc3RfSUQiXSk7CgkJCXN3aXRjaCgkaW5mby0+YWNjZXNzX3R5cGUpCgkJCXsKCQkJCWNhc2UgIm1lbWJlcl90eXBlIjoKCQkJCQkkb2JqICA9bmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkaW5mby0+YWNjZXNzX2lkKTsKCQkJCQkkaW5mby0+b3B0aW9ucyA9ICI8b3B0aW9uIHZhbHVlPSciLiRvYmotPmdldElkKCkuIic+Ii4kb2JqLT5nZXROYW1lKCkuIjwvb3B0aW9uPiI7CgkJCQkJJGluZm8tPmFjY2Vzc19yaWdodHNfbXRfc3R5bGUgPSAiIjsKCQkJCQl1bnNldCgkYWNjZXNzX2FyclsiYXQiXSk7CgkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSAiYWNjZXNzX3RhZyI6CgkJCQkJJG9iaiAgPW5ldyBNTV9CdW5kbGUoJGluZm8tPmFjY2Vzc19pZCk7CgkJCQkJJGluZm8tPm9wdGlvbnMgPSAiPG9wdGlvbiB2YWx1ZT0nIi4kb2JqLT5nZXRJZCgpLiInPiIuJG9iai0+Z2V0TmFtZSgpLiI8L29wdGlvbj4iOwoJCQkJCSRpbmZvLT5hY2Nlc3NfcmlnaHRzX2F0X3N0eWxlID0gIiI7CgkJCQkJdW5zZXQoJGFjY2Vzc19hcnJbIm10Il0pOwoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJCgkJZm9yZWFjaCgkYWNjZXNzX2FyciBhcyAkdmFsdWU9PiR0eHQpCgkJewoJCQkkaW5mby0+YWNjZXNzX3JpZ2h0c19jaG9pY2UuPSAiPG9wdGlvbiB2YWx1ZT0neyR2YWx1ZX0nPnskdHh0fTwvb3B0aW9uPiI7CgkJfQoJCQoJCSRkYXRhPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iL3BhZ2VfbWV0YS5kaWFsb2cucGhwIiwgJGluZm8pOwoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGRhdGEpOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gcmVmcmVzaE1ldGFCb3goJHBvc3QpCgl7CgkJJG9iaiAgPW5ldyBzdGRDbGFzcygpOwoJCSRvYmotPklEID0gJHBvc3RbInBvc3RfSUQiXTsKCQkkb2JqLT5wYWdlX3R5cGUgPSAoaXNzZXQoJHBvc3RbInBvc3RfdHlwZSJdKSk/JHBvc3RbInBvc3RfdHlwZSJdOm51bGw7CgkJJHBoID0gbmV3IE1NX1Byb3RlY3RlZENvbnRlbnRWaWV3KCk7CgkJb2Jfc3RhcnQoKTsKCQkkcGgtPnBvc3RQdWJsaXNoaW5nQm94KCRvYmosIHRydWUpOwoJCSRjb250ZW50cyA9IG9iX2dldF9jb250ZW50cygpOwoJCW9iX2VuZF9jbGVhbigpOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGNvbnRlbnRzKTsKCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzUmlnaHRzT3B0aW9ucygkcG9zdCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKCgkJJHNlbF9pZCA9ICIiOwoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pPjApCgkJCSRzZWxfaWQgPSRwb3N0WyJpZCJdOwoJCQoJCSR0YWJsZSA9IE1NX1RBQkxFX0JVTkRMRVM7CgkJaWYoIWlzc2V0KCRwb3N0WyJ0eXBlIl0pIHx8IChpc3NldCgkcG9zdFsidHlwZSJdKSAmJiAkcG9zdFsidHlwZSJdPT0ibXQiKSkKCQkJJHRhYmxlID0gTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFM7CgkJCQoJCSRxdWFsaWZpZXIgPSAoJHRhYmxlPT1NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUyk/J21lbWJlcl90eXBlJzonYWNjZXNzX3RhZyc7CgkJCQoJCS8vZ2V0IGV4aXN0aW5nIGFjY2VzcyByaWdodHMKCQkkcGMgPSBuZXcgTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZSgpOwoJCSRleGlzdGluZ19yaWdodHMgPSAkcGMtPmdldFBvc3RBY2Nlc3NSaWdodHMoJHBvc3RbInBvc3RfSUQiXSk7CgkJJHJpZ2h0cyA9IGFycmF5KCk7CgkJCgkJaWYoaXNzZXQoJHBvc3RbImlkIl0pICYmIGludHZhbCgkcG9zdFsiaWQiXSk+MCkKCQl7CgkJCSRzcWwgPSAic2VsZWN0IGlkLCBuYW1lIGZyb20geyR0YWJsZX0gd2hlcmUgaWQ9J3skcG9zdFsiaWQiXX0nIGxpbWl0IDEiOwoJCQkKCQkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkkY29udiA9IGFycmF5KCk7CgkJCWlmKGlzX29iamVjdCgkcm93KSkKCQkJewoJCQkJJGNvbnYgPSBhcnJheSgkcm93LT5pZD0+JHJvdy0+bmFtZSk7CgkJCX0KCQkJJGh0bWwgID0gTU1fSHRtbFV0aWxzOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRjb252KTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkaHRtbCk7CgkJfQoJCQoJCWZvcmVhY2goJGV4aXN0aW5nX3JpZ2h0cyBhcyAkcm93KQoJCXsKCQkJaWYoaXNzZXQoJHNlbF9pZCkgJiYgaW50dmFsKCRzZWxfaWQpPjApCgkJCXsgCgkJCQlpZigkc2VsX2lkPT0kcm93LT5hY2Nlc3NfaWQgJiYgJHJvdy0+YWNjZXNzX3R5cGU9PSRxdWFsaWZpZXIpCgkJCQkJJHJpZ2h0c1skcm93LT5hY2Nlc3NfdHlwZV1bXSA9ICRyb3ctPmFjY2Vzc19pZDsKCQkJfQoJCQllbHNlCgkJCQkkcmlnaHRzWyRyb3ctPmFjY2Vzc190eXBlXVtdID0gJHJvdy0+YWNjZXNzX2lkOwkKCQl9CgkJJHJvd3MgPSBwYXJlbnQ6OmdldERhdGEoJHRhYmxlKTsKCQkkY29udl9yb3dzID0gYXJyYXkoKTsKCQlpZighJHJvd3MpCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJycpOwoJCgkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCXsKCQkJaWYoaXNzZXQoJHJpZ2h0c1skcXVhbGlmaWVyXSkgJiYgaXNfYXJyYXkoJHJpZ2h0c1skcXVhbGlmaWVyXSkpCgkJCXsKCQkJCWlmKGluX2FycmF5KCRyb3ctPmlkLCAkcmlnaHRzWyRxdWFsaWZpZXJdKSkKCQkJCQljb250aW51ZTsKCQkJfQoJCQkJCgkJCSRjb252X3Jvd3NbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQl9CgkJJGh0bWwgID0gTU1fSHRtbFV0aWxzOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRjb252X3Jvd3MsICRzZWxfaWQpOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGh0bWwpOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0Vmlld0RhdGEoJHNvcnRCeT1udWxsLCAkc29ydERpcj1udWxsKQoJewoJCSRwYyA9IG5ldyBNTV9Qcm90ZWN0ZWRDb250ZW50RW5naW5lKCk7CgkJJGluZm89bmV3IHN0ZENsYXNzKCk7CQoJCSRpbmZvLT5hY2Nlc3NfdHlwZSA9IiI7CgkJJGluZm8tPmFjY2Vzc19pZCA9IiI7CgkJJGluZm8tPmRheSA9ICIwIjsKCQkkYWNjZXNzX2FyciA9IGFycmF5KCdtdCc9PidNZW1iZXJzaGlwIExldmVsJywnYXQnPT4nQnVuZGxlJyk7CgkJJGluZm8tPmFjY2Vzc19yaWdodHNfY2hvaWNlID0gIiI7CgkJCgkJJGluZm8tPmFjY2Vzc19yaWdodHNfbXRfc3R5bGUgPSAiZGlzcGxheTpub25lOyI7CgkJJGluZm8tPmFjY2Vzc19yaWdodHNfYXRfc3R5bGUgPSAiZGlzcGxheTpub25lOyI7CgkJJGluZm8tPmVkaXQgPSAiMCI7CgkJaWYoaXNzZXQoJHBvc3RbImFjY2Vzc190eXBlIl0pICYmIGlzc2V0KCRwb3N0WyJhY2Nlc3NfaWQiXSkpCgkJewoJCQkkaW5mby0+ZWRpdCA9ICIxIjsKCQkJJGluZm8tPmFjY2Vzc190eXBlID0gJHBvc3RbImFjY2Vzc190eXBlIl07CgkJCSRpbmZvLT5hY2Nlc3NfaWQgPSAkcG9zdFsiYWNjZXNzX2lkIl07CgkJCSRpbmZvLT5kYXkgPSAkcGMtPmdldERheXMoJHBvc3RbImFjY2Vzc19pZCJdLCAkcG9zdFsiYWNjZXNzX3R5cGUiXSwgJHBvc3RbInBvc3RfSUQiXSk7CgkJCS8vJGluZm8tPmRheSA9IAoJCQlzd2l0Y2goJGluZm8tPmFjY2Vzc190eXBlKQoJCQl7CgkJCQljYXNlICJtZW1iZXJfdHlwZSI6CgkJCQkJdW5zZXQoJGFjY2Vzc19hcnJbImF0Il0pOwoJCQkJYnJlYWs7CgkJCQkKCQkJCWNhc2UgImFjY2Vzc190YWciOgoJCQkJCXVuc2V0KCRhY2Nlc3NfYXJyWyJtdCJdKTsKCQkJCWJyZWFrOwoJCQkJCgkJCX0KCQl9CgkJCgkJZm9yZWFjaCgkYWNjZXNzX2FyciBhcyAkdmFsdWU9PiR0eHQpCgkJCSRpbmZvLT5hY2Nlc3NfcmlnaHRzX2Nob2ljZS49ICI8b3B0aW9uIHZhbHVlPSd7JHZhbHVlfSc+eyR0eHR9PC9vcHRpb24+IjsKCQkKCQlyZXR1cm4gJGluZm87Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzYXZlQWNjZXNzUmlnaHRzKCRwb3N0KQoJewoJCSRyZXQgPSBmYWxzZTsKCQkkcGMgPSBuZXcgTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZSgpOwoJCQoJCWlmKCFpc3NldCgkcG9zdFsicG9zdF9JRCJdKSB8fCAoaXNzZXQoJHBvc3RbInBvc3RfSUQiXSkgJiYgaW50dmFsKCRwb3N0WyJwb3N0X0lEIl0pPD0wKSkgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZmluZCB0aGUgY29ycmVzcG9uZGluZyBwb3N0LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwkKCQl9CgkJCgkJJHBvc3RfZWxlbSA9ICJtbV9tZW1iZXJfdHlwZXNfb3B0IjsKCQkKCQlpZigkcG9zdFsidHlwZSJdICE9ICJtZW1iZXJfdHlwZSIpIHsKCQkJJHBvc3RfZWxlbSA9ICJtbV9hY2Nlc3NfdGFnc19vcHQiOwoJCX0KCQkKCQlpZihpbnR2YWwoJHBvc3RbImVkaXRfaWQiXSk+MCkKCQl7CgkJCSRyZXQgPSAkcGMtPnVwZGF0ZVBvc3RBY2Nlc3NSaWdodHMoJHBvc3RbInBvc3RfSUQiXSwgJHBvc3RbInR5cGUiXSwgJHBvc3RbJHBvc3RfZWxlbV0sICRwb3N0WyJkYXkiXSk7CgkJfQoJCWVsc2UgCgkJewoJCQkkcmV0ID0gJHBjLT5zZXRQb3N0QWNjZXNzUmlnaHRzKCRwb3N0WyJwb3N0X0lEIl0sICRwb3N0WyJ0eXBlIl0sICRwb3N0WyRwb3N0X2VsZW1dLCAkcG9zdFsiZGF5Il0pOwoJCX0KCQkKCQlpZigkcmV0ID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzYXZlIHByb3RlY3RlZCBhY2Nlc3MiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZUFjY2Vzc1JpZ2h0cygkcG9zdCkKCXsJCgkJJHJlcSA9IGFycmF5KCdhY2Nlc3NfaWQnLCdwb3N0X0lEJywgJ2FjY2Vzc190eXBlJyk7CgkJJGVycm9ycyA9ICIiOwoJCSRyZXN1bHQgPSAwOwoJCWZvcmVhY2goJHJlcSBhcyAka2V5KQoJCXsKCQkJaWYoIWlzc2V0KCRwb3N0WyRrZXldKSkKCQkJCSRlcnJvcnMuPSAka2V5LiIgaXMgbm90IHZhbGlkLjxiciAvPiI7CgkJCWVsc2UKCQkJCSQka2V5ID0kcG9zdFska2V5XTsKCQl9CgkJaWYoZW1wdHkoJGVycm9ycykpCgkJewoJCQkkcGMgPSBuZXcgTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZSgpOwoJCQlpZigkcGMtPnJlbW92ZUFjY2Vzc1JpZ2h0cygkcG9zdF9JRCwgJGFjY2Vzc19pZCwgJGFjY2Vzc190eXBlKSkKCQkJewoJCQkJJHJlc3VsdD0xOwoJCQl9CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZXJyb3JzLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNQYWdlKCRwb3N0X3R5cGU9bnVsbCkKCXsKCQlpZihpc19udWxsKCRwb3N0X3R5cGUpKQoJCXsKCQkJZ2xvYmFsICRwb3N0OwoJCQlpZihpc3NldCgkcG9zdC0+cG9zdF90eXBlKSkKCQkJewoJCQkJJHBvc3RfdHlwZSA9ICRwb3N0LT5wb3N0X3R5cGU7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQl9CgkJCgkJaWYoJHBvc3RfdHlwZSA9PSAicG9zdCIpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCS8vIGNoZWNrIGNhcGFiaWxpdGllcyBvZiB0aGUgY3VzdG9tIHBvc3QgdHlwZQoJCSRwb3N0VHlwZU9iaiA9IGdldF9wb3N0X3R5cGVfb2JqZWN0KCRwb3N0X3R5cGUpOwoJCQoJCWlmKCFpc19udWxsKCRwb3N0VHlwZU9iaikgJiYgaXNzZXQoJHBvc3RUeXBlT2JqLT5jYXBhYmlsaXR5X3R5cGUpICYmICRwb3N0VHlwZU9iai0+Y2FwYWJpbGl0eV90eXBlID09ICJwYWdlIikKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CiB9Cg==', 0, '2018-11-21 06:38:53'),
(65, 'totalvaluereport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fVG90YWxWYWx1ZVJlcG9ydCBleHRlbmRzIE1NX0FkdmFuY2VkUmVwb3J0QmFzZSAKewoJCglwcm90ZWN0ZWQgJHZpc3VhbEVsZW1lbnRzID0gYXJyYXkoIk1NX1JlcG9ydERhdGFHcmlkIik7CgkKCXB1YmxpYyBzdGF0aWMgJFRPVEFMX1ZBTFVFX1JFUE9SVF9EQVRBR1JJRCA9ICJ0b3RhbF92YWx1ZV9yZXBvcnRfZGF0YWdyaWQiOwoJCgkvL3F1ZXJ5IGlkZW50aWZpZXJzCglwdWJsaWMgc3RhdGljICRUT1RBTF9WQUxVRV9SRVBPUlRfUVVFUlkgPSAidG90YWxfdmFsdWVfcmVwb3J0X3F1ZXJ5IjsKCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkgCgl7CgkJc3dpdGNoICgkZWxlbWVudElkZW50aWZpZXIpCgkJewoJCQljYXNlIHNlbGY6OiRUT1RBTF9WQUxVRV9SRVBPUlRfREFUQUdSSUQ6CgkJCQlyZXR1cm4gJHRoaXMtPnJlbmRlclRvdGFsVmFsdWVSZXBvcnREYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJVbmFibGUgdG8gcmVuZGVyIHZpc3VhbCBlbGVtZW50OiBpZGVudGlmaWVyICIuKCghaXNfYXJyYXkoJGVsZW1lbnRJZGVudGlmaWVyKSAmJiAhaXNfb2JqZWN0KCRlbGVtZW50SWRlbnRpZmllcikpPyJ7JGVsZW1lbnRJZGVudGlmaWVyfSAiOiIiKS4idW5rbm93biIsTU1fUmVwb3J0UmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJUb3RhbFZhbHVlUmVwb3J0RGF0YWdyaWQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKCR0aGlzLHNlbGY6OiRUT1RBTF9WQUxVRV9SRVBPUlRfUVVFUlksICRwYXJhbXMpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQkKCQkkZ3JpZEhlYWRlcnMgPSBhcnJheSgiYWZmaWxpYXRlX2lkIiA9PiBhcnJheSgnbGFiZWwnPT4iQWZmaWxpYXRlIiksIAoJCQkJCQkgICAgICIwX2RheSIgICAgICAgID0+IGFycmF5KCdsYWJlbCc9PiJEYXkgMCIsICAgJ2NvbHVtblR5cGUnPT4nbW9uZXknKSwKCQkJCQkJCSAiN19kYXkiICAgICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDciLCAgICdjb2x1bW5UeXBlJz0+J21vbmV5JyksCgkJCQkJCQkgIjE0X2RheSIgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAxNCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkJICIyMV9kYXkiICAgICAgID0+IGFycmF5KCdsYWJlbCc9PiJEYXkgMjEiLCAgJ2NvbHVtblR5cGUnPT4nbW9uZXknKSwKCQkJCQkJCSAiMzBfZGF5IiAgICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDMwIiwgICdjb2x1bW5UeXBlJz0+J21vbmV5JyksCgkJCQkJCQkgIjYwX2RheSIgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSA2MCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkJICI5MF9kYXkiICAgICAgID0+IGFycmF5KCdsYWJlbCc9PiJEYXkgOTAiLCAgJ2NvbHVtblR5cGUnPT4nbW9uZXknKSwKCQkJCQkJCSAiMTIwX2RheSIgICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDEyMCIsICdjb2x1bW5UeXBlJz0+J21vbmV5JyksCgkJCQkJCQkgIjE1MF9kYXkiICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAxNTAiLCAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkJICIxODBfZGF5IiAgICAgID0+IGFycmF5KCdsYWJlbCc9PiJEYXkgMTgwIiwgJ2NvbHVtblR5cGUnPT4nbW9uZXknKQoJCQkJCQkJCQoJCSk7CgkJJGdyaWQgPSBNTV9SZXBvcnREYXRhZ3JpZDo6Y3JlYXRlRnJvbURhdGEoc2VsZjo6JFRPVEFMX1ZBTFVFX1JFUE9SVF9EQVRBR1JJRCwgJGdyaWRIZWFkZXJzLCAkZGF0YVJlc3BvbnNlLCRkaXJlY3RpdmVzKTsKCQkvLyRncmlkLT5zZXRHcmlkVGl0bGUoIkNoYW5uZWwgU2FsZXMgUmVwb3J0Iik7CgkJJGdyaWQtPnNldFNob3dIZWFkZXJSb3coZmFsc2UpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGdyaWQtPnJlbmRlcigpKTsKCX0KCQoJCgkvKioKCSAqIEdlbmVyYXRlIHRoZSBkYXRhIGZvciB0aGUgQ2hhbm5lbCBTYWxlcyByZXBvcnQuIAoJICogQ29uc3RyYWludDogVGhlIHN1cHBsaWVkIHBhcmFtcyBtdXN0IGNvbnRhaW4gYSBzdGFydCBhbmQgZW5kIGRhdGUKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwYXJhbXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgcmVzdWx0cwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlVG90YWxWYWx1ZVJlcG9ydERhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFpc19hcnJheSgkcGFyYW1zKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBDaGFubmVsIFNhbGVzIHJlcG9ydCBkYXRhOiBJbXByb3BlciBwYXJhbWV0ZXJzIGZvcm1hdCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICghaXNzZXQoJHBhcmFtc1snc3RhcnRfZGF0ZSddKSB8fCAhaXNzZXQoJHBhcmFtc1snZW5kX2RhdGUnXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZ2VuZXJhdGUgQ2hhbm5lbCBTYWxlcyByZXBvcnQgZGF0YTogU3RhcnQgYW5kIEVuZCBkYXRlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdHJhbnNhY3Rpb25zVGFibGUgPSBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0c7CgkJJG9yZGVyc1RhYmxlID0gTU1fVEFCTEVfT1JERVJTOwoJCQoJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCBIOmk6cyIsc3RydG90aW1lKCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkpOyAvL215c3FsIGZvcm1hdAoJCSRlbmREYXRlID0gICBkYXRlKCJZLW0tZCBIOmk6cyIsc3RydG90aW1lKCRwYXJhbXNbJ2VuZF9kYXRlJ10pKTsKCQkKCQkkYWZmaWxpYXRlUmVzdWx0cyA9IGFycmF5KCk7CgkJJHN1YmFmZmlsaWF0ZVJlc3VsdHMgPSBhcnJheSgpOwoJCQoJCS8qIGdldCAzMCw2MCw5MCwxMjAsMTUwIGFuZCAxODAgZGF5IGN1c3RvbWVyIHZhbHVlICovCgkJJHNxbCA9ICJTRUxFQ1QgSUYoYWZmaWxpYXRlX2lkPScnLCdbdW5zcGVjaWZpZWRdJyxhZmZpbGlhdGVfaWQpIEFTIGFmZmlsaWF0ZV9pZCwiLgoJCQkgICAiSUYoc3ViX2FmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsc3ViX2FmZmlsaWF0ZV9pZCkgQVMgc3ViX2FmZmlsaWF0ZV9pZCwiLgoJCQkgICAiQUJTKFNVTShJRihkYXlzX291dD0wLGFtb3VudCwwKSkpIEFTIDBfZGF5LCIuCgkJCSAgICJBQlMoU1VNKElGKGRheXNfb3V0PD03LGFtb3VudCwwKSkpIEFTIDdfZGF5LCIuCgkJCSAgICJBQlMoU1VNKElGKGRheXNfb3V0PD0xNCxhbW91bnQsMCkpKSBBUyAxNF9kYXksIi4KCQkJICAgIkFCUyhTVU0oSUYoZGF5c19vdXQ8PTIxLGFtb3VudCwwKSkpIEFTIDIxX2RheSwiLgoJCQkgICAiQUJTKFNVTShJRihkYXlzX291dDw9MzAsYW1vdW50LDApKSkgQVMgMzBfZGF5LCIuCgkJCSAgICJBQlMoU1VNKElGKGRheXNfb3V0PD02MCxhbW91bnQsMCkpKSBBUyA2MF9kYXksIi4KCQkJICAgIkFCUyhTVU0oaWYoZGF5c19vdXQ8PTkwLGFtb3VudCwwKSkpIEFTIDkwX2RheSwiLgoJCQkgICAiQUJTKFNVTShJRihkYXlzX291dDw9MTIwLGFtb3VudCwwKSkpIEFTIDEyMF9kYXksICIuCgkJCSAgICJBQlMoU1VNKElGKGRheXNfb3V0PD0xNTAsYW1vdW50LDApKSkgQVMgMTUwX2RheSwgIi4KCQkJICAgIkFCUyhTVU0oSUYoZGF5c19vdXQ8PTE4MCxhbW91bnQsMCkpKSBBUyAxODBfZGF5ICIuCgkJCSAgICJGUk9NIChTRUxFQ1QgdC50cmFuc2FjdGlvbl9kYXRlLCBvLmRhdGVfYWRkZWQsIHQuYW1vdW50LCBvLmFmZmlsaWF0ZV9pZCwgby5zdWJfYWZmaWxpYXRlX2lkLCAiLgoJCQkgICAiSUYoKERBVEVESUZGKHQudHJhbnNhY3Rpb25fZGF0ZSxvLmRhdGVfYWRkZWQpPS0xKSwwLERBVEVESUZGKHQudHJhbnNhY3Rpb25fZGF0ZSxvLmRhdGVfYWRkZWQpKSAiLgoJCQkgICAiQVMgZGF5c19vdXQgRlJPTSB7JHRyYW5zYWN0aW9uc1RhYmxlfSB0IElOTkVSIEpPSU4geyRvcmRlcnNUYWJsZX0gbyBPTiAodC5vcmRlcl9pZCA9IG8uaWQpICIuCgkJCSAgICJXSEVSRSAodC50cmFuc2FjdGlvbl90eXBlIElOICgnIi5NTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVC4iJywnIi5NTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQuIicpKSAiLgoJCQkgICAiQU5EIChvLmRhdGVfYWRkZWQgQkVUV0VFTiAlcyBhbmQgJXMpKSBBUyBRIEdST1VQIEJZIFEuYWZmaWxpYXRlX2lkLCBRLnN1Yl9hZmZpbGlhdGVfaWQiOwoJCQoJCSRzcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCRzdGFydERhdGUsJGVuZERhdGUpOwoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwsQVJSQVlfQSk7CgkJaWYgKGNvdW50KCRyZXN1bHRzKSA+IDApCgkJewoJCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRhZmZpbGlhdGUgPSAkdlsnYWZmaWxpYXRlX2lkJ107CgkJCQlmb3JlYWNoICgkdiBhcyAkY29sdW1uPT4kY29sdW1uVmFsdWUpCgkJCQl7CgkJCQkJaWYgKCgkY29sdW1uICE9ICdhZmZpbGlhdGVfaWQnKSAmJiAoJGNvbHVtbiAhPSAnc3ViX2FmZmlsaWF0ZV9pZCcpKQoJCQkJCXsKCQkJCQkJJGFmZmlsaWF0ZVJlc3VsdHNbJGFmZmlsaWF0ZV1bJGNvbHVtbl0gPSBpc3NldCgkYWZmaWxpYXRlUmVzdWx0c1skYWZmaWxpYXRlXVskY29sdW1uXSk/KCRhZmZpbGlhdGVSZXN1bHRzWyRhZmZpbGlhdGVdWyRjb2x1bW5dICsgJGNvbHVtblZhbHVlKTokY29sdW1uVmFsdWU7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQkvL2NvbnZlcnQgdG8gZGF0YXNldCBmb3JtYXQKCQkJJGZpbmFsUmVzdWx0cyA9IGFycmF5KCk7CgkJCWZvcmVhY2ggKCRhZmZpbGlhdGVSZXN1bHRzIGFzICRhZmZpbGlhdGU9PiRyb3cpCgkJCXsKCQkJCSRmaW5hbFJlc3VsdHNbXSA9IGFycmF5KCdhZmZpbGlhdGVfaWQnPT4kYWZmaWxpYXRlKSArICRyb3c7CgkJCX0KCQkJCgkJCSRzdWJhZmZpbGlhdGVSZXN1bHRzID0gJHJlc3VsdHM7CgkJfQoJCQoJCSRkYXRhc2V0ID0gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlQ29tcG91bmRSZXBvcnREYXRhc2V0KCRwYXJhbXMsJGZpbmFsUmVzdWx0cyk7CgkJZm9yZWFjaCAoJHN1YmFmZmlsaWF0ZVJlc3VsdHMgYXMgJGFmZmlsaWF0ZT0+JHN1YnJlc3VsdCkKCQl7CgkJCSRzdWJwYXJhbXMgPSAkcGFyYW1zICsgYXJyYXkoImFmZmlsaWF0ZV9pZCI9PiRhZmZpbGlhdGUpOwoJCQkkZGF0YXNldC0+YWRkQWRkaXRpb25hbERhdGFzZXQoJHN1YnBhcmFtcywgJHN1YnJlc3VsdCk7IC8vVE9ETzogcHJvb2YgdGhpcwoJCX0KCQlyZXR1cm4gJGRhdGFzZXQ7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZURhdGEoJHF1ZXJ5SWRlbnRpZmllciwgJHBhcmFtcykKCXsKCQlzd2l0Y2ggKCRxdWVyeUlkZW50aWZpZXIpCgkJewoJCQljYXNlIHNlbGY6OiRUT1RBTF9WQUxVRV9SRVBPUlRfUVVFUlk6CgkJCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVUb3RhbFZhbHVlUmVwb3J0RGF0YSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZ2VuZXJhdGluZyBkYXRhIGZvciB1bmtub3duIHF1ZXJ5IGlkZW50aWZpZXIgeyRxdWVyeUlkZW50aWZpZXJ9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKfQoK', 0, '2018-11-21 06:38:53'),
(66, 'userdefinedpage', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fVXNlckRlZmluZWRQYWdlIGV4dGVuZHMgTU1fRW50aXR5CnsKCXB1YmxpYyBzdGF0aWMgJElDT05fVFlQRV9QQUdFID0gMTsKCXB1YmxpYyBzdGF0aWMgJElDT05fVFlQRV9SRVBPUlQgPSAyOwoJCglwcml2YXRlICRuYW1lID0gIiI7Cglwcml2YXRlICR1cmwgPSAiIjsKCXByaXZhdGUgJGljb25UeXBlID0gMTsKCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfVVNFUl9ERUZJTkVEX1BBR0VTLiIgV0hFUkUgaWQ9JyIuJHRoaXMtPmlkLiInOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5IAoJCXsKCQkJJHRoaXMtPm5hbWUgPSAkZGF0YS0+bmFtZTsKCQkJJHRoaXMtPnVybCA9ICRkYXRhLT51cmw7CgkJCSR0aGlzLT5pY29uVHlwZSA9ICRkYXRhLT5pY29uX3R5cGU7CgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIHsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCkKCXsKCQkKCQlnbG9iYWwgJHdwZGI7CgkJaWYoaW50dmFsKCR0aGlzLT5pZCk+MCl7CgkJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9VU0VSX0RFRklORURfUEFHRVMuIiB3aGVyZSBpZD0neyR0aGlzLT5pZH0nIGxpbWl0IDEiOwoJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQlpZigkcmVzdWx0PT09ZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCByZW1vdmUgdXNlci1kZWZpbmVkIHBhZ2UgZHVlIHRvIFNRTCBlcnJvci4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCByZW1vdmUgaW52YWxpZCB1c2VyLWRlZmluZWQgcGFnZS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJaWYoaW50dmFsKCR0aGlzLT5pZCk+MCkKCQl7CgkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfVVNFUl9ERUZJTkVEX1BBR0VTLiIgc2V0IAoJCQkJCQluYW1lPSclcycsIAoJCQkJCQl1cmw9JyVzJywKCQkJCQkJaWNvbl90eXBlPSclcycKCQkJCQl3aGVyZSAKCQkJCQkJaWQ9J3skdGhpcy0+aWR9JwoJCQkiOwoJCQkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+bmFtZSwgJHRoaXMtPnVybCwgJHRoaXMtPmljb25UeXBlKTsKCQkJJHJldCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCQlpZigkcmV0PT09ZmFsc2UpewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IHNhdmUgcXVlcnkgeyRwcmVwYXJlZFNxbH0uIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJHNxbCA9ICJpbnNlcnQgaW50byAiLk1NX1RBQkxFX1VTRVJfREVGSU5FRF9QQUdFUy4iIHNldCAKCQkJCQkJbmFtZT0nJXMnLCAKCQkJCQkJdXJsPSclcycsCgkJCQkJCWljb25fdHlwZT0nJXMnCgkJCSI7CgkJCSRwcmVwYXJlZFNxbCA9ICR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5uYW1lLCAkdGhpcy0+dXJsLCAkdGhpcy0+aWNvblR5cGUpOwoJCQkkcmV0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkJCWlmKCRyZXQ9PT1mYWxzZSl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3Qgc2F2ZSBxdWVyeSB7JHByZXBhcmVkU3FsfS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGFnZUxpc3QoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkcGFnZXMgPSBhcnJheSgpOwoJCSRzcWwgPSAic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX1VTRVJfREVGSU5FRF9QQUdFUy4iICI7CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJaWYoaXNfYXJyYXkoJHJvd3MpKQoJCXsKCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQl7CgkJCQkkY3JudFBhZ2UgPSBuZXcgTU1fVXNlckRlZmluZWRQYWdlKCRyb3ctPmlkKTsKCQkJCQoJCQkJaWYoJGNybnRQYWdlLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHBhZ2VzW10gPSAkY3JudFBhZ2U7CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuICRwYWdlczsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEljb25MaXN0KCkKCXsKCQkkYXJyID0gIGFycmF5KAoJCQlzZWxmOjokSUNPTl9UWVBFX1BBR0U9PidQYWdlJywKCQkJc2VsZjo6JElDT05fVFlQRV9SRVBPUlQ9PidSZXBvcnQnLAoJCSk7CgkJcmV0dXJuICRhcnI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXROYW1lKCRzdHIpCgl7CgkJJHRoaXMtPm5hbWUgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5uYW1lOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VXJsKCR2YWwpCgl7CgkJJHRoaXMtPnVybCA9ICR2YWw7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRVcmwoKQoJewoJCXJldHVybiAkdGhpcy0+dXJsOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0SWNvblR5cGUoJHZhbCkKCXsKCQkkdGhpcy0+aWNvblR5cGUgPSAkdmFsOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0SWNvblR5cGUoKQoJewoJCXJldHVybiAkdGhpcy0+aWNvblR5cGU7Cgl9Cn0=', 0, '2018-11-21 06:38:53'),
(67, 'contenttagprocessor', 'Y2xhc3MgTU1fQ29udGVudFRhZ1Byb2Nlc3Nvcgp7CQoJcHVibGljIHN0YXRpYyAkVEFHX0NPTlRFTlRfREFUQSA9ICJtbV9jb250ZW50X2RhdGEiOwoJcHVibGljIHN0YXRpYyAkVEFHX0NPTlRFTlRfTElOSyA9ICJtbV9jb250ZW50X2xpbmsiOwoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgaXMgcmVsYXRlZCB0byBjb250ZW50LgoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRzbWFydFRhZyB0aGUgbmFtZSBvZiB0aGUgU21hcnRUYWcKCSAqIEByZXR1cm4gQm9vbGVhbiByZXR1cm5zIHRydWUgaWYgdGhlIFNtYXJ0VGFnIHBhc3NlZCBpcyByZWxhdGVkIHRvIGNvbnRlbnQuCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNDb250ZW50U21hcnRUYWcoJHNtYXJ0VGFnKQoJewoJCXN3aXRjaCgkc21hcnRUYWcpIAoJCXsKCQkJY2FzZSBzZWxmOjokVEFHX0NPTlRFTlRfREFUQToKCQkJY2FzZSBzZWxmOjokVEFHX0NPTlRFTlRfTElOSzoKCQkJCXJldHVybiB0cnVlOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBuYW1lIGFuZCBhIG51bWJlciBvZiBwcm9wZXJ0aWVzIHJlbGF0ZWQgdG8gdGhlIFNtYXJ0VGFnIGFuZCBtYWtlcyBhIGNhbGwgdG8gCgkgKiB0aGUgYXBwcm9wcmlhdGUgZnVuY3Rpb24gYmFzZWQgb24gdGhlIFNtYXJ0VGFnIG5hbWUuCgkgKiBAcGFyYW0gU3RyaW5nICRzbWFydFRhZyB0aGUgbmFtZSBvZiB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgdG8gcHJvY2VzcwoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwcm9jZXNzU21hcnRUYWcoJHNtYXJ0VGFnLCAkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCXN3aXRjaCgkc21hcnRUYWcpIAoJCXsKCQkJY2FzZSBzZWxmOjokVEFHX0NPTlRFTlRfREFUQToKCQkJCXJldHVybiBzZWxmOjptbV9jb250ZW50X2RhdGEoJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQkKCQkJY2FzZSBzZWxmOjokVEFHX0NPTlRFTlRfTElOSzoKCQkJCXJldHVybiBzZWxmOjptbV9jb250ZW50X2xpbmsoJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAiSW52YWxpZCBDb250ZW50IFNtYXJ0VGFnIHskc21hcnRUYWd9IGZvdW5kIjsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fQ29udGVudF9EYXRhIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIAoJICogcmV0dXJuaW5nIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb250ZW50IElEIHBhc3NlZCBvciBncmFiYmVkIGZyb20gdGhlIGN1cnJlbnQgcGFnZS4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbW1fY29udGVudF9kYXRhKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKT4wKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5PSR2OwoJCQl9CgkJfQoJCQoJCS8vIGdldCBjdXJyZW50IHBhZ2UgSUQKCQlpZighaXNzZXQoJGlkKSkKCQl7CgkJCWdsb2JhbCAkcG9zdDsKCQkJJGlkID0gJHBvc3QtPklEOwoJCX0KCQkKCQkvLyBlbnN1cmUgdGhhdCB0aGUgaWQgYXR0cmlidXRlIGlzIHNldAkJCgkJaWYoaXNzZXQoJGlkKSAmJiBpc3NldCgkbmFtZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkbmFtZSkpCgkJCXsJCQoJCQkJY2FzZSAidGl0bGUiOgoJCQkJCSR3cFBvc3QgPSBnZXRfcG9zdCgkaWQpOwoJCQkJCQkKCQkJCQlpZigkd3BQb3N0KQoJCQkJCXsKCQkJCQkJcmV0dXJuICR3cFBvc3QtPnBvc3RfdGl0bGU7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCXJldHVybiAiIyI7CgkJCQkJfQoJCQkJCQoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiZGF0ZWF2YWlsYWJsZSI6CgkJCQkJJHVzZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRVc2VyKCk7CgkJCQkJJHByb3RlY3RlZENvbnRlbnQgPSBuZXcgTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZSgpOwoJCQkJCSRkYXRlT2Zmc2V0ID0gJHByb3RlY3RlZENvbnRlbnQtPmRheXNUb0FjY2VzcygkaWQsICR1c2VyLT5nZXRJZCgpKTsKCQkJCQkJCgkJCQkJaWYoJGRhdGVPZmZzZXQgIT09IGZhbHNlKQoJCQkJCXsKCQkJCQkJJHBvc3REYXRlID0gbWt0aW1lKDAsIDAsIDAsIGRhdGUoIm0iKSwgZGF0ZSgiZCIpLSRkYXRlT2Zmc2V0LCBkYXRlKCJ5IikpOwoJCQkJCQoJCQkJCQkkd3BQb3N0ID0gZ2V0X3Bvc3QoJGlkKTsKCQkJCQkJCgkJCQkJCWlmKCR3cFBvc3QgJiYgKCR3cFBvc3QtPnBvc3Rfc3RhdHVzID09ICJwdWJsaXNoIiB8fCAkd3BQb3N0LT5wb3N0X3N0YXR1cyA9PSAiaW5oZXJpdCIpCgkJCQkJCQkJJiYgKCR3cFBvc3QtPnBvc3RfdHlwZSA9PSAicG9zdCIgfHwgJHdwUG9zdC0+cG9zdF90eXBlID09ICJwYWdlIikgCgkJCQkJCQkJfHwgTU1fVXRpbHM6OmlzQ3VzdG9tUG9zdFR5cGUoJHdwUG9zdC0+cG9zdF90eXBlKSkKCQkJCQkJewoJCQkJCQkJJGZvcm1hdFN0ciA9ICJNIGosIFkiOwoJCQkJCQoJCQkJCQkJaWYoaXNzZXQoJGRhdGVmb3JtYXQpKQoJCQkJCQkJewoJCQkJCQkJCSRmb3JtYXRTdHIgPSAkZGF0ZWZvcm1hdDsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJJGZvcm1hdHRlZERhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoZGF0ZSgiTSBqLCBZIEg6aSIsICRwb3N0RGF0ZSksICRmb3JtYXRTdHIpOwoJCQkJCQoJCQkJCQkJcmV0dXJuICRmb3JtYXR0ZWREYXRlOwoJCQkJCQl9CgkJCQkJfQoJCQkJCQoJCQkJCWlmKGlzc2V0KCRub2FjY2Vzc21lc3NhZ2UpKQoJCQkJCXsKCQkJCQkJcmV0dXJuICRub2FjY2Vzc21lc3NhZ2U7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCXJldHVybiAiIjsKCQkJCQl9CgkJCQkJCgkJCQkJYnJlYWs7CgkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgbmFtZSBhdHRyaWJ1dGUgJ3skbmFtZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogJ2lkJyBhbmQgJ25hbWUnIGF0dHJpYnV0ZXMgYXJlIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9IjsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fQ29udGVudF9MaW5rIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIAoJICogcmV0dXJuaW5nIHRoZSBwZXJtYWxpbmsgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb250ZW50IElEIHBhc3NlZCBvciB0aGUgY3VycmVudCBwYWdlL3Bvc3QuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX2NvbnRlbnRfbGluaygkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cyk+MCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleT0kdjsKCQkJfQoJCX0KCQkKCQkvLyBnZXQgY3VycmVudCBwYWdlIElECgkJaWYoIWlzc2V0KCRpZCkpCgkJewoJCQlnbG9iYWwgJHBvc3Q7CgkJCSRpZCA9ICRwb3N0LT5JRDsKCQl9CgkJCgkJLy8gZW5zdXJlIHRoYXQgdGhlIGlkIGF0dHJpYnV0ZSBpcyBzZXQJCQoJCWlmKGlzc2V0KCRpZCkpCgkJewoJCQkkdXJsID0gZ2V0X3Blcm1hbGluaygkaWQpOwoJCQkKCQkJaWYoaXNzZXQoJGF1dG9sb2dpbikgJiYgJGF1dG9sb2dpbiA9PSAidHJ1ZSIpCgkJCXsKCQkJCS8vIGdlbmVyYXRlIGEgbG9naW4gdG9rZW4KCQkJCSRjdXJyZW50VXNlciA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudFVzZXIoKTsKCQkJCWlmKCRjdXJyZW50VXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRsb2dpblRva2VuUmVzcG9uc2UgPSBNTV9Mb2dpblRva2VuOjpnZW5lcmF0ZVRva2VuKCRjdXJyZW50VXNlci0+Z2V0SWQoKSk7CgkJCQoJCQkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRsb2dpblRva2VuUmVzcG9uc2UpKQoJCQkJCXsKCQkJCQkJJGxvZ2luVG9rZW4gPSAkbG9naW5Ub2tlblJlc3BvbnNlLT5tZXNzYWdlOwoJCQkJCQkkdXJsID0gTU1fVXRpbHM6OmFwcGVuZFVybFBhcmFtKCR1cmwsIE1NX1Nlc3Npb246OiRQQVJBTV9MT0dJTl9UT0tFTiwgJGxvZ2luVG9rZW4pOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJcmV0dXJuICR1cmw7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiAnaWQnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSI7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(68, 'shippingmethod', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJtb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBNTV9TaGlwcGluZ01ldGhvZCBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgYWxsIHNoaXBwaW5nIG1ldGhvZHMgdGhhdCBhcmUgc3VwcG9ydGVkIGJ5IG1lbWJlcm1vdXNlLiBUaGUgY29uY2VwdCBpcyB0aGF0IGVhY2ggc2hpcHBpbmcgbWV0aG9kCiAqIChubyBtYXR0ZXIgaG93IGl0IG9idGFpbnMgaXRzIHJhdGVzKSBjYW4gcHJlc2VudCBzaGlwcGluZyBvcHRpb25zIHRvIGFuIGV4dGVybmFsIHNlcnZpY2UgYWxvbmcgd2l0aCBhIHVuaXF1ZSBrZXkuIFRoYXQga2V5IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoZQogKiBvcHRpb24gc2VsZWN0ZWQgYW5kIGRldGVybWluZSBhIHByaWNlLiAKICoKICovCgphYnN0cmFjdCBjbGFzcyBNTV9TaGlwcGluZ01ldGhvZCBleHRlbmRzIE1NX0VudGl0eQp7CgkKCXByb3RlY3RlZCAkbmFtZTsKCXByb3RlY3RlZCAkYWN0aXZlID0gZmFsc2U7Cglwcm90ZWN0ZWQgJHRva2VuID0gIiI7CgkKCS8vc2hpcHBpbmcgbWV0aG9kIHRva2VucwoJcHVibGljIHN0YXRpYyAkRkxBVFJBVEVfU0hJUFBJTkcgPSAiRkxBVFJBVEUiOwoJCglhYnN0cmFjdCBwdWJsaWMgZnVuY3Rpb24gZ2V0U2hpcHBpbmdPcHRpb25zKCRvcmRlcj0iIik7CgkKCWFic3RyYWN0IHB1YmxpYyBmdW5jdGlvbiBnZXRTaGlwcGluZ09wdGlvbkJ5S2V5KE1NX09yZGVyICRvcmRlciwgJHNoaXBwaW5nT3B0aW9uS2V5KTsKCQoJcHVibGljIGZ1bmN0aW9uIGluc3RhbGwoKSB7IHJlcXVpcmVfb25jZShBQlNQQVRILid3cC1hZG1pbi9pbmNsdWRlcy91cGdyYWRlLnBocCcpOyB9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldE5hbWUoKQoJewoJCXJldHVybiAkdGhpcy0+bmFtZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TmFtZSgkbmFtZSkKCXsKCQkkdGhpcy0+bmFtZSA9ICRuYW1lOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUb2tlbigpCgl7CgkJcmV0dXJuICR0aGlzLT50b2tlbjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCSR0aGlzLT5nZXREYXRhKCk7Cgl9CgkKCS8qKgoJICogZ2V0RGF0YSByZXRyaWV2ZXMgdGhlIHNoaXBwaW5nIG1ldGhvZCBpbmZvcm1hdGlvbiBmcm9tIHRoZSBkYXRhYmFzZSBieSB0b2tlbiwgYW5kIHRoZW4gY2FsbHMgc2V0RGF0YSB0byBwb3B1bGF0ZSB0aGUgZW50aXR5CgkgKiBAc2VlIE1NX0VudGl0eTo6Z2V0RGF0YSgpCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9TSElQUElOR19NRVRIT0RTLiIgV0hFUkUgdG9rZW49JyIuJHRoaXMtPnRva2VuLiInIjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkKCQlpZigkcmVzdWx0KQoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJCgkvKioKCSAqIHNldERhdGEgcG9wdWxhdGVzIHRoZSBlbnRpdHkgdXNpbmcgYW4gb2JqZWN0IHdpdGggY29udGFpbmluZyBpZGVudGljYWxseSBuYW1lZCBmaWVsZHMgd2hpY2ggY29udGFpbiB0aGUgZGF0YSB0byB1c2UKCSAqIEBzZWUgTU1fRW50aXR5OjpzZXREYXRhKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5CgkJewoJCQkkdGhpcy0+aWQgPSAkZGF0YS0+aWQ7CgkJCSR0aGlzLT5uYW1lID0gJGRhdGEtPm5hbWU7CgkJCSR0aGlzLT5hY3RpdmUgPSAkZGF0YS0+YWN0aXZlOwoJCQkJCgkJCWlmICgoJGRhdGEtPnNldHRpbmdzICE9IG51bGwpICYmICgkZGF0YS0+c2V0dGluZ3MgIT0iIikpCgkJCXsKCQkJCSR1bnNlcmlhbGl6ZWRfc2V0dGluZ3MgPSB1bnNlcmlhbGl6ZSgkZGF0YS0+c2V0dGluZ3MpOwoJCQkJaWYgKGlzX2FycmF5KCR1bnNlcmlhbGl6ZWRfc2V0dGluZ3MpKQoJCQkJewoJCQkJCWZvcmVhY2ggKCR1bnNlcmlhbGl6ZWRfc2V0dGluZ3MgYXMgJGs9PiR2KQoJCQkJCXsKCQkJCQkJaWYgKGlzc2V0KCR0aGlzLT4kaykpCgkJCQkJCXsKCQkJCQkJCSR0aGlzLT4kayA9ICR2OyAvL2Rvbid0IGNyZWF0ZSBhdHRyaWJ1dGVzLCBvbmx5IHJlc3RvcmUgZXhpc3Rpbmcgb25lcwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQkKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJCgkvKioKCSAqIEVhY2ggaW1wbGVtZW50YXRpb24gb2YgdGhlIFNoaXBwaW5nTWV0aG9kIGNsYXNzIGNhbiBoYXZlIHNwZWNpZmljIHNldHRpbmdzLiBUaGlzIG1vZGVsIGlzIGlkZW50aWNhbCB0byB0aGUgb25lIHVzZWQgYnkgTU1fUGF5bWVudFNlcnZpY2UgYW5kIGFsbG93cyBmb3IgdW5mb3JzZWVuIGF0dHJpYnV0ZXMgdGhhdCBuZWVkIHRvIGJlIHN0b3JlZAoJICogdG8gYmUgcGVyc2lzdGVkIGFsb25nIHdpdGggdGhlIHNoaXBwaW5nIGNsYXNzLCB3aXRob3V0IHRoZSBuZWVkIGZvciBhZGRpdGlvbmFsIHRhYmxlcy4gRm9yIGV4YW1wbGUsIGlmIGEgcHJvdmlkZXIgc3VwcGxpZWQgcmF0ZXMgdmlhIGEgd2ViIHNlcnZpY2UsIHRoZSBzaGlwcGluZyBtZXRob2QgY291bGQgc3RvcmUgdGhlIAoJICogdXNlcm5hbWUvcGFzc3dvcmQgbmVjZXNzYXJ5IHRvIG1ha2UgdGhlIHNlcnZpY2UgY2FsbC4gU2V0dGluZ3MgYXJlIHN0b3JlZCBhcyBhdHRyaWJ1dGVzIG9uIHRoZSBvYmplY3QuIFByaW9yIHRvIGNvbW1pdCwgYW4gYXJyYXkgaXMgY3JlYXRlZCB1c2luZyB0aGVzZSBhdHRyaWJ1dGVzIGFuZCB0aGVuIHNlcmlhbGl6ZWQgYW5kIHN0b3JlZCBpbiAkdGhpcy0+c2V0dGluZ3MsIAoJICogd2hpY2ggaXMgcGVyc2lzdGVkIHdoZW4gY29tbWl0RGF0YSBpcyBjYWxsZWQKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHByZXBhcmVTZXR0aW5ncygpCgl7CgkJJGV4Y2x1c2lvbnMgPSBhcnJheSgnaWQnLCduYW1lJywndG9rZW4nLCdzZXR0aW5ncycsJ2FjdGl2ZScpOwoJCSRzZXR0aW5ncyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHRoaXMgYXMgJGtleT0+JHZhbHVlKQoJCXsKCQkJaWYgKCFpbl9hcnJheSgka2V5LCRleGNsdXNpb25zKSAmJiAoc3RycG9zKCRrZXksInRyYW5zaWVudF8iKSAhPT0gMCkpCgkJCXsKCQkJCSRzZXR0aW5nc1ska2V5XSA9ICR2YWx1ZTsKCQkJfQoJCX0KCQlyZXR1cm4gc2VyaWFsaXplKCRzZXR0aW5ncyk7Cgl9CgkKCQoJLyoqCgkgKiBjb21taXREYXRhIHBlcnNpc3RzIHRoZSBzdGF0ZSBhbmQgc2V0dGluZ3Mgb2YgdGhlIFNoaXBwaW5nTWV0aG9kIGludG8gdGhlIGRhdGFiYXNlLiBUaGUgcHJlcGFyZVNldHRpbmdzIG1ldGhvZCBpcyB1c2VkIHRvIGdhdGhlciBhbGwgdGhlIG1ldGhvZAoJICogc3BlY2lmaWMgc2V0dGluZ3MgYW5kIHNlcmlhbGl6ZSB0aGVtIGludG8gb25lIGRhdGFiYXNlIGZpZWxkLCBhbGxvd2luZyB0aGlzIGdlbmVyaWMgY29tbWl0RGF0YSB0byBiZSB1c2VkIGZvciBhbGwgZnV0dXJlIHN1YmNsYXNzZXMKCSAqIEBzZWUgTU1fRW50aXR5Ojpjb21taXREYXRhKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRkb1VwZGF0ZSA9ICgkdGhpcy0+aWQ+MCk7CgkJJG9wZXJhdGlvbiA9ICgkZG9VcGRhdGUpPyJ1cGRhdGUiOiJjcmVhdGUiOyAvL3VzZWQgaW4gZXJyb3IgbWVzc2FnZXMKCQoJCWlmICghJGRvVXBkYXRlKQoJCXsKCQkJLy90aGVyZSBjYW4gb25seSBiZSBvbmUgcm93IHdpdGggZWFjaCB0b2tlbiwgY2hlY2sgaWYgaXQgZXhpc3RzIGZpcnN0CgkJCSRjaGVja1NxbCA9ICJzZWxlY3QgaWQgZnJvbSAiLk1NX1RBQkxFX1NISVBQSU5HX01FVEhPRFMuIiB3aGVyZSB0b2tlbj0neyR0aGlzLT50b2tlbn0nIjsKCQkJJHJlcyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkY2hlY2tTcWwpOwoJCQlpZiAoJHJlcykKCQkJewoJCQkJLy9pZiBpdCBkb2VzLCB0aGlzIGlzIGFuIHVwZGF0ZS4gc2V0IHRoZSBpZCBmb3IgZ29vZCBtZWFzdXJlCgkJCQkkZG9VcGRhdGUgPSB0cnVlOwoJCQkJJHJvdyA9ICRyZXNbMF07CgkJCQkkdGhpcy0+aWQgPSAkcm93LT5pZDsKCQkJfQoJCX0KCQoJCU1NX1RyYW5zYWN0aW9uOjpiZWdpbigpOwoJCXRyeQoJCXsKCQkJJHNldENsYXVzZSA9ICJTRVQgdG9rZW49J3skdGhpcy0+dG9rZW59JywgbmFtZT0nJXMnLHNldHRpbmdzPSclcycsYWN0aXZlPSclZCciOwoJCQkJCgkJCWlmICghJGRvVXBkYXRlKQoJCQl7CgkJCQkkc3FsID0gIklOU0VSVCBpbnRvICIuTU1fVEFCTEVfU0hJUFBJTkdfTUVUSE9EUy4iIHskc2V0Q2xhdXNlfSI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc3FsID0gIlVQREFURSAiLk1NX1RBQkxFX1NISVBQSU5HX01FVEhPRFMuIiB7JHNldENsYXVzZX0gd2hlcmUgdG9rZW49J3skdGhpcy0+dG9rZW59JyI7CgkJCX0KCQkJCQoJCQkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+bmFtZSwgJHRoaXMtPnByZXBhcmVTZXR0aW5ncygpLCAoJHRoaXMtPmFjdGl2ZSk/MTowKTsKCQkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCgkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQl7CgkJCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8geyRvcGVyYXRpb259IHNoaXBwaW5nIG1ldGhvZCAoIi4kcHJlcGFyZWRTcWwuIikiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQljYXRjaChFeGNlcHRpb24gJGV4KQoJCXsKCQkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8geyRvcGVyYXRpb259IHNoaXBwaW5nIG1ldGhvZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCU1NX1RyYW5zYWN0aW9uOjpjb21taXQoKTsKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIGFsbCBvZiB0aGUgYXZhaWxhYmxlIHNoaXBwaW5nIG9wdGlvbnMgYWNyb3NzIGFsbCBvZiB0aGUgYWN0aXZlIG1ldGhvZHMKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciAob3B0aW9uYWwpIFRoZSBvcmRlciB0byBjYWxjdWxhdGUgcmF0ZXMgYWdhaW5zdAoJICogQHJldHVybiBhcnJheSBjb250YWluaW5nIGFsbCBvZiB0aGUgYXZhaWxhYmxlIHNoaXBwaW5nIG9wdGlvbnMuCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zKCRvcmRlcj0iIikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGF2YWlsYWJsZVNoaXBwaW5nT3B0aW9ucyA9IGFycmF5KCk7CgkJCgkJJGxvb2t1cE1ldGhvZFNRTCA9ICJTRUxFQ1QgdG9rZW4gRlJPTSAiLk1NX1RBQkxFX1NISVBQSU5HX01FVEhPRFMuIiBXSEVSRSBhY3RpdmU9JzEnIjsKCQkkbWV0aG9kcyA9ICR3cGRiLT5nZXRfY29sKCRsb29rdXBNZXRob2RTUUwpOwoJCQoJCWlmICghaXNfbnVsbCgkbWV0aG9kcykpCgkJewoJCQlmb3JlYWNoICgkbWV0aG9kcyBhcyAkc2hpcHBpbmdNZXRob2RUb2tlbikKCQkJewoJCQkJJG1ldGhvZCA9IE1NX1NoaXBwaW5nTWV0aG9kOjpnZXRTaGlwcGluZ01ldGhvZEJ5VG9rZW4oJHNoaXBwaW5nTWV0aG9kVG9rZW4pOwoJCQkJaWYgKCFpc19udWxsKCRtZXRob2QpKQoJCQkJewoJCQkJCSRhdmFpbGFibGVTaGlwcGluZ09wdGlvbnMgKz0gJG1ldGhvZC0+Z2V0U2hpcHBpbmdPcHRpb25zKCRvcmRlcik7CgkJCQl9CgkJCX0KCQl9CgkJCgkJcmV0dXJuICRhdmFpbGFibGVTaGlwcGluZ09wdGlvbnM7Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGlzIGEgc3RhdGljIGZhY3RvcnkgbWV0aG9kIHVzZWQgdG8gb2J0YWluIGEgc3BlY2lmaWMgaW1wbGVtZW50b3Igb2YgTU1fU2hpcHBpbmdNZXRob2QKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkdG9rZW4gVGhlIHRva2VuIHJlZmVyZW5jZQoJICogQHJldHVybiBNTV9TaGlwcGluZ01ldGhvZCBzdWJjbGFzcyBpZGVudGlmaWVkIGJ5IHRoZSB0b2tlbiBvbiBzdWNjZXNzLCBudWxsIG9uIGZhaWx1cmUKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRTaGlwcGluZ01ldGhvZEJ5VG9rZW4oJHRva2VuKQoJewoJCXN3aXRjaCAoJHRva2VuKQoJCXsKCQkJY2FzZSBNTV9TaGlwcGluZ01ldGhvZDo6JEZMQVRSQVRFX1NISVBQSU5HOgoJCQkJcmV0dXJuIG5ldyBNTV9GbGF0UmF0ZVNoaXBwaW5nTWV0aG9kKCk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBudWxsOwoJCX0KCQlyZXR1cm4gbnVsbDsKCX0KfQoK', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(69, 'authorizenetcimservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fQXV0aG9yaXplTmV0Q0lNU2VydmljZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTU1fUGF5bWVudFNlcnZpY2UgaW50ZXJmYWNlIHVzaW5nIEF1dGhvcml6ZS5uZXQgQ0lNCiAqLwoKY2xhc3MgTU1fQXV0aG9yaXplTmV0Q0lNU2VydmljZSBleHRlbmRzIE1NX1NjaGVkdWxlZFBheW1lbnRTZXJ2aWNlCnsKCXB1YmxpYyBzdGF0aWMgJFZBTElEQVRJT05fTU9ERV9MSVZFID0gImxpdmVNb2RlIjsKCXB1YmxpYyBzdGF0aWMgJFZBTElEQVRJT05fTU9ERV9URVNUID0gInRlc3RNb2RlIjsKCXB1YmxpYyBzdGF0aWMgJFZBTElEQVRJT05fTU9ERV9OT05FID0gIm5vbmUiOwoJCglwcm90ZWN0ZWQgJHRva2VuID0gIkFVVEhPUklaRU5FVENJTSI7CgkKCXByb3RlY3RlZCAkdGVzdEFQSUxvZ2luID0gIiI7Cglwcm90ZWN0ZWQgJHRlc3RUcmFuc2FjdGlvbktleSA9ICIiOwoJCglwcm90ZWN0ZWQgJGxpdmVBUElMb2dpbiA9ICIiOwoJcHJvdGVjdGVkICRsaXZlVHJhbnNhY3Rpb25LZXkgPSAiIjsKCXByb3RlY3RlZCAkbGl2ZVZhbGlkYXRpb25Nb2RlID0gZmFsc2U7CgkKCXByb3RlY3RlZCAkdGVzdE1vZGUgPSBmYWxzZTsKCQoJcHJvdGVjdGVkICRhY2NlcHRKU0VuYWJsZWQgPSBmYWxzZTsKCXByb3RlY3RlZCAkdGVzdFB1YmxpY0NsaWVudEtleSA9ICIiOwoJcHJvdGVjdGVkICRsaXZlUHVibGljQ2xpZW50S2V5ID0gIiI7CgkKCXByb3RlY3RlZCAkc3VwcG9ydGVkQ3VycmVuY2llcyA9IGFycmF5KCJVU0QiLCJDQUQiLCJHQlAiLCJFVVIiLCJBVUQiLCJOWkQiKTsKCQoJCglwdWJsaWMgZnVuY3Rpb24gbG9hZERlcGVuZGVuY2llcygpCgl7CgkJcmVxdWlyZV9vbmNlKE1NX0xJQl9ESVIuIi9hdXRob3JpemVuZXQvQXV0aG9yaXplTmV0LnBocCIpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsKCkgCgl7IAoJCXBhcmVudDo6aW5zdGFsbCgpOwoJCQoJCSRzcWwgPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQVVUSE5FVF9DSU1fQ1VTVE9NRVJfTElOS1MuIiAoXG4iLgoJCQkJImF1dGhuZXRfY3VzdG9tZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkiYXV0aG5ldF9wYXltZW50X2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIm1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIlVOSVFVRSBLRVkgYXV0aG5ldF9wYXltZW50X2lkIChhdXRobmV0X3BheW1lbnRfaWQpLFxuIi4KCQkJCSJVTklRVUUgS0VZIG1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIChtZW1iZXJtb3VzZV9jdXN0b21lcl9pZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTtcbiI7CgkJCgkJJHNxbC49ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9BVVRITkVUX0NJTV9DSEFSR0VTLiIgKFxuIi4KCQkJCSJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSJvcmRlcl9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJvcmRlcl9pdGVtX2lkIGJpZ2ludCgyMCkgTlVMTCxcbiIuCgkJCQkiY2hhcmdlX2lkIHZhcmNoYXIoNDApLFxuIi4KCQkJCSJhdXRob3JpemF0aW9uX2NvZGUgdmFyY2hhcigyMCksXG4iLgoJCQkJImxhc3RfZm91ciB2YXJjaGFyKDQpIE5VTEwsXG4iLgoJCQkJImFtb3VudCBkZWNpbWFsKDEwLDIpIE5PVCBOVUxMLFxuIi4KCQkJCSJ0cmFuc2FjdGlvbl9kYXRlIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKGlkKSxcbiIuCgkJCQkiS0VZIG1tX2F1dGhuZXRfY2hhcmdlX2NoYXJnZV9pZF9pZHggKGNoYXJnZV9pZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTtcbiI7CgkJCgkJZGJEZWx0YSgkc3FsKTsKCX0KCQoJCgkvKioKCSAqIFJlcG9ydCB0aGUgZmVhdHVyZXMgdGhlIEF1dGhvcml6ZS5uZXQgQ0lNIHNlcnZpY2Ugc3VwcG9ydHMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN1cHBvcnRzRmVhdHVyZSgpCgkgKgoJICogQHBhcmFtIGludGVnZXIgJGZlYXR1cmVDb25zdCBhIGNvbnN0IGFzIGRlZmluZWQgaW4gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlcwoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3Qgc3VwcG9ydGVkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdXBwb3J0c0ZlYXR1cmUoJGZlYXR1cmVDb25zdCkKCXsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpPTlNJVEVfU0VSVklDRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDQVJEX09OX0ZJTEU7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6Q09VUE9OUzsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpUT0tFTl9FWENIQU5HRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpNT0RJRllfUkVCSUxMX0RBVEU7CgkJcmV0dXJuIGluX2FycmF5KCRmZWF0dXJlQ29uc3QsJHN1cHBvcnRlZCx0cnVlKTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGh0bWwgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHBheW1lbnQgbWV0aG9kIHNldHRpbmdzIHNjcmVlbiBmb3IgY29uZmlndXJpbmcgQXV0aG9yaXplLm5ldCBDSU0KCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmRpc3BsYXlDb25maWdPcHRpb25zKCkKCSAqIAoJICogQHJldHVybiBTdHJpbmcgY29udGFpbmluZyB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cgaHRtbAoJICovCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJewoJCSRjb25maWdfb3B0aW9ucyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS9hdXRob3JpemVuZXRjaW1fY29uZmlnLmh0bWwucGhwIiwkdGhpcyk7CgkJcmV0dXJuICRjb25maWdfb3B0aW9uczsKCX0KCQoJCgkvKioKCSAqIFZhbGlkYXRlcyBhbmQgY29uZmlndXJlcyB0aGUgb2JqZWN0IHdpdGggdGhlIHNldHRpbmdzIGluZm9ybWF0aW9uIGdlbmVyYXRlZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6cHJvY2Vzc0NvbmZpZ09wdGlvbnMoKQoJICoKCSAqIEBwYXJhbSAkcG9zdCBBbiBhcnJheSBjb250YWluaW5nIHRoZSBkYXRhIHBvc3RlZCBmcm9tIHRoZSBwYXltZW50IG1ldGhvZHMgc2V0dGluZ3Mgc2NyZWVuCgkgKiBAcmV0dXJuIEFuIE1NX1Jlc3BvbnNlIG9mIHR5cGUgTU1fUmVzcG9uc2U6OlNVQ0NFU1MgaW5kaWNhdGluZyBzdWNjZXNzZnVsIHZhbGlkYXRpb24gYW5kIGFzc2lnbWVudC4gT24gZXJyb3IsIHRoZSB0eXBlIHdpbGwgYmUgTU1fUmVzcG9uc2U6OkVSUk9SIGFuZCB0aGUgbWVzc2FnZSB3aWxsIGNvbnRhaW4gdGhlIGVycm9yIG1lc3NhZ2VzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzQ29uZmlnT3B0aW9ucygkcG9zdCkgCgl7IAoJCSRhY3RpdmUgPSAoaXNzZXQoJHBvc3RbJ29uc2l0ZV9wYXltZW50X3NlcnZpY2UnXSkgJiYgKHN0cnRvbG93ZXIoJHRoaXMtPmdldFRva2VuKCkpID09ICRwb3N0WydvbnNpdGVfcGF5bWVudF9zZXJ2aWNlJ10pKTsKCQkkdGhpcy0+c2V0QWN0aXZlKCRhY3RpdmUpOwoKCQlpZiAoJGFjdGl2ZSkKCQl7CgkJCSR0aGlzLT5pbnN0YWxsKCk7CgkJCSRjb25maWcgPSBpc3NldCgkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2F1dGhvcml6ZW5ldGNpbSddKT8kcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2F1dGhvcml6ZW5ldGNpbSddOmFycmF5KCk7CgkJCSRlbXB0eV9lcnJvcnMgPSAiIjsKCQkJJGNvbmZpZ1sndGVzdF9tb2RlJ10gPSBpc3NldCgkY29uZmlnWyd0ZXN0X21vZGUnXSk/KGJvb2wpJGNvbmZpZ1sndGVzdF9tb2RlJ106ZmFsc2U7CgkJCSRjb25maWdbJ2xpdmVfdmFsaWRhdGlvbl9tb2RlJ10gPSBpc3NldCgkY29uZmlnWydsaXZlX3ZhbGlkYXRpb25fbW9kZSddKT8oYm9vbCkkY29uZmlnWydsaXZlX3ZhbGlkYXRpb25fbW9kZSddOmZhbHNlOwoJCQkkY29uZmlnWydhY2NlcHRfanNfZW5hYmxlZCddID0gaXNzZXQoJGNvbmZpZ1snYWNjZXB0X2pzX2VuYWJsZWQnXSk/KGJvb2wpJGNvbmZpZ1snYWNjZXB0X2pzX2VuYWJsZWQnXTpmYWxzZTsKCQkJCgkJCWlmICgkY29uZmlnWyd0ZXN0X21vZGUnXSkKCQkJewkKCQkJCWlmKGVtcHR5KCRjb25maWdbJ3Rlc3RfYXBpX2xvZ2luJ10pKQoJCQkJewoJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkF1dGhvcml6ZS5uZXQgQ0lNOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIFRlc3QgQVBJIExvZ2luXG4iOwoJCQkJfQoJCQkJCgkJCQlpZihlbXB0eSgkY29uZmlnWyd0ZXN0X3RyYW5zYWN0aW9uX2tleSddKSkKCQkJCXsKCQkJCQkkZW1wdHlfZXJyb3JzIC49ICJBdXRob3JpemUubmV0IENJTTogUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHRoZSBUZXN0IFRyYW5zYWN0aW9uIEtleSI7CgkJCQl9CgkJCQkKCQkJCWlmICgoJGNvbmZpZ1snYWNjZXB0X2pzX2VuYWJsZWQnXSkgJiYgZW1wdHkoJGNvbmZpZ1sndGVzdF9wdWJsaWNfY2xpZW50X2tleSddKSkKCQkJCXsKCQkJCQkkZW1wdHlFcnJvcnMgLj0gIkF1dGhvcml6ZS5uZXQgQ0lNOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIFRlc3QgUHVibGljIENsaWVudCBLZXkiOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJaWYoZW1wdHkoJGNvbmZpZ1snbGl2ZV9hcGlfbG9naW4nXSkpCgkJCQl7CgkJCQkJJGVtcHR5X2Vycm9ycyAuPSAiQXV0aG9yaXplLm5ldCBDSU06IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgTGl2ZSBBUEkgTG9naW5cbiI7CgkJCQl9CgkJCQkKCQkJCWlmKGVtcHR5KCRjb25maWdbJ2xpdmVfdHJhbnNhY3Rpb25fa2V5J10pKQoJCQkJewoJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkF1dGhvcml6ZS5uZXQgQ0lNOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIExpdmUgVHJhbnNhY3Rpb24gS2V5IjsKCQkJCX0KCQkJCQoJCQkJaWYgKCgkY29uZmlnWydhY2NlcHRfanNfZW5hYmxlZCddKSAmJiBlbXB0eSgkY29uZmlnWydsaXZlX3B1YmxpY19jbGllbnRfa2V5J10pKQoJCQkJewoJCQkJCSRlbXB0eUVycm9ycyAuPSAiQXV0aG9yaXplLm5ldCBDSU06IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgUHVibGljIENsaWVudCBLZXkiOwoJCQkJfQoJCQl9CgkJCQoJCQlpZiAoJGVtcHR5X2Vycm9ycyAhPSAiIikKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZW1wdHlfZXJyb3JzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQoJCQkvL2lmIGhlcmUsIHRoYXQgbWVhbnMgdGhleSBhcmUgYWxsIHZhbHVlcyBhcmUgc2V0CgkJCSR0aGlzLT5zZXRUZXN0TW9kZSgkY29uZmlnWyd0ZXN0X21vZGUnXSk7CgkJCSR0aGlzLT5zZXRBY2NlcHRKU0VuYWJsZWQoJGNvbmZpZ1snYWNjZXB0X2pzX2VuYWJsZWQnXSk7CgkJCQoJCQlpZiAoJHRoaXMtPnRlc3RNb2RlKQoJCQl7CgkJCQkkdGhpcy0+c2V0VGVzdEFQSUxvZ2luKCRjb25maWdbJ3Rlc3RfYXBpX2xvZ2luJ10pOwoJCQkJJHRoaXMtPnNldFRlc3RUcmFuc2FjdGlvbktleSgkY29uZmlnWyd0ZXN0X3RyYW5zYWN0aW9uX2tleSddKTsKCQkJCWlmICgkdGhpcy0+YWNjZXB0SlNFbmFibGVkKQoJCQkJewoJCQkJCSRjb25maWdbJ3Rlc3RfcHVibGljX2NsaWVudF9rZXknXSA9IHRyaW0oJGNvbmZpZ1sndGVzdF9wdWJsaWNfY2xpZW50X2tleSddKTsgLy9yZW1vdmUgd2hpdGVzcGFjZQoJCQkJCSR0aGlzLT5zZXRUZXN0UHVibGljQ2xpZW50S2V5KCRjb25maWdbJ3Rlc3RfcHVibGljX2NsaWVudF9rZXknXSk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdGhpcy0+c2V0TGl2ZUFQSUxvZ2luKCRjb25maWdbJ2xpdmVfYXBpX2xvZ2luJ10pOwoJCQkJJHRoaXMtPnNldExpdmVUcmFuc2FjdGlvbktleSgkY29uZmlnWydsaXZlX3RyYW5zYWN0aW9uX2tleSddKTsKCQkJCSR0aGlzLT5zZXRMaXZlVmFsaWRhdGlvbk1vZGUoJGNvbmZpZ1snbGl2ZV92YWxpZGF0aW9uX21vZGUnXSk7CgkJCQlpZiAoJHRoaXMtPmFjY2VwdEpTRW5hYmxlZCkKCQkJCXsKCQkJCQkkY29uZmlnWydsaXZlX3B1YmxpY19jbGllbnRfa2V5J10gPSB0cmltKCRjb25maWdbJ2xpdmVfcHVibGljX2NsaWVudF9rZXknXSk7IC8vcmVtb3ZlIHdoaXRlc3BhY2UKCQkJCQkkdGhpcy0+c2V0TGl2ZVB1YmxpY0NsaWVudEtleSgkY29uZmlnWydsaXZlX3B1YmxpY19jbGllbnRfa2V5J10pOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBSZXR1cm5zIGFuIEF1dGhvcml6ZS5uZXQgQ0lNIHJlcXVlc3Qgb2JqZWN0CgkgKiAKCSAqIEByZXR1cm4gQXV0aG9yaXplTmV0Q0lNCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0QXV0aG9yaXplTmV0Q0lNKCkKCXsKCQkkYXV0aE5ldENpbSA9IG51bGw7CgkJCgkJaWYgKCR0aGlzLT50ZXN0TW9kZSAmJiAhZW1wdHkoJHRoaXMtPnRlc3RBUElMb2dpbikgJiYgIWVtcHR5KCR0aGlzLT50ZXN0VHJhbnNhY3Rpb25LZXkpKQoJCXsKCQkJJGF1dGhOZXRDaW0gPSBuZXcgQXV0aG9yaXplTmV0Q0lNKCR0aGlzLT50ZXN0QVBJTG9naW4sICR0aGlzLT50ZXN0VHJhbnNhY3Rpb25LZXkpOwoJCQkkYXV0aE5ldENpbS0+c2V0U2FuZGJveCh0cnVlKTsKCQl9CgkJZWxzZSBpZiAoIWVtcHR5KCR0aGlzLT5saXZlQVBJTG9naW4pICYmICFlbXB0eSgkdGhpcy0+bGl2ZVRyYW5zYWN0aW9uS2V5KSkKCQl7CgkJCSRhdXRoTmV0Q2ltID0gbmV3IEF1dGhvcml6ZU5ldENJTSgkdGhpcy0+bGl2ZUFQSUxvZ2luLCAkdGhpcy0+bGl2ZVRyYW5zYWN0aW9uS2V5KTsKCQkJJGF1dGhOZXRDaW0tPnNldFNhbmRib3goZmFsc2UpOwoJCX0KCQkKCQlyZXR1cm4gJGF1dGhOZXRDaW07Cgl9CgoJCgkvKioKCSAqIENyZWF0ZXMgYSBjdXN0b21lciBpbiB0aGUgQXV0aG9yaXplLm5ldCBDSU0gU3lzdGVtCgkgKiAKCSAqIEBwYXJhbSBNTV9Vc2VyICR1c2VyIFRoZSBNZW1iZXJNb3VzZSB1c2VyCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyBUaGUgYmlsbGluZyBhZGRyZXNzIG9mIHRoZSBjdXN0b21lciBjcmVkaXQgY2FyZAoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyBUaGUgY3VzdG9tZXIncyBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbgoJICogQHBhcmFtICRvcmlnaW5hbE9yZGVySWQgKG9wdGlvbmFsKSBUaGUgb3JkZXIgaWQgdG8gbGluayB0aGUgbG9jYWwgY2FyZCBvbiBmaWxlIGluZm9ybWF0aW9uIHRvCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBjdXN0b21lciB3YXMgY3JlYXRlZCBpbiB0aGUgQXV0aG9yaXplLm5ldCBDSU0gc3lzdGVtIHN1Y2Nlc3NmdWxseQoJICovCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlQ3VzdG9tZXIoTU1fVXNlciAkdXNlciwgTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcywgTU1fQ2FyZEluZm8gJGNhcmRJbmZvLCAkb3JpZ2luYWxPcmRlcklkPW51bGwpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRjdXN0b21lclByb2ZpbGVJZCA9IG51bGw7CgkJJHBheW1lbnRQcm9maWxlSWQgPSBudWxsOwoJCQoJCSRhdXRoTmV0Q0lNID0gJHRoaXMtPmdldEF1dGhvcml6ZU5ldENJTSgpOwoJCQoJCS8vIGNyZWF0ZSBjdXN0b21lciBwcm9maWxlCgkJJGN1c3RvbWVyUHJvZmlsZSA9IG5ldyBBdXRob3JpemVOZXRDdXN0b21lcigpOwoJCSRjdXN0b21lclByb2ZpbGUtPm1lcmNoYW50Q3VzdG9tZXJJZCA9ICR1c2VyLT5nZXRJZCgpOwoJCSRjdXN0b21lclByb2ZpbGUtPmRlc2NyaXB0aW9uID0gZ2V0X2Jsb2dpbmZvKCkuIiBDdXN0b21lciBJRCMgeyR1c2VyLT5nZXRJZCgpfSAoeyR1c2VyLT5nZXRFbWFpbCgpfSkiOwoJCSRjdXN0b21lclByb2ZpbGUtPmVtYWlsID0gJHVzZXItPmdldEVtYWlsKCk7CgkJCgkJJHJlc3BvbnNlID0gJGF1dGhOZXRDSU0tPmNyZWF0ZUN1c3RvbWVyUHJvZmlsZSgkY3VzdG9tZXJQcm9maWxlKTsKCQkKCQlpZigkcmVzcG9uc2UtPmlzT2soKSkKCQl7CgkJCSRjdXN0b21lclByb2ZpbGVJZCA9ICRyZXNwb25zZS0+Z2V0Q3VzdG9tZXJQcm9maWxlSWQoKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIGN1c3RvbWVyIHByb2ZpbGU6IHskcmVzcG9uc2UtPmdldE1lc3NhZ2VUZXh0KCl9IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIGFkZCBwYXltZW50IHByb2ZpbGUgdG8gY3VzdG9tZXIKCQkkcGF5bWVudFByb2ZpbGUgPSBuZXcgQXV0aG9yaXplTmV0UGF5bWVudFByb2ZpbGUoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmN1c3RvbWVyVHlwZSA9ICJpbmRpdmlkdWFsIjsKCQkKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+Zmlyc3ROYW1lID0gJHVzZXItPmdldEZpcnN0TmFtZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5sYXN0TmFtZSA9ICR1c2VyLT5nZXRMYXN0TmFtZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5hZGRyZXNzID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+Y2l0eSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5zdGF0ZSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+emlwID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRQb3N0YWxDb2RlKCk7CgkJJHBheW1lbnRQcm9maWxlLT5iaWxsVG8tPmNvdW50cnkgPSAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+cGhvbmVOdW1iZXIgPSAkdXNlci0+Z2V0UGhvbmUoKTsKCQkKCQlpZiAoJGNhcmRJbmZvIGluc3RhbmNlb2YgTU1fUGF5bWVudFRva2VuKQoJCXsKCQkJLy9tYWtlIHN1cmUgdGhlcmUgaXMgbm8gZnVubnkgYnVzaW5lc3MgZ29pbmcgb24gd2l0aCB0aGUgcGF5bWVudCB0b2tlbiByZWNlaXZlZCBmcm9tIHRoZSBmcm9udCBlbmQKCQkJJHBheW1lbnRUb2tlbiA9IGh0bWxlbnRpdGllcygkY2FyZEluZm8tPmdldFRva2VuKCksIEVOVF9RVU9URVMsICJVVEYtOCIpOwoJCQkkdG9rZW5Db21wb25lbnRzID0gZXhwbG9kZSgifCIsJHBheW1lbnRUb2tlbik7CgkJCWlmIChjb3VudCgkdG9rZW5Db21wb25lbnRzKSA9PSAyKQoJCQl7CgkJCQkkcGF5bWVudFByb2ZpbGUtPnBheW1lbnQtPm9wYXF1ZURhdGEgPSBuZXcgc3RkQ2xhc3MoKTsKCQkJCSRwYXltZW50UHJvZmlsZS0+cGF5bWVudC0+b3BhcXVlRGF0YS0+ZGF0YURlc2NyaXB0b3IgPSAkdG9rZW5Db21wb25lbnRzWzBdOwoJCQkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5vcGFxdWVEYXRhLT5kYXRhVmFsdWUgPSAkdG9rZW5Db21wb25lbnRzWzFdOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkkcGF5bWVudFByb2ZpbGUtPnBheW1lbnQtPmNyZWRpdENhcmQtPmNhcmROdW1iZXIgPSAkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKTsKCQkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5jcmVkaXRDYXJkLT5leHBpcmF0aW9uRGF0ZSA9ICRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvblllYXIoKS4iLSIuJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKTsKCQkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5jcmVkaXRDYXJkLT5jYXJkQ29kZSA9ICRjYXJkSW5mby0+Z2V0Q1ZWKCk7CgkJfQoJCQoJCSRyZXNwb25zZSA9ICRhdXRoTmV0Q0lNLT5jcmVhdGVDdXN0b21lclBheW1lbnRQcm9maWxlKCRjdXN0b21lclByb2ZpbGVJZCwgJHBheW1lbnRQcm9maWxlLCAkdGhpcy0+Z2V0QWN0aXZlVmFsaWRhdGlvbk1vZGUoKSk7CgkJCgkJaWYoJHJlc3BvbnNlLT5pc09rKCkpCgkJewoJCQkkcGF5bWVudFByb2ZpbGVJZCA9ICRyZXNwb25zZS0+Z2V0UGF5bWVudFByb2ZpbGVJZCgpOwoJCX0KCQllbHNlIAoJCXsKCQkJJGF1dGhOZXRDSU0tPmRlbGV0ZUN1c3RvbWVyUHJvZmlsZSgkY3VzdG9tZXJQcm9maWxlSWQpOwoJCQkKCQkJc3dpdGNoKCRyZXNwb25zZS0+Z2V0TWVzc2FnZUNvZGUoKSkKCQkJewoJCQkJLy8gRXJyb3IgQ29kZSByZXR1cm5lZCBieSBBdXRobmV0IENJTSB3aGVuIENDIGF1dGhvcml6YXRpb24gaXMgdHVybmVkIG9uIGFuZCBCaWxsaW5nIEFkZHJlc3Mgb3IgCgkJCQkvLyBCaWxsaW5nIFppcCAob3IgYm90aCkgaXMgbWlzc2luZy4gU2luY2Ugd2Uga25vdyB3aGF0IGNhdXNlcyB0aGlzIGVycm9yLCB0aGlzIHdpbGwgcHJvdmlkZSBhIAoJCQkJLy8gbW9yZSBkZXNjcmlwdCBlcnJvciBtZXNzYWdlIHRvIHRoZSB1c2VyIHRvIGluZm9ybSB0aGVtIG1vcmUgY29uY2lzZWx5IGFzIHRvIHdoYXQgdGhlIGlzc3VlIGlzCgkJCQljYXNlICJFMDAwMjciOgoJCQkJCSRtaXNzaW5nRmllbGRzID0gYXJyYXkoKTsKCQkJCQkkbWVzc2FnZSA9ICJUaGUgZm9sbG93aW5nIGZpZWxkcyBhcmUgcmVxdWlyZWQ6ICI7CgkJCQkJCQoJCQkJCWlmKCFpc3NldCgkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+YWRkcmVzcykgfHwgISRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5hZGRyZXNzKQoJCQkJCXsKCQkJCQkJJG1pc3NpbmdGaWVsZHNbXSA9ICJCaWxsaW5nIEFkZHJlc3MiOwoJCQkJCX0KCQkJCQkKCQkJCQlpZighaXNzZXQoJHBheW1lbnRQcm9maWxlLT5iaWxsVG8tPnppcCkgfHwgISRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT56aXApCgkJCQkJewoJCQkJCQkkbWlzc2luZ0ZpZWxkc1tdID0gIkJpbGxpbmcgWmlwIENvZGUiOwoJCQkJCX0KCQkJCQkKCQkJCQkkbWVzc2FnZSAuPSBpbXBsb2RlKCIsICIsICRtaXNzaW5nRmllbGRzKTsKCQkJCQkJCgkJCQkJYnJlYWs7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCSRtZXNzYWdlID0gJHJlc3BvbnNlLT5nZXRNZXNzYWdlVGV4dCgpOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBhZGRpbmcgcGF5bWVudCBwcm9maWxlIHRvIGN1c3RvbWVyOiB7JG1lc3NhZ2V9IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKGlzX251bGwoJGN1c3RvbWVyUHJvZmlsZUlkKSB8fCBpc19udWxsKCRwYXltZW50UHJvZmlsZUlkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY3VzdG9tZXIiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9jcmVhdGUgbGluayB0byBhdXRob3JpemUubmV0IENJTSBjdXN0b21lcgoJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0FVVEhORVRfQ0lNX0NVU1RPTUVSX0xJTktTLCBhcnJheSgiYXV0aG5ldF9jdXN0b21lcl9pZCI9PiRjdXN0b21lclByb2ZpbGVJZCwgImF1dGhuZXRfcGF5bWVudF9pZCI9PiRwYXltZW50UHJvZmlsZUlkLCAibWVtYmVybW91c2VfY3VzdG9tZXJfaWQiPT4kdXNlci0+Z2V0SWQoKSkpOwoJCWlmKCEkcmVzdWx0KQoJCXsKCQkJLy9UT0RPOiBkbyBzb21ldGhpbmcgaWYgdGhpcyBmYWlscyBpbiB0aGUgZnV0dXJlLCBpZSBsb2cuIE5vdCBhIGNyaXRpY2FsIGVub3VnaCBlcnJvciB0byBzdG9wIHRoZSBwcm9jZXNzLCBidXQgd2Ugd291bGQgYmUgaW50ZXJlc3RlZCB0byBrbm93IGl0IGhhcHBlbmVkCgkJfQoJCQoJCS8vY3JlYXRlIGVudHJ5IGluIGNhcmQgb24gZmlsZSB0YWJsZQoJCSRjb2ZEYXRhID0gYXJyYXkoInVzZXJfaWQiPT4kdXNlci0+Z2V0SWQoKSwgInBheW1lbnRfc2VydmljZV9pZCI9PiR0aGlzLT5nZXRJZCgpLCAicGF5bWVudF9zZXJ2aWNlX2lkZW50aWZpZXIiPT4kcGF5bWVudFByb2ZpbGVJZCk7CgkJaWYgKCFpc19udWxsKCRvcmlnaW5hbE9yZGVySWQpKQoJCXsKCQkJJGNvZkRhdGFbJ29yaWdpbmFsX29yZGVyX2lkJ10gPSAkb3JpZ2luYWxPcmRlcklkOwoJCX0KCQkkcmVzdWx0ID0gJHdwZGItPmluc2VydChNTV9UQUJMRV9DQVJEX09OX0ZJTEUsICRjb2ZEYXRhKTsKCQlpZighJHJlc3VsdCkKCQl7CgkJCS8vVE9ETzogc2FtZSBkZWFsIGFzIGFib3ZlOiBkbyBzb21ldGhpbmcgaWYgdGhpcyBmYWlscyBpbiB0aGUgZnV0dXJlLCBpZSBsb2cuIE5vdCBjcml0aWNhbCBlbm91Z2ggZXJyb3IgdG8gc3RvcCAKCQl9CgkJCgkJJGN1c3RvbWVySW5mbyA9IGFycmF5KCk7CgkJJGN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXSA9ICRjdXN0b21lclByb2ZpbGVJZDsKCQkkY3VzdG9tZXJJbmZvWyJwYXltZW50X2lkIl0gPSAkcGF5bWVudFByb2ZpbGVJZDsKCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRjdXN0b21lckluZm8pOwoJfQoJCgkKCS8qKgoJICogQ2hhcmdlIGFuIG9yZGVyCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGNoYXJnZQoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyBUaGUgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24gdG8gdXNlIGluIGNoYXJnaW5nIHRoZSBvcmRlcgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXR1cyBvZiB0aGUgY2hhcmdlIGF0dGVtcHQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNoYXJnZU9yZGVyKE1NX09yZGVyICRvcmRlciwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsICR2YWxpZGF0ZT10cnVlKSAKCXsgCgkJZ2xvYmFsICR3cGRiOwoJCQoJCXBhcmVudDo6Y2hhcmdlT3JkZXIoJG9yZGVyLCRjYXJkSW5mbywkdmFsaWRhdGUpOwoJCQoJCSR0cnlDYXJkT25GaWxlID0gaXNfbnVsbCgkY2FyZEluZm8pOwoJCQoJCWlmICghJHRyeUNhcmRPbkZpbGUpIAoJCXsKCQkJJGNhcmRWYWxpZGF0aW9uID0gJGNhcmRJbmZvLT52YWxpZGF0ZSgpOwoJCQlpZiAoJGNhcmRWYWxpZGF0aW9uICE9PSB0cnVlKQoJCQl7CgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjaGFyZ2Ugb3JkZXI6IHskY2FyZFZhbGlkYXRpb259IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQkJCQoJCQkJCQoJCSRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvID0gJHRoaXMtPmxvb2t1cEN1c3RvbWVyKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKSk7CgkJCgkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQlpZiAoJGF1dGhOZXRDSU1DdXN0b21lckluZm8gPT09IGZhbHNlKQoJCXsKCQkJaWYgKCR0cnlDYXJkT25GaWxlKQoJCQl7CgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkludmFsaWQgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7IAoJCQl9CgkJCSRjY1Jlc3BvbnNlID0gJHRoaXMtPmNyZWF0ZUN1c3RvbWVyKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKSwgJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpLCAkY2FyZEluZm8sICRvcmRlci0+aWQpOwoJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGNjUmVzcG9uc2UpKQoJCQl7CgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yOiB7JGNjUmVzcG9uc2UtPm1lc3NhZ2V9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOyAgIAoJCQl9CgkJCSRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvID0gJGNjUmVzcG9uc2UtPm1lc3NhZ2U7CgkJfQoJCWVsc2UgCgkJewoJCQlpZiAoISR0cnlDYXJkT25GaWxlKQoJCQl7CgkJCQkvL3RoZXJlIGlzIGEgY2FyZCBvbiBmaWxlLCBidXQgY3JlZGl0IGNhcmQgaW5mbyB3YXMgc2VudCBhcyB3ZWxsLiBVcGRhdGUgdGhlIGNhcmQgb24gZmlsZSB0byBiZSB0aGUgY2FyZCB0aGF0IHdhcyBzZW50CgkJCQkkYVByb2R1Y3RJdGVtID0gcmVzZXQoJHByb2R1Y3RJdGVtcyk7CgkJCQkkdXBkYXRlUmVzcG9uc2UgPSAkdGhpcy0+dXBkYXRlU3Vic2NyaXB0aW9uSW5mbygkYVByb2R1Y3RJdGVtLCRjYXJkSW5mbywkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCkpOwoJCQkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJHVwZGF0ZVJlc3BvbnNlKSkKCQkJCXsgCgkJCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQkJCXJldHVybiAkdXBkYXRlUmVzcG9uc2U7CgkJCQl9CgkJCX0KCQl9CgoJCS8vbm93IHNldHVwIHNjaGVkdWxlcyBmb3IgdGhlIHJlY3VycmluZyBwcm9kdWN0cwoJCSRjcmVhdGVTY2hlZHVsZWRSZXN1bHQgPSAkdGhpcy0+Y3JlYXRlU2NoZWR1bGVzRnJvbVByb2R1Y3RzKCRwcm9kdWN0SXRlbXMpOwoJCQoJCWlmKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdCkpCgkJeyAKCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQlyZXR1cm4gJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdDsgCgkJfQoJCQoJCWlmICgkb3JkZXItPmdldFRvdGFsKCkgPiAwLjAwKQoJCXsKCQkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJJG9yZGVySXRlbUlkID0gbnVsbDsKCQkJaWYgKGNvdW50KCRwcm9kdWN0SXRlbXMpID09IDEpCgkJCXsKCQkJCSRvcmRlckl0ZW0gPSByZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQkJCSRvcmRlckl0ZW1JZCA9ICRvcmRlckl0ZW0tPmdldElkKCk7CgkJCX0KCQkJCgkJCSRkZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0sIGl0ZW06IHskb3JkZXJJdGVtLT5nZXREZXNjcmlwdGlvbigpfSI7CgkJCSRpbnZvaWNlTnVtYmVyID0gJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLiItIi4kb3JkZXJJdGVtLT5nZXRJdGVtSWQoKTsKCQkJJGNoYXJnZVJlc3BvbnNlID0gJHRoaXMtPnNlbmRBdXRoTmV0Q0lNQ2hhcmdlKCRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvLCAkb3JkZXItPmdldFRvdGFsKCksICRpbnZvaWNlTnVtYmVyLCAkZGVzY3JpcHRpb24pOwoJCQkKCQkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGNoYXJnZVJlc3BvbnNlKSB8fCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0ZhaWxlZCgkY2hhcmdlUmVzcG9uc2UpKQoJCQl7IAoJCQkJJGNyZWF0ZWRTdWJzY3JpcHRpb25zID0gJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdC0+bWVzc2FnZTsKCQkJCWlmIChpc19hcnJheSgkY3JlYXRlZFN1YnNjcmlwdGlvbnMpICYmIChjb3VudCgkY3JlYXRlZFN1YnNjcmlwdGlvbnMpID4gMCkpCgkJCQl7CgkJCQkJJHRoaXMtPmNhbmNlbFNjaGVkdWxlZFN1YnNjcmlwdGlvbnMoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKTsKCQkJCX0KCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiAkY2hhcmdlUmVzcG9uc2U7ICAKCQkJfQoJCQkKCQkJLy9sb2cgdG8gdHJhbnNhY3Rpb25zIHRhYmxlcwoJCQkkY2hhcmdlT2JqZWN0ID0gJGNoYXJnZVJlc3BvbnNlLT5nZXRNZXNzYWdlKCk7CgkJCQoJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0iOwoJCQkkdHJhbnNhY3Rpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSRsYXN0Rm91ciA9IChpc3NldCgkY2hhcmdlT2JqZWN0LT5jYXJkX3R5cGUpKSA/IHN0cl9yZXBsYWNlKCJYIiwgIiIsICRjaGFyZ2VPYmplY3QtPmNhcmRfdHlwZSkgOiAiIjsKCQkJJGxhc3RGb3VyID0gc3Vic3RyKCRsYXN0Rm91ciwgMCwgNCk7CgkJCQoJCQkkaW5zZXJ0RGF0YSA9IGFycmF5KCAib3JkZXJfaWQiICAgICAgICAgIAk9PiAkb3JkZXItPmdldElkKCksCgkJCQkJCQkJICJvcmRlcl9pdGVtX2lkIiAgICAgCT0+ICRvcmRlckl0ZW1JZCwKCQkJCQkJCQkgImNoYXJnZV9pZCIgICAgIAkgCT0+ICRjaGFyZ2VPYmplY3QtPnRyYW5zYWN0aW9uX2lkLAoJCQkJCQkJCSAiYXV0aG9yaXphdGlvbl9jb2RlIgk9PiAoaXNzZXQoJGNoYXJnZU9iamVjdC0+YXV0aG9yaXphdGlvbl9jb2RlKSkgPyAkY2hhcmdlT2JqZWN0LT5hdXRob3JpemF0aW9uX2NvZGUgOiAiIiwKCQkJCQkJCQkgImxhc3RfZm91ciIJCQk9PiAkbGFzdEZvdXIsCgkJCQkJCQkJICJhbW91bnQiICAgICAgICAgICAgCT0+ICRvcmRlci0+Z2V0VG90YWwoKSwKCQkJCQkJCQkgInRyYW5zYWN0aW9uX2RhdGUiICAJPT4gJHRyYW5zYWN0aW9uRGF0ZQoJCQkpOwoJCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0FVVEhORVRfQ0lNX0NIQVJHRVMsJGluc2VydERhdGEpOwoJCQkkYXV0aE5ldENoYXJnZUlkID0gJHdwZGItPmluc2VydF9pZDsKCQkJCgkJCS8vbm93IGxvZyB0aGUgcGF5bWVudCBpbiB0aGUgdHJhbnNhY3Rpb25zIHRhYmxlCgkJCWlmICgkdGhpcy0+dGVzdE1vZGUpCgkJCXsKCQkJCSRyZXMgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtSWQsICRvcmRlci0+Z2V0VG90YWwoKSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+aWQsJGF1dGhOZXRDaGFyZ2VJZCwkdHJhbnNhY3Rpb25EYXRlKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkcmVzID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtSWQsICRvcmRlci0+Z2V0VG90YWwoKSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+aWQsJGF1dGhOZXRDaGFyZ2VJZCwkdHJhbnNhY3Rpb25EYXRlKTsKCQkJfQoJCX0KCQkKCQkvL3JlYWNoaW5nIHRoaXMgcG9pbnQgbWVhbnMgdGhlIHN1YnNjcmlwdGlvbnMgd2VyZSBzY2hlZHVsZWQgYW5kIHRoZSBpbml0aWFsIGNoYXJnZSB3YXMgc3VjY2Vzc2Z1bAoJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokUEFJRF9DT01QTEVURSk7CgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CQoJCgkKCS8qKgoJICogU2VuZCBhIGNoYXJnZSB0byBBdXRob3JpemUubmV0IENJTSwgYW5kIHJldHVybnMgYW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHVuZmlsdGVyZWQgcmVzdWx0LgoJICogCgkgKiBAcGFyYW0gYXJyYXkgJGF1dGhOZXRDSU1DdXN0b21lckluZm8gQW4gYXJyYXkgb2YgQXV0aG9yaXplLm5ldCBDSU0gY3VzdG9tZXIgaW5mbyB0byBjaGFyZ2UuIAoJICogQHBhcmFtIGludGVnZXIgJGFtb3VudCBUaGUgYW1vdW50IHRvIGNoYXJnZSBpbiBjZW50cy4gSWYgYSBhbW91bnQgaXMgZ2l2ZW4gdGhhdCBpcyBhIGZsb2F0LCBpdCBpcyBhc3N1bWVkIHRvIGJlIGRvbGxhcnMgYW5kIG11bHRpcGxpZWQgYnkgMTAwIHRvIGdldCB0aGUgaW50ZWdlciB2YWx1ZQoJICogQHBhcmFtIHN0cmluZyAkaW52b2ljZU51bWJlciBUaGUgaW52b2ljZSBudW1iZXIgdG8gYXR0YWNoIHRvIHRoZSBjaGFyZ2UKCSAqIEBwYXJhbSBzdHJpbmcgJGRlc2NyaXB0aW9uIFRoZSBkZXNjcmlwdGlvbiB0byBhdHRhY2ggdG8gdGhlIGNoYXJnZQoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgT24gc3VjY2VzcywgY29udGFpbnMgdGhlIGJyYWludHJlZSBjaGFyZ2Ugb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBnYXRld2F5LCBvbiBmYWlsdXJlIGNvbnRhaW5zIGFuIGVycm9yIG1lc3NhZ2UKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNlbmRBdXRoTmV0Q0lNQ2hhcmdlKCRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvLCAkYW1vdW50LCAkaW52b2ljZU51bWJlciwgJGRlc2NyaXB0aW9uPSIiKQoJewoJCWlmIChpc19udWxsKCRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBjaGFyZ2U6IE5vIHBheW1lbnQgbWV0aG9kIHdhcyBwcm92aWRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCFpc19udW1lcmljKCRhbW91bnQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogUmVjZWl2ZWQgYSBub24tbnVtZXJpYyBhbW91bnQgdG8gY2hhcmdlIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdHJhbnNhY3Rpb24gPSBuZXcgQXV0aG9yaXplTmV0VHJhbnNhY3Rpb24oKTsKCQkkdHJhbnNhY3Rpb24tPmFtb3VudCA9ICRhbW91bnQ7CgkJJHRyYW5zYWN0aW9uLT5vcmRlci0+aW52b2ljZU51bWJlciA9ICRpbnZvaWNlTnVtYmVyOwoJCSR0cmFuc2FjdGlvbi0+b3JkZXItPmRlc2NyaXB0aW9uID0gJGRlc2NyaXB0aW9uOwoJCSR0cmFuc2FjdGlvbi0+Y3VzdG9tZXJQcm9maWxlSWQgPSAkYXV0aE5ldENJTUN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXTsKCQkkdHJhbnNhY3Rpb24tPmN1c3RvbWVyUGF5bWVudFByb2ZpbGVJZCA9ICRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvWyJwYXltZW50X2lkIl07CgkJCgkJJGF1dGhOZXRDSU0gPSAkdGhpcy0+Z2V0QXV0aG9yaXplTmV0Q0lNKCk7CgkJJHJlc3BvbnNlID0gJGF1dGhOZXRDSU0tPmNyZWF0ZUN1c3RvbWVyUHJvZmlsZVRyYW5zYWN0aW9uKCJBdXRoQ2FwdHVyZSIsICR0cmFuc2FjdGlvbik7CgkJCgkJaWYoJHJlc3BvbnNlLT5pc09rKCkpIAoJCXsKCQkJJHRyYW5zYWN0aW9uUmVzcG9uc2UgPSAkcmVzcG9uc2UtPmdldFRyYW5zYWN0aW9uUmVzcG9uc2UoKTsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCR0cmFuc2FjdGlvblJlc3BvbnNlKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBjaGFyZ2U6IHskcmVzcG9uc2UtPmdldE1lc3NhZ2VUZXh0KCl9IiwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGV4ZWN1dGVTdWJzY3JpcHRpb25QYXltZW50KE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCAkY3VycmVudFJlYmlsbE51bWJlcikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJTdWJzY3JpcHRpb24gZm9yIG9yZGVyIGl0ZW0gaWQgIi4kb3JkZXJJdGVtLT5nZXRJZCgpLiIgd2FzIG5vdCBjaGFyZ2VkIGJlY2F1c2UgdGhlIGl0ZW0gaXMgY2FuY2VsbGVkIik7CgkJfQoJCQoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NPTVBMRVRFKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJTdWJzY3JpcHRpb24gZm9yIG9yZGVyIGl0ZW0gaWQgIi4kb3JkZXJJdGVtLT5nZXRJZCgpLiIgd2FzIG5vdCBjaGFyZ2VkIGJlY2F1c2UgYmlsbGluZyBpcyBjb21wbGV0ZSBmb3IgdGhpcyBpdGVtIik7CgkJfQoJCQoJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQoJCSRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvID0gJHRoaXMtPmxvb2t1cEN1c3RvbWVyKE1NX09yZGVyOjpnZXRVc2VySWRCeU9yZGVySWQoJG9yZGVyLT5pZCkpOwoJCWlmICgkYXV0aE5ldENJTUN1c3RvbWVySW5mbyA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkludmFsaWQgY2FyZCBvbiBmaWxlIGZvciB1c2VyIGlkIHskcGF5bWVudEV2ZW50LT5nZXRVc2VySWQoKX0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCgkJJGRlc2NyaXB0aW9uID0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSwgaXRlbTogeyRvcmRlckl0ZW0tPmdldERlc2NyaXB0aW9uKCl9IjsKCQkkaW52b2ljZU51bWJlciA9ICRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKS4iLSIuJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCk7CgkJJGNoYXJnZVJlc3BvbnNlID0gJHRoaXMtPnNlbmRBdXRoTmV0Q0lNQ2hhcmdlKCRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvLCAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSwgJGludm9pY2VOdW1iZXIsICRkZXNjcmlwdGlvbik7CgkJCgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGNoYXJnZVJlc3BvbnNlKSB8fCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0ZhaWxlZCgkY2hhcmdlUmVzcG9uc2UpKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJcGFyZW50OjpoYW5kbGVPdmVyZHVlU3Vic2NyaXB0aW9uSXRlbSgkb3JkZXJJdGVtKTsKCQkJcmV0dXJuICRjaGFyZ2VSZXNwb25zZTsKCQl9CgkJCgkJLy9sb2cgc3VjY2Vzc2Z1bCB0cmFuc2FjdGlvbgoJCSRjaGFyZ2VPYmplY3QgPSAkY2hhcmdlUmVzcG9uc2UtPmdldE1lc3NhZ2UoKTsKCQkkdHJhbnNhY3Rpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJJGxhc3RGb3VyID0gKGlzc2V0KCRjaGFyZ2VPYmplY3QtPmNhcmRfdHlwZSkpID8gc3RyX3JlcGxhY2UoIlgiLCAiIiwgJGNoYXJnZU9iamVjdC0+Y2FyZF90eXBlKSA6ICIiOwoJCSRsYXN0Rm91ciA9IHN1YnN0cigkbGFzdEZvdXIsIDAsIDQpOwoJCQoJCSRpbnNlcnREYXRhID0gYXJyYXkoICJvcmRlcl9pZCIgPT4gJG9yZGVyLT5nZXRJZCgpLAoJCQkJIm9yZGVyX2l0ZW1faWQiICAgICAJPT4gJG9yZGVySXRlbS0+Z2V0SWQoKSwKCQkJCSJjaGFyZ2VfaWQiICAgICAJCT0+ICRjaGFyZ2VPYmplY3QtPnRyYW5zYWN0aW9uX2lkLAoJCQkJImF1dGhvcml6YXRpb25fY29kZSIJPT4gKGlzc2V0KCRjaGFyZ2VPYmplY3QtPmF1dGhvcml6YXRpb25fY29kZSkpID8gJGNoYXJnZU9iamVjdC0+YXV0aG9yaXphdGlvbl9jb2RlIDogIiIsCgkJCQkibGFzdF9mb3VyIgkJCQk9PiAkbGFzdEZvdXIsCgkJCQkiYW1vdW50IiAgICAgICAgICAgCSAJPT4gJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCksCgkJCQkidHJhbnNhY3Rpb25fZGF0ZSIgIAk9PiAkdHJhbnNhY3Rpb25EYXRlKTsKCQkKCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0FVVEhORVRfQ0lNX0NIQVJHRVMsJGluc2VydERhdGEpOwoJCSRhdXRoTmV0Q0lNVGFibGVDaGFyZ2VJZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkKCQlpZiAoJHRoaXMtPnRlc3RNb2RlKQoJCXsKCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCksICRvcmRlci0+Z2V0Q3VycmVuY3koKSwgJGRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+Z2V0SWQoKSwkYXV0aE5ldENJTVRhYmxlQ2hhcmdlSWQpOwkKCQl9CgkJZWxzZSAKCQl7CgkJCU1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCksICRvcmRlci0+Z2V0Q3VycmVuY3koKSwgJGRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+Z2V0SWQoKSwkYXV0aE5ldENJTVRhYmxlQ2hhcmdlSWQpOwoJCX0KCQkJCgkJLy8gc2NoZWR1bGUgYW5vdGhlciBwYXltZW50IGlmIG5lY2Vzc2FyeQoJCXJldHVybiAkdGhpcy0+c2NoZWR1bGVOZXh0UGF5bWVudEZvckV4aXN0aW5nU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0sICRvcmRlci0+Z2V0Q3VzdG9tZXIoKSwgJGN1cnJlbnRSZWJpbGxOdW1iZXIpOwoJfQoJCgkKCS8qKgoJICogTG9va3MgdXAgdGhlIEF1dGhvcml6ZS5uZXQgQ0lNIGN1c3RvbWVyIGlkIGxpbmtlZCB0byBhIE1lbWJlck1vdXNlIHVzZXIKCSAqIAoJICogQHBhcmFtIGludCAkdXNlcklkIFRoZSBNZW1iZXJNb3VzZSB1c2VyIGlkCgkgKiBAcmV0dXJuIFRoZSAoYXJyYXkpIEF1dGhvcml6ZS5uZXQgQ0lNIGN1c3RvbWVyIGlkIGFuZCBwYXltZW50IGlkIGlmIGZvdW5kLCBib29sZWFuIGZhbHNlIGlmIG5vdCBmb3VuZCBvciBlcnJvcmVkCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBsb29rdXBDdXN0b21lcigkdXNlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkbG9va3VwU1FMID0gIlNFTEVDVCBhdXRobmV0X2N1c3RvbWVyX2lkLCBhdXRobmV0X3BheW1lbnRfaWQgZnJvbSAiLk1NX1RBQkxFX0FVVEhORVRfQ0lNX0NVU1RPTUVSX0xJTktTLiIgV0hFUkUgbWVtYmVybW91c2VfY3VzdG9tZXJfaWQ9J3skdXNlcklkfSciOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3JvdygkbG9va3VwU1FMKTsKCQlpZiAoaXNfbnVsbCgkcm93KSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJGN1c3RvbWVySW5mbyA9IGFycmF5KCk7CgkJJGN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXSA9ICRyb3ctPmF1dGhuZXRfY3VzdG9tZXJfaWQ7CgkJJGN1c3RvbWVySW5mb1sicGF5bWVudF9pZCJdID0gJHJvdy0+YXV0aG5ldF9wYXltZW50X2lkOwoJCQoJCXJldHVybiAkY3VzdG9tZXJJbmZvOwoJfQoJCgkKCS8qKgoJICogVXBkYXRlcyB0aGUgcGF5bWVudCBnYXRld2F5IHdpdGggbmV3IGluZm9ybWF0aW9uLCBhbmQgdXBkYXRlIHRoZSBNZW1iZXJNb3VzZSBvcmRlciB3aXRoIHRoZSBuZXcgYmlsbGluZyBhZGRyZXNzCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjp1cGRhdGVTdWJzY3JpcHRpb25JbmZvKCkKCSAqIAoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtIFRoZSBvcmRlciBpdGVtIHJlcHJlc2VudGluZyB0aGUgc3Vic2NyaXB0aW9uIGJlaW5nIHVwZGF0ZWQKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gKG9wdGlvbmFsKSBUaGUgbmV3IGNhcmQgdG8gc3RvcmUgb24gZmlsZQoJICogQHBhcmFtIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MgVGhlIG5ldyBiaWxsaW5nIGFkZHJlc3MgdG8gc3RvcmUuIFNob3VsZCBiZSB0aGUgYWRkcmVzcyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1c3RvbWVyJ3MgY2FyZCBvbiBmaWxlCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSByZXByZXNlbnRpbmcgc3VjY2VzcyBvciBlcnJvci4gQ29udGFpbnMgYSBkZXNjcmlwdGl2ZSBlcnJvciBtZXNzYWdlIG9uIGVycm9yCgkgKiAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sIE1NX0NhcmRJbmZvICRjYXJkSW5mbz1udWxsLCBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzPW51bGwpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoaXNfbnVsbCgkY2FyZEluZm8pIHx8IGlzX251bGwoJGJpbGxpbmdBZGRyZXNzKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IEJvdGggYSBjcmVkaXQgY2FyZCBhbmQgYSBiaWxsaW5nIGFkZHJlc3MgbXVzdCBiZSBzdXBwbGllZCB0byB1cGRhdGUgYSBzdWJzY3JpcHRpb24iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRjYXJkVmFsaWQgPSAkY2FyZEluZm8tPnZhbGlkYXRlKCk7CgkJaWYgKCRjYXJkVmFsaWQgIT09IHRydWUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yOiB7JGNhcmRWYWxpZH0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRjdXN0b21lcklkID0gTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCWlmICgkY3VzdG9tZXJJZCA9PSAtMSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBzdWJzY3JpcHRpb246IGN1c3RvbWVyIHdhcyBub3QgZm91bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvID0gJHRoaXMtPmxvb2t1cEN1c3RvbWVyKCRjdXN0b21lcklkKTsKCQlpZiAoJGF1dGhOZXRDSU1DdXN0b21lckluZm8gPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogY3VzdG9tZXIgd2FzIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHVzZXIgPSBuZXcgTU1fVXNlcigkY3VzdG9tZXJJZCk7CgkJaWYgKCEkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogaW52YWxpZCBjdXN0b21lciBwcm92aWRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy8gdXBkYXRlIHBheW1lbnQgcHJvZmlsZSB0byBjdXN0b21lcgoJCSRwYXltZW50UHJvZmlsZSA9IG5ldyBBdXRob3JpemVOZXRQYXltZW50UHJvZmlsZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+Y3VzdG9tZXJUeXBlID0gImluZGl2aWR1YWwiOwoJCQoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5maXJzdE5hbWUgPSAkdXNlci0+Z2V0Rmlyc3ROYW1lKCk7CgkJJHBheW1lbnRQcm9maWxlLT5iaWxsVG8tPmxhc3ROYW1lID0gJHVzZXItPmdldExhc3ROYW1lKCk7CgkJJHBheW1lbnRQcm9maWxlLT5iaWxsVG8tPmFkZHJlc3MgPSAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5jaXR5ID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRDaXR5KCk7CgkJJHBheW1lbnRQcm9maWxlLT5iaWxsVG8tPnN0YXRlID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRTdGF0ZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT56aXAgPSAkYmlsbGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+Y291bnRyeSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q291bnRyeSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5waG9uZU51bWJlciA9ICR1c2VyLT5nZXRQaG9uZSgpOwoJCQoJCWlmICgkY2FyZEluZm8gaW5zdGFuY2VvZiBNTV9QYXltZW50VG9rZW4pCgkJewoJCQkvL21ha2Ugc3VyZSB0aGVyZSBpcyBubyBmdW5ueSBidXNpbmVzcyBnb2luZyBvbiB3aXRoIHRoZSBwYXltZW50IHRva2VuIHJlY2VpdmVkIGZyb20gdGhlIGZyb250IGVuZAoJCQkkcGF5bWVudFRva2VuID0gaHRtbGVudGl0aWVzKCRjYXJkSW5mby0+Z2V0VG9rZW4oKSwgRU5UX1FVT1RFUywgIlVURi04Iik7CgkJCSR0b2tlbkNvbXBvbmVudHMgPSBleHBsb2RlKCJ8IiwkcGF5bWVudFRva2VuKTsKCQkJaWYgKGNvdW50KCR0b2tlbkNvbXBvbmVudHMpID09IDIpCgkJCXsKCQkJCSRwYXltZW50UHJvZmlsZS0+cGF5bWVudC0+b3BhcXVlRGF0YSA9IG5ldyBzdGRDbGFzcygpOwoJCQkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5vcGFxdWVEYXRhLT5kYXRhRGVzY3JpcHRvciA9ICR0b2tlbkNvbXBvbmVudHNbMF07CgkJCQkkcGF5bWVudFByb2ZpbGUtPnBheW1lbnQtPm9wYXF1ZURhdGEtPmRhdGFWYWx1ZSA9ICR0b2tlbkNvbXBvbmVudHNbMV07CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5jcmVkaXRDYXJkLT5jYXJkTnVtYmVyID0gJGNhcmRJbmZvLT5nZXRDYXJkTnVtYmVyKCk7CgkJCSRwYXltZW50UHJvZmlsZS0+cGF5bWVudC0+Y3JlZGl0Q2FyZC0+ZXhwaXJhdGlvbkRhdGUgPSAkY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCkuIi0iLiRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvbk1vbnRoKCk7CgkJCSRwYXltZW50UHJvZmlsZS0+cGF5bWVudC0+Y3JlZGl0Q2FyZC0+Y2FyZENvZGUgPSAkY2FyZEluZm8tPmdldENWVigpOwoJCX0KCQkKCQkkYXV0aE5ldENJTSA9ICR0aGlzLT5nZXRBdXRob3JpemVOZXRDSU0oKTsKCQkkcmVzcG9uc2UgPSAkYXV0aE5ldENJTS0+dXBkYXRlQ3VzdG9tZXJQYXltZW50UHJvZmlsZSgkYXV0aE5ldENJTUN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXSwgJGF1dGhOZXRDSU1DdXN0b21lckluZm9bInBheW1lbnRfaWQiXSwgJHBheW1lbnRQcm9maWxlKTsKCQkKCQlpZigkcmVzcG9uc2UtPmlzT2soKSkKCQl7CgkJCXBhcmVudDo6dXBkYXRlU3Vic2NyaXB0aW9uSW5mbygkb3JkZXJJdGVtLCRjYXJkSW5mbywkYmlsbGluZ0FkZHJlc3MpOwoJCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCQl7CgkJCQlyZXR1cm4gJHRoaXMtPnJlc3VtZVN1YnNjcmlwdGlvbigkb3JkZXJJdGVtKTsKCQkJfQoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQl9CgkJZWxzZQoJCXsJCgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBjcmVkaXQgY2FyZCBvbiBzdWJzY3JpcHRpb246XG57JHJlc3BvbnNlLT5nZXRNZXNzYWdlVGV4dCgpfSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIFJlZnVuZHMgYSB0cmFuc2FjdGlvbgoJICogCgkgKiBAcGFyYW0gaW50ZWdlciAkdHJhbnNhY3Rpb25JZCBUaGUgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24gdG8gcmVmdW5kCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzLCBmYWlsdXJlLCBvciBlcnJvcgoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQpCgl7CgkJcmV0dXJuICR0aGlzLT5fcmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQsdHJ1ZSk7Cgl9CgkKCQoJLyoqCgkgKiBJbnRlcm5hbCByZWZ1bmQgbWV0aG9kIHRoYXQgYWxsb3dzIGEgcmVmdW5kIHRvIGJlIHByb2Nlc3NlZCB0aGUgc2FtZSB3YXksIGV2ZW4gaWYgaXQgaXMgaW5pdGlhdGVkIG9uIEF1dGhvcml6ZS5uZXQgQ0lNIGFuZCBzZW50IHRvIHVzIHZpYSB3ZWJob29rCgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICR0cmFuc2FjdGlvbklkIFRoZSBpZCBvZiB0aGUgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24gYmVpbmcgcmVmdW5kZWQKCSAqIEBwYXJhbSBib29sZWFuICRzaG91bGRBdHRlbXB0R2F0ZXdheVJlZnVuZCAob3B0aW9uYWwpIEluZGljYXRlcyB3aGV0aGVyIHRoZSBtZXRob2Qgc2hvdWxkIGF0dGVtcHQgdG8gaXNzdWUgYSByZWZ1bmQgdGhyb3VnaCB0aGUgQXV0aG9yaXplLm5ldCBDSU0gYXBpLiBJZiBBdXRob3JpemUubmV0IENJTSBub3RpZmllcyB1cyB2aWEgd2ViaG9vaywgdGhlIGNoYXJnZSBpcyBhbHJlYWR5IHJlZnVuZGVkLCBzbyB0aGlzIHNob3VsZCBiZSBmYWxzZQoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIF9yZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCwkc2hvdWxkQXR0ZW1wdEdhdGV3YXlSZWZ1bmQ9dHJ1ZSkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vbWFrZSBzdXJlIHdlIGhhdmUgYSB2YWxpZCB0cmFuc2FjdGlvbiBpZAoJCWlmIChlbXB0eSgkdHJhbnNhY3Rpb25JZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZCwgaW52YWxpZCB0cmFuc2FjdGlvbiBpZCBzdXBwbGllZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9tYWtlIHN1cmUgdGhlIHRyYW5zYWN0aW9uIGV4aXN0cwoJCSR0cmFuc2FjdGlvblJvdyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBmcm9tICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgd2hlcmUgaWQgPSAlcyIsJHRyYW5zYWN0aW9uSWQpKTsKCQlpZiAoaXNfbnVsbCgkdHJhbnNhY3Rpb25Sb3cpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQsIHRyYW5zYWN0aW9uIGRvZXMgbm90IGV4aXN0IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL21ha2Ugc3VyZSBpdHMgbm90IGFscmVhZHkgcmVmdW5kZWQKCQlpZiAoIWlzX251bGwoJHRyYW5zYWN0aW9uUm93LT5yZWZ1bmRfaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUcmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlZnVuZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2RldGVybWluZSB3aGVyZSB0aGUgdHJhbnNhY3Rpb24gaW5mb3JtYXRpb24gaXMgc3RvcmVkIGJhc2VkIG9uIHRoZSB0eXBlCgkJJHRyYW5zYWN0aW9uQW1vdW50ID0gYWJzKCR0cmFuc2FjdGlvblJvdy0+YW1vdW50KTsKCQkkZ2F0ZXdheVJlZnVuZFJlcXVpcmVkID0gZmFsc2U7CgkJc3dpdGNoICgkdHJhbnNhY3Rpb25Sb3ctPnRyYW5zYWN0aW9uX3R5cGUpCgkJewoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UOgoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVDoKCQkJCSRhdXRoTmV0Q0lNQ2hhcmdlUXVlcnkgPSAiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX0FVVEhORVRfQ0lNX0NIQVJHRVMuIiBXSEVSRSBpZCA9ICVzIjsKCQkJCSRhdXRoTmV0Q0lNQ2hhcmdlSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCRhdXRoTmV0Q0lNQ2hhcmdlUXVlcnksJHRyYW5zYWN0aW9uUm93LT5wYXltZW50X3NlcnZpY2VfZGV0YWlsX2lkKSk7CgkJCQkkYXV0aE5ldENoYXJnZUlkID0gJGF1dGhOZXRDSU1DaGFyZ2VJbmZvLT5jaGFyZ2VfaWQ7CgkJCQkkZ2F0ZXdheVJlZnVuZFJlcXVpcmVkID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9DSEFSR0U6CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19DSEFSR0U6CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byByZWZ1bmQgdHJhbnNhY3Rpb246IE5vdCBhIHBheW1lbnQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5rbm93biB0cmFuc2FjdGlvbiB0eXBlLCB1bmFibGUgdG8gcHJvY2VzcyByZWZ1bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICgkZ2F0ZXdheVJlZnVuZFJlcXVpcmVkICYmICRzaG91bGRBdHRlbXB0R2F0ZXdheVJlZnVuZCkKCQl7CgkJCWlmIChlbXB0eSgkYXV0aE5ldENoYXJnZUlkKSkgLy9uZWNlc3NhcnkgZm9yIGJvdGggdm9pZHMgYW5kIGNyZWRpdHMKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJBIGNvbmZpZ3VyYXRpb24gZXJyb3Igd2FzIGVuY291bnRlcmVkIGR1cmluZyB0aGUgYXR0ZW1wdCB0byB2b2lkIHRoZSB0cmFuc2FjdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkkYXV0aE5ldENJTUN1c3RvbWVySW5mbyA9ICR0aGlzLT5sb29rdXBDdXN0b21lcihNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRhdXRoTmV0Q0lNQ2hhcmdlSW5mby0+b3JkZXJfaWQpKTsKCQkJcmV0dXJuICR0aGlzLT5yZWZ1bmRBdXRoTmV0Q0lNQ2hhcmdlSWQoJGF1dGhOZXRDSU1DdXN0b21lckluZm8sICRhdXRoTmV0Q2hhcmdlSWQsICRhdXRoTmV0Q0lNQ2hhcmdlSW5mby0+YW1vdW50LCAkdHJhbnNhY3Rpb25JZCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOyAvL3N1Y2Nlc3MKCX0JIAoJIAoJCgkvKioKCSAqIFJlZnVuZHMgYSBBdXRob3JpemUubmV0IENJTSBjaGFyZ2UsIGFuZCBsb2dzIHRoZSByZWZ1bmQgaW4gdGhlIHRyYW5zYWN0aW9uIHRhYmxlCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkYXV0aE5ldENJTUN1c3RvbWVySW5mbyBBbiBhcnJheSBvZiBBdXRob3JpemUubmV0IENJTSBjdXN0b21lciBpbmZvIHRvIGNoYXJnZS4gCgkgKiBAcGFyYW0gc3RyaW5nICRhdXRoTmV0Q2hhcmdlSWQgVGhlIEF1dGhvcml6ZS5uZXQgQ0lNIGlkZW50aWZpZXIgZm9yIHRoZSBjaGFyZ2UgdG8gYmUgcmVmdW5kZWQKCSAqIEBwYXJhbSBmbG9hdCAkcmVmdW5kQW1vdW50IHRoZSBhbW91bnQgdG8gcmVmdW5kCgkgKiBAcGFyYW0gaW50ICRvcmlnaW5hbFRyYW5zYWN0aW9uSWQgVGhlIGlkZW50aWZpZXIgZm9yIHRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbgoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHJlZnVuZEF1dGhOZXRDSU1DaGFyZ2VJZCgkYXV0aE5ldENJTUN1c3RvbWVySW5mbywgJGF1dGhOZXRDaGFyZ2VJZCwgJHJlZnVuZEFtb3VudCwgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCkKCXsKCQlnbG9iYWwgJHdwZGI7CiAKCQkkYXV0aE5ldENJTSA9ICR0aGlzLT5nZXRBdXRob3JpemVOZXRDSU0oKTsKCQkKCQkvLyBhdHRlbXB0IHRvIGlzc3VlIGEgcmVmdW5kCgkJJHRyYW5zYWN0aW9uID0gbmV3IEF1dGhvcml6ZU5ldFRyYW5zYWN0aW9uKCk7CgkJJHRyYW5zYWN0aW9uLT5hbW91bnQgPSAkcmVmdW5kQW1vdW50OwoJCSR0cmFuc2FjdGlvbi0+dHJhbnNJZCA9ICRhdXRoTmV0Q2hhcmdlSWQ7CgkJJHRyYW5zYWN0aW9uLT5jdXN0b21lclByb2ZpbGVJZCA9ICRhdXRoTmV0Q0lNQ3VzdG9tZXJJbmZvWyJjdXN0b21lcl9pZCJdOwoJCSR0cmFuc2FjdGlvbi0+Y3VzdG9tZXJQYXltZW50UHJvZmlsZUlkID0gJGF1dGhOZXRDSU1DdXN0b21lckluZm9bInBheW1lbnRfaWQiXTsKIAoJCSRyZXNwb25zZSA9ICRhdXRoTmV0Q0lNLT5jcmVhdGVDdXN0b21lclByb2ZpbGVUcmFuc2FjdGlvbigiUmVmdW5kIiwgJHRyYW5zYWN0aW9uKTsKIAoJCWlmKCEkcmVzcG9uc2UtPmlzT2soKSkKCQl7CgkJCS8vIGlmIHJlZnVuZCBmYWlscywgYXR0ZW1wdCB0byB2b2lkIHRoZSBjaGFyZ2UJCgkJCSR0cmFuc2FjdGlvbiA9IG5ldyBBdXRob3JpemVOZXRUcmFuc2FjdGlvbigpOwoJCQkkdHJhbnNhY3Rpb24tPnRyYW5zSWQgPSAkYXV0aE5ldENoYXJnZUlkOwoJCQkkdHJhbnNhY3Rpb24tPmN1c3RvbWVyUHJvZmlsZUlkID0gJGF1dGhOZXRDSU1DdXN0b21lckluZm9bImN1c3RvbWVyX2lkIl07CgkJCSR0cmFuc2FjdGlvbi0+Y3VzdG9tZXJQYXltZW50UHJvZmlsZUlkID0gJGF1dGhOZXRDSU1DdXN0b21lckluZm9bInBheW1lbnRfaWQiXTsKCQkJCgkJCSRyZXNwb25zZSA9ICRhdXRoTmV0Q0lNLT5jcmVhdGVDdXN0b21lclByb2ZpbGVUcmFuc2FjdGlvbigiVm9pZCIsICR0cmFuc2FjdGlvbik7IAoJCQlpZighJHJlc3BvbnNlLT5pc09rKCkpCgkJCXsJCgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBpc3N1ZSBhIHJlZnVuZDogeyRyZXNwb25zZS0+Z2V0TWVzc2FnZVRleHQoKX0iLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCQkKCQkvL2dldCBvcmlnaW5hbCB0cmFuc2FjdGlvbiBkZXRhaWxzCgkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBXSEVSRSBpZD0lcyIsJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCkpOwoJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlJlZnVuZCBmb3IgdHJhbnNhY3Rpb24jIHskb3JpZ2luYWxUcmFuc2FjdGlvbklkfSI7CgkJJHRyYW5zYWN0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQoJCWlmICgkdGhpcy0+dGVzdE1vZGUpCgkJewoJCQkkcmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pZCwKCQkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPm9yZGVyX2l0ZW1faWQsCgkJCQkJJHJlZnVuZEFtb3VudCwKCQkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPmN1cnJlbmN5LAoJCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJCU1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUZVTkQsCgkJCQkJZmFsc2UsCgkJCQkJJHRoaXMtPmdldElkKCksCgkJCQkJbnVsbCwKCQkJCQkkdHJhbnNhY3Rpb25EYXRlLAoJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpOwoJCX0KCQllbHNlIAoJCXsgCgkJCSRyZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaWQsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pdGVtX2lkLAoJCQkJCSRyZWZ1bmRBbW91bnQsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5jdXJyZW5jeSwKCQkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwKCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCWZhbHNlLAoJCQkJCSR0aGlzLT5nZXRJZCgpLAoJCQkJCW51bGwsCgkJCQkJJHRyYW5zYWN0aW9uRGF0ZSwKCQkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbklkKTsKCQl9CgkJaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3BvbnNlKSkKCQl7CgkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgiVVBEQVRFICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgU0VUIHJlZnVuZF9pZCA9ICVzIFdIRVJFIGlkID0gJXMiLCRyZXNwb25zZS0+bWVzc2FnZSwkb3JpZ2luYWxUcmFuc2FjdGlvbklkKSk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUZXN0QVBJTG9naW4oKQoJewoJCXJldHVybiAkdGhpcy0+dGVzdEFQSUxvZ2luOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRUZXN0QVBJTG9naW4oJGFwaUxvZ2luKQoJewoJCSR0aGlzLT50ZXN0QVBJTG9naW4gPSAkYXBpTG9naW47Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRlc3RUcmFuc2FjdGlvbktleSgpCgl7CgkJcmV0dXJuICR0aGlzLT50ZXN0VHJhbnNhY3Rpb25LZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFRlc3RUcmFuc2FjdGlvbktleSgkdHJhbnNhY3Rpb25LZXkpCgl7CgkJJHRoaXMtPnRlc3RUcmFuc2FjdGlvbktleSA9ICR0cmFuc2FjdGlvbktleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGl2ZUFQSUxvZ2luKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxpdmVBUElMb2dpbjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TGl2ZUFQSUxvZ2luKCRhcGlMb2dpbikKCXsKCQkkdGhpcy0+bGl2ZUFQSUxvZ2luID0gJGFwaUxvZ2luOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRMaXZlVHJhbnNhY3Rpb25LZXkoKQoJewoJCXJldHVybiAkdGhpcy0+bGl2ZVRyYW5zYWN0aW9uS2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaXZlVHJhbnNhY3Rpb25LZXkoJHRyYW5zYWN0aW9uS2V5KQoJewoJCSR0aGlzLT5saXZlVHJhbnNhY3Rpb25LZXkgPSAkdHJhbnNhY3Rpb25LZXk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRMaXZlVmFsaWRhdGlvbk1vZGUoKQoJewoJCXJldHVybiAkdGhpcy0+bGl2ZVZhbGlkYXRpb25Nb2RlOwoJfQoKCQoJLyoqCgkgKiBAcmV0dXJuIFJldHVybnMgdGhlIGV4cGVjdGVkICJ2YWx1ZSIgb2YgdGhlIHZhbGlkYXRpb24gbW9kZSB0aGUgQXV0aG5ldCBDSU0gYXBpIGlzIGV4cGVjdGluZyB3aGVuIGNyZWF0aW5nIGEgY3VzdG9tZXIuCgkgKiAtIHNlbGY6OiRWQUxJREFUSU9OX01PREVfTElWRSAobGl2ZU1vZGUpOiBnZW5lcmF0ZXMgYSB0cmFuc2FjdGlvbiB0byB0aGUgcHJvY2Vzc29yIGluIHRoZSBhbW91bnQgb2YgJDAuMDEgb3IgJDAuMDAuIElmIHN1Y2Nlc3NmdWwsIHRoZSB0cmFuc2FjdGlvbiBpcyBpbW1lZGlhdGVseSB2b2lkZWQuCgkgKiAtIHNlbGY6OiRWQUxJREFUSU9OX01PREVfVEVTVCAodGVzdE1vZGUpOiBQZXJmb3JtcyBmaWVsZCB2YWxpZGF0aW9uIG9ubHkuCgkgKiAtIHNlbGY6OiRWQUxJREFUSU9OX01PREVfTk9ORSAobm9uZSk6IG5vIGFkZGl0aW9uYWwgdmFsaWRhdGlvbiBpcyBwZXJmb3JtZWQuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRBY3RpdmVWYWxpZGF0aW9uTW9kZSgpCgl7CgkJc3dpdGNoKCR0aGlzLT5pblRlc3RNb2RlKCkpCgkJewoJCQljYXNlIHRydWU6CgkJCQlyZXR1cm4gc2VsZjo6JFZBTElEQVRJT05fTU9ERV9URVNUOwoJCQkJYnJlYWs7CgkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gJHRoaXMtPmdldExpdmVWYWxpZGF0aW9uTW9kZSgpID8gc2VsZjo6JFZBTElEQVRJT05fTU9ERV9MSVZFIDogc2VsZjo6JFZBTElEQVRJT05fTU9ERV9OT05FOwoJCQkJYnJlYWs7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaXZlVmFsaWRhdGlvbk1vZGUoJHZhbGlkYXRpb25Nb2RlKQoJewoJCSR0aGlzLT5saXZlVmFsaWRhdGlvbk1vZGUgPSAkdmFsaWRhdGlvbk1vZGUgPyB0cnVlIDogZmFsc2U7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFRlc3RNb2RlKCR0ZXN0TW9kZSkKCXsKCQkkdGVzdE1vZGUgPSAoYm9vbCkkdGVzdE1vZGU7CgkJJHRoaXMtPnRlc3RNb2RlID0gJHRlc3RNb2RlOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUZXN0TW9kZSgpCgl7CgkJcmV0dXJuICR0aGlzLT50ZXN0TW9kZTsKCX0KCQoJCgkvKioKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmluVGVzdE1vZGUoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gaW5UZXN0TW9kZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5nZXRUZXN0TW9kZSgpOwoJfQoJCgkKCS8qKgoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6c3dpdGNoVG9UZXN0TW9kZSgpCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzd2l0Y2hUb1Rlc3RNb2RlKCkKCXsKCQkkdGhpcy0+c2V0VGVzdE1vZGUodHJ1ZSk7CgkJcmV0dXJuIHRydWU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBpc0FjY2VwdEpTRW5hYmxlZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5hY2NlcHRKU0VuYWJsZWQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY2NlcHRKU0VuYWJsZWQoJGFjY2VwdEpTRW5hYmxlZCkKCXsKCQkkdGhpcy0+YWNjZXB0SlNFbmFibGVkID0gKGJvb2wpJGFjY2VwdEpTRW5hYmxlZDsKCX0KCQoJCgkvKioKCSAqIGNoZWNrb3V0SW5pdCBpcyBjYWxsZWQgZnJvbSB0aGUgY2hlY2tvdXQgZm9ybSBwcmlvciB0byB0aGUgcGFnZSBiZWluZyByZW5kZXJlZC4KCSAqCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpjaGVja291dEluaXQoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hlY2tvdXRJbml0KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFjY2VwdEpTSW5pdChhcnJheSgiYWNjZXB0SlMiLCJtZW1iZXJtb3VzZS1jaGVja291dC1mb3JtIikpOwoJfQoJCgkKCS8qKgoJICogTG9hZCBBY2NlcHQuanMgb24gbXkgYWNjb3VudCBwYWdlIHRvIHN1cHBvcnQgdGhlIGNhcmQgdXBkYXRlIG9wZXJhdGlvbgoJICoKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6Om15QWNjb3VudEluaXQoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gbXlBY2NvdW50SW5pdCgpCgl7CgkJLy9jdXJyZW50bHkgdGhlIG15IGFjY291bnQgaW5pdCBwcm9jZXNzIGZvciBhY2NlcHQuanMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyB0aGUgY2hlY2tvdXQgaW5pdCBwcm9jZXNzCgkJcmV0dXJuICR0aGlzLT5hY2NlcHRKU0luaXQoYXJyYXkoImFjY2VwdEpTIiwibWVtYmVybW91c2UtbXlhY2NvdW50LWpzIikpOwoJfQoJCgkKCS8qKgoJICogSWYgQWNjZXB0LmpzIGlzIGJlaW5nIHVzZWQsIHRoZSBqYXZhc2NyaXB0IGxpYnJhcnkgaXMgZW5xdWV1ZWQsIGFzIHdlbGwgYXMgYSBjdXN0b20gYnJpZGdlCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkYnJpZGdlRGVwZW5kZW5jaWVzIFRoZSBkZXBlbmRlbmNpZXMgdG8gcGFzcyB0byB3cF9lbnF1ZXVlX3NjcmlwdCB3aGVuIGxvYWRpbmcgdGhlIHRva2VuLWV4Y2hhbmdlIGJyaWRnZSBqcwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gYWNjZXB0SlNJbml0KCRicmlkZ2VEZXBlbmRlbmNpZXM9YXJyYXkoKSkKCXsKCQkvL1RoZSBmcm9udC1lbmQgdGFza3MgYXJlIG9ubHkgcmVsZXZlbnQgaWYgQWNjZXB0LmpzIGlzIGVuYWJsZWQKCQlpZiAoJHRoaXMtPmFjY2VwdEpTRW5hYmxlZCkKCQl7CgkJCS8vYWRkIGEgY2xvc3VyZSBhdHRhY2hlZCB0byB0aGUgJ3NjcmlwdF9sb2FkZXJfdGFnJyBmaWx0ZXIgdG8gYWRkIHRoZSByZXF1aXJlZCBjaGFyc2V0IGF0dHJpYnV0ZSB0byB0aGUgc2NyaXB0IGxvYWQgdGFnCgkJCS8vdGhpcyBpcyBhIGhhY2tpc2ggd2F5IHRvIGdldCBhcm91bmQgd3BfZW5xdWV1ZV9zY3JpcHRzIG5vdCBzdXBwb3J0aW5nIGF0dHJpYnV0ZXMgZm9yIHRoZSBnZW5lcmF0ZWQgc2NyaXB0IHRhZwoJCQlhZGRfZmlsdGVyKCdzY3JpcHRfbG9hZGVyX3RhZycsIGZ1bmN0aW9uKCR0YWcsICRoYW5kbGUsICRzcmMpIHsKCQkJCWlmICggJGhhbmRsZSA9PT0gJ2FjY2VwdEpTJykKCQkJCXsKCQkJCQkkdGFnID0gIjxzY3JpcHQgdHlwZT0ndGV4dC9qYXZhc2NyaXB0JyBzcmM9J3skc3JjfScgY2hhcnNldD0ndXRmOCc+PC9zY3JpcHQ+IjsKCQkJCX0KCQkJCXJldHVybiAkdGFnOwoJCQl9LCAxMCwgMyApOwoJCQkJCQoJCQkJLy93aGVuIGVucXVldWluZyBhY2NlcHQuanMsIHRoZSAkdmVyIHBhcmFtZXRlciBmb3Igd3BfZW5xdWV1ZV9zY3JpcHQgTVVTVCBiZSBudWxsLCBvdGhlcndpc2Ugd3AgYXR0YWNoZXMgaXRzIHZlcnNpb24gdG8gdGhlIHNjcmlwdC4KCQkJCS8vb25lIG9mIHRoZSBpbnRlcm5hbCBjaGVja3Mgb2YgdGhlIGxpYnJhcnkgdG8gZGV0ZXJtaW5lIGlmIGl0IGlzIGJlaW5nIGxvYWRlZCBmcm9tIENETiBpcyBhIHVybCBsZW5ndGggY2hlY2ssIGFuZCBhbiBhdHRhY2hlZCB2ZXJzaW9uCgkJCQkvL2NoYW5nZXMgdGhlIGxlbmd0aCBvZiB0aGUgdXJsLCBjYXVzaW5nIHRoYXQgY2hlY2sgdG8gaW5jb3JyZWN0bHkgZmFpbAoJCQkJaWYgKCR0aGlzLT50ZXN0TW9kZSkKCQkJCXsKCQkJCQl3cF9lbnF1ZXVlX3NjcmlwdCgiYWNjZXB0SlMiLCAiaHR0cHM6Ly9qc3Rlc3QuYXV0aG9yaXplLm5ldC92MS9BY2NlcHQuanMiLCBhcnJheSgpLG51bGwsIHRydWUpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXdwX2VucXVldWVfc2NyaXB0KCJhY2NlcHRKUyIsICJodHRwczovL2pzLmF1dGhvcml6ZS5uZXQvdjEvQWNjZXB0LmpzIiwgYXJyYXkoKSwgbnVsbCwgdHJ1ZSk7CgkJCQl9CgkJCQl3cF9lbnF1ZXVlX3NjcmlwdCgibWVtYmVybW91c2UtYWNjZXB0SlMiLCBwbHVnaW5zX3VybChNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9qcy9jb21tb24vbW0tYXV0aG9yaXplbmV0LXRva2VuLWV4Y2hhbmdlLmpzIiksICRicmlkZ2VEZXBlbmRlbmNpZXMsIE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCksIHRydWUpOwoJCQkJd3BfbG9jYWxpemVfc2NyaXB0KCdtZW1iZXJtb3VzZS1hY2NlcHRKUycsICdhdXRob3JpemVuZXRKU0luZm8nLCBhcnJheSgnYXV0aG5ldFB1YmxpY0NsaWVudEtleScgPT4gJHRoaXMtPmluVGVzdE1vZGUoKT8kdGhpcy0+Z2V0VGVzdFB1YmxpY0NsaWVudEtleSgpOiR0aGlzLT5nZXRMaXZlUHVibGljQ2xpZW50S2V5KCksCgkJCQkJCSdhcGlMb2dpbklEJyA9PiAkdGhpcy0+aW5UZXN0TW9kZSgpPyR0aGlzLT5nZXRUZXN0QVBJTG9naW4oKTokdGhpcy0+Z2V0TGl2ZUFQSUxvZ2luKCksCgkJCQkJCSdpbXByb3BlckF1dGhuZXRDSU1SZXNwb25zZUVycm9yTXNnJyA9PiBfbW10KCJBbiBpbXByb3BlciByZXNwb25zZSB3YXMgcmVjZWl2ZWQgZnJvbSBBdXRob3JpemUubmV0LCBwbGVhc2UgdHJ5IGFnYWluIikpKTsKCQl9Cgl9CQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0VGVzdFB1YmxpY0NsaWVudEtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT50ZXN0UHVibGljQ2xpZW50S2V5OwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0VGVzdFB1YmxpY0NsaWVudEtleSgkdGVzdFB1YmxpY0NsaWVudEtleSkKCXsKCQkkdGhpcy0+dGVzdFB1YmxpY0NsaWVudEtleSA9ICR0ZXN0UHVibGljQ2xpZW50S2V5OwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGl2ZVB1YmxpY0NsaWVudEtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5saXZlUHVibGljQ2xpZW50S2V5OwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0TGl2ZVB1YmxpY0NsaWVudEtleSgkbGl2ZVB1YmxpY0NsaWVudEtleSkKCXsKCQkkdGhpcy0+bGl2ZVB1YmxpY0NsaWVudEtleSA9ICRsaXZlUHVibGljQ2xpZW50S2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpc0FjY2VwdEpTUmVhZHkoKQoJewoJICAgICRzaXRlVXJsID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbigic2l0ZXVybCIpOwoJICAgICR1cmxDb21wb25lbnRzID0gcGFyc2VfdXJsKHN0cnRvbG93ZXIoJHNpdGVVcmwpKTsKCSAgICBpZiAoaXNzZXQoJHVybENvbXBvbmVudHNbInNjaGVtZSJdKSAmJiAoJHVybENvbXBvbmVudHNbInNjaGVtZSJdID09ICJodHRwcyIpCgkgICAgICAgICYmIGlzc2V0KCR1cmxDb21wb25lbnRzWyJob3N0Il0pICYmICgkdXJsQ29tcG9uZW50c1siaG9zdCJdICE9ICJsb2NhbGhvc3QiKSkKCSAgICB7CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH0KCSAgICBlbHNlCgkgICAgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoJfQoJCgkKfQ==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(70, 'dayscalculationtypes', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0RheXNDYWxjdWxhdGlvblR5cGVzCnsKCXB1YmxpYyBzdGF0aWMgJEZJWEVEID0gJ2ZpeGVkJzsKCXB1YmxpYyBzdGF0aWMgJENVU1RPTV9EQVRFID0gJ2N1c3RvbV9kYXRlJzsKCXB1YmxpYyBzdGF0aWMgJEpPSU5fREFURSA9ICdqb2luX2RhdGUnOwp9', 0, '2018-11-21 06:38:53'),
(71, 'decisiontagprocessor_v2', 'Y2xhc3MgTU1fRGVjaXNpb25UYWdQcm9jZXNzb3JfVjIgZXh0ZW5kcyBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcgp7CQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBtbV9tZW1iZXJfZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkdXNlciA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudFVzZXIoKTsKCQkkY3VzdG9tRmllbGRzID0gYXJyYXkoKTsKCQkkZGF5c1dpdGhCdW5kbGVzID0gYXJyYXkoKTsKCQkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpPjApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGsgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCQoJCQkJaWYoc3RycG9zKCRrLCAiY3VzdG9tZmllbGRfIikgIT09IGZhbHNlKQoJCQkJewoJCQkJCSRmaWVsZElkID0gcHJlZ19yZXBsYWNlKCIvW14wLTldKy8iLCAiIiwgJGspOwoJCQkJCSRjdXN0b21GaWVsZHNbJGZpZWxkSWRdID0gc3RyaXBzbGFzaGVzKCR2KTsKCQkJCX0KCQkJCWVsc2UgaWYoc3RycG9zKCRrLCAiZGF5c3dpdGhidW5kbGVfIikgIT09IGZhbHNlKQoJCQkJewoJCQkJCSRidW5kbGVJZCA9IHByZWdfcmVwbGFjZSgiL1teMC05XSsvIiwgIiIsICRrKTsKCQkJCQkkZGF5c1dpdGhCdW5kbGVzWyRidW5kbGVJZF0gPSAkdjsKCQkJCX0KCQkJCWVsc2UKCQkJCXsgCgkJCQkJJGtleSA9ICRrOwoJCQkJCSQka2V5PSR2OwoJCQkJfQoJCQl9CgkJfQoJCQoJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJewkKCQkJJHN0YXR1c0NoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkJJG1lbWJlcnNoaXBDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCSRidW5kbGVDaGVjayA9IHNlbGY6OiRJR05PUkU7CgkJCSRwcm9kdWN0Q2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkY3VzdG9tRmllbGRDaGVja3MgPSBhcnJheSgpOwoJCQkkZGF5c0FzTWVtYmVyID0gMDsKCQkJJGRheXNBc01lbWJlckNvbXBhcmlzb24gPSAiPiI7CgoJCQlpZigkdXNlci0+aXNBZG1pbigpIHx8IE1NX0VtcGxveWVlOjppc0VtcGxveWVlKCR1c2VyLT5nZXRJZCgpKSkKCQkJewoJCQkJJHByZXZpZXdfb2JqID0gTU1fUHJldmlldzo6Z2V0RGF0YSgpOwoJCQkJJGNybnRNZW1iZXJzaGlwSWQgPSAkcHJldmlld19vYmotPmdldE1lbWJlcnNoaXBJZCgpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJGNybnRNZW1iZXJzaGlwSWQgPSAkdXNlci0+Z2V0TWVtYmVyc2hpcElkKCk7CgkJCX0KCQkJCgkJCS8vIGdldCBudW1iZXIgb2YgZGF5cyBhcyBtZW1iZXIKCQkJaWYoaXNzZXQoJGRheXNhc21lbWJlcikpCgkJCXsKCQkJCWlmKGludHZhbCgkZGF5c2FzbWVtYmVyKSA8IDApCgkJCQl7CgkJCQkJJGRheXNBc01lbWJlckNvbXBhcmlzb24gPSAiPCI7CgkJCQl9CgkJCQkKCQkJCSRkYXlzQXNNZW1iZXIgPSBhYnMoJGRheXNhc21lbWJlcik7CgkJCX0KCQkJCgkJCS8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCBtZW1iZXIgaGFzIHRoZSBhcHByb3ByaWF0ZSBzdGF0dXMKCQkJaWYoaXNzZXQoJHN0YXR1cykpCgkJCXsKCQkJCSRjb21wYXJlID0gYXJyYXkoKTsKCQkJCSRjb21wYXJlW10gPSBNTV9TdGF0dXM6OmdldFNtYXJ0VGFnVmFsdWUoJHVzZXItPmdldFN0YXR1cygpKTsKCQkJCSRzdGF0dXNDaGVjayA9IHNlbGY6OmRvQ29tcGFyaXNvbigkc3RhdHVzLCAkY29tcGFyZSk7CgkJCX0KCQkJCgkJCS8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCBtZW1iZXIgaGFzIHRoZSBhcHByb3ByaWF0ZSBtZW1iZXJzaGlwIGxldmVsCgkJCWlmKGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCQl7CgkJCQkkY29tcGFyZSA9IGFycmF5KCk7CgkJCQkkY29tcGFyZVtdID0gJGNybnRNZW1iZXJzaGlwSWQ7CgkJCQkkbWVtYmVyc2hpcENoZWNrID0gc2VsZjo6ZG9Db21wYXJpc29uKCRtZW1iZXJzaGlwaWQsICRjb21wYXJlKTsKCQkJfQoJCQkJCgkJCS8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCBtZW1iZXIgaGFzIHRoZSBhcHByb3ByaWF0ZSBidW5kbGUKCQkJaWYoaXNzZXQoJGhhc2J1bmRsZSkpCgkJCXsKCQkJCSRjb21wYXJlID0gYXJyYXkoKTsKCQkJCQoJCQkJLy8gZ2V0IGRhdGEgZnJvbSBwcmV2aWV3IGJhcgoJCQkJaWYoJHVzZXItPmlzQWRtaW4oKSB8fCBNTV9FbXBsb3llZTo6aXNFbXBsb3llZSgkdXNlci0+Z2V0SWQoKSkpCgkJCQl7CgkJCQkJJGNvbXBhcmUgPSBNTV9QcmV2aWV3OjpnZXREYXRhKCktPmdldEJ1bmRsZXMoKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJLy8gZ2V0IGJ1bmRsZXMgZGlyZWN0bHkgYXBwbGllZCB0byB0aGUgbWVtYmVyJ3MgYWNjb3VudAoJCQkJCSRhcHBsaWVkQnVuZGxlcyA9ICR1c2VyLT5nZXRBcHBsaWVkQnVuZGxlcygpOwoJCQkJCQoJCQkJCWZvcmVhY2goJGFwcGxpZWRCdW5kbGVzIGFzICRhcHBsaWVkQnVuZGxlKQoJCQkJCXsKCQkJCQkJJGNvbXBhcmVbXSA9ICRhcHBsaWVkQnVuZGxlLT5nZXRCdW5kbGVJZCgpOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJLy8gZ2V0IGJ1bmRsZSBhcHBsaWVkIHRvIHRoZSBtZW1iZXIncyBhY2NvdW50IHZpYSB0aGVpciBtZW1iZXJzaGlwIGxldmVsCgkJCQkkbWVtYmVyc2hpcCA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJGNybnRNZW1iZXJzaGlwSWQpOwoJCQkJJG1lbWJlcnNoaXBCdW5kbGVzID0gJG1lbWJlcnNoaXAtPmdldEJ1bmRsZXMoKTsKCQkJCQkKCQkJCWZvcmVhY2goJG1lbWJlcnNoaXBCdW5kbGVzIGFzICRpZD0+JG5hbWUpCgkJCQl7CgkJCQkJJGNvbXBhcmVbXSA9ICRpZDsKCQkJCX0KCgkJCQkkYnVuZGxlQ2hlY2sgPSBzZWxmOjpkb0NvbXBhcmlzb24oJGhhc2J1bmRsZSwgJGNvbXBhcmUpOwoJCQl9CgkJCQoJCQkvLyBjaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgbWVtYmVyIGhhcyBwdXJjaGFzZWQgcHJvZHVjdHMKCQkJaWYoaXNzZXQoJHB1cmNoYXNlZHByb2R1Y3QpKQoJCQl7CgkJCQkkY29tcGFyZSA9IGFycmF5KCk7CgkJCQoJCQkJaWYoISR1c2VyLT5pc0FkbWluKCkpCgkJCQl7CgkJCQkJJHByb2R1Y3RzUHVyY2hhc2VkID0gJHVzZXItPmdldFByb2R1Y3RzUHVyY2hhc2VkKGFycmF5KE1NX09yZGVySXRlbTo6JFNUQVRVU19HQVRFV0FZX1BBWU1FTlRfTUlTTUFUQ0gpKTsKCQkJCQkJCgkJCQkJZm9yZWFjaCgkcHJvZHVjdHNQdXJjaGFzZWQgYXMgJHByb2R1Y3RJZCkKCQkJCQl7CgkJCQkJCSRjb21wYXJlW10gPSAkcHJvZHVjdElkOwoJCQkJCX0KCQkJCX0KCQkJCgkJCQkkcHJvZHVjdENoZWNrID0gc2VsZjo6ZG9Db21wYXJpc29uKCRwdXJjaGFzZWRwcm9kdWN0LCAkY29tcGFyZSk7CgkJCX0KCQkKCQkJLy8gY2hlY2sgdG8gc2VlIGlmIGN1cnJlbnQgbWVtYmVyIGhhcyB0aGUgYXBwcm9wcmlhdGUgbWVtYmVyc2hpcCBsZXZlbCAoZnJlZSBvciBwYWlkKQoJCQlpZihpc3NldCgkaXNmcmVlKSkKCQkJewoJCQkJJGlzRnJlZUNoZWNrID0gc2VsZjo6JEZBSUw7CgkJCQkJCgkJCQkkbWVtYmVyc2hpcExldmVsID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkY3JudE1lbWJlcnNoaXBJZCk7CgkJCQkJCQoJCQkJaWYoJG1lbWJlcnNoaXBMZXZlbC0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRpc0ZyZWVNZW1iZXIgPSAkbWVtYmVyc2hpcExldmVsLT5pc0ZyZWUoKTsKCQkKCQkJCQlpZigoc3RydG9sb3dlcigkaXNmcmVlKSA9PSAidHJ1ZSIgJiYgJGlzRnJlZU1lbWJlciA9PSB0cnVlKSB8fCAoc3RydG9sb3dlcigkaXNmcmVlKSA9PSAiZmFsc2UiICYmICRpc0ZyZWVNZW1iZXIgPT0gZmFsc2UpKQoJCQkJCXsKCQkJCQkJJGlzRnJlZUNoZWNrID0gc2VsZjo6JFBBU1M7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRpc0ZyZWVDaGVjayA9IHNlbGY6OiRGQUlMOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCX0KCQkJfQoJCQkKCQkJLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IG1lbWJlciBoYXMgdGhlIGFwcHJvcHJpYXRlIGN1c3RvbSBmaWVsZHMKCQkJaWYoY291bnQoJGN1c3RvbUZpZWxkcykgPiAwKQoJCQl7CgkJCQlmb3JlYWNoKCRjdXN0b21GaWVsZHMgYXMgJGZpZWxkSWQ9PiR2YWx1ZSkKCQkJCXsKCQkJCQlpZihpc3NldCgkdmFsdWUpKQoJCQkJCXsKCQkJCQkJJGRhdGEgPSAkdXNlci0+Z2V0Q3VzdG9tRGF0YUJ5RmllbGRJZCgkZmllbGRJZCk7CgkJCQkJCQoJCQkJCQkkY29tcGFyZSA9IGFycmF5KCk7CgkJCQkJCSRjb21wYXJlW10gPSBzdHJ0b2xvd2VyKHN0cmlwc2xhc2hlcygkZGF0YS0+Z2V0VmFsdWUoKSkpOwoJCQkJCQkkY3VzdG9tRmllbGRDaGVja3NbXSA9IHNlbGY6OmRvQ29tcGFyaXNvbihzdHJ0b2xvd2VyKCR2YWx1ZSksICRjb21wYXJlKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJHN0YXR1c0NoZWNrID0gJG1lbWJlcnNoaXBDaGVjayA9ICRidW5kbGVDaGVjayA9ICRwcm9kdWN0Q2hlY2sgPSAkaXNGcmVlQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkY3VzdG9tRmllbGRDaGVja3MgPSBhcnJheSgpOwoJCQkkZGF5c0FzTWVtYmVyID0gMDsKCQl9CgkJCgkJLy8gY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHZpc2l0b3IgaXMgYSBtZW1iZXIKCQlpZihpc3NldCgkaXNtZW1iZXIpKQoJCXsgCgkJCSRpc01lbWJlckNoZWNrID0gc2VsZjo6JEZBSUw7CgoJCQlpZigkdXNlci0+aXNBZG1pbigpIHx8IE1NX0VtcGxveWVlOjppc0VtcGxveWVlKCR1c2VyLT5nZXRJZCgpKSkKCQkJewoJCQkJJHByZXZpZXdEYXRhID0gTU1fUHJldmlldzo6Z2V0RGF0YSgpOwoJCQkJaWYoKCRpc21lbWJlciA9PSAidHJ1ZSIgJiYgJHVzZXItPmlzVmFsaWQoKSkgfHwgKCRpc21lbWJlciA9PSAiZmFsc2UiICYmICRwcmV2aWV3RGF0YS0+Z2V0TWVtYmVyc2hpcElkKCk9PSJub25lIikpCgkJCQl7CgkJCQkJJGlzTWVtYmVyQ2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkaXNNZW1iZXJDaGVjayA9IHNlbGY6OiRGQUlMOwoJCQkJfSAKCQkJCQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJaWYoKCRpc21lbWJlciA9PSAidHJ1ZSIgJiYgJHVzZXItPmlzVmFsaWQoKSkgfHwgKCRpc21lbWJlciA9PSAiZmFsc2UiICYmICEkdXNlci0+aXNWYWxpZCgpKSkKCQkJCXsKCQkJCQkkaXNNZW1iZXJDaGVjayA9IHNlbGY6OiRQQVNTOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRpc01lbWJlckNoZWNrID0gc2VsZjo6JEZBSUw7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJGlzTWVtYmVyQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCX0KCQkKCQkvLyByZW5kZXIgY29udGVudCBpZiBldmVyeXRoaW5nIGNoZWNrcyBvdXQKCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJaWYoc2VsZjo6cGFzcygkc3RhdHVzQ2hlY2spICYmIHNlbGY6OnBhc3MoJG1lbWJlcnNoaXBDaGVjaykgJiYgc2VsZjo6cGFzcygkYnVuZGxlQ2hlY2spICYmIHNlbGY6OnBhc3MoJHByb2R1Y3RDaGVjaykKCQkJCSYmIHNlbGY6OnBhc3MoJGlzRnJlZUNoZWNrKSAmJiBzZWxmOjpwYXNzKCRpc01lbWJlckNoZWNrKSAmJiBzZWxmOjpjaGVja0N1c3RvbUZpZWxkcygkY3VzdG9tRmllbGRDaGVja3MpKQoJCQl7CgkJCQkkZGF5c0FzTWVtYmVyQ2hlY2sgPSBzZWxmOjpjaGVja0RheXNXaXRoQWNjZXNzKCR1c2VyLCBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCwgJGNybnRNZW1iZXJzaGlwSWQsICRkYXlzQXNNZW1iZXIsICRkYXlzQXNNZW1iZXJDb21wYXJpc29uKSA/IHNlbGY6OiRQQVNTIDogc2VsZjo6JEZBSUw7CgkJCQkkZGF5c1dpdGhCdW5kbGVzQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkJCgkJCQkvLyBjaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgbWVtYmVyIGhhcyB0aGUgYXBwcm9wcmlhdGUgZGF5cyB3aXRoIGJ1bmRsZXMKCQkJCWlmKGNvdW50KCRkYXlzV2l0aEJ1bmRsZXMpID4gMCkKCQkJCXsKCQkJCQkkZGF5c1dpdGhCdW5kbGVzQ2hlY2sgPSBzZWxmOjokUEFTUzsKCQkJCQkKCQkJCQlmb3JlYWNoKCRkYXlzV2l0aEJ1bmRsZXMgYXMgJGJ1bmRsZUlkPT4kdmFsdWUpCgkJCQkJewoJCQkJCQlpZihpc3NldCgkdmFsdWUpKQoJCQkJCQl7CgkJCQkJCQkkZGF5c1dpdGhCdW5kbGUgPSAkdmFsdWU7CgkJCQkJCQkkZGF5c1dpdGhCdW5kbGVDb21wYXJpc29uID0gIj4iOwoJCQkJCQkJCgkJCQkJCQlpZihpbnR2YWwoJGRheXNXaXRoQnVuZGxlKSA8IDApCgkJCQkJCQl7CgkJCQkJCQkJJGRheXNXaXRoQnVuZGxlQ29tcGFyaXNvbiA9ICI8IjsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJJGRheXNXaXRoQnVuZGxlID0gYWJzKCRkYXlzV2l0aEJ1bmRsZSk7CgkJCQkJCQkKCQkJCQkJCWlmKCFzZWxmOjpjaGVja0RheXNXaXRoQWNjZXNzKCR1c2VyLCBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjokQUNDRVNTX1RZUEVfQlVORExFLCAkYnVuZGxlSWQsICRkYXlzV2l0aEJ1bmRsZSwgJGRheXNXaXRoQnVuZGxlQ29tcGFyaXNvbikpCgkJCQkJCQl7CgkJCQkJCQkJJGRheXNXaXRoQnVuZGxlc0NoZWNrID0gc2VsZjo6JEZBSUw7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWlmKHNlbGY6OnBhc3MoJGRheXNBc01lbWJlckNoZWNrKSAmJiBzZWxmOjpwYXNzKCRkYXlzV2l0aEJ1bmRsZXNDaGVjaykpCgkJCQl7CgkJCQkJcmV0dXJuIGRvX3Nob3J0Y29kZSgkY29udGVudCk7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZSBpZihzZWxmOjpwYXNzKCRpc01lbWJlckNoZWNrLCB0cnVlKSkKCQl7CgkJCXJldHVybiBkb19zaG9ydGNvZGUoJGNvbnRlbnQpOwoJCX0KCX0KCQoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gY2hlY2tDdXN0b21GaWVsZHMoJGN1c3RvbUZpZWxkQ2hlY2tzKQoJewoJCWlmKCFpc19hcnJheSgkY3VzdG9tRmllbGRDaGVja3MpIHx8IGNvdW50KCRjdXN0b21GaWVsZENoZWNrcykgPT0gMCkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlpZihpc19hcnJheSgkY3VzdG9tRmllbGRDaGVja3MpICYmIGNvdW50KCRjdXN0b21GaWVsZENoZWNrcykgPiAwICYmICFpbl9hcnJheShzZWxmOjokRkFJTCwgJGN1c3RvbUZpZWxkQ2hlY2tzKSkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX09yZGVyX0RlY2lzaW9uIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGRldGVybWluaW5nCgkgKiB3aGV0aGVyIG9yIG5vdCB0aGUgY29udGVudCBzaG91bGQgYmUgZGlzcGxheWVkIGJhc2VkIG9uIHRoZSBwYXJhbWV0ZXJzIHBhc3NlZC4gSXQgY2FuIGJlCgkgKiB1c2VkIGluIHRoZSBjb250ZXh0IG9mIGEgY2hlY2tvdXQgZm9ybSBvciBhIGNvbmZpcm1hdGlvbiBwYWdlCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX29yZGVyX2RlY2lzaW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJJG91dHB1dFN0ciA9ICIiOwoJCgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQkkZm9ybSA9IE1NX09iamVjdENhY2hlOjpnZXQoTU1fT2JqZWN0Q2FjaGU6OiRLRVlfTEFTVF9GT1JNKTsKCQkkb3JkZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRPcmRlcigpOwoJCSRwcm9kdWN0SWQgPSAwOwoJCSRtZW1iZXJzaGlwSWQgPSAwOwoJCSRpc1NoaXBwYWJsZSA9IGZhbHNlOwoJCSRpc0ZyZWUgPSBmYWxzZTsKCQkkaXNHaWZ0ID0gZmFsc2U7CgkJJGlzRGlzY291bnRlZCA9IGZhbHNlOwoJCSRkYXRhU2V0ID0gZmFsc2U7CgkJCgkJaWYoaXNzZXQoJGZvcm0pICYmICFlbXB0eSgkZm9ybSkpCgkJewoJCQkvLyBnZXQgZGF0YSBmcm9tIENoZWNrb3V0IEZvcm0KCQkJJGRhdGFTZXQgPSB0cnVlOwoJCQkkcHJvZHVjdElkID0gJGZvcm0tPnByb2R1Y3RJZDsKCQkJJG1lbWJlcnNoaXBJZCA9ICRmb3JtLT5tZW1iZXJzaGlwTGV2ZWxJZDsKCQkJJGlzRnJlZSA9ICRmb3JtLT5pc0ZyZWU7CgkJCSRpc0dpZnQgPSAkZm9ybS0+aXNHaWZ0OwoJCQkkaXNTaGlwcGFibGUgPSAkZm9ybS0+aXNTaGlwcGFibGU7CgkJCSRpc0Rpc2NvdW50ZWQgPSB0cnVlOyAvLyBhbHdheXMgc2V0IGlzRGlzY291bnRlZCB0byB0cnVlIGZvciBjaGVja291dCBmb3JtcyBiZWNhdXNlIAoJCQkJCQkJCSAgLy8gamF2YXNjcmlwdCB3aWxsIGJlIHVzZWQgdG8gc2hvdy9oaWRlIHRoZSBkaXNjb3VudCBzZWN0aW9uCgkJfQoJCWVsc2UgaWYoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJewoJCQkvLyBnZXQgZGF0YSBmcm9tIG9yZGVyCgkJCSRwcm9kdWN0cyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJaWYoY291bnQoJHByb2R1Y3RzKSA+IDApCgkJCXsKCQkJCSRvcmRlckl0ZW0gPSBhcnJheV9wb3AoJHByb2R1Y3RzKTsgLy8gY3VycmVudGx5IGFzc3VtaW5nIHN1cHBvcnRpbmcgMSBwcm9kdWN0IHBlciBvcmRlcgoJCQkJaWYoJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRwcm9kdWN0SWQgPSAkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKTsKCQkJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRwcm9kdWN0SWQpOwoJCQkJCQoJCQkJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkkZGF0YVNldCA9IHRydWU7CgkJCQkJCSRpc0ZyZWUgPSBmYWxzZTsKCQkJCQkJJGlzR2lmdCA9ICRvcmRlckl0ZW0tPmlzR2lmdCgpOwoJCQkJCQkkaXNTaGlwcGFibGUgPSAkcHJvZHVjdC0+aXNTaGlwcGFibGUoKTsKCQkJCQkJJGFzc29jTWVtYmVyc2hpcCA9ICRwcm9kdWN0LT5nZXRBc3NvY2lhdGVkTWVtYmVyc2hpcCgpOwoJCQkJCQkKCQkJCQkJaWYoJGFzc29jTWVtYmVyc2hpcC0+aXNWYWxpZCgpKQoJCQkJCQl7CgkJCQkJCQkkbWVtYmVyc2hpcElkID0gJGFzc29jTWVtYmVyc2hpcC0+Z2V0SWQoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJJGRpc2NvdW50ID0gYWJzKCRvcmRlci0+Z2V0RGlzY291bnQoKSk7CgkJCQoJCQlpZigkZGlzY291bnQgPiAwKQoJCQl7CgkJCQkkaXNEaXNjb3VudGVkID0gdHJ1ZTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJLy8gaWYgdGhlIGZvcm0gb3Igb3JkZXIgaXMgbm90IHNldCB0aGVuIHRoYXQgbWVhbnMgaXQgd2FzIGEgZnJlZSBtZW1iZXIgc2lnbiB1cAoJCQkvLyBjb25maXJtIHRoYXQgdGhpcyBpcyBhIGNvbmZpcm1hdGlvbiBwYWdlIGFuZCB0aGVuIHBvcHVsYXRlIHRoZSBkYXRhIGZyb20gdGhlIAoJCQkvLyB1c2VyIGluIHRoZSBzZXNzaW9uCgkJCWdsb2JhbCAkcG9zdDsKCQkJCgkJCWlmKGlzc2V0KCRwb3N0LT5JRCkgJiYgaW50dmFsKCRwb3N0LT5JRCk+MCkKCQkJewoJCQkJJHBvc3RJZCA9ICRwb3N0LT5JRDsKCQkJfQoJCQllbHNlIGlmKGlzc2V0KCRwb3N0LT5kYXRhLT5JRCkgJiYgaW50dmFsKCRwb3N0LT5kYXRhLT5JRCkpCgkJCXsKCQkJCSRwb3N0SWQgPSAkcG9zdC0+ZGF0YS0+SUQ7CgkJCX0KCQkJCgkJCWlmKE1NX0NvcmVQYWdlRW5naW5lOjppc0NvbmZpcm1hdGlvblBhZ2UoJHBvc3RJZCkpCgkJCXsKCQkJCSR1c2VyID0gTU1fU21hcnRUYWdVdGlsOjpnZXRDdXJyZW50VXNlcigpOwoJCQkJCgkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRkYXRhU2V0ID0gdHJ1ZTsKCQkJCQkkaXNGcmVlID0gJHVzZXItPmdldE1lbWJlcnNoaXBMZXZlbCgpLT5pc0ZyZWUoKTsKCQkJCQkkaXNTaGlwcGFibGUgPSBmYWxzZTsKCQkJCQkkcHJvZHVjdElkID0gMDsKCQkJCQkkaXNEaXNjb3VudGVkID0gZmFsc2U7CgkJCQkJJG1lbWJlcnNoaXBJZCA9ICR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQlpZigkZGF0YVNldCkKCQl7CgkJCSRwcm9kdWN0Q2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkbWVtYmVyc2hpcENoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkJJGlzRnJlZUNoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkJJGlzR2lmdENoZWNrID0gc2VsZjo6JElHTk9SRTsKCQkJJGlzU2hpcHBhYmxlQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkkaXNEaXNjb3VudGVkQ2hlY2sgPSBzZWxmOjokSUdOT1JFOwoJCQkKCQkJLy8gY2hlY2sgZm9yIHByb2R1Y3QKCQkJaWYoaXNzZXQoJHByb2R1Y3RpZCkpCgkJCXsKCQkJCSRjb21wYXJlID0gYXJyYXkoKTsKCQkJCSRjb21wYXJlW10gPSAkcHJvZHVjdElkOwoJCQkJJHByb2R1Y3RDaGVjayA9IHNlbGY6OmRvQ29tcGFyaXNvbigkcHJvZHVjdGlkLCAkY29tcGFyZSk7CgkJCX0KCQkJCgkJCS8vIGNoZWNrIGZvciBtZW1iZXJzaGlwCgkJCWlmKGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCQl7CgkJCQkkY29tcGFyZSA9IGFycmF5KCk7CgkJCQkkY29tcGFyZVtdID0gJG1lbWJlcnNoaXBJZDsKCQkJCSRtZW1iZXJzaGlwQ2hlY2sgPSBzZWxmOjpkb0NvbXBhcmlzb24oJG1lbWJlcnNoaXBpZCwgJGNvbXBhcmUpOwoJCQl9CgkJCQoJCSAJLy8gY2hlY2sgaWYgbWVtYmVyc2hpcCBpcyBmcmVlCgkJCWlmKGlzc2V0KCRpc2ZyZWUpKQoJIAkJewoJIAkJIAkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokRkFJTDsKCSAJCQkgCSAKCSAJCQlpZigoc3RydG9sb3dlcigkaXNmcmVlKSA9PSAidHJ1ZSIgJiYgJGlzRnJlZSA9PSB0cnVlKSAKCSAJCQkJCXx8IChzdHJ0b2xvd2VyKCRpc2ZyZWUpID09ICJmYWxzZSIgJiYgJGlzRnJlZSA9PSBmYWxzZSkpCgkgCQkJewoJIAkJCQkkaXNGcmVlQ2hlY2sgPSBzZWxmOjokUEFTUzsKCSAJCQl9CgkgCQkJZWxzZQoJIAkJCXsKCSAJCQkJJGlzRnJlZUNoZWNrID0gc2VsZjo6JEZBSUw7CgkgCQkJfQoJCSAJfQoJCQkKCQkgCS8vIGNoZWNrIGlmIHByb2R1Y3QgaXMgZ2lmdAoJCQlpZihpc3NldCgkaXNnaWZ0KSkKCSAJCXsKCSAJCSAJJGlzR2lmdENoZWNrID0gc2VsZjo6JEZBSUw7CgkgCQkJIAkgCgkgCQkJaWYoKHN0cnRvbG93ZXIoJGlzZ2lmdCkgPT0gInRydWUiICYmICRpc0dpZnQgPT0gdHJ1ZSkgCgkgCQkJCQl8fCAoc3RydG9sb3dlcigkaXNnaWZ0KSA9PSAiZmFsc2UiICYmICRpc0dpZnQgPT0gZmFsc2UpKQoJIAkJCXsKCSAJCQkJJGlzR2lmdENoZWNrID0gc2VsZjo6JFBBU1M7CgkgCQkJfQoJIAkJCWVsc2UKCSAJCQl7CgkgCQkJCSRpc0dpZnRDaGVjayA9IHNlbGY6OiRGQUlMOwoJIAkJCX0KCQkgCX0KCQkJCgkJIAkvLyBjaGVjayBpZiBwcm9kdWN0IGlzIHNoaXBwYWJsZQoJCQlpZihpc3NldCgkaXNzaGlwcGFibGUpKQoJIAkJewoJIAkJIAkkaXNTaGlwcGFibGVDaGVjayA9IHNlbGY6OiRGQUlMOwoJIAkJCSAJIAoJIAkJCWlmKChzdHJ0b2xvd2VyKCRpc3NoaXBwYWJsZSkgPT0gInRydWUiICYmICRpc1NoaXBwYWJsZSA9PSB0cnVlKSAKCSAJCQkJCXx8IChzdHJ0b2xvd2VyKCRpc3NoaXBwYWJsZSkgPT0gImZhbHNlIiAmJiAkaXNTaGlwcGFibGUgPT0gZmFsc2UpKQoJIAkJCXsKCSAJCQkJJGlzU2hpcHBhYmxlQ2hlY2sgPSBzZWxmOjokUEFTUzsKCSAJCQl9CgkgCQkJZWxzZQoJIAkJCXsKCSAJCQkJJGlzU2hpcHBhYmxlQ2hlY2sgPSBzZWxmOjokRkFJTDsKCSAJCQl9CgkJIAl9CgkJIAkKCQkgCS8vIGNoZWNrIGlmIG9yZGVyIGlzIGRpc2NvdW50ZWQKCQkgCWlmKGlzc2V0KCRpc2Rpc2NvdW50ZWQpKQoJCSAJewoJCSAJCSRpc0Rpc2NvdW50ZWRDaGVjayA9IHNlbGY6OiRGQUlMOwoJCSAJCgkJIAkJaWYoKHN0cnRvbG93ZXIoJGlzZGlzY291bnRlZCkgPT0gInRydWUiICYmICRpc0Rpc2NvdW50ZWQgPT0gdHJ1ZSkKCQkgCQl8fCAoc3RydG9sb3dlcigkaXNkaXNjb3VudGVkKSA9PSAiZmFsc2UiICYmICRpc0Rpc2NvdW50ZWQgPT0gZmFsc2UpKQoJCSAJCXsKCQkgCQkJJGlzRGlzY291bnRlZENoZWNrID0gc2VsZjo6JFBBU1M7CgkJIAkJfQoJCSAJCWVsc2UKCQkgCQl7CgkJIAkJCSRpc0Rpc2NvdW50ZWRDaGVjayA9IHNlbGY6OiRGQUlMOwoJCSAJCX0KCQkgCX0KCQkgCQoJCSAJaWYoKHNlbGY6OnBhc3MoJHByb2R1Y3RDaGVjaykgJiYgc2VsZjo6cGFzcygkbWVtYmVyc2hpcENoZWNrKQoJCSAJCQkmJiBzZWxmOjpwYXNzKCRpc0ZyZWVDaGVjaykgJiYgc2VsZjo6cGFzcygkaXNTaGlwcGFibGVDaGVjaykKCQkgCQkJJiYgc2VsZjo6cGFzcygkaXNEaXNjb3VudGVkQ2hlY2spICYmIHNlbGY6OnBhc3MoJGlzR2lmdENoZWNrKSkgfHwKCQkgCSAJKGlzc2V0KCRpc2Rpc2NvdW50ZWQpICYmIGlzc2V0KCRmb3JtKSAmJiAhZW1wdHkoJGZvcm0pICYmICFzZWxmOjpwYXNzKCRpc0Rpc2NvdW50ZWRDaGVjaykpKQoJCSAJewoJCSAJCSRvdXRwdXQgPSBkb19zaG9ydGNvZGUoJGNvbnRlbnQpOwoJCSAJCQoJCSAJCS8vIGlmIHdlJ3JlIG9uIGEgY2hlY2tvdXQgZm9ybSBhbmQgcHJvY2Vzc2luZyBhbiBpc0Rpc2NvdW50IG9yZGVyIGRlY2lzaW9uLCAKCQkgCQkvLyBzdXJyb3VuZCB0aGUgY29udGVudCB3aXRoIGEgPGRpdj4gc28gdGhhdCBpdCBjYW4gYmUgY29udHJvbGxlZCBieSBqYXZhc2NyaXB0CgkJIAkJaWYoaXNzZXQoJGlzZGlzY291bnRlZCkgJiYgaXNzZXQoJGZvcm0pICYmICFlbXB0eSgkZm9ybSkpCgkJIAkJewoJCSAJCQkkY3JudERpc2NvdW50QmxvY2tOdW0gPSBjb3VudCgkZm9ybS0+ZGlzY291bnRCbG9ja3MpOwoJCSAJCQkkZGlzY291bnRCbG9ja0lkID0gIm1tLWRpc2NvdW50LWluZm8tYmxvY2stIi4kY3JudERpc2NvdW50QmxvY2tOdW07CgkJIAkJCSRmb3JtLT5kaXNjb3VudEJsb2Nrc1skY3JudERpc2NvdW50QmxvY2tOdW1dID0gJGRpc2NvdW50QmxvY2tJZDsKCQkgCQkJJG91dHB1dCA9ICI8ZGl2IGlkPVwieyRkaXNjb3VudEJsb2NrSWR9XCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCIgY2xhc3M9XCJtbS1kaXNjb3VudC17JGlzZGlzY291bnRlZH1cIj57JG91dHB1dH08L2Rpdj4iOwoJCSAJCX0KCQkgCQkKCQkgCQlyZXR1cm4gJG91dHB1dDsKCQkgCX0KCQkgCWVsc2UKCQkgCXsKCQkgCQlyZXR1cm4gIiI7CgkJIAl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0FmZmlsaWF0ZV9EZWNpc2lvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBkZXRlcm1pbmluZwoJICogd2hldGhlciBvciBub3QgdGhlIGNvbnRlbnQgc2hvdWxkIGJlIGRpc3BsYXllZCBiYXNlZCBvbiB0aGUgcGFyYW1ldGVycyBwYXNzZWQgYW5kIHRoZSBjdXJyZW50IAoJICogYWZmaWxpYXRlL3N1YmFmZmlsaWF0ZSB2YWx1ZXMgc3RvcmVkIGluIGNvb2tpZXMKCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbW1fYWZmaWxpYXRlX2RlY2lzaW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJaWYoc2VsZjo6Y2hlY2tDb29raWVzKCRhdHRzKSkKCQl7CgkJCXJldHVybiBkb19zaG9ydGNvZGUoJGNvbnRlbnQpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIiI7CgkJfQoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9DdXN0b21fRGVjaXNpb24gdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgZGV0ZXJtaW5pbmcKCSAqIHdoZXRoZXIgb3Igbm90IHRoZSBjb250ZW50IHNob3VsZCBiZSBkaXNwbGF5ZWQgYmFzZWQgb24gdGhlIHBhcmFtZXRlcnMgcGFzc2VkIGFuZCB0aGUgY3VycmVudCAKCSAqIHZhbHVlcyBzdG9yZWQgaW4gY29va2llcwoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBtbV9jdXN0b21fZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlpZihzZWxmOjpjaGVja0Nvb2tpZXMoJGF0dHMpKQoJCXsKCQkJcmV0dXJuIGRvX3Nob3J0Y29kZSgkY29udGVudCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiIjsKCQl9Cgl9CiAJCiAJcHJvdGVjdGVkIHN0YXRpYyBmdW5jdGlvbiBjaGVja0Nvb2tpZXMoJGF0dHMpCiAJewogCQkkdGVzdFJlc3VsdHMgPSBhcnJheSgpOwogCQkkY2hlY2tDdHIgPSAwOwogCQkJCiAJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQogCQl7CQogCQkJZm9yZWFjaCgkYXR0cyBhcyAka2V5PT4kY2hlY2tWYWx1ZXMpCiAJCQl7CiAJCQkJJHRlc3RSZXN1bHRzWyRjaGVja0N0cl0gPSAkY29va2llc0NoZWNrID0gc2VsZjo6JEZBSUw7CiAJCQkJCiAJCQkJLy8gZ2V0IHZhbHVlIHNldCBpbiBjb29raWVzIGZvciB0aGUgY3VycmVudCBrZXkKIAkJCQlpZihzdHJ0b2xvd2VyKCRrZXkpID09ICJhZmZpbGlhdGUiKQogCQkJCXsKIAkJCQkJJGNvb2tpZVZhbHVlID0gTU1fQ29va2llczo6Z2V0QWZmaWxpYXRlVmFsdWUoKTsKIAkJCQl9CiAJCQkJZWxzZSBpZihzdHJ0b2xvd2VyKCRrZXkpID09ICJzdWJhZmZpbGlhdGUiKQogCQkJCXsKIAkJCQkJJGNvb2tpZVZhbHVlID0gTU1fQ29va2llczo6Z2V0U3ViQWZmaWxpYXRlVmFsdWUoKTsKIAkJCQl9CiAJCQkJZWxzZQogCQkJCXsKIAkJCQkJJGNvb2tpZVZhbHVlID0gTU1fQ29va2llczo6Z2V0Q29va2llKCRrZXkpOwogCQkJCX0KCQkJCQogCQkJCSRjb21wYXJlID0gYXJyYXkoKTsKIAkJCQkkY29tcGFyZVtdID0gJGNvb2tpZVZhbHVlOwogCQkJCSR0ZXN0UmVzdWx0c1skY2hlY2tDdHJdID0gc2VsZjo6ZG9Db21wYXJpc29uKCRjaGVja1ZhbHVlcywgJGNvbXBhcmUpOwogCQkJCQogCQkJCSRjaGVja0N0cisrOwogCQkJfQogCQl9CiAJCQogCQkkdGVzdFBhc3NlZCA9IHRydWU7CiAJCWZvcigkaSA9IDA7ICRpIDwgY291bnQoJHRlc3RSZXN1bHRzKTsgJGkrKykKIAkJewogCQkJJHRlc3RQYXNzZWQgPSAkdGVzdFBhc3NlZCAmJiBzZWxmOjpwYXNzKCR0ZXN0UmVzdWx0c1skaV0pOwogCQl9CiAJCQogCQlyZXR1cm4gJHRlc3RQYXNzZWQ7CiAJfQogCQogCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGRvQ29tcGFyaXNvbigkZXhwcmVzc2lvbiwgJGNvbXBhcmVWYWx1ZXMpCiAJewogCQkkZXFGb3JtYXQgPSAiaW5fYXJyYXkoJyIuc2VsZjo6JFBMQUNFSE9MREVSX1ZBTFVFLiInLCBcJGNvbXBhcmVWYWx1ZXMpIjsKIAkJJG5FcUZvcm1hdCA9ICIhaW5fYXJyYXkoJyIuc2VsZjo6JFBMQUNFSE9MREVSX1ZBTFVFLiInLCBcJGNvbXBhcmVWYWx1ZXMpIjsKIAkJJGV4cHJlc3Npb24gPSBzZWxmOjpwYXJzZUV4cHJlc3Npb24oJGV4cHJlc3Npb24sICRlcUZvcm1hdCwgJG5FcUZvcm1hdCk7CiAJCSRyZXN1bHQgPSBmYWxzZTsKIAkJCiAJCWlmKCFlbXB0eSgkZXhwcmVzc2lvbikpCiAJCXsgIAogCQkJLy8vIDwgcGhwNywgeW91IG11c3QgY2hlY2sgZm9yIGEgcmV0dXJuIGJvb2xlYW4gdmFsdWUgb2YgZmFsc2UKIAkJCS8vLyBhY2NvcmRpbmcgdG8gZG9jcyBpbmRpY2F0ZXMgYW4gZXhjZXB0aW9uIHdhcyB0aHJvd24gaW4gdGhlIGV2YWwgc3RhdGVtZW50LgogCQkJLy8vIEAgaXMgdXNlZCB0byBzdXByZXNzIHRoZSBvdXRwdXQuCgkgCQlpZiAodmVyc2lvbl9jb21wYXJlKHBocHZlcnNpb24oKSwgJzcuMCcsICc8JykpIAoJIAkJeyAKCSAJCQlpZihAZXZhbCgiXCRyZXN1bHQgPSB7JGV4cHJlc3Npb259OyIpPT09ZmFsc2UpCgkgCQkJeyAKCSAJCQkgICAgTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkVycm9yIHJlbmRlcmluZyBzbWFydCB0YWcgZXhwcmVzc2lvbjsgY29kZSB3YXM6Ii5hZGRzbGFzaGVzKCRleHByZXNzaW9uKSk7CgkgCQkJCXJldHVybiBzZWxmOjokRkFJTDsKCSAJCQl9CgkJCX0KIAkJCS8vLyBhcyBvZiBQSFA3IGV2YWwgdGhyb3dzIFBhcnNlRXJyb3IgZXhjZXB0aW9uCgkJCWVsc2UKCQkJewoJIAkJCXRyeQoJIAkJCXsgCgkJIAkJCWV2YWwoIlwkcmVzdWx0ID0geyRleHByZXNzaW9ufTsiKTsgCgkgCQkJfQoJIAkJCWNhdGNoKFBhcnNlRXJyb3IgJGV4KQoJIAkJCXsKCSAJCQkgICAgTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkVycm9yIHJlbmRlcmluZyBzbWFydCB0YWcgZXhwcmVzc2lvbjsgY29kZSB3YXM6Ii5hZGRzbGFzaGVzKCRleHByZXNzaW9uKSk7CgkJIAkJCXJldHVybiBzZWxmOjokRkFJTDsKCSAJCQl9CgkJCX0gCiAJCX0KIAkJCiAJCWlmKCRyZXN1bHQpCiAJCXsKIAkJCXJldHVybiBzZWxmOjokUEFTUzsKIAkJfQogCQllbHNlCiAJCXsKIAkJCXJldHVybiBzZWxmOjokRkFJTDsKIAkJfQogCX0KCQoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKCRyYXdFeHByZXNzaW9uLCAkZXFGb3JtYXQsICRuRXFGb3JtYXQpCgl7CgkJJHJhd0V4cHJlc3Npb24gPSBzdHJfc3BsaXQoaHRtbF9lbnRpdHlfZGVjb2RlKCRyYXdFeHByZXNzaW9uLEVOVF9DT01QQVQgfCBFTlRfSFRNTDQwMSwgIlVURi04IikpOwoJCSRzcGVjaWFsQ2hhcmFjdGVycyA9IGFycmF5KCIoIiwgIikiLCAiJiIsICJ8Iik7CgkJJGJ1ZmZlciA9ICIiOwoJCSRleHByZXNzaW9uID0gIiI7CgkJCgkJZm9yZWFjaCgkcmF3RXhwcmVzc2lvbiBhcyAkY2hhcmFjdGVyKQoJCXsKCQkJLy8gaWYgdGhpcyBpcyBhIHNwZWNpYWwgY2hhcmFjdGVyLCBhZGQgaXQgdG8gdGhlIGV4cHJlc3Npb24KCQkJLy8gb3RoZXJ3aXNlIGFkZCBpdCB0byB0aGUgYnVmZmVyCgkJCWlmKGluX2FycmF5KCRjaGFyYWN0ZXIsICRzcGVjaWFsQ2hhcmFjdGVycykpIAoJCQl7CgkJCQkvLyBpZiBidWZmZXIgY29udGFpbnMgaXRlbXMsIGNyZWF0ZSB0aGUgZXF1YXRpb24gYW5kIAoJCQkJLy8gYWRkIGl0IHRvIHRoZSBleHByZXNzaW9uCgkJCQlpZighZW1wdHkoJGJ1ZmZlcikpCgkJCQl7CgkJCQkJaWYodHJpbSgkYnVmZmVyKSA9PSAiISIpCgkJCQkJewoJCQkJCQkkZXhwcmVzc2lvbiAuPSAkYnVmZmVyOwoJCQkJCX0KCQkJCQllbHNlIAoJCQkJCXsKCQkJCQkJJGZvcm1hdCA9IChzZWxmOjpkb05lZ2F0ZVZhbHVlKCRidWZmZXIpKSA/ICRuRXFGb3JtYXQgOiAkZXFGb3JtYXQ7CgkJCQkJCSRidWZmZXIgPSAoc2VsZjo6ZG9OZWdhdGVWYWx1ZSgkYnVmZmVyKSkgPyBzdWJzdHIoJGJ1ZmZlciwgMSkgOiAkYnVmZmVyOwoJCQkJCQkkZXhwcmVzc2lvbiAuPSBzdHJfcmVwbGFjZShzZWxmOjokUExBQ0VIT0xERVJfVkFMVUUsIHRyaW0oJGJ1ZmZlciksICRmb3JtYXQpOwoJCQkJCX0KCQkJCQkKCQkJCQkkYnVmZmVyID0gIiI7CgkJCQl9CgkJCQkKCQkJCSRleHByZXNzaW9uIC49ICRjaGFyYWN0ZXI7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJGJ1ZmZlciAuPSAkY2hhcmFjdGVyOwoJCQl9CgkJfQoJCQoJCWlmKCFlbXB0eSgkYnVmZmVyKSkKCQl7CgkJCWlmKHRyaW0oJGJ1ZmZlcikgPT0gIiEiKQoJCQl7CgkJCQkkZXhwcmVzc2lvbiAuPSAkYnVmZmVyOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRmb3JtYXQgPSAoc2VsZjo6ZG9OZWdhdGVWYWx1ZSgkYnVmZmVyKSkgPyAkbkVxRm9ybWF0IDogJGVxRm9ybWF0OwoJCQkJJGJ1ZmZlciA9IChzZWxmOjpkb05lZ2F0ZVZhbHVlKCRidWZmZXIpKSA/IHN1YnN0cigkYnVmZmVyLCAxKSA6ICRidWZmZXI7CgkJCQkkZXhwcmVzc2lvbiAuPSBzdHJfcmVwbGFjZShzZWxmOjokUExBQ0VIT0xERVJfVkFMVUUsIHRyaW0oJGJ1ZmZlciksICRmb3JtYXQpOwoJCQl9CgkJfQoJCQoJCSRleHByZXNzaW9uID0gc3RyX3JlcGxhY2UoIiYiLCAiJiYiLCAkZXhwcmVzc2lvbik7CgkJJGV4cHJlc3Npb24gPSBzdHJfcmVwbGFjZSgifCIsICJ8fCIsICRleHByZXNzaW9uKTsKCQkKCQlyZXR1cm4gJGV4cHJlc3Npb247Cgl9CiAJCiAJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZG9OZWdhdGVWYWx1ZSgkdmFsdWUpCiAJewogCQlpZihzdHJwb3MoJHZhbHVlLCAiISIpID09PSAwKQogCQl7CiAJCQlyZXR1cm4gdHJ1ZTsKIAkJfQogCQllbHNlCiAJCXsKIAkJCXJldHVybiBmYWxzZTsKIAkJfQogCX0KfQo=', 0, '2018-11-21 06:38:53'),
(72, 'reportpiechart', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUmVwb3J0UGllQ2hhcnQgZXh0ZW5kcyBNTV9SZXBvcnRWaXN1YWxFbGVtZW50CnsKCQoJcHJvdGVjdGVkICRjYXRlZ29yeUZpZWxkID0gImNhdGVnb3J5IjsKCQoJcHJvdGVjdGVkICR2YWx1ZUZpZWxkID0gInZhbHVlIjsKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRKYXZhc2NyaXB0RGVwZW5kZW5jaWVzKCkKCXsKCQlyZXR1cm4gYXJyYXkoTU1fUExVR0lOX1VSTC4iL3Jlc291cmNlcy9qcy9hbWNoYXJ0cy9hbWNoYXJ0cy9hbWNoYXJ0cy5qcyIsCgkJCQkJIE1NX1BMVUdJTl9VUkwuIi9yZXNvdXJjZXMvanMvYW1jaGFydHMvYW1jaGFydHMvcGllLmpzIik7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlcihNTV9SZXBvcnRDYXRlZ29yeVZhbHVlTW9kZWwgJG1vZGVsID0gbnVsbCkKCXsKCQkKCQlpZiAoIWlzX251bGwoJG1vZGVsKSkKCQl7CgkJCSR0aGlzLT5zZXRNb2RlbCgkbW9kZWwpOwoJCX0KCQkKCQkkb3V0cHV0ID0gIiI7CgkJaWYgKCFlbXB0eSgkdGhpcy0+Y29udGFpbmVyKSAmJiAoJHRoaXMtPm1vZGVsIGluc3RhbmNlb2YgTU1fUmVwb3J0Q2F0ZWdvcnlWYWx1ZU1vZGVsKSkKCQl7CgkJCSRqc29uRGF0YSA9IGpzb25fZW5jb2RlKCR0aGlzLT5tb2RlbC0+Z2V0VmFsdWVzKCkpOwoJCQkvKgoJCQkkb3V0cHV0IC49ICI8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+XG4iOwoJCQkkb3V0cHV0IC49ICJqUXVlcnkoZnVuY3Rpb24oKSB7XG4iOwoJCQkkb3V0cHV0IC49ICJ2YXIgeyR0aGlzLT5jb250YWluZXJ9X2RhdGEgPSB7JGpzb25EYXRhfTtcbiI7CgkJCSRvdXRwdXQgLj0gInZhciB7JHRoaXMtPmNvbnRhaW5lcn1fY2hhcnQgPSBuZXcgQW1DaGFydHMuQW1QaWVDaGFydCgpO1xuIjsKCQkJJG91dHB1dCAuPSAieyR0aGlzLT5jb250YWluZXJ9X2NoYXJ0LnRpdGxlRmllbGQgPSAneyR0aGlzLT5jYXRlZ29yeUZpZWxkfSc7XG4iOwoJCQkkb3V0cHV0IC49ICJ7JHRoaXMtPmNvbnRhaW5lcn1fY2hhcnQudmFsdWVGaWVsZCA9ICd7JHRoaXMtPnZhbHVlRmllbGR9JztcbiI7CgkJCSRvdXRwdXQgLj0gInskdGhpcy0+Y29udGFpbmVyfV9jaGFydC5kYXRhUHJvdmlkZXIgPSB7JHRoaXMtPmNvbnRhaW5lcn1fZGF0YTtcbiI7CgkJCSRvdXRwdXQgLj0gInskdGhpcy0+Y29udGFpbmVyfV9jaGFydC5vdXRsaW5lQ29sb3IgPSAnI0ZGRkZGRic7XG4iOwoJCQkkb3V0cHV0IC49ICJ7JHRoaXMtPmNvbnRhaW5lcn1fY2hhcnQub3V0bGluZUFscGhhID0gMC44O1xuIjsKCQkJJG91dHB1dCAuPSAieyR0aGlzLT5jb250YWluZXJ9X2NoYXJ0Lm91dGxpbmVUaGlja25lc3MgPSAyO1xuIjsKCQkJJG91dHB1dCAuPSAieyR0aGlzLT5jb250YWluZXJ9X2NoYXJ0LmRlcHRoM0QgPSAxNTtcbiI7CgkJCSRvdXRwdXQgLj0gInskdGhpcy0+Y29udGFpbmVyfV9jaGFydC5hbmdsZSA9IDMwO1xuIjsKCQkJJG91dHB1dCAuPSAieyR0aGlzLT5jb250YWluZXJ9X2NoYXJ0LndyaXRlKCd7JHRoaXMtPmNvbnRhaW5lcn0nKTtcbiI7CgkJCSRvdXRwdXQgLj0gIn0pOyI7CgkJCSRvdXRwdXQgLj0gIjwvc2NyaXB0PlxuIjsKCQkJKi8KCQkJJG91dHB1dCAuPSAiPHNjcmlwdCB0eXBlPSd0ZXh0L2phdmFzY3JpcHQnPlxuIjsKCQkJJG91dHB1dCAuPSAialF1ZXJ5KGZ1bmN0aW9uKCkge1xuIjsKCQkJJG91dHB1dCAuPSAidmFyIHskdGhpcy0+Y29udGFpbmVyfV9jaGFydCA9IEFtQ2hhcnRzLm1ha2VDaGFydCgneyR0aGlzLT5jb250YWluZXJ9Jywge1xuIjsKCQkJJG91dHB1dCAuPSAiJ3R5cGUnOiAncGllJyxcbiI7CgkJCSRvdXRwdXQgLj0gIidwYXRoVG9JbWFnZXMnOiAnIi5NTV9QTFVHSU5fVVJMLiIvcmVzb3VyY2VzL2pzL2FtY2hhcnRzL2FtY2hhcnRzL2ltYWdlcy8nLFxuIjsKCQkJJG91dHB1dCAuPSAiJ2FuZ2xlJzogMTIsXG4iOwoJCQkvLyRvdXRwdXQgLj0gIidiYWxsb29uVGV4dCc6ICdbW3RpdGxlXV08YnI+PHNwYW4gc3R5bGU9J2ZvbnQtc2l6ZToxNHB4Jz48Yj5bW3ZhbHVlXV08L2I+IChbW3BlcmNlbnRzXV0lKTwvc3Bhbj4nLFxuIjsKCQkJJG91dHB1dCAuPSAiJ2RlcHRoM0QnOiAxNSxcbiI7CgkJCSRvdXRwdXQgLj0gIid0aXRsZUZpZWxkJzogJ3skdGhpcy0+Y2F0ZWdvcnlGaWVsZH0nLFxuIjsKCQkJJG91dHB1dCAuPSAiJ3ZhbHVlRmllbGQnOiAneyR0aGlzLT52YWx1ZUZpZWxkfScsXG4iOwoJCQkkb3V0cHV0IC49ICInYWxsTGFiZWxzJzogW10sXG4iOwoJCQkkb3V0cHV0IC49ICInYmFsbG9vbic6IHt9LFxuIjsKCQkJJG91dHB1dCAuPSAiJ2xlZ2VuZCc6IHtcbiI7CgkJCSRvdXRwdXQgLj0gIidhbGlnbic6ICdjZW50ZXInLFxuIjsKCQkJJG91dHB1dCAuPSAiJ21hcmtlclR5cGUnOiAnY2lyY2xlJ1xuIjsKCQkJJG91dHB1dCAuPSAifSxcbiI7CgkJCSRvdXRwdXQgLj0gIid0aXRsZXMnOiBbXSxcbiI7CgkJCSRvdXRwdXQgLj0gIidkYXRhUHJvdmlkZXInOiB7JGpzb25EYXRhfVxuIjsKCQkJJG91dHB1dCAuPSAifSk7XG4iOwoJCQkkb3V0cHV0IC49ICJ9KTtcbiI7CgkJCSRvdXRwdXQgLj0gIjwvc2NyaXB0PlxuIjsKCQl9CgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVGcm9tVG9wUmVzdWx0cygkZWxlbWVudElkZW50aWZpZXIsICRjYXRlZ29yeUZpZWxkLCAkdmFsdWVGaWVsZCwgJG51bVJlY29yZHMsIE1NX1JlcG9ydFJlc3BvbnNlICRyZXN1bHRPYmplY3QsICRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJaWYgKCFNTV9SZXBvcnRSZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHRPYmplY3QpKQoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCSRwaWUgPSBuZXcgTU1fUmVwb3J0UGllQ2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyLCRkaXJlY3RpdmVzKTsKCQoJCS8vY3JlYXRlIGFuZCBjb25maWd1cmUgdGhlIGRhdGEgbW9kZWwKCQkkbW9kZWwgPSBNTV9SZXBvcnRDYXRlZ29yeVZhbHVlTW9kZWw6OmNyZWF0ZUZyb21Ub3BSZXN1bHRzKCRyZXN1bHRPYmplY3QtPm1lc3NhZ2UsICRjYXRlZ29yeUZpZWxkLCAkdmFsdWVGaWVsZCwgJG51bVJlY29yZHMpOwoJCSRwaWUtPnNldE1vZGVsKCRtb2RlbCk7CgkJcmV0dXJuICRwaWU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldENhdGVnb3J5RmllbGQoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmNhdGVnb3J5RmllbGQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldENhdGVnb3J5RmllbGQoJGNhdGVnb3J5RmllbGQpIAoJewoJCSR0aGlzLT5jYXRlZ29yeUZpZWxkID0gJGNhdGVnb3J5RmllbGQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFZhbHVlRmllbGQoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPnZhbHVlRmllbGQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFZhbHVlRmllbGQoJHZhbHVlRmllbGQpIAoJewoJCSR0aGlzLT52YWx1ZUZpZWxkID0gJHZhbHVlRmllbGQ7Cgl9CgkKCQp9Cg==', 0, '2018-11-21 06:38:53'),
(73, 'export_members', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KCnJlcXVpcmVfb25jZSgiLi4vLi4vLi4vLi4vLi4vLi4vLi4vd3AtY29uZmlnLnBocCIpOwoKZ2xvYmFsICRjdXJyZW50X3VzZXI7CgokdXNlckhvb2tzID0gbmV3IE1NX1VzZXJIb29rcygpOwppZiAoJHVzZXJIb29rcy0+Y2hlY2tFbXBsb3llZUFjY2VzcygpID09PSBmYWxzZSkKewoJJHVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokRVJST1IsIE1NX0Vycm9yOjokQUNDRVNTX0RFTklFRCk7Cgl3cF9yZWRpcmVjdCgkdXJsKTsKCWV4aXQ7Cn0KCiRleHBvcnRfdHlwZSA9IChpc3NldCgkX0dFVFsnZXhwb3J0X3R5cGUnXSkpID8gJF9HRVRbJ2V4cG9ydF90eXBlJ10gOiAic3RhbmRhcmQiOwokaW5jbHVkZUJ1bmRsZUluZm8gPSBmYWxzZTsKCmlmICgkZXhwb3J0X3R5cGUgPT0gJ3N0YW5kYXJkJyB8fCAkZXhwb3J0X3R5cGUgPT0gJ2NhbmNlbGVkX2J1bmRsZXMnKQp7CglpZiAoKCFpc3NldCgkX0dFVFsnbWVtYmVyc2hpcF9pZCddKSB8fCAhaXNfbnVtZXJpYygkX0dFVFsnbWVtYmVyc2hpcF9pZCddKSkgJiYgKCFpc3NldCgkX0dFVFsnYnVuZGxlX2lkJ10pIHx8ICFpc19udW1lcmljKCRfR0VUWydidW5kbGVfaWQnXSkpKQoJewoJCWV4aXQ7IC8vbXVzdCBoYXZlIG1lbWJlcnNoaXAgSUQgb3IgYnVuZGxlIElECgl9CgkKCWlmKGlzc2V0KCRfR0VUWydtZW1iZXJzaGlwX2lkJ10pKQoJewoJCSRpbmNsdWRlQnVuZGxlSW5mbyA9IHRydWU7CgkJJG1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCk7CgkJJG1lbWJlcnNoaXAtPnNldElkKCRfR0VUWydtZW1iZXJzaGlwX2lkJ10pOwoJCSRtZW1iZXJzaGlwLT5nZXREYXRhKCk7CgkJCgkJaWYgKCEkbWVtYmVyc2hpcC0+aXNWYWxpZCgpKQoJCXsKCQkJZXhpdDsKCQl9CgkJJGZpbGVuYW1lID0gcHJlZ19yZXBsYWNlKCIvKFteQS16YS16MC05XHNdKS8iLCIiLHN0cnRvbG93ZXIoJG1lbWJlcnNoaXAtPmdldE5hbWUoKSkpOwoJCSRmaWxlbmFtZSA9IHByZWdfcmVwbGFjZSgiL1xzLyIsIl8iLCRmaWxlbmFtZSkuIl9leHBvcnQuY3N2IjsKCX0KCWVsc2UgaWYoaXNzZXQoJF9HRVRbJ2J1bmRsZV9pZCddKSkKCXsKCQkkaW5jbHVkZUJ1bmRsZUluZm8gPSBmYWxzZTsKCQkkYnVuZGxlID0gbmV3IE1NX0J1bmRsZSgkX0dFVFsnYnVuZGxlX2lkJ10pOwoJCQoJCWlmICghJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCXsKCQkJZXhpdDsKCQl9CgkJJGZpbGVuYW1lID0gcHJlZ19yZXBsYWNlKCIvKFteQS16YS16MC05XHNdKS8iLCIiLHN0cnRvbG93ZXIoJGJ1bmRsZS0+Z2V0TmFtZSgpKSk7CgkJCgkJJHByZWZpeCA9ICIiOwoJCWlmICgkZXhwb3J0X3R5cGUgPT0gJ2NhbmNlbGVkX2J1bmRsZXMnKQoJCXsKCQkJJHByZWZpeCA9ICJjYW5jZWxlZF8iOwoJCX0KCQkKCQkkZmlsZW5hbWUgPSAkcHJlZml4LnByZWdfcmVwbGFjZSgiL1xzLyIsIl8iLCRmaWxlbmFtZSkuIl9leHBvcnQuY3N2IjsKCX0KCWVsc2UKCXsKCQlleGl0OwoJfQp9CmVsc2UgaWYgKCRleHBvcnRfdHlwZSA9PSAnY2FuY2VsbGF0aW9uJykKewoJJGluY2x1ZGVCdW5kbGVJbmZvID0gdHJ1ZTsKCSRmaWxlbmFtZSA9ICJjYW5jZWxsZWRfbWVtYmVyc19leHBvcnQuY3N2IjsKfQplbHNlIAp7CgkkaW5jbHVkZUJ1bmRsZUluZm8gPSB0cnVlOwoJJGZpbGVuYW1lID0gIm1lbWJlcl9leHBvcnQuY3N2IjsKfQoKaGVhZGVyKCJDb250ZW50LXR5cGU6IHRleHQvY3N2Iik7CmhlYWRlcigiQ29udGVudC1EaXNwb3NpdGlvbjogYXR0YWNobWVudDsgZmlsZW5hbWU9XCIkZmlsZW5hbWVcIiIpOwoKJG91dHN0cmVhbSA9IGZvcGVuKCJwaHA6Ly9vdXRwdXQiLCd3Jyk7CgokdXNlcl9maWVsZHMgPSBhcnJheSgidXNlcl9lbWFpbCI9PiJFbWFpbCIsICJmaXJzdF9uYW1lIj0+IkZpcnN0IE5hbWUiLCAibGFzdF9uYW1lIj0+Ikxhc3QgTmFtZSIpOwokYnVuZGxlcyA9IGFycmF5KCk7CgppZigkaW5jbHVkZUJ1bmRsZUluZm8pCnsKCSRzcWwgPSAic2VsZWN0IGlkLCBzaG9ydF9uYW1lIGZyb20gIi5NTV9UQUJMRV9CVU5ETEVTOwoJJGJ1bmRsZV9yZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwsIEFSUkFZX0EpOwoJCglmb3JlYWNoICgkYnVuZGxlX3Jlc3VsdHMgYXMgJHJvd251bT0+JGFjY2Vzc190YWcpCgl7CgkJJGJ1bmRsZXNbJGFjY2Vzc190YWdbJ3Nob3J0X25hbWUnXV0gPSAkYWNjZXNzX3RhZ1snc2hvcnRfbmFtZSddOwoJfQp9CgovL291dHB1dCBoZWFkZXIgcm93CiRoZWFkZXJfcm93ID0gYXJyYXlfbWVyZ2UoJHVzZXJfZmllbGRzLCAkYnVuZGxlcyk7CmZwdXRjc3YoJG91dHN0cmVhbSwgJGhlYWRlcl9yb3csICcsJywgJyInKTsKCmlmKGlzc2V0KCRfR0VUWyJtZW1iZXJzaGlwX2lkIl0pIHx8ICRleHBvcnRfdHlwZSA9PSAiY2FuY2VsbGF0aW9uIikKewoJJHNxbCA9ICJTRUxFQ1QgdS5pZCwgdS51c2VyX2VtYWlsLCBtbXUuc3RhdHVzLCBtbXUuZmlyc3RfbmFtZSwgbW11Lmxhc3RfbmFtZSAiOwoJJHNxbCAuPSAiRlJPTSAiLiR3cGRiLT51c2Vycy4iIHUsICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgbW11IFdIRVJFIChtbXUud3BfdXNlcl9pZCA9IHUuSUQpICI7CgkKCWlmICgkZXhwb3J0X3R5cGUgPT0gJ2NhbmNlbGxhdGlvbicpCgl7CgkJJHNxbCAuPSAiIEFORCAoKG1tdS5zdGF0dXMgPSAlZCkgT1IgKG1tdS5zdGF0dXMgPSAlZCkpIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkd3BkYi0+cHJlcGFyZSgkc3FsLCBNTV9TdGF0dXM6OiRQQVVTRUQsIE1NX1N0YXR1czo6JENBTkNFTEVEKSwgQVJSQVlfQSk7Cgl9CgllbHNlIAoJewoJCSRzcWwgLj0gIiBBTkQgKG1tdS5tZW1iZXJzaGlwX2xldmVsX2lkID0gJWQpIEFORCAoKG1tdS5zdGF0dXMgPSAlZCkgT1IgKG1tdS5zdGF0dXMgPSAlZCkgT1IgKG1tdS5zdGF0dXMgPSAlZCkgT1IgKG1tdS5zdGF0dXMgPSAlZCkpIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkd3BkYi0+cHJlcGFyZSgkc3FsLCAkbWVtYmVyc2hpcC0+Z2V0SWQoKSwgTU1fU3RhdHVzOjokQUNUSVZFLCBNTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTiwgTU1fU3RhdHVzOjokTE9DS0VELCBNTV9TdGF0dXM6OiRPVkVSRFVFKSwgQVJSQVlfQSk7Cgl9Cn0KZWxzZSBpZihpc3NldCgkX0dFVFsiYnVuZGxlX2lkIl0pKQp7Cgkkc3FsID0gIlNFTEVDVCB1LmlkLCB1LnVzZXJfZW1haWwsIG1tdS5zdGF0dXMsIG1tdS5maXJzdF9uYW1lLCBtbXUubGFzdF9uYW1lICIuCgkiRlJPTSB7JHdwZGItPnVzZXJzfSB1IExFRlQgSk9JTiAiLk1NX1RBQkxFX1VTRVJfREFUQS4iIG1tdSBPTiAobW11LndwX3VzZXJfaWQgPSB1LklEKSAiLgoJIkxFRlQgSk9JTiAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUy4iIGFwYiBPTiAoKGFwYi5hY2Nlc3NfdHlwZT0nIi5NTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfVVNFUi4iJykgQU5EIChhcGIuYWNjZXNzX3R5cGVfaWQgPSB1LklEKSkgIi4KCSJXSEVSRSAoYXBiLmJ1bmRsZV9pZCA9ICVkKSAiOwoJCglpZiAoJGV4cG9ydF90eXBlID09ICdjYW5jZWxlZF9idW5kbGVzJykKCXsKCQkkc3FsIC49ICIgQU5EICgoYXBiLnN0YXR1cyA9ICVkKSBPUiAoYXBiLnN0YXR1cyA9ICVkKSkiOwoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCRzcWwsICRfR0VUWyJidW5kbGVfaWQiXSwgTU1fU3RhdHVzOjokUEFVU0VELCBNTV9TdGF0dXM6OiRDQU5DRUxFRCksIEFSUkFZX0EpOwoJfQoJZWxzZQoJewoJCSRzcWwgLj0gIiBBTkQgKChtbXUuc3RhdHVzID0gJWQpIE9SIChtbXUuc3RhdHVzID0gJWQpIE9SIChtbXUuc3RhdHVzID0gJWQpIE9SIChtbXUuc3RhdHVzID0gJWQpKSI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoJHNxbCwgJF9HRVRbImJ1bmRsZV9pZCJdLCBNTV9TdGF0dXM6OiRBQ1RJVkUsIE1NX1N0YXR1czo6JExPQ0tFRCwgTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04sIE1NX1N0YXR1czo6JE9WRVJEVUUpLCBBUlJBWV9BKTsKCX0KfQplbHNlIAp7CglleGl0Owp9Cgpmb3JlYWNoICgkcmVzdWx0cyBhcyAkcm93bnVtPT4kbWVtYmVyX3JvdykgCnsKCSRjdXJyZW50X3Jvd19vdXRwdXQgPSBhcnJheSgpOwoJZm9yZWFjaCAoJHVzZXJfZmllbGRzIGFzICRmaWVsZF9rZXk9PiR2KQoJewoJCSRjdXJyZW50X3Jvd19vdXRwdXRbXSA9ICRtZW1iZXJfcm93WyRmaWVsZF9rZXldOwoJfQoJJG1lbWJlciA9IE1NX3VzZXI6OmZpbmRCeUVtYWlsKCRtZW1iZXJfcm93Wyd1c2VyX2VtYWlsJ10pOwoJCglpZiAoISRtZW1iZXItPmlzVmFsaWQoKSkKCXsKCQkvLyBzaG91bGRuJ3QgZXZlciBoYXBwZW4KCQljb250aW51ZTsKCX0KCQoJaWYoJGluY2x1ZGVCdW5kbGVJbmZvKQoJewoJCSRhcHBsaWVkQnVuZGxlcyA9ICRtZW1iZXItPmdldEFwcGxpZWRCdW5kbGVzKCk7CgkJJGN1cnJlbnRfbWVtYmVyX2J1bmRsZXMgPSBhcnJheSgpOwoJCWZvcmVhY2ggKCRhcHBsaWVkQnVuZGxlcyBhcyAkYXBwbGllZEJ1bmRsZSkKCQl7CgkJCSRidW5kbGUgPSAkYXBwbGllZEJ1bmRsZS0+Z2V0QnVuZGxlKCk7CgkJCQoJCQlpZigkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRzaG9ydE5hbWUgPSBzdHJ0b3VwcGVyKCRidW5kbGUtPmdldFNob3J0TmFtZSgpKTsKCQkJCSRjdXJyZW50X21lbWJlcl9idW5kbGVzWyRzaG9ydE5hbWVdID0gdHJ1ZTsKCQkJfQoJCX0KCQkKCQlmb3JlYWNoICgkYnVuZGxlcyBhcyAkc2hvcnRfbmFtZSkKCQl7CgkJCSRjdXJyZW50X3Jvd19vdXRwdXRbXSAgPSAoaXNzZXQoJGN1cnJlbnRfbWVtYmVyX2J1bmRsZXNbJHNob3J0X25hbWVdKSAmJiAoJGN1cnJlbnRfbWVtYmVyX2J1bmRsZXNbJHNob3J0X25hbWVdID09PSB0cnVlKSk/IlRSVUUiOiJGQUxTRSI7CgkJfQoJfQoJCglmcHV0Y3N2KCRvdXRzdHJlYW0sICRjdXJyZW50X3Jvd19vdXRwdXQsICcsJywgJyInKTsKfQoKZmNsb3NlKCRvdXRzdHJlYW0pOwo=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(74, 'awebercollection', 'Y2xhc3MgTU1fQVdlYmVyQ29sbGVjdGlvbiBleHRlbmRzIE1NX0FXZWJlclJlc3BvbnNlIGltcGxlbWVudHMgQXJyYXlBY2Nlc3MsIEl0ZXJhdG9yLCBDb3VudGFibGUgewoKICAgIHByb3RlY3RlZCAkcGFnZVNpemUgPSAxMDA7CiAgICBwcm90ZWN0ZWQgJF9lbnRyaWVzID0gYXJyYXkoKTsKCiAgICAvKioKICAgICAqIEB2YXIgYXJyYXkgSG9sZHMgbGlzdCBvZiBrZXlzIHRoYXQgYXJlIG5vdCBwdWJsaWNseSBhY2Nlc3NpYmxlCiAgICAgKi8KICAgIHByb3RlY3RlZCAkX3ByaXZhdGVEYXRhID0gYXJyYXkoCiAgICAgICAgJ2VudHJpZXMnLAogICAgICAgICdzdGFydCcsCiAgICAgICAgJ25leHRfY29sbGVjdGlvbl9saW5rJywKICAgICk7CgogICAgLyoqCiAgICAgKiBnZXRCeUlkCiAgICAgKgogICAgICogR2V0cyBhbiBlbnRyeSBvYmplY3Qgb2YgdGhpcyBjb2xsZWN0aW9uIHR5cGUgd2l0aCB0aGUgZ2l2ZW4gaWQKICAgICAqIEBwYXJhbSBtaXhlZCAkaWQgICAgIElEIG9mIHRoZSBlbnRyeSB5b3UgYXJlIHJlcXVlc3RpbmcKICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIE1NX0FXZWJlckVudHJ5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRCeUlkKCRpZCkgewogICAgICAgICRkYXRhID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICJ7JHRoaXMtPnVybH0veyRpZH0iKTsKICAgICAgICByZXR1cm4gJHRoaXMtPl9tYWtlRW50cnkoJGRhdGEsICRpZCwgInskdGhpcy0+dXJsfS97JGlkfSIpOwogICAgfQoKCiAgICAvKioKICAgICAqIGNyZWF0ZQogICAgICoKICAgICAqIEludm9rZSB0aGUgQVBJIG1ldGhvZCB0byBDUkVBVEUgYSBuZXcgZW50cnkgcmVzb3VyY2UuCiAgICAgKgogICAgICogTm90ZTogTm90IGFsbCBlbnRyeSByZXNvdXJjZXMgYXJlIGVsaWdpYmxlIHRvIGJlIGNyZWF0ZWQsIHBsZWFzZQogICAgICogICAgICAgcmVmZXIgdG8gdGhlIEFXZWJlciBBUEkgUmVmZXJlbmNlIERvY3VtZW50YXRpb24gYXQKICAgICAqICAgICAgIGh0dHBzOi8vbGFicy5hd2ViZXIuY29tL2RvY3MvcmVmZXJlbmNlLzEuMCBmb3IgbW9yZQogICAgICogICAgICAgZGV0YWlscyBvbiB3aGljaCBlbnRyeSByZXNvdXJjZXMgbWF5IGJlIGNyZWF0ZWQgYW5kIHdoYXQKICAgICAqICAgICAgIGF0dHJpYnV0ZXMgYXJlIHJlcXVpcmVkIGZvciBjcmVhdGluZyByZXNvdXJjZXMuCiAgICAgKgogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEBwYXJhbSBwYXJhbXMgbWl4ZWQgIGFzc29jaXRhdGl2ZSBhcnJheSBvZiBrZXkvdmFsdWUgcGFpcnMuCiAgICAgKiBAcmV0dXJuIE1NX0FXZWJlckVudHJ5KFJlc291cmNlKSBUaGUgbmV3IHJlc291cmNlIGNyZWF0ZWQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZSgka3ZfcGFpcnMpIHsKICAgICAgICAjIENyZWF0ZSBSZXNvdXJjZQogICAgICAgICRwYXJhbXMgPSBhcnJheV9tZXJnZShhcnJheSgnd3Mub3AnID0+ICdjcmVhdGUnKSwgJGt2X3BhaXJzKTsKICAgICAgICAkZGF0YSA9ICR0aGlzLT5hZGFwdGVyLT5yZXF1ZXN0KCdQT1NUJywgJHRoaXMtPnVybCwgJHBhcmFtcywgYXJyYXkoJ3JldHVybicgPT4gJ2hlYWRlcnMnKSk7CiAgICAgICAgJHRoaXMtPl9lbnRyaWVzID0gYXJyYXkoKTsKCiAgICAgICAgIyBSZXR1cm4gbmV3IFJlc291cmNlCiAgICAgICAgJHVybCA9ICRkYXRhWydMb2NhdGlvbiddOwogICAgICAgICRyZXNvdXJjZV9kYXRhID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICR1cmwpOwogICAgICAgIHJldHVybiBuZXcgTU1fQVdlYmVyRW50cnkoJHJlc291cmNlX2RhdGEsICR1cmwsICR0aGlzLT5hZGFwdGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIGZpbmQKICAgICAqCiAgICAgKiBJbnZva2UgdGhlIEFQSSAnZmluZCcgb3BlcmF0aW9uIG9uIGEgY29sbGVjdGlvbiB0byByZXR1cm4gYSBzdWJzZXQKICAgICAqIG9mIHRoYXQgY29sbGVjdGlvbi4gIE5vdCBhbGwgY29sbGVjdGlvbnMgc3VwcG9ydCB0aGUgJ2ZpbmQnIG9wZXJhdGlvbi4KICAgICAqIHJlZmVyIHRvIGh0dHBzOi8vbGFicy5hd2ViZXIuY29tL2RvY3MvcmVmZXJlbmNlLzEuMCBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJHNlYXJjaF9kYXRhICAgQXNzb2NpYXRpdmUgYXJyYXkgb2Yga2V5L3ZhbHVlIHBhaXJzIHVzZWQgYXMgc2VhcmNoIGZpbHRlcnMKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHJlZmVyIHRvIGh0dHBzOi8vbGFicy5hd2ViZXIuY29tL2RvY3MvcmVmZXJlbmNlLzEuMCBmb3IgYQogICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGUgbGlzdCBvZiB2YWxpZCBzZWFyY2ggZmlsdGVycy4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIGZpbHRlcmluZyBvbiBhdHRyaWJ1dGVzIHRoYXQgcmVxdWlyZSBhZGRpdGlvbmFsIHBlcm1pc3Npb25zIHRvCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5IHJlcXVpcmVzIGFuIGFwcCBhdXRob3JpemVkIHdpdGggdGhvc2UgYWRkaXRpb25hbCBwZXJtaXNzaW9ucy4KICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIE1NX0FXZWJlckNvbGxlY3Rpb24gCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBmaW5kKCRzZWFyY2hfZGF0YSkgewogICAgICAgICMgaW52b2tlIGZpbmQgb3BlcmF0aW9uCiAgICAgICAgJHBhcmFtcyA9IGFycmF5X21lcmdlKCRzZWFyY2hfZGF0YSwgYXJyYXkoJ3dzLm9wJyA9PiAnZmluZCcpKTsKICAgICAgICAkZGF0YSA9ICR0aGlzLT5hZGFwdGVyLT5yZXF1ZXN0KCdHRVQnLCAkdGhpcy0+dXJsLCAkcGFyYW1zKTsKCiAgICAgICAgIyBnZXQgdG90YWwgc2l6ZQogICAgICAgICR0c19wYXJhbXMgPSBhcnJheV9tZXJnZSgkcGFyYW1zLCBhcnJheSgnd3Muc2hvdycgPT4gJ3RvdGFsX3NpemUnKSk7CiAgICAgICAgJHRvdGFsX3NpemUgPSAkdGhpcy0+YWRhcHRlci0+cmVxdWVzdCgnR0VUJywgJHRoaXMtPnVybCwgJHRzX3BhcmFtcywgYXJyYXkoJ3JldHVybicgPT4gJ2ludGVnZXInKSk7CiAgICAgICAgJGRhdGFbJ3RvdGFsX3NpemUnXSA9ICR0b3RhbF9zaXplOwoKICAgICAgICAjIHJldHVybiBjb2xsZWN0aW9uCiAgICAgICAgcmV0dXJuICR0aGlzLT5yZWFkUmVzcG9uc2UoJGRhdGEsICR0aGlzLT51cmwpOwogICAgfQoKICAgIC8qKiBnZXRQYXJlbnRFbnRyeQogICAgICoKICAgICAqIEdldHMgYW4gZW50cnkncyBwYXJlbnQgZW50cnkKICAgICAqIFJldHVybnMgTlVMTCBpZiBubyBwYXJlbnQgZW50cnkKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFBhcmVudEVudHJ5KCl7CiAgICAgICAgJHVybF9wYXJ0cyA9IGV4cGxvZGUoJy8nLCAkdGhpcy0+dXJsKTsKICAgICAgICAkc2l6ZSA9IGNvdW50KCR1cmxfcGFydHMpOwoKICAgICAgICAjUmVtb3ZlIGNvbGxlY3Rpb24gaWQgYW5kIHNsYXNoIGZyb20gZW5kIG9mIHVybAogICAgICAgICR1cmwgPSBzdWJzdHIoJHRoaXMtPnVybCwgMCwgLXN0cmxlbigkdXJsX3BhcnRzWyRzaXplLTFdKS0xKTsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgJGRhdGEgPSAkdGhpcy0+YWRhcHRlci0+cmVxdWVzdCgnR0VUJywgJHVybCk7CiAgICAgICAgICAgIHJldHVybiBuZXcgTU1fQVdlYmVyRW50cnkoJGRhdGEsICR1cmwsICR0aGlzLT5hZGFwdGVyKTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKICAgICAgICAgICAgcmV0dXJuIE5VTEw7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogX2dldFBhZ2VQYXJhbXMKICAgICAqCiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIEdFVCBwYXJhbXMgdXNlZCB0byBzZXQgdGhlIHBhZ2Ugb2YgYSBjb2xsZWN0aW9uCiAgICAgKiByZXF1ZXN0CiAgICAgKiBAcGFyYW0gaW50ICRzdGFydCAgICBXaGljaCBlbnRyeSBvZmZzZXQgc2hvdWxkIHRoaXMgcGFnZSBzdGFydCBvbj8KICAgICAqIEBwYXJhbSBpbnQgJHNpemUgICAgIEhvdyBtYW55IGVudHJpZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoaXMgcGFnZT8KICAgICAqIEBhY2Nlc3MgcHJvdGVjdGVkCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF9nZXRQYWdlUGFyYW1zKCRzdGFydD0wLCAkc2l6ZT0yMCkgewogICAgICAgIGlmICgkc3RhcnQgPiAwKSB7CiAgICAgICAgICAgICRwYXJhbXMgPSBhcnJheSgKICAgICAgICAgICAgICAgICd3cy5zdGFydCcgPT4gJHN0YXJ0LAogICAgICAgICAgICAgICAgJ3dzLnNpemUnICA9PiAkc2l6ZSwKICAgICAgICAgICAgKTsKICAgICAgICAgICAga3NvcnQoJHBhcmFtcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkcGFyYW1zOwogICAgfQoKICAgIC8qKgogICAgICogX3R5cGUKICAgICAqCiAgICAgKiBJbnRlcnByZXQgd2hhdCB0eXBlIG9mIHJlc291cmNlcyBhcmUgaGVsZCBpbiB0aGlzIGNvbGxlY3Rpb24gYnkgCiAgICAgKiBhbmFseXppbmcgdGhlIFVSTAogICAgICoKICAgICAqIEBhY2Nlc3MgcHJvdGVjdGVkCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF90eXBlKCkgewogICAgICAgICR1cmxQYXJ0cyA9IGV4cGxvZGUoJy8nLCAkdGhpcy0+dXJsKTsKICAgICAgICAkdHlwZSA9IGFycmF5X3BvcCgkdXJsUGFydHMpOwogICAgICAgIHJldHVybiAkdHlwZTsKICAgIH0KCiAgICAvKioKICAgICAqIF9jYWxjdWxhdGVQYWdlU2l6ZQogICAgICoKICAgICAqIENhbGN1bGF0ZXMgdGhlIHBhZ2Ugc2l6ZSBvZiB0aGlzIGNvbGxlY3Rpb24gYmFzZWQgb24gdGhlIGRhdGEgaW4gdGhlIAogICAgICogbmV4dCBhbmQgcHJldiBsaW5rcy4KICAgICAqCiAgICAgKiBAYWNjZXNzIHByb3RlY3RlZAogICAgICogQHJldHVybiBpbnRlZ2VyCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBfY2FsY3VsYXRlUGFnZVNpemUoKSB7CiAgICAgICAgaWYgKGlzc2V0KCR0aGlzLT5kYXRhWyduZXh0X2NvbGxlY3Rpb25fbGluayddKSkgewogICAgICAgICAgICAkdXJsID0gJHRoaXMtPmRhdGFbJ25leHRfY29sbGVjdGlvbl9saW5rJ107CiAgICAgICAgICAgICR1cmxQYXJ0cyA9IHBhcnNlX3VybCgkdXJsKTsKICAgICAgICAgICAgaWYgKGVtcHR5KCR1cmxQYXJ0c1sncXVlcnknXSkpIHJldHVybiAkdGhpcy0+cGFnZVNpemU7CiAgICAgICAgICAgICRxdWVyeSA9IGFycmF5KCk7CiAgICAgICAgICAgIHBhcnNlX3N0cigkdXJsUGFydHNbJ3F1ZXJ5J10sICRxdWVyeSk7CiAgICAgICAgICAgIGlmIChlbXB0eSgkcXVlcnlbJ3dzX3NpemUnXSkpIHJldHVybiAkdGhpcy0+cGFnZVNpemU7CiAgICAgICAgICAgICR0aGlzLT5wYWdlU2l6ZSA9ICRxdWVyeVsnd3Nfc2l6ZSddOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJHRoaXMtPnBhZ2VTaXplOwogICAgfQoKICAgIC8qKgogICAgICogX2xvYWRQYWdlRm9yT2Zmc2V0CiAgICAgKiAKICAgICAqIE1ha2VzIGEgcmVxdWVzdCBmb3IgYW4gYWRkaXRpb25hbCBwYWdlIG9mIGVudHJpZXMsIGJhc2VkIG9uIHRoZSBnaXZlbiAKICAgICAqIG9mZnNldC4gIENhbGN1bGF0ZXMgdGhlIHN0YXJ0IC8gc2l6ZSBvZiB0aGUgcGFnZSBuZWVkZWQgdG8gZ2V0IHRoYXQgCiAgICAgKiBvZmZzZXQsIHJlcXVlc3RzIGZvciBpdCwgYW5kIHRoZW4gbWVyZ2VzIHRoZSBkYXRhIGludG8gaXQgaW50ZXJuYWwgCiAgICAgKiBjb2xsZWN0aW9uIG9mIGVudHJ5IGRhdGEuCiAgICAgKgogICAgICogQHBhcmFtIG1peGVkICRvZmZzZXQgICAgIFRoZSBvZmZzZXQgcmVxdWVzdGVkLCAwIHRvIHRvdGFsX3NpemUtMQogICAgICogQGFjY2VzcyBwcm90ZWN0ZWQKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gX2xvYWRQYWdlRm9yT2Zmc2V0KCRvZmZzZXQpIHsKICAgICAgICAkdGhpcy0+X2NhbGN1bGF0ZVBhZ2VTaXplKCk7CiAgICAgICAgJHN0YXJ0ID0gcm91bmQoJG9mZnNldCAvICR0aGlzLT5wYWdlU2l6ZSkgKiAkdGhpcy0+cGFnZVNpemU7CiAgICAgICAgJHBhcmFtcyA9ICR0aGlzLT5fZ2V0UGFnZVBhcmFtcygkc3RhcnQsICR0aGlzLT5wYWdlU2l6ZSk7CgogICAgICAgIC8vIExvYWRpbmcgcGFnZQogICAgICAgICRkYXRhID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICR0aGlzLT51cmwsICRwYXJhbXMpOwogICAgICAgICR0aGlzLT5hZGFwdGVyLT5kZWJ1ZyA9IGZhbHNlOwoKICAgICAgICAkcmVrZXllZCA9IGFycmF5KCk7CiAgICAgICAgZm9yZWFjaCAoJGRhdGFbJ2VudHJpZXMnXSBhcyAka2V5ID0+ICRlbnRyeSkgewogICAgICAgICAgICAkcmVrZXllZFska2V5KyRkYXRhWydzdGFydCddXSA9ICRlbnRyeTsKICAgICAgICB9CiAgICAgICAgJHRoaXMtPmRhdGFbJ2VudHJpZXMnXSA9IGFycmF5X21lcmdlKCR0aGlzLT5kYXRhWydlbnRyaWVzJ10sICRyZWtleWVkKTsKICAgIH0KCiAgICAvKioKICAgICAqIF9nZXRFbnRyeQogICAgICoKICAgICAqIE1ha2VzIHN1cmUgdGhhdCBlbnRyeSBvZmZzZXQncyBwYWdlIGlzIGxvYWRlZCwgdGhlbiByZXR1cm5zIGl0LiBSZXR1cm5zCiAgICAgKiBudWxsIGlmIHRoZSBlbnRyeSBjYW4ndCBiZSBsb2FkZWQsIGV2ZW4gYWZ0ZXIgcmVxdWVzdGluZyB0aGUgbmVlZGVkIAogICAgICogcGFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJG9mZnNldCAgICAgT2Zmc2V0IGJlaW5nIHJlcXVlc3RlZC4KICAgICAqIEBhY2Nlc3MgcHJvdGVjdGVkCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF9nZXRFbnRyeSgkb2Zmc2V0KSB7CiAgICAgICAgaWYgKGVtcHR5KCR0aGlzLT5kYXRhWydlbnRyaWVzJ11bJG9mZnNldF0pKSB7CiAgICAgICAgICAgICR0aGlzLT5fbG9hZFBhZ2VGb3JPZmZzZXQoJG9mZnNldCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAoZW1wdHkoJHRoaXMtPmRhdGFbJ2VudHJpZXMnXVskb2Zmc2V0XSkpPyBudWxsIDoKICAgICAgICAgICAgJHRoaXMtPmRhdGFbJ2VudHJpZXMnXVskb2Zmc2V0XTsKICAgIH0KCiAgICAvKioKICAgICAqIF9tYWtlRW50cnkKICAgICAqCiAgICAgKiBDcmVhdGVzIGFuIGVudHJ5IG9iamVjdCBmcm9tIHRoZSBnaXZlbiBlbnRyeSBkYXRhLiAgT3B0aW9uYWxseSBjYW4gdGFrZSAKICAgICAqIHRoZSBpZCBBTkQgVVJMIG9mIHRoZSBlbnRyeSwgdGhvdWdoIHRoYXQgZGF0YSBjYW4gYmUgaW5mZXJlZCBmcm9tIHRoZQogICAgICogY29udGV4dCBpbiB3aGljaCBfbWFrZUVudHJ5IGlzIGJlaW5nIGNhbGxlZC4KICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGRhdGEgICBBcnJheSBvZiBkYXRhIHJldHVybmVkIGZyb20gYW4gQVBJIHJlcXVlc3QgZm9yIAogICAgICogICAgICBlbnRyeSwgb3IgYXMgcGFydCBvZiB0aGUgZW50cmllcyBhcnJheSBpbiB0aGlzIGNvbGxlY3Rpb24uCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGlkICAgICBJRCBvZiB0aGUgZW50cnkuIChPcHRpb25hbCkKICAgICAqIEBwYXJhbSBtaXhlZCAkdXJsICAgIFVSTCB1c2VkIHRvIHJldHJpZXZlIHRoaXMgZW50cnkgKE9wdGlvbmFsKSAKICAgICAqIEBhY2Nlc3MgcHJvdGVjdGVkCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF9tYWtlRW50cnkoJGRhdGEsICRpZCA9IGZhbHNlLCAkdXJsID0gZmFsc2UpIHsKICAgICAgICBpZiAoKCEkdXJsKSBvciAoISRpZCkpIHsKICAgICAgICAgICAgLy8gaWYgZWl0aGVyIHRoZSB1cmwgb3IgaWQgaXMgb21pdHRlZCwgZ3JhYiB0aGUgdXJsIGZyb20gdGhlCiAgICAgICAgICAgIC8vIHNlbGZfbGluayBvZiB0aGUgcmVzb3VyY2UKICAgICAgICAgICAgJHVybCA9ICR0aGlzLT5hZGFwdGVyLT5hcHAtPnJlbW92ZUJhc2VVcmkoJGRhdGFbJ3NlbGZfbGluayddKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkdXJsID0gInskdGhpcy0+dXJsfS97JGlkfSI7CiAgICAgICAgfQogICAgICAgIHJldHVybiBuZXcgTU1fQVdlYmVyRW50cnkoJGRhdGEsICR1cmwsICR0aGlzLT5hZGFwdGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFycmF5QWNjZXNzIGludGVyZmFjZSBtZXRob2RzCiAgICAgKgogICAgICogQWxsb3dzIHRoaXMgb2JqZWN0IHRvIGJlIGFjY2Vzc2VkIHZpYSBicmFja2V0IG5vdGF0aW9uIChpZSAkb2JqWyR4XSkKICAgICAqIGh0dHA6Ly9waHAubmV0L21hbnVhbC9lbi9jbGFzcy5hcnJheWFjY2Vzcy5waHAKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG9mZnNldFNldCgkb2Zmc2V0LCAkdmFsdWUpIHsgfQogICAgcHVibGljIGZ1bmN0aW9uIG9mZnNldFVuc2V0KCRvZmZzZXQpIHt9CiAgICBwdWJsaWMgZnVuY3Rpb24gb2Zmc2V0RXhpc3RzKCRvZmZzZXQpIHsKICAgICAgICBpZiAoJG9mZnNldCA+PTAgJiYgJG9mZnNldCA8ICR0aGlzLT50b3RhbF9zaXplKSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBwdWJsaWMgZnVuY3Rpb24gb2Zmc2V0R2V0KCRvZmZzZXQpIHsKICAgICAgICBpZiAoISR0aGlzLT5vZmZzZXRFeGlzdHMoJG9mZnNldCkpICAgIHJldHVybiBudWxsOwogICAgICAgIGlmICghZW1wdHkoJHRoaXMtPl9lbnRyaWVzWyRvZmZzZXRdKSkgcmV0dXJuICR0aGlzLT5fZW50cmllc1skb2Zmc2V0XTsKCiAgICAgICAgJHRoaXMtPl9lbnRyaWVzWyRvZmZzZXRdID0gJHRoaXMtPl9tYWtlRW50cnkoJHRoaXMtPl9nZXRFbnRyeSgkb2Zmc2V0KSk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5fZW50cmllc1skb2Zmc2V0XTsKICAgIH0KCiAgICAvKioKICAgICAqIEl0ZXJhdG9yIGludGVyZmFjZSBtZXRob2RzCiAgICAgKiAKICAgICAqIFByb3ZpZGVzIGl0ZXJhdG9yIGZ1bmN0aW9uYWxpdHkuCiAgICAgKiBodHRwOi8vcGhwLm5ldC9tYW51YWwvZW4vY2xhc3MuaXRlcmF0b3IucGhwCiAgICAgKi8KICAgIHByb3RlY3RlZCAkX2l0ZXJhdGlvbktleSA9IDA7CiAgICBwdWJsaWMgZnVuY3Rpb24gY3VycmVudCgpIHsKICAgICAgICByZXR1cm4gJHRoaXMtPm9mZnNldEdldCgkdGhpcy0+X2l0ZXJhdGlvbktleSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGtleSgpIHsKICAgICAgICByZXR1cm4gJHRoaXMtPl9pdGVyYXRpb25LZXk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgICAgJHRoaXMtPl9pdGVyYXRpb25LZXkrKzsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gcmV3aW5kKCkgewogICAgICAgICR0aGlzLT5faXRlcmF0aW9uS2V5ID0gMDsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gdmFsaWQoKSB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5vZmZzZXRFeGlzdHMoJHRoaXMtPmtleSgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIENvdW50YWJsZSBpbnRlcmZhY2UgbWV0aG9kcwogICAgICoKICAgICAqIEFsbG93cyBQSFAncyBjb3VudCgpIGFuZCBzaXplT2YoKSBmdW5jdGlvbnMgdG8gYWN0IG9uIHRoaXMgb2JqZWN0CiAgICAgKiBodHRwOi8vd3d3LnBocC5uZXQvbWFudWFsL2VuL2NsYXNzLmNvdW50YWJsZS5waHAKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNvdW50KCkgewogICAgICAgIHJldHVybiAkdGhpcy0+dG90YWxfc2l6ZTsKICAgIH0KCn0=', 0, '2018-11-21 06:38:53'),
(75, 'versionrelease', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1ZlcnNpb25SZWxlYXNlIGV4dGVuZHMgTU1fRW50aXR5CnsKCXByaXZhdGUgJHZlcnNpb24gPSAiIjsKCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpCgl7CgkJcGFyZW50OjppbnZhbGlkYXRlKCk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5IAoJCXsKCQkJJHRoaXMtPnZlcnNpb24gPSAkZGF0YS0+dmVyc2lvbjsKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCgkJJHZlcnNpb25SZWxlYXNlRGF0YSA9IGFycmF5KAoJCQkJInZlcnNpb24iCQkgPT4gJHRoaXMtPnZlcnNpb24sCgkJCQkiZGF0ZV9tb2RpZmllZCIJID0+IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpCgkJKTsKCQkKCQlpZihpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQkkd2hlcmVDbGF1c2UgPSBhcnJheSgiaWQiPT4kdGhpcy0+aWQpOwoJCQkkd3BkYi0+dXBkYXRlKE1NX1RBQkxFX1ZFUlNJT05fUkVMRUFTRVMsJHZlcnNpb25SZWxlYXNlRGF0YSwkd2hlcmVDbGF1c2UpOwoJCQlyZXR1cm4gJHRoaXMtPmlkOwoJCX0KCQllbHNlCgkJewoJCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX1ZFUlNJT05fUkVMRUFTRVMsJHZlcnNpb25SZWxlYXNlRGF0YSk7CgkJCSR0aGlzLT5pZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJCXJldHVybiAkdGhpcy0+aWQ7CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJCgkvKiogR0VUVEVSUy9TRVRURVJTICoqLwoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VmVyc2lvbigpCgl7CgkJcmV0dXJuICR0aGlzLT52ZXJzaW9uOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRWZXJzaW9uKCR2YWwpCgl7CgkJJHRoaXMtPnZlcnNpb24gPSAkdmFsOwoJfQoJCgkKCS8qKiBVVElMSVRJRVMgKiovCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEJ5VmVyc2lvbigkdmVyc2lvbikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHZlcnNpb25SZWxlYXNlID0gbmV3IE1NX1ZlcnNpb25SZWxlYXNlKCk7CgkJCgkJJHNxbCA9ICR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfVkVSU0lPTl9SRUxFQVNFUy4iIFdIRVJFIHZlcnNpb249JXMgbGltaXQgMSIsJHZlcnNpb24pOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQoJCWlmKCRyZXN1bHQpCgkJewoJCQkkdmVyc2lvblJlbGVhc2UtPnNldElkKCRyZXN1bHQtPmlkKTsKCQkJJHZlcnNpb25SZWxlYXNlLT5zZXREYXRhKCRyZXN1bHQpOwoJCX0KCQoJCXJldHVybiAkdmVyc2lvblJlbGVhc2U7Cgl9Cn0K', 0, '2018-11-21 06:38:53'),
(76, 'oauthapplication', 'LyoqCiAqIE1NX09BdXRoQXBwbGljYXRpb24KICoKICogQmFzZSBjbGFzcyB0byByZXByZXNlbnQgYW4gT0F1dGhDb25zdW1lciBhcHBsaWNhdGlvbi4gIFRoaXMgY2xhc3MgaXMKICogaW50ZW5kZWQgdG8gYmUgZXh0ZW5kZWQgYW5kIG1vZGlmaWVkIGZvciBlYWNoIFNlcnZpY2VQcm92aWRlci4gRWFjaAogKiBNTV9PQXV0aFNlcnZpY2VQcm92aWRlciBzaG91bGQgaGF2ZSBhIGNvbXBsZW1lbnRhcnkgTU1fT0F1dGhBcHBsaWNhdGlvbgogKgogKiBUaGUgTU1fT0F1dGhBcHBsaWNhdGlvbiBjbGFzcyBzaG91bGQgY29udGFpbiBhbnkgZGV0YWlscyBvbiBwcmVwYXJpbmcKICogcmVxdWlyZXMgdGhhdCBpcyB1bmlxdWUgb3Igc3BlY2lmaWMgdG8gdGhhdCBzcGVjaWZpYyBzZXJ2aWNlIHByb3ZpZGVyJ3MKICogaW1wbGVtZW50YXRpb24gb2YgdGhlIE9BdXRoIG1vZGVsLgogKgogKiBUaGlzIGJhc2UgY2xhc3MgaXMgYmFzZWQgb24gT0F1dGggMS4wLCBkZXNpZ25lZCB3aXRoIEFXZWJlcidzIGltcGxlbWVudGF0aW9uCiAqIGFzIGEgbW9kZWwuICBBbiBNTV9PQXV0aEFwcGxpY2F0aW9uIGJ1aWx0IHRvIHdvcmsgd2l0aCBhIGRpZmZlcmVudCBzZXJ2aWNlCiAqIHByb3ZpZGVyIChlc3BlY2lhbGx5IGFuIE9BdXRoMi4wIEFwcGxpY2F0aW9uKSBtYXkgYWx0ZXIgb3IgYnlwYXNzIHBvcnRpb25zCiAqIG9mIHRoZSBsb2dpYyBpbiB0aGlzIGNsYXNzIHRvIG1lZXQgdGhlIG5lZWRzIG9mIHRoZSBzZXJ2aWNlIHByb3ZpZGVyIGl0CiAqIGlzIGRlc2lnbmVkIHRvIGludGVyZmFjZSB3aXRoLgogKgogKiBAcGFja2FnZQogKiBAdmVyc2lvbiAkaWQkCiAqLwpjbGFzcyBNTV9PQXV0aEFwcGxpY2F0aW9uIGltcGxlbWVudHMgTU1fQVdlYmVyT0F1dGhBZGFwdGVyIHsKICAgIHB1YmxpYyAkZGVidWcgPSBmYWxzZTsKCiAgICBwdWJsaWMgJHVzZXJBZ2VudCA9ICdBV2ViZXIgT0F1dGggQ29uc3VtZXIgQXBwbGljYXRpb24gMS4wIC0gaHR0cHM6Ly9sYWJzLmF3ZWJlci5jb20vJzsKCiAgICBwdWJsaWMgJGZvcm1hdCA9IGZhbHNlOwoKICAgIHB1YmxpYyAkcmVxdWlyZXNUb2tlblNlY3JldCA9IHRydWU7CgogICAgcHVibGljICRzaWduYXR1cmVNZXRob2QgPSAnSE1BQy1TSEExJzsKICAgIHB1YmxpYyAkdmVyc2lvbiAgICAgICAgID0gJzEuMCc7CgogICAgLyoqCiAgICAgKiBAdmFyIE1NX09BdXRoVXNlciBVc2VyIGN1cnJlbnRseSBpbnRlcmFjdGluZyB3aXRoIHRoZSBzZXJ2aWNlIHByb3ZpZGVyCiAgICAgKi8KICAgIHB1YmxpYyAkdXNlciA9IGZhbHNlOwoKICAgIC8vIERhdGEgYmluZGluZyB0aGlzIE1NX09BdXRoQXBwbGljYXRpb24gdG8gdGhlIGNvbnN1bWVyIGFwcGxpY2F0aW9uIGl0IGlzIGFjdGluZwogICAgLy8gYXMgYSBwcm94eSBmb3IKICAgIHB1YmxpYyAkY29uc3VtZXJLZXkgPSBmYWxzZTsKICAgIHB1YmxpYyAkY29uc3VtZXJTZWNyZXQgPSBmYWxzZTsKCiAgICAvKioKICAgICAqIF9fY29uc3RydWN0CiAgICAgKgogICAgICogQ3JlYXRlIGEgbmV3IE1NX09BdXRoQXBwbGljYXRpb24sIGJhc2VkIG9uIGFuIE1NX09BdXRoU2VydmljZVByb3ZpZGVyCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcGFyZW50QXBwID0gZmFsc2UpIHsKICAgICAgICBpZiAoJHBhcmVudEFwcCkgewogICAgICAgICAgICBpZiAoIWlzX2EoJHBhcmVudEFwcCwgJ01NX09BdXRoU2VydmljZVByb3ZpZGVyJykpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1BhcmVudCBBcHAgbXVzdCBiZSBhIHZhbGlkIE1NX09BdXRoU2VydmljZVByb3ZpZGVyIScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR0aGlzLT5hcHAgPSAkcGFyZW50QXBwOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+dXNlciA9IG5ldyBNTV9PQXV0aFVzZXIoKTsKICAgIH0KCiAgICAvKioKICAgICAqIHJlcXVlc3QKICAgICAqCiAgICAgKiBJbXBsZW1lbnRlZCBmb3IgYSBzdGFuZGFyZCBPQXV0aCBhZGFwdGVyIGludGVyZmFjZQogICAgICogQHBhcmFtIG1peGVkICRtZXRob2QKICAgICAqIEBwYXJhbSBtaXhlZCAkdXJpCiAgICAgKiBAcGFyYW0gYXJyYXkgJGRhdGEKICAgICAqIEBwYXJhbSBhcnJheSAkb3B0aW9ucwogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gcmVxdWVzdCgkbWV0aG9kLCAkdXJpLCAkZGF0YSA9IGFycmF5KCksICRvcHRpb25zID0gYXJyYXkoKSkgewogICAgICAgICR1cmkgPSAkdGhpcy0+YXBwLT5yZW1vdmVCYXNlVXJpKCR1cmkpOwogICAgICAgICR1cmwgPSAkdGhpcy0+YXBwLT5nZXRCYXNlVXJpKCkgLiAkdXJpOwoKICAgICAgICAjIFdBUk5JTkc6IG5vbi1wcmltYXRpdmUgaXRlbXMgaW4gZGF0YSBtdXN0IGJlIGpzb24gc2VyaWFsaXplZC4KICAgICAgICBpZiAoJG1ldGhvZCA9PSAnUE9TVCcgb3IgJG1ldGhvZCA9PSAnR0VUJykgewogICAgICAgICAgICBmb3JlYWNoICgkZGF0YSBhcyAka2V5ID0+ICR2YWx1ZSkgewogICAgICAgICAgICAgICAgaWYgKGlzX2FycmF5KCR2YWx1ZSkpIHsKICAgICAgICAgICAgICAgICAgICAkZGF0YVska2V5XSA9IGpzb25fZW5jb2RlKCR2YWx1ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRyZXNwb25zZSA9ICR0aGlzLT5tYWtlUmVxdWVzdCgkbWV0aG9kLCAkdXJsLCAkZGF0YSk7CgogICAgICAgIGlmICghZW1wdHkoJG9wdGlvbnNbJ3JldHVybiddKSkgewogICAgICAgICAgICBpZiAoJG9wdGlvbnNbJ3JldHVybiddID09ICdzdGF0dXMnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHJlc3BvbnNlLT5oZWFkZXJzWydTdGF0dXMtQ29kZSddOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkb3B0aW9uc1sncmV0dXJuJ10gPT0gJ2hlYWRlcnMnKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJHJlc3BvbnNlLT5oZWFkZXJzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkb3B0aW9uc1sncmV0dXJuJ10gPT0gJ2ludGVnZXInKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gaW50dmFsKCRyZXNwb25zZS0+Ym9keSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJGRhdGEgPSBqc29uX2RlY29kZSgkcmVzcG9uc2UtPmJvZHksIHRydWUpOwogICAgICAgIGlmIChlbXB0eSgkb3B0aW9uc1snYWxsb3dfZW1wdHknXSkgJiYgZW1wdHkoJGRhdGEpKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBNTV9BV2ViZXJSZXNwb25zZUVycm9yKCR1cmkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJGRhdGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBnZXRSZXF1ZXN0VG9rZW4KICAgICAqCiAgICAgKiBHZXRzIGEgbmV3IHJlcXVlc3QgdG9rZW4gLyBzZWNyZXQgZm9yIHRoaXMgdXNlci4KICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGdldFJlcXVlc3RUb2tlbigkY2FsbGJhY2tVcmw9ZmFsc2UpIHsKICAgICAgICAkZGF0YSA9ICgkY2FsbGJhY2tVcmwpPyBhcnJheSgnb2F1dGhfY2FsbGJhY2snID0+ICRjYWxsYmFja1VybCkgOiBhcnJheSgpOwogICAgICAgICRyZXNwID0gJHRoaXMtPm1ha2VSZXF1ZXN0KCdQT1NUJywgJHRoaXMtPmFwcC0+Z2V0UmVxdWVzdFRva2VuVXJsKCksICRkYXRhKTsKICAgICAgICAkZGF0YSA9ICR0aGlzLT5wYXJzZVJlc3BvbnNlKCRyZXNwKTsKICAgICAgICAkdGhpcy0+cmVxdWlyZWRGcm9tUmVzcG9uc2UoJGRhdGEsIGFycmF5KCdvYXV0aF90b2tlbicsICdvYXV0aF90b2tlbl9zZWNyZXQnKSk7CiAgICAgICAgJHRoaXMtPnVzZXItPnJlcXVlc3RUb2tlbiA9ICRkYXRhWydvYXV0aF90b2tlbiddOwogICAgICAgICR0aGlzLT51c2VyLT50b2tlblNlY3JldCAgPSAkZGF0YVsnb2F1dGhfdG9rZW5fc2VjcmV0J107CiAgICAgICAgcmV0dXJuICRkYXRhWydvYXV0aF90b2tlbiddOwogICAgfQoKICAgIC8qKgogICAgICogZ2V0QWNjZXNzVG9rZW4KICAgICAqCiAgICAgKiBNYWtlcyBhIHJlcXVlc3QgZm9yIGFjY2VzcyB0b2tlbnMuICBSZXF1aXJlcyB0aGF0IHRoZSBjdXJyZW50IHVzZXIgaGFzIGFuIGF1dGhvcml6ZWQKICAgICAqIHRva2VuIGFuZCB0b2tlbiBzZWNyZXQuCiAgICAgKgogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzVG9rZW4oKSB7CiAgICAgICAgJHJlc3AgPSAkdGhpcy0+bWFrZVJlcXVlc3QoJ1BPU1QnLCAkdGhpcy0+YXBwLT5nZXRBY2Nlc3NUb2tlblVybCgpLAogICAgICAgICAgICBhcnJheSgnb2F1dGhfdmVyaWZpZXInID0+ICR0aGlzLT51c2VyLT52ZXJpZmllcikKICAgICAgICApOwogICAgICAgICRkYXRhID0gJHRoaXMtPnBhcnNlUmVzcG9uc2UoJHJlc3ApOwogICAgICAgICR0aGlzLT5yZXF1aXJlZEZyb21SZXNwb25zZSgkZGF0YSwgYXJyYXkoJ29hdXRoX3Rva2VuJywgJ29hdXRoX3Rva2VuX3NlY3JldCcpKTsKCiAgICAgICAgaWYgKGVtcHR5KCRkYXRhWydvYXV0aF90b2tlbiddKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgTU1fQVdlYmVyT0F1dGhEYXRhTWlzc2luZygnb2F1dGhfdG9rZW4nKTsKICAgICAgICB9CgogICAgICAgICR0aGlzLT51c2VyLT5hY2Nlc3NUb2tlbiA9ICRkYXRhWydvYXV0aF90b2tlbiddOwogICAgICAgICR0aGlzLT51c2VyLT50b2tlblNlY3JldCA9ICRkYXRhWydvYXV0aF90b2tlbl9zZWNyZXQnXTsKICAgICAgICByZXR1cm4gYXJyYXkoJGRhdGFbJ29hdXRoX3Rva2VuJ10sICRkYXRhWydvYXV0aF90b2tlbl9zZWNyZXQnXSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBwYXJzZUFzRXJyb3IKICAgICAqCiAgICAgKiBDaGVja3MgaWYgcmVzcG9uc2UgaXMgYW4gZXJyb3IuICBJZiBpdCBpcywgcmFpc2UgYW4gYXBwcm9wcmlhdGVseQogICAgICogY29uZmlndXJlZCBleGNlcHRpb24uCiAgICAgKgogICAgICogQHBhcmFtIG1peGVkICRyZXNwb25zZSAgIERhdGEgcmV0dXJuZWQgZnJvbSB0aGUgc2VydmVyLCBpbiBhcnJheSBmb3JtCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHRocm93cyBNTV9BV2ViZXJPQXV0aEV4Y2VwdGlvbgogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBwYXJzZUFzRXJyb3IoJHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKCFlbXB0eSgkcmVzcG9uc2VbJ2Vycm9yJ10pKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBNTV9BV2ViZXJPQXV0aEV4Y2VwdGlvbigkcmVzcG9uc2VbJ2Vycm9yJ11bJ3R5cGUnXSwKICAgICAgICAgICAgICAgICRyZXNwb25zZVsnZXJyb3InXVsnbWVzc2FnZSddKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiByZXF1aXJlZEZyb21SZXNwb25zZQogICAgICoKICAgICAqIEVuZm9yY2UgdGhhdCBhbGwgdGhlIGZpZWxkcyBpbiByZXF1aXJlZEZpZWxkcyBhcmUgcHJlc2VudCBhbmQgbm90CiAgICAgKiBlbXB0eSBpbiBkYXRhLiAgSWYgYSByZXF1aXJlZCBmaWVsZCBpcyBlbXB0eSwgdGhyb3cgYW4gZXhjZXB0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBtaXhlZCAkZGF0YSAgICAgICAgICAgICAgIEFycmF5IG9mIGRhdGEKICAgICAqIEBwYXJhbSBtaXhlZCAkcmVxdWlyZWRGaWVsZHMgICAgIEFycmF5IG9mIHJlcXVpcmVkIGZpZWxkIG5hbWVzLgogICAgICogQGFjY2VzcyBwcm90ZWN0ZWQKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gcmVxdWlyZWRGcm9tUmVzcG9uc2UoJGRhdGEsICRyZXF1aXJlZEZpZWxkcykgewogICAgICAgIGZvcmVhY2ggKCRyZXF1aXJlZEZpZWxkcyBhcyAkZmllbGQpIHsKICAgICAgICAgICAgaWYgKGVtcHR5KCRkYXRhWyRmaWVsZF0pKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTU1fQVdlYmVyT0F1dGhEYXRhTWlzc2luZygkZmllbGQpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogZ2V0CiAgICAgKgogICAgICogTWFrZSBhIGdldCByZXF1ZXN0LiAgVXNlZCB0byBleGNoYW5nZSB1c2VyIHRva2VucyB3aXRoIHNlcmljZSBwcm92aWRlci4KICAgICAqIEBwYXJhbSBtaXhlZCAkdXJsICAgICAgICBVUkwgdG8gbWFrZSBhIGdldCByZXF1ZXN0IGZyb20uCiAgICAgKiBAcGFyYW0gYXJyYXkgJGRhdGEgICAgICAgRGF0YSBmb3IgdGhlIHJlcXVlc3QuCiAgICAgKiBAYWNjZXNzIHByb3RlY3RlZAogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBnZXQoJHVybCwgJGRhdGEpIHsKICAgICAgICAkdXJsID0gJHRoaXMtPl9hZGRQYXJhbWV0ZXJzVG9VcmwoJHVybCwgJGRhdGEpOwogICAgICAgICRoYW5kbGUgPSBjdXJsX2luaXQoJHVybCk7CiAgICAgICAgJHJlc3AgPSAkdGhpcy0+X3NlbmRSZXF1ZXN0KCRoYW5kbGUpOwogICAgICAgIHJldHVybiAkcmVzcDsKICAgIH0KCiAgICAvKioKICAgICAqIF9hZGRQYXJhbWV0ZXJzVG9VcmwKICAgICAqCiAgICAgKiBBZGRzIHRoZSBwYXJhbWV0ZXJzIGluIGFzc29jaWF0aXZlIGFycmF5ICRkYXRhIHRvIHRoZSAKICAgICAqIGdpdmVuIFVSTAogICAgICogQHBhcmFtIFN0cmluZyAkdXJsICAgICAgIFVSTCAKICAgICAqIEBwYXJhbSBhcnJheSAkZGF0YSAgICAgICBQYXJhbWV0ZXJzIHRvIGJlIGFkZGVkIGFzIGEgcXVlcnkgc3RyaW5nIHRvCiAgICAgKiAgICAgIHRoZSBVUkwgcHJvdmlkZWQKICAgICAqIEBhY2Nlc3MgcHJvdGVjdGVkCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF9hZGRQYXJhbWV0ZXJzVG9VcmwoJHVybCwgJGRhdGEpIHsKICAgICAgICBpZiAoIWVtcHR5KCRkYXRhKSkgewogICAgICAgICAgICBpZiAoc3RycG9zKCR1cmwsICc/JykgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAkdXJsIC49ICc/Jy4kdGhpcy0+YnVpbGREYXRhKCRkYXRhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICR1cmwgLj0gJyYnLiR0aGlzLT5idWlsZERhdGEoJGRhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAkdXJsOwogICAgfQoKICAgIC8qKgogICAgICogZ2VuZXJhdGVOb25jZQogICAgICoKICAgICAqIEdlbmVyYXRlcyBhICdub25jZScsIHdoaWNoIGlzIGEgdW5pcXVlIHJlcXVlc3QgaWQgYmFzZWQgb24gdGhlCiAgICAgKiB0aW1lc3RhbXAuICBJZiBubyB0aW1lc3RhbXAgaXMgcHJvdmlkZWQsIGdlbmVyYXRlIG9uZS4KICAgICAqIEBwYXJhbSBtaXhlZCAkdGltZXN0YW1wIEVpdGhlciBhIHRpbWVzdGFtcCAoZXBvY2ggc2Vjb25kcykgb3IgZmFsc2UsCiAgICAgKiAgaW4gd2hpY2ggY2FzZSBpdCB3aWxsIGdlbmVyYXRlIGEgdGltZXN0YW1wLgogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gc3RyaW5nICAgUmV0dXJucyBhIHVuaXF1ZSBub25jZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVOb25jZSgkdGltZXN0YW1wID0gZmFsc2UpIHsKICAgICAgICBpZiAoISR0aW1lc3RhbXApICR0aW1lc3RhbXAgPSAkdGhpcy0+Z2VuZXJhdGVUaW1lc3RhbXAoKTsKICAgICAgICByZXR1cm4gbWQ1KCR0aW1lc3RhbXAuJy0nLnJhbmQoMTAwMDAsOTk5OTkpLictJy51bmlxaWQoKSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBnZW5lcmF0ZVRpbWVzdGFtcAogICAgICoKICAgICAqIEdlbmVyYXRlcyBhIHRpbWVzdGFtcCwgaW4gc2Vjb25kcwogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gaW50IFRpbWVzdGFtcCwgaW4gZXBvY2ggc2Vjb25kcwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVUaW1lc3RhbXAoKSB7CiAgICAgICAgcmV0dXJuIHRpbWUoKTsKICAgIH0KCiAgICAvKioKICAgICAqIGNyZWF0ZVNpZ25hdHVyZQogICAgICoKICAgICAqIENyZWF0ZXMgYSBzaWduYXR1cmUgb24gdGhlIHNpZ25hdHVyZSBiYXNlIGFuZCB0aGUgc2lnbmF0dXJlIGtleQogICAgICogQHBhcmFtIG1peGVkICRzaWdCYXNlICAgIEJhc2Ugc3RyaW5nIG9mIGRhdGEgdG8gc2lnbgogICAgICogQHBhcmFtIG1peGVkICRzaWdLZXkgICAgIEtleSB0byBzaWduIHRoZSBkYXRhIHdpdGgKICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIHN0cmluZyAgIFRoZSBzaWduYXR1cmUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZVNpZ25hdHVyZSgkc2lnQmFzZSwgJHNpZ0tleSkgewogICAgICAgIHN3aXRjaCAoJHRoaXMtPnNpZ25hdHVyZU1ldGhvZCkgewogICAgICAgIGNhc2UgJ0hNQUMtU0hBMSc6CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcmV0dXJuIGJhc2U2NF9lbmNvZGUoaGFzaF9obWFjKCdzaGExJywgJHNpZ0Jhc2UsICRzaWdLZXksIHRydWUpKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBlbmNvZGUKICAgICAqCiAgICAgKiBTaG9ydC1jdXQgZm9yIHV0ZjhfZW5jb2RlIC8gcmF3dXJsZW5jb2RlCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGRhdGEgICBEYXRhIHRvIGVuY29kZQogICAgICogQGFjY2VzcyBwcm90ZWN0ZWQKICAgICAqIEByZXR1cm4gdm9pZCAgICAgICAgIEVuY29kZWQgZGF0YQogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZW5jb2RlKCRkYXRhKSB7CiAgICAgICAgcmV0dXJuIHJhd3VybGVuY29kZSh1dGY4X2VuY29kZSgkZGF0YSkpOwogICAgfQoKICAgIC8qKgogICAgICogY3JlYXRlU2lnbmF0dXJlS2V5CiAgICAgKgogICAgICogQ3JlYXRlcyBhIGtleSB0aGF0IHdpbGwgYmUgdXNlZCB0byBzaWduIG91ciBzaWduYXR1cmUuICBTaWduYXR1cmVzCiAgICAgKiBhcmUgc2lnbmVkIHdpdGggdGhlIGNvbnN1bWVyU2VjcmV0IGZvciB0aGlzIGNvbnN1bWVyIGFwcGxpY2F0aW9uIGFuZAogICAgICogdGhlIHRva2VuIHNlY3JldCBvZiB0aGUgdXNlciB0aGF0IHRoZSBhcHBsaWNhdGlvbiBpcyBhY3Rpbmcgb24gYmVoYWxmCiAgICAgKiBvZi4KICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNyZWF0ZVNpZ25hdHVyZUtleSgpIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmNvbnN1bWVyU2VjcmV0LicmJy4kdGhpcy0+dXNlci0+dG9rZW5TZWNyZXQ7CiAgICB9CgogICAgLyoqCiAgICAgKiBnZXRPQXV0aFJlcXVlc3REYXRhCiAgICAgKgogICAgICogR2V0IGFsbCB0aGUgcHJlLXNpZ25hdHVyZSwgT0F1dGggc3BlY2lmaWMgcGFyYW1ldGVycyBmb3IgYSByZXF1ZXN0LgogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0T0F1dGhSZXF1ZXN0RGF0YSgpIHsKICAgICAgICAkdG9rZW4gPSAkdGhpcy0+dXNlci0+Z2V0SGlnaGVzdFByaW9yaXR5VG9rZW4oKTsKICAgICAgICAkdHMgPSAkdGhpcy0+Z2VuZXJhdGVUaW1lc3RhbXAoKTsKICAgICAgICAkbm9uY2UgPSAkdGhpcy0+Z2VuZXJhdGVOb25jZSgkdHMpOwogICAgICAgIHJldHVybiBhcnJheSgKICAgICAgICAgICAgJ29hdXRoX3Rva2VuJyA9PiAkdG9rZW4sCiAgICAgICAgICAgICdvYXV0aF9jb25zdW1lcl9rZXknID0+ICR0aGlzLT5jb25zdW1lcktleSwKICAgICAgICAgICAgJ29hdXRoX3ZlcnNpb24nID0+ICR0aGlzLT52ZXJzaW9uLAogICAgICAgICAgICAnb2F1dGhfdGltZXN0YW1wJyA9PiAkdHMsCiAgICAgICAgICAgICdvYXV0aF9zaWduYXR1cmVfbWV0aG9kJyA9PiAkdGhpcy0+c2lnbmF0dXJlTWV0aG9kLAogICAgICAgICAgICAnb2F1dGhfbm9uY2UnID0+ICRub25jZSk7CiAgICB9CgoKICAgIC8qKgogICAgICogbWVyZ2VPQXV0aERhdGEKICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJHJlcXVlc3REYXRhCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBtZXJnZU9BdXRoRGF0YSgkcmVxdWVzdERhdGEpIHsKICAgICAgICAkb2F1dGhEYXRhID0gJHRoaXMtPmdldE9BdXRoUmVxdWVzdERhdGEoKTsKICAgICAgICByZXR1cm4gYXJyYXlfbWVyZ2UoJHJlcXVlc3REYXRhLCAkb2F1dGhEYXRhKTsKICAgIH0KCiAgICAvKioKICAgICAqIGNyZWF0ZVNpZ25hdHVyZUJhc2UKICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJG1ldGhvZCAgICAgU3RyaW5nIG5hbWUgb2YgSFRUUCBtZXRob2QsIHN1Y2ggYXMgIkdFVCIKICAgICAqIEBwYXJhbSBtaXhlZCAkdXJsICAgICAgICBVUkwgd2hlcmUgdGhpcyByZXF1ZXN0IHdpbGwgZ28KICAgICAqIEBwYXJhbSBtaXhlZCAkZGF0YSAgICAgICBBcnJheSBvZiBwYXJhbXMgZm9yIHRoaXMgcmVxdWVzdC4gVGhpcyBzaG91bGQKICAgICAqICAgICAgaW5jbHVkZSBBTEwgb2F1dGggcHJvcGVydGllcyBleGNlcHQgZm9yIHRoZSBzaWduYXR1cmUuCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBjcmVhdGVTaWduYXR1cmVCYXNlKCRtZXRob2QsICR1cmwsICRkYXRhKSB7CiAgICAgICAgJG1ldGhvZCA9ICR0aGlzLT5lbmNvZGUoc3RydG91cHBlcigkbWV0aG9kKSk7CiAgICAgICAgJHF1ZXJ5ID0gcGFyc2VfdXJsKCR1cmwsIFBIUF9VUkxfUVVFUlkpOwogICAgICAgIGlmICgkcXVlcnkpIHsKICAgICAgICAgICAgJHVybCA9IGFycmF5X3NoaWZ0KGV4cGxvZGUoJz8nLCAkdXJsLCAyKSk7CiAgICAgICAgICAgICRpdGVtcyA9IGV4cGxvZGUoJyYnLCAkcXVlcnkpOwogICAgICAgICAgICBmb3JlYWNoICgkaXRlbXMgYXMgJGl0ZW0pIHsKICAgICAgICAgICAgICAgIGxpc3QoJGtleSwgJHZhbHVlKSA9IGV4cGxvZGUoJz0nLCAkaXRlbSk7CiAgICAgICAgICAgICAgICAkZGF0YVska2V5XSA9ICR2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkdXJsID0gJHRoaXMtPmVuY29kZSgkdXJsKTsKICAgICAgICAkZGF0YSA9ICR0aGlzLT5lbmNvZGUoJHRoaXMtPmNvbGxhcHNlRGF0YUZvclNpZ25hdHVyZSgkZGF0YSkpOwogICAgICAgIHJldHVybiAkbWV0aG9kLicmJy4kdXJsLicmJy4kZGF0YTsKICAgIH0KCiAgICAvKioKICAgICAqIGNvbGxhcHNlRGF0YUZvclNpZ25hdHVyZQogICAgICoKICAgICAqIFR1cm5zIGFuIGFycmF5IG9mIHJlcXVlc3QgZGF0YSBpbnRvIGEgc3RyaW5nLCBhcyB1c2VkIGJ5IHRoZSBvYXV0aAogICAgICogc2lnbmF0dXJlCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGRhdGEKICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGNvbGxhcHNlRGF0YUZvclNpZ25hdHVyZSgkZGF0YSkgewogICAgICAgIGtzb3J0KCRkYXRhKTsKICAgICAgICAkY29sbGFwc2UgPSAnJzsKICAgICAgICBmb3JlYWNoICgkZGF0YSBhcyAka2V5ID0+ICR2YWwpIHsKICAgICAgICAgICAgaWYgKCFlbXB0eSgkY29sbGFwc2UpKSAkY29sbGFwc2UgLj0gJyYnOwogICAgICAgICAgICBpZiAoIWlzX2FycmF5KCR2YWwpKQogICAgICAgICAgICAJJGNvbGxhcHNlIC49ICRrZXkuJz0nLiR0aGlzLT5lbmNvZGUoJHZhbCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkY29sbGFwc2U7CiAgICB9CgogICAgLyoqCiAgICAgKiBzaWduUmVxdWVzdAogICAgICoKICAgICAqIFNpZ25zIHRoZSByZXF1ZXN0LgogICAgICoKICAgICAqIEBwYXJhbSBtaXhlZCAkbWV0aG9kICAgICBIVFRQIG1ldGhvZAogICAgICogQHBhcmFtIG1peGVkICR1cmwgICAgICAgIFVSTCBmb3IgdGhlIHJlcXVlc3QKICAgICAqIEBwYXJhbSBtaXhlZCAkZGF0YSAgICAgICBUaGUgZGF0YSB0byBiZSBzaWduZWQKICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIGFycmF5ICAgICAgICAgICAgVGhlIGRhdGEsIHdpdGggdGhlIHNpZ25hdHVyZS4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNpZ25SZXF1ZXN0KCRtZXRob2QsICR1cmwsICRkYXRhKSB7CiAgICAgICAgJGJhc2UgPSAkdGhpcy0+Y3JlYXRlU2lnbmF0dXJlQmFzZSgkbWV0aG9kLCAkdXJsLCAkZGF0YSk7CiAgICAgICAgJGtleSAgPSAkdGhpcy0+Y3JlYXRlU2lnbmF0dXJlS2V5KCk7CiAgICAgICAgJGRhdGFbJ29hdXRoX3NpZ25hdHVyZSddID0gJHRoaXMtPmNyZWF0ZVNpZ25hdHVyZSgkYmFzZSwgJGtleSk7CiAgICAgICAga3NvcnQoJGRhdGEpOwogICAgICAgIHJldHVybiAkZGF0YTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBtYWtlUmVxdWVzdAogICAgICoKICAgICAqIFB1YmxpYyBmYWNpbmcgZnVuY3Rpb24gdG8gbWFrZSBhIHJlcXVlc3QKICAgICAqIEBwYXJhbSBtaXhlZCAkbWV0aG9kCiAgICAgKiBAcGFyYW0gbWl4ZWQgJHVybAogICAgICogQHBhcmFtIG1peGVkICRkYXRhCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBtYWtlUmVxdWVzdCgkbWV0aG9kLCAkdXJsLCAkZGF0YT1hcnJheSgpKSB7CiAgICAgICAgJG9hdXRoID0gJHRoaXMtPnByZXBhcmVSZXF1ZXN0KCRtZXRob2QsICR1cmwsICRkYXRhKTsKICAgICAgICBpZiAoJHRoaXMtPmRlYnVnKSBlY2hvICJcbioqIHskbWV0aG9kfTogJHVybFxuIjsKICAgICAgICBpZiAoc3RydG91cHBlcigkbWV0aG9kKSA9PSAnUE9TVCcpIHsKICAgICAgICAgICAgJHJlc3AgPSAkdGhpcy0+cG9zdCgkdXJsLCAkb2F1dGgpOwogICAgICAgIH0gZWxzZSBpZiAoc3RydG91cHBlcigkbWV0aG9kKSA9PSAnREVMRVRFJykgewogICAgICAgICAgICAkcmVzcCA9ICR0aGlzLT5kZWxldGUoJHVybCwgJG9hdXRoKTsKICAgICAgICB9IGVsc2UgaWYgKHN0cnRvdXBwZXIoJG1ldGhvZCkgPT0gJ1BBVENIJykgewogICAgICAgICAgICAkb2F1dGggPSAkdGhpcy0+cHJlcGFyZVJlcXVlc3QoJG1ldGhvZCwgJHVybCwgYXJyYXkoKSk7CiAgICAgICAgICAgICRyZXNwICA9ICR0aGlzLT5wYXRjaCgkdXJsLCAkb2F1dGgsICRkYXRhKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkcmVzcCA9ICR0aGlzLT5nZXQoJHVybCwgJG9hdXRoLCAkZGF0YSk7CiAgICAgICAgfQoKICAgICAgICAvLyBlbmFibGUgZGVidWcgb3V0cHV0CiAgICAgICAgaWYgKCR0aGlzLT5kZWJ1ZykgewogICAgICAgICAgICBlY2hvICI8cHJlPiI7CiAgICAgICAgICAgIHByaW50X3IoJG9hdXRoKTsKICAgICAgICAgICAgZWNobyAiIC0tPiBTdGF0dXM6IHskcmVzcC0+aGVhZGVyc1snU3RhdHVzLUNvZGUnXX1cbiI7CiAgICAgICAgICAgIGVjaG8gIiAtLT4gQm9keTogeyRyZXNwLT5ib2R5fSI7CiAgICAgICAgICAgIGVjaG8gIjwvcHJlPiI7CiAgICAgICAgfQoKICAgICAgICBpZiAoISRyZXNwKSB7CiAgICAgICAgICAgICRtc2cgID0gJ1VuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBBV2ViZXIgQVBJLiAgUGxlYXNlIGVuc3VyZSB0aGF0IENVUkwgaXMgZW5hYmxlZCBhbmQgeW91ciAnOwogICAgICAgICAgICAkbXNnIC49ICdmaXJld2FsbCBhbGxvd3Mgb3V0Ym91bmQgU1NMIHJlcXVlc3RzIGZyb20geW91ciB3ZWIgc2VydmVyLic7CiAgICAgICAgICAgICRlcnJvciA9IGFycmF5KCdtZXNzYWdlJyA9PiAkbXNnLCAndHlwZScgPT4gJ0FQSVVucmVhY2hhYmxlRXJyb3InLAogICAgICAgICAgICAgICAgICAgICAgICAgICAnZG9jdW1lbnRhdGlvbl91cmwnID0+ICdodHRwczovL2xhYnMuYXdlYmVyLmNvbS9kb2NzL3Ryb3VibGVzaG9vdGluZycpOwogICAgICAgICAgICB0aHJvdyBuZXcgTU1fQVdlYmVyQVBJRXhjZXB0aW9uKCRlcnJvciwgJHVybCk7CiAgICAgICAgfQoKICAgICAgICBpZigkcmVzcC0+aGVhZGVyc1snU3RhdHVzLUNvZGUnXSA+PSA0MDApIHsKICAgICAgICAgICAgJGRhdGEgPSBqc29uX2RlY29kZSgkcmVzcC0+Ym9keSwgdHJ1ZSk7CiAgICAgICAgICAgIHRocm93IG5ldyBNTV9BV2ViZXJBUElFeGNlcHRpb24oJGRhdGFbJ2Vycm9yJ10sICR1cmwpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRyZXNwOwogICAgfQoKICAgIC8qKgogICAgICogcHV0CiAgICAgKgogICAgICogUHJlcGFyZSBhbiBPQXV0aCBwdXQgbWV0aG9kLgogICAgICoKICAgICAqIEBwYXJhbSBtaXhlZCAkdXJsICAgIFVSTCB3aGVyZSB3ZSBhcmUgbWFraW5nIHRoZSByZXF1ZXN0IHRvCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGRhdGEgICBEYXRhIHRoYXQgaXMgdXNlZCB0byBtYWtlIHRoZSByZXF1ZXN0CiAgICAgKiBAYWNjZXNzIHByaXZhdGUKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gcGF0Y2goJHVybCwgJG9hdXRoLCAkZGF0YSkgewogICAgICAgICR1cmwgPSAkdGhpcy0+X2FkZFBhcmFtZXRlcnNUb1VybCgkdXJsLCAkb2F1dGgpOwogICAgICAgICRoYW5kbGUgPSBjdXJsX2luaXQoJHVybCk7CiAgICAgICAgY3VybF9zZXRvcHQoJGhhbmRsZSwgQ1VSTE9QVF9DVVNUT01SRVFVRVNULCAnUEFUQ0gnKTsKICAgICAgICBjdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX1BPU1RGSUVMRFMsIGpzb25fZW5jb2RlKCRkYXRhKSk7CiAgICAgICAgJHJlc3AgPSAkdGhpcy0+X3NlbmRSZXF1ZXN0KCRoYW5kbGUsIGFycmF5KCdFeHBlY3Q6JywgJ0NvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbicpKTsKICAgICAgICByZXR1cm4gJHJlc3A7CiAgICB9CgogICAgLyoqCiAgICAgKiBwb3N0CiAgICAgKgogICAgICogUHJlcGFyZSBhbiBPQXV0aCBwb3N0IG1ldGhvZC4KICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJHVybCAgICBVUkwgd2hlcmUgd2UgYXJlIG1ha2luZyB0aGUgcmVxdWVzdCB0bwogICAgICogQHBhcmFtIG1peGVkICRkYXRhICAgRGF0YSB0aGF0IGlzIHVzZWQgdG8gbWFrZSB0aGUgcmVxdWVzdAogICAgICogQGFjY2VzcyBwcml2YXRlCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIHBvc3QoJHVybCwgJG9hdXRoKSB7CiAgICAgICAgJGhhbmRsZSA9IGN1cmxfaW5pdCgkdXJsKTsKICAgICAgICAkcG9zdERhdGEgPSAkdGhpcy0+YnVpbGREYXRhKCRvYXV0aCk7CiAgICAgICAgY3VybF9zZXRvcHQoJGhhbmRsZSwgQ1VSTE9QVF9QT1NULCB0cnVlKTsKICAgICAgICBjdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX1BPU1RGSUVMRFMsICRwb3N0RGF0YSk7CiAgICAgICAgJHJlc3AgPSAkdGhpcy0+X3NlbmRSZXF1ZXN0KCRoYW5kbGUpOwogICAgICAgIHJldHVybiAkcmVzcDsKICAgIH0KCiAgICAvKioKICAgICAqIGRlbGV0ZQogICAgICoKICAgICAqIE1ha2VzIGEgREVMRVRFIHJlcXVlc3QKICAgICAqIEBwYXJhbSBtaXhlZCAkdXJsICAgICAgICBVUkwgd2hlcmUgd2UgYXJlIG1ha2luZyB0aGUgcmVxdWVzdCB0bwogICAgICogQHBhcmFtIG1peGVkICRkYXRhICAgICAgIERhdGEgdGhhdCBpcyB1c2VkIGluIHRoZSByZXF1ZXN0CiAgICAgKiBAYWNjZXNzIHByb3RlY3RlZAogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBkZWxldGUoJHVybCwgJGRhdGEpIHsKICAgICAgICAkdXJsID0gJHRoaXMtPl9hZGRQYXJhbWV0ZXJzVG9VcmwoJHVybCwgJGRhdGEpOwogICAgICAgICRoYW5kbGUgPSBjdXJsX2luaXQoJHVybCk7CiAgICAgICAgY3VybF9zZXRvcHQoJGhhbmRsZSwgQ1VSTE9QVF9DVVNUT01SRVFVRVNULCAnREVMRVRFJyk7CiAgICAgICAgJHJlc3AgPSAkdGhpcy0+X3NlbmRSZXF1ZXN0KCRoYW5kbGUpOwogICAgICAgIHJldHVybiAkcmVzcDsKICAgIH0KCiAgICAvKioKICAgICAqIGJ1aWxkRGF0YQogICAgICoKICAgICAqIENyZWF0ZXMgYSBzdHJpbmcgb2YgZGF0YSBmb3IgZWl0aGVyIHBvc3Qgb3IgZ2V0IHJlcXVlc3RzLgogICAgICogQHBhcmFtIG1peGVkICRkYXRhICAgICAgIEFycmF5IG9mIGtleSB2YWx1ZSBwYWlycwogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYnVpbGREYXRhKCRkYXRhKSB7CiAgICAgICAga3NvcnQoJGRhdGEpOwogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgIGZvcmVhY2ggKCRkYXRhIGFzICRrZXkgPT4gJHZhbHVlKSB7CiAgICAgICAgICAgICRwYXJhbXNbXSA9ICRrZXkuJz0nLiR0aGlzLT5lbmNvZGUoJHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGltcGxvZGUoJyYnLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIF9zZW5kUmVxdWVzdAogICAgICoKICAgICAqIEFjdHVhbGx5IG1ha2VzIGEgcmVxdWVzdC4KICAgICAqIEBwYXJhbSBtaXhlZCAkaGFuZGxlICAgICBDdXJsIGhhbmRsZQogICAgICogQHBhcmFtIGFycmF5ICRoZWFkZXJzICAgIEFkZGl0aW9uYWwgaGVhZGVycyBuZWVkZWQgZm9yIHJlcXVlc3QKICAgICAqIEBhY2Nlc3MgcHJpdmF0ZQogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gX3NlbmRSZXF1ZXN0KCRoYW5kbGUsICRoZWFkZXJzID0gYXJyYXkoJ0V4cGVjdDonKSkgewogICAgICAgIGN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIHRydWUpOwogICAgICAgIGN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfSEVBREVSLCB0cnVlKTsKICAgICAgICBjdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX0hUVFBIRUFERVIsICRoZWFkZXJzKTsKICAgICAgICBjdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX1VTRVJBR0VOVCwgJHRoaXMtPnVzZXJBZ2VudCk7CiAgICAgICAgY3VybF9zZXRvcHQoJGhhbmRsZSwgQ1VSTE9QVF9TU0xfVkVSSUZZUEVFUiwgRkFMU0UpOwogICAgICAgIGN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfVkVSQk9TRSwgRkFMU0UpOwogICAgICAgIGN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfQ09OTkVDVFRJTUVPVVQsIDEwKTsKICAgICAgICBjdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX1RJTUVPVVQsIDkwKTsKICAgICAgICAkcmVzcCA9IGN1cmxfZXhlYygkaGFuZGxlKTsKICAgICAgICBpZiAoJHJlc3ApIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBNTV9DdXJsUmVzcG9uc2UoJHJlc3ApOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+ZXJyb3IgPSBjdXJsX2Vycm5vKCRoYW5kbGUpLicgLSAnLmN1cmxfZXJyb3IoJGhhbmRsZSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIC8qKgogICAgICogcHJlcGFyZVJlcXVlc3QKICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJG1ldGhvZCAgICAgSFRUUCBtZXRob2QKICAgICAqIEBwYXJhbSBtaXhlZCAkdXJsICAgICAgICBVUkwgZm9yIHRoZSByZXF1ZXN0CiAgICAgKiBAcGFyYW0gbWl4ZWQgJGRhdGEgICAgICAgVGhlIGRhdGEgdG8gZ2VuZXJhdGUgb2F1dGggZGF0YSBhbmQgYmUgc2lnbmVkCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiB2b2lkICAgICAgICAgICAgIFRoZSBkYXRhLCB3aXRoIGFsbCBpdHMgT0F1dGggdmFyaWFibGVzIGFuZCBzaWduYXR1cmUKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHByZXBhcmVSZXF1ZXN0KCRtZXRob2QsICR1cmwsICRkYXRhKSB7CiAgICAgICAgJGRhdGEgPSAkdGhpcy0+bWVyZ2VPQXV0aERhdGEoJGRhdGEpOwogICAgICAgICRkYXRhID0gJHRoaXMtPnNpZ25SZXF1ZXN0KCRtZXRob2QsICR1cmwsICRkYXRhKTsKICAgICAgICByZXR1cm4gJGRhdGE7CiAgICB9CgogICAgLyoqCiAgICAgKiBwYXJzZVJlc3BvbnNlCiAgICAgKgogICAgICogUGFyc2VzIHRoZSBib2R5IG9mIHRoZSByZXNwb25zZSBpbnRvIGFuIGFycmF5CiAgICAgKiBAcGFyYW0gbWl4ZWQgJHN0cmluZyAgICAgVGhlIGJvZHkgb2YgYSByZXNwb25zZQogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gcGFyc2VSZXNwb25zZSgkcmVzcCkgewogICAgICAgICRkYXRhID0gYXJyYXkoKTsKCiAgICAgICAgaWYgKCEkcmVzcCkgeyAgICAgICByZXR1cm4gJGRhdGE7IH0KICAgICAgICBpZiAoZW1wdHkoJHJlc3ApKSB7IHJldHVybiAkZGF0YTsgfQogICAgICAgIGlmIChlbXB0eSgkcmVzcC0+Ym9keSkpIHsgcmV0dXJuICRkYXRhOyB9CgogICAgICAgIHN3aXRjaCAoJHRoaXMtPmZvcm1hdCkgewogICAgICAgIGNhc2UgJ2pzb24nOgogICAgICAgICAgICAkZGF0YSA9IGpzb25fZGVjb2RlKCRyZXNwLT5ib2R5KTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgcGFyc2Vfc3RyKCRyZXNwLT5ib2R5LCAkZGF0YSk7CiAgICAgICAgfQogICAgICAgICR0aGlzLT5wYXJzZUFzRXJyb3IoJGRhdGEpOwogICAgICAgIHJldHVybiAkZGF0YTsKICAgIH0KCn0K', 0, '2018-11-21 06:38:53'),
(77, 'smarttag', 'Y2xhc3MgTU1fU21hcnRUYWcgZXh0ZW5kcyBNTV9FbnRpdHkKewoJcHJpdmF0ZSAkbmFtZTsKCXByaXZhdGUgJGdyb3VwSWQ7CgkKCXByb3RlY3RlZCBmdW5jdGlvbiBnZXREYXRhKCkgewoJCS8vIGRvIG5vdGhpbmcKCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNvbW1pdERhdGEoKSB7CgkJLy8gZG8gbm90aGluZwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCiAJewogCQl0cnkgCiAJCXsKCSAJCSR0aGlzLT5uYW1lID0gJGRhdGEtPm5hbWU7CgkgCQkkdGhpcy0+Z3JvdXBJZCA9ICRkYXRhLT5ncm91cF9pZDsKCSAJCQoJIAkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUh0bWwoKQogCXsKIAkJJGZpbGVOYW1lID0gTU1fVEVNUExBVEVTX1VSTC4ic21hcnR0YWdzLyI7CiAJCQogCQkkYXJyID0gZXhwbG9kZSgiXyIsICR0aGlzLT5uYW1lKTsKIAkJCiAJCWZvcigkaSA9IDE7ICRpIDwgY291bnQoJGFycik7ICRpKyspIAogCQl7CiAJCQkkZmlsZU5hbWUgLj0gc3RydG9sb3dlcigkYXJyWyRpXSk7CiAJCQkKIAkJCWlmKCRpID09IGNvdW50KCRhcnIpIC0gMSkgewogCQkJCSRmaWxlTmFtZSAuPSAiLnBocD9xPSIuTU1fVXRpbHM6OmNyZWF0ZVJhbmRvbVN0cmluZygxMCk7CiAJCQl9CiAJCQllbHNlIHsKIAkJCQkkZmlsZU5hbWUgLj0gIi8iOwogCQkJfQogCQl9CiAJCQogCQkkaHRtbCA9ICI8ZGl2IGlkPVwibW0tc21hcnR0YWciLiR0aGlzLT5pZC4iXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOjZweDsgZm9udC1zaXplOiAxMXB4OyBjdXJzb3I6cG9pbnRlcjtcIiBvbmNsaWNrPVwic3RsX2pzLnNtYXJ0VGFnQ2xpY2tIYW5kbGVyKCciLiRmaWxlTmFtZS4iJyk7XCI+IjsKIAkJJGh0bWwgLj0gIlsiLiR0aGlzLT5uYW1lLiJdIjsKIAkJJGh0bWwgLj0gIjwvZGl2PiI7CgkJCiAJCXJldHVybiAkaHRtbDsKIAl9CiAJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5uYW1lOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIGdldEdyb3VwSWQoKQoJewoJCXJldHVybiAkdGhpcy0+Z3JvdXBJZDsKCX0KIAkKfQo=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(78, 'scheduledpaymentservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fU2NoZWR1bGVkUGF5bWVudFNlcnZpY2UgaW1wbGVtZW50cyBjb21tb24gZnVuY3Rpb25hbGl0eSB1dGlsaXplZCBieSBhbGwgcGF5bWVudCBzZXJ2aWNlcyB0aGF0IHV0aWxpemUgdGhlIE1lbWJlck1vdXNlIHNjaGVkdWxlci4KICovCmFic3RyYWN0IGNsYXNzIE1NX1NjaGVkdWxlZFBheW1lbnRTZXJ2aWNlIGV4dGVuZHMgTU1fUGF5bWVudFNlcnZpY2UKewkKCS8qKgoJICogSXRlcmF0ZXMgb3ZlciBhbiBhcnJheSBvZiBvcmRlciBpdGVtcyBhbmQgZm9yIGVhY2ggcmVjdXJyaW5nIHByb2R1Y3QgY3JlYXRlcyBhIHNjaGVkdWxlIHVzaW5nIHRoZSBNZW1iZXJNb3VzZSBzY2hlZHVsaW5nIGZyYW1ld29yawoJICoKCSAqIEBwYXJhbSBhcnJheSAkcHJvZHVjdEl0ZW1zIEFuIGFycmF5IG9mIHByb2R1Y3RzIHRvIGl0ZXJhdGUgdGhyb3VnaCBhbmQgY3JlYXRlIHNjaGVkdWxlcyBmb3IgaWYgbmVjZXNzYXJ5CgkgKgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBlcnJvcgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGVzRnJvbVByb2R1Y3RzKCRwcm9kdWN0SXRlbXMpCgl7CgkJJGNyZWF0ZWRTdWJzY3JpcHRpb25zID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkcHJvZHVjdEl0ZW1zIGFzICRhUHJvZHVjdEl0ZW0pCgkJewoJCQkkdHJpYWxEdXJhdGlvbiA9ICRhUHJvZHVjdEl0ZW0tPmdldFRyaWFsRHVyYXRpb24oKTsKCQkJJHRyaWFsRnJlcXVlbmN5ID0gJGFQcm9kdWN0SXRlbS0+Z2V0VHJpYWxGcmVxdWVuY3koKTsKCQkJaWYgKCRhUHJvZHVjdEl0ZW0tPmlzUmVjdXJyaW5nKCkgfHwgKCFlbXB0eSgkdHJpYWxEdXJhdGlvbikpKQoJCQl7CgkJCQkvL3RoaXMgc2VjdGlvbiBpcyBhbHdheXMgaGFuZGxpbmcgdGhlIDJuZCBwYXltZW50LiBJZiB0aGVyZSBpcyBhIHRyaWFsLCB0aGlzIG9jY3VycyBhZnRlciB0aGUgdHJpYWwgcGVyaW9kLCBpZiBub3QgYWZ0ZXIgYSByZWd1bGFyIHBlcmlvZCBpbnRlcnZhbAoJCQkJaWYgKCFlbXB0eSgkdHJpYWxEdXJhdGlvbikgJiYgaXNfbnVtZXJpYygkdHJpYWxEdXJhdGlvbikpCgkJCQl7CgkJCQkJJG9mZnNldCA9ICIrIHskYVByb2R1Y3RJdGVtLT5nZXRUcmlhbER1cmF0aW9uKCl9IHskYVByb2R1Y3RJdGVtLT5nZXRUcmlhbEZyZXF1ZW5jeSgpfSI7CgkJCQkJJG5leHRQYXltZW50TnVtYmVyID0gMTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkb2Zmc2V0ID0gIisgeyRhUHJvZHVjdEl0ZW0tPmdldFJlYmlsbFBlcmlvZCgpfSB7JGFQcm9kdWN0SXRlbS0+Z2V0UmViaWxsRnJlcXVlbmN5KCl9IjsKCQkJCQkkbmV4dFBheW1lbnROdW1iZXIgPSAyOwoJCQkJfQoJCQkJJG5leHRTY2hlZHVsZWREYXRlID0gc3RydG90aW1lKCRvZmZzZXQpOwoJCQkJJHNjaGVkdWxlclJlc3BvbnNlID0gJHRoaXMtPnNjaGVkdWxlU3Vic2NyaXB0aW9uUGF5bWVudCgkYVByb2R1Y3RJdGVtLCRuZXh0U2NoZWR1bGVkRGF0ZSwkbmV4dFBheW1lbnROdW1iZXIpOwoJCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRzY2hlZHVsZXJSZXNwb25zZSkpCgkJCQl7CgkJCQkJJGVycm9yID0gIWVtcHR5KCRzY2hlZHVsZXJSZXNwb25zZS0+bWVzc2FnZSk/JHNjaGVkdWxlclJlc3BvbnNlLT5tZXNzYWdlOiJVbmtub3duIGVycm9yIjsKCQkJCQkkZGV0YWlscyA9IChlbXB0eSgkZXJyb3IpKT8iIjoiOiB7JGVycm9yfSI7CgkJCgkJCQkJLy9jYW5jZWwgYW55IGFscmVhZHkgY3JlYXRlZCBzdWJzY3JpcHRpb25zCgkJCQkJJHRoaXMtPmNhbmNlbFNjaGVkdWxlZFN1YnNjcmlwdGlvbnMoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKTsKCQkJCQkvL1RPRE86IGhhdmUgY2FuY2VsIGNoYW5nZSB0aGUgaXRlbSBzdGF0dXMgYmFjawoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIHRyYW5zYWN0aW9uOiBJbnRlcm5hbCBFcnJvcnskZGV0YWlsc30iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCQkkYVByb2R1Y3RJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJCQkkYVByb2R1Y3RJdGVtLT5jb21taXREYXRhKCk7CgkJCQkkY3JlYXRlZFN1YnNjcmlwdGlvbnNbXSA9ICRhUHJvZHVjdEl0ZW07CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRjcmVhdGVkU3Vic2NyaXB0aW9ucyk7Cgl9CgkKCQoJLyoqCgkgKiBCYXNlZCBvbiB0aGUgc3RhdHVzIG9mIGFuIGV4aXN0aW5nIHN1YnNjcmlwdGlvbiBhbmQgdGhlIG51bWJlciBvZiBwYXltZW50cyBhbHJlYWR5IG1hZGUsIHRoaXMgZnVuY3Rpb24gZGV0ZXJtaW5lcyBpZiBhbm90aGVyCgkgKiBwYXltZW50IG5lZWRzIHRvIGJlIHNjaGVkdWxlZAoJICoKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gVGhlIGl0ZW0gKHJlcHJlc2VudGluZyBhIHByb2R1Y3QpIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgY2hhcmdlCgkgKiBAcGFyYW0gTU1fVXNlciBUaGUgY3VzdG9tZXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBzdWJzY3JpcHRpb24KCSAqIEBwYXJhbSBUaGUgbnVtYmVyIG9mIHRoZSBjdXJyZW50IHJlYmlsbCBwYXltZW50CgkgKgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBlcnJvcgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2NoZWR1bGVOZXh0UGF5bWVudEZvckV4aXN0aW5nU3Vic2NyaXB0aW9uKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCBNTV9Vc2VyICRjdXN0b21lciwgJGN1cnJlbnRSZWJpbGxOdW1iZXIpCgl7CgkJLy9pZiB0aGlzIGlzIG5vdCBhIHJlY3VycmluZyBwYXltZW50LCB0aGVuIHdlIGFyZSBkb25lCgkJaWYgKCEkb3JkZXJJdGVtLT5pc1JlY3VycmluZygpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJfQoJCQoJCS8vdGhlIHN1YnNjcmlwdGlvbiBpcyByZWN1cnJpbmcsIGNoZWNrIHRoZSBzdGF0dXMgYW5kIHVwZGF0ZSBpZiB3ZSdyZSBkb25lCgkJJG1heFJlYmlsbHMgPSBpbnR2YWwoJG9yZGVySXRlbS0+Z2V0TWF4UmViaWxscygpKTsKCQkKCQlpZiAoKCRtYXhSZWJpbGxzID4gMCkgJiYgKCRjdXJyZW50UmViaWxsTnVtYmVyID49ICRtYXhSZWJpbGxzKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NPTVBMRVRFKTsKCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQl9CgkJZWxzZSBpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCXsKCQkJLy9yZXN0YXJ0aW5nIGEgZmFpbGVkIHN1YnNjcmlwdGlvbgoJCQkkdGhpcy0+Y2FuY2VsU2NoZWR1bGVkU3Vic2NyaXB0aW9ucygkb3JkZXJJdGVtKTsgLy9jYW5jZWwgYWxsIHRoZSBxdWV1ZWQgcmV0cmllcyBmb3IgdGhlIGZhaWxlZCBiaWxsaW5nCgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKTsKCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCQlNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXJJdGVtcygkY3VzdG9tZXIsIGFycmF5KCRvcmRlckl0ZW0pKTsKCQl9CgkJCgkJLy9ub3cgc2NoZWR1bGUgdGhlIG5leHQgY2hhcmdlLCBpZiBuZWNlc3NhcnkKCQkkbmV4dFBheW1lbnROdW1iZXIgPSArKyRjdXJyZW50UmViaWxsTnVtYmVyOwoJCSRuZXh0UGF5bWVudERhdGUgPSBkYXRlKCJZLW0tZCBIOmkiLHN0cnRvdGltZSgiKyB7JG9yZGVySXRlbS0+Z2V0UmViaWxsUGVyaW9kKCl9IHskb3JkZXJJdGVtLT5nZXRSZWJpbGxGcmVxdWVuY3koKX0iKSk7CgkJJHRoaXMtPnNjaGVkdWxlU3Vic2NyaXB0aW9uUGF5bWVudCgkb3JkZXJJdGVtLCAkbmV4dFBheW1lbnREYXRlLCRuZXh0UGF5bWVudE51bWJlcik7CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBTY2hlZHVsZXMgYSBmdXR1cmUgcGF5bWVudCB1c2luZyB0aGUgTWVtYmVyTW91c2Ugc2NoZWR1bGluZyBmcmFtZXdvcmsKCSAqCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtIFRoZSBpdGVtIChyZXByZXNlbnRpbmcgYSBwcm9kdWN0KSB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIGNoYXJnZQoJICogQHBhcmFtIHN0cmluZyAkc2NoZWR1bGVEYXRlIFRoZSBkYXRlIHRvIHNjaGVkdWxlIHRoZSBjaGFyZ2UgdG8gb2NjdXIgb24uIE11c3QgYmUgYSBHTVQgZGF0ZSBpbiBhIGZvcm1hdCBwYXJzZWFibGUgYnkgdGhlIHBocCBzdHJ0b3RpbWUgZnVuY3Rpb24uIEluY2x1ZGluZyBhIHRpbWUgaXMgb2sgdG9vLCBhbHRob3VnaCB0aW1lciByZXNvbHV0aW9uIGlzIGNvbnRyb2xsZWQgYnkgdGhlIHNlcnZlcgoJICogQHBhcmFtIGludCAkcGF5bWVudE51bWJlciBEZXNpZ25hdGVzIHdoaWNoIHBheW1lbnQgdGhpcyBpcy4gVGhpcyBpbmZvcm1hdGlvbiBpcyBzdG9yZWQgaW4gdGhlIHNjaGVkdWxlZCBldmVudAoJICoKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGVycm9yCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBzY2hlZHVsZVN1YnNjcmlwdGlvblBheW1lbnQoTU1fT3JkZXJJdGVtICRhUHJvZHVjdEl0ZW0sICRzY2hlZHVsZURhdGUsICRwYXltZW50TnVtYmVyPTIpCgl7CgkJLy9UT0RPOiBjaGVjayBhZ2FpbnN0IHRvdGFsIHBheW1lbnRzPwoJCSRzY2hlZHVsZWRQYXltZW50ID0gbmV3IE1NX1NjaGVkdWxlZFBheW1lbnRFdmVudCgpOwoJCSRzY2hlZHVsZWRQYXltZW50LT5zZXRTY2hlZHVsZWREYXRlKCRzY2hlZHVsZURhdGUpOwoJCSRzY2hlZHVsZWRQYXltZW50LT5zZXRQYXltZW50TnVtYmVyKCRwYXltZW50TnVtYmVyKTsKCQkkc2NoZWR1bGVkUGF5bWVudC0+c2V0T3JkZXJJdGVtSWQoJGFQcm9kdWN0SXRlbS0+Z2V0SWQoKSk7CgkJJHVzZXJJZCA9IE1NX09yZGVyOjpnZXRVc2VySWRCeU9yZGVySWQoJGFQcm9kdWN0SXRlbS0+Z2V0T3JkZXJJZCgpKTsKCQkkc2NoZWR1bGVkUGF5bWVudC0+c2V0VXNlcklkKCR1c2VySWQpOwoJCSRzY2hlZHVsZWRQYXltZW50LT5zZXRQYXltZW50U2VydmljZUlkKCR0aGlzLT5pZCk7CgkJLy9UT0RPOiB1cGRhdGUgY29tbWl0IHRvIHJldHJ5IGlmIHNjaGVkdWxpbmcgZmFpbHMKCQlyZXR1cm4gJHNjaGVkdWxlZFBheW1lbnQtPmNvbW1pdERhdGEodHJ1ZSk7Cgl9CgkKCQoJLyoqCgkgKiBSZXNwb25kcyB0byBwYXltZW50IGV2ZW50IG5vdGlmaWNhdGlvbnMgc2VudCBmcm9tIHRoZSBNZW1iZXJNb3VzZSBzY2hlZHVsZXIKCSAqCgkgKiBAcGFyYW0gTU1fU2NoZWR1bGVkUGF5bWVudEV2ZW50ICRwYXltZW50RXZlbnQgY29udGFpbnMgcGF5bWVudCBldmVudCBpbmZvcm1hdGlvbgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRlZCBzdWNjZXNzZnVsIHJlY2VpcHQgb25seSwgbm90IHRoZSBzdGF0dXMgb2YgdGhlIHRyaWdnZXJlZCBvcGVyYXRpb24KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NTY2hlZHVsZWRQYXltZW50RXZlbnQoTU1fU2NoZWR1bGVkUGF5bWVudEV2ZW50ICRwYXltZW50RXZlbnQpCgl7CgkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oJHBheW1lbnRFdmVudC0+Z2V0T3JkZXJJdGVtSWQoKSk7CgkJaWYgKCEkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkludmFsaWQgU3Vic2NyaXB0aW9uIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGN1cnJlbnRSZWJpbGxOdW1iZXIgPSBpbnR2YWwoJHBheW1lbnRFdmVudC0+Z2V0UGF5bWVudE51bWJlcigpKTsKCQkkcmViaWxsUmVzcG9uc2UgPSAkdGhpcy0+ZXhlY3V0ZVN1YnNjcmlwdGlvblBheW1lbnQoJG9yZGVySXRlbSwkY3VycmVudFJlYmlsbE51bWJlcik7CgkJCgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzU3VjY2VzcygkcmViaWxsUmVzcG9uc2UpKQoJCXsKCQkJJHBheW1lbnRFdmVudC0+c2V0U3RhdHVzKE1NX1NjaGVkdWxlZEV2ZW50OjokRVZFTlRfUFJPQ0VTU0VEKTsKCQkJJHBheW1lbnRFdmVudC0+c2V0UHJvY2Vzc2VkRGF0ZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSk7CgkJCSRwYXltZW50RXZlbnQtPmNvbW1pdERhdGEoZmFsc2UpOwoJCX0KCQllbHNlIGlmICgkcGF5bWVudEV2ZW50LT5nZXRCaWxsaW5nU3RhdHVzKCkgPj0gTU1fU2NoZWR1bGVkUGF5bWVudEV2ZW50OjokVEhJUkRfUkVCSUxMX0ZBSUxFRCkKCQl7CgkJCS8vY2FuY2VsIGFmdGVyIDNyZCBmYWlsZWQgYmlsbGluZyBhdHRlbXB0CgkJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRwYXltZW50RXZlbnQtPmdldE9yZGVySXRlbUlkKCkpOwoJCQkkdGhpcy0+Y2FuY2VsU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0pOwoJCQlNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpyZXZva2VBY2Nlc3NGb3JPcmRlckl0ZW0oJG9yZGVySXRlbSk7CgkJfQoJCXJldHVybiAkcmViaWxsUmVzcG9uc2U7Cgl9CgkKCQoJLyoqCgkgKiBDYW5jZWxzIHRoZSB1c2VyJ3Mgc3Vic2NyaXB0aW9uLiBXaXRoIFN0cmlwZSwgdGhpcyBzaW1wbHkgbWVhbnMgY2FuY2VsaW5nIGFsbCBvZiB0aGUgc2NoZWR1bGVkIHBheW1lbnQgZXZlbnRzIGZvciB0aGlzIG9yZGVyIGl0ZW0KCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmNhbmNlbFN1YnNjcmlwdGlvbigpCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgcHJvZHVjdCBpdGVtIHdob3NlIHN1YnNjcmlwdGlvbiBpcyBiZWluZyBjYW5jZWxsZWQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gY2FuY2VsU3Vic2NyaXB0aW9uKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtKSAKCXsKCQkvL2ZpcnN0LCBtYWtlIHN1cmUgdGhpcyBpcyBhIHByb2R1Y3QuIElmIG5vdCwgc29tZXRoaW5nIGdvdCBtZXNzZWQgdXAgYWJvdmUKCQlpZiAoJG9yZGVySXRlbS0+Z2V0SXRlbVR5cGUoKSAhPSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQXR0ZW1wdGVkIHRvIGNhbmNlbCBhIG5vbi1wcm9kdWN0IGl0ZW0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vdGhlbiBtYWtlIHN1cmUgaXRzIG5vdCBhbHJlYWR5IGNhbmNlbGxlZAoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb246IFRoZSBzdWJzY3JpcHRpb24gaGFzIGFscmVhZHkgYmVlbiBjYW5jZWxsZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSR0aGlzLT5jYW5jZWxTY2hlZHVsZWRTdWJzY3JpcHRpb25zKGFycmF5KCRvcmRlckl0ZW0pKTsKCQkKCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpOwoJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIENhbmNlbCBzdWJzY3JpcHRpb25zIHRoYXQgaGF2ZSBiZWVuIGNyZWF0ZWQuIE5PVEU6IFRoaXMgbWV0aG9kIGlzIG5vdCB0aGUgc2FtZSBhcyBjYW5jZWxTdWJzY3JpcHRpb24uIFRoaXMgbWV0aG9kIGlzIG9ubHkgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbnRlcm5hbGx5CgkgKiB0byBkZWxldGUgc3Vic2NyaXB0aW9ucyB3aGVuIHRoZSBpbml0aWFsIG9yZGVyIGZhaWxzCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkc3Vic2NyaXB0aW9uSXRlbXMgQW4gYXJyYXkgb2YgTU1fT3JkZXJJdGVtcyByZXByZXNlbnRpbmcgcHJvZHVjdHMgaGF2aW5nIHN1YnNjcmlwdGlvbnMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNhbmNlbFNjaGVkdWxlZFN1YnNjcmlwdGlvbnMoJHN1YnNjcmlwdGlvbkl0ZW1zLCAkY2xlYXJTdGF0dXM9dHJ1ZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFpc19hcnJheSgkc3Vic2NyaXB0aW9uSXRlbXMpKQoJCXsKCQkJaWYgKCRzdWJzY3JpcHRpb25JdGVtcyBpbnN0YW5jZW9mIE1NX09yZGVySXRlbSkKCQkJewoJCQkJJHN1YnNjcmlwdGlvbkl0ZW1zID0gYXJyYXkoJHN1YnNjcmlwdGlvbkl0ZW1zKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjYW5jZWxpbmcgc2NoZWR1bGVkIHN1YnNjcmlwdGlvbiBwYXltZW50czogSW52YWxpZCBwYXJhbWV0ZXJzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkkaGFkRXJyb3IgPSBmYWxzZTsKCQkkZXJyb3JNZXNzYWdlID0gIiI7CgkJZm9yZWFjaCAoJHN1YnNjcmlwdGlvbkl0ZW1zIGFzICRzdWJzY3JpcHRpb25JdGVtKQoJCXsKCQkJLy9ub3cgd2lwZSBhbnkgc2NoZWR1bGVkIHBheW1lbnQgZXZlbnRzIGZvciB0aGlzIGl0ZW0gZnJvbSB0aGUgZGIKCQkJJHNjaGVkdWxlZFBheW1lbnRzU1FMID0gIlNFTEVDVCBzcC5pZCBGUk9NICIuTU1fVEFCTEVfU0NIRURVTEVEX1BBWU1FTlRTLiIgc3AgTEVGVCBKT0lOICIuTU1fVEFCTEVfU0NIRURVTEVEX0VWRU5UUy4iIHNlIE9OIChzcC5pZD1zZS5pZCkgIi4KCQkJCQkJCQkJIldIRVJFIHNwLm9yZGVyX2l0ZW1faWQ9JXMgQU5EIHNwLnBheW1lbnRfc2VydmljZV9pZD0lcyBBTkQgc2Uuc3RhdHVzIDw+ICVzIjsKCQkJJHNjaGVkdWxlZFBheW1lbnRJZHMgPSAkd3BkYi0+Z2V0X2NvbCgkd3BkYi0+cHJlcGFyZSgkc2NoZWR1bGVkUGF5bWVudHNTUUwsJHN1YnNjcmlwdGlvbkl0ZW0tPmdldElkKCksICR0aGlzLT5nZXRJZCgpLCBNTV9TY2hlZHVsZWRFdmVudDo6JEVWRU5UX1BST0NFU1NFRCkpOwoJCQlpZiAoJHNjaGVkdWxlZFBheW1lbnRJZHMpCgkJCXsKCQkJCWZvcmVhY2ggKCRzY2hlZHVsZWRQYXltZW50SWRzIGFzICRzY2hlZHVsZWRQYXltZW50SWQpCgkJCQl7CgkJCQkJJGV2ZW50ID0gbmV3IE1NX1NjaGVkdWxlZFBheW1lbnRFdmVudCgkc2NoZWR1bGVkUGF5bWVudElkKTsKCQkJCQkkdGhpc1Jlc3BvbnNlID0gJGV2ZW50LT5kZWxldGUoKTsKCQkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHRoaXNSZXNwb25zZSkpCgkJCQkJewoJCQkJCQkkaGFkRXJyb3IgPSB0cnVlOwoJCQkJCQkkZXJyb3JNZXNzYWdlLj0ieyR0aGlzUmVzcG9uc2UtPm1lc3NhZ2V9XG4iOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkkc3Vic2NyaXB0aW9uSXRlbS0+c2V0U3RhdHVzKDApOyAvLyB0aGlzIHJlc2V0cyB0aGUgc3RhdHVzIG9uIHRoZSBvcmRlciBpdGVtCgkJCSRzdWJzY3JpcHRpb25JdGVtLT5jb21taXREYXRhKCk7CgkJfQoJCQoJCWlmICgkaGFkRXJyb3IpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlcnJvck1lc3NhZ2UsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIFJlc3VtZSBhIHN1YnNjcmlwdGlvbiB3aGVyZSBhIHJlYmlsbCBmYWlsZWQKCSAqIAoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiByZXN1bWVTdWJzY3JpcHRpb24oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0pCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRwYXltZW50TnVtYmVyID0gMTsKCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCXsKCQkJLy9jYWxjdWxhdGUgaG93IG1hbnkgcGF5bWVudHMgaGF2ZSBiZWVuIG1hZGUgdG93YXJkcyB0aGlzIHN1YnNjcmlwdGlvbgoJCQkkcGF5bWVudENhbGNTUUwgPSAiU0VMRUNUIENPVU5UKCopIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBXSEVSRSBvcmRlcl9pZD0lcyAiLgoJCQkJCQkJICAiQU5EIG9yZGVyX2l0ZW1faWQ9JXMgQU5EICgodHJhbnNhY3Rpb25fdHlwZT0lcykgT1IgKHRyYW5zYWN0aW9uX3R5cGU9JXMpKSI7CgkJCSRwYXltZW50TnVtYmVyID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHBheW1lbnRDYWxjU1FMLCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSxNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UKSk7CgkJfQoJCXJldHVybiAkdGhpcy0+ZXhlY3V0ZVN1YnNjcmlwdGlvblBheW1lbnQoJG9yZGVySXRlbSwrKyRwYXltZW50TnVtYmVyKTsKCX0KCQoJCgkvKioKCSAqIE1vZGlmaWVzIHRoZSBuZXh0IGJpbGxpbmcgZGF0ZSBmb3IgYSBzdWJzY3JpcHRpb24uIEFjY2VwdHMgYW4gb3JkZXIgaXRlbSBhbmQgYSBuZXcgZGF0ZSB0byB1c2UgYXQgdGhlIG5leHQgYmlsbGluZyBkYXRlLgoJICogVGhlIGRhdGUgY2FuIGJlIGVpdGhlciBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgYSBkYXRlIGluIGEgZm9ybWF0IGFjY2VwdGFibGUgdG8gc3RydG90aW1lKCkgb3IgYSB0aW1lc3RhbXAKCSAqIAoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtIFRoZSBvcmRlciBpdGVtIHRvIG1vZGlmeSB0aGUgc2NoZWR1bGUgb2YKCSAqIEBwYXJhbSBzdHJpbmcgJG5ld0JpbGxEYXRlIFRoZSBuZXh0IGJpbGxpbmcgZGF0ZSwgaW4gZWl0aGVyIHN0cmluZyBmb3JtYXQgb3IgYXMgYSB1bml4IHRpbWVzdGFtcAoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1vZGlmeU5leHRCaWxsaW5nRGF0ZShNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSwgJG5ld0JpbGxEYXRlKQoJewoJCWlmICghJG9yZGVySXRlbS0+aXNSZWN1cnJpbmcoKSB8fCAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJPcmRlciBpcyBub3QgcmVjdXJyaW5nLCB0aGVyZSBpcyBubyBuZXh0IGJpbGwgZGF0ZSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHRpbWVzdGFtcCA9IGlzX2ludCgkbmV3QmlsbERhdGUpPyRuZXdCaWxsRGF0ZTpzdHJ0b3RpbWUoJG5ld0JpbGxEYXRlKTsKCQlpZiAoJHRpbWVzdGFtcCA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIHBhcnNpbmcgZGF0ZSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHNjaGVkdWxlZFBheW1lbnRFdmVudCA9IE1NX1NjaGVkdWxlZFBheW1lbnRFdmVudDo6ZmluZE5leHRTY2hlZHVsZWRFdmVudEJ5T3JkZXJJdGVtSWQoJG9yZGVySXRlbS0+Z2V0SWQoKSxmYWxzZSk7CgkJaWYgKCEkc2NoZWR1bGVkUGF5bWVudEV2ZW50LT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIk5leHQgYmlsbGluZyBkYXRlIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGdtdE5ld0JpbGxEYXRlID0gZ21kYXRlKCJZLW0tZCBIOmkiLCR0aW1lc3RhbXApOwoJCSRzY2hlZHVsZWRQYXltZW50RXZlbnQtPnNldFNjaGVkdWxlZERhdGUoJGdtdE5ld0JpbGxEYXRlKTsKCQkkc2NoZWR1bGVkUGF5bWVudEV2ZW50LT5zZXRTdGF0dXMoMCk7CgkJJHNjaGVkdWxlZFBheW1lbnRFdmVudC0+c2V0Rm9yY2VTdGF0dXNVcGRhdGUodHJ1ZSk7CgkJcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OnRyYW5zbGF0ZSgkc2NoZWR1bGVkUGF5bWVudEV2ZW50LT5jb21taXREYXRhKHRydWUpKTsJCgl9CiAgCn0=', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(79, 'icontactemailserviceprovider', 'Y2xhc3MgTU1fSUNvbnRhY3RFbWFpbFNlcnZpY2VQcm92aWRlciBleHRlbmRzIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXIgCnsKCQoJcHJpdmF0ZSAkdXNlcm5hbWU7Cglwcml2YXRlICRwYXNzd29yZDsKCXB1YmxpYyBzdGF0aWMgJEFQSV9LRVkgPSAiM05udWs0TXQ2c0ZUYkR6elJRZTZwaU42UzlxcTJUTFciOwoJCglwcml2YXRlICRhY2NvdW50X2lkOwoJcHJpdmF0ZSAkY2xpZW50X2ZvbGRlcl9pZDsKCQoJcHJpdmF0ZSAkaG9zdCA9ICJodHRwczovL2FwcC5pY29udGFjdC5jb20iOwoJCgkvKioKCSAqIFRoZSBpQ29udGFjdCBhcGkgcmVxdWlyZXMgYSB1c2VybmFtZSwgcGFzc3dvcmQsIGFuZCBhcHBJRCBrZXkgdG8gYXV0aCBhZ2FpbnN0IHRoZSBhcGksIHNvIHRoZXNlIGFyZSBwYXJhbWV0ZXJzIGZvciB0aGUgY29uc3RydWN0b3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwcm92aWRlcl9pbmZvKSAKCXsKCQlpZiAoaXNfb2JqZWN0KCRwcm92aWRlcl9pbmZvKSAmJiAoaXNzZXQoJHByb3ZpZGVyX2luZm8tPnVzZXJuYW1lKSkgJiYgIWVtcHR5KCRwcm92aWRlcl9pbmZvLT51c2VybmFtZSkKCQkJJiYgKGlzc2V0KCRwcm92aWRlcl9pbmZvLT5wYXNzd29yZCkpICYmICFlbXB0eSgkcHJvdmlkZXJfaW5mby0+cGFzc3dvcmQpKSAKCQl7CgkJCXBhcmVudDo6X19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pOwoJCQkkdGhpcy0+dXNlcm5hbWUgPSAkcHJvdmlkZXJfaW5mby0+dXNlcm5hbWU7CgkJCSR0aGlzLT5wYXNzd29yZCA9ICRwcm92aWRlcl9pbmZvLT5wYXNzd29yZDsKCQkJJGFkZGl0aW9uYWxfZGF0YSA9IChpc3NldCgkcHJvdmlkZXJfaW5mby0+YWRkaXRpb25hbF9kYXRhKSk/dW5zZXJpYWxpemUoJHByb3ZpZGVyX2luZm8tPmFkZGl0aW9uYWxfZGF0YSk6YXJyYXkoKTsKCQkJaWYgKGlzX2FycmF5KCRhZGRpdGlvbmFsX2RhdGEpICYmIGFycmF5X2tleV9leGlzdHMoImNsaWVudEZvbGRlcklkIiwgJGFkZGl0aW9uYWxfZGF0YSkpCgkJCXsKCQkJCSR0aGlzLT5zZXRDbGllbnRGb2xkZXJJZCgkYWRkaXRpb25hbF9kYXRhWydjbGllbnRGb2xkZXJJZCddKTsKCQkJfQoJCX0KCX0KCQoJLyoqCgkgKiAKCSAqIFJldHVybiB0aGUgbGlzdHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25maWd1cmVkIGFwaUtleSwga2V5ZWQgYnkgaWQgd2l0aCB0aGUgdmFsdWVzIGJlaW5nIGxpc3QgbmFtZXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyBsaXN0cyBhcyB0aGUgbWVzc2FnZSBvbiBzdWNjZXNzLCBhbiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBlcnJvciBzdGF0ZSBvdGhlcndpc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldExpc3RzKCkgCgl7CgkJJGxpc3RzID0gYXJyYXkoKTsKCQkkcmVzb3VyY2UgPSAiYy97JHRoaXMtPmNsaWVudF9mb2xkZXJfaWR9L2xpc3RzIjsKCQkkcmVzcG9uc2Vfb2JqID0gJHRoaXMtPmNhbGxJQ29udGFjdEFQSSgkcmVzb3VyY2UpOwoJCWlmICgkcmVzcG9uc2Vfb2JqLT50eXBlICE9IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUykKCQl7CgkJCXJldHVybiAkcmVzcG9uc2Vfb2JqOwoJCX0KCQkKCQlpZiAoIWlzc2V0KCRyZXNwb25zZV9vYmotPm1lc3NhZ2UtPmxpc3RzKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgbGlzdHMgZnJvbSBpQ29udGFjdCwgUGxlYXNlIHRyeSBhZ2FpbiBsYXRlciIpOwoJCX0KCQkKCQlmb3JlYWNoICgkcmVzcG9uc2Vfb2JqLT5tZXNzYWdlLT5saXN0cy0+bGlzdCBhcyAkbGlzdF9vYmopCgkJewoJCQkkbGlzdF9pZCA9IChTdHJpbmcpJGxpc3Rfb2JqLT5saXN0SWQ7CgkJCSRsaXN0X25hbWUgPSAoU3RyaW5nKSRsaXN0X29iai0+bmFtZTsKCQkJJGxpc3RzWyRsaXN0X2lkXSA9ICRsaXN0X25hbWU7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGxpc3RzKTsKCX0KCQoJLyoqCgkgKiBSZXR1cm4gYSBESFRNTC9KYXZhc2NyaXB0IGRpYWxvZyBjYXBhYmxlIG9mIGNvbGxlY3RpbmcgdGhlIG9wdGlvbnMgbmVlZGVkIHRvIGNvbmZpZ3VyZSB0aGUgcHJvdmlkZXIKCSAqIEByZXR1cm4gU3RyaW5nIHRoZSBtYXJrdXAgZm9yIHRoZSBvcHRpb25zIGRpYWxvZwoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyT3B0aW9uc0RpYWxvZygkcG9zdCkgCgl7CgkJaWYgKCFpc3NldCgkcG9zdFsnaWNvbnRhY3RfYWN0aW9uJ10pKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJGaXJzdE9wdGlvbnNEaWFsb2coJHBvc3QpOwoJCX0KCQllbHNlIAoJCXsKCQkJc3dpdGNoICgkcG9zdFsnaWNvbnRhY3RfYWN0aW9uJ10pCgkJCXsKCQkJCWNhc2UgJ2dldENsaWVudEZvbGRlcic6CgkJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJTZWNvbmRPcHRpb25zRGlhbG9nKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJGaXJzdE9wdGlvbnNEaWFsb2coJHBvc3QpOwoJCQkJCWJyZWFrOwoJCQl9CgkJfQoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiByZW5kZXJGaXJzdE9wdGlvbnNEaWFsb2coJHBvc3QpIHsKCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyKCk7CgkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHRoaXMtPmdldFRva2VuKCkpOwoJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkkaWNvbnRhY3RfdXNlcm5hbWUgPSAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKT8kcHJvdmlkZXJfZW50aXR5LT5nZXRVc2VybmFtZSgpOiIiOwoJCSRpY29udGFjdF9wYXNzd29yZCA9ICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpPyRwcm92aWRlcl9lbnRpdHktPmdldFBhc3N3b3JkKCk6IiI7CgkJJGljb250YWN0X2FwaV9pZCA9IE1NX0lDb250YWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OiRBUElfS0VZOwoJCQoJCSRmb3JtID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRGlhbG9nKCk7CgkJCgkJJGZvcm0tPmRpYWxvZyA9IDw8PE9QVElPTlMKCQk8ZGl2IGlkPSJtbS1wcm92aWRlci1jb25maWctb3B0aW9ucyI+CQkJCgkJCTxsYWJlbCBzdHlsZT0iZmxvYXQ6bGVmdDsgd2lkdGg6OGVtOyI+VXNlcm5hbWU8L2xhYmVsPgoJCQk8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iaWNvbnRhY3RfdXNlcm5hbWUiIGlkPSJpY29udGFjdF91c2VybmFtZSIgc2l6ZT0iMTYiIHZhbHVlPSJ7JGljb250YWN0X3VzZXJuYW1lfSIvPjxici8+CgkJCTxsYWJlbCBzdHlsZT0iZmxvYXQ6bGVmdDsgd2lkdGg6OGVtOyI+UGFzc3dvcmQ8L2xhYmVsPgoJCQk8aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9Imljb250YWN0X3Bhc3N3b3JkIiBpZD0iaWNvbnRhY3RfcGFzc3dvcmQiIHNpemU9IjE2IiB2YWx1ZT0ieyRpY29udGFjdF9wYXNzd29yZH0iLz48YnIvPgoJCQk8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJpY29udGFjdF9hY3Rpb24iIHZhbHVlPSJnZXRDbGllbnRGb2xkZXIiPgkJCQkJCgkJPC9kaXY+Ck9QVElPTlM7CgoJCSRmb3JtLT5jb250cm9scyA9IDw8PENPTlRST0xTCgkJPGJ1dHRvbiBpZD0iZW1haWwtc2VydmljZS1wcm92aWRlci1jb25maWd1cmUiIGNsYXNzPSJtbS11aS1idXR0b24gYmx1ZSIgb25DbGljaz0ibW1qcy5zaG93TmV3UHJvdmlkZXJPcHRpb25zKGpRdWVyeSgnI3Byb3ZpZGVyLWNvbmZpZy1mb3JtIDppbnB1dCcpLnNlcmlhbGl6ZUFycmF5KCkpOyByZXR1cm4gZmFsc2U7IiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Ij5Db25maWd1cmU8L2J1dHRvbj4KCQk8YnV0dG9uIGlkPSJyZXNldCIgY2xhc3M9Im1tLXVpLWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25DbGljaz0ibW1qcy5wcm92aWRlck9wdGlvbnNSZXNldCgpOyByZXR1cm4gZmFsc2U7IiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Ij5SZXNldDwvYnV0dG9uPgpDT05UUk9MUzsKCQlyZXR1cm4gJGZvcm07Cgl9CgoJcHJvdGVjdGVkIGZ1bmN0aW9uIHJlbmRlclNlY29uZE9wdGlvbnNEaWFsb2coJHBvc3QpCgl7CgkJaWYgKCFpc3NldCgkcG9zdFsnaWNvbnRhY3RfdXNlcm5hbWUnXSkgfHwgZW1wdHkoJHBvc3RbJ2ljb250YWN0X3VzZXJuYW1lJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiUGxlYXNlIGVudGVyIHlvdXIgaUNvbnRhY3QgdXNlcm5hbWUiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoIWlzc2V0KCRwb3N0WydpY29udGFjdF9wYXNzd29yZCddKSB8fCBlbXB0eSgkcG9zdFsnaWNvbnRhY3RfcGFzc3dvcmQnXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJQbGVhc2UgZW50ZXIgeW91ciBpQ29udGFjdCBwYXNzd29yZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSR0aGlzLT51c2VybmFtZSA9ICRwb3N0WydpY29udGFjdF91c2VybmFtZSddOwoJCSR0aGlzLT5wYXNzd29yZCA9ICRwb3N0WydpY29udGFjdF9wYXNzd29yZCddOwoJCQoJCS8vZmlyc3QgZ2V0IHRoZSBhY2NvdW50IGlkCgkJJHJlc3BvbnNlID0gJHRoaXMtPmdldEFjY291bnRJZCgpOwoJCWlmICgkcmVzcG9uc2UtPnR5cGUgIT0gTU1fUmVzcG9uc2U6OiRTVUNDRVNTKQoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9CgkJZWxzZSAKCQl7CgkJCSR0aGlzLT5hY2NvdW50X2lkID0gJHJlc3BvbnNlLT5tZXNzYWdlOwoJCX0KCQkKCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyKCk7CgkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHRoaXMtPmdldFRva2VuKCkpOwoJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkkaWNvbnRhY3RfdXNlcm5hbWUgPSAkcG9zdFsnaWNvbnRhY3RfdXNlcm5hbWUnXTsKCQkkaWNvbnRhY3RfcGFzc3dvcmQgPSAkcG9zdFsnaWNvbnRhY3RfcGFzc3dvcmQnXTsKCQkkaWNvbnRhY3RfYXBpX2lkID0gTU1fSUNvbnRhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6JEFQSV9LRVk7CgkJJGNsaWVudF9mb2xkZXJfaWQgPSAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpICYmICgkcHJvdmlkZXJfZW50aXR5LT5nZXRDb25maWdPcHRpb24oImNsaWVudEZvbGRlcklkIikpKT8kcHJvdmlkZXJfZW50aXR5LT5nZXRDb25maWdPcHRpb24oImNsaWVudEZvbGRlcklkIik6IiI7CgkJCgkJLy9ub3cgZ2V0IHRoZSBjbGllbnQgZm9sZGVycwoJCSRyZXNwb25zZSA9ICR0aGlzLT5nZXRDbGllbnRGb2xkZXJzKCk7CgkJaWYgKCRyZXNwb25zZS0+dHlwZSAhPSBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCQkKCQlpZiAoaXNfYXJyYXkoJHJlc3BvbnNlLT5tZXNzYWdlKSAmJiAoY291bnQoJHJlc3BvbnNlLT5tZXNzYWdlKSA9PSAxKSkKCQl7CgkJCWZvcmVhY2ggKCRyZXNwb25zZS0+bWVzc2FnZSBhcyAkaz0+JHYpCgkJCXsKCQkJCS8vc2hvdWxkIG9ubHkgYmUgb25lLCBidXQgdGhpcyBpcyB0aGUgZWFzaWVzdCB3YXkgdG8gZ2V0IHRoZSBrZXkgYW5kIHRoZSB2YWx1ZQoJCQkJJHJlc3BvbnNlLT5tZXNzYWdlWyRrXSA9ICJEZWZhdWx0IEZvbGRlciAoeyR2fSkiOwoJCQl9CgkJfQoJCQoJCSRjbGllbnRfZm9sZGVyX29wdGlvbnMgPSBNTV9IdG1sVXRpbHM6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJHJlc3BvbnNlLT5tZXNzYWdlLCRjbGllbnRfZm9sZGVyX2lkKTsJCQoJCQoJCSRmb3JtID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRGlhbG9nKCk7CgkJCgkJJGZvcm0tPmRpYWxvZyA9IDw8PE9QVElPTlMKCQk8ZGl2IGlkPSJtbS1wcm92aWRlci1jb25maWctb3B0aW9ucyI+CQkJCgkJCTxsYWJlbCBzdHlsZT0iZmxvYXQ6bGVmdDsgd2lkdGg6OGVtOyI+VXNlcm5hbWU8L2xhYmVsPgoJCQk8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iaWNvbnRhY3RfdXNlcm5hbWUiIGlkPSJpY29udGFjdF91c2VybmFtZSIgc2l6ZT0iMTIiIHZhbHVlPSJ7JGljb250YWN0X3VzZXJuYW1lfSIvPjxici8+CgkJCTxsYWJlbCBzdHlsZT0iZmxvYXQ6bGVmdDsgd2lkdGg6OGVtOyI+UGFzc3dvcmQ8L2xhYmVsPgoJCQk8aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9Imljb250YWN0X3Bhc3N3b3JkIiBpZD0iaWNvbnRhY3RfcGFzc3dvcmQiIHNpemU9IjEyIiB2YWx1ZT0ieyRpY29udGFjdF9wYXNzd29yZH0iLz48YnIvPgoJCQk8bGFiZWwgc3R5bGU9ImZsb2F0OmxlZnQ7IHdpZHRoOjhlbTsiPkNsaWVudCBGb2xkZXI8L2xhYmVsPgoJCQk8c2VsZWN0IG5hbWU9Imljb250YWN0X2NsaWVudF9mb2xkZXIiPnskY2xpZW50X2ZvbGRlcl9vcHRpb25zfTwvc2VsZWN0Pjxici8+CQkJCQkKCQk8L2Rpdj4KT1BUSU9OUzsKCQlyZXR1cm4gJGZvcm07Cgl9CgkKCS8qKgoJICogUmVzcG9uZHMgdG8gZGF0YSBjb2xsZWN0ZWQgZnJvbSB0aGUgZm9ybSByZW5kZXJlZCBieSByZW5kZXJPcHRpb25zRGlhbG9nCgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmhhbmRsZU9wdGlvbnNEaWFsb2coKQoJICogQHBhcmFtICRvcHRpb25EYXRhIEFycmF5IGNvbnRhaW5pbmcgdGhlIHBvc3RlZCB2YWx1ZXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBoYW5kbGVPcHRpb25zRGlhbG9nKCRvcHRpb25EYXRhKSAKCXsKCQlpZiAoaXNfYXJyYXkoJG9wdGlvbkRhdGEpICYmIChpc3NldCgkb3B0aW9uRGF0YVsnaWNvbnRhY3RfdXNlcm5hbWUnXSkpICYmICFlbXB0eSgkb3B0aW9uRGF0YVsnaWNvbnRhY3RfdXNlcm5hbWUnXSkKCQkJJiYgKGlzc2V0KCRvcHRpb25EYXRhWydpY29udGFjdF9wYXNzd29yZCddKSkgJiYgIWVtcHR5KCRvcHRpb25EYXRhWydpY29udGFjdF9wYXNzd29yZCddKQoJCQkpIAoJCXsKCQkJJHByb3ZpZGVyX3Rva2VuID0gJG9wdGlvbkRhdGFbJ3Byb3ZpZGVyX3Rva2VuJ107CgkJCSR0aGlzLT51c2VybmFtZSA9ICRvcHRpb25EYXRhWydpY29udGFjdF91c2VybmFtZSddOwoJCQkkdGhpcy0+cGFzc3dvcmQgPSAkb3B0aW9uRGF0YVsnaWNvbnRhY3RfcGFzc3dvcmQnXTsKCQkJJHRoaXMtPmNsaWVudF9mb2xkZXJfaWQgPSAkb3B0aW9uRGF0YVsnaWNvbnRhY3RfY2xpZW50X2ZvbGRlciddOwoJCQkKCQkJJHByb3NwZWN0X2xpc3RfaWQgPSAkb3B0aW9uRGF0YVsncHJvc3BlY3RfbGlzdF9pZCddOwoJCQkkY2FuY2VsbGF0aW9uX2xpc3RfaWQgPSAkb3B0aW9uRGF0YVsnY2FuY2VsbGF0aW9uX2xpc3RfaWQnXTsKCQkJCgkJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHByb3ZpZGVyX3Rva2VuKTsKCQkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCQlpZiAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKSAKCQkJewoJCQkJLy9maXJzdCB3cml0ZSB0aGUgcHJvdmlkZXIncyBjb25maWd1cmF0aW9uIG9wdGlvbnMKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldEFQSUtleShNTV9JQ29udGFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjokQVBJX0tFWSk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRVc2VybmFtZSgkdGhpcy0+dXNlcm5hbWUpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0UGFzc3dvcmQoJHRoaXMtPnBhc3N3b3JkKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldENvbmZpZ09wdGlvbigiY2xpZW50Rm9sZGVySWQiLCAkdGhpcy0+Y2xpZW50X2ZvbGRlcl9pZCk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRBY3RpdmUodHJ1ZSk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRQcm9zcGVjdExpc3RJRCgkcHJvc3BlY3RfbGlzdF9pZCk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRDYW5jZWxsYXRpb25MaXN0SUQoJGNhbmNlbGxhdGlvbl9saXN0X2lkKTsKCQkJCSRjb21taXRfcmVzcG9uc2UgPSAkcHJvdmlkZXJfZW50aXR5LT5jb21taXREYXRhKCk7CgkJCQlpZiAoJGNvbW1pdF9yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKSAKCQkJCXsKCQkJCQkvL3Bhc3MgdGhyb3VnaCBlcnJvcnMgY29tbWl0dGluZyB0byB0aGUgZGF0YWJhc2UKCQkJCQlyZXR1cm4gJGNvbW1pdF9yZXNwb25zZTsKCQkJCX0KCQkJCS8vbm93IHdyaXRlIHRoZSBsaXN0IG1hcHBpbmdzCgkJCQlpZiAoaXNzZXQoJG9wdGlvbkRhdGFbJ21lbWJlcl90eXBlX21hcHBpbmdzJ10pICYmIGlzX2FycmF5KCRvcHRpb25EYXRhWydtZW1iZXJfdHlwZV9tYXBwaW5ncyddKSkgCgkJCQl7CgkJCQkJJHByb3ZpZGVyX2lkID0gJHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKTsgCgkJCQkJcmV0dXJuICR0aGlzLT5wZXJzaXN0TGlzdE1hcHBpbmdzKCRwcm92aWRlcl9pZCwkb3B0aW9uRGF0YVsnbWVtYmVyX3R5cGVfbWFwcGluZ3MnXSk7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJLy9mYWlsZWQgdG8gbG9hZCBlbnRpdHkgZnJvbSB0YWJsZQoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIHNhdmUgc2V0dGluZ3MiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkvL29wdGlvbkRhdGEgaXMgbm90IGFuIGFycmF5LCBvciB0aGUgYXBpIGtleSB3YXMgbm90IHNlbnQKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIHNhdmUgc2V0dGluZ3M6IEluY29ycmVjdCBvcHRpb25zIGZvcm1hdCBvciBpQ29udGFjdCBjcmVkZW50aWFscyBub3Qgc2VudCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkvKioKCSAqIENvbmZpZ3VyZXMgdGhlIGlDb250YWN0IHByb3ZpZGVyIGluIG9yZGVyIHRvIGRvIHRoZSBpbml0aWFsIGNvbm5lY3QKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6Y29uZmlndXJlRnJvbU9wdGlvbnMoKQoJICogQHBhcmFtICRvcHRpb25EYXRhIEFycmF5IFRoZSB2YWx1ZXMgcG9zdGVkIGZyb20gdGhlIGZvcm0gcmVuZGVyZWQgYnkgcmVuZGVyT3B0aW9uc0RpYWxvZwoJICovCglwdWJsaWMgZnVuY3Rpb24gY29uZmlndXJlRnJvbU9wdGlvbnMoJG9wdGlvbkRhdGEpIAoJewoJCWlmICghaXNzZXQoJG9wdGlvbkRhdGFbJ2ljb250YWN0X3VzZXJuYW1lJ10pIHx8ICFpc3NldCgkb3B0aW9uRGF0YVsnaWNvbnRhY3RfcGFzc3dvcmQnXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGVyZSB3YXMgYW4gZXJyb3IgY29ubmVjdGluZyB0byBpQ29udGFjdC4gUGxlYXNlIG1ha2Ugc3VyZSB5b3UgaGF2ZSBlbnRlcmVkIGEgdXNlcm5hbWUsIHBhc3N3b3JkLCBhbmQgY2xpZW50IGZvbGRlciIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICghaXNzZXQoJG9wdGlvbkRhdGFbJ2ljb250YWN0X2NsaWVudF9mb2xkZXInXSkgJiYgKCR0aGlzLT5jbGllbnRfZm9sZGVyX2lkID09ICIiKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZXJlIHdhcyBhbiBlcnJvciBjb25uZWN0aW5nIHRvIGlDb250YWN0LiBQbGVhc2UgbWFrZSBzdXJlIHlvdSBoYXZlIHNlbGVjdGVkIGEgdmFsaWQgY2xpZW50IGZvbGRlciIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSR0aGlzLT51c2VybmFtZSA9ICRvcHRpb25EYXRhWydpY29udGFjdF91c2VybmFtZSddOwoJCSR0aGlzLT5wYXNzd29yZCA9ICRvcHRpb25EYXRhWydpY29udGFjdF9wYXNzd29yZCddOwoJCSR0aGlzLT5jbGllbnRfZm9sZGVyX2lkID0gKGlzc2V0KCRvcHRpb25EYXRhWydpY29udGFjdF9jbGllbnRfZm9sZGVyJ10pKT8kb3B0aW9uRGF0YVsnaWNvbnRhY3RfY2xpZW50X2ZvbGRlciddOiR0aGlzLT5jbGllbnRfZm9sZGVyX2lkOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBBZGRzIGEgbWVtYmVyIHRvIGEgbGlzdAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjphZGRNZW1iZXJUb0xpc3QoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIGFkZHJlc3MgdG8gYWRkIHRvIHRoZSBsaXN0CgkgKiBAcGFyYW0gJGxpc3RJZCBTdHJpbmcgVGhlIGlkIG9mIHRoZSBsaXN0CgkgKiBAcGFyYW0gJGluY2x1ZGVCdW5kbGVJbmZvIGluZGljYXRlcyBpZiBidW5kbGUgaW5mb3JtYXRpb24gc2hvdWxkIGJlIHBhc3NlZAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gYWRkTWVtYmVyVG9MaXN0KCRlbWFpbCwkbGlzdElkLCRpbmNsdWRlQnVuZGxlSW5mbz10cnVlKSAKCXsKCQkkbWVtYmVyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGVtYWlsKTsKCQkKCQlpZiAoISRtZW1iZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBmaW5kIG1lbWJlciB3aXRoIGVtYWlsIHskZW1haWx9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJHRoaXMtPmFkZFJlcXVpcmVkQ3VzdG9tRmllbGRzKCR0aGlzLT5jbGllbnRfZm9sZGVyX2lkLCAkaW5jbHVkZUJ1bmRsZUluZm8pOwoJCSRjZl9yZXNwb25zZSA9ICR0aGlzLT5nZXRNZW1iZXJEYXRhVG9NZXJnZSgkZW1haWwsICRpbmNsdWRlQnVuZGxlSW5mbyk7CgkJaWYgKCRjZl9yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKSAKCQl7CgkJCXJldHVybiAkY2ZfcmVzcG9uc2U7CgkJfQoJCQoJCS8vZmlyc3Qgc3luYyB0aGUgY29udGFjdAoJCSRjb250YWN0X3Jlc3BvbnNlID0gJHRoaXMtPnN5bmNDb250YWN0KCRlbWFpbCwgJGNmX3Jlc3BvbnNlLT5tZXNzYWdlKTsKCQlpZiAoKCRzdGF0dXMgPSAkdGhpcy0+Z2V0aUNvbnRhY3RFcnJvcigkY29udGFjdF9yZXNwb25zZSkgIT09IGZhbHNlKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHN0YXR1cywgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRjb250YWN0ID0gJGNvbnRhY3RfcmVzcG9uc2UtPm1lc3NhZ2U7CgkJCgkJLy9ub3cgc3Vic2NyaWJlIHRvIHRoZSBuZXcgbGlzdAoJCSRzdWJzY3JpcHRpb25zID0gbmV3IFNpbXBsZVhNTEVsZW1lbnQoIjxzdWJzY3JpcHRpb25zPjwvc3Vic2NyaXB0aW9ucz4iKTsKCQkkc3Vic2NyaXB0aW9uID0gJHN1YnNjcmlwdGlvbnMtPmFkZENoaWxkKCJzdWJzY3JpcHRpb24iKTsKCQkkc3Vic2NyaXB0aW9uLT5hZGRDaGlsZCgiY29udGFjdElkIiwoc3RyaW5nKSRjb250YWN0LT5jb250YWN0SWQpOwoJCSRzdWJzY3JpcHRpb24tPmFkZENoaWxkKCJsaXN0SWQiLCRsaXN0SWQpOwoJCSRzdWJzY3JpcHRpb24tPmFkZENoaWxkKCJzdGF0dXMiLCJub3JtYWwiKTsKCQkkc3Vic2NyaWJlUmVzcG9uc2UgPSAkdGhpcy0+Y2FsbElDb250YWN0QVBJKCJjL3skdGhpcy0+Y2xpZW50X2ZvbGRlcl9pZH0vc3Vic2NyaXB0aW9ucyIsIlBPU1QiLCRzdWJzY3JpcHRpb25zLT5hc1hNTCgpKTsgCgkJaWYgKCgkc3RhdHVzID0gJHRoaXMtPmdldGlDb250YWN0RXJyb3IoJHN1YnNjcmliZVJlc3BvbnNlKSkgIT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkc3RhdHVzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CQoJCgkvKioKCSAqIAoJICogQWRkcyBtZXJnZSB2YXJpYWJsZXMgdG8gdGhlIGxpc3QgaWYgdGhleSBhcmUgbm90IGFscmVhZHkgcHJlc2VudC4gVGhpcyBpcyBjcnVjaWFsLCBiZWNhdXNlIHRyeWluZyB0byB1cGRhdGUgYSBjdXN0b20gZmllbGQgdGhhdCBpc24ndAoJICogc3BlY2lmaWVkIG1heSBjYXVzZSBpbmRldGVybWluYXRlIHJlc3VsdHMuIEN1cnJlbnRseSB1c2VkIHRvIGFkZCBhY2Nlc3MgdGFncwoJICogQHBhcmFtIFN0cmluZyAkbGlzdElkIFRoZSBpZCBvZiB0aGUgbGlzdCB0byBhZGQgdGhlIG1lcmdlIHZhcnMgdG8KCSAqIEBwYXJhbSAkaW5jbHVkZUJ1bmRsZUluZm8gaW5kaWNhdGVzIGlmIGJ1bmRsZSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcGFzc2VkCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gYWRkUmVxdWlyZWRDdXN0b21GaWVsZHMoJGNsaWVudF9mb2xkZXJfaWQsICRpbmNsdWRlQnVuZGxlSW5mbz10cnVlKQoJewoJCSRtdkNhY2hlID0gJHRoaXMtPmdldExpc3RDdXN0b21GaWVsZHMoJGNsaWVudF9mb2xkZXJfaWQpOwoJCWlmICgkbXZDYWNoZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJcmV0dXJuICRtdkNhY2hlOwoJCX0KCQkkbXZDYWNoZSA9ICRtdkNhY2hlLT5tZXNzYWdlOwoJCQoJCSRjdXN0b21GaWVsZHNYbWwgPSBuZXcgU2ltcGxlWE1MRWxlbWVudCgiPGN1c3RvbWZpZWxkcz48L2N1c3RvbWZpZWxkcz4iKTsKCQkKCQlpZigkaW5jbHVkZUJ1bmRsZUluZm8pCgkJewoJCQlmb3JlYWNoIChNTV9CdW5kbGU6OmdldEJ1bmRsZVNob3J0TmFtZXMoKSBhcyAkcmVxVGFnPT4kcmVxTmFtZSkKCQkJewoJCQkJJHJlcVRhZyA9IHN0cnRvbG93ZXIoJHJlcVRhZyk7IC8vaWNvbnRhY3Qgb25seSBzdXBwb3J0cyBsb3dlcmNhc2UgdGFncywgaXJvbmljYWxseSB0aGUgb3Bwb3NpdGUgb2YgTWFpbGNoaW1wCgkJCQlpZiAoIWlzc2V0KCRtdkNhY2hlWyRyZXFUYWddKSkKCQkJCXsKCQkJCQkvL2FkZCB0aGlzIGN1c3RvbSBmaWVsZCB0byB0aGUgY2xpZW50IGZvbGRlcgoJCQkJCSR0aGlzRmllbGQgPSAkY3VzdG9tRmllbGRzWG1sLT5hZGRDaGlsZCgnY3VzdG9tZmllbGQnKTsKCQkJCQkkdGhpc0ZpZWxkLT5hZGRDaGlsZCgncHJpdmF0ZU5hbWUnLCRyZXFUYWcpOwoJCQkJCSR0aGlzRmllbGQtPmFkZENoaWxkKCdwdWJsaWNOYW1lJywkcmVxTmFtZSk7CgkJCQkJJHRoaXNGaWVsZC0+YWRkQ2hpbGQoJ2Rpc3BsYXlUb1VzZXInLCIwIik7CgkJCQkJJHRoaXNGaWVsZC0+YWRkQ2hpbGQoJ2ZpZWxkVHlwZScsJ3RleHQnKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQlpZiAoY291bnQoJGN1c3RvbUZpZWxkc1htbC0+Y2hpbGRyZW4oKSkgPjApCgkJewoJCQkvL2ZpZWxkcyB3ZXJlIGFkZGVkLCBzbyBjYWxsIGlDb250YWN0CgkJCSRjZl9yZXNwb25zZSA9ICR0aGlzLT5jYWxsSUNvbnRhY3RBUEkoImMveyRjbGllbnRfZm9sZGVyX2lkfS9jdXN0b21maWVsZHMiLCJQT1NUIiwkY3VzdG9tRmllbGRzWG1sLT5hc1hNTCgpKTsKCQkJaWYgKCRjZl9yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgYWRkaW5nIGN1c3RvbSBmaWVsZHMgdG8gdGhlIGlDb250YWN0IGFjY291bnQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRwYXlsb2FkID0gJGNmX3Jlc3BvbnNlLT5tZXNzYWdlOwoJCQkJaWYgKGlzc2V0KCRwYXlsb2FkLT5lcnJvcnMpKQoJCQkJewoJCQkJCS8vdHJ5IHRvIGRldGVybWluZSBpZiB0aGVyZSB3YXMgYW4gZXJyb3Igc3RhdGUgb24gdGhlIGlDb250YWN0IHNpZGUKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBhZGRpbmcgY3VzdG9tIGZpZWxkcyB0byB0aGUgaUNvbnRhY3QgYWNjb3VudCIuCgkJCQkJCQkoKGlzc2V0KCRwYXlsb2FkLT5lcnJvcnMtPmVycm9yKSk/IjogIi4oc3RyaW5nKSRwYXlsb2FkLT5lcnJvcnMtPmVycm9yOiIiKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCgkJCQlyZXR1cm4gJGNmX3Jlc3BvbnNlOwoJCQl9CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBjdXN0b20gZmllbGRzIGluIHRoZSBjbGllbnQgZm9sZGVyIGtleWVkIGJ5IHRoZSB0YWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNsaWVudF9mb2xkZXJfaWQgVGhlIGlkIG9mIHRoZSBjbGllbnQgZm9sZGVyIHRvIHJldHJpZXZlIGN1c3RvbSBmaWVsZHMgZm9yCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBnZXRMaXN0Q3VzdG9tRmllbGRzKCRjbGllbnRfZm9sZGVyX2lkKQoJewoJCSRjZkNhY2hlID0gYXJyYXkoKTsKCQkkY2ZfcmVzcG9uc2UgPSAkdGhpcy0+Y2FsbElDb250YWN0QVBJKCJjL3skY2xpZW50X2ZvbGRlcl9pZH0vY3VzdG9tZmllbGRzIik7CgkJaWYgKCRjZl9yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBjdXN0b20gZmllbGRzOiB7JGNmX3Jlc3BvbnNlLT5tZXNzYWdlfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCWVsc2UKCQl7CgkJCSRjZl9vYmogPSAkY2ZfcmVzcG9uc2UtPm1lc3NhZ2U7CgkJCWlmIChpc3NldCgkY2Zfb2JqLT5jdXN0b21maWVsZHMtPmN1c3RvbWZpZWxkcy0+Y3VzdG9tZmllbGQpKQoJCQl7CgkJCQlmb3JlYWNoICgkY2Zfb2JqLT5jdXN0b21maWVsZHMtPmN1c3RvbWZpZWxkIGFzICRjdXN0b21GaWVsZCkKCQkJCXsKCQkJCQkkY2ZDYWNoZVsoc3RyaW5nKSRjdXN0b21GaWVsZC0+cHJpdmF0ZU5hbWVdID0gKHN0cmluZykkY3VzdG9tRmllbGQtPnB1YmxpY05hbWU7CgkJCQl9CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkY2ZDYWNoZSk7CgkJfQoJfQoJCgkvKioKCSAqIFJlbW92ZXMgYSBtZW1iZXIgZnJvbSBhIGxpc3QKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6cmVtb3ZlTWVtYmVyRnJvbUxpc3QoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIGFkZHJlc3MgdG8gcmVtb3ZlIGZyb20gdGhlIGxpc3QKCSAqIEBwYXJhbSAkbGlzdElkIFN0cmluZyBUaGUgaWQgb2YgdGhlIGxpc3QKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZU1lbWJlckZyb21MaXN0KCRlbWFpbCwgJGxpc3RJZCkgIAoJewoJCWlmIChlbXB0eSgkbGlzdElkKSkgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCQoJCS8vZmlyc3Qgc3luYyAocmV0cmlldmUpIHRoZSBjb250YWN0CgkJJGNvbnRhY3QgPSAkdGhpcy0+c3luY0NvbnRhY3QoJGVtYWlsLCBhcnJheSgpKTsKCQlpZiAoJGNvbnRhY3QtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQl7CgkJCXJldHVybiAkY29udGFjdDsKCQl9CgkJaWYgKCgkc3RhdHVzID0gJHRoaXMtPmdldGlDb250YWN0RXJyb3IoJGNvbnRhY3QpKSAhPT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRzdGF0dXMsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vY29udGFjdCBzaG91bGQgYmUgdmFsaWQgbm93LCB1bndyYXAgaXQgZnJvbSB0aGUgTU1fUmVzcG9uc2UgbWVzc2FnZQoJCSRjb250YWN0ID0gJGNvbnRhY3QtPm1lc3NhZ2U7CgkJCgkJLy9ub3cgdW5zdWJzY3JpYmUgZnJvbSB0aGUgbGlzdAoJCSRzdWJzY3JpcHRpb25zID0gbmV3IFNpbXBsZVhNTEVsZW1lbnQoIjxzdWJzY3JpcHRpb25zPjwvc3Vic2NyaXB0aW9ucz4iKTsKCQkkc3Vic2NyaXB0aW9uID0gJHN1YnNjcmlwdGlvbnMtPmFkZENoaWxkKCJzdWJzY3JpcHRpb24iKTsKCQkkc3Vic2NyaXB0aW9uLT5hZGRDaGlsZCgiY29udGFjdElkIiwoc3RyaW5nKSRjb250YWN0LT5jb250YWN0SWQpOwoJCSRzdWJzY3JpcHRpb24tPmFkZENoaWxkKCJsaXN0SWQiLCRsaXN0SWQpOwoJCSRzdWJzY3JpcHRpb24tPmFkZENoaWxkKCJzdGF0dXMiLCJ1bnN1YnNjcmliZWQiKTsKCQkKCQkkc3Vic2NyaWJlUmVzcG9uc2UgPSAkdGhpcy0+Y2FsbElDb250YWN0QVBJKCJjL3skdGhpcy0+Y2xpZW50X2ZvbGRlcl9pZH0vc3Vic2NyaXB0aW9ucyIsIlBPU1QiLCRzdWJzY3JpcHRpb25zLT5hc1hNTCgpKTsgCgkJaWYgKCgkc3RhdHVzID0gJHRoaXMtPmdldGlDb250YWN0RXJyb3IoJHN1YnNjcmliZVJlc3BvbnNlKSkgIT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkc3RhdHVzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCS8qKgoJICogQ2hhbmdlcyBhIG1lbWJlcnMgbGlzdCBzdWJzY3JpcHRpb24gYmFzZWQgb24gYSBjaGFuZ2UgaW4gbWVtYmVyc2hpcCBsZXZlbC4gCgkgKiBQZXJmb3JtcyBhIHJlbW92ZSwgbG9va3MgdXAgdGhlIGxpc3QgKGlmIGFueSkgZm9yIHRoZSBuZXcgbWVtYmVyc2hpcCBsZXZlbCwgYW5kIHRoZW4gcGVyZm9ybXMgYW4gYWRkCgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmNoYW5nZU1lbWJlcnNoaXBMZXZlbCgpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgbWVtYmVyIHRvIGJlIHVwZGF0ZWQKCSAqIEBwYXJhbSAkbmV3TWVtYmVyVHlwZSBpbnQgVGhlIG1lbWJlciB0eXBlIGlkIG9mIHRoZSBtZW1iZXIncyBuZXcgbWVtYmVyIHR5cGUKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNoYW5nZU1lbWJlcnNoaXBMZXZlbCgkZW1haWwsJG5ld01lbWJlclR5cGUpIAoJewoJCSRvdmVyYWxsX3N1Y2Nlc3MgPSB0cnVlOwoJCSRvdmVyYWxsX3N0YXR1cyA9ICIiOwoJCSRsaXN0RnJpZW5kbHlOYW1lcyA9ICR0aGlzLT5nZXRMaXN0cygpOwoJCQoJCSRtZW1iZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkZW1haWwpOwoJCQoJCWlmICghJG1lbWJlci0+aXNWYWxpZCgpKSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBmaW5kIG1lbWJlciB3aXRoIGVtYWlsIHskZW1haWx9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJG9sZExpc3RJZCA9ICRtZW1iZXItPmdldFN1YnNjcmliZWRMaXN0SWQoKTsKCQkKCQkkbmV3TGlzdElkID0gKGVtcHR5KCRuZXdNZW1iZXJUeXBlKSk/JHRoaXMtPmdldExpc3RJZEZvck1lbWJlcigkZW1haWwpOiR0aGlzLT5nZXRMaXN0SWRGb3JNZW1iZXJzaGlwTGV2ZWwoJG5ld01lbWJlclR5cGUpOwoJCWlmICgkbmV3TGlzdElkLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRuZXdMaXN0SWQtPm1lc3NhZ2UsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRuZXdMaXN0SWQgPSAkbmV3TGlzdElkLT5tZXNzYWdlOwoJCQoJCS8vZm91ciBwb3NzaWJsZSBzdGF0ZXMgLSBhLikgb2xkIGxpc3QgaXMgYmxhbmsgYnV0IG5vdCBuZXcgbGlzdCAtIGFkZCB0byBuZXcgbGlzdAoJCS8vIGIuKSBuZXcgbGlzdCBpcyBibGFuayBidXQgbm90IG9sZCBsaXN0IC0gcmVtb3ZlIGZyb20gb2xkIGxpc3QKCQkvLyBjLikgYm90aCBhcmUgYmxhbmsgLSByZXR1cm4gc3VjY2VzcwoJCS8vIGQuKSBib3RoIGFyZSBwb3B1bGF0ZWQgLSBjaGFuZ2UgZnJvbSBvbGQgdG8gbmV3CgkJCgkJaWYgKGVtcHR5KCRvbGRMaXN0SWQpICYmICFlbXB0eSgkbmV3TGlzdElkKSkKCQl7CgkJCXJldHVybiAkdGhpcy0+YWRkTWVtYmVyVG9MaXN0KCRlbWFpbCwgJG5ld0xpc3RJZCk7CgkJfQoJCWVsc2UgaWYgKGVtcHR5KCRuZXdMaXN0SWQpICYmICFlbXB0eSgkb2xkTGlzdElkKSkKCQl7CgkJCXJldHVybiAkdGhpcy0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGVtYWlsLCAkb2xkTGlzdElkKTsKCQl9CgkJZWxzZSBpZiAoZW1wdHkoJG9sZExpc3RJZCkgJiYgZW1wdHkoJG5ld0xpc3RJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCWVsc2UgaWYgKCFlbXB0eSgkb2xkTGlzdElkKSAmJiAhZW1wdHkoJG5ld0xpc3RJZCkpCgkJewoJCQkkbWVtYmVyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGVtYWlsKTsKCQkJCgkJCWlmICghJG1lbWJlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZmluZCBtZW1iZXIgd2l0aCBlbWFpbCB7JGVtYWlsfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJJHRoaXMtPmFkZFJlcXVpcmVkQ3VzdG9tRmllbGRzKCR0aGlzLT5jbGllbnRfZm9sZGVyX2lkKTsKCQkJJGNmX3Jlc3BvbnNlID0gJHRoaXMtPmdldE1lbWJlckRhdGFUb01lcmdlKCRlbWFpbCk7CgkJCWlmICgkY2ZfcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikgCgkJCXsKCQkJCXJldHVybiAkY2ZfcmVzcG9uc2U7CgkJCX0KCQkKCQkJLy9maXJzdCBzeW5jIHRoZSBjb250YWN0CgkJCSRjb250YWN0ID0gJHRoaXMtPnN5bmNDb250YWN0KCRlbWFpbCwgJGNmX3Jlc3BvbnNlLT5tZXNzYWdlKTsKCQkJJHN1YnNjcmlwdGlvbiA9IG5ldyBTaW1wbGVYTUxFbGVtZW50KCI8c3Vic2NyaXB0aW9uPjwvc3Vic2NyaXB0aW9uPiIpOwoJCQkkc3Vic2NyaXB0aW9uLT5hZGRDaGlsZCgibGlzdElkIiwkbmV3TGlzdElkKTsKCQkJJHN1YnNjcmlwdGlvbi0+YWRkQ2hpbGQoInN0YXR1cyIsIm5vcm1hbCIpOwoJCQkKCQkJJGNoYW5nZVJlc3VsdCA9ICR0aGlzLT5jYWxsSUNvbnRhY3RBUEkoImMveyR0aGlzLT5jbGllbnRfZm9sZGVyX2lkfS9zdWJzY3JpcHRpb25zL3skb2xkTGlzdElkfV97JGNvbnRhY3QtPmNvbnRhY3RJZH0iLCJQVVQiLCRzdWJzY3JpcHRpb24tPmFzWE1MKCkpOwoJCQlpZiAoKCRzdGF0dXMgPSAkdGhpcy0+Z2V0aUNvbnRhY3RFcnJvcigkY2hhbmdlUmVzcG9uc2UpKSAhPT0gZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHN0YXR1cywgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwkKCQl9Cgl9CgkKCS8qKgoJICogVXBkYXRlcyBhIG1lbWJlcnMgaW5mb3JtYXRpb24gYXR0YWNoZWQgdG8gYSBzdWJzY3JpYmVkIGxpc3QKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6dXBkYXRlTWVtYmVyKCkKCSAqIEBwYXJhbSAkZW1haWwgU3RyaW5nIFRoZSBlbWFpbCBvZiB0aGUgbWVtYmVyIHRvIGJlIHVwZGF0ZWQKCSAqIEBwYXJhbSAkbGlzdElkIFN0cmluZyBUaGUgaWQgb2YgdGhlIGxpc3Qgd2hlcmUgdGhlIG1lbWJlcidzIHN1YnNjcmlwdGlvbiBpbmZvIHNob3VsZCBiZSB1cGRhdGVkCgkgKiBAcGFyYW0gJG5ld0VtYWlsIFN0cmluZyAob3B0aW9uYWwpIC0gVGhlIG1lbWJlcidzIG5ldyBlbWFpbCBpbiB0aGUgY2FzZSB3aGVyZSB0aGUgdXBkYXRlIGlzIGFuIGVtYWlsIGFkZHJlc3MgY2hhbmdlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB1cGRhdGVNZW1iZXIoJGVtYWlsLCAkbGlzdElkLCRuZXdFbWFpbD0iIikgCgl7CgkJaWYgKGVtcHR5KCRsaXN0SWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOyAvL25vIGxpc3Qgd2FzIHBhc3NlZCBpbiwgc28gc3VjY2VzcwoJCX0KCgkJJHRoaXMtPmFkZFJlcXVpcmVkQ3VzdG9tRmllbGRzKCR0aGlzLT5nZXRDbGllbnRGb2xkZXJJZCgpKTsKCQkkY2ZfcmVzcG9uc2UgPSAkdGhpcy0+Z2V0TWVtYmVyRGF0YVRvTWVyZ2UoZW1wdHkoJG5ld0VtYWlsKT8kZW1haWw6JG5ld0VtYWlsKTsKCQlpZiAoJGNmX3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJGNmX3Jlc3BvbnNlOwoJCX0KCgkJJGN1c3RvbUZpZWxkcyA9ICRjZl9yZXNwb25zZS0+bWVzc2FnZTsKCQlpZiAoIWVtcHR5KCRuZXdFbWFpbCkpCgkJewoJCQkkY3VzdG9tRmllbGRzWydlbWFpbCddID0gJG5ld0VtYWlsOwoJCX0KCgkJJHJldHZhbCA9ICR0aGlzLT5zeW5jQ29udGFjdCgkZW1haWwsICRjdXN0b21GaWVsZHMpOwoJCWlmICgkcmV0dmFsLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQkkbGlzdEZyaWVuZGx5TmFtZXMgPSAkdGhpcy0+Z2V0TGlzdHMoKTsKCQkJJGxpc3ROYW1lID0gKCgkbGlzdEZyaWVuZGx5TmFtZXMtPnR5cGUgIT0gTU1fUmVzcG9uc2U6OiRFUlJPUikgJiYgaXNzZXQoJGxpc3RGcmllbmRseU5hbWVzLT5tZXNzYWdlWyRsaXN0SWRdKSk/InskbGlzdEZyaWVuZGx5TmFtZXMtPm1lc3NhZ2VbJGxpc3RJZF19ICh7JGxpc3RJZH0pIjokbGlzdElkOwoJCQluZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIGluZm9ybWF0aW9uIGZvciB7JGVtYWlsfSBvbiBsaXN0IHskbGlzdE5hbWV9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCX0KCQoJLyoqCgkgKiAKCSAqIEdldHMgdGhlIG1lbWJlciBkYXRhIHRvIG1lcmdlLiBDdXJyZW50bHkgdGhpcyBpcyBmaXJzdF9uYW1lLCBsYXN0X25hbWUsIGVtYWlsLCBhbmQgYW55IGFjY2VzcyB0YWdzCgkgKiBAcGFyYW0gU3RyaW5nICRlbWFpbCBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgbWVtYmVyCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgbWVyZ2UgZGF0YSBhcyBrZXktdmFsdWUgcGFpcnMgb24gc3VjY2VzcywgTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgZXJyb3Igc3RhdGUgb3RoZXJ3aXNlCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0TWVtYmVyRGF0YVRvTWVyZ2UoJGVtYWlsLCAkaW5jbHVkZUJ1bmRsZUluZm89dHJ1ZSkKCXsKCQkkdXNlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRlbWFpbCk7CgkJCgkJaWYgKCEkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyB1c2VyIGluZm9ybWF0aW9uIGZvciB7JGVtYWlsfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vZ2V0IGZpcnN0IGFuZCBsYXN0IG5hbWVzCgkJJHVzZXJEYXRhID0gYXJyYXkoImZpcnN0TmFtZSI9PiR1c2VyLT5nZXRGaXJzdE5hbWUoKSwgImxhc3ROYW1lIj0+JHVzZXItPmdldExhc3ROYW1lKCkpOwoKCQkkY3VzdG9tRmllbGRzID0gYXJyYXkoKTsKCQkKCQlpZigkaW5jbHVkZUJ1bmRsZUluZm8pCgkJewoJCQkvL3NldCBhbGwgYnVuZGxlcyBmYWxzZSB0byBzdGFydAoJCQlmb3JlYWNoIChNTV9CdW5kbGU6OmdldEJ1bmRsZVNob3J0TmFtZXMoKSBhcyAkcmVxVGFnPT4kcmVxTmFtZSkKCQkJewoJCQkJJHJlcVRhZyA9IHN0cnRvbG93ZXIoJHJlcVRhZyk7CgkJCQkkY3VzdG9tRmllbGRzWyRyZXFUYWddID0gIkZBTFNFIjsKCQkJfQoJCQkKCQkJLy9ub3cgc2V0IHRoZSBvbmVzIHRoZSB1c2VyIGhhcyBlcXVhbCB0byB0cnVlCgkJCSRhcHBsaWVkQnVuZGxlcyA9ICR1c2VyLT5nZXRBcHBsaWVkQnVuZGxlcygpOwoJCQkKCQkJZm9yZWFjaCAoJGFwcGxpZWRCdW5kbGVzIGFzICRhcHBsaWVkQnVuZGxlKQoJCQl7CgkJCQkkYnVuZGxlID0gJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZSgpOwoJCQkJCQoJCQkJaWYoJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRzaG9ydE5hbWUgPSBzdHJ0b3VwcGVyKCRidW5kbGUtPmdldFNob3J0TmFtZSgpKTsKCQkJCQkkY3VzdG9tRmllbGRzWyRzaG9ydE5hbWVdID0gIlRSVUUiOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHVzZXJEYXRhICsgJGN1c3RvbUZpZWxkcyk7IC8vbm90ZTogYXNzdW1lcyBubyBvdmVybGFwIGluIHRhZyBzaG9ydG5hbWVzIGFuZCB1c2VyIGRhdGEga2V5cyEKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDbGllbnRGb2xkZXJzKCkKCXsKCQkkcmVzcG9uc2UgPSAkdGhpcy0+Y2FsbElDb250YWN0QVBJKCJjLyIpOwoJCWlmICgkcmVzcG9uc2UtPnR5cGUgIT0gTU1fUmVzcG9uc2U6OiRTVUNDRVNTKQoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9CgkJCgkJJHJlc3BvbnNlX29iaiA9ICRyZXNwb25zZS0+bWVzc2FnZTsKCQlpZiAoIUBpc3NldCgkcmVzcG9uc2Vfb2JqLT5jbGllbnRmb2xkZXJzLT5jbGllbnRmb2xkZXIpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZmluZGluZyBpQ29udGFjdCBjbGllbnQgZm9sZGVyIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGZvbGRlcl9saXN0ID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkcmVzcG9uc2Vfb2JqLT5jbGllbnRmb2xkZXJzLT5jbGllbnRmb2xkZXIgYXMgJGNsaWVudGZvbGRlcikKCQl7CgkJCSRmb2xkZXJfaWQgPSAoU3RyaW5nKSRjbGllbnRmb2xkZXItPmNsaWVudEZvbGRlcklkOwoJCQkkZm9sZGVyX2xpc3RbJGZvbGRlcl9pZF0gPSAkZm9sZGVyX2lkOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRmb2xkZXJfbGlzdCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0QWNjb3VudElkKCkKCXsKCQkkdXJsID0gInskdGhpcy0+aG9zdH0vaWNwL2EiOwoJCSRyZXNwb25zZSA9ICR0aGlzLT5kb0lDb250YWN0QVBJQ2FsbCgkdXJsKTsKCQkkcmVzcG9uc2Vfb2JqID0gc2ltcGxleG1sX2xvYWRfc3RyaW5nKCRyZXNwb25zZSk7CgkJaWYgKGlzc2V0KCRyZXNwb25zZV9vYmotPmFjY291bnRzLT5hY2NvdW50LT5hY2NvdW50SWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2Vfb2JqLT5hY2NvdW50cy0+YWNjb3VudC0+YWNjb3VudElkKTsKCQl9CgkJZWxzZSAKCQl7CgkJCSRlcnJvciA9IChAaXNzZXQoJHJlc3BvbnNlX29iai0+ZXJyb3JzLT5lcnJvcikpPyI6IHskcmVzcG9uc2Vfb2JqLT5lcnJvcnMtPmVycm9yfSI6IiI7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgaUNvbnRhY3QgYWNjb3VudCBpZHskZXJyb3J9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJfQoJCgkvKioKCSAqIGNhbGxzIHRoZSBpQ29udGFjdCBhcGkgLCByZXR1cm5zIGFuIG9iamVjdCByZXByZXNlbnRhdGlvbiBvZiB0aGUgeG1sIHJlc3BvbnNlLiBSZXNvdXJjZSBpcyByZWxhdGl2ZSB0byAiL2ljcC9hLzxhY2NvdW50IGlkPi8iCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBjYWxsSUNvbnRhY3RBUEkoJHJlc291cmNlLCR2ZXJiPSJHRVQiLCRkYXRhPSIiKQoJewoJCS8vbWFrZSBzdXJlIHdlIGhhdmUgYW4gYWNjb3VudCBpZAoJCWlmIChlbXB0eSgkdGhpcy0+YWNjb3VudF9pZCkpCgkJewoJCQkkcmVzcG9uc2UgPSAkdGhpcy0+Z2V0QWNjb3VudElkKCk7CgkJCWlmICgkcmVzcG9uc2UtPnR5cGUgIT0gTU1fUmVzcG9uc2U6OiRTVUNDRVNTKQoJCQl7CgkJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSR0aGlzLT5hY2NvdW50X2lkID0gJHJlc3BvbnNlLT5tZXNzYWdlOwoJCQl9CgkJfQoJCQoJCSR1cmwgPSAieyR0aGlzLT5ob3N0fS9pY3AvYS97JHRoaXMtPmFjY291bnRfaWR9L3skcmVzb3VyY2V9IjsKCQkkeG1sID0gc2ltcGxleG1sX2xvYWRfc3RyaW5nKCR0aGlzLT5kb0lDb250YWN0QVBJQ2FsbCgkdXJsLCR2ZXJiLCRkYXRhKSk7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkeG1sKTsJCgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiBkb0lDb250YWN0QVBJQ2FsbCgkdXJsLCR2ZXJiPSJHRVQiLCRkYXRhPSIiKQoJewoJCSRoZWFkZXJzID0gYXJyYXkoCgkJCQknQWNjZXB0OiB0ZXh0L3htbCcsCgkJCQknQ29udGVudC1UeXBlOiB0ZXh0L3htbCcsCgkJCQknQXBpLVZlcnNpb246IDIuMicsCgkJCQknQXBpLUFwcElkOiAnIC4gTU1fSUNvbnRhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6JEFQSV9LRVksCgkJCQknQXBpLVVzZXJuYW1lOiAnIC4gJHRoaXMtPnVzZXJuYW1lLAoJCQkJJ0FwaS1QYXNzd29yZDogJyAuICR0aGlzLT5wYXNzd29yZAoJCQkJKTsKCQkkY2g9Y3VybF9pbml0KCR1cmwpOwoJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9IVFRQSEVBREVSLCAkaGVhZGVycyk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCB0cnVlKTsKCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWUhPU1QsIGZhbHNlKTsKCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfU1NMX1ZFUklGWVBFRVIsIGZhbHNlKTsKCQkKCQkkY2xlYW51cF9wdXQgPSBmYWxzZTsKCQkKCQlzd2l0Y2ggKCR2ZXJiKSAKCQl7CgkJCWNhc2UgIlBPU1QiOgoJCQkJLy9kbyBwb3N0IHN0dWZmCgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQ1VTVE9NUkVRVUVTVCwgIlBPU1QiKTsKCQkJCWlmICghaW5pX2dldCgnc2FmZV9tb2RlJykgJiYgIWluaV9nZXQoJ29wZW5fYmFzZWRpcicpKQoJCQkJewoJCQkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7CgkJCQl9CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJGRhdGEpOwoJCQkJLy9UT0RPOiBQSFAgNS4yIHdvcmthcm91bmQgLSByZW1vdmUgb25jZSBzdXBwb3J0IGlzIGRyb3BwZWQKCQkJCWlmICh2ZXJzaW9uX2NvbXBhcmUoUEhQX1ZFUlNJT04sICc1LjMuMicpID49IDApCgkJCQl7CgkJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RSRURJUiwgNyk7CgkJCQl9CgkJCQlicmVhazsKCQkJY2FzZSAiUFVUIjoKCQkJCS8vZG8gcHV0IHN0dWZmCgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfQ1VTVE9NUkVRVUVTVCwgJ1BVVCcpOwoJCQkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICRkYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlICJERUxFVEUiOgoJCQkJLy9kbyBkZWxldGUgc3R1ZmYKCQkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9DVVNUT01SRVFVRVNULCAnREVMRVRFJyk7CgkJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJGRhdGEpOwoJCQljYXNlICJHRVQiOgoJCQlkZWZhdWx0OgoJCQkJLy9kZWZhdWx0IGlzICJHRVQiLCB3aGljaCBpcyBkZWZhdWx0IGN1cmwgYWN0aW9uCgkJCQlicmVhazsKCQl9CgkJCgkJJGJ1ZiA9IGN1cmxfZXhlYygkY2gpOwoJCWlmICgkY2xlYW51cF9wdXQpIAoJCXsKCQkJZmNsb3NlKCRwdXREYXRhKTsKCQl9CgkJY3VybF9jbG9zZSgkY2gpOwoJCXJldHVybiAkYnVmOwkJCgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDbGllbnRGb2xkZXJJZCAoJGNsaWVudEZvbGRlcklEKQoJewoJCSR0aGlzLT5jbGllbnRfZm9sZGVyX2lkID0gJGNsaWVudEZvbGRlcklEOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2xpZW50Rm9sZGVySWQoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmNsaWVudF9mb2xkZXJfaWQ7Cgl9CgkKCS8qKgoJICogbG9jYXRlcyBhIGNvbnRhY3Qgb24gaUNvbnRhY3QsIGNyZWF0ZXMgaWYgbmVjZXNzYXJ5LCBhbmQgcmV0dXJucyB0aGUgY29udGFjdCBvYmplY3QKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHN5bmNDb250YWN0KCRlbWFpbCwkc3luY0RhdGEpIAoJewoJCSRzZWFyY2hfdXJsID0gImMveyR0aGlzLT5jbGllbnRfZm9sZGVyX2lkfS9jb250YWN0cz9lbWFpbD17JGVtYWlsfSI7CgkJJGlSZXNwb25zZSA9ICR0aGlzLT5jYWxsSUNvbnRhY3RBUEkoJHNlYXJjaF91cmwpOwoJCWlmICgoJHN0YXR1cyA9ICR0aGlzLT5nZXRpQ29udGFjdEVycm9yKCRpUmVzcG9uc2UpKSAhPT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRzdGF0dXMsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRpUmVzdWx0cyA9ICRpUmVzcG9uc2UtPm1lc3NhZ2U7CgkJJG51bV9yZXN1bHRzID0gaW50dmFsKChzdHJpbmcpJGlSZXN1bHRzLT50b3RhbCk7CgkJJGNvbnRhY3RJZCA9ICIiOwoJCWlmICgkbnVtX3Jlc3VsdHMgPiAwKQoJCXsKCQkJLy9leGlzdGluZyBjb250YWN0CgkJCSR0aGlzQ29udGFjdCA9ICRpUmVzdWx0cy0+Y29udGFjdHMtPmNvbnRhY3RbMF07CgkJCXVuc2V0KCR0aGlzQ29udGFjdC0+Y3JlYXRlRGF0ZSk7CgkJCXVuc2V0KCR0aGlzQ29udGFjdC0+Ym91bmNlQ291bnQpOwoJCQkkY29udGFjdElkID0gKHN0cmluZykkdGhpc0NvbnRhY3QtPmNvbnRhY3RJZDsKCQl9CgkJZWxzZSAKCQl7CgkJCS8veG1sIGlzIHNsaWdodGx5IGRpZmZlcmVudCB3aGVuIGNyZWF0aW5nIGEgY29udGFjdAoJCQkkYWxsQ29udGFjdHMgPSBuZXcgU2ltcGxlWE1MRWxlbWVudCgiPGNvbnRhY3RzPjwvY29udGFjdHM+Iik7CgkJCSR0aGlzQ29udGFjdCA9ICRhbGxDb250YWN0cy0+YWRkQ2hpbGQoImNvbnRhY3QiKTsKCQkJJHRoaXNDb250YWN0LT5hZGRDaGlsZCgiZW1haWwiLCRlbWFpbCk7CgkJfQoJCQoJCS8vYWRkIGFueSB0YWdzIHRoYXQgYXJlIG1pc3NpbmcKCQlmb3JlYWNoICgkc3luY0RhdGEgYXMgJHJlcXVpcmVkUHJvcGVydHk9PiRyZXF1aXJlZFByb3BlcnR5VmFsdWUpCgkJewoJCQlpZiAoaXNzZXQoJHRoaXNDb250YWN0LT4kcmVxdWlyZWRQcm9wZXJ0eSkpCgkJCXsKCQkJCSR0aGlzQ29udGFjdC0+JHJlcXVpcmVkUHJvcGVydHkgPSAkcmVxdWlyZWRQcm9wZXJ0eVZhbHVlOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSR0aGlzQ29udGFjdC0+YWRkQ2hpbGQoJHJlcXVpcmVkUHJvcGVydHksJHJlcXVpcmVkUHJvcGVydHlWYWx1ZSk7CQoJCQl9CgkJfQoJCQoJCS8vcHVzaCB0byBzZXJ2ZXIKCQlpZiAoJGNvbnRhY3RJZCA9PSAiIikKCQl7CgkJCS8vY3JlYXRlCgkJCSRzeW5jUmVzcG9uc2UgPSAkdGhpcy0+Y2FsbElDb250YWN0QVBJKCJjL3skdGhpcy0+Y2xpZW50X2ZvbGRlcl9pZH0vY29udGFjdHMvIiwiUE9TVCIsJGFsbENvbnRhY3RzLT5hc1htbCgpKTsKCQl9CgkJZWxzZSAKCQl7CgkJCS8vdXBkYXRlCgkJCSRzeW5jUmVzcG9uc2UgPSAkdGhpcy0+Y2FsbElDb250YWN0QVBJKCJjL3skdGhpcy0+Y2xpZW50X2ZvbGRlcl9pZH0vY29udGFjdHMveyRjb250YWN0SWR9IiwiUFVUIiwkdGhpc0NvbnRhY3QtPmFzWG1sKCkpOwkJCQkKCQl9CgkJCgkJaWYgKCgkc3RhdHVzID0gJHRoaXMtPmdldGlDb250YWN0RXJyb3IoJHN5bmNSZXNwb25zZSkpICE9PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHN0YXR1cyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgoJGNvbnRhY3RJZD09IiIpPyRzeW5jUmVzcG9uc2UtPm1lc3NhZ2UtPmNvbnRhY3RzLT5jb250YWN0OiRzeW5jUmVzcG9uc2UtPm1lc3NhZ2UtPmNvbnRhY3QpOwkKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRpQ29udGFjdEVycm9yKCRyZXNwb25zZV9vYmopCgl7CgkJLy9pbiB0aGUgY29udGV4dCBvZiBhIGNhbGwgdG8gY2FsbElDb250YWN0KCksIGFuIGVycm9yIE1NX1Jlc3BvbnNlIG1lYW5zIGEgdHJhbnNtaXNzaW9uIGVycm9yCgkJaWYgKCgkcmVzcG9uc2Vfb2JqLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpIHx8ICEoJHJlc3BvbnNlX29iaiBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAiRXJyb3IgY29ubmVjdGluZyB0byBpQ29udGFjdCI7CgkJfQoJCQoJCWlmIChpc3NldCgkcmVzcG9uc2Vfb2JqLT5tZXNzYWdlLT5lcnJvcnMpICYmIGlzc2V0KCRyZXNwb25zZV9vYmotPm1lc3NhZ2UtPmVycm9ycy0+ZXJyb3IpKQoJCXsKCQkJcmV0dXJuICgoc3RyaW5nKSRyZXNwb25zZV9vYmotPm1lc3NhZ2UtPmVycm9ycy0+ZXJyb3IpOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCn0KCg==', 0, '2018-11-21 06:38:53');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(80, 'htmlutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0h0bWxVdGlscwp7CglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEVtcGxveWVlcygkc2VsZWN0aW9ucz1udWxsKQoJewoJCSRlbWFpbHMgPSBNTV9FbXBsb3llZTo6Z2V0RW1wbG95ZWVzTGlzdCgpOwoJCQoJCWlmKGlzX251bGwoJHNlbGVjdGlvbnMpIHx8ICRzZWxlY3Rpb25zID09ICIiKSB7CgkJCSRzZWxlY3Rpb25zID0gJGVtYWlscy0+ZGVmYXVsdDsKCQl9CgkJCgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGVtYWlscy0+bGlzdCwgJHNlbGVjdGlvbnMpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFdvcmRQcmVzc1JvbGVzKCRzZWxlY3Rpb25zPW51bGwpCgl7CgkJZ2xvYmFsICR3cF9yb2xlczsKCQkkcm9sZXMgPSAkd3Bfcm9sZXMtPmdldF9uYW1lcygpOwoJCQoJCSRsaXN0ID0gYXJyYXkoKTsKCQkKCQlmb3JlYWNoKCRyb2xlcyBhcyAkcm9sZV9pZD0+JHJvbGVfbmFtZSkKCQl7CgkJCSRsaXN0WyRyb2xlX2lkXSA9ICRyb2xlX25hbWU7CgkJfQoJCQoJCSRsaXN0WyIiXSA9ICImbWRhc2g7IE5vIHJvbGUgZm9yIHRoaXMgc2l0ZSAmbWRhc2g7IjsKCQkkbGlzdFtNTV9Sb2xlOjokUk9MRV9JR05PUkVdID0gIiZtZGFzaDsgRG9uJ3Qgc2V0IG9yIGNoYW5nZSByb2xlICZtZGFzaDsiOwoJCQoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9ucyk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0V29yZFByZXNzQ2F0ZWdvcmllcygkc2VsZWN0aW9ucz1udWxsKQoJewoJCSRjYXRlZ29yaWVzID0gZ2V0X2NhdGVnb3JpZXMoKTsKCQkKCQkkbGlzdCA9IGFycmF5KCk7CgkJCgkJZm9yZWFjaCgkY2F0ZWdvcmllcyBhcyAkY2F0ZWdvcnkpCgkJewoJCQkkbGlzdFskY2F0ZWdvcnktPnRlcm1faWRdID0gJGNhdGVnb3J5LT5uYW1lOwoJCX0KCQkKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnMpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBQcm9kdWN0cygkbWVtYmVyc2hpcElkLCAkc2VsZWN0aW9ucz1udWxsLCAkZGlzYWJsZWQ9bnVsbCkKCXsKCQkkbGlzdCA9IE1NX1Byb2R1Y3Q6OmdldE1lbWJlcnNoaXBQcm9kdWN0TGlzdCgkbWVtYmVyc2hpcElkKTsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnMsICRkaXNhYmxlZCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QnVuZGxlUHJvZHVjdHMoJGJ1bmRsZUlkLCAkc2VsZWN0aW9ucz1udWxsLCAkZGlzYWJlbGQ9bnVsbCkKCXsKCQkkbGlzdCA9IE1NX1Byb2R1Y3Q6OmdldEJ1bmRsZVByb2R1Y3RMaXN0KCRidW5kbGVJZCk7CgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3QsICRzZWxlY3Rpb25zLCAkZGlzYWJlbGQpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEN1c3RvbUZpZWxkcygkc2VsZWN0aW9ucz1udWxsLCAkaW5jbHVkZUhpZGRlbj10cnVlKQoJewoJCSRsaXN0ID0gTU1fQ3VzdG9tRmllbGQ6OmdldEN1c3RvbUZpZWxkc0xpc3QoZmFsc2UsICRpbmNsdWRlSGlkZGVuKTsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnMpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBzKCRzZWxlY3Rpb25zPW51bGwsICRhY3RpdmVTdGF0dXNPbmx5PWZhbHNlLCAkZmlsdGVyQnlTdWJUeXBlPSIiKQoJewoJCSRsaXN0ID0gTU1fTWVtYmVyc2hpcExldmVsOjpnZXRNZW1iZXJzaGlwTGV2ZWxzTGlzdCgkYWN0aXZlU3RhdHVzT25seSwgJGZpbHRlckJ5U3ViVHlwZSk7CQoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9ucyk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QnVuZGxlcygkc2VsZWN0aW9ucz1udWxsLCAkYWN0aXZlU3RhdHVzT25seT1mYWxzZSwgJGZpbHRlckJ5U3ViVHlwZT0iIikKCXsKCQkkbGlzdCA9IE1NX0J1bmRsZTo6Z2V0QnVuZGxlc0xpc3QoJGFjdGl2ZVN0YXR1c09ubHksICRmaWx0ZXJCeVN1YlR5cGUpOwoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9ucyk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UHJvZHVjdHMoJHNlbGVjdGlvbnM9bnVsbCwgJGV4Y2x1ZGVQcm9kdWN0SWRzPW51bGwpCgl7CgkJJGxpc3QgPSBNTV9Qcm9kdWN0OjpnZXRBbGwoJGV4Y2x1ZGVQcm9kdWN0SWRzKTsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnMpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q291cG9uQ29kZXMoJHNlbGVjdGlvbnM9bnVsbCwgJGV4Y2x1ZGVDb3Vwb25JZHM9bnVsbCkKCXsKCQkkbGlzdCA9IE1NX0NvdXBvbjo6Z2V0QWxsQ29kZXMoKTsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnMpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Tm9uRnJlZUNvdXBvbkNvZGVzKCRzZWxlY3Rpb25zPW51bGwsICRleGNsdWRlQ291cG9uSWRzPW51bGwpCgl7CgkJJGxpc3QgPSBNTV9Db3Vwb246OmdldEFsbENvZGVzKHRydWUpOwoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9ucyk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TWVtYmVyU3RhdHVzTGlzdCgkc2VsZWN0aW9ucz1udWxsKQoJewoJCSRsaXN0ID0gTU1fU3RhdHVzOjpnZXRTdGF0dXNUeXBlc0xpc3QoKTsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnMpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEN1c3RvbUZpZWxkVHlwZUxpc3QoJHNlbGVjdGlvbnM9bnVsbCkKCXsKCQkkbGlzdCA9IE1NX0N1c3RvbUZpZWxkOjpnZXRGaWVsZFR5cGVMaXN0KCk7CgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3QsICRzZWxlY3Rpb25zKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRFdmVudFR5cGVzTGlzdCgkc2VsZWN0aW9ucz1udWxsKQoJewoJCSRsaXN0ID0gTU1fRXZlbnQ6OmdldEV2ZW50VHlwZXNMaXN0KCRzZWxlY3Rpb25zKTsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnMpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFjdGlvbnNMaXN0KCRzZWxlY3Rpb25zPW51bGwpCgl7CgkJJGxpc3QgPSBNTV9BY3Rpb246OmdldEFjdGlvbnNMaXN0KCk7CgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3QsICRzZWxlY3Rpb25zKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRGdWxsQ291bnRyeUxpc3QoJHNlbGVjdGlvbj0iIikKCXsKCQlpZihpc19udWxsKCRzZWxlY3Rpb24pIHx8ICRzZWxlY3Rpb24gPT0gIiIpIAoJCXsKCQkJJHNlbGVjdGlvbiA9IE1NX0NvdW50cnlVdGlsczo6JERGTFRfQ09VTlRSWV9JU087CgkJfQoJCQoJCSRsaXN0ID0gTU1fQ291bnRyeVV0aWxzOjpnZXRGdWxsQ291bnRyeUxpc3QoKTsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbik7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q291bnRyeUxpc3QoJHNlbGVjdGlvbj0iIikKCXsKCQlpZihpc19udWxsKCRzZWxlY3Rpb24pIHx8ICRzZWxlY3Rpb24gPT0gIiIpIAoJCXsKCQkJJHNlbGVjdGlvbiA9IE1NX0NvdW50cnlVdGlsczo6JERGTFRfQ09VTlRSWV9JU087CgkJfQoJCQoJCSRsaXN0ID0gTU1fQ291bnRyeVV0aWxzOjpnZXRDb3VudHJ5TGlzdCgpOwoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9uKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDb21taXNzaW9uUHJvZmlsZXNMaXN0KCRzZWxlY3Rpb25zPW51bGwpCgl7CgkJJGxpc3QgPSBNTV9Db21taXNzaW9uUHJvZmlsZTo6Z2V0Q29tbWlzc2lvblByb2ZpbGVzTGlzdCgpOwoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9ucyk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0VVNTdGF0ZXNMaXN0KCkKCXsKCQkkaHRtbCA9ICI8b3B0aW9uIHZhbHVlPSdBTCc+QWxhYmFtYTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdBSyc+QWxhc2thPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J0FTJz5BbWVyaWNhbiBTYW1vYTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdBWic+QXJpem9uYTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdBUic+QXJrYW5zYXM8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nQUUnPkFybWVkIEZvcmNlcyBBZnJpY2E8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nQUEnPkFybWVkIEZvcmNlcyBBbWVyaWNhczwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdBRSc+QXJtZWQgRm9yY2VzIENhbmFkYTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdBRSc+QXJtZWQgRm9yY2VzIEV1cm9wZTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdBRSc+QXJtZWQgRm9yY2VzIE1pZGRsZSBFYXN0PC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J0FQJz5Bcm1lZCBGb3JjZXMgUGFjaWZpYzwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdDQSc+Q2FsaWZvcm5pYTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdDTyc+Q29sb3JhZG88L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nQ1QnPkNvbm5lY3RpY3V0PC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J0RFJz5EZWxhd2FyZTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdEQyc+RGlzdHJpY3Qgb2YgQ29sdW1iaWE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nRkwnPkZsb3JpZGE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nR0EnPkdlb3JnaWE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nR1UnPkd1YW08L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nSEknPkhhd2FpaTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdJRCc+SWRhaG88L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nSUwnPklsbGlub2lzPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J0lOJz5JbmRpYW5hPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J0lBJz5Jb3dhPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J0tTJz5LYW5zYXM8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nS1knPktlbnR1Y2t5PC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J0xBJz5Mb3Vpc2lhbmE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nTUUnPk1haW5lPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J01IJz5NYXJzaGFsbCBJc2xhbmRzPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J01EJz5NYXJ5bGFuZDwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdNQSc+TWFzc2FjaHVzZXR0czwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdNSSc+TWljaGlnYW48L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nTU4nPk1pbm5lc290YTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdNUyc+TWlzc2lzc2lwcGk8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nTU8nPk1pc3NvdXJpPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J01UJz5Nb250YW5hPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J05FJz5OZWJyYXNrYTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdOVic+TmV2YWRhPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J05IJz5OZXcgSGFtcHNoaXJlPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J05KJz5OZXcgSmVyc2V5PC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J05NJz5OZXcgTWV4aWNvPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J05ZJz5OZXcgWW9yazwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdOQyc+Tm9ydGggQ2Fyb2xpbmE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nTkQnPk5vcnRoIERha290YTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdPSCc+T2hpbzwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdPSyc+T2tsYWhvbWE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nT1InPk9yZWdvbjwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdQQSc+UGVubnN5bHZhbmlhPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J1BSJz5QdWVydG8gUmljbzwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdSSSc+UmhvZGUgSXNsYW5kPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J1NDJz5Tb3V0aCBDYXJvbGluYTwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdTRCc+U291dGggRGFrb3RhPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J1ROJz5UZW5uZXNzZWU8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nVFgnPlRleGFzPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J1VUJz5VdGFoPC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J1ZUJz5WZXJtb250PC9vcHRpb24+CjxvcHRpb24gdmFsdWU9J1ZJJz5WaXJnaW4gSXNsYW5kczwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdWQSc+VmlyZ2luaWE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nV0EnPldhc2hpbmd0b248L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nV1YnPldlc3QgVmlyZ2luaWE8L29wdGlvbj4KPG9wdGlvbiB2YWx1ZT0nV0knPldpc2NvbnNpbjwvb3B0aW9uPgo8b3B0aW9uIHZhbHVlPSdXWSc+V3lvbWluZzwvb3B0aW9uPiI7CgkJcmV0dXJuICRodG1sOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nTWV0aG9kTGlzdCgkc2VsZWN0aW9uPSIiLCAkb3JkZXI9IiIpCgl7CgkJJG9wdGlvbnMgPSBNTV9TaGlwcGluZ01ldGhvZDo6Z2V0QXZhaWxhYmxlU2hpcHBpbmdPcHRpb25zKCRvcmRlcik7CgkJJGxpc3QgPSBhcnJheSgpOwoJCQoJCS8vIE5PVEUgaXQncyBpbXBvcnRhbnQgdGhhdCB0aGUgZm9ybWF0IG9mIG9wdGlvbiB0ZXh0IGJlICduYW1lIChwcmljZSknIGJlY2F1c2UgdGhlIGNoZWNrb3V0CgkJLy8gZm9ybSB1c2VzIGphdmFzY3JpcHQgdG8gcGFyc2UgdGhlIHNlbGVjdGVkIHNoaXBwaW5nIG1ldGhvZCB0byBnZXQgdGhlIHByaWNlIHRvIHVzZSBpbiBvbnBhZ2UKCQkvLyBjYWxjdWxhdGlvbnMuIFRoaXMgc3BlY2lmaWMgZm9ybWF0IGlzIHJlcXVpcmVkIHNvIHRoZSBzdHJpbmcgY2FuIGJlIHBhcnNlZCBjb3JyZWN0bHkuCgkJZm9yZWFjaCAoJG9wdGlvbnMgYXMgJHNoaXBwaW5nT3B0aW9uKQoJCXsKCQkJJGxpc3RbJHNoaXBwaW5nT3B0aW9uLT5nZXRLZXkoKV0gPSAieyRzaGlwcGluZ09wdGlvbi0+Z2V0TmFtZSgpfSAoeyRzaGlwcGluZ09wdGlvbi0+Z2V0UmF0ZSh0cnVlKX0pIjsKCQl9CgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3QsICRzZWxlY3Rpb24pOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENDRXhwTW9udGhMaXN0KCRzZWxlY3Rpb249IiIpCgl7CgkJJGxpc3QgPSBhcnJheSgpOwoJCQoJCSRsaXN0WyIwMSJdID0gIigwMSkgSmFuIjsKCQkkbGlzdFsiMDIiXSA9ICIoMDIpIEZlYiI7CgkJJGxpc3RbIjAzIl0gPSAiKDAzKSBNYXIiOwoJCSRsaXN0WyIwNCJdID0gIigwNCkgQXByIjsKCQkkbGlzdFsiMDUiXSA9ICIoMDUpIE1heSI7CgkJJGxpc3RbIjA2Il0gPSAiKDA2KSBKdW4iOwoJCSRsaXN0WyIwNyJdID0gIigwNykgSnVsIjsKCQkkbGlzdFsiMDgiXSA9ICIoMDgpIEF1ZyI7CgkJJGxpc3RbIjA5Il0gPSAiKDA5KSBTZXAiOwoJCSRsaXN0WyIxMCJdID0gIigxMCkgT2N0IjsKCQkkbGlzdFsiMTEiXSA9ICIoMTEpIE5vdiI7CgkJJGxpc3RbIjEyIl0gPSAiKDEyKSBEZWMiOwoJCQoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9uKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDQ0V4cFllYXJMaXN0KCRzZWxlY3Rpb249IiIpCgl7CgkJJGxpc3QgPSBhcnJheSgpOwoJCSRjcm50WWVhciA9IGludHZhbChkYXRlKCJZIikpOwoJCSRtYXhZZWFyID0gJGNybnRZZWFyICsgMjA7CgkJZm9yKCRpID0gJGNybnRZZWFyOyAkaSA8PSAkbWF4WWVhcjsgJGkrKykKCQl7CgkJCSRsaXN0WyRpXSA9ICRpOwoJCX0KCQkKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwkc2VsZWN0aW9uKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXREYXRhR3JpZFJlc3VsdHNDb3VudCgkc2VsZWN0aW9uPSIiKQoJewoJCSRsaXN0ID0gYXJyYXkoKTsKCQkKCQkkbGlzdFsiMTAiXSA9ICIxMCI7CgkJJGxpc3RbIjIwIl0gPSAiMjAiOwoJCSRsaXN0WyI1MCJdID0gIjUwIjsKCQkkbGlzdFsiMTAwIl0gPSAiMTAwIjsKCQkkbGlzdFsiNTAwIl0gPSAiNTAwIjsKCQkkbGlzdFsiMTAwMCJdID0gIjEwMDAiOwoJCQoJCXJldHVybiBzZWxmOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkc2VsZWN0aW9uKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRNTU9iamVjdFR5cGVzKCRzZWxlY3Rpb249IiIpCgl7CgkJJGxpc3QgPSBhcnJheSgpOwoJCQoJCSRsaXN0W01NX1RZUEVfUFJPRFVDVF0gPSAiUHJvZHVjdHMiOwoJCSRsaXN0W01NX1RZUEVfQlVORExFXSA9ICJCdW5kbGVzIjsKCQkkbGlzdFtNTV9UWVBFX01FTUJFUlNISVBfTEVWRUxdID0gIk1lbWJlcnNoaXAgTGV2ZWxzIjsKCQkkbGlzdFtNTV9UWVBFX0VNUExPWUVFX0FDQ09VTlRdID0gIkVtcGxveWVlcyI7CgkJaWYoTU1fQ3VzdG9tRmllbGQ6Omhhc0N1c3RvbUZpZWxkcygpKQoJCXsKCQkJJGxpc3RbTU1fVFlQRV9DVVNUT01fRklFTERdID0gIkN1c3RvbSBGaWVsZHMiOwoJCX0KCQkkbGlzdFtNTV9UWVBFX1BPU1RdID0gIlByb3RlY3RlZCBDb250ZW50IjsKCgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3QsICRzZWxlY3Rpb24pOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0U3VwcG9ydGVkQ3VycmVuY2llc0xpc3QoJHNlbGVjdGlvbj0iIikKCXsKCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdChNTV9DdXJyZW5jeVV0aWw6OmdldFN1cHBvcnRlZEN1cnJlbmNpZXMoKSwgJHNlbGVjdGlvbik7Cgl9CgkKCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdCwgJHNlbGVjdGlvbnM9bnVsbCwgJGRpc2FibGVkPW51bGwpCiAJewogCQkkaHRtbCA9ICIiOwogCQlpZighZW1wdHkoJGxpc3QpKQogCQl7CiAJCQlmb3JlYWNoKCRsaXN0IGFzICR2YWx1ZT0+JGtleSkKIAkJCXsKIAkJCQkkaXNTZWxlY3RlZCA9ICIiOwogCQkJCQogCQkJCWlmKCFpc19udWxsKCRzZWxlY3Rpb25zKSkKIAkJCQl7CgkgCQkJCWlmKGlzX2FycmF5KCRzZWxlY3Rpb25zKSkKCSAJCQkJewoJIAkJCQkJaWYoYXJyYXlfa2V5X2V4aXN0cygkdmFsdWUsICRzZWxlY3Rpb25zKSkKCSAJCQkJCXsKCSAJCQkJCQkkaXNTZWxlY3RlZCA9ICJzZWxlY3RlZCI7CgkgCQkJCQl9CgkgCQkJCX0KCSAJCQkJZWxzZSBpZih0cmltKCRzZWxlY3Rpb25zKSA9PSB0cmltKCR2YWx1ZSkpIAoJIAkJCQl7CgkgCQkJCQkkaXNTZWxlY3RlZCA9InNlbGVjdGVkIjsKCSAJCQkJfQogCQkJCX0KIAkJCQkKIAkJCQkkaXNEaXNhYmxlZCA9ICIiOwogCQkJCWlmKCFpc19udWxsKCRkaXNhYmxlZCkpCiAJCQkJewoJIAkJCQlpZihpc19hcnJheSgkZGlzYWJsZWQpKQoJIAkJCQl7CgkgCQkJCQlpZihhcnJheV9rZXlfZXhpc3RzKCR2YWx1ZSwgJGRpc2FibGVkKSkKCSAJCQkJCXsKCSAJCQkJCQkkaXNEaXNhYmxlZCA9ICJkaXNhYmxlZD0nZGlzYWJsZWQnIjsKCSAJCQkJCX0KCSAJCQkJfQoJIAkJCQllbHNlIGlmKCRkaXNhYmxlZCA9PSAkdmFsdWUpIAoJIAkJCQl7CgkgCQkJCQkkaXNEaXNhYmxlZCA9ImRpc2FibGVkPSdkaXNhYmxlZCciOwoJIAkJCQl9CiAJCQkJfQogCQkJCQogCQkJCSRodG1sIC49ICI8b3B0aW9uIHZhbHVlPSd7JHZhbHVlfScgeyRpc1NlbGVjdGVkfSB7JGlzRGlzYWJsZWR9PiIuc3RyaXBzbGFzaGVzKCRrZXkpLiI8L29wdGlvbj4KIjsKIAkJCX0JCiAJCX0KIAkJCiAJCXJldHVybiAkaHRtbDsKIAl9CiAJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNyZWF0ZUNoZWNrYm94R3JvdXAoJG9iaiwgJG5hbWUsICRzZWw9bnVsbCwgJGltZz0iIiwgJGRpc2FibGVkPW51bGwsICRvbmNoYW5nZT0iIiwgJHZhbHVlV2lkdGg9ZmFsc2UsICRhc1JhZGlvQnV0dG9uPWZhbHNlKQogCXsKCQkkb25jaGFuZ2UgPSAoIWVtcHR5KCRvbmNoYW5nZSkpPyJvbmNoYW5nZT1cInskb25jaGFuZ2V9XCIiOiIiOwogCQkkaW1hZ2UgPSAiIjsKCQlpZighZW1wdHkoJGltZykpCgkJewoJCQkkaW1hZ2UgPSBNTV9VdGlsczo6Z2V0SW1hZ2VVcmwoJGltZyk7CgkJCWlmKCFlbXB0eSgkaW1hZ2UpKQoJCQkJJGltYWdlID0gIjxpbWcgc3JjPSd7JGltYWdlfScgLz4iOwoJCX0KCQkKIAkJJHNlbGVjdCA9ICI8dGFibGUgd2lkdGg9Jzk4JSc+IjsKIAkJaWYoIWVtcHR5KCRvYmopKQogCQl7CiAJCQlmb3JlYWNoKCRvYmogYXMgJGs9PiR2KQogCQkJewogCQkJCSRkID0gIiI7CiAJCQkJJHMgPSAiIjsKIAkJCQlpZighaXNfbnVsbCgkc2VsKSkKIAkJCQl7CgkgCQkJCWlmKGlzX2FycmF5KCRzZWwpKQoJIAkJCQl7CgkgCQkJCQlpZihhcnJheV9rZXlfZXhpc3RzKCRrLCAkc2VsKSkKCSAJCQkJCXsKCSAJCQkJCQkkcyA9ICJjaGVja2VkIjsKCSAJCQkJCX0KCSAJCQkJfQoJIAkJCQllbHNlIGlmKCRzZWw9PSRrKQoJIAkJCQkJJHMgPSJjaGVja2VkIjsKIAkJCQl9CiAJCQkJaWYoIWlzX251bGwoJGRpc2FibGVkKSkKIAkJCQl7CgkgCQkJCWlmKGlzX2FycmF5KCRkaXNhYmxlZCkpCgkgCQkJCXsKCSAJCQkJCWlmKGFycmF5X2tleV9leGlzdHMoJGssICRkaXNhYmxlZCkpCgkgCQkJCQl7CgkgCQkJCQkJJGQgPSAiZGlzYWJsZWQiOwoJIAkJCQkJfQoJIAkJCQl9CgkgCQkJCWVsc2UgaWYoJGRpc2FibGVkPT0kaykKCSAJCQkJCSRkID0iZGlzYWJsZWQiOwogCQkJCX0KIAkJCQkkdmFsdWUgPSAiIjsKCQkJCSRpbWFnZSA9ICIiOwoJCQkJJGFsdCA9ICIiOwogCQkJCWlmKGlzX29iamVjdCgkdikgJiYgaXNzZXQoJHYtPnZhbHVlKSkKIAkJCQl7CiAJCQkJCSR2YWx1ZSA9ICR2LT52YWx1ZTsKCQkJCQlpZihpc3NldCgkdi0+aW1hZ2UpICYmIGVtcHR5KCRpbWFnZSkpCgkJCQkJewoJCQkJCQlpZihwcmVnX21hdGNoKCIvKDxpKS8iLCAkdi0+aW1hZ2UpKQoJCQkJCQl7CgkJCQkJCQkkaW1hZ2UgPSAkdi0+aW1hZ2U7CgkJCQkJCX0KCQkJCQkJZWxzZSAKCQkJCQkJewoJCQkJCQkJJGltYWdlID0gTU1fVXRpbHM6OmdldEltYWdlVXJsKCR2LT5pbWFnZSk7CgkJCQkJCQlpZihwcmVnX21hdGNoKCIvKGh0dHApLyIsICR2LT5pbWFnZSkpewoJCQkJCQkJCSRpbWFnZSA9ICR2LT5pbWFnZTsKCQkJCQkJCX0KCQkJCQkJCWlmKCFlbXB0eSgkaW1hZ2UpICYmICFlbXB0eSgkdi0+aW1hZ2UpKXsKCQkJCQkJCQkkaW1hZ2UgPSAiPGltZyBzcmM9J3skaW1hZ2V9JyAvPiI7CgkJCQkJCQl9CgkJCQkJCQllbHNlewoJCQkJCQkJCSRpbWFnZT0iIjsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQlpZihpc3NldCgkdi0+YWx0KSl7CgkJCQkJCSRhbHQgPSAkdi0+YWx0OwoJCQkJCX0KIAkJCQl9CiAJCQkJZWxzZSBpZihpc19vYmplY3QoJHYpKQogCQkJCXsKIAkJCQkJY29udGludWU7CiAJCQkJfQogCQkJCWVsc2UKIAkJCQkJJHZhbHVlID0gJHY7CgogCQkJCSR0aXRsZSA9ICghZW1wdHkoJGFsdCkpPyRhbHQ6JHZhbHVlOwogCQkJCWlmKGludHZhbCgkdmFsdWVXaWR0aCkgPiAwKQogCQkJCXsKIAkJCSAJCSR2YWx1ZSA9IE1NX1V0aWxzOjphYmJyZXZTdHJpbmcoJHZhbHVlLCAkdmFsdWVXaWR0aCk7CiAJCQkJfQogCQkJCWVsc2UKIAkJCQl7CiAJCQkJCSR2YWx1ZSA9IE1NX1V0aWxzOjphYmJyZXZTdHJpbmcoJHZhbHVlKTsKIAkJCQl9CiAJCQkgCSRmaWVsZFR5cGUgPSAiY2hlY2tib3giOwogCQkJIAlpZigkYXNSYWRpb0J1dHRvbil7CiAJCQkgCQkkZmllbGRUeXBlID0gInJhZGlvIjsKIAkJCSAJfQogCQkJCSRzZWxlY3QuPSI8dHIgdGl0bGU9J3skdGl0bGV9Jz48dGQgc3R5bGU9J3dpZHRoOjVweDsgdmVydGljYWwtYWxpZ246dG9wOyc+PGlucHV0IHR5cGU9J3skZmllbGRUeXBlfScgdmFsdWU9J3ska30nIG5hbWU9J3skbmFtZX0nIGlkPSd7JG5hbWV9JyB7JHN9IHskZH0geyRvbmNoYW5nZX0+PC90ZD48dGQgd2lkdGg9JzUlJz57JGltYWdlfTwvdGQ+PHRkIHdpZHRoPSc5MCUnPiIuc3RyaXBzbGFzaGVzKCR2YWx1ZSkuIjwvdGQ+PC90cj4iOwogCQkJfQkKIAkJfQogCQlyZXR1cm4gJHNlbGVjdC4iPC90YWJsZT4iOwogCX0KIAkKIAlwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEVtYWlsU2VydmljZVByb3ZpZGVyc0xpc3QoJHNlbGVjdGlvbj0iIikgCiAJewogCQkkbGlzdCA9IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyOjpnZXRFbWFpbFNlcnZpY2VQcm92aWRlcnNMaXN0KCk7CgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3QsICRzZWxlY3Rpb24pOwogCX0KIAkKIAlwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFmZmlsaWF0ZVByb3ZpZGVyc0xpc3QoJHNlbGVjdGlvbj0iIikgCiAJewogCQkkbGlzdCA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyOjpnZXRBZmZpbGlhdGVQcm92aWRlcnNMaXN0KCk7CgkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3QsICRzZWxlY3Rpb24pOwogCX0KfQo=', 0, '2018-11-21 06:38:54'),
(81, 'employeesview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0VtcGxveWVlc1ZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NFVF9ERUZBVUxUID0gInNldERlZmF1bHQiOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZUVtcGxveWVlKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUVtcGxveWVlKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NFVF9ERUZBVUxUOgoJCQkJCXJldHVybiAkdGhpcy0+c2V0QXNEZWZhdWx0KCRwb3N0KTsKCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgkc29ydEJ5PW51bGwsICRzb3J0RGlyPW51bGwpCgl7CgkJcmV0dXJuIHBhcmVudDo6Z2V0RGF0YShNTV9UQUJMRV9FTVBMT1lFRV9BQ0NPVU5UUywgbnVsbCwgJHNvcnRCeSwgJHNvcnREaXIpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNhdmVFbXBsb3llZSgkcG9zdCkKCXsKCQkkZW1wbG95ZWUgPSBuZXcgTU1fRW1wbG95ZWUoKTsKCQkKCQlpZihpc3NldCgkcG9zdFsiaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJpZCJdKSA+IDApIAoJCXsKCQkJJGVtcGxveWVlLT5zZXRJZCgkcG9zdFsiaWQiXSk7CgkJCSRlbXBsb3llZS0+Z2V0RGF0YSgpOwoJCX0KCQkKCSAJJGVtcGxveWVlLT5zZXREaXNwbGF5TmFtZSgkcG9zdFsibW1fZGlzcGxheV9uYW1lIl0pOwoJIAkkZW1wbG95ZWUtPnNldEZpcnN0TmFtZSgkcG9zdFsibW1fZmlyc3RfbmFtZSJdKTsKCSAJJGVtcGxveWVlLT5zZXRMYXN0TmFtZSgkcG9zdFsibW1fbGFzdF9uYW1lIl0pOwoJIAkKCSAJaWYoaXNzZXQoJHBvc3RbIm1tX3Bhc3N3b3JkIl0pKQoJIAl7CgkgCQkkZW1wbG95ZWUtPnNldFBhc3N3b3JkKCRwb3N0WyJtbV9wYXNzd29yZCJdKTsKCSAJfQoJIAkKCSAJJGVtcGxveWVlLT5zZXRSb2xlSWQoJHBvc3RbIm1tX3JvbGVfaWQiXSk7CgkgCSRlbXBsb3llZS0+c2V0UGhvbmUoJHBvc3RbIm1tX3Bob25lIl0pOwoJIAkkZW1wbG95ZWUtPnNldEVtYWlsKCRwb3N0WyJtbV9lbWFpbCJdKTsKCSAJJGVtcGxveWVlLT5zZXRBbGxvd0V4cG9ydCgkcG9zdFsibW1fYWxsb3dfZXhwb3J0X3ZhbCJdKTsKCSAJJGVtcGxveWVlLT5zZXRJc0RlZmF1bHQoJHBvc3RbIm1tX2lzX2RlZmF1bHQiXSk7CgkJCgkgCWlmKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRGRUFUVVJFX0VNUExPWUVFX0FDQ09VTlRTKSAmJiAhZW1wdHkoJHBvc3RbJ21tX21lbWJlcnNoaXBzJ10pKQoJIAl7CgkgCQkkZW1wbG95ZWUtPnNldEFjY2Vzc1Jlc3RyaWN0aW9ucyhNTV9FbXBsb3llZTo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVAsICRwb3N0WyJtbV9tZW1iZXJzaGlwcyJdKTsKCSAJfQoJIAllbHNlCgkgCXsKCSAJCSRlbXBsb3llZS0+c2V0QWNjZXNzUmVzdHJpY3Rpb25zKE1NX0VtcGxveWVlOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCwgYXJyYXkoKSk7CgkgCX0KCSAJCgkgCSRyZXN1bHQgPSAkZW1wbG95ZWUtPmNvbW1pdERhdGEoKTsKCSAJCgkgCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkgCgkgCXsKCQkJcmV0dXJuICRyZXN1bHQ7CgkgCX0KCSAJCgkgCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsJCgkgCQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHJlbW92ZUVtcGxveWVlKCRwb3N0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZihpc3NldCgkcG9zdFsiaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJpZCJdKSA+IDApCgkJewoJCQkkcmVtb3ZlTGlua2VkID0gKGlzc2V0KCRwb3N0WydyZW1vdmVfbGlua2VkJ10pICYmICgkcG9zdFsncmVtb3ZlX2xpbmtlZCddID09ICJ0cnVlIikpP3RydWU6ZmFsc2U7CgkJCSRlbXBsb3llZSA9IG5ldyBNTV9FbXBsb3llZSgkcG9zdFsiaWQiXSk7CgkJCSRyZXN1bHQgPSAkZW1wbG95ZWUtPmRlbGV0ZSgkcmVtb3ZlTGlua2VkKTsKCQkJCgkJCWlmKCRyZXN1bHQpIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0gCgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoaXMgZW1wbG95ZWUgaGFzIGV4aXN0aW5nIGFzc29jaWF0aW9ucyBhbmQgY2FuJ3QgYmUgcmVtb3ZlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gZGVsZXRlIGVtcGxveWVlLiBObyBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKIAlwcml2YXRlIGZ1bmN0aW9uIHNldEFzRGVmYXVsdCgkcG9zdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoaXNzZXQoJHBvc3RbImlkIl0pICYmIGludHZhbCgkcG9zdFsiaWQiXSkgPiAwKQoJCXsKCQkJLy8gY2xlYXIgY3VycmVudCBkZWZhdWx0IGFjY291bnQKCQkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9FTVBMT1lFRV9BQ0NPVU5UUy4iIHNldCBpc19kZWZhdWx0PScwJyB3aGVyZSBpc19kZWZhdWx0PScxJyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCgkJCS8vIHNldCBuZXcgZGVmYXVsdCBhY2NvdW50CgkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfRU1QTE9ZRUVfQUNDT1VOVFMuIiBzZXQgaXNfZGVmYXVsdD0nMScgd2hlcmUgaWQ9JyVkJyBsaW1pdCAxIjsKCQkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHBvc3RbImlkIl0pKTsKCQkJCgkJCWlmKCRyZXN1bHRzKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNldCBlbXBsb3llZSBhcyBkZWZhdWx0LiBObyBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9Cn0K', 0, '2018-11-21 06:38:54'),
(82, 'idevaffiliateprovider', 'Y2xhc3MgTU1fSURldkFmZmlsaWF0ZVByb3ZpZGVyIGV4dGVuZHMgTU1fQWJzdHJhY3RBZmZpbGlhdGVQcm92aWRlciAKewoJcHJpdmF0ZSBzdGF0aWMgJE1NX0NBUlRfUFJPRklMRV9JRCA9IDk2OwoJCglwcml2YXRlIHN0YXRpYyAkUEFZT1VUX1RZUEVfUEVSQ0VOVCA9IDE7Cglwcml2YXRlIHN0YXRpYyAkUEFZT1VUX1RZUEVfRkxBVFJBVEUgPSAyOwoJCglwcml2YXRlICRhcGlVcmw7Cglwcml2YXRlICRhcGlTZWNyZXRLZXk7Cglwcml2YXRlICRpcFRyYWNraW5nRW5hYmxlZDsKCXByaXZhdGUgJHNlbmRBZmZpbGlhdGVXZWxjb21lRW1haWw7Cglwcml2YXRlICRhZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0OwoJcHJpdmF0ZSAkYWZmaWxpYXRlV2VsY29tZUVtYWlsQm9keTsKCQoJLyoqCgkgKiBUbyBtYWtlIGEgY29ubmVjdGlvbiB0byBpRGV2QWZmaWxpYXRlIGEgVVJMIGFuZCBBUEkgc2VjcmV0IGtleSBhcmUgcmVxdWlyZWQKCSAqIEBwYXJhbSBPYmplY3QgJHByb3ZpZGVyX2luZm8gT3B0aW9ucyBvYmplY3QKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwcm92aWRlcl9pbmZvKSAKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRwcm92aWRlcl9pbmZvKTsKCQkKCQkkYWRkaXRpb25hbF9kYXRhID0gKGlzX29iamVjdCgkcHJvdmlkZXJfaW5mbykgJiYgaXNzZXQoJHByb3ZpZGVyX2luZm8tPmFkZGl0aW9uYWxfZGF0YSkpP3Vuc2VyaWFsaXplKCRwcm92aWRlcl9pbmZvLT5hZGRpdGlvbmFsX2RhdGEpOmFycmF5KCk7CgkJaWYgKGlzc2V0KCRhZGRpdGlvbmFsX2RhdGFbJ2FwaVVybCddKSkgCgkJewoJCQkkdGhpcy0+YXBpVXJsID0gJGFkZGl0aW9uYWxfZGF0YVsnYXBpVXJsJ107CgkJfQoJCQoJCWlmIChpc3NldCgkYWRkaXRpb25hbF9kYXRhWydhcGlTZWNyZXRLZXknXSkpCgkJewoJCQkkdGhpcy0+YXBpU2VjcmV0S2V5ID0gJGFkZGl0aW9uYWxfZGF0YVsnYXBpU2VjcmV0S2V5J107CgkJfQoJCQoJCWlmIChpc3NldCgkYWRkaXRpb25hbF9kYXRhWydpcFRyYWNraW5nRW5hYmxlZCddKSkKCQl7CgkJCSR0aGlzLT5pcFRyYWNraW5nRW5hYmxlZCA9ICRhZGRpdGlvbmFsX2RhdGFbJ2lwVHJhY2tpbmdFbmFibGVkJ107CgkJfQoJCQoJCWlmIChpc3NldCgkYWRkaXRpb25hbF9kYXRhWydzZW5kQWZmaWxpYXRlV2VsY29tZUVtYWlsJ10pKQoJCXsKCQkJJHRoaXMtPnNlbmRBZmZpbGlhdGVXZWxjb21lRW1haWwgPSAkYWRkaXRpb25hbF9kYXRhWydzZW5kQWZmaWxpYXRlV2VsY29tZUVtYWlsJ107CgkJfQoJCQoJCWlmIChpc3NldCgkYWRkaXRpb25hbF9kYXRhWydhZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0J10pKQoJCXsKCQkJJHRoaXMtPmFmZmlsaWF0ZVdlbGNvbWVFbWFpbFN1YmplY3QgPSAkYWRkaXRpb25hbF9kYXRhWydhZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0J107CgkJfQoJCQoJCWlmIChpc3NldCgkYWRkaXRpb25hbF9kYXRhWydhZmZpbGlhdGVXZWxjb21lRW1haWxCb2R5J10pKQoJCXsKCQkJJHRoaXMtPmFmZmlsaWF0ZVdlbGNvbWVFbWFpbEJvZHkgPSAkYWRkaXRpb25hbF9kYXRhWydhZmZpbGlhdGVXZWxjb21lRW1haWxCb2R5J107CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWZmaWxpYXRlVHJhY2tpbmdJZCgpCgl7CgkJcmV0dXJuICJpZGV2X2lkIjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHRyYWNrQ29tbWlzc2lvbihNTV9Db21taXNzaW9uUHJvZmlsZSAkY29tbWlzc2lvblByb2ZpbGUsICRhZmZpbGlhdGVJZCwgJG9yZGVyTnVtYmVyLCAkb3JkZXJUb3RhbCwgJG9yZGVyRGF0YSwgJGlzUmViaWxsKQoJewoJCSRwYXJhbXMgPSBhcnJheSgpOwoJCSRwYXJhbXNbInNlY3JldCJdID0gJHRoaXMtPmdldEFQSVNlY3JldEtleSgpOwoJCSRwYXJhbXNbImlkZXZfb3JkZXJudW0iXSA9ICRvcmRlck51bWJlcjsKCQkkcGFyYW1zWyJpZGV2X3NhbGVhbXQiXSA9ICRvcmRlclRvdGFsOwoJCSRwYXJhbXNbImlwX2FkZHJlc3MiXSA9ICRvcmRlckRhdGFbIm9yZGVyX2lwX2FkZHJlc3MiXTsKCQkkcGFyYW1zWyJwcm9maWxlIl0gPSBzZWxmOjokTU1fQ0FSVF9QUk9GSUxFX0lEOwoJCQoJCWlmKCFlbXB0eSgkYWZmaWxpYXRlSWQpKQoJCXsKCQkJJHBhcmFtc1siYWZmaWxpYXRlX2lkIl0gPSAkYWZmaWxpYXRlSWQ7CgkJfQoJCQoJCS8vIGNoZWNrIGZvciBhIGNvdXBvbiBjb2RlCgkJaWYoaXNzZXQoJG9yZGVyRGF0YVsib3JkZXJfY291cG9ucyJdKSkKCQl7CgkJCSRjb3Vwb25zID0ganNvbl9kZWNvZGUoc3RyaXBzbGFzaGVzKCRvcmRlckRhdGFbIm9yZGVyX2NvdXBvbnMiXSkpOwoJCQoJCQlmb3JlYWNoKCRjb3Vwb25zIGFzICRjb3Vwb24pCgkJCXsKCQkJCSRwYXJhbXNbImNvdXBvbl9jb2RlIl0gPSAkY291cG9uLT5jb2RlOwoJCQkJCgkJCQkvLyBvbmx5IHN1cHBvcnRzIG9uZSBjb3Vwb24gcmlnaHQgbm93CgkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQkvLyBhcHBlbmQgcHJvZHVjdCBJRHMKCQlpZihpc3NldCgkb3JkZXJEYXRhWyJvcmRlcl9wcm9kdWN0cyJdKSkKCQl7CgkJCSRwcm9kdWN0cyA9IGpzb25fZGVjb2RlKHN0cmlwc2xhc2hlcygkb3JkZXJEYXRhWyJvcmRlcl9wcm9kdWN0cyJdKSk7CgkJCgkJCWZvcmVhY2goJHByb2R1Y3RzIGFzICRwcm9kdWN0KQoJCQl7CgkJCQkkcGFyYW1zWyJwcm9kdWN0c19wdXJjaGFzZWQiXSA9ICRwcm9kdWN0LT5pZDsKCQkKCQkJCS8vIG9ubHkgc3VwcG9ydHMgb25lIHByb2R1Y3QgcmlnaHQgbm93LCB3aGVuIG11bHRpcGxlIHByb2R1Y3RzIHN1cHBvcnRlZCBzZXBhcmF0ZSB0aGVtIGJ5IGEgfAoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJCgkJLy8gc2VlIGlmIHRoZXJlIGFyZSBjdXN0b20gcmViaWxsIGNvbW1pc3Npb25zCgkJaWYoJGlzUmViaWxsICYmICRjb21taXNzaW9uUHJvZmlsZS0+Z2V0UmViaWxsQ29tbWlzc2lvblR5cGUoKSAhPSBNTV9Db21taXNzaW9uUHJvZmlsZTo6JENPTU1JU1NJT05fVFlQRV9ERUZBVUxUKQoJCXsKCQkJc3dpdGNoKCRjb21taXNzaW9uUHJvZmlsZS0+Z2V0UmViaWxsQ29tbWlzc2lvblR5cGUoKSkKCQkJewoJCQkJY2FzZSBNTV9Db21taXNzaW9uUHJvZmlsZTo6JENPTU1JU1NJT05fVFlQRV9QRVJDRU5UOgoJCQkJCSRwYXJhbXNbImlkZXZfcGVyY2VudCJdID0gaW50dmFsKCRjb21taXNzaW9uUHJvZmlsZS0+Z2V0UmViaWxsQ29tbWlzc2lvblZhbHVlKCkpIC8gMTAwOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBNTV9Db21taXNzaW9uUHJvZmlsZTo6JENPTU1JU1NJT05fVFlQRV9GTEFUUkFURToKCQkJCQkkcGFyYW1zWyJpZGV2X2NvbW1pc3Npb24iXSA9ICRjb21taXNzaW9uUHJvZmlsZS0+Z2V0UmViaWxsQ29tbWlzc2lvblZhbHVlKCk7CgkJCQkJYnJlYWs7CgkJCX0KCQl9CgkJCQoJCXJldHVybiAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0QVBJVXJsKCkuIi9zYWxlLnBocCIsICJQT1NUIiwgJHBhcmFtcyk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZXZlcnNlQ29tbWlzc2lvbigkYWZmaWxpYXRlSWQsICRvcmRlck51bWJlcikgCgl7IAoJCSRwYXJhbXMgPSBhcnJheSgpOwoJCSRwYXJhbXNbInNlY3JldCJdID0gJHRoaXMtPmdldEFQSVNlY3JldEtleSgpOwoJCSRwYXJhbXNbIm9yZGVyX251bWJlciJdID0gJG9yZGVyTnVtYmVyOwoJCQoJCXJldHVybiAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0QVBJVXJsKCkuIi9BUEkvc2NyaXB0cy90ZXJtaW5hdGVfY29tbWlzc2lvbi5waHAiLCAiUE9TVCIsICRwYXJhbXMpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlQWZmaWxpYXRlQWNjb3VudCgkdXNlckRhdGEpIAoJeyAKCQkkcHJvZmlsZVJlc3BvbnNlID0gJHRoaXMtPmdldFByb2ZpbGVJZEZvck1lbWJlcnNoaXBMZXZlbCgkdXNlckRhdGFbIm1lbWJlcnNoaXBfbGV2ZWwiXSk7CgkJCgkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcHJvZmlsZVJlc3BvbnNlKSAmJiAhZW1wdHkoJHByb2ZpbGVSZXNwb25zZS0+bWVzc2FnZSkpCgkJewoJCQkvLyBwcm9maWxlIGluZm8gaXMgaW4gdGhlIGZvcm1hdCB7cGF5b3V0TGV2ZWxJRH1fe3R5cGVJRH1fe2xldmVsTnVtYmVyfQoJCQkkcHJvZmlsZVBhcmFtcyA9IGV4cGxvZGUoIl8iLCAkcHJvZmlsZVJlc3BvbnNlLT5tZXNzYWdlKTsKCQkJCgkJCWlmKGlzX2FycmF5KCRwcm9maWxlUGFyYW1zKSAmJiBjb3VudCgkcHJvZmlsZVBhcmFtcykgPT0gMykKCQkJewoJCQkJJHR5cGUgPSAkcHJvZmlsZVBhcmFtc1sxXTsKCQkJCSRsZXZlbCA9ICRwcm9maWxlUGFyYW1zWzJdOwoJCQkJCgkJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCR1c2VyRGF0YVsibWVtYmVyX2lkIl0pOwoJCQkJCgkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJewkKCQkJCQkkcGFyYW1zID0gYXJyYXkoKTsKCQkJCQkkcGFyYW1zWyJzZWNyZXQiXSA9ICR0aGlzLT5nZXRBUElTZWNyZXRLZXkoKTsKCQkJCQkkcGFyYW1zWyJ1c2VybmFtZSJdID0gJHVzZXItPmdldFVzZXJuYW1lKCk7CgkJCQkJJHBhcmFtc1sicGFzc3dvcmQiXSA9IE1NX1V0aWxzOjpjcmVhdGVSYW5kb21TdHJpbmcoKTsKCQkJCQkkcGFyYW1zWyJlbWFpbCJdID0gJHVzZXItPmdldEVtYWlsKCk7CgkJCQkJJHBhcmFtc1sicGF5b3V0X3R5cGUiXSA9ICR0eXBlOwoJCQkJCSRwYXJhbXNbInBheW91dF9sZXZlbCJdID0gJGxldmVsOwoJCQkJCSRwYXJhbXNbImZpcnN0X25hbWUiXSA9ICR1c2VyLT5nZXRGaXJzdE5hbWUoKTsKCQkJCQkkcGFyYW1zWyJsYXN0X25hbWUiXSA9ICR1c2VyLT5nZXRMYXN0TmFtZSgpOwoJCQkJCSRwYXJhbXNbInBob25lIl0gPSAkdXNlci0+Z2V0UGhvbmUoKTsKCQkJCQkkcGFyYW1zWyJhZGRyZXNzXzEiXSA9ICR1c2VyLT5nZXRCaWxsaW5nQWRkcmVzcygpOwoJCQkJCSRwYXJhbXNbImNpdHkiXSA9ICR1c2VyLT5nZXRCaWxsaW5nQ2l0eSgpOwoJCQkJCSRwYXJhbXNbInN0YXRlIl0gPSAkdXNlci0+Z2V0QmlsbGluZ1N0YXRlKCk7CgkJCQkJJHBhcmFtc1siemlwIl0gPSAgJHVzZXItPmdldEJpbGxpbmdaaXBDb2RlKCk7CgkJCQkJJHBhcmFtc1siY291bnRyeSJdID0gJHVzZXItPmdldEJpbGxpbmdDb3VudHJ5KCk7CgkJCQkJJHBhcmFtc1siaXBfYWRkcmVzcyJdID0gTU1fVXRpbHM6OmdldENsaWVudElQQWRkcmVzcygpOwoJCQkJCQoJCQkJCS8vIGFkZCB1cGxpbmUgYWZmaWxpYXRlIGlmIHByZXNlbnQKCQkJCQkkYWZmaWxpYXRlSWQgPSBNTV9Db29raWVzOjpnZXRBZmZpbGlhdGVWYWx1ZSgpOwoJCQkJCQoJCQkJCWlmKCFlbXB0eSgkYWZmaWxpYXRlSWQpKQoJCQkJCXsKCQkJCQkJJHBhcmFtc1sidGllciJdID0gJGFmZmlsaWF0ZUlkOwoJCQkJCX0KCQkJCQkKCQkJCQkkcmVzdWx0ID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldEFQSVVybCgpLiIvQVBJL3NjcmlwdHMvbW1fbmV3X2FmZmlsaWF0ZS5waHAiLCAiUE9TVCIsICRwYXJhbXMpOwoJCQkJCQoJCQkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCQkJewoJCQkJCQkkYWZmaWxpYXRlID0gbmV3IE1NX0FmZmlsaWF0ZVZPKCk7CgkJCQkJCSRhZmZpbGlhdGUtPnNldERhdGEoJHBhcmFtcyk7CgkJCQkJCSRhZmZpbGlhdGUtPnNldFVybCgkdGhpcy0+Z2V0QVBJVXJsKCkpOwoJCQkJCQkkcmVzdWx0LT5hZGREYXRhKCJhZmZpbGlhdGVEYXRhIiwgJGFmZmlsaWF0ZSk7CgkJCQkJfQoJCQkJCQoJCQkJCXJldHVybiAkcmVzdWx0OwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIGFmZmlsaWF0ZSBhY2NvdW50IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCS8qKgoJICogCgkgKiBSZXR1cm4gdGhlIHBheW91dCBwcm9maWxlcyBhc3NvY2lhdGVkIHdpdGggdGhlIGFmZmlsaWF0ZSBwcm92aWRlciwga2V5ZWQgYnkgaWQgd2l0aCB0aGUgdmFsdWVzIGJlaW5nIHByb2ZpbGUgbmFtZXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyBwcm9maWxlcyBhcyB0aGUgbWVzc2FnZSBvbiBzdWNjZXNzLCBhbiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBlcnJvciBzdGF0ZSBvdGhlcndpc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFBheW91dFByb2ZpbGVzKCkgCgl7CgkJJHByb2ZpbGVzID0gYXJyYXkoKTsKCQkkcGFyYW1zID0gYXJyYXkoKTsKCQkkcGFyYW1zWyJzZWNyZXQiXSA9ICR0aGlzLT5nZXRBUElTZWNyZXRLZXkoKTsKCQkkcmVzcG9uc2UgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0QVBJVXJsKCkuIi9BUEkvc2NyaXB0cy9nZXRfcGF5b3V0X2xldmVscy5waHAiLCAiUE9TVCIsICRwYXJhbXMpOwoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3BvbnNlKSkKCQl7CgkJCSRwcm9maWxlTGlzdCA9IGpzb25fZGVjb2RlKCRyZXNwb25zZS0+bWVzc2FnZSk7CgkJCQoJCQlpZigkcHJvZmlsZUxpc3QpCgkJCXsKCQkJCWZvcmVhY2goJHByb2ZpbGVMaXN0IGFzICRwcm9maWxlKQoJCQkJewoJCQkJCSRwYXlvdXRMZXZlbFRpdGxlID0gIiI7CgkJCQkJJHBheW91dEFtb3VudCA9ICIiOwoJCQkJCQoJCQkJCXN3aXRjaChpbnR2YWwoJHByb2ZpbGUtPnR5cGUpKQoJCQkJCXsKCQkJCQkJY2FzZSBzZWxmOjokUEFZT1VUX1RZUEVfUEVSQ0VOVDoKCQkJCQkJCSRwYXlvdXRMZXZlbFRpdGxlIC49ICJQZXJjZW50YWdlICI7CgkJCQkJCQkkcGF5b3V0QW1vdW50ID0gZmxvYXR2YWwoJHByb2ZpbGUtPmFtdCkgKiAxMDA7CgkJCQkJCQkkcGF5b3V0QW1vdW50IC49ICIlIjsKCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCWNhc2Ugc2VsZjo6JFBBWU9VVF9UWVBFX0ZMQVRSQVRFOgoJCQkJCQkJJHBheW91dExldmVsVGl0bGUgLj0gIkZsYXQgUmF0ZSAiOwoJCQkJCQkJJHBheW91dEFtb3VudCA9IF9tbWYoJHByb2ZpbGUtPmFtdCwkcHJvZmlsZS0+Y3VycmVuY3kpOwoJCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJCQoJCQkJCSRwYXlvdXRMZXZlbFRpdGxlIC49ICJQYXlvdXQgTGV2ZWwgeyRwcm9maWxlLT5sZXZlbH0gKHskcGF5b3V0QW1vdW50fSkiOwoJCQkJCQoJCQkJCSRwcm9maWxlc1skcHJvZmlsZS0+aWQuIl8iLiRwcm9maWxlLT50eXBlLiJfIi4kcHJvZmlsZS0+bGV2ZWxdID0gJHBheW91dExldmVsVGl0bGU7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJG1zZyA9ICJVbmFibGUgdG8gY29ubmVjdCB0byBpRGV2QWZmaWxpYXRlIjsKCQkJCQoJCQkJaWYoaXNzZXQoJHJlc3BvbnNlLT5tZXNzYWdlKSkKCQkJCXsKCQkJCQkkbXNnIC49ICJcblxueyRyZXNwb25zZS0+bWVzc2FnZX0iOwoJCQkJfQoJCQkJCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRtc2csIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHByb2ZpbGVzLCBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwoJfQoJCgkvKioKCSAqIFJlcG9ydCB0aGUgZmVhdHVyZXMgdGhhdCBpRGV2QWZmaWxpYXRlIHN1cHBvcnRzCgkgKgoJICogQHBhcmFtIGludGVnZXIgJGZlYXR1cmVDb25zdCBhIGNvbnN0IGFzIGRlZmluZWQgaW4gTU1fQWZmaWxpYXRlUHJvdmlkZXJGZWF0dXJlcwoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3Qgc3VwcG9ydGVkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdXBwb3J0c0ZlYXR1cmUoJGZlYXR1cmVDb25zdCkKCXsKCQkkc3VwcG9ydGVkW10gPSBNTV9BZmZpbGlhdGVQcm92aWRlckZlYXR1cmVzOjpERUZBVUxUX0FGRklMSUFURV9JRDsKCQkkc3VwcG9ydGVkW10gPSBNTV9BZmZpbGlhdGVQcm92aWRlckZlYXR1cmVzOjpDVVNUT01fUkVCSUxMX0NPTU1JU1NJT05TOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmVhdHVyZXM6OkFGRklMSUFURV9BQ0NPVU5UX0NSRUFUSU9OOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmVhdHVyZXM6OkNPTU1JU1NJT05fVFJBQ0tJTkc7CgkJJHN1cHBvcnRlZFtdID0gTU1fQWZmaWxpYXRlUHJvdmlkZXJGZWF0dXJlczo6Q09NTUlTU0lPTl9UUkFDS0lOR19CWV9DT1VQT047CgkJJHN1cHBvcnRlZFtdID0gTU1fQWZmaWxpYXRlUHJvdmlkZXJGZWF0dXJlczo6Q09NTUlTU0lPTl9UUkFDS0lOR19CWV9JUF9BRERSRVNTOwoJCXJldHVybiBpbl9hcnJheSgkZmVhdHVyZUNvbnN0LCRzdXBwb3J0ZWQsdHJ1ZSk7Cgl9CgkKCS8qKgoJICogUmV0dXJuIGEgREhUTUwvSmF2YXNjcmlwdCBkaWFsb2cgY2FwYWJsZSBvZiBjb2xsZWN0aW5nIHRoZSBvcHRpb25zIG5lZWRlZCB0byBjb25maWd1cmUgdGhlIHByb3ZpZGVyCgkgKiBAcmV0dXJuIFN0cmluZyB0aGUgbWFya3VwIGZvciB0aGUgb3B0aW9ucyBkaWFsb2cKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbmRlck9wdGlvbnNEaWFsb2coJHBvc3QpIAoJewoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fQWZmaWxpYXRlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkdGhpcy0+Z2V0VG9rZW4oKSk7CgkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCSRhcGlfdXJsID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0Q29uZmlnT3B0aW9uKCJhcGlVcmwiKToiIjsKCQkkYXBpX3NlY3JldF9rZXkgPSAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKT8kcHJvdmlkZXJfZW50aXR5LT5nZXRDb25maWdPcHRpb24oImFwaVNlY3JldEtleSIpOiIiOwoJCQoJCSRmb3JtID0gbmV3IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRGlhbG9nKCk7CgkJJGZvcm0tPmRpYWxvZyA9IDw8PE9QVElPTlMKCQk8ZGl2IGlkPSJtbS1wcm92aWRlci1jb25maWctb3B0aW9ucyI+CQoJCQk8dGFibGU+CgkJCTx0cj4KCQkJCTx0ZCBzdHlsZT0nd2lkdGg6MTAwcHg7Jz5pRGV2QWZmaWxpYXRlIFVSTDwvdGQ+CgkJCQk8dGQ+CgkJCQkJPHNwYW4gc3R5bGU9ImZvbnQtZmFtaWx5OmNvdXJpZXI7IGZvbnQtc2l6ZToxMXB4OyI+CgkJCQkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9ImlkZXZhZmZpbGlhdGVfdXJsIiBpZD0iaWRldmFmZmlsaWF0ZV91cmwiIHNpemU9IjUwIiB2YWx1ZT0ieyRhcGlfdXJsfSIvPgoJCQkJCTwvc3Bhbj4KCQkJCTwvdGQ+CgkJCTwvdHI+CgkJCTx0cj4JCgkJCQk8dGQ+QVBJIFNlY3JldCBLZXk8L3RkPgoJCQkJPHRkPgoJCQkJCTxzcGFuIHN0eWxlPSJmb250LWZhbWlseTpjb3VyaWVyOyBmb250LXNpemU6MTFweDsiPgoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJpZGV2YWZmaWxpYXRlX3NlY3JldF9rZXkiIGlkPSJpZGV2YWZmaWxpYXRlX3NlY3JldF9rZXkiIHNpemU9IjI1IiB2YWx1ZT0ieyRhcGlfc2VjcmV0X2tleX0iLz4KCQkJCQk8L3NwYW4+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQk8L3RhYmxlPgkJCgkJPC9kaXY+Ck9QVElPTlM7CgkJcmV0dXJuICRmb3JtOwoJfQoJCgkvKioKCSAqIFJlc3BvbmRzIHRvIGRhdGEgY29sbGVjdGVkIGZyb20gdGhlIGZvcm0gcmVuZGVyZWQgYnkgcmVuZGVyT3B0aW9uc0RpYWxvZwoJICogQHNlZSBNTV9BYnN0cmFjdEFmZmlsaWF0ZVByb3ZpZGVyOjpoYW5kbGVPcHRpb25zRGlhbG9nKCkKCSAqIEBwYXJhbSAkb3B0aW9uRGF0YSBBcnJheSBjb250YWluaW5nIHRoZSBwb3N0ZWQgdmFsdWVzCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gaGFuZGxlT3B0aW9uc0RpYWxvZygkb3B0aW9uRGF0YSkgCgl7CgkJaWYgKGlzX2FycmF5KCRvcHRpb25EYXRhKSAmJiAoKGlzc2V0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3VybCddKSkgJiYgIWVtcHR5KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3VybCddKSkgCgkJCSYmICgoaXNzZXQoJG9wdGlvbkRhdGFbJ2lkZXZhZmZpbGlhdGVfc2VjcmV0X2tleSddKSkgJiYgIWVtcHR5KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3NlY3JldF9rZXknXSkpKSAKCQl7CgkJCSRwcm92aWRlcl90b2tlbiA9ICRvcHRpb25EYXRhWydwcm92aWRlcl90b2tlbiddOwoJCQkkYXBpX3VybCA9ICRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3VybCddOwoJCQkkYXBpX3NlY3JldF9rZXkgPSAkb3B0aW9uRGF0YVsnaWRldmFmZmlsaWF0ZV9zZWNyZXRfa2V5J107CgkJCSRpcF90cmFja2luZ19lbmFibGVkID0gaXNzZXQoJG9wdGlvbkRhdGFbJ2lkZXZhZmZpbGlhdGVfaXBfdHJhY2tpbmdfZW5hYmxlZCddKSA/ICRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX2lwX3RyYWNraW5nX2VuYWJsZWQnXSA6ICIiOwoJCQkkc2VuZF9hZmZpbGlhdGVfd2VsY29tZV9lbWFpbCA9IGlzc2V0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3NlbmRfYWZmaWxpYXRlX3dlbGNvbWVfZW1haWwnXSkgPyAkb3B0aW9uRGF0YVsnaWRldmFmZmlsaWF0ZV9zZW5kX2FmZmlsaWF0ZV93ZWxjb21lX2VtYWlsJ10gOiAiIjsKCQkJJGFmZmlsaWF0ZV93ZWxjb21lX2VtYWlsX3N1YmplY3QgPSBpc3NldCgkb3B0aW9uRGF0YVsnaWRldmFmZmlsaWF0ZS1zZW5kLWFmZmlsaWF0ZS13ZWxjb21lLWVtYWlsLXN1YmplY3QnXSkgPyAkb3B0aW9uRGF0YVsnaWRldmFmZmlsaWF0ZS1zZW5kLWFmZmlsaWF0ZS13ZWxjb21lLWVtYWlsLXN1YmplY3QnXSA6ICIiOwoJCQkkYWZmaWxpYXRlX3dlbGNvbWVfZW1haWxfYm9keSA9IGlzc2V0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtYm9keSddKSA/ICRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtYm9keSddIDogIiI7CgkJCQoJCQkkdGhpcy0+c2V0QVBJVXJsKCRhcGlfdXJsKTsKCQkJJHRoaXMtPnNldEFQSVNlY3JldEtleSgkYXBpX3NlY3JldF9rZXkpOwoJCQkkdGhpcy0+c2V0SVBUcmFja2luZ0VuYWJsZWQoJGlwX3RyYWNraW5nX2VuYWJsZWQpOwoJCQkkdGhpcy0+c2V0U2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbCgkc2VuZF9hZmZpbGlhdGVfd2VsY29tZV9lbWFpbCk7CgkJCSR0aGlzLT5zZXRBZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0KCRhZmZpbGlhdGVfd2VsY29tZV9lbWFpbF9zdWJqZWN0KTsKCQkJJHRoaXMtPnNldEFmZmlsaWF0ZVdlbGNvbWVFbWFpbEJvZHkoJGFmZmlsaWF0ZV93ZWxjb21lX2VtYWlsX2JvZHkpOwoJCQkKCQkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9BZmZpbGlhdGVQcm92aWRlcigpOwoJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkcHJvdmlkZXJfdG9rZW4pOwoJCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpIAoJCQl7CgkJCQkvL2ZpcnN0IHdyaXRlIHRoZSBwcm92aWRlcidzIGNvbmZpZ3VyYXRpb24gb3B0aW9ucwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJhcGlVcmwiLCAkdGhpcy0+Z2V0QVBJVXJsKCkpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJhcGlTZWNyZXRLZXkiLCAkdGhpcy0+Z2V0QVBJU2VjcmV0S2V5KCkpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJpcFRyYWNraW5nRW5hYmxlZCIsICR0aGlzLT5nZXRJUFRyYWNraW5nRW5hYmxlZCgpKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldENvbmZpZ09wdGlvbigic2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbCIsICR0aGlzLT5nZXRTZW5kQWZmaWxpYXRlV2VsY29tZUVtYWlsKCkpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJhZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0IiwgJHRoaXMtPmdldEFmZmlsaWF0ZVdlbGNvbWVFbWFpbFN1YmplY3QoKSk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRDb25maWdPcHRpb24oImFmZmlsaWF0ZVdlbGNvbWVFbWFpbEJvZHkiLCAkdGhpcy0+Z2V0QWZmaWxpYXRlV2VsY29tZUVtYWlsQm9keSgpKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldEFjdGl2ZSh0cnVlKTsKCQkJCSRjb21taXRfcmVzcG9uc2UgPSAkcHJvdmlkZXJfZW50aXR5LT5jb21taXREYXRhKCk7CgkJCQkKCQkJCWlmICgkY29tbWl0X3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpIAoJCQkJewoJCQkJCS8vcGFzcyB0aHJvdWdoIGVycm9ycyBjb21taXR0aW5nIHRvIHRoZSBkYXRhYmFzZQoJCQkJCXJldHVybiAkY29tbWl0X3Jlc3BvbnNlOwoJCQkJfQoJCQkJLy9ub3cgd3JpdGUgdGhlIHByb2ZpbGUgbWFwcGluZ3MKCQkJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnbWVtYmVyc2hpcF9sZXZlbF9tYXBwaW5ncyddKSAmJiBpc19hcnJheSgkb3B0aW9uRGF0YVsnbWVtYmVyc2hpcF9sZXZlbF9tYXBwaW5ncyddKSkgCgkJCQl7CgkJCQkJJHByb3ZpZGVyX2lkID0gJHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKTsgCgkJCQkJcmV0dXJuICR0aGlzLT5wZXJzaXN0UHJvZmlsZU1hcHBpbmdzKCRwcm92aWRlcl9pZCwgJG9wdGlvbkRhdGFbJ21lbWJlcnNoaXBfbGV2ZWxfbWFwcGluZ3MnXSk7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJLy9mYWlsZWQgdG8gbG9hZCBlbnRpdHkgZnJvbSB0YWJsZQoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIHNhdmUgc2V0dGluZ3MiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkvL29wdGlvbkRhdGEgaXMgbm90IGFuIGFycmF5LCBvciB0aGUgYXBpIFVSTCB3YXMgbm90IHNlbnQKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIHNhdmUgc2V0dGluZ3M6IEFQSSBVUkwgYW5kIHNlY3JldCBrZXkgYXJlIHJlcXVpcmVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkvKioKCSAqIENvbmZpZ3VyZXMgdGhlIGlEZXZBZmZpbGlhdGUgcHJvdmlkZXIgaW4gb3JkZXIgdG8gZG8gdGhlIGluaXRpYWwgY29ubmVjdAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpjb25maWd1cmVGcm9tT3B0aW9ucygpCgkgKiBAcGFyYW0gJG9wdGlvbkRhdGEgQXJyYXkgVGhlIHZhbHVlcyBwb3N0ZWQgZnJvbSB0aGUgZm9ybSByZW5kZXJlZCBieSByZW5kZXJPcHRpb25zRGlhbG9nCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjb25maWd1cmVGcm9tT3B0aW9ucygkb3B0aW9uRGF0YSkgCgl7CgkJaWYgKGlzc2V0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3VybCddKSkgCgkJewoJCQkkdGhpcy0+c2V0QVBJVXJsKCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3VybCddKTsKCQl9CgkJaWYgKGlzc2V0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3NlY3JldF9rZXknXSkpCgkJewoJCQkkdGhpcy0+c2V0QVBJU2VjcmV0S2V5KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX3NlY3JldF9rZXknXSk7CgkJfQoJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnaWRldmFmZmlsaWF0ZV9pcF90cmFja2luZ19lbmFibGVkJ10pKQoJCXsKCQkJJHRoaXMtPnNldElQVHJhY2tpbmdFbmFibGVkKCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlX2lwX3RyYWNraW5nX2VuYWJsZWQnXSk7CgkJfQoJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnaWRldmFmZmlsaWF0ZV9zZW5kX2FmZmlsaWF0ZV93ZWxjb21lX2VtYWlsJ10pKQoJCXsKCQkJJHRoaXMtPnNldFNlbmRBZmZpbGlhdGVXZWxjb21lRW1haWwoJG9wdGlvbkRhdGFbJ2lkZXZhZmZpbGlhdGVfc2VuZF9hZmZpbGlhdGVfd2VsY29tZV9lbWFpbCddKTsKCQl9CgkJaWYgKGlzc2V0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtc3ViamVjdCddKSkKCQl7CgkJCSR0aGlzLT5zZXRBZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtc3ViamVjdCddKTsKCQl9CgkJaWYgKGlzc2V0KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtYm9keSddKSkKCQl7CgkJCSR0aGlzLT5zZXRBZmZpbGlhdGVXZWxjb21lRW1haWxCb2R5KCRvcHRpb25EYXRhWydpZGV2YWZmaWxpYXRlLXNlbmQtYWZmaWxpYXRlLXdlbGNvbWUtZW1haWwtYm9keSddKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyQWRkaXRpb25hbE9wdGlvbnMoKQoJewoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fQWZmaWxpYXRlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkdGhpcy0+Z2V0VG9rZW4oKSk7CgkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCSRpcF90cmFja2luZ19lbmFibGVkID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0Q29uZmlnT3B0aW9uKCJpcFRyYWNraW5nRW5hYmxlZCIpOiIiOwoJCQoJCSRvdXRwdXQgPSAiPHAgc3R5bGU9XCJtYXJnaW4tdG9wOjIwcHg7XCI+PGEgaHJlZj1cImh0dHA6Ly9zdXBwb3J0Lm1lbWJlcm1vdXNlLmNvbS9zdXBwb3J0L3NvbHV0aW9ucy9hcnRpY2xlcy85MDAwMDIwMjc5LWlkZXZhZmZpbGlhdGUtY29uZmlndXJpbmdcIiB0YXJnZXQ9XCJfYmxhbmtcIj5OZWVkIGhlbHAgY29uZmlndXJpbmcgaURldkFmZmlsaWF0ZT88L2E+PC9wPiI7CgkJJG91dHB1dCAuPSAiPHAgY2xhc3M9XCJtbS1zZWN0aW9uLWhlYWRlclwiIHN0eWxlPVwibWFyZ2luLXRvcDoyMHB4O1wiPkVuYWJsZSBQYXNzaW5nIEFmZmlsaWF0ZSBJRCB0byBZb3VyIExhbmRpbmcgUGFnZTwvcD4iOwoJCSRvdXRwdXQgLj0gIjxwPjxhIGhyZWY9XCJ7JHRoaXMtPmdldEFQSVVybCgpfS9hZG1pbi9zZXR1cC5waHA/YWN0aW9uPTc3I3RhYl8xXzJcIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cIm1tLXVpLWJ1dHRvbiBncmVlblwiPkNvbmZpZ3VyZSBpbiBpRGV2QWZmaWxpYXRlPC9hPjwvcD4iOwoJCQoJCSRvdXRwdXQgLj0gIjxwIGNsYXNzPVwibW0tc2VjdGlvbi1oZWFkZXJcIiBzdHlsZT1cIm1hcmdpbi10b3A6MjBweDtcIj5Db25maWd1cmUgUGVyLVByb2R1Y3QgQ29tbWlzc2lvbnM8L3A+IjsKCQkkb3V0cHV0IC49ICI8cD48YSBocmVmPVwieyR0aGlzLT5nZXRBUElVcmwoKX0vYWRtaW4vc2V0dXAucGhwP2FjdGlvbj02NVwiIHRhcmdldD1cIl9ibGFua1wiIGNsYXNzPVwibW0tdWktYnV0dG9uIGdyZWVuXCI+Q29uZmlndXJlIGluIGlEZXZBZmZpbGlhdGU8L2E+PC9wPiI7CgkJCgkJJG91dHB1dCAuPSAiPHAgY2xhc3M9XCJtbS1zZWN0aW9uLWhlYWRlclwiIHN0eWxlPVwibWFyZ2luLXRvcDoyMHB4O1wiPklQIEFkZHJlc3MgVHJhY2tpbmc8L3A+IjsKCgkJJG91dHB1dCAuPSAiPHAgc3R5bGU9J3dpZHRoOjcwMHB4Oyc+aURldkFmZmlsaWF0ZSBzdXBwb3J0cyBJUCB0cmFja2luZy4gU29tZXRpbWVzIGEgY3VzdG9tZXIgd2hvIGlzIGEgbGVnaXRpbWF0ZSByZWZlcnJhbCBjYW4gYXJyaXZlIGF0IHRoZSBjaGVja291dCBwYWdlCgkJCQl3aXRob3V0IHRoZSByZWZlcnJpbmcgYWZmaWxpYXRlJ3MgSUQgYmVpbmcgcHJvdmlkZWQuIElQIHRyYWNraW5nIGlzIGEgYmFja3VwIG1ldGhvZCB1c2VkIHRvIGF0dGVtcHQgdG8gbWF0Y2ggYSBzYWxlIAoJCQkJd2l0aCB0aGUgcmVmZXJyaW5nIGFmZmlsaWF0ZSB1c2luZyB0aGUgY3VzdG9tZXIncyBJUCBhZGRyZXNzLjwvcD4KCQkJCQoJCQkJPHAgc3R5bGU9J3dpZHRoOjcwMHB4Oyc+aURldkFmZmlsaWF0ZSBpcyBhbiBleHRlcm5hbCBzeXN0ZW0gc28gYSB0aW1lIG92ZXJoZWFkIGlzIGludm9sdmVkIGluIG1ha2luZyBhIHJlcXVlc3QgdG8gaXQgKHRoZSB0aW1lIGl0IHRha2VzIGZvciB0aGUgaURldkFmZmlsaWF0ZQoJCQkJc2VydmVyIHRvIHJlY2VpdmUgYW5kIHJlc3BvbmQgdG8gdGhlIHJlcXVlc3QpLiBJbiBvcmRlciB0byBiZSBhcyBlZmZpY2llbnQgYXMgcG9zc2libGUsIE1lbWJlck1vdXNlJ3MgZGVmYXVsdCBiZWhhdmlvciBpcyB0byBvbmx5IG1ha2UgcmVxdWVzdHMgdG8gCgkJCQlpRGV2QWZmaWxpYXRlIHdoZW4gYW4gYWZmaWxpYXRlIGNvbW1pc3Npb24gaXMgZXhwbGljaXRseSBpbmRpY2F0ZWQgKGkuZS4gaWYgdGhlIGFmZmlsaWF0ZSBJRCBpcyBwcmVzZW50IG9yIGEgY291cG9uIGNvZGUgaXMgYXBwbGllZCB0byB0aGUgb3JkZXIpLgoJCQkJPC9wPgoJCQkJCgkJCQk8cCBzdHlsZT0nd2lkdGg6NzAwcHg7Jz5FbmFibGluZyBJUCB0cmFja2luZyBpbiBNZW1iZXJNb3VzZSBieXBhc3NlcyB0aGVzZSBlZmZpY2llbmN5IHJ1bGVzIGFuZCBhIGNvbW1pc3Npb24gcmVxdWVzdCB3aWxsIGJlIHNlbnQgdG8gaURldkFmZmlsaWF0ZSAKCQkJIAlvbiBldmVyeSBzYWxlLiBGb3IgdGhpcyByZWFzb24sIHdlIGRvIG5vdCByZWNvbW1lbmQgdXNpbmcgdGhpcyBmZWF0dXJlIHVubGVzcyB5b3UgaGF2ZSByZWFzb24gdG8gYmVsaWV2ZSB0aGF0IGEgc2l6ZWFibGUgYW1vdW50IG9mIHlvdXIgY3VzdG9tZXJzIAoJCQkJYXJyaXZlIG9uIHlvdXIgc2l0ZSB3aXRob3V0IGFuIGFmZmlsaWF0ZSBiZWluZyBleHBsaWNpdGx5IGluZGljYXRlZC48L3A+CgkJCQkKCQkJCTxwIHN0eWxlPSd3aWR0aDo3MDBweDsnPklmIHlvdSdyZSB1c2luZyBhZmZpbGlhdGUgVVJMcyBzdWNoIGFzIDxjb2RlPmh0dHA6Ly95b3VyZG9tYWluLmNvbS8/YWZmaWQ9MTIzPC9jb2RlPiwgYW4gZXhwbGljaXQgYWZmaWxpYXRlIAoJCQkJSUQgd2lsbCBiZSBwcmVzZW50IGNsb3NlIHRvIDEwMCUgb2YgdGltZSBzbyBlbmFibGluZyBJUCBhZGRyZXNzIHRyYWNraW5nIHNob3VsZG4ndCBiZSBuZWNlc3NhcnkuPC9wPiI7CgkJJG91dHB1dCAuPSAiPHA+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSdpZGV2YWZmaWxpYXRlX2lwX3RyYWNraW5nX2VuYWJsZWQnIGlkPSdpZGV2YWZmaWxpYXRlX2lwX3RyYWNraW5nX2VuYWJsZWQnICI7CgkJCgkJaWYoJGlwX3RyYWNraW5nX2VuYWJsZWQgPT0gIjEiKQoJCXsKCQkJJG91dHB1dCAuPSAiY2hlY2tlZCI7CgkJfQoJCQoJCSRvdXRwdXQgLj0gIiAvPiBFbmFibGUgSVAgQWRkcmVzcyBUcmFja2luZzwvcD4iOwoJCQoJCXJldHVybiAkb3V0cHV0OwoJfQoJCgkvKioKCSAqIAoJICogUmV0dXJucyB0aGUgQVBJIFVSTAoJICogQHJldHVybiBTdHJpbmcgdGhlIEFQSSBVUkwKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldEFQSVVybCgpIAoJewoJCWlmKHN1YnN0cigkdGhpcy0+YXBpVXJsLCAtMSkgPT0gIi8iKQoJCXsKCQkJcmV0dXJuIHN1YnN0cigkdGhpcy0+YXBpVXJsLCAwLCBzdHJsZW4oJHRoaXMtPmFwaVVybCktMSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAkdGhpcy0+YXBpVXJsOwoJCX0KCX0KCQoJLyoqCgkgKiAKCSAqIFNldHMgdGhlIEFQSSBVUkwKCSAqIEBwYXJhbSBTdHJpbmcgJGFwaVVybCBUaGUgbmV3IEFQSSBVUkwKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNldEFQSVVybCgkYXBpVXJsKSAKCXsKCQlpZihzdWJzdHIoJGFwaVVybCwgLTEpID09ICIvIikKCQl7CgkJCSR0aGlzLT5hcGlVcmwgPSBzdWJzdHIoJGFwaVVybCwgMCwgc3RybGVuKCRhcGlVcmwpLTEpOwoJCX0KCQllbHNlCgkJewoJCQkkdGhpcy0+YXBpVXJsID0gJGFwaVVybDsKCQl9Cgl9CgkKCS8qKgoJICogCgkgKiBSZXR1cm5zIHRoZSBBUEkgc2VjcmV0IGtleQoJICogQHJldHVybiBTdHJpbmcgdGhlIEFQSSBzZWNyZXQga2V5CgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBnZXRBUElTZWNyZXRLZXkoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmFwaVNlY3JldEtleTsKCX0KCQoJLyoqCgkgKiAKCSAqIFNldHMgdGhlIEFQSSBzZWNyZXQga2V5CgkgKiBAcGFyYW0gU3RyaW5nICRhcGlTZWNyZXRLZXkgVGhlIG5ldyBBUEkgc2VjcmV0IGtleQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2V0QVBJU2VjcmV0S2V5KCRhcGlTZWNyZXRLZXkpIAoJewoJCSR0aGlzLT5hcGlTZWNyZXRLZXkgPSAkYXBpU2VjcmV0S2V5OwoJfQoJCgkvKioKCSAqIAoJICogUmV0dXJucyB0aGUgSVAgdHJhY2tpbmcgZW5hYmxlZCBwYXJhbWV0ZXIKCSAqIEByZXR1cm4gU3RyaW5nIHRoZSBJUCB0cmFja2luZyBlbmFibGVkIHZhbHVlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRJUFRyYWNraW5nRW5hYmxlZCgpIAoJewoJCXJldHVybiAkdGhpcy0+aXBUcmFja2luZ0VuYWJsZWQ7Cgl9CgkKCS8qKgoJICogCgkgKiBTZXRzIHRoZSBJUCB0cmFja2luZyBlbmFibGVkIHBhcmFtZXRlcgoJICogQHBhcmFtIFN0cmluZyAkaXBUcmFja2luZ0VuYWJsZWQgVGhlIG5ldyBJUCB0cmFja2luZyBlbmFibGVkIHZhbHVlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBzZXRJUFRyYWNraW5nRW5hYmxlZCgkaXBUcmFja2luZ0VuYWJsZWQpIAoJewoJCWlmKCRpcFRyYWNraW5nRW5hYmxlZCA9PSAib24iKQoJCXsKCQkJJGlwVHJhY2tpbmdFbmFibGVkID0gIjEiOwoJCX0KCQkKCQkkdGhpcy0+aXBUcmFja2luZ0VuYWJsZWQgPSAkaXBUcmFja2luZ0VuYWJsZWQ7Cgl9CgkKCS8qKgoJICogCgkgKiBSZXR1cm5zIHRoZSBzZW5kIGFmZmlsaWF0ZSB3ZWxjb21lIGVtYWlsIHBhcmFtZXRlcgoJICogQHJldHVybiBTdHJpbmcgdGhlIHNlbmQgYWZmaWxpYXRlIHdlbGNvbWUgZW1haWwgZW5hYmxlZCB2YWx1ZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0U2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbCgpIAoJewoJCXJldHVybiAkdGhpcy0+c2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbDsKCX0KCQoJLyoqCgkgKiAKCSAqIFNldHMgdGhlIHNlbmQgYWZmaWxpYXRlIHdlbGNvbWUgZW1haWwgcGFyYW1ldGVyCgkgKiBAcGFyYW0gU3RyaW5nICRzZW5kQWZmaWxpYXRlV2VsY29tZUVtYWlsIFRoZSBuZXcgc2VuZCBhZmZpbGlhdGUgd2VsY29tZSBlbWFpbCB2YWx1ZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2V0U2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbCgkc2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbCkgCgl7CgkJaWYoJHNlbmRBZmZpbGlhdGVXZWxjb21lRW1haWwgPT0gIm9uIikKCQl7CgkJCSRzZW5kQWZmaWxpYXRlV2VsY29tZUVtYWlsID0gIjEiOwoJCX0KCQkKCQkkdGhpcy0+c2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbCA9ICRzZW5kQWZmaWxpYXRlV2VsY29tZUVtYWlsOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWZmaWxpYXRlV2VsY29tZUVtYWlsU3ViamVjdCgpIAoJewoJCXJldHVybiAkdGhpcy0+YWZmaWxpYXRlV2VsY29tZUVtYWlsU3ViamVjdDsKCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNldEFmZmlsaWF0ZVdlbGNvbWVFbWFpbFN1YmplY3QoJHN1YmplY3QpIAoJewoJCSR0aGlzLT5hZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0ID0gJHN1YmplY3Q7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBZmZpbGlhdGVXZWxjb21lRW1haWxCb2R5KCkgCgl7CgkJcmV0dXJuICR0aGlzLT5hZmZpbGlhdGVXZWxjb21lRW1haWxCb2R5OwoJfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2V0QWZmaWxpYXRlV2VsY29tZUVtYWlsQm9keSgkYm9keSkgCgl7CgkJJHRoaXMtPmFmZmlsaWF0ZVdlbGNvbWVFbWFpbEJvZHkgPSAkYm9keTsKCX0KCQp9Cg==', 0, '2018-11-21 06:38:54'),
(83, 'aweberexception', 'Y2xhc3MgTU1fQVdlYmVyRXhjZXB0aW9uIGV4dGVuZHMgRXhjZXB0aW9uIHsgfQoKCg==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(84, 'api', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQXBpIGV4dGVuZHMgTU1fRW50aXR5CnsKCXB1YmxpYyBzdGF0aWMgJFNUQVRVU19BQ1RJVkUgPSAnMSc7CglwdWJsaWMgc3RhdGljICRTVEFUVVNfSU5BQ1RJVkUgPSAnMCc7CgkKCXByaXZhdGUgJG5hbWUgPSAiIjsKCXByaXZhdGUgJGFwaV9rZXkgPSAiIjsKCXByaXZhdGUgJGFwaV9zZWNyZXQgPSAiIjsKCXByaXZhdGUgJHN0YXR1cyA9ICIiOwoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9BUElfS0VZUy4iIFdIRVJFIGlkPSciLiR0aGlzLT5pZC4iJzsiOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZigkcmVzdWx0KSB7CgkJCSR0aGlzLT5zZXREYXRhKCRyZXN1bHQpOwoJCX0KCQllbHNlIHsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5uYW1lID0gJGRhdGEtPm5hbWU7CgkJCSR0aGlzLT5hcGlfa2V5ID0gJGRhdGEtPmFwaV9rZXk7CgkJCSR0aGlzLT5hcGlfc2VjcmV0ID0gJGRhdGEtPmFwaV9zZWNyZXQ7CgkJCSR0aGlzLT5zdGF0dXMgPSAkZGF0YS0+c3RhdHVzOwoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgpewoJCQoJCWdsb2JhbCAkd3BkYjsKCQlpZihpbnR2YWwoJHRoaXMtPmlkKT4wKXsKCQkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX0FQSV9LRVlTLiIgd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyBsaW1pdCAxIjsKCQkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJaWYoJHJlc3VsdD09PWZhbHNlKXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCByZW1vdmUgYXBpIHNldCBkdWUgdG8gc3FsIGVycm9yLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IHJlbW92ZSBpbnZhbGlkIGFwaSBzZXQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCWlmKGludHZhbCgkdGhpcy0+aWQpPjApewoJCQkkc3FsID0gInVwZGF0ZSAiLk1NX1RBQkxFX0FQSV9LRVlTLiIgc2V0IAoJCQkJCQluYW1lPSclcycsIAoJCQkJCQlhcGlfa2V5PSclcycsCgkJCQkJCWFwaV9zZWNyZXQ9JyVzJywKCQkJCQkJc3RhdHVzPSclcycKCQkJCQl3aGVyZSAKCQkJCQkJaWQ9J3skdGhpcy0+aWR9JwoJCQkiOwoJCQkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+bmFtZSwgJHRoaXMtPmFwaV9rZXksICR0aGlzLT5hcGlfc2VjcmV0LCAkdGhpcy0+c3RhdHVzKTsKCQkJJHJldCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCQlpZigkcmV0PT09ZmFsc2UpewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IHNhdmUgcXVlcnkgeyRwcmVwYXJlZFNxbH0uIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZXsKCQkJJHNxbCA9ICJpbnNlcnQgaW50byAiLk1NX1RBQkxFX0FQSV9LRVlTLiIgc2V0IAoJCQkJCQluYW1lPSclcycsIAoJCQkJCQlhcGlfa2V5PSclcycsCgkJCQkJCWFwaV9zZWNyZXQ9JyVzJywKCQkJCQkJc3RhdHVzPSclcycKCQkJIjsKCQkJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPm5hbWUsICR0aGlzLT5hcGlfa2V5LCAkdGhpcy0+YXBpX3NlY3JldCwgJHRoaXMtPnN0YXR1cyk7CgkJCSRyZXQgPSAkd3BkYi0+cXVlcnkoJHByZXBhcmVkU3FsKTsKCQkJaWYoJHJldD09PWZhbHNlKXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBzYXZlIHF1ZXJ5IHskcHJlcGFyZWRTcWx9LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRLZXlMaXN0KCR1c2VBY3RpdmVPbmx5PWZhbHNlKXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfQVBJX0tFWVMuIiAiOwoJCWlmKCR1c2VBY3RpdmVPbmx5KXsKCQkJJHNxbC49ICIgd2hlcmUgc3RhdHVzPSciLnNlbGY6OiRTVEFUVVNfQUNUSVZFLiInIjsKCQl9CgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJaWYoaXNfYXJyYXkoJHJvd3MpKXsKCQkJcmV0dXJuICRyb3dzOwoJCX0KCQlyZXR1cm4gYXJyYXkoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1c0xpc3QoKXsKCQkkYXJyID0gIGFycmF5KAoJCQlzZWxmOjokU1RBVFVTX0FDVElWRT0+J0FjdGl2ZScsCgkJCXNlbGY6OiRTVEFUVVNfSU5BQ1RJVkU9PidJbmFjdGl2ZScsCgkJKTsKCQlyZXR1cm4gJGFycjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldE5hbWUoJG1zZyl7CgkJJHRoaXMtPm5hbWUgPSAkbXNnOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TmFtZSgpewoJCXJldHVybiAkdGhpcy0+bmFtZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEFwaUtleSgkdmFsKXsKCQkkdGhpcy0+YXBpX2tleSA9ICR2YWw7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBcGlLZXkoKXsKCQlyZXR1cm4gJHRoaXMtPmFwaV9rZXk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBcGlTZWNyZXQoJHZhbCl7CgkJJHRoaXMtPmFwaV9zZWNyZXQgPSAkdmFsOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QXBpU2VjcmV0KCl7CgkJcmV0dXJuICR0aGlzLT5hcGlfc2VjcmV0OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzKCR2YWwpewoJCSR0aGlzLT5zdGF0dXMgPSAkdmFsOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdHVzKCl7CgkJcmV0dXJuICR0aGlzLT5zdGF0dXM7Cgl9Cn0=', 0, '2018-11-21 06:38:54'),
(85, 'rbacbaseview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCgphYnN0cmFjdCBjbGFzcyBNTV9SQkFDQmFzZVZpZXcgZXh0ZW5kcyBNTV9Mb2dnZWRJblVzZXJWaWV3CnsKCS8qKgoJICogRGV0ZXJtaW5lcyBpZiB0aGUgY2FsbGVyIGhhcyBwZXJtaXNzaW9uIHRvIHBlcmZvcm0gdGhlIHJlcXVlc3RlZCBhY3Rpb24KCSAqCgkgKiBAcGFyYW0gc3RyaW5nICRyZXF1ZXN0CgkgKiBAcmV0dXJuIGJvb2xlYW4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNhbkNhbGxNZXRob2QoJHJlcXVlc3QpCgl7CgkJZ2xvYmFsICR1c2VyLCAkY3VycmVudF91c2VyOwoJCQoJCWlmICgoJHJlcXVlc3RbJ21ldGhvZCddICE9ICJwZXJmb3JtQWN0aW9uIikgfHwgKCFpc3NldCgkcmVxdWVzdFsnbW1fYWN0aW9uJ10pKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJHJlcXVlc3RlZEFjdGlvbiA9ICAkcmVxdWVzdFsnbW1fYWN0aW9uJ107CgkJCgkJaWYgKHBhcmVudDo6Y2FuQ2FsbE1ldGhvZCgkcmVxdWVzdGVkQWN0aW9uKSkKCQl7CgkJCSRhY3Rpb25Ub1Rlc3QgPSAoaXNzZXQoJHRoaXMtPnBlcm1pc3Npb25zWyRyZXF1ZXN0ZWRBY3Rpb25dKSk/JHJlcXVlc3RlZEFjdGlvbjoiKiI7CgkJCSR1c2VySWQgPSAwOwoJCQlpZiAoaXNzZXQoJHVzZXIpICYmIGlzc2V0KCR1c2VyLT5JRCkgJiYgKCR1c2VyLT5JRCAhPSAiMCIpKQoJCQl7CgkJCQkkdXNlcklkID0gJHVzZXItPklEOwoJCQl9CgkJCWVsc2UgaWYgKGlzc2V0KCRjdXJyZW50X3VzZXIpICYmIGlzc2V0KCRjdXJyZW50X3VzZXItPklEKSAmJiAoJGN1cnJlbnRfdXNlci0+SUQgIT0gIjAiKSkKCQkJewoJCQkJJHVzZXJJZCA9ICRjdXJyZW50X3VzZXItPklEOwoJCQl9CgkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpmaW5kQnlVc2VySWQoJHVzZXJJZCk7CgkJCSRyb2xlID0gJGVtcGxveWVlLT5pc1ZhbGlkKCk/JGVtcGxveWVlLT5nZXRSb2xlSWQoKTpNTV9Sb2xlOjokUk9MRV9JR05PUkU7CgkJCWlmICgoJHJvbGUgIT09IE1NX1JvbGU6OiRST0xFX0FETUlOSVNUUkFUT1IpICYmIChNTV9VdGlsczo6aXNTaXRlQWRtaW4oKSkpCgkJCXsKCQkJCS8vdHJlYXQgbm9uLWVtcGxveWVlIHNpdGUgYWRtaW5zLCBvciBzaXRlIGFkbWlucyB3aXRoIGEgbG93ZXIgbW0gcm9sZSwgYXMgaWYgdGhleSBoYXZlIHRoZSBtbSBhZG1pbmlzdHJhdG9yIHJvbGUKCQkJCSRyb2xlID0gTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUjsKCQkJfQoJCQllbHNlewoJCQkJLy8gQWxsb3cgV1AgdXNlcnMgd2l0aCBjYXBhYmlsaXRpZXMgb2YgcHVibGlzaGluZyB0byB1c3VycCBhbiBhZG1pbiByb2xlIHdoZW4gYXBwbGllZCB0byBhY2Nlc3MgcmlnaHRzLgoJCQkJLy8gVGhpcyB3aWxsIGNvbWUgaW50byBwbGF5IHdoZW4geW91IG1vZGlmeSBwb3N0L3BhZ2VzIHRoYXQgdGhleSBhbHJlYWR5IGhhdmUgYWNjZXNzIHRvIG1vZGlmeS9jcmVhdGUuCgkJCQlpZigoY3VycmVudF91c2VyX2NhbigncHVibGlzaF9wb3N0cycpIHx8IGN1cnJlbnRfdXNlcl9jYW4oJ3B1Ymxpc2hfcGFnZXMnKSkgJiYgKCR0aGlzIGluc3RhbmNlb2YgTU1fQWNjZXNzUmlnaHRzVmlldykpCgkJCQl7IAoJCQkJCSRyb2xlID0gTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUjsKCQkJCX0KCQkJfSAKCQkJcmV0dXJuIChpc3NldCgkdGhpcy0+cGVybWlzc2lvbnNbJGFjdGlvblRvVGVzdF0pICYmIGlzX2FycmF5KCR0aGlzLT5wZXJtaXNzaW9uc1skYWN0aW9uVG9UZXN0XSkgJiYgaW5fYXJyYXkoJHJvbGUsJHRoaXMtPnBlcm1pc3Npb25zWyRhY3Rpb25Ub1Rlc3RdKSk7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KfQ==', 0, '2018-11-21 06:38:54'),
(86, 'repairmembermouseview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBUaGUgTU1fUmVwYWlyTWVtYmVyTW91c2VWaWV3IGNsYXNzIGhhbmRsZXMgdGhlIGFqYXggcmVxdWVzdHMgZnJvbSB0aGUgIlJlcGFpciBNZW1iZXJtb3VzZSIgcGFnZS4gVGhpcyBvcGVyYXRpb24gZXNzZW50aWFsbHkgY29uc2lzdHMgb2YgdGhlIG9yaWdpbmFsCiAqIHNvdXJjZSBhcmNoaXZlIGZvciB0aGUgcnVubmluZyB2ZXJzaW9uIG9mIHRoZSBwbHVnaW4gYmVpbmcgZG93bmxvYWRlZCBpbnRvIHRoZSBjYWNoZSBkaXJlY3RvcnksIGV4dHJhY3RlZCwgYW5kIHRoZW4gdXNlZCB0byBvdmVyd3JpdGUKICogbG9jYWwgZmlsZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBjb3JydXB0ZWQgb3IgbW9kaWZpZWQKICovCmNsYXNzIE1NX1JlcGFpck1lbWJlck1vdXNlVmlldyBleHRlbmRzIE1NX1JCQUNBZG1pblZpZXcgewoJCglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9GRVRDSF9TT1VSQ0VfQVJDSElWRSA9ICJmZXRjaFNvdXJjZUFyY2hpdmUiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUkVQQUlSX0ZST01fQVJDSElWRSA9ICJyZXBhaXJGcm9tQXJjaGl2ZSI7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KQoJewoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKQoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9GRVRDSF9TT1VSQ0VfQVJDSElWRToKCQkJCQlyZXR1cm4gJHRoaXMtPmZldGNoU291cmNlQXJjaGl2ZSgkcG9zdCk7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRVBBSVJfRlJPTV9BUkNISVZFOgoJCQkJCXJldHVybiAkdGhpcy0+cmVwYWlyRnJvbUFyY2hpdmUoJHBvc3QpOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCS8qKgoJICogUmV0cmlldmVzIHRoZSBzb3VyY2UgYXJjaGl2ZSBmcm9tIE1lbWJlck1vdXNlIENlbnRyYWwgZm9yIHRoZSBjdXJyZW50bHkgcnVubmluZyB2ZXJzaW9uIG9mIHRoZSBwbHVnaW4KCSAqIAoJICogQHBhcmFtIEFycmF5ICRwb3N0IERhdGEgUE9TVGVkIGFzIHBhcnQgb2YgdGhlIHJlcXVlc3QKCSAqIEByZXR1cm4gaW5zdGFuY2Ugb2YgTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUuIE9uIGVycm9yLCB0aGUgbWVzc2FnZSB2YXJpYWJsZSBvZiB0aGUgTU1fUmVzcG9uc2UgaXMgYW4gCgkgKiAJCSAgIGFycmF5IGNvbnRhaW5pbmcgbW9yZSBkZXRhaWxzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBmZXRjaFNvdXJjZUFyY2hpdmUoJHBvc3QpCgl7CgkJLy9tYWtlIHN1cmUgY2FjaGUgaXMgc3RpbGwgd3JpdGVhYmxlCgkJaWYgKCFNTV9VdGlsczo6Y2FjaGVJc1dyaXRlYWJsZSgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShhcnJheSgic3RhdHVzIj0+ImNhY2hlX25vdF93cml0ZWFibGUiKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNhY2hlRGlyID0gTU1fVXRpbHM6OmdldENhY2hlRGlyKCk7CgkJJHJlcGFpcl9hcmNoaXZlID0gInskY2FjaGVEaXJ9L3JlcGFpcl9hcmNoaXZlLnppcCI7CgkJCgkJaWYgKCFmaWxlX2V4aXN0cygkcmVwYWlyX2FyY2hpdmUpKQoJCXsJCgkJCS8vdXNlIGN1cmwgdG8gcmV0cmlldmUgdGhlIHNvdXJjZSBhcmNoaXZlCgkJCSR2ZXJzaW9uID0gTWVtYmVyTW91c2U6OmdldFBsdWdpblZlcnNpb24oKTsKCQkJJHVybCAgPSAiaHR0cDovL2h1Yi5tZW1iZXJtb3VzZS5jb20vbWFqb3ItdmVyc2lvbnMveyR2ZXJzaW9ufS56aXAiOwkJCgkJCQoJCQlpZiAoISR0aGlzLT51cmxFeGlzdHMoJHVybCkpCgkJCXsKCQkJCSRzdGF0dXMgPSBhcnJheSgic3RhdHVzIj0+InJlbW90ZV9hcmNoaXZlX2RvZXNudF9leGlzdCIsInVybCI9PiR1cmwpOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkc3RhdHVzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQoJCQkkZnAgPSBmb3BlbigkcmVwYWlyX2FyY2hpdmUsICd3Jyk7CgkJCQoJCQkkY2ggPSBjdXJsX2luaXQoJHVybCk7CgkJCWN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GSUxFLCAkZnApOwoJCQkkZGF0YSA9IGN1cmxfZXhlYygkY2gpOwoJCQkKCQkJY3VybF9jbG9zZSgkY2gpOwoJCQlmY2xvc2UoJGZwKTsKCQkJLy9UT0RPOiBlcnJvci1jaGVjayB0aGUgY3VybCBvcAoJCX0KCQkKCQlyZXR1cm4gZmlsZV9leGlzdHMoJHJlcGFpcl9hcmNoaXZlKT8obmV3IE1NX1Jlc3BvbnNlKCkpOihuZXcgTU1fUmVzcG9uc2UoYXJyYXkoImVycm9yIj0+ImVycm9yX3JldHJpZXZpbmdfcmVwYWlyX2FyY2hpdmUiKSxNTV9SZXNwb25zZTo6JEVSUk9SKSk7CQkJCQoJfQkKCQoJLyoqCgkgKiBBdHRlbXB0cyB0byByZXBhaXIgbG9jYWwgcGx1Z2luIGZpbGVzIHVzaW5nIHRoZSBjbGVhbiBhcmNoaXZlIGRvd25sb2FkZWQgcHJldmlvdXNseSBmcm9tIE1lbWJlck1vdXNlIGNlbnRyYWwKCSAqIFRoaXMgd2lsbCBmYWlsIGlmIHRoZSBhcmNoaXZlIGRvZXMgbm90IGV4aXN0IGluIHRoZSBjYWNoZSBkaXJlY3RvcnksIG9yIHRoZSB3ZWJzZXJ2ZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9ucyAKCSAqIHRvIG92ZXJ3cml0ZS9jcmVhdGUgcGx1Z2luIGZpbGVzCgkgKiAKCSAqIEBwYXJhbSBBcnJheSAkcG9zdCBBbiBhcnJheSBjb250YWluaW5nIGRhdGEgUE9TVGVkIGFzIHBhcnQgb2YgdGhlIHJlcXVlc3QKCSAqIEByZXR1cm4gaW5zdGFuY2Ugb2YgTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUuIE9uIGVycm9yLCB0aGUgbWVzc2FnZSB2YXJpYWJsZSBvZiB0aGUgTU1fUmVzcG9uc2UgaXMgYW4gCgkgKiAJCSAgIGFycmF5IGNvbnRhaW5pbmcgbW9yZSBkZXRhaWxzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZXBhaXJGcm9tQXJjaGl2ZSgkcG9zdCkKCXsKCQkkY2FjaGVEaXIgPSBNTV9VdGlsczo6Z2V0Q2FjaGVEaXIoKTsKCQkkcmVwYWlyRGlyID0gInskY2FjaGVEaXJ9L3JlcGFpciI7CgkJJHJlcGFpcl9hcmNoaXZlID0gInskY2FjaGVEaXJ9L3JlcGFpcl9hcmNoaXZlLnppcCI7CgkJCgkJaWYgKCFmaWxlX2V4aXN0cygkcmVwYWlyX2FyY2hpdmUpKSB7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoYXJyYXkoInN0YXR1cyI9PiJhcmNoaXZlX2RvZXNudF9leGlzdCIpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlnbG9iYWwgJHdwX2ZpbGVzeXN0ZW07CgkJaWYgKCFpc3NldCgkd3BfZmlsZXN5c3RlbSkgfHwgKCR3cF9maWxlc3lzdGVtID09IG51bGwpKQoJCXsKCQkJV1BfRmlsZXN5c3RlbSgpOwoJCX0KCQl1bnppcF9maWxlKCRyZXBhaXJfYXJjaGl2ZSwkcmVwYWlyRGlyKTsKCQkKCQlpZiAoIWlzX2RpcigkcmVwYWlyRGlyKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoYXJyYXkoInN0YXR1cyI9PiJlcnJvcl9leHRyYWN0aW5nX2FyY2hpdmUiKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHNvdXJjZV9kaXIgPSAieyRyZXBhaXJEaXJ9L21lbWJlcm1vdXNlIjsKCQkkZGVzdF9kaXIgPSBNTV9QTFVHSU5fQUJTUEFUSDsKCQkKCQkkaXRlcmF0b3IgPSBuZXcgUmVjdXJzaXZlSXRlcmF0b3JJdGVyYXRvcihuZXcgUmVjdXJzaXZlRGlyZWN0b3J5SXRlcmF0b3IoJHJlcGFpckRpciksIFJlY3Vyc2l2ZUl0ZXJhdG9ySXRlcmF0b3I6OlNFTEZfRklSU1QpOwoJICAgICRvcGVyYXRpb25fc3RhdHVzID0gdHJ1ZTsKCSAgICBmb3JlYWNoICgkaXRlcmF0b3IgYXMgJHBhdGgpIAoJICAgIHsKCSAgICAgICRjdXJfZGVzdCA9IHN0cl9yZXBsYWNlKCIkc291cmNlX2RpciIsIiRkZXN0X2RpciIsJHBhdGgtPl9fdG9TdHJpbmcoKSk7CgkgICAgICBpZiAoJHBhdGgtPmlzRGlyKCkpIAoJICAgICAgewoJICAgICAgICAgaWYgKCFpc19kaXIoJGN1cl9kZXN0KSkKCSAgICAgICAgIHsKCSAgICAgICAgIAkkb3BlcmF0aW9uX3N0YXR1cyA9ICRvcGVyYXRpb25fc3RhdHVzICYmIG1rZGlyKCRjdXJfZGVzdCwiIix0cnVlKTsKCSAgICAgICAgIH0KCSAgICAgIH0gCgkgICAgICBlbHNlIAoJICAgICAgewoJICAgICAgCS8vbXVzdCBiZSBhIGZpbGUsIGNvcHkKCSAgICAgIAkkb3BlcmF0aW9uX3N0YXR1cyA9ICRvcGVyYXRpb25fc3RhdHVzICYmIGNvcHkoJHBhdGgtPl9fdG9TdHJpbmcoKSwkY3VyX2Rlc3QpOwoJICAgICAgfQoJICAgIH0KCSAgICAKCSAgICBpZiAoJG9wZXJhdGlvbl9zdGF0dXMgPT0gdHJ1ZSkKCSAgICB7CgkgICAgCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCSAgICB9CgkgICAgZWxzZQoJICAgIHsKCSAgICAJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShhcnJheSgic3RhdHVzIj0+ImVycm9yX3VwZGF0aW5nX2ZpbGVzIiksTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkgICAgfQoJfQoJCgkvKioKCSAqIE1ldGhvZCB0YWtlbiBmcm9tIHRoZSBleGFtcGxlcyBvbiBwaHAubmV0IHRvIGRldGVjdCBpZiBhIHVybCBleGlzdHMKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkdXJsIFRoZSB1cmwgdG8gdGVzdC4gQXNzdW1lZCB0byBiZSBhIHZhbGlkIFVSSQoJICogQHJldHVybiBib29sZWFuIHRydWUgb3IgZmFsc2UgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHVybCBleGlzdHMKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiB1cmxFeGlzdHMoJHVybCkgCgl7CgkgICAgJGhhbmRsZSA9IGN1cmxfaW5pdCgkdXJsKTsKCSAgICBpZiAoZmFsc2UgPT09ICRoYW5kbGUpCgkgICAgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfQoJICAgIGN1cmxfc2V0b3B0KCRoYW5kbGUsIENVUkxPUFRfSEVBREVSLCBmYWxzZSk7CgkgICAgY3VybF9zZXRvcHQoJGhhbmRsZSwgQ1VSTE9QVF9GQUlMT05FUlJPUiwgdHJ1ZSk7ICAKCSAgICBjdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX0hUVFBIRUFERVIsIEFycmF5KCJVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoV2luZG93czsgVTsgV2luZG93cyBOVCA1LjE7IGVuLVVTOyBydjoxLjguMS4xNSkgR2Vja28vMjAwODA2MjMgRmlyZWZveC8yLjAuMC4xNSIpICk7IC8vIHJlcXVlc3QgYXMgaWYgRmlyZWZveCAgICAKCSAgICBjdXJsX3NldG9wdCgkaGFuZGxlLCBDVVJMT1BUX05PQk9EWSwgdHJ1ZSk7CgkgICAgY3VybF9zZXRvcHQoJGhhbmRsZSwgQ1VSTE9QVF9SRVRVUk5UUkFOU0ZFUiwgZmFsc2UpOwoJICAgICRjb25uZWN0YWJsZSA9IGN1cmxfZXhlYygkaGFuZGxlKTsKCSAgICBjdXJsX2Nsb3NlKCRoYW5kbGUpOyAgIAoJICAgIHJldHVybiAkY29ubmVjdGFibGU7Cgl9CgkKfQo=', 0, '2018-11-21 06:38:54'),
(87, 'freememberwebformrequest', 'LyoqCiAqIAogKgogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICoKICogTU1fRnJlZU1lbWJlcldlYmZvcm1SZXF1ZXN0IGlzIHJlc3BvbnNpYmxlIGZvciBwcm9jZXNzaW5nIGZyZWUgbWVtYmVyIHdlYmZvcm0gZGF0YS4KICovCgpjbGFzcyBNTV9GcmVlTWVtYmVyV2ViZm9ybVJlcXVlc3QgZXh0ZW5kcyBNTV9PcmRlclJlcXVlc3QKewkKCXByb3RlY3RlZCAkbmV3VXNlciA9IG51bGw7Cglwcm90ZWN0ZWQgJG1lbWJlcnNoaXAgPSBudWxsOwoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIHRoZSB3ZWJmb3JtIGRhdGEgYnkgZW5zdXJpbmcgdGhhdCByZXF1aXJlZCBmaWVsZHMgYXJlIHByZXNlbnQgYW5kIAoJICogdGhhdCB0aGUgbWVtYmVyc2hpcCBsZXZlbCBwYXNzZWQgaXMgdmFsaWQuIEl0IHRoZW4gY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBNTV9Vc2VyIGFuZCAKCSAqIHBvcHVsdGVzIGl0IHdpdGggdGhlIHdlYmZvcm0gZGF0YS4KCSAqCgkgKiBAc2VlIE1NX09yZGVyUmVxdWVzdDo6cHJvY2Vzc1JlcXVlc3QoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc1JlcXVlc3QoKQoJewoJCWlmKCFpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbImVtYWlsIl0pIHx8IHRyaW0oJHRoaXMtPnJlcXVlc3REYXRhWyJlbWFpbCJdKSA9PSAiIikKCQl7CgkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCSR0aGlzLT5zdGF0ZS0+bWVzc2FnZSA9ICJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiBlbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkIjsKCQkJcmV0dXJuOwoJCX0KCQllbHNlIGlmKCFNTV9VdGlsczo6dmFsaWRhdGVFbWFpbCgkdGhpcy0+cmVxdWVzdERhdGFbImVtYWlsIl0pKQoJCXsKCQkJJHRoaXMtPnN0YXRlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJJHRoaXMtPnN0YXRlLT5tZXNzYWdlID0gIid7JHRoaXMtPnJlcXVlc3REYXRhWyJlbWFpbCJdfScgaXMgbm90IGEgdmFsaWQgZW1haWwgYWRkcmVzcyI7CgkJCXJldHVybjsKCQl9CgkJCgkJaWYoIWlzc2V0KCR0aGlzLT5yZXF1ZXN0RGF0YVsibWVtYmVyX3R5cGUiXSkgJiYgIWlzc2V0KCR0aGlzLT5yZXF1ZXN0RGF0YVsibWVtYmVyc2hpcF9sZXZlbCJdKSkKCQl7CgkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCSR0aGlzLT5zdGF0ZS0+bWVzc2FnZSA9ICJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkOiBtZW1iZXJzaGlwIGxldmVsIGlzIHJlcXVpcmVkIjsKCQkJcmV0dXJuOwoJCX0KCQkKCQkkbWVtYmVyc2hpcExldmVsSWQgPSAoaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyJtZW1iZXJzaGlwX2xldmVsIl0pKSA/ICR0aGlzLT5yZXF1ZXN0RGF0YVsibWVtYmVyc2hpcF9sZXZlbCJdIDogJHRoaXMtPnJlcXVlc3REYXRhWyJtZW1iZXJfdHlwZSJdOwoJCQoJCSR0aGlzLT5yZXF1ZXN0ZWRNZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkbWVtYmVyc2hpcExldmVsSWQpOwoJCQoJCWlmKCR0aGlzLT5yZXF1ZXN0ZWRNZW1iZXJzaGlwLT5pc1ZhbGlkKCkgJiYgJHRoaXMtPnJlcXVlc3RlZE1lbWJlcnNoaXAtPmlzRnJlZSgpKQoJCXsKCQkJJHRoaXMtPm5ld1VzZXIgPSBuZXcgTU1fVXNlcigpOwoJCQkkdGhpcy0+bmV3VXNlci0+c2V0RW1haWwoJHRoaXMtPnJlcXVlc3REYXRhWyJlbWFpbCJdKTsKCQkJCgkJCWlmKGlzc2V0KCR0aGlzLT5yZXF1ZXN0RGF0YVsidXNlcm5hbWUiXSkgJiYgJHRoaXMtPnJlcXVlc3REYXRhWyJ1c2VybmFtZSJdICE9ICIiKQoJCQl7CgkJCQkkdGhpcy0+bmV3VXNlci0+c2V0VXNlcm5hbWUoJHRoaXMtPnJlcXVlc3REYXRhWyJ1c2VybmFtZSJdKTsKCQkJfQoJCQkKCQkJaWYoaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyJwYXNzd29yZCJdKSAmJiAkdGhpcy0+cmVxdWVzdERhdGFbInBhc3N3b3JkIl0gIT0gIiIpCgkJCXsKCQkJCSR0aGlzLT5uZXdVc2VyLT5zZXRQYXNzd29yZCgkdGhpcy0+cmVxdWVzdERhdGFbInBhc3N3b3JkIl0pOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSR0aGlzLT5uZXdVc2VyLT5zZXRQYXNzd29yZChNTV9VdGlsczo6Y3JlYXRlUmFuZG9tU3RyaW5nKDcpKTsKCQkJfQoJCQkKCQkJaWYoaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyJmaXJzdF9uYW1lIl0pICYmICR0aGlzLT5yZXF1ZXN0RGF0YVsiZmlyc3RfbmFtZSJdICE9ICIiKQoJCQl7CgkJCQkkdGhpcy0+bmV3VXNlci0+c2V0Rmlyc3ROYW1lKCR0aGlzLT5yZXF1ZXN0RGF0YVsiZmlyc3RfbmFtZSJdKTsKCQkJfQoJCQkKCQkJaWYoaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyJsYXN0X25hbWUiXSkgJiYgJHRoaXMtPnJlcXVlc3REYXRhWyJsYXN0X25hbWUiXSAhPSAiIikKCQkJewoJCQkJJHRoaXMtPm5ld1VzZXItPnNldExhc3ROYW1lKCR0aGlzLT5yZXF1ZXN0RGF0YVsibGFzdF9uYW1lIl0pOwoJCQl9CgkJCQoJCQlpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbInBob25lIl0pICYmICR0aGlzLT5yZXF1ZXN0RGF0YVsicGhvbmUiXSAhPSAiIikKCQkJewoJCQkJJHRoaXMtPm5ld1VzZXItPnNldFBob25lKCR0aGlzLT5yZXF1ZXN0RGF0YVsicGhvbmUiXSk7CgkJCX0KCQkJCgkJCSR0aGlzLT5uZXdVc2VyLT52YWxpZGF0ZSgpOwoJCX0KCQllbHNlCgkJewoJCQkkdGhpcy0+c3RhdGUtPnR5cGUgPSBNTV9SZXNwb25zZTo6JEVSUk9SOwoJCQkkdGhpcy0+c3RhdGUtPm1lc3NhZ2UgPSAiSW52YWxpZCBtZW1iZXJzaGlwIGxldmVsIElEICciLiRtZW1iZXJzaGlwTGV2ZWxJZC4iJyI7CgkJCXJldHVybjsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCBhdHRlbXB0cyB0byBjcmVhdGUgdGhlIG5ldyB1c2VyIGFjY291bnQgYW5kIGFzc2lnbiB0aGUgcmVxdWVzdGVkIG1lbWJlcnNoaXAgbGV2ZWwgdGhlbS4KCSAqIAoJICogQHNlZSBNTV9PcmRlclJlcXVlc3Q6OnN1Ym1pdFJlcXVlc3QoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gc3VibWl0UmVxdWVzdCgpCgl7CgkJJHJlc3VsdCA9ICR0aGlzLT5zdGF0ZTsKCQoJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJewoJCQkkcmVzdWx0ID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduTWVtYmVyc2hpcFRvVXNlcigkdGhpcy0+bmV3VXNlciwgJHRoaXMtPnJlcXVlc3RlZE1lbWJlcnNoaXApOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJewoJCQkJJHRoaXMtPm5ld1VzZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkdGhpcy0+cmVxdWVzdERhdGFbImVtYWlsIl0pOwoJCQkJCgkJCQlpZigkdGhpcy0+bmV3VXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCS8vIGFkZCBjdXN0b20gZmllbGQgZGF0YQoJCQkJCWZvcmVhY2goJHRoaXMtPnJlcXVlc3REYXRhIGFzICRrPT4kdikKCQkJCQl7CgkJCQkJCWlmKHByZWdfbWF0Y2goIi8oY3VzdG9tXykvIiwgJGspKQoJCQkJCQl7CgkJCQkJCQkkZmllbGRJZCA9IHByZWdfcmVwbGFjZSgiL1teMC05XSsvIiwgIiIsICRrKTsKCQkJCQkJCSRyZXN1bHQgPSAkdGhpcy0+bmV3VXNlci0+c2V0Q3VzdG9tRGF0YSgkZmllbGRJZCwgJHYpOwoJCQkJCQoJCQkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJCQkJCQl7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJCgkJJHRoaXMtPmhhbmRsZVJlc3VsdCgkcmVzdWx0KTsKCX0KCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGhhbmRsZXMgdGhlIHJlc3VsdCBvZiB0aGUgYXR0ZW1wdCB0byBjcmVhdGUgdGhlIGZyZWUgbWVtYmVyIGFjY291bnQuIElmIHRoZSByZXN1bHQgaXMgc3VjY2Vzc2Z1bCwKCSAqIHRoZSBjdXN0b21lciB3aWxsIGJlIHJlZGlyZWN0ZWQgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbmZpcm1hdGlvbiBwYWdlLiBJZiB0aGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgd2ViZm9ybQoJICogb3IgY3JlYXRpbmcgdGhlIGFjY291bnQsIHRoZSBjdXN0b21lciB3aWxsIGJlIHJlZGlyZWN0ZWQgdG8gdGhlIGRlZmF1bHQgZXJyb3IgcGFnZSB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgcGFzc2VkLgoJICoKCSAqIEBwYXJhbSBNTV9SZXNwb25zZSAkcmVzdWx0IGFuIGluc3RhbmNlIG9mIGEgcmVzcG9uc2Ugb2JqZWN0IHRoYXQgY29udGFpbnMgZGV0YWlscyBhYm91dCB0aGUgcmVzdWx0IGZyb20gdGhlIGF0dGVtcHQgdG8gY3JlYXRlIHRoZSBmcmVlIG1lbWJlciBhY2NvdW50CgkgKgoJICogQHNlZSBNTV9PcmRlclJlcXVlc3Q6OmhhbmRsZVJlc3VsdCgpCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBoYW5kbGVSZXN1bHQoJHJlc3VsdCkKCXsKCQlpZigkcmVzdWx0LT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUykKCQl7CgkJCSRwYXJhbXMgPSBhcnJheSgpOwoJCQkkcGFyYW1zWyJpc0ZyZWUiXSA9IDE7CgkJCSRwYXJhbXNbInJlZlR5cGUiXSA9IE1NX1RZUEVfTUVNQkVSU0hJUF9MRVZFTDsKCQkJJHBhcmFtc1sicmVmSWQiXSA9ICR0aGlzLT5yZXF1ZXN0ZWRNZW1iZXJzaGlwLT5nZXRJZCgpOwoJCQkKCQkJJHVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT04sICRwYXJhbXMpOwoJCX0KCQllbHNlCgkJewoJCQkkdXJsID0gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldFVybChNTV9Db3JlUGFnZVR5cGU6OiRFUlJPUik7CgkJCSR1cmwgPSBNTV9VdGlsczo6YXBwZW5kVXJsUGFyYW0oJHVybCwgTU1fU2Vzc2lvbjo6JFBBUkFNX01FU1NBR0VfS0VZLCAkcmVzdWx0LT5tZXNzYWdlLCB0cnVlKTsKCQl9CgkJCgkJd3BfcmVkaXJlY3QoJHVybCk7CgkJZXhpdDsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(88, 'activitylog', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KCmNsYXNzIE1NX0FjdGl2aXR5TG9nIGV4dGVuZHMgTU1fRW50aXR5CnsKCXB1YmxpYyBzdGF0aWMgJEVWRU5UX1RZUEVfUEFHRV9BQ0NFU1MgPSAicGFnZS1hY2Nlc3MiOwoJcHVibGljIHN0YXRpYyAkRVZFTlRfVFlQRV9MT0dJTiA9ICJsb2dpbiI7CglwdWJsaWMgc3RhdGljICRFVkVOVF9UWVBFX0VNQUlMID0gImVtYWlsIjsKCXB1YmxpYyBzdGF0aWMgJEVWRU5UX1RZUEVfQUNDRVNTX1JJR0hUUyA9ICJhY2Nlc3MtcmlnaHRzIjsKCXB1YmxpYyBzdGF0aWMgJEVWRU5UX1RZUEVfQklMTElORyA9ICJiaWxsaW5nIjsKCXB1YmxpYyBzdGF0aWMgJEVWRU5UX1RZUEVfQUZGSUxJQVRFX1RSQUNLSU5HID0gImFmZmlsaWF0ZS10cmFja2luZyI7CgkKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX1BBR0VfSUQgPSAicGFnZS1pZCI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9BRkZJTElBVEVfSUQgPSAiYWZmaWxpYXRlLWlkIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX1NVQkFGRklMSUFURV9JRCA9ICJzdWJhZmZpbGlhdGUtaWQiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fRU1BSUxfVE9fQUREUkVTUyA9ICJlbWFpbC10by1hZGRyZXNzIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0VNQUlMX0NDX0FERFJFU1NFUyA9ICJlbWFpbC1jYy1hZGRyZXNzZXMiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fRU1BSUxfRlJPTV9BRERSRVNTID0gImVtYWlsLWZyb20tYWRkcmVzcyI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9FTUFJTF9TVUJKRUNUID0gImVtYWlsLXN1YmplY3QiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fRU1BSUxfQk9EWSA9ICJlbWFpbC1ib2R5IjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0FDQ0VTU19FVkVOVCA9ICJhY2Nlc3MtZXZlbnQiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQUNDRVNTX0lEID0gImFjY2Vzcy1pZCI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9BQ0NFU1NfU1RBVFVTID0gImFjY2Vzcy1zdGF0dXMiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQUNDRVNTX1NUQVRVU19NRVNTQUdFID0gImFjY2Vzcy1zdGF0dXMtbWVzc2FnZSI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9BQ0NFU1NfSVNfQ09NUExJTUVOVEFSWSA9ICJhY2Nlc3MtaXMtY29tcGxpbWVudGFyeSI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9CSUxMSU5HX0VWRU5UID0gImJpbGxpbmctZXZlbnQiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQklMTElOR19PUkRFUl9JRCA9ICJiaWxsaW5nLW9yZGVyLWlkIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0JJTExJTkdfT1JERVJfTlVNQkVSID0gImJpbGxpbmctb3JkZXItbnVtYmVyIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0JJTExJTkdfT1JERVJfSVBfQUREUkVTUyA9ICJiaWxsaW5nLW9yZGVyLWlwLWFkZHJlc3MiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQklMTElOR19PUkRFUl9UT1RBTCA9ICJiaWxsaW5nLW9yZGVyLXRvdGFsIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0JJTExJTkdfT1JERVJfRElTQ09VTlQgPSAiYmlsbGluZy1vcmRlci1kaXNjb3VudCI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9CSUxMSU5HX09SREVSX1BST0RVQ1RTID0gImJpbGxpbmctb3JkZXItcHJvZHVjdHMiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQklMTElOR19PUkRFUl9DT1VQT05TID0gImJpbGxpbmctb3JkZXItY291cG9ucyI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9CSUxMSU5HX09SREVSX1BST1JBVElPTlMgPSAiYmlsbGluZy1vcmRlci1wcm9yYXRpb25zIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0JJTExJTkdfT1JERVJfQUZGRklMSUFURV9JRCA9ICJiaWxsaW5nLW9yZGVyLWFmZmlsaWF0ZS1pZCI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9CSUxMSU5HX09SREVSX1NVQkFGRkZJTElBVEVfSUQgPSAiYmlsbGluZy1vcmRlci1zdWJhZmZpbGlhdGUtaWQiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQklMTElOR19ORVhUX1JFQklMTF9EQVRFID0gImJpbGxpbmctbmV4dC1yZWJpbGwtZGF0ZSI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9BRkZJTElBVEVfVFJBQ0tJTkdfRVZFTlQgPSAiYWZmaWxpYXRlLXRyYWNraW5nLWV2ZW50IjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0FGRklMSUFURV9PUkRFUl9OVU1CRVIgPSAiYWZmaWxpYXRlLW9yZGVyLW51bWJlciI7CglwdWJsaWMgc3RhdGljICRQQVJBTV9BRkZJTElBVEVfT1JERVJfVE9UQUwgPSAiYWZmaWxpYXRlLW9yZGVyLXRvdGFsIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0FGRklMSUFURV9PUkRFUl9JUF9BRERSRVNTID0gImFmZmlsaWF0ZS1pcC1hZGRyZXNzIjsKCXB1YmxpYyBzdGF0aWMgJFBBUkFNX0FGRklMSUFURV9DT1VQT05fQ09ERSA9ICJhZmZpbGlhdGUtY291cG9uLWNvZGUiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQUZGSUxJQVRFX1BST1ZJREVSX05BTUUgPSAiYWZmaWxpYXRlLXByb3ZpZGVyLW5hbWUiOwoJcHVibGljIHN0YXRpYyAkUEFSQU1fQUZGSUxJQVRFX1RSQUNLSU5HX1VSTCA9ICJhZmZpbGlhdGUtdHJhY2tpbmctdXJsIjsKCQoJcHJpdmF0ZSAkZXZlbnRUeXBlID0gIiI7Cglwcml2YXRlICR1c2VySWQgPSAiIjsKCXByaXZhdGUgJHVybCA9ICIiOwoJcHJpdmF0ZSAkcmVmZXJyZXIgPSAiIjsKCXByaXZhdGUgJGFkZGl0aW9uYWxQYXJhbXMgPSBhcnJheSgpOwoJcHJpdmF0ZSAkaXAgPSAiIjsKCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9FVkVOVF9MT0cuIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIiciOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCgkJaWYoJHJlc3VsdCl7CgkJCSR0aGlzLT5zZXREYXRhKCRyZXN1bHQpOwoJCX0KCQllbHNlIHsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5ldmVudFR5cGUgPSAkZGF0YS0+ZXZlbnRfdHlwZTsKCQkJJHRoaXMtPnVybCA9ICRkYXRhLT51cmw7CgkJCSR0aGlzLT5yZWZlcnJlciA9ICRkYXRhLT5yZWZlcnJlcjsKCQkJJHRoaXMtPnVzZXJJZCA9ICRkYXRhLT51c2VyX2lkOwoJCQkkdGhpcy0+aXAgPSAkZGF0YS0+aXA7CgkJCSR0aGlzLT5hZGRpdGlvbmFsUGFyYW1zID0gJGRhdGEtPmFkZGl0aW9uYWxfcGFyYW1zOwoJCQkKCQkJaWYoIWVtcHR5KCR0aGlzLT5hZGRpdGlvbmFsUGFyYW1zKSkKCQkJewoJCQkJJHRoaXMtPmFkZGl0aW9uYWxQYXJhbXMgPSB1bnNlcmlhbGl6ZSgkdGhpcy0+YWRkaXRpb25hbFBhcmFtcyk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdGhpcy0+YWRkaXRpb25hbFBhcmFtcyA9IGFycmF5KCk7CgkJCX0KCgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIAoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoIU1NX0VtcGxveWVlOjppc0VtcGxveWVlKCR0aGlzLT51c2VySWQpKQoJCXsKCQkJJGFjdGl2aXR5TG9nRGF0YSA9IGFycmF5KAoJCQkJCSJldmVudF90eXBlIiA9PiAkdGhpcy0+ZXZlbnRUeXBlLAoJCQkJCSJ1cmwiICAgICAgICA9PiAkdGhpcy0+dXJsLAoJCQkJCSJyZWZlcnJlciIJID0+ICR0aGlzLT5yZWZlcnJlciwKCQkJCQkidXNlcl9pZCIJID0+ICR0aGlzLT51c2VySWQsCgkJCQkJImlwIgkJID0+ICR0aGlzLT5pcCwKCQkJCQkiZGF0ZV9tb2RpZmllZCIJPT4gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCkKCQkJKTsKCQkJaWYoaW50dmFsKCR0aGlzLT5pZCk+MCkKCQkJewoJCQkJaWYoY291bnQoJHRoaXMtPmFkZGl0aW9uYWxQYXJhbXMpID4gMCkKCQkJCXsKCQkJCQkkYWN0aXZpdHlMb2dEYXRhWydhZGRpdGlvbmFsX3BhcmFtcyddID0gc2VyaWFsaXplKCR0aGlzLT5hZGRpdGlvbmFsUGFyYW1zKTsKCQkJCX0KCQkJCQoJCQkJJHdoZXJlQ2xhdXNlID0gYXJyYXkoImlkIj0+JHRoaXMtPmlkKTsKCQkJCQkKCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfRVZFTlRfTE9HLCRhY3Rpdml0eUxvZ0RhdGEsJHdoZXJlQ2xhdXNlKTsKCQkJCXJldHVybiAkdGhpcy0+aWQ7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkYWN0aXZpdHlMb2dEYXRhWydkYXRlX2FkZGVkJ10gPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJCWlmKGNvdW50KCR0aGlzLT5hZGRpdGlvbmFsUGFyYW1zKSA+IDApIAoJCQkJewoJCQkJCSRhY3Rpdml0eUxvZ0RhdGFbJ2FkZGl0aW9uYWxfcGFyYW1zJ10gPSBzZXJpYWxpemUoJHRoaXMtPmFkZGl0aW9uYWxQYXJhbXMpOwoJCQkJfQoJCQkJCgkJCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0VWRU5UX0xPRywkYWN0aXZpdHlMb2dEYXRhKTsKCQkJCSR0aGlzLT5pZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJCQlyZXR1cm4gJHRoaXMtPmlkOwoJCQl9CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9CgoJCgkKCS8qKiBVVElMSVRJRVMgKiovCgkKCS8qKgoJICogVGhpcyBtZXRob2QgbG9ncyBhbiBldmVudAoJICogCgkgKiBAcGFyYW0gTU1fVXNlciAkdXNlciB0aGUgdXNlciB0byBsb2cgYW4gZXZlbnQgZm9yCgkgKiBAcGFyYW0gU3RyaW5nICRldmVudFR5cGUgdGhlIGV2ZW50IHR5cGUKCSAqIEBwYXJhbSBBcnJheSAkcGFyYW1zIGFueSBwYXJhbWV0ZXJzIHRvIHN0b3JlCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbG9nKE1NX1VzZXIgJHVzZXIsICRldmVudFR5cGUsICRwYXJhbXM9bnVsbCkKCXsKCQlpZighaXNfbnVsbCgkdXNlcikgJiYgJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCSRhY3Rpdml0eUxvZyA9IG5ldyBNTV9BY3Rpdml0eUxvZygpOwoJCQkkYWN0aXZpdHlMb2ctPnNldEV2ZW50VHlwZSgkZXZlbnRUeXBlKTsKCQkJJGFjdGl2aXR5TG9nLT5zZXRVc2VySWQoJHVzZXItPmdldElkKCkpOwoJCQkKCQkJc3dpdGNoKCRhY3Rpdml0eUxvZy0+Z2V0RXZlbnRUeXBlKCkpIAoJCQl7CgkJCQljYXNlIE1NX0FjdGl2aXR5TG9nOjokRVZFTlRfVFlQRV9MT0dJTjoJCQkKCQkJCQkvLyB1cGRhdGUgbGFzdCBsb2dpbiBpbmZvIG9uIHVzZXIKCQkJCQkkdXNlci0+c2V0TGFzdExvZ2luRGF0ZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSk7CgkJCQkJJHVzZXItPmNvbW1pdERhdGEoKTsKCgkJCQkJJGFjdGl2aXR5TG9nLT5zZXRSZWZlcnJlcihNTV9VdGlsczo6Z2V0UmVmZXJyZXIoKSk7CgkJCQkJJGFjdGl2aXR5TG9nLT5zZXRJcChNTV9VdGlsczo6Z2V0Q2xpZW50SVBBZGRyZXNzKCkpOwoJCQkJCSRhY3Rpdml0eUxvZy0+c2V0VXJsKE1NX1V0aWxzOjpjb25zdHJ1Y3RQYWdlVXJsKCkpOwoJCQkJCSRhY3Rpdml0eUxvZy0+Y29tbWl0RGF0YSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBNTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfUEFHRV9BQ0NFU1M6CgkJCQkJaWYoIWlzX251bGwoJHBhcmFtcykgJiYgaXNfYXJyYXkoJHBhcmFtcykgJiYgY291bnQoJHBhcmFtcykgPiAwKQoJCQkJCXsKCQkJCQkJJGFmZmlsaWF0ZUlkID0gTU1fQ29va2llczo6Z2V0QWZmaWxpYXRlVmFsdWUoKTsKCQkJCQkJJHN1YmFmZmlsaWF0ZUlkID0gTU1fQ29va2llczo6Z2V0U3ViQWZmaWxpYXRlVmFsdWUoKTsKCQkJCQkJCgkJCQkJCWlmKCFlbXB0eSgkYWZmaWxpYXRlSWQpKQoJCQkJCQl7CgkJCQkJCQkkcGFyYW1zW3NlbGY6OiRQQVJBTV9BRkZJTElBVEVfSURdID0gJGFmZmlsaWF0ZUlkOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQlpZighZW1wdHkoJHN1YmFmZmlsaWF0ZUlkKSkKCQkJCQkJewoJCQkJCQkJJHBhcmFtc1tzZWxmOjokUEFSQU1fU1VCQUZGSUxJQVRFX0lEXSA9ICRzdWJhZmZpbGlhdGVJZDsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJJGFjdGl2aXR5TG9nLT5zZXRBZGRpdGlvbmFsUGFyYW1zKCRwYXJhbXMpOwoJCQkJCX0KCgkJCQkJJGFjdGl2aXR5TG9nLT5zZXRSZWZlcnJlcihNTV9VdGlsczo6Z2V0UmVmZXJyZXIoKSk7CgkJCQkJJGFjdGl2aXR5TG9nLT5zZXRJcChNTV9VdGlsczo6Z2V0Q2xpZW50SVBBZGRyZXNzKCkpOwoJCQkJCSRhY3Rpdml0eUxvZy0+c2V0VXJsKE1NX1V0aWxzOjpjb25zdHJ1Y3RQYWdlVXJsKCkpOwoJCQkJCQoJCQkJCS8vIGRvbid0IHN0b3JlIGFjY2VzcyB0byBsb2dpbiBwYWdlCgkJCQkJaWYoc3RycG9zKCRhY3Rpdml0eUxvZy0+Z2V0VXJsKCksICJ3cC1sb2dpbiIpID09PSBmYWxzZSkKCQkJCQl7CgkJCQkJCSRhY3Rpdml0eUxvZy0+Y29tbWl0RGF0YSgpOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0JJTExJTkc6CgkJCQkJaWYoIWlzX251bGwoJHBhcmFtcykgJiYgaXNfYXJyYXkoJHBhcmFtcykgJiYgY291bnQoJHBhcmFtcykgPiAwKQoJCQkJCXsKCQkJCQkJJGFjdGl2aXR5TG9nLT5zZXRBZGRpdGlvbmFsUGFyYW1zKCRwYXJhbXMpOwoJCQkJCQkKCQkJCQkJaWYoJHBhcmFtc1tzZWxmOjokUEFSQU1fQklMTElOR19FVkVOVF0gPT0gTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQ0VJVkVEICYmIAoJCQkJCQkJaXNzZXQoJHBhcmFtc1tzZWxmOjokUEFSQU1fQklMTElOR19PUkRFUl9JUF9BRERSRVNTXSkpCgkJCQkJCXsKCQkJCQkJCSRhY3Rpdml0eUxvZy0+c2V0SXAoJHBhcmFtc1tzZWxmOjokUEFSQU1fQklMTElOR19PUkRFUl9JUF9BRERSRVNTXSk7CQoJCQkJCQl9CgkJCQkJCWVsc2UgaWYoJHBhcmFtc1tzZWxmOjokUEFSQU1fQklMTElOR19FVkVOVF0gPT0gTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9VUERBVEVEKQoJCQkJCQl7CgkJCQkJCQkkYWN0aXZpdHlMb2ctPnNldElwKE1NX1V0aWxzOjpnZXRDbGllbnRJUEFkZHJlc3MoKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJCQoJCQkJCSRhY3Rpdml0eUxvZy0+Y29tbWl0RGF0YSgpOwoJCQkJCWJyZWFrOwoKCQkJCWNhc2UgTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0FDQ0VTU19SSUdIVFM6CgkJCQljYXNlIE1NX0FjdGl2aXR5TG9nOjokRVZFTlRfVFlQRV9BRkZJTElBVEVfVFJBQ0tJTkc6CgkJCQljYXNlIE1NX0FjdGl2aXR5TG9nOjokRVZFTlRfVFlQRV9FTUFJTDoKCQkJCQlpZighaXNfbnVsbCgkcGFyYW1zKSAmJiBpc19hcnJheSgkcGFyYW1zKSAmJiBjb3VudCgkcGFyYW1zKSA+IDApCgkJCQkJewoJCQkJCQkkYWN0aXZpdHlMb2ctPnNldEFkZGl0aW9uYWxQYXJhbXMoJHBhcmFtcyk7CgkJCQkJfQoJCQkJCQoJCQkJCSRhY3Rpdml0eUxvZy0+Y29tbWl0RGF0YSgpOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCBjbGVhbnMgdXAgdGhlIGFjdGl2aXR5IGxvZyBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc2V0IGJ5IHRoZSB1c2VyLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHBlcmZvcm1DbGVhbnVwKCkKCXsKCQkkY2xlYW51cEVuYWJsZWQgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BQ1RJVklUWV9MT0dfQ0xFQU5VUF9FTkFCTEVEKTsKCQkKCQlpZigkY2xlYW51cEVuYWJsZWQgPT0gIjEiKQoJCXsKCQkJJGNsZWFudXBJbnRlcnZhbCA9IGludHZhbChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BQ1RJVklUWV9MT0dfQ0xFQU5VUF9JTlRFUlZBTCkpOwoJCQkKCQkJZ2xvYmFsICR3cGRiOwoJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfRVZFTlRfTE9HLiIgV0hFUkUgZGF0ZV9hZGRlZCA8IChub3coKSAtIElOVEVSVkFMIHskY2xlYW51cEludGVydmFsfSBkYXkpOyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIHRoZSBtZW1iZXIgaGFzIHJlYWNoZWQgdGhlaXIgbWF4aW11bSBhbGxvd2FibGUgSVAgY291bnQgd2l0aGluIGEgMjQgaG91ciBwZXJpb2QuCgkgKiBFYWNoIHRpbWUgYSBtZW1iZXIgbG9ncyBpbiwgdGhlIGxvZ2luIGV2ZW50IGlzIGxvZ2dlZCBhbG9uZyB3aXRoIHRoZWlyIElQIGFkZHJlc3MuIElmIHRoZSBzYW1lIG1lbWJlcgoJICogYWNjb3VudCBoYXMgYSBudW1iZXIgb2YgSVAgYWRkcmVzc2VzIGxvZ2dpbmcgaW4gd2l0aGluIGEgMjQgaG91ciBwZXJpb2QgdGhpcyBpcyBhIHN0cm9uZyBpbmRpY2F0aW9uIHRoYXQKCSAqIHRoZSBhY2NvdW50IGNyZWRlbnRpYWxzIGFyZSBiZWluZyBzaGFyZWQgYmV0d2VlbiBtdWx0aXBsZSBwZW9wbGUuIFRoaXMgbWV0aG9kIHJldHVybnMgdHJ1ZSBpZiB0aGUgbWVtYmVyCgkgKiBoYXMgc3VycGFzc2VkIHRoZSBhbGxvd2FibGUgSVAgYWRkcmVzcyBjb3VudCB3aXRoaW4gYSAyNCBwZXJpb2QuCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJG1lbWJlcklkCgkgKiBAcmV0dXJuIEJvb2xlYW4gUnJldHVybnMgdHJ1ZSBpZiB0aGUgbWVtYmVyIGhhcyBzdXJwYXNzZWQgdGhlIGFsbG93YWJsZSBJUCBhZGRyZXNzIGNvdW50IHdpdGhpbiBhIDI0IHBlcmlvZC4KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBoYXNSZWFjaGVkTWF4SVBDb3VudCgkbWVtYmVySWQpCgl7CgkJJGVuYWJsZWQgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BQ0NUX1NFQ1VSSVRZX0VOQUJMRUQpOwoJCQkKCQlpZigkZW5hYmxlZCA9PSAiMSIpCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCQoJCQkkbWF4SVBzID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQUNDVF9TRUNVUklUWV9NQVhfSVBTKTsKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfRVZFTlRfTE9HLiIgV0hFUkUgZXZlbnRfdHlwZT0nIi5NTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfTE9HSU4uIicgQU5EIHVzZXJfaWQ9J3skbWVtYmVySWR9JyBhbmQgREFURShkYXRlX2FkZGVkKT1EQVRFKE5PVygpKSBHUk9VUCBCWSBpcCI7CgkJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCgkJCWlmKGlzX2FycmF5KCRyb3dzKSAmJiBjb3VudCgkcm93cykgPiBpbnR2YWwoJG1heElQcykpCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGFnZUFjY2Vzc0NvdW50KCRtZW1iZXJJZCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkKIAkJJHNxbCA9ICJTRUxFQ1QgQ09VTlQoRElTVElOQ1QgdXJsKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfRVZFTlRfTE9HLiIgV0hFUkUgZXZlbnRfdHlwZT0nIi5NTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfUEFHRV9BQ0NFU1MuIicgQU5EIHVzZXJfaWQ9J3skbWVtYmVySWR9JyAiOwogCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CiAJCQkKIAkJaWYoJHJvdykKIAkJewogCQkJcmV0dXJuICRyb3ctPnRvdGFsOwogCQl9CiAJCWVsc2UKIAkJewogCQkJcmV0dXJuIDA7CiAJCX0KIAl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TG9naW5Db3VudCgkbWVtYmVySWQpCgl7CgkJZ2xvYmFsICR3cGRiOwogCQogCQkkc3FsID0gIlNFTEVDVCBjb3VudCgqKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfRVZFTlRfTE9HLiIgV0hFUkUgZXZlbnRfdHlwZT0nIi5NTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfTE9HSU4uIicgQU5EIHVzZXJfaWQ9J3skbWVtYmVySWR9JyI7CiAJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKIAkJCQogCQlpZigkcm93KQogCQl7CiAJCQlyZXR1cm4gJHJvdy0+dG90YWw7CiAJCX0KIAkJZWxzZQogCQl7CiAJCQlyZXR1cm4gMDsKIAkJfQoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldExhc3RMb2dpbklwQWRkcmVzcygkbWVtYmVySWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiU0VMRUNUIGlwIEZST00gIi5NTV9UQUJMRV9FVkVOVF9MT0cuIiBXSEVSRSAoKGV2ZW50X3R5cGU9JyIuTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0xPR0lOLiInKSBBTkQgKHVzZXJfaWQ9J3skbWVtYmVySWR9JykpIE9SREVSIEJZIGRhdGVfYWRkZWQgZGVzYyBMSU1JVCAxOyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkKCQlpZigkcm93KQoJCXsKCQkJcmV0dXJuICRyb3ctPmlwOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIiI7CgkJfQoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEVtYWlsQ291bnQoJG1lbWJlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsKIAkKIAkJJHNxbCA9ICJTRUxFQ1QgY291bnQoKikgYXMgdG90YWwgRlJPTSAiLk1NX1RBQkxFX0VWRU5UX0xPRy4iIFdIRVJFIGV2ZW50X3R5cGU9JyIuTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0VNQUlMLiInIEFORCB1c2VyX2lkPSd7JG1lbWJlcklkfSciOwogCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CiAJCQkKIAkJaWYoJHJvdykKIAkJewogCQkJcmV0dXJuICRyb3ctPnRvdGFsOwogCQl9CiAJCWVsc2UKIAkJewogCQkJcmV0dXJuIDA7CiAJCX0KCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGRlbGV0ZU1lbWJlcigkbWVtYmVySWQpCgl7CgkgICAgZ2xvYmFsICR3cGRiOwoJICAgIAoJICAgICRzdGF0dXMgPSAkd3BkYi0+ZGVsZXRlKE1NX1RBQkxFX0VWRU5UX0xPRywgYXJyYXkoJ3VzZXJfaWQnID0+ICRtZW1iZXJJZCkpOwoJICAgIC8vJHdwZGItPmRlbGV0ZSgpIHJldHVybnMgcm93cyBhZmZlY3RlZCBvbiBzdWNlc3MsIGZhbHNlIG9uIGZhaWx1cmUuIFdlIHdhbnQgdG8gZmxhdHRlbiB0aGF0IHRvIHRydWUvZmFsc2UKCSAgICByZXR1cm4gKCRzdGF0dXMgIT09IGZhbHNlKTsgCgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRFdmVudHNMaXN0KCkKCXsKCQkkdHlwZXMgPSBhcnJheSgKCQkJc2VsZjo6JEVWRU5UX1RZUEVfQUNDRVNTX1JJR0hUUyA9PiAnQWNjZXNzIFJpZ2h0cycsCgkJCXNlbGY6OiRFVkVOVF9UWVBFX0FGRklMSUFURV9UUkFDS0lORyA9PiAnQWZmaWxpYXRlIFRyYWNraW5nJywKCQkJc2VsZjo6JEVWRU5UX1RZUEVfQklMTElORyA9PiAnQmlsbGluZycsCgkJCXNlbGY6OiRFVkVOVF9UWVBFX0VNQUlMID0+ICdFbWFpbCcsCgkJCXNlbGY6OiRFVkVOVF9UWVBFX0xPR0lOID0+ICdMb2dpbicsCgkJCXNlbGY6OiRFVkVOVF9UWVBFX1BBR0VfQUNDRVNTID0+ICdQYWdlIEFjY2VzcycKCQkpOwoJCgkJcmV0dXJuICR0eXBlczsKCX0KCQoJCgkKCS8qKiBHRVRURVJTL1NFVFRFUlMgKiovCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRFdmVudFR5cGUoKQoJewoJCXJldHVybiAkdGhpcy0+ZXZlbnRUeXBlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRFdmVudFR5cGUoJHZhbCkKCXsKCQkkdGhpcy0+ZXZlbnRUeXBlID0gJHZhbDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0VXJsKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVybDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0VXJsKCR2YWwpCgl7CgkJJHRoaXMtPnVybCA9ICR2YWw7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldFJlZmVycmVyKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnJlZmVycmVyOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRSZWZlcnJlcigkdmFsKQoJewoJCSR0aGlzLT5yZWZlcnJlciA9ICR2YWw7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldFVzZXJJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT51c2VySWQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldFVzZXJJZCgkdmFsKQoJewoJCSR0aGlzLT51c2VySWQgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRBZGRpdGlvbmFsUGFyYW1zKCRhcnIpCgl7CgkJcmV0dXJuICR0aGlzLT5hZGRpdGlvbmFsUGFyYW1zOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKCRhcnIpCgl7CgkJJHRoaXMtPmFkZGl0aW9uYWxQYXJhbXMgPSAkYXJyOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRJcCgpCgl7CgkJcmV0dXJuICR0aGlzLT5pcDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0SXAoJHZhbCkKCXsKCQkkdGhpcy0+aXAgPSAkdmFsOwoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(89, 'aweberresponse', 'LyoqCiAqIE1NX0FXZWJlclJlc3BvbnNlCiAqCiAqIEJhc2UgY2xhc3MgZm9yIG9iamVjdHMgdGhhdCByZXByZXNlbnQgYSByZXNwb25zZSBmcm9tIHRoZSBNTV9BV2ViZXJBUEkuIAogKiBSZXNwb25zZXMgd2lsbCBleGlzdCBhcyBvbmUgb2YgdGhlIHR3byBNTV9BV2ViZXJSZXNwb25zZSBzdWJjbGFzc2VzOgogKiAgLSBNTV9BV2ViZXJFbnRyeSAtIGEgc2luZ2xlIGluc3RhbmNlIG9mIGFuIEFXZWJlciByZXNvdXJjZQogKiAgLSBNTV9BV2ViZXJDb2xsZWN0aW9uIC0gYSBjb2xsZWN0aW9uIG9mIEFXZWJlciByZXNvdXJjZXMKICogQHVzZXMgTU1fQVdlYmVyQVBJQmFzZQogKiBAcGFja2FnZSAKICogQHZlcnNpb24gJGlkJAogKi8KY2xhc3MgTU1fQVdlYmVyUmVzcG9uc2UgZXh0ZW5kcyBNTV9BV2ViZXJBUElCYXNlIHsKCiAgICBwdWJsaWMgJGFkYXB0ZXIgPSBmYWxzZTsKICAgIHB1YmxpYyAkZGF0YSA9IGFycmF5KCk7CiAgICBwdWJsaWMgJF9keW5hbWljRGF0YSA9IGFycmF5KCk7CgogICAgLyoqCiAgICAgKiBfX2NvbnN0cnVjdAogICAgICoKICAgICAqIENyZWF0ZXMgYSBuZXcgQVdlYmVyUmVzcG9uZXMKICAgICAqCiAgICAgKiBAcGFyYW0gbWl4ZWQgJHJlc3BvbnNlICAgICAgIERhdGEgcmV0dXJuZWQgYnkgdGhlIEFQSSBzZXJ2ZXJzCiAgICAgKiBAcGFyYW0gbWl4ZWQgJHVybCAgICAgICAgICAgIFVSTCB3ZSBoaXQgdG8gZ2V0IHRoZSBkYXRhCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGFkYXB0ZXIgICAgICAgIE9BdXRoIGFkYXB0ZXIgdXNlZCBmb3IgZnV0dXJlIGludGVyYWN0aW9ucwogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHJlc3BvbnNlLCAkdXJsLCAkYWRhcHRlcikgewogICAgICAgICR0aGlzLT5hZGFwdGVyID0gJGFkYXB0ZXI7CiAgICAgICAgJHRoaXMtPnVybCAgICAgPSAkdXJsOwogICAgICAgICR0aGlzLT5kYXRhICAgID0gJHJlc3BvbnNlOwogICAgfQoKICAgIC8qKgogICAgICogX19zZXQKICAgICAqIAogICAgICogTWFudWFsIHJlLWltcGxlbWVudGF0aW9uIG9mIF9fc2V0LCBhbGxvd3Mgc3ViIGNsYXNzZXMgdG8gYWNjZXNzCiAgICAgKiB0aGUgZGVmYXVsdCBiZWhhdmlvciBieSB1c2luZyB0aGUgcGFyZW50OjogZm9ybWF0LgogICAgICoKICAgICAqIEBwYXJhbSBtaXhlZCAka2V5ICAgICAgICBLZXkgb2YgdGhlIGF0dHIgYmVpbmcgc2V0CiAgICAgKiBAcGFyYW0gbWl4ZWQgJHZhbHVlICAgICAgVmFsdWUgYmVpbmcgc2V0IHRvIHRoZSBhdHRyCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gX19zZXQoJGtleSwgJHZhbHVlKSB7CiAgICAgICAgJHRoaXMtPnska2V5fSA9ICR2YWx1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIF9fZ2V0CiAgICAgKgogICAgICogUEhQICJNYWdpY01ldGhvZCIgdG8gYWxsb3cgZm9yIGR5bmFtaWMgb2JqZWN0cy4gIERlZmVycyBmaXJzdCB0byB0aGUgCiAgICAgKiBkYXRhIGluICR0aGlzLT5kYXRhLgogICAgICoKICAgICAqIEBwYXJhbSBTdHJpbmcgJHZhbHVlICBOYW1lIG9mIHRoZSBhdHRyaWJ1dGUgcmVxdWVzdGVkCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiBtaXhlZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gX19nZXQoJHZhbHVlKSB7CiAgICAgICAgaWYgKGluX2FycmF5KCR2YWx1ZSwgJHRoaXMtPl9wcml2YXRlRGF0YSkpIHsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIGlmIChpc3NldCgkdGhpcy0+ZGF0YVskdmFsdWVdKSkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPmRhdGFbJHZhbHVlXTsKICAgICAgICB9CiAgICAgICAgaWYgKCR2YWx1ZSA9PSAndHlwZScpIHJldHVybiAkdGhpcy0+X3R5cGUoKTsKICAgIH0KCn0=', 0, '2018-11-21 06:38:54'),
(90, 'rbacgeneralemployeeview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCgphYnN0cmFjdCBjbGFzcyBNTV9SQkFDR2VuZXJhbEVtcGxveWVlVmlldyBleHRlbmRzIE1NX1JCQUNCYXNlVmlldwp7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJCSR0aGlzLT5wZXJtaXNzaW9ucyA9IGFycmF5KAoJCQkJIioiICA9PiAgYXJyYXkoTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUiwgTU1fUm9sZTo6JFJPTEVfQ1VTVE9NRVJfU1VQUE9SVCwgTU1fUm9sZTo6JFJPTEVfU0FMRVMsIE1NX1JvbGU6OiRST0xFX1BST0RVQ1RfTUFOQUdFUikKCQkJCSk7Cgl9Cgp9', 0, '2018-11-21 06:38:54'),
(91, 'gifthistoryview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0dpZnRIaXN0b3J5VmlldyBleHRlbmRzIE1NX1JCQUNHZW5lcmFsRW1wbG95ZWVWaWV3CnsJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQogCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgkdXNlcklkLE1NX0RhdGFHcmlkICRkZz1udWxsLCRzdGFydERhdGU9bnVsbCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy90YWJsZXMgdXNlZCBpbiB0aGUgbWFzdGVyIHF1ZXJ5LiBQbGFjaW5nIHRoZSBjb25zdGFudHMgaW50byB2YXJpYWJsZXMgYWxsb3dzIHRoZW0gdG8gYmUgZW1iZWRkZWQgaW50byB0aGUgc3RyaW5nLCBhaWRpbmcgaW4gcmVhZGFiaWxpdHkKCQkkY291cG9uc1RhYmxlID0gTU1fVEFCTEVfQ09VUE9OUzsKCQkkb3JkZXJJdGVtc1RhYmxlID0gTU1fVEFCTEVfT1JERVJfSVRFTVM7CgkJJGNvdXBvblVzYWdlVGFibGUgPSBNTV9UQUJMRV9DT1VQT05fVVNBR0U7CgkJJHByb2R1Y3RzVGFibGUgPSBNTV9UQUJMRV9QUk9EVUNUUzsKCQkKCQkkZnJvbVdoZXJlU1FMID0gIkZST00geyRjb3Vwb25zVGFibGV9IGMgTEVGVCBKT0lOIHskb3JkZXJJdGVtc1RhYmxlfSBvaSBPTiAoYy5naWZ0X29yZGVyX2l0ZW1faWQgPSBvaS5pZCkgIi4KCQkJCQkJIkxFRlQgSk9JTiB7JGNvdXBvblVzYWdlVGFibGV9IGN1IG9uIChjLmlkID0gY3UuY291cG9uX2lkKSBsZWZ0IGpvaW4geyRwcm9kdWN0c1RhYmxlfSBwIG9uIChvaS5pdGVtX2lkID0gcC5pZCkgIi4KCQkJCQkJIldIRVJFIGMuZ2lmdF91c2VyX2lkID0gJXMiOwoJCQoJCSRjb3VudFF1ZXJ5ID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCB7JGZyb21XaGVyZVNRTH0gIjsKCQkkY291bnRRdWVyeSA9ICR3cGRiLT5wcmVwYXJlKCRjb3VudFF1ZXJ5LCR1c2VySWQpOwoJCSRjb3VudFJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRjb3VudFF1ZXJ5KTsKCQkKCQkkbWFzdGVyUXVlcnkgPSAiU0VMRUNUIHskY291bnRSZXN1bHQtPnRvdGFsfSBhcyAndG90YWwnLGMuZGF0ZV9hZGRlZCBhcyBkYXRlX2dpZnRlZCwgYy5naWZ0X29yZGVyX2l0ZW1faWQgYXMgb3JkZXJfaXRlbV9pZCwgcC5uYW1lLCBjdS5kYXRlX2FkZGVkIGFzIHVzYWdlX2RhdGUsICIuCgkJCQkJCSJjdS51c2VyX2lkIGFzIHVzYWdlX3VzZXJfaWQgeyRmcm9tV2hlcmVTUUx9IjsgCgkJJG1hc3RlclF1ZXJ5ID0gJHdwZGItPnByZXBhcmUoJG1hc3RlclF1ZXJ5LCR1c2VySWQpOyAKCQkKCQlpZighaXNfbnVsbCgkZGcpICYmICFpc19udWxsKCRkZy0+c29ydEJ5KSAmJiAhZW1wdHkoJGRnLT5zb3J0QnkpKSAvL2hhbmRsZSB0aGUgc29ydGluZwoJCXsKCQkJJG1hc3RlclF1ZXJ5Lj0gIiBPUkRFUiBCWSB7JGRnLT5zb3J0Qnl9IHskZGctPnNvcnREaXJ9IjsKCQl9IAoJCQoJCSRtYXN0ZXJRdWVyeS49ICIgIi4kZGctPmdldExpbWl0U3FsKCk7IC8vZm9yIHBhZ2luYXRpb24KCQkgCgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJG1hc3RlclF1ZXJ5KTsKCQlyZXR1cm4gJHJlc3VsdHM7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZVJvd3MoJGRhdGEsICRyZW5kZXJGb3JBZG1pbj10cnVlKQoJewoJCSRyb3dzID0gYXJyYXkoKTsKCQkKCQlpZigkcmVuZGVyRm9yQWRtaW4pCgkJewoJCQkkZGF0ZUZvcm1hdCA9ICJNIGosIFkgZzppIGEiOwoJCX0KCQllbHNlCgkJewoJCQkkZGF0ZUZvcm1hdCA9ICJNIGosIFkiOwoJCX0KCQkKCQlmb3JlYWNoKCRkYXRhIGFzICRpdGVtKQoJCXsKCQkJaWYoaXNzZXQoJGl0ZW0tPm9yZGVyX2l0ZW1faWQpKQoJCQl7CgkJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkaXRlbS0+b3JkZXJfaXRlbV9pZCk7CgkJCQkKCQkJCWlmKCRvcmRlckl0ZW0tPmlzR2lmdCgpKQoJCQkJewoJCQkJCSRnaWZ0Q291cG9uQ29kZSA9IE1NX0NvdXBvbjo6Z2V0R2lmdENvdXBvbkNvZGUoJG9yZGVySXRlbS0+Z2V0SWQoKSk7CgkJCQkKCQkJCQlpZighZW1wdHkoJGdpZnRDb3Vwb25Db2RlKSkKCQkJCQl7CgkJCQkJCSRnaWZ0TGluayA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRSZWRlZW1HaWZ0UGFnZVN0YXRpY0xpbmsoJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCkpOwoJCQkJCQkkZ2lmdExpbmsgPSBNTV9VdGlsczo6YXBwZW5kVXJsUGFyYW0oJGdpZnRMaW5rLCAiY291cG9uIiwgJGdpZnRDb3Vwb25Db2RlKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQl9CgkJCQoJCQkkaXNSZWRlZW1lZCA9IGZhbHNlOwoJCQkKCQkJaWYoaXNfbnVsbCgkaXRlbS0+dXNhZ2VfdXNlcl9pZCkgfHwgaXNfbnVsbCgkaXRlbS0+dXNhZ2VfZGF0ZSkpCgkJCXsKCQkJCSRzdGF0dXMgPSBNTV9VdGlsczo6Z2V0SWNvbignY2xvY2stbycsICdibHVlJywgJzEuMmVtJywgJzFweCcpOwoJCQkJJHN0YXR1cyAuPSAiIDxlbT5Ob3QgcmVkZWVtZWQ8L2VtPiI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRpdGVtLT51c2FnZV91c2VyX2lkKTsKCQkJCQoJCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkbWVtYmVyTmFtZSA9ICIiOwoJCQkJCSRmaXJzdE5hbWUgPSAkdXNlci0+Z2V0Rmlyc3ROYW1lKCk7CgkJCQkJJGxhc3ROYW1lID0gJHVzZXItPmdldExhc3ROYW1lKCk7CgkJCQkJCgkJCQkJaWYoIWVtcHR5KCRmaXJzdE5hbWUpKQoJCQkJCXsKCQkJCQkJJG1lbWJlck5hbWUgPSAkZmlyc3ROYW1lOwoJCQkJCQkKCQkJCQkJaWYoIWVtcHR5KCRsYXN0TmFtZSkpCgkJCQkJCXsKCQkJCQkJCSRtZW1iZXJOYW1lIC49ICIgIi5zdWJzdHIoJHVzZXItPmdldExhc3ROYW1lKCksIDAsIDEpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCQoJCQkJCWlmKGVtcHR5KCRtZW1iZXJOYW1lKSkKCQkJCQl7CgkJCQkJCSRtZW1iZXJOYW1lID0gJHVzZXItPmdldEVtYWlsKCk7CgkJCQkJfQoJCQkJCQoJCQkJCWlmKCRyZW5kZXJGb3JBZG1pbikKCQkJCQl7CgkJCQkJCSRtZW1iZXJOYW1lID0gIjxhIGhyZWY9Jz9wYWdlPSIuTU1fTU9EVUxFX01BTkFHRV9NRU1CRVJTLiImbW9kdWxlPWRldGFpbHNfZ2VuZXJhbCZ1c2VyX2lkPXskdXNlci0+Z2V0SWQoKX0nPnskbWVtYmVyTmFtZX08L2E+IjsKCQkJCQl9CgkJCQkJCgkJCQkJJHN0YXR1cyA9IE1NX1V0aWxzOjpnZXRDaGVja0ljb24oKTsJCQoJCQkJCSRzdGF0dXMgLj0gIiBSZWRlZW1lZCBieSB7JG1lbWJlck5hbWV9IG9uICIuTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCRpdGVtLT51c2FnZV9kYXRlLCAiTSBqLCBZIik7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCSRzdGF0dXMgPSAiUmVkZWVtZWQgYnkgYW4gaW52YWxpZCBtZW1iZXIiOwoJCQkJfQoJCQkJCgkJCQkkaXNSZWRlZW1lZCA9IHRydWU7CgkJCX0KCQkJCgkJCSRhY3Rpb25zID0gIiI7CgkJCQoJCQlpZighJHJlbmRlckZvckFkbWluICYmICEkaXNSZWRlZW1lZCkKCQkJewoJCQkJJGFjdGlvbnMgPSAiPGEgaHJlZj1cImphdmFzY3JpcHQ6bXlhY2NvdW50X2pzLnNob3dHaWZ0TGluaygneyRnaWZ0TGlua30nKTtcIj5zaG93IGdpZnQgbGluazwvYT4iOwoJCQl9CgkJCQoJCQkkY3JudFJvdyA9IGFycmF5CgkJCSgKCQkJCWFycmF5KCAnY29udGVudCcgPT4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCRpdGVtLT5kYXRlX2dpZnRlZCwgJGRhdGVGb3JtYXQpKSwKCQkJCWFycmF5KCAnY29udGVudCcgPT4gJGl0ZW0tPm5hbWUpLAoJCQkJYXJyYXkoICdjb250ZW50JyA9PiAkc3RhdHVzKQoJCQkpOwoJCQkKCQkJaWYoISRyZW5kZXJGb3JBZG1pbikKCQkJewoJCQkJJGNybnRSb3dbXSA9IGFycmF5KCAnY29udGVudCcgPT4gJGFjdGlvbnMsICJhdHRyIiA9PiAibm93cmFwIik7CgkJCX0KCQkJCgkJCSRyb3dzW10gPSAkY3JudFJvdzsKCQl9CgkJCgkJcmV0dXJuICRyb3dzOwoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(92, 'reportcolumnchart', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUmVwb3J0Q29sdW1uQ2hhcnQgZXh0ZW5kcyBNTV9SZXBvcnRCYXJDaGFydAp7CglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGNvbnRhaW5lcj0iIiwkZGlyZWN0aXZlcz0iIikKCXsKCQkkdGhpcy0+b3JpZW50YXRpb24gPSBzZWxmOjokVkVSVElDQUxfT1JJRU5UQVRJT047CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgkY29udGFpbmVyLCRkaXJlY3RpdmVzKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNyZWF0ZUZyb21Ub3BSZXN1bHRzKCRlbGVtZW50SWRlbnRpZmllciwgJGNhdGVnb3J5RmllbGQsICR2YWx1ZUZpZWxkLCAkbnVtUmVjb3JkcywgTU1fUmVwb3J0UmVzcG9uc2UgJHJlc3VsdE9iamVjdCwgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdE9iamVjdCkpCgkJewoJCQlyZXR1cm4gbnVsbDsKCQl9CgkJJGNvbHVtbiA9IG5ldyBNTV9SZXBvcnRDb2x1bW5DaGFydCgkZWxlbWVudElkZW50aWZpZXIsJGRpcmVjdGl2ZXMpOwoJCgkJLy9jcmVhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgZGF0YSBtb2RlbAoJCSRtb2RlbCA9IE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbDo6Y3JlYXRlRnJvbVRvcFJlc3VsdHMoJHJlc3VsdE9iamVjdC0+bWVzc2FnZSwgJGNhdGVnb3J5RmllbGQsICR2YWx1ZUZpZWxkLCAkbnVtUmVjb3Jkcyk7CgkJJGNvbHVtbi0+c2V0TW9kZWwoJG1vZGVsKTsKCQlyZXR1cm4gJGNvbHVtbjsKCX0KfQ==', 0, '2018-11-21 06:38:54'),
(93, 'affiliateproviderfactory', 'LyoqCiAqIAogKiBUaGUgQWZmaWxpYXRlIFByb3ZpZGVyIEZhY3RvcnkgZG9lcyB0aGUgd29yayBvZiByZXRyaWV2aW5nIGFuZCBjb25maWd1cmluZyBhbiBBZmZpbGlhdGUgUHJvdmlkZXIgaW1wbGVtZW50YXRpb24KICoKICovCmNsYXNzIE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmFjdG9yeSAKewkKCS8qKgoJICogUmV0dXJucyB0aGUgYWN0aXZlIEFmZmlsaWF0ZSBQcm92aWRlcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFjdGl2ZVByb3ZpZGVyKCkgewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcHJvdmlkZXJfaW5mbyA9ICR3cGRiLT5nZXRfcm93KCJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSUy4iIHdoZXJlIGFjdGl2ZT0nMScgbGltaXQgMSIpOwoJCQoJCXJldHVybiBzZWxmOjpfZ2V0UHJvdmlkZXIoJHByb3ZpZGVyX2luZm8pOwoJfQoJCgkvKioKCSAqIFJldHVybnMgYSBzcGVjaWZpYyBBZmZpbGlhdGUgUHJvdmlkZXIsIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciBpdCBpcyB0aGUgYWN0aXZlIHByb3ZpZGVyIG9yIG5vdAoJICogQHBhcmFtIFN0cmluZyAkcHJvdmlkZXJfdG9rZW4gVGhlIHByb3ZpZGVyIHRva2VuIGlkZW50aWZ5aW5nIHRoZSBwcm92aWRlciBpbiB0aGUgZGF0YWJhc2UKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQcm92aWRlcigkcHJvdmlkZXJfdG9rZW4pIHsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHByb3ZpZGVyX2luZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX0FGRklMSUFURV9QUk9WSURFUlMuIiB3aGVyZSBwcm92aWRlcl90b2tlbj0lcyIsJHByb3ZpZGVyX3Rva2VuKSk7CgkJCgkJcmV0dXJuIHNlbGY6Ol9nZXRQcm92aWRlcigkcHJvdmlkZXJfaW5mbyk7Cgl9CgkKCS8qKgoJICogCgkgKiBJbnRlcm5hbCBmdW5jdGlvbiB1c2VkIHRvIGRldGVybWluZSB0aGUgY29ycmVjdCBjbGFzcyB0byB1c2UgYW5kIHRvIGluc3RhbnRpYXRlLCBpbml0aWFsaXplLCBhbmQgcmV0dXJuIGl0CgkgKiBAcGFyYW0gU3RyaW5nICRwcm92aWRlcl9pbmZvIAoJICovCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBfZ2V0UHJvdmlkZXIoJHByb3ZpZGVyX2luZm8pIHsKCQkkcHJvdmlkZXJfdG9rZW4gPSAkcHJvdmlkZXJfaW5mby0+cHJvdmlkZXJfdG9rZW47CgkJc3dpdGNoKCRwcm92aWRlcl90b2tlbikgCgkJewoJCQljYXNlICJpZGV2YWZmaWxpYXRlIjoKCQkJCXJldHVybiBuZXcgTU1fSURldkFmZmlsaWF0ZVByb3ZpZGVyKCRwcm92aWRlcl9pbmZvKTsKCQkJY2FzZSAiZGVmYXVsdCI6CgkJCQlyZXR1cm4gbmV3IE1NX0RlZmF1bHRBZmZpbGlhdGVQcm92aWRlcigkcHJvdmlkZXJfaW5mbyk7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbnVsbDsKCQkJCQoJCX0KCX0gCgkKfQoK', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(94, 'bundle', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0J1bmRsZSBleHRlbmRzIE1NX0VudGl0eQp7CQoJcHVibGljIHN0YXRpYyAkU1VCX1RZUEVfUEFJRCA9ICJwYWlkIjsKCXB1YmxpYyBzdGF0aWMgJFNVQl9UWVBFX0ZSRUUgPSAiZnJlZSI7CgkKCXByaXZhdGUgJG5hbWUgPSAiIjsKCXByaXZhdGUgJGRmbHRNZW1iZXJzaGlwSWQgPSAiIjsKCXByaXZhdGUgJGlzRnJlZUZsYWcgPSAiMSI7Cglwcml2YXRlICRkZXNjcmlwdGlvbiA9ICIiOwoJcHJpdmF0ZSAkc3RhdHVzID0gIjEiOwoJcHJpdmF0ZSAkbGFzdFByb2R1Y3RJZHMgPSBhcnJheSgpOwoJcHJpdmF0ZSAkcHJvZHVjdElkcyA9IGFycmF5KCk7Cglwcml2YXRlICRjYXRlZ29yeUlkcyA9IGFycmF5KCk7Cglwcml2YXRlICRzaG9ydE5hbWUgPSAiIjsKCXByaXZhdGUgJGV4cGlyZXMgPSAiMCI7Cglwcml2YXRlICRleHBpcmVBbW91bnQgPSAiIjsKCXByaXZhdGUgJGV4cGlyZVBlcmlvZCA9ICIiOwoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0JVTkRMRVMuIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIic7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCkgCgkJewoJCQkkdGhpcy0+c2V0RGF0YSgkcmVzdWx0KTsKCQl9CgkJZWxzZSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJLyoqCgkgKiBEZXRlcm1pbmUgaWYgYSBwYXJ0aWN1bGFyIGJ1bmRsZSBpcyBhc3NvY2lhdGVkIHdpdGggYSBwYXJ0aWN1bGFyIGNhdGVnb3J5CgkgKiAKCSAqIEBwYXJhbSB1bmtub3duICRidW5kbGVJZCBJRCBvZiB0aGUgYnVuZGxlCgkgKiBAcGFyYW0gdW5rbm93biAkY2F0ZWdvcnlJZHMgYXJyYXkgb2YgY2F0ZWdvcnkgSURzCgkgKiBAcmV0dXJuIGJvb2xlYW4gcmV0dXJuIHRydWUgaWYgdGhlIGJ1bmRsZSBpcyBhc3NvY2lhdGVkIHdpdGggb25lIG9yIG1vcmUgb2YgdGhlIGNhdGVnb3J5IElEcyBwYXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBoYXNBY2Nlc3NUb0NhdGVnb3J5KCRidW5kbGVJZCwgJGNhdGVnb3J5SWRzKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gIlNFTEVDVCBjb3VudCgqKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfQlVORExFX0NBVEVHT1JJRVMuIiBXSEVSRSBidW5kbGVfaWQ9J3skYnVuZGxlSWR9JyAiOwoJCSRzcWwgLj0gIiBBTkQgY2F0ZWdvcnlfaWQgSU4gKCIuaW1wbG9kZSgiLCIsICRjYXRlZ29yeUlkcykuIik7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF92YXIoJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCAhPT0gZmFsc2UgJiYgaW50dmFsKCRyZXN1bHQpID4gMCkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5uYW1lID0gJGRhdGEtPm5hbWU7CgkJCSR0aGlzLT5pc0ZyZWVGbGFnID0gJGRhdGEtPmlzX2ZyZWU7CgkJCSR0aGlzLT5kZXNjcmlwdGlvbiA9ICRkYXRhLT5kZXNjcmlwdGlvbjsKCQkJJHRoaXMtPnN0YXR1cyA9ICRkYXRhLT5zdGF0dXM7CgkJCSR0aGlzLT5kZmx0TWVtYmVyc2hpcElkID0gJGRhdGEtPmRmbHRfbWVtYmVyc2hpcF9pZDsKCQkJJHRoaXMtPnNob3J0TmFtZSA9ICRkYXRhLT5zaG9ydF9uYW1lOwoJCQkkdGhpcy0+ZXhwaXJlQW1vdW50ID0gJGRhdGEtPmV4cGlyZV9hbW91bnQ7CgkJCSR0aGlzLT5leHBpcmVQZXJpb2QgPSAkZGF0YS0+ZXhwaXJlX3BlcmlvZDsKCQkJJHRoaXMtPmV4cGlyZXMgPSAkZGF0YS0+ZXhwaXJlczsKCQkJJHRoaXMtPmdldEFzc29jaWF0ZWRQcm9kdWN0cygpOwoJCQkkdGhpcy0+Z2V0QXNzb2NpYXRlZENhdGVnb3JpZXMoKTsKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCFNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokRkVBVFVSRV9CVU5ETEVTKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiBCdW5kbGVzIGFyZSBub3QgYWN0aXZlIGZvciB0aGlzIE1lbWJlck1vdXNlIGxpY2Vuc2UiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCR0aGlzLT5zaG9ydE5hbWUgPT0gJycpCgkJewoJCQkkdGhpcy0+c2hvcnROYW1lID0gJHRoaXMtPmF1dG9nZW5TaG9ydE5hbWUoKTsKCQl9CgkJCgkJaWYgKCFNTV9CdW5kbGU6OmNoZWNrU2hvcnROYW1lSXNVbmlxdWUoJHRoaXMtPnNob3J0TmFtZSwkdGhpcy0+aWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3I6IFNob3J0IE5hbWUgbXVzdCBiZSB1bmlxdWUgYWNyb3NzIGJ1bmRsZXMiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGRvVXBkYXRlID0gaXNzZXQoJHRoaXMtPmlkKSAmJiAkdGhpcy0+aWQgIT0gIiIgJiYgaW50dmFsKCR0aGlzLT5pZCkgPiAwOwoJCSAKCQlNTV9UcmFuc2FjdGlvbjo6YmVnaW4oKTsKCQl0cnkKCQl7CQoJCQlpZighJGRvVXBkYXRlKSAKCQkJewoJCQkJJHNxbCA9ICJpbnNlcnQgaW50byAiLk1NX1RBQkxFX0JVTkRMRVMuIiBzZXQgIiAuCgkJCSAJCQkiCW5hbWU9JyVzJywiIC4KCQkJIAkJCSIJc3RhdHVzPSclZCcsIiAuCgkJCSAJCQkiCWRmbHRfbWVtYmVyc2hpcF9pZD0nJWQnLCIgLgoJCQkgCQkJIglpc19mcmVlPSclZCcsIiAuCgkJCSAJCQkiCWRlc2NyaXB0aW9uPSclcycsIiAuCgkJCQkJCSIJc2hvcnRfbmFtZT0nJXMnLCIgLgoJCQkgCQkJIglleHBpcmVfYW1vdW50PSclZCcsIiAuCgkJCSAJCQkiCWV4cGlyZV9wZXJpb2Q9JyVzJywiIC4KCQkJIAkJCSIJZXhwaXJlcz0nJWQnIiAuCgkJCSAJCQkiIjsKCQkJfQoJCQllbHNlIAoJCQl7CQoJCQkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9CVU5ETEVTLiIgc2V0ICIgLgoJCQkgCQkJIgluYW1lID0gJyVzJywiIC4KCQkJIAkJCSIJc3RhdHVzPSclZCcsIiAuCgkJCSAJCQkiCWRmbHRfbWVtYmVyc2hpcF9pZD0nJWQnLCIgLgoJCSAJCQkJIglpc19mcmVlPSclZCcsIiAuCgkJIAkJCQkiCWRlc2NyaXB0aW9uPSclcycsIiAuCgkJCQkJCSIJc2hvcnRfbmFtZT0nJXMnLCAiIC4KCQkJIAkJCSIJZXhwaXJlX2Ftb3VudD0nJWQnLCIgLgoJCQkgCQkJIglleHBpcmVfcGVyaW9kPSclcycsIiAuCgkJCSAJCQkiCWV4cGlyZXM9JyVkJyB3aGVyZSBpZD0neyR0aGlzLT5pZH0nIiAuCgkJCSAJCQkiIjsKCQkgCX0KCQkgCQoJCSAJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPm5hbWUsICR0aGlzLT5zdGF0dXMsICR0aGlzLT5kZmx0TWVtYmVyc2hpcElkLCAkdGhpcy0+aXNGcmVlRmxhZywgCgkJIAkJCQkJCQkJCQkkdGhpcy0+ZGVzY3JpcHRpb24sICR0aGlzLT5zaG9ydE5hbWUsICR0aGlzLT5leHBpcmVBbW91bnQsICR0aGlzLT5leHBpcmVQZXJpb2QsIAoJCSAJCQkJCQkJCQkJJHRoaXMtPmV4cGlyZXMpOwoJCSAJCgkJIAkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkJIAkKCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJIAl7CgkJIAkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJIAkJJHJlc3BvbnNlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBidW5kbGUgKCIuJHByZXBhcmVkU3FsLiIpIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJIAl9CgkJIAkKCQkgCWlmKCEkZG9VcGRhdGUpIAoJCSAJewoJCSAJCSR0aGlzLT5pZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJIAl9CgkJIAkKCQkgCWlmKGludHZhbCgkdGhpcy0+aWQpID4gMCkKCQkgCXsKCQkgCQkvLyB1cGRhdGUgY2F0ZWdvcmllcwoJCSAJCSRjYXRlZ29yaWVzID0gJHRoaXMtPmNhdGVnb3J5SWRzOwoJCSAJCWlmKGlzX2FycmF5KCRjYXRlZ29yaWVzKSkKCQkgCQl7CgkJIAkJCSR0aGlzLT5yZW1vdmVDYXRlZ29yaWVzKCk7CgkJIAkJCWZvcmVhY2goJGNhdGVnb3JpZXMgYXMgJGNhdGVnb3J5SWQpCgkJIAkJCXsKCQkgCQkJCSR0aGlzLT5hZGRDYXRlZ29yeSgkY2F0ZWdvcnlJZCk7CgkJIAkJCX0KCQkgCQl9CgkJIAkJCgkJCSAJaWYoJHRoaXMtPmlzRnJlZSgpKSAKCQkJIAl7CgkJCSAJCSR0aGlzLT5yZW1vdmVQcm9kdWN0cygpOwoJCQkgCX0gCgkJCSAJZWxzZSAKCQkJIAl7CgkJCSAJCS8vIGNoZWNrIGlmIGFueSBwcm9kdWN0cyBhcmUgYmVpbmcgcmVtb3ZlZCB0aGF0IGhhdmUgYmVlbiBwdXJjaGFzZWQKCQkJIAkJZm9yZWFjaCgkdGhpcy0+bGFzdFByb2R1Y3RJZHMgYXMgJG9sZFByb2R1Y3RJZD0+JG9sZFByb2R1Y3ROYW1lKQoJCQkgCQl7CgkJCSAJCQlpZighaW5fYXJyYXkoJG9sZFByb2R1Y3RJZCwgJHRoaXMtPnByb2R1Y3RJZHMpKQoJCQkgCQkJewoJCQkgCQkJCSRoYXNCZWVuUHVyY2hhc2VkID0gTU1fUHJvZHVjdDo6aGFzQmVlblB1cmNoYXNlZCgkb2xkUHJvZHVjdElkKTsKCQkJIAkJCgkJCSAJCQkJaWYoJGhhc0JlZW5QdXJjaGFzZWQpCgkJCSAJCQkJewoJCQkgCQkJCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkJIAkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiUHJvZHVjdCAneyRvbGRQcm9kdWN0TmFtZX0nIGhhcyBiZWVuIHB1cmNoYXNlZCBhdCBsZWFzdCBvbmNlIGFuZCBjYW5ub3QgYmUgcmVtb3ZlZCBmcm9tIHRoaXMgYnVuZGxlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkgCQkJCX0KCQkJIAkJCX0KCQkJIAkJfQoJCQkgCQkKCQkJIAkJJHRoaXMtPmFkZFByb2R1Y3RzKCk7CgkJCSAJfQoJCSAJfQoJCX0KCQljYXRjaChFeGNlcHRpb24gJGV4KQoJCXsKCQkgCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byBjcmVhdGUgYnVuZGxlIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSAKCQlNTV9UcmFuc2FjdGlvbjo6Y29tbWl0KCk7CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBhdXRvZ2VuU2hvcnROYW1lKCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRiYXNlID0gcHJlZ19yZXBsYWNlKCIvW15BLVowLTldLyIsIiIsc3RydG91cHBlcih0cmltKCR0aGlzLT5nZXROYW1lKCkpKSk7CgkJJGJhc2UgPSBzdWJzdHIoJGJhc2UsMCwxMCk7CgkJJGNhbmRpZGF0ZSA9ICRiYXNlOwoJCQoJCSRzcWwgPSAic2VsZWN0IGNvdW50KDEpIGZyb20gIi5NTV9UQUJMRV9CVU5ETEVTLiIgd2hlcmUgc2hvcnRfbmFtZSA9ICclcyciOwoJCQoJCS8vZmlyc3QgdHJ5IHRoZSBmaXJzdCAxMCBjaGFycyBvZiB0aGUgbmFtZSwgY2FwaXRhemxpemVkIGFuZCB3aXRoIG5vbiBhbHBoYS1udW1lcmljIGNoYXJzIHJlbW92ZWQKCQkkbnVtX3Jlc3VsdHMgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkc3FsLCRjYW5kaWRhdGUpKTsKCQlpZiAoJG51bV9yZXN1bHRzID09IDApCgkJewoJCQlyZXR1cm4gJGNhbmRpZGF0ZTsKCQl9CgkJCgkJLy9pZiBoZXJlLCB0aGF0IGRpZG50IHdvcmsKCQkkYmFzZSA9IHN1YnN0cigkYmFzZSwwLDcpOwoJCSRjYW5kaWRhdGUgPSAkYmFzZTsKCQkKCQkvL3RyeSB0aGUgZmlyc3QgNyBjaGFyYWN0ZXJzIHdpdGggYSBudW1iZXIgYXBwZW5kZWQsIHRlc3RpbmcgMC05OTkgc2VxdWVudGlhbGx5CgkJZm9yICgkaT0wOyAkaTwxMDAwOyAkaSsrKQoJCXsKCQkJJGNhbmRpZGF0ZSA9ICJ7JGJhc2V9eyRpfSI7CgkJCSRudW1fcmVzdWx0cyA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCRzcWwsJGNhbmRpZGF0ZSkpOwoJCQlpZiAoJG51bV9yZXN1bHRzID09IDApCgkJCXsKCQkJCXJldHVybiAkY2FuZGlkYXRlOwoJCQl9CgkJfQoJCQkKCQkvL2lmIGl0cyBTVElMTCBub3QgdmFsaWQsIG1ha2UgdXAgYSBjb21wbGV0ZWx5IHJhbmRvbSAxMC1jaGFyIHN0cmluZywgYW5kIHRyeSB1bnRpbCB3ZSBmaW5kIGEgZ29vZCBvbmUKCQl3aGlsZSAodHJ1ZSkKCQl7CgkJCSRjYW5kaWRhdGUgPSBjaHIocmFuZCg2NSw5MCkpOyAvL3N0YXJ0cyB3aXRoIGEgY2hhcgoJCQlmb3IgKCRpPTA7ICRpPDk7ICRpKyspIAoJCQl7IAoJCQkgICAgJGQ9cmFuZCgxLDMwKSUyOyAKCQkJICAgICRjYW5kaWRhdGUgLj0gKCRkID8gY2hyKHJhbmQoNjUsOTApKSA6IGNocihyYW5kKDQ4LDU3KSkpOyAKCQkJfSAKCQkJJG51bV9yZXN1bHRzID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHNxbCwkY2FuZGlkYXRlKSk7CgkJCWlmICgkbnVtX3Jlc3VsdHMgPT0gMCkKCQkJewoJCQkJcmV0dXJuICRjYW5kaWRhdGU7CgkJCX0KCQl9CQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCEkdGhpcy0+aGFzQXNzb2NpYXRpb25zKCkpCgkJewoJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQlVORExFUy4iIFdIRVJFIGlkPSclZCcgTElNSVQgMSI7CgkJCSRyZXN1bHRzID0gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5pZCkpOwoJCQkKCQkJLy8gcmVtb3ZlIHByb2R1Y3QgcmVsYXRpb25zaGlwcwoJCQkkdGhpcy0+cmVtb3ZlUHJvZHVjdHMoKTsKCQkJCgkJCSR0aGlzLT5yZW1vdmVDYXRlZ29yaWVzKCk7CgkJCQoJCQlpZigkcmVzdWx0cykgCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGhhc0Fzc29jaWF0aW9ucygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vIGNoZWNrIGlmIGJ1bmRsZSBpcyBhc3NvY2lhdGVkIHdpdGggb25lIG9yIG1vcmUgbWVtYmVyc2hpcCBsZXZlbHMKCQkkc3FsID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCBmcm9tICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgd2hlcmUgYWNjZXNzX3R5cGU9JyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVAuIicgYW5kIGJ1bmRsZV9pZD0neyR0aGlzLT5pZH0nIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJvdy0+dG90YWwgPiAwKSAKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlpZigkdGhpcy0+aGFzU3Vic2NyaWJlcnMoKSkgCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCgkJLy8gY2hlY2sgaWYgYnVuZGxlIGlzIGFzc29jaWF0ZWQgd2l0aCBvbmUgb3IgbW9yZSBwb3N0cwoJCSRzcWwgPSAic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIGZyb20gIi5NTV9UQUJMRV9QT1NUU19BQ0NFU1MuIiB3aGVyZSBhY2Nlc3NfdHlwZT0nYWNjZXNzX3RhZycgYW5kIGFjY2Vzc19pZD0neyR0aGlzLT5pZH0nIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJvdy0+dG90YWwgPiAwKSB7CgkJCQoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaGFzU3Vic2NyaWJlcnMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvLyBjaGVjayBpZiBidW5kbGUgaXMgYXNzb2NpYXRlZCB3aXRoIG9uZSBvciBtb3JlIHVzZXJzCgkJaWYoJHRoaXMtPmlzVmFsaWQoKSkKCQl7CgkJCSRzcWwgPSAic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIGZyb20gIi5NTV9UQUJMRV9BUFBMSUVEX0JVTkRMRVMuIiB3aGVyZSBhY2Nlc3NfdHlwZT0nIi5NTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfVVNFUi4iJyBBTkQgYnVuZGxlX2lkPSd7JHRoaXMtPmlkfScgQU5EIChzdGF0dXM9JyIuTU1fU3RhdHVzOjokQUNUSVZFLiInIE9SIHN0YXR1cz0nIi5NTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTi4iJykiOwoJCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQoJCQlpZigkcm93LT50b3RhbCA+IDApIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKiogUFJPRFVDVCBNQU5BR0VNRU5UICoqLwoJCglwcml2YXRlIGZ1bmN0aW9uIGFkZFByb2R1Y3RzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHRoaXMtPnByb2R1Y3RJZHMgPSAoIWlzX2FycmF5KCR0aGlzLT5wcm9kdWN0SWRzKSkgPyBhcnJheSgkdGhpcy0+cHJvZHVjdElkcykgOiAkdGhpcy0+cHJvZHVjdElkczsKCQkKCQkkdGhpcy0+cmVtb3ZlUHJvZHVjdHMoKTsKCQkKCQlpZighZW1wdHkoJHRoaXMtPnByb2R1Y3RJZHMpICYmIGNvdW50KCR0aGlzLT5wcm9kdWN0SWRzKSA+IDApIAoJCXsKCQkJZm9yZWFjaCgkdGhpcy0+cHJvZHVjdElkcyBhcyAkcHJvZHVjdElkKQoJCQl7CgkJCQlpZigkcHJvZHVjdElkICE9ICJudWxsIikgCgkJCQl7CgkJCQkJJHNxbCA9ICJpbnNlcnQgaW50byAiLk1NX1RBQkxFX0JVTkRMRV9QUk9EVUNUUy4iIHNldCAiIC4KCQkJCQkJCSIJYnVuZGxlX2lkPSd7JHRoaXMtPmlkfScsIiAuCgkJCQkJCQkiCXByb2R1Y3RfaWQ9J3skcHJvZHVjdElkfScgICI7CgkJCQkJCQkKCQkJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQl9CgkJCX0KCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdHMoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoaXNzZXQoJHRoaXMtPmlkKSkgCgkJewoJCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQlVORExFX1BST0RVQ1RTLiIgd2hlcmUgYnVuZGxlX2lkPSd7JHRoaXMtPmlkfSciOwoJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJfQoJCQoJCXJldHVybiB0cnVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gYWRkUHJvZHVjdCgkcHJvZHVjdElkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkdGhpcy0+cmVtb3ZlUHJvZHVjdCgkcHJvZHVjdElkKTsKCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfQlVORExFX1BST0RVQ1RTLiIgc2V0IAoJCQkJCWJ1bmRsZV9pZD0neyR0aGlzLT5pZH0nLCAKCQkJCQlwcm9kdWN0X2lkPSd7JHByb2R1Y3RJZH0nCgkJCQkJIjsKCQkkd3BkYi0+cXVlcnkoJHNxbCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZW1vdmVQcm9kdWN0KCRwcm9kdWN0SWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9CVU5ETEVfUFJPRFVDVFMuIiB3aGVyZSBidW5kbGVfaWQ9J3skdGhpcy0+aWR9JyBBTkQgcHJvZHVjdF9pZD0neyRwcm9kdWN0SWR9JzsiOwoJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEFzc29jaWF0ZWRQcm9kdWN0cygpCgl7CQoJCWlmKGVtcHR5KCR0aGlzLT5wcm9kdWN0SWRzKSB8fCBjb3VudCgkdGhpcy0+cHJvZHVjdElkcykgPT0gMCkKCQl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJCgkJCSRzcWwgPSAic2VsZWN0IHAuKiBmcm9tICIuTU1fVEFCTEVfQlVORExFX1BST0RVQ1RTLiIgYWF0LCAiLk1NX1RBQkxFX1BST0RVQ1RTLiIgcCB3aGVyZSBhYXQuYnVuZGxlX2lkPSd7JHRoaXMtPmlkfScgYW5kIGFhdC5wcm9kdWN0X2lkPXAuaWQiOwoJCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkJCgkJCSRwcm9kdWN0cyA9IGFycmF5KCk7CgkJCQoJCQlpZigkcm93cykKCQkJewoJCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KSAKCQkJCXsKCQkJCQkkcHJvZHVjdHNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQkJCX0KCQkJfQoJCQkKCQkJJHRoaXMtPnByb2R1Y3RJZHMgPSAkcHJvZHVjdHM7CgkJfQoJCQoJCXJldHVybiAkdGhpcy0+cHJvZHVjdElkczsKCX0KCQoJCgkvKiogQ0FURUdPUlkgTUFOQUdFTUVOVCAqKi8KCQoJcHVibGljIGZ1bmN0aW9uIGFkZENhdGVnb3J5KCRjYXRlZ29yeUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkdGhpcy0+cmVtb3ZlQ2F0ZWdvcnkoJGNhdGVnb3J5SWQpOwoJCSRzcWwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9CVU5ETEVfQ0FURUdPUklFUy4iIHNldAoJCWJ1bmRsZV9pZD0neyR0aGlzLT5pZH0nLAoJCWNhdGVnb3J5X2lkPSd7JGNhdGVnb3J5SWR9JwoJCSI7CgkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHJlbW92ZUNhdGVnb3JpZXMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCWlmKGlzc2V0KCR0aGlzLT5pZCkpCgkJewoJCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQlVORExFX0NBVEVHT1JJRVMuIiB3aGVyZSBidW5kbGVfaWQ9J3skdGhpcy0+aWR9JyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQl9CgkKCQlyZXR1cm4gdHJ1ZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZUNhdGVnb3J5KCRjYXRlZ29yeUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQlVORExFX0NBVEVHT1JJRVMuIiB3aGVyZSBidW5kbGVfaWQ9J3skdGhpcy0+aWR9JyBBTkQgY2F0ZWdvcnlfaWQ9J3skY2F0ZWdvcnlJZH0nOyI7CgkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QXNzb2NpYXRlZENhdGVnb3JpZXMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gInNlbGVjdCBjYXRlZ29yeV9pZCBhcyBpZCBmcm9tICIuTU1fVEFCTEVfQlVORExFX0NBVEVHT1JJRVMuIiBtdHAgd2hlcmUgYnVuZGxlX2lkPSd7JHRoaXMtPmlkfScgIjsKCQkKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQoJCSRjYXRlZ29yaWVzID0gYXJyYXkoKTsKCQlpZihpc19hcnJheSgkcm93cykpewoJCQlmb3JlYWNoKCRyb3dzIGFzICRjYXRlZ29yeSkKCQkJewoJCQkJJGNhdGVnb3JpZXNbJGNhdGVnb3J5LT5pZF0gPSAkY2F0ZWdvcnktPmlkOwoJCQl9CgkJfQoJCSR0aGlzLT5zZXRDYXRlZ29yaWVzKCRjYXRlZ29yaWVzKTsKCX0KCQoJCgkvKiogR0VUVEVSUy9TRVRURVJTICoqLwoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TmFtZSgkc3RyKSAKCXsKCQkkdGhpcy0+bmFtZSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXROYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm5hbWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRTaG9ydE5hbWUoJHN0cikKCXsKCQkkdGhpcy0+c2hvcnROYW1lID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFNob3J0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5zaG9ydE5hbWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRJc0ZyZWUoJHN0cikgCgl7CgkJJHRoaXMtPmlzRnJlZUZsYWcgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNGcmVlKCkKCXsKCQlyZXR1cm4gKCR0aGlzLT5pc0ZyZWVGbGFnID09ICIxIikgPyB0cnVlIDogZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREZmx0TWVtYmVyc2hpcElkKCRpZCkgCgl7CgkJJHRoaXMtPmRmbHRNZW1iZXJzaGlwSWQgPSAkaWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREZmx0TWVtYmVyc2hpcElkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmRmbHRNZW1iZXJzaGlwSWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREZmx0TWVtYmVyc2hpcCgpCgl7CgkJaWYoaW50dmFsKCR0aGlzLT5kZmx0TWVtYmVyc2hpcElkKSA+IDApCgkJewoJCQkkZGZsdE1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCR0aGlzLT5kZmx0TWVtYmVyc2hpcElkKTsKCQkJCgkJCWlmKCRkZmx0TWVtYmVyc2hpcC0+aXNWYWxpZCgpICYmICRkZmx0TWVtYmVyc2hpcC0+aXNBY3RpdmUoKSkKCQkJewoJCQkJcmV0dXJuICRkZmx0TWVtYmVyc2hpcDsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gTU1fTWVtYmVyc2hpcExldmVsOjpnZXREZWZhdWx0TWVtYmVyc2hpcCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RGVzY3JpcHRpb24oJHN0cikgCgl7CgkJJHRoaXMtPmRlc2NyaXB0aW9uID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmRlc2NyaXB0aW9uOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZG9lc0V4cGlyZSgpCgl7CgkJcmV0dXJuICgkdGhpcy0+ZXhwaXJlcyA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RXhwaXJlcygkc3RyKQoJewoJCSR0aGlzLT5leHBpcmVzID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEV4cGlyZXMoKQoJewoJCXJldHVybiAkdGhpcy0+ZXhwaXJlczsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEV4cGlyZVBlcmlvZCgkc3RyKSAKCXsKCQkkdGhpcy0+ZXhwaXJlUGVyaW9kID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEV4cGlyZVBlcmlvZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5leHBpcmVQZXJpb2Q7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFeHBpcmVBbW91bnQoJHN0cikgCgl7CgkJJHRoaXMtPmV4cGlyZUFtb3VudCA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRFeHBpcmVBbW91bnQoKQoJewoJCXJldHVybiAkdGhpcy0+ZXhwaXJlQW1vdW50OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RXhwaXJhdGlvbkRhdGUoJHN0YXJ0RGF0ZSkKCXsKCQkkZXhwaXJhdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkKCQlpZigkdGhpcy0+ZG9lc0V4cGlyZSgpKQoJCXsKCQkJJGFtb3VudCA9ICR0aGlzLT5nZXRFeHBpcmVBbW91bnQoKTsKCQkJJHBlcmlvZCA9ICR0aGlzLT5nZXRFeHBpcmVQZXJpb2QoKTsKCQkJCgkJCXN3aXRjaCgkcGVyaW9kKQoJCQl7CgkJCQljYXNlICJkYXlzIjoKCQkJCQkkZXhwaXJhdGlvbkRhdGUgPSBEYXRlKCJZLW0tZCBIOmk6cyIsIHN0cnRvdGltZSgkc3RhcnREYXRlLiIgKyAiLiRhbW91bnQuIiBkYXkiKSk7CgkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJY2FzZSAid2Vla3MiOgoJCQkJCSRleHBpcmF0aW9uRGF0ZSA9IERhdGUoIlktbS1kIEg6aTpzIiwgc3RydG90aW1lKCRzdGFydERhdGUuIiArICIuJGFtb3VudC4iIHdlZWsiKSk7CgkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJY2FzZSAibW9udGhzIjoKCQkJCQkkZXhwaXJhdGlvbkRhdGUgPSBEYXRlKCJZLW0tZCBIOmk6cyIsIHN0cnRvdGltZSgkc3RhcnREYXRlLiIgKyAiLiRhbW91bnQuIiBtb250aCIpKTsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gJGV4cGlyYXRpb25EYXRlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzKCRzdHIpIAoJewoJCSR0aGlzLT5zdGF0dXMgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdHVzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnN0YXR1czsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGlzQWN0aXZlKCkKCXsKCQlyZXR1cm4gKCR0aGlzLT5zdGF0dXMgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFByb2R1Y3RzKCRwcm9kdWN0SWRzKSAKCXsKCQlpZihpc19hcnJheSgkcHJvZHVjdElkcykpCgkJewkKCQkJJHRoaXMtPmxhc3RQcm9kdWN0SWRzID0gJHRoaXMtPnByb2R1Y3RJZHM7CgkJCSR0aGlzLT5wcm9kdWN0SWRzID0gJHByb2R1Y3RJZHM7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0Q2F0ZWdvcmllcygkY2F0ZWdvcnlJZHMpIAoJewoJCWlmKGlzX2FycmF5KCRjYXRlZ29yeUlkcykpCgkJewkKCQkJJHRoaXMtPmNhdGVnb3J5SWRzID0gJGNhdGVnb3J5SWRzOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldENhdGVnb3JpZXMoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmNhdGVnb3J5SWRzOwoJfQoJCgkKCQoJLyoqIFVUSUxJVElFUyAqKi8KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRCdW5kbGVzTGlzdCgkYWN0aXZlU3RhdHVzT25seT1mYWxzZSwgJGZpbHRlckJ5U3ViVHlwZT0iIikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCQoJCSRidW5kbGVzID0gYXJyYXkoKTsKCQkkd2hlcmVTcWwgPSBhcnJheSgpOwoJCQkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9CVU5ETEVTOwoJCQkKCQlpZigkYWN0aXZlU3RhdHVzT25seSkKCQl7CgkJCWFycmF5X3B1c2goJHdoZXJlU3FsLCAic3RhdHVzID0gJzEnIik7CgkJfQoJCQkKCQlpZigkZmlsdGVyQnlTdWJUeXBlID09IHNlbGY6OiRTVUJfVFlQRV9GUkVFKQoJCXsKCQkJYXJyYXlfcHVzaCgkd2hlcmVTcWwsICJpc19mcmVlID0gJzEnIik7CgkJfQoJCWVsc2UgaWYoJGZpbHRlckJ5U3ViVHlwZSA9PSBzZWxmOjokU1VCX1RZUEVfUEFJRCkKCQl7CgkJCWFycmF5X3B1c2goJHdoZXJlU3FsLCAiaXNfZnJlZSAhPSAnMSciKTsKCQl9CgkJCQoJCWlmKGNvdW50KCR3aGVyZVNxbCkgPiAwKQoJCXsKCQkJJHNxbCAuPSAiIFdIRVJFICIuam9pbigiIEFORCAiLCAkd2hlcmVTcWwpOwoJCX0KCQkJCgkJJHNxbCAuPSAiIG9yZGVyIGJ5IG5hbWUgYXNjICI7CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCQoJCWlmKCRyb3dzKQoJCXsKCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQl7CgkJCQkkYnVuZGxlc1skcm93LT5pZF0gPSAkcm93LT5uYW1lOwoJCQl9CgkJfQoJCgkJcmV0dXJuICRidW5kbGVzOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEJ1bmRsZVNob3J0TmFtZXMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkJCgkJJGJ1bmRsZXMgPSBhcnJheSgpOwoJCQkKCQkkc3FsID0gInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9CVU5ETEVTOwoJCQkKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkJCgkJaWYoJHJvd3MpCgkJewoJCQlmb3JlYWNoKCRyb3dzIGFzICRyb3cpCgkJCXsKCQkJCSRidW5kbGVzWyRyb3ctPnNob3J0X25hbWVdID0gJHJvdy0+bmFtZTsKCQkJfQoJCX0KCQoJCXJldHVybiAkYnVuZGxlczsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEJ1bmRsZVBvc3RBY2Nlc3MoKQoJewoJCWdsb2JhbCAkd3BkYjsKIAkJJHNxbCA9ICJTRUxFQ1QgYXQuaWQsIGF0Lm5hbWUgCiAJCQkJCUZST00gCiAJCQkJCQkiLk1NX1RBQkxFX0JVTkRMRVMuIiBhdCwgCiAJCQkJCQkiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHBhIAogCQkJCQlXSEVSRSAKIAkJCQkJCWF0LnN0YXR1cyA9JzEnIGFuZCAKIAkJCQkJCWF0LmlkID0gcGEuYWNjZXNzX2lkIGFuZCAKIAkJCQkJCXBhLmFjY2Vzc190eXBlPSdhY2Nlc3NfdGFnJwogCQkJCVVOSU9OCiAJCQkJCVNFTEVDVCBhdC5pZCwgYXQubmFtZSAKIAkJCQkJRlJPTSAKIAkJCQkJCSIuTU1fVEFCTEVfQlVORExFUy4iIGF0LCAKIAkJCQkJCSIuTU1fVEFCTEVfQlVORExFX0NBVEVHT1JJRVMuIiBiYyAKIAkJCQkJV0hFUkUgCiAJCQkJCQlhdC5zdGF0dXMgPScxJyBhbmQgCiAJCQkJCQlhdC5pZCA9IGJjLmJ1bmRsZV9pZCAKIAkJCQkJCSI7CiAJCQogCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKIAkJCiAJCSRidW5kbGVzID0gYXJyYXkoKTsKIAkJaWYoJHJvd3M9PT1mYWxzZSkKIAkJewogCQkJcmV0dXJuICRidW5kbGVzOwogCQl9CiAJCWlmKCRyb3dzKSAKIAkJewoJIAkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQl7CgkJCQkkYnVuZGxlc1skcm93LT5pZF0gPSAkcm93LT5uYW1lOwoJCQl9CiAJCX0KIAkJCiAJCXJldHVybiAkYnVuZGxlczsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNoZWNrU2hvcnROYW1lSXNVbmlxdWUoJHNob3J0TmFtZSwgJGFjY2Vzc1RhZ0lkPTApCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAic2VsZWN0IGNvdW50KDEpIGZyb20gIi5NTV9UQUJMRV9CVU5ETEVTLiIgd2hlcmUgc2hvcnRfbmFtZSA9ICclcycgYW5kIGlkICE9ICclZCcgIjsKCQoJCSRwcmVTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCRzaG9ydE5hbWUsICRhY2Nlc3NUYWdJZCk7CgoJCSRudW1fcmVzdWx0cyA9ICR3cGRiLT5nZXRfdmFyKCRwcmVTcWwpOwoJCWlmICgkbnVtX3Jlc3VsdHMgPT0gMCkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIGZhbHNlOwkKCQl9Cgl9Cn0K', 0, '2018-11-21 06:38:54'),
(95, 'facebookloginextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmNsYXNzIE1NX0ZhY2Vib29rTG9naW5FeHRlbnNpb24gZXh0ZW5kcyBNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uCnsJCgkKCXByb3RlY3RlZCAkZXh0ZW5zaW9uTmFtZSA9ICJMb2dpbiB3aXRoIEZhY2Vib29rIjsKCXByb3RlY3RlZCAkcHJvdmlkZXJOYW1lICA9ICJGYWNlYm9vayI7Cglwcm90ZWN0ZWQgJGtleU5hbWUJCSA9ICJBcHAgSUQiOwoJcHJvdGVjdGVkICRzZWNyZXROYW1lIAkgPSAiQXBwIFNlY3JldCI7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkYXV0b2xvYWREZXBlbmRlbmNpZXM9dHJ1ZSwkY29uZmlnRGF0YT0iIikgCgl7IAoJCS8vZmFjZWJvb2sgc3BlY2lmaWMgc2V0dGluZ3MKCQkkdGhpcy0+dG9rZW4gPSBNTV9FeHRlbnNpb246OiRGQUNFQk9PS19MT0dJTl9UT0tFTjsKCQkkdGhpcy0+bGlzdGluZ0ltYWdlID0gImh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9wbHVnaW5faW1hZ2VzL2xvZ29zL2V4dGVuc2lvbnMtZmIuanBnIjsKCSAJJHRoaXMtPnN1cHBvcnRBcnRpY2xlVXJsID0gImh0dHA6Ly9zdXBwb3J0Lm1lbWJlcm1vdXNlLmNvbS9zdXBwb3J0L3NvbHV0aW9ucy9hcnRpY2xlcy85MDAwMDIwMjgzLWNvbmZpZ3VyaW5nLWZhY2Vib29rLWxvZ2luIjsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldEh5YnJpZEF1dGhDb25maWcoKQoJewoJCSRjb25maWcgPSBwYXJlbnQ6OmdldEh5YnJpZEF1dGhDb25maWcoKTsKCQkkY29uZmlnWyJwcm92aWRlcnMiXSA9IGFycmF5ICgKCQkJCQkkdGhpcy0+dG9rZW4gPT4gYXJyYXkgKAoJCQkJCQkJImVuYWJsZWQiID0+IHRydWUsCgkJCQkJCQkia2V5cyIgICAgPT4gYXJyYXkgKCAiaWQiID0+ICR0aGlzLT5hcGlLZXksICJzZWNyZXQiID0+ICR0aGlzLT5hcGlTZWNyZXQgKSwKCQkJCQkJCSJzY29wZSIgICA9PiAiZW1haWwiLAoJCQkJCQkJCgkJCQkJKQoJCQkpOwoJCXJldHVybiAkY29uZmlnOwoJfQp9', 0, '2018-11-21 06:38:54'),
(96, 'datagrid', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0RhdGFHcmlkCnsKCXByaXZhdGUgJGhlYWRlcnMgPSBhcnJheSgpOwoJcHJpdmF0ZSAkcm93cyA9IGFycmF5KCk7CglwdWJsaWMgJHdpZHRoID0gIiI7CglwdWJsaWMgJHRvdGFsUmVjb3JkcyA9IDA7CglwdWJsaWMgJHNvcnRCeSA9ICJpZCI7CglwdWJsaWMgJHNvcnREaXIgPSAiZGVzYyI7CglwdWJsaWMgJGNybnRQYWdlID0gMDsKCXB1YmxpYyAkcmVzdWx0U2l6ZSA9IDIwOwoJcHVibGljICRyZWNvcmROYW1lID0gInJlY29yZHMiOwoJcHVibGljICRzaG93UGFnaW5nQ29udHJvbHMgPSB0cnVlOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBvc3Q9bnVsbCwgJGRmbHRTb3J0Qnk9IiIsICRkZmx0U29ydERpcj0iIiwgJGRmbHRSZXN1bHRTaXplPSIiKSAKCXsKCQlpZigkZGZsdFNvcnRCeSAhPSAiIikgewoJCQkkdGhpcy0+c29ydEJ5ID0gJGRmbHRTb3J0Qnk7CgkJfQoJCQoJCWlmKCRkZmx0U29ydERpciAhPSAiIikgewoJCQkkdGhpcy0+c29ydERpciA9ICRkZmx0U29ydERpcjsKCQl9CgkJCgkJaWYoJGRmbHRSZXN1bHRTaXplICE9ICIiKSB7CgkJCSR0aGlzLT5yZXN1bHRTaXplID0gJGRmbHRSZXN1bHRTaXplOwoJCX0KCQkKCQlpZihpc3NldCgkcG9zdCkpIHsKCQkJJHRoaXMtPnNldFByb3BlcnRpZXMoJHBvc3QpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEhlYWRlcnMoJGFycikKCXsKCQkkdGhpcy0+aGVhZGVycyA9ICRhcnI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRSb3dzKCRhcnIpCgl7CgkJJHRoaXMtPnJvd3MgPSAkYXJyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VG90YWxSZWNvcmRzKCRkYXRhKQoJewoJCWlmKCRkYXRhICYmIGlzX2FycmF5KCRkYXRhKSAmJiBjb3VudCgkZGF0YSkgPiAwKSAKCQl7CgkJCSR0aGlzLT50b3RhbFJlY29yZHMgPSAkZGF0YVswXS0+dG90YWw7CgkJfQoJCWVsc2UKCQl7CgkJCSR0aGlzLT50b3RhbFJlY29yZHMgPSAkZGF0YTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRQcm9wZXJ0aWVzKCRwb3N0KQoJewoJCSR0aGlzLT5zb3J0QnkgPSAoaXNzZXQoJHBvc3RbInNvcnRCeSJdKSkgPyAkcG9zdFsic29ydEJ5Il0gOiAkdGhpcy0+c29ydEJ5OwoJCSR0aGlzLT5zb3J0RGlyID0gKGlzc2V0KCRwb3N0WyJzb3J0RGlyIl0pKSA/ICRwb3N0WyJzb3J0RGlyIl0gOiAkdGhpcy0+c29ydERpcjsKCQkkdGhpcy0+Y3JudFBhZ2UgPSAoaXNzZXQoJHBvc3RbImNybnRQYWdlIl0pKSA/ICRwb3N0WyJjcm50UGFnZSJdIDogJHRoaXMtPmNybnRQYWdlOwoJCSR0aGlzLT5yZXN1bHRTaXplID0gKGlzc2V0KCRwb3N0WyJyZXN1bHRTaXplIl0pKSA/ICRwb3N0WyJyZXN1bHRTaXplIl0gOiAkdGhpcy0+cmVzdWx0U2l6ZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldExpbWl0U3FsKCkKCXsKCQkkc3FsID0gIiI7CgkJCgkJaWYoaXNzZXQoJHRoaXMtPmNybnRQYWdlKSAmJiBpc3NldCgkdGhpcy0+cmVzdWx0U2l6ZSkpIAoJCXsKCQkJJHNxbCAuPSAiIExJTUlUICIuaW50dmFsKCR0aGlzLT5jcm50UGFnZSkqaW50dmFsKCR0aGlzLT5yZXN1bHRTaXplKS4iLCB7JHRoaXMtPnJlc3VsdFNpemV9IjsKCQl9CgkJCgkJcmV0dXJuICRzcWw7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUh0bWwoJGN1c3RvbVRlbXBsYXRlPSIiKQoJewoJCSRodG1sID0gIiI7CgkJCgkJaWYoIWVtcHR5KCR0aGlzLT5oZWFkZXJzKSAmJiAhZW1wdHkoJHRoaXMtPnJvd3MpICYmIGNvdW50KCR0aGlzLT5yb3dzKSA+IDApIHsKCQkJLy8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHNvcnRpbmcgYSByZXN1bHQgc2V0IGZyb20gdGhlIHdwX3VzZXJzIHRhYmxlCgkJCWlmKCFpc3NldCgkdGhpcy0+aGVhZGVyc1skdGhpcy0+c29ydEJ5XSkgJiYgJHRoaXMtPnNvcnRCeSA9PSAiaWQiKSB7CgkJCQkkdGhpcy0+c29ydEJ5ID0gIklEIjsKCQkJfQoJCQkKCQkJaWYoaXNzZXQoJHRoaXMtPmhlYWRlcnNbJHRoaXMtPnNvcnRCeV0pICYmICFlbXB0eSgkdGhpcy0+c29ydEJ5KSAmJiAhaXNfbnVsbCgkdGhpcy0+c29ydEJ5KSkKCQkJewoJCQkJCgkJCQkkc29ydEltYWdlID0gKCR0aGlzLT5zb3J0RGlyID09ICdhc2MnKSA/ICJjYXJldC11cCIgOiAiY2FyZXQtZG93biI7CgkJCQkKCQkJCSR0aGlzLT5oZWFkZXJzWyR0aGlzLT5zb3J0QnldWydjb250ZW50J10gPSAkdGhpcy0+aGVhZGVyc1skdGhpcy0+c29ydEJ5XVsnY29udGVudCddIC4gTU1fVXRpbHM6OmdldEljb24oJHNvcnRJbWFnZSwgJ2dyZXknLCAnMS4zZW0nLCAnMnB4JywgJycsICdtYXJnaW4tbGVmdDo0cHg7Jyk7CgkJCQkkdGhpcy0+aGVhZGVyc1skdGhpcy0+c29ydEJ5XVsnY29udGVudCddID0gc3RyX3JlcGxhY2UoJzxhJywgJzxhIGNsYXNzPSJzZWxlY3RlZCInLCAkdGhpcy0+aGVhZGVyc1skdGhpcy0+c29ydEJ5XVsnY29udGVudCddICk7CgkJCX0KCQkJCgkJCSRkZyA9IG5ldyBzdGRDbGFzcygpOwoJCQkkZGctPmRhdGFncmlkID0gbmV3IHN0ZENsYXNzKCk7CgkJCSRkZy0+ZGF0YWdyaWQtPmF0dHIgPSAnaWQ9Im1tLWRhdGEtZ3JpZCIgY2xhc3M9IndpZGVmYXQiJzsKCQkJCgkJCWlmKCFlbXB0eSgkdGhpcy0+d2lkdGgpKQoJCQl7CgkJCQkkZGctPmRhdGFncmlkLT5hdHRyIC49ICcgc3R5bGU9IndpZHRoOicuJHRoaXMtPndpZHRoLiciJzsKCQkJfQoJCQkKCQkJJGRnLT5kYXRhZ3JpZC0+aGVhZGVycyA9ICR0aGlzLT5oZWFkZXJzOwoJCQkkZGctPmRhdGFncmlkLT5yb3dzID0gJHRoaXMtPnJvd3M7CgkJCQoJCQkkZGctPnNvcnRCeSA9ICR0aGlzLT5zb3J0Qnk7CgkJCSRkZy0+c29ydERpciA9ICR0aGlzLT5zb3J0RGlyOwoJCQkkZGctPmNybnRQYWdlID0gJHRoaXMtPmNybnRQYWdlOwoJCQkkZGctPnJlc3VsdFNpemUgPSAkdGhpcy0+cmVzdWx0U2l6ZTsKCQkJJGRnLT50b3RhbFJlY29yZHMgPSAkdGhpcy0+dG90YWxSZWNvcmRzOwoJCQkkZGctPnRvdGFsUGFnZXMgPSBjZWlsKGludHZhbCgkdGhpcy0+dG90YWxSZWNvcmRzKS9pbnR2YWwoJHRoaXMtPnJlc3VsdFNpemUpKTsKCQkJJGRnLT5yZWNvcmROYW1lID0gKGludHZhbCgkdGhpcy0+dG90YWxSZWNvcmRzKSA+IDEpID8gJHRoaXMtPnJlY29yZE5hbWUuInMiIDogJHRoaXMtPnJlY29yZE5hbWU7CgkJCSRkZy0+c2hvd1BhZ2luZ0NvbnRyb2xzID0gJHRoaXMtPnNob3dQYWdpbmdDb250cm9sczsKCQkJCgkJCWlmKGVtcHR5KCRjdXN0b21UZW1wbGF0ZSkpCgkJCXsKCQkJCSRodG1sID0gTU1fVGVtcGxhdGU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9kYXRhZ3JpZC5waHAiLCAkZGcpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJGh0bWwgPSBNTV9UZW1wbGF0ZTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iLyIuJGN1c3RvbVRlbXBsYXRlLCAkZGcpOwoJCQl9CgkJfQoJCQkJCQoJCXJldHVybiAkaHRtbDsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(97, 'emailserviceprovider', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIgZXh0ZW5kcyBNTV9FbnRpdHkKewkKCQoJcHJpdmF0ZSAkbmFtZT0iIjsKCXByaXZhdGUgJHRva2VuPSIiOwoJcHJpdmF0ZSAkdXNlcm5hbWU9IiI7Cglwcml2YXRlICRwYXNzd29yZD0iIjsKCXByaXZhdGUgJGFwaUtleT0iIjsKCXByaXZhdGUgJHByb3NwZWN0TGlzdElEPSIiOwoJcHJpdmF0ZSAkY2FuY2VsbGF0aW9uTGlzdElEPSIiOwoJcHJpdmF0ZSAkY29uZmlnT3B0aW9ucyA9IGFycmF5KCk7Cglwcml2YXRlICRpc0FjdGl2ZVByb3ZpZGVyID0gZmFsc2U7CgkKCXByb3RlY3RlZCBzdGF0aWMgJERFRkFVTFRfVE9LRU4gPSAiZGVmYXVsdCI7CgkKCS8qKgoJICogZ2V0RGF0YSgpCgkgKiBSZXRyaWV2ZSBhbiBFbWFpbCBTZXJ2aWNlIFByb3ZpZGVyIGVudGl0eSBmcm9tIHRoZSBkYi4gCgkgKiBSZXF1aXJlcyB0aGF0IHRoZSB0b2tlbiBvciB0aGUgaWQgYmUgc2V0IG9uIHRoZSBvYmplY3QgCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICghZW1wdHkoJHRoaXMtPnRva2VuKSkgCgkJewoJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9FTUFJTF9TRVJWSUNFX1BST1ZJREVSUy4iIFdIRVJFIHByb3ZpZGVyX3Rva2VuPSciLiR0aGlzLT50b2tlbi4iJzsiOwoJCX0KCQllbHNlIAoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfRU1BSUxfU0VSVklDRV9QUk9WSURFUlMuIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIic7IjsKCQl9CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCS8qKgoJICogUmV0dXJucyB0aGUgYWN0aXZlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRBY3RpdmVFbWFpbFNlcnZpY2VQcm92aWRlcigpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0VNQUlMX1NFUlZJQ0VfUFJPVklERVJTLiIgV0hFUkUgYWN0aXZlPScxJyBMSU1JVCAxIjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCQoJCWlmKCRyZXN1bHQpIHsKCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0RGF0YSgkcmVzdWx0KTsKCQl9CgkJZWxzZSB7CgkJCSRwcm92aWRlcl9lbnRpdHktPmludmFsaWRhdGUoKTsKCQl9CgkJcmV0dXJuICRwcm92aWRlcl9lbnRpdHk7Cgl9CgkKCS8qKgoJICogCgkgKiBTZXRzIHRoZSBlbnRpdHkgZmllbGRzIGJhc2VkIG9uIHRoZSBjb250ZW50IG9mICRkYXRhCgkgKiBAcGFyYW0gb2JqZWN0ICRkYXRhCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPm5hbWUgPSAkZGF0YS0+cHJvdmlkZXJfbmFtZTsKCQkJJHRoaXMtPnRva2VuID0gJGRhdGEtPnByb3ZpZGVyX3Rva2VuOwoJCQkkdGhpcy0+dXNlcm5hbWUgPSAkZGF0YS0+dXNlcm5hbWU7CgkJCSR0aGlzLT5wYXNzd29yZCA9IE1NX01lbWJlck1vdXNlU2VydmljZTo6ZGVjcnlwdFBhc3N3b3JkKCRkYXRhLT5wYXNzd29yZCk7CgkJCSR0aGlzLT5hcGlLZXkgPSAkZGF0YS0+YXBpX2tleTsKCQkJJHRoaXMtPnNldENvbmZpZygkZGF0YS0+YWRkaXRpb25hbF9kYXRhKTsgCgkJCSR0aGlzLT5pc0FjdGl2ZVByb3ZpZGVyID0gKCRkYXRhLT5hY3RpdmUgPT0gMSk/dHJ1ZTpmYWxzZTsKCQkJJHRoaXMtPnByb3NwZWN0TGlzdElEID0gJGRhdGEtPnByb3NwZWN0X2xpc3RfaWQ7CgkJCSR0aGlzLT5jYW5jZWxsYXRpb25MaXN0SUQgPSAkZGF0YS0+Y2FuY2VsbGF0aW9uX2xpc3RfaWQ7CgkJCQkJCQoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJLyoqCgkgKiAKCSAqIEFjY2VwdHMgYSBzZXJpYWxpemVkIGFycmF5IGFuZCB1c2VzIGl0IHRvIHNldCB0aGUgY29uZmlnT3B0aW9ucyBjb25maWd1cmF0aW9uIGFycmF5IG9uIHRoZSBlbnRpdHkKCSAqIEBwYXJhbSBzdHJpbmcgJHNlcmlhbGl6ZWRfY29uZmlnCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gc2V0Q29uZmlnKCRzZXJpYWxpemVkX2NvbmZpZykgCgl7CgkJJHVuc2VyaWFsaXplZF9jb25maWcgPSB1bnNlcmlhbGl6ZSgkc2VyaWFsaXplZF9jb25maWcpOwoJCSR0aGlzLT5jb25maWdPcHRpb25zID0gKGlzX2FycmF5KCR1bnNlcmlhbGl6ZWRfY29uZmlnKSk/JHVuc2VyaWFsaXplZF9jb25maWc6YXJyYXkoKTsKCX0KCQoJLyoqCgkgKiBTZXJpYWxpemVzIHRoZSBjb25maWdPcHRpb25zIGFycmF5IGFuZCByZXR1cm5zIHRoZSBzZXJpYWxpemVkIHN0cmluZwoJICovCglwcml2YXRlIGZ1bmN0aW9uIGdldENvbmZpZygpIAoJewoJCXJldHVybiBzZXJpYWxpemUoJHRoaXMtPmNvbmZpZ09wdGlvbnMpOwoJfQoJCgkvKioKCSAqIENvbW1pdHMgdGhlIHZhbHVlcyBzdG9yZWQgaW4gdGhlIGVudGl0eSB0byB0aGUgZGIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkZG9VcGRhdGUgPSBpc3NldCgkdGhpcy0+aWQpICYmICR0aGlzLT5pZCAhPSAiIiAmJiBpbnR2YWwoJHRoaXMtPmlkKSA+IDA7CgkJCgkJTU1fVHJhbnNhY3Rpb246OmJlZ2luKCk7CgkJdHJ5CgkJewkKCQkJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfRU1BSUxfU0VSVklDRV9QUk9WSURFUlMuIiBzZXQgIiAuCgkJCSAJCQkiCXByb3ZpZGVyX25hbWUgPSAnJXMnLCIgLgoJCQkgCQkJIglwcm92aWRlcl90b2tlbj0nJXMnLCIgLgoJCQkgCQkJIgl1c2VybmFtZT0nJXMnLCIgLgoJCQkgCQkJIglwYXNzd29yZD0nJXMnLCIgLgoJCQkgCQkJIglhcGlfa2V5PSclcycsIiAuCgkJCSAJCQkiCWFkZGl0aW9uYWxfZGF0YT0nJXMnLCIgLgoJCQkgCQkJIglhY3RpdmU9JyVkJywiIC4KCQkJIAkJCSIgICBwcm9zcGVjdF9saXN0X2lkPSclcycsIi4KCQkJIAkJCSIgICBjYW5jZWxsYXRpb25fbGlzdF9pZD0nJXMnIi4KCQkJIAkJCSIiOwoJCQl9CgkJIAllbHNlIAoJCSAJewoJCQkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9FTUFJTF9TRVJWSUNFX1BST1ZJREVSUy4iIHNldCAiIC4KCQkJIAkJCSIJcHJvdmlkZXJfbmFtZSA9ICclcycsIiAuCgkJCSAJCQkiCXByb3ZpZGVyX3Rva2VuPSclcycsIiAuCgkJCSAJCQkiCXVzZXJuYW1lPSclcycsIiAuCgkJCSAJCQkiCXBhc3N3b3JkPSclcycsIiAuCgkJCSAJCQkiCWFwaV9rZXk9JyVzJywiIC4KCQkJIAkJCSIJYWRkaXRpb25hbF9kYXRhPSclcycsIiAuCgkJCSAJCQkiCWFjdGl2ZT0nJWQnLCIgLgoJCQkgCQkJIiAgIHByb3NwZWN0X2xpc3RfaWQ9JyVzJywiLgoJCQkgCQkJIiAgIGNhbmNlbGxhdGlvbl9saXN0X2lkPSclcycgd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyIgLgoJCQkgCQkJIiI7CgkJIAl9CgkJCQoJCSAJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPm5hbWUsICR0aGlzLT50b2tlbiwgJHRoaXMtPnVzZXJuYW1lLCBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmVuY3J5cHRQYXNzd29yZCgkdGhpcy0+cGFzc3dvcmQpLCAkdGhpcy0+YXBpS2V5LCAKCQkgCQkJCQkJCQkJCSR0aGlzLT5nZXRDb25maWcoKSwgKCgkdGhpcy0+aXNBY3RpdmVQcm92aWRlciA9PSB0cnVlKT8xOjApLCAkdGhpcy0+cHJvc3BlY3RMaXN0SUQsICR0aGlzLT5jYW5jZWxsYXRpb25MaXN0SUQpOwoJCSAJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCSAJCgkJIAlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkgCXsKCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBlbWFpbCBzZXJ2aWNlIHByb3ZpZGVyICgiLiRwcmVwYXJlZFNxbC4iKSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCSAJfQoJCSAJCgkJIAlpZigkdGhpcy0+aXNBY3RpdmVQcm92aWRlcil7CgkJIAkJJHRoaXMtPmRlYWN0aXZhdGVPdGhlclByb3ZpZGVycygpOwoJCSAJfQoJCSAJCgkJIAlpZighJGRvVXBkYXRlKSB7CgkJIAkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkgCX0KCQl9CgkJY2F0Y2goRXhjZXB0aW9uICRleCkKCQl7CQoJCSAJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBlbWFpbCBzZXJ2aWNlIHByb3ZpZGVyIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCU1NX1RyYW5zYWN0aW9uOjpjb21taXQoKTsKCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBkZWFjdGl2YXRlT3RoZXJQcm92aWRlcnMoKXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9FTUFJTF9TRVJWSUNFX1BST1ZJREVSUy4iIHNldCBhY3RpdmU9JzAnIHdoZXJlIGlkIT0neyR0aGlzLT5pZH0nIjsKCQkkd3BkYi0+cXVlcnkoJHNxbCk7Cgl9CgkKCS8qKgoJICogRGVsZXRlcyB0aGUgcm93IGhhdmluZyBhbiBpZCBtYXRjaGluZyB0aGF0IHN0b3JlZCBpbiB0aGUgZW50aXR5LCBhcyBsb25nIGFzIGl0IGlzIG5vdCB0aGUgZGVmYXVsdCBlbWFpbCBzZXJ2aWNlIHByb3ZpZGVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkZWxldGUoKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoISR0aGlzLT50b2tlbiAhPSBzZWxmOjokREVGQVVMVF9UT0tFTikKCQl7CgkJCSRzcWwgPSAiREVMRVRFIEZST00gIi5NTV9UQUJMRV9FTUFJTF9TRVJWSUNFX1BST1ZJREVSUy4iIFdIRVJFIGlkPSclZCcgYW5kIHByb3ZpZGVyX3Rva2VuICE9ICclcycgTElNSVQgMSI7CgkJCSRyZXN1bHRzID0gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5pZCxzZWxmOjokREVGQVVMVF9UT0tFTikpOwoJCQkKCQkJaWYoJHJlc3VsdHMpIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJLyoqCgkgKiByZXR1cm5zIGFuIGFycmF5IG9mIGFsbCB0aGUgZW1haWwgc2VydmljZSBwcm92aWRlcnMgbmFtZXMgaW4gdGhlIGRiLCBrZXllZCBieSB0aGUgdG9rZW4KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRFbWFpbFNlcnZpY2VQcm92aWRlcnNMaXN0KCkKCXsKCQlnbG9iYWwgJHdwZGI7CiAJCQogCQkkcHJvdmlkZXJzID0gYXJyYXkoKTsKIAkJCiAJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0VNQUlMX1NFUlZJQ0VfUFJPVklERVJTOwogCQkKIAkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CiAJCQogCQlpZigkcm93cz09PWZhbHNlKQogCQl7CiAJCQlyZXR1cm4gJHByb3ZpZGVyczsKIAkJfQogCQlpZigkcm93cykgCiAJCXsKCSAJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQkJewoJCQkJJHByb3ZpZGVyc1skcm93LT5wcm92aWRlcl90b2tlbl0gPSAkcm93LT5wcm92aWRlcl9uYW1lOwoJCQl9CiAJCX0KIAkJCiAJCXJldHVybiAkcHJvdmlkZXJzOwoJfQoJCgkvKioKCSAqIFNldCB0aGUgRW1haWwgU2VydmljZSBQcm92aWRlciBOYW1lCgkgKiBAcGFyYW0gc3RyaW5nICRzdHIKCSAqLwoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TmFtZSgkc3RyKSAKCXsKCQkkdGhpcy0+bmFtZSA9ICRzdHI7Cgl9CgkKCS8qKgoJICogCgkgKiBHZXQgdGhlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIgTmFtZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5uYW1lOwoJfQoJCgkvKioKCSAqIAoJICogU2V0IHRoZSBFbWFpbCBTZXJ2aWNlIFByb3ZpZGVyIFRva2VuCgkgKiBAcGFyYW0gc3RyaW5nICRzdHIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFRva2VuKCRzdHIpIAoJewoJCSR0aGlzLT50b2tlbiA9ICRzdHI7Cgl9CgkKCS8qKgoJICogCgkgKiBHZXQgdGhlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIgVG9rZW4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFRva2VuKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRva2VuOwoJfQoJCgkvKioKCSAqIAoJICogU2V0IHRoZSBFbWFpbCBTZXJ2aWNlIFByb3ZpZGVyIHVzZXJuYW1lCgkgKiBAcGFyYW0gc3RyaW5nICRzdHIKCSAqLwogICAgcHVibGljIGZ1bmN0aW9uIHNldFVzZXJuYW1lKCRzdHIpIAoJewoJCSR0aGlzLT51c2VybmFtZSA9ICRzdHI7Cgl9CgkKCS8qKgoJICogCgkgKiBHZXQgdGhlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIgVXNlcm5hbWUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFVzZXJuYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVzZXJuYW1lOwoJfQoJCgkvKioKCSAqIAoJICogU2V0IHRoZSBFbWFpbCBTZXJ2aWNlIFByb3ZpZGVyIFBhc3N3b3JkCgkgKiBAcGFyYW0gc3RyaW5nICRzdHIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFBhc3N3b3JkKCRzdHIpIAoJewoJCSR0aGlzLT5wYXNzd29yZCA9ICRzdHI7Cgl9CgkKCS8qKgoJICogCgkgKiBHZXQgdGhlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIgUGFzc3dvcmQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFBhc3N3b3JkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnBhc3N3b3JkOwoJfQoJCgkvKioKCSAqIAoJICogU2V0IHRoZSBFbWFpbCBTZXJ2aWNlIFByb3ZpZGVyIEFwaSBLZXkKCSAqIEBwYXJhbSBzdHJpbmcgJHN0cgoJICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0QVBJS2V5KCRzdHIpIAoJewoJCSR0aGlzLT5hcGlLZXkgPSAkc3RyOwoJfQoJCgkvKioKCSAqIAoJICogR2V0IHRoZSBFbWFpbCBTZXJ2aWNlIFByb3ZpZGVyIEFwaSBLZXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFQSUtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcGlLZXk7Cgl9CgkKCS8qKgoJICogCgkgKiBTZXQgYSBjb25maWd1cmF0aW9uIG9wdGlvbiBmb3IgdGhlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIuIE5vdGU6IHRvIHJlbW92ZSBhbiBvcHRpb24sIHVzZSBkZWxldGVDb25maWdPcHRpb24KCSAqIEBwYXJhbSBzdHJpbmcgJGtleQoJICogQHBhcmFtIHN0cmluZyAkdmFsdWUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldENvbmZpZ09wdGlvbigka2V5LCR2YWx1ZSkgCgl7CgkJJHRoaXMtPmNvbmZpZ09wdGlvbnNbJGtleV0gPSAkdmFsdWU7Cgl9CgkKCS8qKgoJICogCgkgKiBHZXQgYSBjb25maWd1cmF0aW9uIG9wdGlvbiBmb3IgdGhlIEVtYWlsIFNlcnZpY2UgUHJvdmlkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJGtleQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q29uZmlnT3B0aW9uKCRrZXkpIAoJewoJCXJldHVybiAoaXNzZXQoJHRoaXMtPmNvbmZpZ09wdGlvbnNbJGtleV0pKT8kdGhpcy0+Y29uZmlnT3B0aW9uc1ska2V5XToiIjsKCX0KCQoJLyoqCgkgKgoJICogUmVtb3ZlIGEgY29uZmlndXJhdGlvbiBvcHRpb24gZnJvbSB0aGUgRW1haWwgU2VydmljZSBQcm92aWRlcgoJICogQHBhcmFtIHN0cmluZyAka2V5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkZWxldGVDb25maWdPcHRpb24oJGtleSkKCXsKCQlpZiAoaXNzZXQoJHRoaXMtPmNvbmZpZ09wdGlvbnNbJGtleV0pKQoJCXsKCQkJdW5zZXQoJHRoaXMtPmNvbmZpZ09wdGlvbnNbJGtleV0pOwoJCX0KCX0KCQoJLyoqCgkgKiAKCSAqIFNldCB3aGV0aGVyIHRoaXMgRW1haWwgU2VydmljZSBQcm92aWRlciBpcyB0aGUgYWN0aXZlIHByb3ZpZGVyIG9yIG5vdAoJICogQHBhcmFtIGJvb2xlYW4gJHN0YXRlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBY3RpdmUoJHN0YXRlPXRydWUpIAoJewoJCSR0aGlzLT5pc0FjdGl2ZVByb3ZpZGVyID0gJHN0YXRlOwoJfQoJCgkvKioKCSAqIAoJICogUmV0dXJuIHdoZXRoZXIgb3Igbm90IHRoaXMgRW1haWwgU2VydmljZSBQcm92aWRlciBpcyB0aGUgYWN0aXZlIHByb3ZpZGVyIG9yIG5vdAoJICogQHJldHVybiBib29sZWFuIHRydWUgaXMgdGhpcyBpcyB0aGUgYWN0aXZlIHByb3ZpZGVyLCBmYWxzZSBvdGhlcndpc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGlzQWN0aXZlKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5pc0FjdGl2ZVByb3ZpZGVyOwoJfQoJCgkvKioKCSAqIAoJICogU2V0IHRoZSBwcm9zcGVjdC1saXN0IGlkCgkgKiBAcGFyYW0gc3RyaW5nICRwcm9zcGVjdExpc3RJRCBUaGUgbGlzdC1pZCBmb3IgdGhlIHByb3NwZWN0IGxpc3QKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFByb3NwZWN0TGlzdElEKCRwcm9zcGVjdExpc3RJRCkKCXsKCQkkdGhpcy0+cHJvc3BlY3RMaXN0SUQgPSAkcHJvc3BlY3RMaXN0SUQ7Cgl9CgkKCS8qKgoJICogCgkgKiBSZXRyaWV2ZSB0aGUgcHJvc3BlY3QtbGlzdCBpZAoJICogQHJldHVybiBzdHJpbmcgdGhlIHByb3NwZWN0LWxpc3QgaWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFByb3NwZWN0TGlzdElEKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5wcm9zcGVjdExpc3RJRDsKCX0KCQoJLyoqCgkgKiBTZXQgdGhlIGNhbmNlbGxhdGlvbi1saXN0IGlkCgkgKiBAcGFyYW0gc3RyaW5nICRjYW5jZWxsYXRpb25MaXN0SUQgVGhlIGxpc3QtaWQgZm9yIHRoZSBjYW5jZWxsYXRpb24gbGlzdAoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0Q2FuY2VsbGF0aW9uTGlzdElEKCRjYW5jZWxsYXRpb25MaXN0SUQpCgl7CgkJJHRoaXMtPmNhbmNlbGxhdGlvbkxpc3RJRCA9ICRjYW5jZWxsYXRpb25MaXN0SUQ7Cgl9CgkKCS8qKgoJICogCgkgKiBSZXRyaWV2ZSB0aGUgY2FuY2VsbGF0aW9uLWxpc3QgaWQKCSAqIEByZXR1cm4gc3RyaW5nIHRoZSBjYW5jZWxsYXRpb24tbGlzdCBpZAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2FuY2VsbGF0aW9uTGlzdElEKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmNhbmNlbGxhdGlvbkxpc3RJRDsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(98, 'googleloginextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmNsYXNzIE1NX0dvb2dsZUxvZ2luRXh0ZW5zaW9uIGV4dGVuZHMgTU1fQWJzdHJhY3RTb2NpYWxMb2dpbkV4dGVuc2lvbgp7CQoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGF1dG9sb2FkRGVwZW5kZW5jaWVzPXRydWUsJGNvbmZpZ0RhdGE9IiIpIAoJeyAKCQkvL2dvb2dsZSsgc3BlY2lmaWMgc2V0dGluZ3MKCQkkdGhpcy0+dG9rZW4gPSBNTV9FeHRlbnNpb246OiRHT09HTEVfTE9HSU5fVE9LRU47CgkJJHRoaXMtPmxpc3RpbmdJbWFnZSAgPSAiaHR0cHM6Ly9tZW1iZXJtb3VzZS5jb20vYXNzZXRzL3BsdWdpbl9pbWFnZXMvbG9nb3MvZXh0ZW5zaW9ucy1nb29nbGUuanBnIjsKCQkkdGhpcy0+ZXh0ZW5zaW9uTmFtZSA9ICJMb2dpbiB3aXRoIEdvb2dsZSI7CgkJJHRoaXMtPnByb3ZpZGVyTmFtZSAgPSAiR29vZ2xlIjsKCQkkdGhpcy0+a2V5TmFtZSAgICAgICA9ICJDbGllbnQgSUQiOwoJCSR0aGlzLT5zZWNyZXROYW1lICAgID0gIkNsaWVudCBTZWNyZXQiOwoJIAkkdGhpcy0+c3VwcG9ydEFydGljbGVVcmwgPSAiaHR0cDovL3N1cHBvcnQubWVtYmVybW91c2UuY29tL3N1cHBvcnQvc29sdXRpb25zL2FydGljbGVzLzkwMDAwMjAzMzItY29uZmlndXJpbmctZ29vZ2xlLWxvZ2luIjsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldEh5YnJpZEF1dGhDb25maWcoKQoJeyAKCQkkY29uZmlnID0gcGFyZW50OjpnZXRIeWJyaWRBdXRoQ29uZmlnKCk7CgkJCgkJLy8gYm90aCB0aGUgcGx1cy5sb2dpbiBhbmQgcGx1cy5wcm9maWxlLmVtYWlscy5yZWFkIHNjb3BlcyBhcmUgcmVxdWlyZWQKCQkvLyB0byBvYnRhaW4gYm90aCB0aGUgdXNlcnMgZW1haWwgYW5kIGZpcnN0L2xhc3QgbmFtZXMgdXBvbiBzaWdudXAuCgkJJGNvbmZpZ1sicHJvdmlkZXJzIl0gPSBhcnJheSAoCgkJCQkkdGhpcy0+dG9rZW4gPT4gYXJyYXkgKAoJCQkJCQkiZW5hYmxlZCIgPT4gdHJ1ZSwKCQkJCQkJImtleXMiICAgID0+IGFycmF5ICggImlkIiA9PiAkdGhpcy0+YXBpS2V5LCAic2VjcmV0IiA9PiAkdGhpcy0+YXBpU2VjcmV0ICksCgkJCQkJCSJzY29wZSIgICAgICAgICAgID0+ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3BsdXMubG9naW4gaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYXV0aC9wbHVzLnByb2ZpbGUuZW1haWxzLnJlYWQiICAgLCAvLyBvcHRpb25hbAoJCQkJKQoJCSk7CgkJcmV0dXJuICRjb25maWc7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdTY3JlZW4oKQoJewoJCSRjYWxsYmFja1VybCA9ICR0aGlzLT5saWJyYXJ5VXJsLiIvaW5kZXgucGhwP2hhdXRoLmRvbmU9R29vZ2xlIjsKCQkkdGhpcy0+YWRkaXRpb25hbEluZm8gPSAiPHRyPgoJCQkJPHRkIE5PV1JBUD5DYWxsYmFjayBVUkw8L3RkPgoJCQkJPHRkIE5PV1JBUD4KCQkJCQk8c3BhbiBzdHlsZT0nZm9udC1mYW1pbHk6Y291cmllcjsgZm9udC1zaXplOjExcHg7Jz4KCQkJCQk8aW5wdXQgaWQ9J21tLWdvb2dsZS1jYWxsYmFjay11cmwnIHR5cGU9J3RleHQnIHJlYWRvbmx5IHZhbHVlPSd7JGNhbGxiYWNrVXJsfScgc3R5bGU9J3dpZHRoOjYwMHB4JyBvbmNsaWNrPVwialF1ZXJ5KCcjbW0tZ29vZ2xlLWNhbGxiYWNrLXVybCcpLmZvY3VzKCk7IGpRdWVyeSgnI21tLWdvb2dsZS1jYWxsYmFjay11cmwnKS5zZWxlY3QoKTtcIiAvPgoJCQkJCTwvc3Bhbj4KCQkJCTwvdGQ+CgkJCTwvdHI+XG4iOwoJCXJldHVybiBwYXJlbnQ6OmRpc3BsYXlDb25maWdTY3JlZW4oKTsJCgl9Cn0=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(99, 'ordertagprocessor', 'Y2xhc3MgTU1fT3JkZXJUYWdQcm9jZXNzb3IKewkKCXB1YmxpYyBzdGF0aWMgJFRBR19PUkRFUl9EQVRBID0gIm1tX29yZGVyX2RhdGEiOwoJcHVibGljIHN0YXRpYyAkVEFHX1BVUkNIQVNFX0xJTksgPSAibW1fcHVyY2hhc2VfbGluayI7CgkKCQoJLyoqCgkgKiBUYWtlcyBhIFNtYXJ0VGFnIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBTbWFydFRhZyBpcyByZWxhdGVkIHRvIG9yZGVycy4KCSAqIAoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcmV0dXJuIEJvb2xlYW4gcmV0dXJucyB0cnVlIGlmIHRoZSBTbWFydFRhZyBwYXNzZWQgaXMgcmVsYXRlZCB0byBvcmRlcnMuCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNPcmRlclNtYXJ0VGFnKCRzbWFydFRhZykKCXsKCQlzd2l0Y2goJHNtYXJ0VGFnKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JFRBR19PUkRFUl9EQVRBOgoJCQljYXNlIHNlbGY6OiRUQUdfUFVSQ0hBU0VfTElOSzoKCQkJCXJldHVybiB0cnVlOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBuYW1lIGFuZCBhIG51bWJlciBvZiBwcm9wZXJ0aWVzIHJlbGF0ZWQgdG8gdGhlIFNtYXJ0VGFnIGFuZCBtYWtlcyBhIGNhbGwgdG8gCgkgKiB0aGUgYXBwcm9wcmlhdGUgZnVuY3Rpb24gYmFzZWQgb24gdGhlIFNtYXJ0VGFnIG5hbWUuCgkgKiBAcGFyYW0gU3RyaW5nICRzbWFydFRhZyB0aGUgbmFtZSBvZiB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgdG8gcHJvY2VzcwoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwcm9jZXNzU21hcnRUYWcoJHNtYXJ0VGFnLCAkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCXN3aXRjaCgkc21hcnRUYWcpIAoJCXsKCQkJY2FzZSBzZWxmOjokVEFHX09SREVSX0RBVEE6CgkJCQlyZXR1cm4gc2VsZjo6bW1fb3JkZXJfZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQoJCQljYXNlIHNlbGY6OiRUQUdfUFVSQ0hBU0VfTElOSzoKCQkJCXJldHVybiBzZWxmOjptbV9wdXJjaGFzZV9saW5rKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gIkludmFsaWQgT3JkZXIgU21hcnRUYWcgeyRzbWFydFRhZ30gZm91bmQuIjsKCQl9Cgl9IAoKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fT3JkZXJfRGF0YSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciAKCSAqIHJldHVybmluZyBvcmRlciBkYXRhIGJhc2VkIG9uIHRoZSBvcmRlciBJRCBwcmVzZW50IGluIHRoZSB0cmFuc2FjdGlvbiBrZXkuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX29yZGVyX2RhdGEoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3JkZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRPcmRlcigpOwoJCQoJCS8vIGRldGVybWluZSBpZiB0aGlzIGlzIGEgcmViaWxsIGRhdGEgcmVxdWVzdAoJCSR0cmFuc2FjdGlvbklkID0gbnVsbDsKCQkkaXNSZWJpbGwgPSBmYWxzZTsKCQlpZighaXNfbnVsbChNTV9TbWFydFRhZ1V0aWw6OiRjb250ZXh0KSkKCQl7CgkJCSRvcmRlckF0dHJpYnV0ZXMgPSBNTV9TbWFydFRhZ1V0aWw6OiRjb250ZXh0LT5nZXRPcmRlckF0dHJpYnV0ZXMoKTsKCQkJCgkJCWlmKCFpc19udWxsKCRvcmRlckF0dHJpYnV0ZXMpICYmIGlzc2V0KCRvcmRlckF0dHJpYnV0ZXNbImlzX3JlYmlsbCJdKSkKCQkJewoJCQkJJGlzUmViaWxsID0gJG9yZGVyQXR0cmlidXRlc1siaXNfcmViaWxsIl07CgkJCX0KCQkJCgkJCWlmKGlzc2V0KCRvcmRlckF0dHJpYnV0ZXNbInRyYW5zYWN0aW9uX2lkIl0pICYmICFpc19udWxsKCRvcmRlckF0dHJpYnV0ZXNbInRyYW5zYWN0aW9uX2lkIl0pKQoJCQl7CgkJCQkkdHJhbnNhY3Rpb25JZCA9IGludHZhbCgkb3JkZXJBdHRyaWJ1dGVzWyJ0cmFuc2FjdGlvbl9pZCJdKTsKCQkJfQoJCQkKCQkJaWYoJGlzUmViaWxsKQoJCQl7CgkJCQkkcmViaWxsRGF0YSA9IE1NX09yZGVyVXRpbHM6OmdldFJlYmlsbEFtb3VudHMoJG9yZGVyKTsKCQkJfQoJCX0KCQkKCQlpZigkb3JkZXItPmlzVmFsaWQoKSkKCQl7CgkJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCQl7CgkJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJCXsKCQkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkJJCRrZXkgPSAkdjsKCQkJCX0KCQkJfQoJCQkKCQkJaWYoaXNzZXQoJG5hbWUpKQoJCQl7CgkJCQlzd2l0Y2goc3RydG9sb3dlcigkbmFtZSkpCgkJCQl7CgkJCQkJY2FzZSAiaWQiOgoJCQkJCQlyZXR1cm4gJG9yZGVyLT5nZXRPcmRlck51bWJlcigpOwoJCQkJCQkKCQkJCQljYXNlICJ0b3RhbCI6CgkJCQkJCWlmKCRpc1JlYmlsbCAmJiBpc3NldCgkcmViaWxsRGF0YVsicmViaWxsX3RvdGFsIl0pKQoJCQkJCQl7IAoJCQkJCQkJcmV0dXJuIChpc3NldCgkZG9mb3JtYXQpJiYoJGRvZm9ybWF0ID09ICJ0cnVlIikpP19tbWYoJHJlYmlsbERhdGFbInJlYmlsbF90b3RhbCJdLCAkb3JkZXItPmdldEN1cnJlbmN5KCkpOiRyZWJpbGxEYXRhWyJyZWJpbGxfdG90YWwiXTsKCQkJCQkJfQoJCQkJCQllbHNlIAoJCQkJCQl7IAoJCQkJCQkJLy8gQ2hlY2sgZm9yIHRyYW5zYWN0aW9uIGlkIGFzIGluIHNvbWUgY29udGV4dCB5b3UgbmVlZCB0byBrbm93IHdoaWNoIAoJCQkJCQkJLy8gc3BlY2lmaWMgdHJhbnNhY3Rpb24gaXMgYmVpbmcgcmVmdW5kZWQgYXMgdG8gcG9wdWxhdGUgdGhlIGNvcnJlY3QgdG90YWwgYW1vdW50LgogCQkJCQkJCWlmKCFpc19udWxsKCR0cmFuc2FjdGlvbklkKSkKIAkJCQkJCQl7CiAJCQkJCQkJCSRyZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpnZXRUcmFuc2FjdGlvbkluZm8oJHRyYW5zYWN0aW9uSWQpOyAKIAkJCQkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzcG9uc2UpKQogCQkJCQkJCQl7CiAJCQkJCQkJCQkkdHJhbnNhY3Rpb25Sb3cgPSAkcmVzcG9uc2UtPm1lc3NhZ2U7CiAJCQkJCQkJCQlpZihpc3NldCgkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCkpCiAJCQkJCQkJCQl7CiAJCQkJCQkJCQkJJGFtb3VudCA9IGFicyhmbG9hdHZhbCgkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCkpOwogCQkJCQkJCQkJCWlmKCRhbW91bnQ+MCkKIAkJCQkJCQkJCQl7CiAJCQkJCQkJCQkJCXJldHVybiAoaXNzZXQoJGRvZm9ybWF0KSYmKCRkb2Zvcm1hdCA9PSAidHJ1ZSIpKT9fbW1mKCRhbW91bnQpOiRhbW91bnQ7CiAJCQkJCQkJCQkJfQogCQkJCQkJCQkJfQogCQkJCQkJCQl9CiAJCQkJCQkJfQogCQkJCQkJCQoJCQkJCQkJcmV0dXJuIChpc3NldCgkZG9mb3JtYXQpJiYoJGRvZm9ybWF0ID09ICJ0cnVlIikpPyRvcmRlci0+Z2V0VG90YWwodHJ1ZSk6JG9yZGVyLT5nZXRUb3RhbChmYWxzZSk7CgkJCQkJCX0KCQkJCQkJCgkJCQkJY2FzZSAic3VidG90YWwiOgoJCQkJCQlpZigkaXNSZWJpbGwgJiYgaXNzZXQoJHJlYmlsbERhdGFbInJlYmlsbF9zdWJ0b3RhbCJdKSkKCQkJCQkJewoJCQkJCQkJcmV0dXJuIChpc3NldCgkZG9mb3JtYXQpJiYoJGRvZm9ybWF0ID09ICJ0cnVlIikpP19tbWYoJHJlYmlsbERhdGFbInJlYmlsbF9zdWJ0b3RhbCJdLCAkb3JkZXItPmdldEN1cnJlbmN5KCkpOiRyZWJpbGxEYXRhWyJyZWJpbGxfc3VidG90YWwiXTsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCXJldHVybiAoaXNzZXQoJGRvZm9ybWF0KSYmKCRkb2Zvcm1hdCA9PSAidHJ1ZSIpKT8kb3JkZXItPmdldFN1YnRvdGFsKHRydWUpOiRvcmRlci0+Z2V0U3VidG90YWwoZmFsc2UpOwoJCQkJCQl9CgkJCQkJCQoJCQkJCWNhc2UgImRpc2NvdW50IjoKCQkJCQkJaWYoJGlzUmViaWxsICYmIGlzc2V0KCRyZWJpbGxEYXRhWyJyZWJpbGxfZGlzY291bnQiXSkpCgkJCQkJCXsKCQkJCQkJCXJldHVybiAoaXNzZXQoJGRvZm9ybWF0KSYmKCRkb2Zvcm1hdCA9PSAidHJ1ZSIpKT9fbW1mKCRyZWJpbGxEYXRhWyJyZWJpbGxfZGlzY291bnQiXSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpKTokcmViaWxsRGF0YVsicmViaWxsX2Rpc2NvdW50Il07CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gKGlzc2V0KCRkb2Zvcm1hdCkmJigkZG9mb3JtYXQgPT0gInRydWUiKSk/JG9yZGVyLT5nZXREaXNjb3VudCh0cnVlKTokb3JkZXItPmdldERpc2NvdW50KGZhbHNlKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQljYXNlICJzaGlwcGluZyI6CgkJCQkJCWlmKCRpc1JlYmlsbCAmJiBpc3NldCgkcmViaWxsRGF0YVsicmViaWxsX3NoaXBwaW5nIl0pKQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gKGlzc2V0KCRkb2Zvcm1hdCkmJigkZG9mb3JtYXQgPT0gInRydWUiKSk/X21tZigkcmViaWxsRGF0YVsicmViaWxsX3NoaXBwaW5nIl0sICRvcmRlci0+Z2V0Q3VycmVuY3koKSk6JHJlYmlsbERhdGFbInJlYmlsbF9zaGlwcGluZyJdOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJcmV0dXJuIChpc3NldCgkZG9mb3JtYXQpJiYoJGRvZm9ybWF0ID09ICJ0cnVlIikpPyRvcmRlci0+Z2V0U2hpcHBpbmcodHJ1ZSk6JG9yZGVyLT5nZXRTaGlwcGluZyhmYWxzZSk7CgkJCQkJCX0KCQkJCQkJCgkJCQkJY2FzZSAic2hpcHBpbmdtZXRob2QiOgoJCQkJCQlyZXR1cm4gJG9yZGVyLT5nZXRTaGlwcGluZ09wdGlvbkRlc2NyaXB0aW9uKCk7CgkJCQkJCQoJCQkJCWNhc2UgImJpbGxpbmdhZGRyZXNzIjoKCQkJCQkJcmV0dXJuICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0QWRkcmVzc0xpbmUxKCk7CgkJCQkJCQoJCQkJCWNhc2UgImJpbGxpbmdjaXR5IjoKCQkJCQkJcmV0dXJuICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0Q2l0eSgpOwoJCQkJCQkKCQkJCQljYXNlICJiaWxsaW5nc3RhdGUiOgoJCQkJCQlyZXR1cm4gJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpLT5nZXRTdGF0ZSgpOwoJCQkJCQkKCQkJCQljYXNlICJiaWxsaW5nemlwY29kZSI6CgkJCQkJCXJldHVybiAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCktPmdldFBvc3RhbENvZGUoKTsKCQkJCQkJCgkJCQkJY2FzZSAiYmlsbGluZ2NvdW50cnkiOgoJCQkJCQlyZXR1cm4gJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpLT5nZXRDb3VudHJ5KCk7CgkJCQkJCQoJCQkJCWNhc2UgImJpbGxpbmdjb3VudHJ5bmFtZSI6CgkJCQkJCXJldHVybiBNTV9Db3VudHJ5VXRpbHM6OmdldENvdW50cnlOYW1lKCRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKS0+Z2V0Q291bnRyeSgpKTsKCQkJCQkJCgkJCQkJY2FzZSAic2hpcHBpbmdhZGRyZXNzIjoKCQkJCQkJcmV0dXJuICRvcmRlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCktPmdldEFkZHJlc3NMaW5lMSgpOwoJCQkJCQkKCQkJCQljYXNlICJzaGlwcGluZ2NpdHkiOgoJCQkJCQlyZXR1cm4gJG9yZGVyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKS0+Z2V0Q2l0eSgpOwoJCQkJCQkKCQkJCQljYXNlICJzaGlwcGluZ3N0YXRlIjoKCQkJCQkJcmV0dXJuICRvcmRlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCktPmdldFN0YXRlKCk7CgkJCQkJCQoJCQkJCWNhc2UgInNoaXBwaW5nemlwY29kZSI6CgkJCQkJCXJldHVybiAkb3JkZXItPmdldFNoaXBwaW5nQWRkcmVzcygpLT5nZXRQb3N0YWxDb2RlKCk7CgkJCQkJCQoJCQkJCWNhc2UgInNoaXBwaW5nY291bnRyeSI6CgkJCQkJCXJldHVybiAkb3JkZXItPmdldFNoaXBwaW5nQWRkcmVzcygpLT5nZXRDb3VudHJ5KCk7CgkJCQkJCQoJCQkJCWNhc2UgInNoaXBwaW5nY291bnRyeW5hbWUiOgoJCQkJCQlyZXR1cm4gTU1fQ291bnRyeVV0aWxzOjpnZXRDb3VudHJ5TmFtZSgkb3JkZXItPmdldFNoaXBwaW5nQWRkcmVzcygpLT5nZXRDb3VudHJ5KCkpOwoJCQkJCQkKCQkJCQljYXNlICJhZmZpbGlhdGVpZCI6CgkJCQkJCXJldHVybiAkb3JkZXItPmdldEFmZmlsaWF0ZUlkKCk7CgkJCQkJCQoJCQkJCWNhc2UgInN1YmFmZmlsaWF0ZWlkIjoKCQkJCQkJcmV0dXJuICRvcmRlci0+Z2V0U3ViQWZmaWxpYXRlSWQoKTsKCQkJCQkJCgkJCQkJY2FzZSAiaXBhZGRyZXNzIjoKCQkJCQkJcmV0dXJuICRvcmRlci0+Z2V0SVBBZGRyZXNzKCk7CgkJCQkJCQoJCQkJCWNhc2UgInByb2R1Y3RpZCI6CgkJCQkJCSRwcm9kdWN0SWQgPSAiIjsKCQkJCQkJJG9yZGVySXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCQkJCQoJCQkJCQlmb3JlYWNoKCRvcmRlckl0ZW1zIGFzICRvcmRlckl0ZW0pCgkJCQkJCXsKCQkJCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCkpOwoJCQkJCQkJCQoJCQkJCQkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJCQkJCXsKCQkJCQkJCQkvLyBhc3N1bWVzIG9ubHkgb25lIHByb2R1Y3QgcGVyIG9yZGVyCgkJCQkJCQkJJHByb2R1Y3RJZCA9ICRwcm9kdWN0LT5nZXRJZCgpOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCQoJCQkJCQlyZXR1cm4gJHByb2R1Y3RJZDsKCQkJCQkJCgkJCQkJY2FzZSAicHJvZHVjdG5hbWUiOgoJCQkJCQkkcHJvZHVjdE5hbWUgPSAiIjsKCQkJCQkJJG9yZGVySXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCQkJCgkJCQkJCWZvcmVhY2goJG9yZGVySXRlbXMgYXMgJG9yZGVySXRlbSkKCQkJCQkJewoJCQkJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCQkJCgkJCQkJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJCQkJewoJCQkJCQkJCS8vIGFzc3VtZXMgb25seSBvbmUgcHJvZHVjdCBwZXIgb3JkZXIKCQkJCQkJCQkkcHJvZHVjdE5hbWUgPSAkcHJvZHVjdC0+Z2V0TmFtZSgpOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCgkJCQkJCXJldHVybiAkcHJvZHVjdE5hbWU7CgkJCQkJCQoJCQkJCWNhc2UgImNvdXBvbmNvZGUiOgoJCQkJCQkkY291cG9uQ29kZSA9ICIiOwoJCQkJCQkkb3JkZXJJdGVtcyA9ICRvcmRlci0+Z2V0Q291cG9ucygpOwoJCQkJCQkKCQkJCQkJZm9yZWFjaCgkb3JkZXJJdGVtcyBhcyAkb3JkZXJJdGVtKQoJCQkJCQl7CgkJCQkJCQkkY291cG9uID0gbmV3IE1NX0NvdXBvbigkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCQkJCQoJCQkJCQkJaWYoJGNvdXBvbi0+aXNWYWxpZCgpKQoJCQkJCQkJewoJCQkJCQkJCS8vIGFzc3VtZXMgb25seSBvbmUgY291cG9uIGNvZGUgcGVyIG9yZGVyCgkJCQkJCQkJJGNvdXBvbkNvZGUgPSAkY291cG9uLT5nZXRDb3Vwb25Db2RlKCk7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJCgkJCQkJCXJldHVybiAkY291cG9uQ29kZTsKCQkJCQkJCgkJCQkJY2FzZSAiZ2lmdGxpbmsiOgoJCQkJCQkkZ2lmdExpbmsgPSBNTV9OT19EQVRBOwoJCQkJCQkkb3JkZXJJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJCQkKCQkJCQkJZm9yZWFjaCgkb3JkZXJJdGVtcyBhcyAkb3JkZXJJdGVtKQoJCQkJCQl7CQoJCQkJCQkJaWYoJG9yZGVySXRlbS0+aXNHaWZ0KCkpCgkJCQkJCQl7CgkJCQkJCQkJJGdpZnRDb3Vwb25Db2RlID0gTU1fQ291cG9uOjpnZXRHaWZ0Q291cG9uQ29kZSgkb3JkZXJJdGVtLT5nZXRJZCgpKTsKCQkJCQkJCQkKCQkJCQkJCQlpZighZW1wdHkoJGdpZnRDb3Vwb25Db2RlKSkKCQkJCQkJCQl7CgkJCQkJCQkJCSRnaWZ0TGluayA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRSZWRlZW1HaWZ0UGFnZVN0YXRpY0xpbmsoJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCkpOwoJCQkJCQkJCQkkZ2lmdExpbmsgPSBNTV9VdGlsczo6YXBwZW5kVXJsUGFyYW0oJGdpZnRMaW5rLCAiY291cG9uIiwgJGdpZnRDb3Vwb25Db2RlKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkKCQkJCQkJcmV0dXJuICRnaWZ0TGluazsKCQkJCQkJCgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAnbmFtZScgYXR0cmlidXRlICd7JG5hbWV9JyBpcyBpbnZhbGlkIGZvciBTbWFydFRhZyB7JGNvZGV9LiI7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICduYW1lJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIiI7CgkJfQoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9QdXJjaGFzZV9MaW5rIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yCgkgKiByZXR1cm5pbmcgYSBwdXJjaGFzZSBsaW5rIGJhc2VkIG9uIHRoZSBwcm9kdWN0SWQgb3IgbWVtYmVyc2hpcElkIGF0dHJpYnV0ZSBwYXNzZWQuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX3B1cmNoYXNlX2xpbmsoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCS8vIGhhbmRsZSBDbGlja0JhbmsgcHVyY2hhc2UgbGlua3MKCQlpZihpc3NldCgkcGF5bWVudG1ldGhvZCkgJiYgc3RydG9sb3dlcigkcGF5bWVudG1ldGhvZCkgPT0gc3RydG9sb3dlcihNTV9QYXltZW50U2VydmljZTo6JENMSUNLQkFOS19TRVJWSUNFX1RPS0VOKSkKCQl7CgkJCS8vIGdldCBwcm9kdWN0IElECgkJCWlmKGlzc2V0KCRwcm9kdWN0aWQpIHx8IGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCQl7CgkJCQlpZihpc3NldCgkcHJvZHVjdGlkKSkKCQkJCXsKCQkJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRwcm9kdWN0aWQpOwoJCQkKCQkJCQlpZighJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBQcm9kdWN0IElEICd7JHByb2R1Y3RpZH0nIGlzIGludmFsaWQuIjsKCQkJCQl9CgkJCQl9CgkJCQllbHNlIGlmKGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCQkJewoJCQkJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkbWVtYmVyc2hpcGlkKTsKCQkJCgkJCQkJaWYoJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCWlmKCEkbWVtYmVyc2hpcC0+aXNGcmVlKCkpCgkJCQkJCXsKCQkJCQkJCSRwcm9kdWN0aWQgPSAkbWVtYmVyc2hpcC0+Z2V0RGVmYXVsdFByb2R1Y3QoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogTWVtYmVyc2hpcCBMZXZlbCBJRCAneyRtZW1iZXJzaGlwaWR9JyBpcyBpbnZhbGlkLiI7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQlpZihpc3NldCgkcHJvZHVjdGlkKSkKCQkJewoJCQkJJHNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldFBheW1lbnRTZXJ2aWNlKE1NX1BheW1lbnRTZXJ2aWNlOjokQ0xJQ0tCQU5LX1NFUlZJQ0VfVE9LRU4pOwoJCQkJCgkJCQlpZigkc2VydmljZS0+aXNBY3RpdmUoKSkKCQkJCXsKCQkJCQkkdXJsID0gJHNlcnZpY2UtPmdldFB1cmNoYXNlTGluaygkcHJvZHVjdGlkKTsKCQkJCQkKCQkJCQlpZighaXNfbnVsbCgkdXJsKSkKCQkJCQl7CgkJCQkJCXJldHVybiAkdXJsOwoJCQkJCX0KCQkJCQllbHNlIAoJCQkJCXsKCQkJCQkJcmV0dXJuICJObyBDbGlja0JhbmsgcHJvZHVjdCBtYXBwZWQgdG8gcHJvZHVjdCBJRCB7JHByb2R1Y3RpZH0uIjsKCQkJCQl9CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBDbGlja0JhbmsgaXMgbm90IGFuIGFjdGl2ZSBwYXltZW50IG1ldGhvZC4iOwoJCQkJfQoJCQl9CgkJfQoJCQoJCS8vIGhhbmRsZSBhbGwgb3RoZXIgcHVyY2hhc2UgbGlua3MKCQkkY3VycmVudFVzZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRVc2VyKHRydWUpOwoJCWlmKCRjdXJyZW50VXNlci0+aXNWYWxpZCgpICYmIChlbXB0eSgkdXNlY2FyZG9uZmlsZSkgfHwgJHVzZWNhcmRvbmZpbGUgPT0gInRydWUiKSkKCQl7CgkJCSRoYXNDYXJkT25GaWxlID0gJGN1cnJlbnRVc2VyLT5oYXNDYXJkT25GaWxlKCk7CgkJfQoJCWVsc2UKCQl7CgkJCSRoYXNDYXJkT25GaWxlID0gZmFsc2U7CgkJfQoJCQoJCWlmKGlzc2V0KCRwcm9kdWN0aWQpIHx8IGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCXsKCQkJaWYoaXNzZXQoJHByb2R1Y3RpZCkpCgkJCXsKCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJHByb2R1Y3RpZCk7CgkJCQkKCQkJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJaWYoISRoYXNDYXJkT25GaWxlKQoJCQkJCXsKCQkJCQkJJHVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRDaGVja291dFBhZ2VTdGF0aWNMaW5rKCRwcm9kdWN0aWQpOwoJCQkJCQkKCQkJCQkJaWYoaXNzZXQoJGF1dG9sb2dpbikgJiYgJGF1dG9sb2dpbiA9PSAidHJ1ZSIpCgkJCQkJCXsKCQkJCQkJCS8vIGdlbmVyYXRlIGEgbG9naW4gdG9rZW4KCQkJCQkJCSRjdXJyZW50VXNlciA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudFVzZXIoKTsKCQkJCQkJCWlmKCRjdXJyZW50VXNlci0+aXNWYWxpZCgpKQoJCQkJCQkJewoJCQkJCQkJCSRsb2dpblRva2VuUmVzcG9uc2UgPSBNTV9Mb2dpblRva2VuOjpnZW5lcmF0ZVRva2VuKCRjdXJyZW50VXNlci0+Z2V0SWQoKSk7CgkJCQkJCQkJCgkJCQkJCQkJaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJGxvZ2luVG9rZW5SZXNwb25zZSkpCgkJCQkJCQkJewoJCQkJCQkJCQkkbG9naW5Ub2tlbiA9ICRsb2dpblRva2VuUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCQkJCQkJCSR1cmwgPSBNTV9VdGlsczo6YXBwZW5kVXJsUGFyYW0oJHVybCwgTU1fU2Vzc2lvbjo6JFBBUkFNX0xPR0lOX1RPS0VOLCAkbG9naW5Ub2tlbik7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCQoJCQkJCQlpZihpc3NldCgkaXNnaWZ0KSAmJiAkaXNnaWZ0ID09ICJ0cnVlIikKCQkJCQkJewoJCQkJCQkJJHVybCA9IE1NX1V0aWxzOjphcHBlbmRVcmxQYXJhbSgkdXJsLCAiZ2lmdCIsICJ5ZXMiKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJcmV0dXJuICR1cmw7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSR3aWR0aCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1BVUkNIQVNFX0NPTkZJUk1BVElPTl9ESUFMT0dfV0lEVEgpOwoJCQkJCQkkaGVpZ2h0ID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfUFVSQ0hBU0VfQ09ORklSTUFUSU9OX0RJQUxPR19IRUlHSFQpOwoJCQkJCQkkaXNnaWZ0ID0gKGlzc2V0KCRpc2dpZnQpICYmICRpc2dpZnQgPT0gInRydWUiKSA/ICJ0cnVlIiA6ICJmYWxzZSI7CgkJCQkJCQoJCQkJCQlpZihlbXB0eSgkYnlwYXNzY29uZmlybWF0aW9uKSB8fCAkYnlwYXNzY29uZmlybWF0aW9uICE9ICJ0cnVlIikKCQkJCQkJewoJCQkJCQkJcmV0dXJuICJqYXZhc2NyaXB0OnB5bXR1dGlsc19qcy5zaG93UGF5bWVudENvbmZpcm1hdGlvbih7JGN1cnJlbnRVc2VyLT5nZXRJZCgpfSwgeyRwcm9kdWN0aWR9LCB7JGhlaWdodH0sIHskd2lkdGh9LCAneyRpc2dpZnR9Jyk7IjsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsJCQoJCQkJCQkJcmV0dXJuICJqYXZhc2NyaXB0OnB5bXR1dGlsc19qcy5wbGFjZU9yZGVyQ2FyZE9uRmlsZSh7JGN1cnJlbnRVc2VyLT5nZXRJZCgpfSwgeyRwcm9kdWN0aWR9LCAndXNlcicsICd7JGlzZ2lmdH0nKTsiOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBQcm9kdWN0IElEICd7JHByb2R1Y3RpZH0nIGlzIGludmFsaWQuIjsKCQkJCX0KCQkJfQoJCQllbHNlIGlmKGlzc2V0KCRtZW1iZXJzaGlwaWQpKQoJCQl7CgkJCQkkbWVtYmVyc2hpcCA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJG1lbWJlcnNoaXBpZCk7CgkJCQkKCQkJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJaWYoJG1lbWJlcnNoaXAtPmlzRnJlZSgpIHx8ICEkaGFzQ2FyZE9uRmlsZSkKCQkJCQl7CgkJCQkJCSR1cmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0Q2hlY2tvdXRQYWdlU3RhdGljTGluaygkbWVtYmVyc2hpcGlkLCB0cnVlKTsKCgkJCQkJCWlmKCEkbWVtYmVyc2hpcC0+aXNGcmVlKCkgJiYgaXNzZXQoJGlzZ2lmdCkgJiYgJGlzZ2lmdCA9PSAidHJ1ZSIpCgkJCQkJCXsKCQkJCQkJCSR1cmwgPSBNTV9VdGlsczo6YXBwZW5kVXJsUGFyYW0oJHVybCwgImdpZnQiLCAieWVzIik7CgkJCQkJCX0KCQkJCQkJCgkJCQkJCXJldHVybiAkdXJsOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkcHJvZHVjdGlkID0gJG1lbWJlcnNoaXAtPmdldERlZmF1bHRQcm9kdWN0KCk7CgkJCQkJCSR3aWR0aCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1BVUkNIQVNFX0NPTkZJUk1BVElPTl9ESUFMT0dfV0lEVEgpOwoJCQkJCQkkaGVpZ2h0ID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfUFVSQ0hBU0VfQ09ORklSTUFUSU9OX0RJQUxPR19IRUlHSFQpOwoJCQkJCQkkaXNnaWZ0ID0gKGlzc2V0KCRpc2dpZnQpICYmICRpc2dpZnQgPT0gInRydWUiKSA/ICJ0cnVlIiA6ICJmYWxzZSI7CgkJCQkJCQoJCQkJCQlpZihlbXB0eSgkYnlwYXNzY29uZmlybWF0aW9uKSB8fCAkYnlwYXNzY29uZmlybWF0aW9uICE9ICJ0cnVlIikKCQkJCQkJewoJCQkJCQkJcmV0dXJuICJqYXZhc2NyaXB0OnB5bXR1dGlsc19qcy5zaG93UGF5bWVudENvbmZpcm1hdGlvbih7JGN1cnJlbnRVc2VyLT5nZXRJZCgpfSwgeyRwcm9kdWN0aWR9LCB7JGhlaWdodH0sIHskd2lkdGh9LCAneyRpc2dpZnR9Jyk7IjsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCXJldHVybiAiamF2YXNjcmlwdDpweW10dXRpbHNfanMucGxhY2VPcmRlckNhcmRPbkZpbGUoeyRjdXJyZW50VXNlci0+Z2V0SWQoKX0sIHskcHJvZHVjdGlkfSwgJ3VzZXInLCAneyRpc2dpZnR9Jyk7IjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogTWVtYmVyc2hpcCBMZXZlbCBJRCAneyRtZW1iZXJzaGlwaWR9JyBpcyBpbnZhbGlkLiI7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJG1lbWJlcnNoaXAgPSBNTV9NZW1iZXJzaGlwTGV2ZWw6OmdldERlZmF1bHRNZW1iZXJzaGlwKCk7CgkJCSR1cmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0Q2hlY2tvdXRQYWdlU3RhdGljTGluaygkbWVtYmVyc2hpcC0+Z2V0SWQoKSwgdHJ1ZSk7CgkJCQoJCQlpZighJG1lbWJlcnNoaXAtPmlzRnJlZSgpICYmIGlzc2V0KCRpc2dpZnQpICYmICRpc2dpZnQgPT0gInRydWUiKQoJCQl7CgkJCQkkdXJsID0gTU1fVXRpbHM6OmFwcGVuZFVybFBhcmFtKCR1cmwsICJnaWZ0IiwgInllcyIpOwoJCQl9CgkJCQoJCQlyZXR1cm4gJHVybDsKCQl9Cgl9Cn0K', 0, '2018-11-21 06:38:54'),
(100, 'newmemberscomparisonreport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fTmV3TWVtYmVyc0NvbXBhcmlzb25SZXBvcnQgZXh0ZW5kcyBNTV9SZXBvcnRCYXNlIAp7CgkKCXB1YmxpYyBzdGF0aWMgJE5FV19NRU1CRVJTX0NPTVBBUklTT05fREFUQUdSSUQgPSAibmV3X21lbWJlcnNfY29tcGFyaXNvbl9kYXRhZ3JpZCI7CglwdWJsaWMgc3RhdGljICRORVdfTUVNQkVSU19DT01QQVJJU09OX0xJTkVDSEFSVCA9ICJuZXdfbWVtYmVyc19jb21wYXJpc29uX2xpbmVjaGFydCI7CgkKCXByb3RlY3RlZCAkdmlzdWFsRWxlbWVudHMgPSBhcnJheSgiTU1fUmVwb3J0RGF0YUdyaWQiLCJNTV9SZXBvcnRMaW5lQ2hhcnQiKTsJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJWaXN1YWxFbGVtZW50KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKSAKCXsKCQlzd2l0Y2ggKCRlbGVtZW50SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JE5FV19NRU1CRVJTX0NPTVBBUklTT05fTElORUNIQVJUOgoJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJOZXdNZW1iZXJzQ29tcGFyaXNvbkxpbmVDaGFydCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JE5FV19NRU1CRVJTX0NPTVBBUklTT05fREFUQUdSSUQ6CgkJCQlyZXR1cm4gJHRoaXMtPnJlbmRlck5ld01lbWJlcnNDb21wYXJpc29uRGF0YWdyaWQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQsICRkaXJlY3RpdmVzKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiVW5hYmxlIHRvIHJlbmRlciB2aXN1YWwgZWxlbWVudDogaWRlbnRpZmllciAiLigoIWlzX2FycmF5KCRlbGVtZW50SWRlbnRpZmllcikgJiYgIWlzX29iamVjdCgkZWxlbWVudElkZW50aWZpZXIpKT8ieyRlbGVtZW50SWRlbnRpZmllcn0gIjoiIikuInVua25vd24iLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkZWxlbWVudElkZW50aWZpZXIKCSAqIEBwYXJhbSBzdHJpbmcgJHdpZHRoCgkgKiBAcGFyYW0gc3RyaW5nICRoZWlnaHQKCSAqIEBwYXJhbSBzdHJpbmcgJHBhcmFtcwoJICogQHJldHVybiBNTV9SZXBvcnRSZXNwb25zZSBjb250YWluaW5nIHRoZSBkYXRhZ3JpZCBpZiBpdCBpcyByZW5kZXJhYmxlLCBub3QtcmVhZHkgc3RhdHVzIGlmIHRoZSBkYXRhIGlzIGF2YWlsYWJsZSwgb3IgZXJyb3IgaWYgdGhlcmUgd2FzIGFuIGVycm9yCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJOZXdNZW1iZXJzQ29tcGFyaXNvbkRhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKQoJewoJCS8vc2hhcmUgcmVwb3J0IHdpdGggdGhlIG5ldyBtZW1iZXJzIHJlcG9ydCwgc2luY2UgdGhpcyBpcyBqdXN0IGEgbmV3IHZpZXcgb24gdGhlIHNhbWUgZGF0YQoJCSRkYXRhUmVzcG9uc2UgPSBNTV9SZXBvcnREYXRhUmV0cmlldmVyOjpyZXF1ZXN0RGF0YSgiTU1fTmV3TWVtYmVyc1JlcG9ydCIsIE1NX05ld01lbWJlcnNSZXBvcnQ6OiRORVdfTUVNQkVSU19CWV9EQVRFX1FVRVJZLCAkcGFyYW1zKTsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJCgkJJHJvd0luZGV4ID0gIkRhdGUiOwoJCQoJCWlmIChpc3NldCgkcGFyYW1zWyd0eXBlJ10pKQoJCXsKCQkJc3dpdGNoICgkcGFyYW1zWyd0eXBlJ10pCgkJCXsKCQkJCWNhc2UgJ3dlZWtseSc6CgkJCQkJJHJvd0luZGV4ID0gIldlZWsgb2YiOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAnbW9udGhseSc6CgkJCQkJJHJvd0luZGV4ID0gIk1vbnRoIjsKCQkJCQlicmVhazsKCQkJCWNhc2UgJ3llYXJseSc6CgkJCQkJJHJvd0luZGV4ID0gIlllYXIiOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQkkcm93SW5kZXggPSAiRGF0ZSI7CgkJCQkJYnJlYWs7CgkJCX0KCQl9CgkJCgkJLy9kYXRhIGlzIHJlYWR5LCBjb25zdHJ1Y3QgdGhlIGdyaWQgbW9kZWwsIHN0YXJ0aW5nIHdpdGggdGhlIGhlYWRlcnMKCQkkcmVzdWx0c2V0ICAgPSAkZGF0YVJlc3BvbnNlLT5tZXNzYWdlOwoJCSRncmlkSGVhZGVycyA9IGFycmF5KCJkYXRlIj0+YXJyYXkoJ2xhYmVsJz0+JHJvd0luZGV4LCAnc29ydGFibGUnPT50cnVlLCAnc29ydFZhbHVlQ29sdW1uJz0+J2RhdGVfc29ydF92YWx1ZScpKTsKCQkKCQkvL3RoZXJlIGlzIGEgY29sdW1uIGZvciBlYWNoIG1lbWJlcnNoaXAgbGV2ZWwuIFdlIGNvdWxkIHF1ZXJ5IHRoaXMgZGF0YSBhZ2FpbiwgYnV0IGZhc3RlciB0byBqdXN0IGV4dHJhY3QgaXQgZnJvbSB0aGUgZmlyc3Qgcm93IG9mIHRoZSByZXN1bHRzZXQKCQkkZmlyc3RSb3cgPSByZXNldCgkcmVzdWx0c2V0KTsKCQlmb3JlYWNoICgkZmlyc3RSb3cgYXMgJGs9PiR2KQoJCXsJCgkJCWlmICgoJGsgIT0gImRhdGUiKSAmJiAoJGsgIT0gImRhdGVfc29ydF92YWx1ZSIpKQoJCQl7CgkJCQkkZ3JpZEhlYWRlcnNbJGtdID0gYXJyYXkoJ2xhYmVsJz0+JGspOwoJCQl9CgkJfQoJCQoJCSRncmlkID0gTU1fUmVwb3J0RGF0YWdyaWQ6OmNyZWF0ZUZyb21EYXRhKHNlbGY6OiRORVdfTUVNQkVSU19DT01QQVJJU09OX0RBVEFHUklELCAkZ3JpZEhlYWRlcnMsICRkYXRhUmVzcG9uc2UsJGRpcmVjdGl2ZXMpOwoJCS8vJGdyaWQtPnNldEdyaWRUaXRsZSgiTmV3IE1lbWJlcnMgQnkgRGF0ZSIpOwoJCSRncmlkLT5zZXRTaG93SGVhZGVyUm93KGZhbHNlKTsKCQkKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRncmlkLT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlck5ld01lbWJlcnNDb21wYXJpc29uTGluZUNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKQoJewoJCSRkYXRhUmVzcG9uc2UgPSBNTV9SZXBvcnREYXRhUmV0cmlldmVyOjpyZXF1ZXN0RGF0YSgiTU1fTmV3TWVtYmVyc1JlcG9ydCIsIE1NX05ld01lbWJlcnNSZXBvcnQ6OiRORVdfTUVNQkVSU19CWV9EQVRFX1FVRVJZLCAkcGFyYW1zKTsJCQoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQkkcmVzdWx0cyA9ICRkYXRhUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCgkJLy9nZXQgdGhlIGNvbXBhcmVkIG1lbWJlcnNoaXBzIGZyb20gdGhlIGZpcnN0IGxpbmUKCQkkZmlyc3RMaW5lID0gcmVzZXQoJHJlc3VsdHMpOwoJCSRtZW1iZXJzaGlwcyA9IGFycmF5X2tleXMoYXJyYXlfc2xpY2UoJGZpcnN0TGluZSwxKSk7CgkJCgkJLy9ub3cga2V5IGEgbG9va3VwIHRhYmxlIHdpdGggdGhlIG1lbWJlcnNoaXAgcG9pbnRpbmcgdG8gYSBtb2RlbCB3ZSB3aWxsIGNyZWF0ZSBmb3IgaXQKCQkkbWxMb29rdXAgPSBhcnJheSgpOwoJCWZvcmVhY2ggKCRtZW1iZXJzaGlwcyBhcyAkdikKCQl7CgkJCWlmICgoJHYgIT0gJ2RhdGUnKSAmJiAoJHYgIT0gJ2RhdGVfc29ydF92YWx1ZScpKQoJCQl7CgkJCQkkbWxMb29rdXBbJHZdID0gbmV3IE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbCgpOwoJCQkJJG1sTG9va3VwWyR2XS0+c2V0VGl0bGUoJHYpOyAvL2ZvciB0aGUgbGVnZW5lZAoJCQl9CgkJfQoJCQoJCS8vbm93IGl0ZXJhdGUgdGhyb3VnaCB0aGUgZGF0YSBhbmQgYWRkIGl0IHRvIHRoZSBjb3JyZWN0IG1vZGVsCgkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJHJvdykKCQl7CgkJCWZvcmVhY2ggKCRyb3cgYXMgJGNvbHVtbj0+JGNvbHVtblZhbCkKCQkJewoJCQkJaWYgKCgkY29sdW1uICE9ICdkYXRlJykgJiYgKCRjb2x1bW4gIT0gJ2RhdGVfc29ydF92YWx1ZScpKQoJCQkJewoJCQkJCWlmIChpc3NldCgkbWxMb29rdXBbJGNvbHVtbl0pICYmIGlzX29iamVjdCgkbWxMb29rdXBbJGNvbHVtbl0pKQoJCQkJCXsKCQkJCQkJJG1sTG9va3VwWyRjb2x1bW5dLT5hZGRWYWx1ZXMoJHJvd1snZGF0ZV9zb3J0X3ZhbHVlJ10sICRjb2x1bW5WYWwpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkKCQkvL25vdyBjcmVhdGUgdGhlIGxpbmUgY2hhcnQKCQkkbGluZSA9IG5ldyBNTV9SZXBvcnRMaW5lQ2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyKTsKCQkkbGluZS0+c2V0Q2F0ZWdvcmllc0FyZURhdGVzKHRydWUpOwoJCSRsaW5lLT5zZXREYXRlRm9ybWF0KCJZWVlZLU1NLUREIik7CgkJCgkJLy9hZGQgdGhlIG1vZGVscyB3ZSBqdXN0IGNyZWF0ZWQKCQlmb3JlYWNoICgkbWxMb29rdXAgYXMgJG1vZGVsKQoJCXsKCQkJJGxpbmUtPmFkZE1vZGVsKCRtb2RlbCk7CgkJfQoJCQoJCS8vc2V0IHRoZSBncmFwaCByZXNvbHV0aW9uIGJhc2VkIG9uIHdoYXQgdGhlIHVzZXIgY2hvc2UKCQkkcmVzb2x1dGlvbiA9IE1NX1JlcG9ydExpbmVDaGFydDo6JERBWVM7CgkJaWYgKGlzc2V0KCRwYXJhbXNbJ3R5cGUnXSkpCgkJewoJCQlzd2l0Y2ggKCRwYXJhbXNbJ3R5cGUnXSkKCQkJewoJCQkJY2FzZSAnd2Vla2x5JzoKCQkJCQkkcmVzb2x1dGlvbiA9IE1NX1JlcG9ydExpbmVDaGFydDo6JFdFRUtTOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAnbW9udGhseSc6CgkJCQkJJHJlc29sdXRpb24gPSBNTV9SZXBvcnRMaW5lQ2hhcnQ6OiRNT05USFM7CgkJCQkJYnJlYWs7CgkJCQljYXNlICd5ZWFybHknOgoJCQkJCSRyZXNvbHV0aW9uID0gTU1fUmVwb3J0TGluZUNoYXJ0OjokWUVBUlM7CgkJCQkJYnJlYWs7CgkJCQlkZWZhdWx0OgoJCQkJCWJyZWFrOwoJCQl9CgkJfQoJCSRsaW5lLT5zZXRSZXNvbHV0aW9uKCRyZXNvbHV0aW9uKTsKCQkkbGluZS0+c2V0VmFsdWVBeGlzVGl0bGUoIiMgb2YgbWVtYmVycyBhZGRlZCIpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGxpbmUtPnJlbmRlcigpKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YSgkcXVlcnlJZGVudGlmaWVyLCAkcGFyYW1zKQoJewoJCS8vdGhpcyByZXBvcnQgZ2VuZXJhdGVzIG5vIGRhdGEgb2YgaXRzIG93bgoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgZGF0YSBmb3IgdW5rbm93biBxdWVyeSBpZGVudGlmaWVyIHskcXVlcnlJZGVudGlmaWVyfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKfQoK', 0, '2018-11-21 06:38:54'),
(101, 'aweberoauthexception', 'LyoqCiAqIE1NX0FXZWJlck9BdXRoRXhjZXB0aW9uCiAqCiAqIE9BdXRoIGV4Y2VwdGlvbiwgYXMgZ2VuZXJhdGVkIGJ5IGFuIEFQSSBKU09OIGVycm9yIHJlc3BvbnNlCiAqIEB1c2VzIE1NX0FXZWJlckV4Y2VwdGlvbgogKiBAcGFja2FnZQogKiBAdmVyc2lvbiAkaWQkCiAqLwpjbGFzcyBNTV9BV2ViZXJPQXV0aEV4Y2VwdGlvbiBleHRlbmRzIE1NX0FXZWJlckV4Y2VwdGlvbiB7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCR0eXBlLCAkbWVzc2FnZSkgewoJCSR0aGlzLT50eXBlID0gJHR5cGU7CgkJJHRoaXMtPm1lc3NhZ2UgPSAkbWVzc2FnZTsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCJ7JHR5cGV9OiB7JG1lc3NhZ2V9Iik7Cgl9Cn0K', 0, '2018-11-21 06:38:54'),
(102, 'previewview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1ByZXZpZXdWaWV3IGV4dGVuZHMgTU1fUkJBQ0FkbWluVmlldwp7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9QUkVWSUVXX0NIQU5HRV9NRU1CRVJTSElQID0gInByZXZpZXdDaGFuZ2VNZW1iZXJzaGlwIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1BSRVZJRVdfQ0hBTkdFX0JVTkRMRVMgPSAicHJldmlld0NoYW5nZUJ1bmRsZXMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUFJFVklFV19TQVZFID0gInNhdmVQcmV2aWV3IjsKCQoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1BSRVZJRVdfQ0hBTkdFX01FTUJFUlNISVA6CgkJCQlyZXR1cm4gJHRoaXMtPmNoYW5nZU1lbWJlcnNoaXBMZXZlbCgkcG9zdCk7CgkJCQkKCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUFJFVklFV19DSEFOR0VfQlVORExFUzoKCQkJCXJldHVybiAkdGhpcy0+Y2hhbmdlQnVuZGxlcygkcG9zdCk7CgkJCQkKCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUFJFVklFV19TQVZFOgoJCQkJcmV0dXJuICR0aGlzLT5zYXZlUHJldmlld1NldHRpbmdzKCRwb3N0KTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlUHJldmlld1NldHRpbmdzKCRwb3N0KQoJewogCSAJZ2xvYmFsICRjdXJyZW50X3VzZXI7CgkJCiAJIAkkbXQgPSBNTV9NZW1iZXJzaGlwTGV2ZWw6OmdldE1lbWJlcnNoaXBMZXZlbHNMaXN0KHRydWUpOwoJCSRwcmV2aWV3ID0gbmV3IE1NX1ByZXZpZXcoKTsKIAkgCSRtYXQgPSBhcnJheSgpOwogCSAJJGZpcnN0RWxlbSA9IDA7CiAJIAkKIAkgCS8vLy8gZ2V0IGluZm8KIAkgCSRwcmV2aWV3T2JqID0gTU1fUHJldmlldzo6Z2V0RGF0YSgpOwoJCiAJIAlpZihpc3NldCgkcG9zdFsibW1fcHJldmlld19tZW1iZXJfdHlwZSJdKSkJCiAJIAl7CgkJCSRmaXJzdEVsZW0gPSAkcG9zdFsibW1fcHJldmlld19tZW1iZXJfdHlwZSJdOwoJCQkkbWVtYmVyVHlwZSA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJGZpcnN0RWxlbSk7CgkJCSRtYXQgPSAkbWVtYmVyVHlwZS0+Z2V0QnVuZGxlcygpOwoJIAkgCSRkYXlzID0gKGlzc2V0KCRwb3N0WyJtbV9wcmV2aWV3X2RheXMiXSkgJiYgaW50dmFsKCRwb3N0WyJtbV9wcmV2aWV3X2RheXMiXSk+MCk/JHBvc3RbIm1tX3ByZXZpZXdfZGF5cyJdOjA7CgkJCQoJIAkgCS8vLyB1c2VyIGlkLCBkYXlzLCBtZW1iZXIgdHlwZSBpZCwgYnVuZGxlcyBsaXN0CgkgCSAJJHRhZ3MgPSBhcnJheSgpOwoJIAkgCWlmKGlzX2FycmF5KCRtYXQpIHx8IGlzX29iamVjdCgkbWF0KSkKCSAJIAl7CgkJIAkgCWZvcmVhY2goJG1hdCBhcyAkaz0+JHYpCgkJIAkgCXsKCQkgCSAJCSR0YWdzWyRrXSA9ICRkYXlzOwoJCSAJIAl9CgkgCSAJfQoJIAkgCQoJIAkgCWlmKGlzc2V0KCRwb3N0WyJwcmV2aWV3X2FjY2Vzc190YWdzIl0pKQoJIAkgCXsKCSAJIAkJJHNlbGVjdGVkVGFncyA9IGV4cGxvZGUoIiwiLCAkcG9zdFsicHJldmlld19hY2Nlc3NfdGFncyJdKTsKCSAJIAkJZm9yZWFjaCgkc2VsZWN0ZWRUYWdzIGFzICR0YWcpCgkgCSAJCXsKCQkgCSAJCSR0YWdzWyR0YWddID0gJGRheXM7CgkgCSAJCX0KCSAJIAl9IAoJIAkgCQoJIAkgCSRwcmV2aWV3LT5zZXREYXRhKCRjdXJyZW50X3VzZXItPklELCRkYXlzLCAkZmlyc3RFbGVtLCAkdGFncyk7CiAJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwogCSAJfQogCSAJCiAJIAlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2F2ZSBwcmV2aWV3IHNldHRpbmdzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2hvdygpCgl7CQogCSAJZ2xvYmFsICRjdXJyZW50X3VzZXI7CgkJCiAJIAkkbXQgPSBNTV9NZW1iZXJzaGlwTGV2ZWw6OmdldE1lbWJlcnNoaXBMZXZlbFBvc3RBY2Nlc3MoKTsKCQkkcHJldmlldyA9IG5ldyBNTV9QcmV2aWV3KCk7CiAJIAkkbWF0ID0gYXJyYXkoKTsKIAkgCSRmaXJzdEVsZW0gPSAwOwogCSAJCiAJIAkvLy8vIGdldCBpbmZvCiAJIAkkcHJldmlld09iaiA9IE1NX1ByZXZpZXc6OmdldERhdGEoKTsKIAkgCWlmKGlzc2V0KCRfUE9TVFsibW0tcHJldmlld19idG4iXSkpCQogCSAJewoJCQkkZmlyc3RFbGVtID0gJF9QT1NUWyJtbS1wcmV2aWV3LW1lbWJlcl90eXBlIl07CgkJCSRtZW1iZXJUeXBlID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkZmlyc3RFbGVtKTsKCQkJJG1hdCA9ICRtZW1iZXJUeXBlLT5nZXRCdW5kbGVzKCk7CgkgCSAJJGRheXMgPSAoaXNzZXQoJF9QT1NUWyJtbS1wcmV2aWV3LWRheXMiXSkgJiYgaW50dmFsKCRfUE9TVFsibW0tcHJldmlldy1kYXlzIl0pPjApPyRfUE9TVFsibW0tcHJldmlldy1kYXlzIl06MDsKCQkJCgkgCSAJLy8vIHVzZXIgaWQsIGRheXMsIG1lbWJlciB0eXBlIGlkLCBidW5kbGVzIGxpc3QKCSAJIAkkdGFncyA9IGFycmF5KCk7CgkgCSAJaWYoaXNfYXJyYXkoJG1hdCkgfHwgaXNfb2JqZWN0KCRtYXQpKQoJIAkgCXsKCQkgCSAJZm9yZWFjaCgkbWF0IGFzICRrPT4kdikKCQkgCSAJewoJCSAJIAkJJHRhZ3NbJGtdID0gJGRheXM7CgkJIAkgCX0KCSAJIAl9CgkgCSAJCgkgCSAJaWYoJGZpcnN0RWxlbSE9Im5vbmUiKXsKCQkgCSAJaWYoaXNzZXQoJF9QT1NUWyJwcmV2aWV3X2FjY2Vzc190YWdzIl0pICYmIGlzX2FycmF5KCRfUE9TVFsicHJldmlld19hY2Nlc3NfdGFncyJdKSkKCQkgCSAJewoJCSAJIAkJZm9yZWFjaCgkX1BPU1RbInByZXZpZXdfYWNjZXNzX3RhZ3MiXSBhcyAkc2VsZWN0ZWRUYWdzKQoJCSAJIAkJewoJCQkgCSAJCSR0YWdzWyRzZWxlY3RlZFRhZ3NdID0gJGRheXM7CgkJIAkgCQl9CgkJIAkgCX0KCSAJIAl9CgkgCSAJCgkgCSAJJHByZXZpZXctPnNldERhdGEoJGN1cnJlbnRfdXNlci0+SUQsJGRheXMsICRmaXJzdEVsZW0sICR0YWdzKTsKIAkgCX0KIAkgCWVsc2UgaWYoISRwcmV2aWV3T2JqKQogCSAJewogCSAJCSRmaXJzdEVsZW0gPSBrZXkoJG10KTsKCQkJJG1lbWJlclR5cGUgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRmaXJzdEVsZW0pOwoJCQkkbWF0ID0gJG1lbWJlclR5cGUtPmdldEJ1bmRsZXMoKTsKCSAJIAkkdGFncyA9IGFycmF5KCk7CgkgCSAJaWYoaXNfYXJyYXkoJG1hdCkgfHwgaXNfb2JqZWN0KCRtYXQpKQoJIAkgCXsKCQkgCSAJZm9yZWFjaCgkbWF0IGFzICRrPT4kdikKCQkgCSAJewoJCSAJIAkJJHRhZ3NbJGtdID0gMTsKCQkgCSAJfQoJIAkgCX0KCSAJIAkkcHJldmlldy0+c2V0RGF0YSgkY3VycmVudF91c2VyLT5JRCwxLCAkZmlyc3RFbGVtLCAkdGFncyk7CiAJIAl9CiAJIAkkcHJldmlld09iaiA9IE1NX1ByZXZpZXc6OmdldERhdGEoKTsKIAkgCWlmKGVtcHR5KCRtYXQpKXsKCQkJJG1lbWJlclR5cGUgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRwcmV2aWV3T2JqLT5nZXRNZW1iZXJzaGlwSWQoKSk7CgkJCSRtYXQgPSAkbWVtYmVyVHlwZS0+Z2V0QnVuZGxlcygpOwogCSAJfQogCSAJCgkJJGluZm8gPSBuZXcgc3RkQ2xhc3MoKTsKCQkkdG1wTXRzID0gTU1fTWVtYmVyc2hpcExldmVsOjpnZXRNZW1iZXJzaGlwTGV2ZWxzTGlzdCh0cnVlKTsKCQkkdG1wTXRzWyJub25lIl0gPSAiTm9uLU1lbWJlcnMiOwoJCSRpbmZvLT5tZW1iZXJUeXBlcyA9IE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkdG1wTXRzLCRwcmV2aWV3T2JqLT5nZXRNZW1iZXJzaGlwSWQoKSk7CgkJCgkJJGF0ID0gTU1fQnVuZGxlOjpnZXRCdW5kbGVQb3N0QWNjZXNzKCk7CgkJCgkJJHNlbGVjdGVkVGFncyA9ICRwcmV2aWV3T2JqLT5nZXRCdW5kbGVzKCk7CgkJCgkJJHNlbCA9IGFycmF5KCk7CgkJaWYoaXNfYXJyYXkoJHNlbGVjdGVkVGFncykpCgkJewoJCQlmb3JlYWNoKCRzZWxlY3RlZFRhZ3MgYXMgJHRhZykKCQkJewoJCQkJaWYoIWVtcHR5KCR0YWcpKXsKCQkJCQkkc2VsWyR0YWddID0gJHRhZzsKCQkJCX0KCQkJfQkKCQl9CgkJaWYoaXNfYXJyYXkoJG1hdCkpCgkJewoJCQlmb3JlYWNoKCRtYXQgYXMgJGtleT0+JHYpCgkJCXsKCQkJCWlmKCFlbXB0eSgka2V5KSl7CgkJCQkJJHNlbFska2V5XSA9JHY7CgkJCQl9CgkJCX0KCQl9CgkJJGluZm8tPmNvdW50X3RhZ3MgPSBjb3VudCgkYXQpOwoJCSRpbmZvLT5jb3VudF9hcHBsaWVkID1jb3VudCgkc2VsKTsKCQkkaW5mby0+bWVtYmVyX3R5cGVfaWQgPSAkcHJldmlld09iai0+Z2V0TWVtYmVyc2hpcElkKCk7CgkJCgkJJGluZm8tPmFjY2Vzc1RhZ3MgPSBNTV9IdG1sVXRpbHM6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGF0LCAkc2VsLCRtYXQpOwoJCQoJCS8vZGF5cwoJCSRhY2Nlc3NfYXJyID0gYXJyYXkoCgkJCSdtZW1iZXJfdHlwZSc9PmFycmF5KCRwcmV2aWV3T2JqLT5nZXRNZW1iZXJzaGlwSWQoKSksCgkJCSdhY2Nlc3NfdGFnJz0+JHNlbCwKCQkpOwoJCSRpbmZvLT5kYXlzID0gc2VsZjo6Z2V0RGF5c09wdGlvbnMoJGFjY2Vzc19hcnIsICRwcmV2aWV3T2JqLT5nZXREYXlzKCkpOwoJCQoJCWVjaG8gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9wcmV2aWV3LnBocCIsICRpbmZvKTsKCX0KCQoJLyoKCSAqIE5lZWRzIHRvIHJldHVybiBwcmUtc2VsZWN0ZWQgYnVuZGxlcyAoaWYgYW55KQoJICogTmVlZHMgdG8gcmV0dXJuIGRheXMgYXNzb2NpYXRlZCB3aXRoIGJ1bmRsZXMgKGlmIGFueSkKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoJHBvc3QpCgl7CgkJaWYoIWlzc2V0KCRwb3N0WyJtZW1iZXJfdHlwZV9pZCJdKSB8fCAoaXNzZXQoJHBvc3RbIm1lbWJlcl90eXBlX2lkIl0pICYmIGludHZhbCgkcG9zdFsibWVtYmVyX3R5cGVfaWQiXSk8PTAgJiYgJHBvc3RbIm1lbWJlcl90eXBlX2lkIl0hPSJub25lIikpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJJbnZhbGlkIE1lbWJlcnNoaXAgTGV2ZWwgSUQhIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRtZW1iZXJUeXBlID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkcG9zdFsibWVtYmVyX3R5cGVfaWQiXSk7CgkJaWYoJG1lbWJlclR5cGUtPmdldElkKCk+MCkKCQl7CQoJCQkkYXQgPSBNTV9CdW5kbGU6OmdldEJ1bmRsZVBvc3RBY2Nlc3MoKTsKCQkJJG1hdCA9ICRtZW1iZXJUeXBlLT5nZXRCdW5kbGVzKCk7CgkJCSRhY2Nlc3NUYWdzID0gTU1fSHRtbFV0aWxzOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRhdCwgJG1hdCwgJG1hdCk7CgkJCQoJCQkvL2RheXMKCQkJJGFjY2Vzc19hcnIgPSBhcnJheSgKCQkJCSdtZW1iZXJfdHlwZSc9PmFycmF5KCRwb3N0WyJtZW1iZXJfdHlwZV9pZCJdKSwKCQkJCSdhY2Nlc3NfdGFnJz0+YXJyYXlfa2V5cygkbWF0KSwKCQkJKTsKCQkJJGRheXMgPSBzZWxmOjpnZXREYXlzT3B0aW9ucygkYWNjZXNzX2Fycik7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoYXJyYXkoJ2FjY2Vzc190YWdzJz0+JGFjY2Vzc1RhZ3MsJ2RheXMnPT4kZGF5cykpOwoJCX0KCQllbHNlIGlmKCRwb3N0WyJtZW1iZXJfdHlwZV9pZCJdID09ICJub25lIil7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoYXJyYXkoJ2FjY2Vzc190YWdzJz0+IiIsJ2RheXMnPT4wKSk7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgTWVtYmVyc2hpcCBMZXZlbCBJRCEiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZ2V0RGF5c09wdGlvbnMoJGFjY2Vzc19hcnIsICRzZWxlY3RlZD1udWxsKQoJewoJCWlmKCFpc19hcnJheSgkYWNjZXNzX2FycikpCgkJCXJldHVybiAiIjsgCgkJCgkJJGFsbERheXMgPSBhcnJheSgpOwkKCQkvKgoJCSAqICdtZW1iZXJfdHlwZScgaXMgYSBhcnJheSBvZiBpZCdzIHdoaWxlICdhY2Nlc3NfdGFnJyBpcyBpZD0+bmFtZSB2YWx1ZXMKCQkgKiAKCQkgKiBleC4gCgkJICogCgkJICogKEpzb24gRW5jb2RlZCByZXN1bHQgc2V0IG9mIGFjY2Vzc19hcnIpCgkJICogeyJtZW1iZXJfdHlwZSI6WyIzIl0sImFjY2Vzc190YWciOnsiMSI6Ik1ZIEJVTkRMRSBOQU1FIn19CgkJICovCgkJZm9yZWFjaCgkYWNjZXNzX2FyciBhcyAkdHlwZT0+JGlkT2JqKQoJCXsKCQkJZm9yZWFjaCgkaWRPYmogYXMgJGlkPT4kdmFsKXsgCgkJCQlpZigkdHlwZT09Im1lbWJlcl90eXBlIil7CgkJCQkJJGFsbERheXNbXSA9IE1NX1Byb3RlY3RlZENvbnRlbnRFbmdpbmU6OmdldFBvc3REYXlzKCR0eXBlLCAkdmFsKTsKCQkJCX0KCQkJCWVsc2V7CgkJCQkJJGFsbERheXNbXSA9IE1NX1Byb3RlY3RlZENvbnRlbnRFbmdpbmU6OmdldFBvc3REYXlzKCR0eXBlLCAkaWQpOwoJCQkJfSAKCQkJfQoJCX0KCQkKCQkkZGF5c0FyciA9IGFycmF5KCk7CgkJJGRheXNBcnJbMF0gPSAwOwoJCWZvcmVhY2goJGFsbERheXMgYXMgJGRheXMpCgkJewoJCQlmb3JlYWNoKCRkYXlzIGFzICRkYXkpCgkJCQkkZGF5c0FyclskZGF5XSA9ICRkYXk7CgkJfSAKCQlrc29ydCgkZGF5c0Fycik7CgkJcmV0dXJuIE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkZGF5c0FyciwgJHNlbGVjdGVkKTsKCX0KCQoJLyoKCSAqIFRoaXMgc2hvdWxkIGFwcGVuZCBleHRyYSBkYXlzIChpZiBhbnkpCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gY2hhbmdlQnVuZGxlcygkcG9zdCkKCXsKCQlpZighaXNzZXQoJHBvc3RbInByZXZpZXdfYWNjZXNzX3RhZ3MiXSkgfHwgKGlzc2V0KCRwb3N0WyJwcmV2aWV3X2FjY2Vzc190YWdzIl0pICYmIGVtcHR5KCRwb3N0WyJwcmV2aWV3X2FjY2Vzc190YWdzIl0pKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJaWYoIWlzc2V0KCRwb3N0WyJtZW1iZXJfdHlwZV9pZCJdKSB8fCAoaXNzZXQoJHBvc3RbIm1lbWJlcl90eXBlX2lkIl0pICYmIGludHZhbCgkcG9zdFsibWVtYmVyX3R5cGVfaWQiXSk8PTApKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBNZW1iZXJzaGlwIExldmVsIElEISIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkYWNjZXNzVGFncyA9IGV4cGxvZGUoIiwiLCAkcG9zdFsicHJldmlld19hY2Nlc3NfdGFncyJdKTsKCQkgCgkJJHNlbCA9IGFycmF5KCk7CgkJZm9yZWFjaCgkYWNjZXNzVGFncyBhcyAkdGFnKQoJCXsKCQkJJHNlbFskdGFnXSA9ICR0YWc7CgkJfQoJCQoJCS8vZGF5cwoJCSRhY2Nlc3NfYXJyID0gYXJyYXkoCgkJCSdtZW1iZXJfdHlwZSc9PmFycmF5KCRwb3N0WyJtZW1iZXJfdHlwZV9pZCJdKSwKCQkJJ2FjY2Vzc190YWcnPT4kYWNjZXNzVGFncywKCQkpOwoJCSRkYXlzID0gc2VsZjo6Z2V0RGF5c09wdGlvbnMoJGFjY2Vzc19hcnIpOwoJCQoJCSRpbmZvID0gbmV3IHN0ZENsYXNzKCk7CgkJJGF0ID0gTU1fQnVuZGxlOjpnZXRCdW5kbGVQb3N0QWNjZXNzKCk7CgkJJG1lbWJlclR5cGUgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRwb3N0WyJtZW1iZXJfdHlwZV9pZCJdKTsKCQkkbWF0ID0gJG1lbWJlclR5cGUtPmdldEJ1bmRsZXMoKTsKCQlmb3JlYWNoKCRtYXQgYXMgJGs9PiR2KQoJCXsKCQkJJHNlbFska109JHY7CgkJfQoJCSRhY2Nlc3NUYWdzID0gTU1fSHRtbFV0aWxzOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRhdCwgJHNlbCwgJG1hdCk7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShhcnJheSgnYWNjZXNzX3RhZ3MnPT4kYWNjZXNzVGFncywnZGF5cyc9PiRkYXlzKSk7Cgl9CgkKfQ==', 0, '2018-11-21 06:38:54'),
(103, 'aweberserviceprovider', 'LyoqCiAqIE1NX0FXZWJlclNlcnZpY2VQcm92aWRlcgogKgogKiBQcm92aWRlcyBzcGVjaWZpYyBBV2ViZXIgaW5mb3JtYXRpb24gb3IgaW1wbGVtZW50aW5nIE9BdXRoLgogKiBAdXNlcyBNTV9PQXV0aFNlcnZpY2VQcm92aWRlcgogKiBAcGFja2FnZQogKiBAdmVyc2lvbiAkaWQkCiAqLwpjbGFzcyBNTV9BV2ViZXJTZXJ2aWNlUHJvdmlkZXIgaW1wbGVtZW50cyBNTV9PQXV0aFNlcnZpY2VQcm92aWRlciB7CgogICAgLyoqCiAgICAgKiBAdmFyIFN0cmluZyBMb2NhdGlvbiBmb3IgQVBJIGNhbGxzCiAgICAgKi8KICAgIHB1YmxpYyAkYmFzZVVyaSA9ICdodHRwczovL2FwaS5hd2ViZXIuY29tLzEuMCc7CgogICAgLyoqCiAgICAgKiBAdmFyIFN0cmluZyBMb2NhdGlvbiB0byByZXF1ZXN0IGFuIGFjY2VzcyB0b2tlbgogICAgICovCiAgICBwdWJsaWMgJGFjY2Vzc1Rva2VuVXJsID0gJ2h0dHBzOi8vYXV0aC5hd2ViZXIuY29tLzEuMC9vYXV0aC9hY2Nlc3NfdG9rZW4nOwoKICAgIC8qKgogICAgICogQHZhciBTdHJpbmcgTG9jYXRpb24gdG8gYXV0aG9yaXplIGFuIEFwcGxpY2F0aW9uCiAgICAgKi8KICAgIHB1YmxpYyAkYXV0aG9yaXplVXJsID0gJ2h0dHBzOi8vYXV0aC5hd2ViZXIuY29tLzEuMC9vYXV0aC9hdXRob3JpemUnOwoKICAgIC8qKgogICAgICogQHZhciBTdHJpbmcgTG9jYXRpb24gdG8gcmVxdWVzdCBhIHJlcXVlc3QgdG9rZW4KICAgICAqLwogICAgcHVibGljICRyZXF1ZXN0VG9rZW5VcmwgPSAnaHR0cHM6Ly9hdXRoLmF3ZWJlci5jb20vMS4wL29hdXRoL3JlcXVlc3RfdG9rZW4nOwoKCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0QmFzZVVyaSgpIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmJhc2VVcmk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHJlbW92ZUJhc2VVcmkoJHVybCkgewogICAgICAgIHJldHVybiBzdHJfcmVwbGFjZSgkdGhpcy0+Z2V0QmFzZVVyaSgpLCAnJywgJHVybCk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuVXJsKCkgewogICAgICAgIHJldHVybiAkdGhpcy0+YWNjZXNzVG9rZW5Vcmw7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGdldEF1dGhvcml6ZVVybCgpIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmF1dGhvcml6ZVVybDsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0UmVxdWVzdFRva2VuVXJsKCkgewogICAgICAgIHJldHVybiAkdGhpcy0+cmVxdWVzdFRva2VuVXJsOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRBdXRoVG9rZW5Gcm9tVXJsKCkgeyByZXR1cm4gJyc7IH0KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyRGF0YSgpIHsgcmV0dXJuICcnOyB9Cgp9Cgo=', 0, '2018-11-21 06:38:54'),
(104, 'cookies', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0Nvb2tpZXMKewoJcHVibGljIHN0YXRpYyAkQ09PS0lFX1BSRUZJWCA9ICJtbV9jb29raWVfIjsKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzZXRDb29raWVzKCkKCXsKCQkkYWZmaWxpYXRlSWQgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BRkZJTElBVEUpOwoJCSRzdWJBZmZpbGlhdGVJZCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1NVQl9BRkZJTElBVEUpOwoJCSRsaWZlc3BhbiA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0FGRklMSUFURV9MSUZFU1BBTik7CgkJCgkJJGFmZmlsaWF0ZUFsaWFzZXMgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BRkZJTElBVEVfQUxJQVMpOwoJCQoJCWlmKCFlbXB0eSgkYWZmaWxpYXRlQWxpYXNlcykpCgkJewoJCQkkYWZmaWxpYXRlQWxpYXNlcyA9IGV4cGxvZGUoIiwiLCAkYWZmaWxpYXRlQWxpYXNlcyk7CgkJCQoJCQlmb3IoJGkgPSAwOyAkaSA8IGNvdW50KCRhZmZpbGlhdGVBbGlhc2VzKTsgJGkrKykKCQkJewoJCQkJJGFmZmlsaWF0ZUFsaWFzZXNbJGldID0gdHJpbSgkYWZmaWxpYXRlQWxpYXNlc1skaV0pOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSRhZmZpbGlhdGVBbGlhc2VzID0gYXJyYXkoKTsKCQl9CgkJCgkJJHN1YkFmZmlsaWF0ZUFsaWFzZXMgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9TVUJfQUZGSUxJQVRFX0FMSUFTKTsKCQkKCQlpZighZW1wdHkoJHN1YkFmZmlsaWF0ZUFsaWFzZXMpKQoJCXsKCQkJJHN1YkFmZmlsaWF0ZUFsaWFzZXMgPSBleHBsb2RlKCIsIiwgJHN1YkFmZmlsaWF0ZUFsaWFzZXMpOwoJCQkKCQkJZm9yKCRpID0gMDsgJGkgPCBjb3VudCgkc3ViQWZmaWxpYXRlQWxpYXNlcyk7ICRpKyspCgkJCXsKCQkJCSRzdWJBZmZpbGlhdGVBbGlhc2VzWyRpXSA9IHRyaW0oJHN1YkFmZmlsaWF0ZUFsaWFzZXNbJGldKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkc3ViQWZmaWxpYXRlQWxpYXNlcyA9IGFycmF5KCk7CgkJfQoJCQoJCS8vIGdldCBhZmZpbGlhdGUgdHJhY2tpbmcgSURzIGZyb20gYWN0aXZlIGFmZmlsaWF0ZSBwcm92aWRlcgoJCSRhZmZpbGlhdGVQcm92aWRlciA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmFjdG9yeTo6Z2V0QWN0aXZlUHJvdmlkZXIoKTsKCQkKCQlpZigkYWZmaWxpYXRlUHJvdmlkZXIpCgkJewoJCQkkcHJvdmlkZXJBZmZpbGlhdGVJZCA9ICRhZmZpbGlhdGVQcm92aWRlci0+Z2V0QWZmaWxpYXRlVHJhY2tpbmdJZCgpOwoJCQkkcHJvdmlkZXJTdWJhZmZpbGlhdGVJZCA9ICRhZmZpbGlhdGVQcm92aWRlci0+Z2V0U3ViYWZmaWxpYXRlVHJhY2tpbmdJZCgpOwoJCQkKCQkJaWYoIWVtcHR5KCRwcm92aWRlckFmZmlsaWF0ZUlkKSkKCQkJewoJCQkJJGFmZmlsaWF0ZUFsaWFzZXNbXSA9IHRyaW0oJHByb3ZpZGVyQWZmaWxpYXRlSWQpOwoJCQl9CgkJCQoJCQlpZighZW1wdHkoJHByb3ZpZGVyU3ViYWZmaWxpYXRlSWQpKQoJCQl7CgkJCQkkc3ViQWZmaWxpYXRlQWxpYXNlc1tdID0gdHJpbSgkcHJvdmlkZXJTdWJhZmZpbGlhdGVJZCk7CgkJCX0KCQl9CgkJCQoJCWlmKGludHZhbCgkbGlmZXNwYW4pID4gMCkgCgkJewoJCQkkZGF5cyA9IHRpbWUoKSArIDM2MDAgKiAyNCAqIGludHZhbCgkbGlmZXNwYW4pOwoJCQkKCQkJZm9yZWFjaCgkX0dFVCBhcyAka2V5PT4kdmFsdWUpCgkgICAgICAgIHsKCSAgICAgICAgCWlmKCFpc19hcnJheSgkdmFsdWUpKQoJICAgICAgICAJewoJCSAgICAgICAgCWlmKCgka2V5ID09ICRhZmZpbGlhdGVJZCkgfHwgKCRrZXkgPT0gJHN1YkFmZmlsaWF0ZUlkKSkKCQkgICAgICAgIAl7CgkJICAgICAgICAJCWlmKHNlbGY6OmRvU2V0QWZmaWxpYXRlVmFsdWUoJGtleSkpCgkJICAgICAgICAJCXsKCQkgICAgICAgIAkJCXNldGNvb2tpZShzZWxmOjokQ09PS0lFX1BSRUZJWC4ka2V5LCAkdmFsdWUsICRkYXlzLCAiLyIpOwoJCSAgICAgICAgCQl9CgkJICAgICAgICAJfQoJCSAgICAgICAgCWVsc2UgaWYoaW5fYXJyYXkoJGtleSwgJGFmZmlsaWF0ZUFsaWFzZXMpKQoJCSAgICAgICAgCXsKCQkgICAgICAgIAkJaWYoc2VsZjo6ZG9TZXRBZmZpbGlhdGVWYWx1ZSgkYWZmaWxpYXRlSWQpKQoJCSAgICAgICAgCQl7CgkJICAgICAgICAJCQlzZXRjb29raWUoc2VsZjo6JENPT0tJRV9QUkVGSVguJGFmZmlsaWF0ZUlkLCAkdmFsdWUsICRkYXlzLCAiLyIpOwoJCSAgICAgICAgCQl9CgkJICAgICAgICAJfQoJCSAgICAgICAgCWVsc2UgaWYoaW5fYXJyYXkoJGtleSwgJHN1YkFmZmlsaWF0ZUFsaWFzZXMpKQoJCSAgICAgICAgCXsKCQkgICAgICAgIAkJaWYoc2VsZjo6ZG9TZXRBZmZpbGlhdGVWYWx1ZSgkc3ViQWZmaWxpYXRlSWQpKQoJCSAgICAgICAgCQl7CgkJICAgICAgICAJCQlzZXRjb29raWUoc2VsZjo6JENPT0tJRV9QUkVGSVguJHN1YkFmZmlsaWF0ZUlkLCAkdmFsdWUsICRkYXlzLCAiLyIpOwoJCSAgICAgICAgCQl9CgkJICAgICAgICAJfQoJCSAgICAgICAgCWVsc2UKCQkgICAgICAgIAl7CgkJICAgICAgICAJCSRpbmZvT2JqID0gbmV3IHN0ZENsYXNzKCk7CgkJICAgICAgICAJCSRpbmZvT2JqLT5rZXkgPSAka2V5OwoJCSAgICAgICAgCQkkaW5mb09iai0+dmFsdWUgPSAkdmFsdWU7CgkJICAgICAgICAJCSRpbmZvT2JqLT5kYXlzID0gJGRheXM7CgkJICAgICAgICAJCQoJCSAgICAgICAgCQkkZG9TZXRDb29raWUgPSBhcHBseV9maWx0ZXJzKE1NX0ZpbHRlcnM6OiRTRVRfQ09PS0lFLCAkaW5mb09iaik7CgkJICAgICAgICAJCQoJCSAgICAgICAgCQlpZigkZG9TZXRDb29raWUgIT09IGZhbHNlKQoJCSAgICAgICAgCQl7CgkgICAgICAgIAkJCQlzZXRjb29raWUoc2VsZjo6JENPT0tJRV9QUkVGSVguJGtleSwgJHZhbHVlLCAkZGF5cywgIi8iKTsKCQkgICAgICAgIAkJfQoJCSAgICAgICAgCX0KCSAgICAgICAgCX0KCSAgICAgICAgfQoJCX0KCQkKCQlyZXR1cm4gdHJ1ZTsKCX0KCQoJLyoqCgkgKiBBZmZpbGlhdGUgY29va2llcyBzaG91bGQgb25seSBiZSBzZXQgaWYgdGhleSdyZSBub3Qgc2V0IGFscmVhZHkKCSAqIEBwYXJhbSBTdHJpbmcgJGtleSB0aGUga2V5IG9mIHRoZSBjb29raWUgdG8gc2V0CgkgKiBAcmV0dXJuIGJvb2xlYW4gcmV0dXJucyB0cnVlIGlmIGl0J3Mgb2sgdG8gc2V0IHRoZSBjb29raWUsIGZhbHNlIG90aGVyd2lzZQoJICovCglwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBkb1NldEFmZmlsaWF0ZVZhbHVlKCRrZXkpCgl7CgkJaWYoIWlzc2V0KCRfQ09PS0lFW3NlbGY6OiRDT09LSUVfUFJFRklYLiRrZXldKSB8fCAoaXNzZXQoJF9DT09LSUVbc2VsZjo6JENPT0tJRV9QUkVGSVguJGtleV0pICYmIGVtcHR5KCRfQ09PS0lFW3NlbGY6OiRDT09LSUVfUFJFRklYLiRrZXldKSkpCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvb2tpZSgka2V5KQoJewoJCSRhZmZpbGlhdGVJZCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0FGRklMSUFURSk7CgkJJHN1YkFmZmlsaWF0ZUlkID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfU1VCX0FGRklMSUFURSk7CgkJCgkJJGFmZmlsaWF0ZUFsaWFzZXMgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BRkZJTElBVEVfQUxJQVMpOwoJCQoJCWlmKCFlbXB0eSgkYWZmaWxpYXRlQWxpYXNlcykpCgkJewoJCQkkYWZmaWxpYXRlQWxpYXNlcyA9IGV4cGxvZGUoIiwiLCAkYWZmaWxpYXRlQWxpYXNlcyk7CgkJCQkKCQkJZm9yKCRpID0gMDsgJGkgPCBjb3VudCgkYWZmaWxpYXRlQWxpYXNlcyk7ICRpKyspCgkJCXsKCQkJCSRhZmZpbGlhdGVBbGlhc2VzWyRpXSA9IHRyaW0oJGFmZmlsaWF0ZUFsaWFzZXNbJGldKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJJGFmZmlsaWF0ZUFsaWFzZXMgPSBhcnJheSgpOwoJCX0KCQkKCQkkc3ViQWZmaWxpYXRlQWxpYXNlcyA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1NVQl9BRkZJTElBVEVfQUxJQVMpOwoJCQoJCWlmKCFlbXB0eSgkc3ViQWZmaWxpYXRlQWxpYXNlcykpCgkJewoJCQkkc3ViQWZmaWxpYXRlQWxpYXNlcyA9IGV4cGxvZGUoIiwiLCAkc3ViQWZmaWxpYXRlQWxpYXNlcyk7CgkJCQkKCQkJZm9yKCRpID0gMDsgJGkgPCBjb3VudCgkc3ViQWZmaWxpYXRlQWxpYXNlcyk7ICRpKyspCgkJCXsKCQkJCSRzdWJBZmZpbGlhdGVBbGlhc2VzWyRpXSA9IHRyaW0oJHN1YkFmZmlsaWF0ZUFsaWFzZXNbJGldKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJJHN1YkFmZmlsaWF0ZUFsaWFzZXMgPSBhcnJheSgpOwoJCX0KCQkKCQkvLyBnZXQgYWZmaWxpYXRlIHRyYWNraW5nIElEcyBmcm9tIGFjdGl2ZSBhZmZpbGlhdGUgcHJvdmlkZXIKCQkkYWZmaWxpYXRlUHJvdmlkZXIgPSBNTV9BZmZpbGlhdGVQcm92aWRlckZhY3Rvcnk6OmdldEFjdGl2ZVByb3ZpZGVyKCk7CgkJCgkJaWYoJGFmZmlsaWF0ZVByb3ZpZGVyKQoJCXsKCQkJJHByb3ZpZGVyQWZmaWxpYXRlSWQgPSAkYWZmaWxpYXRlUHJvdmlkZXItPmdldEFmZmlsaWF0ZVRyYWNraW5nSWQoKTsKCQkJJHByb3ZpZGVyU3ViYWZmaWxpYXRlSWQgPSAkYWZmaWxpYXRlUHJvdmlkZXItPmdldFN1YmFmZmlsaWF0ZVRyYWNraW5nSWQoKTsKCQkJCQoJCQlpZighZW1wdHkoJHByb3ZpZGVyQWZmaWxpYXRlSWQpKQoJCQl7CgkJCQkkYWZmaWxpYXRlQWxpYXNlc1tdID0gdHJpbSgkcHJvdmlkZXJBZmZpbGlhdGVJZCk7CgkJCX0KCQkJCQoJCQlpZighZW1wdHkoJHByb3ZpZGVyU3ViYWZmaWxpYXRlSWQpKQoJCQl7CgkJCQkkc3ViQWZmaWxpYXRlQWxpYXNlc1tdID0gdHJpbSgkcHJvdmlkZXJTdWJhZmZpbGlhdGVJZCk7CgkJCX0KCQl9CgkJCgkJLy8gV2hlbiBjb29raWUgdmFsdWVzIGFyZSBzZXQgdGhlIHBhZ2UgbmVlZHMgdG8gYmUgcmVmcmVzaGVkIGluIG9yZGVyIGZvciB0aGUgdmFsdWVzIHRvIGJlIHJlYWQuCgkJLy8gVGhpcyBpc24ndCBzYXRpc2ZhY3RvcnkgZm9yIHRoZSBuZWVkcyBvZiBNZW1iZXJNb3VzZS4gV2Ugd2FudCB2YWx1ZXMgcGFzc2VkIGZyb20gdGhlIHF1ZXJ5c3RyaW5nCgkJLy8gdG8gYmUgYXZhaWxhYmxlIGltbWVkaWF0ZWx5IHRvIGRyaXZlIGR5bmFtaWMgY29udGVudCBnZW5lcmF0aW9uLiBGb3IgYWZmaWxpYXRlIGFuZCBzdWItYWZmaWxpYXRlCgkJLy8gcGFyYW1zLCB0aGUgdmFsdWVzIHN0b3JlZCBpbiB0aGUgY29va2llcyB0YWtlIHByZWNlZGVuY2UuIEZvciBhbGwgb3RoZXIgdmFsdWVzLCB0aGUgdmFsdWUgc3RvcmVkCgkJLy8gaW4gdGhlIHF1ZXJ5c3RyaW5nIHRha2VzIHByZWNlbmRlbmNlLiAKCQlpZigoJGtleSA9PSAkYWZmaWxpYXRlSWQpIHx8ICgka2V5ID09ICRzdWJBZmZpbGlhdGVJZCkpCgkJewoJCQkkYWZmVmFsdWUgPSAiIjsKCQkJCgkJCS8vIHRyeSBnZXR0aW4gYWZmaWxpYXRlIHZhbHVlIGZyb20gY29va2llcy4uLgoJCQlpZihpc3NldCgkX0NPT0tJRVtzZWxmOjokQ09PS0lFX1BSRUZJWC4ka2V5XSkpCgkJCXsKCQkJCSRhZmZWYWx1ZSA9ICRfQ09PS0lFW3NlbGY6OiRDT09LSUVfUFJFRklYLiRrZXldOwoJCQl9CgkJCQoJCQkvLyBpZiBhZmZpbGlhdGUgdmFsdWUgaXMgc3RpbGwgZW1wdHksIGNoZWNrIHRoZSBxdWVyeXN0cmluZwoJCQlpZigkYWZmVmFsdWUgPT0gIiIgJiYgaXNzZXQoJF9HRVRbJGtleV0pKQoJCQl7CgkJCQkkYWZmVmFsdWUgPSAkX0dFVFska2V5XTsKCQkJfQoJCQkKCQkJLy8gaWYgYWZmaWxpYXRlIHZhbHVlIGlzIHN0aWxsIGVtcHR5LCBjaGVjayB0aGUgYWxpYXNlcwoJCQlpZigkYWZmVmFsdWUgPT0gIiIpCgkJCXsKCQkJCSRhbGlhc2VzID0gKCRrZXkgPT0gJGFmZmlsaWF0ZUlkKSA/ICRhZmZpbGlhdGVBbGlhc2VzIDogJHN1YkFmZmlsaWF0ZUFsaWFzZXM7CgkJCQkKCQkJCWZvcmVhY2goJGFsaWFzZXMgYXMgJGFsaWFzKQoJCQkJewoJCQkJCWlmKGlzc2V0KCRfR0VUWyRhbGlhc10pKQoJCQkJCXsKCQkJCQkJJGFmZlZhbHVlID0gJF9HRVRbJGFsaWFzXTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCXJldHVybiAkYWZmVmFsdWU7CgkJfQoJCWVsc2UgCgkJewoJCQkkY29va2llVmFsdWUgPSAiIjsKCQkJCgkJCWlmKGlzc2V0KCRfR0VUWyRrZXldKSkKCQkJewoJCQkJJGNvb2tpZVZhbHVlID0gJF9HRVRbJGtleV07CgkJCX0KCQkJZWxzZSBpZihpc3NldCgkX0NPT0tJRVtzZWxmOjokQ09PS0lFX1BSRUZJWC4ka2V5XSkpIAoJCQl7CgkJCQkkY29va2llVmFsdWUgPSAkX0NPT0tJRVtzZWxmOjokQ09PS0lFX1BSRUZJWC4ka2V5XTsKCQkJfQoJCQkKCQkJcmV0dXJuICRjb29raWVWYWx1ZTsKCQl9CgkJCgkJcmV0dXJuICIiOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFmZmlsaWF0ZVZhbHVlKCkKCXsKCQlyZXR1cm4gc2VsZjo6Z2V0Q29va2llKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0FGRklMSUFURSkpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFN1YkFmZmlsaWF0ZVZhbHVlKCkKCXsKCQlyZXR1cm4gc2VsZjo6Z2V0Q29va2llKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1NVQl9BRkZJTElBVEUpKTsKCX0KfQo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(105, 'reportvisualelement', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fUmVwb3J0VmlzdWFsRWxlbWVudAp7Cglwcm90ZWN0ZWQgJGNvbnRhaW5lciA9ICIiOwoJCgkvL2RhdGEgbW9kZWwKCXByb3RlY3RlZCAkbW9kZWw7CgkKCS8vcmVuZGVyaW5nIGRpcmVjdGl2ZXMKCXByb3RlY3RlZCAkZGlyZWN0aXZlczsKCQoJLy9hIHNoYXJlZCBwb29sIG9mIFJHQiBjb2xvciB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB0byBjb2xvciBjb21wb25lbnRzIG9mIGltcGxlbWVudGluZyBncmFwaHMgKGllLCBiYXJzIGluIGJhciBjaGFydCwgbGluZXMgaW4gbGluZWNoYXJ0KTsKCXByb3RlY3RlZCAkY29sb3JQb29sID0gYXJyYXkoIiM2MjlBQzgiLCIjQjNDNjQxIiwiIzU5QjZCQSIsIiNENzM2NTciLCIjRUNEMTM3IiwiI0MxMjYzMiIsIiNEQTYxOTYiLCIjNDZDN0RBIiwKCQkJIiM3MEJGM0IiLCIjRDhDMjQ5IiwiIzU1NjI3MCIsIiM0RUNFQzQiLCIjQzdGNDY0IiwiI0ZGNkI2QiIsIiNDNDRENTgiLCIjRDE2NTVEIiwKCQkJIiM2MzdCQjYiLCIjMDAwMEZGIiwiI0ZGRkYwMCIsIiNGRjAwRkYiLCIjQzBDMEMwIiwiI0NDMDAzMyIpOwoJCgkKCS8qKgoJICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB0aGUgY2xhc3MgcmVwcmVzZW50aW5nIHRoZSB2aXN1YWwgZWxlbWVudAoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRjb250YWluZXIgVGhlIGlkIG9mIHRoZSBjb250YWluZXIgKHVzdWFsbHkgYSBkaXYpIHRoYXQgdGhlIGVsZW1lbnQgaXMgYmVpbmcgcmVuZGVyZWQgaW50bwoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGNvbnRhaW5lcj0iIiwgJGRpcmVjdGl2ZXM9IiIpCgl7CgkJaWYgKCFlbXB0eSgkY29udGFpbmVyKSkKCQl7CgkJCSR0aGlzLT5jb250YWluZXIgPSAkY29udGFpbmVyOwoJCX0KCiAgICAgICAgaWYgKCFlbXB0eSgkZGlyZWN0aXZlcykgJiYgaXNfYXJyYXkoJGRpcmVjdGl2ZXMpKQogICAgICAgIHsKICAgICAgICAgICAgJHRoaXMtPnNldERpcmVjdGl2ZXMoJGRpcmVjdGl2ZXMpOwogICAgICAgIH0KCX0KCQoJCgkvKioKCSAqIAoJICogQHBhcmFtICRtb2RlbCBUaGUgbW9kZWwgY2xhc3MgYXBwcm9wcmlhdGUgZm9yIHRoZSB2aXN1YWwgZWxlbWVudAoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0TW9kZWwoJG1vZGVsKQoJewoJCSR0aGlzLT5tb2RlbCA9ICRtb2RlbDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TW9kZWwoKQoJewoJCXJldHVybiAkdGhpcy0+bW9kZWw7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRKYXZhc2NyaXB0RGVwZW5kZW5jaWVzKCkKCXsKCQlyZXR1cm4gYXJyYXkoKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENTU0RlcGVuZGVuY2llcygpCgl7CgkJcmV0dXJuIGFycmF5KCk7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXREZXBlbmRlbmNpZXMoJGVsZW1lbnROYW1lKQoJewoJCS8vVE9ETzogRWxlbWVudG5hbWUgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXIsIGJlY2F1c2UgaW4gPCA1LjIgdGhlcmUgaXMgbm8gd2F5IHRvIHJlZmVyZW5jZSB0aGUgZGVwZW5kZW5jeSBtZXRob2RzIGluIHRoZSBjYWxsZWQgY2xhc3MsIAoJCS8vd2hpY2ggd2lsbCBiZSBhIHN1YmNsYXNzIG9mIHRoaXMgb25lLiBXaGVuIHN1cHBvcnQgZm9yIFBIUCA1LjIgaXMgZHJvcHBlZCwgY2xlYW4gdGhpcyB1cCB1c2luZyBsYXRlIHN0YXRpYyBiaW5kaW5nCgkJCgkJJGNzc0RlcGVuZGVuY2llcyA9IGNhbGxfdXNlcl9mdW5jKGFycmF5KCRlbGVtZW50TmFtZSwiZ2V0Q1NTRGVwZW5kZW5jaWVzIikpOwoJCSRqc0RlcGVuZGVuY2llcyAgPSBjYWxsX3VzZXJfZnVuYyhhcnJheSgkZWxlbWVudE5hbWUsImdldEphdmFzY3JpcHREZXBlbmRlbmNpZXMiKSk7CgkJcmV0dXJuIGFycmF5KCJjc3MiPT4kY3NzRGVwZW5kZW5jaWVzLAoJCQkJCSAianMiID0+JGpzRGVwZW5kZW5jaWVzCgkJKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGlyZWN0aXZlcygpCgl7CgkJcmV0dXJuICR0aGlzLT5kaXJlY3RpdmVzOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREaXJlY3RpdmVzKCRkaXJlY3RpdmVzKQoJewoJCSR0aGlzLT5kaXJlY3RpdmVzID0gJGRpcmVjdGl2ZXM7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldENvbG9yRm9yUG9zaXRpb24oJHBvc2l0aW9uKQoJewoJCSRwb3NpdGlvbiA9IGludHZhbCgkcG9zaXRpb24pOwoJCWlmICghaXNzZXQoJHRoaXMtPmNvbG9yUG9vbFskcG9zaXRpb25dKSkKCQl7CgkJCSRwb3NpdGlvbiA9IHJhbmQoMCxjb3VudCgkdGhpcy0+Y29sb3JQb29sKS0xKTsKCQl9CgkKCQlyZXR1cm4gJHRoaXMtPmNvbG9yUG9vbFskcG9zaXRpb25dOwoJfQoJCn0=', 0, '2018-11-21 06:38:54'),
(106, 'orderrequest', 'LyoqCiAqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIAogKiBNTV9PcmRlclJlcXVlc3QgaXMgcmVzcG9uc2libGUgZm9yIHByb2Nlc3NpbmcgcmVxdWVzdCBkYXRhLCBzdWJtaXR0aW5nIGEgcmVxdWVzdCBhbmQgaGFuZGxpbmcKICogdGhlIHJlc3VsdC4gQSBzdWJjbGFzcyBpcyBjcmVhdGVkIGZvciBlYWNoIG1ldGhvZCB0aGF0IGNhbiBiZSB1c2VkIGZvciBjcmVhdGluZyBvcmRlciAKICogcmVxdWVzdHMuIEZvciBleGFtcGxlLCByZXF1ZXN0cyBjYW4gY29tZSBmcm9tIGEgY2hlY2tvdXQgZm9ybSwgYSBmcmVlIG1lbWJlciB3ZWJmb3JtLCBhbiBBUEkgCiAqIGNhbGwsIGV0Yy4KICovCgpjbGFzcyBNTV9PcmRlclJlcXVlc3QKewoJcHJvdGVjdGVkICRyZXF1ZXN0RGF0YSA9IGFycmF5KCk7Cglwcm90ZWN0ZWQgJGlzQXBpUmVxdWVzdCA9IGZhbHNlOwoJcHJvdGVjdGVkICRzdGF0ZTsKCQoJCgkvKioKCSAqIFN0b3JlcyB0aGUgcmVxdWVzdCBkYXRhIGFuZCBtYWtlcyBhIGNhbGwgdG8gcHJvY2Vzc1JlcXVlc3QgdG8gcHJvY2VzcyB0aGUgZGF0YQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3REYXRhIGRhdGEgZnJvbSB0aGUgc291cmNlIG9mIHRoZSBvcmRlciByZXF1ZXN0CgkgKiBAcGFyYW0gYm9vbGVhbiAkaXNBcGlSZXF1ZXN0IGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYW4gQVBJIHJlcXVlc3QgCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcmVxdWVzdERhdGEsICRpc0FwaVJlcXVlc3Q9ZmFsc2UpCgl7CgkJJHRoaXMtPnJlcXVlc3REYXRhID0gJHJlcXVlc3REYXRhOwoJCSR0aGlzLT5zdGF0ZSA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCSR0aGlzLT5pc0FwaVJlcXVlc3QgPSAkaXNBcGlSZXF1ZXN0OwoJCQoJCSR0aGlzLT5wcm9jZXNzUmVxdWVzdCgpOwoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgdW5kZXJzdGFuZHMgaG93IHRvIHByb2Nlc3MgdGhlIGRhdGEgZnJvbSBhIHNwZWNpZmljIHNvdXJjZS4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NSZXF1ZXN0KCkgeyB9CgkKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCB1bmRlcnN0YW5kcyB3aGF0IGFjdGlvbnMgdG8gdGFrZSB0byBzdWJtaXQgdGhlIHJlcXVlc3QuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdWJtaXRSZXF1ZXN0KCkgeyB9CgkKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCB1bmRlcnN0YW5kcyBob3cgdG8gaGFuZGxlIHN1Y2Nlc3MgYW5kIGVycm9yIGNvbmRpdGlvbnMgdGhhdCBjYW4KCSAqIG9jY3VyIHdoaWxlIHByb2Nlc3Npbmcgb3Igc3VibWl0dGluZyB0aGUgcmVxdWVzdC4KCSAqIAoJICogQHBhcmFtICRyZXN1bHQgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgc3VibWl0dGVkIHJlcXVlc3QKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdCgkcmVzdWx0KSB7IH0KCQp9Cg==', 0, '2018-11-21 06:38:54'),
(107, 'myaccountview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX015QWNjb3VudFZpZXcgZXh0ZW5kcyBNTV9Mb2dnZWRJblVzZXJWaWV3CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1VQREFURV9BQ0NPVU5UX0RFVEFJTFMgPSAidXBkYXRlQWNjb3VudERldGFpbHMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fVVBEQVRFX0JJTExJTkdfSU5GTyA9ICJ1cGRhdGVCaWxsaW5nSW5mbyI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9VUERBVEVfU0hJUFBJTkdfSU5GTyA9ICJ1cGRhdGVTaGlwcGluZ0luZm8iOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0FOQ0VMX1NVQlNDUklQVElPTiA9ICJjYW5jZWxTdWJzY3JpcHRpb24iOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fVVBEQVRFX1NVQlNDUklQVElPTl9CSUxMSU5HID0gInVwZGF0ZVN1YnNjcmlwdGlvbkJpbGxpbmciOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fVU5MSU5LX1NPQ0lBTF9ORVRXT1JLID0gInVubGlua1NvY2lhbE5ldHdvcmsiOwoKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fVVBEQVRFX0FDQ09VTlRfREVUQUlMUzoKCQkJCQlyZXR1cm4gJHRoaXMtPnVwZGF0ZUFjY291bnREZXRhaWxzKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1VQREFURV9CSUxMSU5HX0lORk86CgkJCQkJcmV0dXJuICR0aGlzLT51cGRhdGVCaWxsaW5nSW5mbygkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9VUERBVEVfU0hJUFBJTkdfSU5GTzoKCQkJCQlyZXR1cm4gJHRoaXMtPnVwZGF0ZVNoaXBwaW5nSW5mbygkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9DQU5DRUxfU1VCU0NSSVBUSU9OOgoJCQkJCXJldHVybiAkdGhpcy0+Y2FuY2VsU3Vic2NyaXB0aW9uKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1VQREFURV9TVUJTQ1JJUFRJT05fQklMTElORzoKCQkJCQkkdmlldyA9IG5ldyBNTV9NZW1iZXJEZXRhaWxzVmlldygpOwoJCQkJCXJldHVybiAkdmlldy0+dXBkYXRlU3Vic2NyaXB0aW9uQmlsbGluZ0luZm8oJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fVU5MSU5LX1NPQ0lBTF9ORVRXT1JLOgoJCQkJCXJldHVybiAkdGhpcy0+dW5saW5rU29jaWFsTmV0d29yaygkcG9zdCk7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXByb3RlY3RlZCBmdW5jdGlvbiB1cGRhdGVBY2NvdW50RGV0YWlscygkcG9zdCkKCXsKCQkkdGhpc1VzZXJJZCA9IE1NX1VzZXI6OmdldEN1cnJlbnRXUFVzZXJJRCgpOwoJCQoJCWlmKGludHZhbCgkdGhpc1VzZXJJZCkhPT1mYWxzZSkKCQl7CgkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHRoaXNVc2VySWQpOwoJCQkJCgkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRlbmFibGVVc2VybmFtZUNoYW5nZSA9IChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9FTkFCTEVfVVNFUk5BTUVfQ0hBTkdFKSA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwoJCQkJCgkJCQkkdXNlci0+c2V0Rmlyc3ROYW1lKCRwb3N0WyJtbV9maXJzdF9uYW1lIl0pOwoJCQkJJHVzZXItPnNldExhc3ROYW1lKCRwb3N0WyJtbV9sYXN0X25hbWUiXSk7CgkJCQkkdXNlci0+c2V0RW1haWwoJHBvc3RbIm1tX2VtYWlsIl0pOwoJCQkJCgkJCQlpZigkZW5hYmxlVXNlcm5hbWVDaGFuZ2UpCgkJCQl7CgkJCQkJJHVzZXItPnNldFVzZXJuYW1lKCRwb3N0WyJtbV91c2VybmFtZSJdKTsKCQkJCX0KCQkJCQoJCQkJJHVzZXItPnNldFBob25lKCRwb3N0WyJtbV9waG9uZSJdKTsKCQoJCQkJaWYoaXNzZXQoJHBvc3RbIm1tX25ld19wYXNzd29yZCJdKSAmJiAkcG9zdFsibW1fbmV3X3Bhc3N3b3JkIl0gIT0gIiIpCgkJCQl7CgkJCQkJJHVzZXItPnNldFBhc3N3b3JkKCRwb3N0WyJtbV9uZXdfcGFzc3dvcmQiXSk7CgkJCQl9CgkJCQkKCQkJCWZvcmVhY2goJHBvc3QgYXMgJGs9PiR2KQoJCQkJewoJCQkJCWlmKHByZWdfbWF0Y2goIi8obW1fY3VzdG9tXykvIiwgJGspKQoJCQkJCXsKCQkJCQkJLy8gYnlwYXNzIHJhZGlvIGJ1dHRvbiBhbmQgY2hlY2tib3ggaGVscGVyIGZpZWxkcwoJCQkJCQlpZihzdHJwb3MoJGssICdoZWxwZXInKSA9PT0gZmFsc2UpCgkJCQkJCXsKCQkJCQkJCSRmaWVsZElkID0gcHJlZ19yZXBsYWNlKCIvW14wLTldKy8iLCAiIiwgJGspOwoJCQkJCQkJJHJlc3BvbnNlID0gJHVzZXItPnNldEN1c3RvbURhdGEoJGZpZWxkSWQsICR2KTsKCQkJCQkKCQkJCQkJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXNwb25zZSkpCgkJCQkJCQl7CgkJCQkJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJJHJlc3VsdCA9ICR1c2VyLT5jb21taXREYXRhKCk7CgkKCQkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiWW91ciBhY2NvdW50IHdhcyB1cGRhdGVkIHN1Y2Nlc3NmdWxseSIpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiAkcmVzdWx0OwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgdXBkYXRpbmcgeW91ciBhY2NvdW50LiBJbnZhbGlkIHVzZXIgSUQgJyIuJHBvc3RbInVzZXJJZCJdLiInIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgeW91ciBhY2NvdW50LiBVc2VyIElEIGlzIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHVwZGF0ZUJpbGxpbmdJbmZvKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJ1c2VySWQiXSkpCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRwb3N0WyJ1c2VySWQiXSk7CgkJCgkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSR1c2VyLT5zZXRCaWxsaW5nQWRkcmVzcygkcG9zdFsibW1fZmllbGRfYmlsbGluZ19hZGRyZXNzIl0pOwoJCQkJJHVzZXItPnNldEJpbGxpbmdDaXR5KCRwb3N0WyJtbV9maWVsZF9iaWxsaW5nX2NpdHkiXSk7CgkJCQkkdXNlci0+c2V0QmlsbGluZ1N0YXRlKCRwb3N0WyJtbV9maWVsZF9iaWxsaW5nX3N0YXRlIl0pOwoJCQkJJHVzZXItPnNldEJpbGxpbmdaaXBDb2RlKCRwb3N0WyJtbV9maWVsZF9iaWxsaW5nX3ppcCJdKTsKCQkJCSR1c2VyLT5zZXRCaWxsaW5nQ291bnRyeSgkcG9zdFsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0pOwoJCQkJCgkJCQkkcmVzdWx0ID0gJHVzZXItPmNvbW1pdERhdGEoKTsKCQoJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJCXsJCQkKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJZb3VyIGFjY291bnQgd2FzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Iik7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciB1cGRhdGluZyB5b3VyIGFjY291bnQuIEludmFsaWQgdXNlciBJRCAnIi4kcG9zdFsidXNlcklkIl0uIiciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciB5b3VyIGFjY291bnQuIFVzZXIgSUQgaXMgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gdXBkYXRlU2hpcHBpbmdJbmZvKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJ1c2VySWQiXSkpCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRwb3N0WyJ1c2VySWQiXSk7CgoJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkdXNlci0+c2V0U2hpcHBpbmdBZGRyZXNzKCRwb3N0WyJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIl0pOwoJCQkJJHVzZXItPnNldFNoaXBwaW5nQ2l0eSgkcG9zdFsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdKTsKCQkJCSR1c2VyLT5zZXRTaGlwcGluZ1N0YXRlKCRwb3N0WyJtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSJdKTsKCQkJCSR1c2VyLT5zZXRTaGlwcGluZ1ppcENvZGUoJHBvc3RbIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCJdKTsKCQkJCSR1c2VyLT5zZXRTaGlwcGluZ0NvdW50cnkoJHBvc3RbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXSk7CgkJCQkKCQkJCSRyZXN1bHQgPSAkdXNlci0+Y29tbWl0RGF0YSgpOwoKCQkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiWW91ciBhY2NvdW50IHdhcyB1cGRhdGVkIHN1Y2Nlc3NmdWxseSIpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiAkcmVzdWx0OwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgdXBkYXRpbmcgeW91ciBhY2NvdW50LiBJbnZhbGlkIHVzZXIgSUQgJyIuJHBvc3RbInVzZXJJZCJdLiInIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgdXBkYXRpbmcgeW91ciBhY2NvdW50LiBVc2VyIElEIGlzIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNhbmNlbFN1YnNjcmlwdGlvbigkcG9zdCkgCgl7CgkJaWYoaXNzZXQoJHBvc3RbIm1tX29yZGVyX2l0ZW1faWQiXSkpCgkJewoJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkcG9zdFsibW1fb3JkZXJfaXRlbV9pZCJdKTsKCQkJCgkJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQkJewoJCQkJJHZpZXcgPSBuZXcgTU1fTWVtYmVyRGV0YWlsc1ZpZXcoKTsKCQkJCXJldHVybiAkdmlldy0+Y2FuY2VsU3Vic2NyaXB0aW9uRm9yT3JkZXJJdGVtKCRvcmRlckl0ZW0pOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIE9yZGVyIEl0ZW0geyRwb3N0WyJtbV9vcmRlcl9pdGVtX2lkIl19IGlzIGludmFsaWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNhbmNlbGxpbmcgc3Vic2NyaXB0aW9uLiBPcmRlciBJdGVtIElEIGlzIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNob3dEaWFsb2coJHBvc3QpCgl7CgkJJGluZm8gPSBuZXcgc3RkQ2xhc3MoKTsKCQoJCWZvcmVhY2goJHBvc3QgYXMgJGtleT0+JHZhbHVlKQoJCXsKCQkJJGluZm8tPiRrZXkgPSAkdmFsdWU7CgkJfQoJCgkJaWYoIWlzc2V0KCRpbmZvLT5pZCkgfHwgIWlzc2V0KCRpbmZvLT5kaWFsb2dJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2hvdyBNeSBBY2NvdW50IGRpYWxvZy4gSUQgYW5kIG1vZHVsZSBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJc3dpdGNoKCRpbmZvLT5kaWFsb2dJZCkKCQl7CgkJCWNhc2UgIm1tLW15YWNjb3VudC1hY2NvdW50LWRldGFpbHMtZGlhbG9nIjoKCQkJCSRjcm50TW9kdWxlID0gIm15YWNjb3VudF9hY2NvdW50X2RldGFpbHMucGhwIjsKCQkJCWJyZWFrOwoJCQkKCQkJY2FzZSAibW0tbXlhY2NvdW50LWJpbGxpbmctaW5mby1kaWFsb2ciOgoJCQkJJGNybnRNb2R1bGUgPSAibXlhY2NvdW50X2JpbGxpbmdfaW5mby5waHAiOwoJCQkJYnJlYWs7CgkJCQoJCQljYXNlICJtbS1teWFjY291bnQtc2hpcHBpbmctaW5mby1kaWFsb2ciOgoJCQkJJGNybnRNb2R1bGUgPSAibXlhY2NvdW50X3NoaXBwaW5nX2luZm8ucGhwIjsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgIm1tLW15YWNjb3VudC1zdWJzY3JpcHRpb24taW5mby1kaWFsb2ciOgoJCQkJJGNybnRNb2R1bGUgPSAibXlhY2NvdW50X3N1YnNjcmlwdGlvbl9pbmZvLnBocCI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlICJtbS1teWFjY291bnQtc2hvdy1naWZ0LWxpbmstZGlhbG9nIjoKCQkJCSRjcm50TW9kdWxlID0gIm15YWNjb3VudF9zaG93X2dpZnRfbGluay5waHAiOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSAibW0tbXlhY2NvdW50LW9yZGVyLWhpc3RvcnktZGlhbG9nIjoKCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJGluZm8tPmlkKTsKCQkJCQoJCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkdmlldyA9IG5ldyBNTV9UcmFuc2FjdGlvbkhpc3RvcnlWaWV3KCk7CgkJCQkJJGRhdGFHcmlkID0gbmV3IE1NX0RhdGFHcmlkKG51bGwsICJkYXRlIiwgImRlc2MiKTsKCQkJCQkkZGF0YSA9ICR2aWV3LT5nZXRWaWV3RGF0YSgkdXNlci0+Z2V0SWQoKSwgJGRhdGFHcmlkKTsKCQkJCQkkcm93cyA9ICR2aWV3LT5nZW5lcmF0ZVJvd3MoJGRhdGEsIGZhbHNlKTsKCQkJCQkkZGF0YUdyaWQtPnNldFJvd3MoJHJvd3MpOwoJCQkJCSRkYXRhR3JpZC0+c2V0SGVhZGVycyhhcnJheSgiZm9yY2Utc2V0LWhlYWRlcnMiKSk7CgkJCQkJCQoJCQkJCWlmKGNvdW50KCRyb3dzKSA+IDApCgkJCQkJewoJCQkJCQlyZXR1cm4gJGRhdGFHcmlkLT5nZW5lcmF0ZUh0bWwoIm15YWNjb3VudF9vcmRlcmhpc3RvcnkuZGF0YWdyaWQucGhwIik7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCXJldHVybiAiPGVtPk5vIG9yZGVycyBwbGFjZWQ8L2VtPiI7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgdXNlciBJRCAneyRpbmZvLT5pZH0nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgIm1tLW15YWNjb3VudC1naWZ0LWhpc3RvcnktZGlhbG9nIjoKCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJGluZm8tPmlkKTsKCQkJCQoJCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkdmlldyA9IG5ldyBNTV9HaWZ0SGlzdG9yeVZpZXcoKTsKCQkJCQkkZGF0YUdyaWQgPSBuZXcgTU1fRGF0YUdyaWQobnVsbCwgImRhdGVfZ2lmdGVkIiwgImRlc2MiLCA1KTsKCQkJCQkkZGF0YSA9ICR2aWV3LT5nZXRWaWV3RGF0YSgkdXNlci0+Z2V0SWQoKSwgJGRhdGFHcmlkKTsKCQkJCQkkcm93cyA9ICR2aWV3LT5nZW5lcmF0ZVJvd3MoJGRhdGEsIGZhbHNlKTsKCQkJCQkkZGF0YUdyaWQtPnNldFJvd3MoJHJvd3MpOwoJCQkJCSRkYXRhR3JpZC0+c2V0SGVhZGVycyhhcnJheSgiZm9yY2Utc2V0LWhlYWRlcnMiKSk7CgkJCQkJCQoJCQkJCWlmKGNvdW50KCRyb3dzKSA+IDApCgkJCQkJewoJCQkJCQlyZXR1cm4gJGRhdGFHcmlkLT5nZW5lcmF0ZUh0bWwoIm15YWNjb3VudF9naWZ0aGlzdG9yeS5kYXRhZ3JpZC5waHAiKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJcmV0dXJuICI8ZW0+Tm8gZ2lmdHMgcHVyY2hhc2VkPC9lbT4iOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJJbnZhbGlkIHVzZXIgSUQgJ3skaW5mby0+aWR9JyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJCgkJCQlicmVhazsKCQl9CgkJCgkJaWYoJGNybnRNb2R1bGUgIT0gIiIpCgkJewoJCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi8iLiRjcm50TW9kdWxlLCAkaW5mbyk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk1NX015QWNjb3VudFZpZXcuc2hvd0RpYWxvZygpOiByZXF1ZXN0ZWQgbW9kdWxlIGRvZXMgbm90IGV4aXN0IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiB1bmxpbmtTb2NpYWxOZXR3b3JrKCRwb3N0KQoJewoJCQoJCWlmKGlzc2V0KCRwb3N0WyJsaW5rZWRBY2NvdW50SWQiXSkgJiYgaXNzZXQoJHBvc3RbJ2xpbmtlZEFjY291bnRVc2VySWQnXSkpCgkJewkKCQkJaWYoTU1fQWJzdHJhY3RTb2NpYWxMb2dpbkV4dGVuc2lvbjo6cmVtb3ZlTGlua2VkU29jaWFsTWVkaWFBY2NvdW50cygkcG9zdFsnbGlua2VkQWNjb3VudFVzZXJJZCddLCRwb3N0WyJsaW5rZWRBY2NvdW50SWQiXSkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIllvdXIgc29jaWFsIG5ldHdvcmsgYWNjb3VudCBpcyBubyBsb25nZXIgbGlua2VkIHRvIHRoaXMgYWNjb3VudC4iKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIHlvdXIgbGlua2VkIHNvY2lhbCBuZXR3b3Jrcy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciB1cGRhdGluZyB5b3VyIGxpbmtlZCBzb2NpYWwgbmV0d29ya3MuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(108, 'action', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQWN0aW9uIGV4dGVuZHMgTU1fRW50aXR5CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0FDVElPTl9OT1RJRllfWkFQSUVSID0gImFjdGlvbl9ub3RpZnlfemFwaWVyIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0FDVElPTl9DQUxMX1NDUklQVCA9ICJhY3Rpb25fY2FsbF9zY3JpcHQiOwoJcHVibGljIHN0YXRpYyAkTU1fQUNUSU9OX1NFTkRfRU1BSUwgPSAiYWN0aW9uX3NlbmRfZW1haWwiOwoJCglwdWJsaWMgc3RhdGljICRDVVJSRU5UX01FTUJFUl9QTEFDRUhPTERFUiA9ICItMSI7CgkKCXByaXZhdGUgJGV2ZW50VHlwZSA9ICIiOwoJcHJpdmF0ZSAkYWN0aW9uVHlwZSA9ICIiOwoJcHJpdmF0ZSAkYWN0aW9uVmFsdWUgPSBhcnJheSgpOwoJcHJpdmF0ZSAkZXZlbnRBdHRyaWJ1dGVzID0gYXJyYXkoKTsKCXByaXZhdGUgJHN0YXR1cyA9ICIxIjsKCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQUNUSU9OUy4iIFdIRVJFIGlkPSciLiR0aGlzLT5pZC4iJzsiOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZigkcmVzdWx0KSB7CgkJCSR0aGlzLT5zZXREYXRhKCRyZXN1bHQpOwoJCX0KCQllbHNlIHsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5ldmVudFR5cGUgPSAkZGF0YS0+ZXZlbnRfdHlwZTsKCQkJJHRoaXMtPmFjdGlvblR5cGUgPSAkZGF0YS0+YWN0aW9uX3R5cGU7CgkJCSR0aGlzLT5hY3Rpb25WYWx1ZSA9IHVuc2VyaWFsaXplKCRkYXRhLT5hY3Rpb25fdmFsdWUpOwoJCQkkdGhpcy0+ZXZlbnRBdHRyaWJ1dGVzID0gdW5zZXJpYWxpemUoJGRhdGEtPmV2ZW50X2F0dHJpYnV0ZXMpOwoJCQkkdGhpcy0+c3RhdHVzID0gJGRhdGEtPnN0YXR1czsKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCWlmKGludHZhbCgkdGhpcy0+aWQpID4gMCkKCQl7CgkJCSRzcWwgPSAiVVBEQVRFICIuTU1fVEFCTEVfQUNUSU9OUy4iIFNFVCBldmVudF90eXBlPSclcycsIGFjdGlvbl90eXBlPSclcycsIGFjdGlvbl92YWx1ZT0nJXMnLCBldmVudF9hdHRyaWJ1dGVzPSclcycsIHN0YXR1cz0nJXMnIFdIRVJFIGlkPSd7JHRoaXMtPmlkfSc7IjsKCQkJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmV2ZW50VHlwZSwgJHRoaXMtPmFjdGlvblR5cGUsIHNlcmlhbGl6ZSgkdGhpcy0+YWN0aW9uVmFsdWUpLCBzZXJpYWxpemUoJHRoaXMtPmV2ZW50QXR0cmlidXRlcyksICR0aGlzLT5zdGF0dXMpOwoJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkJCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNhdmUgcHVzaCBub3RpZmljYXRpb24iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsJCgkJCSRzcWwgPSAiSU5TRVJUIElOVE8gIi5NTV9UQUJMRV9BQ1RJT05TLiIgU0VUIGV2ZW50X3R5cGU9JyVzJywgYWN0aW9uX3R5cGU9JyVzJywgYWN0aW9uX3ZhbHVlPSclcycsIGV2ZW50X2F0dHJpYnV0ZXM9JyVzJywgc3RhdHVzPSclcyc7IjsKCQkJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmV2ZW50VHlwZSwgJHRoaXMtPmFjdGlvblR5cGUsIHNlcmlhbGl6ZSgkdGhpcy0+YWN0aW9uVmFsdWUpLCBzZXJpYWxpemUoJHRoaXMtPmV2ZW50QXR0cmlidXRlcyksICR0aGlzLT5zdGF0dXMpOwoJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkJCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBwdXNoIG5vdGlmaWNhdGlvbiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQUNUSU9OUy4iIFdIRVJFIGlkPSclZCcgTElNSVQgMSI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmlkKSk7CgkJCgkJaWYoJHJlc3VsdHMpIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gZGVsZXRlIGFjdGlvbiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RXZlbnRUeXBlKCR0eXBlKQoJewoJCSR0aGlzLT5ldmVudFR5cGUgPSAkdHlwZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEV2ZW50VHlwZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5ldmVudFR5cGU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY3Rpb25UeXBlKCR0eXBlKQoJewoJCSR0aGlzLT5hY3Rpb25UeXBlID0gJHR5cGU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBY3Rpb25UeXBlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFjdGlvblR5cGU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY3Rpb25WYWx1ZSgkdmFsdWUpCgl7CgkJJHRoaXMtPmFjdGlvblZhbHVlID0gJHZhbHVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWN0aW9uVmFsdWUoKQoJewoJCXJldHVybiAkdGhpcy0+YWN0aW9uVmFsdWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFdmVudEF0dHJpYnV0ZXMoJHZhbHVlKQoJewoJCSR0aGlzLT5ldmVudEF0dHJpYnV0ZXMgPSAkdmFsdWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRFdmVudEF0dHJpYnV0ZXMoKQoJewoJCXJldHVybiAkdGhpcy0+ZXZlbnRBdHRyaWJ1dGVzOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzKCR2YWx1ZSkKCXsKCQkkdGhpcy0+c3RhdHVzID0gJHZhbHVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdHVzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnN0YXR1czsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGlzQWN0aXZlKCkKCXsKCQlyZXR1cm4gKGludHZhbCgkdGhpcy0+c3RhdHVzKSA9PSAxKSA/IHRydWUgOiBmYWxzZTsKCX0KCQoJCgkvKiogVVRJTElUSUVTICoqLwoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZpbmRBY3Rpb25zQnlFdmVudFR5cGUoJGV2ZW50VHlwZSkKCXsKCQkkYWN0aW9ucyA9IGFycmF5KCk7CgkJCgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0FDVElPTlMuIiBXSEVSRSBldmVudF90eXBlPSd7JGV2ZW50VHlwZX0nOyI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJaWYoJHJlc3VsdHMpIAoJCXsKCQkJZm9yZWFjaCgkcmVzdWx0cyBhcyAkcmVzdWx0KQoJCQl7CgkJCQkkYWN0aW9uID0gbmV3IE1NX0FjdGlvbigpOwoJCQkJJGFjdGlvbi0+c2V0RGF0YSgkcmVzdWx0KTsKCQkJCWFycmF5X3B1c2goJGFjdGlvbnMsICRhY3Rpb24pOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkYWN0aW9uczsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBldmVudEFzc2lnbmVkKCRldmVudFR5cGUsICRhY3Rpb25UeXBlKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gIlNFTEVDVCBjb3VudCgqKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfQUNUSU9OUy4iIFdIRVJFIGV2ZW50X3R5cGUgPSAneyRldmVudFR5cGV9JyBBTkQgYWN0aW9uX3R5cGUgPSAneyRhY3Rpb25UeXBlfSc7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkKCQlpZihpc19vYmplY3QoJHJlc3VsdCkpCgkJewoJCQlyZXR1cm4gKCRyZXN1bHQtPnRvdGFsID4gMCk7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwcmVwYXJlU2VuZEVtYWlsVmFsdWUoJGVtYWlsVG9JZCwgJGVtYWlsRnJvbUlkLCAkZW1haWxDQywgJGVtYWlsU3ViamVjdCwgJGVtYWlsQm9keSkKCXsKCQkkdmFsdWUgPSBhcnJheSgpOwoJCSR2YWx1ZVsiZW1haWxUb0lkIl0gPSAkZW1haWxUb0lkOwoJCSR2YWx1ZVsiZW1haWxGcm9tSWQiXSA9ICRlbWFpbEZyb21JZDsKCQkkdmFsdWVbImVtYWlsQ0MiXSA9ICRlbWFpbENDOwoJCSR2YWx1ZVsiZW1haWxTdWJqZWN0Il0gPSAkZW1haWxTdWJqZWN0OwoJCSR2YWx1ZVsiZW1haWxCb2R5Il0gPSAkZW1haWxCb2R5OwoJCXJldHVybiAkdmFsdWU7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJlcGFyZU5vdGlmeVphcGllclZhbHVlKCRtYWlsYm94LCAkZW1haWxGcm9tSWQsICRhZGRpdGlvbmFsSW5mbykKCXsKCQkkdmFsdWUgPSBhcnJheSgpOwoJCSR2YWx1ZVsiemFwaWVyTWFpbGJveCJdID0gJG1haWxib3g7CgkJJHZhbHVlWyJlbWFpbEZyb21JZCJdID0gJGVtYWlsRnJvbUlkOwoJCSR2YWx1ZVsiemFwaWVyQWRkaXRpb25hbEluZm8iXSA9ICRhZGRpdGlvbmFsSW5mbzsKCQlyZXR1cm4gJHZhbHVlOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHByZXBhcmVDYWxsU2NyaXB0VmFsdWUoJHNjcmlwdFVybCkKCXsKCQkkdmFsdWUgPSBhcnJheSgpOwoJCSR2YWx1ZVsic2NyaXB0VXJsIl0gPSAkc2NyaXB0VXJsOwoJCXJldHVybiAkdmFsdWU7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QWN0aW9uTmFtZSgkdHlwZSkKCXsKCQlzd2l0Y2goJHR5cGUpCgkJewoJCQljYXNlIE1NX0FjdGlvbjo6JE1NX0FDVElPTl9TRU5EX0VNQUlMOgoJCQkJcmV0dXJuICJTZW5kIGFuIEVtYWlsIjsKCQkJCQoJCQljYXNlIE1NX0FjdGlvbjo6JE1NX0FDVElPTl9OT1RJRllfWkFQSUVSOgoJCQkJcmV0dXJuICJOb3RpZnkgWmFwaWVyIjsKCQkJCQoJCQljYXNlIE1NX0FjdGlvbjo6JE1NX0FDVElPTl9DQUxMX1NDUklQVDoKCQkJCXJldHVybiAiQ2FsbCBhIEN1c3RvbSBTY3JpcHQiOwoJCX0KCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRBY3Rpb25zTGlzdCgpCgl7CgkJJGxpc3QgPSBhcnJheSgpOwoJCSRsaXN0W01NX0FjdGlvbjo6JE1NX0FDVElPTl9TRU5EX0VNQUlMXSA9IHNlbGY6OmdldEFjdGlvbk5hbWUoTU1fQWN0aW9uOjokTU1fQUNUSU9OX1NFTkRfRU1BSUwpOwoJCSRsaXN0W01NX0FjdGlvbjo6JE1NX0FDVElPTl9OT1RJRllfWkFQSUVSXSA9IHNlbGY6OmdldEFjdGlvbk5hbWUoTU1fQWN0aW9uOjokTU1fQUNUSU9OX05PVElGWV9aQVBJRVIpOwoJCSRsaXN0W01NX0FjdGlvbjo6JE1NX0FDVElPTl9DQUxMX1NDUklQVF0gPSBzZWxmOjpnZXRBY3Rpb25OYW1lKE1NX0FjdGlvbjo6JE1NX0FDVElPTl9DQUxMX1NDUklQVCk7CgkJcmV0dXJuICRsaXN0OwoJfQp9', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(109, 'clickbankservice', 'LyoqCiAqIAogKiBUaGUgQ2xpY2tCYW5rIHNlcnZpY2Ugc3VwcG9ydHMgYSBzdWJzZXQgb2YgdGhlIHBheW1lbnQgc2VydmljZSBpbnRlcmZhY2UuIENoYXJnaW5nIG9yZGVycyBpcyBub3Qgc3VwcG9ydGVkLCBidXQgdGhlIGNyZWF0aW9uIG9mIG9yZGVycyAKICogYXMgYSByZXN1bHQgb2YgSVBOIG5vdGlmaWNhdGlvbiBJUyBzdXBwb3J0ZWQuIFJlZnVuZHMgYW5kIGNhbmNlbGxhdGlvbnMgYXJlIGFsc28gc3VwcG9ydGVkIHZpYSBJUE4uIFRoZSBzZXJ2aWNlIGFsc28gc3VwcG9ydHMgY2FuY2VsbGF0aW9uIGFuZCByZWZ1bmRzCiAqIGluaXRpYXRlZCBmcm9tIHRoZSBNZW1iZXJNb3VzZSBzaWRlLCB3aGljaCBpdCBzZW5kcyB0byBDbGlja0JhbmsgdmlhIEFQSS4KICogCiAqIENsaWNrQmFuayB1c2VzIHBheW1lbnQgbGlua3MgdG8gY3JlYXRlIG9yZGVycyBvbiB0aGVpciBzZXJ2ZXJzLCBhbmQgdGhlbiBzZW5kcyB0aGUgdXNlciB0byBhIGNvbmZpcm1hdGlvbiBwYWdlIHRoYXQgdGhleSBoYXZlIGRlc2lnbmF0ZWQuCiAqIFRoaXMgbWVhbnMgdGhhdCBvcmRlcnMgY2FuIGJlIGNyZWF0ZWQgaW4gTWVtYmVyTW91c2UgaW4gMiB3YXlzLiBUaGUgZmlyc3Qgd2F5IGlzIHZpYSB0aGUgY29uZmlybWF0aW9uIHBhZ2UuIFRoZSBwb3RlbnRpYWwgZXhpc3RzIGZvciB0aGUgdXNlcnMgdG8gYmUKICogcmVkaXJlY3RlZCB0byB0aGUgY29uZmlybWF0aW9uIHBhZ2UgcHJpb3IgdG8gdGhlIFNBTEUgaXBuIGJlaW5nIHNlbnQsIHNvIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIGNyZWF0aW5nIGFuIG9yZGVyIGJhc2VkIG9uIHRoZSB2YXJpYWJsZXMgc2VudCBhbG9uZyB3aXRoIHRoZQogKiBjb25maXJtYXRpb24gcGFnZSByZWRpcmVjdC4gVGhlIG5hbWUgaXMgc2VudCBpbiBvbmUgZmllbGQsIGFuZCBubyBwYXltZW50IGFtb3VudCBpcyBzZW50LCBzbyBvcmRlcnMgY3JlYXRlZCB0aGlzIHdheSBndWVzcyB3aGF0IHRoZSBmaXJzdCBhbmQgbGFzdCBuYW1lIGFyZSAoYmFzZWQgb24gc3BhY2luZykKICogYW5kIHVzZSB0aGUgZGVmYXVsdCBhbW91bnQgb2YgdGhlIHByb2R1Y3QgYXMgc3RvcmVkIGluIE1lbWJlck1vdXNlLiBUaGVuIHRoZSB1c2VyIGlzIHJlZGlyZWN0ZWQgdG8gdGhlIGNvbmZpcm1hdGlvbiBwYWdlLiAKICogV2hlbiB0aGUgSVBOIGFycml2ZXMgbGF0ZXIsIGl0IGRldGVjdHMgdGhhdCB0aGUgb3JkZXIgaXMgYWxyZWFkeSBjcmVhdGVkIGFuZCB1cGRhdGVzIHRoZSBuYW1lIGFuZCBvcmRlci9pdGVtL3RyYW5zYWN0aW9uIHRvdGFscyB0byB3aGF0IHdhcyBhY3R1YWxseSBjaGFyZ2VkLCB3aGljaCBpcyBpbXBvcnRhbnQKICogYmVjYXVzZSBDbGlja0JhbmsgaGFzIHN0YXJ0ZWQgY2hhcmdpbmcgY3VzdG9tZXJzIHRheAogKiAKICogSWYgdGhlIElQTiBhcnJpdmVzIGZpcnN0LCB0aGUgb3JkZXIgaXMgY3JlYXRlZCB1c2luZyB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIElQTiwgYW5kIHRoZW4gd2hlbiB0aGUgY29uZmlybWF0aW9uIHBhZ2UgcmVkaXJlY3QgaGFwcGVucyBhZnRlciB0aGF0LCB0aGUgZXhpc3RlbmNlIG9mIHRoZSBvcmRlciBpcyBkZXRlY3RlZCwgYW5kCiAqIHRoZSBvcmRlciBpcyBzaW1wbHkgbG9va2VkIHVwIGFuZCB1c2VkIHRvIGNyZWF0ZSB0aGUgZW52aXJvbm1lbnQgbmVjZXNzYXJ5IGZvciBnZW5lcmF0aW5nIGEgdHJhbnNhY3Rpb24ga2V5IChAc2VlIE1NX1RyYW5zYWN0aW9uS2V5KSBhbmQgcmVkaXJlY3RpbmcgdG8gdGhlIGNvcnJlY3QgY29uZmlybWF0aW9uIHBhZ2UgdXJsIGJhc2VkIG9uCiAqIHRoZSBvcmRlci4KICogCiAqIEFuIGltcG9ydGFudCB0aGluZyB0byBub3RlIGFib3V0IHRoZSBvcmRlciBjcmVhdGlvbiBwcm9jZXNzIGlzIHRoYXQgdGhlIHBvc3NpYmlsaXR5IGV4aXN0cyBmb3IgdGhlIGNvbmZpcm1hdGlvbiByZWRpcmVjdCBhbmQgdGhlIElQTiB0byBoYXBwZW4gc2ltdWx0YW5lb3VzbHkgKG9yIGNsb3NlIGVub3VnaCB0byBjYXVzZSBwcm9ibGVtcykuCiAqIFRvIGd1YXJkIGFnYWluc3QgdGhpcywgYSBjaGVjayBpcyBkb25lIGFnYWluc3QgdGhlIE1NX1RBQkxFX0NMSUNLQkFOS19PUkRFUl9JVEVNX0xJTktTIHRhYmxlIGZvciB0aGUgZXhpc3RlbmNlIG9mIHRoZSBjbGlja2JhbmsgcmVjZWlwdCBudW1iZXIgKGN0cmFuc3JlY2VpcHQgb3IgY2JyZWNlaXB0LCBkZXBlbmRpbmcpIGFuZAogKiBpZiBpdCBkb2VzbnQgZXhpc3QsIHRoZSBmaXJzdCB0aGluZyB0aGUgX19jcmVhdGVPcmRlciBtZXRob2QgZG9lcyBpcyBwdXQgYW4gZW50cnkgaW4gdGhhdCB0YWJsZSBmb3IgdGhlIHJlY2VpcHQgbnVtYmVyLCB3aXRoIGEgcGxhY2Vob2xkZXIgdmFsdWUgdGhhdCBsYXRlciBnZXRzIHVwZGF0ZWQgZm9yIHRoZSBvcmRlciBpdGVtLgogKiBUaGUgY2hlY2sgYW5kIHRoZSBfX2NyZWF0ZU9yZGVyIG1ldGhvZCBORUVEIHRvIGhhcHBlbiBhcyBjbG9zZSB0b2dldGhlciBhcyBwb3NzaWJsZSwgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgdGhpcyBoYXBwZW5zIGZhc3QgZW5vdWdoIGluIGFsbCBzY2VuYXJpb3MgdG8gYXZvaWQgdHdvIHByb2Nlc3NlcyBlbnRlcmluZyB0aGF0IGNvZGUgYmxvY2sKICogYXQgdGhlIHNhbWUgdGltZS4gCiAqIAogKiBBbiBleGFtcGxlIGlzIHRoYXQsIGF0IHRoZSB0aW1lIG9mIHdyaXRpbmcsIHRoZSBJUE4gY3JlYXRpb24gbWV0aG9kIGRvZXMgdGhlIGNoZWNrIG9uIGxpbmUgODI0LCBhbmQgdGhlbiBjYWxscyBfX2NyZWF0ZU9yZGVyIG9uIGxpbmUgODI2LiAgSXQgaXMgY3J1Y2lhbCB0aGF0IHRoZXJlIGJlIG5vIHNpZ25pZmljYW50IGRlbGF5IGJldHdlZW4gdGhlIGNoZWNrIGFuZCB0aGUgY3JlYXRlIGNhbGwKICogCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQ2xpY2tCYW5rU2VydmljZSBleHRlbmRzIE1NX1BheW1lbnRTZXJ2aWNlCnsKCXByb3RlY3RlZCAkdG9rZW4gPSAiQ0xJQ0tCQU5LIjsgCgkKCXByb3RlY3RlZCAkc2l0ZU5hbWUgPSAiIjsKCXByb3RlY3RlZCAkYXBpRGV2ZWxvcGVyS2V5ID0gIiI7Cglwcm90ZWN0ZWQgJGFwaUNsZXJrS2V5ID0gIiI7CgkKCXByb3RlY3RlZCAkc2VjcmV0S2V5ID0gIiI7CQoJcHJvdGVjdGVkICRmYWxsYmFja0NvbmZpcm1hdGlvblBhZ2UgPSAiIjsKCQoJcHJvdGVjdGVkICRzdXBwb3J0ZWRDdXJyZW5jaWVzID0gYXJyYXkoIkFSUyIsIkFVRCIsIkJSTCIsIkNBRCIsIkNIRiIsIkNMUCIsIkNOWSIsIkNPUCIsIkNaSyIsIkRLSyIsCgkJCSJFVVIiLCJHQlAiLCJIS0QiLCJIVUYiLCJJRFIiLCJJTlIiLCJKUFkiLCJLUlciLCJNWE4iLCJNWVIiLCJOT0siLCJOWkQiLCJQSFAiLCJQTE4iLCJSVUIiLAoJCQkiU0VLIiwiU0dEIiwiVEhCIiwiVFJZIiwiVVNEIiwiWkFSIik7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsKCkgCgl7IAoJCXBhcmVudDo6aW5zdGFsbCgpOwoJCQoJCSRzcWwgPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQ0xJQ0tCQU5LX1BST0RVQ1RfTElOS1MuIiAoXG4iLgoJCQkJIm1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgQklHSU5UKDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkiY2xpY2tiYW5rX3Byb2R1Y3RfaWQgVkFSQ0hBUigxMCkgTk9UIE5VTEwsXG4iLgoJCQkJIlVOSVFVRSBLRVkgY2xpY2tiYW5rX3RvX21tX3Byb2RpZF9pZHggKGNsaWNrYmFua19wcm9kdWN0X2lkLG1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7XG4iOwkJCgkJJHNxbC49ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9DTElDS0JBTktfSVBOX0xPRy4iIChcbiIuCgkJCQkiaWQgQklHSU5UKDIwKSBVTlNJR05FRCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCxcbiIuCgkJCQkiY3RyYW5zcmVjZWlwdCBWQVJDSEFSKDE0KSBOT1QgTlVMTCxcbiIuCgkJCQkiY3Vwc2VsbHJlY2VpcHQgVkFSQ0hBUigxNCksXG4iLgoJCQkJImN0cmFuc2FjdGlvbiBWQVJDSEFSKDE2KSBOT1QgTlVMTCxcbiIuCgkJCQkiY29yZGVyYW1vdW50IElOVCgxMSksXG4iLgoJCQkJImN0cmFuc2FmZmlsaWF0ZSBWQVJDSEFSKDEwKSxcbiIuCgkJCQkiY3JlYmlsbGFtbnQgSU5UKDExKSBERUZBVUxUICcwJyxcbiIuCgkJCQkiY3Byb2Nlc3NlZHBheW1lbnRzICBUSU5ZSU5UKDIpLFxuIi4KCQkJCSJjZnV0dXJlcGF5bWVudHMgVElOWUlOVCgyKSxcbiIuCgkJCQkiY25leHRwYXltZW50ZGF0ZSBEQVRFVElNRSxcbiIuCgkJCQkiY3JlYmlsbHN0YXR1cyBWQVJDSEFSKDEwKSxcbiIuCgkJCQkiY3RyYW5zdGltZSBJTlQoMTApLFxuIi4KCQkJCSJyZWN1cnJpbmcgVElOWUlOVCBOT1QgTlVMTCxcbiIuCgkJCQkiZGF0ZV9yZWNlaXZlZCBEQVRFVElNRSBOT1QgTlVMTCxcbiIuCgkJCQkiUFJJTUFSWSBLRVkgIChpZCksXG4iLgoJCQkJIktFWSBjdHJhbnNyZWNlaXB0X2lkeCAoY3RyYW5zcmVjZWlwdClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTtcbiI7CQoJCSRzcWwuPSAgIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0NMSUNLQkFOS19PUkRFUl9JVEVNX0xJTktTLiIgKFxuIi4KCQkJCSJjdHJhbnNyZWNlaXB0IFZBUkNIQVIoMTYpIE5PVCBOVUxMLFxuIi4KCQkJCSJvcmRlcl9pdGVtX2lkIEJJR0lOVCgyMCkgVU5TSUdORUQgTk9UIE5VTEwsXG4iLgoJCQkJIlVOSVFVRSBLRVkgY2xpY2tiYW5rX3RvX21tX29yZGVyaXRlbV9pZHggKGN0cmFuc3JlY2VpcHQsb3JkZXJfaXRlbV9pZCksXG4iLgoJCQkJIktFWSBjbGlja2JhbmtfcmVjZWlwdF9vcmRlcl9pdGVtX2lkX2lkeCAob3JkZXJfaXRlbV9pZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTtcbiI7CgkJZGJEZWx0YSgkc3FsKTsKCX0KCQoJCgkvKioKCSAqIFJlcG9ydCB0aGUgZmVhdHVyZXMgdGhlIENsaWNrQmFuayBzZXJ2aWNlIHN1cHBvcnRzCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpzdXBwb3J0c0ZlYXR1cmUoKQoJICoKCSAqIEBwYXJhbSBpbnRlZ2VyICRmZWF0dXJlQ29uc3QgYSBjb25zdCBhcyBkZWZpbmVkIGluIE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXMKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHN1cHBvcnRlZCwgZmFsc2UgaWYgbm90IHN1cHBvcnRlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gc3VwcG9ydHNGZWF0dXJlKCRmZWF0dXJlQ29uc3QpCgl7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6T0ZGU0lURV9TRVJWSUNFOwoJCXJldHVybiBpbl9hcnJheSgkZmVhdHVyZUNvbnN0LCRzdXBwb3J0ZWQsdHJ1ZSk7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBodG1sIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSBwYXltZW50IG1ldGhvZCBzZXR0aW5ncyBzY3JlZW4gZm9yIGNvbmZpZ3VyaW5nIENsaWNrQmFuawoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6ZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZyBodG1sCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgl7CgkJJGNvbmZpZ19vcHRpb25zID0gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCJ7JHRoaXMtPmdldFRlbXBsYXRlRGlyKCl9L2NsaWNrYmFua19jb25maWcuaHRtbC5waHAiLCR0aGlzKTsKCQlyZXR1cm4gJGNvbmZpZ19vcHRpb25zOwoJfQoJCgkKCS8qKgoJICogVmFsaWRhdGVzIGFuZCBjb25maWd1cmVzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc2V0dGluZ3MgaW5mb3JtYXRpb24gZ2VuZXJhdGVkIGJ5IHN1Ym1pc3Npb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gZGlhbG9nCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpwcm9jZXNzQ29uZmlnT3B0aW9ucygpCgkgKgoJICogQHBhcmFtICRwb3N0IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGRhdGEgcG9zdGVkIGZyb20gdGhlIHBheW1lbnQgbWV0aG9kcyBzZXR0aW5ncyBzY3JlZW4KCSAqIEByZXR1cm4gQW4gTU1fUmVzcG9uc2Ugb2YgdHlwZSBNTV9SZXNwb25zZTo6U1VDQ0VTUyBpbmRpY2F0aW5nIHN1Y2Nlc3NmdWwgdmFsaWRhdGlvbiBhbmQgYXNzaWdtZW50LiBPbiBlcnJvciwgdGhlIHR5cGUgd2lsbCBiZSBNTV9SZXNwb25zZTo6RVJST1IgYW5kIHRoZSBtZXNzYWdlIHdpbGwgY29udGFpbiB0aGUgZXJyb3IgbWVzc2FnZXMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NDb25maWdPcHRpb25zKCRwb3N0KSAKCXsgCgkJJGFjdGl2ZSA9IGlzc2V0KCRwb3N0WydvZmZzaXRlX3BheW1lbnRfc2VydmljZXMnXSkgJiYgaW5fYXJyYXkoc3RydG9sb3dlcigkdGhpcy0+Z2V0VG9rZW4oKSksICRwb3N0WydvZmZzaXRlX3BheW1lbnRfc2VydmljZXMnXSk7CgkJJHRoaXMtPnNldEFjdGl2ZSgkYWN0aXZlKTsKCQkKCQlpZiAoJGFjdGl2ZSkKCQl7CgkJCSR0aGlzLT5pbnN0YWxsKCk7CgkJCSRjb25maWcgPSBpc3NldCgkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2NsaWNrYmFuayddKT8kcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2NsaWNrYmFuayddOmFycmF5KCk7CgkJCSRlbXB0eV9lcnJvcnMgPSAiIjsKCQkJJHJlcXVpcmVkVmFsdWVzID0gYXJyYXkoInNpdGVfbmFtZSI9PiJTaXRlIE5hbWUiLCJzZWNyZXRfa2V5Ij0+IlNlY3JldCBLZXkiLCAiYXBpX2RldmVsb3Blcl9rZXkiPT4iRGV2ZWxvcGVyIEtleSIsImFwaV9jbGVya19rZXkiPT4iQ2xlcmsgS2V5Iik7CgkJCWZvcmVhY2ggKCRyZXF1aXJlZFZhbHVlcyBhcyAkaz0+JHYpCgkJCXsKCQkJCWlmIChlbXB0eSgkY29uZmlnWyRrXSkpCgkJCQl7CgkJCQkJJGVtcHR5X2Vycm9ycyAuPSAiQ2xpY2tCYW5rOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIHskdn1cbiI7CgkJCQl9CgkJCX0KCQkJCgkJCWlmICgkZW1wdHlfZXJyb3JzICE9ICIiKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlbXB0eV9lcnJvcnMsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCS8vaWYgaGVyZSwgdGhhdCBtZWFucyB0aGUgcmVxdWlyZWQgdmFsdWVzIGFyZSBwcmVzZW50CgkJCSR0aGlzLT5zZXRTaXRlTmFtZSgkY29uZmlnWydzaXRlX25hbWUnXSk7CgkJCSR0aGlzLT5zZXRTZWNyZXRLZXkoJGNvbmZpZ1snc2VjcmV0X2tleSddKTsKCQkJJHRoaXMtPnNldEFQSURldmVsb3BlcktleSgkY29uZmlnWydhcGlfZGV2ZWxvcGVyX2tleSddKTsKCQkJJHRoaXMtPnNldEFQSUNsZXJrS2V5KCRjb25maWdbJ2FwaV9jbGVya19rZXknXSk7CgkJCSR0aGlzLT5zZXRGYWxsYmFja0NvbmZpcm1hdGlvblBhZ2UoJGNvbmZpZ1snZmFsbGJhY2tfY29uZmlybWF0aW9uX3BhZ2UnXSk7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0JCQoJCgkKCS8qKgoJICogUHJvY2Vzc2VzIENsaWNrQmFuayBJUE4gbm90aWZpY2F0aW9ucy4gVXNlZCB0byBub3RpZnkgTWVtYmVyTW91c2Ugb2Ygc2FsZXMsIHJlYmlsbHMsIHJlZnVuZHMsIGFuZCBjYW5jZWxsYXRpb25zLCBldmVuIHRob3NlCgkgKiBpbml0aWF0ZWQgZnJvbSB0aGUgQ2xpY2tCYW5rIHNpZGUKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NOb3RpZmljYXRpb24oKQoJICoKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGUgJF9QT1NUIHN1cGVyZ2xvYmFsLCB3aGljaCB3aWxsIGNvbnRhaW4gdGhlIElQTgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgdGhlIHN0YXR1cyBvZiBhbnkgb3BlcmF0aW9ucyBwZXJmb3JtZWQgaW4gdGhlIG1ldGhvZC4gVGhlIG1lc3NhZ2UgZmllbGQgb2YgdGhlIHJlc3BvbnNlIHdpbGwgYmUgZWNob2VkIHRvIHRoZSBzY3JpcHQgY2FsbGVyIHZlcmJhdGltCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzTm90aWZpY2F0aW9uKCRyZXF1ZXN0KSAKCXsKCQkkdGhpcy0+aW5zdGFsbCgpOwoKCQlNTV9EaWFnbm9zdGljTG9nOjpsb2coTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCAiUHJvY2VzcyBOb3RpZmljYXRpb24gKCIucHJpbnRfcigkcmVxdWVzdCwgdHJ1ZSkuIikiKTsKCQkKCQlpZiAoIWVtcHR5KCRfR0VUWydvcCddKSAmJiAoJF9HRVRbJ29wJ10gPT0gImNvbmYiKSkKCQl7CgkJCSR0aGlzLT5yZWRpcmVjdFRvQ29uZmlybWF0aW9uUGFnZSgkX1JFUVVFU1QpOwoJCX0KCgkJLy9UT0RPOiBkdXBsaWNhdGUgZGV0ZWN0aW9uCgkJLy9UT0RPOiBiYWlsIGlmIG5vIGN0cmFuc3JlY2VpcHQsIHRoZXkgYWxsIG5lZWQgaXQgKD8pCgkJCgkJaWYgKCR0aGlzLT52ZXJpZnlJUE4oJHJlcXVlc3QpKQoJCXsKCQkJJHRyYW5zYWN0aW9uVHlwZSA9ICRyZXF1ZXN0WydjdHJhbnNhY3Rpb24nXTsKCQkJc3dpdGNoICgkdHJhbnNhY3Rpb25UeXBlKQoJCQl7CgkJCQljYXNlICJURVNUX1NBTEUiOgoJCQkJY2FzZSAiU0FMRSI6CgkJCQkJLy9TYWxlIFByb2Nlc3NpbmcKCQkJCQlyZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6dHJhbnNsYXRlKCR0aGlzLT5jcmVhdGVPcmRlckZyb21JUE4oJHJlcXVlc3QpKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgIlRFU1RfQklMTCI6CgkJCQljYXNlICJCSUxMIjoKCQkJCQlyZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6dHJhbnNsYXRlKCR0aGlzLT5wcm9jZXNzUmViaWxsTm90aWZpY2F0aW9uKCRyZXF1ZXN0KSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlICJURVNUX1JGTkQiOgoJCQkJY2FzZSAiUkZORCI6CgkJCQkJcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OnRyYW5zbGF0ZSgkdGhpcy0+cHJvY2Vzc1JlZnVuZE5vdGlmaWNhdGlvbigkcmVxdWVzdCkpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAiQ0dCSyI6CgkJCQljYXNlICJJTlNGIjoKCQkJCQlyZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6dHJhbnNsYXRlKCR0aGlzLT5wcm9jZXNzQ2hhcmdlYmFja05vdGlmaWNhdGlvbigkcmVxdWVzdCkpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAiQ0FOQ0VMLVJFQklMTCI6CgkJCQljYXNlICJDQU5DRUwtVEVTVC1SRUJJTEwiOgoJCQkJCXJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjp0cmFuc2xhdGUoJHRoaXMtPnByb2Nlc3NDYW5jZWxsYXRpb25Ob3RpZmljYXRpb24oJHJlcXVlc3QpKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgIlVOQ0FOQ0VMLVJFQklMTCI6CgkJCQkJcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OnRyYW5zbGF0ZSgkdGhpcy0+cHJvY2Vzc1VuY2FuY2VsbGF0aW9uTm90aWZpY2F0aW9uKCRyZXF1ZXN0KSk7CgkJCQkJYnJlYWs7CgkJCQljYXNlICJURVNUIjoKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlRlc3QgU3VjY2Vzc2Z1bCIpOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlicmVhazsJCgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciB2YWxpZGF0aW5nIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGFuIG9yZGVyIGJhc2VkIG9uIENsaWNrQmFuayBjb25maXJtYXRpb24gdmFycyBpbiB0aGUgJHJlcXVlc3QgKGlmIG5lY2Vzc2FyeSksIG90aGVyd2lzZSBsb29rcyB1cCB0aGUgb3JkZXIuIAoJICogVGhlbiB0aGUgdXNlciBpcyByZWRpcmVjdGVkIHRvIHRoZSBjb25maXJtYXRpb24gcGFnZSBmb3IgdGhlIHJlZmVyZW5jZWQgb3JkZXIKCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IFRoZSAkX1BPU1Qgc3VwZXJnbG9iYWwsIHdoaWNoIHdpbGwgY29udGFpbiB0aGUgSVBOCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiByZWRpcmVjdFRvQ29uZmlybWF0aW9uUGFnZSgkcmVxdWVzdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy9maXJzdCB2YWxpZGF0ZSB0aGUgaW5jb21pbmcgcGFyYW1ldGVycyB0byBwcmV2ZW50IHNwb29maW5nCgkJJGtleSA9ICR0aGlzLT5nZXRTZWNyZXRLZXkoKTsKCQkkcmNwdCA9ICFlbXB0eSgkcmVxdWVzdFsnY2JyZWNlaXB0J10pPyRyZXF1ZXN0WydjYnJlY2VpcHQnXToiIjsKCQkkdGltZSA9ICFlbXB0eSgkcmVxdWVzdFsndGltZSddKT8kcmVxdWVzdFsndGltZSddOiIiOwoJCSRpdGVtID0gIWVtcHR5KCRyZXF1ZXN0WydpdGVtJ10pPyRyZXF1ZXN0WydpdGVtJ106IiI7CgkJJGNicG9wID0gIWVtcHR5KCRyZXF1ZXN0WydjYnBvcCddKT8kcmVxdWVzdFsnY2Jwb3AnXToiIjsKCQkkeHhwb3A9c2hhMSgiJGtleXwkcmNwdHwkdGltZXwkaXRlbSIpOwoJCSR4eHBvcD1zdHJ0b3VwcGVyKHN1YnN0cigkeHhwb3AsMCw4KSk7CgkJCgkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIGNvbmZpcm1hdGlvbiByZXF1ZXN0OiAiLnByaW50X3IoJHJlcXVlc3QsdHJ1ZSkpOwoJCWlmICgkY2Jwb3A9PSR4eHBvcCkgLy9jaXBoZXIgbWF0Y2hlcwoJCXsKCQkJaWYgKCFlbXB0eSgkcmNwdCkpCgkJCXsKCQkJCS8vdGhlIGNvbmZpcm1hdGlvbiBwYWdlIHJldHVybnMgdGhlIG5hbWUgYXMgb25lIGZpZWxkLiBXZSBjYW4gYXNzdW1lIGluIG1vc3QgY2FzZXMgdGhhdCBpdCB3aWxsIGJlIHRoZSBmaXJzdG5hbWUgYW5kIGxhc3QgbmFtZSBjb25jYXRlbmF0ZWQKCQkJCS8vd2UgY2FuIHJldmVyc2UgZW5naW5lZXIgaXQgYnkgc3BsaXR0aW5nIG9uIHNwYWNlcywgYW5kIGFzc3VtZSB0aGF0IHRoZSBsYXN0IGl0ZW0gaW4gdGhlIGFycmF5IGlzIHRoZSBsYXN0bmFtZSwgYW5kIGV2ZXJ5dGhpbmcgZWxzZSBpcyB0aGUgZmlyc3QgbmFtZQoJCQkJLy9pbiB0aGUgdmFzdCBtYWpvcml0eSBvZiBjYXNlcywgdGhlcmUgd2lsbCBiZSBvbmx5IDIgYXJyYXkgbWVtYmVycywgYmVjYXVzZSBtb3N0IGNvbXBvdW5kIGZpcnN0IG5hbWVzIChvciBsYXN0IG5hbWVzKSBhcmUgaHlwaGVuYXRlZAoJCQkJJGZ1bGxuYW1lID0gIWVtcHR5KCRyZXF1ZXN0WydjbmFtZSddKT8kcmVxdWVzdFsnY25hbWUnXToiIjsKCQkJCSRwaWVjZXMgPSBleHBsb2RlKCIgIiwkZnVsbG5hbWUpOwoJCQkJJHBpZWNlc0xlbmd0aCA9IGNvdW50KCRwaWVjZXMpOwoJCQkJaWYgKCRwaWVjZXNMZW5ndGggPiAxKQoJCQkJewoJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBDb25maXJtYXRpb24gKGZpcnN0IG5hbWUgc3BsaXQgYmxvY2spIik7CgkJCQkJJGZpcnN0bmFtZSA9IHVjZmlyc3Qoc3RydG9sb3dlcihpbXBsb2RlKCIgIixhcnJheV9zbGljZSgkcGllY2VzLDAsKCRwaWVjZXNMZW5ndGgtMSkpKSkpOwoJCQkJCSRsYXN0bmFtZSA9IHVjZmlyc3Qoc3RydG9sb3dlcigkcGllY2VzWyRwaWVjZXNMZW5ndGgtMV0pKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJLy90aGVyZSB3ZXJlIG5vIHNwYWNlcwoJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBDb25maXJtYXRpb24gKHNlY29uZCBuYW1lIHNwbGl0IGJsb2NrKSIpOwoJCQkJCSRmaXJzdG5hbWUgPSB1Y2ZpcnN0KHN0cnRvbG93ZXIoJHJlcXVlc3RbJ2NuYW1lJ10pKTsKCQkJCQkkbGFzdG5hbWUgID0gIiI7CgkJCQl9CgkJCQkKCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBDb25maXJtYXRpb246IEZpcnN0OiB7JGZpcnN0bmFtZX0sIExhc3Q6IHskbGFzdG5hbWV9Iik7CgkJCQkkYmlsbGluZ0FkZHJlc3MgPSBuZXcgTU1fQ3VzdG9tZXJBZGRyZXNzKCRmaXJzdG5hbWUsJGxhc3RuYW1lLCIiLCIiLCIiLCIiLCRyZXF1ZXN0WydjemlwJ10sIiIsJHJlcXVlc3RbJ2Njb3VudHJ5J10pOwoJCQkJJHNoaXBwaW5nQWRkcmVzcyA9IG51bGw7CgkJCQkkZW1haWwgPSAhZW1wdHkoJHJlcXVlc3RbJ2NlbWFpbCddKT8kcmVxdWVzdFsnY2VtYWlsJ106IiI7CgkJCQkkYWZmSWQgPSAhZW1wdHkoJHJlcXVlc3RbJ2NiYWZmaSddKT8kcmVxdWVzdFsnY2JhZmZpJ106IiI7CgkJCQkkb3JkZXIgPSBudWxsOyAvL2RlZmF1bHQKCQkJCWlmICghJHRoaXMtPmNoZWNrRm9yRXhpc3RpbmdPcmRlcigkcmNwdCkpCgkJCQl7CgkJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIENvbmZpcm1hdGlvbiAoY3JlYXRpbmcgb3JkZXIpOiAiKTsKCQkJCQkkY3JlYXRlUmVzcG9uc2UgPSAkdGhpcy0+X19jcmVhdGVPcmRlcigkZmlyc3RuYW1lLCAkbGFzdG5hbWUsICRlbWFpbCwgJGl0ZW0sICRyY3B0LCAkYmlsbGluZ0FkZHJlc3MsJHNoaXBwaW5nQWRkcmVzcywkYWZmSWQpOwoJCQkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRjcmVhdGVSZXNwb25zZSkgJiYgKCRjcmVhdGVSZXNwb25zZS0+bWVzc2FnZSBpbnN0YW5jZW9mIE1NX09yZGVyKSkKCQkJCQl7CgkJCQkJCSRvcmRlciA9ICRjcmVhdGVSZXNwb25zZS0+bWVzc2FnZTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCS8vb3JkZXIgYWxyZWFkeSBjcmVhdGVkLCBsb29rIGl0IHVwCgkJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIENvbmZpcm1hdGlvbiAob3JkZXIgZXhpc3RzKTogIik7CgkJCQkJCgkJCQkJLy90aGUgcG90ZW50aWFsIGV4aXN0cyBmb3IgdGhlcmUgdG8gYmUgYSByYWNlIGNvbmRpdGlvbiBiZXR3ZWVuIHRoZSBjb25maXJtYXRpb24gYW5kIHRoZSBJUE4sIHdoZXJlYXMgdGhlIGxvb2t1cCBmYWlscyB3aGVuIAoJCQkJCS8vcGVyZm9ybWVkIHByaW9yIHRvIHRoZSBvcmRlciBiZWluZyB3cml0dGVuLiBUaGlzIG5leHQgYmxvY2sgZ3VhcmRzIGFnYWluc3QgdGhhdCBieSBkb2luZyBjb250cm9sbGVkIHNsZWVwcyB1bnRpbCB0aGUgb3JkZXIgaXRlbSBpZAoJCQkJCS8vaXMgcHJlc2VudCBpbiB0aGUgdGFibGUKCQkJCQkkbWF4UmV0cmllcyA9IDU7CgkJCQkJJG51bVNsZWVwcyA9IDA7CgkJCQkJJGxvb2t1cFF1ZXJ5ID0gJHdwZGItPnByZXBhcmUoIlNFTEVDVCBvcmRlcl9pdGVtX2lkIEZST00gIi5NTV9UQUJMRV9DTElDS0JBTktfT1JERVJfSVRFTV9MSU5LUy4iIFdIRVJFIGN0cmFuc3JlY2VpcHQ9JXMiLCRyZWNlaXB0TnVtYmVyKTsKCQkJCQkkb3JkZXJJdGVtSWQgPSAkd3BkYi0+Z2V0X3ZhcigkbG9va3VwUXVlcnkpOwoJCQkJCQoJCQkJCXdoaWxlICgoJG9yZGVySXRlbUlkID09IDApICYmICgkbnVtU2xlZXBzKysgPCAkbWF4UmV0cmllcykpCgkJCQkJewoJCQkJCQlNTV9EaWFnbm9zdGljTG9nOjpsb2coTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCAiV2FpdGluZyBmb3Igb3JkZXI6IHskbnVtU2xlZXBzfS4uLiIpOwoJCQkJCQl1c2xlZXAoMTIwMDAwMCk7IC8vc2xlZXAgZm9yIDEyMDBtcwoJCQkJCQkkb3JkZXJJdGVtSWQgPSAkd3BkYi0+Z2V0X3ZhcigkbG9va3VwUXVlcnkpOwoJCQkJCX0KCQkJCQkKCQkJCQlpZiAoIWlzX251bGwoJG9yZGVySXRlbUlkKSAmJiAoJG9yZGVySXRlbUlkID4gMCkpCgkJCQkJewoJCQkJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkb3JkZXJJdGVtSWQpOwoJCQkJCQlpZiAoJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQkJCQl7CgkJCQkJCQlNTV9EaWFnbm9zdGljTG9nOjpsb2coTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCAiQ0IgQ29uZmlybWF0aW9uIChmb3VuZCBvcmRlciBpdGVtKSIpOwoJCQkJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBDb25maXJtYXRpb24gKG9yZGVyIGV4aXN0cyBidXQgY291bGQgbm90IGJlIHJlYWQpOiBvcmRlciBpdGVtIGlkID0gIi4oaXNfbnVsbCgkb3JkZXJJdGVtSWQpPyJudWxsIjokb3JkZXJJdGVtSWQpKTsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWlmICghaXNfbnVsbCgkb3JkZXIpKQoJCQkJewoJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBDb25maXJtYXRpb24gKHJlZGlyZWN0IGJsb2NrKSIpOwoJCQkJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9VU0VSX0lELE1NX09yZGVyOjpnZXRVc2VySWRCeU9yZGVySWQoJG9yZGVyLT5nZXRJZCgpKSk7CgkJCQkJJGNvbmZpcm1hdGlvblVybCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmdldENvbmZpcm1hdGlvblVybEZvck9yZGVyKCRvcmRlcik7CgkJCQkJaWYgKCRjb25maXJtYXRpb25VcmwgIT09IGZhbHNlKQoJCQkJCXsKCQkJCQkJd3BfcmVkaXJlY3QoJGNvbmZpcm1hdGlvblVybCk7CgkJCQkJCWV4aXQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCQoJCS8vaWYgZXhlY3V0aW9uIHJlYWNoZXMgaGVyZSwgd2Ugd2VyZSBub3QgYWJsZSB0byBsb2NhdGUgdGhlIG9yZGVyLCBub3QgbXVjaCB0aGF0IGNhbiBiZSBkb25lCgkJLy9yZWRpcmVjdCB0byB0aGUgbWFpbiBzaXRlIHVybCBvciB0aGUgZmFsbGJhY2sgY29uZmlybWF0aW9uIHBhZ2UKCQlNTV9EaWFnbm9zdGljTG9nOjpsb2coTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCAiQ0IgQ29uZmlybWF0aW9uIChmYWxsaW5nIHRocm91Z2ggdG8gZGVmYXVsdCByZWRpcmVjdCkiKTsKCQl3cF9yZWRpcmVjdCgkdGhpcy0+Z2V0RmFsbGJhY2tDb25maXJtYXRpb25QYWdlKCkpOwoJCWV4aXQ7Cgl9CgkKCS8qKgoJICogUHJvY2VzcyBub3RpZmljYXRpb24gb2YgYSB1bi1jYW5jZWxsYXRpb24gZnJvbSBDbGlja0JhbmsKCSAqCgkgKiBAcGFyYW0gYXJyYXkgJHBvc3QKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHByb2Nlc3NVbmNhbmNlbGxhdGlvbk5vdGlmaWNhdGlvbigkcG9zdCkKCXsKCQkkb3JkZXJJdGVtID0gJHRoaXMtPmxvb2t1cE9yZGVySXRlbUZyb21SZWNlaXB0KCRwb3N0WydjdHJhbnNyZWNlaXB0J10pOwoJCWlmIChpc19udWxsKCRvcmRlckl0ZW0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgQ2xpY2tCYW5rIHVuLWNhbmNlbGxhdGlvbjogY291bGQgbm90IGZpbmQgYSBtYXRjaGluZyBvcmRlciBpdGVtIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmlzUmVjdXJyaW5nKCkgJiYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKTsKCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCX0KCQkkdXNlciA9IG5ldyBNTV9Vc2VyKE1NX09yZGVyOjpnZXRVc2VySWRCeU9yZGVySWQoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKSk7CgkJcmV0dXJuIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbkFjY2Vzc0Zyb21PcmRlckl0ZW1zKCR1c2VyLCBhcnJheSgkb3JkZXJJdGVtKSk7Cgl9CgkKCQoJLyoqCgkgKiBQcm9jZXNzIG5vdGlmaWNhdGlvbiBvZiBhIGNhbmNlbGxhdGlvbiBmcm9tIENsaWNrQmFuawoJICoKCSAqIEBwYXJhbSBhcnJheSAkcG9zdAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcHJvY2Vzc0NhbmNlbGxhdGlvbk5vdGlmaWNhdGlvbigkcG9zdCkKCXsKCQkkb3JkZXJJdGVtID0gJHRoaXMtPmxvb2t1cE9yZGVySXRlbUZyb21SZWNlaXB0KCRwb3N0WydjdHJhbnNyZWNlaXB0J10pOwoJCWlmIChpc19udWxsKCRvcmRlckl0ZW0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgQ2xpY2tCYW5rIGNhbmNlbGxhdGlvbjogY291bGQgbm90IGZpbmQgYSBtYXRjaGluZyBvcmRlciBpdGVtIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmlzUmVjdXJyaW5nKCkgJiYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpICE9IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQl9CgkJCgkJcmV0dXJuIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCX0KCQoJCgkvKioKCSAqIFByb2Nlc3Mgbm90aWZpY2F0aW9uIG9mIGEgY2hhcmdlYmFjayBvciBmYWlsZWQgZS1jaGVjayBmcm9tIENsaWNrQmFuawoJICoKCSAqIEBwYXJhbSBhcnJheSAkcG9zdAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcHJvY2Vzc0NoYXJnZWJhY2tOb3RpZmljYXRpb24oJHBvc3QpCgl7CgkJJGxvZ0lQTlJlc3BvbnNlID0gJHRoaXMtPmxvZ0lQTigkcG9zdCk7CgkJJGlwbklkID0gTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkbG9nSVBOUmVzcG9uc2UpPyRsb2dJUE5SZXNwb25zZS0+bWVzc2FnZTpudWxsOwoJCQoJCSRvcmRlckl0ZW0gPSAkdGhpcy0+bG9va3VwT3JkZXJJdGVtRnJvbVJlY2VpcHQoJHBvc3RbJ2N0cmFuc3JlY2VpcHQnXSk7CgkJaWYgKGlzX251bGwoJG9yZGVySXRlbSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyBDbGlja0JhbmsgY2hhcmdlYmFjayBvciBmYWlsZWQgZS1jaGVjayBub3RpZmljYXRpb246IGNvdWxkIG5vdCBmaW5kIGEgbWF0Y2hpbmcgb3JkZXIgaXRlbSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCSRjaGFyZ2ViYWNrQW1vdW50ID0gKCFlbXB0eSgkcG9zdFsnY29yZGVyYW1vdW50J10pICYmIGlzX251bWVyaWMoJHBvc3RbJ2NvcmRlcmFtb3VudCddKSk/KCRwb3N0Wydjb3JkZXJhbW91bnQnXS8xMDApOiRvcmRlckl0ZW0tPmdldEFtb3VudCgpOwoJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIkNoYXJnZWJhY2sgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSwgaXRlbTogeyRvcmRlckl0ZW0tPmdldERlc2NyaXB0aW9uKCl9IjsKCQkkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbUlkLCAkY2hhcmdlYmFja0Ftb3VudCwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRUJBQ0ssZmFsc2UsJHRoaXMtPmdldElkKCksJGlwbklkKTsKCQkKCQlpZiAoJG9yZGVySXRlbS0+aXNSZWN1cnJpbmcoKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpOwoJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJfQoJCSRyZXZva2VBY2Nlc3NSZXNwb25zZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQlyZXR1cm4gJHJldm9rZUFjY2Vzc1Jlc3BvbnNlOwoJfQoJCgkKCS8qKgoJICogUHJvY2VzcyBub3RpZmljYXRpb24gb2YgYSByZWZ1bmQgZnJvbSBDbGlja0JhbmsKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwb3N0CgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwcm9jZXNzUmVmdW5kTm90aWZpY2F0aW9uKCRwb3N0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkbG9va3VwU1FMID0gIlNFTEVDVCBpZCBGUk9NICIuTU1fVEFCTEVfQ0xJQ0tCQU5LX0lQTl9MT0cuIiBXSEVSRSBjdHJhbnNyZWNlaXB0PSVzIjsKCQlpZiAoIWVtcHR5KCRwb3N0WydjcHJvZHR5cGUnXSkgJiYgKHN0cnRvdXBwZXIoJHBvc3RbJ2Nwcm9kdHlwZSddKSA9PSAiUkVDVVJSSU5HIikgJiYgIWVtcHR5KCRwb3N0WydjcHJvY2Vzc2VkcGF5bWVudHMnXSkpCgkJewoJCQkkbG9va3VwU1FMLj0gJHdwZGItPnByZXBhcmUoIiBBTkQgY3Byb2Nlc3NlZHBheW1lbnRzPSVzIiwkcG9zdFsnY3Byb2Nlc3NlZHBheW1lbnRzJ10pOwoJCX0KCQkkbG9va3VwU1FMLj0iIE9SREVSIEJZIGlkIERFU0MgTElNSVQgMSI7CgkJJGxvb2t1cFNRTCA9ICR3cGRiLT5wcmVwYXJlKCRsb29rdXBTUUwsJHBvc3RbJ2N0cmFuc3JlY2VpcHQnXSk7CgkJJG9yaWdpbmFsSVBOSUQgPSAkd3BkYi0+Z2V0X3ZhcigkbG9va3VwU1FMKTsKCQlpZiAoaXNfbnVsbCgkb3JpZ2luYWxJUE5JRCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQ6IENvdWxkIG5vdCBmaW5kIHRoZSBvcmlnaW5hbCBDbGlja0Jhbmsgb3JkZXIiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2ZpbmQgdGhlIG1hdGNoaW5nIHRyYW5zYWN0aW9uCgkJJHRyYW5zYWN0aW9uUm93ID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBXSEVSRSBwYXltZW50X3NlcnZpY2VfaWQ9JXMgQU5EIHBheW1lbnRfc2VydmljZV9kZXRhaWxfaWQ9JXMiLCR0aGlzLT5nZXRJZCgpLCRvcmlnaW5hbElQTklEKSk7CgkJaWYgKGlzX251bGwoJHRyYW5zYWN0aW9uUm93KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZDogQ291bGQgbm90IGZpbmQgdGhlIG1hdGNoaW5nIHRyYW5zYWN0aW9uIGZvciB0aGUgQ2xpY2tCYW5rIGNoYXJnZSBiZWluZyByZWZ1bmRlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vbG9nIHRoZSBuZXcgSVBOCgkJJGlwblJlc3BvbnNlID0gJHRoaXMtPmxvZ0lQTigkcG9zdCk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRpcG5SZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGxvZ2dpbmcgcmVmdW5kIElQTiBmb3Igb3JkZXIgaXRlbSBpZCB7JG9yZGVySXRlbUlkfSIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRpcG5JZCA9ICRpcG5SZXNwb25zZS0+bWVzc2FnZTsKCQkKCQkvL2lmIHRoZSB0cmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlZnVuZGVkLCBiYWlsCgkJaWYgKCFlbXB0eSgkdHJhbnNhY3Rpb25Sb3ctPnJlZnVuZF9pZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQ6IHRoZSBkZXNpZ25hdGVkIENsaWNrQmFuayB0cmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlZnVuZGVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9jcmVhdGUgYSByZWZ1bmQgdHJhbnNhY3Rpb24KCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJSZWZ1bmQgZm9yIHRyYW5zYWN0aW9uIyB7JHRyYW5zYWN0aW9uUm93LT5pZH0iOwoJCSRyZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCR0cmFuc2FjdGlvblJvdy0+b3JkZXJfaWQsCgkJCQkkdHJhbnNhY3Rpb25Sb3ctPm9yZGVyX2l0ZW1faWQsCgkJCQkkcmVmdW5kQW1vdW50LAoJCQkJJHRyYW5zYWN0aW9uUm93LT5jdXJyZW5jeSwKCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCwKCQkJCWZhbHNlLAoJCQkJJHRoaXMtPmdldElkKCksCgkJCQkkaXBuSWQsCgkJCQlNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwKCQkJCSR0cmFuc2FjdGlvblJvdy0+aWQpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXNwb25zZSkpCgkJewoJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoIlVQREFURSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIFNFVCByZWZ1bmRfaWQgPSAlcyBXSEVSRSBpZCA9ICVzIiwkcmVzcG9uc2UtPm1lc3NhZ2UsJHRyYW5zYWN0aW9uUm93LT5pZCkpOwoJCX0KCQkKCQkvL3JlZnVuZHMgb24gQ2xpY2tCYW5rIGF1dG9tYXRpY2FsbHkgY2FuY2VsIHJlY3VycmluZyBzdWJzY3JpcHRpb25zCgkJcmV0dXJuICR0aGlzLT5wcm9jZXNzQ2FuY2VsbGF0aW9uTm90aWZpY2F0aW9uKCRwb3N0KTsKCX0KCQoJCgkvKioKCSAqIFByb2Nlc3Mgbm90aWZpY2F0aW9uIG9mIGEgcmViaWxsIGZyb20gQ2xpY2tCYW5rCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcG9zdAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcHJvY2Vzc1JlYmlsbE5vdGlmaWNhdGlvbigkcG9zdCkKCXsKCQkkbG9nSVBOUmVzcG9uc2UgPSAkdGhpcy0+bG9nSVBOKCRwb3N0KTsKCQkkaXBuSWQgPSBNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRsb2dJUE5SZXNwb25zZSk/JGxvZ0lQTlJlc3BvbnNlLT5tZXNzYWdlOm51bGw7CgkJCgkJJHBpZWNlcyA9IGV4cGxvZGUoIi0iLCRwb3N0WydjdHJhbnNyZWNlaXB0J10pOwoJCSRyb290VHJhbnNSZWNlaXB0ID0gaXNfYXJyYXkoJHBpZWNlcyk/JHBpZWNlc1swXTokcG9zdFsnY3RyYW5zcmVjZWlwdCddOwoJCQoJCSRvcmRlckl0ZW0gPSAkdGhpcy0+bG9va3VwT3JkZXJJdGVtRnJvbVJlY2VpcHQoJHJvb3RUcmFuc1JlY2VpcHQpOwoJCWlmIChpc19udWxsKCRvcmRlckl0ZW0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgQ2xpY2tCYW5rIHJlY3VycmluZyBwYXltZW50IG5vdGlmaWNhdGlvbjogY291bGQgbm90IGZpbmQgYSBtYXRjaGluZyBvcmRlciIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRwYXltZW50QW1vdW50ID0gaXNzZXQoJHBvc3RbJ2NvcmRlcmFtb3VudCddKT8kcG9zdFsnY29yZGVyYW1vdW50J106MC4wMDsKCQkkcGF5bWVudEFtb3VudCA9IGlzX251bWVyaWMoJHBheW1lbnRBbW91bnQpPyhpbnR2YWwoJHBheW1lbnRBbW91bnQpLzEwMCk6MC4wMDsKCQkKCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKTsKCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJSZWN1cnJpbmcgcGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9LCBpdGVtOiB7JG9yZGVySXRlbS0+Z2V0RGVzY3JpcHRpb24oKX0iOwoJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtLT5nZXRJZCgpLCAkcGF5bWVudEFtb3VudCwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULHRydWUsJHRoaXMtPmdldElkKCksJGlwbklkKTsKCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkcpOwoJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCU1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbkFjY2Vzc0Zyb21PcmRlckl0ZW1zKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKSwgYXJyYXkoJG9yZGVySXRlbSkpOyAvL3JlaW5zdGF0ZSBhY2Nlc3MKCQl9CgkJCgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgb3JkZXIgaXRlbSBsaW5rZWQgdG8gdGhlIENsaWNrQmFuayByZWNlaXB0IG51bWJlciAoY3RyYW5zcmVjZWlwdCkgcHJvdmlkZWQKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkcmVjZWlwdE51bWJlciB0aGUgQ2xpY2tCYW5rIHJlY2VpcHQgbnVtYmVyIChjdHJhbnNyZWNlaXB0KSB0byBsb29rdXAKCSAqIEByZXR1cm4gTU1fT3JkZXJJdGVtIGlmIHRoZSBsb29rdXAgaXMgc3VjY2Vzc2Z1bCwgbnVsbCBpZiBpdCBmYWlscwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9va3VwT3JkZXJJdGVtRnJvbVJlY2VpcHQoJHJlY2VpcHROdW1iZXIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChlbXB0eSgkcmVjZWlwdE51bWJlcikpCgkJewoJCQlyZXR1cm4gbnVsbDsKCQl9CgkJCgkJJG9yZGVySXRlbSA9IG51bGw7CQkKCQkkbG9va3VwUXVlcnkgPSAiU0VMRUNUIG9yZGVyX2l0ZW1faWQgRlJPTSAiLk1NX1RBQkxFX0NMSUNLQkFOS19PUkRFUl9JVEVNX0xJTktTLiIgV0hFUkUgY3RyYW5zcmVjZWlwdD0lcyI7CgkJJG9yZGVySXRlbUlkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGxvb2t1cFF1ZXJ5LCRyZWNlaXB0TnVtYmVyKSk7CgkJaWYgKCFpc19udWxsKCRvcmRlckl0ZW1JZCkpCgkJewoJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkb3JkZXJJdGVtSWQpOwoJCQlpZiAoISRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG51bGw7CgkJCX0KCQl9CgkJcmV0dXJuICRvcmRlckl0ZW07Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBDbGlja0JhbmsgcmVjZWlwdCBudW1iZXIgKGN0cmFuc3JlY2VpcHQpIGxpbmtlZCB0byB0aGUgb3JkZXIgaXRlbQoJICoKCSAqIEBwYXJhbSBpbnQgJG9yZGVySXRlbUlkIHRoZSBpZCBvZiB0aGUgb3JkZXIgaXRlbSB0byBsb29rIHVwCgkgKiBAcmV0dXJuIHN0cmluZyByZWNlaXB0IG51bWJlciBvbiBzdWNjZXNzLCBudWxsIG9uIGZhaWx1cmUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxvb2t1cFJlY2VpcHRGcm9tT3JkZXJJdGVtSWQoJG9yZGVySXRlbUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCWlmIChlbXB0eSgkb3JkZXJJdGVtSWQpKQoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCgkJJG9yZGVySXRlbSA9IG51bGw7CgkJJGxvb2t1cFF1ZXJ5ID0gIlNFTEVDVCBjdHJhbnNyZWNlaXB0IEZST00gIi5NTV9UQUJMRV9DTElDS0JBTktfT1JERVJfSVRFTV9MSU5LUy4iIFdIRVJFIG9yZGVyX2l0ZW1faWQ9JXMiOwoJCSRjdHJhbnNyZWNlaXB0ID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGxvb2t1cFF1ZXJ5LCRvcmRlckl0ZW1JZCkpOwoJCXJldHVybiAkY3RyYW5zcmVjZWlwdDsKCX0KCQoJCgkvKioKCSAqIFByb2Nlc3NlcyBpbmZvcm1hdGlvbiBmcm9tIHRoZSBzZXR0aW5ncyBzY3JlZW4gcHJpb3IgdG8gdGhlIHBheW1lbnQgc2VydmljZSBzZXR0aW5ncyBiZWluZyBzYXZlZC4gQWxsb3dzIGZvcgoJICogZGF0YSB0byBiZSByZXRyaWV2ZWQgZnJvbSBDbGlja0JhbmsgdXNpbmcgYWpheCBkdXJpbmcgdGhlIGNvbmZpZ3VyYXRpb24gcHJvY2VzcwoJICoKCSAqIEBwYXJhbSAkcG9zdCBBbiBhcnJheSBjb250YWluaW5nIHRoZSBkYXRhIHBvc3RlZCBmcm9tIHRoZSBwYXltZW50IG1ldGhvZHMgc2V0dGluZ3Mgc2NyZWVuCgkgKiBAcmV0dXJuIEFuIE1NX1Jlc3BvbnNlIG9mIHR5cGUgTU1fUmVzcG9uc2U6OlNVQ0NFU1MgY29udGFpbmluZyBhbnkgcmVxdWVzdGVkIGRhdGEgYXMgdGhlIG1lc3NhZ2UsIG9yIGEgTU1fUmVzcG9uc2Ugb2YgdHlwZSBFUlJPUiBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzSW50ZXJtZWRpYXRlQWN0aW9uKCRwb3N0KQoJewoJCSR0aGlzLT5pbnN0YWxsKCk7CgkJaWYgKCghaXNzZXQoJHBvc3RbJ3BheW1lbnRfc2VydmljZSddWydjbGlja2JhbmsnXSkpIHx8ICEoaXNfYXJyYXkoJHBvc3RbJ3BheW1lbnRfc2VydmljZSddWydjbGlja2JhbmsnXSkpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTm8gY29uZmlndXJhdGlvbiBpbmZvcm1hdGlvbiBzZW50IHRvIHByb2Nlc3NJbnRlcm1lZGlhdGVBY3Rpb24iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkY29uZmlnID0gJHBvc3RbJ3BheW1lbnRfc2VydmljZSddWydjbGlja2JhbmsnXTsKCQoJCWlmICghZW1wdHkoJGNvbmZpZ1snc2VjcmV0X2tleSddKSkKCQl7CgkJCSR0aGlzLT5zZXRTZWNyZXRLZXkoJGNvbmZpZ1snc2VjcmV0X2tleSddKTsKCQl9CgkJCgkJaWYgKCFlbXB0eSgkY29uZmlnWydhcGlfZGV2ZWxvcGVyX2tleSddKSAmJiAhZW1wdHkoJGNvbmZpZ1snYXBpX2NsZXJrX2tleSddKSkKCQl7CgkJCSR0aGlzLT5zZXRBUElEZXZlbG9wZXJLZXkoJGNvbmZpZ1snYXBpX2RldmVsb3Blcl9rZXknXSk7CgkJCSR0aGlzLT5zZXRBUElDbGVya0tleSgkY29uZmlnWydhcGlfY2xlcmtfa2V5J10pOwoJCX0KCQkKCQlpZiAoIWVtcHR5KCRjb25maWdbJ3NpdGVfbmFtZSddKSkKCQl7CgkJCSR0aGlzLT5zZXRTaXRlTmFtZSgkY29uZmlnWydzaXRlX25hbWUnXSk7CgkJfQoKCQkvL3BlcmZvcm0gdGhlIHJlcXVlc3RlZCBhY3Rpb24KCQkkY29uZmlnWydjb21tYW5kJ10gPSAhZW1wdHkoJGNvbmZpZ1snY29tbWFuZCddKT8kY29uZmlnWydjb21tYW5kJ106IiI7CgkJc3dpdGNoICgkY29uZmlnWydjb21tYW5kJ10pIAoJCXsKCQkJY2FzZSAncG9wdWxhdGVfc2l0ZXMnOgoJCQkJLy9yZXRyaWV2ZSB0aGUgbGlzdCBvZiBzaXRlcyB0aGUgdXNlciBoYXMgYWNjZXNzIHRvLiBUaGlzIHdpbGwgYWxzbyBoaWdobGlnaHQgYW4gaW5jb3JyZWN0IHNldHVwIG9mIHRoZWlyIGNsZXJrIGtleQoJCQkJcmV0dXJuICR0aGlzLT5nZXRTaXRlTGlzdCgpOwoJCQkJYnJlYWs7CgkJCWNhc2UgJ3JldHJpZXZlX3Byb2R1Y3RzJzoKCQkJCXJldHVybiAkdGhpcy0+Z2V0UHJvZHVjdE1hcHBpbmdzRGlhbG9nKCk7CgkJCQlicmVhazsKCQkJY2FzZSAnc2F2ZV9wcm9kdWN0X21hcHBpbmdzJzoKCQkJCXJldHVybiAkdGhpcy0+c2F2ZVByb2R1Y3RNYXBwaW5ncygkcG9zdCk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNsaWNrQmFuazogVW5rbm93biBjb21tYW5kIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUaGVyZSBhcmUgcG90ZW50aWFsbHkgaHVuZHJlZHMgb2YgbWFwcGluZ3MgdGhhdCBuZWVkIHRvIGJlIHNhdmVkLiBSYXRoZXIgdGhhbiBpc3N1ZSBtdWx0aXBsZSBpbnNlcnRzIGFuZCByb3VuZC10cmlwIHRvIHRoZSBkYiBmb3IgZWFjaCBvbmUsIHRoaXMgbWV0aG9kCgkgKiB1dGlsaXplcyBteVNRTCdzIGJhdGNoIGluc2VydCBtZWNoYW5pc20gdG8gY3JlYXRlIG9uZSBpbnNlcnQgZm9yIGFsbCB0aGUgcm93cwoJICogCgkgKiBAcGFyYW0gVGhlICRfUE9TVCByZXF1ZXN0IGNvbnRhaW5pbmcgdGhlIG1hcHBpbmdzICRwb3N0CgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBzYXZlUHJvZHVjdE1hcHBpbmdzKCRwb3N0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkd3BkYi0+cXVlcnkoIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQ0xJQ0tCQU5LX1BST0RVQ1RfTElOS1MpOwoJCQoJCSRjbGlja2JhbmtQcm9kdWN0TWFwcGluZ3MgPSBpc3NldCgkcG9zdFsnY2xpY2tiYW5rX3Byb2R1Y3RfbWFwcGluZyddKT8kcG9zdFsnY2xpY2tiYW5rX3Byb2R1Y3RfbWFwcGluZyddOmFycmF5KCk7CgkJCgkJJHByb2R1Y3RfbWFwcGluZ3MgPSBhcnJheSgpOwoJCWZvcmVhY2ggKCRjbGlja2JhbmtQcm9kdWN0TWFwcGluZ3MgYXMgJGtleSA9PiAkdmFsdWUpIAoJCXsKCQkJJHByb2R1Y3RfbWFwcGluZ3NbXSA9ICR3cGRiLT5wcmVwYXJlKCcoJXMsICVzKScsICRrZXksICR2YWx1ZSk7CgkJfQoJCSR2YWx1ZXMgPSBpbXBsb2RlKCcsICcsICRwcm9kdWN0X21hcHBpbmdzKTsKCQkkcmVzID0gJHdwZGItPnF1ZXJ5KCJJTlNFUlQgSU5UTyAiLk1NX1RBQkxFX0NMSUNLQkFOS19QUk9EVUNUX0xJTktTLiIgKGNsaWNrYmFua19wcm9kdWN0X2lkLG1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQpIFZBTFVFUyAkdmFsdWVzIik7CQkKCQlpZiAoJHJlcyA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBzYXZpbmcgQ2xpY2tCYW5rIHByb2R1Y3QgbWFwcGluZ3MiKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyBhbiBhcnJheSBvZiBjdXJsIG9wdGlvbnMgY29udGFpbmluZyBhdXRoZW50aWNhdGlvbiBoZWFkZXJzIGFuZCBoZWFkZXJzIGluc3RydWN0aW5nIHRoZSBDbGlja0JhbmsgQVBJIHRvIHJldHVybiB1cyBKU09OCgkgKiAKCSAqIEByZXR1cm4gbXVsdGl0eXBlOm11bHRpdHlwZTpzdHJpbmcKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDbGlja2JhbmtKU09OQVBJSGVhZGVycygpCgl7CgkJcmV0dXJuIGFycmF5KENVUkxPUFRfSFRUUEhFQURFUj0+YXJyYXkoIkF1dGhvcml6YXRpb246eyR0aGlzLT5nZXRBUElEZXZlbG9wZXJLZXkoKX06eyR0aGlzLT5nZXRBUElDbGVya0tleSgpfSIsICJBY2NlcHQ6YXBwbGljYXRpb24vanNvbiIpKTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygc2l0ZXMgdGhhdCBjYW4gYmUgYWNjZXNzZWQgdXNpbmcgdGhlIHN1cHBsaWVkIGRldiBhbmQgY2xlcmsga2V5cwoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0U2l0ZUxpc3QoKQoJewoJCSRlbmRwb2ludCA9ICJ7JHRoaXMtPmdldEFQSVVybCgpfS9xdWlja3N0YXRzL2FjY291bnRzIjsKCQkkc2l0ZUxpc3RSZXNwb25zZSA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCRlbmRwb2ludCwiR0VUIiwiIiwkdGhpcy0+Z2V0Q2xpY2tiYW5rSlNPTkFQSUhlYWRlcnMoKSk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRzaXRlTGlzdFJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkc2l0ZUxpc3RSZXNwb25zZTsKCQl9CgkJJHJlc3BvbnNlT2JqID0ganNvbl9kZWNvZGUoJHNpdGVMaXN0UmVzcG9uc2UtPm1lc3NhZ2UpOwoJCWlmICgkcmVzcG9uc2VPYmogPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBzaXRlcyBmcm9tIENsaWNrQmFuayIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRzaXRlTmFtZXMgPSBhcnJheSgpOwoJCQoJCS8vIENsaWNrQmFuayBoYXMgZGlmZmVyZW50IHZlcnNpb24gdXNpbmcgZGlmZmVyZW50IHByb3RvY29scyBmb3IgdGhlIHJlc3BvbnNlIGRhdGEuIFRoaXMgZGV0ZWN0cyBpZiBhbiAKCQkvLyBhY2NvdW50RGF0YSBhdHRyaWJ1dGUgaXMgcHJlc2VudCB0byBkZXRlcm1pbmUgd2hpY2ggcHJvdG9jb2wgaXMgYmVpbmcgdXNlZAoJCWlmKGlzc2V0KCRyZXNwb25zZU9iai0+YWNjb3VudERhdGEpKQoJCXsKCQkJJHJlc3BvbnNlT2JqID0gJHJlc3BvbnNlT2JqLT5hY2NvdW50RGF0YTsKCQl9CgkJCgkJaWYoIWlzX2FycmF5KCRyZXNwb25zZU9iaikpCgkJewoJCQkvL3RoZSBkb2N1bWVudGF0aW9uIGlzIHJlYWxseSBwb29yIGFib3V0IHdoYXQgd2UgY2FuIGV4cGVjdCBiYWNrLCBzbyB0aGUgYXNzdW1wdGlvbiBpcyBiZWluZyBtYWRlIHRoYXQgd2l0aCBtdWx0aXBsZSAKCQkJLy9zaXRlcywgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGJlIGFuIGFycmF5IG9mIGpzb24gb2JqZWN0cywgYnV0IGZvciBhIHNpbmdsZSBvYmplY3Qgb25seSB0aGUgb2JqZWN0IGlzIHJldHVybmVkLgoJCQkvL3RoaXMgcGxhY2VzIHNpbmdsZSBvYmplY3RzIGludG8gYW4gYXJyYXksIHNvIHRoYXQgYm90aCBzY2VuYXJpb3MgY2FuIGJlIGhhbmRsZWQgYnkgdGhlIHNhbWUgY29kZSBibG9jawoJCQkkcmVzcG9uc2VPYmogPSBhcnJheSgkcmVzcG9uc2VPYmopOwoJCX0KCQkKCQlmb3JlYWNoICgkcmVzcG9uc2VPYmogYXMgJGFjY291bnQpCgkJewoJCQkvLyBjaGVjayBmb3IgZGF0YSBpbiBmaXJzdCBwb3NzaWJsZSBwcm90b2NvbAoJCQlpZiAoaXNzZXQoJGFjY291bnQtPmFjY291bnREYXRhLT5uaWNrTmFtZSkpCgkJCXsKCQkJCSRzaXRlTmFtZXNbXSA9ICRhY2NvdW50LT5hY2NvdW50RGF0YS0+bmlja05hbWU7CgkJCX0KCQkJCgkJCS8vIGNoZWNrIGZvciBkYXRhIGluIHNlY29uZCBwb3NzaWJsZSBwcm90b2NvbAoJCQllbHNlIGlmKGlzc2V0KCRhY2NvdW50LT5uaWNrTmFtZSkpCgkJCXsKCQkJCSRzaXRlTmFtZXNbXSA9ICRhY2NvdW50LT5uaWNrTmFtZTsKCQkJfQoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRzaXRlTmFtZXMpOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgSFRNTCBmb3IgdGhlIHByb2R1Y3QtbWFwcGluZyBjb25maWd1cmF0aW9uIGRpYWxvZwoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9uIHN1Y2Nlc3MsIGNvbnRhaW5zIHRoZSBodG1sIGZvciB0aGUgZGlhbG9nIGFzIHRoZSBtZXNzYWdlLCBvbiBlcnJvciB0aGUgbWVzc2FnZSBkZXRhaWxzIHRoZSBlcnJvcgoJICovCglwcml2YXRlIGZ1bmN0aW9uIGdldFByb2R1Y3RNYXBwaW5nc0RpYWxvZygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSR0aGlzLT5pbnN0YWxsKCk7IC8vY3JlYXRlcyB0aGUgbmVjZXNzYXJ5IHRhYmxlcyBpZiB0aGlzIGlzIGZpcnN0IHJ1bgoJCQoJCS8vcmV0cmlldmUgY2xpY2tiYW5rIHByb2R1Y3RzIHZpYSBhcGkKCQkkZW5kcG9pbnQgPSAieyR0aGlzLT5nZXRBUElVcmwoKX0vcHJvZHVjdHMvbGlzdD9zaXRlPXskdGhpcy0+Z2V0U2l0ZU5hbWUoKX0iOwoJCSRyZXRyaWV2ZVByb2R1Y3RzUmVzcG9uc2UgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkZW5kcG9pbnQsIkdFVCIsIiIsJHRoaXMtPmdldENsaWNrYmFua0pTT05BUElIZWFkZXJzKCkpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkcmV0cmlldmVQcm9kdWN0c1Jlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkcmV0cmlldmVQcm9kdWN0c1Jlc3BvbnNlOwoJCX0KCQkkcmVzcG9uc2VPYmogPSBqc29uX2RlY29kZSgkcmV0cmlldmVQcm9kdWN0c1Jlc3BvbnNlLT5tZXNzYWdlKTsKCQkKCQkvLyBXaGVuIHRoZXJlJ3Mgb25seSBvbmUgcHJvZHVjdCBpbiBDbGlja0JhbmsgYW5kIHRoZSByZXNwb25zZSBvYmplY3QgaXMgZGVjb2RlZCwgcHJvZHVjdHMtPnByb2R1Y3QgaXMgc2V0IGFzIGFuIG9iamVjdCAKCQkvLyBjb250YWluaW5nIHRoZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgc2luZ2xlIHByb2R1Y3QgaW5zdGVhZCBvZiBiZWluZyBzZXQgYXMgYSBzaW5nbGUtaXRlbSBhcnJheS4gU2luY2UgdGhlIGZvbGxvd2luZyAKCQkvLyBjb2RlIGV4cGVjdHMgcHJvZHVjdHMtPnByb2R1Y3QgdG8gYmUgYW4gYXJyYXksIGF0dGVtcHQgdG8gbW9kaWZ5IHRoZSBKU09OIGluIG9yZGVyIHRvIHN0YW5kYXJkaXplIHRoZSBzdHJ1Y3R1cmUuCgkJaWYgKCgkcmVzcG9uc2VPYmogIT09IGZhbHNlKSAmJiBpc3NldCgkcmVzcG9uc2VPYmotPnRvdGFsX3JlY29yZF9jb3VudCkgJiYgaW50dmFsKCRyZXNwb25zZU9iai0+dG90YWxfcmVjb3JkX2NvdW50KSA9PSAxKQoJCXsKCQkJaWYoaXNzZXQoJHJlc3BvbnNlT2JqLT5wcm9kdWN0cy0+cHJvZHVjdCkgJiYgIWlzX2FycmF5KCRyZXNwb25zZU9iai0+cHJvZHVjdHMtPnByb2R1Y3QpKQoJCQl7CgkJCQkkcHJvZHVjdE9iaiA9ICRyZXNwb25zZU9iai0+cHJvZHVjdHMtPnByb2R1Y3Q7CgkJCQkkcmVzcG9uc2VPYmotPnByb2R1Y3RzLT5wcm9kdWN0ID0gYXJyYXkoKTsKCQkJCSRyZXNwb25zZU9iai0+cHJvZHVjdHMtPnByb2R1Y3RbXSA9ICRwcm9kdWN0T2JqOwoJCQl9CgkJfQoJCQoJCWlmICgoJHJlc3BvbnNlT2JqID09PSBmYWxzZSkgfHwgIWlzc2V0KCRyZXNwb25zZU9iai0+cHJvZHVjdHMtPnByb2R1Y3QpIHx8ICFpc19hcnJheSgkcmVzcG9uc2VPYmotPnByb2R1Y3RzLT5wcm9kdWN0KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgcHJvZHVjdHMgZnJvbSBDbGlja0JhbmsiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoY291bnQoJHJlc3BvbnNlT2JqLT5wcm9kdWN0cy0+cHJvZHVjdCkgPT0gMCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZXJlIGFyZSBubyBwcm9kdWN0cyBjb25maWd1cmVkIGluIENsaWNrQmFuay4gUHJvZHVjdHMgbXVzdCBiZSBjb25maWd1cmVkIGluIENsaWNrQmFuayBwcmlvciB0byBtYXBwaW5nIHRoZW0gdG8gTWVtYmVyTW91c2UgcHJvZHVjdHMiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL3JldHJpZXZlIGxvY2FsIG1hcHBpbmdzCgkJJGxvY2FsTWFwcGluZ3MgPSBhcnJheSgpOwoJCSRsb2NhbE1hcHBpbmdzU3FsID0gIlNFTEVDVCBtZW1iZXJtb3VzZV9wcm9kdWN0X2lkLCBjbGlja2JhbmtfcHJvZHVjdF9pZCBGUk9NICIuTU1fVEFCTEVfQ0xJQ0tCQU5LX1BST0RVQ1RfTElOS1M7CgkJJGxvY2FsTWFwcGluZ3NSZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRsb2NhbE1hcHBpbmdzU3FsKTsKCQlpZiAoIWlzX251bGwoJGxvY2FsTWFwcGluZ3NSZXN1bHRzKSkKCQl7CgkJCWZvcmVhY2ggKCRsb2NhbE1hcHBpbmdzUmVzdWx0cyBhcyAkbG9jYWxNYXBwaW5nUmVzdWx0KQoJCQl7CgkJCQkkbG9jYWxNYXBwaW5nc1skbG9jYWxNYXBwaW5nUmVzdWx0LT5jbGlja2JhbmtfcHJvZHVjdF9pZF0gPSAkbG9jYWxNYXBwaW5nUmVzdWx0LT5tZW1iZXJtb3VzZV9wcm9kdWN0X2lkOwoJCQl9CgkJfQoJCQoJCS8vcGxhY2UgdGhlIGNsaWNrYmFuayBwcm9kdWN0cyAoaWYgYW55KSBpbnRvIGFuIGFycmF5IGFuZCBhZGQgYW4gYXR0cmlidXRlIHRvIGVhY2ggcHJvZHVjdCB0byBpbmRpY2F0ZSBpZi9ob3cgaXQgaXMgbWFwcGVkCgkJJGNsaWNrYmFua1Byb2R1Y3RzID0gYXJyYXkoKTsKCQkkc2t1TmFtZSA9ICJAc2t1IjsgLy90ZXN0aW5nIGhhcyBzaG93ZWQgdGhhdCBjbGlja2JhbmsgcHJvZHVjdHMgaGF2ZSBhbiBpZCBhbmQgYSBza3UsIGJ1dCB0aGUgc2t1IGlzIHBhc3NlZCBiYWNrIGFzIHRoZSBpZCBpbiB0aGUgSVBOLgoJCQkJCQkgICAvL3NvIHRoZSBza3UgbmVlZHMgdG8gYmUgdXNlZCBldmVyeXdoZXJlIGFuIGlkIGlzIHN0b3JlZCBleHRlcm5hbGx5IHRvIHJlZmVyZW5jZSBhIGNsaWNrYmFuayBwcm9kdWN0CgkJZm9yZWFjaCAoJHJlc3BvbnNlT2JqLT5wcm9kdWN0cy0+cHJvZHVjdCBhcyAkcHJvZHVjdE9iaikKCQl7CgkJCWlmIChpc3NldCgkbG9jYWxNYXBwaW5nc1skcHJvZHVjdE9iai0+JHNrdU5hbWVdKSkKCQkJewoJCQkJJHByb2R1Y3RPYmotPm1hcHBlZCA9IHRydWU7CgkJCQkkcHJvZHVjdE9iai0+bWVtYmVybW91c2VfcHJvZHVjdF9pZCA9ICRsb2NhbE1hcHBpbmdzWyRwcm9kdWN0T2JqLT4kc2t1TmFtZV07CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJHByb2R1Y3RPYmotPm1hcHBlZCA9IGZhbHNlOwoJCQl9CgkJCSRjbGlja2JhbmtQcm9kdWN0c1tdID0gJHByb2R1Y3RPYmo7CgkJfQoJCQoJCS8vcmV0cmlldmUgbWVtYmVybW91c2UgcHJvZHVjdHMgYW5kIHB1dCB0aGVtIGludG8gYW4gYXJyYXkKCQkkbWVtYmVybW91c2VQcm9kdWN0cyA9IGFycmF5KCk7CgkJJG1lbWJlcm1vdXNlUHJvZHVjdFNRTCA9ICJTRUxFQ1QgaWQsIG5hbWUsIHByaWNlIEZST00gIi5NTV9UQUJMRV9QUk9EVUNUUzsKCQkkbWVtYmVybW91c2VQcm9kdWN0UmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkbWVtYmVybW91c2VQcm9kdWN0U1FMKTsKCQlpZiAoIWlzX251bGwoJG1lbWJlcm1vdXNlUHJvZHVjdFJlc3VsdHMpKQoJCXsKCQkJZm9yZWFjaCAoJG1lbWJlcm1vdXNlUHJvZHVjdFJlc3VsdHMgYXMgJG1lbWJlcm1vdXNlUHJvZHVjdFJlc3VsdCkKCQkJewoJCQkJLy90aGUgTU1fUHJvZHVjdCBvYmplY3QgaXMgaGVhdmllciB0aGFuIHdlIG5lZWQgb24gdGhlIGZyb250IGVuZCwgc28gaW5zdGVhZCB1c2UgdGhlIGdlbmVyaWMgb2JqZWN0IGNyZWF0ZWQgYnkgdGhlIHByb2R1Y3RzIHF1ZXJ5CgkJCQkvL3RoaXMgaGFzIHRoZSBiZW5lZml0IG9mIGF1dG9tYXRpY2FsbHkgcGFzc2luZyBiYWNrIGFueSBmaWVsZHMgd2UgYWRkIHRvIHRoZSBxdWVyeSBpbiB0aGUgZnV0dXJlCgkJCQkkbWVtYmVybW91c2VQcm9kdWN0c1skbWVtYmVybW91c2VQcm9kdWN0UmVzdWx0LT5pZF0gPSAkbWVtYmVybW91c2VQcm9kdWN0UmVzdWx0OwoJCQl9CgkJfQkKCQkKCQkvL2F0dGFjaCB0aGUgY2xpY2tiYW5rIHByb2R1Y3RzIGFycmF5IGFuZCB0aGUgbWVtYmVybW91c2UgcHJvZHVjdHMgYXJyYXkgdG8gYSByZXN1bHRzIG9iamVjdCwgYW5kIHJldHVybiBpdAkJCgkJJHJlc3VsdHNPYmogPSBuZXcgc3RkQ2xhc3MoKTsKCQkkcmVzdWx0c09iai0+Y2xpY2tiYW5rX3Byb2R1Y3RzID0gJGNsaWNrYmFua1Byb2R1Y3RzOwoJCSRyZXN1bHRzT2JqLT5tZW1iZXJtb3VzZV9wcm9kdWN0cyA9ICRtZW1iZXJtb3VzZVByb2R1Y3RzOwoJCSRkaWFsb2cgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoJHRoaXMtPmdldFRlbXBsYXRlRGlyKCkuIi9jbGlja2JhbmtfY29uZmlndXJlX3Byb2R1Y3RzLmRpYWxvZy5waHAiLCRyZXN1bHRzT2JqKTsKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRkaWFsb2cpOwoJCQoJfQoJCgkKCS8qKgoJICogVmVyaWZpZXMgdGhlIENsaWNrQmFuayBJUE4gdXNpbmcgdGhlaXIgYWxnb3JpdGhtIGZvciBtZXNzYWdlIHZlcmlmaWNhdGlvbi4gRXNzZW50aWFsbHksIGFsbCBvZiB0aGUgUE9TVCBwYXJhbWV0ZXJzCgkgKiBtaW51cyB0aGUgJ2N2ZXJpZnknIGZpZWxkIGFyZSBjb25jYXRlbmF0ZWQgdXNpbmcgcGlwZXMsIGFuZCB0aGVuIHRoZSBzZWNyZXQga2V5IGlzIGFwcGVuZGVkIChhbHNvIHNlcGFyYXRlZCBieSBhIHBpcGUpLAoJICogYW5kIHRoZW4gdGhlIGVudGlyZSBzdHJpbmcgaXMgY29udmVydGVkIHRvIFVURi04IGFuZCBhIHNoYTEgaGFzaCBpcyBjcmVhdGVkIGZyb20gdGhlIHJlc3VsdC4gVGhlIHVwcGVyY2FzZSB2YWx1ZXMgb2YgdGhlIAoJICogZmlyc3QgOCBjaGFyYWN0ZXJzIG9mIHRoYXQgc3RyaW5nIHNob3VsZCBtYXRjaCB0aGUgY29udGVudHMgb2YgJHJlcXVlc3RbJ2N2ZXJpZnknXQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgVGhlICRfUE9TVCBhcnJheSByZXByZXNlbnRpbmcgdGhlIHJlcXVlc3QKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHZlcmlmaWNhdGlvbiBpcyBzdWNjZXNzZnVsLCBmYWxzZSBpZiBpdCBmYWlscwoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gdmVyaWZ5SVBOKCRyZXF1ZXN0KQoJewoJCQoJCWlmICghaXNfYXJyYXkoJHJlcXVlc3QpIHx8ICFpc3NldCgkcmVxdWVzdFsnY3ZlcmlmeSddKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJJGN2ZXJpZnkgPSAkcmVxdWVzdFsnY3ZlcmlmeSddOwoJCXVuc2V0KCRyZXF1ZXN0WydjdmVyaWZ5J10pOwoJCWtzb3J0KCRyZXF1ZXN0KTsKCQkkcmF3U3RyaW5nID0gaW1wbG9kZSgifCIsJHJlcXVlc3QpOwoJCSRyYXdTdHJpbmcgLj0gInx7JHRoaXMtPnNlY3JldEtleX0iOwoJCSRjYWxjZWRWZXJpZnkgPSBzaGExKG1iX2NvbnZlcnRfZW5jb2RpbmcoJHJhd1N0cmluZywgIlVURi04IikpOwoJCSRjYWxjZWRWZXJpZnkgPSBzdHJ0b3VwcGVyKHN1YnN0cigkY2FsY2VkVmVyaWZ5LDAsOCkpOwoJCXJldHVybiAoJGNhbGNlZFZlcmlmeSA9PSAkY3ZlcmlmeSk7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGFuIG9yZGVyIGZyb20gYW4gaW5jb21pbmcgSVBOIHJlcXVlc3QsIGlmIHBvc3NpYmxlCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGUgSVBOIHJlcXVlc3QgdG8gYXR0ZW1wdCB0byBjcmVhdGUgYW4gb3JkZXIgZnJvbQoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gY3JlYXRlT3JkZXJGcm9tSVBOKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL2ZpcnN0IGxvZyB0aGUgaXBuCgkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIElQTjogcmVxdWVzdCA9ICIucHJpbnRfcigkcmVxdWVzdCx0cnVlKSk7CgkJJGxvZ0lQTlJlc3BvbnNlID0gJHRoaXMtPmxvZ0lQTigkcmVxdWVzdCk7CgkJJGlwbklkID0gKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJGxvZ0lQTlJlc3BvbnNlKSk/JGxvZ0lQTlJlc3BvbnNlLT5tZXNzYWdlOiIiOwoJCQoJCS8vbWFrZSBzdXJlIHJlcXVpcmVkIGZpZWxkcyBleGlzdAoJCSRyZXF1aXJlZCA9IGFycmF5KCJjY3VzdGVtYWlsIiA9PiAiY3VzdG9tZXIgZW1haWwiLAoJCQkJCQkgICJjcHJvZGl0ZW0iICA9PiAicHJvZHVjdCIsCgkJCQkJCSAgImN0cmFuc3JlY2VpcHQiID0+ICJDbGlja0JhbmsgcmVjZWlwdCBudW1iZXIiICAgCgkJKTsKCQkKCQlmb3JlYWNoICgkcmVxdWlyZWQgYXMgJGs9PiR2KQoJCXsKCQkJaWYgKGVtcHR5KCRyZXF1ZXN0WyRrXSkpCgkJCXsKCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBJUE46IE1pc3NpbmcgcmVxdWlyZWQgZmllbGQgeyRyZXF1ZXN0WyRrXX0iKTsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCBjcmVhdGUgQ2xpY2tCYW5rIG9yZGVyIHdpdGhvdXQgYSB7JHZ9ICh7JGt9KSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJLy9jcmVhdGUgb3JkZXIKCQkkY2JSZWNlaXB0ID0gJHJlcXVlc3RbJ2N0cmFuc3JlY2VpcHQnXTsKCQkkY2JQcm9kdWN0SUQgPSAkcmVxdWVzdFsnY3Byb2RpdGVtJ107CgkJJGVtYWlsID0gJHJlcXVlc3RbJ2NjdXN0ZW1haWwnXTsKCQkkY3VycmVuY3kgPSBpc3NldCgkcmVxdWVzdFsnY2N1cnJlbmN5J10pPyRyZXF1ZXN0WydjY3VycmVuY3knXToiVVNEIjsKCQkKCQkkZmlyc3RuYW1lID0gIWVtcHR5KCRyZXF1ZXN0WydjY3VzdGZpcnN0bmFtZSddKT91Y2ZpcnN0KHN0cnRvbG93ZXIoJHJlcXVlc3RbJ2NjdXN0Zmlyc3RuYW1lJ10pKToiIjsKCQkkbGFzdG5hbWUgID0gIWVtcHR5KCRyZXF1ZXN0WydjY3VzdGxhc3RuYW1lJ10pP3VjZmlyc3Qoc3RydG9sb3dlcigkcmVxdWVzdFsnY2N1c3RsYXN0bmFtZSddKSk6IiI7CgkJJGJpbGxpbmdBZGRyZXNzID0gbmV3IE1NX0N1c3RvbWVyQWRkcmVzcygkZmlyc3RuYW1lLCRsYXN0bmFtZSwiIiwiIiwiIiwkcmVxdWVzdFsnY2N1c3RzdGF0ZSddLCRyZXF1ZXN0WydjY3VzdHppcCddLCIiLCRyZXF1ZXN0WydjY3VzdGNjJ10pOwoJCSRzaGlwcGluZ0FkZHJlc3MgPSBudWxsOwoJCSRvcmRlckFtb3VudCA9ICFlbXB0eSgkcmVxdWVzdFsnY29yZGVyYW1vdW50J10pPyhpbnR2YWwoJHJlcXVlc3RbJ2NvcmRlcmFtb3VudCddKS8xMDApOiIiOyAvL2NsaWNrYmFuayBzZW5kcyBhbW91bnRzIGFzIGludGVnZXJzCgkJaWYgKCFlbXB0eSgkcmVxdWVzdFsnY2N1c3RhZGRyMSddKSB8fCAhZW1wdHkoJHJlcXVlc3RbJ2NjdXN0YWRkcjInXSkpCgkJewoJCQkkc2hpcHBpbmdBZGRyZXNzID0gbmV3IE1NX0N1c3RvbWVyQWRkcmVzcygkZmlyc3RuYW1lLCRsYXN0bmFtZSwkcmVxdWVzdFsnY2N1c3RhZGRyMSddLCRyZXF1ZXN0WydjY3VzdGFkZHIyJ10sJHJlcXVlc3RbJ2NjdXN0Y2l0eSddLCRyZXF1ZXN0WydjY3VzdHNoaXBwaW5nc3RhdGUnXSwkcmVxdWVzdFsnY2N1c3RzaGlwcGluZ3ppcCddLCIiLCRyZXF1ZXN0WydjY3VzdHNoaXBwaW5nY291bnRyeSddKTsKCQl9CgkJCgkJJGFmZklkID0gIWVtcHR5KCRyZXF1ZXN0WydjdHJhbnNhZmZpbGlhdGUnXSk/JHJlcXVlc3RbJ2N0cmFuc2FmZmlsaWF0ZSddOiIiOwoJCQoJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBJUE46IGNoZWNraW5nIGZvciBleGlzdGVuY2Ugb2YgY2xpY2tiYW5rIG9yZGVyIyB7JGNiUmVjZWlwdH0iKTsKCQlpZiAoISR0aGlzLT5jaGVja0ZvckV4aXN0aW5nT3JkZXIoJGNiUmVjZWlwdCkpCgkJewoJCQlNTV9EaWFnbm9zdGljTG9nOjpsb2coTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCAiQ0IgSVBOOiBvcmRlciBub3QgZm91bmQsIGNyZWF0aW5nIG9yZGVyIGZvciBjbGlja2Jhbmsgb3JkZXIjIHskY2JSZWNlaXB0fSIpOwoJCQkkY3JlYXRlUmVzcG9uc2UgPSAkdGhpcy0+X19jcmVhdGVPcmRlcigkZmlyc3RuYW1lLCAkbGFzdG5hbWUsICRlbWFpbCwgJGNiUHJvZHVjdElELCAkY2JSZWNlaXB0LCAkYmlsbGluZ0FkZHJlc3MsICRzaGlwcGluZ0FkZHJlc3MsICRhZmZJZCwgJG9yZGVyQW1vdW50LCRpcG5JZCk7CgkJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkY3JlYXRlUmVzcG9uc2UpKQoJCQl7CgkJCQlNTV9EaWFnbm9zdGljTG9nOjpsb2coTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCAiQ0IgSVBOOiBlcnJvciBjcmVhdGluZyBjbGlja2Jhbmsgb3JkZXIjIHskY2JSZWNlaXB0fToiLiRjcmVhdGVSZXNwb25zZS0+bWVzc2FnZSk7CgkJCQlyZXR1cm4gJGNyZWF0ZVJlc3BvbnNlOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCS8vb3JkZXIgZXhpc3RzLCBsb29rdXAgYW5kIHVwZGF0ZSB0aGUgdXNlcidzIG5hbWUsIGFuZCB0aGUgb3JkZXIgYW1vdW50CgkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBJUE46IG9yZGVyIGFscmVhZHkgZXhpc3RzIGZvciBjbGlja2JhbmsgcmVjZWlwdCMgeyRjYlJlY2VpcHR9LCByZXRyaWV2aW5nIGl0Iik7CgkJCSRvcmRlckl0ZW0gPSAkdGhpcy0+bG9va3VwT3JkZXJJdGVtRnJvbVJlY2VpcHQoJGNiUmVjZWlwdCk7CgkJCWlmICghaXNfbnVsbCgkb3JkZXJJdGVtKSkKCQkJewoJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIElQTjogb3JkZXIgaXRlbSBsb29rdXAgc3VjY2Vzc2Z1bCIpOwoJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQlpZiAoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIElQTjogb3JkZXIgc3VjY2Vzc2Z1bGx5IHJldHJpZXZlZCIpOwoJCQkJCWlmICgkb3JkZXJBbW91bnQgIT09ICIiKQoJCQkJCXsKCQkJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIElQTjogbW9kaWZ5aW5nIG9yZGVyIGlkIHskb3JkZXItPmdldElkKCl9IHRvIGhhdmUgbmV3IHRvdGFsIG9mICRvcmRlckFtb3VudCIpOwoJCQkJCQkkb3JkZXItPnNldFRvdGFsKCRvcmRlckFtb3VudCk7CgkJCQkJCSRvcmRlci0+c2V0Q3VycmVuY3koJGN1cnJlbmN5KTsKCQkJCQkJJG9yZGVyUHJvZHVjdEl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCQkJCQkkb3JkZXJJdGVtID0gcmVzZXQoJG9yZGVyUHJvZHVjdEl0ZW1zKTsKCQkJCQkJJG9yZGVySXRlbS0+c2V0QW1vdW50KCRvcmRlckFtb3VudCk7CgkJCQkJCSRvcmRlckl0ZW0tPnNldFRvdGFsKCRvcmRlckFtb3VudCk7CgkJCQkJCSRvcmRlci0+Y29tbWl0RGF0YSgpOwoJCQkJCQkKCQkJCQkJLy9ub3cgdXBkYXRlIHRoZSB0cmFuc2FjdGlvbgoJCQkJCQkkdHJhbnNQYXJhbXMgPSBhcnJheSgib3JkZXJfaWQiPT4kb3JkZXJJdGVtLT5nZXRPcmRlcklkKCksCgkJCQkJCQkJCQkJICJvcmRlcl9pdGVtX2lkIj0+JG9yZGVySXRlbS0+Z2V0SWQoKSwKCQkJCQkJCQkJCQkgInBheW1lbnRfc2VydmljZV9pZCI9PiR0aGlzLT5nZXRJZCgpKTsKCQkJCQkJCgkJCQkJCSRjaGFyZ2VUcmFuc1BhcmFtcyA9IGFycmF5KCJ0cmFuc2FjdGlvbl90eXBlIj0+TU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRSkgKyAkdHJhbnNQYXJhbXM7CgkJCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLCBhcnJheSgiYW1vdW50Ij0+JG9yZGVyQW1vdW50LCAiY3VycmVuY3kiPT4kY3VycmVuY3kpLCAkY2hhcmdlVHJhbnNQYXJhbXMpOyAvL3VwZGF0ZSB0aGUgY2hhcmdlCgkJCQkJCSRwYXltZW50VHJhbnNQYXJhbXMgPSBhcnJheSgidHJhbnNhY3Rpb25fdHlwZSI9Pk1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UKSArICR0cmFuc1BhcmFtczsKCQkJCQkJJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0csIGFycmF5KCJhbW91bnQiPT4oLSRvcmRlckFtb3VudCksICJjdXJyZW5jeSI9PiRjdXJyZW5jeSksJHBheW1lbnRUcmFuc1BhcmFtcyk7IC8vdXBkYXRlIHRoZSBwYXltZW50CgkJCQkJfQoJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBJUE46IGF0dGVtcHRpbmcgdG8gbG9va3VwIGN1c3RvbWVyIG9uIGV4aXN0aW5nIG9yZGVyIik7CgkJCQkJJHVzZXIgPSAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJCQkJaWYgKCR1c2VyLT5pc1ZhbGlkKCkgJiYgKCR1c2VyLT5nZXRFbWFpbCgpID09ICRlbWFpbCkpIC8vcHJlY2F1dGlvbgoJCQkJCXsKCQkJCQkJTU1fRGlhZ25vc3RpY0xvZzo6bG9nKE1NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUiwgIkNCIElQTjogY3VzdG9tZXIgZnJvbSByZXRyaWV2ZWQgb3JkZXIgd2FzIHZhbGlkLCB1cGRhdGluZyBuYW1lIGZpZWxkcyB3aXRoIElQTiB2YWx1ZXMiKTsKCQkJCQkJJHVzZXItPnNldEZpcnN0TmFtZSgkZmlyc3RuYW1lKTsKCQkJCQkJJHVzZXItPnNldExhc3ROYW1lKCRsYXN0bmFtZSk7CgkJCQkJCSR1c2VyLT5jb21taXREYXRhKCk7CgkJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJDQiBJUE46IGN1c3RvbWVyIGZpcnN0OiB7JGZpcnN0bmFtZX0gLCBsYXN0OiB7JGxhc3RuYW1lfSIpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQlNTV9EaWFnbm9zdGljTG9nOjpsb2coTU1fRGlhZ25vc3RpY0xvZzo6JE1NX0VSUk9SLCAiQ0IgSVBOOiBjb21wbGV0ZWQgSVBOIGNyZWF0ZSBtZXRob2QiKTsKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBDaGVja3MgdG8gc2VlIGlmIGEgQ2xpY2tCYW5rIHJlY2VpcHQgbnVtYmVyIGFscmVhZHkgaGFzIGFuIG9yZGVyIGNyZWF0ZWQKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkcmVjZWlwdE51bWJlciBUaGUgQ2xpY2tCYW5rIHJlY2VpcHQgbnVtYmVyIHRvIGNoZWNrCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvciBmYWxzZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIGNoZWNrRm9yRXhpc3RpbmdPcmRlcigkcmVjZWlwdE51bWJlcikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGV4aXN0aW5nU1FMID0gIlNFTEVDVCBjb3VudCgqKSBhcyBleGlzdGluZyBGUk9NICIuTU1fVEFCTEVfQ0xJQ0tCQU5LX09SREVSX0lURU1fTElOS1MuIiBXSEVSRSBjdHJhbnNyZWNlaXB0PSVzIjsKCQkkbnVtT3JkZXJzID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGV4aXN0aW5nU1FMLCRyZWNlaXB0TnVtYmVyKSk7CgkJaWYgKGlzX251bGwoJG51bU9yZGVycykpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCXJldHVybiAoaW50dmFsKCRudW1PcmRlcnMpID4gMCk7Cgl9CgkKCQoJLyoqCgkgKiBfX2NyZWF0ZU9yZGVyKCkgaXMgYW4gaW50ZXJuYWwgbWV0aG9kIHRoYXQgY3JlYXRlcyBhbiBvcmRlciB1c2luZyBDbGlja0Jhbmstc3VwcGxpZWQgcGFyYW1ldGVycwoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRmaXJzdG5hbWUKCSAqIEBwYXJhbSBzdHJpbmcgJGxhc3RuYW1lCgkgKiBAcGFyYW0gc3RyaW5nICRlbWFpbAoJICogQHBhcmFtIHN0cmluZyAkY2JQcm9kdWN0SUQKCSAqIEBwYXJhbSBzdHJpbmcgJGNiUmVjZWlwdAoJICogQHBhcmFtIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MKCSAqIEBwYXJhbSBNTV9DdXN0b21lckFkZHJlc3MgJHNoaXBwaW5nQWRkcmVzcwoJICogQHBhcmFtIHN0cmluZyAkYWZmSWQKCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBNTV9PcmRlciBvYmplY3Qgb24gc3VjY2VzcyBvciBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2Ugb24gZXJyb3IKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBfX2NyZWF0ZU9yZGVyKCRmaXJzdG5hbWUsICRsYXN0bmFtZSwgJGVtYWlsLCAkY2JQcm9kdWN0SUQsICRjYlJlY2VpcHQsIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MsIE1NX0N1c3RvbWVyQWRkcmVzcyAkc2hpcHBpbmdBZGRyZXNzPW51bGwsICRhZmZJZD0iIiwgJG9yZGVyQW1vdW50PSIiLCRpcG5JZD1udWxsLCAkY3VycmVuY3k9IiIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vaW5zZXJ0IGEgcGxhY2Vob2xkZXIgaW4gdGhlIG9yZGVyIGl0ZW0gbGluayB0YWJsZSB0byBsZXQgb3RoZXIgcHJvY2Vzc2VzIGtub3cgdGhpcyBvcmRlciBpcyBiZWluZyBoYW5kbGVkCgkJJGxpbmtEYXRhID0gYXJyYXkoImN0cmFuc3JlY2VpcHQiID0+ICRjYlJlY2VpcHQsCgkJCQkib3JkZXJfaXRlbV9pZCIgPT4gMAoJCSk7CgkJJHdwZGItPmluc2VydChNTV9UQUJMRV9DTElDS0JBTktfT1JERVJfSVRFTV9MSU5LUywgJGxpbmtEYXRhKTsKCQkKCQl0cnkgCgkJewkKCQkJLy9zZXQgdGhlIGN1cnJlbmN5IHRvIHRoZSBhY3RpdmUgY3VycmVuY3kgaWYgb25lIHdhcyBub3Qgc3VwcGxpZWQKCQkJJGN1cnJlbmN5ID0gIWVtcHR5KCRjdXJyZW5jeSk/JGN1cnJlbmN5Ok1NX0N1cnJlbmN5VXRpbDo6Z2V0QWN0aXZlQ3VycmVuY3koKTsKCQkJLy9yZXRyaWV2ZSBtYXRjaGluZyBtbSBwcm9kdWN0CgkJCSRzcWwgPSAiU0VMRUNUIG1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgZnJvbSAiLk1NX1RBQkxFX0NMSUNLQkFOS19QUk9EVUNUX0xJTktTLiIgd2hlcmUgY2xpY2tiYW5rX3Byb2R1Y3RfaWQ9JXMiOwoJCQkkcHJvZHVjdElkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHNxbCwkY2JQcm9kdWN0SUQpKTsKCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcHJvZHVjdElkKTsKCQkJaWYgKGlzX251bGwoJHByb2R1Y3RJZCkgfHwgISRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXRocm93IG5ldyBFeGNlcHRpb24oIkNhbm5vdCBjcmVhdGUgQ2xpY2tCYW5rIG9yZGVyIGJlY2F1c2UgQ2xpY2tCYW5rIHByb2R1Y3QgaWQgeyRjYlByb2R1Y3RJRH0gaXMgbm90IGxpbmtlZCB0byBhbnkgbG9jYWwgcHJvZHVjdHMiKTsKCQkJfQoJCQkKCQkJJHVzZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkZW1haWwpOwoJCQlpZiAoISR1c2VyLT5pc1ZhbGlkKCkpIC8vdGhpcyBpcyBhIG5ldyBjdXN0b21lcgoJCQl7CgkJCQkvL1RPRE86IGlmIHRoaXMgaXMgYW4gdXBzZWxsLCBzaG91bGQgd2UgY2hlY2sgY2FuIHRoZSBjdXN0b21lciBiZSBwdWxsZWQgZnJvbSB0aGUgb3JpZ2luYWwgb3JkZXI/CgkJCQkkdXNlci0+c2V0Rmlyc3ROYW1lKCRmaXJzdG5hbWUpOwoJCQkJJHVzZXItPnNldExhc3ROYW1lKCRsYXN0bmFtZSk7CgkJCQkkdXNlci0+c2V0RW1haWwoJGVtYWlsKTsKCQkJCWlmICghZW1wdHkoJGFmZklkKSkKCQkJCXsKCQkJCQkkdXNlci0+c2V0T3JpZ2luQWZmaWxpYXRlSWQoJGFmZklkKTsKCQkJCX0KCQkJCSR1c2VyLT5jb21taXREYXRhKCk7CgkJCX0KCQkJCgkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigpOwoJCQkkb3JkZXItPnNldEN1c3RvbWVyKCR1c2VyKTsKCQkJJG9yZGVyLT5hZGRQcm9kdWN0KCRwcm9kdWN0KTsKCQkJCgkJCSRvcmRlclByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJJG9yZGVySXRlbSA9IHJlc2V0KCRvcmRlclByb2R1Y3RJdGVtcyk7IC8vc2hvdWxkIG9ubHkgYmUgb25lIHByb2R1Y3QsIGdldCBhIHJlZmVyZW5jZSB0byBpdAoJCQkJCgkJCWlmICgkb3JkZXJJdGVtLT5pc1JlY3VycmluZygpKQoJCQl7CgkJCQkvL2luIG90aGVyIHNlcnZpY2VzIHRoaXMgaXMgZG9uZSBhZnRlciBwYXltZW50IGlzIHJlY2VpdmVkLCBob3dldmVyIHdpdGggY2xpY2tiYW5rLCBwYXltZW50IGhhcHBlbnMgcHJpb3IgdG8gb3JkZXIgY3JlYXRpb24gc28gd2Ugc2V0IHRoZSBzdGF0dXMgaW4gdGhpcyBwcm9jZXNzCgkJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJCX0KCQkJCgkJCWlmICgkb3JkZXJBbW91bnQgIT09ICIiKQoJCQl7CgkJCQkvL2FuIGFtb3VudCB3YXMgcGFzc2VkIGluCgkJCQkkb3JkZXItPnNldFRvdGFsKCRvcmRlckFtb3VudCk7CgkJCQkkb3JkZXItPnNldEN1cnJlbmN5KCRjdXJyZW5jeSk7CgkJCQkkb3JkZXJJdGVtLT5zZXRBbW91bnQoJG9yZGVyQW1vdW50KTsKCQkJCSRvcmRlckl0ZW0tPnNldEN1cnJlbmN5KCRjdXJyZW5jeSk7CgkJCQkkb3JkZXJJdGVtLT5zZXRUb3RhbCgkb3JkZXJBbW91bnQpOwoJCQl9CgkJCQoJCQkkb3JkZXItPnNldEJpbGxpbmdBZGRyZXNzKCRiaWxsaW5nQWRkcmVzcyk7CgkJCWlmICgkcHJvZHVjdC0+aXNTaGlwcGFibGUoKSkKCQkJewoJCQkJJG9yZGVyLT5zZXRTaGlwcGFibGUodHJ1ZSk7CgkJCQkkb3JkZXItPnNldFNoaXBwaW5nQWRkcmVzcygkc2hpcHBpbmdBZGRyZXNzKTsKCQkJfQoJCQkkb3JkZXItPnNldFBheW1lbnRNZXRob2QoJHRoaXMpOwoJCQkKCQkJLy9hZGQgYWZmaWxpYXRlCgkJCWlmICghZW1wdHkoJGFmZklkKSkKCQkJewoJCQkJJG9yZGVyLT5zZXRBZmZpbGlhdGVJZCgkYWZmSWQpOwoJCQl9CgkJCSRvcmRlci0+c2V0T3JkZXJTdGF0dXMoTU1fT1JERVI6OiRQQUlEX0NPTVBMRVRFKTsKCQkJJG9yZGVyQ3JlYXRpb25SZXNwb25zZSA9ICRvcmRlci0+Y29tbWl0RGF0YSgpOwoJCQkKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRvcmRlckNyZWF0aW9uUmVzcG9uc2UpKQoJCQl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCRvcmRlckNyZWF0aW9uUmVzcG9uc2UtPm1lc3NhZ2UpOyAvL2hhdmUgdG8gYmFpbCBvbiBlcnJvciBiZWNhdXNlIHdpdGhvdXQgYW4gb3JkZXIsIHRoZXJlIGlzIG5vdGhpbmcgdG8gbGluayBhIHRyYW5zYWN0aW9uIHRvCgkJCX0KCQkJCgkJCS8vb3JkZXIgaXMgY3JlYXRlZCwgbm93IGxvZyB0aGUgdHJhbnNhY3Rpb24KCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0sIGl0ZW06IHskb3JkZXJJdGVtLT5nZXREZXNjcmlwdGlvbigpfSI7CgkJCU1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSwgJG9yZGVyLT5nZXRUb3RhbCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCxmYWxzZSwkdGhpcy0+aWQsJGlwbklkKTsKCQkJCgkJCS8vbm93IGxpbmsgdGhlIGN0cmFuc3JlY2VpcHQgdG8gdGhlIG9yZGVyIGl0ZW0gaWQuIGN0cmFuc3JlY2VpcHQgc3RheXMgY29uc3RhbnQgdGhyb3VnaG91dCBmdXR1cmUgcmViaWxscywgc28gaXRzIGFuIGVmZmVjdGl2ZSB3YXkgdG8ga2VlcCB0cmFjayBvZiBhIHByb2R1Y3QKCQkJJGxpbmtEYXRhID0gYXJyYXkoIm9yZGVyX2l0ZW1faWQiID0+ICRvcmRlckl0ZW0tPmdldElkKCkpOwoJCQkkd3BkYi0+dXBkYXRlKE1NX1RBQkxFX0NMSUNLQkFOS19PUkRFUl9JVEVNX0xJTktTLCAkbGlua0RhdGEsIGFycmF5KCJjdHJhbnNyZWNlaXB0IiA9PiAkY2JSZWNlaXB0KSk7CgkJCQoJCQkvL25vdyBhc3NpZ24gYW55IGFjY2VzcyBncmFudGVkIGJ5IHRoZSBvcmRlcgoJCQkkYWNjZXNzUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXIoJG9yZGVyKTsKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRhY2Nlc3NSZXNwb25zZSkpCgkJCXsKCQkJCSRhY2Nlc3NSZXNwb25zZS0+bWVzc2FnZSA9ICJFcnJvciBhc3NpZ25pbmcgYWNjZXNzIG9yZGVyIHdpdGggb3JkZXIgaWQgeyRvcmRlci0+Z2V0SWQoKX06IHskYWNjZXNzUmVzcG9uc2UtPm1lc3NhZ2V9IjsKCQkJCXJldHVybiAkYWNjZXNzUmVzcG9uc2U7CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkb3JkZXIpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJLy93ZSBuZWVkIHRvIGtub3cgaWYgYW55dGhpbmcgd2VudCB3cm9uZywgc28gd2UgY2FuIGRlbGV0ZSB0aGUgcGxhY2Vob2xkZXIKCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0NMSUNLQkFOS19PUkRFUl9JVEVNX0xJTktTLiIgV0hFUkUgY3RyYW5zcmVjZWlwdD0lcyBBTkQgb3JkZXJfaXRlbV9pZCA9IDAiLCRjYlJlY2VpcHQpKTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZS0+Z2V0TWVzc2FnZSgpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIExvZ3MgYSBDbGlja0JhbmsgSVBOIHJlcXVlc3QuCgkgKgoJICogQHBhcmFtIGFycmF5ICRyZXF1ZXN0IFRoaXMgaXMgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgSVBOIHZhcmlhYmxlcywgdHlwaWNhbGx5IGlkZW50aWNhbCB0byAkX1BPU1QKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgaWQgb2YgdGhlIHJvdyBpbiB0aGUgSVBOIGxvZyB0YWJsZSBpZiBzdWNjZXNzZnVsLCBvciBhbiBlcnJvciBtZXNzYWdlIGlmIGZhaWxlZAoJICovCglwcml2YXRlIGZ1bmN0aW9uIGxvZ0lQTigkcmVxdWVzdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHJlcXVpcmVkID0gYXJyYXkoImN0cmFuc3JlY2VpcHQiLCJjdHJhbnNhY3Rpb24iKTsKCQkkbWlzc2luZyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHJlcXVpcmVkIGFzICRrKQoJCXsKCQkJaWYgKGVtcHR5KCRyZXF1ZXN0WyRrXSkpCgkJCXsKCQkJCSRtaXNzaW5nW10gPSAkazsKCQkJfQoJCX0KCQkKCQlpZiAoY291bnQoJG1pc3NpbmcpID4gMCkKCQl7CgkJCSRtaXNzaW5nU3RyaW5nID0gaW1wbG9kZSgiLCIsJG1pc3NpbmcpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgbG9nIENsaWNrQmFuayBJUE4gYmVjYXVzZSB0aGUgZm9sbG93aW5nIHJlcXVpcmVkIGZpZWxkcyB3ZXJlIG1pc3Npbmc6Ii4kbWlzc2luZ1N0cmluZyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGlwbkRhdGEgPSBhcnJheSgiY3RyYW5zcmVjZWlwdCIgICAgICA9PiAgICRyZXF1ZXN0WydjdHJhbnNyZWNlaXB0J10sCgkJCQkJCSAiY3Vwc2VsbHJlY2VpcHQiICAgICA9PiAgICRyZXF1ZXN0WydjdXBzZWxscmVjZWlwdCddLAoJCQkJCQkgImN0cmFuc2FjdGlvbiIgICAgICAgPT4gICAkcmVxdWVzdFsnY3RyYW5zYWN0aW9uJ10sCgkJCQkJCSAiY29yZGVyYW1vdW50IiAgICAgICA9PiAgICRyZXF1ZXN0Wydjb3JkZXJhbW91bnQnXSwKCQkJCQkJICJjdHJhbnNhZmZpbGlhdGUiICAgID0+ICAgJHJlcXVlc3RbJ2N0cmFuc2FmZmlsaWF0ZSddLAoJCQkJCQkgImNyZWJpbGxhbW50IiAgICAgICAgPT4gICAkcmVxdWVzdFsnY3JlYmlsbGFtbnQnXSwKCQkJCQkJICJjcHJvY2Vzc2VkcGF5bWVudHMiID0+ICAgJHJlcXVlc3RbJ2Nwcm9jZXNzZWRwYXltZW50cyddLAoJCQkJCQkgImNmdXR1cmVwYXltZW50cyIgICAgPT4gICAkcmVxdWVzdFsnY2Z1dHVyZXBheW1lbnRzJ10sCgkJCQkJCSAiY25leHRwYXltZW50ZGF0ZSIgICA9PiAgICRyZXF1ZXN0WydjbmV4dHBheW1lbnRkYXRlJ10sCgkJCQkJCSAiY3JlYmlsbHN0YXR1cyIgICAgICA9PiAgICRyZXF1ZXN0WydjcmViaWxsc3RhdHVzJ10sCgkJCQkJCSAiY3RyYW5zdGltZSIgICAgICAgICA9PiAgICRyZXF1ZXN0WydjdHJhbnN0aW1lJ10KCQkpOwoJCQoJCSRpcG5EYXRhWydyZWN1cnJpbmcnXSA9IDA7CgkJaWYgKCFlbXB0eSgkcmVxdWVzdFsnY3Byb2R0eXBlJ10pICYmIChzdHJ0b3VwcGVyKCRyZXF1ZXN0WydjcHJvZHR5cGUnXSkgPT0gIlJFQ1VSUklORyIpKQoJCXsKCQkJJGlwbkRhdGFbJ3JlY3VycmluZyddID0gMTsKCQl9CgkJCgkJJGlwbkRhdGFbJ2RhdGVfcmVjZWl2ZWQnXSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0NMSUNLQkFOS19JUE5fTE9HLCRpcG5EYXRhKTsKCQlpZiAoJHJlc3VsdCA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgbG9nIENsaWNrQmFuayBJUE4gdG8gdGhlIGRhdGFiYXNlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkd3BkYi0+aW5zZXJ0X2lkKTsKCX0KCQoJCgkvKioKCSAqIENoYXJnZSBhbiBvcmRlci4gTm90IHN1cHBvcnRlZCB3aXRoIENsaWNrQmFuawoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIFRoZSBvcmRlciB0byBjaGFyZ2UKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gVGhlIGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uIHRvIHVzZSBpbiBjaGFyZ2luZyB0aGUgb3JkZXIKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGF0dXMgb2YgdGhlIGNoYXJnZSBhdHRlbXB0LiBJbiB0aGlzIGNhc2UsIGl0IHdpbGwgYWx3YXlzIGJlIGFuIGVycm9yIG9iamVjdAoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hhcmdlT3JkZXIoTU1fT3JkZXIgJG9yZGVyLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgJHZhbGlkYXRlPXRydWUpIAoJeyAKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNsaWNrQmFuayBvcmRlcnMgbXVzdCBiZSBpbml0aWF0ZWQgdGhyb3VnaCBDbGlja0JhbmsiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7Cgl9CQkKCQoJCgkvKioKCSAqIFVwZGF0ZXMgdGhlIHBheW1lbnQgZ2F0ZXdheSB3aXRoIG5ldyBpbmZvcm1hdGlvbiwgYW5kIHVwZGF0ZSB0aGUgTWVtYmVyTW91c2Ugb3JkZXIgd2l0aCB0aGUgbmV3IGJpbGxpbmcgYWRkcmVzcwoJICogTm90IHN1cHBvcnRlZCBmb3IgQ2xpY2tCYW5rOyB0aGlzIG1ldGhvZCByZXNwb25kcyB3aXRoIGFuIGVycm9yIGFuZCBhIG1lc3NhZ2UgZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZSBwcm9wZXIgQ2xpY2tCYW5rIHVybAoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6dXBkYXRlU3Vic2NyaXB0aW9uSW5mbygpCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSByZXByZXNlbnRpbmcgdGhlIHN1YnNjcmlwdGlvbiBiZWluZyB1cGRhdGVkCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIChvcHRpb25hbCkgVGhlIG5ldyBjYXJkIHRvIHN0b3JlIG9uIGZpbGUKCSAqIEBwYXJhbSBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzIFRoZSBuZXcgYmlsbGluZyBhZGRyZXNzIHRvIHN0b3JlLiBTaG91bGQgYmUgdGhlIGFkZHJlc3MgYXNzb2NpYXRlZCB3aXRoIHRoZSBjdXN0b21lcidzIGNhcmQgb24gZmlsZQoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgcmVwcmVzZW50aW5nIHN1Y2Nlc3Mgb3IgZXJyb3IuIENvbnRhaW5zIGEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZSBvbiBlcnJvcgoJICogCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB1cGRhdGVTdWJzY3JpcHRpb25JbmZvKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcz1udWxsKSAKCXsKCQkkY2xpY2tiYW5rVXJsID0gImh0dHBzOi8vd3d3LmNsa2JhbmsuY29tL2Nsa2JhbmsuaHRtIjsKCQkkZXJyb3JNZXNzYWdlID0gIlRvIHVwZGF0ZSBwYXltZW50IGluZm9ybWF0aW9uLCB1c2UgdGhlIENsaWNrQmFuayBpbnRlcmZhY2UgYXQgeyRjbGlja2JhbmtVcmx9IjsKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGVycm9yTWVzc2FnZSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJfQkKCQoJCgkvKioKCSAqIENhbmNlbHMgdGhlIHVzZXIncyBzdWJzY3JpcHRpb24uIAoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6Y2FuY2VsU3Vic2NyaXB0aW9uKCkKCSAqIAoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtIFRoZSBwcm9kdWN0IGl0ZW0gd2hvc2Ugc3Vic2NyaXB0aW9uIGlzIGJlaW5nIGNhbmNlbGxlZAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjYW5jZWxTdWJzY3JpcHRpb24oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0pIAoJewoJCWlmICghJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJDb3VsZCBub3QgY2FuY2VsIHN1YnNjcmlwdGlvbjogaW52YWxpZCBvcmRlciBpdGVtIHN1cHBsaWVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkcmVjZWlwdE51bWJlciA9ICR0aGlzLT5sb29rdXBSZWNlaXB0RnJvbU9yZGVySXRlbUlkKCRvcmRlckl0ZW0tPmdldElkKCkpOwoJCSRvcFJlc3BvbnNlID0gJHRoaXMtPmRvQ2FuY2VsT3JSZWZ1bmQoJHJlY2VpcHROdW1iZXIsICJDTkNMIik7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRvcFJlc3BvbnNlKSkKCQl7CgkJCWlmICgoJG9wUmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkgJiYgKCRvcFJlc3BvbnNlLT5nZXREYXRhKCJodHRwX2NvZGUiKSkpCgkJCXsKCQkJCSRvcFJlc3BvbnNlLT5tZXNzYWdlID0gIkVycm9yIGNhbmNlbGxpbmcgc3Vic2NyaXB0aW9uOyBUaGlzIGNhbiBtZWFuIHRoYXQgeW91ciBBUEkga2V5cyBkb24ndCBoYXZlIHRoZSBwZXJtaXNzaW9ucyByZXF1aXJlZCB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uLCBvciB0aGF0IHRoZSBzdWJzY3JpcHRpb24gY291bGQgbm90IGJlIGxvY2F0ZWQgaW4gQ2xpY2tCYW5rLiBQbGVhc2UgdHJ5IGNhbmNlbGxpbmcgbWFudWFsbHkgZnJvbSB0aGUgQ2xpY2tCYW5rIGludGVyZmFjZSI7CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRvcFJlc3BvbnNlLT5tZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCWlmICgkb3JkZXJJdGVtLT5pc1JlY3VycmluZygpKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKTsKCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCX0KCQlNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpyZXZva2VBY2Nlc3NGb3JPcmRlckl0ZW0oJG9yZGVySXRlbSk7CgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBSZWZ1bmRzIGEgdHJhbnNhY3Rpb24KCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIHRvIHJlZnVuZAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcywgZmFpbHVyZSwgb3IgZXJyb3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkKQoJewoJCWdsb2JhbCAkd3BkYjsgCgkJCgkJaWYgKGVtcHR5KCR0cmFuc2FjdGlvbklkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQ291bGQgbm90IHJlZnVuZCB0cmFuc2FjdGlvbjogaW52YWxpZCBvcmRlciBpdGVtIHN1cHBsaWVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL21ha2Ugc3VyZSB0aGUgdHJhbnNhY3Rpb24gZXhpc3RzCgkJJHRyYW5zYWN0aW9uTG9va3VwUmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Z2V0VHJhbnNhY3Rpb25JbmZvKCR0cmFuc2FjdGlvbklkKTsKCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHRyYW5zYWN0aW9uTG9va3VwUmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQsIHRyYW5zYWN0aW9uIGRvZXMgbm90IGV4aXN0IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdHJhbnNhY3Rpb25Sb3cgPSAkdHJhbnNhY3Rpb25Mb29rdXBSZXNwb25zZS0+bWVzc2FnZTsKCQkKCQkvL21ha2Ugc3VyZSBpdHMgbm90IGFscmVhZHkgcmVmdW5kZWQKCQlpZiAoIWlzX251bGwoJHRyYW5zYWN0aW9uUm93LT5yZWZ1bmRfaWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJUcmFuc2FjdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlZnVuZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkKCQkkbG9va3VwU1FMID0gIlNFTEVDVCBjdHJhbnNyZWNlaXB0IEZST00gIi5NTV9UQUJMRV9DTElDS0JBTktfT1JERVJfSVRFTV9MSU5LUy4iIFdIRVJFIG9yZGVyX2l0ZW1faWQ9J3skdHJhbnNhY3Rpb25Sb3ctPm9yZGVyX2l0ZW1faWR9JyI7CgkJJHJlY2VpcHROdW1iZXIgPSAkd3BkYi0+Z2V0X3ZhcigkbG9va3VwU1FMKTsKCQkKCQkkb3BSZXNwb25zZSA9ICR0aGlzLT5kb0NhbmNlbE9yUmVmdW5kKCRyZWNlaXB0TnVtYmVyLCAiUkZORCIpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkb3BSZXNwb25zZSkpCgkJewoJCQlpZiAoKCRvcFJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpICYmICgkb3BSZXNwb25zZS0+Z2V0RGF0YSgiaHR0cF9jb2RlIikpKQoJCQl7CgkJCQkkb3BSZXNwb25zZS0+bWVzc2FnZSA9ICJFcnJvciByZWZ1bmRpbmcgdHJhbnNhY3Rpb247IFRoaXMgY2FuIG1lYW4gdGhhdCB5b3VyIEFQSSBrZXlzIGRvbid0IGhhdmUgdGhlIHBlcm1pc3Npb25zIHJlcXVpcmVkIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24sIG9yIHRoYXQgdGhlIHRyYW5zYWN0aW9uIGRvZXNuJ3QgZXhpc3QuIFBsZWFzZSB0cnkgYXR0ZW1wdGluZyB0aGlzIHJlZnVuZCBtYW51YWxseSBmcm9tIHRoZSBDbGlja0JhbmsgaW50ZXJmYWNlIjsKCQkJfQoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJG9wUmVzcG9uc2UtPm1lc3NhZ2UsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9yZWZ1bmQgd2FzIHN1Y2Nlc3MgZm9yIGV4ZWN1dGlvbiB0byByZWFjaCB0aGlzIHBvaW50LCBsb2cgaXQgaW4gdGhlIHRyYW5zYWN0aW9uIHRhYmxlCgkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUmVmdW5kIGZvciB0cmFuc2FjdGlvbiMgeyR0cmFuc2FjdGlvblJvdy0+aWR9IjsKCQkkcmVmdW5kVHJhbnNhY3Rpb25SZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCR0cmFuc2FjdGlvblJvdy0+b3JkZXJfaWQsCgkJCQkkdHJhbnNhY3Rpb25Sb3ctPm9yZGVyX2l0ZW1faWQsCgkJCQkkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCwKCQkJCSR0cmFuc2FjdGlvblJvdy0+Y3VycmVuY3ksCgkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwKCQkJCU1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUZVTkQsCgkJCQlmYWxzZSwKCQkJCSR0aGlzLT5nZXRJZCgpLAoJCQkJIiIsCgkJCQlNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwKCQkJCSR0cmFuc2FjdGlvblJvdy0+aWQpOwoJCQoJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZWZ1bmRUcmFuc2FjdGlvblJlc3BvbnNlKSkKCQl7CgkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgiVVBEQVRFICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgU0VUIHJlZnVuZF9pZCA9ICVzIFdIRVJFIGlkID0gJXMiLCRyZWZ1bmRUcmFuc2FjdGlvblJlc3BvbnNlLT5tZXNzYWdlLCR0cmFuc2FjdGlvblJvdy0+aWQpKTsKCQl9CgkJCgkJLy9pc3N1aW5nIGEgQ2xpY2tCYW5rIHJlZnVuZCBhbHNvIGNhbmNlbHMgdGhlIHN1YnNjcmlwdGlvbgoJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCR0cmFuc2FjdGlvblJvdy0+b3JkZXJfaXRlbV9pZCk7CgkJaWYgKCRvcmRlckl0ZW0tPmlzUmVjdXJyaW5nKCkpCgkJewoJCQkkb3JkZXJJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpOwoJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJfQoJCQoJCSRhY2Nlc3NSZXNwb25zZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGFjY2Vzc1Jlc3BvbnNlKSkKCQl7CgkJCXJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjp0cmFuc2xhdGUoJGFjY2Vzc1Jlc3BvbnNlKTsKCQl9CgkJcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OnRyYW5zbGF0ZSgkcmVmdW5kVHJhbnNhY3Rpb25SZXNwb25zZSk7Cgl9CgkKCQoJLyoqCgkgKiBDYWxscyB0aGUgQ2xpY2tCYW5rIHRpY2tldCBBUEkgdG8gb3BlbiBhIHRpY2tldCB0byBpc3N1ZSBhIGNhbmNlbGxhdGlvbiBvciByZWZ1bmQgKHRoZSBzYW1lIGFwaSBlbmRwb2ludCBoYW5kbGVzIGJvdGgpCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJHJlY2VpcHROdW1iZXIgVGhlIENsaWNrQmFuawoJICogQHBhcmFtIHN0cmluZyAkdHlwZSBBIHN0cmluZyBjb250YWluaW5nIHRoZSB2YWx1ZSBSRk5EIG9yIENOQ0wgaW5kaWNhdGluZyB0aGUgb3BlcmF0aW9uIHRvIHBlcmZvcm0KCSAqIEBwYXJhbSBmbG9hdCAkYW1vdW50IFRoZSBkb2xsYXIgYW1vdW50IHRvIHJlZnVuZC4gTXVzdCBiZSB0aGUgZG9sbGFyIGFtb3VudCBvZiB0aGUgb3JpZ2luYWwgcmVjZWlwdAoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGNyZWF0ZWQgQ2xpY2tCYW5rIFRpY2tldERhdGEgb2JqZWN0IG9uIHN1Y2Nlc3Mgb3IgYW4gZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBkb0NhbmNlbE9yUmVmdW5kKCRyZWNlaXB0TnVtYmVyLCR0eXBlKQoJewoJCWlmIChlbXB0eSgkcmVjZWlwdE51bWJlcikpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBwZXJmb3JtaW5nIGNhbmNlbC9yZWZ1bmQ6IE5vIHJlY2VpcHQgbnVtYmVyIHN1cHBsaWVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHR5cGUgPSBzdHJ0b3VwcGVyKCR0eXBlKTsKCQlpZiAoJHR5cGUgPT0gIlJGTkQiKQoJCXsKCQkJJHJlYXNvbiA9ICJ0aWNrZXQudHlwZS5yZWZ1bmQuOCI7IC8vcmVhc29uIHR5cGUgaXMgc2V0IHRvICJvdGhlciIgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byB0aGF0IGluZm9ybWF0aW9uCgkJfQoJCWVsc2UgaWYgKCR0eXBlID09ICJDTkNMIikKCQl7CgkJCSRyZWFzb24gPSAidGlja2V0LnR5cGUuY2FuY2VsLjciOyAvL290aGVyCgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHBlcmZvcm1pbmcgY2FuY2VsL3JlZnVuZDogSW52YWxpZCBvcGVyYXRpb24gcmVxdWVzdGVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHF1ZXJ5RmllbGRzID0gYXJyYXkoInR5cGUiPT4kdHlwZSwicmVhc29uIj0+JHJlYXNvbiwicmVmdW5kVHlwZSI9PiJGVUxMIik7CgkJJHF1ZXJ5U3RyaW5nID0gaHR0cF9idWlsZF9xdWVyeSgkcXVlcnlGaWVsZHMpOwoJCQoJCSRlbmRwb2ludCA9ICJ7JHRoaXMtPmdldEFQSVVybCgpfS90aWNrZXRzL3skcmVjZWlwdE51bWJlcn0/eyRxdWVyeVN0cmluZ30iOwoJCSRjclJlc3BvbnNlID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJGVuZHBvaW50LCJQT1NUIixhcnJheSgpLCR0aGlzLT5nZXRDbGlja2JhbmtKU09OQVBJSGVhZGVycygpKTsKCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGNyUmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuICRjclJlc3BvbnNlOwoJCX0KCQkkcmVzcG9uc2VPYmogPSBqc29uX2RlY29kZSgkY3JSZXNwb25zZS0+bWVzc2FnZSk7CgkJaWYgKCRyZXNwb25zZU9iaiA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjb21tdW5pY2F0aW5nIHdpdGggQ2xpY2tCYW5rIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2VPYmopOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5UGF5bWVudEZvcm0oTU1fT3JkZXIgJG9yZGVyKQoJewoJCSRvcmRlclByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkKCQlmb3JlYWNoICgkb3JkZXJQcm9kdWN0SXRlbXMgYXMgJGVhY2hQcm9kdWN0SXRlbSkKCQl7CgkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJGVhY2hQcm9kdWN0SXRlbS0+Z2V0SXRlbUlkKCkpOwoJCQkKCQkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJewoJCQkJYnJlYWs7CgkJCX0KCQl9CgkJCgkJJHRlbXBsYXRlRGF0YSA9IG5ldyBzdGRDbGFzcygpOwoJCSR0ZW1wbGF0ZURhdGEtPmZvcm1fZGVzdGluYXRpb24gPSBtbV9wdXJjaGFzZV9saW5rKGFycmF5KCJwcm9kdWN0SWQiPT4kcHJvZHVjdC0+Z2V0SWQoKSwgInBheW1lbnRNZXRob2QiPT4iY2xpY2tiYW5rIikpOwoJCQoJCSRodG1sPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoInskdGhpcy0+Z2V0VGVtcGxhdGVEaXIoKX0vY2xpY2tiYW5rX3BheW1lbnRfZm9ybS5odG1sLnBocCIsJHRlbXBsYXRlRGF0YSk7CgkJcmV0dXJuICRodG1sOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBUElEZXZlbG9wZXJLZXkoKQoJewoJCXJldHVybiAkdGhpcy0+YXBpRGV2ZWxvcGVyS2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBUElEZXZlbG9wZXJLZXkoJGFwaURldmVsb3BlcktleSkKCXsKCQkkdGhpcy0+YXBpRGV2ZWxvcGVyS2V5ID0gJGFwaURldmVsb3BlcktleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QVBJQ2xlcmtLZXkoKQoJewoJCXJldHVybiAkdGhpcy0+YXBpQ2xlcmtLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldEFQSUNsZXJrS2V5KCRhcGlDbGVya0tleSkKCXsKCQkkdGhpcy0+YXBpQ2xlcmtLZXkgPSAkYXBpQ2xlcmtLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFNlY3JldEtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5zZWNyZXRLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFNlY3JldEtleSgkc2VjcmV0S2V5KQoJewoJCSR0aGlzLT5zZWNyZXRLZXkgPSAkc2VjcmV0S2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRTaXRlTmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5zaXRlTmFtZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U2l0ZU5hbWUoJHNpdGVOYW1lKQoJewoJCSR0aGlzLT5zaXRlTmFtZSA9ICRzaXRlTmFtZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RmFsbGJhY2tDb25maXJtYXRpb25QYWdlKCkKCXsKCQlpZighZW1wdHkoJHRoaXMtPmZhbGxiYWNrQ29uZmlybWF0aW9uUGFnZSkpCgkJewoJCQlyZXR1cm4gJHRoaXMtPmZhbGxiYWNrQ29uZmlybWF0aW9uUGFnZTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIHNpdGVfdXJsKCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRGYWxsYmFja0NvbmZpcm1hdGlvblBhZ2UoJGNvbmZpcm1hdGlvblBhZ2UpCgl7CgkJJHRoaXMtPmZhbGxiYWNrQ29uZmlybWF0aW9uUGFnZSA9ICRjb25maXJtYXRpb25QYWdlOwoJfQoJCgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0QVBJVXJsKCkKCXsKCQlyZXR1cm4gImh0dHBzOi8vYXBpLmNsaWNrYmFuay5jb20vcmVzdC8xLjMiOwoJfQoJCgkKCS8qKgoJICogT3ZlcnJpZGVzIHRoZSBwYXJlbnQgY3VybCByZXF1ZXN0IG1ldGhvZCB0byB0cmFuc2xhdGUgdGhlICJhY2Nlc3MgaXMgZGVuaWVkIiByZXNwb25zZSBDbGlja0JhbmsgcmV0dXJucyBpbnRvIGFuIGVycm9yIHR5cGUKCSAqIEFsbCBvdGhlciBmdW5jdGlvbmFsaXR5IGlzIHRoZSBzYW1lIGFzIHRoZSBzdXBlcmNsYXNzIG1ldGhvZAoJICogCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpkb0hUVFBSZXF1ZXN0KCkKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGRvSFRUUFJlcXVlc3QoJHJlbW90ZVVybCwgJG1ldGhvZD0iUE9TVCIsICRkYXRhPSIiLCAkb3B0aW9ucz1hcnJheSgpKQoJewoJCSRyZXNwb25zZSA9IHBhcmVudDo6ZG9IVFRQUmVxdWVzdCgkcmVtb3RlVXJsLCRtZXRob2QsJGRhdGEsJG9wdGlvbnMpOwoJCSRvcFN0YXR1cyA9IE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3BvbnNlKTsKCQkkb3BTdGF0dXMgPSAoJG9wU3RhdHVzICYmICgoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpICYmICgkcmVzcG9uc2UtPmdldERhdGEoImh0dHBfY29kZSIpICE9ICI0MDMiKSkpOyAvL2ZvcmJpZGRlbiBzdGF0dXMgaXMgYSBmYWlsdXJlLCBidXQgcmV0dXJucyBhIHJlc3VsdCAKCQkkb3BTdGF0dXMgPSAoJG9wU3RhdHVzICYmIChzdHJwb3Moc3RydG9sb3dlcigkcmVzcG9uc2UtPm1lc3NhZ2UpLCJhY2Nlc3MgaXMgZGVuaWVkIikgPT09IGZhbHNlKSk7CgkJaWYgKCEkb3BTdGF0dXMpCgkJewoJCQkkcmVzcG9uc2UtPnR5cGUgPSBNTV9SZXNwb25zZTo6JEVSUk9SOwoJCX0KCQlyZXR1cm4gJHJlc3BvbnNlOwoJfQoJCgkKCS8qKgoJICogQ29uc3RydWN0cyBhIENsaWNrQmFuayBwdXJjaGFzZSBsaW5rIGZvciB0aGUgc3VwcGxpZWQgcHJvZHVjdCBpZAoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6Z2V0UHVyY2hhc2VMaW5rKCkKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkcHJvZHVjdElkIFRoZSBtZW1iZXJtb3VzZSBwcm9kdWN0IGlkIHRvIGNvbnN0cnVjdCBhIHB1cmNoYXNlIGxpbmsgZm9yCgkgKiBAcmV0dXJuIEEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIHB1cmNoYXNlIGxpbmsgb24gc3VjY2VzcywgbnVsbCBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQdXJjaGFzZUxpbmsoJHByb2R1Y3RJZCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRsb29rdXBRdWVyeSA9ICJTRUxFQ1QgY2xpY2tiYW5rX3Byb2R1Y3RfaWQgRlJPTSAiLk1NX1RBQkxFX0NMSUNLQkFOS19QUk9EVUNUX0xJTktTLiIgV0hFUkUgbWVtYmVybW91c2VfcHJvZHVjdF9pZCA9ICVzIjsKCQkkY2xpY2tiYW5rUElEID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGxvb2t1cFF1ZXJ5LCRwcm9kdWN0SWQpKTsKCQlpZiAoaXNfbnVsbCgkY2xpY2tiYW5rUElEKSkKCQl7CgkJCXJldHVybiBudWxsOwoJCX0KCQkkcHVyY2hhc2VMaW5rID0gImh0dHA6Ly97JGNsaWNrYmFua1BJRH0ueyR0aGlzLT5nZXRTaXRlTmFtZSgpfS5wYXkuY2xpY2tiYW5rLm5ldCI7CgkJcmV0dXJuICRwdXJjaGFzZUxpbms7Cgl9Cn0=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(110, 'tagprocessor', 'Y2xhc3MgTU1fVGFnUHJvY2Vzc29yCnsKCXByaXZhdGUgc3RhdGljICRpc1Byb2Nlc3NpbmcgPSBmYWxzZTsKCXByaXZhdGUgc3RhdGljICRzdG9yZWRTaG9ydGNvZGVzID0gYXJyYXkoKTsKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwcm9jZXNzU21hcnRUYWdzKCRjb250ZW50KQoJewoJCWdsb2JhbCAkc2hvcnRjb2RlX3RhZ3M7CgkJCgkJaWYgKHN0cnBvcygkY29udGVudCwnWycpID09PSBmYWxzZSkgCgkJewoJCQlyZXR1cm4gJGNvbnRlbnQ7CgkJfQoJCgkJJHNtYXJ0VGFnUmVnZXggPSBNTV9TbWFydFRhZ1V0aWw6OmdldFNtYXJ0VGFnc1JlZ2V4KCk7CgkJaWYgKGVtcHR5KCRzbWFydFRhZ1JlZ2V4KSkKCQl7CgkJCXJldHVybiAkY29udGVudDsKCQl9CgkKCQkkcGF0dGVybiA9ICIvXFxbKCRzbWFydFRhZ1JlZ2V4KS9zIjsKCQoJCWlmIChwcmVnX21hdGNoKCRwYXR0ZXJuLCRjb250ZW50KSAhPT0gMSkgCgkJewoJCQkvL3dlIHdhbnQgdG8gc2NvcGUgb3VyIHByb2Nlc3NpbmcgdG8gY29udGVudCBjb250YWluaW5nIE1lbWJlck1vdXNlIFNtYXJ0VGFncwoJCQlyZXR1cm4gJGNvbnRlbnQ7CgkJfQoJCQoJCSRzaG91bGRSZXN0b3JlU2hvcnRjb2RlcyA9IGZhbHNlOwoJCWlmICghc2VsZjo6JGlzUHJvY2Vzc2luZykKCQl7CgkJCS8vVGVtcG9yYXJpbHkgcmVtb3ZlIGFsbCBub24tU21hcnRUYWcgc2hvcnRjb2RlcyBmcm9tIHRoZSBnbG9iYWwgYXJyYXkuIFRoaXMgYWxsb3dzIHVzIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgdGhlIAoJCQkvL3dvcmRwcmVzcyBzaG9ydGNvZGUgcHJvY2Vzc2luZyBmdW5jdGlvbnMgYW5kIG9ubHkgcHJvY2VzcyBNZW1iZXJNb3VzZSBTbWFydFRhZ3MKCQkJc2VsZjo6JHN0b3JlZFNob3J0Y29kZXMgPSAkc2hvcnRjb2RlX3RhZ3M7CgkJCSRzbWFydFRhZ05hbWVQYXR0ZXJuID0gIi8oeyRzbWFydFRhZ1JlZ2V4fSkvcyI7CgkJCQoJCQkkdmFsaWRLZXlzID0gYXJyYXlfZmlsdGVyKGFycmF5X2tleXMoJHNob3J0Y29kZV90YWdzKSwgZnVuY3Rpb24oJGspIHVzZSAoJHNtYXJ0VGFnTmFtZVBhdHRlcm4pIHsKCQkJCXJldHVybiAocHJlZ19tYXRjaCgkc21hcnRUYWdOYW1lUGF0dGVybiwkaykgPT09IDEpOwoJCQl9KTsKCQkJCgkJCSRzaG9ydGNvZGVfdGFncyA9IGFycmF5X2ludGVyc2VjdF9rZXkoJHNob3J0Y29kZV90YWdzLCBhcnJheV9mbGlwKCR2YWxpZEtleXMpKTsKCQkJc2VsZjo6JGlzUHJvY2Vzc2luZyA9IHRydWU7CgkJCSRzaG91bGRSZXN0b3JlU2hvcnRjb2RlcyA9IHRydWU7CgkJfQoJCQoJCQoJCS8vUHJvY2VzcyBzaG9ydGNvZGVzIGluIHRoZSBjb250ZW50IGJsb2NrCgkJJHBhdHRlcm4gPSBnZXRfc2hvcnRjb2RlX3JlZ2V4KCk7CgkJJGNvbnRlbnQgPSBwcmVnX3JlcGxhY2VfY2FsbGJhY2soICIveyRwYXR0ZXJufS9zIiwgJ2RvX3Nob3J0Y29kZV90YWcnLCAkY29udGVudCApOwoJCQoJCWlmICgkc2hvdWxkUmVzdG9yZVNob3J0Y29kZXMpCgkJewoJCQkkc2hvcnRjb2RlX3RhZ3MgPSBzZWxmOjokc3RvcmVkU2hvcnRjb2RlczsKCQkJc2VsZjo6JHN0b3JlZFNob3J0Y29kZXMgPSBhcnJheSgpOwoJCQlzZWxmOjokaXNQcm9jZXNzaW5nID0gZmFsc2U7CgkJfQoJCQoJCXJldHVybiAkY29udGVudDsKCX0KfQ==', 0, '2018-11-21 06:38:54'),
(111, 'emailserviceproviderfactory', 'LyoqCiAqIAogKiBUaGUgRW1haWwgU2VydmljZSBQcm92aWRlciBGYWN0b3J5IGRvZXMgdGhlIHdvcmsgb2YgcmV0cmlldmluZyBhbmQgY29uZmlndXJpbmcgYW4gRW1haWwgU2VydmljZSBQcm92aWRlciBpbXBsZW1lbnRhdGlvbgogKgogKi8KY2xhc3MgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJGYWN0b3J5IHsKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBhY3RpdmUgRW1haWwgU2VydmljZSBQcm92aWRlcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFjdGl2ZVByb3ZpZGVyKCkgewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcHJvdmlkZXJfaW5mbyA9ICR3cGRiLT5nZXRfcm93KCJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfRU1BSUxfU0VSVklDRV9QUk9WSURFUlMuIiB3aGVyZSBhY3RpdmU9JzEnIGxpbWl0IDEiKTsKCQlpZiAoIWVtcHR5KCRwcm92aWRlcl9pbmZvLT5wYXNzd29yZCkpCgkJewoJCQkkcHJvdmlkZXJfaW5mby0+cGFzc3dvcmQgPSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmRlY3J5cHRQYXNzd29yZCgkcHJvdmlkZXJfaW5mby0+cGFzc3dvcmQpOwoJCX0KCQlyZXR1cm4gc2VsZjo6X2dldFByb3ZpZGVyKCRwcm92aWRlcl9pbmZvKTsKCX0KCQoJLyoqCgkgKiBSZXR1cm5zIGEgc3BlY2lmaWMgRW1haWwgU2VydmljZSBQcm92aWRlciwgcmVnYXJkbGVzcyBvZiB3aGV0aGVyIGl0IGlzIHRoZSBhY3RpdmUgcHJvdmlkZXIgb3Igbm90CgkgKiBAcGFyYW0gU3RyaW5nICRwcm92aWRlcl90b2tlbiBUaGUgcHJvdmlkZXIgdG9rZW4gaWRlbnRpZnlpbmcgdGhlIHByb3ZpZGVyIGluIHRoZSBkYXRhYmFzZQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFByb3ZpZGVyKCRwcm92aWRlcl90b2tlbikgewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcHJvdmlkZXJfaW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfRU1BSUxfU0VSVklDRV9QUk9WSURFUlMuIiB3aGVyZSBwcm92aWRlcl90b2tlbj0lcyIsJHByb3ZpZGVyX3Rva2VuKSk7CgkJaWYgKCFlbXB0eSgkcHJvdmlkZXJfaW5mby0+cGFzc3dvcmQpKQoJCXsKCQkJJHByb3ZpZGVyX2luZm8tPnBhc3N3b3JkID0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpkZWNyeXB0UGFzc3dvcmQoJHByb3ZpZGVyX2luZm8tPnBhc3N3b3JkKTsKCQl9CgkJcmV0dXJuIHNlbGY6Ol9nZXRQcm92aWRlcigkcHJvdmlkZXJfaW5mbyk7Cgl9CgkKCS8qKgoJICogR2V0cyB0aGUgcHJvdmlkZXIgdGhlIG1lbWJlciBpcyBzdWJzY3JpYmVkIHRvLCB0aGUgYWN0aXZlIHByb3ZpZGVyIGlmIG5vbmUKCSAqIEBwYXJhbSBtZW1iZXIgZW1haWwgdG8gZ2V0IHRoZSBwcm92aWRlciBmb3IKCSAqIAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFByb3ZpZGVyRm9yTWVtYmVyKCRtZW1iZXJfZW1haWwpCgl7CgkJJG1lbWJlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRtZW1iZXJfZW1haWwpOwoJCQoJCWlmICgkbWVtYmVyLT5pc1ZhbGlkKCkpCgkJewoJCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyKCk7CgkJCSRwcm92aWRlcl9lbnRpdHktPnNldElkKCRtZW1iZXItPmdldFN1YnNjcmliZWRQcm92aWRlcklkKCkpOwoJCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXJldHVybiBzZWxmOjpnZXRQcm92aWRlcigkcHJvdmlkZXJfZW50aXR5LT5nZXRUb2tlbigpKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gc2VsZjo6Z2V0QWN0aXZlUHJvdmlkZXIoKTsKCX0KCQoJLyoqCgkgKiBHZXRzIHRoZSBwcm92aWRlciB0aGUgbWVtYmVyIGlzIHN1YnNjcmliZWQgdG8gZm9yIGEgcGFydGljdWxhciBidW5kbGUsIHRoZSBhY3RpdmUgcHJvdmlkZXIgaWYgbm9uZQoJICogCgkgKiBAcGFyYW0gJG1lbWJlcl9lbWFpbCB0aGUgbWVtYmVyIGVtYWlsIHRvIGdldCB0aGUgcHJvdmlkZXIgZm9yCgkgKiBAcGFyYW0gJGJ1bmRsZUlkIHRoZSBJRCBvZiB0aGUgYnVuZGxlIHRvIGdldCB0aGUgcHJvdmlkZXIgZm9yCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UHJvdmlkZXJGb3JCdW5kbGUoJG1lbWJlcl9lbWFpbCwgJGJ1bmRsZUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkbWVtYmVyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJG1lbWJlcl9lbWFpbCk7CgkJCgkJaWYgKCRtZW1iZXItPmlzVmFsaWQoKSkKCQl7CgkJCSRzcWwgPSAiU0VMRUNUIHN1YnNjcmliZWRfcHJvdmlkZXJfaWQgRlJPTSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUy4iIFdIRVJFIGFjY2Vzc190eXBlPSciLk1NX0FwcGxpZWRCdW5kbGU6OiRBQ0NFU1NfVFlQRV9VU0VSLiInICI7CgkJCSRzcWwgLj0gIiBBTkQgYWNjZXNzX3R5cGVfaWQgPSAneyRtZW1iZXItPmdldElkKCl9JyBBTkQgYnVuZGxlX2lkID0gJ3skYnVuZGxlSWR9JyBMSU1JVCAxOyI7CgkJCSRhcHBsaWVkQnVuZGxlID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQoJCQlpZigkYXBwbGllZEJ1bmRsZSAmJiBpc3NldCgkYXBwbGllZEJ1bmRsZS0+c3Vic2NyaWJlZF9wcm92aWRlcl9pZCkpCgkJCXsKCQkJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldElkKCRhcHBsaWVkQnVuZGxlLT5zdWJzY3JpYmVkX3Byb3ZpZGVyX2lkKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJcmV0dXJuIHNlbGY6OmdldFByb3ZpZGVyKCRwcm92aWRlcl9lbnRpdHktPmdldFRva2VuKCkpOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBzZWxmOjpnZXRBY3RpdmVQcm92aWRlcigpOwoJfQoJCgkvKioKCSAqIAoJICogSW50ZXJuYWwgZnVuY3Rpb24gdXNlZCB0byBkZXRlcm1pbmUgdGhlIGNvcnJlY3QgY2xhc3MgdG8gdXNlIGFuZCB0byBpbnN0YW50aWF0ZSwgaW5pdGlhbGl6ZSwgYW5kIHJldHVybiBpdAoJICogQHBhcmFtIFN0cmluZyAkcHJvdmlkZXJfaW5mbyAKCSAqLwoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gX2dldFByb3ZpZGVyKCRwcm92aWRlcl9pbmZvKSB7CgkJJHByb3ZpZGVyX3Rva2VuID0gJHByb3ZpZGVyX2luZm8tPnByb3ZpZGVyX3Rva2VuOwoJCXN3aXRjaCgkcHJvdmlkZXJfdG9rZW4pIAoJCXsKCQkJY2FzZSAibWFpbGNoaW1wIjoKCQkJCXJldHVybiBuZXcgTU1fTWFpbENoaW1wRW1haWxTZXJ2aWNlUHJvdmlkZXIoJHByb3ZpZGVyX2luZm8pOwoJCQljYXNlICJpY29udGFjdCI6CgkJCQlyZXR1cm4gbmV3IE1NX0lDb250YWN0RW1haWxTZXJ2aWNlUHJvdmlkZXIoJHByb3ZpZGVyX2luZm8pOwoJCQljYXNlICJhd2ViZXIiOgoJCQkJcmV0dXJuIG5ldyBNTV9BV2ViZXJFbWFpbFNlcnZpY2VQcm92aWRlcigkcHJvdmlkZXJfaW5mbyk7CgkJCWNhc2UgImdldHJlc3BvbnNlIjoKCQkJCXJldHVybiBuZXcgTU1fR2V0UmVzcG9uc2VFbWFpbFNlcnZpY2VQcm92aWRlcigkcHJvdmlkZXJfaW5mbyk7CgkJCWNhc2UgImFjdGl2ZWNhbXBhaWduIjoKCQkJCXJldHVybiBuZXcgTU1fQWN0aXZlQ2FtcGFpZ25FbWFpbFNlcnZpY2VQcm92aWRlcigkcHJvdmlkZXJfaW5mbyk7CgkJCWNhc2UgImRlZmF1bHQiOgoJCQkJcmV0dXJuIG5ldyBNTV9EZWZhdWx0RW1haWxTZXJ2aWNlUHJvdmlkZXIoJHByb3ZpZGVyX2luZm8pOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG51bGw7CgkJCQkKCQl9Cgl9IAoJCn0KCg==', 0, '2018-11-21 06:38:54'),
(112, 'resetpasswordformview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1Jlc2V0UGFzc3dvcmRGb3JtVmlldyBleHRlbmRzIE1NX1ZpZXcKewkKICBwdWJsaWMgc3RhdGljICRNTV9OT05DRV9BQ1RJT05fUkVTRVRfUEFTU1dPUkRfRk9STSAJPSAibW0tcmVzZXQtcGFzc3dvcmQiOwogIHB1YmxpYyBzdGF0aWMgJE1NX05PTkNFX05BTUVfUkVTRVRfUEFTU1dPUkRfRk9STSAgIAk9ICJtbS1zZWN1cml0eSI7CiAgcHVibGljIHN0YXRpYyAkTU1fUEFSQU1fS0VZX0tFWSAgIAkJCQkJCT0gImsiOwogIHB1YmxpYyBzdGF0aWMgJE1NX1BBUkFNX0tFWV9FTUFJTCAgIAkJCQkJCT0gImUiOwoKICBwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQogIHsKICAJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwogIH0KICAKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUkVTRVRfUEFTU1dPUkQ6CgkJCQkJcmV0dXJuICR0aGlzLT5yZXNldFBhc3N3b3JkKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoJHBvc3QpCgl7CQoJCSRNTV9SZXNwb25zZSA9ICIiOwoJCQogIAkJdHJ5CiAgCQl7CiAgICAJCSRyZXN1bHQgPSBNTV9SZXNldFBhc3N3b3JkRm9ybTo6Y2hlY2tJbnB1dCgpOwoJCQoJCQlpZigkcmVzdWx0WydzdWNjZXNzJ10gPT09IGZhbHNlKQoJCQl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCRyZXN1bHRbJ21lc3NhZ2UnXSk7CgkJCX0KCQkJCgkJCSRtZW1iZXIgCQkgPSAkcmVzdWx0WydtZW1iZXInXTsKCSAgICAgICRwd2QgICAgICAgICA9IHRyaW0oJHBvc3RbJ3B3ZCddKTsKCSAgICAgICRwd2RfY29uZmlybSA9IHRyaW0oJHBvc3RbJ3B3ZF9jb25maXJtJ10pOwogICAgICAKCSAgICAgIGlmKCgkcHdkID09ICRwd2RfY29uZmlybSkgPT09IGZhbHNlKQoJICAgICAgewoJICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCJQYXNzd29yZHMgbXVzdCBtYXRjaCwgcGxlYXNlIHRyeSBhZ2Fpbi4uLiIpOwoJICAgICAgfQogICAgICAKCSAgICAgIGlmKHN0cmxlbigkcHdkKSA8IDgpCgkgICAgICB7CgkgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oIlBhc3N3b3JkIG11c3QgYmUgYXQgbGVhc3QgOCBjaGFyYWN0ZXJzIGxvbmcsIHBsZWFzZSB0cnkgYWdhaW4uLi4iKTsKCSAgICAgIH0KCQkJCgkgICAgICAkbWVtYmVyLT5zZXRQYXNzd29yZCgkcHdkKTsKCSAgICAgICRtZW1iZXItPnNldEZvcmdvdFBhc3N3b3JkSGFzaCgiIik7CgkgICAgICAkbWVtYmVyLT5jb21taXREYXRhKCk7CiAgICAgIAoJICAgICAgTU1fU2Vzc2lvbjo6Y2xlYXIoTU1fU2Vzc2lvbjo6JEtFWV9MQVNUX1VTRVJfSUQpOwoJICAgICAgTU1fTWVzc2FnZXM6OmFkZE1lc3NhZ2UoIlBhc3N3b3JkIGhhcyBzdWNjZXNzZnVsbHkgYmVlbiByZXNldCwgeW91IG1heSBub3cgbG9naW4gd2l0aCB5b3VyIG5ldyBwYXNzd29yZCIpOwogICAgICAKCSAgICAgICRNTV9SZXNwb25zZSA9IG5ldyBNTV9SZXNwb25zZSgpOwoJICAgICAgJE1NX1Jlc3BvbnNlLT5kYXRhWydyZWRpcmVjdF90byddID0gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldFVybChNTV9Db3JlUGFnZVR5cGU6OiRMT0dJTl9QQUdFKTsKICAJCX0KICAJCWNhdGNoKEV4Y2VwdGlvbiAkZSkKICAJCXsKCQkJJE1NX1Jlc3BvbnNlID0gbmV3IE1NX1Jlc3BvbnNlKCRlLT5nZXRNZXNzYWdlKCksIE1NX1Jlc3BvbnNlOjokRVJST1IpOwogIAkJfQoJCQoJCXJldHVybiAkTU1fUmVzcG9uc2U7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGNhbkNhbGxNZXRob2QoJHJlcXVlc3QpCgl7CgkJcmV0dXJuICgkcmVxdWVzdFtzZWxmOjokTU1fSlNBQ1RJT05dID09IHNlbGY6OiRNTV9KU0FDVElPTl9SRVNFVF9QQVNTV09SRCk7Cgl9Cn0K', 0, '2018-11-21 06:38:54'),
(113, 'trainingvideosview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fVHJhaW5pbmdWaWRlb3NWaWV3IGV4dGVuZHMgTU1fUkJBQ0FkbWluVmlldwp7CiAgICAKICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCiAgICB7CiAgICAgICAgcGFyZW50OjpfX2NvbnN0cnVjdCgpOwogICAgfQogICAgCiAgICBwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkKICAgIHsKICAgICAgICAkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwogICAgICAgIAogICAgICAgIGlmICghKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKICAgICAgICB7CiAgICAgICAgICAgIHN3aXRjaCAoJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSwgTU1fUmVzcG9uc2U6OiRTVUNDRVNTLCB0cnVlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gJHJlc3BvbnNlOwogICAgICAgIH0KICAgIH0KICAgIAogICAgCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGRpc3BsYXlWaWRlb3MoKQogICAgewogICAgICAgID8+CgkJPHNjcmlwdCBjaGFyc2V0PSJVVEYtOCIKCQkJc3JjPSIvL2Zhc3Qud2lzdGlhLmNvbS9hc3NldHMvZXh0ZXJuYWwvcG9wb3Zlci12MS5qcyI+PC9zY3JpcHQ+CgkJPGRpdiBjbGFzcz0ibW0tbWV0cmljLXJvdyI+CgkJCTxkaXYgY2xhc3M9Im1tLW1ldHJpYy1jb250YWluZXIgbW0tbWV0cmljLWNvbnRhaW5lci0zMyBtbS1jZW50ZXIiPgoJCQkJPGEgaHJlZj0iLy9mYXN0Lndpc3RpYS5uZXQvZW1iZWQvaWZyYW1lL3cyMTZtdmk1anI/cG9wb3Zlcj10cnVlIiBjbGFzcz0id2lzdGlhLXBvcG92ZXJbaGVpZ2h0PTQyNSxwbGF5ZXJDb2xvcj03Yjc5NmEsd2lkdGg9ODAwXSI+CgkJCQk8aW1nCgkJCQkJc3JjPSJodHRwczovL21lbWJlcm1vdXNlLmNvbS9hc3NldHMva25vd2xlZGdlL3RyYWluaW5nLXNtLXBsdWdpbi10b3VyLmpwZyIKCQkJCQlhbHQ9IiI+CgkJCQk8L2E+CgkJCTwvZGl2PgoJCQk8ZGl2IGNsYXNzPSJtbS1tZXRyaWMtY29udGFpbmVyIG1tLW1ldHJpYy1jb250YWluZXItMzMgbW0tY2VudGVyIj4KCQkJCTxhIGhyZWY9Ii8vZmFzdC53aXN0aWEubmV0L2VtYmVkL2lmcmFtZS83Y3hmYTFtdmF0P3BvcG92ZXI9dHJ1ZSIgY2xhc3M9Indpc3RpYS1wb3BvdmVyW2hlaWdodD00MjUscGxheWVyQ29sb3I9N2I3OTZhLHdpZHRoPTgwMF0iPgoJCQkJPGltZwoJCQkJCXNyYz0iaHR0cHM6Ly9tZW1iZXJtb3VzZS5jb20vYXNzZXRzL2tub3dsZWRnZS90cmFpbmluZy1zbS1wcm9kdWN0cy5qcGciCgkJCQkJYWx0PSIiPgoJCQkJPC9hPgoJCQk8L2Rpdj4KCQkJPGRpdiBjbGFzcz0ibW0tbWV0cmljLWNvbnRhaW5lciBtbS1tZXRyaWMtY29udGFpbmVyLTMzIG1tLWNlbnRlciI+CgkJCQk8YSBocmVmPSIvL2Zhc3Qud2lzdGlhLm5ldC9lbWJlZC9pZnJhbWUvN3kzeXoydmt1bD9wb3BvdmVyPXRydWUiIGNsYXNzPSJ3aXN0aWEtcG9wb3ZlcltoZWlnaHQ9NDI1LHBsYXllckNvbG9yPTdiNzk2YSx3aWR0aD04MDBdIj4KCQkJCTxpbWcKCQkJCQlzcmM9Imh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9rbm93bGVkZ2UvdHJhaW5pbmctc20taW50ZWdyYXRpb25zLmpwZyIKCQkJCQlhbHQ9IiI+CgkJCQk8L2E+CgkJCTwvZGl2PgoJCTwvZGl2PgoJCTxicj4KCQk8ZGl2IGNsYXNzPSJtbS1tZXRyaWMtcm93Ij4KCQkJPGRpdiBjbGFzcz0ibW0tbWV0cmljLWNvbnRhaW5lciBtbS1tZXRyaWMtY29udGFpbmVyLTMzIG1tLWNlbnRlciI+CgkJCQk8YSBocmVmPSIvL2Zhc3Qud2lzdGlhLm5ldC9lbWJlZC9pZnJhbWUveDBnaWIwbjlocD9wb3BvdmVyPXRydWUiIGNsYXNzPSJ3aXN0aWEtcG9wb3ZlcltoZWlnaHQ9NDI1LHBsYXllckNvbG9yPTdiNzk2YSx3aWR0aD04MDBdIj4KCQkJCTxpbWcKCQkJCQlzcmM9Imh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9rbm93bGVkZ2UvdHJhaW5pbmctc20tY29yZS1wYWdlcy5qcGciCgkJCQkJYWx0PSIiPgoJCQkJPC9hPgoJCQk8L2Rpdj4KCQkJPGRpdiBjbGFzcz0ibW0tbWV0cmljLWNvbnRhaW5lciBtbS1tZXRyaWMtY29udGFpbmVyLTMzIG1tLWNlbnRlciI+CgkJCQk8YSBocmVmPSIvL2Zhc3Qud2lzdGlhLm5ldC9lbWJlZC9pZnJhbWUvN3U4c2F5ZGt0dT9wb3BvdmVyPXRydWUiIGNsYXNzPSJ3aXN0aWEtcG9wb3ZlcltoZWlnaHQ9NDM1LHBsYXllckNvbG9yPTdiNzk2YSx3aWR0aD04MDBdIj4KCQkJCTxpbWcKCQkJCQlzcmM9Imh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9rbm93bGVkZ2UvaG93LXRvLW1hc3Rlci1tZW1iZXItbWFuYWdlbWVudC1zbS5qcGciCgkJCQkJYWx0PSIiPgoJCQkJPC9hPgoJCQk8L2Rpdj4KCQkJPGRpdiBjbGFzcz0ibW0tbWV0cmljLWNvbnRhaW5lciBtbS1tZXRyaWMtY29udGFpbmVyLTMzIG1tLWNlbnRlciI+CgkJCQk8YSBocmVmPSIvL2Zhc3Qud2lzdGlhLm5ldC9lbWJlZC9pZnJhbWUvMmFsamF0c2s1az9wb3BvdmVyPXRydWUiIGNsYXNzPSJ3aXN0aWEtcG9wb3ZlcltoZWlnaHQ9NDUwLHBsYXllckNvbG9yPTdiNzk2YSx3aWR0aD04MDBdIj4KCQkJCTxpbWcKCQkJCQlzcmM9Imh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9rbm93bGVkZ2UvdHJhaW5pbmctc20tc21hcnQtdGFncy5qcGciCgkJCQkJYWx0PSIiPgoJCQkJPC9hPgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCQk8YnI+CgkJPGRpdiBjbGFzcz0ibW0tbWV0cmljLXJvdyI+CgkJCTxkaXYgY2xhc3M9Im1tLW1ldHJpYy1jb250YWluZXIgbW0tbWV0cmljLWNvbnRhaW5lci0zMyBtbS1jZW50ZXIiPgoJCQkJPGEgaHJlZj0iLy9mYXN0Lndpc3RpYS5uZXQvZW1iZWQvaWZyYW1lL2l0MndhZ2Ziang/cG9wb3Zlcj10cnVlIiBjbGFzcz0id2lzdGlhLXBvcG92ZXJbaGVpZ2h0PTQ1MCxwbGF5ZXJDb2xvcj03Yjc5NmEsd2lkdGg9ODAwXSI+CgkJCQk8aW1nCgkJCQkJc3JjPSJodHRwczovL21lbWJlcm1vdXNlLmNvbS9hc3NldHMva25vd2xlZGdlL3RyYWluaW5nLXNtLXB1c2gtbm90aWZpY2F0aW9ucy5qcGciCgkJCQkJYWx0PSIiPgoJCQkJPC9hPgoJCQk8L2Rpdj4KCQk8L2Rpdj4KCTw/cGhwIAoJfQkKfQo=', 0, '2018-11-21 06:38:54'),
(114, 'membertagprocessor', 'Y2xhc3MgTU1fTWVtYmVyVGFnUHJvY2Vzc29yCnsJCglwdWJsaWMgc3RhdGljICRUQUdfTUVNQkVSX0RBVEEgPSAibW1fbWVtYmVyX2RhdGEiOwoJcHVibGljIHN0YXRpYyAkVEFHX01FTUJFUl9MSU5LID0gIm1tX21lbWJlcl9saW5rIjsKCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIFNtYXJ0VGFnIGlzIHJlbGF0ZWQgdG8gbWVtYmVycy4KCSAqIAoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcmV0dXJuIEJvb2xlYW4gcmV0dXJucyB0cnVlIGlmIHRoZSBTbWFydFRhZyBwYXNzZWQgaXMgcmVsYXRlZCB0byBtZW1iZXJzLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzTWVtYmVyU21hcnRUYWcoJHNtYXJ0VGFnKQoJewoJCXN3aXRjaCgkc21hcnRUYWcpIAoJCXsKCQkJY2FzZSBzZWxmOjokVEFHX01FTUJFUl9EQVRBOgoJCQljYXNlIHNlbGY6OiRUQUdfTUVNQkVSX0xJTks6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgbmFtZSBhbmQgYSBudW1iZXIgb2YgcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBTbWFydFRhZyBhbmQgbWFrZXMgYSBjYWxsIHRvIAoJICogdGhlIGFwcHJvcHJpYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBTbWFydFRhZyBuYW1lLgoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IHRvIHByb2Nlc3MKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc1NtYXJ0VGFnKCRzbWFydFRhZywgJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlzd2l0Y2goJHNtYXJ0VGFnKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JFRBR19NRU1CRVJfREFUQToKCQkJCXJldHVybiBzZWxmOjptbV9tZW1iZXJfZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQoJCQljYXNlIHNlbGY6OiRUQUdfTUVNQkVSX0xJTks6CgkJCQlyZXR1cm4gc2VsZjo6bW1fbWVtYmVyX2xpbmsoJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAiSW52YWxpZCBNZW1iZXIgU21hcnRUYWcgeyRzbWFydFRhZ30gZm91bmQuIjsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fTWVtYmVyX0RhdGEgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgCgkgKiByZXR1cm5pbmcgbWVtYmVyIGRhdGEgYmFzZWQgb24gdGhlIG5hbWUgYXR0cmlidXRlLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBtbV9tZW1iZXJfZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRtZW1iZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRVc2VyKCk7CgkJCgkJaWYoJG1lbWJlci0+aXNWYWxpZCgpKQoJCXsKCQkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJCXsKCQkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQkJewoJCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCQkkJGtleSA9ICR2OwoJCQkJfQoJCQl9CgkJCQoJCQlpZihpc3NldCgkbmFtZSkpCgkJCXsKCQkJCSRuYW1lID0gc3RydG9sb3dlcigkbmFtZSk7CgkJCQkKCQkJCXN3aXRjaCgkbmFtZSkKCQkJCXsKCQkJCQljYXNlICJpZCI6CgkJCQkJCXJldHVybiAkbWVtYmVyLT5nZXRJZCgpOwoJCQkJCQkKCQkJCQljYXNlICJyZWdpc3RyYXRpb25kYXRlIjoKCQkJCQkJaWYoaXNzZXQoJGRhdGVmb3JtYXQpKQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCRtZW1iZXItPmdldFJlZ2lzdHJhdGlvbkRhdGUoZmFsc2UpLCAkZGF0ZWZvcm1hdCk7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0UmVnaXN0cmF0aW9uRGF0ZSh0cnVlKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQljYXNlICJzdGF0dXNjaGFuZ2VkZGF0ZSI6CgkJCQkJCWlmKGlzc2V0KCRkYXRlZm9ybWF0KSkKCQkJCQkJewoJCQkJCQkJcmV0dXJuIE1NX1V0aWxzOjpkYXRlVG9Mb2NhbCgkbWVtYmVyLT5nZXRTdGF0dXNVcGRhdGVkRGF0ZShmYWxzZSksICRkYXRlZm9ybWF0KTsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCXJldHVybiAkbWVtYmVyLT5nZXRTdGF0dXNVcGRhdGVkRGF0ZSh0cnVlKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQljYXNlICJleHBpcmF0aW9uZGF0ZSI6CgkJCQkJCWlmKCRtZW1iZXItPmRvZXNFeHBpcmUoKSkKCQkJCQkJewoJCQkJCQkJaWYoaXNzZXQoJGRhdGVmb3JtYXQpKQoJCQkJCQkJewoJCQkJCQkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJG1lbWJlci0+Z2V0RXhwaXJhdGlvbkRhdGUoZmFsc2UpLCAkZGF0ZWZvcm1hdCk7CgkJCQkJCQl9CgkJCQkJCQllbHNlCgkJCQkJCQl7CgkJCQkJCQkJcmV0dXJuICRtZW1iZXItPmdldEV4cGlyYXRpb25EYXRlKHRydWUpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UgCgkJCQkJCXsKCQkJCQkJCXJldHVybiBNTV9OT19EQVRBOwoJCQkJCQl9CgoJCQkJCWNhc2UgImNhbmNlbGxhdGlvbmRhdGUiOgoJCQkJCQlpZigkbWVtYmVyLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKCQkJCQkJewoJCQkJCQkJaWYoaXNzZXQoJGRhdGVmb3JtYXQpKQoJCQkJCQkJewoJCQkJCQkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJG1lbWJlci0+Z2V0Q2FuY2VsbGF0aW9uRGF0ZShmYWxzZSksICRkYXRlZm9ybWF0KTsKCQkJCQkJCX0KCQkJCQkJCWVsc2UKCQkJCQkJCXsKCQkJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0Q2FuY2VsbGF0aW9uRGF0ZSh0cnVlKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCXJldHVybiBNTV9OT19EQVRBOwoJCQkJCQl9CgkJCQkJCQoJCQkJCWNhc2UgImZpcnN0bmFtZSI6CgkJCQkJCXJldHVybiAkbWVtYmVyLT5nZXRGaXJzdE5hbWUoKTsKCQkJCQkJCgkJCQkJY2FzZSAibGFzdG5hbWUiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0TGFzdE5hbWUoKTsKCQkJCQkJCgkJCQkJY2FzZSAiZW1haWwiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0RW1haWwoKTsKCQkJCQkJCgkJCQkJY2FzZSAicGhvbmUiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0UGhvbmUoKTsKCQkJCQkJCgkJCQkJY2FzZSAidXNlcm5hbWUiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0VXNlcm5hbWUoKTsKCQkJCQkJCgkJCQkJY2FzZSAicGFzc3dvcmQiOgoJCQkJCQlyZXR1cm4gIWlzX251bGwoJG1lbWJlci0+Z2V0UGFzc3dvcmQoKSkgPyAkbWVtYmVyLT5nZXRQYXNzd29yZCgpIDogIioqKioqKioqIjsKCQkJCQkJCgkJCQkJY2FzZSAiZGF5c2FzbWVtYmVyIjoKCQkJCQkJcmV0dXJuICRtZW1iZXItPmdldERheXNBc01lbWJlcigpOwoJCQkJCQkKCQkJCQljYXNlICJtZW1iZXJzaGlwaWQiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0TWVtYmVyc2hpcElkKCk7CgkJCQkJCQoJCQkJCWNhc2UgIm1lbWJlcnNoaXBuYW1lIjoKCQkJCQkJcmV0dXJuIF9tbXQoJG1lbWJlci0+Z2V0TWVtYmVyc2hpcE5hbWUoKSxNTV9MQU5HVUFHRV9ET01BSU4pOwoJCQkJCQkKCQkJCQljYXNlICJzdGF0dXNpZCI6CgkJCQkJCXJldHVybiAkbWVtYmVyLT5nZXRTdGF0dXMoKTsKCQkJCQkJCgkJCQkJY2FzZSAic3RhdHVzbmFtZSI6CgkJCQkJCXJldHVybiBNTV9TdGF0dXM6OmdldE5hbWUoJG1lbWJlci0+Z2V0U3RhdHVzKCkpOwoJCQkJCQkKCQkJCQljYXNlICJiaWxsaW5nYWRkcmVzcyI6CgkJCQkJCXJldHVybiAkbWVtYmVyLT5nZXRCaWxsaW5nQWRkcmVzcygpOwoJCQkJCQkKCQkJCQljYXNlICJiaWxsaW5nY2l0eSI6CgkJCQkJCXJldHVybiAkbWVtYmVyLT5nZXRCaWxsaW5nQ2l0eSgpOwoJCQkJCQkKCQkJCQljYXNlICJiaWxsaW5nc3RhdGUiOgoJCQkJCQlnbG9iYWwgJHdwZGI7CgkJCQkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9jb2woIlNFTEVDVCBgbmFtZWAgZnJvbSAiIC4gTU1fVEFCTEVfQ09VTlRSWV9TVUJESVZJU0lPTlMgLiAiIHdoZXJlIGBpc29gID0gJyIgLiAkbWVtYmVyLT5nZXRCaWxsaW5nQ291bnRyeSgpIC4gIicgQU5EIGBjb2RlYCA9ICciIC4gJG1lbWJlci0+Z2V0QmlsbGluZ1N0YXRlKCkgLiAiJyIpOwoJCQkJCQlyZXR1cm4gaXNzZXQoJHJlc3VsdHNbMF0pID8gJHJlc3VsdHNbMF0gOiAkbWVtYmVyLT5nZXRCaWxsaW5nU3RhdGUoKTsKCQkJCQkJCgkJCQkJY2FzZSAiYmlsbGluZ3ppcGNvZGUiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0QmlsbGluZ1ppcENvZGUoKTsKCQkJCQkJCgkJCQkJY2FzZSAiYmlsbGluZ2NvdW50cnkiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0QmlsbGluZ0NvdW50cnkoKTsKCQkJCQkJCgkJCQkJY2FzZSAic2hpcHBpbmdhZGRyZXNzIjoKCQkJCQkJcmV0dXJuICRtZW1iZXItPmdldFNoaXBwaW5nQWRkcmVzcygpOwoJCQkJCQkKCQkJCQljYXNlICJzaGlwcGluZ2NpdHkiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0U2hpcHBpbmdDaXR5KCk7CgkJCQkJCQoJCQkJCWNhc2UgInNoaXBwaW5nc3RhdGUiOgoJCQkJCQlnbG9iYWwgJHdwZGI7CgkJCQkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9jb2woIlNFTEVDVCBgbmFtZWAgZnJvbSAiIC4gTU1fVEFCTEVfQ09VTlRSWV9TVUJESVZJU0lPTlMgLiAiIHdoZXJlIGBpc29gID0gJyIgLiAkbWVtYmVyLT5nZXRTaGlwcGluZ0NvdW50cnkoKSAuICInIEFORCBgY29kZWAgPSAnIiAuICRtZW1iZXItPmdldFNoaXBwaW5nU3RhdGUoKSAuICInIik7CgkJCQkJCXJldHVybiBpc3NldCgkcmVzdWx0c1swXSkgPyAkcmVzdWx0c1swXSA6ICRtZW1iZXItPmdldFNoaXBwaW5nU3RhdGUoKTsKCQkJCQkJCgkJCQkJY2FzZSAic2hpcHBpbmd6aXBjb2RlIjoKCQkJCQkJcmV0dXJuICRtZW1iZXItPmdldFNoaXBwaW5nWmlwQ29kZSgpOwoJCQkJCQkKCQkJCQljYXNlICJzaGlwcGluZ2NvdW50cnkiOgoJCQkJCQlyZXR1cm4gJG1lbWJlci0+Z2V0U2hpcHBpbmdDb3VudHJ5KCk7CgkJCQkJCQoJCQkJCWRlZmF1bHQ6CgkJCQkJCWlmKHN0cnBvcygkbmFtZSwgImN1c3RvbWZpZWxkXyIpICE9PSBmYWxzZSkKCQkJCQkJewoJCQkJCQkJJGZpZWxkSWQgPSBwcmVnX3JlcGxhY2UoIi9bXjAtOV0rLyIsICIiLCAkbmFtZSk7CgkJCQkJCQkkZGF0YSA9ICRtZW1iZXItPmdldEN1c3RvbURhdGFCeUZpZWxkSWQoJGZpZWxkSWQpOwoJCQkJCQkJcmV0dXJuIHN0cmlwc2xhc2hlcygkZGF0YS0+Z2V0VmFsdWUoKSk7CgkJCQkJCX0KCQkJCQkJZWxzZSBpZihzdHJwb3MoJG5hbWUsICJkYXlzd2l0aGJ1bmRsZV8iKSAhPT0gZmFsc2UpCgkJCQkJCXsKCQkJCQkJCSRidW5kbGVJZCA9IHByZWdfcmVwbGFjZSgiL1teMC05XSsvIiwgIiIsICRuYW1lKTsKCQkJCQkJCQoJCQkJCQkJaWYoJG1lbWJlci0+aGFzQnVuZGxlKCRidW5kbGVJZCwgZmFsc2UpKQoJCQkJCQkJewoJCQkJCQkJCSRkYXlzV2l0aEJ1bmRsZSA9ICRtZW1iZXItPmdldERheXNXaXRoQnVuZGxlKCRidW5kbGVJZCk7CgkJCQkJCQkJCgkJCQkJCQkJaWYoJGRheXNXaXRoQnVuZGxlICE9PSBmYWxzZSkKCQkJCQkJCQl7CgkJCQkJCQkJCXJldHVybiAkZGF5c1dpdGhCdW5kbGU7CgkJCQkJCQkJfQoJCQkJCQkJCWVsc2UgCgkJCQkJCQkJewoJCQkJCQkJCQlyZXR1cm4gLTE7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJZWxzZQoJCQkJCQkJewoJCQkJCQkJCXJldHVybiAtMTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ25hbWUnIGF0dHJpYnV0ZSAneyRuYW1lfScgaXMgaW52YWxpZCBmb3IgU21hcnRUYWcgeyRjb2RlfS4iOwoJCQkJCQl9CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICduYW1lJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIiI7CgkJfQoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9NZW1iZXJfTGluayB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvcgoJICogcmV0dXJuaW5nIGEgbGluayBiYXNlZCBvbiB0aGUgdHlwZSBhdHRyaWJ1dGUuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX21lbWJlcl9saW5rKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJJG1lbWJlciA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudFVzZXIoKTsKCQoJCWlmKCRtZW1iZXItPmlzVmFsaWQoKSkKCQl7CgkJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCQl7CgkJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJCXsKCQkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkJJCRrZXkgPSAkdjsKCQkJCX0KCQkJfQoKCQkJaWYoIWlzc2V0KCRyZWRpcmVjdHVybCkpCgkJCXsKCQkJCSRyZWRpcmVjdHVybCA9ICIiOwoJCQl9CgkJCQoJCQlpZihpc3NldCgkdHlwZSkpCgkJCXsKCQkJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQkJCXsKCQkJCQljYXNlICJjYW5jZWxtZW1iZXJzaGlwIjoKCQkJCQkJJHVybCA9ICJqYXZhc2NyaXB0OnB5bXR1dGlsc19qcy5jaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKHskbWVtYmVyLT5nZXRJZCgpfSwgIjsKCQkJCQkJJHVybCAuPSAieyRtZW1iZXItPmdldE1lbWJlcnNoaXBJZCgpfSwgIi5NTV9TdGF0dXM6OiRDQU5DRUxFRC4iLCAneyRyZWRpcmVjdHVybH0nKTsiOwoJCQkJCQlyZXR1cm4gJHVybDsKCQoJCQkJCWNhc2UgInBhdXNlbWVtYmVyc2hpcCI6CgkJCQkJCSR1cmwgPSAiamF2YXNjcmlwdDpweW10dXRpbHNfanMuY2hhbmdlTWVtYmVyc2hpcFN0YXR1cyh7JG1lbWJlci0+Z2V0SWQoKX0sICI7CgkJCQkJCSR1cmwgLj0gInskbWVtYmVyLT5nZXRNZW1iZXJzaGlwSWQoKX0sICIuTU1fU3RhdHVzOjokUEFVU0VELiIsICd7JHJlZGlyZWN0dXJsfScpOyI7CgkJCQkJCXJldHVybiAkdXJsOwoJCgkJCQkJY2FzZSAiY2FuY2VsYnVuZGxlIjoKCQkJCQljYXNlICJwYXVzZWJ1bmRsZSI6CgkJCQkJCWlmKGlzc2V0KCR2YWx1ZSkpCgkJCQkJCXsKCQkJCQkJCWlmKHN0cnRvbG93ZXIoJHR5cGUpID09ICJjYW5jZWxidW5kbGUiKQoJCQkJCQkJewoJCQkJCQkJCSRuZXdTdGF0dXMgPSBNTV9TdGF0dXM6OiRDQU5DRUxFRDsKCQkJCQkJCX0KCQkJCQkJCWVsc2UKCQkJCQkJCXsKCQkJCQkJCQkkbmV3U3RhdHVzID0gTU1fU3RhdHVzOjokUEFVU0VEOwoJCQkJCQkJfQoJCQkJCQkJCgkJCQkJCQkkdXJsID0gImphdmFzY3JpcHQ6cHltdHV0aWxzX2pzLmNoYW5nZUJ1bmRsZVN0YXR1cyh7JG1lbWJlci0+Z2V0SWQoKX0sICI7CgkJCQkJCQkkdXJsIC49ICJ7JHZhbHVlfSwgeyRuZXdTdGF0dXN9LCAneyRyZWRpcmVjdHVybH0nKTsiOwoJCQkJCQkJcmV0dXJuICR1cmw7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd2YWx1ZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9IHdoZW4gdHlwZSBpcyB7JHR5cGV9LiI7CgkJCQkJCX0KCQkJCQkJCgkJCQkJY2FzZSAiZnJlZWJ1bmRsZSI6CgkJCQkJCWlmKGlzc2V0KCR2YWx1ZSkpCgkJCQkJCXsJCgkJCQkJCQkkdXJsID0gImphdmFzY3JpcHQ6cHltdHV0aWxzX2pzLmFwcGx5RnJlZUJ1bmRsZSh7JG1lbWJlci0+Z2V0SWQoKX0sICI7CgkJCQkJCQkkdXJsIC49ICJ7JHZhbHVlfSwgJ3skcmVkaXJlY3R1cmx9Jyk7IjsKCQkJCQkJCXJldHVybiAkdXJsOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndmFsdWUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSB3aGVuIHR5cGUgaXMgeyR0eXBlfS4iOwoJCQkJCQkJfQoJCgkJCQkJZGVmYXVsdDoKCQkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndHlwZScgYXR0cmlidXRlICd7JHR5cGV9JyBpcyBpbnZhbGlkIGZvciBTbWFydFRhZyB7JGNvZGV9LiI7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogQ291bGQgbm90IGZpbmQgbWVtYmVyIGZvciBTbWFydFRhZyB7JGNvZGV9LiI7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(115, 'activitylogview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQWN0aXZpdHlMb2dWaWV3IGV4dGVuZHMgTU1fUkJBQ0dlbmVyYWxFbXBsb3llZVZpZXcKewoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0VBUkNIID0gInNlYXJjaCI7CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0VBUkNIOgoJCQkJCXJldHVybiAkdGhpcy0+Z2VuZXJhdGVEYXRhR3JpZCgkcG9zdCk7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZURhdGFHcmlkKCRwb3N0PW51bGwpCgl7CgkJcmV0dXJuIE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvYWN0aXZpdHlfbG9nLmRhdGFncmlkLnBocCIsICRwb3N0KTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKCRwb3N0LCBNTV9EYXRhR3JpZCAkZGcpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCk7CgkJCgkJaWYoIWVtcHR5KCRwb3N0WyJtZW1iZXJfaWQiXSkpCgkJewoJCQlhcnJheV9wdXNoKCR3aGVyZUNsYXVzZSwgIih1c2VyX2lkPSd7JHBvc3RbIm1lbWJlcl9pZCJdfScpIik7CgkJfQoJCQoJCWlmKCFlbXB0eSgkcG9zdFsiZXZlbnRfdHlwZSJdKSkKCQl7CgkJCWFycmF5X3B1c2goJHdoZXJlQ2xhdXNlLCAiKGV2ZW50X3R5cGU9J3skcG9zdFsiZXZlbnRfdHlwZSJdfScpIik7CgkJfQoJCQoJCWlmKCFlbXB0eSgkcG9zdFsiZnJvbV9kYXRlIl0pKQoJCXsKCQkJJGZyb21EYXRlID0gTU1fVXRpbHM6OmRhdGVUb1VUQygkcG9zdFsnZnJvbV9kYXRlJ10sIlktbS1kIiwiMDA6MDA6MDAiKTsKCQkJYXJyYXlfcHVzaCgkd2hlcmVDbGF1c2UsICIoZGF0ZV9hZGRlZCA+PSAneyRmcm9tRGF0ZX0nKSIpOwoJCQkKCQkJaWYoIWVtcHR5KCRwb3N0WyJ0b19kYXRlIl0pKQoJCQl7CQkKCQkJCSR0b0RhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvVVRDKCRwb3N0Wyd0b19kYXRlJ10sIlktbS1kIiwiMjM6NTk6NTkiKTsKCQkJCWFycmF5X3B1c2goJHdoZXJlQ2xhdXNlLCAiKGRhdGVfYWRkZWQgPD0gJ3skdG9EYXRlfScpIik7CgkJCX0KCQl9CgkKCQkkd2hlcmVDbGF1c2UgPSBqb2luKCIgQU5EICIsICR3aGVyZUNsYXVzZSk7CgkJCgkJcmV0dXJuIHBhcmVudDo6Z2V0RGF0YShNTV9UQUJMRV9FVkVOVF9MT0csIG51bGwsICRkZywgJHdoZXJlQ2xhdXNlKTsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(116, 'countryutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0NvdW50cnlVdGlscwp7CQoJcHVibGljIHN0YXRpYyAkREZMVF9DT1VOVFJZX0lTTyA9ICJVUyI7CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RnVsbENvdW50cnlMaXN0KCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgaXNvLCBwcmludGFibGVfbmFtZSBmcm9tICIuTU1fVEFCTEVfQ09VTlRSSUVTLiIgb3JkZXIgYnkgcHJpbnRhYmxlX25hbWUgYXNjIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsLCBPQkpFQ1RfSyk7CgkJJGxpc3QgPSBhcnJheSgpOwoJCQoJCWZvcmVhY2ggKCRyZXN1bHRzIGFzICRpc289PiRyb3cpCgkJewoJCQkkbGlzdFskaXNvXSA9ICRyb3ctPnByaW50YWJsZV9uYW1lOwoJCX0KCQkKCQlyZXR1cm4gJGxpc3Q7Cgl9CgkKCS8qKgoJICogVGhpcyByZXR1cm5zIG9ubHkgdGhvc2UgY291bnRyaWVzIHdoaWNoIGhhdmUgYmVlbiBtYXJrZWQgZm9yIHVzZSBpbiB0aGUgTU0gY29uZmlndXJhdGlvbgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvdW50cnlMaXN0KCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkc3FsID0gIlNFTEVDVCBpc28sIHByaW50YWJsZV9uYW1lIGZyb20gIi5NTV9UQUJMRV9DT1VOVFJJRVMuIiBvcmRlciBieSBwcmludGFibGVfbmFtZSBhc2MiOwoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwsIE9CSkVDVF9LKTsKCQkkbGlzdCA9IGFycmF5KCk7CgkKCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkaXNvPT4kcm93KQoJCXsKCQkJJHNlbGVjdGVkQ291bnRyaWVzID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQ09VTlRSWV9TRUxFQ1RJT05TKTsKCQkKCQkJaWYoYXJyYXlfa2V5X2V4aXN0cygkaXNvLCAkc2VsZWN0ZWRDb3VudHJpZXMpKQoJCQl7CgkJCQkkbGlzdFskaXNvXSA9ICRyb3ctPnByaW50YWJsZV9uYW1lOwoJCQl9CgkJfQoJCgkJcmV0dXJuICRsaXN0OwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvdW50cnlOYW1lKCRpc29Db2RlKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIlNFTEVDVCBwcmludGFibGVfbmFtZSBmcm9tICIuTU1fVEFCTEVfQ09VTlRSSUVTLiIgd2hlcmUgaXNvID0gJ3skaXNvQ29kZX0nIGxpbWl0IDE7IjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoaXNzZXQoJHJvdy0+cHJpbnRhYmxlX25hbWUpKQoJCXsKCQkJcmV0dXJuICRyb3ctPnByaW50YWJsZV9uYW1lOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gJGlzb0NvZGU7CQoJCX0KCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNvbnZlcnRJU08zKCRpc28zQ29kZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkc3FsID0gIlNFTEVDVCBpc28gZnJvbSAiLk1NX1RBQkxFX0NPVU5UUklFUy4iIHdoZXJlIGlzbzMgPSAneyRpc28zQ29kZX0nIGxpbWl0IDE7IjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkKCQlpZihpc3NldCgkcm93LT5pc28pKQoJCXsKCQkJcmV0dXJuICRyb3ctPmlzbzsKCQl9CgkJCgkJcmV0dXJuICRpc28zQ29kZTsKCX0KfQo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(117, 'apiservice', 'LyoqCiAqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9BUElTZXJ2aWNlCnsKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TWVtYmVyKCRkYXRhKQoJewkKCQlpZighZW1wdHkoJGRhdGEtPm1lbWJlcl9pZCkpCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRkYXRhLT5tZW1iZXJfaWQpOwoJCQoJCQlpZighJHVzZXItPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTm8gbWVtYmVyIGZvdW5kIGZvciBtZW1iZXIgSUQgJ3skZGF0YS0+bWVtYmVyX2lkfSciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkdXNlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRkYXRhLT5lbWFpbCk7CgkJCQoJCQlpZighJHVzZXItPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTm8gbWVtYmVyIGZvdW5kIGZvciBlbWFpbCAneyRkYXRhLT5lbWFpbH0nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJJHVzZXJEYXRhID0gYXJyYXkoCgkJCSdtZW1iZXJfaWQnPT4kdXNlci0+Z2V0SWQoKSwKCQkJJ2ZpcnN0X25hbWUnPT4kdXNlci0+Z2V0Rmlyc3ROYW1lKCksCgkJCSdsYXN0X25hbWUnPT4kdXNlci0+Z2V0TGFzdE5hbWUoKSwKCQkJJ2lzX2NvbXBsaW1lbnRhcnknPT4kdXNlci0+aXNDb21wbGltZW50YXJ5KCkgPyAndHJ1ZScgOiAnZmFsc2UnLAoJCQkncmVnaXN0ZXJlZCc9PiR1c2VyLT5nZXRSZWdpc3RyYXRpb25EYXRlKCksCgkJCSdjYW5jZWxsYXRpb25fZGF0ZSc9PicnLAoJCQknbGFzdF9sb2dnZWRfaW4nPT4kdXNlci0+Z2V0TGFzdExvZ2luRGF0ZSgpLAoJCQknbGFzdF91cGRhdGVkJz0+JHVzZXItPmdldExhc3RVcGRhdGVkRGF0ZSgpLAoJCQknZGF5c19hc19tZW1iZXInPT4kdXNlci0+Z2V0RGF5c0FzTWVtYmVyKCksCgkJCSdzdGF0dXMnPT4kdXNlci0+Z2V0U3RhdHVzKCksCgkJCSdzdGF0dXNfbmFtZSc9PiR1c2VyLT5nZXRTdGF0dXNOYW1lKCksCgkJCSdtZW1iZXJzaGlwX2xldmVsJz0+JHVzZXItPmdldE1lbWJlcnNoaXBJZCgpLAoJCQknbWVtYmVyc2hpcF9sZXZlbF9uYW1lJz0+JHVzZXItPmdldE1lbWJlcnNoaXBOYW1lKCksCgkJCSd1c2VybmFtZSc9PiR1c2VyLT5nZXRVc2VybmFtZSgpLAoJCQknZW1haWwnID0+ICR1c2VyLT5nZXRFbWFpbCgpLAoJCQkncGFzc3dvcmQnPT4kdXNlci0+Z2V0UGFzc3dvcmQoKSwKCQkJJ3Bob25lJyA9PiAkdXNlci0+Z2V0UGhvbmUoKSwKCQkJJ2JpbGxpbmdfYWRkcmVzcyc9PiR1c2VyLT5nZXRCaWxsaW5nQWRkcmVzcygpLAoJCQknYmlsbGluZ19jaXR5Jz0+JHVzZXItPmdldEJpbGxpbmdDaXR5KCksCgkJCSdiaWxsaW5nX3N0YXRlJz0+JHVzZXItPmdldEJpbGxpbmdTdGF0ZSgpLAoJCQknYmlsbGluZ196aXAnPT4kdXNlci0+Z2V0QmlsbGluZ1ppcENvZGUoKSwKCQkJJ2JpbGxpbmdfY291bnRyeSc9PiR1c2VyLT5nZXRCaWxsaW5nQ291bnRyeU5hbWUoKSwKCQkJJ3NoaXBwaW5nX2FkZHJlc3MnPT4kdXNlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCksCgkJCSdzaGlwcGluZ19jaXR5Jz0+JHVzZXItPmdldFNoaXBwaW5nQ2l0eSgpLAoJCQknc2hpcHBpbmdfc3RhdGUnPT4kdXNlci0+Z2V0U2hpcHBpbmdTdGF0ZSgpLAoJCQknc2hpcHBpbmdfemlwJz0+JHVzZXItPmdldFNoaXBwaW5nWmlwQ29kZSgpLAoJCQknc2hpcHBpbmdfY291bnRyeSc9PiR1c2VyLT5nZXRTaGlwcGluZ0NvdW50cnlOYW1lKCkKCQkpOwoJCQoJCWlmKCR1c2VyLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKCQl7CgoJCQkkdXNlckRhdGFbJ2NhbmNlbGxhdGlvbl9kYXRlJ10gPSAkdXNlci0+Z2V0Q2FuY2VsbGF0aW9uRGF0ZSgpOwoJCX0KCQkKCQkvLyBidW5kbGVzCgkJJGFwcGxpZWRCdW5kbGVzID0gJHVzZXItPmdldEFwcGxpZWRCdW5kbGVzKCk7CgkJJGJ1bmRsZUluZm8gPSBhcnJheSgpOwoJCQoJCWZvcmVhY2goJGFwcGxpZWRCdW5kbGVzIGFzICRhcHBsaWVkQnVuZGxlKQoJCXsKCQkJJGNybnRCdW5kbGVJbmZvID0gYXJyYXkoKTsKCQkJJGNybnRCdW5kbGVJbmZvWyJpZCJdID0gJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZUlkKCk7CgkJCSRjcm50QnVuZGxlSW5mb1sibmFtZSJdID0gJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZSgpLT5nZXROYW1lKCk7CgkJCSRjcm50QnVuZGxlSW5mb1siaXNfY29tcGxpbWVudGFyeSJdID0gJGFwcGxpZWRCdW5kbGUtPmlzQ29tcGxpbWVudGFyeSgpID8gJ3RydWUnIDogJ2ZhbHNlJzsKCQkJJGNybnRCdW5kbGVJbmZvWyJkYXlzX3dpdGhfYnVuZGxlIl0gPSAkdXNlci0+Z2V0RGF5c1dpdGhCdW5kbGUoJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZUlkKCkpOwoJCQkkY3JudEJ1bmRsZUluZm9bInN0YXR1cyJdID0gJGFwcGxpZWRCdW5kbGUtPmdldFN0YXR1cygpOwoJCQkkY3JudEJ1bmRsZUluZm9bInN0YXR1c19uYW1lIl0gPSBNTV9TdGF0dXM6OmdldE5hbWUoJGFwcGxpZWRCdW5kbGUtPmdldFN0YXR1cygpKTsKCQkJJGNybnRCdW5kbGVJbmZvWyJkYXRlX2FkZGVkIl0gPSAkYXBwbGllZEJ1bmRsZS0+Z2V0QXBwbHlEYXRlKCk7CgkJCSRjcm50QnVuZGxlSW5mb1sibGFzdF91cGRhdGVkIl0gPSAkYXBwbGllZEJ1bmRsZS0+Z2V0U3RhdHVzVXBkYXRlZERhdGUoKTsKCQkKCQkJJGJ1bmRsZUluZm9bXSA9ICRjcm50QnVuZGxlSW5mbzsKCQl9CgkJCgkJJHVzZXJEYXRhWyJidW5kbGVzIl0gPSAkYnVuZGxlSW5mbzsKCQkKCQkvLyBjdXN0b20gZmllbGRzCgkJJGZpZWxkcyA9IE1NX0N1c3RvbUZpZWxkOjpnZXRDdXN0b21GaWVsZHNMaXN0KCk7CgkJJGN1c3RvbUZpZWxkSW5mbyA9IGFycmF5KCk7CgkJCgkJZm9yZWFjaCgkZmllbGRzIGFzICRpZD0+JHZhbCkKCQl7CgkJCSRjdXN0b21GaWVsZCA9IG5ldyBNTV9DdXN0b21GaWVsZCgkaWQpOwoJCQkKCQkJaWYoJGN1c3RvbUZpZWxkLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRjcm50Q3VzdG9tRmllbGRJbmZvID0gYXJyYXkoKTsKCQkJCSRjcm50Q3VzdG9tRmllbGRJbmZvWyJpZCJdID0gJGN1c3RvbUZpZWxkLT5nZXRJZCgpOwoJCQkJJGNybnRDdXN0b21GaWVsZEluZm9bIm5hbWUiXSA9ICRjdXN0b21GaWVsZC0+Z2V0RGlzcGxheU5hbWUoKTsKCQkJCSRjcm50Q3VzdG9tRmllbGRJbmZvWyJ2YWx1ZSJdID0gJHVzZXItPmdldEN1c3RvbURhdGFCeUZpZWxkSWQoJGN1c3RvbUZpZWxkLT5nZXRJZCgpKS0+Z2V0VmFsdWUoKTsKCQkJCQoJCQkJJGN1c3RvbUZpZWxkSW5mb1tdID0gJGNybnRDdXN0b21GaWVsZEluZm87CgkgCQl9CgkJfQoJCQoJCSR1c2VyRGF0YVsiY3VzdG9tX2ZpZWxkcyJdID0gJGN1c3RvbUZpZWxkSW5mbzsKCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCR1c2VyRGF0YSk7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1cGRhdGVNZW1iZXIoJGRhdGEpCgl7CgkJJGRvQ29tbWl0ID0gZmFsc2U7CgkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCQoJCWlmKCFlbXB0eSgkZGF0YS0+bWVtYmVyX2lkKSkKCQl7CgkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJGRhdGEtPm1lbWJlcl9pZCk7CgkJCgkJCWlmKCEkdXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJObyBtZW1iZXIgZm91bmQgZm9yIG1lbWJlciBJRCAneyRkYXRhLT5tZW1iZXJfaWR9JyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSR1c2VyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGRhdGEtPmVtYWlsKTsKCQkJCgkJCWlmKCEkdXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJObyBtZW1iZXIgZm91bmQgZm9yIGVtYWlsICd7JGRhdGEtPmVtYWlsfSciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkvLyBhY2NvdW50IGluZm8KCQlpZihpc3NldCgkZGF0YS0+dXNlcm5hbWUpKQoJCXsKCQkJJHVzZXItPnNldFVzZXJuYW1lKCRkYXRhLT51c2VybmFtZSk7CgkJCSRkb0NvbW1pdCA9IHRydWU7CgkJfQoJCQoJCWlmKGlzc2V0KCRkYXRhLT5maXJzdF9uYW1lKSkKCQl7CgkJCSR1c2VyLT5zZXRGaXJzdE5hbWUoJGRhdGEtPmZpcnN0X25hbWUpOwoJCQkkZG9Db21taXQgPSB0cnVlOwoJCX0KCQkKCQlpZihpc3NldCgkZGF0YS0+bGFzdF9uYW1lKSkKCQl7CgkJCSR1c2VyLT5zZXRMYXN0TmFtZSgkZGF0YS0+bGFzdF9uYW1lKTsKCQkJJGRvQ29tbWl0ID0gdHJ1ZTsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPnBob25lKSkKCQl7CgkJCSR1c2VyLT5zZXRQaG9uZSgkZGF0YS0+cGhvbmUpOwoJCQkkZG9Db21taXQgPSB0cnVlOwoJCX0KCQkKCQlpZihpc3NldCgkZGF0YS0+cGFzc3dvcmQpKQoJCXsKCQkJJHVzZXItPnNldFBhc3N3b3JkKCRkYXRhLT5wYXNzd29yZCk7CgkJCSRkb0NvbW1pdCA9IHRydWU7CgkJfQoJCQoJCS8vIGJpbGxpbmcgaW5mbwoJCWlmKGlzc2V0KCRkYXRhLT5iaWxsaW5nX2FkZHJlc3MpKQoJCXsKCQkJJHVzZXItPnNldEJpbGxpbmdBZGRyZXNzKCRkYXRhLT5iaWxsaW5nX2FkZHJlc3MpOwoJCQkkZG9Db21taXQgPSB0cnVlOwoJCX0KCQkKCQlpZihpc3NldCgkZGF0YS0+YmlsbGluZ19jaXR5KSkKCQl7CgkJCSR1c2VyLT5zZXRCaWxsaW5nQ2l0eSgkZGF0YS0+YmlsbGluZ19jaXR5KTsKCQkJJGRvQ29tbWl0ID0gdHJ1ZTsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPmJpbGxpbmdfc3RhdGUpKQoJCXsKCQkJJHVzZXItPnNldEJpbGxpbmdTdGF0ZSgkZGF0YS0+YmlsbGluZ19zdGF0ZSk7CgkJCSRkb0NvbW1pdCA9IHRydWU7CgkJfQoJCQoJCWlmKGlzc2V0KCRkYXRhLT5iaWxsaW5nX3ppcCkpCgkJewoJCQkkdXNlci0+c2V0QmlsbGluZ1ppcENvZGUoJGRhdGEtPmJpbGxpbmdfemlwKTsKCQkJJGRvQ29tbWl0ID0gdHJ1ZTsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPmJpbGxpbmdfY291bnRyeSkpCgkJewoJCQkkdXNlci0+c2V0QmlsbGluZ0NvdW50cnkoJGRhdGEtPmJpbGxpbmdfY291bnRyeSk7CgkJCSRkb0NvbW1pdCA9IHRydWU7CgkJfQoJCQoJCS8vIHNoaXBwaW5nIGluZm8KCQlpZihpc3NldCgkZGF0YS0+c2hpcHBpbmdfYWRkcmVzcykpCgkJewoJCQkkdXNlci0+c2V0U2hpcHBpbmdBZGRyZXNzKCRkYXRhLT5zaGlwcGluZ19hZGRyZXNzKTsKCQkJJGRvQ29tbWl0ID0gdHJ1ZTsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPnNoaXBwaW5nX2NpdHkpKQoJCXsKCQkJJHVzZXItPnNldFNoaXBwaW5nQ2l0eSgkZGF0YS0+c2hpcHBpbmdfY2l0eSk7CgkJCSRkb0NvbW1pdCA9IHRydWU7CgkJfQoJCQoJCWlmKGlzc2V0KCRkYXRhLT5zaGlwcGluZ19zdGF0ZSkpCgkJewoJCQkkdXNlci0+c2V0U2hpcHBpbmdTdGF0ZSgkZGF0YS0+c2hpcHBpbmdfc3RhdGUpOwoJCQkkZG9Db21taXQgPSB0cnVlOwoJCX0KCQkKCQlpZihpc3NldCgkZGF0YS0+c2hpcHBpbmdfemlwKSkKCQl7CgkJCSR1c2VyLT5zZXRTaGlwcGluZ1ppcENvZGUoJGRhdGEtPnNoaXBwaW5nX3ppcCk7CgkJCSRkb0NvbW1pdCA9IHRydWU7CgkJfQoJCQoJCWlmKGlzc2V0KCRkYXRhLT5zaGlwcGluZ19jb3VudHJ5KSkKCQl7CgkJCSR1c2VyLT5zZXRTaGlwcGluZ0NvdW50cnkoJGRhdGEtPnNoaXBwaW5nX2NvdW50cnkpOwoJCQkkZG9Db21taXQgPSB0cnVlOwoJCX0KCQkKCQlpZigkZG9Db21taXQpCgkJewoJCQkkcmVzdWx0ID0gJHVzZXItPmNvbW1pdERhdGEoKTsKCQl9CgkJCgkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpIAoJCXsKCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCQoJCS8vIGN1c3RvbSBmaWVsZHMKCQkkZmllbGRzID0gTU1fQ3VzdG9tRmllbGQ6OmdldEN1c3RvbUZpZWxkc0xpc3QoKTsKCQlmb3JlYWNoKCRmaWVsZHMgYXMgJGlkPT4kdmFsKQoJCXsKCQkJJGtleSA9ICJjdXN0b21fZmllbGRfIi4kaWQ7CgkJCWlmKGlzc2V0KCRkYXRhLT4ka2V5KSkKCQkJewoJCQkJJHJlc3VsdCA9ICR1c2VyLT5zZXRDdXN0b21EYXRhKCRpZCwgJGRhdGEtPiRrZXkpOwoJCQoJCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJCQl7CgkJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCQl9CgkJCX0KCQl9CgkJCgkJLy8gY2hhbmdlIG1lbWJlcnNoaXAgbGV2ZWwKCQlpZihpc3NldCgkZGF0YS0+bWVtYmVyc2hpcF9sZXZlbF9pZCkgJiYgKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSAhPSAkZGF0YS0+bWVtYmVyc2hpcF9sZXZlbF9pZCkpCgkJewoJCQkkcmVzdWx0ID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6Y2hhbmdlTWVtYmVyc2hpcCgkdXNlciwgJGRhdGEtPm1lbWJlcnNoaXBfbGV2ZWxfaWQpOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJCXsKCQkJCXJldHVybiAkcmVzdWx0OwoJCQl9CgkJfQoJCQoJCS8vIHNldCBhY2NvdW50IHN0YXR1cwoJCWlmKGlzc2V0KCRkYXRhLT5zdGF0dXMpICYmICgkdXNlci0+Z2V0U3RhdHVzKCkgIT0gJGRhdGEtPnN0YXR1cykpCgkJewoJCQkkdmFsaWRTdGF0dXNlcyA9IGFycmF5KE1NX1N0YXR1czo6JEFDVElWRSwgTU1fU3RhdHVzOjokQ0FOQ0VMRUQsIE1NX1N0YXR1czo6JFBBVVNFRCwgTU1fU3RhdHVzOjokTE9DS0VELCBNTV9TdGF0dXM6OiRPVkVSRFVFKTsKCQkJCgkJCWlmKGluX2FycmF5KCRkYXRhLT5zdGF0dXMsICR2YWxpZFN0YXR1c2VzKSkKCQkJewoJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmNoYW5nZU1lbWJlcnNoaXBTdGF0dXMoJHVzZXIsICRkYXRhLT5zdGF0dXMpOwoJCQkJCgkJCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQkJCXsKCQkJCQlyZXR1cm4gJHJlc3VsdDsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIG1lbWJlci4gSW52YWxpZCBzdGF0dXMgcGFzc2VkICd7JGRhdGEtPnN0YXR1c30nLiBBY2NlcHRhYmxlIHZhbHVlcyBhcmUgMSAoQWN0aXZlKSwgMiAoQ2FuY2VsZWQpLCAzIChMb2NrZWQpLCA0IChQYXVzZWQpIGFuZCA1IChPdmVyZHVlKS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVNZW1iZXIoJGRhdGEpCgl7CgkJJHBvc3QgPSBhcnJheSgpOwoJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkKCQkkdXNlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRkYXRhLT5lbWFpbCk7CgkJCgkJJG1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRkYXRhLT5tZW1iZXJzaGlwX2xldmVsX2lkKTsKCQlpZighJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQl7CgkJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgbWVtYmVyc2hpcCBsZXZlbCBJRCAneyRkYXRhLT5tZW1iZXJzaGlwX2xldmVsX2lkfScuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRleGVjdXRpb25TdGF0dXMpKQoJCXsKCQkJcmV0dXJuICRleGVjdXRpb25TdGF0dXM7CgkJfQoJCQoJCSRtZW1iZXJEYXRhID0gYXJyYXkoKTsKCQkkbWVtYmVyRGF0YVsibW1fbWVtYmVyc2hpcF9sZXZlbF9pZCJdID0gJG1lbWJlcnNoaXAtPmdldElkKCk7CgkJJG1lbWJlckRhdGFbIm1tX2lzX2ZyZWUiXSA9ICgkbWVtYmVyc2hpcC0+aXNGcmVlKCkpID8gIjEiIDogIjAiOwoJCSRtZW1iZXJEYXRhWyJtbV9pc19zaGlwcGFibGUiXSA9ICIwIjsKCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfbWV0aG9kIl0gPSAiIjsKCQkkbWVtYmVyRGF0YVsibW1fcHJvZHVjdF9pZCJdID0gIjAiOwoJCQoJCWlmKCEkbWVtYmVyc2hpcC0+aXNGcmVlKCkpCgkJewoJCQlpZihpc3NldCgkZGF0YS0+c2hpcHBpbmdfc2FtZV9hc19iaWxsaW5nKSAmJiBzdHJ0b2xvd2VyKCRkYXRhLT5zaGlwcGluZ19zYW1lX2FzX2JpbGxpbmcpID09ICJ5ZXMiKQoJCQl7CgkJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19lcXVhbHNfc2hpcHBpbmciXSA9ICIxIjsKCQkJCSRzaGlwcGluZ1NhbWVBc0JpbGxpbmcgPSB0cnVlOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfZXF1YWxzX3NoaXBwaW5nIl0gPSAiMCI7CgkJCQkkc2hpcHBpbmdTYW1lQXNCaWxsaW5nID0gZmFsc2U7CgkJCX0KCQkJCgkJCS8vIGNoZWNrIHJlcXVpcmVkIGZpZWxkcyBmb3IgcGFpZCBtZW1iZXJzaGlwcwoJCQkkcmVxID0gYXJyYXkoJ2JpbGxpbmdfYWRkcmVzcycsJ2JpbGxpbmdfY2l0eScsJ2JpbGxpbmdfc3RhdGUnLCdiaWxsaW5nX3ppcCcsCgkJCQkJJ2JpbGxpbmdfY291bnRyeScsICdzaGlwcGluZ19hZGRyZXNzJywnc2hpcHBpbmdfY2l0eScsJ3NoaXBwaW5nX3N0YXRlJywnc2hpcHBpbmdfemlwJywKCQkJCQknc2hpcHBpbmdfY291bnRyeScsJ2NyZWRpdF9udW1iZXInLCdleHBfbW9udGgnLCdleHBfeWVhcicsJ3NlY3VyaXR5X2NvZGUnLCdzaGlwcGluZ19tZXRob2QnCgkJCSk7CgkJCQoJCQlmb3JlYWNoKCRyZXEgYXMgJGZpZWxkKQoJCQl7CgkJCQlpZighaXNzZXQoJGRhdGEtPiRmaWVsZCkpCgkJCQl7CgkJCQkJaWYoJHNoaXBwaW5nU2FtZUFzQmlsbGluZyAmJiBwcmVnX21hdGNoKCIvKHNoaXBwaW5nXykvIiwgJGZpZWxkKSkKCQkJCQl7CgkJCQkJCWNvbnRpbnVlOwoJCQkJCX0KCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkIGZvciBwYWlkIG1lbWJlcnNoaXAgbGV2ZWxzIFsiLiRmaWVsZC4iXS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCQkKCQkJaWYoaXNzZXQoJGRhdGEtPnByb2R1Y3RfaWQpICYmIGludHZhbCgkZGF0YS0+cHJvZHVjdF9pZCkgPiAwKQoJCQl7CgkJCQkkbWVtYmVyRGF0YVsibW1fcHJvZHVjdF9pZCJdID0gJGRhdGEtPnByb2R1Y3RfaWQ7CgkJCQkKCQkJCSRwcm9kdWN0SWRzID0gJG1lbWJlcnNoaXAtPmdldFByb2R1Y3RJZHMoKTsKCQkJCQoJCQkJaWYoIWlzc2V0KCRwcm9kdWN0SWRzWyRtZW1iZXJEYXRhWyJtbV9wcm9kdWN0X2lkIl1dKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBtZW1iZXIuIFByb2R1Y3QgSUQgJ3skbWVtYmVyRGF0YVsibW1fcHJvZHVjdF9pZCJdfScgaXMgbm90IGFzc29jaWF0ZWQgd2l0aCAneyRtZW1iZXJzaGlwLT5nZXROYW1lKCl9JyBtZW1iZXJzaGlwIGxldmVsLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG1lbWJlckRhdGFbIm1tX3Byb2R1Y3RfaWQiXSA9ICRtZW1iZXJzaGlwLT5nZXREZWZhdWx0UHJvZHVjdCgpOwoJCQl9CgkJCQoJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRtZW1iZXJEYXRhWyJtbV9wcm9kdWN0X2lkIl0pOwoJCQkKCQkJaWYoISRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIG1lbWJlci4gSW52YWxpZCBwcm9kdWN0IElEICd7JG1lbWJlckRhdGFbIm1tX3Byb2R1Y3RfaWQiXX0nLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQoJCQlpZigkcHJvZHVjdC0+aXNTaGlwcGFibGUoKSkKCQkJewoJCQkJJG1lbWJlckRhdGFbIm1tX2lzX3NoaXBwYWJsZSJdID0gIjEiOwoJCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX21ldGhvZCJdID0gJGRhdGEtPnNoaXBwaW5nX21ldGhvZDsKCQkJfQoJCQkKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2NjX251bWJlciJdID0gJGRhdGEtPmNyZWRpdF9udW1iZXI7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9jY19leHBfbW9udGgiXSA9ICRkYXRhLT5leHBfbW9udGg7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9jY19leHBfeWVhciJdID0gJGRhdGEtPmV4cF95ZWFyOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfY2NfY3Z2Il0gPSAkZGF0YS0+c2VjdXJpdHlfY29kZTsKCQkJCgkJCQoJCQlpZihpc3NldCgkZGF0YS0+Y291cG9uX2NvZGUpICYmICRkYXRhLT5jb3Vwb25fY29kZSAhPSAiIikKCQkJewoJCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2NvdXBvbl9jb2RlIl0gPSAkZGF0YS0+Y291cG9uX2NvZGU7CgkJCX0KCQkJaWYoaXNzZXQoJGRhdGEtPmFmZmlsaWF0ZV9pZCkgJiYgJGRhdGEtPmFmZmlsaWF0ZV9pZCAhPSAiIikKCQkJewoJCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2FmZmlsaWF0ZV9pZCJdID0gJGRhdGEtPmFmZmlsaWF0ZV9pZDsKCQkJfQoJCQlpZihpc3NldCgkZGF0YS0+c3ViX2FmZmlsaWF0ZV9pZCkgJiYgJGRhdGEtPnN1Yl9hZmZpbGlhdGVfaWQgIT0gIiIpCgkJCXsKCQkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9zdWJfYWZmaWxpYXRlX2lkIl0gPSAkZGF0YS0+c3ViX2FmZmlsaWF0ZV9pZDsKCQkJfQoJCX0KCQkKCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3VzZXJfaWQiXSA9ICR1c2VyLT5nZXRJZCgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfZmlyc3RfbmFtZSJdID0gJHVzZXItPmdldEZpcnN0TmFtZSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfbGFzdF9uYW1lIl0gPSAkdXNlci0+Z2V0TGFzdE5hbWUoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2VtYWlsIl0gPSAkdXNlci0+Z2V0RW1haWwoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3VzZXJuYW1lIl0gPSAkdXNlci0+Z2V0VXNlcm5hbWUoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3Bob25lIl0gPSAkdXNlci0+Z2V0UGhvbmUoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzcyJdID0gJHVzZXItPmdldEJpbGxpbmdBZGRyZXNzKCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NpdHkiXSA9ICR1c2VyLT5nZXRCaWxsaW5nQ2l0eSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19zdGF0ZSJdID0gJHVzZXItPmdldEJpbGxpbmdTdGF0ZSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ196aXAiXSA9ICR1c2VyLT5nZXRCaWxsaW5nWmlwQ29kZSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0gPSAkdXNlci0+Z2V0QmlsbGluZ0NvdW50cnkoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MiXSA9ICR1c2VyLT5nZXRTaGlwcGluZ0FkZHJlc3MoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NpdHkiXSA9ICR1c2VyLT5nZXRTaGlwcGluZ0NpdHkoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIl0gPSAkdXNlci0+Z2V0U2hpcHBpbmdTdGF0ZSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfemlwIl0gPSAkdXNlci0+Z2V0U2hpcHBpbmdaaXBDb2RlKCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5Il0gPSAkdXNlci0+Z2V0U2hpcHBpbmdDb3VudHJ5KCk7CgkJfQoJCWVsc2UgCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfdXNlcl9pZCJdID0gIiI7CgkJfQoJCQoJCWlmKGlzc2V0KCRkYXRhLT5maXJzdF9uYW1lKSAmJiAkZGF0YS0+Zmlyc3RfbmFtZSAhPSAiIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9maXJzdF9uYW1lIl0gPSAkZGF0YS0+Zmlyc3RfbmFtZTsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPmxhc3RfbmFtZSkgJiYgJGRhdGEtPmxhc3RfbmFtZSAhPSAiIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9sYXN0X25hbWUiXSA9ICRkYXRhLT5sYXN0X25hbWU7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5lbWFpbCkgJiYgJGRhdGEtPmVtYWlsICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2VtYWlsIl0gPSAkZGF0YS0+ZW1haWw7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT51c2VybmFtZSkgJiYgJGRhdGEtPnVzZXJuYW1lICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3VzZXJuYW1lIl0gPSAkZGF0YS0+dXNlcm5hbWU7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5waG9uZSkgJiYgJGRhdGEtPnBob25lICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3Bob25lIl0gPSAkZGF0YS0+cGhvbmU7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5wYXNzd29yZCkgJiYgJGRhdGEtPnBhc3N3b3JkICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3Bhc3N3b3JkIl0gPSAkZGF0YS0+cGFzc3dvcmQ7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5iaWxsaW5nX2FkZHJlc3MpICYmICRkYXRhLT5iaWxsaW5nX2FkZHJlc3MgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19hZGRyZXNzIl0gPSAkZGF0YS0+YmlsbGluZ19hZGRyZXNzOwoJCX0KCQlpZihpc3NldCgkZGF0YS0+YmlsbGluZ19jaXR5KSAmJiAkZGF0YS0+YmlsbGluZ19jaXR5ICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY2l0eSJdID0gJGRhdGEtPmJpbGxpbmdfY2l0eTsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPmJpbGxpbmdfc3RhdGUpICYmICRkYXRhLT5iaWxsaW5nX3N0YXRlICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSA9ICRkYXRhLT5iaWxsaW5nX3N0YXRlOwoJCX0KCQlpZihpc3NldCgkZGF0YS0+YmlsbGluZ196aXApICYmICRkYXRhLT5iaWxsaW5nX3ppcCAhPSAiIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX3ppcCJdID0gJGRhdGEtPmJpbGxpbmdfemlwOwoJCX0KCQlpZihpc3NldCgkZGF0YS0+YmlsbGluZ19jb3VudHJ5KSAmJiAkZGF0YS0+YmlsbGluZ19jb3VudHJ5ICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSJdID0gJGRhdGEtPmJpbGxpbmdfY291bnRyeTsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPnNoaXBwaW5nX2FkZHJlc3MpICYmICRkYXRhLT5zaGlwcGluZ19hZGRyZXNzICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MiXSA9ICRkYXRhLT5zaGlwcGluZ19hZGRyZXNzOwoJCX0KCQlpZihpc3NldCgkZGF0YS0+c2hpcHBpbmdfY2l0eSkgJiYgJGRhdGEtPnNoaXBwaW5nX2NpdHkgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdID0gJGRhdGEtPnNoaXBwaW5nX2NpdHk7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5zaGlwcGluZ19zdGF0ZSkgJiYgJGRhdGEtPnNoaXBwaW5nX3N0YXRlICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIl0gPSAkZGF0YS0+c2hpcHBpbmdfc3RhdGU7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5zaGlwcGluZ196aXApICYmICRkYXRhLT5zaGlwcGluZ196aXAgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfemlwIl0gPSAkZGF0YS0+c2hpcHBpbmdfemlwOwoJCX0KCQlpZihpc3NldCgkZGF0YS0+c2hpcHBpbmdfY291bnRyeSkgJiYgJGRhdGEtPnNoaXBwaW5nX2NvdW50cnkgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID0gJGRhdGEtPnNoaXBwaW5nX2NvdW50cnk7CgkJfQoJCQoJCS8vIGdldCBjdXN0b20gZmllbGQgZGF0YQoJCWZvcmVhY2goJGRhdGEgYXMgJGtleT0+JHZhbHVlKQoJCXsKCQkJaWYocHJlZ19tYXRjaCgiLyhjdXN0b21fKS8iLCAka2V5KSkKCQkJewoJCQkJJG1lbWJlckRhdGFbJGtleV0gPSAkdmFsdWU7CgkJCX0KCQl9CgkJCgkJJGFwaVJlcXVlc3QgPSBuZXcgTU1fRGVmYXVsdE9yZGVyUmVxdWVzdCgkbWVtYmVyRGF0YSwgdHJ1ZSk7CgkJcmV0dXJuICRhcGlSZXF1ZXN0LT5zdWJtaXRSZXF1ZXN0KCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHVyY2hhc2VCdW5kbGUoJGRhdGEpCgl7CgkJJHBvc3QgPSBhcnJheSgpOwoJCSRleGVjdXRpb25TdGF0dXMgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkKCQkkdXNlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRkYXRhLT5lbWFpbCk7CgkJCgkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkZGF0YS0+cHJvZHVjdF9pZCk7CgkJaWYoISRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJewoJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJJbnZhbGlkIHByb2R1Y3QgSUQgJ3skZGF0YS0+cHJvZHVjdF9pZH0nLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkZXhlY3V0aW9uU3RhdHVzKSkKCQl7CgkJCXJldHVybiAkZXhlY3V0aW9uU3RhdHVzOwoJCX0KCQkKCQkkbWVtYmVyRGF0YSA9IGFycmF5KCk7CgkJJG1lbWJlckRhdGFbIm1tX21lbWJlcnNoaXBfbGV2ZWxfaWQiXSA9ICIwIjsKCQkkbWVtYmVyRGF0YVsibW1fcHJvZHVjdF9pZCJdID0gJHByb2R1Y3QtPmdldElkKCk7CgkJJG1lbWJlckRhdGFbIm1tX2lzX2ZyZWUiXSA9ICIwIjsKCQkKCQlpZigkcHJvZHVjdC0+aXNTaGlwcGFibGUoKSkKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9pc19zaGlwcGFibGUiXSA9ICIxIjsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX21ldGhvZCJdID0gJGRhdGEtPnNoaXBwaW5nX21ldGhvZDsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPnNoaXBwaW5nX3NhbWVfYXNfYmlsbGluZykgJiYgc3RydG9sb3dlcigkZGF0YS0+c2hpcHBpbmdfc2FtZV9hc19iaWxsaW5nKSA9PSAieWVzIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX2VxdWFsc19zaGlwcGluZyJdID0gIjEiOwoJCQkkc2hpcHBpbmdTYW1lQXNCaWxsaW5nID0gdHJ1ZTsKCQl9CgkJZWxzZQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfZXF1YWxzX3NoaXBwaW5nIl0gPSAiMCI7CgkJCSRzaGlwcGluZ1NhbWVBc0JpbGxpbmcgPSBmYWxzZTsKCQl9CgkJCgkJLy8gY2hlY2sgcmVxdWlyZWQgZmllbGRzIGZvciBwYWlkIG1lbWJlcnNoaXBzCgkJJHJlcSA9IGFycmF5KCdiaWxsaW5nX2FkZHJlc3MnLCdiaWxsaW5nX2NpdHknLCdiaWxsaW5nX3N0YXRlJywnYmlsbGluZ196aXAnLAoJCQkJJ2JpbGxpbmdfY291bnRyeScsICdzaGlwcGluZ19hZGRyZXNzJywnc2hpcHBpbmdfY2l0eScsJ3NoaXBwaW5nX3N0YXRlJywnc2hpcHBpbmdfemlwJywKCQkJCSdzaGlwcGluZ19jb3VudHJ5JywnY3JlZGl0X251bWJlcicsJ2V4cF9tb250aCcsJ2V4cF95ZWFyJywnc2VjdXJpdHlfY29kZScsJ3NoaXBwaW5nX21ldGhvZCcKCQkpOwoJCQoJCWZvcmVhY2goJHJlcSBhcyAkZmllbGQpCgkJewoJCQlpZighaXNzZXQoJGRhdGEtPiRmaWVsZCkpCgkJCXsKCQkJCWlmKCRzaGlwcGluZ1NhbWVBc0JpbGxpbmcgJiYgcHJlZ19tYXRjaCgiLyhzaGlwcGluZ18pLyIsICRmaWVsZCkpCgkJCQl7CgkJCQkJY29udGludWU7CgkJCQl9CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJNaXNzaW5nIHJlcXVpcmVkIGZpZWxkIGZvciBwYWlkIG1lbWJlcnNoaXAgbGV2ZWxzIFsiLiRmaWVsZC4iXS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfY2NfbnVtYmVyIl0gPSAkZGF0YS0+Y3JlZGl0X251bWJlcjsKCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfY2NfZXhwX21vbnRoIl0gPSAkZGF0YS0+ZXhwX21vbnRoOwoJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9jY19leHBfeWVhciJdID0gJGRhdGEtPmV4cF95ZWFyOwoJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9jY19jdnYiXSA9ICRkYXRhLT5zZWN1cml0eV9jb2RlOwoJCQoJCWlmKGlzc2V0KCRkYXRhLT5jb3Vwb25fY29kZSkgJiYgJGRhdGEtPmNvdXBvbl9jb2RlICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2NvdXBvbl9jb2RlIl0gPSAkZGF0YS0+Y291cG9uX2NvZGU7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5hZmZpbGlhdGVfaWQpICYmICRkYXRhLT5hZmZpbGlhdGVfaWQgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYWZmaWxpYXRlX2lkIl0gPSAkZGF0YS0+YWZmaWxpYXRlX2lkOwoJCX0KCQlpZihpc3NldCgkZGF0YS0+c3ViX2FmZmlsaWF0ZV9pZCkgJiYgJGRhdGEtPnN1Yl9hZmZpbGlhdGVfaWQgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc3ViX2FmZmlsaWF0ZV9pZCJdID0gJGRhdGEtPnN1Yl9hZmZpbGlhdGVfaWQ7CgkJfQoJCQoJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfdXNlcl9pZCJdID0gJHVzZXItPmdldElkKCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9maXJzdF9uYW1lIl0gPSAkdXNlci0+Z2V0Rmlyc3ROYW1lKCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9sYXN0X25hbWUiXSA9ICR1c2VyLT5nZXRMYXN0TmFtZSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfZW1haWwiXSA9ICR1c2VyLT5nZXRFbWFpbCgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfcGhvbmUiXSA9ICR1c2VyLT5nZXRQaG9uZSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19hZGRyZXNzIl0gPSAkdXNlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY2l0eSJdID0gJHVzZXItPmdldEJpbGxpbmdDaXR5KCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX3N0YXRlIl0gPSAkdXNlci0+Z2V0QmlsbGluZ1N0YXRlKCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX3ppcCJdID0gJHVzZXItPmdldEJpbGxpbmdaaXBDb2RlKCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiXSA9ICR1c2VyLT5nZXRCaWxsaW5nQ291bnRyeSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcyJdID0gJHVzZXItPmdldFNoaXBwaW5nQWRkcmVzcygpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdID0gJHVzZXItPmdldFNoaXBwaW5nQ2l0eSgpOwoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSA9ICR1c2VyLT5nZXRTaGlwcGluZ1N0YXRlKCk7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ196aXAiXSA9ICR1c2VyLT5nZXRTaGlwcGluZ1ppcENvZGUoKTsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXSA9ICR1c2VyLT5nZXRTaGlwcGluZ0NvdW50cnkoKTsKCQl9CgkJZWxzZSAKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF91c2VyX2lkIl0gPSAiIjsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPmZpcnN0X25hbWUpICYmICRkYXRhLT5maXJzdF9uYW1lICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2ZpcnN0X25hbWUiXSA9ICRkYXRhLT5maXJzdF9uYW1lOwoJCX0KCQlpZihpc3NldCgkZGF0YS0+bGFzdF9uYW1lKSAmJiAkZGF0YS0+bGFzdF9uYW1lICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2xhc3RfbmFtZSJdID0gJGRhdGEtPmxhc3RfbmFtZTsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPmVtYWlsKSAmJiAkZGF0YS0+ZW1haWwgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfZW1haWwiXSA9ICRkYXRhLT5lbWFpbDsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPnBob25lKSAmJiAkZGF0YS0+cGhvbmUgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfcGhvbmUiXSA9ICRkYXRhLT5waG9uZTsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPnBhc3N3b3JkKSAmJiAkZGF0YS0+cGFzc3dvcmQgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfcGFzc3dvcmQiXSA9ICRkYXRhLT5wYXNzd29yZDsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPmJpbGxpbmdfYWRkcmVzcykgJiYgJGRhdGEtPmJpbGxpbmdfYWRkcmVzcyAhPSAiIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX2FkZHJlc3MiXSA9ICRkYXRhLT5iaWxsaW5nX2FkZHJlc3M7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5iaWxsaW5nX2NpdHkpICYmICRkYXRhLT5iaWxsaW5nX2NpdHkgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19jaXR5Il0gPSAkZGF0YS0+YmlsbGluZ19jaXR5OwoJCX0KCQlpZihpc3NldCgkZGF0YS0+YmlsbGluZ19zdGF0ZSkgJiYgJGRhdGEtPmJpbGxpbmdfc3RhdGUgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19zdGF0ZSJdID0gJGRhdGEtPmJpbGxpbmdfc3RhdGU7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5iaWxsaW5nX3ppcCkgJiYgJGRhdGEtPmJpbGxpbmdfemlwICE9ICIiKQoJCXsKCQkJJG1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfemlwIl0gPSAkZGF0YS0+YmlsbGluZ196aXA7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5iaWxsaW5nX2NvdW50cnkpICYmICRkYXRhLT5iaWxsaW5nX2NvdW50cnkgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0gPSAkZGF0YS0+YmlsbGluZ19jb3VudHJ5OwoJCX0KCQlpZihpc3NldCgkZGF0YS0+c2hpcHBpbmdfYWRkcmVzcykgJiYgJGRhdGEtPnNoaXBwaW5nX2FkZHJlc3MgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcyJdID0gJGRhdGEtPnNoaXBwaW5nX2FkZHJlc3M7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5zaGlwcGluZ19jaXR5KSAmJiAkZGF0YS0+c2hpcHBpbmdfY2l0eSAhPSAiIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jaXR5Il0gPSAkZGF0YS0+c2hpcHBpbmdfY2l0eTsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPnNoaXBwaW5nX3N0YXRlKSAmJiAkZGF0YS0+c2hpcHBpbmdfc3RhdGUgIT0gIiIpCgkJewoJCQkkbWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSA9ICRkYXRhLT5zaGlwcGluZ19zdGF0ZTsKCQl9CgkJaWYoaXNzZXQoJGRhdGEtPnNoaXBwaW5nX3ppcCkgJiYgJGRhdGEtPnNoaXBwaW5nX3ppcCAhPSAiIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ196aXAiXSA9ICRkYXRhLT5zaGlwcGluZ196aXA7CgkJfQoJCWlmKGlzc2V0KCRkYXRhLT5zaGlwcGluZ19jb3VudHJ5KSAmJiAkZGF0YS0+c2hpcHBpbmdfY291bnRyeSAhPSAiIikKCQl7CgkJCSRtZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5Il0gPSAkZGF0YS0+c2hpcHBpbmdfY291bnRyeTsKCQl9CgkJCgkJLy8gZ2V0IGN1c3RvbSBmaWVsZCBkYXRhCgkJZm9yZWFjaCgkZGF0YSBhcyAka2V5PT4kdmFsdWUpCgkJewoJCQlpZihwcmVnX21hdGNoKCIvKGN1c3RvbV8pLyIsICRrZXkpKQoJCQl7CgkJCQkkbWVtYmVyRGF0YVska2V5XSA9ICR2YWx1ZTsKCQkJfQoJCX0KCQkKCQkkYXBpUmVxdWVzdCA9IG5ldyBNTV9EZWZhdWx0T3JkZXJSZXF1ZXN0KCRtZW1iZXJEYXRhLCB0cnVlKTsKCQlyZXR1cm4gJGFwaVJlcXVlc3QtPnN1Ym1pdFJlcXVlc3QoKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBhZGRNZW1iZXIoJGRhdGEpCgl7CgkJaWYoIWVtcHR5KCRkYXRhLT5tZW1iZXJzaGlwX2xldmVsX2lkKSkKCQl7CgkJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkZGF0YS0+bWVtYmVyc2hpcF9sZXZlbF9pZCk7CgkJCgkJCWlmKCEkbWVtYmVyc2hpcC0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJObyBtZW1iZXJzaGlwIGxldmVsIGZvdW5kIGZvciBJRCAneyRkYXRhLT5tZW1iZXJzaGlwX2xldmVsX2lkfSciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJtZW1iZXJzaGlwX2xldmVsX2lkIHBhcmFtZXRlciBpcyByZXF1aXJlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCk7CgkJJHVzZXItPnNldEVtYWlsKCRkYXRhLT5lbWFpbCk7CgkJCgkJaWYoaXNzZXQoJGRhdGEtPnVzZXJuYW1lKSkKCQl7CgkJCSR1c2VyLT5zZXRVc2VybmFtZSgkZGF0YS0+dXNlcm5hbWUpOwoJCX0KCQkKCQlpZihpc3NldCgkZGF0YS0+Zmlyc3RfbmFtZSkpCgkJewoJCQkkdXNlci0+c2V0Rmlyc3ROYW1lKCRkYXRhLT5maXJzdF9uYW1lKTsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPmxhc3RfbmFtZSkpCgkJewoJCQkkdXNlci0+c2V0TGFzdE5hbWUoJGRhdGEtPmxhc3RfbmFtZSk7CgkJfQoJCQoJCWlmKGlzc2V0KCRkYXRhLT5waG9uZSkpCgkJewoJCQkkdXNlci0+c2V0UGhvbmUoJGRhdGEtPnBob25lKTsKCQl9CgkJCgkJaWYoaXNzZXQoJGRhdGEtPnBhc3N3b3JkKSkKCQl7CgkJCSR1c2VyLT5zZXRQYXNzd29yZCgkZGF0YS0+cGFzc3dvcmQpOwoJCX0KCgkJaWYoaXNzZXQoJGRhdGEtPm5vdGVzKSkKCQl7CgkJCSR1c2VyLT5zZXROb3RlcygkZGF0YS0+bm90ZXMpOwoJCX0KCQkKCQkkcmVzdWx0ID0gJHVzZXItPmNvbW1pdERhdGEoKTsKCQkKCQlpZighJHVzZXItPmlzVmFsaWQoKSB8fCBNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHVzZXIgJ3skcmVzdWx0LT5tZXNzYWdlfSciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkKCQlyZXR1cm4gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduTWVtYmVyc2hpcFRvVXNlcigkdXNlciwgJG1lbWJlcnNoaXApOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGFkZEJ1bmRsZSgkZGF0YSkKCXsKCQlpZighZW1wdHkoJGRhdGEtPm1lbWJlcl9pZCkpCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRkYXRhLT5tZW1iZXJfaWQpOwoJCgkJCWlmKCEkdXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJObyBtZW1iZXIgZm91bmQgZm9yIG1lbWJlciBJRCAneyRkYXRhLT5tZW1iZXJfaWR9JyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIm1lbWJlcl9pZCBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYoIWVtcHR5KCRkYXRhLT5idW5kbGVfaWQpKQoJCXsKCQkJJGJ1bmRsZSA9IG5ldyBNTV9CdW5kbGUoJGRhdGEtPmJ1bmRsZV9pZCk7CgkJCgkJCWlmKCEkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk5vIGJ1bmRsZSBmb3VuZCBmb3IgYnVuZGxlIElEICd7JGRhdGEtPmJ1bmRsZV9pZH0nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiYnVuZGxlX2lkIHBhcmFtZXRlciBpcyByZXF1aXJlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlyZXR1cm4gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQnVuZGxlVG9Vc2VyKCR1c2VyLCAkYnVuZGxlKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZW1vdmVCdW5kbGUoJGRhdGEpCgl7CgkJaWYoIWVtcHR5KCRkYXRhLT5tZW1iZXJfaWQpKQoJCXsKCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkZGF0YS0+bWVtYmVyX2lkKTsKCQoJCQlpZighJHVzZXItPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTm8gbWVtYmVyIGZvdW5kIGZvciBtZW1iZXIgSUQgJ3skZGF0YS0+bWVtYmVyX2lkfSciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJtZW1iZXJfaWQgcGFyYW1ldGVyIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCFlbXB0eSgkZGF0YS0+YnVuZGxlX2lkKSkKCQl7CgkJCSRidW5kbGUgPSBuZXcgTU1fQnVuZGxlKCRkYXRhLT5idW5kbGVfaWQpOwoJCQoJCQlpZighJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJObyBidW5kbGUgZm91bmQgZm9yIGJ1bmRsZSBJRCAneyRkYXRhLT5idW5kbGVfaWR9JyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoImJ1bmRsZV9pZCBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJcmV0dXJuIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJlbW92ZUJ1bmRsZUZyb21Vc2VyKCR1c2VyLCAkYnVuZGxlKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRNZW1iZXJzaGlwTGV2ZWxzKCkKCXsKCQkkbWVtYmVyc2hpcExldmVscyA9IE1NX01lbWJlcnNoaXBMZXZlbDo6Z2V0TWVtYmVyc2hpcExldmVsc0xpc3QodHJ1ZSk7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkbWVtYmVyc2hpcExldmVscyk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QnVuZGxlcygpCgl7CgkJJGJ1bmRsZXMgPSBNTV9CdW5kbGU6OmdldEJ1bmRsZXNMaXN0KHRydWUpOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGJ1bmRsZXMpOwoJfQp9Cg==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(118, 'appliedbundle', 'LyoqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9BcHBsaWVkQnVuZGxlIGV4dGVuZHMgTU1fRW50aXR5CnsJCglwdWJsaWMgc3RhdGljICRBQ0NFU1NfVFlQRV9VU0VSID0gInVzZXIiOwoJcHVibGljIHN0YXRpYyAkQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCA9ICJtZW1iZXJzaGlwIjsKCQoJLy8gdGhpcyBpcyB1c2VkIHRvIGNyZWF0ZSBhbiBhcHBsaWVkIGJ1bmRsZSBvYmplY3Qgd2l0aCBzYW1wbGUgZGF0YSBpbiBpdAoJcHVibGljIHN0YXRpYyAkU0FNUExFX0FQUExJRURfQlVORExFX0lEID0gIi0xMCI7CgkKCXByaXZhdGUgJGFjY2Vzc1R5cGUgPSAiIjsKCXByaXZhdGUgJGFjY2Vzc1R5cGVJZCA9ICIiOwoJcHJpdmF0ZSAkYnVuZGxlSWQgPSAiIjsKCXByaXZhdGUgJHN0YXR1cyA9ICIiOwoJcHJpdmF0ZSAkcGVuZGluZ1N0YXR1cyA9ICIwIjsKCXByaXZhdGUgJGltcG9ydGVkRmxhZyA9ICIwIjsKCXByaXZhdGUgJGRheXNDYWxjTWV0aG9kID0gIiI7Cglwcml2YXRlICRkYXlzQ2FsY1ZhbHVlID0gIiI7Cglwcml2YXRlICRhcHBseURhdGUgPSAiIjsKCXByaXZhdGUgJHN1YnNjcmliZWRMaXN0SWQgPSAiIjsKCXByaXZhdGUgJHN1YnNjcmliZWRQcm92aWRlcklkID0gIiI7Cglwcml2YXRlICRleHBpcmF0aW9uRGF0ZSA9ICIiOwoJcHJpdmF0ZSAkY2FuY2VsbGF0aW9uRGF0ZSA9ICIiOwoJcHJpdmF0ZSAkc3RhdHVzVXBkYXRlZERhdGUgPSAiIjsKCQoJLy8gaW50ZXJhbCB1c2UKCXByaXZhdGUgJGJ1bmRsZSA9IG51bGw7Cglwcml2YXRlICRsYXN0U3RhdHVzID0gIiI7Cglwcml2YXRlICRsYXN0RXhwaXJhdGlvbkRhdGUgPSAiIjsKCXByaXZhdGUgJGxhc3RDYW5jZWxsYXRpb25EYXRlID0gIiI7CgoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUy4iIFdIRVJFIGJ1bmRsZV9pZCA9ICciLiR0aGlzLT5pZC4iJyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoKCQlpZigkcmVzdWx0KQoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRBcHBsaWVkQnVuZGxlV2l0aEFjY2Vzc1R5cGUoJHJlZklkLCAkYnVuZGxlSWQsICRhY2Nlc3NUeXBlKQoJewoJCSRhcHBsaWVkQnVuZGxlID0gbmV3IE1NX0FwcGxpZWRCdW5kbGUoKTsKCQkKCQlpZigkYnVuZGxlSWQgIT0gc2VsZjo6JFNBTVBMRV9BUFBMSUVEX0JVTkRMRV9JRCkKCQl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJCgkJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUy4iIFdIRVJFIGJ1bmRsZV9pZD0nIi4kYnVuZGxlSWQuIicgYW5kIGFjY2Vzc190eXBlPSciLiRhY2Nlc3NUeXBlLiInIGFuZCBhY2Nlc3NfdHlwZV9pZD0nIi4kcmVmSWQuIicgbGltaXQgMSI7CiAJCQkKCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCQlpZigkcmVzdWx0KQoJCQl7CgkJCQkkYXBwbGllZEJ1bmRsZS0+c2V0RGF0YSgkcmVzdWx0KTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRhcHBsaWVkQnVuZGxlLT5pbnZhbGlkYXRlKCk7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJLy8gcG9wdWxhdGUgc2FtcGxlIGRhdGEKCQkJJGFwcGxpZWRCdW5kbGUtPmFjY2Vzc1R5cGUgPSBzZWxmOjokQUNDRVNTX1RZUEVfVVNFUjsKCQkJJGFwcGxpZWRCdW5kbGUtPmJ1bmRsZUlkID0gc2VsZjo6JFNBTVBMRV9BUFBMSUVEX0JVTkRMRV9JRDsKCQkJJGFwcGxpZWRCdW5kbGUtPmFjY2Vzc1R5cGVJZCA9ICRyZWZJZDsKCQkJJGFwcGxpZWRCdW5kbGUtPnN0YXR1cyA9IE1NX1N0YXR1czo6JEFDVElWRTsKCQkJJGFwcGxpZWRCdW5kbGUtPmFwcGx5RGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkkYXBwbGllZEJ1bmRsZS0+ZGF5c0NhbGNWYWx1ZSA9ICIiOwoJCQkkYXBwbGllZEJ1bmRsZS0+ZGF5c0NhbGNNZXRob2QgPSBNTV9EYXlzQ2FsY3VsYXRpb25UeXBlczo6JEpPSU5fREFURTsKCQkJJGFwcGxpZWRCdW5kbGUtPnN0YXR1c1VwZGF0ZWREYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSRhcHBsaWVkQnVuZGxlLT52YWxpZGF0ZSgpOwoJCX0KCQoJCXJldHVybiAkYXBwbGllZEJ1bmRsZTsKCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFwcGxpZWRCdW5kbGUoJHVzZXJJZCwgJGJ1bmRsZUlkKQoJewoJCSRhcHBsaWVkQnVuZGxlID0gbmV3IE1NX0FwcGxpZWRCdW5kbGUoKTsKCQkKCQlpZigkYnVuZGxlSWQgIT0gc2VsZjo6JFNBTVBMRV9BUFBMSUVEX0JVTkRMRV9JRCkKCQl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgV0hFUkUgYnVuZGxlX2lkPSciLiRidW5kbGVJZC4iJyBhbmQgYWNjZXNzX3R5cGU9JyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIuIicgYW5kIGFjY2Vzc190eXBlX2lkPSciLiR1c2VySWQuIicgbGltaXQgMSI7CgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQkJaWYoJHJlc3VsdCkKCQkJewoJCQkJJGFwcGxpZWRCdW5kbGUtPnNldERhdGEoJHJlc3VsdCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkYXBwbGllZEJ1bmRsZS0+aW52YWxpZGF0ZSgpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCS8vIHBvcHVsYXRlIHNhbXBsZSBkYXRhCgkJCSRhcHBsaWVkQnVuZGxlLT5hY2Nlc3NUeXBlID0gc2VsZjo6JEFDQ0VTU19UWVBFX1VTRVI7CgkJCSRhcHBsaWVkQnVuZGxlLT5idW5kbGVJZCA9IHNlbGY6OiRTQU1QTEVfQVBQTElFRF9CVU5ETEVfSUQ7CgkJCSRhcHBsaWVkQnVuZGxlLT5hY2Nlc3NUeXBlSWQgPSAkdXNlcklkOwoJCQkkYXBwbGllZEJ1bmRsZS0+c3RhdHVzID0gTU1fU3RhdHVzOjokQUNUSVZFOwoJCQkkYXBwbGllZEJ1bmRsZS0+YXBwbHlEYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSRhcHBsaWVkQnVuZGxlLT5kYXlzQ2FsY1ZhbHVlID0gIiI7CgkJCSRhcHBsaWVkQnVuZGxlLT5kYXlzQ2FsY01ldGhvZCA9IE1NX0RheXNDYWxjdWxhdGlvblR5cGVzOjokSk9JTl9EQVRFOwoJCQkkYXBwbGllZEJ1bmRsZS0+c3RhdHVzVXBkYXRlZERhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJGFwcGxpZWRCdW5kbGUtPnZhbGlkYXRlKCk7CgkJfQoJCgkJcmV0dXJuICRhcHBsaWVkQnVuZGxlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CQoJCQlpZigkZGF0YSkKCQkJewoJCQkJJHRoaXMtPmFjY2Vzc1R5cGUgPSAkZGF0YS0+YWNjZXNzX3R5cGU7CgkJCQkkdGhpcy0+YnVuZGxlSWQgPSAkZGF0YS0+YnVuZGxlX2lkOwoJCQkJJHRoaXMtPmFjY2Vzc1R5cGVJZCA9ICRkYXRhLT5hY2Nlc3NfdHlwZV9pZDsKCQkJCSR0aGlzLT5zdGF0dXMgPSAkZGF0YS0+c3RhdHVzOwoJCQkJJHRoaXMtPnBlbmRpbmdTdGF0dXMgPSAkZGF0YS0+cGVuZGluZ19zdGF0dXM7CgkJCQkkdGhpcy0+aW1wb3J0ZWRGbGFnID0gJGRhdGEtPmltcG9ydGVkOwoJCQkJJHRoaXMtPmFwcGx5RGF0ZSA9ICRkYXRhLT5hcHBseV9kYXRlOwoJCQkJJHRoaXMtPmRheXNDYWxjVmFsdWUgPSAkZGF0YS0+ZGF5c19jYWxjX3ZhbHVlOwoJCQkJJHRoaXMtPmRheXNDYWxjTWV0aG9kID0gJGRhdGEtPmRheXNfY2FsY19tZXRob2Q7CgkJCQkkdGhpcy0+c3RhdHVzVXBkYXRlZERhdGUgPSAkZGF0YS0+c3RhdHVzX3VwZGF0ZWQ7CgkJCQkkdGhpcy0+ZXhwaXJhdGlvbkRhdGUgPSAkZGF0YS0+ZXhwaXJhdGlvbl9kYXRlOwoJCQkJJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGUgPSAkZGF0YS0+Y2FuY2VsbGF0aW9uX2RhdGU7CgkJCQkkdGhpcy0+c3Vic2NyaWJlZExpc3RJZCA9ICRkYXRhLT5zdWJzY3JpYmVkX2xpc3RfaWQ7CgkJCQkkdGhpcy0+c3Vic2NyaWJlZFByb3ZpZGVySWQgPSAkZGF0YS0+c3Vic2NyaWJlZF9wcm92aWRlcl9pZDsKCQkJCQoJCQkJaWYoaW50dmFsKCR0aGlzLT5idW5kbGVJZCkgPiAwICYmIGludHZhbCgkdGhpcy0+YWNjZXNzVHlwZUlkKSA+IDApCgkJCQl7CgkJCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCQkJfQoJCQl9CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSAKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvLyB2YWxpZGF0ZSByZXF1aXJlZCBkYXRhCgkJaWYoZW1wdHkoJHRoaXMtPmJ1bmRsZUlkKSB8fCBlbXB0eSgkdGhpcy0+YWNjZXNzVHlwZSkgfHwgZW1wdHkoJHRoaXMtPmFjY2Vzc1R5cGVJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gYXBwbHkgYnVuZGxlLiBCdW5kbGUgSUQsIGFjY2VzcyB0eXBlIGFuZCBhY2Nlc3MgdHlwZSBJRCBhcmUgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIHZhbGlkYXRlIGJ1bmRsZQoJCSRidW5kbGUgPSBuZXcgTU1fQnVuZGxlKCR0aGlzLT5idW5kbGVJZCk7CgkJCQoJCWlmKCEkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gYXBwbHkgYnVuZGxlLiBJbnZhbGlkIGJ1bmRsZSBJRCAneyR0aGlzLT5idW5kbGVJZH0nLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvLyBpZiBtYWtpbmcgc3RhdHVzIGFjdGl2ZSwgZW5zdXJlIHRoYXQgYnVuZGxlIGlzIGFjdGl2ZQoJCWlmKCR0aGlzLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokQUNUSVZFICYmICEkYnVuZGxlLT5pc0FjdGl2ZSgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGFwcGx5IGJ1bmRsZS4gQnVuZGxlICd7JGJ1bmRsZS0+Z2V0TmFtZSgpfScgaXMgbm90IGFjdGl2ZS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy8gY2hlY2sgaWYgdGhpcyBjb21taXQgc2hvdWxkIHVwZGF0ZSBhbiBleGlzdGluZyBhcHBsaWVkIGJ1bmRsZQoJCSRpc1VwZGF0ZSA9IGZhbHNlOwoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUy4iIFdIRVJFIChidW5kbGVfaWQ9J3skdGhpcy0+YnVuZGxlSWR9JykgIjsKCQkkc3FsIC49ICIgQU5EIChhY2Nlc3NfdHlwZT0neyR0aGlzLT5hY2Nlc3NUeXBlfScpIEFORCAoYWNjZXNzX3R5cGVfaWQ9J3skdGhpcy0+YWNjZXNzVHlwZUlkfScpIExJTUlUIDE7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCkKCQl7CgkJCSRpc1VwZGF0ZSA9IHRydWU7CgkJfQoJCQoJCWlmKCRpc1VwZGF0ZSkKCQl7CgkJCSRuZXdDYWxjVmFsdWUgPSAkdGhpcy0+ZGF5c0NhbGNWYWx1ZTsKCQkJJG5ld0NhbGNNZXRob2QgPSAkdGhpcy0+Z2V0RGF5c0NhbGNNZXRob2QoKTsKCQkJCgkJCS8vIGNoZWNrIGlmIHRoaXMgYnVuZGxlIGlzIHBlbmRpbmcgY2FuY2VsbGF0aW9uCgkJCWlmKCR0aGlzLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKCQkJewoJCQkJLy8gY2hlY2sgaWYgdGhpcyBidW5kbGUgc2hvdWxkIGJlIGNhbmNlbGVkCgkJCQlpZigkdGhpcy0+YnVuZGxlU2hvdWxkQ2FuY2VsKCkpCgkJCQl7CgkJCQkJJHRoaXMtPnNldFN0YXR1cygkdGhpcy0+Z2V0UGVuZGluZ1N0YXR1cygpKTsKCQkJCgkJCQkJLy8gY2xlYXIgcGVuZGluZyBjYW5jZWxsYXRpb24KCQkJCQkkdGhpcy0+c2V0Q2FuY2VsbGF0aW9uRGF0ZShudWxsKTsKCQkJCQkkdGhpcy0+c2V0UGVuZGluZ1N0YXR1cygiMCIpOwoJCQkJfQoJCQl9CgkJCQoJCQlpZigkdGhpcy0+c3RhdHVzQ2hhbmdlZCgpKQoJCQl7CgkJCQkvLyBjaGFuZ2luZyBzdGF0dXMgZnJvbSBjYW5jZWxlZC9wYXVzZWQgdG8gYWN0aXZlCgkJCQlpZigkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JEFDVElWRSAmJiAoJHRoaXMtPmxhc3RTdGF0dXMgPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQgfHwgJHRoaXMtPmxhc3RTdGF0dXMgPT0gTU1fU3RhdHVzOjokUEFVU0VEIHx8ICR0aGlzLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04pKQoJCQkJewoJCQkJCSRkYXlzID0gJHRoaXMtPmdldERheXNXaXRoQnVuZGxlKCk7CgkJCQkJJG5ld0RhdGUgPSBzdHJ0b3RpbWUoIi0iLiRkYXlzLiIgZGF5cyIpOwoJCQkJCSRuZXdDYWxjVmFsdWUgPSBkYXRlKCJZLW0tZCBoOmk6cyIsICRuZXdEYXRlKTsKCQkJCQkkbmV3Q2FsY01ldGhvZCA9IE1NX0RheXNDYWxjdWxhdGlvblR5cGVzOjokQ1VTVE9NX0RBVEU7CgkJCQl9CgkJCQkKCQkJCS8vIGNoYW5naW5nIHN0YXR1cyB0byBjYW5jZWxlZC9wYXVzZWQKCQkJCWVsc2UgaWYoJHRoaXMtPnN0YXR1cyA9PSBNTV9TdGF0dXM6OiRQQVVTRUQgfHwgJHRoaXMtPnN0YXR1cyA9PSBNTV9TdGF0dXM6OiRDQU5DRUxFRCkgCgkJCQl7CQoJCQkJCSRzdGFydERhdGUgPSAoJHRoaXMtPmdldERheXNDYWxjTWV0aG9kKCkgPT0gTU1fRGF5c0NhbGN1bGF0aW9uVHlwZXM6OiRDVVNUT01fREFURSkgPyAkdGhpcy0+ZGF5c0NhbGNWYWx1ZSA6ICR0aGlzLT5hcHBseURhdGU7CgkJCQkJJG5ld0NhbGNWYWx1ZSA9IGFicyhmbG9vcigodGltZSgpIC0gc3RydG90aW1lKCRzdGFydERhdGUpKS8oMjQqNjAqNjApKSk7CgkJCQkJJG5ld0NhbGNNZXRob2QgPSBNTV9EYXlzQ2FsY3VsYXRpb25UeXBlczo6JEZJWEVEOwoJCQkJfQoJCQl9CgkJCQkKCQkJJHNxbCA9ICJVUERBVEUgIi5NTV9UQUJMRV9BUFBMSUVEX0JVTkRMRVMuIiBTRVQgIjsKCQkJCgkJCWlmKCR0aGlzLT5zdGF0dXNDaGFuZ2VkKCkpCgkJCXsKCQkJCSRzcWwgLj0gInN0YXR1cyA9ICd7JHRoaXMtPnN0YXR1c30nLCBzdGF0dXNfdXBkYXRlZD0nIi5NTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKS4iJywgIjsKCQkJfQoJCQkKCQkJaWYoJHRoaXMtPmRvZXNFeHBpcmUoKSkKCQkJewoJCQkJJHNxbCAuPSAiZXhwaXJhdGlvbl9kYXRlID0gJyIuJHRoaXMtPmdldEV4cGlyYXRpb25EYXRlKCkuIicsICI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc3FsIC49ICJleHBpcmF0aW9uX2RhdGUgPSAnMDAwMC0wMC0wMCAwMDowMDowMCcsICI7CgkJCX0KCQkJCgkJCSRzcWwgLj0gImNhbmNlbGxhdGlvbl9kYXRlID0gJyIuJHRoaXMtPmdldENhbmNlbGxhdGlvbkRhdGUoKS4iJywgIjsKCQkJJHNxbCAuPSAicGVuZGluZ19zdGF0dXMgPSAnIi4kdGhpcy0+Z2V0UGVuZGluZ1N0YXR1cygpLiInLCAiOwoJCQkKCQkJJHNxbCAuPSAiZGF5c19jYWxjX3ZhbHVlID0gJ3skbmV3Q2FsY1ZhbHVlfScsIGRheXNfY2FsY19tZXRob2QgPSAneyRuZXdDYWxjTWV0aG9kfScsIGFwcGx5X2RhdGU9J3skdGhpcy0+YXBwbHlEYXRlfScgIjsKCQkJJHNxbCAuPSAiV0hFUkUgKGJ1bmRsZV9pZCA9ICd7JHRoaXMtPmJ1bmRsZUlkfScpIEFORCAoYWNjZXNzX3R5cGUgPSAneyR0aGlzLT5hY2Nlc3NUeXBlfScpIEFORCAiOwoJCQkkc3FsIC49ICIoYWNjZXNzX3R5cGVfaWQgPSAneyR0aGlzLT5hY2Nlc3NUeXBlSWR9Jyk7IjsKCQkJCgkJCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBhcHBsaWVkIGJ1bmRsZSB7JGJ1bmRsZS0+Z2V0TmFtZSgpfSAoeyRidW5kbGUtPmdldElkKCl9KSB3aXRoIGFjY2VzcyB0eXBlICd7JHRoaXMtPmFjY2Vzc1R5cGV9JyAoeyR0aGlzLT5hY2Nlc3NUeXBlSWR9KSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQkKCQkJaWYoJHRoaXMtPmFjY2Vzc1R5cGUgPT0gTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIgJiYgJHRoaXMtPnN0YXR1c0NoYW5nZWQoKSkKCQkJewoJCQkJZG9fYWN0aW9uKE1NX0V2ZW50OjokQlVORExFX1NUQVRVU19DSEFOR0UsIE1NX0V2ZW50OjpwYWNrYWdlQnVuZGxlRGF0YSgkdGhpcy0+YWNjZXNzVHlwZUlkLCAkdGhpcy0+YnVuZGxlSWQpKTsKCQkJCQoJCQkJLy8gY2xlYXIgY29tcGFyaXNvbiB2YWx1ZQoJCQkJJHRoaXMtPmxhc3RTdGF0dXMgPSAiIjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkc3FsID0gIklOU0VSVCBJTlRPICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgU0VUICI7CgkJCSRzcWwgLj0gIiBhY2Nlc3NfdHlwZT0neyR0aGlzLT5hY2Nlc3NUeXBlfScsIHN0YXR1cz0neyR0aGlzLT5zdGF0dXN9JywgaW1wb3J0ZWQ9J3skdGhpcy0+aW1wb3J0ZWRGbGFnfScsIjsKCQkJJHNxbCAuPSAiIGJ1bmRsZV9pZD0neyR0aGlzLT5idW5kbGVJZH0nLCBhY2Nlc3NfdHlwZV9pZD0neyR0aGlzLT5hY2Nlc3NUeXBlSWR9JywgIjsKCQkJJHNxbCAuPSAiIGRheXNfY2FsY19tZXRob2QgPSAneyR0aGlzLT5nZXREYXlzQ2FsY01ldGhvZCgpfScsIGRheXNfY2FsY192YWx1ZSA9ICd7JHRoaXMtPmRheXNDYWxjVmFsdWV9JywgIjsKCQkJCgkJCWlmKCR0aGlzLT5kb2VzRXhwaXJlKCkpCgkJCXsKCQkJCSRzcWwgLj0gIiBleHBpcmF0aW9uX2RhdGUgPSAnIi4kdGhpcy0+Z2V0RXhwaXJhdGlvbkRhdGUoKS4iJywgIjsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRzcWwgLj0gIiBleHBpcmF0aW9uX2RhdGUgPSAnMDAwMC0wMC0wMCAwMDowMDowMCcsICI7CgkJCX0KCQkJCgkJCSRzcWwgLj0gIiBhcHBseV9kYXRlPSciLk1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpLiInLCBzdGF0dXNfdXBkYXRlZD0nIi5NTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKS4iJzsiOwoJCQkKCQkJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCgkJCWlmKCEkcmVzdWx0KQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gYXBwbHkgYnVuZGxlIHskYnVuZGxlLT5nZXROYW1lKCl9ICh7JGJ1bmRsZS0+Z2V0SWQoKX0pIHdpdGggYWNjZXNzIHR5cGUgJ3skdGhpcy0+YWNjZXNzVHlwZX0nICh7JHRoaXMtPmFjY2Vzc1R5cGVJZH0pIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCWRvX2FjdGlvbihNTV9FdmVudDo6JEJVTkRMRV9BREQsIE1NX0V2ZW50OjpwYWNrYWdlQnVuZGxlRGF0YSgkdGhpcy0+YWNjZXNzVHlwZUlkLCAkdGhpcy0+YnVuZGxlSWQpKTsKCQl9CgkJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRvZXNFeHBpcmUoKQoJewoJCSRidW5kbGUgPSAkdGhpcy0+Z2V0QnVuZGxlKCk7CgkJcmV0dXJuICRidW5kbGUtPmRvZXNFeHBpcmUoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGhhc0V4cGlyZWQoKQoJewoJCWlmKCR0aGlzLT5kb2VzRXhwaXJlKCkpCgkJewoJCQkkZXhwaXJhdGlvbkRhdGUgPSBkYXRlKCJZLW0tZCIsIHN0cnRvdGltZSgkdGhpcy0+Z2V0RXhwaXJhdGlvbkRhdGUoKSkpOwoJCQkkdG9kYXkgPSBEYXRlKCJZLW0tZCBoOmk6cyIpOwoJCQkJCgkJCWlmKCR0b2RheSA+ICRleHBpcmF0aW9uRGF0ZSkKCQkJewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNQZW5kaW5nQ2FuY2VsbGF0aW9uKCkKCXsKCQlyZXR1cm4gKCR0aGlzLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04pOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gYnVuZGxlU2hvdWxkQ2FuY2VsKCkKCXsKCQlpZigkdGhpcy0+aXNQZW5kaW5nQ2FuY2VsbGF0aW9uKCkpCgkJewoJCQkkY2FuY2VsbGF0aW9uRGF0ZSA9IGRhdGUoIlktbS1kIEg6aTpzIiwgc3RydG90aW1lKCR0aGlzLT5nZXRDYW5jZWxsYXRpb25EYXRlKCkpKTsKCQkJJHRvZGF5ID0gRGF0ZSgiWS1tLWQgaDppOnMiKTsKCQkJCgkJCWlmKCR0b2RheSA+ICRjYW5jZWxsYXRpb25EYXRlKQoJCQl7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKiogVVRJTElUSUVTICoqLwoKCS8qKgoJICogVGhpcyBtZXRob2QgYXBwbGllcyBhIGJ1bmRsZSB0byB0aGUgdXNlci4KCSAqIAoJICogQHBhcmFtIE51bWJlciAkdXNlcklkIHRoZSBJRCBvZiB0aGUgdXNlciB0byBhcHBseSB0aGUgYnVuZGxlIHRvCgkgKiBAcGFyYW0gTnVtYmVyICRidW5kbGVJZCB0aGUgSUQgb2YgdGhlIGJ1bmRsZSB0byBhcHBseSB0byB0aGUgdXNlcgoJICogQHBhcmFtIEJvb2xlYW4gJGlzSW1wb3J0ZWQgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGlzIGJ1bmRsZSBpcyBiZWluZyBhZGRlZCBmcm9tIGFuIGltcG9ydAoJICogQHJldHVybiBNTV9SZXNwb25zZSBhIHJlc3BvbnNlIG9iamVjdCB3aXRoIHRoZSB0eXBlIGFuZCBtZXNzYWdlIHNldCBiYXNlZCBvbiB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb24KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBhcHBseUJ1bmRsZVRvVXNlcigkdXNlcklkLCAkYnVuZGxlSWQsICRpc0ltcG9ydGVkPWZhbHNlKQoJewoJCSRhcHBsaWVkQnVuZGxlID0gTU1fQXBwbGllZEJ1bmRsZTo6Z2V0QXBwbGllZEJ1bmRsZSgkdXNlcklkLCAkYnVuZGxlSWQpOwoJCQoJCWlmKCEkYXBwbGllZEJ1bmRsZS0+aXNWYWxpZCgpKQoJCXsKCQkJJGFwcGxpZWRCdW5kbGUgPSBuZXcgTU1fQXBwbGllZEJ1bmRsZSgpOwoJCQkkYXBwbGllZEJ1bmRsZS0+c2V0QWNjZXNzVHlwZShNTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfVVNFUik7CgkJCSRhcHBsaWVkQnVuZGxlLT5zZXRBY2Nlc3NUeXBlSWQoJHVzZXJJZCk7CgkJCSRhcHBsaWVkQnVuZGxlLT5zZXRCdW5kbGVJZCgkYnVuZGxlSWQpOwoJCQkkYXBwbGllZEJ1bmRsZS0+c2V0SW1wb3J0ZWRGbGFnKCRpc0ltcG9ydGVkKTsKCQl9CgkJCgkJJGFwcGxpZWRCdW5kbGUtPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRBQ1RJVkUpOwoJCXJldHVybiAkYXBwbGllZEJ1bmRsZS0+Y29tbWl0RGF0YSgpOwoJfQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIHJlbW92ZXMgYSBidW5kbGUgZnJvbSBhIHVzZXIuCgkgKgoJICogQHBhcmFtIE51bWJlciAkdXNlcklkIHRoZSBJRCBvZiB0aGUgdXNlciB0byByZW1vdmUgdGhlIGJ1bmRsZSBmcm9tCgkgKiBAcGFyYW0gTnVtYmVyICRidW5kbGVJZCB0aGUgSUQgb2YgdGhlIGJ1bmRsZSB0byByZW1vdmUgZnJvbSB0aGUgdXNlcgoJICogQHBhcmFtIE51bWJlciAkZm9yY2VTdGF0dXMgYSB2YWxpZCBNTV9TdGF0dXMgSUQgdGhhdCBpbmRpY2F0ZXMgd2hpY2ggc3RhdHVzIHRvIHNldCBvbiB0aGUgYXBwbGllZCBidW5kbGUgYWZ0ZXIgaXQncyBiZWVuIHJlbW92ZWQuIElmIGxlZnQgYmxhbmssIHRoZSBldmVudCBoYW5kbGluZyBzZXR0aW5ncyB3aWxsIGJlIHVzZWQgZnJvbSB0aGUgTU0gY29uZmlndXJhdGlvbi4KCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgYSByZXNwb25zZSBvYmplY3Qgd2l0aCB0aGUgdHlwZSBhbmQgbWVzc2FnZSBzZXQgYmFzZWQgb24gdGhlIHJlc3VsdCBvZiB0aGUgb3BlcmF0aW9uCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcmVtb3ZlQnVuZGxlRnJvbVVzZXIoJHVzZXJJZCwgJGJ1bmRsZUlkLCAkZm9yY2VTdGF0dXM9IiIpCgl7CgkJJGFwcGxpZWRCdW5kbGUgPSBNTV9BcHBsaWVkQnVuZGxlOjpnZXRBcHBsaWVkQnVuZGxlKCR1c2VySWQsICRidW5kbGVJZCk7CgkJJG5ld1N0YXR1cyA9ICIiOwoJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHVzZXJJZCk7CgkJCgkJaWYoISR1c2VyLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcmVtb3ZlIGJ1bmRsZSBiZWNhdXNlIG1lbWJlciAnIi4kdXNlcklkLiInIGlzIGludmFsaWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCRhcHBsaWVkQnVuZGxlLT5pc1ZhbGlkKCkpCgkJewoJCQlpZihlbXB0eSgkZm9yY2VTdGF0dXMpIHx8ICgoJGZvcmNlU3RhdHVzICE9IE1NX1N0YXR1czo6JENBTkNFTEVEKSAmJiAoJGZvcmNlU3RhdHVzICE9IE1NX1N0YXR1czo6JFBBVVNFRCkgJiYgKCRmb3JjZVN0YXR1cyAhPSBNTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTikpKQoJCQl7CgkJCQkkY2FuY2VsbGF0aW9uTWV0aG9kID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfREZMVF9DQU5DRUxMQVRJT05fTUVUSE9EKTsKCQkJCQoJCQkJaWYoJGNhbmNlbGxhdGlvbk1ldGhvZCA9PSBNTV9DYW5jZWxsYXRpb25NZXRob2Q6OiRDQU5DRUxfUEFVU0UpCgkJCQl7CgkJCQkJJG5ld1N0YXR1cyA9IE1NX1N0YXR1czo6JFBBVVNFRDsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkbmV3U3RhdHVzID0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQ7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJG5ld1N0YXR1cyA9ICRmb3JjZVN0YXR1czsKCQkJfQoJCQkKCQkJLy8gb25seSB1cGRhdGUgc3RhdHVzIGlmIGl0J3MgZGlmZmVyZW50CgkJCWlmKCRhcHBsaWVkQnVuZGxlLT5nZXRTdGF0dXMoKSAhPSAkbmV3U3RhdHVzKQoJCQl7CgkJCQkkYXBwbGllZEJ1bmRsZS0+c2V0U3RhdHVzKCRuZXdTdGF0dXMpOwoJCQkJJHJlc3VsdCA9ICRhcHBsaWVkQnVuZGxlLT5jb21taXREYXRhKCk7CgkJCQkKCQkJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byByZW1vdmUgYnVuZGxlIHdpdGggSUQgJyIuJGJ1bmRsZUlkLiInIGZyb20gbWVtYmVyICciLiR1c2VySWQuIicuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHJlbW92ZSBidW5kbGUgYmVjYXVzZSBidW5kbGUgd2l0aCBJRCAnIi4kYnVuZGxlSWQuIicgaXMgbm90IGFwcGxpZWQgdG8gbWVtYmVyICciLiR1c2VySWQuIicuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKiBHRVRURVJTIC8gU0VUVEVSUyAqKi8KCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF5c0NhbGNNZXRob2QoKQoJewoJCWlmKCFlbXB0eSgkdGhpcy0+ZGF5c0NhbGNNZXRob2QpKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5kYXlzQ2FsY01ldGhvZDsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIE1NX0RheXNDYWxjdWxhdGlvblR5cGVzOjokSk9JTl9EQVRFOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0RGF5c0NhbGNNZXRob2QoJHZhbCkKCXsKCQkkdGhpcy0+ZGF5c0NhbGNNZXRob2QgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXlzQ2FsY1ZhbHVlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmRheXNDYWxjVmFsdWU7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldERheXNDYWxjVmFsdWUoJHZhbCkKCXsKCQkkdGhpcy0+ZGF5c0NhbGNWYWx1ZSA9ICR2YWw7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1cygpCgl7CgkJaWYoJHRoaXMtPmlzVmFsaWQoKSkKIAkJewogCQkJaWYoJHRoaXMtPmRvZXNFeHBpcmUoKSkKIAkJCXsKCQkgCQlpZigkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JEFDVElWRSkKCQkgCQl7CgkJIAkJCS8vIGNoZWNrIGlmIGJ1bmRsZSBoYXMgZXhwaXJlZAkKCQkgCQkJaWYoJHRoaXMtPmhhc0V4cGlyZWQoKSkKCQkgCQkJewoJCSAJCQkJJHRoaXMtPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRFWFBJUkVEKTsKCQkgCQkJCSR0aGlzLT5jb21taXREYXRhKCk7CgkJIAkJCX0KCQkgCQl9CgkJIAkJZWxzZSBpZigkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JEVYUElSRUQpCgkJIAkJewoJCSAJCQkvLyBjaGVjayBpZiBidW5kbGUgc2hvdWxkIGJlIG1hZGUgYWN0aXZlCgkJIAkJCWlmKCEkdGhpcy0+aGFzRXhwaXJlZCgpKQoJCSAJCQl7CgkJIAkJCQkkdGhpcy0+c2V0U3RhdHVzKE1NX1N0YXR1czo6JEFDVElWRSk7CgkJIAkJCQkkdGhpcy0+Y29tbWl0RGF0YSgpOwoJCSAJCQl9CgkJIAkJfQogCQkJfQoKIAkJCWlmKCR0aGlzLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKIAkJCXsKIAkJCQkvLyBjaGVjayBpZiBidW5kbGUgc2hvdWxkIGJlIGNhbmNlbGVkCiAJCQkJaWYoJHRoaXMtPmJ1bmRsZVNob3VsZENhbmNlbCgpKQogCQkJCXsKIAkJCQkJJHRoaXMtPnNldFN0YXR1cygkdGhpcy0+Z2V0UGVuZGluZ1N0YXR1cygpKTsKIAkJCQkJJHRoaXMtPmNvbW1pdERhdGEoKTsKIAkJCQl9CiAJCQl9CiAJCX0KIAkJCiAJIAlyZXR1cm4gJHRoaXMtPnN0YXR1czsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzKCR2YWwpCgl7CgkJaWYgKCR2YWwgIT0gJHRoaXMtPnN0YXR1cykKCQl7CgkJCSR0aGlzLT5sYXN0U3RhdHVzID0gJHRoaXMtPnN0YXR1czsKCQl9CgkJCgkJJHRoaXMtPnN0YXR1cyA9ICR2YWw7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc3RhdHVzQ2hhbmdlZCgpCgl7CgkJcmV0dXJuICFlbXB0eSgkdGhpcy0+bGFzdFN0YXR1cykgJiYgKCR0aGlzLT5sYXN0U3RhdHVzICE9ICR0aGlzLT5zdGF0dXMpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRBcHBseURhdGUoJGRvRm9ybWF0PWZhbHNlKQoJewoJCWlmKCRkb0Zvcm1hdCA9PSBmYWxzZSkKCQl7CgkJCXJldHVybiAkdGhpcy0+YXBwbHlEYXRlOwoJCX0KCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+YXBwbHlEYXRlKSkKCQl7CgkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHRoaXMtPmFwcGx5RGF0ZSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBudWxsOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0QXBwbHlEYXRlKCR2YWwpCgl7CgkJJHRoaXMtPmFwcGx5RGF0ZSA9ICR2YWw7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRTdGF0dXNVcGRhdGVkRGF0ZSgkZG9Gb3JtYXQ9ZmFsc2UpCgl7CgkJaWYoJGRvRm9ybWF0ID09IGZhbHNlKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5zdGF0dXNVcGRhdGVkRGF0ZTsKCQl9CgkJZWxzZSBpZighZW1wdHkoJHRoaXMtPnN0YXR1c1VwZGF0ZWREYXRlKSkKCQl7CgkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHRoaXMtPnN0YXR1c1VwZGF0ZWREYXRlKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U3RhdHVzVXBkYXRlZERhdGUoJHZhbCkKCXsKCQkkdGhpcy0+c3RhdHVzVXBkYXRlZERhdGUgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY2Nlc3NUeXBlKCR2YWwpCgl7CgkJaWYoJHZhbCA9PSBzZWxmOjokQUNDRVNTX1RZUEVfVVNFUiB8fCAkdmFsID09IHNlbGY6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQKQoJCXsKCQkJJHRoaXMtPmFjY2Vzc1R5cGUgPSAkdmFsOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzVHlwZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hY2Nlc3NUeXBlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY2Nlc3NUeXBlSWQoJHZhbCkKCXsKCQkkdGhpcy0+YWNjZXNzVHlwZUlkID0gJHZhbDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzVHlwZUlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFjY2Vzc1R5cGVJZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0QnVuZGxlSWQoJHZhbCkKCXsKCQkkdGhpcy0+YnVuZGxlSWQgPSAkdmFsOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRCdW5kbGVJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5idW5kbGVJZDsKCX0KCQoJLyoqCgkgKiBAcmV0dXJuIE1NX0J1bmRsZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0QnVuZGxlKCkKCXsKCQlpZighaXNzZXQoJHRoaXMtPmJ1bmRsZSkgfHwgISR0aGlzLT5idW5kbGUtPmlzVmFsaWQoKSkKCQl7CgkJCSR0aGlzLT5idW5kbGUgPSBuZXcgTU1fQnVuZGxlKCR0aGlzLT5idW5kbGVJZCk7CgkJfQoJCQkKCQlyZXR1cm4gJHRoaXMtPmJ1bmRsZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEltcG9ydGVkRmxhZygkYm9vbCkKCXsKCQkkdGhpcy0+aW1wb3J0ZWRGbGFnID0gKCRib29sID09IHRydWUpID8gIjEiIDogIjAiOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNJbXBvcnRlZCgpCgl7CgkJcmV0dXJuICgkdGhpcy0+aW1wb3J0ZWRGbGFnID09ICIxIikgPyB0cnVlIDogZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpc0NvbXBsaW1lbnRhcnkoKQoJewoJCWlmKCR0aGlzLT5nZXRCdW5kbGUoKS0+aXNGcmVlKCkgfHwgJHRoaXMtPmlzSW1wb3J0ZWQoKSB8fCAkdGhpcy0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OIHx8ICR0aGlzLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRFUlJPUiAKCQkJfHwgJHRoaXMtPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JENBTkNFTEVEIHx8ICR0aGlzLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRQQVVTRUQgfHwgJHRoaXMtPmlzUGVuZGluZ0NhbmNlbGxhdGlvbigpKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkkaXNDb21wbGltZW50YXJ5ID0gZmFsc2U7CgkJJGl0ZW1zID0gTU1fT3JkZXJJdGVtQWNjZXNzOjpnZXRPcmRlckl0ZW1CeUFjY2VzcygkdGhpcy0+Z2V0QWNjZXNzVHlwZUlkKCksIE1NX09yZGVySXRlbUFjY2Vzczo6JEFDQ0VTU19UWVBFX0JVTkRMRSwgJHRoaXMtPmdldEJ1bmRsZUlkKCkpOwoJCQoJCWlmKGNvdW50KCRpdGVtcykgPiAwKQoJCXsKCQkJJGlzQ29tcGxpbWVudGFyeSA9IHRydWU7CgkJCQoJCQlmb3JlYWNoKCRpdGVtcyBhcyAkb3JkZXJJdGVtQWNjZXNzKQoJCQl7CgkJCQkkb3JkZXJJdGVtID0gTU1fT3JkZXJJdGVtOjpjcmVhdGUoJG9yZGVySXRlbUFjY2Vzcy0+Z2V0T3JkZXJJdGVtSWQoKSk7CgkJCQkKCQkJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSAmJiAkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSAhPSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkKCQkJCXsKCQkJCQkkaXNDb21wbGltZW50YXJ5ID0gZmFsc2U7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJGlzQ29tcGxpbWVudGFyeSA9IHRydWU7CgkJfQoJCQoJCXJldHVybiAkaXNDb21wbGltZW50YXJ5OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF5c1dpdGhCdW5kbGVBc01lbWJlcigkdXNlcklkKQoJewoJCSRkYXlzID0gMDsKCQlpZigkdGhpcy0+YWNjZXNzVHlwZT09TU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVApCgkJeyAKCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdXNlcklkKTsKCQkJJGRheXMgPSAkdXNlci0+Z2V0RGF5c0FzTWVtYmVyKCk7CgkJfSAKCQlyZXR1cm4gJGRheXM7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXlzV2l0aEJ1bmRsZSgpCgl7CgkJJGRyaXBDb250ZW50VGltZVNldHRpbmcgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9EUklQX0NPTlRFTlRfVElNRV9TRVRUSU5HKTsKCQkkc3RhcnQgPSBudWxsOwoJCSRlbmQgPSBudWxsOwoJCSRkYXlzID0gMDsKCQkKCQlpZigkZHJpcENvbnRlbnRUaW1lU2V0dGluZyA9PSBNTV9Qcm90ZWN0ZWRDb250ZW50RW5naW5lOjokVElNRV9TRVRUSU5HX0xPQ0FMKQoJCXsKCQkJJGVuZCA9IE1NX1V0aWxzOjpkYXRlVG9Mb2NhbChNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwgIlktbS1kIiwgIjAwOjAwOjAwIik7CgkJfQoJCWVsc2UKCQl7CgkJCSRlbmQgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoIlktbS1kIik7CgkJfQoJCQoJCWlmKCR0aGlzLT5nZXREYXlzQ2FsY01ldGhvZCgpID09IE1NX0RheXNDYWxjdWxhdGlvblR5cGVzOjokRklYRUQpCgkJewoJCQkkZGF5cyA9IGludHZhbCgkdGhpcy0+Z2V0RGF5c0NhbGNWYWx1ZSgpKTsKCQl9CgkJZWxzZSBpZigkdGhpcy0+Z2V0RGF5c0NhbGNNZXRob2QoKSA9PSBNTV9EYXlzQ2FsY3VsYXRpb25UeXBlczo6JENVU1RPTV9EQVRFKQoJCXsKCQkJaWYoJGRyaXBDb250ZW50VGltZVNldHRpbmcgPT0gTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZTo6JFRJTUVfU0VUVElOR19MT0NBTCkKCQkJewoJCQkJJHN0YXJ0ID0gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5nZXREYXlzQ2FsY1ZhbHVlKCksICJZLW0tZCIsICIwMDowMDowMCIpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHN0YXJ0ID0gRGF0ZSgiWS1tLWQiLCBzdHJ0b3RpbWUoJHRoaXMtPmdldERheXNDYWxjVmFsdWUoKSkpOwoJCQl9CgkJCSRzdGFydF90cyA9IHN0cnRvdGltZSgkc3RhcnQpOwoJCQkkZW5kX3RzID0gc3RydG90aW1lKCRlbmQpOwoJCQkkZGlmZiA9ICRlbmRfdHMgLSAkc3RhcnRfdHM7CgkJCQkKCQkJLy8gcm91bmQgcmV0dXJucyBhIC0gMAoJCQkkZGF5cyA9IHJvdW5kKCRkaWZmIC8gODY0MDApOwoJCQkJCgkJCWlmKCRkYXlzPDApCgkJCXsKCQkJCSRkYXlzKj0tMTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlpZigkZHJpcENvbnRlbnRUaW1lU2V0dGluZyA9PSBNTV9Qcm90ZWN0ZWRDb250ZW50RW5naW5lOjokVElNRV9TRVRUSU5HX0xPQ0FMKQoJCQl7CgkJCQkkc3RhcnQgPSBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHRoaXMtPmdldEFwcGx5RGF0ZSgpLCAiWS1tLWQiLCAiMDA6MDA6MDAiKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRzdGFydCA9IERhdGUoIlktbS1kIiwgc3RydG90aW1lKCR0aGlzLT5nZXRBcHBseURhdGUoKSkpOwoJCQl9CgkJCQoJCQkkc3RhcnRfdHMgPSBzdHJ0b3RpbWUoJHN0YXJ0KTsKCQkJJGVuZF90cyA9IHN0cnRvdGltZSgkZW5kKTsKCQkJJGRpZmYgPSAkZW5kX3RzIC0gJHN0YXJ0X3RzOwoJCQkJCgkJCS8vIHJvdW5kIHJldHVybnMgYSAtIDAKCQkJJGRheXMgPSByb3VuZCgkZGlmZiAvIDg2NDAwKTsKCQkJCQoJCQlpZigkZGF5czwwKQoJCQl7CgkJCQkkZGF5cyo9LTE7CgkJCX0KCQl9CgkJCgkJcmV0dXJuICRkYXlzOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RXhwaXJhdGlvbkRhdGUoJGRhdGUpCgl7CgkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgICYmICgkZGF0ZSAhPSAkdGhpcy0+ZXhwaXJhdGlvbkRhdGUpKQoJCXsKCQkJJHRoaXMtPmxhc3RFeHBpcmF0aW9uRGF0ZSA9ICR0aGlzLT5leHBpcmF0aW9uRGF0ZTsKCQl9CgkJJHRoaXMtPmV4cGlyYXRpb25EYXRlID0gJGRhdGU7Cgl9CgkJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RXhwaXJhdGlvbkRhdGUoJGRvRm9ybWF0PWZhbHNlKQoJewoJCSRidW5kbGUgPSAkdGhpcy0+Z2V0QnVuZGxlKCk7CgkJaWYoJGJ1bmRsZS0+ZG9lc0V4cGlyZSgpKQoJCXsKCQkJaWYoZW1wdHkoJHRoaXMtPmV4cGlyYXRpb25EYXRlKSB8fCAkdGhpcy0+ZXhwaXJhdGlvbkRhdGUgPT0gIjAwMDAtMDAtMDAgMDA6MDA6MDAiKQoJCQl7CgkJCQkkdGhpcy0+c2V0RXhwaXJhdGlvbkRhdGUoJGJ1bmRsZS0+Z2V0RXhwaXJhdGlvbkRhdGUoTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCkpKTsKCQkJfQoJCgkJCWlmKCRkb0Zvcm1hdCA9PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuICR0aGlzLT5leHBpcmF0aW9uRGF0ZTsKCQkJfQoJCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+ZXhwaXJhdGlvbkRhdGUpKQoJCQl7CgkJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5leHBpcmF0aW9uRGF0ZSk7CgkJCX0KCQl9CgkJCQoJCXJldHVybiBudWxsOwoJfQkKCglwdWJsaWMgZnVuY3Rpb24gc2V0Q2FuY2VsbGF0aW9uRGF0ZSgkZGF0ZSkKCXsKCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAgJiYgKCRkYXRlICE9ICR0aGlzLT5jYW5jZWxsYXRpb25EYXRlKSkKCQl7CgkJCSR0aGlzLT5sYXN0Q2FuY2VsbGF0aW9uRGF0ZSA9ICR0aGlzLT5jYW5jZWxsYXRpb25EYXRlOwoJCX0KCQkkdGhpcy0+Y2FuY2VsbGF0aW9uRGF0ZSA9ICRkYXRlOwoJfQoJCQoJcHVibGljIGZ1bmN0aW9uIGdldENhbmNlbGxhdGlvbkRhdGUoJGRvRm9ybWF0PWZhbHNlKQoJewoJCWlmKCRkb0Zvcm1hdCA9PSBmYWxzZSkKCQl7CgkJCXJldHVybiAkdGhpcy0+Y2FuY2VsbGF0aW9uRGF0ZTsKCQl9CgkJZWxzZSBpZighZW1wdHkoJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGUpKQoJCXsKCQkJcmV0dXJuIE1NX1V0aWxzOjpkYXRlVG9Mb2NhbCgkdGhpcy0+Y2FuY2VsbGF0aW9uRGF0ZSk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UGVuZGluZ1N0YXR1cygkc3RhdHVzKQoJewoJCWlmKCRzdGF0dXMgPT0gTU1fU3RhdHVzOjokUEFVU0VEIHx8ICRzdGF0dXMgPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpCgkJewoJCQkkdGhpcy0+cGVuZGluZ1N0YXR1cyA9ICRzdGF0dXM7CgkJfQoJCWVsc2UKCQl7CgkJCSR0aGlzLT5wZW5kaW5nU3RhdHVzID0gIjAiOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFBlbmRpbmdTdGF0dXMoKQoJewoJCXJldHVybiAkdGhpcy0+cGVuZGluZ1N0YXR1czsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFN1YnNjcmliZWRMaXN0SWQoKQoJewoJCXJldHVybiAkdGhpcy0+c3Vic2NyaWJlZExpc3RJZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFN1YnNjcmliZWRQcm92aWRlcklkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnN1YnNjcmliZWRQcm92aWRlcklkOwoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(119, 'corepagetype', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0NvcmVQYWdlVHlwZSBleHRlbmRzIE1NX0VudGl0eQp7CQoJcHVibGljIHN0YXRpYyAkTk9fUEFHRSA9IDA7CglwdWJsaWMgc3RhdGljICRNRU1CRVJfSE9NRV9QQUdFID0gMTsKCXB1YmxpYyBzdGF0aWMgJFNBVkVUSEVTQUxFID0gMjsKCXB1YmxpYyBzdGF0aWMgJEVSUk9SID0gMzsKCXB1YmxpYyBzdGF0aWMgJExPR0lOX1BBR0UgPSA0OwoJcHVibGljIHN0YXRpYyAkRk9SR09UX1BBU1NXT1JEID0gNTsKCXB1YmxpYyBzdGF0aWMgJENIRUNLT1VUID0gNjsKCXB1YmxpYyBzdGF0aWMgJFBBSURfQ09ORklSTUFUSU9OID0gNzsKCXB1YmxpYyBzdGF0aWMgJEZSRUVfQ09ORklSTUFUSU9OID0gOTsKCXB1YmxpYyBzdGF0aWMgJE1ZX0FDQ09VTlQgPSAxMDsKCXB1YmxpYyBzdGF0aWMgJExPR09VVF9QQUdFID0gMTE7CglwdWJsaWMgc3RhdGljICRSRURFRU1fR0lGVCA9IDEyOwoJcHVibGljIHN0YXRpYyAkUkVTRVRfUEFTU1dPUkQgPSAxMzsKCQoJcHJpdmF0ZSAkbmFtZTsKCXByaXZhdGUgJHZpc2libGU7CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkgCgl7CQoJCS8vZG8gbm90aGluZwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvcmVQYWdlVHlwZXNMaXN0KCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkJCiAJCSRsaXN0ID0gYXJyYXkoKTsKIAkJCiAJCSRzcWwgPSAic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX0NPUkVfUEFHRV9UWVBFUy4iIHdoZXJlIHZpc2libGU9JzEnIjsKIAkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CiAJCQogCQlpZigkcm93cykKIAkJewoJIAkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQl7CQoJCQkJJGxpc3RbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQkJfQogCQl9CQogCQlyZXR1cm4gJGxpc3Q7CiAJfQogCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q29yZVBhZ2VOYW1lKCR0eXBlSWQpCiAJewogCQlnbG9iYWwgJHdwZGI7CiAJCSRzcWwgPSAic2VsZWN0IG5hbWUgZnJvbSAiLk1NX1RBQkxFX0NPUkVfUEFHRV9UWVBFUy4iIHdoZXJlIGlkID0geyR0eXBlSWR9IjsKIAkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwogCQkJCiAJCWlmKCRyb3cpCiAJCXsKIAkJCXJldHVybiAkcm93LT5uYW1lOwogCQl9CiAJCQogCQlyZXR1cm4gIiI7CiAJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5CgkJewoJCQkkdGhpcy0+bmFtZSA9ICRkYXRhLT5uYW1lOwoJCQkkdGhpcy0+dmlzaWJsZSA9ICRkYXRhLT52aXNpYmxlOwoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewkKCQkvLyBkbyBub3RoaW5nCgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXROYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm5hbWU7Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VmlzaWJsZSgpCgl7CgkJcmV0dXJuICR0aGlzLT52aXNpYmxlOwoJfQoJCn0K', 0, '2018-11-21 06:38:54'),
(120, 'decisiontagprocessor', 'Y2xhc3MgTU1fRGVjaXNpb25UYWdQcm9jZXNzb3IKewoJcHVibGljIHN0YXRpYyAkVEFHX01FTUJFUl9ERUNJU0lPTiA9ICJtbV9tZW1iZXJfZGVjaXNpb24iOwoJcHVibGljIHN0YXRpYyAkVEFHX09SREVSX0RFQ0lTSU9OID0gIm1tX29yZGVyX2RlY2lzaW9uIjsKCXB1YmxpYyBzdGF0aWMgJFRBR19PUkRFUl9TVUJERUNJU0lPTiA9ICJtbV9vcmRlcl9zdWJkZWNpc2lvbiI7CglwdWJsaWMgc3RhdGljICRUQUdfQUZGSUxJQVRFX0RFQ0lTSU9OID0gIm1tX2FmZmlsaWF0ZV9kZWNpc2lvbiI7CglwdWJsaWMgc3RhdGljICRUQUdfQ1VTVE9NX0RFQ0lTSU9OID0gIm1tX2N1c3RvbV9kZWNpc2lvbiI7CglwdWJsaWMgc3RhdGljICRUQUdfQUNDRVNTX0RFQ0lTSU9OID0gIm1tX2FjY2Vzc19kZWNpc2lvbiI7CiAJCiAJLy8gc3RhdGVzIGZvciBkZWNpc2lvbiBjaGVja3MKIAlwdWJsaWMgc3RhdGljICRJR05PUkUgPSAwOwogCXB1YmxpYyBzdGF0aWMgJFBBU1MgPSAxOwogCXB1YmxpYyBzdGF0aWMgJEZBSUwgPSAtMTsKIAkKIAkvLyBwbGFjZWhvbGRlciB2YWx1ZSBmb3IgZXhwcmVzc2lvbnMKIAlwdWJsaWMgc3RhdGljICRQTEFDRUhPTERFUl9WQUxVRSA9ICJbW01NVkFMVUVdXSI7CiAJCiAJLy8gYWNjZXNzIHR5cGVzCiAJcHVibGljIHN0YXRpYyAkQUNDRVNTX0NVUlJFTlQgPSAidHJ1ZSI7CiAJcHVibGljIHN0YXRpYyAkQUNDRVNTX0ZVVFVSRSA9ICJmdXR1cmUiOwogCXB1YmxpYyBzdGF0aWMgJEFDQ0VTU19OT05FID0gImZhbHNlIjsKCQoJLyoqCgkgKiBUYWtlcyBhIFNtYXJ0VGFnIHN0cmluZyBhbmQgcmV0dXJucyB0cnVlIGlmIHRoZSBTbWFydFRhZyBpcyBhIGRlY2lzaW9uIHRhZy4KCSAqIEBwYXJhbSBTdHJpbmcgJHNtYXJ0VGFnIHRoZSBuYW1lIG9mIHRoZSBTbWFydFRhZwoJICogQHJldHVybiBCb29sZWFuIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgcGFzc2VkIGlzIHJlbGF0ZWQgdG8gU21hcnRDb250ZW50LgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzRGVjaXNpb25TbWFydFRhZygkc21hcnRUYWcpCgl7CgkJc3dpdGNoKCRzbWFydFRhZykgCgkJewoJCQljYXNlIHNlbGY6OiRUQUdfTUVNQkVSX0RFQ0lTSU9OOgoJCQljYXNlIHNlbGY6OiRUQUdfT1JERVJfREVDSVNJT046CgkJCWNhc2Ugc2VsZjo6JFRBR19PUkRFUl9TVUJERUNJU0lPTjoKCQkJY2FzZSBzZWxmOjokVEFHX0FGRklMSUFURV9ERUNJU0lPTjoKCQkJY2FzZSBzZWxmOjokVEFHX0NVU1RPTV9ERUNJU0lPTjoKCQkJY2FzZSBzZWxmOjokVEFHX0FDQ0VTU19ERUNJU0lPTjoKCQkJCXJldHVybiB0cnVlOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgbmFtZSBhbmQgYSBudW1iZXIgb2YgcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBTbWFydFRhZyBhbmQgbWFrZXMgYSBjYWxsIHRvIAoJICogdGhlIGFwcHJvcHJpYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBTbWFydFRhZyBuYW1lLgoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IHRvIHByb2Nlc3MKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc1NtYXJ0VGFnKCRzbWFydFRhZywgJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkc21hcnRUYWdWZXJzaW9uID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfU01BUlRUQUdfVkVSU0lPTik7CgkJCgkJaWYoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JEZFQVRVUkVfU01BUlRfQ09OVEVOVF9UQUdTKSkKCQl7CgkJCS8vIHN3aXRjaCBiZXR3ZWVuIFNtYXJ0VGFnIHZlcnNpb25zCgkJCWlmKCRzbWFydFRhZ1ZlcnNpb24gPT0gIjIuMSIpCgkJCXsKCQkJCXN3aXRjaCgkc21hcnRUYWcpIAoJCQkJewoJCQkJCWNhc2Ugc2VsZjo6JFRBR19NRU1CRVJfREVDSVNJT046CgkJCQkJCXJldHVybiBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcl9WMjo6bW1fbWVtYmVyX2RlY2lzaW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJCQkKCQkJCQljYXNlIHNlbGY6OiRUQUdfT1JERVJfREVDSVNJT046CgkJCQkJY2FzZSBzZWxmOjokVEFHX09SREVSX1NVQkRFQ0lTSU9OOgoJCQkJCQlyZXR1cm4gTU1fRGVjaXNpb25UYWdQcm9jZXNzb3JfVjI6Om1tX29yZGVyX2RlY2lzaW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJCQkKCQkJCQljYXNlIHNlbGY6OiRUQUdfQUZGSUxJQVRFX0RFQ0lTSU9OOgoJCQkJCQlyZXR1cm4gTU1fRGVjaXNpb25UYWdQcm9jZXNzb3JfVjI6Om1tX2FmZmlsaWF0ZV9kZWNpc2lvbigkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQkJCgkJCQkJY2FzZSBzZWxmOjokVEFHX0NVU1RPTV9ERUNJU0lPTjoKCQkJCQkJcmV0dXJuIE1NX0RlY2lzaW9uVGFnUHJvY2Vzc29yX1YyOjptbV9jdXN0b21fZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQkJCQoJCQkJCWNhc2Ugc2VsZjo6JFRBR19BQ0NFU1NfREVDSVNJT046CgkJCQkJCXJldHVybiBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcl9WMjo6bW1fYWNjZXNzX2RlY2lzaW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJCQkKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gJGNvbnRlbnQ7CgkJCQl9CQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJc3dpdGNoKCRzbWFydFRhZykKCQkJCXsKCQkJCQljYXNlIHNlbGY6OiRUQUdfTUVNQkVSX0RFQ0lTSU9OOgoJCQkJCQlyZXR1cm4gTU1fRGVjaXNpb25UYWdQcm9jZXNzb3JfVjE6Om1tX21lbWJlcl9kZWNpc2lvbigkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQoJCQkJCWNhc2Ugc2VsZjo6JFRBR19PUkRFUl9ERUNJU0lPTjoKCQkJCQljYXNlIHNlbGY6OiRUQUdfT1JERVJfU1VCREVDSVNJT046CgkJCQkJCXJldHVybiBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcl9WMTo6bW1fb3JkZXJfZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQkKCQkJCQljYXNlIHNlbGY6OiRUQUdfQUZGSUxJQVRFX0RFQ0lTSU9OOgoJCQkJCQlyZXR1cm4gTU1fRGVjaXNpb25UYWdQcm9jZXNzb3JfVjE6Om1tX2FmZmlsaWF0ZV9kZWNpc2lvbigkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQoJCQkJCWNhc2Ugc2VsZjo6JFRBR19DVVNUT01fREVDSVNJT046CgkJCQkJCXJldHVybiBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcl9WMTo6bW1fY3VzdG9tX2RlY2lzaW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJCgkJCQkJY2FzZSBzZWxmOjokVEFHX0FDQ0VTU19ERUNJU0lPTjoKCQkJCQkJcmV0dXJuIE1NX0RlY2lzaW9uVGFnUHJvY2Vzc29yX1YxOjptbV9hY2Nlc3NfZGVjaXNpb24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQkKCQkJCQlkZWZhdWx0OgoJCQkJCQlyZXR1cm4gJGNvbnRlbnQ7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJUaGUgIi4kY29kZS4iIFNtYXJ0VGFnIGlzIG5vdCBhdmFpbGFibGUgZm9yIHRoaXMgTWVtYmVyTW91c2UgbGljZW5zZS4gVXBncmFkZSBNZW1iZXJNb3VzZSB0byB1bmxvY2sgRGVjaXNpb24gU21hcnRUYWdzIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0FjY2Vzc19EZWNpc2lvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBkZXRlcm1pbmluZwoJICogd2hldGhlciBvciBub3QgdGhlIGNvbnRlbnQgc2hvdWxkIGJlIGRpc3BsYXllZCBiYXNlZCBvbiB0aGUgYWNjZXNzIHJpZ2h0cyBvZiB0aGUgY3VycmVudCB1c2VyCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX2FjY2Vzc19kZWNpc2lvbigkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cyk+MCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleT0kdjsKCQkJfQoJCX0KCQkKCQkvLyBnZXQgY3VycmVudCBwYWdlIElECgkJaWYoIWlzc2V0KCRpZCkpCgkJewoJCQlnbG9iYWwgJHBvc3Q7CgkJCSRpZCA9ICRwb3N0LT5JRDsKCQl9CgkJCgkJLy8gZW5zdXJlIHRoYXQgdGhlIGlkIGFuZCBhY2Nlc3MgYXR0cmlidXRlcyBhcmUgc2V0CQkKCQlpZihpc3NldCgkaWQpICYmIGlzc2V0KCRhY2Nlc3MpKQoJCXsKCQkJJHZhbGlkQWNjZXNzVHlwZXMgPSBhcnJheShzZWxmOjokQUNDRVNTX0NVUlJFTlQsIHNlbGY6OiRBQ0NFU1NfTk9ORSwgc2VsZjo6JEFDQ0VTU19GVVRVUkUpOwoJCQkKCQkJaWYoIWluX2FycmF5KCRhY2Nlc3MsICR2YWxpZEFjY2Vzc1R5cGVzKSkKCQkJewoJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgJ2FjY2VzcycgYXR0cmlidXRlIG9mICd7JGFjY2Vzc30nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJfQoJCQkKCQkJJHVzZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRVc2VyKCk7CgkJCSRwY2UgPSBuZXcgTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZSgpOwoJCQkKCQkJaWYoJHBjZS0+aXNVbnByb3RlY3RlZCgkaWQpKQoJCQl7CgkJCQkkY3JudEFjY2VzcyA9IHNlbGY6OiRBQ0NFU1NfQ1VSUkVOVDsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRkYXRlT2Zmc2V0ID0gJHBjZS0+ZGF5c1RvQWNjZXNzKCRpZCwgJHVzZXItPmdldElkKCkpOwoJCQkJCQoJCQkJaWYoJGRhdGVPZmZzZXQgPT09IGZhbHNlKQoJCQkJewoJCQkJCSRjcm50QWNjZXNzID0gc2VsZjo6JEFDQ0VTU19OT05FOwoJCQkJfQoJCQkJZWxzZSBpZigkZGF0ZU9mZnNldCA+PSAwKQoJCQkJewoJCQkJCSRjcm50QWNjZXNzID0gc2VsZjo6JEFDQ0VTU19DVVJSRU5UOwoJCQkJfQoJCQkJZWxzZSBpZigkZGF0ZU9mZnNldCA8IDApCgkJCQl7CgkJCQkJJGNybnRBY2Nlc3MgPSBzZWxmOjokQUNDRVNTX0ZVVFVSRTsKCQkJCX0KCQkJfQoJCQkJCgkJCS8vIGNoZWNrIGlmIGFjY2VzcyBvZiBjdXJyZW50IHVzZXIgaXMgc3VmZmljaWVudCBiYXNlZCBvbiBhY2Nlc3MgcmVxdWVzdGVkCgkJCWlmKCRjcm50QWNjZXNzID09ICRhY2Nlc3MpCgkJCXsKCQkJCXJldHVybiBkb19zaG9ydGNvZGUoJGNvbnRlbnQpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuICIiOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiAnaWQnIGFuZCAnYWNjZXNzJyBhdHRyaWJ1dGVzIGFyZSByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSI7CgkJfQoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNoZWNrRGF5c1dpdGhBY2Nlc3MoTU1fVXNlciAkdXNlciwgJGFjY2Vzc1R5cGUsICRhY2Nlc3NUeXBlSWQsICRkYXlzQ29tcGFyaXNvblZhbHVlLCAkZGF5c0NvbXBhcmlzb25NZXRob2QgPSAiPiIpCgl7CgkJJGRheXNXaXRoQWNjZXNzID0gMDsKCQkKCQlzd2l0Y2goJGFjY2Vzc1R5cGUpCgkJewoJCQljYXNlIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQOgoJCQkJaWYoJHVzZXItPmlzQWRtaW4oKSB8fCBNTV9FbXBsb3llZTo6aXNFbXBsb3llZSgkdXNlci0+Z2V0SWQoKSkpCgkJCQl7CgkJCQkJLy8gZ2V0IHByZXZpZXcgYmFyIHNldHRpbmdzCgkJCQkJJHByZXZpZXdTZXR0aW5ncyA9IE1NX1ByZXZpZXc6OmdldERhdGEoKTsKIAkgCQoJCQkgCSAJaWYoJHByZXZpZXdTZXR0aW5ncyAhPT0gZmFsc2UpCgkJCSAJIAl7CQoJCQkgCSAJCSRkYXlzV2l0aEFjY2VzcyA9ICRwcmV2aWV3U2V0dGluZ3MtPmdldERheXMoKTsKCQkJIAkgCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkZGF5c1dpdGhBY2Nlc3MgPSAkdXNlci0+Z2V0RGF5c0FzTWVtYmVyKCk7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6JEFDQ0VTU19UWVBFX0JVTkRMRToKCQkJCWlmKCR1c2VyLT5pc0FkbWluKCkgfHwgTU1fRW1wbG95ZWU6OmlzRW1wbG95ZWUoJHVzZXItPmdldElkKCkpKQoJCQkJewoJCQkJCS8vIGdldCBwcmV2aWV3IGJhciBzZXR0aW5ncwoJCQkJCSRwcmV2aWV3U2V0dGluZ3MgPSBNTV9QcmV2aWV3OjpnZXREYXRhKCk7CgkJCQkKCQkJCQlpZigkcHJldmlld1NldHRpbmdzICE9PSBmYWxzZSkKCQkJCQl7CgkJCQkJCSRkYXlzV2l0aEFjY2VzcyA9ICRwcmV2aWV3U2V0dGluZ3MtPmdldEFwcGxpZWREYXlzKCRhY2Nlc3NUeXBlSWQpOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkZGF5c1dpdGhBY2Nlc3MgPSAkdXNlci0+Z2V0RGF5c1dpdGhCdW5kbGUoJGFjY2Vzc1R5cGVJZCk7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCX0KCQkKCQlpZigkZGF5c0NvbXBhcmlzb25NZXRob2QgPT0gIj4iICYmICRkYXlzV2l0aEFjY2VzcyA+PSAkZGF5c0NvbXBhcmlzb25WYWx1ZSkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIGlmKCRkYXlzQ29tcGFyaXNvbk1ldGhvZCA9PSAiPCIgJiYgJGRheXNXaXRoQWNjZXNzIDwgJGRheXNDb21wYXJpc29uVmFsdWUpCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQogCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcGFzcygkdGVzdCwgJG11c3RQYXNzPWZhbHNlKQogCXsKIAkJaWYoISRtdXN0UGFzcyAmJiAoJHRlc3QgPT0gc2VsZjo6JElHTk9SRSB8fCAkdGVzdCA9PSBzZWxmOjokUEFTUykpCiAJCXsKIAkJCXJldHVybiB0cnVlOwogCQl9CiAJCWVsc2UgaWYoJG11c3RQYXNzICYmICR0ZXN0ID09IHNlbGY6OiRQQVNTKQogCQl7CiAJCQlyZXR1cm4gdHJ1ZTsKIAkJfQogCQllbHNlCiAJCXsKIAkJCXJldHVybiBmYWxzZTsKIAkJfQogCX0KfQo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(121, 'dripcontentwidget', 'LyoqCiAqIERyaXAgQ29udGVudCBXaWRnZXQgQ2xhc3MKICovCmNsYXNzIE1NX0RyaXBDb250ZW50V2lkZ2V0IGV4dGVuZHMgV1BfV2lkZ2V0IAp7Cglwcml2YXRlIHN0YXRpYyAkREFURV9LRVlXT1JEID0gIiMjZGF0ZSMjIjsKCXByaXZhdGUgc3RhdGljICRERkxUX0RBVEVfRk9STUFUID0gIk0gaiwgWSI7CgkKCXByaXZhdGUgJHVzZXI7Cglwcml2YXRlICRhY2Nlc3NpYmxlUG9zdHM7CgkKICAgIC8qKiBjb25zdHJ1Y3RvciAqLwogICAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKSAKICAgIHsKICAgIAkkd2lkZ2V0X29wcyA9IGFycmF5KCdjbGFzc25hbWUnID0+ICdtbS1kcmlwLWNvbnRlbnQtd2lkZ2V0JywgJ2Rlc2NyaXB0aW9uJyA9PiAnVXNlIHRoaXMgd2lkZ2V0IHRvIGRpc3BsYXkgYSBsaXN0IG9mIGN1cnJlbnRseSBhdmFpbGFibGUgb3IgdXBjb21pbmcgY29udGVudCB0byB0aGUgY3VycmVudCBtZW1iZXIgYmFzZWQgb24gdGhlaXIgYWNjZXNzIHJpZ2h0cycpOwogICAgICAgIHBhcmVudDo6X19jb25zdHJ1Y3QoZmFsc2UsICRuYW1lID0gJ01NIFByb3RlY3RlZCBDb250ZW50JywgJHdpZGdldF9vcHMpOwkKICAgIH0KCiAgICAvKiogQHNlZSBXUF9XaWRnZXQ6OmZvcm0gKi8KICAgIGZ1bmN0aW9uIGZvcm0oJGluc3RhbmNlKSAKICAgIHsJCiAgICAJLy8gc2V0IGRlZmF1bHQgdmFsdWVzCiAgICAJJHRpdGxlID0gIiI7CiAgICAJJGNvbnRlbnR0eXBlID0gImN1cnJlbnQiOwogICAgCSRkaXNwbGF5YXNsaW5rcyA9ICIxIjsKICAgIAkkbnVtaXRlbXMgPSAiNSI7CiAgICAJJHBvc3RjaGVja2JveCA9ICIwIjsKICAgIAkkcG9zdGNhdGVnb3JpZXMgPSAiIjsKICAgIAkkcGFnZWNoZWNrYm94ID0gIjAiOwogICAgCSRjdXN0b21wb3N0Y2hlY2tib3ggPSAiMCI7CiAgICAJJGN1c3RvbXBvc3R0eXBlcyA9ICIiOwogICAgCSRjYXRlZ29yeXJhZGlvID0gImFsbCI7CiAgICAJJGRhdGVjaGVja2JveCA9ICIwIjsKICAgIAkkZGF0ZXByZWZpeCA9ICIoQXZhaWxhYmxlICIuc2VsZjo6JERBVEVfS0VZV09SRC4iKSI7CiAgICAJJGRhdGVmb3JtYXQgPSAic2hvcnQiOwogICAgCSRjdXN0b21kYXRlZm9ybWF0ID0gc2VsZjo6JERGTFRfREFURV9GT1JNQVQ7CiAgICAJCiAgICAJLy8gc2V0IGN1cnJlbnQgdmFsdWVzCiAgICAJaWYoaXNzZXQoJGluc3RhbmNlWyd0aXRsZSddKSkKICAgIAl7CiAgICAJCSR0aXRsZSA9IGVzY19hdHRyKCRpbnN0YW5jZVsndGl0bGUnXSk7CiAgICAJfQogICAgCQogICAgCWlmKGlzc2V0KCRpbnN0YW5jZVsnY29udGVudHR5cGUnXSkpCiAgICAJewogICAgCQkkY29udGVudHR5cGUgPSBlc2NfYXR0cigkaW5zdGFuY2VbJ2NvbnRlbnR0eXBlJ10pOwogICAgCX0KICAgIAkKICAgIAlpZihpc3NldCgkaW5zdGFuY2VbJ251bWl0ZW1zJ10pKQogICAgCXsKICAgIAkJJG51bWl0ZW1zID0gZXNjX2F0dHIoJGluc3RhbmNlWydudW1pdGVtcyddKTsKICAgIAl9CiAgICAJCiAgICAJaWYoaXNzZXQoJGluc3RhbmNlWydkaXNwbGF5YXNsaW5rcyddKSkKICAgIAl7CiAgICAJCSRkaXNwbGF5YXNsaW5rcyA9IGVzY19hdHRyKCRpbnN0YW5jZVsnZGlzcGxheWFzbGlua3MnXSk7CiAgICAJfQogICAgCQogICAgCWlmKGlzc2V0KCRpbnN0YW5jZVsncG9zdGNoZWNrYm94J10pKQogICAgCXsKCQkJJHBvc3RjaGVja2JveCA9IGVzY19hdHRyKCRpbnN0YW5jZVsncG9zdGNoZWNrYm94J10pOwogICAgCX0KICAgIAkKICAgIAlpZihpc3NldCgkaW5zdGFuY2VbJ3BhZ2VjaGVja2JveCddKSkKICAgIAl7CgkJCSRwYWdlY2hlY2tib3ggPSBlc2NfYXR0cigkaW5zdGFuY2VbJ3BhZ2VjaGVja2JveCddKTsKICAgIAl9CiAgICAJCiAgICAJaWYoaXNzZXQoJGluc3RhbmNlWydjdXN0b21wb3N0Y2hlY2tib3gnXSkpCiAgICAJewoJCQkkY3VzdG9tcG9zdGNoZWNrYm94ID0gZXNjX2F0dHIoJGluc3RhbmNlWydjdXN0b21wb3N0Y2hlY2tib3gnXSk7CiAgICAJfQogICAgCQogICAgCWlmKGlzc2V0KCRpbnN0YW5jZVsnY2F0ZWdvcnlyYWRpbyddKSkKICAgIAl7CgkJCSRjYXRlZ29yeXJhZGlvID0gZXNjX2F0dHIoJGluc3RhbmNlWydjYXRlZ29yeXJhZGlvJ10pOwogICAgCX0KICAgIAkKICAgIAlpZihpc3NldCgkaW5zdGFuY2VbJ3Bvc3RjYXRlZ29yaWVzJ10pKQogICAgCXsKCQkJJHBvc3RjYXRlZ29yaWVzID0gJGluc3RhbmNlWydwb3N0Y2F0ZWdvcmllcyddOwogICAgCX0KICAgIAkKICAgIAlpZihpc3NldCgkaW5zdGFuY2VbJ2N1c3RvbXBvc3R0eXBlcyddKSkKICAgIAl7CgkJCSRjdXN0b21wb3N0dHlwZXMgPSAkaW5zdGFuY2VbJ2N1c3RvbXBvc3R0eXBlcyddOwogICAgCX0KICAgIAkKICAgIAlpZihpc3NldCgkaW5zdGFuY2VbJ2RhdGVjaGVja2JveCddKSkKICAgIAl7CgkJCSRkYXRlY2hlY2tib3ggPSBlc2NfYXR0cigkaW5zdGFuY2VbJ2RhdGVjaGVja2JveCddKTsKICAgIAl9CiAgICAJCiAgICAJaWYoaXNzZXQoJGluc3RhbmNlWydkYXRlcHJlZml4J10pKQogICAgCXsKCQkJJGRhdGVwcmVmaXggPSBlc2NfYXR0cigkaW5zdGFuY2VbJ2RhdGVwcmVmaXgnXSk7CiAgICAJfQogICAgCQogICAgCWlmKGlzc2V0KCRpbnN0YW5jZVsnZGF0ZWZvcm1hdCddKSkKICAgIAl7CgkJCSRkYXRlZm9ybWF0ID0gZXNjX2F0dHIoJGluc3RhbmNlWydkYXRlZm9ybWF0J10pOwogICAgCX0KICAgIAkKICAgIAlpZihpc3NldCgkaW5zdGFuY2VbJ2N1c3RvbWRhdGVmb3JtYXQnXSkpCiAgICAJewoJCQkkY3VzdG9tZGF0ZWZvcm1hdCA9IGVzY19hdHRyKCRpbnN0YW5jZVsnY3VzdG9tZGF0ZWZvcm1hdCddKTsKICAgIAl9CiAgICA/PgogICAgPHNjcmlwdD4KICAgIGZ1bmN0aW9uIG1tRHJpcENvbnRlbnRfVG9nZ2xlRGl2KGNoZWNrYm94LCBkaXZJZCkKICAgIHsKICAgICAgICBpZihjaGVja2JveC5jaGVja2VkID09IHRydWUpIAogICAgICAgIHsKICAgIAkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2SWQpLnN0eWxlLmRpc3BsYXkgPSAiIjsKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgIAkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZGl2SWQpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfQogICAgfQogICAgPC9zY3JpcHQ+CiAgICAKICAgIDxkaXYgc3R5bGU9InRleHQtYWxpZ246IHJpZ2h0OyBmb250LXNpemU6MTBweDsiPjxhIGhyZWY9Imh0dHA6Ly9zdXBwb3J0Lm1lbWJlcm1vdXNlLmNvbS9zdXBwb3J0L3NvbHV0aW9ucy9hcnRpY2xlcy85MDAwMDIwMjIwLXByb3RlY3RlZC1jb250ZW50LXdpZGdldCIgdGFyZ2V0PSJfYmxhbmsiPm5lZWQgaGVscD88L2E+PC9kaXY+CiAgICAKICAgIDxwPgogICAgICAJPGxhYmVsIGZvcj0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCd0aXRsZScpOyA/PiI+PD9waHAgX2UoJ1dpZGdldCBUaXRsZScpOyA/PjwvbGFiZWw+CiAgICAgIAk8aW5wdXQgY2xhc3M9IndpZGVmYXQiIGlkPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ3RpdGxlJyk7ID8+IiBuYW1lPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfbmFtZSgndGl0bGUnKTsgPz4iIHR5cGU9InRleHQiIHZhbHVlPSI8P3BocCBlY2hvICR0aXRsZTsgPz4iIC8+CiAgICA8L3A+CiAgICAKICAgIDxwPgoJCTxzZWxlY3QgbmFtZT0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX25hbWUoJ2NvbnRlbnR0eXBlJyk7ID8+IiBpZD0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdjb250ZW50dHlwZScpOyA/PiIgY2xhc3M9IndpZGVmYXQiPgoJCQk8b3B0aW9uIHZhbHVlPSJjdXJyZW50IiA8P3BocCBlY2hvICgkY29udGVudHR5cGUgPT0gImN1cnJlbnQiKSA/ICJzZWxlY3RlZD1cInNlbGVjdGVkXCIiIDogIiI7ID8+PlNob3cgQXZhaWxhYmxlIENvbnRlbnQ8L29wdGlvbj4KCQkJPG9wdGlvbiB2YWx1ZT0idXBjb21pbmciIDw/cGhwIGVjaG8gKCRjb250ZW50dHlwZSA9PSAidXBjb21pbmciKSA/ICJzZWxlY3RlZD1cInNlbGVjdGVkXCIiIDogIiI7ID8+PlNob3cgVXBjb21pbmcgQ29udGVudDwvb3B0aW9uPgoJCTwvc2VsZWN0PgoJPC9wPgoJCgk8cD4KICAgICAgCTxsYWJlbCBmb3I9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnbnVtaXRlbXMnKTsgPz4iPjw/cGhwIF9lKCdOdW1iZXIgb2YgaXRlbXMgdG8gc2hvdzonKTsgPz48L2xhYmVsPgogICAgICAJPGlucHV0IGlkPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ251bWl0ZW1zJyk7ID8+IiBuYW1lPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfbmFtZSgnbnVtaXRlbXMnKTsgPz4iIHR5cGU9InRleHQiIHNpemU9IjMiIHZhbHVlPSI8P3BocCBlY2hvICRudW1pdGVtczsgPz4iIC8+CiAgICA8L3A+CgogICAgPHA+CiAgICAgIAk8aW5wdXQgaWQ9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnZGlzcGxheWFzbGlua3MnKTsgPz4iIG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdkaXNwbGF5YXNsaW5rcycpOyA/PiIgdHlwZT0iY2hlY2tib3giIHZhbHVlPSIxIiA8P3BocCBjaGVja2VkKCAnMScsICRkaXNwbGF5YXNsaW5rcyApOyA/Pi8+CiAgICAJPGxhYmVsIGZvcj0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdkaXNwbGF5YXNsaW5rcycpOyA/PiI+PD9waHAgX2UoJ0Rpc3BsYXkgaXRlbXMgYXMgbGlua3MnKTsgPz48L2xhYmVsPgogICAgPC9wPiAKCiAgICA8cD4KICAgICAgCTxpbnB1dCBpZD0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdwb3N0Y2hlY2tib3gnKTsgPz4iIG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdwb3N0Y2hlY2tib3gnKTsgPz4iIHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iMSIgb25DbGljaz0ibW1EcmlwQ29udGVudF9Ub2dnbGVEaXYodGhpcywgJzw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgncG9zdG9wdGlvbnMnKTsgPz4nKSIgPD9waHAgY2hlY2tlZCggJzEnLCAkcG9zdGNoZWNrYm94ICk7ID8+Lz4KICAgIAk8bGFiZWwgZm9yPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ3Bvc3RjaGVja2JveCcpOyA/PiI+PD9waHAgX2UoJ0luY2x1ZGUgUG9zdHMnKTsgPz48L2xhYmVsPgogICAgPC9wPiAKICAgIAogICAgPGRpdiBpZD0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdwb3N0b3B0aW9ucycpOyA/PiIgc3R5bGU9Im1hcmdpbi1sZWZ0OiAyMHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyBsaW5lLWhlaWdodDogMjBweDsgZGlzcGxheTogPD9waHAgZWNobyAoJHBvc3RjaGVja2JveCA9PSAiMSIpID8gIiIgOiAibm9uZSI7ID8+Ij4KICAgIAk8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdjYXRlZ29yeXJhZGlvJyk7ID8+IiB2YWx1ZT0iYWxsIiA8P3BocCBlY2hvICgkY2F0ZWdvcnlyYWRpbyA9PSAiYWxsIikgPyAiY2hlY2tlZCIgOiAiIjsgPz4+IEFsbCBjYXRlZ29yaWVzPGJyLz4KCQk8aW5wdXQgdHlwZT0icmFkaW8iIG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdjYXRlZ29yeXJhZGlvJyk7ID8+IiB2YWx1ZT0ic2VsZWN0ZWQiIDw/cGhwIGVjaG8gKCRjYXRlZ29yeXJhZGlvID09ICJzZWxlY3RlZCIpID8gImNoZWNrZWQiIDogIiI7ID8+PiBTZWxlY3RlZCBjYXRlZ29yaWVzCiAgIAkJPHNlbGVjdCBuYW1lPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfbmFtZSgncG9zdGNhdGVnb3JpZXMnKTsgPz5bXSIgaWQ9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgncG9zdGNhdGVnb3JpZXMnKTsgPz4iIGNsYXNzPSJ3aWRlZmF0IiBtdWx0aXBsZT0ibXVsdGlwbGUiIHNpemU9IjUiPgoJCQk8P3BocCAKCQkJJGNhdGVnb3J5QXJncyA9IGFycmF5KCdvcmRlcmJ5JyA9PiAnbmFtZScsICdvcmRlcicgPT4gJ0FTQycpOwoJCQkKCQkJJGNhdGVnb3JpZXMgPSBnZXRfY2F0ZWdvcmllcygkY2F0ZWdvcnlBcmdzKTsKCQkJCgkJCWZvcmVhY2goJGNhdGVnb3JpZXMgYXMgJGNhdGVnb3J5KSAKCQkJewoJCQkJJHNlbGVjdGVkID0gaW5fYXJyYXkoJGNhdGVnb3J5LT50ZXJtX2lkLCAkcG9zdGNhdGVnb3JpZXMpID8gJyBzZWxlY3RlZD0ic2VsZWN0ZWQiJyA6ICcnOwoJCQkJZWNobyAiPG9wdGlvbiB2YWx1ZT1cInskY2F0ZWdvcnktPnRlcm1faWR9XCIgeyRzZWxlY3RlZH0+eyRjYXRlZ29yeS0+bmFtZX08L29wdGlvbj4iOwoJCQl9CgkJCT8+CgkJPC9zZWxlY3Q+CiAgICA8L2Rpdj4KICAgIAkKICAgIDxwPgogICAgCTxpbnB1dCBpZD0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdwYWdlY2hlY2tib3gnKTsgPz4iIG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdwYWdlY2hlY2tib3gnKTsgPz4iIHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iMSIgPD9waHAgY2hlY2tlZCggJzEnLCAkcGFnZWNoZWNrYm94ICk7ID8+Lz4KICAgIAk8bGFiZWwgZm9yPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ3BhZ2VjaGVja2JveCcpOyA/PiI+PD9waHAgX2UoJ0luY2x1ZGUgUGFnZXMnKTsgPz48L2xhYmVsPgogICAgPC9wPgogICAgCiAgICA8cD4KICAgICAgCTxpbnB1dCBpZD0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdjdXN0b21wb3N0Y2hlY2tib3gnKTsgPz4iIG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdjdXN0b21wb3N0Y2hlY2tib3gnKTsgPz4iIHR5cGU9ImNoZWNrYm94IiB2YWx1ZT0iMSIgb25DbGljaz0ibW1EcmlwQ29udGVudF9Ub2dnbGVEaXYodGhpcywgJzw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnY3VzdG9tcG9zdG9wdGlvbnMnKTsgPz4nKSIgPD9waHAgY2hlY2tlZCggJzEnLCAkY3VzdG9tcG9zdGNoZWNrYm94ICk7ID8+Lz4KICAgIAk8bGFiZWwgZm9yPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ2N1c3RvbXBvc3RjaGVja2JveCcpOyA/PiI+PD9waHAgX2UoJ0luY2x1ZGUgQ3VzdG9tIFBvc3QgVHlwZXMnKTsgPz48L2xhYmVsPgogICAgPC9wPiAKICAgIAogICAgPGRpdiBpZD0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdjdXN0b21wb3N0b3B0aW9ucycpOyA/PiIgc3R5bGU9Im1hcmdpbi1sZWZ0OiAyMHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyBsaW5lLWhlaWdodDogMjBweDsgZGlzcGxheTogPD9waHAgZWNobyAoJGN1c3RvbXBvc3RjaGVja2JveCA9PSAiMSIpID8gIiIgOiAibm9uZSI7ID8+Ij4KICAgIAk8c2VsZWN0IG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdjdXN0b21wb3N0dHlwZXMnKTsgPz5bXSIgaWQ9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnY3VzdG9tcG9zdHR5cGVzJyk7ID8+IiBjbGFzcz0id2lkZWZhdCIgbXVsdGlwbGU9Im11bHRpcGxlIiBzaXplPSI1Ij4KCQkJPD9waHAgCgkJCSRwb3N0VHlwZXMgPSBNTV9VdGlsczo6Z2V0Q3VzdG9tUG9zdFR5cGVzKCk7CgkJCQoJCQlmb3JlYWNoKCRwb3N0VHlwZXMgYXMgJHBvc3RUeXBlU2x1ZykgCgkJCXsKCQkJCSRzZWxlY3RlZCA9IGluX2FycmF5KCRwb3N0VHlwZVNsdWcsICRjdXN0b21wb3N0dHlwZXMpID8gJyBzZWxlY3RlZD0ic2VsZWN0ZWQiJyA6ICcnOwoJCQkJJHBvc3RUeXBlT2JqID0gZ2V0X3Bvc3RfdHlwZV9vYmplY3QoJHBvc3RUeXBlU2x1Zyk7CgkJCQllY2hvICI8b3B0aW9uIHZhbHVlPVwieyRwb3N0VHlwZVNsdWd9XCIgeyRzZWxlY3RlZH0+eyRwb3N0VHlwZU9iai0+bGFiZWxzLT5zaW5ndWxhcl9uYW1lfTwvb3B0aW9uPiI7CgkJCX0KCQkJPz4KCQk8L3NlbGVjdD4KICAgIDwvZGl2PgoJCgk8cD4KICAgIAk8aW5wdXQgaWQ9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnZGF0ZWNoZWNrYm94Jyk7ID8+IiBuYW1lPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfbmFtZSgnZGF0ZWNoZWNrYm94Jyk7ID8+IiB0eXBlPSJjaGVja2JveCIgdmFsdWU9IjEiIG9uQ2xpY2s9Im1tRHJpcENvbnRlbnRfVG9nZ2xlRGl2KHRoaXMsICc8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ2RhdGVvcHRpb25zJyk7ID8+JykiIDw/cGhwIGNoZWNrZWQoICcxJywgJGRhdGVjaGVja2JveCApOyA/Pi8+CiAgICAJPGxhYmVsIGZvcj0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdkYXRlY2hlY2tib3gnKTsgPz4iPjw/cGhwIF9lKCdTaG93IGRhdGUgbmV4dCB0byBjb250ZW50IHRpdGxlJyk7ID8+PC9sYWJlbD4KICAgIDwvcD4KICAgIAogICAgPGRpdiBpZD0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX2lkKCdkYXRlb3B0aW9ucycpOyA/PiIgc3R5bGU9Im1hcmdpbi1sZWZ0OiAyMHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyBkaXNwbGF5OiA8P3BocCBlY2hvICgkZGF0ZWNoZWNrYm94ID09ICIxIikgPyAiIiA6ICJub25lIjsgPz4iPgogICAgCTxsYWJlbCBmb3I9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnZGF0ZXByZWZpeCcpOyA/PiI+PD9waHAgX2UoJ1RleHQgdG8gZGlzcGxheSAodXNlIDxjb2RlPicuc2VsZjo6JERBVEVfS0VZV09SRC4nPC9jb2RlPiB0byBpbmRpY2F0ZSB3aGVyZSB0aGUgZGF0ZSBnb2VzKScpOyA/PjwvbGFiZWw+CiAgICAgIAk8aW5wdXQgY2xhc3M9IndpZGVmYXQiIGlkPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ2RhdGVwcmVmaXgnKTsgPz4iIG5hbWU9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9uYW1lKCdkYXRlcHJlZml4Jyk7ID8+IiB0eXBlPSJ0ZXh0IiB2YWx1ZT0iPD9waHAgZWNobyAkZGF0ZXByZWZpeDsgPz4iIC8+CiAgICAJCiAgICAJPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoxMHB4OyBsaW5lLWhlaWdodDoyMHB4OyI+CgkJCTxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX25hbWUoJ2RhdGVmb3JtYXQnKTsgPz4iIHZhbHVlPSJzaG9ydCIgPD9waHAgZWNobyAoJGRhdGVmb3JtYXQgPT0gInNob3J0IikgPyAiY2hlY2tlZCIgOiAiIjsgPz4+IDw/cGhwIGVjaG8gZGF0ZSgiTSBqUyIpOyA/Pjxici8+CgkgICAgCTxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX25hbWUoJ2RhdGVmb3JtYXQnKTsgPz4iIHZhbHVlPSJsb25nIiA8P3BocCBlY2hvICgkZGF0ZWZvcm1hdCA9PSAibG9uZyIpID8gImNoZWNrZWQiIDogIiI7ID8+PiA8P3BocCBlY2hvIGRhdGUoIk0gaiwgWSIpOyA/Pjxici8+CgkJCTxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX25hbWUoJ2RhdGVmb3JtYXQnKTsgPz4iIHZhbHVlPSJjb21tb24iIDw/cGhwIGVjaG8gKCRkYXRlZm9ybWF0ID09ICJjb21tb24iKSA/ICJjaGVja2VkIiA6ICIiOyA/Pj4gPD9waHAgZWNobyBkYXRlKCJuL2oveSIpOyA/Pjxici8+CgkJCTxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX25hbWUoJ2RhdGVmb3JtYXQnKTsgPz4iIHZhbHVlPSJjdXN0b20iIDw/cGhwIGVjaG8gKCRkYXRlZm9ybWF0ID09ICJjdXN0b20iKSA/ICJjaGVja2VkIiA6ICIiOyA/Pj4gQ3VzdG9tIGZvcm1hdAoJCQkKCQkJPGRpdiBzdHlsZT0ibWFyZ2luLWxlZnQ6MTVweDsiPgoJICAgICAgCQk8aW5wdXQgaWQ9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnY3VzdG9tZGF0ZWZvcm1hdCcpOyA/PiIgbmFtZT0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX25hbWUoJ2N1c3RvbWRhdGVmb3JtYXQnKTsgPz4iIHR5cGU9InRleHQiIHNpemU9IjI1IiB2YWx1ZT0iPD9waHAgZWNobyAkY3VzdG9tZGF0ZWZvcm1hdDsgPz4iIC8+CgkgICAgCQk8bGFiZWwgZm9yPSI8P3BocCBlY2hvICR0aGlzLT5nZXRfZmllbGRfaWQoJ2N1c3RvbWRhdGVmb3JtYXQnKTsgPz4iPjw/cGhwIF9lKCc8YSBocmVmPSJodHRwOi8vcGhwLm5ldC9tYW51YWwvZW4vZnVuY3Rpb24uZGF0ZS5waHAiIHRhcmdldD0iX2JsYW5rIj48ZW0+Y2xpY2sgaGVyZSBmb3IgZm9ybWF0IG9wdGlvbnM8L2VtPjwvYT4nKTsgPz48L2xhYmVsPgoJICAgIAk8L2Rpdj4KICAgIAk8L2Rpdj4KICAgIDwvZGl2PgogICAgPD9waHAKICAgIH0KCQogICAgLyoqIEBzZWUgV1BfV2lkZ2V0Ojp1cGRhdGUgKi8KICAgIGZ1bmN0aW9uIHVwZGF0ZSgkbmV3X2luc3RhbmNlLCAkb2xkX2luc3RhbmNlKSAKICAgIHsJCQoJCSRpbnN0YW5jZSA9ICRvbGRfaW5zdGFuY2U7CgkJJGluc3RhbmNlWyd0aXRsZSddID0gc3RyaXBfdGFncygkbmV3X2luc3RhbmNlWyd0aXRsZSddKTsKCQkkaW5zdGFuY2VbJ2NvbnRlbnR0eXBlJ10gPSBzdHJpcF90YWdzKCRuZXdfaW5zdGFuY2VbJ2NvbnRlbnR0eXBlJ10pOwoJCSRpbnN0YW5jZVsnbnVtaXRlbXMnXSA9IHN0cmlwX3RhZ3MoJG5ld19pbnN0YW5jZVsnbnVtaXRlbXMnXSk7CgkJJGluc3RhbmNlWydkaXNwbGF5YXNsaW5rcyddID0gc3RyaXBfdGFncygkbmV3X2luc3RhbmNlWydkaXNwbGF5YXNsaW5rcyddKTsKCQkkaW5zdGFuY2VbJ3Bvc3RjaGVja2JveCddID0gc3RyaXBfdGFncygkbmV3X2luc3RhbmNlWydwb3N0Y2hlY2tib3gnXSk7CgkJJGluc3RhbmNlWydjYXRlZ29yeXJhZGlvJ10gPSBzdHJpcF90YWdzKCRuZXdfaW5zdGFuY2VbJ2NhdGVnb3J5cmFkaW8nXSk7CgkJCgkJaWYoJGluc3RhbmNlWydjYXRlZ29yeXJhZGlvJ10gPT0gImFsbCIpCgkJewoJCQkkaW5zdGFuY2VbJ3Bvc3RjYXRlZ29yaWVzJ10gPSAiIjsKCQl9CgkJZWxzZSAKCQl7CgkJCSRpbnN0YW5jZVsncG9zdGNhdGVnb3JpZXMnXSA9ICRuZXdfaW5zdGFuY2VbJ3Bvc3RjYXRlZ29yaWVzJ107CgkJfQoJCQoJCSRpbnN0YW5jZVsncGFnZWNoZWNrYm94J10gPSBzdHJpcF90YWdzKCRuZXdfaW5zdGFuY2VbJ3BhZ2VjaGVja2JveCddKTsKCQkkaW5zdGFuY2VbJ2N1c3RvbXBvc3RjaGVja2JveCddID0gc3RyaXBfdGFncygkbmV3X2luc3RhbmNlWydjdXN0b21wb3N0Y2hlY2tib3gnXSk7CgkJJGluc3RhbmNlWydjdXN0b21wb3N0dHlwZXMnXSA9ICRuZXdfaW5zdGFuY2VbJ2N1c3RvbXBvc3R0eXBlcyddOwoJCSRpbnN0YW5jZVsnZGF0ZWNoZWNrYm94J10gPSBzdHJpcF90YWdzKCRuZXdfaW5zdGFuY2VbJ2RhdGVjaGVja2JveCddKTsKCQkkaW5zdGFuY2VbJ2RhdGVwcmVmaXgnXSA9IHN0cmlwX3RhZ3MoJG5ld19pbnN0YW5jZVsnZGF0ZXByZWZpeCddKTsKCQkkaW5zdGFuY2VbJ2RhdGVmb3JtYXQnXSA9IHN0cmlwX3RhZ3MoJG5ld19pbnN0YW5jZVsnZGF0ZWZvcm1hdCddKTsKCQkkaW5zdGFuY2VbJ2N1c3RvbWRhdGVmb3JtYXQnXSA9IHN0cmlwX3RhZ3MoJG5ld19pbnN0YW5jZVsnY3VzdG9tZGF0ZWZvcm1hdCddKTsKCQkKCSAgICByZXR1cm4gJGluc3RhbmNlOwogICAgfQogICAgCiAgICAvKioKICAgICAqIFRoaXMgaXMgYSBoZWxwZXIgZnVuY3Rpb24gdG8gdGhlIHdpZGdldCgpIG1ldGhvZCB0aGF0IHJldHJpZXZlcyBhY2Nlc3NpYmxlIHBvc3RzIGZvciAKICAgICAqIHRoZSBjdXJyZW50IHVzZXIgYmFzZWQgb24gdGhlIHBhcmFtZXRlcnMgcGFzc2VkIGFuZCB3aWRnZXQgYXJndW1lbnRzIGFuZCB1cGRhdGVzIHRoZSAKICAgICAqICRhY2Nlc3NpYmxlUG9zdCBBcnJheS4KICAgICAqIEBwYXJhbSBTdHJpbmcgJGFjY2Vzc1R5cGUgZXF1YWxzICdtZW1iZXJfdHlwZScgb3IgJ2FjY2Vzc190YWcnIGFuIGluZGljYXRlcyB0aGUgdHlwZSBvZiBhY2Nlc3MgcmlnaHQKICAgICAqIEBwYXJhbSBJbnRlZ2VyICRhY2Nlc3NJZCB0aGUgSUQgb2YgdGhlIGFjY2VzcyByaWdodAogICAgICogQHBhcmFtIEludGVnZXIgJG51bURheXNXaXRoQWNjZXNzIHRoZSBudW1iZXIgb2YgZGF5cyB0aGUgbWVtYmVyIGhhcyBoYWQgdGhlIGFjY2VzcyByaWdodCAKICAgICAqIEBwYXJhbSBPYmplY3QgJGluc3RhbmNlIGEgcmVmZXJlbmNlIHRvIHRoZSB3aWRnZXQgaW5zdGFuY2UgYXJndW1lbnRzIAogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIGdldEFjY2Vzc2libGVQb3N0cygkYWNjZXNzVHlwZSwgJGFjY2Vzc0lkLCAkbnVtRGF5c1dpdGhBY2Nlc3MsICRpbnN0YW5jZSkKICAgIHsKICAgIAlnbG9iYWwgJHdwZGI7CiAgICAJCiAgICAJaWYoIWVtcHR5KCRhY2Nlc3NJZCkpCiAgICAJewoJICAgIAkkc3FsID0gIlNFTEVDVCBwb3N0X2lkLCBkYXlzIEZST00gIi5NTV9UQUJMRV9QT1NUU19BQ0NFU1MuIiBXSEVSRSBpc19zbWFydF9jb250ZW50ID0gMCI7CgkgICAgCQoJICAgIAlpZihpc3NldCgkaW5zdGFuY2VbJ2NvbnRlbnR0eXBlJ10pICYmICRpbnN0YW5jZVsnY29udGVudHR5cGUnXSA9PSAiY3VycmVudCIpCgkgICAgCXsKCSAgICAJCSRzcWwgLj0gIiBBTkQgZGF5cyA8PSAiLiRudW1EYXlzV2l0aEFjY2VzczsKCSAgICAJfQoJICAgIAllbHNlCgkgICAgCXsKCSAgICAJCSRzcWwgLj0gIiBBTkQgZGF5cyA+ICIuJG51bURheXNXaXRoQWNjZXNzOwoJICAgIAl9CgoJICAgIAkkc3FsQWNjZXNzSWQgPSAoJGFjY2Vzc0lkPT0ibm9uZSIpPzA6aW50dmFsKCRhY2Nlc3NJZCk7CgkgICAgCSRzcWwgLj0gIiBBTkQgYWNjZXNzX3R5cGUgPSAnIi4kYWNjZXNzVHlwZS4iJyBBTkQgYWNjZXNzX2lkID0gIi4kc3FsQWNjZXNzSWQ7CgkgICAgCQoJICAgIAkkc3FsIC49ICIgT1JERVIgQlkgZGF5cyBBU0M7IjsKCSAgICAJCgkgICAgCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJICAgIAkKCSAgICAJaWYoJHJlc3VsdHMpCgkgICAgCXsKCSAgICAJCWZvcmVhY2goJHJlc3VsdHMgYXMgJHBvc3QpCgkgICAgCQl7CgkgICAgCQkJJGl0ZW0gPSBuZXcgc3RkQ2xhc3MoKTsKCSAgICAJCQkkaXRlbS0+aWQgPSAkcG9zdC0+cG9zdF9pZDsKCSAgICAJCgkgICAgCQkJLy8gY2FsY3VsYXRlIGRhdGUgY29udGVudCB3aWxsIGJlY29tZSBhdmFpbGFibGUKCSAgICAJCQlpZihpc3NldCgkaW5zdGFuY2VbJ2NvbnRlbnR0eXBlJ10pICYmICRpbnN0YW5jZVsnY29udGVudHR5cGUnXSA9PSAiY3VycmVudCIpCgkgICAgCQkJewoJICAgIAkJCQkkZGF0ZU9mZnNldCA9ICRudW1EYXlzV2l0aEFjY2VzcyAtICRwb3N0LT5kYXlzOwoJICAgIAkJCQkkcG9zdERhdGUgPSBta3RpbWUoMCwgMCwgMCwgZGF0ZSgibSIpLCBkYXRlKCJkIiktJGRhdGVPZmZzZXQsIGRhdGUoInkiKSk7CgkgICAgCQkJfQoJICAgIAkJCWVsc2UKCSAgICAJCQl7CgkgICAgCQkJCSRkYXRlT2Zmc2V0ID0gJHBvc3QtPmRheXMgLSAkbnVtRGF5c1dpdGhBY2Nlc3M7CgkgICAgCQkJCSRwb3N0RGF0ZSA9IG1rdGltZSgwLCAwLCAwLCBkYXRlKCJtIiksIGRhdGUoImQiKSskZGF0ZU9mZnNldCwgZGF0ZSgieSIpKTsKCSAgICAJCQl9CgkgICAgCQoJICAgIAkJCSRpdGVtLT5kYXRlID0gJHBvc3REYXRlOwoJICAgIAkJCQoJICAgIAkJCSR3cFBvc3QgPSBnZXRfcG9zdCgkcG9zdC0+cG9zdF9pZCk7CgkgICAgCQkKCSAgICAJCQlpZihpc3NldCgkd3BQb3N0LT5wb3N0X2RhdGUpKQoJICAgIAkJCXsKCSAgICAJCQkJJGl0ZW0tPnBvc3RfZGF0ZSA9ICR3cFBvc3QtPnBvc3RfZGF0ZTsKCSAgICAJCQl9CgkgICAgCQkJCgkgICAgCQkJYXJyYXlfcHVzaCgkdGhpcy0+YWNjZXNzaWJsZVBvc3RzLCAkaXRlbSk7CgkgICAgCQl9CgkgICAgCX0KICAgIAl9CiAgICB9CiAgICAKICAgIC8qKgogICAgICogVGhpcyBpcyBhIGNvbXBhcmUgZnVuY3Rpb24gdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSB1c29ydCgpIG1ldGhvZCB0byBzb3J0IAogICAgICogdGhlICRhY2Nlc3NpYmxlUG9zdHMgYXJyYXkgYnkgdGhlIGRhdGUgcHJvcGVydHkgb2YgdGhlIG9iamVjdHMgY29udGFpbmVkIGluIHRoaXMKICAgICAqIGFycmF5LgogICAgICogQHBhcmFtIE9iamVjdCAkcG9zdDEgdGhlIGZpcnN0IHBvc3QgaW4gdGhlIGNvbXBhcmlzb24KICAgICAqIEBwYXJhbSBPYmplY3QgJHBvc3QyIHRoZSBzZWNvbmQgcG9zdCBpbiB0aGUgY29tcGFyaXNvbgogICAgICovCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNvcnRQb3N0cygkcG9zdDEsICRwb3N0MikKICAgIHsKICAgIAlpZigkcG9zdDEtPmRhdGUgPT0gJHBvc3QyLT5kYXRlKQogICAgCXsKICAgIAkJaWYoaXNzZXQoJHBvc3QxLT5wb3N0X2RhdGUpICYmIGlzc2V0KCRwb3N0Mi0+cG9zdF9kYXRlKSkKICAgIAkJewogICAgCQkJaWYoJHBvc3QxLT5wb3N0X2RhdGUgPT0gJHBvc3QyLT5wb3N0X2RhdGUpCiAgICAJCQl7CiAgICAJCQkJcmV0dXJuIDA7CiAgICAJCQl9CiAgICAJCQllbHNlIGlmKCRwb3N0MS0+cG9zdF9kYXRlID4gJHBvc3QyLT5wb3N0X2RhdGUpCiAgICAJCQl7CiAgICAJCQkJcmV0dXJuIDE7CiAgICAJCQl9CiAgICAJCQllbHNlCiAgICAJCQl7CiAgICAJCQkJcmV0dXJuIC0xOwogICAgCQkJfQogICAgCQl9CiAgICAJCQogICAgCQlyZXR1cm4gMDsKICAgIAl9CiAgICAJZWxzZSBpZigkcG9zdDEtPmRhdGUgPiAkcG9zdDItPmRhdGUpCiAgICAJewogICAgCQlyZXR1cm4gMTsKICAgIAl9CiAgICAJZWxzZQogICAgCXsKICAgIAkJcmV0dXJuIC0xOwogICAgCX0KICAgIH0KICAgIAogICAgLyoqIEBzZWUgV1BfV2lkZ2V0Ojp3aWRnZXQgKi8KICAgIGZ1bmN0aW9uIHdpZGdldCgkYXJncywgJGluc3RhbmNlKSAKICAgIHsJCiAJCSR0aGlzLT51c2VyID0gTU1fVXRpbHM6OmdldEN1cnJlbnRVc2VyKCk7CiAJCQogCQlpZihpc3NldCgkdGhpcy0+dXNlcikgJiYgJHRoaXMtPnVzZXItPmlzVmFsaWQoKSkgCiAJCXsKCSAgICAJZXh0cmFjdCgkYXJncyk7CgkKCQkgICAgJHRpdGxlID0gYXBwbHlfZmlsdGVycygnd2lkZ2V0X3RpdGxlJywgJGluc3RhbmNlWyd0aXRsZSddKTsKCQkJCgkJICAgIGVjaG8gJGJlZm9yZV93aWRnZXQ7CgkJCgkJCWlmKCR0aXRsZSkgCgkJCXsKCQkJCWVjaG8gJGJlZm9yZV90aXRsZSAuICR0aXRsZSAuICRhZnRlcl90aXRsZTsKCQkJfQoJCQkKCQkJJHRoaXMtPmFjY2Vzc2libGVQb3N0cyA9IGFycmF5KCk7CgkJCSRwb3N0c1RvRGlzcGxheSA9IGFycmF5KCk7CgkJCQoJCQlpZihpc3NldCgkaW5zdGFuY2VbJ251bWl0ZW1zJ10pICYmIGludHZhbCgkaW5zdGFuY2VbJ251bWl0ZW1zJ10pID4gMCkKCQkJewoJCQkJLy8gaWYgYWRtaW4gaXMgbG9nZ2VkIGluLCB1c2UgZGF0YSBmcm9tIHRoZSBQcmV2aWV3IFNldHRpbmdzIEJhciB0byByZXByZXNlbnQgdGhlIGN1cnJlbnQgdXNlcgoJCQkJJGlzUHJldmlldyA9IGZhbHNlOwoJCQkJCgkJCQlpZihNTV9FbXBsb3llZTo6aXNFbXBsb3llZSgpKQoJCQkJewoJCQkJCSRwcmV2aWV3U2V0dGluZ3MgPSBNTV9QcmV2aWV3OjpnZXREYXRhKCk7CgkJCQkJCQoJCQkJCWlmKCRwcmV2aWV3U2V0dGluZ3MgIT09IGZhbHNlKQoJCQkJCXsKCQkJCQkJJGlzUHJldmlldyA9IHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkvLyBnZXQgYWNjZXNzaWJsZSBwb3N0cyBmb3IgdGhlIHVzZXIncyBtZW1iZXJzaGlwIGxldmVsCgkJCQkkZGF5c0FzTWVtYmVyID0gMDsKCQkJCQoJCQkJaWYoJGlzUHJldmlldykKCQkJCXsKCQkJCQkkZGF5c0FzTWVtYmVyID0gJHByZXZpZXdTZXR0aW5ncy0+Z2V0RGF5cygpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRkYXlzQXNNZW1iZXIgPSAkdGhpcy0+dXNlci0+Z2V0RGF5c0FzTWVtYmVyKCk7CgkJCQl9CgkJCQkKCQkJCSR0aGlzLT5nZXRBY2Nlc3NpYmxlUG9zdHMoJ21lbWJlcl90eXBlJywgJHRoaXMtPnVzZXItPmdldE1lbWJlcnNoaXBJZCgpLCAkZGF5c0FzTWVtYmVyLCAkaW5zdGFuY2UpOwoJCQkJCgkJCQkvLyBnZXQgYWNjZXNzaWJsZSBwb3N0cyBmb3IgdGhlIHVzZXIncyBidW5kbGVzCgkJCQlpZigkaXNQcmV2aWV3KQoJCQkJewoJCQkJCSRidW5kbGVJZHMgPSAkcHJldmlld1NldHRpbmdzLT5nZXRCdW5kbGVzKCk7CgkJCQkJCgkJCQkJZm9yZWFjaCgkYnVuZGxlSWRzIGFzICRidW5kbGVJZCkKCQkJCQl7CgkJCQkJCWlmKGludHZhbCgkYnVuZGxlSWQpID4gMCkKCQkJCQkJewoJCQkJCQkJJHRoaXMtPmdldEFjY2Vzc2libGVQb3N0cygnYWNjZXNzX3RhZycsICRidW5kbGVJZCwgJHByZXZpZXdTZXR0aW5ncy0+Z2V0RGF5cygpLCAkaW5zdGFuY2UpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRhcHBsaWVkQnVuZGxlcyA9ICR0aGlzLT51c2VyLT5nZXRBcHBsaWVkQnVuZGxlcygpOwoJCQkJCgkJCQkJZm9yZWFjaCgkYXBwbGllZEJ1bmRsZXMgYXMgJGFwcGxpZWRCdW5kbGUpCgkJCQkJewoJCQkJCQkkdGhpcy0+Z2V0QWNjZXNzaWJsZVBvc3RzKCdhY2Nlc3NfdGFnJywgJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZUlkKCksICR0aGlzLT51c2VyLT5nZXREYXlzV2l0aEJ1bmRsZSgkYXBwbGllZEJ1bmRsZS0+Z2V0QnVuZGxlSWQoKSksICRpbnN0YW5jZSk7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkvLyBzb3J0IGFjY2Vzc2libGUgcG9zdHMgYnkgcG9zdCBkYXRlCgkJCQl1c29ydCgkdGhpcy0+YWNjZXNzaWJsZVBvc3RzLCAiTU1fRHJpcENvbnRlbnRXaWRnZXQ6OnNvcnRQb3N0cyIpOwoJCQkJCgkJCQkvLyB0aGUgcHJldmlvdXMgc29ydCBtZWNoYW5pc20gd2lsbCBvcmRlciB0aGUgY29udGVudCBiYXNlZCBvbiB0aGUgZGF0ZSBpdCBiZWNvbWVzIGF2YWlsYWJsZQoJCQkJLy8gdG8gdGhlIGN1cnJlbnQgdXNlci4gSWYgd2UncmUgbWVhbnQgdG8gZGlzcGxheSBjdXJyZW50bHkgYXZhaWxhYmxlIGNvbnRlbnQgYXMgb3Bwb3NlZCB0byAKCQkJCS8vIHVwY29taW5nIGNvbnRlbnQsIHRoZSBvcmRlciBzaG91bGQgYmUgcmV2ZXJzZWQKCQkJCWlmKGlzc2V0KCRpbnN0YW5jZVsnY29udGVudHR5cGUnXSkgJiYgJGluc3RhbmNlWydjb250ZW50dHlwZSddID09ICJjdXJyZW50IikKCQkJCXsKCQkJCQkkdGhpcy0+YWNjZXNzaWJsZVBvc3RzID0gYXJyYXlfcmV2ZXJzZSgkdGhpcy0+YWNjZXNzaWJsZVBvc3RzKTsJCgkJCQl9CgkJCQkKCQkJCS8vIGl0ZXJhdGUgb3ZlciBhY2Nlc3NpYmxlIHBvc3RzIGFuZCBmb3IgZWFjaCBwb3N0IGFuZCBjaGVjayBpZiBpdCBzaG91bGQgYmUgZGlzcGxheWVkIGFjY29yZGluZyAKCQkJCS8vIHRvIHRoZSB3aWRnZXQgY29uZmlndXJhdGlvbiBvZiBjYXRlZ29yaWVzIGFuZCBwb3N0IHR5cGUgKGkuZS4gcG9zdCBvciBwYWdlKS4gCgkJCQkkY3RyID0gMTsKCQkJCQoJCQkJaWYoaXNzZXQoJGluc3RhbmNlWydwb3N0Y2hlY2tib3gnXSkgJiYgJGluc3RhbmNlWydwb3N0Y2hlY2tib3gnXSA9PSAnMScpCgkJCQl7CgkJCQkJJGluY2x1ZGVQb3N0cyA9IHRydWU7CgkJCQkJCgkJCQkJaWYoaXNzZXQoJGluc3RhbmNlWydjYXRlZ29yeXJhZGlvJ10pICYmICAkaW5zdGFuY2VbJ2NhdGVnb3J5cmFkaW8nXSA9PSAic2VsZWN0ZWQiKQoJCQkJCXsKCQkJCQkJJGFsbG93ZWRDYXRlZ29yaWVzID0gJGluc3RhbmNlWydwb3N0Y2F0ZWdvcmllcyddOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkYWxsb3dlZENhdGVnb3JpZXMgPSBhcnJheSgpOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkaW5jbHVkZVBvc3RzID0gZmFsc2U7CgkJCQl9CgkJCQkKCQkJCWlmKGlzc2V0KCRpbnN0YW5jZVsncGFnZWNoZWNrYm94J10pICYmICRpbnN0YW5jZVsncGFnZWNoZWNrYm94J10gPT0gJzEnKSAKCQkJCXsKCQkJCQkkaW5jbHVkZVBhZ2VzID0gdHJ1ZTsJCgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGluY2x1ZGVQYWdlcyA9IGZhbHNlOwoJCQkJfQoJCQkJCgkJCQlpZihpc3NldCgkaW5zdGFuY2VbJ2N1c3RvbXBvc3RjaGVja2JveCddKSAmJiAkaW5zdGFuY2VbJ2N1c3RvbXBvc3RjaGVja2JveCddID09ICcxJykKCQkJCXsKCQkJCQkkaW5jbHVkZUN1c3RvbVBvc3RUeXBlcyA9IHRydWU7CgkJCQkJJGFsbG93ZWRDdXN0b21Qb3N0VHlwZXMgPSAkaW5zdGFuY2VbJ2N1c3RvbXBvc3R0eXBlcyddOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRpbmNsdWRlQ3VzdG9tUG9zdFR5cGVzID0gZmFsc2U7CgkJCQkJJGFsbG93ZWRDdXN0b21Qb3N0VHlwZXMgPSBhcnJheSgpOwoJCQkJfQoJCQkJCgkJCQlmb3JlYWNoKCR0aGlzLT5hY2Nlc3NpYmxlUG9zdHMgYXMgJHBvc3QpCgkJCQl7CgkJCQkJLy8gRXhpdCB0aGUgbG9vcCBvbmNlIHRoZSBudW1iZXIgb2YgaXRlbXMgcHJvY2Vzc2VkIGVxdWFscyB0aGUgbnVtYmVyIG9mIGl0ZW1zIAoJCQkJCS8vIHNldCBpbiB0aGUgd2lkZ2V0IGNvbmZpZ3VyYXRpb24uCgkJCQkJaWYoJGN0ciA+IGludHZhbCgkaW5zdGFuY2VbJ251bWl0ZW1zJ10pKQoJCQkJCXsKCQkJCQkJY29udGludWU7CgkJCQkJfQoJCQkJCQoJCQkJCSR3cFBvc3QgPSBnZXRfcG9zdCgkcG9zdC0+aWQpOwoJCQkJCQoJCQkJCS8vIGNoZWNrIGlmIHBvc3QgaXMgcHVibGlzaGVkCgkJCQkJaWYoJHdwUG9zdC0+cG9zdF9zdGF0dXMgPT0gInB1Ymxpc2giIHx8ICR3cFBvc3QtPnBvc3Rfc3RhdHVzID09ICJpbmhlcml0IikKCQkJCQl7CgkJCQkJCS8vIGNoZWNrIGlmIHRoZSBwb3N0IHR5cGUgb2YgdGhlIGN1cnJlbnQgcG9zdCBpcyBhbGxvd2VkCgkJCQkJCWlmKCgkaW5jbHVkZVBvc3RzICYmICR3cFBvc3QtPnBvc3RfdHlwZSA9PSAicG9zdCIpIHx8ICgkaW5jbHVkZVBhZ2VzICYmICR3cFBvc3QtPnBvc3RfdHlwZSA9PSAicGFnZSIpCgkJCQkJCQl8fCAoJGluY2x1ZGVDdXN0b21Qb3N0VHlwZXMgJiYgaW5fYXJyYXkoJHdwUG9zdC0+cG9zdF90eXBlLCAkYWxsb3dlZEN1c3RvbVBvc3RUeXBlcykpKQoJCQkJCQl7CgkJCQkJCQkvLyBjaGVjayBpZiB0aGUgY2F0ZWdvcnkgb2YgdGhlIGN1cnJlbnQgcG9zdCBpcyBhbGxvd2VkCgkJCQkJCQkkY2F0ZWdvcnlDaGVjayA9IHRydWU7CgkJCQkJCQkKCQkJCQkJCWlmKCR3cFBvc3QtPnBvc3RfdHlwZSA9PSAicG9zdCIgJiYgJGluY2x1ZGVQb3N0cyAmJiAkaW5zdGFuY2VbJ2NhdGVnb3J5cmFkaW8nXSA9PSAic2VsZWN0ZWQiKQoJCQkJCQkJewoJCQkJCQkJCSRjYXRlZ29yeUNoZWNrID0gZmFsc2U7CgkJCQkJCQkJCgkJCQkJCQkJJHBvc3RfY2F0ZWdvcmllcyA9IHdwX2dldF9wb3N0X2NhdGVnb3JpZXMoJHBvc3QtPmlkKTsKCQkJCQkJCQkKCQkJCQkJCQlmb3JlYWNoKCRwb3N0X2NhdGVnb3JpZXMgYXMgJGMpIAoJCQkJCQkJCXsKCQkJCQkJCQkJaWYoaW5fYXJyYXkoJGMsICRhbGxvd2VkQ2F0ZWdvcmllcykpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRjYXRlZ29yeUNoZWNrID0gdHJ1ZTsKCQkJCQkJCQkJfQkJCQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJaWYoJGNhdGVnb3J5Q2hlY2spCgkJCQkJCQl7CgkJCQkJCQkJJHBvc3QtPnRpdGxlID0gJHdwUG9zdC0+cG9zdF90aXRsZTsKCQkJCQkJCQkkcG9zdC0+cGVybWFsaW5rID0gZ2V0X3Blcm1hbGluaygkcG9zdC0+aWQpOwoJCQkJCQkJCQoJCQkJCQkJCSRjdHIrKzsKCQkJCQkJCQkKCQkJCQkJCQlhcnJheV9wdXNoKCRwb3N0c1RvRGlzcGxheSwgJHBvc3QpOwoJCQkJCQkJfQkJCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQkKCQkJCS8vIHJlbmRlciBwb3N0IGl0ZW1zCgkJCQlpZihjb3VudCgkcG9zdHNUb0Rpc3BsYXkpID4gMCkKCQkJCXsKCQkJCQllY2hvICI8dWw+CgkJCQkJIjsKCQkJCQkKCQkJCQlmb3JlYWNoKCRwb3N0c1RvRGlzcGxheSBhcyAkaXRlbSkKCQkJCQl7CgkJCQkJCSRodG1sID0gIjxsaT4iOwoJCQkJCQkKCQkJCQkJLy8gcmVuZGVyIGNvbnRlbnQgdGl0bGUgKG1ha2UgYSBsaW5rIGlmIHRoZSBkaXNwbGF5YXNsaW5rcyBwcm9wZXJ0eSBpcyBzZXQgdG8gMSkKCQkJCQkJaWYoaXNzZXQoJGluc3RhbmNlWydkaXNwbGF5YXNsaW5rcyddKSAmJiAkaW5zdGFuY2VbJ2Rpc3BsYXlhc2xpbmtzJ10gPT0gIjEiKQoJCQkJCQl7CgkJCQkJCQkkaHRtbCAuPSAiPGEgaHJlZj1cInskaXRlbS0+cGVybWFsaW5rfVwiIHRpdGxlPVwieyRpdGVtLT50aXRsZX1cIj57JGl0ZW0tPnRpdGxlfTwvYT4iOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJGh0bWwgLj0gIjxzcGFuIGNsYXNzPVwibW0tZHJpcC1jb250ZW50LWl0ZW1cIj57JGl0ZW0tPnRpdGxlfTwvc3Bhbj4iOwoJCQkJCQl9CQoJCQkJCQkKCQkJCQkJLy8gYWRkIGRhdGUgc3RyaW5nIGlmIG5lY2Vzc2FyeQoJCQkJCQlpZihpc3NldCgkaW5zdGFuY2VbJ2RhdGVjaGVja2JveCddKSAmJiAkaW5zdGFuY2VbJ2RhdGVjaGVja2JveCddID09ICcxJykKCQkJCQkJewoJCQkJCQkJJGZvcm1hdFN0ciA9IHNlbGY6OiRERkxUX0RBVEVfRk9STUFUOwoJCQkJCQkJCgkJCQkJCQlpZihpc3NldCgkaW5zdGFuY2VbJ2RhdGVmb3JtYXQnXSkpCgkJCQkJCQl7CgkJCQkJCQkJc3dpdGNoKCRpbnN0YW5jZVsnZGF0ZWZvcm1hdCddKQoJCQkJCQkJCXsKCQkJCQkJCQkJY2FzZSAibG9uZyI6CgkJCQkJCQkJCQkkZm9ybWF0U3RyID0gIk0gaiwgWSI7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCQoJCQkJCQkJCQljYXNlICJjb21tb24iOgoJCQkJCQkJCQkJJGZvcm1hdFN0ciA9ICJuL2oveSI7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCQoJCQkJCQkJCQljYXNlICJzaG9ydCI6CgkJCQkJCQkJCQkkZm9ybWF0U3RyID0gIk0galMiOwoJCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCQkKCQkJCQkJCQkJY2FzZSAiY3VzdG9tIjoKCQkJCQkJCQkJCWlmKGlzc2V0KCRpbnN0YW5jZVsnY3VzdG9tZGF0ZWZvcm1hdCddKSkKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkkZm9ybWF0U3RyID0gJGluc3RhbmNlWydjdXN0b21kYXRlZm9ybWF0J107CgkJCQkJCQkJCQl9CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCSRmb3JtYXR0ZWREYXRlID0gZGF0ZSgkZm9ybWF0U3RyLCAkaXRlbS0+ZGF0ZSk7CgkJCQkJCQkKCQkJCQkJCWlmKGlzc2V0KCRpbnN0YW5jZVsnZGF0ZXByZWZpeCddKSAmJiBzdHJwb3MoJGluc3RhbmNlWydkYXRlcHJlZml4J10sIHNlbGY6OiREQVRFX0tFWVdPUkQpKQoJCQkJCQkJewoJCQkJCQkJCSRkYXRlU3RyID0gc3RyX3JlcGxhY2Uoc2VsZjo6JERBVEVfS0VZV09SRCwgJGZvcm1hdHRlZERhdGUsICRpbnN0YW5jZVsnZGF0ZXByZWZpeCddKTsKCQkJCQkJCX0KCQkJCQkJCWVsc2UKCQkJCQkJCXsKCQkJCQkJCQkkZGF0ZVN0ciA9ICRmb3JtYXR0ZWREYXRlOwoJCQkJCQkJfQoJCQkJCQkJCgkJCQkJCQkkaHRtbCAuPSAiIDx0aW1lIGRhdGV0aW1lXCIiLmRhdGUoIlktbS1kIiwgJGl0ZW0tPmRhdGUpLiJcIj4iLiRkYXRlU3RyLiI8L3RpbWU+IjsKCQkJCQkJfQoJCQkJCQoJCQkJCQkkaHRtbCAuPSAiPC9saT4KCQkJCQkJIjsKCQkJCQkJCgkJCQkJCWVjaG8gJGh0bWw7CgkJCQkJfQoJCQkJCQoJCQkJCWVjaG8gIjwvdWw+IjsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQlpZihpc3NldCgkaW5zdGFuY2VbJ2NvbnRlbnR0eXBlJ10pICYmICRpbnN0YW5jZVsnY29udGVudHR5cGUnXSA9PSAiY3VycmVudCIpCgkJCQkJewoJCQkJCQllY2hvICI8c3BhbiBjbGFzcz1cIm1tLWRyaXAtY29udGVudC1uby1jb250ZW50XCI+Tm8gY29udGVudCBhdmFpbGFibGU8L3NwYW4+IjsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJZWNobyAiPHNwYW4gY2xhc3M9XCJtbS1kcmlwLWNvbnRlbnQtbm8tY29udGVudFwiPk5vIHVwY29taW5nIGNvbnRlbnQ8L3NwYW4+IjsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCWVjaG8gJGFmdGVyX3dpZGdldDsKIAkJfQogICAgfQp9', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(122, 'mcapi', 'Y2xhc3MgTU1fTUNBUEkgewogICAgdmFyICR2ZXJzaW9uID0gIjEuMyI7CiAgICB2YXIgJGVycm9yTWVzc2FnZTsKICAgIHZhciAkZXJyb3JDb2RlOwogICAgCiAgICAvKioKICAgICAqIENhY2hlIHRoZSBpbmZvcm1hdGlvbiBvbiB0aGUgQVBJIGxvY2F0aW9uIG9uIHRoZSBzZXJ2ZXIKICAgICAqLwogICAgdmFyICRhcGlVcmw7CiAgICAKICAgIC8qKgogICAgICogRGVmYXVsdCB0byBhIDMwMCBzZWNvbmQgdGltZW91dCBvbiBzZXJ2ZXIgY2FsbHMKICAgICAqLwogICAgdmFyICR0aW1lb3V0ID0gMzAwOyAKICAgIAogICAgLyoqCiAgICAgKiBEZWZhdWx0IHRvIGEgOEsgY2h1bmsgc2l6ZQogICAgICovCiAgICB2YXIgJGNodW5rU2l6ZSA9IDgxOTI7CiAgICAKICAgIC8qKgogICAgICogQ2FjaGUgdGhlIHVzZXIgYXBpX2tleSBzbyB3ZSBvbmx5IGhhdmUgdG8gbG9nIGluIG9uY2UgcGVyIGNsaWVudCBpbnN0YW50aWF0aW9uCiAgICAgKi8KICAgIHZhciAkYXBpX2tleTsKCiAgICAvKioKICAgICAqIENhY2hlIHRoZSB1c2VyIGFwaV9rZXkgc28gd2Ugb25seSBoYXZlIHRvIGxvZyBpbiBvbmNlIHBlciBjbGllbnQgaW5zdGFudGlhdGlvbgogICAgICovCiAgICB2YXIgJHNlY3VyZSA9IGZhbHNlOwogICAgCiAgICAvKioKICAgICAqIENvbm5lY3QgdG8gdGhlIE1haWxDaGltcCBBUEkgZm9yIGEgZ2l2ZW4gbGlzdC4KICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkYXBpa2V5IFlvdXIgTWFpbENoaW1wIGFwaWtleQogICAgICogQHBhcmFtIHN0cmluZyAkc2VjdXJlIFdoZXRoZXIgb3Igbm90IHRoaXMgc2hvdWxkIHVzZSBhIHNlY3VyZSBjb25uZWN0aW9uCiAgICAgKi8KICAgIGZ1bmN0aW9uIE1DQVBJKCRhcGlrZXksICRzZWN1cmU9ZmFsc2UpIHsKICAgICAgICAkdGhpcy0+c2VjdXJlID0gJHNlY3VyZTsKICAgICAgICAkdGhpcy0+YXBpVXJsID0gcGFyc2VfdXJsKCJodHRwOi8vYXBpLm1haWxjaGltcC5jb20vIiAuICR0aGlzLT52ZXJzaW9uIC4gIi8/b3V0cHV0PXBocCIpOwogICAgICAgICR0aGlzLT5hcGlfa2V5ID0gJGFwaWtleTsKICAgIH0KICAgIGZ1bmN0aW9uIHNldFRpbWVvdXQoJHNlY29uZHMpewogICAgICAgIGlmIChpc19pbnQoJHNlY29uZHMpKXsKICAgICAgICAgICAgJHRoaXMtPnRpbWVvdXQgPSAkc2Vjb25kczsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQogICAgZnVuY3Rpb24gZ2V0VGltZW91dCgpewogICAgICAgIHJldHVybiAkdGhpcy0+dGltZW91dDsKICAgIH0KICAgIGZ1bmN0aW9uIHVzZVNlY3VyZSgkdmFsKXsKICAgICAgICBpZiAoJHZhbD09PXRydWUpewogICAgICAgICAgICAkdGhpcy0+c2VjdXJlID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkdGhpcy0+c2VjdXJlID0gZmFsc2U7CiAgICAgICAgfQogICAgfQogICAgCiAgICAvKioKICAgICAqIFVuc2NoZWR1bGUgYSBjYW1wYWlnbiB0aGF0IGlzIHNjaGVkdWxlZCB0byBiZSBzZW50IGluIHRoZSBmdXR1cmUKICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfY2FtcGFpZ25VbnNjaGVkdWxlLnBocAogICAgICogQGV4YW1wbGUgeG1sLXJwY19jYW1wYWlnblVuc2NoZWR1bGUucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBpZCBvZiB0aGUgY2FtcGFpZ24gdG8gdW5zY2hlZHVsZQogICAgICogQHJldHVybiBib29sZWFuIHRydWUgb24gc3VjY2VzcwogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnblVuc2NoZWR1bGUoJGNpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduVW5zY2hlZHVsZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogU2NoZWR1bGUgYSBjYW1wYWlnbiB0byBiZSBzZW50IGluIHRoZSBmdXR1cmUKICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfY2FtcGFpZ25TY2hlZHVsZS5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfY2FtcGFpZ25TY2hlZHVsZS5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGlkIG9mIHRoZSBjYW1wYWlnbiB0byBzY2hlZHVsZQogICAgICogQHBhcmFtIHN0cmluZyAkc2NoZWR1bGVfdGltZSB0aGUgdGltZSB0byBzY2hlZHVsZSB0aGUgY2FtcGFpZ24uIEZvciBBL0IgU3BsaXQgInNjaGVkdWxlIiBjYW1wYWlnbnMsIHRoZSB0aW1lIGZvciBHcm91cCBBIC0gaW4gWVlZWS1NTS1ERCBISDpJSTpTUyBmb3JtYXQgaW4gPHN0cm9uZz5HTVQ8L3N0cm9uZz4KICAgICAqIEBwYXJhbSBzdHJpbmcgJHNjaGVkdWxlX3RpbWVfYiBvcHRpb25hbCAtdGhlIHRpbWUgdG8gc2NoZWR1bGUgR3JvdXAgQiBvZiBhbiBBL0IgU3BsaXQgInNjaGVkdWxlIiBjYW1wYWlnbiAtIGluIFlZWVktTU0tREQgSEg6SUk6U1MgZm9ybWF0IGluIDxzdHJvbmc+R01UPC9zdHJvbmc+CiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvbiBzdWNjZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduU2NoZWR1bGUoJGNpZCwgJHNjaGVkdWxlX3RpbWUsICRzY2hlZHVsZV90aW1lX2I9TlVMTCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICAkcGFyYW1zWyJzY2hlZHVsZV90aW1lIl0gPSAkc2NoZWR1bGVfdGltZTsKICAgICAgICAkcGFyYW1zWyJzY2hlZHVsZV90aW1lX2IiXSA9ICRzY2hlZHVsZV90aW1lX2I7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnblNjaGVkdWxlIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXN1bWUgc2VuZGluZyBhbiBBdXRvUmVzcG9uZGVyIG9yIFJTUyBjYW1wYWlnbgogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBSZWxhdGVkCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBpZCBvZiB0aGUgY2FtcGFpZ24gdG8gcGF1c2UKICAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIG9uIHN1Y2Nlc3MKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25SZXN1bWUoJGNpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduUmVzdW1lIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBQYXVzZSBhbiBBdXRvUmVzcG9uZGVyIG9yUlNTIGNhbXBhaWduIGZyb20gc2VuZGluZwogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBSZWxhdGVkCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBpZCBvZiB0aGUgY2FtcGFpZ24gdG8gcGF1c2UKICAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIG9uIHN1Y2Nlc3MKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25QYXVzZSgkY2lkKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiY2FtcGFpZ25QYXVzZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogU2VuZCBhIGdpdmVuIGNhbXBhaWduIGltbWVkaWF0ZWx5LiBGb3IgUlNTIGNhbXBhaWducywgdGhpcyB3aWxsICJzdGFydCIgdGhlbS4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2NhbXBhaWduU2VuZE5vdy5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfY2FtcGFpZ25TZW5kTm93LnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgaWQgb2YgdGhlIGNhbXBhaWduIHRvIHNlbmQKICAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIG9uIHN1Y2Nlc3MKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25TZW5kTm93KCRjaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnblNlbmROb3ciLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFNlbmQgYSB0ZXN0IG9mIHRoaXMgY2FtcGFpZ24gdG8gdGhlIHByb3ZpZGVkIGVtYWlsIGFkZHJlc3MKICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2NhbXBhaWduU2VuZFRlc3QucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2NhbXBhaWduU2VuZFRlc3QucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBpZCBvZiB0aGUgY2FtcGFpZ24gdG8gdGVzdAogICAgICogQHBhcmFtIGFycmF5ICR0ZXN0X2VtYWlscyBhbiBhcnJheSBvZiBlbWFpbCBhZGRyZXNzIHRvIHJlY2VpdmUgdGhlIHRlc3QgbWVzc2FnZQogICAgICogQHBhcmFtIHN0cmluZyAkc2VuZF90eXBlIG9wdGlvbmFsIGJ5IGRlZmF1bHQgKG51bGwpIGJvdGggZm9ybWF0cyBhcmUgc2VudCAtICJodG1sIiBvciAidGV4dCIgc2VuZCBqdXN0IHRoYXQgZm9ybWF0CiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvbiBzdWNjZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduU2VuZFRlc3QoJGNpZCwgJHRlc3RfZW1haWxzPWFycmF5ICgKKSwgJHNlbmRfdHlwZT1OVUxMKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInRlc3RfZW1haWxzIl0gPSAkdGVzdF9lbWFpbHM7CiAgICAgICAgJHBhcmFtc1sic2VuZF90eXBlIl0gPSAkc2VuZF90eXBlOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiY2FtcGFpZ25TZW5kVGVzdCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogQWxsb3dzIG9uZSB0byB0ZXN0IHRoZWlyIHNlZ21lbnRhdGlvbiBydWxlcyBiZWZvcmUgY3JlYXRpbmcgYSBjYW1wYWlnbiB1c2luZyB0aGVtCiAgICAgKgogICAgICogQHNlY3Rpb24gQ2FtcGFpZ24gIFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIG1jYXBpX2NhbXBhaWduU2VnbWVudFRlc3QucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2NhbXBhaWduU2VnbWVudFRlc3QucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkbGlzdF9pZCB0aGUgbGlzdCB0byB0ZXN0IHNlZ21lbnRhdGlvbiBvbiAtIGdldCBsaXN0cyB1c2luZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnMgd2l0aCAyIGtleXM6ICAKICAgICAgICAgICAgIHN0cmluZyAibWF0Y2giIGNvbnRyb2xzIHdoZXRoZXIgdG8gdXNlIEFORCBvciBPUiB3aGVuIGFwcGx5aW5nIHlvdXIgb3B0aW9ucyAtIGV4cGVjdHMgIjxzdHJvbmc+YW55PC9zdHJvbmc+IiAoZm9yIE9SKSBvciAiPHN0cm9uZz5hbGw8L3N0cm9uZz4iIChmb3IgQU5EKQogICAgICAgICAgICAgYXJyYXkgImNvbmRpdGlvbnMiIC0gdXAgdG8gMTAgZGlmZmVyZW50IGNyaXRlcmlhIHRvIGFwcGx5IHdoaWxlIHNlZ21lbnRpbmcuIEVhY2ggY3JpdGVyaWEgcm93IG11c3QgY29udGFpbiAzIGtleXMgLSAiPHN0cm9uZz5maWVsZDwvc3Ryb25nPiIsICI8c3Ryb25nPm9wPC9zdHJvbmc+IiwgYW5kICI8c3Ryb25nPnZhbHVlPC9zdHJvbmc+IiAtIGFuZCBwb3NzaWJseSBhIGZvdXJ0aCwgIjxzdHJvbmc+ZXh0cmE8L3N0cm9uZz4iLCBiYXNlZCBvbiB0aGVzZSBkZWZpbml0aW9uczoKICAgIAogICAgICAgICAgICBGaWVsZCA9ICI8c3Ryb25nPmRhdGU8L3N0cm9uZz4iIDogU2VsZWN0IGJhc2VkIG9uIHNpZ251cCBkYXRlCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9uKTogPHN0cm9uZz5lcTwvc3Ryb25nPiAoaXMpIC8gPHN0cm9uZz5ndDwvc3Ryb25nPiAoYWZ0ZXIpIC8gPHN0cm9uZz5sdDwvc3Ryb25nPiAoYmVmb3JlKQogICAgICAgICAgICAgICAgVmFsaWQgVmFsdWVzOiAKICAgICAgICAgICAgICAgIHN0cmluZyBsYXN0X2NhbXBhaWduX3NlbnQgIHVzZXMgdGhlIGRhdGUgb2YgdGhlIGxhc3QgY2FtcGFpZ24gc2VudAogICAgICAgICAgICAgICAgc3RyaW5nIGNhbXBhaWduX2lkIC0gdXNlcyB0aGUgc2VuZCBkYXRlIG9mIHRoZSBjYW1wYWlnbiB0aGF0IGNhcnJpZXJzIHRoZSBJZCBzdWJtaXR0ZWQgLSBzZWUgY2FtcGFpZ25zKCkKICAgICAgICAgICAgICAgIHN0cmluZyBZWVlZLU1NLUREIC0gYW55IGRhdGUgaW4gdGhlIGZvcm0gb2YgWVlZWS1NTS1ERCAtIDxlbT5ub3RlOjwvZW0+IGFueXRoaW5nIHRoYXQgYXBwZWFycyB0byBzdGFydCB3aXRoIFlZWVkgd2lsbCBiZSB0cmVhdGVkIGFzIGEgZGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICBGaWVsZCA9ICI8c3Ryb25nPmludGVyZXN0cy1YPC9zdHJvbmc+Ijogd2hlcmUgWCBpcyB0aGUgR3JvdXBpbmcgSWQgZnJvbSBsaXN0SW50ZXJlc3RHcm91cGluZ3MoKQogICAgICAgICAgICAgICAgVmFsaWQgT3AoZXJhdGlvbnMpOiA8c3Ryb25nPm9uZTwvc3Ryb25nPiAvIDxzdHJvbmc+bm9uZTwvc3Ryb25nPiAvIDxzdHJvbmc+YWxsPC9zdHJvbmc+IAogICAgICAgICAgICAgICAgVmFsaWQgVmFsdWVzOiBhIGNvbW1hIGRlbGltaXRlZCBvZiBpbnRlcmVzdCBncm91cHMgZm9yIHRoZSBsaXN0IC0gc2VlIGxpc3RJbnRlcmVzdEdyb3VwaW5ncygpCiAgICAgICAgCiAgICAgICAgICAgIEZpZWxkID0gIjxzdHJvbmc+YWltPC9zdHJvbmc+IgogICAgICAgICAgICAgICAgVmFsaWQgT3AoZXJhdGlvbnMpOiA8c3Ryb25nPm9wZW48L3N0cm9uZz4gLyA8c3Ryb25nPm5vb3Blbjwvc3Ryb25nPiAvIDxzdHJvbmc+Y2xpY2s8L3N0cm9uZz4gLyA8c3Ryb25nPm5vY2xpY2s8L3N0cm9uZz4KICAgICAgICAgICAgICAgIFZhbGlkIFZhbHVlczogIjxzdHJvbmc+YW55PC9zdHJvbmc+IiBvciBhIHZhbGlkIEFJTS1lbmFibGVkIENhbXBhaWduIHRoYXQgaGFzIGJlZW4gc2VudAogICAgCiAgICAgICAgICAgIEZpZWxkID0gIjxzdHJvbmc+cmF0aW5nPC9zdHJvbmc+IiA6IGFsbG93cyBtYXRjaGluZyBiYXNlZCBvbiBsaXN0IG1lbWJlciByYXRpbmdzCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9ucyk6ICA8c3Ryb25nPmVxPC9zdHJvbmc+ICg9KSAvIDxzdHJvbmc+bmU8L3N0cm9uZz4gKCE9KSAvIDxzdHJvbmc+Z3Q8L3N0cm9uZz4gKCZndDspIC8gPHN0cm9uZz5sdDwvc3Ryb25nPiAoJmx0OykKICAgICAgICAgICAgICAgIFZhbGlkIFZhbHVlczogYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1CiAgICAKICAgICAgICAgICAgRmllbGQgPSAiPHN0cm9uZz5lY29tbV9wcm9kPC9zdHJvbmc+IiBvciAiPHN0cm9uZz5lY29tbV9wcm9kPC9zdHJvbmc+IjogYWxsb3dzIG1hdGNoaW5nIHByb2R1Y3QgYW5kIGNhdGVnb3J5IG5hbWVzIGZyb20gcHVyY2hhc2VzCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9ucyk6IAogICAgICAgICAgICAgICAgIDxzdHJvbmc+ZXE8L3N0cm9uZz4gKD0pIC8gPHN0cm9uZz5uZTwvc3Ryb25nPiAoIT0pIC8gPHN0cm9uZz5ndDwvc3Ryb25nPiAoJmd0OykgLyA8c3Ryb25nPmx0PC9zdHJvbmc+ICgmbHQ7KSAvIDxzdHJvbmc+bGlrZTwvc3Ryb25nPiAobGlrZSAnJWJsYWglJykgLyA8c3Ryb25nPm5saWtlPC9zdHJvbmc+IChub3QgbGlrZSAnJWJsYWglJykgLyA8c3Ryb25nPnN0YXJ0czwvc3Ryb25nPiAobGlrZSAnYmxhaCUnKSAvIDxzdHJvbmc+ZW5kczwvc3Ryb25nPiAobGlrZSAnJWJsYWgnKQogICAgICAgICAgICAgICAgVmFsaWQgVmFsdWVzOiBhbnkgc3RyaW5nCiAgICAKICAgICAgICAgICAgRmllbGQgPSAiPHN0cm9uZz5lY29tbV9zcGVudF9vbmU8L3N0cm9uZz4iIG9yICI8c3Ryb25nPmVjb21tX3NwZW50X2FsbDwvc3Ryb25nPiIgOiBhbGxvd3MgbWF0Y2hpbmcgcHVyY2hhc2UgYW1vdW50cyBvbiBhIHNpbmdsZSBvcmRlciBvciBhbGwgb3JkZXJzCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9ucyk6IDxzdHJvbmc+Z3Q8L3N0cm9uZz4gKCZndDspIC8gPHN0cm9uZz5sdDwvc3Ryb25nPiAoJmx0OykKICAgICAgICAgICAgICAgIFZhbGlkIFZhbHVlczogYSBudW1iZXIKICAgIAogICAgICAgICAgICBGaWVsZCA9ICI8c3Ryb25nPmVjb21tX2RhdGU8L3N0cm9uZz4iIDogYWxsb3cgbWF0Y2hpbmcgYmFzZWQgb24gb3JkZXIgZGF0ZXMKICAgICAgICAgICAgICAgIFZhbGlkIE9wKGVyYXRpb24pOiA8c3Ryb25nPmVxPC9zdHJvbmc+IChpcykgLyA8c3Ryb25nPmd0PC9zdHJvbmc+IChhZnRlcikgLyA8c3Ryb25nPmx0PC9zdHJvbmc+IChiZWZvcmUpCiAgICAgICAgICAgICAgICBWYWxpZCBWYWx1ZXM6IAogICAgICAgICAgICAgICAgc3RyaW5nIFlZWVktTU0tREQgLSBhbnkgZGF0ZSBpbiB0aGUgZm9ybSBvZiBZWVlZLU1NLURECiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgRmllbGQgPSAiPHN0cm9uZz5zb2NpYWxfZ2VuZGVyPC9zdHJvbmc+IiA6IGFsbG93cyBtYXRjaGluZyBhZ2FpbnN0IHRoZSBnZW5kZXIgYWNxdWlyZWQgZnJvbSBTb2NpYWxQcm8KICAgICAgICAgICAgICAgIFZhbGlkIE9wKGVyYXRpb24pOiA8c3Ryb25nPmVxPC9zdHJvbmc+IChpcykgLyA8c3Ryb25nPm5lPC9zdHJvbmc+IChpcyBub3QpCiAgICAgICAgICAgICAgICBWYWxpZCBWYWx1ZXM6IG1hbGUsIGZlbWFsZQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIEZpZWxkID0gIjxzdHJvbmc+c29jaWFsX2FnZTwvc3Ryb25nPiIgOiBhbGxvd3MgbWF0Y2hpbmcgYWdhaW5zdCB0aGUgYWdlIGFjcXVpcmVkIGZyb20gU29jaWFsUHJvCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9ucyk6ICA8c3Ryb25nPmVxPC9zdHJvbmc+ICg9KSAvIDxzdHJvbmc+bmU8L3N0cm9uZz4gKCE9KSAvIDxzdHJvbmc+Z3Q8L3N0cm9uZz4gKCZndDspIC8gPHN0cm9uZz5sdDwvc3Ryb25nPiAoJmx0OykKICAgICAgICAgICAgICAgIFZhbGlkIFZhbHVlczogYW55IG51bWJlcgogICAgCiAgICAgICAgICAgIEZpZWxkID0gIjxzdHJvbmc+c29jaWFsX2luZmx1ZW5jZTwvc3Ryb25nPiIgOiBhbGxvd3MgbWF0Y2hpbmcgYWdhaW5zdCB0aGUgaW5mbHVlbmNlIGFjcXVpcmVkIGZyb20gU29jaWFsUHJvCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9ucyk6ICA8c3Ryb25nPmVxPC9zdHJvbmc+ICg9KSAvIDxzdHJvbmc+bmU8L3N0cm9uZz4gKCE9KSAvIDxzdHJvbmc+Z3Q8L3N0cm9uZz4gKCZndDspIC8gPHN0cm9uZz5sdDwvc3Ryb25nPiAoJmx0OykKICAgICAgICAgICAgICAgIFZhbGlkIFZhbHVlczogYSBudW1iZXIgYmV0d2VlbiAwIGFuZCA1CiAgICAKICAgICAgICAgICAgRmllbGQgPSAiPHN0cm9uZz5zb2NpYWxfbmV0d29yazwvc3Ryb25nPiIgOiAKICAgICAgICAgICAgICAgIFZhbGlkIE9wKGVyYXRpb25zKTogIDxzdHJvbmc+bWVtYmVyPC9zdHJvbmc+IChpcyBhIG1lbWJlciBvZikgLyA8c3Ryb25nPm5vdG1lbWJlcjwvc3Ryb25nPiAoaXMgbm90IGEgbWVtYmVyIG9mKQogICAgICAgICAgICAgICAgVmFsaWQgVmFsdWVzOiB0d2l0dGVyLCBmYWNlYm9vaywgbXlzcGFjZSwgbGlua2VkaW4sIGZsaWNrcgogICAgCiAgICAgICAgICAgIEZpZWxkID0gIjxzdHJvbmc+c3RhdGljX3NlZ21lbnQ8L3N0cm9uZz4iIDogCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9uKTogPHN0cm9uZz5lcTwvc3Ryb25nPiAoaXMgaW4pIC8gPHN0cm9uZz5uZTwvc3Ryb25nPiAoaXMgbm90IGluKQogICAgICAgICAgICAgICAgVmFsaWQgVmFsdWVzOiBhbiBpbnQgLSBnZXQgZnJvbSBsaXN0U3RhdGljU2VnbWVudHMoKQogICAgCiAgICAgICAgICAgIEZpZWxkID0gQW4gPHN0cm9uZz5BZGRyZXNzPC9zdHJvbmc+IE1lcmdlIFZhci4gVXNlIDxzdHJvbmc+TWVyZ2UwLU1lcmdlMzA8L3N0cm9uZz4gb3IgdGhlIDxzdHJvbmc+Q3VzdG9tIFRhZzwvc3Ryb25nPiB5b3UndmUgc2V0dXAgZm9yIHlvdXIgbWVyZ2UgZmllbGQgLSBzZWUgbGlzdE1lcmdlVmFycygpLiBOb3RlLCBBZGRyZXNzIGZpZWxkcyBjYW4gc3RpbGwgYmUgdXNlZCB3aXRoIHRoZSBkZWZhdWx0IG9wZXJhdGlvbnMgYmVsb3cgLSB0aGlzIHNlY3Rpb24gaXMgYnJva2VuIG91dCBzb2xlbHkgdG8gaGlnaGxpZ2h0IHRoZSBkaWZmZXJlbmNlcyBpbiB1c2luZyB0aGUgZ2VvbG9jYXRpb24gcm91dGluZXMuCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9ucyk6IDxzdHJvbmc+Z2VvaW48L3N0cm9uZz4KICAgICAgICAgICAgICAgIFZhbGlkIFZhbHVlczogVGhlIG51bWJlciBvZiBtaWxlcyBhbiBhZGRyZXNzIHNob3VsZCBiZSB3aXRoaW4KICAgICAgICAgICAgICAgIEV4dHJhIFZhbHVlOiBUaGUgWmlwIENvZGUgdG8gYmUgdXNlZCBhcyB0aGUgY2VudGVyIHBvaW50CiAgICAgICAgCiAgICAgICAgICAgIERlZmF1bHQgRmllbGQgPSBBIE1lcmdlIFZhci4gVXNlIDxzdHJvbmc+TWVyZ2UwLU1lcmdlMzA8L3N0cm9uZz4gb3IgdGhlIDxzdHJvbmc+Q3VzdG9tIFRhZzwvc3Ryb25nPiB5b3UndmUgc2V0dXAgZm9yIHlvdXIgbWVyZ2UgZmllbGQgLSBzZWUgbGlzdE1lcmdlVmFycygpCiAgICAgICAgICAgICAgICBWYWxpZCBPcChlcmF0aW9ucyk6IAogICAgICAgICAgICAgICAgIDxzdHJvbmc+ZXE8L3N0cm9uZz4gKD0pIC8gPHN0cm9uZz5uZTwvc3Ryb25nPiAoIT0pIC8gPHN0cm9uZz5ndDwvc3Ryb25nPiAoJmd0OykgLyA8c3Ryb25nPmx0PC9zdHJvbmc+ICgmbHQ7KSAvIDxzdHJvbmc+bGlrZTwvc3Ryb25nPiAobGlrZSAnJWJsYWglJykgLyA8c3Ryb25nPm5saWtlPC9zdHJvbmc+IChub3QgbGlrZSAnJWJsYWglJykgLyA8c3Ryb25nPnN0YXJ0czwvc3Ryb25nPiAobGlrZSAnYmxhaCUnKSAvIDxzdHJvbmc+ZW5kczwvc3Ryb25nPiAobGlrZSAnJWJsYWgnKQogICAgICAgICAgICAgICAgVmFsaWQgVmFsdWVzOiBhbnkgc3RyaW5nCiAgICAgKiBAcmV0dXJuIGludCB0b3RhbCBUaGUgdG90YWwgbnVtYmVyIG9mIHN1YnNjcmliZXJzIG1hdGNoaW5nIHlvdXIgc2VnbWVudGF0aW9uIG9wdGlvbnMKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25TZWdtZW50VGVzdCgkbGlzdF9pZCwgJG9wdGlvbnMpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJsaXN0X2lkIl0gPSAkbGlzdF9pZDsKICAgICAgICAkcGFyYW1zWyJvcHRpb25zIl0gPSAkb3B0aW9uczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduU2VnbWVudFRlc3QiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIENyZWF0ZSBhIG5ldyBkcmFmdCBjYW1wYWlnbiB0byBzZW5kLiBZb3UgPHN0cm9uZz5jYW4gbm90PC9zdHJvbmc+IGhhdmUgbW9yZSB0aGFuIDMyLDAwMCBjYW1wYWlnbnMgaW4geW91ciBhY2NvdW50LgogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9jYW1wYWlnbkNyZWF0ZS5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfY2FtcGFpZ25DcmVhdGUucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2NhbXBhaWduQ3JlYXRlQUJTcGxpdC5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfY2FtcGFpZ25DcmVhdGVSc3MucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkdHlwZSB0aGUgQ2FtcGFpZ24gVHlwZSB0byBjcmVhdGUgLSBvbmUgb2YgInJlZ3VsYXIiLCAicGxhaW50ZXh0IiwgImFic3BsaXQiLCAicnNzIiwgInRyYW5zIiwgImF1dG8iCiAgICAgKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnMgYSBoYXNoIG9mIHRoZSBzdGFuZGFyZCBvcHRpb25zIGZvciB0aGlzIGNhbXBhaWduIDoKICAgICAgICAgICAgc3RyaW5nIGxpc3RfaWQgdGhlIGxpc3QgdG8gc2VuZCB0aGlzIGNhbXBhaWduIHRvLSBnZXQgbGlzdHMgdXNpbmcgbGlzdHMoKQogICAgICAgICAgICBzdHJpbmcgc3ViamVjdCB0aGUgc3ViamVjdCBsaW5lIGZvciB5b3VyIGNhbXBhaWduIG1lc3NhZ2UKICAgICAgICAgICAgc3RyaW5nIGZyb21fZW1haWwgdGhlIEZyb206IGVtYWlsIGFkZHJlc3MgZm9yIHlvdXIgY2FtcGFpZ24gbWVzc2FnZQogICAgICAgICAgICBzdHJpbmcgZnJvbV9uYW1lIHRoZSBGcm9tOiBuYW1lIGZvciB5b3VyIGNhbXBhaWduIG1lc3NhZ2UgKG5vdCBhbiBlbWFpbCBhZGRyZXNzKQogICAgICAgICAgICBzdHJpbmcgdG9fbmFtZSB0aGUgVG86IG5hbWUgcmVjaXBpZW50cyB3aWxsIHNlZSAobm90IGVtYWlsIGFkZHJlc3MpCiAgICAgICAgICAgIGludCB0ZW1wbGF0ZV9pZCBvcHRpb25hbCAtIHVzZSB0aGlzIHVzZXItY3JlYXRlZCB0ZW1wbGF0ZSB0byBnZW5lcmF0ZSB0aGUgSFRNTCBjb250ZW50IG9mIHRoZSBjYW1wYWlnbiAodGFrZXMgcHJlY2VuZGVuY2Ugb3ZlciBvdGhlciB0ZW1wbGF0ZSBvcHRpb25zKQogICAgICAgICAgICBpbnQgZ2FsbGVyeV90ZW1wbGF0ZV9pZCBvcHRpb25hbCAtIHVzZSBhIHRlbXBsYXRlIGZyb20gdGhlIHB1YmxpYyBnYWxsZXJ5IHRvIGdlbmVyYXRlIHRoZSBIVE1MIGNvbnRlbnQgb2YgdGhlIGNhbXBhaWduICh0YWtlcyBwcmVjZW5kZW5jZSBvdmVyIGJhc2UgdGVtcGxhdGUgb3B0aW9ucykKICAgICAgICAgICAgaW50IGJhc2VfdGVtcGxhdGVfaWQgb3B0aW9uYWwgLSB1c2UgdGhpcyBhIGJhc2Uvc3RhcnQtZnJvbS1zY3JhdGNoIHRlbXBsYXRlIHRvIGdlbmVyYXRlIHRoZSBIVE1MIGNvbnRlbnQgb2YgdGhlIGNhbXBhaWduCiAgICAgICAgICAgIGludCBmb2xkZXJfaWQgb3B0aW9uYWwgLSBhdXRvbWF0aWNhbGx5IGZpbGUgdGhlIG5ldyBjYW1wYWlnbiBpbiB0aGUgZm9sZGVyX2lkIHBhc3NlZC4gR2V0IHVzaW5nIGZvbGRlcnMoKSAtIG5vdGUgdGhhdCBDYW1wYWlnbnMgYW5kIEF1dG9yZXNwb25kZXJzIGhhdmUgc2VwYXJhdGUgZm9sZGVyIHNldHVwc24gCiAgICAgICAgICAgIGFycmF5IHRyYWNraW5nIG9wdGlvbmFsIC0gc2V0IHdoaWNoIHJlY2lwaWVudCBhY3Rpb25zIHdpbGwgYmUgdHJhY2tlZCwgYXMgYSBzdHJ1Y3Qgb2YgYm9vbGVhbiB2YWx1ZXMgd2l0aCB0aGUgZm9sbG93aW5nIGtleXM6ICJvcGVucyIsICJodG1sX2NsaWNrcyIsIGFuZCAidGV4dF9jbGlja3MiLiAgQnkgZGVmYXVsdCwgb3BlbnMgYW5kIEhUTUwgY2xpY2tzIHdpbGwgYmUgdHJhY2tlZC4gQ2xpY2sgdHJhY2tpbmcgY2FuIG5vdCBiZSBkaXNhYmxlZCBmb3IgRnJlZSBhY2NvdW50cy4KICAgICAgICAgICAgc3RyaW5nIHRpdGxlIG9wdGlvbmFsIC0gYW4gaW50ZXJuYWwgbmFtZSB0byB1c2UgZm9yIHRoaXMgY2FtcGFpZ24uICBCeSBkZWZhdWx0LCB0aGUgY2FtcGFpZ24gc3ViamVjdCB3aWxsIGJlIHVzZWQuCiAgICAgICAgICAgIGJvb2xlYW4gYXV0aGVudGljYXRlIG9wdGlvbmFsIC0gc2V0IHRvIHRydWUgdG8gZW5hYmxlIFNlbmRlcklELCBEb21haW5LZXlzLCBhbmQgREtJTSBhdXRoZW50aWNhdGlvbiwgZGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgICAgICAgIGFycmF5IGFuYWx5dGljcyBvcHRpb25hbCAtIGlmIHByb3ZpZGVkLCB1c2UgYSBzdHJ1Y3Qgd2l0aCAic2VydmljZSB0eXBlIiBhcyBhIGtleSBhbmQgdGhlICJzZXJ2aWNlIHRhZyIgYXMgYSB2YWx1ZS4gRm9yIEdvb2dsZSwgdGhpcyBzaG91bGQgYmUgImdvb2dsZSI9PiJ5b3VyX2dvb2dsZV9hbmFseXRpY3Nfa2V5X2hlcmUiLiBOb3RlIHRoYXQgb25seSAiZ29vZ2xlIiBpcyBjdXJyZW50bHkgc3VwcG9ydGVkIC0gYSBHb29nbGUgQW5hbHl0aWNzIHRhZ3Mgd2lsbCBiZSBhZGRlZCB0byBhbGwgbGlua3MgaW4gdGhlIGNhbXBhaWduIHdpdGggdGhpcyBzdHJpbmcgYXR0YWNoZWQuIE90aGVycyBtYXkgYmUgYWRkZWQgaW4gdGhlIGZ1dHVyZQogICAgICAgICAgICBib29sZWFuIGF1dG9fZm9vdGVyIG9wdGlvbmFsIFdoZXRoZXIgb3Igbm90IHdlIHNob3VsZCBhdXRvLWdlbmVyYXRlIHRoZSBmb290ZXIgZm9yIHlvdXIgY29udGVudC4gTW9zdGx5IHVzZWZ1bCBmb3IgY29udGVudCBmcm9tIFVSTHMgb3IgSW1wb3J0cwogICAgICAgICAgICBib29sZWFuIGlubGluZV9jc3Mgb3B0aW9uYWwgV2hldGhlciBvciBub3QgY3NzIHNob3VsZCBiZSBhdXRvbWF0aWNhbGx5IGlubGluZWQgd2hlbiB0aGlzIGNhbXBhaWduIGlzIHNlbnQsIGRlZmF1bHRzIHRvIGZhbHNlLgogICAgICAgICAgICBib29sZWFuIGdlbmVyYXRlX3RleHQgb3B0aW9uYWwgV2hldGhlciBvZiBub3QgdG8gYXV0by1nZW5lcmF0ZSB5b3VyIFRleHQgY29udGVudCBmcm9tIHRoZSBIVE1MIGNvbnRlbnQuIE5vdGUgdGhhdCB0aGlzIHdpbGwgYmUgaWdub3JlZCBpZiB0aGUgVGV4dCBwYXJ0IG9mIHRoZSBjb250ZW50IHBhc3NlZCBpcyBub3QgZW1wdHksIGRlZmF1bHRzIHRvIGZhbHNlLgogICAgICAgICAgICBib29sZWFuIGF1dG9fdHdlZXQgb3B0aW9uYWwgSWYgc2V0LCB0aGlzIGNhbXBhaWduIHdpbGwgYmUgYXV0by10d2VldGVkIHdoZW4gaXQgaXMgc2VudCAtIGRlZmF1bHRzIHRvIGZhbHNlLiBOb3RlIHRoYXQgaWYgYSBUd2l0dGVyIGFjY291bnQgaXNuJ3QgbGlua2VkLCB0aGlzIHdpbGwgYmUgc2lsZW50bHkgaWdub3JlZC4KICAgICAgICAgICAgYm9vbGVhbiB0aW1ld2FycCBvcHRpb25hbCBJZiBzZXQsIHRoaXMgY2FtcGFpZ24gbXVzdCBiZSBzY2hlZHVsZWQgMjQgaG91cnMgaW4gYWR2YW5jZSBvZiBzZW5kaW5nIC0gZGVmYXVsdCB0byBmYWxzZS4gT25seSB2YWxpZCBmb3IgInJlZ3VsYXIiIGNhbXBhaWducyBhbmQgImFic3BsaXQiIGNhbXBhaWducyB0aGF0IHNwbGl0IG9uIHNjaGVkdWxlX3RpbWUuCiAgICAgICAgICAgIGJvb2xlYW4gZWNvbW0zNjAgb3B0aW9uYWwgSWYgc2V0LCBvdXIgPGEgaHJlZj0iaHR0cDovL3d3dy5tYWlsY2hpbXAuY29tL2Jsb2cvZWNvbW1lcmNlLXRyYWNraW5nLXBsdWdpbi8iIHRhcmdldD0iX2JsYW5rIj5FY29tbWVyY2UzNjAgdHJhY2tpbmc8L2E+IHdpbGwgYmUgZW5hYmxlZCBmb3IgbGlua3MgaW4gdGhlIGNhbXBhaWduCiAgICAKICAgICogQHBhcmFtIGFycmF5ICRjb250ZW50IHRoZSBjb250ZW50IGZvciB0aGlzIGNhbXBhaWduIC0gdXNlIGEgc3RydWN0IHdpdGggdGhlIGZvbGxvd2luZyBrZXlzOiAKICAgICAgICAgICAgICAgIHN0cmluZyBodG1sIGZvciBwYXN0ZWQgSFRNTCBjb250ZW50CiAgICAgICAgICAgICAgICBzdHJpbmcgdGV4dCBmb3IgdGhlIHBsYWluLXRleHQgdmVyc2lvbgogICAgICAgICAgICAgICAgc3RyaW5nIHVybCB0byBoYXZlIHVzIHB1bGwgaW4gY29udGVudCBmcm9tIGEgVVJMLiBOb3RlLCB0aGlzIHdpbGwgb3ZlcnJpZGUgYW55IG90aGVyIGNvbnRlbnQgb3B0aW9ucyAtIGZvciBsaXN0cyB3aXRoIEVtYWlsIEZvcm1hdCBvcHRpb25zLCB5b3UnbGwgbmVlZCB0byB0dXJuIG9uIGdlbmVyYXRlX3RleHQgYXMgd2VsbAogICAgICAgICAgICAgICAgc3RyaW5nIGFyY2hpdmUgdG8gc2VuZCBhIEJhc2U2NCBlbmNvZGVkIGFyY2hpdmUgZmlsZSBmb3IgdXMgdG8gaW1wb3J0IGFsbCBtZWRpYSBmcm9tLiBOb3RlLCB0aGlzIHdpbGwgb3ZlcnJpZGUgYW55IG90aGVyIGNvbnRlbnQgb3B0aW9ucyAtIGZvciBsaXN0cyB3aXRoIEVtYWlsIEZvcm1hdCBvcHRpb25zLCB5b3UnbGwgbmVlZCB0byB0dXJuIG9uIGdlbmVyYXRlX3RleHQgYXMgd2VsbAogICAgICAgICAgICAgICAgc3RyaW5nIGFyY2hpdmVfdHlwZSBvcHRpb25hbCAtIG9ubHkgbmVjZXNzYXJ5IGZvciB0aGUgImFyY2hpdmUiIG9wdGlvbi4gU3VwcG9ydGVkIGZvcm1hdHMgYXJlOiB6aXAsIHRhci5neiwgdGFyLmJ6MiwgdGFyLCB0Z3osIHRieiAuIElmIG5vdCBpbmNsdWRlZCwgd2Ugd2lsbCBkZWZhdWx0IHRvIHppcAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBJZiB5b3UgY2hvc2UgYSB0ZW1wbGF0ZSBpbnN0ZWFkIG9mIHBhc3RpbmcgaW4geW91ciBIVE1MIGNvbnRlbnQsIHRoZW4gdXNlICJodG1sXyIgZm9sbG93ZWQgYnkgdGhlIHRlbXBsYXRlIHNlY3Rpb25zIGFzIGtleXMgLSBmb3IgZXhhbXBsZSwgdXNlIGEga2V5IG9mICJodG1sX01BSU4iIHRvIGZpbGwgaW4gdGhlICJNQUlOIiBzZWN0aW9uIG9mIGEgdGVtcGxhdGUuIFN1cHBvcnRlZCB0ZW1wbGF0ZSBzZWN0aW9ucyBpbmNsdWRlOiAiaHRtbF9IRUFERVIiLCAiaHRtbF9NQUlOIiwgImh0bWxfU0lERUNPTFVNTiIsIGFuZCAiaHRtbF9GT09URVIiCiAgICAqIEBwYXJhbSBhcnJheSAkc2VnbWVudF9vcHRzIG9wdGlvbmFsIC0gaWYgeW91IHdpc2ggdG8gZG8gU2VnbWVudGF0aW9uIHdpdGggdGhpcyBjYW1wYWlnbiB0aGlzIGFycmF5IHNob3VsZCBjb250YWluOiBzZWUgY2FtcGFpZ25TZWdtZW50VGVzdCgpLiBJdCdzIHN1Z2dlc3RlZCB0aGF0IHlvdSB0ZXN0IHlvdXIgb3B0aW9ucyBhZ2FpbnN0IGNhbXBhaWduU2VnbWVudFRlc3QoKS4gQWxzbywgInRyYW5zIiBjYW1wYWlnbnMgPHN0cm9uZz5kbyBub3Q8L3N0cm9uZz4gc3VwcG9ydCBzZWdtZW50YXRpb24uCiAgICAqIEBwYXJhbSBhcnJheSAkdHlwZV9vcHRzIG9wdGlvbmFsIC0gCiAgICAgICAgICAgIEZvciBSU1MgQ2FtcGFpZ25zIHRoaXMsIGFycmF5IHNob3VsZCBjb250YWluOgogICAgICAgICAgICAgICAgc3RyaW5nIHVybCB0aGUgVVJMIHRvIHB1bGwgUlNTIGNvbnRlbnQgZnJvbSAtIGl0IHdpbGwgYmUgdmVyaWZpZWQgYW5kIG11c3QgZXhpc3QKICAgICAgICAgICAgICAgIHN0cmluZyBzY2hlZHVsZSBvcHRpb25hbCBvbmUgb2YgImRhaWx5IiwgIndlZWtseSIsICJtb250aGx5IiAtIGRlZmF1bHRzIHRvICJkYWlseSIKICAgICAgICAgICAgICAgIHN0cmluZyBzY2hlZHVsZV9ob3VyIG9wdGlvbmFsIGFuIGhvdXIgYmV0d2VlbiAwIGFuZCAyNCAtIGRlZmF1bHQgdG8gNCAoNGFtIDxlbT5sb2NhbCB0aW1lPC9lbT4pIC0gYXBwbGllcyB0byBhbGwgc2NoZWR1bGUgdHlwZXMKICAgICAgICAgICAgICAgIHN0cmluZyBzY2hlZHVsZV93ZWVrZGF5IG9wdGlvbmFsIGZvciAid2Vla2x5IiBvbmx5LCBhIG51bWJlciBzcGVjaWZ5aW5nIHRoZSBkYXkgb2YgdGhlIHdlZWsgdG8gc2VuZDogMCAoU3VuZGF5KSAtIDYgKFNhdHVyZGF5KSAtIGRlZmF1bHRzIHRvIDEgKE1vbmRheSkKICAgICAgICAgICAgICAgIHN0cmluZyBzY2hlZHVsZV9tb250aGRheSBvcHRpb25hbCBmb3IgIm1vbnRobHkiIG9ubHksIGEgbnVtYmVyIHNwZWNpZnlpbmcgdGhlIGRheSBvZiB0aGUgbW9udGggdG8gc2VuZCAoMSAtIDI4KSBvciAibGFzdCIgZm9yIHRoZSBsYXN0IGRheSBvZiBhIGdpdmVuIG1vbnRoLiBEZWZhdWx0cyB0byB0aGUgMXN0IGRheSBvZiB0aGUgbW9udGgKICAgICAgICAgICAgIAogICAgICAgICAgICBGb3IgQS9CIFNwbGl0IGNhbXBhaWducywgdGhpcyBhcnJheSBzaG91bGQgY29udGFpbjoKICAgICAgICAgICAgICAgIHN0cmluZyBzcGxpdF90ZXN0IFRoZSB2YWx1ZXMgdG8gc2VnbWVudCBiYXNlZCBvbi4gQ3VycmVudGx5LCBvbmUgb2Y6ICJzdWJqZWN0IiwgImZyb21fbmFtZSIsICJzY2hlZHVsZSIuIE5PVEUsIGZvciAic2NoZWR1bGUiLCB5b3Ugd2lsbCBuZWVkIHRvIGNhbGwgY2FtcGFpZ25TY2hlZHVsZSgpIHNlcGFyYXRlbHkhCiAgICAgICAgICAgICAgICBzdHJpbmcgcGlja193aW5uZXIgSG93IHRoZSB3aW5uZXIgd2lsbCBiZSBwaWNrZWQsIG9uZSBvZjogIm9wZW5zIiAoYnkgdGhlIG9wZW5fcmF0ZSksICJjbGlja3MiIChieSB0aGUgY2xpY2sgcmF0ZSksICJtYW51YWwiICh5b3UgcGljayBtYW51YWxseSkKICAgICAgICAgICAgICAgIGludCB3YWl0X3VuaXRzIG9wdGlvbmFsIHRoZSBkZWZhdWx0IHRpbWUgdW5pdCB0byB3YWl0IGJlZm9yZSBhdXRvLXNlbGVjdGluZyBhIHdpbm5lciAtIHVzZSAiMzYwMCIgZm9yIGhvdXJzLCAiODY0MDAiIGZvciBkYXlzLiBEZWZhdWx0cyB0byA4NjQwMC4KICAgICAgICAgICAgICAgIGludCB3YWl0X3RpbWUgb3B0aW9uYWwgdGhlIG51bWJlciBvZiB1bml0cyB0byB3YWl0IGJlZm9yZSBhdXRvLXNlbGVjdGluZyBhIHdpbm5lciAtIGRlZmF1bHRzIHRvIDEsIHNvIGlmIG5vdCBzZXQsIGEgd2lubmVyIHdpbGwgYmUgc2VsZWN0ZWQgYWZ0ZXIgMSBEYXkuCiAgICAgICAgICAgICAgICBpbnQgc3BsaXRfc2l6ZSBvcHRpb25hbCB0aGlzIGlzIGEgcGVyY2VudGFnZSBvZiB3aGF0IHNpemUgdGhlIENhbXBhaWduJ3MgTGlzdCBwbHVzIGFueSBzZWdtZW50YXRpb24gb3B0aW9ucyByZXN1bHRzIGluLiAic2NoZWR1bGUiIHR5cGUgZm9yY2VzIDUwJSwgYWxsIG90aGVycyBkZWZhdWx0IHRvIDEwJQogICAgICAgICAgICAgICAgc3RyaW5nIGZyb21fbmFtZV9hIG9wdGlvbmFsIHNvcnQgb2YsIHJlcXVpcmVkIHdoZW4gc3BsaXRfdGVzdCBpcyAiZnJvbV9uYW1lIgogICAgICAgICAgICAgICAgc3RyaW5nIGZyb21fbmFtZV9iIG9wdGlvbmFsIHNvcnQgb2YsIHJlcXVpcmVkIHdoZW4gc3BsaXRfdGVzdCBpcyAiZnJvbV9uYW1lIgogICAgICAgICAgICAgICAgc3RyaW5nIGZyb21fZW1haWxfYSBvcHRpb25hbCBzb3J0IG9mLCByZXF1aXJlZCB3aGVuIHNwbGl0X3Rlc3QgaXMgImZyb21fbmFtZSIKICAgICAgICAgICAgICAgIHN0cmluZyBmcm9tX2VtYWlsX2Igb3B0aW9uYWwgc29ydCBvZiwgcmVxdWlyZWQgd2hlbiBzcGxpdF90ZXN0IGlzICJmcm9tX25hbWUiCiAgICAgICAgICAgICAgICBzdHJpbmcgc3ViamVjdF9hIG9wdGlvbmFsIHNvcnQgb2YsIHJlcXVpcmVkIHdoZW4gc3BsaXRfdGVzdCBpcyAic3ViamVjdCIKICAgICAgICAgICAgICAgIHN0cmluZyBzdWJqZWN0X2Igb3B0aW9uYWwgc29ydCBvZiwgcmVxdWlyZWQgd2hlbiBzcGxpdF90ZXN0IGlzICJzdWJqZWN0IgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIEZvciBBdXRvUmVzcG9uZGVyIGNhbXBhaWducywgdGhpcyBhcnJheSBzaG91bGQgY29udGFpbjoKICAgICAgICAgICAgICAgIHN0cmluZyBvZmZzZXQtdW5pdHMgb25lIG9mICJkYXkiLCAid2VlayIsICJtb250aCIsICJ5ZWFyIiAtIHJlcXVpcmVkCiAgICAgICAgICAgICAgICBzdHJpbmcgb2Zmc2V0LXRpbWUgb3B0aW9uYWwsIHNvcnQgb2YgLSB0aGUgbnVtYmVyIG9mIHVuaXRzIG11c3QgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDAgZm9yIHNpZ251cCBiYXNlZCBhdXRvcmVzcG9uZGVycwogICAgICAgICAgICAgICAgc3RyaW5nIG9mZnNldC1kaXIgZWl0aGVyICJiZWZvcmUiIG9yICJhZnRlciIKICAgICAgICAgICAgICAgIHN0cmluZyBldmVudCBvcHRpb25hbCAic2lnbnVwIiAoZGVmYXVsdCkgdG8gYmFzZSB0aGlzIG9uIGRvdWJsZS1vcHRpbiBzaWdudXAsICJkYXRlIiBvciAiYW5udWFsIiB0byBiYXNlIHRoaXMgb24gbWVyZ2UgZmllbGQgaW4gdGhlIGxpc3QKICAgICAgICAgICAgICAgIHN0cmluZyBldmVudC1kYXRlbWVyZ2Ugb3B0aW9uYWwgc29ydCBvZiwgdGhpcyBpcyByZXF1aXJlZCBpZiB0aGUgZXZlbnQgaXMgImRhdGUiIG9yICJhbm51YWwiCiAgICAKICAgICAqCiAgICAgKiBAcmV0dXJuIHN0cmluZyB0aGUgSUQgZm9yIHRoZSBjcmVhdGVkIGNhbXBhaWduCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduQ3JlYXRlKCR0eXBlLCAkb3B0aW9ucywgJGNvbnRlbnQsICRzZWdtZW50X29wdHM9TlVMTCwgJHR5cGVfb3B0cz1OVUxMKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1sidHlwZSJdID0gJHR5cGU7CiAgICAgICAgJHBhcmFtc1sib3B0aW9ucyJdID0gJG9wdGlvbnM7CiAgICAgICAgJHBhcmFtc1siY29udGVudCJdID0gJGNvbnRlbnQ7CiAgICAgICAgJHBhcmFtc1sic2VnbWVudF9vcHRzIl0gPSAkc2VnbWVudF9vcHRzOwogICAgICAgICRwYXJhbXNbInR5cGVfb3B0cyJdID0gJHR5cGVfb3B0czsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduQ3JlYXRlIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIFVwZGF0ZSBqdXN0IGFib3V0IGFueSBzZXR0aW5nIGZvciBhIGNhbXBhaWduIHRoYXQgaGFzIDxlbT5ub3Q8L2VtPiBiZWVuIHNlbnQuIFNlZSBjYW1wYWlnbkNyZWF0ZSgpIGZvciBkZXRhaWxzLgogICAgICogICAKICAgICAqICAKICAgICAqICBDYXZlYXRzOjxici8+PHVsPgogICAgICogICAgICAgIDxsaT5JZiB5b3Ugc2V0IGxpc3RfaWQsIGFsbCBzZWdtZW50YXRpb24gb3B0aW9ucyB3aWxsIGJlIGRlbGV0ZWQgYW5kIG11c3QgYmUgcmUtYWRkZWQuPC9saT4KICAgICAqICAgICAgICA8bGk+SWYgeW91IHNldCB0ZW1wbGF0ZV9pZCwgeW91IG5lZWQgdG8gZm9sbG93IHRoYXQgdXAgYnkgc2V0dGluZyBpdCdzICdjb250ZW50JzwvbGk+CiAgICAgKiAgICAgICAgPGxpPklmIHlvdSBzZXQgc2VnbWVudF9vcHRzLCB5b3Ugc2hvdWxkIGhhdmUgdGVzdGVkIHlvdXIgb3B0aW9ucyBhZ2FpbnN0IGNhbXBhaWduU2VnbWVudFRlc3QoKSBhcyBjYW1wYWlnblVwZGF0ZSgpIHdpbGwgbm90IGFsbG93IHlvdSB0byBzZXQgYSBzZWdtZW50IHRoYXQgaW5jbHVkZXMgbm8gbWVtYmVycy48L2xpPjwvdWw+CiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2NhbXBhaWduVXBkYXRlLnBocAogICAgICogQGV4YW1wbGUgbWNhcGlfY2FtcGFpZ25VcGRhdGVBQi5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfY2FtcGFpZ25VcGRhdGUucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2NhbXBhaWduVXBkYXRlQUIucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBDYW1wYWlnbiBJZCB0byB1cGRhdGUKICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgdGhlIHBhcmFtZXRlciBuYW1lICggc2VlIGNhbXBhaWduQ3JlYXRlKCkgKS4gRm9yIGl0ZW1zIGluIHRoZSA8c3Ryb25nPm9wdGlvbnM8L3N0cm9uZz4gYXJyYXksIHRoaXMgd2lsbCBiZSB0aGF0IHBhcmFtZXRlcidzIG5hbWUgKHN1YmplY3QsIGZyb21fZW1haWwsIGV0Yy4pLiBBZGRpdGlvbmFsIHBhcmFtZXRlcnMgd2lsbCBiZSB0aGF0IG9wdGlvbiBuYW1lICAoY29udGVudCwgc2VnbWVudF9vcHRzKS4gInR5cGVfb3B0cyIgd2lsbCBiZSB0aGUgbmFtZSBvZiB0aGUgdHlwZSAtIHJzcywgYXV0bywgdHJhbnMsIGV0Yy4KICAgICAqIEBwYXJhbSBtaXhlZCAgJHZhbHVlIGFuIGFwcHJvcHJpYXRlIHZhbHVlIGZvciB0aGUgcGFyYW1ldGVyICggc2VlIGNhbXBhaWduQ3JlYXRlKCkgKS4gRm9yIGl0ZW1zIGluIHRoZSA8c3Ryb25nPm9wdGlvbnM8L3N0cm9uZz4gYXJyYXksIHRoaXMgd2lsbCBiZSB0aGF0IHBhcmFtZXRlcidzIHZhbHVlLiBGb3IgYWRkaXRpb25hbCBwYXJhbWV0ZXJzLCB0aGlzIGlzIHRoZSBzYW1lIHZhbHVlIHBhc3NlZCB0byB0aGVtLgogICAgICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhlIHVwZGF0ZSBzdWNjZWVkcywgb3RoZXJ3aXNlIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduVXBkYXRlKCRjaWQsICRuYW1lLCAkdmFsdWUpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgJHBhcmFtc1sibmFtZSJdID0gJG5hbWU7CiAgICAgICAgJHBhcmFtc1sidmFsdWUiXSA9ICR2YWx1ZTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduVXBkYXRlIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIFJlcGxpY2F0ZSBhIGNhbXBhaWduLgogICAgKgogICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgKgogICAgKiBAZXhhbXBsZSBtY2FwaV9jYW1wYWlnblJlcGxpY2F0ZS5waHAKICAgICoKICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBDYW1wYWlnbiBJZCB0byByZXBsaWNhdGUKICAgICogQHJldHVybiBzdHJpbmcgdGhlIGlkIG9mIHRoZSByZXBsaWNhdGVkIENhbXBhaWduIGNyZWF0ZWQsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgogICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduUmVwbGljYXRlKCRjaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnblJlcGxpY2F0ZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKiBEZWxldGUgYSBjYW1wYWlnbi4gU2VyaW91c2x5LCAicG9vZiwgZ29uZSEiIC0gYmUgY2FyZWZ1bCEKICAgICoKICAgICogQHNlY3Rpb24gQ2FtcGFpZ24gIFJlbGF0ZWQKICAgICoKICAgICogQGV4YW1wbGUgbWNhcGlfY2FtcGFpZ25EZWxldGUucGhwCiAgICAqCiAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgQ2FtcGFpZ24gSWQgdG8gZGVsZXRlCiAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHRoZSBkZWxldGUgc3VjY2VlZHMsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgogICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduRGVsZXRlKCRjaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbkRlbGV0ZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IHRoZSBsaXN0IG9mIGNhbXBhaWducyBhbmQgdGhlaXIgZGV0YWlscyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIGZpbHRlcnMKICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfY2FtcGFpZ25zLnBocAogICAgICogQGV4YW1wbGUgeG1sLXJwY19jYW1wYWlnbnMucGhwCiAgICAgKgogICAgICogQHBhcmFtIGFycmF5ICRmaWx0ZXJzIGEgaGFzaCBvZiBmaWx0ZXJzIHRvIGFwcGx5IHRvIHRoaXMgcXVlcnkgLSBhbGwgYXJlIG9wdGlvbmFsOgogICAgICAgICAgICBzdHJpbmcgIGNhbXBhaWduX2lkIG9wdGlvbmFsIC0gcmV0dXJuIGEgc2luZ2xlIGNhbXBhaWduIHVzaW5nIGEga25vdyBjYW1wYWlnbl9pZAogICAgICAgICAgICBzdHJpbmcgIGxpc3RfaWQgb3B0aW9uYWwgLSB0aGUgbGlzdCB0byBzZW5kIHRoaXMgY2FtcGFpZ24gdG8tIGdldCBsaXN0cyB1c2luZyBsaXN0cygpLiBBY2NlcHRzIG11bHRpcGxlcyBzZXBhcmF0ZWQgYnkgY29tbWFzIHdoZW4gbm90IHVzaW5nIGV4YWN0IG1hdGNoaW5nLgogICAgICAgICAgICBpbnQgZm9sZGVyX2lkIG9wdGlvbmFsIC0gb25seSBzaG93IGNhbXBhaWducyBmcm9tIHRoaXMgZm9sZGVyIGlkIC0gZ2V0IGZvbGRlcnMgdXNpbmcgY2FtcGFpZ25Gb2xkZXJzKCkuIEFjY2VwdHMgbXVsdGlwbGVzIHNlcGFyYXRlZCBieSBjb21tYXMgd2hlbiBub3QgdXNpbmcgZXhhY3QgbWF0Y2hpbmcuCiAgICAgICAgICAgIGludCB0ZW1wbGF0ZV9pZCBvcHRpb25hbCAtIG9ubHkgc2hvdyBjYW1wYWlnbnMgdXNpbmcgdGhpcyB0ZW1wbGF0ZSBpZCAtIGdldCB0ZW1wbGF0ZXMgdXNpbmcgdGVtcGxhdGVzKCkuIEFjY2VwdHMgbXVsdGlwbGVzIHNlcGFyYXRlZCBieSBjb21tYXMgd2hlbiBub3QgdXNpbmcgZXhhY3QgbWF0Y2hpbmcuCiAgICAgICAgICAgIHN0cmluZyAgc3RhdHVzIG9wdGlvbmFsIC0gcmV0dXJuIGNhbXBhaWducyBvZiBhIHNwZWNpZmljIHN0YXR1cyAtIG9uZSBvZiAic2VudCIsICJzYXZlIiwgInBhdXNlZCIsICJzY2hlZHVsZSIsICJzZW5kaW5nIi4gQWNjZXB0cyBtdWx0aXBsZXMgc2VwYXJhdGVkIGJ5IGNvbW1hcyB3aGVuIG5vdCB1c2luZyBleGFjdCBtYXRjaGluZy4KICAgICAgICAgICAgc3RyaW5nICB0eXBlIG9wdGlvbmFsIC0gcmV0dXJuIGNhbXBhaWducyBvZiBhIHNwZWNpZmljIHR5cGUgLSBvbmUgb2YgInJlZ3VsYXIiLCAicGxhaW50ZXh0IiwgImFic3BsaXQiLCAicnNzIiwgInRyYW5zIiwgImF1dG8iLiBBY2NlcHRzIG11bHRpcGxlcyBzZXBhcmF0ZWQgYnkgY29tbWFzIHdoZW4gbm90IHVzaW5nIGV4YWN0IG1hdGNoaW5nLgogICAgICAgICAgICBzdHJpbmcgIGZyb21fbmFtZSBvcHRpb25hbCAtIG9ubHkgc2hvdyBjYW1wYWlnbnMgdGhhdCBoYXZlIHRoaXMgIkZyb20gTmFtZSIKICAgICAgICAgICAgc3RyaW5nICBmcm9tX2VtYWlsIG9wdGlvbmFsIC0gb25seSBzaG93IGNhbXBhaWducyB0aGF0IGhhdmUgdGhpcyAiUmVwbHktdG8gRW1haWwiCiAgICAgICAgICAgIHN0cmluZyAgdGl0bGUgb3B0aW9uYWwgLSBvbmx5IHNob3cgY2FtcGFpZ25zIHRoYXQgaGF2ZSB0aGlzIHRpdGxlCiAgICAgICAgICAgIHN0cmluZyAgc3ViamVjdCBvcHRpb25hbCAtIG9ubHkgc2hvdyBjYW1wYWlnbnMgdGhhdCBoYXZlIHRoaXMgc3ViamVjdAogICAgICAgICAgICBzdHJpbmcgIHNlbmR0aW1lX3N0YXJ0IG9wdGlvbmFsIC0gb25seSBzaG93IGNhbXBhaWducyB0aGF0IGhhdmUgYmVlbiBzZW50IHNpbmNlIHRoaXMgZGF0ZS90aW1lIChpbiBHTVQpIC0gZm9ybWF0IGlzIFlZWVktTU0tREQgSEg6bW06c3MgKDI0aHIpCiAgICAgICAgICAgIHN0cmluZyAgc2VuZHRpbWVfZW5kIG9wdGlvbmFsIC0gb25seSBzaG93IGNhbXBhaWducyB0aGF0IGhhdmUgYmVlbiBzZW50IGJlZm9yZSB0aGlzIGRhdGUvdGltZSAoaW4gR01UKSAtIGZvcm1hdCBpcyBZWVlZLU1NLUREIEhIOm1tOnNzICgyNGhyKQogICAgICAgICAgICBib29sZWFuIGV4YWN0IG9wdGlvbmFsIC0gZmxhZyBmb3Igd2hldGhlciB0byBmaWx0ZXIgb24gZXhhY3QgdmFsdWVzIHdoZW4gZmlsdGVyaW5nLCBvciBzZWFyY2ggd2l0aGluIGNvbnRlbnQgZm9yIGZpbHRlciB2YWx1ZXMgLSBkZWZhdWx0cyB0byB0cnVlLiBVc2luZyB0aGlzIGRpc2FibGVzIHRoZSB1c2Ugb2YgYW55IGZpbHRlcnMgdGhhdCBhY2NlcHQgbXVsdGlwbGVzLgogICAgICogQHBhcmFtIGludCAkc3RhcnQgb3B0aW9uYWwgLSBjb250cm9sIHBhZ2luZyBvZiBjYW1wYWlnbnMsIHN0YXJ0IHJlc3VsdHMgYXQgdGhpcyBjYW1wYWlnbiAjLCBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhICAocGFnZSAwKQogICAgICogQHBhcmFtIGludCAkbGltaXQgb3B0aW9uYWwgLSBjb250cm9sIHBhZ2luZyBvZiBjYW1wYWlnbnMsIG51bWJlciBvZiBjYW1wYWlnbnMgdG8gcmV0dXJuIHdpdGggZWFjaCBjYWxsLCBkZWZhdWx0cyB0byAyNSAobWF4PTEwMDApCiAgICAgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IGNvbnRhaW5pbmcgYSBjb3VudCBvZiBhbGwgbWF0Y2hpbmcgY2FtcGFpZ25zIGFuZCB0aGUgc3BlY2lmaWMgb25lcyBmb3IgdGhlIGN1cnJlbnQgcGFnZSAoc2VlIFJldHVybmVkIEZpZWxkcyBmb3IgZGVzY3JpcHRpb24pCiAgICAgKiBAcmV0dXJuZiBpbnQgdG90YWwgdGhlIHRvdGFsIG51bWJlciBvZiBjYW1wYWlnbnMgbWF0Y2hpbmcgdGhlIGZpbHRlcnMgcGFzc2VkIGluCiAgICAgKiBAcmV0dXJuZiBhcnJheSBkYXRhIHRoZSBkYXRhIGZvciBlYWNoIGNhbXBhaWduIGJlaW5nIHJldHVybmVkCiAgICAgICAgICAgIHN0cmluZyBpZCBDYW1wYWlnbiBJZCAodXNlZCBmb3IgYWxsIG90aGVyIGNhbXBhaWduIGZ1bmN0aW9ucykKICAgICAgICAgICAgaW50IHdlYl9pZCBUaGUgQ2FtcGFpZ24gaWQgdXNlZCBpbiBvdXIgd2ViIGFwcCwgYWxsb3dzIHlvdSB0byBjcmVhdGUgYSBsaW5rIGRpcmVjdGx5IHRvIGl0CiAgICAgICAgICAgIHN0cmluZyBsaXN0X2lkIFRoZSBMaXN0IHVzZWQgZm9yIHRoaXMgY2FtcGFpZ24KICAgICAgICAgICAgaW50IGZvbGRlcl9pZCBUaGUgRm9sZGVyIHRoaXMgY2FtcGFpZ24gaXMgaW4KICAgICAgICAgICAgaW50IHRlbXBsYXRlX2lkIFRoZSBUZW1wbGF0ZSB0aGlzIGNhbXBhaWduIHVzZXMKICAgICAgICAgICAgc3RyaW5nIGNvbnRlbnRfdHlwZSBIb3cgdGhlIGNhbXBhaWduJ3MgY29udGVudCBpcyBwdXQgdG9nZXRoZXIgLSBvbmUgb2YgJ3RlbXBsYXRlJywgJ2h0bWwnLCAndXJsJwogICAgICAgICAgICBzdHJpbmcgdGl0bGUgVGl0bGUgb2YgdGhlIGNhbXBhaWduCiAgICAgICAgICAgIHN0cmluZyB0eXBlIFRoZSB0eXBlIG9mIGNhbXBhaWduIHRoaXMgaXMgKHJlZ3VsYXIscGxhaW50ZXh0LGFic3BsaXQscnNzLGluc3BlY3Rpb24sdHJhbnMsYXV0bykKICAgICAgICAgICAgc3RyaW5nIGNyZWF0ZV90aW1lIENyZWF0aW9uIHRpbWUgZm9yIHRoZSBjYW1wYWlnbgogICAgICAgICAgICBzdHJpbmcgc2VuZF90aW1lIFNlbmQgdGltZSBmb3IgdGhlIGNhbXBhaWduIC0gYWxzbyB0aGUgc2NoZWR1bGVkIHRpbWUgZm9yIHNjaGVkdWxlZCBjYW1wYWlnbnMuCiAgICAgICAgICAgIGludCBlbWFpbHNfc2VudCBOdW1iZXIgb2YgZW1haWxzIGVtYWlsIHdhcyBzZW50IHRvCiAgICAgICAgICAgIHN0cmluZyBzdGF0dXMgU3RhdHVzIG9mIHRoZSBnaXZlbiBjYW1wYWlnbiAoc2F2ZSxwYXVzZWQsc2NoZWR1bGUsc2VuZGluZyxzZW50KQogICAgICAgICAgICBzdHJpbmcgZnJvbV9uYW1lIEZyb20gbmFtZSBvZiB0aGUgZ2l2ZW4gY2FtcGFpZ24KICAgICAgICAgICAgc3RyaW5nIGZyb21fZW1haWwgUmVwbHktdG8gZW1haWwgb2YgdGhlIGdpdmVuIGNhbXBhaWduCiAgICAgICAgICAgIHN0cmluZyBzdWJqZWN0IFN1YmplY3Qgb2YgdGhlIGdpdmVuIGNhbXBhaWduCiAgICAgICAgICAgIHN0cmluZyB0b19uYW1lIEN1c3RvbSAiVG86IiBlbWFpbCBzdHJpbmcgdXNpbmcgbWVyZ2UgdmFyaWFibGVzCiAgICAgICAgICAgIHN0cmluZyBhcmNoaXZlX3VybCBBcmNoaXZlIGxpbmsgZm9yIHRoZSBnaXZlbiBjYW1wYWlnbgogICAgICAgICAgICBib29sZWFuIGlubGluZV9jc3MgV2hldGhlciBvciBub3QgdGhlIGNhbXBhaWduIGNvbnRlbnQncyBjc3Mgd2FzIGF1dG8taW5saW5lZAogICAgICAgICAgICBzdHJpbmcgYW5hbHl0aWNzIEVpdGhlciAiZ29vZ2xlIiBpZiBlbmFibGVkIG9yICJOIiBpZiBkaXNhYmxlZAogICAgICAgICAgICBzdHJpbmcgYW5hbHl0aWNzX3RhZyBUaGUgbmFtZS90YWcgdGhlIGNhbXBhaWduJ3MgbGlua3Mgd2VyZSB0YWdnZWQgd2l0aCBpZiBhbmFseXRpY3Mgd2VyZSBlbmFibGVkLgogICAgICAgICAgICBib29sZWFuIGF1dGhlbnRpY2F0ZSBXaGV0aGVyIG9yIG5vdCB0aGUgY2FtcGFpZ24gd2FzIGF1dGhlbnRpY2F0ZWQKICAgICAgICAgICAgYm9vbGVhbiBlY29tbTM2MCBXaGV0aGVyIG9yIG5vdCBlY29tbTM2MCB0cmFja2luZyB3YXMgYXBwZW5kZWQgdG8gbGlua3MKICAgICAgICAgICAgYm9vbGVhbiBhdXRvX3R3ZWV0IFdoZXRoZXIgb3Igbm90IHRoZSBjYW1wYWlnbiB3YXMgYXV0byB0d2VldGVkIGFmdGVyIHNlbmRpbmcKICAgICAgICAgICAgc3RyaW5nIGF1dG9fZmJfcG9zdCBBIGNvbW1hIGRlbGltaXRlZCBsaXN0IG9mIEZhY2Vib29rIFByb2ZpbGUvUGFnZSBJZHMgdGhlIGNhbXBhaWduIHdhcyBwb3N0ZWQgdG8gYWZ0ZXIgc2VuZGluZy4gSWYgbm90IHVzZWQsIGJsYW5rLgogICAgICAgICAgICBib29sZWFuIGF1dG9fZm9vdGVyIFdoZXRoZXIgb3Igbm90IHRoZSBhdXRvX2Zvb3RlciB3YXMgbWFudWFsbHkgdHVybmVkIG9uCiAgICAgICAgICAgIGJvb2xlYW4gdGltZXdhcnAgV2hldGhlciBvciBub3QgdGhlIGNhbXBhaWduIHVzZWQgVGltZXdhcnAKICAgICAgICAgICAgYm9vbGVhbiB0aW1ld2FycF9zY2hlZHVsZSBUaGUgdGltZSwgaW4gR01ULCB0aGF0IHRoZSBUaW1ld2FycCBjYW1wYWlnbiBpcyBiZWluZyBzZW50LiBGb3IgQS9CIFNwbGl0IGNhbXBhaWducywgdGhpcyBpcyBibGFuayBhbmQgaXMgaW5zdGVhZCBpbiB0aGVpciBzY2hlZHVsZV9hIGFuZCBzY2hlZHVsZV9iIGluIHRoZSB0eXBlX29wdHMgYXJyYXkKICAgICAgICAgICAgYXJyYXkgdHJhY2tpbmcgY29udGFpbmluZyAidGV4dF9jbGlja3MiLCAiaHRtbF9jbGlja3MiLCBhbmQgIm9wZW5zIiBhcyBib29sZWFuIHZhbHVlcyByZXByZXNlbnRpbmcgd2hldGhlciBvciBub3QgdGhleSB3ZXJlIGVuYWJsZWQKICAgICAgICAgICAgc3RyaW5nIHNlZ21lbnRfdGV4dCBhIHN0cmluZyBtYXJrZWQtdXAgd2l0aCBIVE1MIGV4cGxhaW5pbmcgdGhlIHNlZ21lbnQgdXNlZCBmb3IgdGhlIGNhbXBhaWduIGluIHBsYWluIEVuZ2xpc2ggCiAgICAgICAgICAgIGFycmF5IHNlZ21lbnRfb3B0cyB0aGUgc2VnbWVudCB1c2VkIGZvciB0aGUgY2FtcGFpZ24gLSBjYW4gYmUgcGFzc2VkIHRvIGNhbXBhaWduU2VnbWVudFRlc3QoKSBvciBjYW1wYWlnbkNyZWF0ZSgpCiAgICAgICAgICAgIGFycmF5IHR5cGVfb3B0cyB0aGUgdHlwZS1zcGVjaWZpYyBvcHRpb25zIGZvciB0aGUgY2FtcGFpZ24gLSBjYW4gYmUgcGFzc2VkIHRvIGNhbXBhaWduQ3JlYXRlKCkKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25zKCRmaWx0ZXJzPWFycmF5ICgKKSwgJHN0YXJ0PTAsICRsaW1pdD0yNSkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImZpbHRlcnMiXSA9ICRmaWx0ZXJzOwogICAgICAgICRwYXJhbXNbInN0YXJ0Il0gPSAkc3RhcnQ7CiAgICAgICAgJHBhcmFtc1sibGltaXQiXSA9ICRsaW1pdDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWducyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogR2l2ZW4gYSBsaXN0IGFuZCBhIGNhbXBhaWduLCBnZXQgYWxsIHRoZSByZWxldmFudCBjYW1wYWlnbiBzdGF0aXN0aWNzIChvcGVucywgYm91bmNlcywgY2xpY2tzLCBldGMuKQogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBTdGF0cwogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2NhbXBhaWduU3RhdHMucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2NhbXBhaWduU3RhdHMucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBjYW1wYWlnbiBpZCB0byBwdWxsIHN0YXRzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHJldHVybiBhcnJheSBzdHJ1Y3Qgb2YgdGhlIHN0YXRpc3RpY3MgZm9yIHRoaXMgY2FtcGFpZ24KICAgICAqIEByZXR1cm5mIGludCBzeW50YXhfZXJyb3JzIE51bWJlciBvZiBlbWFpbCBhZGRyZXNzZXMgaW4gY2FtcGFpZ24gdGhhdCBoYWQgc3ludGFjdGljYWwgZXJyb3JzLgogICAgICogQHJldHVybmYgaW50IGhhcmRfYm91bmNlcyBOdW1iZXIgb2YgZW1haWwgYWRkcmVzc2VzIGluIGNhbXBhaWduIHRoYXQgaGFyZCBib3VuY2VkLgogICAgICogQHJldHVybmYgaW50IHNvZnRfYm91bmNlcyBOdW1iZXIgb2YgZW1haWwgYWRkcmVzc2VzIGluIGNhbXBhaWduIHRoYXQgc29mdCBib3VuY2VkLgogICAgICogQHJldHVybmYgaW50IHVuc3Vic2NyaWJlcyBOdW1iZXIgb2YgZW1haWwgYWRkcmVzc2VzIGluIGNhbXBhaWduIHRoYXQgdW5zdWJzY3JpYmVkLgogICAgICogQHJldHVybmYgaW50IGFidXNlX3JlcG9ydHMgTnVtYmVyIG9mIGVtYWlsIGFkZHJlc3NlcyBpbiBjYW1wYWlnbiB0aGF0IHJlcG9ydGVkIGNhbXBhaWduIGZvciBhYnVzZS4KICAgICAqIEByZXR1cm5mIGludCBmb3J3YXJkcyBOdW1iZXIgb2YgdGltZXMgZW1haWwgd2FzIGZvcndhcmRlZCB0byBhIGZyaWVuZC4KICAgICAqIEByZXR1cm5mIGludCBmb3J3YXJkc19vcGVucyBOdW1iZXIgb2YgdGltZXMgYSBmb3J3YXJkZWQgZW1haWwgd2FzIG9wZW5lZC4KICAgICAqIEByZXR1cm5mIGludCBvcGVucyBOdW1iZXIgb2YgdGltZXMgdGhlIGNhbXBhaWduIHdhcyBvcGVuZWQuCiAgICAgKiBAcmV0dXJuZiBkYXRlIGxhc3Rfb3BlbiBEYXRlIG9mIHRoZSBsYXN0IHRpbWUgdGhlIGVtYWlsIHdhcyBvcGVuZWQuCiAgICAgKiBAcmV0dXJuZiBpbnQgdW5pcXVlX29wZW5zIE51bWJlciBvZiBwZW9wbGUgd2hvIG9wZW5lZCB0aGUgY2FtcGFpZ24uCiAgICAgKiBAcmV0dXJuZiBpbnQgY2xpY2tzIE51bWJlciBvZiB0aW1lcyBhIGxpbmsgaW4gdGhlIGNhbXBhaWduIHdhcyBjbGlja2VkLgogICAgICogQHJldHVybmYgaW50IHVuaXF1ZV9jbGlja3MgTnVtYmVyIG9mIHVuaXF1ZSByZWNpcGllbnQvY2xpY2sgcGFpcnMgZm9yIHRoZSBjYW1wYWlnbi4KICAgICAqIEByZXR1cm5mIGRhdGUgbGFzdF9jbGljayBEYXRlIG9mIHRoZSBsYXN0IHRpbWUgYSBsaW5rIGluIHRoZSBlbWFpbCB3YXMgY2xpY2tlZC4KICAgICAqIEByZXR1cm5mIGludCB1c2Vyc193aG9fY2xpY2tlZCBOdW1iZXIgb2YgdW5pcXVlIHJlY2lwaWVudHMgd2hvIGNsaWNrZWQgb24gYSBsaW5rIGluIHRoZSBjYW1wYWlnbi4KICAgICAqIEByZXR1cm5mIGludCBlbWFpbHNfc2VudCBOdW1iZXIgb2YgZW1haWwgYWRkcmVzc2VzIGNhbXBhaWduIHdhcyBzZW50IHRvLgogICAgICogQHJldHVybmYgYXJyYXkgYWJzcGxpdCBJZiB0aGlzIHdhcyBhbiBhYnNwbGl0IGNhbXBhaWduLCBzdGF0cyBmb3IgdGhlIEEgYW5kIEIgZ3JvdXBzIHdpbGwgYmUgcmV0dXJuZWQKICAgICAgICAgICAgaW50IGJvdW5jZXNfYSBib3VuY2VzIGZvciB0aGUgQSBncm91cAogICAgICAgICAgICBpbnQgYm91bmNlc19iIGJvdW5jZXMgZm9yIHRoZSBCIGdyb3VwCiAgICAgICAgICAgIGludCBmb3J3YXJkc19hIGZvcndhcmRzIGZvciB0aGUgQSBncm91cAogICAgICAgICAgICBpbnQgZm9yd2FyZHNfYiBmb3J3YXJkcyBmb3IgdGhlIEIgZ3JvdXAKICAgICAgICAgICAgaW50IGFidXNlX3JlcG9ydHNfYSBhYnVzZSByZXBvcnRzIGZvciB0aGUgQSBncm91cAogICAgICAgICAgICBpbnQgYWJ1c2VfcmVwb3J0c19iIGFidXNlIHJlcG9ydHMgZm9yIHRoZSBCIGdyb3VwCiAgICAgICAgICAgIGludCB1bnN1YnNfYSB1bnN1YnMgZm9yIHRoZSBBIGdyb3VwCiAgICAgICAgICAgIGludCB1bnN1YnNfYiB1bnN1YnMgZm9yIHRoZSBCIGdyb3VwCiAgICAgICAgICAgIGludCByZWNpcGllbnRzX2NsaWNrX2EgY2xpY2tzIGZvciB0aGUgQSBncm91cAogICAgICAgICAgICBpbnQgcmVjaXBpZW50c19jbGlja19iIGNsaWNrcyBmb3IgdGhlIEIgZ3JvdXAKICAgICAgICAgICAgaW50IGZvcndhcmRzX29wZW5zX2Egb3BlbmVkIGZvcndhcmRzIGZvciB0aGUgQSBncm91cAogICAgICAgICAgICBpbnQgZm9yd2FyZHNfb3BlbnNfYiBvcGVuZWQgZm9yd2FyZHMgZm9yIHRoZSBBIGdyb3VwCiAgICAgKiBAcmV0dXJuZiBhcnJheSB0aW1ld2FycCBJZiB0aGlzIGNhbXBhaWduIHdhcyBhIFRpbWV3YXJwIGNhbXBhaWduLCBhbiBhcnJheSBvZiBzdGF0cyBmcm9tIGVhY2ggdGltZXpvbmUgZm9yIGl0LCB3aXRoIHRoZSBHTVQgb2Zmc2V0IGFzIHRoZXkga2V5LiBFYWNoIHRpbWV6b25lIHdpbGwgY29udGFpbjoKICAgICAgICAgICAgaW50IG9wZW5zIG9wZW5zIGZvciB0aGlzIHRpbWV6b25lCiAgICAgICAgICAgIHN0cmluZyBsYXN0X29wZW4gdGhlIGRhdGUvdGltZSBvZiB0aGUgbGFzdCBvcGVuIGZvciB0aGlzIHRpbWV6b25lCiAgICAgICAgICAgIGludCB1bmlxdWVfb3BlbnMgdGhlIHVuaXF1ZSBvcGVucyBmb3IgdGhpcyB0aW1lem9uZQogICAgICAgICAgICBpbnQgY2xpY2tzIHRoZSB0b3RhbCBjbGlja3MgZm9yIHRoaXMgdGltZXpvbmUKICAgICAgICAgICAgc3RyaW5nIGxhc3RfY2xpY2sgdGhlIGRhdGUvdGltZSBvZiB0aGUgbGFzdCBjbGljayBmb3IgdGhpcyB0aW1lem9uZQogICAgICAgICAgICBpbnQgdW5pcXVlX29wZW5zIHRoZSB1bmlxdWUgY2xpY2tzIGZvciB0aGlzIHRpbWV6b25lCiAgICAgICAgICAgIGludCBib3VuY2VzIHRoZSB0b3RhbCBib3VuY2VzIGZvciB0aGlzIHRpbWV6b25lCiAgICAgICAgICAgIGludCB0b3RhbCB0aGUgdG90YWwgbnVtYmVyIG9mIG1lbWJlcnMgc2VudCB0byBpbiB0aGlzIHRpbWV6b25lCiAgICAgICAgICAgIGludCBzZW50IHRoZSB0b3RhbCBudW1iZXIgb2YgbWVtYmVycyBkZWxpdmVyZWQgdG8gaW4gdGhpcyB0aW1lem9uZSAgICAgICAgCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduU3RhdHMoJGNpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduU3RhdHMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbiBhcnJheSBvZiB0aGUgdXJscyBiZWluZyB0cmFja2VkLCBhbmQgdGhlaXIgY2xpY2sgY291bnRzIGZvciBhIGdpdmVuIGNhbXBhaWduCiAgICAgKgogICAgICogQHNlY3Rpb24gQ2FtcGFpZ24gIFN0YXRzCiAgICAgKgogICAgICogQGV4YW1wbGUgbWNhcGlfY2FtcGFpZ25DbGlja1N0YXRzLnBocAogICAgICogQGV4YW1wbGUgeG1sLXJwY19jYW1wYWlnbkNsaWNrU3RhdHMucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBjYW1wYWlnbiBpZCB0byBwdWxsIHN0YXRzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHJldHVybiBzdHJ1Y3QgdXJscyB3aWxsIGJlIGtleXMgYW5kIGNvbnRhaW4gdGhlaXIgYXNzb2NpYXRlZCBzdGF0aXN0aWNzOgogICAgICogQHJldHVybmYgaW50IGNsaWNrcyBOdW1iZXIgb2YgdGltZXMgdGhlIHNwZWNpZmljIGxpbmsgd2FzIGNsaWNrZWQKICAgICAqIEByZXR1cm5mIGludCB1bmlxdWUgTnVtYmVyIG9mIHVuaXF1ZSBwZW9wbGUgd2hvIGNsaWNrZWQgb24gdGhlIHNwZWNpZmljIGxpbmsKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25DbGlja1N0YXRzKCRjaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbkNsaWNrU3RhdHMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgdG9wIDUgcGVyZm9ybWluZyBlbWFpbCBkb21haW5zIGZvciB0aGlzIGNhbXBhaWduLiBVc2VycyB3YW50IG1vcmUgdGhhbiA1IHNob3VsZCB1c2UgY2FtcGFpZ24gY2FtcGFpZ25FbWFpbFN0YXRzQUlNKCkKICAgICAqIG9yIGNhbXBhaWduRW1haWxTdGF0c0FJTUFsbCgpIGFuZCBnZW5lcmF0ZSBhbnkgYWRkaXRpb25hbCBzdGF0cyB0aGV5IHJlcXVpcmUuCiAgICAgKiAKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBTdGF0cwogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2NhbXBhaWduRW1haWxEb21haW5QZXJmb3JtYW5jZS5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIHB1bGwgZW1haWwgZG9tYWluIHBlcmZvcm1hbmNlIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHJldHVybiBhcnJheSBkb21haW5zIGVtYWlsIGRvbWFpbnMgYW5kIHRoZWlyIGFzc29jaWF0ZWQgc3RhdHMKICAgICAqIEByZXR1cm5mIHN0cmluZyBkb21haW4gRG9tYWluIG5hbWUgb3Igc3BlY2lhbCAiT3RoZXIiIHRvIHJvbGwtdXAgc3RhdHMgcGFzdCA1IGRvbWFpbnMKICAgICAqIEByZXR1cm5mIGludCB0b3RhbF9zZW50IFRvdGFsIEVtYWlsIGFjcm9zcyBhbGwgZG9tYWlucyAtIHRoaXMgd2lsbCBiZSB0aGUgc2FtZSBpbiBldmVyeSByb3cKICAgICAqIEByZXR1cm5mIGludCBlbWFpbHMgTnVtYmVyIG9mIGVtYWlscyBzZW50IHRvIHRoaXMgZG9tYWluCiAgICAgKiBAcmV0dXJuZiBpbnQgYm91bmNlcyBOdW1iZXIgb2YgYm91bmNlcwogICAgICogQHJldHVybmYgaW50IG9wZW5zIE51bWJlciBvZiBvcGVucwogICAgICogQHJldHVybmYgaW50IGNsaWNrcyBOdW1iZXIgb2YgY2xpY2tzCiAgICAgKiBAcmV0dXJuZiBpbnQgdW5zdWJzIE51bWJlciBvZiB1bnN1YnMKICAgICAqIEByZXR1cm5mIGludCBkZWxpdmVyZWQgTnVtYmVyIG9mIGRlbGl2ZXJpZXMKICAgICAqIEByZXR1cm5mIGludCBlbWFpbHNfcGN0IFBlcmNlbnRhZ2Ugb2YgZW1haWxzIHRoYXQgd2VudCB0byB0aGlzIGRvbWFpbiAod2hvbGUgbnVtYmVyKQogICAgICogQHJldHVybmYgaW50IGJvdW5jZXNfcGN0IFBlcmNlbnRhZ2Ugb2YgYm91bmNlcyBmcm9tIHRoaXMgZG9tYWluICh3aG9sZSBudW1iZXIpCiAgICAgKiBAcmV0dXJuZiBpbnQgb3BlbnNfcGN0IFBlcmNlbnRhZ2Ugb2Ygb3BlbnMgZnJvbSB0aGlzIGRvbWFpbiAod2hvbGUgbnVtYmVyKQogICAgICogQHJldHVybmYgaW50IGNsaWNrc19wY3QgUGVyY2VudGFnZSBvZiBjbGlja3MgZnJvbSB0aGlzIGRvbWFpbiAod2hvbGUgbnVtYmVyKQogICAgICogQHJldHVybmYgaW50IHVuc3Vic19wY3QgUGVyY2VudGFnZSBvZiB1bnN1YnMgZnJvbSB0aGlzIGRvbWFpbiAod2hvbGUgbnVtYmVyKSAKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25FbWFpbERvbWFpblBlcmZvcm1hbmNlKCRjaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbkVtYWlsRG9tYWluUGVyZm9ybWFuY2UiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbGwgZW1haWwgYWRkcmVzc2VzIHRoZSBjYW1wYWlnbiB3YXMgc3VjY2Vzc2Z1bGx5IHNlbnQgdG8gKGllLCBubyBib3VuY2VzKQogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBTdGF0cwogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gcHVsbCBtZW1iZXJzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHBhcmFtIHN0cmluZyAkc3RhdHVzIG9wdGlvbmFsIHRoZSBzdGF0dXMgdG8gcHVsbCAtIG9uZSBvZiAnc2VudCcsICdoYXJkJyAoYm91bmNlKSwgb3IgJ3NvZnQnIChib3VuY2UpLiBCeSBkZWZhdWx0LCBhbGwgcmVjb3JkcyBhcmUgcmV0dXJuZWQKICAgICAqIEBwYXJhbSBpbnQgICAgJHN0YXJ0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBwYWdlIG51bWJlciB0byBzdGFydCBhdCAtIGRlZmF1bHRzIHRvIDFzdCBwYWdlIG9mIGRhdGEgKHBhZ2UgMCkKICAgICAqIEBwYXJhbSBpbnQgICAgJGxpbWl0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4gLSBkZWZhdWx0cyB0byAxMDAwLCB1cHBlciBsaW1pdCBzZXQgYXQgMTUwMDAKICAgICAqIEByZXR1cm4gYXJyYXkgYSB0b3RhbCBvZiBhbGwgbWF0Y2hpbmcgZW1haWxzIGFuZCB0aGUgc3BlY2lmaWMgZW1haWxzIGZvciB0aGlzIHBhZ2UKICAgICAqIEByZXR1cm5mIGludCB0b3RhbCAgIHRoZSB0b3RhbCBudW1iZXIgb2YgbWVtYmVycyBmb3IgdGhlIGNhbXBhaWduIGFuZCBzdGF0dXMKICAgICAqIEByZXR1cm5mIGFycmF5IGRhdGEgIHRoZSBmdWxsIGNhbXBhaWduIG1lbWJlciByZWNvcmRzCiAgICAgICAgICAgIHN0cmluZyBlbWFpbCB0aGUgZW1haWwgYWRkcmVzcyBzZW50IHRvCiAgICAgICAgICAgIHN0cmluZyBzdGF0dXMgdGhlIHN0YXR1cyBvZiB0aGUgc2VuZCAtIG9uZSBvZiAnc2VudCcsICdoYXJkJywgJ3NvZnQnCiAgICAgICAgICAgIHN0cmluZyBhYnNwbGl0X2dyb3VwIGlmIHRoaXMgd2FzIGFuIGFic3BsaXQgY2FtcGFpZ24sIG9uZSBvZiAnYScsJ2InLCBvciAnd2lubmVyJwogICAgICAgICAgICBzdHJpbmcgdHpfZ3JvdXAgaWYgdGhpcyB3YXMgYW4gdGltZXdhcnAgY2FtcGFpZ24gdGhlIHRpbWV6b25lIEdNVCBvZmZzZXQgdGhlIG1lbWJlciB3YXMgaW5jbHVkZWQgaW4KICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25NZW1iZXJzKCRjaWQsICRzdGF0dXM9TlVMTCwgJHN0YXJ0PTAsICRsaW1pdD0xMDAwKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInN0YXR1cyJdID0gJHN0YXR1czsKICAgICAgICAkcGFyYW1zWyJzdGFydCJdID0gJHN0YXJ0OwogICAgICAgICRwYXJhbXNbImxpbWl0Il0gPSAkbGltaXQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbk1lbWJlcnMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIDxzdHJvbmc+REVQUkVDQVRFRDwvc3Ryb25nPiBHZXQgYWxsIGVtYWlsIGFkZHJlc3NlcyB3aXRoIEhhcmQgQm91bmNlcyBmb3IgYSBnaXZlbiBjYW1wYWlnbgogICAgICogCiAgICAgKiBAZGVwcmVjYXRlZCBTZWUgY2FtcGFpZ25NZW1iZXJzKCkgZm9yIGEgcmVwbGFjZW1lbnQKICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgU3RhdHMKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIHB1bGwgYm91bmNlcyBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEBwYXJhbSBpbnQgICAgJHN0YXJ0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBwYWdlIG51bWJlciB0byBzdGFydCBhdCAtIGRlZmF1bHRzIHRvIDFzdCBwYWdlIG9mIGRhdGEgKHBhZ2UgMCkKICAgICAqIEBwYXJhbSBpbnQgICAgJGxpbWl0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4gLSBkZWZhdWx0cyB0byAxMDAwLCB1cHBlciBsaW1pdCBzZXQgYXQgMTUwMDAKICAgICAqIEByZXR1cm4gYXJyYXkgYSB0b3RhbCBvZiBhbGwgaGFyZCBib3VuY2VkIGVtYWlscyBhbmQgdGhlIHNwZWNpZmljIGVtYWlscyBmb3IgdGhpcyBwYWdlCiAgICAgKiBAcmV0dXJuZiBpbnQgdG90YWwgICB0aGUgdG90YWwgbnVtYmVyIG9mIGhhcmQgYm91bmNlcyBmb3IgdGhlIGNhbXBhaWduCiAgICAgKiBAcmV0dXJuZiBhcnJheSBkYXRhICB0aGUgZnVsbCBlbWFpbCBhZGRyZXNzZXMgdGhhdCBib3VuY2VkCiAgICAgICAgICAgICAgICBzdHJpbmcgZW1haWwgdGhlIGVtYWlsIGFkZHJlc3MgdGhhdCBib3VuY2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduSGFyZEJvdW5jZXMoJGNpZCwgJHN0YXJ0PTAsICRsaW1pdD0xMDAwKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInN0YXJ0Il0gPSAkc3RhcnQ7CiAgICAgICAgJHBhcmFtc1sibGltaXQiXSA9ICRsaW1pdDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduSGFyZEJvdW5jZXMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIDxzdHJvbmc+REVQUkVDQVRFRDwvc3Ryb25nPiBHZXQgYWxsIGVtYWlsIGFkZHJlc3NlcyB3aXRoIFNvZnQgQm91bmNlcyBmb3IgYSBnaXZlbiBjYW1wYWlnbgogICAgICoKICAgICAqIEBkZXByZWNhdGVkIFNlZSBjYW1wYWlnbk1lbWJlcnMoKSBmb3IgYSByZXBsYWNlbWVudAogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBTdGF0cwogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gcHVsbCBib3VuY2VzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHBhcmFtIGludCAgICAkc3RhcnQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIHBhZ2UgbnVtYmVyIHRvIHN0YXJ0IGF0IC0gZGVmYXVsdHMgdG8gMXN0IHBhZ2Ugb2YgZGF0YSAocGFnZSAwKQogICAgICogQHBhcmFtIGludCAgICAkbGltaXQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybiAtIGRlZmF1bHRzIHRvIDEwMDAsIHVwcGVyIGxpbWl0IHNldCBhdCAxNTAwMAogICAgICogQHJldHVybiBhcnJheSBhIHRvdGFsIG9mIGFsbCBzb2Z0IGJvdW5jZWQgZW1haWxzIGFuZCB0aGUgc3BlY2lmaWMgZW1haWxzIGZvciB0aGlzIHBhZ2UKICAgICAqIEByZXR1cm5mIGludCB0b3RhbCAgIHRoZSB0b3RhbCBudW1iZXIgb2Ygc29mdCBib3VuY2VzIGZvciB0aGUgY2FtcGFpZ24KICAgICAqIEByZXR1cm5mIGFycmF5IGRhdGEgdGhlIGZ1bGwgZW1haWwgYWRkcmVzc2VzIHRoYXQgYm91bmNlZAogICAgICAgICAgICAgICAgc3RyaW5nIGVtYWlsIHRoZSBlbWFpbCBhZGRyZXNzIHRoYXQgYm91bmNlZAogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnblNvZnRCb3VuY2VzKCRjaWQsICRzdGFydD0wLCAkbGltaXQ9MTAwMCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICAkcGFyYW1zWyJzdGFydCJdID0gJHN0YXJ0OwogICAgICAgICRwYXJhbXNbImxpbWl0Il0gPSAkbGltaXQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnblNvZnRCb3VuY2VzIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgYWxsIHVuc3Vic2NyaWJlZCBlbWFpbCBhZGRyZXNzZXMgZm9yIGEgZ2l2ZW4gY2FtcGFpZ24KICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgU3RhdHMKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIHB1bGwgYm91bmNlcyBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEBwYXJhbSBpbnQgICAgJHN0YXJ0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBwYWdlIG51bWJlciB0byBzdGFydCBhdCAtIGRlZmF1bHRzIHRvIDFzdCBwYWdlIG9mIGRhdGEgIChwYWdlIDApCiAgICAgKiBAcGFyYW0gaW50ICAgICRsaW1pdCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuIC0gZGVmYXVsdHMgdG8gMTAwMCwgdXBwZXIgbGltaXQgc2V0IGF0IDE1MDAwCiAgICAgKiBAcmV0dXJuIGFycmF5IGVtYWlsIGFkZHJlc3NlcyB0aGF0IHVuc3Vic2NyaWJlZCBmcm9tIHRoaXMgY2FtcGFpZ24gYWxvbmcgd2l0aCByZWFzb25zLCBpZiBnaXZlbiAKICAgICAqIEByZXR1cm4gYXJyYXkgYSB0b3RhbCBvZiBhbGwgdW5zdWJzY3JpYmVkIGVtYWlscyBhbmQgdGhlIHNwZWNpZmljIGVtYWlscyBmb3IgdGhpcyBwYWdlCiAgICAgKiBAcmV0dXJuZiBpbnQgdG90YWwgICB0aGUgdG90YWwgbnVtYmVyIG9mIHVuc3Vic2NyaWJlcyBmb3IgdGhlIGNhbXBhaWduCiAgICAgKiBAcmV0dXJuZiBhcnJheSBkYXRhICB0aGUgZnVsbCBlbWFpbCBhZGRyZXNzZXMgdGhhdCB1bnN1YnNjcmliZWQKICAgICAgICAgICAgICAgIHN0cmluZyBlbWFpbCB0aGUgZW1haWwgYWRkcmVzcyB0aGF0IHVuc3Vic2NyaWJlZAogICAgICAgICAgICAgICAgc3RyaW5nIHJlYXNvbiBGb3IgdW5zdWJzY3JpYmVzIG9ubHkgLSB0aGUgcmVhc29uIGNvbGxlY3RlZCBmb3IgdGhlIHVuc3Vic2NyaWJlLiBJZiBwb3B1bGF0ZWQsIG9uZSBvZiAnTk9STUFMJywnTk9TSUdOVVAnLCdJTkFQUFJPUFJJQVRFJywnU1BBTScsJ09USEVSJwogICAgICAgICAgICAgICAgc3RyaW5nIHJlYXNvbl90ZXh0IEZvciB1bnN1YnNjcmliZXMgb25seSAtIGlmIHRoZSByZWFzb24gaXMgT1RIRVIsIHRoZSB0ZXh0IGVudGVyZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduVW5zdWJzY3JpYmVzKCRjaWQsICRzdGFydD0wLCAkbGltaXQ9MTAwMCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICAkcGFyYW1zWyJzdGFydCJdID0gJHN0YXJ0OwogICAgICAgICRwYXJhbXNbImxpbWl0Il0gPSAkbGltaXQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnblVuc3Vic2NyaWJlcyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogR2V0IGFsbCBlbWFpbCBhZGRyZXNzZXMgdGhhdCBjb21wbGFpbmVkIGFib3V0IGEgZ2l2ZW4gY2FtcGFpZ24KICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgU3RhdHMKICAgICAqCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9jYW1wYWlnbkFidXNlUmVwb3J0cy5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIHB1bGwgYWJ1c2UgcmVwb3J0cyBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEBwYXJhbSBpbnQgJHN0YXJ0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBwYWdlIG51bWJlciB0byBzdGFydCBhdCAtIGRlZmF1bHRzIHRvIDFzdCBwYWdlIG9mIGRhdGEgIChwYWdlIDApCiAgICAgKiBAcGFyYW0gaW50ICRsaW1pdCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuIC0gZGVmYXVsdHMgdG8gNTAwLCB1cHBlciBsaW1pdCBzZXQgYXQgMTAwMAogICAgICogQHBhcmFtIHN0cmluZyAkc2luY2Ugb3B0aW9uYWwgcHVsbCBvbmx5IG1lc3NhZ2VzIHNpbmNlIHRoaXMgdGltZSAtIHVzZSBZWVlZLU1NLUREIEhIOklJOlNTIGZvcm1hdCBpbiA8c3Ryb25nPkdNVDwvc3Ryb25nPgogICAgICogQHJldHVybiBhcnJheSByZXBvcnRzIHRoZSBhYnVzZSByZXBvcnRzIGZvciB0aGlzIGNhbXBhaWduCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgZGF0ZSBkYXRlL3RpbWUgdGhlIGFidXNlIHJlcG9ydCB3YXMgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZAogICAgICogQHJldHVybmYgc3RyaW5nIGVtYWlsIHRoZSBlbWFpbCBhZGRyZXNzIHRoYXQgcmVwb3J0ZWQgYWJ1c2UKICAgICAqIEByZXR1cm5mIHN0cmluZyB0eXBlIGFuIGludGVybmFsIHR5cGUgZ2VuZXJhbGx5IHNwZWNpZnlpbmcgdGhlIG9yZ2luYXRpbmcgbWFpbCBwcm92aWRlciAtIG1heSBub3QgYmUgdXNlZnVsIG91dHNpZGUgb2YgZmlsbGluZyByZXBvcnQgdmlld3MKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25BYnVzZVJlcG9ydHMoJGNpZCwgJHNpbmNlPU5VTEwsICRzdGFydD0wLCAkbGltaXQ9NTAwKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInNpbmNlIl0gPSAkc2luY2U7CiAgICAgICAgJHBhcmFtc1sic3RhcnQiXSA9ICRzdGFydDsKICAgICAgICAkcGFyYW1zWyJsaW1pdCJdID0gJGxpbWl0OwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiY2FtcGFpZ25BYnVzZVJlcG9ydHMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSB0ZXh0IHByZXNlbnRlZCBpbiBvdXIgYXBwIGZvciBob3cgYSBjYW1wYWlnbiBwZXJmb3JtZWQgYW5kIGFueSBhZHZpY2Ugd2UgbWF5IGhhdmUgZm9yIHlvdSAtIGJlc3QKICAgICAqIHN1aXRlZCBmb3IgZGlzcGxheSBpbiBjdXN0b21pemVkIHJlcG9ydHMgcGFnZXMuIE5vdGU6IHNvbWUgbWVzc2FnZXMgd2lsbCBjb250YWluIEhUTUwgLSBjbGVhbiB0YWdzIGFzIG5lY2Vzc2FyeQogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBTdGF0cwogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2NhbXBhaWduQWR2aWNlLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gcHVsbCBhZHZpY2UgdGV4dCBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEByZXR1cm4gYXJyYXkgYWR2aWNlIG9uIHRoZSBjYW1wYWlnbidzIHBlcmZvcm1hbmNlCiAgICAgKiBAcmV0dXJuZiBtc2cgdGhlIGFkdmljZSBtZXNzYWdlCiAgICAgKiBAcmV0dXJuZiB0eXBlIHRoZSAidHlwZSIgb2YgdGhlIG1lc3NhZ2UuIG9uZSBvZjogbmVnYXRpdmUsIHBvc2l0aXZlLCBvciBuZXV0cmFsCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduQWR2aWNlKCRjaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbkFkdmljZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIEdvb2dsZSBBbmFseXRpY3MgZGF0YSB3ZSd2ZSBjb2xsZWN0ZWQgZm9yIHRoaXMgY2FtcGFpZ24uIE5vdGUsIHJlcXVpcmVzIEdvb2dsZSBBbmFseXRpY3MgQWRkLW9uIHRvIGJlIGluc3RhbGxlZCBhbmQgY29uZmlndXJlZC4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgU3RhdHMKICAgICAqCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9jYW1wYWlnbkFuYWx5dGljcy5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIHB1bGwgYm91bmNlcyBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEByZXR1cm4gYXJyYXkgYW5hbHl0aWNzIHdlJ3ZlIGNvbGxlY3RlZCBmb3IgdGhlIHBhc3NlZCBjYW1wYWlnbi4KICAgICAqIEByZXR1cm5mIGludCB2aXNpdHMgbnVtYmVyIG9mIHZpc2l0cwogICAgICogQHJldHVybmYgaW50IHBhZ2VzIG51bWJlciBvZiBwYWdlIHZpZXdzCiAgICAgKiBAcmV0dXJuZiBpbnQgbmV3X3Zpc2l0cyBuZXcgdmlzaXRzIHJlY29yZGVkCiAgICAgKiBAcmV0dXJuZiBpbnQgYm91bmNlcyB2aXN0b3JzIHdobyAiYm91bmNlZCIgZnJvbSB5b3VyIHNpdGUKICAgICAqIEByZXR1cm5mIGRvdWJsZSB0aW1lX29uX3NpdGUgdGhlIHRvdGFsIHRpbWUgdmlzaXRvcnMgc3BlbnQgb24geW91ciBzaXRlcwogICAgICogQHJldHVybmYgaW50IGdvYWxfY29udmVyc2lvbnMgbnVtYmVyIG9mIGdvYWxzIGNvbnZlcnRlZAogICAgICogQHJldHVybmYgZG91YmxlIGdvYWxfdmFsdWUgdmFsdWUgb2YgY29udmVyc2lvbiBpbiBkb2xsYXJzCiAgICAgKiBAcmV0dXJuZiBkb3VibGUgcmV2ZW51ZSByZXZlbnVlIGdlbmVyYXRlZCBieSBjYW1wYWlnbgogICAgICogQHJldHVybmYgaW50IHRyYW5zYWN0aW9ucyBudW1iZXIgb2YgdHJhbnNhY3Rpb25zIHRyYWNrZWQKICAgICAqIEByZXR1cm5mIGludCBlY29tbV9jb252ZXJzaW9ucyBudW1iZXIgRWNvbW1lcmNlIHRyYW5zYWN0aW9ucyB0cmFja2VkCiAgICAgKiBAcmV0dXJuZiBhcnJheSBnb2FscyBhbiBhcnJheSBjb250YWluaW5nIGdvYWwgbmFtZXMgYW5kIG51bWJlciBvZiBjb252ZXJzaW9ucwogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnbkFuYWx5dGljcygkY2lkKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiY2FtcGFpZ25BbmFseXRpY3MiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSBjb3VudHJpZXMgYW5kIG51bWJlciBvZiBvcGVucyB0cmFja2VkIGZvciBlYWNoLiBFbWFpbCBhZGRyZXNzIGFyZSBub3QgcmV0dXJuZWQuCiAgICAgKiAKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBTdGF0cwogICAgICoKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIHB1bGwgYm91bmNlcyBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEByZXR1cm4gYXJyYXkgY291bnRyaWVzIGFuIGFycmF5IG9mIGNvdW50cmllcyB3aGVyZSBvcGVucyBvY2N1cnJlZAogICAgICogQHJldHVybmYgc3RyaW5nIGNvZGUgVGhlIElTTzMxNjYgMiBkaWdpdCBjb3VudHJ5IGNvZGUKICAgICAqIEByZXR1cm5mIHN0cmluZyBuYW1lIEEgdmVyc2lvbiBvZiB0aGUgY291bnRyeSBuYW1lLCBpZiB3ZSBoYXZlIGl0CiAgICAgKiBAcmV0dXJuZiBpbnQgb3BlbnMgVGhlIHRvdGFsIG51bWJlciBvZiBvcGVucyB0aGF0IG9jY3VycmVkIGluIHRoZSBjb3VudHJ5CiAgICAgKiBAcmV0dXJuZiBib29sIHJlZ2lvbl9kZXRhaWwgV2hldGhlciBvciBub3QgYSBzdWJzZXF1ZW50IGNhbGwgdG8gY2FtcGFpZ25HZW9PcGVuc0J5Q291bnRyeSgpIHdpbGwgcmV0dXJuIGFueXRoaW5nCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduR2VvT3BlbnMoJGNpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduR2VvT3BlbnMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSByZWdpb25zIGFuZCBudW1iZXIgb2Ygb3BlbnMgdHJhY2tlZCBmb3IgYSBjZXJ0YWluIGNvdW50cnkuIEVtYWlsIGFkZHJlc3MgYXJlIG5vdCByZXR1cm5lZC4KICAgICAqIAogICAgICogQHNlY3Rpb24gQ2FtcGFpZ24gIFN0YXRzCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gcHVsbCBib3VuY2VzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHBhcmFtIHN0cmluZyAkY29kZSBBbiBJU08zMTY2IDIgZGlnaXQgY291bnRyeSBjb2RlCiAgICAgKiBAcmV0dXJuIGFycmF5IHJlZ2lvbnMgYW4gYXJyYXkgb2YgcmVnaW9ucyB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvdW50cnkgd2hlcmUgb3BlbnMgb2NjdXJyZWQuIAogICAgICogQHJldHVybmYgc3RyaW5nIGNvZGUgQW4gaW50ZXJuYWwgY29kZSBmb3IgdGhlIHJlZ2lvbi4gV2hlbiB0aGlzIGlzIGJsYW5rLCBpdCBpbmRpY2F0ZXMgd2Uga25vdyB0aGUgY291bnRyeSwgYnV0IG5vdCB0aGUgcmVnaW9uCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgbmFtZSBUaGUgbmFtZSBvZiB0aGUgcmVnaW9uLCBpZiB3ZSBoYXZlIG9uZS4gRm9yIGJsYW5rICJjb2RlIiB2YWx1ZXMsIHRoaXMgd2lsbCBiZSAiUmVzdCBvZiBDb3VudHJ5IgogICAgICogQHJldHVybmYgaW50IG9wZW5zIFRoZSB0b3RhbCBudW1iZXIgb2Ygb3BlbnMgdGhhdCBvY2N1cnJlZCBpbiB0aGUgY291bnRyeQogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnbkdlb09wZW5zRm9yQ291bnRyeSgkY2lkLCAkY29kZSkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICAkcGFyYW1zWyJjb2RlIl0gPSAkY29kZTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduR2VvT3BlbnNGb3JDb3VudHJ5IiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgdHJhY2tlZCBlZXB1cmwgbWVudGlvbnMgb24gVHdpdHRlcgogICAgICogCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgU3RhdHMKICAgICAqCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBjYW1wYWlnbiBpZCB0byBwdWxsIGJvdW5jZXMgZm9yIChjYW4gYmUgZ2F0aGVyZWQgdXNpbmcgY2FtcGFpZ25zKCkpCiAgICAgKiBAcmV0dXJuIGFycmF5IHN0YXRzIGFuIGFycmF5IGNvbnRhaW5pbmcgdHdlZXRzLCByZXR3ZWV0cywgY2xpY2tzLCBhbmQgcmVmZXJyZXIgcmVsYXRlZCB0byB1c2luZyB0aGUgY2FtcGFpZ24ncyBlZXB1cmwKICAgICAqIEByZXR1cm5mIGFycmF5IHR3aXR0ZXIgdmFyaW91cyBUd2l0dGVyIHJlbGF0ZWQgc3RhdHMKICAgICAgICAgICAgaW50IHR3ZWV0cyBUb3RhbCBudW1iZXIgb2YgdHdlZXRzIHNlZW4KICAgICAgICAgICAgc3RyaW5nIGZpcnN0X3R3ZWV0IGRhdGUgYW5kIHRpbWUgb2YgdGhlIGZpcnN0IHR3ZWV0IHNlZW4KICAgICAgICAgICAgc3RyaW5nIGxhc3RfdHdlZXQgZGF0ZSBhbmQgdGltZSBvZiB0aGUgbGFzdCB0d2VldCBzZWVuCiAgICAgICAgICAgIGludCByZXR3ZWV0cyBUb3RhbCBudW1iZXIgb2YgcmV0d2VldHMgc2VlbgogICAgICAgICAgICBzdHJpbmcgZmlyc3RfcmV0d2VldCBkYXRlIGFuZCB0aW1lIG9mIHRoZSBmaXJzdCByZXR3ZWV0IHNlZW4KICAgICAgICAgICAgc3RyaW5nIGxhc3RfcmV0d2VldCBkYXRlIGFuZCB0aW1lIG9mIHRoZSBsYXN0IHJldHdlZXQgc2VlbgogICAgICAgICAgICBhcnJheSBzdGF0dXNlcyBhbiBhcnJheSBvZiBzdGF0dXNlcyByZWNvcmRlZCBpbmNsZHVpbmcgdGhlIHN0YXR1cywgc2NyZWVuX25hbWUsIHN0YXR1c19pZCwgYW5kIGRhdGV0aW1lIGZpZWxkcyBwbHVzIGFuIGlzX3JldHdlZXQgZmxhZwogICAgICogQHJldHVybmYgYXJyYXkgY2xpY2tzIHN0YXRzIHJlbGF0ZWQgdG8gY2xpY2stdGhyb3VnaHMgb24gdGhlIGVlcHVybAogICAgICAgICAgICBpbnQgY2xpY2tzIFRvdGFsIG51bWJlciBvZiBjbGlja3Mgc2VlbgogICAgICAgICAgICBzdHJpbmcgZmlyc3RfY2xpY2sgZGF0ZSBhbmQgdGltZSBvZiB0aGUgZmlyc3QgY2xpY2sgc2VlbgogICAgICAgICAgICBzdHJpbmcgbGFzdF9jbGljayBkYXRlIGFuZCB0aW1lIG9mIHRoZSBmaXJzdCBjbGljayBzZWVuCiAgICAgICAgICAgIGFycmF5IGxvY2F0aW9ucyBhbiBhcnJheSBvZiBnZW9ncmFwaGljIGxvY2F0aW9ucyBpbmNsdWRpbmcgY291bnRyeSwgcmVnaW9uLCBhbmQgdG90YWwgY2xpY2tzCiAgICAgKiBAcmV0dXJuZiBhcnJheSByZWZlcnJlcnMgYW4gYXJyYXkgb2YgYXJyYXlzLCBlYWNoIGNvbnRhaW5pbmcKICAgICAgICAgICAgc3RyaW5nIHJlZmVycmVyIHRoZSByZWZlcnJlciwgdHJ1bmNhdGVkIHRvIDEwMCBieXRlcwogICAgICAgICAgICBpbnQgY2xpY2tzIFRvdGFsIG51bWJlciBvZiBjbGlja3Mgc2VlbiBmcm9tIHRoaXMgcmVmZXJyZXIKICAgICAgICAgICAgc3RyaW5nIGZpcnN0X2NsaWNrIGRhdGUgYW5kIHRpbWUgb2YgdGhlIGZpcnN0IGNsaWNrIHNlZW4gZnJvbSB0aGlzIHJlZmVycmVyCiAgICAgICAgICAgIHN0cmluZyBsYXN0X2NsaWNrIGRhdGUgYW5kIHRpbWUgb2YgdGhlIGZpcnN0IGNsaWNrIHNlZW4gZnJvbSB0aGlzIHJlZmVycmVyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduRWVwVXJsU3RhdHMoJGNpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduRWVwVXJsU3RhdHMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSBtb3N0IHJlY2VudCBmdWxsIGJvdW5jZSBtZXNzYWdlIGZvciBhIHNwZWNpZmljIGVtYWlsIGFkZHJlc3Mgb24gdGhlIGdpdmVuIGNhbXBhaWduLiAKICAgICAqIE1lc3NhZ2VzIG92ZXIgMzAgZGF5cyBvbGQgYXJlIHN1YmplY3QgdG8gYmVpbmcgcmVtb3ZlZAogICAgICogCiAgICAgKiAKICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBTdGF0cwogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gcHVsbCBib3VuY2VzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHBhcmFtIHN0cmluZyAkZW1haWwgdGhlIGVtYWlsIGFkZHJlc3Mgb3IgdW5pcXVlIGlkIG9mIHRoZSBtZW1iZXIgdG8gcHVsbCBhIGJvdW5jZSBtZXNzYWdlIGZvci4KICAgICAqIEByZXR1cm4gYXJyYXkgdGhlIGZ1bGwgYm91bmNlIG1lc3NhZ2UgZm9yIHRoaXMgZW1haWwrY2FtcGFpZ24gYWxvbmcgd2l0aCBzb21lIGV4dHJhIGRhdGEuCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgZGF0ZSBkYXRlL3RpbWUgdGhlIGJvdW5jZSB3YXMgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZAogICAgICogQHJldHVybmYgc3RyaW5nIGVtYWlsIHRoZSBlbWFpbCBhZGRyZXNzIHRoYXQgYm91bmNlZAogICAgICogQHJldHVybmYgc3RyaW5nIG1lc3NhZ2UgdGhlIGVudGlyZSBib3VuY2UgbWVzc2FnZSByZWNlaXZlZAogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnbkJvdW5jZU1lc3NhZ2UoJGNpZCwgJGVtYWlsKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbImVtYWlsIl0gPSAkZW1haWw7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbkJvdW5jZU1lc3NhZ2UiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIHRoZSBmdWxsIGJvdW5jZSBtZXNzYWdlcyBmb3IgdGhlIGdpdmVuIGNhbXBhaWduLiBOb3RlIHRoYXQgdGhpcyBjYW4gcmV0dXJuIHZlcnkgbGFyZ2UgYW1vdW50cwogICAgICogb2YgZGF0YSBkZXBlbmRpbmcgb24gaG93IGxhcmdlIHRoZSBjYW1wYWlnbiB3YXMgYW5kIGhvdyBtdWNoIGNydWZ0IHRoZSBib3VuY2UgcHJvdmlkZXIgcmV0dXJuZWQuIEFsc28sCiAgICAgKiBtZXNzYWdlIG92ZXIgMzAgZGF5cyBvbGQgYXJlIHN1YmplY3QgdG8gYmVpbmcgcmVtb3ZlZAogICAgICogCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgU3RhdHMKICAgICAqCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9jYW1wYWlnbkJvdW5jZU1lc3NhZ2VzLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gcHVsbCBib3VuY2VzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHBhcmFtIGludCAkc3RhcnQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIHBhZ2UgbnVtYmVyIHRvIHN0YXJ0IGF0IC0gZGVmYXVsdHMgdG8gMXN0IHBhZ2Ugb2YgZGF0YSAgKHBhZ2UgMCkKICAgICAqIEBwYXJhbSBpbnQgJGxpbWl0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4gLSBkZWZhdWx0cyB0byAyNSwgdXBwZXIgbGltaXQgc2V0IGF0IDUwCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzaW5jZSBvcHRpb25hbCBwdWxsIG9ubHkgbWVzc2FnZXMgc2luY2UgdGhpcyB0aW1lIC0gdXNlIFlZWVktTU0tREQgZm9ybWF0IGluIDxzdHJvbmc+R01UPC9zdHJvbmc+ICh3ZSBvbmx5IHN0b3JlIHRoZSBkYXRlLCBub3QgdGhlIHRpbWUpCiAgICAgKiBAcmV0dXJuIGFycmF5IGJvdW5jZXMgdGhlIGZ1bGwgYm91bmNlIG1lc3NhZ2VzIGZvciB0aGlzIGNhbXBhaWduCiAgICAgKiBAcmV0dXJuZiBpbnQgdG90YWwgdGhhdCB0b3RhbCBudW1iZXIgb2YgYm91bmNlIG1lc3NhZ2VzIGZvciB0aGUgY2FtcGFpZ24KICAgICAqIEByZXR1cm5mIGFycmF5IGRhdGEgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSBmb3IgdGhpcyBwYWdlCiAgICAgICAgICAgICAgICBzdHJpbmcgZGF0ZSBkYXRlL3RpbWUgdGhlIGJvdW5jZSB3YXMgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZAogICAgICAgICAgICAgICAgc3RyaW5nIGVtYWlsIHRoZSBlbWFpbCBhZGRyZXNzIHRoYXQgYm91bmNlZAogICAgICAgICAgICAgICAgc3RyaW5nIG1lc3NhZ2UgdGhlIGVudGlyZSBib3VuY2UgbWVzc2FnZSByZWNlaXZlZAogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnbkJvdW5jZU1lc3NhZ2VzKCRjaWQsICRzdGFydD0wLCAkbGltaXQ9MjUsICRzaW5jZT1OVUxMKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInN0YXJ0Il0gPSAkc3RhcnQ7CiAgICAgICAgJHBhcmFtc1sibGltaXQiXSA9ICRsaW1pdDsKICAgICAgICAkcGFyYW1zWyJzaW5jZSJdID0gJHNpbmNlOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiY2FtcGFpZ25Cb3VuY2VNZXNzYWdlcyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIEVjb21tZXJjZSBPcmRlcnMgdHJhY2tlZCBieSBjYW1wYWlnbkVjb21tT3JkZXJBZGQoKQogICAgICogCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgU3RhdHMKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIHB1bGwgYm91bmNlcyBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEBwYXJhbSBpbnQgJHN0YXJ0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBwYWdlIG51bWJlciB0byBzdGFydCBhdCAtIGRlZmF1bHRzIHRvIDFzdCBwYWdlIG9mIGRhdGEgIChwYWdlIDApCiAgICAgKiBAcGFyYW0gaW50ICRsaW1pdCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuIC0gZGVmYXVsdHMgdG8gMTAwLCB1cHBlciBsaW1pdCBzZXQgYXQgNTAwCiAgICAgKiBAcGFyYW0gc3RyaW5nICRzaW5jZSBvcHRpb25hbCBwdWxsIG9ubHkgbWVzc2FnZXMgc2luY2UgdGhpcyB0aW1lIC0gdXNlIFlZWVktTU0tREQgSEg6SUk6U1MgZm9ybWF0IGluIDxzdHJvbmc+R01UPC9zdHJvbmc+CiAgICAgKiBAcmV0dXJuIGFycmF5IHRoZSB0b3RhbCBtYXRjaGluZyBvcmRlcnMgYW5kIHRoZSBzcGVjaWZpYyBvcmRlcnMgZm9yIHRoZSByZXF1ZXN0ZWQgcGFnZQogICAgICogQHJldHVybmYgaW50IHRvdGFsIHRoZSB0b3RhbCBtYXRjaGluZyBvcmRlcnMKICAgICAqIEByZXR1cm5mIGFycmF5IGRhdGEgdGhlIGFjdHVhbCBkYXRhIGZvciBlYWNoIG9yZGVyIGJlaW5nIHJldHVybmVkCiAgICAgICAgICAgIHN0cmluZyBzdG9yZV9pZCB0aGUgc3RvcmUgaWQgZ2VuZXJhdGVkIGJ5IHRoZSBwbHVnaW4gdXNlZCB0byB1bmlxdWVseSBpZGVudGlmeSBhIHN0b3JlCiAgICAgICAgICAgIHN0cmluZyBzdG9yZV9uYW1lIHRoZSBzdG9yZSBuYW1lIGNvbGxlY3RlZCBieSB0aGUgcGx1Z2luIC0gb2Z0ZW4gdGhlIGRvbWFpbiBuYW1lCiAgICAgICAgICAgIHN0cmluZyBvcmRlcl9pZCB0aGUgaW50ZXJuYWwgb3JkZXIgaWQgdGhlIHN0b3JlIHRyYWNrZWQgdGhpcyBvcmRlciBieQogICAgICAgICAgICBzdHJpbmcgZW1haWwgIHRoZSBlbWFpbCBhZGRyZXNzIHRoYXQgcmVjZWl2ZWQgdGhpcyBjYW1wYWlnbiBhbmQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb3JkZXIKICAgICAgICAgICAgZG91YmxlIG9yZGVyX3RvdGFsIHRoZSBvcmRlciB0b3RhbAogICAgICAgICAgICBkb3VibGUgdGF4X3RvdGFsIHRoZSB0b3RhbCB0YXggZm9yIHRoZSBvcmRlciAoaWYgY29sbGVjdGVkKQogICAgICAgICAgICBkb3VibGUgc2hpcF90b3RhbCB0aGUgc2hpcHBpbmcgdG90YWwgZm9yIHRoZSBvcmRlciAoaWYgY29sbGVjdGVkKQogICAgICAgICAgICBzdHJpbmcgb3JkZXJfZGF0ZSB0aGUgZGF0ZSB0aGUgb3JkZXIgd2FzIHRyYWNrZWQgLSBmcm9tIHRoZSBzdG9yZSBpZiBwb3NzaWJsZSwgb3RoZXJ3aXNlIHRoZSBHTVQgdGltZSB3ZSByZWNpZXZlZCBpdAogICAgICAgICAgICBhcnJheSBsaW5lcyBjb250YWluaW5nIGRldGFpbCBvZiB0aGUgb3JkZXIgLSBwcm9kdWN0LCBjYXRlZ29yeSwgcXVhbnRpdHksIGl0ZW0gY29zdAogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnbkVjb21tT3JkZXJzKCRjaWQsICRzdGFydD0wLCAkbGltaXQ9MTAwLCAkc2luY2U9TlVMTCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICAkcGFyYW1zWyJzdGFydCJdID0gJHN0YXJ0OwogICAgICAgICRwYXJhbXNbImxpbWl0Il0gPSAkbGltaXQ7CiAgICAgICAgJHBhcmFtc1sic2luY2UiXSA9ICRzaW5jZTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduRWNvbW1PcmRlcnMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgVVJMIHRvIGEgY3VzdG9taXplZCA8YSBocmVmPSJodHRwOi8vZWVwdXJsLmNvbS9nS21MIiB0YXJnZXQ9Il9ibGFuayI+VklQIFJlcG9ydDwvYT4gZm9yIHRoZSBzcGVjaWZpZWQgY2FtcGFpZ24gYW5kIG9wdGlvbmFsbHkgc2VuZCBhbiBlbWFpbCB0byBzb21lb25lIHdpdGggbGlua3MgdG8gaXQuIE5vdGUgc3Vic2VxdWVudCBjYWxscyB3aWxsIG92ZXJ3cml0ZSBhbnl0aGluZyBhbHJlYWR5IHNldCBmb3IgdGhlIHNhbWUgY2FtcGlnbiAoZWcsIHRoZSBwYXNzd29yZCkKICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gc2hhcmUgYSByZXBvcnQgZm9yIChjYW4gYmUgZ2F0aGVyZWQgdXNpbmcgY2FtcGFpZ25zKCkpCiAgICAgKiBAcGFyYW0gYXJyYXkgICRvcHRzIG9wdGlvbmFsIHZhcmlvdXMgcGFyYW1ldGVycyB3aGljaCBjYW4gYmUgdXNlZCB0byBjb25maWd1cmUgdGhlIHNoYXJlZCByZXBvcnQKICAgICAgICAgICAgc3RyaW5nICBoZWFkZXJfdHlwZSBvcHRpb25hbCAtICJ0ZXh0IiBvciAiaW1hZ2UnLCBkZWZhdWx0cyB0byAidGV4dCcKICAgICAgICAgICAgc3RyaW5nICBoZWFkZXJfZGF0YSBvcHRpb25hbCAtIGlmICJoZWFkZXJfdHlwZSIgaXMgdGV4dCwgdGhlIHRleHQgdG8gZGlzcGxheS4gaWYgImhlYWRlcl90eXBlIiBpcyAiaW1hZ2UiIGEgdmFsaWQgVVJMIHRvIGFuIGltYWdlIGZpbGUuIE5vdGUgdGhhdCBpbWFnZXMgd2lsbCBiZSByZXNpemVkIHRvIGJlIG5vIG1vcmUgdGhhbiA1MDB4MTUwLiBEZWZhdWx0cyB0byB0aGUgQWNjb3VudHMgQ29tcGFueSBOYW1lLgogICAgICAgICAgICBib29sZWFuICAgIHNlY3VyZSBvcHRpb25hbCAtIHdoZXRoZXIgdG8gcmVxdWlyZSBhIHBhc3N3b3JkIGZvciB0aGUgc2hhcmVkIHJlcG9ydC4gZGVmYXVsdHMgdG8gInRydWUiCiAgICAgICAgICAgIHN0cmluZyAgcGFzc3dvcmQgb3B0aW9uYWwgLSBpZiBzZWN1cmUgaXMgdHJ1ZSBhbmQgYSBwYXNzd29yZCBpcyBub3QgaW5jbHVkZWQsIHdlIHdpbGwgZ2VuZXJhdGUgb25lLiBJdCBpcyBhbHdheXMgcmV0dXJuZWQuCiAgICAgICAgICAgIHN0cmluZyAgdG9fZW1haWwgb3B0aW9uYWwgLSBvcHRpb25hbCwgZW1haWwgYWRkcmVzcyB0byBzaGFyZSB0aGUgcmVwb3J0IHdpdGggLSBubyB2YWx1ZSBtZWFucyBhbiBlbWFpbCB3aWxsIG5vdCBiZSBzZW50CiAgICAgICAgICAgIGFycmF5ICAgdGhlbWUgIG9wdGlvbmFsIC0gYW4gYXJyYXkgY29udGFpbmluZyBlaXRoZXIgMyBvciA2IGNoYXJhY3RlciBjb2xvciBjb2RlIHZhbHVlcyBmb3I6ICJiZ19jb2xvciIsICJoZWFkZXJfY29sb3IiLCAiY3VycmVudF90YWIiLCAiY3VycmVudF90YWJfdGV4dCIsICJub3JtYWxfdGFiIiwgIm5vcm1hbF90YWJfdGV4dCIsICJob3Zlcl90YWIiLCAiaG92ZXJfdGFiX3RleHQiCiAgICAgICAgICAgIHN0cmluZyAgY3NzX3VybCAgICBvcHRpb25hbCAtIGEgbGluayB0byBhbiBleHRlcm5hbCBDU1MgZmlsZSB0byBiZSBpbmNsdWRlZCBhZnRlciBvdXIgZGVmYXVsdCBDU1MgKGh0dHA6Ly92aXAtcmVwb3J0cy5uZXQvY3NzL3ZpcC5jc3MpIDxzdHJvbmc+b25seSBpZjwvc3Ryb25nPiBsb2FkZWQgdmlhIHRoZSAic2VjdXJlX3VybCIgLSBtYXggMjU1IGJ5dGVzCiAgICAgKiBAcmV0dXJuIHN0cnVjdCBTdHJ1Y3QgY29udGFpbmluZyBkZXRhaWxzIGZvciB0aGUgc2hhcmVkIHJlcG9ydAogICAgICogQHJldHVybmYgc3RyaW5nIHRpdGxlIFRoZSBUaXRsZSBvZiB0aGUgQ2FtcGFpZ24gYmVpbmcgc2hhcmVkCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgdXJsIFRoZSBVUkwgdG8gdGhlIHNoYXJlZCByZXBvcnQKICAgICAqIEByZXR1cm5mIHN0cmluZyBzZWN1cmVfdXJsIFRoZSBVUkwgdG8gdGhlIHNoYXJlZCByZXBvcnQsIGluY2x1ZGluZyB0aGUgcGFzc3dvcmQgKGdvb2QgZm9yIGxvYWRpbmcgaW4gYW4gSUZSQU1FKS4gRm9yIG5vbi1zZWN1cmUgcmVwb3J0cywgdGhpcyB3aWxsIG5vdCBiZSByZXR1cm5lZAogICAgICogQHJldHVybmYgc3RyaW5nIHBhc3N3b3JkIElmIHNlY3VyZWQsIHRoZSBwYXNzd29yZCBmb3IgdGhlIHJlcG9ydCwgb3RoZXJ3aXNlIHRoaXMgZmllbGQgd2lsbCBub3QgYmUgcmV0dXJuZWQKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25TaGFyZVJlcG9ydCgkY2lkLCAkb3B0cz1hcnJheSAoCikpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgJHBhcmFtc1sib3B0cyJdID0gJG9wdHM7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnblNoYXJlUmVwb3J0IiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNvbnRlbnQgKGJvdGggaHRtbCBhbmQgdGV4dCkgZm9yIGEgY2FtcGFpZ24gZWl0aGVyIGFzIGl0IHdvdWxkIGFwcGVhciBpbiB0aGUgY2FtcGFpZ24gYXJjaGl2ZSBvciBhcyB0aGUgcmF3LCBvcmlnaW5hbCBjb250ZW50CiAgICAgKgogICAgICogQHNlY3Rpb24gQ2FtcGFpZ24gIFJlbGF0ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIGdldCBjb250ZW50IGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHBhcmFtIGJvb2wgICAkZm9yX2FyY2hpdmUgb3B0aW9uYWwgY29udHJvbHMgd2hldGhlciB3ZSByZXR1cm4gdGhlIEFyY2hpdmUgdmVyc2lvbiAodHJ1ZSkgb3IgdGhlIFJhdyB2ZXJzaW9uIChmYWxzZSksIGRlZmF1bHRzIHRvIHRydWUKICAgICAqIEByZXR1cm4gc3RydWN0IFN0cnVjdCBjb250YWluaW5nIGFsbCBjb250ZW50IGZvciB0aGUgY2FtcGFpZ24gKHNlZSBSZXR1cm5lZCBGaWVsZHMgZm9yIGRldGFpbHMKICAgICAqIEByZXR1cm5mIHN0cmluZyBodG1sIFRoZSBIVE1MIGNvbnRlbnQgdXNlZCBmb3IgdGhlIGNhbXBnYWluIHdpdGggbWVyZ2UgdGFncyBpbnRhY3QKICAgICAqIEByZXR1cm5mIHN0cmluZyB0ZXh0IFRoZSBUZXh0IGNvbnRlbnQgdXNlZCBmb3IgdGhlIGNhbXBnYWluIHdpdGggbWVyZ2UgdGFncyBpbnRhY3QKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25Db250ZW50KCRjaWQsICRmb3JfYXJjaGl2ZT10cnVlKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbImZvcl9hcmNoaXZlIl0gPSAkZm9yX2FyY2hpdmU7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbkNvbnRlbnQiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCB0aGUgSFRNTCB0ZW1wbGF0ZSBjb250ZW50IHNlY3Rpb25zIGZvciBhIGNhbXBhaWduLiBOb3RlIHRoYXQgdGhpcyA8c3Ryb25nPndpbGw8L3N0cm9uZz4gcmV0dXJuIHZlcnkgamFnZ2VkLCBub24tc3RhbmRhcmQgcmVzdWx0cyBiYXNlZCBvbiB0aGUgdGVtcGxhdGUKICAgICAqIGEgY2FtcGFpZ24gaXMgdXNpbmcuIFlvdSBvbmx5IHdhbnQgdG8gdXNlIHRoaXMgaWYgeW91IHdhbnQgdG8gYWxsb3cgZWRpdGluZyB0ZW1wbGF0ZSBzZWN0aW9ucyBpbiB5b3VyIGFwcGxpY2F0b24uIAogICAgICogCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiAgUmVsYXRlZAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gZ2V0IGNvbnRlbnQgZm9yIChjYW4gYmUgZ2F0aGVyZWQgdXNpbmcgY2FtcGFpZ25zKCkpCiAgICAgKiBAcmV0dXJuIGFycmF5IGFycmF5IGNvbnRhaW5pbmcgYWxsIGNvbnRlbnQgc2VjdGlvbiBmb3IgdGhlIGNhbXBhaWduIC0gCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduVGVtcGxhdGVDb250ZW50KCRjaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnblRlbXBsYXRlQ29udGVudCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIGxpc3Qgb2YgZW1haWwgYWRkcmVzc2VzIHRoYXQgb3BlbmVkIGEgZ2l2ZW4gY2FtcGFpZ24gd2l0aCBob3cgbWFueSB0aW1lcyB0aGV5IG9wZW5lZCAtIG5vdGU6IHRoaXMgQUlNIGZ1bmN0aW9uIGlzIGZyZWUgYW5kIGRvZXMKICAgICAqIG5vdCBhY3R1YWxseSByZXF1aXJlIHRoZSBBSU0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZAogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduIFJlcG9ydCBEYXRhCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBjYW1wYWlnbiBpZCB0byBnZXQgb3BlbnMgZm9yIChjYW4gYmUgZ2F0aGVyZWQgdXNpbmcgY2FtcGFpZ25zKCkpCiAgICAgKiBAcGFyYW0gaW50ICAgICRzdGFydCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgcGFnZSBudW1iZXIgdG8gc3RhcnQgYXQgLSBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhICAocGFnZSAwKQogICAgICogQHBhcmFtIGludCAgICAkbGltaXQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybiAtIGRlZmF1bHRzIHRvIDEwMDAsIHVwcGVyIGxpbWl0IHNldCBhdCAxNTAwMAogICAgICogQHJldHVybiBhcnJheSBhcnJheSBjb250YWluaW5nIHRoZSB0b3RhbCByZWNvcmRzIG1hdGNoZWQgYW5kIHRoZSBzcGVjaWZpYyByZWNvcmRzIGZvciB0aGlzIHBhZ2UKICAgICAqIEByZXR1cm5mIGludCB0b3RhbCB0aGUgdG90YWwgbnVtYmVyIG9mIHJlY29yZHMgbWF0Y2hlZAogICAgICogQHJldHVybmYgYXJyYXkgZGF0YSB0aGUgYWN0dWFsIG9wZW5zIGRhdGEsIGluY2x1ZGluZzoKICAgICAgICAgICAgc3RyaW5nIGVtYWlsIEVtYWlsIGFkZHJlc3MgdGhhdCBvcGVuZWQgdGhlIGNhbXBhaWduCiAgICAgICAgICAgIGludCBvcGVuX2NvdW50IFRvdGFsIG51bWJlciBvZiB0aW1lcyB0aGUgY2FtcGFpZ24gd2FzIG9wZW5lZCBieSB0aGlzIGVtYWlsIGFkZHJlc3MKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25PcGVuZWRBSU0oJGNpZCwgJHN0YXJ0PTAsICRsaW1pdD0xMDAwKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInN0YXJ0Il0gPSAkc3RhcnQ7CiAgICAgICAgJHBhcmFtc1sibGltaXQiXSA9ICRsaW1pdDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduT3BlbmVkQUlNIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBlbWFpbCBhZGRyZXNzZXMgdGhhdCBkaWQgbm90IG9wZW4gYSBnaXZlbiBjYW1wYWlnbgogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduIFJlcG9ydCBEYXRhCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBjYW1wYWlnbiBpZCB0byBnZXQgbm8gb3BlbnMgZm9yIChjYW4gYmUgZ2F0aGVyZWQgdXNpbmcgY2FtcGFpZ25zKCkpCiAgICAgKiBAcGFyYW0gaW50ICAgICRzdGFydCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgcGFnZSBudW1iZXIgdG8gc3RhcnQgYXQgLSBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhICAocGFnZSAwKQogICAgICogQHBhcmFtIGludCAgICAkbGltaXQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybiAtIGRlZmF1bHRzIHRvIDEwMDAsIHVwcGVyIGxpbWl0IHNldCBhdCAxNTAwMAogICAgICogQHJldHVybiBhcnJheSBhcnJheSBjb250YWluaW5nIHRoZSB0b3RhbCByZWNvcmRzIG1hdGNoZWQgYW5kIHRoZSBzcGVjaWZpYyByZWNvcmRzIGZvciB0aGlzIHBhZ2UKICAgICAqIEByZXR1cm5mIGludCB0b3RhbCB0aGUgdG90YWwgbnVtYmVyIG9mIHJlY29yZHMgbWF0Y2hlZAogICAgICogQHJldHVybmYgYXJyYXkgZGF0YSB0aGUgZW1haWwgYWRkcmVzc2VzIHRoYXQgZGlkIG5vdCBvcGVuIHRoZSBjYW1wYWlnbgogICAgICAgICAgICBzdHJpbmcgZW1haWwgRW1haWwgYWRkcmVzcyB0aGF0IG9wZW5lZCB0aGUgY2FtcGFpZ24KICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25Ob3RPcGVuZWRBSU0oJGNpZCwgJHN0YXJ0PTAsICRsaW1pdD0xMDAwKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInN0YXJ0Il0gPSAkc3RhcnQ7CiAgICAgICAgJHBhcmFtc1sibGltaXQiXSA9ICRsaW1pdDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduTm90T3BlbmVkQUlNIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGxpc3Qgb2YgZW1haWwgYWRkcmVzc2VzIHRoYXQgY2xpY2tlZCBvbiBhIGdpdmVuIHVybCwgYW5kIGhvdyBtYW55IHRpbWVzIHRoZXkgY2xpY2tlZAogICAgICoKICAgICAqIEBzZWN0aW9uIENhbXBhaWduIFJlcG9ydCBEYXRhCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkY2lkIHRoZSBjYW1wYWlnbiBpZCB0byBnZXQgY2xpY2sgc3RhdHMgZm9yIChjYW4gYmUgZ2F0aGVyZWQgdXNpbmcgY2FtcGFpZ25zKCkpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR1cmwgdGhlIFVSTCBvZiB0aGUgbGluayB0aGF0IHdhcyBjbGlja2VkIG9uCiAgICAgKiBAcGFyYW0gaW50ICAgICRzdGFydCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgcGFnZSBudW1iZXIgdG8gc3RhcnQgYXQgLSBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhIChwYWdlIDApCiAgICAgKiBAcGFyYW0gaW50ICAgICRsaW1pdCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuIC0gZGVmYXVsdHMgdG8gMTAwMCwgdXBwZXIgbGltaXQgc2V0IGF0IDE1MDAwCiAgICAgKiBAcmV0dXJuIGFycmF5IGFycmF5IGNvbnRhaW5pbmcgdGhlIHRvdGFsIHJlY29yZHMgbWF0Y2hlZCBhbmQgdGhlIHNwZWNpZmljIHJlY29yZHMgZm9yIHRoaXMgcGFnZQogICAgICogQHJldHVybmYgaW50IHRvdGFsIHRoZSB0b3RhbCBudW1iZXIgb2YgcmVjb3JkcyBtYXRjaGVkCiAgICAgKiBAcmV0dXJuZiBhcnJheSBkYXRhIHRoZSBlbWFpbCBhZGRyZXNzZXMgdGhhdCBkaWQgbm90IG9wZW4gdGhlIGNhbXBhaWduCiAgICAgICAgICAgICAgICBzdHJpbmcgZW1haWwgRW1haWwgYWRkcmVzcyB0aGF0IG9wZW5lZCB0aGUgY2FtcGFpZ24KICAgICAgICAgICAgICAgIGludCBjbGlja3MgVG90YWwgbnVtYmVyIG9mIHRpbWVzIHRoZSBVUkwgd2FzIGNsaWNrZWQgb24gYnkgdGhpcyBlbWFpbCBhZGRyZXNzCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduQ2xpY2tEZXRhaWxBSU0oJGNpZCwgJHVybCwgJHN0YXJ0PTAsICRsaW1pdD0xMDAwKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siY2lkIl0gPSAkY2lkOwogICAgICAgICRwYXJhbXNbInVybCJdID0gJHVybDsKICAgICAgICAkcGFyYW1zWyJzdGFydCJdID0gJHN0YXJ0OwogICAgICAgICRwYXJhbXNbImxpbWl0Il0gPSAkbGltaXQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjYW1wYWlnbkNsaWNrRGV0YWlsQUlNIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHaXZlbiBhIGNhbXBhaWduIGFuZCBlbWFpbCBhZGRyZXNzLCByZXR1cm4gdGhlIGVudGlyZSBjbGljayBhbmQgb3BlbiBoaXN0b3J5IHdpdGggdGltZXN0YW1wcywgb3JkZXJlZCBieSB0aW1lCiAgICAgKgogICAgICogQHNlY3Rpb24gQ2FtcGFpZ24gUmVwb3J0IERhdGEKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRjaWQgdGhlIGNhbXBhaWduIGlkIHRvIGdldCBzdGF0cyBmb3IgKGNhbiBiZSBnYXRoZXJlZCB1c2luZyBjYW1wYWlnbnMoKSkKICAgICAqIEBwYXJhbSBhcnJheSAkZW1haWxfYWRkcmVzcyBhbiBhcnJheSBvZiB1cCB0byA1MCBlbWFpbCBhZGRyZXNzZXMgdG8gY2hlY2sgT1IgdGhlIGVtYWlsICJpZCIgcmV0dXJuZWQgZnJvbSBsaXN0TWVtYmVySW5mbywgV2ViaG9va3MsIGFuZCBDYW1wYWlnbnMuIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgaWYgYSBzdHJpbmcgaXMgcGFzc2VkLCBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYW4gYXJyYXkgd2l0aCBhIHNpbmdsZSBlbGVtZW50ICh3aWxsIG5vdCB3b3JrIHdpdGggWE1MLVJQQykuCiAgICAgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IHdpdGggdGhlIGtleXMgbGlzdGVkIGluIFJldHVybmVkIEZpZWxkcyBiZWxvdwogICAgICogQHJldHVybmYgaW50IHN1Y2Nlc3MgdGhlIG51bWJlciBvZiBlbWFpbCBhZGRyZXNzIHJlY29yZHMgZm91bmQKICAgICAqIEByZXR1cm5mIGludCBlcnJvciB0aGUgbnVtYmVyIG9mIGVtYWlsIGFkZHJlc3MgcmVjb3JkcyB3aGljaCBjb3VsZCBub3QgYmUgZm91bmQKICAgICAqIEByZXR1cm5mIGFycmF5IGRhdGEgYXJyYXlzIGNvbnRhaW5pbmcgdGhlIGFjdGlvbnMgKG9wZW5zIGFuZCBjbGlja3MpIHRoYXQgdGhlIGVtYWlsIHRvb2ssIHdpdGggdGltZXN0YW1wcwogICAgICAgICAgICBzdHJpbmcgYWN0aW9uIFRoZSBhY3Rpb24gdGFrZW4gKG9wZW4gb3IgY2xpY2spCiAgICAgICAgICAgIHN0cmluZyB0aW1lc3RhbXAgVGltZSB0aGUgYWN0aW9uIG9jY3VycmVkCiAgICAgICAgICAgIHN0cmluZyB1cmwgRm9yIGNsaWNrcywgdGhlIFVSTCB0aGF0IHdhcyBjbGlja2VkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhbXBhaWduRW1haWxTdGF0c0FJTSgkY2lkLCAkZW1haWxfYWRkcmVzcykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImNpZCJdID0gJGNpZDsKICAgICAgICAkcGFyYW1zWyJlbWFpbF9hZGRyZXNzIl0gPSAkZW1haWxfYWRkcmVzczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduRW1haWxTdGF0c0FJTSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogR2l2ZW4gYSBjYW1wYWlnbiBhbmQgY29ycmVjdCBwYWdpbmcgbGltaXRzLCByZXR1cm4gdGhlIGVudGlyZSBjbGljayBhbmQgb3BlbiBoaXN0b3J5IHdpdGggdGltZXN0YW1wcywgb3JkZXJlZCBieSB0aW1lLCAKICAgICAqIGZvciBldmVyeSB1c2VyIGEgY2FtcGFpZ24gd2FzIGRlbGl2ZXJlZCB0by4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBDYW1wYWlnbiBSZXBvcnQgRGF0YQogICAgICogQGV4YW1wbGUgbWNhcGlfY2FtcGFpZ25FbWFpbFN0YXRzQUlNQWxsLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNpZCB0aGUgY2FtcGFpZ24gaWQgdG8gZ2V0IHN0YXRzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGNhbXBhaWducygpKQogICAgICogQHBhcmFtIGludCAkc3RhcnQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIHBhZ2UgbnVtYmVyIHRvIHN0YXJ0IGF0IC0gZGVmYXVsdHMgdG8gMXN0IHBhZ2Ugb2YgZGF0YSAocGFnZSAwKQogICAgICogQHBhcmFtIGludCAkbGltaXQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybiAtIGRlZmF1bHRzIHRvIDEwMCwgdXBwZXIgbGltaXQgc2V0IGF0IDEwMDAKICAgICAqIEByZXR1cm4gYXJyYXkgQXJyYXkgY29udGFpbmluZyBhIHRvdGFsIHJlY29yZCBjb3VudCBhbmQgZGF0YSBpbmNsdWRpbmcgdGhlIGFjdGlvbnMgIChvcGVucyBhbmQgY2xpY2tzKSBmb3IgZWFjaCBlbWFpbCwgd2l0aCB0aW1lc3RhbXBzCiAgICAgKiBAcmV0dXJuZiBpbnQgdG90YWwgdGhlIHRvdGFsIG51bWJlciBvZiByZWNvcmRzCiAgICAgKiBAcmV0dXJuZiBhcnJheSBkYXRhIGVhY2ggcmVjb3JkIHdpdGggdGhlaXIgZGV0YWlsczoKICAgICAgICAgICAgc3RyaW5nIGFjdGlvbiBUaGUgYWN0aW9uIHRha2VuIChvcGVuIG9yIGNsaWNrKQogICAgICAgICAgICBzdHJpbmcgdGltZXN0YW1wIFRpbWUgdGhlIGFjdGlvbiBvY2N1cnJlZAogICAgICAgICAgICBzdHJpbmcgdXJsIEZvciBjbGlja3MsIHRoZSBVUkwgdGhhdCB3YXMgY2xpY2tlZAogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnbkVtYWlsU3RhdHNBSU1BbGwoJGNpZCwgJHN0YXJ0PTAsICRsaW1pdD0xMDApIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJjaWQiXSA9ICRjaWQ7CiAgICAgICAgJHBhcmFtc1sic3RhcnQiXSA9ICRzdGFydDsKICAgICAgICAkcGFyYW1zWyJsaW1pdCJdID0gJGxpbWl0OwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiY2FtcGFpZ25FbWFpbFN0YXRzQUlNQWxsIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBBdHRhY2ggRWNvbW1lcmNlIE9yZGVyIEluZm9ybWF0aW9uIHRvIGEgQ2FtcGFpZ24uIFRoaXMgd2lsbCBnZW5lcmFsbCBiZSB1c2VkIGJ5IGVjb21tZXJjZSBwYWNrYWdlIHBsdWdpbnMgCiAgICAgKiA8YSBocmVmPSIvcGx1Z2lucy9lY29tbTM2MC5waHRtbCI+dGhhdCB3ZSBwcm92aWRlPC9hPiBvciBieSAzcmQgcGFydCBzeXN0ZW0gZGV2ZWxvcGVycy4KICAgICAqIEBzZWN0aW9uIENhbXBhaWduICBSZWxhdGVkCiAgICAgKgogICAgICogQHBhcmFtIGFycmF5ICRvcmRlciBhbiBhcnJheSBvZiBpbmZvcm1hdGlvbiBwZXJ0YWluaW5nIHRvIHRoZSBvcmRlciB0aGF0IGhhcyBjb21wbGV0ZWQuIFVzZSB0aGUgZm9sbG93aW5nIGtleXM6CiAgICAgICAgICAgICAgICBzdHJpbmcgaWQgdGhlIE9yZGVyIElkCiAgICAgICAgICAgICAgICBzdHJpbmcgY2FtcGFpZ25faWQgdGhlIENhbXBhaWduIElkIHRvIHRyYWNrIHRoaXMgb3JkZXIgd2l0aCAoc2VlIHRoZSAibWNfY2lkIiBxdWVyeSBzdHJpbmcgdmFyaWFibGUgYSBjYW1wYWlnbiBwYXNzZXMpCiAgICAgICAgICAgICAgICBzdHJpbmcgZW1haWxfaWQgdGhlIEVtYWlsIElkIG9mIHRoZSBzdWJzY3JpYmVyIHdlIHNob3VsZCBhdHRhY2ggdGhpcyBvcmRlciB0byAoc2VlIHRoZSAibWNfZWlkIiBxdWVyeSBzdHJpbmcgdmFyaWFibGUgYSBjYW1wYWlnbiBwYXNzZXMpCiAgICAgICAgICAgICAgICBkb3VibGUgdG90YWwgVGhlIE9yZGVyIFRvdGFsIChpZSwgdGhlIGZ1bGwgYW1vdW50IHRoZSBjdXN0b21lciBlbmRzIHVwIHBheWluZykKICAgICAgICAgICAgICAgIHN0cmluZyBvcmRlcl9kYXRlIG9wdGlvbmFsIHRoZSBkYXRlIG9mIHRoZSBvcmRlciAtIGlmIHRoaXMgaXMgbm90IHByb3ZpZGVkLCB3ZSB3aWxsIGRlZmF1bHQgdGhlIGRhdGUgdG8gbm93CiAgICAgICAgICAgICAgICBkb3VibGUgc2hpcHBpbmcgb3B0aW9uYWwgdGhlIHRvdGFsIHBhaWQgZm9yIFNoaXBwaW5nIEZlZXMKICAgICAgICAgICAgICAgIGRvdWJsZSB0YXggb3B0aW9uYWwgdGhlIHRvdGFsIHRheCBwYWlkCiAgICAgICAgICAgICAgICBzdHJpbmcgc3RvcmVfaWQgYSB1bmlxdWUgaWQgZm9yIHRoZSBzdG9yZSBzZW5kaW5nIHRoZSBvcmRlciBpbiAoMjAgYnl0ZXMgbWF4KQogICAgICAgICAgICAgICAgc3RyaW5nIHN0b3JlX25hbWUgb3B0aW9uYWwgYSAibmljZSIgbmFtZSBmb3IgdGhlIHN0b3JlIC0gdHlwaWNhbGx5IHRoZSBiYXNlIHdlYiBhZGRyZXNzIChpZSwgInN0b3JlLm1haWxjaGltcC5jb20iKS4gV2Ugd2lsbCBhdXRvbWF0aWNhbGx5IHVwZGF0ZSB0aGlzIGlmIGl0IGNoYW5nZXMgKGJhc2VkIG9uIHN0b3JlX2lkKQogICAgICAgICAgICAgICAgc3RyaW5nIHBsdWdpbl9pZCB0aGUgTWFpbENoaW1wIGFzc2lnbmVkIFBsdWdpbiBJZC4gR2V0IHlvdXJzIGJ5IDxhIGhyZWY9Ii9yZWdpc3Rlci5waHAiPnJlZ2lzdGVyaW5nIGhlcmU8L2E+CiAgICAgICAgICAgICAgICBhcnJheSBpdGVtcyB0aGUgaW5kaXZpZHVhbCBsaW5lIGl0ZW1zIGZvciBhbiBvcmRlciB1c2luZyB0aGVzZSBrZXlzOgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZy1sZWZ0OjMwcHgiPjx0YWJsZT48dHI+PHRkIGNvbHNwYW49Kj4KICAgICAgICAgICAgICAgICAgICBpbnQgbGluZV9udW0gb3B0aW9uYWwgdGhlIGxpbmUgbnVtYmVyIG9mIHRoZSBpdGVtIG9uIHRoZSBvcmRlci4gV2Ugd2lsbCBnZW5lcmF0ZSB0aGVzZSBpZiB0aGV5IGFyZSBub3QgcGFzc2VkCiAgICAgICAgICAgICAgICAgICAgaW50IHByb2R1Y3RfaWQgdGhlIHN0b3JlJ3MgaW50ZXJuYWwgSWQgZm9yIHRoZSBwcm9kdWN0LiBMaW5lcyB0aGF0IGRvIG5vIGNvbnRhaW4gdGhpcyB3aWxsIGJlIHNraXBwZWQgCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIHByb2R1Y3RfbmFtZSB0aGUgcHJvZHVjdCBuYW1lIGZvciB0aGUgcHJvZHVjdF9pZCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpdGVtLiBXZSB3aWxsIGF1dG8gdXBkYXRlIHRoZXNlIGFzIHRoZXkgY2hhbmdlIChiYXNlZCBvbiBwcm9kdWN0X2lkKQogICAgICAgICAgICAgICAgICAgIGludCBjYXRlZ29yeV9pZCB0aGUgc3RvcmUncyBpbnRlcm5hbCBJZCBmb3IgdGhlIChtYWluKSBjYXRlZ29yeSBhc3NvY2lhdGVkIHdpdGggdGhpcyBwcm9kdWN0LiBPdXIgdGVzdGluZyBoYXMgZm91bmQgdGhpcyB0byBiZSBhICJiZXN0IGd1ZXNzIiBzY2VuYXJpbwogICAgICAgICAgICAgICAgICAgIHN0cmluZyBjYXRlZ29yeV9uYW1lIHRoZSBjYXRlZ29yeSBuYW1lIGZvciB0aGUgY2F0ZWdvcnlfaWQgdGhpcyBwcm9kdWN0IGlzIGluLiBPdXIgdGVzdGluZyBoYXMgZm91bmQgdGhpcyB0byBiZSBhICJiZXN0IGd1ZXNzIiBzY2VuYXJpby4gT3VyIHBsdWdpbnMgd2FsayB0aGUgY2F0ZWdvcnkgaGVpcmFyY2h5IHVwIGFuZCBzZW5kICJSb290IC0gU3ViQ2F0MSAtIFN1YkNhdDQiLCBldGMuCiAgICAgICAgICAgICAgICAgICAgZG91YmxlIHF0eSB0aGUgcXVhbnRpdHkgb2YgdGhlIGl0ZW0gb3JkZXJlZAogICAgICAgICAgICAgICAgICAgIGRvdWJsZSBjb3N0IHRoZSBjb3N0IG9mIGEgc2luZ2xlIGl0ZW0gKGllLCBub3QgdGhlIGV4dGVuZGVkIGNvc3Qgb2YgdGhlIGxpbmUpCiAgICAgICAgICAgICAgICA8L3RkPjwvdHI+PC90YWJsZT48L2Rpdj4KICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSBkYXRhIGlzIHNhdmVkLCBvdGhlcndpc2UgYW4gZXJyb3IgaXMgdGhyb3duLgogICAgICovCiAgICBmdW5jdGlvbiBjYW1wYWlnbkVjb21tT3JkZXJBZGQoJG9yZGVyKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1sib3JkZXIiXSA9ICRvcmRlcjsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduRWNvbW1PcmRlckFkZCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgYWxsIG9mIHRoZSBsaXN0cyBkZWZpbmVkIGZvciB5b3VyIHVzZXIgYWNjb3VudAogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfbGlzdHMucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2xpc3RzLnBocAogICAgICoKICAgICAqIEBwYXJhbSBhcnJheSAkZmlsdGVycyBhIGhhc2ggb2YgZmlsdGVycyB0byBhcHBseSB0byB0aGlzIHF1ZXJ5IC0gYWxsIGFyZSBvcHRpb25hbDoKICAgICAgICAgICAgc3RyaW5nIGxpc3RfaWQgb3B0aW9uYWwgLSByZXR1cm4gYSBzaW5nbGUgbGlzdCB1c2luZyBhIGtub3duIGxpc3RfaWQuIEFjY2VwdHMgbXVsdGlwbGVzIHNlcGFyYXRlZCBieSBjb21tYXMgd2hlbiBub3QgdXNpbmcgZXhhY3QgbWF0Y2hpbmcKICAgICAgICAgICAgc3RyaW5nIGxpc3RfbmFtZSBvcHRpb25hbCAtIG9ubHkgbGlzdHMgdGhhdCBtYXRjaCB0aGlzIG5hbWUKICAgICAgICAgICAgc3RyaW5nIGZyb21fbmFtZSBvcHRpb25hbCAtIG9ubHkgbGlzdHMgdGhhdCBoYXZlIGEgZGVmYXVsdCBmcm9tIG5hbWUgbWF0Y2hpbmcgdGhpcwogICAgICAgICAgICBzdHJpbmcgZnJvbV9lbWFpbCBvcHRpb25hbCAtIG9ubHkgbGlzdHMgdGhhdCBoYXZlIGEgZGVmYXVsdCBmcm9tIGVtYWlsIG1hdGNoaW5nIHRoaXMKICAgICAgICAgICAgc3RyaW5nIGZyb21fc3ViamVjdCBvcHRpb25hbCAtIG9ubHkgbGlzdHMgdGhhdCBoYXZlIGEgZGVmYXVsdCBmcm9tIGVtYWlsIG1hdGNoaW5nIHRoaXMKICAgICAgICAgICAgc3RyaW5nIGNyZWF0ZWRfYmVmb3JlIG9wdGlvbmFsIC0gb25seSBzaG93IGxpc3RzIHRoYXQgd2VyZSBjcmVhdGVkIGJlZm9yZSB0aGlzIGRhdGUvdGltZSAoaW4gR01UKSAtIGZvcm1hdCBpcyBZWVlZLU1NLUREIEhIOm1tOnNzICgyNGhyKQogICAgICAgICAgICBzdHJpbmcgY3JlYXRlZF9hZnRlciBvcHRpb25hbCAtIG9ubHkgc2hvdyBsaXN0cyB0aGF0IHdlcmUgY3JlYXRlZCBzaW5jZSB0aGlzIGRhdGUvdGltZSAoaW4gR01UKSAtIGZvcm1hdCBpcyBZWVlZLU1NLUREIEhIOm1tOnNzICgyNGhyKQogICAgICAgICAgICBib29sZWFuIGV4YWN0IG9wdGlvbmFsIC0gZmxhZyBmb3Igd2hldGhlciB0byBmaWx0ZXIgb24gZXhhY3QgdmFsdWVzIHdoZW4gZmlsdGVyaW5nLCBvciBzZWFyY2ggd2l0aGluIGNvbnRlbnQgZm9yIGZpbHRlciB2YWx1ZXMgLSBkZWZhdWx0cyB0byB0cnVlCiAgICAgKiBAcGFyYW0gaW50ICRzdGFydCBvcHRpb25hbCAtIGNvbnRyb2wgcGFnaW5nIG9mIGxpc3RzLCBzdGFydCByZXN1bHRzIGF0IHRoaXMgbGlzdCAjLCBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhICAocGFnZSAwKQogICAgICogQHBhcmFtIGludCAkbGltaXQgb3B0aW9uYWwgLSBjb250cm9sIHBhZ2luZyBvZiBsaXN0cywgbnVtYmVyIG9mIGxpc3RzIHRvIHJldHVybiB3aXRoIGVhY2ggY2FsbCwgZGVmYXVsdHMgdG8gMjUgKG1heD0xMDApCiAgICAgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IHdpdGgga2V5cyBsaXN0ZWQgaW4gUmV0dXJuZWQgRmllbGRzIGJlbG93CiAgICAgKiBAcmV0dXJuZiBpbnQgdG90YWwgdGhlIHRvdGFsIG51bWJlciBvZiBsaXN0cyB3aGljaCBtYXRjaGVkIHRoZSBwcm92aWRlZCBmaWx0ZXJzCiAgICAgKiBAcmV0dXJuZiBhcnJheSBkYXRhIHRoZSBsaXN0cyB3aGljaCBtYXRjaGVkIHRoZSBwcm92aWRlZCBmaWx0ZXJzLCBpbmNsdWRpbmcgdGhlIGZvbGxvd2luZyBmb3IgCiAgICAgICAgICAgICBzdHJpbmcgaWQgVGhlIGxpc3QgaWQgZm9yIHRoaXMgbGlzdC4gVGhpcyB3aWxsIGJlIHVzZWQgZm9yIGFsbCBvdGhlciBsaXN0IG1hbmFnZW1lbnQgZnVuY3Rpb25zLgogICAgICAgICAgICAgaW50IHdlYl9pZCBUaGUgbGlzdCBpZCB1c2VkIGluIG91ciB3ZWIgYXBwLCBhbGxvd3MgeW91IHRvIGNyZWF0ZSBhIGxpbmsgZGlyZWN0bHkgdG8gaXQKICAgICAgICAgICAgIHN0cmluZyBuYW1lIFRoZSBuYW1lIG9mIHRoZSBsaXN0LgogICAgICAgICAgICAgc3RyaW5nIGRhdGVfY3JlYXRlZCBUaGUgZGF0ZSB0aGF0IHRoaXMgbGlzdCB3YXMgY3JlYXRlZC4KICAgICAgICAgICAgIGJvb2xlYW4gZW1haWxfdHlwZV9vcHRpb24gV2hldGhlciBvciBub3QgdGhlIExpc3Qgc3VwcG9ydHMgbXVsdGlwbGUgZm9ybWF0cyBmb3IgZW1haWxzIG9yIGp1c3QgSFRNTAogICAgICAgICAgICAgYm9vbGVhbiB1c2VfYXdlc29tZWJhciBXaGV0aGVyIG9yIG5vdCBjYW1wYWlnbnMgZm9yIHRoaXMgbGlzdCB1c2UgdGhlIEF3ZXNvbWUgQmFyIGluIGFyY2hpdmVzIGJ5IGRlZmF1bHQKICAgICAgICAgICAgIHN0cmluZyBkZWZhdWx0X2Zyb21fbmFtZSBEZWZhdWx0IEZyb20gTmFtZSBmb3IgY2FtcGFpZ25zIHVzaW5nIHRoaXMgbGlzdAogICAgICAgICAgICAgc3RyaW5nIGRlZmF1bHRfZnJvbV9lbWFpbCBEZWZhdWx0IEZyb20gRW1haWwgZm9yIGNhbXBhaWducyB1c2luZyB0aGlzIGxpc3QKICAgICAgICAgICAgIHN0cmluZyBkZWZhdWx0X3N1YmplY3QgRGVmYXVsdCBTdWJqZWN0IExpbmUgZm9yIGNhbXBhaWducyB1c2luZyB0aGlzIGxpc3QKICAgICAgICAgICAgIHN0cmluZyBkZWZhdWx0X2xhbmd1YWdlIERlZmF1bHQgTGFuZ3VhZ2UgZm9yIHRoaXMgbGlzdCdzIGZvcm1zCiAgICAgICAgICAgICBpbnQgbGlzdF9yYXRpbmcgQW4gYXV0by1nZW5lcmF0ZWQgYWN0aXZpdHkgc2NvcmUgZm9yIHRoZSBsaXN0ICgwIC0gNSkKICAgICAgICAgICAgIGFycmF5IHN0YXRzIHZhcmlvdXMgc3RhdHMgYW5kIGNvdW50cyBmb3IgdGhlIGxpc3QKICAgICAgICAgICAgICAgICBpbnQgbWVtYmVyX2NvdW50IFRoZSBudW1iZXIgb2YgYWN0aXZlIG1lbWJlcnMgaW4gdGhlIGdpdmVuIGxpc3QuCiAgICAgICAgICAgICAgICAgaW50IHVuc3Vic2NyaWJlX2NvdW50IFRoZSBudW1iZXIgb2YgbWVtYmVycyB3aG8gaGF2ZSB1bnN1YnNjcmliZWQgZnJvbSB0aGUgZ2l2ZW4gbGlzdC4KICAgICAgICAgICAgICAgICBpbnQgY2xlYW5lZF9jb3VudCBUaGUgbnVtYmVyIG9mIG1lbWJlcnMgY2xlYW5lZCBmcm9tIHRoZSBnaXZlbiBsaXN0LgogICAgICAgICAgICAgICAgIGludCBtZW1iZXJfY291bnRfc2luY2Vfc2VuZCBUaGUgbnVtYmVyIG9mIGFjdGl2ZSBtZW1iZXJzIGluIHRoZSBnaXZlbiBsaXN0IHNpbmNlIHRoZSBsYXN0IGNhbXBhaWduIHdhcyBzZW50CiAgICAgICAgICAgICAgICAgaW50IHVuc3Vic2NyaWJlX2NvdW50X3NpbmNlX3NlbmQgVGhlIG51bWJlciBvZiBtZW1iZXJzIHdobyBoYXZlIHVuc3Vic2NyaWJlZCBmcm9tIHRoZSBnaXZlbiBsaXN0IHNpbmNlIHRoZSBsYXN0IGNhbXBhaWduIHdhcyBzZW50CiAgICAgICAgICAgICAgICAgaW50IGNsZWFuZWRfY291bnRfc2luY2Vfc2VuZCBUaGUgbnVtYmVyIG9mIG1lbWJlcnMgY2xlYW5lZCBmcm9tIHRoZSBnaXZlbiBsaXN0IHNpbmNlIHRoZSBsYXN0IGNhbXBhaWduIHdhcyBzZW50CiAgICAgICAgICAgICAgICAgaW50IGNhbXBhaWduX2NvdW50IFRoZSBudW1iZXIgb2YgY2FtcGFpZ25zIGluIGFueSBzdGF0dXMgdGhhdCB1c2UgdGhpcyBsaXN0CiAgICAgICAgICAgICAgICAgaW50IGdyb3VwaW5nX2NvdW50IFRoZSBudW1iZXIgb2YgSW50ZXJlc3QgR3JvdXBpbmdzIGZvciB0aGlzIGxpc3QKICAgICAgICAgICAgICAgICBpbnQgZ3JvdXBfY291bnQgVGhlIG51bWJlciBvZiBJbnRlcmVzdCBHcm91cHMgKHJlZ2FyZGxlc3Mgb2YgZ3JvdXBpbmcpIGZvciB0aGlzIGxpc3QKICAgICAgICAgICAgICAgICBpbnQgbWVyZ2VfdmFyX2NvdW50IFRoZSBudW1iZXIgb2YgbWVyZ2UgdmFycyBmb3IgdGhpcyBsaXN0IChub3QgaW5jbHVkaW5nIHRoZSByZXF1aXJlZCBFTUFJTCBvbmUpIAogICAgICAgICAgICAgICAgIGludCBhdmdfc3ViX3JhdGUgdGhlIGF2ZXJhZ2UgbnVtYmVyIG9mIHN1YnNjcmliZSBwZXIgbW9udGggZm9yIHRoZSBsaXN0IChlbXB0eSB2YWx1ZSBpZiB3ZSBoYXZlbid0IGNhbGN1bGF0ZWQgdGhpcyB5ZXQpCiAgICAgICAgICAgICAgICAgaW50IGF2Z191bnN1Yl9yYXRlIHRoZSBhdmVyYWdlIG51bWJlciBvZiB1bnN1YnNjcmliZSBwZXIgbW9udGggZm9yIHRoZSBsaXN0IChlbXB0eSB2YWx1ZSBpZiB3ZSBoYXZlbid0IGNhbGN1bGF0ZWQgdGhpcyB5ZXQpCiAgICAgICAgICAgICAgICAgaW50IHRhcmdldF9zdWJfcmF0ZSB0aGUgdGFyZ2V0IHN1YnNjcmlwdGlvbiByYXRlIGZvciB0aGUgbGlzdCB0byBrZWVwIGl0IGdyb3dpbmcgKGVtcHR5IHZhbHVlIGlmIHdlIGhhdmVuJ3QgY2FsY3VsYXRlZCB0aGlzIHlldCkKICAgICAgICAgICAgICAgICBpbnQgb3Blbl9yYXRlIHRoZSBhdmVyYWdlIG9wZW4gcmF0ZSBwZXIgY2FtcGFpZ24gZm9yIHRoZSBsaXN0ICAoZW1wdHkgdmFsdWUgaWYgd2UgaGF2ZW4ndCBjYWxjdWxhdGVkIHRoaXMgeWV0KQogICAgICAgICAgICAgICAgIGludCBjbGlja19yYXRlIHRoZSBhdmVyYWdlIGNsaWNrIHJhdGUgcGVyIGNhbXBhaWduIGZvciB0aGUgbGlzdCAgKGVtcHR5IHZhbHVlIGlmIHdlIGhhdmVuJ3QgY2FsY3VsYXRlZCB0aGlzIHlldCkKICAgICAgICAgICAgIGFycmF5IG1vZHVsZXMgQW55IGxpc3Qgc3BlY2lmaWMgbW9kdWxlcyBpbnN0YWxsZWQgZm9yIHRoaXMgbGlzdCAoZXhhbXBsZSBpcyBTb2NpYWxQcm8pCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RzKCRmaWx0ZXJzPWFycmF5ICgKKSwgJHN0YXJ0PTAsICRsaW1pdD0yNSkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImZpbHRlcnMiXSA9ICRmaWx0ZXJzOwogICAgICAgICRwYXJhbXNbInN0YXJ0Il0gPSAkc3RhcnQ7CiAgICAgICAgJHBhcmFtc1sibGltaXQiXSA9ICRsaW1pdDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RzIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgbWVyZ2UgdGFncyBmb3IgYSBnaXZlbiBsaXN0LCBpbmNsdWRpbmcgdGhlaXIgbmFtZSwgdGFnLCBhbmQgcmVxdWlyZWQgc2V0dGluZwogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogQGV4YW1wbGUgeG1sLXJwY19saXN0TWVyZ2VWYXJzLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEByZXR1cm4gYXJyYXkgbGlzdCBvZiBtZXJnZSB0YWdzIGZvciB0aGUgbGlzdAogICAgICogQHJldHVybmYgc3RyaW5nIG5hbWUgTmFtZSBvZiB0aGUgbWVyZ2UgZmllbGQKICAgICAqIEByZXR1cm5mIGJvb2wgcmVxIERlbm90ZXMgd2hldGhlciB0aGUgZmllbGQgaXMgcmVxdWlyZWQgKHRydWUpIG9yIG5vdCAoZmFsc2UpCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgZmllbGRfdHlwZSBUaGUgImRhdGEgdHlwZSIgb2YgdGhpcyBtZXJnZSB2YXIuIE9uZSBvZjogZW1haWwsIHRleHQsIG51bWJlciwgcmFkaW8sIGRyb3Bkb3duLCBkYXRlLCBhZGRyZXNzLCBwaG9uZSwgdXJsLCBpbWFnZXVybAogICAgICogQHJldHVybmYgYm9vbCBwdWJsaWMgV2hldGhlciBvciBub3QgdGhpcyBmaWVsZCBpcyB2aXNpYmxlIHRvIGxpc3Qgc3Vic2NyaWJlcnMKICAgICAqIEByZXR1cm5mIGJvb2wgc2hvdyBXaGV0aGVyIHRoZSBsaXN0IG93bmVyIGhhcyB0aGlzIGZpZWxkIGRpc3BsYXllZCBvbiB0aGVpciBsaXN0IGRhc2hib2FyZAogICAgICogQHJldHVybmYgc3RyaW5nIG9yZGVyIFRoZSBvcmRlciB0aGUgbGlzdCBvd25lciBoYXMgc2V0IHRoaXMgZmllbGQgdG8gZGlzcGxheSBpbgogICAgICogQHJldHVybmYgc3RyaW5nIGRlZmF1bHQgVGhlIGRlZmF1bHQgdmFsdWUgdGhlIGxpc3Qgb3duZXIgaGFzIHNldCBmb3IgdGhpcyBmaWVsZAogICAgICogQHJldHVybmYgc3RyaW5nIHNpemUgVGhlIHdpZHRoIG9mIHRoZSBmaWVsZCB0byBiZSB1c2VkCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgdGFnIFRoZSBtZXJnZSB0YWcgdGhhdCdzIHVzZWQgZm9yIGZvcm1zIGFuZCBsaXN0U3Vic2NyaWJlKCkgYW5kIGxpc3RVcGRhdGVNZW1iZXIoKQogICAgICogQHJldHVybmYgYXJyYXkgY2hvaWNlcyBGb3IgcmFkaW8gYW5kIGRyb3Bkb3duIGZpZWxkIHR5cGVzLCBhbiBhcnJheSBvZiB0aGUgb3B0aW9ucyBhdmFpbGFibGUKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdE1lcmdlVmFycygkaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdE1lcmdlVmFycyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgbmV3IG1lcmdlIHRhZyB0byBhIGdpdmVuIGxpc3QKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfbGlzdE1lcmdlVmFyQWRkLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBzdHJpbmcgJHRhZyBUaGUgbWVyZ2UgdGFnIHRvIGFkZCwgZS5nLiBGTkFNRQogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSBUaGUgbG9uZyBkZXNjcmlwdGlvbiBvZiB0aGUgdGFnIGJlaW5nIGFkZGVkLCB1c2VkIGZvciB1c2VyIGRpc3BsYXlzCiAgICAgKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnMgb3B0aW9uYWwgVmFyaW91cyBvcHRpb25zIGZvciB0aGlzIG1lcmdlIHZhci4gPGVtPm5vdGU6PC9lbT4gZm9yIGhpc3RvcmljYWwgcHVycG9zZXMgdGhpcyBjYW4gYWxzbyB0YWtlIGEgImJvb2xlYW4iCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGZpZWxkX3R5cGUgb3B0aW9uYWwgb25lIG9mOiB0ZXh0LCBudW1iZXIsIHJhZGlvLCBkcm9wZG93biwgZGF0ZSwgYWRkcmVzcywgcGhvbmUsIHVybCwgaW1hZ2V1cmwgLSBkZWZhdWx0cyB0byB0ZXh0CiAgICAgICAgICAgICAgICAgICAgYm9vbGVhbiByZXEgb3B0aW9uYWwgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGZpZWxkIGlzIHJlcXVpcmVkIC0gZGVmYXVsdHMgdG8gZmFsc2UKICAgICAgICAgICAgICAgICAgICBib29sZWFuIHB1YmxpYyBvcHRpb25hbCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgZmllbGQgaXMgZGlzcGxheWVkIGluIHB1YmxpYyAtIGRlZmF1bHRzIHRvIHRydWUKICAgICAgICAgICAgICAgICAgICBib29sZWFuIHNob3cgb3B0aW9uYWwgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGZpZWxkIGlzIGRpc3BsYXllZCBpbiB0aGUgYXBwJ3MgbGlzdCBtZW1iZXIgdmlldyAtIGRlZmF1bHRzIHRvIHRydWUKICAgICAgICAgICAgICAgICAgICBzdHJpbmcgZGVmYXVsdF92YWx1ZSBvcHRpb25hbCB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGZpZWxkLiBTZWUgbGlzdFN1YnNjcmliZSgpIGZvciBmb3JtYXR0aW5nIGluZm8uIERlZmF1bHRzIHRvIGJsYW5rCiAgICAgICAgICAgICAgICAgICAgYXJyYXkgY2hvaWNlcyBvcHRpb25hbCBraW5kIG9mIC0gYW4gYXJyYXkgb2Ygc3RyaW5ncyB0byB1c2UgYXMgdGhlIGNob2ljZXMgZm9yIHJhZGlvIGFuZCBkcm9wZG93biB0eXBlIGZpZWxkcwogICAgCiAgICAgKiBAcmV0dXJuIGJvb2wgdHJ1ZSBpZiB0aGUgcmVxdWVzdCBzdWNjZWVkcywgb3RoZXJ3aXNlIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RNZXJnZVZhckFkZCgkaWQsICR0YWcsICRuYW1lLCAkb3B0aW9ucz1hcnJheSAoCikpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbInRhZyJdID0gJHRhZzsKICAgICAgICAkcGFyYW1zWyJuYW1lIl0gPSAkbmFtZTsKICAgICAgICAkcGFyYW1zWyJvcHRpb25zIl0gPSAkb3B0aW9uczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RNZXJnZVZhckFkZCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogVXBkYXRlIG1vc3QgcGFyYW1ldGVycyBmb3IgYSBtZXJnZSB0YWcgb24gYSBnaXZlbiBsaXN0LiBZb3UgY2Fubm90IGN1cnJlbnRseSBjaGFuZ2UgdGhlIG1lcmdlIHR5cGUKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0YWcgVGhlIG1lcmdlIHRhZyB0byB1cGRhdGUKICAgICAqIEBwYXJhbSBhcnJheSAkb3B0aW9ucyBUaGUgb3B0aW9ucyB0byBjaGFuZ2UgZm9yIGEgbWVyZ2UgdmFyLiBTZWUgbGlzdE1lcmdlVmFyQWRkKCkgZm9yIHZhbGlkIG9wdGlvbnMKICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdE1lcmdlVmFyVXBkYXRlKCRpZCwgJHRhZywgJG9wdGlvbnMpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbInRhZyJdID0gJHRhZzsKICAgICAgICAkcGFyYW1zWyJvcHRpb25zIl0gPSAkb3B0aW9uczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RNZXJnZVZhclVwZGF0ZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogRGVsZXRlIGEgbWVyZ2UgdGFnIGZyb20gYSBnaXZlbiBsaXN0IGFuZCBhbGwgaXRzIG1lbWJlcnMuIFNlcmlvdXNseSAtIHRoZSBkYXRhIGlzIHJlbW92ZWQgZnJvbSBhbGwgbWVtYmVycyBhcyB3ZWxsISAKICAgICAqIE5vdGUgdGhhdCBvbiBsYXJnZSBsaXN0cyB0aGlzIG1ldGhvZCBtYXkgc2VlbSBhIGJpdCBzbG93ZXIgdGhhbiBjYWxscyB5b3UgdHlwaWNhbGx5IG1ha2UuCiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2xpc3RNZXJnZVZhckRlbC5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0YWcgVGhlIG1lcmdlIHRhZyB0byBkZWxldGUKICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdE1lcmdlVmFyRGVsKCRpZCwgJHRhZykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgJHBhcmFtc1sidGFnIl0gPSAkdGFnOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdE1lcmdlVmFyRGVsIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgaW50ZXJlc3QgZ3JvdXBpbmdzIGZvciBhIGdpdmVuIGxpc3QsIGluY2x1ZGluZyB0aGUgbGFiZWwsIGZvcm0gaW5mb3JtYXRpb24sIGFuZCBpbmNsdWRlZCBncm91cHMgZm9yIGVhY2gKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfbGlzdEludGVyZXN0R3JvdXBpbmdzLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEByZXR1cm4gc3RydWN0IGxpc3Qgb2YgaW50ZXJlc3QgZ3JvdXBzIGZvciB0aGUgbGlzdAogICAgICogQHJldHVybmYgc3RyaW5nIGlkIFRoZSBpZCBmb3IgdGhlIEdyb3VwaW5nCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgbmFtZSBOYW1lIGZvciB0aGUgSW50ZXJlc3QgZ3JvdXBzCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgZm9ybV9maWVsZCBHaXZlcyB0aGUgdHlwZSBvZiBpbnRlcmVzdCBncm91cDogY2hlY2tib3gscmFkaW8sc2VsZWN0CiAgICAgKiBAcmV0dXJuZiBhcnJheSBncm91cHMgQXJyYXkgb2YgdGhlIGdyb3VwaW5nIG9wdGlvbnMgaW5jbHVkaW5nIHRoZSAiYml0IiB2YWx1ZSwgIm5hbWUiLCAiZGlzcGxheV9vcmRlciIsIGFuZCBudW1iZXIgb2YgInN1YnNjcmliZXJzIiB3aXRoIHRoZSBvcHRpb24gc2VsZWN0ZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RJbnRlcmVzdEdyb3VwaW5ncygkaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdEludGVyZXN0R3JvdXBpbmdzIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIEFkZCBhIHNpbmdsZSBJbnRlcmVzdCBHcm91cCAtIGlmIGludGVyZXN0IGdyb3VwcyBmb3IgdGhlIExpc3QgYXJlIG5vdCB5ZXQgZW5hYmxlZCwgYWRkaW5nIHRoZSBmaXJzdAogICAgICogIGdyb3VwIHdpbGwgYXV0b21hdGljYWxseSB0dXJuIHRoZW0gb24uCiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2xpc3RJbnRlcmVzdEdyb3VwQWRkLnBocAogICAgICogCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICRncm91cF9uYW1lIHRoZSBpbnRlcmVzdCBncm91cCB0byBhZGQgLSBncm91cCBuYW1lcyBtdXN0IGJlIHVuaXF1ZSB3aXRoaW4gYSBncm91cGluZwogICAgICogQHBhcmFtIGludCBvcHRpb25hbCAkZ3JvdXBpbmdfaWQgVGhlIGdyb3VwaW5nIHRvIGFkZCB0aGUgbmV3IGdyb3VwIHRvIC0gZ2V0IHVzaW5nIGxpc3RJbnRlcmVzdEdyb3VwaW5nKCkgLiBJZiBub3Qgc3VwcGxpZWQsIHRoZSBmaXJzdCBncm91cGluZyBvbiB0aGUgbGlzdCBpcyB1c2VkLgogICAgICogQHJldHVybiBib29sIHRydWUgaWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgogICAgICovCiAgICBmdW5jdGlvbiBsaXN0SW50ZXJlc3RHcm91cEFkZCgkaWQsICRncm91cF9uYW1lLCAkZ3JvdXBpbmdfaWQ9TlVMTCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgJHBhcmFtc1siZ3JvdXBfbmFtZSJdID0gJGdyb3VwX25hbWU7CiAgICAgICAgJHBhcmFtc1siZ3JvdXBpbmdfaWQiXSA9ICRncm91cGluZ19pZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RJbnRlcmVzdEdyb3VwQWRkIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIERlbGV0ZSBhIHNpbmdsZSBJbnRlcmVzdCBHcm91cCAtIGlmIHRoZSBsYXN0IGdyb3VwIGZvciBhIGxpc3QgaXMgZGVsZXRlZCwgdGhpcyB3aWxsIGFsc28gdHVybiBncm91cHMgZm9yIHRoZSBsaXN0IG9mZi4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfbGlzdEludGVyZXN0R3JvdXBEZWwucGhwCiAgICAgKiAKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBzdHJpbmcgJGdyb3VwX25hbWUgdGhlIGludGVyZXN0IGdyb3VwIHRvIGRlbGV0ZQogICAgICogQHBhcmFtIGludCAkZ3JvdXBpbmdfaWQgVGhlIGdyb3VwaW5nIHRvIGRlbGV0ZSB0aGUgZ3JvdXAgZnJvbSAtIGdldCB1c2luZyBsaXN0SW50ZXJlc3RHcm91cGluZygpIC4gSWYgbm90IHN1cHBsaWVkLCB0aGUgZmlyc3QgZ3JvdXBpbmcgb24gdGhlIGxpc3QgaXMgdXNlZC4KICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdEludGVyZXN0R3JvdXBEZWwoJGlkLCAkZ3JvdXBfbmFtZSwgJGdyb3VwaW5nX2lkPU5VTEwpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbImdyb3VwX25hbWUiXSA9ICRncm91cF9uYW1lOwogICAgICAgICRwYXJhbXNbImdyb3VwaW5nX2lkIl0gPSAkZ3JvdXBpbmdfaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0SW50ZXJlc3RHcm91cERlbCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKiBDaGFuZ2UgdGhlIG5hbWUgb2YgYW4gSW50ZXJlc3QgR3JvdXAKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHBhcmFtIHN0cmluZyAkb2xkX25hbWUgdGhlIGludGVyZXN0IGdyb3VwIG5hbWUgdG8gYmUgY2hhbmdlZAogICAgICogQHBhcmFtIHN0cmluZyAkbmV3X25hbWUgdGhlIG5ldyBpbnRlcmVzdCBncm91cCBuYW1lIHRvIGJlIHNldAogICAgICogQHBhcmFtIGludCBvcHRpb25hbCAkZ3JvdXBpbmdfaWQgVGhlIGdyb3VwaW5nIHRvIGRlbGV0ZSB0aGUgZ3JvdXAgZnJvbSAtIGdldCB1c2luZyBsaXN0SW50ZXJlc3RHcm91cGluZygpIC4gSWYgbm90IHN1cHBsaWVkLCB0aGUgZmlyc3QgZ3JvdXBpbmcgb24gdGhlIGxpc3QgaXMgdXNlZC4KICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdEludGVyZXN0R3JvdXBVcGRhdGUoJGlkLCAkb2xkX25hbWUsICRuZXdfbmFtZSwgJGdyb3VwaW5nX2lkPU5VTEwpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbIm9sZF9uYW1lIl0gPSAkb2xkX25hbWU7CiAgICAgICAgJHBhcmFtc1sibmV3X25hbWUiXSA9ICRuZXdfbmFtZTsKICAgICAgICAkcGFyYW1zWyJncm91cGluZ19pZCJdID0gJGdyb3VwaW5nX2lkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdEludGVyZXN0R3JvdXBVcGRhdGUiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKiogQWRkIGEgbmV3IEludGVyZXN0IEdyb3VwaW5nIC0gaWYgaW50ZXJlc3QgZ3JvdXBzIGZvciB0aGUgTGlzdCBhcmUgbm90IHlldCBlbmFibGVkLCBhZGRpbmcgdGhlIGZpcnN0CiAgICAgKiAgZ3JvdXBpbmcgd2lsbCBhdXRvbWF0aWNhbGx5IHR1cm4gdGhlbSBvbi4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfbGlzdEludGVyZXN0R3JvdXBpbmdBZGQucGhwCiAgICAgKiAKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBzdHJpbmcgJG5hbWUgdGhlIGludGVyZXN0IGdyb3VwaW5nIHRvIGFkZCAtIGdyb3VwaW5nIG5hbWVzIG11c3QgYmUgdW5pcXVlCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlIFRoZSB0eXBlIG9mIHRoZSBncm91cGluZyB0byBhZGQgLSBvbmUgb2YgImNoZWNrYm94ZXMiLCAiaGlkZGVuIiwgImRyb3Bkb3duIiwgInJhZGlvIgogICAgICogQHBhcmFtIGFycmF5ICRncm91cHMgVGhlIGxpc3RzIG9mIGluaXRpYWwgZ3JvdXAgbmFtZXMgdG8gYmUgYWRkZWQgLSBhdCBsZWFzdCAxIGlzIHJlcXVpcmVkIGFuZCB0aGUgbmFtZXMgbXVzdCBiZSB1bmlxdWUgd2l0aGluIGEgZ3JvdXBpbmcuIElmIHRoZSBudW1iZXIgdGFrZXMgeW91IG92ZXIgdGhlIDYwIGdyb3VwIGxpbWl0LCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi4KICAgICAqIEByZXR1cm4gaW50IHRoZSBuZXcgZ3JvdXBpbmcgaWQgaWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgogICAgICovCiAgICBmdW5jdGlvbiBsaXN0SW50ZXJlc3RHcm91cGluZ0FkZCgkaWQsICRuYW1lLCAkdHlwZSwgJGdyb3VwcykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgJHBhcmFtc1sibmFtZSJdID0gJG5hbWU7CiAgICAgICAgJHBhcmFtc1sidHlwZSJdID0gJHR5cGU7CiAgICAgICAgJHBhcmFtc1siZ3JvdXBzIl0gPSAkZ3JvdXBzOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdEludGVyZXN0R3JvdXBpbmdBZGQiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKiogVXBkYXRlIGFuIGV4aXN0aW5nIEludGVyZXN0IEdyb3VwaW5nCiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2xpc3RJbnRlcmVzdEdyb3VwaW5nVXBkYXRlLnBocAogICAgICogCiAgICAgKiBAcGFyYW0gaW50ICRncm91cGluZ19pZCB0aGUgaW50ZXJlc3QgZ3JvdXBpbmcgaWQgLSBnZXQgZnJvbSBsaXN0SW50ZXJlc3RHcm91cGluZ3MoKQogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSBUaGUgbmFtZSBvZiB0aGUgZmllbGQgdG8gdXBkYXRlIC0gZWl0aGVyICJuYW1lIiBvciAidHlwZSIuIEdyb3VwcyB3aXRoIGluIHRoZSBncm91cGluZyBzaG91bGQgYmUgbWFuaXB1bGF0ZWQgdXNpbmcgdGhlIHN0YW5kYXJkIGxpc3RJbnRlcmVzdEdyb3VwKiBtZXRob2RzCiAgICAgKiBAcGFyYW0gc3RyaW5nICR2YWx1ZSBUaGUgbmV3IHZhbHVlIG9mIHRoZSBmaWVsZC4gR3JvdXBpbmcgbmFtZXMgbXVzdCBiZSB1bmlxdWUgLSBvbmx5ICJoaWRkZW4iIGFuZCAiY2hlY2tib3hlcyIgZ3JvdXBpbmcgdHlwZXMgY2FuIGJlIGNvbnZlcnRlZCBiZXR3ZWVuIGVhY2ggb3RoZXIuIAogICAgICogQHJldHVybiBib29sIHRydWUgaWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgogICAgICovCiAgICBmdW5jdGlvbiBsaXN0SW50ZXJlc3RHcm91cGluZ1VwZGF0ZSgkZ3JvdXBpbmdfaWQsICRuYW1lLCAkdmFsdWUpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJncm91cGluZ19pZCJdID0gJGdyb3VwaW5nX2lkOwogICAgICAgICRwYXJhbXNbIm5hbWUiXSA9ICRuYW1lOwogICAgICAgICRwYXJhbXNbInZhbHVlIl0gPSAkdmFsdWU7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0SW50ZXJlc3RHcm91cGluZ1VwZGF0ZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKiBEZWxldGUgYW4gZXhpc3RpbmcgSW50ZXJlc3QgR3JvdXBpbmcgLSB0aGlzIHdpbGwgcGVybWFuZW50bHkgZGVsZXRlIGFsbCBjb250YWluZWQgaW50ZXJlc3QgZ3JvdXBzIGFuZCB3aWxsIHJlbW92ZSB0aG9zZSBzZWxlY3Rpb25zIGZyb20gYWxsIGxpc3QgbWVtYmVycwogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogQGV4YW1wbGUgeG1sLXJwY19saXN0SW50ZXJlc3RHcm91cGluZ0RlbC5waHAKICAgICAqIAogICAgICogQHBhcmFtIGludCAkZ3JvdXBpbmdfaWQgdGhlIGludGVyZXN0IGdyb3VwaW5nIGlkIC0gZ2V0IGZyb20gbGlzdEludGVyZXN0R3JvdXBpbmdzKCkKICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdEludGVyZXN0R3JvdXBpbmdEZWwoJGdyb3VwaW5nX2lkKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siZ3JvdXBpbmdfaWQiXSA9ICRncm91cGluZ19pZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RJbnRlcmVzdEdyb3VwaW5nRGVsIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIFJldHVybiB0aGUgV2ViaG9va3MgY29uZmlndXJlZCBmb3IgdGhlIGdpdmVuIGxpc3QKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHJldHVybiBhcnJheSBsaXN0IG9mIHdlYmhvb2tzCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgdXJsIHRoZSBVUkwgZm9yIHRoaXMgV2ViaG9vawogICAgICogQHJldHVybmYgYXJyYXkgYWN0aW9ucyB0aGUgcG9zc2libGUgYWN0aW9ucyBhbmQgd2hldGhlciB0aGV5IGFyZSBlbmFibGVkCiAgICAgKiBAcmV0dXJuZiBhcnJheSBzb3VyY2VzIHRoZSBwb3NzaWJsZSBzb3VyY2VzIGFuZCB3aGV0aGVyIHRoZXkgYXJlIGVuYWJsZWQKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFdlYmhvb2tzKCRpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0V2ViaG9va3MiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKiogQWRkIGEgbmV3IFdlYmhvb2sgVVJMIGZvciB0aGUgZ2l2ZW4gbGlzdAogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR1cmwgYSB2YWxpZCBVUkwgZm9yIHRoZSBXZWJob29rIC0gaXQgd2lsbCBiZSB2YWxpZGF0ZWQuIG5vdGUgdGhhdCBhIHVybCBtYXkgb25seSBleGlzdCBvbiBhIGxpc3Qgb25jZS4KICAgICAqIEBwYXJhbSBhcnJheSAkYWN0aW9ucyBvcHRpb25hbCBhIGhhc2ggb2YgYWN0aW9ucyB0byBmaXJlIHRoaXMgV2ViaG9vayBmb3IKICAgICAgICAgICAgYm9vbGVhbiBzdWJzY3JpYmUgb3B0aW9uYWwgYXMgc3Vic2NyaWJlcyBvY2N1ciwgZGVmYXVsdHMgdG8gdHJ1ZQogICAgICAgICAgICBib29sZWFuIHVuc3Vic2NyaWJlIG9wdGlvbmFsIGFzIHN1YnNjcmliZXMgb2NjdXIsIGRlZmF1bHRzIHRvIHRydWUKICAgICAgICAgICAgYm9vbGVhbiBwcm9maWxlIG9wdGlvbmFsIGFzIHByb2ZpbGUgdXBkYXRlcyBvY2N1ciwgZGVmYXVsdHMgdG8gdHJ1ZQogICAgICAgICAgICBib29sZWFuIGNsZWFuZWQgb3B0aW9uYWwgYXMgZW1haWxzIGFyZSBjbGVhbmVkIGZyb20gdGhlIGxpc3QsIGRlZmF1bHRzIHRvIHRydWUKICAgICAgICAgICAgYm9vbGVhbiB1cGVtYWlsIG9wdGlvbmFsIHdoZW4gIHN1YnNjcmliZXJzIGNoYW5nZSB0aGVpciBlbWFpbCBhZGRyZXNzLCBkZWZhdWx0cyB0byB0cnVlCiAgICAgKiBAcGFyYW0gYXJyYXkgJHNvdXJjZXMgb3B0aW9uYWwgYSBoYXNoIG9mIHNvdXJjZXMgdG8gZmlyZSB0aGlzIFdlYmhvb2sgZm9yCiAgICAgICAgICAgIGJvb2xlYW4gdXNlciBvcHRpb25hbCB1c2VyL3N1YnNjcmliZXIgaW5pdGlhdGVkIGFjdGlvbnMsIGRlZmF1bHRzIHRvIHRydWUKICAgICAgICAgICAgYm9vbGVhbiBhZG1pbiBvcHRpb25hbCBhZG1pbiBhY3Rpb25zIGluIG91ciB3ZWIgYXBwLCBkZWZhdWx0cyB0byB0cnVlCiAgICAgICAgICAgIGJvb2xlYW4gYXBpIG9wdGlvbmFsIGFjdGlvbnMgdGhhdCBoYXBwZW4gdmlhIEFQSSBjYWxscywgZGVmYXVsdHMgdG8gZmFsc2UKICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSBjYWxsIHN1Y2NlZWRzLCBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RXZWJob29rQWRkKCRpZCwgJHVybCwgJGFjdGlvbnM9YXJyYXkgKAopLCAkc291cmNlcz1hcnJheSAoCikpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbInVybCJdID0gJHVybDsKICAgICAgICAkcGFyYW1zWyJhY3Rpb25zIl0gPSAkYWN0aW9uczsKICAgICAgICAkcGFyYW1zWyJzb3VyY2VzIl0gPSAkc291cmNlczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RXZWJob29rQWRkIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIERlbGV0ZSBhbiBleGlzdGluZyBXZWJob29rIFVSTCBmcm9tIGEgZ2l2ZW4gbGlzdAogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR1cmwgdGhlIFVSTCBvZiBhIFdlYmhvb2sgb24gdGhpcyBsaXN0CiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgY2FsbCBzdWNjZWVkcywgb3RoZXJ3aXNlIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93bgogICAgICovCiAgICBmdW5jdGlvbiBsaXN0V2ViaG9va0RlbCgkaWQsICR1cmwpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbInVybCJdID0gJHVybDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RXZWJob29rRGVsIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIFJldHJpZXZlIGFsbCBvZiB0aGUgU3RhdGljIFNlZ21lbnRzIGZvciBhIGxpc3QuCiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKiAKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEByZXR1cm4gYXJyYXkgYW4gYXJyYXkgb2YgcGFyYW1ldGVycyBmb3IgZWFjaCBzdGF0aWMgc2VnbWVudAogICAgICogQHJldHVybmYgaW50IGlkIHRoZSBpZCBvZiB0aGUgc2VnbWVudAogICAgICogQHJldHVybmYgc3RyaW5nIG5hbWUgdGhlIG5hbWUgZm9yIHRoZSBzZWdtZW50CiAgICAgKiBAcmV0dXJuZiBpbnQgbWVtYmVyX2NvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgbWVtYmVycyBjdXJyZW50bHkgaW4gYSBzZWdtZW50CiAgICAgKiBAcmV0dXJuZiBkYXRlIGNyZWF0ZWRfZGF0ZSB0aGUgZGF0ZS90aW1lIHRoZSBzZWdtZW50IHdhcyBjcmVhdGVkCiAgICAgKiBAcmV0dXJuZiBkYXRlIGxhc3RfdXBkYXRlIHRoZSBkYXRlL3RpbWUgdGhlIHNlZ21lbnQgd2FzIGxhc3QgdXBkYXRlZCAoYWRkIG9yIGRlbCkKICAgICAqIEByZXR1cm5mIGRhdGUgbGFzdF9yZXNldCB0aGUgZGF0ZS90aW1lIHRoZSBzZWdtZW50IHdhcyBsYXN0IHJlc2V0IChpZSBoYWQgYWxsIG1lbWJlcnMgY2xlYXJlZCBmcm9tIGl0KQogICAgICovCiAgICBmdW5jdGlvbiBsaXN0U3RhdGljU2VnbWVudHMoJGlkKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaWQiXSA9ICRpZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RTdGF0aWNTZWdtZW50cyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKiBTYXZlIGEgc2VnbWVudCBhZ2FpbnN0IGEgbGlzdCBmb3IgbGF0ZXIgdXNlLiBUaGVyZSBpcyBubyBsaW1pdCB0byB0aGUgbnVtYmVyIG9mIHNlZ21lbnRzIHdoaWNoIGNhbiBiZSBzYXZlZC4gU3RhdGljIFNlZ21lbnRzIDxzdHJvbmc+YXJlIG5vdDwvc3Ryb25nPiB0aWVkCiAgICAgKiAgdG8gYW55IG1lcmdlIGRhdGEsIGludGVyZXN0IGdyb3VwcywgZXRjLiBUaGV5IGVzc2VudGlhbGx5IGFsbG93IHlvdSB0byBjb25maWd1cmUgYW4gdW5saW1pdGVkIG51bWJlciBvZiBjdXN0b20gc2VnbWVudHMgd2hpY2ggd2lsbCBoYXZlIHN0YW5kYXJkIHBlcmZvcm1hbmNlLiAKICAgICAqICBXaGVuIHVzaW5nIHByb3BlciBzZWdtZW50cywgU3RhdGljIFNlZ21lbnRzIGFyZSBvbmUgb2YgdGhlIGF2YWlsYWJsZSBvcHRpb25zIGZvciBzZWdtZW50YXRpb24ganVzdCBhcyBpZiB5b3UgdXNlZCBhIG1lcmdlIHZhciAoYW5kIHRoZXkgY2FuIGJlIHVzZWQgd2l0aCBvdGhlciBzZWdtZW50YXRpb24KICAgICAqICBvcHRpb25zKSwgdGhvdWdoIHBlcmZvcm1hbmNlIG1heSBkZWdyYWRlIGF0IHRoYXQgcG9pbnQuCiAgICAgKiAKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lIGEgdW5pcXVlIG5hbWUgcGVyIGxpc3QgZm9yIHRoZSBzZWdtZW50IC0gNTAgYnl0ZSBtYXhpbXVtIGxlbmd0aCwgYW55dGhpbmcgbG9uZ2VyIHdpbGwgdGhyb3cgYW4gZXJyb3IKICAgICAqIEByZXR1cm4gaW50IHRoZSBpZCBvZiB0aGUgbmV3IHNlZ21lbnQsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bi4KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFN0YXRpY1NlZ21lbnRBZGQoJGlkLCAkbmFtZSkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgJHBhcmFtc1sibmFtZSJdID0gJG5hbWU7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0U3RhdGljU2VnbWVudEFkZCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKiBSZXNldHMgYSBzdGF0aWMgc2VnbWVudCAtIHJlbW92ZXMgPHN0cm9uZz5hbGw8L3N0cm9uZz4gbWVtYmVycyBmcm9tIHRoZSBzdGF0aWMgc2VnbWVudC4gTm90ZTogZG9lcyBub3QgYWN0dWFsbHkgYWZmZWN0IGxpc3QgbWVtYmVyIGRhdGEKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHBhcmFtIGludCAkc2VnX2lkIHRoZSBpZCBvZiB0aGUgc3RhdGljIHNlZ21lbnQgdG8gcmVzZXQgIC0gZ2V0IGZyb20gbGlzdFN0YXRpY1NlZ21lbnRzKCkKICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIGl0IHdvcmtlZCwgb3RoZXJ3aXNlIGFuIGVycm9yIGlzIHRocm93bi4KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFN0YXRpY1NlZ21lbnRSZXNldCgkaWQsICRzZWdfaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbInNlZ19pZCJdID0gJHNlZ19pZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RTdGF0aWNTZWdtZW50UmVzZXQiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKiogRGVsZXRlIGEgc3RhdGljIHNlZ21lbnQuIE5vdGUgdGhhdCB0aGlzIHdpbGwsIG9mIGNvdXJzZSwgcmVtb3ZlIGFueSBtZW1iZXIgYWZmaWxpYXRpb25zIHdpdGggdGhlIHNlZ21lbnQKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHBhcmFtIGludCAkc2VnX2lkIHRoZSBpZCBvZiB0aGUgc3RhdGljIHNlZ21lbnQgdG8gZGVsZXRlIC0gZ2V0IGZyb20gbGlzdFN0YXRpY1NlZ21lbnRzKCkKICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIGl0IHdvcmtlZCwgb3RoZXJ3aXNlIGFuIGVycm9yIGlzIHRocm93bi4KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFN0YXRpY1NlZ21lbnREZWwoJGlkLCAkc2VnX2lkKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaWQiXSA9ICRpZDsKICAgICAgICAkcGFyYW1zWyJzZWdfaWQiXSA9ICRzZWdfaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0U3RhdGljU2VnbWVudERlbCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKiBBZGQgbGlzdCBtZW1iZXJzIHRvIGEgc3RhdGljIHNlZ21lbnQuIEl0IGlzIHN1Z2dlc3RlZCB0aGF0IHlvdSBsaW1pdCBiYXRjaCBzaXplIHRvIG5vIG1vcmUgdGhhbiAxMCwwMDAgYWRkcmVzc2VzIHBlciBjYWxsLiBFbWFpbCBhZGRyZXNzZXMgbXVzdCBleGlzdCBvbiB0aGUgbGlzdAogICAgICogIGluIG9yZGVyIHRvIGJlIGluY2x1ZGVkIC0gdGhpcyA8c3Ryb25nPndpbGwgbm90PC9zdHJvbmc+IHN1YnNjcmliZSB0aGVtIHRvIHRoZSBsaXN0IQogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gaW50ICRzZWdfaWQgdGhlIGlkIG9mIHRoZSBzdGF0aWMgc2VnbWVudCB0byBtb2RpZnkgLSBnZXQgZnJvbSBsaXN0U3RhdGljU2VnbWVudHMoKQogICAgICogQHBhcmFtIGFycmF5ICRiYXRjaCBhbiBhcnJheSBvZiBlbWFpbCBhZGRyZXNzZXMgYW5kL29yIHVuaXF1ZV9pZHMgdG8gYWRkIHRvIHRoZSBzZWdtZW50CiAgICAgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIG9wZXJhdGlvbgogICAgICogQHJldHVybmYgaW50IHN1Y2Nlc3MgdGhlIHRvdGFsIG51bWJlciBvZiBzdWNjZXNzZnVsIHVwZGF0ZXMgKHdpbGwgaW5jbHVkZSBtZW1iZXJzIGFscmVhZHkgaW4gdGhlIHNlZ21lbnQpCiAgICAgKiBAcmV0dXJuZiBhcnJheSBlcnJvcnMgdGhlIGVtYWlsIGFkZHJlc3MsIGFuIGVycm9yIGNvZGUsIGFuZCBhIG1lc3NhZ2UgZXhwbGFpbmluZyB3aHkgdGhleSBjb3VsZG4ndCBiZSBhZGRlZAogICAgICovCiAgICBmdW5jdGlvbiBsaXN0U3RhdGljU2VnbWVudE1lbWJlcnNBZGQoJGlkLCAkc2VnX2lkLCAkYmF0Y2gpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbInNlZ19pZCJdID0gJHNlZ19pZDsKICAgICAgICAkcGFyYW1zWyJiYXRjaCJdID0gJGJhdGNoOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdFN0YXRpY1NlZ21lbnRNZW1iZXJzQWRkIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqIFJlbW92ZSBsaXN0IG1lbWJlcnMgZnJvbSBhIHN0YXRpYyBzZWdtZW50LiBJdCBpcyBzdWdnZXN0ZWQgdGhhdCB5b3UgbGltaXQgYmF0Y2ggc2l6ZSB0byBubyBtb3JlIHRoYW4gMTAsMDAwIGFkZHJlc3NlcyBwZXIgY2FsbC4gRW1haWwgYWRkcmVzc2VzIG11c3QgZXhpc3Qgb24gdGhlIGxpc3QKICAgICAqICBpbiBvcmRlciB0byBiZSByZW1vdmVkIC0gdGhpcyA8c3Ryb25nPndpbGwgbm90PC9zdHJvbmc+IHVuc3Vic2NyaWJlIHRoZW0gZnJvbSB0aGUgbGlzdCEKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHBhcmFtIGludCAkc2VnX2lkIHRoZSBpZCBvZiB0aGUgc3RhdGljIHNlZ21lbnQgdG8gZGVsZXRlIC0gZ2V0IGZyb20gbGlzdFN0YXRpY1NlZ21lbnRzKCkKICAgICAqIEBwYXJhbSBhcnJheSAkYmF0Y2ggYW4gYXJyYXkgb2YgZW1haWwgYWRkcmVzc2VzIGFuZC9vciB1bmlxdWVfaWRzIHRvIHJlbW92ZSBmcm9tIHRoZSBzZWdtZW50CiAgICAgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIG9wZXJhdGlvbgogICAgICogQHJldHVybmYgaW50IHN1Y2Nlc3MgdGhlIHRvdGFsIG51bWJlciBvZiBzdWNjZXNmdWwgcmVtb3ZhbHMKICAgICAqIEByZXR1cm5mIGFycmF5IGVycm9ycyB0aGUgZW1haWwgYWRkcmVzcywgYW4gZXJyb3IgY29kZSwgYW5kIGEgbWVzc2FnZSBleHBsYWluaW5nIHdoeSB0aGV5IGNvdWxkbid0IGJlIHJlbW92ZWQKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFN0YXRpY1NlZ21lbnRNZW1iZXJzRGVsKCRpZCwgJHNlZ19pZCwgJGJhdGNoKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaWQiXSA9ICRpZDsKICAgICAgICAkcGFyYW1zWyJzZWdfaWQiXSA9ICRzZWdfaWQ7CiAgICAgICAgJHBhcmFtc1siYmF0Y2giXSA9ICRiYXRjaDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RTdGF0aWNTZWdtZW50TWVtYmVyc0RlbCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogU3Vic2NyaWJlIHRoZSBwcm92aWRlZCBlbWFpbCB0byBhIGxpc3QuIEJ5IGRlZmF1bHQgdGhpcyBzZW5kcyBhIGNvbmZpcm1hdGlvbiBlbWFpbCAtIHlvdSB3aWxsIG5vdCBzZWUgbmV3IG1lbWJlcnMgdW50aWwgdGhlIGxpbmsgY29udGFpbmVkIGluIGl0IGlzIGNsaWNrZWQhCiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKgogICAgICogQGV4YW1wbGUgbWNhcGlfbGlzdFN1YnNjcmliZS5waHAKICAgICAqIEBleGFtcGxlIGpzb25fbGlzdFN1YnNjcmliZS5waHAgICAgICAgIAogICAgICogQGV4YW1wbGUgeG1sLXJwY19saXN0U3Vic2NyaWJlLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBzdHJpbmcgJGVtYWlsX2FkZHJlc3MgdGhlIGVtYWlsIGFkZHJlc3MgdG8gc3Vic2NyaWJlCiAgICAgKiBAcGFyYW0gYXJyYXkgJG1lcmdlX3ZhcnMgb3B0aW9uYWwgbWVyZ2VzIGZvciB0aGUgZW1haWwgKEZOQU1FLCBMTkFNRSwgZXRjLikgKHNlZSBleGFtcGxlcyBiZWxvdyBmb3IgaGFuZGxpbmcgImJsYW5rIiBhcnJheXMpLiBOb3RlIHRoYXQgYSBtZXJnZSBmaWVsZCBjYW4gb25seSBob2xkIHVwIHRvIDI1NSBieXRlcy4gQWxzbywgdGhlcmUgYXJlIGEgZmV3ICJzcGVjaWFsIiBrZXlzOgogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgRU1BSUwgc2V0IHRoaXMgdG8gY2hhbmdlIHRoZSBlbWFpbCBhZGRyZXNzLiBUaGlzIGlzIG9ubHkgcmVzcGVjdGVkIG9uIGNhbGxzIHVzaW5nIHVwZGF0ZV9leGlzdGluZyBvciB3aGVuIHBhc3NlZCB0byBsaXN0VXBkYXRlTWVtYmVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXkgR1JPVVBJTkdTIFNldCBJbnRlcmVzdCBHcm91cHMgYnkgR3JvdXBpbmcuIEVhY2ggZWxlbWVudCBpbiB0aGlzIGFycmF5IHNob3VsZCBiZSBhbiBhcnJheSBjb250YWluaW5nIHRoZSAiZ3JvdXBzIiBwYXJhbWV0ZXIgd2hpY2ggY29udGFpbnMgYSBjb21tYSBkZWxpbWl0ZWQgbGlzdCBvZiBJbnRlcmVzdCBHcm91cHMgdG8gYWRkLiBDb21tYXMgaW4gSW50ZXJlc3QgR3JvdXAgbmFtZXMgc2hvdWxkIGJlIGVzY2FwZWQgd2l0aCBhIGJhY2tzbGFzaC4gaWUsICIsIiA9Jmd0OyAiXCwiIGFuZCBlaXRoZXIgYW4gImlkIiBvciAibmFtZSIgcGFyYW1ldGVyIHRvIHNwZWNpZnkgdGhlIEdyb3VwaW5nIC0gZ2V0IGZyb20gbGlzdEludGVyZXN0R3JvdXBpbmdzKCkKICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIE9QVElOSVAgU2V0IHRoZSBPcHQtaW4gSVAgZmllbGRzLiA8ZW0+QWJ1c2luZyB0aGlzIG1heSBjYXVzZSB5b3VyIGFjY291bnQgdG8gYmUgc3VzcGVuZGVkLjwvZW0+IFdlIGRvIHZhbGlkYXRlIHRoaXMgYW5kIGl0IG11c3Qgbm90IGJlIGEgcHJpdmF0ZSBJUCBhZGRyZXNzLgogICAgICAgICAgICAgICAgICAgICAgICBhcnJheSBNQ19MT0NBVElPTiBTZXQgdGhlIG1lbWJlcnMgZ2VvZ3JhcGhpYyBsb2NhdGlvbi4gQnkgZGVmYXVsdCBpZiB0aGlzIG1lcmdlIGZpZWxkIGV4aXN0cywgd2UnbGwgdXBkYXRlIHVzaW5nIHRoZSBvcHRpbl9pcCBpZiBpdCBleGlzdHMuIElmIHRoZSBhcnJheSBjb250YWlucyBMQVRJVFVERSBhbmQgTE9OR0lUVURFIGtleXMsIHRoZXkgd2lsbCBiZSB1c2VkLiBOT1RFIC0gdGhpcyB3aWxsIHNsb3cgZG93biBlYWNoIHN1YnNjcmliZSBjYWxsIGEgYml0LCBlc3BlY2lhbGx5IGZvciBsYXQvbG5nIHBhaXJzIGluIHNwYXJzZWx5IHBvcHVsYXRlZCBhcmVhcy4gQ3VycmVudGx5IG91ciBhdXRvbWF0ZWQgYmFja2dyb3VuZCBwcm9jZXNzZXMgY2FuIGFuZCB3aWxsIG92ZXJ3cml0ZSB0aGlzIGJhc2VkIG9uIG9wZW5zIGFuZCBjbGlja3MuCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPkhhbmRsaW5nIEZpZWxkIERhdGEgVHlwZXM8L3N0cm9uZz4gLSBtb3N0IGZpZWxkcyB5b3UgY2FuIGp1c3QgcGFzcyBhIHN0cmluZyBhbmQgYWxsIGlzIHdlbGwuIEZvciBzb21lLCB0aG91Z2gsIHRoYXQgaXMgbm90IHRoZSBjYXNlLi4uCiAgICAgICAgICAgICAgICAgICAgICAgIEZpZWxkIHZhbHVlcyBzaG91bGQgYmUgZm9ybWF0dGVkIGFzIGZvbGxvd3M6CiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZyBhZGRyZXNzIEZvciB0aGUgc3RyaW5nIHZlcnNpb24gb2YgYW4gQWRkcmVzcywgdGhlIGZpZWxkcyBzaG91bGQgYmUgZGVsaW1pdGVkIGJ5IDxzdHJvbmc+Mjwvc3Ryb25nPiBzcGFjZXMuIEFkZHJlc3MgMiBjYW4gYmUgc2tpcHBlZC4gVGhlIENvdW50cnkgc2hvdWxkIGJlIGEgMiBjaGFyYWN0ZXIgSVNPLTMxNjYtMSBjb2RlIGFuZCB3aWxsIGRlZmF1bHQgdG8geW91ciBkZWZhdWx0IGNvdW50cnkgaWYgbm90IHNldAogICAgICAgICAgICAgICAgICAgICAgICBhcnJheSBhZGRyZXNzIEZvciB0aGUgYXJyYXkgdmVyc2lvbiBvZiBhbiBBZGRyZXNzLCB0aGUgcmVxdWlyZW1lbnRzIGZvciBBZGRyZXNzIDIgYW5kIENvdW50cnkgYXJlIHRoZSBzYW1lIGFzIHdpdGggdGhlIHN0cmluZyB2ZXJzaW9uLiBUaGVuIHNpbXBseSBwYXNzIHVzIGFuIGFycmF5IHdpdGggdGhlIGtleXMgPHN0cm9uZz5hZGRyMTwvc3Ryb25nPiwgPHN0cm9uZz5hZGRyMjwvc3Ryb25nPiwgPHN0cm9uZz5jaXR5PC9zdHJvbmc+LCA8c3Ryb25nPnN0YXRlPC9zdHJvbmc+LCA8c3Ryb25nPnppcDwvc3Ryb25nPiwgPHN0cm9uZz5jb3VudHJ5PC9zdHJvbmc+IGFuZCBhcHByb3ByaWF0ZSB2YWx1ZXMgZm9yIGVhY2gKICAgIAogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgZGF0ZSB1c2UgWVlZWS1NTS1ERCB0byBiZSBzYWZlLiBHZW5lcmFsbHksIHRob3VnaCwgYW55dGhpbmcgc3RydG90aW1lKCkgdW5kZXJzdGFuZHMgd2UnbGwgdW5kZXJzdGFuZCAtIDxhIGhyZWY9Imh0dHA6Ly91czIucGhwLm5ldC9zdHJ0b3RpbWUiIHRhcmdldD0iX2JsYW5rIj5odHRwOi8vdXMyLnBocC5uZXQvc3RydG90aW1lPC9hPgogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgZHJvcGRvd24gY2FuIGJlIGEgbm9ybWFsIHN0cmluZyAtIHdlIDxlbT53aWxsPC9lbT4gdmFsaWRhdGUgdGhhdCB0aGUgdmFsdWUgaXMgYSB2YWxpZCBvcHRpb24KICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGltYWdlIG11c3QgYmUgYSB2YWxpZCwgZXhpc3RpbmcgdXJsLiB3ZSA8ZW0+d2lsbDwvZW0+IGNoZWNrIGl0cyBleGlzdGVuY2UKICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nIG11bHRpX2Nob2ljZSBjYW4gYmUgYSBub3JtYWwgc3RyaW5nIC0gd2UgPGVtPndpbGw8L2VtPiB2YWxpZGF0ZSB0aGF0IHRoZSB2YWx1ZSBpcyBhIHZhbGlkIG9wdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgbnVtYmVyIHBhc3MgaW4gYSB2YWxpZCBudW1iZXIgLSBhbnl0aGluZyBlbHNlIHdpbGwgdHVybiBpbiB0byB6ZXJvICgwKS4gTm90ZSwgdGhpcyB3aWxsIGJlIHJvdW5kZWQgdG8gMiBkZWNpbWFsIHBsYWNlcwogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgcGhvbmUgSWYgeW91ciBhY2NvdW50IGhhcyB0aGUgVVMgUGhvbmUgbnVtYmVycyBvcHRpb24gc2V0LCB0aGlzIDxlbT5tdXN0PC9lbT4gYmUgaW4gdGhlIGZvcm0gb2YgTlBBLU5YWC1MSU5FICg0MDQtNTU1LTEyMTIpLiBJZiBub3QsIHdlIGFzc3VtZSBhbiBJbnRlcm5hdGlvbmFsIG51bWJlciBhbmQgd2lsbCBzaW1wbHkgc2V0IHRoZSBmaWVsZCB3aXRoIHdoYXQgZXZlciBudW1iZXIgaXMgcGFzc2VkIGluLgogICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmcgd2Vic2l0ZSBUaGlzIGlzIGEgc3RhbmRhcmQgc3RyaW5nLCBidXQgd2UgPGVtPndpbGw8L2VtPiB2ZXJpZnkgdGhhdCBpdCBsb29rcyBsaWtlIGEgdmFsaWQgVVJMCiAgICAKICAgICAqIEBwYXJhbSBzdHJpbmcgJGVtYWlsX3R5cGUgb3B0aW9uYWwgZW1haWwgdHlwZSBwcmVmZXJlbmNlIGZvciB0aGUgZW1haWwgKGh0bWwsIHRleHQsIG9yIG1vYmlsZSBkZWZhdWx0cyB0byBodG1sKQogICAgICogQHBhcmFtIGJvb2wgJGRvdWJsZV9vcHRpbiBvcHRpb25hbCBmbGFnIHRvIGNvbnRyb2wgd2hldGhlciBhIGRvdWJsZSBvcHQtaW4gY29uZmlybWF0aW9uIG1lc3NhZ2UgaXMgc2VudCwgZGVmYXVsdHMgdG8gdHJ1ZS4gPGVtPkFidXNpbmcgdGhpcyBtYXkgY2F1c2UgeW91ciBhY2NvdW50IHRvIGJlIHN1c3BlbmRlZC48L2VtPgogICAgICogQHBhcmFtIGJvb2wgJHVwZGF0ZV9leGlzdGluZyBvcHRpb25hbCBmbGFnIHRvIGNvbnRyb2wgd2hldGhlciBhIGV4aXN0aW5nIHN1YnNjcmliZXJzIHNob3VsZCBiZSB1cGRhdGVkIGluc3RlYWQgb2YgdGhyb3dpbmcgYW5kIGVycm9yLCBkZWZhdWx0cyB0byBmYWxzZQogICAgICogQHBhcmFtIGJvb2wgJHJlcGxhY2VfaW50ZXJlc3RzIG9wdGlvbmFsIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgd2UgcmVwbGFjZSB0aGUgaW50ZXJlc3QgZ3JvdXBzIHdpdGggdGhlIGdyb3VwcyBwcm92aWRlZCwgb3Igd2UgYWRkIHRoZSBwcm92aWRlZCBncm91cHMgdG8gdGhlIG1lbWJlcidzIGludGVyZXN0IGdyb3VwcyAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIHRydWUpCiAgICAgKiBAcGFyYW0gYm9vbCAkc2VuZF93ZWxjb21lIG9wdGlvbmFsIGlmIHlvdXIgZG91YmxlX29wdGluIGlzIGZhbHNlIGFuZCB0aGlzIGlzIHRydWUsIHdlIHdpbGwgc2VuZCB5b3VyIGxpc3RzIFdlbGNvbWUgRW1haWwgaWYgdGhpcyBzdWJzY3JpYmUgc3VjY2VlZHMgLSB0aGlzIHdpbGwgKm5vdCogZmlyZSBpZiB3ZSBlbmQgdXAgdXBkYXRpbmcgYW4gZXhpc3Rpbmcgc3Vic2NyaWJlci4gSWYgZG91YmxlX29wdGluIGlzIHRydWUsIHRoaXMgaGFzIG5vIGVmZmVjdC4gZGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBvbiBmYWlsdXJlLiBXaGVuIHVzaW5nIE1DQVBJLmNsYXNzLnBocCwgdGhlIHZhbHVlIGNhbiBiZSB0ZXN0ZWQgYW5kIGVycm9yIG1lc3NhZ2VzIHB1bGxlZCBmcm9tIHRoZSBNQ0FQSSBvYmplY3QgKHNlZSBiZWxvdykKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFN1YnNjcmliZSgkaWQsICRlbWFpbF9hZGRyZXNzLCAkbWVyZ2VfdmFycz1OVUxMLCAkZW1haWxfdHlwZT0naHRtbCcsICRkb3VibGVfb3B0aW49dHJ1ZSwgJHVwZGF0ZV9leGlzdGluZz1mYWxzZSwgJHJlcGxhY2VfaW50ZXJlc3RzPXRydWUsICRzZW5kX3dlbGNvbWU9ZmFsc2UpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbImVtYWlsX2FkZHJlc3MiXSA9ICRlbWFpbF9hZGRyZXNzOwogICAgICAgICRwYXJhbXNbIm1lcmdlX3ZhcnMiXSA9ICRtZXJnZV92YXJzOwogICAgICAgICRwYXJhbXNbImVtYWlsX3R5cGUiXSA9ICRlbWFpbF90eXBlOwogICAgICAgICRwYXJhbXNbImRvdWJsZV9vcHRpbiJdID0gJGRvdWJsZV9vcHRpbjsKICAgICAgICAkcGFyYW1zWyJ1cGRhdGVfZXhpc3RpbmciXSA9ICR1cGRhdGVfZXhpc3Rpbmc7CiAgICAgICAgJHBhcmFtc1sicmVwbGFjZV9pbnRlcmVzdHMiXSA9ICRyZXBsYWNlX2ludGVyZXN0czsKICAgICAgICAkcGFyYW1zWyJzZW5kX3dlbGNvbWUiXSA9ICRzZW5kX3dlbGNvbWU7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0U3Vic2NyaWJlIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVbnN1YnNjcmliZSB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcyBmcm9tIHRoZSBsaXN0CiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9saXN0VW5zdWJzY3JpYmUucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2xpc3RVbnN1YnNjcmliZS5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICRlbWFpbF9hZGRyZXNzIHRoZSBlbWFpbCBhZGRyZXNzIHRvIHVuc3Vic2NyaWJlICBPUiB0aGUgZW1haWwgImlkIiByZXR1cm5lZCBmcm9tIGxpc3RNZW1iZXJJbmZvLCBXZWJob29rcywgYW5kIENhbXBhaWducwogICAgICogQHBhcmFtIGJvb2xlYW4gJGRlbGV0ZV9tZW1iZXIgZmxhZyB0byBjb21wbGV0ZWx5IGRlbGV0ZSB0aGUgbWVtYmVyIGZyb20geW91ciBsaXN0IGluc3RlYWQgb2YganVzdCB1bnN1YnNjcmliaW5nLCBkZWZhdWx0IHRvIGZhbHNlCiAgICAgKiBAcGFyYW0gYm9vbGVhbiAkc2VuZF9nb29kYnllIGZsYWcgdG8gc2VuZCB0aGUgZ29vZGJ5ZSBlbWFpbCB0byB0aGUgZW1haWwgYWRkcmVzcywgZGVmYXVsdHMgdG8gdHJ1ZQogICAgICogQHBhcmFtIGJvb2xlYW4gJHNlbmRfbm90aWZ5IGZsYWcgdG8gc2VuZCB0aGUgdW5zdWJzY3JpYmUgbm90aWZpY2F0aW9uIGVtYWlsIHRvIHRoZSBhZGRyZXNzIGRlZmluZWQgaW4gdGhlIGxpc3QgZW1haWwgbm90aWZpY2F0aW9uIHNldHRpbmdzLCBkZWZhdWx0cyB0byB0cnVlCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBvbiBmYWlsdXJlLiBXaGVuIHVzaW5nIE1DQVBJLmNsYXNzLnBocCwgdGhlIHZhbHVlIGNhbiBiZSB0ZXN0ZWQgYW5kIGVycm9yIG1lc3NhZ2VzIHB1bGxlZCBmcm9tIHRoZSBNQ0FQSSBvYmplY3QgKHNlZSBiZWxvdykKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFVuc3Vic2NyaWJlKCRpZCwgJGVtYWlsX2FkZHJlc3MsICRkZWxldGVfbWVtYmVyPWZhbHNlLCAkc2VuZF9nb29kYnllPXRydWUsICRzZW5kX25vdGlmeT10cnVlKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaWQiXSA9ICRpZDsKICAgICAgICAkcGFyYW1zWyJlbWFpbF9hZGRyZXNzIl0gPSAkZW1haWxfYWRkcmVzczsKICAgICAgICAkcGFyYW1zWyJkZWxldGVfbWVtYmVyIl0gPSAkZGVsZXRlX21lbWJlcjsKICAgICAgICAkcGFyYW1zWyJzZW5kX2dvb2RieWUiXSA9ICRzZW5kX2dvb2RieWU7CiAgICAgICAgJHBhcmFtc1sic2VuZF9ub3RpZnkiXSA9ICRzZW5kX25vdGlmeTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RVbnN1YnNjcmliZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogRWRpdCB0aGUgZW1haWwgYWRkcmVzcywgbWVyZ2UgZmllbGRzLCBhbmQgaW50ZXJlc3QgZ3JvdXBzIGZvciBhIGxpc3QgbWVtYmVyLiBJZiB5b3UgYXJlIGRvaW5nIGEgYmF0Y2ggdXBkYXRlIG9uIGxvdHMgb2YgdXNlcnMsIAogICAgICogY29uc2lkZXIgdXNpbmcgbGlzdEJhdGNoU3Vic2NyaWJlKCkgd2l0aCB0aGUgdXBkYXRlX2V4aXN0aW5nIGFuZCBwb3NzaWJsZSByZXBsYWNlX2ludGVyZXN0cyBwYXJhbWV0ZXIuCiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9saXN0VXBkYXRlTWVtYmVyLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBzdHJpbmcgJGVtYWlsX2FkZHJlc3MgdGhlIGN1cnJlbnQgZW1haWwgYWRkcmVzcyBvZiB0aGUgbWVtYmVyIHRvIHVwZGF0ZSBPUiB0aGUgImlkIiBmb3IgdGhlIG1lbWJlciByZXR1cm5lZCBmcm9tIGxpc3RNZW1iZXJJbmZvLCBXZWJob29rcywgYW5kIENhbXBhaWducwogICAgICogQHBhcmFtIGFycmF5ICRtZXJnZV92YXJzIGFycmF5IG9mIG5ldyBmaWVsZCB2YWx1ZXMgdG8gdXBkYXRlIHRoZSBtZW1iZXIgd2l0aC4gIFNlZSBtZXJnZV92YXJzIGluIGxpc3RTdWJzY3JpYmUoKSBmb3IgZGV0YWlscy4KICAgICAqIEBwYXJhbSBzdHJpbmcgJGVtYWlsX3R5cGUgY2hhbmdlIHRoZSBlbWFpbCB0eXBlIHByZWZlcmVuY2UgZm9yIHRoZSBtZW1iZXIgKCJodG1sIiwgInRleHQiLCBvciAibW9iaWxlIikuICBMZWF2ZSBibGFuayB0byBrZWVwIHRoZSBleGlzdGluZyBwcmVmZXJlbmNlIChvcHRpb25hbCkKICAgICAqIEBwYXJhbSBib29sZWFuICRyZXBsYWNlX2ludGVyZXN0cyBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHdlIHJlcGxhY2UgdGhlIGludGVyZXN0IGdyb3VwcyB3aXRoIHRoZSB1cGRhdGVkIGdyb3VwcyBwcm92aWRlZCwgb3Igd2UgYWRkIHRoZSBwcm92aWRlZCBncm91cHMgdG8gdGhlIG1lbWJlcidzIGludGVyZXN0IGdyb3VwcyAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIHRydWUpCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBvbiBmYWlsdXJlLiBXaGVuIHVzaW5nIE1DQVBJLmNsYXNzLnBocCwgdGhlIHZhbHVlIGNhbiBiZSB0ZXN0ZWQgYW5kIGVycm9yIG1lc3NhZ2VzIHB1bGxlZCBmcm9tIHRoZSBNQ0FQSSBvYmplY3QKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdFVwZGF0ZU1lbWJlcigkaWQsICRlbWFpbF9hZGRyZXNzLCAkbWVyZ2VfdmFycywgJGVtYWlsX3R5cGU9JycsICRyZXBsYWNlX2ludGVyZXN0cz10cnVlKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaWQiXSA9ICRpZDsKICAgICAgICAkcGFyYW1zWyJlbWFpbF9hZGRyZXNzIl0gPSAkZW1haWxfYWRkcmVzczsKICAgICAgICAkcGFyYW1zWyJtZXJnZV92YXJzIl0gPSAkbWVyZ2VfdmFyczsKICAgICAgICAkcGFyYW1zWyJlbWFpbF90eXBlIl0gPSAkZW1haWxfdHlwZTsKICAgICAgICAkcGFyYW1zWyJyZXBsYWNlX2ludGVyZXN0cyJdID0gJHJlcGxhY2VfaW50ZXJlc3RzOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdFVwZGF0ZU1lbWJlciIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogU3Vic2NyaWJlIGEgYmF0Y2ggb2YgZW1haWwgYWRkcmVzc2VzIHRvIGEgbGlzdCBhdCBvbmNlLiBJZiB5b3UgYXJlIHVzaW5nIGEgc2VyaWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBBUEksIHdlIHN0cm9uZ2x5IHN1Z2dlc3QgdGhhdCB5b3UKICAgICAqIG9ubHkgcnVuIHRoaXMgbWV0aG9kIGFzIGEgUE9TVCByZXF1ZXN0LCBhbmQgPGVtPm5vdDwvZW0+IGEgR0VUIHJlcXVlc3QuIE1heGltdW0gYmF0Y2ggc2l6ZXMgdmFyeSBiYXNlZCBvbiB0aGUgYW1vdW50IG9mIGRhdGEgaW4gZWFjaCByZWNvcmQsCiAgICAgKiB0aG91Z2ggeW91IHNob3VsZCBjYXAgdGhlbSBhdCA1ayAtIDEwayByZWNvcmRzLCBkZXBlbmRpbmcgb24geW91ciBleHBlcmllbmNlLiBUaGVzZSBjYWxscyBhcmUgYWxzbyBsb25nLCBzbyBiZSBzdXJlIHlvdSBpbmNyZWFzZSB5b3VyIHRpbWVvdXQgdmFsdWVzLgogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2xpc3RCYXRjaFN1YnNjcmliZS5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfbGlzdEJhdGNoU3Vic2NyaWJlLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBhcnJheSAkYmF0Y2ggYW4gYXJyYXkgb2Ygc3RydWN0cyBmb3IgZWFjaCBhZGRyZXNzIHRvIGltcG9ydCB3aXRoIHR3byBzcGVjaWFsIGtleXM6ICJFTUFJTCIgZm9yIHRoZSBlbWFpbCBhZGRyZXNzLCBhbmQgIkVNQUlMX1RZUEUiIGZvciB0aGUgZW1haWwgdHlwZSBvcHRpb24gKGh0bWwsIHRleHQsIG9yIG1vYmlsZSkgCiAgICAgKiBAcGFyYW0gYm9vbGVhbiAkZG91YmxlX29wdGluIGZsYWcgdG8gY29udHJvbCB3aGV0aGVyIHRvIHNlbmQgYW4gb3B0LWluIGNvbmZpcm1hdGlvbiBlbWFpbCAtIGRlZmF1bHRzIHRvIHRydWUKICAgICAqIEBwYXJhbSBib29sZWFuICR1cGRhdGVfZXhpc3RpbmcgZmxhZyB0byBjb250cm9sIHdoZXRoZXIgdG8gdXBkYXRlIG1lbWJlcnMgdGhhdCBhcmUgYWxyZWFkeSBzdWJzY3JpYmVkIHRvIHRoZSBsaXN0IG9yIHRvIHJldHVybiBhbiBlcnJvciwgZGVmYXVsdHMgdG8gZmFsc2UgKHJldHVybiBlcnJvcikKICAgICAqIEBwYXJhbSBib29sZWFuICRyZXBsYWNlX2ludGVyZXN0cyBmbGFnIHRvIGRldGVybWluZSB3aGV0aGVyIHdlIHJlcGxhY2UgdGhlIGludGVyZXN0IGdyb3VwcyB3aXRoIHRoZSB1cGRhdGVkIGdyb3VwcyBwcm92aWRlZCwgb3Igd2UgYWRkIHRoZSBwcm92aWRlZCBncm91cHMgdG8gdGhlIG1lbWJlcidzIGludGVyZXN0IGdyb3VwcyAob3B0aW9uYWwsIGRlZmF1bHRzIHRvIHRydWUpCiAgICAgKiBAcmV0dXJuIHN0cnVjdCBBcnJheSBvZiByZXN1bHQgY291bnRzIGFuZCBhbnkgZXJyb3JzIHRoYXQgb2NjdXJyZWQKICAgICAqIEByZXR1cm5mIGludCBhZGRfY291bnQgTnVtYmVyIG9mIGVtYWlsIGFkZHJlc3NlcyB0aGF0IHdlcmUgc3VjY2VzZnVsbHkgYWRkZWQKICAgICAqIEByZXR1cm5mIGludCB1cGRhdGVfY291bnQgTnVtYmVyIG9mIGVtYWlsIGFkZHJlc3NlcyB0aGF0IHdlcmUgc3VjY2VzZnVsbHkgdXBkYXRlZAogICAgICogQHJldHVybmYgaW50IGVycm9yX2NvdW50IE51bWJlciBvZiBlbWFpbCBhZGRyZXNzZXMgdGhhdCBmYWlsZWQgZHVyaW5nIGFkZGl0aW9uL3VwZGF0aW5nCiAgICAgKiBAcmV0dXJuZiBhcnJheSBlcnJvcnMgQXJyYXkgb2YgZXJyb3IgYXJyYXlzLCBlYWNoIGNvbnRhaW5pbmc6CiAgICAgICAgICAgIHN0cmluZyBjb2RlIHRoZSBlcnJvciBjb2RlCiAgICAgICAgICAgIHN0cmluZyBtZXNzYWdlIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UKICAgICAgICAgICAgc3RyaW5nIGVtYWlsIHRoZSBlbWFpbCBhZGRyZXNzIGJlaW5nIHByb2Nlc3NlZAogICAgICovCiAgICBmdW5jdGlvbiBsaXN0QmF0Y2hTdWJzY3JpYmUoJGlkLCAkYmF0Y2gsICRkb3VibGVfb3B0aW49dHJ1ZSwgJHVwZGF0ZV9leGlzdGluZz1mYWxzZSwgJHJlcGxhY2VfaW50ZXJlc3RzPXRydWUpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbImJhdGNoIl0gPSAkYmF0Y2g7CiAgICAgICAgJHBhcmFtc1siZG91YmxlX29wdGluIl0gPSAkZG91YmxlX29wdGluOwogICAgICAgICRwYXJhbXNbInVwZGF0ZV9leGlzdGluZyJdID0gJHVwZGF0ZV9leGlzdGluZzsKICAgICAgICAkcGFyYW1zWyJyZXBsYWNlX2ludGVyZXN0cyJdID0gJHJlcGxhY2VfaW50ZXJlc3RzOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdEJhdGNoU3Vic2NyaWJlIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVbnN1YnNjcmliZSBhIGJhdGNoIG9mIGVtYWlsIGFkZHJlc3NlcyB0byBhIGxpc3QKICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIG1jYXBpX2xpc3RCYXRjaFVuc3Vic2NyaWJlLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBhcnJheSAkZW1haWxzIGFycmF5IG9mIGVtYWlsIGFkZHJlc3NlcyB0byB1bnN1YnNjcmliZQogICAgICogQHBhcmFtIGJvb2xlYW4gJGRlbGV0ZV9tZW1iZXIgZmxhZyB0byBjb21wbGV0ZWx5IGRlbGV0ZSB0aGUgbWVtYmVyIGZyb20geW91ciBsaXN0IGluc3RlYWQgb2YganVzdCB1bnN1YnNjcmliaW5nLCBkZWZhdWx0IHRvIGZhbHNlCiAgICAgKiBAcGFyYW0gYm9vbGVhbiAkc2VuZF9nb29kYnllIGZsYWcgdG8gc2VuZCB0aGUgZ29vZGJ5ZSBlbWFpbCB0byB0aGUgZW1haWwgYWRkcmVzc2VzLCBkZWZhdWx0cyB0byB0cnVlCiAgICAgKiBAcGFyYW0gYm9vbGVhbiAkc2VuZF9ub3RpZnkgZmxhZyB0byBzZW5kIHRoZSB1bnN1YnNjcmliZSBub3RpZmljYXRpb24gZW1haWwgdG8gdGhlIGFkZHJlc3MgZGVmaW5lZCBpbiB0aGUgbGlzdCBlbWFpbCBub3RpZmljYXRpb24gc2V0dGluZ3MsIGRlZmF1bHRzIHRvIGZhbHNlCiAgICAgKiBAcmV0dXJuIHN0cnVjdCBBcnJheSBvZiByZXN1bHQgY291bnRzIGFuZCBhbnkgZXJyb3JzIHRoYXQgb2NjdXJyZWQKICAgICAqIEByZXR1cm5mIGludCBzdWNjZXNzX2NvdW50IE51bWJlciBvZiBlbWFpbCBhZGRyZXNzZXMgdGhhdCB3ZXJlIHN1Y2Nlc2Z1bGx5IGFkZGVkL3VwZGF0ZWQKICAgICAqIEByZXR1cm5mIGludCBlcnJvcl9jb3VudCBOdW1iZXIgb2YgZW1haWwgYWRkcmVzc2VzIHRoYXQgZmFpbGVkIGR1cmluZyBhZGRpdGlvbi91cGRhdGluZwogICAgICogQHJldHVybmYgYXJyYXkgZXJyb3JzIEFycmF5IG9mIGVycm9yIHN0cnVjdHMuIEVhY2ggZXJyb3Igc3RydWN0IHdpbGwgY29udGFpbiAiY29kZSIsICJtZXNzYWdlIiwgYW5kICJlbWFpbCIKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdEJhdGNoVW5zdWJzY3JpYmUoJGlkLCAkZW1haWxzLCAkZGVsZXRlX21lbWJlcj1mYWxzZSwgJHNlbmRfZ29vZGJ5ZT10cnVlLCAkc2VuZF9ub3RpZnk9ZmFsc2UpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbImVtYWlscyJdID0gJGVtYWlsczsKICAgICAgICAkcGFyYW1zWyJkZWxldGVfbWVtYmVyIl0gPSAkZGVsZXRlX21lbWJlcjsKICAgICAgICAkcGFyYW1zWyJzZW5kX2dvb2RieWUiXSA9ICRzZW5kX2dvb2RieWU7CiAgICAgICAgJHBhcmFtc1sic2VuZF9ub3RpZnkiXSA9ICRzZW5kX25vdGlmeTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RCYXRjaFVuc3Vic2NyaWJlIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgYWxsIG9mIHRoZSBsaXN0IG1lbWJlcnMgZm9yIGEgbGlzdCB0aGF0IGFyZSBvZiBhIHBhcnRpY3VsYXIgc3RhdHVzLiBBcmUgeW91IHRyeWluZyB0byBnZXQgYSBkdW1wIGluY2x1ZGluZyBsb3RzIG9mIG1lcmdlCiAgICAgKiBkYXRhIG9yIHNwZWNpZmljIG1lbWJlcnMgb2YgYSBsaXN0PyBJZiBzbywgY2hlY2tvdXQgdGhlIDxhIGhyZWY9Ii9hcGkvZXhwb3J0Ij5FeHBvcnQgQVBJPC9hPgogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfbGlzdE1lbWJlcnMucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHBhcmFtIHN0cmluZyAkc3RhdHVzIHRoZSBzdGF0dXMgdG8gZ2V0IG1lbWJlcnMgZm9yIC0gb25lIG9mKHN1YnNjcmliZWQsIHVuc3Vic2NyaWJlZCwgPGEgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9Imh0dHA6Ly9lZXB1cmwuY29tL2R3azEiPmNsZWFuZWQ8L2E+LCB1cGRhdGVkKSwgZGVmYXVsdHMgdG8gc3Vic2NyaWJlZAogICAgICogQHBhcmFtIHN0cmluZyAkc2luY2Ugb3B0aW9uYWwgcHVsbCBhbGwgbWVtYmVycyB3aG9zZSBzdGF0dXMgKHN1YnNjcmliZWQvdW5zdWJzY3JpYmVkL2NsZWFuZWQpIGhhcyBjaGFuZ2VkIG9yIHdob3NlIHByb2ZpbGUgKHVwZGF0ZWQpIGhhcyBjaGFuZ2VkIHNpbmNlIHRoaXMgZGF0ZS90aW1lIChpbiBHTVQpIC0gZm9ybWF0IGlzIFlZWVktTU0tREQgSEg6bW06c3MgKDI0aHIpCiAgICAgKiBAcGFyYW0gaW50ICRzdGFydCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgcGFnZSBudW1iZXIgdG8gc3RhcnQgYXQgLSBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhIChwYWdlIDApCiAgICAgKiBAcGFyYW0gaW50ICRsaW1pdCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgbnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuIC0gZGVmYXVsdHMgdG8gMTAwLCB1cHBlciBsaW1pdCBzZXQgYXQgMTUwMDAKICAgICAqIEByZXR1cm4gYXJyYXkgQXJyYXkgb2YgYSB0aGUgdG90YWwgcmVjb3JkcyBtYXRjaCBhbmQgbWF0Y2hpbmcgbGlzdCBtZW1iZXIgZGF0YSBmb3IgdGhpcyBwYWdlIChzZWUgUmV0dXJuZWQgRmllbGRzIGZvciBkZXRhaWxzKQogICAgICogQHJldHVybmYgaW50IHRvdGFsIHRoZSB0b3RhbCBtYXRjaGluZyByZWNvcmRzCiAgICAgKiBAcmV0dXJuZiBhcnJheSBkYXRhIHRoZSBkYXRhIGZvciBlYWNoIG1lbWJlciwgaW5jbHVkaW5nOgogICAgICAgICAgICBzdHJpbmcgZW1haWwgTWVtYmVyIGVtYWlsIGFkZHJlc3MKICAgICAgICAgICAgZGF0ZSB0aW1lc3RhbXAgdGltZXN0YW1wIG9mIHRoZWlyIGFzc29jaWF0ZWQgc3RhdHVzIGRhdGUgKHN1YnNjcmliZWQsIHVuc3Vic2NyaWJlZCwgY2xlYW5lZCwgb3IgdXBkYXRlZCkgaW4gR01UCiAgICAgICAgICAgIHN0cmluZyByZWFzb24gRm9yIHVuc3Vic2NyaWJlcyBvbmx5IC0gdGhlIHJlYXNvbiBjb2xsZWN0ZWQgZm9yIHRoZSB1bnN1YnNjcmliZS4gSWYgcG9wdWxhdGVkLCBvbmUgb2YgJ05PUk1BTCcsJ05PU0lHTlVQJywnSU5BUFBST1BSSUFURScsJ1NQQU0nLCdPVEhFUicKICAgICAgICAgICAgc3RyaW5nIHJlYXNvbl90ZXh0IEZvciB1bnN1YnNjcmliZXMgb25seSAtIGlmIHRoZSByZWFzb24gaXMgT1RIRVIsIHRoZSB0ZXh0IGVudGVyZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RNZW1iZXJzKCRpZCwgJHN0YXR1cz0nc3Vic2NyaWJlZCcsICRzaW5jZT1OVUxMLCAkc3RhcnQ9MCwgJGxpbWl0PTEwMCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgJHBhcmFtc1sic3RhdHVzIl0gPSAkc3RhdHVzOwogICAgICAgICRwYXJhbXNbInNpbmNlIl0gPSAkc2luY2U7CiAgICAgICAgJHBhcmFtc1sic3RhcnQiXSA9ICRzdGFydDsKICAgICAgICAkcGFyYW1zWyJsaW1pdCJdID0gJGxpbWl0OwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdE1lbWJlcnMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEdldCBhbGwgdGhlIGluZm9ybWF0aW9uIGZvciBwYXJ0aWN1bGFyIG1lbWJlcnMgb2YgYSBsaXN0CiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9saXN0TWVtYmVySW5mby5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfbGlzdE1lbWJlckluZm8ucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHBhcmFtIGFycmF5ICRlbWFpbF9hZGRyZXNzIGFuIGFycmF5IG9mIHVwIHRvIDUwIGVtYWlsIGFkZHJlc3NlcyB0byBnZXQgaW5mb3JtYXRpb24gZm9yIE9SIHRoZSAiaWQiKHMpIGZvciB0aGUgbWVtYmVyIHJldHVybmVkIGZyb20gbGlzdE1lbWJlcnMsIFdlYmhvb2tzLCBhbmQgQ2FtcGFpZ25zLiBGb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHksIGlmIGEgc3RyaW5nIGlzIHBhc3NlZCwgaXQgd2lsbCBiZSB0cmVhdGVkIGFzIGFuIGFycmF5IHdpdGggYSBzaW5nbGUgZWxlbWVudCAod2lsbCBub3Qgd29yayB3aXRoIFhNTC1SUEMpLgogICAgICogQHJldHVybiBhcnJheSBhcnJheSBvZiBsaXN0IG1lbWJlcnMgd2l0aCB0aGVpciBpbmZvIGluIGFuIGFycmF5IChzZWUgUmV0dXJuZWQgRmllbGRzIGZvciBkZXRhaWxzKQogICAgICogQHJldHVybmYgaW50IHN1Y2Nlc3MgdGhlIG51bWJlciBvZiBzdWJzY3JpYmVycyBzdWNjZXNzZnVsbHkgZm91bmQgb24gdGhlIGxpc3QKICAgICAqIEByZXR1cm5mIGludCBlcnJvcnMgdGhlIG51bWJlciBvZiBzdWJzY3JpYmVycyB3aG8gd2VyZSBub3QgZm91bmQgb24gdGhlIGxpc3QKICAgICAqIEByZXR1cm5mIGFycmF5IGRhdGEgYW4gYXJyYXkgb2YgYXJyYXlzIHdoZXJlIGVhY2ggb25lIGhhcyBtZW1iZXIgaW5mbzoKICAgICAgICAgICAgc3RyaW5nIGlkIFRoZSB1bmlxdWUgaWQgZm9yIHRoaXMgZW1haWwgYWRkcmVzcyBvbiBhbiBhY2NvdW50CiAgICAgICAgICAgIHN0cmluZyBlbWFpbCBUaGUgZW1haWwgYWRkcmVzcyBhc3NvY2lhdGVkIHdpdGggdGhpcyByZWNvcmQKICAgICAgICAgICAgc3RyaW5nIGVtYWlsX3R5cGUgVGhlIHR5cGUgb2YgZW1haWxzIHRoaXMgY3VzdG9tZXIgYXNrZWQgdG8gZ2V0OiBodG1sLCB0ZXh0LCBvciBtb2JpbGUKICAgICAgICAgICAgYXJyYXkgbWVyZ2VzIEFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGFsbCB0aGUgbWVyZ2UgdGFncyBhbmQgdGhlIGRhdGEgZm9yIHRob3NlIHRhZ3MgZm9yIHRoaXMgZW1haWwgYWRkcmVzcy4gPGVtPk5vdGU8L2VtPjogSW50ZXJlc3QgR3JvdXBzIGFyZSByZXR1cm5lZCBhcyBjb21tYSBkZWxpbWl0ZWQgc3RyaW5ncyAtIGlmIGEgZ3JvdXAgbmFtZSBjb250YWlucyBhIGNvbW1hLCBpdCB3aWxsIGJlIGVzY2FwZWQgd2l0aCBhIGJhY2tzbGFzaC4gaWUsICIsIiA9Jmd0OyAiXCwiLiBHcm91cGluZ3Mgd2lsbCBiZSByZXR1cm5lZCB3aXRoIHRoZWlyICJpZCIgYW5kICJuYW1lIiBhcyB3ZWxsIGFzIGEgImdyb3VwcyIgZmllbGQgZm9ybWF0dGVkIGp1c3QgbGlrZSBJbnRlcmVzdCBHcm91cHMKICAgICAgICAgICAgc3RyaW5nIHN0YXR1cyBUaGUgc3Vic2NyaXB0aW9uIHN0YXR1cyBmb3IgdGhpcyBlbWFpbCBhZGRyZXNzLCBlaXRoZXIgcGVuZGluZywgc3Vic2NyaWJlZCwgdW5zdWJzY3JpYmVkLCBvciBjbGVhbmVkCiAgICAgICAgICAgIHN0cmluZyBpcF9vcHQgSVAgQWRkcmVzcyB0aGlzIGFkZHJlc3Mgb3B0ZWQgaW4gZnJvbS4gCiAgICAgICAgICAgIHN0cmluZyBpcF9zaWdudXAgSVAgQWRkcmVzcyB0aGlzIGFkZHJlc3Mgc2lnbmVkIHVwIGZyb20uCiAgICAgICAgICAgIGludCBtZW1iZXJfcmF0aW5nIHRoZSByYXRpbmcgb2YgdGhlIHN1YnNjcmliZXIuIFRoaXMgd2lsbCBiZSAxIC0gNSBhcyBkZXNjcmliZWQgPGEgaHJlZj0iaHR0cDovL2VlcHVybC5jb20vZi0yUCIgdGFyZ2V0PSJfYmxhbmsiPmhlcmU8L2E+CiAgICAgICAgICAgIHN0cmluZyBjYW1wYWlnbl9pZCBJZiB0aGUgdXNlciBpcyB1bnN1YnNjcmliZWQgYW5kIHRoZXkgdW5zdWJzY3JpYmVkIGZyb20gYSBzcGVjaWZpYyBjYW1wYWlnbiwgdGhhdCBjYW1wYWlnbl9pZCB3aWxsIGJlIGxpc3RlZCwgb3RoZXJ3aXNlIHRoaXMgaXMgbm90IHJldHVybmVkLgogICAgICAgICAgICBhcnJheSBsaXN0cyBBbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiB0aGUgb3RoZXIgbGlzdHMgdGhpcyBtZW1iZXIgYmVsb25ncyB0byAtIHRoZSBrZXkgaXMgdGhlIGxpc3QgaWQgYW5kIHRoZSB2YWx1ZSBpcyB0aGVpciBzdGF0dXMgaW4gdGhhdCBsaXN0LgogICAgICAgICAgICBkYXRlIHRpbWVzdGFtcCBUaGUgdGltZSB0aGlzIGVtYWlsIGFkZHJlc3Mgd2FzIGFkZGVkIHRvIHRoZSBsaXN0CiAgICAgICAgICAgIGRhdGUgaW5mb19jaGFuZ2VkIFRoZSBsYXN0IHRpbWUgdGhpcyByZWNvcmQgd2FzIGNoYW5nZWQuIElmIHRoZSByZWNvcmQgaXMgb2xkIGVub3VnaCwgdGhpcyBtYXkgYmUgYmxhbmsuCiAgICAgICAgICAgIGludCB3ZWJfaWQgVGhlIE1lbWJlciBpZCB1c2VkIGluIG91ciB3ZWIgYXBwLCBhbGxvd3MgeW91IHRvIGNyZWF0ZSBhIGxpbmsgZGlyZWN0bHkgdG8gaXQKICAgICAgICAgICAgYXJyYXkgY2xpZW50cyB0aGUgdmFyaW91cyBjbGllbnRzIHdlJ3ZlIHRyYWNrZWQgdGhlIGFkZHJlc3MgYXMgdXNpbmcgLSBlYWNoIGluY2x1ZGVkIGFycmF5IGluY2x1ZGVzIGNsaWVudCAnbmFtZScgYW5kICdpY29uX3VybCcKICAgICAgICAgICAgYXJyYXkgc3RhdGljX3NlZ21lbnRzIHRoZSAnaWQnLCAnbmFtZScsIGFuZCBkYXRlICdhZGRlZCcgZm9yIGFueSBzdGF0aWMgc2VnbWVudCB0aGlzIG1lbWJlciBpcyBpbgogICAgICovCiAgICBmdW5jdGlvbiBsaXN0TWVtYmVySW5mbygkaWQsICRlbWFpbF9hZGRyZXNzKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaWQiXSA9ICRpZDsKICAgICAgICAkcGFyYW1zWyJlbWFpbF9hZGRyZXNzIl0gPSAkZW1haWxfYWRkcmVzczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RNZW1iZXJJbmZvIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgdGhlIG1vc3QgcmVjZW50IDEwMCBhY3Rpdml0aWVzIGZvciBwYXJ0aWN1bGFyIGxpc3QgbWVtYmVycyAob3BlbiwgY2xpY2ssIGJvdW5jZSwgdW5zdWIsIGFidXNlLCBzZW50IHRvKQogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfbGlzdE1lbWJlckluZm8ucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2xpc3RNZW1iZXJJbmZvLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEBwYXJhbSBhcnJheSAkZW1haWxfYWRkcmVzcyBhbiBhcnJheSBvZiB1cCB0byA1MCBlbWFpbCBhZGRyZXNzZXMgdG8gZ2V0IGluZm9ybWF0aW9uIGZvciBPUiB0aGUgImlkIihzKSBmb3IgdGhlIG1lbWJlciByZXR1cm5lZCBmcm9tIGxpc3RNZW1iZXJzLCBXZWJob29rcywgYW5kIENhbXBhaWducy4gCiAgICAgKiBAcmV0dXJuIGFycmF5IGFycmF5IG9mIGRhdGEgYW5kIHN1Y2Nlc3MvZXJyb3IgY291bnRzCiAgICAgKiBAcmV0dXJuZiBpbnQgc3VjY2VzcyB0aGUgbnVtYmVyIG9mIHN1YnNjcmliZXJzIHN1Y2Nlc3NmdWxseSBmb3VuZCBvbiB0aGUgbGlzdAogICAgICogQHJldHVybmYgaW50IGVycm9ycyB0aGUgbnVtYmVyIG9mIHN1YnNjcmliZXJzIHdobyB3ZXJlIG5vdCBmb3VuZCBvbiB0aGUgbGlzdAogICAgICogQHJldHVybmYgYXJyYXkgZGF0YSBhbiBhcnJheSBvZiBhcnJheXMgd2hlcmUgZWFjaCBhY3Rpdml0eSByZWNvcmQgaGFzOgogICAgICAgICAgICBzdHJpbmcgYWN0aW9uIFRoZSBhY3Rpb24gbmFtZSwgb25lIG9mOiBvcGVuLCBjbGljaywgYm91bmNlLCB1bnN1YiwgYWJ1c2UsIHNlbnQKICAgICAgICAgICAgc3RyaW5nIHRpbWVzdGFtcCBUaGUgZGF0ZS90aW1lIG9mIHRoZSBhY3Rpb24KICAgICAgICAgICAgc3RyaW5nIHVybCBGb3IgY2xpY2sgYWN0aW9ucywgdGhlIHVybCBjbGlja2VkLCBvdGhlcndpc2UgdGhpcyBpcyBlbXB0eQogICAgICAgICAgICBzdHJpbmcgYm91bmNlX3R5cGUgRm9yIGJvdW5jZSBhY3Rpb25zLCB0aGUgYm91bmNlIHR5cGUsIG90aGVyd2lzZSB0aGlzIGlzIGVtcHR5CiAgICAgICAgICAgIHN0cmluZyBjYW1wYWlnbl9pZCBUaGUgY2FtcGFpZ24gaWQgdGhlIGFjdGlvbiB3YXMgcmVsYXRlZCB0bywgaWYgaXQgZXhpc3RzIC0gb3RoZXJ3aXNlIGVtcHR5IChpZSwgZGlyZWN0IHVuc3ViIGZyb20gbGlzdCkKICAgICAqLwogICAgZnVuY3Rpb24gbGlzdE1lbWJlckFjdGl2aXR5KCRpZCwgJGVtYWlsX2FkZHJlc3MpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgICRwYXJhbXNbImVtYWlsX2FkZHJlc3MiXSA9ICRlbWFpbF9hZGRyZXNzOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdE1lbWJlckFjdGl2aXR5IiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBHZXQgYWxsIGVtYWlsIGFkZHJlc3NlcyB0aGF0IGNvbXBsYWluZWQgYWJvdXQgYSBnaXZlbiBjYW1wYWlnbgogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICoKICAgICAqIEBleGFtcGxlIG1jYXBpX2xpc3RBYnVzZVJlcG9ydHMucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gcHVsbCBhYnVzZSByZXBvcnRzIGZvciAoY2FuIGJlIGdhdGhlcmVkIHVzaW5nIGxpc3RzKCkpCiAgICAgKiBAcGFyYW0gaW50ICRzdGFydCBvcHRpb25hbCBmb3IgbGFyZ2UgZGF0YSBzZXRzLCB0aGUgcGFnZSBudW1iZXIgdG8gc3RhcnQgYXQgLSBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhICAocGFnZSAwKQogICAgICogQHBhcmFtIGludCAkbGltaXQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIG51bWJlciBvZiByZXN1bHRzIHRvIHJldHVybiAtIGRlZmF1bHRzIHRvIDUwMCwgdXBwZXIgbGltaXQgc2V0IGF0IDEwMDAKICAgICAqIEBwYXJhbSBzdHJpbmcgJHNpbmNlIG9wdGlvbmFsIHB1bGwgb25seSBtZXNzYWdlcyBzaW5jZSB0aGlzIHRpbWUgLSB1c2UgWVlZWS1NTS1ERCBISDpJSTpTUyBmb3JtYXQgaW4gPHN0cm9uZz5HTVQ8L3N0cm9uZz4KICAgICAqIEByZXR1cm4gYXJyYXkgdGhlIHRvdGFsIG9mIGFsbCByZXBvcnRzIGFuZCB0aGUgc3BlY2lmaWMgcmVwb3J0cyByZXBvcnRzIHRoaXMgcGFnZQogICAgICogQHJldHVybmYgaW50IHRvdGFsIHRoZSB0b3RhbCBudW1iZXIgb2YgbWF0Y2hpbmcgYWJ1c2UgcmVwb3J0cwogICAgICogQHJldHVybmYgYXJyYXkgZGF0YSB0aGUgYWN0dWFsIGRhdGEgZm9yIGVhY2ggcmVwb3J0cywgaW5jbHVkaW5nOgogICAgICAgICAgICBzdHJpbmcgZGF0ZSBkYXRlL3RpbWUgdGhlIGFidXNlIHJlcG9ydCB3YXMgcmVjZWl2ZWQgYW5kIHByb2Nlc3NlZAogICAgICAgICAgICBzdHJpbmcgZW1haWwgdGhlIGVtYWlsIGFkZHJlc3MgdGhhdCByZXBvcnRlZCBhYnVzZQogICAgICAgICAgICBzdHJpbmcgY2FtcGFpZ25faWQgdGhlIHVuaXF1ZSBpZCBmb3IgdGhlIGNhbXBhaWduIHRoYXQgcmVwb3J0IHdhcyBtYWRlIGFnYWluc3QKICAgICAgICAgICAgc3RyaW5nIHR5cGUgYW4gaW50ZXJuYWwgdHlwZSBnZW5lcmFsbHkgc3BlY2lmeWluZyB0aGUgb3JnaW5hdGluZyBtYWlsIHByb3ZpZGVyIC0gbWF5IG5vdCBiZSB1c2VmdWwgb3V0c2lkZSBvZiBmaWxsaW5nIHJlcG9ydCB2aWV3cwogICAgICovCiAgICBmdW5jdGlvbiBsaXN0QWJ1c2VSZXBvcnRzKCRpZCwgJHN0YXJ0PTAsICRsaW1pdD01MDAsICRzaW5jZT1OVUxMKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaWQiXSA9ICRpZDsKICAgICAgICAkcGFyYW1zWyJzdGFydCJdID0gJHN0YXJ0OwogICAgICAgICRwYXJhbXNbImxpbWl0Il0gPSAkbGltaXQ7CiAgICAgICAgJHBhcmFtc1sic2luY2UiXSA9ICRzaW5jZTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImxpc3RBYnVzZVJlcG9ydHMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFjY2VzcyB0aGUgR3Jvd3RoIEhpc3RvcnkgYnkgTW9udGggZm9yIGEgZ2l2ZW4gbGlzdC4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBMaXN0IFJlbGF0ZWQKICAgICAqCiAgICAgKiBAZXhhbXBsZSBtY2FwaV9saXN0R3Jvd3RoSGlzdG9yeS5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCiAgICAgKiBAcmV0dXJuIGFycmF5IGFycmF5IG9mIG1vbnRocyBhbmQgZ3Jvd3RoIAogICAgICogQHJldHVybmYgc3RyaW5nIG1vbnRoIFRoZSBZZWFyIGFuZCBNb250aCBpbiBxdWVzdGlvbiB1c2luZyBZWVlZLU1NIGZvcm1hdAogICAgICogQHJldHVybmYgaW50IGV4aXN0aW5nIG51bWJlciBvZiBleGlzdGluZyBzdWJzY3JpYmVycyB0byBzdGFydCB0aGUgbW9udGgKICAgICAqIEByZXR1cm5mIGludCBpbXBvcnRzIG51bWJlciBvZiBzdWJzY3JpYmVycyBpbXBvcnRlZCBkdXJpbmcgdGhlIG1vbnRoCiAgICAgKiBAcmV0dXJuZiBpbnQgb3B0aW5zIG51bWJlciBvZiBzdWJzY3JpYmVycyB3aG8gb3B0ZWQtaW4gZHVyaW5nIHRoZSBtb250aAogICAgICovCiAgICBmdW5jdGlvbiBsaXN0R3Jvd3RoSGlzdG9yeSgkaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdEdyb3d0aEhpc3RvcnkiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEFjY2VzcyB1cCB0byB0aGUgcHJldmlvdXMgMTgwIGRheXMgb2YgZGFpbHkgZGV0YWlsZWQgYWdncmVnYXRlZCBhY3Rpdml0eSBzdGF0cyBmb3IgYSBnaXZlbiBsaXN0CiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKgogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEByZXR1cm4gYXJyYXkgYXJyYXkgb2YgYXJyYXkgb2YgZGFpbHkgdmFsdWVzLCBlYWNoIGNvbnRhaW5pbmc6CiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgZGF5IFRoZSBkYXkgaW4gWVlZWS1NTS1ERAogICAgICogQHJldHVybmYgaW50IGVtYWlsc19zZW50IG51bWJlciBvZiBlbWFpbHMgc2VudCB0byB0aGUgbGlzdAogICAgICogQHJldHVybmYgaW50IHVuaXF1ZV9vcGVucyBudW1iZXIgb2YgdW5pcXVlIG9wZW5zIGZvciB0aGUgbGlzdAogICAgICogQHJldHVybmYgaW50IHJlY2lwaWVudF9jbGlja3MgbnVtYmVyIG9mIGNsaWNrcyBmb3IgdGhlIGxpc3QKICAgICAqIEByZXR1cm5mIGludCBoYXJkX2JvdW5jZSBudW1iZXIgb2YgaGFyZCBib3VuY2VzIGZvciB0aGUgbGlzdAogICAgICogQHJldHVybmYgaW50IHNvZnRfYm91bmNlIG51bWJlciBvZiBzb2Z0IGJvdW5jZXMgZm9yIHRoZSBsaXN0CiAgICAgKiBAcmV0dXJuZiBpbnQgYWJ1c2VfcmVwb3J0cyBudW1iZXIgb2YgYWJ1c2UgcmVwb3J0cyBmb3IgdGhlIGxpc3QKICAgICAqIEByZXR1cm5mIGludCBzdWJzIG51bWJlciBvZiBkb3VibGUgb3B0aW4gc3Vic2NyaWJlcyBmb3IgdGhlIGxpc3QKICAgICAqIEByZXR1cm5mIGludCB1bnN1YnMgbnVtYmVyIG9mIG1hbnVhbCB1bnN1YnNjcmliZXMgZm9yIHRoZSBsaXN0CiAgICAgKiBAcmV0dXJuZiBpbnQgb3RoZXJfYWRkcyBudW1iZXIgb2Ygbm9uLWRvdWJsZSBvcHRpbiBzdWJzY3JpYmVzIGZvciB0aGUgbGlzdCAobWFudWFsLCBBUEksIG9yIGltcG9ydCkKICAgICAqIEByZXR1cm5mIGludCBvdGhlcl9yZW1vdmVzIG51bWJlciBvZiBub24tbWFudWFsIHVuc3Vic2NyaWJlcyBmb3IgdGhlIGxpc3QgKGRlbGV0aW9ucywgZW1wdGllcywgc29mdC1ib3VuY2UgcmVtb3ZhbHMpCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RBY3Rpdml0eSgkaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdEFjdGl2aXR5IiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgbG9jYXRpb25zIChjb3VudHJpZXMpIHRoYXQgdGhlIGxpc3QncyBzdWJzY3JpYmVycyBoYXZlIGJlZW4gdGFnZ2VkIHRvIGJhc2VkIG9uIGdlb2NvZGluZyB0aGVpciBJUCBhZGRyZXNzCiAgICAgKgogICAgICogQHNlY3Rpb24gTGlzdCBSZWxhdGVkCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQogICAgICogQHJldHVybiBhcnJheSBhcnJheSBvZiBsb2NhdGlvbnMKICAgICAqIEByZXR1cm5mIHN0cmluZyBjb3VudHJ5IHRoZSBjb3VudHJ5IG5hbWUKICAgICAqIEByZXR1cm5mIHN0cmluZyBjYyB0aGUgMiBkaWdpdCBjb3VudHJ5IGNvZGUKICAgICAqIEByZXR1cm5mIGRvdWJsZSBwZXJjZW50IHRoZSBwZXJjZW50IG9mIHN1YnNjcmliZXJzIGluIHRoZSBjb3VudHJ5CiAgICAgKiBAcmV0dXJuZiBkb3VibGUgdG90YWwgdGhlIHRvdGFsIG51bWJlciBvZiBzdWJzY3JpYmVycyBpbiB0aGUgY291bnRyeQogICAgICovCiAgICBmdW5jdGlvbiBsaXN0TG9jYXRpb25zKCRpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0TG9jYXRpb25zIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSB0aGUgY2xpZW50cyB0aGF0IHRoZSBsaXN0J3Mgc3Vic2NyaWJlcnMgaGF2ZSBiZWVuIHRhZ2dlZCBhcyBiZWluZyB1c2VkIGJhc2VkIG9uIHVzZXIgYWdlbnRzIHNlZW4uIE1hZGUgcG9zc2libGUgYnkgPGEgaHJlZj0iaHR0cDovL3VzZXItYWdlbnQtc3RyaW5nLmluZm8iIHRhcmdldD0iX2JsYW5rIj51c2VyLWFnZW50LXN0cmluZy5pbmZvPC9hPgogICAgICoKICAgICAqIEBzZWN0aW9uIExpc3QgUmVsYXRlZAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKICAgICAqIEByZXR1cm4gYXJyYXkgdGhlIGRlc2t0b3AgYW5kIG1vYmlsZSB1c2VyIGFnZW50cyBpbiB1c2Ugb24gdGhlIGxpc3QKICAgICAqIEByZXR1cm5mIGFycmF5IGRlc2t0b3AgZGVza3RvcCB1c2VyIGFnZW50cyBhbmQgcGVyY2VudGFnZXMKICAgICAgICAgICAgZG91YmxlIHBlbmV0cmF0aW9uIHRoZSBwZXJjZW50IG9mIGRlc2t0b3AgY2xpZW50cyBpbiB1c2UKICAgICAgICAgICAgYXJyYXkgY2xpZW50cyBhIHJlY29yZCBjb250YWluaW5nIHRoZSAnY2xpZW50JywgYW4gJ2ljb24nIGltYWdlIHVybCwgdGhlICdwZXJjZW50JyB1c2luZyB0aGUgY2xpZW50LCBhbmQgdGhlIHRvdGFsICdtZW1iZXJzJyByZXByZXNlbnRlZAogICAgICogQHJldHVybmYgYXJyYXkgbW9iaWxlIG1vYmlsZSB1c2VyIGFnZW50cyBhbmQgcGVyY2VudGFnZXMKICAgICAgICAgICAgZG91YmxlIHBlbmV0cmF0aW9uIHRoZSBwZXJjZW50IG9mIG1vYmlsZSBjbGllbnRzIGluIHVzZQogICAgICAgICAgICBhcnJheSBjbGllbnRzIGEgcmVjb3JkIGNvbnRhaW5pbmcgdGhlICdjbGllbnQnLCBhbiAnaWNvbicgaW1hZ2UgdXJsLCB0aGUgJ3BlcmNlbnQnIHVzaW5nIHRoZSBjbGllbnQsIGFuZCB0aGUgdG90YWwgJ21lbWJlcnMnIHJlcHJlc2VudGVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGxpc3RDbGllbnRzKCRpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJsaXN0Q2xpZW50cyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgdmFyaW91cyB0ZW1wbGF0ZXMgYXZhaWxhYmxlIGluIHRoZSBzeXN0ZW0sIGFsbG93aW5nIHNvbWUgdGhpbmcgc2ltaWxhciB0byBvdXIgdGVtcGxhdGUgZ2FsbGVyeSB0byBiZSBjcmVhdGVkLgogICAgICoKICAgICAqIEBzZWN0aW9uIFRlbXBsYXRlICBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSBtY2FwaV90ZW1wbGF0ZXMucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX3RlbXBsYXRlcy5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gYXJyYXkgJHR5cGVzIG9wdGlvbmFsIHRoZSB0eXBlcyBvZiB0ZW1wbGF0ZXMgdG8gcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gdXNlciAgICBDdXN0b21lciB0ZW1wbGF0ZSBmb3IgdGhpcyB1c2VyIGFjY291bnQuIERlZmF1bHRzIHRvIHRydWUuCiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gZ2FsbGVyeSBUZW1wbGF0ZXMgZnJvbSBvdXIgR2FsbGVyeS4gTm90ZSB0aGF0IHNvbWUgdGVtcGxhdGVzIHRoYXQgcmVxdWlyZSBleHRyYSBjb25maWd1cmF0aW9uIGFyZSB3aXRoaGVsZC4gKGVnLCB0aGUgRXRzeSB0ZW1wbGF0ZSkuIERlZmF1bHRzIHRvIGZhbHNlLgogICAgICAgICAgICAgICAgICAgICAgICBib29sZWFuIGJhc2UgICAgT3VyICJzdGFydCBmcm9tIHNjcmF0Y2giIGV4dHJlbWVseSBiYXNpYyB0ZW1wbGF0ZXMKICAgICAqIEBwYXJhbSBzdHJpbmcgJGNhdGVnb3J5IG9wdGlvbmFsIGZvciBHYWxsZXJ5IHRlbXBsYXRlcyBvbmx5LCBsaW1pdCB0byBhIHNwZWNpZmljIHRlbXBsYXRlIGNhdGVnb3J5CiAgICAgKiBAcGFyYW0gYXJyYXkgJGluYWN0aXZlcyBvcHRpb25hbCBvcHRpb25zIHRvIGNvbnRyb2wgaG93IGluYWN0aXZlIHRlbXBsYXRlcyBhcmUgcmV0dXJuZWQsIGlmIGF0IGFsbAogICAgICAgICAgICAgICAgICAgICAgICBib29sZWFuIGluY2x1ZGUgdXNlciB0ZW1wbGF0ZXMgYXJlIG5vdCBkZWxldGVkLCBvbmx5IHNldCBpbmFjdGl2ZS4gZGVmYXVsdHMgdG8gZmFsc2UuCiAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gb25seSAgICBvbmx5IGluY2x1ZGUgaW5hY3RpdmUgdGVtcGxhdGVzLiBkZWZhdWx0cyB0byBmYWxzZS4KICAgICAqIEByZXR1cm4gYXJyYXkgQW4gYXJyYXkgb2Ygc3RydWN0cywgb25lIGZvciBlYWNoIHRlbXBsYXRlIChzZWUgUmV0dXJuZWQgRmllbGRzIGZvciBkZXRhaWxzKQogICAgICogQHJldHVybmYgaW50IGlkIElkIG9mIHRoZSB0ZW1wbGF0ZQogICAgICogQHJldHVybmYgc3RyaW5nIG5hbWUgTmFtZSBvZiB0aGUgdGVtcGxhdGUKICAgICAqIEByZXR1cm5mIHN0cmluZyBsYXlvdXQgTGF5b3V0IG9mIHRoZSB0ZW1wbGF0ZSAtICJiYXNpYyIsICJsZWZ0X2NvbHVtbiIsICJyaWdodF9jb2x1bW4iLCBvciAicG9zdGNhcmQiCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgcHJldmlld19pbWFnZSBJZiB3ZSd2ZSBnZW5lcmF0ZWQgaXQsIHRoZSB1cmwgb2YgdGhlIHByZXZpZXcgaW1hZ2UgZm9yIHRoZSB0ZW1wbGF0ZS4gV2UgZG8gb3V0IGJlc3QgdG8ga2VlcCB0aGVzZSB1cCB0byBkYXRlLCBidXQgUHJldmlldyBpbWFnZSB1cmxzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBhdmFpbGFibGUKICAgICAqIEByZXR1cm5mIHN0cmluZyBkYXRlX2NyZWF0ZWQgVGhlIGRhdGUvdGltZSB0aGUgdGVtcGxhdGUgd2FzIGNyZWF0ZWQKICAgICAqIEByZXR1cm5mIGJvb2wgZWRpdF9zb3VyY2UgV2hldGhlciBvciBub3QgeW91IGFyZSBhYmxlIHRvIGVkaXQgdGhlIHNvdXJjZSBvZiBhIHRlbXBsYXRlLgogICAgICovCiAgICBmdW5jdGlvbiB0ZW1wbGF0ZXMoJHR5cGVzPWFycmF5ICgKKSwgJGNhdGVnb3J5PU5VTEwsICRpbmFjdGl2ZXM9YXJyYXkgKAopKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1sidHlwZXMiXSA9ICR0eXBlczsKICAgICAgICAkcGFyYW1zWyJjYXRlZ29yeSJdID0gJGNhdGVnb3J5OwogICAgICAgICRwYXJhbXNbImluYWN0aXZlcyJdID0gJGluYWN0aXZlczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoInRlbXBsYXRlcyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUHVsbCBkZXRhaWxzIGZvciBhIHNwZWNpZmljIHRlbXBsYXRlIHRvIGhlbHAgc3VwcG9ydCBlZGl0aW5nCiAgICAgKgogICAgICogQHNlY3Rpb24gVGVtcGxhdGUgIFJlbGF0ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gaW50ICR0aWQgdGhlIHRlbXBsYXRlIGlkIC0gZ2V0IGZyb20gdGVtcGxhdGVzKCkKICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUgdGhlIHRlbXBsYXRlIHR5cGUgdG8gbG9hZCAtIG9uZSBvZiAndXNlcicsICdnYWxsZXJ5JywgJ2Jhc2UnCiAgICAgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IG9mIGluZm8gdG8gYmUgdXNlZCB3aGVuIGVkaXRpbmcKICAgICAqIEByZXR1cm5mIGFycmF5IGRlZmF1bHRfY29udGVudCB0aGUgZGVmYXVsdCBjb250ZW50IGJyb2tlbiBkb3duIGludG8gdGhlIG5hbWVkIGVkaXRhYmxlIHNlY3Rpb25zIGZvciB0aGUgdGVtcGxhdGUKICAgICAqIEByZXR1cm5mIGFycmF5IHNlY3Rpb25zIHRoZSB2YWxpZCBlZGl0YWJsZSBzZWN0aW9uIG5hbWVzCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgc291cmNlIHRoZSBmdWxsIHNvdXJjZSBvZiB0aGUgdGVtcGxhdGUgYXMgaWYgeW91IGV4cG9ydGVkIGl0IHZpYSBvdXIgdGVtcGxhdGUgZWRpdG9yCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgcHJldmlldyBzaW1pbGFyIHRvIHRoZSBzb3VyY2UsIGJ1dCB0aGUgcmVuZGVyZWQgdmVyc2lvbiBvZiB0aGUgc291cmNlIGZyb20gb3VyIHBvcHVwIHByZXZpZXcKICAgICAqLwogICAgZnVuY3Rpb24gdGVtcGxhdGVJbmZvKCR0aWQsICR0eXBlPSd1c2VyJykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbInRpZCJdID0gJHRpZDsKICAgICAgICAkcGFyYW1zWyJ0eXBlIl0gPSAkdHlwZTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoInRlbXBsYXRlSW5mbyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogQ3JlYXRlIGEgbmV3IHVzZXIgdGVtcGxhdGUsIDxzdHJvbmc+Tk9UPC9zdHJvbmc+IGNhbXBhaWduIGNvbnRlbnQuIFRoZXNlIHRlbXBsYXRlcyBjYW4gdGhlbiBiZSBhcHBsaWVkIHdoaWxlIGNyZWF0aW5nIGNhbXBhaWducy4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBUZW1wbGF0ZSAgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfY3JlYXRlX3RlbXBsYXRlLnBocAogICAgICogQGV4YW1wbGUgeG1sLXJwY19jcmVhdGVfdGVtcGxhdGUucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSB0aGUgbmFtZSBmb3IgdGhlIHRlbXBsYXRlIC0gbmFtZXMgbXVzdCBiZSB1bmlxdWUgYW5kIGEgbWF4IG9mIDUwIGJ5dGVzCiAgICAgKiBAcGFyYW0gc3RyaW5nICRodG1sIGEgc3RyaW5nIHNwZWNpZnlpbmcgdGhlIGVudGlyZSB0ZW1wbGF0ZSB0byBiZSBjcmVhdGVkLiBUaGlzIGlzIDxzdHJvbmc+Tk9UPC9zdHJvbmc+IGNhbXBhaWduIGNvbnRlbnQuIFRoZXkgYXJlIGludGVuZGVkIHRvIHV0aWxpemUgb3VyIDxhIGhyZWY9Imh0dHA6Ly93d3cubWFpbGNoaW1wLmNvbS9yZXNvdXJjZXMvZW1haWwtdGVtcGxhdGUtbGFuZ3VhZ2UvIiB0YXJnZXQ9Il9ibGFuayI+dGVtcGxhdGUgbGFuZ3VhZ2U8L2E+LgogICAgICogQHJldHVybiBpbnQgdGhlIG5ldyB0ZW1wbGF0ZSBpZCwgb3RoZXJ3aXNlIGFuIGVycm9yIGlzIHRocm93bi4KICAgICAqLwogICAgZnVuY3Rpb24gdGVtcGxhdGVBZGQoJG5hbWUsICRodG1sKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1sibmFtZSJdID0gJG5hbWU7CiAgICAgICAgJHBhcmFtc1siaHRtbCJdID0gJGh0bWw7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJ0ZW1wbGF0ZUFkZCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmVwbGFjZSB0aGUgY29udGVudCBvZiBhIHVzZXIgdGVtcGxhdGUsIDxzdHJvbmc+Tk9UPC9zdHJvbmc+IGNhbXBhaWduIGNvbnRlbnQuCiAgICAgKgogICAgICogQHNlY3Rpb24gVGVtcGxhdGUgIFJlbGF0ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gaW50ICRpZCB0aGUgaWQgb2YgdGhlIHVzZXIgdGVtcGxhdGUgdG8gdXBkYXRlCiAgICAgKiBAcGFyYW0gYXJyYXkgICR2YWx1ZXMgdGhlIHZhbHVlcyB0byB1cGRhdGVzIC0gd2hpbGUgYm90aCBhcmUgb3B0aW9uYWwsIGF0IGxlYXN0IG9uZSBzaG91bGQgYmUgcHJvdmlkZWQuIEJvdGggY2FuIGJlIHVwZGF0ZWQgYXQgdGhlIHNhbWUgdGltZS4KICAgICAgICAgICAgc3RyaW5nIG5hbWUgb3B0aW9uYWwgdGhlIG5hbWUgZm9yIHRoZSB0ZW1wbGF0ZSAtIG5hbWVzIG11c3QgYmUgdW5pcXVlIGFuZCBhIG1heCBvZiA1MCBieXRlcwogICAgICAgICAgICBzdHJpbmcgaHRtbCBvcHRpb25hbCBhIHN0cmluZyBzcGVjaWZ5aW5nIHRoZSBlbnRpcmUgdGVtcGxhdGUgdG8gYmUgY3JlYXRlZC4gVGhpcyBpcyA8c3Ryb25nPk5PVDwvc3Ryb25nPiBjYW1wYWlnbiBjb250ZW50LiBUaGV5IGFyZSBpbnRlbmRlZCB0byB1dGlsaXplIG91ciA8YSBocmVmPSJodHRwOi8vd3d3Lm1haWxjaGltcC5jb20vcmVzb3VyY2VzL2VtYWlsLXRlbXBsYXRlLWxhbmd1YWdlLyIgdGFyZ2V0PSJfYmxhbmsiPnRlbXBsYXRlIGxhbmd1YWdlPC9hPi4KICAgICAgICAKICAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHRoZSB0ZW1wbGF0ZSB3YXMgdXBkYXRlZCwgb3RoZXJ3aXNlIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duCiAgICAgKi8KICAgIGZ1bmN0aW9uIHRlbXBsYXRlVXBkYXRlKCRpZCwgJHZhbHVlcykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgJHBhcmFtc1sidmFsdWVzIl0gPSAkdmFsdWVzOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigidGVtcGxhdGVVcGRhdGUiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGV0ZSAoZGVhY3RpdmF0ZSkgYSB1c2VyIHRlbXBsYXRlCiAgICAgKgogICAgICogQHNlY3Rpb24gVGVtcGxhdGUgIFJlbGF0ZWQKICAgICAqCiAgICAgKiBAcGFyYW0gaW50ICRpZCB0aGUgaWQgb2YgdGhlIHVzZXIgdGVtcGxhdGUgdG8gZGVsZXRlCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgdGVtcGxhdGUgd2FzIGRlbGV0ZWQsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgogICAgICovCiAgICBmdW5jdGlvbiB0ZW1wbGF0ZURlbCgkaWQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJpZCJdID0gJGlkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigidGVtcGxhdGVEZWwiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVuZGVsZXRlIChyZWFjdGl2YXRlKSBhIHVzZXIgdGVtcGxhdGUKICAgICAqCiAgICAgKiBAc2VjdGlvbiBUZW1wbGF0ZSAgUmVsYXRlZAogICAgICoKICAgICAqIEBwYXJhbSBpbnQgJGlkIHRoZSBpZCBvZiB0aGUgdXNlciB0ZW1wbGF0ZSB0byByZWFjdGl2YXRlCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgdGVtcGxhdGUgd2FzIGRlbGV0ZWQsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgogICAgICovCiAgICBmdW5jdGlvbiB0ZW1wbGF0ZVVuZGVsKCRpZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImlkIl0gPSAkaWQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJ0ZW1wbGF0ZVVuZGVsIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXRyaWV2ZSBsb3RzIG9mIGFjY291bnQgaW5mb3JtYXRpb24gaW5jbHVkaW5nIHBheW1lbnRzIG1hZGUsIHBsYW4gaW5mbywgc29tZSBhY2NvdW50IHN0YXRzLCBpbnN0YWxsZWQgbW9kdWxlcywKICAgICAqIGNvbnRhY3QgaW5mbywgYW5kIG1vcmUuIE5vIHByaXZhdGUgaW5mb3JtYXRpb24gbGlrZSBDcmVkaXQgQ2FyZCBudW1iZXJzIGlzIGF2YWlsYWJsZS4KICAgICAqIAogICAgICogQHNlY3Rpb24gSGVscGVyCiAgICAgKgogICAgICogQHJldHVybiBhcnJheSBjb250YWluaW5nIHRoZSBkZXRhaWxzIGZvciB0aGUgYWNjb3VudCB0aWVkIHRvIHRoaXMgQVBJIEtleQogICAgICogQHJldHVybmYgc3RyaW5nIHVzZXJuYW1lIFRoZSBBY2NvdW50IHVzZXJuYW1lCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgdXNlcl9pZCBUaGUgQWNjb3VudCB1c2VyIHVuaXF1ZSBpZCAoZm9yIGJ1aWxkaW5nIHNvbWUgbGlua3MpCiAgICAgKiBAcmV0dXJuZiBib29sIGlzX3RyaWFsIFdoZXRoZXIgdGhlIEFjY291bnQgaXMgaW4gVHJpYWwgbW9kZSAoY2FuIG9ubHkgc2VuZCBjYW1wYWlnbnMgdG8gbGVzcyB0aGFuIDEwMCBlbWFpbHMpCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgdGltZXpvbmUgVGhlIHRpbWV6b25lIGZvciB0aGUgQWNjb3VudCAtIGRlZmF1bHQgaXMgIlVTL0Vhc3Rlcm4iCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgcGxhbl90eXBlIFBsYW4gVHlwZSAtICJtb250aGx5IiwgInBheWFzeW91Z28iLCBvciAiZnJlZSIKICAgICAqIEByZXR1cm5mIGludCBwbGFuX2xvdyA8ZW0+b25seSBmb3IgTW9udGhseSBwbGFuczwvZW0+IC0gdGhlIGxvd2VyIHRpZXIgZm9yIGxpc3Qgc2l6ZQogICAgICogQHJldHVybmYgaW50IHBsYW5faGlnaCA8ZW0+b25seSBmb3IgTW9udGhseSBwbGFuczwvZW0+IC0gdGhlIHVwcGVyIHRpZXIgZm9yIGxpc3Qgc2l6ZQogICAgICogQHJldHVybmYgc3RyaW5nIHBsYW5fc3RhcnRfZGF0ZSA8ZW0+b25seSBmb3IgTW9udGhseSBwbGFuczwvZW0+IC0gdGhlIHN0YXJ0IGRhdGUgZm9yIGEgbW9udGhseSBwbGFuCiAgICAgKiBAcmV0dXJuZiBpbnQgZW1haWxzX2xlZnQgPGVtPm9ubHkgZm9yIEZyZWUgYW5kIFBheS1hcy15b3UtZ28gcGxhbnM8L2VtPiBlbWFpbHMgY3JlZGl0cyBsZWZ0IGZvciB0aGUgYWNjb3VudAogICAgICogQHJldHVybmYgYm9vbCBwZW5kaW5nX21vbnRobHkgV2hldGhlciB0aGUgYWNjb3VudCBpcyBmaW5pc2hpbmcgUGF5IEFzIFlvdSBHbyBjcmVkaXRzIGJlZm9yZSBzd2l0Y2hpbmcgdG8gYSBNb250aGx5IHBsYW4KICAgICAqIEByZXR1cm5mIHN0cmluZyBmaXJzdF9wYXltZW50IGRhdGUgb2YgZmlyc3QgcGF5bWVudAogICAgICogQHJldHVybmYgc3RyaW5nIGxhc3RfcGF5bWVudCBkYXRlIG9mIG1vc3QgcmVjZW50IHBheW1lbnQKICAgICAqIEByZXR1cm5mIGludCB0aW1lc19sb2dnZWRfaW4gdG90YWwgbnVtYmVyIG9mIHRpbWVzIHRoZSBhY2NvdW50IGhhcyBiZWVuIGxvZ2dlZCBpbnRvIHZpYSB0aGUgd2ViCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgbGFzdF9sb2dpbiBkYXRlL3RpbWUgb2YgbGFzdCBsb2dpbiB2aWEgdGhlIHdlYgogICAgICogQHJldHVybmYgc3RyaW5nIGFmZmlsaWF0ZV9saW5rIE1vbmtleSBSZXdhcmRzIGxpbmsgZm9yIG91ciBBZmZpbGlhdGUgcHJvZ3JhbQogICAgICogQHJldHVybmYgYXJyYXkgY29udGFjdCBDb250YWN0IGRldGFpbHMgZm9yIHRoZSBhY2NvdW50CiAgICAgICAgICAgIHN0cmluZyBmbmFtZSBGaXJzdCBOYW1lCiAgICAgICAgICAgIHN0cmluZyBsbmFtZSBMYXN0IE5hbWUKICAgICAgICAgICAgc3RyaW5nIGVtYWlsIEVtYWlsIEFkZHJlc3MKICAgICAgICAgICAgc3RyaW5nIGNvbXBhbnkgQ29tcGFueSBOYW1lCiAgICAgICAgICAgIHN0cmluZyBhZGRyZXNzMSBBZGRyZXNzIExpbmUgMQogICAgICAgICAgICBzdHJpbmcgYWRkcmVzczIgQWRkcmVzcyBMaW5lIDIKICAgICAgICAgICAgc3RyaW5nIGNpdHkgQ2l0eQogICAgICAgICAgICBzdHJpbmcgc3RhdGUgU3RhdGUgb3IgUHJvdmluY2UKICAgICAgICAgICAgc3RyaW5nIHppcCBaaXAgb3IgUG9zdGFsIENvZGUKICAgICAgICAgICAgc3RyaW5nIGNvdW50cnkgQ291bnRyeSBuYW1lCiAgICAgICAgICAgIHN0cmluZyB1cmwgV2Vic2l0ZSBVUkwKICAgICAgICAgICAgc3RyaW5nIHBob25lIFBob25lIG51bWJlcgogICAgICAgICAgICBzdHJpbmcgZmF4IEZheCBudW1iZXIKICAgICAqIEByZXR1cm5mIGFycmF5IG1vZHVsZXMgQWRkb25zIGluc3RhbGxlZCBpbiB0aGUgYWNjb3VudAogICAgICAgICAgICBzdHJpbmcgbmFtZSBUaGUgbW9kdWxlIG5hbWUKICAgICAgICAgICAgc3RyaW5nIGFkZGVkIFRoZSBkYXRlIHRoZSBtb2R1bGUgd2FzIGFkZGVkCiAgICAgKiBAcmV0dXJuZiBhcnJheSBvcmRlcnMgT3JkZXIgZGV0YWlscyBmb3IgdGhlIGFjY291bnQKICAgICAgICAgICAgaW50IG9yZGVyX2lkIFRoZSBvcmRlciBpZAogICAgICAgICAgICBzdHJpbmcgdHlwZSBUaGUgb3JkZXIgdHlwZSAtIGVpdGhlciAibW9udGhseSIgb3IgImNyZWRpdHMiCiAgICAgICAgICAgIGRvdWJsZSBhbW91bnQgVGhlIG9yZGVyIGFtb3VudAogICAgICAgICAgICBzdHJpbmcgZGF0ZSBUaGUgb3JkZXIgZGF0ZQogICAgICAgICAgICBkb3VibGUgY3JlZGl0c191c2VkIFRoZSB0b3RhbCBjcmVkaXRzIHVzZWQKICAgICAqIEByZXR1cm5mIGFycmF5IHJld2FyZHMgUmV3YXJkcyBkZXRhaWxzIGZvciB0aGUgYWNjb3VudCBpbmNsdWRpbmcgY3JlZGl0cyAmIGluc3BlY3Rpb25zIGVhcm5lZCwgbnVtYmVyIG9mIHJlZmVyYWxzLCByZWZlcmFsIGRldGFpbHMsIGFuZCByZXdhcmRzIHVzZWQKICAgICAgICAgICAgaW50IHJlZmVycmFsc190aGlzX21vbnRoIHRoZSB0b3RhbCBudW1iZXIgb2YgcmVmZXJyYWxzIHRoaXMgbW9udGgKICAgICAgICAgICAgc3RyaW5nIG5vdGlmeV9vbiB3aGV0aGVyIG9yIG5vdCB3ZSBub3RpZnkgdGhlIHVzZXIgd2hlbiByZXdhcmRzIGFyZSBlYXJuZWQKICAgICAgICAgICAgc3RyaW5nIG5vdGlmeV9lbWFpbCB0aGUgZW1haWwgYWRkcmVzcyBhZGRyZXNzIHVzZWQgZm9yIHJld2FyZHMgbm90aWZpY2F0aW9ucwogICAgICAgICAgICBhcnJheSBjcmVkaXRzIEVtYWlsIGNyZWRpdHMgZWFybmVkICJ0aGlzX21vbnRoIiwgInRvdGFsX2Vhcm5lZCIsIGFuZCAicmVtYWluaW5nIgogICAgICAgICAgICBhcnJheSBpbnNwZWN0aW9ucyBJbmJveCBJbnNwZWN0aW9ucyBlYXJuZWQgInRoaXNfbW9udGgiLCAidG90YWxfZWFybmVkIiwgYW5kICJyZW1haW5pbmciCiAgICAgICAgICAgIGFycmF5IHJlZmVycmFscyBBbGwgcmVmZXJyYWxzLCBpbmNsdWRpbmcgIm5hbWUiLCAiZW1haWwiLCAic2lnbnVwX2RhdGUiLCBhbmQgInR5cGUiCiAgICAgICAgICAgIGFycmF5IGFwcGxpZWQgQXBwbGllZCByZXdhcmRzLCBpbmNsdWRpbmcgInZhbHVlIiwgImRhdGUiLCAib3JkZXJfaWQiLCBhbmQgIm9yZGVyX2Rlc2MiCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldEFjY291bnREZXRhaWxzKCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiZ2V0QWNjb3VudERldGFpbHMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEhhdmUgSFRNTCBjb250ZW50IGF1dG8tY29udmVydGVkIHRvIGEgdGV4dC1vbmx5IGZvcm1hdC4gWW91IGNhbiBzZW5kOiBwbGFpbiBIVE1MLCBhbiBhcnJheSBvZiBUZW1wbGF0ZSBjb250ZW50LCBhbiBleGlzdGluZyBDYW1wYWlnbiBJZCwgb3IgYW4gZXhpc3RpbmcgVGVtcGxhdGUgSWQuIE5vdGUgdGhhdCB0aGlzIHdpbGwgPGI+bm90PC9iPiBzYXZlIGFueXRoaW5nIHRvIG9yIHVwZGF0ZSBhbnkgb2YgeW91ciBsaXN0cywgY2FtcGFpZ25zLCBvciB0ZW1wbGF0ZXMuCiAgICAgKgogICAgICogQHNlY3Rpb24gSGVscGVyCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2dlbmVyYXRlVGV4dC5waHAKICAgICAqCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlIFRoZSB0eXBlIG9mIGNvbnRlbnQgdG8gcGFyc2UuIE11c3QgYmUgb25lIG9mOiAiaHRtbCIsICJ0ZW1wbGF0ZSIsICJ1cmwiLCAiY2lkIiAoQ2FtcGFpZ24gSWQpLCBvciAidGlkIiAoVGVtcGxhdGUgSWQpCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGNvbnRlbnQgVGhlIGNvbnRlbnQgdG8gdXNlLiBGb3IgImh0bWwiIGV4cGVjdHMgIGEgc2luZ2xlIHN0cmluZyB2YWx1ZSwgInRlbXBsYXRlIiBleHBlY3RzIGFuIGFycmF5IGxpa2UgeW91IHNlbmQgdG8gY2FtcGFpZ25DcmVhdGUsICJ1cmwiIGV4cGVjdHMgYSB2YWxpZCAmIHB1YmxpYyBVUkwgdG8gcHVsbCBmcm9tLCAiY2lkIiBleHBlY3RzIGEgdmFsaWQgQ2FtcGFpZ24gSWQsIGFuZCAidGlkIiBleHBlY3RzIGEgdmFsaWQgVGVtcGxhdGUgSWQgb24geW91ciBhY2NvdW50LgogICAgICogQHJldHVybiBzdHJpbmcgdGhlIGNvbnRlbnQgcGFzcyBpbiBjb252ZXJ0ZWQgdG8gdGV4dC4KICAgICAqLwogICAgZnVuY3Rpb24gZ2VuZXJhdGVUZXh0KCR0eXBlLCAkY29udGVudCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbInR5cGUiXSA9ICR0eXBlOwogICAgICAgICRwYXJhbXNbImNvbnRlbnQiXSA9ICRjb250ZW50OwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiZ2VuZXJhdGVUZXh0IiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZW5kIHlvdXIgSFRNTCBjb250ZW50IHRvIGhhdmUgdGhlIENTUyBpbmxpbmVkIGFuZCBvcHRpb25hbGx5IHJlbW92ZSB0aGUgb3JpZ2luYWwgc3R5bGVzLgogICAgICoKICAgICAqIEBzZWN0aW9uIEhlbHBlcgogICAgICogQGV4YW1wbGUgeG1sLXJwY19pbmxpbmVDc3MucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkaHRtbCBZb3VyIEhUTUwgY29udGVudAogICAgICogQHBhcmFtIGJvb2wgJHN0cmlwX2NzcyBvcHRpb25hbCBXaGV0aGVyIHlvdSB3YW50IHRoZSBDU1MgJmx0O3N0eWxlJmd0OyB0YWdzIHN0cmlwcGVkIGZyb20gdGhlIHJldHVybmVkIGRvY3VtZW50LiBEZWZhdWx0cyB0byBmYWxzZS4KICAgICAqIEByZXR1cm4gc3RyaW5nIFlvdXIgSFRNTCBjb250ZW50IHdpdGggYWxsIENTUyBpbmxpbmVkLCBqdXN0IGxpa2UgaWYgd2Ugc2VudCBpdC4KICAgICAqLwogICAgZnVuY3Rpb24gaW5saW5lQ3NzKCRodG1sLCAkc3RyaXBfY3NzPWZhbHNlKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1siaHRtbCJdID0gJGh0bWw7CiAgICAgICAgJHBhcmFtc1sic3RyaXBfY3NzIl0gPSAkc3RyaXBfY3NzOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiaW5saW5lQ3NzIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBMaXN0IGFsbCB0aGUgZm9sZGVycyBmb3IgYSB1c2VyIGFjY291bnQKICAgICAqCiAgICAgKiBAc2VjdGlvbiBGb2xkZXIgIFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIG1jYXBpX2ZvbGRlcnMucGhwCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2ZvbGRlcnMucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkdHlwZSBvcHRpb25hbCB0aGUgdHlwZSBvZiBmb2xkZXJzIHRvIHJldHVybiAtIGVpdGhlciAiY2FtcGFpZ24iIG9yICJhdXRvcmVzcG9uZGVyIi4gRGVmYXVsdHMgdG8gImNhbXBhaWduIgogICAgICogQHJldHVybiBhcnJheSBBcnJheSBvZiBmb2xkZXIgc3RydWN0cyAoc2VlIFJldHVybmVkIEZpZWxkcyBmb3IgZGV0YWlscykKICAgICAqIEByZXR1cm5mIGludCBmb2xkZXJfaWQgRm9sZGVyIElkIGZvciB0aGUgZ2l2ZW4gZm9sZGVyLCB0aGlzIGNhbiBiZSB1c2VkIGluIHRoZSBjYW1wYWlnbnMoKSBmdW5jdGlvbiB0byBmaWx0ZXIgb24uCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgbmFtZSBOYW1lIG9mIHRoZSBnaXZlbiBmb2xkZXIKICAgICAqIEByZXR1cm5mIHN0cmluZyBkYXRlX2NyZWF0ZWQgVGhlIGRhdGUvdGltZSB0aGUgZm9sZGVyIHdhcyBjcmVhdGVkCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgdHlwZSBUaGUgdHlwZSBvZiB0aGUgZm9sZGVycyBiZWluZyByZXR1cm5lZCwganVzdCB0byBtYWtlIHN1cmUgeW91IGtub3cuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZvbGRlcnMoJHR5cGU9J2NhbXBhaWduJykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbInR5cGUiXSA9ICR0eXBlOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiZm9sZGVycyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGEgbmV3IGZvbGRlciB0byBmaWxlIGNhbXBhaWducyBvciBhdXRvcmVzcG9uZGVycyBpbgogICAgICoKICAgICAqIEBzZWN0aW9uIEZvbGRlciAgUmVsYXRlZAogICAgICogQGV4YW1wbGUgbWNhcGlfZm9sZGVyQWRkLnBocAogICAgICogQGV4YW1wbGUgeG1sLXJwY19mb2xkZXJBZGQucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkbmFtZSBhIHVuaXF1ZSBuYW1lIGZvciBhIGZvbGRlciAobWF4IDEwMCBieXRlcykKICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUgb3B0aW9uYWwgdGhlIHR5cGUgb2YgZm9sZGVyIHRvIGNyZWF0ZSAtIGVpdGhlciAiY2FtcGFpZ24iIG9yICJhdXRvcmVzcG9uZGVyIi4gRGVmYXVsdHMgdG8gImNhbXBhaWduIgogICAgICogQHJldHVybiBpbnQgdGhlIGZvbGRlcl9pZCBvZiB0aGUgbmV3bHkgY3JlYXRlZCBmb2xkZXIuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZvbGRlckFkZCgkbmFtZSwgJHR5cGU9J2NhbXBhaWduJykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbIm5hbWUiXSA9ICRuYW1lOwogICAgICAgICRwYXJhbXNbInR5cGUiXSA9ICR0eXBlOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiZm9sZGVyQWRkIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIG5hbWUgb2YgYSBmb2xkZXIgZm9yIGNhbXBhaWducyBvciBhdXRvcmVzcG9uZGVycwogICAgICoKICAgICAqIEBzZWN0aW9uIEZvbGRlciAgUmVsYXRlZAogICAgICoKICAgICAqIEBwYXJhbSBpbnQgJGZpZCB0aGUgZm9sZGVyIGlkIHRvIHVwZGF0ZSAtIHJldHJpZXZlIGZyb20gZm9sZGVycygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lIGEgbmV3LCB1bmlxdWUgbmFtZSBmb3IgdGhlIGZvbGRlciAobWF4IDEwMCBieXRlcykKICAgICAqIEBwYXJhbSBzdHJpbmcgJHR5cGUgb3B0aW9uYWwgdGhlIHR5cGUgb2YgZm9sZGVyIHRvIGNyZWF0ZSAtIGVpdGhlciAiY2FtcGFpZ24iIG9yICJhdXRvcmVzcG9uZGVyIi4gRGVmYXVsdHMgdG8gImNhbXBhaWduIgogICAgICogQHJldHVybiBib29sIHRydWUgaWYgdGhlIHVwZGF0ZSB3b3JrZWQsIG90aGVyd2lzZSBhbiBleGNlcHRpb24gaXMgdGhyb3duCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZvbGRlclVwZGF0ZSgkZmlkLCAkbmFtZSwgJHR5cGU9J2NhbXBhaWduJykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImZpZCJdID0gJGZpZDsKICAgICAgICAkcGFyYW1zWyJuYW1lIl0gPSAkbmFtZTsKICAgICAgICAkcGFyYW1zWyJ0eXBlIl0gPSAkdHlwZTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImZvbGRlclVwZGF0ZSIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogRGVsZXRlIGEgY2FtcGFpZ24gb3IgYXV0b3Jlc3BvbmRlciBmb2xkZXIuIE5vdGUgdGhhdCB0aGlzIHdpbGwgc2ltcGx5IG1ha2UgY2FtcGFpZ25zIGluIHRoZSBmb2xkZXIgYXBwZWFyIHVuZmlsZWQsIHRoZXkgYXJlIG5vdCByZW1vdmVkLgogICAgICoKICAgICAqIEBzZWN0aW9uIEZvbGRlciAgUmVsYXRlZAogICAgICoKICAgICAqIEBwYXJhbSBpbnQgJGZpZCB0aGUgZm9sZGVyIGlkIHRvIHVwZGF0ZSAtIHJldHJpZXZlIGZyb20gZm9sZGVycygpCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0eXBlIG9wdGlvbmFsIHRoZSB0eXBlIG9mIGZvbGRlciB0byBjcmVhdGUgLSBlaXRoZXIgImNhbXBhaWduIiBvciAiYXV0b3Jlc3BvbmRlciIuIERlZmF1bHRzIHRvICJjYW1wYWlnbiIKICAgICAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIHRoZSBkZWxldGUgd29ya2VkLCBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIGlzIHRocm93bgogICAgICovCiAgICBmdW5jdGlvbiBmb2xkZXJEZWwoJGZpZCwgJHR5cGU9J2NhbXBhaWduJykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImZpZCJdID0gJGZpZDsKICAgICAgICAkcGFyYW1zWyJ0eXBlIl0gPSAkdHlwZTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImZvbGRlckRlbCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgdGhlIEVjb21tZXJjZSBPcmRlcnMgZm9yIGFuIGFjY291bnQKICAgICAqIAogICAgICogQHNlY3Rpb24gRWNvbW1lcmNlCiAgICAgKgogICAgICogQHBhcmFtIGludCAkc3RhcnQgb3B0aW9uYWwgZm9yIGxhcmdlIGRhdGEgc2V0cywgdGhlIHBhZ2UgbnVtYmVyIHRvIHN0YXJ0IGF0IC0gZGVmYXVsdHMgdG8gMXN0IHBhZ2Ugb2YgZGF0YSAgKHBhZ2UgMCkKICAgICAqIEBwYXJhbSBpbnQgJGxpbWl0IG9wdGlvbmFsIGZvciBsYXJnZSBkYXRhIHNldHMsIHRoZSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4gLSBkZWZhdWx0cyB0byAxMDAsIHVwcGVyIGxpbWl0IHNldCBhdCA1MDAKICAgICAqIEBwYXJhbSBzdHJpbmcgJHNpbmNlIG9wdGlvbmFsIHB1bGwgb25seSBtZXNzYWdlcyBzaW5jZSB0aGlzIHRpbWUgLSB1c2UgWVlZWS1NTS1ERCBISDpJSTpTUyBmb3JtYXQgaW4gPHN0cm9uZz5HTVQ8L3N0cm9uZz4KICAgICAqIEByZXR1cm4gYXJyYXkgdGhlIHRvdGFsIG1hdGNoaW5nIG9yZGVycyBhbmQgdGhlIHNwZWNpZmljIG9yZGVycyBmb3IgdGhlIHJlcXVlc3RlZCBwYWdlCiAgICAgKiBAcmV0dXJuZiBpbnQgdG90YWwgdGhlIHRvdGFsIG1hdGNoaW5nIG9yZGVycwogICAgICogQHJldHVybmYgYXJyYXkgZGF0YSB0aGUgYWN0dWFsIGRhdGEgZm9yIGVhY2ggb3JkZXIgYmVpbmcgcmV0dXJuZWQKICAgICAgICAgICAgc3RyaW5nIHN0b3JlX2lkIHRoZSBzdG9yZSBpZCBnZW5lcmF0ZWQgYnkgdGhlIHBsdWdpbiB1c2VkIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGEgc3RvcmUKICAgICAgICAgICAgc3RyaW5nIHN0b3JlX25hbWUgdGhlIHN0b3JlIG5hbWUgY29sbGVjdGVkIGJ5IHRoZSBwbHVnaW4gLSBvZnRlbiB0aGUgZG9tYWluIG5hbWUKICAgICAgICAgICAgc3RyaW5nIG9yZGVyX2lkIHRoZSBpbnRlcm5hbCBvcmRlciBpZCB0aGUgc3RvcmUgdHJhY2tlZCB0aGlzIG9yZGVyIGJ5CiAgICAgICAgICAgIHN0cmluZyBlbWFpbCAgdGhlIGVtYWlsIGFkZHJlc3MgdGhhdCByZWNlaXZlZCB0aGlzIGNhbXBhaWduIGFuZCBpcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBvcmRlcgogICAgICAgICAgICBkb3VibGUgb3JkZXJfdG90YWwgdGhlIG9yZGVyIHRvdGFsCiAgICAgICAgICAgIGRvdWJsZSB0YXhfdG90YWwgdGhlIHRvdGFsIHRheCBmb3IgdGhlIG9yZGVyIChpZiBjb2xsZWN0ZWQpCiAgICAgICAgICAgIGRvdWJsZSBzaGlwX3RvdGFsIHRoZSBzaGlwcGluZyB0b3RhbCBmb3IgdGhlIG9yZGVyIChpZiBjb2xsZWN0ZWQpCiAgICAgICAgICAgIHN0cmluZyBvcmRlcl9kYXRlIHRoZSBkYXRlIHRoZSBvcmRlciB3YXMgdHJhY2tlZCAtIGZyb20gdGhlIHN0b3JlIGlmIHBvc3NpYmxlLCBvdGhlcndpc2UgdGhlIEdNVCB0aW1lIHdlIHJlY2lldmVkIGl0CiAgICAgICAgICAgIGFycmF5IGxpbmVzIGNvbnRhaW5pbmcgZGV0YWlsIG9mIHRoZSBvcmRlciAtIHByb2R1Y3QsIGNhdGVnb3J5LCBxdWFudGl0eSwgaXRlbSBjb3N0CiAgICAgKi8KICAgIGZ1bmN0aW9uIGVjb21tT3JkZXJzKCRzdGFydD0wLCAkbGltaXQ9MTAwLCAkc2luY2U9TlVMTCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbInN0YXJ0Il0gPSAkc3RhcnQ7CiAgICAgICAgJHBhcmFtc1sibGltaXQiXSA9ICRsaW1pdDsKICAgICAgICAkcGFyYW1zWyJzaW5jZSJdID0gJHNpbmNlOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiZWNvbW1PcmRlcnMiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEltcG9ydCBFY29tbWVyY2UgT3JkZXIgSW5mb3JtYXRpb24gdG8gYmUgdXNlZCBmb3IgU2VnbWVudGF0aW9uLiBUaGlzIHdpbGwgZ2VuZXJhbGx5IGJlIHVzZWQgYnkgZWNvbW1lcmNlIHBhY2thZ2UgcGx1Z2lucyAKICAgICAqIDxhIGhyZWY9Ii9wbHVnaW5zL2Vjb21tMzYwLnBodG1sIj50aGF0IHdlIHByb3ZpZGU8L2E+IG9yIGJ5IDNyZCBwYXJ0IHN5c3RlbSBkZXZlbG9wZXJzLgogICAgICogQHNlY3Rpb24gRWNvbW1lcmNlCiAgICAgKgogICAgICogQHBhcmFtIGFycmF5ICRvcmRlciBhbiBhcnJheSBvZiBpbmZvcm1hdGlvbiBwZXJ0YWluaW5nIHRvIHRoZSBvcmRlciB0aGF0IGhhcyBjb21wbGV0ZWQuIFVzZSB0aGUgZm9sbG93aW5nIGtleXM6CiAgICAgICAgICAgICAgICBzdHJpbmcgaWQgdGhlIE9yZGVyIElkCiAgICAgICAgICAgICAgICBzdHJpbmcgZW1haWxfaWQgb3B0aW9uYWwgKGtpbmQgb2YpIHRoZSBFbWFpbCBJZCBvZiB0aGUgc3Vic2NyaWJlciB3ZSBzaG91bGQgYXR0YWNoIHRoaXMgb3JkZXIgdG8gKHNlZSB0aGUgIm1jX2VpZCIgcXVlcnkgc3RyaW5nIHZhcmlhYmxlIGEgY2FtcGFpZ24gcGFzc2VzKSAtIGVpdGhlciB0aGlzIG9yIDxzdHJvbmc+ZW1haWw8L3N0cm9uZz4gaXMgcmVxdWlyZWQuIElmIGJvdGggYXJlIHByb3ZpZGVkLCBlbWFpbF9pZCB0YWtlcyBwcmVjZWRlbmNlCiAgICAgICAgICAgICAgICBzdHJpbmcgZW1haWwgb3B0aW9uYWwgKGtpbmQgb2YpIHRoZSBFbWFpbCBBZGRyZXNzIHdlIHNob3VsZCBhdHRhY2ggdGhpcyBvcmRlciB0byAtIGVpdGhlciB0aGlzIG9yIDxzdHJvbmc+ZW1haWxfaWQ8L3N0cm9uZz4gaXMgcmVxdWlyZWQuIElmIGJvdGggYXJlIHByb3ZpZGVkLCBlbWFpbF9pZCB0YWtlcyBwcmVjZWRlbmNlIAogICAgICAgICAgICAgICAgZG91YmxlIHRvdGFsIFRoZSBPcmRlciBUb3RhbCAoaWUsIHRoZSBmdWxsIGFtb3VudCB0aGUgY3VzdG9tZXIgZW5kcyB1cCBwYXlpbmcpCiAgICAgICAgICAgICAgICBzdHJpbmcgb3JkZXJfZGF0ZSBvcHRpb25hbCB0aGUgZGF0ZSBvZiB0aGUgb3JkZXIgLSBpZiB0aGlzIGlzIG5vdCBwcm92aWRlZCwgd2Ugd2lsbCBkZWZhdWx0IHRoZSBkYXRlIHRvIG5vdwogICAgICAgICAgICAgICAgZG91YmxlIHNoaXBwaW5nIG9wdGlvbmFsIHRoZSB0b3RhbCBwYWlkIGZvciBTaGlwcGluZyBGZWVzCiAgICAgICAgICAgICAgICBkb3VibGUgdGF4IG9wdGlvbmFsIHRoZSB0b3RhbCB0YXggcGFpZAogICAgICAgICAgICAgICAgc3RyaW5nIHN0b3JlX2lkIGEgdW5pcXVlIGlkIGZvciB0aGUgc3RvcmUgc2VuZGluZyB0aGUgb3JkZXIgaW4gKDIwIGJ5dGVzIG1heCkKICAgICAgICAgICAgICAgIHN0cmluZyBzdG9yZV9uYW1lIG9wdGlvbmFsIGEgIm5pY2UiIG5hbWUgZm9yIHRoZSBzdG9yZSAtIHR5cGljYWxseSB0aGUgYmFzZSB3ZWIgYWRkcmVzcyAoaWUsICJzdG9yZS5tYWlsY2hpbXAuY29tIikuIFdlIHdpbGwgYXV0b21hdGljYWxseSB1cGRhdGUgdGhpcyBpZiBpdCBjaGFuZ2VzIChiYXNlZCBvbiBzdG9yZV9pZCkKICAgICAgICAgICAgICAgIHN0cmluZyBwbHVnaW5faWQgdGhlIE1haWxDaGltcCBhc3NpZ25lZCBQbHVnaW4gSWQuIEdldCB5b3VycyBieSA8YSBocmVmPSIvYXBpL3JlZ2lzdGVyLnBocCI+cmVnaXN0ZXJpbmcgaGVyZTwvYT4KICAgICAgICAgICAgICAgIHN0cmluZyBjYW1wYWlnbl9pZCBvcHRpb25hbCB0aGUgQ2FtcGFpZ24gSWQgdG8gdHJhY2sgdGhpcyBvcmRlciB3aXRoIChzZWUgdGhlICJtY19jaWQiIHF1ZXJ5IHN0cmluZyB2YXJpYWJsZSBhIGNhbXBhaWduIHBhc3NlcykKICAgICAgICAgICAgICAgIGFycmF5IGl0ZW1zIHRoZSBpbmRpdmlkdWFsIGxpbmUgaXRlbXMgZm9yIGFuIG9yZGVyIHVzaW5nIHRoZXNlIGtleXM6CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nLWxlZnQ6MzBweCI+PHRhYmxlPjx0cj48dGQgY29sc3Bhbj0qPgogICAgICAgICAgICAgICAgICAgIGludCBsaW5lX251bSBvcHRpb25hbCB0aGUgbGluZSBudW1iZXIgb2YgdGhlIGl0ZW0gb24gdGhlIG9yZGVyLiBXZSB3aWxsIGdlbmVyYXRlIHRoZXNlIGlmIHRoZXkgYXJlIG5vdCBwYXNzZWQKICAgICAgICAgICAgICAgICAgICBpbnQgcHJvZHVjdF9pZCB0aGUgc3RvcmUncyBpbnRlcm5hbCBJZCBmb3IgdGhlIHByb2R1Y3QuIExpbmVzIHRoYXQgZG8gbm8gY29udGFpbiB0aGlzIHdpbGwgYmUgc2tpcHBlZCAKICAgICAgICAgICAgICAgICAgICBzdHJpbmcgcHJvZHVjdF9uYW1lIHRoZSBwcm9kdWN0IG5hbWUgZm9yIHRoZSBwcm9kdWN0X2lkIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGl0ZW0uIFdlIHdpbGwgYXV0byB1cGRhdGUgdGhlc2UgYXMgdGhleSBjaGFuZ2UgKGJhc2VkIG9uIHByb2R1Y3RfaWQpCiAgICAgICAgICAgICAgICAgICAgaW50IGNhdGVnb3J5X2lkIHRoZSBzdG9yZSdzIGludGVybmFsIElkIGZvciB0aGUgKG1haW4pIGNhdGVnb3J5IGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByb2R1Y3QuIE91ciB0ZXN0aW5nIGhhcyBmb3VuZCB0aGlzIHRvIGJlIGEgImJlc3QgZ3Vlc3MiIHNjZW5hcmlvCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nIGNhdGVnb3J5X25hbWUgdGhlIGNhdGVnb3J5IG5hbWUgZm9yIHRoZSBjYXRlZ29yeV9pZCB0aGlzIHByb2R1Y3QgaXMgaW4uIE91ciB0ZXN0aW5nIGhhcyBmb3VuZCB0aGlzIHRvIGJlIGEgImJlc3QgZ3Vlc3MiIHNjZW5hcmlvLiBPdXIgcGx1Z2lucyB3YWxrIHRoZSBjYXRlZ29yeSBoZWlyYXJjaHkgdXAgYW5kIHNlbmQgIlJvb3QgLSBTdWJDYXQxIC0gU3ViQ2F0NCIsIGV0Yy4KICAgICAgICAgICAgICAgICAgICBkb3VibGUgcXR5IHRoZSBxdWFudGl0eSBvZiB0aGUgaXRlbSBvcmRlcmVkCiAgICAgICAgICAgICAgICAgICAgZG91YmxlIGNvc3QgdGhlIGNvc3Qgb2YgYSBzaW5nbGUgaXRlbSAoaWUsIG5vdCB0aGUgZXh0ZW5kZWQgY29zdCBvZiB0aGUgbGluZSkKICAgICAgICAgICAgICAgIDwvdGQ+PC90cj48L3RhYmxlPjwvZGl2PgogICAgICogQHJldHVybiBib29sIHRydWUgaWYgdGhlIGRhdGEgaXMgc2F2ZWQsIG90aGVyd2lzZSBhbiBlcnJvciBpcyB0aHJvd24uCiAgICAgKi8KICAgIGZ1bmN0aW9uIGVjb21tT3JkZXJBZGQoJG9yZGVyKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1sib3JkZXIiXSA9ICRvcmRlcjsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImVjb21tT3JkZXJBZGQiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIERlbGV0ZSBFY29tbWVyY2UgT3JkZXIgSW5mb3JtYXRpb24gdXNlZCBmb3Igc2VnbWVudGF0aW9uLiBUaGlzIHdpbGwgZ2VuZXJhbGx5IGJlIHVzZWQgYnkgZWNvbW1lcmNlIHBhY2thZ2UgcGx1Z2lucyAKICAgICAqIDxhIGhyZWY9Ii9wbHVnaW5zL2Vjb21tMzYwLnBodG1sIj50aGF0IHdlIHByb3ZpZGU8L2E+IG9yIGJ5IDNyZCBwYXJ0IHN5c3RlbSBkZXZlbG9wZXJzLgogICAgICogQHNlY3Rpb24gRWNvbW1lcmNlCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkc3RvcmVfaWQgdGhlIHN0b3JlIGlkIHRoZSBvcmRlciBiZWxvbmdzIHRvCiAgICAgKiBAcGFyYW0gc3RyaW5nICRvcmRlcl9pZCB0aGUgb3JkZXIgaWQgKGdlbmVyYXRlZCBieSB0aGUgc3RvcmUpIHRvIGRlbGV0ZQogICAgICogQHJldHVybiBib29sIHRydWUgaWYgYW4gb3JkZXIgaXMgZGVsZXRlZCwgb3RoZXJ3aXNlIGFuIGVycm9yIGlzIHRocm93bi4KICAgICAqLwogICAgZnVuY3Rpb24gZWNvbW1PcmRlckRlbCgkc3RvcmVfaWQsICRvcmRlcl9pZCkgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbInN0b3JlX2lkIl0gPSAkc3RvcmVfaWQ7CiAgICAgICAgJHBhcmFtc1sib3JkZXJfaWQiXSA9ICRvcmRlcl9pZDsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImVjb21tT3JkZXJEZWwiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIGFsbCBMaXN0IElkcyBhIG1lbWJlciBpcyBzdWJzY3JpYmVkIHRvLgogICAgICoKICAgICAqIEBzZWN0aW9uIEhlbHBlcgogICAgICogCiAgICAgKiBAcGFyYW0gc3RyaW5nICRlbWFpbF9hZGRyZXNzIHRoZSBlbWFpbCBhZGRyZXNzIHRvIGNoZWNrIE9SIHRoZSBlbWFpbCAiaWQiIHJldHVybmVkIGZyb20gbGlzdE1lbWJlckluZm8sIFdlYmhvb2tzLCBhbmQgQ2FtcGFpZ25zCiAgICAgKiBAcmV0dXJuIGFycmF5IEFuIGFycmF5IG9mIGxpc3RfaWRzIHRoZSBtZW1iZXIgaXMgc3Vic2NyaWJlZCB0by4KICAgICAqLwogICAgZnVuY3Rpb24gbGlzdHNGb3JFbWFpbCgkZW1haWxfYWRkcmVzcykgewogICAgICAgICRwYXJhbXMgPSBhcnJheSgpOwogICAgICAgICRwYXJhbXNbImVtYWlsX2FkZHJlc3MiXSA9ICRlbWFpbF9hZGRyZXNzOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigibGlzdHNGb3JFbWFpbCIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogUmV0cmlldmUgYWxsIENhbXBhaWducyBJZHMgYSBtZW1iZXIgd2FzIHNlbnQKICAgICAqCiAgICAgKiBAc2VjdGlvbiBIZWxwZXIKICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkZW1haWxfYWRkcmVzcyB0aGUgZW1haWwgYWRkcmVzcyB0byB1bnN1YnNjcmliZSAgT1IgdGhlIGVtYWlsICJpZCIgcmV0dXJuZWQgZnJvbSBsaXN0TWVtYmVySW5mbywgV2ViaG9va3MsIGFuZCBDYW1wYWlnbnMKICAgICAqIEByZXR1cm4gYXJyYXkgQW4gYXJyYXkgb2YgY2FtcGFpZ25faWRzIHRoZSBtZW1iZXIgcmVjZWl2ZWQKICAgICAqLwogICAgZnVuY3Rpb24gY2FtcGFpZ25zRm9yRW1haWwoJGVtYWlsX2FkZHJlc3MpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJlbWFpbF9hZGRyZXNzIl0gPSAkZW1haWxfYWRkcmVzczsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbXBhaWduc0ZvckVtYWlsIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXR1cm4gdGhlIGN1cnJlbnQgQ2hpbXAgQ2hhdHRlciBtZXNzYWdlcyBmb3IgYW4gYWNjb3VudC4KICAgICAqCiAgICAgKiBAc2VjdGlvbiBIZWxwZXIKICAgICAqIAogICAgICogQHJldHVybiBhcnJheSBBbiBhcnJheSBvZiBjaGF0dGVyIG1lc3NhZ2VzIGFuZCBwcm9wZXJ0aWVzCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgbWVzc2FnZSBUaGUgY2hhdHRlciBtZXNzYWdlCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgdHlwZSBUaGUgdHlwZSBvZiB0aGUgbWVzc2FnZSAtIG9uZSBvZiBsaXN0czpuZXctc3Vic2NyaWJlciwgbGlzdHM6dW5zdWJzY3JpYmVzLCBsaXN0czpwcm9maWxlLXVwZGF0ZXMsIGNhbXBhaWduczpmYWNlYm9vay1saWtlcywgY2FtcGFpZ25zOmZhY2Vib29rLWNvbW1lbnRzLCBjYW1wYWlnbnM6Zm9yd2FyZC10by1mcmllbmQsIGxpc3RzOmltcG9ydHMsIG9yIGNhbXBhaWduczppbmJveC1pbnNwZWN0aW9ucwogICAgICogQHJldHVybmYgc3RyaW5nIHVybCBhIHVybCBpbnRvIHRoZSB3ZWIgYXBwIHRoYXQgdGhlIG1lc3NhZ2UgY291bGQgbGluayB0bwogICAgICogQHJldHVybmYgc3RyaW5nIGxpc3RfaWQgdGhlIGxpc3RfaWQgYSBtZXNzYWdlIHJlbGF0ZXMgdG8sIGlmIGFwcGxpY2FibGUKICAgICAqIEByZXR1cm5mIHN0cmluZyBjYW1wYWlnbl9pZCB0aGUgbGlzdF9pZCBhIG1lc3NhZ2UgcmVsYXRlcyB0bywgaWYgYXBwbGljYWJsZQogICAgICogQHJldHVybmYgc3RyaW5nIHVwZGF0ZV90aW1lIFRoZSBkYXRlL3RpbWUgdGhlIG1lc3NhZ2Ugd2FzIGxhc3QgdXBkYXRlZAogICAgICovCiAgICBmdW5jdGlvbiBjaGltcENoYXR0ZXIoKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJjaGltcENoYXR0ZXIiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIFJldHJpZXZlIGEgbGlzdCBvZiBhbGwgTWFpbENoaW1wIEFQSSBLZXlzIGZvciB0aGlzIFVzZXIKICAgICAqCiAgICAgKiBAc2VjdGlvbiBTZWN1cml0eSBSZWxhdGVkCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX2FwaWtleUFkZC5waHAKICAgICAqIEBleGFtcGxlIG1jYXBpX2FwaWtleUFkZC5waHAKICAgICAqIAogICAgICogQHBhcmFtIHN0cmluZyAkdXNlcm5hbWUgWW91ciBNYWlsQ2hpbXAgdXNlciBuYW1lCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwYXNzd29yZCBZb3VyIE1haWxDaGltcCBwYXNzd29yZAogICAgICogQHBhcmFtIGJvb2xlYW4gJGV4cGlyZWQgb3B0aW9uYWwgLSB3aGV0aGVyIG9yIG5vdCB0byBpbmNsdWRlIGV4cGlyZWQga2V5cywgZGVmYXVsdHMgdG8gZmFsc2UKICAgICAqIEByZXR1cm4gYXJyYXkgYW4gYXJyYXkgb2YgQVBJIGtleXMgaW5jbHVkaW5nOgogICAgICogQHJldHVybmYgc3RyaW5nIGFwaWtleSBUaGUgYXBpIGtleSB0aGF0IGNhbiBiZSB1c2VkCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgY3JlYXRlZF9hdCBUaGUgZGF0ZSB0aGUga2V5IHdhcyBjcmVhdGVkCiAgICAgKiBAcmV0dXJuZiBzdHJpbmcgZXhwaXJlZF9hdCBUaGUgZGF0ZSB0aGUga2V5IHdhcyBleHBpcmVkCiAgICAgKi8KICAgIGZ1bmN0aW9uIGFwaWtleXMoJHVzZXJuYW1lLCAkcGFzc3dvcmQsICRleHBpcmVkPWZhbHNlKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1sidXNlcm5hbWUiXSA9ICR1c2VybmFtZTsKICAgICAgICAkcGFyYW1zWyJwYXNzd29yZCJdID0gJHBhc3N3b3JkOwogICAgICAgICRwYXJhbXNbImV4cGlyZWQiXSA9ICRleHBpcmVkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiYXBpa2V5cyIsICRwYXJhbXMpOwogICAgfQoKICAgIC8qKgogICAgICogQWRkIGFuIEFQSSBLZXkgdG8geW91ciBhY2NvdW50LiBXZSB3aWxsIGdlbmVyYXRlIGEgbmV3IGtleSBmb3IgeW91IGFuZCByZXR1cm4gaXQuCiAgICAgKgogICAgICogQHNlY3Rpb24gU2VjdXJpdHkgUmVsYXRlZAogICAgICogQGV4YW1wbGUgeG1sLXJwY19hcGlrZXlBZGQucGhwCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkdXNlcm5hbWUgWW91ciBNYWlsQ2hpbXAgdXNlciBuYW1lCiAgICAgKiBAcGFyYW0gc3RyaW5nICRwYXNzd29yZCBZb3VyIE1haWxDaGltcCBwYXNzd29yZAogICAgICogQHJldHVybiBzdHJpbmcgYSBuZXcgQVBJIEtleSB0aGF0IGNhbiBiZSBpbW1lZGlhdGVseSB1c2VkLgogICAgICovCiAgICBmdW5jdGlvbiBhcGlrZXlBZGQoJHVzZXJuYW1lLCAkcGFzc3dvcmQpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICAkcGFyYW1zWyJ1c2VybmFtZSJdID0gJHVzZXJuYW1lOwogICAgICAgICRwYXJhbXNbInBhc3N3b3JkIl0gPSAkcGFzc3dvcmQ7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJhcGlrZXlBZGQiLCAkcGFyYW1zKTsKICAgIH0KCiAgICAvKioKICAgICAqIEV4cGlyZSBhIFNwZWNpZmljIEFQSSBLZXkuIE5vdGUgdGhhdCBpZiB5b3UgZXhwaXJlIGFsbCBvZiB5b3VyIGtleXMsIGp1c3QgdmlzaXQgPGEgaHJlZj0iaHR0cDovL2FkbWluLm1haWxjaGltcC5jb20vYWNjb3VudC9hcGkiIHRhcmdldD0iX2JsYW5rIj55b3VyIEFQSSBkYXNoYm9hcmQ8L2E+CiAgICAgKiB0byBjcmVhdGUgYSBuZXcgb25lLiBJZiB5b3UgYXJlIHRyeWluZyB0byBzaHV0IG9mZiBhY2Nlc3MgdG8geW91ciBhY2NvdW50IGZvciBhbiBvbGQgZGV2ZWxvcGVyLCBjaGFuZ2UgeW91ciAKICAgICAqIE1haWxDaGltcCBwYXNzd29yZCwgdGhlbiBleHBpcmUgYWxsIG9mIHRoZSBrZXlzIHRoZXkgaGFkIGFjY2VzcyB0by4gTm90ZSB0aGF0IHRoaXMgdGFrZXMgZWZmZWN0IGltbWVkaWF0ZWx5LCBzbyBtYWtlIAogICAgICogc3VyZSB5b3UgcmVwbGFjZSB0aGUga2V5cyBpbiBhbnkgd29ya2luZyBhcHBsaWNhdGlvbiBiZWZvcmUgZXhwaXJpbmcgdGhlbSEgQ29uc2lkZXIgeW91cnNlbGYgd2FybmVkLi4uIAogICAgICoKICAgICAqIEBzZWN0aW9uIFNlY3VyaXR5IFJlbGF0ZWQKICAgICAqIEBleGFtcGxlIG1jYXBpX2FwaWtleUV4cGlyZS5waHAKICAgICAqIEBleGFtcGxlIHhtbC1ycGNfYXBpa2V5RXhwaXJlLnBocAogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJHVzZXJuYW1lIFlvdXIgTWFpbENoaW1wIHVzZXIgbmFtZQogICAgICogQHBhcmFtIHN0cmluZyAkcGFzc3dvcmQgWW91ciBNYWlsQ2hpbXAgcGFzc3dvcmQKICAgICAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIGl0IHdvcmtlZCwgb3RoZXJ3aXNlIGFuIGVycm9yIGlzIHRocm93bi4KICAgICAqLwogICAgZnVuY3Rpb24gYXBpa2V5RXhwaXJlKCR1c2VybmFtZSwgJHBhc3N3b3JkKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgJHBhcmFtc1sidXNlcm5hbWUiXSA9ICR1c2VybmFtZTsKICAgICAgICAkcGFyYW1zWyJwYXNzd29yZCJdID0gJHBhc3N3b3JkOwogICAgICAgIHJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcigiYXBpa2V5RXhwaXJlIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiAiUGluZyIgdGhlIE1haWxDaGltcCBBUEkgLSBhIHNpbXBsZSBtZXRob2QgeW91IGNhbiBjYWxsIHRoYXQgd2lsbCByZXR1cm4gYSBjb25zdGFudCB2YWx1ZSBhcyBsb25nIGFzIGV2ZXJ5dGhpbmcgaXMgZ29vZC4gTm90ZQogICAgICogdGhhbiB1bmxpa2UgbW9zdCBhbGwgb2Ygb3VyIG1ldGhvZHMsIHdlIGRvbid0IHRocm93IGFuIEV4Y2VwdGlvbiBpZiB3ZSBhcmUgaGF2aW5nIGlzc3Vlcy4gWW91IHdpbGwgc2ltcGx5IHJlY2VpdmUgYSBkaWZmZXJlbnQKICAgICAqIHN0cmluZyBiYWNrIHRoYXQgd2lsbCBleHBsYWluIG91ciB2aWV3IG9uIHdoYXQgaXMgZ29pbmcgb24uCiAgICAgKgogICAgICogQHNlY3Rpb24gSGVscGVyCiAgICAgKiBAZXhhbXBsZSB4bWwtcnBjX3BpbmcucGhwCiAgICAgKgogICAgICogQHJldHVybiBzdHJpbmcgcmV0dXJucyAiRXZlcnl0aGluZydzIENoaW1weSEiIGlmIGV2ZXJ5dGhpbmcgaXMgY2hpbXB5LCBvdGhlcndpc2UgcmV0dXJucyBhbiBlcnJvciBtZXNzYWdlCiAgICAgKi8KICAgIGZ1bmN0aW9uIHBpbmcoKSB7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5KCk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCJwaW5nIiwgJHBhcmFtcyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJbnRlcm5hbCBmdW5jdGlvbiAtIHByb3h5IG1ldGhvZCBmb3IgY2VydGFpbiBYTUwtUlBDIGNhbGxzIHwgRE8gTk9UIENBTEwKICAgICAqIEBwYXJhbSBtaXhlZCBNZXRob2QgdG8gY2FsbCwgd2l0aCBhbnkgcGFyYW1ldGVycyB0byBwYXNzIGFsb25nCiAgICAgKiBAcmV0dXJuIG1peGVkIHRoZSByZXN1bHQgb2YgdGhlIGNhbGwKICAgICAqLwogICAgZnVuY3Rpb24gY2FsbE1ldGhvZCgpIHsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoKTsKICAgICAgICByZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoImNhbGxNZXRob2QiLCAkcGFyYW1zKTsKICAgIH0KICAgIAogICAgLyoqCiAgICAgKiBBY3R1YWxseSBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIgYW5kIGNhbGwgdGhlIHJlcXVlc3RlZCBtZXRob2RzLCBwYXJzaW5nIHRoZSByZXN1bHQKICAgICAqIFlvdSBzaG91bGQgbmV2ZXIgaGF2ZSB0byBjYWxsIHRoaXMgZnVuY3Rpb24gbWFudWFsbHkKICAgICAqLwogICAgZnVuY3Rpb24gY2FsbFNlcnZlcigkbWV0aG9kLCAkcGFyYW1zKSB7CgkgICAgJGRjID0gInVzMSI7CgkgICAgaWYgKHN0cnN0cigkdGhpcy0+YXBpX2tleSwiLSIpKXsKICAgICAgICAJbGlzdCgka2V5LCAkZGMpID0gZXhwbG9kZSgiLSIsJHRoaXMtPmFwaV9rZXksMik7CiAgICAgICAgICAgIGlmICghJGRjKSAkZGMgPSAidXMxIjsKICAgICAgICB9CiAgICAgICAgJGhvc3QgPSAkZGMuIi4iLiR0aGlzLT5hcGlVcmxbImhvc3QiXTsKCQkkcGFyYW1zWyJhcGlrZXkiXSA9ICR0aGlzLT5hcGlfa2V5OwoKICAgICAgICAkdGhpcy0+ZXJyb3JNZXNzYWdlID0gIiI7CiAgICAgICAgJHRoaXMtPmVycm9yQ29kZSA9ICIiOwogICAgICAgICRzZXBfY2hhbmdlZCA9IGZhbHNlOwogICAgICAgIC8vc2lnaCwgYXBwYXJlbnRseSBzb21lIGRpc3RyaWJzIGNoYW5nZSB0aGlzIHRvICZhbXA7IGJ5IGRlZmF1bHQKICAgICAgICBpZiAoaW5pX2dldCgiYXJnX3NlcGFyYXRvci5vdXRwdXQiKSE9IiYiKXsKICAgICAgICAgICAgJHNlcF9jaGFuZ2VkID0gdHJ1ZTsKICAgICAgICAgICAgJG9yaWdfc2VwID0gaW5pX2dldCgiYXJnX3NlcGFyYXRvci5vdXRwdXQiKTsKICAgICAgICAgICAgaW5pX3NldCgiYXJnX3NlcGFyYXRvci5vdXRwdXQiLCAiJiIpOwogICAgICAgIH0KICAgICAgICAkcG9zdF92YXJzID0gaHR0cF9idWlsZF9xdWVyeSgkcGFyYW1zKTsKICAgICAgICBpZiAoJHNlcF9jaGFuZ2VkKXsKICAgICAgICAgICAgaW5pX3NldCgiYXJnX3NlcGFyYXRvci5vdXRwdXQiLCAkb3JpZ19zZXApOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAkcGF5bG9hZCA9ICJQT1NUICIgLiAkdGhpcy0+YXBpVXJsWyJwYXRoIl0gLiAiPyIgLiAkdGhpcy0+YXBpVXJsWyJxdWVyeSJdIC4gIiZtZXRob2Q9IiAuICRtZXRob2QgLiAiIEhUVFAvMS4wXHJcbiI7CiAgICAgICAgJHBheWxvYWQgLj0gIkhvc3Q6ICIgLiAkaG9zdCAuICJcclxuIjsKICAgICAgICAkcGF5bG9hZCAuPSAiVXNlci1BZ2VudDogTUNBUEkvIiAuICR0aGlzLT52ZXJzaW9uIC4iXHJcbiI7CiAgICAgICAgJHBheWxvYWQgLj0gIkNvbnRlbnQtdHlwZTogYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXHJcbiI7CiAgICAgICAgJHBheWxvYWQgLj0gIkNvbnRlbnQtbGVuZ3RoOiAiIC4gc3RybGVuKCRwb3N0X3ZhcnMpIC4gIlxyXG4iOwogICAgICAgICRwYXlsb2FkIC49ICJDb25uZWN0aW9uOiBjbG9zZSBcclxuXHJcbiI7CiAgICAgICAgJHBheWxvYWQgLj0gJHBvc3RfdmFyczsKICAgICAgICAKICAgICAgICBvYl9zdGFydCgpOwogICAgICAgIGlmICgkdGhpcy0+c2VjdXJlKXsKICAgICAgICAgICAgJHNvY2sgPSBmc29ja29wZW4oInNzbDovLyIuJGhvc3QsIDQ0MywgJGVycm5vLCAkZXJyc3RyLCAzMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgJHNvY2sgPSBmc29ja29wZW4oJGhvc3QsIDgwLCAkZXJybm8sICRlcnJzdHIsIDMwKTsKICAgICAgICB9CiAgICAgICAgaWYoISRzb2NrKSB7CiAgICAgICAgICAgICR0aGlzLT5lcnJvck1lc3NhZ2UgPSAiQ291bGQgbm90IGNvbm5lY3QgKEVSUiAkZXJybm86ICRlcnJzdHIpIjsKICAgICAgICAgICAgJHRoaXMtPmVycm9yQ29kZSA9ICItOTkiOwogICAgICAgICAgICBvYl9lbmRfY2xlYW4oKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAkcmVzcG9uc2UgPSAiIjsKICAgICAgICBmd3JpdGUoJHNvY2ssICRwYXlsb2FkKTsKICAgICAgICBzdHJlYW1fc2V0X3RpbWVvdXQoJHNvY2ssICR0aGlzLT50aW1lb3V0KTsKICAgICAgICAkaW5mbyA9IHN0cmVhbV9nZXRfbWV0YV9kYXRhKCRzb2NrKTsKICAgICAgICB3aGlsZSAoKCFmZW9mKCRzb2NrKSkgJiYgKCEkaW5mb1sidGltZWRfb3V0Il0pKSB7CiAgICAgICAgICAgICRyZXNwb25zZSAuPSBmcmVhZCgkc29jaywgJHRoaXMtPmNodW5rU2l6ZSk7CiAgICAgICAgICAgICRpbmZvID0gc3RyZWFtX2dldF9tZXRhX2RhdGEoJHNvY2spOwogICAgICAgIH0KICAgICAgICBmY2xvc2UoJHNvY2spOwogICAgICAgIG9iX2VuZF9jbGVhbigpOwogICAgICAgIGlmICgkaW5mb1sidGltZWRfb3V0Il0pIHsKICAgICAgICAgICAgJHRoaXMtPmVycm9yTWVzc2FnZSA9ICJDb3VsZCBub3QgcmVhZCByZXNwb25zZSAodGltZWQgb3V0KSI7CiAgICAgICAgICAgICR0aGlzLT5lcnJvckNvZGUgPSAtOTg7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGxpc3QoJGhlYWRlcnMsICRyZXNwb25zZSkgPSBleHBsb2RlKCJcclxuXHJcbiIsICRyZXNwb25zZSwgMik7CiAgICAgICAgJGhlYWRlcnMgPSBleHBsb2RlKCJcclxuIiwgJGhlYWRlcnMpOwogICAgICAgICRlcnJvcmVkID0gZmFsc2U7CiAgICAgICAgZm9yZWFjaCgkaGVhZGVycyBhcyAkaCl7CiAgICAgICAgICAgIGlmIChzdWJzdHIoJGgsMCwyNik9PT0iWC1NYWlsQ2hpbXAtQVBJLUVycm9yLUNvZGUiKXsKICAgICAgICAgICAgICAgICRlcnJvcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICRlcnJvcl9jb2RlID0gdHJpbShzdWJzdHIoJGgsMjcpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKGluaV9nZXQoIm1hZ2ljX3F1b3Rlc19ydW50aW1lIikpICRyZXNwb25zZSA9IHN0cmlwc2xhc2hlcygkcmVzcG9uc2UpOwogICAgICAgIAogICAgICAgICRzZXJpYWwgPSB1bnNlcmlhbGl6ZSgkcmVzcG9uc2UpOwogICAgICAgIGlmKCRyZXNwb25zZSAmJiAkc2VyaWFsID09PSBmYWxzZSkgewogICAgICAgIAkkcmVzcG9uc2UgPSBhcnJheSgiZXJyb3IiID0+ICJCYWQgUmVzcG9uc2UuICBHb3QgVGhpczogIiAuICRyZXNwb25zZSwgImNvZGUiID0+ICItOTkiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgIAkkcmVzcG9uc2UgPSAkc2VyaWFsOwogICAgICAgIH0KICAgICAgICBpZigkZXJyb3JlZCAmJiBpc19hcnJheSgkcmVzcG9uc2UpICYmIGlzc2V0KCRyZXNwb25zZVsiZXJyb3IiXSkpIHsKICAgICAgICAgICAgJHRoaXMtPmVycm9yTWVzc2FnZSA9ICRyZXNwb25zZVsiZXJyb3IiXTsKICAgICAgICAgICAgJHRoaXMtPmVycm9yQ29kZSA9ICRyZXNwb25zZVsiY29kZSJdOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSBlbHNlaWYoJGVycm9yZWQpewogICAgICAgICAgICAkdGhpcy0+ZXJyb3JNZXNzYWdlID0gIk5vIGVycm9yIG1lc3NhZ2Ugd2FzIGZvdW5kIjsKICAgICAgICAgICAgJHRoaXMtPmVycm9yQ29kZSA9ICRlcnJvcl9jb2RlOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAkcmVzcG9uc2U7CiAgICB9Cgp9Cgo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(123, 'limelightshippingmethod', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0xpbWVMaWdodFNoaXBwaW5nTWV0aG9kIGV4dGVuZHMgTU1fRW50aXR5CnsJCglwcml2YXRlICRtbU9wdGlvbktleSA9ICIiOwoJcHJpdmF0ZSAkbGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZCA9ICIiOwoJcHJpdmF0ZSAkbGltZUxpZ2h0U2hpcHBpbmdNZXRob2ROYW1lID0gIiI7CgkKCXByaXZhdGUgJGxhc3RMaW1lTGlnaHRTaGlwcGluZ01ldGhvZElkID0gIiI7CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9TSElQUElOR19NRVRIT0RTLiIgV0hFUkUgaWQ9JyIuJHRoaXMtPmlkLiInOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5tbU9wdGlvbktleSA9ICRkYXRhLT5tZW1iZXJtb3VzZV9zaGlwcGluZ19vcHRpb25fa2V5OwoJCQkkdGhpcy0+bGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZCA9ICRkYXRhLT5saW1lbGlnaHRfc2hpcHBpbmdfbWV0aG9kX2lkOwoJCQkkdGhpcy0+bGltZUxpZ2h0U2hpcHBpbmdNZXRob2ROYW1lID0gJGRhdGEtPmxpbWVsaWdodF9zaGlwcGluZ19tZXRob2RfbmFtZTsKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCFNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokUFlNVF9TRVJWSUNFX0xJTUVMSUdIVCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogTGltZSBMaWdodCBpcyBub3QgYWN0aXZlIGZvciB0aGlzIE1lbWJlck1vdXNlIGxpY2Vuc2UiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGRvVXBkYXRlID0gaXNzZXQoJHRoaXMtPmlkKSAmJiAkdGhpcy0+aWQgIT0gIiIgJiYgaW50dmFsKCR0aGlzLT5pZCkgPiAwOwoJCSAKCQlNTV9UcmFuc2FjdGlvbjo6YmVnaW4oKTsKCQl0cnkKCQl7CQoJCQkvLyBjaGVjayBpZiBjYW1wYWlnbi9wcm9kdWN0IHBhaXIgaXMgYWxyZWFkeSBzZXQKCQkJaWYoISRkb1VwZGF0ZSB8fCAoKCFlbXB0eSgkdGhpcy0+bGFzdExpbWVMaWdodFNoaXBwaW5nTWV0aG9kSWQpICYmICgkdGhpcy0+bGFzdExpbWVMaWdodFNoaXBwaW5nTWV0aG9kSWQgIT0gJHRoaXMtPmxpbWVMaWdodFNoaXBwaW5nTWV0aG9kSWQpKSkpCgkJCXsKCQkJCSRzcWwgPSAiU0VMRUNUIG1lbWJlcm1vdXNlX3NoaXBwaW5nX29wdGlvbl9rZXkgRlJPTSAiLk1NX1RBQkxFX0xJTUVMSUdIVF9TSElQUElOR19NRVRIT0RTLiIgV0hFUkUgbGltZWxpZ2h0X3NoaXBwaW5nX21ldGhvZF9pZD0nIi4kdGhpcy0+bGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZC4iJzsiOwoJCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkJCgkJCQlpZigkcmVzdWx0KQoJCQkJewoJCQkJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkJCQkKCQkJCQkkc3BsaXQgPSBleHBsb2RlKCItIiwgJHJlc3VsdC0+bWVtYmVybW91c2Vfc2hpcHBpbmdfb3B0aW9uX2tleSk7CgkJCQkJJHRva2VuID0gJHNwbGl0WzBdOwoJCQkJCQkKCQkJCQkvL2dldCB0aGUgc2hpcHBpbmcgbWV0aG9kCgkJCQkJJHNoaXBwaW5nTWV0aG9kID0gTU1fU2hpcHBpbmdNZXRob2Q6OmdldFNoaXBwaW5nTWV0aG9kQnlUb2tlbigkdG9rZW4pOwoJCQkJCSRvcHRpb25SZXRyaWV2YWxSZXNwb25zZSA9ICRzaGlwcGluZ01ldGhvZC0+Z2V0U2hpcHBpbmdPcHRpb25CeUtleShuZXcgTU1fT3JkZXIoKSwgJHJlc3VsdC0+bWVtYmVybW91c2Vfc2hpcHBpbmdfb3B0aW9uX2tleSk7CgkJCQkJJHNoaXBwaW5nT3B0aW9uID0gJG9wdGlvblJldHJpZXZhbFJlc3BvbnNlLT5tZXNzYWdlOwoJCQkJCQkKCQkJCQkkZXJyb3JNc2cgPSAiVGhlIExpbWUgTGlnaHQgc2hpcHBpbmcgbWV0aG9kICd7JHRoaXMtPmxpbWVMaWdodFNoaXBwaW5nTWV0aG9kTmFtZX0nICI7CgkJCQkJJGVycm9yTXNnIC49ICJpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBNZW1iZXJNb3VzZSBzaGlwcGluZyBtZXRob2QgJ3skc2hpcHBpbmdPcHRpb24tPmdldE5hbWUoKX0nIjsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlcnJvck1zZywgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQkJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CQkJCgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfTElNRUxJR0hUX1NISVBQSU5HX01FVEhPRFMuIiBzZXQgIiAuCgkJCSAJCQkiCW1lbWJlcm1vdXNlX3NoaXBwaW5nX29wdGlvbl9rZXk9JyVzJywiIC4KCQkJIAkJCSIJbGltZWxpZ2h0X3NoaXBwaW5nX21ldGhvZF9pZD0nJWQnLCIgLgoJCQkgCQkJIglsaW1lbGlnaHRfc2hpcHBpbmdfbWV0aG9kX25hbWU9JyVzJyIgLgoJCQkgCQkJIiI7CgkJCX0KCQkJZWxzZSAKCQkJewkKCQkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfTElNRUxJR0hUX1NISVBQSU5HX01FVEhPRFMuIiBzZXQgIiAuCgkJCSAJCQkiCW1lbWJlcm1vdXNlX3NoaXBwaW5nX29wdGlvbl9rZXk9JyVzJywiIC4KCQkJIAkJCSIJbGltZWxpZ2h0X3NoaXBwaW5nX21ldGhvZF9pZD0nJWQnLCIgLgoJCQkgCQkJIglsaW1lbGlnaHRfc2hpcHBpbmdfbWV0aG9kX25hbWU9JyVzJyIgLgoJCQkgCQkJIgl3aGVyZSBpZD0neyR0aGlzLT5pZH0nIiAuCgkJCSAJCQkiIjsKCQkgCX0KCQkgCQoJCSAJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPm1tT3B0aW9uS2V5LCAkdGhpcy0+bGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZCwgJHRoaXMtPmxpbWVMaWdodFNoaXBwaW5nTWV0aG9kTmFtZSk7CgkJIAkKCQkgCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHByZXBhcmVkU3FsKTsKCQkgCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkgCXsKCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBzaGlwcGluZyBtZXRob2QgbWFwcGluZy5cblxuRWFjaCBMaW1lIExpZ2h0IHNoaXBwaW5nIG1ldGhvZCBjYW4gb25seSBiZSBtYXBwZWQgdG8gb25lIE1lbWJlck1vdXNlIHNoaXBwaW5nIG1ldGhvZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkgCX0KCQkgCQoJCSAJaWYoISRkb1VwZGF0ZSkgCgkJIAl7CgkJIAkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkgCX0KCQl9CgkJY2F0Y2goRXhjZXB0aW9uICRleCkKCQl7CgkJIAlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHNoaXBwaW5nIG1ldGhvZCBtYXBwaW5nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSAKCQlNTV9UcmFuc2FjdGlvbjo6Y29tbWl0KCk7CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiREVMRVRFIEZST00gIi5NTV9UQUJMRV9MSU1FTElHSFRfU0hJUFBJTkdfTUVUSE9EUy4iIFdIRVJFIGlkPSclZCcgTElNSVQgMSI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmlkKSk7CgkJCgkJaWYoJHJlc3VsdHMpIAoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKiogSEVMUEVSIE1FVEhPRFMgKiovCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEJ5TU1TaGlwcGluZ09wdGlvbktleSgkb3B0aW9uS2V5KQoJewoJCWlmIChlbXB0eSgkb3B0aW9uS2V5KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fTGltZUxpZ2h0U2hpcHBpbmdNZXRob2QoKTsKCQl9CgkJCgkJZ2xvYmFsICR3cGRiOwogCQkKCQkkc3FsID0gIlNFTEVDVCBpZCBGUk9NICIuTU1fVEFCTEVfTElNRUxJR0hUX1NISVBQSU5HX01FVEhPRFMuIiBXSEVSRSBtZW1iZXJtb3VzZV9zaGlwcGluZ19vcHRpb25fa2V5PSclcycgTElNSVQgMTsiOwoJCSRsbFNoaXBwaW5nTWV0aG9kSW5kZXggPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkc3FsLCRvcHRpb25LZXkpKTsKCQkKCQlpZiAoIWlzX251bGwoJGxsU2hpcHBpbmdNZXRob2RJbmRleCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX0xpbWVMaWdodFNoaXBwaW5nTWV0aG9kKCRsbFNoaXBwaW5nTWV0aG9kSW5kZXgpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX0xpbWVMaWdodFNoaXBwaW5nTWV0aG9kKCk7IC8vcmV0dXJuIGFuIGludmFsaWQgZW50aXR5IGlmIHRoZSBwcm9kdWN0IG1hcHBpbmcgY291bGQgbm90IGJlIGZvdW5kCgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVbm1hcHBlZFNoaXBwaW5nTWV0aG9kcygkY3JudE9wdGlvbktleT0iIikKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzaGlwcGluZ01ldGhvZHMgPSBhcnJheSgpOwoJCSRtYXBwZWRPcHRpb25LZXlzID0gYXJyYXkoKTsKCQkkb3B0aW9ucyA9IE1NX1NoaXBwaW5nTWV0aG9kOjpnZXRBdmFpbGFibGVTaGlwcGluZ09wdGlvbnMoKTsKCQkKCQkvLyBnZXQgZXhpc3RpbmcgbWFwcGVkIG9wdGlvbiBrZXlzCgkJJHNxbCA9ICJTRUxFQ1QgbWVtYmVybW91c2Vfc2hpcHBpbmdfb3B0aW9uX2tleSBGUk9NICIuTU1fVEFCTEVfTElNRUxJR0hUX1NISVBQSU5HX01FVEhPRFM7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkKCQlpZigkcmVzdWx0cykKCQl7CgkJCWZvcmVhY2goJHJlc3VsdHMgYXMgJHJlc3VsdCkKCQkJewoJCQkJJG1hcHBlZE9wdGlvbktleXNbXSA9ICRyZXN1bHQtPm1lbWJlcm1vdXNlX3NoaXBwaW5nX29wdGlvbl9rZXk7CgkJCX0KCQl9CgkJCgkJZm9yZWFjaCAoJG9wdGlvbnMgYXMgJHNoaXBwaW5nT3B0aW9uKQoJCXsKCQkJaWYoKCRjcm50T3B0aW9uS2V5ID09ICRzaGlwcGluZ09wdGlvbi0+Z2V0S2V5KCkpIHx8ICghaW5fYXJyYXkoJHNoaXBwaW5nT3B0aW9uLT5nZXRLZXkoKSwgJG1hcHBlZE9wdGlvbktleXMpKSkKCQkJewoJCQkJJHNoaXBwaW5nTWV0aG9kc1skc2hpcHBpbmdPcHRpb24tPmdldEtleSgpXSA9ICJ7JHNoaXBwaW5nT3B0aW9uLT5nZXROYW1lKCl9ICh7JHNoaXBwaW5nT3B0aW9uLT5nZXRSYXRlKHRydWUpfSkiOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkc2hpcHBpbmdNZXRob2RzOwoJfQoJCgkKCS8qKiBHRVRURVJTL1NFVFRFUlMgKiovCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRNTU9wdGlvbktleSgka2V5KSAKCXsKCQkkdGhpcy0+bW1PcHRpb25LZXkgPSAka2V5OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TU1PcHRpb25LZXkoKQoJewoJCXJldHVybiAkdGhpcy0+bW1PcHRpb25LZXk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaW1lTGlnaHRTaGlwcGluZ01ldGhvZElkKCRpZCkKCXsKCQkkdGhpcy0+bGFzdExpbWVMaWdodFNoaXBwaW5nTWV0aG9kSWQgPSAkdGhpcy0+bGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZDsKCQkkdGhpcy0+bGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZCA9ICRpZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldExpbWVMaWdodFNoaXBwaW5nTWV0aG9kSWQoKQoJewoJCXJldHVybiAkdGhpcy0+bGltZUxpZ2h0U2hpcHBpbmdNZXRob2RJZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldExpbWVMaWdodFNoaXBwaW5nTWV0aG9kTmFtZSgkc3RyKQoJewoJCSR0aGlzLT5saW1lTGlnaHRTaGlwcGluZ01ldGhvZE5hbWUgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGltZUxpZ2h0U2hpcHBpbmdNZXRob2ROYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxpbWVMaWdodFNoaXBwaW5nTWV0aG9kTmFtZTsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(124, 'rbacproductmanagerview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCgphYnN0cmFjdCBjbGFzcyBNTV9SQkFDUHJvZHVjdE1hbmFnZXJWaWV3IGV4dGVuZHMgTU1fUkJBQ0Jhc2VWaWV3CnsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7CgkJJHRoaXMtPnBlcm1pc3Npb25zID0gYXJyYXkoCgkJCQkiKiIgID0+ICBhcnJheShNTV9Sb2xlOjokUk9MRV9BRE1JTklTVFJBVE9SLE1NX1JvbGU6OiRST0xFX1BST0RVQ1RfTUFOQUdFUikKCQkJCSk7Cgl9CgkKfQ==', 0, '2018-11-21 06:38:54'),
(125, 'membersview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX01lbWJlcnNWaWV3IGV4dGVuZHMgTU1fUkJBQ0dlbmVyYWxFbXBsb3llZVZpZXcKewkKCXB1YmxpYyBzdGF0aWMgJFRJTUVfUEVSX09SREVSID0gMS41OwoJCglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TRUFSQ0ggPSAic2VhcmNoIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1JFU0VUX0ZPUk0gPSAicmVzZXRGb3JtIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NUT1JFX1NFQVJDSF9TVEFURSA9ICJzdG9yZVNlYXJjaFN0YXRlIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0NSRUFURV9NRU1CRVIgPSAiY3JlYXRlTWVtYmVyIjsKCQoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRVNFVF9GT1JNOgoJCQkJCXJldHVybiAkdGhpcy0+Z2VuZXJhdGVTZWFyY2hGb3JtKCRwb3N0KTsJCgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TRUFSQ0g6CgkJCQkJcmV0dXJuICR0aGlzLT5nZW5lcmF0ZURhdGFHcmlkKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NUT1JFX1NFQVJDSF9TVEFURToKCQkJCQlyZXR1cm4gJHRoaXMtPnN0b3JlU2VhcmNoU3RhdGUoJHBvc3QpOwkKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NSRUFURV9NRU1CRVI6CgkJCQkJcmV0dXJuICR0aGlzLT5jcmVhdGVNZW1iZXIoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUkVNT1ZFOgoJCQkJCXJldHVybiAkdGhpcy0+cmVtb3ZlTWVtYmVyKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQogCXB1YmxpYyBmdW5jdGlvbiBzZWFyY2goJHBvc3QsIE1NX0RhdGFHcmlkICRkZywgJGRvR2VuZXJhdGVDc3Y9ZmFsc2UpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRidW5kbGVzSm9pblNxbCA9ICIiOwoJCSRidW5kbGVzQ29sdW1uU3FsID0gIiI7CgkJJGJ1bmRsZXNXaGVyZVNxbCA9ICIiOwoJCSRidW5kbGVJZHMgPSAiIjsKCQkKCQkkY3VzdG9tRmllbGRKb2luU3FsID0gIiI7CgkJJGN1c3RvbUZpZWxkQ29sdW1uU3FsID0gIiI7CgkJJGN1c3RvbUZpZWxkV2hlcmVTcWwgPSAiIjsKCQkKCQkkY3VzdG9tRmllbGRKb2luU3FsMiA9ICIiOwoJCSRjdXN0b21GaWVsZENvbHVtblNxbDIgPSAiIjsKCQkkY3VzdG9tRmllbGRXaGVyZVNxbDIgPSAiIjsKCQkKCQlpZighZW1wdHkoJHBvc3RbIm1tX2J1bmRsZXMiXSkpCgkJewoJCQkkYnVuZGxlSWRzID0gam9pbignLCcgLCAkcG9zdFsibW1fYnVuZGxlcyJdKTsKCQkJJGJ1bmRsZXNKb2luU3FsID0gIiwgICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgYnVuZGxlcyAiOwoJCQkkYnVuZGxlc0NvbHVtblNxbCA9ICIiOwoJCQkkYnVuZGxlc1doZXJlU3FsID0gIiAoKGJ1bmRsZXMuYWNjZXNzX3R5cGVfaWQ9dS5JRCkgIjsKCQkJJGJ1bmRsZXNXaGVyZVNxbCAuPSAiIEFORCAoYnVuZGxlcy5idW5kbGVfaWQgSU4gKCB7JGJ1bmRsZUlkc30gKSkgIjsKCQkJJGJ1bmRsZXNXaGVyZVNxbCAuPSAiIEFORCAoYnVuZGxlcy5hY2Nlc3NfdHlwZT0nIi5NTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfVVNFUi4iJykgIjsKCQkJJGJ1bmRsZXNXaGVyZVNxbCAuPSAiIEFORCAoYnVuZGxlcy5zdGF0dXMgPSAnIi5NTV9TdGF0dXM6OiRBQ1RJVkUuIicgT1IgYnVuZGxlcy5zdGF0dXMgPSAnIi5NTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTi4iJykpICI7CgkJfQoJCQoJCWlmKCFlbXB0eSgkcG9zdFsibW1fbWVtYmVyX2N1c3RvbV9maWVsZCJdKSkKCQl7CgkJCSRjdXN0b21GaWVsZEpvaW5TcWwgPSAiLCAgIi5NTV9UQUJMRV9DVVNUT01fRklFTERfREFUQS4iIGNmZCAiOwoJCQkkY3VzdG9tRmllbGRDb2x1bW5TcWwgPSAiLCBjZmQudmFsdWUgYXMgY3VzdG9tX2ZpZWxkX3ZhbHVlICI7CgkJCSRjdXN0b21GaWVsZFdoZXJlU3FsID0gIiAoKGNmZC51c2VyX2lkPXUuaWQpIEFORCAoY2ZkLmN1c3RvbV9maWVsZF9pZD0neyRwb3N0WyJtbV9tZW1iZXJfY3VzdG9tX2ZpZWxkIl19JykgQU5EIChjZmQudmFsdWUgTElLRSAnJSIuJHBvc3RbIm1tX21lbWJlcl9jdXN0b21fZmllbGRfdmFsdWUiXS4iJScpKSAiOwoJCX0KCQkKCQlpZighZW1wdHkoJHBvc3RbIm1tX21lbWJlcl9jdXN0b21fZmllbGQyIl0pKQoJCXsKCQkJJGN1c3RvbUZpZWxkSm9pblNxbDIgPSAiLCAgIi5NTV9UQUJMRV9DVVNUT01fRklFTERfREFUQS4iIGNmZDIgIjsKCQkJJGN1c3RvbUZpZWxkQ29sdW1uU3FsMiA9ICIsIGNmZDIudmFsdWUgYXMgY3VzdG9tX2ZpZWxkX3ZhbHVlMiAiOwoJCQkkY3VzdG9tRmllbGRXaGVyZVNxbDIgPSAiICgoY2ZkMi51c2VyX2lkPXUuaWQpIEFORCAoY2ZkMi5jdXN0b21fZmllbGRfaWQ9J3skcG9zdFsibW1fbWVtYmVyX2N1c3RvbV9maWVsZDIiXX0nKSBBTkQgKGNmZDIudmFsdWUgTElLRSAnJSIuJHBvc3RbIm1tX21lbWJlcl9jdXN0b21fZmllbGQyX3ZhbHVlIl0uIiUnKSkgIjsKCQl9CgkJCgkJJHNxbEZyb20gPSAiIEZST00gIi4kd3BkYi0+dXNlcnMuIiB1LCAiLk1NX1RBQkxFX1VTRVJfREFUQS4iIG1tdSAiLiRjdXN0b21GaWVsZEpvaW5TcWwuJGN1c3RvbUZpZWxkSm9pblNxbDIuJGJ1bmRsZXNKb2luU3FsOwoJCQoJCSRmaWx0ZXJzID0gIiI7CgkJJG5ld0ZpbHRlciA9ICIiOwoJCSRtbVVzZXJEYXRhQ29sdW1ucyA9IGFycmF5KCJtZW1iZXJzaGlwX2xldmVsX2lkIiwgInN0YXR1cyIsICJsYXN0X25hbWUiLCAicGhvbmUiLCAibGFzdF9sb2dpbl9kYXRlIiwgInN0YXR1c191cGRhdGVkIik7CgkJJHNlYXJjaEJ5RGF0ZSA9ICJ1c2VyX3JlZ2lzdGVyZWQiOwoJCQoJCWlmKCFlbXB0eSgkcG9zdFsibW1fbWVtYmVyX3NlYXJjaF9ieV9kYXRlIl0pKQoJCXsKCQkJJHNlYXJjaEJ5RGF0ZSA9ICRwb3N0WyJtbV9tZW1iZXJfc2VhcmNoX2J5X2RhdGUiXTsKCQl9CgkJICAKCQlpZihlbXB0eSgkZGctPnNvcnRCeSkpCgkJewoJCQkkZGctPnNvcnRCeSA9ICRzZWFyY2hCeURhdGU7CgkJfQoJCQoJCSR0YWJsZU5hbWUgPSAoaW5fYXJyYXkoJHNlYXJjaEJ5RGF0ZSwgJG1tVXNlckRhdGFDb2x1bW5zKSkgPyAibW11IiA6ICJ1IjsgICAgIAoJCWlmKCFlbXB0eSgkcG9zdFsnbW1fZnJvbV9kYXRlJ10pKSAKCQl7CgkJCSRmcm9tRGF0ZSA9IE1NX1V0aWxzOjpkYXRlVG9VVEMoJHBvc3RbJ21tX2Zyb21fZGF0ZSddLCAiWS1tLWQgSDppIiwgIjAwOjAwOjAwIik7CgkJCSRuZXdGaWx0ZXIgPSAieyR0YWJsZU5hbWV9Lnskc2VhcmNoQnlEYXRlfSA+PSAnIi4kZnJvbURhdGUuIiciOwoJCQkkZmlsdGVycyA9ICR0aGlzLT5hZGRGaWx0ZXIoJGZpbHRlcnMsICRuZXdGaWx0ZXIpOwoJCX0KCQkKCQlpZighZW1wdHkoJHBvc3RbJ21tX3RvX2RhdGUnXSkpIAoJCXsKCQkJJHRvRGF0ZSA9IE1NX1V0aWxzOjpkYXRlVG9VVEMoJHBvc3RbJ21tX3RvX2RhdGUnXSwgIlktbS1kIEg6aSIsICIyMzo1OTo1OSIpOwoJCQkkbmV3RmlsdGVyID0gInskdGFibGVOYW1lfS57JHNlYXJjaEJ5RGF0ZX0gPD0gJyIuJHRvRGF0ZS4iJyI7CgkJCSRmaWx0ZXJzID0gJHRoaXMtPmFkZEZpbHRlcigkZmlsdGVycywgJG5ld0ZpbHRlcik7CgkJfQoJCQoJCS8vIE1lbWJlciBJRAoJCWlmKCFlbXB0eSgkcG9zdFsnbW1fbWVtYmVyX2lkJ10pKSAKCQl7CgkJCSRmaWx0ZXJzID0gJHRoaXMtPmFkZEZpbHRlcigkZmlsdGVycywgInUuaWQgPSAnIi4kcG9zdFsibW1fbWVtYmVyX2lkIl0uIiciKTsKCQl9CgkJCgkJLy8gRmlyc3QgTmFtZQoJCWlmKCFlbXB0eSgkcG9zdFsnbW1fZmlyc3RfbmFtZSddKSkgCgkJewoJCQkkZmlsdGVycyA9ICR0aGlzLT5hZGRGaWx0ZXIoJGZpbHRlcnMsICJtbXUuZmlyc3RfbmFtZSBMSUtFICclIi4kcG9zdFsibW1fZmlyc3RfbmFtZSJdLiIlJyIpOwoJCX0KCQkKCQkvLyBMYXN0IE5hbWUKCQlpZighZW1wdHkoJHBvc3RbJ21tX2xhc3RfbmFtZSddKSkgCgkJewoJCQkkZmlsdGVycyA9ICR0aGlzLT5hZGRGaWx0ZXIoJGZpbHRlcnMsICJtbXUubGFzdF9uYW1lIExJS0UgJyUiLiRwb3N0WyJtbV9sYXN0X25hbWUiXS4iJSciKTsKCQl9CgkJCgkJLy8gRW1haWwKCQlpZighZW1wdHkoJHBvc3RbJ21tX2VtYWlsJ10pKSAKCQl7CgkJCSRmaWx0ZXJzID0gJHRoaXMtPmFkZEZpbHRlcigkZmlsdGVycywgInUudXNlcl9lbWFpbCBMSUtFICclIi4kcG9zdFsibW1fZW1haWwiXS4iJSciKTsKCQl9CgkJCgkJZ2xvYmFsICRjdXJyZW50X3VzZXI7CgkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmZpbmRCeVVzZXJJZCgkY3VycmVudF91c2VyLT5JRCk7CgkJCgkJLy8gTWVtYmVyc2hpcCBMZXZlbCBJRHMKCQkkbWVtYmVyc2hpcEZpbHRlclNldCA9IGZhbHNlOwoJCWlmKCFlbXB0eSgkcG9zdFsnbW1fbWVtYmVyc2hpcHMnXSkpIAoJCXsKCQkJLy8gbWFrZSBzdXJlIGN1cnJlbnQgZW1wbG95ZWUgaGFzIGFjY2VzcyB0byB0aGUgcmVxdWVzdGVkIG1lbWJlcnNoaXAgSURzCgkJCWlmKCRlbXBsb3llZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkZmlsdGVyZWRMaXN0ID0gYXJyYXkoKTsKCQkJCQoJCQkJZm9yZWFjaCgkcG9zdFsibW1fbWVtYmVyc2hpcHMiXSBhcyAkaWQpCgkJCQl7CgkJCQkJaWYoJGVtcGxveWVlLT5oYXNBY2Nlc3MoTU1fRW1wbG95ZWU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQLCAkaWQpKQoJCQkJCXsKCQkJCQkJJGZpbHRlcmVkTGlzdFtdID0gJGlkOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJJHBvc3RbIm1tX21lbWJlcnNoaXBzIl0gPSAkZmlsdGVyZWRMaXN0OwoJCQl9CgkJCQoJCQlpZihjb3VudCgkcG9zdFsibW1fbWVtYmVyc2hpcHMiXSkgPiAwKQoJCQl7CgkJCQkkbWVtYmVyc2hpcEZpbHRlclNldCA9IHRydWU7CgkJCQkkbmV3RmlsdGVyID0gIm1tdS5tZW1iZXJzaGlwX2xldmVsX2lkIElOICgiLmpvaW4oJywnICwgJHBvc3RbIm1tX21lbWJlcnNoaXBzIl0pLiIpIjsKCQkJCSRmaWx0ZXJzID0gJHRoaXMtPmFkZEZpbHRlcigkZmlsdGVycywgJG5ld0ZpbHRlcik7CgkJCX0KCQl9CgkJCgkJLy8gZmlsdGVyIG1lbWJlcnNoaXAgSURzIHRvIG9ubHkgaW5jbHVkZSB0aG9zZSB0aGUgY3VycmVudCBlbXBsb3llZSBoYXMgYWNjZXNzIHRvCgkJaWYoISRtZW1iZXJzaGlwRmlsdGVyU2V0ICYmICRlbXBsb3llZS0+aXNWYWxpZCgpKQoJCXsKCQkJJG1lbWJlcnNoaXBSZXN0cmljdGlvbnMgPSAkZW1wbG95ZWUtPmdldEFjY2Vzc1Jlc2NyaWN0aW9ucyhNTV9FbXBsb3llZTo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVApOwoJCQkJCgkJCWlmKGNvdW50KCRtZW1iZXJzaGlwUmVzdHJpY3Rpb25zKSA+IDApCgkJCXsKCQkJCSRuZXdGaWx0ZXIgPSAibW11Lm1lbWJlcnNoaXBfbGV2ZWxfaWQgSU4gKCIuam9pbignLCcgLCAkbWVtYmVyc2hpcFJlc3RyaWN0aW9ucykuIikiOwoJCQkJJGZpbHRlcnMgPSAkdGhpcy0+YWRkRmlsdGVyKCRmaWx0ZXJzLCAkbmV3RmlsdGVyKTsKCQkJfQoJCX0KCQkKCQkvLyBNZW1iZXIgU3RhdHVzCgkJaWYoIWVtcHR5KCRwb3N0WydtbV9tZW1iZXJfc3RhdHVzX3R5cGVzJ10pKSAKCQl7CgkJCSRuZXdGaWx0ZXIgPSAibW11LnN0YXR1cyBJTiAoIi5qb2luKCcsJyAsICRwb3N0WyJtbV9tZW1iZXJfc3RhdHVzX3R5cGVzIl0pLiIpIjsKCQkJCgkJCWlmKCRuZXdGaWx0ZXIgIT0gIiIpIAoJCQl7CgkJCQkkZmlsdGVycyA9ICR0aGlzLT5hZGRGaWx0ZXIoJGZpbHRlcnMsICRuZXdGaWx0ZXIpOwoJCQl9CgkJfQoJCQoJCS8vIGJ1bmRsZXMKCQlpZighZW1wdHkoJGJ1bmRsZXNXaGVyZVNxbCkpCgkJewoJCQkkZmlsdGVycyA9ICR0aGlzLT5hZGRGaWx0ZXIoJGZpbHRlcnMsICRidW5kbGVzV2hlcmVTcWwpOwoJCX0KCQkKCQkvLyBjdXN0b20gZmllbGRzCgkJaWYoIWVtcHR5KCRjdXN0b21GaWVsZFdoZXJlU3FsKSkKCQl7CgkJCSRmaWx0ZXJzID0gJHRoaXMtPmFkZEZpbHRlcigkZmlsdGVycywgJGN1c3RvbUZpZWxkV2hlcmVTcWwpOwoJCX0KCQkKCQlpZighZW1wdHkoJGN1c3RvbUZpZWxkV2hlcmVTcWwyKSkKCQl7CgkJCSRmaWx0ZXJzID0gJHRoaXMtPmFkZEZpbHRlcigkZmlsdGVycywgJGN1c3RvbUZpZWxkV2hlcmVTcWwyKTsKCQl9CgkJCgkJJHNxbFdoZXJlID0gIiBXSEVSRSB1LklEID0gbW11LndwX3VzZXJfaWQiOwoJCQoJCWlmKCRmaWx0ZXJzICE9ICIiKSAKCQl7CgkJCSRzcWxXaGVyZSAuPSAiIEFORCAiLiRmaWx0ZXJzOwoJCX0KCgkJJHNvcnRUYWJsZU5hbWUgPSAoaW5fYXJyYXkoJGRnLT5zb3J0QnksICRtbVVzZXJEYXRhQ29sdW1ucykpID8gIm1tdSIgOiAidSI7CgkJaWYoaXNzZXQoJGRnLT5zb3J0QnkpICYmICFpc19udWxsKCRkZy0+c29ydEJ5KSAmJiAhZW1wdHkoJGRnLT5zb3J0QnkpKSAKCQl7CgkJCSRzcWxHcm91cEJ5ID0gIiBPUkRFUiBCWSB7JHNvcnRUYWJsZU5hbWV9LnskZGctPnNvcnRCeX0geyRkZy0+c29ydERpcn0gIjsKCQl9CgkJCgkJJHNxbFJlc3VsdENvdW50ID0gInNlbGVjdCBjb3VudChkaXN0aW5jdCB1LklEKSBhcyB0b3RhbCAiOwoJCSRzcWxSZXN1bHRDb3VudCAuPSAkc3FsRnJvbTsKCQkkc3FsUmVzdWx0Q291bnQgLj0gJHNxbFdoZXJlOwoJCQoJCSRjb3VudFJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWxSZXN1bHRDb3VudCk7CgkJCgkJaWYoJGNvdW50Um93LT50b3RhbCA+IDApIAoJCXsKCQkJJHNxbCA9ICJzZWxlY3QgdS5pZCwgJ3skY291bnRSb3ctPnRvdGFsfScgYXMgdG90YWwsIHUudXNlcl9yZWdpc3RlcmVkLCB1LnVzZXJfZW1haWwsICI7CgkJCSRzcWwgLj0gIm1tdS5tZW1iZXJzaGlwX2xldmVsX2lkLCBtbXUuc3RhdHVzLCBtbXUuZmlyc3RfbmFtZSwgbW11Lmxhc3RfbmFtZSwgbW11LnBob25lLCBtbXUubGFzdF9sb2dpbl9kYXRlLCBtbXUuc3RhdHVzX3VwZGF0ZWQgIjsKCQkJaWYoJGRvR2VuZXJhdGVDc3YpCgkJCXsKCQkJCSRzcWwgLj0gIiwgbW11LmJpbGxpbmdfYWRkcmVzczEsIG1tdS5iaWxsaW5nX2NpdHksIG1tdS5iaWxsaW5nX3N0YXRlLCBtbXUuYmlsbGluZ19wb3N0YWxfY29kZSwgbW11LmJpbGxpbmdfY291bnRyeSAiOwoJCQkJJHNxbCAuPSAiLCBtbXUuc2hpcHBpbmdfYWRkcmVzczEsIG1tdS5zaGlwcGluZ19jaXR5LCBtbXUuc2hpcHBpbmdfc3RhdGUsIG1tdS5zaGlwcGluZ19wb3N0YWxfY29kZSwgbW11LnNoaXBwaW5nX2NvdW50cnksIG1tdS5leHBpcmF0aW9uX2RhdGUgIjsKCQkJfQoJCQkkc3FsIC49ICIgIi4kY3VzdG9tRmllbGRDb2x1bW5TcWw7CgkJCSRzcWwgLj0gIiAiLiRjdXN0b21GaWVsZENvbHVtblNxbDI7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gYXJyYXkoKTsKCQl9CgkJCgkJJHNxbCAuPSAkc3FsRnJvbTsKCQkkc3FsIC49ICRzcWxXaGVyZTsKCQkkc3FsIC49ICRzcWxHcm91cEJ5OwoJCQoJCWlmKCEkZG9HZW5lcmF0ZUNzdikKCQl7CgkJCSRzcWwgLj0gJGRnLT5nZXRMaW1pdFNxbCgpOwoJCQkkYmF0Y2hfc2l6ZSA9ICRkZy0+cmVzdWx0U2l6ZTsKCQl9CgkJZWxzZSAKCQl7CgkJCSRiYXRjaF9zaXplID0gNTA7IC8vbGFyZ2VyIGJhdGNoIHNob3VsZCBiZSBtb3JlIGVmZmljaWVudCBmb3IgZnVsbCByZXN1bHQgc2V0cwkKCQl9CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCwgT0JKRUNUX0spOwoJCQoJCS8vIEV4ZWN1dGUgYWRkaXRpb25hbCBzdWItcXVlcmllcyBvbiB0aGUgcmVzdWx0IHNldCBpbiBiYXRjaGVzCgkJJGk9MDsKCQkkaWRfYmF0Y2ggPSBhcnJheSgpOwoJCWZvcmVhY2ggKCRyb3dzIGFzICRpZD0+JG1lbWJlcikKCQl7CgkJCSRpZF9iYXRjaFtdID0gJGlkOwoJCQlpZiAoKCsrJGkpID49ICRiYXRjaF9zaXplKSAKCQkJewoJCQkJJHVzZXJJZHMgPSBpbXBsb2RlKCIsIiwkaWRfYmF0Y2gpOwoJCQkJJHNxbCA9ICR0aGlzLT5idWlsZEFwcGxpZWRCdW5kbGVzU1FMKCR1c2VySWRzLCAkYnVuZGxlSWRzKTsKCQkJCSRiYXRjaFJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCwgQVJSQVlfQSk7CgkJCQlmb3JlYWNoICgkYmF0Y2hSb3dzIGFzICRiYXRjaFJvd051bT0+JGJhdGNoSW5mbykKCQkJCXsKCQkJCQkkbWVtYmVySWQgPSAkYmF0Y2hJbmZvWydhY2Nlc3NfdHlwZV9pZCddOwoJCQkJCWZvcmVhY2ggKCRiYXRjaEluZm8gYXMgJHByb3BOYW1lPT4kcHJvcFZhbHVlKQoJCQkJCXsKCQkJCQkJJHJvd3NbJG1lbWJlcklkXS0+JHByb3BOYW1lID0gJHByb3BWYWx1ZTsKCQkJCQl9CgkJCQl9CgkJCQkkaWRfYmF0Y2ggPSBhcnJheSgpOwoJCQl9CgkJfQoJCQoJCWlmICghZW1wdHkoJGlkX2JhdGNoKSkKCQl7CgkJCSR1c2VySWRzID0gaW1wbG9kZSgiLCIsJGlkX2JhdGNoKTsKCQkJJHNxbCA9ICR0aGlzLT5idWlsZEFwcGxpZWRCdW5kbGVzU1FMKCR1c2VySWRzLCAkYnVuZGxlSWRzKTsKCQkJJGJhdGNoUm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsLCBBUlJBWV9BKTsKCQkJZm9yZWFjaCAoJGJhdGNoUm93cyBhcyAkYmF0Y2hSb3dOdW09PiRiYXRjaEluZm8pCgkJCXsKCQkJCSRtZW1iZXJJZCA9ICRiYXRjaEluZm9bJ2FjY2Vzc190eXBlX2lkJ107CgkJCQlmb3JlYWNoICgkYmF0Y2hJbmZvIGFzICRwcm9wTmFtZT0+JHByb3BWYWx1ZSkKCQkJCXsKCQkJCQkkcm93c1skbWVtYmVySWRdLT4kcHJvcE5hbWUgPSAkcHJvcFZhbHVlOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBhcnJheV92YWx1ZXMoJHJvd3MpOwoJfQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgdGhlIFNRTCB0byBleGVjdXRlIHRvIGdldCB0aGUgYnVuZGxlcyBhcHBsaWVkIHRvIGEgcGFydGljdWxhciBzZXQgb2YgdXNlcnMuIAoJICogSWYgdGhlICRidW5kbGVJZHMgcGFyYW1ldGVyIGlzIHNldCwgaXQgd2lsbCBhbHNvIGxpbWl0IHRoZSByZXN1bHRzIHRvIGEgc3BlY2lmaWMgZ3JvdXAgb2YgYnVuZGxlcy4KCSAqIEBwYXJhbSBTdHJpbmcgJHVzZXJJZHMgY29tbWEtZGVsaW1pYXRlZCBsaXN0IG9mIHVzZXIgSURzIAoJICogQHBhcmFtIFN0cmluZyAkYnVuZGxlSWRzIGNvbW1hLWRlbGltaW5hdGVkIGxpc3Qgb2YgYnVuZGxlIElEcwoJICovCglwcml2YXRlIGZ1bmN0aW9uIGJ1aWxkQXBwbGllZEJ1bmRsZXNTUUwoJHVzZXJJZHMsICRidW5kbGVJZHMpCgl7CgkJJHNxbCA9ICJTRUxFQ1QgYWNjZXNzX3R5cGVfaWQsIGdyb3VwX2NvbmNhdChidW5kbGVfaWQpIEFTIGJ1bmRsZXMgRlJPTSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUzsKCQkkc3FsIC49ICIgV0hFUkUgKGFjY2Vzc190eXBlID0gJyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIuIicpIEFORCAoYWNjZXNzX3R5cGVfaWQgSU4gKHskdXNlcklkc30pKSAiOwoJCSRzcWwgLj0gIiBBTkQgKHN0YXR1cyA9ICciLk1NX1N0YXR1czo6JEFDVElWRS4iJyBPUiBzdGF0dXMgPSAnIi5NTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTi4iJykgIjsKCQkKCQlpZighZW1wdHkoJGJ1bmRsZUlkcykpCgkJewoJCQkkc3FsIC49ICIgQU5EIChidW5kbGVfaWQgSU4gKHskYnVuZGxlSWRzfSkpICI7CgkJfQoJCQoJCSRzcWwgLj0gIiBHUk9VUCBCWSBhY2Nlc3NfdHlwZV9pZDsiOwoJCXJldHVybiAkc3FsOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGFkZEZpbHRlcigkZmlsdGVycywgJG5ld0ZpbHRlcikgCgl7CgkJaWYoJGZpbHRlcnMgPT0gIiIpIHsKCQkJJGZpbHRlcnMgPSAiICIuJG5ld0ZpbHRlcjsKCQl9CgkJZWxzZSBpZigkbmV3RmlsdGVyICE9ICIiKSB7CgkJCSRmaWx0ZXJzIC49ICIgQU5EICIuJG5ld0ZpbHRlcjsKCQl9CgkJCgkJcmV0dXJuICRmaWx0ZXJzOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHN0b3JlU2VhcmNoU3RhdGUoJHBvc3QpIAoJewoJCWlmKGlzc2V0KCRwb3N0WyJtbV9zaG93X3NlYXJjaCJdKSkgCgkJewoJCQlpZihpc3NldCgkcG9zdFsibW1fYWRtaW5faWQiXSkpCgkJCXsKCQkJCSRvcHRpb25OYW1lID0gTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1NIT1dfTUJSU19TRUFSQ0guIi0iLiRwb3N0WyJtbV9hZG1pbl9pZCJdOwoJCQkJTU1fT3B0aW9uVXRpbHM6OnNldE9wdGlvbigkb3B0aW9uTmFtZSwgJHBvc3RbIm1tX3Nob3dfc2VhcmNoIl0pOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHN0b3JlIHNlYXJjaCBzdGF0ZS4gQ291bGRuJ3QgZmluZCBjdXJyZW50IHVzZXIgSUQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHN0b3JlIHNlYXJjaCBzdGF0ZS4gTWlzc2luZyBjdXJyZW50IHN0YXRlIHZhbHVlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNyZWF0ZU1lbWJlcigkcG9zdCkgCgl7CgkJaWYoaXNzZXQoJHBvc3RbIm1tX25ld19tZW1iZXJzaGlwIl0pICYmIGlzc2V0KCRwb3N0WyJtbV9uZXdfZW1haWwiXSkpCgkJewoJCQkkbWVtYmVyc2hpcCA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJHBvc3RbIm1tX25ld19tZW1iZXJzaGlwIl0pOwoJCQlpZighJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgbWVtYmVyLiBNZW1iZXJzaGlwIGxldmVsIHdpdGggSUQgJ3skcG9zdFsibW1fbmV3X21lbWJlcnNoaXAiXX0nIGlzIGludmFsaWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCSR1c2VyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJHBvc3RbIm1tX25ld19lbWFpbCJdKTsKCQkJCgkJCWlmKCEkdXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCk7CgkJCQkkdXNlci0+c2V0U3RhdHVzKE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTik7CgkJCQkkdXNlci0+c2V0U3RhdHVzTWVzc2FnZSgiQ3VzdG9tZXIgYWNjb3VudCBjcmVhdGVkIGJ5IGFkbWluaXN0cmF0b3IgdXNpbmcgdGhlIENyZWF0ZSBNZW1iZXIgdG9vbCBidXQgbm90IGNvbXBsZXRlZC4iKTsKCQkJfQoJCQkKCQkJJHVzZXItPnNldEVtYWlsKCRwb3N0WyJtbV9uZXdfZW1haWwiXSk7CgkJCQoJCQlpZihpc3NldCgkcG9zdFsibW1fbmV3X2ZpcnN0X25hbWUiXSkpCgkJCXsKCQkJCSR1c2VyLT5zZXRGaXJzdE5hbWUoJHBvc3RbIm1tX25ld19maXJzdF9uYW1lIl0pOwoJCQl9CgkJCQoJCQlpZihpc3NldCgkcG9zdFsibW1fbmV3X2xhc3RfbmFtZSJdKSkKCQkJewoJCQkJJHVzZXItPnNldExhc3ROYW1lKCRwb3N0WyJtbV9uZXdfbGFzdF9uYW1lIl0pOwoJCQl9CgkJCQoJCQlpZihpc3NldCgkcG9zdFsibW1fbmV3X3Bob25lIl0pKQoJCQl7CgkJCQkkdXNlci0+c2V0UGhvbmUoJHBvc3RbIm1tX25ld19waG9uZSJdKTsKCQkJfQoJCQkKCQkJaWYoaXNzZXQoJHBvc3RbIm1tX25ld19wYXNzd29yZCJdKSkKCQkJewoJCQkJJHVzZXItPnNldFBhc3N3b3JkKCRwb3N0WyJtbV9uZXdfcGFzc3dvcmQiXSk7CgkJCX0KCQkJCgkJCSRyZXN1bHQgPSAkdXNlci0+Y29tbWl0RGF0YSgpOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJewoJCQkJcmV0dXJuIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbk1lbWJlcnNoaXBUb1VzZXIoJHVzZXIsICRtZW1iZXJzaGlwKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiAkcmVzdWx0OwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIG1lbWJlci4gTWVtYmVyc2hpcCBsZXZlbCBhbmQgZW1haWwgYWRkcmVzcyBhcmUgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHJlbW92ZU1lbWJlcigkcG9zdCkgCgl7CgkJJHVzZXIgPSBuZXcgTU1fVXNlcigkcG9zdFsiaWQiXSk7CgkJCgkJaWYoJHVzZXItPmlzVmFsaWQoKSkgCgkJewoJCQkkcmVzdWx0ID0gJHVzZXItPmRlbGV0ZSgpOwoJCQkKCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBkZWxldGUgbWVtYmVyLiBObyBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZVNlYXJjaEZvcm0oJHBvc3Q9bnVsbCkKCXsKCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9tZW1iZXJzLmZvcm0ucGhwIiwgJHBvc3QpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVEYXRhR3JpZCgkcG9zdD1udWxsKQoJewoJCXJldHVybiBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iL21lbWJlcnMuZGF0YWdyaWQucGhwIiwgJHBvc3QpOwoJfQogfQo=', 0, '2018-11-21 06:38:54'),
(126, 'paymentsettingsview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUGF5bWVudFNldHRpbmdzVmlldyBleHRlbmRzIE1NX1JCQUNBZG1pblZpZXcKewoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0FWRV9QQVlNRU5UX09QVElPTlMgPSAic2F2ZVBheW1lbnRPcHRpb25zIjsKCQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUFJPQ0VTU19JTlRFUk1FRElBVEVfQUNUSU9OID0gInByb2Nlc3NJbnRlcm1lZGlhdGVBY3Rpb24iOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkKCXsKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0FWRV9QQVlNRU5UX09QVElPTlM6CgkJCQkJcmV0dXJuICR0aGlzLT5zYXZlUGF5bWVudE9wdGlvbnMoJHBvc3QpOwoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUFJPQ0VTU19JTlRFUk1FRElBVEVfQUNUSU9OOgoJCQkJCSRjaGVjayA9ICR0aGlzLT5wcm9jZXNzSW50ZXJtZWRpYXRlQWN0aW9uKCRwb3N0KTsKCQkJCQlyZXR1cm4gJGNoZWNrOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBzYXZlUGF5bWVudE9wdGlvbnMgcmVjZWl2ZXMgdGhlIGNvbmZpZ3VyYXRpb24gc2V0dGluZ3MgZnJvbSB0aGUgaW50ZWdyYXRpb25zIHBhZ2UgKHBheW1lbnQgc2VydmljZXMgc2V0dGluZ3MpIGFuZCBpdGVyYXRlcyB0aHJvdWdoIHRoZSBwYXltZW50cyBzZXJ2aWNlcywgCgkgKiBjYWxsaW5nIHByb2Nlc3NDb25maWdPcHRpb25zIG9uIGVhY2ggb25lLCBhbGxvd2luZyB0aGVtIHRvIHNhdmUgdGhlaXIgY29uZmlndXJhdGlvbiBzZXR0aW5ncwoJICogCgkgKiBAcGFyYW0gQXJyYXkgJHBvc3QgQW4gYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSBmcm9tIHRoZSBwYXltZW50IHNlcnZpY2VzIHNldHRpbmdzIHBhZ2UKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzYXZlUGF5bWVudE9wdGlvbnMoJHBvc3QpCgl7CgkJLy9jbGVhciB0aGUgb2JqZWN0IGNhY2hlLCBzaW5jZSB0aGlzIGFjdGlvbiBpbnZhbGlkYXRlcyBpdAoJCU1NX09iamVjdENhY2hlOjpkZWxldGUoTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjokQVZBSUxBQkxFX1NFUlZJQ0VTX0NBQ0hFX0tFWSk7CgkJCgkJaWYgKGlzc2V0KCRwb3N0WydvbnNpdGVfcGF5bWVudF9zZXJ2aWNlJ10pKQoJCXsKCQkJJGF2YWlsYWJsZVBheW1lbnRTZXJ2aWNlcyA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2VzQXJyYXkoKTsKCQkJZm9yZWFjaCAoJGF2YWlsYWJsZVBheW1lbnRTZXJ2aWNlcyBhcyAkYVNlcnZpY2UpCgkJCXsKCQkJCSRyZXNwb25zZSA9ICRhU2VydmljZS0+cHJvY2Vzc0NvbmZpZ09wdGlvbnMoJHBvc3QpOwoJCQkJaWYgKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGFTZXJ2aWNlLT5nZXROYW1lKCkuIjoiLiRyZXNwb25zZS0+bWVzc2FnZSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJCWlmICgkcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQkJCXsKCQkJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCQkJfQoJCQl9CgkJCS8vaWYgd2UgcmVhY2ggdGhpcyBwb2ludCwgYWxsIHRoZSBjb25maWcgb3B0aW9ucyB3ZXJlIHByb2Nlc3NlZCBzdWNjZXNzZnVsbHkKCQkJJHRvdGFsX3Jlc3BvbnNlID0gIiI7CgkJCWZvcmVhY2ggKCRhdmFpbGFibGVQYXltZW50U2VydmljZXMgYXMgJGFTZXJ2aWNlKQoJCQl7CgkJCQkkcmVzcG9uc2UgPSAkYVNlcnZpY2UtPmNvbW1pdERhdGEoKTsKCQkJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzcG9uc2UpKQoJCQkJewoJCQkJCSR0b3RhbF9yZXNwb25zZSAuPSAoJGFTZXJ2aWNlLT5nZXROYW1lKCkuIjoiLiRyZXNwb25zZS0+bWVzc2FnZS4iXG4iKTsKCQkJCX0KCQkJfQoJCQkKCQkJaWYgKCR0b3RhbF9yZXNwb25zZSAhPSAiIikKCQkJewoJCQkJLy90aGlzIG1lYW5zIGF0IGxlYXN0IG9uZSBzZXJ2aWNlIGhhZCBwcm9ibGVtcyBkdXJpbmcgY29tbWl0LCBwYXNzIGJhY2sgdGhlIGVycm9yIG1lc3NhZ2VzCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCR0b3RhbF9yZXNwb25zZSwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJLy9yZWFjaGluZyBoZXJlIG1lYW5zIGFsbCBzZXJ2aWNlcyBjb21taXR0ZWQgc3VjY2Vzc2Z1bGx5CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlBheW1lbnQgbWV0aG9kIHNldHRpbmdzIHNhdmVkIHN1Y2Nlc3NmdWxseSIpOwoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGVyZSB3YXMgYW4gZXJyb3Igc2F2aW5nIHBheW1lbnQgbWV0aG9kIHNldHRpbmdzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQoJCgkvKioKCSAqIHByb2Nlc3NJbnRlcm1lZGlhdGVBY3Rpb24gaXMgbWVhbnQgdG8gYWxsb3cgYSBjaGFubmVsIG9mIGNvbW11bmljYXRpb24gdG8gdGhlIHBheW1lbnQgc2VydmljZSBjbGFzc2VzIHByaW9yIHRvIGNvbmZpZ3VyYXRpb24gYmVpbmcgY29tcGxldGVkCgkgKiBBbiBleGFtcGxlIHVzZSBjYXNlIG9mIHRoaXMgbWlnaHQgYmUgYSBzZXJ2aWNlIHRoYXQgcmVxdWlyZXMgYSB1c2VybmFtZSBhbmQgcGFzc3dvcmQsIGFuZCB0aGVuIHJlcXVpcmVzIHRoZSB1c2VyIHRvIHNlbGVjdCBmcm9tIG11bHRpcGxlIGFjY291bnRzIGFzc29jaWF0ZWQKCSAqIHdpdGggdGhhdCB1c2VybmFtZSBhbmQgcGFzc3dvcmQuIFRoaXMgbWV0aG9kIHdvdWxkIHNlbmQgdGhlIHVuL3B3IHRvIHRoZSBwYXltZW50IHNlcnZpY2UsIHdoaWNoIHdvdWxkIHRoZW4gY29ubmVjdCB0byB0aGUgcmVtb3RlIHNlcnZlciBhbmQgcmV0cmlldmUgYSBsaXN0IG9mIGFjY291bnRzLAoJICogd2hpY2ggd291bGQgdGhlbiBiZSByZXR1cm5lZCB0byB0aGUgVUkgd2hlcmUgdGhleSBhcmUgcHJlc2VudGVkIGluIGEgZHJvcGRvd24KCSAqIAoJICogQHBhcmFtIEFycmF5ICRwb3N0IEFuIGFycmF5IG9mIHBvc3RlZCBkYXRhIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgY29uZmlndXJhdGlvbiBmb3JtIG9mIHRoZSBwYXltZW50IHNlcnZpY2UgcmVxdWVzdGluZyB0aGUgYWN0aW9uCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCBjb250YWluaW5nIGFueSByZXF1ZXN0ZWQgZGF0YSBvbiBzdWNjZXNzLCBvciBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2Ugb24gZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc0ludGVybWVkaWF0ZUFjdGlvbigkcG9zdCkKCXsKCQlpZiAoIWlzX2FycmF5KCRwb3N0KSB8fCAhaXNzZXQoJHBvc3RbJ3Rva2VuJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3I6IGltcHJvcGVyIHJlcXVlc3Qgc2VudCB0byBwcm9jZXNzSW50ZXJtZWRpYXRlQWN0aW9uIixNTV9SZXNwb25zZTo6JEVSUk9SKTsgLy9pbXByb3BlciBjb25maWd1cmF0aW9uCgkJfQoJCQoJCSRzZXJ2aWNlID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRQYXltZW50U2VydmljZShzdHJ0b3VwcGVyKCRwb3N0Wyd0b2tlbiddKSk7CgkJaWYgKCgkc2VydmljZSA9PW51bGwpIHx8ICEoJHNlcnZpY2UgaW5zdGFuY2VvZiBNTV9QYXltZW50U2VydmljZSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJwcm9jZXNzSW50ZXJtZWRpYXRlQWN0aW9uIGVycm9yOiBzZXJ2aWNlIG5vdCBmb3VuZCAtIHskcG9zdFsndG9rZW4nXX0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOyAvL2ltcHJvcGVyIGNvbmZpZ3VyYXRpb24KCQl9CgkJCgkJcmV0dXJuICgkc2VydmljZS0+cHJvY2Vzc0ludGVybWVkaWF0ZUFjdGlvbigkcG9zdCkpOwkJCgl9CgkKfQo=', 0, '2018-11-21 06:38:54'),
(127, 'pushnotificationview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1B1c2hOb3RpZmljYXRpb25WaWV3IGV4dGVuZHMgTU1fUkJBQ0FkbWluVmlldwp7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TRU5EX1RFU1RfTk9USUZZID0gInNlbmRUZXN0Tm90aWZpY2F0aW9uIjsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZU5vdGlmaWNhdGlvbigkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRU1PVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5yZW1vdmVOb3RpZmljYXRpb24oJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0VORF9URVNUX05PVElGWToKCQkJCQlyZXR1cm4gJHRoaXMtPnNlbmRUZXN0Tm90aWZpY2F0aW9uKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzZW5kVGVzdE5vdGlmaWNhdGlvbigkcG9zdCkKCXsgCgkJaWYoIWlzc2V0KCRwb3N0WyJhY3Rpb25faWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJBY3Rpb24gSUQgaXMgcmVxdWlyZWQgdG8gc2VuZCBhIHRlc3Qgbm90aWZpY2F0aW9uIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRhY3Rpb24gPSBuZXcgTU1fQWN0aW9uKCRwb3N0WyJhY3Rpb25faWQiXSk7CgkJCgkJaWYoJGFjdGlvbi0+aXNWYWxpZCgpKQoJCXsKCQkJc3dpdGNoKCRhY3Rpb24tPmdldEV2ZW50VHlwZSgpKQoJCQl7CgkJCQljYXNlIE1NX0V2ZW50OjokUFJPRFVDVF9QVVJDSEFTRToKCQkJCQkkdXNlclByb2R1Y3REYXRhID0gTU1fRXZlbnQ6OnBhY2thZ2VQcm9kdWN0RGF0YShNTV9Qcm9kdWN0OjokU0FNUExFX1BST0RVQ1RfSUQsIE1NX1VzZXI6OiRTQU1QTEVfVVNFUl9JRCwgTU1fT3JkZXI6OiRTQU1QTEVfT1JERVJfSUQsIDExMSk7CgkJCQkJJGV2ZW50QXR0cmlidXRlcyA9ICRhY3Rpb24tPmdldEV2ZW50QXR0cmlidXRlcygpOwoJCQkJCWlmKGlzX2FycmF5KCRldmVudEF0dHJpYnV0ZXMpICYmIGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbInByb2R1Y3RfaWQiXSkgJiYgaW50dmFsKCRldmVudEF0dHJpYnV0ZXNbInByb2R1Y3RfaWQiXSkgPiAwKQoJCQkJCXsKCQkJCQkJJHVzZXJQcm9kdWN0RGF0YVsicHJvZHVjdF9pZCJdID0gJGV2ZW50QXR0cmlidXRlc1sicHJvZHVjdF9pZCJdOwoJCQkJCX0KCQkJCQlkb19hY3Rpb24oJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCksICR1c2VyUHJvZHVjdERhdGEpOwoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfQUREOgoJCQkJCSR1c2VyRGF0YSA9IE1NX0V2ZW50OjpwYWNrYWdlTWVtYmVyRGF0YShNTV9Vc2VyOjokU0FNUExFX1VTRVJfSUQpOwoJCQkJCQoJCQkJCSRldmVudEF0dHJpYnV0ZXMgPSAkYWN0aW9uLT5nZXRFdmVudEF0dHJpYnV0ZXMoKTsKCQkJCQlpZihpc19hcnJheSgkZXZlbnRBdHRyaWJ1dGVzKSAmJiBpc3NldCgkZXZlbnRBdHRyaWJ1dGVzWyJtZW1iZXJzaGlwX2xldmVsX2lkIl0pICYmIGludHZhbCgkZXZlbnRBdHRyaWJ1dGVzWyJtZW1iZXJzaGlwX2xldmVsX2lkIl0pID4gMCkKCQkJCQl7CgkJCQkJCSR1c2VyRGF0YVsibWVtYmVyc2hpcF9sZXZlbCJdID0gJGV2ZW50QXR0cmlidXRlc1sibWVtYmVyc2hpcF9sZXZlbF9pZCJdOwoJCQkJCQkKCQkJCQkJJG1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRldmVudEF0dHJpYnV0ZXNbIm1lbWJlcnNoaXBfbGV2ZWxfaWQiXSk7CgkJCQkJCSR1c2VyRGF0YVsibWVtYmVyc2hpcF9sZXZlbF9uYW1lIl0gPSAkbWVtYmVyc2hpcC0+Z2V0TmFtZSgpOwoJCQkJCX0KCQkJCQkKCQkJCQlkb19hY3Rpb24oJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCksICR1c2VyRGF0YSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCWJyZWFrOwoKCQkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfU1RBVFVTX0NIQU5HRToKCQkJCQkkdXNlckRhdGEgPSBNTV9FdmVudDo6cGFja2FnZU1lbWJlckRhdGEoTU1fVXNlcjo6JFNBTVBMRV9VU0VSX0lEKTsKCQkJCQkKCQkJCQkkZXZlbnRBdHRyaWJ1dGVzID0gJGFjdGlvbi0+Z2V0RXZlbnRBdHRyaWJ1dGVzKCk7CgkJCQkJaWYoaXNfYXJyYXkoJGV2ZW50QXR0cmlidXRlcykgJiYgaXNzZXQoJGV2ZW50QXR0cmlidXRlc1sic3RhdHVzX2lkIl0pICYmIGludHZhbCgkZXZlbnRBdHRyaWJ1dGVzWyJzdGF0dXNfaWQiXSkgPiAwKQoJCQkJCXsKCQkJCQkJJHVzZXJEYXRhWyJzdGF0dXMiXSA9ICRldmVudEF0dHJpYnV0ZXNbInN0YXR1c19pZCJdOwoJCQkJCQkkdXNlckRhdGFbInN0YXR1c19uYW1lIl0gPSBNTV9TdGF0dXM6OmdldE5hbWUoJGV2ZW50QXR0cmlidXRlc1sic3RhdHVzX2lkIl0pOwoJCQkJCX0KCQkJCQlkb19hY3Rpb24oJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCksICR1c2VyRGF0YSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfQUNDT1VOVF9VUERBVEU6CgkJCQljYXNlIE1NX0V2ZW50OjokTUVNQkVSX0RFTEVURToKCQkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfTUVNQkVSU0hJUF9DSEFOR0U6CgkJCQkJZG9fYWN0aW9uKCRhY3Rpb24tPmdldEV2ZW50VHlwZSgpLCBNTV9FdmVudDo6cGFja2FnZU1lbWJlckRhdGEoTU1fVXNlcjo6JFNBTVBMRV9VU0VSX0lEKSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBNTV9FdmVudDo6JEJVTkRMRV9BREQ6CgkJCQkJJGJ1bmRsZURhdGEgPSBNTV9FdmVudDo6cGFja2FnZUJ1bmRsZURhdGEoTU1fVXNlcjo6JFNBTVBMRV9VU0VSX0lELCBNTV9BcHBsaWVkQnVuZGxlOjokU0FNUExFX0FQUExJRURfQlVORExFX0lEKTsKCQkJCQkJCgkJCQkJJGV2ZW50QXR0cmlidXRlcyA9ICRhY3Rpb24tPmdldEV2ZW50QXR0cmlidXRlcygpOwoJCQkJCWlmKGlzX2FycmF5KCRldmVudEF0dHJpYnV0ZXMpICYmIGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbImJ1bmRsZV9pZCJdKSAmJiBpbnR2YWwoJGV2ZW50QXR0cmlidXRlc1siYnVuZGxlX2lkIl0pID4gMCkKCQkJCQl7CgkJCQkJCSRidW5kbGVEYXRhWyJidW5kbGVfaWQiXSA9ICRldmVudEF0dHJpYnV0ZXNbImJ1bmRsZV9pZCJdOwoJCQkJCQkkYnVuZGxlID0gbmV3IE1NX0J1bmRsZSgkZXZlbnRBdHRyaWJ1dGVzWyJidW5kbGVfaWQiXSk7CgkJCQkJCSRidW5kbGVEYXRhWyJidW5kbGVfbmFtZSJdID0gJGJ1bmRsZS0+Z2V0TmFtZSgpOwoJCQkJCX0KCQkJCQlkb19hY3Rpb24oJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCksICRidW5kbGVEYXRhKTsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIE1NX0V2ZW50OjokQlVORExFX1NUQVRVU19DSEFOR0U6CgkJCQkJJGJ1bmRsZURhdGEgPSBNTV9FdmVudDo6cGFja2FnZUJ1bmRsZURhdGEoTU1fVXNlcjo6JFNBTVBMRV9VU0VSX0lELCBNTV9BcHBsaWVkQnVuZGxlOjokU0FNUExFX0FQUExJRURfQlVORExFX0lEKTsKCQkJCQkJCgkJCQkJJGV2ZW50QXR0cmlidXRlcyA9ICRhY3Rpb24tPmdldEV2ZW50QXR0cmlidXRlcygpOwoJCQkJCWlmKGlzX2FycmF5KCRldmVudEF0dHJpYnV0ZXMpICYmIGlzc2V0KCRldmVudEF0dHJpYnV0ZXNbInN0YXR1c19pZCJdKSAmJiBpbnR2YWwoJGV2ZW50QXR0cmlidXRlc1sic3RhdHVzX2lkIl0pID4gMCkKCQkJCQl7CgkJCQkJCSRidW5kbGVEYXRhWyJidW5kbGVfc3RhdHVzIl0gPSAkZXZlbnRBdHRyaWJ1dGVzWyJzdGF0dXNfaWQiXTsKCQkJCQkJJGJ1bmRsZURhdGFbImJ1bmRsZV9zdGF0dXNfbmFtZSJdID0gTU1fU3RhdHVzOjpnZXROYW1lKCRldmVudEF0dHJpYnV0ZXNbInN0YXR1c19pZCJdKTsKCQkJCQl9CgkJCQkJZG9fYWN0aW9uKCRhY3Rpb24tPmdldEV2ZW50VHlwZSgpLCAkYnVuZGxlRGF0YSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBNTV9FdmVudDo6JFBBWU1FTlRfUkVDRUlWRUQ6CgkJCQljYXNlIE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTEw6CgkJCQljYXNlIE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTExfREVDTElORUQ6CgkJCQljYXNlIE1NX0V2ZW50OjokUkVGVU5EX0lTU1VFRDoKCQkJCQlkb19hY3Rpb24oJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCksIE1NX0V2ZW50OjpwYWNrYWdlT3JkZXJEYXRhKE1NX1VzZXI6OiRTQU1QTEVfVVNFUl9JRCwgTU1fT3JkZXI6OiRTQU1QTEVfT1JERVJfSUQsIDExMSwgMTExMSkpOwoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgTU1fRXZlbnQ6OiRDT01NSVNTSU9OX0lOSVRJQUw6CgkJCQljYXNlIE1NX0V2ZW50OjokQ09NTUlTU0lPTl9SRUJJTEw6CgkJCQljYXNlIE1NX0V2ZW50OjokQ0FOQ0VMX0NPTU1JU1NJT046CgkJCQkJJGNvbW1pc3Npb25Qcm9maWxlID0gTU1fQ29tbWlzc2lvblByb2ZpbGU6OmdldERlZmF1bHRDb21taXNzaW9uUHJvZmlsZSgpOwoJCQkJCSRvcmRlckRhdGEgPSBNTV9FdmVudDo6cGFja2FnZU9yZGVyRGF0YShNTV9Vc2VyOjokU0FNUExFX1VTRVJfSUQsIE1NX09yZGVyOjokU0FNUExFX09SREVSX0lELCAxMTEsIDExMTEpOwoJCQkJCSRpc1JlYmlsbCA9ICgkYWN0aW9uLT5nZXRFdmVudFR5cGUoKSA9PSBNTV9FdmVudDo6JENPTU1JU1NJT05fUkVCSUxMKSA/IHRydWUgOiBmYWxzZTsKCQkJCQlkb19hY3Rpb24oJGFjdGlvbi0+Z2V0RXZlbnRUeXBlKCksIE1NX0V2ZW50OjpwYWNrYWdlQWZmaWxpYXRlRGF0YSgkY29tbWlzc2lvblByb2ZpbGUsICJzYW1wbGVhZmZpbGlhdGUiLCAiMTAwMC0xMjQiLCAiMTAwLjAwIiwgJG9yZGVyRGF0YSwgJGlzUmViaWxsKSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFdmVudCAneyRhY3Rpb24tPmdldEV2ZW50VHlwZSgpfScgaXMgbm90IHN1cHBvcnRlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgYWN0aW9uIHBhc3NlZC4gQ291bGQgbm90IGV4ZWN1dGUgdGVzdCBub3RpZmljYXRpb24uIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfSAKCQoJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKE1NX0RhdGFHcmlkICRkZykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHJvd3MgPSBwYXJlbnQ6OmdldERhdGEoTU1fVEFCTEVfQUNUSU9OUywgbnVsbCwgJGRnKTsKCQlyZXR1cm4gJHJvd3M7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc2F2ZU5vdGlmaWNhdGlvbigkcG9zdCkKCXsKCQkkYWN0aW9uID0gbmV3IE1NX0FjdGlvbigpOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJtbV9hY3Rpb25faWQiXSkgJiYgaW50dmFsKCRwb3N0WyJtbV9hY3Rpb25faWQiXSkgPiAwKQoJCXsKCQkJJGFjdGlvbi0+c2V0SWQoJHBvc3RbIm1tX2FjdGlvbl9pZCJdKTsKCQl9CgkJIAoJCSRldmVudFR5cGUgPSAkcG9zdFsibW1fZXZlbnRfdHlwZSJdOwoJCSRhY3Rpb24tPnNldEV2ZW50VHlwZSgkZXZlbnRUeXBlKTsKCQkkYWN0aW9uLT5zZXRBY3Rpb25UeXBlKCRwb3N0WyJtbV9hY3Rpb25fdHlwZSJdKTsKCQkkYWN0aW9uLT5zZXRTdGF0dXMoJHBvc3RbIm1tX2FjdGlvbl9zdGF0dXMiXSk7CgkJCgkJaWYoJHBvc3RbIm1tX2FjdGlvbl90eXBlIl0gPT0gTU1fQWN0aW9uOjokTU1fQUNUSU9OX1NFTkRfRU1BSUwpCgkJewoJCQkkZW1haWxUb0lkID0gJHBvc3RbIm1tX3NlbmRfZW1haWxfdG8iXTsKCQkJJGVtYWlsRnJvbUlkID0gJHBvc3RbIm1tX3NlbmRfZW1haWxfZnJvbSJdOwoJCQkkZW1haWxDQyA9IHRyaW0oJHBvc3RbIm1tX3NlbmRfZW1haWxfY2MiXSk7CgkJCSRlbWFpbFN1YmplY3QgPSAkcG9zdFsibW1fc2VuZF9lbWFpbF9zdWJqZWN0Il07CgkJCSRlbWFpbEJvZHkgPSAkcG9zdFsibW1fc2VuZF9lbWFpbF9ib2R5Il07CgkJIAoJCQkvLyBjaGVjayBlbWFpbCBpZiBub3Qgc2V0IHRvIEN1cnJlbnQgTWVtYmVyCgkJCWlmKCRlbWFpbFRvSWQhPS0xKQoJCQl7CgkJCQkvLyBjaGVjayBlbWFpbCBpcyB2YWxpZCB2aWEgZW1wbG95ZWUgaWQKCQkJCSRlbXBsb3llZSA9IG5ldyBNTV9FbXBsb3llZSgkZW1haWxUb0lkKTsKCQkJCWlmKCRlbXBsb3llZS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRlbWFpbCA9ICRlbXBsb3llZS0+Z2V0RW1haWwoKTsgCgkJCQkJaWYoIU1NX1V0aWxzOjpoYXNWYWxpZEVtYWlsKCRlbWFpbCkpCgkJCQkJewoJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFbXB0eSBvciBpbnZhbGlkIGVtYWlsIHN0cmluZyAiLiRlbWFpbCwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgZW1wbG95ZWUgYWNjb3VudCAiLiRlbWFpbFRvSWQsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCQoJCQkvLyBkb24ndCBmb3JnZXQgdG8gY2hlY2sgdGhlIENDIChpZiBpbmNsdWRlZCkKCQkJaWYoc3RybGVuKCRlbWFpbENDKT4wICYmICFNTV9VdGlsczo6aGFzVmFsaWRFbWFpbCgkZW1haWxDQykpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVtcHR5IG9yIGludmFsaWQgQ0MgZW1haWwgc3RyaW5nICIuJGVtYWlsQ0MsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgoJCQkkc21hcnRUYWdzVmFsaWQgPSAkdGhpcy0+dmFsaWRhdGVTbWFydFRhZ1VzYWdlKCRldmVudFR5cGUsICRlbWFpbEJvZHksICRlbWFpbFN1YmplY3QpOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHNtYXJ0VGFnc1ZhbGlkKSkKCQkJewoJCQkJcmV0dXJuICRzbWFydFRhZ3NWYWxpZDsKCQkJfQoJCQkKCQkJJGFjdGlvbi0+c2V0QWN0aW9uVmFsdWUoTU1fQWN0aW9uOjpwcmVwYXJlU2VuZEVtYWlsVmFsdWUoJGVtYWlsVG9JZCwgJGVtYWlsRnJvbUlkLCAkZW1haWxDQywgJGVtYWlsU3ViamVjdCwgJGVtYWlsQm9keSkpOwoJCX0KCQllbHNlIGlmKCRwb3N0WyJtbV9hY3Rpb25fdHlwZSJdID09IE1NX0FjdGlvbjo6JE1NX0FDVElPTl9OT1RJRllfWkFQSUVSKQoJCXsKCQkJJG1haWxib3ggPSAkcG9zdFsibW1fbm90aWZ5X3phcGllcl9tYWlsYm94Il07CgkJCSRlbWFpbEZyb21JZCA9ICRwb3N0WyJtbV9ub3RpZnlfemFwaWVyX2Zyb20iXTsKCQkJJGFkZGl0aW9uYWxJbmZvID0gJHBvc3RbIm1tX25vdGlmeV96YXBpZXJfYWRkaXRpb25hbF9pbmZvIl07CgoJCQlpZighTU1fVXRpbHM6Omhhc1ZhbGlkRW1haWwoJG1haWxib3gpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFbXB0eSBvciBpbnZhbGlkIGVtYWlsIHN0cmluZy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJJHNtYXJ0VGFnc1ZhbGlkID0gJHRoaXMtPnZhbGlkYXRlU21hcnRUYWdVc2FnZSgkZXZlbnRUeXBlLCAkYWRkaXRpb25hbEluZm8sICIiKTsKCQkJCQoJCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkc21hcnRUYWdzVmFsaWQpKQoJCQl7CgkJCQlyZXR1cm4gJHNtYXJ0VGFnc1ZhbGlkOwoJCQl9CgkJCQoJCQkkYWN0aW9uLT5zZXRBY3Rpb25WYWx1ZShNTV9BY3Rpb246OnByZXBhcmVOb3RpZnlaYXBpZXJWYWx1ZSgkbWFpbGJveCwgJGVtYWlsRnJvbUlkLCAkYWRkaXRpb25hbEluZm8pKTsKCQl9CgkJZWxzZSBpZigkcG9zdFsibW1fYWN0aW9uX3R5cGUiXSA9PSBNTV9BY3Rpb246OiRNTV9BQ1RJT05fQ0FMTF9TQ1JJUFQpCgkJewoJCQkkc2NyaXB0VXJsID0gJHBvc3RbIm1tX3NjcmlwdF91cmwiXTsKCgkJCWlmKCFmaWx0ZXJfdmFyKCRzY3JpcHRVcmwsIEZJTFRFUl9WQUxJREFURV9VUkwpIHx8ICFwcmVnX21hdGNoKCIvXmh0dHBzPzpcL1wvLyIsICRzY3JpcHRVcmwpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFbXB0eSBvciBpbnZhbGlkIFVSTCBzdHJpbmcuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJJGFjdGlvbi0+c2V0QWN0aW9uVmFsdWUoTU1fQWN0aW9uOjpwcmVwYXJlQ2FsbFNjcmlwdFZhbHVlKCRzY3JpcHRVcmwpKTsKCQl9CgkJIAoJCS8vIHNldCBhdHRyaWJ1dGVzCgkJJGF0dHJpYnV0ZXMgPSBhcnJheSgpOwoJCQoJCXN3aXRjaCgkYWN0aW9uLT5nZXRFdmVudFR5cGUoKSkKCQl7CgkJCWNhc2UgTU1fRXZlbnQ6OiRQUk9EVUNUX1BVUkNIQVNFOgoJCQkJJGF0dHJpYnV0ZXNbInByb2R1Y3RfaWQiXSA9ICRwb3N0WyJtbV9wcm9kdWN0X3B1cmNoYXNlX3NlbGVjdG9yIl07CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX0V2ZW50OjokTUVNQkVSX0FERDoKCQkJCSRhdHRyaWJ1dGVzWyJtZW1iZXJzaGlwX2xldmVsX2lkIl0gPSAkcG9zdFsibW1fbWVtYmVyX2FkZF9zZWxlY3RvciJdOwoJCQkJYnJlYWs7CgoJCQljYXNlIE1NX0V2ZW50OjokTUVNQkVSX0RFTEVURToKCQkJCWlmKCgkcG9zdFsibW1fYWN0aW9uX3R5cGUiXSA9PSBNTV9BY3Rpb246OiRNTV9BQ1RJT05fU0VORF9FTUFJTCkgJiYgCgkJCQkJKCRwb3N0WyJtbV9zZW5kX2VtYWlsX3RvIl0gPT0gTU1fQWN0aW9uOjokQ1VSUkVOVF9NRU1CRVJfUExBQ0VIT0xERVIpKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk1lbWJlciBkZWxldGVkIHB1c2ggbm90aWZpY2F0aW9ucyBjYW4ndCBiZSBzZW50IHRvIHRoZSBjdXJyZW50IG1lbWJlci5cblxuQnkgdGhlIHRpbWUgdGhlIG5vdGlmaWNhdGlvbiBpcyBleGVjdXRlZCwgdGhlIG1lbWJlcidzIGFjY291bnQgd2lsbCBhbHJhZWR5IGJlIGRlbGV0ZWQgc28gYWxsIG1lbWJlciBkYXRhLCBpbmNsdWRpbmcgZW1haWwgYWRkcmVzcywgd2lsbCBiZSB1bmF2YWlsYWJsZS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fRXZlbnQ6OiRNRU1CRVJfU1RBVFVTX0NIQU5HRToKCQkJCSRhdHRyaWJ1dGVzWyJtZW1iZXJzaGlwX2xldmVsX2lkIl0gPSAkcG9zdFsibW1fbWVtYmVyX3NlbGVjdG9yIl07CgkJCQkkYXR0cmlidXRlc1sic3RhdHVzX2lkIl0gPSAkcG9zdFsibW1fbWVtYmVyX3N0YXR1c19zZWxlY3RvciJdOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9FdmVudDo6JEJVTkRMRV9BREQ6CgkJCQkkYXR0cmlidXRlc1siYnVuZGxlX2lkIl0gPSAkcG9zdFsibW1fYnVuZGxlX2FkZF9zZWxlY3RvciJdOwoJCQkJYnJlYWs7CgkJCQoJCQljYXNlIE1NX0V2ZW50OjokQlVORExFX1NUQVRVU19DSEFOR0U6CgkJCQkkYXR0cmlidXRlc1siYnVuZGxlX2lkIl0gPSAkcG9zdFsibW1fYnVuZGxlX3NlbGVjdG9yIl07CgkJCQkkYXR0cmlidXRlc1sic3RhdHVzX2lkIl0gPSAkcG9zdFsibW1fYnVuZGxlX3N0YXR1c19zZWxlY3RvciJdOwoJCQkJYnJlYWs7CgkJfQoJCQoJCSRhY3Rpb24tPnNldEV2ZW50QXR0cmlidXRlcygkYXR0cmlidXRlcyk7CgkJCgkJcmV0dXJuICRhY3Rpb24tPmNvbW1pdERhdGEoKTsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHRha2VzIGFuIGV2ZW50IHR5cGUgYW5kIGFuIGVtYWlsIGJvZHkgYW5kIHN1YmplY3QgYW5kIGNoZWNrcyB0byBlbnN1cmUgdGhhdCAKCSAqIG1tX29yZGVyX2RhdGEgYW5kIG1tX29yZGVyX2RlY2lzaW9uIFNtYXJ0VGFncyBhcmUgbm90IGJlaW5nIHVzZWQgd2hlbiB0aGUgZXZlbnQgdHlwZSBpcyBub3QgCgkgKiBhIHBheW1lbnQgb3IgYWZmaWxpYXRlIHJlbGF0ZWQgZXZlbnQKCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIHZhbGlkYXRlU21hcnRUYWdVc2FnZSgkZXZlbnRUeXBlLCAkZW1haWxCb2R5LCAkZW1haWxTdWJqZWN0KQoJewoJCWlmKCRldmVudFR5cGUgIT0gTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQ0VJVkVEICYmICRldmVudFR5cGUgIT0gTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQklMTAoJCQkJJiYgJGV2ZW50VHlwZSAhPSBNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMX0RFQ0xJTkVEICYmICRldmVudFR5cGUgIT0gTU1fRXZlbnQ6OiRSRUZVTkRfSVNTVUVECgkJCQkmJiAkZXZlbnRUeXBlICE9IE1NX0V2ZW50OjokQ09NTUlTU0lPTl9JTklUSUFMICYmICRldmVudFR5cGUgIT0gTU1fRXZlbnQ6OiRDT01NSVNTSU9OX1JFQklMTAoJCQkJJiYgJGV2ZW50VHlwZSAhPSBNTV9FdmVudDo6JENBTkNFTF9DT01NSVNTSU9OICYmICRldmVudFR5cGUgIT0gTU1fRXZlbnQ6OiRQUk9EVUNUX1BVUkNIQVNFKQoJCXsKCQkJJHZhbGlkRXZlbnRzID0gIlRoZSBmb2xsb3dpbmcgaXMgYSBsaXN0IG9mIHZhbGlkIGV2ZW50czpcbiI7CgkJCSR2YWxpZEV2ZW50cyAuPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JFBBWU1FTlRfUkVDRUlWRUQpLiJcbiI7CgkJCSR2YWxpZEV2ZW50cyAuPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JFBBWU1FTlRfUkVCSUxMKS4iXG4iOwoJCQkkdmFsaWRFdmVudHMgLj0gTU1fRXZlbnQ6OmdldE5hbWUoTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQklMTF9ERUNMSU5FRCkuIlxuIjsKCQkJJHZhbGlkRXZlbnRzIC49IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokUkVGVU5EX0lTU1VFRCkuIlxuIjsKCQkJJHZhbGlkRXZlbnRzIC49IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokQ09NTUlTU0lPTl9JTklUSUFMKS4iXG4iOwoJCQkkdmFsaWRFdmVudHMgLj0gTU1fRXZlbnQ6OmdldE5hbWUoTU1fRXZlbnQ6OiRDT01NSVNTSU9OX1JFQklMTCkuIlxuIjsKCQkJJHZhbGlkRXZlbnRzIC49IE1NX0V2ZW50OjpnZXROYW1lKE1NX0V2ZW50OjokQ0FOQ0VMX0NPTU1JU1NJT04pLiJcbiI7CgkJCSR2YWxpZEV2ZW50cyAuPSBNTV9FdmVudDo6Z2V0TmFtZShNTV9FdmVudDo6JFBST0RVQ1RfUFVSQ0hBU0UpLiJcbiI7CgkJCgkJCSRwYXR0ZXJuID0gIlxbbW1fb3JkZXJfZGF0YSI7CgkJCgkJCWlmKHByZWdfbWF0Y2goIi97JHBhdHRlcm59L2kiLCBzdHJpcHNsYXNoZXMoJGVtYWlsU3ViamVjdCkpIHx8IHByZWdfbWF0Y2goIi97JHBhdHRlcm59L2kiLCBzdHJpcHNsYXNoZXMoJGVtYWlsQm9keSkpKQoJCQl7CgkJCQkkbXNnID0gIlRoZSBbTU1fT3JkZXJfRGF0YV0gU21hcnRUYWcgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHBheW1lbnQgYW5kIGFmZmlsaWF0ZSBldmVudHMuXG5cbiIuJHZhbGlkRXZlbnRzOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkbXNnLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQoJCQkkcGF0dGVybiA9ICJcW21tX29yZGVyX2RlY2lzaW9uIjsKCQkKCQkJaWYocHJlZ19tYXRjaCgiL3skcGF0dGVybn0vaSIsIHN0cmlwc2xhc2hlcygkZW1haWxTdWJqZWN0KSkgfHwgcHJlZ19tYXRjaCgiL3skcGF0dGVybn0vaSIsIHN0cmlwc2xhc2hlcygkZW1haWxCb2R5KSkpCgkJCXsKCQkJCSRtc2cgPSAiVGhlIFtNTV9PcmRlcl9EZWNpc2lvbl0gU21hcnRUYWcgY2FuIG9ubHkgYmUgdXNlZCB3aXRoIHBheW1lbnQgYW5kIGFmZmlsaWF0ZSBldmVudHMuXG5cbiIuJHZhbGlkRXZlbnRzOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkbXNnLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcmVtb3ZlTm90aWZpY2F0aW9uKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkKCQl7CgkJCSRhY3Rpb24gPSBuZXcgTU1fQWN0aW9uKCRwb3N0WyJpZCJdLCBmYWxzZSk7CgkJCXJldHVybiAkYWN0aW9uLT5kZWxldGUoKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBub3RpZmljYXRpb24uIE5vIGlkIHNwZWNpZmllZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KfQo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(128, 'emailintegrationview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fRW1haWxJbnRlZ3JhdGlvblZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NIT1dfTElTVF9NQVBQSU5HX0RJQUxPRyA9ICJzaG93TGlzdE1hcHBpbmdEaWFsb2ciOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0hPV19QUk9WSURFUl9PUFRJT05TID0gInNob3dQcm92aWRlck9wdGlvbnMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0FWRV9QUk9WSURFUl9PUFRJT05TID0gInNhdmVQcm92aWRlck9wdGlvbnMiOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NBVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5zYXZlQnVuZGxlTWFwcGluZygkcG9zdCk7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRU1PVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5yZW1vdmVCdW5kbGVNYXBwaW5nKCRwb3N0KTsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NIT1dfTElTVF9NQVBQSU5HX0RJQUxPRzoKCQkJCQlyZXR1cm4gJHRoaXMtPmdlbmVyYXRlTGlzdE1hcHBpbmdEaWFsb2coJHBvc3QpOwoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0hPV19QUk9WSURFUl9PUFRJT05TOgoJCQkJCXJldHVybiAkdGhpcy0+Z2V0UHJvdmlkZXJPcHRpb25zKCRwb3N0KTsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NBVkVfUFJPVklERVJfT1BUSU9OUzoKCQkJCQlyZXR1cm4gJHRoaXMtPnNhdmVQcm92aWRlck9wdGlvbnMoJHBvc3QpOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzYXZlQnVuZGxlTWFwcGluZygkcG9zdCkKCXsKCQlpZiAoIWlzc2V0KCRwb3N0WyJtbV9idW5kbGVfaWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2F2ZSBidW5kbGUgbWFwcGluZy4gQnVuZGxlIElEIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICghaXNzZXQoJHBvc3RbIm1tX3Byb3ZpZGVyX2lkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNhdmUgYnVuZGxlIG1hcHBpbmcuIFByb3ZpZGVyIElEIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCFlbXB0eSgkcG9zdFsibW1fbGFzdF9idW5kbGVfaWQiXSkpCgkJewoJCQkvLyByZW1vdmUgYW55IGV4aXN0aW5nIGJ1bmRsZSBtYXBwaW5ncwoJCQlnbG9iYWwgJHdwZGI7CgkJCSRzcWwgPSAiREVMRVRFIEZST00gIi5NTV9UQUJMRV9FTUFJTF9QUk9WSURFUl9CVU5ETEVfTUFQUElOR1MuIiBXSEVSRSBidW5kbGVfaWQgPSAneyRwb3N0WyJtbV9sYXN0X2J1bmRsZV9pZCJdfScgIjsKCQkJJHNxbCAuPSAiQU5EIGVtYWlsX3NlcnZpY2VfcHJvdmlkZXJfaWQgPSAneyRwb3N0WyJtbV9wcm92aWRlcl9pZCJdfSc7ICI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQl9CgkJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCFlbXB0eSgkcG9zdFsibW1fYWN0aXZlX2xpc3RfaWQiXSkpCgkJewoJCQkkbGlzdFR5cGUgPSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjokTElTVF9UWVBFX0FDVElWRTsKCQkJJHNxbCA9ICJJTlNFUlQgSU5UTyAiLk1NX1RBQkxFX0VNQUlMX1BST1ZJREVSX0JVTkRMRV9NQVBQSU5HUy4iIChidW5kbGVfaWQsIGxpc3RfaWQsIGVtYWlsX3NlcnZpY2VfcHJvdmlkZXJfaWQsIGxpc3RfdHlwZSkgIjsKCQkJJHNxbCAuPSAiVkFMVUVTICgneyRwb3N0WyJtbV9idW5kbGVfaWQiXX0nLCAneyRwb3N0WyJtbV9hY3RpdmVfbGlzdF9pZCJdfScsICd7JHBvc3RbIm1tX3Byb3ZpZGVyX2lkIl19JywgJ3skbGlzdFR5cGV9JykiOwoJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQkKCQkJaWYoISRyZXN1bHQpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzYXZlIGFjdGl2ZSBsaXN0IGJ1bmRsZSBtYXBwaW5nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJaWYoIWVtcHR5KCRwb3N0WyJtbV9jYW5jZWxlZF9saXN0X2lkIl0pKQoJCXsKCQkJJGxpc3RUeXBlID0gTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6JExJU1RfVFlQRV9DQU5DRUxFRDsKCQkJJHNxbCA9ICJJTlNFUlQgSU5UTyAiLk1NX1RBQkxFX0VNQUlMX1BST1ZJREVSX0JVTkRMRV9NQVBQSU5HUy4iIChidW5kbGVfaWQsIGxpc3RfaWQsIGVtYWlsX3NlcnZpY2VfcHJvdmlkZXJfaWQsIGxpc3RfdHlwZSkgIjsKCQkJJHNxbCAuPSAiVkFMVUVTICgneyRwb3N0WyJtbV9idW5kbGVfaWQiXX0nLCAneyRwb3N0WyJtbV9jYW5jZWxlZF9saXN0X2lkIl19JywgJ3skcG9zdFsibW1fcHJvdmlkZXJfaWQiXX0nLCAneyRsaXN0VHlwZX0nKSI7CgkJCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQkKCQkJaWYoISRyZXN1bHQpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzYXZlIGNhbmNlbGVkIGxpc3QgYnVuZGxlIG1hcHBpbmciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZW1vdmVCdW5kbGVNYXBwaW5nKCRwb3N0KQoJewoJCWlmICghaXNzZXQoJHBvc3RbImlkIl0pIHx8ICFpc19udW1lcmljKCRwb3N0WyJpZCJdKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIklEIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfRU1BSUxfUFJPVklERVJfQlVORExFX01BUFBJTkdTLiIgV0hFUkUgYnVuZGxlX2lkPSd7JHBvc3RbImlkIl19JzsiOwoJCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCgkJaWYoISRyZXN1bHQpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gZGVsZXRlIGJ1bmRsZSBtYXBwaW5nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Vmlld0RhdGEoTU1fRGF0YUdyaWQgJGRnKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcHJvdmlkZXIgPSBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckZhY3Rvcnk6OmdldEFjdGl2ZVByb3ZpZGVyKCk7CgkJCQoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkcHJvdmlkZXItPmdldFRva2VuKCkpOwoJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkkcHJvdmlkZXJfZW50aXR5X2lkID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKToiIjsKCQkKCQkkd2hlcmVDbGF1c2UgPSAiZW1haWxfc2VydmljZV9wcm92aWRlcl9pZCA9IHskcHJvdmlkZXJfZW50aXR5X2lkfSI7CgkJJHJvd3MgPSBwYXJlbnQ6OmdldERhdGEoTU1fVEFCTEVfRU1BSUxfUFJPVklERVJfQlVORExFX01BUFBJTkdTLCBudWxsLCAkZGcsICR3aGVyZUNsYXVzZSk7CgkJcmV0dXJuICRyb3dzOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUxpc3RNYXBwaW5nRGlhbG9nKCRwb3N0KSAKCXsKCQlpZiAoIWlzc2V0KCRwb3N0Wydwcm92aWRlcl90b2tlbiddKSkgCgkJewoJCQkvL3Nob3VsZG50IGV2ZXIgaGFwcGVuCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byByZXRyaWV2ZSBwcm92aWRlciBvcHRpb25zOiBubyB0b2tlbiB3YXMgcmVxdWVzdGVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJHByb3ZpZGVyX3Rva2VuID0gJHBvc3RbJ3Byb3ZpZGVyX3Rva2VuJ107CgkJJHByb3ZpZGVyID0gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJGYWN0b3J5OjpnZXRQcm92aWRlcigkcHJvdmlkZXJfdG9rZW4pOwoJCWlmICgkcHJvdmlkZXIgIT0gbnVsbCkgCgkJewoJCQkkY29uZmlnX3Jlc3BvbnNlID0gJHByb3ZpZGVyLT5jb25maWd1cmVGcm9tT3B0aW9ucygkcG9zdCk7CgkJCWlmICgkY29uZmlnX3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJCXsKCQkJCXJldHVybiAkY29uZmlnX3Jlc3BvbnNlOwoJCQl9CgkJCQoJCQkkbGlzdHNfcmVzcG9uc2UgPSAkcHJvdmlkZXItPmdldExpc3RzKCk7CgkJCWlmICgkbGlzdHNfcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikgCgkJCXsKCQkJCXJldHVybiAkbGlzdHNfcmVzcG9uc2U7CgkJCX0KCQkJZWxzZSBpZiAoaXNfYXJyYXkoJGxpc3RzX3Jlc3BvbnNlLT5tZXNzYWdlKSAmJiAoY291bnQoJGxpc3RzX3Jlc3BvbnNlLT5tZXNzYWdlKSA9PSAwKSkgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoaXMgZW1haWwgc2VydmljZSBwcm92aWRlciBoYXMgbm8gbGlzdHMgdGhhdCBjYW4gYmUgc3Vic2NyaWJlZCB0byIpOwoJCQl9CgkJCSRsaXN0cyA9IGFycmF5KCIiPT4iTm9uZSIpICsgJGxpc3RzX3Jlc3BvbnNlLT5tZXNzYWdlOwoJCQkKCQkJJGVuY29kZSA9IGNyZWF0ZV9mdW5jdGlvbignJiRrZXksJHZhbCcsICcka2V5PWh0bWxlbnRpdGllcygka2V5LEVOVF9DT01QQVQgfCBFTlRfSFRNTDQwMSwgIlVURi04Iik7ICR2YWw9aHRtbGVudGl0aWVzKCR2YWwsRU5UX0NPTVBBVCB8IEVOVF9IVE1MNDAxLCAiVVRGLTgiKTsnKTsKCQkJYXJyYXlfd2FsaygkbGlzdHMsJGVuY29kZSk7IC8vZW5jb2RlIGh0bWxfZW50aXRpZXMgc28gZnVua3kgdXNlciBkYXRhIGRvZXNuJ3QvY2FuJ3QgYnJlYWsgdGhlIGludGVyZmFjZQoJCQkkbWVtYmVyc2hpcF9tYXBwaW5ncyA9ICR0aGlzLT5nZXRDdXJyZW50TWFwcGluZ3MoJHByb3ZpZGVyX3Rva2VuKTsKCQkJLy91c2UgdGhlIGVudGl0eSB0byByZXRyaWV2ZSB0aGUgcHJvc3BlY3QgbGlzdAoJCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyKCk7CgkJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCRwcm92aWRlcl90b2tlbik7CgkJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkJJGN1cnJlbnRfcHJvc3BlY3RfbGlzdCA9ICIiOwoJCQlpZiAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKSAKCQkJewoJCQkJJGN1cnJlbnRfcHJvc3BlY3RfbGlzdCA9ICRwcm92aWRlcl9lbnRpdHktPmdldFByb3NwZWN0TGlzdElEKCk7CgkJCQkkY3VycmVudF9jYW5jZWxsYXRpb25fbGlzdCA9ICRwcm92aWRlcl9lbnRpdHktPmdldENhbmNlbGxhdGlvbkxpc3RJRCgpOwoJCQl9CgkJCQoJCQkkZXhwb3J0X3VybCA9IE1NX1BMVUdJTl9VUkwuJy9jb20vbWVtYmVybW91c2UvZXNwL3V0aWwvZXhwb3J0X21lbWJlcnMucGhwJzsKCQkJCgkJCS8vIGdlbmVyYXRlIEhUTUwKCQkJJGxpc3RfbWFwcGluZ19vdXRwdXQgPSAiPGRpdiBzdHlsZT1cIndpZHRoOjUwMHB4O1wiPjxwIGNsYXNzPVwibW0tc2VjdGlvbi1oZWFkZXJcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206MTBweDtcIj5TcGVjaWFsIExpc3QgTWFwcGluZ3M8L3A+IjsKCQkJCgkJCSRkYXRhR3JpZCA9IG5ldyBNTV9EYXRhR3JpZCgpOwoJCQkkZGF0YUdyaWQtPnNob3dQYWdpbmdDb250cm9scyA9IGZhbHNlOwoJCQkkcm93cyA9IGFycmF5KCk7CgkJCQoJCQkkaGVhZGVycyA9IGFycmF5CgkJCSgKCQkJCSdsaXN0X3R5cGUnCT0+IGFycmF5KCdjb250ZW50JyA9PiAnTGlzdCBUeXBlJyksCgkJCQknbGlzdCcJCT0+IGFycmF5KCdjb250ZW50JyA9PiAnTWFpbGluZyBMaXN0JyksCgkJCQknYWN0aW9ucycJPT4gYXJyYXkoJ2NvbnRlbnQnID0+ICdFeHBvcnQnKQoJCQkpOwoJCQkKCQkJLy8gYWRkIHByb3NwZWN0IGxpc3QKCQkJJHByb3NwZWN0TGlzdERlc2MgPSAiSGVyZSB5b3UgY2FuIGlkZW50aWZ5IGEgcHJlLXNhbGVzIG1haWxpbmcgbGlzdCB0aGF0IGNvbnRhaW5zIGVtYWlsIGFkZHJlc3NlcyBvZiBwcm9zcGVjdHMgdGhhdCBhcmUgbm90IG1lbWJlcnMgb2YgeW91ciBtZW1iZXJzaGlwIHNpdGUgeWV0LiBXaGVuIHNvbWVvbmUgZnJvbSB5b3VyIFByb3NwZWN0IExpc3QgcmVnaXN0ZXJzIGFzIGEgbWVtYmVyLCBNZW1iZXJNb3VzZSB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZW0gZnJvbSB0aGlzIGxpc3QuIjsKCQkJJHJvd3NbXSA9IGFycmF5CgkJCSgKCQkJCWFycmF5KCAnY29udGVudCcgPT4gIlByb3NwZWN0IExpc3QiLk1NX1V0aWxzOjpnZXRJbmZvSWNvbigkcHJvc3BlY3RMaXN0RGVzYykpLAoJCQkJYXJyYXkoICdjb250ZW50JyA9PiAiPHNlbGVjdCBuYW1lPSdwcm9zcGVjdF9saXN0X2lkJz4iLk1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGlzdHMsJGN1cnJlbnRfcHJvc3BlY3RfbGlzdCkuIjwvc2VsZWN0PiIpLAoJCQkJYXJyYXkoICdjb250ZW50JyA9PiAiIikKCQkJKTsKCQkJCgkJCS8vIGFkZCBjYW5jZWxsYXRpb24gbGlzdAoJCQkkY2FuY2VsTGlzdERlc2MgPSAiSGVyZSB5b3UgY2FuIGlkZW50aWZ5IGEgbWFpbGluZyBsaXN0IHRoYXQgY29udGFpbnMgZW1haWwgYWRkcmVzc2VzIG9mIGNhbmNlbGVkIG1lbWJlcnMgc28geW91IGNhbiByZS1lbmdhZ2UgdGhlbSBpbiB0aGUgZnV0dXJlLiBXaGVuIGEgbWVtYmVyIGNhbmNlbHMsIE1lbWJlck1vdXNlIHdpbGwgYXV0b21hdGljYWxseSBhZGQgdGhlbSB0byB0aGlzIGxpc3QuICI7CgkJCSRyb3dzW10gPSBhcnJheQoJCQkoCgkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICJDYW5jZWxsYXRpb24gTGlzdCIuTU1fVXRpbHM6OmdldEluZm9JY29uKCRjYW5jZWxMaXN0RGVzYykpLAoJCQkJYXJyYXkoICdjb250ZW50JyA9PiAiPHNlbGVjdCBuYW1lPSdjYW5jZWxsYXRpb25fbGlzdF9pZCc+Ii5NTV9IdG1sVXRpbHM6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJGxpc3RzLCRjdXJyZW50X2NhbmNlbGxhdGlvbl9saXN0KS4iPC9zZWxlY3Q+IiksCgkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICI8YSBvbmNsaWNrPSdtbWpzLmV4cG9ydE1lbWJlcnMoXCJ7JGV4cG9ydF91cmx9P2V4cG9ydF90eXBlPWNhbmNlbGxhdGlvblwiKTsgcmV0dXJuIGZhbHNlOycgc3R5bGU9J2N1cnNvcjpwb2ludGVyOycgdGl0bGU9J0V4cG9ydCBDYW5jZWxlZCBNZW1iZXJzJz4iLk1NX1V0aWxzOjpnZXRJY29uKCdkb3dubG9hZCcsICcnLCAnMS4zZW0nLCAnMnB4JykuIjwvYT4iKQoJCQkpOwoJCQkKCQkJJGRhdGFHcmlkLT5zZXRIZWFkZXJzKCRoZWFkZXJzKTsKCQkJJGRhdGFHcmlkLT5zZXRSb3dzKCRyb3dzKTsKCQkJCgkJCSRsaXN0X21hcHBpbmdfb3V0cHV0IC49ICRkYXRhR3JpZC0+Z2VuZXJhdGVIdG1sKCk7CgkJCQoJCQkkbWVtYmVyc2hpcEx2bE1hcHBpbmdEZXNjID0gIk1lbWJlck1vdXNlIHByb3ZpZGVzIHRoZSBhYmlsaXR5IG9mIG1hcHBpbmcgYSBzcGVjaWZpYyBtYWlsaW5nIGxpc3QgdG8gYSBzcGVjaWZpYyBtZW1iZXJzaGlwIGxldmVsLiBCeSBtYXBwaW5nIHlvdXIgbWVtYmVyc2hpcCBsZXZlbHMgdG8gbGlzdHMsIE1lbWJlck1vdXNlIGNhbiBhdXRvbWF0aWNhbGx5IG1vdmUgeW91ciBtZW1iZXJzIGZyb20gb25lIGxpc3QgdG8gYW5vdGhlciB3aGVuIG1lbWJlcnMgam9pbiBhbmQgYXMgdGhlaXIgbWVtYmVyc2hpcCBsZXZlbCBjaGFuZ2VzLiI7CgkJCSRsaXN0X21hcHBpbmdfb3V0cHV0IC49ICI8cCBjbGFzcz1cIm1tLXNlY3Rpb24taGVhZGVyXCIgc3R5bGU9XCJtYXJnaW4tdG9wOjIwcHg7IG1hcmdpbi1ib3R0b206MTBweDtcIj5NZW1iZXJzaGlwIExldmVsIE1hcHBpbmdzIi5NTV9VdGlsczo6Z2V0SW5mb0ljb24oJG1lbWJlcnNoaXBMdmxNYXBwaW5nRGVzYykuIjwvcD4iOwoJCQkKCQkJJGRhdGFHcmlkID0gbmV3IE1NX0RhdGFHcmlkKCk7CgkJCSRkYXRhR3JpZC0+c2hvd1BhZ2luZ0NvbnRyb2xzID0gZmFsc2U7CgkJCSRkYXRhR3JpZC0+d2lkdGggPSAiNTAwcHg7IjsKCQkJJHJvd3MgPSBhcnJheSgpOwoJCQkKCQkJJGhlYWRlcnMgPSBhcnJheQoJCQkoCgkJCQknbWVtYmVyc2hpcCc9PiBhcnJheSgnY29udGVudCcgPT4gJ01lbWJlcnNoaXAgTGV2ZWwnKSwKCQkJCSdsaXN0JwkJPT4gYXJyYXkoJ2NvbnRlbnQnID0+ICdNYWlsaW5nIExpc3QnKSwKCQkJCSdhY3Rpb25zJwk9PiBhcnJheSgnY29udGVudCcgPT4gJ0V4cG9ydCcpCgkJCSk7CgkJCQoJCQlmb3JlYWNoICgkbWVtYmVyc2hpcF9tYXBwaW5ncyBhcyAkbWVtYmVyc2hpcF9pZD0+JG1lbWJlcnNoaXBfZGF0YSkgCgkJCXsKCQkJCSRyb3dzW10gPSBhcnJheQoJCQkJKAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gJG1lbWJlcnNoaXBfZGF0YVsnbWVtYmVyc2hpcF9uYW1lJ10pLAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gIjxzZWxlY3QgbmFtZT0nbWVtYmVyX3R5cGVfbWFwcGluZ3NbeyRtZW1iZXJzaGlwX2lkfV0nPiIuTU1fSHRtbFV0aWxzOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0cywkbWVtYmVyc2hpcF9kYXRhWydsaXN0X2lkJ10pLiI8L3NlbGVjdD4iKSwKCQkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICI8YSBvbmNsaWNrPSdtbWpzLmV4cG9ydE1lbWJlcnMoXCJ7JGV4cG9ydF91cmx9P21lbWJlcnNoaXBfaWQ9eyRtZW1iZXJzaGlwX2lkfVwiKTsgcmV0dXJuIGZhbHNlOycgc3R5bGU9J2N1cnNvcjpwb2ludGVyOycgdGl0bGU9J0V4cG9ydCAmYXBvczt7JG1lbWJlcnNoaXBfZGF0YVsnbWVtYmVyc2hpcF9uYW1lJ119JmFwb3M7IE1lbWJlcnMnPiIuTU1fVXRpbHM6OmdldEljb24oJ2Rvd25sb2FkJywgJycsICcxLjNlbScsICcycHgnKS4iPC9hPiIpCgkJCQkpOwoJCQl9CgkJCQoJCQkkZGF0YUdyaWQtPnNldEhlYWRlcnMoJGhlYWRlcnMpOwoJCQkkZGF0YUdyaWQtPnNldFJvd3MoJHJvd3MpOwoJCQkKCQkJJGxpc3RfbWFwcGluZ19vdXRwdXQgLj0gJGRhdGFHcmlkLT5nZW5lcmF0ZUh0bWwoKS4iPC9kaXY+IjsKCQkJCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGxpc3RfbWFwcGluZ19vdXRwdXQpOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIHJldHJpZXZlIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gZm9yIHskcHJvdmlkZXJfdG9rZW59IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0Q3VycmVudE1hcHBpbmdzKCRwcm92aWRlcl90b2tlbikgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRtYXBwaW5ncyA9IGFycmF5KCk7CgkJCgkJLy9maXJzdCBnZXQgcHJvdmlkZXIgaWQKCQkkc3FsID0gInNlbGVjdCBpZCBmcm9tICIuTU1fVEFCTEVfRU1BSUxfU0VSVklDRV9QUk9WSURFUlMuIiB3aGVyZSBwcm92aWRlcl90b2tlbj0nJXMnIjsKCQkkcHJvdmlkZXJfaWQgPSAkd3BkYi0+Z2V0X2NvbCgkd3BkYi0+cHJlcGFyZSgkc3FsLCRwcm92aWRlcl90b2tlbikpOwoJCQoJCS8vdGhlbiBjbGVhbnVwIG1hcHBpbmdzIGZvciBkZWxldGVkIG1lbWJlcnR5cGVzCgkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX0VNQUlMX1BST1ZJREVSX01BUFBJTkdTLiIgd2hlcmUgbWVtYmVyX3R5cGVfaWQgTk9UIElOIChzZWxlY3QgaWQgZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLiIpIjsKCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCgkJLy9ub3cgZ2V0IG1lbWJlcnNoaXAgbGV2ZWxzCgkJJHNxbCA9ICJzZWxlY3QgaWQsIG5hbWUgZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTOwoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCRzcWwsJHByb3ZpZGVyX2lkKSxBUlJBWV9BKTsKCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkcm93bnVtPT4kbWVtYmVyX3R5cGUpCgkJewoJCQkkbWFwcGluZ3NbJG1lbWJlcl90eXBlWydpZCddXVsnbWVtYmVyc2hpcF9uYW1lJ10gPSAkbWVtYmVyX3R5cGVbJ25hbWUnXTsKCQkJJG1hcHBpbmdzWyRtZW1iZXJfdHlwZVsnaWQnXV1bJ2xpc3RfaWQnXSA9ICIiOwoJCX0KCQkKCQkvL25vdyB1cGRhdGUgd2l0aCBhbnkgbWFwcGluZ3MgcHJlc2VudCBpbiB0aGUgdGFibGUKCQkkc3FsID0gInNlbGVjdCBtZW1iZXJfdHlwZV9pZCwgbGlzdF9pZCBmcm9tICIuTU1fVEFCTEVfRU1BSUxfUFJPVklERVJfTUFQUElOR1MuCgkJCQkiIHdoZXJlIGVtYWlsX3NlcnZpY2VfcHJvdmlkZXJfaWQ9JyVzJyI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoJHNxbCwkcHJvdmlkZXJfaWQpLEFSUkFZX0EpOwoJCWZvcmVhY2ggKCRyZXN1bHRzIGFzICRyb3dudW09PiRzaW5nbGVfbWFwcGluZykgCgkJewoJCQkkbWVtYmVyc2hpcF9pZCA9ICRzaW5nbGVfbWFwcGluZ1snbWVtYmVyX3R5cGVfaWQnXTsKCQkJJG1hcHBpbmdzWyRtZW1iZXJzaGlwX2lkXVsnbGlzdF9pZCddID0gJHNpbmdsZV9tYXBwaW5nWydsaXN0X2lkJ107CgkJfQoJCXJldHVybiAkbWFwcGluZ3M7CQkKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFByb3ZpZGVyT3B0aW9ucygkcG9zdCkgCgl7CgkJaWYgKCFpc3NldCgkcG9zdFsncHJvdmlkZXJfdG9rZW4nXSkpIAoJCXsKCQkJLy9zaG91bGRudCBldmVyIGhhcHBlbgoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gcmV0cmlldmUgcHJvdmlkZXIgb3B0aW9uczogbm8gdG9rZW4gd2FzIHJlcXVlc3RlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRwcm92aWRlcl90b2tlbiA9ICRwb3N0Wydwcm92aWRlcl90b2tlbiddOwoJCSRwcm92aWRlciA9IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRmFjdG9yeTo6Z2V0UHJvdmlkZXIoJHByb3ZpZGVyX3Rva2VuKTsKCQlpZiAoJHByb3ZpZGVyICE9IG51bGwpIAoJCXsKCQkJJGNhbGxfcmVzcG9uc2UgPSAkcHJvdmlkZXItPnJlbmRlck9wdGlvbnNEaWFsb2coJHBvc3QpOwoJCQkvL2lmIGNhbGxfcmVzcG9uc2UgaXMgYW4gTU1fUmVzcG9uc2Ugb2JqZWN0LCByZXR1cm4gaXQsIG90aGVyd2lzZSB3cmFwIGl0IGluIGFuIE1NX1Jlc3BvbnNlIGFuZCByZXR1cm4gaXQKCQkJcmV0dXJuICgkY2FsbF9yZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKT8kY2FsbF9yZXNwb25zZToobmV3IE1NX1Jlc3BvbnNlKCRjYWxsX3Jlc3BvbnNlLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUykpOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIHJldHJpZXZlIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gZm9yIHskcHJvdmlkZXJfdG9rZW59IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzYXZlUHJvdmlkZXJPcHRpb25zKCRwb3N0KSAKCXsKCQlpZiAoIWlzc2V0KCRwb3N0Wydwcm92aWRlcl90b2tlbiddKSkgCgkJewoJCQkvL3Nob3VsZG50IGV2ZXIgaGFwcGVuCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byBzYXZlIHByb3ZpZGVyIG9wdGlvbnM6IG5vIHRva2VuIHdhcyBzdXBwbGllZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRwcm92aWRlcl90b2tlbiA9ICRwb3N0Wydwcm92aWRlcl90b2tlbiddOwoJCSRwcm92aWRlciA9IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRmFjdG9yeTo6Z2V0UHJvdmlkZXIoJHByb3ZpZGVyX3Rva2VuKTsKCQlpZiAoJHByb3ZpZGVyICE9IG51bGwpIAoJCXsKCQkJcmV0dXJuICRwcm92aWRlci0+aGFuZGxlT3B0aW9uc0RpYWxvZygkcG9zdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2F2ZSBwcm92aWRlciBjb25maWd1cmF0aW9uIGZvciB1bmtub3duIHByb3ZpZGVyIHskcHJvdmlkZXJfdG9rZW59IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CiAJCn0K', 0, '2018-11-21 06:38:54'),
(129, 'aweberoauthdatamissing', 'LyoqCiAqIE1NX0FXZWJlck9BdXRoRGF0YU1pc3NpbmcKICoKICogVXNlZCB3aGVuIGEgc3BlY2lmaWMgcGllY2Ugb3IgcGllY2VzIG9mIGRhdGEgd2FzIG5vdCBmb3VuZCBpbiB0aGUKICogcmVzcG9uc2UuIFRoaXMgZGlmZmVycyBmcm9tIHRoZSBleGNlcHRpb24gdGhhdCBtaWdodCBiZSB0aHJvd24gYXMKICogYW4gTU1fQVdlYmVyT0F1dGhFeGNlcHRpb24gd2hlbiBwYXJhbWV0ZXJzIGFyZSBub3QgcHJvdmlkZWQgYmVjYXVzZQogKiBpdCBpcyBub3QgdGhlIHNlcnZlcnMnIGV4cGVjdGF0aW9ucyB0aGF0IHdlcmUgbm90IG1ldCwgYnV0IHJhdGhlcgogKiB0aGUgZXhwZWNhdGlvbnMgb2YgdGhlIGNsaWVudCB3ZXJlIG5vdCBtZXQgYnkgdGhlIHNlcnZlci4KICoKICogQHVzZXMgTU1fQVdlYmVyRXhjZXB0aW9uCiAqIEBwYWNrYWdlCiAqIEB2ZXJzaW9uICRpZCQKICovCmNsYXNzIE1NX0FXZWJlck9BdXRoRGF0YU1pc3NpbmcgZXh0ZW5kcyBNTV9BV2ViZXJFeGNlcHRpb24gewoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkbWlzc2luZykgewoJCWlmICghaXNfYXJyYXkoJG1pc3NpbmcpKSAkbWlzc2luZyA9IGFycmF5KCRtaXNzaW5nKTsKCQkkdGhpcy0+bWlzc2luZyA9ICRtaXNzaW5nOwoJCSRyZXF1aXJlZCA9IGpvaW4oJywgJywgJHRoaXMtPm1pc3NpbmcpOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoIk9BdXRoRGF0YU1pc3Npbmc6IFJlc3BvbnNlIHdhcyBleHBlY3RlZCB0byBjb250YWluOiB7JHJlcXVpcmVkfSIpOwoKCX0KfQo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(130, 'order', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIAogKiBNTV9PcmRlciByZXByZXNlbnRzIGFuIG9yZGVyIGFuZCBhbGwgb2YgdGhlIG5vbi1wcm9kdWN0IGluZm9ybWF0aW9uIHRoYXQgZ29lcyB3aXRoIGl0IChiaWxsaW5nICYgc2hpcHBpbmcgYWRkcmVzc2VzLCBzdGF0dXMsCiAqIHRvdGFscywgZXRjKS4gSXQgYWxzbyBpcyBhIGNvbnRhaW5lciBmb3IgdGhlIG9iamVjdHMgcmVwcmVzZW50aW5nIHRoZSBwYXltZW50IHNlcnZpY2UsIHByb2R1Y3RzIGFuZCBjb3Vwb25zLCBhbHRob3VnaCB0aGVzZSBhcmUgc3RvcmVkIAogKiBpbiBzZXBhcmF0ZSBkYiB0YWJsZXMuCiAqIAogKiBPcmRlciBzdGF0dXMgaXMgaW5kaWNhdGVkIGFzIGZvbGxvd3M6CiAqIAogKiBQRU5ESU5HIC0gb3JkZXIgaGFzIGJlZW4gY3JlYXRlZCBidXQgbm90IGd1YXJhbnRlZWQgdG8gaGF2ZSBiZWVuIHBlcnNpc3RlZCB0byB0aGUgZGF0YWJhc2UuIEl0IGhhcyBub3QgYmVlbiB2YWxpZGF0ZWQgYW5kIGEgcGF5bWVudCBzZXJ2aWNlIGhhcyBub3QgYmVlbiBhdHRhY2hlZAogKiBBV0FJVElOR19QQVlNRU5UIC0gb3JkZXIgaGFzIGJlZW4gcGVyc2lzdGVkLCB2YWxpZGF0ZWQsIGFuZCBzaG91bGQgaGF2ZSBhIHZhbGlkIHBheW1lbnQgc2VydmljZSBhdHRhY2hlZC4gTm8gc3VjY2Vzc2Z1bHMgcGF5bWVudHMgaGF2ZSBiZWVuIG1hZGUKICogUEFJRF9DT01QTEVURSAtIHBhaWQvY29tcGxldGUuIEEgc3VjY2Vzc2Z1bCBwYXltZW50IGhhcyBiZWVuIG1hZGUgYWdhaW5zdCB0aGUgb3JkZXIsIG9yIGluIHRoZSBjYXNlIG9mIGEgZnJlZSBwcm9kdWN0LCB0aGUgb3JkZXIgaXMgaW4gYSBjb21wbGV0ZWQgc3RhdGUgd2l0aG91dCBwYXltZW50CiAqCiAqIEFuIGltcG9ydGFudCB0aGluZyB0byBub3RlIGFib3V0IHRoZSBvcmRlciBpcyB0aGF0IHRvdGFsIGNhbGN1bGF0aW9uIGNhbiBiZSB2ZXJ5IGV4cGVuc2l2ZSwgZXNwZWNpYWxseSBpbiB0aGUgY2FzZSB3aGVyZSBhIGNvdXBvbiBpcyBhcHBsaWVkLgogKiBCZWNhdXNlIHNvbWUgY291cG9ucyBhcHBseSBhIHBlcmNlbnRhZ2UgZGlzY291bnQgdG8gdGhlIGVudGlyZSBvcmRlciwgZXZlcnkgcHJvZHVjdCBoYXMgdG8gYmUgZXhhbWluZWQgdG8gY2FsY3VsYXRlIHRoZSBleGFjdCBkaXNjb3VudC4gVGhpcyBtZWFucyB0aGF0CiAqIEFMTCBvZiB0aGUgbGlua2VkIHByb2R1Y3QgZW50aXRpZXMgaGF2ZSB0byBiZSBsb2FkZWQgYXMgYSByZXN1bHQgb2YgdGhhdCBjYWxsLiBEdWUgdG8gdGhpcyBiZWhhdmlvciwgc3VidG90YWwvdG90YWwgY2FsY3VsYXRpb24gaXMgbGltaXRlZCB0byBiZWluZyBkb25lIG9ubHkgCiAqIGFzIHRoZSByZXN1bHQgb2YgYSBtYW51YWwgY2FsbCB0byBjYWxjdWxhdGVUb3RhbCwgc28gYmUgYXdhcmUgdGhhdCBpZiB0aGUgb3JkZXIgaXMgbW9kaWZpZWQgYWZ0ZXIgY2FsY3VsYXRpb24sIHRoZSB0b3RhbHMgbWF5IGJlIG91dCBvZiBzeW5jIHdpdGggdGhlIG9yZGVyIHN0YXRlCiAqCiAqLwpjbGFzcyBNTV9PcmRlciBleHRlbmRzIE1NX0VudGl0eQp7CQoJLy8gdGhpcyBpcyB1c2VkIHRvIGNyZWF0ZSBhbiBvcmRlciBvYmplY3Qgd2l0aCBzYW1wbGUgZGF0YSBpbiBpdAoJcHVibGljIHN0YXRpYyAkU0FNUExFX09SREVSX0lEID0gIi0xMCI7CgkKCXByaXZhdGUgJG9yZGVyX251bWJlciA9IDA7Cglwcml2YXRlICRjdXN0b21lciA9IG51bGw7CgkKCXByaXZhdGUgJHBheW1lbnRNZXRob2QgPSBudWxsOwoJcHJpdmF0ZSAkYmlsbGluZ0FkZHJlc3MgPSBudWxsOwoJcHJpdmF0ZSAkc2hpcHBpbmdBZGRyZXNzID0gbnVsbDsKCQoJcHJpdmF0ZSAkc2hpcHBpbmdPcHRpb25EZXNjcmlwdGlvbiA9IG51bGw7Cglwcml2YXRlICRzaGlwcGluZ09wdGlvbktleSA9IG51bGw7CgkKCXByaXZhdGUgJHN1YnRvdGFsID0gMC4wMDsKCXByaXZhdGUgJHRheCA9IDAuMDA7Cglwcml2YXRlICRzaGlwcGluZyA9IDAuMDA7Cglwcml2YXRlICRkaXNjb3VudCA9IDAuMDA7Cglwcml2YXRlICR0b3RhbCA9IDAuMDA7Cglwcml2YXRlICRjdXJyZW5jeSA9ICIiOwoJCglwcml2YXRlICRvcmRlckRhdGUgPSBudWxsOwoJcHJpdmF0ZSAkb3JkZXJVcGRhdGVkID0gbnVsbDsKCQoJcHJpdmF0ZSAkb3JkZXJfc3RhdHVzID0gMDsgLy9kZWZhdWx0IHN0YXR1cyBpcyBwZW5kaW5nCglwcml2YXRlICRvcmRlclByb2R1Y3RzID0gYXJyYXkoKTsKCXByaXZhdGUgJG9yZGVyQ291cG9ucyA9IGFycmF5KCk7Cglwcml2YXRlICRvcmRlclByb3JhdGlvbnMgPSBhcnJheSgpOwoJCglwcml2YXRlICRkYXRlQWRkZWQgPSAiIjsKCXByaXZhdGUgJGRhdGVNb2RpZmllZCA9ICIiOwoJCglwcml2YXRlICRpc1NoaXBwYWJsZSA9IGZhbHNlOyAgLy90cmFuc2llbnQKCXByaXZhdGUgJHNoaXBwaW5nU2FtZUFzQmlsbGluZyA9IGZhbHNlOyAvL3RyYW5zaWVudAoJCglwcml2YXRlICRhZmZpbGlhdGVJZCA9ICIiOwoJcHJpdmF0ZSAkc3ViQWZmaWxpYXRlSWQgPSAiIjsKCQoJcHJpdmF0ZSAkaXBBZGRyZXNzID0gIiI7CgkKCXByaXZhdGUgJGZvcm1TdWJtaXNzaW9uSWQgPSBudWxsOwoJCglwcml2YXRlICRpc1Rlc3QgPSBmYWxzZTsKCQoJcHVibGljIHN0YXRpYyAkUEVORElORyA9IDA7CglwdWJsaWMgc3RhdGljICRBV0FJVElOR19QQVlNRU5UID0gMTsKCXB1YmxpYyBzdGF0aWMgJFBBSURfQ09NUExFVEUgPSAyOwoJcHVibGljIHN0YXRpYyAkRVJST1JfRkFJTEVEID0gMzsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRpZD0iIiwgJGdldERhdGE9dHJ1ZSkKCXsKCQkvL3NldCBkZWZhdWx0IGFkZHJlc3MgdmFsdWVzCgkJJHRoaXMtPmJpbGxpbmdBZGRyZXNzICA9IG5ldyBNTV9DdXN0b21lckFkZHJlc3MoKTsKCQkkdGhpcy0+c2hpcHBpbmdBZGRyZXNzID0gbmV3IE1NX0N1c3RvbWVyQWRkcmVzcygpOwoJCQoJCS8vc2V0IGRlZmF1bHQgY3VycmVuY3kKCQkkdGhpcy0+Y3VycmVuY3kgPSBNTV9DdXJyZW5jeVV0aWw6OmdldEFjdGl2ZUN1cnJlbmN5KCk7CgkJJHRoaXMtPmlwQWRkcmVzcyA9IE1NX1V0aWxzOjpnZXRDbGllbnRJUEFkZHJlc3MoKTsKCQkKCQlpZighKCRpZCBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCWlmKGlzc2V0KCRpZCkgJiYgKGludHZhbCgkaWQpID4gMCB8fCBpbnR2YWwoJGlkKSA9PSBzZWxmOjokU0FNUExFX09SREVSX0lEKSkKCQkJewoJCQkJJHRoaXMtPmlkID0gJGlkOwoJCQkJCQoJCQkJaWYoJGdldERhdGEgPT0gdHJ1ZSkKCQkJCXsKCQkJCQkkdGhpcy0+Z2V0RGF0YSgpOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJGlkID0gIiI7CgkJCX0KCQl9Cgl9CgkKCQoJLyoqCgkgKiBEZXN0cm95IHJlbW92ZXMgYW55IGNpcmN1bGFyIHJlZmVyZW5jZXMgYmV0d2VlbiB0aGUgb3JkZXIgYW5kIGl0cyBvcmRlciBpdGVtcy4gSW4gUEhQIDw9IDUuMiwgYW5kIDUuMysgd2hlbiB1c2luZyB0aGUgb2xkIGdhcmJhZ2UgY29sbGVjdG9yLCAKCSAqIGRlc3Ryb3koKSBtdXN0IGJlIGNhbGxlZCBtYW51YWxseSBvbiBhbiBvcmRlciB0byBmcmVlIHRoZSB1c2VkIG1lbW9yeS4gSW4gVEhFT1JZLCBQSFAgNS40KyBjYW4gZG8gdGhpcyBhdXRvbWF0aWNhbGx5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkZXN0cm95KCkgCgl7CgkJaWYgKGlzc2V0KCR0aGlzLT5vcmRlclByb2R1Y3RzKSkKCQl7CgkJCWZvcmVhY2ggKCR0aGlzLT5vcmRlclByb2R1Y3RzIGFzICRwcm9kdWN0SXRlbSkKCQkJewoJCQkJJHByb2R1Y3RJdGVtLT5kZXN0cm95KCk7CgkJCX0KCQkJdW5zZXQoJHRoaXMtPm9yZGVyUHJvZHVjdHMpOwoJCX0KCQkKCQlpZiAoaXNzZXQoJHRoaXMtPm9yZGVyQ291cG9ucykpCgkJewoJCQlmb3JlYWNoICgkdGhpcy0+b3JkZXJDb3Vwb25zIGFzICRjb3Vwb25JdGVtKQoJCQl7CgkJCQkkY291cG9uSXRlbS0+ZGVzdHJveSgpOwoJCQl9CgkJCXVuc2V0KCR0aGlzLT5vcmRlckNvdXBvbnMpOwoJCX0KCQkKCQlpZiAoaXNzZXQoJHRoaXMtPm9yZGVyUHJvcmF0aW9ucykpCgkJewoJCQlmb3JlYWNoICgkdGhpcy0+b3JkZXJQcm9yYXRpb25zIGFzICRwcm9yYXRpb25JdGVtKQoJCQl7CgkJCQkkcHJvcmF0aW9uSXRlbS0+ZGVzdHJveSgpOwoJCQl9CgkJCXVuc2V0KCR0aGlzLT5vcmRlclByb3JhdGlvbnMpOwoJCX0KCX0KCQoJCgkvKioKCSAqIE1NX09yZGVyOjpnZXREYXRhIHJldHJpZXZlcyBzdG9yZWQgb3JkZXIgaW5mb3JtYXRpb24uIEl0IGF0dGVtcHRzIHRvIHVzZSB0aGUgb3JkZXIgbnVtYmVyIGZvciByZXRyaWV2YWwgZmlyc3QsIGlmIHRoaXMgaXMgbm90IHNldCB0aGVuCgkgKiBpdCBjaGVja3MgdG8gc2VlIGlmIHRoZSBpZCBoYXMgYmVlbiBzZXQuIElmIHRoZSBpZCBoYXMgbm90IGJlZW4gc2V0LCB0aGUgbWV0aG9kIHJldHVybnMgZmFsc2UgdG8gaW5kaWNhdGUgdGhhdCB0aGUgb3JkZXIgY2Fubm90IGJlIHJldHJpZXZlZCAoaW5zdWZmaWNpZW50IGRhdGEpIAoJICogQHNlZSBNTV9FbnRpdHk6OmdldERhdGEoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpIAoJewoJCWlmKCR0aGlzLT5pZCAhPSBzZWxmOjokU0FNUExFX09SREVSX0lEKQoJCXsKCQkJZ2xvYmFsICR3cGRiOwoJCQkkc3FsID0gInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9PUkRFUlMuIiB3aGVyZSAiOwoJCQlpZiAoJHRoaXMtPm9yZGVyX251bWJlciAhPSAwKSAKCQkJewoJCQkJJHNxbC49Im9yZGVyX251bWJlcj0neyR0aGlzLT5vcmRlcl9udW1iZXJ9JyI7CgkJCX0KCQkJZWxzZSBpZiAoJHRoaXMtPmlkICE9IDApIAoJCQl7CgkJCQkkc3FsLj0iaWQ9J3skdGhpcy0+aWR9JyI7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJCQoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCWlmKCRyZXN1bHQpIAoJCQl7CgkJCQkkdGhpcy0+c2V0RGF0YSgkcmVzdWx0KTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkvLyBwb3B1bGF0ZSBzYW1wbGUgZGF0YQoJCQkkdGhpcy0+aWQgPSBzZWxmOjokU0FNUExFX09SREVSX0lEOwoJCQkkdGhpcy0+Y3VzdG9tZXIgPSBuZXcgTU1fVXNlcihNTV9Vc2VyOjokU0FNUExFX1VTRVJfSUQpOwoJCQkkdGhpcy0+b3JkZXJfbnVtYmVyID0gIjEwMDAwMSI7CgkJCSR0aGlzLT5zdWJ0b3RhbCA9ICI4MC4wMCI7CgkJCSR0aGlzLT5kaXNjb3VudCA9ICIxMC4wMCI7CgkJCSR0aGlzLT5zaGlwcGluZyA9ICI1LjAwIjsKCQkJJHRoaXMtPnRheCA9ICIwLjAwIjsKCQkJJHRoaXMtPnRvdGFsID0gIjc1LjAwIjsKCQkJJHRoaXMtPmN1cnJlbmN5ID0gTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpOwoJCQkkdGhpcy0+YmlsbGluZ0FkZHJlc3MgPSBuZXcgTU1fQ3VzdG9tZXJBZGRyZXNzKCk7CgkJCSR0aGlzLT5iaWxsaW5nQWRkcmVzcy0+c2V0QWRkcmVzc0xpbmUxKCIxMjMgU2FtcGxlIFN0LiIpOwoJCQkkdGhpcy0+YmlsbGluZ0FkZHJlc3MtPnNldENpdHkoIlNhbXBsZSBDaXR5Iik7CgkJCSR0aGlzLT5iaWxsaW5nQWRkcmVzcy0+c2V0U3RhdGUoIk5ZIik7CgkJCSR0aGlzLT5iaWxsaW5nQWRkcmVzcy0+c2V0UG9zdGFsQ29kZSgiMTIzNDUiKTsKCQkJJHRoaXMtPmJpbGxpbmdBZGRyZXNzLT5zZXRDb3VudHJ5KCJVUyIpOwoJCQkkdGhpcy0+c2hpcHBpbmdBZGRyZXNzID0gbmV3IE1NX0N1c3RvbWVyQWRkcmVzcygpOwoJCQkkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5zZXRBZGRyZXNzTGluZTEoIjEyMyBTYW1wbGUgU3QuIik7CgkJCSR0aGlzLT5zaGlwcGluZ0FkZHJlc3MtPnNldENpdHkoIlNhbXBsZSBDaXR5Iik7CgkJCSR0aGlzLT5zaGlwcGluZ0FkZHJlc3MtPnNldFN0YXRlKCJOWSIpOwoJCQkkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5zZXRQb3N0YWxDb2RlKCIxMjM0NSIpOwoJCQkkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5zZXRDb3VudHJ5KCJVUyIpOwoJCQkkdGhpcy0+ZGF0ZUFkZGVkID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSR0aGlzLT5kYXRlTW9kaWZpZWQgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJHRoaXMtPnNoaXBwaW5nT3B0aW9uRGVzY3JpcHRpb24gPSAiKEZMQVRSQVRFKSBHcm91bmQiOwoJCQkkdGhpcy0+YWZmaWxpYXRlSWQgPSAic2FtcGxlYWZmaWxpYXRlIjsKCQkJJHRoaXMtPnN1YkFmZmlsaWF0ZUlkID0gInNhbXBsZXN1YmFmZmlsaWF0ZSI7CgkJCSR0aGlzLT5pcEFkZHJlc3MgPSAiMTAwLjEuMS4xIjsKCQkJCgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQl0cnkgCgkJewoJCQkkdGhpcy0+aWQgPSAkZGF0YS0+aWQ7CgkJCSR0aGlzLT5jdXN0b21lciA9IG5ldyBNTV9Vc2VyKCRkYXRhLT51c2VyX2lkKTsKCQkJCgkJCSR0aGlzLT5iaWxsaW5nQWRkcmVzcyA9IG5ldyBNTV9DdXN0b21lckFkZHJlc3MoKTsKCQkJJHRoaXMtPmJpbGxpbmdBZGRyZXNzLT5zZXRCaWxsaW5nQWRkcmVzcygkZGF0YSk7CgkJCSR0aGlzLT5zaGlwcGluZ0FkZHJlc3MgPSBuZXcgTU1fQ3VzdG9tZXJBZGRyZXNzKCk7CgkJCSR0aGlzLT5zaGlwcGluZ0FkZHJlc3MtPnNldFNoaXBwaW5nQWRkcmVzcygkZGF0YSk7CgkJCQoJCQkkdGhpcy0+b3JkZXJfbnVtYmVyID0gJGRhdGEtPm9yZGVyX251bWJlcjsKCQkJJHRoaXMtPnN1YnRvdGFsID0gJGRhdGEtPnN1YnRvdGFsOwoJCQkkdGhpcy0+ZGlzY291bnQgPSAkZGF0YS0+ZGlzY291bnQ7CgkJCSR0aGlzLT5zaGlwcGluZyA9ICRkYXRhLT5zaGlwcGluZzsKCQkJJHRoaXMtPnRheCA9ICRkYXRhLT50YXg7CgkJCSR0aGlzLT50b3RhbCA9ICRkYXRhLT50b3RhbDsKCQkJJHRoaXMtPmN1cnJlbmN5ID0gJGRhdGEtPmN1cnJlbmN5OwoJCQkkdGhpcy0+b3JkZXJfc3RhdHVzID0gJGRhdGEtPnN0YXR1czsKCQkJJHRoaXMtPmRhdGVBZGRlZCA9ICRkYXRhLT5kYXRlX2FkZGVkOwoJCQkkdGhpcy0+ZGF0ZU1vZGlmaWVkID0gJGRhdGEtPmRhdGVfbW9kaWZpZWQ7CgkJCSR0aGlzLT5zaGlwcGluZ09wdGlvbkRlc2NyaXB0aW9uID0gJGRhdGEtPnNoaXBwaW5nX29wdGlvbl9kZXNjcmlwdGlvbjsKCQkJCgkJCSR0aGlzLT5hZmZpbGlhdGVJZCA9ICRkYXRhLT5hZmZpbGlhdGVfaWQ7CgkJCSR0aGlzLT5zdWJBZmZpbGlhdGVJZCA9ICRkYXRhLT5zdWJfYWZmaWxpYXRlX2lkOwoJCQkkdGhpcy0+Zm9ybVN1Ym1pc3Npb25JZCA9ICRkYXRhLT5mb3JtX3N1Ym1pc3Npb25faWQ7CgkJCSR0aGlzLT5pcEFkZHJlc3MgPSAkZGF0YS0+aXBfYWRkcmVzczsKCQkJJHRoaXMtPmlzVGVzdCA9ICgkZGF0YS0+aXNfdGVzdCA9PSAxKTsKCQkJCgkJCS8vY3JlYXRlIGFuZCBhdHRhY2ggcGF5bWVudCBzZXJ2aWNlIG9iamVjdAoJCQlpZiAoaXNzZXQoJGRhdGEtPnBheW1lbnRfaWQpKQoJCQl7CgkJCQkkdGhpcy0+c2V0UGF5bWVudE1ldGhvZChNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldFBheW1lbnRTZXJ2aWNlQnlJZCgkZGF0YS0+cGF5bWVudF9pZCkpOwoJCQl9CgkJCQoJCQkvL2ZldGNoIG9yZGVyIGl0ZW1zCgkJCSR0aGlzLT5vcmRlckl0ZW1zICAgPSBhcnJheSgpOwoJCQkkdGhpcy0+b3JkZXJDb3Vwb25zID0gYXJyYXkoKTsKCQkJJHRoaXMtPm9yZGVyUHJvcmF0aW9ucyA9IGFycmF5KCk7CgkJCSRvaXNxbCA9ICJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfT1JERVJfSVRFTVMuIiB3aGVyZSBvcmRlcl9pZCA9ICd7JHRoaXMtPmlkfSciOwoJCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkb2lzcWwpOwoJCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkb3JkZXJJdGVtRGF0YSkKCQkJewoJCQkJJG5ld0l0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRvcmRlckl0ZW1EYXRhLT5pZCwgZmFsc2UsJHRoaXMpOyAvL3NheWluZyBmYWxzZSBoZXJlIHNhdmVzIHVzIGZyb20gaGF2aW5nIHRvIG1ha2UgYW5vdGhlciB0cmlwIHRvIGRiIHRvIGdldCB0aGUgc2FtZSBkYXRhCgkJCQkkbmV3SXRlbS0+c2V0RGF0YSgkb3JkZXJJdGVtRGF0YSk7CgkJCQkkbmV3SXRlbS0+dmFsaWRhdGUoKTsKCQkJCWlmICgkbmV3SXRlbS0+Z2V0SXRlbVR5cGUoKSA9PSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCkKCQkJCXsKCQkJCQkkdGhpcy0+b3JkZXJQcm9kdWN0c1skb3JkZXJJdGVtRGF0YS0+aXRlbV9pZF0gPSAkbmV3SXRlbTsKCQkJCX0KCQkJCWVsc2UgaWYgKCRuZXdJdGVtLT5nZXRJdGVtVHlwZSgpID09IE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9ESVNDT1VOVCkKCQkJCXsKCQkJCQkkdGhpcy0+b3JkZXJDb3Vwb25zWyRvcmRlckl0ZW1EYXRhLT5pdGVtX2lkXSA9ICRuZXdJdGVtOwoJCQkJfQoJCQkJZWxzZSBpZiAoJG5ld0l0ZW0tPmdldEl0ZW1UeXBlKCkgPT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST1JBVElPTikKCQkJCXsKCQkJCQkkdGhpcy0+b3JkZXJQcm9yYXRpb25zW10gPSAkbmV3SXRlbTsKCQkJCX0KCQkJfQoJCQkKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy9jYW50IGNvbW1pdCB3aXRoIG5vIGl0ZW1zCgkJaWYgKCFpc19hcnJheSgkdGhpcy0+b3JkZXJQcm9kdWN0cykgfHwgKGNvdW50KCR0aGlzLT5vcmRlclByb2R1Y3RzKSA9PSAwKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzYXZlIG9yZGVyOiBPcmRlciBoYXMgbm8gcHJvZHVjdHMiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2NhbnQgY29tbWl0IHdpdGggbm8gY3VzdG9tZXIgZWl0aGVyCgkJaWYgKGlzX251bGwoJHRoaXMtPmN1c3RvbWVyKSB8fCAhKCR0aGlzLT5jdXN0b21lciBpbnN0YW5jZW9mIE1NX1VzZXIpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNhdmUgb3JkZXI6IE9yZGVyIGhhcyBubyBjdXN0b21lciIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQkJCgkJLy9pZiBjdXN0b21lciBoYXNudCBiZWVuIGNvbW1pdHRlZCwgY29tbWl0LiAKCQlpZiAoISR0aGlzLT5jdXN0b21lci0+aXNWYWxpZCgpKQoJCXsKCQkJJGN1c3RvbWVyUmVzcG9uc2UgPSAkdGhpcy0+Y3VzdG9tZXItPmNvbW1pdERhdGEoKTsKCQkJaWYgKCRjdXN0b21lclJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJCXsKCQkJCSRjdXN0b21lclJlc3BvbnNlLT5tZXNzYWdlID0gIlVuYWJsZSB0byBzYXZlIG9yZGVyOiAiLiRjdXN0b21lclJlc3BvbnNlLT5tZXNzYWdlOwoJCQkJcmV0dXJuICRjdXN0b21lclJlc3BvbnNlOwoJCQl9CgkJfQoJCQoJCSR0aGlzLT5jYWxjdWxhdGVUb3RhbCgpOyAvL21ha2Ugc3VyZSB0aGUgdG90YWwgaXMgYWNjdXJhdGUKCQkkaXNVcGRhdGUgPSAoaW50dmFsKCR0aGlzLT5pZCkgPjApP3RydWU6ZmFsc2U7CgkJCgkJJG9yZGVyRGF0YSA9IGFycmF5KAoJCQkib3JkZXJfbnVtYmVyIiAgICAgICAgICAgICAgICAgPT4gICR0aGlzLT5vcmRlcl9udW1iZXIsCgkJCSJ1c2VyX2lkIiAgICAgICAgICAgICAgICAgICAgICA9PiAgJHRoaXMtPmN1c3RvbWVyLT5nZXRJZCgpLAoJCQkiYWZmaWxpYXRlX2lkIiAgICAgICAgICAgICAgICAgPT4gICR0aGlzLT5hZmZpbGlhdGVJZCwKCQkJInN1Yl9hZmZpbGlhdGVfaWQiICAgICAgICAgICAgID0+ICAkdGhpcy0+c3ViQWZmaWxpYXRlSWQsCgkJCSJiaWxsaW5nX2ZpcnN0X25hbWUiICAgICAgICAgICA9PiAgJHRoaXMtPmJpbGxpbmdBZGRyZXNzLT5nZXRGaXJzdE5hbWUoKSwKCQkJImJpbGxpbmdfbGFzdF9uYW1lIiAgICAgICAgICAgID0+ICAkdGhpcy0+YmlsbGluZ0FkZHJlc3MtPmdldExhc3ROYW1lKCksCgkJCSJiaWxsaW5nX3Bob25lIgkJCQkgICA9PiAgJHRoaXMtPmJpbGxpbmdBZGRyZXNzLT5nZXRQaG9uZSgpLAoJCQkiYmlsbGluZ19hZGRyZXNzMSIgICAgICAgICAgICAgPT4gICR0aGlzLT5iaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUxKCksCgkJCSJiaWxsaW5nX2FkZHJlc3MyIiAgICAgICAgICAgICA9PiAgJHRoaXMtPmJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTIoKSwKCQkJImJpbGxpbmdfY2l0eSIgICAgICAgICAgICAgICAgID0+ICAkdGhpcy0+YmlsbGluZ0FkZHJlc3MtPmdldENpdHkoKSwKCQkJImJpbGxpbmdfc3RhdGUiICAgICAgICAgICAgICAgID0+ICAkdGhpcy0+YmlsbGluZ0FkZHJlc3MtPmdldFN0YXRlKCksCgkJCSJiaWxsaW5nX3Byb3ZpbmNlIiAgICAgICAgICAgICA9PiAgJHRoaXMtPmJpbGxpbmdBZGRyZXNzLT5nZXRQcm92aW5jZSgpLAoJCQkiYmlsbGluZ19wb3N0YWxfY29kZSIgICAgICAgICAgPT4gICR0aGlzLT5iaWxsaW5nQWRkcmVzcy0+Z2V0UG9zdGFsQ29kZSgpLAoJCQkiYmlsbGluZ19jb3VudHJ5IiAgICAgICAgICAgICAgPT4gICR0aGlzLT5iaWxsaW5nQWRkcmVzcy0+Z2V0Q291bnRyeSgpLAoJCQkic2hpcHBpbmdfZmlyc3RfbmFtZSIgICAgICAgICAgPT4gICR0aGlzLT5zaGlwcGluZ0FkZHJlc3MtPmdldEZpcnN0TmFtZSgpLAoJCQkic2hpcHBpbmdfbGFzdF9uYW1lIiAgICAgICAgICAgPT4gICR0aGlzLT5zaGlwcGluZ0FkZHJlc3MtPmdldExhc3ROYW1lKCksCgkJCSJzaGlwcGluZ19waG9uZSIJCQkgICA9PiAgJHRoaXMtPnNoaXBwaW5nQWRkcmVzcy0+Z2V0UGhvbmUoKSwKCQkJInNoaXBwaW5nX2FkZHJlc3MxIiAgICAgICAgICAgID0+ICAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKSwKCQkJInNoaXBwaW5nX2FkZHJlc3MyIiAgICAgICAgICAgID0+ICAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTIoKSwKCQkJInNoaXBwaW5nX2NpdHkiICAgICAgICAgICAgICAgID0+ICAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCksCgkJCSJzaGlwcGluZ19zdGF0ZSIgICAgICAgICAgICAgICA9PiAgJHRoaXMtPnNoaXBwaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKSwKCQkJInNoaXBwaW5nX3Byb3ZpbmNlIiAgICAgICAgICAgID0+ICAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5nZXRQcm92aW5jZSgpLAoJCQkic2hpcHBpbmdfcG9zdGFsX2NvZGUiICAgICAgICAgPT4gICR0aGlzLT5zaGlwcGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKSwKCQkJInNoaXBwaW5nX2NvdW50cnkiICAgICAgICAgICAgID0+ICAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzLT5nZXRDb3VudHJ5KCksCgkJCSJzaGlwcGluZ19vcHRpb25fa2V5IiAgICAgICAgICA9PiAgJHRoaXMtPnNoaXBwaW5nT3B0aW9uS2V5LAoJCQkic2hpcHBpbmdfb3B0aW9uX2Rlc2NyaXB0aW9uIiAgPT4gICR0aGlzLT5zaGlwcGluZ09wdGlvbkRlc2NyaXB0aW9uLAoJCQkic3VidG90YWwiICAgICAgICAgICAgICAgICAgICAgPT4gICR0aGlzLT5zdWJ0b3RhbCwKCQkJImRpc2NvdW50IiAgICAgICAgICAgICAgICAgICAgID0+ICAkdGhpcy0+ZGlzY291bnQsCgkJCSJzaGlwcGluZyIgICAgICAgICAgICAgICAgICAgICA9PiAgJHRoaXMtPnNoaXBwaW5nLAoJCQkidGF4IiAgICAgICAgICAgICAgICAgICAgICAgICAgPT4gICR0aGlzLT50YXgsCgkJCSJ0b3RhbCIgICAgICAgICAgICAgICAgICAgICAgICA9PiAgJHRoaXMtPnRvdGFsLAoJCQkiY3VycmVuY3kiICAgICAgICAgICAgICAgICAgICAgPT4gICR0aGlzLT5jdXJyZW5jeSwKCQkJImZvcm1fc3VibWlzc2lvbl9pZCIgICAgICAgICAgICAgICAgICAgICA9PiAgJHRoaXMtPmZvcm1TdWJtaXNzaW9uSWQsCgkJCSJzdGF0dXMiICAgICAgICAgICAgICAgICAgICAgICA9PiAgJHRoaXMtPm9yZGVyX3N0YXR1cywKCQkJImlzX3Rlc3QiCQkJCQkgICA9PiAgJHRoaXMtPmlzVGVzdD8xOjAKCQkpOwoJCQoJCWlmKCFpc19udWxsKCR0aGlzLT5wYXltZW50TWV0aG9kKSkKCQl7CgkJCSRvcmRlckRhdGFbInBheW1lbnRfaWQiXSA9ICR0aGlzLT5wYXltZW50TWV0aG9kLT5nZXRJZCgpOwoJCX0KCQkKCQkvL2JlZ2luIHRyYW5zYWN0aW9uCgkJTU1fVHJhbnNhY3Rpb246OmJlZ2luKCk7CgkJdHJ5CgkJewoJCQlpZiAoISRpc1VwZGF0ZSkKCQkJewoJCQkJLy90aGlzIGlzIGEgbmV3IHJlY29yZAoJCQkJJG9yZGVyTnVtYmVyR2VuZXJhdG9yID0gTU1fT3JkZXJOdW1iZXJHZW5lcmF0b3JGYWN0b3J5OjpnZXRPcmRlck51bWJlckdlbmVyYXRvcihNTV9PcmRlck51bWJlckdlbmVyYXRvcjo6JERFRkFVTFQpOwoJCQkJJG9yZGVyRGF0YVsib3JkZXJfbnVtYmVyIl0gPSAkb3JkZXJOdW1iZXJHZW5lcmF0b3ItPnByZUNvbW1pdCgkdGhpcyk7CgkJCQkkb3JkZXJEYXRhWyJkYXRlX2FkZGVkIl0gICA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkJJG9yZGVyRGF0YVsiaXBfYWRkcmVzcyJdICAgPSAkdGhpcy0+aXBBZGRyZXNzOwoJCQkJCQoJCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfT1JERVJTLCRvcmRlckRhdGEpOwoJCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCQl7CgkJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigidW5hYmxlIHRvIGNyZWF0ZSBvcmRlciBpZCB7JHRoaXMtPmlkfTogZXJyb3IgPSAiLiR3cGRiLT5sYXN0X2Vycm9yKTsKCQkJCX0KCQkJCQoJCQkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkJCQoJCQkJJHRoaXMtPnNldE9yZGVyTnVtYmVyKCRvcmRlck51bWJlckdlbmVyYXRvci0+cG9zdENvbW1pdCgkdGhpcykpOwoJCQkJJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9PUkRFUlMsYXJyYXkoIm9yZGVyX251bWJlciI9PiR0aGlzLT5nZXRPcmRlck51bWJlcigpKSwgYXJyYXkoImlkIj0+JHRoaXMtPmlkKSk7CgkJCQkKCQkJCS8vd3JpdGUgZW50cnkgdG8gdGhlIHRyYW5zYWN0aW9uIGxvZwoJCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiT3JkZXIgIyIuJHRoaXMtPmdldE9yZGVyTnVtYmVyKCkuIiBjcmVhdGVkIjsKCQkJCWlmICgkdGhpcy0+aXNUZXN0KCkpCgkJCQl7CgkJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCR0aGlzLT5pZCwgbnVsbCwgJHRoaXMtPnRvdGFsLCR0aGlzLT5jdXJyZW5jeSwgJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24sTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRSxmYWxzZSk7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCU1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCR0aGlzLT5pZCwgbnVsbCwgJHRoaXMtPnRvdGFsLCR0aGlzLT5jdXJyZW5jeSwgJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24sTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRSxmYWxzZSk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkb3JkZXJEYXRhWyJkYXRlX21vZGlmaWVkIl0gPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCJpZCIgPT4gJHRoaXMtPmlkKTsKCQkJCQoJCQkJJHJlc3VsdCA9ICR3cGRiLT51cGRhdGUoTU1fVEFCTEVfT1JERVJTLCAkb3JkZXJEYXRhLCAkd2hlcmVDbGF1c2UpOwoJCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCQl7CgkJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigidW5hYmxlIHRvIHVwZGF0ZSBvcmRlciBpZCB7JHRoaXMtPmlkfTogZXJyb3IgPSAiLiR3cGRiLT5sYXN0X2Vycm9yKTsKCQkJCX0KCQkJfQoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJCQoJCQkvL2NvbW1pdCBvcmRlciBpdGVtcwoJCQkkY29tYmluZWRMaW5lSXRlbXMgPSBhcnJheV9tZXJnZSgkdGhpcy0+b3JkZXJQcm9kdWN0cywgJHRoaXMtPm9yZGVyQ291cG9ucywgJHRoaXMtPm9yZGVyUHJvcmF0aW9ucyk7CgkJCWZvcmVhY2ggKCRjb21iaW5lZExpbmVJdGVtcyBhcyAkbGluZUl0ZW0pCgkJCXsJCgkJCQkkbGluZUl0ZW0tPnNldE9yZGVySWQoJHRoaXMtPmlkKTsKCQkJCSRsaW5lSXRlbVJlc3BvbnNlID0gJGxpbmVJdGVtLT5jb21taXREYXRhKCk7CgkJCQlpZiAoISgkbGluZUl0ZW1SZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSB8fCAoJGxpbmVJdGVtUmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikpCgkJCQl7CgkJCQkJdGhyb3cgbmV3IEV4Y2VwdGlvbigoJGxpbmVJdGVtUmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSk/JGxpbmVJdGVtUmVzcG9uc2UtPm1lc3NhZ2U6IkVycm9yIHNhdmluZyBvbmUgb2YgdGhlIG9yZGVyIGl0ZW1zIik7CgkJCQl9CgkJCX0KCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpCgkJewoJCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGV4LT5nZXRNZXNzYWdlKCksTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCU1NX1RyYW5zYWN0aW9uOjpjb21taXQoKTsKCgkJLyoKCQkgKiBQdXNoIG5vdGlmaWNhdGlvbiBmb3IgcHJvZHVjdCBwdXJjaGFzZWQuCgkJICovCgkJZm9yZWFjaCgkdGhpcy0+b3JkZXJQcm9kdWN0cyBhcyAkb3JkZXJJdGVtKQoJCXsKCQkJZG9fYWN0aW9uKE1NX0V2ZW50OjokUFJPRFVDVF9QVVJDSEFTRSwgTU1fRXZlbnQ6OnBhY2thZ2VQcm9kdWN0RGF0YSgkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKSwgJHRoaXMtPmN1c3RvbWVyLT5nZXRJZCgpLCAkdGhpcy0+aWQsICRvcmRlckl0ZW0tPmdldElkKCkpKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOyAvL3N1Y2Nlc3MKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gYWRkUHJvZHVjdChNTV9Qcm9kdWN0ICRwcm9kdWN0LCAkcXVhbnRpdHk9MSwgJGlzR2lmdD1mYWxzZSkKCXsKCQlpZiAoaXNzZXQoJHRoaXMtPm9yZGVyUHJvZHVjdHNbJHByb2R1Y3QtPmlkXSkpCgkJewoJCQkkdGhpcy0+b3JkZXJQcm9kdWN0c1skcHJvZHVjdC0+aWRdLT5zZXRRdWFudGl0eSgkdGhpcy0+b3JkZXJQcm9kdWN0c1skcHJvZHVjdC0+aWRdLT5nZXRRdWFudGl0eSgpICsgJHF1YW50aXR5KTsKCQl9CgkJZWxzZQoJCXsKCQkJaWYgKCRwcm9kdWN0LT5pc1NoaXBwYWJsZSgpKQoJCQl7CgkJCQkkdGhpcy0+aXNTaGlwcGFibGUgPSB0cnVlOwoJCQl9CgkJCSRuZXdJdGVtID0gbmV3IE1NX09yZGVySXRlbSgpOwoJCQkkbmV3SXRlbS0+c2V0SXRlbVR5cGUoTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpOwoJCQkkbmV3SXRlbS0+c2V0SXRlbUlkKCRwcm9kdWN0LT5pZCk7CgkJCSRuZXdJdGVtLT5zZXREZXNjcmlwdGlvbigkcHJvZHVjdC0+Z2V0TmFtZSgpKTsKCQkJJG5ld0l0ZW0tPnNldFF1YW50aXR5KCRxdWFudGl0eSk7CgkJCSRuZXdJdGVtLT5zZXRBbW91bnQoKCRwcm9kdWN0LT5oYXNUcmlhbCgpKT8kcHJvZHVjdC0+Z2V0VHJpYWxBbW91bnQoZmFsc2UpOiRwcm9kdWN0LT5nZXRQcmljZShmYWxzZSkpOwoJCQkkbmV3SXRlbS0+c2V0SXNHaWZ0KCRpc0dpZnQpOwoJCQkkbmV3SXRlbS0+c2V0Q3VycmVuY3koJHRoaXMtPmN1cnJlbmN5KTsKCQkJCgkJCWlmICgkcHJvZHVjdC0+aGFzVHJpYWwoKSkKCQkJewoJCQkJJG5ld0l0ZW0tPnNldFRyaWFsQW1vdW50KCRwcm9kdWN0LT5nZXRUcmlhbEFtb3VudChmYWxzZSkpOwoJCQkJJG5ld0l0ZW0tPnNldFRyaWFsRHVyYXRpb24oJHByb2R1Y3QtPmdldFRyaWFsRHVyYXRpb24oKSk7CgkJCQkkbmV3SXRlbS0+c2V0VHJpYWxGcmVxdWVuY3koJHByb2R1Y3QtPmdldFRyaWFsRnJlcXVlbmN5KCkpOwoJCQkJJG5ld0l0ZW0tPnNldFJlY3VycmluZ0Ftb3VudCgkcHJvZHVjdC0+Z2V0UHJpY2UoZmFsc2UpKTsKCQkJfQoJCQlpZiAoJHByb2R1Y3QtPmlzUmVjdXJyaW5nKCkpCgkJCXsKCQkJCSRuZXdJdGVtLT5zZXRJc1JlY3VycmluZyh0cnVlKTsKCQkJCSRuZXdJdGVtLT5zZXRSZWN1cnJpbmdBbW91bnQoJHByb2R1Y3QtPmdldFByaWNlKGZhbHNlKSk7CgkJCQkkbmV3SXRlbS0+c2V0UmViaWxsUGVyaW9kKCRwcm9kdWN0LT5nZXRSZWJpbGxQZXJpb2QoKSk7CgkJCQkkbmV3SXRlbS0+c2V0UmViaWxsRnJlcXVlbmN5KCRwcm9kdWN0LT5nZXRSZWJpbGxGcmVxdWVuY3koKSk7CgkJCQlpZiAoJHByb2R1Y3QtPmRvTGltaXRQYXltZW50cygpKQoJCQkJewoJCQkJCSRuZXdJdGVtLT5zZXRNYXhSZWJpbGxzKCRwcm9kdWN0LT5nZXROdW1iZXJPZlBheW1lbnRzKCkpOwoJCQkJfQoJCQl9CgkJCSR0aGlzLT5vcmRlclByb2R1Y3RzWyRwcm9kdWN0LT5pZF0gPSAkbmV3SXRlbTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZW1vdmVQcm9kdWN0KE1NX1Byb2R1Y3QgJHByb2R1Y3QsICRxdWFudGl0eT0xKQoJewoJCS8vaWYgdGhlIHJlcXVlc3QgcHJvZHVjdCBpcyBhdHRhY2hlZCB0byB0aGUgb3JkZXIsIGlzIGFuIG9yZGVyIGl0ZW0sIGFuZCBpcyBkZXNpZ25hdGVkIGFzIGEgcHJvZHVjdC4uLgoJCWlmIChpc3NldCgkdGhpcy0+b3JkZXJQcm9kdWN0c1skcHJvZHVjdC0+aWRdKSAmJiAoJHRoaXMtPm9yZGVyUHJvZHVjdHNbJHByb2R1Y3QtPmlkXSBpbnN0YW5jZW9mIE1NX09yZGVySXRlbSkgJiYgKCR0aGlzLT5vcmRlclByb2R1Y3RzWyRwcm9kdWN0LT5pZF0tPmdldEl0ZW1UeXBlKCkgPT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpKQoJCXsKCQkJLy9yZWR1Y2UgdGhlIHF1YW50aXR5IGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LiBJZiB0aGlzIHRha2VzIHRoZSBxdWFudGl0eSB0byA8PTAsIHJlbW92ZSBpdCBhbHRvZ2V0aGVyCgkJCSRuZXdRdWFudGl0eSA9ICgkdGhpcy0+b3JkZXJQcm9kdWN0c1skcHJvZHVjdC0+aWRdLT5nZXRRdWFudGl0eSgpIC0gJHF1YW50aXR5KTsKCQkJaWYgKCRuZXdRdWFudGl0eSA8PSAwKQoJCQl7CgkJCQl1bnNldCgkdGhpcy0+b3JkZXJQcm9kdWN0c1skcHJvZHVjdC0+aWRdKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkdGhpcy0+b3JkZXJQcm9kdWN0c1skcHJvZHVjdC0+aWRdLT5zZXRRdWFudGl0eSgkbmV3UXVhbnRpdHkpOwoJCQl9CgkJfQoJfQoJCgkvKioKCSAqIHJlbW92ZUFsbFByb2R1Y3RzIHJlbW92ZXMgYWxsIHRoZSBwcm9kdWN0IGl0ZW1zIGZyb20gdGhlIG9yZGVyLiBEaXNjb3VudHMgYW5kIGFueSBmdXR1cmUgaXRlbSB0eXBlcyBhcmUgY3VycmVudGx5IGxlZnQgYWxvbmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZUFsbFByb2R1Y3RzKCkKCXsKCQkkdGhpcy0+b3JkZXJQcm9kdWN0cyA9IGFycmF5KCk7Cgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIE1NX09yZGVySXRlbXMgcmVwcmVzZW50aW5nIHByb2R1Y3RzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG9yZGVyCgkgKiAKCSAqIEByZXR1cm4gYXJyYXkgb2YgTU1fT3JkZXJJdGVtIHdpdGggaXRlbSB0eXBlIE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9QUk9EVUNUCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0cygpCgl7CQkKCQlyZXR1cm4gJHRoaXMtPm9yZGVyUHJvZHVjdHM7Cgl9CgkKCQoJLyoqCgkgKiBTZXQgdGhlIGN1c3RvbWVyCgkgKiAKCSAqIEBwYXJhbSBNTV9Vc2VyICRjdXN0b21lciBUaGUgY3VzdG9tZXIgYXR0YWNoZWQgdG8gdGhlIG9yZGVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRDdXN0b21lcihNTV9Vc2VyICRjdXN0b21lcikgCgl7CgkJJHRoaXMtPmN1c3RvbWVyID0gJGN1c3RvbWVyOwoJfQoJCgkKCS8qKgoJICogUmV0dXJuIHRoZSBjdXN0b21lcgoJICogCgkgKiBAcmV0dXJuIE1NX1VzZXIgVGhlIGN1c3RvbWVyIGF0dGFjaGVkIHRvIHRoZSBvcmRlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q3VzdG9tZXIoKQoJewoJCXJldHVybiAkdGhpcy0+Y3VzdG9tZXI7Cgl9CgkKCQoJLyoqCgkgKiBTZXQgdGhlIGJpbGxpbmcgYWRkcmVzcwoJICogCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyBUaGUgYmlsbGluZyBhZGRyZXNzIGZvciB0aGUgb3JkZXIKCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBzZXRCaWxsaW5nQWRkcmVzcyhNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzKQogCXsKIAkgCSR0aGlzLT5iaWxsaW5nQWRkcmVzcyA9ICRiaWxsaW5nQWRkcmVzczsKIAl9CgogCQogCS8qKgogCSAqIFJldHVybnMgdGhlIGJpbGxpbmcgYWRkcmVzcyBmb3IgdGhlIG9yZGVyCiAJICogCiAJICogQHJldHVybiBNTV9DdXN0b21lckFkZHJlc3MgVGhlIGJpbGxpbmcgYWRkcmVzcyBmb3IgdGhlIG9yZGVyCiAJICovCiAJcHVibGljIGZ1bmN0aW9uIGdldEJpbGxpbmdBZGRyZXNzKCkKIAl7CiAJIAlyZXR1cm4gJHRoaXMtPmJpbGxpbmdBZGRyZXNzOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIHNldFNoaXBwaW5nQWRkcmVzcyhNTV9DdXN0b21lckFkZHJlc3MgJHN0cikKIAl7CiAJIAkkdGhpcy0+c2hpcHBpbmdBZGRyZXNzID0gJHN0cjsKIAl9CgogCQogCS8qKgogCSAqIFJldHVybnMgdGhlIHNoaXBwaW5nIGFkZHJlc3MKIAkgKiAKIAkgKiBAcmV0dXJuIE1NX0N1c3RvbWVyQWRkcmVzcyBUaGUgc2hpcHBpbmcgYWRkcmVzcwogCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBnZXRTaGlwcGluZ0FkZHJlc3MoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzOwogCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXRUb3RhbCgkdG90YWwpCgl7CgkJJHRoaXMtPnRvdGFsID0gJHRvdGFsOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VG90YWwoJGRvRm9ybWF0PWZhbHNlKQoJewoJCWlmICgkZG9Gb3JtYXQpCgkJewoJCQlyZXR1cm4gX21tZigkdGhpcy0+dG90YWwsJHRoaXMtPmN1cnJlbmN5KTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG51bWJlcl9mb3JtYXQoZmxvYXR2YWwoJHRoaXMtPnRvdGFsKSxNTV9DdXJyZW5jeVV0aWw6OmdldFByZWNpc2lvbkZvckN1cnJlbmN5KCR0aGlzLT5jdXJyZW5jeSksJy4nLCcnKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm4gdGhlIHRheCBhbW91bnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmRlcgoJICogCgkgKiBAcGFyYW0gYm9vbGVhbiAkZG9Gb3JtYXQgKG9wdGlvbmFsKSBJZiB0cnVlLCByZXR1cm5zIHRoaXMgZmxvYXRpbmcgcG9pbnQgbnVtYmVyIGFzIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIHdpdGggMiBkZWNpbWFsIHBsYWNlcywgc3VpdGFibGUgZm9yIHJlcHJlc2VudGluZyBjdXJyZW5jeQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0VGF4KCRkb0Zvcm1hdD1mYWxzZSkKCXsKCQlpZiAoJGRvRm9ybWF0KQoJCXsKCQkJcmV0dXJuIF9tbWYoZmxvYXR2YWwoJHRoaXMtPnRheCksJHRoaXMtPmN1cnJlbmN5KTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG51bWJlcl9mb3JtYXQoZmxvYXR2YWwoJHRoaXMtPnRheCksTU1fQ3VycmVuY3lVdGlsOjpnZXRQcmVjaXNpb25Gb3JDdXJyZW5jeSgkdGhpcy0+Y3VycmVuY3kpLCcuJywnJyk7CgkJfQoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgdGF4IGFtb3VudCBmb3IgdGhpcyBvcmRlcgoJICogCgkgKiBAcGFyYW0gZmxvYXQgJHRheCBUaGUgYW1vdW50IG9mIHRheCB0byBjaGFyZ2Ugd2l0aCB0aGlzIG9yZGVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRUYXgoJHRheCkKCXsKCQkkdGhpcy0+dGF4ID0gJHRheDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNhbGN1bGF0ZVRvdGFsKCRkb0Zvcm1hdD1mYWxzZSkKCXsKCQkvL3RheCBpcyBpZ25vcmVkIGZvciBub3cKCQkkbmV3U3VidG90YWwgPSAwLjAwOwoJCSRuZXdEaXNjb3VudCA9IDAuMDA7CgkJZm9yZWFjaCAoJHRoaXMtPm9yZGVyUHJvZHVjdHMgYXMgJGFuSXRlbSkKCQl7CgkJCWlmICgkYW5JdGVtLT5nZXRJdGVtVHlwZSgpID09IE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9QUk9EVUNUKQoJCQl7CgkJCQkkbmV3U3VidG90YWwgKz0gJGFuSXRlbS0+Y2FsY3VsYXRlVG90YWwoKTsKCQkJfQoJCX0KCQkKCQlmb3JlYWNoICgkdGhpcy0+b3JkZXJDb3Vwb25zIGFzICRhbkl0ZW0pCgkJewoJCQlpZiAoJGFuSXRlbS0+Z2V0SXRlbVR5cGUoKSA9PSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfRElTQ09VTlQpCgkJCXsKCQkJCSRuZXdEaXNjb3VudCArPSAkYW5JdGVtLT5jYWxjdWxhdGVUb3RhbCgpOwoJCQl9CgkJfQoJCQoJCWZvcmVhY2ggKCR0aGlzLT5vcmRlclByb3JhdGlvbnMgYXMgJGFuSXRlbSkKCQl7CgkJCWlmICgkYW5JdGVtLT5nZXRJdGVtVHlwZSgpID09IE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9QUk9SQVRJT04pCgkJCXsKCQkJCSRuZXdEaXNjb3VudCArPSAkYW5JdGVtLT5jYWxjdWxhdGVUb3RhbCgpOwoJCQl9CgkJfQoJCQoJCSR0aGlzLT5zdWJ0b3RhbCA9ICRuZXdTdWJ0b3RhbDsKCQkkdGhpcy0+ZGlzY291bnQgPSAkbmV3RGlzY291bnQ7CgkJJHRoaXMtPnRvdGFsID0gJG5ld1N1YnRvdGFsIC0gYWJzKCRuZXdEaXNjb3VudCkgKyBmbG9hdHZhbCgkdGhpcy0+c2hpcHBpbmcpOwoJCQoJCS8vZG9uJ3QgbGV0IGFuIG9yZGVyIHRvdGFsIGdvIGxlc3MgdGhhbiAkMAoJCSR0aGlzLT50b3RhbCA9ICgkdGhpcy0+dG90YWw+PTApPyR0aGlzLT50b3RhbDowLjAwOwoJCQoJCXJldHVybiAoJGRvRm9ybWF0KT9fbW1mKCR0aGlzLT50b3RhbCwkdGhpcy0+Y3VycmVuY3kpOm51bWJlcl9mb3JtYXQoZmxvYXR2YWwoJHRoaXMtPnRvdGFsKSxNTV9DdXJyZW5jeVV0aWw6OmdldFByZWNpc2lvbkZvckN1cnJlbmN5KCR0aGlzLT5jdXJyZW5jeSksJy4nLCcnKTsKCX0KCQogCQoJcHVibGljIGZ1bmN0aW9uIHNldFBheW1lbnRNZXRob2QoTU1fUGF5bWVudFNlcnZpY2UgJHBheW1lbnRNZXRob2Q9bnVsbCkgCgl7CgkJJHRoaXMtPnBheW1lbnRNZXRob2QgPSAkcGF5bWVudE1ldGhvZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UGF5bWVudE1ldGhvZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5wYXltZW50TWV0aG9kOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBZmZpbGlhdGVJZCgkc3RyKSAKCXsKCQkkdGhpcy0+YWZmaWxpYXRlSWQgPSAkc3RyOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBZmZpbGlhdGVJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5hZmZpbGlhdGVJZDsKCX0JCgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFN1YkFmZmlsaWF0ZUlkKCRzdHIpIAoJewoJCSR0aGlzLT5zdWJBZmZpbGlhdGVJZCA9ICRzdHI7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFN1YkFmZmlsaWF0ZUlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnN1YkFmZmlsaWF0ZUlkOwoJfQkKCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0SVBBZGRyZXNzKCRzdHIpCgl7CgkJJHRoaXMtPmlwQWRkcmVzcyA9ICRzdHI7Cgl9CQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRJUEFkZHJlc3MoKQoJewoJCXJldHVybiAkdGhpcy0+aXBBZGRyZXNzOwoJfQoJCgkKCS8qKgoJICogUmV0cmlldmUgdGhlIE1NX09yZGVySXRlbXMgcmVwcmVzZW50aW5nIGNvdXBvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb3JkZXIKCSAqCgkgKiBAcmV0dXJuIGFycmF5IG9mIE1NX09yZGVySXRlbSB3aXRoIGl0ZW0gdHlwZSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfRElTQ09VTlQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldENvdXBvbnMoKQoJewoJCXJldHVybiAkdGhpcy0+b3JkZXJDb3Vwb25zOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBhZGRDb3Vwb24oTU1fQ291cG9uICRjb3Vwb24pCgl7CgkJaWYgKCFpc3NldCgkdGhpcy0+b3JkZXJDb3Vwb25zWyRjb3Vwb24tPmdldElkKCldKSkKCQl7CgkJCSRuZXdJdGVtID0gbmV3IE1NX09yZGVySXRlbSgiIix0cnVlLCR0aGlzKTsKCQkJJG5ld0l0ZW0tPnNldEl0ZW1UeXBlKE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9ESVNDT1VOVCk7CgkJCSRuZXdJdGVtLT5zZXRJdGVtSWQoJGNvdXBvbi0+Z2V0SWQoKSk7CgkJCSRuZXdJdGVtLT5zZXREZXNjcmlwdGlvbigkY291cG9uLT5nZXRDb3Vwb25OYW1lKCkpOwoJCQkkbmV3SXRlbS0+c2V0UXVhbnRpdHkoMSk7CgkJCSR0aGlzLT5vcmRlckNvdXBvbnNbJGNvdXBvbi0+Z2V0SWQoKV0gPSAkbmV3SXRlbTsKCQl9Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZUNvdXBvbigkY291cG9uKQoJewoJCWlmIChpc3NldCgkdGhpcy0+b3JkZXJDb3Vwb25zWyRjb3Vwb24tPmdldElkKCldKSkKCQl7CgkJCXVuc2V0KCR0aGlzLT5vcmRlckNvdXBvbnNbJGNvdXBvbi0+Z2V0SWQoKV0pOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQWxsQ291cG9ucygpCgl7CgkJJHRoaXMtPm9yZGVyQ291cG9ucyA9IGFycmF5KCk7Cgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIE1NX09yZGVySXRlbXMgcmVwcmVzZW50aW5nIHByb3JhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgb3JkZXIKCSAqCgkgKiBAcmV0dXJuIGFycmF5IG9mIE1NX09yZGVySXRlbSB3aXRoIGl0ZW0gdHlwZSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPUkFUSU9OCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9yYXRpb25zKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm9yZGVyUHJvcmF0aW9uczsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gYWRkUHJvcmF0aW9uKE1NX09yZGVySXRlbSAkcHJvcmF0aW9uSXRlbSkKCXsKCQkkdGhpcy0+b3JkZXJQcm9yYXRpb25zW10gPSAkcHJvcmF0aW9uSXRlbTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQWxsUHJvcmF0aW9ucygpCgl7CgkJJHRoaXMtPm9yZGVyUHJvcmF0aW9ucyA9IGFycmF5KCk7Cgl9CgkKCS8qCgkgKiBhY3Rpb24gbWV0aG9kcwoJICovCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY3JlYXRlRnJvbUNhcnQoTU1fVXNlciAkY3VzdG9tZXIsIE1NX1Nob3BwaW5nQ2FydCAkY2FydCkKCXsKCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoKTsKCQkkb3JkZXItPnNldEN1c3RvbWVyKCRjdXN0b21lcik7CgkJZm9yZWFjaCAoJGNhcnQtPmdldFByb2R1Y3RzSW5DYXJ0KCkgYXMgJHByb2R1Y3RfaWQ9PiRjYXJ0SXRlbSkgLy9hZGQgcHJvZHVjdHMKCQl7CgkJCWlmICgkY2FydEl0ZW0gaW5zdGFuY2VvZiBNTV9TaG9wcGluZ0NhcnRJdGVtKSAvL2VuZm9yY2UgY29ycmVjdCBjYXJ0IHN0cnVjdHVyZQoJCQl7CgkJCQkkb3JkZXItPmFkZFByb2R1Y3QoJGNhcnRJdGVtLT5nZXRJdGVtKCksJGNhcnRJdGVtLT5nZXRRdWFudGl0eSgpKTsKCQkJfQoJCX0KCQlmb3JlYWNoICgkY2FydC0+Z2V0Q291cG9uc0luQ2FydCgpIGFzICRjb3Vwb25faWQ9PiRjYXJ0Q291cG9uKSAvL2FkZCBjb3Vwb25zCgkJewoJCQlpZiAoJGNhcnRDb3Vwb24gaW5zdGFuY2VvZiBNTV9TaG9wcGluZ0NhcnRJdGVtKSAvL21ha2Ugc3VyZSBpdHMgYSBjb3Vwb24KCQkJewoJCQkJJG9yZGVyLT5hZGRDb3Vwb24oJGNhcnRDb3Vwb24tPmdldEl0ZW0oKSk7CgkJCX0KCQl9CgkJCgkJJG9yZGVyLT5zZXRCaWxsaW5nQWRkcmVzcygkY2FydC0+Z2V0QmlsbGluZ0FkZHJlc3MoKSk7CgkJJG9yZGVyLT5zZXRTaGlwcGluZ0FkZHJlc3MoJGNhcnQtPmdldFNoaXBwaW5nQWRkcmVzcygpKTsKCQlyZXR1cm4gJG9yZGVyOwoJfQoJCgkKCS8qKgoJICogUmV0cmlldmUgYW4gb3JkZXIgYnkgdGhlIG9yZGVyIG51bWJlcgoJICogQHBhcmFtIFN0cmluZyAkb3JkZXJOdW1iZXIgQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBvcmRlciBudW1iZXIsIGdlbmVyYWxseSAoYnV0IG5vdCBuZWNlc3NhcmlseSkgbnVtZXJpYwoJICogQHJldHVybiBNTV9PcmRlciBlbnRpdHkgdGhhdCBpcyB2YWxpZCBhbmQgcG9wdWxhdGVkIGlmIHRoZSBvcmRlciBudW1iZXIgZXhpc3RzLCBvciBhbiBpbnZhbGlkIE1NX09yZGVyIG9iamVjdCBpZiB0aGUgb3JkZXIgbnVtYmVyIGRvZXMgbm90IGV4aXN0CgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RGF0YUJ5T3JkZXJOdW1iZXIoJG9yZGVyTnVtYmVyKQoJewoJCWlmIChlbXB0eSgkb3JkZXJOdW1iZXIpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9PcmRlcigpOwoJCX0KCQkKCQlnbG9iYWwgJHdwZGI7CiAJCQoJCSRzcWwgPSAiU0VMRUNUIGlkIEZST00gIi5NTV9UQUJMRV9PUkRFUlMuIiBXSEVSRSBvcmRlcl9udW1iZXI9JyVzJyBMSU1JVCAxOyI7CgkJJG9yZGVySWQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkc3FsLCRvcmRlck51bWJlcikpOwoJCQoJCWlmICghaXNfbnVsbCgkb3JkZXJJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX09yZGVyKCRvcmRlcklkKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9PcmRlcigpOyAvL3JldHVybiBhbiBpbnZhbGlkIGVudGl0eSBpZiB0aGUgb3JkZXIgY291bGQgbm90IGJlIGZvdW5kCgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgdXNlciBJRCBhc3NvY2lhdGQgd2l0aCB0aGUgb3JkZXIgSUQgcGFzc2VkLiBJdCBpcyBtZWFudCB0byBiZSB1c2VkIGFzIAoJICogYW4gZWZmaWNpZW50IG1lYXNuIGZvciByZXRyaWV2aW5nIHRoZSB1c2VyIElEIHdpdGhvdXQgaGF2aW5nIHRvIGxvYWQgdGhlIGVudGlyZSBvcmRlciBvYmplY3QuIAoJICogQHBhcmFtIE51bWJlciAkb3JkZXJJZCB0aGUgb3JkZXIgSUQgdG8gZ2V0IHRoZSBhc3NvaWNhdGVkIHVzZXIgSUQgZm9yCgkgKiBAcmV0dXJuIE51bWJlciB0aGUgdXNlciBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIG9yZGVyIElEIHBhc3NlZC4gLTEgaWYgbm8gYXNzb2NpYXRlZCB1c2VyIElEIGZvdW5kLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXJJZCkKCXsKCQlpZihpc3NldCgkb3JkZXJJZCkgJiYgKGludHZhbCgkb3JkZXJJZCkgPiAwIHx8IGludHZhbCgkb3JkZXJJZCkgPT0gTU1fT3JkZXI6OiRTQU1QTEVfT1JERVJfSUQpKQoJCXsKCQkJZ2xvYmFsICR3cGRiOwoJCQkJCgkJCSRzcWwgPSAiU0VMRUNUIHVzZXJfaWQgRlJPTSAiLk1NX1RBQkxFX09SREVSUy4iIFdIRVJFIGlkPSclcycgTElNSVQgMTsiOwoJCQkkdXNlcklkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHNxbCwkb3JkZXJJZCkpOwoJCQoJCQlpZiAoIWlzX251bGwoJHVzZXJJZCkpCgkJCXsKCQkJCXJldHVybiAkdXNlcklkOwoJCQl9CgkJfQoKCQlyZXR1cm4gLTE7Cgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2Qgd2lsbCBjaGVjayBmb3IgYW55IG90aGVyIHN1Ym1pc3Npb25zIHN1Ym1pdHRlZCBieSB0aGlzIHVzZXIgdGhhdCBtYXRjaCB0aGUgc2FtZSAkZm9ybUlkLiAgCgkgKiBUaGlzIHdpbGwgYmUgdXNlZnVsIGluIHByZXZlbnRpbmcgZHVwbGljYXRlIG9yZGVycyBhY2NpZGVudGx5IHByb2Nlc3NlZCBieSBtdWx0aS1jbGljayBvciBiYWNrIGJ1dHRvbiBzY2VuYXJpb3MuCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJGZvcm1JZCB0aGUgc3VibWlzc2lvbiBmb3JtIGlkIAoJICogQHBhcmFtIGludCAkdXNlcklkIGN1cnJlbnQgdXNlciBjaGVja2luZyBvdXQKCSAqIEByZXR1cm4gdHJ1ZSBpZiBmb3JtIHN1Ym1pc3Npb24gaXMgZm91bmQsIG90aGVyd2lzZSBmYWxzZS4KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBoYXNGb3JtU3VibWlzc2lvbklkKCRmb3JtSWQsJHVzZXJJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoIWlzX251bGwoJGZvcm1JZCkgJiYgIWVtcHR5KCRmb3JtSWQpICYmIHN0cmxlbigkZm9ybUlkKT4wKQoJCXsgCgkJCSRzcWwgPSAiU0VMRUNUIGNvdW50KCopIGFzIHRvdGFsIEZST00gIi5NTV9UQUJMRV9PUkRFUlMuIiBXSEVSRSBmb3JtX3N1Ym1pc3Npb25faWQ9JyVzJyBBTkQgdXNlcl9pZD0nJXMnOyI7CgkJCSR0b3RhbCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCRzcWwsJGZvcm1JZCwkdXNlcklkKSk7CgkJCgkJCWlmICghaXNfbnVsbCgkdG90YWwpICYmIGludHZhbCgkdG90YWwpPjApCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9ICAKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkKCS8qKgoJICogTG9va3MgdXAgYW4gb3JkZXIgdXNpbmcgYSBmb3JtIHN1Ym1pc3Npb24gaWQgYW5kIGEgdXNlciBpZCwgYW5kIHJldHVybnMgYW4gb3JkZXIgb2JqZWN0CgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJGZvcm1TdWJtaXNzaW9uSWQgVGhlIHVuaXF1ZSBpZCBhc3NpZ25lZCB0byB0aGUgZm9ybSB0aGF0IGNyZWF0ZWQgdGhpcyBvcmRlci4gVGhlIGZvcm0gZmllbGQgbmFtZSBpcyBtbV9zdWJtaXNzaW9uX211dGV4CgkgKiBAcGFyYW0gaW50ZWdlciAkdXNlcklkIFRoZSBpZCBpZGVudGlmeWluZyB0aGUgdXNlciB0aGUgb3JkZXIgc2hvdWxkIGJlbG9uZyB0bwoJICogCgkgKiBAcmV0dXJuIE1NX09yZGVyIHJlcHJlc2VudGluZyB0aGUgb3JkZXIgaWYgZm91bmQsIG51bGwgb3RoZXJ3aXNlCgkgKiAKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRPcmRlckJ5VXNlckFuZEZvcm1TdWJtaXNzaW9uSWQoJGZvcm1TdWJtaXNzaW9uSWQsJHVzZXJJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJG9yZGVyc1RhYmxlID0gTU1fVEFCTEVfT1JERVJTOwoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSB7JG9yZGVyc1RhYmxlfSBXSEVSRSAoZm9ybV9zdWJtaXNzaW9uX2lkKSA9ICVzIEFORCAodXNlcl9pZCA9ICVzKSI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCRzcWwsJGZvcm1TdWJtaXNzaW9uSWQsJHVzZXJJZCkpOwoJCWlmICghZW1wdHkoJHJvdykpCgkJewoJCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoKTsKCQkJJG9yZGVyLT5zZXREYXRhKCRyb3cpOwoJCQlyZXR1cm4gJG9yZGVyOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBwcmVwcm9jZXNzT3JkZXIoKQoJewoJCS8vIGRldGVybWluZSBwcm9yYXRpb24KCQlNTV9QYXltZW50VXRpbHM6OmFwcGx5UHJvcmF0aW9uKCR0aGlzKTsKCX0JCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRPcmRlck51bWJlcigpCgl7CgkJcmV0dXJuICR0aGlzLT5vcmRlcl9udW1iZXI7Cgl9CgkgCglwdWJsaWMgZnVuY3Rpb24gc2V0T3JkZXJOdW1iZXIoJG9yZGVyX251bWJlcikKCXsKCQkkdGhpcy0+b3JkZXJfbnVtYmVyID0gJG9yZGVyX251bWJlcjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Rm9ybVN1Ym1pc3Npb25JZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5mb3JtU3VibWlzc2lvbklkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRGb3JtU3VibWlzc2lvbklkKCR2YWwpCgl7CgkJJHRoaXMtPmZvcm1TdWJtaXNzaW9uSWQgPSAkdmFsOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpc1NoaXBwYWJsZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5pc1NoaXBwYWJsZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U2hpcHBhYmxlKCRpc1NoaXBwYWJsZSkKCXsKCQkkdGhpcy0+aXNTaGlwcGFibGUgPSAkaXNTaGlwcGFibGU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFNoaXBwaW5nU2FtZUFzQmlsbGluZygkc2hpcHBpbmdTYW1lQXNCaWxsaW5nKQoJewoJCSR0aGlzLT5zaGlwcGluZ1NhbWVBc0JpbGxpbmcgPSAkc2hpcHBpbmdTYW1lQXNCaWxsaW5nOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpc1NoaXBwaW5nU2FtZUFzQmlsbGluZygpCgl7CgkJcmV0dXJuICR0aGlzLT5zaGlwcGluZ1NhbWVBc0JpbGxpbmc7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldE9yZGVyU3RhdHVzKCRzdGF0dXMpCgl7CgkJJHRoaXMtPm9yZGVyX3N0YXR1cyA9ICRzdGF0dXM7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldE9yZGVyU3RhdHVzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm9yZGVyX3N0YXR1czsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U2hpcHBpbmcoJGRvRm9ybWF0PWZhbHNlKQoJewoJCWlmICgkZG9Gb3JtYXQpCgkJewoJCQlyZXR1cm4gX21tZihmbG9hdHZhbCgkdGhpcy0+c2hpcHBpbmcpLCR0aGlzLT5jdXJyZW5jeSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBudW1iZXJfZm9ybWF0KGZsb2F0dmFsKCR0aGlzLT5zaGlwcGluZyksTU1fQ3VycmVuY3lVdGlsOjpnZXRQcmVjaXNpb25Gb3JDdXJyZW5jeSgkdGhpcy0+Y3VycmVuY3kpLCcuJywnJyk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRTaGlwcGluZygkc2hpcHBpbmcpCgl7CgkJJHRoaXMtPnNoaXBwaW5nID0gZmxvYXR2YWwoc3RyX3JlcGxhY2UoIlwkIiwiIiwkc2hpcHBpbmcpKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U2hpcHBpbmdPcHRpb25LZXkoKQoJewoJCXJldHVybiAkdGhpcy0+c2hpcHBpbmdPcHRpb25LZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFNoaXBwaW5nT3B0aW9uS2V5KCRzaGlwcGluZ09wdGlvbktleSkKCXsKCQkkdGhpcy0+c2hpcHBpbmdPcHRpb25LZXkgPSAkc2hpcHBpbmdPcHRpb25LZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nT3B0aW9uRGVzY3JpcHRpb24oKQoJewoJCXJldHVybiAkdGhpcy0+c2hpcHBpbmdPcHRpb25EZXNjcmlwdGlvbjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U2hpcHBpbmdPcHRpb25EZXNjcmlwdGlvbigkc2hpcHBpbmdPcHRpb25EZXNjcmlwdGlvbikKCXsKCQkkdGhpcy0+c2hpcHBpbmdPcHRpb25EZXNjcmlwdGlvbiA9ICRzaGlwcGluZ09wdGlvbkRlc2NyaXB0aW9uOwoJfQoJCgkKCS8qKgoJICogQnkgY29udmVudGlvbiwgYSBzaGlwcGluZyBvcHRpb24ga2V5IGhhcyB0aGUgZm9ybWF0ICI8VE9LRU4+LTx1bmlxdWUgaWRlbnRpZmllcj4iLiBUaGlzIG1ldGhvZCB1c2VzIHRoZSB0b2tlbiB0byByZXRyaWV2ZSB0aGUgc2VsZWN0ZWQgc2hpcHBpbmcgbWV0aG9kIGFuZCBvcHRpb24sIAoJICogYW5kIHNldHMgdGhlIHNoaXBwaW5nIGNvc3QgYW5kIGRlc2NyaXB0aW9uIGJhc2VkIG9uIHRoYXQKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkc2hpcHBpbmdPcHRpb25LZXkKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzLCBvciBjb250YWluaW5nIGEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRTaGlwcGluZ01ldGhvZEZyb21LZXkoJHNoaXBwaW5nT3B0aW9uS2V5KQoJewoJCWlmIChlbXB0eSgkc2hpcHBpbmdPcHRpb25LZXkpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3Igc2V0dGluZyBzaGlwcGluZyBjb3N0cyBmb3Igb3JkZXI6IE5vIHNoaXBwaW5nIG9wdGlvbiBzZWxlY3RlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRzcGxpdCA9IGV4cGxvZGUoIi0iLCAkc2hpcHBpbmdPcHRpb25LZXkpOwoJCSR0b2tlbiA9ICRzcGxpdFswXTsKCQkKCQkvL2dldCB0aGUgc2hpcHBpbmcgbWV0aG9kCgkJJHNoaXBwaW5nTWV0aG9kID0gTU1fU2hpcHBpbmdNZXRob2Q6OmdldFNoaXBwaW5nTWV0aG9kQnlUb2tlbigkdG9rZW4pOwoJCWlmIChpc19udWxsKCRzaGlwcGluZ01ldGhvZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBzZXR0aW5nIHNoaXBwaW5nIGNvc3RzIGZvciBvcmRlcjogU2hpcHBpbmcgbWV0aG9kIG5vdCBmb3VuZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vdXNlIHRoZSBtZXRob2QgdG8gcmV0dXJuIHRoZSBzZWVsZWN0ZWQgb3B0aW9uIGFuZCBpdHMgcmF0ZQoJCSRvcHRpb25SZXRyaWV2YWxSZXNwb25zZSA9ICRzaGlwcGluZ01ldGhvZC0+Z2V0U2hpcHBpbmdPcHRpb25CeUtleSgkdGhpcywgJHNoaXBwaW5nT3B0aW9uS2V5KTsKCQlpZiAoJG9wdGlvblJldHJpZXZhbFJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJG9wdGlvblJldHJpZXZhbFJlc3BvbnNlOwoJCX0KCQkKCQkkc2hpcHBpbmdPcHRpb24gPSAkb3B0aW9uUmV0cmlldmFsUmVzcG9uc2UtPm1lc3NhZ2U7CgkJJHRoaXMtPnNldFNoaXBwaW5nKCRzaGlwcGluZ09wdGlvbi0+Z2V0UmF0ZSgpKTsKCQkkdGhpcy0+c2V0U2hpcHBpbmdPcHRpb25EZXNjcmlwdGlvbigiKHskc2hpcHBpbmdNZXRob2QtPmdldE5hbWUoKX0pIHskc2hpcHBpbmdPcHRpb24tPmdldE5hbWUoKX0iKTsKCQkkdGhpcy0+c2V0U2hpcHBpbmdPcHRpb25LZXkoJHNoaXBwaW5nT3B0aW9uS2V5KTsKCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFN1YnRvdGFsKCRkb0Zvcm1hdD1mYWxzZSkKCXsKCQlpZiAoJGRvRm9ybWF0KQoJCXsKCQkJcmV0dXJuIF9tbWYoZmxvYXR2YWwoJHRoaXMtPnN1YnRvdGFsKSwkdGhpcy0+Y3VycmVuY3kpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbnVtYmVyX2Zvcm1hdChmbG9hdHZhbCgkdGhpcy0+c3VidG90YWwpLE1NX0N1cnJlbmN5VXRpbDo6Z2V0UHJlY2lzaW9uRm9yQ3VycmVuY3koJHRoaXMtPmN1cnJlbmN5KSwnLicsJycpOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGlzY291bnQoJGRvRm9ybWF0PWZhbHNlKQoJewoJCWlmICgkZG9Gb3JtYXQpCgkJewoJCQlyZXR1cm4gX21tZihmbG9hdHZhbCgkdGhpcy0+ZGlzY291bnQpLCR0aGlzLT5jdXJyZW5jeSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBudW1iZXJfZm9ybWF0KGZsb2F0dmFsKCR0aGlzLT5kaXNjb3VudCksTU1fQ3VycmVuY3lVdGlsOjpnZXRQcmVjaXNpb25Gb3JDdXJyZW5jeSgkdGhpcy0+Y3VycmVuY3kpLCcuJywnJyk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDdXJyZW5jeSgkY3VycmVuY3kpCgl7CgkJJHRoaXMtPmN1cnJlbmN5ID0gJGN1cnJlbmN5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRDdXJyZW5jeSgpCgl7CgkJcmV0dXJuICR0aGlzLT5jdXJyZW5jeTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGFBc1N0ZENsYXNzKCkKCXsgCgkJJG9yZGVyT2JqID0gbmV3IHN0ZENsYXNzKCk7CgkJJG9yZGVyT2JqLT5vcmRlck51bWJlciA9ICR0aGlzLT5nZXRPcmRlck51bWJlcigpOwoJCSRvcmRlck9iai0+aXBBZGRyZXNzID0gJHRoaXMtPmdldElQQWRkcmVzcygpOwoJCSRvcmRlck9iai0+b3JkZXJTdGF0dXMgPSAkdGhpcy0+Z2V0T3JkZXJTdGF0dXMoKTsKCQkkb3JkZXJPYmotPmFmZmlsaWF0ZUlkID0gJHRoaXMtPmdldEFmZmlsaWF0ZUlkKCk7CgkJJG9yZGVyT2JqLT5zdWJBZmZpbGlhdGVJZCA9ICR0aGlzLT5nZXRTdWJBZmZpbGlhdGVJZCgpOwoJCSRvcmRlck9iai0+aXNTaGlwcGFibGUgPSAkdGhpcy0+aXNTaGlwcGFibGUoKTsKCQkkb3JkZXJPYmotPmJpbGxpbmdTYW1lQXNTaGlwcGluZyA9ICR0aGlzLT5pc1NoaXBwaW5nU2FtZUFzQmlsbGluZygpOwoJCQoJCSRvcmRlck9iai0+Y3VycmVuY3kgPSAkdGhpcy0+Z2V0Q3VycmVuY3koKTsKCQkkb3JkZXJPYmotPnRheCA9ICR0aGlzLT5nZXRUYXgoZmFsc2UpOwoJCSRvcmRlck9iai0+c2hpcHBpbmcgPSAkdGhpcy0+Z2V0U2hpcHBpbmcoZmFsc2UpOwoJCSRvcmRlck9iai0+ZGlzY291bnQgPSAkdGhpcy0+Z2V0RGlzY291bnQoZmFsc2UpOwoJCSRvcmRlck9iai0+c3ViVG90YWwgPSAkdGhpcy0+Z2V0U3VidG90YWwoZmFsc2UpOwoJCSRvcmRlck9iai0+dG90YWwgPSAkdGhpcy0+Z2V0VG90YWwoZmFsc2UpOwoJCQoJCSRwcm9kdWN0cyA9ICR0aGlzLT5nZXRQcm9kdWN0cygpOwoJCSRvcmRlck9iai0+b3JkZXJQcm9kdWN0cyA9ICR0aGlzLT5vcmRlckl0ZW1zVG9TdGRDbGFzcygkcHJvZHVjdHMpOyAKCQkKCQkkcHJvcmF0aW9ucyA9ICR0aGlzLT5nZXRQcm9yYXRpb25zKCk7CgkJJG9yZGVyT2JqLT5vcmRlclByb3JhdGlvbnMgPSAkdGhpcy0+b3JkZXJJdGVtc1RvU3RkQ2xhc3MoJHByb3JhdGlvbnMpOyAKCQkKCQkkY291cG9ucyA9ICR0aGlzLT5nZXRDb3Vwb25zKCk7CgkJJG9yZGVyT2JqLT5jb3Vwb25zID0gICR0aGlzLT5vcmRlckl0ZW1zVG9TdGRDbGFzcygkY291cG9ucyk7IAoJCSAKCQkkY3VzdG9tZXJBZGRyZXNzID0gICR0aGlzLT5iaWxsaW5nQWRkcmVzczsKCQkkb3JkZXJPYmotPmJpbGxpbmdBZGRyZXNzID0gbmV3IHN0ZENsYXNzKCk7CgkJJG9yZGVyT2JqLT5iaWxsaW5nQWRkcmVzcy0+YWRkcmVzczEgPSAkY3VzdG9tZXJBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKTsKCQkkb3JkZXJPYmotPmJpbGxpbmdBZGRyZXNzLT5hZGRyZXNzMiA9ICRjdXN0b21lckFkZHJlc3MtPmdldEFkZHJlc3NMaW5lMigpOwoJCSRvcmRlck9iai0+YmlsbGluZ0FkZHJlc3MtPmNpdHkgPSAkY3VzdG9tZXJBZGRyZXNzLT5nZXRDaXR5KCk7CgkJJG9yZGVyT2JqLT5iaWxsaW5nQWRkcmVzcy0+c3RhdGUgPSAkY3VzdG9tZXJBZGRyZXNzLT5nZXRTdGF0ZSgpOwoJCSRvcmRlck9iai0+YmlsbGluZ0FkZHJlc3MtPnppcCA9ICRjdXN0b21lckFkZHJlc3MtPmdldFBvc3RhbENvZGUoKTsKCQkkb3JkZXJPYmotPmJpbGxpbmdBZGRyZXNzLT5waG9uZSA9ICRjdXN0b21lckFkZHJlc3MtPmdldFBob25lKCk7CgkJCgkJJHNoaXBwaW5nQWRkcmVzcyA9ICAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzOwoJCSRvcmRlck9iai0+c2hpcHBpbmdBZGRyZXNzID0gbmV3IHN0ZENsYXNzKCk7CgkJJG9yZGVyT2JqLT5zaGlwcGluZ0FkZHJlc3MtPmFkZHJlc3MxID0gJHNoaXBwaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUxKCk7CgkJJG9yZGVyT2JqLT5zaGlwcGluZ0FkZHJlc3MtPmFkZHJlc3MyID0gJHNoaXBwaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUyKCk7CgkJJG9yZGVyT2JqLT5zaGlwcGluZ0FkZHJlc3MtPmNpdHkgPSAkc2hpcHBpbmdBZGRyZXNzLT5nZXRDaXR5KCk7CgkJJG9yZGVyT2JqLT5zaGlwcGluZ0FkZHJlc3MtPnN0YXRlID0gJHNoaXBwaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKTsKCQkkb3JkZXJPYmotPnNoaXBwaW5nQWRkcmVzcy0+emlwID0gJHNoaXBwaW5nQWRkcmVzcy0+Z2V0UG9zdGFsQ29kZSgpOwoJCSRvcmRlck9iai0+c2hpcHBpbmdBZGRyZXNzLT5waG9uZSA9ICRzaGlwcGluZ0FkZHJlc3MtPmdldFBob25lKCk7CgkJcmV0dXJuICRvcmRlck9iajsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0SXNUZXN0KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmlzVGVzdDsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIHNldElzVGVzdCgkaXNUZXN0KQoJewoJCSR0aGlzLT5pc1Rlc3QgPSAkaXNUZXN0OwoJCSRvcmRlckl0ZW1zID0gJHRoaXMtPmdldFByb2R1Y3RzKCkgKyAkdGhpcy0+Z2V0Q291cG9ucygpICsgJHRoaXMtPmdldFByb3JhdGlvbnMoKTsKCQlmb3JlYWNoICgkb3JkZXJJdGVtcyBhcyAkaXRlbSkKCQl7CgkJCSRpdGVtLT5zZXRJc1Rlc3QoJGlzVGVzdCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpc1Rlc3QoKQoJewoJCXJldHVybiAkdGhpcy0+aXNUZXN0OwoJfQoKCS8qCgkgKiBoZWxwZXIgbWV0aG9kIGZvciBicmVha2luZyBkb3duIG9yZGVyKiBhcnJheXMgb2Ygb3JkZXJJdGVtcy4KCSAqIEBwYXJhbSBhcnJheSAkb3JkZXJJdGVtQXJyIG9mIG9yZGVySXRlbXMKCSAqIEByZXR1cm4gc3RkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBhcnJheSBvZiBNTV9PcmRlckl0ZW0gb2JqZWN0cyBhcyBzdGRDbGFzcwoJICovICAKCXByaXZhdGUgZnVuY3Rpb24gb3JkZXJJdGVtc1RvU3RkQ2xhc3MoJG9yZGVySXRlbUFycikKCXsKCQkkb3JkZXJPYmogPSBhcnJheSgpOyAKCQlpZihpc19hcnJheSgkb3JkZXJJdGVtQXJyKSl7CgkJCWZvcmVhY2goJG9yZGVySXRlbUFyciBhcyAkaWQ9PiRvcmRlckl0ZW0pewoJCQkJaWYoJG9yZGVySXRlbSBpbnN0YW5jZW9mIE1NX09yZGVySXRlbSl7CgkJCQkJJG9yZGVyT2JqWyRpZF0gPSBuZXcgc3RkQ2xhc3MoKTsKCQkJCQkkb3JkZXJPYmpbJGlkXS0+aWQgPSAkb3JkZXJJdGVtLT5nZXRJZCgpOwoJCQkJCSRvcmRlck9ialskaWRdLT5pdGVtSWQgPSAkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKTsKCQkJCQkkb3JkZXJPYmpbJGlkXS0+ZGVzY3JpcHRpb24gPSAkb3JkZXJJdGVtLT5nZXREZXNjcmlwdGlvbigpOwoJCQkJCSRvcmRlck9ialskaWRdLT5hbW91bnQgPSAkb3JkZXJJdGVtLT5nZXRBbW91bnQoKTsKCQkJCQkkb3JkZXJPYmpbJGlkXS0+cXVhbnRpdHkgPSAkb3JkZXJJdGVtLT5nZXRRdWFudGl0eSgpOwoJCQkJCSRvcmRlck9ialskaWRdLT50b3RhbCA9ICRvcmRlckl0ZW0tPmdldFRvdGFsKCk7CgkJCQkJJG9yZGVyT2JqWyRpZF0tPnN0YXR1cyA9ICRvcmRlckl0ZW0tPmdldFN0YXR1cygpOwoJCQkJCSRvcmRlck9ialskaWRdLT5pc0dpZnQgPSAkb3JkZXJJdGVtLT5pc0dpZnQoKTsKCQkJCQkkb3JkZXJPYmpbJGlkXS0+aXNSZWN1cnJpbmcgPSAkb3JkZXJJdGVtLT5pc1JlY3VycmluZygpOwoJCQkJCSRvcmRlck9ialskaWRdLT5yZWN1cnJpbmdBbW91bnQgPSAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKTsKCQkJCQkkb3JkZXJPYmpbJGlkXS0+cmVjdXJyaW5nRGlzY291bnQgPSAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdEaXNjb3VudCgpOwoJCQkJCSRvcmRlck9ialskaWRdLT50cmlhbEFtb3VudCA9ICRvcmRlckl0ZW0tPmdldFRyaWFsQW1vdW50KCk7CgkJCQkJJG9yZGVyT2JqWyRpZF0tPnRyaWFsRHVyYXRpb24gPSAkb3JkZXJJdGVtLT5nZXRUcmlhbER1cmF0aW9uKCk7CgkJCQkJJG9yZGVyT2JqWyRpZF0tPnRyaWFsRnJlcXVlbmN5ID0gJG9yZGVySXRlbS0+Z2V0VHJpYWxGcmVxdWVuY3koKTsKCQkJCQkkb3JkZXJPYmpbJGlkXS0+cmViaWxsUGVyaW9kID0gJG9yZGVySXRlbS0+Z2V0UmViaWxsUGVyaW9kKCk7CgkJCQkJJG9yZGVyT2JqWyRpZF0tPnJlYmlsbEZyZXF1ZW5jeSA9ICRvcmRlckl0ZW0tPmdldFJlYmlsbEZyZXF1ZW5jeSgpOwoJCQkJCSRvcmRlck9ialskaWRdLT5tYXhSZWJpbGxzID0gJG9yZGVySXRlbS0+Z2V0TWF4UmViaWxscygpOwoJCQkJCSRvcmRlck9ialskaWRdLT5jdXJyZW5jeSA9ICRvcmRlckl0ZW0tPmdldEN1cnJlbmN5KCk7CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuICRvcmRlck9iajsKCX0KCQoJCgkvKioKCSAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgc3RhdHVzIGFuZCB1cGRhdGVzIHRoZSBvcmRlciBzdGF0dXMgaWYgdGhlIG9yZGVyIGhhcyBhbHJlYWR5IGJlZW4gcGVyc2lzdGVkIAoJICoKCSAqIEBwYXJhbSAkb3JkZXJTdGF0dXMgVGhlIHN0YXR1cyB0byBzYXZlCgkgKiAKCSAqIEByZXR1cm4gVGhlIHJlc3VsdCBvZiB0aGUgd3BkYi0+dXBkYXRlKCkgY2FsbAoJICovCglwdWJsaWMgZnVuY3Rpb24gc2F2ZU9yZGVyU3RhdHVzKCRvcmRlclN0YXR1cykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGlzX251bWVyaWMoJG9yZGVyU3RhdHVzKSkKCQl7CgkJCSR0aGlzLT5zZXRPcmRlclN0YXR1cygkb3JkZXJTdGF0dXMpOwoJCQkkb3JkZXJBbHJlYWR5UGVyc2lzdGVkID0gKGludHZhbCgkdGhpcy0+aWQpID4wKT90cnVlOmZhbHNlOwoJCQlpZiAoJG9yZGVyQWxyZWFkeVBlcnNpc3RlZCkKCQkJewoJCQkJJHJlc3VsdCA9ICR3cGRiLT51cGRhdGUoTU1fVEFCTEVfT1JERVJTLCBhcnJheSgic3RhdHVzIj0+JG9yZGVyU3RhdHVzKSwgYXJyYXkoImlkIiA9PiAkdGhpcy0+aWQpKTsKCQkJfQoJCX0KCQlyZXR1cm4gJHJlc3VsdDsKCX0KCQp9Cg==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(131, 'loginform', 'Y2xhc3MgTU1fTG9naW5Gb3JtIGV4dGVuZHMgTU1fQWJzdHJhY3RGb3JtCnsJCglwdWJsaWMgJHVzZXJuYW1lOwoJcHVibGljICRzdWNjZXNzOwoJCgkvKioKCSAqIERlZmF1bHQgY29uc3RydWN0b3IuIFRha2VzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwoJICogQHBhcmFtIEFycmF5ICRwYXJhbXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgZm9ybSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwYXJhbXM9bnVsbCkKCXsJCgkJaWYoIWlzX251bGwoJHBhcmFtcykpCgkJewoJCQlpZihpc19hcnJheSgkcGFyYW1zKSAmJiBjb3VudCgkcGFyYW1zKSA+IDApCgkJCXsKCQkJCWZvcmVhY2goJHBhcmFtcyBhcyAkaz0+JHYpCgkJCQl7CgkJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJCSQka2V5ID0gJHY7CgkJCQl9CgkJCX0KCQkJCgkJCSR0aGlzLT5pbml0aWFsaXplKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpCgl7CgkJJGVycm9ycyAgID0gTU1fTWVzc2FnZXM6OmdldChNTV9TZXNzaW9uOjokS0VZX0VSUk9SUyk7CgkJJG1lc3NhZ2VzID0gTU1fTWVzc2FnZXM6OmdldChNTV9TZXNzaW9uOjokS0VZX01FU1NBR0VTKTsKCQkkdXNlcm5hbWUgPSBNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xPR0lOX0ZPUk1fVVNFUk5BTUUpOwoJCQoJCU1NX1Nlc3Npb246OmNsZWFyKE1NX1Nlc3Npb246OiRLRVlfTE9HSU5fRk9STV9VU0VSX0lEKTsKCQkKCQlpZigkdXNlcm5hbWUgIT09IGZhbHNlKQoJCXsKCQkJJHRoaXMtPnVzZXJuYW1lID0gJHVzZXJuYW1lOwoJCQlNTV9TZXNzaW9uOjpjbGVhcihNTV9TZXNzaW9uOjokS0VZX0xPR0lOX0ZPUk1fVVNFUk5BTUUpOwoJCX0KCQkKCQlpZihpc19hcnJheSgkZXJyb3JzKSkKCQl7CgkJCSR0aGlzLT5lcnJvciA9IGltcGxvZGUoIjxiciAvPiIsICRlcnJvcnMpOwoJCQkKCQl9CgkJCgkJaWYoaXNfYXJyYXkoJG1lc3NhZ2VzKSkKCQl7CgkJCSR0aGlzLT5zdWNjZXNzID0gaW1wbG9kZSgiPGJyIC8+IiwgJG1lc3NhZ2VzKTsKCQl9CgkJCgkJTU1fTWVzc2FnZXM6OmNsZWFyKCk7CgkJCgkJJHRoaXMtPmlzVmFsaWQgPSB0cnVlOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgYWxsIG9mIHRoZSBIVE1MIHRoYXQgc2hvdWxkIHNob3cgdXAgYXQgCgkgKiB0aGUgdG9wIG9mIHRoZSBmb3JtIGJhc2VkIG9uIHRoZSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uLgoJICogQHJldHVybiBTdHJpbmcgaGVhZGVyIEhUTUwgZm9yIHRoZSBjaGVja291dCBmb3JtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcm1IZWFkZXIoKQoJewkJCgkJJHRoaXMtPmdldEphdmFzY3JpcHRJbmNsdWRlcygpOwoJCQoJCSRhY3Rpb25VcmwgPSBlc2NfdXJsKHNpdGVfdXJsKCd3cC1sb2dpbi5waHAnLCAnbG9naW5fcG9zdCcpKTsKCQkKCQlpZihNTV9VdGlsczo6aXNTU0woKSkKCQl7CgkJCSRhY3Rpb25VcmwgPSBwcmVnX3JlcGxhY2UoIi8oaHR0cFw6KS8iLCAiaHR0cHM6IiwgJGFjdGlvblVybCk7CgkJfQoJCQoJCSRodG1sID0gIjxmb3JtIGFjdGlvbj1cIiIuJGFjdGlvblVybC4iXCIgbWV0aG9kPVwicG9zdFwiIGlkPVwibW0tbG9naW4tZm9ybVwiPgoiOwoJCXJldHVybiAkaHRtbDsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIGFsbCBvZiB0aGUgSFRNTCB0aGF0IHNob3VsZCBzaG93IHVwIGF0CgkgKiB0aGUgYm90dG9tIG9mIHRoZSBmb3JtIGJhc2VkIG9uIHRoZSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uLgoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBmb290ZXIgSFRNTCBmb3IgdGhlIGNoZWNrb3V0IGZvcm0KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRm9ybUZvb3RlcigpCgl7CQoJCSRodG1sID0gIjwvZm9ybT4KIjsKCQkkaHRtbCAuPSAkdGhpcy0+Z2V0SW5pdEphdmFzY3JpcHQoKTsKCQlyZXR1cm4gJGh0bWw7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBpbmNsdWRlIHN0YXRlbWVudHMgZm9yIHJlcXVpcmVkIGphdmFzY3JpcHQgZmlsZXMuCgkgKiBAcmV0dXJuIFN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBqYXZhc2NyaXB0IGZvciBpbmNsdWRpbmcgcmVxdWlyZWQgamF2YXNjcmlwdCBmaWxlcy4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEphdmFzY3JpcHRJbmNsdWRlcygpCgl7CgkJJHZlcnNpb24gPSBNZW1iZXJNb3VzZTo6Z2V0UGx1Z2luVmVyc2lvbigpOwoJCSR1c2VNTUNTUyA9IChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9VU0VfTU1fQ1NTX0xPR0lOKSA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwoJCQoJCWlmKCR1c2VNTUNTUykKCQl7CgkJCXdwX2VucXVldWVfc3R5bGUoIm1lbWJlcm1vdXNlLWxvZ2luLWNzcyIsIHBsdWdpbnNfdXJsKE1NX1BMVUdJTl9OQU1FLiIvcmVzb3VyY2VzL2Nzcy91c2VyL21tLWxvZ2luLmNzcyIpLCBhcnJheSgpLCAkdmVyc2lvbik7CgkJfQoJCQoJCXdwX2VucXVldWVfc2NyaXB0KCJtZW1iZXJtb3VzZS1sb2dpbi1mb3JtIiwgcGx1Z2luc191cmwoTU1fUExVR0lOX05BTUUuIi9yZXNvdXJjZXMvanMvdXNlci9tbS1sb2dpbi1mb3JtLmpzIiksIGFycmF5KCksICR2ZXJzaW9uLCB0cnVlKTsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGphdmFzY3JpcHQgdG8gaW5pdGlhbGl6ZSB0aGUgTG9naW4gZm9ybS4gCgkgKiBAcGFyYW0gYXJyYXkgJGRlZmF1bHREYXRhIHRoaXMgY29udGFpbnMgdGhlIGRlZmF1bHQgZGF0YSB1c2VkIHRvIHByZXBvcHVsYXRlIGNlcnRhaW4gZm9ybSBlbGVtZW50cwoJICogQHJldHVybiBTdHJpbmcgdGhhdCBjb250YWlucyB0aGUgamF2YXNjcmlwdCB0byBpbml0aWFsaXplcyB0aGUgY2hlY2tvdXQgZm9ybS4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEluaXRKYXZhc2NyaXB0KCkKCXsJCgkJcmV0dXJuICI8c2NyaXB0PnZhciBtbV9ub25jZV9uYW1lX2xvZ2luX2Zvcm0gPSAnIiAuIE1NX0xvZ2luRm9ybVZpZXc6OiRNTV9OT05DRV9OQU1FX0xPR0lOX0ZPUk0gLiAiJzs8L3NjcmlwdD4iOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9Gb3JtX1NlY3Rpb24gdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY2hlY2tpbmcgaWYgdGhlIGN1cnJlbnQgdXNlciAKCSAqIHNob3VsZCBzZWUgdGhlIGNvbnRlbnRzIG9mIHRoaXMgc2VjdGlvbiBiYXNlZCBvbiB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fc2VjdGlvbigkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3skY29kZX0nIFNtYXJ0VGFnIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIExvZ2luIGZvcm1zLiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRmllbGQgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGZvcm0gZmllbGQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZmllbGQoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCQoJCWlmKCFpc3NldCgkdHlwZSkpCgkJewoJCQkkdHlwZSA9ICJpbnB1dCI7CgkJfQoJCQoJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQl7CgkJCWNhc2UgImlucHV0IjoKCQkJCWlmKGlzc2V0KCRuYW1lKSkKCQkJCXsKCQkJCQlzd2l0Y2goc3RydG9sb3dlcigkbmFtZSkpCgkJCQkJewoJCQkJCQljYXNlICJ1c2VybmFtZSI6CgkJCQkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImxvZ1wiIG5hbWU9XCJsb2dcIiBjbGFzcz1cIm1tLWZpZWxkXCIgIjsKCQkJCQkJCQoJCQkJCQkJaWYoIWVtcHR5KCRmb3JtLT51c2VybmFtZSkpCgkJCQkJCQl7CgkJCQkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9XCJ7JGZvcm0tPnVzZXJuYW1lfVwiICI7CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIi8+IjsKCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCWNhc2UgInBhc3N3b3JkIjoKCQkJCQkJCSRvdXRwdXRTdHIgLj0gd3Bfbm9uY2VfZmllbGQoIE1NX0xvZ2luRm9ybVZpZXc6OiRNTV9OT05DRV9BQ1RJT05fTE9HSU5fRk9STSwgTU1fTG9naW5Gb3JtVmlldzo6JE1NX05PTkNFX05BTUVfTE9HSU5fRk9STSwgdHJ1ZSwgZmFsc2UpOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiIGlkPVwicHdkXCIgbmFtZT1cInB3ZFwiIGNsYXNzPVwibW0tZmllbGRcIiAvPiI7CgkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQljYXNlICJyZW1lbWJlcm1lIjoKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxsYWJlbCBmb3I9XCJyZW1lbWJlcm1lXCIgY2xhc3M9XCJtbS1yZW1lbWJlci1tZVwiPgoiOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IG5hbWU9XCJyZW1lbWJlcm1lXCIgaWQ9XCJyZW1lbWJlcm1lXCIgdHlwZT1cImNoZWNrYm94XCIgY2hlY2tlZD1cImNoZWNrZWRcIiB2YWx1ZT1cImZvcmV2ZXJcIiAvPgoiOwogICAgICAgICAgCQkJCQlpZihpc3NldCgkbGFiZWwpKSAKICAgICAgICAgIAkJCQkJewogICAgICAgICAgCQkJCQkJJG91dHB1dFN0ciAuPSAkbGFiZWw7CiAgICAgICAgICAJCQkJCX0KICAgICAgICAgIAkJCQkJCiAgICAgICAgICAJCQkJCSRvdXRwdXRTdHIgLj0gIjwvbGFiZWw+IjsKCQkJCQkJCWJyZWFrOwoKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBJbnZhbGlkIG5hbWUgb2YgJ3skbmFtZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IHdpdGggdHlwZSB7JHR5cGV9LiI7CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAnbmFtZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9IHdpdGggdHlwZSB7JHR5cGV9LiI7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCB0eXBlIG9mICd7JHR5cGV9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSI7CgkJCQlicmVhazsKCQl9CgkJCQoJCXJldHVybiAkb3V0cHV0U3RyOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9Gb3JtX0RhdGEgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGRhdGEgZWxlbWVudCBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQgYW5kIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9kYXRhKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAneyRjb2RlfScgU21hcnRUYWcgaXMgbm90IHN1cHBvcnRlZCBmb3IgTG9naW4gZm9ybXMuIjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9NZXNzYWdlIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIHJlbmRlcmluZyB0aGUgCgkgKiBtZXNzYWdlIGVsZW1lbnQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fbWVzc2FnZSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiIjsKCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJCXsKCQkJCWNhc2UgImVycm9yIjoKCQkJCQlpZigkZm9ybS0+ZXJyb3IgIT0gIiIpCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICI8cCBjbGFzcz1cIm1tLWVycm9yXCI+Ii4kZm9ybS0+ZXJyb3IuIjwvcD4iOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSAic3VjY2VzcyI6CgkJCQkJaWYoJGZvcm0tPnN1Y2Nlc3MgIT0gIiIpCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICI8cCBjbGFzcz1cIm1tLXN1Y2Nlc3NcIj4iLiRmb3JtLT5zdWNjZXNzLiI8L3A+IjsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIHR5cGUgb2YgJ3skdHlwZX0nIHBhc3NlZCB0byB7JGNvZGV9IjsKCQkJCQlicmVhazsKCQkJfQoJCQkKCQkJcmV0dXJuICRvdXRwdXRTdHI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3R5cGUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgeyRjb2RlfSBTbWFydFRhZyI7CgkJfQoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9Gb3JtX0J1dHRvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciAKCSAqIHJldHVybmluZyB0aGUgYXBwcm9wcmlhdGUgamF2YXNjcmlwdCB0byBzdWJtaXQgdGhlIGZvcm0gYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fYnV0dG9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJJG91dHB1dFN0ciA9ICIiOwoJCgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQkkZm9ybSA9IE1NX09iamVjdENhY2hlOjpnZXQoTU1fT2JqZWN0Q2FjaGU6OiRLRVlfTEFTVF9GT1JNKTsKCQoJCWlmKGlzc2V0KCR0eXBlKSkKCQl7CgkJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQkJewoJCQkJY2FzZSAibG9naW4iOgoJCQkJCWlmKCFpc3NldCgkbGFiZWwpKQoJCQkJCXsKCQkJCQkJJGxhYmVsID0gIkxvZ2luIjsKCQkJCQl9CgkJCQkJaWYoIWlzc2V0KCRjb2xvcikpCgkJCQkJewoJCQkJCQkkY29sb3IgPSAiIjsKCQkJCQl9CgkJCQkJaWYoIWlzc2V0KCRjbGFzcykpCgkJCQkJewoJCQkJCQkkY3VzdG9tQ2xhc3MgPSAibW0tYnV0dG9uIHskY29sb3J9IjsKCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCSRjdXN0b21DbGFzcyA9ICRjbGFzczsKCQkJCQl9CgkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9XCJzdWJtaXRcIiBuYW1lPVwic3VibWl0XCIgdmFsdWU9XCJ7JGxhYmVsfVwiIGlkPVwibW0tbG9naW4tYnV0dG9uXCIgY2xhc3M9XCJ7JGN1c3RvbUNsYXNzfVwiIC8+IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIHR5cGUgb2YgJ3skdHlwZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCQlicmVhazsKCQkJfQoJCQkKCQkJcmV0dXJuICRvdXRwdXRTdHI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3R5cGUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgeyRjb2RlfSBTbWFydFRhZyI7CgkJfQkKCX0KfQoK', 0, '2018-11-21 06:38:54'),
(132, 'emailserviceprovidercontroller', 'LyoqCiAqCiAqIFRoZSBFbWFpbCBTZXJ2aWNlIFByb3ZpZGVyIENvbnRyb2xsZXIgcHJvdmlkZXMgdGhlIG1haW4gaW50ZXJmYWNlIHRoYXQgdGhlIHJlc3Qgb2YgdGhlIGFwcGxpY2F0aW9uIHdpbGwgdXNlIHRvIGV4ZWN1dGUgbWV0aG9kcyBvbiB0aGUKICogYWN0aXZlIGVtYWlsIHNlcnZpY2UgcHJvdmlkZXIKICoKICovCmNsYXNzIE1NX0VtYWlsU2VydmljZVByb3ZpZGVyQ29udHJvbGxlciAKewkKCXByaXZhdGUgJHN1YnNjcmliZWRMaXN0SWQ7Cglwcml2YXRlICRzdWJzY3JpYmVkUHJvdmlkZXJJZDsKCXByaXZhdGUgJGJ1bmRsZVN1YnNjcmliZWRMaXN0SWQ7Cglwcml2YXRlICRidW5kbGVTdWJzY3JpYmVkUHJvdmlkZXJJZDsKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzZXR1cCgpCgl7CgkJJGVzcGMgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJDb250cm9sbGVyKCk7CgkJYWRkX2FjdGlvbihNTV9FdmVudDo6JE1FTUJFUl9BREQsIGFycmF5KCRlc3BjLCAnbWVtYmVyQWRkZWRIYW5kbGVyJykpOwoJCWFkZF9hY3Rpb24oTU1fRXZlbnQ6OiRNRU1CRVJfTUVNQkVSU0hJUF9DSEFOR0UsIGFycmF5KCRlc3BjLCAnbWVtYmVyc2hpcENoYW5nZUhhbmRsZXInKSk7CgkJYWRkX2FjdGlvbihNTV9FdmVudDo6JE1FTUJFUl9BQ0NPVU5UX1VQREFURSwgYXJyYXkoJGVzcGMsICdtZW1iZXJVcGRhdGVIYW5kbGVyJykpOwoJCWFkZF9hY3Rpb24oTU1fRXZlbnQ6OiRNRU1CRVJfU1RBVFVTX0NIQU5HRSwgYXJyYXkoJGVzcGMsICdtZW1iZXJTdGF0dXNDaGFuZ2VIYW5kbGVyJykpOwoJCWFkZF9hY3Rpb24oTU1fRXZlbnQ6OiRNRU1CRVJfREVMRVRFLCBhcnJheSgkZXNwYywgJ21lbWJlckRlbGV0ZUhhbmRsZXInKSk7CgkJYWRkX2FjdGlvbihNTV9FdmVudDo6JEJVTkRMRV9BREQsIGFycmF5KCRlc3BjLCAnYnVuZGxlQWRkZWRIYW5kbGVyJykpOwoJCWFkZF9hY3Rpb24oTU1fRXZlbnQ6OiRCVU5ETEVfU1RBVFVTX0NIQU5HRSwgYXJyYXkoJGVzcGMsICdidW5kbGVTdGF0dXNDaGFuZ2VIYW5kbGVyJykpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbWVtYmVyQWRkZWRIYW5kbGVyKCRkYXRhKQoJewoJCSRwcm92aWRlciA9IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRmFjdG9yeTo6Z2V0UHJvdmlkZXJGb3JNZW1iZXIoJGRhdGFbImVtYWlsIl0pOwoJCQoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkcHJvdmlkZXItPmdldFRva2VuKCkpOwoJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkkcHJvdmlkZXJfZW50aXR5X2lkID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKToiIjsKCQkKCQkvL3RoaXMgaXMgYSBuZXcgcmVnaXN0cmF0aW9uLCBzbyBzaW1wbHkgYWRkIHRvIHRoZSByaWdodCBsaXN0CgkJJGxpc3RJZCA9ICRwcm92aWRlci0+Z2V0TGlzdElkRm9yTWVtYmVyc2hpcExldmVsKCRkYXRhWyJtZW1iZXJzaGlwX2xldmVsIl0pOwoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJGxpc3RJZCkpCgkJewoJCQkkbGlzdElkID0gJGxpc3RJZC0+bWVzc2FnZTsKCQkJJGFkZFJlc3BvbnNlID0gJHByb3ZpZGVyLT5hZGRNZW1iZXJUb0xpc3QoJGRhdGFbImVtYWlsIl0sICRsaXN0SWQpOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkYWRkUmVzcG9uc2UpKQoJCQl7CgkJCQkvLyB1cGRhdGUgc3Vic2NyaWJlciBJRCBvbiBtZW1iZXIKCQkJCWdsb2JhbCAkd3BkYjsKCQkJCSR1cGRhdGVWYWx1ZXMgPSBhcnJheSgic3Vic2NyaWJlZF9saXN0X2lkIiA9PiAkbGlzdElkLCAic3Vic2NyaWJlZF9wcm92aWRlcl9pZCIgPT4gJHByb3ZpZGVyX2VudGl0eV9pZCk7CgkJCQkkd2hlcmVDbGF1c2UgPSBhcnJheSgid3BfdXNlcl9pZCIgPT4gJGRhdGFbIm1lbWJlcl9pZCJdKTsKCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfVVNFUl9EQVRBLCAkdXBkYXRlVmFsdWVzLCAkd2hlcmVDbGF1c2UpOwoJCQl9CgkJfQoJCQoJCS8vcmVtb3ZlIGZyb20gcHJvc3BlY3QgYW5kIGNhbmNlbGxhdGlvbiBsaXN0cwoJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJewoJCQkkcHJvc3BlY3RMaXN0SWQgPSAkcHJvdmlkZXJfZW50aXR5LT5nZXRQcm9zcGVjdExpc3RJRCgpOwoJCQlpZiAoIWVtcHR5KCRwcm9zcGVjdExpc3RJZCkpCgkJCXsKCQkJCSRwcm92aWRlci0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGRhdGFbImVtYWlsIl0sICRwcm9zcGVjdExpc3RJZCk7CgkJCX0KCQkJCQoJCQkkY2FuY2VsbGF0aW9uTGlzdElEID0gJHByb3ZpZGVyX2VudGl0eS0+Z2V0Q2FuY2VsbGF0aW9uTGlzdElEKCk7CgkJCWlmICghZW1wdHkoJGNhbmNlbGxhdGlvbkxpc3RJRCkpCgkJCXsKCQkJCSRwcm92aWRlci0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGRhdGFbImVtYWlsIl0sICRjYW5jZWxsYXRpb25MaXN0SUQpOwoJCQl9CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbWVtYmVyc2hpcENoYW5nZUhhbmRsZXIoJGRhdGEpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRuZXdQcm92aWRlciA9IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRmFjdG9yeTo6Z2V0QWN0aXZlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXIgPSBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckZhY3Rvcnk6OmdldFByb3ZpZGVyRm9yTWVtYmVyKCRkYXRhWyJlbWFpbCJdKTsKCQoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkcHJvdmlkZXItPmdldFRva2VuKCkpOwoJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkkcHJvdmlkZXJfZW50aXR5X2lkID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKToiIjsKCgkJJHRoaXMtPnNldFN1YnNjcmliZWRMaXN0SW5mbygkZGF0YVsibWVtYmVyX2lkIl0pOwoJCQoJCWlmICgkcHJvdmlkZXItPmdldFRva2VuKCkgIT0gJG5ld1Byb3ZpZGVyLT5nZXRUb2tlbigpKQoJCXsKCQkJLy9kaWZmZXJlbnQgcHJvdmlkZXJzLCBkbyBhIHJlbW92ZSBmcm9tIHRoZSBvbGQgcHJvdmlkZXIKCQkJJHByb3ZpZGVyLT5yZW1vdmVNZW1iZXJGcm9tTGlzdCgkZGF0YVsiZW1haWwiXSwgJHRoaXMtPnN1YnNjcmliZWRMaXN0SWQpOwoJCX0KCQkKCQkkY2hhbmdlUmVzcG9uc2UgPSAkbmV3UHJvdmlkZXItPmNoYW5nZU1lbWJlcnNoaXBMZXZlbCgkZGF0YVsiZW1haWwiXSwgJGRhdGFbIm1lbWJlcnNoaXBfbGV2ZWwiXSk7CgkJCgkJaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJGNoYW5nZVJlc3BvbnNlKSkKCQl7CgkJCSRuZXdMaXN0SWQgPSAkbmV3UHJvdmlkZXItPmdldExpc3RJZEZvck1lbWJlcnNoaXBMZXZlbCgkZGF0YVsibWVtYmVyc2hpcF9sZXZlbCJdKTsKCQkJCgkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRuZXdMaXN0SWQpKQoJCQl7CgkJCQkkbmV3X3Byb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCQkJJG5ld19wcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCRuZXdQcm92aWRlci0+Z2V0VG9rZW4oKSk7CgkJCQkkbmV3X3Byb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCQkJCgkJCQlpZiAoJG5ld19wcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkbmV3X3Byb3ZpZGVyX2VudGl0eV9pZCA9ICRuZXdfcHJvdmlkZXJfZW50aXR5LT5nZXRJZCgpOwoJCQkJCSRuZXdMaXN0SWQgPSAkbmV3TGlzdElkLT5tZXNzYWdlOwoJCQkJCSR1cGRhdGVWYWx1ZXMgPSBhcnJheSgic3Vic2NyaWJlZF9saXN0X2lkIiA9PiAkbmV3TGlzdElkLCAic3Vic2NyaWJlZF9wcm92aWRlcl9pZCIgPT4gJG5ld19wcm92aWRlcl9lbnRpdHlfaWQpOwoJCQkJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCJ3cF91c2VyX2lkIiA9PiAkZGF0YVsibWVtYmVyX2lkIl0pOwoJCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfVVNFUl9EQVRBLCAkdXBkYXRlVmFsdWVzLCAkd2hlcmVDbGF1c2UpOwoJCQkJfQoJCQl9CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbWVtYmVyU3RhdHVzQ2hhbmdlSGFuZGxlcigkZGF0YSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJc3dpdGNoKCRkYXRhWyJzdGF0dXMiXSkKCQl7CgkJCWNhc2UgTU1fU3RhdHVzOjokQUNUSVZFOgoJCQkJJHRoaXMtPm1lbWJlckFkZGVkSGFuZGxlcigkZGF0YSk7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX1N0YXR1czo6JENBTkNFTEVEOgoJCQljYXNlIE1NX1N0YXR1czo6JFBBVVNFRDoKCQkJY2FzZSBNTV9TdGF0dXM6OiRFWFBJUkVEOgoJCQkJJHByb3ZpZGVyID0gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJGYWN0b3J5OjpnZXRQcm92aWRlckZvck1lbWJlcigkZGF0YVsiZW1haWwiXSk7CgkJCQoJCQkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHByb3ZpZGVyLT5nZXRUb2tlbigpKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkJCSRwcm92aWRlcl9lbnRpdHlfaWQgPSAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKT8kcHJvdmlkZXJfZW50aXR5LT5nZXRJZCgpOiIiOwoJCQoJCQkJJHRoaXMtPnNldFN1YnNjcmliZWRMaXN0SW5mbygkZGF0YVsibWVtYmVyX2lkIl0pOwoJCQkJCgkJCQkvL3JlbW92ZSBmcm9tIGEgbGlzdCBpZiBzdWJzY3JpYmVkIHRvIG9uZQoJCQkJaWYgKCR0aGlzLT5zdWJzY3JpYmVkTGlzdElkICE9ICIiKQoJCQkJewoJCQkJCSRwcm92aWRlci0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGRhdGFbImVtYWlsIl0sICR0aGlzLT5zdWJzY3JpYmVkTGlzdElkKTsKCQkJCX0KCQkJCQoJCQkJLy9ub3cgYWRkIHRvIGNhbmNlbGxhdGlvbiBsaXN0IGlmIG9uZSBpcyBzZXQKCQkJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJGNhbmNlbGxhdGlvbkxpc3RJRCA9ICRwcm92aWRlcl9lbnRpdHktPmdldENhbmNlbGxhdGlvbkxpc3RJRCgpOwoJCQkJCWlmICghZW1wdHkoJGNhbmNlbGxhdGlvbkxpc3RJRCkpCgkJCQkJewoJCQkJCQkkY2FuY2VsX29wID0gJHByb3ZpZGVyLT5hZGRNZW1iZXJUb0xpc3QoJGRhdGFbImVtYWlsIl0sJGNhbmNlbGxhdGlvbkxpc3RJRCk7CgkJCQkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRjYW5jZWxfb3ApKQoJCQkJCQl7CgkJCQkJCQkkdXBkYXRlVmFsdWVzID0gYXJyYXkoInN1YnNjcmliZWRfbGlzdF9pZCIgPT4gJGNhbmNlbGxhdGlvbkxpc3RJRCwgInN1YnNjcmliZWRfcHJvdmlkZXJfaWQiID0+ICRwcm92aWRlcl9lbnRpdHlfaWQpOwoJCQkJCQkJJHdoZXJlQ2xhdXNlID0gYXJyYXkoIndwX3VzZXJfaWQiID0+ICRkYXRhWyJtZW1iZXJfaWQiXSk7CgkJCQkJCQkkd3BkYi0+dXBkYXRlKE1NX1RBQkxFX1VTRVJfREFUQSwgJHVwZGF0ZVZhbHVlcywgJHdoZXJlQ2xhdXNlKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJYnJlYWs7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbWVtYmVyVXBkYXRlSGFuZGxlcigkZGF0YSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHByb3ZpZGVyID0gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJGYWN0b3J5OjpnZXRQcm92aWRlckZvck1lbWJlcigkZGF0YVsiZW1haWwiXSk7CgoJCSR0aGlzLT5zZXRTdWJzY3JpYmVkTGlzdEluZm8oJGRhdGFbIm1lbWJlcl9pZCJdKTsKCQkKCQlpZiAoIWVtcHR5KCRkYXRhWyJsYXN0X2VtYWlsIl0pKQoJCXsKCQkJJHByb3ZpZGVyLT51cGRhdGVNZW1iZXIoJGRhdGFbImxhc3RfZW1haWwiXSwgJHRoaXMtPnN1YnNjcmliZWRMaXN0SWQsICRkYXRhWyJlbWFpbCJdKTsKCQl9CgkJZWxzZSBpZiAoIWVtcHR5KCRkYXRhWyJsYXN0X2ZpcnN0X25hbWUiXSkgfHwgIWVtcHR5KCRkYXRhWyJsYXN0X2xhc3RfbmFtZSJdKSkKCQl7CgkJCSRwcm92aWRlci0+dXBkYXRlTWVtYmVyKCRkYXRhWyJlbWFpbCJdLCAkdGhpcy0+c3Vic2NyaWJlZExpc3RJZCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gbWVtYmVyRGVsZXRlSGFuZGxlcigkZGF0YSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHRoaXMtPnN1YnNjcmliZWRMaXN0SWQgPSAkZGF0YVsic3Vic2NyaWJlZF9saXN0X2lkIl07CgkJJHRoaXMtPnN1YnNjcmliZWRQcm92aWRlcklkID0gJGRhdGFbInN1YnNjcmliZWRfcHJvdmlkZXJfaWQiXTsKCQkKCQkvLyByZW1vdmUgZnJvbSBhbnkgc3Vic2NyaWJlZCBsaXN0IGJ5IG1lbWJlcnNoaXAgbGV2ZWwKCQlpZiAoIWVtcHR5KCR0aGlzLT5zdWJzY3JpYmVkTGlzdElkKSkKCQl7CgkJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoJHRoaXMtPnN1YnNjcmliZWRQcm92aWRlcklkKTsKCQkJaWYgKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSkKCQkJewoJCQkJJGVtYWlsX3Byb3ZpZGVyID0gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJGYWN0b3J5OjpnZXRQcm92aWRlcigkcHJvdmlkZXJfZW50aXR5LT5nZXRUb2tlbigpKTsKCQkJCQoJCQkJaWYgKCgkZW1haWxfcHJvdmlkZXIgIT0gbnVsbCkgJiYgKCRlbWFpbF9wcm92aWRlciBpbnN0YW5jZW9mIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXIpKQoJCQkJewoJCQkJCSRlbWFpbF9wcm92aWRlci0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGRhdGFbImVtYWlsIl0sICR0aGlzLT5zdWJzY3JpYmVkTGlzdElkKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQkvLyByZW1vdmUgZnJvbSBhbnkgc3Vic2NyaWJlZCBsaXN0IGJ5IGJ1bmRsZQoJCWlmKGlzc2V0KCRkYXRhWyJhcHBsaWVkX2J1bmRsZXMiXSkpCgkJewoJCQkkYXBwbGllZEJ1bmRsZXMgPSBqc29uX2RlY29kZSgkZGF0YVsiYXBwbGllZF9idW5kbGVzIl0pOwoJCQkKCQkJaWYoaXNfYXJyYXkoJGFwcGxpZWRCdW5kbGVzKSkKCQkJewoJCQkJZm9yZWFjaCgkYXBwbGllZEJ1bmRsZXMgYXMgJGFwcGxpZWRCdW5kbGUpCgkJCQl7CgkJCQkJJGJ1bmRsZUlkID0gJGFwcGxpZWRCdW5kbGUtPmJ1bmRsZV9pZDsKCQkJCQkkc3Vic2NyaWJlZExpc3RJZCA9ICRhcHBsaWVkQnVuZGxlLT5zdWJzY3JpYmVkX2xpc3RfaWQ7CgkJCQkJJHN1YnNjcmliZWRQcm92aWRlcklkID0gJGFwcGxpZWRCdW5kbGUtPnN1YnNjcmliZWRfcHJvdmlkZXJfaWQ7CgkJCQkJCgkJCQkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigkc3Vic2NyaWJlZFByb3ZpZGVySWQpOwoJCQkJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkkZW1haWxfcHJvdmlkZXIgPSBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckZhY3Rvcnk6OmdldFByb3ZpZGVyKCRwcm92aWRlcl9lbnRpdHktPmdldFRva2VuKCkpOwoJCQkJCQoJCQkJCQlpZiAoKCRlbWFpbF9wcm92aWRlciAhPSBudWxsKSAmJiAoJGVtYWlsX3Byb3ZpZGVyIGluc3RhbmNlb2YgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcikpCgkJCQkJCXsKCQkJCQkJCSRlbWFpbF9wcm92aWRlci0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGRhdGFbImVtYWlsIl0sICRzdWJzY3JpYmVkTGlzdElkKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGJ1bmRsZUFkZGVkSGFuZGxlcigkZGF0YSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8gcGVyZm9ybSBtZW1iZXJzaGlwIGxldmVsIGFjdGlvbnMKCQkkdGhpcy0+c2V0U3Vic2NyaWJlZExpc3RJbmZvKCRkYXRhWyJtZW1iZXJfaWQiXSk7CgkJCgkJLy8gdXBkYXRlIGluZm8gd2l0aCBlbWFpbCBwcm92aWRlcgogCQlpZighZW1wdHkoJHRoaXMtPnN1YnNjcmliZWRMaXN0SWQpKQogCQl7CiAJCQkkcHJvdmlkZXIgPSBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckZhY3Rvcnk6OmdldFByb3ZpZGVyRm9yTWVtYmVyKCRkYXRhWyJlbWFpbCJdKTsKIAkJCSRwcm92aWRlci0+dXBkYXRlTWVtYmVyKCRkYXRhWyJlbWFpbCJdLCAkdGhpcy0+c3Vic2NyaWJlZExpc3RJZCk7CiAJCX0KIAkJCiAJCS8vIHBlcmZvcm0gYnVuZGxlIGFjdGlvbnMKIAkJJHByb3ZpZGVyID0gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJGYWN0b3J5OjpnZXRQcm92aWRlckZvckJ1bmRsZSgkZGF0YVsiZW1haWwiXSwgJGRhdGFbImJ1bmRsZV9pZCJdKTsKIAkJCiAJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKIAkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHByb3ZpZGVyLT5nZXRUb2tlbigpKTsKIAkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwogCQkkcHJvdmlkZXJfZW50aXR5X2lkID0gKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSk/JHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKToiIjsKIAkJCiAJCS8vIGFkZCB0aGUgZW1haWwgdG8gdGhlIHJpZ2h0IGxpc3QKIAkJJGxpc3RJZCA9ICRwcm92aWRlci0+Z2V0TGlzdElkRm9yQnVuZGxlKCRkYXRhWyJidW5kbGVfaWQiXSwgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6JExJU1RfVFlQRV9BQ1RJVkUpOwogCQkKIAkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkbGlzdElkKSkKIAkJewogCQkJJGxpc3RJZCA9ICRsaXN0SWQtPm1lc3NhZ2U7CiAJCQkkYWRkUmVzcG9uc2UgPSAkcHJvdmlkZXItPmFkZE1lbWJlclRvTGlzdCgkZGF0YVsiZW1haWwiXSwgJGxpc3RJZCwgZmFsc2UpOwogCQkJCQogCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkYWRkUmVzcG9uc2UpKQogCQkJewogCQkKIAkJCQkvLyB1cGRhdGUgc3Vic2NyaWJlciBJRCBvbiBhcHBsaWVkIGJ1bmRsZQogCQkJCWdsb2JhbCAkd3BkYjsKIAkJCQkkdXBkYXRlVmFsdWVzID0gYXJyYXkoInN1YnNjcmliZWRfbGlzdF9pZCIgPT4gJGxpc3RJZCwgInN1YnNjcmliZWRfcHJvdmlkZXJfaWQiID0+ICRwcm92aWRlcl9lbnRpdHlfaWQpOwogCQkJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCJhY2Nlc3NfdHlwZSIgPT4gTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIsICJhY2Nlc3NfdHlwZV9pZCIgPT4gJGRhdGFbIm1lbWJlcl9pZCJdLCAiYnVuZGxlX2lkIiA9PiAkZGF0YVsiYnVuZGxlX2lkIl0pOwogCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLCAkdXBkYXRlVmFsdWVzLCAkd2hlcmVDbGF1c2UpOwogCQkJfQogCQl9CiAJCQogCQkvL3JlbW92ZSBmcm9tIGNhbmNlbGxhdGlvbiBsaXN0CiAJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCiAJCXsJCQogCQkJJGNhbmNlbGxhdGlvbkxpc3RJRCA9ICRwcm92aWRlci0+Z2V0TGlzdElkRm9yQnVuZGxlKCRkYXRhWyJidW5kbGVfaWQiXSwgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6JExJU1RfVFlQRV9DQU5DRUxFRCk7CiAJCQkJCQogCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkY2FuY2VsbGF0aW9uTGlzdElEKSAmJiAhZW1wdHkoJGNhbmNlbGxhdGlvbkxpc3RJRC0+bWVzc2FnZSkpCiAJCQl7CgkgCQkJJHByb3ZpZGVyLT5yZW1vdmVNZW1iZXJGcm9tTGlzdCgkZGF0YVsiZW1haWwiXSwgJGNhbmNlbGxhdGlvbkxpc3RJRC0+bWVzc2FnZSk7CiAJCQl9CiAJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGJ1bmRsZVN0YXR1c0NoYW5nZUhhbmRsZXIoJGRhdGEpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCXN3aXRjaCgkZGF0YVsiYnVuZGxlX3N0YXR1cyJdKQoJCXsKCQkJY2FzZSBNTV9TdGF0dXM6OiRBQ1RJVkU6CgkJCQkkdGhpcy0+YnVuZGxlQWRkZWRIYW5kbGVyKCRkYXRhKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fU3RhdHVzOjokQ0FOQ0VMRUQ6CgkJCWNhc2UgTU1fU3RhdHVzOjokUEFVU0VEOgoJCQljYXNlIE1NX1N0YXR1czo6JEVYUElSRUQ6CgkJCQkvLyBwZXJmb3JtIG1lbWJlcnNoaXAgbGV2ZWwgYWN0aW9ucwoJCQkJJHRoaXMtPnNldFN1YnNjcmliZWRMaXN0SW5mbygkZGF0YVsibWVtYmVyX2lkIl0pOwoJCQkJCgkJCQkvLyB1cGRhdGUgaW5mbyB3aXRoIGVtYWlsIHByb3ZpZGVyCgkJIAkJaWYoIWVtcHR5KCR0aGlzLT5zdWJzY3JpYmVkTGlzdElkKSkKCQkgCQl7CgkJIAkJCSRwcm92aWRlciA9IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRmFjdG9yeTo6Z2V0UHJvdmlkZXJGb3JNZW1iZXIoJGRhdGFbImVtYWlsIl0pOwoJCSAJCQkkcHJvdmlkZXItPnVwZGF0ZU1lbWJlcigkZGF0YVsiZW1haWwiXSwgJHRoaXMtPnN1YnNjcmliZWRMaXN0SWQpOwoJCSAJCX0KCQkgCQkKCQkgCQkvLyBwZXJmb3JtIGJ1bmRsZSBhY3Rpb25zCgkJIAkJJHByb3ZpZGVyID0gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJGYWN0b3J5OjpnZXRQcm92aWRlckZvckJ1bmRsZSgkZGF0YVsiZW1haWwiXSwgJGRhdGFbImJ1bmRsZV9pZCJdKTsKCQkgCQkJCgkJIAkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCSAJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCRwcm92aWRlci0+Z2V0VG9rZW4oKSk7CgkJIAkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCSAJCSRwcm92aWRlcl9lbnRpdHlfaWQgPSAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKT8kcHJvdmlkZXJfZW50aXR5LT5nZXRJZCgpOiIiOwoJCSAJCQoJCSAJCSR0aGlzLT5zZXRCdW5kbGVTdWJzY3JpYmVkTGlzdEluZm8oJGRhdGFbIm1lbWJlcl9pZCJdLCAkZGF0YVsiYnVuZGxlX2lkIl0pOwoJCSAJCQoJCSAJCS8vcmVtb3ZlIGZyb20gYSBsaXN0IGlmIHN1YnNjcmliZWQgdG8gb25lCgkJIAkJaWYgKCR0aGlzLT5idW5kbGVTdWJzY3JpYmVkTGlzdElkICE9ICIiKQoJCSAJCXsKCQkgCQkJJHByb3ZpZGVyLT5yZW1vdmVNZW1iZXJGcm9tTGlzdCgkZGF0YVsiZW1haWwiXSwgJHRoaXMtPmJ1bmRsZVN1YnNjcmliZWRMaXN0SWQpOwoJCSAJCX0KCQkgCQkKCQkgCQkvL25vdyBhZGQgdG8gY2FuY2VsbGF0aW9uIGxpc3QgaWYgb25lIGlzIHNldAoJCSAJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpCgkJIAkJewoJCSAJCQkkY2FuY2VsbGF0aW9uTGlzdElEID0gJHByb3ZpZGVyLT5nZXRMaXN0SWRGb3JCdW5kbGUoJGRhdGFbImJ1bmRsZV9pZCJdLCBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjokTElTVF9UWVBFX0NBTkNFTEVEKTsKIAkJCQogCQkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRjYW5jZWxsYXRpb25MaXN0SUQpICYmICFlbXB0eSgkY2FuY2VsbGF0aW9uTGlzdElELT5tZXNzYWdlKSkKIAkJCQkJewogCQkJCQkJJGNhbmNlbGxhdGlvbkxpc3RJRCA9ICRjYW5jZWxsYXRpb25MaXN0SUQtPm1lc3NhZ2U7CgkJIAkJCQkkY2FuY2VsX29wID0gJHByb3ZpZGVyLT5hZGRNZW1iZXJUb0xpc3QoJGRhdGFbImVtYWlsIl0sJGNhbmNlbGxhdGlvbkxpc3RJRCxmYWxzZSk7CgkJIAkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkY2FuY2VsX29wKSkKCQkgCQkJCXsJCgkJIAkJCQkJLy8gdXBkYXRlIHN1YnNjcmliZXIgSUQgb24gYXBwbGllZCBidW5kbGUKCQkgCQkJCQkkdXBkYXRlVmFsdWVzID0gYXJyYXkoInN1YnNjcmliZWRfbGlzdF9pZCIgPT4gJGNhbmNlbGxhdGlvbkxpc3RJRCwgInN1YnNjcmliZWRfcHJvdmlkZXJfaWQiID0+ICRwcm92aWRlcl9lbnRpdHlfaWQpOwoJCSAJCQkJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCJhY2Nlc3NfdHlwZSIgPT4gTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIsICJhY2Nlc3NfdHlwZV9pZCIgPT4gJGRhdGFbIm1lbWJlcl9pZCJdLCAiYnVuZGxlX2lkIiA9PiAkZGF0YVsiYnVuZGxlX2lkIl0pOwoJCSAJCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLCAkdXBkYXRlVmFsdWVzLCAkd2hlcmVDbGF1c2UpOwoJCSAJCQkJfQoJCSAJCQl9CgkJIAkJfQoJCQkJYnJlYWs7CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNldFN1YnNjcmliZWRMaXN0SW5mbygkdXNlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkdGhpcy0+c3Vic2NyaWJlZExpc3RJZCA9ICIiOwoJCSR0aGlzLT5zdWJzY3JpYmVkUHJvdmlkZXJJZCA9ICIiOwoJCQoJCSRzcWwgPSAiU0VMRUNUIHN1YnNjcmliZWRfbGlzdF9pZCwgc3Vic2NyaWJlZF9wcm92aWRlcl9pZCBGUk9NICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgV0hFUkUgd3BfdXNlcl9pZD0neyR1c2VySWR9JyBMSU1JVCAxOyI7CgkJJG1tVXNlckRhdGEgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZigkbW1Vc2VyRGF0YSkKCQl7CgkJCSR0aGlzLT5zdWJzY3JpYmVkTGlzdElkID0gKGlzc2V0KCRtbVVzZXJEYXRhLT5zdWJzY3JpYmVkX2xpc3RfaWQpKSA/ICRtbVVzZXJEYXRhLT5zdWJzY3JpYmVkX2xpc3RfaWQgOiAiIjsKCQkJJHRoaXMtPnN1YnNjcmliZWRQcm92aWRlcklkID0gKGlzc2V0KCRtbVVzZXJEYXRhLT5zdWJzY3JpYmVkX3Byb3ZpZGVyX2lkKSkgPyAkbW1Vc2VyRGF0YS0+c3Vic2NyaWJlZF9wcm92aWRlcl9pZCA6ICIiOwoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzZXRCdW5kbGVTdWJzY3JpYmVkTGlzdEluZm8oJHVzZXJJZCwgJGJ1bmRsZUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkdGhpcy0+YnVuZGxlU3Vic2NyaWJlZExpc3RJZCA9ICIiOwoJCSR0aGlzLT5idW5kbGVTdWJzY3JpYmVkUHJvdmlkZXJJZCA9ICIiOwoJCQoJCSRzcWwgPSAiU0VMRUNUIHN1YnNjcmliZWRfbGlzdF9pZCwgc3Vic2NyaWJlZF9wcm92aWRlcl9pZCBGUk9NICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgV0hFUkUgYWNjZXNzX3R5cGU9JyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIuIicgIjsKCQkkc3FsIC49ICIgQU5EIGFjY2Vzc190eXBlX2lkID0gJ3skdXNlcklkfScgQU5EIGJ1bmRsZV9pZCA9ICd7JGJ1bmRsZUlkfScgTElNSVQgMTsiOwoJCSRhcHBsaWVkQnVuZGxlID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJGFwcGxpZWRCdW5kbGUpCgkJewoJCQkkdGhpcy0+YnVuZGxlU3Vic2NyaWJlZExpc3RJZCA9IChpc3NldCgkYXBwbGllZEJ1bmRsZS0+c3Vic2NyaWJlZF9saXN0X2lkKSkgPyAkYXBwbGllZEJ1bmRsZS0+c3Vic2NyaWJlZF9saXN0X2lkIDogIiI7CgkJCSR0aGlzLT5idW5kbGVTdWJzY3JpYmVkUHJvdmlkZXJJZCA9IChpc3NldCgkYXBwbGllZEJ1bmRsZS0+c3Vic2NyaWJlZF9wcm92aWRlcl9pZCkpID8gJGFwcGxpZWRCdW5kbGUtPnN1YnNjcmliZWRfcHJvdmlkZXJfaWQgOiAiIjsKCQl9Cgl9Cn0KCg==', 0, '2018-11-21 06:38:54'),
(133, 'customfielddata', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0N1c3RvbUZpZWxkRGF0YSBleHRlbmRzIE1NX0VudGl0eQp7Cglwcml2YXRlICRjdXN0b21GaWVsZElkID0gIiI7Cglwcml2YXRlICR1c2VySWQgPSAiIjsKCXByaXZhdGUgJHZhbHVlID0gIiI7CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkgCgl7CgkJLy8gZG8gbm90aGluZwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RGF0YSgkZGF0YSkKCXsKCQl0cnkgCgkJewoJCQkkdGhpcy0+Y3VzdG9tRmllbGRJZCA9ICRkYXRhLT5jdXN0b21fZmllbGRfaWQ7CgkJCSR0aGlzLT51c2VySWQgPSAkZGF0YS0+dXNlcl9pZDsKCQkJJHRoaXMtPnZhbHVlID0gc3RyaXBzbGFzaGVzKGh0bWxfZW50aXR5X2RlY29kZSgkZGF0YS0+dmFsdWUsRU5UX0NPTVBBVCB8IEVOVF9IVE1MNDAxLCAiVVRGLTgiKSk7CgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIAoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0RGF0YSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZihpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQkkc3FsID0gIlVQREFURSAiLk1NX1RBQkxFX0NVU1RPTV9GSUVMRF9EQVRBLiIgU0VUIAoJCQkJCQljdXN0b21fZmllbGRfaWQ9JyVzJywgCgkJCQkJCXVzZXJfaWQ9JyVzJywKCQkJCQkJdmFsdWU9JyVzJywKCQkJCQkJbGFzdF91cGRhdGVkPSclcycKCQkJCQlXSEVSRSAKCQkJCQkJaWQ9J3skdGhpcy0+aWR9JwoJCQkiOwoJCQkKCQkJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmN1c3RvbUZpZWxkSWQsICR0aGlzLT51c2VySWQsIGh0bWxlbnRpdGllcyhzdHJpcHNsYXNoZXMoJHRoaXMtPnZhbHVlKSwgRU5UX1FVT1RFUywgIlVURi04IiksIE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpKTsKCQkJJHJldCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCQlpZigkcmV0PT09ZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBzYXZlIHF1ZXJ5IHskcHJlcGFyZWRTcWx9LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSRzcWwgPSAiSU5TRVJUIElOVE8gIi5NTV9UQUJMRV9DVVNUT01fRklFTERfREFUQS4iIFNFVCAKCQkJCWN1c3RvbV9maWVsZF9pZD0nJXMnLCAKCQkJCXVzZXJfaWQ9JyVzJywKCQkJCXZhbHVlPSclcycsCgkJCQlsYXN0X3VwZGF0ZWQ9JyVzJwoJCQkiOwoJCQkKCQkJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmN1c3RvbUZpZWxkSWQsICR0aGlzLT51c2VySWQsIGh0bWxlbnRpdGllcyhzdHJpcHNsYXNoZXMoJHRoaXMtPnZhbHVlKSwgRU5UX1FVT1RFUywgIlVURi04IiksIE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpKTsKCQkJJHJldCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCQlpZigkcmV0PT09ZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBzYXZlIHF1ZXJ5IHskcHJlcGFyZWRTcWx9LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQlpZihpbnR2YWwoJHRoaXMtPmlkKT4wKQoJCXsKCQkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX0NVU1RPTV9GSUVMRF9EQVRBLiIgd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyBsaW1pdCAxIjsKCQkJCgkJCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCWlmKCRyZXN1bHQ9PT1mYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IHJlbW92ZSBjdXN0b20gZmllbGQgZGF0YSBkdWUgdG8gc3FsIGVycm9yLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IHJlbW92ZSBpbnZhbGlkIGN1c3RvbSBmaWVsZCBkYXRhLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCgkKCS8qKiBHRVRURVJTIC8gU0VUVEVSUyAqKi8KCQoJcHVibGljIGZ1bmN0aW9uIHNldEN1c3RvbUZpZWxkSWQoJGlkKQoJewoJCSR0aGlzLT5jdXN0b21GaWVsZElkID0gJGlkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q3VzdG9tRmllbGRJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5jdXN0b21GaWVsZElkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VXNlcklkKCRpZCkKCXsKCQkkdGhpcy0+dXNlcklkID0gJGlkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VXNlcklkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVzZXJJZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFZhbHVlKCR2YWwpCgl7CgkJJHRoaXMtPnZhbHVlID0gJHZhbDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFZhbHVlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnZhbHVlOwoJfQoJCgkKCS8qKiBVVElMSVRJRVMgKiovCgkKCS8qKgoJICogQHBhcmFtIE51bWJlciAkZmllbGRJZCB0aGUgSUQgb2YgdGhlIGN1c3RvbSBmaWVsZCB0byBnZXQgZGF0YSBmb3IKCSAqIEBwYXJhbSBOdW1iZXIgJHVzZXJJZCB0aGUgSUQgb2YgdGhlIHVzZXIgdG8gZ2V0IGN1c3RvbSBkYXRhIGZvcgoJICogQHJldHVybiBNTV9DdXN0b21GaWVsZERhdGEKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDdXN0b21GaWVsZERhdGFCeVVzZXIoJGZpZWxkSWQsICR1c2VySWQpCgl7CgkJJGZpZWxkRGF0YSA9IG5ldyBNTV9DdXN0b21GaWVsZERhdGEoKTsKCQkKCQlnbG9iYWwgJHdwZGI7CiAJCQogCQkkc3FsID0gInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9DVVNUT01fRklFTERfREFUQS4iIHdoZXJlIHVzZXJfaWQ9J3skdXNlcklkfScgYW5kIGN1c3RvbV9maWVsZF9pZD0neyRmaWVsZElkfScgbGltaXQgMTsiOwogCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CiAJCQogCQlpZihpc3NldCgkcmVzdWx0LT51c2VyX2lkKSkKIAkJewogCQkJJGZpZWxkRGF0YS0+c2V0RGF0YSgkcmVzdWx0KTsKIAkJCQogCQkJaWYoJGZpZWxkRGF0YS0+aXNWYWxpZCgpKQogCQkJewogCQkJCSRmaWVsZERhdGEtPnNldElkKCRyZXN1bHQtPmlkKTsKIAkJCX0KIAkJfQogCQkKIAkJcmV0dXJuICRmaWVsZERhdGE7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gd2FzUmVjZW50bHlVcGRhdGVkKCRmaWVsZElkLCAkdXNlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRzcWwgPSAiU0VMRUNUIGNvdW50KCopIGFzIHRvdGFsIEZST00gIi5NTV9UQUJMRV9DVVNUT01fRklFTERfREFUQS4iIFdIRVJFIGN1c3RvbV9maWVsZF9pZCA9IHskZmllbGRJZH0gQU5EIHVzZXJfaWQgPSB7JHVzZXJJZH0gQU5EIGxhc3RfdXBkYXRlZCA+IChub3coKSAtIElOVEVSVkFMIDEwIFNFQ09ORCkgTElNSVQgMTsiOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQoJCWlmKCRyb3cgJiYgaXNzZXQoJHJvdy0+dG90YWwpICYmIGludHZhbCgkcm93LT50b3RhbCkgPiAwKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKioKCSAqIERlbGV0ZSBhbGwgY3VzdG9tIGZpZWxkIGRhdGEgbGlua2VkIHRvIGEgc3BlY2lmaWMgdXNlciBpZAoJICogCgkgKiBAcGFyYW0gaW50ICR1c2VySWQgVGhlIHVzZXIgaWQgdG8gcmVtb3ZlIHRoZSBkYXRhIGZyb20KCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgb3BlcmF0aW9uIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGRlbGV0ZUJ5VXNlcklkKCR1c2VySWQpCgl7CgkgICAgZ2xvYmFsICR3cGRiOwoJICAgIAoJICAgICRzdGF0dXMgPSAkd3BkYi0+ZGVsZXRlKE1NX1RBQkxFX0NVU1RPTV9GSUVMRF9EQVRBLCBhcnJheSgndXNlcl9pZCc9PiR1c2VySWQpLCBhcnJheSgnJWQnKSk7CgkgICAgaWYgKCRzdGF0dXMgPT09IGZhbHNlKQoJICAgIHsKCSAgICAgICAgJGVycm9yTXNnID0gJHdwZGItPnByZXBhcmUoIkVycm9yIGRlbGV0aW5nIHVzZXIgaWQgJXMgZnJvbSBtbV9jdXN0b21fZmllbGRfZGF0YSIsJHVzZXJfaWQpOwoJICAgICAgICByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlcnJvck1zZyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCSAgICB9CgkgICAgZWxzZQoJICAgIHsKCSAgICAgICAgcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJICAgIH0KCX0KfQ==', 0, '2018-11-21 06:38:54'),
(134, 'repaircorepagesview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1JlcGFpckNvcmVQYWdlc1ZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1JFUEFJUl9DT1JFX1BBR0VTID0gInJlcGFpckNvcmVQYWdlcyI7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKIAlwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFUEFJUl9DT1JFX1BBR0VTOgoJCQkJCXJldHVybiAkdGhpcy0+cmVwYWlyQ29yZVBhZ2VzKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UsTU1fUmVzcG9uc2U6OiRTVUNDRVNTLHRydWUpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVwYWlyQ29yZVBhZ2VzKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJjb3JlUGFnZUlkcyJdKSAmJiAhZW1wdHkoJHBvc3RbImNvcmVQYWdlSWRzIl0pKSAKCQl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJCgkJCSRjb3JlUGFnZUlkcyA9IGV4cGxvZGUoIiwiLCAkcG9zdFsiY29yZVBhZ2VJZHMiXSk7CgkJCSRyZXN1bHRNc2cgPSAiIjsKCQkJCgkJCWZvcmVhY2goJGNvcmVQYWdlSWRzIGFzICRjb3JlUGFnZUlkKQoJCQl7CgkJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgV0hFUkUgaWQgPSAneyRjb3JlUGFnZUlkfSc7IjsKCQkJCQkKCQkJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJCQoJCQkJaWYoJHJvdykKCQkJCXsKCQkJCQkkZGVsZXRlU3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQ09SRV9QQUdFUy4iIFdIRVJFIGlkID0gJ3skY29yZVBhZ2VJZH0nIExJTUlUIDE7IjsKCQkJCQkkd3BkYi0+cXVlcnkoJGRlbGV0ZVNxbCk7CgkJCQkJCgkJCQkJJHJlc3VsdE1zZyAuPSBNTV9Db3JlUGFnZVR5cGU6OmdldENvcmVQYWdlTmFtZSgkcm93LT5jb3JlX3BhZ2VfdHlwZV9pZCkuIlxuIjsKCQkJCX0KCQkJfQoJCQkKCQkJLy8gcmVpbnN0YWxsIGNvcmUgcGFnZXMKCQkJJGluc3RhbGxlciA9IG5ldyBNTV9JbnN0YWxsKCk7CgkJCSRpbnN0YWxsZXItPnNldHVwQ29yZVBhZ2VzKCk7CgkJCQoJCQkvL3JlYnVpbGQgY29yZSBwYWdlIGNhY2hlCgkJCU1NX0NvcmVQYWdlRW5naW5lOjpjcmVhdGVDb3JlUGFnZUNhY2hlKCk7CgkJCQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGUgZm9sbG93aW5nIGRlZmF1bHQgY29yZSBwYWdlcyBoYXZlIGJlZW4gcmVpbnN0YWxsZWQ6XG57JHJlc3VsdE1zZ30iLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyx0cnVlKTsKCQl9CgkJCgkgCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk5vIGNvcmUgcGFnZSBJRHMgcmVjZWl2ZWQiLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyx0cnVlKTsJCSAJCgl9CgkKfQo=', 0, '2018-11-21 06:38:54'),
(135, 'salesbypaymentservicereport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fU2FsZXNCeVBheW1lbnRTZXJ2aWNlUmVwb3J0IGV4dGVuZHMgTU1fQWR2YW5jZWRSZXBvcnRCYXNlIAp7CgkKCXByb3RlY3RlZCAkdmlzdWFsRWxlbWVudHMgPSBhcnJheSgiTU1fUmVwb3J0RGF0YUdyaWQiKTsKCQoJcHVibGljIHN0YXRpYyAkU0FMRVNfQllfUEFZTUVOVF9TRVJWSUNFX1JFUE9SVF9EQVRBR1JJRCA9ICJzYWxlc19ieV9wYXltZW50X3NlcnZpY2VfZGF0YWdyaWQiOwoJCgkvL3F1ZXJ5IGlkZW50aWZpZXJzCglwdWJsaWMgc3RhdGljICRTQUxFU19CWV9QQVlNRU5UX1NFUlZJQ0VfUVVFUlkgPSAic2FsZXNfYnlfcGF5bWVudF9zZXJ2aWNlX3F1ZXJ5IjsKCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkgCgl7CgkJc3dpdGNoICgkZWxlbWVudElkZW50aWZpZXIpCgkJewoJCQljYXNlIHNlbGY6OiRTQUxFU19CWV9QQVlNRU5UX1NFUlZJQ0VfUkVQT1JUX0RBVEFHUklEOgoJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJTYWxlc0J5UGF5bWVudFNlcnZpY2VSZXBvcnREYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJVbmFibGUgdG8gcmVuZGVyIHZpc3VhbCBlbGVtZW50OiBpZGVudGlmaWVyICIuKCghaXNfYXJyYXkoJGVsZW1lbnRJZGVudGlmaWVyKSAmJiAhaXNfb2JqZWN0KCRlbGVtZW50SWRlbnRpZmllcikpPyJ7JGVsZW1lbnRJZGVudGlmaWVyfSAiOiIiKS4idW5rbm93biIsTU1fUmVwb3J0UmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJTYWxlc0J5UGF5bWVudFNlcnZpY2VSZXBvcnREYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JFNBTEVTX0JZX1BBWU1FTlRfU0VSVklDRV9RVUVSWSwgJHBhcmFtcyk7CgkJaWYgKCFNTV9SZXBvcnRSZXNwb25zZTo6aXNTdWNjZXNzKCRkYXRhUmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuICRkYXRhUmVzcG9uc2U7CgkJfQoJCQoJCSRncmlkSGVhZGVycyA9IGFycmF5KCJwYXltZW50X3NlcnZpY2UiPT5hcnJheSgnbGFiZWwnPT4iUGF5bWVudCBTZXJ2aWNlIiksCgkJCQkJCQkgInVuaXRzIj0+YXJyYXkoJ2xhYmVsJz0+IlVuaXRzIiwndG9vbHRpcCc9PidVbml0cyBpbiB0aGlzIGNvbnRleHQgaXMgdGhlIG51bWJlciBvZiBwcm9kdWN0cyBwdXJjaGFzZWQgb3IgcmViaWxsaW5nIGluIHRoZSBzcGVjaWZpZWQgZGF0ZSByYW5nZScpLAoJCQkJICAgICAgICAgICAgICJzYWxlcyI9PmFycmF5KCdsYWJlbCc9PiJTYWxlcyIpKTsKCQkkZ3JpZCA9IE1NX1JlcG9ydERhdGFncmlkOjpjcmVhdGVGcm9tRGF0YShzZWxmOjokU0FMRVNfQllfUEFZTUVOVF9TRVJWSUNFX1JFUE9SVF9EQVRBR1JJRCwgJGdyaWRIZWFkZXJzLCAkZGF0YVJlc3BvbnNlLCRkaXJlY3RpdmVzKTsKCQkvLyRncmlkLT5zZXRHcmlkVGl0bGUoIlBheW1lbnQgTWV0aG9kIik7CgkJJGdyaWQtPnNldFNob3dIZWFkZXJSb3coZmFsc2UpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGdyaWQtPnJlbmRlcigpKTsKCX0KCQoJCgkvKioKCSAqIEdlbmVyYXRlIHRoZSBkYXRhIGZvciB0aGUgU2FsZXMgQnkgUGF5bWVudCBTZXJ2aWNlIHJlcG9ydC4gCgkgKiBDb25zdHJhaW50OiBUaGUgc3VwcGxpZWQgcGFyYW1zIG11c3QgY29udGFpbiBhIHN0YXJ0IGFuZCBlbmQgZGF0ZQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHBhcmFtcwoJICogQHJldHVybiBNTV9SZXBvcnREYXRhc2V0IGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZVNhbGVzQnlQYXltZW50U2VydmljZVJlcG9ydERhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFpc19hcnJheSgkcGFyYW1zKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBTYWxlcyBCeSBQYXltZW50IE1ldGhvZCByZXBvcnQgZGF0YTogSW1wcm9wZXIgcGFyYW1ldGVycyBmb3JtYXQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoIWlzc2V0KCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkgfHwgIWlzc2V0KCRwYXJhbXNbJ2VuZF9kYXRlJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIFNhbGVzIEJ5IFBheW1lbnQgTWV0aG9kIHJlcG9ydCBkYXRhOiBTdGFydCBhbmQgRW5kIGRhdGUgbXVzdCBiZSBzdXBwbGllZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vb3B0aW9uYWwgcGFyYW0KCQkkaW5jbHVkZV9yZWJpbGxzID0gKGlzc2V0KCRwYXJhbXNbJ2luY2x1ZGVfcmViaWxscyddKSAmJiAoJHBhcmFtc1snaW5jbHVkZV9yZWJpbGxzJ10gPT0gIm9uIikpOwoJCQoJCQoJCSR0cmFuc2FjdGlvbnNUYWJsZSA9IE1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRzsKCQkkcGF5bWVudFNlcnZpY2VzVGFibGUgPSBNTV9UQUJMRV9QQVlNRU5UX1NFUlZJQ0VTOwoJCSRvcmRlckl0ZW1zVGFibGUgPSBNTV9UQUJMRV9PUkRFUl9JVEVNUzsKCQkKCQkkc3RhcnRUaW1lID0gc3RydG90aW1lKCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSk7CgkJJGVuZFRpbWUgPSBzdHJ0b3RpbWUoJHBhcmFtc1snZW5kX2RhdGUnXSk7CgkJCgkJJHN0YXJ0RGF0ZSA9IGRhdGUoIlktbS1kIDAwOjAwIiwkc3RhcnRUaW1lKTsgLy9teXNxbCBmb3JtYXQKCQkkZW5kRGF0ZSA9ICAgZGF0ZSgiWS1tLWQgMjM6NTk6NTkiLCRlbmRUaW1lKTsKCQkKCQkkdHJhbnNhY3Rpb25UeXBlcyA9IGFycmF5KE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UKTsKCQlpZiAoJGluY2x1ZGVfcmViaWxscykKCQl7CgkJCSR0cmFuc2FjdGlvblR5cGVzW10gPSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQ7CgkJfQoJCSR0cmFuc2FjdGlvblR5cGVTdHJpbmcgPSBpbXBsb2RlKCIsIiwkdHJhbnNhY3Rpb25UeXBlcyk7CgkJCgkJLy9nZXRzIHRoZSB1bml0cyBhbmQgdG90YWwgcmV2ZW51ZSBmcm9tIHRyYW5zYWN0aW9ucyBsaW5rZWQgdG8gcHJvZHVjdCBzYWxlcyAob3B0aW9uYWxseSBpbmNsdWRpbmcgcmVjdXJyaW5nIHBheW1lbnRzKSBmb3IgdHJhbnNhY3Rpb25zIHRoYXQgb2NjdXIgd2l0aGluIGEgZGF0ZSByYW5nZQoJCS8vcmVmdW5kIGl0ZW1zIGRvIG5vdCBjb3VudCBhZ2FpbnN0IHRoZSB0b3RhbC4gSWYgdGhlcmUgaXMgYSBkYXRhIGVycm9yIChmb3IgaW5zdGFuY2UgdHJhbnNhY3Rpb25zIGV4aXN0IHdoZXJlIHRoZSBsaW5rZWQgb3JkZXJzL2l0ZW1zIHdlcmUgZGVsZXRlZCkgdGhlbiB0aGUgcHJvZHVjdCBpcwoJCS8vbGlzdGVkIGFzICdVbmtub3duIFByb2R1Y3QnCgkJCgkJJHNxbCA9ICJTRUxFQ1QgSUZOVUxMKHBzLm5hbWUsJ1Vua25vd24nKSBBUyBwYXltZW50X3NlcnZpY2UsIFQudW5pdHMsIFQuc2FsZXMgIi4KCQkJICAgIkZST00gKFNFTEVDVCB0bC5wYXltZW50X3NlcnZpY2VfaWQsU1VNKElGTlVMTChvaS5xdWFudGl0eSwxKSkgQVMgdW5pdHMsIEFCUyhTVU0odGwuYW1vdW50KSkgQVMgc2FsZXMgIi4KCQkJICAgIkZST00geyR0cmFuc2FjdGlvbnNUYWJsZX0gdGwgTEVGVCBKT0lOIHskb3JkZXJJdGVtc1RhYmxlfSBvaSBPTiAodGwub3JkZXJfaXRlbV9pZCA9IG9pLmlkKSAiLgoJCQkgICAiV0hFUkUgKHRsLnRyYW5zYWN0aW9uX2RhdGUgQkVUV0VFTiAlcyBBTkQgJXMpIEFORCB0bC50cmFuc2FjdGlvbl90eXBlIElOICh7JHRyYW5zYWN0aW9uVHlwZVN0cmluZ30pICIuCgkJCSAgICJHUk9VUCBCWSB0bC5wYXltZW50X3NlcnZpY2VfaWQpIEFTIFQgTEVGVCBKT0lOIHskcGF5bWVudFNlcnZpY2VzVGFibGV9IHBzIE9OIChULnBheW1lbnRfc2VydmljZV9pZCA9IHBzLmlkKSI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoJHNxbCwkc3RhcnREYXRlLCRlbmREYXRlKSxBUlJBWV9BKTsKCQkKCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAmJHJvdykKCQl7CgkJCSRyb3dbJ3NhbGVzJ10gPSBfbW1mKCRyb3dbJ3NhbGVzJ10pOyAKCQkJLy9UT0RPOiBkZWFsIHdpdGggbXVsdGlwbGUgY3VycmVuY3kgaXNzdWVzCQoJCX0KCQkKCQkkZGF0YXNldCA9IE1NX1JlcG9ydERhdGFzZXQ6OmNyZWF0ZVNpbmdsZVJlcG9ydERhdGFzZXQoJHBhcmFtcywkcmVzdWx0cyk7CgkJcmV0dXJuICRkYXRhc2V0OwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVEYXRhKCRxdWVyeUlkZW50aWZpZXIsICRwYXJhbXMpCgl7CgkJc3dpdGNoICgkcXVlcnlJZGVudGlmaWVyKQoJCXsKCQkJY2FzZSBzZWxmOjokU0FMRVNfQllfUEFZTUVOVF9TRVJWSUNFX1FVRVJZOgoJCQkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2FsZXNCeVBheW1lbnRTZXJ2aWNlUmVwb3J0RGF0YSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZ2VuZXJhdGluZyBkYXRhIGZvciB1bmtub3duIHF1ZXJ5IGlkZW50aWZpZXIgeyRxdWVyeUlkZW50aWZpZXJ9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKfQoK', 0, '2018-11-21 06:38:54'),
(136, 'reportresponse', 'LyoqCioKKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQoqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoqLwpjbGFzcyBNTV9SZXBvcnRSZXNwb25zZSBleHRlbmRzIE1NX1Jlc3BvbnNlCnsKCXB1YmxpYyBzdGF0aWMgJE5PVF9SRUFEWSA9ICJub3RfcmVhZHkiOwoJcHVibGljIHN0YXRpYyAkTk9fREFUQSA9ICJub19kYXRhIjsKCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNOb3RSZWFkeSgkcmVzcG9uc2UpCiAJewogCQlpZigoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVwb3J0UmVzcG9uc2UpICYmICgkcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVwb3J0UmVzcG9uc2U6OiROT1RfUkVBRFkpKQogCQl7CiAJCQlyZXR1cm4gdHJ1ZTsKIAkJfQogCQkKIAkJcmV0dXJuIGZhbHNlOwogCX0KIAkKIAkKIAlwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGhhc05vRGF0YSgkcmVzcG9uc2UpCiAJewogCQlpZigoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVwb3J0UmVzcG9uc2UpICYmICgkcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVwb3J0UmVzcG9uc2U6OiROT19EQVRBKSkKIAkJewogCQkJcmV0dXJuIHRydWU7CiAJCX0KIAkJCQogCQlyZXR1cm4gZmFsc2U7CiAJfQp9Cgo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(137, 'releasecontroller', 'Y2xhc3MgUmVsZWFzZUNvbnRyb2xsZXIgaW1wbGVtZW50cyBSZXN0Q29udHJvbGxlciAKewogICAgZnVuY3Rpb24gZXhlY3V0ZShSZXN0U2VydmVyICRyZXN0KSB7fQogICAgCiAgICBwdWJsaWMgZnVuY3Rpb24gZGVwbG95UmVsZWFzZSgkcmVzdCkKICAgIHsKICAgIAkkcG9zdCA9ICRyZXN0LT5nZXRSZXF1ZXN0KCktPmdldFBvc3QoKTsKICAgIAkKICAgICAgICBNTV9Mb2dBcGk6OmxvZ1JlcXVlc3QoanNvbl9lbmNvZGUoJHBvc3QpLCAiL2RlcGxveVJlbGVhc2UiKTsKICAgIAogICAgICAgIGlmKCFpc3NldCgkcG9zdFsidmVyc2lvbiJdKSkKICAgICAgICB7CiAgICAgICAgCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsICAiTWFqb3IgdmVyc2lvbiBudW1iZXIgaXMgcmVxdWlyZWQiLCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX01JU1NJTkdfUEFSQU1TLiIgOiB2ZXJzaW9uIiwgUkVTUE9OU0VfRVJST1JfQ09ERV9NSVNTSU5HX1BBUkFNUywgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9NSVNTSU5HX1BBUkFNUyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgICRtYWpvclZlcnNpb24gPSAkcG9zdFsidmVyc2lvbiJdOwogICAgICAgICRtaW5vclZlcnNpb24gPSAoaXNzZXQoJHBvc3RbIm1pbm9yX3ZlcnNpb24iXSkpID8gJHBvc3RbIm1pbm9yX3ZlcnNpb24iXSA6IE1NX01lbWJlck1vdXNlU2VydmljZTo6JERFRkFVTFRfTUlOT1JfVkVSU0lPTjsKICAgICAgICAKICAgICAgICAkY3JudFZlcnNpb24gPSBNZW1iZXJNb3VzZTo6Z2V0UGx1Z2luVmVyc2lvbigpOwogICAgICAgIAogICAgICAgIGlmKCRjcm50VmVyc2lvbiAhPSAkbWFqb3JWZXJzaW9uKQogICAgICAgIHsKICAgICAgICAJTU1fT3B0aW9uVXRpbHM6OnNldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfVVBHUkFERV9OT1RJQ0UsICRtYWpvclZlcnNpb24pOwogICAgICAgIAlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAiTWFqb3IgdmVyc2lvbiBkbyBub3QgbWF0Y2guIEEgbm90aWZpY2F0aW9uIHdpbGwgYmUgZGlzcGxheWVkIHRvIHRoZSBjdXN0b21lciBpbmZvcm1pbmcgdGhlbSBhbiB1cGRhdGUgaXMgYXZhaWxhYmxlLiIsICJNYWpvciB2ZXJzaW9uIGRvIG5vdCBtYXRjaC4gQSBub3RpZmljYXRpb24gd2lsbCBiZSBkaXNwbGF5ZWQgdG8gdGhlIGN1c3RvbWVyIGluZm9ybWluZyB0aGVtIGFuIHVwZGF0ZSBpcyBhdmFpbGFibGUuIiwgUkVTUE9OU0VfRVJST1JfQ09ERV9CQURfUkVRVUVTVCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9NSVNTSU5HX1BBUkFNUyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIGlmIG1ham9yIHZlcnNpb25zIG1hdGNoLCB1cGRhdGUgY2FjaGUgd2l0aCB0aGUgbGF0ZXN0IGZpbGVzIGZyb20gY2VudHJhbAogICAgICAgICR3cml0ZWFibGVEaXIgPSBNTV9VdGlsczo6Z2V0Q2FjaGVEaXIoKTsKICAgICAgICAKICAgICAgICAvLyBkZWxldGUgZXhpc3RpbmcgY2FjaGUKICAgICAgICBpZihpc19kaXIoJHdyaXRlYWJsZURpcikpCiAgICAgICAgewogICAgICAgIAlpZihpc193cml0ZWFibGUoJHdyaXRlYWJsZURpcikpCiAgICAgICAgCXsKCSAgICAgICAgCWlmICgkaGFuZGxlID0gb3BlbmRpcigkd3JpdGVhYmxlRGlyKSkgCgkgICAgICAgIAl7CgkJCQkgICAgd2hpbGUoZmFsc2UgIT09ICgkZmlsZSA9IHJlYWRkaXIoJGhhbmRsZSkpKSAKCQkJCSAgICB7CgkJCQkgICAgICAgIGlmKCFpc19kaXIoJGZpbGUpKQoJCQkJICAgICAgICB7CgkJCQkgICAgICAgIAlAdW5saW5rKCR3cml0ZWFibGVEaXIuIi8iLiRmaWxlKTsKCQkJCSAgICAgICAgfQoJCQkJICAgIH0KCQkJCSAgICAKCQkJCSAgICBjbG9zZWRpcigkaGFuZGxlKTsKCQkJCX0KICAgICAgICAJfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyBnZXQgdXBkYXRlZCBjbGFzc2VzIGZyb20gY2VudHJhbAogICAgICAgIE1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX01JTk9SX1ZFUlNJT04sICRtaW5vclZlcnNpb24pOwoJCSRyZXQgPSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmF1dGhvcml6ZSh0cnVlKTsKCQkKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmV0KSkKCQl7CgkJCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsICJDb3VsZCBub3QgZmluZCBjbGFzc2VzIGFzc29jaWF0ZWQgd2l0aCB2ZXJzaW9uIHskbWFqb3JWZXJzaW9ufS57JG1pbm9yVmVyc2lvbn0iLCAiSW52YWxpZCBtYWpvci9taW5vciB2ZXJzaW9uIGNvbWJpbmF0aW9uIiwgUkVTUE9OU0VfRVJST1JfQ09ERV9CQURfUkVRVUVTVCwgUkVTUE9OU0VfRVJST1JfTUVTU0FHRV9NSVNTSU5HX1BBUkFNUyk7CgkJfQogICAgICAgIAogICAgICAgIGlmKGRlZmluZWQoIkRCX05BTUUiKSkKICAgICAgICB7CiAgICAgICAgCWdsb2JhbCAkd3BkYjsKICAgICAgICAJCiAgICAgICAgCWlmKGZpbGVfZXhpc3RzKCR3cml0ZWFibGVEaXIuIi9tZW1iZXJtb3VzZV9zY2hlbWEuc3FsIikpCiAgICAgICAgCXsJCgkJCQkkcGhwT2JqID0gbmV3IE1NX1BocE9iaigkd3BkYiwgREJfTkFNRSk7CgkJCQlpZighJHBocE9iai0+aW1wb3J0RmlsZSgkd3JpdGVhYmxlRGlyLiIvbWVtYmVybW91c2Vfc2NoZW1hLnNxbCIsIHRydWUpKQoJCQkJewoJCSAgICAgICAgCXJldHVybiBuZXcgUmVzcG9uc2UoJHJlc3QsICJDb3VsZCBub3QgdXBkYXRlIE1lbWJlck1vdXNlIGRhdGFiYXNlIiwgIkNvdWxkIG5vdCB1cGRhdGUgTWVtYmVyTW91c2UgZGF0YWJhc2UiLCBSRVNQT05TRV9FUlJPUl9DT0RFX0JBRF9SRVFVRVNULCBSRVNQT05TRV9FUlJPUl9NRVNTQUdFX01JU1NJTkdfUEFSQU1TKTsKCQkJCX0KICAgICAgICAJfQogICAgICAgIH0KICAgCQllbHNlCiAgIAkJewogICAJCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAgIkRCX05BTUUgbm90IGRlZmluZWQiLCAiREJfTkFNRSBub3QgZGVmaW5lZCIsIFJFU1BPTlNFX0VSUk9SX0NPREVfQkFEX1JFUVVFU1QsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfTUlTU0lOR19QQVJBTVMpOwogICAJCX0KCQkgICAgICAgIAogICAJCSR2ZXJzaW9uID0gJG1ham9yVmVyc2lvbjsKICAgCQkKICAgCQlpZighZW1wdHkoJG1pbm9yVmVyc2lvbikpCiAgIAkJewogICAJCQkkdmVyc2lvbiAuPSAiLSIuJG1pbm9yVmVyc2lvbjsKICAgCQl9CiAgIAkJCiAgIAkJJHZlcnNpb25SZWxlYXNlID0gTU1fVmVyc2lvblJlbGVhc2U6OmZpbmRCeVZlcnNpb24oJHZlcnNpb24pOwogICAJCSR2ZXJzaW9uUmVsZWFzZS0+c2V0VmVyc2lvbigkdmVyc2lvbik7CiAgIAkJJHZlcnNpb25SZWxlYXNlLT5jb21taXREYXRhKCk7CiAgIAkJCiAgIAkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCk7CiAgICB9IAogICAgCiAgICAvKioKICAgICAqIERpYWdub3N0aWMgbWV0aG9kIHRoYXQgcmVzcG9uZHMgaWYgTWVtYmVyTW91c2UgaXMgYWN0aXZlIGFuZCB3b3JraW5nIGNvcnJlY3RseQogICAgICogCiAgICAgKiBAcGFyYW0gUmVzdFNlcnZlciAkcmVzdCBBbiBpbnN0YW5jZSBvZiB0aGUgUmVzdFNlcnZlcgogICAgICogQHJldHVybiBSZXNwb25zZSBvYmplY3Qgd2l0aCBzdGF0dXMgMjAwIGNvbnRhaW5pbmcgaWYgTWVtYmVyTW91c2UgaXMgaW5zdGFsbGVkLCByZWNlaXZlcyB0aGUgcmVxdWVzdCwgYW5kIGlzIGFibGUgdG8gcmVzcG9uZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gcGluZygkcmVzdCkKICAgIHsKICAgIAkkcmVzdWx0ID0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpwaW5nKCk7CiAgICAJCiAgICAJaWYoJHJlc3VsdCBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKQogICAgCXsKICAgIAkJcmV0dXJuIG5ldyBSZXNwb25zZSgkcmVzdCwgJHJlc3VsdC0+bWVzc2FnZSwgJHJlc3VsdC0+bWVzc2FnZSwgUkVTUE9OU0VfRVJST1JfQ09ERV9JTlRFUk5BTCwgUkVTUE9OU0VfRVJST1JfQ09ERV9JTlRFUk5BTCk7CiAgICAJfQogICAgCQogICAgCWlmKCRyZXN1bHQpCiAgICAJewogICAgCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAiUE9ORyIsICJQT05HIik7CiAgICAJfQogICAgCWVsc2UgCiAgICAJewogICAgCQlyZXR1cm4gbmV3IFJlc3BvbnNlKCRyZXN0LCAiUGx1Z2luIGF1dGhvcml6YXRpb24gZmFpbGVkIiwgIlBsdWdpbiBhdXRob3JpemF0aW9uIGZhaWxlZCIsIFJFU1BPTlNFX0VSUk9SX0NPREVfSU5URVJOQUwsIFJFU1BPTlNFX0VSUk9SX01FU1NBR0VfSU5URVJOQUwpOwogICAgCX0KICAgIH0KfQ==', 0, '2018-11-21 06:38:54'),
(138, 'jsonrpcclient', 'LyoqCiAqIE1NX2pzb25SUENDbGllbnQucGhwCiAqCiAqIFdyaXR0ZW4gdXNpbmcgdGhlIEpTT04gUlBDIHNwZWNpZmljYXRpb24gLQogKiBodHRwOi8vanNvbi1ycGMub3JnL3dpa2kvc3BlY2lmaWNhdGlvbgogKgogKiBAYXV0aG9yIEthY3BlciBSb3dpbnNraSA8a3Jvd2luc2tpQGltcGxpeC5jb20+CiAqIGh0dHA6Ly9pbXBsaXguY29tCiAqLwoKY2xhc3MgTU1fanNvblJQQ0NsaWVudAp7CiAgICBwcm90ZWN0ZWQgJHVybCA9IG51bGwsICRpc19ub3RpZmljYXRpb24gPSBmYWxzZSwgJGlzX2RlYnVnID0gZmFsc2U7CgogICAgLy8gaHR0cCBlcnJvcnMgLSBtb3JlIGNhbiBiZSBmb3VuZCBhdAogICAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX0hUVFBfc3RhdHVzX2NvZGVzCiAgICBwdWJsaWMgJGh0dHBfZXJyb3JzID0gYXJyYXkKICAgICgKICAgICAgICA0MDAgPT4gJzQwMCBCYWQgUmVxdWVzdCcsCiAgICAgICAgNTAwID0+ICc1MDAgSW50ZXJuYWwgU2VydmVyIEVycm9yJwogICAgKTsKCiAgICAvKioKICAgICAqIFRha2VzIHRoZSBjb25uZWN0aW9uIHBhcmFtZXRlciBhbmQgY2hlY2tzIGZvciBleHRlbnRpb25zCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkdXJsIC0gdXJsIG5hbWUgbGlrZSBodHRwOi8vZXhhbXBsZS5jb20vCiAgICAgKiBAcmV0dXJuIHZvaWQKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCAkdXJsICkKICAgIHsKICAgICAgICAkdmFsaWRhdGVQYXJhbXMgPSBhcnJheQogICAgICAgICgKICAgICAgICAgICAgZmFsc2UgPT09IGV4dGVuc2lvbl9sb2FkZWQoJ2N1cmwnKSA9PiAnVGhlIGN1cmwgZXh0ZW5zaW9uIG11c3QgYmUgbG9hZGVkIGZvciB1c2luZyB0aGlzIGNsYXNzICEnLAogICAgICAgICAgICBmYWxzZSA9PT0gZXh0ZW5zaW9uX2xvYWRlZCgnanNvbicpID0+ICdUaGUganNvbiBleHRlbnNpb24gbXVzdCBiZSBsb2FkZWQgZm9yIHVzaW5nIHRoaXMgY2xhc3MgIScKICAgICAgICApOwogICAgICAgICR0aGlzLT5jaGVja0ZvckVycm9ycyggJHZhbGlkYXRlUGFyYW1zICk7CgogICAgICAgIC8vIHNldCBhbiB1cmwgdG8gY29ubmVjdCB0bwogICAgICAgICR0aGlzLT51cmwgPSAkdXJsOwogICAgfQoKICAgIC8qKgogICAgICogU2V0IGRlYnVnIG1vZGUKICAgICAqCiAgICAgKiBAcGFyYW0gYm9vbGVhbiAkaXNfZGVidWcKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0RGVidWcoICRpc19kZWJ1ZyApCiAgICB7CiAgICAgICAgJHRoaXMtPmlzX2RlYnVnID0gIWVtcHR5KCRpc19kZWJ1Zyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTZXQgcmVxdWVzdCB0byBiZSBhIG5vdGlmaWNhdGlvbgogICAgICoKICAgICAqIEBwYXJhbSBib29sZWFuICRpc19ub3RpZmljYXRpb24KICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2V0Tm90aWZpY2F0aW9uKCAkaXNfbm90aWZpY2F0aW9uICApCiAgICB7CiAgICAgICAgJHRoaXMtPmlzX2lzX25vdGlmaWNhdGlvbiA9ICFlbXB0eSgkaXNfbm90aWZpY2F0aW9uKTsKICAgIH0KCiAgICAvKioKICAgICAqIFBlcmZvcm1zIGEgcmVxdWVzdCBhbmQgZ2V0cyB0aGUgcmVzdWx0cwogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJG1ldGhvZCAtIEEgU3RyaW5nIGNvbnRhaW5pbmcgdGhlIG5hbWUgb2YgdGhlIG1ldGhvZCB0byBiZSBpbnZva2VkLgogICAgICogQHBhcmFtIGFycmF5ICRwYXJhbXMgLSBBbiBBcnJheSBvZiBvYmplY3RzIHRvIHBhc3MgYXMgYXJndW1lbnRzIHRvIHRoZSBtZXRob2QuCiAgICAgKiBAcmV0dXJuIGFycmF5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NhbGwoICRtZXRob2QsICRwYXJhbXMgKQogICAgewogICAgICAgIHN0YXRpYyAkY291bnRlcjsKCiAgICAgICAgLy8gY2hlY2sgaWYgZ2l2ZW4gcGFyYW1zIGFyZSBjb3JyZWN0CiAgICAgICAgJHZhbGlkYXRlUGFyYW1zID0gYXJyYXkKICAgICAgICAoCiAgICAgICAgICAgICBmYWxzZSA9PT0gaXNfc2NhbGFyKCRtZXRob2QpID0+ICdNZXRob2QgbmFtZSBoYXMgbm8gc2NhbGFyIHZhbHVlJywKICAgICAgICAgICAgIGZhbHNlID09PSBpc19hcnJheSgkcGFyYW1zKSA9PiAnUGFyYW1zIG11c3QgYmUgZ2l2ZW4gYXMgYXJyYXknCiAgICAgICAgKTsKICAgICAgICAkdGhpcy0+Y2hlY2tGb3JFcnJvcnMoICR2YWxpZGF0ZVBhcmFtcyApOwoKICAgICAgICAvLyBpZiB0aGlzIGlzX25vdGlmaWNhdGlvbiAtIEpTT04tUlBDIHNwZWNpZmljYXRpb24gcG9pbnQgMS4zCiAgICAgICAgJHJlcXVlc3RJZCA9IHRydWUgPT09ICR0aGlzLT5pc19ub3RpZmljYXRpb24gPyBudWxsIDogKyskY291bnRlcjsKCiAgICAgICAgLy8gUmVxdWVzdCAobWV0aG9kIGludm9jYXRpb24pIC0gSlNPTi1SUEMgc3BlY2lmaWNhdGlvbiBwb2ludCAxLjEKICAgICAgICAkcmVxdWVzdCA9IGpzb25fZW5jb2RlKCBhcnJheSAoICdtZXRob2QnID0+ICRtZXRob2QsICdwYXJhbXMnID0+IGFycmF5X3ZhbHVlcygkcGFyYW1zKSwgJ2lkJyA9PiAkcmVxdWVzdElkICkgKTsKCiAgICAgICAgLy8gaWYgaXNfZGVidWcgbW9kZSBpcyB0cnVlIHRoZW4gYWRkIHJlcXVlc3QgdG8gaXNfZGVidWcKICAgICAgICAkdGhpcy0+ZGVidWcoICdSZXF1ZXN0OiAnIC4gJHJlcXVlc3QgLiAiXHJcbiIsIGZhbHNlICk7CgogICAgICAgICRyZXNwb25zZSA9ICR0aGlzLT5nZXRSZXNwb25zZSggJHJlcXVlc3QgKTsKCiAgICAgICAgLy8gaWYgaXNfZGVidWcgbW9kZSBpcyB0cnVlIHRoZW4gYWRkIHJlc3BvbnNlIHRvIGlzX2RlYnVnIGFuZCBkaXNwbGF5IGl0CiAgICAgICAgJHRoaXMtPmRlYnVnKCAnUmVzcG9uc2U6ICcgLiAkcmVzcG9uc2UgLiAiXHJcbiIsIHRydWUgKTsKCiAgICAgICAgLy8gZGVjb2RlIGFuZCBjcmVhdGUgYXJyYXkgKCBjYW4gYmUgb2JqZWN0LCBqdXN0IHNldCB0byBmYWxzZSApCiAgICAgICAgJHJlc3BvbnNlID0ganNvbl9kZWNvZGUoICRyZXNwb25zZSwgdHJ1ZSApOwoKICAgICAgICAvLyBpZiB0aGlzIHdhcyBqdXN0IGlzX25vdGlmaWNhdGlvbgogICAgICAgIGlmICggdHJ1ZSA9PT0gJHRoaXMtPmlzX25vdGlmaWNhdGlvbiApCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIC8vIGNoZWNrIGlmIHJlc3BvbnNlIGlzIGNvcnJlY3QKICAgICAgICAkdmFsaWRhdGVQYXJhbXMgPSBhcnJheQogICAgICAgICgKICAgICAgICAgICAgIWlzX251bGwoJHJlc3BvbnNlWydlcnJvciddKSA9PiAnUmVxdWVzdCBoYXZlIHJldHVybiBlcnJvcjogJyAuICRyZXNwb25zZVsnZXJyb3InXVsnbWVzc2FnZSddLAogICAgICAgICAgICAkcmVzcG9uc2VbJ2lkJ10gIT0gJHJlcXVlc3RJZCA9PiAnUmVxdWVzdCBpZDogJy4kcmVxdWVzdElkLidpcyBkaWZmZXJlbnQgZnJvbSBSZXNwb25zZSBpZDogJyAuICRyZXNwb25zZVsnaWQnXSwKCiAgICAgICAgKTsKICAgICAgICAkdGhpcy0+Y2hlY2tGb3JFcnJvcnMoICR2YWxpZGF0ZVBhcmFtcyApOwoKICAgICAgICByZXR1cm4gJHJlc3BvbnNlWydyZXN1bHQnXTsKICAgIH0KCiAgICAvKioKICAgICAqICAgICBXaGVuIHRoZSBtZXRob2QgaW52b2NhdGlvbiBjb21wbGV0ZXMsIHRoZSBzZXJ2aWNlIG11c3QgcmVwbHkgd2l0aCBhIHJlc3BvbnNlLgogICAgICogICAgIFRoZSByZXNwb25zZSBpcyBhIHNpbmdsZSBvYmplY3Qgc2VyaWFsaXplZCB1c2luZyBKU09OCiAgICAgKgogICAgICogQHBhcmFtIHN0cmluZyAkcmVxdWVzdAogICAgICogQHJldHVybiBzdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uICYgZ2V0UmVzcG9uc2UoICYgJHJlcXVlc3QgKQogICAgewogICAgICAgIC8vIGRvIHRoZSBhY3R1YWwgY29ubmVjdGlvbgogICAgICAgICRjaCA9IGN1cmxfaW5pdCgpOwogICAgICAgIC8vIHNldCBVUkwKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVVJMLCAkdGhpcy0+dXJsKTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVCwgMSk7CiAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1BPU1RGSUVMRFMsICRyZXF1ZXN0KTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfSFRUUEhFQURFUiwgYXJyYXkoJ0NvbnRlbnQtdHlwZTogYXBwbGljYXRpb24vanNvbicpKTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfRU5DT0RJTkcsICdnemlwLGRlZmxhdGUnKTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIDEpOwogICAgICAgIGN1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgMSk7CiAgICAgICAgY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0NPTk5FQ1RUSU1FT1VULCA4KTsKICAgICAgICBjdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfVElNRU9VVCwgOCk7CiAgICAgICAgLy8gc2VuZCB0aGUgcmVxdWVzdAogICAgICAgICRyZXNwb25zZSA9IGN1cmxfZXhlYygkY2gpOwogICAgICAgIC8vIGNoZWNrIGh0dHAgc3RhdHVzIGNvZGUKICAgICAgICAkaHR0cF9jb2RlID0gY3VybF9nZXRpbmZvKCRjaCwgQ1VSTElORk9fSFRUUF9DT0RFKTsKICAgICAgICBpZiAoIGlzc2V0KCR0aGlzLT5odHRwX2Vycm9yc1skaHR0cF9jb2RlXSkgICkKICAgICAgICB7CiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1Jlc3BvbnNlIEh0dHAgRXJyb3IgLSAnIC4gJHRoaXMtPmh0dHBfZXJyb3JzWyRodHRwX2NvZGVdICk7CiAgICAgICAgfQogICAgICAgIC8vIGNoZWNrIGZvciBjdXJsIGVycm9yCiAgICAgICAgaWYgKCAwIDwgY3VybF9lcnJubygkY2gpICkKICAgICAgICB7CiAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1VuYWJsZSB0byBjb25uZWN0IHRvICcuJHRoaXMtPnVybCAuICcgRXJyb3I6ICcgLiBjdXJsX2Vycm9yKCRjaCkgKTsKICAgICAgICB9CiAgICAgICAgLy8gY2xvc2UgdGhlIGNvbm5lY3Rpb24KICAgICAgICBjdXJsX2Nsb3NlKCRjaCk7CiAgICAgICAgcmV0dXJuICRyZXNwb25zZTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrIGZvciBlcnJvcnMKICAgICAqCiAgICAgKiBAcGFyYW0gYXJyYXkgJHZhbGlkYXRlQXJyYXkKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gY2hlY2tGb3JFcnJvcnMoICYgJHZhbGlkYXRlQXJyYXkgKQogICAgewogICAgICAgIGZvcmVhY2ggKCAkdmFsaWRhdGVBcnJheSBhcyAkdGVzdCA9PiAkZXJyb3IgKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCAkdGVzdCApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oICRlcnJvciApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogRm9yIGlzX2RlYnVnIGFuZCBwZXJmb3JtYW5jZSBzdGF0cwogICAgICoKICAgICAqIEBwYXJhbSBzdHJpbmcgJGFkZAogICAgICogQHBhcmFtIGJvb2xlYW4gJHNob3cKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gZGVidWcoICRhZGQsICRzaG93ID0gZmFsc2UgKQogICAgewogICAgICAgIHN0YXRpYyAkZGVidWcsICRzdGFydFRpbWU7CiAgICAgICAgLy8gaXNfZGVidWcgb2ZmIHJldHVybgogICAgICAgIGlmICggZmFsc2UgPT09ICR0aGlzLT5pc19kZWJ1ZyApCiAgICAgICAgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIC8vIGFkZAogICAgICAgICRkZWJ1ZyAuPSAkYWRkOwogICAgICAgIC8vIGdldCBzdGFydHRpbWUKICAgICAgICAkc3RhcnRUaW1lID0gZW1wdHkoJHN0YXJ0VGltZSkgPyBhcnJheV9zdW0oZXhwbG9kZSgnICcsIG1pY3JvdGltZSgpKSkgOiAkc3RhcnRUaW1lOwogICAgICAgIGlmICggdHJ1ZSA9PT0gJHNob3cgYW5kICFlbXB0eSgkZGVidWcpICApCiAgICAgICAgewogICAgICAgICAgICAvLyBnZXQgZW5kdGltZQogICAgICAgICAgICAkZW5kVGltZSA9IGFycmF5X3N1bShleHBsb2RlKCcgJywgbWljcm90aW1lKCkpKTsKICAgICAgICAgICAgLy8gcGVyZm9ybWFuY2Ugc3VtbWFyeQogICAgICAgICAgICAkZGVidWcgLj0gJ1JlcXVlc3QgdGltZTogJyAuIHJvdW5kKCRlbmRUaW1lIC0gJHN0YXJ0VGltZSwgMykgLiAnIHMgTWVtb3J5IHVzYWdlOiAnIC4gcm91bmQobWVtb3J5X2dldF91c2FnZSgpIC8gMTAyNCkgLiAiIGtiXHJcbiI7CiAgICAgICAgICAgIGVjaG8gbmwyYnIoJGRlYnVnKTsKICAgICAgICAgICAgLy8gc2VuZCBvdXRwdXQgaW1pZGlhdGVseQogICAgICAgICAgICBmbHVzaCgpOwogICAgICAgICAgICAvLyBjbGVhbiBzdGF0aWMKICAgICAgICAgICAgJGRlYnVnID0gJHN0YXJ0VGltZSA9IG51bGw7CiAgICAgICAgfQogICAgfQp9Cg==', 0, '2018-11-21 06:38:54'),
(139, 'affiliatereport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fQWZmaWxpYXRlUmVwb3J0IGV4dGVuZHMgTU1fQWR2YW5jZWRSZXBvcnRCYXNlIAp7CgkKCXByb3RlY3RlZCAkdmlzdWFsRWxlbWVudHMgPSBhcnJheSgiTU1fUmVwb3J0RGF0YUdyaWQiKTsKCQoJcHVibGljIHN0YXRpYyAkQUZGSUxJQVRFX1JFUE9SVF9EQVRBR1JJRCA9ICJhZmZpbGlhdGVfcmVwb3J0X2RhdGFncmlkIjsKCQoJLy9xdWVyeSBpZGVudGlmaWVycwoJcHVibGljIHN0YXRpYyAkQUZGSUxJQVRFX1JFUE9SVF9RVUVSWSA9ICJhZmZpbGlhdGVfcmVwb3J0X3F1ZXJ5IjsKCXB1YmxpYyBzdGF0aWMgJFRFU1RfUVVFUlkgPSAidGVzdF9xdWVyeSI7CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlclZpc3VhbEVsZW1lbnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpIAoJewoJCXN3aXRjaCAoJGVsZW1lbnRJZGVudGlmaWVyKQoJCXsKCQkJY2FzZSBzZWxmOjokQUZGSUxJQVRFX1JFUE9SVF9EQVRBR1JJRDoKCQkJCXJldHVybiAkdGhpcy0+cmVuZGVyQWZmaWxpYXRlUmVwb3J0RGF0YWdyaWQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQsICRkaXJlY3RpdmVzKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiVW5hYmxlIHRvIHJlbmRlciB2aXN1YWwgZWxlbWVudDogaWRlbnRpZmllciAiLigoIWlzX2FycmF5KCRlbGVtZW50SWRlbnRpZmllcikgJiYgIWlzX29iamVjdCgkZWxlbWVudElkZW50aWZpZXIpKT8ieyRlbGVtZW50SWRlbnRpZmllcn0gIjoiIikuInVua25vd24iLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyQWZmaWxpYXRlUmVwb3J0RGF0YWdyaWQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKCR0aGlzLHNlbGY6OiRURVNUX1FVRVJZLCAkcGFyYW1zKTsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJCgkJCgkJJGdyaWRIZWFkZXJzID0gYXJyYXkoInNlZ21lbnQiICAgICAgID0+IGFycmF5KCdsYWJlbCc9PiJTZWdtZW50IiksIAoJCQkJCQkgICAgICJmcmVlX21lbWJlcnMiICA9PiBhcnJheSgnbGFiZWwnPT4iRnJlZSBNZW1iZXJzIiksCgkJCQkJCQkgInBhaWRfbWVtYmVycyIgID0+IGFycmF5KCdsYWJlbCc9PiJQYWlkIE1lbWJlcnMiKSwKCQkJCQkJCSAidG90YWxfbWVtYmVycyIgPT4gYXJyYXkoJ2xhYmVsJz0+IlRvdGFsIE1lbWJlcnMiKSwKCQkJCQkJCSAidG90YWxfcmV2ZW51ZSIgPT4gYXJyYXkoJ2xhYmVsJz0+IlRvdGFsIFJldmVudWUiKSwKCQkJCQkJCQkKCQkpOwoJCSRncmlkID0gTU1fUmVwb3J0RGF0YWdyaWQ6OmNyZWF0ZUZyb21EYXRhKE1NX0FmZmlsaWF0ZVJlcG9ydDo6JEFGRklMSUFURV9SRVBPUlRfREFUQUdSSUQsICRncmlkSGVhZGVycywgJGRhdGFSZXNwb25zZSk7CgkJJGdyaWQtPnNldEdyaWRUaXRsZSgiQWZmaWxpYXRlIFJlcG9ydCIpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGdyaWQtPnJlbmRlcigpKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHRlc3RRdWVyeSgkcGFyYW1zKQoJewoJCWdsb2JhbCAkd3BkYjsKCQllcnJvcl9sb2coImluIHRlc3QgcXVlcnkiKTsKCQlpZiAoaXNzZXQoJHBhcmFtc1snYWZmaWxpYXRlX2lkJ10pICYmICFlbXB0eSgkcGFyYW1zWydhZmZpbGlhdGVfaWQnXSkpCgkJewoJCQkkc3FsID0gInNlbGVjdCBkaXN0aW5jdCBzdWJfYWZmaWxpYXRlX2lkIGFzIHNlZ21lbnQsICcxMDAnIGFzIGZyZWVfbWVtYmVycywgJzIwMCcgYXMgcGFpZF9tZW1iZXJzLCAnMzAwJyBhcyB0b3RhbF9tZW1iZXJzLCA0MDAuMDAgYXMgdG90YWxfcmV2ZW51ZSBmcm9tIG1tX29yZGVycyB3aGVyZSBhZmZpbGlhdGVfaWQ9JXMiOwoJCQkkc3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwkcGFyYW1zWydhZmZpbGlhdGVfaWQnXSk7CgkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwsQVJSQVlfQSk7CgkJfQoJCWVsc2UgCgkJewoJCQllcnJvcl9sb2coImluIHNlY3Rpb24iKTsKCQkJJHNxbCA9ICJzZWxlY3QgZGlzdGluY3QgYWZmaWxpYXRlX2lkIGFzIHNlZ21lbnQsICcxMDAnIGFzIGZyZWVfbWVtYmVycywgJzIwMCcgYXMgcGFpZF9tZW1iZXJzLCAnMzAwJyBhcyB0b3RhbF9tZW1iZXJzLCA0MDAuMDAgYXMgdG90YWxfcmV2ZW51ZSBmcm9tIG1tX29yZGVycyI7CgkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwsQVJSQVlfQSk7CgkJCWZvcmVhY2ggKCRyZXN1bHRzIGFzICRrPT4mJHYpCgkJCXsKCQkJCSR2WydzZWdtZW50J10gPSAiPGEgb25DbGljaz0nbW1qcy5uYXZpZ2F0ZShcIiIuc2VsZjo6JEFGRklMSUFURV9SRVBPUlRfREFUQUdSSUQuIlwiLHthZmZpbGlhdGVfaWQ6XCJ7JHZbJ3NlZ21lbnQnXX1cIn0pOyc+eyR2WydzZWdtZW50J119PC9hPiI7CgkJCX0KCQl9CgkJCgkJLyoKCQkkcmVzdWx0c1sxXVsnc3Vicm93cyddWydjb2x1bW5BbGlhc2VzJ10gPSBhcnJheSgic2VnbWVudCI9PiJzdWJhZmZpbGlhdGVfaWQiKTsKCQlmb3IgKCRpPTE7ICRpPDQ7ICRpKyspIC8vMyB0ZXN0IHN1YnJvd3MKCQl7CgkJCSRzdWJyZXN1bHRzW10gPSBhcnJheSgnc3ViYWZmaWxpYXRlX2lkJz0+InN1YnskaX0iLCAnZnJlZV9tZW1iZXJzJz0+JzEwMCcsJ3BhaWRfbWVtYmVycyc9PicyMDAnLCd0b3RhbF9tZW1iZXJzJz0+JzMwMCcsJ3RvdGFsX3JldmVudWUnPT4nNDAwJyk7CgkJfQoJCSRkYXRhc2V0ID0gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlQ29tcG91bmRSZXBvcnREYXRhc2V0KCRwYXJhbXMsJHJlc3VsdHMpOwoJCSRzdWJwYXJhbXMgPSAkcGFyYW1zICsgYXJyYXkoJ3N1YmFmZmlsaWF0ZV9pZCc9Pidmb28nKTsKCQkkZGF0YXNldC0+YWRkQWRkaXRpb25hbERhdGFzZXQoJHN1YnBhcmFtcywgJHN1YnJlc3VsdHMpOwoJCSovCgkJJGRhdGFzZXQgPSBNTV9SZXBvcnREYXRhc2V0OjpjcmVhdGVTaW5nbGVSZXBvcnREYXRhc2V0KCRwYXJhbXMsJHJlc3VsdHMpOwoJCXJldHVybiAkZGF0YXNldDsKCX0KCQoJLyoqCgkgKiBHZW5lcmF0ZSB0aGUgZGF0YSBmb3IgdGhlIEF2ZyBDdXN0b21lciBWYWx1ZSByZXBvcnQuIAoJICogQ29uc3RyYWludDogVGhlIHN1cHBsaWVkIHBhcmFtcyBtdXN0IGNvbnRhaW4gYSBzdGFydCBhbmQgZW5kIGRhdGUKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwYXJhbXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgcmVzdWx0cwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlQWZmaWxpYXRlUmVwb3J0RGF0YSgkcGFyYW1zKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoIWlzX2FycmF5KCRwYXJhbXMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIEFmaWxsaWF0ZSByZXBvcnQgZGF0YTogSW1wcm9wZXIgcGFyYW1ldGVycyBmb3JtYXQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoIWlzc2V0KCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkgfHwgIWlzc2V0KCRwYXJhbXNbJ2VuZF9kYXRlJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIEFmZmlsaWF0ZSByZXBvcnQgZGF0YTogU3RhcnQgYW5kIEVuZCBkYXRlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdHJhbnNhY3Rpb25zVGFibGUgPSBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0c7CgkJJG1lbWJlcnNoaXBMZXZlbFRhYmxlID0gTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFM7CgkJJHVzZXJEYXRhVGFibGUgPSBNTV9UQUJMRV9VU0VSX0RBVEE7CgkJJG9yZGVyc1RhYmxlID0gTU1fVEFCTEVfT1JERVJTOwoJCQoJCSRzdGFydFRpbWUgPSBzdHJ0b3RpbWUoJHBhcmFtc1snc3RhcnRfZGF0ZSddKTsKCQkkZW5kVGltZSA9IHN0cnRvdGltZSgkcGFyYW1zWydlbmRfZGF0ZSddKTsKCQkKCQkkc3RhcnREYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiLCRzdGFydFRpbWUpOyAvL215c3FsIGZvcm1hdAoJCSRlbmREYXRlID0gICBkYXRlKCJZLW0tZCBIOmk6cyIsJGVuZFRpbWUpOwoJCQoJCSRhZmZpbGlhdGVSZXN1bHRzID0gYXJyYXkoKTsKCQkkc3ViYWZmaWxpYXRlUmVzdWx0cyA9IGFycmF5KCk7CgkJCgkJJGV4Y2x1ZGVkU3RhdHVzZXMgPSAiJyIuTU1fU3RhdHVzOjokUEVORElORy4iJywnIi5NTV9TdGF0dXM6OiRFUlJPUi4iJyI7IC8vcXVvdGVkIGFuZCBjb21tYS1zZXBlcmF0ZWQKCQkKCQkvKiBzdGVwIDEgLSBnZXQgYWZmaWxpYXRlX2lkIChzZWdtZW50KSwgc3ViX2FmZmlsaWF0ZV9pZCwgZnJlZV9tZW1iZXJzLCBwYWlkX21lbWJlcnMsIGFuZCB0b3RhbF9tZW1iZXJzICovCgkJJHNxbCA9ICJTRUxFQ1QgSUYoby5hZmZpbGlhdGVfaWQ9JycsJ1t1bnNwZWNpZmllZF0nLG8uYWZmaWxpYXRlX2lkKSBBUyBhZmZpbGlhdGVfaWQsIi4KCQkJICAgIklGKG8uc3ViX2FmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsby5zdWJfYWZmaWxpYXRlX2lkKSBBUyBzdWJfYWZmaWxpYXRlX2lkLCIuCgkJCSAgICJTVU0obWwuaXNfZnJlZSkgQVMgZnJlZV9tZW1iZXJzLCBTVU0oSUYoKG1sLmlzX2ZyZWUgPSAwKSwxLDApKSBBUyBwYWlkX21lbWJlcnMsIFNVTSgxKSBBUyB0b3RhbF9tZW1iZXJzICIuCgkJCSAgICJGUk9NIHskb3JkZXJzVGFibGV9IG8gSU5ORVIgSk9JTiB7JHVzZXJEYXRhVGFibGV9IG11IE9OIChvLnVzZXJfaWQgPSBtdS53cF91c2VyX2lkKSAiLgoJCQkgICAiSU5ORVIgSk9JTiB7JG1lbWJlcnNoaXBMZXZlbFRhYmxlfSBtbCBPTiAobXUubWVtYmVyc2hpcF9sZXZlbF9pZCA9IG1sLmlkKSAiLgoJCQkgICAiV0hFUkUgKG8uZGF0ZV9hZGRlZCBCRVRXRUVOICd7JHN0YXJ0RGF0ZX0nIEFORCAneyRlbmREYXRlfScpIEFORCAobXUuc3RhdHVzIE5PVCBJTiAoeyRleGNsdWRlZFN0YXR1c2VzfSkpICIuCgkJCSAgICJHUk9VUCBCWSBvLmFmZmlsaWF0ZV9pZCwgby5zdWJfYWZmaWxpYXRlX2lkIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsLEFSUkFZX0EpOwoJCWlmIChjb3VudCgkcmVzdWx0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkkYWZmaWxpYXRlID0gJHZbJ2FmZmlsaWF0ZV9pZCddOwoJCQkJZm9yZWFjaCAoJHYgYXMgJGNvbHVtbj0+JGNvbHVtblZhbHVlKQoJCQkJewoJCQkJCWlmICgoJGNvbHVtbiAhPSAnYWZmaWxpYXRlX2lkJykgJiYgKCRjb2x1bW4gIT0gJ3N1Yl9hZmZpbGlhdGVfaWQnKSkKCQkJCQl7CgkJCQkJCSRhZmZpbGlhdGVSZXN1bHRzWyRhZmZpbGlhdGVdWyRjb2x1bW5dID0gaXNzZXQoJGFmZmlsaWF0ZVJlc3VsdHNbJGFmZmlsaWF0ZV1bJGNvbHVtbl0pPygkYWZmaWxpYXRlUmVzdWx0c1skYWZmaWxpYXRlXVskY29sdW1uXSArICRjb2x1bW5WYWx1ZSk6JGNvbHVtblZhbHVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJJHN1YmFmZmlsaWF0ZVJlc3VsdHMgPSAkcmVzdWx0czsKCQkJCgkJCS8qIHN0ZXAgMiAtIGdldCB0b3RhbCByZXZlbnVlIGFzIGEgcG9zaXRpdmUgZGVjaW1hbCBudW1iZXIgKi8KCQkJJHNxbCA9ICJTRUxFQ1QgSUYoby5hZmZpbGlhdGVfaWQ9JycsJ1t1bnNwZWNpZmllZF0nLG8uYWZmaWxpYXRlX2lkKSBBUyBhZmZpbGlhdGVfaWQsIi4KCQkJCSAgICJJRihvLnN1Yl9hZmZpbGlhdGVfaWQ9JycsJ1t1bnNwZWNpZmllZF0nLG8uc3ViX2FmZmlsaWF0ZV9pZCkgQVMgc3ViX2FmZmlsaWF0ZV9pZCwiLgoJCQkJICAgIlNVTShBQlModC5hbW91bnQpKSBBUyB0b3RhbF9yZXZlbnVlIEZST00geyR0cmFuc2FjdGlvbnNUYWJsZX0gdCBJTk5FUiBKT0lOIHskb3JkZXJzVGFibGV9IG8gIE9OICh0Lm9yZGVyX2lkID0gby5pZCkgIi4KCQkJCSAgICJXSEVSRSAodC50cmFuc2FjdGlvbl90eXBlIElOICgnIi5NTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVC4iJywnIi5NTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQuIicpKSAiLgoJCQkJICAgIkFORCAoby5kYXRlX2FkZGVkIEJFVFdFRU4gJ3skc3RhcnREYXRlfScgYW5kICd7JGVuZERhdGV9JykgIi4KCQkJCSAgICJHUk9VUCBCWSBvLmFmZmlsaWF0ZV9pZCwgby5zdWJfYWZmaWxpYXRlX2lkIjsKCQkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCxBUlJBWV9BKTsKCQkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkkYWZmaWxpYXRlID0gJHZbJ2FmZmlsaWF0ZV9pZCddOwoJCQkJZm9yZWFjaCAoJHYgYXMgJGNvbHVtbj0+JGNvbHVtblZhbHVlKQoJCQkJewoJCQkJCWlmICgoJGNvbHVtbiAhPSAnYWZmaWxpYXRlX2lkJykgJiYgKCRjb2x1bW4gIT0gJ3N1Yl9hZmZpbGlhdGVfaWQnKSkKCQkJCQl7CgkJCQkJCSRhZmZpbGlhdGVSZXN1bHRzWyRhZmZpbGlhdGVdWyRjb2x1bW5dID0gaXNzZXQoJGFmZmlsaWF0ZVJlc3VsdHNbJGFmZmlsaWF0ZV1bJGNvbHVtbl0pPygkYWZmaWxpYXRlUmVzdWx0c1skYWZmaWxpYXRlXVskY29sdW1uXSArICRjb2x1bW5WYWx1ZSk6JGNvbHVtblZhbHVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJLyogc3RlcCAzIC0gZ2V0IDMwLDYwLDkwLDEyMCwxNTAgYW5kIDE4MCBkYXkgY3VzdG9tZXIgdmFsdWUgKi8KCQkJJHNxbCA9ICJTRUxFQ1QgSUYoYWZmaWxpYXRlX2lkPScnLCdbdW5zcGVjaWZpZWRdJyxhZmZpbGlhdGVfaWQpIEFTIGFmZmlsaWF0ZV9pZCwiLgoJCQkJICAgIklGKHN1Yl9hZmZpbGlhdGVfaWQ9JycsJ1t1bnNwZWNpZmllZF0nLHN1Yl9hZmZpbGlhdGVfaWQpIEFTIHN1Yl9hZmZpbGlhdGVfaWQsIi4KCQkJCSAgICJTVU0oSUYoZGF5c19vdXQ9MCxhbW91bnQsMCkpIEFTIDBfZGF5LCIuCgkJCQkgICAiU1VNKElGKGRheXNfb3V0PD0zMCxhbW91bnQsMCkpIEFTIDMwX2RheSwiLgoJCQkJICAgIlNVTShJRihkYXlzX291dDw9NjAsYW1vdW50LDApKSBBUyA2MF9kYXksIi4KCQkJCSAgICJTVU0oaWYoZGF5c19vdXQ8PTkwLGFtb3VudCwwKSkgQVMgOTBfZGF5LCIuCgkJCQkgICAiU1VNKElGKGRheXNfb3V0PD0xMjAsYW1vdW50LDApKSBBUyAxMjBfZGF5ICIuCgkJCQkgICAiU1VNKElGKGRheXNfb3V0PD0xNTAsYW1vdW50LDApKSBBUyAxNTBfZGF5ICIuCgkJCQkgICAiU1VNKElGKGRheXNfb3V0PD0xODAsYW1vdW50LDApKSBBUyAxODBfZGF5ICIuCgkJCQkgICAiRlJPTSAoU0VMRUNUIHQudHJhbnNhY3Rpb25fZGF0ZSwgby5kYXRlX2FkZGVkLCB0LmFtb3VudCwgby5hZmZpbGlhdGVfaWQsIG8uc3ViX2FmZmlsaWF0ZV9pZCwgIi4KCQkJCSAgICJJRigoREFURURJRkYodC50cmFuc2FjdGlvbl9kYXRlLG8uZGF0ZV9hZGRlZCk9LTEpLDAsREFURURJRkYodC50cmFuc2FjdGlvbl9kYXRlLG8uZGF0ZV9hZGRlZCkpICIuCgkJCQkgICAiQVMgZGF5c19vdXQgRlJPTSB7JHRyYW5zYWN0aW9uc1RhYmxlfSB0IElOTkVSIEpPSU4geyRvcmRlcnNUYWJsZX0gbyBPTiAodC5vcmRlcl9pZCA9IG8uaWQpICIuCgkJCQkgICAiV0hFUkUgKHQudHJhbnNhY3Rpb25fdHlwZSBJTiAoJyIuTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQuIicsJyIuTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULiInKSkgIi4KCQkJCSAgICJBTkQgKG8uZGF0ZV9hZGRlZCBCRVRXRUVOICd7JHN0YXJ0RGF0ZX0nIGFuZCAneyRlbmREYXRlfScpKSBBUyBRIEdST1VQIEJZIGFmZmlsaWF0ZV9pZCwgc3ViX2FmZmlsaWF0ZV9pZCI7CgkJCQkgICAJCQoJCQkvKiBzdGVwIDQsIHBhcnQgMSAtIGdldCBhdmcgZGF5cyBhcyBtZW1iZXIgZm9yIGFmZmlsaWF0ZXMgKi8KCQkJJHNxbCA9ICJTRUxFQ1QgSUYoYWZmaWxpYXRlX2lkPScnLCdbdW5zcGVjaWZpZWRdJyxhZmZpbGlhdGVfaWQpIEFTIGFmZmlsaWF0ZV9pZCwgIi4KCQkJICAJICAgIkFWRyhkYXlzX2FzX21lbWJlcikgQVMgYXZnX2RheXNfYXNfbWVtYmVyICIuCgkJCSAgCSAgICJGUk9NIChTRUxFQ1QgRElTVElOQ1Qgby5hZmZpbGlhdGVfaWQsIG11LndwX3VzZXJfaWQsIG11LnN0YXR1cywgIi4KCQkJCSAgICJEQVRFRElGRihJRigoKG11LnN0YXR1cz0nIi5NTV9TdGF0dXM6OiRDQU5DRUxFRC4iJykgb3IgKG11LnN0YXR1cz0nIi5NTV9TdGF0dXM6OiRFWFBJUkVELiInKSksbXUuc3RhdHVzX3VwZGF0ZWQsTk9XKCkpLG8uZGF0ZV9hZGRlZCkgIi4KCQkJCSAgICJBUyBkYXlzX2FzX21lbWJlciBGUk9NIG1tX29yZGVycyBvIElOTkVSIEpPSU4gbW1fdXNlcl9kYXRhIG11IE9OIChvLnVzZXJfaWQgPSBtdS53cF91c2VyX2lkKSAiLgoJCQkJICAgIldIRVJFIChvLmRhdGVfYWRkZWQgQkVUV0VFTiAneyRzdGFydERhdGV9JyBBTkQgJ3skZW5kRGF0ZX0nKSBBTkQgKG11LnN0YXR1cyBOT1QgSU4gKHskZXhjbHVkZWRTdGF0dXNlc30pKSkgQVMgUSBHUk9VUCBCWSBhZmZpbGlhdGVfaWQiOwoJCQkKCQkgICAgLyogc3RlcCA0LCBwYXJ0IDIgLSBnZXQgYXZnIGRheXMgYXMgbWVtYmVyIGZvciBzdWJhZmZpbGlhdGVzICovCgkJICAgICRzcWwgPSAiU0VMRUNUIElGKGFmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsYWZmaWxpYXRlX2lkKSBBUyBhZmZpbGlhdGVfaWQsICIuCgkJICAgCQkgICAiSUYoc3ViX2FmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsc3ViX2FmZmlsaWF0ZV9pZCkgQVMgc3ViX2FmZmlsaWF0ZV9pZCwiLgoJCSAgIAkJICAgIkFWRyhkYXlzX2FzX21lbWJlcikgQVMgYXZnX2RheXNfYXNfbWVtYmVyICIuCgkJICAgCQkgICAiRlJPTSAoU0VMRUNUIERJU1RJTkNUIG8uYWZmaWxpYXRlX2lkLCBvLnN1Yl9hZmZpbGlhdGVfaWQsIG11LndwX3VzZXJfaWQsIG11LnN0YXR1cywgIi4KCQkgICAJCSAgICJEQVRFRElGRihJRigoKG11LnN0YXR1cz0nIi5NTV9TdGF0dXM6OiRDQU5DRUxFRC4iJykgb3IgKG11LnN0YXR1cz0nIi5NTV9TdGF0dXM6OiRFWFBJUkVELiInKSksbXUuc3RhdHVzX3VwZGF0ZWQsTk9XKCkpLG8uZGF0ZV9hZGRlZCkgIi4KCQkgICAJCSAgICJBUyBkYXlzX2FzX21lbWJlciBGUk9NIG1tX29yZGVycyBvIElOTkVSIEpPSU4gbW1fdXNlcl9kYXRhIG11IE9OIChvLnVzZXJfaWQgPSBtdS53cF91c2VyX2lkKSAiLgoJCSAgIAkJICAgIldIRVJFIChvLmRhdGVfYWRkZWQgQkVUV0VFTiAneyRzdGFydERhdGV9JyBBTkQgJ3skZW5kRGF0ZX0nKSBBTkQgKG11LnN0YXR1cyBOT1QgSU4gKHskZXhjbHVkZWRTdGF0dXNlc30pKSkgQVMgUSBHUk9VUCBCWSBhZmZpbGlhdGVfaWQsc3ViX2FmZmlsaWF0ZV9pZCI7CgkJCgkJCS8qIHN0ZXAgNSAtIGNhbGN1bGF0ZSBjaHVybiAtIGZpcnN0IGdldCB0aGUgY2h1cm4gYWxvbmcgd2l0aCB0aGUgcmF3IGRhdGEgZm9yIHRoZSBzdWIgYWZmaWxpYXRlcywgYW5kIHRoZW4gY2FsY3VsYXRlIHRoZSB2YWx1ZXMgZm9yIHRoZSBhZmZpbGlhdGVzIC4uLiAqLwoJCQkkc3FsID0gInNlbGVjdCBJRihvLmFmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsby5hZmZpbGlhdGVfaWQpIEFTIGFmZmlsaWF0ZV9pZCwiLgoJCQkJICAgIklGKG8uc3ViX2FmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsby5zdWJfYWZmaWxpYXRlX2lkKSBBUyBzdWJfYWZmaWxpYXRlX2lkLCIuCgkJCQkgICAiU1VNKElGKG11LnN0YXR1cz0nIi5NTV9TdGF0dXM6OiRDQU5DRUxFRC4iJywxLDApKSBBUyBjYW5jZWxsZWQsIi4KCQkJCSAgICJTVU0oMSkgQVMgdG90YWxfbWVtYmVycywiLgoJCQkJICAgIlNVTShJRihtdS5zdGF0dXM9JyIuTU1fU3RhdHVzOjokQ0FOQ0VMRUQuIicsMSwwKSkvU1VNKDEpIEFTIGNodXJuICIuCgkJCQkgICAiRlJPTSBtbV9vcmRlcnMgbyBJTk5FUiBKT0lOIG1tX3VzZXJfZGF0YSBtdSBPTiAoby51c2VyX2lkID0gbXUud3BfdXNlcl9pZCkgIi4KCQkJCSAgICJXSEVSRSAoby5kYXRlX2FkZGVkIEJFVFdFRU4gJ3skc3RhcnREYXRlfScgQU5EICd7JGVuZERhdGV9JykgQU5EIChtdS5zdGF0dXMgTk9UIElOICh7JGV4Y2x1ZGVkU3RhdHVzZXN9KSkiLgoJCQkJICAgIkdST1VQIEJZIG8uYWZmaWxpYXRlX2lkLG8uc3ViX2FmZmlsaWF0ZV9pZCI7CgkJCQoJCQkvKiBzdGVwIDYgLSBjYWxjdWxhdGUgcmVmdW5kIHJhdGUgLSBUT0RPICovCgkJfQoJCSRkYXRhc2V0ID0gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlQ29tcG91bmRSZXBvcnREYXRhc2V0KCRwYXJhbXMsJGFmZmlsaWF0ZVJlc3VsdHMpOwoJCWZvcmVhY2ggKCRzdWJhZmZpbGlhdGVSZXN1bHRzIGFzICRhZmZpbGlhdGU9PiRzdWJyZXN1bHQpCgkJewoJCQkkc3VicGFyYW1zID0gJHBhcmFtcyArIGFycmF5KCJhZmZpbGlhdGVfaWQiPT4kYWZmaWxpYXRlKTsKCQkJJGRhdGFzZXQtPmFkZEFkZGl0aW9uYWxEYXRhc2V0KCRzdWJwYXJhbXMsICRzdWJyZXN1bHQpOyAvL1RPRE86IHByb29mIHRoaXMKCQl9CgkJcmV0dXJuICRkYXRhc2V0OwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVEYXRhKCRxdWVyeUlkZW50aWZpZXIsICRwYXJhbXMpCgl7CgkJc3dpdGNoICgkcXVlcnlJZGVudGlmaWVyKQoJCXsKCQkJY2FzZSBzZWxmOjokQUZGSUxJQVRFX1JFUE9SVF9RVUVSWToKCQkJCXJldHVybiBzZWxmOjpnZW5lcmF0ZUFmZmlsaWF0ZVJlcG9ydERhdGEoJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokVEVTVF9RVUVSWToKCQkJCXJldHVybiBzZWxmOjp0ZXN0UXVlcnkoJHBhcmFtcyk7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBnZW5lcmF0aW5nIGRhdGEgZm9yIHVua25vd24gcXVlcnkgaWRlbnRpZmllciB7JHF1ZXJ5SWRlbnRpZmllcn0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQp9Cgo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(140, 'litleservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fTGl0bGVTZXJ2aWNlIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNTV9QYXltZW50U2VydmljZSBpbnRlcmZhY2UgdXNpbmcgTGl0bGUKICovCgpjbGFzcyBNTV9MaXRsZVNlcnZpY2UgZXh0ZW5kcyBNTV9TY2hlZHVsZWRQYXltZW50U2VydmljZQp7CglwdWJsaWMgc3RhdGljICRFTlZJUk9OTUVOVF9TQU5EQk9YID0gImVudi1zYW5kYm94IjsKCXB1YmxpYyBzdGF0aWMgJEVOVklST05NRU5UX1BSRUxJVkUgPSAiZW52LXByZWxpdmUiOwoJcHVibGljIHN0YXRpYyAkRU5WSVJPTk1FTlRfUFJPRFVDVElPTiA9ICJlbnYtcHJvZHVjdGlvbiI7CglwdWJsaWMgc3RhdGljICRFTlZJUk9OTUVOVF9QT1NUTElWRSA9ICJlbnYtcG9zdGxpdmUiOwoJCglwdWJsaWMgc3RhdGljICRVUkxfVFlQRV9XSElURUxJU1RFRCA9ICJ1cmwtdHlwZS13aGl0ZWxpc3RlZCI7IC8vIHJlcXVpcmVzIElQcyB0byBiZSB3aGl0ZWxpc3RlZDsgY3JlZGVudGlhbHMgZG9uJ3QgcmVzZXQKCXB1YmxpYyBzdGF0aWMgJFVSTF9UWVBFX09QRU4gPSAidXJsLXR5cGUtb3BlbiI7IC8vIHJlcXVlc3RzIGNvbWUgaW4gZnJvbSBhbnkgSVAgYWRkcmVzczsgY3JlZGVudGlhbHMgcmVzZXQgZXZlcnkgMyBtb250aHMKCSAKCXByb3RlY3RlZCAkdG9rZW4gPSAiTElUTEUiOwoJCglwcm90ZWN0ZWQgJGVudmlyb25tZW50ID0gIiI7Cglwcm90ZWN0ZWQgJHVybFR5cGUgPSAiIjsKCXByb3RlY3RlZCAkcmVwb3J0R3JvdXAgPSAiIjsKCQoJcHJvdGVjdGVkICRwcmVsaXZlTWVyY2hhbnRJZCA9ICIiOwoJcHJvdGVjdGVkICRwcmVsaXZlVXNlcm5hbWUgPSAiIjsKCXByb3RlY3RlZCAkcHJlbGl2ZVBhc3N3b3JkID0gIiI7CgkKCXByb3RlY3RlZCAkcHJvZE1lcmNoYW50SWQgPSAiIjsKCXByb3RlY3RlZCAkcHJvZFVzZXJuYW1lID0gIiI7Cglwcm90ZWN0ZWQgJHByb2RQYXNzd29yZCA9ICIiOwoJCglwcm90ZWN0ZWQgJHBvc3RsaXZlTWVyY2hhbnRJZCA9ICIiOwoJcHJvdGVjdGVkICRwb3N0bGl2ZVVzZXJuYW1lID0gIiI7Cglwcm90ZWN0ZWQgJHBvc3RsaXZlUGFzc3dvcmQgPSAiIjsKCQoJcHJvdGVjdGVkICR0ZXN0QVBJTG9naW4gPSAiIjsKCXByb3RlY3RlZCAkdGVzdFRyYW5zYWN0aW9uS2V5ID0gIiI7CgkKCXByb3RlY3RlZCAkbGl2ZUFQSUxvZ2luID0gIiI7Cglwcm90ZWN0ZWQgJGxpdmVUcmFuc2FjdGlvbktleSA9ICIiOwoJCglwcm90ZWN0ZWQgJHRlc3RNb2RlID0gZmFsc2U7CgkKCXByb3RlY3RlZCAkc3VwcG9ydGVkQ3VycmVuY2llcyA9IGFycmF5KCJVU0QiKTsKCQoJCglwdWJsaWMgZnVuY3Rpb24gbG9hZERlcGVuZGVuY2llcygpCgl7CgkJcmVxdWlyZV9vbmNlKE1NX0xJQl9ESVIuIi9saXRsZS9MaXRsZU9ubGluZS5waHAiKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gaW5zdGFsbCgpIAoJeyAKCQlwYXJlbnQ6Omluc3RhbGwoKTsKCQkKCQkkc3FsID0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0xJVExFX0NVU1RPTUVSX0xJTktTLiIgKFxuIi4KCQkJCSJsaXRsZV9jdXN0b21lcl9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJsaXRsZV9wYXltZW50X2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIm1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIlVOSVFVRSBLRVkgbGl0bGVfcGF5bWVudF9pZCAobGl0bGVfcGF5bWVudF9pZCksXG4iLgoJCQkJIlVOSVFVRSBLRVkgbWVtYmVybW91c2VfY3VzdG9tZXJfaWQgKG1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkKVxuIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpO1xuIjsKCQkKCQkkc3FsLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0xJVExFX0NIQVJHRVMuIiAoXG4iLgoJCQkJImlkIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4iLgoJCQkJIm9yZGVyX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIm9yZGVyX2l0ZW1faWQgYmlnaW50KDIwKSBOVUxMLFxuIi4KCQkJCSJjaGFyZ2VfaWQgdmFyY2hhcig0MCksXG4iLgoJCQkJImF1dGhvcml6YXRpb25fY29kZSB2YXJjaGFyKDIwKSxcbiIuCgkJCQkibGFzdF9mb3VyIHZhcmNoYXIoNCkgTlVMTCxcbiIuCgkJCQkiYW1vdW50IGRlY2ltYWwoMTAsMikgTk9UIE5VTEwsXG4iLgoJCQkJInRyYW5zYWN0aW9uX2RhdGUgZGF0ZXRpbWUgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpLFxuIi4KCQkJCSJLRVkgbW1fbGl0bGVfY2hhcmdlX2NoYXJnZV9pZF9pZHggKGNoYXJnZV9pZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTtcbiI7CgkJCgkJZGJEZWx0YSgkc3FsKTsKCX0KCQoJCgkvKioKCSAqIFJlcG9ydCB0aGUgZmVhdHVyZXMgdGhlIExpdGxlIHNlcnZpY2Ugc3VwcG9ydHMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN1cHBvcnRzRmVhdHVyZSgpCgkgKgoJICogQHBhcmFtIGludGVnZXIgJGZlYXR1cmVDb25zdCBhIGNvbnN0IGFzIGRlZmluZWQgaW4gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlcwoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3Qgc3VwcG9ydGVkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdXBwb3J0c0ZlYXR1cmUoJGZlYXR1cmVDb25zdCkKCXsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpPTlNJVEVfU0VSVklDRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDQVJEX09OX0ZJTEU7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6Q09VUE9OUzsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpNT0RJRllfUkVCSUxMX0RBVEU7CgkJcmV0dXJuIGluX2FycmF5KCRmZWF0dXJlQ29uc3QsJHN1cHBvcnRlZCx0cnVlKTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGh0bWwgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHBheW1lbnQgbWV0aG9kIHNldHRpbmdzIHNjcmVlbiBmb3IgY29uZmlndXJpbmcgTGl0bGUKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmRpc3BsYXlDb25maWdPcHRpb25zKCkKCSAqIAoJICogQHJldHVybiBTdHJpbmcgY29udGFpbmluZyB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cgaHRtbAoJICovCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJewoJCSRjb25maWdfb3B0aW9ucyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS9saXRsZV9jb25maWcuaHRtbC5waHAiLCR0aGlzKTsKCQlyZXR1cm4gJGNvbmZpZ19vcHRpb25zOwoJfQoJCgkKCS8qKgoJICogVmFsaWRhdGVzIGFuZCBjb25maWd1cmVzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc2V0dGluZ3MgaW5mb3JtYXRpb24gZ2VuZXJhdGVkIGJ5IHN1Ym1pc3Npb24gb2YgdGhlIGNvbmZpZ3VyYXRpb24gZGlhbG9nCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpwcm9jZXNzQ29uZmlnT3B0aW9ucygpCgkgKgoJICogQHBhcmFtICRwb3N0IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGRhdGEgcG9zdGVkIGZyb20gdGhlIHBheW1lbnQgbWV0aG9kcyBzZXR0aW5ncyBzY3JlZW4KCSAqIEByZXR1cm4gQW4gTU1fUmVzcG9uc2Ugb2YgdHlwZSBNTV9SZXNwb25zZTo6U1VDQ0VTUyBpbmRpY2F0aW5nIHN1Y2Nlc3NmdWwgdmFsaWRhdGlvbiBhbmQgYXNzaWdtZW50LiBPbiBlcnJvciwgdGhlIHR5cGUgd2lsbCBiZSBNTV9SZXNwb25zZTo6RVJST1IgYW5kIHRoZSBtZXNzYWdlIHdpbGwgY29udGFpbiB0aGUgZXJyb3IgbWVzc2FnZXMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NDb25maWdPcHRpb25zKCRwb3N0KSAKCXsgCgkJJGFjdGl2ZSA9IChpc3NldCgkcG9zdFsnb25zaXRlX3BheW1lbnRfc2VydmljZSddKSAmJiAoc3RydG9sb3dlcigkdGhpcy0+Z2V0VG9rZW4oKSkgPT0gJHBvc3RbJ29uc2l0ZV9wYXltZW50X3NlcnZpY2UnXSkpOwoJCSR0aGlzLT5zZXRBY3RpdmUoJGFjdGl2ZSk7CgoJCWlmICgkYWN0aXZlKQoJCXsKCQkJJHRoaXMtPmluc3RhbGwoKTsKCQkJJGNvbmZpZyA9IGlzc2V0KCRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsnbGl0bGUnXSk/JHBvc3RbJ3BheW1lbnRfc2VydmljZSddWydsaXRsZSddOmFycmF5KCk7CgkJCSRlbXB0eV9lcnJvcnMgPSAiIjsKCQkJCgkJCSR0aGlzLT5zZXRFbnZpcm9ubWVudCgkY29uZmlnWydlbnZpcm9ubWVudCddKTsKCQkJJHRoaXMtPnNldFVybFR5cGUoJGNvbmZpZ1sndXJsX3R5cGUnXSk7CgkJCQoJCQlpZihpc3NldCgkY29uZmlnWydyZXBvcnRfZ3JvdXAnXSkpCgkJCXsKCQkJCSR0aGlzLT5zZXRSZXBvcnRHcm91cCgkY29uZmlnWydyZXBvcnRfZ3JvdXAnXSk7CgkJCX0KCQkJCgkJCS8vIHZhbGlkYXRlIGlucHV0CgkJCXN3aXRjaCgkdGhpcy0+ZW52aXJvbm1lbnQpCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JEVOVklST05NRU5UX1NBTkRCT1g6CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRFTlZJUk9OTUVOVF9QUkVMSVZFOgoJCQkJCWlmKGVtcHR5KCRjb25maWdbJ3ByZWxpdmVfbWVyY2hhbnRfaWQnXSkpCgkJCQkJewoJCQkJCQkkZW1wdHlfZXJyb3JzIC49ICJMaXRsZTogUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHRoZSBQcmUtTGl2ZSBNZXJjaGFudCBJRFxuIjsKCQkJCQl9CgkJCQkJaWYoZW1wdHkoJGNvbmZpZ1sncHJlbGl2ZV91c2VybmFtZSddKSkKCQkJCQl7CgkJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkxpdGxlOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIFByZS1MaXZlIFVzZXJuYW1lXG4iOwoJCQkJCX0KCQkJCQlpZihlbXB0eSgkY29uZmlnWydwcmVsaXZlX3Bhc3N3b3JkJ10pKQoJCQkJCXsKCQkJCQkJJGVtcHR5X2Vycm9ycyAuPSAiTGl0bGU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgUHJlLUxpdmUgUGFzc3dvcmRcbiI7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokRU5WSVJPTk1FTlRfUFJPRFVDVElPTjoKCQkJCQlpZihlbXB0eSgkY29uZmlnWydwcm9kX21lcmNoYW50X2lkJ10pKQoJCQkJCXsKCQkJCQkJJGVtcHR5X2Vycm9ycyAuPSAiTGl0bGU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgUHJvZHVjdGlvbiBNZXJjaGFudCBJRFxuIjsKCQkJCQl9CgkJCQkJaWYoZW1wdHkoJGNvbmZpZ1sncHJvZF91c2VybmFtZSddKSkKCQkJCQl7CgkJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkxpdGxlOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIFByb2R1Y3Rpb24gVXNlcm5hbWVcbiI7CgkJCQkJfQoJCQkJCWlmKGVtcHR5KCRjb25maWdbJ3Byb2RfcGFzc3dvcmQnXSkpCgkJCQkJewoJCQkJCQkkZW1wdHlfZXJyb3JzIC49ICJMaXRsZTogUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHRoZSBQcm9kdWN0aW9uIFBhc3N3b3JkXG4iOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JEVOVklST05NRU5UX1BPU1RMSVZFOgoJCQkJCWlmKGVtcHR5KCRjb25maWdbJ3Bvc3RsaXZlX21lcmNoYW50X2lkJ10pKQoJCQkJCXsKCQkJCQkJJGVtcHR5X2Vycm9ycyAuPSAiTGl0bGU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgUG9zdC1MaXZlIE1lcmNoYW50IElEXG4iOwoJCQkJCX0KCQkJCQlpZihlbXB0eSgkY29uZmlnWydwb3N0bGl2ZV91c2VybmFtZSddKSkKCQkJCQl7CgkJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkxpdGxlOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIFBvc3QtTGl2ZSBVc2VybmFtZVxuIjsKCQkJCQl9CgkJCQkJaWYoZW1wdHkoJGNvbmZpZ1sncG9zdGxpdmVfcGFzc3dvcmQnXSkpCgkJCQkJewoJCQkJCQkkZW1wdHlfZXJyb3JzIC49ICJMaXRsZTogUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHRoZSBQb3N0LUxpdmUgUGFzc3dvcmRcbiI7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlpZiAoJGVtcHR5X2Vycm9ycyAhPSAiIikKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZW1wdHlfZXJyb3JzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQoJCQkvL2lmIGhlcmUsIHRoYXQgbWVhbnMgdGhleSBhcmUgYWxsIHZhbHVlcyBhcmUgc2V0CgkJCSR0aGlzLT5zZXRQcmVMaXZlTWVyY2hhbnRJZCgkY29uZmlnWydwcmVsaXZlX21lcmNoYW50X2lkJ10pOwoJCQkkdGhpcy0+c2V0UHJvZE1lcmNoYW50SWQoJGNvbmZpZ1sncHJvZF9tZXJjaGFudF9pZCddKTsKCQkJJHRoaXMtPnNldFBvc3RMaXZlTWVyY2hhbnRJZCgkY29uZmlnWydwb3N0bGl2ZV9tZXJjaGFudF9pZCddKTsKCQkJCgkJCSR0aGlzLT5zZXRQcmVMaXZlVXNlcm5hbWUoJGNvbmZpZ1sncHJlbGl2ZV91c2VybmFtZSddKTsKCQkJJHRoaXMtPnNldFByb2RVc2VybmFtZSgkY29uZmlnWydwcm9kX3VzZXJuYW1lJ10pOwoJCQkkdGhpcy0+c2V0UG9zdExpdmVVc2VybmFtZSgkY29uZmlnWydwb3N0bGl2ZV91c2VybmFtZSddKTsKCQkJCgkJCSR0aGlzLT5zZXRQcmVMaXZlUGFzc3dvcmQoJGNvbmZpZ1sncHJlbGl2ZV9wYXNzd29yZCddKTsKCQkJJHRoaXMtPnNldFByb2RQYXNzd29yZCgkY29uZmlnWydwcm9kX3Bhc3N3b3JkJ10pOwoJCQkkdGhpcy0+c2V0UG9zdExpdmVQYXNzd29yZCgkY29uZmlnWydwb3N0bGl2ZV9wYXNzd29yZCddKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBjdXJyZW50IExpdGxlIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24KCSAqCgkgKiBAcmV0dXJuIEFycmF5CgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0TGl0bGVDb25maWcoKQoJewoJCSRjb25maWcgPSBhcnJheSgpOwoJCQoJCSRlbnZpcm9ubWVudCA9ICR0aGlzLT5nZXRFbnZpcm9ubWVudCgpOwoJCSRyZXBvcnRHcm91cCA9ICR0aGlzLT5nZXRSZXBvcnRHcm91cCgpOwoJCQoJCSRjb25maWdbInVybCJdID0gJHRoaXMtPmdldFVybCgpOwoJCQoJCXN3aXRjaCgkZW52aXJvbm1lbnQpCgkJewoJCQljYXNlIHNlbGY6OiRFTlZJUk9OTUVOVF9QUkVMSVZFOgoJCQkJJGNvbmZpZ1sidXNlciJdID0gJHRoaXMtPmdldFByZUxpdmVVc2VybmFtZSgpOwoJCQkJJGNvbmZpZ1sicGFzc3dvcmQiXSA9ICR0aGlzLT5nZXRQcmVMaXZlUGFzc3dvcmQoKTsKCQkJCSRjb25maWdbIm1lcmNoYW50SWQiXSA9ICR0aGlzLT5nZXRQcmVMaXZlTWVyY2hhbnRJZCgpOwoJCQkJJGNvbmZpZ1sicmVwb3J0R3JvdXAiXSA9ICR0aGlzLT5nZXRSZXBvcnRHcm91cCgpOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBzZWxmOjokRU5WSVJPTk1FTlRfUFJPRFVDVElPTjoKCQkJCSRjb25maWdbInVzZXIiXSA9ICR0aGlzLT5nZXRQcm9kVXNlcm5hbWUoKTsKCQkJCSRjb25maWdbInBhc3N3b3JkIl0gPSAkdGhpcy0+Z2V0UHJvZFBhc3N3b3JkKCk7CgkJCQkkY29uZmlnWyJtZXJjaGFudElkIl0gPSAkdGhpcy0+Z2V0UHJvZE1lcmNoYW50SWQoKTsKCQkJCSRjb25maWdbInJlcG9ydEdyb3VwIl0gPSAkdGhpcy0+Z2V0UmVwb3J0R3JvdXAoKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2Ugc2VsZjo6JEVOVklST05NRU5UX1BPU1RMSVZFOgoJCQkJJGNvbmZpZ1sidXNlciJdID0gJHRoaXMtPmdldFBvc3RMaXZlVXNlcm5hbWUoKTsKCQkJCSRjb25maWdbInBhc3N3b3JkIl0gPSAkdGhpcy0+Z2V0UG9zdExpdmVQYXNzd29yZCgpOwoJCQkJJGNvbmZpZ1sibWVyY2hhbnRJZCJdID0gJHRoaXMtPmdldFBvc3RMaXZlTWVyY2hhbnRJZCgpOwoJCQkJJGNvbmZpZ1sicmVwb3J0R3JvdXAiXSA9ICR0aGlzLT5nZXRSZXBvcnRHcm91cCgpOwoJCQkJYnJlYWs7CgkJfQoJCQoJCXJldHVybiAkY29uZmlnOwoJfQoKCQoJLyoqCgkgKiBDcmVhdGVzIGEgY3VzdG9tZXIgaW4gdGhlIExpdGxlIFN5c3RlbQoJICogCgkgKiBAcGFyYW0gTU1fVXNlciAkdXNlciBUaGUgTWVtYmVyTW91c2UgdXNlcgoJICogQHBhcmFtIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MgVGhlIGJpbGxpbmcgYWRkcmVzcyBvZiB0aGUgY3VzdG9tZXIgY3JlZGl0IGNhcmQKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gVGhlIGN1c3RvbWVyJ3MgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24KCSAqIEBwYXJhbSAkb3JpZ2luYWxPcmRlcklkIChvcHRpb25hbCkgVGhlIG9yZGVyIGlkIHRvIGxpbmsgdGhlIGxvY2FsIGNhcmQgb24gZmlsZSBpbmZvcm1hdGlvbiB0bwoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgd2hldGhlciB0aGUgY3VzdG9tZXIgd2FzIGNyZWF0ZWQgaW4gdGhlIExpdGxlIHN5c3RlbSBzdWNjZXNzZnVsbHkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbWVyKE1NX1VzZXIgJHVzZXIsIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MsIE1NX0NhcmRJbmZvICRjYXJkSW5mbywgJG9yaWdpbmFsT3JkZXJJZD1udWxsKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkY3VzdG9tZXJQcm9maWxlSWQgPSBudWxsOwoJCSRwYXltZW50UHJvZmlsZUlkID0gbnVsbDsKCQkKCQkkbGl0bGUgPSBuZXcgTGl0bGVPbmxpbmVSZXF1ZXN0KCk7CgkJCgkJLy8gY3JlYXRlIGN1c3RvbWVyIHByb2ZpbGUKCQkkY3VzdG9tZXJQcm9maWxlID0gbmV3IEF1dGhvcml6ZU5ldEN1c3RvbWVyKCk7CgkJJGN1c3RvbWVyUHJvZmlsZS0+bWVyY2hhbnRDdXN0b21lcklkID0gJHVzZXItPmdldElkKCk7CgkJJGN1c3RvbWVyUHJvZmlsZS0+ZGVzY3JpcHRpb24gPSBnZXRfYmxvZ2luZm8oKS4iIEN1c3RvbWVyIElEIyB7JHVzZXItPmdldElkKCl9ICh7JHVzZXItPmdldEVtYWlsKCl9KSI7CgkJJGN1c3RvbWVyUHJvZmlsZS0+ZW1haWwgPSAkdXNlci0+Z2V0RW1haWwoKTsKCQkKCQkkcmVzcG9uc2UgPSAkbGl0bGUtPmNyZWF0ZUN1c3RvbWVyUHJvZmlsZSgkY3VzdG9tZXJQcm9maWxlKTsKCQkKCQlpZigkcmVzcG9uc2UtPmlzT2soKSkKCQl7CgkJCSRjdXN0b21lclByb2ZpbGVJZCA9ICRyZXNwb25zZS0+Z2V0Q3VzdG9tZXJQcm9maWxlSWQoKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIGN1c3RvbWVyIHByb2ZpbGU6IHskcmVzcG9uc2UtPmdldE1lc3NhZ2VUZXh0KCl9IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIGFkZCBwYXltZW50IHByb2ZpbGUgdG8gY3VzdG9tZXIKCQkkcGF5bWVudFByb2ZpbGUgPSBuZXcgQXV0aG9yaXplTmV0UGF5bWVudFByb2ZpbGUoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmN1c3RvbWVyVHlwZSA9ICJpbmRpdmlkdWFsIjsKCQkKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+Zmlyc3ROYW1lID0gJHVzZXItPmdldEZpcnN0TmFtZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5sYXN0TmFtZSA9ICR1c2VyLT5nZXRMYXN0TmFtZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5hZGRyZXNzID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+Y2l0eSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5zdGF0ZSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+emlwID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRQb3N0YWxDb2RlKCk7CgkJJHBheW1lbnRQcm9maWxlLT5iaWxsVG8tPmNvdW50cnkgPSAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+cGhvbmVOdW1iZXIgPSAkdXNlci0+Z2V0UGhvbmUoKTsKCQkgCgkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5jcmVkaXRDYXJkLT5jYXJkTnVtYmVyID0gJGNhcmRJbmZvLT5nZXRDYXJkTnVtYmVyKCk7CgkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5jcmVkaXRDYXJkLT5leHBpcmF0aW9uRGF0ZSA9ICRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvblllYXIoKS4iLSIuJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKTsKCQkkcGF5bWVudFByb2ZpbGUtPnBheW1lbnQtPmNyZWRpdENhcmQtPmNhcmRDb2RlID0gJGNhcmRJbmZvLT5nZXRDVlYoKTsKCQkKCQkkcmVzcG9uc2UgPSAkbGl0bGUtPmNyZWF0ZUN1c3RvbWVyUGF5bWVudFByb2ZpbGUoJGN1c3RvbWVyUHJvZmlsZUlkLCAkcGF5bWVudFByb2ZpbGUpOwoJCQoJCWlmKCRyZXNwb25zZS0+aXNPaygpKQoJCXsKCQkJJHBheW1lbnRQcm9maWxlSWQgPSAkcmVzcG9uc2UtPmdldFBheW1lbnRQcm9maWxlSWQoKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGFkZGluZyBwYXltZW50IHByb2ZpbGUgdG8gY3VzdG9tZXI6IHskcmVzcG9uc2UtPmdldE1lc3NhZ2VUZXh0KCl9IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKGlzX251bGwoJGN1c3RvbWVyUHJvZmlsZUlkKSB8fCBpc19udWxsKCRwYXltZW50UHJvZmlsZUlkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY3VzdG9tZXIiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9jcmVhdGUgbGluayB0byBMaXRsZSBjdXN0b21lcgoJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0xJVExFX0NVU1RPTUVSX0xJTktTLCBhcnJheSgibGl0bGVfY3VzdG9tZXJfaWQiPT4kY3VzdG9tZXJQcm9maWxlSWQsICJsaXRsZV9wYXltZW50X2lkIj0+JHBheW1lbnRQcm9maWxlSWQsICJtZW1iZXJtb3VzZV9jdXN0b21lcl9pZCI9PiR1c2VyLT5nZXRJZCgpKSk7CgkJaWYoISRyZXN1bHQpCgkJewoJCQkvL1RPRE86IGRvIHNvbWV0aGluZyBpZiB0aGlzIGZhaWxzIGluIHRoZSBmdXR1cmUsIGllIGxvZy4gTm90IGEgY3JpdGljYWwgZW5vdWdoIGVycm9yIHRvIHN0b3AgdGhlIHByb2Nlc3MsIGJ1dCB3ZSB3b3VsZCBiZSBpbnRlcmVzdGVkIHRvIGtub3cgaXQgaGFwcGVuZWQKCQl9CgkJCgkJLy9jcmVhdGUgZW50cnkgaW4gY2FyZCBvbiBmaWxlIHRhYmxlCgkJJGNvZkRhdGEgPSBhcnJheSgidXNlcl9pZCI9PiR1c2VyLT5nZXRJZCgpLCAicGF5bWVudF9zZXJ2aWNlX2lkIj0+JHRoaXMtPmdldElkKCksICJwYXltZW50X3NlcnZpY2VfaWRlbnRpZmllciI9PiRwYXltZW50UHJvZmlsZUlkKTsKCQlpZiAoIWlzX251bGwoJG9yaWdpbmFsT3JkZXJJZCkpCgkJewoJCQkkY29mRGF0YVsnb3JpZ2luYWxfb3JkZXJfaWQnXSA9ICRvcmlnaW5hbE9yZGVySWQ7CgkJfQoJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0NBUkRfT05fRklMRSwgJGNvZkRhdGEpOwoJCWlmKCEkcmVzdWx0KQoJCXsKCQkJLy9UT0RPOiBzYW1lIGRlYWwgYXMgYWJvdmU6IGRvIHNvbWV0aGluZyBpZiB0aGlzIGZhaWxzIGluIHRoZSBmdXR1cmUsIGllIGxvZy4gTm90IGNyaXRpY2FsIGVub3VnaCBlcnJvciB0byBzdG9wIAoJCX0KCQkKCQkkY3VzdG9tZXJJbmZvID0gYXJyYXkoKTsKCQkkY3VzdG9tZXJJbmZvWyJjdXN0b21lcl9pZCJdID0gJGN1c3RvbWVyUHJvZmlsZUlkOwoJCSRjdXN0b21lckluZm9bInBheW1lbnRfaWQiXSA9ICRwYXltZW50UHJvZmlsZUlkOwoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGN1c3RvbWVySW5mbyk7Cgl9CgkKCQoJLyoqCgkgKiBDaGFyZ2UgYW4gb3JkZXIKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgdG8gY2hhcmdlCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIFRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byB1c2UgaW4gY2hhcmdpbmcgdGhlIG9yZGVyCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdHVzIG9mIHRoZSBjaGFyZ2UgYXR0ZW1wdAoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hhcmdlT3JkZXIoTU1fT3JkZXIgJG9yZGVyLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgJHZhbGlkYXRlPXRydWUpIAoJeyAKCQlnbG9iYWwgJHdwZGI7CgkJCgkJcGFyZW50OjpjaGFyZ2VPcmRlcigkb3JkZXIsJGNhcmRJbmZvLCR2YWxpZGF0ZSk7CgkJCgkJJHRyeUNhcmRPbkZpbGUgPSBpc19udWxsKCRjYXJkSW5mbyk7CgkJCgkJaWYgKCEkdHJ5Q2FyZE9uRmlsZSkgCgkJewoJCQkkY2FyZFZhbGlkYXRpb24gPSAkY2FyZEluZm8tPnZhbGlkYXRlKCk7CgkJCWlmICgkY2FyZFZhbGlkYXRpb24gIT09IHRydWUpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNoYXJnZSBvcmRlcjogeyRjYXJkVmFsaWRhdGlvbn0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJJGxpdGxlQ3VzdG9tZXJJbmZvID0gJHRoaXMtPmxvb2t1cEN1c3RvbWVyKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKSk7CgkJCgkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQlpZiAoJGxpdGxlQ3VzdG9tZXJJbmZvID09PSBmYWxzZSkKCQl7CgkJCWlmICgkdHJ5Q2FyZE9uRmlsZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCSRjY1Jlc3BvbnNlID0gJHRoaXMtPmNyZWF0ZUN1c3RvbWVyKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKSwgJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpLCAkY2FyZEluZm8sICRvcmRlci0+aWQpOwoJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJGNjUmVzcG9uc2UpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yOiB7JGNjUmVzcG9uc2UtPm1lc3NhZ2V9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCSRsaXRsZUN1c3RvbWVySW5mbyA9ICRjY1Jlc3BvbnNlLT5tZXNzYWdlOwoJCX0KCQllbHNlIAoJCXsKCQkJaWYgKCEkdHJ5Q2FyZE9uRmlsZSkKCQkJewoJCQkJLy90aGVyZSBpcyBhIGNhcmQgb24gZmlsZSwgYnV0IGNyZWRpdCBjYXJkIGluZm8gd2FzIHNlbnQgYXMgd2VsbC4gVXBkYXRlIHRoZSBjYXJkIG9uIGZpbGUgdG8gYmUgdGhlIGNhcmQgdGhhdCB3YXMgc2VudAoJCQkJJGFQcm9kdWN0SXRlbSA9IHJlc2V0KCRwcm9kdWN0SXRlbXMpOwoJCQkJJHVwZGF0ZVJlc3BvbnNlID0gJHRoaXMtPnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oJGFQcm9kdWN0SXRlbSwkY2FyZEluZm8sJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpKTsKCQkJCWlmIChNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0Vycm9yKCR1cGRhdGVSZXNwb25zZSkpCgkJCQl7CgkJCQkJcmV0dXJuICR1cGRhdGVSZXNwb25zZTsKCQkJCX0KCQkJfQoJCX0KCgkJLy9ub3cgc2V0dXAgc2NoZWR1bGVzIGZvciB0aGUgcmVjdXJyaW5nIHByb2R1Y3RzCgkJJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdCA9ICR0aGlzLT5jcmVhdGVTY2hlZHVsZXNGcm9tUHJvZHVjdHMoJHByb2R1Y3RJdGVtcyk7CgkJCgkJaWYoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY3JlYXRlU2NoZWR1bGVkUmVzdWx0KSkKCQl7CgkJCXJldHVybiAkY3JlYXRlU2NoZWR1bGVkUmVzdWx0OwoJCX0KCQkKCQlpZiAoJG9yZGVyLT5nZXRUb3RhbCgpID4gMC4wMCkKCQl7CgkJCSRwcm9kdWN0SXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCSRvcmRlckl0ZW1JZCA9IG51bGw7CgkJCWlmIChjb3VudCgkcHJvZHVjdEl0ZW1zKSA9PSAxKQoJCQl7CgkJCQkkb3JkZXJJdGVtID0gcmVzZXQoJHByb2R1Y3RJdGVtcyk7CgkJCQkkb3JkZXJJdGVtSWQgPSAkb3JkZXJJdGVtLT5nZXRJZCgpOwoJCQl9CgkJCQoJCQkkZGVzY3JpcHRpb24gPSAiUGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9LCBpdGVtOiB7JG9yZGVySXRlbS0+Z2V0RGVzY3JpcHRpb24oKX0iOwoJCQkkaW52b2ljZU51bWJlciA9ICRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKS4iLSIuJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCk7CgkJCSRjaGFyZ2VSZXNwb25zZSA9ICR0aGlzLT5zZW5kQXV0aE5ldENJTUNoYXJnZSgkbGl0bGVDdXN0b21lckluZm8sICRvcmRlci0+Z2V0VG90YWwoKSwgJGludm9pY2VOdW1iZXIsICRkZXNjcmlwdGlvbik7CgkJCQoJCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY2hhcmdlUmVzcG9uc2UpIHx8IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRmFpbGVkKCRjaGFyZ2VSZXNwb25zZSkpCgkJCXsKCQkJCSRjcmVhdGVkU3Vic2NyaXB0aW9ucyA9ICRjcmVhdGVTY2hlZHVsZWRSZXN1bHQtPm1lc3NhZ2U7CgkJCQlpZiAoaXNfYXJyYXkoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKSAmJiAoY291bnQoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKSA+IDApKQoJCQkJewoJCQkJCSR0aGlzLT5jYW5jZWxTY2hlZHVsZWRTdWJzY3JpcHRpb25zKCRjcmVhdGVkU3Vic2NyaXB0aW9ucyk7CgkJCQl9CgkJCQlyZXR1cm4gJGNoYXJnZVJlc3BvbnNlOwoJCQl9CgkJCQoJCQkvL2xvZyB0byB0cmFuc2FjdGlvbnMgdGFibGVzCgkJCSRjaGFyZ2VPYmplY3QgPSAkY2hhcmdlUmVzcG9uc2UtPmdldE1lc3NhZ2UoKTsKCQkJCgkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSI7CgkJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJGluc2VydERhdGEgPSBhcnJheSggIm9yZGVyX2lkIiAgICAgICAgICAJPT4gJG9yZGVyLT5nZXRJZCgpLAoJCQkJCQkJCSAib3JkZXJfaXRlbV9pZCIgICAgIAk9PiAkb3JkZXJJdGVtSWQsCgkJCQkJCQkJICJjaGFyZ2VfaWQiICAgICAJIAk9PiAkY2hhcmdlT2JqZWN0LT50cmFuc2FjdGlvbl9pZCwKCQkJCQkJCQkgImF1dGhvcml6YXRpb25fY29kZSIJPT4gKGlzc2V0KCRjaGFyZ2VPYmplY3QtPmF1dGhvcml6YXRpb25fY29kZSkpID8gJGNoYXJnZU9iamVjdC0+YXV0aG9yaXphdGlvbl9jb2RlIDogIiIsCgkJCQkJCQkJICJsYXN0X2ZvdXIiCQkJPT4gKGlzc2V0KCRjaGFyZ2VPYmplY3QtPmNhcmRfdHlwZSkpID8gc3RyX3JlcGxhY2UoIlgiLCAiIiwgJGNoYXJnZU9iamVjdC0+Y2FyZF90eXBlKSA6ICIiLAoJCQkJCQkJCSAiYW1vdW50IiAgICAgICAgICAgIAk9PiAkb3JkZXItPmdldFRvdGFsKCksCgkJCQkJCQkJICJ0cmFuc2FjdGlvbl9kYXRlIiAgCT0+ICR0cmFuc2FjdGlvbkRhdGUKCQkJKTsKCQkJJHdwZGItPmluc2VydChNTV9UQUJMRV9MSVRMRV9DSEFSR0VTLCRpbnNlcnREYXRhKTsKCQkJJGF1dGhOZXRDaGFyZ2VJZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJCQoJCQkvL25vdyBsb2cgdGhlIHBheW1lbnQgaW4gdGhlIHRyYW5zYWN0aW9ucyB0YWJsZQoJCQkkcmVzID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtSWQsICRvcmRlci0+Z2V0VG90YWwoKSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+aWQsJGF1dGhOZXRDaGFyZ2VJZCwkdHJhbnNhY3Rpb25EYXRlKTsKCQl9CgkJCgkJLy9yZWFjaGluZyB0aGlzIHBvaW50IG1lYW5zIHRoZSBzdWJzY3JpcHRpb25zIHdlcmUgc2NoZWR1bGVkIGFuZCB0aGUgaW5pdGlhbCBjaGFyZ2Ugd2FzIHN1Y2Nlc3NmdWwKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0JCgkKCQoJLyoqCgkgKiBTZW5kIGEgY2hhcmdlIHRvIExpdGxlLCBhbmQgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgdW5maWx0ZXJlZCByZXN1bHQuCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkbGl0bGVDdXN0b21lckluZm8gQW4gYXJyYXkgb2YgTGl0bGUgY3VzdG9tZXIgaW5mbyB0byBjaGFyZ2UuIAoJICogQHBhcmFtIGludGVnZXIgJGFtb3VudCBUaGUgYW1vdW50IHRvIGNoYXJnZSBpbiBjZW50cy4gSWYgYSBhbW91bnQgaXMgZ2l2ZW4gdGhhdCBpcyBhIGZsb2F0LCBpdCBpcyBhc3N1bWVkIHRvIGJlIGRvbGxhcnMgYW5kIG11bHRpcGxpZWQgYnkgMTAwIHRvIGdldCB0aGUgaW50ZWdlciB2YWx1ZQoJICogQHBhcmFtIHN0cmluZyAkaW52b2ljZU51bWJlciBUaGUgaW52b2ljZSBudW1iZXIgdG8gYXR0YWNoIHRvIHRoZSBjaGFyZ2UKCSAqIEBwYXJhbSBzdHJpbmcgJGRlc2NyaXB0aW9uIFRoZSBkZXNjcmlwdGlvbiB0byBhdHRhY2ggdG8gdGhlIGNoYXJnZQoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgT24gc3VjY2VzcywgY29udGFpbnMgdGhlIGJyYWludHJlZSBjaGFyZ2Ugb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBnYXRld2F5LCBvbiBmYWlsdXJlIGNvbnRhaW5zIGFuIGVycm9yIG1lc3NhZ2UKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNlbmRBdXRoTmV0Q0lNQ2hhcmdlKCRsaXRsZUN1c3RvbWVySW5mbywgJGFtb3VudCwgJGludm9pY2VOdW1iZXIsICRkZXNjcmlwdGlvbj0iIikKCXsKCQlpZiAoaXNfbnVsbCgkbGl0bGVDdXN0b21lckluZm8pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogTm8gcGF5bWVudCBtZXRob2Qgd2FzIHByb3ZpZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoIWlzX251bWVyaWMoJGFtb3VudCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY2hhcmdlOiBSZWNlaXZlZCBhIG5vbi1udW1lcmljIGFtb3VudCB0byBjaGFyZ2UiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSR0cmFuc2FjdGlvbiA9IG5ldyBBdXRob3JpemVOZXRUcmFuc2FjdGlvbigpOwoJCSR0cmFuc2FjdGlvbi0+YW1vdW50ID0gJGFtb3VudDsKCQkkdHJhbnNhY3Rpb24tPm9yZGVyLT5pbnZvaWNlTnVtYmVyID0gJGludm9pY2VOdW1iZXI7CgkJJHRyYW5zYWN0aW9uLT5vcmRlci0+ZGVzY3JpcHRpb24gPSAkZGVzY3JpcHRpb247CgkJJHRyYW5zYWN0aW9uLT5jdXN0b21lclByb2ZpbGVJZCA9ICRsaXRsZUN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXTsKCQkkdHJhbnNhY3Rpb24tPmN1c3RvbWVyUGF5bWVudFByb2ZpbGVJZCA9ICRsaXRsZUN1c3RvbWVySW5mb1sicGF5bWVudF9pZCJdOwoJCQoJCSRsaXRsZSA9IG5ldyBMaXRsZU9ubGluZVJlcXVlc3QoKTsKCQkkcmVzcG9uc2UgPSAkbGl0bGUtPmNyZWF0ZUN1c3RvbWVyUHJvZmlsZVRyYW5zYWN0aW9uKCJBdXRoQ2FwdHVyZSIsICR0cmFuc2FjdGlvbik7CgkJCgkJaWYoJHJlc3BvbnNlLT5pc09rKCkpIAoJCXsKCQkJJHRyYW5zYWN0aW9uUmVzcG9uc2UgPSAkcmVzcG9uc2UtPmdldFRyYW5zYWN0aW9uUmVzcG9uc2UoKTsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCR0cmFuc2FjdGlvblJlc3BvbnNlKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBjaGFyZ2U6IHskcmVzcG9uc2UtPmdldE1lc3NhZ2VUZXh0KCl9IiwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGV4ZWN1dGVTdWJzY3JpcHRpb25QYXltZW50KE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCAkY3VycmVudFJlYmlsbE51bWJlcikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJTdWJzY3JpcHRpb24gZm9yIG9yZGVyIGl0ZW0gaWQgIi4kb3JkZXJJdGVtLT5nZXRJZCgpLiIgd2FzIG5vdCBjaGFyZ2VkIGJlY2F1c2UgdGhlIGl0ZW0gaXMgY2FuY2VsbGVkIik7CgkJfQoJCQoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NPTVBMRVRFKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJTdWJzY3JpcHRpb24gZm9yIG9yZGVyIGl0ZW0gaWQgIi4kb3JkZXJJdGVtLT5nZXRJZCgpLiIgd2FzIG5vdCBjaGFyZ2VkIGJlY2F1c2UgYmlsbGluZyBpcyBjb21wbGV0ZSBmb3IgdGhpcyBpdGVtIik7CgkJfQoJCQoJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQoJCSRsaXRsZUN1c3RvbWVySW5mbyA9ICR0aGlzLT5sb29rdXBDdXN0b21lcihNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlci0+aWQpKTsKCQlpZiAoJGxpdGxlQ3VzdG9tZXJJbmZvID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBjYXJkIG9uIGZpbGUgZm9yIHVzZXIgaWQgeyRwYXltZW50RXZlbnQtPmdldFVzZXJJZCgpfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoKCQkkZGVzY3JpcHRpb24gPSAiUGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9LCBpdGVtOiB7JG9yZGVySXRlbS0+Z2V0RGVzY3JpcHRpb24oKX0iOwoJCSRpbnZvaWNlTnVtYmVyID0gJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLiItIi4kb3JkZXJJdGVtLT5nZXRJdGVtSWQoKTsKCQkkY2hhcmdlUmVzcG9uc2UgPSAkdGhpcy0+c2VuZEF1dGhOZXRDSU1DaGFyZ2UoJGxpdGxlQ3VzdG9tZXJJbmZvLCAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSwgJGludm9pY2VOdW1iZXIsICRkZXNjcmlwdGlvbik7CgkJCgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGNoYXJnZVJlc3BvbnNlKSB8fCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0ZhaWxlZCgkY2hhcmdlUmVzcG9uc2UpKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJcGFyZW50OjpoYW5kbGVPdmVyZHVlU3Vic2NyaXB0aW9uSXRlbSgkb3JkZXJJdGVtKTsKCQkJcmV0dXJuICRjaGFyZ2VSZXNwb25zZTsKCQl9CgkJCgkJLy9sb2cgc3VjY2Vzc2Z1bCB0cmFuc2FjdGlvbgoJCSRjaGFyZ2VPYmplY3QgPSAkY2hhcmdlUmVzcG9uc2UtPmdldE1lc3NhZ2UoKTsKCQkkdHJhbnNhY3Rpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJJGluc2VydERhdGEgPSBhcnJheSggIm9yZGVyX2lkIiA9PiAkb3JkZXItPmdldElkKCksCgkJCQkib3JkZXJfaXRlbV9pZCIgICAgIAk9PiAkb3JkZXJJdGVtLT5nZXRJZCgpLAoJCQkJImNoYXJnZV9pZCIgICAgIAkJPT4gJGNoYXJnZU9iamVjdC0+dHJhbnNhY3Rpb25faWQsCgkJCQkiYXV0aG9yaXphdGlvbl9jb2RlIgk9PiAoaXNzZXQoJGNoYXJnZU9iamVjdC0+YXV0aG9yaXphdGlvbl9jb2RlKSkgPyAkY2hhcmdlT2JqZWN0LT5hdXRob3JpemF0aW9uX2NvZGUgOiAiIiwKCQkJCSJsYXN0X2ZvdXIiCQkJCT0+IChpc3NldCgkY2hhcmdlT2JqZWN0LT5jYXJkX3R5cGUpKSA/IHN0cl9yZXBsYWNlKCJYIiwgIiIsICRjaGFyZ2VPYmplY3QtPmNhcmRfdHlwZSkgOiAiIiwKCQkJCSJhbW91bnQiICAgICAgICAgICAJIAk9PiAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSwKCQkJCSJ0cmFuc2FjdGlvbl9kYXRlIiAgCT0+ICR0cmFuc2FjdGlvbkRhdGUpOwoJCQoJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfTElUTEVfQ0hBUkdFUywkaW5zZXJ0RGF0YSk7CgkJJGxpdGxlVGFibGVDaGFyZ2VJZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkKCQlNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCksICRvcmRlckl0ZW0tPmdldElkKCksICRvcmRlckl0ZW0tPmdldFJlY3VycmluZ0Ftb3VudCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksICRkZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULHRydWUsJHRoaXMtPmdldElkKCksJGxpdGxlVGFibGVDaGFyZ2VJZCk7CgoJCS8vIHNjaGVkdWxlIGFub3RoZXIgcGF5bWVudCBpZiBuZWNlc3NhcnkKCQlyZXR1cm4gJHRoaXMtPnNjaGVkdWxlTmV4dFBheW1lbnRGb3JFeGlzdGluZ1N1YnNjcmlwdGlvbigkb3JkZXJJdGVtLCAkb3JkZXItPmdldEN1c3RvbWVyKCksICRjdXJyZW50UmViaWxsTnVtYmVyKTsKCX0KCQoJCgkvKioKCSAqIExvb2tzIHVwIHRoZSBMaXRsZSBjdXN0b21lciBpZCBsaW5rZWQgdG8gYSBNZW1iZXJNb3VzZSB1c2VyCgkgKiAKCSAqIEBwYXJhbSBpbnQgJHVzZXJJZCBUaGUgTWVtYmVyTW91c2UgdXNlciBpZAoJICogQHJldHVybiBUaGUgKGFycmF5KSBMaXRsZSBjdXN0b21lciBpZCBhbmQgcGF5bWVudCBpZCBpZiBmb3VuZCwgYm9vbGVhbiBmYWxzZSBpZiBub3QgZm91bmQgb3IgZXJyb3JlZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9va3VwQ3VzdG9tZXIoJHVzZXJJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGxvb2t1cFNRTCA9ICJTRUxFQ1QgbGl0bGVfY3VzdG9tZXJfaWQsIGxpdGxlX3BheW1lbnRfaWQgZnJvbSAiLk1NX1RBQkxFX0xJVExFX0NVU1RPTUVSX0xJTktTLiIgV0hFUkUgbWVtYmVybW91c2VfY3VzdG9tZXJfaWQ9J3skdXNlcklkfSciOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3JvdygkbG9va3VwU1FMKTsKCQlpZiAoaXNfbnVsbCgkcm93KSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJGN1c3RvbWVySW5mbyA9IGFycmF5KCk7CgkJJGN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXSA9ICRyb3ctPmxpdGxlX2N1c3RvbWVyX2lkOwoJCSRjdXN0b21lckluZm9bInBheW1lbnRfaWQiXSA9ICRyb3ctPmxpdGxlX3BheW1lbnRfaWQ7CgkJCgkJcmV0dXJuICRjdXN0b21lckluZm87Cgl9CgkKCQoJLyoqCgkgKiBVcGRhdGVzIHRoZSBwYXltZW50IGdhdGV3YXkgd2l0aCBuZXcgaW5mb3JtYXRpb24sIGFuZCB1cGRhdGUgdGhlIE1lbWJlck1vdXNlIG9yZGVyIHdpdGggdGhlIG5ldyBiaWxsaW5nIGFkZHJlc3MKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oKQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG9yZGVyIGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBzdWJzY3JpcHRpb24gYmVpbmcgdXBkYXRlZAoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyAob3B0aW9uYWwpIFRoZSBuZXcgY2FyZCB0byBzdG9yZSBvbiBmaWxlCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyBUaGUgbmV3IGJpbGxpbmcgYWRkcmVzcyB0byBzdG9yZS4gU2hvdWxkIGJlIHRoZSBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VzdG9tZXIncyBjYXJkIG9uIGZpbGUKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIHJlcHJlc2VudGluZyBzdWNjZXNzIG9yIGVycm9yLiBDb250YWlucyBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2Ugb24gZXJyb3IKCSAqIAoJICovCglwdWJsaWMgZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9uSW5mbyhNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3M9bnVsbCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChpc19udWxsKCRjYXJkSW5mbykgfHwgaXNfbnVsbCgkYmlsbGluZ0FkZHJlc3MpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvcjogQm90aCBhIGNyZWRpdCBjYXJkIGFuZCBhIGJpbGxpbmcgYWRkcmVzcyBtdXN0IGJlIHN1cHBsaWVkIHRvIHVwZGF0ZSBhIHN1YnNjcmlwdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNhcmRWYWxpZCA9ICRjYXJkSW5mby0+dmFsaWRhdGUoKTsKCQlpZiAoJGNhcmRWYWxpZCAhPT0gdHJ1ZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IHskY2FyZFZhbGlkfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGN1c3RvbWVySWQgPSBNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJaWYgKCRjdXN0b21lcklkID09IC0xKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogY3VzdG9tZXIgd2FzIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGxpdGxlQ3VzdG9tZXJJbmZvID0gJHRoaXMtPmxvb2t1cEN1c3RvbWVyKCRjdXN0b21lcklkKTsKCQlpZiAoJGxpdGxlQ3VzdG9tZXJJbmZvID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBzdWJzY3JpcHRpb246IGN1c3RvbWVyIHdhcyBub3QgZm91bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSR1c2VyID0gbmV3IE1NX1VzZXIoJGN1c3RvbWVySWQpOwoJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBzdWJzY3JpcHRpb246IGludmFsaWQgY3VzdG9tZXIgcHJvdmlkZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIHVwZGF0ZSBwYXltZW50IHByb2ZpbGUgdG8gY3VzdG9tZXIKCQkkcGF5bWVudFByb2ZpbGUgPSBuZXcgQXV0aG9yaXplTmV0UGF5bWVudFByb2ZpbGUoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmN1c3RvbWVyVHlwZSA9ICJpbmRpdmlkdWFsIjsKCQkKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+Zmlyc3ROYW1lID0gJHVzZXItPmdldEZpcnN0TmFtZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5sYXN0TmFtZSA9ICR1c2VyLT5nZXRMYXN0TmFtZSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5hZGRyZXNzID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+Y2l0eSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpOwoJCSRwYXltZW50UHJvZmlsZS0+YmlsbFRvLT5zdGF0ZSA9ICRiaWxsaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+emlwID0gJGJpbGxpbmdBZGRyZXNzLT5nZXRQb3N0YWxDb2RlKCk7CgkJJHBheW1lbnRQcm9maWxlLT5iaWxsVG8tPmNvdW50cnkgPSAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKTsKCQkkcGF5bWVudFByb2ZpbGUtPmJpbGxUby0+cGhvbmVOdW1iZXIgPSAkdXNlci0+Z2V0UGhvbmUoKTsKCQkJCgkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5jcmVkaXRDYXJkLT5jYXJkTnVtYmVyID0gJGNhcmRJbmZvLT5nZXRDYXJkTnVtYmVyKCk7CgkJJHBheW1lbnRQcm9maWxlLT5wYXltZW50LT5jcmVkaXRDYXJkLT5leHBpcmF0aW9uRGF0ZSA9ICRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvblllYXIoKS4iLSIuJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKTsKCQkkcGF5bWVudFByb2ZpbGUtPnBheW1lbnQtPmNyZWRpdENhcmQtPmNhcmRDb2RlID0gJGNhcmRJbmZvLT5nZXRDVlYoKTsKCQkKCQkkbGl0bGUgPSBuZXcgTGl0bGVPbmxpbmVSZXF1ZXN0KCk7CgkJJHJlc3BvbnNlID0gJGxpdGxlLT51cGRhdGVDdXN0b21lclBheW1lbnRQcm9maWxlKCRsaXRsZUN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXSwgJGxpdGxlQ3VzdG9tZXJJbmZvWyJwYXltZW50X2lkIl0sICRwYXltZW50UHJvZmlsZSk7CgkJCgkJaWYoJHJlc3BvbnNlLT5pc09rKCkpCgkJewoJCQlwYXJlbnQ6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oJG9yZGVySXRlbSwkY2FyZEluZm8sJGJpbGxpbmdBZGRyZXNzKTsKCQkJaWYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCkKCQkJewoJCQkJcmV0dXJuICR0aGlzLT5yZXN1bWVTdWJzY3JpcHRpb24oJG9yZGVySXRlbSk7CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJfQoJCWVsc2UKCQl7CQoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byB1cGRhdGUgY3JlZGl0IGNhcmQgb24gc3Vic2NyaXB0aW9uOlxueyRyZXNwb25zZS0+Z2V0TWVzc2FnZVRleHQoKX0iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBSZWZ1bmRzIGEgdHJhbnNhY3Rpb24KCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIHRvIHJlZnVuZAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcywgZmFpbHVyZSwgb3IgZXJyb3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkKQoJewoJCXJldHVybiAkdGhpcy0+X3JlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkLHRydWUpOwoJfQoJCgkKCS8qKgoJICogSW50ZXJuYWwgcmVmdW5kIG1ldGhvZCB0aGF0IGFsbG93cyBhIHJlZnVuZCB0byBiZSBwcm9jZXNzZWQgdGhlIHNhbWUgd2F5LCBldmVuIGlmIGl0IGlzIGluaXRpYXRlZCBvbiBMaXRsZSBhbmQgc2VudCB0byB1cyB2aWEgd2ViaG9vawoJICogCgkgKiBAcGFyYW0gaW50ZWdlciAkdHJhbnNhY3Rpb25JZCBUaGUgaWQgb2YgdGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIGJlaW5nIHJlZnVuZGVkCgkgKiBAcGFyYW0gYm9vbGVhbiAkc2hvdWxkQXR0ZW1wdEdhdGV3YXlSZWZ1bmQgKG9wdGlvbmFsKSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgbWV0aG9kIHNob3VsZCBhdHRlbXB0IHRvIGlzc3VlIGEgcmVmdW5kIHRocm91Z2ggdGhlIExpdGxlIGFwaS4gSWYgTGl0bGUgbm90aWZpZXMgdXMgdmlhIHdlYmhvb2ssIHRoZSBjaGFyZ2UgaXMgYWxyZWFkeSByZWZ1bmRlZCwgc28gdGhpcyBzaG91bGQgYmUgZmFsc2UKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBfcmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQsJHNob3VsZEF0dGVtcHRHYXRld2F5UmVmdW5kPXRydWUpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL21ha2Ugc3VyZSB3ZSBoYXZlIGEgdmFsaWQgdHJhbnNhY3Rpb24gaWQKCQlpZiAoZW1wdHkoJHRyYW5zYWN0aW9uSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQsIGludmFsaWQgdHJhbnNhY3Rpb24gaWQgc3VwcGxpZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vbWFrZSBzdXJlIHRoZSB0cmFuc2FjdGlvbiBleGlzdHMKCQkkdHJhbnNhY3Rpb25Sb3cgPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIHdoZXJlIGlkID0gJXMiLCR0cmFuc2FjdGlvbklkKSk7CgkJaWYgKGlzX251bGwoJHRyYW5zYWN0aW9uUm93KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kLCB0cmFuc2FjdGlvbiBkb2VzIG5vdCBleGlzdCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9tYWtlIHN1cmUgaXRzIG5vdCBhbHJlYWR5IHJlZnVuZGVkCgkJaWYgKCFpc19udWxsKCR0cmFuc2FjdGlvblJvdy0+cmVmdW5kX2lkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgYmVlbiByZWZ1bmRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9kZXRlcm1pbmUgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIGluZm9ybWF0aW9uIGlzIHN0b3JlZCBiYXNlZCBvbiB0aGUgdHlwZQoJCSR0cmFuc2FjdGlvbkFtb3VudCA9IGFicygkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCk7CgkJJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCA9IGZhbHNlOwoJCXN3aXRjaCAoJHRyYW5zYWN0aW9uUm93LT50cmFuc2FjdGlvbl90eXBlKQoJCXsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVDoKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQ6CgkJCQkkbGl0bGVDaGFyZ2VRdWVyeSA9ICJTRUxFQ1QgKiBmcm9tICIuTU1fVEFCTEVfTElUTEVfQ0hBUkdFUy4iIFdIRVJFIGlkID0gJXMiOwoJCQkJJGxpdGxlQ2hhcmdlSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCRsaXRsZUNoYXJnZVF1ZXJ5LCR0cmFuc2FjdGlvblJvdy0+cGF5bWVudF9zZXJ2aWNlX2RldGFpbF9pZCkpOwoJCQkJJGF1dGhOZXRDaGFyZ2VJZCA9ICRsaXRsZUNoYXJnZUluZm8tPmNoYXJnZV9pZDsKCQkJCSRnYXRld2F5UmVmdW5kUmVxdWlyZWQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX0NIQVJHRToKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX0NIQVJHRToKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHJlZnVuZCB0cmFuc2FjdGlvbjogTm90IGEgcGF5bWVudCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmtub3duIHRyYW5zYWN0aW9uIHR5cGUsIHVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCRnYXRld2F5UmVmdW5kUmVxdWlyZWQgJiYgJHNob3VsZEF0dGVtcHRHYXRld2F5UmVmdW5kKQoJCXsKCQkJaWYgKGVtcHR5KCRhdXRoTmV0Q2hhcmdlSWQpKSAvL25lY2Vzc2FyeSBmb3IgYm90aCB2b2lkcyBhbmQgY3JlZGl0cwoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkEgY29uZmlndXJhdGlvbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgZHVyaW5nIHRoZSBhdHRlbXB0IHRvIHZvaWQgdGhlIHRyYW5zYWN0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCSRsaXRsZUN1c3RvbWVySW5mbyA9ICR0aGlzLT5sb29rdXBDdXN0b21lcihNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRsaXRsZUNoYXJnZUluZm8tPm9yZGVyX2lkKSk7CgkJCXJldHVybiAkdGhpcy0+cmVmdW5kQXV0aE5ldENJTUNoYXJnZUlkKCRsaXRsZUN1c3RvbWVySW5mbywgJGF1dGhOZXRDaGFyZ2VJZCwgJGxpdGxlQ2hhcmdlSW5mby0+YW1vdW50LCAkdHJhbnNhY3Rpb25JZCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOyAvL3N1Y2Nlc3MKCX0JCgkKCQoJLyoqCgkgKiBSZWZ1bmRzIGEgTGl0bGUgY2hhcmdlLCBhbmQgbG9ncyB0aGUgcmVmdW5kIGluIHRoZSB0cmFuc2FjdGlvbiB0YWJsZQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJGxpdGxlQ3VzdG9tZXJJbmZvIEFuIGFycmF5IG9mIExpdGxlIGN1c3RvbWVyIGluZm8gdG8gY2hhcmdlLiAKCSAqIEBwYXJhbSBzdHJpbmcgJGF1dGhOZXRDaGFyZ2VJZCBUaGUgTGl0bGUgaWRlbnRpZmllciBmb3IgdGhlIGNoYXJnZSB0byBiZSByZWZ1bmRlZAoJICogQHBhcmFtIGZsb2F0ICRyZWZ1bmRBbW91bnQgdGhlIGFtb3VudCB0byByZWZ1bmQKCSAqIEBwYXJhbSBpbnQgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCBUaGUgaWRlbnRpZmllciBmb3IgdGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVmdW5kQXV0aE5ldENJTUNoYXJnZUlkKCRsaXRsZUN1c3RvbWVySW5mbywgJGF1dGhOZXRDaGFyZ2VJZCwgJHJlZnVuZEFtb3VudCwgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgoJCSRsaXRsZSA9IG5ldyBMaXRsZU9ubGluZVJlcXVlc3QoKTsKCQkKCQkvLyBhdHRlbXB0IHRvIGlzc3VlIGEgcmVmdW5kCgkJJHRyYW5zYWN0aW9uID0gbmV3IEF1dGhvcml6ZU5ldFRyYW5zYWN0aW9uKCk7CgkJJHRyYW5zYWN0aW9uLT5hbW91bnQgPSAkcmVmdW5kQW1vdW50OwoJCSR0cmFuc2FjdGlvbi0+dHJhbnNJZCA9ICRhdXRoTmV0Q2hhcmdlSWQ7CgkJJHRyYW5zYWN0aW9uLT5jdXN0b21lclByb2ZpbGVJZCA9ICRsaXRsZUN1c3RvbWVySW5mb1siY3VzdG9tZXJfaWQiXTsKCQkkdHJhbnNhY3Rpb24tPmN1c3RvbWVyUGF5bWVudFByb2ZpbGVJZCA9ICRsaXRsZUN1c3RvbWVySW5mb1sicGF5bWVudF9pZCJdOwoKCQkkcmVzcG9uc2UgPSAkbGl0bGUtPmNyZWF0ZUN1c3RvbWVyUHJvZmlsZVRyYW5zYWN0aW9uKCJSZWZ1bmQiLCAkdHJhbnNhY3Rpb24pOwoJCQoJCWlmKCEkcmVzcG9uc2UtPmlzT2soKSkKCQl7CgkJCS8vIGlmIHJlZnVuZCBmYWlscywgYXR0ZW1wdCB0byB2b2lkIHRoZSBjaGFyZ2UJCgkJCSR0cmFuc2FjdGlvbiA9IG5ldyBBdXRob3JpemVOZXRUcmFuc2FjdGlvbigpOwoJCQkkdHJhbnNhY3Rpb24tPnRyYW5zSWQgPSAkYXV0aE5ldENoYXJnZUlkOwoJCQkkdHJhbnNhY3Rpb24tPmN1c3RvbWVyUHJvZmlsZUlkID0gJGxpdGxlQ3VzdG9tZXJJbmZvWyJjdXN0b21lcl9pZCJdOwoJCQkkdHJhbnNhY3Rpb24tPmN1c3RvbWVyUGF5bWVudFByb2ZpbGVJZCA9ICRsaXRsZUN1c3RvbWVySW5mb1sicGF5bWVudF9pZCJdOwoJCQkKCQkJJHJlc3BvbnNlID0gJGxpdGxlLT5jcmVhdGVDdXN0b21lclByb2ZpbGVUcmFuc2FjdGlvbigiVm9pZCIsICR0cmFuc2FjdGlvbik7CgkJCSRyZWZ1bmRBbW91bnQgPSAwOwoJCQlpZighJHJlc3BvbnNlLT5pc09rKCkpCgkJCXsJCgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBpc3N1ZSBhIHJlZnVuZDogeyRyZXNwb25zZS0+Z2V0TWVzc2FnZVRleHQoKX0iLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCQkKCQkvL2dldCBvcmlnaW5hbCB0cmFuc2FjdGlvbiBkZXRhaWxzCgkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBXSEVSRSBpZD0lcyIsJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCkpOwoJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlJlZnVuZCBmb3IgdHJhbnNhY3Rpb24jIHskb3JpZ2luYWxUcmFuc2FjdGlvbklkfSI7CgkJJHRyYW5zYWN0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQoJCSRyZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaWQsCgkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPm9yZGVyX2l0ZW1faWQsCgkJCQkkcmVmdW5kQW1vdW50LAoJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5jdXJyZW5jeSwKCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCwKCQkJCWZhbHNlLAoJCQkJJHRoaXMtPmdldElkKCksCgkJCQludWxsLAoJCQkJJHRyYW5zYWN0aW9uRGF0ZSwKCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXNwb25zZSkpCgkJewoJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoIlVQREFURSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIFNFVCByZWZ1bmRfaWQgPSAlcyBXSEVSRSBpZCA9ICVzIiwkcmVzcG9uc2UtPm1lc3NhZ2UsJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCkpOwoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VXJsKCkKCXsKCQkkdXJsID0gImh0dHBzOi8vd3d3LnRlc3RsaXRsZS5jb20vc2FuZGJveC9jb21tdW5pY2F0b3Ivb25saW5lIjsKCQkKCQlzd2l0Y2goJHRoaXMtPmVudmlyb25tZW50KQoJCXsKCQkJY2FzZSBNTV9MaXRsZVNlcnZpY2U6OiRFTlZJUk9OTUVOVF9TQU5EQk9YOgoJCQkJJHVybCA9ICJodHRwczovL3d3dy50ZXN0bGl0bGUuY29tL3NhbmRib3gvY29tbXVuaWNhdG9yL29ubGluZSI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX0xpdGxlU2VydmljZTo6JEVOVklST05NRU5UX1BSRUxJVkU6CgkJCQlzd2l0Y2goJHRoaXMtPnVybFR5cGUpCgkJCQl7CgkJCQkJY2FzZSBNTV9MaXRsZVNlcnZpY2U6OiRVUkxfVFlQRV9XSElURUxJU1RFRDoKCQkJCQkJJHVybCA9ICJodHRwczovL3ByZWxpdmUubGl0bGUuY29tL3ZhcC9jb21tdW5pY2F0b3Ivb25saW5lIjsKCQkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJCWNhc2UgTU1fTGl0bGVTZXJ2aWNlOjokVVJMX1RZUEVfT1BFTjoKCQkJCQkJJHVybCA9ICJodHRwczovL3RyYW5zYWN0LXByZWxpdmUubGl0bGUuY29tL3ZhcC9jb21tdW5pY2F0b3Ivb25saW5lIjsKCQkJCQkJYnJlYWs7CgkJCQl9CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX0xpdGxlU2VydmljZTo6JEVOVklST05NRU5UX1BST0RVQ1RJT046CgkJCQlzd2l0Y2goJHRoaXMtPnVybFR5cGUpCgkJCQl7CgkJCQkJY2FzZSBNTV9MaXRsZVNlcnZpY2U6OiRVUkxfVFlQRV9XSElURUxJU1RFRDoKCQkJCQkJJHVybCA9ICJodHRwczovL3BheW1lbnRzLmxpdGxlLmNvbS92YXAvY29tbXVuaWNhdG9yL29ubGluZSI7CgkJCQkJCWJyZWFrOwoJCQkJCgkJCQkJY2FzZSBNTV9MaXRsZVNlcnZpY2U6OiRVUkxfVFlQRV9PUEVOOgoJCQkJCQkkdXJsID0gImh0dHBzOi8vdHJhbnNhY3QubGl0bGUuY29tL3ZhcC9jb21tdW5pY2F0b3Ivb25saW5lIjsKCQkJCQkJYnJlYWs7CgkJCQl9CgkJCQlicmVhazsKCQkJCgkJCWNhc2UgTU1fTGl0bGVTZXJ2aWNlOjokRU5WSVJPTk1FTlRfUE9TVExJVkU6CgkJCQlzd2l0Y2goJHRoaXMtPnVybFR5cGUpCgkJCQl7CgkJCQkJY2FzZSBNTV9MaXRsZVNlcnZpY2U6OiRVUkxfVFlQRV9XSElURUxJU1RFRDoKCQkJCQkJJHVybCA9ICJodHRwczovL3Bvc3RsaXZlLmxpdGxlLmNvbS92YXAvY29tbXVuaWNhdG9yL29ubGluZSI7CgkJCQkJCWJyZWFrOwoJCQkJCgkJCQkJY2FzZSBNTV9MaXRsZVNlcnZpY2U6OiRVUkxfVFlQRV9PUEVOOgoJCQkJCQkkdXJsID0gImh0dHBzOi8vdHJhbnNhY3QtcG9zdGxpdmUubGl0bGUuY29tL3ZhcC9jb21tdW5pY2F0b3Ivb25saW5lIjsKCQkJCQkJYnJlYWs7CgkJCQl9CgkJCQlicmVhazsKCQl9CgkJCgkJcmV0dXJuICR1cmw7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEVudmlyb25tZW50KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmVudmlyb25tZW50OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFbnZpcm9ubWVudCgkZW52aXJvbm1lbnQpCgl7CgkJJHRoaXMtPmVudmlyb25tZW50ID0gJGVudmlyb25tZW50OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRVcmxUeXBlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVybFR5cGU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFVybFR5cGUoJHVybFR5cGUpCgl7CgkJJHRoaXMtPnVybFR5cGUgPSAkdXJsVHlwZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmVwb3J0R3JvdXAoKQoJewoJCXJldHVybiAkdGhpcy0+cmVwb3J0R3JvdXA7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFJlcG9ydEdyb3VwKCRyZXBvcnRHcm91cCkKCXsKCQkkdGhpcy0+cmVwb3J0R3JvdXAgPSAkcmVwb3J0R3JvdXA7Cgl9CgkKCQoJLy8gUHJlLUxpdmUgTWV0aG9kcwoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJlTGl2ZU1lcmNoYW50SWQoKQoJewoJCXJldHVybiAkdGhpcy0+cHJlbGl2ZU1lcmNoYW50SWQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFByZUxpdmVNZXJjaGFudElkKCRtZXJjaGFudElkKQoJewoJCSR0aGlzLT5wcmVsaXZlTWVyY2hhbnRJZCA9ICRtZXJjaGFudElkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJlTGl2ZVVzZXJuYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnByZWxpdmVVc2VybmFtZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UHJlTGl2ZVVzZXJuYW1lKCR1c2VybmFtZSkKCXsKCQkkdGhpcy0+cHJlbGl2ZVVzZXJuYW1lID0gJHVzZXJuYW1lOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJlTGl2ZVBhc3N3b3JkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnByZWxpdmVQYXNzd29yZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UHJlTGl2ZVBhc3N3b3JkKCRwYXNzd29yZCkKCXsKCQkkdGhpcy0+cHJlbGl2ZVBhc3N3b3JkID0gJHBhc3N3b3JkOwoJfQoJCgkvLyBQcm9kdWN0aW9uIE1ldGhvZHMKCQoJcHVibGljIGZ1bmN0aW9uIGdldFByb2RNZXJjaGFudElkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnByb2RNZXJjaGFudElkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRQcm9kTWVyY2hhbnRJZCgkbWVyY2hhbnRJZCkKCXsKCQkkdGhpcy0+cHJvZE1lcmNoYW50SWQgPSAkbWVyY2hhbnRJZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFByb2RVc2VybmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5wcm9kVXNlcm5hbWU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFByb2RVc2VybmFtZSgkdXNlcm5hbWUpCgl7CgkJJHRoaXMtPnByb2RVc2VybmFtZSA9ICR1c2VybmFtZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFByb2RQYXNzd29yZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5wcm9kUGFzc3dvcmQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFByb2RQYXNzd29yZCgkcGFzc3dvcmQpCgl7CgkJJHRoaXMtPnByb2RQYXNzd29yZCA9ICRwYXNzd29yZDsKCX0KCQoJLy8gUG9zdC1MaXZlIE1ldGhvZHMKCQoJcHVibGljIGZ1bmN0aW9uIGdldFBvc3RMaXZlTWVyY2hhbnRJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5wb3N0bGl2ZU1lcmNoYW50SWQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFBvc3RMaXZlTWVyY2hhbnRJZCgkbWVyY2hhbnRJZCkKCXsKCQkkdGhpcy0+cG9zdGxpdmVNZXJjaGFudElkID0gJG1lcmNoYW50SWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQb3N0TGl2ZVVzZXJuYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnBvc3RsaXZlVXNlcm5hbWU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFBvc3RMaXZlVXNlcm5hbWUoJHVzZXJuYW1lKQoJewoJCSR0aGlzLT5wb3N0bGl2ZVVzZXJuYW1lID0gJHVzZXJuYW1lOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UG9zdExpdmVQYXNzd29yZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5wb3N0bGl2ZVBhc3N3b3JkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRQb3N0TGl2ZVBhc3N3b3JkKCRwYXNzd29yZCkKCXsKCQkkdGhpcy0+cG9zdGxpdmVQYXNzd29yZCA9ICRwYXNzd29yZDsKCX0KfQ==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(141, 'uservoiceextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmNsYXNzIE1NX1VzZXJWb2ljZUV4dGVuc2lvbiBleHRlbmRzIE1NX0V4dGVuc2lvbgp7CQoJcHJvdGVjdGVkIHN0YXRpYyAkT1BUSU9OX0FDVElWRSA9ICJhY3RpdmUiOwoJcHJvdGVjdGVkIHN0YXRpYyAkT1BUSU9OX1NVQkRPTUFJTiA9ICJzdWJkb21haW4iOwoJcHJvdGVjdGVkIHN0YXRpYyAkT1BUSU9OX1NTT19LRVkgPSAic3NvLWtleSI7Cglwcm90ZWN0ZWQgc3RhdGljICRPUFRJT05fVEVTVF9JUF9BRERSRVNTID0gInRlc3QtaXAtYWRkcmVzcyI7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkYXV0b2xvYWREZXBlbmRlbmNpZXM9ZmFsc2UsJGNvbmZpZ0RhdGE9IiIpIAoJeyAKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7CgkJJHRoaXMtPnRva2VuID0gTU1fRXh0ZW5zaW9uOjokVVNFUlZPSUNFX1RPS0VOOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZG9Jbml0SG9vaygpIAoJewoJCWlmKCR0aGlzLT5pc0FjdGl2ZSgpICYmICR0aGlzLT5oYXNQZXJtaXNzaW9uKCkpCgkJewoJCQlhZGRfYWN0aW9uKCJhZG1pbl9oZWFkIiwgYXJyYXkoJHRoaXMsICJ0ZXN0VXNlclZvaWNlU1NPIikpOwoJCQkKCQkJYWRkX2ZpbHRlcignbW1fc2V0X2Nvb2tpZScsIGFycmF5KCR0aGlzLCAic2V0VXNlclZvaWNlQ29va2llIikpOwoJCQlhZGRfZmlsdGVyKCdtbV9sb2dpbl9yZWRpcmVjdCcsIGFycmF5KCR0aGlzLCAidXNlclZvaWNlU1NPIikpOwoJCQkKCQkJYWRkX3Nob3J0Y29kZSgnTU1fVXNlclZvaWNlX0xpbmsnLCBhcnJheSgkdGhpcywgInByb2Nlc3NVc2VyVm9pY2VTaG9ydGNvZGUiKSk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNBY3RpdmUoKQoJewoJCSRpc0FjdGl2ZSA9ICR0aGlzLT5nZXRPcHRpb24oc2VsZjo6JE9QVElPTl9BQ1RJVkUpOwoJCQoJCXJldHVybiAoJGlzQWN0aXZlID09ICJvbiIpICYmICR0aGlzLT5oYXNQZXJtaXNzaW9uKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBoYXNQZXJtaXNzaW9uKCkgCgl7CgkJcmV0dXJuIChNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokRVhURU5TSU9OX1VTRVJWT0lDRSkgPT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlMaXN0aW5nSXRlbSgpIAoJewoJCSRjcm50UGFnZSA9IE1NX01vZHVsZVV0aWxzOjpnZXRQYWdlKCk7CgkJJHVzZXJWb2ljZVVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoJGNybnRQYWdlLCBNTV9NT0RVTEVfRVhURU5TSU9OUykuIiYiLk1NX3Nlc3Npb246OiRQQVJBTV9TVUJNT0RVTEUuIj0iLk1NX0V4dGVuc2lvbjo6JFVTRVJWT0lDRV9UT0tFTjsKCQk/PgoJCTxkaXYgY2xhc3M9Im1tLWV4dGVuc2lvbiA8P3BocCBlY2hvICR0aGlzLT5pc0FjdGl2ZSgpID8gJ21tLWV4dGVuc2lvbi1hY3RpdmUnIDogJyc7ID8+Ij4KCQk8YSBocmVmPSI8P3BocCBlY2hvICR1c2VyVm9pY2VVcmw7ID8+Ij48aW1nIHNyYz0iaHR0cHM6Ly9tZW1iZXJtb3VzZS5jb20vYXNzZXRzL3BsdWdpbl9pbWFnZXMvbG9nb3MvZXh0ZW5zaW9ucy11di5qcGciIC8+PC9hPgoJCTwvZGl2PgoJCTw/cGhwCgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5Q29uZmlnU2NyZWVuKCkgCgl7IAoJCSRjcm50UGFnZSA9IE1NX01vZHVsZVV0aWxzOjpnZXRQYWdlKCk7CgkJJHVzZXJWb2ljZVVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoJGNybnRQYWdlLCBNTV9NT0RVTEVfRVhURU5TSU9OUykuIiYiLk1NX3Nlc3Npb246OiRQQVJBTV9TVUJNT0RVTEUuIj0iLk1NX0V4dGVuc2lvbjo6JFVTRVJWT0lDRV9UT0tFTjsKCQk/PgoJCQoJCTxkaXYgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0ZGRjsgcGFkZGluZzoxMHB4OyB3aWR0aDoyNjBweDsiPgoJCQk8aW1nIHNyYz0iaHR0cHM6Ly9tZW1iZXJtb3VzZS5jb20vYXNzZXRzL3BsdWdpbl9pbWFnZXMvbG9nb3MvZXh0ZW5zaW9ucy11di5qcGciIHN0eWxlPSJ3aWR0aDoyNjBweDsiIC8+CgkJPC9kaXY+CgkJCgkJPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNXB4OyI+CgkJCTxhIGhyZWY9Imh0dHA6Ly9zdXBwb3J0Lm1lbWJlcm1vdXNlLmNvbS9zdXBwb3J0L3NvbHV0aW9ucy9hcnRpY2xlcy85MDAwMDIwMjI5LXVzZXJ2b2ljZS1zc28tZXh0ZW5zaW9uIiB0YXJnZXQ9Il9ibGFuayI+TmVlZCBoZWxwIGNvbmZpZ3VyaW5nIHRoZSBVc2VyVm9pY2UgZXh0ZW5zaW9uPzwvYT4KCQk8L2Rpdj4KCQkKCQk8P3BocCAKCQlpZigkdGhpcy0+aGFzUGVybWlzc2lvbigpKQoJCXsKCQkJJGRhdGFTYXZlZCA9IGZhbHNlOwoJCQkkZXJyb3JzID0gIiI7CgkJCQoJCQlpZihpc3NldCgkX1BPU1RbIm1tLXVzZXJ2b2ljZS1mb3JtIl0pKQoJCQl7CgkJCQkkaXNBY3RpdmUgPSBpc3NldCgkX1BPU1RbIm1tLXVzZXJ2b2ljZS1hY3RpdmUiXSkgPyAkX1BPU1RbIm1tLXVzZXJ2b2ljZS1hY3RpdmUiXSA6ICIiOwoJCQkJJHV2U3ViZG9tYWluID0gaXNzZXQoJF9QT1NUWyJtbS11c2Vydm9pY2Utc3ViZG9tYWluIl0pID8gJF9QT1NUWyJtbS11c2Vydm9pY2Utc3ViZG9tYWluIl0gOiAiIjsKCQkJCSRzc29LZXkgPSBpc3NldCgkX1BPU1RbIm1tLXNzby1rZXkiXSkgPyAkX1BPU1RbIm1tLXNzby1rZXkiXSA6ICIiOwoJCQkJJHRlc3RJUEFkZHJlc3MgPSBpc3NldCgkX1BPU1RbIm1tLXRlc3QtaXAtYWRkcmVzcyJdKSA/ICRfUE9TVFsibW0tdGVzdC1pcC1hZGRyZXNzIl0gOiAiIjsKCQkJCQoJCQkJaWYoJGlzQWN0aXZlID09ICJvbiIgJiYgKGVtcHR5KCR1dlN1YmRvbWFpbikgfHwgZW1wdHkoJHNzb0tleSkpKQoJCQkJewoJCQkJCWlmKGVtcHR5KCR1dlN1YmRvbWFpbikpCgkJCQkJewoJCQkJCQkkZXJyb3JzIC49ICJVc2VyVm9pY2UgU3ViZG9tYWluIGlzIHJlcXVpcmVkLlxcbiI7CQoJCQkJCX0KCQkJCQkKCQkJCQlpZihlbXB0eSgkc3NvS2V5KSkKCQkJCQl7CgkJCQkJCSRlcnJvcnMgLj0gIlNTTyBrZXkgaXMgcmVxdWlyZWQuIjsKCQkJCQl9CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCSR0aGlzLT5zZXRPcHRpb24oc2VsZjo6JE9QVElPTl9BQ1RJVkUsICRpc0FjdGl2ZSk7CgkJCQkJJHRoaXMtPnNldE9wdGlvbihzZWxmOjokT1BUSU9OX1NVQkRPTUFJTiwgJHV2U3ViZG9tYWluKTsKCQkJCQkkdGhpcy0+c2V0T3B0aW9uKHNlbGY6OiRPUFRJT05fU1NPX0tFWSwgJHNzb0tleSk7CgkJCQkJJHRoaXMtPnNldE9wdGlvbihzZWxmOjokT1BUSU9OX1RFU1RfSVBfQUREUkVTUywgJHRlc3RJUEFkZHJlc3MpOwoJCQkJCQoJCQkJCSRkYXRhU2F2ZWQgPSB0cnVlOwoJCQkJfQoJCQl9CgoJCQkkYWN0aXZlID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX0FDVElWRSk7CgkJCSR1dlN1YmRvbWFpbiA9ICR0aGlzLT5nZXRPcHRpb24oc2VsZjo6JE9QVElPTl9TVUJET01BSU4pOwoJCQkkc3NvS2V5ID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX1NTT19LRVkpOwoJCQkkdGVzdElQQWRkcmVzcyA9ICR0aGlzLT5nZXRPcHRpb24oc2VsZjo6JE9QVElPTl9URVNUX0lQX0FERFJFU1MpOwoJCQk/PgoJCQkKCQkJPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiI+CgkJCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Im1tLXVzZXJ2b2ljZS1mb3JtIiB2YWx1ZT0ic2F2ZSIgLz4KCQkJPHRhYmxlIHN0eWxlPSJ3aWR0aDo1MjBweDsgYm9yZGVyLXNwYWNpbmc6IDEwcHg7IGJvcmRlci1jb2xsYXBzZTogc2VwYXJhdGU7Ij4KCQkJPHRyPgoJCQkJPHRkIGNvbHNwYW49IjIiPgoJCQkJCTxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweDsiPgoJCQkJCTxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0ibW0tdXNlcnZvaWNlLWFjdGl2ZSIgPD9waHAgZWNobyAoJHRoaXMtPmlzQWN0aXZlKCkpID8gImNoZWNrZWQiIDogIiI7ID8+IC8+IEVuYWJsZSBVc2VyVm9pY2UgRXh0ZW5zaW9uCgkJCQkJPC9kaXY+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQ+VXNlclZvaWNlIFN1YmRvbWFpbjwvdGQ+CgkJCQk8dGQ+CgkJCQkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im1tLXVzZXJ2b2ljZS1zdWJkb21haW4iIHN0eWxlPSJmb250LWZhbWlseTogY291cmllcjsgZm9udC1zaXplOjExcHg7IHdpZHRoOjI1MHB4OyIgdmFsdWU9Ijw/cGhwIGVjaG8gJHV2U3ViZG9tYWluOyA/PiIgLz4KCQkJCTwvdGQ+CgkJCTwvdHI+CgkJCTx0cj4KCQkJCTx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246dG9wOyI+U1NPIEtleTwvdGQ+CgkJCQk8dGQgdmFsaWduPSJ0b3AiPgoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJtbS1zc28ta2V5IiBzdHlsZT0iZm9udC1mYW1pbHk6IGNvdXJpZXI7IGZvbnQtc2l6ZToxMXB4OyB3aWR0aDoyNTBweDsiIHZhbHVlPSI8P3BocCBlY2hvICRzc29LZXk7ID8+IiAvPgoJCQkJCQoJCQkJCTxkaXYgc3R5bGU9Im1hcmdpbi1sZWZ0OjEwcHg7IG1hcmdpbi10b3A6IDVweDsgZm9udC1zaXplOjExcHg7Ij4JCQkJCgkJCQkJU1NPIFNpZ24tSW4gVVJMOiA8Y29kZT48P3BocCBlY2hvIE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokTE9HSU5fUEFHRSk7ID8+PC9jb2RlPjxici8+CgkJCQkJU1NPIFNpZ24tT3V0IFVSTDogPGNvZGU+PD9waHAgZWNobyBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JExPR09VVF9QQUdFKTsgPz48L2NvZGU+CgkJCQkJPC9kaXY+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQ+VGVzdCBJUCBBZGRyZXNzICg8ZW0+b3B0aW9uYWw8L2VtPik8L3RkPgoJCQkJPHRkPgoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJtbS10ZXN0LWlwLWFkZHJlc3MiIHN0eWxlPSJmb250LWZhbWlseTogY291cmllcjsgZm9udC1zaXplOjExcHg7IHdpZHRoOjI1MHB4OyIgdmFsdWU9Ijw/cGhwIGVjaG8gJHRlc3RJUEFkZHJlc3M7ID8+IiAvPgoJCQkJPC90ZD4KCQkJPC90cj4KCQkJPHRyPgoJCQkJPHRkIGNvbHNwYW49IjIiIHN0eWxlPSJwYWRkaW5nLXRvcDoxMHB4OyI+CgkJCQkJPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0iU3VibWl0IiBjbGFzcz0ibW0tdWktYnV0dG9uIGJsdWUiIHZhbHVlPSJTYXZlIENvbmZpZ3VyYXRpb24iIC8+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQk8L3RhYmxlPgoJCQk8L2Zvcm0+CgkJCQoJCQk8P3BocCAKCQkJaWYoJHRoaXMtPmlzQWN0aXZlKCkpIAoJCQl7IAoJCQkJPz4KCQkJCTxoMyBzdHlsZT0ibWFyZ2luLXRvcDozMHB4OyI+VGVzdGluZyBZb3VyIENvbmZpZ3VyYXRpb248L2gzPgoJCQkJCgkJCQk8cCBzdHlsZT0id2lkdGg6NjAwcHg7IGZvbnQtc2l6ZToxMnB4OyI+CgkJCQlZb3UgY2FuIHRlc3QgeW91ciBjb25maWd1cmF0aW9uIGJ5IGNsaWNraW5nIHRoZSBidXR0b24gYmVsb3cuIEVuc3VyZSB0aGF0IHlvdSdyZSBsb2dnZWQgb3V0IG9mIHlvdXIgVXNlclZvaWNlIAoJCQkJc2l0ZSBwcmlvciB0byBydW5uaW5nIGEgdGVzdC4gQWZ0ZXIgcnVubmluZyB0aGUgdGVzdCwgdGhlIHJlc3VsdCBzaG91bGQgYmUgdGhhdCB5b3UncmUgbG9nZ2VkIGludG8geW91ciBVc2VyVm9pY2UgCgkJCQlzaXRlIGFzIGEgdXNlciB3aXRoIHRoZSBuYW1lIDxlbT5UZXN0IFVzZXI8L2VtPi4KCQkJCTwvcD4KCQkJCQoJCQkJPGEgaHJlZj0iPD9waHAgZWNobyAkdXNlclZvaWNlVXJsOyA/PiZ0ZXN0PXRydWUiIHRhcmdldD0iX2JsYW5rIiBjbGFzcz0ibW0tdWktYnV0dG9uIG9yYW5nZSI+UnVuIFRlc3Q8L2E+CgkJCQkKCQkJCTxoMyBzdHlsZT0ibWFyZ2luLXRvcDozMHB4OyI+U2luZ2xlIFNpZ24tT24gTGlua3M8L2gzPgoJCQkJCgkJCQk8cCBzdHlsZT0iZm9udC1zaXplOjEycHg7Ij5Zb3UgY2FuIHVzZSB0aGUgPGNvZGU+W01NX1VzZXJWb2ljZV9MaW5rXTwvY29kZT4gdG8gb3V0cHV0IGEgc2luZ2xlIHNpZ24tb24gbGluayBhbnl3aGVyZSBvbiB5b3VyIHNpdGUgYXMgZm9sbG93czo8L3A+CgkJCQkKCQkJCTxwcmU+Jmx0O2EgaHJlZj0iW01NX1VzZXJWb2ljZV9MaW5rXSImZ3Q7U3VwcG9ydCBDZW50ZXImbHQ7L2EmZ3Q7PC9wcmU+CgkJCQk8P3BocCAKCQkJfQoJCQkKCQkJaWYoJGRhdGFTYXZlZCkKCQkJewoJCQkJPz4KCQkJCTxzY3JpcHQ+YWxlcnQoIkNvbmZpZ3VyYXRpb24gc2F2ZWQgc3VjY2Vzc2Z1bGx5Iik7PC9zY3JpcHQ+CgkJCQk8P3BocAoJCQl9CgkJCQoJCQlpZighZW1wdHkoJGVycm9ycykpCgkJCXsKCQkJCT8+CgkJCQk8c2NyaXB0PmFsZXJ0KCI8P3BocCBlY2hvICRlcnJvcnM7ID8+Iik7PC9zY3JpcHQ+CgkJCQk8P3BocAoJCQl9CgkJCT8+CgkJCQoJCQk8cCBjbGFzcz0ibW0tc2VjdGlvbi1oZWFkZXIiIHN0eWxlPSJmb250LXNpemU6MjBweCAhaW1wb3J0YW50OyBtYXJnaW4tdG9wOjIwcHg7IG1hcmdpbi1ib3R0b206MjBweDsiPk1lbWJlck1vdXNlIEdhZGdldDwvcD4KCQkJCgkJCTxpbWcgc3JjPSJodHRwczovL21lbWJlcm1vdXNlLmNvbS9hc3NldHMvcGx1Z2luX2ltYWdlcy91c2Vydm9pY2UtZ2FkZ2V0LnBuZyIgCgkJCQlzdHlsZT0iLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDNweCAzcHggI2NjYzsgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDNweCAzcHggI2NjYzsgYm94LXNoYWRvdzogMHB4IDBweCAzcHggM3B4ICNjY2M7IGZsb2F0OmxlZnQ7IiAvPgogIAkJCQogIAkJCTxwIHN0eWxlPSJtYXJnaW4tbGVmdDoyMDBweDsiPlVzaW5nIHRoZSBNZW1iZXJNb3VzZSBnYWRnZXQgYWxsb3dzIHlvdSB0byBzZWUgdXNlZnVsIGluZm9ybWF0aW9uIGFib3V0IHlvdXIgbWVtYmVycyByaWdodCBmcm9tIHdpdGhpbiAKICAJCQlVc2VyVm9pY2UuIEp1c3QgY2xpY2sgb24gYW55IHN1cHBvcnQgY2FzZSBpbiBVc2VyVm9pY2UgYW5kIGFzIGxvbmcgYXMgdGhlIGVtYWlsIGFkZHJlc3MgaXMgYXNzb2NpYXRlZCB3aXRoIGEgbWVtYmVyIG9uIAogIAkJCXlvdXIgTWVtYmVyTW91c2Ugc2l0ZSwgdGhlaXIgbWVtYmVyIGluZm9ybWF0aW9uIHdpbGwgc2hvdyB1cCBpbiB0aGUgTWVtYmVyTW91c2UgZ2FkZ2V0LjwvcD4KICAJCQkKICAJCQk8cCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjAwcHg7Ij5UbyBjb25maWd1cmUgdGhlIE1lbWJlck1vdXNlIGdhZGdldCB5b3UnbGwgbmVlZCB5b3VyIE1lbWJlck1vdXNlIHNpdGUgVVJMICg8Y29kZT48P3BocCBlY2hvIHNpdGVfdXJsKCk7ID8+PC9jb2RlPikgYW5kIDxhIGhyZWY9Ijw/cGhwIGVjaG8gTU1fTW9kdWxlVXRpbHM6OmdldFVybChNTV9NT0RVTEVfREVWRUxPUEVSX1RPT0xTLCBNTV9NT0RVTEVfQVBJKTsgPz4iIHRhcmdldD0iX2JsYW5rIj5BUEkgY3JlZGVudGlhbHM8L2E+LjwvcD4KICAJCQkKICAJCQk8cCBzdHlsZT0ibWFyZ2luLWxlZnQ6MjAwcHg7IG1hcmdpbi10b3A6MjBweDsiPgoJCQkJPGEgaHJlZj0iaHR0cDovL3N1cHBvcnQubWVtYmVybW91c2UuY29tL3N1cHBvcnQvc29sdXRpb25zL2FydGljbGVzLzkwMDAwMjAzNzYtdXNlcnZvaWNlLW1lbWJlci1kZXRhaWxzLWdhZGdldCIgdGFyZ2V0PSJfYmxhbmsiIGNsYXNzPSJtbS11aS1idXR0b24gZ3JlZW4iPkdhZGdldCBDb25maWd1cmF0aW9uIEluc3RydWN0aW9uczwvYT4KCQkJPC9wPgoJCQk8P3BocAoJCX0KCQllbHNlCgkJewoJCQk/PgoJCSAJPGRpdiBpZD0ibWVzc2FnZSIgY2xhc3M9ImVycm9yIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgkJCQlJbiBvcmRlciB0byB1c2UgdGhlIFVzZXJWb2ljZSBleHRlbnNpb24geW91IG11c3QgYmUgb24gdGhlIEFkdmFuY2VkIHBsYW4gb3IgaGlnaGVyLiBZb3UgY2FuIHVwZ3JhZGUgeW91ciBsaWNlbnNlIGJ5IGxvZ2dpbmcgaW50byB5b3VyIGFjY291bnQgb24gPGEgaHJlZj0iaHR0cDovL21lbWJlcm1vdXNlLmNvbSI+bWVtYmVybW91c2UuY29tPC9hPiBhbmQgZ29pbmcgdG8gdGhlIDxlbT5NeSBBY2NvdW50PC9lbT4gcGFnZS4KCQkJPC9kaXY+CgkJIAk8P3BocCAKCQl9Cgl9CgkKCWZ1bmN0aW9uIHByb2Nlc3NVc2VyVm9pY2VTaG9ydGNvZGUoJGF0dHMpCgl7CgkJJG1lbWJlciA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudFVzZXIoKTsKCQkkdXZTdWJkb21haW4gPSAkdGhpcy0+Z2V0T3B0aW9uKHNlbGY6OiRPUFRJT05fU1VCRE9NQUlOLCAiIik7CgkKCQlpZigkbWVtYmVyLT5pc1ZhbGlkKCkpCgkJewoJCQkkc3NvVG9rZW4gPSAkdGhpcy0+Z2VuZXJhdGVVc2VyVm9pY2VTU09Ub2tlbigkbWVtYmVyKTsKCQoJCQlyZXR1cm4gIi8veyR1dlN1YmRvbWFpbn0udXNlcnZvaWNlLmNvbS8/c3NvPXskc3NvVG9rZW59IjsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICIvL3skdXZTdWJkb21haW59LnVzZXJ2b2ljZS5jb20vIjsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZVVzZXJWb2ljZVNTT1Rva2VuKCRtZW1iZXI9bnVsbCkKCXsKCQlpZihpc19udWxsKCRtZW1iZXIpIHx8ICghaXNfbnVsbCgkbWVtYmVyKSAmJiAkbWVtYmVyLT5pc1ZhbGlkKCkpKQoJCXsKCQkJJHV2U3ViZG9tYWluID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX1NVQkRPTUFJTiwgIiIpOwoJCQkkc3NvS2V5ID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX1NTT19LRVksICIiKTsKCQkJCgkJCWlmKCR0aGlzLT5pc0FjdGl2ZSgpKQoJCQl7CgkJCQkkc2FsdGVkID0gJHNzb0tleSAuICR1dlN1YmRvbWFpbjsKCQkJCSRoYXNoID0gaGFzaCgnc2hhMScsJHNhbHRlZCx0cnVlKTsKCQkJCSRzYWx0ZWRIYXNoID0gc3Vic3RyKCRoYXNoLDAsMTYpOwoJCQkJJGl2ID0gIk9wZW5TU0wgZm9yIFJ1YnkiOwoJCQkJCQoJCQkJJG1lbWJlcklkID0gIiI7CgkJCQkkbWVtYmVyTmFtZSA9ICIiOwoJCQkJJG1lbWJlckVtYWlsID0gIiI7CgkJCQkJCgkJCQlpZighaXNfbnVsbCgkbWVtYmVyKSkKCQkJCXsKCQkJCQkkbWVtYmVySWQgPSAkbWVtYmVyLT5nZXRJZCgpOwoJCQkJCSRtZW1iZXJFbWFpbCA9ICRtZW1iZXItPmdldEVtYWlsKCk7CgkJCQkJJGZpcnN0TmFtZSA9ICRtZW1iZXItPmdldEZpcnN0TmFtZSgpOwoJCQkJCSRsYXN0TmFtZSA9ICRtZW1iZXItPmdldExhc3ROYW1lKCk7CgkJCQkJCQoJCQkJCWlmKCFlbXB0eSgkZmlyc3ROYW1lKSkKCQkJCQl7CgkJCQkJCSRtZW1iZXJOYW1lIC49ICRmaXJzdE5hbWU7CgkKCQkJCQkJaWYoIWVtcHR5KCRsYXN0TmFtZSkpCgkJCQkJCXsKCQkJCQkJCSRtZW1iZXJOYW1lIC49ICIgIi5zdWJzdHIoJGxhc3ROYW1lLCAwLCAxKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkbWVtYmVySWQgPSAiMTAwMCI7CgkJCQkJJG1lbWJlck5hbWUgPSAiVGVzdCBVc2VyIjsKCQkJCQkkbWVtYmVyRW1haWwgPSAidGVzdEB0ZXN0dXNlci5jb20iOwoJCQkJfQoJCgkJCQkkdXNlcl9kYXRhID0gYXJyYXkoCgkJCQkJCSJndWlkIiA9PiAkbWVtYmVySWQsCgkJCQkJCSJkaXNwbGF5X25hbWUiID0+ICRtZW1iZXJOYW1lLAoJCQkJCQkiZW1haWwiID0+ICRtZW1iZXJFbWFpbCwKCQkJCQkJInVybCIgPT4gc2l0ZV91cmwoKQoJCQkJKTsKCQoJCQkJJGRhdGEgPSBqc29uX2VuY29kZSgkdXNlcl9kYXRhKTsKCQoJCQkJLy8gZG91YmxlIFhPUiBmaXJzdCBibG9jawoJCQkJZm9yICgkaSA9IDA7ICRpIDwgMTY7ICRpKyspCgkJCQl7CgkJCQkJJGRhdGFbJGldID0gJGRhdGFbJGldIF4gJGl2WyRpXTsKCQkJCX0KCQoJCQkJJHBhZCA9IDE2IC0gKHN0cmxlbigkZGF0YSkgJSAxNik7CgkJCQkkZGF0YSA9ICRkYXRhIC4gc3RyX3JlcGVhdChjaHIoJHBhZCksICRwYWQpOwoJCgkJCQkkY2lwaGVyID0gbWNyeXB0X21vZHVsZV9vcGVuKE1DUllQVF9SSUpOREFFTF8xMjgsJycsJ2NiYycsJycpOwoJCQkJbWNyeXB0X2dlbmVyaWNfaW5pdCgkY2lwaGVyLCAkc2FsdGVkSGFzaCwgJGl2KTsKCQkJCSRlbmNyeXB0ZWREYXRhID0gbWNyeXB0X2dlbmVyaWMoJGNpcGhlciwkZGF0YSk7CgkJCQltY3J5cHRfZ2VuZXJpY19kZWluaXQoJGNpcGhlcik7CgkKCQkJCXJldHVybiB1cmxlbmNvZGUoYmFzZTY0X2VuY29kZSgkZW5jcnlwdGVkRGF0YSkpOwoJCQl9CgkJfQoJCgkJcmV0dXJuICIiOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gdXNlclZvaWNlU1NPKCRpbmZvT2JqKQoJewoJCSRuZXdVcmwgPSAiIjsKCQoJCSR0ZXN0SVBBZGRyZXNzID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX1RFU1RfSVBfQUREUkVTUywgIiIpOwoJCSRjcm50SVBBZGRyZXNzID0gJF9TRVJWRVJbIlJFTU9URV9BRERSIl07CgoJCWlmKGVtcHR5KCR0ZXN0SVBBZGRyZXNzKSB8fCAoIWVtcHR5KCR0ZXN0SVBBZGRyZXNzKSAmJiAoJGNybnRJUEFkZHJlc3MgPT0gJHRlc3RJUEFkZHJlc3MpKSkKCQl7CgkJCWlmKGlzc2V0KCRpbmZvT2JqLT51c2VyLT5kYXRhLT5JRCkgJiYgaW50dmFsKCRpbmZvT2JqLT51c2VyLT5kYXRhLT5JRCk+MCkKCQkJewoJCQkJJG1lbWJlciA9IG5ldyBNTV9Vc2VyKCRpbmZvT2JqLT51c2VyLT5kYXRhLT5JRCk7CgkKCQkJCWlmKCRtZW1iZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkvLyBjaGVjayBpZiBsb2dpbiByZXF1ZXN0IGlzIGNvbWluZyBmcm9tIFVzZXJWb2ljZQoJCQkJCWlmKE1NX0Nvb2tpZXM6OmdldENvb2tpZSgidXZfbG9naW4iKSA9PSAiMSIpCgkJCQkJewoJCQkJCQkkdXZTdWJkb21haW4gPSAkdGhpcy0+Z2V0T3B0aW9uKHNlbGY6OiRPUFRJT05fU1VCRE9NQUlOLCAiIik7CgkJCQkJCSRzc29Ub2tlbiA9ICR0aGlzLT5nZW5lcmF0ZVVzZXJWb2ljZVNTT1Rva2VuKCRtZW1iZXIpOwoJCQkJCQkJCgkJCQkJCWlmKCR0aGlzLT5pc0FjdGl2ZSgpKQoJCQkJCQl7CgkJCQkJCQkkdXZSZXR1cm4gPSBNTV9Db29raWVzOjpnZXRDb29raWUoInJldHVybiIpOwoJCQkJCQkJJHV2U1NMID0gTU1fQ29va2llczo6Z2V0Q29va2llKCJ1dl9zc2wiKTsKCQkJCQkJCQkKCQkJCQkJCWlmKCR1dlNTTCA9PSAiMSIpCgkJCQkJCQl7CgkJCQkJCQkJJG5ld1VybCA9ICJodHRwczovLyI7CgkJCQkJCQl9CgkJCQkJCQllbHNlCgkJCQkJCQl7CgkJCQkJCQkJJG5ld1VybCA9ICJodHRwOi8vIjsKCQkJCQkJCX0KCgkJCQkJCQkkbmV3VXJsIC49ICJ7JHV2U3ViZG9tYWlufS51c2Vydm9pY2UuY29teyR1dlJldHVybn0/c3NvPXskc3NvVG9rZW59IjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkKCQkvLyBjbGVhciBjb29raWVzCgkJc2V0Y29va2llKCJtbV9jb29raWVfdXZfbG9naW4iLCAiMCIsIHRpbWUoKS0zNjAwKTsKCQlzZXRjb29raWUoIm1tX2Nvb2tpZV9yZXR1cm4iLCAiMCIsIHRpbWUoKS0zNjAwKTsKCQlzZXRjb29raWUoIm1tX2Nvb2tpZV91dl9zc2wiLCAiMCIsIHRpbWUoKS0zNjAwKTsKCQlzZXRjb29raWUoIm1tX2Nvb2tpZV91dl9zaXplIiwgIjAiLCB0aW1lKCktMzYwMCk7CgkKCQlyZXR1cm4gJG5ld1VybDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFVzZXJWb2ljZUNvb2tpZSgkaW5mb09iaikKCXsKCQlpZighZW1wdHkoJGluZm9PYmotPmtleSkgJiYgaXNzZXQoJGluZm9PYmotPnZhbHVlKSkKCQl7CQkJCgkJCXN3aXRjaCgkaW5mb09iai0+a2V5KQoJCQl7CgkJCQljYXNlICJ1dl9sb2dpbiI6CgkJCQljYXNlICJyZXR1cm4iOgoJCQkJY2FzZSAidXZfc3NsIjoKCQkJCWNhc2UgInV2X3NpemUiOgoJCQkJCXNldGNvb2tpZShNTV9Db29raWVzOjokQ09PS0lFX1BSRUZJWC4kaW5mb09iai0+a2V5LCAkaW5mb09iai0+dmFsdWUsIDAsICIvIik7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCWJyZWFrOwoJCQl9CgkJfQoJCQoJCXJldHVybiB0cnVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gdGVzdFVzZXJWb2ljZVNTTygpCgl7CgkJaWYoaXNzZXQoJF9HRVRbInRlc3QiXSkgJiYgJF9HRVRbInRlc3QiXSA9PSAidHJ1ZSIpCgkJewoJCQkkdXZTdWJkb21haW4gPSAkdGhpcy0+Z2V0T3B0aW9uKHNlbGY6OiRPUFRJT05fU1VCRE9NQUlOLCAiIik7CgkJCSRzc29Ub2tlbiA9ICR0aGlzLT5nZW5lcmF0ZVVzZXJWb2ljZVNTT1Rva2VuKCk7CgkKCQkJaWYoJHRoaXMtPmlzQWN0aXZlKCkpCgkJCXsKCQkJCWVjaG8gIjxzY3JpcHQ+d2luZG93LmxvY2F0aW9uID0gXCIvL3skdXZTdWJkb21haW59LnVzZXJ2b2ljZS5jb20vP3Nzbz17JHNzb1Rva2VufVwiOzwvc2NyaXB0PiI7CgkJCX0KCQl9Cgl9Cn0=', 0, '2018-11-21 06:38:54'),
(142, 'employeetagprocessor', 'Y2xhc3MgTU1fRW1wbG95ZWVUYWdQcm9jZXNzb3IKewkKCXB1YmxpYyBzdGF0aWMgJFRBR19FTVBMT1lFRV9EQVRBID0gIm1tX2VtcGxveWVlX2RhdGEiOwoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgaXMgcmVsYXRlZCB0byBlbXBsb3llZXMuCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHNtYXJ0VGFnIHRoZSBuYW1lIG9mIHRoZSBTbWFydFRhZwoJICogQHJldHVybiBCb29sZWFuIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgcGFzc2VkIGlzIHJlbGF0ZWQgdG8gZW1wbG95ZWVzLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzRW1wbG95ZWVTbWFydFRhZygkc21hcnRUYWcpCgl7CgkJc3dpdGNoKCRzbWFydFRhZykgCgkJewoJCQljYXNlIHNlbGY6OiRUQUdfRU1QTE9ZRUVfREFUQToKCQkJCXJldHVybiB0cnVlOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJfQoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBuYW1lIGFuZCBhIG51bWJlciBvZiBwcm9wZXJ0aWVzIHJlbGF0ZWQgdG8gdGhlIFNtYXJ0VGFnIGFuZCBtYWtlcyBhIGNhbGwgdG8gCgkgKiB0aGUgYXBwcm9wcmlhdGUgZnVuY3Rpb24gYmFzZWQgb24gdGhlIFNtYXJ0VGFnIG5hbWUuCgkgKiBAcGFyYW0gU3RyaW5nICRzbWFydFRhZyB0aGUgbmFtZSBvZiB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgdG8gcHJvY2VzcwoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwcm9jZXNzU21hcnRUYWcoJHNtYXJ0VGFnLCAkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCXN3aXRjaCgkc21hcnRUYWcpIAoJCXsKCQkJY2FzZSBzZWxmOjokVEFHX0VNUExPWUVFX0RBVEE6CgkJCQlyZXR1cm4gc2VsZjo6bW1fZW1wbG95ZWVfZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICJJbnZhbGlkIEVtcGxveWVlIFNtYXJ0VGFnIHskc21hcnRUYWd9IGZvdW5kLiI7CgkJfQoJfQoJCgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBnZXRzIHRoZSBlbXBsb3llZSBhc3NvY2lhdGVkIHdpdGggdGhlIElEIHBhc3NlZCBpbiB0aGUgYXR0cmlidXRlcyBvciB0aGUgZGVmYXVsdCBlbXBsb3llZQoJICogCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcwoJICogQHJldHVybiBNTV9FbXBsb3llZSB0aGUgZW1wbG95ZWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBJRCBwYXNzZWQgaW4gdGhlIGF0dHJpYnV0ZXMgb3IgdGhlIGRlZmF1bHQgZW1wbG95ZWUKCSAqLwoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZ2V0RW1wbG95ZWUoJGF0dHMpCgl7CgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQkkZW1wbG95ZWUgPSBuZXcgTU1fRW1wbG95ZWUoKTsKCQkKCQkvLyBnZXQgZW1wbG95ZWUKCQlpZihpc3NldCgkaWQpKQoJCXsKCQkJJGVtcGxveWVlID0gbmV3IE1NX0VtcGxveWVlKCRpZCk7CgkJfQoJCWVsc2UKCQl7CgkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpnZXREZWZhdWx0KCk7CgkJfQoJCQoJCXJldHVybiAkZW1wbG95ZWU7Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRW1wbG95ZWVfRGF0YSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciAKCSAqIHJldHVybmluZyB0aGUgZW1wbG95ZWUgZGF0YSBiYXNlZCBvbiB0aGUgbmFtZSBhdHRyaWJ1dGUuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX2VtcGxveWVlX2RhdGEoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkZW1wbG95ZWUgPSBzZWxmOjpnZXRFbXBsb3llZSgkYXR0cyk7CgkJCgkJaWYoJGVtcGxveWVlLT5pc1ZhbGlkKCkpCgkJewoJCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQkJewoJCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCQl7CgkJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJCSQka2V5ID0gJHY7CgkJCQl9CgkJCX0KCQkJCgkJCWlmKGlzc2V0KCRuYW1lKSkKCQkJewoJCQkJc3dpdGNoKHN0cnRvbG93ZXIoJG5hbWUpKQoJCQkJewoJCQkJCWNhc2UgImRpc3BsYXluYW1lIjoKCQkJCQkJcmV0dXJuICRlbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKTsKCQkJCQkJCgkJCQkJY2FzZSAiZmlyc3RuYW1lIjoKCQkJCQkJcmV0dXJuICRlbXBsb3llZS0+Z2V0Rmlyc3ROYW1lKCk7CgkJCQkJCQoJCQkJCWNhc2UgImxhc3RuYW1lIjoKCQkJCQkJcmV0dXJuICRlbXBsb3llZS0+Z2V0TGFzdE5hbWUoKTsKCQkJCQkJCgkJCQkJY2FzZSAiZW1haWwiOgoJCQkJCQlyZXR1cm4gJGVtcGxveWVlLT5nZXRFbWFpbCgpOwoJCQkJCQkKCQkJCQljYXNlICJwaG9uZSI6CgkJCQkJCXJldHVybiAkZW1wbG95ZWUtPmdldFBob25lKCk7CgkJCQkJCQoJCQkJCWRlZmF1bHQ6CgkJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ25hbWUnIGF0dHJpYnV0ZSAneyRuYW1lfScgaXMgaW52YWxpZCBmb3IgU21hcnRUYWcgeyRjb2RlfS4iOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAnbmFtZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9LiI7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IENvdWxkIG5vdCBmaW5kIGVtcGxveWVlIGZvciBTbWFydFRhZyB7JGNvZGV9LiI7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(143, 'corepage', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQ29yZVBhZ2UgZXh0ZW5kcyBNTV9FbnRpdHkKewkKCXB1YmxpYyBzdGF0aWMgJEVWRU5UX0RFTEVURV9CWV9UWVBFID0gMTsKCXB1YmxpYyBzdGF0aWMgJEVWRU5UX0RFTEVURV9UWVBFX0JZX1BBR0UgPSAyOwoJcHVibGljIHN0YXRpYyAkRVZFTlRfREVMRVRFX0FMTF9CWV9QQUdFID0gMzsgCgkKCXByaXZhdGUgJHBhZ2VJZDsKCXByaXZhdGUgJGNvcmVQYWdlVHlwZTsKCXByaXZhdGUgJHJlZlR5cGU7Cglwcml2YXRlICRyZWZJZDsKCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuIiBjcCBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIic7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCkgewoJCQkkdGhpcy0+c2V0RGF0YSgkcmVzdWx0KTsKCQl9CgkJZWxzZSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5CgkJewoJCQkkdGhpcy0+cGFnZUlkID0gJGRhdGEtPnBhZ2VfaWQ7CgkJCSR0aGlzLT5jb3JlUGFnZVR5cGUgPSAkZGF0YS0+Y29yZV9wYWdlX3R5cGU7CgkJCSR0aGlzLT5yZWZUeXBlID0gJGRhdGEtPnJlZl90eXBlOwoJCQkkdGhpcy0+cmVmSWQgPSAkZGF0YS0+cmVmX2lkOwoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGRvVXBkYXRlID0gaXNzZXQoJHRoaXMtPmlkKSAmJiAoJHRoaXMtPmlkICE9ICIiKSAmJiAoaW50dmFsKCR0aGlzLT5pZCkgPiAwKTsKCQkgCgkJTU1fVHJhbnNhY3Rpb246OmJlZ2luKCk7CgkJdHJ5CgkJewkKCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJ1cGRhdGUgIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgc2V0IHBhZ2VfaWQ9bnVsbCwgcmVmX2lkPW51bGwsIHJlZl90eXBlPW51bGwgd2hlcmUgcGFnZV9pZD0lcyBBTkQgY29yZV9wYWdlX3R5cGVfaWQgPSAiLk1NX0NvcmVQYWdlVHlwZTo6JEZSRUVfQ09ORklSTUFUSU9OLCR0aGlzLT5wYWdlSWQpKTsKCQkJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfQ09SRV9QQUdFUy4iIHNldCAiIC4KCQkgCQkJIglwYWdlX2lkPSclZCcsIiAuCgkJIAkJCSIJY29yZV9wYWdlX3R5cGVfaWQ9JyVkJywiIC4KCQkgCQkJIglyZWZfdHlwZT0nJXMnLCIgLgoJCSAJCQkiCXJlZl9pZD0nJWQnIiAuCgkJIAkJCSIiOwoJCQl9CgkJCWVsc2UgCgkJCXsJCgkJCQkkc3FsID0gInVwZGF0ZSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuIiBzZXQgIiAuCgkJIAkJCSIJcGFnZV9pZD0nJWQnLCIgLgoJCSAJCQkiCWNvcmVfcGFnZV90eXBlX2lkPSclZCcsIiAuCgkJIAkJCSIJcmVmX3R5cGU9JyVzJywiIC4KCQkgCQkJIglyZWZfaWQ9JyVkJyIgLgoJCQkJCSIgd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyIgLgoJCQkgCQkJIiI7CgkJIAl9CgkJIAkKCQkgCSRwcmVwYXJlZFNxbCA9ICR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5wYWdlSWQsICR0aGlzLT5jb3JlUGFnZVR5cGUtPmdldElkKCksICR0aGlzLT5yZWZUeXBlLCAkdGhpcy0+cmVmSWQpOwoJCSAJCgkJIAkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkJIAkKCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJIAl7CgkJIAkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byBjcmVhdGUgY29yZSBwYWdlICgiLiRwcmVwYXJlZFNxbC4iKSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCSAJfQoJCSAJCgkJIAkvL3JlYnVpbGQgdGhlIGNvcmUgcGFnZSBjYWNoZSB0byByZWZsZWN0IHRoZSBjaGFuZ2UKCQkgCU1NX0NvcmVQYWdlRW5naW5lOjpjcmVhdGVDb3JlUGFnZUNhY2hlKCk7CgkJIAkKCQkgCWlmKCEkZG9VcGRhdGUpIHsKCQkgCQkkdGhpcy0+aWQgPSAkd3BkYi0+aW5zZXJ0X2lkOwoJCSAJfQoJCX0KCQljYXRjaChFeGNlcHRpb24gJGV4KQoJCXsKCQkgCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byBjcmVhdGUgY29yZSBwYWdlIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSAKCQlNTV9UcmFuc2FjdGlvbjo6Y29tbWl0KCk7CgkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkZWxldGUoKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuIiBXSEVSRSBpZD0nJWQnIGxpbWl0IDEiOwoJCSRyZXN1bHRzID0gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5pZCkpOwoJCQkKCQlpZigkcmVzdWx0cykgewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGhhc0RlZmF1bHRDb3JlUGFnZSgkY29yZVBhZ2VUeXBlSWQsICRwb3N0SWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCWlmICgkY29yZVBhZ2VUeXBlSWQgPT0gTU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT04pCgkJewoJCQlyZXR1cm4gZmFsc2U7IC8vZnJlZSBjb25maXJtYXRpb24gY2FuJ3QgaGF2ZSBhIGRlZmF1bHQgY29yZSBwYWdlCgkJfQoJCSRzcWwgPSAic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgd2hlcmUgY29yZV9wYWdlX3R5cGVfaWQ9J3skY29yZVBhZ2VUeXBlSWR9JyBhbmQgcGFnZV9pZCE9J3skcG9zdElkfScgYW5kIChyZWZfaWQgSVMgTlVMTCBvciByZWZfaWQgPSAnJykgYW5kIChyZWZfdHlwZSBJUyBOVUxMIG9yIHJlZl90eXBlID0gJycpIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJaWYoJHJvdy0+dG90YWw+MCkKCQkJcmV0dXJuIHRydWU7CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzRGVmYXVsdENvcmVQYWdlKCRwYWdlSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgd2hlcmUgcGFnZV9pZD0neyRwYWdlSWR9JyBhbmQgKHJlZl9pZCBJUyBOVUxMIG9yIHJlZl9pZCA9ICcnKSBhbmQgKHJlZl90eXBlIElTIE5VTEwgb3IgcmVmX3R5cGUgPSAnJykgYW5kIGNvcmVfcGFnZV90eXBlX2lkICE9JyIuTU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT04uIiciOwoKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJaWYoJHJvdy0+dG90YWw+MCkKCQkJcmV0dXJuIHRydWU7CgkJCgkJcmV0dXJuIGZhbHNlOwoJCQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmVmZXJlbmNlUGFnZXMoJHJlZmVyZW5jZUlkcykKCXsKCQkkdGhpcy0+ZGVsZXRlRXhpc3RpbmdSZWZlcmVuY2VzKHNlbGY6OiRFVkVOVF9ERUxFVEVfQUxMX0JZX1BBR0UpOwoJCQoJCWZvcigkaT0wOyAkaTxjb3VudCgkcmVmZXJlbmNlSWRzKTsgJGkrKykKCQl7CgkJCSRjb3JlUGFnZSA9IG5ldyBNTV9Db3JlUGFnZSgpOwoJCQkkY29yZVBhZ2UtPnNldFBhZ2VJZCgkdGhpcy0+cGFnZUlkKTsKCQkJCgkJCSRpZCA9ICRyZWZlcmVuY2VJZHNbJGldOwoJCQkkcmVmVHlwZSA9ICR0aGlzLT5yZWZUeXBlOwoJCQlpZihwcmVnX21hdGNoKCIvKFwtKS8iLCAkcmVmZXJlbmNlSWRzWyRpXSkpCgkJCXsKCQkJCSRpZF9hcnIgPSBleHBsb2RlKCItIiwkcmVmZXJlbmNlSWRzWyRpXSk7CgkJCQkkaWQgPSAkaWRfYXJyWzBdOwoJCQkJJHJlZlR5cGUgPSAkaWRfYXJyWzFdOwoJCQl9CgkJCQoJCQkkY29yZVBhZ2UtPnNldFJlZklkKCRpZCk7CgkJCSRjb3JlUGFnZS0+c2V0UmVmVHlwZSgkcmVmVHlwZSk7CgkJCSRjb3JlUGFnZS0+c2V0Q29yZVBhZ2VUeXBlSWQoJHRoaXMtPmNvcmVQYWdlVHlwZS0+Z2V0SWQoKSk7CgkJCWlmKCEkY29yZVBhZ2UtPmNvbW1pdERhdGEoKSkKCQkJewoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfQoJCXJldHVybiB0cnVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0QXNEZWZhdWx0UGFnZSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSR0aGlzLT5kZWxldGVFeGlzdGluZ1JlZmVyZW5jZXMoTU1fQ29yZVBhZ2U6OiRFVkVOVF9ERUxFVEVfVFlQRV9CWV9QQUdFKTsgLy8kcG9zdElkLCAkY29yZVBhZ2VUeXBlSWQKCQkKCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoInVwZGF0ZSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuIiBzZXQgcGFnZV9pZD1udWxsLCByZWZfaWQ9bnVsbCwgcmVmX3R5cGU9bnVsbCB3aGVyZSBwYWdlX2lkPSVzIEFORCBjb3JlX3BhZ2VfdHlwZV9pZCA9ICIuTU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT04sJHRoaXMtPnBhZ2VJZCkpOwoJCQkKCQkkc3FsID0gInVwZGF0ZSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuIiBzZXQgcGFnZV9pZD0neyR0aGlzLT5wYWdlSWR9JyB3aGVyZSBjb3JlX3BhZ2VfdHlwZV9pZD0nIi4kdGhpcy0+Y29yZVBhZ2VUeXBlLT5nZXRJZCgpLiInIGFuZCByZWZfdHlwZSBJUyBOVUxMIGFuZCByZWZfaWQgSVMgTlVMTCBsaW1pdCAxIjsKCQkkcmV0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCWlmKCRyZXQ9PT1mYWxzZSkKCQkJcmV0dXJuIGZhbHNlOwoJCQkKCQlyZXR1cm4gdHJ1ZTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRBdmFpbGFibGVXUFBhZ2VzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJzZWxlY3QgaWQsIHBvc3RfdGl0bGUgZnJvbSB7JHdwZGItPnBvc3RzfSBwIHdoZXJlIHAucG9zdF90eXBlPSdwYWdlJyBhbmQgcC5wb3N0X3N0YXR1cyBJTiAoJ3B1Ymxpc2gnLCdkcmFmdCcpIGFuZCBwLmlkIE5PVCBJTiAoc2VsZWN0IHBhZ2VfaWQgZnJvbSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuIiBjIHdoZXJlIHBhZ2VfaWQgSVMgTk9UIE5VTEwpIjsKCQlyZXR1cm4gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQ29yZVBhZ2UoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvLy9kZWxldGUgc3BlY2lmaWMgcGFnZXMKCQkkdGhpcy0+ZGVsZXRlRXhpc3RpbmdSZWZlcmVuY2VzKE1NX0NvcmVQYWdlOjokRVZFTlRfREVMRVRFX0FMTF9CWV9QQUdFKTsKCQkKCQlpZihpbnR2YWwoJHRoaXMtPnBhZ2VJZCk+MCkKCQl7CgkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfQ09SRV9QQUdFUy4iIHNldCBwYWdlX2lkID0gTlVMTCB3aGVyZSBwYWdlX2lkPSd7JHRoaXMtPnBhZ2VJZH0nIGxpbWl0IDEiOwoJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJfQoJCQoJCU1NX0NvcmVQYWdlRW5naW5lOjpjcmVhdGVDb3JlUGFnZUNhY2hlKCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RGVmYXVsdENvcmVQYWdlU2V0dGluZ3NCeUlkKCRwYWdlX2lkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiAiIGNwICIgLgoJCQkJIgkJd2hlcmUgIiAuCgkJCQkiCQkJY3AucGFnZV9pZD0neyRwYWdlX2lkfScgYW5kIChyZWZfdHlwZSBJUyBOVUxMIG9yIHJlZl90eXBlID0gJycpIGFuZCAocmVmX2lkIElTIE5VTEwgb3IgcmVmX2lkID0gJycpIGFuZCBjb3JlX3BhZ2VfdHlwZV9pZCAhPSciLk1NX0NvcmVQYWdlVHlwZTo6JEZSRUVfQ09ORklSTUFUSU9OLiInIGxpbWl0IDEiIDsKCQlyZXR1cm4gJHdwZGItPmdldF9yb3coJHNxbCk7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDb3JlUGFnZUluZm8oJHBhZ2VfaWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAic2VsZWN0IGNwLiosIGdyb3VwX2NvbmNhdChjcC5yZWZfaWQgU0VQQVJBVE9SICcsJykgYXMgcmVmcywgZ3JvdXBfY29uY2F0KGNwLnJlZl90eXBlIFNFUEFSQVRPUiAnLCcpIGFzIHJlZl90eXBlcywgIGNwdC5uYW1lIGFzIGNvcmVfcGFnZV90eXBlX25hbWUgZnJvbSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuICIgY3AsICIuTU1fVEFCTEVfQ09SRV9QQUdFX1RZUEVTLiIgY3B0ICIgLgoJCQkJIgkJd2hlcmUgIiAuCgkJCQkiCQkJY3AucGFnZV9pZD0neyRwYWdlX2lkfScgCSAKCQkJCQkJCWFuZCBjcC5jb3JlX3BhZ2VfdHlwZV9pZD1jcHQuaWQKCQkJCWdyb3VwIGJ5IGNwLmNvcmVfcGFnZV90eXBlX2lkIiA7CgkKCQlyZXR1cm4gJHdwZGItPmdldF9yb3coJHNxbCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q29yZVBhZ2VTZXR0aW5nc0J5UGFnZUlEKCRwYWdlX2lkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiAiIGNwICIgLgoJCQkJIgkJd2hlcmUgIiAuCgkJCQkiCQkJY3AucGFnZV9pZD0neyRwYWdlX2lkfScgIiA7CgkJcmV0dXJuICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDb3JlUGFnZXNCeVBhZ2VJRCgkcGFnZV9pZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJzZWxlY3QgY3AuKiwgbXQubmFtZSBhcyBtdF9uYW1lLCBhdC5uYW1lIGFzIGF0X25hbWUKCQkJCQkgZnJvbSAiLk1NX1RBQkxFX0NPUkVfUEFHRVMuICIgY3AgCgkJCQkJIAkJTEVGVCBKT0lOICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFMuIiBtdCBvbiBjcC5yZWZfdHlwZT0nbWVtYmVyX3R5cGUnIGFuZCBjcC5yZWZfaWQ9bXQuaWQKCQkJCQkgCQlMRUZUIEpPSU4gIi5NTV9UQUJMRV9CVU5ETEVTLiIgYXQgb24gY3AucmVmX3R5cGU9J2FjY2Vzc190YWcnIGFuZCBjcC5yZWZfaWQ9YXQuaWQKCQkJCQkgIiAuCgkJCQkiCQl3aGVyZSAiIC4KCQkJCSIJCQljcC5wYWdlX2lkPSd7JHBhZ2VfaWR9JyAiIDsKCQlyZXR1cm4gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzQXZhaWxhYmxlKCRjb3JlUGFnZVR5cGVJZCwgJHBhZ2VJZCkKCXsKCQlzd2l0Y2goJGNvcmVQYWdlVHlwZUlkKQoJCXsKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRMT0dJTl9QQUdFOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JEZPUkdPVF9QQVNTV09SRDoKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRSRVNFVF9QQVNTV09SRDoKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRDSEVDS09VVDoKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRSRURFRU1fR0lGVDoKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRNWV9BQ0NPVU5UOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SOgoJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokTE9HT1VUX1BBR0U6CgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokTUVNQkVSX0hPTUVfUEFHRToKCQkJCSRtZW1iZXJfb2JqID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgpOwoJCQkJJHJvd3MgPSAkbWVtYmVyX29iai0+Z2V0QXZhaWxhYmxlTWVtYmVyc2hpcExldmVscygkY29yZVBhZ2VUeXBlSWQsICRwYWdlSWQpOwoJCQkJaWYoISRyb3dzKQoJCQkJCXJldHVybiBmYWxzZTsKCQkJCXJldHVybiB0cnVlOwoJCQkJCgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokUEFJRF9DT05GSVJNQVRJT046CgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokU0FWRVRIRVNBTEU6CgkJCQkkcHJvZHVjdHMgPSBuZXcgTU1fUHJvZHVjdCgpOwoJCQkJJHJvd3MgPSAkcHJvZHVjdHMtPmdldFByb2R1Y3RzQW5kQXNzb2NpYXRpb25zKCRjb3JlUGFnZVR5cGVJZCwgJHBhZ2VJZCk7CgkJCQlpZighJHJvd3MpCgkJCQl7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiB0cnVlOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldERlZmF1bHRQYWdlcygpCgl7CgkJZ2xvYmFsICR3cGRiLCAkcG9zdDsKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DT1JFX1BBR0VfVFlQRVMuIiBjcCBXSEVSRSAiOwoJCSRzcWwgLj0gInZpc2libGU9JzEnIEFORCBjcC5pZCBJTiAoU0VMRUNUIGNvcmVfcGFnZV90eXBlX2lkIEZST00gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgYyApOyI7CgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJaWYoISRyb3dzKQoJCXsKCQkJcmV0dXJuIGFycmF5KCk7CgkJfQoJCQkKCQlyZXR1cm4gJHJvd3M7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RGVmYXVsdENvcmVQYWdlQnlUeXBlKCR0eXBlX2lkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQlpZiAoJHR5cGVfaWQgPT0gTU1fQ29yZVBhZ2VUeXBlOjokRlJFRV9DT05GSVJNQVRJT04pCgkJewoJCQlyZXR1cm4gbnVsbDsgLy9ubyBkZWZhdWx0IGZyZWUtY29uZmlybWF0aW9uIHBhZ2UKCQl9CgkJJHNxbCA9ICJzZWxlY3QgcGFnZV9pZCBmcm9tICIuTU1fVEFCTEVfQ09SRV9QQUdFUy4gIiBjcCwgIi5NTV9UQUJMRV9DT1JFX1BBR0VfVFlQRVMuIiB0ICIgLgoJCQkJIgkJd2hlcmUgIiAuCgkJCQkiCQkJKGNwLnJlZl90eXBlIElTIE5VTEwgb3IgY3AucmVmX3R5cGUgPSAnJykgYW5kICIgLgoJCQkJIgkJCShjcC5yZWZfaWQgSVMgTlVMTCBvciBjcC5yZWZfaWQgPSAnJykgYW5kICIgLgoJCQkJIgkJCWNwLmNvcmVfcGFnZV90eXBlX2lkPSd7JHR5cGVfaWR9JyBncm91cCBieSBwYWdlX2lkIiA7CgkJCgkJcmV0dXJuICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFsbFJlZmVyZW5jZXNUb0NvcmVQYWdlVHlwZSgkY29yZVBhZ2VUeXBlSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAic2VsZWN0IHBhZ2VfaWQscmVmX3R5cGUscmVmX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgd2hlcmUgY29yZV9wYWdlX3R5cGVfaWQ9J3skY29yZVBhZ2VUeXBlSWR9JyBhbmQgcGFnZV9pZD4wIGFuZCBwYWdlX2lkIElOIChzZWxlY3QgSUQgZnJvbSB7JHdwZGItPnBvc3RzfSB3aGVyZSBwb3N0X3N0YXR1cyBJTiAoJ3B1Ymxpc2gnLCdkcmFmdCcpKSBvcmRlciBieSByZWZfaWQgZGVzYyI7CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJaWYoJHJvd3MgPT09IGZhbHNlKQoJCQlyZXR1cm4gMDsKCQkKCQlyZXR1cm4gJHJvd3M7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QXNzb2NpYXRlZFdQQ29yZVBhZ2VzKCRwYWdlX2lkLCAkY29yZVBhZ2VUeXBlSWQ9bnVsbCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJGV4dF9zcWwgPSIiOwoJCWlmKCFpc19udWxsKCRjb3JlUGFnZVR5cGVJZCkpCgkJewoJCQkkZXh0X3NxbCA9ICIgQU5EIGMuY29yZV9wYWdlX3R5cGVfaWQ9J3skY29yZVBhZ2VUeXBlSWR9JyAiOwoJCX0KCQkkc3FsPSAic2VsZWN0IGMuKiBmcm9tIHskd3BkYi0+cG9zdHN9IHAsICIuTU1fVEFCTEVfQ09SRV9QQUdFUy4iIGMgd2hlcmUgcC5JRD0neyRwYWdlX2lkfScgYW5kIHAuSUQ9Yy5wYWdlX2lkIHskZXh0X3NxbH0iOwoJCXJldHVybiAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q29yZVBhZ2UoJHBhZ2VfaWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAic2VsZWN0IGNvcmVfcGFnZV90eXBlX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgd2hlcmUgcGFnZV9pZD0neyRwYWdlX2lkfSciOwkKCQlyZXR1cm4gJHdwZGItPmdldF9yb3coJHNxbCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZGVsZXRlRXhpc3RpbmdSZWZlcmVuY2VzKCRkZWxldGVFdmVudFR5cGUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRyZXN1bHRzID0gIGZhbHNlOwoJCXN3aXRjaCgkZGVsZXRlRXZlbnRUeXBlKQoJCXsKCQkJY2FzZSBzZWxmOjokRVZFTlRfREVMRVRFX0JZX1RZUEU6CgkJCQkkc3FsID0gIkRFTEVURSAiIC4KCQkJCQkiCUZST00gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgIiAuCgkJCQkJIglXSEVSRSAiIC4KCQkJCQkiCQljb3JlX3BhZ2VfdHlwZV9pZD0nJWQnIEFORCAiIC4KCQkJCQkiCQlyZWZfaWQ9JyVkJyBBTkQgIiAuCgkJCQkJIgkJcmVmX3R5cGU9JyVzJyAiOwoJCQkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmNvcmVQYWdlVHlwZS0+Z2V0SWQoKSwkdGhpcy0+cmVmSWQsICR0aGlzLT5yZWZUeXBlKSk7CgkJCWJyZWFrOwoJCQkKCQkJY2FzZSBzZWxmOjokRVZFTlRfREVMRVRFX1RZUEVfQllfUEFHRToKCQkJCgkJCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQ09SRV9QQUdFUy4iIHdoZXJlIGNvcmVfcGFnZV90eXBlX2lkPSclZCcgYW5kIHBhZ2VfaWQ9JyVkJyBhbmQgcmVmX3R5cGUgSVMgTk9UIE5VTEwgYW5kIHJlZl9pZCBJUyBOT1QgTlVMTCI7CgkJCQkkcmVzdWx0cyA9ICR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkc3FsLCAgJHRoaXMtPmNvcmVQYWdlVHlwZS0+aWQsJHRoaXMtPnBhZ2VJZCkpOwoJCQkJCgkJCWJyZWFrOwoJCQkKCQkJY2FzZSBzZWxmOjokRVZFTlRfREVMRVRFX0FMTF9CWV9QQUdFOgoJCQkKCQkJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgd2hlcmUgcGFnZV9pZD0neyR0aGlzLT5wYWdlSWR9JyBhbmQgcmVmX3R5cGUgSU4gKCdtZW1iZXJfdHlwZScsJ2Vycm9yX3R5cGUnLCdhY2Nlc3NfdGFnJywncHJvZHVjdCcpIjsKCQkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCQoJCQlicmVhazsKCQl9CgkJCgkJaWYoJHJlc3VsdHMpIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFBhZ2VJZCgkc3RyKSAKCXsKCQkkdGhpcy0+cGFnZUlkID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFBhZ2VJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5wYWdlSWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDb3JlUGFnZVR5cGVJZCgkaWQpCgl7CgkJJHRoaXMtPmNvcmVQYWdlVHlwZSA9IG5ldyBNTV9Db3JlUGFnZVR5cGUoJGlkKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldENvcmVQYWdlVHlwZShNTV9Db3JlUGFnZVR5cGUgJGNwdCkgCgl7CgkJJHRoaXMtPmNvcmVQYWdlVHlwZSA9ICRjcHQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRDb3JlUGFnZVR5cGUoKQoJewoJCXJldHVybiAkdGhpcy0+Y29yZVBhZ2VUeXBlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmVmSWQoJHN0cikgCgl7CgkJJHRoaXMtPnJlZklkID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlZklkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnJlZklkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmVmVHlwZSgkc3RyKSAKCXsKCQkkdGhpcy0+cmVmVHlwZSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZWZUeXBlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnJlZlR5cGU7Cgl9CgkKfQo=', 0, '2018-11-21 06:38:54'),
(144, 'shoppingcartitem', 'LyoqCiAqCiAqCiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKGMpIE1lbWJlck1vdXNlLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KCi8qKgogKiBNTV9TaG9wcGluZ0NhcnRJdGVtIGlzIGFuIGFic3RyYWN0aW9uIG9mIGFuIGl0ZW0gaW4gYSBzaG9wcGluZyBjYXJ0LiBUaGVyZSBhcmUgdHdvIHR5cGVzIG9mIHB1cmNoYXNlcyBNZW1iZXJNb3VzZSBwbGFucyB0byBzdXBwb3J0OwogKiBtZW1iZXJzaGlwcywgYW5kIGUtY29tbWVyY2UgcHJvZHVjdCBwdXJjaGFzZXMuIFdoaWxlIHRoZSBNTV9NZW1iZXJzaGlwTGV2ZWwgYW5kIE1NX1Byb2R1Y3QgdHlwZXMgY291bGQgYmUgYWRkZWQgZGlyZWN0bHkgdG8gdGhlIGNhcnQsIAogKiBlYWNoIHdvdWxkIG5lZWQgdG8gYmUgdHJlYXRlZCBkaWZmZXJlbnRseSwgYW5kIHRoaXMgaXMgZnVydGhlciBjb21wbGljYXRlZCBieSB0aGUgZmFjdCB0aGF0IGEgbWVtYmVyc2hpcCBwdXJjaGFzZSBpcyBjdXJyZW50bHkgdGhlCiAqIHJlc3VsdCBvZiBhIHByb2R1Y3QgcHVyY2hhc2UuIEluIHRoZSBmdXR1cmUgaG9wZWZ1bGx5IHRoZSB1bmRlcmx5aW5nIG9iamVjdCBtb2RlbCB3aWxsIGJlIHJldmlzZWQsIGVpdGhlciBjcmVhdGluZyBhbiBpbmhlcml0YW5jZSAKICogcmVsYXRpb25zaGlwIGJldHdlZW4gbWVtYmVyc2hpcCBhbmQgcHJvZHVjdCwgb3IgY29tcGxldGVseSBzZXBhcmF0aW5nIHRoZXNlIGNvbmNlcHRzLiBUaGlzIGNsYXNzIHByb3ZpZGVzIGFuIGFic3RyYWN0aW9uIG92ZXIgdGhlIAogKiBwdXJjaGFzZSB0eXBlLCBob3BlZnVsbHkgaW5zdWxhdGluZyB0aGUgcmVzdCBvZiB0aGUgY29kZSBmcm9tIHRoZXNlIGZ1dHVyZSBjaGFuZ2VzCiAqLwoKY2xhc3MgTU1fU2hvcHBpbmdDYXJ0SXRlbSAKewoJcHVibGljIHN0YXRpYyAkQ0FSVF9QUk9EVUNUID0gMTsKCXB1YmxpYyBzdGF0aWMgJENBUlRfQ09VUE9OID0gMjsKCQoJcHJpdmF0ZSAkZGlzcGxheV9uYW1lOwoJcHJpdmF0ZSAkaXRlbTsKCXByaXZhdGUgJGl0ZW1fdHlwZTsKCXByaXZhdGUgJHF1YW50aXR5ID0gMTsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRkaXNwbGF5X25hbWUsICRpdGVtLCAkaXRlbV90eXBlLCAkcXVhbnRpdHk9MSkKCXsKCQkkdGhpcy0+ZGlzcGxheV9uYW1lID0gJGRpc3BsYXlfbmFtZTsKCQkkdGhpcy0+aXRlbSA9ICRpdGVtOwoJCWlmICgoaW50dmFsKCRpdGVtX3R5cGUpIDwgMSkgfHwgKGludHZhbCgkaXRlbV90eXBlKSA+IDIpKQoJCXsKCQkJdGhyb3cgRXhjZXB0aW9uKCJDYXJ0IGl0ZW0gdHlwZSBub3Qgc3VwcG9ydGVkIik7CgkJfQoJCSR0aGlzLT5pdGVtX3R5cGUgPSAkaXRlbV90eXBlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGlzcGxheU5hbWUoKQoJewoJCXJldHVybiAkdGhpcy0+ZGlzcGxheV9uYW1lOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RGlzcGxheU5hbWUoJGRpc3BsYXlfbmFtZSkKCXsKCQkkdGhpcy0+ZGlzcGxheV9uYW1lID0gJGRpc3BsYXlfbmFtZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEl0ZW0oKQoJewoJCXJldHVybiAkdGhpcy0+aXRlbTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEl0ZW0oJGl0ZW0pCgl7CgkJJHRoaXMtPml0ZW0gPSAkaXRlbTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEl0ZW1UeXBlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPml0ZW1fdHlwZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEl0ZW1UeXBlKCRpdGVtX3R5cGUpCgl7CgkJJHRoaXMtPml0ZW1fdHlwZSA9ICRpdGVtX3R5cGU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRRdWFudGl0eSgkcXVhbnRpdHkpCgl7CgkJJHRoaXMtPnF1YW50aXR5ID0gJHF1YW50aXR5OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UXVhbnRpdHkoKQoJewoJCXJldHVybiAkdGhpcy0+cXVhbnRpdHk7Cgl9CgkKCQp9Cgo=', 0, '2018-11-21 06:38:54'),
(145, 'manageinstallview', 'Y2xhc3MgTU1fTWFuYWdlSW5zdGFsbFZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Vmlld0RhdGEoTU1fRGF0YUdyaWQgJGRnKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcm93cyA9IHBhcmVudDo6Z2V0RGF0YShNTV9UQUJMRV9WRVJTSU9OX1JFTEVBU0VTLCBudWxsLCAkZGcpOwoJCQoJCXJldHVybiAkcm93czsKCX0KfQ==', 0, '2018-11-21 06:38:54'),
(146, 'corepagetagprocessor', 'Y2xhc3MgTU1fQ29yZVBhZ2VUYWdQcm9jZXNzb3IKewkKCXB1YmxpYyBzdGF0aWMgJFRBR19DT1JFX1BBR0VfTElOSyA9ICJtbV9jb3JlcGFnZV9saW5rIjsKCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgc3RyaW5nIGFuZCByZXR1cm5zIHRydWUgaWYgdGhlIFNtYXJ0VGFnIGlzIHJlbGF0ZWQgdG8gY29yZSBwYWdlcy4KCSAqIAoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcmV0dXJuIEJvb2xlYW4gcmV0dXJucyB0cnVlIGlmIHRoZSBTbWFydFRhZyBwYXNzZWQgaXMgcmVsYXRlZCB0byBjb3JlIHBhZ2VzLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzQ29yZVBhZ2VTbWFydFRhZygkc21hcnRUYWcpCgl7CgkJc3dpdGNoKCRzbWFydFRhZykgCgkJewoJCQljYXNlIHNlbGY6OiRUQUdfQ09SRV9QQUdFX0xJTks6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgbmFtZSBhbmQgYSBudW1iZXIgb2YgcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBTbWFydFRhZyBhbmQgbWFrZXMgYSBjYWxsIHRvIAoJICogdGhlIGFwcHJvcHJpYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBTbWFydFRhZyBuYW1lLgoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IHRvIHByb2Nlc3MKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc1NtYXJ0VGFnKCRzbWFydFRhZywgJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlzd2l0Y2goJHNtYXJ0VGFnKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JFRBR19DT1JFX1BBR0VfTElOSzoKCQkJCXJldHVybiBzZWxmOjptbV9jb3JlcGFnZV9saW5rKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gIkludmFsaWQgQ29yZSBQYWdlIFNtYXJ0VGFnIHskc21hcnRUYWd9IGZvdW5kLiI7CgkJfQoJfQoJCgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0NvcmVQYWdlX0xpbmsgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgCgkgKiByZXR1cm5pbmcgYSBsaW5rIHRvIHRoZSBhcHByb3ByaWF0ZSBjb3JlIHBhZ2UgYmFzZWQgb24gdGhlIHR5cGUgYXR0cmlidXRlLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBtbV9jb3JlcGFnZV9saW5rKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQlpZihpc3NldCgkdHlwZSkpCgkJewoJCQkkY3VycmVudFVzZXIgPSBNTV9TbWFydFRhZ1V0aWw6OmdldEN1cnJlbnRVc2VyKCk7CgkJCSR1cmwgPSAiIjsKCQkJCgkJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQkJewoJCQkJY2FzZSAibG9naW4iOgoJCQkJCSR1cmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JExPR0lOX1BBR0UsIG51bGwpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAibG9nb3V0IjoKCQkJCQkkdXJsID0gd3BfbG9nb3V0X3VybCgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiaG9tZXBhZ2UiOgoJCQkJCSR1cmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JE1FTUJFUl9IT01FX1BBR0UsIG51bGwsICRjdXJyZW50VXNlcik7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJmb3Jnb3RwYXNzd29yZCI6CgkJCQkJJHVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokRk9SR09UX1BBU1NXT1JELCBudWxsKTsKCQkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSAicmVzZXRwYXNzd29yZCI6ICAgIAoJCQkJCSR1cmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JFJFU0VUX1BBU1NXT1JELCBudWxsKTsKCQkJCQkkdXJsID0gTU1fVXRpbHM6OmFwcGVuZFVybFBhcmFtKCR1cmwsIE1NX1Jlc2V0UGFzc3dvcmRGb3JtVmlldzo6JE1NX1BBUkFNX0tFWV9LRVksICRjdXJyZW50VXNlci0+Z2V0Rm9yZ290UGFzc3dvcmRIYXNoKCkpOwoJCQkJCSR1cmwgPSBNTV9VdGlsczo6YXBwZW5kVXJsUGFyYW0oJHVybCwgTU1fUmVzZXRQYXNzd29yZEZvcm1WaWV3OjokTU1fUEFSQU1fS0VZX0VNQUlMLCBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmVuY3J5cHRQYXNzd29yZCgkY3VycmVudFVzZXItPmdldEVtYWlsKCkpKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgIm15YWNjb3VudCI6CgkJCQkJJHVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokTVlfQUNDT1VOVCwgbnVsbCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJzYXZldGhlc2FsZSI6CgkJCQkJJHVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokU0FWRVRIRVNBTEUsIG51bGwsICRjdXJyZW50VXNlcik7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3R5cGUnIGF0dHJpYnV0ZSAneyR0eXBlfScgaXMgaW52YWxpZCBmb3IgU21hcnRUYWcgeyRjb2RlfS4iOwoJCQl9CgkJCQoJCQlpZighZW1wdHkoJHVybCkgJiYgaXNzZXQoJGF1dG9sb2dpbikgJiYgJGF1dG9sb2dpbiA9PSAidHJ1ZSIpCgkJCXsKCQkJCS8vIGdlbmVyYXRlIGEgbG9naW4gdG9rZW4KCQkJCWlmKCRjdXJyZW50VXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRsb2dpblRva2VuUmVzcG9uc2UgPSBNTV9Mb2dpblRva2VuOjpnZW5lcmF0ZVRva2VuKCRjdXJyZW50VXNlci0+Z2V0SWQoKSk7CgkJCQkJCQoJCQkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRsb2dpblRva2VuUmVzcG9uc2UpKQoJCQkJCXsKCQkJCQkJJGxvZ2luVG9rZW4gPSAkbG9naW5Ub2tlblJlc3BvbnNlLT5tZXNzYWdlOwoJCQkJCQkkdXJsID0gTU1fVXRpbHM6OmFwcGVuZFVybFBhcmFtKCR1cmwsIE1NX1Nlc3Npb246OiRQQVJBTV9MT0dJTl9UT0tFTiwgJGxvZ2luVG9rZW4pOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJcmV0dXJuICR1cmw7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3R5cGUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfS4iOwoJCX0KCX0KfQo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(147, 'activecampaignemailserviceprovider', 'Y2xhc3MgTU1fQWN0aXZlQ2FtcGFpZ25FbWFpbFNlcnZpY2VQcm92aWRlciBleHRlbmRzIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXIgCnsKCXByb3RlY3RlZCAkd3JhcHBlcjsKCgkvKioKCSAqIAoJICogVGhlIGFjdGl2ZWNhbXBhaWduIGFwaSByZXF1aXJlcyBhbiBBUEkgVXJsIGFuZCBLZXkgZm9yIGFjY2Vzcywgc28gaXQgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXIgZm9yIHRoZSBjb25zdHJ1Y3RvcgoJICogQHBhcmFtIE9iamVjdCAkcHJvdmlkZXJfaW5mbyBPcHRpb25zIG9iamVjdAoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pIAoJewoJCSRhcGlVcmwgPSBudWxsOwoJCSRhcGlLZXkgPSBudWxsOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pOwoJCWlmIChpc19vYmplY3QoJHByb3ZpZGVyX2luZm8pICYmIChpc3NldCgkcHJvdmlkZXJfaW5mby0+YXBpX2tleSkpICYmICFlbXB0eSgkcHJvdmlkZXJfaW5mby0+YXBpX2tleSkKCQkJJiYgKGlzc2V0KCRwcm92aWRlcl9pbmZvLT5hZGRpdGlvbmFsX2RhdGEpKSAmJiAhZW1wdHkoJHByb3ZpZGVyX2luZm8tPmFkZGl0aW9uYWxfZGF0YSkpIHsKCQkJaWYgKCgkYWRkaXRpb25hbF9kYXRhID0gdW5zZXJpYWxpemUoJHByb3ZpZGVyX2luZm8tPmFkZGl0aW9uYWxfZGF0YSkpICYmIGlzc2V0KCRhZGRpdGlvbmFsX2RhdGFbJ3VybCddKSAmJiAhZW1wdHkoJGFkZGl0aW9uYWxfZGF0YVsndXJsJ10pKSB7CgkJCQkkYXBpVXJsID0gJGFkZGl0aW9uYWxfZGF0YVsndXJsJ107CgkJCQkkYXBpS2V5ID0gJHByb3ZpZGVyX2luZm8tPmFwaV9rZXk7CgkJCX0KCQl9CgkJJHRoaXMtPndyYXBwZXIgPSBuZXcgTU1fQUNBUEkoJGFwaVVybCwgJGFwaUtleSk7Cgl9CgoJLyoqCgkgKiAKCSAqIFJldHVybiB0aGUgbGlzdHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25maWd1cmVkIGFwaUtleSwga2V5ZWQgYnkgaWQgd2l0aCB0aGUgdmFsdWVzIGJlaW5nIGxpc3QgbmFtZXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyBsaXN0cyBhcyB0aGUgbWVzc2FnZSBvbiBzdWNjZXNzLCBhbiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBlcnJvciBzdGF0ZSBvdGhlcndpc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldExpc3RzKCRmaWx0ZXJzPWFycmF5KCksICRzdGFydD0wLCAkbGltaXQ9MTAwKSAKCXsKCQkkcmV0dmFsID0gJHRoaXMtPndyYXBwZXItPmxpc3RzKCRmaWx0ZXJzLCAkc3RhcnQsICRsaW1pdCk7CgoJCWlmICgkdGhpcy0+d3JhcHBlci0+Z2V0RXJyb3JDb2RlKCkpCgkJewoJCQlyZXR1cm4gJHRoaXMtPmdldEVycm9yKCJ1bmFibGUgdG8gbG9hZCBsaXN0cyIpOwoJCX0gCgkJZWxzZSAKCQl7CgkJCSRsaXN0cyA9IGFycmF5KCk7CgkJCWZvcmVhY2ggKCRyZXR2YWwgYXMgJGlkID0+ICRuYW1lKSAKCQkJewoJCQkJJGxpc3RzWyRpZF0gPSAkbmFtZTsKCQkJfQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRsaXN0cyxNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwoJCX0KCX0KCgkvKioKCSAqIFJldHVybiBhIERIVE1ML0phdmFzY3JpcHQgZGlhbG9nIGNhcGFibGUgb2YgY29sbGVjdGluZyB0aGUgb3B0aW9ucyBuZWVkZWQgdG8gY29uZmlndXJlIHRoZSBwcm92aWRlcgoJICogQHJldHVybiBTdHJpbmcgdGhlIG1hcmt1cCBmb3IgdGhlIG9wdGlvbnMgZGlhbG9nCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJPcHRpb25zRGlhbG9nKCRwb3N0KSAKCXsKCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyKCk7CgkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHRoaXMtPmdldFRva2VuKCkpOwoJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCgkJJGFwaV91cmxfdmFsdWUgPSAnJzsKCQkkYXBpX2tleV92YWx1ZSA9ICcnOwoJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpIHsKCQkJJGFwaV91cmxfdmFsdWUgPSAkcHJvdmlkZXJfZW50aXR5LT5nZXRDb25maWdPcHRpb24oJ3VybCcpOwoJCQkkYXBpX2tleV92YWx1ZSA9ICRwcm92aWRlcl9lbnRpdHktPmdldEFQSUtleSgpOwoJCX0KCQkkZm9ybSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckRpYWxvZygpOwoJCSRmb3JtLT5kaWFsb2cgPSA8PDxPUFRJT05TCgkJPGRpdiBpZD0ibW0tcHJvdmlkZXItY29uZmlnLW9wdGlvbnMiPgoJCQk8bGFiZWwgc3R5bGU9ImZsb2F0OmxlZnQ7IHdpZHRoOjhlbTsiPkFQSSBVUkw8L2xhYmVsPgoJCQk8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYWN0aXZlY2FtcGFpZ25fYXBpX3VybCIgaWQ9ImFjdGl2ZWNhbXBhaWduX2FwaV91cmwiIHNpemU9IjM3IiB2YWx1ZT0ieyRhcGlfdXJsX3ZhbHVlfSIvPjxici8+CgoJCQk8bGFiZWwgc3R5bGU9ImZsb2F0OmxlZnQ7IHdpZHRoOjhlbTsiPkFQSSBLZXk8L2xhYmVsPgoJCQk8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iYWN0aXZlY2FtcGFpZ25fYXBpX2tleSIgaWQ9ImFjdGl2ZWNhbXBhaWduX2FwaV9rZXkiIHNpemU9IjM3IiB2YWx1ZT0ieyRhcGlfa2V5X3ZhbHVlfSIvPjxici8+CgkJPC9kaXY+Ck9QVElPTlM7CgkJcmV0dXJuICRmb3JtOwoJfQoKCS8qKgoJICogUmVzcG9uZHMgdG8gZGF0YSBjb2xsZWN0ZWQgZnJvbSB0aGUgZm9ybSByZW5kZXJlZCBieSByZW5kZXJPcHRpb25zRGlhbG9nCgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmhhbmRsZU9wdGlvbnNEaWFsb2coKQoJICogQHBhcmFtICRvcHRpb25EYXRhIEFycmF5IGNvbnRhaW5pbmcgdGhlIHBvc3RlZCB2YWx1ZXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBoYW5kbGVPcHRpb25zRGlhbG9nKCRvcHRpb25EYXRhKSAKCXsKCQlpZiAoaXNfYXJyYXkoJG9wdGlvbkRhdGEpICYmIChpc3NldCgkb3B0aW9uRGF0YVsnYWN0aXZlY2FtcGFpZ25fYXBpX3VybCddKSkgJiYgIWVtcHR5KCRvcHRpb25EYXRhWydhY3RpdmVjYW1wYWlnbl9hcGlfdXJsJ10pCgkJCQkmJiAoaXNzZXQoJG9wdGlvbkRhdGFbJ2FjdGl2ZWNhbXBhaWduX2FwaV9rZXknXSkpICYmICFlbXB0eSgkb3B0aW9uRGF0YVsnYWN0aXZlY2FtcGFpZ25fYXBpX2tleSddKSkgCgkJewoJCQkkcHJvdmlkZXJfdG9rZW4gPSAkb3B0aW9uRGF0YVsncHJvdmlkZXJfdG9rZW4nXTsKCQkJJGFwaV91cmwgPSAkb3B0aW9uRGF0YVsnYWN0aXZlY2FtcGFpZ25fYXBpX3VybCddOwoJCQkkYXBpX2tleSA9ICRvcHRpb25EYXRhWydhY3RpdmVjYW1wYWlnbl9hcGlfa2V5J107CgkJCSRwcm9zcGVjdF9saXN0X2lkID0gJG9wdGlvbkRhdGFbJ3Byb3NwZWN0X2xpc3RfaWQnXTsKCQkJJGNhbmNlbGxhdGlvbl9saXN0X2lkID0gJG9wdGlvbkRhdGFbJ2NhbmNlbGxhdGlvbl9saXN0X2lkJ107CgoJCQkkdGhpcy0+d3JhcHBlci0+c2V0QXBpVXJsKCRhcGlfdXJsKTsKCQkJJHRoaXMtPndyYXBwZXItPnNldEFwaUtleSgkYXBpX2tleSk7CgkJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHByb3ZpZGVyX3Rva2VuKTsKCQkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCQlpZiAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKSAKCQkJewoJCQkJLy9maXJzdCB3cml0ZSB0aGUgcHJvdmlkZXIncyBjb25maWd1cmF0aW9uIG9wdGlvbnMKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldEFQSUtleSgkYXBpX2tleSk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRDb25maWdPcHRpb24oJ3VybCcsICRhcGlfdXJsKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldEFjdGl2ZSh0cnVlKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldFByb3NwZWN0TGlzdElEKCRwcm9zcGVjdF9saXN0X2lkKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldENhbmNlbGxhdGlvbkxpc3RJRCgkY2FuY2VsbGF0aW9uX2xpc3RfaWQpOwoJCQkJJGNvbW1pdF9yZXNwb25zZSA9ICRwcm92aWRlcl9lbnRpdHktPmNvbW1pdERhdGEoKTsKCQkJCWlmICgkY29tbWl0X3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpIAoJCQkJewoJCQkJCS8vcGFzcyB0aHJvdWdoIGVycm9ycyBjb21taXR0aW5nIHRvIHRoZSBkYXRhYmFzZQoJCQkJCXJldHVybiAkY29tbWl0X3Jlc3BvbnNlOwoJCQkJfQoJCQkJLy9ub3cgd3JpdGUgdGhlIGxpc3QgbWFwcGluZ3MKCQkJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnbWVtYmVyX3R5cGVfbWFwcGluZ3MnXSkgJiYgaXNfYXJyYXkoJG9wdGlvbkRhdGFbJ21lbWJlcl90eXBlX21hcHBpbmdzJ10pKSAKCQkJCXsKCQkJCQkkcHJvdmlkZXJfaWQgPSAkcHJvdmlkZXJfZW50aXR5LT5nZXRJZCgpOyAKCQkJCQlyZXR1cm4gJHRoaXMtPnBlcnNpc3RMaXN0TWFwcGluZ3MoJHByb3ZpZGVyX2lkLCRvcHRpb25EYXRhWydtZW1iZXJfdHlwZV9tYXBwaW5ncyddKTsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkvL2ZhaWxlZCB0byBsb2FkIGVudGl0eSBmcm9tIHRhYmxlCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCS8vb3B0aW9uRGF0YSBpcyBub3QgYW4gYXJyYXksIG9yIHRoZSBhcGkga2V5IHdhcyBub3Qgc2VudAoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBzZXR0aW5nczogSW5jb3JyZWN0IG9wdGlvbnMgZm9ybWF0IG9yIEFQSSBLZXkgbm90IHNlbnQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCgkvKioKCSAqIENvbmZpZ3VyZXMgdGhlIGFjdGl2ZWNhbXBhaWduIHByb3ZpZGVyIGluIG9yZGVyIHRvIGRvIHRoZSBpbml0aWFsIGNvbm5lY3QKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6Y29uZmlndXJlRnJvbU9wdGlvbnMoKQoJICogQHBhcmFtICRvcHRpb25EYXRhIEFycmF5IFRoZSB2YWx1ZXMgcG9zdGVkIGZyb20gdGhlIGZvcm0gcmVuZGVyZWQgYnkgcmVuZGVyT3B0aW9uc0RpYWxvZwoJICovCglwdWJsaWMgZnVuY3Rpb24gY29uZmlndXJlRnJvbU9wdGlvbnMoJG9wdGlvbkRhdGEpIAoJewoJCWlmICghaXNzZXQoJG9wdGlvbkRhdGFbJ2FjdGl2ZWNhbXBhaWduX2FwaV91cmwnXSkgfHwgIWlzc2V0KCRvcHRpb25EYXRhWydhY3RpdmVjYW1wYWlnbl9hcGlfa2V5J10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIGNvbm5lY3RpbmcgdG8gQWN0aXZlQ2FtcGFpZ24uIFBsZWFzZSBtYWtlIHN1cmUgeW91IGhhdmUgZW50ZXJlZCBhIFVSTCBhbmQgQVBJIEtleSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoKCQkkdGhpcy0+d3JhcHBlci0+c2V0QXBpVXJsKCRvcHRpb25EYXRhWydhY3RpdmVjYW1wYWlnbl9hcGlfdXJsJ10pOwoJCSR0aGlzLT53cmFwcGVyLT5zZXRBcGlLZXkoJG9wdGlvbkRhdGFbJ2FjdGl2ZWNhbXBhaWduX2FwaV9rZXknXSk7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoKCS8qKgoJICogQWRkcyBhIG1lbWJlciB0byBhIGxpc3QKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6YWRkTWVtYmVyVG9MaXN0KCkKCSAqIEBwYXJhbSAkZW1haWwgU3RyaW5nIFRoZSBlbWFpbCBhZGRyZXNzIHRvIGFkZCB0byB0aGUgbGlzdAoJICogQHBhcmFtICRsaXN0SWQgU3RyaW5nIFRoZSBpZCBvZiB0aGUgbGlzdAoJICogQHBhcmFtICRpbmNsdWRlQnVuZGxlSW5mbyBpbmRpY2F0ZXMgaWYgYnVuZGxlIGluZm9ybWF0aW9uIHNob3VsZCBiZSBwYXNzZWQKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGFkZE1lbWJlclRvTGlzdCgkZW1haWwsJGxpc3RJZCwkaW5jbHVkZUJ1bmRsZUluZm89dHJ1ZSkgCgl7CgkJJG1lbWJlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRlbWFpbCk7CgkJCgkJaWYgKCEkbWVtYmVyLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZmluZCBtZW1iZXIgd2l0aCBlbWFpbCB7JGVtYWlsfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSR0aGlzLT5hZGRSZXF1aXJlZE1lcmdlVmFycygkbGlzdElkLCRpbmNsdWRlQnVuZGxlSW5mbyk7CgkJJG1lcmdlX3ZhcnNfcmVzcG9uc2UgPSAkdGhpcy0+Z2V0TWVtYmVyRGF0YVRvTWVyZ2UoJGVtYWlsLCRpbmNsdWRlQnVuZGxlSW5mbyk7CgkJaWYgKCRtZXJnZV92YXJzX3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpIAoJCXsKCQkJcmV0dXJuICRtZXJnZV92YXJzX3Jlc3BvbnNlOwoJCX0KCQkkcmV0dmFsID0gJHRoaXMtPndyYXBwZXItPmxpc3RTdWJzY3JpYmUoJGxpc3RJZCwgJGVtYWlsLCAkbWVyZ2VfdmFyc19yZXNwb25zZS0+bWVzc2FnZSwgdHJ1ZSk7CgkJaWYgKCR0aGlzLT53cmFwcGVyLT5nZXRFcnJvckNvZGUoKSkKCQl7CgkJCSRsaXN0TmFtZSA9ICIiOwoJCQkkbGlzdEZyaWVuZGx5TmFtZXMgPSAkdGhpcy0+Z2V0TGlzdHMoKTsKCQkJaWYoaXNzZXQoJGxpc3RGcmllbmRseU5hbWVzLT5tZXNzYWdlWyRsaXN0SWRdKSl7CgkJCQkkbGlzdE5hbWUgPSAoJGxpc3RGcmllbmRseU5hbWVzLT50eXBlICE9IE1NX1Jlc3BvbnNlOjokRVJST1IpPyJ7JGxpc3RGcmllbmRseU5hbWVzLT5tZXNzYWdlWyRsaXN0SWRdfSAoeyRsaXN0SWR9KSI6JGxpc3RJZDsKCQkJfQoJCQlyZXR1cm4gJHRoaXMtPmdldEVycm9yKCJFcnJvciBhZGRpbmcgeyRlbWFpbH0gdG8gbGlzdCB7JGxpc3ROYW1lfSAiKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoKCS8qKgoJICogUmVtb3ZlcyBhIG1lbWJlciBmcm9tIGEgbGlzdAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpyZW1vdmVNZW1iZXJGcm9tTGlzdCgpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyB0byByZW1vdmUgZnJvbSB0aGUgbGlzdAoJICogQHBhcmFtICRsaXN0SWQgU3RyaW5nIFRoZSBpZCBvZiB0aGUgbGlzdAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGVtYWlsLCAkbGlzdElkKSAgCgl7CgkJaWYgKGVtcHR5KCRsaXN0SWQpKSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkKCQkkcmV0dmFsID0gJHRoaXMtPndyYXBwZXItPmxpc3RVbnN1YnNjcmliZSgkbGlzdElkLCRlbWFpbCx0cnVlKTsKCQlpZiAoJHRoaXMtPndyYXBwZXItPmdldEVycm9yQ29kZSgpKQoJCXsKCQkJLy90cnkgdG8gZ2V0IHRoZSBsaXN0IG5hbWUsIGJ1dCBpZiBub3QgKHdlIGFyZSBhbHJlYWR5IGluIGFuIGVycm9yIHN0YXR1cykganVzdCB1c2UgdGhlIGlkCgkJCSRsaXN0RnJpZW5kbHlOYW1lcyA9ICR0aGlzLT5nZXRMaXN0cygpOwoJCQkkbGlzdE5hbWUgPSAoKCRsaXN0RnJpZW5kbHlOYW1lcy0+dHlwZSAhPSBNTV9SZXNwb25zZTo6JEVSUk9SKSYmaXNzZXQoJGxpc3RGcmllbmRseU5hbWVzLT5tZXNzYWdlWyRsaXN0SWRdKSk/InskbGlzdEZyaWVuZGx5TmFtZXMtPm1lc3NhZ2VbJGxpc3RJZF19ICh7JGxpc3RJZH0pIjokbGlzdElkOwoJCQlyZXR1cm4gJHRoaXMtPmdldEVycm9yKCJFcnJvciByZW1vdmluZyB7JGVtYWlsfSBmcm9tIGxpc3QgeyRsaXN0TmFtZX0iKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCX0KCgkvKioKCSAqIENoYW5nZXMgYSBtZW1iZXJzIGxpc3Qgc3Vic2NyaXB0aW9uIGJhc2VkIG9uIGEgY2hhbmdlIGluIG1lbWJlcnNoaXAgbGV2ZWwuIAoJICogUGVyZm9ybXMgYSByZW1vdmUsIGxvb2tzIHVwIHRoZSBsaXN0IChpZiBhbnkpIGZvciB0aGUgbmV3IG1lbWJlcnNoaXAgbGV2ZWwsIGFuZCB0aGVuIHBlcmZvcm1zIGFuIGFkZAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIG1lbWJlciB0byBiZSB1cGRhdGVkCgkgKiBAcGFyYW0gJG5ld01lbWJlclR5cGUgaW50IFRoZSBtZW1iZXIgdHlwZSBpZCBvZiB0aGUgbWVtYmVyJ3MgbmV3IG1lbWJlciB0eXBlCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoJGVtYWlsLCRuZXdNZW1iZXJUeXBlKSAKCXsKCQkkb3ZlcmFsbF9zdWNjZXNzID0gdHJ1ZTsKCQkkb3ZlcmFsbF9zdGF0dXMgPSAiIjsKCQkkbGlzdEZyaWVuZGx5TmFtZXMgPSAkdGhpcy0+Z2V0TGlzdHMoKTsKCQkKCQkkbWVtYmVyID0gTU1fVXNlcjo6ZmluZEJ5RW1haWwoJGVtYWlsKTsKCQkKCQlpZiAoISRtZW1iZXItPmlzVmFsaWQoKSkgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZmluZCBtZW1iZXIgd2l0aCBlbWFpbCB7JGVtYWlsfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRvbGRMaXN0SWQgPSAkbWVtYmVyLT5nZXRTdWJzY3JpYmVkTGlzdElkKCk7CgkJaWYgKCFlbXB0eSgkb2xkTGlzdElkKSkKCQl7CgkJCSRvbGRSZW1vdmVSZXN1bHQgPSAkdGhpcy0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGVtYWlsLCRvbGRMaXN0SWQpOwoJCQlpZiAoJG9sZFJlbW92ZVJlc3VsdCA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCQl7CgkJCQkkb3ZlcmFsbF9zdWNjZXNzID0gZmFsc2U7CgkJCQkkb3ZlcmFsbF9zdGF0dXMgLj0gInskb2xkUmVtb3ZlUmVzdWx0LT5tZXNzYWdlfVxuIjsKCQkJfQoJCX0KCQkKCQkvL2NvbnRpbnVlIG9uIGRlc3BpdGUgc3RhdGUgb2YgcmVtb3ZlCgkJJG5ld0xpc3RJZCA9IChlbXB0eSgkbmV3TWVtYmVyVHlwZSkpPyR0aGlzLT5nZXRMaXN0SWRGb3JNZW1iZXIoJGVtYWlsKTokdGhpcy0+Z2V0TGlzdElkRm9yTWVtYmVyc2hpcExldmVsKCRuZXdNZW1iZXJUeXBlKTsKCQlpZiAoJG5ld0xpc3RJZC0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJJG92ZXJhbGxfc3RhdHVzLj0kbmV3TGlzdElkLT5tZXNzYWdlOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRvdmVyYWxsX3N0YXR1cyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJG5ld0xpc3RJZCA9ICRuZXdMaXN0SWQtPm1lc3NhZ2U7CgkJaWYgKGVtcHR5KCRuZXdMaXN0SWQpKQoJCXsKCQkJLy9ubyBsaXN0IHRvIGFkZCB0bywgc28gc3VjY2VzcwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCQoJCSRuZXdBZGRSZXN1bHQgPSAkdGhpcy0+YWRkTWVtYmVyVG9MaXN0KCRlbWFpbCwgJG5ld0xpc3RJZCk7CgkJaWYgKCRuZXdBZGRSZXN1bHQgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQl7CgkJCSRvdmVyYWxsX3N1Y2Nlc3MgPSBmYWxzZTsKCQkJJG92ZXJhbGxfc3RhdHVzIC49ICJ7JG5ld0FkZFJlc3VsdC0+bWVzc2FnZX1cbiI7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG92ZXJhbGxfc3RhdHVzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQllbHNlIAoJCXsKCQkJLy9zdWNjZXNzCgkJCWlmICghJG92ZXJhbGxfc3VjY2VzcykKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiT3BlcmF0aW9uIHN1Y2NlZWRlZCwgYnV0IHRoZSBmb2xsb3dpbmcgZXJyb3JzIHdlcmUgZW5jb3VudGVyZWQ6IHskb3ZlcmFsbF9zdGF0dXN9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJPcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwiKTsJCgkJCX0KCQl9Cgl9CgoJLyoqCgkgKiBVcGRhdGVzIGEgbWVtYmVycyBpbmZvcm1hdGlvbiBhdHRhY2hlZCB0byBhIHN1YnNjcmliZWQgbGlzdAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjp1cGRhdGVNZW1iZXIoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIG9mIHRoZSBtZW1iZXIgdG8gYmUgdXBkYXRlZAoJICogQHBhcmFtICRsaXN0SWQgU3RyaW5nIFRoZSBpZCBvZiB0aGUgbGlzdCB3aGVyZSB0aGUgbWVtYmVyJ3Mgc3Vic2NyaXB0aW9uIGluZm8gc2hvdWxkIGJlIHVwZGF0ZWQKCSAqIEBwYXJhbSAkbmV3RW1haWwgU3RyaW5nIChvcHRpb25hbCkgLSBUaGUgbWVtYmVyJ3MgbmV3IGVtYWlsIGluIHRoZSBjYXNlIHdoZXJlIHRoZSB1cGRhdGUgaXMgYW4gZW1haWwgYWRkcmVzcyBjaGFuZ2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZU1lbWJlcigkZW1haWwsICRsaXN0SWQsJG5ld0VtYWlsPSIiKSAKCXsKCQlpZiAoZW1wdHkoJGxpc3RJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7IC8vbm8gbGlzdCB3YXMgcGFzc2VkIGluLCBzbyBzdWNjZXNzCgkJfQoJCSR0aGlzLT5hZGRSZXF1aXJlZE1lcmdlVmFycygkbGlzdElkKTsKCQkkbWVyZ2VfdmFyc19yZXNwb25zZSA9ICR0aGlzLT5nZXRNZW1iZXJEYXRhVG9NZXJnZShlbXB0eSgkbmV3RW1haWwpPyRlbWFpbDokbmV3RW1haWwpOwoJCWlmICgkbWVyZ2VfdmFyc19yZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJcmV0dXJuICRtZXJnZV92YXJzX3Jlc3BvbnNlOwoJCX0KCQkkbWVyZ2VfdmFycyA9ICRtZXJnZV92YXJzX3Jlc3BvbnNlLT5tZXNzYWdlOwoJCWlmICghZW1wdHkoJG5ld0VtYWlsKSkKCQl7CgkJCSRtZXJnZV92YXJzWydORVctRU1BSUwnXSA9ICRuZXdFbWFpbDsKCQl9CgkJJHJldHZhbCA9ICR0aGlzLT53cmFwcGVyLT5saXN0VXBkYXRlTWVtYmVyKCRsaXN0SWQsICRlbWFpbCwgJG1lcmdlX3ZhcnMpOwoJCWlmICgkdGhpcy0+d3JhcHBlci0+Z2V0RXJyb3JDb2RlKCkpCgkJewoJCQkkbGlzdEZyaWVuZGx5TmFtZXMgPSAkdGhpcy0+Z2V0TGlzdHMoKTsKCQkJJGxpc3ROYW1lID0gKCgkbGlzdEZyaWVuZGx5TmFtZXMtPnR5cGUgIT0gTU1fUmVzcG9uc2U6OiRFUlJPUikgJiYgaXNzZXQoJGxpc3RGcmllbmRseU5hbWVzLT5tZXNzYWdlWyRsaXN0SWRdKSk/InskbGlzdEZyaWVuZGx5TmFtZXMtPm1lc3NhZ2VbJGxpc3RJZF19ICh7JGxpc3RJZH0pIjokbGlzdElkOwoJCQlyZXR1cm4gJHRoaXMtPmdldEVycm9yKCJFcnJvciB1cGRhdGluZyBpbmZvcm1hdGlvbiBmb3IgeyRlbWFpbH0gb24gbGlzdCB7JGxpc3ROYW1lfSAiKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCX0KCgkvKioKCSAqIAoJICogR2V0cyB0aGUgbWVtYmVyIGRhdGEgdG8gbWVyZ2UuIEN1cnJlbnRseSB0aGlzIGlzIGZpcnN0X25hbWUsIGxhc3RfbmFtZSwgZW1haWwsIGFuZCBhbnkgYWNjZXNzIHRhZ3MKCSAqIEBwYXJhbSBTdHJpbmcgJGVtYWlsIFRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSBtZW1iZXIKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyBhbiBhcnJheSBvZiBtZXJnZSBkYXRhIGFzIGtleS12YWx1ZSBwYWlycyBvbiBzdWNjZXNzLCBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBlcnJvciBzdGF0ZSBvdGhlcndpc2UKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRNZW1iZXJEYXRhVG9NZXJnZSgkZW1haWwsJGluY2x1ZGVCdW5kbGVJbmZvPXRydWUpCgl7CgkJJHVzZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkZW1haWwpOwoJCQoJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgdXNlciBpbmZvcm1hdGlvbiBmb3IgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCSRtZXJnZV92YXJzID0gYXJyYXkoIkZOQU1FIj0+JHVzZXItPmdldEZpcnN0TmFtZSgpLCAiTE5BTUUiPT4kdXNlci0+Z2V0TGFzdE5hbWUoKSk7CgkJCgkJaWYoJGluY2x1ZGVCdW5kbGVJbmZvKQoJCXsKCQkJLy9zZXQgYWxsIGJ1bmRsZXMgZmFsc2UgdG8gc3RhcnQKCQkJZm9yZWFjaCAoTU1fQnVuZGxlOjpnZXRCdW5kbGVTaG9ydE5hbWVzKCkgYXMgJHJlcVRhZz0+JHJlcU5hbWUpCgkJCXsKCQkJCSRtZXJnZV92YXJzWyRyZXFUYWddID0gZmFsc2U7CgkJCX0KCQkJCgkJCS8vbm93IHNldCB0aGUgb25lcyB0aGUgdXNlciBoYXMgZXF1YWwgdG8gdHJ1ZQoJCQkkYXBwbGllZEJ1bmRsZXMgPSAkdXNlci0+Z2V0QXBwbGllZEJ1bmRsZXMoKTsKCQkJCgkJCWZvcmVhY2ggKCRhcHBsaWVkQnVuZGxlcyBhcyAkYXBwbGllZEJ1bmRsZSkKCQkJewoJCQkJJGJ1bmRsZSA9ICRhcHBsaWVkQnVuZGxlLT5nZXRCdW5kbGUoKTsKCQkJCQkKCQkJCWlmKCRidW5kbGUtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkc2hvcnROYW1lID0gJGJ1bmRsZS0+Z2V0U2hvcnROYW1lKCk7CgkJCQkJJG1lcmdlX3ZhcnNbJHNob3J0TmFtZV0gPSB0cnVlOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG1lcmdlX3ZhcnMpOwoJfQoKCS8qKgoJICogCgkgKiBBZGRzIG1lcmdlIHZhcmlhYmxlcyB0byB0aGUgbGlzdCBpZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBwcmVzZW50LiBUaGlzIGlzIGNydWNpYWwsIGJlY2F1c2UgdHJ5aW5nIHRvIHVwZGF0ZSBhIG1lcmdlIHZhciB0aGF0IGlzbid0CgkgKiBjdXJyZW50bHkgYXR0YWNoZWQgdG8gdGhlIGxpc3Qgd2lsbCBjYXVzZSBhbiBlcnJvci4gQ3VycmVudGx5IHVzZWQgdG8gYWRkIGFjY2VzcyB0YWdzCgkgKiBAcGFyYW0gU3RyaW5nICRsaXN0SWQgVGhlIGlkIG9mIHRoZSBsaXN0IHRvIGFkZCB0aGUgbWVyZ2UgdmFycyB0bwoJICogQHBhcmFtICRpbmNsdWRlQnVuZGxlSW5mbyBpbmRpY2F0ZXMgaWYgYnVuZGxlIGluZm9ybWF0aW9uIHNob3VsZCBiZSBwYXNzZWQKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBhZGRSZXF1aXJlZE1lcmdlVmFycygkbGlzdElkLCRpbmNsdWRlQnVuZGxlSW5mbz10cnVlKQoJewoJCSRtdkNhY2hlID0gJHRoaXMtPmdldExpc3RNZXJnZVZhcnMoJGxpc3RJZCk7CgkJaWYgKCRtdkNhY2hlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJG12Q2FjaGU7CgkJfQoJCSRtdkNhY2hlID0gJG12Q2FjaGUtPm1lc3NhZ2U7CgkJCgkJaWYoJGluY2x1ZGVCdW5kbGVJbmZvKQoJCXsKCQkJZm9yZWFjaCAoTU1fQnVuZGxlOjpnZXRCdW5kbGVTaG9ydE5hbWVzKCkgYXMgJHJlcVRhZz0+JHJlcU5hbWUpCgkJCXsKCQkJCWlmICghaXNzZXQoJG12Q2FjaGVbJHJlcVRhZ10pKQoJCQkJewoJCQkJCS8vYWRkIHRoaXMgbWVyZ2VWYXIgdG8gdGhlIGxpc3QKCQkJCQkkcmV0dmFsID0gJHRoaXMtPndyYXBwZXItPmxpc3RNZXJnZVZhckFkZCgkbGlzdElkLCAkcmVxVGFnLCAkcmVxTmFtZSxhcnJheSgiZGVmYXVsdF92YWx1ZSI9PiJGQUxTRSIpKTsKCQkJCQlpZiAoKCRyZXR2YWwgPT09IGZhbHNlKSB8fCAoJHRoaXMtPndyYXBwZXItPmdldEVycm9yQ29kZSgpKSkKCQkJCQl7CgkJCQkJCXJldHVybiAkdGhpcy0+Z2V0RXJyb3IoIkVycm9yIGFkZGluZyAkcmVxVGFnIG1lcmdlX3ZhciB0byB0aGUgbGlzdCIpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCX0KCgkvKioKCSAqIFJldHVybnMgdGhlIG1lcmdlX3ZhcnMgaW4gZXNzZW50aWFsbHkgdGhlIHNhbWUgZm9ybWF0IHRoYXQgYWN0aXZlY2FtcGFpZ24gZG9lcywgZXhjZXB0IHRoaXMgdGltZSB0aGV5IGFyZSBrZXllZCBieSB0aGUgdGFnCgkgKiBAcGFyYW0gU3RyaW5nICRsaXN0SWQgVGhlIGlkIG9mIHRoZSBsaXN0IHRvIHJldHJpZXZlIG1lcmdlX3ZhcnMgZm9yCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0TGlzdE1lcmdlVmFycygkbGlzdElkKQoJewoJCSRtdkNhY2hlID0gYXJyYXkoKTsKCQkkbXZzID0gJHRoaXMtPndyYXBwZXItPmxpc3RNZXJnZVZhcnMoJGxpc3RJZCk7CgkJaWYgKCR0aGlzLT53cmFwcGVyLT5nZXRFcnJvckNvZGUoKSkKCQl7CgkJCXJldHVybiAkdGhpcy0+Z2V0RXJyb3IoIkVycm9yIHJldHJpZXZpbmcgbGlzdCBtZXJnZSB2YXJzIik7CgkJfQoJCWVsc2UKCQl7CgkJCWZvcmVhY2ggKCRtdnMgYXMgJGk9PiRtZXJnZVZhcikKCQkJewoJCQkJJG12Q2FjaGVbJG1lcmdlVmFyWyd0YWcnXV0gPSAkbWVyZ2VWYXI7CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkbXZDYWNoZSk7CgkJfQoJfQoKCS8qKgoJICogCgkgKiBUaGlzIGlzIGEgY29udmVuaWVuY2UgbWV0aG9kIG1lYW50IHRvIGJlIHVzZWQgd2hlbiBhcGkgY2FsbHMgZmFpbC4gSXQgdGFrZXMgdGhlIHN1cHBsaWVkIGVycm9yIHN0cmluZywgYW5kIAoJICogYWRkIHRoZSBhcGkgZmFpbHVyZSBjb2RlIGFuZCBtZXNzYWdlLCBhbmQgd3JhcHMgdGhlIGVudGlyZSBzdHJpbmcgaW4gYSBNTV9SZXNwb25zZSBvYmplY3Qgd2l0aCBhbiBFcnJvciBzdGF0dXMKCSAqIEBwYXJhbSBTdHJpbmcgJGVycm9yU3RyaW5nCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0RXJyb3IoJGVycm9yU3RyaW5nKSAKCXsKCQkkZXJyb3JTdHJpbmcgLj0gIiAoQ29kZT17JHRoaXMtPndyYXBwZXItPmdldEVycm9yQ29kZSgpfSwgTWVzc2FnZT17JHRoaXMtPndyYXBwZXItPmdldEVycm9yTWVzc2FnZSgpfSI7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZXJyb3JTdHJpbmcsIE1NX1JFU1BPTlNFOjokRVJST1IpOwoJfQoKfQ==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(148, 'defaultorderrequest', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fRGVhZnVsdE9yZGVyUmVxdWVzdCBpcyByZXNwb25zaWJsZSBmb3IgcHJvY2Vzc2luZyBvcmRlciBkYXRhIHRoYXQgY29tZXMgZnJvbSBhIGNoZWNrb3V0IGZvcm0gb3IgZnJvbSB0aGUgQVBJLgogKiBUaGVyZSBhcmUgdGhyZWUgd2F5cyBhIG9yZGVyIHdpbGwgYmUgcHJvY2Vzc2VkIHRocm91Z2ggdGhpcyBjbGFzcy4gMSkgYSBjdXN0b21lciBzdWJtaXR0aW5nIGEgY2hlY2tvdXQgZm9ybQogKiAyKSBhbiBhZG1pbmlzdHJhdG9yIHN1Ym1pdHRpbmcgYSBjaGVja291dCBmb3JtIHRvIHBsYWNlIGFuIG9yZGVyIGZvciBhIGN1c3RvbWVyIChpLmUuICRpc0N1c3RvbWVyU3VwcG9ydE9yZGVyKQogKiAzKSB0aGUgQVBJIHN1Ym1pdHRpbmcgYSByZXF1ZXN0IChpLmUuICRpc0FwaVJlcXVlc3QpLiBTbGlnaHRseSBkaWZmZXJlbnQgYmVoYXZpb3JzIHdpbGwgYmUgcGVyZm9ybWVkIHRocm91Z2hvdXQgdGhlIAogKiBjb2RlIGJhc2VkIG9uIHRoZSAkaXNDdXN0b21lclN1cHBvcnRPcmRlciBhbmQgJGlzQXBpUmVxdWVzdCBwcm9wZXJ0aWVzLgogKi8KCmNsYXNzIE1NX0RlZmF1bHRPcmRlclJlcXVlc3QgZXh0ZW5kcyBNTV9PcmRlclJlcXVlc3QKewkKCXByaXZhdGUgJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIgPSBmYWxzZTsKCXByaXZhdGUgJHBheW1lbnRTZXJ2aWNlID0gbnVsbDsKCXByaXZhdGUgJG9yZGVyID0gbnVsbDsKCXByaXZhdGUgJGNyZWRpdENhcmRJbmZvID0gbnVsbDsKCXByaXZhdGUgJGRlYnVnTW9kZSA9IGZhbHNlOwoJcHJpdmF0ZSAkY2hlY2tvdXRVcmwgPSAiIjsKCXByaXZhdGUgJGlzRnJlZSA9IGZhbHNlOwoJcHJpdmF0ZSAkaXNHaWZ0ID0gZmFsc2U7Cglwcml2YXRlICRkb0NvbXAgPSBmYWxzZTsKCXByaXZhdGUgJGlzTmV3TWVtYmVyID0gdHJ1ZTsKCXByaXZhdGUgJG1lbWJlcnNoaXBMZXZlbElkID0gMDsKCXByaXZhdGUgJG1lbWJlcnNoaXA7Cglwcml2YXRlICRkb0NoYW5nZU1lbWJlcnNoaXAgPSBmYWxzZTsKCXByaXZhdGUgJGN1c3RvbURhdGEgPSBhcnJheSgpOwoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIHJldHJpZXZlcyBhbiBpbnN0YW5jZSBvZiBNTV9QYXltZW50U2VydmljZSBhbmQgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBNTV9PcmRlciBhbmQgCgkgKiBwb3B1bGF0ZXMgaXQgd2l0aCB0aGUgb3JkZXIgZGF0YS4KCSAqIAoJICogQHNlZSBNTV9PcmRlclJlcXVlc3Q6OnByb2Nlc3NSZXF1ZXN0KCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NSZXF1ZXN0KCkKCXsJCgkJJHRoaXMtPm9yZGVyID0gbmV3IE1NX09yZGVyKCk7CgkJCgkJLy8gaXMgZ2lmdD8KCQlpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2lzX2dpZnQiXSkgJiYgaW50dmFsKCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1faXNfZ2lmdCJdKSA9PSAxKQoJCXsKCQkJJHRoaXMtPmlzR2lmdCA9IHRydWU7CgkJfQoJCQoJCWlmKCEkdGhpcy0+aXNBcGlSZXF1ZXN0KQoJCXsKCQkJLy8gZ2V0IGNoZWNrb3V0IFVSTAoJCQkkdXJsID0gIiI7CgkJCWlmKGlzc2V0KCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fY2hlY2tvdXRfdXJsIl0pKQoJCQl7CgkJCQkkdXJsID0gJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9jaGVja291dF91cmwiXTsKCQkJfQoJCQkkdGhpcy0+Y2hlY2tvdXRVcmwgPSAkdXJsOwoJCQkKCQkJLy8gaXMgZGVidWcgbW9kZT8KCQkJaWYoaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9jaGVja291dF9kZWJ1Z19tb2RlIl0pICYmICR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fY2hlY2tvdXRfZGVidWdfbW9kZSJdID09ICIxIikKCQkJewoJCQkJJHRoaXMtPmRlYnVnTW9kZSA9IHRydWU7CgkJCQkKCQkJCWVjaG8gdmFyX2R1bXAoJHRoaXMtPnJlcXVlc3REYXRhKTsKCQkJCWV4aXQ7CgkJCX0KCQkJCgkJCS8vIGNoZWNrIGNhcHRjaGEKCQkJaWYgKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0NBUFRDSEFfRU5BQkxFRCkgPT0gIjEiKQoJCQl7CgkJCQlpZiAoaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyJnLXJlY2FwdGNoYS1yZXNwb25zZSJdKSkKCQkJCXsKCQkJCQlyZXF1aXJlX29uY2UgTU1fUExVR0lOX0FCU1BBVEggLiAnL2xpYi9yZWNhcHRjaGEvYXV0b2xvYWQucGhwJzsKCQkJCQkKCQkJCQkkcmVjYXB0Y2hhID0gbmV3IFxSZUNhcHRjaGFcUmVDYXB0Y2hhKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0NBUFRDSEFfUFJJVkFURV9LRVkpKTsKCQkJCQkKCQkJCQkkcmVzcCA9ICRyZWNhcHRjaGEtPnZlcmlmeSgkdGhpcy0+cmVxdWVzdERhdGFbImctcmVjYXB0Y2hhLXJlc3BvbnNlIl0sICRfU0VSVkVSWydSRU1PVEVfQUREUiddKTsKCQkJCQkKCQkJCQlpZiAoISRyZXNwLT5pc1N1Y2Nlc3MoKSkKCQkJCQl7CgkJCQkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkJCSR0aGlzLT5zdGF0ZS0+bWVzc2FnZSA9ICJJbnZhbGlkIGNhcHRjaGEgZW50cnkiOwoJCQkJCQlyZXR1cm4gJHRoaXM7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZSAKCQkJCXsKCQkJCQkvL2NhcHRjaGEgd2Fzbid0IHNlbnQsIGFuZCBpdCBzaG91bGQgaGF2ZSBiZWVuLgoJCQkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkJJHRoaXMtPnN0YXRlLT5tZXNzYWdlID0gIkludmFsaWQgY2FwdGNoYSBlbnRyeSI7CgkJCQkJcmV0dXJuICR0aGlzOwoJCQkJfQoJCQl9CgkJCQoJCQkvLyBpcyBjdXN0b21lciBzdXBwb3J0IG9yZGVyPwoJCQlpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2lzX2N1c3RvbWVyX3N1cHBvcnRfb3JkZXIiXSkgJiYgJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9pc19jdXN0b21lcl9zdXBwb3J0X29yZGVyIl0gPT0gIjEiKQoJCQl7CgkJCQlnbG9iYWwgJGN1cnJlbnRfdXNlcjsKCQkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpmaW5kQnlVc2VySWQoJGN1cnJlbnRfdXNlci0+SUQpOwoJCQkJaWYoaXNfdXNlcl9sb2dnZWRfaW4oKSAmJiAkZW1wbG95ZWUtPmNhblBsYWNlU3VwcG9ydE9yZGVyKCkpCgkJCQl7CgkJCQkJJHRoaXMtPmlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIgPSB0cnVlOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkJJHRoaXMtPnN0YXRlLT5tZXNzYWdlID0gIllvdSBkb24ndCBoYXZlIHBlcm1pc3Npb24gdG8gcGxhY2UgYW4gb3JkZXIgZm9yIGFub3RoZXIgdXNlciI7CgkJCQkJcmV0dXJuICR0aGlzOwoJCQkJfQoJCQl9CgkJfQoJCQoJCS8vIGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VzdG9tZXIgaXMgc2lnbmluZyB1cCBmb3IgYSBmcmVlIG1lbWJlcnNoaXAKCQlpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX21lbWJlcnNoaXBfbGV2ZWxfaWQiXSkgJiYgJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9tZW1iZXJzaGlwX2xldmVsX2lkIl0gIT0gMCkKCQl7CgkJCSR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCA9ICR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fbWVtYmVyc2hpcF9sZXZlbF9pZCJdOwoJCQkJCgkJCS8vIGNoZWNrIHRvIG1ha2Ugc3VyZSBtZW1iZXJzaGlwIGlzIHZhbGlkIGFuZCBhY3RpdmUKCQkJJHRoaXMtPm1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCk7CgkJCQkKCQkJaWYoISR0aGlzLT5tZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkkdGhpcy0+c3RhdGUtPm1lc3NhZ2UgPSAiQ2Fubm90IGNvbXBsZXRlIG9yZGVyLiBNZW1iZXJzaGlwIGxldmVsIElEICciLiR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZC4iJyBpcyBub3QgdmFsaWQuIjsKCQkJCXJldHVybiAkdGhpczsKCQkJfQoJCQkJCgkJCWlmKCEkdGhpcy0+bWVtYmVyc2hpcC0+aXNBY3RpdmUoKSkKCQkJewoJCQkJJHRoaXMtPnN0YXRlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJCSR0aGlzLT5zdGF0ZS0+bWVzc2FnZSA9ICJDYW5ub3QgY29tcGxldGUgb3JkZXIuIE1lbWJlcnNoaXAgbGV2ZWwgJ3skdGhpcy0+bWVtYmVyc2hpcC0+Z2V0TmFtZSgpfScgaXMgbm90IGFjdGl2ZS4iOwoJCQkJcmV0dXJuICR0aGlzOwoJCQl9CgkJCQoJCQkkdGhpcy0+aXNGcmVlID0gJHRoaXMtPm1lbWJlcnNoaXAtPmlzRnJlZSgpOwoJCX0KCQkKCQlpZighJHRoaXMtPmlzRnJlZSkKCQl7CgkJCS8vIGRldGVybWluZSBwYXltZW50IHNlcnZpY2UKCQkJJHNlcnZpY2VUb2tlbiA9ICIiOwoJCQlpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2ZpZWxkX3BheW1lbnRfc2VydmljZSJdKSkKCQkJewoJCQkJJHNlcnZpY2VUb2tlbiA9ICR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fZmllbGRfcGF5bWVudF9zZXJ2aWNlIl07CgkJCX0KCQkJCgkJCS8vIGlmIHRoZSB0b2tlbiBpcyBub3Qgc2V0LCBhdHRlbXB0IHRvIHVzZSB0aGUgb25zaXRlIHBheW1lbnQgc2VydmljZQoJCQlpZigkc2VydmljZVRva2VuID09ICIiKQoJCQl7CgkJCQkkdGhpcy0+cGF5bWVudFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldE9uc2l0ZVBheW1lbnRTZXJ2aWNlKCk7CgkJCQlpZigkdGhpcy0+cGF5bWVudFNlcnZpY2UgPT0gbnVsbCkKCQkJCXsKCQkJCQkkdGhpcy0+cGF5bWVudFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldE9mZnNpdGVQYXltZW50U2VydmljZSgpOyAKCQkJCX0gCgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdGhpcy0+cGF5bWVudFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldFBheW1lbnRTZXJ2aWNlKCRzZXJ2aWNlVG9rZW4pOwoJCQl9CgkJCQoJCQkvLyB2YWxpZGF0ZSBwYXltZW50IHNlcnZpY2UKCQkJaWYoJHRoaXMtPnBheW1lbnRTZXJ2aWNlKQoJCQl7CgkJCQlpZighJHRoaXMtPnBheW1lbnRTZXJ2aWNlLT5pc0FjdGl2ZSgpKQoJCQkJewoJCQkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkJJHRoaXMtPnN0YXRlLT5tZXNzYWdlID0gJHRoaXMtPnBheW1lbnRTZXJ2aWNlLT5nZXROYW1lKCkuIiBpcyBub3QgY29uZmlndXJlZCBmb3IgdGhpcyBzaXRlIjsKCQkJCQlyZXR1cm4gJHRoaXM7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdGhpcy0+c3RhdGUtPnR5cGUgPSBNTV9SZXNwb25zZTo6JEVSUk9SOwoJCQkJJHRoaXMtPnN0YXRlLT5tZXNzYWdlID0gIk5vICIuKCgkc2VydmljZVRva2VuID09ICIiKSA/ICJvbnNpdGUiIDogIm9mZnNpdGUiKS4iIHBheW1lbnQgbWV0aG9kcyBhcmUgY29uZmlndXJlZCBmb3IgdGhpcyBzaXRlIjsKCQkJCXJldHVybiAkdGhpczsKCQkJfQoJCQkKCQkJJHRoaXMtPm9yZGVyLT5zZXRQYXltZW50TWV0aG9kKCR0aGlzLT5wYXltZW50U2VydmljZSk7CgkJCQoJCQlpZiAoKCR0aGlzLT5wYXltZW50U2VydmljZS0+c3VwcG9ydHNGZWF0dXJlKE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OlRPS0VOX0VYQ0hBTkdFKSkgJiYgIWVtcHR5KCR0aGlzLT5yZXF1ZXN0RGF0YVsnbW1fZmllbGRfcGF5bWVudF90b2tlbiddKSkKCQkJewoJCQkJJHRoaXMtPmNyZWRpdENhcmRJbmZvID0gbmV3IE1NX1BheW1lbnRUb2tlbigkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2ZpZWxkX3BheW1lbnRfdG9rZW4iXSk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJHRoaXMtPmNyZWRpdENhcmRJbmZvID0gbmV3IE1NX0NhcmRJbmZvKCk7CgkJCQkkdGhpcy0+Y3JlZGl0Q2FyZEluZm8tPnNldENhcmROdW1iZXIoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9jY19udW1iZXIiKSk7CgkJCQkkdGhpcy0+Y3JlZGl0Q2FyZEluZm8tPnNldEV4cGlyYXRpb25Nb250aCgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX2NjX2V4cF9tb250aCIpKTsKCQkJCSR0aGlzLT5jcmVkaXRDYXJkSW5mby0+c2V0RXhwaXJhdGlvblllYXIoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9jY19leHBfeWVhciIpKTsKCQkJCSR0aGlzLT5jcmVkaXRDYXJkSW5mby0+c2V0Q1ZWKCR0aGlzLT5nZXRDaGVja291dEZvcm1WYWx1ZSgibW1fZmllbGRfY2NfY3Z2IikpOwoJCQl9CgkJfQoKCQkvLyBjb2xsZWN0IGZvcm0gZGF0YQoJCSR0aGlzLT5pc05ld01lbWJlciA9IHRydWU7IAoJCQoJCS8vIEFyZSBsb2dnZWQgb3V0IHB1cmNoYXNlcyBhbGxvd2VkCgkJJGFsbG93TG9nZ2VkT3V0UHVyY2hhc2VzID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQUxMT1dfTE9HR0VEX09VVF9QVVJDSEFTRVMpOwoJCQoJCS8vIGF0dGVtcHQgdG8gZmluZCB1c2VyIGJ5IElECgkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2ZpZWxkX3VzZXJfaWQiXSk7CgkJCgkJdHJ5CgkJewoJCQkvLyBVc2VyIGlzIG5vdCBsb2dnZWQgaW4sIGxldCdzIG1ha2Ugc29tZSBjaGVja3MgdG8gbWFrZSBzdXJlIHRoZXkgY2FuIHByb2NlZWQKCQkJaWYoISR1c2VyLT5pc1ZhbGlkKCkpCgkJCXsJCgkJCQkvLyBUcnkgdG8gbG9hZCBhIHZhbGlkIHdvcmRwcmVzcyB1c2VyIGJhc2VkIG9uIHRoZSBlbWFpbCB0aGUgdXNlciBlbnRlcmVkIGluCgkJCQkkd29yZHByZXNzVXNlckJ5RW1haWwgPSBnZXRfdXNlcl9ieSgnZW1haWwnLCAkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2ZpZWxkX2VtYWlsIl0pOwoJCQkJJHdvcmRwcmVzc1VzZXJCeUxvZ2luID0gZ2V0X3VzZXJfYnkoJ2xvZ2luJywgJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9maWVsZF9lbWFpbCJdKTsgLy8gU3BlY2lhbCBjYXNlIHNjZW5hcmlvIHdoZW4gdXNlciBpcyBpbiBUZXN0IERhdGEgbW9kZQoJCQkJJHN1Ym1pdHRlZFBhc3N3b3JkIAkgPSAkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX3Bhc3N3b3JkIik7CiAKCQkJCXN3aXRjaCh0cnVlKQoJCQkJewoJCQkJCWNhc2UgJHdvcmRwcmVzc1VzZXJCeUVtYWlsIElOU1RBTkNFT0YgV1BfVXNlcjoKCQkJCQkJJHdvcmRwcmVzc1VzZXIgPSAkd29yZHByZXNzVXNlckJ5RW1haWw7CgkJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCQljYXNlICR3b3JkcHJlc3NVc2VyQnlMb2dpbiBJTlNUQU5DRU9GIFdQX1VzZXI6CgkJCQkJCSR3b3JkcHJlc3NVc2VyID0gJHdvcmRwcmVzc1VzZXJCeUxvZ2luOwoJCQkJCQlicmVhazsKCQkJCQkJCgkJCQkJZGVmYXVsdDoKCQkJCQkJJHdvcmRwcmVzc1VzZXIgPSBudWxsOwoJCQkJCQlicmVhazsKCQkJCX0KCQkJCQoJCQkJaWYoIWlzX251bGwoJHdvcmRwcmVzc1VzZXIpKQoJCQkJewoJCQkJCS8vIE11c3QgYmUgYSB2YWxpZCB3b3JkcHJlc3MgdXNlciwgbm93IGxldCdzIGNoZWNrIHRvIG1ha2UgCgkJCQkJLy8gc3VyZSB0aGUgcGFzc3dvcmQgZW50ZXJlZCBpbiB3YXMgdGhlIGNvcnJlY3QgcGFzc3dvcmQKCQkJCQlpZighd3BfY2hlY2tfcGFzc3dvcmQoJHN1Ym1pdHRlZFBhc3N3b3JkLCR3b3JkcHJlc3NVc2VyLT5kYXRhLT51c2VyX3Bhc3MsJHdvcmRwcmVzc1VzZXItPklEKSkKCQkJCQl7CgkJCQkJCS8vIFBhc3N3b3JkIGVudGVyZWQgd2FzIGluY29ycmVjdAoJCQkJCQkkdGhpcy0+aXNOZXdNZW1iZXIgPSBmYWxzZTsKCQkJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkd29yZHByZXNzVXNlci0+SUQpOwoJCQkJCQkKCQkJCQkJLy8gY2hlY2tpbmcgaWYgdGhlIHVzZXIgaXMgYSBuZXcgbWVtYmVyIGJhc2VkIG9uIHRoZWlyIHN0YXR1cyAoYWNjb3VudHMgd2l0aCBwZW5kaW5nL2Vycm9yCgkJCQkJCS8vIHN0YXR1cyBhcmUgc3RpbGwgY29uc2lkZXJlZCBuZXcgYmVjYXVzZSB0aGV5J3ZlIG5ldmVyIGJlZW4gYWN0aXZlKQoJCQkJCQlpZigkdXNlci0+aXNWYWxpZCgpICYmIGluX2FycmF5KCR1c2VyLT5nZXRTdGF0dXMoKSwgYXJyYXkoTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OLCBNTV9TdGF0dXM6OiRFUlJPUikpKQoJCQkJCQl7CQoJCQkJCQkJJHRoaXMtPmlzTmV3TWVtYmVyID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQllbHNlIAoJCQkJCQl7CgkJCQkJCQkkZXJyb3JNc2cgPSAiVGhlcmUgaXMgYW4gZXhpc3RpbmcgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhlIGVtYWlsIHskdGhpcy0+cmVxdWVzdERhdGFbIm1tX2ZpZWxkX2VtYWlsIl19ICI7CgkJCQkJCQkkZXJyb3JNc2cgLj0gIiBidXQgdGhlIHBhc3N3b3JkIGVudGVyZWQgaXMgaW52YWxpZC4gUGxlYXNlIHRyeSBwbGFjaW5nIHlvdXIgb3JkZXIgYWdhaW4gdXNpbmcgdGhlIGNvcnJlY3QgcGFzc3dvcmQuIjsKCQkJCQkJCXRocm93IG5ldyBFeGNlcHRpb24oJGVycm9yTXNnKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkvLyBQYXNzd29yZCB3YXMgY29ycmVjdCwgbG9hZCBNTSB1c2VyCgkJCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHdvcmRwcmVzc1VzZXItPklEKTsKCQkJCQkJCgkJCQkJCS8vIGNoZWNraW5nIGlmIHRoZSB1c2VyIGlzIGEgbmV3IG1lbWJlciBiYXNlZCBvbiB0aGVpciBzdGF0dXMgKGFjY291bnRzIHdpdGggcGVuZGluZy9lcnJvciAKCQkJCQkJLy8gc3RhdHVzIGFyZSBzdGlsbCBjb25zaWRlcmVkIG5ldyBiZWNhdXNlIHRoZXkndmUgbmV2ZXIgYmVlbiBhY3RpdmUpCgkJCQkJCWlmKCFpbl9hcnJheSgkdXNlci0+Z2V0U3RhdHVzKCksIGFycmF5KE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTiwgTU1fU3RhdHVzOjokRVJST1IpKSkKCQkJCQkJewoJCQkJCQkJJHRoaXMtPmlzTmV3TWVtYmVyID0gZmFsc2U7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJLy8gRW1haWwgZW50ZXJlZCBpbiBkb2VzIG5vdCBtYXRjaCBhbnkgdmFsaWQgd29yZHByZXNzIHVzZXIgaW4gCgkJCQkJLy8gdGhlIHN5c3RlbSwgbXVzdCBiZSBhIG5ldyBhY2NvdW50LCBzdGFydCB1c2VyIHNldHVwIHByb2Nlc3MKCQkJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCk7CgkJCQkJJHVzZXItPnNldEVtYWlsKCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fZmllbGRfZW1haWwiXSk7CgkJCQkJJHVzZXItPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRQRU5ESU5HX0FDVElWQVRJT04pOwoJCQkJfQoJCQkJCgkJCQkvLyBMb2dnZWQgb3V0IHB1cmNoYXNlcyBhcmUgbm90IGFsbG93ZWQsIHRocm93IGVycm9yCgkJCQlpZigkYWxsb3dMb2dnZWRPdXRQdXJjaGFzZXMgIT0gIjEiICYmICEkdGhpcy0+aXNOZXdNZW1iZXIpCgkJCQl7CgkJCQkJLy8gaWYgdXNlciBpcyB2YWxpZCBhbiBhY2NvdW50IHN0YXR1cyBpcyBpbiBhIHN0YXRlIHdoZXJlIHRoZXkgY2FuJ3QgbG9naW4gdGhlbiBkb24ndCBwYXkgYXR0ZW50aW9uIHRvIHRoZSBhbGxvdwoJCQkJCS8vIGxvZ2dlZCBvdXQgcHVyY2hhc2VzIHNldHRpbmcKCQkJCQlpZighJHVzZXItPmlzVmFsaWQoKSB8fCAoJHVzZXItPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JENBTkNFTEVEICYmICR1c2VyLT5nZXRTdGF0dXMoKSAhPSBNTV9TdGF0dXM6OiRFUlJPUikpCgkJCQkJewoJCQkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJZb3UgbXVzdCBiZSBsb2dnZWQgaW50byB5b3VyIGFjY291bnQgaW4gb3JkZXIgdG8gc3VjY2Vzc2Z1bGx5IGNoZWNrb3V0Iik7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCWNhdGNoKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCSR0aGlzLT5zdGF0ZS0+dHlwZSAJID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJJHRoaXMtPnN0YXRlLT5tZXNzYWdlID0gJGUtPmdldE1lc3NhZ2UoKTsKCQkJcmV0dXJuICR0aGlzOwoJCX0KCQkJCQoJCQkvLyBjaGVja2luZyBpZiB0aGUgdXNlciBpcyBhIG5ldyBtZW1iZXIgYmFzZWQgb24gdGhlaXIgc3RhdHVzIChhY2NvdW50cyB3aXRoIHBlbmRpbmcvZXJyb3IgCgkJCS8vIHN0YXR1cyBhcmUgc3RpbGwgY29uc2lkZXJlZCBuZXcgYmVjYXVzZSB0aGV5J3ZlIG5ldmVyIGJlZW4gYWN0aXZlKQoJCQlpZigoJHVzZXItPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTikgJiYgKCR1c2VyLT5nZXRTdGF0dXMoKSAhPSBNTV9TdGF0dXM6OiRFUlJPUikpCgkJCXsKCQkJCSR0aGlzLT5pc05ld01lbWJlciA9IGZhbHNlOwoJCQkJCgkJCQkvLyBjaGVjayBpZiBoYW5kbGluZyBhIHJlcXVlc3QgZnJvbSBhbiBleGlzdGluZyBtZW1iZXIgdG8gY2hhbmdlIHRoZWlyIG1lbWJlcnNoaXAKCQkJCWlmKGlzc2V0KCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fbWVtYmVyc2hpcF9sZXZlbF9pZCJdKSAmJiAkdGhpcy0+cmVxdWVzdERhdGFbIm1tX21lbWJlcnNoaXBfbGV2ZWxfaWQiXSAhPSAwKQoJCQkJewoJCQkJCSR0aGlzLT5kb0NoYW5nZU1lbWJlcnNoaXAgPSBmYWxzZTsKCQkJCQoJCQkJCWlmKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSAhPSAkdGhpcy0+cmVxdWVzdERhdGFbIm1tX21lbWJlcnNoaXBfbGV2ZWxfaWQiXSkKCQkJCQl7CgkJCQkJCSR0aGlzLT5kb0NoYW5nZU1lbWJlcnNoaXAgPSB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJaWYoISR0aGlzLT5pc0FwaVJlcXVlc3QgJiYgJHRoaXMtPmRvQ2hhbmdlTWVtYmVyc2hpcCA9PSB0cnVlKQoJCQkJewoJCQkJCWdsb2JhbCAkY3VycmVudF91c2VyOwoJCQkJCQoJCQkJCS8vIGRldGVybWluZSBpZiB0aGlzIGlzIGFuIGFkbWluaXN0cmF0b3IgY2hhbmdpbmcgYSBtZW1iZXJzaGlwIGZvciBhIHVzZXIKCQkJCQkvLyBvciBhIHVzZXIgY2hhbmdpbmcgdGhlaXIgb3duIG1lbWJlcnNoaXAKCQkJCQlpZigkdGhpcy0+aXNDdXN0b21lclN1cHBvcnRPcmRlciA9PSB0cnVlKQoJCQkJCXsKCQkJCQkJLy8gY2hlY2sgdG8gZW5zdXJlIHRoYXQgY3VycmVudCB1c2VyIGhhcyBwZXJtaXNzaW9uCgkJCQkJCS8vIHRvIGNoYW5nZSBtZW1iZXJzaGlwcyBmb3Igb3RoZXIgdXNlcnMKCQkJCQkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmZpbmRCeVVzZXJJZCgkY3VycmVudF91c2VyLT5JRCk7CgkJCQkJCWlmKCFpc191c2VyX2xvZ2dlZF9pbigpIHx8ICEkZW1wbG95ZWUtPmNhblBsYWNlU3VwcG9ydE9yZGVyKCkpCgkJCQkJCXsKCQkJCQkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkJCQkkdGhpcy0+c3RhdGUtPm1lc3NhZ2UgPSAiWW91IGRvbid0IGhhdmUgc3VmZmljaWVudCBwZXJtaXNzaW9ucyB0byBwbGFjZSBhbiBvcmRlciBmb3IgYW5vdGhlciB1c2VyLiI7CgkJCQkJCQlyZXR1cm4gJHRoaXM7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJaWYoKCFpc3NldCgkY3VycmVudF91c2VyLT5JRCkpIHx8IChpc3NldCgkY3VycmVudF91c2VyLT5JRCkgJiYgaW50dmFsKCRjdXJyZW50X3VzZXItPklEKSAhPSBpbnR2YWwoJHVzZXItPmdldElkKCkpKSkKCQkJCQkJewoJCQkJCQkJLy8gaWYgTU0gaXMgbm90IGNvbmZpZ3VyZWQgdG8gYWxsb3cgbG9nZ2VkIG91dCB1c2VycyB0byBtYWtlIHB1cmNoYXNlcyBhZ2FpbnN0IHRoZWlyIGFjY291bnQsIHJldHVybiBhbiBlcnJvciBtZXNzYWdlCgkJCQkJCQkkYWxsb3dMb2dnZWRPdXRQdXJjaGFzZXMgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BTExPV19MT0dHRURfT1VUX1BVUkNIQVNFUyk7CgkJCQkJCQlpZigkYWxsb3dMb2dnZWRPdXRQdXJjaGFzZXMgIT0gIjEiKQoJCQkJCQkJewoJCQkJCQkJCS8vIGlmIHVzZXIgaXMgdmFsaWQgYW4gYWNjb3VudCBzdGF0dXMgaXMgaW4gYSBzdGF0ZSB3aGVyZSB0aGV5IGNhbid0IGxvZ2luIHRoZW4gZG9uJ3QgcGF5IGF0dGVudGlvbiB0byB0aGUgYWxsb3cKCQkJCQkJCQkvLyBsb2dnZWQgb3V0IHB1cmNoYXNlcyBzZXR0aW5nCgkJCQkJCQkJaWYoISR1c2VyLT5pc1ZhbGlkKCkgfHwgKCR1c2VyLT5nZXRTdGF0dXMoKSAhPSBNTV9TdGF0dXM6OiRDQU5DRUxFRCAmJiAkdXNlci0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokRVJST1IpKQoJCQkJCQkJCXsKCQkJCQkJCQkJJHRoaXMtPnN0YXRlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJCQkJCQkJJHRoaXMtPnN0YXRlLT5tZXNzYWdlID0gIkFuIGFjY291bnQgd2l0aCBlbWFpbCAneyR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fZmllbGRfZW1haWwiXX0nIGFscmVhZHkgZXhpc3RzIjsKCQkJCQkJCQkJcmV0dXJuICR0aGlzOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX3Byb2R1Y3RfaWQiXSk7CgkJCQoJCWlmKCR0aGlzLT5pc05ld01lbWJlcikKCQl7CQoJCQkkdXNlci0+c2V0UGFzc3dvcmQoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9wYXNzd29yZCIpKTsKCQkJJHVzZXItPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRQRU5ESU5HX0FDVElWQVRJT04pOwoJCQkKCQkJLy9hZGQgb3JpZ2luIGFmZmlsaWF0ZS9zdWJhZmZpbGlhdGUgaWRzCgkJCSR1c2VyLT5zZXRPcmlnaW5BZmZpbGlhdGVJZCgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX2FmZmlsaWF0ZV9pZCIpKTsKCQkJJHVzZXItPnNldE9yaWdpblN1YmFmZmlsaWF0ZUlkKCR0aGlzLT5nZXRDaGVja291dEZvcm1WYWx1ZSgibW1fZmllbGRfc3ViX2FmZmlsaWF0ZV9pZCIpKTsKCQl9CgkJCgkJJHVzZXJuYW1lID0gJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF91c2VybmFtZSIpOwoJCWlmKCFlbXB0eSgkdXNlcm5hbWUpKQoJCXsKCQkJJHVzZXItPnNldFVzZXJuYW1lKCR1c2VybmFtZSk7CgkJfQoJCQoJCSR1c2VyLT5zZXRGaXJzdE5hbWUoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9maXJzdF9uYW1lIikpOwoJCSR1c2VyLT5zZXRMYXN0TmFtZSgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX2xhc3RfbmFtZSIpKTsKCQkkdXNlci0+c2V0UGhvbmUoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9waG9uZSIpKTsKCQkKCQkkYmlsbGluZ0FkZHJlc3MgPSBuZXcgTU1fQ3VzdG9tZXJBZGRyZXNzKCR1c2VyLT5nZXRGaXJzdE5hbWUoKSwgJHVzZXItPmdldExhc3ROYW1lKCkpOwoJCSRiaWxsaW5nQWRkcmVzcy0+c2V0UGhvbmUoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9waG9uZSIpKTsKCQkkYmlsbGluZ0FkZHJlc3MtPnNldEFkZHJlc3NMaW5lMSgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzcyIpKTsKCQkkYmlsbGluZ0FkZHJlc3MtPnNldENpdHkoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9iaWxsaW5nX2NpdHkiKSk7CgkJJGJpbGxpbmdBZGRyZXNzLT5zZXRTdGF0ZSgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiKSk7CgkJJGJpbGxpbmdBZGRyZXNzLT5zZXRQb3N0YWxDb2RlKCR0aGlzLT5nZXRDaGVja291dEZvcm1WYWx1ZSgibW1fZmllbGRfYmlsbGluZ196aXAiKSk7CgkJJGJpbGxpbmdBZGRyZXNzLT5zZXRDb3VudHJ5KCR0aGlzLT5nZXRDaGVja291dEZvcm1WYWx1ZSgibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5IikpOyAKCQkKCQkvKgoJCSAqIEFjY29tbW9kYXRpbmcgZm9yIGJvdGggY2FzZXMgd2hlcmUgZnJlZSBtZW1iZXIgZm9ybSB1c2VzIG1tX2ZpZWxkX2JpbGxpbmdfZXF1YWxzX3NoaXBwaW5nIAoJCSAqIHdoaWxlIHRoZSBwYWlkIGZvcm1zIHVzZSBtbV9jaGVja2JveF9iaWxsaW5nX2VxdWFsc19zaGlwcGluZwoJCSAqLwoJCSRzaGlwcGluZ1NhbWVBc0JpbGxpbmcgPSB0cnVlOwoJCWlmKGlzc2V0KCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fZmllbGRfYmlsbGluZ19lcXVhbHNfc2hpcHBpbmciXSkpCgkJeyAKCQkJaWYoJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9maWVsZF9iaWxsaW5nX2VxdWFsc19zaGlwcGluZyJdID09ICIxIikKCQkJewoJCQkJJHNoaXBwaW5nU2FtZUFzQmlsbGluZyA9IHRydWU7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc2hpcHBpbmdTYW1lQXNCaWxsaW5nID0gZmFsc2U7CgkJCX0KCQl9CgkJZWxzZSBpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2NoZWNrYm94X2JpbGxpbmdfZXF1YWxzX3NoaXBwaW5nIl0pKQoJCXsKCQkJaWYoJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9jaGVja2JveF9iaWxsaW5nX2VxdWFsc19zaGlwcGluZyJdID09ICIxIikKCQkJewoJCQkJJHNoaXBwaW5nU2FtZUFzQmlsbGluZyA9IHRydWU7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc2hpcHBpbmdTYW1lQXNCaWxsaW5nID0gZmFsc2U7CgkJCX0KCQl9CgoJCWlmKCEkc2hpcHBpbmdTYW1lQXNCaWxsaW5nKQoJCXsKCQkJJHNoaXBwaW5nQWRkcmVzcyA9IG5ldyBNTV9DdXN0b21lckFkZHJlc3MoJHVzZXItPmdldEZpcnN0TmFtZSgpLCAkdXNlci0+Z2V0TGFzdE5hbWUoKSk7CgkJCSRzaGlwcGluZ0FkZHJlc3MtPnNldFBob25lKCR0aGlzLT5nZXRDaGVja291dEZvcm1WYWx1ZSgibW1fZmllbGRfcGhvbmUiKSk7CgkJCSRzaGlwcGluZ0FkZHJlc3MtPnNldEFkZHJlc3NMaW5lMSgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MiKSk7CgkJCSRzaGlwcGluZ0FkZHJlc3MtPnNldENpdHkoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9zaGlwcGluZ19jaXR5IikpOwoJCQkkc2hpcHBpbmdBZGRyZXNzLT5zZXRTdGF0ZSgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIikpOwoJCQkkc2hpcHBpbmdBZGRyZXNzLT5zZXRQb3N0YWxDb2RlKCR0aGlzLT5nZXRDaGVja291dEZvcm1WYWx1ZSgibW1fZmllbGRfc2hpcHBpbmdfemlwIikpOwoJCQkkc2hpcHBpbmdBZGRyZXNzLT5zZXRDb3VudHJ5KCR0aGlzLT5nZXRDaGVja291dEZvcm1WYWx1ZSgibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSIpKTsKCQl9CgkJZWxzZQoJCXsgCgkJCSRzaGlwcGluZ0FkZHJlc3MgPSAkYmlsbGluZ0FkZHJlc3M7CgkJfQoJCQoJCSR1c2VyLT5zZXRGdWxsQmlsbGluZ0FkZHJlc3MoJGJpbGxpbmdBZGRyZXNzKTsKCQkkdXNlci0+c2V0RnVsbFNoaXBwaW5nQWRkcmVzcygkc2hpcHBpbmdBZGRyZXNzKTsKCQkKCQlpZigkdGhpcy0+aXNBcGlSZXF1ZXN0KQoJCXsKCQkJJHVzZXItPnNldE5vdGVzKE1NX1V0aWxzOjpkYXRlVG9Mb2NhbChNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSkuIjogTWVtYmVyIGNyZWF0ZWQgdGhyb3VnaCBNTSBBUEkiKTsKCQl9CgkJCgkJJHVzZXJSZXN1bHQgPSAkdXNlci0+Y29tbWl0RGF0YSgpOwoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCR1c2VyUmVzdWx0KSkKCQl7CgkJCSR0aGlzLT5zdGF0ZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCSR0aGlzLT5zdGF0ZS0+bWVzc2FnZSA9ICR1c2VyUmVzdWx0LT5tZXNzYWdlOwoJCQlyZXR1cm4gJHRoaXM7CgkJfQoJCQoJCSR0aGlzLT5vcmRlci0+c2V0Q3VzdG9tZXIoJHVzZXIpOwoJCSR0aGlzLT5vcmRlci0+c2V0QmlsbGluZ0FkZHJlc3MoJGJpbGxpbmdBZGRyZXNzKTsKCQkkdGhpcy0+b3JkZXItPnNldFNoaXBwaW5nQWRkcmVzcygkc2hpcHBpbmdBZGRyZXNzKTsKCQkkdGhpcy0+b3JkZXItPnNldFNoaXBwaW5nU2FtZUFzQmlsbGluZygkc2hpcHBpbmdTYW1lQXNCaWxsaW5nKTsKCQkKCQlpZighJHByb2R1Y3QtPmlzQWN0aXZlKCkpCgkJewoJCQkkdGhpcy0+c3RhdGUtPnR5cGUgPSBNTV9SZXNwb25zZTo6JEVSUk9SOwoJCQkkdGhpcy0+c3RhdGUtPm1lc3NhZ2UgPSAiQ2Fubm90IGNvbXBsZXRlIG9yZGVyLiBQcm9kdWN0ICd7JHByb2R1Y3QtPmdldE5hbWUoKX0nIGlzIG5vdCBhdmFpbGFibGUuIjsKCQkJcmV0dXJuICR0aGlzOwoJCX0KCQkKCQkkdGhpcy0+b3JkZXItPmFkZFByb2R1Y3QoJHByb2R1Y3QsIDEsICR0aGlzLT5pc0dpZnQpOwoJCQoJCWlmKCRwcm9kdWN0LT5pc1NoaXBwYWJsZSgpKQoJCXsKCQkJJHRoaXMtPm9yZGVyLT5zZXRTaGlwcGluZ01ldGhvZEZyb21LZXkoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9zaGlwcGluZ19tZXRob2QiKSk7CgkJfQoJCQoJCSR0aGlzLT5vcmRlci0+c2V0QWZmaWxpYXRlSWQoJHRoaXMtPmdldENoZWNrb3V0Rm9ybVZhbHVlKCJtbV9maWVsZF9hZmZpbGlhdGVfaWQiKSk7CgkJJHRoaXMtPm9yZGVyLT5zZXRTdWJBZmZpbGlhdGVJZCgkdGhpcy0+Z2V0Q2hlY2tvdXRGb3JtVmFsdWUoIm1tX2ZpZWxkX3N1Yl9hZmZpbGlhdGVfaWQiKSk7CgkJCgkJaWYoaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9maWVsZF9jb3Vwb25fY29kZSJdKSkKCQl7CgkJCSRjb3Vwb24gPSBNTV9Db3Vwb246OmdldERhdGFCeUNvZGUoJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9maWVsZF9jb3Vwb25fY29kZSJdKTsKCQkJCgkJCWlmKCRjb3Vwb24tPmlzVmFsaWQoKSAmJiBNTV9Db3Vwb246Omhhc0F2YWlsYWJsZUNvdXBvbigkY291cG9uLT5nZXRDb3Vwb25Db2RlKCkpICYmICRjb3Vwb24tPmhhc1Byb2R1Y3QoJHByb2R1Y3QtPmdldElkKCkpKQoJCQl7CgkJCQkkdGhpcy0+b3JkZXItPmFkZENvdXBvbigkY291cG9uKTsKCQkJCQoJCQkJaWYoJGNvdXBvbi0+Z2V0Q291cG9uVHlwZSgpID09IE1NX0NvdXBvbjo6JFRZUEVfRlJFRSkKCQkJCXsKCQkJCQkkdGhpcy0+ZG9Db21wID0gdHJ1ZTsKCQkJCX0KCQkJfQoJCX0KCQkJCQoJCS8vIGdldCBjdXN0b20gZmllbGQgZGF0YQoJCWZvcmVhY2goJHRoaXMtPnJlcXVlc3REYXRhIGFzICRrZXk9PiR2YWx1ZSkKCQl7CgkJCWlmKHByZWdfbWF0Y2goIi8oY3VzdG9tXykvIiwgJGtleSkpCgkJCXsKCQkJCSRjdXN0b21GaWVsZElkID0gcHJlZ19yZXBsYWNlKCIvW14wLTldKy8iLCAiIiwgJGtleSk7CgkJCQkkdGhpcy0+Y3VzdG9tRGF0YVskY3VzdG9tRmllbGRJZF0gPSAkdmFsdWU7CgkJCX0KCQl9Cgl9CgkKCQoJLyoqCgkgKiBJZiB0aGUgY3VzdG9tZXIgaXMgY2hlY2tpbmcgb3V0IHdpdGggYW4gb25zaXRlIHBheW1lbnQgc2VydmljZSwgdGhlIG9yZGVyIGlzIGNoYXJnZWQgYW5kIHRoZSByZXNwb25zZSBpcyBzZW50CgkgKiB0byB0aGUgaGFuZGxlUmVzdWx0IG1ldGhvZC4gCgkgKiAKCSAqIElmIHRoZSBjdXN0b21lciBpcyBjaGVja2luZyBvdXQgd2l0aCBhbiBvZmZzaXRlIHBheW1lbnQgc2VydmljZSwgYSBwZW5kaW5nIGFjY291bnQgaXMgY3JlYXRlZCBmb3IgdGhlIGN1c3RvbWVyCgkgKiBhbmQgdGhleSdyZSByZWRpcmVjdGVkIHRvIHRoZSBvZmZzaXRlIHBheW1lbnQgc2VydmljZSBzaXRlIHRvIGNvbXBsZXRlIHRoZWlyIG9yZGVyLgoJICogCgkgKiBAc2VlIE1NX09yZGVyUmVxdWVzdDo6c3VibWl0UmVxdWVzdCgpCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdWJtaXRSZXF1ZXN0KCkKCXsKCQkKCQkkbXV0ZXhJZCA9ICIiOwoJCSRpc0R1cGxpY2F0ZSA9IGZhbHNlOwoJCSRzaG91bGRVc2VMb2NraW5nID0gZmFsc2U7CgkJCgkJaWYoIWVtcHR5KCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fc3VibWlzc2lvbl9tdXRleCJdKSkKCQl7CgkJCSRtdXRleElkID0gJHRoaXMtPnJlcXVlc3REYXRhWyJtbV9zdWJtaXNzaW9uX211dGV4Il07CgkJCSRzaG91bGRVc2VMb2NraW5nID0gJHRoaXMtPmlzT25zaXRlUmVxdWVzdCgpOyAvL29ubHkgdXNlIGxvY2tpbmcgZm9yIG9uc2l0ZSByZXF1ZXN0cy4gQ3VzdG9tZXIgaXMgc2VudCBvZmZzaXRlIChlbmRpbmcgdGhlIGN1cnJlbnQgcHJvY2VzcykgZm9yIG9mZnNpdGUgcmVxdWVzdHMsIHNvIHRoZXJlIGlzIG5ldmVyIGEgY2hhbmNlIHRvIGV4cGxpY2l0eSByZWxlYXNlIHRoZSBsb2NrCgkJfQoJCQoJCWlmICgkc2hvdWxkVXNlTG9ja2luZykKCQl7CgkJCSRsb2NrQWNxdWlyZWQgPSBNTV9VdGlsczo6YWNxdWlyZURCTG9jaygkbXV0ZXhJZCk7CgkJCSR0aGlzLT5vcmRlci0+c2V0Rm9ybVN1Ym1pc3Npb25JZCgkbXV0ZXhJZCk7CgkJCQoJCQlpZiAoISRsb2NrQWNxdWlyZWQpCgkJCXsKCQkJCS8vbG9nIHRoYXQgdGhlIGxvY2sgY291bGRuJ3QgYmUgYWNxdWlyZWQKCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJBdHRlbXB0ZWQgdG8gbG9jayBvcmRlciBwcm9jZXNzaW5nIGR1cmluZyBjaGVja291dCwgYnV0IHRoZSBsb2NrIHdhcyBub3QgYWJsZSB0byBiZSBhY3F1aXJlZCIpOwoJCQl9CgkJCS8vIGNoZWNrIHRoYXQgYW4gb3JkZXIgd2l0aCB0aGlzIHVuaXF1ZSBpZCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGNyZWF0ZWQKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkdGhpcy0+c3RhdGUpICYmICEkdGhpcy0+aXNGcmVlICYmICEkdGhpcy0+aXNHaWZ0ICYmIE1NX09yZGVyOjpoYXNGb3JtU3VibWlzc2lvbklkKCRtdXRleElkLCAkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCkpKQoJCQl7CgkJCQkkaXNEdXBsaWNhdGUgPSB0cnVlOwoJCQl9CgkJCQoJCQlpZiAoISRpc0R1cGxpY2F0ZSkKCQkJewoJCQkJJG9yZGVyUmVzdWx0ID0gJHRoaXMtPmNvbnRpbnVlU3VibWl0dGluZ1JlcXVlc3QoKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkvL2FuIG9yZGVyIHdpdGggdGhpcyBzdWJtaXNzaW9uIGlkIGhhcyBiZWVuIGRldGVjdGVkIGluIHRoZSBkYXRhYmFzZSwgbG9vayB1cCB0aGUgc3RhdHVzIGFuZCBkaXJlY3QgdGhlIHVzZXIgYXBwcm9wcmlhdGVseQoJCQkJJHByZXZpb3VzT3JkZXIgPSBNTV9PcmRlcjo6Z2V0T3JkZXJCeVVzZXJBbmRGb3JtU3VibWlzc2lvbklkKCRtdXRleElkLCAkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCkpOwoJCQkJaWYgKCgkcHJldmlvdXNPcmRlciAhPSBudWxsKSAmJiAoJHByZXZpb3VzT3JkZXItPmdldE9yZGVyU3RhdHVzKCkgPT0gTU1fT3JkZXI6OiRQQUlEX0NPTVBMRVRFKSkKCQkJCXsKCQkJCQkkdGhpcy0+b3JkZXIgPSAkcHJldmlvdXNPcmRlcjsJCQkJCQkKCQkJCQkkb3JkZXJSZXN1bHQgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJfQoJCQkJZWxzZSAKCQkJCXsKCQkJCQkvL3RoaXMgcmVxdWVzdCB3YXMgYWxyZWFkeSBwcm9jZXNzZWQgYnV0IHdhcyBub3Qgc3VjY2Vzc2Z1bCwgYXR0ZW1wdCB0byBzZW5kIGl0IGFnYWluCgkJCQkJJG9yZGVyUmVzdWx0ID0gJHRoaXMtPmNvbnRpbnVlU3VibWl0dGluZ1JlcXVlc3QoKTsKCQkJCX0KCQkJfQoJCQkKCQkJaWYgKCRsb2NrQWNxdWlyZWQpCgkJCXsKCQkJCU1NX1V0aWxzOjpyZWxlYXNlREJMb2NrKCRtdXRleElkKTsKCQkJfQoJCQkKCQl9CgkJZWxzZQoJCXsKCQkJJG9yZGVyUmVzdWx0ID0gJHRoaXMtPmNvbnRpbnVlU3VibWl0dGluZ1JlcXVlc3QoKTsKCQl9CgkJCgkJLy9pZiB0aGVyZSB3YXMgYW4gZXJyb3IgcGxhY2luZyB0aGUgb3JkZXIsIHJlbW92ZSBhbnkgY291cG9ucwoJCWlmKCRvcmRlclJlc3VsdC0+Z2V0U3RhdHVzKCkgIT0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1MpCgkJewoJCQlNTV9Db3Vwb246OnJlbW92ZVVzZWQoJHRoaXMtPm9yZGVyKTsKCQl9CgkKCQlpZigkdGhpcy0+aXNBcGlSZXF1ZXN0KQoJCXsKCQkJcmV0dXJuICR0aGlzLT5oYW5kbGVSZXN1bHQoJG9yZGVyUmVzdWx0KTsKCQl9CgkJZWxzZQoJCXsKCQkJJHRoaXMtPmhhbmRsZVJlc3VsdCgkb3JkZXJSZXN1bHQpOwoJCX0KCX0gIAoJCgkvKioKCSAqIFdoZW4gb3JkZXIgY29uY3VycmVuY3kgcHJvdGVjdGlvbiB3YXMgYWRkZWQsIHN1Ym1pdFJlcXVlc3Qgd2FzIHJlZmFjdG9yZWQgdG8gaGFuZGxlIHRoZSBsb2dpYyBhcm91bmQgbG9jayBhY3F1aXNpdGlvbi9yZWxlYXNlLCB3aGlsZQoJICogdGhlIGxvZ2ljIGZvciBzdWJtaXR0aW5nIHRoZSBvcmRlciByZXF1ZXN0IHdhcyBtb3ZlZCB0byB0aGlzIG1ldGhvZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gY29udGludWVTdWJtaXR0aW5nUmVxdWVzdCgpCgl7IAoJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHRoaXMtPnN0YXRlKSAmJiAhJHRoaXMtPmlzRnJlZSAmJiAhJHRoaXMtPmlzR2lmdCkKCQl7CgkJCS8vbWFrZSBzdXJlIHRoaXMgaXNudCBhbiBvcmRlciBmb3IgYW4gYWN0aXZlIHN1YnNjcmlwdGlvbiB0aGF0IGhhcyBhbHJlYWR5IGJlZW4gcHVyY2hhc2VkCgkJCSRjaGVja05vQmxvY2tpbmdPcmRlclJlc3BvbnNlID0gTU1fVXNlcjo6Y2FuUGxhY2VPcmRlcigkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCksICR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fcHJvZHVjdF9pZCJdLCAkdGhpcy0+aXNOZXdNZW1iZXIsICR0aGlzLT5pc0N1c3RvbWVyU3VwcG9ydE9yZGVyKTsKCQkJJHJlcXVlc3RTdGF0dXMgPSAoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkY2hlY2tOb0Jsb2NraW5nT3JkZXJSZXNwb25zZSkpPyR0aGlzLT5zdGF0ZTokY2hlY2tOb0Jsb2NraW5nT3JkZXJSZXNwb25zZTsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlcXVlc3RTdGF0dXMgPSAkdGhpcy0+c3RhdGU7CgkJfQoJCQoJCS8vIHZhbGlkYXRlIGVtYWlsIGlzIGNvcnJlY3Qgb24gc3VibWlzc2lvbi4KCQlpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX2ZpZWxkX2VtYWlsIl0pKQoJCXsKCQkJaWYoIU1NX1V0aWxzOjpoYXNWYWxpZEVtYWlsKCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fZmllbGRfZW1haWwiXSkpCgkJCXsKCQkJCSRyZXF1ZXN0U3RhdHVzID0gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkludmFsaWQgRW1haWwgRmllbGQuIiwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkvLyBpZiB1c2VyIGlzIHB1cmNoYXNpbmcgYSBnaWZ0LCBtYWtlIHN1cmUgdGhleSdyZSBsb2dnZWQgaW4KCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXF1ZXN0U3RhdHVzKSAmJiAkdGhpcy0+aXNHaWZ0ICYmICFpc191c2VyX2xvZ2dlZF9pbigpKQoJCXsKCQkJJHJlcXVlc3RTdGF0dXMgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiWW91IG11c3QgYmUgbG9nZ2VkIGluIHRvIHB1cmNoYXNlIGEgZ2lmdCIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlcXVlc3RTdGF0dXMpKQoJCXsJCQkJCgkJCS8vZGV0ZXJtaW5lIHBheW1lbnQgc2VydmljZSBvdmVycmlkZSBzdGF0dXMgaWYgdGhpcyBpcyBhIG5vbi1mcmVlIG9yZGVyCgkJCWlmICgkdGhpcy0+cGF5bWVudFNlcnZpY2UgaW5zdGFuY2VvZiBNTV9UZXN0UGF5bWVudFNlcnZpY2UpCgkJCXsKCQkJCSR0aGlzLT5vcmRlci0+c2V0SXNUZXN0KHRydWUpOwoJCQl9CgkJCWVsc2UgaWYgKCEkdGhpcy0+aXNGcmVlKQoJCQl7CgkJCQkkdGVzdFBheW1lbnRTZXJ2aWNlID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRQYXltZW50U2VydmljZShNTV9QYXltZW50U2VydmljZTo6JFRFU1RfU0VSVklDRV9UT0tFTik7CgkJCQlpZiAoJHRlc3RQYXltZW50U2VydmljZS0+aXNBY3RpdmUoKSkKCQkJCXsKCQkJCQlpZiAoJHRoaXMtPmlzT25zaXRlUmVxdWVzdCgpICYmICgkdGVzdFBheW1lbnRTZXJ2aWNlLT5nZXRNb2RlKCkgPT0gTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokTU9ERV9BTFdBWVNfT1ZFUlJJREUpKQoJCQkJCXsKCQkJCQkJJHRoaXMtPm9yZGVyLT5zZXRJc1Rlc3QodHJ1ZSk7CgkJCQkJCSR0aGlzLT5vcmRlci0+c2V0UGF5bWVudE1ldGhvZCgkdGVzdFBheW1lbnRTZXJ2aWNlKTsKCQkJCQkJJHRoaXMtPnBheW1lbnRTZXJ2aWNlID0gJHRlc3RQYXltZW50U2VydmljZTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJHBheW1lbnRTZXJ2aWNlT3ZlcnJpZGUgPSBNTV9TZXNzaW9uOjp2YWx1ZShNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRLRVlfUEFZTUVOVF9TRVJWSUNFX09WRVJSSURFKTsKCQkJCQkJaWYgKCRwYXltZW50U2VydmljZU92ZXJyaWRlICE9PSBmYWxzZSkKCQkJCQkJewoJCQkJCQkJaWYgKCRwYXltZW50U2VydmljZU92ZXJyaWRlID09IE1NX1Rlc3RQYXltZW50U2VydmljZTo6JE1PREVfT1ZFUlJJREVfV0lUSF9LRVkpCgkJCQkJCQl7CgkJCQkJCQkJJHRoaXMtPm9yZGVyLT5zZXRJc1Rlc3QodHJ1ZSk7CgkJCQkJCQkJJHRoaXMtPm9yZGVyLT5zZXRQYXltZW50TWV0aG9kKCR0ZXN0UGF5bWVudFNlcnZpY2UpOwoJCQkJCQkJCSR0aGlzLT5wYXltZW50U2VydmljZSA9ICR0ZXN0UGF5bWVudFNlcnZpY2U7CgkJCQkJCQl9CgkJCQkJCQllbHNlIGlmICgkcGF5bWVudFNlcnZpY2VPdmVycmlkZSA9PSBNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRNT0RFX1BST0RVQ1RJT05fT1ZFUlJJREVfV0lUSF9LRVkpCgkJCQkJCQl7CgkJCQkJCQkJJHRoaXMtPm9yZGVyLT5zZXRJc1Rlc3QodHJ1ZSk7CgkJCQkJCQkJJHRoaXMtPnBheW1lbnRTZXJ2aWNlLT5zd2l0Y2hUb1Rlc3RNb2RlKCk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQkJCQoJCQlpZigkdGhpcy0+aXNGcmVlKQoJCQl7CgkJCQkkcmVzdWx0ID0gJHRoaXMtPm9yZGVyLT5jb21taXREYXRhKCk7CgkJCgkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCQkJewoJCQkJCSR0aGlzLT5zYXZlQ3VzdG9tRmllbGREYXRhKCk7CgkJCQkJJG9yZGVyUmVzdWx0ID0gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkb3JkZXJSZXN1bHQgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkcmVzdWx0LT5tZXNzYWdlLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYoJHRoaXMtPmlzT25zaXRlUmVxdWVzdCgpKQoJCQl7IAoJCQkJLy8gbWFyayBhY2NvdW50IGFzIHBlbmRpbmcgZm9yIG5ldyBtZW1iZXJzCgkJCQlpZigkdGhpcy0+aXNOZXdNZW1iZXIpCgkJCQl7IAoJCQkJCSR0aGlzLT5vcmRlci0+Z2V0Q3VzdG9tZXIoKS0+c2V0U3RhdHVzKE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTik7CgkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRTdGF0dXNNZXNzYWdlKCJBY2NvdW50IGlzIHBlbmRpbmcgY29uZmlybWF0aW9uIGZyb20gIi4kdGhpcy0+cGF5bWVudFNlcnZpY2UtPmdldE5hbWUoKSk7CgkJIAoJCQkJCS8vIGlmIHB1cmNoYXNlZCBhIG1lbWJlcnNoaXAsIGFzc2lnbiBpdCB0byB0aGUgdXNlciAtLSB0aGV5IHdvbid0IGJlIGFibGUgdG8gbG9nIGluIGJlY2F1c2UgdGhlIGFjY291bnQKCQkJCQkvLyBzdGF0dXMgaXMgcGVuZGluZyBidXQgaXQgd2lsbCBiZSB1c2VmdWwgdG8ga25vdyB0aGF0IHRoZXkgd2VyZSBhdHRlbXB0aW5nIHRvIHNpZ24gdXAgZm9yCgkJCQkJaWYoJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkID4gMCkKCQkJCQl7IAoJCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPnNldE1lbWJlcnNoaXBJZCgkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQpOwoJCQkJCX0KCQkJCQllbHNlIGlmKGlzX251bGwoJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5nZXRNZW1iZXJzaGlwSWQoKSkgfHwgaW50dmFsKCR0aGlzLT5vcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0TWVtYmVyc2hpcElkKCkpID09IDApCgkJCQkJeyAKCQkJCQkJaWYoISR0aGlzLT5pc0ZyZWUpCgkJCQkJCXsKCQkJCQkJCS8vIGNoZWNrIGlmIGEgYnVuZGxlIGlzIGJlaW5nIHB1cmNoYXNlZCBhbmQgaWYgc28gYXBwbHkgdGhlIGRlZmF1bHQgbWVtYmVyc2hpcCBsZXZlbCBhc3NvY2lhdGVkIHdpdGggdGhlIGJ1bmRsZQoJCQkJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX3Byb2R1Y3RfaWQiXSk7CgkJCQkJCQkkYnVuZGxlID0gJHByb2R1Y3QtPmdldEFzc29jaWF0ZWRCdW5kbGUoKTsKCQkJCQkJCQkKCQkJCQkJCWlmKCRidW5kbGUtPmlzVmFsaWQoKSkKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPnNldE1lbWJlcnNoaXBJZCgkYnVuZGxlLT5nZXREZmx0TWVtYmVyc2hpcCgpLT5nZXRJZCgpKTsKCQkJCQkJCX0KCQkJCQkJCWVsc2UKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPnNldE1lbWJlcnNoaXBJZChNTV9NZW1iZXJzaGlwTGV2ZWw6OmdldERlZmF1bHRNZW1iZXJzaGlwKCktPmdldElkKCkpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRNZW1iZXJzaGlwSWQoTU1fTWVtYmVyc2hpcExldmVsOjpnZXREZWZhdWx0TWVtYmVyc2hpcCgpLT5nZXRJZCgpKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQkvLyBtZW1iZXJzaGlwTGV2ZWxJZCBpcyAwIChwb3N0ZWQgc28gbm90IGJ1eWluZyBhIG1lbWJlcnNoaXAgZXhwbGljaXRlbHkpLCAKCQkJCQkvLyBjdXN0b21lciB0ZWNobmljYWxseSBoYXMgdXNlciBkYXRhIGFzc29jaWF0ZWQgd2l0aCBtZW1iZXJzaGlwIGxldmVsPjAsIAoJCQkJCS8vIGN1c3RvbWVyIGlzICduZXcnICwgdGhleSBoYWQgY3VycmVudGx5IGFuIGF0dGVtcHQgYXQgYSAKCQkJCQkvLyBtZW1iZXJzaGlwIHB1cmNoYXNlIGJ1dCBkaWQgbm90IGNvbXBsZXRlIGl0IChvdGhlcndpc2UgdGhleSB3b3VsZCBOT1QgYmUgY29uc2lkZXJlZCAibmV3IikuICAKCQkJCQllbHNlIAoJCQkJCXsgCgkJCQkJCS8vIGNoZWNrIGlmIGEgYnVuZGxlIGlzIGJlaW5nIHB1cmNoYXNlZCBhbmQgaWYgc28gYXBwbHkgdGhlIGRlZmF1bHQgbWVtYmVyc2hpcCBsZXZlbCBhc3NvY2lhdGVkIHdpdGggdGhlIGJ1bmRsZQoJCQkJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCR0aGlzLT5yZXF1ZXN0RGF0YVsibW1fcHJvZHVjdF9pZCJdKTsKCQkJCQkJJGJ1bmRsZSA9ICRwcm9kdWN0LT5nZXRBc3NvY2lhdGVkQnVuZGxlKCk7CgkJCQkJCQoJCQkJCQlpZigkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJCQkJCXsKCQkJCQkJCSR0aGlzLT5vcmRlci0+Z2V0Q3VzdG9tZXIoKS0+c2V0TWVtYmVyc2hpcElkKCRidW5kbGUtPmdldERmbHRNZW1iZXJzaGlwKCktPmdldElkKCkpOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRNZW1iZXJzaGlwSWQoTU1fTWVtYmVyc2hpcExldmVsOjpnZXREZWZhdWx0TWVtYmVyc2hpcCgpLT5nZXRJZCgpKTsKCQkJCQkJfSAKCQkJCQl9CgkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5jb21taXREYXRhKCk7CgkJCQl9CgkJCgkJCQkkcmVzdWx0ID0gJHRoaXMtPm9yZGVyLT5jb21taXREYXRhKCk7CgkJCgkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCQkJewoJCQkJCSR0aGlzLT5zYXZlQ3VzdG9tRmllbGREYXRhKCk7CgkJCQkJCQoJCQkJCWlmKCR0aGlzLT5kb0NvbXApCgkJCQkJewoJCQkJCQkkb3JkZXJSZXN1bHQgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkb3JkZXJSZXN1bHQgPSAkdGhpcy0+cGF5bWVudFNlcnZpY2UtPmNoYXJnZU9yZGVyKCR0aGlzLT5vcmRlciwgJHRoaXMtPmNyZWRpdENhcmRJbmZvKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJG9yZGVyUmVzdWx0ID0gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJHJlc3VsdC0+bWVzc2FnZSwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCQllbHNlIGlmKCEkdGhpcy0+aXNBcGlSZXF1ZXN0KQoJCQl7CgkJCQkvLyB0aGlzIGlzIGFuIG9mZnNpdGUgb3JkZXIgcmVxdWVzdAoJCQkJLy8gbWFyayBhY2NvdW50IGFzIHBlbmRpbmcgZm9yIG5ldyBtZW1iZXJzCgkJCQlpZigkdGhpcy0+aXNOZXdNZW1iZXIpCgkJCQl7CgkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRTdGF0dXMoTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OKTsKCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPnNldFN0YXR1c01lc3NhZ2UoIkFjY291bnQgaXMgcGVuZGluZyBjb25maXJtYXRpb24gZnJvbSAiLiR0aGlzLT5wYXltZW50U2VydmljZS0+Z2V0TmFtZSgpKTsKCQkJCQkJCgkJCQkJLy8gaWYgcHVyY2hhc2VkIGEgbWVtYmVyc2hpcCwgYXNzaWduIGl0IHRvIHRoZSB1c2VyIC0tIHRoZXkgd29uJ3QgYmUgYWJsZSB0byBsb2cgaW4gYmVjYXVzZSB0aGUgYWNjb3VudAoJCQkJCS8vIHN0YXR1cyBpcyBwZW5kaW5nIGJ1dCBpdCB3aWxsIGJlIHVzZWZ1bCB0byBrbm93IHRoYXQgdGhleSB3ZXJlIGF0dGVtcHRpbmcgdG8gc2lnbiB1cCBmb3IKCQkJCQlpZigkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPiAwKQoJCQkJCXsKCQkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRNZW1iZXJzaGlwSWQoJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkKTsKCQkJCQl9CgkJCQkJZWxzZSBpZihpc19udWxsKCR0aGlzLT5vcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0TWVtYmVyc2hpcElkKCkpIHx8IGludHZhbCgkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPmdldE1lbWJlcnNoaXBJZCgpKSA9PSAwKQoJCQkJCXsKCQkJCQkJaWYoISR0aGlzLT5pc0ZyZWUpCgkJCQkJCXsKCQkJCQkJCS8vIGNoZWNrIGlmIGEgYnVuZGxlIGlzIGJlaW5nIHB1cmNoYXNlZCBhbmQgaWYgc28gYXBwbHkgdGhlIGRlZmF1bHQgbWVtYmVyc2hpcCBsZXZlbCBhc3NvY2lhdGVkIHdpdGggdGhlIGJ1bmRsZQoJCQkJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkdGhpcy0+cmVxdWVzdERhdGFbIm1tX3Byb2R1Y3RfaWQiXSk7CgkJCQkJCQkkYnVuZGxlID0gJHByb2R1Y3QtPmdldEFzc29jaWF0ZWRCdW5kbGUoKTsKCQkKCQkJCQkJCWlmKCRidW5kbGUtPmlzVmFsaWQoKSkKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPnNldE1lbWJlcnNoaXBJZCgkYnVuZGxlLT5nZXREZmx0TWVtYmVyc2hpcCgpLT5nZXRJZCgpKTsKCQkJCQkJCX0KCQkJCQkJCWVsc2UKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPnNldE1lbWJlcnNoaXBJZChNTV9NZW1iZXJzaGlwTGV2ZWw6OmdldERlZmF1bHRNZW1iZXJzaGlwKCktPmdldElkKCkpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRNZW1iZXJzaGlwSWQoTU1fTWVtYmVyc2hpcExldmVsOjpnZXREZWZhdWx0TWVtYmVyc2hpcCgpLT5nZXRJZCgpKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQkJCgkJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5jb21taXREYXRhKCk7CgkJCQl9CgkJCQkJCgkJCQkkcmVzdWx0ID0gJHRoaXMtPm9yZGVyLT5jb21taXREYXRhKCk7CgkJCgkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCQkJewoJCQkJCSR0aGlzLT5zYXZlQ3VzdG9tRmllbGREYXRhKCk7CgkJCQkJCQoJCQkJCWlmKCR0aGlzLT5kb0NvbXApCgkJCQkJewoJCQkJCQkkb3JkZXJSZXN1bHQgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlpZigkdGhpcy0+b3JkZXItPmdldFRvdGFsKCkgPiAwKQoJCQkJCQl7CgkJCQkJCQkkdmFsaWRhdGVSZXNwb25zZSA9ICR0aGlzLT5wYXltZW50U2VydmljZS0+dmFsaWRhdGVPcmRlcigkdGhpcy0+b3JkZXIpOwoJCQkJCQkJCQoJCQkJCQkJaWYoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCR2YWxpZGF0ZVJlc3BvbnNlKSkKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+cmVkaXJlY3RUb09mZnNpdGVTZXJpdmNlKCk7CgkJCQkJCQkJZXhpdDsKCQkJCQkJCX0KCQkJCQkJCWVsc2UKCQkJCQkJCXsKCQkJCQkJCQkkb3JkZXJSZXN1bHQgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkdmFsaWRhdGVSZXNwb25zZS0+bWVzc2FnZSwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCS8vIHRoZSBjdXJyZW50IGFtb3VudCB0aGF0IG5lZWRzIHRvIGJlIHBhaWQgaXMgJDAgc28gdGhlIGN1c3RvbWVyIG1heSBub3QgbmVlZCB0bwoJCQkJCQkJLy8gYmUgcmVkaXJlY3RlZCB0byB0aGUgb2Zmc2l0ZSBwYXltZW50IHNlcnZpY2UuIENoZWNrIGlmIHRoZXJlJ3MgYSBzdWJzY3JpcHRpb24KCQkJCQkJCS8vIHRoYXQgbmVlZHMgdG8gYmUgc2V0IHVwIGFuZCBpZiBzbywgdGhleSdsbCBzdGlsbCBuZWVkIHRvIGJlIHNlbnQgdG8gdGhlIG9mZnNpdGUKCQkJCQkJCS8vIHBheW1lbnQgc2VydmljZS4KCQkJCQkJCSRoYXNTdWJzY3JpcHRpb24gPSBmYWxzZTsKCQkJCQkJCSRwcm9kdWN0SXRlbXMgPSAkdGhpcy0+b3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCQkJCQlmb3JlYWNoICgkcHJvZHVjdEl0ZW1zIGFzICRpdGVtKQoJCQkJCQkJewoJCQkJCQkJCWlmKCRpdGVtLT5pc1JlY3VycmluZygpKQoJCQkJCQkJCXsKCQkJCQkJCQkJJGhhc1N1YnNjcmlwdGlvbiA9IHRydWU7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCQkKCQkJCQkJCWlmKCRoYXNTdWJzY3JpcHRpb24pCgkJCQkJCQl7CgkJCQkJCQkJJHZhbGlkYXRlUmVzcG9uc2UgPSAkdGhpcy0+cGF5bWVudFNlcnZpY2UtPnZhbGlkYXRlT3JkZXIoJHRoaXMtPm9yZGVyKTsKCQkKCQkJCQkJCQlpZihNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc1N1Y2Nlc3MoJHZhbGlkYXRlUmVzcG9uc2UpKQoJCQkJCQkJCXsKCQkJCQkJCQkJJHRoaXMtPnJlZGlyZWN0VG9PZmZzaXRlU2VyaXZjZSgpOwoJCQkJCQkJCQlleGl0OwoJCQkJCQkJCX0KCQkJCQkJCQllbHNlCgkJCQkJCQkJewoJCQkJCQkJCQkkb3JkZXJSZXN1bHQgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkdmFsaWRhdGVSZXNwb25zZS0+bWVzc2FnZSwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQllbHNlCgkJCQkJCQl7CgkJCQkJCQkJLy8gY3VzdG9tZXIgZG9lc24ndCBuZWVkIHRvIGJlIHNlbnQgdG8gdGhlIG9mZnNpdGUgcGF5bWVudCBzZXJ2aWNlIHNpbmNlIHRoZXJlJ3Mgbm90aGluZwoJCQkJCQkJCS8vIHRvIHBheSBmb3IuIEFzIGEgcmVzdWx0LCBhIGNhbGxiYWNrIHdvbid0IGJlIG1hZGUgdG8gdXBkYXRlIG9yZGVyIHN0YXR1cyBzbyB3ZSBuZWVkIHRvCgkJCQkJCQkJLy8gdXBkYXRlIGl0IG1hbnVhbGx5CgkJCQkJCQkJJHRoaXMtPm9yZGVyLT5zZXRPcmRlclN0YXR1cyhNTV9PcmRlcjo6JFBBSURfQ09NUExFVEUpOwoJCQkJCQkJCSR0aGlzLT5vcmRlci0+Y29tbWl0RGF0YSgpOwoJCQkJCQkJCSRvcmRlclJlc3VsdCA9IG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJG9yZGVyUmVzdWx0ID0gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJHJlc3VsdC0+bWVzc2FnZSwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkb3JkZXJSZXN1bHQgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkcmVxdWVzdFN0YXR1cy0+bWVzc2FnZSwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJcmV0dXJuICRvcmRlclJlc3VsdDsKCX0KCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGhhbmRsZXMgdGhlIHJlc3VsdCBvZiB0aGUgb3JkZXIgYmVpbmcgY2hhcmdlZCBpbiB0aGUgc3VibWl0UmVxdWVzdCBtZXRob2QuIElmIHRoZSByZXN1bHQgaXMgc3VjY2Vzc2Z1bCwKCSAqIHRoZSBhcHByb3ByaWF0ZSBhY2Nlc3MgcmlnaHRzIHdpbGwgYmUgZ3JhbnRlZCB0byB0aGUgY3VzdG9tZXIgYmFzZWQgb24gd2hhdCB0aGV5IHB1cmNoYXNlZCBhbmQgdGhleSdsbCBiZSAKCSAqIHJlZGlyZWN0ZWQgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbmZpcm1hdGlvbiBwYWdlLiBJZiB0aGVyZSB3YXMgYW4gZXJyb3IgcHJvY2Vzc2luZyB0aGUgb3JkZXIsIHRoZSBjdXN0b21lciB3aWxsIGJlIAoJICogcmVkaXJlY3RlZCB0byB0aGUgY2hlY2tvdXQgcGFnZSB0aGV5IGNhbWUgZnJvbSB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgcGFzc2VkLgoJICogCgkgKiBAcGFyYW0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSAkcmVzdWx0IGFuIGluc3RhbmNlIG9mIGEgcmVzcG9uc2Ugb2JqZWN0IHRoYXQgY29udGFpbnMgZGV0YWlscyBhYm91dCB0aGUgcmVzdWx0IGZyb20gdGhlIGF0dGVtcHQgdG8gY2hhcmdlIHRoZSBvcmRlcgoJICogCgkgKiBAc2VlIE1NX09yZGVyUmVxdWVzdDo6aGFuZGxlUmVzdWx0KCkKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGhhbmRsZVJlc3VsdCgkcmVzdWx0KQoJewoJCWlmICgkcmVzdWx0LT5nZXRTdGF0dXMoKSA9PSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokU1VDQ0VTUykKCQl7CgkJCS8vIGNsZWFyIHNlc3Npb24gdmFsdWVzCgkJCU1NX1Nlc3Npb246OmNsZWFyKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9DT1VQT05fVkFMVUUpOwoJCQkKCQkJJGNvbmZpcm1hdGlvblVybCA9ICIiOwoJCQkKCQkJLy8gaGFuZGxlIGZyZWUgbWVtYmVyc2hpcHMKCQkJaWYoJHRoaXMtPmlzRnJlZSkKCQkJewoJCQkJJGFzc2lnbkFjY2Vzc1Jlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbk1lbWJlcnNoaXBUb1VzZXIoJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLCAkdGhpcy0+bWVtYmVyc2hpcCk7CgkJCQkKCQkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJGFzc2lnbkFjY2Vzc1Jlc3VsdCkpCgkJCQl7CgkJCQkJJHBhcmFtc1snaXNGcmVlJ10gPSAkdGhpcy0+bWVtYmVyc2hpcC0+aXNGcmVlKCk7CgkJCQkJJHBhcmFtc1sncmVmVHlwZSddID0gTU1fVFlQRV9NRU1CRVJTSElQX0xFVkVMOwoJCQkJCSRwYXJhbXNbJ3JlZklkJ10gPSAkdGhpcy0+bWVtYmVyc2hpcC0+Z2V0SWQoKTsKCQkJCQkKCQkJCQkkY29uZmlybWF0aW9uVXJsID0gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldFVybChNTV9Db3JlUGFnZVR5cGU6OiRGUkVFX0NPTkZJUk1BVElPTiwgJHBhcmFtcyk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHJlc3VsdC0+c2V0U3RhdHVzKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJJHJlc3VsdC0+c2V0TWVzc2FnZSgiRXJyb3IgY3JlYXRpbmcgZnJlZSBhY2NvdW50LiIpOwoJCQkJfQoJCQl9CgkJCQoJCQkvLyBoYW5kbGUgcGFpZCBwcm9kdWN0cwoJCQllbHNlCgkJCXsKCQkJCSRhc3NpZ25BY2Nlc3NSZXN1bHQgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXIoJHRoaXMtPm9yZGVyKTsKCQkJCQoJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkYXNzaWduQWNjZXNzUmVzdWx0KSkKCQkJCXsKCQkJCQlpZigkdGhpcy0+aXNOZXdNZW1iZXIgJiYgKCR0aGlzLT5vcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OKSkKCQkJCQl7CgkJCQkJCS8vIElmIHdlJ3ZlIHJlYWNoZWQgdGhpcyBwb2ludCBpdCBtZWFucyB0aGF0IGl0J3MgYSBuZXcgYWNjb3VudCBhbmQgdGhlIGZpcnN0IHRoaW5nIHRoZXkgcHVyY2hhc2VkIHdhcyAKCQkJCQkJLy8gYSBwcm9kdWN0IHRoYXQgaGFkIG5vIGFjY2VzcyByaWdodHMgYXNzb2NpYXRlZCB3aXRoIGl0LiBJbiB0aGlzIGNhc2Ugd2UgbmVlZCB0byBtYXJrIHRoZSBhY2NvdW50IGFzIGFjdGl2ZQoJCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRBQ1RJVkUpOwoJCQkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPmNvbW1pdFN0YXR1c09ubHkoKTsKCQkJCQl9CgkJCQkJCgkJCQkJJGNvbmZpcm1hdGlvblVybCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmdldENvbmZpcm1hdGlvblVybEZvck9yZGVyKCR0aGlzLT5vcmRlcik7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHJlc3VsdC0+c2V0U3RhdHVzKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCgkJCQkJJG1zZyA9ICJQYXltZW50IGZvciBvcmRlciBudW1iZXIgeyR0aGlzLT5vcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0gd2FzIHN1Y2Nlc3NmdWwgYnV0IHRoZXJlIHdhcyBhbiBlcnJvciBncmFudGluZyBhY2Nlc3MgdG8geW91ciBjb250ZW50IjsKCQkJCQkKCQkJCQlpZigkYXNzaWduQWNjZXNzUmVzdWx0LT5tZXNzYWdlKQoJCQkJCXsKCQkJCQkJJG1zZyAuPSAiOiAiLiRhc3NpZ25BY2Nlc3NSZXN1bHQtPm1lc3NhZ2U7CgkJCQkJfQoJCQkJCQoJCQkJCSRyZXN1bHQtPnNldE1lc3NhZ2UoJG1zZyk7CgkJCQl9CgkJCX0KCQkJCgkJCS8vIGlmIHRoaXMgaXMgYSBjdXN0b21lciBzdXBwb3J0IG9yZGVyLCByZWRpcmVjdCB0aGUgYWRtaW5pc3RyYXRvciBiYWNrIHRvIHRoZSBtYW5hZ2UgZGV0YWlscyBwYWdlCgkJCWlmKCR0aGlzLT5pc0N1c3RvbWVyU3VwcG9ydE9yZGVyKQoJCQl7CgkJCQkkbXNnID0gdXJsZW5jb2RlKCJPcmRlciBwbGFjZWQgc3VjY2Vzc2Z1bGx5Iik7CgkJCQkkY29uZmlybWF0aW9uVXJsID0gTU1fTW9kdWxlVXRpbHM6OmdldFVybChNTV9NT0RVTEVfTUFOQUdFX01FTUJFUlMsIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19BQ0NFU1NfUklHSFRTKTsKCQkJCSRjb25maXJtYXRpb25VcmwgLj0gIiZ1c2VyX2lkPXskdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCl9Jm1lc3NhZ2U9eyRtc2d9IjsKCQkJfQoJCQkKCQkJaWYoISR0aGlzLT5pc0FwaVJlcXVlc3QpCgkJCXsKCQkJCS8vIHJlZGlyZWN0IHRvIGNvbmZpcm1hdGlvbiBwYWdlCgkJCQlpZigkcmVzdWx0LT5nZXRTdGF0dXMoKSA9PSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokU1VDQ0VTUyAmJiAhZW1wdHkoJGNvbmZpcm1hdGlvblVybCkpCgkJCQl7CgkJCQkJd3BfcmVkaXJlY3QoJGNvbmZpcm1hdGlvblVybCk7CgkJCQkJZXhpdDsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQl3cF9yZWRpcmVjdChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCdzaXRlX3VybCcpKTsKCQkJCQlleGl0OwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYoJHJlc3VsdC0+Z2V0U3RhdHVzKCkgPT0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1MgJiYgIWVtcHR5KCRjb25maXJtYXRpb25VcmwpKQoJCQl7CgkJCQkkcmVzdWx0ID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCQkkcmVzdWx0LT5hZGREYXRhKE1NX1Jlc3BvbnNlOjokREFUQV9LRVlfVVJMLCAkY29uZmlybWF0aW9uVXJsKTsKCQkJCXJldHVybiAkcmVzdWx0OwoJCQl9CgkJfQoJCQoJCS8vIHRoaXMgbm90IGFuIGVsc2UgaWYgYmVjYXVzZSBpdCdzIHBvc3NpYmxlIHRoYXQgdGhlICRyZXN1bHQgc3RhdHVzIHdhcyBjaGFuZ2VkIGluIHRoZSBibG9jayBhYm92ZSBmcm9tCgkJLy8gc3VjY2VzcyB0byBlcnJvciBhbmQgdGhpcyBlcnJvciBzaG91bGQgYmUgaGFuZGxlZCB0aGUgc2FtZSB3YXkgYXMgYSAkcmVzdWx0IHRoYXQgaGFkIGFuIGVycm9yIHN0YXR1cyBwcmlvcgoJCS8vIHRvIGNhbGxpbmcgdGhpcyBtZXRob2QuCgkJaWYgKCRyZXN1bHQtPmdldFN0YXR1cygpID09IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRGQUlMRUQgfHwgJHJlc3VsdC0+Z2V0U3RhdHVzKCkgPT0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJaWYoIWlzX251bGwoJHRoaXMtPm9yZGVyKSAmJiAhaXNfbnVsbCgkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCkpICYmICR0aGlzLT5vcmRlci0+Z2V0Q3VzdG9tZXIoKS0+aXNWYWxpZCgpICYmICR0aGlzLT5pc05ld01lbWJlcikKCQkJewoJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRTdGF0dXMoTU1fU3RhdHVzOjokRVJST1IpOwoJCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRTdGF0dXNNZXNzYWdlKCRyZXN1bHQtPmdldE1lc3NhZ2UoKSk7CgkJCQkkdGhpcy0+b3JkZXItPmdldEN1c3RvbWVyKCktPmNvbW1pdFN0YXR1c09ubHkoKTsKCQkJfQoJCQkKCQkJaWYoISR0aGlzLT5pc0FwaVJlcXVlc3QpCgkJCXsKCQkJCS8vIHJlZGlyZWN0IHRoZSB1c2VyIGJhY2sgdG8gdGhlIGNoZWNrb3V0IHBhZ2UgdGhleSBjYW1lIGZyb20gaWYgdGhlIFVSTCBpcyBwcmVzZW50LAoJCQkJLy8gb3RoZXJ3aXNlIHJlZGlyZWN0IHRoZW0gdG8gdGhlIGRlZmF1bHQgZXJyb3IgcGFnZQoJCQkJaWYoJHRoaXMtPmNoZWNrb3V0VXJsICE9ICIiKQoJCQkJewoJCQkJCS8vIHN0b3JlIFBPU1QgZGF0YSBpbiBzZXNzaW9uIHNvIGl0IGNhbiBiZSB1c2VkIHRvIHByZS1wb3B1bGF0ZSB0aGUgY2hlY2tvdXQgZm9ybQoJCQkJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfQ0hFQ0tPVVRfRk9STSwgc2VyaWFsaXplKCR0aGlzLT5yZXF1ZXN0RGF0YSkpOwoJCQkJCQoJCQkJCSR1cmwgPSAkdGhpcy0+Y2hlY2tvdXRVcmw7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokRVJST1IpOwoJCQkJfQoJCgkJCQkkdXJsID0gTU1fVXRpbHM6OmFwcGVuZFVybFBhcmFtKCR1cmwsIE1NX1Nlc3Npb246OiRQQVJBTV9NRVNTQUdFX0tFWSwgJHJlc3VsdC0+Z2V0TWVzc2FnZSgpLCB0cnVlKTsKCQkJCXdwX3JlZGlyZWN0KCR1cmwpOwoJCQkJZXhpdDsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3VsdC0+Z2V0TWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCX0KCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIHJlZGlyZWN0cyB0aGUgY3VzdG9tZXIgdG8gYW4gb2Zmc2l0ZSBzZXJ2aWNlLCBwYXNzaW5nIGFsbCBvZiB0aGUgZGF0YSByZWxhdGVkIHRvIHRoZSBvcmRlciwgYW5kCgkgKiBkaXNwbGF5cyBhbiBpbnRlcm1lZGlhdGUgc3BsYXNoIHNjcmVlbiBpbmZvcm1pbmcgdGhlbSB0aGF0IHRoZXkncmUgYmVpbmcgcmVkaXJlY3RlZC4KCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiByZWRpcmVjdFRvT2Zmc2l0ZVNlcml2Y2UoKQoJewoJCSR0aGlzLT5vcmRlci0+cHJlcHJvY2Vzc09yZGVyKCk7CgkJJGh0bWwgPSAkdGhpcy0+cGF5bWVudFNlcnZpY2UtPmRpc3BsYXlQYXltZW50Rm9ybSgkdGhpcy0+b3JkZXIpOwoJCgkJPz4KCQk8IURPQ1RZUEUgaHRtbCBQVUJMSUMgIi0vL1czQy8vRFREIFhIVE1MIDEuMCBUcmFuc2l0aW9uYWwvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvVFIveGh0bWwxL0RURC94aHRtbDEtdHJhbnNpdGlvbmFsLmR0ZCI+CgkJPGh0bWwgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWwiPgoJCTxoZWFkPgoJCTxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgoJCTx0aXRsZT5SZWRpcmVjdGluZyB0byA8P3BocCBlY2hvICR0aGlzLT5wYXltZW50U2VydmljZS0+Z2V0TmFtZSgpOyA/Pi4uLjwvdGl0bGU+CgkJCgkJPHN0eWxlPgoJCWJvZHl7CgkJCXRleHQtYWxpZ246Y2VudGVyOwoJCQlmb250OjE2cHgvMS40IEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7CgkJfQoJCS53YWl0ewoJCQl3aWR0aDo2MDBweDsKCQkJbWFyZ2luOjgwcHggYXV0bzsKCQkJYm9yZGVyOjVweCBzb2xpZCAjZTVlNWU1OwoJCQlib3JkZXItcmFkaXVzOjEwcHg7CgkJCXBhZGRpbmc6MTBweDsKCQkJcG9zaXRpb246cmVsYXRpdmU7CgkJfQoJCS53YWl0IGltZ3sKCQkJbWFyZ2luOjEwcHg7CgkJfQoJCS53YWl0IGgxewoJCQlmb250OmJvbGQgMzZweC8xLjQgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKCQkJY29sb3I6IzFCNDg3NTsKCQl9CgkJPC9zdHlsZT4KCQk8L2hlYWQ+CgkJCgkJPGJvZHk+CgkJPGRpdiBjbGFzcz0id2FpdCI+CgkJPGgxPlBsZWFzZSB3YWl0Li4uPC9oMT4KCQk8cD5QbGVhc2Ugd2FpdCB3aGlsZSB3ZSB0cmFuc2ZlciB5b3UgdG8gPGJyIC8+PD9waHAgZWNobyAkdGhpcy0+cGF5bWVudFNlcnZpY2UtPmdldE5hbWUoKTsgPz4gdG8gY29tcGxldGUgeW91ciBwdXJjaGFzZS48L3A+CgkJPC9kaXY+CgkJPD9waHAgZWNobyAkaHRtbDsgPz4KCQk8L2JvZHk+CgkJPC9odG1sPgoJCTw/cGhwCgl9CgkKCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlQ3VzdG9tRmllbGREYXRhKCkKCXsKCQkvLyBzYXZlIGN1c3RvbSBkYXRhCgkJZm9yZWFjaCgkdGhpcy0+Y3VzdG9tRGF0YSBhcyAkZmllbGRJZD0+JHZhbHVlKQoJCXsKCQkJJHRoaXMtPm9yZGVyLT5nZXRDdXN0b21lcigpLT5zZXRDdXN0b21EYXRhKGludHZhbCgkZmllbGRJZCksIHN0cmlwc2xhc2hlcygkdmFsdWUpKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBJbiBhIGNoZWNrb3V0IGZvcm0gaXQncyBwb3NzaWJsZSBmb3Igc29tZSB2YWx1ZXMgdG8gYmUgZW50ZXJlZCBpbiBlaXRoZXIgYW4gaW5wdXQgZm9ybQoJICogZmllbGQgb3IgYSBoaWRkZW4gZm9ybSBmaWVsZC4gRm9yIGV4YW1wbGUsIGlmIHRoZSBmb3JtIGZpZWxkIGlzICdtbV9maWVsZF9iaWxsaW5nX2FkZHJlc3MnLCB0aGUKCSAqIGRhdGEgY291bGQgZWl0aGVyIGJlIGluICdtbV9maWVsZF9iaWxsaW5nX2FkZHJlc3MnIGlmIHRoZSB1c2VyIGVudGVyZWQgaXQgaW4gb3IgJ21tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzc19vdmVycmlkZScKCSAqIGlmIHRoZSBkYXRhIGNhbWUgZnJvbSBhIGRlZmF1bHQgdmFsdWUgc2V0IGluIGEgaGlkZGVuIGZvcm0gZmllbGQuIFRoaXMgbWV0aG9kIHRha2VzIHRoZSBmb3JtIGRhdGEgYW5kIGEgZmllbGQgbmFtZSBhbmQKCSAqIHJldHVybnMgdGhlIGRhdGEgdGhhdCBzaG91bGQgYmUgdXNlZCBiYXNlZCBvbiB3aGF0IHRoZSB1c2VyIGVudGVyZWQgb3IgaWYgdGhlcmUncyBoaWRkZW4gZm9ybSBkYXRhLgoJICoKCSAqIEBwYXJhbSBTdHJpbmcgJGZpZWxkTmFtZSBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBkYXRhIGZyb20gdGhlIGNoZWNrb3V0IGZvcm0KCSAqIEByZXR1cm4gU3RyaW5nIHRoZSBkYXRhIGZyb20gdGhlIGZvcm0gdGhhdCBzaG91bGQgYmUgdXNlIGZvciB0aGUgZmllbGQgbmFtZSBwYXNzZWQKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDaGVja291dEZvcm1WYWx1ZSgkZmllbGROYW1lKQoJewoJCSRhbGxvd2VkSGlkZGVuRmllbGRzID0gYXJyYXkoIm1tX2ZpZWxkX3Bhc3N3b3JkIiwibW1fZmllbGRfZmlyc3RfbmFtZSIsIm1tX2ZpZWxkX2xhc3RfbmFtZSIsIm1tX2ZpZWxkX3Bob25lIiwKCQkJCSJtbV9maWVsZF9iaWxsaW5nX2FkZHJlc3MiLCJtbV9maWVsZF9iaWxsaW5nX2NpdHkiLCAibW1fZmllbGRfYmlsbGluZ19zdGF0ZSIsIm1tX2ZpZWxkX2JpbGxpbmdfemlwIiwKCQkJCSJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiLCJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIiwibW1fZmllbGRfc2hpcHBpbmdfY2l0eSIsIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIiwKCQkJCSJtbV9maWVsZF9zaGlwcGluZ196aXAiLCJtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5Iik7CgkKCQkkdmFsdWUgPSAiIjsKCQlpZihpc3NldCgkdGhpcy0+cmVxdWVzdERhdGFbJGZpZWxkTmFtZV0pIHx8IGlzc2V0KCR0aGlzLT5yZXF1ZXN0RGF0YVskZmllbGROYW1lLiJfb3ZlcnJpZGUiXSkpCgkJewoJCQlpZihpbl9hcnJheSgkZmllbGROYW1lLCAkYWxsb3dlZEhpZGRlbkZpZWxkcykgJiYgaXNzZXQoJHRoaXMtPnJlcXVlc3REYXRhWyRmaWVsZE5hbWUuIl9vdmVycmlkZSJdKSkKCQkJewoJCQkJJHZhbHVlID0gJHRoaXMtPnJlcXVlc3REYXRhWyRmaWVsZE5hbWUuIl9vdmVycmlkZSJdOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHZhbHVlID0gJHRoaXMtPnJlcXVlc3REYXRhWyRmaWVsZE5hbWVdOwoJCQl9CgkJfQoJCXJldHVybiAkdmFsdWU7Cgl9CgkKCQoJLyoqCgkgKiBUaGlzIG1ldGhvZCBkZXRlcm1pbmVzIGlmIHRoZSBjdXJyZW50IHBheW1lbnQgc2VydmljZSBpcyBhbiBvbnNpdGUgc2VydmljZS4KCSAqIAoJICogQHJldHVybiBib29sZWFuIGEgYm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZSBjdXJyZW50IHBheW1lbnQgc2VydmljZSBpcyBhbiBvbnNpdGUgc2VydmljZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIGlzT25zaXRlUmVxdWVzdCgpCgl7CgkJaWYoJHRoaXMtPnBheW1lbnRTZXJ2aWNlICYmICgkdGhpcy0+cGF5bWVudFNlcnZpY2UgaW5zdGFuY2VvZiBNTV9QYXltZW50U2VydmljZSkpCgkJewoJCQlyZXR1cm4gJHRoaXMtPnBheW1lbnRTZXJ2aWNlLT5zdXBwb3J0c0ZlYXR1cmUoTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6T05TSVRFX1NFUlZJQ0UpOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9Cn0K', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(149, 'defaultaffiliateprovider', 'Y2xhc3MgTU1fRGVmYXVsdEFmZmlsaWF0ZVByb3ZpZGVyIGV4dGVuZHMgTU1fQWJzdHJhY3RBZmZpbGlhdGVQcm92aWRlciB7CgkJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwcm92aWRlcl9pbmZvKSB7CgkJCXBhcmVudDo6X19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pOwoJCX0KCQoJCS8qKgoJCSAqIFJlcG9ydCB0aGUgZmVhdHVyZXMgdGhhdCBkZWZhdWx0IGFmZmlsaWF0ZSBwcm92aWRlcnMgc3VwcG9ydHMKCQkgKgoJCSAqIEBwYXJhbSBpbnRlZ2VyICRmZWF0dXJlQ29uc3QgYSBjb25zdCBhcyBkZWZpbmVkIGluIE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmVhdHVyZXMKCQkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdCBzdXBwb3J0ZWQKCQkgKi8KCQlwdWJsaWMgZnVuY3Rpb24gc3VwcG9ydHNGZWF0dXJlKCRmZWF0dXJlQ29uc3QpCgkJewoJCQkkc3VwcG9ydGVkW10gPSBNTV9BZmZpbGlhdGVQcm92aWRlckZlYXR1cmVzOjpDVVNUT01fUkVCSUxMX0NPTU1JU1NJT05TOwoJCQlyZXR1cm4gaW5fYXJyYXkoJGZlYXR1cmVDb25zdCwkc3VwcG9ydGVkLHRydWUpOwoJCX0KCQkKCQkvKioKCQkgKiBSZXR1cm5zIGFuIGVtcHR5IGFycmF5LCBzaW5jZSBubyBwcm9maWxlcyBjYW4gYmUgY29uZmlndXJlZCB1c2luZyB0aGUgZGVmYXVsdCBwcm92aWRlcgoJCSAqLwoJCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXlvdXRQcm9maWxlcygpIHsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShhcnJheSgpKTsKCQl9CgkJCgkJLyoqCgkJICogUmV0dXJucyBhbiBvYmplY3QgY2FwYWJsZSBvZiByZW5kZXJpbmcgdGhlIGRlZmF1bHQgb3B0aW9ucyBkaWFsb2cKCQkgKiBAcGFyYW0gQXJyYXkgJHBvc3QgQW55IGRhdGEgcG9zdGVkIG5lY2Vzc2FyeSB0byBkcmF3IHRoZSBvcHRpb25zIGRpYWxvZwoJCSAqIEByZXR1cm4gT2JqZWN0IG9mIHR5cGUgTU1fQWZmaWxpYXRlUHJvdmlkZXJEaWFsb2cgcmVwcmVzZW50aW5nIHRoZSBkaWFsb2cgdG8gZHJhdwoJCSAqLwoJCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJPcHRpb25zRGlhbG9nKCRwb3N0KSB7CgkJCSRmb3JtID0gbmV3IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRGlhbG9nKCk7CgkJCSRmb3JtLT5jb250cm9scyA9ICc8YnV0dG9uIGlkPSJhZmZpbGlhdGUtcHJvdmlkZXItc2F2ZSIgY2xhc3M9Im1tLXVpLWJ1dHRvbiBibHVlIiBvbkNsaWNrPSJtbWpzLnByb3ZpZGVyT3B0aW9uc1NhdmUoXCdcJyk7IHJldHVybiBmYWxzZTsiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsiPlNhdmUgU2V0dGluZ3M8L2J1dHRvbj4nOwoJCQlyZXR1cm4gJGZvcm07CgkJfQoJCQoJCS8qKgoJCSAqIFJlc3BvbmRzIHRvIGRhdGEgY29sbGVjdGVkIGZyb20gdGhlIGZvcm0gcmVuZGVyZWQgYnkgcmVuZGVyT3B0aW9uc0RpYWxvZwoJCSAqIEBzZWUgTU1fQWJzdHJhY3RBZmZpbGlhdGVQcm92aWRlcjo6aGFuZGxlT3B0aW9uc0RpYWxvZygpCgkJICogQHBhcmFtICRvcHRpb25EYXRhIEFycmF5IGNvbnRhaW5pbmcgdGhlIHBvc3RlZCB2YWx1ZXMKCQkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJCSAqLwoJCXB1YmxpYyBmdW5jdGlvbiBoYW5kbGVPcHRpb25zRGlhbG9nKCRvcHRpb25EYXRhKSAKCQl7CgkJCWlmIChpc19hcnJheSgkb3B0aW9uRGF0YSkpIAoJCQl7CgkJCQkkcHJvdmlkZXJfdG9rZW4gPSAkb3B0aW9uRGF0YVsncHJvdmlkZXJfdG9rZW4nXTsKCQkJCQoJCQkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9BZmZpbGlhdGVQcm92aWRlcigpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHByb3ZpZGVyX3Rva2VuKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkJCWlmICgkcHJvdmlkZXJfZW50aXR5LT5pc1ZhbGlkKCkpIAoJCQkJewoJCQkJCS8vZmlyc3Qgd3JpdGUgdGhlIHByb3ZpZGVyJ3MgY29uZmlndXJhdGlvbiBvcHRpb25zCgkJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0QWN0aXZlKHRydWUpOwoJCQkJCSRjb21taXRfcmVzcG9uc2UgPSAkcHJvdmlkZXJfZW50aXR5LT5jb21taXREYXRhKCk7CgkJCQkJaWYgKCRjb21taXRfcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikgCgkJCQkJewoJCQkJCQkvL3Bhc3MgdGhyb3VnaCBlcnJvcnMgY29tbWl0dGluZyB0byB0aGUgZGF0YWJhc2UKCQkJCQkJcmV0dXJuICRjb21taXRfcmVzcG9uc2U7CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGUgZGVmYXVsdCBhZmZpbGlhdGUgcHJvdmlkZXIgaGFzIGJlZW4gY29uZmlndXJlZCBzdWNjZXNzZnVsbHkiLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk7CQoJCQkJCX0KCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJLy9mYWlsZWQgdG8gbG9hZCBlbnRpdHkgZnJvbSB0YWJsZQoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byBzYXZlIHNldHRpbmdzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCX0KCQkKCX0K', 0, '2018-11-21 06:38:54'),
(150, 'abstractreportdatamodel', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KYWJzdHJhY3QgY2xhc3MgTU1fQWJzdHJhY3RSZXBvcnREYXRhTW9kZWwKewoJcHVibGljIHN0YXRpYyAkU09SVF9BU0MgPSAic29ydF9hc2MiOwoJcHVibGljIHN0YXRpYyAkU09SVF9ERVNDID0gInNvcnRfZGVzYyI7CgkKCS8qKgoJICogU29ydHMgdGhlIHN1cHBsaWVkIHJlc3VsdHMgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBjb2x1bW4gYW5kIGRpcmVjdGlvbgoJICogSWYgYW4gaW52YWxpZCBjb2x1bW4gaXMgc3VwcGxpZWQsIG9yIHRoZXJlIGlzIG5vIGRhdGEsIG5vdGhpbmcgaGFwcGVucy4KCSAqIElmIGRpcmVjdGlvbiBpcyBpbnZhbGlkLCBpdCBkZWZhdWx0cyB0byB0aGUgcGhwIGNvbnN0YW50IFNPUlRfREVTQwoJICogQWxsIHNvcnRpbmcgaXMgJ25hdHVyYWwgc29ydGluZycgdXNpbmcgUEhQJ3MgaW50ZXJuYWwgZnVuY3Rpb25hbGl0eQoJICoKCSAqIEBwYXJhbSBzdHJpbmcgJHNvcnRDb2x1bW4KCSAqIEBwYXJhbSBzdHJpbmcgJHNvcnREaXJlY3Rpb24KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzb3J0UmVzdWx0cygmJHJlc3VsdHMsICRzb3J0Q29sdW1uLCAkc29ydERpcmVjdGlvbiwgJGdyaWRGb3JtYXQ9ZmFsc2UpCgl7CgkJaWYgKGNvdW50KCRyZXN1bHRzKSA9PSAwKQoJCXsKCQkJcmV0dXJuOyAvL25vIGRhdGEsIG5vdGhpbmcgdG8gZG8KCQl9CgkJaWYgKCFlbXB0eSgkc29ydENvbHVtbikgJiYgIWVtcHR5KCRzb3J0RGlyZWN0aW9uKSkKCQl7CgkJCWlmICh2ZXJzaW9uX2NvbXBhcmUocGhwdmVyc2lvbigpLCI1LjQiLCI+PSIpKQoJCQl7CgkJCQkkZmlyc3RSb3cgPSByZXNldCgkcmVzdWx0cyk7CgkJCQlpZiAoKCRncmlkRm9ybWF0ICYmIGlzc2V0KCRmaXJzdFJvd1snZGF0YSddWyRzb3J0Q29sdW1uXSkpIHx8IGlzc2V0KCRmaXJzdFJvd1skc29ydENvbHVtbl0pKSAvL21ha2Ugc3VyZSB0aGUgY29sdW1uIHRvIGJlIHNvcnRlZCBleGlzdHMKCQkJCXsKCQkJCQlzd2l0Y2ggKCRzb3J0RGlyZWN0aW9uKQoJCQkJCXsKCQkJCQkJY2FzZSBzZWxmOjokU09SVF9BU0M6CgkJCQkJCQkkc29ydERpcmVjdGlvbiA9IFNPUlRfQVNDOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkkc29ydERpcmVjdGlvbiA9IFNPUlRfREVTQzsKCQkJCQl9CgkJCQkJCQoJCQkJCSR0bXBDb2x1bW5EYXRhID0gYXJyYXkoKTsKCQkJCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkcm93KQoJCQkJCXsKCQkJCQkJJHRtcENvbHVtbkRhdGFbXSA9ICRncmlkRm9ybWF0PyRyb3dbJ2RhdGEnXVskc29ydENvbHVtbl06JHJvd1skc29ydENvbHVtbl07CgkJCQkJfQoJCQkJCWFycmF5X211bHRpc29ydCgkdG1wQ29sdW1uRGF0YSwkc29ydERpcmVjdGlvbixTT1JUX05BVFVSQUwsJHJlc3VsdHMpOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJLy9mb3IgcGhwIDwgNS40Li4uIHNsb3dlciBsZXNzLWVmZmljaWVudCAoYnV0IGNvbXBhdGlibGUpIHNvcnQKCQkJCSRtdWx0aXBsaWVyID0gKCRzb3J0RGlyZWN0aW9uID09IHNlbGY6OiRTT1JUX0RFU0MpPy0xOjE7CgkJCQlpZiAoJGdyaWRGb3JtYXQpCgkJCQl7CgkJCQkJJGZ1bmN0aW9uQm9keSA9ICJyZXR1cm4geyRtdWx0aXBsaWVyfSAqIHN0cm5hdGNtcCggXCRlbDFbJ2RhdGEnXVsneyRzb3J0Q29sdW1ufSddLCBcJGVsMlsnZGF0YSddWyd7JHNvcnRDb2x1bW59J10pOyI7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCSRmdW5jdGlvbkJvZHkgPSAicmV0dXJuIHskbXVsdGlwbGllcn0gKiBzdHJuYXRjbXAoIFwkZWwxWyd7JHNvcnRDb2x1bW59J10sIFwkZWwyWyd7JHNvcnRDb2x1bW59J10pOyI7CgkJCQl9CgkJCQl1c29ydCggJHJlc3VsdHMsIGNyZWF0ZV9mdW5jdGlvbiggJyRlbDEsICRlbDInLCAkZnVuY3Rpb25Cb2R5ICkpOwoJCQl9CgkJfQoJfQp9', 0, '2018-11-21 06:38:54'),
(151, 'orderitemaccess', 'LyoqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9PcmRlckl0ZW1BY2Nlc3MgZXh0ZW5kcyBNTV9FbnRpdHkKewkKCXB1YmxpYyBzdGF0aWMgJEFDQ0VTU19UWVBFX01FTUJFUlNISVAgPSAibWVtYmVyc2hpcCI7CglwdWJsaWMgc3RhdGljICRBQ0NFU1NfVFlQRV9CVU5ETEUgPSAiYnVuZGxlIjsKCQoJcHJpdmF0ZSAkYWNjZXNzVHlwZSA9ICIiOwoJcHJpdmF0ZSAkYWNjZXNzVHlwZUlkID0gIiI7Cglwcml2YXRlICR1c2VySWQgPSAiIjsKCXByaXZhdGUgJG9yZGVySXRlbUlkID0gIiI7CgoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpCgl7CQoJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJfQoKCS8qKgoJICogQHJldHVybiBhcnJheSBvZiBNTV9PcmRlckl0ZW1BY2Nlc3MgaW5zdGFuY2VzCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0T3JkZXJJdGVtQnlBY2Nlc3MoJHVzZXJJZCwgJGFjY2Vzc1R5cGUsICRhY2Nlc3NUeXBlSWQpCgl7CgkJJGl0ZW1zID0gYXJyYXkoKTsKCQoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9PUkRFUl9JVEVNX0FDQ0VTUy4iIFdIRVJFIHVzZXJfaWQ9J3skdXNlcklkfScgQU5EIGFjY2Vzc190eXBlPSd7JGFjY2Vzc1R5cGV9JyBBTkQgYWNjZXNzX3R5cGVfaWQ9J3skYWNjZXNzVHlwZUlkfSc7IjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQlpZigkcmVzdWx0cykKCQl7CgkJCWZvcmVhY2goJHJlc3VsdHMgYXMgJHJvd0RhdGEpCgkJCXsKCQkJCSRvcmRlckl0ZW1BY2Nlc3MgPSBuZXcgTU1fT3JkZXJJdGVtQWNjZXNzKCk7CgkJCQkkb3JkZXJJdGVtQWNjZXNzLT5zZXREYXRhKCRyb3dEYXRhKTsKCQkJCSRpdGVtc1tdID0gJG9yZGVySXRlbUFjY2VzczsKCQkJfQoJCX0KCQoJCXJldHVybiAkaXRlbXM7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRBY2Nlc3NCeU9yZGVySXRlbSgkb3JkZXJJdGVtSWQpCgl7CgkJJG9yZGVySXRlbUFjY2VzcyA9IG5ldyBNTV9PcmRlckl0ZW1BY2Nlc3MoKTsKCQoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9PUkRFUl9JVEVNX0FDQ0VTUy4iIFdIRVJFIG9yZGVyX2l0ZW1faWQ9J3skb3JkZXJJdGVtSWR9JyBMSU1JVCAxOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCgkJaWYoJHJlc3VsdCkKCQl7CgkJCSRvcmRlckl0ZW1BY2Nlc3MtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UKCQl7CgkJCSRvcmRlckl0ZW1BY2Nlc3MtPmludmFsaWRhdGUoKTsKCQl9CgkKCQlyZXR1cm4gJG9yZGVySXRlbUFjY2VzczsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0RGF0YSgkZGF0YSkKCXsKCQl0cnkgCgkJewkKCQkJaWYoJGRhdGEpCgkJCXsKCQkJCSR0aGlzLT5hY2Nlc3NUeXBlID0gJGRhdGEtPmFjY2Vzc190eXBlOwoJCQkJJHRoaXMtPmFjY2Vzc1R5cGVJZCA9ICRkYXRhLT5hY2Nlc3NfdHlwZV9pZDsKCQkJCSR0aGlzLT51c2VySWQgPSAkZGF0YS0+dXNlcl9pZDsKCQkJCSR0aGlzLT5vcmRlckl0ZW1JZCA9ICRkYXRhLT5vcmRlcl9pdGVtX2lkOwoJCQkJCgkJCQlpZihpbnR2YWwoJHRoaXMtPnVzZXJJZCkgPiAwICYmIGludHZhbCgkdGhpcy0+YWNjZXNzVHlwZUlkKSA+IDAgJiYgaW50dmFsKCR0aGlzLT5vcmRlckl0ZW1JZCkgPiAwKQoJCQkJewoJCQkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQkJCX0KCQkJfQoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8gdmFsaWRhdGUgcmVxdWlyZWQgZGF0YQoJCWlmKGVtcHR5KCR0aGlzLT51c2VySWQpIHx8IGVtcHR5KCR0aGlzLT5vcmRlckl0ZW1JZCkgfHwgZW1wdHkoJHRoaXMtPmFjY2Vzc1R5cGUpIHx8IGVtcHR5KCR0aGlzLT5hY2Nlc3NUeXBlSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNhdmUgb3JkZXIgaXRlbSBhY2Nlc3MuIE9yZGVyIGl0ZW0gSUQsIGFjY2VzcyB0eXBlLCBhY2Nlc3MgdHlwZSBJRCBhbmQgdXNlciBJRCBhcmUgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIGRlbGV0ZSBvcmRlciBpdGVtIGFjY2VzcyByb3dzIHdpdGggdGhlIGV4YWN0IHNhbWUgcHJvcGVydGllcwoJCSR0aGlzLT5kZWxldGUoKTsKCQkKCQkkc3FsID0gIklOU0VSVCBJTlRPICIuTU1fVEFCTEVfT1JERVJfSVRFTV9BQ0NFU1MuIiBTRVQgIjsKCQkkc3FsIC49ICIgYWNjZXNzX3R5cGU9J3skdGhpcy0+YWNjZXNzVHlwZX0nLCBhY2Nlc3NfdHlwZV9pZD0neyR0aGlzLT5hY2Nlc3NUeXBlSWR9JywgIjsKCQkkc3FsIC49ICIgdXNlcl9pZD0neyR0aGlzLT51c2VySWR9Jywgb3JkZXJfaXRlbV9pZCA9ICd7JHRoaXMtPm9yZGVySXRlbUlkfSc7IjsKCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQoJCWlmKCEkcmVzdWx0KQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGluc2VydCBvcmRlciBpdGVtIElEICd7JHRoaXMtPm9yZGVySXRlbUlkfScgd2l0aCB1c2VyIElEICd7JHRoaXMtPnVzZXJJZH0nIGFjY2VzcyB0eXBlICd7JHRoaXMtPmFjY2Vzc1R5cGV9JyAoeyR0aGlzLT5hY2Nlc3NUeXBlSWR9KSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8gdmFsaWRhdGUgcmVxdWlyZWQgZGF0YQoJCWlmKGVtcHR5KCR0aGlzLT51c2VySWQpIHx8IGVtcHR5KCR0aGlzLT5vcmRlckl0ZW1JZCkgfHwgZW1wdHkoJHRoaXMtPmFjY2Vzc1R5cGUpIHx8IGVtcHR5KCR0aGlzLT5hY2Nlc3NUeXBlSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBvcmRlciBpdGVtIGFjY2Vzcy4gT3JkZXIgaXRlbSBJRCwgYWNjZXNzIHR5cGUsIGFjY2VzcyB0eXBlIElEIGFuZCB1c2VyIElEIGFyZSByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX09SREVSX0lURU1fQUNDRVNTLiIgV0hFUkUgIjsKCQkkc3FsIC49ICIgYWNjZXNzX3R5cGU9J3skdGhpcy0+YWNjZXNzVHlwZX0nIEFORCBhY2Nlc3NfdHlwZV9pZD0neyR0aGlzLT5hY2Nlc3NUeXBlSWR9JyBBTkQgIjsKCQkkc3FsIC49ICIgdXNlcl9pZD0neyR0aGlzLT51c2VySWR9JyBBTkQgb3JkZXJfaXRlbV9pZCA9ICd7JHRoaXMtPm9yZGVySXRlbUlkfSc7IjsKCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQoJCWlmKCEkcmVzdWx0KQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBvcmRlciBpdGVtIElEICd7JHRoaXMtPm9yZGVySXRlbUlkfScgd2l0aCB1c2VyIElEICd7JHRoaXMtPnVzZXJJZH0nIGFjY2VzcyB0eXBlICd7JHRoaXMtPmFjY2Vzc1R5cGV9JyAoeyR0aGlzLT5hY2Nlc3NUeXBlSWR9KSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKiBHRVRURVJTIC8gU0VUVEVSUyAqKi8KCglwdWJsaWMgZnVuY3Rpb24gc2V0QWNjZXNzVHlwZSgkdmFsKQoJewoJCWlmKCR2YWwgPT0gc2VsZjo6JEFDQ0VTU19UWVBFX0JVTkRMRSB8fCAkdmFsID09IHNlbGY6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQKQoJCXsKCQkJJHRoaXMtPmFjY2Vzc1R5cGUgPSAkdmFsOwoJCX0KCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzVHlwZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hY2Nlc3NUeXBlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY2Nlc3NUeXBlSWQoJHZhbCkKCXsKCQkkdGhpcy0+YWNjZXNzVHlwZUlkID0gJHZhbDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzVHlwZUlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFjY2Vzc1R5cGVJZDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0VXNlcklkKCR2YWwpCgl7CgkJJHRoaXMtPnVzZXJJZCA9ICR2YWw7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldFVzZXJJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT51c2VySWQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldE9yZGVySXRlbUlkKCR2YWwpCgl7CgkJJHRoaXMtPm9yZGVySXRlbUlkID0gJHZhbDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0T3JkZXJJdGVtSWQoKQoJewoJCXJldHVybiAkdGhpcy0+b3JkZXJJdGVtSWQ7Cgl9CgkKfQ==', 0, '2018-11-21 06:38:54'),
(152, 'productview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1Byb2R1Y3RWaWV3IGV4dGVuZHMgTU1fUkJBQ1Byb2R1Y3RNYW5hZ2VyVmlldwp7CQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fR0VUX01FTUJFUk1PVVNFX1BST0RVQ1RfREVTQyA9ICJnZXRNTVByb2R1Y3REZXNjcmlwdGlvbiI7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0FWRToKCQkJCQlyZXR1cm4gJHRoaXMtPnNhdmVQcm9kdWN0KCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZVByb2R1Y3QoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0hPV19CVVlfTk9XX0xJTktTOgoJCQkJCXJldHVybiAkdGhpcy0+c2hvd1B1cmNoYXNlTGlua3MoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fR0VUX01FTUJFUk1PVVNFX1BST0RVQ1RfREVTQzoKCQkJCQlyZXR1cm4gJHRoaXMtPmdldE1NUHJvZHVjdERlc2NyaXB0aW9uKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKE1NX0RhdGFHcmlkICRkZykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHJvd3MgPSBwYXJlbnQ6OmdldERhdGEoTU1fVEFCTEVfUFJPRFVDVFMsIG51bGwsICRkZyk7CgkJcmV0dXJuICRyb3dzOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNhdmVQcm9kdWN0KCRwb3N0KQoJewoJCWlmKCFwcmVnX21hdGNoKCIvXlswLTlcLl0rJC8iLCAkcG9zdFsibW1fcHJpY2UiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJQcmljZSBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKGZsb2F0dmFsKCRwb3N0WyJtbV9wcmljZSJdKSA8PSAwKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiUHJpY2UgbXVzdCBiZSBncmVhdGVyIHRoYW4gMC5cblxuSWYgeW91IHdhbnQgdG8gY3JlYXRlIGEgZnJlZSBtZW1iZXJzaGlwIGxldmVsIG9yIGJ1bmRsZSwgbm8gcHJvZHVjdCBpcyBuZWVkZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCRwb3N0WyJtbV90cmlhbF9hbW91bnQiXSE9IiIgJiYgIXByZWdfbWF0Y2goIi9eWzAtOVwuXSskLyIsICRwb3N0WyJtbV90cmlhbF9hbW91bnQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUcmlhbCBhbW91bnQgbXVzdCBiZSBhIHZhbGlkIG51bWJlciIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZigkcG9zdFsibW1fdHJpYWxfZHVyYXRpb24iXSE9IiIgJiYgIXByZWdfbWF0Y2goIi9eWzAtOV0rJC8iLCAkcG9zdFsibW1fdHJpYWxfZHVyYXRpb24iXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUcmlhbCBkdXJhdGlvbiBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCRwb3N0WyJtbV9yZWJpbGxfcGVyaW9kIl0hPSIiICYmICFwcmVnX21hdGNoKCIvXlswLTldKyQvIiwgJHBvc3RbIm1tX3JlYmlsbF9wZXJpb2QiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJSZWJpbGwgcHJlaW9kIG11c3QgYmUgYSB2YWxpZCBudW1iZXIiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYoJHBvc3RbIm1tX251bWJlcl9vZl9wYXltZW50cyJdIT0iIiAmJiAhcHJlZ19tYXRjaCgiL15bMC05XSskLyIsICRwb3N0WyJtbV9udW1iZXJfb2ZfcGF5bWVudHMiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJOdW1iZXIgb2YgcGF5bWVudHMgbXVzdCBiZSBhIHZhbGlkIG51bWJlciIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZihpbnR2YWwoJHBvc3RbIm1tX2RvX2xpbWl0X3RyaWFsIl0pID09IDEgJiYgZW1wdHkoJHBvc3RbIm1tX3RyaWFsX2FsdGVybmF0ZV9wcm9kdWN0Il0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQW4gYWx0ZXJuYXRlIHByb2R1Y3QgbXVzdCBiZSBkZWZpbmVkIGluIG9yZGVyIHRvIGxpbWl0IHRoZSB0cmlhbCB0byBvbmUgcGVyIG1lbWJlciIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZigkcG9zdFsibW1faXNfcmVjdXJyaW5nX3ZhbCJdICE9ICIxIikKCQl7CgkJCSRwb3N0WyJtbV9yZWJpbGxfcGVyaW9kIl0gPSAiMCI7CgkJCSRwb3N0WyJtbV9yZWJpbGxfZnJlcXVlbmN5Il0gPSAiIjsKCQl9CgkJCgkJLy9pZiBhIHByb2R1Y3QgaGFzIGEgdHJpYWwsIHRoZXJlIG11c3QgYmUgYXQgbGVhc3Qgb25lIHJlY3VycmluZyBiaWxsaW5nLCBzbyBlbnN1cmUgdGhhdCBhbGwgcHJvZHVjdHMgd2l0aCB0cmlhbHMgYXJlIGNvbmZpZ3VyZWQgYXMgc3Vic2NyaXB0aW9ucwoJCWlmICgoJHBvc3RbIm1tX2hhc190cmlhbF92YWwiXSA9PSAiMSIpICYmICgkcG9zdFsibW1faXNfcmVjdXJyaW5nX3ZhbCJdICE9ICIxIikpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJQcm9kdWN0cyB3aXRoIGEgdHJpYWwgbXVzdCBiZSBjb25maWd1cmVkIGFzIFN1YnNjcmlwdGlvbiBwcm9kdWN0cyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCRwb3N0WyJtbV9zdGF0dXMiXSA9PSAiYWN0aXZlIikKCQl7CgkJCSRwb3N0WyJtbV9zdGF0dXMiXSA9ICIxIjsKCQl9CgkJZWxzZQoJCXsKCQkJJHBvc3RbIm1tX3N0YXR1cyJdID0gIjAiOwoJCX0KCQkKCQkkaXNVcGRhdGUgPSBmYWxzZTsKCQlpZihpc3NldCgkcG9zdFsibW1faWQiXSkgJiYgaW50dmFsKCRwb3N0WyJtbV9pZCJdKSA+IDApCgkJewoJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRwb3N0WyJtbV9pZCJdKTsKCQkJaWYgKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRpc1VwZGF0ZSA9IHRydWU7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgpOwoJCX0KCQkKCQkkcHJvZHVjdC0+c2V0TmFtZSgkcG9zdFsibW1fbmFtZSJdKTsKCQkkcHJvZHVjdC0+c2V0U3RhdHVzKCRwb3N0WyJtbV9zdGF0dXMiXSk7CgkJJHByb2R1Y3QtPnNldFNrdSgkcG9zdFsibW1fc2t1Il0pOwoJCSRwcm9kdWN0LT5zZXRJc1NoaXBwYWJsZUZsYWcoJHBvc3RbIm1tX2lzX3NoaXBwYWJsZV92YWwiXSk7CgkJJHByb2R1Y3QtPnNldEhhc1RyaWFsRmxhZygkcG9zdFsibW1faGFzX3RyaWFsX3ZhbCJdKTsKCQkkcHJvZHVjdC0+c2V0VHJpYWxBbW91bnQoJHBvc3RbIm1tX3RyaWFsX2Ftb3VudCJdKTsKCQkkcHJvZHVjdC0+c2V0VHJpYWxEdXJhdGlvbigkcG9zdFsibW1fdHJpYWxfZHVyYXRpb24iXSk7CgkJCgkJaWYgKCRwcm9kdWN0LT5oYXNUcmlhbCgpKQoJCXsKCQkJJHByb2R1Y3QtPnNldExpbWl0VHJpYWxGbGFnKCRwb3N0WyJtbV9kb19saW1pdF90cmlhbCJdKTsKCQkJCgkJCWlmKCRwcm9kdWN0LT5kb0xpbWl0VHJpYWwoKSAmJiBpc3NldCgkcG9zdFsibW1fdHJpYWxfYWx0ZXJuYXRlX3Byb2R1Y3QiXSkpCgkJCXsKCQkJCSRwcm9kdWN0LT5zZXRMaW1pdFRyaWFsQWx0UHJvZHVjdElkKCRwb3N0WyJtbV90cmlhbF9hbHRlcm5hdGVfcHJvZHVjdCJdKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRwcm9kdWN0LT5zZXRMaW1pdFRyaWFsQWx0UHJvZHVjdElkKCcwJyk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCSRwcm9kdWN0LT5zZXRMaW1pdFRyaWFsRmxhZyhmYWxzZSk7CgkJCSRwcm9kdWN0LT5zZXRMaW1pdFRyaWFsQWx0UHJvZHVjdElkKDApOwoJCX0KCQkKCQlpZihpc3NldCgkcG9zdFsibW1fcHVyY2hhc2VfY29uZmlybWF0aW9uX21lc3NhZ2UiXSkpCgkJewoJCQkkcHJvZHVjdC0+c2V0UHVyY2hhc2VDb25maXJtYXRpb25NZXNzYWdlKCRwb3N0WyJtbV9wdXJjaGFzZV9jb25maXJtYXRpb25fbWVzc2FnZSJdKTsKCQl9CgkJCgkJJHByb2R1Y3QtPnNldERlc2NyaXB0aW9uKCRwb3N0WyJtbV9kZXNjcmlwdGlvbiJdKTsKCQkkcHJvZHVjdC0+c2V0UHJpY2UoJHBvc3RbIm1tX3ByaWNlIl0pOwoJCSRwcm9kdWN0LT5zZXRSZWJpbGxQZXJpb2QoJHBvc3RbIm1tX3JlYmlsbF9wZXJpb2QiXSk7CgkJJHByb2R1Y3QtPnNldFJlYmlsbEZyZXF1ZW5jeSgkcG9zdFsibW1fcmViaWxsX2ZyZXF1ZW5jeSJdKTsKCQkkcHJvZHVjdC0+c2V0VHJpYWxGcmVxdWVuY3koJHBvc3RbIm1tX3RyaWFsX2ZyZXF1ZW5jeSJdKTsKCQkKCQlpZigoaXNzZXQoJHBvc3RbIm1tX2RvX2xpbWl0X3BheW1lbnRzIl0pICYmIGludHZhbCgkcG9zdFsibW1fZG9fbGltaXRfcGF5bWVudHMiXSkgPT0gMSkgCgkJCQkmJiAoaXNzZXQoJHBvc3RbIm1tX251bWJlcl9vZl9wYXltZW50cyJdKSAmJiBpbnR2YWwoaXNzZXQoJHBvc3RbIm1tX251bWJlcl9vZl9wYXltZW50cyJdKSkgPiAwKSkKCQl7CgkJCSRwcm9kdWN0LT5zZXRMaW1pdFBheW1lbnRzRmxhZygxKTsKCQkJJHByb2R1Y3QtPnNldE51bWJlck9mUGF5bWVudHMoaW50dmFsKCRwb3N0WyJtbV9udW1iZXJfb2ZfcGF5bWVudHMiXSkpOwoJCX0KCQllbHNlCgkJewoJCQkkcHJvZHVjdC0+c2V0TGltaXRQYXltZW50c0ZsYWcoMCk7CgkJCSRwcm9kdWN0LT5zZXROdW1iZXJPZlBheW1lbnRzKDApOwoJCX0KCQkKCQkkcHJvZHVjdC0+c2V0Q29tbWlzc2lvblByb2ZpbGVJZCgkcG9zdFsibW1fY29tbWlzc2lvbl9wcm9maWxlX3NlbGVjdG9yIl0pOwoJCQoJCSRyZXNwb25zZSA9ICRwcm9kdWN0LT5jb21taXREYXRhKCk7CgkJCgkJaWYgKCRyZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJCgkJLy8gc2V0IHBhcnRuZXIgcGF5b3V0cwoJCSRwcm9kdWN0LT5kZWxldGVQYXJ0bmVycygpOwoJCQoJCWZvcmVhY2goJHBvc3QgYXMgJGtleSA9PiAkdmFsdWUpCgkJewoJCQlpZihzdHJwb3MoJGtleSwgJ21tX3BhcnRuZXJfJykgPT09IDApCgkJCXsKCQkJCSRwYXJ0bmVySWQgPSBzdHJfcmVwbGFjZSgibW1fcGFydG5lcl8iLCAiIiwgJGtleSk7CgkJCQkkYWZmaWxpYXRlSWQgPSAkdmFsdWU7CgkJCQkkY29tbWlzc2lvblByb2ZpbGVJZCA9ICRwb3N0WyJtbV9jb21taXNzaW9uX3Byb2ZpbGVfeyRwYXJ0bmVySWR9Il07CgkJCQkKCQkJCWlmKGVtcHR5KCRjb21taXNzaW9uUHJvZmlsZUlkKSkKCQkJCXsKCQkJCQkkY29tbWlzc2lvblByb2ZpbGVJZCA9IE1NX0NvbW1pc3Npb25Qcm9maWxlOjokREZMVF9DT01NSVNTSU9OX1BST0ZJTEVfSUQ7CgkJCQl9CgoJCQkJaWYoIWVtcHR5KCRhZmZpbGlhdGVJZCkpCgkJCQl7CgkJCQkJJHByb2R1Y3QtPmFkZFBhcnRuZXIoJGFmZmlsaWF0ZUlkLCAkY29tbWlzc2lvblByb2ZpbGVJZCk7CgkJCQl9CgkJCX0KCQl9CgkJCgkJLy8gcmVtb3ZlIG9sZCBhY2Nlc3MgYXNzb2NpYXRpb24gKGlmIGFueSkKCQlpZihpc3NldCgkcG9zdFsibW1fbGFzdF9hc3NvY2lhdGVkX2FjY2Vzc190eXBlIl0pKQoJCXsKCQkJaWYoJHBvc3RbIm1tX2xhc3RfYXNzb2NpYXRlZF9hY2Nlc3NfdHlwZSJdID09ICJtZW1iZXJzaGlwIikKCQkJewoJCQkJaWYoaXNzZXQoJHBvc3RbIm1tX2xhc3RfYXNzb2NpYXRlZF9hY2Nlc3NfaWQiXSkpCgkJCQl7CgkJCQkJJG1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRwb3N0WyJtbV9sYXN0X2Fzc29jaWF0ZWRfYWNjZXNzX2lkIl0pOwoJCQkJCQkKCQkJCQlpZigkbWVtYmVyc2hpcC0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJLy8gY2hlY2sgaWYgdGhpcyBpcyB0aGUgbGFzdCBwcm9kdWN0IGFzc29jaWF0ZWQgd2l0aCB0aGUgbWVtYmVyc2hpcCBsZXZlbAoJCQkJCQkkcHJvZHVjdHMgPSAkbWVtYmVyc2hpcC0+Z2V0UHJvZHVjdElkcygpOwoJCQkJCQkKCQkJCQkJaWYoKGlzc2V0KCRwb3N0WyJtbV9hc3NvY2lhdGVkX2FjY2Vzc192YWx1ZSJdKSAmJiAkcG9zdFsibW1fYXNzb2NpYXRlZF9hY2Nlc3NfdmFsdWUiXSA9PSAibm9uZSIgJiYgY291bnQoJHByb2R1Y3RzKSA9PSAxKSkKCQkJCQkJewoJCQkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ2Fubm90IHJlbW92ZSAneyRwcm9kdWN0LT5nZXROYW1lKCl9JyBmcm9tICd7JG1lbWJlcnNoaXAtPmdldE5hbWUoKX0nIGJlY2F1c2UgaXQgaXMgYSBwYWlkIG1lbWJlcnNoaXAgbGV2ZWwgYW5kIHRoaXMgaXMgdGhlIG9ubHkgcHJvZHVjdCBhc3NvY2lhdGVkIHdpdGggaXQuXG5cbklmIHlvdSB3YW50IHRvIGRpc2Fzc29jaWF0ZSB0aGlzIHByb2R1Y3QsIGdvIHRvIHRoZSBtZW1iZXJzaGlwIGxldmVsIGFuZCBjaGFuZ2UgaXQgdG8gYSBmcmVlIG1lbWJlcnNoaXAgbGV2ZWwuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQkkbWVtYmVyc2hpcC0+cmVtb3ZlUHJvZHVjdCgkcHJvZHVjdC0+Z2V0SWQoKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQkJZWxzZSBpZigkcG9zdFsibW1fbGFzdF9hc3NvY2lhdGVkX2FjY2Vzc190eXBlIl0gPT0gImJ1bmRsZSIpCgkJCXsKCQkJCWlmKGlzc2V0KCRwb3N0WyJtbV9sYXN0X2Fzc29jaWF0ZWRfYWNjZXNzX2lkIl0pKQoJCQkJewoJCQkJCSRidW5kbGUgPSBuZXcgTU1fQnVuZGxlKCRwb3N0WyJtbV9sYXN0X2Fzc29jaWF0ZWRfYWNjZXNzX2lkIl0pOwoJCQkJCQkKCQkJCQlpZigkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkvLyBjaGVjayBpZiB0aGlzIGlzIHRoZSBsYXN0IHByb2R1Y3QgYXNzb2NpYXRlZCB3aXRoIHRoZSBidW5kbGUKCQkJCQkJJHByb2R1Y3RzID0gJGJ1bmRsZS0+Z2V0QXNzb2NpYXRlZFByb2R1Y3RzKCk7CgkJCQkJCQoJCQkJCQlpZigoaXNzZXQoJHBvc3RbIm1tX2Fzc29jaWF0ZWRfYWNjZXNzX3ZhbHVlIl0pICYmICRwb3N0WyJtbV9hc3NvY2lhdGVkX2FjY2Vzc192YWx1ZSJdID09ICJub25lIiAmJiBjb3VudCgkcHJvZHVjdHMpID09IDEpKQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDYW5ub3QgcmVtb3ZlICd7JHByb2R1Y3QtPmdldE5hbWUoKX0nIGZyb20gJ3skYnVuZGxlLT5nZXROYW1lKCl9JyBiZWNhdXNlIGl0IGlzIGEgcGFpZCBidW5kbGUgYW5kIHRoaXMgaXMgdGhlIG9ubHkgcHJvZHVjdCBhc3NvY2lhdGVkIHdpdGggaXQuXG5cbklmIHlvdSB3YW50IHRvIGRpc2Fzc29jaWF0ZSB0aGlzIHByb2R1Y3QsIGdvIHRvIHRoZSBidW5kbGUgYW5kIGNoYW5nZSBpdCB0byBhIGZyZWUgYnVuZGxlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJGJ1bmRsZS0+cmVtb3ZlUHJvZHVjdCgkcHJvZHVjdC0+Z2V0SWQoKSk7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJCgkJLy8gYWRkIG5ldyBhY2Nlc3MgYXNzb2NpYXRpb24KCQlpZihpc3NldCgkcG9zdFsibW1fYXNzb2NpYXRlZF9hY2Nlc3NfdmFsdWUiXSkpCgkJewoJCQlpZigkcG9zdFsibW1fYXNzb2NpYXRlZF9hY2Nlc3NfdmFsdWUiXSA9PSAibWVtYmVyc2hpcCIpCgkJCXsKCQkJCWlmKGlzc2V0KCRwb3N0WyJtbV9tZW1iZXJzaGlwX2FjY2Vzc19zZWxlY3RvciJdKSkKCQkJCXsKCQkJCQkkbWVtYmVyc2hpcCA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJHBvc3RbIm1tX21lbWJlcnNoaXBfYWNjZXNzX3NlbGVjdG9yIl0pOwoJCQkJCQoJCQkJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkkbWVtYmVyc2hpcC0+cmVtb3ZlUHJvZHVjdCgkcHJvZHVjdC0+Z2V0SWQoKSk7CgkJCQkJCSRtZW1iZXJzaGlwLT5hZGRQcm9kdWN0KCRwcm9kdWN0LT5nZXRJZCgpKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJZWxzZSBpZigkcG9zdFsibW1fYXNzb2NpYXRlZF9hY2Nlc3NfdmFsdWUiXSA9PSAiYnVuZGxlIikKCQkJewoJCQkJaWYoaXNzZXQoJHBvc3RbIm1tX2J1bmRsZV9hY2Nlc3Nfc2VsZWN0b3IiXSkpCgkJCQl7CgkJCQkJJGJ1bmRsZSA9IG5ldyBNTV9CdW5kbGUoJHBvc3RbIm1tX2J1bmRsZV9hY2Nlc3Nfc2VsZWN0b3IiXSk7CgkJCQkJCgkJCQkJaWYoJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJJGJ1bmRsZS0+cmVtb3ZlUHJvZHVjdCgkcHJvZHVjdC0+Z2V0SWQoKSk7CgkJCQkJCSRidW5kbGUtPmFkZFByb2R1Y3QoJHByb2R1Y3QtPmdldElkKCkpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkKCQkkbWVkaWF0b3IgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VNZWRpYXRvcigpOwoJCSRyZXNwb25zZSA9ICghJGlzVXBkYXRlKT8kbWVkaWF0b3ItPm5vdGlmeVByb2R1Y3RBZGRlZCgkcHJvZHVjdCk6JG1lZGlhdG9yLT5ub3RpZnlQcm9kdWN0VXBkYXRlZCgkcHJvZHVjdCk7CgkJCgkJaWYgKCRyZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJaWYgKCEkaXNVcGRhdGUpCgkJCXsKCQkJCS8vaWYgYSBwYXltZW50IHNlcnZpY2UgYmxvY2tzIGFkZGl0aW9uIG9mIGEgcHJvZHVjdCwgcmVtb3ZlIHRoZSBuZXdseSBjcmVhdGVkIHByb2R1Y3QKCQkJCS8vaG93ZXZlciBpZiBpdHMgYW4gdXBkYXRlIG9uIHRoZSBwYXltZW50IHNlcnZpY2Ugc2lkZSB0aGF0IGZhaWxzLCBrZWVwIHRoZSBjaGFuZ2VzIGFuZCBzaW1wbHkgbm90aWZ5IHRoZSB1c2VyCgkJCQkkcHJvZHVjdC0+cmVtb3ZlKCk7IAoJCQl9CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsJCgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdCgkcG9zdCkKCXsKCQlpZighaXNzZXQoJHBvc3RbImlkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSUQgaXMgcmVxdWlyZWQiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcG9zdFsiaWQiXSk7CgkJCgkJJG1lZGlhdG9yID0gbmV3IE1NX1BheW1lbnRTZXJ2aWNlTWVkaWF0b3IoKTsKCQkkcmVzcG9uc2UgPSAkbWVkaWF0b3ItPm5vdGlmeVByb2R1Y3RSZW1vdmVkKCRwcm9kdWN0KTsKCQkKCQlpZiAoJHJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCQkKCQlpZigkcHJvZHVjdC0+cmVtb3ZlKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlByb2R1Y3QgY291bGQgbm90IGJlIHJlbW92ZWQgZHVlIHRvIGV4aXN0aW5nIGFzc29jaWF0aW9ucyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNob3dQdXJjaGFzZUxpbmtzKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJwcm9kdWN0X2lkIl0pICYmIGlzc2V0KCRwb3N0WyJwcm9kdWN0X25hbWUiXSkpCgkJewoJCQkkZGF0YSA9IG5ldyBzdGRDbGFzcygpOwoJCQkkZGF0YS0+cHJvZHVjdE5hbWUgPSBzdHJpcHNsYXNoZXMoJHBvc3RbInByb2R1Y3RfbmFtZSJdKTsKCQkJJGRhdGEtPnNtYXJ0VGFnID0gIjxhIGhyZWY9XCJbTU1fUHVyY2hhc2VfTGluayBwcm9kdWN0SWQ9J3skcG9zdFsicHJvZHVjdF9pZCJdfSddXCI+QnV5IE5vdzwvYT4iOwoJCQkkZGF0YS0+c3RhdGljTGluayA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRDaGVja291dFBhZ2VTdGF0aWNMaW5rKCRwb3N0WyJwcm9kdWN0X2lkIl0pOwoJCQkKCQkJJGNvbnRlbnQgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iLyIuTU1fTU9EVUxFX1BST0RVQ1RTLiIuIi5NTV9NT0RVTEVfUFVSQ0hBU0VfTElOS1MuIi5kaWFsb2cucGhwIiwgJGRhdGEpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRjb250ZW50KTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiUHJvZHVjdCBJRCBhbmQgcHJvZHVjdCBuYW1lIGFyZSByZXF1aXJlZCB0byBkaXNwbGF5IHB1cmNoYXNlIGxpbmtzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldE1NUHJvZHVjdERlc2NyaXB0aW9uKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJtbV9wcm9kdWN0X2lkIl0pKQoJCXsKCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcG9zdFsibW1fcHJvZHVjdF9pZCJdKTsKCQkJCgkJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRtbVByb2R1Y3REZXNjcmlwdGlvbiA9ICRwcm9kdWN0LT5nZXRCaWxsaW5nRGVzY3JpcHRpb24oKS4iICI7CgkJCQkgCgkJCQlpZigkcHJvZHVjdC0+aGFzVHJpYWwoKSkKCQkJCXsKCQkJCQkkbW1Qcm9kdWN0RGVzY3JpcHRpb24gLj0gTU1fVXRpbHM6OmdldEljb24oJ2Nsb2NrLW8nLCAnYmVpZ2UnLCAnMS4zZW0nLCAnMnB4JywgJ0hhcyBUcmlhbCcsICdtYXJnaW4tcmlnaHQ6NXB4OycpOwoJCQkJfQoJCQkJIAoJCQkJaWYoJHByb2R1Y3QtPmlzUmVjdXJyaW5nKCkpCgkJCQl7CgkJCQkJaWYoJHByb2R1Y3QtPmRvTGltaXRQYXltZW50cygpKQoJCQkJCXsKCQkJCQkJJG1tUHJvZHVjdERlc2NyaXB0aW9uIC49IE1NX1V0aWxzOjpnZXRJY29uKCdjYWxlbmRhci1vJywgJ2JlaWdlJywgJzEuM2VtJywgJzJweCcsICdQYXltZW50IFBsYW4nLCAnbWFyZ2luLXJpZ2h0OjVweDsnKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJG1tUHJvZHVjdERlc2NyaXB0aW9uIC49IE1NX1V0aWxzOjpnZXRJY29uKCdyZWZyZXNoJywgJ2JlaWdlJywgJzEuM2VtJywgJzJweCcsICdTdWJzY3JpcHRpb24nLCAnbWFyZ2luLXJpZ2h0OjVweDsnKTsKCQkJCQl9CgkJCQl9CgkJCQkgCgkJCQlpZigkcHJvZHVjdC0+aXNTaGlwcGFibGUoKSkKCQkJCXsKCQkJCQkkbW1Qcm9kdWN0RGVzY3JpcHRpb24gLj0gTU1fVXRpbHM6OmdldEljb24oJ3RydWNrJywgJ2JlaWdlJywgJzEuM2VtJywgJzJweCcsICdSZXF1aXJlcyBTaGlwcGluZycsICdtYXJnaW4tcmlnaHQ6NXB4OycpOwoJCQkJfQoJCQkJIAoJCQkJaWYoJHByb2R1Y3QtPmdldFNrdSgpICE9ICIiKQoJCQkJewoJCQkJCSRtbVByb2R1Y3REZXNjcmlwdGlvbiAuPSBNTV9VdGlsczo6Z2V0SWNvbignYmFyY29kZScsICdiZWlnZScsICcxLjNlbScsICcycHgnLCAiU0tVIFsiLiRwcm9kdWN0LT5nZXRTa3UoKS4iXSIsICdtYXJnaW4tcmlnaHQ6NXB4OycpOwoJCQkJfQoJCQkJCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRtbVByb2R1Y3REZXNjcmlwdGlvbik7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBNZW1iZXJNb3VzZSBwcm9kdWN0IGRlc2NyaXB0aW9uLiBJbnZhbGlkIHByb2R1Y3QgSUQgJ3skcG9zdFsibW1fcHJvZHVjdF9pZCJdfScuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyBNZW1iZXJNb3VzZSBwcm9kdWN0IGRlc2NyaXB0aW9uLiBObyBwcm9kdWN0IElEIHNwZWNpZmllZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKfQo=', 0, '2018-11-21 06:38:54'),
(153, 'shippingoption', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJtb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBNTV9TaGlwcGluZ09wdGlvbiBpcyBhIHZhbHVlIG9iamVjdCBtZWFudCB0byBzdGFuZGFyZGl6ZSB0aGUgd2F5IHNoaXBwaW5nIG9wdGlvbiBkYXRhIGlzIHByZXNlbnRlZCBhY3Jvc3Mgc2hpcHBpbmcgbWV0aG9kcwogKgogKi8KCmNsYXNzIE1NX1NoaXBwaW5nT3B0aW9uIAp7CQkKCS8vdW5pcXVlIGlkZW50aWZpZXIgdGhhdCB1bmlxdWVseSBpZGVudGlmaWVzIHRoaXMgb3B0aW9uIGFuZCB0aGUgbWV0aG9kIGl0IGlzIGFzc29jaWF0ZWQgd2l0aC4gS2V5cyBoYXZlIHRoZSBmb3JtICI8VE9LRU4+LTxJREVOVElGSUVSPiIKCXByaXZhdGUgJGtleTsKCQoJLy90aGUgZGlzcGxheSBuYW1lCglwcml2YXRlICRuYW1lOwoJCgkvL3RoZSBjb3N0IG9mIHVzaW5nIHRoaXMgcmF0ZSwgZ2VuZXJhbGx5IHVzZWQgaW4gdGhlIGNvbnRleHQgb2Ygb3JkZXIgcGxhY2VtZW50Cglwcml2YXRlICRyYXRlOwoJCgkvL29wdGlvbmFsLCB0aGUgaWQgdXNlZCBieSB0aGlzIG9wdGlvbiBpbiBpdHMgYmFja2luZyB0YWJsZSAoaWYgdGhlcmUgaXMgb25lKS4gVGhpcyBzaW1wbGlmaWVzIHNvbWUgb2YgdGhlIGludGVyZmFjZSBjb2RlCglwcml2YXRlICRpZDsKCQoJLy90aGUgc2hpcHBpbmcgbWV0aG9kIHRoaXMgb3B0aW9uIGlzIHBhcnQgb2YKCXByaXZhdGUgJG1ldGhvZE5hbWU7CgkKCS8vdGhlIGN1cnJlbmN5IHRoaXMgcmF0ZSBpcyBtZWFzdXJlZCBpbgoJcHJpdmF0ZSAkY3VycmVuY3k7CgkKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGtleT0iIiwgJG5hbWU9IiIsICRyYXRlPSIiLCAkaWQ9IiIsICRtZXRob2ROYW1lPSIiLCAkY3VycmVuY3k9IiIpCgl7CgkJJHBhcmFtcyA9IGFycmF5KCJrZXkiLCJuYW1lIiwicmF0ZSIsImlkIiwibWV0aG9kTmFtZSIpOwoJCWZvcmVhY2ggKCRwYXJhbXMgYXMgJHBhcmFtKQoJCXsKCQkJaWYgKCQkcGFyYW0gIT09ICIiKQoJCQl7CgkJCQkkdGhpcy0+JHBhcmFtID0gJCRwYXJhbTsKCQkJfQoJCX0KCQkKCQkkdGhpcy0+Y3VycmVuY3kgPSAhZW1wdHkoJGN1cnJlbmN5KT9zdHJ0b3VwcGVyKCRjdXJyZW5jeSk6TU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRLZXkoKQoJewoJCXJldHVybiAkdGhpcy0+a2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRLZXkoJGtleSkKCXsKCQkkdGhpcy0+a2V5ID0gJGtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5uYW1lOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXROYW1lKCRuYW1lKQoJewoJCSR0aGlzLT5uYW1lID0gJG5hbWU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFJhdGUoJGRvRm9ybWF0PWZhbHNlKQoJewoJCWlmICgkZG9Gb3JtYXQpCgkJewoJCQlyZXR1cm4gX21tZigkdGhpcy0+cmF0ZSwkdGhpcy0+Y3VycmVuY3kpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbnVtYmVyX2Zvcm1hdChmbG9hdHZhbCgkdGhpcy0+cmF0ZSksTU1fQ3VycmVuY3lVdGlsOjpnZXRQcmVjaXNpb25Gb3JDdXJyZW5jeSgkdGhpcy0+Y3VycmVuY3kpLCcuJywnJyk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRSYXRlKCRyYXRlKQoJewoJCSR0aGlzLT5yYXRlID0gJHJhdGU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldElkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmlkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRJZCgkaWQpCgl7CgkJJHRoaXMtPmlkID0gJGlkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TWV0aG9kTmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5tZXRob2ROYW1lOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRNZXRob2ROYW1lKCRtZXRob2ROYW1lKQoJewoJCSR0aGlzLT5tZXRob2ROYW1lID0gJG1ldGhvZE5hbWU7Cgl9CgkKCQp9', 0, '2018-11-21 06:38:54'),
(154, 'loggedinuserview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmFic3RyYWN0IGNsYXNzIE1NX0xvZ2dlZEluVXNlclZpZXcgZXh0ZW5kcyBNTV9WaWV3CnsgCgoJLyoqCgkgKiBEZXRlcm1pbmVzIGlmIHRoZSBjYWxsZXIgaGFzIHBlcm1pc3Npb24gdG8gcGVyZm9ybSB0aGUgcmVxdWVzdGVkIGFjdGlvbgoJICoKCSAqIEBwYXJhbSBzdHJpbmcgJG1ldGhvZE5hbWUKCSAqIEByZXR1cm4gYm9vbGVhbgoJICovCglwdWJsaWMgZnVuY3Rpb24gY2FuQ2FsbE1ldGhvZCgkbWV0aG9kTmFtZSkKCXsKCQlyZXR1cm4gTU1fVXRpbHM6OmlzTG9nZ2VkSW4oKTsKCX0KCn0=', 0, '2018-11-21 06:38:54'),
(155, 'dashboardview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0Rhc2hib2FyZFZpZXcgZXh0ZW5kcyBNTV9SQkFDR2VuZXJhbEVtcGxveWVlVmlldwp7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TVE9SRV9UUkFJTklOR19WSURFT19TVEFURSA9ICJzdG9yZVRyYWluaW5nVmlkZW9TdGF0ZSI7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7CgkJJHRoaXMtPnBlcm1pc3Npb25zWyIqIl0gKz0gYXJyYXkoTU1fUm9sZTo6JFJPTEVfQU5BTFlTVCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TVE9SRV9UUkFJTklOR19WSURFT19TVEFURToKCQkJCQlyZXR1cm4gJHRoaXMtPnN0b3JlVHJhaW5pbmdWaWRlb1N0YXRlKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzdG9yZVRyYWluaW5nVmlkZW9TdGF0ZSgkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsibW1fc2hvd190cmFpbmluZ192aWRlb3MiXSkpCgkJewoJCQlpZihpc3NldCgkcG9zdFsibW1fYWRtaW5faWQiXSkpCgkJCXsKCQkJCSRvcHRpb25OYW1lID0gTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1NIT1dfVFJBSU5JTkdfVklERU9TLiItIi4kcG9zdFsibW1fYWRtaW5faWQiXTsKCQkJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oJG9wdGlvbk5hbWUsICRwb3N0WyJtbV9zaG93X3RyYWluaW5nX3ZpZGVvcyJdKTsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzdG9yZSB0cmFpbmluZyB2aWRlbyBzdGF0ZS4gQ291bGRuJ3QgZmluZCBjdXJyZW50IHVzZXIgSUQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHN0b3JlIHRyYWluaW5nIHZpZGVvIHN0YXRlLiBNaXNzaW5nIGN1cnJlbnQgc3RhdGUgdmFsdWUuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(156, 'scheduledevent', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogTU1fU2NoZWR1bGVkRXZlbnQgcmVwcmVzZW50cyBhbiBldmVudCB0aGF0IHdhcyBjcmVhdGVkIGJ5IHRoZSBNZW1iZXJNb3VzZSBzY2hlZHVsZXIuIEl0IGlzIGltcG9ydGFudCB0byBkaWZmZXJlbnRpYXRlIHRoaXMgCiAqIGxvY2FsIGVudGl0eSBmcm9tIHRoZSBlbnRpdHkgb24gY2VudHJhbCB3aXRoIHRoZSBzYW1lIG5hbWUuIERlc3BpdGUgaGF2aW5nIGlkZW50aWNhbCBuYW1lLCBhbmQgcmVwcmVzZW50aW5nIHRoZSBzYW1lIGxvZ2ljYWwgY29uY2VwdCwgCiAqIHRoZXkgYXJlIHZlcnkgZGlmZmVyZW50IG9iamVjdHMgYmVjYXVzZSB0aGUgaW50ZXJmYWNlcyB3ZXJlIHdyaXR0ZW4gZnJvbSB0aGUgcGVyc3BlY3RpdmUgb2YgdGhlIHJlcXVlc3RvciBpbiB0aGUgZm9ybWVyIGNhc2UsIGFuZCB0aGUgcGVyc3BlY3RpdmUgCiAqIG9mIHRoZSBkaXNwYXRjaGVyIGluIHRoZSBsYXR0ZXIgY2FzZS4KICogCiAqLwphYnN0cmFjdCBjbGFzcyBNTV9TY2hlZHVsZWRFdmVudCBleHRlbmRzIE1NX0VudGl0eQp7CQoJCglwcm90ZWN0ZWQgJGV2ZW50VHlwZSAgICAgPSAiIjsKCXByb3RlY3RlZCAkZXZlbnREYXRhICAgICA9ICIiOwoJcHJvdGVjdGVkICRzY2hlZHVsZWREYXRlID0gIiI7Cglwcm90ZWN0ZWQgJHByb2Nlc3NlZERhdGUgPSAiIjsKCXByb3RlY3RlZCAkc3RhdHVzID0gMDsKCQoJcHJvdGVjdGVkICRmb3JjZVN0YXR1c1VwZGF0ZSA9IGZhbHNlOwoJCgkvL2NvbnN0YW50cyByZXByZXNlbnRpbmcgZXZlbnQgdHlwZXMKCXB1YmxpYyBzdGF0aWMgJFBBWU1FTlRfU0VSVklDRV9FVkVOVCA9IDE7CgkKCS8vY29uc3RhbnRzIHJlcHJlc2VudGluZyBjb21tYW5kcwoJcHVibGljIHN0YXRpYyAkU0NIRURVTEVSX0NPTU1BTkRfVVBEQVRFID0gIlVQREFURSI7CglwdWJsaWMgc3RhdGljICRTQ0hFRFVMRVJfQ09NTUFORF9ERUxFVEUgPSAiREVMRVRFIjsKCQoJcHVibGljIHN0YXRpYyAkUVVFVUVfQ09NTUFORF9VUERBVEUgPSAiMCI7IC8vbnVtZXJpYyBjb25zdGFudHMgdXNlZCBmb3IgcXVldWVpbmcsIGJlY2F1c2UgdGhhdCB0YWJsZSBjb3VsZCBwb3RlbnRpYWxseSBiZWNvbWUgcHJldHR5IGJpZwoJcHVibGljIHN0YXRpYyAkUVVFVUVfQ09NTUFORF9ERUxFVEUgPSAiMSI7CgkKCS8vY29uc3RhbnRzIHJlcHJlc2VudGluZyBldmVudCBzdGF0dXNlcwoJcHVibGljIHN0YXRpYyAkRVZFTlRfUEVORElORyA9IDA7CglwdWJsaWMgc3RhdGljICRFVkVOVF9QUk9DRVNTRUQgPSAxOwoJcHVibGljIHN0YXRpYyAkRVZFTlRfUkVHSVNUUkFUSU9OX0VSUk9SID0gNjsgLy9ldmVudCB3YXMgY3JlYXRlZCBsb2NhbGx5IGJ1dCBub3QgcmVnaXN0ZXJlZCBieSBjZW50cmFsCgkKCQoJLyoqCgkgKiBSZXRyaWV2ZSBzdG9yZWQgc2NoZWR1bGUgaW5mb3JtYXRpb24uIAoJICogCgkgKiBAc2VlIE1NX0VudGl0eTo6Z2V0RGF0YSgpCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGludHZhbCgkdGhpcy0+aWQpID4gMCkKCQl7CgkJCSRzcWwgPSAiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX1NDSEVEVUxFRF9FVkVOVFMuIiB3aGVyZSBpZD17JHRoaXMtPmlkfSI7CgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJaWYoJHJlc3VsdCkKCQkJewoJCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCS8qKgoJICogUG9wdWxhdGUgdGhpcyBlbnRpdHkgYmFzZWQgb24gdGhlIHNjaGVkdWxlIGluZm9ybWF0aW9uIGluIG9iamVjdCAkZGF0YQoJICoKCSAqIEBwYXJhbSBhcnJheSAkZGF0YSBBbiBvYmplY3Qgb2YgdHlwZSBzdGRjbGFzcyBhdHRyaWJ1dGVzIHJlcHJlc2VudCB0aGUgY29sdW1ucyBvZiBhIHJvdyBpbiB0aGUgdW5kZXJseWluZyBkYXRhYmFzZSB0YWJsZQoJICogQHNlZSBNTV9FbnRpdHk6OnNldERhdGEoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0RGF0YSgkZGF0YSkKCXsKCQl0cnkKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPmV2ZW50VHlwZSA9ICRkYXRhLT5ldmVudF90eXBlOwoJCQkkdGhpcy0+c2V0U2NoZWR1bGVkRGF0ZSgkZGF0YS0+c2NoZWR1bGVkX2RhdGUpOwoJCQkkdGhpcy0+c2V0UHJvY2Vzc2VkRGF0ZSgkZGF0YS0+cHJvY2Vzc2VkX2RhdGUpOwoJCQkkdGhpcy0+c3RhdHVzID0gJGRhdGEtPnN0YXR1czsKCQkJCgkJCWlmICghZW1wdHkoJGRhdGEtPmV2ZW50X2RhdGEpKQoJCQl7CgkJCQkkdW5zZXJpYWxpemVkX3NldHRpbmdzID0gdW5zZXJpYWxpemUoJGRhdGEtPmV2ZW50X2RhdGEpOwoJCQkJaWYgKGlzX2FycmF5KCR1bnNlcmlhbGl6ZWRfc2V0dGluZ3MpKQoJCQkJewoJCQkJCWZvcmVhY2ggKCR1bnNlcmlhbGl6ZWRfc2V0dGluZ3MgYXMgJGs9PiR2KQoJCQkJCXsKCQkJCQkJaWYgKGlzc2V0KCR0aGlzLT4kaykpCgkJCQkJCXsKCQkJCQkJCSR0aGlzLT4kayA9ICR2OyAvL2Rvbid0IGNyZWF0ZSBhdHRyaWJ1dGVzLCBvbmx5IHJlc3RvcmUgZXhpc3Rpbmcgb25lcwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQkKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJCgkvKioKCSAqIENvbW1pdCB0aGUgY29udGVudHMgb2YgdGhpcyBlbnRpdHkgdG8gdGhlIGRhdGFiYXNlCgkgKiBAc2VlIE1NX0VudGl0eTo6Y29tbWl0RGF0YSgpCgkgKgoJICogQHBhcmFtICR1cGRhdGVSZW1vdGVseSBib29sZWFuIHRydWUgaWYgdGhlIHNjaGVkdWxpbmcgc2VydmVyIHNob3VsZCBiZSB1cGRhdGVkCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCByZXByZXNlbnRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKiAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoJHVwZGF0ZVJlbW90ZWx5PXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJaWYgKGVtcHR5KCR0aGlzLT5zY2hlZHVsZWREYXRlKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHNjaGVkdWxlZCBldmVudDogTm8gZGF0ZSB3YXMgc2V0IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGlzVXBkYXRlID0gKGludHZhbCgkdGhpcy0+aWQpID4wKT90cnVlOmZhbHNlOwoJCSRuZXdSZWNvcmQgPSAhJGlzVXBkYXRlOwoJCgkJJHNjaGVkdWxlRGF0YSA9IGFycmF5KCAgImV2ZW50X2RhdGEiICAJCT0+ICR0aGlzLT5wcmVwYXJlU2V0dGluZ3MoKSwKCQkJCQkJCQkiZXZlbnRfdHlwZSIgIAkJPT4gJHRoaXMtPmV2ZW50VHlwZSwKCQkJCQkJCQkic2NoZWR1bGVkX2RhdGUiICAgID0+ICR0aGlzLT5nZXRTY2hlZHVsZWREYXRlKCksCgkJCQkJCQkJInN0YXR1cyIJCQk9PiAkdGhpcy0+Z2V0U3RhdHVzKCkKCQkpOwoJCQoJCWlmICghZW1wdHkoJHRoaXMtPnByb2Nlc3NlZERhdGUpKQoJCXsKCQkJJHNjaGVkdWxlRGF0YVsicHJvY2Vzc2VkX2RhdGUiXSA9ICR0aGlzLT5nZXRQcm9jZXNzZWREYXRlKCk7CgkJfQoJCgkJaWYgKCEkaXNVcGRhdGUpCgkJewoJCQkvL3RoaXMgaXMgYSBuZXcgcmVjb3JkCgkJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX1NDSEVEVUxFRF9FVkVOVFMsJHNjaGVkdWxlRGF0YSk7CgkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBzY2hlZHVsZWQgZXZlbnQ6IGVycm9yID0gIi4kd3BkYi0+bGFzdF9lcnJvciwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQl9CgkJZWxzZQoJCXsKCQkJJHVwZGF0ZVdoZXJlID0gYXJyYXkoImlkIj0+JHRoaXMtPmlkKTsKCQkJJHJlc3VsdCA9ICR3cGRiLT51cGRhdGUoTU1fVEFCTEVfU0NIRURVTEVEX0VWRU5UUywkc2NoZWR1bGVEYXRhLCR1cGRhdGVXaGVyZSk7CgkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIHVwZGF0ZSBzY2hlZHVsZWQgZXZlbnQ6IGVycm9yID0gIi4kd3BkYi0+bGFzdF9lcnJvciwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CQkKCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJCgkJaWYgKCR1cGRhdGVSZW1vdGVseSkKCQl7CgkJCSRyZW1vdGVSZXNwb25zZSA9ICR0aGlzLT51cGRhdGVTY2hlZHVsaW5nU2VydmVyKCk7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0RXZlbnREYXRhKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmV2ZW50RGF0YTsKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2V0RXZlbnREYXRhKCRldmVudERhdGEpCgl7CgkJJHRoaXMtPmV2ZW50RGF0YSA9ICRldmVudERhdGE7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEV2ZW50VHlwZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5ldmVudFR5cGU7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNldEV2ZW50VHlwZSgkZXZlbnRUeXBlKQoJewoJCSR0aGlzLT5ldmVudFR5cGUgPSAkZXZlbnRUeXBlOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRTY2hlZHVsZWREYXRlKCkKCXsKCQlyZXR1cm4gZGF0ZSgiWS1tLWQgSDppIiwkdGhpcy0+c2NoZWR1bGVkRGF0ZSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFNjaGVkdWxlZERhdGUoJHNjaGVkdWxlZERhdGUpCgl7CgkJJHRoaXMtPnNjaGVkdWxlZERhdGUgPSBpc19pbnQoJHNjaGVkdWxlZERhdGUpPyRzY2hlZHVsZWREYXRlOnN0cnRvdGltZSgkc2NoZWR1bGVkRGF0ZSk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9jZXNzZWREYXRlKCkKCXsKCQlyZXR1cm4gZGF0ZSgiWS1tLWQgSDppIiwkdGhpcy0+cHJvY2Vzc2VkRGF0ZSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFByb2Nlc3NlZERhdGUoJHByb2Nlc3NlZERhdGUpCgl7CgkJJHRoaXMtPnByb2Nlc3NlZERhdGUgPSBpc19pbnQoJHByb2Nlc3NlZERhdGUpPyRwcm9jZXNzZWREYXRlOnN0cnRvdGltZSgkcHJvY2Vzc2VkRGF0ZSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1cygpCgl7CgkJcmV0dXJuICR0aGlzLT5zdGF0dXM7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFN0YXR1cygkc3RhdHVzKQoJewoJCSR0aGlzLT5zdGF0dXMgPSAkc3RhdHVzOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBkZWxldGUoJGRlbGV0ZVJlbW90ZWx5PXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQkkd3BkYi0+cXVlcnkoIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfU0NIRURVTEVEX0VWRU5UUy4iIFdIRVJFIGlkPSd7JHRoaXMtPmdldElkKCl9JyIpOwoJCQlpZiAoJGRlbGV0ZVJlbW90ZWx5KQoJCQl7CgkJCQkkcmVzcG9uc2UgPSAkdGhpcy0+dXBkYXRlU2NoZWR1bGluZ1NlcnZlcihNTV9TY2hlZHVsZWRFdmVudDo6JFNDSEVEVUxFUl9DT01NQU5EX0RFTEVURSk7CgkJCQlpZiAoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJCXsKCQkJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCQkJfQoJCQl9CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gZGVsZXRlIHRoaXMgc2NoZWR1bGVkIGV2ZW50IGJlY2F1c2UgaXQgd2FzIG5ldmVyIGNvbW1pdHRlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJKiBFYWNoIHN1YmNsYXNzIG9mIHRoZSBTY2hlZHVsZWRFdmVudCBlbnRpdHkgY2FuIGhhdmUgc3BlY2lmaWMgc2V0dGluZ3MuIFRoZXNlIHNldHRpbmdzIGFyZSBzdG9yZWQgYXMgYXR0cmlidXRlcyBvbiB0aGUgb2JqZWN0LiBQcmlvciB0byBjb21taXQsCgkqIHByZXBhcmVTZXR0aW5ncyBjcmVhdGVzIGFuIGFycmF5IHVzaW5nIHRoZXNlIGF0dHJpYnV0ZXMgYW5kIHRoZW4gc2VyaWFsaXplcyB0aGF0IGFycmF5IGFuZCBzdG9yZXMgaXQgaW4gJHRoaXMtPmV2ZW50RGF0YSwgc28gdGhhdCB0aGUgc2V0dGluZ3MgYXJlIHBlcnNpc3RlZAoJKiB3aGVuIGNvbW1pdERhdGEgaXMgY2FsbGVkLiBBdHJyaWJ1dGVzIHdpdGggbmFtZXMgdGhhdCBzdGFydCB3aXRoICJ0cmFuc2llbnRfIiBhcmUgaWdub3JlZAoJKiAKCSogQHBhcmFtICRhZGRpdGlvbmFsRXhjbHVzaW9ucyBhbiBhcnJheSBvZiBhZGRpdGlvbmFsIGNsYXNzIG1lbWJlcnMgdG8gZXhjbHVkZSBmcm9tIHNlcmlhbGl6YXRpb24KCSogCgkqIEByZXR1cm4gQSBzdHJpbmcgcmVwcmVzZW50aW5nIGEgc2VyaWFsaXplZCBhcnJheSBvZiBhbGwgdGhlIHZpc2libGUgY2xhc3MgbWVtYmVycywgbWludXMgdGhlIGV4Y2x1c2lvbnMsIHN1aXRhYmxlIGZvciBzdG9yYWdlIGluIHRoZSBldmVudERhdGEgZmllbGQKCSovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcHJlcGFyZVNldHRpbmdzKCRhZGRpdGlvbmFsRXhjbHVzaW9ucz1hcnJheSgpKQoJewoJCSRleGNsdXNpb25zID0gYXJyYXkoJ2lkJywnZXZlbnREYXRhJywnZXZlbnRUeXBlJywnc2NoZWR1bGVkRGF0ZScsJ3Byb2Nlc3NlZERhdGUnLCdzdGF0dXMnLCdub3RpZnlTZXJ2aWNlcycpICsgJGFkZGl0aW9uYWxFeGNsdXNpb25zOwoJCSRzZXR0aW5ncyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHRoaXMgYXMgJGtleT0+JHZhbHVlKQoJCXsKCQkJaWYgKCFpbl9hcnJheSgka2V5LCRleGNsdXNpb25zKSAmJiAoc3RycG9zKCRrZXksInRyYW5zaWVudF8iKSAhPT0gMCkpCgkJCXsKCQkJCSRzZXR0aW5nc1ska2V5XSA9ICR2YWx1ZTsKCQkJfQoJCX0KCQlyZXR1cm4gc2VyaWFsaXplKCRzZXR0aW5ncyk7Cgl9CgkKCQoJLyoqCgkgKiBVcGRhdGVzIG9yIGRlbGV0ZXMgdGhpcyBzY2hlZHVsZWQgZXZlbnQgb24gTWVtYmVyTW91c2UgY2VudHJhbCAKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkY29tbWFuZCBBIHN0cmluZyBzZXQgdG8gZWl0aGVyICJVUERBVEUiIG9yICJERUxFVEUiCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiB1cGRhdGVTY2hlZHVsaW5nU2VydmVyKCRjb21tYW5kPSJVUERBVEUiKQoJewoJCSRjb21tYW5kID0gc3RydG91cHBlcigkY29tbWFuZCk7CgkJaWYgKCgkY29tbWFuZCAhPSBNTV9TY2hlZHVsZWRFdmVudDo6JFNDSEVEVUxFUl9DT01NQU5EX1VQREFURSkgJiYgKCRjb21tYW5kICE9IE1NX1NjaGVkdWxlZEV2ZW50OjokU0NIRURVTEVSX0NPTU1BTkRfREVMRVRFKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIHRoZSBzY2hlZHVsaW5nIHNlcnZlcjogSW52YWxpZCBjb21tYW5kOiAneyRjb21tYW5kfSciLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkbGljZW5zZSA9IG5ldyBNTV9MaWNlbnNlKCIiLGZhbHNlKTsKCQlNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OmdldExpY2Vuc2UoJGxpY2Vuc2UpOwoJCQoJCSRtZXNzYWdlQXJyYXkgPSBhcnJheSgiYXBpX2tleSIgICAgICAgID0+ICRsaWNlbnNlLT5nZXRBcGlLZXkoKSwKCQkJCQkJCSAgImFwaV9zZWNyZXQiICAgICA9PiAkbGljZW5zZS0+Z2V0QXBpU2VjcmV0KCksCgkJCQkJCQkgICJyZWZlcmVuY2VfaWQiICAgPT4gJHRoaXMtPmlkLAoJCQkJCQkJICAic2NoZWR1bGVkX2RhdGUiID0+ICR0aGlzLT5nZXRTY2hlZHVsZWREYXRlKCksCgkJCQkJCQkgICJjb21tYW5kIgkJICAgPT4gJGNvbW1hbmQKCQkpOwoJCQoJCWlmICgkdGhpcy0+Zm9yY2VTdGF0dXNVcGRhdGUpCgkJewoJCQkkbWVzc2FnZUFycmF5WydzdGF0dXMnXSA9ICR0aGlzLT5zdGF0dXM7CgkJfQoJCQoJCSRtZXNzYWdlID0ganNvbl9lbmNvZGUoJG1lc3NhZ2VBcnJheSk7CgkJCgkJJGNoID0gY3VybF9pbml0KE1NX1NDSEVEVUxJTkdfU0VSVkVSX1VSTCk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0NVU1RPTVJFUVVFU1QsICJQT1NUIik7CgkJaWYgKCFpbmlfZ2V0KCdzYWZlX21vZGUnKSAmJiAhaW5pX2dldCgnb3Blbl9iYXNlZGlyJykpCgkJewoJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfRk9MTE9XTE9DQVRJT04sIHRydWUpOwoJCX0KCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVEZJRUxEUywgJG1lc3NhZ2UpOwoJCS8vVE9ETzogUEhQIDUuMiB3b3JrYXJvdW5kIC0gcmVtb3ZlIG9uY2Ugc3VwcG9ydCBpcyBkcm9wcGVkCgkJaWYgKHZlcnNpb25fY29tcGFyZShQSFBfVkVSU0lPTiwgJzUuMy4yJykgPj0gMCkgCgkJewoJCQljdXJsX3NldG9wdCgkY2gsIENVUkxPUFRfUE9TVFJFRElSLCA3KTsKCQl9CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1NTTF9WRVJJRllQRUVSLCBmYWxzZSk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX0hFQURFUiwgMCk7CgkJY3VybF9zZXRvcHQoJGNoLCBDVVJMT1BUX1JFVFVSTlRSQU5TRkVSLCAxKTsKCQkvL2N1cmxfc2V0b3B0KCRjaCwgQ1VSTE9QVF9DT05ORUNUVElNRU9VVCAsMzApOyAvL3RpbWVvdXQgaWYgdGhlIGNvbm5lY3Rpb24gY2Fubm90IGJlIG1hZGUgd2l0aGluIDMwIHNlY3MKCQkKCQkkdXBkYXRlUmVzcG9uc2UgPSBjdXJsX2V4ZWMoJGNoKTsKCQkkaHR0cENvZGUgPSBjdXJsX2dldGluZm8oJGNoLCBDVVJMSU5GT19IVFRQX0NPREUpOwoJCWN1cmxfY2xvc2UoJGNoKTsKCQkKCQlpZiAoKCR1cGRhdGVSZXNwb25zZSA9PT0gZmFsc2UpIHx8ICgkaHR0cENvZGUgPT0gNDA0KSkKCQl7CgkJCS8vdGhlIGFzc3VtcHRpb24gaXMgdGhhdCBmYWxzZSBpbmRpY2F0ZXMgYSBjb25uZWN0aW9uIGVycm9yLCB3aGljaCBzaG91bGRudCBoYXBwZW4sIGFuZCB0aGF0IGFueSAKCQkJLy9ub24tNDA0IHJlc3BvbnNlIChldmVuIGFuIGVycm9yIHJlc3BvbnNlKSBpcyBub3QgYSBjb25uZWN0aW9uIGVycm9yLgoJCQlyZXR1cm4gJHRoaXMtPnF1ZXVlU2NoZWR1bGluZ1NlcnZlclVwZGF0ZSgkY29tbWFuZCk7CgkJfQoJCWVsc2UgCgkJewoJCQkkdXBkYXRlUmVzcG9uc2UgPSBqc29uX2RlY29kZSgkdXBkYXRlUmVzcG9uc2UpOwoJCQlpZiAoKCR1cGRhdGVSZXNwb25zZSAhPSBudWxsKSAmJiAoJHVwZGF0ZVJlc3BvbnNlLT5zdGF0dXMgPT0gIm9rIikpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfQoJCQllbHNlIGlmIChpc3NldCgkdXBkYXRlUmVzcG9uc2UtPnN0YXR1cykgJiYgKCR1cGRhdGVSZXNwb25zZS0+c3RhdHVzID09ICJlcnJvciIpKSAKCQkJewoJCQkJLy9jdXJyZW50bHkgYW4gZXJyb3Igc3RhdHVzIGFsd2F5cyBpbmRpY2F0ZXMgYSBzaXR1YXRpb24gd2hlcmUgZXZlbnQgcXVldWluZyBpcyBkZXNpcmFibGUuIElmIHRoZSBuZWVkIGFyaXNlcyBpbiB0aGUgZnV0dXJlIGZvciBhcHBsaWNhdGlvbnMgdG8KCQkJCS8vcmVjZWl2ZSB0aGUgcmF3IGVycm9yIHN0YXR1cyBmcm9tIHRoZSBzY2hlZHVsaW5nIHNlcnZlciBhbmQgcGVyZm9ybSBhbiBhY3Rpb24gT1RIRVIgdGhhbiBxdWV1aW5nLCB0aGlzIGJsb2NrIHdpbGwgbmVlZCB0byBiZSByZW1vdmVkCgkJCQlyZXR1cm4gJHRoaXMtPnF1ZXVlU2NoZWR1bGluZ1NlcnZlclVwZGF0ZSgkY29tbWFuZCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdXBkYXRlRXJyb3IgPSAoaXNzZXQoJHVwZGF0ZVJlc3BvbnNlLT5tZXNzYWdlKSk/Ijp7JHVwZGF0ZVJlc3BvbnNlLT5tZXNzYWdlfSI6IiI7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjb21tdW5pY2F0aW5nIHdpdGggc2NoZWR1bGluZyBzZXJ2ZXJ7JHVwZGF0ZUVycm9yfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9Cgl9CgkKCQoJLyoqCgkgKiBRdWV1ZXMgdXBkYXRlcyB0byB0aGUgc2NoZWR1bGluZyBzZXJ2ZXIgaWYgaXQgY2FuJ3QgYmUgY29udGFjdGVkIGZvciB3aGF0ZXZlciByZWFzb24uIFRoaXMgYWxsb3dzIGEgc2l0ZSB0byBjb250aW51ZSBwcm9jZXNzaW5nCgkgKiB1bnRpbCBjb25uZWN0aW9uIHdpdGggdGhlIHNjaGVkdWxlciBjYW4gYmUgcmVlc3RhYmxpc2hlZAoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRjb21tYW5kIFRoZSBvcmlnaW5hbCBjb21tYW5kIHRoYXQgd2FzIGJlaW5nIHNlbnQgdG8gdGhlIHNjaGVkdWxpbmcgc2VydmVyCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgaWYgdGhlIGNvbW1hbmQgd2FzIHN1Y2Nlc3NmdWxseSBxdWV1ZWQgb3Igbm90CgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBxdWV1ZVNjaGVkdWxpbmdTZXJ2ZXJVcGRhdGUoJGNvbW1hbmQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vY3JlYXRlcyBvciByZXBsYWNlcyBhIHF1ZXVlIGVudHJ5IGZvciB0aGlzIGV2ZW50CgkJJHRhYmxlRGF0YSA9IGFycmF5KCJldmVudF9pZCIgICAgPT4gJHRoaXMtPmdldElkKCksIAoJCQkJCQkgICAiY29tbWFuZCIgICAgID0+ICgkY29tbWFuZCA9PSBzZWxmOjokU0NIRURVTEVSX0NPTU1BTkRfREVMRVRFKT9zZWxmOjokUVVFVUVfQ09NTUFORF9ERUxFVEU6c2VsZjo6JFFVRVVFX0NPTU1BTkRfVVBEQVRFLAoJCQkJCQkgICAicXVldWVkX2RhdGUiID0+IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpCgkJKTsKCQkkcmVzdWx0ID0gJHdwZGItPnJlcGxhY2UoTU1fVEFCTEVfUVVFVUVEX1NDSEVEVUxFRF9FVkVOVFMsJHRhYmxlRGF0YSk7CgkJCgkJaWYgKCRyZXN1bHQgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcXVldWVpbmcgc2NoZWR1bGVkIGV2ZW50IGFmdGVyIHNlcnZlciBjb25uZWN0aW9uIGZhaWxlZDogRXZlbnQgSUQ6IHskdGhpcy0+Z2V0SWQoKX0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBTZW5kIHF1ZXVlZCBzY2hlZHVsZSB1cGRhdGVzIHRvIHRoZSBNZW1iZXJNb3VzZSBzY2hlZHVsaW5nIHNlcnZlci4gU3VjY2Vzc2Z1bGx5IHN5bmNocm9uaXplZCBldmVudHMgYXJlIHJlbW92ZWQgZnJvbSB0aGUgcXVldWUsIAoJICogd2hpbGUgdW5zdWNjZXNzZnVsIGV2ZW50cyByZW1haW4gdW50aWwgdGhlIG5leHQgcGFzcyAKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjYWxsU3luY2hyb25pemF0aW9uSGFuZGxlcigpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vb25seSBjYWxsIHRoZSBzeW5jaHJvbml6YXRpb24gaGFuZGxlciBpZiBpdHMgbmVjZXNzYXJ5CgkJCgkJJHNob3VsZFN5bmMgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIEVYSVNUUyAoU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1FVRVVFRF9TQ0hFRFVMRURfRVZFTlRTLiIpIik7CgkJaWYgKCFpc19udWxsKCRzaG91bGRTeW5jKSAmJiAoJHNob3VsZFN5bmMgPT0gIjEiKSkKCQl7CgkJCSRzeW5jaG9uaXphdGlvbkhhbmRsZXJVUkwgPSBNTV9QTFVHSU5fVVJMLiIvc2NoZWR1bGVyL3N5bmNocm9uaXplLnBocCI7CgkJCXdwX3JlbW90ZV9nZXQoJHN5bmNob25pemF0aW9uSGFuZGxlclVSTCxhcnJheSgnYmxvY2tpbmcnPT4nZmFsc2UnKSk7CgkJfQoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0Rm9yY2VTdGF0dXNVcGRhdGUoKQoJewoJCXJldHVybiAkdGhpcy0+Zm9yY2VTdGF0dXNVcGRhdGU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRGb3JjZVN0YXR1c1VwZGF0ZSgkZm9yY2VTdGF0dXNVcGRhdGUpCgl7CgkJJHRoaXMtPmZvcmNlU3RhdHVzVXBkYXRlID0gJGZvcmNlU3RhdHVzVXBkYXRlOwoJfQoJCn0=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(157, 'safemodeview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1NhZmVNb2RlVmlldyBleHRlbmRzIE1NX1JCQUNBZG1pblZpZXcKewoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0VUX1NBRkVfTU9ERV9TVEFUVVMgPSAic2V0U2FmZU1vZGVTdGF0dXMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0xFQVJfTE9HID0gImNsZWFyU2FmZU1vZGVMb2ciOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TRVRfU0FGRV9NT0RFX1NUQVRVUzoKCQkJCQlyZXR1cm4gJHRoaXMtPnNldFNhZmVNb2RlU3RhdHVzKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NMRUFSX0xPRzoKCQkJCQlyZXR1cm4gJHRoaXMtPmNsZWFyTG9nKCk7CgkJCQkJYnJlYWs7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyx0cnVlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNldFNhZmVNb2RlU3RhdHVzKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJuZXdTdGF0dXMiXSkgJiYgIWVtcHR5KCRwb3N0WyJuZXdTdGF0dXMiXSkpIAoJCXsKCQkJTU1fU2FmZU1vZGU6OnNldE1vZGUoJHBvc3RbIm5ld1N0YXR1cyJdKTsKCQkJJGN1cnJlbnRNb2RlID0gTU1fU2FmZU1vZGU6OmdldE1vZGUoKTsKCQkJCgkJCWlmKCRjdXJyZW50TW9kZSA9PSBNTV9TYWZlTW9kZTo6JE1PREVfRU5BQkxFRCkKCQkJewoJCQkJTU1fU2FmZU1vZGU6OmRpc2FibGVQbHVnaW5zKCk7CgkJCQlNTV9TYWZlTW9kZTo6ZGlzYWJsZVRoZW1lKCk7CgkJCQkKCQkJCSRzYXZlZFBsdWdpbnMgPSBNTV9TYWZlTW9kZTo6Z2V0U2F2ZWRQbHVnaW5OYW1lcygpOwoJCQkJJG1lc3NhZ2UgPSAiPHN0cm9uZz5EZWFjdGl2YXRlZCBQbHVnaW5zICgiLmNvdW50KCRzYXZlZFBsdWdpbnMpLiIpOjwvc3Ryb25nPiAiLmltcGxvZGUoIiwgIiwgJHNhdmVkUGx1Z2lucyk7CgkJCQkKCQkJCSRkZmx0V1BUaGVtZSA9IE1NX1NhZmVNb2RlOjpnZXREZWZhdWx0V29yZFByZXNzVGhlbWUoKTsKCQkJCQoJCQkJaWYoJGRmbHRXUFRoZW1lICE9ICIiKQoJCQkJewoJCQkJCSRtZXNzYWdlIC49ICI8YnIvPjxzdHJvbmc+RGVhY3RpdmF0ZWQgVGhlbWU6PC9zdHJvbmc+ICIuTU1fU2FmZU1vZGU6OmdldFNhdmVkVGhlbWVOYW1lKCk7CgkJCQl9CgkJCQkKCQkJCU1NX1NhZmVNb2RlOjpsb2coJGN1cnJlbnRNb2RlLCAkbWVzc2FnZSk7CgkJCQkKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlNhZmUgTW9kZSBoYXMgYmVlbiBlbmFibGVkIixNTV9SZXNwb25zZTo6JFNVQ0NFU1MsdHJ1ZSk7CgkJCX0KCQkJZWxzZQoJCQl7CQoJCQkJJHNhdmVkUGx1Z2lucyA9IE1NX1NhZmVNb2RlOjpnZXRTYXZlZFBsdWdpbk5hbWVzKCk7CgkJCQkkbWVzc2FnZSA9ICI8c3Ryb25nPlJlc3RvcmVkIFBsdWdpbnMgKCIuY291bnQoJHNhdmVkUGx1Z2lucykuIik6PC9zdHJvbmc+ICIuaW1wbG9kZSgiLCAiLCAkc2F2ZWRQbHVnaW5zKTsKCQkJCSRtZXNzYWdlIC49ICI8YnIvPjxzdHJvbmc+UmVzdG9yZWQgVGhlbWU6PC9zdHJvbmc+ICIuTU1fU2FmZU1vZGU6OmdldFNhdmVkVGhlbWVOYW1lKCk7CgkJCQkKCQkJCU1NX1NhZmVNb2RlOjpyZXN0b3JlUGx1Z2lucygpOwoJCQkJTU1fU2FmZU1vZGU6OnJlc3RvcmVUaGVtZSgpOwoJCQkJCgkJCQlNTV9TYWZlTW9kZTo6bG9nKCRjdXJyZW50TW9kZSwgJG1lc3NhZ2UpOwoJCQkJCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTYWZlIE1vZGUgaGFzIGJlZW4gZGlzYWJsZWQiLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyx0cnVlKTsKCQkJfQoJCX0KCQkKCSAJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiU2FmZSBtb2RlIHN0YXR1cyB3YXMgbm90IGNoYW5nZWQiLE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyx0cnVlKTsJCSAJCgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNsZWFyTG9nKCkKCXsKCQlNTV9TYWZlTW9kZTo6Y2xlYXJMb2coKTsKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTYWZlIG1vZGUgbG9nIGNsZWFyZWQgc3VjY2Vzc2Z1bGx5IiwgTU1fUmVzcG9uc2U6OiRTVUNDRVNTKTsJIAkKCX0KCQp9Cg==', 0, '2018-11-21 06:38:54'),
(158, 'countrysubdivisionutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0NvdW50cnlTdWJkaXZpc2lvblV0aWxzCnsJCQkKCS8qKgoJICogVGhpcyByZXR1cm5zIGFsbCBzdWJkaXZpc2lvbnMgKHN0YXRlcywgcHJvdmluY2VzLCBldGMuLi4pIHdpdGhpbiBkZXNpcmVkIGNvdW50cnkKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDb3VudHJ5U3ViZGl2c2lvbkxpc3QoJGlzbz1hcnJheSgpKQoJewoJCWdsb2JhbCAkd3BkYjsKCQogICAgJGlzbyA9IChhcnJheSkkaXNvOwogICAgCgkJJHNxbCA9ICJTRUxFQ1QgYGlzb2AsIGBjb2RlYCwgYG5hbWVgIGZyb20gIi5NTV9UQUJMRV9DT1VOVFJZX1NVQkRJVklTSU9OUy4iIFdIRVJFIGBpc29gIElOICgnIi5pbXBsb2RlKCInLCciLCAkaXNvKS4iJykgb3JkZXIgYnkgbmFtZSBhc2MiOwoJCQoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwsIE9CSkVDVCk7CgkJJGxpc3QgPSBhcnJheSgpOwoJCgkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJGlzbyA9PiAkcm93KQoJCXsKCQkgICRsaXN0WyRyb3ctPmlzb11bJHJvdy0+Y29kZV0gPSAkcm93LT5uYW1lOwoJCX0KCQoJCXJldHVybiAkbGlzdDsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDb3VudHJ5U3ViZGl2c2lvbk5hbWUoJGlzbywgJGNvZGUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUIGBuYW1lYCBmcm9tICIuTU1fVEFCTEVfQ09VTlRSWV9TVUJESVZJU0lPTlMuIiB3aGVyZSBgaXNvYCA9ICd7JGlzb30nIEFORCBgY29kZWAgPSAneyRjb2RlfScgbGltaXQgMTsiOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZihpc3NldCgkcm93LT5uYW1lKSkKCQl7CgkJCXJldHVybiAkcm93LT5uYW1lOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gInskaXNvfS17JGNvZGV9IjsJCgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(159, 'aweberresourcenotimplemented', 'LyoqCiAqIFRocm93biB3aGVuIGF0dGVtcHRpbmcgdG8gdXNlIGEgcmVzb3VyY2UgdGhhdCBpcyBub3QgaW1wbGVtZW50ZWQuCiAqCiAqIEB1c2VzIE1NX0FXZWJlckV4Y2VwdGlvbgogKiBAcGFja2FnZQogKiBAdmVyc2lvbiAkaWQkCiAqLwpjbGFzcyBNTV9BV2ViZXJSZXNvdXJjZU5vdEltcGxlbWVudGVkIGV4dGVuZHMgTU1fQVdlYmVyRXhjZXB0aW9uIHsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJG9iamVjdCwgJHZhbHVlKSB7CgkJJHRoaXMtPm9iamVjdCA9ICRvYmplY3Q7CgkJJHRoaXMtPnZhbHVlID0gJHZhbHVlOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoIlJlc291cmNlIFwieyR2YWx1ZX1cIiBpcyBub3QgaW1wbGVtZW50ZWQgb24gdGhpcyByZXNvdXJjZS4iKTsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(160, 'aweberemailserviceprovider', 'LyoqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KCmNsYXNzIE1NX0FXZWJlckVtYWlsU2VydmljZVByb3ZpZGVyIGV4dGVuZHMgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlciAKewoJCglwcml2YXRlICRhd2ViZXJfYXBpOwoJCglwcml2YXRlICRhcHBsaWNhdGlvbl9rZXk7Cglwcml2YXRlICRhcHBsaWNhdGlvbl9zZWNyZXQ7Cglwcml2YXRlICRhY2Nlc3NfdG9rZW47Cglwcml2YXRlICRhY2Nlc3Nfc2VjcmV0OwoJCglwcml2YXRlICRhcGlfYmFzZSA9ICJodHRwczovL2FwaS5hd2ViZXIuY29tLzEuMCI7IAoJCgkvKioKCSAqIFRoZSBBV2ViZXIgYXBpIHJlcXVpcmVzIGFuIGFwcGxpY2F0aW9uIGtleSBhbmQgc2VjcmV0LCBhbmQgYW4gYWNjZXNzIHRva2VuIGFuZCBzZWNyZXQuIEFsbCBvZiB0aGVzZSBhcmUgc3RvcmVkIGluIGFkZGl0aW9uYWwgZGF0YQoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgkcHJvdmlkZXJfaW5mbyk7CgkJJGFkZGl0aW9uYWxfZGF0YSA9IChpc3NldCgkcHJvdmlkZXJfaW5mby0+YWRkaXRpb25hbF9kYXRhKSk/dW5zZXJpYWxpemUoJHByb3ZpZGVyX2luZm8tPmFkZGl0aW9uYWxfZGF0YSk6YXJyYXkoKTsKCQlpZiAoaXNfYXJyYXkoJGFkZGl0aW9uYWxfZGF0YSkpCgkJewoJCQkkcmVxdWlyZWRfZmllbGRzID0gYXJyYXkoImFwcGxpY2F0aW9uS2V5IiwiYXBwbGljYXRpb25TZWNyZXQiLCJhY2Nlc3NUb2tlbiIsImFjY2Vzc1NlY3JldCIpOwoJCQlmb3JlYWNoICgkcmVxdWlyZWRfZmllbGRzIGFzICRhRmllbGQpCgkJCXsKCQkJCWlmIChhcnJheV9rZXlfZXhpc3RzKCRhRmllbGQsICRhZGRpdGlvbmFsX2RhdGEpKQoJCQkJewoJCQkJCSRzZXR0ZXIgPSAic2V0Ii51Y2ZpcnN0KCRhRmllbGQpOwoJCQkJCWNhbGxfdXNlcl9mdW5jKGFycmF5KCR0aGlzLCRzZXR0ZXIpLCRhZGRpdGlvbmFsX2RhdGFbJGFGaWVsZF0pOwoJCQkJfQoJCQl9CgkJfQoJCQoJfQoJCgkvKioKCSAqIFNldCB0aGUgYXBwbGljYXRpb24ga2V5CgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJGtleSBUaGUgQVdlYmVyIHByb3ZpZGVkIGFwcGxpY2F0aW9uIGtleQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0QXBwbGljYXRpb25LZXkoJGtleSkKCXsKCQkkdGhpcy0+YXBwbGljYXRpb25fa2V5ID0gJGtleTsKCX0KCQoJLyoqCgkgKiBSZXR1cm4gdGhlIGFwcGxpY2F0aW9uIGtleQoJICogCgkgKiBAcmV0dXJuIFN0cmluZyAka2V5IFRoZSBBV2ViZXIgcHJvdmlkZWQgYXBwbGljYXRpb24ga2V5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRBcHBsaWNhdGlvbktleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcHBsaWNhdGlvbl9rZXk7Cgl9CgkKCS8qKgoJICogU2V0IHRoZSBhcHBsaWNhdGlvbiBzZWNyZXQKCSAqCgkgKiBAcGFyYW0gU3RyaW5nICRrZXkgVGhlIEFXZWJlciBwcm92aWRlZCBhcHBsaWNhdGlvbiBzZWNyZXQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldEFwcGxpY2F0aW9uU2VjcmV0KCRzZWNyZXQpCgl7CgkJJHRoaXMtPmFwcGxpY2F0aW9uX3NlY3JldCA9ICRzZWNyZXQ7Cgl9CgkKCS8qKgoJICogUmV0dXJuIHRoZSBhcHBsaWNhdGlvbiBzZWNyZXQKCSAqCgkgKiBAcmV0dXJuIFN0cmluZyAka2V5IFRoZSBBV2ViZXIgcHJvdmlkZWQgYXBwbGljYXRpb24gc2VjcmV0CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRBcHBsaWNhdGlvblNlY3JldCgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcHBsaWNhdGlvbl9zZWNyZXQ7Cgl9CgkKCS8qKgoJICogU2V0IHRoZSBhY2Nlc3MgdG9rZW4KCSAqCgkgKiBAcGFyYW0gU3RyaW5nICRrZXkgVGhlIEFXZWJlciBwcm92aWRlZCBhY2Nlc3MgdG9rZW4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldEFjY2Vzc1Rva2VuKCR0b2tlbikKCXsKCQkkdGhpcy0+YWNjZXNzX3Rva2VuID0gJHRva2VuOwoJfQoJCgkvKioKCSAqIFJldHVybiB0aGUgYWNjZXNzIHRva2VuCgkgKgoJICogQHJldHVybiBTdHJpbmcgJGtleSBUaGUgQVdlYmVyIHByb3ZpZGVkIGFjY2VzcyB0b2tlbgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzVG9rZW4oKQoJewoJCXJldHVybiAkdGhpcy0+YWNjZXNzX3Rva2VuOwoJfQoJCgkvKioKCSAqIFNldCB0aGUgYWNjZXNzIHNlY3JldAoJICoKCSAqIEBwYXJhbSBTdHJpbmcgJGtleSBUaGUgQVdlYmVyIHByb3ZpZGVkIGFjY2VzcyBzZWNyZXQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldEFjY2Vzc1NlY3JldCgkc2VjcmV0KQoJewoJCSR0aGlzLT5hY2Nlc3Nfc2VjcmV0ID0gJHNlY3JldDsKCX0KCQoJLyoqCgkgKiBSZXR1cm4gdGhlIGFjY2VzcyBzZWNyZXQKCSAqCgkgKiBAcmV0dXJuIFN0cmluZyAka2V5IFRoZSBBV2ViZXIgcHJvdmlkZWQgYWNjZXNzIHNlY3JldAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzU2VjcmV0KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFjY2Vzc19zZWNyZXQ7Cgl9CgkKCS8qKgoJICoKCSAqIEdldHMgdGhlIG1lbWJlciBkYXRhIHRvIG1lcmdlLiBDdXJyZW50bHkgdGhpcyBpcyB0aGUgbmFtZSBhbmQgYW55IGFjY2VzcyB0YWdzCgkgKiBAcGFyYW0gU3RyaW5nICRlbWFpbCBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgbWVtYmVyCgkgKiBAcGFyYW0gJGluY2x1ZGVCdW5kbGVJbmZvIGluZGljYXRlcyBpZiBidW5kbGUgaW5mb3JtYXRpb24gc2hvdWxkIGJlIHBhc3NlZAoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIGFuIGFycmF5IG9mIGRhdGEgYXMga2V5LXZhbHVlIHBhaXJzIG9uIHN1Y2Nlc3MsIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGVycm9yIHN0YXRlIG90aGVyd2lzZQoJICovCglwcml2YXRlIGZ1bmN0aW9uIGdldE1lbWJlckRhdGFUb01lcmdlKCRlbWFpbCwgJGluY2x1ZGVCdW5kbGVJbmZvPXRydWUpCgl7CgkJJHVzZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkZW1haWwpOwoJCQoJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgdXNlciBpbmZvcm1hdGlvbiBmb3IgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCSRtZXJnZV9kYXRhID0gYXJyYXkoKTsKCQkKCQlpZigkaW5jbHVkZUJ1bmRsZUluZm8pCgkJewoJCQkvLyBzZXQgYWxsIGJ1bmRsZXMgZmFsc2UgdG8gc3RhcnQKCQkJZm9yZWFjaCAoTU1fQnVuZGxlOjpnZXRCdW5kbGVTaG9ydE5hbWVzKCkgYXMgJHJlcVRhZz0+JHJlcU5hbWUpCgkJCXsKCQkJCSRyZXFUYWcgPSBzdHJ0b3VwcGVyKCRyZXFUYWcpOwoJCQkJJG1lcmdlX2RhdGFbJHJlcVRhZ10gPSAiRkFMU0UiOwoJCQl9CgkJCQoJCQkvLyBub3cgc2V0IHRoZSBvbmVzIHRoZSB1c2VyIGhhcyBlcXVhbCB0byB0cnVlCgkJCSRhcHBsaWVkQnVuZGxlcyA9ICR1c2VyLT5nZXRBcHBsaWVkQnVuZGxlcygpOwoJCQkKCQkJZm9yZWFjaCAoJGFwcGxpZWRCdW5kbGVzIGFzICRhcHBsaWVkQnVuZGxlKQoJCQl7CgkJCQkkYnVuZGxlID0gJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZSgpOwoJCQkJCgkJCQlpZigkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHNob3J0TmFtZSA9IHN0cnRvdXBwZXIoJGJ1bmRsZS0+Z2V0U2hvcnROYW1lKCkpOwoJCQkJCSRtZXJnZV9kYXRhWyRzaG9ydE5hbWVdID0gIlRSVUUiOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG1lcmdlX2RhdGEpOwoJfQoJCgkvKioKCSAqIEFkZHMgYSBtZW1iZXIgdG8gYSBsaXN0CgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmFkZE1lbWJlclRvTGlzdCgpCgkgKiBAcGFyYW0gJGVtYWlsIFN0cmluZyBUaGUgZW1haWwgYWRkcmVzcyB0byBhZGQgdG8gdGhlIGxpc3QKCSAqIEBwYXJhbSAkbGlzdElkIFN0cmluZyBUaGUgaWQgb2YgdGhlIGxpc3QKCSAqIEBwYXJhbSAkaW5jbHVkZUJ1bmRsZUluZm8gaW5kaWNhdGVzIGlmIGJ1bmRsZSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcGFzc2VkCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBhZGRNZW1iZXJUb0xpc3QoJGVtYWlsLCRsaXN0SWQsJGluY2x1ZGVCdW5kbGVJbmZvPXRydWUpIAoJewoJCSRtZW1iZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCgkZW1haWwpOwoJCQoJCWlmICghJG1lbWJlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgbWVtYmVyIHdpdGggZW1haWwgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvLyBBV2ViZXIgbGltaXRzIGN1c3RvbSBmaWVsZHMgdG8gMjUuIEV2ZW4gaWYgY3VzdG9tIGZpZWxkcyBmYWlsIHRvIGFkZCwgY29udGludWUgdG8gYXR0ZW1wdCB0bwoJCS8vIGFkZCB0aGUgbWVtYmVyIHRvIHRoZSBsaXN0LCBqdXN0IGRvbid0IHBhc3MgY3VzdG9tIGZpZWxkcwoJCSRpbmNsdWRlQ3VzdG9tRmllbGRzID0gdHJ1ZTsKCQl0cnkKCQl7CgkJCSR0aGlzLT5hZGRSZXF1aXJlZEN1c3RvbUZpZWxkcygkbGlzdElkLCAkaW5jbHVkZUJ1bmRsZUluZm8pOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJJGluY2x1ZGVDdXN0b21GaWVsZHMgPSBmYWxzZTsKCQl9CgkJCgkJdHJ5CgkJewoJCQlpZigkaW5jbHVkZUN1c3RvbUZpZWxkcykKCQkJewoJCQkJJG1kX3Jlc3BvbnNlID0gJHRoaXMtPmdldE1lbWJlckRhdGFUb01lcmdlKCRlbWFpbCwgJGluY2x1ZGVCdW5kbGVJbmZvKTsKCQkJCQoJCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRtZF9yZXNwb25zZSkpIAoJCQkJewoJCQkJCXJldHVybiAkbWRfcmVzcG9uc2U7CgkJCQl9CgkKCQkJCSRtZW1iZXJfY3VzdG9tX2ZpZWxkcyA9IChpc19hcnJheSgkbWRfcmVzcG9uc2UtPm1lc3NhZ2UpKT8kbWRfcmVzcG9uc2UtPm1lc3NhZ2U6YXJyYXkoKTsKCQkJfQoJCQkKCQkJJGF3ZWJlciA9ICR0aGlzLT5nZXRBUElSZWZlcmVuY2UoKTsKCQkJJGFjY291bnQgPSAkYXdlYmVyLT5nZXRBY2NvdW50KCR0aGlzLT5hY2Nlc3NfdG9rZW4sJHRoaXMtPmFjY2Vzc19zZWNyZXQpOwoJCQkkbGlzdCA9ICRhY2NvdW50LT5sb2FkRnJvbVVybCgieyR0aGlzLT5hcGlfYmFzZX0vYWNjb3VudHMveyRhY2NvdW50LT5pZH0vbGlzdHMveyRsaXN0SWR9Iik7CgoJCQkkbWVtYmVyX25hbWUgPSAkbWVtYmVyLT5nZXRGaXJzdE5hbWUoKS4iICIuJG1lbWJlci0+Z2V0TGFzdE5hbWUoKTsKCQkJCgkJCSMgY3JlYXRlIGEgc3Vic2NyaWJlcgoJCSAgICAkcGFyYW1zID0gYXJyYXkoJ2VtYWlsJyA9PiAkZW1haWwsCgkJICAgICAgICAJCQknaXBfYWRkcmVzcycgPT4gJzEyNy4wLjAuMScsCgkJICAgICAgIAkJCSAgICAnbWlzY19ub3RlcycgPT4gJ2FkZGVkIGJ5IE1lbWJlck1vdXNlJywKCQkgICAgICAgIAkJCSduYW1lJyA9PiAkbWVtYmVyX25hbWUKCQkgICAgKTsKCQkgICAgCgkJICAgIGlmICgkaW5jbHVkZUN1c3RvbUZpZWxkcyAmJiBjb3VudCgkbWVtYmVyX2N1c3RvbV9maWVsZHMpID4gMCkKCQkgICAgewoJCSAgICAJJHBhcmFtc1snY3VzdG9tX2ZpZWxkcyddID0gJG1lbWJlcl9jdXN0b21fZmllbGRzOwoJCSAgICB9CgkgICAgCQoJCQkkc3Vic2NyaWJlcnMgPSAkbGlzdC0+c3Vic2NyaWJlcnM7CgkgICAJIAkkbmV3X3N1YnNjcmliZXIgPSAkc3Vic2NyaWJlcnMtPmNyZWF0ZSgkcGFyYW1zKTsKCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGFkZGluZyBtZW1iZXIgdG8gbGlzdDogIi4kZS0+Z2V0TWVzc2FnZSgpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJLyoqCgkgKiBDaGFuZ2VzIGEgbWVtYmVycyBsaXN0IHN1YnNjcmlwdGlvbiBiYXNlZCBvbiBhIGNoYW5nZSBpbiBtZW1iZXJzaGlwIGxldmVsLiAKCSAqIEluIHRoZSBjYXNlIG9mIEFXZWJlciwgcGVyZm9ybXMgYSBvbmUtb3BlcmF0aW9uIG1vdmUKCSAqIAoJICogQHNlZSBNTV9BYnN0cmFjdEVtYWlsU2VydmljZVByb3ZpZGVyOjpjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIGFkZHJlc3Mgb2YgdGhlIG1lbWJlciB0byBiZSB1cGRhdGVkCgkgKiBAcGFyYW0gJG5ld01lbWJlclR5cGUgaW50IFRoZSBtZW1iZXIgdHlwZSBpZCBvZiB0aGUgbWVtYmVyJ3MgbmV3IG1lbWJlciB0eXBlCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwTGV2ZWwoJGVtYWlsLCRuZXdNZW1iZXJUeXBlKSAKCXsKCQkvL3N0ZXAgMTogZ2V0IHRoZSBtZW1iZXIncyBjdXJyZW50IGluZm9ybWF0aW9uCgkJJG1lbWJlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCRlbWFpbCk7CgkJCgkJaWYgKCEkbWVtYmVyLT5pc1ZhbGlkKCkpIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgbWVtYmVyIHdpdGggZW1haWwgeyRlbWFpbH0iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL3N0ZXAgMjogZGVhbCB3aXRoIHRoZSAzIHBvc3NpYmxlIHNjZW5hcmlvcyAtIAoJCS8vYS4gdGhlIG1lbWJlciBpcyBub3QgY3VycmVudGx5IHN1YnNjcmliZWQgdG8gYSBsaXN0LCBidXQgdGhlIG5ldyBtZW1iZXJ0eXBlIGhhcyBhIGxpc3QgCgkJLy9iLiB0aGUgbWVtYmVyIGlzIHN1YnNjcmliZWQgdG8gYSBsaXN0LCBidXQgdGhlIG5ldyBtZW1iZXIgdHlwZSBkb2VzIE5PVCBoYXZlIGEgbGlzdAoJCS8vYy4gdGhlIG1lbWJlciBpcyBzdWJzY3JpYmVkIHRvIGEgbGlzdCwgYW5kIHRoZWlyIG5ldyBtZW1iZXIgdHlwZSBoYXMgYSBkaWZmZXJlbnQgbGlzdAoJCS8vZC4gdGhlIGxpc3QgZm9yIHRoZSBvbGQgYW5kIG5ldyBtZW1iZXIgdHlwZXMgYXJlIHRoZSBzYW1lLCBpbiB3aGljaCB1cGRhdGUgYW5kIHJldHVybiB0cnVlCgkJCgkJLy9nZXQgdGhlIG9sZCBsaXN0CgkJJG9sZExpc3RJZCA9ICRtZW1iZXItPmdldFN1YnNjcmliZWRMaXN0SWQoKTsKCQkKCQkvL2dldCB0aGUgbmV3IGxpc3QKCQkkbmV3TGlzdElkID0gKGVtcHR5KCRuZXdNZW1iZXJUeXBlKSk/JHRoaXMtPmdldExpc3RJZEZvck1lbWJlcigkZW1haWwpOiR0aGlzLT5nZXRMaXN0SWRGb3JNZW1iZXJzaGlwTGV2ZWwoJG5ld01lbWJlclR5cGUpOwoJCWlmICgkbmV3TGlzdElkLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRuZXdMaXN0SWQtPm1lc3NhZ2UsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRuZXdMaXN0SWQgPSAkbmV3TGlzdElkLT5tZXNzYWdlOwoJCQoJCWlmIChlbXB0eSgkb2xkTGlzdElkKSkKCQl7CgkJCS8vdGhlIG1lbWJlciB3YXMgcHJldmlvdXNseSBub3Qgc3Vic2NyaWJlZCB0byBhIGxpc3QsIHNvIHRoaXMgaXMgYSBzaW1wbGUgYWRkIG9wZXJhdGlvbiAtIGZ1bGZpbGxzIGNvbmRpdGlvbiBhLgoJCQlyZXR1cm4gJHRoaXMtPmFkZE1lbWJlclRvTGlzdCgkZW1haWwsICRuZXdMaXN0SWQpOwoJCX0KCQkKCQlpZiAoZW1wdHkoJG5ld0xpc3RJZCkpCgkJewoJCQkvL3RoZXJlIGlzIGFuIG9sZExpc3RJZCwgYnV0IG5vdCBhIGRlc3RpbmF0aW9uIChuZXdMaXN0SWQpLCB3aGljaCBtZWFucyBpdHMgYSBzaW1wbGUgcmVtb3ZlIG9wZXJhdGlvbiAtIGZ1bGZpbGxzIGNvbmRpdGlvbiBiCgkJCXJldHVybiAkdGhpcy0+cmVtb3ZlTWVtYmVyRnJvbUxpc3QoJGVtYWlsLCAkb2xkTGlzdElkKTsKCQl9CgkJCgkJaWYgKCRvbGRMaXN0SWQgPT0gJG5ld0xpc3RJZCkKCQl7CgkJCS8vbGlzdCBpcyB0aGUgc2FtZSwgdXBkYXRlIG1lbWJlciBhbmQgcmV0dXJuIC0gY29uZGl0aW9uIGQuCgkJCXJldHVybiAkdGhpcy0+dXBkYXRlTWVtYmVyKCRlbWFpbCwgJG9sZExpc3RJZCk7CgkJfQoJCQoJCXRyeSAKCQl7CgkJCSRhd2ViZXIgPSAkdGhpcy0+Z2V0QVBJUmVmZXJlbmNlKCk7CgkJCSRhY2NvdW50ID0gJGF3ZWJlci0+Z2V0QWNjb3VudCgkdGhpcy0+YWNjZXNzX3Rva2VuLCR0aGlzLT5hY2Nlc3Nfc2VjcmV0KTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCS8vbm8gdXNlIGNvbnRpbnVpbmcgaWYgd2UgY2FudCBldmVuIGNvbm5lY3QKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2hhbmdpbmcgbWVtYmVyc2hpcDogeyRlLT5nZXRNZXNzYWdlKCl9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJG9sZExpc3RFeGlzdHMgPSB0cnVlOwoJCSRuZXdMaXN0RXhpc3RzID0gdHJ1ZTsKCQkKCQl0cnkgCgkJewoJCQkvL3Rlc3QgdGhlIG9sZCBsaXN0IHRvIG1ha2Ugc3VyZSBpdHMgc3RpbGwgdGhlcmUKCQkJJG9sZExpc3QgPSAkYXdlYmVyLT5sb2FkRnJvbVVybCgiaHR0cHM6Ly9hcGkuYXdlYmVyLmNvbS8xLjAvYWNjb3VudHMveyRhY2NvdW50LT5pZH0vbGlzdHMveyRvbGRMaXN0SWR9LyIpOwoJCX0KCQljYXRjaCAoTU1fQVdlYmVyQVBJRXhjZXB0aW9uICRleGMpCgkJewoJCQlpZiAoJGV4Yy0+dHlwZSA9PSAiTm90Rm91bmRFcnJvciIpCgkJCXsKCQkJCS8vaWYgdGhlIHVzZXIgZGVsZXRlZCB0aGUgbGlzdCwgdGhhdHMgb2sKCQkJCSRvbGRMaXN0RXhpc3RzID0gZmFsc2U7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJLy9hbnkgb3RoZXIgZXJyb3Igc2hvdWxkIGJlIHJlcG9ydGVkCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRleGMtPmdldE1lc3NhZ2UoKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQl0cnkKCQl7CgkJCS8vdGVzdCB0aGUgbmV3IGxpc3QgdG8gbWFrZSBzdXJlIGl0cyBzdGlsbCB0aGVyZQoJCQkkbmV3TGlzdCA9ICRhd2ViZXItPmxvYWRGcm9tVXJsKCJodHRwczovL2FwaS5hd2ViZXIuY29tLzEuMC9hY2NvdW50cy97JGFjY291bnQtPmlkfS9saXN0cy97JG5ld0xpc3RJZH0vIik7CgkJfQoJCWNhdGNoIChNTV9BV2ViZXJBUElFeGNlcHRpb24gJGV4YykKCQl7CgkJCWlmICgkZXhjLT50eXBlID09ICJOb3RGb3VuZEVycm9yIikKCQkJewoJCQkJLy9pZiB0aGUgdXNlciBkZWxldGVkIHRoZSBsaXN0LCB0aGF0cyBvawoJCQkJJG5ld0xpc3RFeGlzdHMgPSBmYWxzZTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCS8vYW55IG90aGVyIGVycm9yIHNob3VsZCBiZSByZXBvcnRlZAoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZXhjLT5nZXRNZXNzYWdlKCksTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJaWYgKCEkb2xkTGlzdEV4aXN0cyAmJiAkbmV3TGlzdEV4aXN0cykKCQl7CgkJCXJldHVybiAkdGhpcy0+YWRkTWVtYmVyVG9MaXN0KCRlbWFpbCwgJG5ld0xpc3RJZCk7ICAvL3NvdXJjZSBsaXN0IHdhcyBbcHJvYmFibHldIGRlbGV0ZWQsIG1ha2luZyB0aGlzIGNvbmRpdGlvbiBhCgkJfQoJCQoJCWlmICgkb2xkTGlzdEV4aXN0cyAmJiAhJG5ld0xpc3RFeGlzdHMpCgkJewoJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZU1lbWJlckZyb21MaXN0KCRlbWFpbCwgJG9sZExpc3RJZCk7IC8vZGVzdGluYXRpb24gbGlzdCB3YXMgW3Byb2JhYmx5XSBkZWxldGVkIG1ha2luZyB0aGlzIGNvbmRpdGlvbiBiCgkJfQoJCQoJCXRyeSAKCQl7CgkJCS8vaWYgZXhlY3V0aW9uIHJlYWNoZXMgaGVyZSwgdGhlcmUgaXMgYSBvbGRMaXN0SWQgYW5kIGEgbmV3TGlzdElkLCBzbyBmaW5kIHRoZSBzdWJzY3JpYmVyIGFuZCBwcm9jZXNzIHRoZSBtb3ZlIC0gZnVsZmlsbHMgY29uZGl0aW9uIGMuCgkJCSRwYXJhbXMgPSBhcnJheSgnZW1haWwnID0+ICRlbWFpbCk7CgkJCSRvbGRMaXN0U3Vic2NyaWJlcnMgPSAkb2xkTGlzdC0+c3Vic2NyaWJlcnM7CgkJCSR0aGVNZW1iZXJDb2xsZWN0aW9uID0gJG9sZExpc3RTdWJzY3JpYmVycy0+ZmluZCgkcGFyYW1zKTsgLy9ldmVuIHRob3VnaCBhIGNvbGxlY3Rpb24gaXMgcmV0dXJuZWQsIHRoZXJlIHdpbGwgYmUgMCBvciAxIHJlc3VsdHMgd2hlbiBzZWFyY2hpbmcgYnkgZW1haWwKCQkJZm9yZWFjaCAoJHRoZU1lbWJlckNvbGxlY3Rpb24gYXMgJHRoZU1lbWJlcikKCQkJewoJCQkJJHRoaXMtPnVwZGF0ZU1lbWJlcigkZW1haWwsICRvbGRMaXN0SWQpOyAvL25vdyBzeW5jIGFueSBjdXN0b20gZmllbGQgY2hhbmdlcwoJCQkJJHRoZU1lbWJlci0+bW92ZSgkbmV3TGlzdCk7CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZS0+Z2V0TWVzc2FnZSgpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNvbmZpZ3VyZUZyb21PcHRpb25zKCRvcHRpb25EYXRhKSAKCXsKCQkvL25vdGhpbmcgdG8gZG8gaGVyZQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBnZXRMaXN0cyByZXR1cm5zIGFsbCB0aGUgbGlzdHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBjb25uZWN0ZWQgQVdlYmVyIGFjY291bnQKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6Z2V0TGlzdHMoKQoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIEFuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgbGlzdCBuYW1lcyAoa2V5ZWQgYnkgbGlzdCBpZCkgYXMgdGhlIG1lc3NhZ2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldExpc3RzKCkgCgl7CgkJdHJ5IAoJCXsKCQkJJGF3ZWJlciA9ICR0aGlzLT5nZXRBUElSZWZlcmVuY2UoKTsKCQkJJGFjY291bnQgPSAkYXdlYmVyLT5nZXRBY2NvdW50KCR0aGlzLT5hY2Nlc3NfdG9rZW4sICR0aGlzLT5hY2Nlc3Nfc2VjcmV0KTsKCQkJJGxpc3RzID0gYXJyYXkoKTsKCQkJZm9yZWFjaCAoJGFjY291bnQtPmxpc3RzIGFzICRsaXN0KQoJCQl7CgkJCQkkbGlzdF9pZCA9IChTdHJpbmcpJGxpc3QtPmlkOwoJCQkJJGxpc3RfbmFtZSA9IChTdHJpbmcpJGxpc3QtPm5hbWU7CgkJCQkkbGlzdHNbJGxpc3RfaWRdID0gJGxpc3RfbmFtZTsKCQkJfQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRsaXN0cyk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIGxpc3RzIGZyb20gQVdlYmVyLiBQbGVhc2UgY2hlY2sgdGhhdCBNZW1iZXJNb3VzZSBpcyBzdGlsbCBhdXRob3JpemVkIChvciByZWF1dGhvcml6ZSkgYW5kIHRyeSBhZ2FpbiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJICogUmVzcG9uZHMgdG8gZGF0YSBjb2xsZWN0ZWQgZnJvbSB0aGUgZm9ybSByZW5kZXJlZCBieSByZW5kZXJPcHRpb25zRGlhbG9nCgkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmhhbmRsZU9wdGlvbnNEaWFsb2coKQoJICogQHBhcmFtICRvcHRpb25EYXRhIEFycmF5IGNvbnRhaW5pbmcgdGhlIHBvc3RlZCB2YWx1ZXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBoYW5kbGVPcHRpb25zRGlhbG9nKCRvcHRpb25EYXRhKSAKCXsKCQoJCWlmICghZW1wdHkoJHRoaXMtPmFwcGxpY2F0aW9uX2tleSkgJiYgIWVtcHR5KCR0aGlzLT5hcHBsaWNhdGlvbl9zZWNyZXQpICYmICFlbXB0eSgkdGhpcy0+YWNjZXNzX3Rva2VuKSAmJiAhZW1wdHkoJHRoaXMtPmFjY2Vzc19zZWNyZXQpKSAKCQl7CgkJCQoJCQkkcHJvdmlkZXJfdG9rZW4gPSAkb3B0aW9uRGF0YVsncHJvdmlkZXJfdG9rZW4nXTsKCQkJCgkJCSRwcm9zcGVjdF9saXN0X2lkID0gJG9wdGlvbkRhdGFbJ3Byb3NwZWN0X2xpc3RfaWQnXTsKCQkJJGNhbmNlbGxhdGlvbl9saXN0X2lkID0gJG9wdGlvbkRhdGFbJ2NhbmNlbGxhdGlvbl9saXN0X2lkJ107CgkJCQoJCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyKCk7CgkJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCRwcm92aWRlcl90b2tlbik7CgkJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkJaWYgKCRwcm92aWRlcl9lbnRpdHktPmlzVmFsaWQoKSkgCgkJCXsKCQkJCS8vZmlyc3Qgd3JpdGUgdGhlIHByb3ZpZGVyJ3MgdW5zYXZlZCBjb25maWd1cmF0aW9uIG9wdGlvbnMKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldEFjdGl2ZSh0cnVlKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldFByb3NwZWN0TGlzdElEKCRwcm9zcGVjdF9saXN0X2lkKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldENhbmNlbGxhdGlvbkxpc3RJRCgkY2FuY2VsbGF0aW9uX2xpc3RfaWQpOwoJCQkJJGNvbW1pdF9yZXNwb25zZSA9ICRwcm92aWRlcl9lbnRpdHktPmNvbW1pdERhdGEoKTsKCQkJCWlmICgkY29tbWl0X3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpIAoJCQkJewoJCQkJCS8vcGFzcyB0aHJvdWdoIGVycm9ycyBjb21taXR0aW5nIHRvIHRoZSBkYXRhYmFzZQoJCQkJCXJldHVybiAkY29tbWl0X3Jlc3BvbnNlOwoJCQkJfQoJCQkJLy9ub3cgd3JpdGUgdGhlIGxpc3QgbWFwcGluZ3MKCQkJCWlmIChpc3NldCgkb3B0aW9uRGF0YVsnbWVtYmVyX3R5cGVfbWFwcGluZ3MnXSkgJiYgaXNfYXJyYXkoJG9wdGlvbkRhdGFbJ21lbWJlcl90eXBlX21hcHBpbmdzJ10pKSAKCQkJCXsKCQkJCQkkcHJvdmlkZXJfaWQgPSAkcHJvdmlkZXJfZW50aXR5LT5nZXRJZCgpOyAKCQkJCQlyZXR1cm4gJHRoaXMtPnBlcnNpc3RMaXN0TWFwcGluZ3MoJHByb3ZpZGVyX2lkLCRvcHRpb25EYXRhWydtZW1iZXJfdHlwZV9tYXBwaW5ncyddKTsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkvL2ZhaWxlZCB0byBsb2FkIGVudGl0eSBmcm9tIHRhYmxlCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCS8vaW52YWxpZCBjcmVkZW50aWFscyBvciB0aGUgdG9rZW4gaGFzIGV4cGlyZWQvYmVjb21lIGludmFsaWRhdGVkCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgY3JlZGVudGlhbHM6IFBsZWFzZSBhdXRob3JpemUgTWVtYmVyTW91c2UgdG8gYWNjZXNzIHlvdXIgQVdlYmVyIGFjY291bnQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCX0KCgkvKioKCSAqIFJlbW92ZXMgYSBtZW1iZXIgZnJvbSBhIGxpc3QKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6cmVtb3ZlTWVtYmVyRnJvbUxpc3QoKQoJICogQHBhcmFtICRlbWFpbCBTdHJpbmcgVGhlIGVtYWlsIGFkZHJlc3MgdG8gcmVtb3ZlIGZyb20gdGhlIGxpc3QKCSAqIEBwYXJhbSAkbGlzdElkIFN0cmluZyBUaGUgaWQgb2YgdGhlIGxpc3QKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZU1lbWJlckZyb21MaXN0KCRlbWFpbCwgJGxpc3RJZCkgIAoJewoJCWlmIChlbXB0eSgkbGlzdElkKSkgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCgkJdHJ5IAoJCXsKCQkJJGF3ZWJlciA9ICR0aGlzLT5nZXRBUElSZWZlcmVuY2UoKTsKCQkJJGFjY291bnQgPSAkYXdlYmVyLT5nZXRBY2NvdW50KCR0aGlzLT5hY2Nlc3NfdG9rZW4sJHRoaXMtPmFjY2Vzc19zZWNyZXQpOwoJCQkkbGlzdCA9ICRhd2ViZXItPmxvYWRGcm9tVXJsKCJ7JHRoaXMtPmFwaV9iYXNlfS9hY2NvdW50cy97JGFjY291bnQtPmlkfS9saXN0cy97JGxpc3RJZH0iKTsKCQkJJHN1YnNjcmliZXJzID0gJGxpc3QtPnN1YnNjcmliZXJzOwoJCQkKCQkJJHJlc3VsdHMgPSAkc3Vic2NyaWJlcnMtPmZpbmQoYXJyYXkoImVtYWlsIj0+JGVtYWlsKSk7CgkJCWZvcmVhY2ggKCRyZXN1bHRzIGFzICR0aGVfbWVtYmVyKSAvL3JldHVybnMgYSBjb2xsZWN0aW9uLCBidXQgc2hvdWxkIG5ldmVyIGJlIG1vcmUgdGhhbiBvbmUgbWVtYmVyCgkJCXsKCQkJCSR0aGVfbWVtYmVyLT5zdGF0dXMgPSAidW5zdWJzY3JpYmVkIjsKCQkJCSR0aGVfbWVtYmVyLT5zYXZlKCk7CgkJCX0KCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmVtb3ZpbmcgbWVtYmVyIGZyb20gbGlzdDoiLiRlLT5nZXRNZXNzYWdlKCksTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkvKioKCSAqIFVwZGF0ZXMgYSBtZW1iZXJzIGluZm9ybWF0aW9uIGF0dGFjaGVkIHRvIGEgc3Vic2NyaWJlZCBsaXN0CgkgKiAKCSAqIEBzZWUgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlcjo6dXBkYXRlTWVtYmVyKCkKCSAqIEBwYXJhbSAkZW1haWwgU3RyaW5nIFRoZSBlbWFpbCBvZiB0aGUgbWVtYmVyIHRvIGJlIHVwZGF0ZWQKCSAqIEBwYXJhbSAkbGlzdElkIFN0cmluZyBUaGUgaWQgb2YgdGhlIGxpc3Qgd2hlcmUgdGhlIG1lbWJlcidzIHN1YnNjcmlwdGlvbiBpbmZvIHNob3VsZCBiZSB1cGRhdGVkCgkgKiBAcGFyYW0gJG5ld0VtYWlsIFN0cmluZyAob3B0aW9uYWwpIC0gVGhlIG1lbWJlcidzIG5ldyBlbWFpbCBpbiB0aGUgY2FzZSB3aGVyZSB0aGUgdXBkYXRlIGlzIGFuIGVtYWlsIGFkZHJlc3MgY2hhbmdlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB1cGRhdGVNZW1iZXIoJGVtYWlsLCAkbGlzdElkLCRuZXdFbWFpbD0iIikgCgl7CgkJaWYgKGVtcHR5KCRsaXN0SWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOyAvL25vIGxpc3Qgd2FzIHBhc3NlZCBpbiwgc28gc3VjY2VzcwoJCX0KCQkKCQkvLyBBV2ViZXIgbGltaXRzIGN1c3RvbSBmaWVsZHMgdG8gMjUuIEV2ZW4gaWYgY3VzdG9tIGZpZWxkcyBmYWlsIHRvIGFkZCwgY29udGludWUgdG8gYXR0ZW1wdCB0bwoJCS8vIHVwZGF0ZSB0aGUgbWVtYmVyLCBqdXN0IGRvbid0IHVwZGF0ZSBjdXN0b20gZmllbGRzCgkJJGRvVXBkYXRlQ3VzdG9tRmllbGRzID0gdHJ1ZTsKCQl0cnkKCQl7CgkJCSR0aGlzLT5hZGRSZXF1aXJlZEN1c3RvbUZpZWxkcygkbGlzdElkKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCSRkb1VwZGF0ZUN1c3RvbUZpZWxkcyA9IGZhbHNlOwoJCX0KCQkKCQlpZigkZG9VcGRhdGVDdXN0b21GaWVsZHMpCgkJewoJCQkkY2ZfcmVzcG9uc2UgPSAkdGhpcy0+Z2V0TWVtYmVyRGF0YVRvTWVyZ2UoZW1wdHkoJG5ld0VtYWlsKT8kZW1haWw6JG5ld0VtYWlsKTsKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRjZl9yZXNwb25zZSkpCgkJCXsKCQkJCXJldHVybiAkY2ZfcmVzcG9uc2U7CgkJCX0KCQkJJGN1c3RvbV9maWVsZHMgPSAkY2ZfcmVzcG9uc2UtPm1lc3NhZ2U7CgkJCQoJCQlpZiAoIWlzX2FycmF5KCRjdXN0b21fZmllbGRzKSkKCQkJewoJCQkJJGRvVXBkYXRlQ3VzdG9tRmllbGRzID0gZmFsc2U7CgkJCX0KCQl9CgkJCgkJaWYoJGRvVXBkYXRlQ3VzdG9tRmllbGRzKQoJCXsKCQkJdHJ5IAoJCQl7CgkJCQkkYXdlYmVyID0gJHRoaXMtPmdldEFQSVJlZmVyZW5jZSgpOwoJCQkJJGFjY291bnQgPSAkYXdlYmVyLT5nZXRBY2NvdW50KCR0aGlzLT5hY2Nlc3NfdG9rZW4sJHRoaXMtPmFjY2Vzc19zZWNyZXQpOwoJCQkJJGxpc3QgPSAkYXdlYmVyLT5sb2FkRnJvbVVybCgieyR0aGlzLT5hcGlfYmFzZX0vYWNjb3VudHMveyRhY2NvdW50LT5pZH0vbGlzdHMveyRsaXN0SWR9Iik7CgkJCQkkcmVzdWx0cyA9ICRsaXN0LT5zdWJzY3JpYmVycy0+ZmluZChhcnJheSgiZW1haWwiPT4kZW1haWwpKTsKCQkJCQoJCQkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJHRoZV9tZW1iZXIpIC8vcmV0dXJucyBhIGNvbGxlY3Rpb24sIGJ1dCBzaG91bGQgbmV2ZXIgYmUgbW9yZSB0aGFuIG9uZSBtZW1iZXIKCQkJCXsKCQkJCQlmb3JlYWNoICgkY3VzdG9tX2ZpZWxkcyBhcyAkaz0+JHYpCgkJCQkJewoJCQkJCQkkdGhlX21lbWJlci0+Y3VzdG9tX2ZpZWxkc1ska10gPSAkdjsKCQkJCQl9CgkJCQkJJHRoZV9tZW1iZXItPnNhdmUoKTsKCQkJCX0KCQkJfQoJCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlLT5nZXRNZXNzYWdlKCksTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkvKioKCSAqIFJldHVybiBhIERIVE1ML0phdmFzY3JpcHQgZGlhbG9nIGNhcGFibGUgb2YgY29sbGVjdGluZyB0aGUgb3B0aW9ucyBuZWVkZWQgdG8gY29uZmlndXJlIHRoZSBwcm92aWRlcgoJICogCgkgKiBAcmV0dXJuIFN0cmluZyB0aGUgbWFya3VwIGZvciB0aGUgb3B0aW9ucyBkaWFsb2cKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbmRlck9wdGlvbnNEaWFsb2coJHBvc3QpCgl7CgkJaWYgKCFpc3NldCgkcG9zdFsnYXdlYmVyX2FjdGlvbiddKSkKCQl7CgkJCXJldHVybiAkdGhpcy0+ZGlzcGxheUF1dGhvcml6YXRpb25SZXF1ZXN0U2NyZWVuKCRwb3N0KTsKCQl9CgkJZWxzZSAKCQl7CgkJCXN3aXRjaCAoJHBvc3RbJ2F3ZWJlcl9hY3Rpb24nXSkKCQkJewoJCQkJY2FzZSAndmFsaWRhdGVDcmVkZW50aWFscyc6CgkJCQkJcmV0dXJuICR0aGlzLT52YWxpZGF0ZUNyZWRlbnRpYWxzKCRwb3N0KTsKCQkJCQlicmVhazsKCQkJCWNhc2UgJ2R1bXBDcmVkZW50aWFscyc6CgkJCQkJJHRoaXMtPmR1bXBDcmVkZW50aWFscygkcG9zdCk7CgkJCQkJcmV0dXJuICR0aGlzLT5kaXNwbGF5QXV0aG9yaXphdGlvblJlcXVlc3RTY3JlZW4oJHBvc3QpOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gJHRoaXMtPmRpc3BsYXlBdXRob3JpemF0aW9uUmVxdWVzdFNjcmVlbigkcG9zdCk7CgkJCQkJYnJlYWs7CgkJCX0KCQl9Cgl9CgkKCS8qKgoJICogRGlzcGxheXMgYSBzY3JlZW4gcHJvdmlkaW5nIHRoZSB1c2VyIHRoZSBhYmlsaXR5IHRvIGNvbm5lY3QgdG8gQVdlYmVyIGFuZCBhdXRob3JpemUgTWVtYmVyTW91c2UgdG8gaW50ZXJhY3Qgd2l0aCB0aGVpciBhY2NvdW50CgkgKiBJZiB0aGVyZSBpcyBhIHNhdmVkIGNvbm5lY3Rpb24gd2l0aCBBV2ViZXIsIHRoZSByZXN1bHRzIG9mIGEgY2FsbCB0byB2YWxpZGF0ZUNyZWRlbnRpYWxzIGlzIHJldHVybmVkCgkgKiAKCSAqIEByZXR1cm4gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJEaWFsb2cgQ29udGFpbnMgdGhlIGZvcm0gYW5kIGNvbnRyb2xzIHRvIGJlIGRpc3BsYXllZAoJICovCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUF1dGhvcml6YXRpb25SZXF1ZXN0U2NyZWVuKCkKCXsKCQlpZiAoJHRoaXMtPnRlc3RDcmVkZW50aWFscygpKQoJCXsKCQkJcmV0dXJuICR0aGlzLT52YWxpZGF0ZUNyZWRlbnRpYWxzKGFycmF5KCkpOwoJCX0KCQkkZm9ybSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlckRpYWxvZygpOwoJCSRmb3JtLT5kaWFsb2cgPSA8PDxPUFRJT05TCgkJPGRpdiBpZD0ibW0tcHJvdmlkZXItY29uZmlnLW9wdGlvbnMiIHN0eWxlPSJ3aWR0aDo1MDBweDsiPgoJCTxhIGhyZWY9IiMiIG9uQ2xpY2s9ImphdmFzY3JpcHQ6d2luZG93Lm9wZW4oJ2h0dHBzOi8vYXV0aC5hd2ViZXIuY29tLzEuMC9vYXV0aC9hdXRob3JpemVfYXBwL2ZlNDJjMTFlJywnb2F1dGgnLCd3aWR0aD04MDAsaGVpZ2h0PTYwMCxtZW51YmFyPXllcyxsb2NhdGlvbj15ZXMscmVzaXphYmxlPXllcyxzY3JvbGxiYXJzPXllcyxzdGF0dXM9eWVzJyk7Ij5DbGljayBoZXJlIHRvIGF1dGhvcml6ZSBNZW1iZXJNb3VzZSB0byBhY2Nlc3MgeW91ciBBV2ViZXIgYWNjb3VudDwvYT48YnIvPgoJCUluIHRoZSB3aW5kb3cgdGhhdCBwb3BzIHVwLCBlbnRlciB5b3VyIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBhbmQgY2xpY2sgQWxsb3cgQWNjZXNzLiBZb3Ugd2lsbCBiZSBwcmVzZW50ZWQgd2l0aCBhbiBhdXRoZW50aWNhdGlvbgoJCWNvZGUsIHdoaWNoIHlvdSB3aWxsIG5lZWQgdG8gY29weSBhbmQgcGFzdGUgYmVsb3cgPGJyLz48YnIvPgoJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJhdXRoZW50aWNhdGlvbl9jb2RlIiBzaXplPSI3NSI+CgkJPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0iYXdlYmVyX2FjdGlvbiIgdmFsdWU9InZhbGlkYXRlQ3JlZGVudGlhbHMiPgoJCTwvZGl2PgpPUFRJT05TOwoJCSRmb3JtLT5jb250cm9scyA9IDw8PENPTlRST0xTCgkJPGJ1dHRvbiBpZD0iZW1haWwtc2VydmljZS1wcm92aWRlci1jb25maWd1cmUiIGNsYXNzPSJtbS11aS1idXR0b24gYmx1ZSIgb25DbGljaz0ibW1qcy5zaG93TmV3UHJvdmlkZXJPcHRpb25zKGpRdWVyeSgnI3Byb3ZpZGVyLWNvbmZpZy1mb3JtIDppbnB1dCcpLnNlcmlhbGl6ZUFycmF5KCkpOyByZXR1cm4gZmFsc2U7IiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Ij5BdXRob3JpemUgTWVtYmVyTW91c2U8L2J1dHRvbj4KCQk8YnV0dG9uIGlkPSJyZXNldCIgY2xhc3M9Im1tLXVpLWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25DbGljaz0ibW1qcy5wcm92aWRlck9wdGlvbnNSZXNldCgpOyByZXR1cm4gZmFsc2U7IiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Ij5SZXNldDwvYnV0dG9uPgpDT05UUk9MUzsKCQlyZXR1cm4gJGZvcm07Cgl9CgkKCS8qKgoJICogdmFsaWRhdGVDcmVkZW50aWFscyBkZXRlcm1pbmVzIGlmIHRoZSBhdXRoZW50aWNhdGlvbiBjb2RlIHRoZSB1c2VyIGVudGVyZWQgaW4gdGhlIGFkbWluIHBhbmVsIGlzIHZhbGlkLCBhbmQgaWYgc28gCgkgKiBzdG9yZXMgdGhlIHBhcnNlZCBvdXQgb2F1dGggY3JlZGVudGlhbHMuIEEgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJEaWFsb2cgY29udGFpbmluZyBhIGNvbmZpcm1hdGlvbiBtZXNzYWdlIGFuZCBjb250cm9scyB0byAKCSAqIGFkdmFuY2UgdG8gdGhlIGxpc3QtbWFuYWdlbWVudCBzY3JlZW4gaXMgcmV0dXJuZWQgaWYgdGhlIGNyZWRlbnRpYWxzIGFyZSBzdWNjZXNzZnVsbHkgdmFsaWRhdGVkCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcG9zdCBUaGUgZGF0YSBwb3N0ZWQgYmFjayBmcm9tIHRoZSBjb25maWd1cmF0aW9uIHBhZ2UKCSAqIEByZXR1cm4gTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJEaWFsb2cgb24gc3VjY2VzcywgTU1fUmVzcG9uc2Ugd2l0aCB0aGUgZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB2YWxpZGF0ZUNyZWRlbnRpYWxzKCRwb3N0KQoJewoJCXRyeQoJCXsKCQkJJHVuc2F2ZWRDcmVkZW50aWFscyA9IGZhbHNlOwoJCQlpZiAoaXNzZXQoJHBvc3RbJ2F1dGhlbnRpY2F0aW9uX2NvZGUnXSkpCgkJCXsKCQkJCSRhdXRoY29kZV9hcnJheSA9IE1NX0FXZWJlckFQSTo6Z2V0RGF0YUZyb21Bd2ViZXJJRCgkX1BPU1RbJ2F1dGhlbnRpY2F0aW9uX2NvZGUnXSk7CgkJCQlpZiAoJGF1dGhjb2RlX2FycmF5ID09IG51bGwpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBBdXRob3JpemF0aW9uIENvZGUiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJbGlzdCgkYXBwbGljYXRpb25fa2V5LCRhcHBsaWNhdGlvbl9zZWNyZXQsJGFjY2Vzc190b2tlbiwkYWNjZXNzX3NlY3JldCkgPSAkYXV0aGNvZGVfYXJyYXk7CgkJCQkkdGhpcy0+YXBwbGljYXRpb25fa2V5ID0gJGFwcGxpY2F0aW9uX2tleTsKCQkJCSR0aGlzLT5hcHBsaWNhdGlvbl9zZWNyZXQgPSAkYXBwbGljYXRpb25fc2VjcmV0OwoJCQkJJHRoaXMtPmFjY2Vzc190b2tlbiA9ICRhY2Nlc3NfdG9rZW47CgkJCQkkdGhpcy0+YWNjZXNzX3NlY3JldCA9ICRhY2Nlc3Nfc2VjcmV0OwoJCQkJJHVuc2F2ZWRDcmVkZW50aWFscyA9IHRydWU7CgkJCX0KCQkKCQkKCQkJJGF3ZWJlciA9ICR0aGlzLT5nZXRBUElSZWZlcmVuY2UoKTsKCQkJJGFjY291bnQgPSAkYXdlYmVyLT5nZXRBY2NvdW50KCR0aGlzLT5hY2Nlc3NfdG9rZW4sICR0aGlzLT5hY2Nlc3Nfc2VjcmV0KTsKCQkJJGFjY291bnRfaWQgPSAkYWNjb3VudC0+aWQ7CgkJCQoJCQlpZiAoJHVuc2F2ZWRDcmVkZW50aWFscykKCQkJewoJCQkJLy9pZiBubyBleGNlcHRpb24gdGhyb3duLCB0aGUgY3JlZGVudGlhbHMgYXJlIGdvb2QsIHNvIHNhdmUgdGhlbQoJCQkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJHRoaXMtPmdldFRva2VuKCkpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJhcHBsaWNhdGlvbktleSIsICRhcHBsaWNhdGlvbl9rZXkpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJhcHBsaWNhdGlvblNlY3JldCIsICRhcHBsaWNhdGlvbl9zZWNyZXQpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJhY2Nlc3NUb2tlbiIsICRhY2Nlc3NfdG9rZW4pOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0Q29uZmlnT3B0aW9uKCJhY2Nlc3NTZWNyZXQiLCAkYWNjZXNzX3NlY3JldCk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5jb21taXREYXRhKCk7CgkJCX0KCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGUtPmdldE1lc3NhZ2UoKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGZvcm0gPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJEaWFsb2coKTsKCQkkZm9ybS0+ZGlhbG9nID0gPDw8T1BUSU9OUwoJCTxkaXYgaWQ9Im1tLXByb3ZpZGVyLWNvbmZpZy1vcHRpb25zIj4KCQlNZW1iZXJNb3VzZSBpcyBjb25uZWN0ZWQgdG8gQVdlYmVyIGFjY291bnQgeyRhY2NvdW50X2lkfS48YnIvPgoJCTxhIG9uQ2xpY2s9ImphdmFzY3JpcHQ6alF1ZXJ5KCcjcHJvdmlkZXJfdG9rZW4nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpOyBqUXVlcnkoJyNhd2ViZXJfYWN0aW9uJykudmFsKCdkdW1wQ3JlZGVudGlhbHMnKTsgbW1qcy5zaG93TmV3UHJvdmlkZXJPcHRpb25zKGpRdWVyeSgnI3Byb3ZpZGVyLWNvbmZpZy1mb3JtIDppbnB1dCcpLnNlcmlhbGl6ZUFycmF5KCkpOyByZXR1cm4gZmFsc2U7Ij5DbGljayBoZXJlIHRvIHVuLWF1dGhlbnRpY2F0ZTwvYT4KCQk8aW5wdXQgaWQ9J2F3ZWJlcl9hY3Rpb24nIHR5cGU9J2hpZGRlbicgbmFtZT0nYXdlYmVyX2FjdGlvbicgdmFsdWU9JycvPgoJCTwvZGl2PgpPUFRJT05TOwoJCXJldHVybiAkZm9ybTsKCX0KCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldEFQSVJlZmVyZW5jZSgpCgl7CgkJaWYgKCFpc3NldCgkdGhpcy0+YXdlYmVyX2FwaSkgfHwgISgkdGhpcy0+YXdlYmVyX2FwaSBpbnN0YW5jZW9mIE1NX0FXZWJlckFQSSkpCgkJewoJCQkkdGhpcy0+YXdlYmVyX2FwaSA9IG5ldyBNTV9BV2ViZXJBUEkoJHRoaXMtPmFwcGxpY2F0aW9uX2tleSwgJHRoaXMtPmFwcGxpY2F0aW9uX3NlY3JldCk7CgkJfQoJCXJldHVybiAkdGhpcy0+YXdlYmVyX2FwaTsKCX0KCQoJLyoqCgkgKiB0ZXN0Q3JlZGVudGlhbHMgYXR0ZW1wdHMgdG8gdXNlIHRoZSBzdG9yZWQgb2F1dGggY3JlZGVudGlhbHMgdG8gY29ubmVjdCBhbmQgcmV0cmlldmUgdGhlIGFjY291bnQgb2JqZWN0CgkgKiBJdCBpcyBhc3N1bWVkIHRoYXQgZmFpbHVyZSBtZWFucyB0aGF0IHRoZSBzdG9yZWQgY3JlZGVudGlhbHMgYXJlIGludmFsaWQsIGFsdGhvdWdoIHRoaXMgY291bGQgYWxzbyBiZSBjYXVzZWQgYnkgYSBjb25uZWN0aW9uIGVycm9yCgkgKiBUaGlzIG1ldGhvZCBjb3VsZCBiZSBpbXByb3ZlZCBieSBkZXRlY3RpbmcgdGhlIHNwZWNpZmljIGV4Y2VwdGlvbnMgcmVsYXRlZCB0byBhdXRob3JpemF0aW9uIHByb2JsZW1zCgkgKiAKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIG9uIGZhaWx1cmUKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiB0ZXN0Q3JlZGVudGlhbHMoKQoJewoJCWlmIChlbXB0eSgkdGhpcy0+YXBwbGljYXRpb25fa2V5KSB8fCBlbXB0eSgkdGhpcy0+YXBwbGljYXRpb25fc2VjcmV0KSB8fCBlbXB0eSgkdGhpcy0+YWNjZXNzX3Rva2VuKSB8fCBlbXB0eSgkdGhpcy0+YWNjZXNzX3NlY3JldCkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCXRyeSAKCQl7CgkJCSRhd2ViZXIgPSAkdGhpcy0+Z2V0QVBJUmVmZXJlbmNlKCk7CgkJCSRhd2ViZXItPmdldEFjY291bnQoJHRoaXMtPmFjY2Vzc190b2tlbiwkdGhpcy0+YWNjZXNzX3NlY3JldCk7CgkJCXJldHVybiB0cnVlOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJLyoqCgkgKiBkdW1wQ3JlZGVudGlhbHMgcmVtb3ZlcyBzdG9yZWQgb2F1dGgga2V5cywgc2VjcmV0cywgYW5kIHRva2VucwoJICovCglwcml2YXRlIGZ1bmN0aW9uIGR1bXBDcmVkZW50aWFscygpCgl7CgkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9FbWFpbFNlcnZpY2VQcm92aWRlcigpOwoJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCR0aGlzLT5nZXRUb2tlbigpKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJJHByb3ZpZGVyX2VudGl0eS0+ZGVsZXRlQ29uZmlnT3B0aW9uKCJhcHBsaWNhdGlvbktleSIpOwoJCSRwcm92aWRlcl9lbnRpdHktPmRlbGV0ZUNvbmZpZ09wdGlvbigiYXBwbGljYXRpb25TZWNyZXQiKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5kZWxldGVDb25maWdPcHRpb24oImFjY2Vzc1Rva2VuIik7CgkJJHByb3ZpZGVyX2VudGl0eS0+ZGVsZXRlQ29uZmlnT3B0aW9uKCJhY2Nlc3NTZWNyZXQiKTsKCQkkcHJvdmlkZXJfZW50aXR5LT5jb21taXREYXRhKCk7CgkJCgkJJHRoaXMtPmFwcGxpY2F0aW9uX2tleSA9ICIiOwoJCSR0aGlzLT5hcHBsaWNhdGlvbl9zZWNyZXQgPSAiIjsKCQkkdGhpcy0+YWNjZXNzX3Rva2VuID0gIiI7CgkJJHRoaXMtPmFjY2Vzc19zZWNyZXQgPSAiIjsKCX0JCgkKCS8qKgoJICoKCSAqIEFkZHMgY3VzdG9tIGZpZWxkcyB0byB0aGUgbGlzdCBpZiB0aGV5IGFyZSBub3QgYWxyZWFkeSBwcmVzZW50LiBDdXJyZW50bHkgdXNlZCB0byBhZGQgYWNjZXNzIHRhZ3MKCSAqIEBwYXJhbSBTdHJpbmcgJGxpc3RJZCBUaGUgaWQgb2YgdGhlIGxpc3QgdG8gYWRkIHRoZSBtZXJnZSB2YXJzIHRvCgkgKiBAcGFyYW0gJGluY2x1ZGVCdW5kbGVJbmZvIGluZGljYXRlcyBpZiBidW5kbGUgaW5mb3JtYXRpb24gc2hvdWxkIGJlIHBhc3NlZAoJICovCglwcml2YXRlIGZ1bmN0aW9uIGFkZFJlcXVpcmVkQ3VzdG9tRmllbGRzKCRsaXN0SWQsICRpbmNsdWRlQnVuZGxlSW5mbz10cnVlKQoJewoJCS8vZ2V0IGV4aXN0aW5nIGN1c3RvbSBmaWVsZHMKCQkkYXdlYmVyID0gJHRoaXMtPmdldEFQSVJlZmVyZW5jZSgpOwoJCSRhY2NvdW50ID0gJGF3ZWJlci0+Z2V0QWNjb3VudCgkdGhpcy0+YWNjZXNzX3Rva2VuLCAkdGhpcy0+YWNjZXNzX3NlY3JldCk7CgkJJGN1c3RvbV9maWVsZHMgPSAgJGF3ZWJlci0+bG9hZEZyb21VcmwoInskdGhpcy0+YXBpX2Jhc2V9L2FjY291bnRzL3skYWNjb3VudC0+aWR9L2xpc3RzL3skbGlzdElkfS9jdXN0b21fZmllbGRzIik7CgkJJGNmQ2FjaGUgPSBhcnJheSgpOwoJCWZvcmVhY2goJGN1c3RvbV9maWVsZHMgYXMgJGN1c3RvbV9maWVsZCkKCQl7CgkJCSRjZkNhY2hlWyRjdXN0b21fZmllbGQtPm5hbWVdID0gJGN1c3RvbV9maWVsZC0+bmFtZTsKCQl9CgkJCgkJaWYoJGluY2x1ZGVCdW5kbGVJbmZvKQoJCXsKCQkJZm9yZWFjaCAoTU1fQnVuZGxlOjpnZXRCdW5kbGVTaG9ydE5hbWVzKCkgYXMgJHJlcVRhZz0+JHJlcU5hbWUpCgkJCXsKCQkJCSRyZXFUYWcgPSBzdHJ0b3VwcGVyKCRyZXFUYWcpOyAvL21ha2UgdGhlIHNob3J0bmFtZSB1cHBlcmNhc2UgdG8gc3RhbmRhcmRpemUgd2l0aCBvdGhlciBFU1BzCgkJCQlpZiAoIWlzc2V0KCRjZkNhY2hlWyRyZXFUYWddKSkKCQkJCXsKCQkJCQkvL2FkZCB0aGlzIGN1c3RvbSBmaWVsZCB0byB0aGUgbGlzdAoJCQkJCSRjdXN0b21fZmllbGRzLT5jcmVhdGUoYXJyYXkoIm5hbWUiPT4kcmVxVGFnKSk7CgkJCQl9CgkJCX0KCQl9Cgl9Cn0K', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(161, 'customfield', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0N1c3RvbUZpZWxkIGV4dGVuZHMgTU1fRW50aXR5CnsJCglwdWJsaWMgc3RhdGljICRUWVBFX0lOUFVUID0gImlucHV0IjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfQ0hFQ0tCT1ggPSAiY2hlY2tib3giOwoJcHVibGljIHN0YXRpYyAkVFlQRV9SQURJTyA9ICJyYWRpbyI7CglwdWJsaWMgc3RhdGljICRUWVBFX0RST1BET1dOID0gImRyb3Bkb3duIjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfVEVYVCA9ICJ0ZXh0IjsKCQoJcHVibGljIHN0YXRpYyAkQ0hFQ0tCT1hfT04gPSAibW1fY2Jfb24iOwoJcHVibGljIHN0YXRpYyAkQ0hFQ0tCT1hfT0ZGID0gIm1tX2NiX29mZiI7CgkKCXByaXZhdGUgc3RhdGljICROT1RfU0VUX1RFWFQgPSAiLSBub3Qgc2V0IC0iOwoJCglwcml2YXRlICRkaXNwbGF5TmFtZSA9ICIiOwoJcHJpdmF0ZSAkdHlwZTsKCXByaXZhdGUgJHNob3dPbk15QWNjb3VudEZsYWcgPSAiMCI7Cglwcml2YXRlICRoaWRkZW5GbGFnID0gIjAiOwoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DVVNUT01fRklFTERTLiIgV0hFUkUgaWQ9JyIuJHRoaXMtPmlkLiInOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5IAoJCXsKCQkJJHRoaXMtPmRpc3BsYXlOYW1lID0gJGRhdGEtPmRpc3BsYXlfbmFtZTsKCQkJJHRoaXMtPnR5cGUgPSAkZGF0YS0+dHlwZTsKCQkJJHRoaXMtPnNob3dPbk15QWNjb3VudEZsYWcgPSAkZGF0YS0+c2hvd19vbl9teV9hY2NvdW50OwoJCQkkdGhpcy0+aGlkZGVuRmxhZyA9ICRkYXRhLT5pc19oaWRkZW47CgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIAoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vIG1ha2Ugc3VyZSBkaXNwbGF5IG5hbWUgaXMgdW5pcXVlCgkJaWYoJHRoaXMtPmRpc3BsYXlOYW1lRXhpc3RzKCkpCgkJewoJCQkkY3RyID0gMTsKCQkJJG9yaWdpbmFsRGlzcGxheU5hbWUgPSAkdGhpcy0+ZGlzcGxheU5hbWU7CgkJCQoJCQl3aGlsZSgkdGhpcy0+ZGlzcGxheU5hbWVFeGlzdHMoKSkKCQkJewoJCQkJJHRoaXMtPmRpc3BsYXlOYW1lID0gJG9yaWdpbmFsRGlzcGxheU5hbWUuIiAiLiRjdHI7CgkJCQkkY3RyKys7CgkJCX0KCQl9CgkJCgkJaWYoaW50dmFsKCR0aGlzLT5pZCkgPiAwKQoJCXsKCQkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9DVVNUT01fRklFTERTLiIgc2V0IGRpc3BsYXlfbmFtZT0nJXMnLCB0eXBlPSclcycsIHNob3dfb25fbXlfYWNjb3VudD0nJXMnLCBpc19oaWRkZW49JyVkJyB3aGVyZSBpZD0neyR0aGlzLT5pZH0nOyI7CgkJCQoJCQkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+Z2V0RGlzcGxheU5hbWUoKSwgJHRoaXMtPmdldFR5cGUoKSwgJHRoaXMtPnNob3dPbk15QWNjb3VudEZsYWcsICR0aGlzLT5oaWRkZW5GbGFnKTsKCQkJJHJldCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCQkKCQkJaWYoJHJldD09PWZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3Qgc2F2ZSBxdWVyeSB7JHByZXBhcmVkU3FsfS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkZGF0YSA9IGFycmF5KCJkaXNwbGF5X25hbWUiID0+ICR0aGlzLT5nZXREaXNwbGF5TmFtZSgpLCAKCQkJCQkidHlwZSIgPT4gJHRoaXMtPmdldFR5cGUoKSwgCgkJCQkJInNob3dfb25fbXlfYWNjb3VudCIgPT4gJHRoaXMtPnNob3dPbk15QWNjb3VudEZsYWcsCgkJCQkJImlzX2hpZGRlbiIgPT4gJHRoaXMtPmhpZGRlbkZsYWcKCQkJKTsKCQkJJHJldCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ1VTVE9NX0ZJRUxEUywgJGRhdGEpOwoJCQkKCQkJaWYoJHJldCA9PT0gZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBzYXZlIGN1c3RvbSBmaWVsZCBkdWUgdG8gU1FMIGVycm9yLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZihpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQ1VTVE9NX0ZJRUxEUy4iIHdoZXJlIGlkPSd7JHRoaXMtPmlkfScgbGltaXQgMSI7CgkJCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQoJCQlpZigkcmVzdWx0PT09ZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCByZW1vdmUgY3VzdG9tIGZpZWxkIGR1ZSB0byBTUUwgZXJyb3IuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCSR0aGlzLT5kZWxldGVPcHRpb25zKCk7CgkJCQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgY3VzdG9tIGZpZWxkLCBjb3VsZCBub3QgcmVtb3ZlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCgkKCXByaXZhdGUgZnVuY3Rpb24gZGlzcGxheU5hbWVFeGlzdHMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gInNlbGVjdCBjb3VudChpZCkgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX0NVU1RPTV9GSUVMRFMuIiB3aGVyZSBkaXNwbGF5X25hbWUgPSAnJXMnICI7CgkJCgkJaWYoJHRoaXMtPmlkPjApCgkJewoJCQkkc3FsLj0iIGFuZCBpZCE9J3skdGhpcy0+aWR9JyAiOwoJCX0KCQkKCQkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJCgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRwcmVwYXJlZFNxbCk7CgkJCgkJaWYoaXNzZXQoJHJlc3VsdC0+dG90YWwpKQoJCXsKCQkJaWYoJHJlc3VsdC0+dG90YWw+MCkKCQkJewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZHJhdygkdmFsdWU9IiIsICRjbGFzcz0iIiwgJGlkUHJlZml4PSJtbV9jdXN0b21fZmllbGRfIiwgJGluY2x1ZGVIZWxwZXJzPXRydWUsICRhbGxvd1Vuc2V0PWZhbHNlKQoJewoJCSRodG1sID0gIiI7CgkJCgkJc3dpdGNoKCR0aGlzLT5nZXRUeXBlKCkpCgkJewoJCQljYXNlIE1NX0N1c3RvbUZpZWxkOjokVFlQRV9DSEVDS0JPWDoKCQkJCSRodG1sIC49ICI8aW5wdXQgdHlwZT1cImhpZGRlblwiIGlkPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfVwiIG5hbWU9XCJ7JGlkUHJlZml4fXskdGhpcy0+aWR9XCIgdmFsdWU9XCIiLnNlbGY6OiRDSEVDS0JPWF9PRkYuIlwiIC8+CiI7CgkJCQkkaHRtbCAuPSAiPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfVwiIG5hbWU9XCJ7JGlkUHJlZml4fXskdGhpcy0+aWR9XCIgdmFsdWU9XCIiLnNlbGY6OiRDSEVDS0JPWF9PTi4iXCIgIjsKCQkJCQoJCQkJaWYoIWVtcHR5KCRjbGFzcykpCgkJCQl7CgkJCQkJJGh0bWwgLj0gImNsYXNzPVwieyRjbGFzc31cIiAiOwoJCQkJfQoJCQkJCgkJCQlpZigoJHZhbHVlICE9ICIiKSAmJiAoJHZhbHVlID09IHNlbGY6OiRDSEVDS0JPWF9PTikpCgkJCQl7CgkJCQkJJGh0bWwgLj0gImNoZWNrZWQiOwoJCQkJfQoJCQkJCgkJCQlpZigkaW5jbHVkZUhlbHBlcnMpCgkJCQl7CgkJCQkJJGh0bWwgLj0gIiBvbmNoYW5nZT1cImpRdWVyeSh0aGlzKS5pcygnOmNoZWNrZWQnKSA/IGpRdWVyeSgnI3skaWRQcmVmaXh9eyR0aGlzLT5pZH1faGVscGVyJykudmFsKCciLnNlbGY6OiRDSEVDS0JPWF9PTi4iJykgOiBqUXVlcnkoJyN7JGlkUHJlZml4fXskdGhpcy0+aWR9X2hlbHBlcicpLnZhbCgnIi5zZWxmOjokQ0hFQ0tCT1hfT0ZGLiInKTtcIiAiOwoJCQkJfQoJCQkJCgkJCQkkaHRtbCAuPSAiLz4KIjsKCQkJCQoJCQkJaWYoJGluY2x1ZGVIZWxwZXJzKQoJCQkJewoJCQkJCSRodG1sIC49ICI8aW5wdXQgdHlwZT1cImhpZGRlblwiIGlkPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfV9oZWxwZXJcIiBuYW1lPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfV9oZWxwZXJcIiAiOwoJCQkJCgkJCQkJaWYoKCR2YWx1ZSAhPSAiIikgJiYgKCR2YWx1ZSA9PSBzZWxmOjokQ0hFQ0tCT1hfT04pKQoJCQkJCXsKCQkJCQkJJGh0bWwgLj0gInZhbHVlPVwiIi5zZWxmOjokQ0hFQ0tCT1hfT04uIlwiIjsKCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCSRodG1sIC49ICJ2YWx1ZT1cIiIuc2VsZjo6JENIRUNLQk9YX09GRi4iXCIiOwoJCQkJCX0KCQkJCQkKCQkJCQkkaHRtbCAuPSAiLz4KIjsKCQkJCX0KCQkJCQoJCQkJYnJlYWs7CgkJCQoJCQljYXNlIE1NX0N1c3RvbUZpZWxkOjokVFlQRV9EUk9QRE9XTjoKCQkJCSRvcHRpb25zID0gJHRoaXMtPmdldE9wdGlvbnMoKTsKCQkJCQoJCQkJaWYoJGFsbG93VW5zZXQpCgkJCQl7CgkJCQkJYXJyYXlfdW5zaGlmdCgkb3B0aW9ucywgIiIpOwoJCQkJfQoJCQkJCgkJCQlpZihjb3VudCgkb3B0aW9ucykgPiAwKQoJCQkJewoJCQkJCSRsaXN0ID0gYXJyYXkoKTsKCQkJCQkkdmFsdWVJbk9wdGlvbnMgPSBmYWxzZTsKCQkJCQkKCQkJCQlmb3JlYWNoKCRvcHRpb25zIGFzICRvcHRpb24pCgkJCQkJewoJCQkJCQlpZigkb3B0aW9uID09ICIiICYmICRhbGxvd1Vuc2V0KQoJCQkJCQl7CgkJCQkJCQkkb3B0aW9uID0gc2VsZjo6JE5PVF9TRVRfVEVYVDsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJJGxpc3RbaHRtbGVudGl0aWVzKCRvcHRpb24sIEVOVF9RVU9URVMsICJVVEYtOCIpXSA9ICRvcHRpb247CgkJCQkJCQoJCQkJCQlpZigoJHZhbHVlICE9ICIiKSAmJiAoKHN0cnRvbG93ZXIoaHRtbGVudGl0aWVzKCRvcHRpb24sIEVOVF9RVU9URVMsICJVVEYtOCIpKSA9PSBzdHJ0b2xvd2VyKCR2YWx1ZSkpIHx8IChzdHJ0b2xvd2VyKCRvcHRpb24pID09IHN0cnRvbG93ZXIoJHZhbHVlKSkpKQoJCQkJCQl7CgkJCQkJCQkkdmFsdWVJbk9wdGlvbnMgPSB0cnVlOwoJCQkJCQkJCgkJCQkJCQlpZigoc3RydG9sb3dlcigkb3B0aW9uKSA9PSBzdHJ0b2xvd2VyKCR2YWx1ZSkpKQoJCQkJCQkJewoJCQkJCQkJCSR2YWx1ZSA9IGh0bWxlbnRpdGllcygkdmFsdWUsIEVOVF9RVU9URVMsICJVVEYtOCIpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCQoJCQkJCS8vIGlmIHRoZSBkZWZhdWx0IHZhbHVlIGlzIG5vdCBpbiB0aGUgb3B0aW9ucywgYWRkIHRoZSB2YWx1ZSBhcyBhbiBvcHRpb24KCQkJCQlpZighJHZhbHVlSW5PcHRpb25zICYmICgkdmFsdWUgIT0gIiIpKQoJCQkJCXsKCQkJCQkJJGxpc3RbaHRtbGVudGl0aWVzKCR2YWx1ZSwgRU5UX1FVT1RFUywgIlVURi04IildID0gJHZhbHVlOwoJCQkJCX0KCQkJCQkKCQkJCQkkaHRtbCAuPSAiPHNlbGVjdCBpZD1cInskaWRQcmVmaXh9eyR0aGlzLT5pZH1cIiBuYW1lPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfVwiICI7CgkJCQkJCgkJCQkJaWYoIWVtcHR5KCRjbGFzcykpCgkJCQkJewoJCQkJCQkkaHRtbCAuPSAiY2xhc3M9XCJ7JGNsYXNzfVwiICI7CgkJCQkJfQoJCQkJCQoJCQkJCSRodG1sIC49ICI+CiI7CgkJCQkJCgkJCQkJJGh0bWwgLj0gTU1fSHRtbFV0aWxzOjpnZW5lcmF0ZVNlbGVjdGlvbnNMaXN0KCRsaXN0LCAkdmFsdWUpOwoJCQkJCSRodG1sIC49ICI8L3NlbGVjdD4KIjsKCQkJCX0KCQkJCWJyZWFrOwoJCQkKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfSU5QVVQ6CgkJCQkkaHRtbCA9ICI8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cInskaWRQcmVmaXh9eyR0aGlzLT5pZH1cIiBuYW1lPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfVwiICI7CgkJCQkKCQkJCWlmKCFlbXB0eSgkY2xhc3MpKQoJCQkJewoJCQkJCSRodG1sIC49ICJjbGFzcz1cInskY2xhc3N9XCIgIjsKCQkJCX0KCQkJCQoJCQkJaWYoJHZhbHVlICE9ICIiKQoJCQkJewoJCQkJCSRodG1sIC49ICJ2YWx1ZT1cInskdmFsdWV9XCIgIjsKCQkJCX0KCQkJCQoJCQkJJGh0bWwgLj0gIi8+CiI7CgkJCQlicmVhazsKCQkJCgkJCWNhc2UgTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX1JBRElPOgoJCQkJJG9wdGlvbnMgPSAkdGhpcy0+Z2V0T3B0aW9ucygpOwoJCQkJCgkJCQlpZigkYWxsb3dVbnNldCkKCQkJCXsKCQkJCQlhcnJheV91bnNoaWZ0KCRvcHRpb25zLCAiIik7CgkJCQl9CgkJCQkKCQkJCS8vIGNoZWNrIGlmIGRlZmF1bHQgdmFsdWUgaXMgaW4gdGhlIGxpc3Qgb2Ygb3B0aW9ucyBhbmQgaWYgaXQncyBub3QsIGFkZCBpdCBhcyBhbiBvcHRpb24KCQkJCSR2YWx1ZUluT3B0aW9ucyA9IGZhbHNlOwoJCQkJaWYoJHZhbHVlICE9ICIiKQoJCQkJewoJCQkJCWZvcmVhY2goJG9wdGlvbnMgYXMgJG9wdGlvbikKCQkJCQl7CgkJCQkJCWlmKHN0cnRvbG93ZXIoJHZhbHVlKSA9PSBzdHJ0b2xvd2VyKGh0bWxlbnRpdGllcygkb3B0aW9uLCBFTlRfUVVPVEVTLCAiVVRGLTgiKSkgfHwgKHN0cnRvbG93ZXIoJG9wdGlvbikgPT0gc3RydG9sb3dlcigkdmFsdWUpKSkKCQkJCQkJewoJCQkJCQkJJHZhbHVlSW5PcHRpb25zID0gdHJ1ZTsKCQkJCQkJCQoJCQkJCQkJaWYoKHN0cnRvbG93ZXIoJG9wdGlvbikgPT0gc3RydG9sb3dlcigkdmFsdWUpKSkKCQkJCQkJCXsKCQkJCQkJCQkkdmFsdWUgPSBodG1sZW50aXRpZXMoJHZhbHVlLCBFTlRfUVVPVEVTLCAiVVRGLTgiKTsKCQkJCQkJCX0KCQkJCQkJCWJyZWFrOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQlpZighJHZhbHVlSW5PcHRpb25zICYmICR2YWx1ZSAhPSAiIikKCQkJCXsKCQkJCQkkb3B0aW9uc1todG1sZW50aXRpZXMoJHZhbHVlLCBFTlRfUVVPVEVTLCAiVVRGLTgiKV0gPSAkdmFsdWU7CgkJCQl9CgkJCQkKCQkJCWZvcmVhY2goJG9wdGlvbnMgYXMgJG9wdGlvbikKCQkJCXsKCQkJCQkkaHRtbCAuPSAiPGxhYmVsICI7CgkJCQkJCgkJCQkJaWYoIWVtcHR5KCRjbGFzcykpCgkJCQkJewoJCQkJCQkkaHRtbCAuPSAiY2xhc3M9XCJ7JGNsYXNzfVwiICI7CgkJCQkJfQoJCQkJCQoJCQkJCSRodG1sIC49ICI+PGlucHV0IHR5cGU9XCJyYWRpb1wiIGlkPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfVwiIG5hbWU9XCJ7JGlkUHJlZml4fXskdGhpcy0+aWR9XCIgIjsKCQkJCQkkaHRtbCAuPSAidmFsdWU9XCIiLmh0bWxlbnRpdGllcygkb3B0aW9uLCBFTlRfUVVPVEVTKS4iXCIgIjsKCQkJCQkKCQkJCQlpZigkaW5jbHVkZUhlbHBlcnMpCgkJCQkJewoJCQkJCQkkaHRtbCAuPSAiIG9uY2hhbmdlPVwialF1ZXJ5KCcjeyRpZFByZWZpeH17JHRoaXMtPmlkfV9oZWxwZXInKS52YWwoalF1ZXJ5KHRoaXMpLnZhbCgpKVwiICI7CgkJCQkJfQoJCQkJCQoJCQkJCWlmKHN0cnRvbG93ZXIoJHZhbHVlKSA9PSBzdHJ0b2xvd2VyKGh0bWxlbnRpdGllcygkb3B0aW9uLCBFTlRfUVVPVEVTLCAiVVRGLTgiKSkpCgkJCQkJewoJCQkJCQkkaHRtbCAuPSAiY2hlY2tlZCI7CgkJCQkJfQoJCQkJCQoJCQkJCWlmKCRvcHRpb24gPT0gIiIgJiYgJGFsbG93VW5zZXQpCgkJCQkJewoJCQkJCQkkb3B0aW9uID0gIjxlbT4iLnNlbGY6OiROT1RfU0VUX1RFWFQuIjwvZW0+IjsKCQkJCQl9CgkJCQkJCgkJCQkJJGh0bWwgLj0gIj4geyRvcHRpb259PC9sYWJlbD4gCiI7CgkJCQl9CgkJCQkKCQkJCWlmKCRpbmNsdWRlSGVscGVycykKCQkJCXsKCQkJCQkkaHRtbCAuPSAiPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBpZD1cInskaWRQcmVmaXh9eyR0aGlzLT5pZH1faGVscGVyXCIgbmFtZT1cInskaWRQcmVmaXh9eyR0aGlzLT5pZH1faGVscGVyXCIgIjsKCQkJCQoJCQkJCWlmKCR2YWx1ZSAhPSAiIikKCQkJCQl7CgkJCQkJCSRodG1sIC49ICJ2YWx1ZT1cInskdmFsdWV9XCIgIjsKCQkJCQl9CgkJCQkJCgkJCQkJJGh0bWwgLj0gIi8+CiI7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfVEVYVDoKCQkJCSRodG1sID0gIjx0ZXh0YXJlYSBpZD1cInskaWRQcmVmaXh9eyR0aGlzLT5pZH1cIiBuYW1lPVwieyRpZFByZWZpeH17JHRoaXMtPmlkfVwiICI7CgkJCQkKCQkJCWlmKCFlbXB0eSgkY2xhc3MpKQoJCQkJewoJCQkJCSRodG1sIC49ICJjbGFzcz1cInskY2xhc3N9XCIgIjsKCQkJCX0KCQkJCQoJCQkJJGh0bWwgLj0gIj4iOwoJCQkJCgkJCQlpZigkdmFsdWUgIT0gIiIpCgkJCQl7CgkJCQkJJGh0bWwgLj0gJHZhbHVlOwoJCQkJfQoJCQkJCgkJCQkkaHRtbCAuPSAiPC90ZXh0YXJlYT4iOwoJCQkJYnJlYWs7CgkJfQoJCQoJCXJldHVybiAkaHRtbDsKCX0KCQoJCgkvKiogT1BUSU9OIE1FVEhPRFMgKi8KCQoJcHVibGljIGZ1bmN0aW9uIGFkZE9wdGlvbigkdmFsdWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKGludHZhbCgkdGhpcy0+aWQpID4gMCkKCQl7CgkJCSRkYXRhID0gYXJyYXkoImN1c3RvbV9maWVsZF9pZCIgPT4gJHRoaXMtPmdldElkKCksICJ2YWx1ZSIgPT4gJHZhbHVlKTsKCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ1VTVE9NX0ZJRUxEX09QVElPTlMsICRkYXRhKTsKCQkJCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGFkZCBvcHRpb24gZHVlIHRvIFNRTCBlcnJvci4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gYWRkIG9wdGlvbi4gQ3VzdG9tIGZpZWxkIGlzIGludmFsaWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkZWxldGVPcHRpb25zKCkKCXsKCQlpZihpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCQoJCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQ1VTVE9NX0ZJRUxEX09QVElPTlMuIiB3aGVyZSBjdXN0b21fZmllbGRfaWQ9J3skdGhpcy0+aWR9JzsiOwoJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQkJCgkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgcmVtb3ZlIGN1c3RvbSBmaWVsZCBvcHRpb25zIGR1ZSB0byBTUUwgZXJyb3IuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQl9CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0T3B0aW9ucygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRkYXRhID0gYXJyYXkoKTsKCQkkc3FsID0gInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9DVVNUT01fRklFTERfT1BUSU9OUy4iIHdoZXJlIGN1c3RvbV9maWVsZF9pZD0neyR0aGlzLT5pZH0nIG9yZGVyIGJ5IGlkIGFzYzsiOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJaWYoISRyZXN1bHQgfHwgaXNfbnVsbCgkcmVzdWx0KSkKCQl7CgkJCXJldHVybiAkZGF0YTsKCQl9CgkJCgkJZm9yZWFjaCgkcmVzdWx0IGFzICRrZXk9PiRpdGVtKQoJCXsKCQkJJGRhdGFbXSA9ICRpdGVtLT52YWx1ZTsKCQl9CgkJCgkJcmV0dXJuICRkYXRhOwoJfQoJCgkKCS8qKiBHRVRURVJTIC8gU0VUVEVSUyAqLwoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RGlzcGxheU5hbWUoJHN0cikKCXsKCQkkdGhpcy0+ZGlzcGxheU5hbWUgPSB0cmltKCRzdHIpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGlzcGxheU5hbWUoKQoJewoJCXJldHVybiAkdGhpcy0+ZGlzcGxheU5hbWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzaG93T25NeUFjY291bnQoKQoJewoJCXJldHVybiAoJHRoaXMtPnNob3dPbk15QWNjb3VudEZsYWcgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFNob3dPbk15QWNjb3VudCgkZmxhZykKCXsKCQkkdGhpcy0+c2hvd09uTXlBY2NvdW50RmxhZyA9ICRmbGFnOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNIaWRkZW4oKQoJewoJCXJldHVybiAoJHRoaXMtPmhpZGRlbkZsYWcgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEhpZGRlbkZsYWcoJGZsYWcpCgl7CgkJJHRoaXMtPmhpZGRlbkZsYWcgPSAkZmxhZzsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFR5cGUoKQoJewoJCWlmKE1NX0N1c3RvbUZpZWxkOjp0eXBlSXNWYWxpZCgkdGhpcy0+dHlwZSkpCgkJewoJCQlyZXR1cm4gJHRoaXMtPnR5cGU7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBNTV9DdXN0b21GaWVsZDo6JFRZUEVfSU5QVVQ7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VHlwZSgkdHlwZSkKCXsKCQlpZihNTV9DdXN0b21GaWVsZDo6dHlwZUlzVmFsaWQoJHR5cGUpKQoJCXsKCQkJJHRoaXMtPnR5cGUgPSAkdHlwZTsKCQl9CgkJZWxzZQoJCXsKCQkJJHRoaXMtPnR5cGUgPSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfSU5QVVQ7CgkJfQoJfQoJCgkKCS8qKiBVVElMSVRFUyAqKi8KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc0JlaW5nVXNlZCgkY3VzdG9tRmllbGRJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkc3FsID0gInNlbGVjdCBjb3VudChpZCkgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX0NVU1RPTV9GSUVMRF9EQVRBLiIgd2hlcmUgY3VzdG9tX2ZpZWxkX2lkPSd7JGN1c3RvbUZpZWxkSWR9JyBhbmQgTEVOR1RIKHZhbHVlKT4wIjsKCQoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQoJCWlmKGlzc2V0KCRyZXN1bHQtPnRvdGFsKSkKCQl7CgkJCWlmKCRyZXN1bHQtPnRvdGFsPjApCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RGF0YUJ5RmllbGRJZCgkZmllbGRJZCkKCXsKCQkkZmllbGQgPSBuZXcgTU1fQ3VzdG9tRmllbGQoKTsKCQkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfQ1VTVE9NX0ZJRUxEUy4iIHdoZXJlIGlkPSd7JGZpZWxkSWR9JyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKGlzc2V0KCRyb3ctPmlkKSAmJiAkcm93LT5pZD4wKXsKCQkJJGZpZWxkLT5zZXREYXRhKCRyb3cpOwoJCQkkZmllbGQtPmlkID0gJHJvdy0+aWQ7CgkJfQoJCQoJCXJldHVybiAkZmllbGQ7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBoYXNDdXN0b21GaWVsZHMoJGluY2x1ZGVIaWRkZW49dHJ1ZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJzZWxlY3QgY291bnQoaWQpIGFzIHRvdGFsIGZyb20gIi5NTV9UQUJMRV9DVVNUT01fRklFTERTLiIgIjsKCQkKCQlpZigkaW5jbHVkZUhpZGRlbiA9PSBmYWxzZSkKCQl7CgkJCSRzcWwgLj0gIiBXSEVSRSBpc19oaWRkZW4gPSAnMCcgIjsKCQl9CgkJCgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKGlzc2V0KCRyZXN1bHQtPnRvdGFsKSkKCQl7CgkJCWlmKCRyZXN1bHQtPnRvdGFsPjApCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEN1c3RvbUZpZWxkRGF0YUJ5VXNlcigkdXNlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gInNlbGVjdCBjZi5pZCwgY2YuZGlzcGxheV9uYW1lLCBjZC52YWx1ZSBmcm9tICIuTU1fVEFCTEVfQ1VTVE9NX0ZJRUxEUy4iIGNmCgkJCQkJTEVGVCBKT0lOICIuTU1fVEFCTEVfQ1VTVE9NX0ZJRUxEX0RBVEEuIiBjZCBvbiBjZi5pZD1jZC5jdXN0b21fZmllbGRfaWQgYW5kIGNkLnVzZXJfaWQ9J3skdXNlcklkfScgb3JkZXIgYnkgaWQgQVNDIjsKCQkKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQlpZihpc19hcnJheSgkcmVzdWx0cykpCgkJewoJCQlmb3JlYWNoKCRyZXN1bHRzIGFzICYkcm93KQoJCQl7CgkJCQkkcm93LT52YWx1ZSA9IHN0cmlwc2xhc2hlcyhodG1sX2VudGl0eV9kZWNvZGUoJHJvdy0+dmFsdWUsRU5UX0NPTVBBVCB8IEVOVF9IVE1MNDAxLCAiVVRGLTgiKSk7CgkJCX0KCQkJCgkJCXJldHVybiAkcmVzdWx0czsKCQl9CgkJCgkJcmV0dXJuIGFycmF5KCk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q3VzdG9tRmllbGRzTGlzdCgkZmlsdGVyRm9yTXlBY2NvdW50UGFnZT1mYWxzZSwgJGluY2x1ZGVIaWRkZW49dHJ1ZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DVVNUT01fRklFTERTOwoJCgkJaWYoJGZpbHRlckZvck15QWNjb3VudFBhZ2UgPT0gdHJ1ZSB8fCAkaW5jbHVkZUhpZGRlbiA9PSBmYWxzZSkKCQl7CgkJCSRzcWwgLj0gIiBXSEVSRSAiOwoJCQkKCQkJaWYoJGZpbHRlckZvck15QWNjb3VudFBhZ2UpCgkJCXsKCQkJCSRzcWwgLj0gInNob3dfb25fbXlfYWNjb3VudCA9ICcxJyI7CgkJCX0KCQkJCgkJCWlmKCRpbmNsdWRlSGlkZGVuID09IGZhbHNlKQoJCQl7CgkJCQkkc3FsIC49ICJpc19oaWRkZW4gPSAnMCciOwoJCQl9CgkJfQoJCQoJCSRzcWwgLj0gIiBPUkRFUiBCWSBpZCBBU0M7IjsKCQkKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQoJCSRsaXN0ID0gYXJyYXkoKTsKCQoJCWlmKGlzX2FycmF5KCRyZXN1bHRzKSkKCQl7CgkJCWZvcmVhY2goJHJlc3VsdHMgYXMgJHJvdykKCQkJewoJCQkJJGxpc3RbJHJvdy0+aWRdID0gJHJvdy0+ZGlzcGxheV9uYW1lOwoJCQl9CgkJfQoJCgkJcmV0dXJuICRsaXN0OwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEZpZWxkVHlwZU5hbWUoJHR5cGUpCgl7CgkJc3dpdGNoKCR0eXBlKQoJCXsKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfQ0hFQ0tCT1g6CgkJCQlyZXR1cm4gIkNoZWNrIEJveCI7CgkJCQkKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfRFJPUERPV046CgkJCQlyZXR1cm4gIkRyb3AgRG93biI7CgkJCQkKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfSU5QVVQ6CgkJCQlyZXR1cm4gIlNob3J0IFRleHQiOwoJCQkJCQkKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfUkFESU86CgkJCQlyZXR1cm4gIlJhZGlvIEJ1dHRvbnMiOwoJCQkJCgkJCWNhc2UgTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX1RFWFQ6CgkJCQlyZXR1cm4gIkxvbmcgVGV4dCI7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAiU2hvcnQgVGV4dCI7CgkJfQoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEZpZWxkVHlwZUxpc3QoKQoJewoJCSRsaXN0ID0gYXJyYXkoKTsKCQkkbGlzdFtNTV9DdXN0b21GaWVsZDo6JFRZUEVfSU5QVVRdID0gTU1fQ3VzdG9tRmllbGQ6OmdldEZpZWxkVHlwZU5hbWUoTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX0lOUFVUKTsKCQkkbGlzdFtNTV9DdXN0b21GaWVsZDo6JFRZUEVfQ0hFQ0tCT1hdID0gTU1fQ3VzdG9tRmllbGQ6OmdldEZpZWxkVHlwZU5hbWUoTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX0NIRUNLQk9YKTsKCQkkbGlzdFtNTV9DdXN0b21GaWVsZDo6JFRZUEVfRFJPUERPV05dID0gTU1fQ3VzdG9tRmllbGQ6OmdldEZpZWxkVHlwZU5hbWUoTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX0RST1BET1dOKTsKCQkkbGlzdFtNTV9DdXN0b21GaWVsZDo6JFRZUEVfVEVYVF0gPSBNTV9DdXN0b21GaWVsZDo6Z2V0RmllbGRUeXBlTmFtZShNTV9DdXN0b21GaWVsZDo6JFRZUEVfVEVYVCk7CgkJJGxpc3RbTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX1JBRElPXSA9IE1NX0N1c3RvbUZpZWxkOjpnZXRGaWVsZFR5cGVOYW1lKE1NX0N1c3RvbUZpZWxkOjokVFlQRV9SQURJTyk7CgkJcmV0dXJuICRsaXN0OwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHR5cGVSZXF1aXJlc09wdGlvbnMoJHR5cGUpCgl7CgkJc3dpdGNoKCR0eXBlKQoJCXsKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfRFJPUERPV046CgkJCWNhc2UgTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX1JBRElPOgoJCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiB0eXBlSXNWYWxpZCgkdHlwZSkKCXsKCQlzd2l0Y2goJHR5cGUpCgkJewoJCQljYXNlIE1NX0N1c3RvbUZpZWxkOjokVFlQRV9DSEVDS0JPWDoKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfRFJPUERPV046CgkJCWNhc2UgTU1fQ3VzdG9tRmllbGQ6OiRUWVBFX0lOUFVUOgoJCQljYXNlIE1NX0N1c3RvbUZpZWxkOjokVFlQRV9SQURJTzoKCQkJY2FzZSBNTV9DdXN0b21GaWVsZDo6JFRZUEVfVEVYVDoKCQkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9Cn0=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(162, 'coinbaseservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIE1NX0NvaW5iYXNlU2VydmljZSBoYW5kbGVzIGhhbmRsZXMgYml0Y29pbiB0cmFuc2FjdGlvbnMgYW5kIG5vdGlmaWNhdGlvbnMgbWFkZSB2aWEgQ29pbmJhc2UKICogCiAqLwoKY2xhc3MgTU1fQ29pbmJhc2VTZXJ2aWNlIGV4dGVuZHMgTU1fUGF5bWVudFNlcnZpY2UKewoJcHJvdGVjdGVkICR0b2tlbiA9ICJDT0lOQkFTRSI7CgkKCS8vY29pbmJhc2Ugb3JkZXIvcGF5bWVudCBzdGF0dXNlcwoJcHVibGljIHN0YXRpYyAkT1JERVJfU1RBVFVTX0NPTVBMRVRFRCA9ICJjb21wbGV0ZWQiOwoJcHVibGljIHN0YXRpYyAkT1JERVJfU1RBVFVTX01JU1BBSUQgPSAibWlzcGFpZCI7CglwdWJsaWMgc3RhdGljICRPUkRFUl9TVEFUVVNfRVhQSVJFRCA9ICJleHBpcmVkIjsKCXB1YmxpYyBzdGF0aWMgJE9SREVSX1NUQVRVU19DQU5DRUxFRCA9ICJjYW5jZWxlZCI7CglwdWJsaWMgc3RhdGljICRSRUNVUlJJTkdfUEFZTUVOVF9TVEFUVVNfQUNUSVZFID0gImFjdGl2ZSI7CglwdWJsaWMgc3RhdGljICRSRUNVUlJJTkdfUEFZTUVOVF9TVEFUVVNfUEFVU0VEID0gInBhdXNlZCI7CglwdWJsaWMgc3RhdGljICRSRUNVUlJJTkdfUEFZTUVOVF9TVEFUVVNfQ0FOQ0VMRUQgPSAiY2FuY2VsZWQiOwoJCgkvL2FwaSBjb25maWd1cmF0aW9uIGZpZWxkcwoJcHJvdGVjdGVkICRhcGlLZXkgID0gIiI7Cglwcm90ZWN0ZWQgJGFwaVNlY3JldCAgPSAiIjsKCQoJLy9UT0RPOiBSRUZBQ1RPUjogTkVWRVIgU0hJUCBUTyBQUk9EVUNUSU9OIFdJVEggJHNraXBWYWxpZGF0aW9uIEFTIFRSVUU7IEZPUiBMT0NBTCBURVNUSU5HIE9OTFkhCglwcml2YXRlICRza2lwVmFsaWRhdGlvbiA9IGZhbHNlOwoJcHJpdmF0ZSAkYWxsb3dPcmRlckNyZWF0aW9uID0gZmFsc2U7CgkKCS8vc2V0IHRocmVzaG9sZCBvZiB3aGVuIGlwbnMgc2hvdWxkIGJlIGxvZ2dlZCB0byBkYXRhYmFzZQoJLy9hbGwgZmFsc2UgaXMgbWF4aW11bSBlZmZpZW5jeSAobGVzcyBkYiB3cml0ZXMpIGFuZAoJLy9hbGwgdHJ1ZSBpcyBtYXhpbXVtIHNhZmV0eSAoYXdhcmVuZXNzIG9mIGhhY2sgYXR0ZW1wdHMsIGJldHRlciBkZWJ1Z2dpbmcgaWYgY29pbmJhc2UgY2hhbmdlcyBmb3JtYXQsIGV0YykKCXByaXZhdGUgJGxvZ1VuYXV0aG9yaXplZElQTnMgPSB0cnVlOwoJcHJpdmF0ZSAkbG9nSW52YWxpZElQTnMgPSB0cnVlOwoJcHJpdmF0ZSAkbG9nRHVwbGljYXRlSVBOcyA9IGZhbHNlOwoJCgkvL2NvdWxkIGluIHRoZSBmdXR1cmUgc3VwcG9ydCBhbGwgY3VycmVuY2llcyBsaXN0ZWQgaGVyZTogaHR0cHM6Ly9jb2luYmFzZS5jb20vYXBpL3YxL2N1cnJlbmNpZXMKCS8vYnV0IHRoaXMgd291bGQgcmVxdWlyZSBhZGFwdGluZyBpcG4gaGFuZGxpbmcgdG8gbWFrZSBzdXJlIGl0IGNvdWxkIGhhbmRsZSBjdXJyZWN0bHkKCS8vKHJpZ2h0IG5vdyB3ZSBhc3N1bWUgdGhhdCBvcmRlci0+dG90YWxfbmF0aXZlLT5jZW50cy8xMDAgPSBwYXltZW50IHRvdGFsKQoJLy9hbHNvIHdvdWxkIG5lZWQgdG8gbWFrZSB2YWxpZGF0ZU9yZGVyLCB3aGljaCBlbnN1cmVzIG5vIG9yZGVyIGlzIGxlc3MgdGhhbiAkMS4wMCBVU0QsCgkvL2FibGUgdG8gY2FsY3VsYXRlIGNvcnJlY3RseSBmb3Igb3RoZXIgY3VycmVuY2llcwoJcHJvdGVjdGVkICRzdXBwb3J0ZWRDdXJyZW5jaWVzID0gYXJyYXkoIlVTRCIpOwoJCglwdWJsaWMgZnVuY3Rpb24gbG9hZERlcGVuZGVuY2llcygpCgl7CgkJcmVxdWlyZV9vbmNlKE1NX0xJQl9ESVIuIi9jb2luYmFzZS9Db2luYmFzZS5waHAiKTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0QVBJS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFwaUtleTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0QVBJS2V5KCRhcGlLZXkpCgl7CgkJJHRoaXMtPmFwaUtleSA9ICRhcGlLZXk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldEFQSVNlY3JldCgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcGlTZWNyZXQ7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldEFQSVNlY3JldCgkYXBpU2VjcmV0KQoJewoJCSR0aGlzLT5hcGlTZWNyZXQgPSAkYXBpU2VjcmV0OwoJfQoJCgoJcHVibGljIGZ1bmN0aW9uIGluc3RhbGwoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlwYXJlbnQ6Omluc3RhbGwoKTsKCQkKCQkvL3B1cnBvc2Ugb2YgdGhpcyB0YWJsZSBpcyB0byBsb2cgZXZlcnkgaW5jb21pbmcgaXBuIHRyYW5zYWN0aW9uCgkJJHNxbFtdID0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0NPSU5CQVNFX0lQTl9MT0cuIiAoXG4iLgoJCQkJImlkIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4iLgoJCQkJImJ1dHRvbl9pZCB2YXJjaGFyKDQ4KSxcbiIuCgkJCQkiYnV0dG9uX3R5cGUgdmFyY2hhcigyNCksXG4iLgoJCQkJImlwbl90cmFuc2FjdGlvbl9pZCB2YXJjaGFyKDQ4KSxcbiIuCgkJCQkiaXBuX3R5cGUgdmFyY2hhcigyNCkgTk9UIE5VTEwsXG4iLgoJCQkJImlwbl9jb250ZW50IHRleHQgTk9UIE5VTEwsXG4iLgoJCQkJImlwbl9zdGF0dXMgdmFyY2hhcigyNCkgTk9UIE5VTEwsXG4iLgoJCQkJImVycm9yIENIQVIoMCkgTlVMTCwgXG4iLgoJCQkJInJlY2VpdmVkIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKGlkKVxuIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpOyI7CgkJCgkJLy9wdXJwb3NlIG9mIHRoaXMgdGFibGUgaXMgdG8gbGluayBldmVyeSBjb2luYmFzZSAicmVjdXJyaW5nX3BheW1lbnQiIChzdWJzY3JpcHRpb24pIHdpdGggYSBtbSBvcmRlciBpdGVtCgkJLy8obm90IGFjdGl2ZWx5IHF1ZXJpZWQgYnV0IGltcG9ydGFudCBpZiBldmVyIG5lZWRpbmcgdG8gZGVidWcgYSBzdWJzY3JpcHRpb24gZ29uZSBhd3J5KQoJCSRzcWxbXSA9ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9DT0lOQkFTRV9TVUJTQ1JfTElOS1MuIiAoXG4iLgoJCQkJInJlY3VycmluZ19wYXltZW50X2lkIHZhcmNoYXIoMzIpIE5PVCBOVUxMLFxuIi4KCQkJCSJvcmRlcl9pdGVtX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAocmVjdXJyaW5nX3BheW1lbnRfaWQsb3JkZXJfaXRlbV9pZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTsiOwoJCQoJCS8vcHVycG9zZSBvZiB0aGlzIHRhYmxlIGlzIHRvIG1ha2UgYSAxOjEgbGluayBvZiBldmVyeSBjb2luYmFzZSAiYnV0dG9uIiAodW5pcXVlIGNoZWNrb3V0KSB3aXRoIGEgbW0gb3JkZXIKCQkvLyhlc3NlbnRpYWwgZm9yIGFzc29jaWF0aW5nICJvcmRlciIgYW5kICJyZWN1cnJpbmdfcGF5bWVudCIgaXBucyB3aGljaCBlYWNoIG90aGVyKQoJCSRzcWxbXSA9ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9DT0lOQkFTRV9CVVRUT05fTElOS1MuIiAoXG4iLgoJCQkJImJ1dHRvbl9pZCB2YXJjaGFyKDMyKSBOT1QgTlVMTCxcbiIuCgkJCQkib3JkZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkiUFJJTUFSWSBLRVkgIChidXR0b25faWQsb3JkZXJfaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCgkJZm9yZWFjaCAoJHNxbCBhcyAkcXVlcnkpCgkJewoJCQlkYmRlbHRhKCRxdWVyeSk7CgkJfQoJCQoJfQoKCgkvKioKCSAqIFVzZWQgdG8gcmVwb3J0IHdoYXQgZmVhdHVyZXMgdGhlIENvaW5iYXNlIFNlcnZpY2Ugc3VwcG9ydHMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN1cHBvcnRzRmVhdHVyZSgpCgkgKiAKCSAqIEBwYXJhbSAkZmVhdHVyZUNvbnN0IGEgY29uc3QgYXMgZGVmaW5lZCBpbiBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdCBzdXBwb3J0ZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHN1cHBvcnRzRmVhdHVyZSgkZmVhdHVyZUNvbnN0KQoJewoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9GRlNJVEVfU0VSVklDRTsKCQlyZXR1cm4gaW5fYXJyYXkoJGZlYXR1cmVDb25zdCwkc3VwcG9ydGVkLHRydWUpOwoJfQoKCQoJIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCSMgQURNSU4KCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoJLyoqCgkgKiBSZXR1cm5zIHRoZSBodG1sIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSBwYXltZW50IG1ldGhvZCBzZXR0aW5ncyBzY3JlZW4gZm9yIGNvbmZpZ3VyaW5nIENvaW5iYXNlCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbmZpZ3VyYXRpb24gZGlhbG9nIGh0bWwKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdPcHRpb25zKCkKCXsKCQkkY29uZmlnX29wdGlvbnMgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoInskdGhpcy0+Z2V0VGVtcGxhdGVEaXIoKX0vY29pbmJhc2VfY29uZmlnLmh0bWwucGhwIiwkdGhpcyk7CgkJcmV0dXJuICRjb25maWdfb3B0aW9uczsKCX0KCgoJLyoqCgkgKiBWYWxpZGF0ZXMgYW5kIGNvbmZpZ3VyZXMgdGhlIG9iamVjdCB3aXRoIHRoZSBzZXR0aW5ncyBpbmZvcm1hdGlvbiBnZW5lcmF0ZWQgYnkgc3VibWlzc2lvbiBvZiB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NDb25maWdPcHRpb25zKCkKCSAqCgkgKiBAcGFyYW0gJHBvc3QgYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSBwb3N0ZWQgZnJvbSB0aGUgcGF5bWVudCBtZXRob2RzIHNldHRpbmdzIHNjcmVlbgoJICogQHJldHVybiBBbiBNTV9SZXNwb25zZSBvZiB0eXBlIE1NX1Jlc3BvbnNlOjpTVUNDRVNTIGluZGljYXRpbmcgc3VjY2Vzc2Z1bCB2YWxpZGF0aW9uIGFuZCBhc3NpZ21lbnQuIE9uIGVycm9yLCB0aGUgdHlwZSB3aWxsIGJlIE1NX1Jlc3BvbnNlOjpFUlJPUiBhbmQgdGhlIG1lc3NhZ2Ugd2lsbCBjb250YWluIHRoZSBlcnJvciBtZXNzYWdlcwoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc0NvbmZpZ09wdGlvbnMoJHBvc3QpCgl7CgkJJGFjdGl2ZSA9IGlzc2V0KCRwb3N0WydvZmZzaXRlX3BheW1lbnRfc2VydmljZXMnXSkgJiYgaW5fYXJyYXkoc3RydG9sb3dlcigkdGhpcy0+Z2V0VG9rZW4oKSksICRwb3N0WydvZmZzaXRlX3BheW1lbnRfc2VydmljZXMnXSk7CgkJJHRoaXMtPnNldEFjdGl2ZSgkYWN0aXZlKTsKCQlpZiAoJGFjdGl2ZSkKCQl7CgkJCSR0aGlzLT5pbnN0YWxsKCk7CgkJCSRjb25maWcgPSBpc3NldCgkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2NvaW5iYXNlJ10pPyRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsnY29pbmJhc2UnXTphcnJheSgpOwoJCQkKCQkJJGNvbmZpZ1snYXBpX2tleSddID0gIWVtcHR5KCRjb25maWdbJ2FwaV9rZXknXSk/JGNvbmZpZ1snYXBpX2tleSddOiIiOwoJCQkkY29uZmlnWydhcGlfc2VjcmV0J10gPSAhZW1wdHkoJGNvbmZpZ1snYXBpX3NlY3JldCddKT8kY29uZmlnWydhcGlfc2VjcmV0J106IiI7CgkJCQoJCQkvL3ZhbGlkYXRlIGNvbmZpZ3VyYXRpb24gLSBtdXN0IG5vdCBiZSBlbXB0eSBhbmQgbXVzdCBub3QgcmV0dXJuIGF1dGggZXJyb3IgZnJvbSBDb2luYmFzZQoJCQlpZiAoZW1wdHkoJGNvbmZpZ1snYXBpX2tleSddKSB8fCBlbXB0eSgkY29uZmlnWydhcGlfc2VjcmV0J10pKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb2luYmFzZSBDb25maWd1cmF0aW9uIEVycm9yOiBCb3RoIEFQSSBjcmVkZW50aWFscyBtdXN0IGJlIGZpbGxlZCBvdXQgaW4gb3JkZXIgdG8gdXNlIHRoZSBDb2luYmFzZSBwYXltZW50IG1ldGhvZC4iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCXRyeQoJCQl7CgkJCQkkdGVzdEFQSSA9IENvaW5iYXNlOjp3aXRoQXBpS2V5KCRjb25maWdbJ2FwaV9rZXknXSwgJGNvbmZpZ1snYXBpX3NlY3JldCddKS0+Y3JlYXRlQnV0dG9uKCd0ZXN0JywnMS4wMCcsJ1VTRCcpOwkKCQkJfQoJCQljYXRjaChFeGNlcHRpb24gJGUpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvaW5iYXNlIGRlbmllZCBhY2Nlc3MgZm9yIHRob3NlIEFQSSBjcmVkZW50aWFscy4gUGxlYXNlIG1ha2Ugc3VyZSB5b3VyIG1lcmNoYW50IGFjY291bnQgaGFzIGJlZW4gYWN0aXZhdGVkIGFuZCB0aGF0IHlvdSBnYXZlIFwiYnV0dG9uc1wiIHBlcm1pc3Npb25zIHdoZW4geW91IGNyZWF0ZWQgdGhhdCBBUEkga2V5LiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7IAoJCQl9CgkJCQoJCQkkdGhpcy0+c2V0QVBJS2V5KCRjb25maWdbJ2FwaV9rZXknXSk7CgkJCSR0aGlzLT5zZXRBUElTZWNyZXQoJGNvbmZpZ1snYXBpX3NlY3JldCddKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoKCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJIyBQQVlNRU5UIC8gQ0hFQ0tPVVQgCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJCglwdWJsaWMgZnVuY3Rpb24gdmFsaWRhdGVPcmRlcihNTV9PcmRlciAkb3JkZXIpCgl7CgkJJG9yZGVySXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CQkKCQkkcmVjdXJyaW5nSXRlbXMgPSBhcnJheV9maWx0ZXIoJG9yZGVySXRlbXMsY3JlYXRlX2Z1bmN0aW9uKCckaScsJ3JldHVybiAkaS0+aXNSZWN1cnJpbmcoKTsnKSk7CgkJJHRvdGFsID0gJG9yZGVyLT5nZXRUb3RhbCgpOwoJCSRpdGVtID0gcmVzZXQoJG9yZGVySXRlbXMpOwoJCQoJCS8vZG9uJ3QgYWxsb3cgZW1wdHkgb3JkZXIKCQlpZiAoZW1wdHkoJG9yZGVySXRlbXMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJDYW5ub3QgcHVyY2hhc2UgZW1wdHkgb3JkZXIuIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwkJCgkJfQoJCS8vZG9uJ3QgYWxsb3cgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyBvciBtaXggb2Ygc3ViL3NpbmdsZSBwYXltZW50CgkJaWYgKGNvdW50KCRyZWN1cnJpbmdJdGVtcyk+MSB8fCAoIWVtcHR5KCRyZWN1cnJpbmdJdGVtcykgJiYgY291bnQoJG9yZGVySXRlbXMpIT1jb3VudCgkcmVjdXJyaW5nSXRlbXMpKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSWYgYSBzdWJzY3JpcHRpb24gaXMgYmVpbmcgcHVyY2hhc2VkLCB0aGF0IG11c3QgYmUgdGhlIG9ubHkgaXRlbSBpbiB0aGUgb3JkZXIiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCS8vcmVxdWlyZSBzdXBwb3J0ZWQgY3VycmVuY2llcwoJCWlmICghaW5fYXJyYXkoJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCR0aGlzLT5zdXBwb3J0ZWRDdXJyZW5jaWVzKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkb3JkZXItPmdldEN1cnJlbmN5KCkuIiBhcyBvcmRlciBjdXJyZW5jeSBpcyB1bnN1cHBvcnRlZCBmb3IgQ29pbmJhc2UgcGF5bWVudHMuIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkvL2NvaW5iYXNlIGRvZXMgbm90IGFsbG93IG9yZGVycyBsZXNzIHRoYXQgYWJvdXQgJDAuNzUgVVNEIAoJCWlmICgkdG90YWwgPiAwICYmICR0b3RhbCA8IDAuNzUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNvaW5iYXNlIG9yZGVyIHRvdGFsIGNhbm5vdCBiZSBsZXNzIHRoYW4gJDAuNzUgVVNELiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CQoJCS8vY29pbmJhc2UgZG9lcyBub3Qgc3VwcG9ydCB0cmlhbHMKCQlpZiAoJGl0ZW0tPmdldFRyaWFsRHVyYXRpb24oKSA+IDApCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNvaW5iYXNlIGRvZXMgbm90IHN1cHBvcnQgZnJlZSBvciBwYWlkIHRyaWFscy4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCS8vY29pbmJhc2Ugb25seSBzdXBwb3J0cyBhIGZpeGVkIHNldCBvZiBiaWxsaW5nIGludGVydmFscwoJCWlmICgkaXRlbS0+aXNSZWN1cnJpbmcoKSAmJiAkdGhpcy0+Z2V0Q29pbmJhc2VJbnRlcnZhbCgkaXRlbS0+Z2V0UmViaWxsUGVyaW9kKCksICRpdGVtLT5nZXRSZWJpbGxGcmVxdWVuY3koKSk9PWZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJDb2luYmFzZSBvbmx5IHN1cHBvcnRzIGRhaWx5LCB3ZWVrbHksIGJpd2Vla2x5LCBtb250aGx5LCBxdWFydGVybHksIG9yIHllYXJseSBiaWxsaW5nIGludGVydmFscy4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQkKCQkvL2NvaW5iYXNlIGRvZXMgbm90IHN1cHBvcnQgbWF4IHJlYmlsbHMKCQlpZiAoJGl0ZW0tPmlzUmVjdXJyaW5nKCkgJiYgIWlzX251bGwoJGl0ZW0tPmdldE1heFJlYmlsbHMoKSkgJiYgJGl0ZW0tPmdldE1heFJlYmlsbHMoKSE9MCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQ29pbmJhc2UgZG9lcyBub3Qgc3VwcG9ydCBsaW1pdHMgb24gbnVtYmVyIG9mIHBheW1lbnRzLiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJLy9ubyBlcnJvcnMKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlQYXltZW50Rm9ybShNTV9PcmRlciAkb3JkZXIpCgl7CgkJJGNoZWNrb3V0VXJsID0gJHRoaXMtPmdldENvaW5iYXNlUHVyY2hhc2VVcmwoJG9yZGVyKTsKCQkkaHRtbCA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS9jb2luYmFzZV9wYXltZW50X2Zvcm0uaHRtbC5waHAiLCRjaGVja291dFVybCk7CgkJcmV0dXJuICRodG1sOwoJfQoKCS8qCgkgKiBSZXR1cm5zIGEgVVJMIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBsaW5rIHRvIGluaXRpYXRlIGEgQ29pbmJhc2UgcHVyY2hhc2UsIGllLiBhIG9uZS1jbGljay1idXkgbGluawoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIFRoZSBvcmRlciBiZWluZyB1c2VkIHRvIGdlbmVyYXRlIHRoZSBsaW5rCgkgKiBAcmV0dXJuIGJvb2xlYW58c3RyaW5nIGZhbHNlIG9uIGVycm9yLCB0aGUgcHVyY2hhc2UgbGluayAoYXMgYSBzdHJpbmcpIG9uIHN1Y2Nlc3MKCSAqLwkKCXByb3RlY3RlZCBmdW5jdGlvbiBnZXRDb2luYmFzZVB1cmNoYXNlVXJsKE1NX09yZGVyICRvcmRlcil7CgkJJGNoZWNrb3V0UmVxdWVzdCA9ICR0aGlzLT5nZXRDb2luYmFzZUNoZWNrb3V0Q29kZSgkb3JkZXIpOwoJCXJldHVybiAoIU1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGNoZWNrb3V0UmVxdWVzdCkgJiYgIWVtcHR5KCRjaGVja291dFJlcXVlc3QtPm1lc3NhZ2UpKT8gImh0dHBzOi8vY29pbmJhc2UuY29tL2NoZWNrb3V0cy8kY2hlY2tvdXRSZXF1ZXN0LT5tZXNzYWdlIiA6IGZhbHNlOwoJfQoKCS8qKgoJICogRmV0Y2hlcyBhIHVuaXF1ZSBjaGVja291dCBjb2RlICggb3IgImJ1dHRvbiBpZCIpIGZyb20gdGhlIENvaW5iYXNlIEFQSQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIGZvciB0aGUgb3JkZXIgd2hpY2ggaXMgYmVpbmcgcHVyY2hhc2VkCgkgKiBAcmV0dXJuIE1NX1NlcnZpZVBheW1lbnRSZXNwb25zZSB3aXRoIG1lc3NhZ2UgY29udGFpbmluZyBhIHVuaXF1ZSBDb2luYmFzZSBjaGVja291dCBjb2RlIGlmIHN1Y2Nlc3NmdWwsIGZhbHNlIGlmIG5vdAoJICovCgkgcHJvdGVjdGVkIGZ1bmN0aW9uIGdldENvaW5iYXNlQ2hlY2tvdXRDb2RlKE1NX09yZGVyICRvcmRlcil7CgkgCWdsb2JhbCAkd3BkYjsKCQkkb3JkZXJJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkkcmVjdXJyaW5nSXRlbXMgPSBhcnJheV9maWx0ZXIoJG9yZGVySXRlbXMsY3JlYXRlX2Z1bmN0aW9uKCckaScsJ3JldHVybiAkaS0+aXNSZWN1cnJpbmcoKTsnKSk7CgoJCXRyeQoJCXsKCQkJJGNvaW5iYXNlID0gQ29pbmJhc2U6OndpdGhBcGlLZXkoJHRoaXMtPmdldEFQSUtleSgpLCR0aGlzLT5nZXRBUElTZWNyZXQoKSk7CgkJCSRpdGVtID0gcmVzZXQoJG9yZGVySXRlbXMpOwoJCQkkcHJvZHVjdCA9ICBuZXcgTU1fUHJvZHVjdCgkaXRlbS0+Z2V0SXRlbUlkKCkpOwoJCQkvL1NVQlNDUklQVElPTgoJCQkvL2Fzc3VtaW5nIGlmIGEgcmVjdXJyaW5nIGl0ZW0gcHJlc2VudCwgaXQgaXMgdGhlIG9ubHkgb25lCgkJCS8vMSBpdGVtIHBlciBzdWJzY3JpcHRpb24gb3JkZXIgaXMgZW5mb3JjZWQgaW4gdmFsaWRhdGVPcmRlcigpCgkJCWlmICghZW1wdHkoJHJlY3VycmluZ0l0ZW1zKSkKCQkJewoJCQkJJHJlcXVlc3QgPSAkY29pbmJhc2UtPmNyZWF0ZUJ1dHRvbigKCQkJCQkkcHJvZHVjdC0+Z2V0TmFtZSgpLAoJCQkJCSRvcmRlci0+Z2V0VG90YWwoKSwKCQkJCQkkb3JkZXItPmdldEN1cnJlbmN5KCksCgkJCQkJJG9yZGVyLT5nZXRJZCgpLiJ8Ii53cF9oYXNoKCJjb2luYmFzZV9pcG5fYXV0aF9vcmRlcl8iLiRvcmRlci0+Z2V0SWQoKSksCgkJCQkJYXJyYXkoCgkJCQkJCSdzdHlsZScgPT4gJ25vbmUnLAoJCQkJCQkndHlwZScgPT4gJ3N1YnNjcmlwdGlvbicsCgkJCQkJCSdyZXBlYXQnID0+ICR0aGlzLT5nZXRDb2luYmFzZUludGVydmFsKCRpdGVtLT5nZXRSZWJpbGxQZXJpb2QoKSwkaXRlbS0+Z2V0UmViaWxsRnJlcXVlbmN5KCkpLAoJCQkJCQknc3VjY2Vzc191cmwnID0+IGhvbWVfdXJsKCkuIj9tbV9jb2luYmFzZV9yZWRpcmVjdD0iLnVybGVuY29kZShNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpnZXRDb25maXJtYXRpb25VcmxGb3JPcmRlcigkb3JkZXIpKSwKCQkJCQkJJ2NhbmNlbF91cmwnID0+IGhvbWVfdXJsKCkuIj9tbV9jb2luYmFzZV9yZWRpcmVjdD0iLnVybGVuY29kZShtbV9wdXJjaGFzZV9saW5rKGFycmF5KCJwcm9kdWN0SWQiPT4kcHJvZHVjdC0+Z2V0SWQoKSkpKSwKCQkJCQkJJ2F1dG9fcmVkaXJlY3QnID0+IHRydWUKCQkJCQkpCgkJCQkpOwoJCQl9CgkJCS8vT05FLVRJTUUgUEFZTUVOVCAvIEJVTkRMRQoJCQkvL211bHRpcGxlIGl0ZW1zIGFyZSBhbGxvd2VkIGhlcmUKCQkJZWxzZXsKCQkJCSRyZXF1ZXN0ID0gJGNvaW5iYXNlLT5jcmVhdGVCdXR0b24oCgkJCQkJKAoJCQkJCShjb3VudCgkb3JkZXJJdGVtcyk+MSkpPyAiT3JkZXIgbm8uICIuJG9yZGVyLT5nZXRPcmRlck51bWJlcigpIDogJHByb2R1Y3QtPmdldE5hbWUoKSwKCQkJCQkkb3JkZXItPmdldFRvdGFsKCksCgkJCQkJJG9yZGVyLT5nZXRDdXJyZW5jeSgpLAoJCQkJCSRvcmRlci0+Z2V0SWQoKS4ifCIud3BfaGFzaCgiY29pbmJhc2VfaXBuX2F1dGhfb3JkZXJfIi4kb3JkZXItPmdldElkKCkpLAoJCQkJCWFycmF5KAoJCQkJCQknc3R5bGUnID0+ICdub25lJywKCQkJCQkJJ3R5cGUnID0+ICdidXlfbm93JywKCQkJCQkJJ3N1Y2Nlc3NfdXJsJyA9PiBob21lX3VybCgpLiI/bW1fY29pbmJhc2VfcmVkaXJlY3Q9Ii51cmxlbmNvZGUoTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6Z2V0Q29uZmlybWF0aW9uVXJsRm9yT3JkZXIoJG9yZGVyKSksCgkJCQkJCSdjYW5jZWxfdXJsJyA9PiBob21lX3VybCgpLiI/bW1fY29pbmJhc2VfcmVkaXJlY3Q9Ii51cmxlbmNvZGUobW1fcHVyY2hhc2VfbGluayhhcnJheSgicHJvZHVjdElkIj0+JHByb2R1Y3QtPmdldElkKCkpKSksCgkJCQkJCSdhdXRvX3JlZGlyZWN0JyA9PiB0cnVlCgkJCQkJKQoJCQkJKTsKCQkJfQoJCQlpZiAoIWlzc2V0KCRyZXF1ZXN0LT5idXR0b24tPmNvZGUpKQoJCQl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJObyBjaGVja291dCBidXR0b24gaWQgcmV0dXJuZWQiKTsKCQkJfQoJCQkkYnV0dG9uSWQgPSAkcmVxdWVzdC0+YnV0dG9uLT5jb2RlOwoJCX0KCQljYXRjaChFeGNlcHRpb24gJGUpCgkJewoJCQkkZiA9IGZvcGVuKEFCU1BBVEguJ2NvaW5iYXNlLmxvZycsJ2ErJyk7CgkJCWZ3cml0ZSgkZixkYXRlKCdtLmQuWSBoOmk6cycpLiJcblx0Ii5nZXRfY2xhc3MoJGUpLiI6ICIucHJpbnRfcigkZS0+Z2V0TWVzc2FnZSgpLHRydWUpLiJcbiIpOwoJCQlmY2xvc2UoJGYpOwoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNvaW5iYXNlIEFQSSBlcnJvcjoiLiRlLT5nZXRNZXNzYWdlKCksTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9saW5rIHRoaXMgQ29pbmJhc2UgYnV0dG9uIHRvIHRoaXMgTU0gb3JkZXIgc28gd2UgY2FuIGFzc29jaWF0ZSBsYXRlciBJUE4ncyB3aXRoIGFuIG9yZGVyCgkJJGJ1dHRvbk9yZGVyTGlua0RhdGEgPSBhcnJheSgKCQkJImJ1dHRvbl9pZCIgPT4gJGJ1dHRvbklkLAoJCQkib3JkZXJfaWQiID0+ICRvcmRlci0+Z2V0SWQoKQoJCSk7CgkJJGJ1dHRvbk9yZGVyTGluayA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQ09JTkJBU0VfQlVUVE9OX0xJTktTLiIgV0hFUkUgb3JkZXJfaWQ9JWQiLCRvcmRlci0+Z2V0SWQoKSkpOwoJCWlmIChpc19udWxsKCRidXR0b25PcmRlckxpbmspKQoJCXsKCQkJJHdwZGItPmluc2VydChNTV9UQUJMRV9DT0lOQkFTRV9CVVRUT05fTElOS1MsJGJ1dHRvbk9yZGVyTGlua0RhdGEpOwoJCX0KCQllbHNlCgkJewoJCQkkd3BkYi0+dXBkYXRlKE1NX1RBQkxFX0NPSU5CQVNFX0JVVFRPTl9MSU5LUywkYnV0dG9uT3JkZXJMaW5rRGF0YSxhcnJheSgnb3JkZXJfaWQnPT4kb3JkZXItPmdldElkKCkpKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRidXR0b25JZCk7CgkgfQoKCgkvKioKCSAqIFRha2VzIE1lbWJlck1vdXNlIHVuaXRzIGZvciByZWN1cnJpbmcgaW50ZXJ2YWxzIGFuZCBjb252ZXJ0cyB0byBDb2luYmFzZSB1bml0cy4KCSAqIENvaW5iYXNlIHRha2VzIGRhaWx5LCB3ZWVrbHksIGV2ZXJ5X3R3b193ZWVrcywgbW9udGhseSwgcXVhcnRlcmx5LCBhbmQgeWVhcmx5CgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICRudW1Vbml0cwoJICogQHBhcmFtIHN0cmluZyAkdW5pdE5hbWUgCgkgKiBAcmV0dXJuIGJvb2xlYW4gZmFsc2Ugb24gaW52YWxpZCBpbnB1dCwgb3RoZXJ3aXNlIGEgc3RyaW5nIGNvbnRhaW5pbmcgdGhlIENvaW5iYXNlIGludGVydmFsIG5hbWUKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldENvaW5iYXNlSW50ZXJ2YWwoJG51bVVuaXRzLCAkdW5pdE5hbWUpCgl7CQkKCQlpZiAoJG51bVVuaXRzPT0xICYmICR1bml0TmFtZT09J2RheXMnKQoJCXsKCQkJcmV0dXJuICdkYWlseSc7CgkJfQoJCWVsc2VpZiAoKCRudW1Vbml0cz09MSAmJiAkdW5pdE5hbWU9PSd3ZWVrcycpIHx8ICgkbnVtVW5pdHM9PTcgJiYgJHVuaXROYW1lPT0nZGF5cycpKQoJCXsKCQkJcmV0dXJuICd3ZWVrbHknOwoJCX0KCQllbHNlaWYgKCgkbnVtVW5pdHM9PTIgJiYgJHVuaXROYW1lPT0nd2Vla3MnKSB8fCAoJG51bVVuaXRzPT0xNCAmJiAkdW5pdE5hbWU9PSdkYXlzJykpCgkJewoJCQlyZXR1cm4gJ2V2ZXJ5X3R3b193ZWVrcyc7CgkJfQoJCWVsc2VpZiAoJG51bVVuaXRzPT0xICYmICR1bml0TmFtZT09J21vbnRocycpCgkJewoJCQlyZXR1cm4gJ21vbnRobHknOwoJCX0KCQllbHNlaWYgKCRudW1Vbml0cz09MyAmJiAkdW5pdE5hbWU9PSdtb250aHMnKQoJCXsKCQkJcmV0dXJuICdxdWFydGVybHknOwoJCX0KCQllbHNlaWYgKCRudW1Vbml0cz09MSAmJiAkdW5pdE5hbWU9PSd5ZWFycycpCgkJewoJCQlyZXR1cm4gJ3llYXJseSc7CgkJfQoKCQlyZXR1cm4gZmFsc2U7Cgl9CQoKCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJIyBJUE4KCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkKCS8qKgoJICogUHJvY2Vzc2VzIElQTiBub3RpZmljYXRpb25zCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpwcm9jZXNzTm90aWZpY2F0aW9uKCkKCSAqIAoJICogQHBhcmFtICRyZXF1ZXN0IGFycmF5IGNvbnRhaW5pbmcgdGhlIElQTiB2YXJpYWJsZXMsIGdlbmVyYWxseSBhIGNvcHkgb2YgdGhlICRfUE9TVAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlIHByb2Nlc3NpbmcgdGhlIElQTgoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc05vdGlmaWNhdGlvbigkcmVxdWVzdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHJlcXVlc3QgPSBqc29uX2RlY29kZShmaWxlX2dldF9jb250ZW50cygncGhwOi8vaW5wdXQnKSk7CgoJCS8vaGFuZGxlIHBvc3NpYmxlIGVycm9ycyBhbmQgc2F2ZSBsb2cKCQlpZiAoIWlzc2V0KCRfUkVRVUVTVFsnaGFzaCddKSB8fCAkX1JFUVVFU1RbJ2hhc2gnXSAhPSB3cF9oYXNoKCdjb2luYmFzZV9pcG5fYXV0aCcpKQoJCXsKCQkJaWYgKCR0aGlzLT5sb2dVbmF1dGhvcml6ZWRJUE5zPT10cnVlKSAkdGhpcy0+bG9nSVBOKCRyZXF1ZXN0KTsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIGdsb2JhbCBhdXRoIGhhc2ggcmVjZWl2ZWQgZm9yIENvaW5iYXNlIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJCWlmICghaXNzZXQoJHJlcXVlc3QtPm9yZGVyLT5jdXN0b20pICYmICFpc3NldCgkcmVxdWVzdC0+cmVjdXJyaW5nX3BheW1lbnQtPmN1c3RvbSkpCgkJewoJCQlpZiAoJHRoaXMtPmxvZ1VuYXV0aG9yaXplZElQTnM9PXRydWUpICR0aGlzLT5sb2dJUE4oJHJlcXVlc3QpOwoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIk5vIG9yZGVyLXNwZWNpZmljIGF1dGggaGFzaCByZWNlaXZlZCBpbiBjdXN0b20gcGFyYW1ldGVyIHNsb3QgZm9yIENvaW5iYXNlIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJCWVsc2V7CgkJCSRjdXN0b20gPSBpc3NldCgkcmVxdWVzdC0+b3JkZXItPmN1c3RvbSk/ICRyZXF1ZXN0LT5vcmRlci0+Y3VzdG9tIDogJHJlcXVlc3QtPnJlY3VycmluZ19wYXltZW50LT5jdXN0b207CgkJCSRjdXN0b21fZGF0YSA9IGV4cGxvZGUoJ3wnLCRjdXN0b20pOwoJCQkkY3VzdG9tX2lkID0gcmVzZXQoJGN1c3RvbV9kYXRhKTsKCQkJJGN1c3RvbV9oYXNoID0gZW5kKCRjdXN0b21fZGF0YSk7CgkJCWlmKCRjdXN0b21faGFzaCAhPSB3cF9oYXNoKCJjb2luYmFzZV9pcG5fYXV0aF9vcmRlcl97JGN1c3RvbV9pZH0iKSl7CgkJCQlpZiAoJHRoaXMtPmxvZ1VuYXV0aG9yaXplZElQTnM9PXRydWUpICR0aGlzLT5sb2dJUE4oJHJlcXVlc3QpOwoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIG9yZGVyLXNwZWNpZmljIGF1dGggaGFzaCByZWNlaXZlZCBpbiBjdXN0b20gcGFyYW1ldGVyIHNsb3QgZm9yIENvaW5iYXNlIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgkJCX0KCQl9CgkJaWYgKGlzX251bGwoJHJlcXVlc3QpIHx8IGVtcHR5KCRyZXF1ZXN0KSB8fCAoIWlzc2V0KCRyZXF1ZXN0LT5vcmRlci0+aWQpICYmICFpc3NldCgkcmVxdWVzdC0+cmVjdXJyaW5nX3BheW1lbnQtPmlkKSkpCgkJewoJCQlpZiAoJHRoaXMtPmxvZ0ludmFsaWRJUE5zPT10cnVlKSAkdGhpcy0+bG9nSVBOKCRyZXF1ZXN0KTsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIG9yIGVtcHR5IEpTT04gcmVjZWl2ZWQgaW4gQ29pbmJhc2UgSVBOIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwkKCQl9CgkJaWYoICR0aGlzLT5pc0R1cGxpY2F0ZUlQTigkcmVxdWVzdCkgKQoJCXsKCQkJaWYgKCR0aGlzLT5sb2dEdXBsaWNhdGVJUE5zPT10cnVlKSAkdGhpcy0+bG9nSVBOKCRyZXF1ZXN0KTsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJEdXBsaWNhdGUgQ29pbmJhc2UgSVBOIGRldGVjdGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkaXBuSWQgPSAkdGhpcy0+bG9nSVBOKCRyZXF1ZXN0KTsKCQkKCQkvL2F0dGVtcHQgdG8gbG9vayB1cCBvcmRlciBhbmQgb3JkZXIgaXRlbSBiYXNlZCBvbiBDb2luYmFzZSBidXR0b24gaWQKCQkkYnV0dG9uSWQgPSAoaXNzZXQoJHJlcXVlc3QtPm9yZGVyLT5idXR0b24tPmlkKSk/ICRyZXF1ZXN0LT5vcmRlci0+YnV0dG9uLT5pZCA6ICRyZXF1ZXN0LT5yZWN1cnJpbmdfcGF5bWVudC0+YnV0dG9uLT5pZDsKCQkkb3JkZXJJZCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1Qgb3JkZXJfaWQgRlJPTSAiLk1NX1RBQkxFX0NPSU5CQVNFX0JVVFRPTl9MSU5LUy4iIFdIRVJFIGJ1dHRvbl9pZD0lcyIsJGJ1dHRvbklkKSk7CgkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlcklkKTsKCQlpZiAoISRvcmRlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJObyBtYXRjaGluZyBvcmRlciBmb3VuZCBmb3IgQ29pbmJhc2UgSVBOIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkb3JkZXJJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkvL2dldCBpdGVtIGRhdGEgZm9yIHNpbmdsZS1pdGVtLXJlY3VycmluZyBvcmRlcnMKCQkvL3dlJ3JlIGNvdW50aW5nIG9uIHRoZSBmYWN0IHRoYXQgdmFsaWRhdGVPcmRlciBkaWRuJ3QgbGV0IGFueSBtaXhlZCByZWN1cnJpbmcvbm9uLXJlY3VycmluZyBvciBtdWx0aXBsZSByZWN1cnJpbmcgb3JkZXJzIGdldCB0aHJvdWdoCgkJJGlzU3Vic2NyaXB0aW9uUGF5bWVudCA9IGNvdW50KCRvcmRlckl0ZW1zKT09MSAmJiByZXNldCgkb3JkZXJJdGVtcyktPmlzUmVjdXJyaW5nKCk7CgkJJG9yZGVySXRlbSA9IHJlc2V0KCRvcmRlckl0ZW1zKTsKCQkkb3JkZXJJdGVtSWQgPSAkb3JkZXJJdGVtLT5nZXRJZCgpOwoKCQkvL2hhbmRsZSBzaW5nbGUgcGF5bWVudHMKCQkvLzEuIG5vbi1yZWN1cnJpbmcgcHVyY2hhc2VzCgkJLy8yLiByZWN1cnJpbmcgYml0Y29pbiB3L28gY29pbmJhc2UgYWNjb3VudAoJCS8vMy4gc2luZ2xlIHBheW1lbnQgYXMgcGFydCBvZiByZWN1cnJpbmcgcGF5bWVudAoJCWlmIChpc3NldCgkcmVxdWVzdC0+b3JkZXIpKQoJCXsKCQkJLy9oYW5kbGUgZmFpbGVkIHBheW1lbnRzCgkJCWlmICgkcmVxdWVzdC0+b3JkZXItPnN0YXR1cz09TU1fQ29pbmJhc2VTZXJ2aWNlOjokT1JERVJfU1RBVFVTX0NBTkNFTEVEKQoJCQl7CgkJCQlmb3JlYWNoICgkb3JkZXJJdGVtcyBhcyAkcmV2b2tlSXRlbSkKCQkJCXsKCQkJCQkkcmV2b2tlUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpyZXZva2VBY2Nlc3NGb3JPcmRlckl0ZW0oJHJldm9rZUl0ZW0pOwoJCQkJCWlmICgkcmV2b2tlSXRlbS0+aXNSZWN1cnJpbmcoKSkKCQkJCQl7CQkJCQkKCQkJCQkJJHJldm9rZUl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpOwoJCQkJCQkkcmV2b2tlSXRlbS0+Y29tbWl0RGF0YSgpOwoJCQkJCX0KCQkJCQkkY29pbmJhc2VSZWFzb24gPSBpc3NldCgkcmVxdWVzdC0+b3JkZXItPmNhbmNlbGxhdGlvbl9yZWFzb24pPyAkcmVxdWVzdC0+b3JkZXItPmNhbmNlbGxhdGlvbl9yZWFzb24gOiAiTm8gcmVhc29uIHByb3ZpZGVkIGJ5IENvaW5iYXNlLiI7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJDb2luYmFzZSBwYXltZW50IGZhaWxlZC4gJGNvaW5iYXNlUmVhc29uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRkFJTEVEKTsKCQkJCX0KCQkJfQoJCQkvL2hhbmRsZSBtaXNwYXltZW50cyAoY2FuIG9jY3VyIHdoZW4gcGF5aW5nIGZyb20gYSBub24tQ29pbmJhc2Ugd2FsbGV0KQoJCQlpZiAoJHJlcXVlc3QtPm9yZGVyLT5zdGF0dXM9PU1NX0NvaW5iYXNlU2VydmljZTo6JE9SREVSX1NUQVRVU19NSVNQQUlEKQoJCQl7CgkJCQkkdW5kZXJwYWlkQW1vdW50ID0gJHJlcXVlc3QtPm9yZGVyLT50b3RhbF9idGMtPmNlbnRzIC0gJHJlcXVlc3QtPm9yZGVyLT5taXNwYWlkX2J0Yy0+Y2VudHM7CgkJCQkkdXNlciA9ICRvcmRlci0+Z2V0Q3VzdG9tZXIoKTsKCQkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpnZXREZWZhdWx0KCk7CgkJCQkkY29udGV4dCA9IG5ldyBNTV9Db250ZXh0KCR1c2VyLCAkZW1wbG95ZWUsICRvcmRlcik7CQkKCQkJCS8vaWYgaXQgd2FzIG92ZXJwYWlkLCBsZXQgYWRtaW4ga25vdyB0cmVhdCBpdCBhcyBzdWNjZXNzZnVsCgkJCQlpZiAoJHVuZGVycGFpZEFtb3VudCA8PSAwKQoJCQkJewkJCQkKCSAJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJCQkkZW1haWwtPnNldFN1YmplY3QoIkNvaW5iYXNlIG92ZXJwYXltZW50IG5vdGZpY2F0aW9uIik7CgkJCQkJJGVtYWlsLT5zZXRCb2R5KCJUaGlzIG5vdGlmaWNhdGlvbiBpcyB0byBhbGVydCB5b3UgdGhhdCB0aGUgdXNlciAiLiRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0VXNlcm5hbWUoKS4iIG92ZXJwYWlkIGZvciBvcmRlciBuby4gIi4kb3JkZXItPmdldE9yZGVyTnVtYmVyKCkuIiBieSAiLigkdW5kZXJwYWlkQW1vdW50Ly0xMDAwMDAwMDApLiIgQlRDLiBJZiB5b3Ugd2lzaCB0byByZWZ1bmQgdGhlaXIgb3ZlcnBheW1lbnQsIHlvdSdsbCBuZWVkIHRvIGNvbnRhY3QgdGhlbSBmb3IgdGhlaXIgYml0Y29pbiB3YWxsZXQgYWRkcmVzcy4iKTsKCQkJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJCSRlbWFpbC0+c2V0RnJvbU5hbWUoJGVtcGxveWVlLT5nZXREaXNwbGF5TmFtZSgpKTsKCQkJCQkkZW1haWwtPnNldEZyb21BZGRyZXNzKCRlbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCQkJJGVtYWlsLT5zZW5kKCk7CgkJCQkJLy8gc2V0IHN0YXR1cyB0byBjb21wbGV0ZWQgc28gaXQgd2lsbCBmYWxsIHRocm91Z2ggYW5kIGdyYW50IGFjY2VzcwoJCQkJCSRyZXF1ZXN0LT5vcmRlci0+c3RhdHVzID0gTU1fQ29pbmJhc2VTZXJ2aWNlOjokT1JERVJfU1RBVFVTX0NPTVBMRVRFRDsKCQkJCX0KCQkJCS8vaWYgaXQgd2FzIHVuZGVycGFpZCwgbGV0IHVzZXIgYW5kIGFkbWluIGtub3cgYW5kIGRvbid0IGdpdmUgYWNjZXNzCgkJCQllbHNlCgkJCQl7CQkKCQkJCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkJCQkkZW1haWwtPnNldENvbnRleHQoJGNvbnRleHQpOwoJCQkJCSRlbWFpbC0+c2V0U3ViamVjdCgiV2UgZGlkbid0IHJlY2VpdmUgZW5vdWdoIHBheW1lbnQgZm9yIHlvdXIgW01NX09yZGVyX0RhdGEgbmFtZT0ncHJvZHVjdE5hbWUnXSBwdXJjaGFzZSIpOwoJCQkJCSRlbWFpbC0+c2V0Qm9keSgiSGVsbG8gW01NX01lbWJlcl9EYXRhIG5hbWU9J2ZpcnN0TmFtZSddLFxuXG4gU29ycnkgLSB0aGUgYW1vdW50IHlvdSBzZW50IHZpYSBiaXRjb2luIHdhcyAiLigkdW5kZXJwYWlkQW1vdW50LzEwMDAwMDAwMCkuIiBCVEMgbGVzcyB0aGFuIHRoZSBvcmRlciB0b3RhbC4gWW91J2xsIG5lZWQgdG8gY2hlY2sgb3V0IGFnYWluIGFuZCBtYWtlIGZ1bGwgcGF5bWVudCBpbiBvcmRlciB0byByZWNlaXZlIG1lbWJlcnNoaXAgYWNjZXNzICh5b3UgY2FuIGdldCBhIHJlZnVuZCBvbiB0aGUgIi4oJHJlcXVlc3QtPm9yZGVyLT5taXNwYWlkX2J0Yy0+Y2VudHMvMTAwMDAwMDAwKS4iIEJUQyB5b3UgYWxyZWFkeSBwYWlkIGJ5IHJlcGx5aW5nIHdpdGggdGhlIGJpdGNvaW4gd2FsbGV0IGFkZHJlc3MgeW91J2QgbGlrZSB0aGUgcmVmdW5kIHNlbnQgdG8pLiBcblxuIFRoYW5rIHlvdSFcbiBbTU1fRW1wbG95ZWVfRGF0YSBuYW1lPSdkaXNwbGF5TmFtZSddIik7CgkJCQkJJGVtYWlsLT5zZXRUb05hbWUoJHVzZXItPmdldEZpcnN0TmFtZSgpKTsKCQkJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkdXNlci0+Z2V0RW1haWwoKSk7CgkJCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCQkkZW1haWwtPnNlbmQoKTsKCQkJCQkKCSAJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJCQkkZW1haWwtPnNldFN1YmplY3QoIkNvaW5iYXNlIHVuZGVycGF5bWVudCBub3RmaWNhdGlvbiIpOwoJCQkJCSRlbWFpbC0+c2V0Qm9keSgiVGhpcyBub3RpZmljYXRpb24gaXMgdG8gYWxlcnQgeW91IHRoYXQgdGhlIHVzZXIgIi4kb3JkZXItPmdldEN1c3RvbWVyKCktPmdldFVzZXJuYW1lKCkuIiB1bmRlcnBhaWQgZm9yIG9yZGVyIG5vLiAiLiRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKS4iIGJ5ICIuKCR1bmRlcnBhaWRBbW91bnQvMTAwMDAwMDAwKS4iIEJUQy4gVGhleSB3ZXJlIG5vdCBncmFudGVkIGFjY2VzcyBhbmQgaGF2ZSBiZWVuIG5vdGlmaWVkIHRoYXQgdGhleSBuZWVkIHRvIHJlc2VuZCBwYXltZW50IGluIGZ1bGwgYW5kIHNlbmQgeW91IHRoZWlyIGJpdGNvaW4gd2FsbGV0IGFkZHJlc3MgaWYgdGhleSB3YW50IHRvIHJlY2VpdmUgYSByZWZ1bmQgb24gdGhlICIuKCRyZXF1ZXN0LT5vcmRlci0+bWlzcGFpZF9idGMtPmNlbnRzLzEwMDAwMDAwMCkuIiBCVEMgdGhleSBhbHJlYWR5IHBhaWQuIik7CgkJCQkJJGVtYWlsLT5zZXRUb0FkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCQkkZW1haWwtPnNldEZyb21OYW1lKCRlbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJCQkJJGVtYWlsLT5zZXRGcm9tQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJCSRlbWFpbC0+c2VuZCgpOwoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQ29pbmJhc2UgcGF5bWVudCByZWNlaXZlZCB3YXMgbGVzcyB0aGFuIG9yZGVyIHRvdGFsLiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEZBSUxFRCk7CgkJCQl9CgkJCX0KCQkJLy9oYW5kbGUgZXhwaXJlZCBwYXltZW50cyAoY2FuIG9jY3VyIHdoZW4gcGF5aW5nIGZyb20gYSBub24tQ29pbmJhc2Ugd2FsbGV0KQoJCQlpZiAoJHJlcXVlc3QtPm9yZGVyLT5zdGF0dXM9PU1NX0NvaW5iYXNlU2VydmljZTo6JE9SREVSX1NUQVRVU19FWFBJUkVEKQoJCQl7CgkJCQkkdW5kZXJwYWlkQW1vdW50ID0gJHJlcXVlc3QtPm9yZGVyLT50b3RhbF9idGMtPmNlbnRzIC0gJHJlcXVlc3QtPm9yZGVyLT5taXNwYWlkX2J0Yy0+Y2VudHM7CgkJCQkkdXNlciA9ICRvcmRlci0+Z2V0Q3VzdG9tZXIoKTsKCQkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpnZXREZWZhdWx0KCk7CgkJCQkkY29udGV4dCA9IG5ldyBNTV9Db250ZXh0KCR1c2VyLCAkZW1wbG95ZWUsICRvcmRlcik7CQkKCQkJCS8vaWYgaXQgd2FzIHBhaWQgY29ycmVjdGx5LCBsZXQgYWRtaW4ga25vdyBhbmQgdHJlYXQgaXQgYXMgc3VjY2Vzc2Z1bAoJCQkJaWYgKCR1bmRlcnBhaWRBbW91bnQgPD0gMCkKCQkJCXsJCQkJCgkJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJCQkkZW1haWwtPnNldFN1YmplY3QoIkNvaW5iYXNlIG92ZXJwYXltZW50IG5vdGZpY2F0aW9uIik7CgkJCQkJJGVtYWlsLT5zZXRCb2R5KCJUaGlzIG5vdGlmaWNhdGlvbiBpcyB0byBhbGVydCB5b3UgdGhhdCB0aGUgdXNlciAiLiRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0VXNlcm5hbWUoKS4iIHNlbnQgYSBiaXRjb2luIHBheW1lbnQgZm9yIG9yZGVyIG5vLiAiLiRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKS4iIHdoaWNoIHdhcyBub3QgY29uZmlybWVkIHVudGlsIGFmdGVyIHRoZSBDb2luYmFzZSB0cmFuc2FjdGlvbiBoYWQgZXhwaXJlZC4gVGhlaXIgcGF5bWVudCBhcHBlYXJlZCB0byBiZSBpbiB0aGUgY29ycmVjdCBhbW91bnQgYW5kIHN1Y2Nlc3NmdWwgdGhvdWdoLCBzbyB0aGV5IGhhdmUgYmVlbiBncmFudGVkIGFjY2Vzcy4gWW91IG1heSB3aXNoIHRvIHZlcmlmeSB0aGF0IHRoZSBiaXRjb2luIGRlcG9zaXQgd2FzIGluZGVlZCByZWNlaXZlZCBhcyBleHBlY3RlZC4iKTsKCQkJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJCSRlbWFpbC0+c2V0RnJvbU5hbWUoJGVtcGxveWVlLT5nZXREaXNwbGF5TmFtZSgpKTsKCQkJCQkkZW1haWwtPnNldEZyb21BZGRyZXNzKCRlbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCQkJJGVtYWlsLT5zZW5kKCk7CgkJCQkJLy8gc2V0IHN0YXR1cyB0byBjb21wbGV0ZWQgc28gaXQgd2lsbCBmYWxsIHRocm91Z2ggYW5kIGdyYW50IGFjY2VzcwoJCQkJCSRyZXF1ZXN0LT5vcmRlci0+c3RhdHVzID0gTU1fQ29pbmJhc2VTZXJ2aWNlOjokT1JERVJfU1RBVFVTX0NPTVBMRVRFRDsKCQkJCX0KCQkJCS8vaWYgaXQgd2FzIHVuZGVycGFpZCwgbGV0IHVzZXIgYW5kIGFkbWluIGtub3cgYW5kIGRvbid0IGdpdmUgYWNjZXNzCgkJCQllbHNlCgkJCQl7CQkKCQkJCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkJCQkkZW1haWwtPnNldENvbnRleHQoJGNvbnRleHQpOwoJCQkJCSRlbWFpbC0+c2V0U3ViamVjdCgiV2UgZGlkbid0IHJlY2VpdmUgZW5vdWdoIHBheW1lbnQgZm9yIHlvdXIgW01NX09yZGVyX0RhdGEgbmFtZT0ncHJvZHVjdE5hbWUnXSBwdXJjaGFzZSIpOwoJCQkJCSRlbWFpbC0+c2V0Qm9keSgiSGVsbG8gW01NX01lbWJlcl9EYXRhIG5hbWU9J2ZpcnN0TmFtZSddLFxuXG4gU29ycnkgLSB0aGUgYW1vdW50IHlvdSBzZW50IHZpYSBiaXRjb2luIHdhcyAiLigkdW5kZXJwYWlkQW1vdW50LzEwMDAwMDAwMCkuIiBCVEMgbGVzcyB0aGFuIHRoZSBvcmRlciB0b3RhbC4gWW91J2xsIG5lZWQgdG8gY2hlY2sgb3V0IGFnYWluIGFuZCBtYWtlIGZ1bGwgcGF5bWVudCBpbiBvcmRlciB0byByZWNlaXZlIG1lbWJlcnNoaXAgYWNjZXNzICh5b3UgY2FuIGdldCBhIHJlZnVuZCBvbiB0aGUgIi4oJHJlcXVlc3QtPm9yZGVyLT5taXNwYWlkX2J0Yy0+Y2VudHMvMTAwMDAwMDAwKS4iIEJUQyB5b3UgYWxyZWFkeSBwYWlkIGJ5IHJlcGx5aW5nIHdpdGggdGhlIGJpdGNvaW4gd2FsbGV0IGFkZHJlc3MgeW91J2QgbGlrZSB0aGUgcmVmdW5kIHNlbnQgdG8pLiBcblxuIFRoYW5rIHlvdSFcbiBbTU1fRW1wbG95ZWVfRGF0YSBuYW1lPSdkaXNwbGF5TmFtZSddIik7CgkJCQkJJGVtYWlsLT5zZXRUb05hbWUoJHVzZXItPmdldEZpcnN0TmFtZSgpKTsKCQkJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkdXNlci0+Z2V0RW1haWwoKSk7CgkJCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCQkkZW1haWwtPnNlbmQoKTsKCQkJCQkKCSAJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkJJGVtYWlsLT5zZXRTdWJqZWN0KCJDb2luYmFzZSB1bmRlcnBheW1lbnQgbm90ZmljYXRpb24iKTsKCQkJCQkkZW1haWwtPnNldEJvZHkoIlRoaXMgbm90aWZpY2F0aW9uIGlzIHRvIGFsZXJ0IHlvdSB0aGF0IHRoZSB1c2VyICIuJG9yZGVyLT5nZXRDdXN0b21lcigpLT5nZXRVc2VybmFtZSgpLiIgdW5kZXJwYWlkIGZvciBvcmRlciBuby4gIi4kb3JkZXItPmdldE9yZGVyTnVtYmVyKCkuIiBieSAiLigkdW5kZXJwYWlkQW1vdW50LzEwMDAwMDAwMCkuIiBCVEMuIFRoZXkgd2VyZSBub3QgZ3JhbnRlZCBhY2Nlc3MgYW5kIGhhdmUgYmVlbiBub3RpZmllZCB0aGF0IHRoZXkgbmVlZCB0byByZXNlbmQgcGF5bWVudCBpbiBmdWxsIGFuZCBzZW5kIHlvdSB0aGVpciBiaXRjb2luIHdhbGxldCBhZGRyZXNzIGlmIHRoZXkgd2FudCB0byByZWNlaXZlIGEgcmVmdW5kIG9uIHRoZSAiLigkcmVxdWVzdC0+b3JkZXItPm1pc3BhaWRfYnRjLT5jZW50cy8xMDAwMDAwMDApLiIgQlRDIHRoZXkgYWxyZWFkeSBwYWlkLiIpOwoJCQkJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCRlbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCQkkZW1haWwtPnNlbmQoKTsKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNvaW5iYXNlIHBheW1lbnQgcmVjZWl2ZWQgd2FzIGxlc3MgdGhhbiBvcmRlciB0b3RhbC4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRGQUlMRUQpOwoJCQkJfQoJCQl9CgkJCS8vaGFuZGxlIHN1Y2Nlc2Z1bCBwYXltZW50cwoJCQlpZiAoJHJlcXVlc3QtPm9yZGVyLT5zdGF0dXM9PU1NX0NvaW5iYXNlU2VydmljZTo6JE9SREVSX1NUQVRVU19DT01QTEVURUQpCgkJCXsKCQkJCSRudW1iZXJPZkJpbGxpbmdzID0gY291bnQoJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQ09JTkJBU0VfSVBOX0xPRy4iIFdIRVJFIGlwbl90eXBlPSdvcmRlcicgQU5EIGJ1dHRvbl9pZD0lcyIsJHJlcXVlc3QtPm9yZGVyLT5idXR0b24tPmlkKSkpOwoJCQkJCgkJCQkvL2hhbmRsZSBhY2Nlc3MgZm9yIHN1YnNjcmlwdGlvbiBwYXltZW50cwoJCQkJaWYgKCRpc1N1YnNjcmlwdGlvblBheW1lbnQpCgkJCQl7CgkJCQkJaWYgKCRudW1iZXJPZkJpbGxpbmdzIDw9IDEgfHwgJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgIT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORykKCQkJCQl7CgkJCQkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKTsKCQkJCQkJJG9yZGVySXRlbS0+Y29tbWl0RGF0YSgpOwoJCQkJCQkkYWNjZXNzUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXIoJG9yZGVyKTsKCQkJCQl9CgkJCQl9CgkJCQkvL2hhbmRsZSBhY2Nlc3MgZm9yIG5vbi1zdWJzY3JpcHRpb24gcGF5bWVudHMgKGUuZy4gYnVuZGxlcykKCQkJCWVsc2V7CgkJCQkJJGFjY2Vzc1Jlc3BvbnNlID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQWNjZXNzRnJvbU9yZGVyKCRvcmRlcik7CgkJCQl9CgkJCQkvL2xvZyB0cmFuc2FjdGlvbgoJCQkJJHRyYW5zYWN0aW9uID0gYXJyYXkoCgkJCQkJIml0ZW1faWQiID0+ICggY291bnQoJG9yZGVySXRlbXMpPT0xPyAkb3JkZXJJdGVtSWQgOiBudWxsICksCgkJCQkJInR5cGUiID0+ICggJGlzU3Vic2NyaXB0aW9uUGF5bWVudD8gTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UIDogTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQgKSwKCQkJCQkiZGVzY3JpcHRpb24iID0+ICgkbnVtYmVyT2ZCaWxsaW5ncz4xPyJSZWN1cnJpbmcgcGF5bWVudCI6IlBheW1lbnQiKSAuIiBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9IiwKCQkJCQkiYW1vdW50IiA9PiAkcmVxdWVzdC0+b3JkZXItPnRvdGFsX25hdGl2ZS0+Y2VudHMvMTAwLAoJCQkJCSJpc1JlYmlsbCIgPT4gKCAkbnVtYmVyT2ZCaWxsaW5ncyA+IDEgKQoJCQkJKTsKCQkJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkdHJhbnNhY3Rpb25bJ2l0ZW1faWQnXSwgJHRyYW5zYWN0aW9uWydhbW91bnQnXSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkdHJhbnNhY3Rpb25bJ2Rlc2NyaXB0aW9uJ10sICR0cmFuc2FjdGlvblsndHlwZSddLCAkdHJhbnNhY3Rpb25bJ2lzUmViaWxsJ10sICR0aGlzLT5nZXRJZCgpLCAkaXBuSWQpOwoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlLT5tZXNzYWdlLCgkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpP01NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRTVUNDRVNTOk1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJLy9uZWl0aGVyIGNvbXBsZXRlZCBvciBjYW5jZWxlZCBzdGF0dXMgLSB0aGlzIHNob3VsZG4ndCBldmVyIGhhcHBlbgoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVucmVjb2duaXplZCBDb2luYmFzZSBvcmRlciBzdGF0dXMiLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwkJCQoJCX0KCQkKCQkvL2hhbmRsZSByZWN1cnJpbmcgcGF5bWVudHMKCQllbHNlaWYgKGlzc2V0KCRyZXF1ZXN0LT5yZWN1cnJpbmdfcGF5bWVudCkpCgkJewkJCQoJCQkkbWVtYmVyID0gJG9yZGVyLT5nZXRDdXN0b21lcigpOwoJCQlzd2l0Y2ggKCRyZXF1ZXN0LT5yZWN1cnJpbmdfcGF5bWVudC0+c3RhdHVzKQoJCQl7CgkJCQljYXNlIE1NX0NvaW5iYXNlU2VydmljZTo6JFJFQ1VSUklOR19QQVlNRU5UX1NUQVRVU19BQ1RJVkU6CgkJCQkJLy9jb3VsZCBiZSBuZXcsIG9yIHBhdXNlZCBhbmQgdGhlbiBjb250aW51ZWQsIHNvIGluc2VydCBpZ25vcmUgbWFrZXMgc3VyZSB3ZSB3b24ndCBnZXQgZHVwbGljYXRlIGxpbmtzCgkJCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJJTlNFUlQgSUdOT1JFIElOVE8gIi5NTV9UQUJMRV9DT0lOQkFTRV9TVUJTQ1JfTElOS1MuIiAocmVjdXJyaW5nX3BheW1lbnRfaWQsb3JkZXJfaXRlbV9pZCkgVkFMVUVTKCVzLCVkKSIsJHJlcXVlc3QtPnJlY3VycmluZ19wYXltZW50LT5pZCwkb3JkZXJJdGVtSWQpKTsKCQkJCQkkbWVtYmVyLT5jb21taXREYXRhKCk7CgkJCQkJLy93ZSBkb24ndCBoYXZlIHRvIGhhbmRsZSBvcmRlciBhY2Nlc3MgaGVyZSBiZWNhdXNlIHRoYXQgd2lsbCBiZSBoYW5kbGVkIGFib3ZlIGJ5IHRoZSBvcmRlciBpcG4gYWNjb21wYW55aW5nIHRoaXMgCgkJCQkJYnJlYWs7CgkJCQljYXNlIE1NX0NvaW5iYXNlU2VydmljZTo6JFJFQ1VSUklOR19QQVlNRU5UX1NUQVRVU19QQVVTRUQ6CgkJCQkJLy9yZXZva2Ugb3JkZXIgYWNjZXNzIGhlcmUgc2luY2Ugbm8gb3JkZXIgaXBuIHdpbGwgYmUgY29taW5nIHRvIHNheSBubyBwYXltZW50IHdhcyBtYWRlLAoJCQkJCS8vYW5kIG1tIHdpbGwgc3RpbGwgYWxsb3cgYWNjZXNzIGZvciBwYXVzZWQgYWNjb3VudAoJCQkJCSRyZXZva2VSZXNwb25zZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgTU1fQ29pbmJhc2VTZXJ2aWNlOjokUkVDVVJSSU5HX1BBWU1FTlRfU1RBVFVTX0NBTkNFTEVEOgoJCQkJCSRyZXZva2VSZXNwb25zZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQkJCQlicmVhazsKCQkJfQoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQl9CQkKCQkKCQkvLyBuZWl0aGVyIG9yZGVyIG9yIHJlY3VycmluZyBwYXltZW50IC0gdGhpcyBzaG91bGRuJ3QgZXZlciBoYXBwZW4KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVucmVjb2duaXplZCBDb2luYmFzZSBJUE4gdHlwZSIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJfQoJCgkKCS8qKgoJICogTG9ncyBhbiBJUE4gcmVxdWVzdC4gVGhpcyBpcyBuZWNlc3NhcnkgZm9yIGR1cGxpY2F0ZSBkZXRlY3Rpb24sIHBvdGVudGlhbGx5IGZvciB0cm91Ymxlc2hvb3RpbmcsCgkgKiBhbmQgZm9yIGRldGVjdGluZyAjIG9mIHRpbWVzIGEgc3Vic2NyaXB0aW9uIGhhcyBiZWVuIGJpbGxlZAoJICogCgkgKiBAcGFyYW0gb2JqZWN0ICRyZXF1ZXN0IFRoaXMgaXMgYW4gb2JqZWN0IGRlY29kZWQgZnJvbSB0aGUgSlNPTiBpbiB0aGUgcmF3IElQTiBQT1NUIGRhdGEgKG51bGwgaWYgaW52YWxpZCBKU09OKSAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgaWQgb2YgdGhlIHJvdyBpbiB0aGUgSVBOIGxvZyB0YWJsZSBpZiBzdWNjZXNzZnVsLCBvciBhbiBlcnJvciBtZXNzYWdlIGlmIGZhaWxlZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9nSVBOKCRyZXF1ZXN0KSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJaWYgKGlzc2V0KCRyZXF1ZXN0LT5vcmRlcikpCgkJewoJCQkkaW5zZXJ0RGF0YSA9IGFycmF5KAoJCQkJImJ1dHRvbl9pZCIgPT4gJHJlcXVlc3QtPm9yZGVyLT5idXR0b24tPmlkLAoJCQkJImJ1dHRvbl90eXBlIiA9PiAkcmVxdWVzdC0+b3JkZXItPmJ1dHRvbi0+dHlwZSwKCQkJCSJpcG5fdHJhbnNhY3Rpb25faWQiID0+ICRyZXF1ZXN0LT5vcmRlci0+aWQsCgkJCQkiaXBuX3R5cGUiID0+ICJvcmRlciIsCgkJCQkiaXBuX2NvbnRlbnQiID0+IGZpbGVfZ2V0X2NvbnRlbnRzKCJwaHA6Ly9pbnB1dCIpLAoJCQkJImlwbl9zdGF0dXMiID0+ICRyZXF1ZXN0LT5vcmRlci0+c3RhdHVzLAoJCQkJInJlY2VpdmVkIiA9PiBnbWRhdGUoJ1ktbS1kIEg6aTpzJykKCQkJKTsKCQl9CgkJZWxzZWlmIChpc3NldCgkcmVxdWVzdC0+cmVjdXJyaW5nX3BheW1lbnQpKQoJCXsKCQkJJGluc2VydERhdGEgPSBhcnJheSgKCQkJCSJidXR0b25faWQiID0+ICRyZXF1ZXN0LT5yZWN1cnJpbmdfcGF5bWVudC0+YnV0dG9uLT5pZCwKCQkJCSJidXR0b25fdHlwZSIgPT4gJHJlcXVlc3QtPnJlY3VycmluZ19wYXltZW50LT5idXR0b24tPnR5cGUsCgkJCQkiaXBuX3RyYW5zYWN0aW9uX2lkIiA9PiAkcmVxdWVzdC0+cmVjdXJyaW5nX3BheW1lbnQtPmlkLAoJCQkJImlwbl90eXBlIiA9PiAicmVjdXJyaW5nX3BheW1lbnQiLAoJCQkJImlwbl9jb250ZW50IiA9PiBmaWxlX2dldF9jb250ZW50cygicGhwOi8vaW5wdXQiKSwKCQkJCSJpcG5fc3RhdHVzIiA9PiAkcmVxdWVzdC0+cmVjdXJyaW5nX3BheW1lbnQtPnN0YXR1cywKCQkJCSJyZWNlaXZlZCIgPT4gZ21kYXRlKCdZLW0tZCBIOmk6cycpCgkJCSk7CgkJfQoJCWVsc2UKCQl7CgkJCSRpbnNlcnREYXRhID0gYXJyYXkoCgkJCQkiaXBuX2NvbnRlbnQiID0+IGZpbGVfZ2V0X2NvbnRlbnRzKCJwaHA6Ly9pbnB1dCIpLAoJCQkJInJlY2VpdmVkIiA9PiBnbWRhdGUoJ1ktbS1kIEg6aTpzJyksCgkJCQkiZXJyb3IiID0+ICcnCgkJCSk7CgkJfQoKCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0NPSU5CQVNFX0lQTl9MT0csJGluc2VydERhdGEpOwoJCXJldHVybiAkd3BkYi0+aW5zZXJ0X2lkOwoJfQoJCgkKCS8qKgoJICogRGV0ZWN0cyB3aGV0aGVyIHRoaXMgSVBOIGhhcyBiZWVuIHJlY2VpdmVkIG9yIG5vdAoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgVGhlIElQTiByZXF1ZXN0LgoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhpcyBpcyBhIGR1cGxpY2F0ZSwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBpc0R1cGxpY2F0ZUlQTigkcmVxdWVzdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHJlcXVlc3RJZCA9IChpc3NldCgkcmVxdWVzdC0+b3JkZXItPmlkKSk/ICRyZXF1ZXN0LT5vcmRlci0+aWQgOiAkcmVxdWVzdC0+cmVjdXJyaW5nX3BheW1lbnQtPmlkOwoJCS8vdHJ5IHRvIGFjcXVpcmUgYW4gaXBuLXNwZWNpZmljIGxvY2s7IGlmIG5vIGxvY2sgdGhlbiBhbm90aGVyIGlwbiBmb3IgdGhpcyBpdGVtIGlzIGFscmVhZHkgdGFraW5nIHBsYWNlCgkJJGxvY2tOYW1lID0gIm1tX2NvaW5iYXNlX2lwbl9sb2NrLSIubWQ1KCJ7JHJlcXVlc3RJZH0iKTsJCQoJCSRsb2NrQWNxdWlyZWQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgiU0VMRUNUIENPQUxFU0NFKEdFVF9MT0NLKCVzLDApLDApIiwkbG9ja05hbWUpKTsKCQlpZiAoJGxvY2tBY3F1aXJlZCA9PSAiMSIpCgkJewoJCQkkaXNEdXBsaWNhdGUgPSAhaXNfbnVsbCggJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DT0lOQkFTRV9JUE5fTE9HLiIgV0hFUkUgaXBuX2NvbnRlbnQ9JXMiLGZpbGVfZ2V0X2NvbnRlbnRzKCdwaHA6Ly9pbnB1dCcpKSkgKTsKCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgUkVMRUFTRV9MT0NLKCVzKSIsJGxvY2tOYW1lKSk7CgkJfQoJCWVsc2UKCQl7CgkJCSRpc0R1cGxpY2F0ZSA9IHRydWU7CgkJfQoJCXJldHVybiAkaXNEdXBsaWNhdGU7Cgl9CgoJIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCSMgRlJPTlRFTkQKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkKCS8qKgoJICogUmVmdW5kcyB0aGUgdHJhbnNhY3Rpb24gd2l0aCB0aGUgc3VwcGxpZWQgaWQgaWYgYXBpIGNyZWRlbnRpYWxzIGFyZSBwcmVzZW50LiBJZiBub3QsIGFuIGVycm9yIG1lc3NhZ2UgZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZQoJICogQ29pbmJhc2UgaW50ZXJmYWNlIGlzIHJldHVybmVkCgkgKgoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIGlkCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgUmVwcmVzZW50aW5nIHRoZSBzdWNjZXNzIG9yIGZhaWx1cmUgb2YgdGhlIHJlZnVuZCBvcGVyYXRpb24KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkKQoJewoJCSRlcnJvck1lc3NhZ2UgPSAiU29ycnksIGJpdGNvaW4gdHJhbnNhY3Rpb25zIGFyZSBub24tcmV2ZXJzaWJsZS4iOwoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgoKCS8qKgoJICogQ29pbmJhc2Ugc3Vic2NyaXB0aW9ucyBhcmUgbWFuYWdlZCB0aHJvdWdoIHRoZWlyIGludGVyZmFjZQoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6Y2FuY2VsU3Vic2NyaXB0aW9uKCkKCSAqIAoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtIFRoZSBvcmRlciBpdGVtIGxpbmtlZCB0byB0aGUgc3Vic2NyaXB0aW9uIHRvIGNhbmNlbAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIElmIGV4cHJlc3MgY2hlY2tvdXQgY2FuY2VsbGF0aW9uIGZhaWxzIG9yIGNhbid0IGJlIGRvbmUsIHRoaXMgd2lsbCBoYXZlIHRoZSBlcnJvciB0eXBlIHdpdGggdGhlIGVycm9yIG1lc3NhZ2UgZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZWlyIENvaW5iYXNlIGFjY291bnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNhbmNlbFN1YnNjcmlwdGlvbihNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSkKCXsKCQkkY29pbmJhc2VVcmwgPSAiaHR0cHM6Ly9jb2luYmFzZS5jb20vcmVjdXJyaW5nX3BheW1lbnRzIjsKCQkkZXJyb3JNZXNzYWdlID0gIlRvIGNhbmNlbCB0aGlzIHN1YnNjcmlwdGlvbiwgdXNlIHRoZSBDb2luYmFzZSBpbnRlcmZhY2UgYXQgeyRjb2luYmFzZVVybH0iOwoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgoJCgkvKioKCSAqIENvaW5iYXNlIHN1YnNjcmlwdGlvbnMgYXJlIG1hbmFnZWQgdGhyb3VnaCB0aGVpciBpbnRlcmZhY2UKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oKQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG9yZGVyIGl0ZW0gbGlua2VkIHRvIHRoZSBzdWJzY3JpcHRpb24gdG8gdXBkYXRlCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIChvcHRpb25hbCkgVGhlIG5ldyBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byB1cGRhdGUgdGhlIHN1YnNjcmlwdGlvbiB3aXRoCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyAob3B0aW9uYWwpIFRoZSBuZXcgYmlsbGluZyBhZGRyZXNzIHRvIHVwZGF0ZSB0aGUgc3Vic2NyaXB0aW9uIHdpdGgKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBGb3IgQ29pbmJhc2UsIHRoaXMgd2lsbCBhbHdheXMgYmUgYW4gZXJyb3IsIHdpdGggdGhlIGVycm9yIG1lc3NhZ2UgZGlyZWN0aW5nIHRoZSB1c2VyIHRvIHRoZWlyIENvaW5iYXNlIGFjY291bnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sIE1NX0NhcmRJbmZvICRjYXJkSW5mbz1udWxsLCBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzPW51bGwpCgl7CgkJJGNvaW5iYXNlVXJsID0gImh0dHBzOi8vY29pbmJhc2UuY29tL3JlY3VycmluZ19wYXltZW50cyI7CgkJJGVycm9yTWVzc2FnZSA9ICJUbyB1cGRhdGUgcGF5bWVudCBpbmZvcm1hdGlvbiwgdXNlIHRoZSBDb2luYmFzZSBpbnRlcmZhY2UgYXQgeyRjb2luYmFzZVVybH0iOwoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgoKCS8qKgoJICogUmVkaXJlY3QgQ29pbmJhc2UgcmV0dXJuIHVybHMgd2l0aG91dCB0aGUgZXh0cmEgcGFyYW1ldGVycyBDb2luYmFzZSBhZGRzIG9uIHNpbmNlIHRoZXkgdHJpZ2dlciBhIFdQX1F1ZXJ5IHdhcm5pbmcKCSAqIEluIHRoZSBmdXR1cmUgdGhpcyBjb3VsZCBiZSBtYWRlIHRvIG91dHB1dCBhIGZvcm0gd2l0aCBhIGpzIHN1Ym1pdCBzbyB0aGF0IHRoZSBwYXJhbWV0ZXJzIHdvdWxkIGJlIGF2YWlsYWJsZSB0byB0aGUgZW5kIHBhZ2Ugd2l0aG91dAoJICogaW50ZXJmZXJpbmcgd2l0aCB0aGUgV1AgR0VUIHF1ZXJ5IHN0cmluZyBtZWNoYW5pc20uCgkgKiAKCSAqIEFsc28sIGRvIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGlzIHVzZXIgaXMgcGFpZCB1cCBvbiB0aGVpciBhY2NvdW50LgoJICovCglmdW5jdGlvbiBkb0luaXRIb29rKCl7CgkJZ2xvYmFsICR3cGRiOwoJCWlmIChpc3NldCgkX0dFVFsnbW1fY29pbmJhc2VfcmVkaXJlY3QnXSkgJiYgIWVtcHR5KCRfR0VUWydtbV9jb2luYmFzZV9yZWRpcmVjdCddKSkKCQl7CgkJCWhlYWRlcigiTG9jYXRpb246ICRfR0VUW21tX2NvaW5iYXNlX3JlZGlyZWN0XVxyXG4iKTsKCQkJZXhpdDsKCQl9CgkJaWYgKGlzX3VzZXJfbG9nZ2VkX2luKCkgJiYgIWN1cnJlbnRfdXNlcl9jYW4oJ2FkbWluaXN0cmF0b3InKSAmJiAhTU1fU2Vzc2lvbjo6dmFsdWUoImNvaW5iYXNlLWNoZWNrZWQiKSkKCQl7CgkJCU1NX1Nlc3Npb246OnZhbHVlKCJjb2luYmFzZS1jaGVja2VkIix0cnVlKTsKCQkJJHVzZXIgPSBuZXcgTU1fVXNlcihnZXRfY3VycmVudF91c2VyX2lkKCkpOwoJCQkkc3Vic2NyaXB0aW9ucyA9ICR1c2VyLT5nZXRBY3RpdmVNZW1iZXJzaGlwU3Vic2NyaXB0aW9ucygpOwoJCQlmb3JlYWNoKCRzdWJzY3JpcHRpb25zIGFzICRzdWIpCgkJCXsKCQkJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRzdWJbIm9yZGVySXRlbUlkIl0pOwoJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkvLyBza2lwIHRoaXMgY2hlY2sgaWYgaXQncyBub3QgYSBjb2luYmFzZSBoYW5kbGVkIHBheW1lbnQKCQkJCWlmKCRvcmRlci0+Z2V0UGF5bWVudE1ldGhvZCgpLT5nZXRUb2tlbigpIT0nQ09JTkJBU0UnKSBjb250aW51ZTsKCQkJCS8vIGdldCBudW1iZXIgb2YgZGF5cyBzaW5jZSB0aGUgbW9zdCByZWNlbnQgcGF5bWVudCBvbiB0aGlzIHN1YnNjcmlwdGlvbgoJCQkJJHRyYW5zU1FMID0gIlNFTEVDVCBEQVRFRElGRihOT1coKSxpcG5fbG9nLnJlY2VpdmVkKSBGUk9NICIuTU1fVEFCTEVfQ09JTkJBU0VfSVBOX0xPRy4iIGFzIGlwbl9sb2cgUklHSFQgSk9JTiAiLk1NX1RBQkxFX0NPSU5CQVNFX0JVVFRPTl9MSU5LUy4iIGFzIGJ1dHRvbl9saW5rcyBvbiBpcG5fbG9nLmJ1dHRvbl9pZD1idXR0b25fbGlua3MuYnV0dG9uX2lkIFdIRVJFIGJ1dHRvbl9saW5rcy5vcmRlcl9pZD0lZCBBTkQgaXBuX2xvZy5pcG5fc3RhdHVzPSVzIE9SREVSIEJZIGlwbl9sb2cucmVjZWl2ZWQgREVTQyBMSU1JVCAxIjsKCQkJCSRkYXlzU2luY2VMYXN0UGF5bWVudCA9ICR3cGRiLT5nZXRfdmFyKCR3cGRiLT5wcmVwYXJlKCAkdHJhbnNTUUwsICRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSwgTU1fQ29pbmJhc2VTZXJ2aWNlOjokT1JERVJfU1RBVFVTX0NPTVBMRVRFRCApKTsKCQkJCS8vIGdldCB0aGUgbWF4aW11bSBudW1iZXIgb2YgZGF5cyB0aGF0IHVzZXIgc2hvdWxkIGJlIGFibGUgdG8gZ28gYmV0d2VlbiBwYXltZW50cwoJCQkJJGRheU11bHRpcGxpZXJzID0gYXJyYXkoJ2RheXMnPT4xLCd3ZWVrcyc9PjcsJ21vbnRocyc9PjMxLCd5ZWFycyc9PjM2NSk7CgkJCQkkbWF4RGF5c0JldHdlZW5QYXltZW50cyA9ICRvcmRlckl0ZW0tPmdldFJlYmlsbFBlcmlvZCgpICogJGRheU11bHRpcGxpZXJzWyRvcmRlckl0ZW0tPmdldFJlYmlsbEZyZXF1ZW5jeSgpXTsKCQkJCS8vIGlmIGl0J3MgYmVlbiBtb3JlIHRoYW4gdGhlIG1heGltdW0gIyBvZiBkYXlzIHNpbmNlIHRoZSBtb3N0IHJlY2VudCBwYXltZW50LCBjYW5jZWwgdGhlIGl0ZW0KCQkJCWlmIChpc19udWxsKCRkYXlzU2luY2VMYXN0UGF5bWVudCkgfHwgJG1heERheXNCZXR3ZWVuUGF5bWVudHMgPCAkZGF5c1NpbmNlTGFzdFBheW1lbnQpCgkJCQl7CgkJCQkJTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6cmV2b2tlQWNjZXNzRm9yT3JkZXJJdGVtKCRvcmRlckl0ZW0pOwoJCQkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpOwoJCQkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJCX0KCQkJfQoJCX0KCX0KCQp9Cgo=', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(163, 'couponview', 'Y2xhc3MgTU1fQ291cG9uVmlldyBleHRlbmRzIE1NX1JCQUNQcm9kdWN0TWFuYWdlclZpZXcgewoKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0FSQ0hJVkUgPSAiYXJjaGl2ZSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9VTkFSQ0hJVkUgPSAidW5hcmNoaXZlIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NUT1JFX0NPVVBPTl9TRUFSQ0hfT1BUSU9OUyA9ICJzdG9yZUNvdXBvblNlYXJjaE9wdGlvbnMiOwoJCglwdWJsaWMgc3RhdGljICRTRUFSQ0hfT1BUSU9OX1NIT1dfQVJDSElWRUQgPSAibW0tb3B0aW9uLXNob3ctYXJjaGl2ZWQtY291cG9ucyI7CglwdWJsaWMgc3RhdGljICRTRUFSQ0hfT1BUSU9OX1NIT1dfRVhQSVJFRCA9ICJtbS1vcHRpb24tc2hvdy1leHBpcmVkLWNvdXBvbnMiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkJCQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NBVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5zYXZlQ291cG9uKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUNvdXBvbigkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9BUkNISVZFOgoJCQkJCXJldHVybiAkdGhpcy0+YXJjaGl2ZUNvdXBvbigkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9VTkFSQ0hJVkU6CgkJCQkJcmV0dXJuICR0aGlzLT51bmFyY2hpdmVDb3Vwb24oJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU1RPUkVfQ09VUE9OX1NFQVJDSF9PUFRJT05TOgoJCQkJCXJldHVybiAkdGhpcy0+c3RvcmVDb3Vwb25TZWFyY2hPcHRpb25zKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKCRkZykKIAl7CgkJZ2xvYmFsICR3cGRiOwoJCWdsb2JhbCAkY3VycmVudF91c2VyOwoJCQoJCSR3aGVyZSA9ICJpc19naWZ0ID0gJzAnICI7CgkJJHNob3dBcmNoaXZlZENvdXBvbnMgPSBmYWxzZTsKCQkkc2hvd0V4cGlyZWRDb3Vwb25zID0gZmFsc2U7CgkJCgkJaWYoaXNzZXQoJGN1cnJlbnRfdXNlci0+SUQpKQoJCXsKCQkJJHNob3dBcmNoaXZlZENvdXBvbnMgPSAoTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihzZWxmOjokU0VBUkNIX09QVElPTl9TSE9XX0FSQ0hJVkVELiItIi4kY3VycmVudF91c2VyLT5JRCkgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCQkJJHNob3dFeHBpcmVkQ291cG9ucyA9IChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKHNlbGY6OiRTRUFSQ0hfT1BUSU9OX1NIT1dfRVhQSVJFRC4iLSIuJGN1cnJlbnRfdXNlci0+SUQpID09ICIxIikgPyB0cnVlIDogZmFsc2U7CgkJfQoJCQoJCWlmKCEkc2hvd0FyY2hpdmVkQ291cG9ucykKCQl7CgkJCSR3aGVyZSAuPSAiQU5EIGlzX2FyY2hpdmVkID0gJzAnICI7CgkJfQoJCQoJCWlmKCEkc2hvd0V4cGlyZWRDb3Vwb25zKQoJCXsKCQkJJG15c3FsTm93ID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSR3aGVyZSAuPSAiQU5EIChzdGFydF9kYXRlIDw9ICd7JG15c3FsTm93fScpIEFORCAoKGVuZF9kYXRlID0gJycpIE9SIChlbmRfZGF0ZSBMSUtFICcwMDAwLSUnKSBPUiAoZW5kX2RhdGUgPj0gJ3skbXlzcWxOb3d9JykpIjsKCQkJJHdoZXJlIC49ICJBTkQgKChxdWFudGl0eSA9ICctMScpIE9SIChxdWFudGl0eSA+IChzZWxlY3QgY291bnQoKikgQVMgdG90YWwgRlJPTSAiLk1NX1RBQkxFX0NPVVBPTl9VU0FHRS4iIHUgV0hFUkUgdS5jb3Vwb25faWQgPSBjLmlkKSkpIjsKCQl9CgkJCgkJJHNxbFJlc3VsdENvdW50ID0gInNlbGVjdCAKCQkJCQljb3VudChkaXN0aW5jdCBpZCkgYXMgdG90YWwgCgkJCQkJZnJvbSAKCQkJCQlgIi5NTV9UQUJMRV9DT1VQT05TLiJgIGBjYCI7CgkJCgkJaWYoIWVtcHR5KCR3aGVyZSkpewoJCQlpZihwcmVnX21hdGNoKCIvXih3aGVyZSkvIiwgc3RydG9sb3dlcih0cmltKCR3aGVyZSkpKSl7CgkJCQkkc3FsUmVzdWx0Q291bnQuPSAiIHskd2hlcmV9ICI7CgkJCX0JCgkJCWVsc2V7CgkJCQkkc3FsUmVzdWx0Q291bnQuPSAiIHdoZXJlIHskd2hlcmV9ICI7CgkJCX0KCQl9CgkJCgkJJGNvdW50Um93ID0gJHdwZGItPmdldF9yb3coJHNxbFJlc3VsdENvdW50KTsKCQkKCQkkc3FsID0gInNlbGVjdCAKCQkJCQkneyRjb3VudFJvdy0+dG90YWx9JyBhcyB0b3RhbCwgCgkJCQkJYGNgLmBpZGAgQVMgYGlkYCwKCQkJCQlgY2AuYGNvdXBvbl9uYW1lYCBBUyBgY291cG9uX25hbWVgLAoJCQkJCWBjYC5gY291cG9uX2NvZGVgIEFTIGBjb3Vwb25fY29kZWAsCgkJCQkJYGNgLmBjb3Vwb25fdHlwZWAgQVMgYGNvdXBvbl90eXBlYCwKCQkJCQlgY2AuYGNvdXBvbl92YWx1ZWAgQVMgYGNvdXBvbl92YWx1ZWAsCgkJCQkJYGNgLmBkZXNjcmlwdGlvbmAgQVMgYGRlc2NyaXB0aW9uYCwKCQkJCQlgY2AuYHF1YW50aXR5YCBBUyBgcXVhbnRpdHlgLAoJCQkJCWBjYC5gc3RhcnRfZGF0ZWAgQVMgYHN0YXJ0X2RhdGVgLAoJCQkJCWBjYC5gZW5kX2RhdGVgIEFTIGBlbmRfZGF0ZWAsCgkJCQkJYGNgLmBkYXRlX21vZGlmaWVkYCBBUyBgZGF0ZV9tb2RpZmllZGAsCgkJCQkJYGNgLmBkYXRlX2FkZGVkYCBBUyBgZGF0ZV9hZGRlZGAsCgkJCQkJKHNlbGVjdCBjb3VudCgwKSBBUyBgdG90YWxgIGZyb20gYG1tX2NvdXBvbl91c2FnZWAgd2hlcmUgKGBtbV9jb3Vwb25fdXNhZ2VgLmBjb3Vwb25faWRgID0gYGNgLmBpZGApKSBBUyBgcXVhbnRpdHlfdXNlZGAsCgkJCQkJKHNlbGVjdCBncm91cF9jb25jYXQoYHBgLmBuYW1lYCBzZXBhcmF0b3IgJywgJykgQVMgYHJlc3RyaWN0aW9uc2AgZnJvbSAoYG1tX2NvdXBvbl9yZXN0cmljdGlvbnNgIGByYCBsZWZ0IGpvaW4gYG1tX3Byb2R1Y3RzYCBgcGAgb24oKGByYC5gcHJvZHVjdF9pZGAgPSBgcGAuYGlkYCkpKSB3aGVyZSAoYGNgLmBpZGAgPSBgcmAuYGNvdXBvbl9pZGApIGdyb3VwIGJ5IGBjYC5gaWRgKSBBUyBgcHJvZHVjdF9yZXN0cmljdGlvbnNgIAoJCQkJCWZyb20gCgkJCQkJYCIuTU1fVEFCTEVfQ09VUE9OUy4iYCBgY2AgIjsKCQoJCWlmKCFlbXB0eSgkd2hlcmUpKXsKCQkJaWYocHJlZ19tYXRjaCgiL14od2hlcmUpLyIsIHN0cnRvbG93ZXIodHJpbSgkd2hlcmUpKSkpewoJCQkJJHNxbC49ICIgeyR3aGVyZX0gIjsKCQkJfQkKCQkJZWxzZXsKCQkJCSRzcWwuPSAiIHdoZXJlIHskd2hlcmV9ICI7CgkJCX0KCQl9CgkJCgkJaWYoIWlzX251bGwoJGRnKSAmJiAhaXNfbnVsbCgkZGctPnNvcnRCeSkgJiYgIWVtcHR5KCRkZy0+c29ydEJ5KSkgewoJCQkkc3FsLj0gIk9SREVSIEJZIHskZGctPnNvcnRCeX0geyRkZy0+c29ydERpcn0iOwoJCX0KCQkKCQkKCQlpZighaXNfbnVsbCgkZGcpKSB7CgkJCSRzcWwgLj0gJGRnLT5nZXRMaW1pdFNxbCgpOwoJCX0KCQkKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQoJCWlmKCEkcmVzdWx0IHx8IGlzX251bGwoJHJlc3VsdCkpIHsKCQkJcmV0dXJuIGFycmF5KCk7CgkJfQoJCQoJCXJldHVybiAkcmVzdWx0OwogCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiByZW1vdmVDb3Vwb24oJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbImlkIl0pKQoJCXsKCQkJJGlkID0gKGlzc2V0KCRwb3N0WyJpZCJdKSk/JHBvc3RbImlkIl06IjAiOwoJCQkkY291cG9uID0gbmV3IE1NX0NvdXBvbigkaWQpOwoJCQkkbWVkaWF0b3IgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VNZWRpYXRvcigpOwoJCQkkcmVzcG9uc2UgPSAkbWVkaWF0b3ItPm5vdGlmeUNvdXBvblJlbW92ZWQoJGNvdXBvbik7CgkJCWlmICgkcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQkJewoJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJfQoJCQkkY291cG9uLT5yZW1vdmUoKTsKCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGFyY2hpdmVDb3Vwb24oJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbImlkIl0pKQoJCXsKCQkJJGlkID0gKGlzc2V0KCRwb3N0WyJpZCJdKSk/JHBvc3RbImlkIl06IjAiOwoJCQkkY291cG9uID0gbmV3IE1NX0NvdXBvbigkaWQpOwoJCQkkY291cG9uLT5zZXRJc0FyY2hpdmVkKHRydWUpOwoJCQkkcmVzdWx0ID0gJGNvdXBvbi0+Y29tbWl0RGF0YSgpOwoJCQkKCQkJaWYoJHJlc3VsdCAhPT0gZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdXBvbiBoYXMgYmVlbiBhcmNoaXZlZCIpOwoJCQl9CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiB1bmFyY2hpdmVDb3Vwb24oJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbImlkIl0pKQoJCXsKCQkJJGlkID0gKGlzc2V0KCRwb3N0WyJpZCJdKSk/JHBvc3RbImlkIl06IjAiOwoJCQkkY291cG9uID0gbmV3IE1NX0NvdXBvbigkaWQpOwoJCQkkY291cG9uLT5zZXRJc0FyY2hpdmVkKGZhbHNlKTsKCQkJJHJlc3VsdCA9ICRjb3Vwb24tPmNvbW1pdERhdGEoKTsKCQkJCgkJCWlmKCRyZXN1bHQgIT09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3Vwb24gaGFzIGJlZW4gdW5hcmNoaXZlZCIpOwoJCQl9CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlQ291cG9uKCRwb3N0KXsKCQkKCQkkYmxhbmtGaWVsZHMgPSBhcnJheSgibW1fY291cG9uX25hbWUiLCJtbV9jb3Vwb25fY29kZSIpOwoJCWZvcmVhY2goJGJsYW5rRmllbGRzIGFzICRmaWVsZCkKCQl7CgkJCWlmKCRwb3N0WyRmaWVsZF0gPT0gIiIpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoInskZmllbGR9IG11c3QgYmUgY29tcGxldGVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0JCgkJfQoJCQoJCWlmKCgkcG9zdFsibW1fY291cG9uX3R5cGUiXSA9PSBNTV9Db3Vwb246OiRUWVBFX1BFUkNFTlRBR0UpIAoJCQkJJiYgKCRwb3N0WyJtbV9yZWN1cnJpbmdfc2V0dGluZyJdID09IE1NX0NvdXBvbjo6JFRZUEVfUkVDVVJSSU5HX0JJTExJTkdfU0VUVElOR19BTEwpIAoJCQkJJiYgKGZsb2F0dmFsKCRwb3N0WyJtbV9jb3Vwb25fdmFsdWUiXSkgPj0gMTAwKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZSBkaXNjb3VudCB2YWx1ZSBmb3IgYSAlIG9mZiBjb3Vwb24gbXVzdCBiZSBsZXNzIHRoYW4gMTAwIHdoZW4gYXBwbHlpbmcgdGhlIGRpc2NvdW50IHRvIGFsbCBjaGFyZ2VzLlxuXG5JZiB5b3Ugd2FudCB0byBvZmZlciBhIDEwMCUgZGlzY291bnQgYWNyb3NzIGFsbCBjaGFyZ2VzLCBzZWxlY3QgJ0ZyZWUnIGZyb20gdGhlIGRpc2NvdW50IHR5cGUgZHJvcCBkb3duLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkaWQgPSAoaXNzZXQoJHBvc3RbImlkIl0pKT8kcG9zdFsiaWQiXToiMCI7CgkJJGNvdXBvbiA9IG5ldyBNTV9Db3Vwb24oJGlkKTsKCQkkaW5mbyA9ICRjb3Vwb24tPmdldEZvcm1GaWVsZHMoKTsKCQkKCQlpZigkcG9zdFsibW1fcXVhbnRpdHkiXSA9PSAiIiB8fCBzdHJ0b2xvd2VyKCRwb3N0WyJtbV9xdWFudGl0eSJdKT09InVubGltaXRlZCIpewoJCQkkcG9zdFsibW1fcXVhbnRpdHkiXSA9ICItMSI7CgkJfQoJCWVsc2V7CgkJCSRwb3N0WyJtbV9xdWFudGl0eSJdID0gaW50dmFsKCRwb3N0WyJtbV9xdWFudGl0eSJdKTsKCQl9CgkJCgkJZm9yZWFjaCgkaW5mbyBhcyAkaz0+JHYpewoJCQkka2V5ID0gIm1tXyIuJGs7CgkJCWlmKGlzc2V0KCRwb3N0WyRrZXldKSl7CgkJCQkkaW5mby0+JGsgPSAkcG9zdFska2V5XTsKCQkJfQoJCX0KCQkkY291cG9uLT5zZXRRdWFudGl0eSgkcG9zdFsibW1fcXVhbnRpdHkiXSk7CgkJCgkJJGluZm8tPnN0YXJ0X2RhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvVVRDKCRwb3N0WydtbV9zdGFydF9kYXRlJ10sICJZLW0tZCBIOmkiLCAiMDA6MDA6MDAiKTsKCQkKCQlpZighZW1wdHkoJHBvc3RbIm1tX2VuZF9kYXRlIl0pKQoJCXsKCQkJJGluZm8tPmVuZF9kYXRlID0gTU1fVXRpbHM6OmRhdGVUb1VUQygkcG9zdFsnbW1fZW5kX2RhdGUnXSwgIlktbS1kIEg6aSIsICIyMzo1OTo1OSIpOwoJCX0KCQkKCQlpZighcHJlZ19tYXRjaCgiL15bYS16QS1aMC05X10rJC8iLCAkcG9zdFsibW1fY291cG9uX2NvZGUiXSkpewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3Vwb24gY29kZSBjYW4gY29udGFpbiBsZXR0ZXJzLCBudW1iZXJzLCBvciBhbiAnXycuICBObyBzcGFjZXMgYWxsb3dlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGluZm8tPnJlY3VycmluZ19iaWxsaW5nX3NldHRpbmcgPSAkcG9zdFsibW1fcmVjdXJyaW5nX3NldHRpbmciXTsKCQkKCQkkc2F2ZVByb2RzID0gYXJyYXkoKTsKCQlpZihpc3NldCgkcG9zdFsibW1fcHJvZHVjdHMiXSkpewoJCQkkcHJvZHVjdHMgPSAkcG9zdFsibW1fcHJvZHVjdHMiXTsKCQkJaWYoaXNfYXJyYXkoJHByb2R1Y3RzKSl7CgkJCQlmb3JlYWNoKCRwcm9kdWN0cyBhcyAkaWQpCgkJCQl7CgkJCQkJJHNhdmVQcm9kc1skaWRdID0gJGlkOwoJCQkJfQoJCQkJJGluZm8tPnByb2R1Y3RzID0gJHNhdmVQcm9kczsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJJGluZm8tPnByb2R1Y3RzID0gJHNhdmVQcm9kczsKCQl9CgkJCgkJJGluZm8tPmNvdXBvbl92YWx1ZV9jdXJyZW5jeSA9IE1NX0N1cnJlbmN5VXRpbDo6Z2V0QWN0aXZlQ3VycmVuY3koKTsKCQkKCQkkY291cG9uLT5zZXREYXRhKCRpbmZvKTsKCQkkcmV0ID0gJGNvdXBvbi0+Y29tbWl0RGF0YSgpOwoJCWlmKCRyZXQhPT1mYWxzZSkKCQl7CgkJCSRtZWRpYXRvciA9IG5ldyBNTV9QYXltZW50U2VydmljZU1lZGlhdG9yKCk7CgkJCSRyZXNwb25zZSA9ICRtZWRpYXRvci0+bm90aWZ5Q291cG9uQWRkZWQoJGNvdXBvbik7CgkJCWlmICgkcmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQkJewoJCQkJJGNvdXBvbi0+cmVtb3ZlKCk7CgkJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCQl9CQoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2F2ZSBjb3Vwb24gYXMgaXQgbWF5IGFscmVhZHkgYmUgaW4gdXNlIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc3RvcmVDb3Vwb25TZWFyY2hPcHRpb25zKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJtbV9hZG1pbl9pZCJdKSkKCQl7CgkJCWlmKGlzc2V0KCRwb3N0WyJtbV9zaG93X2FyY2hpdmVkX2NvdXBvbnMiXSkpCgkJCXsKCQkJCSRvcHRpb25OYW1lID0gc2VsZjo6JFNFQVJDSF9PUFRJT05fU0hPV19BUkNISVZFRC4iLSIuJHBvc3RbIm1tX2FkbWluX2lkIl07CgkJCQlNTV9PcHRpb25VdGlsczo6c2V0T3B0aW9uKCRvcHRpb25OYW1lLCAkcG9zdFsibW1fc2hvd19hcmNoaXZlZF9jb3Vwb25zIl0pOwoJCQl9CgkJCQoJCQlpZihpc3NldCgkcG9zdFsibW1fc2hvd19leHBpcmVkX2NvdXBvbnMiXSkpCgkJCXsKCQkJCSRvcHRpb25OYW1lID0gc2VsZjo6JFNFQVJDSF9PUFRJT05fU0hPV19FWFBJUkVELiItIi4kcG9zdFsibW1fYWRtaW5faWQiXTsKCQkJCU1NX09wdGlvblV0aWxzOjpzZXRPcHRpb24oJG9wdGlvbk5hbWUsICRwb3N0WyJtbV9zaG93X2V4cGlyZWRfY291cG9ucyJdKTsKCQkJfQoJCQkKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc3RvcmUgY291cG9uIHNlYXJjaCBvcHRpb25zLiBDb3VsZG4ndCBmaW5kIGN1cnJlbnQgYWRtaW4gdXNlciBJRC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9Cn0=', 0, '2018-11-21 06:38:54'),
(164, 'simpleaveragereport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fU2ltcGxlQXZlcmFnZVJlcG9ydCBleHRlbmRzIE1NX0FkdmFuY2VkUmVwb3J0QmFzZSAKewoJCglwcm90ZWN0ZWQgJHZpc3VhbEVsZW1lbnRzID0gYXJyYXkoIk1NX1JlcG9ydERhdGFHcmlkIiwiTU1fUmVwb3J0QmFyQ2hhcnQiKTsKCQoJcHVibGljIHN0YXRpYyAkU0lNUExFX0FWRVJBR0VfREFUQUdSSUQgPSAic2ltcGxlX2F2ZXJhZ2VfZGF0YWdyaWQiOwoJcHVibGljIHN0YXRpYyAkU0lNUExFX0FWRVJBR0VfQ09MVU1OX0NIQVJUID0gInNpbXBsZV9hdmVyYWdlX2NvbHVtbl9jaGFydCI7CgkKCS8vcXVlcnkgaWRlbnRpZmllcnMKCXB1YmxpYyBzdGF0aWMgJFNJTVBMRV9BVkVSQUdFX1FVRVJZID0gInNpbXBsZV9hdmVyYWdlX3F1ZXJ5IjsKCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkgCgl7CgkJc3dpdGNoICgkZWxlbWVudElkZW50aWZpZXIpCgkJewoJCQljYXNlIHNlbGY6OiRTSU1QTEVfQVZFUkFHRV9EQVRBR1JJRDoKCQkJCXJldHVybiAkdGhpcy0+cmVuZGVyU2ltcGxlQXZlcmFnZURhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcyk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokU0lNUExFX0FWRVJBR0VfQ09MVU1OX0NIQVJUOgoJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJTaW1wbGVBdmVyYWdlQ29sdW1uQ2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyLCRwYXJhbXMsJHdpZHRoLCRoZWlnaHQsJGRpcmVjdGl2ZXMpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJVbmFibGUgdG8gcmVuZGVyIHZpc3VhbCBlbGVtZW50OiBpZGVudGlmaWVyICIuKCghaXNfYXJyYXkoJGVsZW1lbnRJZGVudGlmaWVyKSAmJiAhaXNfb2JqZWN0KCRlbGVtZW50SWRlbnRpZmllcikpPyJ7JGVsZW1lbnRJZGVudGlmaWVyfSAiOiIiKS4idW5rbm93biIsTU1fUmVwb3J0UmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJTaW1wbGVBdmVyYWdlRGF0YWdyaWQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJCgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksIHNlbGY6OiRTSU1QTEVfQVZFUkFHRV9RVUVSWSwgJHBhcmFtcyk7CgkJaWYgKCFNTV9SZXBvcnRSZXNwb25zZTo6aXNTdWNjZXNzKCRkYXRhUmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuICRkYXRhUmVzcG9uc2U7CgkJfQoJCQoJCSRyb3dJbmRleCA9ICJBZmZpbGlhdGUiOwoJCQoJCWlmIChpc3NldCgkcGFyYW1zWyd0eXBlJ10pKQoJCXsKCQkJc3dpdGNoICgkcGFyYW1zWyd0eXBlJ10pCgkJCXsKCQkJCWNhc2UgJ2FmZmlsaWF0ZSc6CgkJCQkJJHJvd0luZGV4ID0gIkFmZmlsaWF0ZSI7CgkJCQkJYnJlYWs7CgkJCQljYXNlICdzdWJhZmZpbGlhdGUnOgoJCQkJCSRyb3dJbmRleCA9ICJTdWJhZmZpbGlhdGUiOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAncHJvZHVjdCc6CgkJCQkJJHJvd0luZGV4ID0gIlByb2R1Y3QiOwoJCQkJCWJyZWFrOwoJCQkJZGVmYXVsdDoKCQkJCQkkcm93SW5kZXggPSAiQWZmaWxpYXRlIjsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQkkZ3JpZEhlYWRlcnMgPSBhcnJheSgieCI9PmFycmF5KCdsYWJlbCc9PiRyb3dJbmRleCksIAoJCQkJCQkJICJjdXN0b21lcnMiICAgPT5hcnJheSgnbGFiZWwnPT4iIyBDdXN0b21lcnMiKSwKCQkJCQkJCSAidG90YWxfc2FsZXMiID0+YXJyYXkoJ2xhYmVsJz0+IlRvdGFsIFNhbGVzIiwiY29sdW1uVHlwZSI9Pidtb25leScpLAoJCQkJCQkJICJzaW1wbGVfYXZlcmFnZSI9PmFycmF5KCdsYWJlbCc9PiJTaW1wbGUgQXZlcmFnZSIsImNvbHVtblR5cGUiPT4nbW9uZXknKSk7CgkJJGdyaWQgPSBNTV9SZXBvcnREYXRhZ3JpZDo6Y3JlYXRlRnJvbURhdGEoTU1fU2ltcGxlQXZlcmFnZVJlcG9ydDo6JFNJTVBMRV9BVkVSQUdFX0RBVEFHUklELCAkZ3JpZEhlYWRlcnMsICRkYXRhUmVzcG9uc2UsJGRpcmVjdGl2ZXMpOwoJCS8vJGdyaWQtPnNldEdyaWRUaXRsZSgiUXVpY2sgQXZlcmFnZSIpOwoJCSRncmlkLT5zZXRTaG93SGVhZGVyUm93KGZhbHNlKTsKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRncmlkLT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlclNpbXBsZUF2ZXJhZ2VDb2x1bW5DaGFydCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JFNJTVBMRV9BVkVSQUdFX1FVRVJZLCAkcGFyYW1zKTsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJJGNvbHVtbiA9IE1NX1JlcG9ydENvbHVtbkNoYXJ0OjpjcmVhdGVGcm9tVG9wUmVzdWx0cygkZWxlbWVudElkZW50aWZpZXIsICJ4IiwgInNpbXBsZV9hdmVyYWdlIiwgMTAsICRkYXRhUmVzcG9uc2UpOwoJCSRjb2x1bW4tPnNldEN1cnJlbmN5VmFsdWVzKHRydWUpOwoJCSRjb2x1bW4tPnNldFZhbHVlQXhpc1RpdGxlKCJBdmVyYWdlIGluICIuTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpKTsKCQkkY29sdW1uLT5zZXRDYXRlZ29yeUF4aXNUaXRsZSgiVG9wIHBlcmZvcm1pbmcgYWZmaWxpYXRlcyIpOwoJCS8vVE9ETzogaGFuZGxlIG5vIGRhdGEKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRjb2x1bW4tPnJlbmRlcigpKTsJCQoJfQoJCgkKCS8qKgoJICogR2VuZXJhdGUgdGhlIGRhdGEgZm9yIHRoZSBRdWljayBBdmVyYWdlIHJlcG9ydC4gCgkgKiBDb25zdHJhaW50OiBUaGUgc3VwcGxpZWQgcGFyYW1zIG11c3QgY29udGFpbiBhIHN0YXJ0IGFuZCBlbmQgZGF0ZQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHBhcmFtcwoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSByZXN1bHRzCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVTaW1wbGVBdmVyYWdlRGF0YSgkcGFyYW1zKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoIWlzX2FycmF5KCRwYXJhbXMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIFF1aWNrIEF2ZXJhZ2UgUmVwb3J0IGRhdGE6IEltcHJvcGVyIHBhcmFtZXRlcnMgZm9ybWF0IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCFpc3NldCgkcGFyYW1zWydzdGFydF9kYXRlJ10pIHx8ICFpc3NldCgkcGFyYW1zWydlbmRfZGF0ZSddKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBRdWljayBBdmVyYWdlIFJlcG9ydCBkYXRhOiBTdGFydCwgRW5kIGRhdGUsIGFuZCBUeXBlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdHJhbnNhY3Rpb25zVGFibGUgPSBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0c7CgkJJHByb2R1Y3RzVGFibGUgPSBNTV9UQUJMRV9QUk9EVUNUUzsKCQkkb3JkZXJJdGVtc1RhYmxlID0gTU1fVEFCTEVfT1JERVJfSVRFTVM7CgkJJG9yZGVyc1RhYmxlID0gTU1fVEFCTEVfT1JERVJTOwoJCQoJCSRzdGFydFRpbWUgPSBzdHJ0b3RpbWUoJHBhcmFtc1snc3RhcnRfZGF0ZSddKTsKCQkkZW5kVGltZSA9IHN0cnRvdGltZSgkcGFyYW1zWydlbmRfZGF0ZSddKTsKCQkKCQkkc3RhcnREYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiLCRzdGFydFRpbWUpOyAvL215c3FsIGZvcm1hdAoJCSRlbmREYXRlID0gICBkYXRlKCJZLW0tZCBIOmk6cyIsJGVuZFRpbWUpOwoJCQoJCSR0eXBlID0gJHBhcmFtc1sndHlwZSddOwoJCQoJCWlmICghaW5fYXJyYXkoJHR5cGUsYXJyYXkoImFmZmlsaWF0ZSIsInN1YmFmZmlsaWF0ZSIsInByb2R1Y3QiKSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJJbnZhbGlkIHJlcG9ydCB0eXBlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHNlbGVjdEZpZWxkID0gKCR0eXBlID09ICJhZmZpbGlhdGUiKT8iby5hZmZpbGlhdGVfaWQiOigoJHR5cGU9PSJzdWJhZmZpbGlhdGUiKT8iby5zdWJfYWZmaWxpYXRlX2lkIjoiY29uY2F0KHAubmFtZSwnICgnLG9pLml0ZW1faWQsJyknKSIpOwoJCSRncm91cEJ5ID0gKCR0eXBlID09ICJhZmZpbGlhdGUiKT8iby5hZmZpbGlhdGVfaWQiOigoJHR5cGU9PSJzdWJhZmZpbGlhdGUiKT8iby5zdWJfYWZmaWxpYXRlX2lkIjoib2kuaXRlbV9pZCIpOwoJCSRzcWwgPSAiU0VMRUNUIHgsIHRvdGFsX3NhbGVzLCBjdXN0b21lcnMsIHRvdGFsX3NhbGVzL2N1c3RvbWVycyBhcyBzaW1wbGVfYXZlcmFnZSBGUk9NICIuCgkJCSAgICIoU0VMRUNUIElGKHskc2VsZWN0RmllbGR9PScnLCdbdW5zcGVjaWZpZWRdJyx7JHNlbGVjdEZpZWxkfSkgYXMgeCwgc3VtKGFicyh0LmFtb3VudCkpIGFzIHRvdGFsX3NhbGVzLCBDT1VOVChESVNUSU5DVCBvLnVzZXJfaWQpIEFTIGN1c3RvbWVycyAiLgoJCQkgICAiRlJPTSB7JHRyYW5zYWN0aW9uc1RhYmxlfSB0IEZPUkNFIElOREVYICh0cmFuc2FjdGlvbl90eXBlX2lkeCkgIi4KCQkJICAgIkxFRlQgSk9JTiB7JG9yZGVySXRlbXNUYWJsZX0gb2kgb24gKHQub3JkZXJfaXRlbV9pZCA9IG9pLmlkKSAiLgoJCQkgICAiTEVGVCBKT0lOIHskb3JkZXJzVGFibGV9IG8gb24gKG9pLm9yZGVyX2lkID0gby5pZCkgIi4KCQkJICAgIkxFRlQgSk9JTiB7JHByb2R1Y3RzVGFibGV9IHAgb24gKHAuaWQgPSBvaS5pdGVtX2lkKSAiLgoJCQkgICAiV0hFUkUgdHJhbnNhY3Rpb25fdHlwZSBJTiAoMiw0KSAiLgoJCQkgICAiQU5EIHQudHJhbnNhY3Rpb25fZGF0ZSBCRVRXRUVOICVzIEFORCAlcyAiLgoJCQkgICAiR1JPVVAgQlkgeyRncm91cEJ5fSkgQVMgUSBPUkRFUiBCWSBjdXN0b21lcnMgREVTQyI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoJHNxbCwkc3RhcnREYXRlLCRlbmREYXRlKSxBUlJBWV9BKTsKCQlyZXR1cm4gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlU2luZ2xlUmVwb3J0RGF0YXNldCgkcGFyYW1zLCRyZXN1bHRzKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YSgkcXVlcnlJZGVudGlmaWVyLCAkcGFyYW1zKQoJewoJCXN3aXRjaCAoJHF1ZXJ5SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JFNJTVBMRV9BVkVSQUdFX1FVRVJZOgoJCQkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlU2ltcGxlQXZlcmFnZURhdGEoJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgZGF0YSBmb3IgdW5rbm93biBxdWVyeSBpZGVudGlmaWVyIHskcXVlcnlJZGVudGlmaWVyfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(165, 'membershiplevel', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX01lbWJlcnNoaXBMZXZlbCBleHRlbmRzIE1NX0VudGl0eQp7CQoJcHVibGljIHN0YXRpYyAkU1VCX1RZUEVfUEFJRCA9ICJwYWlkIjsKCXB1YmxpYyBzdGF0aWMgJFNVQl9UWVBFX0ZSRUUgPSAiZnJlZSI7CgkKCXB1YmxpYyBzdGF0aWMgJERGTFRfRU1BSUxfU1VCSkVDVCA9ICJXZWxjb21lIFtNTV9NZW1iZXJfRGF0YSBuYW1lPSdmaXJzdE5hbWUnXSEiOwoJcHVibGljIHN0YXRpYyAkREZMVF9FTUFJTF9CT0RZID0gIkhpIFtNTV9NZW1iZXJfRGF0YSBuYW1lPSdmaXJzdE5hbWUnXSxcblxuVGhhbmtzIGZvciBqb2luaW5nIG91ciBjb21tdW5pdHkhXG5cbllvdSBjYW4gbG9naW4gd2l0aCB0aGUgZm9sbG93aW5nIGNyZWRlbnRpYWxzOlxuVXNlcm5hbWU6IFtNTV9NZW1iZXJfRGF0YSBuYW1lPSd1c2VybmFtZSddXG5QYXNzd29yZDogW01NX01lbWJlcl9EYXRhIG5hbWU9J3Bhc3N3b3JkJ11cblxuPGEgaHJlZj1cIltNTV9Db3JlUGFnZV9MaW5rIHR5cGU9J2hvbWVwYWdlJyBhdXRvTG9naW49J3RydWUnXVwiPkNsaWNrIGhlcmUgdG8gbG9naW48L2E+XG5cbklmIHlvdSBoYXZlIGFueSBxdWVzdGlvbnMsIGZlZWwgZnJlZSB0byBjb250YWN0IHVzIGF0IDxhIGhyZWY9XCJtYWlsdG86W01NX0VtcGxveWVlX0RhdGEgbmFtZT0nZW1haWwnXVwiPltNTV9FbXBsb3llZV9EYXRhIG5hbWU9J2VtYWlsJ108L2E+LlxuXG5UaGFua3MhXG5bTU1fRW1wbG95ZWVfRGF0YSBuYW1lPSdkaXNwbGF5TmFtZSddIjsKCQoJcHVibGljIHN0YXRpYyAkR0VUX01FTUJFUlNISVBfTEVWRUxTX0NBQ0hFX0tFWSA9ICJtbS1nZXQtbWVtYmVyc2hpcC1sZXZlbHMiOwoJcHVibGljIHN0YXRpYyAkR0VUX01FTUJFUlNISVBfTEVWRUxfUE9TVF9BQ0NFU1NfQ0FDSEVfS0VZID0gIm1tLWdldC1tZW1iZXJzaGlwLWxldmVsLXBvc3QtYWNjZXNzIjsKCQoJcHJpdmF0ZSAkZW1haWxTdWJqZWN0ID0gIiI7Cglwcml2YXRlICRlbWFpbEJvZHkgPSAiIjsKCXByaXZhdGUgJHJlZmVyZW5jZUtleSA9ICIiOwoJcHJpdmF0ZSAkbmFtZSA9ICIiOwoJcHJpdmF0ZSAkZGVmYXVsdFByb2R1Y3RJZD0iIjsKCXByaXZhdGUgJGlzRnJlZUZsYWcgPSAiMSI7Cglwcml2YXRlICRpc0RlZmF1bHRGbGFnID0gIjAiOwoJcHJpdmF0ZSAkZGVzY3JpcHRpb24gPSAiIjsKCXByaXZhdGUgJHByb2R1Y3RJZHMgPSBhcnJheSgpOwoJcHJpdmF0ZSAkbGFzdFByb2R1Y3RJZHMgPSBhcnJheSgpOwoJcHJpdmF0ZSAkY2F0ZWdvcnlJZHMgPSBhcnJheSgpOwoJcHJpdmF0ZSAkc3RhdHVzID0gIjEiOwoJcHJpdmF0ZSAkZW1haWxGcm9tSWQgPSAiIjsKCXByaXZhdGUgJGJ1bmRsZXMgPSAiIjsKCXByaXZhdGUgJGV4cGlyZXMgPSAiMCI7Cglwcml2YXRlICRleHBpcmVBbW91bnQgPSAiIjsKCXByaXZhdGUgJGV4cGlyZVBlcmlvZCA9ICIiOwoJcHJpdmF0ZSAkd2VsY29tZUVtYWlsRW5hYmxlZCA9ICIxIjsKCXByaXZhdGUgJHdwUm9sZSA9ICJtbS1pZ25vcmUtcm9sZSI7CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFMuIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIic7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCkgewoJCQkkdGhpcy0+c2V0RGF0YSgkcmVzdWx0KTsKCQl9CgkJZWxzZSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGZpbmRCeVJlZmVyZW5jZUtleSgka2V5KQoJewoJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgpOwoJCgkJaWYoIWVtcHR5KCRrZXkpKQoJCXsKCQkJZ2xvYmFsICR3cGRiOwoJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIFdIRVJFIHJlZmVyZW5jZV9rZXk9JyIuJGtleS4iJyI7CgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJCQoJCQlpZigkcmVzdWx0KQoJCQl7CgkJCQkkbWVtYmVyc2hpcC0+c2V0RGF0YSgkcmVzdWx0KTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRtZW1iZXJzaGlwLT5pbnZhbGlkYXRlKCk7CgkJCX0KCQl9CgkKCQlyZXR1cm4gJG1lbWJlcnNoaXA7Cgl9CgkKCS8qKgoJICogRGV0ZXJtaW5lIGlmIGEgcGFydGljdWxhciBtZW1iZXJzaGlwIGxldmVsIGlzIGFzc29jaWF0ZWQgd2l0aCBhIHBhcnRpY3VsYXIgY2F0ZWdvcnkKCSAqIAoJICogQHBhcmFtIHVua25vd24gJG1lbWJlcnNoaXBJZCBJRCBvZiB0aGUgbWVtYmVyc2hpcCBsZXZlbAoJICogQHBhcmFtIHVua25vd24gJGNhdGVnb3J5SWRzIGFycmF5IG9mIGNhdGVnb3J5IElEcwoJICogQHJldHVybiBib29sZWFuIHJldHVybiB0cnVlIGlmIHRoZSBtZW1iZXJzaGlwIGxldmVsIGlzIGFzc29jaWF0ZWQgd2l0aCBvbmUgb3IgbW9yZSBvZiB0aGUgY2F0ZWdvcnkgSURzIHBhc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGhhc0FjY2Vzc1RvQ2F0ZWdvcnkoJG1lbWJlcnNoaXBJZCwgJGNhdGVnb3J5SWRzKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gIlNFTEVDVCBjb3VudCgqKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTF9DQVRFR09SSUVTLiIgV0hFUkUgbWVtYmVyc2hpcF9sZXZlbF9pZD0neyRtZW1iZXJzaGlwSWR9JyAiOwoJCSRzcWwgLj0gIiBBTkQgY2F0ZWdvcnlfaWQgSU4gKCIuaW1wbG9kZSgiLCIsICRjYXRlZ29yeUlkcykuIik7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF92YXIoJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCAhPT0gZmFsc2UgJiYgaW50dmFsKCRyZXN1bHQpID4gMCkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPnJlZmVyZW5jZUtleSA9ICRkYXRhLT5yZWZlcmVuY2Vfa2V5OwoJCQkkdGhpcy0+bmFtZSA9ICRkYXRhLT5uYW1lOwoJCQkkdGhpcy0+d3BSb2xlID0gJGRhdGEtPndwX3JvbGU7CgkJCSR0aGlzLT5pc0ZyZWVGbGFnID0gJGRhdGEtPmlzX2ZyZWU7CgkJCSR0aGlzLT5pc0RlZmF1bHRGbGFnID0gJGRhdGEtPmlzX2RlZmF1bHQ7CgkJCSR0aGlzLT5kZXNjcmlwdGlvbiA9ICRkYXRhLT5kZXNjcmlwdGlvbjsKCQkJJHRoaXMtPmRlZmF1bHRQcm9kdWN0SWQgPSAkZGF0YS0+ZGVmYXVsdF9wcm9kdWN0X2lkOwoJCQkkdGhpcy0+Z2V0QXNzb2NpYXRlZFByb2R1Y3RzKCk7CgkJCSR0aGlzLT5nZXRBc3NvY2lhdGVkQ2F0ZWdvcmllcygpOwoJCQkkdGhpcy0+c3RhdHVzID0gJGRhdGEtPnN0YXR1czsKCQkJJHRoaXMtPmVtYWlsU3ViamVjdCA9ICRkYXRhLT5lbWFpbF9zdWJqZWN0OwoJCQkkdGhpcy0+ZW1haWxCb2R5ID0gJGRhdGEtPmVtYWlsX2JvZHk7CgkJCSR0aGlzLT5lbWFpbEZyb21JZCA9ICRkYXRhLT5lbWFpbF9mcm9tX2lkOwoJCQkkdGhpcy0+ZXhwaXJlQW1vdW50ID0gJGRhdGEtPmV4cGlyZV9hbW91bnQ7CgkJCSR0aGlzLT5leHBpcmVQZXJpb2QgPSAkZGF0YS0+ZXhwaXJlX3BlcmlvZDsKCQkJJHRoaXMtPmV4cGlyZXMgPSAkZGF0YS0+ZXhwaXJlczsKCQkJJHRoaXMtPndlbGNvbWVFbWFpbEVuYWJsZWQgPSAkZGF0YS0+d2VsY29tZV9lbWFpbF9lbmFibGVkOwoJCQkKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjb21taXREYXRhKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGRvVXBkYXRlID0gaXNzZXQoJHRoaXMtPmlkKSAmJiAkdGhpcy0+aWQgIT0gIiIgJiYgaW50dmFsKCR0aGlzLT5pZCkgPiAwOwoJCQoJCU1NX1RyYW5zYWN0aW9uOjpiZWdpbigpOwoJCXRyeQoJCXsJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFMuIiBzZXQgIiAuCgkJCQkJCSIgICByZWZlcmVuY2Vfa2V5ID0gJyVzJywgIiAuCgkJCSAJCQkiCW5hbWUgPSAnJXMnLCIgLgoJCQkgCQkJIgl3cF9yb2xlID0gJyVzJywiIC4KCQkJIAkJCSIJc3RhdHVzPSclZCcsIiAuCgkJCSAJCQkiCWlzX2ZyZWU9JyVkJywiIC4KCQkJIAkJCSIJaXNfZGVmYXVsdD0nJWQnLCIgLgoJCQkgCQkJIglkZXNjcmlwdGlvbj0nJXMnLCIgLgoJCQkgCQkJIglkZWZhdWx0X3Byb2R1Y3RfaWQ9JyVkJywiIC4KCQkJIAkJCSIJZW1haWxfc3ViamVjdD0nJXMnLCIgLgoJCQkgCQkJIgllbWFpbF9ib2R5PSclcycsIiAuCgkJCSAJCQkiCWVtYWlsX2Zyb21faWQ9JyVkJywiIC4KCQkJIAkJCSIJd2VsY29tZV9lbWFpbF9lbmFibGVkPSclZCcsIiAuCgkJCSAJCQkiCWV4cGlyZV9hbW91bnQ9JyVkJywiIC4KCQkJIAkJCSIJZXhwaXJlX3BlcmlvZD0nJXMnLCIgLgoJCQkgCQkJIglleHBpcmVzPSclZCciIC4KCQkJIAkJCSIiOwoJCQl9CgkJIAllbHNlIAoJCSAJewoJCQkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIHNldCAiIC4KCQkJCQkJIiAgIHJlZmVyZW5jZV9rZXkgPSAnJXMnLCAiIC4KCQkJIAkJCSIJbmFtZSA9ICclcycsIiAuCgkJCSAJCQkiCXdwX3JvbGUgPSAnJXMnLCIgLgoJCQkgCQkJIglzdGF0dXM9JyVkJywiIC4KCQkgCQkJCSIJaXNfZnJlZT0nJWQnLCIgLgoJCQkgCQkJIglpc19kZWZhdWx0PSclZCcsIiAuCgkJIAkJCQkiCWRlc2NyaXB0aW9uPSclcycsIiAuCgkJIAkJCQkiCWRlZmF1bHRfcHJvZHVjdF9pZD0nJWQnLCIgLgoJCQkgCQkJIgllbWFpbF9zdWJqZWN0PSclcycsIiAuCgkJCSAJCQkiCWVtYWlsX2JvZHk9JyVzJywiIC4KCQkJIAkJCSIJZW1haWxfZnJvbV9pZD0nJWQnLCIgLgoJCQkgCQkJIgl3ZWxjb21lX2VtYWlsX2VuYWJsZWQ9JyVkJywiIC4KCQkJIAkJCSIJZXhwaXJlX2Ftb3VudD0nJWQnLCIgLgoJCQkgCQkJIglleHBpcmVfcGVyaW9kPSclcycsIiAuCgkJCSAJCQkiCWV4cGlyZXM9JyVkJyB3aGVyZSBpZD0neyR0aGlzLT5pZH0nIiAuCgkJCSAJCQkiIjsKCQkgCX0KCQkJCgkJIAkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+Z2V0UmVmZXJlbmNlS2V5KCksICR0aGlzLT5uYW1lLCAkdGhpcy0+d3BSb2xlLCAkdGhpcy0+c3RhdHVzLCAkdGhpcy0+aXNGcmVlRmxhZywgCgkJIAkJCQkJCQkJCQkkdGhpcy0+aXNEZWZhdWx0RmxhZywgJHRoaXMtPmRlc2NyaXB0aW9uLCAkdGhpcy0+ZGVmYXVsdFByb2R1Y3RJZCwgCgkJIAkJCQkJCQkJCQkkdGhpcy0+ZW1haWxTdWJqZWN0LCAkdGhpcy0+ZW1haWxCb2R5LCAkdGhpcy0+ZW1haWxGcm9tSWQsICR0aGlzLT53ZWxjb21lRW1haWxFbmFibGVkLAoJCSAJCQkJCQkJCQkJJHRoaXMtPmV4cGlyZUFtb3VudCwgJHRoaXMtPmV4cGlyZVBlcmlvZCwgJHRoaXMtPmV4cGlyZXMpOwoJCSAJCQkJCQkJCQkJCQoJCSAJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCSAJCgkJIAlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkgCXsKCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIG1lbWJlcnNoaXAgbGV2ZWwgKHskd3BkYi0+bGFzdF9lcnJvcn0pIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJIAl9CgkJIAkKCQkgCWlmKCEkZG9VcGRhdGUpIAoJCSAJewoJCSAJCSR0aGlzLT5pZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJIAl9CgkJIAkKCQkgCWlmKGludHZhbCgkdGhpcy0+aWQpID4gMCkKCQkgCXsKCQkgCQkvLyBjaGVjayBpZiBhbnkgcHJvZHVjdHMgYXJlIGJlaW5nIHJlbW92ZWQgdGhhdCBoYXZlIGJlZW4gcHVyY2hhc2VkCgkJIAkJZm9yZWFjaCgkdGhpcy0+bGFzdFByb2R1Y3RJZHMgYXMgJG9sZFByb2R1Y3RJZCkKCQkgCQl7CgkJIAkJCWlmKCFpbl9hcnJheSgkb2xkUHJvZHVjdElkLCAkdGhpcy0+cHJvZHVjdElkcykpCgkJIAkJCXsKCQkgCQkJCSRoYXNCZWVuUHVyY2hhc2VkID0gTU1fUHJvZHVjdDo6aGFzQmVlblB1cmNoYXNlZCgkb2xkUHJvZHVjdElkKTsKCQkgCQkJCQoJCSAJCQkJaWYoJGhhc0JlZW5QdXJjaGFzZWQpCgkJIAkJCQl7CgkJIAkJCQkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJIAkJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkb2xkUHJvZHVjdElkKTsKCQkgCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJQcm9kdWN0ICd7JHByb2R1Y3QtPmdldE5hbWUoKX0nIGhhcyBiZWVuIHB1cmNoYXNlZCBhdCBsZWFzdCBvbmNlIGFuZCBjYW5ub3QgYmUgcmVtb3ZlZCBmcm9tIHRoaXMgbWVtYmVyc2hpcCBsZXZlbC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkgCQkJCX0KCQkgCQkJfQoJCSAJCX0KCQkgCQkKCQkgCQkvLyB1cGRhdGUgcHJvZHVjdHMKCQkJIAkkcHJvZHVjdHMgPSAkdGhpcy0+cHJvZHVjdElkczsKCQkJIAlpZihpc19hcnJheSgkcHJvZHVjdHMpKQoJCQkgCXsKCQkJIAkJJHRoaXMtPnJlbW92ZVByb2R1Y3RzKCk7CgkJCSAJCWZvcmVhY2goJHByb2R1Y3RzIGFzICRwcm9kdWN0SWQpCgkJCSAJCXsKCQkJIAkJCSR0aGlzLT5hZGRQcm9kdWN0KCRwcm9kdWN0SWQpOwoJCQkgCQl9CgkJCSAJfQoJCQkgCQoJCQkgCS8vIHVwZGF0ZSBjYXRlZ29yaWVzCgkJCSAJJGNhdGVnb3JpZXMgPSAkdGhpcy0+Y2F0ZWdvcnlJZHM7CgkJCSAJaWYoaXNfYXJyYXkoJGNhdGVnb3JpZXMpKQoJCQkgCXsKCQkJIAkJJHRoaXMtPnJlbW92ZUNhdGVnb3JpZXMoKTsKCQkJIAkJZm9yZWFjaCgkY2F0ZWdvcmllcyBhcyAkY2F0ZWdvcnlJZCkKCQkJIAkJewoJCQkgCQkJJHRoaXMtPmFkZENhdGVnb3J5KCRjYXRlZ29yeUlkKTsKCQkJIAkJfQoJCQkgCX0KCQkgCX0KCQkgCQoJCSAJJHRoaXMtPmFkZEJ1bmRsZXMoKTsKCQl9CgkJY2F0Y2goRXhjZXB0aW9uICRleCkKCQl7CQoJCSAJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBtZW1iZXJzaGlwIGxldmVsIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCU1NX1RyYW5zYWN0aW9uOjpjb21taXQoKTsKCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZighJHRoaXMtPmhhc0Fzc29jaWF0aW9ucygpKQoJCXsKCQkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLiIgV0hFUkUgaWQ9JyVkJyBMSU1JVCAxIjsKCQkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmlkKSk7CgkJCQoJCQkvLyByZW1vdmUgYnVuZGxlIHJlbGF0aW9uc2hpcHMKCQkJJHRoaXMtPnJlbW92ZUJ1bmRsZXMoKTsKCQkJCgkJCSR0aGlzLT5yZW1vdmVQcm9kdWN0cygpOwoJCQkKCQkJJHRoaXMtPnJlbW92ZUNhdGVnb3JpZXMoKTsKCQkJCgkJCWlmKCRyZXN1bHRzKSB7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBoYXNBc3NvY2lhdGlvbnMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvLyBjaGVjayBpZiBtZW1iZXJzaGlwIGxldmVsIGlzIHRoZSBkZWZhdWx0CgkJJHNxbCA9ICJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFMuIiB3aGVyZSBpZD0neyR0aGlzLT5pZH0nIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJvdy0+aXNfZGVmYXVsdCA9PSAiMSIpIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCWlmKCR0aGlzLT5oYXNTdWJzY3JpYmVycygpKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQkvLyBjaGVjayBpZiBtZW1iZXJzaGlwIGxldmVsIGlzIGFzc29jaWF0ZWQgd2l0aCBvbmUgb3IgbW9yZSBwb3N0cwoJCSRzcWwgPSAiU0VMRUNUIGNvdW50KCopIGFzIHRvdGFsIEZST00gIi5NTV9UQUJMRV9QT1NUU19BQ0NFU1MuIiBXSEVSRSBhY2Nlc3NfdHlwZT0nbWVtYmVyX3R5cGUnIEFORCBhY2Nlc3NfaWQ9J3skdGhpcy0+aWR9JyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkKCQlpZigkcm93LT50b3RhbCA+IDApIHsKCQkJcmV0dXJuIHRydWU7CQoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBoYXNTdWJzY3JpYmVycygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vIGNoZWNrIGlmIG1lbWJlcnNoaXAgbGV2ZWwgaXMgYXNzb2NpYXRlZCB3aXRoIG9uZSBvciBtb3JlIHVzZXJzCgkJaWYoJHRoaXMtPmlzVmFsaWQoKSkgewoJCQkkc3FsID0gIlNFTEVDVCBjb3VudCgqKSBBUyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgV0hFUkUgbWVtYmVyc2hpcF9sZXZlbF9pZD0neyR0aGlzLT5pZH0nIjsKCQkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkKCQkJaWYoJHJvdyAmJiAkcm93LT50b3RhbCA+IDApIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKiogUFJPRFVDVC1SRUxBVEVEIE1FVEhPRFMgKiovCgkKCXB1YmxpYyBmdW5jdGlvbiBhZGRQcm9kdWN0KCRwcm9kdWN0SWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSR0aGlzLT5yZW1vdmVQcm9kdWN0KCRwcm9kdWN0SWQpOwoJCSRzcWwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMX1BST0RVQ1RTLiIgc2V0IAoJCQkJCW1lbWJlcnNoaXBfaWQ9J3skdGhpcy0+aWR9JywgCgkJCQkJcHJvZHVjdF9pZD0neyRwcm9kdWN0SWR9JwoJCQkJCSI7CgkJJHJlcyA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQlpZiAoJHJlcyAhPT0gZmFsc2UpCgkJewoJCQlpZiAoIWluX2FycmF5KCRwcm9kdWN0SWQsJHRoaXMtPnByb2R1Y3RJZHMpKQoJCQl7CgkJCQkkdGhpcy0+cHJvZHVjdElkc1tdID0gJHByb2R1Y3RJZDsKCQkJfQoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZVByb2R1Y3QoJHByb2R1Y3RJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxfUFJPRFVDVFMuIiB3aGVyZSBtZW1iZXJzaGlwX2lkPSd7JHRoaXMtPmlkfScgQU5EIHByb2R1Y3RfaWQ9J3skcHJvZHVjdElkfSc7IjsKCQkkd3BkYi0+cXVlcnkoJHNxbCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcmVtb3ZlUHJvZHVjdHMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTF9QUk9EVUNUUy4iIHdoZXJlIG1lbWJlcnNoaXBfaWQ9J3skdGhpcy0+aWR9JyI7CgkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldEFzc29jaWF0ZWRQcm9kdWN0cygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAic2VsZWN0IHByb2R1Y3RfaWQgYXMgaWQgZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxfUFJPRFVDVFMuIiBtdHAgd2hlcmUgbWVtYmVyc2hpcF9pZD0neyR0aGlzLT5pZH0nICI7CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkKCQkkcHJvZHVjdHMgPSBhcnJheSgpOwoJCWlmKGlzX2FycmF5KCRyb3dzKSl7CgkJCWZvcmVhY2goJHJvd3MgYXMgJHByb2R1Y3QpCgkJCXsKCQkJCSRwcm9kdWN0c1skcHJvZHVjdC0+aWRdID0gJHByb2R1Y3QtPmlkOwoJCQl9CgkJfQoJCSR0aGlzLT5zZXRQcm9kdWN0SWRzKCRwcm9kdWN0cyk7Cgl9CgkKCQoJLyoqIENBVEVHT1JZLVJFTEFURUQgTUVUSE9EUyAqKi8KCQoJcHVibGljIGZ1bmN0aW9uIGFkZENhdGVnb3J5KCRjYXRlZ29yeUlkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkdGhpcy0+cmVtb3ZlUHJvZHVjdCgkY2F0ZWdvcnlJZCk7CgkJJHNxbCA9ICJpbnNlcnQgaW50byAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxfQ0FURUdPUklFUy4iIHNldCAKCQkJCQltZW1iZXJzaGlwX2xldmVsX2lkPSd7JHRoaXMtPmlkfScsIAoJCQkJCWNhdGVnb3J5X2lkPSd7JGNhdGVnb3J5SWR9JwoJCQkJCSI7CgkJJHJlcyA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQlpZiAoJHJlcyAhPT0gZmFsc2UpCgkJewoJCQlpZiAoIWluX2FycmF5KCRjYXRlZ29yeUlkLCAkdGhpcy0+Y2F0ZWdvcnlJZHMpKQoJCQl7CgkJCQkkdGhpcy0+Y2F0ZWdvcnlJZHNbXSA9ICRjYXRlZ29yeUlkOwoJCQl9CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQ2F0ZWdvcnkoJGNhdGVnb3J5SWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMX0NBVEVHT1JJRVMuIiB3aGVyZSBtZW1iZXJzaGlwX2xldmVsX2lkPSd7JHRoaXMtPmlkfScgQU5EIGNhdGVnb3J5X2lkPSd7JGNhdGVnb3J5SWR9JzsiOwoJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiByZW1vdmVDYXRlZ29yaWVzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxfQ0FURUdPUklFUy4iIHdoZXJlIG1lbWJlcnNoaXBfbGV2ZWxfaWQ9J3skdGhpcy0+aWR9JyI7CgkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldEFzc29jaWF0ZWRDYXRlZ29yaWVzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJzZWxlY3QgY2F0ZWdvcnlfaWQgYXMgaWQgZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxfQ0FURUdPUklFUy4iIG10cCB3aGVyZSBtZW1iZXJzaGlwX2xldmVsX2lkPSd7JHRoaXMtPmlkfScgIjsKCQkKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQoJCSRjYXRlZ29yaWVzID0gYXJyYXkoKTsKCQlpZihpc19hcnJheSgkcm93cykpewoJCQlmb3JlYWNoKCRyb3dzIGFzICRjYXRlZ29yeSkKCQkJewoJCQkJJGNhdGVnb3JpZXNbJGNhdGVnb3J5LT5pZF0gPSAkY2F0ZWdvcnktPmlkOwoJCQl9CgkJfQoJCSR0aGlzLT5zZXRDYXRlZ29yeUlkcygkY2F0ZWdvcmllcyk7Cgl9CgkKCQoJLyoqIEJVTkRMRS1SRUxBVEVEIE1FVEhPRFMgKiovCgkKCXByaXZhdGUgZnVuY3Rpb24gYWRkQnVuZGxlcygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSR0aGlzLT5idW5kbGVzID0gKCFpc19hcnJheSgkdGhpcy0+YnVuZGxlcykpID8gYXJyYXkoJHRoaXMtPmJ1bmRsZXMpIDogJHRoaXMtPmJ1bmRsZXM7CgkJCgkJJHRoaXMtPnJlbW92ZUJ1bmRsZXMoKTsKCQkKCQlpZighZW1wdHkoJHRoaXMtPmJ1bmRsZXMpICYmIGNvdW50KCR0aGlzLT5idW5kbGVzKSA+IDApIAoJCXsKCQkJZm9yZWFjaCgkdGhpcy0+YnVuZGxlcyBhcyAkYnVuZGxlSWQpCgkJCXsKCQkJCWlmKCRidW5kbGVJZCAhPSAibnVsbCIpIAoJCQkJewoJCQkJCSRzcWwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9BUFBMSUVEX0JVTkRMRVMuIiBzZXQgIiAuCgkJCQkJCQkiCWFjY2Vzc190eXBlPSciLk1NX0FwcGxpZWRCdW5kbGU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQLiInLCIgLgoJCQkJCQkJIglidW5kbGVfaWQ9J3skYnVuZGxlSWR9JywiIC4KCQkJCQkJCSIJYWNjZXNzX3R5cGVfaWQ9J3skdGhpcy0+aWR9JyAiOwoJCQkJCQoJCQkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCX0KCQkJfQoJCX0KCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiByZW1vdmVCdW5kbGVzKCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKGlzc2V0KCR0aGlzLT5pZCkpIAoJCXsKCQkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUy4iIHdoZXJlIGFjY2Vzc190eXBlPSciLk1NX0FwcGxpZWRCdW5kbGU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQLiInIGFuZCBhY2Nlc3NfdHlwZV9pZD0neyR0aGlzLT5pZH0nIjsKCQkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEJ1bmRsZXMoKQoJewoJCSRidW5kbGVzID0gYXJyYXkoKTsKCQkKCQlpZigkdGhpcy0+YnVuZGxlcyA9PSAiIikKCQl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJCgkJCSRzcWwgPSAic2VsZWN0IGEuKiBmcm9tICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgYXQsICIuTU1fVEFCTEVfQlVORExFUy4iIGEgd2hlcmUgYXQuYWNjZXNzX3R5cGU9JyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVAuIicgYW5kIGF0LmFjY2Vzc190eXBlX2lkPSd7JHRoaXMtPmlkfScgYW5kIGF0LmJ1bmRsZV9pZD1hLmlkIjsKCQkJCQoJCQkkcm93cz0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQkKCQkJaWYoISRyb3dzKSB7CgkJCQlyZXR1cm4gYXJyYXkoKTsKCQkJfQoJCQkKCQkJaWYoY291bnQoJHJvd3MpID4gMCkKCQkJewoJCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KSAKCQkJCXsKCQkJCQkkYnVuZGxlc1skcm93LT5pZF0gPSAkcm93LT5uYW1lOwoJCQkJfQoJCQl9CgkJCQoJCQkkdGhpcy0+YnVuZGxlcyA9ICRidW5kbGVzOwoJCX0KCQkKCQlyZXR1cm4gJGJ1bmRsZXM7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZW5kV2VsY29tZUVtYWlsKCR1c2VySWQpCgl7ICAgCgkJaWYoJHRoaXMtPmRvU2VuZFdlbGNvbWVFbWFpbCgpKQoJCXsKCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdXNlcklkKTsKCQkJJGVtcGxveWVlID0gbmV3IE1NX0VtcGxveWVlKCR0aGlzLT5lbWFpbEZyb21JZCk7CgkJCSRjb250ZXh0ID0gbmV3IE1NX0NvbnRleHQoJHVzZXIsICRlbXBsb3llZSk7CgkJCQoJCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJJGVtYWlsLT5zZXRTdWJqZWN0KCR0aGlzLT5lbWFpbFN1YmplY3QpOwoJCQkkZW1haWwtPnNldEJvZHkoJHRoaXMtPmVtYWlsQm9keSk7CgkJCSRlbWFpbC0+c2V0VG9OYW1lKCR1c2VyLT5nZXRGaXJzdE5hbWUoKSk7CgkJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCR1c2VyLT5nZXRFbWFpbCgpKTsKCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkkZW1haWwtPnNldEZyb21BZGRyZXNzKCRlbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCQoJCQkkcmVzcG9uc2UgPSAkZW1haWwtPnNlbmQoKTsKCQkJCgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIldlbGNvbWUgZW1haWwgbm90IGVuYWJsZWQgZm9yIHRoaXMgbWVtYmVyc2hpcCBsZXZlbCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBdmFpbGFibGVNZW1iZXJzaGlwTGV2ZWxzKCRjb3JlX3BhZ2VfdHlwZV9pZCwgJHBhZ2VfaWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLiIgbXQgd2hlcmUgbXQuaWQgTk9UIElOIChzZWxlY3QgcmVmX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgY3Agd2hlcmUgY29yZV9wYWdlX3R5cGVfaWQ9J3skY29yZV9wYWdlX3R5cGVfaWR9JyBhbmQgcmVmX3R5cGU9J21lbWJlcl90eXBlJyBhbmQgcGFnZV9pZCE9J3skcGFnZV9pZH0nIGFuZCByZWZfaWQ+MCkiOwoJCXJldHVybiAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7Cgl9CgkKCQoJLyoqIEdFVFRFUlMvU0VUVEVSUyAqKi8KCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlZmVyZW5jZUtleSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJaWYoZW1wdHkoJHRoaXMtPnJlZmVyZW5jZUtleSkpCgkJewoJCQkvLyBnZW5lcmF0ZSBhIHJhbmRvbSA2IGFscGhudW1lcmljIHN0cmluZwoJCQlkbyB7CgkJCQkkbmV3S2V5ID0gIm0iOwoJCQkJZm9yICgkaT0wOyAkaTw1OyAkaSsrKQoJCQkJewoJCQkJCSR0eXBlID0gcmFuZCgxLDMpOwoJCQkJCXN3aXRjaCAoJHR5cGUpIAoJCQkJCXsKCQkJCQkJY2FzZSAxOiAvL251bWVyaWMKCQkJCQkJCSRuZXdLZXkuPWNocihyYW5kKDQ4LDU3KSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAyOiAvL3VwcGVyIGFscGhhCgkJCQkJCQkkbmV3S2V5Lj1jaHIocmFuZCg2NSw5MCkpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCWNhc2UgMzogLy9sb3dlciBhbHBoYQoJCQkJCQlkZWZhdWx0OgoJCQkJCQkJJG5ld0tleS49Y2hyKHJhbmQoOTcsMTIyKSk7CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCQkJCgkJCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkd3BkYi0+cHJlcGFyZSgic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLiIgd2hlcmUgcmVmZXJlbmNlX2tleT0nJXMnIiwgJG5ld0tleSkpOwoJCQl9IHdoaWxlIChjb3VudCgkcmVzdWx0cykgPiAwKTsgLy9pdGVyYXRlIHdoaWxlIGtleSBpcyBub3QgdW5pcXVlLgoJCQkJCQoJCQkkdGhpcy0+cmVmZXJlbmNlS2V5ID0gJG5ld0tleTsKCQkJCQkKCQkJLy8gc2F2ZSByZWZlcmVuY2Uga2V5CgkJCWlmKCR0aGlzLT5pZCA+IDApCgkJCXsKCQkJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCJpZCIgPT4gJHRoaXMtPmlkKTsKCQkJCSRkYXRhID0gYXJyYXkoInJlZmVyZW5jZV9rZXkiPT4kdGhpcy0+cmVmZXJlbmNlS2V5KTsKCQkJCSRyZXN1bHQgPSAkd3BkYi0+dXBkYXRlKE1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLCAkZGF0YSwgJHdoZXJlQ2xhdXNlKTsKCQkJCQkKCQkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHNhdmluZyBtZW1iZXJzaGlwIGxldmVsIHJlZmVyZW5jZSBrZXk6ICIuJHdwZGItPmxhc3RfZXJyb3IsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJfQoJCgkJcmV0dXJuICR0aGlzLT5yZWZlcmVuY2VLZXk7Cgl9CgkJCQkKCXB1YmxpYyBmdW5jdGlvbiBzZXRXZWxjb21lRW1haWxFbmFibGVkKCRzdHIpIAoJewoJCSR0aGlzLT53ZWxjb21lRW1haWxFbmFibGVkID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRvU2VuZFdlbGNvbWVFbWFpbCgpCgl7CgkJcmV0dXJuICgkdGhpcy0+d2VsY29tZUVtYWlsRW5hYmxlZCA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TmFtZSgkc3RyKSAKCXsKCQkkdGhpcy0+bmFtZSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXROYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm5hbWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRXUFJvbGUoJHN0cikgCgl7CgkJJHRoaXMtPndwUm9sZSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRXUFJvbGUoKQoJewoJCXJldHVybiAkdGhpcy0+d3BSb2xlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0SXNGcmVlKCRzdHIpIAoJewoJCSR0aGlzLT5pc0ZyZWVGbGFnID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGlzRnJlZSgpCgl7CgkJaWYoJHRoaXMtPmlzRnJlZUZsYWcgPT0gIjEiKSAKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRvZXNFeHBpcmUoKQoJewoJCWlmKCR0aGlzLT5leHBpcmVzID09ICIxIikKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFeHBpcmVzKCRzdHIpCgl7CgkJJHRoaXMtPmV4cGlyZXMgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RXhwaXJlcygpCgl7CgkJcmV0dXJuICR0aGlzLT5leHBpcmVzOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldElzRGVmYXVsdCgkc3RyKSAKCXsKCQkkdGhpcy0+aXNEZWZhdWx0RmxhZyA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpc0RlZmF1bHQoKQoJewoJCXJldHVybiAkdGhpcy0+aXNEZWZhdWx0RmxhZzsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEV4cGlyZVBlcmlvZCgkc3RyKSAKCXsKCQkkdGhpcy0+ZXhwaXJlUGVyaW9kID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEV4cGlyZVBlcmlvZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5leHBpcmVQZXJpb2Q7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFeHBpcmVBbW91bnQoJHN0cikgCgl7CgkJJHRoaXMtPmV4cGlyZUFtb3VudCA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRFeHBpcmVBbW91bnQoKQoJewoJCXJldHVybiAkdGhpcy0+ZXhwaXJlQW1vdW50OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RXhwaXJhdGlvbkRhdGUoJHN0YXJ0RGF0ZSkKCXsKCQkkZXhwaXJhdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkKCQlpZigkdGhpcy0+ZG9lc0V4cGlyZSgpKQoJCXsKCQkJJGFtb3VudCA9ICR0aGlzLT5nZXRFeHBpcmVBbW91bnQoKTsKCQkJJHBlcmlvZCA9ICR0aGlzLT5nZXRFeHBpcmVQZXJpb2QoKTsKCQkJCgkJCXN3aXRjaCgkcGVyaW9kKQoJCQl7CgkJCQljYXNlICJkYXlzIjoKCQkJCQkkZXhwaXJhdGlvbkRhdGUgPSBEYXRlKCJZLW0tZCBIOmk6cyIsIHN0cnRvdGltZSgkc3RhcnREYXRlLiIgKyAiLiRhbW91bnQuIiBkYXkiKSk7CgkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJY2FzZSAid2Vla3MiOgoJCQkJCSRleHBpcmF0aW9uRGF0ZSA9IERhdGUoIlktbS1kIEg6aTpzIiwgc3RydG90aW1lKCRzdGFydERhdGUuIiArICIuJGFtb3VudC4iIHdlZWsiKSk7CgkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJY2FzZSAibW9udGhzIjoKCQkJCQkkZXhwaXJhdGlvbkRhdGUgPSBEYXRlKCJZLW0tZCBIOmk6cyIsIHN0cnRvdGltZSgkc3RhcnREYXRlLiIgKyAiLiRhbW91bnQuIiBtb250aCIpKTsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gJGV4cGlyYXRpb25EYXRlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RGVzY3JpcHRpb24oJHN0cikgCgl7CgkJJHRoaXMtPmRlc2NyaXB0aW9uID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmRlc2NyaXB0aW9uOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UHJvZHVjdElkcygkcHJvZHVjdElkcykgCgl7CgkJaWYoaXNfYXJyYXkoJHByb2R1Y3RJZHMpKQoJCXsJCgkJCSR0aGlzLT5sYXN0UHJvZHVjdElkcyA9ICR0aGlzLT5wcm9kdWN0SWRzOwoJCQkkdGhpcy0+cHJvZHVjdElkcyA9ICRwcm9kdWN0SWRzOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3RJZHMoKQoJewoJCXJldHVybiAkdGhpcy0+cHJvZHVjdElkczsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldENhdGVnb3J5SWRzKCRjYXRlZ29yeUlkcykgCgl7CgkJaWYoaXNfYXJyYXkoJGNhdGVnb3J5SWRzKSkKCQl7CQoJCQkkdGhpcy0+Y2F0ZWdvcnlJZHMgPSAkY2F0ZWdvcnlJZHM7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlJZHMoKQoJewoJCXJldHVybiAkdGhpcy0+Y2F0ZWdvcnlJZHM7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRTdGF0dXMoJHN0cikgCgl7CgkJJHRoaXMtPnN0YXR1cyA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRTdGF0dXMoKQoJewoJCXJldHVybiAkdGhpcy0+c3RhdHVzOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNBY3RpdmUoKQoJewoJCXJldHVybiAoJHRoaXMtPnN0YXR1cyA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGVmYXVsdFByb2R1Y3QoKQoJewoJCXJldHVybiAkdGhpcy0+ZGVmYXVsdFByb2R1Y3RJZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldERlZmF1bHRQcm9kdWN0KCRzdHIpIAoJewoJCSR0aGlzLT5kZWZhdWx0UHJvZHVjdElkID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1c05hbWUoKQoJewoJCXJldHVybiBNTV9TdGF0dXM6OmdldE5hbWUoJHRoaXMtPnN0YXR1cyk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFbWFpbFN1YmplY3QoJHN0cikgCgl7CgkJJHRoaXMtPmVtYWlsU3ViamVjdCA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRFbWFpbFN1YmplY3QoKQoJewoJCWlmKCFlbXB0eSgkdGhpcy0+ZW1haWxTdWJqZWN0KSkKCQl7CgkJCXJldHVybiAkdGhpcy0+ZW1haWxTdWJqZWN0OwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gTU1fTWVtYmVyc2hpcExldmVsOjokREZMVF9FTUFJTF9TVUJKRUNUOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldEVtYWlsQm9keSgkc3RyKSAKCXsKCQkkdGhpcy0+ZW1haWxCb2R5ID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEVtYWlsQm9keSgpCgl7CgkJaWYoIWVtcHR5KCR0aGlzLT5lbWFpbEJvZHkpKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5lbWFpbEJvZHk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBNTV9NZW1iZXJzaGlwTGV2ZWw6OiRERkxUX0VNQUlMX0JPRFk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RW1haWxGcm9tSWQoJHN0cikgCgl7CgkJJHRoaXMtPmVtYWlsRnJvbUlkID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEVtYWlsRnJvbUlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmVtYWlsRnJvbUlkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0QnVuZGxlcygkc3RyKSAKCXsKCQkkdGhpcy0+YnVuZGxlcyA9ICRzdHI7Cgl9CgkKCQoJLyoqIFVUSUxJVEVTICoqLwoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGRlZmF1bHQgbWVtYmVyc2hpcCBsZXZlbAoJICoKCSAqIEByZXR1cm4gTU1fTWVtYmVyc2hpcExldmVsIHRoZSBkZWZhdWx0IG1lbWJlcnNoaXAgbGV2ZWwKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXREZWZhdWx0TWVtYmVyc2hpcCgpCgl7CgkJJGRmbHRNZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgpOwoJCgkJZ2xvYmFsICR3cGRiOwoJCgkJJHNxbCA9ICJTRUxFQ1QgaWQgRlJPTSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLiIgV0hFUkUgaXNfZGVmYXVsdD0nMScgTElNSVQgMTsiOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQoJCWlmKCRyZXN1bHQpCgkJewoJCQkkZGZsdE1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRyZXN1bHQtPmlkKTsKCQl9CgkKCQlyZXR1cm4gJGRmbHRNZW1iZXJzaGlwOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBMZXZlbFBvc3RBY2Nlc3MoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkY2FjaGVLZXkgPSBzZWxmOjokR0VUX01FTUJFUlNISVBfTEVWRUxfUE9TVF9BQ0NFU1NfQ0FDSEVfS0VZOwoJCSRjYWNoZWQgPSBmYWxzZTsKCQkkdHlwZXMgPSBNTV9PYmplY3RDYWNoZTo6Z2V0KCRjYWNoZUtleSwkY2FjaGVkKTsKCQkJCgkJaWYgKCEkY2FjaGVkIHx8ICFpc19hcnJheSgkdHlwZXMpKQoJCXsKCSAJCSRzcWwgPSAiU0VMRUNUIG10LmlkLCBtdC5uYW1lIEZST00gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIG10LCAiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHBhIAoJIAkJCQkJV0hFUkUgCgkgCQkJCQkJbXQuc3RhdHVzID0nMScgYW5kIAoJIAkJCQkJCW10LmlkID0gcGEuYWNjZXNzX2lkIGFuZCAKCSAJCQkJCQlwYS5hY2Nlc3NfdHlwZT0nbWVtYmVyX3R5cGUnCgkgCQkJCQkJIjsKCSAKCSAJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJIAkJCgkgCQkkdHlwZXMgPSBhcnJheSgpOwoJIAkJaWYoJHJvd3M9PT1mYWxzZSkKCSAJCXsKCSAJCQlyZXR1cm4gJHR5cGVzOwoJIAkJfQoJIAkJaWYoJHJvd3MpIAoJIAkJewoJCSAJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQkJCXsKCQkJCQkkdHlwZXNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQkJCX0KCSAJCX0KIAkJCU1NX09iamVjdENhY2hlOjpzZXQoc2VsZjo6JEdFVF9NRU1CRVJTSElQX0xFVkVMX1BPU1RfQUNDRVNTX0NBQ0hFX0tFWSwkdHlwZXMpOwoJCX0KIAkJCiAJCXJldHVybiAkdHlwZXM7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TWVtYmVyc2hpcExldmVsc0xpc3QoJGFjdGl2ZVN0YXR1c09ubHk9ZmFsc2UsICRmaWx0ZXJCeVN1YlR5cGU9IiIpCgl7CgkJZ2xvYmFsICR3cGRiOwogCQlnbG9iYWwgJGN1cnJlbnRfdXNlcjsKIAkJCiAJCSRjYWNoZUtleSA9IHNlbGY6OiRHRVRfTUVNQkVSU0hJUF9MRVZFTFNfQ0FDSEVfS0VZLiJ8eyRhY3RpdmVTdGF0dXNPbmx5fXwiLihpc3NldCgkY3VycmVudF91c2VyLT5JRCk/JGN1cnJlbnRfdXNlci0+SUQ6MCkuInx7JGZpbHRlckJ5U3ViVHlwZX0iOwogCQkkY2FjaGVkID0gZmFsc2U7CiAJCSR0eXBlcyA9IE1NX09iamVjdENhY2hlOjpnZXQoJGNhY2hlS2V5LCRjYWNoZWQpOwogCQkKIAkJaWYgKCEkY2FjaGVkIHx8ICFpc19hcnJheSgkdHlwZXMpKQogCQl7CgkgCQkkdHlwZXMgPSBhcnJheSgpOwoJIAkJJHdoZXJlU3FsID0gYXJyYXkoKTsKCSAJCQoJIAkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFM7CgkgCQkKCSAJCWlmKCRhY3RpdmVTdGF0dXNPbmx5KSAKCSAJCXsKCSAJCQlhcnJheV9wdXNoKCR3aGVyZVNxbCwgInN0YXR1cyA9JzEnIik7CgkgCQl9CgkgCQkKCSAJCWlmKCRmaWx0ZXJCeVN1YlR5cGUgPT0gc2VsZjo6JFNVQl9UWVBFX0ZSRUUpIAoJIAkJewoJIAkJCWFycmF5X3B1c2goJHdoZXJlU3FsLCAiaXNfZnJlZSA9ICcxJyIpOwoJIAkJfQoJIAkJZWxzZSBpZigkZmlsdGVyQnlTdWJUeXBlID09IHNlbGY6OiRTVUJfVFlQRV9QQUlEKSAKCSAJCXsKCSAJCQlhcnJheV9wdXNoKCR3aGVyZVNxbCwgImlzX2ZyZWUgIT0gJzEnIik7CgkgCQl9CgkgCQkKCSAJCWlmKGNvdW50KCR3aGVyZVNxbCkgPiAwKQoJIAkJewoJIAkJCSRzcWwgLj0gIiBXSEVSRSAiLmpvaW4oIiBBTkQgIiwgJHdoZXJlU3FsKTsKCSAJCX0KCSAJCQoJIAkJJHNxbCAuPSAiIG9yZGVyIGJ5IG5hbWUgYXNjICI7CgkgCQkKCSAJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJIAkJCgkgCQlpZigkcm93cz09PWZhbHNlKQoJIAkJewoJIAkJCXJldHVybiAkdHlwZXM7CgkgCQl9CgkgCQkKCSAJCWlmKCRyb3dzKSAKCSAJCXsKCSAJCQlmb3JlYWNoKCRyb3dzIGFzICRyb3cpCgkgCQkJewoJIAkJCQkkdHlwZXNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCSAJCQl9CgkgCQkJCgkgCQkJLy8gZGV0ZXJtaW5lIGlmIGxpc3Qgc2hvdWxkIGJlIGZpbHRlcmVkIGZvciB0aGUgY3VycmVudCBlbXBsb3llZQoJIAkJCWlmKGlzX2FkbWluKCkgJiYgaXNzZXQoJGN1cnJlbnRfdXNlci0+SUQpKQoJIAkJCXsKCSAJCQkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmZpbmRCeVVzZXJJZCgkY3VycmVudF91c2VyLT5JRCk7CgkgCQkJCWlmKCRlbXBsb3llZS0+aXNWYWxpZCgpKQoJIAkJCQl7CgkgCQkJCQkkZmlsdGVyZWRMaXN0ID0gYXJyYXkoKTsKCSAJCQkKCSAJCQkJCWZvcmVhY2goJHR5cGVzIGFzICRpZD0+JG5hbWUpCgkgCQkJCQl7CgkgCQkJCQkJaWYoJGVtcGxveWVlLT5oYXNBY2Nlc3MoTU1fRW1wbG95ZWU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQLCAkaWQpKQoJIAkJCQkJCXsKCSAJCQkJCQkJJGZpbHRlcmVkTGlzdFskaWRdID0gJG5hbWU7CgkgCQkJCQkJfQoJIAkJCQkJfQoJIAkJCQoJIAkJCQkJJHR5cGVzID0gJGZpbHRlcmVkTGlzdDsKCSAJCQkJfQoJIAkJCX0KCSAJCX0KCSAJCU1NX09iamVjdENhY2hlOjpzZXQoJGNhY2hlS2V5LCAkdHlwZXMpOwogCQl9CiAJCQogCQlyZXR1cm4gJHR5cGVzOwoJfQp9Cg==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(166, 'chargifyservice', 'LyoqCioKKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQoqIChjKSBNZW1iZXJtb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoqIAoqIE1NX0NoYXJnaWZ5U2VydmljZSBpcyB0aGUgcGF5bWVudCBzZXJ2aWNlIHRoYXQgcHJvY2Vzc2VzIGNoYXJnZXMgZm9yIENoYXJnaWZ5ICh3d3cuY2hhcmdpZnkuY29tKQoqIEJlY2F1c2UgQ2hhcmdpZnkgaXMgZm9jdXNlZCBvbiBwcm92aWRpbmcgcmVjdXJyaW5nIGJpbGxpbmcsIHNvbW1lIGNhcGFiaWxpdGllcyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGlzIHNlcnZpY2UsIAoqIHNwZWNpZmljYWxseSBwdXJjaGFzaW5nIG11bHRpcGxlIHF1YW50aXRpZXMgb2YgYSBzaW5nbGUgcHJvZHVjdCBhbmQgcHVyY2hhc2luZyBtdWx0aXBsZSBwcm9kdWN0cyBpbiBnZW5lcmFsLiBUaGUgbGF0dGVyIGlzIGR1ZSB0byB0aGUgYXBpCiogYWNjZXB0aW5nIGVhY2ggc3Vic2NyaXB0aW9uIHJlcXVlc3QgYXMgYSBzZWNvbmQgY2FsbCwgd2hpY2ggY3JlYXRlcyBhIHNjZW5hcmlvIHdoZXJlIHRpbWVvdXRzIGFyZSBwb3RlbnRpYWxseSBwb3NzaWJsZQoqIAoqLwpjbGFzcyBNTV9DaGFyZ2lmeVNlcnZpY2UgZXh0ZW5kcyBNTV9QYXltZW50U2VydmljZSBpbXBsZW1lbnRzIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcgp7CgoJcHJvdGVjdGVkICR0b2tlbiA9ICJDSEFSR0lGWSI7CgkKCXByb3RlY3RlZCAkYXBpX2tleSA9ICIiOwoJcHJvdGVjdGVkICRzdWJkb21haW4gPSAiIjsKCQoJcHJvdGVjdGVkICRwcm9kdWN0RmFtaWx5SWQgPSAiIjsKCQoJcHJvdGVjdGVkICRzaGFyZWRLZXkgPSAiIjsKCQoJcHJpdmF0ZSAkcHJvZHVjdENhY2hlID0gYXJyYXkoKTsKCQoJLy9zdGF0ZXMgdXNlZCBpbiB0aGUgc3Vic2NyaXB0aW9uIHdlYmhvb2sgcGF5bG9hZHMKCWNvbnN0IEFDVElWRV9TVEFURSAgID0gImFjdGl2ZSI7Cgljb25zdCBQQVNUX0RVRV9TVEFURSA9ICJwYXN0X2R1ZSI7CgkKCXB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsKCkKCXsKCQkvL1RPRE86IFJFRkFDVE9SOiBJTkRFWCwgSU5ERVgsIElOREVYIQoJCQoJCXBhcmVudDo6aW5zdGFsbCgpOwoJCSRzcWwgPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQ0hBUkdJRllfUFJPRFVDVF9MSU5LUy4iIChcbiIuCgkJCQkJImNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZSBWQVJDSEFSKDI1NSkgQ09MTEFURSB1dGY4X2JpbiBOT1QgTlVMTCxcbiIuCgkJCQkJIm1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkJIlVOSVFVRSBLRVkgY2hhcmdpZnlfcHJvZHVjdF9hcGlfaGFuZGxlIChjaGFyZ2lmeV9wcm9kdWN0X2FwaV9oYW5kbGUpLFxuIi4KCQkJCQkiVU5JUVVFIEtFWSBtZW1iZXJtb3VzZV9wcm9kdWN0X2lkIChtZW1iZXJtb3VzZV9wcm9kdWN0X2lkKVxuIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpOyI7CgkJJHNxbCAuPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQ0hBUkdJRllfQ1VTVE9NRVJfTElOS1MuIiAoXG4iLgoJCQkJCSJjaGFyZ2lmeV9jdXN0b21lcl9pZCBWQVJDSEFSKDI1NSkgQ09MTEFURSB1dGY4X2JpbiBOT1QgTlVMTCxcbiIuCgkJCQkJIm1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJCSJVTklRVUUgS0VZIGNoYXJnaWZ5X2N1c3RvbWVyX2lkIChjaGFyZ2lmeV9jdXN0b21lcl9pZCksXG4iLgoJCQkJCSJVTklRVUUgS0VZIG1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIChtZW1iZXJtb3VzZV9jdXN0b21lcl9pZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTsiOwoJCSRzcWwgLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0NIQVJHSUZZX0NPVVBPTl9MSU5LUy4iIChcbiIuCgkJCQkJImNoYXJnaWZ5X2NvdXBvbl9pZCBWQVJDSEFSKDI1NSkgQ09MTEFURSB1dGY4X2JpbiBOT1QgTlVMTCxcbiIuCgkJCQkJIm1lbWJlcm1vdXNlX2NvdXBvbl9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCQkiVU5JUVVFIEtFWSBjaGFyZ2lmeV9jb3Vwb25faWQgKGNoYXJnaWZ5X2NvdXBvbl9pZCksXG4iLgoJCQkJCSJVTklRVUUgS0VZIG1lbWJlcm1vdXNlX2NvdXBvbl9pZCAobWVtYmVybW91c2VfY291cG9uX2lkKVxuIi4KCQkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTsiOwoJCSRzcWwgLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX0NIQVJHSUZZX1NVQlNDUklQVElPTl9MSU5LUy4iIChcbiIuCgkJCQkiY2hhcmdpZnlfc3Vic2NyaXB0aW9uX2lkIFZBUkNIQVIoMjU1KSBDT0xMQVRFIHV0ZjhfYmluIE5PVCBOVUxMLFxuIi4KCQkJCSJtZW1iZXJtb3VzZV9vcmRlcl9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJtZW1iZXJtb3VzZV9vcmRlcl9pdGVtX2lkIGJpZ2ludCgyMCksXG4iLgoJCQkJIlVOSVFVRSBLRVkgY2hhcmdpZnlfc3Vic2NyaXB0aW9uX2lkIChjaGFyZ2lmeV9zdWJzY3JpcHRpb25faWQpIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpOyI7CgkJJHNxbCAuPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQ0hBUkdJRllfTk9USUZJQ0FUSU9OUy4iIChcbiIuCgkJCQkJImlkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJCSJ3ZWJob29rX2lkIFZBUkNIQVIoMjU1KSBOT1QgTlVMTCxcbiIuCgkJCQkJImV2ZW50X3R5cGUgdmFyY2hhcigzMikgTk9UIE5VTEwsXG4iLgoJCQkJCSJQUklNQVJZIEtFWSAgKGlkKVxuIi4KCQkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTsiOwoJCWRiRGVsdGEoJHNxbCk7Cgl9CgkKCS8qKgoJICogVXNlZCB0byByZXBvcnQgd2hhdCBmZWF0dXJlcyB0aGUgQ2hhcmdpZnkgU2VydmljZSBzdXBwb3J0cwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6c3VwcG9ydHNGZWF0dXJlKCkKCSAqCgkgKiBAcGFyYW0gU3RyaW5nICRmZWF0dXJlQ29uc3QgYSBjb25zdCBhcyBkZWZpbmVkIGluIE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXMKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIHN1cHBvcnRlZCwgZmFsc2UgaWYgbm90IHN1cHBvcnRlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gc3VwcG9ydHNGZWF0dXJlKCRmZWF0dXJlQ29uc3QpCgl7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6T05TSVRFX1NFUlZJQ0U7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6Q0FSRF9PTl9GSUxFOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok1PRElGWV9SRUJJTExfREFURTsKCQlyZXR1cm4gaW5fYXJyYXkoJGZlYXR1cmVDb25zdCwkc3VwcG9ydGVkLHRydWUpOwoJfQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGh0bWwgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHBheW1lbnQgbWV0aG9kIHNldHRpbmdzIHNjcmVlbiBmb3IgY29uZmlndXJpbmcgQ2hhcmdpZnkKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmRpc3BsYXlDb25maWdPcHRpb25zKCkKCSAqCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZyBodG1sCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgl7CgkJJGNvbmZpZ19vcHRpb25zID0gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCJ7JHRoaXMtPmdldFRlbXBsYXRlRGlyKCl9L2NoYXJnaWZ5X2NvbmZpZy5odG1sLnBocCIsJHRoaXMpOwoJCXJldHVybiAkY29uZmlnX29wdGlvbnM7Cgl9CgkKCQoJLyoqCgkgKiBWYWxpZGF0ZXMgYW5kIGNvbmZpZ3VyZXMgdGhlIG9iamVjdCB3aXRoIHRoZSBzZXR0aW5ncyBpbmZvcm1hdGlvbiBnZW5lcmF0ZWQgYnkgc3VibWlzc2lvbiBvZiB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NDb25maWdPcHRpb25zKCkKCSAqCgkgKiBAcGFyYW0gJHBvc3QgQW4gYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSBwb3N0ZWQgZnJvbSB0aGUgcGF5bWVudCBtZXRob2RzIHNldHRpbmdzIHNjcmVlbgoJICogQHJldHVybiBBbiBNTV9SZXNwb25zZSBvZiB0eXBlIE1NX1Jlc3BvbnNlOjpTVUNDRVNTIGluZGljYXRpbmcgc3VjY2Vzc2Z1bCB2YWxpZGF0aW9uIGFuZCBhc3NpZ21lbnQuIE9uIGVycm9yLCB0aGUgdHlwZSB3aWxsIGJlIE1NX1Jlc3BvbnNlOjpFUlJPUiBhbmQgdGhlIG1lc3NhZ2Ugd2lsbCBjb250YWluIHRoZSBlcnJvciBtZXNzYWdlcwoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc0NvbmZpZ09wdGlvbnMoJHBvc3QpCgl7CgkJJGFjdGl2ZSA9IChpc3NldCgkcG9zdFsnb25zaXRlX3BheW1lbnRfc2VydmljZSddKSAmJiAoc3RydG9sb3dlcigkdGhpcy0+Z2V0VG9rZW4oKSkgPT0gJHBvc3RbJ29uc2l0ZV9wYXltZW50X3NlcnZpY2UnXSkpOwoJCSR0aGlzLT5zZXRBY3RpdmUoJGFjdGl2ZSk7CgkKCQlpZiAoJGFjdGl2ZSkKCQl7CgkJCSR0aGlzLT5pbnN0YWxsKCk7CgkJCSRjb25maWcgPSAkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2NoYXJnaWZ5J107CgkJCSRjaGVja19ub3RfZW1wdHkgPSBhcnJheSgnYXBpX2tleSc9PidBUEkgS2V5JywgJ3N1YmRvbWFpbic9PidTdWJkb21haW4nLCdwcm9kdWN0X2ZhbWlseSc9PidQcm9kdWN0IEZhbWlseScsJ3NoYXJlZF9rZXknPT4iU2hhcmVkIEtleSIpOwoJCQkkZW1wdHlfZXJyb3JzID0gIiI7CgkJCWZvcmVhY2ggKCRjaGVja19ub3RfZW1wdHkgYXMgJGNoZWNrPT4kZGlzcGxheU5hbWUpCgkJCXsKCQkJCWlmICghaXNzZXQoJGNvbmZpZ1skY2hlY2tdKSB8fCBlbXB0eSgkY29uZmlnWyRjaGVja10pKQoJCQkJewoJCQkJCSRlbXB0eV9lcnJvcnMgPSAiQ2hhcmdpZnk6IHBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB7JGRpc3BsYXlOYW1lfVxuIjsKCQkJCX0KCQkJfQoJCQlpZiAoJGVtcHR5X2Vycm9ycyAhPSAiIikKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZW1wdHlfZXJyb3JzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCS8vaWYgaGVyZSwgdGhhdCBtZWFucyB0aGV5IGFyZSBhbGwgb2sKCQkJJHRoaXMtPnNldEFwaUtleSgkY29uZmlnWydhcGlfa2V5J10pOwoJCQkkdGhpcy0+c2V0U3ViZG9tYWluKCRjb25maWdbJ3N1YmRvbWFpbiddKTsKCQkJJHRoaXMtPnNldFByb2R1Y3RGYW1pbHlJZCgkY29uZmlnWydwcm9kdWN0X2ZhbWlseSddKTsKCQkJJHRoaXMtPnNldFNoYXJlZEtleSgkY29uZmlnWydzaGFyZWRfa2V5J10pOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBQcm9jZXNzZXMgaW5mb3JtYXRpb24gZnJvbSB0aGUgc2V0dGluZ3Mgc2NyZWVuIHByaW9yIHRvIHRoZSBwYXltZW50IHNlcnZpY2Ugc2V0dGluZ3MgYmVpbmcgc2F2ZWQuIEFsbG93cyBmb3IgCgkgKiBkYXRhIHRvIGJlIHJldHJpZXZlZCBmcm9tIENoYXJnaWZ5IHVzaW5nIGFqYXggZHVyaW5nIHRoZSBjb25maWd1cmF0aW9uIHByb2Nlc3MKCSAqIAoJICogQHBhcmFtICRwb3N0IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIGRhdGEgcG9zdGVkIGZyb20gdGhlIHBheW1lbnQgbWV0aG9kcyBzZXR0aW5ncyBzY3JlZW4KCSAqIEByZXR1cm4gQW4gTU1fUmVzcG9uc2Ugb2YgdHlwZSBNTV9SZXNwb25zZTo6U1VDQ0VTUyBjb250YWluaW5nIGFueSByZXF1ZXN0ZWQgZGF0YSBhcyB0aGUgbWVzc2FnZSwgb3IgYSBNTV9SZXNwb25zZSBvZiB0eXBlIEVSUk9SIG9uIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NJbnRlcm1lZGlhdGVBY3Rpb24oJHBvc3QpCgl7CgkJaWYgKCghaXNzZXQoJHBvc3RbJ3BheW1lbnRfc2VydmljZSddWydjaGFyZ2lmeSddKSkgfHwgIShpc19hcnJheSgkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ2NoYXJnaWZ5J10pKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk5vIGNoYXJnaWZ5IGNvbmZpZ3VyYXRpb24gaW5mb3JtYXRpb24gc2VudCB0byBwcm9jZXNzSW50ZXJtZWRpYXRlQWN0aW9uIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGNvbmZpZyA9ICRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsnY2hhcmdpZnknXTsKCQkKCQkvL1RPRE86IFJFRkFDVE9SOiBob3cgdG8gc2FuaXR5IGNoZWNrIHRoZXNlIHZhbHVlcz8KCQlpZiAoIWVtcHR5KCRjb25maWdbJ2FwaV9rZXknXSkgJiYgIWVtcHR5KCRjb25maWdbJ3N1YmRvbWFpbiddKSkKCQl7CgkJCSR0aGlzLT5zZXRBcGlLZXkoJGNvbmZpZ1snYXBpX2tleSddKTsKCQkJJHRoaXMtPnNldFN1YmRvbWFpbigkY29uZmlnWydzdWJkb21haW4nXSk7CgkJfQoJCQoJCSRwcm9kdWN0RmFtaWxpZXNSZXNwb25zZSA9ICR0aGlzLT5nZXRQcm9kdWN0RmFtaWxpZXModHJ1ZSk7CgkJcmV0dXJuICRwcm9kdWN0RmFtaWxpZXNSZXNwb25zZTsKCX0KCQoJCgkvKioKCSAqIFByb2Nlc3NlcyBub3RpZmljYXRpb25zIGZyb20gQ2hhcmdpZnksIGN1cnJlbnRseSB1c2luZyB3ZWJob29rcwoJICogCgkgKiBXZWJob29rcyBhcmUgc2ltcGxlIFBPU1RzIG9mIENoYXJnaWZ5IG9iamVjdHMgY29udGFpbmluZyBldmVudCBhbmQgc3RhdGUgaW5mb3JtYXRpb24KCSAqIEFjY29yZGluZyB0byB0aGUgYXBpIGRvY3VtZW50YXRpb24sIHZhbGlkIGxpdmUgYW5kIHByb2JsZW0gc3Vic2NyaXB0aW9uIHN0YXRlcyBhcmUgJ3RyaWFsaW5nJywgJ2Fzc2Vzc2luZycsCgkgKiAnYWN0aXZlJywgJ3NvZnRfZmFpbHVyZScsICdwYXN0X2R1ZScsIGFuZCAndW5wYWlkJy4gVmFsaWQgZW5kLW9mLWxpZmUgc3RhdGVzIGFyZSAnY2FuY2VsZWQnLCAnc3VzcGVuZGVkJywndHJpYWxfZW5kZWQnLCBhbmQgJ2V4cGlyZWQnLiAKCSAqIEJ5IHRyYWNraW5nIHN1Y2Nlc3NmdWwgcmVuZXdhbHMgYW5kIHN1YnNjcmlwdGlvbiBzdGF0ZSBjaGFuZ2VzIGJldHdlZW4gbGl2ZS9wcm9ibGVtIGFuZCBlbmQtb2YtbGlmZSBzdGF0ZXMsIE1lbWJlck1vdXNlIGNhbiBjYXB0dXJlIGFsbCAKCSAqIG9mIHRoZSBkYXRhIGl0IG5lZWRzCgkgKiAKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NOb3RpZmljYXRpb24oKQoJICoKCSAqIEBwYXJhbSAkcmVxdWVzdCBhcnJheSBjb250YWluaW5nIHRoZSBQT1NUZWQgdmFyaWFibGVzLCBnZW5lcmFsbHkgYSBjb3B5IG9mIHRoZSAkX1BPU1QKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBwcm9jZXNzaW5nIHRoZSBub3RpZmljYXRpb24KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NOb3RpZmljYXRpb24oJHJlcXVlc3QpCgl7CgkJLy9ncmFiIHRoZSBzaWduYXR1cmUgZnJvbSB0aGUgcmVxdWVzdCBoZWFkZXJzCgkJJHNpZ25hdHVyZSA9ICR0aGlzLT5wYXJzZVdlYmhvb2tTaWduYXR1cmVGcm9tSGVhZGVycygpOwoJCSRzaWduYXR1cmUgPSAoZW1wdHkoJHNpZ25hdHVyZSkgJiYgIWVtcHR5KCRfR0VUWydzaWduYXR1cmUnXSkpPyRfR0VUWydzaWduYXR1cmUnXTokc2lnbmF0dXJlOyAvL2lmIHdlIGNvdWxkbnQgcmVhZCBpdCBmcm9tIHRoZSBoZWFkZXJzLCB0cnkgdGhlICRfR0VUCgkJaWYgKGVtcHR5KCRzaWduYXR1cmUpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gbG9jYXRlIFgtQ2hhcmdpZnktV2ViaG9vay1TaWduYXR1cmUgaW4gdGhlIHNlbnQgaGVhZGVycyAob3IgdGhlIHF1ZXJ5IHN0cmluZyksIHBvc3NpYmxlIGZvcmdlZCByZXF1ZXN0IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL3RoZSBzaWduYXR1cmUgaXMgYW4gbWQ1IG9mIHRoZSBzaGFyZWQga2V5IGNvbmNhdGVuYXRlZCB3aXRoIHRoZSByYXcgcmVxdWVzdCwgdmFsaWRhdGUgaXQKCQkkcmF3UmVxdWVzdCA9IGZpbGVfZ2V0X2NvbnRlbnRzKCJwaHA6Ly9pbnB1dCIpOwoJCSRjYWxjdWxhdGVkU2lnbmF0dXJlID0gbWQ1KCR0aGlzLT5nZXRTaGFyZWRLZXkoKS4kcmF3UmVxdWVzdCk7CgkJaWYgKCRzaWduYXR1cmUgIT09ICRjYWxjdWxhdGVkU2lnbmF0dXJlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdmFsaWRhdGUgd2Vib29rIGR1ZSB0byBzaWduYXR1cmUgbWlzbWF0Y2gsIHBvc3NpYmxlIGZvcmdlZCByZXF1ZXN0IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2F0IHRoaXMgcG9pbnQsIHdlIGNhbiBhc3N1bWUgdGhlIHdlYmhvb2sgaXMgdmFsaWQsIHNvIG1ha2Ugc3VyZSB0aGVyZSBpcyBhbiBpZCBhbmQgaXQgaGFzbnQgYmVlbiBwcm9jZXNzZWQgYmVmb3JlCgkJaWYgKGVtcHR5KCRyZXF1ZXN0WydpZCddKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3Mgd2ViaG9vaywgbm8gaWQgd2FzIGZvdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoJHRoaXMtPmlzRHVwbGljYXRlV2ViaG9vaygkcmVxdWVzdCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkR1cGxpY2F0ZSB3ZWJob29rOiBUaGlzIHdlYmhvb2sgaGFzIGFscmVhZHkgYmVlbiBwcm9jZXNzZWQiKTsgLy9pdHMgbm90IHRlY2huaWNhbGx5IGFuIGVycm9yLCByZXR1cm4gc3VjY2VzcwoJCX0KCQkKCQkvL25vdyBmaWd1cmUgb3V0IHdoYXQgaGFwcGVuZWQgYW5kIHJlc3BvbmQgdG8gaXQKCQkkZXZlbnRUeXBlID0gIWVtcHR5KCRyZXF1ZXN0WydldmVudCddKT8kcmVxdWVzdFsnZXZlbnQnXToiIjsKCQkKCQlzd2l0Y2ggKCRldmVudFR5cGUpCgkJewoJCQljYXNlICdwYXltZW50X3N1Y2Nlc3MnOgoJCQkJYnJlYWs7CgkJCWNhc2UgJ3BheW1lbnRfZmFpbHVyZSc6CgkJCQlicmVhazsKCQkJY2FzZSAncmVuZXdhbF9zdWNjZXNzJzoKCQkJCS8vbG9nIHRoZSByZW5ld2FsIGFzIGEgc3VjY2Vzc2Z1bCByZWJpbGwuIEN1cnJlbnRseSBNZW1iZXJNb3VzZSBkb2Vzbid0IGhhdmUgYSBzY2hlZHVsZXIsIGhlbmNlIGRvZXNuJ3QgZ2VuZXJhdGUgcmVndWxhciBjaGFyZ2VzLgoJCQkJLy9UaGVyZWZvcmUsIHdlIG5lZWQgdG8gbWFrZSB0d28gZW50cmllcyBpbiB0aGUgdHJhbnNhY3Rpb25zIHRhYmxlICh1c2luZyB0aGUgJGJhbGFuY2UgZmxhZykgdG8gY3JlYXRlIGEgY2hhcmdlIHRvIGFwcGx5IHRoZSBwYXltZW50IGFnYWluc3QKCQkJCSRzdWJzY3JpcHRpb25JZCA9ICghZW1wdHkoJHJlcXVlc3RbJ3N1YnNjcmlwdGlvbiddWydpZCddKSk/JHJlcXVlc3RbJ3N1YnNjcmlwdGlvbiddWydpZCddOiIiOwoJCQkJaWYgKGVtcHR5KCRzdWJzY3JpcHRpb25JZCkpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyBDaGFyZ2lmeSByZW5ld2FsIHdlYmhvb2ssIG5vIHN1YnNjcmlwdGlvbiBpZCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJCSRvcmRlckl0ZW1JZCA9ICR0aGlzLT5sb29rdXBPcmRlckl0ZW1Gcm9tU3Vic2NyaXB0aW9uSWQoJHN1YnNjcmlwdGlvbklkKTsKCQkJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKGVtcHR5KCRvcmRlckl0ZW1JZCk/IiI6JG9yZGVySXRlbUlkKTsKCQkJCWlmIChpc19udWxsKCRvcmRlckl0ZW1JZCkgfHwgKCEkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgQ2hhcmdpZnkgcmVuZXdhbCB3ZWJob29rLCBubyBvcmRlciBpdGVtIGZvdW5kIG1hdGNoaW5nIHN1YnNjcmlwdGlvbiBpZCB7JHN1YnNjcmlwdGlvbklkfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJCSRwYXltZW50QW1vdW50ID0gbnVtYmVyX2Zvcm1hdCgoaW50dmFsKCRyZXF1ZXN0WydzdWJzY3JpcHRpb24nXVsnYmFsYW5jZV9pbl9jZW50cyddKS8xMDApLDIpOyAvL2NvbnZlcnQgdG8gZG9sbGFycywgZml4IGRlY2ltYWxzCgkJCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKTsKCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlJlY3VycmluZyBwYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0sIGl0ZW06IHskb3JkZXJJdGVtLT5nZXREZXNjcmlwdGlvbigpfSI7CgkJCQkkdHJhbnNhY3Rpb25Mb2dSZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwkb3JkZXJJdGVtSWQsICRwYXltZW50QW1vdW50LCAkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsZmFsc2UsJHRoaXMtPmdldElkKCksJGlwbklkKTsKCQkJCWJyZWFrOwoJCQljYXNlICdyZW5ld2FsX2ZhaWx1cmUnOgoJCQkJYnJlYWs7CgkJCWNhc2UgJ3N1YnNjcmlwdGlvbl9zdGF0ZV9jaGFuZ2UnOgoJCQkJJHN1YnNjcmlwdGlvbklkID0gKCFlbXB0eSgkcmVxdWVzdFsnc3Vic2NyaXB0aW9uJ11bJ2lkJ10pKT8kcmVxdWVzdFsnc3Vic2NyaXB0aW9uJ11bJ2lkJ106IiI7CgkJCQlpZiAoZW1wdHkoJHN1YnNjcmlwdGlvbklkKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIENoYXJnaWZ5IHN1YnNjcmlwdGlvbl9zdGF0ZV9jaGFuZ2Ugd2ViaG9vaywgbm8gc3Vic2NyaXB0aW9uIGlkIGZvdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJJG9yZGVySXRlbUlkID0gJHRoaXMtPmxvb2t1cE9yZGVySXRlbUZyb21TdWJzY3JpcHRpb25JZCgkc3Vic2NyaXB0aW9uSWQpOwoJCQkJJG9yZGVySXRlbSA9IG5ldyBNTV9PcmRlckl0ZW0oZW1wdHkoJG9yZGVySXRlbUlkKT8iIjokb3JkZXJJdGVtSWQpOwoJCQkJaWYgKGlzX251bGwoJG9yZGVySXRlbUlkKSB8fCAoISRvcmRlckl0ZW0tPmlzVmFsaWQoKSkpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyBDaGFyZ2lmeSBzdWJzY3JpcHRpb25fc3RhdGVfY2hhbmdlIHdlYmhvb2ssIG5vIG9yZGVyIGl0ZW0gZm91bmQgbWF0Y2hpbmcgc3Vic2NyaXB0aW9uIGlkIHskc3Vic2NyaXB0aW9uSWR9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkkcHJldmlvdXNTdGF0ZSA9ICFlbXB0eSgkcmVxdWVzdFsnc3Vic2NyaXB0aW9uJ11bJ3ByZXZpb3VzX3N0YXRlJ10pPyRyZXF1ZXN0WydzdWJzY3JpcHRpb24nXVsncHJldmlvdXNfc3RhdGUnXToiIjsKCQkJCSRjdXJyZW50U3RhdGUgID0gIWVtcHR5KCRyZXF1ZXN0WydzdWJzY3JpcHRpb24nXVsnc3RhdGUnXSk/JHJlcXVlc3RbJ3N1YnNjcmlwdGlvbiddWydzdGF0ZSddOiIiOwoJCQkJJHByZXZpb3VzU3RhdGVDbGFzc2lmaWNhdGlvbiA9ICR0aGlzLT5jbGFzc2lmeVN1YnNjcmlwdGlvblN0YXRlKCRwcmV2aW91c1N0YXRlKTsKCQkJCSRjdXJyZW50U3RhdGVDbGFzc2lmaWNhdGlvbiAgPSAkdGhpcy0+Y2xhc3NpZnlTdWJzY3JpcHRpb25TdGF0ZSgkY3VycmVudFN0YXRlKTsKCQkJCS8vd2Ugb25seSBjYXJlIGFib3V0IGFwcGx5aW5nIGFjY2VzcyB3aGVuIG1vdmluZyBmcm9tIHRoZSBlbmQtb2YtbGlmZSB0byBsaXZlIHN0YXRlIChwcm9ibGVtIHN0YXRlIGlzIGluZm9ybWF0aW9uYWwpLCBvciByZXZva2luZyBhY2Nlc3Mgd2hlbiBtb3ZpbmcgaW4gdGhlIG90aGVyIGRpcmVjdGlvbgoJCQkJaWYgKCgkY3VycmVudFN0YXRlQ2xhc3NpZmljYXRpb24gPT09ICdsaXZlJykgJiYgKCRwcmV2aW91c1N0YXRlQ2xhc3NpZmljYXRpb24gIT09ICdsaXZlJykpCgkJCQl7CgkJCQkJJGFjY2Vzc01vZGlmaWNhdGlvblJlc3BvbnNlID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQWNjZXNzRnJvbU9yZGVySXRlbXMoJG9yZGVyLT5nZXRDdXN0b21lcigpLCBhcnJheSgkb3JkZXJJdGVtKSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRhY2Nlc3NNb2RpZmljYXRpb25SZXNwb25zZS0+bWVzc2FnZSwoJGFjY2Vzc01vZGlmaWNhdGlvblJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk/TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1M6TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJCWVsc2UgaWYgKCgkY3VycmVudFN0YXRlQ2xhc3NpZmljYXRpb24gPT09ICdlbmQtb2YtbGlmZScpICYmICgkcHJldmlvdXNTdGF0ZUNsYXNzaWZpY2F0aW9uICE9PSAnZW5kLW9mLWxpZmUnKSkKCQkJCXsKCQkJCQkkYWNjZXNzTW9kaWZpY2F0aW9uUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpyZXZva2VBY2Nlc3NGb3JPcmRlckl0ZW0oJG9yZGVySXRlbSk7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRhY2Nlc3NNb2RpZmljYXRpb25SZXNwb25zZS0+bWVzc2FnZSwoJGFjY2Vzc01vZGlmaWNhdGlvblJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk/TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1M6TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJLy93ZSBkb250IGNhcmUgd2hhdCBoYXBwZW5lZC4gRWl0aGVyIHRoZSBjdXJyZW50IHN0YXRlIGlzIHVua25vd24sIHNvIHdlIGNhbid0IGFjdCBhbnl3YXksIG9yIHRoZSBzdGF0ZSBoYXNuJ3QgY2hhbmdlZAoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJfQoJCQkJYnJlYWs7CgkJCWNhc2UgJ3N1YnNjcmlwdGlvbl9wcm9kdWN0X2NoYW5nZSc6CgkJCQkvL1RPRE86IFJFRkFDVE9SOiB1c2UgdGhpcyBhcyBhIGZ1dHVyZSBob29rIHRvIGNhdGNoIG1lbWJlcnNoaXAgY2hhbmdlIGZyb20gdGhlIG90aGVyIHNpZGU/CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCS8vVGhlcmUgYXJlIG90aGVyIGV2ZW50cyBzZW50IGJ5IENoYXJnaWZ5LCBidXQgd2UgYXJlIG5vdCBjdXJyZW50bHkgaW50ZXJlc3RlZCBpbiB0aGVtCgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJCWJyZWFrOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsgLy9zaG91bGRudCBldmVyIHJlYWNoIGhlcmUKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgd2hldGhlciB0aGUgc3VwcGxpZWQgc3Vic2NyaXB0aW9uIHN0YXRlIGlzIGNsYXNzaWZpZWQgYXMgJ2xpdmUnIG9yICdlbmQtb2YtbGlmZScuIEZvciBNZW1iZXJNb3VzZSBwdXJwb3NlcywgCgkgKiB0aGUgJ3Byb2JsZW0nIHN0YXRlIGlzIHRyZWF0ZWQgYXMgaW5mb3JtYXRpb25hbCBvbmx5LCBhbmQgcm9sbGVkIGludG8gdGhlICdsaXZlJyBjbGFzc2lmaWNhdGlvbgoJICogCgkgKiBDaGFyZ2lmeSBjbGFzc2lmaWNhdGlvbnMgYXJlIHRha2VuIGZyb20gaHR0cDovL2RvY3MuY2hhcmdpZnkuY29tL3N1YnNjcmlwdGlvbi1zdGF0ZXMKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkc3Vic2NyaXB0aW9uU3RhdGUgVGhlIHN0YXRlIHRoZSBzdWJzY3JpcHRpb24gaXMgaW4KCSAqIEByZXR1cm4gc3RyaW5nIHdpdGggdGhlIGNsYXNzaWZpY2F0aW9uIG9mIHRoZSBzdGF0ZS4gV2lsbCBiZSAnbGl2ZScsJ2VuZC1vZi1saWZlJyBvciAndW5rbm93bicKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNsYXNzaWZ5U3Vic2NyaXB0aW9uU3RhdGUoJHN1YnNjcmlwdGlvblN0YXRlKQoJewoJCSRzdWJzY3JpcHRpb25TdGF0ZSA9ICFlbXB0eSgkc3Vic2NyaXB0aW9uU3RhdGUpP3N0cnRvbG93ZXIoJHN1YnNjcmlwdGlvblN0YXRlKToiIjsgLy9kZWFsIHdpdGggbnVsbCBhbmQgaW1wcm9wZXIgY2FzaW5nIHNpbXVsdGFuZW91c2x5CgkJc3dpdGNoICgkc3Vic2NyaXB0aW9uU3RhdGUpCgkJewoJCQljYXNlICd0cmlhbGluZyc6CgkJCWNhc2UgJ2Fzc2Vzc2luZyc6CgkJCWNhc2UgJ2FjdGl2ZSc6CgkJCWNhc2UgJ3NvZnRfZmFpbHVyZSc6CgkJCWNhc2UgJ3Bhc3RfZHVlJzoKCQkJY2FzZSAndW5wYWlkJzoKCQkJCXJldHVybiAnbGl2ZSc7CgkJCQlicmVhazsKCQkJY2FzZSAnY2FuY2VsZWQnOgoJCQljYXNlICdzdXNwZW5kZWQnOgoJCQljYXNlICd0cmlhbF9lbmRlZCc6CgkJCWNhc2UgJ2V4cGlyZWQnOgoJCQkJcmV0dXJuICdlbmQtb2YtbGlmZSc7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAndW5rbm93bic7CgkJfQoJCXJldHVybiAndW5rbm93bic7Cgl9CgkKCS8qKgoJICogUGFyc2UgdGhlIEhUVFAgaGVhZGVycyBhbmQgcmV0dXJuIHRoZSB2YWx1ZSBvZiB0aGUgWC1DaGFyZ2lmeS1XZWJob29rLVNpZ25hdHVyZQoJICogQHJldHVybiBzdHJpbmcgY29udGFpbmluZyB0aGUgdmFsdWUgb2YgdGhlIFgtQ2hhcmdpZnktV2ViaG9vay1TaWduYXR1cmUgaWYgaXQgZXhpc3RzLCBvdGhlcndpc2UgYW4gZW1wdHkgc3RyaW5nCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBwYXJzZVdlYmhvb2tTaWduYXR1cmVGcm9tSGVhZGVycygpCgl7CgkJJGhlYWRlcnMgPSBoZWFkZXJzX2xpc3QoKTsKCQlmb3JlYWNoICgkaGVhZGVycyBhcyAkaGVhZGVyKQoJCXsKCQkJaWYgKHN0cnBvcygkaGVhZGVyLCJYLUNoYXJnaWZ5LVdlYmhvb2stU2lnbmF0dXJlIikgIT09IGZhbHNlKQoJCQl7CgkJCQkkc3BsaXQgPSBleHBsb2RlKCI6IiwkaGVhZGVyLDIpOwoJCQkJaWYgKGNvdW50KCRzcGxpdCkgPT0gMikKCQkJCXsKCQkJCQkkc2lnbmF0dXJlID0gdHJpbSgkc3BsaXRbMV0pOwoJCQkJCXJldHVybiAkc2lnbmF0dXJlOwoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiAiIjsKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gaXNEdXBsaWNhdGVXZWJob29rKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL21ha2Ugc3VyZSB3ZSBoYXZlIGFuIGlkIHRvIGNoZWNrLiBUaGlzIG5lZWRzIHRvIGJlIGNoZWNrZWQgaGlnaGVyIHVwLCBidXQgaW4gY2FzZSBmb3Igc29tZSByZWFzb24gaXQgaXNudCwgcmV0dXJuIGZhbHNlIGlmIGlkIGRvZXNudCBleGlzdC4uLgoJCWlmIChlbXB0eSgkcmVxdWVzdFsnaWQnXSkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCSRkdXBDaGVja1NRTCA9ICJzZWxlY3QgY291bnQoKikgZnJvbSAiLk1NX1RBQkxFX0NIQVJHSUZZX05PVElGSUNBVElPTlMuIiB3aGVyZSB3ZWJob29rX2lkPSVzIjsKCQkkbnVtRHVwZXMgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkZHVwQ2hlY2tTUUwsJHJlcXVlc3RbJ2lkJ10pKTsKCQlyZXR1cm4gKCRudW1EdXBlcz4wKTsKCX0gCgkKCQoJLyoqCgkgKiBDcmVhdGVzIGEgc3Vic2NyaXB0aW9uIG9uIGNoYXJnaWZ5IGZyb20gdGhlIHByb3ZpZGVkIG9yZGVyCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpjaGFyZ2VPcmRlcigpCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIHVzZSB0byBjcmVhdGUgdGhlIGNoYXJnZS9zdWJzY3JpcHRpb24KCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gVGhlIGNyZWRpdCBjYXJkIGluZm8gdG8gdXNlIHRvIGNoYXJnZSB0aGUgb3JkZXIKCSAqIEBwYXJhbSBib29sZWFuICR2YWxpZGF0ZSBXaGV0aGVyIG9yIG5vdCB0byB2YWxpZGF0ZSB0aGUgb3JkZXIgYmVmb3JlIGNoYXJnaW5nIGl0CgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgdGhlIGF0dGVtcHQgdG8gY2hhcmdlIHRoZSBjdXN0b21lcgoJICogCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjaGFyZ2VPcmRlcihNTV9PcmRlciAkb3JkZXIsIE1NX0NhcmRJbmZvICRjYXJkSW5mbywgJHZhbGlkYXRlPXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCXBhcmVudDo6Y2hhcmdlT3JkZXIoJG9yZGVyLCRjYXJkSW5mbywkdmFsaWRhdGUpOwoJCQoJCSRjYXJkVmFsaWRhdGlvbiA9ICRjYXJkSW5mby0+dmFsaWRhdGUoKTsKCQlpZiAoJGNhcmRWYWxpZGF0aW9uICE9PSB0cnVlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRjYXJkVmFsaWRhdGlvbixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkY3VzdG9tZXJMaW5rU1FMID0gInNlbGVjdCBjaGFyZ2lmeV9jdXN0b21lcl9pZCwgbWVtYmVybW91c2VfY3VzdG9tZXJfaWQgZnJvbSAiLk1NX1RBQkxFX0NIQVJHSUZZX0NVU1RPTUVSX0xJTktTLiIgd2hlcmUgbWVtYmVybW91c2VfY3VzdG9tZXJfaWQ9JWQiOwoJCSRjdXN0b21lclJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgkY3VzdG9tZXJMaW5rU1FMLCRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKSkpOwoJCSRjaGFyZ2lmeUN1c3RvbWVySWQgPSBudWxsOwoJCWlmICgkY3VzdG9tZXJSZXN1bHRzICE9IG51bGwpCgkJewoJCQkkdG1wQ3VzdG9tZXJJZCA9ICRjdXN0b21lclJlc3VsdHMtPmNoYXJnaWZ5X2N1c3RvbWVyX2lkOwoJCQkkcmVzID0gJHRoaXMtPmdldFJlbW90ZUN1c3RvbWVyQnlJZCgkY3VzdG9tZXJSZXN1bHRzLT5jaGFyZ2lmeV9jdXN0b21lcl9pZCk7CgkJCWlmICgkcmVzLT50eXBlICE9PSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCQl7CgkJCQkvL2ZvdW5kIHRoZSBjdXN0b21lciBpZDsgZm9yIG5vdyBsZXRzIGFzc3VtZSBpdHMgZ29vZAoJCQkJJGNoYXJnaWZ5Q3VzdG9tZXJJZCA9ICR0bXBDdXN0b21lcklkOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkvL25vIGxpbmsgd2FzIGZvdW5kIGluIHRoZSBkYiwgdHJ5IHRvIHJldHJpZXZlIGN1c3RvbWVyIGJ5IGVtYWlsCgkJCSRyZXMgPSAkdGhpcy0+Z2V0UmVtb3RlQ3VzdG9tZXJCeUVtYWlsKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0RW1haWwoKSk7CgkJCWlmICgkcmVzLT50eXBlID09PSBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpCgkJCXsKCQkJCSRjaGFyZ2lmeUN1c3RvbWVySWQgPSAkcmVzLT5tZXNzYWdlLT5pZDsgIAoJCQl9CgkJfQoJCQoJCS8vaWYgdGhlIGN1c3RvbWVyIGFscmVhZHkgZXhpc3RzLCB3ZSBoYXZlIHRoZWlyIGNoYXJnaWZ5IGN1c3RvbWVyIGlkIG5vdywgc28gaXRlcmF0ZSB0aHJvdWdoIHRoZSBwcm9kdWN0cyBhbmQgY3JlYXRlIHN1YnNjcmlwdGlvbnMKCQkkb3JkZXJQcm9kdWN0cyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQlpZiAoY291bnQoJG9yZGVyUHJvZHVjdHMpIDwgMSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgY2hhcmdpbmcgb3JkZXI6IE5vIHByb2R1Y3RzISIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9zZXBhcmF0ZSBjb3Vwb25zIGludG8gdGhlIHByb2R1Y3QgdGhleSBhcHBseSB0by4gJHByb2R1Y3RTcGVjaWZpY0NvdXBvbnMgaXMgYSBoYXNodGFibGUsIGtleWVkIGJ5IHByb2R1Y3QgaWQuIEVudHJpZXMgYXJlIGFycmF5cyBvZiBjb3Vwb25zIHRvIGFwcGx5IHRvIGVhY2ggcHJvZHVjdAoJCSRwcm9kdWN0U3BlY2lmaWNDb3Vwb25zID0gYXJyYXkoKTsgCgkJCgkJLy9nbG9iYWwgY291cG9ucyBhcHBseSB0byBhbGwgcHJvZHVjdHMKCQkkZ2xvYmFsQ291cG9ucyA9IGFycmF5KCk7CgkJCgkJJGNvdXBvbnMgPSAkb3JkZXItPmdldENvdXBvbnMoKTsKCQkKCQlmb3JlYWNoICgkY291cG9ucyBhcyAkY291cG9uSWQ9PiRjb3Vwb25JdGVtKQoJCXsKCQkJJHRtcENvdXBvbiA9IG5ldyBNTV9Db3Vwb24oJGNvdXBvbklkKTsKCQkJaWYgKCR0bXBDb3Vwb24tPmlzVmFsaWQoKSkKCQkJewoJCQkJJHRtcENvdXBvbi0+Z2V0QXNzb2NQcm9kdWN0cygpOwoJCQkJJHRtcENvdXBvblByb2R1Y3RzID0gJHRtcENvdXBvbi0+Z2V0UHJvZHVjdHMoKTsKCQkJCWlmIChjb3VudCgkdG1wQ291cG9uUHJvZHVjdHMpIDwgMSkKCQkJCXsKCQkJCQkkZ2xvYmFsQ291cG9uc1tdID0gJHRtcENvdXBvbjsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQlmb3JlYWNoICgkdG1wQ291cG9uUHJvZHVjdHMgYXMgJGNvdXBvblByb2R1Y3RJZCkKCQkJCQl7CgkJCQkJCSRwcm9kdWN0U3BlY2lmaWNDb3Vwb25zWyRjb3Vwb25Qcm9kdWN0SWRdW10gPSAkdG1wQ291cG9uOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkKCQkkdGhpcy0+cG9wdWxhdGVQcm9kdWN0Q2FjaGUoJG9yZGVyUHJvZHVjdHMpOwoJCQoJCSRmaXJzdFByb2R1Y3RJdGVtID0gYXJyYXlfcG9wKCRvcmRlclByb2R1Y3RzKTsKCQkkZmlyc3RDb3Vwb24gPSBudWxsOwoJCWlmIChpc3NldCgkcHJvZHVjdFNwZWNpZmljQ291cG9uc1skZmlyc3RQcm9kdWN0SXRlbS0+Z2V0SXRlbUlkKCldKSkKCQl7CgkJCSRmaXJzdENvdXBvbiA9IHJlc2V0KCRwcm9kdWN0U3BlY2lmaWNDb3Vwb25zWyRmaXJzdFByb2R1Y3RJdGVtLT5nZXRJdGVtSWQoKV0pOwoJCX0KCQllbHNlIGlmIChjb3VudCgkZ2xvYmFsQ291cG9ucykgPiAwKQoJCXsKCQkJJGZpcnN0Q291cG9uID0gcmVzZXQoJGdsb2JhbENvdXBvbnMpOwoJCX0KCQkkZmlyc3RQcm9kdWN0UmVzcG9uc2UgPSAkdGhpcy0+Y3JlYXRlUmVtb3RlU3Vic2NyaXB0aW9uKCRvcmRlciwgJGZpcnN0UHJvZHVjdEl0ZW0sJGNoYXJnaWZ5Q3VzdG9tZXJJZCwkY2FyZEluZm8sJGZpcnN0Q291cG9uKTsKCQlpZiAoJGZpcnN0UHJvZHVjdFJlc3BvbnNlLT5zdGF0dXMgIT0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1MpCgkJewoJCQlyZXR1cm4gJGZpcnN0UHJvZHVjdFJlc3BvbnNlOwoJCX0KCQkvL3VwZGF0ZSBmaXJzdCBwcm9kdWN0IHN0YXR1cwoJCSRmaXJzdFByb2R1Y3RJdGVtLT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJJGZpcnN0UHJvZHVjdEl0ZW0tPmNvbW1pdERhdGEoKTsKCQkKCQkkcGF5bWVudFByb2ZpbGVJZCA9IChpc3NldCgkZmlyc3RQcm9kdWN0UmVzcG9uc2UtPmNyZWRpdF9jYXJkLT5pZCkpPyRmaXJzdFByb2R1Y3RSZXNwb25zZS0+Y3JlZGl0X2NhcmQtPmlkOm51bGw7CgkJCgkJLy9ub3cgY2hhcmdlIHRoZSByZXN0IG9mIHRoZSBwcm9kdWN0cwoJCWZvcmVhY2ggKCRvcmRlclByb2R1Y3RzIGFzICRuZXh0UHJvZHVjdCkKCQl7CgkJCWlmIChpc19udWxsKCRwYXltZW50UHJvZmlsZUlkKSkKCQkJewoJCQkJJHByb2R1Y3RSZXNwb25zZSA9ICR0aGlzLT5jcmVhdGVSZW1vdGVTdWJzY3JpcHRpb24oJG9yZGVyLCAkbmV4dFByb2R1Y3QsJGNoYXJnaWZ5Q3VzdG9tZXJJZCwkY2FyZEluZm8pOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHByb2R1Y3RSZXNwb25zZSA9ICR0aGlzLT5jcmVhdGVSZW1vdGVTdWJzY3JpcHRpb24oJG9yZGVyLCAkbmV4dFByb2R1Y3QsJGNoYXJnaWZ5Q3VzdG9tZXJJZCxudWxsLCRwYXltZW50UHJvZmlsZUlkKTsKCQkJfQoJCQkKCQkJaWYgKCRwcm9kdWN0UmVzcG9uc2UtPnN0YXR1cyAhPSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokU1VDQ0VTUykKCQkJewoJCQkJcmV0dXJuICRwcm9kdWN0UmVzcG9uc2U7CgkJCX0KCQkJJG5leHRQcm9kdWN0LT5zZXRTdGF0dXMoTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORyk7CgkJCSRuZXh0UHJvZHVjdC0+Y29tbWl0RGF0YSgpOwoJCX0KCQkKCQkvL2F0IHRoaXMgcG9pbnQsIHRoZSBjb2RlIHNob3VsZCBoYXZlIGJhaWxlZCBpZiB0aGVyZSB3ZXJlIGFueSBlcnJvcnMsIHNvIHJlcG9ydCBzdWNjZXNzCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGUgYSBwcm9kdWN0IGNhY2hlIHRvIHNhdmUgb24gZGF0YWJhc2UgYWNjZXNzIGxhdGVyIHVzaW5nIHRoZSBzdXBwbGllZCBhcnJheQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHByb2R1Y3RzQXJyYXkgQW4gYXJyYXkgb2YgTU1fUHJvZHVjdHMgb3IgTU1fT3JkZXJJdGVtcyAob3IgYm90aCkKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBwb3B1bGF0ZVByb2R1Y3RDYWNoZSgkcHJvZHVjdHNBcnJheSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFpc19hcnJheSgkcHJvZHVjdHNBcnJheSkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCSRwcm9kdWN0SWRzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkcHJvZHVjdHNBcnJheSBhcyAkZWFjaFByb2R1Y3QpCgkJewoJCQlpZiAoJGVhY2hQcm9kdWN0IGluc3RhbmNlb2YgTU1fUHJvZHVjdCkKCQkJewoJCQkJJGVhY2hJZCA9ICRlYWNoUHJvZHVjdC0+Z2V0SWQoKTsKCQkJCWlmICgkZWFjaElkID4wKQoJCQkJewoJCQkJCSRwcm9kdWN0SWRzW10gPSAkZWFjaElkOwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYgKCgkZWFjaFByb2R1Y3QgaW5zdGFuY2VvZiBNTV9PcmRlckl0ZW0pICYmICgkZWFjaFByb2R1Y3QtPmdldEl0ZW1UeXBlKCkgPT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpKQoJCQl7CgkJCQkkcHJvZHVjdElkc1tdID0gJGVhY2hQcm9kdWN0LT5nZXRJdGVtSWQoKTsKCQkJfQoJCX0KCQkKCQkkcHJvZHVjdElkU3RyaW5nID0gaW1wbG9kZSgiLCIsJHByb2R1Y3RJZHMpOwoJCSRwcm9kdWN0Q2FjaGVTUUwgPSAic2VsZWN0IGNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZSwgbWVtYmVybW91c2VfcHJvZHVjdF9pZCBmcm9tICIuTU1fVEFCTEVfQ0hBUkdJRllfUFJPRFVDVF9MSU5LUy4iIHdoZXJlIG1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgSU4gKCVzKSI7CgkJJHJlcyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkd3BkYi0+cHJlcGFyZSgkcHJvZHVjdENhY2hlU1FMLCRwcm9kdWN0SWRTdHJpbmcpKTsKCQlpZiAoJHdwZGItPm51bV9yb3dzKQoJCXsKCQkJZm9yZWFjaCAoJHJlcyBhcyAkcHJvZHVjdExpbmspCgkJCXsKCQkJCSR0aGlzLT5wcm9kdWN0Q2FjaGVbJHByb2R1Y3RMaW5rLT5tZW1iZXJtb3VzZV9wcm9kdWN0X2lkXSA9ICRwcm9kdWN0TGluay0+Y2hhcmdpZnlfcHJvZHVjdF9hcGlfaGFuZGxlOwoJCQl9CgkJfQoJCXJldHVybiB0cnVlOwoJfQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGFwaSBrZXkgdXNlZCB0byBhdXRoZW50aWNhdGUgdG8gY2hhcmdpZnkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFwaUtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcGlfa2V5OwoJfQoJCgkvKioKCSAqIFNldHMgdGhlIGFwaSBrZXkgdXNlZCB0byBhdXRoZW50aWNhdGUgdG8gY2hhcmdpZnkKCSAqIEBwYXJhbSBTdHJpbmcgJGFwaV9rZXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldEFwaUtleSgkYXBpX2tleSkKCXsKCQkkdGhpcy0+YXBpX2tleSA9ICRhcGlfa2V5OwoJfQoJCgkvKioKCSAqIFJldHVybnMgdGhlIHN1YmRvbWFpbiB1c2VkIHRvIGlkZW50aWZ5IHRoZSBjaGFyZ2lmeSBhY2NvdW50CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRTdWJkb21haW4oKQoJewoJCXJldHVybiAkdGhpcy0+c3ViZG9tYWluOwoJfQoJCgkvKioKCSAqIFNldHMgdGhlIHN1YmRvbWFpbiB1c2VkIHRvIGlkZW50aWZ5IHRoZSBjaGFyZ2lmeSBhY2NvdW50CgkgKiBAcGFyYW0gU3RyaW5nICRzdWJkb21haW4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFN1YmRvbWFpbigkc3ViZG9tYWluKQoJewoJCSR0aGlzLT5zdWJkb21haW4gPSAkc3ViZG9tYWluOwoJfQoJCgkKCS8qKgoJICogZ2V0UHJvZHVjdEZhbWlsaWVzCgkgKiBSZXR1cm5zIHRoZSBwcm9kdWN0IGZhbWlsaWVzIHN0b3JlZCBieSBjaGFyZ2lmeSBvbiB0aGUgc2VydmVyCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyBhbiBhcnJheSBvZiBwcm9kdWN0IGZhbWlsaWVzIG9uIHN1Y2Nlc3MsIG9yIGFuIGVycm9yIG1lc3NhZ2Ugb24gZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvZHVjdEZhbWlsaWVzKCRyZXR1cm5Bc0h0bWxPcHRpb25zPWZhbHNlKQoJewoJCSRwcm9kdWN0RmFtaWxpZXNSZXNwb25zZSA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRDaGFyZ2lmeVVybCgpLiIvcHJvZHVjdF9mYW1pbGllcy5qc29uIiwiR0VUIiwiIiwkdGhpcy0+Z2V0SlNPTk9wdGlvbnMoKSk7CgkJaWYgKCRwcm9kdWN0RmFtaWxpZXNSZXNwb25zZS0+dHlwZSAhPSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJLy9yZXR1cm5lZCBzdWNjZXNzZnVsbHksIGRlY29kZSBqc29uIGFuZCByZXR1cm4gcmVzdWx0IGluIHRoZSByZXNwb25zZQoJCQkkZmFtaWxpZXNBcnJheSA9IGpzb25fZGVjb2RlKCRwcm9kdWN0RmFtaWxpZXNSZXNwb25zZS0+bWVzc2FnZSx0cnVlKTsKCQkJJG5ld0ZhbWlsaWVzQXJyYXkgPSBhcnJheSgpOwoJCQlmb3JlYWNoICgkZmFtaWxpZXNBcnJheSBhcyAkZWFjaEZhbWlseSkgLy9yZWluZGV4IGJ5IGFwaSBoYW5kbGUKCQkJewoJCQkJJGZhbWlseUlkID0gJGVhY2hGYW1pbHlbJ3Byb2R1Y3RfZmFtaWx5J11bJ2lkJ107IAoJCQkJJG5ld0ZhbWlsaWVzQXJyYXlbJGZhbWlseUlkXSA9ICgkcmV0dXJuQXNIdG1sT3B0aW9ucyk/JGVhY2hGYW1pbHlbJ3Byb2R1Y3RfZmFtaWx5J11bJ25hbWUnXTokZWFjaEZhbWlseVsncHJvZHVjdF9mYW1pbHknXTsJCQkJCgkJCX0KCQkJJHByb2R1Y3RGYW1pbGllc1Jlc3BvbnNlLT5tZXNzYWdlID0gKCRyZXR1cm5Bc0h0bWxPcHRpb25zKT9NTV9IdG1sVXRpbHM6OmdlbmVyYXRlU2VsZWN0aW9uc0xpc3QoJG5ld0ZhbWlsaWVzQXJyYXkpOiRuZXdGYW1pbGllc0FycmF5OwoJCX0KCQlyZXR1cm4gJHByb2R1Y3RGYW1pbGllc1Jlc3BvbnNlOwoJfQoJCgkKCS8qKgoJICogUmV0cmlldmVzIHByb2R1Y3RzIGZyb20gQ2hhcmdpZnkgYW5kIHJldHVybnMgdGhlbSBpbiBhbiBhcnJheQoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgYW4gYXJyYXkgb2YgY2hhcmdpZnkgcHJvZHVjdCBvYmplY3RzIChpbmRleGVkIGJ5IGFwaSBoYW5kbGUpIG9uIHN1Y2Nlc3MsIG9yIGEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0cygpCgl7CgkJJHByb2R1Y3RSZXNwb25zZSA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRDaGFyZ2lmeVVybCgpLiIvcHJvZHVjdF9mYW1pbGllcy97JHRoaXMtPmdldFByb2R1Y3RGYW1pbHlJZCgpfS9wcm9kdWN0cy5qc29uIiwiR0VUIiwiIiwkdGhpcy0+Z2V0SlNPTk9wdGlvbnMoKSk7CgkJaWYgKCRwcm9kdWN0UmVzcG9uc2UtPnR5cGUgIT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQl7CgkJCSRwcm9kdWN0c0FycmF5ID0ganNvbl9kZWNvZGUoJHByb2R1Y3RSZXNwb25zZS0+bWVzc2FnZSk7CgkJCSRuZXdQcm9kdWN0c0FycmF5ID0gYXJyYXkoKTsKCQkJZm9yZWFjaCAoJHByb2R1Y3RzQXJyYXkgYXMgJGVhY2hQcm9kdWN0KQoJCQl7CgkJCQkkaGFuZGxlID0gJGVhY2hQcm9kdWN0LT5wcm9kdWN0LT5oYW5kbGU7IAoJCQkJJG5ld1Byb2R1Y3RzQXJyYXlbJGhhbmRsZV0gPSAkZWFjaFByb2R1Y3QtPnByb2R1Y3Q7CgkJCX0KCQkJJHByb2R1Y3RSZXNwb25zZS0+bWVzc2FnZSA9ICRuZXdQcm9kdWN0c0FycmF5OwoJCX0KCQlyZXR1cm4gJHByb2R1Y3RSZXNwb25zZTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIHByb2R1Y3QgZmFtaWx5IGlkIHVzZWQgYnkgQ2hhcmdpZnkKCSAqIAoJICogQHJldHVybiBTdHJpbmcgVGhlIHByb2R1Y3QgZmFtaWx5IGlkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0RmFtaWx5SWQoKQoJewoJCXJldHVybiAkdGhpcy0+cHJvZHVjdEZhbWlseUlkOwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgcHJvZHVjdCBmYW1pbHkgaWQgdXNlZCBieSBDaGFyZ2lmeQoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRwcm9kdWN0RmFtaWx5SWQgCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRQcm9kdWN0RmFtaWx5SWQoJHByb2R1Y3RGYW1pbHlJZCkKCXsKCQkkdGhpcy0+cHJvZHVjdEZhbWlseUlkID0gJHByb2R1Y3RGYW1pbHlJZDsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIHNoYXJlZCBrZXkgdXNlZCB0byB2YWxpZGF0ZSB3ZWJob29rcwoJICogQHJldHVybiBzdHJpbmcgVGhlIHNoYXJlZCBrZXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFNoYXJlZEtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5zaGFyZWRLZXk7Cgl9CgkKCQoJLyoqCgkgKiBTZXRzIHRoZSBzaGFyZWQga2V5IHVzZWQgdG8gdmFsaWRhdGUgd2ViaG9va3MKCSAqIEBwYXJhbSBTdHJpbmcgJHNoYXJlZEtleSBUaGUgc2hhcmVkIGtleQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0U2hhcmVkS2V5KCRzaGFyZWRLZXkpCgl7CgkJJHRoaXMtPnNoYXJlZEtleSA9ICRzaGFyZWRLZXk7Cgl9CgkKCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDaGFyZ2lmeVVybCgpCgl7CgkJcmV0dXJuICJodHRwczovL3skdGhpcy0+c3ViZG9tYWlufS5jaGFyZ2lmeS5jb20iOwoJfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0SlNPTk9wdGlvbnMoKQoJewoJCSRvcHRpb25zID0gYXJyYXkoQ1VSTE9QVF9IVFRQSEVBREVSICAgICAgICAgPT4gYXJyYXkoIkFjY2VwdDphcHBsaWNhdGlvbi9qc29uIiwiQ29udGVudC1UeXBlOmFwcGxpY2F0aW9uL2pzb24iKSwKCQkJCQkJIENVUkxPUFRfVVNFUlBXRCAgICAgICAgPT4gJHRoaXMtPmdldEFwaUtleSgpIC4gIjp4IiwKCQkJCQkJIENVUkxPUFRfRk9MTE9XTE9DQVRJT04gPT4gZmFsc2UsCgkJCQkJCSBDVVJMT1BUX01BWFJFRElSUyAgICAgID0+IDEKCQkJCQkJKTsKCQlyZXR1cm4gJG9wdGlvbnM7Cgl9CgkKCQoJLyoqCgkgKiBSZXNwb25kIHRvIGV2ZW50cyBnZW5lcmF0ZWQgYnkgTWVtYmVyTW91c2UKCSAqIAoJICogQHNlZSBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXI6OmV2ZW50UmVjZWl2ZWQoKQoJICogQHBhcmFtICRldmVudFR5cGUgQW4gZXZlbnQgY29uc3RhbnQgZW51bWVyYXRlZCBpbiBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXIKCSAqIEBwYXJhbSAkZXZlbnREYXRhIEFueSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGUgZXZlbnQKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUgcHJvY2Vzc2luZyB0aGUgZXZlbnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGV2ZW50UmVjZWl2ZWQoJGV2ZW50VHlwZSwgJGV2ZW50RGF0YSkKCXsKCQkkcmVzcG9uc2UgPSBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHByb2Nlc3NpbmcgZXZlbnQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCXN3aXRjaCAoJGV2ZW50VHlwZSkKCQl7CgkJCWNhc2UgTU1fTWVtYmVyTW91c2VFdmVudExpc3RlbmVyOjpQUk9EVUNUX0FEREVEOgoJCQljYXNlIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6UFJPRFVDVF9VUERBVEVEOgoJCQkJJHJlc3BvbnNlID0gJHRoaXMtPmNyZWF0ZVJlbW90ZVByb2R1Y3QoJGV2ZW50RGF0YSk7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXI6OlBST0RVQ1RfUkVNT1ZFRDoKCQkJCSRyZXNwb25zZSA9ICR0aGlzLT5hcmNoaXZlUmVtb3RlUHJvZHVjdCgkZXZlbnREYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6Q09VUE9OX0FEREVEOgoJCQljYXNlIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcjo6Q09VUE9OX1VQREFURUQ6CgkJCQkkcmVzcG9uc2UgPSAkdGhpcy0+Y3JlYXRlUmVtb3RlQ291cG9uKCRldmVudERhdGEpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fTWVtYmVyTW91c2VFdmVudExpc3RlbmVyOjpDT1VQT05fUkVNT1ZFRDoKCQkJCSRyZXNwb25zZSA9ICR0aGlzLT5hcmNoaXZlUmVtb3RlQ291cG9uKCRldmVudERhdGEpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCXJldHVybiAkcmVzcG9uc2U7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGUvdXBkYXRlIGEgY291cG9uIHJlbW90ZWx5IG9uIENoYXJnaWZ5LiBJZiB0aGUgY291cG9uIHN1cHBsaWVkIGlzIGFscmVhZHkgbGlua2VkIHRvIGEgcmVtb3RlIGNvdXBvbiwgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUKCSAqIAoJICogQHBhcmFtIE1NX0NvdXBvbiAkbG9jYWxDb3Vwb24gVGhlIGNvdXBvbiB0byBjcmVhdGUgcmVtb3RlbHkKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNyZWF0ZVJlbW90ZUNvdXBvbigkbG9jYWxDb3Vwb24pCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICghKCRsb2NhbENvdXBvbiBpbnN0YW5jZW9mIE1NX0NvdXBvbikpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBDaGFyZ2lmeSBjb3Vwb246IGludmFsaWQgY291cG9uIHN1cHBsaWVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHVwZGF0ZSA9IGZhbHNlOwoJCSRyZW1vdGVDb3Vwb25JZCA9ICR0aGlzLT5sb29rdXBSZW1vdGVDb3Vwb25JZCgkbG9jYWxDb3Vwb24pOwoJCQoJCWlmICgkcmVtb3RlQ291cG9uSWQgIT09IGZhbHNlKQoJCXsKCQkJLy9pZCB3YXMgZm91bmQsIHRoaXMgaXMgYW4gdXBkYXRlIGluc3RlYWQgb2YgYSBjcmVhdGUKCQkJJHVwZGF0ZSA9IHRydWU7CgkJCSRyZW1vdGVDb3Vwb24tPmNvdXBvbl9pZCA9ICRyZW1vdGVDb3Vwb25JZDsKCQl9CgkJCgkJJHJlbW90ZUNvdXBvbiA9IG5ldyBzdGRDbGFzcygpOwoJCSRyZW1vdGVDb3Vwb24tPm5hbWUgPSAkbG9jYWxDb3Vwb24tPmdldENvdXBvbk5hbWUoKTsKCQkkcmVtb3RlQ291cG9uLT5jb2RlID0gJGxvY2FsQ291cG9uLT5nZXRDb3Vwb25Db2RlKCk7CgkJJHJlbW90ZUNvdXBvbi0+ZGVzY3JpcHRpb24gPSAkbG9jYWxDb3Vwb24tPmdldERlc2NyaXB0aW9uKCk7CgkJJHJlbW90ZUNvdXBvbi0+ZGVzY3JpcHRpb24gPSBlbXB0eSgkcmVtb3RlQ291cG9uLT5kZXNjcmlwdGlvbik/JHJlbW90ZUNvdXBvbi0+bmFtZTokcmVtb3RlQ291cG9uLT5kZXNjcmlwdGlvbjsKCQkKCQlpZiAoJGxvY2FsQ291cG9uLT5nZXRDb3Vwb25UeXBlKCkgPT0gTU1fQ291cG9uOjokVFlQRV9ET0xMQVIpCgkJewoJCQkkcmVtb3RlQ291cG9uLT5hbW91bnQgPSAkbG9jYWxDb3Vwb24tPmdldENvdXBvblZhbHVlKCk7CgkJfQoJCWVsc2UgaWYgKCRsb2NhbENvdXBvbi0+Z2V0Q291cG9uVHlwZSgpID09IE1NX0NvdXBvbjo6JFRZUEVfUEVSQ0VOVEFHRSkKCQl7CgkJCSRyZW1vdGVDb3Vwb24tPnBlcmNlbnRhZ2UgPSAkbG9jYWxDb3Vwb24tPmdldENvdXBvblZhbHVlKCk7CgkJfQoJCQoJCWlmICgkbG9jYWxDb3Vwb24tPmdldFJlY3VycmluZ0JpbGxpbmdTZXR0aW5nKCkgPT0gTU1fQ291cG9uOjokVFlQRV9SRUNVUlJJTkdfQklMTElOR19TRVRUSU5HX0FMTCkKCQl7CgkJCSRyZW1vdGVDb3Vwb24tPnJlY3VycmluZyA9IHRydWU7CgkJfQoJCQoJCWlmICgkbG9jYWxDb3Vwb24tPmdldEVuZERhdGUoKSAhPSAiIikKCQl7CgkJCSRyZW1vdGVDb3Vwb24tPmNvdXBvbl9lbmRfZGF0ZSA9IGRhdGUoIlktbS1kIixzdHJ0b3RpbWUoJGxvY2FsQ291cG9uLT5nZXRFbmREYXRlKCkpKTsKCQl9CgkJCgkJJHJlbW90ZUNvdXBvbi0+cHJvZHVjdF9mYW1pbHlfaWQgPSAkdGhpcy0+Z2V0UHJvZHVjdEZhbWlseUlkKCk7CgkJCgkJJHJlbW90ZUNvdXBvbldyYXBwZXIgPSBuZXcgc3RkQ2xhc3MoKTsKCQkkcmVtb3RlQ291cG9uV3JhcHBlci0+Y291cG9uID0gJHJlbW90ZUNvdXBvbjsKCQkkcmVtb3RlQ291cG9uSlNPTiA9IGpzb25fZW5jb2RlKCRyZW1vdGVDb3Vwb25XcmFwcGVyKTsKCQkKCQkvL2NvdXBvbiBpcyBjb25zdHJ1Y3RlZCBhbmQgcmVhZHkgdG8gc2VuZCAKCQlpZiAoISR1cGRhdGUpCgkJewoJCQkkcmVzcG9uc2UgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0Q2hhcmdpZnlVcmwoKS4iL2NvdXBvbnMuanNvbiIsIlBPU1QiLCRyZW1vdGVDb3Vwb25KU09OLCR0aGlzLT5nZXRKU09OT3B0aW9ucygpKTsKCQkJaWYgKCRyZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpCgkJCXsKCQkJCS8vZ3JhYiB0aGUgaWQgYW5kIHN0b3JlIGluIHRoZSBsaW5rIHRhYmxlCgkJCQkkY3JlYXRlZENvdXBvbiA9IGpzb25fZGVjb2RlKCRyZXNwb25zZS0+bWVzc2FnZSk7CgkJCQlpZiAoaXNzZXQoJGNyZWF0ZWRDb3Vwb24tPmNvdXBvbikgJiYgaXNzZXQoJGNyZWF0ZWRDb3Vwb24tPmNvdXBvbi0+aWQpKQoJCQkJewoJCQkJCSRuZXdSZW1vdGVJZCA9ICRjcmVhdGVkQ291cG9uLT5jb3Vwb24tPmlkOwoJCQkJCSRjb3Vwb25MaW5rU1FMID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfQ0hBUkdJRllfQ09VUE9OX0xJTktTLiIgc2V0IGNoYXJnaWZ5X2NvdXBvbl9pZD0lcywgbWVtYmVybW91c2VfY291cG9uX2lkPSVkIjsKCQkJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJGNvdXBvbkxpbmtTUUwsJG5ld1JlbW90ZUlkLCRsb2NhbENvdXBvbi0+Z2V0SWQoKSkpOwoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCX0KCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdXBvbiBjcmVhdGlvbiBvbiBDaGFyZ2lmeSBzdWNjZWVkZWQsIGJ1dCBpbXByb3BlciByZXNwb25zZSB3YXMgcmV0dXJuZWQuIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCS8vVE9ETzogUkVGQUNUT1I6IEFkZCBsb2dnaW5nIGhlcmUgdG8gZGVzY3JpYmUgd2h5IHRoZSBvcCBmYWlsZWQ/CgkJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSRyZXNwb25zZSA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRDaGFyZ2lmeVVybCgpLiIvY291cG9ucy97JHJlbW90ZUNvdXBvbklkfS5qc29uIiwiUFVUIiwkcmVtb3RlQ291cG9uSlNPTiwkdGhpcy0+Z2V0SlNPTk9wdGlvbnMoKSk7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCgkKCS8qKgoJICogQXJjaGl2ZXMgYSBjb3Vwb24gb24gQ2hhcmdpZnkKCSAqIAoJICogQHBhcmFtIE1NX0NvdXBvbiAkbG9jYWxDb3Vwb24gVGhlIGNvdXBvbiB0aGF0IHdpbGwgYmUgYXJjaGl2ZWQKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGFyY2hpdmVSZW1vdGVDb3Vwb24oJGxvY2FsQ291cG9uKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoISgkbG9jYWxDb3Vwb24gaW5zdGFuY2VvZiBNTV9Db3Vwb24pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgYXJjaGl2aW5nIENoYXJnaWZ5IGNvdXBvbjogaW52YWxpZCBjb3Vwb24gc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkcmVtb3RlQ291cG9uSWQgPSAkdGhpcy0+bG9va3VwUmVtb3RlQ291cG9uSWQoJGxvY2FsQ291cG9uKTsKCQlpZiAoJHJlbW90ZUNvdXBvbklkID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGFyY2hpdmluZyBDaGFyZ2lmeSBjb3Vwb246IGNvdXBvbiBzdXBwbGllZCBpcyBub3QgbGlua2VkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNvdXBvbldyYXBwZXIgPSBuZXcgc3RkQ2xhc3MoKTsKCQkkY291cG9uV3JhcHBlci0+Y291cG9uID0gbmV3IHN0ZENsYXNzKCk7CgkJJGNvdXBvbldyYXBwZXItPmNvdXBvbi0+Y291cG9uX2lkID0gJHJlbW90ZUNvdXBvbklkOwoJCSRjb3Vwb25EZWxldGVKU09OID0ganNvbl9lbmNvZGUoJGNvdXBvbldyYXBwZXIpOwoJCQoJCSRyZXNwb25zZSA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRDaGFyZ2lmeVVybCgpLiIvY291cG9ucy97JHJlbW90ZUNvdXBvbklkfS5qc29uIiwiREVMRVRFIiwkY291cG9uRGVsZXRlSlNPTiwkdGhpcy0+Z2V0SlNPTk9wdGlvbnMoKSk7CgkJaWYgKCRyZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpCgkJewoJCQkkZGVsZXRlQ291cG9uU1FMID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQ0hBUkdJRllfQ09VUE9OX0xJTktTLiIgd2hlcmUgY2hhcmdpZnlfY291cG9uX2lkID0gJXMiOwoJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJGRlbGV0ZUNvdXBvblNRTCwkcmVtb3RlQ291cG9uSWQpKTsKCQl9CgkJcmV0dXJuICRyZXNwb25zZTsKCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgbG9jYWwgY291cG9uIG9iamVjdCBhbmQgcmV0dXJucyB0aGUgaWQgb2YgYSBsaW5rZWQgcmVtb3RlIGNvdXBvbiBvbiBDaGFyZ2lmeQoJICogCgkgKiBAcGFyYW0gTU1fQ291cG9uICRsb2NhbENvdXBvbiBUaGUgTWVtYmVyTW91c2UgY291cG9uCgkgKiBAcmV0dXJuIHRoZSBpZCBvZiB0aGUgcmVtb3RlIGNvdXBvbiwgYm9vbGVhbiBmYWxzZSBpZiBpdCBpcyBub3QgbGlua2VkIG9yIHRoZXJlIHdhcyBhbiBlcnJvcgoJICovCglwcml2YXRlIGZ1bmN0aW9uIGxvb2t1cFJlbW90ZUNvdXBvbklkKE1NX0NvdXBvbiAkbG9jYWxDb3Vwb24pCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICgkbG9jYWxDb3Vwb24gPT0gbnVsbCkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJHNxbCA9ICJzZWxlY3QgY2hhcmdpZnlfY291cG9uX2lkIGZyb20gIi5NTV9UQUJMRV9DSEFSR0lGWV9DT1VQT05fTElOS1MuIiB3aGVyZSBtZW1iZXJtb3VzZV9jb3Vwb25faWQ9JXMiOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgkc3FsLCRsb2NhbENvdXBvbi0+Z2V0SWQoKSkpOwoJCWlmICghaXNfbnVsbCgkcmVzdWx0KSkKCQl7CgkJCXJldHVybiAkcmVzdWx0LT5jaGFyZ2lmeV9jb3Vwb25faWQ7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKioKCSAqIE92ZXJyaWRlcyB0aGUgYmFzZSBjbGFzcyBkb0hUVFBSZXF1ZXN0IGluIG9yZGVyIHRvIHByb3ZpZGUgYWRkaXRpb25hbCBlcnJvci1oYW5kbGluZyBhbmQgZGV0ZWN0aW9uIGZvciBDaGFyZ2lmeQoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6ZG9IVFRQUmVxdWVzdCgpCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBkb0hUVFBSZXF1ZXN0KCRyZW1vdGVVcmwsJG1ldGhvZD0iUE9TVCIsJGRhdGE9IiIsJG9wdGlvbnM9YXJyYXkoKSkKCXsKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OmRvSFRUUFJlcXVlc3QoJHJlbW90ZVVybCwkbWV0aG9kLCRkYXRhLCRvcHRpb25zKTsKCQlpZiAoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmtub3duIGVycm9yIGNvbm5lY3RpbmcgdG8gY2hhcmdpZnkiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoJHJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUykKCQl7CgkJCSRyZXNwb25zZS0+bWVzc2FnZSA9IHRyaW0oJHJlc3BvbnNlLT5tZXNzYWdlKTsKCQkJaWYgKHN0cnBvcygkcmVzcG9uc2UtPm1lc3NhZ2UsIkhUVFAgQmFzaWM6IEFjY2VzcyBkZW5pZWQiKSAhPT0gZmFsc2UpCgkJCXsKCQkJCSRyZXNwb25zZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCX0KCQkJZWxzZSBpZiAoZW1wdHkoJHJlc3BvbnNlLT5tZXNzYWdlKSkKCQkJewoJCQkJJHJlc3BvbnNlLT5tZXNzYWdlID0gIk51bGwgcmVzcG9uc2UgZnJvbSByZW1vdGUgc2VydmVyLiBQbGVhc2UgY2hlY2sgdGhlIHN1YmRvbWFpbiBhbmQgQVBJIEtleSB2YWx1ZXMiOwoJCQkJJHJlc3BvbnNlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkcmVzcG9uc2VPYmplY3QgPSBqc29uX2RlY29kZSgkcmVzcG9uc2UtPm1lc3NhZ2UpOwkKCQkJCWlmICgoJHJlc3BvbnNlT2JqZWN0ICE9IG51bGwpICYmIChpc3NldCgkcmVzcG9uc2VPYmplY3QtPmVycm9ycykpICYmIGlzX2FycmF5KCRyZXNwb25zZU9iamVjdC0+ZXJyb3JzKSkKCQkJCXsKCQkJCQkkcmVzcG9uc2UtPm1lc3NhZ2UgPSBpbXBsb2RlKCJcbiIsJHJlc3BvbnNlT2JqZWN0LT5lcnJvcnMpOwoJCQkJCSRyZXNwb25zZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CQoJCQkJfQoJCQl9CgkJfQoJCXJldHVybiAkcmVzcG9uc2U7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHN5bmNocm9uaXplUHJvZHVjdHMoJGxvY2FsVG9SZW1vdGVPbmx5PWZhbHNlKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkdGhpcy0+aW5zdGFsbCgpOyAvL2Vuc3VyZSB0aGUgbG9jYWwgc2NoZW1hIGlzIHVwIHRvIGRhdGUKCQkKCQkkZXJyb3JzID0gYXJyYXkoKTsKCQkKCQkkY2hhcmdpZnlQcm9kdWN0c1Jlc3BvbnNlID0gJHRoaXMtPmdldFByb2R1Y3RzKCk7CgkJaWYgKCRjaGFyZ2lmeVByb2R1Y3RzUmVzcG9uc2UtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRFUlJPUikKCQl7CgkJCXJldHVybiAkY2hhcmdpZnlQcm9kdWN0c1Jlc3BvbnNlOwoJCX0KCQkKCQkkY2hhcmdpZnlQcm9kdWN0cyA9ICRjaGFyZ2lmeVByb2R1Y3RzUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCgkJLy9kZWxldGUgb3JwaGFuZWQgbGlua3MgZnJvbSB0aGUgdGFibGUKCQkkd3BkYi0+cXVlcnkoImRlbGV0ZSBjZi4qIGZyb20gIi5NTV9UQUJMRV9DSEFSR0lGWV9QUk9EVUNUX0xJTktTLiIgY2YgbGVmdCBqb2luICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBwIG9uIChjZi5tZW1iZXJtb3VzZV9wcm9kdWN0X2lkID0gcC5pZCkgd2hlcmUgcC5pZCBJUyBOVUxMIik7CgkJCgkJJHNxbCA9ICJzZWxlY3QgY2hhcmdpZnlfcHJvZHVjdF9hcGlfaGFuZGxlLCBtZW1iZXJtb3VzZV9wcm9kdWN0X2lkIGZyb20gIi5NTV9UQUJMRV9DSEFSR0lGWV9QUk9EVUNUX0xJTktTOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJJGxvY2FsUHJvZHVjdEhhc2h0YWJsZSA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHJlc3VsdCBhcyAkbGluaykKCQl7CgkJCWlmICghZW1wdHkoJGxpbmstPmNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZSkgJiYgIWluX2FycmF5KCRsaW5rLT5jaGFyZ2lmeV9wcm9kdWN0X2FwaV9oYW5kbGUsYXJyYXlfa2V5cygkY2hhcmdpZnlQcm9kdWN0cykpKQoJCQl7CgkJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQ0hBUkdJRllfUFJPRFVDVF9MSU5LUy4iIHdoZXJlIGNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZT0lcyIsJGxpbmstPmNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZSkpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRsb2NhbFByb2R1Y3RIYXNodGFibGVbJGxpbmstPmNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZV0gPSAkbGluay0+bWVtYmVybW91c2VfcHJvZHVjdF9pZDsKCQkJfQoJCX0KCQl1bnNldCgkcmVzdWx0KTsgCgkJCgkJaWYgKCEkbG9jYWxUb1JlbW90ZU9ubHkpCgkJewoJCQkvKiogLS0tLS0tLS0tLS0gY29weSBjaGFuZ2VzIGZyb20gcmVtb3RlIHRvIGxvY2FsIC0tLS0tLS0tLS0tLS0gICoqLwoJCQlmb3JlYWNoICgkY2hhcmdpZnlQcm9kdWN0cyBhcyAkcmVtb3RlUHJvZHVjdCkKCQkJewoJCQkJJHJlbW90ZVByb2R1Y3RBUElIYW5kbGUgPSB0cmltKCRyZW1vdGVQcm9kdWN0LT5oYW5kbGUpOwoJCQkJJGxvY2FsUHJvZHVjdCA9IChpc3NldCgkbG9jYWxQcm9kdWN0SGFzaHRhYmxlWyRyZW1vdGVQcm9kdWN0QVBJSGFuZGxlXSkpPyBuZXcgTU1fUHJvZHVjdCgkbG9jYWxQcm9kdWN0SGFzaHRhYmxlWyRyZW1vdGVQcm9kdWN0QVBJSGFuZGxlXSk6IG5ldyBNTV9Qcm9kdWN0KCk7CgkJCQkKCQkJCS8vbmFtZQoJCQkJJGxvY2FsUHJvZHVjdC0+c2V0TmFtZSgkcmVtb3RlUHJvZHVjdC0+bmFtZSk7CgkJCQkKCQkJCS8vZGVzY3JpcHRpb24KCQkJCSRsb2NhbFByb2R1Y3QtPnNldERlc2NyaXB0aW9uKCRyZW1vdGVQcm9kdWN0LT5kZXNjcmlwdGlvbik7CgkJCQkKCQkJCWlmICgoJHJlbW90ZVByb2R1Y3QtPmluaXRpYWxfY2hhcmdlX2luX2NlbnRzID4gMCkgJiYgKCRyZW1vdGVQcm9kdWN0LT5wcmljZV9pbl9jZW50cyA9PSAwKSAmJiAoJHJlbW90ZVByb2R1Y3QtPnRyaWFsX3ByaWNlX2luX2NlbnRzID09IDApKQoJCQkJewoJCQkJCS8vdGhpcyBwcm9kdWN0IGlzIG5vbi1yZWN1cnJpbmcsIGNyZWF0ZSB0aGUgbG9jYWwgcHJvZHVjdCB0byBiZSBub24tcmVjdXJyaW5nIGFzIHdlbGwsIHVzaW5nIHRoZSBpbml0aWFsIGNoYXJnZSBhcyB0aGUgcHJpY2UKCQkJCQkkbG9jYWxQcm9kdWN0LT5zZXRQcmljZSgkcmVtb3RlUHJvZHVjdC0+aW5pdGlhbF9jaGFyZ2VfaW5fY2VudHMvMTAwKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQoJCQkJCS8vdHJpYWwgcGFyYW1ldGVycwoJCQkJCWlmICgoJHJlbW90ZVByb2R1Y3QtPnRyaWFsX2ludGVydmFsICE9ICIiKSAmJiAoJHJlbW90ZVByb2R1Y3QtPnRyaWFsX2ludGVydmFsICE9ICJudWxsIikpCgkJCQkJewoJCQkJCQkvL3RoZXJlIGlzIGEgdHJpYWwKCQkJCQkJJHJlbW90ZVRyaWFsVW5pdCA9ICR0aGlzLT5jb252ZXJ0Q2hhcmdpZnlUb01NVW5pdHMoJHJlbW90ZVByb2R1Y3QtPnRyaWFsX2ludGVydmFsX3VuaXQpOwoJCQkJCQlpZiAoIWVtcHR5KCRyZW1vdGVUcmlhbFVuaXQpKQoJCQkJCQl7CgkJCQkJCQkkbG9jYWxQcm9kdWN0LT5zZXRUcmlhbER1cmF0aW9uKCRyZW1vdGVQcm9kdWN0LT50cmlhbF9pbnRlcnZhbCk7CgkJCQkJCQkkbG9jYWxQcm9kdWN0LT5zZXRUcmlhbEZyZXF1ZW5jeSgkcmVtb3RlVHJpYWxVbml0KTsKCQkJCQkJCWlmIChpc19pbnQoJHJlbW90ZVByb2R1Y3QtPnRyaWFsX3ByaWNlX2luX2NlbnRzKSkKCQkJCQkJCXsKCQkJCQkJCQkkdHJpYWxQcmljZSA9ICRyZW1vdGVQcm9kdWN0LT50cmlhbF9wcmljZV9pbl9jZW50cyAvIDEwMDsKCQkJCQkJCQkkbG9jYWxQcm9kdWN0LT5zZXRUcmlhbEFtb3VudCgkdHJpYWxQcmljZSk7CgkJCQkJCQl9CgkJCQkJCX0JCQkJCgkJCQkJfQoJCQkJCQoJCQkJCQoJCQkJCS8vcHJpY2UKCQkJCQkkcHJpY2UgPSBpc19pbnQoJHJlbW90ZVByb2R1Y3QtPnByaWNlX2luX2NlbnRzKT8oJHJlbW90ZVByb2R1Y3QtPnByaWNlX2luX2NlbnRzLzEwMCk6MDsKCQkJCQkkbG9jYWxQcm9kdWN0LT5zZXRQcmljZSgkcHJpY2UpOwoJCQkJCQoJCQkJCS8vcmVjdXJyZW5jZSBpbnRlcnZhbAoJCQkJCWlmICgoJHJlbW90ZVByb2R1Y3QtPmludGVydmFsX3VuaXQgIT0gIiIpICYmICgkcmVtb3RlUHJvZHVjdC0+aW50ZXJ2YWxfdW5pdCAhPSAibnVsbCIpKQoJCQkJCXsKCQkJCQkJLy9ub3JtYWwgcmVjdXJyaW5nIHBlcmlvZAoJCQkJCQkkcmVtb3RlUmVjdXJyaW5nVW5pdCA9ICR0aGlzLT5jb252ZXJ0Q2hhcmdpZnlUb01NVW5pdHMoJHJlbW90ZVByb2R1Y3QtPmludGVydmFsX3VuaXQpOwoJCQkJCQlpZiAoIWVtcHR5KCRyZW1vdGVSZWN1cnJpbmdVbml0KSkKCQkJCQkJewoJCQkJCQkJJGxvY2FsUHJvZHVjdC0+c2V0UmViaWxsUGVyaW9kKCRyZW1vdGVQcm9kdWN0LT5pbnRlcnZhbCk7CgkJCQkJCQkkbG9jYWxQcm9kdWN0LT5zZXRSZWJpbGxGcmVxdWVuY3koJHJlbW90ZVJlY3VycmluZ1VuaXQpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCgkJCQkvL2RvbmUsIG5vdyBwZXJzaXN0IHRoZSBuZXcgcHJvZHVjdAoJCQkJJGxvY2FsUHJvZHVjdC0+Y29tbWl0RGF0YSgpOwoJCQkJCgkJCQkkZGVsZXRlTGlua1NRTCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX0NIQVJHSUZZX1BST0RVQ1RfTElOS1MuIiB3aGVyZSAoY2hhcmdpZnlfcHJvZHVjdF9hcGlfaGFuZGxlID0gJXMpIE9SIChtZW1iZXJtb3VzZV9wcm9kdWN0X2lkID0gJWQpIjsKCQkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkZGVsZXRlTGlua1NRTCwkcmVtb3RlUHJvZHVjdEFQSUhhbmRsZSwkbG9jYWxQcm9kdWN0LT5nZXRJZCgpKSk7IC8vY2xlYW4gb3V0IG9sZCBwcm9kdWN0IGxpbmthZ2VzICh3aGljaCB3b3VsZCBub3cgYmUgaW52YWxpZCkKCQkJCSRsaW5rU1FMID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfQ0hBUkdJRllfUFJPRFVDVF9MSU5LUy4iIHNldCBjaGFyZ2lmeV9wcm9kdWN0X2FwaV9oYW5kbGUgPSAlcywgbWVtYmVybW91c2VfcHJvZHVjdF9pZCA9ICVkIjsJCQkKCQkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkbGlua1NRTCwkcmVtb3RlUHJvZHVjdEFQSUhhbmRsZSwkbG9jYWxQcm9kdWN0LT5nZXRJZCgpKSk7IC8vYWRkIG5ldyBwcm9kdWN0IGxpbmsKCQkJfQoJCQkvKiogLS0tLS0tLS0tLS0tLS0gZW5kIGNvcHlpbmcgZnJvbSByZW1vdGUgdG8gbG9jYWwgLS0tLS0tLS0tLS0tLS0tICoqLwoJCX0KCQkKCQkvKiogLS0tLS0tLS0tLS0tLS0gYmVnaW4gY29weWluZyBmcm9tIGxvY2FsIHRvIHJlbW90ZSAtLS0tLS0tLS0tLS0tICoqLwoJCSRsb2NhbE9ubHlQcm9kdWN0c1NRTCA9ICJzZWxlY3QgcC5pZCBmcm9tICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBwIGxlZnQgam9pbiAiLk1NX1RBQkxFX0NIQVJHSUZZX1BST0RVQ1RfTElOS1MuIiBjcCBvbiAocC5pZCA9IGNwLm1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQpIHdoZXJlIGNwLm1lbWJlcm1vdXNlX3Byb2R1Y3RfaWQgSVMgTlVMTCI7CgkJJGxvY2FsT25seVByb2R1Y3RJRHMgPSAkd3BkYi0+Z2V0X2NvbCgkbG9jYWxPbmx5UHJvZHVjdHNTUUwpOwoJCQoJCWZvcmVhY2ggKCRsb2NhbE9ubHlQcm9kdWN0SURzIGFzICRsb2NhbFByb2R1Y3RJZCkKCQl7CgkJCSRsb2NhbFByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkbG9jYWxQcm9kdWN0SWQpOwoJCQlpZiAoJGxvY2FsUHJvZHVjdC0+aXNWYWxpZCgpKSAvL2Rvbid0IHNlZSBob3cgdGhpcyBjb3VsZCBiZSBmYWxzZSwgc2VlaW5nIGFzIHdlIGdvdCB0aGUgaWQgc3RyYWlnaHQgZnJvbSB0aGUgdGFibGUsIGJ1dCBkb2Vzbid0IGh1cnQgdG8gY2hlY2sgCgkJCXsKCQkJCSRyZXMgPSAkdGhpcy0+Y3JlYXRlUmVtb3RlUHJvZHVjdCgkbG9jYWxQcm9kdWN0KTsKCQkJCWlmICgkcmVzLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJCQl7CgkJCQkJJGVycm9yc1tdID0gJHJlcy0+bWVzc2FnZTsgLy9jb2xsZWN0IGFsbCB0aGUgZXJyb3IgbWVzc2FnZXMgZm9yIGxhdGVyCgkJCQl9CgkJCX0KCQl9CgkJLyoqIC0tLS0tLS0tLS0tLS0tIGVuZCBjb3B5aW5nIGZyb20gbG9jYWwgdG8gcmVtb3RlIC0tLS0tLS0tLS0tLS0gKiovCgkJCgkJaWYgKGlzX2FycmF5KCRlcnJvcnMpICYmIGNvdW50KCRlcnJvcnMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShpbXBsb2RlKCJcbiIsJGVycm9ycyksTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIENyZWF0ZSB0aGUgcHJvZHVjdCBvbiBDaGFyZ2lmeSB1c2luZyB0aGUgdW5kb2N1bWVudGVkLWJ1dC1zdGFibGUgcHJvZHVjdF9mYW1pbGllcy9wcm9kdWN0IGFwaSBlbmRwb2ludC4gCgkgKiBUaGUgcnVsZXMgYXJlIHRoYXQgeW91OiAKCSAqICAgICAgKm11c3QgcG9zdCB0byB0aGUgcHJvZHVjdHMgY29sbGVjdGlvbiBvZiB0aGUgcHJvZHVjdCBmYW1pbHksIGllLiAvcHJvZHVjdF9mYW1pbGllcy97cHJvZHVjdF9mYW1pbHlfaWR9L3Byb2R1Y3RzLmpzb24KCSAqICAgICAgKllvdSBjYW5ub3QgcG9zdCBhIGpzb24gYXJyYXkgb2YgcHJvZHVjdHMuIGpzb24gcHJvZHVjdCBlbnRpdGllcyBtdXN0IGJlIHBvc3RlZCBzZXBhcmF0ZWx5CgkgKiAgICAgICpQcm9kdWN0IHRheGFiaWxpdHkgaXMgbm90IHJldHVybmVkIHdpdGggdGhlIHByb2R1Y3Qgc28geW91IHdpbGwgaGF2ZSB0byBtYW51YWxseSB1cGRhdGUgdGhpcyBpbiB0aGUgVUkgaWYgbmVlZGVkCgkgKiAKCSAqIEFsc28gY3JlYXRlcyB0aGUgZW50cnkgaW4gdGhlIHByb2R1Y3QgbGlua2FnZSB0YWJsZQoJICogCgkgKiBAcGFyYW0gTU1fUHJvZHVjdCAkcHJvZHVjdCBUaGUgbWVtYmVybW91c2UgcHJvZHVjdCB0byBhZGQKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IGluZGljYXRpbmcgc3VjY2VzcyBvciBlcnJvcgoJICovCgkKCXByb3RlY3RlZCBmdW5jdGlvbiBjcmVhdGVSZW1vdGVQcm9kdWN0KE1NX1Byb2R1Y3QgJHByb2R1Y3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRwcmVKU09OUHJvZHVjdCA9IG5ldyBzdGRDbGFzcygpOwoJCQoJCS8vbmFtZSAKCQkkcHJlSlNPTlByb2R1Y3QtPm5hbWUgPSAkcHJvZHVjdC0+Z2V0TmFtZSgpOwoJCQoJCS8vaGFuZGxlCgkJJHByZUpTT05Qcm9kdWN0LT5oYW5kbGUgPSAibWVtYmVybW91c2UtIi4kcHJvZHVjdC0+Z2V0SWQoKTsKCQkKCQkvL2Rlc2NyaXB0aW9uCgkJJHByZUpTT05Qcm9kdWN0LT5kZXNjcmlwdGlvbiA9ICRwcm9kdWN0LT5nZXROYW1lKCk7CgkJCgkJaWYgKCRwcm9kdWN0LT5pc1JlY3VycmluZygpKQoJCXsKCQkJLy90cmlhbCBpbmZvCgkJCSR0cmlhbEluZm9BcnJheSA9ICR0aGlzLT5jb252ZXJ0TU1Ub0NoYXJnaWZ5VW5pdHMoJHByb2R1Y3QtPmdldFRyaWFsRHVyYXRpb24oKSwkcHJvZHVjdC0+Z2V0VHJpYWxGcmVxdWVuY3koKSk7CgkJCWlmICgkdHJpYWxJbmZvQXJyYXkgIT09IGZhbHNlKQoJCQl7CgkJCQkkdHJpYWxBbW91bnQgPSAkcHJvZHVjdC0+Z2V0VHJpYWxBbW91bnQoKTsKCQkJCWlmICghZW1wdHkoJHRyaWFsQW1vdW50KSkKCQkJCXsKCQkJCQkkcHJlSlNPTlByb2R1Y3QtPnRyaWFsX3ByaWNlX2luX2NlbnRzID0gKCRwcm9kdWN0LT5nZXRUcmlhbEFtb3VudCgpICogMTAwKTsKCQkJCX0KCQkJCQoJCQkJJHByZUpTT05Qcm9kdWN0LT50cmlhbF9pbnRlcnZhbD0kdHJpYWxJbmZvQXJyYXlbJ251bVVuaXRzJ107CgkJCQkkcHJlSlNPTlByb2R1Y3QtPnRyaWFsX2ludGVydmFsX3VuaXQ9JHRyaWFsSW5mb0FycmF5Wyd1bml0TmFtZSddOwoJCQl9CgkJCQoJCQkKCQkJLy9wcmljZQoJCQkkcHJlSlNPTlByb2R1Y3QtPnByaWNlX2luX2NlbnRzID0gJHByb2R1Y3QtPmdldFByaWNlKCkgKiAxMDA7CgkJCQoJCQkvL3JlY3VycmluZyBiaWxsaW5nIGluZm8KCQkJJHJlY3VycmVuY2VJbmZvID0gJHRoaXMtPmNvbnZlcnRNTVRvQ2hhcmdpZnlVbml0cygkcHJvZHVjdC0+Z2V0UmViaWxsUGVyaW9kKCksICRwcm9kdWN0LT5nZXRSZWJpbGxGcmVxdWVuY3koKSk7CgkJCWlmICgkcmVjdXJyZW5jZUluZm8gIT09IGZhbHNlKQoJCQl7CgkJCQkkcHJlSlNPTlByb2R1Y3QtPmludGVydmFsID0kcmVjdXJyZW5jZUluZm9bJ251bVVuaXRzJ107CgkJCQkkcHJlSlNPTlByb2R1Y3QtPmludGVydmFsX3VuaXQgPSAkcmVjdXJyZW5jZUluZm9bJ3VuaXROYW1lJ107CgkJCX0KCQkJCgkJCWlmICgoJHByb2R1Y3QtPmRvTGltaXRQYXltZW50cygpKSAmJiBpc3NldCgkcHJlSlNPTlByb2R1Y3QtPmludGVydmFsKSkKCQkJewoJCQkJJG51bWJlck9mUGF5bWVudHMgPSBpbnR2YWwoJHByb2R1Y3QtPmdldE51bWJlck9mUGF5bWVudHMoKSk7CgkJCQkkcHJlSlNPTlByb2R1Y3QtPmV4cGlyYXRpb25faW50ZXJ2YWwgPSAoJG51bWJlck9mUGF5bWVudHMgKiAkcHJlSlNPTlByb2R1Y3QtPmludGVydmFsKTsKCQkJCSRwcmVKU09OUHJvZHVjdC0+ZXhwaXJhdGlvbl9pbnRlcnZhbF91bml0ID0gJHByZUpTT05Qcm9kdWN0LT5pbnRlcnZhbF91bml0OwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkvL25vbi1yZWN1cnJpbmcgcHJvZHVjdHMgbmVlZCB0byBiZSBzZW50IGFzIGhhdmluZyBhbiBpbml0aWFsIHByaWNlIG9mIHRoZSBwcm9kdWN0IGNvc3QsIGFuZCByZWN1cnJpbmcgZm9yICQwIGRvbGxhcnMgZXZlcnkgMSBkYXkgZXhwaXJpbmcgMSBkYXkgbGF0ZXIKCQkJLy9odHRwOi8vaGVscC5jaGFyZ2lmeS5jb20vZW50cmllcy8yMDEwOTAwMy1kZWZpbmluZy1hLW9uZS10aW1lLXB1cmNoYXNlLXByb2R1Y3QKCQkJJHByZUpTT05Qcm9kdWN0LT5pbml0aWFsX2NoYXJnZV9pbl9jZW50cyA9ICRwcm9kdWN0LT5nZXRQcmljZSgpICogMTAwOwoJCQkkcHJlSlNPTlByb2R1Y3QtPnByaWNlX2luX2NlbnRzID0gMDsKCQkJJHByZUpTT05Qcm9kdWN0LT5pbnRlcnZhbCA9IDE7CgkJCSRwcmVKU09OUHJvZHVjdC0+aW50ZXJ2YWxfdW5pdCA9ICJkYXkiOwoJCQkkcHJlSlNPTlByb2R1Y3QtPmV4cGlyYXRpb25faW50ZXJ2YWwgPSAxOwoJCQkkcHJlSlNPTlByb2R1Y3QtPmV4cGlyYXRpb25faW50ZXJ2YWxfdW5pdCA9ICJkYXkiOwoJCX0KCQkKCQkkSlNPTldyYXBwZXIgPSBuZXcgc3RkQ2xhc3MoKTsKCQkkSlNPTldyYXBwZXItPnByb2R1Y3QgPSAkcHJlSlNPTlByb2R1Y3Q7CgkJJHByb2R1Y3RKU09OID0ganNvbl9lbmNvZGUoJEpTT05XcmFwcGVyKTsKCQkKCQkkY3JlYXRlUHJvZHVjdFJlc3BvbnNlID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldENoYXJnaWZ5VXJsKCkuIi9wcm9kdWN0X2ZhbWlsaWVzL3skdGhpcy0+Z2V0UHJvZHVjdEZhbWlseUlkKCl9L3Byb2R1Y3RzLmpzb24iLCJQT1NUIiwkcHJvZHVjdEpTT04sJHRoaXMtPmdldEpTT05PcHRpb25zKCkpOwoJCWlmICgkY3JlYXRlUHJvZHVjdFJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJGNyZWF0ZVByb2R1Y3RSZXNwb25zZTsKCQl9CgkJCgkJLy9vbiBzdWNjZXNzLCB3ZSBzaG91bGQgZ2V0IGJhY2sganNvbiByZXByZXNlbnRpbmcgdGhlIGNyZWF0ZWQgcHJvZHVjdAoJCSRwcm9kdWN0c0FycmF5ID0ganNvbl9kZWNvZGUoJGNyZWF0ZVByb2R1Y3RSZXNwb25zZS0+bWVzc2FnZSx0cnVlKTsKCQlpZiAoIWlzX2FycmF5KCRwcm9kdWN0c0FycmF5KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNoYXJnaWZ5IGNyZWF0ZSBwcm9kdWN0IG9wZXJhdGlvbiByZXR1cm5lZCBzdWNjZXNzIGZvciBwcm9kdWN0IHskcHJvZHVjdC0+Z2V0SWQoKX0gYnV0IGNvdWxkIG5vdCBwYXJzZSB0aGUgYXBpIGhhbmRsZSBmcm9tIHRoZSByZXNwb25zZSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRjcmVhdGVkUHJvZHVjdCA9IGFycmF5X3BvcCgkcHJvZHVjdHNBcnJheSk7CgkJJGNyZWF0ZWRQcm9kdWN0QVBJSGFuZGxlID0gaXNfYXJyYXkoJGNyZWF0ZWRQcm9kdWN0WydoYW5kbGUnXSk/YXJyYXlfcG9wKCRjcmVhdGVkUHJvZHVjdFsnaGFuZGxlJ10pOiRjcmVhdGVkUHJvZHVjdFsnaGFuZGxlJ107CgkJJGNyZWF0ZWRQcm9kdWN0QVBJSGFuZGxlID0gdHJpbSgkY3JlYXRlZFByb2R1Y3RBUElIYW5kbGUpOwoJCQoJCS8vbGluayBwcm9kdWN0CgkJJGNsZWFyU1FMID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfQ0hBUkdJRllfUFJPRFVDVF9MSU5LUy4iIHdoZXJlIGNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZT0lcyI7CgkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRjbGVhclNRTCwkY3JlYXRlZFByb2R1Y3RBUElIYW5kbGUpKTsKCQkKCQkkbGlua1Byb2R1Y3RTUUwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9DSEFSR0lGWV9QUk9EVUNUX0xJTktTLiIgc2V0IGNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZT0lcywgbWVtYmVybW91c2VfcHJvZHVjdF9pZD0lZCI7CgkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRsaW5rUHJvZHVjdFNRTCwkY3JlYXRlZFByb2R1Y3RBUElIYW5kbGUsJHByb2R1Y3QtPmdldElkKCkpKTsKCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBBcmNoaXZlIGEgcmVtb3RlIHByb2R1Y3Qgb24gQ2hhcmdpZnkuY29tCgkgKiBDaGFyZ2lmeSBkb2VzIG5vdCBhbGxvdyBwcm9kdWN0IGRlbGV0ZXM7IEluc3RlYWQgcHJvZHVjdHMgYXJlIGFyY2hpdmVkIGFuZCBhbGwgb2YgdGhlIGFzc29jaWF0ZWQgaW5mb3JtYXRpb24gaXMgcHJlc2VydmVkCgkgKiAKCSAqIEBwYXJhbSBNTV9Qcm9kdWN0ICRsb2NhbFByb2R1Y3QgVGhlIGxvY2FsIHByb2R1Y3QgdG8gYXJjaGl2ZSByZW1vdGVseQoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gYXJjaGl2ZVJlbW90ZVByb2R1Y3QoTU1fUHJvZHVjdCAkbG9jYWxQcm9kdWN0KQoJewoJCS8vb3BlcmF0aW9uIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkIG9uIENoYXJnaWZ5CgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkKCS8qKgoJICogQ29udmVydHMgYmV0d2VlbiB0aGUgdW5pdCB0eXBlcyBpbnRlcm5hbGx5IHVzZWQgYnkgTU0gdG8gc3BlY2lmeSByZWN1cnJpbmcgcGVyaW9kcyB0byB0aGUgdW5pdHMgdXNlZCBieSBjaGFyZ2lmeQoJICogSW5wdXRzIGFyZSB0aGUgbnVtYmVyIG9mIHVuaXRzIChpZS4gMykgYW5kIHRoZSB1bml0IG5hbWUgKGllLiAid2Vla3MiKS4gVGhpcyBpcyB0aGVuIGNvbnZlcnRlZCB0byBDaGFyZ2lmeSB1bml0cyBhbmQgcmV0dXJuZWQKCSAqIGluIGFuIGFycmF5LCB3aXRoIHRoZSBrZXlzICJudW1Vbml0cyIgYW5kICJ1bml0TmFtZSIuIFNvIHVzaW5nIHRoZSBhYm92ZSB2YWx1ZXMgYXMgYW4gZXhhbXBsZSwgdGhlIHJldHVybmVkIGFycmF5IHdvdWxkIGNvbnRhaW4KCSAqICgibnVtVW5pdHMiPT4yMSwgInVuaXROYW1lIj0+ImRheSIpLiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgZmFsc2UgaWYgYSB2YWx1ZSBvZiAwIGlzIHBhc3NlZCBpbiBmb3IgbnVtVW5pdHMKCSAqIAoJICogQHBhcmFtIGludCAkbnVtVW5pdHMgQW4gaW50ZWdlciByZXByZXNlbnRpbmcgdGhlIG51bWJlciBvZiB1bml0cyBvZiBtZWFzdXJlbWVudAoJICogQHBhcmFtIFN0cmluZyAkdW5pdE5hbWUgVGhlIG5hbWUgb2YgdGhlIGxvY2FsIHVuaXQgb2YgbWVhc3VyZW1lbnQKCSAqIEByZXR1cm4gYm9vbGVhbiBmYWxzZSBvbiBlcnJvciwgYXJyYXkgY29udGFpbmluZyB0aGUga2V5cyAibnVtVW5pdHMiIGFuZCAidW5pdE5hbWUiIGFsb25nIHdpdGggdGhlIGFwcHJvcHJpYXRlIHZhbHVlcyBvbiBzdWNjZXNzLiBBbHNvIHJldHVybnMgZmFsc2UgaWYgbnVtVW5pdHMgaXMgMAoJICovCglwcml2YXRlIGZ1bmN0aW9uIGNvbnZlcnRNTVRvQ2hhcmdpZnlVbml0cygkbnVtVW5pdHMsICR1bml0TmFtZSkKCXsKCQlpZiAoIWlzX251bWVyaWMoJG51bVVuaXRzKSB8fCAoJG51bVVuaXRzID09IDApKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQlzd2l0Y2ggKCR1bml0TmFtZSkgCgkJewkKCQkJY2FzZSAibW9udGhzIjoKCQkJCXJldHVybiBhcnJheSgibnVtVW5pdHMiPT4kbnVtVW5pdHMsICJ1bml0TmFtZSI9PiJtb250aCIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgImRheXMiOgoJCQkJcmV0dXJuIGFycmF5KCJudW1Vbml0cyI9PiRudW1Vbml0cywgInVuaXROYW1lIj0+ImRheSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgIndlZWtzIjoKCQkJCXJldHVybiBhcnJheSgibnVtVW5pdHMiPT4kbnVtVW5pdHMqNywgInVuaXROYW1lIj0+ImRheSIpOwoJCQkJYnJlYWs7CgkJCWNhc2UgInllYXJzIjoKCQkJCXJldHVybiBhcnJheSgibnVtVW5pdHMiPT4kbnVtVW5pdHMqMTIsICJ1bml0TmFtZSI9PiJtb250aCIpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCXJldHVybiBmYWxzZTsgLy9zaG91bGRuJ3QgZXZlciByZWFjaCBoZXJlCgl9CgkKCQoJLyoqCgkgKiBDb252ZXJ0cyBDaGFyZ2lmeSB1bml0cyBvZiBtZWFzdXJlbWVudCB0byB0aG9zZSB1c2VkIGJ5IE1lbWJlck1vdXNlCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHVuaXROYW1lIFRoZSB1bml0IG9mIG1lYXN1cmVtZW50IHVzZWQgYnkgQ2hhcmdpZnkKCSAqIEByZXR1cm4gU3RyaW5nIGNvbnRhaW5pbmcgdGhlIGVxdWl2YWxlbnQgTWVtYmVyTW91c2UgdW5pdCBvZiBtZWFzdXJlbWVudAoJICovCglwcml2YXRlIGZ1bmN0aW9uIGNvbnZlcnRDaGFyZ2lmeVRvTU1Vbml0cygkdW5pdE5hbWUpCgl7CgkJLy9UT0RPOiByZWZhY3RvcjogbWFrZSB0aGlzIGZ1bmN0aW9uIGFjY2VwdCBudW1Vbml0cyBzbyB0aGF0IGl0cyBtb3JlIHJvYnVzdCBpZiBjaGFyZ2lmeSBldmVyIGNoYW5nZXMgaG93IHRoZXkgb3BlcmF0ZQoJCSR1bml0TmFtZSA9IHRyaW0oJHVuaXROYW1lKTsKCQkkdW5pdE5hbWUgPSBzdHJ0b3VwcGVyKCR1bml0TmFtZSk7CgkJCgkJaWYgKCR1bml0TmFtZSA9PSAiREFZIikKCQl7CgkJCXJldHVybiAiZGF5cyI7CgkJfQoJCQoJCWlmICgkdW5pdE5hbWUgPT0gIk1PTlRIIikKCQl7CgkJCXJldHVybiAibW9udGhzIjsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBSZXRyaWV2ZXMgdGhlIGNoYXJnaWZ5IGN1c3RvbWVyIGlkIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VzdG9tZXIgaGF2aW5nIHRoZSBzdXBwbGllZCBlbWFpbCBhZGRyZXNzCgkgKiAKCSAqIEBwYXJhbSAkZW1haWwgVGhlIGVtYWlsIGFkZHJlc3MgdG8gc2VhcmNoIHRoZSByZW1vdGUgc2VydmVyIGZvcgoJICogQHJldHVybiBNTV9SZXNwb25zZSBUaGUgbWVzc2FnZSBjb250YWlucyB0aGUgY2hhcmdpZnkgY3VzdG9tZXIgaWQgb24gc3VjY2VzcywgYW5kIGFuIGVycm9yIG1lc3NhZ2UgKGFsb25nIHdpdGggdGhlIHR5cGUgYmVpbmcgc2V0IHRvIGVycm9yKSBpZiB0aGUgY3VzdG9tZXIgd2FzIG5vdCBmb3VuZCBvciBzb21lIG90aGVyIGVycm9yIG9jY3VycmVkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRSZW1vdGVDdXN0b21lckJ5RW1haWwoJGVtYWlsKQoJewoJCWlmIChlbXB0eSgkZW1haWwpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyByZW1vdGUgY3VzdG9tZXI6IG5vIGVtYWlsIHN1cHBsaWVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHVybEVuY29kZWRFbWFpbCA9IHVybGVuY29kZSgkZW1haWwpOwoJCSRjdXN0b21lclJlc3BvbnNlID0gJHRoaXMtPmRvSFRUUFJlcXVlc3QoJHRoaXMtPmdldENoYXJnaWZ5VXJsKCkuIi9jdXN0b21lcnMvbG9va3VwLmpzb24/cmVmZXJlbmNlPXskdXJsRW5jb2RlZEVtYWlsfSIsIkdFVCIsIiIsJHRoaXMtPmdldEpTT05PcHRpb25zKCkpOwoJCWlmICgkY3VzdG9tZXJSZXNwb25zZS0+dHlwZSAhPSBNTV9SZXNwb25zZTo6JEVSUk9SKQoJCXsKCQkJJGN1c3RvbWVyV3JhcHBlciA9IGpzb25fZGVjb2RlKCRjdXN0b21lclJlc3BvbnNlLT5tZXNzYWdlKTsKCQkJaWYgKCRjdXN0b21lcldyYXBwZXIgPT09IGZhbHNlKQoJCQl7CgkJCQkkY3VzdG9tZXJSZXNwb25zZS0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkkY3VzdG9tZXJSZXNwb25zZS0+bWVzc2FnZSA9ICJFcnJvciByZXRyaWV2aW5nIHJlbW90ZSBjdXN0b21lcjogaW52YWxpZCBqc29uIHJldHVybmVkIjsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCWlmICghaXNzZXQoJGN1c3RvbWVyV3JhcHBlci0+Y3VzdG9tZXIpKQoJCQkJewoJCQkJCSRjdXN0b21lclJlc3BvbnNlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJCQkkY3VzdG9tZXJSZXNwb25zZS0+bWVzc2FnZSA9ICJFcnJvciByZXRyaWV2aW5nIHJlbW90ZSBjdXN0b21lcjogbm8gY3VzdG9tZXIgcmV0dXJuZWQgaW4gcmVzcG9uc2UiOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRjdXN0b21lclJlc3BvbnNlLT5tZXNzYWdlID0gJGN1c3RvbWVyV3JhcHBlci0+Y3VzdG9tZXI7CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuICRjdXN0b21lclJlc3BvbnNlOwoJfQoJCgkKCS8qKgoJICogUmV0cmlldmVzIGEgY2hhcmdpZnkgY3VzdG9tZXIgdXNpbmcgdGhlIGNoYXJnaWZ5IGN1c3RvbWVyIGlkCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJGNoYXJnaWZ5Q3VzdG9tZXJJZCBUaGUgaWQgb2YgdGhlIGN1c3RvbWVyIHRvIGxvb2sgdXAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgY3VzdG9tZXIgb2JqZWN0IG9uIHN1Y2Nlc3MsIG9yIGFuIGVycm9yIG1lc3NhZ2Ugb24gZmFpbHVyZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmVtb3RlQ3VzdG9tZXJCeUlkKCRjaGFyZ2lmeUN1c3RvbWVySWQpCgl7CgkJaWYgKGVtcHR5KCRjaGFyZ2lmeUN1c3RvbWVySWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgcmV0cmlldmluZyByZW1vdGUgY3VzdG9tZXI6IG5vIGlkIHN1cHBsaWVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkKCQkkY3VzdG9tZXJSZXNwb25zZSA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRDaGFyZ2lmeVVybCgpLiIvY3VzdG9tZXJzL3skY2hhcmdpZnlDdXN0b21lcklkfS5qc29uIiwiR0VUIiwiIiwkdGhpcy0+Z2V0SlNPTk9wdGlvbnMoKSk7CgkJaWYgKCRjdXN0b21lclJlc3BvbnNlLT50eXBlICE9IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQkkY3VzdG9tZXJXcmFwcGVyID0ganNvbl9kZWNvZGUoJGN1c3RvbWVyUmVzcG9uc2UtPm1lc3NhZ2UpOwoJCQlpZiAoJGN1c3RvbWVyV3JhcHBlciA9PT0gZmFsc2UpCgkJCXsKCQkJCSRjdXN0b21lclJlc3BvbnNlLT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJCSRjdXN0b21lclJlc3BvbnNlLT5tZXNzYWdlID0gIkVycm9yIHJldHJpZXZpbmcgcmVtb3RlIGN1c3RvbWVyOiBpbnZhbGlkIGpzb24gcmV0dXJuZWQiOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJaWYgKCFpc3NldCgkY3VzdG9tZXJXcmFwcGVyLT5jdXN0b21lcikpCgkJCQl7CgkJCQkJJGN1c3RvbWVyUmVzcG9uc2UtPnR5cGUgPSBNTV9SZXNwb25zZTo6JEVSUk9SOwoJCQkJCSRjdXN0b21lclJlc3BvbnNlLT5tZXNzYWdlID0gIkVycm9yIHJldHJpZXZpbmcgcmVtb3RlIGN1c3RvbWVyOiBubyBjdXN0b21lciByZXR1cm5lZCBpbiByZXNwb25zZSI7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGN1c3RvbWVyUmVzcG9uc2UtPm1lc3NhZ2UgPSAkY3VzdG9tZXJXcmFwcGVyLT5jdXN0b21lcjsKCQkJCX0KCQkJfQoJCX0KCQlyZXR1cm4gJGN1c3RvbWVyUmVzcG9uc2U7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGEgcmVtb3RlIGN1c3RvbWVyIHVzaW5nIHRoZSBpbmZvcm1hdGlvbiBzdXBwbGllZCBmcm9tIGEgbG9jYWwgY3VzdG9tZXIsIGFuZCBsaW5rIHRoZW0gaW4gdGhlIGxvY2FsIGxpbmsgdGFibGUKCSAqIAoJICogQHBhcmFtIE1NX1VzZXIgJGxvY2FsQ3VzdG9tZXIgVGhlIG1lbWJlcm1vdXNlIHVzZXIgdG8gY3JlYXRlIGEgY2hhcmdpZnkgY3VzdG9tZXIgZm9yCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGNyZWF0ZWQgY2hhcmdpZnkgY3VzdG9tZXIgb24gc3VjY2Vzcywgb3IgYW4gZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjcmVhdGVSZW1vdGVDdXN0b21lcihNTV9Vc2VyICRsb2NhbEN1c3RvbWVyKQoJewoJCWdsb2JhbCAkd3BkYjsgCgkJCgkJJHJlbW90ZUN1c3RvbWVyID0gbmV3IHN0ZENsYXNzKCk7CgkJJHJlbW90ZUN1c3RvbWVyLT5maXJzdF9uYW1lID0gJGxvY2FsQ3VzdG9tZXItPmdldEZpcnN0TmFtZSgpOwoJCSRyZW1vdGVDdXN0b21lci0+bGFzdF9uYW1lICA9ICRsb2NhbEN1c3RvbWVyLT5nZXRMYXN0TmFtZSgpOwoJCSRyZW1vdGVDdXN0b21lci0+ZW1haWwgICAgICA9ICRsb2NhbEN1c3RvbWVyLT5nZXRFbWFpbCgpOwoJCSRyZW1vdGVDdXN0b21lci0+cmVmZXJlbmNlICA9ICRsb2NhbEN1c3RvbWVyLT5nZXRFbWFpbCgpOwoJCSRqc29uV3JhcHBlciA9IG5ldyBzdGRDbGFzcygpOwoJCSRqc29uV3JhcHBlci0+Y3VzdG9tZXIgPSAkcmVtb3RlQ3VzdG9tZXI7CgkJJGN1c3RvbWVySlNPTiA9IGpzb25fZW5jb2RlKCRqc29uV3JhcHBlcik7CgkJCgkJJGNyZWF0ZUN1c3RvbWVyUmVzcG9uc2UgPSAkdGhpcy0+ZG9IVFRQUmVxdWVzdCgkdGhpcy0+Z2V0Q2hhcmdpZnlVcmwoKS4iL2N1c3RvbWVycy5qc29uIiwiUE9TVCIsJGN1c3RvbWVySlNPTiwkdGhpcy0+Z2V0SlNPTk9wdGlvbnMoKSk7CgkJaWYgKCRjcmVhdGVDdXN0b21lclJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpCgkJewoJCQlyZXR1cm4gJGNyZWF0ZUN1c3RvbWVyUmVzcG9uc2U7CgkJfQoJCQoJCSRjcmVhdGVkT2JqZWN0ID0ganNvbl9kZWNvZGUoJGNyZWF0ZUN1c3RvbWVyUmVzcG9uc2UtPm1lc3NhZ2UpOwoJCWlmICghaXNzZXQoJGNyZWF0ZWRPYmplY3QtPmN1c3RvbWVyKSB8fCAhaXNzZXQoJGNyZWF0ZWRPYmplY3QtPmN1c3RvbWVyLT5pZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBjdXN0b21lciBmb3IgeyRsb2NhbEN1c3RvbWVyLT5nZXRFbWFpbCgpfTogcmVtb3RlIHNpZGUgZGlkIHJldHVybiB0aGUgZXhwZWN0ZWQgcmVzcG9uc2UiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkY2hhcmdpZnlDdXN0b21lcklkID0gJGNyZWF0ZWRPYmplY3QtPmN1c3RvbWVyX2lkOwoJCSRjcmVhdGVDdXN0b21lclJlc3BvbnNlLT5tZXNzYWdlID0gJGNyZWF0ZWRPYmplY3QtPmN1c3RvbWVyOwoJCQoJCSRjdXN0b21lckxpbmtTUUwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9DSEFSR0lGWV9DVVNUT01FUl9MSU5LUy4iIHNldCBjaGFyZ2lmeV9jdXN0b21lcl9pZD0lcywgbWVtYmVybW91c2VfY3VzdG9tZXJfaWQ9JWQiOwoJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkY3VzdG9tZXJMaW5rU1FMLCRjaGFyZ2lmeUN1c3RvbWVySWQsJGxvY2FsQ3VzdG9tZXItPmdldElkKCkpKTsKCQkKCQlyZXR1cm4gJGNyZWF0ZUN1c3RvbWVyUmVzcG9uc2U7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGEgc3Vic2NyaXB0aW9uIG9uIHRoZSBjaGFyZ2lmeSBzZXJ2ZXIuIEVpdGhlciBjcmVkaXQgY2FyZCBpbmZvciBvciBhIHBheW1lbnQgcHJvZmlsZSBpZCBtdXN0IGJlIHN1cHBsaWVkCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIGJlaW5nIGNoYXJnZWQuIFVzZWQgdG8gcmVmZXJlbmNlIHRoZSBjdXN0b21lciBhbmQgYmlsbGluZy9zaGlwcGluZyBhZGRyZXNzZXMKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJHByb2R1Y3RJdGVtIFRoZSBwcm9kdWN0IChyZXByZXNlbnRlZCBhcyBhbiBNTV9PcmRlckl0ZW0pIHRvIGNyZWF0ZSBhIGNoYXJnZSBmb3IKCSAqIEBwYXJhbSBTdHJpbmcgJGNoYXJnaWZ5Q3VzdG9tZXJJZCAob3B0aW9uYWwpIElmIG5vbi1udWxsLCB0aGlzIGN1c3RvbWVyIGlkIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdGhlIHN1YnNjcmlwdGlvbiwgb3RoZXJ3aXNlIGEgbmV3IGN1c3RvbWVyIHdpbGwgYmUgY3JlYXRlZAoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyAob3B0aW9uYWwpIFRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byB1c2UuIElmIG5vdCBwcmVzZW50LCBhIHBheW1lbnRQcm9maWxlSWQgbXVzdCBiZSBzdXBwbGllZAoJICogQHBhcmFtIFN0cmluZyAkcGF5bWVudFByb2ZpbGVJZCAob3B0aW9uYWwpIFRoZSBwYXltZW50IHByb2ZpbGUgaWQgdG8gY2hhcmdlIGFnYWluc3QuIFVzZWQgaWYgdGhlcmUgaXMgYSBjYXJkIG9uIGZpbGUuIElmIG5vdCBwcmVzZW50LCBjYXJkSW5mbyBtdXN0IGJlIHN1cHBsaWVkCgkgKiBAcGFyYW0gTU1fQ291cG9uICRjb3Vwb24gKG9wdGlvbmFsKSBUaGUgY291cG9uIHRvIGFwcGx5IHRvIHRoaXMgb3JkZXIsIGlmIGFueS4KCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIHJlcHJlc2VudGluZyB0aGUgc3RhdHVzIG9mIHRoZSByZXF1ZXN0LiBPbiBzdWNjZXNzLCB0aGUgc3Vic2NyaXB0aW9uIG9iamVjdCB3aWxsIGJlIHJldHVybmVkIAoJICovCglwdWJsaWMgZnVuY3Rpb24gY3JlYXRlUmVtb3RlU3Vic2NyaXB0aW9uKE1NX09yZGVyICRvcmRlciwgTU1fT3JkZXJJdGVtICRwcm9kdWN0SXRlbSwgJGNoYXJnaWZ5Q3VzdG9tZXJJZD1udWxsLCBNTV9DYXJkSW5mbyAkY2FyZEluZm8gPSBudWxsLCAkcGF5bWVudFByb2ZpbGVJZCA9IG51bGwsIE1NX0NvdXBvbiAkY291cG9uID0gbnVsbCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCRvcmRlciA9PSBudWxsKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciBjcmVhdGluZyBzdWJzY3JpcHRpb246IG5vIG9yZGVyIHN1cHBsaWVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoJHByb2R1Y3RJdGVtID09IG51bGwpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHN1YnNjcmlwdGlvbjogbm8gcHJvZHVjdCBzdXBwbGllZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNoYXJnaWZ5UHJvZHVjdEFQSUhhbmRsZSA9IGlzc2V0KCR0aGlzLT5wcm9kdWN0Q2FjaGVbJHByb2R1Y3RJdGVtLT5nZXRJdGVtSWQoKV0pPyR0aGlzLT5wcm9kdWN0Q2FjaGVbJHByb2R1Y3RJdGVtLT5nZXRJdGVtSWQoKV06IiI7CgkJaWYgKGVtcHR5KCRjaGFyZ2lmeVByb2R1Y3RBUElIYW5kbGUpKQoJCXsKCQkJJGNoYXJnaWZ5UHJvZHVjdEFQSUhhbmRsZSA9ICR0aGlzLT5sb29rdXBQcm9kdWN0SGFuZGxlQnlJZCgkcHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpKTsKCQkJaWYgKCRjaGFyZ2lmeVByb2R1Y3RBUElIYW5kbGUgPT09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHN1YnNjcmlwdGlvbjogcHJvZHVjdCB3aXRoIGlkIHskcHJvZHVjdEl0ZW0tPmdldEl0ZW1JZCgpfSBpcyBub3QgbGlua2VkIHRvIGEgY2hhcmdpZnkgcHJvZHVjdCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQlpZiAoKCRjYXJkSW5mbyA9PSBudWxsKSAmJiAoJHBheW1lbnRQcm9maWxlSWQgPT0gbnVsbCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIHN1YnNjcmlwdGlvbjogbm8gcGF5bWVudCBpbmZvcm1hdGlvbiBzdXBwbGllZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9hdCB0aGlzIHBvaW50LCB3ZSBhcmUgYXNzdXJlZCB3ZSBoYXZlIGFuIG9yZGVyLCBwcm9kdWN0LCBjdXN0b21lciwgYW5kIHBheW1lbnQgaW5mb3JtYXRpb24sIHNvIGxldHMgY3JlYXRlIHRoZSBzdWJzY3JpcHRpb24KCQkkc3Vic2NyaXB0aW9uT2JqZWN0ID0gbmV3IHN0ZENsYXNzKCk7CgkJJHN1YnNjcmlwdGlvbk9iamVjdC0+cHJvZHVjdF9oYW5kbGUgPSAkY2hhcmdpZnlQcm9kdWN0QVBJSGFuZGxlOwoJCQoJCSRiYSA9ICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKTsgLy90aGlzIHdpbGwgYmUgdXNlZCBzaG9ydGx5IGlmIGl0cyBhIG5ldyBjdXN0b21lciBhbmQvb3IgcGF5bWVudCBwcm9maWxlCgkJLy9wbHVnIGluIGN1c3RvbWVyIGRhdGEKCQlpZiAoJGNoYXJnaWZ5Q3VzdG9tZXJJZCAhPSBudWxsKQoJCXsKCQkJJHN1YnNjcmlwdGlvbk9iamVjdC0+Y3VzdG9tZXJfaWQgPSAkY2hhcmdpZnlDdXN0b21lcklkOwoJCX0KCQllbHNlIAoJCXsKCQkJJGN1c3RvbWVyID0gJG9yZGVyLT5nZXRDdXN0b21lcigpOwoJCQkkY3VzdG9tZXJBdHRyaWJ1dGVzID0gbmV3IHN0ZENsYXNzKCk7CgkJCSRjdXN0b21lckF0dHJpYnV0ZXMtPmZpcnN0X25hbWUgPSAoIWlzX251bGwoJGN1c3RvbWVyLT5nZXRGaXJzdE5hbWUoKSkgJiYgKCRjdXN0b21lci0+Z2V0Rmlyc3ROYW1lKCkgIT0gIiIpKT8kY3VzdG9tZXItPmdldEZpcnN0TmFtZSgpOiRiYS0+Z2V0Rmlyc3ROYW1lKCk7CgkJCSRjdXN0b21lckF0dHJpYnV0ZXMtPmxhc3RfbmFtZSAgPSAoIWlzX251bGwoJGN1c3RvbWVyLT5nZXRMYXN0TmFtZSgpKSAmJiAoJGN1c3RvbWVyLT5nZXRMYXN0TmFtZSgpICE9ICIiKSk/JGN1c3RvbWVyLT5nZXRMYXN0TmFtZSgpOiRiYS0+Z2V0TGFzdE5hbWUoKTsKCQkJJGN1c3RvbWVyQXR0cmlidXRlcy0+ZW1haWwgICAgICA9ICRjdXN0b21lci0+Z2V0RW1haWwoKTsKCQkJJGN1c3RvbWVyQXR0cmlidXRlcy0+cmVmZXJlbmNlICA9ICRjdXN0b21lci0+Z2V0RW1haWwoKTsKCQkJJHN1YnNjcmlwdGlvbk9iamVjdC0+Y3VzdG9tZXJfYXR0cmlidXRlcyA9ICRjdXN0b21lckF0dHJpYnV0ZXM7CgkJfQoJCQoJCS8vcGx1ZyBpbiBwYXltZW50IGluZm8KCQlpZiAoJHBheW1lbnRQcm9maWxlSWQgIT0gbnVsbCkKCQl7CgkJCSRzdWJzY3JpcHRpb25PYmplY3QtPnBheW1lbnRfcHJvZmlsZV9pZCA9ICRwYXltZW50UHJvZmlsZUlkOwoJCX0KCQllbHNlIAoJCXsKCQkJJHBheW1lbnRQcm9maWxlQXR0cmlidXRlcyA9IG5ldyBzdGRDbGFzcygpOwoJCQkkcGF5bWVudFByb2ZpbGVBdHRyaWJ1dGVzLT5maXJzdF9uYW1lICAgICAgID0gJGJhLT5nZXRGaXJzdE5hbWUoKTsKCQkJJHBheW1lbnRQcm9maWxlQXR0cmlidXRlcy0+bGFzdF9uYW1lICAgICAgICA9ICRiYS0+Z2V0TGFzdE5hbWUoKTsKCQkJJHBheW1lbnRQcm9maWxlQXR0cmlidXRlcy0+ZnVsbF9udW1iZXIgICAgICA9ICRjYXJkSW5mby0+Z2V0Q2FyZE51bWJlcigpOwoJCQkkcGF5bWVudFByb2ZpbGVBdHRyaWJ1dGVzLT5leHBpcmF0aW9uX21vbnRoID0gJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKTsKCQkJJHBheW1lbnRQcm9maWxlQXR0cmlidXRlcy0+ZXhwaXJhdGlvbl95ZWFyICA9ICRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvblllYXIoKTsKCQkJJGN2diA9ICRjYXJkSW5mby0+Z2V0Q1ZWKCk7CgkJCWlmICghZW1wdHkoJGN2dikpCgkJCXsKCQkJCSRwYXltZW50UHJvZmlsZUF0dHJpYnV0ZXMtPmN2diA9ICRjdnY7CgkJCX0KCQkJJHBheW1lbnRQcm9maWxlQXR0cmlidXRlcy0+YmlsbGluZ19hZGRyZXNzICA9ICRiYS0+Z2V0QWRkcmVzc0xpbmUxKCk7CgkJCSRwYXltZW50UHJvZmlsZUF0dHJpYnV0ZXMtPmJpbGxpbmdfYWRkcmVzcyAgPSAkYmEtPmdldEFkZHJlc3NMaW5lMigpOwoJCQkkcGF5bWVudFByb2ZpbGVBdHRyaWJ1dGVzLT5iaWxsaW5nX2NpdHkgICAgID0gJGJhLT5nZXRDaXR5KCk7CgkJCSRwYXltZW50UHJvZmlsZUF0dHJpYnV0ZXMtPmJpbGxpbmdfc3RhdGUgICAgPSAkYmEtPmdldFN0YXRlKCk7CgkJCSRwYXltZW50UHJvZmlsZUF0dHJpYnV0ZXMtPmJpbGxpbmdfemlwICAgICAgPSAkYmEtPmdldFBvc3RhbENvZGUoKTsKCQkJJHBheW1lbnRQcm9maWxlQXR0cmlidXRlcy0+YmlsbGluZ19jb3VudHJ5ICA9ICRiYS0+Z2V0Q291bnRyeSgpOwoJCQkkc3Vic2NyaXB0aW9uT2JqZWN0LT5wYXltZW50X3Byb2ZpbGVfYXR0cmlidXRlcyA9ICRwYXltZW50UHJvZmlsZUF0dHJpYnV0ZXM7CgkJfQoJCQoJCS8vTk9URTogY3VycmVudGx5IGJlY2F1c2UgY2hhcmdpZnkgZG9lc24ndCBzdXBwb3J0IGUtY29tbWVyY2UsIGl0IGlzIGFzc3VtZWQgb25seSBvbmUgY291cG9uIHdpbGwgYmUgdXNlZCBhbmQgb25seSBvbmUgcHJvZHVjdCB3aWxsIGJlIGNoYXJnZWQgYXQgYSB0aW1lCgkJLy9JZiB0aG9zZSBhc3N1bXB0aW9ucyBldmVyIGNoYW5nZSwgdGhpcyB3aG9sZSBtZXRob2Qgd2lsbCBuZWVkIHRvIGJlIHNsaWdodCByZWZhY3RvcmVkLCBhbmQgdGhlIGdsb2JhbCBhbmQgcGVyIHByb2R1Y3QgY291cG9uIHF1ZXVlcyB3aWxsIG5lZWQgdG8gYmUgcHV0CgkJLy9pbiBwbGF5CgkJaWYgKCFpc19udWxsKCRjb3Vwb24pKQoJCXsKCQkJJHN1YnNjcmlwdGlvbk9iamVjdC0+Y291cG9uX2NvZGUgPSAkY291cG9uLT5nZXRDb3Vwb25Db2RlKCk7CQoJCX0KCQkKCQkkc3Vic2NyaXB0aW9uV3JhcHBlciA9IG5ldyBzdGRDbGFzcygpOwoJCSRzdWJzY3JpcHRpb25XcmFwcGVyLT5zdWJzY3JpcHRpb24gPSAkc3Vic2NyaXB0aW9uT2JqZWN0OwoJCSRzdWJzY3JpcHRpb25KU09OID0ganNvbl9lbmNvZGUoJHN1YnNjcmlwdGlvbldyYXBwZXIpOwoJCSRyZXNwb25zZSA9ICR0aGlzLT5kb0hUVFBSZXF1ZXN0KCR0aGlzLT5nZXRDaGFyZ2lmeVVybCgpLiIvc3Vic2NyaXB0aW9ucyIsIlBPU1QiLCRzdWJzY3JpcHRpb25KU09OLCR0aGlzLT5nZXRKU09OT3B0aW9ucygpKTsKCQlpZiAoJHJlc3BvbnNlLT50eXBlICE9IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUykKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkcmVzcG9uc2UtPm1lc3NhZ2UsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRzdWJzY3JpcHRpb25SZXNwb25zZSA9IGpzb25fZGVjb2RlKCRyZXNwb25zZS0+bWVzc2FnZSk7CgkJaWYgKCRzdWJzY3JpcHRpb25SZXNwb25zZSA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIHBhcnNpbmcgdGhlIHJlc3VsdHMgb2YgYSBzdWJzY3JpcHRpb24gY3JlYXRpb24gcmVxdWVzdCBmcm9tIENoYXJnaWZ5IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2xpbmsgdGhpcyBzdWJzY3JpcHRpb24gdG8gdGhlIG9yZGVyIGl0ZW0KCQlpZiAoIWVtcHR5KCRzdWJzY3JpcHRpb25SZXNwb25zZS0+c3Vic2NyaXB0aW9uLT5pZCkpCgkJewoJCQkkbGlua1Jlc3VsdCA9ICR0aGlzLT5saW5rU3Vic2NyaXB0aW9uVG9PcmRlckl0ZW0oJHN1YnNjcmlwdGlvblJlc3BvbnNlLT5zdWJzY3JpcHRpb24tPmlkLCAkcHJvZHVjdEl0ZW0pOwoJCQkvL2lmIHRoZSBsaW5raW5nIGZhaWxzLCB0aGF0cyBiYWQsIGJ1dCBsZXRzIGNvbnRpbnVlIGZvciBub3cKCQl9CgkJCgkJLy9zdG9yZSB0aGUgY2FyZCBvbiBmaWxlIGlmIG5lY2Vzc2FyeQoJCWlmIChpc19udWxsKCRwYXltZW50UHJvZmlsZUlkKSAmJiBpc3NldCgkc3Vic2NyaXB0aW9uUmVzcG9uc2UtPnN1YnNjcmlwdGlvbikgJiYgaXNzZXQoJHN1YnNjcmlwdGlvblJlc3BvbnNlLT5zdWJzY3JpcHRpb24tPmNyZWRpdF9jYXJkKSAmJiBpc3NldCgkc3Vic2NyaXB0aW9uUmVzcG9uc2UtPnN1YnNjcmlwdGlvbi0+Y3JlZGl0X2NhcmQtPmlkKSkKCQl7CgkJCSRwYXltZW50UHJvZmlsZUlkID0gJHN1YnNjcmlwdGlvblJlc3BvbnNlLT5zdWJzY3JpcHRpb24tPmNyZWRpdF9jYXJkLT5pZDsKCQkJJGNhcmRPbkZpbGVTUUwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9DQVJEX09OX0ZJTEUuIiBzZXQgdXNlcl9pZD0lZCwgcGF5bWVudF9zZXJ2aWNlX2lkPSVkLCBwYXltZW50X3NlcnZpY2VfaWRlbnRpZmllcj0lcywgb3JpZ2luYWxfb3JkZXJfaWQ9JXMiOwoJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJGNhcmRPbkZpbGVTUUwsJG9yZGVyLT5nZXRDdXN0b21lcigpLT5nZXRJZCgpLCR0aGlzLT5nZXRJZCgpLCRwYXltZW50UHJvZmlsZUlkLCRvcmRlci0+Z2V0SWQoKSkpOwkKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRzdWJzY3JpcHRpb25SZXNwb25zZS0+c3Vic2NyaXB0aW9uKTsKCX0KCQoJCgkvKioKCSAqIExpbmtzIGEgY2hhcmdpZnkgc3Vic2NyaXB0aW9uIHRvIGEgbWVtYmVybW91c2Ugb3JkZXIgaXRlbQoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRzdWJzY3JpcHRpb25JZAoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgbGluayB3YXMgc3RvcmVkIGNvcnJlY3RseSwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBsaW5rU3Vic2NyaXB0aW9uVG9PcmRlckl0ZW0oJHN1YnNjcmlwdGlvbklkLCBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy9UT0RPOiBSRUZBQ1RPUjogZXZhbHVhdGUgYWRkaW5nIGFkZGl0aW9uYWwgbG9naWMgdG8gZW5mb3JjZSB0aGF0IHRoZXJlIGNhbiBvbmx5IGJlIG9uZSBzdWNoIGxpbmsKCgkJLy92YWxpZGF0ZSBwYXJhbWV0ZXJzCgkJaWYgKGVtcHR5KCRzdWJzY3JpcHRpb25JZCkgfHwgZW1wdHkoJG9yZGVySXRlbSkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCSRzdWJzY3JpcHRpb25MaW5rRGF0YSA9IGFycmF5KAoJCQkJImNoYXJnaWZ5X3N1YnNjcmlwdGlvbl9pZCIgID0+ICRzdWJzY3JpcHRpb25JZCwKCQkJCSJtZW1iZXJtb3VzZV9vcmRlcl9pZCIgICAgICA9PiAkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCksCgkJCQkibWVtYmVybW91c2Vfb3JkZXJfaXRlbV9pZCIgPT4gJG9yZGVySXRlbS0+Z2V0SWQoKQoJCQkJKTsKCQkkbGlua1Jlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ0hBUkdJRllfU1VCU0NSSVBUSU9OX0xJTktTLCAkc3Vic2NyaXB0aW9uTGlua0RhdGEpOwoJCXJldHVybiAkbGlua1Jlc3VsdDsKCX0KCQoJCgkvKioKCSAqIExvb2t1cCBhbiBvcmRlciBpdGVtIGlkIGZyb20gYSBsaW5rZWQgQ2hhcmdpZnkgc3Vic2NyaXB0aW9uIGlkCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSB0byBxdWVyeSBhZ2FpbnN0CgkgKiBAcmV0dXJuICRzdWJzY3JpcHRpb25JZCBpZiBmb3VuZCwgbnVsbCBpZiBubyBsaW5rZWQgc3Vic2NyaXB0aW9uIGlkIGV4aXN0cyBvciB0aGVyZSB3YXMgYW4gZXJyb3IKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxvb2t1cE9yZGVySXRlbUZyb21TdWJzY3JpcHRpb25JZCgkc3Vic2NyaXB0aW9uSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChlbXB0eSgkb3JkZXJJdGVtKSB8fCAhKCRvcmRlckl0ZW0gaW5zdGFuY2VvZiBNTV9PcmRlckl0ZW0pKQoJCXsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCQoJCSRsb29rdXBTUUwgPSAic2VsZWN0IG1lbWJlcm1vdXNlX29yZGVyX2l0ZW1faWQgZnJvbSAiLk1NX1RBQkxFX0NIQVJHSUZZX1NVQlNDUklQVElPTl9MSU5LUy4iIHdoZXJlIGNoYXJnaWZ5X3N1YnNjcmlwdGlvbl9pZCA9ICVzIjsKCQkkb3JkZXJJdGVtSWQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkbG9va3VwU1FMLCRzdWJzY3JpcHRpb25JZCkpOwoJCXJldHVybiAkb3JkZXJJdGVtSWQ7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm4gdGhlIGNoYXJnaWZ5IHByb2R1Y3QgYXBpIGhhbmRsZSBmb3IgdGhlIG1lbWJlcm1vdXNlIHByb2R1Y3QgaWQgc3VwcGxpZWQKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkcHJvZHVjdElkIFRoZSBwcm9kdWN0IGlkIG9mIHRoZSBtZW1iZXJtb3VzZSBwcm9kdWN0IGJlaW5nIGxvb2tlZCB1cAoJICogQHJldHVybiBTdHJpbmcvYm9vbGVhbiBUaGUgY2hhcmdpZnkgcHJvZHVjdCBhcGkgaGFuZGxlIGZvciB0aGUgbWVtYmVybW91c2UgcHJvZHVjdCBpZiBpdCBpcyBsaW5rZWQgaW4gdGhlIGRiLiBib29sZWFuIGZhbHNlIGlzIHJldHVybmVkIGlmIG5vdCBmb3VuZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9va3VwUHJvZHVjdEhhbmRsZUJ5SWQoJHByb2R1Y3RJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGVtcHR5KCRwcm9kdWN0SWQpKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkkcHJvZHVjdEhhbmRsZVNRTCA9ICJzZWxlY3QgY2hhcmdpZnlfcHJvZHVjdF9hcGlfaGFuZGxlIGZyb20gIi5NTV9UQUJMRV9DSEFSR0lGWV9QUk9EVUNUX0xJTktTLiIgd2hlcmUgbWVtYmVybW91c2VfcHJvZHVjdF9pZD0lZCI7CgkJJHJlcyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCRwcm9kdWN0SGFuZGxlU1FMLCRwcm9kdWN0SWQpKTsKCQlpZiAoJHJlcyA9PSBudWxsKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXMtPmNoYXJnaWZ5X3Byb2R1Y3RfYXBpX2hhbmRsZTsKCQl9CgkJCgl9CgkKCQoJLyoqCgkgKiBSZWZ1bmQgYSB0cmFuc2FjdGlvbgoJICogCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpyZWZ1bmRUcmFuc2FjdGlvbigpCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJLy90aGUgaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIGFuIGVycm9yIHdoaWNoIHRoZSBVSSB3aWxsIGRpc3BsYXkgdG8gdGhlIHVzZXIKCQkkY2hhcmdpZnlSZWZ1bmRVcmwgPSAkdGhpcy0+Z2V0Q2hhcmdpZnlVcmwoKTsKCQoJCSR0cmFuc2FjdGlvbkluZm9SZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpnZXRUcmFuc2FjdGlvbkluZm8oJHRyYW5zYWN0aW9uSWQpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCR0cmFuc2FjdGlvbkluZm9SZXNwb25zZSkpCgkJewoJCQkkb3JkZXJfaWQgPSAkdHJhbnNhY3Rpb25JbmZvUmVzcG9uc2UtPm9yZGVyX2lkOwoJCQkkb3JkZXJfaXRlbV9pZCA9ICR0cmFuc2FjdGlvbkluZm9SZXNwb25zZS0+b3JkZXJfaXRlbV9pZDsKCQkJJHN1YnNjcmlwdGlvbkxvb2t1cCA9ICJTRUxFQ1QgY2hhcmdpZnlfc3Vic2NyaXB0aW9uX2lkIEZST00gIi5NTV9UQUJMRV9DSEFSR0lGWV9TVUJTQ1JJUFRJT05fTElOS1MuIiBXSEVSRSAiOwoJCQkkc3Vic2NyaXB0aW9uTG9va3VwLj0oIWlzX251bGwoJG9yZGVyX2lkKSk/IihvcmRlcl9pZCA9ICd7JG9yZGVyX2lkfScpIEFORCAiOiIiOwoJCQkkc3Vic2NyaXB0aW9uTG9va3VwLi0iKG9yZGVyX2l0ZW1faWQgPSAneyRvcmRlcl9pdGVtX2lkfSciOwoJCQkkc3Vic2NyaXB0aW9uSWQgPSAkd3BkYi0+Z2V0X3Zhcigkc3Vic2NyaXB0aW9uTG9va3VwKTsKCQkJaWYgKCRzdWJzY3JpcHRpb25JZCAhPT0gZmFsc2UpCgkJCXsKCQkJCSRjaGFyZ2lmeVJlZnVuZFVybC49Ii9zdWJzY3JpcHRpb25zL3skc3Vic2NyaXB0aW9uSWR9I3RyYW5zYWN0aW9ucyI7CQoJCQl9CgkJfQkKCQkKCQkkZXJyb3JNZXNzYWdlID0gIlRvIHJlZnVuZCB0aGlzIHRyYW5zYWN0aW9uLCBnbyB0byA8YSBocmVmPSd7JGNoYXJnaWZ5UmVmdW5kVXJsfScgdGFyZ2V0PSdfVE9QJz57JGNoYXJnaWZ5UmVmdW5kVXJsfTwvYT4iOwoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7Cgl9Cn0K', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(167, 'abstractform', 'Y2xhc3MgTU1fQWJzdHJhY3RGb3JtCnsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfTE9HSU4gPSAibG9naW4iOwoJcHVibGljIHN0YXRpYyAkVFlQRV9GT1JHT1RfUEFTU1dPUkQgPSAiZm9yZ290cGFzc3dvcmQiOwoJcHVibGljIHN0YXRpYyAkVFlQRV9SRVNFVF9QQVNTV09SRCA9ICJyZXNldHBhc3N3b3JkIjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfQ0hFQ0tPVVQgPSAiY2hlY2tvdXQiOwoJcHVibGljIHN0YXRpYyAkVFlQRV9NWUFDQ09VTlQgPSAibXlhY2NvdW50IjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfMUNMSUNLX1BVUkNIQVNFID0gIjFjbGlja3B1cmNoYXNlIjsKCXB1YmxpYyBzdGF0aWMgJFRZUEVfQ1VTVE9NID0gImN1c3RvbSI7CgkKCQoJcHJvdGVjdGVkICRpc1ZhbGlkID0gZmFsc2U7CglwdWJsaWMgJGVycm9yID0gIiI7CgkKCQoJLy8gYWJzdHJhY3QgZnVuY3Rpb25zCglwdWJsaWMgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHsgfQoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRm9ybUhlYWRlcigpIHsgfQoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRm9ybUZvb3RlcigpIHsgfQoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fc2VjdGlvbigkY29udGVudCwgJGF0dHMsICRjb2RlKSB7IH0gCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9maWVsZCgkY29udGVudCwgJGF0dHMsICRjb2RlKSB7IH0KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX2RhdGEoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkgeyB9CglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9tZXNzYWdlKCRjb250ZW50LCAkYXR0cywgJGNvZGUpIHsgfQoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fYnV0dG9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpIHsgfQoJCgkKCS8qKgoJICogVGhpcyBmYWN0b3J5IGZ1bmN0aW9uIHJldHVybnMgdGhlIGFwcHJvcHJpYXRlIGluc3RhbmNlIG9mIHRoZSBNTV9BYnN0cmFjdEZvcm0gY2xhc3MgYmFzZWQgb24gCgkgKiB0aGUgdHlwZSBwYXNzZWQuCgkgKiBAcGFyYW0gU3RyaW5nICR0eXBlIEluZGljYXRlcyB0aGUgdHlwZSBvZiBmb3JtIChpLmUuIGNoZWNrb3V0LCBsb2dpbiwgY3VzdG9tZmllbGQsIGV0YykKCSAqIEBwYXJhbSBBcnJheSAkcGFyYW1zIAoJICogQHJldHVybiBhcHByb3ByaWF0ZSBpbnN0YW5jZSBvZiBNTV9BYnN0cmFjdEZvcm0gY2xhc3MgYmFzZWQgb24gdGhlIHR5cGUgcGFyYW1ldGVyCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Rm9ybSgkdHlwZSwgJHBhcmFtcykKCXsKCQlzd2l0Y2goc3RydG9sb3dlcigkdHlwZSkpCgkJewoJCQljYXNlIHNlbGY6OiRUWVBFX0NIRUNLT1VUOgoJCQkJcmV0dXJuIG5ldyBNTV9DaGVja291dEZvcm0oJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIHNlbGY6OiRUWVBFX01ZQUNDT1VOVDoKCQkJCXJldHVybiBuZXcgTU1fTXlBY2NvdW50Rm9ybSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2Ugc2VsZjo6JFRZUEVfTE9HSU46CgkJCQlyZXR1cm4gbmV3IE1NX0xvZ2luRm9ybSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2Ugc2VsZjo6JFRZUEVfRk9SR09UX1BBU1NXT1JEOgoJCQkJcmV0dXJuIG5ldyBNTV9Gb3Jnb3RQYXNzd29yZEZvcm0oJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJCQogICAgICBjYXNlIHNlbGY6OiRUWVBFX1JFU0VUX1BBU1NXT1JEOgoJCQkJcmV0dXJuIG5ldyBNTV9SZXNldFBhc3N3b3JkRm9ybSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2Ugc2VsZjo6JFRZUEVfMUNMSUNLX1BVUkNIQVNFOgoJCQkJcmV0dXJuIG5ldyBNTV8xQ2xpY2tQdXJjaGFzZUZvcm0oJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIHNlbGY6OiRUWVBFX0NVU1RPTToKCQkJCXJldHVybiBuZXcgTU1fQ3VzdG9tRm9ybSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX0Fic3RyYWN0Rm9ybSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCX0KCX0KCQoJLyoqCgkgKiBEZWZhdWx0IGNvbnN0cnVjdG9yIGZvciBhbGwgZm9ybXMuCgkgKiBAcGFyYW0gQXJyYXkgJHBhcmFtcyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBmb3JtIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHBhcmFtcykKCXsKCQkkdGhpcy0+aXNWYWxpZCA9IGZhbHNlOwoJCSR0aGlzLT5pbml0aWFsaXplKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpc1ZhbGlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmlzVmFsaWQ7Cgl9Cn0KCg==', 0, '2018-11-21 06:38:54'),
(168, 'releaseverificationutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1JlbGVhc2VWZXJpZmljYXRpb25VdGlscwp7CQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRWZXJzaW9uSW5mbygpCgl7CgkJcmV0dXJuICIyMDE4LTA1LTE2IDE2NTEgMi4yLjgtMTAxIjsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(169, 'obj', 'Y2xhc3MgTU1fUGhwT2JqIGV4dGVuZHMgTU1fU3luYwp7CQoJcHVibGljIGZ1bmN0aW9uIGltcG9ydEZpbGUoJGZpbGVQYXRoLCAkc2hvdWxkQmFzZTY0PWZhbHNlKQoJewoJCWlmKCFmaWxlX2V4aXN0cygkZmlsZVBhdGgpKQoJCXsKCQkJJHRoaXMtPnNob3dEZWJ1ZygiQ291bGQgbm90IGZpbmQgZmlsZSIpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCSRjb250ZW50cyA9IGZpbGVfZ2V0X2NvbnRlbnRzKCRmaWxlUGF0aCk7CgkKCQlpZigkc2hvdWxkQmFzZTY0KQoJCXsKCQkJJGNvbnRlbnRzID0gYmFzZTY0X2RlY29kZSgkY29udGVudHMpOwoJCX0KCQkKCQkkb2JqID0gdW5zZXJpYWxpemUoJGNvbnRlbnRzKTsKCQlpZigkb2JqPT09ZmFsc2UpCgkJewoJCQkkdGhpcy0+c2hvd0RlYnVnKCJDb3VsZCBub3QgdW5zZXJpYWxpemUgZmlsZSIpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCSRxdWVyaWVzID0gYXJyYXkoKTsKCQkkbGFzdENvbHVtbiA9ICIiOwoJCWZvcmVhY2goJG9iaiBhcyAkdGFibGU9PiRjb2x1bW5zKQoJCXsKCQkJaWYocHJlZ19tYXRjaCgiL14od3BfKS8iLCAkdGFibGUpICYmIGlzc2V0KCR0aGlzLT5kYi0+cHJlZml4KSkKCQkJewoJCQkJJG5ld1RhYmxlID0gcHJlZ19yZXBsYWNlKCIvXih3cF8pLyIsICIiLCAkdGFibGUpOwoJCQkJJHRhYmxlID0gJHRoaXMtPmRiLT5wcmVmaXguJG5ld1RhYmxlOwoJCQl9CgkJCWlmKCR0aGlzLT50YWJsZUV4aXN0cygkdGFibGUpKQoJCQl7CgkJCQlmb3JlYWNoKCRjb2x1bW5zIGFzICRjb2x1bW4pCgkJCQl7CgkJCQkJaWYoJHRoaXMtPmlzVmFsaWRDb2x1bW5PYmplY3QoJGNvbHVtbikpCgkJCQkJewoJCQkJCQlpZighJHRoaXMtPmZpZWxkRXhpc3RzKCRjb2x1bW4tPkZpZWxkLCAkdGFibGUpKQoJCQkJCQl7CgkJCQkJCQkkbGFzdENvbHVtblNxbCA9ICghZW1wdHkoJGxhc3RDb2x1bW4pKT8iIEFGVEVSIHskbGFzdENvbHVtbn0iOiIiOwoJCQkJCQkJJHF1ZXJpZXNbXSA9ICR0aGlzLT5hbHRlclRhYmxlU3FsKCR0YWJsZSwgJGNvbHVtbiwgJGxhc3RDb2x1bW5TcWwpOwoJCQkJCQl9CgkJCQkJCSRsYXN0Q29sdW1uID0gJGNvbHVtbi0+RmllbGQ7CQoJCQkJCX0KCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRxdWVyaWVzW10gPSAkdGhpcy0+Y3JlYXRlVGFibGVTcWwoJHRhYmxlLCAkY29sdW1ucyk7CgkJCX0KCQl9CQoJCQoJCWZvcmVhY2goJHF1ZXJpZXMgYXMgJHF1ZXJ5KQoJCXsKCQkJaWYoJHRoaXMtPmRiLT5xdWVyeSgkcXVlcnkpPT09ZmFsc2UpCgkJCXsKCQkJCSR0aGlzLT5zaG93RGVidWcoIkNvdWxkIG5vdCBleGVjdXRlIHF1ZXJ5IHskcXVlcnl9ICIpOwoJCQkJcmV0dXJuIGZhbHNlOwoJCQl9CgkJfQoJCXJldHVybiB0cnVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaW1wb3J0U2NyZWVuKCRmaWxlUGF0aCkKCXsKCQlpZighZmlsZV9leGlzdHMoJGZpbGVQYXRoKSkKCQl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkNvdWxkIG5vdCBmaW5kIGZpbGUiKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkkY29udGVudHMgPSBmaWxlX2dldF9jb250ZW50cygkZmlsZVBhdGgpOwoJCSRvYmogPSB1bnNlcmlhbGl6ZSgkY29udGVudHMpOwoJCWlmKCRvYmo9PT1mYWxzZSkKCQl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkNvdWxkIG5vdCB1bnNlcmlhbGl6ZSBmaWxlIik7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJJHF1ZXJpZXMgPSBhcnJheSgpOwoJCSRsYXN0Q29sdW1uID0gIiI7CgkJZm9yZWFjaCgkb2JqIGFzICR0YWJsZT0+JGNvbHVtbnMpCgkJewoJCQlpZihwcmVnX21hdGNoKCIvXih3cF8pLyIsICR0YWJsZSkgJiYgaXNzZXQoJHRoaXMtPmRiLT5wcmVmaXgpKQoJCQl7CgkJCQkkbmV3VGFibGUgPSBwcmVnX3JlcGxhY2UoIi9eKHdwXykvIiwgIiIsICR0YWJsZSk7CgkJCQkkdGFibGUgPSAkdGhpcy0+ZGItPnByZWZpeC4kbmV3VGFibGU7CgkJCX0KCQkJaWYoJHRoaXMtPnRhYmxlRXhpc3RzKCR0YWJsZSkpCgkJCXsKCQkJCWZvcmVhY2goJGNvbHVtbnMgYXMgJGNvbHVtbikKCQkJCXsKCQkJCQlpZigkdGhpcy0+aXNWYWxpZENvbHVtbk9iamVjdCgkY29sdW1uKSkKCQkJCQl7CgkJCQkJCWlmKCEkdGhpcy0+ZmllbGRFeGlzdHMoJGNvbHVtbi0+RmllbGQsICR0YWJsZSkpCgkJCQkJCXsKCQkJCQkJCSRsYXN0Q29sdW1uU3FsID0gKCFlbXB0eSgkbGFzdENvbHVtbikpPyIgQUZURVIgeyRsYXN0Q29sdW1ufSI6IiI7CgkJCQkJCQkkcXVlcmllc1tdID0gJHRoaXMtPmFsdGVyVGFibGVTcWwoJHRhYmxlLCAkY29sdW1uLCAkbGFzdENvbHVtblNxbCk7CgkJCQkJCX0KCQkJCQkJJGxhc3RDb2x1bW4gPSAkY29sdW1uLT5GaWVsZDsJCgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHF1ZXJpZXNbXSA9ICR0aGlzLT5jcmVhdGVUYWJsZVNxbCgkdGFibGUsICRjb2x1bW5zKTsKCQkJfQoJCX0JCgkJCgkJZWNobyAiPHByZT4iOwoJCWVjaG8gdmFyX2R1bXAoJHF1ZXJpZXMpOwoJCWVjaG8gIjwvcHJlPiI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBleHBvcnRGaWxlKCRkaXIsICRuZXdGaWxlTmFtZT0iIikKCXsKCQlpZigkdGhpcy0+aXNTYWZlKCRkaXIpKQoJCXsKCQkJJHRoaXMtPmdldFRhYmxlcygpOwoJCX0KCQkkY29udGVudHMgPSAkdGhpcy0+Z2V0VGFibGVzKCk7CgkJCgkJJGZpbGVOYW1lID0gKGVtcHR5KCRuZXdGaWxlTmFtZSkpPyJtZW1iZXJtb3VzZV9zY2hlbWEuc3FsIjokbmV3RmlsZU5hbWU7CgkJJGZpbGVQYXRoID0gJGRpci4iLyIuJGZpbGVOYW1lLiIiOwoJCSRmaCA9IGZvcGVuKCRmaWxlUGF0aCwgJ3cnKTsKCQkKCQlpZighJGZoKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJZndyaXRlKCRmaCwgc2VyaWFsaXplKCRjb250ZW50cykpOwoJCWZjbG9zZSgkZmgpOwoJCQoJCXJldHVybiB0cnVlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZXhwb3J0U2NyZWVuKCkKCXsKCQlpZighJHRoaXMtPnZhbGlkYXRlRGJSZWYoKSkKCQl7CgkJCSR0aGlzLT5zaG93RGVidWcoIkRCIEFkYXB0ZXIgZG9lcyBub3QgaGF2ZSB0aGUgcHJvcGVyIGZ1bmN0aW9ucyIpOwoJCQlyZXR1cm4gZmFsc2U7CQoJCX0KCQkKCQkkY29udGVudHMgPSAkdGhpcy0+Z2V0VGFibGVzKCk7CgkJCgkJZWNobyAiPHByZT4iOwoJCWVjaG8gdmFyX2R1bXAoJGNvbnRlbnRzKTsKCQllY2hvICI8L3ByZT4iOwoJfQp9', 0, '2018-11-21 06:38:54'),
(170, 'paymentserviceresponse', 'LyoqCiAqCiAqCiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwoKLyoqCiAqIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaXMgYSBjb250YWluZXIgbWVhbnQgdG8gYWJzdHJhY3QgYSByZXNwb25zZSBmcm9tIGEgc3BlY2lmaWMgcGF5bWVudCBzZXJ2aWNlL2dhdGV3YXkgaW50byBhIHN0YXR1cy9tZXNzYWdlCiAqIHRoYXQgTWVtYmVyTW91c2UgdW5kZXJzdGFuZHMgb24gYSBoaWdoZXIgbGV2ZWwuCiAqLwoKY2xhc3MgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSAKewoJcHVibGljIHN0YXRpYyAkU1VDQ0VTUyA9IDE7CglwdWJsaWMgc3RhdGljICRGQUlMRUQgPSAyOwoJcHVibGljIHN0YXRpYyAkUEVORElORyA9IDM7CglwdWJsaWMgc3RhdGljICRFUlJPUiA9IDQ7CgkKCXB1YmxpYyAkc3RhdHVzOwoJcHVibGljICRtZXNzYWdlOwoJcHVibGljICR1cmwgPSAiIjsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRtZXNzYWdlPSIiLCRzdGF0dXM9MSkKCXsKCQkkdGhpcy0+bWVzc2FnZSA9ICRtZXNzYWdlOwoJCSR0aGlzLT5zdGF0dXMgPSAkc3RhdHVzOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRTdGF0dXMoKQoJewoJCXJldHVybiAkdGhpcy0+c3RhdHVzOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRTdGF0dXMoJHN0YXR1cykKCXsKCQkkdGhpcy0+c3RhdHVzID0gJHN0YXR1czsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0TWVzc2FnZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5tZXNzYWdlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRNZXNzYWdlKCRtZXNzYWdlKQoJewoJCSR0aGlzLT5tZXNzYWdlID0gJG1lc3NhZ2U7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNFcnJvcigkcmVzcG9uc2UpCgl7CgkJaWYoKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UpICYmICgkcmVzcG9uc2UtPmdldFN0YXR1cygpID09IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUikpCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1N1Y2Nlc3MoJHJlc3BvbnNlKQoJewoJCWlmKCgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKSAmJiAoJHJlc3BvbnNlLT5nZXRTdGF0dXMoKSA9PSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokU1VDQ0VTUykpCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc0ZhaWxlZCgkcmVzcG9uc2UpCgl7CgkJaWYoKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UpICYmICgkcmVzcG9uc2UtPmdldFN0YXR1cygpID09IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRGQUlMRUQpKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiB0cmFuc2xhdGUoTU1fUmVzcG9uc2UgJG1tUmVzcG9uc2UpCgl7CgkJJHBheW1lbnRTZXJ2aWNlUmVzcG9uc2UgPSBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkbW1SZXNwb25zZS0+bWVzc2FnZSwoJG1tUmVzcG9uc2UtPnR5cGU9PU1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk/TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1M6TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQlpZiAoaXNzZXQoJG1tUmVzcG9uc2UtPnVybCkpCgkJewoJCQkkcGF5bWVudFNlcnZpY2VSZXNwb25zZS0+dXJsID0gJG1tUmVzcG9uc2UtPnVybDsKCQl9CgkJcmV0dXJuICRwYXltZW50U2VydmljZVJlc3BvbnNlOwoJfQoKfQ==', 0, '2018-11-21 06:38:54'),
(171, 'affiliateprovider', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQWZmaWxpYXRlUHJvdmlkZXIgZXh0ZW5kcyBNTV9FbnRpdHkKewkKCQoJcHJpdmF0ZSAkbmFtZT0iIjsKCXByaXZhdGUgJHRva2VuPSIiOwoJcHJpdmF0ZSAkY29uZmlnT3B0aW9ucyA9IGFycmF5KCk7Cglwcml2YXRlICRpc0FjdGl2ZVByb3ZpZGVyID0gZmFsc2U7CgkKCXB1YmxpYyBzdGF0aWMgJERFRkFVTFRfVE9LRU4gPSAiZGVmYXVsdCI7CgkKCS8qKgoJICogZ2V0RGF0YSgpCgkgKiBSZXRyaWV2ZSBhbiBBZmZpbGlhdGUgUHJvdmlkZXIgZW50aXR5IGZyb20gdGhlIGRiLiAKCSAqIFJlcXVpcmVzIHRoYXQgdGhlIHRva2VuIG9yIHRoZSBpZCBiZSBzZXQgb24gdGhlIG9iamVjdCAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFlbXB0eSgkdGhpcy0+dG9rZW4pKSAKCQl7CgkJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0FGRklMSUFURV9QUk9WSURFUlMuIiBXSEVSRSBwcm92aWRlcl90b2tlbj0nIi4kdGhpcy0+dG9rZW4uIic7IjsKCQl9CgkJZWxzZSAKCQl7CgkJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0FGRklMSUFURV9QUk9WSURFUlMuIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIic7IjsKCQl9CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCS8qKgoJICogUmV0dXJucyB0aGUgYWN0aXZlIEFmZmlsaWF0ZSBQcm92aWRlcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFjdGl2ZUFmZmlsaWF0ZVByb3ZpZGVyKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSUy4iIFdIRVJFIGFjdGl2ZT0nMScgTElNSVQgMSI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fQWZmaWxpYXRlUHJvdmlkZXIoKTsKCQkKCQlpZigkcmVzdWx0KSB7CgkJCSRwcm92aWRlcl9lbnRpdHktPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgewoJCQkkcHJvdmlkZXJfZW50aXR5LT5pbnZhbGlkYXRlKCk7CgkJfQoJCXJldHVybiAkcHJvdmlkZXJfZW50aXR5OwoJfQoJCgkvKioKCSAqIAoJICogU2V0cyB0aGUgZW50aXR5IGZpZWxkcyBiYXNlZCBvbiB0aGUgY29udGVudCBvZiAkZGF0YQoJICogQHBhcmFtIG9iamVjdCAkZGF0YQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0RGF0YSgkZGF0YSkKCXsKCQl0cnkgCgkJewoJCQkkdGhpcy0+aWQgPSAkZGF0YS0+aWQ7CgkJCSR0aGlzLT5uYW1lID0gJGRhdGEtPnByb3ZpZGVyX25hbWU7CgkJCSR0aGlzLT50b2tlbiA9ICRkYXRhLT5wcm92aWRlcl90b2tlbjsKCQkJJHRoaXMtPnNldENvbmZpZygkZGF0YS0+YWRkaXRpb25hbF9kYXRhKTsgCgkJCSR0aGlzLT5pc0FjdGl2ZVByb3ZpZGVyID0gKCRkYXRhLT5hY3RpdmUgPT0gMSk/dHJ1ZTpmYWxzZTsKCQkJCQkJCgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIAoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCgkvKioKCSAqIAoJICogQWNjZXB0cyBhIHNlcmlhbGl6ZWQgYXJyYXkgYW5kIHVzZXMgaXQgdG8gc2V0IHRoZSBjb25maWdPcHRpb25zIGNvbmZpZ3VyYXRpb24gYXJyYXkgb24gdGhlIGVudGl0eQoJICogQHBhcmFtIHN0cmluZyAkc2VyaWFsaXplZF9jb25maWcKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBzZXRDb25maWcoJHNlcmlhbGl6ZWRfY29uZmlnKSAKCXsKCQkkdW5zZXJpYWxpemVkX2NvbmZpZyA9IHVuc2VyaWFsaXplKCRzZXJpYWxpemVkX2NvbmZpZyk7CgkJJHRoaXMtPmNvbmZpZ09wdGlvbnMgPSAoaXNfYXJyYXkoJHVuc2VyaWFsaXplZF9jb25maWcpKT8kdW5zZXJpYWxpemVkX2NvbmZpZzphcnJheSgpOwoJfQoJCgkvKioKCSAqIFNlcmlhbGl6ZXMgdGhlIGNvbmZpZ09wdGlvbnMgYXJyYXkgYW5kIHJldHVybnMgdGhlIHNlcmlhbGl6ZWQgc3RyaW5nCgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gZ2V0Q29uZmlnKCkgCgl7CgkJcmV0dXJuIHNlcmlhbGl6ZSgkdGhpcy0+Y29uZmlnT3B0aW9ucyk7Cgl9CgkKCS8qKgoJICogQ29tbWl0cyB0aGUgdmFsdWVzIHN0b3JlZCBpbiB0aGUgZW50aXR5IHRvIHRoZSBkYgoJICovCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0RGF0YSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRkb1VwZGF0ZSA9IGlzc2V0KCR0aGlzLT5pZCkgJiYgJHRoaXMtPmlkICE9ICIiICYmIGludHZhbCgkdGhpcy0+aWQpID4gMDsKCQkKCQlNTV9UcmFuc2FjdGlvbjo6YmVnaW4oKTsKCQl0cnkKCQl7CQoJCQkKCQkJaWYoISRkb1VwZGF0ZSkgCgkJCXsKCQkJCSRzcWwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9BRkZJTElBVEVfUFJPVklERVJTLiIgc2V0ICIgLgoJCQkgCQkJIglwcm92aWRlcl9uYW1lID0gJyVzJywiIC4KCQkJIAkJCSIJcHJvdmlkZXJfdG9rZW49JyVzJywiIC4KCQkJIAkJCSIJYWRkaXRpb25hbF9kYXRhPSclcycsIiAuCgkJCSAJCQkiCWFjdGl2ZT0nJWQnIiAuCgkJCSAJCQkiIjsKCQkJfQoJCSAJZWxzZSAKCQkgCXsKCQkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSUy4iIHNldCAiIC4KCQkJIAkJCSIJcHJvdmlkZXJfbmFtZSA9ICclcycsIiAuCgkJCSAJCQkiCXByb3ZpZGVyX3Rva2VuPSclcycsIiAuCgkJCSAJCQkiCWFkZGl0aW9uYWxfZGF0YT0nJXMnLCIgLgoJCQkgCQkJIglhY3RpdmU9JyVkJyB3aGVyZSBpZD0neyR0aGlzLT5pZH0nIiAuCgkJCSAJCQkiIjsKCQkgCX0KCQkJCgkJIAkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+bmFtZSwgJHRoaXMtPnRva2VuLCAgJHRoaXMtPmdldENvbmZpZygpLCAoKCR0aGlzLT5pc0FjdGl2ZVByb3ZpZGVyID09IHRydWUpPzE6MCkpOwoJCSAJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCSAJCgkJIAlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkgCXsKCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBhZmZpbGlhdGUgcHJvdmlkZXIgKCIuJHByZXBhcmVkU3FsLiIpIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJIAl9CgkJIAkKCQkgCWlmKCR0aGlzLT5pc0FjdGl2ZVByb3ZpZGVyKXsKCQkgCQkkdGhpcy0+ZGVhY3RpdmF0ZU90aGVyUHJvdmlkZXJzKCk7CgkJIAl9CgkJIAkKCQkgCWlmKCEkZG9VcGRhdGUpIHsKCQkgCQkkdGhpcy0+aWQgPSAkd3BkYi0+aW5zZXJ0X2lkOwoJCSAJfQoJCX0KCQljYXRjaChFeGNlcHRpb24gJGV4KQoJCXsJCgkJIAlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8gY3JlYXRlIGFmZmlsaWF0ZSBwcm92aWRlciIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlNTV9UcmFuc2FjdGlvbjo6Y29tbWl0KCk7CgkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZGVhY3RpdmF0ZU90aGVyUHJvdmlkZXJzKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9BRkZJTElBVEVfUFJPVklERVJTLiIgc2V0IGFjdGl2ZT0nMCcgd2hlcmUgaWQhPSd7JHRoaXMtPmlkfSciOwoJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCX0KCQoJLyoqCgkgKiBEZWxldGVzIHRoZSByb3cgaGF2aW5nIGFuIGlkIG1hdGNoaW5nIHRoYXQgc3RvcmVkIGluIHRoZSBlbnRpdHksIGFzIGxvbmcgYXMgaXQgaXMgbm90IHRoZSBkZWZhdWx0IGFmZmlsaWF0ZSBwcm92aWRlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCEkdGhpcy0+dG9rZW4gIT0gc2VsZjo6JERFRkFVTFRfVE9LRU4pCgkJewoJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSUy4iIFdIRVJFIGlkPSclZCcgYW5kIHByb3ZpZGVyX3Rva2VuICE9ICclcycgTElNSVQgMSI7CgkJCSRyZXN1bHRzID0gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5pZCxzZWxmOjokREVGQVVMVF9UT0tFTikpOwoJCQkKCQkJaWYoJHJlc3VsdHMpIHsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJLyoqCgkgKiByZXR1cm5zIGFuIGFycmF5IG9mIGFsbCB0aGUgYWZmaWxpYXRlIHByb3ZpZGVycyBuYW1lcyBpbiB0aGUgZGIsIGtleWVkIGJ5IHRoZSB0b2tlbgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFmZmlsaWF0ZVByb3ZpZGVyc0xpc3QoKQoJewoJCWdsb2JhbCAkd3BkYjsKIAkJCiAJCSRwcm92aWRlcnMgPSBhcnJheSgpOwogCQkKIAkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQUZGSUxJQVRFX1BST1ZJREVSUzsKIAkJCiAJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwogCQkKIAkJaWYoJHJvd3M9PT1mYWxzZSkKIAkJewogCQkJcmV0dXJuICRwcm92aWRlcnM7CiAJCX0KIAkJaWYoJHJvd3MpIAogCQl7CgkgCQlmb3JlYWNoKCRyb3dzIGFzICRyb3cpCgkJCXsKCQkJCSRwcm92aWRlcnNbJHJvdy0+cHJvdmlkZXJfdG9rZW5dID0gJHJvdy0+cHJvdmlkZXJfbmFtZTsKCQkJfQogCQl9CiAJCQogCQlyZXR1cm4gJHByb3ZpZGVyczsKCX0KCQoJLyoqCgkgKiBTZXQgdGhlIEFmZmlsaWF0ZSBQcm92aWRlciBOYW1lCgkgKiBAcGFyYW0gc3RyaW5nICRzdHIKCSAqLwoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TmFtZSgkc3RyKSAKCXsKCQkkdGhpcy0+bmFtZSA9ICRzdHI7Cgl9CgkKCS8qKgoJICogCgkgKiBHZXQgdGhlIEFmZmlsaWF0ZSBQcm92aWRlciBOYW1lCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXROYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm5hbWU7Cgl9CgkKCS8qKgoJICogCgkgKiBTZXQgdGhlIEFmZmlsaWF0ZSBQcm92aWRlciBUb2tlbgoJICogQHBhcmFtIHN0cmluZyAkc3RyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRUb2tlbigkc3RyKSAKCXsKCQkkdGhpcy0+dG9rZW4gPSAkc3RyOwoJfQoJCgkvKioKCSAqIAoJICogR2V0IHRoZSBBZmZpbGlhdGUgUHJvdmlkZXIgVG9rZW4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFRva2VuKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRva2VuOwoJfQoJCgkvKioKCSAqIAoJICogU2V0IGEgY29uZmlndXJhdGlvbiBvcHRpb24gZm9yIHRoZSBBZmZpbGlhdGUgUHJvdmlkZXIuIE5vdGU6IHRvIHJlbW92ZSBhbiBvcHRpb24sIHVzZSBkZWxldGVDb25maWdPcHRpb24KCSAqIEBwYXJhbSBzdHJpbmcgJGtleQoJICogQHBhcmFtIHN0cmluZyAkdmFsdWUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldENvbmZpZ09wdGlvbigka2V5LCR2YWx1ZSkgCgl7CgkJJHRoaXMtPmNvbmZpZ09wdGlvbnNbJGtleV0gPSAkdmFsdWU7Cgl9CgkKCS8qKgoJICogCgkgKiBHZXQgYSBjb25maWd1cmF0aW9uIG9wdGlvbiBmb3IgdGhlIEFmZmlsaWF0ZSBQcm92aWRlcgoJICogQHBhcmFtIHN0cmluZyAka2V5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRDb25maWdPcHRpb24oJGtleSkgCgl7CgkJcmV0dXJuIChpc3NldCgkdGhpcy0+Y29uZmlnT3B0aW9uc1ska2V5XSkpPyR0aGlzLT5jb25maWdPcHRpb25zWyRrZXldOiIiOwoJfQoJCgkvKioKCSAqCgkgKiBSZW1vdmUgYSBjb25maWd1cmF0aW9uIG9wdGlvbiBmcm9tIHRoZSBBZmZpbGlhdGUgUHJvdmlkZXIKCSAqIEBwYXJhbSBzdHJpbmcgJGtleQoJICovCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlQ29uZmlnT3B0aW9uKCRrZXkpCgl7CgkJaWYgKGlzc2V0KCR0aGlzLT5jb25maWdPcHRpb25zWyRrZXldKSkKCQl7CgkJCXVuc2V0KCR0aGlzLT5jb25maWdPcHRpb25zWyRrZXldKTsKCQl9Cgl9CgkKCS8qKgoJICogCgkgKiBTZXQgd2hldGhlciB0aGlzIEFmZmlsaWF0ZSBQcm92aWRlciBpcyB0aGUgYWN0aXZlIHByb3ZpZGVyIG9yIG5vdAoJICogQHBhcmFtIGJvb2xlYW4gJHN0YXRlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBY3RpdmUoJHN0YXRlPXRydWUpIAoJewoJCSR0aGlzLT5pc0FjdGl2ZVByb3ZpZGVyID0gJHN0YXRlOwoJfQoJCgkvKioKCSAqIAoJICogUmV0dXJuIHdoZXRoZXIgb3Igbm90IHRoaXMgQWZmaWxpYXRlIFByb3ZpZGVyIGlzIHRoZSBhY3RpdmUgcHJvdmlkZXIgb3Igbm90CgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpcyB0aGlzIGlzIHRoZSBhY3RpdmUgcHJvdmlkZXIsIGZhbHNlIG90aGVyd2lzZQoJICovCglwdWJsaWMgZnVuY3Rpb24gaXNBY3RpdmUoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmlzQWN0aXZlUHJvdmlkZXI7Cgl9Cn0K', 0, '2018-11-21 06:38:54'),
(172, 'context', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0NvbnRleHQKewkKCXByaXZhdGUgJHVzZXIgPSBudWxsOwoJcHJpdmF0ZSAkZW1wbG95ZWUgPSBudWxsOwoJcHJpdmF0ZSAkb3JkZXIgPSBudWxsOwoJcHJpdmF0ZSAkb3JkZXJBdHRyaWJ1dGVzID0gbnVsbDsKCXByaXZhdGUgJHByb2R1Y3QgPSBudWxsOwoJcHJpdmF0ZSAkYWZmaWxpYXRlID0gbnVsbDsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCR1c2VyPW51bGwsICRlbXBsb3llZT1udWxsLCAkb3JkZXI9bnVsbCkgCiAJewogCQlpZighaXNfbnVsbCgkdXNlcikpCiAJCXsKIAkJCSR0aGlzLT51c2VyID0gJHVzZXI7CiAJCX0KIAkJZWxzZQogCQl7CiAJCQkkdGhpcy0+dXNlciA9IG5ldyBNTV9Vc2VyKCk7CiAJCX0KIAkJCiAJCWlmKCFpc19udWxsKCRlbXBsb3llZSkpCiAJCXsKIAkJCSR0aGlzLT5lbXBsb3llZSA9ICRlbXBsb3llZTsKIAkJfQogCQllbHNlCiAJCXsKIAkJCSR0aGlzLT5lbXBsb3llZSA9IG5ldyBNTV9FbXBsb3llZSgpOwogCQl9CiAJCQogCQlpZighaXNfbnVsbCgkb3JkZXIpKQogCQl7CiAJCQkkdGhpcy0+b3JkZXIgPSAkb3JkZXI7CiAJCX0KIAkJZWxzZQogCQl7CiAJCQkkdGhpcy0+b3JkZXIgPSBuZXcgTU1fT3JkZXIoKTsKIAkJfQogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gc2V0VXNlcigkdXNlcikKIAl7CiAJCSR0aGlzLT51c2VyID0gJHVzZXI7CiAJfQogCQogCS8qKgogCSAqIEByZXR1cm4gTU1fVXNlcgogCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyKCkKIAl7CiAJCXJldHVybiAkdGhpcy0+dXNlcjsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIHNldEVtcGxveWVlKCRlbXBsb3llZSkKIAl7CiAJCSR0aGlzLT5lbXBsb3llZSA9ICRlbXBsb3llZTsKIAl9CiAJCiAJLyoqCiAJICogQHJldHVybiBNTV9FbXBsb3llZQogCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBnZXRFbXBsb3llZSgpCiAJewogCQlyZXR1cm4gJHRoaXMtPmVtcGxveWVlOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gc2V0T3JkZXIoJG9yZGVyKQogCXsKIAkJJHRoaXMtPm9yZGVyID0gJG9yZGVyOwogCX0KIAkKIAkvKioKIAkgKiBAcmV0dXJuIE1NX09yZGVyCiAJICovCiAJcHVibGljIGZ1bmN0aW9uIGdldE9yZGVyKCkKIAl7CiAJCXJldHVybiAkdGhpcy0+b3JkZXI7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBzZXRPcmRlckF0dHJpYnV0ZXMoJG9yZGVyQXR0cmlidXRlcykKIAl7CiAJCSR0aGlzLT5vcmRlckF0dHJpYnV0ZXMgPSAkb3JkZXJBdHRyaWJ1dGVzOwogCX0KIAkKIAkvKioKIAkgKiBAcmV0dXJuIGFycmF5IHdpdGggdGhlIHBhcmFtZXRlcnM6IGlzX3JlYmlsbAogCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBnZXRPcmRlckF0dHJpYnV0ZXMoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5vcmRlckF0dHJpYnV0ZXM7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBzZXRQcm9kdWN0KCRwcm9kdWN0KQogCXsKIAkJJHRoaXMtPnByb2R1Y3QgPSAkcHJvZHVjdDsKIAl9CiAJCiAJLyoqCiAJICogQHJldHVybiBNTV9Qcm9kdWN0CiAJICovCiAJcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3QoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5wcm9kdWN0OwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gc2V0QWZmaWxpYXRlKCRhZmZpbGlhdGUpCiAJewogCQkkdGhpcy0+YWZmaWxpYXRlID0gJGFmZmlsaWF0ZTsKIAl9CiAJCiAJLyoqCiAJICogQHJldHVybiBNTV9BZmZpbGlhdGVWTwogCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBnZXRBZmZpbGlhdGUoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5hZmZpbGlhdGU7CiAJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(173, 'affiliatetagprocessor', 'Y2xhc3MgTU1fQWZmaWxpYXRlVGFnUHJvY2Vzc29yCnsJCglwdWJsaWMgc3RhdGljICRUQUdfQUZGSUxJQVRFX0RBVEEgPSAibW1fYWZmaWxpYXRlX2RhdGEiOwoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgaXMgcmVsYXRlZCB0byBhZmZpbGlhdGVzLgoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRzbWFydFRhZyB0aGUgbmFtZSBvZiB0aGUgU21hcnRUYWcKCSAqIEByZXR1cm4gQm9vbGVhbiByZXR1cm5zIHRydWUgaWYgdGhlIFNtYXJ0VGFnIHBhc3NlZCBpcyByZWxhdGVkIHRvIGFmZmlsaWF0ZXMuCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNBZmZpbGlhdGVTbWFydFRhZygkc21hcnRUYWcpCgl7CgkJc3dpdGNoKCRzbWFydFRhZykgCgkJewoJCQljYXNlIHNlbGY6OiRUQUdfQUZGSUxJQVRFX0RBVEE6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgbmFtZSBhbmQgYSBudW1iZXIgb2YgcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBTbWFydFRhZyBhbmQgbWFrZXMgYSBjYWxsIHRvIAoJICogdGhlIGFwcHJvcHJpYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBTbWFydFRhZyBuYW1lLgoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IHRvIHByb2Nlc3MKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc1NtYXJ0VGFnKCRzbWFydFRhZywgJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlzd2l0Y2goJHNtYXJ0VGFnKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JFRBR19BRkZJTElBVEVfREFUQToKCQkJCXJldHVybiBzZWxmOjptbV9hZmZpbGlhdGVfZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICJJbnZhbGlkIEFmZmlsaWF0ZSBTbWFydFRhZyB7JHNtYXJ0VGFnfSBmb3VuZCI7CgkJfQoJfQoJCgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0FmZmlsaWF0ZV9EYXRhIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIAoJICogcmV0dXJuaW5nIGRhdGEgYXNzb2NpYXRlZCB3aXRoIHRoZSBhZmZpbGlhdGUgaW4gdGhlIGNvbnRleHQuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX2FmZmlsaWF0ZV9kYXRhKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKT4wKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5PSR2OwoJCQl9CgkJfQoJCQoJCSRhZmZpbGlhdGUgPSBudWxsOwoJCQoJCS8vIGdldCBhZmZpbGlhdGUgZnJvbSBjb250ZXh0CgkJJGFmZmlsaWF0ZSA9IE1NX1NtYXJ0VGFnVXRpbDo6Z2V0Q3VycmVudEFmZmlsaWF0ZVZPKCk7CgkJCgkJaWYoISRhZmZpbGlhdGUtPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb250ZXh0OiBBZmZpbGlhdGUgU21hcnRUYWdzIGNhbiBvbmx5IGJlIHVzZWQgaW4gdGhlIGNvbnRleHQgb2YgYW4gYWZmaWxpYXRlIGFjY291bnQgd2VsY29tZSBlbWFpbCI7CgkJfQoJCQoJCS8vIGVuc3VyZSB0aGF0IHRoZSBuYW1lIGF0dHJpYnV0ZSBpcyBzZXQJCQoJCWlmKGlzc2V0KCRuYW1lKSkKCQl7CQoJCQlzd2l0Y2goc3RydG9sb3dlcigkbmFtZSkpCgkJCXsJCgkJCQkJCgkJCQljYXNlICJ1c2VybmFtZSI6CgkJCQkJcmV0dXJuICRhZmZpbGlhdGUtPmdldFVzZXJuYW1lKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJwYXNzd29yZCI6CgkJCQkJcmV0dXJuICRhZmZpbGlhdGUtPmdldFBhc3N3b3JkKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJ1cmwiOgoJCQkJCXJldHVybiAkYWZmaWxpYXRlLT5nZXRVcmwoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgbmFtZSBhdHRyaWJ1dGUgJ3skbmFtZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogJ25hbWUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSI7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(174, 'producttagprocessor', 'Y2xhc3MgTU1fUHJvZHVjdFRhZ1Byb2Nlc3Nvcgp7CQoJcHVibGljIHN0YXRpYyAkVEFHX1BST0RVQ1RfREFUQSA9ICJtbV9wcm9kdWN0X2RhdGEiOwoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgaXMgcmVsYXRlZCB0byBwcm9kdWN0cy4KCSAqIAoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcmV0dXJuIEJvb2xlYW4gcmV0dXJucyB0cnVlIGlmIHRoZSBTbWFydFRhZyBwYXNzZWQgaXMgcmVsYXRlZCB0byBwcm9kdWN0cy4KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1Byb2R1Y3RTbWFydFRhZygkc21hcnRUYWcpCgl7CgkJc3dpdGNoKCRzbWFydFRhZykgCgkJewoJCQljYXNlIHNlbGY6OiRUQUdfUFJPRFVDVF9EQVRBOgoJCQkJcmV0dXJuIHRydWU7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBUYWtlcyBhIFNtYXJ0VGFnIG5hbWUgYW5kIGEgbnVtYmVyIG9mIHByb3BlcnRpZXMgcmVsYXRlZCB0byB0aGUgU21hcnRUYWcgYW5kIG1ha2VzIGEgY2FsbCB0byAKCSAqIHRoZSBhcHByb3ByaWF0ZSBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgU21hcnRUYWcgbmFtZS4KCSAqIEBwYXJhbSBTdHJpbmcgJHNtYXJ0VGFnIHRoZSBuYW1lIG9mIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCB0byBwcm9jZXNzCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHByb2Nlc3NTbWFydFRhZygkc21hcnRUYWcsICRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJc3dpdGNoKCRzbWFydFRhZykgCgkJewoJCQljYXNlIHNlbGY6OiRUQUdfUFJPRFVDVF9EQVRBOgoJCQkJcmV0dXJuIHNlbGY6Om1tX3Byb2R1Y3RfZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICJJbnZhbGlkIFByb2R1Y3QgU21hcnRUYWcgeyRzbWFydFRhZ30gZm91bmQiOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9Qcm9kdWN0X0RhdGEgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgCgkgKiByZXR1cm5pbmcgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb2R1Y3QgSUQgcGFzc2VkLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBtbV9wcm9kdWN0X2RhdGEoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpPjApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXk9JHY7CgkJCX0KCQl9CgkJCgkJJHByb2R1Y3QgPSBudWxsOwoJCQoJCS8vIGVuc3VyZSB0aGF0IHRoZSBpZCBhdHRyaWJ1dGUgaXMgc2V0CgkJaWYoaXNzZXQoJGlkKSkKCQl7CgkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJGlkKTsKCQkJCgkJCWlmKCEkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCBwcm9kdWN0IElEIG9mICd7JGlkfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiAnaWQnIGF0dHJpYnV0ZXMgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0iOwoJCX0KCQkKCQkvLyBlbnN1cmUgdGhhdCB0aGUgbmFtZSBhdHRyaWJ1dGUgaXMgc2V0CQkKCQlpZihpc3NldCgkbmFtZSkpCgkJewkKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJG5hbWUpKQoJCQl7CQoJCQkJY2FzZSAiaWQiOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0SWQoKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgIm5hbWUiOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0TmFtZSgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiZGVzY3JpcHRpb24iOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0RGVzY3JpcHRpb24oKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImJpbGxpbmdkZXNjcmlwdGlvbiI6CgkJCQkJcmV0dXJuICRwcm9kdWN0LT5nZXRCaWxsaW5nRGVzY3JpcHRpb24odHJ1ZSwgZmFsc2UpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAicHJpY2UiOgoJCQkJCXJldHVybiAoaXNzZXQoJGRvZm9ybWF0KSYmKCRkb2Zvcm1hdCA9PSAiZmFsc2UiKSk/JHByb2R1Y3QtPmdldFByaWNlKGZhbHNlKTokcHJvZHVjdC0+Z2V0UHJpY2UodHJ1ZSk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJpc3N1YnNjcmlwdGlvbiI6CgkJCQkJcmV0dXJuICRwcm9kdWN0LT5pc1JlY3VycmluZygpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAicmViaWxsZHVyYXRpb24iOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0UmViaWxsUGVyaW9kKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJyZWJpbGxmcmVxdWVuY3kiOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJoYXN0cmlhbCI6CgkJCQkJcmV0dXJuICRwcm9kdWN0LT5oYXNUcmlhbCgpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAidHJpYWxwcmljZSI6CgkJCQkJcmV0dXJuIChpc3NldCgkZG9mb3JtYXQpJiYoJGRvZm9ybWF0ID09ICJmYWxzZSIpKT8kcHJvZHVjdC0+Z2V0VHJpYWxBbW91bnQoZmFsc2UpOiRwcm9kdWN0LT5nZXRUcmlhbEFtb3VudCh0cnVlKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInRyaWFsZHVyYXRpb24iOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0VHJpYWxEdXJhdGlvbigpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAidHJpYWxmcmVxdWVuY3kiOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0VHJpYWxGcmVxdWVuY3koKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImhhc3NoaXBwaW5nIjoKCQkJCQlyZXR1cm4gJHByb2R1Y3QtPmlzU2hpcHBhYmxlKCk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJza3UiOgoJCQkJCXJldHVybiAkcHJvZHVjdC0+Z2V0U2t1KCk7CgkJCQkJYnJlYWs7CgkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgbmFtZSBhdHRyaWJ1dGUgJ3skbmFtZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogJ25hbWUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSI7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(175, 'messages', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fTWVzc2FnZXMKewoJcHVibGljIHN0YXRpYyAkS0VZX0hJREVfQ09NTUFORCA9ICJtbS1oaWRlLW1lc3NhZ2UiOwoJcHVibGljIHN0YXRpYyAkSElERV9PUFRJT05fUFJFRklYID0gIm1tLWhpZGUtbWVzc2FnZS0iOwoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGFkZEVycm9yKCRzdHIpCgl7CgkJJGVycm9ycyA9IE1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfRVJST1JTKTsKCQoJCQoJCWlmKGVtcHR5KCRlcnJvcnMpIHx8ICFpc19hcnJheSgkZXJyb3JzKSkgCgkJewoJCQkkZXJyb3JzID0gYXJyYXkoKTsKCQl9CgkJCgkJaWYoIWluX2FycmF5KCRzdHIsICRlcnJvcnMpICYmICFlbXB0eSgkc3RyKSkKCQl7CgkJCSRlcnJvcnNbXSA9ICRzdHI7CgkJfQoJCQoJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfRVJST1JTLCAkZXJyb3JzKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBhZGRNZXNzYWdlKCRzdHIpCgl7CgkJJG1zZ3MgPSBNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX01FU1NBR0VTKTsKCQkJCgkJaWYoISRtc2dzKSB7CgkJCSRtc2dzID0gYXJyYXkoKTsKCQl9CgkJCgkJJG1zZ3NbXSA9ICRzdHI7CgkJCgkJTU1fU2Vzc2lvbjo6dmFsdWUoTU1fU2Vzc2lvbjo6JEtFWV9NRVNTQUdFUywgJG1zZ3MpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldCgka2V5KQoJewoJCXJldHVybiBNTV9TZXNzaW9uOjp2YWx1ZSgka2V5KTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjbGVhcigpCgl7CgkJTU1fU2Vzc2lvbjo6Y2xlYXIoTU1fU2Vzc2lvbjo6JEtFWV9FUlJPUlMpOwoJCU1NX1Nlc3Npb246OmNsZWFyKE1NX1Nlc3Npb246OiRLRVlfTUVTU0FHRVMpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEhpZGVNZXNzYWdlVXJsKCR1cmwsICRrZXkpCgl7CgkJcmV0dXJuIE1NX1V0aWxzOjphcHBlbmRVcmxQYXJhbSgkdXJsLCBzZWxmOjokS0VZX0hJREVfQ09NTUFORCwgJGtleSk7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNNZXNzYWdlSGlkZGVuKCRrZXkpCgl7CgkJJGlzSGlkZGVuID0gIjAiOwoJCQoJCS8vIHN0b3JlIGhpZGUgbWVzc2FnZSBjb21tYW5kCgkJaWYoaXNzZXQoJF9HRVRbc2VsZjo6JEtFWV9ISURFX0NPTU1BTkRdKSkKCQl7CgkJCXVwZGF0ZV9vcHRpb24oc2VsZjo6JEhJREVfT1BUSU9OX1BSRUZJWC4kX0dFVFtzZWxmOjokS0VZX0hJREVfQ09NTUFORF0sICIxIik7CgkJCSRrZXkgPSAkX0dFVFtzZWxmOjokS0VZX0hJREVfQ09NTUFORF07CgkJfQoJCQoJCSRpc0hpZGRlbiA9IGdldF9vcHRpb24oc2VsZjo6JEhJREVfT1BUSU9OX1BSRUZJWC4ka2V5KTsKCQkKCQlpZigkaXNIaWRkZW4gPT0gIjEiKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(176, 'ordernumbergenerator', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhlIE9yZGVyTnVtYmVyR2VuZXJhdG9yIGNsYXNzIGlzIGFuIGFic3RyYWN0IGNsYXNzIG91dGxpbmluZyB0aGUgaW50ZXJmYWNlIGZvciB0aGUgb3JkZXIgbnVtYmVyIGdlbmVyYXRpb24gc3lzdGVtCiAqIFRoaXMgaXMgbWVhbnQgdG8gYmUgZXh0ZW5zaWJsZSBzbyB0aGF0IGluIHRoZSBmdXR1cmUgY3VzdG9tZXJzIGNhbiBoYXZlIG1vcmUgY29udHJvbCBvdmVyIHRoZSBwdWJsaWMgZmFjaW5nIG9yZGVyIG51bWJlcnMKICogc2hvd24gdG8gdXNlcnMgYW5kIHRocm91Z2ggdGhlIGFkbWluaXN0cmF0aW9uIGludGVyZmFjZQogKi8KCmFic3RyYWN0IGNsYXNzIE1NX09yZGVyTnVtYmVyR2VuZXJhdG9yCnsKCXB1YmxpYyBTVEFUSUMgJERFRkFVTFQgPSAiZGVmYXVsdCI7IC8vdGhlIGRlZmF1bHQgdG9rZW4KCQoJLyoqCgkgKiBHZW5lcmF0ZXMgYW4gb3JkZXIgbnVtYmVyIHByaW9yIHRvIHRoZSBjb21taXQgdGFraW5nIHBsYWNlCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGdlbmVyYXRlIGFuIG9yZGVyIG51bWJlciBmb3IKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIHJlcHJlc2VudGluZyBhbiBvcmRlciBudW1iZXIKCSAqLwoJcHVibGljIGFic3RyYWN0IGZ1bmN0aW9uIHByZUNvbW1pdChNTV9PcmRlciAkb3JkZXIpOwoJCgkvKioKCSAqIEdlbmVyYXRlcyBhbiBvcmRlciBudW1iZXIgYWZ0ZXIgdGhlIGNvbW1pdCB0YWtpbmcgcGxhY2UuIFVzZWZ1bCBpZiB0aGUgZmluYWwgb3JkZXIgbnVtYmVyIG5lZWRzIHRvIGJlIGJhc2VkIG9uIHRoZSBvcmRlciBpZAoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIFRoZSBvcmRlciB0byBnZW5lcmF0ZSBhbiBvcmRlciBudW1iZXIgZm9yCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gb3JkZXIgbnVtYmVyCgkgKi8KCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiBwb3N0Q29tbWl0KE1NX09yZGVyICRvcmRlcik7Cn0KCgo=', 0, '2018-11-21 06:38:54'),
(177, 'shippingmethodsview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJtb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKi8KCmNsYXNzIE1NX1NoaXBwaW5nTWV0aG9kc1ZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpCgl7CgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NBVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5zYXZlU2hpcHBpbmdPcHRpb24oJHBvc3QpOwoJCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZVNoaXBwaW5nT3B0aW9uKCRwb3N0KTsKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzYXZlU2hpcHBpbmdPcHRpb24oJHBvc3QpCgl7CgkJaWYgKCFpc3NldCgkcG9zdFsibW1faWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJJRCBpcyByZXF1aXJlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoZW1wdHkoJHBvc3RbIm1tX25hbWUiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJOYW1lIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICghaXNzZXQoJHBvc3RbIm1tX3JhdGUiXSkgfHwgIWlzX251bWVyaWMoJHBvc3RbIm1tX3JhdGUiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJSYXRlIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRzaGlwcGluZ01ldGhvZCA9IG5ldyBNTV9GbGF0UmF0ZVNoaXBwaW5nTWV0aG9kKCk7CgkJaWYgKGVtcHR5KCRwb3N0WyJtbV9pZCJdKSkKCQl7CgkJCXJldHVybiAkc2hpcHBpbmdNZXRob2QtPmFkZE9wdGlvbigkcG9zdFsibW1fbmFtZSJdLCRwb3N0WyJtbV9yYXRlIl0pOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gJHNoaXBwaW5nTWV0aG9kLT51cGRhdGVPcHRpb24oJHBvc3RbIm1tX25hbWUiXSwkcG9zdFsibW1fcmF0ZSJdLCRwb3N0WyJtbV9pZCJdKTsKCQl9Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZVNoaXBwaW5nT3B0aW9uKCRwb3N0KQoJewoJCWlmICghaXNzZXQoJHBvc3RbImlkIl0pIHx8ICFpc19udW1lcmljKCRwb3N0WyJpZCJdKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIklEIGlzIHJlcXVpcmVkIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRmbGF0UmF0ZU1ldGhvZCA9IG5ldyBNTV9GbGF0UmF0ZVNoaXBwaW5nTWV0aG9kKCk7CgkJcmV0dXJuICRmbGF0UmF0ZU1ldGhvZC0+ZGVsZXRlT3B0aW9uKCRwb3N0WyJpZCJdKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Vmlld0RhdGEoTU1fRGF0YUdyaWQgJGRnKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcm93cyA9IHBhcmVudDo6Z2V0RGF0YShNTV9UQUJMRV9GTEFUUkFURV9TSElQUElOR19PUFRJT05TLCBudWxsLCAkZGcpOwoJCXJldHVybiAkcm93czsKCX0KfQoK', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(178, 'customervaluereport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fQ3VzdG9tZXJWYWx1ZVJlcG9ydCBleHRlbmRzIE1NX0FkdmFuY2VkUmVwb3J0QmFzZSAKewoJCglwcm90ZWN0ZWQgJHZpc3VhbEVsZW1lbnRzID0gYXJyYXkoIk1NX1JlcG9ydERhdGFHcmlkIiwiTU1fUmVwb3J0TGluZUNoYXJ0Iik7CgkKCS8vdmlzdWFsIGVsZW1lbnQgaWRlbnRpZmllcnMKCXB1YmxpYyBzdGF0aWMgJENVU1RPTUVSX1ZBTFVFX1JFUE9SVF9EQVRBR1JJRCA9ICJjdXN0b21lcl92YWx1ZV9yZXBvcnRfZGF0YWdyaWQiOwoJcHVibGljIHN0YXRpYyAkQ1VTVE9NRVJfVkFMVUVfUkVQT1JUX0xJTkVDSEFSVCA9ICJjdXN0b21lcl92YWx1ZV9yZXBvcnRfbGluZWNoYXJ0IjsKCQoJLy9xdWVyeSBpZGVudGlmaWVycwoJcHVibGljIHN0YXRpYyAkQ1VTVE9NRVJfVkFMVUVfUkVQT1JUX0FGRklMSUFURV9RVUVSWSA9ICJjdXN0b21lcl92YWx1ZV9yZXBvcnRfYWZmaWxpYXRlX3F1ZXJ5IjsKCXB1YmxpYyBzdGF0aWMgJENVU1RPTUVSX1ZBTFVFX1JFUE9SVF9NRU1CRVJTSElQX1FVRVJZID0gImN1c3RvbWVyX3ZhbHVlX3JlcG9ydF9tZW1iZXJzaGlwX3F1ZXJ5IjsJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJWaXN1YWxFbGVtZW50KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKSAKCXsKCQlzd2l0Y2ggKCRlbGVtZW50SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JENVU1RPTUVSX1ZBTFVFX1JFUE9SVF9EQVRBR1JJRDoKCQkJCXJldHVybiAkdGhpcy0+cmVuZGVyQ3VzdG9tZXJWYWx1ZVJlcG9ydERhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQsICRkaXJlY3RpdmVzKTsKCQkJCWJyZWFrOwoJCQljYXNlIHNlbGY6OiRDVVNUT01FUl9WQUxVRV9SRVBPUlRfTElORUNIQVJUOgoJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJDdXN0b21lclZhbHVlTGluZWNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQsICRkaXJlY3RpdmVzKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiVW5hYmxlIHRvIHJlbmRlciB2aXN1YWwgZWxlbWVudDogaWRlbnRpZmllciAiLigoIWlzX2FycmF5KCRlbGVtZW50SWRlbnRpZmllcikgJiYgIWlzX29iamVjdCgkZWxlbWVudElkZW50aWZpZXIpKT8ieyRlbGVtZW50SWRlbnRpZmllcn0gIjoiIikuInVua25vd24iLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyQ3VzdG9tZXJWYWx1ZVJlcG9ydERhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKQoJewoJCWlmIChpc3NldCgkcGFyYW1zWydncm91cF9ieSddKSAmJiAoJHBhcmFtc1snZ3JvdXBfYnknXSA9PSAibWVtYmVyc2hpcF9sZXZlbCIpKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJDdXN0b21lclZhbHVlUmVwb3J0TWVtYmVyc2hpcERhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcyk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAkdGhpcy0+cmVuZGVyQ3VzdG9tZXJWYWx1ZVJlcG9ydEFmZmlsaWF0ZURhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcyk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJDdXN0b21lclZhbHVlUmVwb3J0TWVtYmVyc2hpcERhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKQoJewoJCSRkYXRhUmVzcG9uc2UgPSBNTV9SZXBvcnREYXRhUmV0cmlldmVyOjpyZXF1ZXN0RGF0YSgkdGhpcyxzZWxmOjokQ1VTVE9NRVJfVkFMVUVfUkVQT1JUX01FTUJFUlNISVBfUVVFUlksICRwYXJhbXMpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQkkZ3JpZEhlYWRlcnMgPSBhcnJheSgibWVtYmVyc2hpcF9sZXZlbF9uYW1lIiA9PiBhcnJheSgnbGFiZWwnPT4iTWVtYmVyc2hpcCBMZXZlbCIpLAoJCQkJCQkJICJ0b3RhbF9jdXN0b21lcnMiCSAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IiMgQ3VzdC4iKSwKCQkJCQkJICAgICAiMF9kYXkiICAgICAgICAgICAJICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDAiLCAgICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkJICI3X2RheSIgICAgICAgICAgCSAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSA3IiwgICAgJ2NvbHVtblR5cGUnPT4nbW9uZXknKSwKCQkJCQkJCSAiMTRfZGF5IiAgICAgICAgICAJICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDE0IiwgICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkJICIyMV9kYXkiICAgICAgICAgIAkgICAgID0+IGFycmF5KCdsYWJlbCc9PiJEYXkgMjEiLCAgICdjb2x1bW5UeXBlJz0+J21vbmV5JyksCgkJCQkJCQkgIjMwX2RheSIgICAgICAgICAJICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDMwIiwgICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkJICI2MF9kYXkiICAgICAgICAgIAkgICAgID0+IGFycmF5KCdsYWJlbCc9PiJEYXkgNjAiLCAgICdjb2x1bW5UeXBlJz0+J21vbmV5JyksCgkJCQkJCQkgIjkwX2RheSIgICAgICAgICAgCSAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSA5MCIsICAgJ2NvbHVtblR5cGUnPT4nbW9uZXknKSwKCQkJCQkJCSAiMTIwX2RheSIgICAgICAgICAJICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDEyMCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkJICIxNTBfZGF5IiAgICAgICAgIAkgICAgID0+IGFycmF5KCdsYWJlbCc9PiJEYXkgMTUwIiwgICdjb2x1bW5UeXBlJz0+J21vbmV5JyksCgkJCQkJCQkgIjE4MF9kYXkiICAgICAgICAgCSAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAxODAiLCAgJ2NvbHVtblR5cGUnPT4nbW9uZXknKSwKCQkJCQkJCSAiMzYwX2RheSIgICAgICAgICAJICAgICA9PiBhcnJheSgnbGFiZWwnPT4iRGF5IDM2MCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJCQkgICAgICJhbGxfdGltZV92YWx1ZSIgIAkgICAgID0+IGFycmF5KCdsYWJlbCc9PiJBbGwtVGltZSIsICdjb2x1bW5UeXBlJz0+J21vbmV5JykKCQkJCQkJCQkKCQkpOwoJCSRncmlkID0gTU1fUmVwb3J0RGF0YWdyaWQ6OmNyZWF0ZUZyb21EYXRhKHNlbGY6OiRDVVNUT01FUl9WQUxVRV9SRVBPUlRfREFUQUdSSUQsICRncmlkSGVhZGVycywgJGRhdGFSZXNwb25zZSwgJGRpcmVjdGl2ZXMpOwoJCS8vJGdyaWQtPnNldEdyaWRUaXRsZSgiQ3VzdG9tZXIgVmFsdWUgUmVwb3J0IC0gQnkgTWVtYmVyc2hpcCBMZXZlbCIpOwoJCSRncmlkLT5zZXRTaG93SGVhZGVyUm93KGZhbHNlKTsKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRncmlkLT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlckN1c3RvbWVyVmFsdWVSZXBvcnRBZmZpbGlhdGVEYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoJHRoaXMsc2VsZjo6JENVU1RPTUVSX1ZBTFVFX1JFUE9SVF9BRkZJTElBVEVfUVVFUlksICRwYXJhbXMpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQkkZ3JpZFRpdGxlID0gIkN1c3RvbWVyIFZhbHVlIFJlcG9ydCI7CgkJaWYgKGlzc2V0KCRwYXJhbXNbJ2FmZmlsaWF0ZV9pZCddKSkKCQl7CgkJCSRpc1N1YmdyaWQgPSB0cnVlOwoJCQkkZ3JpZEhlYWRlcnMgPSBhcnJheSgic3ViX2FmZmlsaWF0ZV9pZCIgPT4gYXJyYXkoJ2xhYmVsJz0+IlN1YmFmZmlsaWF0ZSIpKTsKCQkJJGdyaWRUaXRsZSAuPSAiIC0gKHNob3dpbmcgc3ViYWZmaWxpYXRlcyBmb3IgYWZmaWxpYXRlIGlkICZxdW90O3skcGFyYW1zWydhZmZpbGlhdGVfaWQnXX0mcXVvdDspIjsKCQl9CgkJZWxzZQoJCXsKCQkJJGlzU3ViZ3JpZCA9IGZhbHNlOwoJCQkkZ3JpZEhlYWRlcnMgPSBhcnJheSgiYWZmaWxpYXRlX2lkIiAgICA9PiBhcnJheSgnbGFiZWwnPT4iQWZmaWxpYXRlIiwgJ3NvcnRhYmxlJz0+dHJ1ZSwgJ2xpbmsnPT5hcnJheSgnbmFtZSc9PidhZmZpbGlhdGVfaWQnLCd2YWx1ZSc9PidhZmZpbGlhdGVfaWQnKSkpOwoJCX0KCQoJCSRncmlkSGVhZGVycyArPSBhcnJheSgidG90YWxfY3VzdG9tZXJzIiA9PiBhcnJheSgnbGFiZWwnPT4iIyBDdXN0LiIpLAoJCQkJIjBfZGF5IiAgICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAwIiwgICAnY29sdW1uVHlwZSc9Pidtb25leScsICdzb3J0YWJsZSc9PnRydWUpLAoJCQkJIjdfZGF5IiAgICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSA3IiwgICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjE0X2RheSIgICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAxNCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjIxX2RheSIgICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAyMSIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjMwX2RheSIgICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAzMCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjYwX2RheSIgICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSA2MCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjkwX2RheSIgICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSA5MCIsICAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjEyMF9kYXkiICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAxMjAiLCAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjE1MF9kYXkiICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAxNTAiLCAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjE4MF9kYXkiICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAxODAiLCAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJIjM2MF9kYXkiICAgICAgICAgPT4gYXJyYXkoJ2xhYmVsJz0+IkRheSAzNjAiLCAnY29sdW1uVHlwZSc9Pidtb25leScpLAoJCQkJImFsbF90aW1lX3ZhbHVlIiAgPT4gYXJyYXkoJ2xhYmVsJz0+IkFsbC1UaW1lIiwgICAnY29sdW1uVHlwZSc9Pidtb25leScpCgkKCQkpOwoJCSRncmlkID0gTU1fUmVwb3J0RGF0YWdyaWQ6OmNyZWF0ZUZyb21EYXRhKHNlbGY6OiRDVVNUT01FUl9WQUxVRV9SRVBPUlRfREFUQUdSSUQsICRncmlkSGVhZGVycywgJGRhdGFSZXNwb25zZSwgJGRpcmVjdGl2ZXMpOwoJCSRncmlkLT5zZXRHcmlkVGl0bGUoJGdyaWRUaXRsZSk7CgkJaWYgKCRpc1N1YmdyaWQpCgkJewoJCQkkZ3JpZC0+YWRkQmFja0xpbmsodHJ1ZSk7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGdyaWQtPnJlbmRlcigpKTsKCX0KCQoJCgkvKioKCSAqIEdlbmVyYXRlIHRoZSBkYXRhIGZvciB0aGUgQ3VzdG9tZXIgVmFsdWUgcmVwb3J0ICJncm91cGVkIiBieSBtZW1iZXJzaGlwIGxldmVsLgoJICogQ29uc3RyYWludDogVGhlIHN1cHBsaWVkIHBhcmFtcyBtdXN0IGNvbnRhaW4gYSBzdGFydCBhbmQgZW5kIGRhdGUKCSAqCgkgKiBAcGFyYW0gYXJyYXkgJHBhcmFtcwoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSByZXN1bHRzCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVDdXN0b21lclZhbHVlUmVwb3J0TWVtYmVyc2hpcERhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQlpZiAoIWlzX2FycmF5KCRwYXJhbXMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIEN1c3RvbWVyIFZhbHVlIHJlcG9ydCBkYXRhOiBJbXByb3BlciBwYXJhbWV0ZXJzIGZvcm1hdCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJaWYgKCFpc3NldCgkcGFyYW1zWydzdGFydF9kYXRlJ10pIHx8ICFpc3NldCgkcGFyYW1zWydlbmRfZGF0ZSddKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBDdXN0b21lciBWYWx1ZSByZXBvcnQgZGF0YTogU3RhcnQgYW5kIEVuZCBkYXRlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCSR0cmFuc2FjdGlvbnNUYWJsZSA9IE1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRzsKCQkkb3JkZXJzVGFibGUgPSBNTV9UQUJMRV9PUkRFUlM7CgkJJHVzZXJEYXRhVGFibGUgPSBNTV9UQUJMRV9VU0VSX0RBVEE7CgkJJG1lbWJlcnNoaXBzVGFibGUgPSBNTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUzsKCQkKCQkkc3RhcnREYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiLHN0cnRvdGltZSgkcGFyYW1zWydzdGFydF9kYXRlJ10pKTsgLy9teXNxbCBmb3JtYXQKCQkkZW5kRGF0ZSA9ICAgZGF0ZSgiWS1tLWQgSDppOnMiLHN0cnRvdGltZSgkcGFyYW1zWydlbmRfZGF0ZSddKSk7CgkJCgkJJGV4Y2x1ZGVkVXNlclN0YXR1c2VzID0gaW1wbG9kZSgiLCIsYXJyYXkoTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OLE1NX1N0YXR1czo6JEVSUk9SKSk7IC8vcXVvdGVkIGFuZCBjb21tYS1zZXBlcmF0ZWQKCQkkcGF5bWVudFN0YXR1c2VzID0gaW1wbG9kZSgiLCIsYXJyYXkoTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCkpOwoJCQoJCSRzcWwgPSAiU0VMRUNUIFgubWVtYmVyc2hpcF9sZXZlbF9uYW1lLCIuCgkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ9MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDBfZGF5LCIuCgkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ8PTcsYW1vdW50LDApKSkpL3RvdGFsX2N1c3RvbWVycyBBUyA3X2RheSwiLgoJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD0xNCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDE0X2RheSwiLgoJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD0yMSxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDIxX2RheSwiLgoJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD0zMCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDMwX2RheSwiLgoJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD02MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDYwX2RheSwiLgoJCQkJIihBQlMoU1VNKGlmKGRheXNfb3V0PD05MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDkwX2RheSwiLgoJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD0xMjAsYW1vdW50LDApKSkpL3RvdGFsX2N1c3RvbWVycyBBUyAxMjBfZGF5LCIuCgkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ8PTE1MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDE1MF9kYXksIi4KCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MTgwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTgwX2RheSwiLgoJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD0zNjAsYW1vdW50LDApKSkpL3RvdGFsX2N1c3RvbWVycyBBUyAzNjBfZGF5LCIuCgkJCQkiKEFCUyhTVU0oYW1vdW50KSkpL3RvdGFsX2N1c3RvbWVycyBBUyBhbGxfdGltZV92YWx1ZSwiLgoJCQkJIlkudG90YWxfY3VzdG9tZXJzICIuCgkJCQkiRlJPTSAoU0VMRUNUIHQuYW1vdW50LCB0LnRyYW5zYWN0aW9uX2RhdGUsIG11LmJlY2FtZV9hY3RpdmUsREFURURJRkYodC50cmFuc2FjdGlvbl9kYXRlLCIuCgkJCQkibXUuYmVjYW1lX2FjdGl2ZSkgQVMgZGF5c19vdXQsIG11Lm1lbWJlcnNoaXBfbGV2ZWxfaWQsIG1sLm5hbWUgQVMgbWVtYmVyc2hpcF9sZXZlbF9uYW1lLCBtdS53cF91c2VyX2lkICIuCgkJCQkiRlJPTSB7JHRyYW5zYWN0aW9uc1RhYmxlfSB0IElOTkVSIEpPSU4geyRvcmRlcnNUYWJsZX0gbyBPTiAodC5vcmRlcl9pZCA9IG8uaWQpICIuCgkJCQkiSU5ORVIgSk9JTiB7JHVzZXJEYXRhVGFibGV9IG11IE9OIChvLnVzZXJfaWQgPSBtdS53cF91c2VyX2lkKSAiLgoJCQkJIklOTkVSIEpPSU4geyRtZW1iZXJzaGlwc1RhYmxlfSBtbCBPTiAobXUubWVtYmVyc2hpcF9sZXZlbF9pZCA9IG1sLmlkKSAiLgoJCQkJIldIRVJFICh0LnRyYW5zYWN0aW9uX3R5cGUgSU4gKHskcGF5bWVudFN0YXR1c2VzfSkpIEFORCAobXUuYmVjYW1lX2FjdGl2ZSBCRVRXRUVOICVzIEFORCAlcykgQU5EICIuCgkJCQkiKG11LnN0YXR1cyBOT1QgSU4gKHskZXhjbHVkZWRVc2VyU3RhdHVzZXN9KSkpIEFTIFggSU5ORVIgSk9JTiAoU0VMRUNUIENPVU5UKDEpIEFTIHRvdGFsX2N1c3RvbWVycywgbWVtYmVyc2hpcF9sZXZlbF9pZCAiLgoJCQkJIkZST00geyR1c2VyRGF0YVRhYmxlfSBXSEVSRSAoYmVjYW1lX2FjdGl2ZSBCRVRXRUVOICVzIEFORCAlcykgIi4KCQkJCSJBTkQgKHN0YXR1cyBOT1QgSU4gKHskZXhjbHVkZWRVc2VyU3RhdHVzZXN9KSkgR1JPVVAgQlkgbWVtYmVyc2hpcF9sZXZlbF9pZCkgQVMgWSAiLgoJCQkJIk9OIChYLm1lbWJlcnNoaXBfbGV2ZWxfaWQgPSBZLm1lbWJlcnNoaXBfbGV2ZWxfaWQpICIuCgkJCQkiR1JPVVAgQlkgWC5tZW1iZXJzaGlwX2xldmVsX2lkIE9SREVSIEJZIFkudG90YWxfY3VzdG9tZXJzIERFU0MiOwoJCSRzcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCRzdGFydERhdGUsJGVuZERhdGUsJHN0YXJ0RGF0ZSwkZW5kRGF0ZSk7CgkJCgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCxBUlJBWV9BKTsKCQkkZGF0YXNldCA9IE1NX1JlcG9ydERhdGFzZXQ6OmNyZWF0ZVNpbmdsZVJlcG9ydERhdGFzZXQoJHBhcmFtcywkcmVzdWx0cyk7CgkJcmV0dXJuICRkYXRhc2V0OwoJfQoJCgkKCS8qKgoJICogR2VuZXJhdGUgdGhlIGRhdGEgZm9yIHRoZSBDdXN0b21lciBWYWx1ZSByZXBvcnQuIAoJICogQ29uc3RyYWludDogVGhlIHN1cHBsaWVkIHBhcmFtcyBtdXN0IGNvbnRhaW4gYSBzdGFydCBhbmQgZW5kIGRhdGUKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwYXJhbXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgcmVzdWx0cwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlQ3VzdG9tZXJWYWx1ZVJlcG9ydEFmZmlsaWF0ZURhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFpc19hcnJheSgkcGFyYW1zKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBDdXN0b21lciBWYWx1ZSByZXBvcnQgZGF0YTogSW1wcm9wZXIgcGFyYW1ldGVycyBmb3JtYXQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoIWlzc2V0KCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkgfHwgIWlzc2V0KCRwYXJhbXNbJ2VuZF9kYXRlJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIEFmZmlsaWF0ZSByZXBvcnQgZGF0YTogU3RhcnQgYW5kIEVuZCBkYXRlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdHJhbnNhY3Rpb25zVGFibGUgPSBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0c7CgkJJG9yZGVyc1RhYmxlID0gTU1fVEFCTEVfT1JERVJTOwoJCSR1c2VyRGF0YVRhYmxlID0gTU1fVEFCTEVfVVNFUl9EQVRBOwoJCQoJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCBIOmk6cyIsc3RydG90aW1lKCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkpOyAvL215c3FsIGZvcm1hdAoJCSRlbmREYXRlID0gICBkYXRlKCJZLW0tZCBIOmk6cyIsc3RydG90aW1lKCRwYXJhbXNbJ2VuZF9kYXRlJ10pKTsKCQkKCQkkZXhjbHVkZWRVc2VyU3RhdHVzZXMgPSBpbXBsb2RlKCIsIixhcnJheShNTV9TdGF0dXM6OiRQRU5ESU5HX0FDVElWQVRJT04sTU1fU3RhdHVzOjokRVJST1IpKTsgLy9xdW90ZWQgYW5kIGNvbW1hLXNlcGVyYXRlZAoJCQoJCWlmIChpc3NldCgkcGFyYW1zWydhZmZpbGlhdGVfaWQnXSkpCgkJewoJCQkvL3RoaXMgaXMgYSBkcmlsbGRvd24KCQkJJGFmZmlsaWF0ZVZhbHVlID0gKCRwYXJhbXNbJ2FmZmlsaWF0ZV9pZCddID09ICJbdW5zcGVjaWZpZWRdIik/IiI6JHBhcmFtc1snYWZmaWxpYXRlX2lkJ107CgkJCSRzcWwgPSAiU0VMRUNUIElGKFkub3JpZ2luX2FmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsWS5vcmlnaW5fYWZmaWxpYXRlX2lkKSBBUyBhZmZpbGlhdGVfaWQsIi4KCQkJCQkiSUYoWS5vcmlnaW5fc3ViYWZmaWxpYXRlX2lkPScnLCdbdW5zcGVjaWZpZWRdJyxZLm9yaWdpbl9zdWJhZmZpbGlhdGVfaWQpIEFTIHN1Yl9hZmZpbGlhdGVfaWQsIi4KCQkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ9MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDBfZGF5LCIuCgkJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD03LGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgN19kYXksIi4KCQkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ8PTE0LGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTRfZGF5LCIuCgkJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD0yMSxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDIxX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MzAsYW1vdW50LDApKSkpL3RvdGFsX2N1c3RvbWVycyBBUyAzMF9kYXksIi4KCQkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ8PTYwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgNjBfZGF5LCIuCgkJCQkJIihBQlMoU1VNKGlmKGRheXNfb3V0PD05MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDkwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MTIwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTIwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MTUwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTUwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MTgwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTgwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MzYwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMzYwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRk5VTEwoYW1vdW50LDApKSkpL3RvdGFsX2N1c3RvbWVycyBBUyBhbGxfdGltZV92YWx1ZSwiLgoJCQkJCSJZLnRvdGFsX2N1c3RvbWVycyAiLgoJCQkJCSJGUk9NIChTRUxFQ1QgdC5hbW91bnQsIHQudHJhbnNhY3Rpb25fZGF0ZSwgbXUuYmVjYW1lX2FjdGl2ZSxEQVRFRElGRih0LnRyYW5zYWN0aW9uX2RhdGUsIi4KCQkJCQkibXUuYmVjYW1lX2FjdGl2ZSkgQVMgZGF5c19vdXQsIG11Lm9yaWdpbl9hZmZpbGlhdGVfaWQsICBtdS5vcmlnaW5fc3ViYWZmaWxpYXRlX2lkLCBtdS53cF91c2VyX2lkICIuCgkJCQkJIkZST00geyR0cmFuc2FjdGlvbnNUYWJsZX0gdCBJTk5FUiBKT0lOIHskb3JkZXJzVGFibGV9IG8gT04gKHQub3JkZXJfaWQgPSBvLmlkKSAiLgoJCQkJCSJJTk5FUiBKT0lOIHskdXNlckRhdGFUYWJsZX0gbXUgT04gKG8udXNlcl9pZCA9IG11LndwX3VzZXJfaWQpIFdIRVJFIChtdS5vcmlnaW5fYWZmaWxpYXRlX2lkID0gJXMpIEFORCAgKHQudHJhbnNhY3Rpb25fdHlwZSBJTiAiLgoJCQkJCSIoJyIuTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQuIicsJyIuTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULiInKSkgIi4KCQkJCQkiQU5EIChtdS5iZWNhbWVfYWN0aXZlIEJFVFdFRU4gJXMgQU5EICVzKSBBTkQgIi4KCQkJCQkiKG11LnN0YXR1cyBOT1QgSU4gKHskZXhjbHVkZWRVc2VyU3RhdHVzZXN9KSkpIEFTIFggUklHSFQgT1VURVIgSk9JTiAoU0VMRUNUIENPVU5UKDEpIEFTIHRvdGFsX2N1c3RvbWVycywgb3JpZ2luX2FmZmlsaWF0ZV9pZCwgIi4KCQkJCQkib3JpZ2luX3N1YmFmZmlsaWF0ZV9pZCBGUk9NIHskdXNlckRhdGFUYWJsZX0gV0hFUkUgKG9yaWdpbl9hZmZpbGlhdGVfaWQgPSAlcykgQU5EIChiZWNhbWVfYWN0aXZlIEJFVFdFRU4gJXMgQU5EICVzKSAiLgoJCQkJCSJBTkQgKHN0YXR1cyBOT1QgSU4gKHskZXhjbHVkZWRVc2VyU3RhdHVzZXN9KSkgR1JPVVAgQlkgb3JpZ2luX3N1YmFmZmlsaWF0ZV9pZCkgQVMgWSAiLgoJCQkJCSJPTiAoWC5vcmlnaW5fc3ViYWZmaWxpYXRlX2lkID0gWS5vcmlnaW5fc3ViYWZmaWxpYXRlX2lkKSAiLgoJCQkJCSJHUk9VUCBCWSBYLm9yaWdpbl9zdWJhZmZpbGlhdGVfaWQgT1JERVIgQlkgWS50b3RhbF9jdXN0b21lcnMgREVTQyI7CgkJCSRzcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCRhZmZpbGlhdGVWYWx1ZSwkc3RhcnREYXRlLCRlbmREYXRlLCRhZmZpbGlhdGVWYWx1ZSwkc3RhcnREYXRlLCRlbmREYXRlKTsKCQl9CgkJZWxzZSAKCQl7CgkJCS8vdG9wLWxldmVsIHF1ZXJ5CgkJCSRzcWwgPSAiU0VMRUNUIElGKFkub3JpZ2luX2FmZmlsaWF0ZV9pZD0nJywnW3Vuc3BlY2lmaWVkXScsWS5vcmlnaW5fYWZmaWxpYXRlX2lkKSBBUyBhZmZpbGlhdGVfaWQsIi4KCQkJCQkiSUYoWS5vcmlnaW5fc3ViYWZmaWxpYXRlX2lkPScnLCdbdW5zcGVjaWZpZWRdJyxZLm9yaWdpbl9zdWJhZmZpbGlhdGVfaWQpIEFTIHN1Yl9hZmZpbGlhdGVfaWQsIi4KCQkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ9MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDBfZGF5LCIuCgkJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD03LGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgN19kYXksIi4KCQkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ8PTE0LGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTRfZGF5LCIuCgkJCQkJIihBQlMoU1VNKElGKGRheXNfb3V0PD0yMSxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDIxX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MzAsYW1vdW50LDApKSkpL3RvdGFsX2N1c3RvbWVycyBBUyAzMF9kYXksIi4KCQkJCQkiKEFCUyhTVU0oSUYoZGF5c19vdXQ8PTYwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgNjBfZGF5LCIuCgkJCQkJIihBQlMoU1VNKGlmKGRheXNfb3V0PD05MCxhbW91bnQsMCkpKSkvdG90YWxfY3VzdG9tZXJzIEFTIDkwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MTIwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTIwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MTUwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTUwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MTgwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMTgwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRihkYXlzX291dDw9MzYwLGFtb3VudCwwKSkpKS90b3RhbF9jdXN0b21lcnMgQVMgMzYwX2RheSwiLgoJCQkJCSIoQUJTKFNVTShJRk5VTEwoYW1vdW50LDApKSkpL3RvdGFsX2N1c3RvbWVycyBBUyBhbGxfdGltZV92YWx1ZSwiLgoJCQkJCSJZLnRvdGFsX2N1c3RvbWVycyAiLgoJCQkJCSJGUk9NIChTRUxFQ1QgdC5hbW91bnQsIHQudHJhbnNhY3Rpb25fZGF0ZSwgbXUuYmVjYW1lX2FjdGl2ZSxEQVRFRElGRih0LnRyYW5zYWN0aW9uX2RhdGUsIi4KCQkJCQkibXUuYmVjYW1lX2FjdGl2ZSkgQVMgZGF5c19vdXQsIG11Lm9yaWdpbl9hZmZpbGlhdGVfaWQsICBtdS5vcmlnaW5fc3ViYWZmaWxpYXRlX2lkLCBtdS53cF91c2VyX2lkICIuCgkJCQkJIkZST00geyR0cmFuc2FjdGlvbnNUYWJsZX0gdCBJTk5FUiBKT0lOIHskb3JkZXJzVGFibGV9IG8gT04gKHQub3JkZXJfaWQgPSBvLmlkKSAiLgoJCQkJCSJJTk5FUiBKT0lOIHskdXNlckRhdGFUYWJsZX0gbXUgT04gKG8udXNlcl9pZCA9IG11LndwX3VzZXJfaWQpIFdIRVJFICh0LnRyYW5zYWN0aW9uX3R5cGUgSU4gIi4KCQkJCQkiKCciLk1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5ULiInLCciLk1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVC4iJykpICIuCgkJCQkJIkFORCAobXUuYmVjYW1lX2FjdGl2ZSBCRVRXRUVOICVzIEFORCAlcykgQU5EICIuCgkJCQkJIihtdS5zdGF0dXMgTk9UIElOICh7JGV4Y2x1ZGVkVXNlclN0YXR1c2VzfSkpKSBBUyBYIFJJR0hUIE9VVEVSIEpPSU4gKFNFTEVDVCBDT1VOVCgxKSBBUyB0b3RhbF9jdXN0b21lcnMsIG9yaWdpbl9hZmZpbGlhdGVfaWQsICIuCgkJCQkJIm9yaWdpbl9zdWJhZmZpbGlhdGVfaWQgRlJPTSB7JHVzZXJEYXRhVGFibGV9IFdIRVJFIChiZWNhbWVfYWN0aXZlIEJFVFdFRU4gJXMgQU5EICVzKSAiLgoJCQkJCSJBTkQgKHN0YXR1cyBOT1QgSU4gKHskZXhjbHVkZWRVc2VyU3RhdHVzZXN9KSkgR1JPVVAgQlkgb3JpZ2luX2FmZmlsaWF0ZV9pZCkgQVMgWSAiLgoJCQkJCSJPTiAoWC5vcmlnaW5fYWZmaWxpYXRlX2lkID0gWS5vcmlnaW5fYWZmaWxpYXRlX2lkKSAiLgoJCQkJCSJHUk9VUCBCWSBYLm9yaWdpbl9hZmZpbGlhdGVfaWQgT1JERVIgQlkgWS50b3RhbF9jdXN0b21lcnMgREVTQyI7CgkJCSRzcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCRzdGFydERhdGUsJGVuZERhdGUsJHN0YXJ0RGF0ZSwkZW5kRGF0ZSk7CgkJfQoJCQoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwsQVJSQVlfQSk7CgkJJGRhdGFzZXQgPSBNTV9SZXBvcnREYXRhc2V0OjpjcmVhdGVTaW5nbGVSZXBvcnREYXRhc2V0KCRwYXJhbXMsJHJlc3VsdHMpOwoJCXJldHVybiAkZGF0YXNldDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyQ3VzdG9tZXJWYWx1ZUxpbmVjaGFydCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQkKCQlpZiAoaXNzZXQoJHBhcmFtc1snZ3JvdXBfYnknXSkgJiYgKCRwYXJhbXNbJ2dyb3VwX2J5J10gPT0gIm1lbWJlcnNoaXBfbGV2ZWwiKSkKCQl7CgkJCSRrZXlDb2x1bW4gPSAibWVtYmVyc2hpcF9sZXZlbF9uYW1lIjsKCQkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksc2VsZjo6JENVU1RPTUVSX1ZBTFVFX1JFUE9SVF9NRU1CRVJTSElQX1FVRVJZLCAkcGFyYW1zKTsKCQl9CgkJZWxzZQoJCXsKCQkJJGtleUNvbHVtbiA9IChpc3NldCgkcGFyYW1zWydhZmZpbGlhdGVfaWQnXSkpPyJzdWJfYWZmaWxpYXRlX2lkIjoiYWZmaWxpYXRlX2lkIjsKCQkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksc2VsZjo6JENVU1RPTUVSX1ZBTFVFX1JFUE9SVF9BRkZJTElBVEVfUVVFUlksICRwYXJhbXMpOwoJCX0KCQkKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJCgkJLy9jcmVhdGUgdGhlIGxpbmUgY2hhcnQKCQkkbGluZSA9IG5ldyBNTV9SZXBvcnRMaW5lQ2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyKTsKCQkKCQkvL2RvIGFueSByZXF1aXJlZCBzb3J0aW5nIG9mIHRoZSBkYXRhCgkJaWYgKGlzc2V0KCRkaXJlY3RpdmVzWydzb3J0Q29sdW1uJ10pKQoJCXsKCQkJTU1fQWJzdHJhY3RSZXBvcnREYXRhTW9kZWw6OnNvcnRSZXN1bHRzKCRkYXRhUmVzcG9uc2UtPm1lc3NhZ2UsICRkaXJlY3RpdmVzWydzb3J0Q29sdW1uJ10sICRkaXJlY3RpdmVzWydzb3J0RGlyZWN0aW9uJ10pOwoJCX0KCQkKCQkkZmlyc3RMaW5lID0gYXJyYXlfa2V5cyhyZXNldCgkZGF0YVJlc3BvbnNlLT5tZXNzYWdlKSk7CgkJJGZpZWxkcyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJGZpcnN0TGluZSBhcyAkYWZpZWxkKSAvL3RoaXMgc2VjdGlvbiBhbGxvd3MgdGhlIGJ1Y2tldHMgdG8gYmUgY2hhbmdlZCB3aXRob3V0IGJyZWFraW5nIHRoZSBsaW5lIGNoYXJ0CgkJewoJCQkkbWF0Y2hlcyA9IGFycmF5KCk7CgkJCWlmIChwcmVnX21hdGNoKCIvXihbMC05XSspX2RheSQvIiwkYWZpZWxkLCRtYXRjaGVzKSA9PSAxKQoJCQl7CgkJCQkkZmllbGRzWyRhZmllbGRdID0gJG1hdGNoZXNbMV07CgkJCX0KCQl9CgkJCgkJJGNvdW50ID0gMDsKCQlmb3JlYWNoICgkZGF0YVJlc3BvbnNlLT5tZXNzYWdlIGFzICR2KQoJCXsKCQkJaWYgKCRjb3VudCsrID49IDEwKQoJCQl7CgkJCQlicmVhazsKCQkJfQoJCQkkbW9kZWwgPSBuZXcgTU1fUmVwb3J0Q2F0ZWdvcnlWYWx1ZU1vZGVsKCk7CgkJCSRtb2RlbC0+c2V0VGl0bGUoJHZbJGtleUNvbHVtbl0pOwoJCQlmb3JlYWNoICgkZmllbGRzIGFzICRidWNrZXROYW1lPT4kYnVja2V0KQoJCQl7CgkJCQkkbW9kZWwtPmFkZFZhbHVlcygkYnVja2V0LCAkdlskYnVja2V0TmFtZV0pOwoJCQl9CgkJCSRsaW5lLT5hZGRNb2RlbCgkbW9kZWwpOwoJCX0KCQkKCQkJCgkJJGxpbmUtPnNldEN1cnJlbmN5VmFsdWVzKHRydWUpOwoJCSRsaW5lLT5zZXRDdXJyZW5jeVR5cGUoTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpKTsKCQkkbGluZS0+c2V0VmFsdWVBeGlzVGl0bGUoIkN1c3RvbWVyIHZhbHVlIGluICIuTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpKTsKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRsaW5lLT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZURhdGEoJHF1ZXJ5SWRlbnRpZmllciwgJHBhcmFtcykKCXsKCQlzd2l0Y2ggKCRxdWVyeUlkZW50aWZpZXIpCgkJewoJCQljYXNlIHNlbGY6OiRDVVNUT01FUl9WQUxVRV9SRVBPUlRfQUZGSUxJQVRFX1FVRVJZOgoJCQkJcmV0dXJuIHNlbGY6OmdlbmVyYXRlQ3VzdG9tZXJWYWx1ZVJlcG9ydEFmZmlsaWF0ZURhdGEoJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokQ1VTVE9NRVJfVkFMVUVfUkVQT1JUX01FTUJFUlNISVBfUVVFUlk6CgkJCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVDdXN0b21lclZhbHVlUmVwb3J0TWVtYmVyc2hpcERhdGEoJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgZGF0YSBmb3IgdW5rbm93biBxdWVyeSBpZGVudGlmaWVyIHskcXVlcnlJZGVudGlmaWVyfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCn0KCg==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(179, 'paymentutilsview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUGF5bWVudFV0aWxzVmlldyBleHRlbmRzIE1NX0xvZ2dlZEluVXNlclZpZXcKewoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0hFQ0tfSUZfUEFZTUVOVF9SRVFVSVJFRCA9ICJjaGVja0lmUGF5bWVudFJlcXVpcmVkIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0dFVF9QQVlNRU5UX09QVElPTlNfTElTVCA9ICJnZXRQYXltZW50T3B0aW9uc0xpc3QiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0hBTkdFX01FTUJFUlNISVBfU1RBVFVTID0gImNoYW5nZU1lbWJlcnNoaXBTdGF0dXMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0hBTkdFX0JVTkRMRV9TVEFUVVMgPSAiY2hhbmdlQnVuZGxlU3RhdHVzIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1BMQUNFX09SREVSX0NBUkRfT05fRklMRSA9ICJwbGFjZU9yZGVyQ2FyZE9uRmlsZSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9BUFBMWV9GUkVFX0JVTkRMRSA9ICJhcHBseUZyZWVCdW5kbGUiOwoJCglwcm90ZWN0ZWQgc3RhdGljICRQQVlNRU5UX09QVElPTlNfTU9EVUxFID0gInBheW1lbnRfb3B0aW9ucyI7Cglwcm90ZWN0ZWQgc3RhdGljICRQQVlNRU5UX0NPTkZJUk1BVElPTl9NT0RVTEUgPSAicGF5bWVudF9jb25maXJtYXRpb24iOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1BMQUNFX09SREVSX0NBUkRfT05fRklMRToKCQkJCQlyZXR1cm4gJHRoaXMtPnBsYWNlT3JkZXJDYXJkT25GaWxlKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NIRUNLX0lGX1BBWU1FTlRfUkVRVUlSRUQ6CgkJCQkJcmV0dXJuICR0aGlzLT5jaGVja0lmUGF5bWVudFJlcXVpcmVkKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0dFVF9QQVlNRU5UX09QVElPTlNfTElTVDoKCQkJCQlyZXR1cm4gJHRoaXMtPmdldFBheW1lbnRPcHRpb25zTGlzdCgkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9DSEFOR0VfTUVNQkVSU0hJUF9TVEFUVVM6CgkJCQkJcmV0dXJuICR0aGlzLT5jaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NIQU5HRV9CVU5ETEVfU1RBVFVTOgoJCQkJCXJldHVybiAkdGhpcy0+Y2hhbmdlQnVuZGxlU3RhdHVzKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0FQUExZX0ZSRUVfQlVORExFOgoJCQkJCXJldHVybiAkdGhpcy0+YXBwbHlGcmVlQnVuZGxlKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNoZWNrSWZQYXltZW50UmVxdWlyZWQoJHBvc3QpCgl7CgkJaWYoIWlzc2V0KCRwb3N0WyJhY2Nlc3NUeXBlIl0pIHx8ICFpc3NldCgkcG9zdFsiYWNjZXNzVHlwZUlkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ2Fubm90IGNoZWNrIGlmIHBheW1lbnQgaXMgcmVxdWlyZWQuIFBhcmFtZXRlcnMgYWNjZXNzIHR5cGUgYW5kIGFjY2VzcyB0eXBlIElEIGFyZSByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYoJHBvc3RbImFjY2Vzc1R5cGUiXSA9PSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCkKCQl7CgkJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkcG9zdFsiYWNjZXNzVHlwZUlkIl0pOwoJCQkKCQkJaWYoJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQkJewkJCQoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSghJG1lbWJlcnNoaXAtPmlzRnJlZSgpLCBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRmFpbGVkIHRvIGNoZWNrIHBheW1lbnQgcmVxdWlyZW1lbnRzLiBJbnZhbGlkIG1lbWJlcnNoaXAgbGV2ZWwgSUQgJ3skcG9zdFsiYWNjZXNzVHlwZUlkIl19Jy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlIGlmKCRwb3N0WyJhY2Nlc3NUeXBlIl0gPT0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6JEFDQ0VTU19UWVBFX0JVTkRMRSkKCQl7CgkJCSRidW5kbGUgPSBuZXcgTU1fQnVuZGxlKCRwb3N0WyJhY2Nlc3NUeXBlSWQiXSk7CgkJCQkKCQkJaWYoJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCEkYnVuZGxlLT5pc0ZyZWUoKSwgTU1fUmVzcG9uc2U6OiRTVUNDRVNTKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkZhaWxlZCB0byBjaGVjayBwYXltZW50IHJlcXVpcmVtZW50cy4gSW52YWxpZCBidW5kbGUgSUQgJ3skcG9zdFsiYWNjZXNzVHlwZUlkIl19Jy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gY2hlY2sgcGF5bWVudCByZXF1aXJlbWVudHMuIEludmFsaWQgYWNjZXNzIHR5cGUgJ3skcG9zdFsiYWNjZXNzVHlwZSJdfScuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UGF5bWVudE9wdGlvbnNMaXN0KCRwb3N0KQoJewoJCWlmKCFpc3NldCgkcG9zdFsibW1fcHJvZHVjdF9pZCJdKSB8fCAhaXNzZXQoJHBvc3RbIm1tX3VzZXJfaWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDYW5ub3QgZ2V0IHBheW1lbnQgb3B0aW9ucyBsaXN0LiBQYXJhbWV0ZXJzIHByb2R1Y3QgSUQgYW5kIHVzZXIgSUQgYXJlIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkaHRtbCA9ICIiOwoJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHBvc3RbIm1tX3VzZXJfaWQiXSk7CgkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcG9zdFsibW1fcHJvZHVjdF9pZCJdKTsKCQkKCQkvLyBiaWxsaW5nIGRlc2NyaXB0aW9uCgkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQl7CgkJCSRodG1sIC49ICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHg7Ij4nOwoJCQkkaHRtbCAuPSAnPHNwYW4gY2xhc3M9Im1tLXNlY3Rpb24taGVhZGVyIiBzdHlsZT0iZm9udC1zaXplOjE1cHg7Ij4nOwoJCQkkaHRtbCAuPSBNTV9VdGlsczo6Z2V0SWNvbignbW9uZXknLCAnYmx1ZScsICcxLjJlbScsICcxcHgnKTsKCQkJJGh0bWwgLj0gJyBCaWxsaW5nIERlc2NyaXB0aW9uPC9zcGFuPic7CgkJCSRodG1sIC49ICc8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOjVweDsgbWFyZ2luLWxlZnQ6MjBweDsiPic7CgkJCSRodG1sIC49ICRwcm9kdWN0LT5nZXRCaWxsaW5nRGVzY3JpcHRpb24oKTsKCQkJJGh0bWwgLj0gJzwvZGl2Pic7CgkJCSRodG1sIC49ICc8L2Rpdj4nOwoJCX0KCQkKCQkvLyBhZGQgYWZmaWxpYXRlIGluZm8gc2VjdGlvbgoJCSRodG1sIC49ICc8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHg7Ij4nOwoJCSRodG1sIC49ICc8c3BhbiBjbGFzcz0ibW0tc2VjdGlvbi1oZWFkZXIiIHN0eWxlPSJmb250LXNpemU6MTVweDsiPic7CgkJJGh0bWwgLj0gTU1fVXRpbHM6OmdldEljb24oJ2J1bGxob3JuJywgJ2JsdWUnLCAnMS4xZW0nLCAnMXB4Jyk7CgkJJGh0bWwgLj0gJyBDcmVkaXQgQWZmaWxpYXRlPC9zcGFuPic7CgkJJGh0bWwgLj0gJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6NXB4OyBmb250LXNpemU6MTFweDsgbWFyZ2luLWxlZnQ6MjBweDsiPjx0YWJsZSBjZWxsc3BhY2luZz0iNSI+PHRyPic7CgkJJGh0bWwgLj0gJzx0ZD4xc3QgVGllciA8c3BhbiBzdHlsZT0iZm9udC1mYW1pbHk6Y291cmllcjsiPjxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibW0tYWZmaWxpYXRlIiBzaXplPSIxNSIgLz48L3NwYW4+PC90ZD4nOwoJCSRodG1sIC49ICc8dGQ+Mm5kIFRpZXIgPHNwYW4gc3R5bGU9ImZvbnQtZmFtaWx5OmNvdXJpZXI7Ij48aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im1tLXN1YmFmZmlsaWF0ZSIgc2l6ZT0iMTUiIC8+PC9zcGFuPjwvdGQ+JzsKCQkkaHRtbCAuPSAnPC90cj48L3RhYmxlPjwvZGl2Pic7CgkJJGh0bWwgLj0gJzwvZGl2Pic7CgkJCgkJLy8gcGF5bWVudCBvcHRpb25zCgkJJGh0bWwgLj0gJzxkaXYgc3R5bGU9Im1hcmdpbi1ib3R0b206MTBweDsiPic7CgkJJGh0bWwgLj0gJzxzcGFuIGNsYXNzPSJtbS1zZWN0aW9uLWhlYWRlciIgc3R5bGU9ImZvbnQtc2l6ZToxNXB4OyI+UGF5bWVudCBPcHRpb25zPC9zcGFuPic7CgkJJGh0bWwgLj0gJzxkaXYgc3R5bGU9Im1hcmdpbi10b3A6NXB4OyBtYXJnaW4tbGVmdDoyMHB4OyI+JzsKCQkKCQlpZigkdXNlci0+aXNWYWxpZCgpICYmICR1c2VyLT5oYXNDYXJkT25GaWxlKCkpIAoJCXsgCgkJCSR1cmwgPSAiamF2YXNjcmlwdDpweW10dXRpbHNfanMuc2hvd0FkbWluUGF5bWVudENvbmZpcm1hdGlvbih7JHVzZXItPmdldElkKCl9LCB7JHBvc3RbIm1tX3Byb2R1Y3RfaWQiXX0pOyI7CgkJCQoJCQkkaHRtbCAuPSAnPHA+JzsKCQkJJGh0bWwgLj0gJzxhIGhyZWY9IicuJHVybC4nIiBjbGFzcz0ibW0tdWktYnV0dG9uIGJsdWUiPic7CgkJCSRodG1sIC49IE1NX1V0aWxzOjpnZXRJY29uKCdjcmVkaXQtY2FyZCcsICcnLCAnMS4xZW0nLCAnMXB4Jyk7CgkJCSRodG1sIC49ICcgQmlsbCBDYXJkIG9uIEZpbGUnOwoJCQkkaHRtbCAuPSAnPC9hPic7CgkJCSRodG1sIC49ICc8L3A+JzsKCQl9CgkJCgkJJGNoZWNrb3V0UGFnZVVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRDaGVja291dFBhZ2VTdGF0aWNMaW5rKCRwb3N0WyJtbV9wcm9kdWN0X2lkIl0pOwoJCSRhZG1pbkNoZWNrb3V0UGFnZVVybCA9IE1NX1V0aWxzOjphcHBlbmRVcmxQYXJhbSgkY2hlY2tvdXRQYWdlVXJsLCBNTV9TZXNzaW9uOjokUEFSQU1fVVNFUl9JRCwgJHVzZXItPmdldElkKCkpOwoJCQoJCSRjb250ZXh0ID0gbmV3IE1NX0NvbnRleHQoJHVzZXIpOwoJCSRlbWFpbENoZWNrb3V0UGFnZVVybCA9IE1NX1NtYXJ0VGFnVXRpbDo6cHJvY2Vzc0NvbnRlbnQoIltNTV9QdXJjaGFzZV9MaW5rIHByb2R1Y3RJZD0neyRwb3N0WyJtbV9wcm9kdWN0X2lkIl19JyBhdXRvTG9naW49J3RydWUnXSIsICRjb250ZXh0KTsKCQkKCQkkaHRtbCAuPSAnPHA+JzsKCQkkaHRtbCAuPSAnPGEgaHJlZj0iamF2YXNjcmlwdDpnb1RvQ2hlY2tvdXRQYWdlKFwnJy4kYWRtaW5DaGVja291dFBhZ2VVcmwuJ1wnKSIgY2xhc3M9Im1tLXVpLWJ1dHRvbiBibHVlIj4nOwoJCSRodG1sIC49IE1NX1V0aWxzOjpnZXRJY29uKCdlZGl0JywgJycsICcxLjFlbScsICcxcHgnKTsKCQkkaHRtbCAuPSAnIEVudGVyIEN1c3RvbWVyXCdzIEJpbGxpbmcgSW5mb3JtYXRpb24nOwoJCSRodG1sIC49ICc8L2E+JzsKCQkkaHRtbCAuPSAnPC9wPic7CgkJCgkJJGh0bWwgLj0gJzxwPic7CgkJJGh0bWwgLj0gTU1fVXRpbHM6OmdldEljb24oJ2xpbmsnLCAnJywgJzEuMWVtJywgJzFweCcpOwoJCSRodG1sIC49ICIgQ29weSA8YSBocmVmPSdodHRwOi8vc3VwcG9ydC5tZW1iZXJtb3VzZS5jb20vc3VwcG9ydC9zb2x1dGlvbnMvYXJ0aWNsZXMvOTAwMDAyMDU0OS1hdXRvLWxvZ2luLWxpbmtzLWFuZC1sb2dpbi10b2tlbnMnIHRhcmdldD0nX2JsYW5rJz5BdXRvLUxvZ2luPC9hPiBDaGVja291dCBMaW5rOjxici8+IjsKCQkkaHRtbCAuPSAiPGlucHV0IGlkPVwibW0tY2hlY2tvdXQtdXJsXCIgdHlwZT1cInRleHRcIiByZWFkb25seSB2YWx1ZT1cIiIuJGVtYWlsQ2hlY2tvdXRQYWdlVXJsLiJcIiBvbmNsaWNrPVwialF1ZXJ5KCcjbW0tY2hlY2tvdXQtdXJsJykuZm9jdXMoKTsgalF1ZXJ5KCcjbW0tY2hlY2tvdXQtdXJsJykuc2VsZWN0KCk7XCIgc3R5bGU9XCJ3aWR0aDo0MDBweDsgZm9udC1mYW1pbHk6Y291cmllciAhaW1wb3J0YW50OyBmb250LXNpemU6MTFweCAhaW1wb3J0YW50O1wiIC8+IjsKCQkkaHRtbCAuPSAnPC9wPic7CgkJCgkJJGh0bWwgLj0gJzxwPic7CgkJJGh0bWwgLj0gJzxhIGhyZWY9ImphdmFzY3JpcHQ6c2VuZEVtYWlsKFwnJy4kZW1haWxDaGVja291dFBhZ2VVcmwuJ1wnKSIgY2xhc3M9Im1tLXVpLWJ1dHRvbiBibHVlIj4nOwoJCSRodG1sIC49IE1NX1V0aWxzOjpnZXRJY29uKCdlbnZlbG9wZScsICcnLCAnMS4xZW0nLCAnMXB4Jyk7CgkJJGh0bWwgLj0gJ0VtYWlsIENoZWNrb3V0IExpbmsgdG8gdGhlIEN1c3RvbWVyJzsKCQkkaHRtbCAuPSAnPC9hPic7CgkJJGh0bWwgLj0gJzwvcD4nOwoJCQoJCSRodG1sIC49ICc8L2Rpdj4nOwoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGh0bWwsIE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJtbV9pZCJdKSAmJiBpc3NldCgkcG9zdFsibW1fbmV3X3N0YXR1cyJdKSkKCQl7CgkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHBvc3RbIm1tX2lkIl0pOwoJCQkkbG9nZ2VkSW5Vc2VyID0gTU1fVXRpbHM6OmdldEN1cnJlbnRVc2VyKCk7CgkJCQoJCQkvLyBmb3Igc2VjdXJpdHkgcmVhc29ucyBtYWtlIHN1cmUgdGhlIHVzZXIgdGhhdCdzIGxvZ2dlZCBpbiBpcyByZXF1ZXN0aW5nIHRoaXMKCQkJaWYoJGxvZ2dlZEluVXNlci0+aXNWYWxpZCgpICYmICR1c2VyLT5nZXRJZCgpID09ICRsb2dnZWRJblVzZXItPmdldElkKCkpCgkJCXsKCQkJCSRyZXN1bHQgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpjaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKCR1c2VyLCAkcG9zdFsibW1fbmV3X3N0YXR1cyJdKTsKCQkJCQoJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJCXsKCQkJCQkkcmVzcG9uc2UgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQkKCQkJCQkkcmVzcG9uc2UtPm1lc3NhZ2UgPSAiWW91ciBhY2NvdW50IGhhcyBiZWVuICIuTU1fU3RhdHVzOjpnZXROYW1lKCRwb3N0WyJtbV9uZXdfc3RhdHVzIl0sIHRydWUpLiIgc3VjY2Vzc2Z1bGx5IjsKCQkJCQkKCQkJCQlpZihpc3NldCgkcG9zdFsibW1fcmVkaXJlY3RfdXJsIl0pKQoJCQkJCXsKCQkJCQkJJHJlc3BvbnNlLT51cmwgPSAkcG9zdFsibW1fcmVkaXJlY3RfdXJsIl07CgkJCQkJfQoJCQkJCQoJCQkJCXJldHVybiAkcmVzcG9uc2U7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJaWYoIWVtcHR5KCRyZXN1bHQtPm1lc3NhZ2UpKQoJCQkJCXsKCQkJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCWlmKCRwb3N0WyJtbV9uZXdfc3RhdHVzIl0gPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNUeXBlID0gImNhbmNlbGxpbmciOwoJCQkJCQl9CgkJCQkJCWVsc2UgaWYoJHBvc3RbIm1tX25ld19zdGF0dXMiXSA9PSBNTV9TdGF0dXM6OiRQQVVTRUQpCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNUeXBlID0gInBhdXNpbmciOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGVyZSB3YXMgYW4gZXJyb3IgeyRzdGF0dXNUeXBlfSB5b3VyIGFjY291bnQuIFBsZWFzZSBjb250YWN0IGN1c3RvbWVyIHN1cHBvcnQgZm9yIGFzc2lzdGFuY2UuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgYXV0aG9yaXphdGlvbi4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjaGFuZ2luZyBtZW1iZXJzaGlwIHN0YXR1cy4gTWVtYmVyIElEIGFuZCBuZXcgc3RhdHVzIGFyZSByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjaGFuZ2VCdW5kbGVTdGF0dXMoJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbIm1tX2lkIl0pICYmIGlzc2V0KCRwb3N0WyJtbV9idW5kbGVfaWQiXSkgJiYgaXNzZXQoJHBvc3RbIm1tX25ld19zdGF0dXMiXSkpCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRwb3N0WyJtbV9pZCJdKTsKCQkJJGJ1bmRsZSA9IG5ldyBNTV9CdW5kbGUoJHBvc3RbIm1tX2J1bmRsZV9pZCJdKTsKCQkJJG5ld1N0YXR1cyA9IGludHZhbCgkcG9zdFsibW1fbmV3X3N0YXR1cyJdKTsKCQkJJGxvZ2dlZEluVXNlciA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VXNlcigpOwoJCQkKCQkJLy8gZm9yIHNlY3VyaXR5IHJlYXNvbnMgbWFrZSBzdXJlIHRoZSB1c2VyIHRoYXQncyBsb2dnZWQgaW4gaXMgcmVxdWVzdGluZyB0aGlzCgkJCWlmKCRsb2dnZWRJblVzZXItPmlzVmFsaWQoKSAmJiAkdXNlci0+Z2V0SWQoKSA9PSAkbG9nZ2VkSW5Vc2VyLT5nZXRJZCgpKQoJCQl7CgkJCQlpZigkbmV3U3RhdHVzID09IE1NX1N0YXR1czo6JENBTkNFTEVEIHx8ICRuZXdTdGF0dXMgPT0gTU1fU3RhdHVzOjokUEFVU0VEKQoJCQkJewoJCQkJCSRyZXN1bHQgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpyZW1vdmVCdW5kbGVGcm9tVXNlcigkdXNlciwgJGJ1bmRsZSwgJG5ld1N0YXR1cyk7CgkJCQkJCgkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJCQl7CgkJCQkJCSRyZXNwb25zZSA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCQkJCgkJCQkJCSRyZXNwb25zZS0+bWVzc2FnZSA9ICIneyRidW5kbGUtPmdldE5hbWUoKX0nIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSAiLk1NX1N0YXR1czo6Z2V0TmFtZSgkbmV3U3RhdHVzLCB0cnVlKTsKCQkJCQkJCQoJCQkJCQlpZihpc3NldCgkcG9zdFsibW1fcmVkaXJlY3RfdXJsIl0pKQoJCQkJCQl7CgkJCQkJCQkkcmVzcG9uc2UtPnVybCA9ICRwb3N0WyJtbV9yZWRpcmVjdF91cmwiXTsKCQkJCQkJfQoJCQkJCQkJCgkJCQkJCXJldHVybiAkcmVzcG9uc2U7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCWlmKCRwb3N0WyJtbV9uZXdfc3RhdHVzIl0gPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNUeXBlID0gImNhbmNlbGxpbmciOwoJCQkJCQl9CgkJCQkJCWVsc2UgaWYoJHBvc3RbIm1tX25ld19zdGF0dXMiXSA9PSBNTV9TdGF0dXM6OiRQQVVTRUQpCgkJCQkJCXsKCQkJCQkJCSRzdGF0dXNUeXBlID0gInBhdXNpbmciOwoJCQkJCQl9CgkJCQkJCQkKCQkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVGhlcmUgd2FzIGFuIGVycm9yIHskc3RhdHVzVHlwZX0gYnVuZGxlICd7JHBvc3RbIm1tX2J1bmRsZV9pZCJdfScuIFBsZWFzZSBjb250YWN0IGN1c3RvbWVyIHN1cHBvcnQgZm9yIGFzc2lzdGFuY2UuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgYXV0aG9yaXphdGlvbi4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjaGFuZ2luZyBidW5kbGUgc3RhdHVzLiBNZW1iZXIgSUQsIGJ1bmRsZSBJRCBhbmQgbmV3IGJ1bmRsZSBzdGF0dXMgYXJlIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGFwcGx5RnJlZUJ1bmRsZSgkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsibW1faWQiXSkgJiYgaXNzZXQoJHBvc3RbIm1tX2J1bmRsZV9pZCJdKSkKCQl7CgkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHBvc3RbIm1tX2lkIl0pOwoJCQkkYnVuZGxlID0gbmV3IE1NX0J1bmRsZSgkcG9zdFsibW1fYnVuZGxlX2lkIl0pOwoJCQkkbG9nZ2VkSW5Vc2VyID0gTU1fVXRpbHM6OmdldEN1cnJlbnRVc2VyKCk7CgkJCQoJCQkvLyBmb3Igc2VjdXJpdHkgcmVhc29ucyBtYWtlIHN1cmUgdGhlIHVzZXIgdGhhdCdzIGxvZ2dlZCBpbiBpcyByZXF1ZXN0aW5nIHRoaXMKCQkJaWYoJGxvZ2dlZEluVXNlci0+aXNWYWxpZCgpICYmICR1c2VyLT5nZXRJZCgpID09ICRsb2dnZWRJblVzZXItPmdldElkKCkpCgkJCXsKCQkJCS8vIHZlcmlmeSB0aGF0IGJ1bmRsZSBpcyB2YWxpZAoJCQkJaWYoJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCWlmKCRidW5kbGUtPmlzRnJlZSgpKQoJCQkJCXsKCQkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbkJ1bmRsZVRvVXNlcigkdXNlciwgJGJ1bmRsZSk7CgkJCQkJCQoJCQkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCQkJCQl7CgkJCQkJCQkkcmVzcG9uc2UgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQkJCQkKCQkJCQkJCSRyZXNwb25zZS0+bWVzc2FnZSA9ICIneyRidW5kbGUtPmdldE5hbWUoKX0nIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBhcHBsaWVkIHRvIHlvdXIgYWNjb3VudCI7CgkJCQkJCQkJCgkJCQkJCQlpZihpc3NldCgkcG9zdFsibW1fcmVkaXJlY3RfdXJsIl0pKQoJCQkJCQkJewoJCQkJCQkJCSRyZXNwb25zZS0+dXJsID0gJHBvc3RbIm1tX3JlZGlyZWN0X3VybCJdOwoJCQkJCQkJfQoJCQkJCQkJCQoJCQkJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoZXJlIHdhcyBhbiBlcnJvciBhcHBseWluZyB0aGUgJ3skYnVuZGxlLT5nZXROYW1lKCl9JyBidW5kbGUgdG8geW91ciBhY2NvdW50LiBQbGVhc2UgY29udGFjdCBjdXN0b21lciBzdXBwb3J0IGZvciBhc3Npc3RhbmNlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGFwcGx5aW5nIGZyZWUgYnVuZGxlLiBCdW5kbGUgJ3skYnVuZGxlLT5nZXROYW1lKCl9JyBpcyBub3QgZnJlZS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgYXBwbHlpbmcgZnJlZSBidW5kbGUuIEJ1bmRsZSBJRCB7JHBvc3RbIm1tX2J1bmRsZV9pZCJdfSBpcyBub3QgdmFsaWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBhdXRob3JpemF0aW9uLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGFwcGx5aW5nIGZyZWUgYnVuZGxlLiBNZW1iZXIgSUQgYW5kIGJ1bmRsZSBJRCBhcmUgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfSAKCQoJCgkvKioKCSAqIEdpdmVuIGFuIG9yZGVyIHRoYXQgcHJldmlvdXNseSB3YXMgcGxhY2VkIHN1Y2Nlc3NmdWxseSwgcmV0dXJucyBhbiBhcHByb3ByaWF0ZSByZXNwb25zZQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJGR1cE9yZGVyIFRoZSBwcmV2aW91c2x5IHN1Y2Nlc3NmdWwgb3JkZXIKCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBvZiB0eXBlIFN1Y2Nlc3Mgd2l0aCB0aGUgdXJsIHBhcmFtZXRlciBzZXQgdG8gdGhlIGFwcHJvcHJpYXRlIGNvbmZpcm1hdGlvbiB1cmwKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHJlc3RvcmVQcmV2aW91c1Jlc3BvbnNlKE1NX09yZGVyICRkdXBPcmRlciwkdXNlcklkLCRtdXRleElkKQoJewoJCSRyZXN1bHQgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkKCQkkc291cmNlID0gaXNzZXQoJHBvc3RbIm1tX3NvdXJjZSJdKT8kcG9zdFsibW1fc291cmNlIl06InVzZXIiOwoJCQoJCS8vIGdldCB0aGUgY29uZmlybWF0aW9uIHVybAoJCSRjb25maXJtYXRpb25VcmwgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpnZXRDb25maXJtYXRpb25VcmxGb3JPcmRlcigkZHVwT3JkZXIpOwoJCQoJCWlmKCRzb3VyY2UgPT0gImFkbWluIikKCQl7CgkJCSRtc2cgPSB1cmxlbmNvZGUoIk9yZGVyIHBsYWNlZCBzdWNjZXNzZnVsbHkiKTsKCQkJJGNvbmZpcm1hdGlvblVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoTU1fTU9EVUxFX01BTkFHRV9NRU1CRVJTLCBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfQUNDRVNTX1JJR0hUUyk7CgkJCSRjb25maXJtYXRpb25VcmwgLj0gIiZ1c2VyX2lkPXskdXNlcklkfSZtZXNzYWdlPXskbXNnfSZkdXA9eyRtdXRleElkfSI7CgkJCSRyZXN1bHQtPnVybCA9ICRjb25maXJtYXRpb25Vcmw7CgkJfQoJCWVsc2UgCgkJewoJCQkkcmVzdWx0LT51cmwgPSAkY29uZmlybWF0aW9uVXJsOwoJCX0KCQlyZXR1cm4gJHJlc3VsdDsKCX0KCQoJCgkvKioKCSAqIENyZWF0ZSBhbiBvcmRlciBmcm9tIFBPU1QgdmFyaWFibGVzLCBhbmQgY2hhcmdlIGl0IGlmIHRoZSBjdXN0b21lciBoYXMgYSBjYXJkIG9uIGZpbGUKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwb3N0IEFycmF5IHJlcHJlc2VudGluZyB0aGUgY29sbGVjdGVkIFBPU1QgdmFyaWFibGVzCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzLCBmYWlsdXJlLCBvciBlcnJvciBjcmVhdGluZyBhbmQgY2hhcmdpbmcgdGhlIG9yZGVyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwbGFjZU9yZGVyQ2FyZE9uRmlsZSgkcG9zdCkKCXsKCQlnbG9iYWwgJGN1cnJlbnRfdXNlcjsKCQkKCQkkaXNDdXN0b21lclN1cHBvcnRPcmRlciA9IGZhbHNlOwoJCWlmKGlzc2V0KCRwb3N0WyJtbV9zb3VyY2UiXSkgJiYgJHBvc3RbIm1tX3NvdXJjZSJdID09ICJhZG1pbiIpCgkJewoJCQkkZW1wbG95ZWUgPSBNTV9FbXBsb3llZTo6ZmluZEJ5VXNlcklkKCRjdXJyZW50X3VzZXItPklEKTsKCQkJaWYoaXNfdXNlcl9sb2dnZWRfaW4oKSAmJiAkZW1wbG95ZWUtPmNhblBsYWNlU3VwcG9ydE9yZGVyKCkgJiYgaXNzZXQoJHBvc3RbJ21tX3VzZXJfaWQnXSkgJiYgaXNfbnVtZXJpYygkcG9zdFsnbW1fdXNlcl9pZCddKSkKCQkJewoJCQkJJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIgPSB0cnVlOwoJCQkJJGN1c3RvbWVyID0gbmV3IE1NX1VzZXIoJHBvc3RbJ21tX3VzZXJfaWQnXSk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkZXJyb3JNZXNzYWdlID0gX21tdCgiWW91IGRvbid0IGhhdmUgcGVybWlzc2lvbiB0byBwbGFjZSBhbiBvcmRlciBmb3IgYW5vdGhlciB1c2VyIik7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGVycm9yTWVzc2FnZSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkkY3VzdG9tZXIgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFVzZXIoKTsKCQkJaWYgKCRjdXN0b21lciA9PSBudWxsKQoJCQl7CgkJCQkvL3Nob3VsZCBuZXZlciBoYXBwZW4gc2luY2UgbG9nZ2VkaW51c2VydmlldyBndWFyYW50ZWVzIHVzIGEgbG9nZ2VkLWluIHVzZXIgYXQgYSBsb3dlciBsZXZlbAoJCQkJJGVycm9yTWVzc2FnZSA9IF9tbXQoIlRoZXJlIHdhcyBhbiBlcnJvciBwbGFjaW5nIHlvdXIgb3JkZXI7IFBsZWFzZSB0cnkgYWdhaW4iKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JNZXNzYWdlLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJJG11dGV4SWQgPSAiIjsKCQkkaXNEdXBsaWNhdGUgPSBmYWxzZTsKCQkkc2hvdWxkVXNlTG9ja2luZyA9IGZhbHNlOwoJCQoJCWlmKCFlbXB0eSgkcG9zdFsibW1fc3VibWlzc2lvbl9tdXRleCJdKSkKCQl7CgkJCSRtdXRleElkID0gJHBvc3RbIm1tX3N1Ym1pc3Npb25fbXV0ZXgiXTsKCQkJJHNob3VsZFVzZUxvY2tpbmcgPSB0cnVlOwoJCX0KCQkKCQlpZiAoJHNob3VsZFVzZUxvY2tpbmcpCgkJewoJCQkkbG9ja0FjcXVpcmVkID0gTU1fVXRpbHM6OmFjcXVpcmVEQkxvY2soJG11dGV4SWQpOwoJCQlpZiAoISRsb2NrQWNxdWlyZWQpCgkJCXsKCQkJCS8vbG9nIHRoYXQgdGhlIGxvY2sgY291bGRuJ3QgYmUgYWNxdWlyZWQKCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJBdHRlbXB0ZWQgdG8gbG9jayBvcmRlciBwcm9jZXNzaW5nIGR1cmluZyBjaGVja291dCwgYnV0IHRoZSBsb2NrIHdhcyBub3QgYWJsZSB0byBiZSBhY3F1aXJlZCIpOwoJCQl9CgkJCQoJCQlpZiAoTU1fT3JkZXI6Omhhc0Zvcm1TdWJtaXNzaW9uSWQoJG11dGV4SWQsICRjdXN0b21lci0+Z2V0SWQoKSkpCgkJCXsKCQkJCSRpc0R1cGxpY2F0ZSA9IHRydWU7CgkJCX0KCQkJCgkJCWlmICghJGlzRHVwbGljYXRlKQoJCQl7CgkJCQkkcmVzdWx0ID0gJHRoaXMtPl9wbGFjZU9yZGVyQ2FyZE9uRmlsZSgkcG9zdCwkY3VzdG9tZXIsJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCS8vYW4gb3JkZXIgd2l0aCB0aGlzIHN1Ym1pc3Npb24gaWQgaGFzIGJlZW4gZGV0ZWN0ZWQgaW4gdGhlIGRhdGFiYXNlLCBsb29rIHVwIHRoZSBzdGF0dXMgYW5kIHJldHVybiBhcHByb3ByaWF0ZSByZXN1bHQKCQkJCSRwcmV2aW91c09yZGVyID0gTU1fT3JkZXI6OmdldE9yZGVyQnlVc2VyQW5kRm9ybVN1Ym1pc3Npb25JZCgkbXV0ZXhJZCwgJGN1c3RvbWVyLT5nZXRJZCgpKTsKCQkJCWlmICgkcHJldmlvdXNPcmRlci0+Z2V0T3JkZXJTdGF0dXMoKSA9PSBNTV9PcmRlcjo6JFBBSURfQ09NUExFVEUpCgkJCQl7CgkJCQkJJHJlc3VsdCA9ICR0aGlzLT5yZXN0b3JlUHJldmlvdXNSZXNwb25zZSgkcHJldmlvdXNPcmRlciwkY3VzdG9tZXItPmdldElkKCksJG11dGV4SWQpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCS8vdGhpcyByZXF1ZXN0IHdhcyBhbHJlYWR5IHByb2Nlc3NlZCBidXQgd2FzIG5vdCBzdWNjZXNzZnVsLCBhdHRlbXB0IHRvIHNlbmQgaXQgYWdhaW4KCQkJCQkkcmVzdWx0ID0gJHRoaXMtPl9wbGFjZU9yZGVyQ2FyZE9uRmlsZSgkcG9zdCwkY3VzdG9tZXIsJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIpOwoJCQkJfQoJCQl9CgkJCQoJCQlpZiAoJGxvY2tBY3F1aXJlZCkKCQkJewoJCQkJTU1fVXRpbHM6OnJlbGVhc2VEQkxvY2soJG11dGV4SWQpOwoJCQl9CgkJCQoJCQlpZiAoISgkcmVzdWx0IGluc3RhbmNlb2YgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSkpCgkJCXsKCQkJCSRyZXN1bHQgPSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjp0cmFuc2xhdGUoJHJlc3VsdCk7CgkJCX0KCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCWVsc2UgCgkJewoJCQkkcmVzdWx0ID0gJHRoaXMtPl9wbGFjZU9yZGVyQ2FyZE9uRmlsZSgkcG9zdCwkY3VzdG9tZXIsJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIpOwoJCQlpZiAoISgkcmVzdWx0IGluc3RhbmNlb2YgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSkpCgkJCXsKCQkJCSRyZXN1bHQgPSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjp0cmFuc2xhdGUoJHJlc3VsdCk7CgkJCX0KCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJfQoJCgkKCS8qKgoJICogVGhpcyBtZXRob2QgY29udGFpbnMgdGhlIGJ1c2luZXNzIGxvZ2ljIG9mIHBsYWNpbmcgYSBjYXJkLW9uLWZpbGUgb3JkZXIKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwb3N0CgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgY29udGFpbmluZyBzdWNjZXNzLCBmYWlsdXJlLCBvciBlcnJvcgoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gX3BsYWNlT3JkZXJDYXJkT25GaWxlKCRwb3N0LE1NX1VzZXIgJGN1c3RvbWVyLCAkaXNDdXN0b21lclN1cHBvcnRPcmRlcj1mYWxzZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHVzZXJIYXNDYXJkT25GaWxlID0gZmFsc2U7CgkJJHN0b3JlZENhcmRQYXltZW50U2VydmljZSA9IG51bGw7CgkJJHByb2R1Y3RJZCA9IDA7CgkJJGlzR2lmdCA9IGZhbHNlOwoJCSRzb3VyY2UgPSAiIjsKCQkKCQlpZighaXNzZXQoJHBvc3RbIm1tX3NvdXJjZSJdKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBzb3VyY2UiLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkc291cmNlID0gJHBvc3RbIm1tX3NvdXJjZSJdOwoJCQoJCWlmKCEkY3VzdG9tZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBjdXN0b21lciIsIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmIChpc3NldCgkcG9zdFsnbW1fcHJvZHVjdF9pZCddKSkKCQl7CgkJCSRwcm9kdWN0SWQgPSAkcG9zdFsnbW1fcHJvZHVjdF9pZCddOwoJCX0KCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRwcm9kdWN0SWQpOwoJCWlmICghJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBwcm9kdWN0IiwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYoaXNzZXQoJHBvc3RbJ21tX2lzX2dpZnQnXSkpCgkJewoJCQkkaXNHaWZ0ID0gKCRwb3N0WydtbV9pc19naWZ0J10gPT0gInRydWUiKSA/IHRydWUgOiBmYWxzZTsKCQl9CgkJCgkJaWYoISRpc0dpZnQpCgkJewoJCQkkY2hlY2tOb0Jsb2NraW5nT3JkZXJSZXNwb25zZSA9IE1NX1VzZXI6OmNhblBsYWNlT3JkZXIgKCAkY3VzdG9tZXItPmdldElkKCksICRwcm9kdWN0SWQsIGZhbHNlLCAgJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIsIHRydWUgKTsKCQkJaWYgKCEgTU1fUmVzcG9uc2U6OmlzU3VjY2VzcyAoICRjaGVja05vQmxvY2tpbmdPcmRlclJlc3BvbnNlICkpCgkJCXsKCQkJCXJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjp0cmFuc2xhdGUgKCAkY2hlY2tOb0Jsb2NraW5nT3JkZXJSZXNwb25zZSApOwoJCQl9CgkJfQoJCQoJCSRmaW5kQ2FyZE9uRmlsZVNlcnZpY2VTUUwgPSAiU0VMRUNUIHBheW1lbnRfc2VydmljZV9pZCBGUk9NICIuTU1fVEFCTEVfQ0FSRF9PTl9GSUxFLiIgd2hlcmUgdXNlcl9pZD0lcyI7CgkJJHN0b3JlZENhcmRQYXltZW50U2VydmljZUlkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJGZpbmRDYXJkT25GaWxlU2VydmljZVNRTCwkY3VzdG9tZXItPmdldElkKCkpKTsKCQlpZiAoIWlzX251bGwoJHN0b3JlZENhcmRQYXltZW50U2VydmljZUlkKSkKCQl7CgkJCSRzdG9yZWRDYXJkUGF5bWVudFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldFBheW1lbnRTZXJ2aWNlQnlJZCgkc3RvcmVkQ2FyZFBheW1lbnRTZXJ2aWNlSWQpOwoJCQlpZiAoIWlzX251bGwoJHN0b3JlZENhcmRQYXltZW50U2VydmljZSkgJiYgJHN0b3JlZENhcmRQYXltZW50U2VydmljZS0+aXNBY3RpdmUoKSkKCQkJewoJCQkJLy93ZSBuZWVkIHRvIGRldGVybWluZSBpZiB0aGUgcGF5bWVudCBzZXJ2aWNlIHRoZSB1c2VyIGhhcyBhIGNhcmQgb24gZmlsZSB3aXRoIGlzIGFjdGl2ZQoJCQkJJHVzZXJIYXNDYXJkT25GaWxlID0gdHJ1ZTsKCQkJfQoJCX0KCQkKCQlpZiAoISR1c2VySGFzQ2FyZE9uRmlsZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiTm8gY2FyZCBvbiBmaWxlIGZvdW5kIiwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy8gaWYgZXhlY3V0aW9uIHJlYWNocyB0aGlzIHBvaW50LCB0aGUgY3VzdG9tZXIgaXMgdmFsaWQgYXMgd2VsbCBhcyBhdCBsZWFzdCBvbmUgcHJvZHVjdCwgYW5kIHRoZSBjdXN0b21lcgoJCS8vIGhhcyBhIGNhcmQgb24gZmlsZSB3aXRoIGFuIGFjdGl2ZSBwYXltZW50IHNlcnZpY2UKCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoKTsKCQkKCQkvLyBzYXZlIG11dGV4IGlkIHRvIGFpZCBpbiBwcmV2ZW50aW9uIG9mIGR1cGxpY2F0ZSBmb3JtIHN1Ym1pc3Npb25zCgkJaWYgKCFlbXB0eSgkcG9zdFsibW1fc3VibWlzc2lvbl9tdXRleCJdKSkKCQl7CgkJCSRvcmRlci0+c2V0Rm9ybVN1Ym1pc3Npb25JZCgkcG9zdFsibW1fc3VibWlzc2lvbl9tdXRleCJdKTsKCQl9CgkJCgkJLy8gc2V0IHRoZSBjdXN0b21lcgoJCSRvcmRlci0+c2V0Q3VzdG9tZXIoJGN1c3RvbWVyKTsKCQkKCQkvL2FkZCB0aGUgcHJvZHVjdAoJCSRwcm9kdWN0X3F1YW50aXR5ID0gMTsgLy9zaG91bGQgYmUgdGhlIGFjdHVhbCBxdWFudGl0eSBpZiB0aGF0IGlzIGJlaW5nIGNvbGxlY3RlZAoJCSRvcmRlci0+YWRkUHJvZHVjdCgkcHJvZHVjdCwgJHByb2R1Y3RfcXVhbnRpdHksICRpc0dpZnQpOwoJCQoJCSRvcmRlci0+c2V0QmlsbGluZ0FkZHJlc3MoJG9yZGVyLT5nZXRDdXN0b21lcigpLT5nZXRDYXJkT25GaWxlQmlsbGluZ0FkZHJlc3MoKSk7CgkJCgkJLy8gZ2V0IHNoaXBwaW5nIGFkZHJlc3MKCQlpZigkcHJvZHVjdC0+aXNTaGlwcGFibGUoKSkKCQl7CgkJCSRvcmRlci0+c2V0U2hpcHBhYmxlKHRydWUpOwoJCQkkc2hpcHBpbmdBZGRyZXNzID0gJGN1c3RvbWVyLT5nZXRGdWxsU2hpcHBpbmdBZGRyZXNzKCk7CgkJCgkJCWlmKGlzc2V0KCRwb3N0WydtbV9maWVsZF9zaGlwcGluZ19tZXRob2QnXSkpCgkJCXsKCQkJCSRvcmRlci0+c2V0U2hpcHBpbmdNZXRob2RGcm9tS2V5KCRwb3N0WydtbV9maWVsZF9zaGlwcGluZ19tZXRob2QnXSk7CgkJCX0KCQkKCQkJaWYoIWVtcHR5KCRwb3N0WyJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIl0pKQoJCQl7CgkJCQkkb3JkZXItPnNldFNoaXBwaW5nU2FtZUFzQmlsbGluZyhmYWxzZSk7CgkJCgkJCQlpZihpc3NldCgkcG9zdFsnbW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcyddKSkKCQkJCXsKCQkJCQkkc2hpcHBpbmdBZGRyZXNzLT5zZXRBZGRyZXNzTGluZTEoJHBvc3RbJ21tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MnXSk7CgkJCQl9CgkJCgkJCQlpZihpc3NldCgkcG9zdFsnbW1fZmllbGRfc2hpcHBpbmdfY2l0eSddKSkKCQkJCXsKCQkJCQkkc2hpcHBpbmdBZGRyZXNzLT5zZXRDaXR5KCRwb3N0WydtbV9maWVsZF9zaGlwcGluZ19jaXR5J10pOwoJCQkJfQoJCQoJCQkJaWYoaXNzZXQoJHBvc3RbJ21tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlJ10pKQoJCQkJewoJCQkJCSRzaGlwcGluZ0FkZHJlc3MtPnNldFN0YXRlKCRwb3N0WydtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSddKTsKCQkJCX0KCQkKCQkJCWlmKGlzc2V0KCRwb3N0WydtbV9maWVsZF9zaGlwcGluZ196aXAnXSkpCgkJCQl7CgkJCQkJJHNoaXBwaW5nQWRkcmVzcy0+c2V0UG9zdGFsQ29kZSgkcG9zdFsnbW1fZmllbGRfc2hpcHBpbmdfemlwJ10pOwoJCQkJfQoJCQoJCQkJaWYoaXNzZXQoJHBvc3RbJ21tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnknXSkpCgkJCQl7CgkJCQkJJHNoaXBwaW5nQWRkcmVzcy0+c2V0Q291bnRyeSgkcG9zdFsnbW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSddKTsKCQkJCX0KCQkJfQoJCQkJCgkJCSRvcmRlci0+c2V0U2hpcHBpbmdBZGRyZXNzKCRzaGlwcGluZ0FkZHJlc3MpOwoJCX0KCQllbHNlCgkJewoJCQkkb3JkZXItPnNldFNoaXBwaW5nU2FtZUFzQmlsbGluZyh0cnVlKTsKCQl9CgkJCgkJLy9hZGQgdGhlIGNvdXBvbiAoaWYgYW55KQoJCSRjb3Vwb25fY29kZSA9IGlzc2V0KCRwb3N0WydtbV9maWVsZF9jb3Vwb25fY29kZSddKSA/ICRwb3N0WydtbV9maWVsZF9jb3Vwb25fY29kZSddIDogIiI7CgkJaWYgKCFlbXB0eSgkY291cG9uX2NvZGUpKQoJCXsKCQkJJGNvdXBvbiA9IE1NX0NvdXBvbjo6Z2V0RGF0YUJ5Q29kZSgkY291cG9uX2NvZGUpOwoJCQlpZigkY291cG9uLT5pc1ZhbGlkKCkgJiYgTU1fQ291cG9uOjpoYXNBdmFpbGFibGVDb3Vwb24oJGNvdXBvbi0+Z2V0Q291cG9uQ29kZSgpKSAmJiAkY291cG9uLT5oYXNQcm9kdWN0KCRwcm9kdWN0LT5nZXRJZCgpKSkKCQkJewoJCQkJJG9yZGVyLT5hZGRDb3Vwb24oJGNvdXBvbik7CgkJCX0KCQl9CgkJCgkJLy9hZGQgdGhlIGNhcmQtb24tZmlsZSBwYXltZW50IHNlcnZpY2UKCQkkb3JkZXItPnNldFBheW1lbnRNZXRob2QoJHN0b3JlZENhcmRQYXltZW50U2VydmljZSk7CgkJCgkJLy8gYWRkIGFmZmlsaWF0ZSBhbmQgc3ViYWZmaWxpYXRlIGlkcyAoaWYgYXBwbGljYWJsZSkKCQkvLyBjaGVjayBpZiB0aGVyZSdzIGEgbWFudWFsIG92ZXJyaWRlIHRvIHNldCB0aGUgYWZmaWxpYXRlIElEcwoJCSRhZmZpbGlhdGVJZCA9ICIiOwoJCSRzdWJhZmZpbGlhdGVJZCA9ICIiOwoJCWlmKGlzc2V0KCRwb3N0WyJtbV9hZmZpbGlhdGUiXSkpCgkJewoJCQkkYWZmaWxpYXRlSWQgPSAkcG9zdFsibW1fYWZmaWxpYXRlIl07CgkJfQoJCWVsc2UgaWYoJHNvdXJjZSAhPSAiYWRtaW4iKQoJCXsKCQkJJGFmZmlsaWF0ZUlkID0gTU1fQ29va2llczo6Z2V0QWZmaWxpYXRlVmFsdWUoKTsKCQl9CgkJCgkJaWYoaXNzZXQoJHBvc3RbIm1tX3N1YmFmZmlsaWF0ZSJdKSkKCQl7CgkJCSRzdWJhZmZpbGlhdGVJZCA9ICRwb3N0WyJtbV9zdWJhZmZpbGlhdGUiXTsKCQl9CgkJZWxzZSBpZigkc291cmNlICE9ICJhZG1pbiIpCgkJewoJCQkkc3ViYWZmaWxpYXRlSWQgPSBNTV9Db29raWVzOjpnZXRTdWJBZmZpbGlhdGVWYWx1ZSgpOwoJCX0KCQkKCQlpZiAoIWVtcHR5KCRhZmZpbGlhdGVJZCkpCgkJewoJCQkkb3JkZXItPnNldEFmZmlsaWF0ZUlkKCRhZmZpbGlhdGVJZCk7CgkJfQoJCQoJCWlmICghZW1wdHkoJHN1YmFmZmlsaWF0ZUlkKSkKCQl7CgkJCSRvcmRlci0+c2V0U3ViQWZmaWxpYXRlSWQoJHN1YmFmZmlsaWF0ZUlkKTsKCQl9CgkJCgkJLy9jb21taXQgdGhlIG9yZGVyCgkJJG9yZGVyQ29tbWl0UmVzdWx0ID0gJG9yZGVyLT5jb21taXREYXRhKCk7CgkJCgkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2Vzcygkb3JkZXJDb21taXRSZXN1bHQpKQoJCXsKCQkJLy8gY29sbGVjdC9zYXZlIGN1c3RvbSBkYXRhCgkJCWZvcmVhY2goJHBvc3QgYXMgJGtleT0+JHZhbHVlKQoJCQl7CgkJCQlpZihwcmVnX21hdGNoKCIvKGN1c3RvbV8pLyIsICRrZXkpICYmICFwcmVnX21hdGNoKCIvKGhlbHBlcikvIiwgJGtleSkgJiYgIXByZWdfbWF0Y2goIi8obGFiZWwpLyIsICRrZXkpCgkJCQkJCSYmICFwcmVnX21hdGNoKCIvKHJlcXVpcmVkKS8iLCAka2V5KSAmJiAhcHJlZ19tYXRjaCgiLyh0eXBlKS8iLCAka2V5KSkKCQkJCXsKCQkJCQkkY3VzdG9tRmllbGRJZCA9IHByZWdfcmVwbGFjZSgiL1teMC05XSsvIiwgIiIsICRrZXkpOwoJCQkJCSRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+c2V0Q3VzdG9tRGF0YShpbnR2YWwoJGN1c3RvbUZpZWxkSWQpLCBzdHJpcHNsYXNoZXMoJHZhbHVlKSk7CgkJCQl9CgkJCX0KCQl9CgkJCgkJLy9ub3cgY2hhcmdlIGl0CgkJJG9yZGVyUmVzdWx0ID0gJHN0b3JlZENhcmRQYXltZW50U2VydmljZS0+Y2hhcmdlT3JkZXIoJG9yZGVyKTsKCQkkcmVzdWx0ID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCgkJaWYgKCRvcmRlclJlc3VsdC0+Z2V0U3RhdHVzKCkgPT0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1MpCgkJewoJCQkkYXNzaWduQWNjZXNzUmVzdWx0ID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQWNjZXNzRnJvbU9yZGVyKCRvcmRlcik7CgkJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkYXNzaWduQWNjZXNzUmVzdWx0KSkKCQkJewoJCQkJJGNvbmZpcm1hdGlvblVybCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmdldENvbmZpcm1hdGlvblVybEZvck9yZGVyKCRvcmRlcik7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkcmVzdWx0LT50eXBlID0gTU1fUmVzcG9uc2U6OiRFUlJPUjsKCQkJCQkKCQkJCSRtc2cgPSAiUGF5bWVudCBmb3Igb3JkZXIgbnVtYmVyIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9IHdhcyBzdWNjZXNzZnVsIGJ1dCB0aGVyZSB3YXMgYW4gZXJyb3IgZ3JhbnRpbmcgYWNjZXNzIHRvIHlvdXIgY29udGVudCI7CgkJCQkJCgkJCQlpZigkYXNzaWduQWNjZXNzUmVzdWx0LT5tZXNzYWdlKQoJCQkJewoJCQkJCSRtc2cgLj0gIjogIi4kYXNzaWduQWNjZXNzUmVzdWx0LT5tZXNzYWdlOwoJCQkJfQoJCQkJCQoJCQkJJHJlc3VsdC0+bWVzc2FnZSA9ICRtc2c7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJHJlc3VsdC0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokRVJST1I7CgkJCQkKCQkJJGVycm9yTXNnID0gJG9yZGVyUmVzdWx0LT5nZXRNZXNzYWdlKCk7CgkJCWlmKCFlbXB0eSgkZXJyb3JNc2cpKQoJCQl7CgkJCQkkcmVzdWx0LT5tZXNzYWdlID0gJGVycm9yTXNnOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHJlc3VsdC0+bWVzc2FnZSA9ICJVbmFibGUgdG8gY2hhcmdlIHRoZSBjYXJkIG9uIGZpbGUiOwoJCQl9CgkJfQoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJewoJCQlpZigkc291cmNlID09ICJ1c2VyIikKCQkJewoJCQkJJHJlc3VsdC0+dXJsID0gJGNvbmZpcm1hdGlvblVybDsKCQkJfQoJCQllbHNlIGlmKCRzb3VyY2UgPT0gImFkbWluIikKCQkJewoJCQkJJG1zZyA9IHVybGVuY29kZSgiT3JkZXIgcGxhY2VkIHN1Y2Nlc3NmdWxseSIpOwoJCQkJJGNvbmZpcm1hdGlvblVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoTU1fTU9EVUxFX01BTkFHRV9NRU1CRVJTLCBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfQUNDRVNTX1JJR0hUUyk7CgkJCQkkY29uZmlybWF0aW9uVXJsIC49ICImdXNlcl9pZD17JG9yZGVyLT5nZXRDdXN0b21lcigpLT5nZXRJZCgpfSZtZXNzYWdlPXskbXNnfSI7CgkJCQkkcmVzdWx0LT51cmwgPSAkY29uZmlybWF0aW9uVXJsOwoJCQl9CgkJfQoJCXJldHVybiAkcmVzdWx0OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBhZGREaWFsb2dDb250YWluZXJzKCkKCXsKCQllY2hvICI8ZGl2IGlkPVwibW0tcGF5bWVudC1vcHRpb25zLWRpYWxvZ1wiPjwvZGl2PlxuIi4KCQkJICI8ZGl2IGlkPVwibW0tcGF5bWVudC1jb25maXJtYXRpb24tZGlhbG9nXCI+PC9kaXY+XG4iLgoJCQkgIjxzY3JpcHQ+XG4iLiAKCQkJICIJalF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xuIi4KCQkJICIJCWlmKGpRdWVyeS5pc0Z1bmN0aW9uKFwiZGlhbG9nXCIpKSB7XG4iLgoJCQkgIgkJCWpRdWVyeShcIiNtbS1wYXltZW50LW9wdGlvbnMtZGlhbG9nXCIpLmRpYWxvZyh7YXV0b09wZW46IGZhbHNlfSk7XG4iLgoJCQkgIgkJCWpRdWVyeShcIiNtbS1wYXltZW50LWNvbmZpcm1hdGlvbi1kaWFsb2dcIikuZGlhbG9nKHthdXRvT3BlbjogZmFsc2V9KTtcbiIuCgkJCSAiCQl9XG4iLgoJCQkgIgl9KTtcbiIuCgkJCSAiPC9zY3JpcHQ+XG4iOwoJfQoJCgkKCS8qKgoJICogT3ZlcnJpZGUgYmFzZSBzaG93RGlhbG9nIG1ldGhvZCB0byBhbGxvdyBsaW1pdGVkIGFiaWxpdHkgdG8gY2FsbCBtZXRob2RzIGZyb20gb3RoZXIgdmlld3MKCSAqIHtAaW5oZXJpdERvY30KCSAqIEBzZWUgTU1fVmlldzo6c2hvd0RpYWxvZygpCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBzaG93RGlhbG9nKCRwb3N0KSAKCXsKCQkkaW5mbyA9ICR0aGlzLT5jcmVhdGVWYWx1ZU9iamVjdEZyb21SZXF1ZXN0KCRwb3N0KTsKCQkkYWxsb3dlZE1vZHVsZXMgPSBhcnJheShzZWxmOjokUEFZTUVOVF9PUFRJT05TX01PRFVMRSwgc2VsZjo6JFBBWU1FTlRfQ09ORklSTUFUSU9OX01PRFVMRSk7CgkJJHJlcXVlc3RlZE1vZHVsZSA9IChpc3NldCgkcG9zdFtzZWxmOjokTU1fSlNNT0RVTEVdKSk/JHBvc3Rbc2VsZjo6JE1NX0pTTU9EVUxFXToiIjsKCQlpZiAoIWVtcHR5KCRyZXF1ZXN0ZWRNb2R1bGUpICYmIGluX2FycmF5KCRyZXF1ZXN0ZWRNb2R1bGUsJGFsbG93ZWRNb2R1bGVzKSkKCQl7CgkJCXJldHVybiBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iL3skcmVxdWVzdGVkTW9kdWxlfS5kaWFsb2cucGhwIiwgJGluZm8pOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIHBhcmVudDo6c2hvd0RpYWxvZygkcG9zdCk7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(180, 'transaction', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fVHJhbnNhY3Rpb24KewoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBiZWdpbigpCgl7CgkJX21tbXEoIkJFR0lOIik7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcm9sbGJhY2soKQoJewoJCV9tbW1xKCJST0xMQkFDSyIpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNvbW1pdCgpCgl7CgkJX21tbXEoIkNPTU1JVCIpOwoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(181, 'smartwidget', 'LyoqCiAqIFNtYXJ0VGFnIFdpZGdldCBDbGFzcwogKi8KY2xhc3MgTU1fU21hcnRXaWRnZXQgZXh0ZW5kcyBXUF9XaWRnZXQgCnsKICAgIC8qKiBjb25zdHJ1Y3RvciAqLwogICAgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKSAKICAgIHsKICAgIAkkd2lkZ2V0X29wcyA9IGFycmF5KCdjbGFzc25hbWUnID0+ICdtbV9zbWFydHdpZGdldCcsICdkZXNjcmlwdGlvbicgPT4gJ1VzZSB0aGlzIHdpZGdldCB0byB1c2UgTWVtYmVyTW91c2UgU21hcnRUYWdzIGFyb3VuZCB5b3VyIHNpdGUnKTsKICAgIAkkY29udHJvbF9vcHRpb25zID0gYXJyYXkoJ2hlaWdodCc9PjUwMCwgJ3dpZHRoJyA9PjYwMCk7CiAgICAgICAgcGFyZW50OjpfX2NvbnN0cnVjdChmYWxzZSwgJG5hbWUgPSAnTU0gU21hcnRXaWRnZXQnLCAkd2lkZ2V0X29wcywgJGNvbnRyb2xfb3B0aW9ucyk7CQogICAgfQoKICAgIC8qKiBAc2VlIFdQX1dpZGdldDo6Zm9ybSAqLwogICAgZnVuY3Rpb24gZm9ybSgkaW5zdGFuY2UpIAogICAgewkKICAgIAkvLyBzZXQgZGVmYXVsdCB2YWx1ZXMKICAgIAkkY29udGVudCA9ICIiOwogICAgCQogICAgCS8vIHNldCBjdXJyZW50IHZhbHVlcwogICAgCWlmKGlzc2V0KCRpbnN0YW5jZVsnY29udGVudCddKSkKICAgIAl7CiAgICAJCSRjb250ZW50ID0gZXNjX2F0dHIoJGluc3RhbmNlWydjb250ZW50J10pOwogICAgCX0KICAgIAk/PgogICAgCTxwPgoJICAgIAk8P3BocCBlY2hvIE1NX1NtYXJ0VGFnTGlicmFyeVZpZXc6OnNtYXJ0VGFnTGlicmFyeUJ1dHRvbnMoJHRoaXMtPmdldF9maWVsZF9pZCgnY29udGVudCcpKTsgPz4KCSAgICAJPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxMnB4OyBjb2xvcjojNjY2NjY2OyBtYXJnaW4tbGVmdDoxMHB4OyI+RW50ZXIgYW55IHZhbGlkIEhUTUwsIEphdmFTY3JpcHQgYW5kIFNtYXJ0VGFncyBiZWxvdzo8L3NwYW4+CiAgICAJPC9wPgogICAgCTxwPgogICAgCQk8dGV4dGFyZWEgY2xhc3M9IndpZGVmYXQiIGNvbHM9IjIwIiByb3dzPSIxNiIgc3R5bGU9ImZvbnQtZmFtaWx5OmNvdXJpZXI7IGZvbnQtc2l6ZToxMXB4OyIgaWQ9Ijw/cGhwIGVjaG8gJHRoaXMtPmdldF9maWVsZF9pZCgnY29udGVudCcpOyA/PiIgbmFtZT0iPD9waHAgZWNobyAkdGhpcy0+Z2V0X2ZpZWxkX25hbWUoJ2NvbnRlbnQnKTsgPz4iPjw/cGhwIGVjaG8gJGNvbnRlbnQ7ID8+PC90ZXh0YXJlYT4KICAgIAk8L3A+CiAgICAJPD9waHAgCiAgICB9CgogICAgLyoqIEBzZWUgV1BfV2lkZ2V0Ojp1cGRhdGUgKi8KICAgIGZ1bmN0aW9uIHVwZGF0ZSgkbmV3X2luc3RhbmNlLCAkb2xkX2luc3RhbmNlKSAKICAgIHsJCQoJCSRpbnN0YW5jZSA9ICRvbGRfaW5zdGFuY2U7CgkJJGluc3RhbmNlWydjb250ZW50J10gPSAkbmV3X2luc3RhbmNlWydjb250ZW50J107CgkgICAgcmV0dXJuICRpbnN0YW5jZTsKICAgIH0KCiAgICAvKiogQHNlZSBXUF9XaWRnZXQ6OndpZGdldCAqLwogICAgZnVuY3Rpb24gd2lkZ2V0KCRhcmdzLCAkaW5zdGFuY2UpIAogICAgewkKICAgICAgICBleHRyYWN0KCAkYXJncyApOwoJCgkgICAgZWNobyAkYmVmb3JlX3dpZGdldDsKCSAgICAKCSAgICAkY29udGV4dCA9IG5ldyBNTV9Db250ZXh0KCk7CgkgICAgJGNvbnRlbnQgPSBNTV9TbWFydFRhZ1V0aWw6OnByb2Nlc3NDb250ZW50KCRpbnN0YW5jZVsiY29udGVudCJdLCAkY29udGV4dCk7CgkgICAgZWNobyBkb19zaG9ydGNvZGUoJGNvbnRlbnQpOwogICAgICAgIAoJCWVjaG8gJGFmdGVyX3dpZGdldDsKICAgIH0KfQ==', 0, '2018-11-21 06:38:54'),
(182, 'reportpiechartmodel', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBUaGlzIGNsYXNzIHNlcnZlcyBhcyBhIGRhdGEgbW9kZWwgZm9yIHRoZSBNTV9SZXBvcnRQaWVjaGFydCBjbGFzcywgYW5kIGFueSBmdXR1cmUgcGllY2hhcnQtbGlrZSB2aXN1YWwgZWxlbWVudHMgCiAqIFRoZSBwaWVjaGFydCBkYXRhIG1vZGVsIGlzIHZlcnkgc2ltcGxlOyBZb3UgaGF2ZSBhIGNvbGxlY3Rpb24gb2Ygc2xpY2VzIHRoYXQgZWFjaCBoYXZlIGEgbnVtZXJpYyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlbS4KICogVGhlc2Ugc2xpY2VzIGFyZSB0aGVuIHBhc3NlZCB0byB0aGUgcGllY2hhcnQgdmlzdWFsIGVsZW1lbnQgd2hpY2ggdGhlbiByZW5kZXJzIHRob3NlIHNsaWNlcyBhY2NvcmRpbmcgdG8gd2hhdCBwZXJjZW50YWdlIHRoZSBzbGljZSB2YWx1ZSBpcyAKICogb2YgdGhlIHdob2xlLiBTbyBpZiB5b3UgaGF2ZSA0IHNsaWNlcywgZWFjaCB3aXRoIGEgbnVtZXJpYyB2YWx1ZSBvZiA1MCwgZWFjaCBzbGljZSB3aWxsIGJlIHJlbmRlcmVkIGFzIDI1JSBvZiB0aGUgcGllLiAKICovCmNsYXNzIE1NX1JlcG9ydFBpZWNoYXJ0TW9kZWwKewoJCglwcm90ZWN0ZWQgJHNsaWNlcyA9IGFycmF5KCk7CgkKCS8qKgoJICogQ3JlYXRlcyB0aGUgbW9kZWwgZnJvbSBhIHdwZGIgcmVzdWx0c2V0LCB3aGljaCBpcyBlaXRoZXIgYW4gYXJyYXkgb2Ygb2JqZWN0cyBvciBhbiBhcnJheSBvciBhcnJheXMuIFRoZSBtZXRob2QgaW50ZXJuYWxseSBkZXRlY3RzCgkgKiB3aGF0IGZvcm1hdCB0aGUgcmVzdWx0c2V0IGlzIGluIGFuZCBjcmVhdGVzIHRoZSBtb2RlbAoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlc3VsdFNldAoJICogQHBhcmFtIFN0cmluZyAkdGl0bGVOYW1lIFRoZSBuYW1lIG9mIHRoZSBjb2x1bW4gaW4gdGhlIHJlc3VsdHNldCB0byB1c2UgYXMgdGhlIHRpdGxlIGZvciBlYWNoIHNsaWNlCgkgKiBAcGFyYW0gU3RyaW5nICR2YWx1ZU5hbWUgVGhlIG5hbWUgb2YgdGhlIGNvbHVtbiBpbiB0aGUgcmVzdWx0c2V0IHRvIHVzZSBhcyB0aGUgdmFsdWUgZm9yIGVhY2ggc2xpY2UKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIG9yIGZhbHNlIGlmIHRoZSBtb2RlbCB3YXMgY3JlYXRlZCBwcm9wZXJseS4gSXQgSVMgcG9zc2libGUgZm9yIHRoZSBtb2RlbCB0byBiZSBwYXJ0aWFsbHkgY3JlYXRlZCBhbmQgZXJyb3Igb3V0IGluIHRoZSBtaWRkbGUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFNsaWNlc0Zyb21SZXN1bHRzZXQoJHJlc3VsdFNldCwkdGl0bGVOYW1lLCR2YWx1ZU5hbWUpCgl7CgkJaWYgKCFpc19hcnJheSgkcmVzdWx0U2V0KSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJZm9yZWFjaCAoJHJlc3VsdFNldCBhcyAkc2xpY2VWYWx1ZXMpCgkJewoJCQlpZiAoaXNfb2JqZWN0KCRzbGljZVZhbHVlcykgJiYgaXNzZXQoJHNsaWNlVmFsdWVzLT4kdGl0bGVOYW1lKSAmJiBpc3NldCgkc2xpY2VWYWx1ZXMtPiR2YWx1ZU5hbWUpKQoJCQl7CgkJCQkkdGhpcy0+YWRkU2xpY2UoJHNsaWNlVmFsdWVzLT4kdGl0bGVOYW1lLCAkc2xpY2VWYWx1ZXMtPiR2YWx1ZU5hbWUpOwoJCQl9CgkJCWVsc2UgaWYgKGlzX2FycmF5KCRzbGljZVZhbHVlcykgJiYgIWVtcHR5KCRzbGljZVZhbHVlc1skdGl0bGVOYW1lXSkgJiYgIWVtcHR5KCRzbGljZVZhbHVlc1skdmFsdWVOYW1lXSkpCgkJCXsKCQkJCSR0aGlzLT5hZGRTbGljZSgkc2xpY2VWYWx1ZXNbJHRpdGxlTmFtZV0sICRzbGljZVZhbHVlc1skdmFsdWVOYW1lXSk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIGZhbHNlOyAvL25vdCBhIHByb3BlciByZXN1bHRzZXQKCQkJfQoJCX0KCQlyZXR1cm4gdHJ1ZTsKCX0KCQoJCgkvKioKCSAqIEFkZCB0aGUgZGF0YSBmb3IgYSBzbGljZSBvZiB0aGUgcGllY2hhcnQgdG8gdGhlIG1vZGVsCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHRpdGxlIFRoZSB0aXRsZSBvZiB0aGUgc2xpY2UKCSAqIEBwYXJhbSBTdHJpbmcgJG51bWVyaWNWYWx1ZSBUaGUgbnVtZXJpYyB2YWx1ZSBvZiB0aGUgc2xpY2UgdG8gdXNlIGluIGRldGVybWluaW5nIHRoZSBzbGljZSBwcm9wb3J0aW9ucwoJICovCglwdWJsaWMgZnVuY3Rpb24gYWRkU2xpY2UoJHRpdGxlLCAkbnVtZXJpY1ZhbHVlKQoJewoJCSRzbGljZU9iaiA9IG5ldyBzdGRDbGFzcygpOwoJCSRzbGljZU9iai0+dGl0bGUgPSAkdGl0bGU7CgkJJHNsaWNlT2JqLT52YWx1ZSA9ICRudW1lcmljVmFsdWU7CgkJJHRoaXMtPnNsaWNlc1tdID0gJHNsaWNlT2JqOwkKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgYWxsIHRoZSBzbGljZSBpbiB0aGUgbW9kZWwgYXMgYW4gYXJyYXkgb2Ygb2JqZWN0cy4gRWFjaCBvYmplY3QgaGFzIGEgJ3RpdGxlJyBhbmQgYSAndmFsdWUnIHByb3BlcnR5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRTbGljZXMoKQoJewoJCXJldHVybiAkdGhpcy0+c2xpY2VzOwoJfQp9Cg==', 0, '2018-11-21 06:38:54'),
(183, 'emailserviceproviderdialog', 'Y2xhc3MgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJEaWFsb2cgewoJCglwdWJsaWMgJGRpYWxvZyA9ICIiOwoJcHVibGljICRjb250cm9scyA9ICIiOwoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJJHRoaXMtPmNvbnRyb2xzID0gPDw8Q29udHJvbHMKCQkJPGJ1dHRvbiBpZD0iZW1haWwtc2VydmljZS1wcm92aWRlci1jb25maWd1cmUiIGNsYXNzPSJtbS11aS1idXR0b24gYmx1ZSIgb25DbGljaz0ibW1qcy5zaG93TGlzdE1hcHBpbmdEaWFsb2coalF1ZXJ5KCcjcHJvdmlkZXItY29uZmlnLWZvcm0gOmlucHV0Jykuc2VyaWFsaXplQXJyYXkoKSk7IHJldHVybiBmYWxzZTsiIHN0eWxlPSJjdXJzb3I6cG9pbnRlcjsiPkNvbmZpZ3VyZTwvYnV0dG9uPgoJCQk8YnV0dG9uIGlkPSJyZXNldCIgY2xhc3M9Im1tLXVpLWJ1dHRvbiIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25DbGljaz0ibW1qcy5wcm92aWRlck9wdGlvbnNSZXNldCgpOyByZXR1cm4gZmFsc2U7IiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Ij5SZXNldDwvYnV0dG9uPgpDb250cm9sczsKCX0KCQkKfQoK', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(184, 'newmembersreport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fTmV3TWVtYmVyc1JlcG9ydCBleHRlbmRzIE1NX1JlcG9ydEJhc2UgCnsKCQoJcHVibGljIHN0YXRpYyAkTkVXX01FTUJFUlNfREFUQUdSSUQgPSAibmV3X21lbWJlcnNfZGF0YWdyaWQiOwoJcHVibGljIHN0YXRpYyAkTkVXX01FTUJFUlNfUElFQ0hBUlQgPSAibmV3X21lbWJlcnNfcGllY2hhcnQiOwoJCglwcm90ZWN0ZWQgJHZpc3VhbEVsZW1lbnRzID0gYXJyYXkoIk1NX1JlcG9ydERhdGFHcmlkIiwiTU1fUmVwb3J0UGllQ2hhcnQiKTsKCQoJLy9xdWVyeSBpZGVudGlmaWVycwoJcHVibGljIHN0YXRpYyAkTkVXX01FTUJFUlNfQllfREFURV9RVUVSWSA9ICJuZXctbWVtYmVycy1ieS1kYXRlIjsKCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyVmlzdWFsRWxlbWVudCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkgCgl7CgkJc3dpdGNoICgkZWxlbWVudElkZW50aWZpZXIpCgkJewoJCQljYXNlIHNlbGY6OiRORVdfTUVNQkVSU19QSUVDSEFSVDoKCQkJCXJldHVybiAkdGhpcy0+cmVuZGVyTmV3TWVtYmVyc1BpZWNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcyk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokTkVXX01FTUJFUlNfREFUQUdSSUQ6CgkJCQlyZXR1cm4gJHRoaXMtPnJlbmRlck5ld01lbWJlcnNEYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJVbmFibGUgdG8gcmVuZGVyIHZpc3VhbCBlbGVtZW50OiBpZGVudGlmaWVyICIuKCghaXNfYXJyYXkoJGVsZW1lbnRJZGVudGlmaWVyKSAmJiAhaXNfb2JqZWN0KCRlbGVtZW50SWRlbnRpZmllcikpPyJ7JGVsZW1lbnRJZGVudGlmaWVyfSAiOiIiKS4idW5rbm93biIsTU1fUmVwb3J0UmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRlbGVtZW50SWRlbnRpZmllcgoJICogQHBhcmFtIHN0cmluZyAkd2lkdGgKCSAqIEBwYXJhbSBzdHJpbmcgJGhlaWdodAoJICogQHBhcmFtIHN0cmluZyAkcGFyYW1zCgkgKiBAcmV0dXJuIE1NX1JlcG9ydFJlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIGRhdGFncmlkIGlmIGl0IGlzIHJlbmRlcmFibGUsIG5vdC1yZWFkeSBzdGF0dXMgaWYgdGhlIGRhdGEgaXMgYXZhaWxhYmxlLCBvciBlcnJvciBpZiB0aGVyZSB3YXMgYW4gZXJyb3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlbmRlck5ld01lbWJlcnNEYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JE5FV19NRU1CRVJTX0JZX0RBVEVfUVVFUlksICRwYXJhbXMpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQkkcm93SW5kZXggPSAiRGF0ZSI7CgkJCgkJaWYgKGlzc2V0KCRwYXJhbXNbJ3R5cGUnXSkpCgkJewoJCQlzd2l0Y2ggKCRwYXJhbXNbJ3R5cGUnXSkKCQkJewoJCQkJY2FzZSAnd2Vla2x5JzoKCQkJCQkkcm93SW5kZXggPSAiV2VlayBvZiI7CgkJCQkJYnJlYWs7CgkJCQljYXNlICdtb250aGx5JzoKCQkJCQkkcm93SW5kZXggPSAiTW9udGgiOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAneWVhcmx5JzoKCQkJCQkkcm93SW5kZXggPSAiWWVhciI7CgkJCQkJYnJlYWs7CgkJCQlkZWZhdWx0OgoJCQkJCSRyb3dJbmRleCA9ICJEYXRlIjsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQkKCQkvL2RhdGEgaXMgcmVhZHksIGNvbnN0cnVjdCB0aGUgZ3JpZCBtb2RlbCwgc3RhcnRpbmcgd2l0aCB0aGUgaGVhZGVycwoJCSRyZXN1bHRzZXQgICA9ICRkYXRhUmVzcG9uc2UtPm1lc3NhZ2U7CgkJJGdyaWRIZWFkZXJzID0gYXJyYXkoImRhdGUiPT5hcnJheSgnbGFiZWwnPT4kcm93SW5kZXgsICdzb3J0YWJsZSc9PnRydWUsICdzb3J0VmFsdWVDb2x1bW4nPT4nZGF0ZV9zb3J0X3ZhbHVlJykpOwoJCQoJCS8vdGhlcmUgaXMgYSBjb2x1bW4gZm9yIGVhY2ggbWVtYmVyc2hpcCBsZXZlbC4gV2UgY291bGQgcXVlcnkgdGhpcyBkYXRhIGFnYWluLCBidXQgZmFzdGVyIHRvIGp1c3QgZXh0cmFjdCBpdCBmcm9tIHRoZSBmaXJzdCByb3cgb2YgdGhlIHJlc3VsdHNldAoJCSRmaXJzdFJvdyA9IHJlc2V0KCRyZXN1bHRzZXQpOwoJCWZvcmVhY2ggKCRmaXJzdFJvdyBhcyAkaz0+JHYpCgkJewkKCQkJaWYgKCgkayAhPSAiZGF0ZSIpICYmICgkayAhPSAnZGF0ZV9zb3J0X3ZhbHVlJykpCgkJCXsKCQkJCSRncmlkSGVhZGVyc1ska10gPSBhcnJheSgnbGFiZWwnPT4kayk7CgkJCX0KCQl9CgkJCgkJJGdyaWQgPSBNTV9SZXBvcnREYXRhZ3JpZDo6Y3JlYXRlRnJvbURhdGEoc2VsZjo6JE5FV19NRU1CRVJTX0RBVEFHUklELCAkZ3JpZEhlYWRlcnMsICRkYXRhUmVzcG9uc2UsJGRpcmVjdGl2ZXMpOwoJCS8vJGdyaWQtPnNldEdyaWRUaXRsZSgiTWVtYmVyIENvdW50Iik7CgkJJGdyaWQtPnNldFNob3dIZWFkZXJSb3coZmFsc2UpOwoJCQoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGdyaWQtPnJlbmRlcigpKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyTmV3TWVtYmVyc1BpZWNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKQoJewoJCSRkYXRhUmVzcG9uc2UgPSBNTV9SZXBvcnREYXRhUmV0cmlldmVyOjpyZXF1ZXN0RGF0YShnZXRfY2xhc3MoJHRoaXMpLCBzZWxmOjokTkVXX01FTUJFUlNfQllfREFURV9RVUVSWSwgJHBhcmFtcyk7CgkJaWYgKCFNTV9SZXBvcnRSZXNwb25zZTo6aXNTdWNjZXNzKCRkYXRhUmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuICRkYXRhUmVzcG9uc2U7CgkJfQoJCSRyZXN1bHRzZXQgPSAkZGF0YVJlc3BvbnNlLT5tZXNzYWdlOwoJCSRjaGFydERhdGEgPSBuZXcgTU1fUmVwb3J0UGllY2hhcnRNb2RlbCgpOwoJCSRjaGFydERhdGEtPmFkZFNsaWNlKCJUZXN0MSIsIDI1KTsKCQkkY2hhcnREYXRhLT5hZGRTbGljZSgiVGVzdDIiLDc1KTsKCQkkcGllQ2hhcnQgPSBuZXcgTU1fUmVwb3J0UGllQ2hhcnQoc2VsZjo6JE5FV19NRU1CRVJTX1BJRUNIQVJUKTsKCQkkcmVuZGVyZWRDaGFydCA9ICRwaWVDaGFydC0+cmVuZGVyKCRjaGFydERhdGEpOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJHJlbmRlcmVkQ2hhcnQpOwoJfQoJCgkKCS8qKgoJICogR2VuZXJhdGUgdGhlIGRhdGEgZm9yIHRoZSBOZXcgTWVtYmVyIEJ5IERhdGUgcmVwb3J0LiBBbGwgZm91ciBkYXRhc2V0cyBmb3IgdGhlIHN1cHBsaWVkIGRhdGUgcmFuZ2UgCgkgKiBhcmUgZ2VuZXJhdGVkLiBUaGUgZGF0YXNldHMgYXJlIGRhaWx5LCB3ZWVrbHksIG1vbnRobHkgYW5kIHllYXJseQoJICogQ29uc3RyYWludDogVGhlIHN1cHBsaWVkIHBhcmFtcyBtdXN0IGNvbnRhaW4gYSBzdGFydCBhbmQgZW5kIGRhdGUKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwYXJhbXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyBhbGwgZm91ciBkYXRhc2V0cyBvbiBzdWNjZXNzCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVOZXdNZW1iZXJzQnlEYXRlRGF0YSgkcGFyYW1zKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoIWlzX2FycmF5KCRwYXJhbXMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIE1lbWJlciBDb3VudCBkYXRhOiBJbXByb3BlciBwYXJhbWV0ZXJzIGZvcm1hdCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmIChlbXB0eSgkcGFyYW1zWydzdGFydF9kYXRlJ10pIHx8IGVtcHR5KCRwYXJhbXNbJ2VuZF9kYXRlJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIE1lbWJlciBDb3VudCBkYXRhOiBTdGFydCBhbmQgRW5kIGRhdGUgbXVzdCBiZSBzdXBwbGllZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSR1c2VyRGF0YVRhYmxlID0gTU1fVEFCTEVfVVNFUl9EQVRBOwoJCSRtZW1iZXJzaGlwTGV2ZWxzVGFibGUgPSBNTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUzsKCQkKCQkkc3RhcnRUaW1lID0gaXNfaW50KCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSk/JHBhcmFtc1snc3RhcnRfZGF0ZSddOnN0cnRvdGltZSgkcGFyYW1zWydzdGFydF9kYXRlJ10pOwoJCSRlbmRUaW1lID0gaXNfaW50KCRwYXJhbXNbJ2VuZF9kYXRlJ10pPyRwYXJhbXNbJ2VuZF9kYXRlJ106c3RydG90aW1lKCRwYXJhbXNbJ2VuZF9kYXRlJ10pOwoJCQoJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCBIOmk6cyIsJHN0YXJ0VGltZSk7IC8vbXlzcWwgZm9ybWF0CgkJJGVuZERhdGUgPSAgIGRhdGUoIlktbS1kIEg6aTpzIiwkZW5kVGltZSk7CgkJCgkJJG1sRmlsdGVycyA9IGFycmF5KCk7CgkJJG1sRmlsdGVyU3RyaW5nID0gIiI7CgkJJGZpbHRlcnNQcmVzZW50ID0gZmFsc2U7CgkJCgkJaWYgKGlzc2V0KCRwYXJhbXNbJ21lbWJlcnNoaXBfbGV2ZWxzJ10pICYmIGlzX2FycmF5KCRwYXJhbXNbJ21lbWJlcnNoaXBfbGV2ZWxzJ10pICYmIChjb3VudCgkcGFyYW1zWydtZW1iZXJzaGlwX2xldmVscyddKSA+IDApKQoJCXsKCQkJJGZpbHRlcnNQcmVzZW50ID0gdHJ1ZTsKCQkJZm9yZWFjaCAoJHBhcmFtc1snbWVtYmVyc2hpcF9sZXZlbHMnXSBhcyAkdikKCQkJewoJCQkJaWYgKGlzX251bWVyaWMoJHYpKQoJCQkJewoJCQkJCSRtbEZpbHRlcnNbXSA9ICR3cGRiLT5wcmVwYXJlKCIlZCIsJHYpOwoJCQkJfQoJCQl9CgkJCSRtbEZpbHRlclN0cmluZyA9IGltcGxvZGUoJywnLCRtbEZpbHRlcnMpOwoJCX0KCQkJCgkJLy9sb2FkIG1lbWJlcnNoaXAgbGV2ZWxzIGludG8gYSBsb29rdXAgdGFibGUgKGluIG1lbW9yeSkKCQkkbWVtYmVyc2hpcFNRTFdoZXJlID0gJGZpbHRlcnNQcmVzZW50PyIgV0hFUkUgaWQgSU4gKHskbWxGaWx0ZXJTdHJpbmd9KSAiOiIiOwoJCSRtZW1iZXJzaGlwU1FMID0gIlNFTEVDVCBpZCwgbmFtZSBGUk9NIHskbWVtYmVyc2hpcExldmVsc1RhYmxlfSB7JG1lbWJlcnNoaXBTUUxXaGVyZX0gT1JERVIgQlkgbmFtZSI7CgkJJG1lbWJlcnNoaXBMZXZlbFJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJG1lbWJlcnNoaXBTUUwpOwoJCSRtbExvb2t1cCA9IGFycmF5KCk7CgkJJHplcm9Sb3cgPSBhcnJheSgpOwoJCWZvcmVhY2ggKCRtZW1iZXJzaGlwTGV2ZWxSZXN1bHRzIGFzICRtcmVzKQoJCXsKCQkJJG1sTG9va3VwWyRtcmVzLT5pZF0gPSAkbXJlcy0+bmFtZTsKCQkJJHplcm9Sb3dbJG1yZXMtPm5hbWVdID0gMDsKCQl9CgkJCgkJCgkJLy9jcmVhdGUgdGhlIGZvdXIgcmVzdWx0IHNldHM6IGRhaWx5LCB3ZWVrbHksIG1vbnRobHksIHllYXJseSBhbmQgaW5pdGlhbGl6ZQoJCSRkYWlseVJlc3VsdHNldCA9IGFycmF5KCk7CgkJJHdlZWtseVJlc3VsdHNldCA9IGFycmF5KCk7CgkJJG1vbnRobHlSZXN1bHRzZXQgPSBhcnJheSgpOwoJCSR5ZWFybHlSZXN1bHRzZXQgPSBhcnJheSgpOwoJCQoJCS8vaW5pdGlhbGl6ZSBkYWlseQoJCSRjb3VudGVyU3RhcnRUaW1lID0gc3RydG90aW1lKGRhdGUoIlktbS1kIDAwOjAwOjAwIiwkc3RhcnRUaW1lKSk7CgkJJGNvdW50ZXJFbmRUaW1lID0gc3RydG90aW1lKGRhdGUoIlktbS1kIDIzOjU5OjU5IiwkZW5kVGltZSkpOwoJCQoJCWZvciAoJGk9JGNvdW50ZXJTdGFydFRpbWU7ICRpPD0gJGNvdW50ZXJFbmRUaW1lOyAkaSs9ODY0MDApIC8vODY0MDAgc2VjcyBpbiBhIGRheQoJCXsKCQkJJGN1cnJlbnREYXRlID0gZGF0ZSgiWS1tLWQiLCRpKTsKCQkJJGRhaWx5UmVzdWx0c2V0WyRjdXJyZW50RGF0ZV0gPSAkemVyb1JvdzsKCQl9CgkJCgkJLy9pbml0aWFsaXplIHdlZWtseSAoc3RvcmUgb25seSB0aGUgc3VuZGF5IHN0YXJ0aW5nIHRoZSB3ZWVrLi4gd2Vla3MgZ28gZnJvbSBTdW4gLSBTYXQpCgkJJHN0YXJ0RGF5T2ZXZWVrID0gZGF0ZSgidyIsJGNvdW50ZXJTdGFydFRpbWUpOwoJCSRzdW5kYXlPZlN0YXJ0V2Vla1RpbWUgPSBzdHJ0b3RpbWUoIi17JHN0YXJ0RGF5T2ZXZWVrfSBkYXlzIiwkY291bnRlclN0YXJ0VGltZSk7CgkJZm9yICgkaT0kc3VuZGF5T2ZTdGFydFdlZWtUaW1lOyAkaSA8PSAkZW5kVGltZTsgJGkrPTYwNDgwMCkgLy82MDQ4MDAgc2VjcyBpbiBhIHdlZWsKCQl7CgkJCSRzdW5kYXlEYXRlID0gZGF0ZSgiWS1tLWQiLCRpKTsKCQkJJHdlZWtseVJlc3VsdHNldFskc3VuZGF5RGF0ZV0gPSAkemVyb1JvdzsKCQl9CgkJCgkJCgkJLy9pbml0aWFsaXplIG1vbnRobHkKCQkkc3RhcnRNb250aFRpbWUgPSBzdHJ0b3RpbWUoZGF0ZSgiWS1tLTAxIDAwOjAwIiwkY291bnRlclN0YXJ0VGltZSkpOwoJCWZvciAoJGk9JHN0YXJ0TW9udGhUaW1lOyAkaTw9ICRlbmRUaW1lOyAkaT1zdHJ0b3RpbWUoIisxIG1vbnRoIiwkaSkpIC8vaGF2ZSB0byB1c2Ugc3RydG90aW1lIGZvciBtb250aGx5IGJlY2F1c2UgaXRzIG5vdCBhIHJlYWwgbWVhc3VyZW1lbnQKCQl7CgkJCSRmaXJzdERheU9mTW9udGhEYXRlID0gZGF0ZSgiWS1tLWQiLCRpKTsKCQkJJG1vbnRobHlSZXN1bHRzZXRbJGZpcnN0RGF5T2ZNb250aERhdGVdID0gJHplcm9Sb3c7CgkJfQoJCQoJCS8vaW5pdGlhbGl6ZSB5ZWFybHkKCQkkc3RhcnRZZWFyID0gZGF0ZSgiWSIsJHN0YXJ0VGltZSk7CgkJJGVuZFllYXIgPSBkYXRlKCJZIiwkZW5kVGltZSk7CgkJCgkJZm9yICgkaT0kc3RhcnRZZWFyOyAkaSA8PSAkZW5kWWVhcjsgJGkrKykKCQl7CgkJCSR5ZWFybHlSZXN1bHRzZXRbJGldID0gJHplcm9Sb3c7CgkJfQoJCQoJCS8vb3JpZ2luYWxseSB0aGlzIHF1ZXJ5IHdhcyBkb25lIHVzaW5nIGEgam9pbiBmcm9tIG9yZGVyX2l0ZW1fYWNjZXMgdG8gb3JkZXJzIHRvIHVzZXJfZGF0YSwgaGVuY2UgdGhlIHVzZSBvZiB0aGUgdGVybSBmaXJzdF9vcmRlcl9kYXRlCgkJLy9UT0RPOiBjaGFuZ2UgZmlyc3Rfb3JkZXJfZGF0ZSB0byBzb21ldGhpbmcgbW9yZSBhcHByb3ByaWF0ZSAocmVnaXN0cmF0aW9uX2RhdGU/KQoJCQoJCSRuZXZlckFjdGl2ZVN0cmluZyA9IGltcGxvZGUoIiwiLGFycmF5KE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTixNTV9TdGF0dXM6OiRFUlJPUikpOwoJCSRzcWxXaGVyZSA9ICRmaWx0ZXJzUHJlc2VudD8iIG11ZC5tZW1iZXJzaGlwX2xldmVsX2lkIElOICh7JG1sRmlsdGVyU3RyaW5nfSkgIjoiIjsKCQkkc3FsV2hlcmUgPSAoZW1wdHkoJHNxbFdoZXJlKSk/IiBXSEVSRSAodS51c2VyX3JlZ2lzdGVyZWQgPj0gJ3skc3RhcnREYXRlfScpIjoiIFdIRVJFIHskc3FsV2hlcmV9IEFORCAodS51c2VyX3JlZ2lzdGVyZWQgPiAneyRzdGFydERhdGV9JykiOwoJCSRzcWxXaGVyZSAuPSAiIEFORCAodS51c2VyX3JlZ2lzdGVyZWQgPD0gJ3skZW5kRGF0ZX0nKSBBTkQgbXVkLnN0YXR1cyBOT1QgSU4gKHskbmV2ZXJBY3RpdmVTdHJpbmd9KSI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgbXVkLm1lbWJlcnNoaXBfbGV2ZWxfaWQsIHUudXNlcl9yZWdpc3RlcmVkIEFTIGZpcnN0X29yZGVyX2RhdGUgIi4KCQkJCSJGUk9NIHskdXNlckRhdGFUYWJsZX0gbXVkIElOTkVSIEpPSU4geyR3cGRiLT51c2Vyc30gdSBPTiAobXVkLndwX3VzZXJfaWQgPSB1LklEKSAiLgoJCQkJIklOTkVSIEpPSU4geyRtZW1iZXJzaGlwTGV2ZWxzVGFibGV9IG1sIE9OIChtdWQubWVtYmVyc2hpcF9sZXZlbF9pZCA9IG1sLmlkKSB7JHNxbFdoZXJlfSI7CgkJCgkJJHJlcyA9IF9tbW1xKCRzcWwsIHRydWUpOwoJCQoJCWlmICgkcmVzKQoJCXsKICAJCQkkZmV0Y2hfb2JqZWN0X2Z1bmN0aW9uID0gX21tbWQoKS4iX2ZldGNoX29iamVjdCI7CiAgCQkJJGZyZWVfcmVzdWx0X2Z1bmN0aW9uID0gX21tbWQoKS4iX2ZyZWVfcmVzdWx0IjsKICAJCQkkZXJyb3JfZnVuY3Rpb24gPSBfbW1tZCgpLiJfZXJyb3IiOwogIAkJCgkJCXdoaWxlICgkcm93ID0gQCRmZXRjaF9vYmplY3RfZnVuY3Rpb24oJHJlcykpCgkJCXsKCQkJCS8vcHV0IGVhY2ggcmVzdWx0IGluIHRoZSBjb3JyZWN0IGJpbgoJCQkJJGZpcnN0T3JkZXJUaW1lID0gc3RydG90aW1lKCRyb3ctPmZpcnN0X29yZGVyX2RhdGUpOwoJCQkJCgkJCQkvL2RhaWx5CgkJCQkkY3VycmVudERhdGUgPSBkYXRlKCJZLW0tZCIsJGZpcnN0T3JkZXJUaW1lKTsKCQkJCSRkYWlseVJlc3VsdHNldFskY3VycmVudERhdGVdWyRtbExvb2t1cFskcm93LT5tZW1iZXJzaGlwX2xldmVsX2lkXV0rKzsKCgkJCQkvL3dlZWtseQoJCQkJJG9mZnNldCA9IGRhdGUoInciLCRmaXJzdE9yZGVyVGltZSk7CgkJCQkkd2Vla1N0YXJ0RGF0ZSA9IGRhdGUoIlktbS1kIixzdHJ0b3RpbWUoIi17JG9mZnNldH0gZGF5cyIsJGZpcnN0T3JkZXJUaW1lKSk7CgkJCQkkd2Vla2x5UmVzdWx0c2V0WyR3ZWVrU3RhcnREYXRlXVskbWxMb29rdXBbJHJvdy0+bWVtYmVyc2hpcF9sZXZlbF9pZF1dKys7CgkJCQkKCQkJCS8vbW9udGhseQoJCQkJJGZpcnN0RGF5T2ZNb250aERhdGUgPSBkYXRlKCJZLW0tMDEiLCRmaXJzdE9yZGVyVGltZSk7CgkJCQkkbW9udGhseVJlc3VsdHNldFskZmlyc3REYXlPZk1vbnRoRGF0ZV1bJG1sTG9va3VwWyRyb3ctPm1lbWJlcnNoaXBfbGV2ZWxfaWRdXSsrOwoJCQkJCgkJCQkvL3llYXJseQoJCQkJJHllYXIgPSBkYXRlKCJZIiwkZmlyc3RPcmRlclRpbWUpOwoJCQkJJHllYXJseVJlc3VsdHNldFskeWVhcl1bJG1sTG9va3VwWyRyb3ctPm1lbWJlcnNoaXBfbGV2ZWxfaWRdXSsrOwoJCQl9CgkJCQoJCQlpZiAoJGVycm9yX21lc3NhZ2UgPSAkZXJyb3JfZnVuY3Rpb24oJHdwZGItPmRiaCkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgTWVtYmVyIENvdW50IGRhdGEgKHskZXJyb3JfbWVzc2FnZX0pIixNTV9SZXBvcnRSZXNwb25zZTo6JEVSUk9SKTsJCgkJCX0KCQkJCgkJCUAkZnJlZV9yZXN1bHRfZnVuY3Rpb24oJHJlcyk7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJEYXRhYmFzZSBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBnZW5lcmF0aW5nIE1lbWJlciBDb3VudCBkYXRhIixNTV9SZXBvcnRSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy90cmFuc2Zvcm0gaW50byBmaW5hbCByZXN1bHRzZXRzCgkJJGZpbmFsRGFpbHlSZXN1bHRzZXQgPSBhcnJheSgpOwoJCWZvcmVhY2ggKCRkYWlseVJlc3VsdHNldCBhcyAkaz0+JHYpCgkJewoJCQkkZGF0ZUxhYmVsID0gZGF0ZSgibS9kL3kiLHN0cnRvdGltZSgkaykpOwoJCQkkZmluYWxEYWlseVJlc3VsdHNldFtdID0gYXJyYXkoJ2RhdGUnPT4kZGF0ZUxhYmVsLCdkYXRlX3NvcnRfdmFsdWUnPT4kaykgKyAkdjsKCQl9CgkJdW5zZXQgKCRkYWlseVJlc3VsdHNldCk7CgoJCSRmaW5hbFdlZWtseVJlc3VsdHNldCA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHdlZWtseVJlc3VsdHNldCBhcyAkaz0+JHYpCgkJewoJCQkkZGF0ZUxhYmVsID0gZGF0ZSgibS9kL3kiLHN0cnRvdGltZSgkaykpOwoJCQkkZmluYWxXZWVrbHlSZXN1bHRzZXRbXSA9IGFycmF5KCdkYXRlJz0+JGRhdGVMYWJlbCwnZGF0ZV9zb3J0X3ZhbHVlJz0+JGspICsgJHY7CgkJfQoJCXVuc2V0KCR3ZWVrbHlSZXN1bHRzZXQpOwoJCQoJCSRmaW5hbE1vbnRobHlSZXN1bHRzZXQgPSBhcnJheSgpOwoJCWZvcmVhY2ggKCRtb250aGx5UmVzdWx0c2V0IGFzICRrPT4kdikKCQl7CgkJCSRkYXRlTGFiZWwgPSBkYXRlKCJtL1kiLHN0cnRvdGltZSgkaykpOwoJCQkkZmluYWxNb250aGx5UmVzdWx0c2V0W10gPSBhcnJheSgnZGF0ZSc9PiRkYXRlTGFiZWwsJ2RhdGVfc29ydF92YWx1ZSc9PiRrKSArICR2OwoJCX0KCQl1bnNldCgkbW9udGhseVJlc3VsdHNldCk7CgkJCgkJJGZpbmFsWWVhcmx5UmVzdWx0c2V0ID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkeWVhcmx5UmVzdWx0c2V0IGFzICRrPT4kdikKCQl7CgkJCSRmaW5hbFllYXJseVJlc3VsdHNldFtdID0gYXJyYXkoJ2RhdGUnPT4kaywnZGF0ZV9zb3J0X3ZhbHVlJz0+JGspICsgJHY7CgkJfQoJCXVuc2V0KCR5ZWFybHlSZXN1bHRzZXQpOwoKCQkvL3JldHVybiB0aGUgY3JlYXRlZCByZXN1bHRzZXRzCgkJJGRzQXJyYXkgPSBhcnJheSgiZGFpbHkiICAgPT4gICRmaW5hbERhaWx5UmVzdWx0c2V0LAoJCQkJCQkgIndlZWtseSIgID0+ICAkZmluYWxXZWVrbHlSZXN1bHRzZXQsCgkJCQkJCSAibW9udGhseSIgPT4gICRmaW5hbE1vbnRobHlSZXN1bHRzZXQsCgkJCQkJCSAieWVhcmx5IiAgPT4gICRmaW5hbFllYXJseVJlc3VsdHNldCk7CgoJCSRkYXRhc2V0ID0gTU1fUmVwb3J0RGF0YXNldDo6Y3JlYXRlQ29tcG91bmRSZXBvcnREYXRhc2V0KCRwYXJhbXMsJGRzQXJyYXlbJHBhcmFtc1sndHlwZSddXSk7CgkJdW5zZXQoJGRzQXJyYXlbJHBhcmFtc1sndHlwZSddXSk7CgkJZm9yZWFjaCAoJGRzQXJyYXkgYXMgJGRzVHlwZT0+JGRzUmVzdWx0c2V0KQoJCXsKCQkJJGNoYW5nZWRQYXJhbXMgPSBhcnJheSgidHlwZSI9PiRkc1R5cGUpICsgJHBhcmFtczsKCQkJJGRhdGFzZXQtPmFkZEFkZGl0aW9uYWxEYXRhc2V0KCRjaGFuZ2VkUGFyYW1zLCAkZHNSZXN1bHRzZXQpOwoJCX0KCQl1bnNldCgkZHNBcnJheSk7CgkJcmV0dXJuICRkYXRhc2V0OwkJCQoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YSgkcXVlcnlJZGVudGlmaWVyLCAkcGFyYW1zKQoJewoJCXN3aXRjaCAoJHF1ZXJ5SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JE5FV19NRU1CRVJTX0JZX0RBVEVfUVVFUlk6CgkJCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVOZXdNZW1iZXJzQnlEYXRlRGF0YSgkcGFyYW1zKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZ2VuZXJhdGluZyBkYXRhIGZvciB1bmtub3duIHF1ZXJ5IGlkZW50aWZpZXIgeyRxdWVyeUlkZW50aWZpZXJ9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKfQoK', 0, '2018-11-21 06:38:54'),
(185, 'apiview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fQXBpVmlldyBleHRlbmRzIE1NX1JCQUNBZG1pblZpZXcKewoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZUFwaSgkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRU1PVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5yZW1vdmVBcGlTZXQoJHBvc3QpOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Vmlld0RhdGEoTU1fRGF0YUdyaWQgJGRnKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcm93cyA9IHBhcmVudDo6Z2V0RGF0YShNTV9UQUJMRV9BUElfS0VZUywgbnVsbCwgJGRnKTsKCQkKCQlyZXR1cm4gJHJvd3M7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZW1vdmVBcGlTZXQoJHBvc3QpewoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkKCQl7CgkJCSRhcGlTZXQgPSBuZXcgTU1fQXBpKCRwb3N0WyJpZCJdLCBmYWxzZSk7CgkJCSRyZXN1bHQgPSAkYXBpU2V0LT5kZWxldGUoKTsKCQkJCgkJCWlmKCRyZXN1bHQpIHsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfSAKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBhcGkgc2V0LiBObyBpZCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlQXBpKCRwb3N0KQoJewoJCSRyZXEgPSBhcnJheSgnYXBpX2tleScsJ2FwaV9zZWNyZXQnLCAnc3RhdHVzJywgJ25hbWUnKTsKCQlmb3JlYWNoKCRyZXEgYXMgJGtleSl7CgkJCWlmKCFpc3NldCgkcG9zdFsibW1fIi4ka2V5XSkpewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgbW1feyRrZXl9IGZpZWxkIHdoaWNoIGlzIHJlcXVpcmVkLiIuanNvbl9lbmNvZGUoJHBvc3QpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkkYXBpID0gbmV3IE1NX0FwaSgpOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJtbV9pZCJdKSAmJiBpbnR2YWwoJHBvc3RbIm1tX2lkIl0pPjApIHsKCQkJJGFwaS0+c2V0SWQoJHBvc3RbIm1tX2lkIl0pOwoJCX0KCQkKCQkkYXBpLT5zZXRBcGlLZXkoJHBvc3RbIm1tX2FwaV9rZXkiXSk7CgkJJGFwaS0+c2V0QXBpU2VjcmV0KCRwb3N0WyJtbV9hcGlfc2VjcmV0Il0pOwoJCSRhcGktPnNldE5hbWUoJHBvc3RbIm1tX25hbWUiXSk7CgkJJGFwaS0+c2V0U3RhdHVzKCRwb3N0WyJtbV9zdGF0dXMiXSk7CgkJcmV0dXJuICRhcGktPmNvbW1pdERhdGEoKTsKCX0KfQo=', 0, '2018-11-21 06:38:54'),
(186, 'extension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmFic3RyYWN0IGNsYXNzIE1NX0V4dGVuc2lvbgp7CQoJcHVibGljIHN0YXRpYyAkT1BUSU9OX1BSRUZJWCAgICAgICAJCT0gIm1tLWV4dGVuc2lvbi0iOwoJcHVibGljIHN0YXRpYyAkVVNFUlZPSUNFX1RPS0VOICAgICAgCT0gIlVTRVJWT0lDRSI7CglwdWJsaWMgc3RhdGljICRGQUNFQk9PS19MT0dJTl9UT0tFTiAJPSAiRmFjZWJvb2siOwoJcHVibGljIHN0YXRpYyAkTElOS0VESU5fTE9HSU5fVE9LRU4gCT0gIkxpbmtlZEluIjsKCXB1YmxpYyBzdGF0aWMgJEdPT0dMRV9MT0dJTl9UT0tFTiAgIAk9ICJHb29nbGUiOyAvL3NvY2lhbCBsb2dpbiB0b2tlbnMgbXVzdCBzdGFydCB3aXRoIGFuIHVwcGVyY2FzZSBsZXR0ZXIsIGZvbGxvd2VkIGJ5IGFsbCBsb3dlcmNhc2UhCglwdWJsaWMgc3RhdGljICRUV0lUVEVSX0xPR0lOX1RPS0VOICAJPSAiVHdpdHRlciI7CglwdWJsaWMgc3RhdGljICRHT09HTEVfRUNPTU1FUkNFX1RPS0VOCT0gImdvb2dsZV9lY29tbWVyY2UiOwoJcHVibGljIHN0YXRpYyAkQkJQUkVTU19UT0tFTiAgICAgIAkJPSAiYmJwcmVzcyI7CgoJcHJvdGVjdGVkICR0b2tlbiA9ICIiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGF1dG9sb2FkRGVwZW5kZW5jaWVzPXRydWUsJGNvbmZpZ0RhdGE9IiIpIHt9CgkKCS8qKgoJICogQWxsb3cgZXh0ZW5zaW9ucyB0byBleGVjdXRlIGNvZGUgaW4gcmVzcG9uc2UgdG8gdGhlIFdvcmRQcmVzcyBpbml0IGhvb2sKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRvSW5pdEhvb2soKSB7IH0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwZXJmb3JtSW5pdEFjdGlvbnMoKQoJewoJCWlmIChjbGFzc19leGlzdHMoIk1NX0V4dGVuc2lvbnNGYWN0b3J5IikpCgkJewoJCQkkc29jaWFsTG9naW5Qcm92aWRlcnMgPSBhcnJheSgpOwoJCQkkYWN0aXZlRXh0ZW5zaW9ucyA9IE1NX0V4dGVuc2lvbnNGYWN0b3J5OjpnZXRBY3RpdmVFeHRlbnNpb25zKCk7CgkJCWZvcmVhY2ggKCRhY3RpdmVFeHRlbnNpb25zIGFzICRhY3RpdmVFeHRlbnNpb24pCgkJCXsKCQkJCWlmICghKCRhY3RpdmVFeHRlbnNpb24gaW5zdGFuY2VvZiBNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uKSkKCQkJCXsKCQkJCQkkYWN0aXZlRXh0ZW5zaW9uLT5kb0luaXRIb29rKCk7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCSRzb2NpYWxMb2dpblByb3ZpZGVyc1tdID0gJGFjdGl2ZUV4dGVuc2lvbjsKCQkJCX0KCQkJfQoJCQkKCQkJaWYgKGNvdW50KCRzb2NpYWxMb2dpblByb3ZpZGVycykgPiAwKQoJCQl7CgkJCQkvL2RvSW5pdEhvb2sgb25seSBuZWVkcyB0byBiZSBjYWxsZWQgZm9yIG9uZSBvZiB0aGUgc29jaWFsIGxvZ2luIHByb3ZpZGVycywgYmVjYXVzZSBhcyBhIGdyb3VwIHRoZXkgc2hhcmUgdGhlIHNhbWUgaW5pdCBob29rCgkJCQkkaG9va0hhc1J1biA9IGZhbHNlOwoJCQkJZG8gCgkJCQl7CgkJCQkJJHNscCA9IGFycmF5X3NoaWZ0KCRzb2NpYWxMb2dpblByb3ZpZGVycyk7CgkJCQkJaWYgKCRzbHAtPmlzQWN0aXZlKCkgJiYgJHNscC0+aGFzUGVybWlzc2lvbigpKQoJCQkJCXsKCQkJCQkJJHNscC0+ZG9Jbml0SG9vaygpOwoJCQkJCQkkaG9va0hhc1J1biA9IHRydWU7CgkJCQkJfQoJCQkJfSB3aGlsZSAoKGNvdW50KCRzb2NpYWxMb2dpblByb3ZpZGVycykgPjApICYmICghJGhvb2tIYXNSdW4pKTsKCQkJfQoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24oKSB7IHJldHVybiBmYWxzZTsgfQoJCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUxpc3RpbmdJdGVtKCkgeyByZXR1cm4gIiI7IH0KCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdTY3JlZW4oKSB7IHJldHVybiAiIjsgfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNBY3RpdmUoKSB7IHJldHVybiBmYWxzZTsgfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0T3B0aW9uKCRuYW1lKSAKCXsKCQlyZXR1cm4gZ2V0X29wdGlvbihzZWxmOjokT1BUSU9OX1BSRUZJWC5zdHJ0b2xvd2VyKCR0aGlzLT50b2tlbikuIi17JG5hbWV9IiwgIiIpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0T3B0aW9uKCRuYW1lLCAkdmFsdWUpCgl7CgkJdXBkYXRlX29wdGlvbihzZWxmOjokT1BUSU9OX1BSRUZJWC5zdHJ0b2xvd2VyKCR0aGlzLT50b2tlbikuIi17JG5hbWV9IiwgJHZhbHVlKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGxvYWREZXBlbmRlbmNpZXMoKSB7IH0KfQ==', 0, '2018-11-21 06:38:54'),
(187, 'moduleutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX01vZHVsZVV0aWxzCnsKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGFnZSgpCiAJewogCQlyZXR1cm4gaXNzZXQoJF9SRVFVRVNUWyJwYWdlIl0pID8gJF9SRVFVRVNUWyJwYWdlIl0gOiAiIjsKIAl9CiAJCiAJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQcmltYXJ5VGFiKCkKIAl7CiAJCXJldHVybiBzZWxmOjpnZXRQYXJlbnRUYWIoc2VsZjo6Z2V0TW9kdWxlKCkpOwogCX0KIAkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGFyZW50VGFiKCR0YWIpIAoJewoJCXN3aXRjaCgkdGFiKSAKCQl7CQoJCQljYXNlIE1NX01PRFVMRV9BQ1RJVklUWV9MT0c6CgkJCWNhc2UgTU1fTU9EVUxFX1BBWVBBTF9JUE5fTE9HOgoJCQkJcmV0dXJuIE1NX01PRFVMRV9MT0dTOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX0FQSToKCQkJY2FzZSBNTV9NT0RVTEVfUFVTSF9OT1RJRklDQVRJT05TOgoJCQljYXNlIE1NX01PRFVMRV9QSFBfSU5URVJGQUNFOgoJCQljYXNlIE1NX01PRFVMRV9XT1JEUFJFU1NfSE9PS1M6CgkJCQlyZXR1cm4gTU1fTU9EVUxFX0RFVkVMT1BFUl9UT09MUzsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9QQVlNRU5UX01FVEhPRFM6CgkJCWNhc2UgTU1fTU9EVUxFX1RFU1RfREFUQToKCQkJY2FzZSBNTV9NT0RVTEVfQ0FOQ0VMTEFUSU9OX01FVEhPRDoKCQkJCXJldHVybiBNTV9NT0RVTEVfUEFZTUVOVF9TRVRUSU5HUzsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9BRkZJTElBVEVfSU5URUdSQVRJT046CgkJCWNhc2UgTU1fTU9EVUxFX0FGRklMSUFURV9UUkFDS0lORzoKCQkJY2FzZSBNTV9NT0RVTEVfQ09NTUlTU0lPTl9QUk9GSUxFUzogCgkJCQlyZXR1cm4gTU1fTU9EVUxFX0FGRklMSUFURV9TRVRUSU5HUzsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9FTUFJTF9JTlRFR1JBVElPTjoKCQkJY2FzZSBNTV9FTUFJTF9URU1QTEFURVM6CgkJCQlyZXR1cm4gTU1fTU9EVUxFX0VNQUlMX1NFVFRJTkdTOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUlNISVBfTEVWRUxTOgoJCQljYXNlIE1NX01PRFVMRV9CVU5ETEVTOgoJCQljYXNlIE1NX01PRFVMRV9QUk9EVUNUUzoKCQkJY2FzZSBNTV9NT0RVTEVfQ09VUE9OUzoKCQkJY2FzZSBNTV9NT0RVTEVfRFJJUF9DT05URU5UX1NDSEVEVUxFOgoJCQljYXNlIE1NX01PRFVMRV9MSU1FTElHSFRfUFJPRFVDVFM6CgkJCWNhc2UgTU1fTU9EVUxFX0xJTUVMSUdIVF9TSElQUElOR19NRVRIT0RTOgoJCQkJcmV0dXJuIE1NX01PRFVMRV9QUk9EVUNUX1NFVFRJTkdTOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX0NVU1RPTV9GSUVMRFM6CgkJCWNhc2UgTU1fTU9EVUxFX0NPVU5UUklFUzoKCQkJY2FzZSBNTV9NT0RVTEVfU0hJUFBJTkc6CgkJCWNhc2UgTU1fTU9EVUxFX0NIRUNLT1VUX09USEVSX1NFVFRJTkdTOgoJCQkJcmV0dXJuIE1NX01PRFVMRV9DSEVDS09VVF9TRVRUSU5HUzsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9GUkVFX01FTUJFUl9GT1JNOgoJCQljYXNlIE1NX01PRFVMRV9MT0dJTl9GT1JNOgoJCQkJcmV0dXJuIE1NX01PRFVMRV9XRUJGT1JNUzsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9WRVJTSU9OX0hJU1RPUlk6CgkJCWNhc2UgTU1fTU9EVUxFX1JFUEFJUl9NRU1CRVJNT1VTRToKCQkJY2FzZSBNTV9NT0RVTEVfUkVQQUlSX0lOU1RBTEw6CgkJCWNhc2UgTU1fTU9EVUxFX0VNUExPWUVFUzoKCQkJY2FzZSBNTV9NT0RVTEVfRFVQTElDQVRFX1NVQlNDUklQVElPTl9UT09MOgoJCQljYXNlIE1NX01PRFVMRV9FWFRFTlNJT05TOgoJCQljYXNlIE1NX01PRFVMRV9PVEhFUl9TRVRUSU5HUzoKCQkJY2FzZSBNTV9NT0RVTEVfU0FGRV9NT0RFOgoJCQljYXNlIE1NX01PRFVMRV9ESUFHTk9TVElDUzoKCQkJY2FzZSBNTV9NT0RVTEVfU1VQUE9SVDoKCQkJCXJldHVybiBNTV9NT0RVTEVfR0VORVJBTF9TRVRUSU5HUzsKCQkJCgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0dFTkVSQUw6CgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0FDQ0VTU19SSUdIVFM6CgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX1RSQU5TQUNUSU9OX0hJU1RPUlk6CgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX1NVQlNDUklQVElPTlM6CgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0dJRlRfSElTVE9SWToKCQkJY2FzZSBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfQ1VTVE9NX0ZJRUxEUzoKCQkJY2FzZSBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfQUNUSVZJVFlfTE9HOgoJCQljYXNlIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19VU0VSX0RFRklORUQ6CgkJCWNhc2UgTU1fTU9EVUxFX0lNUE9SVF9XSVpBUkQ6CgkJCWNhc2UgTU1fTU9EVUxFX1VTRVJfREVGSU5FRF9QQUdFUzoKCQkJCXJldHVybiBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFM7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAiIjsKCQl9Cgl9CiAJCiAJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRNb2R1bGUoKQogCXsKIAkJJHBhZ2VOYW1lID0gc2VsZjo6Z2V0UGFnZSgpOwogCQkKIAkJJG1vZHVsZSA9IGlzc2V0KCRfUkVRVUVTVFsibW9kdWxlIl0pID8gJF9SRVFVRVNUWyJtb2R1bGUiXSA6ICIiOwoJCQoJCWlmKCFpc3NldCgkbW9kdWxlKSB8fCAkbW9kdWxlID09ICIiKQoJCXsKCQkJc3dpdGNoKCRwYWdlTmFtZSkKCQkJewkKCQkJCWNhc2UgTU1fTU9EVUxFX0xPR1M6CgkJCQkJJG1vZHVsZSA9IE1NX01PRFVMRV9BQ1RJVklUWV9MT0c7CgkJCQkJYnJlYWs7CgkJCQkKCQkJCWNhc2UgTU1fTU9EVUxFX0RFVkVMT1BFUl9UT09MUzoKCQkJCQkkbW9kdWxlID0gTU1fTU9EVUxFX1BVU0hfTk9USUZJQ0FUSU9OUzsKCQkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSBNTV9NT0RVTEVfUEFZTUVOVF9TRVRUSU5HUzoKCQkJCQkkbW9kdWxlID0gTU1fTU9EVUxFX1BBWU1FTlRfTUVUSE9EUzsKCQkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSBNTV9NT0RVTEVfQUZGSUxJQVRFX1NFVFRJTkdTOgoJCQkJCSRtb2R1bGUgPSBNTV9NT0RVTEVfQUZGSUxJQVRFX0lOVEVHUkFUSU9OOwoJCQkJCWJyZWFrOwoJCQkJCgkJCQljYXNlIE1NX01PRFVMRV9FTUFJTF9TRVRUSU5HUzoKCQkJCQkkbW9kdWxlID0gTU1fTU9EVUxFX0VNQUlMX0lOVEVHUkFUSU9OOwoJCQkJCWJyZWFrOwoJCQkJCgkJCQljYXNlIE1NX01PRFVMRV9QUk9EVUNUX1NFVFRJTkdTOgoJCQkJCSRtb2R1bGUgPSBNTV9NT0RVTEVfUFJPRFVDVFM7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIE1NX01PRFVMRV9DSEVDS09VVF9TRVRUSU5HUzoKCQkJCQkkbW9kdWxlID0gTU1fTU9EVUxFX0NVU1RPTV9GSUVMRFM7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIE1NX01PRFVMRV9XRUJGT1JNUzoKCQkJCQkkbW9kdWxlID0gTU1fTU9EVUxFX0ZSRUVfTUVNQkVSX0ZPUk07CgkJCQkJYnJlYWs7CgkJCQkKCQkJCWNhc2UgTU1fTU9EVUxFX0dFTkVSQUxfU0VUVElOR1M6CgkJCQkJJG1vZHVsZSA9IE1NX01PRFVMRV9FTVBMT1lFRVM7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCSAJY2FzZSBNTV9NT0RVTEVfREFTSEJPQVJEOgoJCQkgCQkkbW9kdWxlID0gTU1fTU9EVUxFX0RBU0hCT0FSRDsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgTU1fTU9EVUxFX01BTkFHRV9NRU1CRVJTOgoJCQkgCQkkbW9kdWxlID0gTU1fTU9EVUxFX0JST1dTRV9NRU1CRVJTOwoJCQkJCWJyZWFrOwoJCQkJCgkJCQljYXNlIE1NX01PRFVMRV9NQU5BR0VfVFJBTlNBQ1RJT05TOgoJCQkJCSRtb2R1bGUgPSBNTV9NT0RVTEVfTUFOQUdFX1RSQU5TQUNUSU9OUzsKCQkJCQlicmVhazsKCQkJCQoJCQkJY2FzZSBNTV9NT0RVTEVfUkVQT1JUSU5HOgoJCQkJY2FzZSBNTV9NT0RVTEVfTkVXX01FTUJFUlNfUkVQT1JUOgoJCQkJY2FzZSBNTV9NT0RVTEVfTkVXX01FTUJFUlNfQ09NUEFSSVNPTl9SRVBPUlQ6CgkJCQljYXNlIE1NX01PRFVMRV9TQUxFU19CWV9QQVlNRU5UX1NFUlZJQ0VfUkVQT1JUOgoJCQkJY2FzZSBNTV9NT0RVTEVfVE9UQUxfVkFMVUVfUkVQT1JUOgoJCQkJY2FzZSBNTV9NT0RVTEVfU0FMRVNfQllfUFJPRFVDVF9SRVBPUlQ6CgkJCQljYXNlIE1NX01PRFVMRV9TSU1QTEVfQVZFUkFHRV9SRVBPUlQ6CgkJCQljYXNlIE1NX01PRFVMRV9DVVNUT01FUl9WQUxVRV9SRVBPUlQ6CgkJCQljYXNlIE1NX01PRFVMRV9BRkZJTElBVEVfUkVQT1JUOgoJCQkJY2FzZSBNTV9NT0RVTEVfU0FMRVNfQllfTUVNQkVSU0hJUF9SRVBPUlQ6CgkJCQlDQVNFIE1NX01PRFVMRV9HRVRfUkVQT1JUSU5HOgoJCQkJCSRtb2R1bGUgPSBNTV9NT0RVTEVfUkVQT1JUSU5HOwoJCQkJCWJyZWFrOwoJCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJJG1vZHVsZSA9ICIiOwoJCQkJCWJyZWFrOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkbW9kdWxlOwogCX0KIAkKIAlwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFVybCgkcGFnZSwgJG1vZHVsZT0iIikKIAl7CiAJCSR1cmwgPSBhZG1pbl91cmwoImFkbWluLnBocCIpOwogCQkkdXJsIC49ICI/cGFnZT0iLiRwYWdlOwogCQkKIAkJaWYoIWVtcHR5KCRtb2R1bGUpKQogCQl7CiAJCQkkdXJsIC49ICImbW9kdWxlPSIuJG1vZHVsZTsKIAkJfQogCQkKIAkJcmV0dXJuICR1cmw7CiAJfQogCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNNZW1iZXJNb3VzZVBhZ2UoJHBhZ2UpCiAJewogCQkkdmFsaWRQYWdlcyA9IGFycmF5KAogCQkJTU1fTU9EVUxFX0RBU0hCT0FSRCwgTU1fTU9EVUxFX01BTkFHRV9NRU1CRVJTLCBNTV9NT0RVTEVfUFJPRFVDVF9TRVRUSU5HUywgTU1fTU9EVUxFX0NIRUNLT1VUX1NFVFRJTkdTLCBNTV9NT0RVTEVfUEFZTUVOVF9TRVRUSU5HUywKIAkJCU1NX01PRFVMRV9BRkZJTElBVEVfU0VUVElOR1MsIE1NX01PRFVMRV9FTUFJTF9TRVRUSU5HUywgTU1fTU9EVUxFX0RFVkVMT1BFUl9UT09MUywgTU1fTU9EVUxFX0xPR1MsIE1NX01PRFVMRV9XRUJGT1JNUywgCiAJCQkJTU1fTU9EVUxFX0dFTkVSQUxfU0VUVElOR1MsTU1fTU9EVUxFX1JFUE9SVElORyxNTV9NT0RVTEVfU1VQUE9SVAogCQkpOwogCQlyZXR1cm4gaW5fYXJyYXkoJHBhZ2UsICR2YWxpZFBhZ2VzKTsKIAl9Cn0K', 0, '2018-11-21 06:38:54'),
(188, 'paymenttoken', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKgogKiBNTV9QYXltZW50VG9rZW4gaXMgYSB2YWx1ZS1vYmplY3QgbWVhbnQgdG8gc3RvcmUgYSBwYXltZW50IHRva2VuIHJlcHJlc2VudGluZyBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbgogKiBJdCBleHRlbmRzIE1NX0NhcmRJbmZvIHNvIHRoYXQgdGhlIG1hc2tlZCBjYXJkIG51bWJlciBhbmQgZXhwaXJhdGlvbiBkYXRlIGNhbiBiZSB1dGlsaXplZCBpZiBuZWVkZWQKICoKICovCmNsYXNzIE1NX1BheW1lbnRUb2tlbiBleHRlbmRzIE1NX0NhcmRJbmZvCnsKCQoJcHJvdGVjdGVkICR0b2tlbjsKCgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwYXltZW50VG9rZW49IiIpCgl7CgkJJHRoaXMtPnRva2VuID0gJHBheW1lbnRUb2tlbjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VG9rZW4oKQoJewoJCXJldHVybiAkdGhpcy0+dG9rZW47Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRUb2tlbigkdG9rZW4pCgl7CgkJJHRoaXMtPnRva2VuID0gJHRva2VuOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiB2YWxpZGF0ZSgpCgl7CgkJaWYgKCR0aGlzLT50ZXN0Q2FyZCkKCQl7CgkJCS8vYnlwYXNzIHZhbGlkYXRpb24gdG8gYWxsb3cgYm9ndXMgdmFsdWVzIGZvciB0ZXN0aW5nCgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQkkdG9rZW5FcnJvciA9ICIiOwoJCWlmIChlbXB0eSgkdGhpcy0+dG9rZW4pKQoJCXsKCQkJJHRva2VuRXJyb3IuPSAiUGF5bWVudCBpbmZvcm1hdGlvbiBub3Qgc3VwcGxpZWQiOwkKCQl9CgkJcmV0dXJuIChlbXB0eSgkdG9rZW5FcnJvcikpP3RydWU6JHRva2VuRXJyb3I7Cgl9Cn0=', 0, '2018-11-21 06:38:54'),
(189, 'bundlesview', 'LyoqCiAqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9CdW5kbGVzVmlldyBleHRlbmRzIE1NX1JCQUNQcm9kdWN0TWFuYWdlclZpZXcKewkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NBVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5zYXZlQnVuZGxlKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUJ1bmRsZSgkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TSE9XX0JVWV9OT1dfTElOS1M6CgkJCQkJcmV0dXJuICR0aGlzLT5zaG93UHVyY2hhc2VMaW5rcygkcG9zdCk7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgkcG9zdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHJvd3MgPSBwYXJlbnQ6OmdldERhdGEoTU1fVEFCTEVfQlVORExFUywgbnVsbCwgJHBvc3QpOwoJCQoJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQl7IAoJCQkkc3FsID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCBmcm9tICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgd2hlcmUgYWNjZXNzX3R5cGU9JyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIuIicgYW5kIGJ1bmRsZV9pZD0neyRyb3ctPmlkfScgYW5kIChzdGF0dXM9JyIuTU1fU3RhdHVzOjokQUNUSVZFLiInIE9SIHN0YXR1cz0nIi5NTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTi4iJykiOwoJCQkkb2JqID0kd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJJHJvdy0+bWVtYmVyX2NvdW50ID0gJG9iai0+dG90YWw7CgkJCQoJCQkkc3FsID0gInNlbGVjdCBwLiogZnJvbSAiLk1NX1RBQkxFX0JVTkRMRV9QUk9EVUNUUy4iIGF0cCwgIi5NTV9UQUJMRV9QUk9EVUNUUy4iIHAgd2hlcmUgYXRwLmJ1bmRsZV9pZD0neyRyb3ctPmlkfScgYW5kIGF0cC5wcm9kdWN0X2lkPXAuaWQiOwoJCQkkcm93LT5wcm9kdWN0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQl9CgkJCgkJcmV0dXJuICRyb3dzOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNhdmVCdW5kbGUoJHBvc3QpCgl7CgkJJGJ1bmRsZSA9IG5ldyBNTV9CdW5kbGUoKTsKCQkKCQlpZihpc3NldCgkcG9zdFsiaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJpZCJdKSA+IDApIAoJCXsKCQkJJGJ1bmRsZSA9IG5ldyBNTV9CdW5kbGUoJHBvc3RbImlkIl0pOwoJCQkKCQkJaWYoISRidW5kbGUtPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ2Fubm90IHVwZGF0ZSBidW5kbGUuIEludmFsaWQgSUQgJ3skcG9zdFsnaWQnXX0nIHBhc3NlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkvLyBjaGVjayBpZiBzaG9ydCBuYW1lIGlzIHVuaXF1ZQoJCSRidW5kbGVJZCA9ICgkYnVuZGxlLT5pc1ZhbGlkKCkpID8gJGJ1bmRsZS0+Z2V0SWQoKSA6IDA7CgkJaWYgKCFNTV9CdW5kbGU6OmNoZWNrU2hvcnROYW1lSXNVbmlxdWUoJHBvc3RbIm1tX3Nob3J0X25hbWUiXSwgJGJ1bmRsZUlkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCB1cGRhdGUgYnVuZGxlLiBTaG9ydCBuYW1lICd7JHBvc3RbIm1tX3Nob3J0X25hbWUiXX0nIGlzIG5vdCB1bmlxdWUuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKGlzc2V0KCRwb3N0WyJtbV9zdWJzY3JpcHRpb25fdHlwZSJdKSAmJiAkcG9zdFsibW1fc3Vic2NyaXB0aW9uX3R5cGUiXT09ImZyZWUiKSB7IAoJIAkJJHBvc3RbIm1tX3N1YnNjcmlwdGlvbl90eXBlIl0gPSAnMSc7CgkgCX0gZWxzZSB7IAoJIAkJJHBvc3RbIm1tX3N1YnNjcmlwdGlvbl90eXBlIl09ICAnMCc7CgkgCX0KCSAJCgkgCWlmKCRwb3N0WyJtbV9zdGF0dXMiXT09ImFjdGl2ZSIpIHsKCSAJCSRwb3N0WyJtbV9zdGF0dXMiXSA9ICIxIjsKCSAJfSBlbHNlIHsKCSAJCSRwb3N0WyJtbV9zdGF0dXMiXSA9ICIwIjsKCSAJfQoJIAkKCSAJJGJ1bmRsZS0+c2V0SXNGcmVlKCRwb3N0WyJtbV9zdWJzY3JpcHRpb25fdHlwZSJdKTsKCSAJJGJ1bmRsZS0+c2V0U3RhdHVzKCRwb3N0WyJtbV9zdGF0dXMiXSk7CgkgCSRidW5kbGUtPnNldERmbHRNZW1iZXJzaGlwSWQoJHBvc3RbIm1tX2RmbHRfbWVtYmVyc2hpcF9zZWxlY3RvciJdKTsKCQkkYnVuZGxlLT5zZXROYW1lKCRwb3N0WyJtbV9kaXNwbGF5X25hbWUiXSk7CgkgCSRidW5kbGUtPnNldERlc2NyaXB0aW9uKCRwb3N0WyJtbV9kZXNjcmlwdGlvbiJdKTsJCgkgCSRidW5kbGUtPnNldFNob3J0TmFtZShzdHJ0b3VwcGVyKCRwb3N0WyJtbV9zaG9ydF9uYW1lIl0pKTsKCQoJIAlpZihpc3NldCgkcG9zdFsic2hvdWxkX2V4cGlyZSJdKSAmJiBzdHJ0b2xvd2VyKCRwb3N0WyJzaG91bGRfZXhwaXJlIl0pPT0iMSIpewoJIAkJJGJ1bmRsZS0+c2V0RXhwaXJlcygiMSIpOwoJIAkJJGJ1bmRsZS0+c2V0RXhwaXJlQW1vdW50KCRwb3N0WyJleHBpcmVfYW1vdW50Il0pOwoJIAkJJGJ1bmRsZS0+c2V0RXhwaXJlUGVyaW9kKCRwb3N0WyJleHBpcmVfcGVyaW9kIl0pOwkKCSAJfQoJIAllbHNlewoJIAkJJGJ1bmRsZS0+c2V0RXhwaXJlcygiMCIpOwoJIAl9CgkgCQoJCS8vIHVwZGF0ZSBwcm9kdWN0IHJlbGF0aW9uc2hpcHMKCSAJaWYoaXNzZXQoJHBvc3RbIm1tX3Byb2R1Y3RzIl0pICYmIGlzX2FycmF5KCRwb3N0WyJtbV9wcm9kdWN0cyJdKSAmJiBjb3VudCgkcG9zdFsibW1fcHJvZHVjdHMiXSkgPiAwKQoJIAl7CgkJIAkkYnVuZGxlLT5zZXRQcm9kdWN0cygkcG9zdFsibW1fcHJvZHVjdHMiXSk7CgkJfQoJCWVsc2UKCQl7CgkJCSRidW5kbGUtPnNldFByb2R1Y3RzKGFycmF5KCkpOwoJCX0KCSAJCgkgCWlmKCFlbXB0eSgkcG9zdFsibW1fY2F0ZWdvcmllcyJdKSAmJiBpc19hcnJheSgkcG9zdFsibW1fY2F0ZWdvcmllcyJdKSAmJiBjb3VudCgkcG9zdFsibW1fY2F0ZWdvcmllcyJdKSA+IDApCgkgCXsKCSAJCSRidW5kbGUtPnNldENhdGVnb3JpZXMoJHBvc3RbIm1tX2NhdGVnb3JpZXMiXSk7CgkgCX0KCSAJZWxzZQoJIAl7CgkgCQkkYnVuZGxlLT5zZXRDYXRlZ29yaWVzKGFycmF5KCkpOwoJIAl9CgkJCgkJcmV0dXJuICRidW5kbGUtPmNvbW1pdERhdGEoKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiByZW1vdmVCdW5kbGUoJHBvc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkKCQl7CgkJCSRidW5kbGUgPSBuZXcgTU1fQnVuZGxlKCRwb3N0WyJpZCJdLCBmYWxzZSk7CgkJCSRyZXN1bHQgPSAkYnVuZGxlLT5kZWxldGUoKTsKCQkJCgkJCWlmKCRyZXN1bHQpIHsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfSAKCQkJZWxzZSB7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGlzIGJ1bmRsZSBoYXMgZXhpc3RpbmcgYXNzb2NpYXRpb25zIGFuZCBjYW4ndCBiZSByZW1vdmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBkZWxldGUgYnVuZGxlLiBObyBpZCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc2hvd1B1cmNoYXNlTGlua3MoJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbImFjY2Vzc190eXBlX2lkIl0pICYmIGlzc2V0KCRwb3N0WyJhY2Nlc3NfdHlwZV9uYW1lIl0pKQoJCXsKCQkJJGRhdGEgPSBuZXcgc3RkQ2xhc3MoKTsKCQkJJGRhdGEtPmFjY2Vzc1R5cGVJZCA9ICRwb3N0WyJhY2Nlc3NfdHlwZV9pZCJdOwoJCQkkZGF0YS0+YWNjZXNzVHlwZU5hbWUgPSBzdHJpcHNsYXNoZXMoJHBvc3RbImFjY2Vzc190eXBlX25hbWUiXSk7CgkJCQoJCQlpZihpc3NldCgkcG9zdFsicHJvZHVjdF9pZHMiXSkgJiYgIWVtcHR5KCRwb3N0WyJwcm9kdWN0X2lkcyJdKSkKCQkJewoJCQkJJGRhdGEtPnByb2R1Y3RJZHMgPSBleHBsb2RlKCIsIiwgJHBvc3RbInByb2R1Y3RfaWRzIl0pOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJGRhdGEtPnByb2R1Y3RJZHMgPSBhcnJheSgpOwoJCQl9CgkJCQoJCQkkY29udGVudCA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvIi5NTV9NT0RVTEVfQlVORExFUy4iLiIuTU1fTU9EVUxFX1BVUkNIQVNFX0xJTktTLiIuZGlhbG9nLnBocCIsICRkYXRhKTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkY29udGVudCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkJ1bmRsZSBJRCBhbmQgbmFtZSBhcmUgcmVxdWlyZWQgdG8gZGlzcGxheSBwdXJjaGFzZSBsaW5rcyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KfQo=', 0, '2018-11-21 06:38:54'),
(190, 'preview', 'Y2xhc3MgTU1fUHJldmlldwp7Cglwcml2YXRlICRhY2Nlc3NUYWdzID0gYXJyYXkoKTsKCXByaXZhdGUgJHVzZXI7Cglwcml2YXRlICRkYXlzID0wOwoJcHJpdmF0ZSAkbWVtYmVyVHlwZUlkPTA7Cglwcml2YXRlICRhY2Nlc3NUYWdBcHBsaWVkPWFycmF5KCk7CgkKCQogCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpe30KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCR1c2VySWQsICRkYXlzPTAsICRtZW1iZXJUeXBlSWQ9bnVsbCwgJGFjY2Vzc1RhZ3M9bnVsbCkKCXsKCQkkdXNlck9iaiA9IG5ldyBNTV9Vc2VyKCR1c2VySWQpOwoJCSR1c2VyT2JqLT5zZXRJZCgkdXNlcklkKTsKCQkkdXNlck9iai0+c2V0TWVtYmVyc2hpcElkKCRtZW1iZXJUeXBlSWQpOwoJCSR1c2VyT2JqLT5zZXRGaXJzdE5hbWUoIkFkbWluIik7CgkJJHVzZXJPYmotPnNldExhc3ROYW1lKCJUZXN0Iik7CgkJJHVzZXJPYmotPnNldFBob25lKCIoNTU1KSA1NTUtNTU1NSIpOwoJCSR1c2VyT2JqLT5zZXRFbWFpbCgic2FtcGxlQHRlc3QuY29tIik7CgkJJHVzZXJPYmotPnNldFBhc3N3b3JkKCJhZG1pbjEyMzEiKTsKCQkkdXNlck9iai0+c2V0VXNlcm5hbWUoInNhbXBsZXVzZXJuYW1lIik7CgkJJHVzZXJPYmotPnNldFN0YXR1cygiMSIpOwoJCSR1c2VyT2JqLT5zZXRCaWxsaW5nQWRkcmVzcygiMTIzIEZha2UgU3QuIik7CgkJJHVzZXJPYmotPnNldEJpbGxpbmdDaXR5KCJOb3doZXJlIik7CgkJJHVzZXJPYmotPnNldEJpbGxpbmdTdGF0ZSgiVFgiKTsKCQkkdXNlck9iai0+c2V0QmlsbGluZ1ppcENvZGUoIjU1NTU1Iik7CgkJJHVzZXJPYmotPnNldEJpbGxpbmdDb3VudHJ5KE1NX0NvdW50cnlVdGlsczo6JERGTFRfQ09VTlRSWV9JU08pOwoJCSR1c2VyT2JqLT5zZXRTaGlwcGluZ0FkZHJlc3MoIjEyMyBGYWtlIFN0LiIpOwoJCSR1c2VyT2JqLT5zZXRTaGlwcGluZ0NpdHkoIk5vd2hlcmUiKTsKCQkkdXNlck9iai0+c2V0U2hpcHBpbmdTdGF0ZSgiVFgiKTsKCQkkdXNlck9iai0+c2V0U2hpcHBpbmdaaXBDb2RlKCI1NTU1NSIpOwoJCSR1c2VyT2JqLT5zZXRTaGlwcGluZ0NvdW50cnkoTU1fQ291bnRyeVV0aWxzOjokREZMVF9DT1VOVFJZX0lTTyk7CgkJJHVzZXJPYmotPnZhbGlkYXRlKCk7CgkJJHRoaXMtPnVzZXIgPSAkdXNlck9iajsKCQkKCQkkdGhpcy0+YWNjZXNzVGFncyA9IChpc19hcnJheSgkYWNjZXNzVGFncykpP2FycmF5X2tleXMoJGFjY2Vzc1RhZ3MpOmFycmF5KCk7CgkJJHRoaXMtPmFjY2Vzc1RhZ0FwcGxpZWQgPSAkYWNjZXNzVGFnczsKCQkkdGhpcy0+ZGF5cyA9ICRkYXlzOwoJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfUFJFVklFV19NT0RFLCBzZXJpYWxpemUoJHRoaXMpKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXREYXRhKCkKCXsKCQlnbG9iYWwgJGN1cnJlbnRfdXNlcjsKCQkkcHJldmlld09iaiA9IHVuc2VyaWFsaXplKE1NX1Nlc3Npb246OnZhbHVlKE1NX1NFU1NJT046OiRLRVlfUFJFVklFV19NT0RFKSk7CgkJJG1lbWJlclR5cGVMaXN0ID0gTU1fTWVtYmVyc2hpcExldmVsOjpnZXRNZW1iZXJzaGlwTGV2ZWxQb3N0QWNjZXNzKCk7CgkKCQlpZihpc19vYmplY3QoJHByZXZpZXdPYmopKQoJCXsJCgkJCXJldHVybiAkcHJldmlld09iajsKCQl9CgkJaWYoaXNfYXJyYXkoJG1lbWJlclR5cGVMaXN0KSkKCQl7CgkJCSRtZW1iZXJUeXBlSWQgPSBrZXkoJG1lbWJlclR5cGVMaXN0KTsKCQl9IAoJCQoJCSRvYmogPSBuZXcgTU1fUHJldmlldygpOwoJCSRvYmotPnNldERhdGEoJGN1cnJlbnRfdXNlci0+SUQsIDAsICRtZW1iZXJUeXBlSWQpOwoJCSRwcmV2aWV3T2JqID0gdW5zZXJpYWxpemUoTU1fU2Vzc2lvbjo6dmFsdWUoTU1fU0VTU0lPTjo6JEtFWV9QUkVWSUVXX01PREUpKTsKCQlpZihpc19vYmplY3QoJHByZXZpZXdPYmopKQoJCXsKCQkJcmV0dXJuICRwcmV2aWV3T2JqOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY2xlYXJQcmV2aWV3TW9kZSgpCgl7CgkJTU1fU2Vzc2lvbjo6Y2xlYXIoTU1fU0VTU0lPTjo6JEtFWV9QUkVWSUVXX01PREUpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0QXBwbGllZERheXMoJGFjY2Vzc1RhZ0lkKQoJewoJCWlmKGlzc2V0KCR0aGlzLT5hY2Nlc3NUYWdBcHBsaWVkWyRhY2Nlc3NUYWdJZF0pKSAKCQl7CgkJCXJldHVybiAkdGhpcy0+YWNjZXNzVGFnQXBwbGllZFskYWNjZXNzVGFnSWRdOwoJCX0KCQkKCQlyZXR1cm4gMDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFVzZXIoKQoJewoJCXJldHVybiAkdGhpcy0+dXNlcjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldERheXMoKQoJewoJCXJldHVybiAkdGhpcy0+ZGF5czsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEJ1bmRsZXMoKQoJewoJCXJldHVybiAkdGhpcy0+YWNjZXNzVGFnczsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBJZCgpCgl7CgkJJHVzZXIgPSAkdGhpcy0+dXNlcjsKCQlyZXR1cm4gJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpOwoJfQp9Cg==', 0, '2018-11-21 06:38:54');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(191, 'acapi', 'Y2xhc3MgTU1fQUNBUEkKewoJcHJvdGVjdGVkICR2ZXJzaW9uID0gJzEuMCc7Cglwcm90ZWN0ZWQgJGVycm9yQ29kZTsKCXByb3RlY3RlZCAkZXJyb3JNZXNzYWdlOwoKCS8qKgoJICogQVBJIGxvY2F0aW9uIG9uIHRoZSBzZXJ2ZXIKCSAqLwoJcHJvdGVjdGVkICRhcGlVcmw7CgoJLyoqCgkgKiBVc2VyIEFQSSBLZXkgc28gd2Ugb25seSBoYXZlIHRvIGxvZyBpbiBvbmNlIHBlciBjbGllbnQgaW5zdGFudGlhdGlvbgoJICovCglwcm90ZWN0ZWQgJGFwaUtleTsKCgkvKioKCSAqIERlZmF1bHQgdG8gYSAzMDAgc2Vjb25kIHRpbWVvdXQgb24gc2VydmVyIGNhbGxzCgkgKi8KCXByb3RlY3RlZCAkdGltZW91dCA9IDMwMDsgCgoJLyoqCgkgKiBDb25uZWN0IHRvIHRoZSBBY3RpdmVDYW1wYWlnbiBBUEkgZm9yIGEgZ2l2ZW4gbGlzdC4KCSAqIAoJICogQHBhcmFtIHN0cmluZyAkYXBpVXJsIFlvdXIgQWN0aXZlQ2FtcGFpZ24gYXBpIHVybAoJICogQHBhcmFtIHN0cmluZyAkYXBpS2V5IFlvdXIgQWN0aXZlQ2FtcGFpZ24gQVBJIGtleQoJICogQHBhcmFtIGludCAkdGltZW91dCBzZWNvbmRzIHRpbWVvdXQgb24gc2VydmVyIGNhbGxzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkYXBpVXJsID0gbnVsbCwgJGFwaUtleSA9IG51bGwsICR0aW1lb3V0ID0gbnVsbCkKCXsKCQlpZiAoJGFwaVVybCAhPT0gbnVsbCkKCQkJJHRoaXMtPnNldEFwaVVybCgkYXBpVXJsKTsKCQlpZiAoJGFwaUtleSAhPT0gbnVsbCkKCQkJJHRoaXMtPnNldEFwaUtleSgkYXBpS2V5KTsKCQlpZiAoJHRpbWVvdXQgIT09IG51bGwpCgkJCSR0aGlzLT5zZXRUaW1lb3V0KCR0aW1lb3V0KTsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0VmVyc2lvbigpCgl7CgkJcmV0dXJuICR0aGlzLT52ZXJzaW9uOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRWZXJzaW9uKCR2ZXJzaW9uKQoJewoJCSR0aGlzLT52ZXJzaW9uID0gJHZlcnNpb247CgkJcmV0dXJuICR0aGlzOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRFcnJvckNvZGUoKQoJewoJCXJldHVybiAkdGhpcy0+ZXJyb3JDb2RlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRFcnJvckNvZGUoJGVycm9yQ29kZSkKCXsKCQkkdGhpcy0+ZXJyb3JDb2RlID0gJGVycm9yQ29kZTsKCQlyZXR1cm4gJHRoaXM7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldEVycm9yTWVzc2FnZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5lcnJvck1lc3NhZ2U7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldEVycm9yTWVzc2FnZSgkZXJyb3JNZXNzYWdlKQoJewoJCSR0aGlzLT5lcnJvck1lc3NhZ2UgPSAkZXJyb3JNZXNzYWdlOwoJCXJldHVybiAkdGhpczsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0QXBpVXJsKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFwaVVybDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0QXBpVXJsKCRhcGlVcmwpCgl7CgkJJHRoaXMtPmFwaVVybCA9ICRhcGlVcmw7CgkJcmV0dXJuICR0aGlzOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRBcGlLZXkoKQoJewoJCXJldHVybiAkdGhpcy0+YXBpS2V5OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBcGlLZXkoJGFwaUtleSkKCXsKCQkkdGhpcy0+YXBpS2V5ID0gJGFwaUtleTsKCQlyZXR1cm4gJHRoaXM7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGdldFRpbWVvdXQoKQoJewoJCXJldHVybiAkdGhpcy0+dGltZW91dDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0VGltZW91dCgkdGltZW91dCkKCXsKCQkkdGhpcy0+dGltZW91dCA9IChpbnQpJHRpbWVvdXQ7CgkJcmV0dXJuICR0aGlzOwoJfQoKCS8qKgoJICogR2V0IHVzZXIgaW5mbyBmcm9tIEFjdGl2ZUNhbXBhaWduCgkgKgoJICogQGxpbmsgaHR0cDovL3d3dy5hY3RpdmVjYW1wYWlnbi5jb20vYXBpL2V4YW1wbGUucGhwP2NhbGw9Y29udGFjdF92aWV3X2VtYWlsCgkgKgoJICogQHBhcmFtIHN0cmluZyAkZW1haWwgRW1haWwgYWRkcmVzcwoJICogQHJldHVybiBtaXhlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q29udGFjdCgkZW1haWwpCgl7CgkJc3RhdGljICRyZXNwb25zZSA9IGFycmF5KCk7CgkJaWYgKCFpc3NldCgkcmVzcG9uc2VbJGVtYWlsXSkpCgkJCSRyZXNwb25zZVskZW1haWxdID0gJHRoaXMtPmNhbGxTZXJ2ZXIoJ2NvbnRhY3Rfdmlld19lbWFpbCcsIGFycmF5KCdlbWFpbCcgPT4gJGVtYWlsKSk7Ci8vZXJyb3JfbG9nKCJDT05UQUNUW3skZW1haWx9XTogIi5wcmludF9yKCRyZXNwb25zZVskZW1haWxdLCB0cnVlKSk7CgkJcmV0dXJuICRyZXNwb25zZVskZW1haWxdOwoJfQoKCS8qKgoJICogUmVtb3ZlIHRhZ3MKCSAqCgkgKiBAbGluayBodHRwOi8vd3d3LmFjdGl2ZWNhbXBhaWduLmNvbS9hcGkvZXhhbXBsZS5waHA/Y2FsbD1jb250YWN0X3RhZ19yZW1vdmUKCSAqCgkgKiBAcGFyYW0gc3RyaW5nICRlbWFpbCBFbWFpbCBhZGRyZXNzCgkgKiBAcGFyYW0gbWl4ZWQgJHRhZ3MgTGlzdCBvZiB0YWdzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB0YWdSZW1vdmUoJGVtYWlsLCAkdGFncykKCXsKCQkkdGFncyA9ICFpc19hcnJheSgkdGFncykgPyBleHBsb2RlKCcsJywgJHRhZ3MpIDogJHRhZ3M7CgkJJHJlc3VsdCA9ICR0aGlzLT5nZXRDb250YWN0KCRlbWFpbCk7CgkJJGNsZWFuVGFncyA9IGFycmF5KCk7CgkJaWYgKCRyZXN1bHQgJiYgaXNzZXQoJHJlc3VsdFsndGFncyddKSkgewoJCQkvLyByZW1vdmUgb25seSB0aG9zZSB0YWdzIGF0dGFjaGVkIHRvIHVzZXIKCQkJZm9yZWFjaCAoJHJlc3VsdFsndGFncyddIGFzICR0YWcpIHsKCQkJCWlmIChpbl9hcnJheSgkdGFnLCAkdGFncykpCgkJCQkJJGNsZWFuVGFnc1tdID0gJHRhZzsKCQkJfQoJCX0KCgkJaWYgKCEkY2xlYW5UYWdzKQoJCQlyZXR1cm4gZmFsc2U7CgoJCSRwYXJhbXMgPSBhcnJheSgKCQkJJ2VtYWlsJyA9PiAkZW1haWwsCgkJCSd0YWdzJyA9PiBpbXBsb2RlKCcsICcsICRjbGVhblRhZ3MpLAoJCSk7CgkJcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCdjb250YWN0X3RhZ19yZW1vdmUnLCAkcGFyYW1zLCB0cnVlKTsKCX0KCgkvKioKCSAqIFJldHJpZXZlIGFsbCBvZiB0aGUgbGlzdHMgZGVmaW5lZCBmb3IgeW91ciB1c2VyIGFjY291bnQKCSAqCgkgKiBAbGluayBodHRwOi8vd3d3LmFjdGl2ZWNhbXBhaWduLmNvbS9hcGkvZXhhbXBsZS5waHA/Y2FsbD1saXN0X2xpc3QKCSAqCgkgKiBAcGFyYW0gYXJyYXkgJGZpbHRlcnMgYSBoYXNoIG9mIGZpbHRlcnMgdG8gYXBwbHkgdG8gdGhpcyBxdWVyeSAtIGFsbCBhcmUgb3B0aW9uYWw6CgkJc3RyaW5nIGlkcyBvcHRpb25hbCAtIEEgY29tbWEtc2VwYXJhdGVkIGxpc3Qgb2Ygc3Vic2NyaXB0aW9uIGZvcm0gSUQncyBvZiBsaXN0cyB5b3Ugd2lzaCB0byB2aWV3LiBQYXNzICJhbGwiIHRvIHZpZXcgYWxsIGxpc3RzLiBEZWZhdWx0OiAiYWxsIgoJCXN0cmluZyBmaWx0ZXJzIG9wdGlvbmFsIC0gRmlsdGVyOiBQZXJmb3JtIGEgcGF0dGVybiBtYXRjaCAoTElLRSkgZm9yIExpc3QgTmFtZS4KCQlib29sZWFuIGdsb2JhbF9maWVsZHMgb3B0aW9uYWwgLSBXaGV0aGVyIG9yIG5vdCB0byBpbmNsdWRlIGdsb2JhbCBjdXN0b20gZmllbGRzLiAoc2V0IHRvIHRydWUgZm9yIHllcywgYW5kIGZhbHNlIGZvciBubykuIERlZmF1bHQ6IGZhbHNlCgkJYm9vbGVhbiBmdWxsIG9wdGlvbmFsIC0gV2hldGhlciBvciBub3QgdG8gcmV0dXJuIEFMTCBkYXRhLCBvciBhbiBhYmJyZXZpYXRlZCBwb3J0aW9uIChzZXQgdG8gMSBmb3IgQUxMIGRhdGEsIGFuZCAwIGZvciBhYmJyZXZpYXRlZCkuIERlZmF1bHQ6IGZhbHNlCgkgKiBAcGFyYW0gaW50ICRzdGFydCBvcHRpb25hbCAtIGNvbnRyb2wgcGFnaW5nIG9mIGxpc3RzLCBzdGFydCByZXN1bHRzIGF0IHRoaXMgbGlzdCAjLCBkZWZhdWx0cyB0byAxc3QgcGFnZSBvZiBkYXRhICAocGFnZSAwKQoJICogQHBhcmFtIGludCAkbGltaXQgb3B0aW9uYWwgLSBjb250cm9sIHBhZ2luZyBvZiBsaXN0cywgbnVtYmVyIG9mIGxpc3RzIHRvIHJldHVybiB3aXRoIGVhY2ggY2FsbCwgZGVmYXVsdHMgdG8gMjUgKG1heD0xMDApCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IHdpdGgga2V5cyBsaXN0ZWQgaW4gUmV0dXJuZWQgRmllbGRzIGJlbG93CgkgKiBAcmV0dXJuZiBpbnQgdG90YWwgdGhlIHRvdGFsIG51bWJlciBvZiBsaXN0cyB3aGljaCBtYXRjaGVkIHRoZSBwcm92aWRlZCBmaWx0ZXJzCgkgKiBAcmV0dXJuZiBhcnJheSBkYXRhIHRoZSBsaXN0cyB3aGljaCBtYXRjaGVkIHRoZSBwcm92aWRlZCBmaWx0ZXJzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBsaXN0cygkZmlsdGVycyA9IGFycmF5KCksICRzdGFydCA9IDAsICRsaW1pdCA9IDI1KQoJewoJCSRwYXJhbXMgPSBhcnJheSgpOwoJCSRwYXJhbXNbJ2lkcyddID0gaXNzZXQoJGZpbHRlcnNbJ2lkcyddKSA/ICRmaWx0ZXJzWydpZHMnXSA6ICdhbGwnOwoJCS8vJHBhcmFtc1snc3RhcnQnXSA9ICRzdGFydDsKCQkvLyRwYXJhbXNbJ2xpbWl0J10gPSAkbGltaXQ7CgkJJGxpc3RzID0gYXJyYXkoKTsKCQlpZiAoJHJlc3VsdCA9ICR0aGlzLT5jYWxsU2VydmVyKCdsaXN0X2xpc3QnLCAkcGFyYW1zKSkgewoJCQlmb3JlYWNoICgkcmVzdWx0IGFzICRrZXkgPT4gJHZhbHVlKSB7CgkJCQlpZiAoIWlzX251bWVyaWMoJGtleSkpIAoJCQkJCWNvbnRpbnVlOwoJCQkJJGxpc3RzWyR2YWx1ZVsnaWQnXV0gPSAkdmFsdWVbJ25hbWUnXTsgCgkJCX0KCQl9CgkJcmV0dXJuICRsaXN0czsKCX0KCgkvKioKCSAqIFN1YnNjcmliZSB0aGUgcHJvdmlkZWQgZW1haWwgdG8gYSBsaXN0LgoJICoKCSAqIEBsaW5rIGh0dHA6Ly93d3cuYWN0aXZlY2FtcGFpZ24uY29tL2FwaS9leGFtcGxlLnBocD9jYWxsPWNvbnRhY3Rfc3luYwoJICoKCSAqIEBwYXJhbSBzdHJpbmcgJGlkIHRoZSBsaXN0IGlkIHRvIGNvbm5lY3QgdG8uIEdldCBieSBjYWxsaW5nIGxpc3RzKCkKCSAqIEBwYXJhbSBzdHJpbmcgJGVtYWlsIHRoZSBlbWFpbCBhZGRyZXNzIHRvIHN1YnNjcmliZQoJICogQHBhcmFtIGFycmF5ICR2YXJzIG9wdGlvbmFsIG1lcmdlcyBmb3IgdGhlIGVtYWlsIChGTkFNRSwgTE5BTUUsIGV0Yy4pIChzZWUgZXhhbXBsZXMgYmVsb3cgZm9yIGhhbmRsaW5nICJibGFuayIgYXJyYXlzKS4gTm90ZSB0aGF0IGEgbWVyZ2UgZmllbGQgY2FuIG9ubHkgaG9sZCB1cCB0byAyNTUgYnl0ZXMuIEFsc28sIHRoZXJlIGFyZSBhIGZldyAic3BlY2lhbCIga2V5czoKCSAqIEBwYXJhbSBib29sICR1cGRhdGVfZXhpc3Rpbmcgb3B0aW9uYWwgZmxhZyB0byBjb250cm9sIHdoZXRoZXIgYSBleGlzdGluZyBzdWJzY3JpYmVycyBzaG91bGQgYmUgdXBkYXRlZCBpbnN0ZWFkIG9mIHRocm93aW5nIGFuZCBlcnJvciwgZGVmYXVsdHMgdG8gZmFsc2UKCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvbiBzdWNjZXNzLCBmYWxzZSBvbiBmYWlsdXJlLgoJICovCglwdWJsaWMgZnVuY3Rpb24gbGlzdFN1YnNjcmliZSgkaWQsICRlbWFpbCwgJHZhcnMgPSBudWxsLCAkdXBkYXRlX2V4aXN0aW5nID0gZmFsc2UpCgl7CgkJJHBhcmFtcyA9IGFycmF5KAoJCQknZW1haWwnID0+ICRlbWFpbCwKCQkJJ3BbJy4kaWQuJ10nID0+ICRpZCwKCQkJJ3N0YXR1c1snLiRpZC4nXScgPT4gMSwgLy8gMSA9IGFjdGl2ZSwgMiB1bnN1YnNjcmliZWQKCQkpOwoJCWlmICgkdXBkYXRlX2V4aXN0aW5nKSB7CgkJCSRwYXJhbXMgPSAkdGhpcy0+bWVyZ2VWYXJzKCRwYXJhbXMsICR2YXJzKTsKCQkJaWYgKCRwYXJhbXNbJ3VudGFncyddKSB7CgkJCQkkdGhpcy0+dGFnUmVtb3ZlKCRlbWFpbCwgJHBhcmFtc1sndW50YWdzJ10pOwovL2Vycm9yX2xvZygnVU5UQUdTOiAnLnByaW50X3IoJHBhcmFtc1sndW50YWdzJ10sdHJ1ZSkpOwoJCQkJdW5zZXQoJHBhcmFtc1sndW50YWdzJ10pOwoJCQl9CgkJfQoJCXJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcignY29udGFjdF9zeW5jJywgJHBhcmFtcywgdHJ1ZSk7Cgl9CgoJcHJvdGVjdGVkIGZ1bmN0aW9uIG1lcmdlVmFycyhBcnJheSAkZGF0YSwgQXJyYXkgJHZhcnMpCgl7CgkJaWYgKGlzc2V0KCR2YXJzWydGTkFNRSddKSkgewoJCQkkZGF0YVsnZmlyc3RfbmFtZSddID0gJHZhcnNbJ0ZOQU1FJ107CgkJCXVuc2V0KCR2YXJzWydGTkFNRSddKTsKCQl9CgkJaWYgKGlzc2V0KCR2YXJzWydMTkFNRSddKSkgewoJCQkkZGF0YVsnbGFzdF9uYW1lJ10gPSAkdmFyc1snTE5BTUUnXTsKCQkJdW5zZXQoJHZhcnNbJ0xOQU1FJ10pOwoJCX0KCgkJJGRhdGFbJ3RhZ3MnXSA9IGFycmF5KCk7CgkJJGRhdGFbJ3VudGFncyddID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkdmFycyBhcyAka2V5ID0+ICR2YWx1ZSkgewoJCQkkcHJlZml4ID0gKCR2YWx1ZSkgPyAnJyA6ICd1bic7CgkJCSRkYXRhWyRwcmVmaXguJ3RhZ3MnXVtdID0gJGtleTsKCQl9CgoJCXJldHVybiAkZGF0YTsKCX0KCgkvKioKCSAqIFVuc3Vic2NyaWJlIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzIGZyb20gdGhlIGxpc3QKCSAqCgkgKiBAbGluayBodHRwOi8vd3d3LmFjdGl2ZWNhbXBhaWduLmNvbS9hcGkvZXhhbXBsZS5waHA/Y2FsbD1jb250YWN0X3N5bmMKCSAqCgkgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCgkgKiBAcGFyYW0gc3RyaW5nICRlbWFpbCB0aGUgZW1haWwgYWRkcmVzcyB0byB1bnN1YnNjcmliZSAgT1IgdGhlIGVtYWlsICJpZCIgcmV0dXJuZWQgZnJvbSBsaXN0TWVtYmVySW5mbywgV2ViaG9va3MsIGFuZCBDYW1wYWlnbnMKCSAqIEBwYXJhbSBib29sZWFuICRkZWxldGVfbWVtYmVyIGZsYWcgdG8gY29tcGxldGVseSBkZWxldGUgdGhlIG1lbWJlciBmcm9tIHlvdXIgbGlzdCBpbnN0ZWFkIG9mIGp1c3QgdW5zdWJzY3JpYmluZywgZGVmYXVsdCB0byBmYWxzZQoJICogQHJldHVybiBib29sZWFuIHRydWUgb24gc3VjY2VzcywgZmFsc2Ugb24gZmFpbHVyZS4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGxpc3RVbnN1YnNjcmliZSgkaWQsICRlbWFpbCwgJGRlbGV0ZV9tZW1iZXIgPSBmYWxzZSkKCXsKCQkkcmVzdWx0ID0gJHRoaXMtPmdldENvbnRhY3QoJGVtYWlsKTsKCQlpZiAoISRyZXN1bHQgfHwgIWlzc2V0KCRyZXN1bHRbJ2xpc3RzJ11bJGlkXSkpIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCgkJJHBhcmFtcyA9IGFycmF5KAoJCQknZW1haWwnID0+ICRlbWFpbCwKCQkJJ3BbJy4kaWQuJ10nID0+ICRpZCwKCQkJJ3N0YXR1c1snLiRpZC4nXScgPT4gMiwgLy8gMSA9IGFjdGl2ZSwgMiB1bnN1YnNjcmliZWQKCQkpOwoJCXJldHVybiAkdGhpcy0+Y2FsbFNlcnZlcignY29udGFjdF9zeW5jJywgJHBhcmFtcywgdHJ1ZSk7Cgl9CgoJLyoqCgkgKiBFZGl0IHRoZSBlbWFpbCBhZGRyZXNzLCBtZXJnZSBmaWVsZHMsIGFuZCBpbnRlcmVzdCBncm91cHMgZm9yIGEgbGlzdCBtZW1iZXIuIElmIHlvdSBhcmUgZG9pbmcgYSBiYXRjaCB1cGRhdGUgb24gbG90cyBvZiB1c2VycywgCgkgKgoJICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQoJICogQHBhcmFtIHN0cmluZyAkZW1haWwgdGhlIGN1cnJlbnQgZW1haWwgYWRkcmVzcyBvZiB0aGUgbWVtYmVyIHRvIHVwZGF0ZSBPUiB0aGUgImlkIiBmb3IgdGhlIG1lbWJlciByZXR1cm5lZCBmcm9tIGxpc3RNZW1iZXJJbmZvLCBXZWJob29rcywgYW5kIENhbXBhaWducwoJICogQHBhcmFtIGFycmF5ICR2YXJzIGFycmF5IG9mIG5ldyBmaWVsZCB2YWx1ZXMgdG8gdXBkYXRlIHRoZSBtZW1iZXIgd2l0aC4gIFNlZSB2YXJzIGluIGxpc3RTdWJzY3JpYmUoKSBmb3IgZGV0YWlscy4KCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIG9uIHN1Y2Nlc3MsIGZhbHNlIG9uIGZhaWx1cmUuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBsaXN0VXBkYXRlTWVtYmVyKCRpZCwgJGVtYWlsLCAkdmFycykKCXsKCQlyZXR1cm4gJHRoaXMtPmxpc3RTdWJzY3JpYmUoJGlkLCAkZW1haWwsICR2YXJzLCB0cnVlKTsKCX0KCgkvKioKCSAqIEFkZCBhIG5ldyBtZXJnZSB0YWcgdG8gYSBnaXZlbiBsaXN0CgkgKgoJICogQHBhcmFtIHN0cmluZyAkaWQgdGhlIGxpc3QgaWQgdG8gY29ubmVjdCB0by4gR2V0IGJ5IGNhbGxpbmcgbGlzdHMoKQoJICogQHBhcmFtIHN0cmluZyAkdGFnIFRoZSBtZXJnZSB0YWcgdG8gYWRkLCBlLmcuIEZOQU1FCgkgKiBAcGFyYW0gc3RyaW5nICRuYW1lIFRoZSBsb25nIGRlc2NyaXB0aW9uIG9mIHRoZSB0YWcgYmVpbmcgYWRkZWQsIHVzZWQgZm9yIHVzZXIgZGlzcGxheXMKCSAqIEBwYXJhbSBhcnJheSAkb3B0aW9ucyBvcHRpb25hbCBWYXJpb3VzIG9wdGlvbnMgZm9yIHRoaXMgbWVyZ2UgdmFyLiA8ZW0+bm90ZTo8L2VtPiBmb3IgaGlzdG9yaWNhbCBwdXJwb3NlcyB0aGlzIGNhbiBhbHNvIHRha2UgYSAiYm9vbGVhbiIKCQkJc3RyaW5nIGZpZWxkX3R5cGUgb3B0aW9uYWwgb25lIG9mOiB0ZXh0LCBudW1iZXIsIHJhZGlvLCBkcm9wZG93biwgZGF0ZSwgYWRkcmVzcywgcGhvbmUsIHVybCwgaW1hZ2V1cmwgLSBkZWZhdWx0cyB0byB0ZXh0CgkJCWJvb2xlYW4gcmVxIG9wdGlvbmFsIGluZGljYXRlcyB3aGV0aGVyIHRoZSBmaWVsZCBpcyByZXF1aXJlZCAtIGRlZmF1bHRzIHRvIGZhbHNlCgkJCWJvb2xlYW4gcHVibGljIG9wdGlvbmFsIGluZGljYXRlcyB3aGV0aGVyIHRoZSBmaWVsZCBpcyBkaXNwbGF5ZWQgaW4gcHVibGljIC0gZGVmYXVsdHMgdG8gdHJ1ZQoJCQlib29sZWFuIHNob3cgb3B0aW9uYWwgaW5kaWNhdGVzIHdoZXRoZXIgdGhlIGZpZWxkIGlzIGRpc3BsYXllZCBpbiB0aGUgYXBwJ3MgbGlzdCBtZW1iZXIgdmlldyAtIGRlZmF1bHRzIHRvIHRydWUKCQkJc3RyaW5nIGRlZmF1bHRfdmFsdWUgb3B0aW9uYWwgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBmaWVsZC4gU2VlIGxpc3RTdWJzY3JpYmUoKSBmb3IgZm9ybWF0dGluZyBpbmZvLiBEZWZhdWx0cyB0byBibGFuawoJCQlhcnJheSBjaG9pY2VzIG9wdGlvbmFsIGtpbmQgb2YgLSBhbiBhcnJheSBvZiBzdHJpbmdzIHRvIHVzZSBhcyB0aGUgY2hvaWNlcyBmb3IgcmFkaW8gYW5kIGRyb3Bkb3duIHR5cGUgZmllbGRzCgoJICogQHJldHVybiBib29sIHRydWUgaWYgdGhlIHJlcXVlc3Qgc3VjY2VlZHMsIG90aGVyd2lzZSBhbiBlcnJvciB3aWxsIGJlIHRocm93bgoJICovCglwdWJsaWMgZnVuY3Rpb24gbGlzdE1lcmdlVmFyQWRkKCRpZCwgJHRhZywgJG5hbWUsICRvcHRpb25zID0gYXJyYXkoKSkKCXsKCQkkcGFyYW1zID0gYXJyYXkoKTsKCQlyZXR1cm4gJHBhcmFtczsKCQkkcGFyYW1zWydpZCddID0gJGlkOwoJCSRwYXJhbXNbJ3RhZyddID0gJHRhZzsKCQkkcGFyYW1zWyduYW1lJ10gPSAkbmFtZTsKCQkkcGFyYW1zWydvcHRpb25zJ10gPSAkb3B0aW9uczsKCQlyZXR1cm4gJHRoaXMtPmNhbGxTZXJ2ZXIoJ2xpc3RNZXJnZVZhckFkZCcsICRwYXJhbXMpOwoJfQoKCS8qKgoJICogR2V0IHRoZSBsaXN0IG9mIG1lcmdlIHRhZ3MgZm9yIGEgZ2l2ZW4gbGlzdCwgaW5jbHVkaW5nIHRoZWlyIG5hbWUsIHRhZywgYW5kIHJlcXVpcmVkIHNldHRpbmcKCSAqCgkgKiBAcGFyYW0gc3RyaW5nICRpZCB0aGUgbGlzdCBpZCB0byBjb25uZWN0IHRvLiBHZXQgYnkgY2FsbGluZyBsaXN0cygpCgkgKiBAcmV0dXJuIGFycmF5IGxpc3Qgb2YgbWVyZ2UgdGFncyBmb3IgdGhlIGxpc3QKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGxpc3RNZXJnZVZhcnMoJGlkKQoJewoJCSRwYXJhbXMgPSBhcnJheSgpOwoJCXJldHVybiAkcGFyYW1zOwoJCSRwYXJhbXNbJ2lkJ10gPSAkaWQ7CgkJcmV0dXJuICR0aGlzLT5jYWxsU2VydmVyKCdsaXN0TWVyZ2VWYXJzJywgJHBhcmFtcyk7Cgl9CgoJLyoqCgkgKiBBY3R1YWxseSBjb25uZWN0IHRvIHRoZSBzZXJ2ZXIgYW5kIGNhbGwgdGhlIHJlcXVlc3RlZCBtZXRob2RzLCBwYXJzaW5nIHRoZSByZXN1bHQKCSAqIFlvdSBzaG91bGQgbmV2ZXIgaGF2ZSB0byBjYWxsIHRoaXMgZnVuY3Rpb24gbWFudWFsbHkKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGNhbGxTZXJ2ZXIoJG1ldGhvZCwgJHBhcmFtcywgJGlzUG9zdCA9IGZhbHNlKQoJewovL2Vycm9yX2xvZygkbWV0aG9kLicgPSAnLnByaW50X3IoJHBhcmFtcywgdHJ1ZSkpOwoJCSRxdWVyeSA9IGFycmF5KAoJCQknYXBpX2tleScgPT4gJHRoaXMtPmdldEFQSUtleSgpLAoJCQknYXBpX2FjdGlvbicgPT4gJG1ldGhvZCwKCQkJJ2FwaV9vdXRwdXQnID0+ICdzZXJpYWxpemUnLCAvLyBqc29uCgkJKTsKCQkkcG9zdERhdGEgPSAkcXVlcnk7CgoJCWZvcmVhY2ggKCRwYXJhbXMgYXMgJGtleSA9PiAkdmFsdWUpIHsKCQkJaWYgKCRpc1Bvc3QpCgkJCQkkcG9zdERhdGFbJGtleV0gPSAkdmFsdWU7CgkJCWVsc2UKCQkJCSRxdWVyeVska2V5XSA9ICR2YWx1ZTsKCQl9CgoJCSR0aGlzLT5zZXRFcnJvck1lc3NhZ2UoJycpOwoJCSR0aGlzLT5zZXRFcnJvckNvZGUoJycpOwoKCQkkdXJsID0gJHRoaXMtPmdldEFQSVVSTCgpOwoJCS8vIGNsZWFuIHVwIHRoZSB1cmwKCQkkdXJsID0gcnRyaW0oJHVybCwgJy8gJyk7CgoJCWlmICghZnVuY3Rpb25fZXhpc3RzKCdjdXJsX2luaXQnKSkgewoJCQkkdGhpcy0+c2V0RXJyb3JNZXNzYWdlKCdDVVJMIG5vdCBzdXBwb3J0ZWQuIChpbnRyb2R1Y2VkIGluIFBIUCA0LjAuMiknKTsKCQkJJHRoaXMtPnNldEVycm9yQ29kZSgnNDA1Jyk7CgkJCXJldHVybiBmYWxzZTsKCQl9CgoJCS8vIGRlZmluZSBhIGZpbmFsIEFQSSByZXF1ZXN0IC0gR0VUCgkJJGFwaSA9ICR1cmwgLiAnL2FkbWluL2FwaS5waHAnOwoJCWlmICghJGlzUG9zdCkKCQkJJGFwaSAuPSAnPycgLiBodHRwX2J1aWxkX3F1ZXJ5KCRxdWVyeSk7CgoJCSRyZXF1ZXN0ID0gY3VybF9pbml0KCRhcGkpOyAvLyBpbml0aWF0ZSBjdXJsIG9iamVjdAoJCWN1cmxfc2V0b3B0KCRyZXF1ZXN0LCBDVVJMT1BUX0hFQURFUiwgMCk7IC8vIHNldCB0byAwIHRvIGVsaW1pbmF0ZSBoZWFkZXIgaW5mbyBmcm9tIHJlc3BvbnNlCgkJY3VybF9zZXRvcHQoJHJlcXVlc3QsIENVUkxPUFRfUkVUVVJOVFJBTlNGRVIsIDEpOyAvLyBSZXR1cm5zIHJlc3BvbnNlIGRhdGEgaW5zdGVhZCBvZiBUUlVFKDEpCgkJaWYgKCRpc1Bvc3QpIHsKCQkJLy8gVGhpcyBzZWN0aW9uIHRha2VzIHRoZSBpbnB1dCBkYXRhIGFuZCBjb252ZXJ0cyBpdCB0byB0aGUgcHJvcGVyIGZvcm1hdAoJCQljdXJsX3NldG9wdCgkcmVxdWVzdCwgQ1VSTE9QVF9QT1NURklFTERTLCBodHRwX2J1aWxkX3F1ZXJ5KCRwb3N0RGF0YSkpOyAvLyB1c2UgSFRUUCBQT1NUIHRvIHNlbmQgZm9ybSBkYXRhCgkJfQoKCQljdXJsX3NldG9wdCgkcmVxdWVzdCwgQ1VSTE9QVF9GT0xMT1dMT0NBVElPTiwgdHJ1ZSk7CgkJJHJlc3BvbnNlID0gKHN0cmluZyljdXJsX2V4ZWMoJHJlcXVlc3QpOyAvLyBleGVjdXRlIGN1cmwgcG9zdCBhbmQgc3RvcmUgcmVzdWx0cyBpbiAkcmVzcG9uc2UKCQljdXJsX2Nsb3NlKCRyZXF1ZXN0KTsgLy8gY2xvc2UgY3VybCBvYmplY3QKCgkJaWYgKCEkcmVzcG9uc2UpIHsKCQkJJHRoaXMtPnNldEVycm9yTWVzc2FnZSgnTm90aGluZyB3YXMgcmV0dXJuZWQuIERvIHlvdSBoYXZlIGEgY29ubmVjdGlvbiB0byBFbWFpbCBNYXJrZXRpbmcgc2VydmVyPycpOwoJCQkkdGhpcy0+c2V0RXJyb3JDb2RlKCc1MjInKTsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQkvLyBjaGVjayBpZiByZXNwb25zZSBpcyBqc29uCgkJJGpzb25SZXNwb25zZSA9IGpzb25fZGVjb2RlKCRyZXNwb25zZSk7IAoJCQoJCWlmIChqc29uX2xhc3RfZXJyb3IoKSA9PSBKU09OX0VSUk9SX05PTkUpCgkJewoJCQlpZihpc3NldCgkanNvblJlc3BvbnNlLT5yZXN1bHRfbWVzc2FnZSkpCgkJCXsKCQkJCSR0aGlzLT5zZXRFcnJvck1lc3NhZ2UoIkVycm9yIG1lc3NhZ2UgZnJvbSBBY3RpdmVDYW1wYWlnbjogIi4kanNvblJlc3BvbnNlLT5yZXN1bHRfbWVzc2FnZSk7CgkJCQkkdGhpcy0+c2V0RXJyb3JDb2RlKCcwJyk7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJCgkJCSR0aGlzLT5zZXRFcnJvck1lc3NhZ2UoIkVycm9yIG1lc3NhZ2UgZnJvbSBBY3RpdmVDYW1wYWlnbjogIi4kcmVzcG9uc2UpOwoJCQkkdGhpcy0+c2V0RXJyb3JDb2RlKCcwJyk7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJcmV0dXJuIHVuc2VyaWFsaXplKCRyZXNwb25zZSk7Cgl9Cgp9', 0, '2018-11-21 06:38:54'),
(192, 'forgotpasswordform', 'Y2xhc3MgTU1fRm9yZ290UGFzc3dvcmRGb3JtIGV4dGVuZHMgTU1fQWJzdHJhY3RGb3JtCnsKCXB1YmxpYyAkc3VjY2VzcyA9ICIiOwoJCgkvKioKCSAqIERlZmF1bHQgY29uc3RydWN0b3IuIFRha2VzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycwoJICogQHBhcmFtIEFycmF5ICRwYXJhbXMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgZm9ybSBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwYXJhbXM9bnVsbCkKCXsJCgkJaWYoIWlzX251bGwoJHBhcmFtcykpCgkJewoJCQlpZihpc19hcnJheSgkcGFyYW1zKSAmJiBjb3VudCgkcGFyYW1zKSA+IDApCgkJCXsKCQkJCWZvcmVhY2goJHBhcmFtcyBhcyAkaz0+JHYpCgkJCQl7CgkJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJCSQka2V5ID0gJHY7CgkJCQl9CgkJCX0KCQkJCgkJCSR0aGlzLT5pbml0aWFsaXplKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpCgl7CgkJaWYoaXNzZXQoJF9SRVFVRVNUWyJlbWFpbCJdKSkKCQl7CgkJCSRtZW1iZXIgPSBNTV9Vc2VyOjpmaW5kQnlFbWFpbCh0cmltKCRfUkVRVUVTVFsiZW1haWwiXSkpOwoJCQoJCQlpZigkbWVtYmVyLT5pc1ZhbGlkKCkpCgkJCXsgIAkJCQoJICAJCQlNTV9Vc2VyOjpnZW5lcmF0ZUFuZFN0b3JlRm9yZ290UGFzc3dvcmRIYXNoKCRtZW1iZXIpOwoJCQkJCQoJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkkZW1wbG95ZWUgPSBNTV9FbXBsb3llZTo6Z2V0RGVmYXVsdCgpOwoJCQkJJGNvbnRleHQgPSBuZXcgTU1fQ29udGV4dCgkbWVtYmVyLCAkZW1wbG95ZWUpOwoJCQoJCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJCSRlbWFpbC0+c2V0U3ViamVjdChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9GT1JHT1RfUEFTU1dPUkRfU1VCSkVDVCkpOwoJCQkJJGVtYWlsLT5zZXRCb2R5KE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0ZPUkdPVF9QQVNTV09SRF9CT0RZKSk7CgkJCgkJCQkkZW1haWwtPnNldFRvTmFtZSgkbWVtYmVyLT5nZXRGdWxsTmFtZSgpKTsKCQkJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCRtZW1iZXItPmdldEVtYWlsKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJJHJlc3BvbnNlID0gJGVtYWlsLT5zZW5kKCk7CgkJCgkJCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzcG9uc2UpKQoJCQkJewoJCQkJCSR0aGlzLT5lcnJvciA9ICJVbmFibGUgdG8gc2VuZCB5b3VyIHBhc3N3b3JkIHJlc2V0IGxpbmsiOwoJCQkJCQoJCQkJCWlmKGlzc2V0KCRyZXNwb25zZS0+bWVzc2FnZSkgJiYgIWVtcHR5KCRyZXNwb25zZS0+bWVzc2FnZSkpCgkJCQkJewoJCQkJCQkkdGhpcy0+ZXJyb3IgLj0gIjogIi4kcmVzcG9uc2UtPm1lc3NhZ2U7CgkJCQkJfQoJCQkJCQoJCQkJCSR0aGlzLT5lcnJvciAuPSAiLiI7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHRoaXMtPnN1Y2Nlc3MgPSAiSW5zdHJ1Y3Rpb25zIGZvciByZXNldHRpbmcgeW91ciBwYXNzd29yZCBoYXZlIGJlZW4gc2VudCB0byB5b3UuIjsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkdGhpcy0+ZXJyb3IgPSAiSW52YWxpZCBlbWFpbCBhZGRyZXNzLiI7CgkJCX0KCQl9CgkJCgkJJHRoaXMtPmlzVmFsaWQgPSB0cnVlOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgYWxsIG9mIHRoZSBIVE1MIHRoYXQgc2hvdWxkIHNob3cgdXAgYXQgCgkgKiB0aGUgdG9wIG9mIHRoZSBmb3JtIGJhc2VkIG9uIHRoZSB0aGUgY3VycmVudCBjb25maWd1cmF0aW9uLgoJICogQHJldHVybiBTdHJpbmcgaGVhZGVyIEhUTUwgZm9yIHRoZSBjaGVja291dCBmb3JtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcm1IZWFkZXIoKQoJewkJCgkJJGh0bWwgPSAkdGhpcy0+Z2V0SmF2YXNjcmlwdEluY2x1ZGVzKCk7CgkJJGh0bWwgLj0gIjxmb3JtIG1ldGhvZD1cInBvc3RcIj4KIjsKCQlyZXR1cm4gJGh0bWw7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyBhbGwgb2YgdGhlIEhUTUwgdGhhdCBzaG91bGQgc2hvdyB1cCBhdAoJICogdGhlIGJvdHRvbSBvZiB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbi4KCSAqIAoJICogQHJldHVybiBTdHJpbmcgZm9vdGVyIEhUTUwgZm9yIHRoZSBjaGVja291dCBmb3JtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcm1Gb290ZXIoKQoJewoJCSRodG1sID0gIjwvZm9ybT4KIjsKCQkkaHRtbCAuPSAkdGhpcy0+Z2V0SW5pdEphdmFzY3JpcHQoKTsKCQlyZXR1cm4gJGh0bWw7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBpbmNsdWRlIHN0YXRlbWVudHMgZm9yIHJlcXVpcmVkIGphdmFzY3JpcHQgZmlsZXMuCgkgKiBAcmV0dXJuIFN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBqYXZhc2NyaXB0IGZvciBpbmNsdWRpbmcgcmVxdWlyZWQgamF2YXNjcmlwdCBmaWxlcy4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEphdmFzY3JpcHRJbmNsdWRlcygpCgl7CgkJJHZlcnNpb24gPSBNZW1iZXJNb3VzZTo6Z2V0UGx1Z2luVmVyc2lvbigpOwoJCSR1c2VNTUNTUyA9IChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9VU0VfTU1fQ1NTX0ZPUkdPVF9QQVNTV09SRCkgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCQkKCQlpZigkdXNlTU1DU1MpCgkJewoJCQl3cF9lbnF1ZXVlX3N0eWxlKCJtZW1iZXJtb3VzZS1mb3Jnb3QtcGFzc3dvcmQtY3NzIiwgcGx1Z2luc191cmwoTU1fUExVR0lOX05BTUUuIi9yZXNvdXJjZXMvY3NzL3VzZXIvbW0tZm9yZ290cGFzc3dvcmQuY3NzIiksIGFycmF5KCksICR2ZXJzaW9uKTsKCQl9CgkJCgkJd3BfZW5xdWV1ZV9zY3JpcHQoIm1lbWJlcm1vdXNlLWZvcmdvdC1wYXNzd29yZCIsIHBsdWdpbnNfdXJsKE1NX1BMVUdJTl9OQU1FLiIvcmVzb3VyY2VzL2pzL3VzZXIvbW0tZm9yZ290cGFzc3dvcmQuanMiKSwgYXJyYXkoKSwgJHZlcnNpb24sIHRydWUpOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgamF2YXNjcmlwdCB0byBpbml0aWFsaXplIHRoZSBGb3Jnb3QgUGFzc3dvcmQgZm9ybS4gCgkgKiBAcGFyYW0gYXJyYXkgJGRlZmF1bHREYXRhIHRoaXMgY29udGFpbnMgdGhlIGRlZmF1bHQgZGF0YSB1c2VkIHRvIHByZXBvcHVsYXRlIGNlcnRhaW4gZm9ybSBlbGVtZW50cwoJICogQHJldHVybiBTdHJpbmcgdGhhdCBjb250YWlucyB0aGUgamF2YXNjcmlwdCB0byBpbml0aWFsaXplcyB0aGUgY2hlY2tvdXQgZm9ybS4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEluaXRKYXZhc2NyaXB0KCkKCXsKCQlyZXR1cm4gIiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fU2VjdGlvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjaGVja2luZyBpZiB0aGUgY3VycmVudCB1c2VyIAoJICogc2hvdWxkIHNlZSB0aGUgY29udGVudHMgb2YgdGhpcyBzZWN0aW9uIGJhc2VkIG9uIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9zZWN0aW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAneyRjb2RlfScgU21hcnRUYWcgaXMgbm90IHN1cHBvcnRlZCBmb3IgRm9yZ290IFBhc3N3b3JkIGZvcm1zLiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRmllbGQgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGZvcm0gZmllbGQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZmllbGQoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCQoJCWlmKCFpc3NldCgkdHlwZSkpCgkJewoJCQkkdHlwZSA9ICJpbnB1dCI7CgkJfQoJCQoJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQl7CgkJCWNhc2UgImlucHV0IjoKCQkJCWlmKGlzc2V0KCRuYW1lKSkKCQkJCXsKCQkJCQlzd2l0Y2goc3RydG9sb3dlcigkbmFtZSkpCgkJCQkJewoJCQkJCQljYXNlICJlbWFpbCI6CgkJCQkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cImVtYWlsXCIgbmFtZT1cImVtYWlsXCIgY2xhc3M9XCJtbS1maWVsZFwiIC8+IjsKCQkJCQkJCWJyZWFrOwoKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBJbnZhbGlkIG5hbWUgb2YgJ3skbmFtZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IHdpdGggdHlwZSB7JHR5cGV9LiI7CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAnbmFtZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9IHdpdGggdHlwZSB7JHR5cGV9LiI7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCB0eXBlIG9mICd7JHR5cGV9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSI7CgkJCQlicmVhazsKCQl9CgkJCQoJCXJldHVybiAkb3V0cHV0U3RyOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2Vzc2VzIHRoZSBNTV9Gb3JtX0RhdGEgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGRhdGEgZWxlbWVudCBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQgYW5kIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9kYXRhKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAneyRjb2RlfScgU21hcnRUYWcgaXMgbm90IHN1cHBvcnRlZCBmb3IgRm9yZ290IFBhc3N3b3JkIGZvcm1zLiI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fTWVzc2FnZSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhlIAoJICogbWVzc2FnZSBlbGVtZW50IGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZCBhbmQgdGhlIGZvcm0gY29uZmlndXJhdGlvbi4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX21lc3NhZ2UoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCgkJaWYoaXNzZXQoJHR5cGUpKQoJCXsKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCQl7CgkJCQljYXNlICJlcnJvciI6CgkJCQkJaWYoJGZvcm0tPmVycm9yICE9ICIiKQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAiPHAgY2xhc3M9XCJtbS1lcnJvclwiPiIuJGZvcm0tPmVycm9yLiI8L3A+IjsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJzdWNjZXNzIjoKCQkJCQlpZigkZm9ybS0+c3VjY2VzcyAhPSAiIikKCQkJCQl7CgkJCQkJCSRvdXRwdXRTdHIgLj0gIjxwIGNsYXNzPVwibW0tc3VjY2Vzc1wiPiIuJGZvcm0tPnN1Y2Nlc3MuIjwvcD4iOwoJCQkJCX0KCQkJCQlicmVhazsKCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0cjsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAndHlwZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciB7JGNvZGV9IFNtYXJ0VGFnIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fQnV0dG9uIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIAoJICogcmV0dXJuaW5nIHRoZSBhcHByb3ByaWF0ZSBqYXZhc2NyaXB0IHRvIHN1Ym1pdCB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdHlwZSBwYXNzZWQuCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9idXR0b24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCgkJaWYoaXNzZXQoJHR5cGUpKQoJCXsKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCQl7CgkJCQljYXNlICJzdWJtaXQiOgoJCQkJCWlmKCFpc3NldCgkbGFiZWwpKQoJCQkJCXsKCQkJCQkJJGxhYmVsID0gIlN1Ym1pdCI7CgkJCQkJfQoJCQkJCWlmKCFpc3NldCgkY29sb3IpKQoJCQkJCXsKCQkJCQkJJGNvbG9yID0gIiI7CgkJCQkJfQoJCQkJCWlmKCFpc3NldCgkY2xhc3MpKQoJCQkJCXsKCQkJCQkJJGN1c3RvbUNsYXNzID0gIm1tLWJ1dHRvbiB7JGNvbG9yfSI7CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQkkY3VzdG9tQ2xhc3MgPSAkY2xhc3M7CgkJCQkJfQoJCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPVwic3VibWl0XCIgbmFtZT1cInN1Ym1pdFwiIHZhbHVlPVwieyRsYWJlbH1cIiBpZD1cIm1tLXN1Ym1pdC1idXR0b25cIiBjbGFzcz1cInskY3VzdG9tQ2xhc3N9XCIgb25jbGljaz1cInJldHVybiBmb3Jnb3RwYXNzd29yZF9qcy5jaGVja0ZpZWxkcygpO1wiIC8+IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIHR5cGUgb2YgJ3skdHlwZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCQlicmVhazsKCQkJfQoJCQkKCQkJcmV0dXJuICRvdXRwdXRTdHI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3R5cGUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgeyRjb2RlfSBTbWFydFRhZyI7CgkJfQoJCQoJfQp9Cgo=', 0, '2018-11-21 06:38:54'),
(193, 'email', 'Y2xhc3MgTU1fRW1haWwKewoJcHVibGljIHN0YXRpYyAkQlIgPSAiPGJyPiI7CgkKCXByaXZhdGUgJHN1YmplY3Q7Cglwcml2YXRlICRib2R5OwoJcHJpdmF0ZSAkdG9OYW1lOwoJcHJpdmF0ZSAkY2NBZGRyZXNzID0gYXJyYXkoKTsKCXByaXZhdGUgJGNjQWRkcmVzc1N0cmluZ3MgPSBhcnJheSgpOwoJcHJpdmF0ZSAkdG9BZGRyZXNzOwoJcHJpdmF0ZSAkZnJvbU5hbWU7Cglwcml2YXRlICRmcm9tQWRkcmVzczsKCXByaXZhdGUgJGNvbnRleHQ7CiAJCiAJcHVibGljIGZ1bmN0aW9uIHNlbmQoKQogCXsKIAkJJHJlcSA9IGFycmF5KCk7CgogCQlpZihlbXB0eSgkdGhpcy0+dG9BZGRyZXNzKSkgCiAJCXsKIAkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk5vdCBhIHZhbGlkICd0byBhZGRyZXNzJy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsJCiAJCX0KIAkJCiAJCWlmKGVtcHR5KCR0aGlzLT5mcm9tQWRkcmVzcykpIAogCQl7CiAJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJOb3QgYSB2YWxpZCAnZnJvbSBhZGRyZXNzJyBlbWFpbCBhZGRyZXNzLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwkKIAkJfQogCQkKIAkJaWYoZW1wdHkoJHRoaXMtPmZyb21OYW1lKSkgCiAJCXsKIAkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk5vICdmcm9tIG5hbWUnIHN1cHBsaWVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwkKIAkJfQogCQkKIAkJaWYoZW1wdHkoJHRoaXMtPnN1YmplY3QpKSAKIAkJewogCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiU3ViamVjdCBtYXkgbm90IGJlIGVtcHR5LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwkKIAkJfQogCQlpZigkdGhpcy0+Y29udGV4dCBpbnN0YW5jZW9mIE1NX0NvbnRleHQpIAogCQl7CiAJCQkkc3ViamVjdCA9IE1NX1NtYXJ0VGFnVXRpbDo6cHJvY2Vzc0NvbnRlbnQoJHRoaXMtPnN1YmplY3QsICR0aGlzLT5jb250ZXh0KTsKIAkJCSRib2R5ID0gTU1fU21hcnRUYWdVdGlsOjpwcm9jZXNzQ29udGVudCgkdGhpcy0+Ym9keSwgJHRoaXMtPmNvbnRleHQpOyAKIAkJfQogCQllbHNlIAogCQl7CQogCQkJJHN1YmplY3QgPSAkdGhpcy0+c3ViamVjdDsKIAkJCSRib2R5ID0gJHRoaXMtPmJvZHk7CiAJCX0KIAkJCgkJLy8gZXhlY3V0ZSBzaG9ydCBjb2RlcyB0aGF0IGFyZW4ndCBzbWFydCB0YWdzLgoJCSRib2R5ID0gZG9fc2hvcnRjb2RlKCRib2R5KTsKCQkkc3ViamVjdD0gZG9fc2hvcnRjb2RlKCRzdWJqZWN0KTsKCgkJJGhlYWRlcnMgID0gIk1JTUUtVmVyc2lvbjogMS4wXHJcbiI7CgkJJGhlYWRlcnMgLj0gIkNvbnRlbnQtdHlwZTogdGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04XHJcbiI7CgkJCgkJLy8gQWRkaXRpb25hbCBIZWFkZXJzCgkJaWYoaXNfYXJyYXkoJHRoaXMtPmNjQWRkcmVzcykgJiYgY291bnQoJHRoaXMtPmNjQWRkcmVzcyk+MCkKCQl7CgkJCWZvcmVhY2goJHRoaXMtPmNjQWRkcmVzcyBhcyAkZW1haWw9PiRuYW1lKQoJCQl7CgkJCQkkbmFtZSA9IChlbXB0eSgkbmFtZSkpID8gJGVtYWlsIDogJG5hbWU7CgkJCQkkaGVhZGVycyAuPSAiQ2M6IHskbmFtZX0gPHskZW1haWx9PlxyXG4iOwoJCQkJCgkJCQkkdGhpcy0+Y2NBZGRyZXNzU3RyaW5nc1tdID0gJGVtYWlsOwoJCQl9CgkJfQoJCQoJCSRoZWFkZXJzIC49ICJGcm9tOiB7JHRoaXMtPmZyb21OYW1lfSA8eyR0aGlzLT5mcm9tQWRkcmVzc30+XHJcbiI7CgkJCgkJQHdwX21haWwoJHRoaXMtPnRvQWRkcmVzcywgJHN1YmplY3QsIG5sMmJyKCRib2R5KSwgJGhlYWRlcnMsIGFycmF5KCkpOwoJCQoJCS8vIGxvZyBlbWFpbCBiZWluZyBzZW50CgkJaWYoJHRoaXMtPmNvbnRleHQgaW5zdGFuY2VvZiBNTV9Db250ZXh0ICYmICFpc19udWxsKCR0aGlzLT5jb250ZXh0LT5nZXRVc2VyKCkpKQoJCXsKCQkJJHBhcmFtcyA9IGFycmF5KCk7CgkJCSRwYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9FTUFJTF9UT19BRERSRVNTXSA9ICR0aGlzLT50b0FkZHJlc3M7CgkJCSRwYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9FTUFJTF9DQ19BRERSRVNTRVNdID0gKGlzX2FycmF5KCR0aGlzLT5jY0FkZHJlc3NTdHJpbmdzKSAmJiBjb3VudCgkdGhpcy0+Y2NBZGRyZXNzU3RyaW5ncyk+MCkgPyBpbXBsb2RlKCIsICIsICR0aGlzLT5jY0FkZHJlc3NTdHJpbmdzKSA6ICIiOwoJCQkkcGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fRU1BSUxfRlJPTV9BRERSRVNTXSA9ICR0aGlzLT5mcm9tQWRkcmVzczsKCQkJJHBhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0VNQUlMX1NVQkpFQ1RdID0gJHN1YmplY3Q7CgkJCQoJCQkvLyByZW1vdmUgcGFzc3dvcmQgZnJvbSBlbWFpbCBmb3Igc2VjdXJpdHkgcmVhc29ucwoJCQkkdGhpcy0+Ym9keSA9IHN0cl9pcmVwbGFjZSgiW21tX21lbWJlcl9kYXRhIG5hbWU9J3Bhc3N3b3JkJ10iLCAiIyMgcGFzc3dvcmQgaGlkZGVuIGZvciBzZWN1cml0eSAjIyIsICR0aGlzLT5ib2R5KTsKCQkJJHRoaXMtPmJvZHkgPSBzdHJfaXJlcGxhY2UoJ1ttbV9tZW1iZXJfZGF0YSBuYW1lPSJwYXNzd29yZCJdJywgIiMjIHBhc3N3b3JkIGhpZGRlbiBmb3Igc2VjdXJpdHkgIyMiLCAkdGhpcy0+Ym9keSk7CgkJCQoJCQkkcGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fRU1BSUxfQk9EWV0gPSBNTV9TbWFydFRhZ1V0aWw6OnByb2Nlc3NDb250ZW50KCR0aGlzLT5ib2R5LCAkdGhpcy0+Y29udGV4dCk7CgkJCQoJCQlNTV9BY3Rpdml0eUxvZzo6bG9nKCR0aGlzLT5jb250ZXh0LT5nZXRVc2VyKCksIE1NX0FjdGl2aXR5TG9nOjokRVZFTlRfVFlQRV9FTUFJTCwgJHBhcmFtcyk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsJCiAJfQogCiAgLyoqCiAgICogSG9vayBmb3IgUEhQTWFpbGVyIHRvIGRldGVjdCBmb3IgYW55IFNNVFAgcGx1Z2lucyB0aGF0IG1pZ2h0IGJlIGNvbmZpZ3VyZWQgdG8gc2VuZCBtYWlsIHZpYSBTU0wgKEV4LiBBV1MgU0VTKS4gSWYgc28sIHJlbW92ZSAKICAgKiBwcmV2aW91c2x5IGFkZGVkIGN1c3RvbSBoZWFkZXIgb2YgTUlNRS1WZXJzaW9uOiAxIHNldCBieSB1cyBiZWNhdXNlIFBIUE1haWxlciB3aWxsIGFkZCBpdCBhZ2FpbiBhbmQgY2FuIHJlc3VsdCBpcyBhIGZhaWxlZCAKICAgKiBtYWlsIGRlbGl2ZXJ5CiAgKiovCiAgLyoKICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG1tX3BocE1haWxlcigkcGhwbWFpbGVyKQogIHsKICAgICRwaHBNYWlsZXJEdW1wID0gcHJpbnRfcigkcGhwbWFpbGVyLDEpOwogICAgcHJlZ19tYXRjaCgiL1xbc2lnbl9rZXlfZmlsZTpwcm90ZWN0ZWRcXSA9PiAoLiopL2kiLCAkcGhwTWFpbGVyRHVtcCwgJG1hdGNoZXMpOwogICAgCiAgICBpZigoaW50KSRtYXRjaGVzWzFdICE9IDEpCiAgICB7CiAgICAgICRwaHBtYWlsZXItPmNsZWFyQ3VzdG9tSGVhZGVycygpOyAgICAKICAgIH0KICB9CiAgKi8KICAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0U3ViamVjdCgkc3RyKQogCXsKIAkJJHRoaXMtPnN1YmplY3QgPSAkc3RyOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0U3ViamVjdCgpCiAJewogCQlyZXR1cm4gJHRoaXMtPnN1YmplY3Q7CiAJfQogCiAJcHVibGljIGZ1bmN0aW9uIHNldEJvZHkoJHN0cikKIAl7CiAJCSR0aGlzLT5ib2R5ID0gJHN0cjsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldEJvZHkoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5ib2R5OwogCX0KIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRUb05hbWUoJHN0cikKIAl7CiAJCSR0aGlzLT50b05hbWUgPSAkc3RyOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0VG9OYW1lKCkKIAl7CiAJCXJldHVybiAkdGhpcy0+dG9OYW1lOwogCX0KIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRUb0FkZHJlc3MoJHN0cikKIAl7CiAJCSR0aGlzLT50b0FkZHJlc3MgPSAkc3RyOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0VG9BZGRyZXNzKCkKIAl7CiAJCXJldHVybiAkdGhpcy0+dG9BZGRyZXNzOwogCX0KIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRGcm9tTmFtZSgkc3RyKQogCXsKIAkJJHRoaXMtPmZyb21OYW1lID0gJHN0cjsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldENDKCkKIAl7CiAJCXJldHVybiAkdGhpcy0+Y2NBZGRyZXNzOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gYWRkQ0MoJGVtYWlsLCAkbmFtZT0iIikKIAl7CiAJCSR0aGlzLT5jY0FkZHJlc3NbJGVtYWlsXSA9ICRuYW1lOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0RnJvbU5hbWUoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5mcm9tTmFtZTsKIAl9CiAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0RnJvbUFkZHJlc3MoJHN0cikKIAl7CiAJCSR0aGlzLT5mcm9tQWRkcmVzcyA9ICRzdHI7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRGcm9tQWRkcmVzcygpCiAJewogCQlyZXR1cm4gJHRoaXMtPmZyb21BZGRyZXNzOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gc2V0Q29udGV4dChNTV9Db250ZXh0ICRjb250ZXh0KQogCXsKIAkJJHRoaXMtPmNvbnRleHQgPSAkY29udGV4dDsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldENvbnRleHQoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5jb250ZXh0OwogCX0KIAkKfQoK', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(194, 'paymentservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fUGF5bWVudFNlcnZpY2UgaXMgdGhlIGFic3RyYWN0IGNsYXNzIGRlZmluaW5nIHRoZSBpbnRlcmZhY2UgZm9yIGFsbCBNZW1iZXJNb3VzZSBwYXltZW50IHNlcnZpY2VzLiBBIHNldHRpbmdzIG1lY2hhbmlzbSBpcyB1c2VkIHRvIGF1dG9tYXRpY2FsbHkgCiAqIGNhcHR1cmUgYW5kIHBlcnNpc3QgdGhlIHNlcnZpY2Utc3BlY2lmaWMgc2V0dGluZ3MgY3JlYXRlZCBpbiBhbnkgZnV0dXJlIHN1YmNsYXNzZXMuCiAqIAogKiBUaGUgc2V0dGluZ3MgbWVjaGFuaXNtIHdvcmtzIGFzIGZvbGxvd3M6IHRoZXJlIGlzIG5vIHdheSB0byBrbm93IGluIGFkdmFuY2Ugd2hhdCBzcGVjaWZpYyBkYXRhIGEgZnV0dXJlIHBheW1lbnQgc2VydmljZQogKiBtaWdodCBuZWVkIHRvIHN0b3JlLCB0aGVyZWZvcmUgb25lIGZpZWxkIGluIHRoZSBkYXRhYmFzZSBpcyB1c2VkIHRvIHN0b3JlIGEgc2VyaWFsaXplZCBhcnJheSB3aGljaCBjYW4gY29udGFpbiBhbnkgc3BlY2lmaWMKICogb3B0aW9ucyBuZWVkZWQuIEZvciBpbnN0YW5jZSwgc2F5IHBheW1lbnQgc2VydmljZSAiZm9vIiByZXF1aXJlcyBhIHVzZXJuYW1lIGFuZCBwYXNzd29yZCwgd2hpY2ggYXJlIGF0cmlidXRlcyBvZiB0aGF0IHN1YmNsYXNzLgogKiBJbiB0aGUgc3ViY2xhc3MsIHRoZSBwcmVwYXJlU2V0dGluZ3MgbWV0aG9kIHdvdWxkIG5lZWQgdG8gYmUgb3ZlcndyaXR0ZW4gdG8gY3JlYXRlIGFuIGFycmF5IGNvbnRhaW5nIHRoZSBrZXkvdmFsdWUgcGFpcnMgZm9yIHRoZSB1c2VybmFtZQogKiBhbmQgcGFzc3dvcmQsIGFuZCB0aGVuIHJldHVybiB0aGUgc2VyaWFsaXplZCBzdGF0ZSBvZiB0aGlzIGFycmF5LiBUaGUgZGVmYXVsdCBjb21taXREYXRhIGFscmVhZHkgY2FsbHMgcHJlcGFyZVNldHRpbmdzIHRvIGdldCB0aGUgdmFsdWUgb2YgdGhlCiAqIHNldHRpbmdzIGRiIGZpZWxkLCBhbmQgZ2V0RGF0YSBhbHJlYWR5IGtub3dzIHRvIGRlc2VyaWFsaXplIHRoZSBhcnJheSBhbmQgcG9wdWxhdGUgbG9jYWwgYXR0cmlidXRlcyB3aXRoIHRoZSBhcnJheSBjb250ZW50cywgc28gbm90aGluZyBmdXJ0aGVyCiAqIHdvdWxkIG5lZWQgdG8gYmUgZG9uZS4gCiAqIAogKiBOb3RlOiBUaGUgaW1wbGVtZW50YXRpb24gb2YgcHJlcGFyZVNldHRpbmdzIGluIHRoZSBiYXNlIGNsYXNzIHdpbGwgYWxyZWFkeSBkZXRlY3QgYW5kIHNlcmlhbGl6ZSBzdWJjbGFzcyBhdHRyaWJ1dGVzIHRoYXQgYXJlIHZpc2libGUgdG8gdGhlIGJhc2UgY2xhc3MsCiAqIGllLiBpbiB0aGUgYWJvdmUgaWYgZXhhbXBsZSwgaWYgdXNlcm5hbWUgYW5kIHBhc3N3b3JkIHdlcmUgc2NvcGVkIGFzIHByb3RlY3RlZCwgbm90aGluZyBleHRyYSB3b3VsZCBuZWVkIHRvIGJlIGRvbmUgaW4gdGhlIHN1YmNsYXNzLiBJZiB0aGV5IHdlcmUgc2NvcGVkIGFzIHByaXZhdGUKICogdGhlbiB0aGUgc3ViY2xhc3MgcHJlcGFyZVNldHRpbmdzIHdvdWxkIG5lZWQgdG8gYmUgb3ZlcnJpZGRlbiB0byBwcm9wZXJseSBhY2NvdW50IGZvciB0aGlzIAogKi8KYWJzdHJhY3QgY2xhc3MgTU1fUGF5bWVudFNlcnZpY2UgZXh0ZW5kcyBNTV9FbnRpdHkKewoJcHVibGljIHN0YXRpYyAkUEFZUEFMX1NFUlZJQ0VfVE9LRU4gPSAiUEFZUEFMIjsKCXB1YmxpYyBzdGF0aWMgJENMSUNLQkFOS19TRVJWSUNFX1RPS0VOID0gIkNMSUNLQkFOSyI7CglwdWJsaWMgc3RhdGljICRBVVRIT1JJWkVORVRfU0VSVklDRV9UT0tFTiA9ICJBVVRIT1JJWkVORVQiOwoJcHVibGljIHN0YXRpYyAkQVVUSE9SSVpFTkVUX0NJTV9TRVJWSUNFX1RPS0VOID0gIkFVVEhPUklaRU5FVENJTSI7CglwdWJsaWMgc3RhdGljICRDSEFSR0lGWV9TRVJWSUNFX1RPS0VOID0gIkNIQVJHSUZZIjsgCglwdWJsaWMgc3RhdGljICRDT0lOQkFTRV9TRVJWSUNFX1RPS0VOID0gIkNPSU5CQVNFIjsKCXB1YmxpYyBzdGF0aWMgJENPSU5CQVNFX01JTklNQUxfU0VSVklDRV9UT0tFTiA9ICJDT0lOQkFTRU1JTklNQUwiOwoJcHVibGljIHN0YXRpYyAkU1RSSVBFX1NFUlZJQ0VfVE9LRU4gPSAiU1RSSVBFIjsKCXB1YmxpYyBzdGF0aWMgJEJSQUlOVFJFRV9TRVJWSUNFX1RPS0VOID0gIkJSQUlOVFJFRSI7CglwdWJsaWMgc3RhdGljICRMSU1FTElHSFRfU0VSVklDRV9UT0tFTiA9ICJMSU1FTElHSFQiOwoJcHVibGljIHN0YXRpYyAkTElUTEVfU0VSVklDRV9UT0tFTiA9ICJMSVRMRSI7CglwdWJsaWMgc3RhdGljICRUV09DSEVDS09VVF9TRVJWSUNFX1RPS0VOID0gIlRXT0NIRUNLT1VUIjsKCXB1YmxpYyBzdGF0aWMgJFRFU1RfU0VSVklDRV9UT0tFTiA9ICJURVNUIjsKCQoJcHJvdGVjdGVkICRuYW1lOwoJcHJvdGVjdGVkICRhY3RpdmUgPSBmYWxzZTsKCXByb3RlY3RlZCAkdG9rZW4gPSAiIjsKCQoJcHJvdGVjdGVkICRzdXBwb3J0ZWRDdXJyZW5jaWVzID0gYXJyYXkoIlVTRCIpOwoJCglwcm90ZWN0ZWQgJGV4Y2x1c2lvbnMgPSBhcnJheSgpOyAvL2ZpZWxkcyB0aGF0IHNob3VsZCBub3QgYmUgc2VyaWFsaXplZC9zdG9yZWQuIEltcGxlbWVudCBpbiBzdWJjbGFzc2VzCgkKCXB1YmxpYyBmdW5jdGlvbiBsb2FkRGVwZW5kZW5jaWVzKCkgeyB9CiAgCglwdWJsaWMgZnVuY3Rpb24gaW5zdGFsbCgpIHsgcmVxdWlyZV9vbmNlKEFCU1BBVEguJ3dwLWFkbWluL2luY2x1ZGVzL3VwZ3JhZGUucGhwJyk7IH0KCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdPcHRpb25zKCkge30KCQoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NDb25maWdPcHRpb25zKCRkYXRhKSB7IHJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsgfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNPbnNpdGUoKSB7IHJldHVybiAkdGhpcy0+c3VwcG9ydHNGZWF0dXJlKE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9OU0lURV9TRVJWSUNFKTsgfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0VGVtcGxhdGVEaXIoKSB7IHJldHVybiBNTV9QTFVHSU5fQUJTUEFUSC4iL3RlbXBsYXRlcy9wYXltZW50IjsgfQoJCglwdWJsaWMgZnVuY3Rpb24gc3VwcG9ydHNGZWF0dXJlKCRmZWF0dXJlQ29uc3QpIHsgcmV0dXJuIGZhbHNlOyB9CgkKCXB1YmxpYyBmdW5jdGlvbiBpbnRlcm1lZGlhdGVDb25maWdBY3Rpb24oKSB7fQoJCglwdWJsaWMgZnVuY3Rpb24gY2FuY2VsU3Vic2NyaXB0aW9uKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtKSB7fQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VHJhbnNhY3Rpb25QYWdlQWN0aW9ucygkdHJhbnNhY3Rpb25JZCkgeyByZXR1cm4gIiI7IH0KCQoJLyoqCgkgKiBwcm9jZXNzTm90aWZpY2F0aW9uIGFsbG93cyBwYXltZW50IHNlcnZpY2VzIHRvIHJlc3BvbmQgdG8gbm90aWZpY2F0aW9ucywgaWUgUGF5UGFsJ3MgSVBOIG1lY2hhbmlzbSwgb3IgQXV0aG9yaXplLm5ldCdzIFNpbGVudCBQb3N0CgkgKiBUaGUgZnVuY3Rpb24gcmVjZWl2ZXMgdGhlICRfUE9TVCBzdXBlcmdsb2JhbCBhcyBhIHBhcmFtZXRlciwgYnV0IGFzIHRoZSBtZXRob2QgaXMgbWVhbnQgdG8gYmUgY2FsbGVkIGluIHRoZSBzY29wZSBvZiB0aGUgCgkgKiBzY3JpcHQgdGhhdCBpcyByZWNlaXZpbmcgdGhlIG5vdGlmaWNhdGlvbiwgJF9HRVQsICRfUE9TVCwgJF9DT09LSUUsIGFuZCAkX1JFUVVFU1Qgc2hvdWxkIGFsbCBiZSBhdmFpbGFibGUgKGFsdGhvdWdoIG9ubHkgdGhlIAoJICogZmlyc3QgdHdvIHNob3VsZCBldmVyIGJlIHJlbGV2ZW50KS4gCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcmVxdWVzdCBUaGUgJF9QT1NUIHN1cGVyZ2xvYmFsIGlmIGl0IGV4aXN0cywgYSBibGFuayBhcnJheSBpZiBub3QKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHRoZSBzdGF0dXMgb2YgYW55IG9wZXJhdGlvbnMgcGVyZm9ybWVkIGluIHRoZSBtZXRob2QuIFRoZSBtZXNzYWdlIGZpZWxkIG9mIHRoZSByZXNwb25zZSB3aWxsIGJlIGVjaG9lZCB0byB0aGUgc2NyaXB0IGNhbGxlciB2ZXJiYXRpbQoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc05vdGlmaWNhdGlvbigkcmVxdWVzdCkge30KCQoJCgkvKioKCSAqIFJlZnVuZHMgYSB0cmFuc2FjdGlvbgoJICoKCSAqIEBwYXJhbSBpbnRlZ2VyICR0cmFuc2FjdGlvbklkIFRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiB0byByZWZ1bmQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3MsIGZhaWx1cmUsIG9yIGVycm9yCgkgKi8KCXB1YmxpYyBhYnN0cmFjdCBmdW5jdGlvbiByZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCk7CgkKCQoJLyoqCgkgKiBDaGFyZ2UgYW4gb3JkZXIKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgdG8gY2hhcmdlCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIFRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byB1c2UgaW4gY2hhcmdpbmcgdGhlIG9yZGVyCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdHVzIG9mIHRoZSBjaGFyZ2UgYXR0ZW1wdAoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hhcmdlT3JkZXIoTU1fT3JkZXIgJG9yZGVyLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgJHZhbGlkYXRlPXRydWUpIAoJeyAKCQlpZiAoKCR2YWxpZGF0ZSkgJiYgKCEkb3JkZXItPmlzVmFsaWQoKSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIk9yZGVyIGlzIG5vdCB2YWxpZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJG9yZGVyLT5wcmVwcm9jZXNzT3JkZXIoKTsKCQkKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0gIAoJCgkKCS8vVE9ETzogUkVGQUNUT1I6IG1ha2UgdGhlIGFwcHJvcHJpYXRlIG1ldGhvZHMgYWJzdHJhY3QsIGFuZCBtb2RpZnkgdGhlbSB0byBjb25mb3JtIHRvIHRoZSBjb250cmFjdChzKQoJLyoqCgkgKiBVcGRhdGUgdGhlIGNyZWRpdCBjYXJkIGFuZCBiaWxsaW5nIGFkZHJlc3MgZm9yIGEgc3Vic2NyaXB0aW9uCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSBsaW5rZWQgdG8gdGhlIHN1YnNjcmlwdGlvbgoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyBUaGUgbmV3IGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyBUaGUgYmlsbGluZyBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgbmV3IGNhcmQKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiB1cGRhdGVTdWJzY3JpcHRpb25JbmZvKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcz1udWxsKSAKCXsKCQkvL2hlcmUgaW4gdGhlIGJhc2UgY2xhc3MsIGFsbCB3ZSBkbyBpcyB1cGRhdGUgdGhlIGFkZHJlc3Mgb24gdGhlIG9yZGVyCgkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJaWYgKCEkb3JkZXItPmlzVmFsaWQoKSB8fCBpc19udWxsKCRiaWxsaW5nQWRkcmVzcykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIE1lbWJlck1vdXNlIG9yZGVyIGJpbGxpbmcgYWRkcmVzcyIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJG9yZGVyLT5zZXRCaWxsaW5nQWRkcmVzcygkYmlsbGluZ0FkZHJlc3MpOwoJCSRyZXNwb25zZSA9ICRvcmRlci0+Y29tbWl0RGF0YSgpOwoJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRyZXNwb25zZS0+bWVzc2FnZSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsJCQoJfQoJCgkKCS8qKgoJICogUGVyZm9ybXMgYW55IGhhbmRsaW5nIHJlbGF0ZWQgdG8gYSByZWJpbGwgZmFpbHVyZS9lbnRlcmluZyBvdmVyZHVlIHN0YXR1cwoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG92ZXJkdWUgaXRlbQoJICogQHBhcmFtIE1NX1VzZXIgJGN1c3RvbWVyIChvcHRpb25hbCkgSWYgdGhlIGNhbGxlciBoYXMgYSByZWZlcmVuY2UgdG8gdGhlIGN1c3RvbWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgaXRlbSwgaXQgd2lsbCBiZSB1c2VkIHZlcnN1cyBkb2luZyBhbm90aGVyIGxvb2t1cCBpbiB0aGUgZGIKCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBvZiB0aGUgb3BlcmF0aW9ucwoJICovCglwdWJsaWMgZnVuY3Rpb24gaGFuZGxlT3ZlcmR1ZVN1YnNjcmlwdGlvbkl0ZW0oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sIE1NX1VzZXIgJGN1c3RvbWVyPW51bGwpCgl7CgkJaWYgKGlzX251bGwoJGN1c3RvbWVyKSkKCQl7CgkJCSRvcmRlcklkID0gJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpOwoJCQkkY3VzdG9tZXIgPSBuZXcgTU1fVXNlcihNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlcklkKSk7CgkJfQoJCQoJCWlmICghJG9yZGVySXRlbS0+aXNWYWxpZCgpIHx8ICEkY3VzdG9tZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgcGFyYW1ldGVycyB3ZXJlIHBhc3NlZCB0byBoYW5kbGVPdmVyZHVlU3Vic2NyaXB0aW9uSXRlbSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vZGlzcGF0Y2ggdGhlIHB1c2ggbm90aWZpY2F0aW9uCgkJZG9fYWN0aW9uKE1NX0V2ZW50OjokUEFZTUVOVF9SRUJJTExfREVDTElORUQsIE1NX0V2ZW50OjpwYWNrYWdlT3JkZXJEYXRhKCRjdXN0b21lci0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpLCAkb3JkZXJJdGVtLT5nZXRJZCgpLCB0cnVlKSk7CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQkKCQoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGF1dG9sb2FkPXRydWUsJGNvbmZpZ0RhdGE9IiIpCgl7CgkJaWYoJGF1dG9sb2FkKQoJCXsKCQkJJHRoaXMtPmxvYWREZXBlbmRlbmNpZXMoKTsKCQl9CgkJCgkJaWYgKCRjb25maWdEYXRhID09ICIiKQoJCXsKCQkJJHRoaXMtPmdldERhdGEoKTsKCQl9CgkJZWxzZQoJCXsKCQkJJHRoaXMtPnNldERhdGEoJGNvbmZpZ0RhdGEpOwoJCX0KCX0KCQoJLyoqCgkgKiBnZXREYXRhIHJldHJpZXZlcyB0aGUgcGF5bWVudCBzZXJ2aWNlIGluZm9ybWF0aW9uIGZyb20gdGhlIGRhdGFiYXNlIGJ5IHRva2VuLCBhbmQgdGhlbiBjYWxscyBzZXREYXRhIHRvIHBvcHVsYXRlIHRoZSBlbnRpdHkKCSAqIEBzZWUgTU1fRW50aXR5OjpnZXREYXRhKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9QQVlNRU5UX1NFUlZJQ0VTLiIgV0hFUkUgdG9rZW49JyIuJHRoaXMtPnRva2VuLiInIjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCkgCgkJewoJCQkkdGhpcy0+c2V0RGF0YSgkcmVzdWx0KTsKCQl9CgkJZWxzZSAKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJLyoqCgkgKiBzZXREYXRhIHBvcHVsYXRlcyB0aGUgZW50aXR5IHVzaW5nIGFuIG9iamVjdCB3aXRoIG5hbWVzIGZpZWxkcyBjb250YWluaW5nIHRoZSBkYXRhIHRvIHVzZQoJICogQHNlZSBNTV9FbnRpdHk6OnNldERhdGEoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0RGF0YSgkZGF0YSkKCXsKCQl0cnkKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPm5hbWUgPSAkZGF0YS0+bmFtZTsKCQkJJHRoaXMtPmFjdGl2ZSA9ICRkYXRhLT5hY3RpdmU7CgkJCQoJCQlpZiAoKCRkYXRhLT5zZXR0aW5ncyAhPSBudWxsKSAmJiAoJGRhdGEtPnNldHRpbmdzICE9IiIpKQoJCQl7CgkJCQkkdW5zZXJpYWxpemVkX3NldHRpbmdzID0gdW5zZXJpYWxpemUoJGRhdGEtPnNldHRpbmdzKTsKCQkJCWlmIChpc19hcnJheSgkdW5zZXJpYWxpemVkX3NldHRpbmdzKSkKCQkJCXsKCQkJCQlmb3JlYWNoICgkdW5zZXJpYWxpemVkX3NldHRpbmdzIGFzICRrPT4kdikKCQkJCQl7CgkJCQkJCWlmIChpc3NldCgkdGhpcy0+JGspKQoJCQkJCQl7CgkJCQkJCQkkdGhpcy0+JGsgPSAkdjsgLy9kb24ndCBjcmVhdGUgYXR0cmlidXRlcywgb25seSByZXN0b3JlIGV4aXN0aW5nIG9uZXMKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCS8qKgoJICogY29tbWl0RGF0YSBwZXJzaXN0cyB0aGUgc3RhdGUgYW5kIHNldHRpbmdzIG9mIHRoZSBQYXltZW50U2VydmljZSBpbnRvIHRoZSBkYXRhYmFzZS4gVGhlIHByZXBhcmVTZXR0aW5ncyBtZXRob2QgaXMgdXNlZCB0byBnYXRoZXIgYWxsIHRoZSBzZXJ2aWNlIAoJICogc3BlY2lmaWMgc2V0dGluZ3MgYW5kIHNlcmlhbGl6ZSB0aGVtIGludG8gZm9yIHN0b3JhZ2UgaW50byBhIHNldHRpbmdzIGZpZWxkIGluIHRoZSBiYWNraW5nIHRhYmxlLCBhbGxvd2luZyB0aGlzIGdlbmVyaWMgY29tbWl0RGF0YSB0byBiZSB1c2VkIGZvciBhbGwgZnV0dXJlIHN1YmNsYXNzZXMKCSAqIEBzZWUgTU1fRW50aXR5Ojpjb21taXREYXRhKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRkb1VwZGF0ZSA9ICgkdGhpcy0+aWQ+MCk7CgkJJG9wZXJhdGlvbiA9ICgkZG9VcGRhdGUpPyJ1cGRhdGUiOiJjcmVhdGUiOyAvL3VzZWQgaW4gZXJyb3IgbWVzc2FnZXMKCQkKCQlpZiAoISRkb1VwZGF0ZSkKCQl7CgkJCS8vdGhlcmUgY2FuIG9ubHkgYmUgb25lIHJvdyB3aXRoIGVhY2ggdG9rZW4sIGNoZWNrIGlmIGl0IGV4aXN0cyBmaXJzdAoJCQkkY2hlY2tTcWwgPSAic2VsZWN0IGlkIGZyb20gIi5NTV9UQUJMRV9QQVlNRU5UX1NFUlZJQ0VTLiIgd2hlcmUgdG9rZW49J3skdGhpcy0+dG9rZW59JyI7CgkJCSRyZXMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJGNoZWNrU3FsKTsKCQkJaWYgKCRyZXMpCgkJCXsKCQkJCS8vaWYgaXQgZG9lcywgdGhpcyBpcyBhbiB1cGRhdGUuIHNldCB0aGUgaWQgZm9yIGdvb2QgbWVhc3VyZQoJCQkJJGRvVXBkYXRlID0gdHJ1ZTsKCQkJCSRyb3cgPSAkcmVzWzBdOwoJCQkJJHRoaXMtPmlkID0gJHJvdy0+aWQ7CgkJCX0KCQl9CgkKCQlNTV9UcmFuc2FjdGlvbjo6YmVnaW4oKTsKCQl0cnkKCQl7CgkJCSRzZXRDbGF1c2UgPSAiU0VUIHRva2VuPSd7JHRoaXMtPnRva2VufScsIG5hbWU9JyVzJyxzZXR0aW5ncz0nJXMnLGFjdGl2ZT0nJWQnIjsKCQkJCgkJCWlmICghJGRvVXBkYXRlKQoJCQl7CgkJCQkkc3FsID0gIklOU0VSVCBpbnRvICIuTU1fVEFCTEVfUEFZTUVOVF9TRVJWSUNFUy4iIHskc2V0Q2xhdXNlfSI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc3FsID0gIlVQREFURSAiLk1NX1RBQkxFX1BBWU1FTlRfU0VSVklDRVMuIiB7JHNldENsYXVzZX0gd2hlcmUgdG9rZW49J3skdGhpcy0+dG9rZW59JyI7CgkJCX0KCQkJCgkJCSRwcmVwYXJlZFNxbCA9ICR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5uYW1lLCAkdGhpcy0+cHJlcGFyZVNldHRpbmdzKCksICgkdGhpcy0+YWN0aXZlKT8xOjApOwoJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkKCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCXsKCQkJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byB7JG9wZXJhdGlvbn0gcGF5bWVudCBzZXJ2aWNlICgiLiRwcmVwYXJlZFNxbC4iKSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWNhdGNoKEV4Y2VwdGlvbiAkZXgpCgkJewoJCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byB7JG9wZXJhdGlvbn0gcGF5bWVudCBzZXJ2aWNlIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJTU1fVHJhbnNhY3Rpb246OmNvbW1pdCgpOwoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiByZXR1cm4gdGhlIHZhbHVlIG9mIHRoZSBuYW1lIGF0dHJpYnV0ZQoJICogQHJldHVybiBzdHJpbmcgdGhlIHZhbHVlIG9mIHRoZSBuYW1lIGF0dHJpYnV0ZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5uYW1lOwoJfQoJCgkvKioKCSAqIHNldCB0aGUgdmFsdWUgb2YgdGhlIG5hbWUgYXR0cmlidXRlCgkgKiBAcGFyYW0gc3RyaW5nICRuYW1lIFRoZSBuZXcgbmFtZQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0TmFtZSgkbmFtZSkKCXsKCQkkdGhpcy0+bmFtZSA9ICRuYW1lOwoJfQoJCgkvKioKCSAqIHJldHVybiB0aGUgdmFsdWUgb2YgdGhlIHRva2VuCgkgKiBAcmV0dXJuIHN0cmluZyB0aGUgdmFsdWUgb2YgdGhlIHRva2VuIAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0VG9rZW4oKQoJewoJCXJldHVybiAkdGhpcy0+dG9rZW47Cgl9CgkKCS8qKgoJICogRWFjaCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgUGF5bWVudFNlcnZpY2UgY2xhc3MgY2FuIGhhdmUgc3BlY2lmaWMgc2V0dGluZ3MuIFRoZXNlIHNldHRpbmdzIGFyZSBzdG9yZWQgYXMgYXR0cmlidXRlcyBvbiB0aGUgb2JqZWN0LiBQcmlvciB0byBjb21taXQsIAoJICogcHJlcGFyZVNldHRpbmdzIGNyZWF0ZXMgYW4gYXJyYXkgdXNpbmcgdGhlc2UgYXR0cmlidXRlcyBhbmQgdGhlbiBzZXJpYWxpemVzIHRoYXQgYXJyYXkgYW5kIHN0b3JlcyBpdCBpbiAkdGhpcy0+c2V0dGluZ3MsIHNvIHRoYXQgdGhlIHNldHRpbmdzIGFyZSBwZXJzaXN0ZWQKCSAqIHdoZW4gY29tbWl0RGF0YSBpcyBjYWxsZWQKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHByZXBhcmVTZXR0aW5ncygpIAoJewoJCSRmaW5hbEV4Y2x1c2lvbnMgPSBhcnJheV9tZXJnZSgkdGhpcy0+ZXhjbHVzaW9ucyxhcnJheSgnaWQnLCduYW1lJywndG9rZW4nLCdzZXR0aW5ncycsJ2FjdGl2ZScsJ3N1cHBvcnRlZEN1cnJlbmNpZXMnLCdub3RpZnlTZXJ2aWNlcycsJ2V4Y2x1c2lvbnMnKSk7CgkJJHNldHRpbmdzID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkdGhpcyBhcyAka2V5PT4kdmFsdWUpCgkJewoJCQlpZiAoIWluX2FycmF5KCRrZXksJGZpbmFsRXhjbHVzaW9ucykgJiYgKHN0cnBvcygka2V5LCJ0cmFuc2llbnRfIikgIT09IDApKQoJCQl7CgkJCQkkc2V0dGluZ3NbJGtleV0gPSAkdmFsdWU7CgkJCX0KCQl9CgkJcmV0dXJuIHNlcmlhbGl6ZSgkc2V0dGluZ3MpOwoJfQoJCgkvKioKCSAqIFNldHMgdGhlIGFjdGl2ZSBhdHRyaWJ1dGUKCSAqIEBwYXJhbSBib29sZWFuICRhY3RpdmUgVGhlIG5ldyBzdGF0ZSBvZiB0aGUgYWN0aXZlIGF0dHJpYnV0ZQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0QWN0aXZlKCRhY3RpdmUpCgl7CgkJJHRoaXMtPmFjdGl2ZSA9IChib29sKSRhY3RpdmU7Cgl9CgkKCS8qKgoJICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGFjdGl2ZSBhdHRyaWJ1dGUKCSAqIEByZXR1cm4gYm9vbGVhbiB2YWx1ZSBvZiB0aGUgc3RhdGUgb2YgdGhlIGFjdGl2ZSBhdHRyaWJ1dGUKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFjdGl2ZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hY3RpdmU7Cgl9CgkKCS8qKgoJICogQWxpYXMgdG8gZ2V0QWN0aXZlLiBGb3IgcmVhZGFiaWxpdHkKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OmdldEFjdGl2ZQoJICogCgkgKiBAcmV0dXJuIGJvb2xlYW4gdmFsdWUgb2YgdGhlIHN0YXRlIG9mIHRoZSBhY3RpdmUgYXR0cmlidXRlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBpc0FjdGl2ZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5nZXRBY3RpdmUoKTsKCX0KCQoJCgkvKioKCSAqIGRpc3BsYXlQYXltZW50Rm9ybSByZXR1cm5zIHRoZSBodG1sIGZvciB0aGUgZm9ybSB0byBwcmVzZW50IHRvIHRoZSB1c2VyIHRvIGdhdGhlciBwYXltZW50IGluZm9ybWF0aW9uLiAKCSAqIFRoaXMgdmVyc2lvbiAoaW4gdGhlIGFic3RyYWN0IGJhc2UgY2xhc3MgZm9yIGFsbCBwYXltZW50IHNlcnZpY2VzKSByZXR1cm5zIGEgcHJpbnRvdXQgb2YgYmlsbGluZyBhZGRyZXNzLAoJICogc2hpcHBpbmcgbWV0aG9kIGFuZCBzaGlwcGluZyBhZGRyZXNzLCBhbmQgb3JkZXIgdG90YWwgaW4gdGhlIGZvcm0gb2YgYSBzdHJpbmcgY29udGFpbmluZyBodG1sIHRhYmxlIHJvd3MKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgdG8gc2hvdyBwYXltZW50IG9wdGlvbnMgZm9yCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5UGF5bWVudEZvcm0oTU1fT3JkZXIgJG9yZGVyKQoJewoJCXJldHVybiAiIjsKCX0KCQoJCgkvKioKCSAqIHZhbGlkYXRlT3JkZXIgY2FuIGJlIHVzZWQgYnkgYW4gb2Zmc2l0ZSBwYXltZW50IHNlcnZpY2UgdG8gdmFsaWRhdGUgYW4gb3JkZXIgcHJpb3IgdG8gc2VuZGluZyBpdCBvZmYgdG8gYmUgcHJvY2Vzc2VkCgkgKgoJICogQHBhcmFtIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgJHJlc3BvbnNlIGEgcGF5bWVudCBzZXJ2aWNlIHJlc3BvbnNlIHdpdGggc3VjY2VzcyBvciBlcnJvciBzdGF0dXMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHZhbGlkYXRlT3JkZXIoTU1fT3JkZXIgJG9yZGVyKQoJewoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogTWFrZXMgYW4gSFRUUCBjb25uZWN0aW9uIHRvIGEgcmVtb3RlIFVSTCBhbmQgcmV0dXJucyB0aGUgcmVzcG9uc2UKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkcmVtb3RlVXJsIFRoZSByZW1vdGUgVVJMIHRvIGNvbm5lY3QgdG8KCSAqIEBwYXJhbSBTdHJpbmcgJG1ldGhvZCBUaGUgdHlwZSBvZiBjb25uZWN0aW9uIHRvIG1ha2UuIE9ubHkgUE9TVCBvciBHRVQgaHR0cCB2ZXJicyBjdXJyZW50bHkgc3VwcG9ydGVkLCB2YWx1ZSBpcyBQT1NUIGJ5IGRlZmF1bHQKCSAqIEBwYXJhbSBhcnJheS9TdHJpbmcgJGRhdGEgKG9wdGlvbmFsKSBBbiBhcnJheSBvZiBrZXkvdmFsdWUgcGFpcnMsIG9yIGEgc3RyaW5nLCB0byBQT1NUIHRvIHRoZSByZW1vdGUgVVJMIHdoZW4gdGhlIGNvbm5lY3Rpb25NZXRob2QgaXMgc2V0IHRvIFBPU1QuIElmIHRoaXMgcGFyYW1ldGVyIGlzIGFuIGFycmF5LCBpdCBpcyBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgc3VpdGFibGUgZm9yIFBPU1RpbmcgYW5kIHVybCBlbmNvZGVkCgkgKiBAcGFyYW0gYXJyYXkgJG9wdGlvbnMgKG9wdGlvbmFsKSBBbiBhcnJheSBvZiBjdXJsb3B0aW9ucyB0byBwYXNzIGRpcmVjdGx5IHRvIHRoZSB1bmRlcmx5aW5nIGN1cmwgaW1wbGVtZW50YXRpb24KCSAqIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBXcmFwcGVyIGFyb3VuZCB0aGUgcmVtb3RlIHJlc3BvbnNlLCB3aXRoIHRoZSByYXcgcmVzcG9uc2UgaW4gdGhlIE1NX1Jlc3BvbnNlIG1lc3NhZ2Ugb24gc3VjY2VzcywgYW5kIGEgZGVzY3JpcHRpdmUgZXJyb3IgbWVzc2FnZSBpbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSBvdGhlcndpc2UuCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBkb0hUVFBSZXF1ZXN0KCRyZW1vdGVVcmwsICRtZXRob2Q9IlBPU1QiLCAkZGF0YT0iIiwgJG9wdGlvbnM9YXJyYXkoKSkKCXsKCQkkcG9zdF9zdHJpbmcgPSAiIjsKCQlpZiAoaXNfYXJyYXkoJGRhdGEpKQoJCXsKCQkJZm9yZWFjaCggJGRhdGEgYXMgJGtleSA9PiAkdmFsdWUgKQoJCQl7CgkJCQkkcG9zdF9zdHJpbmcgLj0gIiRrZXk9IiAuIHVybGVuY29kZSggJHZhbHVlICkgLiAiJiI7CgkJCX0KCQkJJHBvc3Rfc3RyaW5nID0gcnRyaW0oICRwb3N0X3N0cmluZywgIiYgIiApOwoJCX0KCQllbHNlCgkJewoJCQkkcG9zdF9zdHJpbmcgPSAkZGF0YTsKCQl9CgkJJHJlcXVlc3QgPSBjdXJsX2luaXQoJHJlbW90ZVVybCk7IC8vIGluaXRpYXRlIGN1cmwgb2JqZWN0CgkJCgkJJGRlZmF1bHRPcHRpb25zID0gYXJyYXkoQ1VSTE9QVF9IRUFERVI9PkZBTFNFLAoJCQkJCQkJCUNVUkxPUFRfUkVUVVJOVFJBTlNGRVI9PjEsCgkJCQkJCQkJQ1VSTE9QVF9TU0xfVkVSSUZZUEVFUj0+MAoJCQkJCQkJCSk7CgkJJG9wdGlvbnMgKz0gJGRlZmF1bHRPcHRpb25zOyAvL21lcmdlIGluIHRoZSBkZWZhdWx0cywgYnV0IGRvbid0IG92ZXJyaWRlIGV4cGxpY2l0bHkgc2V0IG9wdGlvbnMKCQkKCQkkbWV0aG9kID0gc3RydG91cHBlcigkbWV0aG9kKTsKCQlpZigkbWV0aG9kID09ICdQT1NUJykKCQl7CgkJCSRwb3N0T3B0aW9ucyA9IGFycmF5KENVUkxPUFRfQ1VTVE9NUkVRVUVTVCAgPT4gIlBPU1QiLAoJCQkJCUNVUkxPUFRfUE9TVEZJRUxEUyAgICAgPT4gJHBvc3Rfc3RyaW5nKTsKCQkJLy9UT0RPOiBQSFAgNS4yIHdvcmthcm91bmQgLSByZW1vdmUgb25jZSBzdXBwb3J0IGlzIGRyb3BwZWQKCQkJaWYgKHZlcnNpb25fY29tcGFyZShQSFBfVkVSU0lPTiwgJzUuMy4yJykgPj0gMCkKCQkJewoJCQkJJHBvc3RPcHRpb25zW0NVUkxPUFRfUE9TVFJFRElSXSA9IDc7CgkJCX0KCQkJaWYgKCFpbmlfZ2V0KCdzYWZlX21vZGUnKSAmJiAhaW5pX2dldCgnb3Blbl9iYXNlZGlyJykpCgkJCXsKCQkJCSRwb3N0T3B0aW9uc1tDVVJMT1BUX0ZPTExPV0xPQ0FUSU9OXSA9IHRydWU7CgkJCX0KCQkJZm9yZWFjaCAoJHBvc3RPcHRpb25zIGFzICRjdXJsT3B0aW9uPT4kY3VybE9wdGlvblZhbHVlKQoJCQl7CgkJCQlpZiAoIWlzc2V0KCRvcHRpb25zWyRjdXJsT3B0aW9uXSkpCgkJCQl7CgkJCQkJJG9wdGlvbnNbJGN1cmxPcHRpb25dID0gJGN1cmxPcHRpb25WYWx1ZTsKCQkJCX0KCQkJfQoJCX0KCQllbHNlIGlmICgkbWV0aG9kID09ICdQVVQnKQoJCXsKCQkJaWYgKCFpc3NldCgkb3B0aW9uc1tDVVJMT1BUX0NVU1RPTVJFUVVFU1RdKSkKCQkJewoJCQkJJG9wdGlvbnNbQ1VSTE9QVF9DVVNUT01SRVFVRVNUXSA9ICJQVVQiOwoJCQl9CgkJCQoJCQlpZiAoIWlzc2V0KCRvcHRpb25zW0NVUkxPUFRfUE9TVEZJRUxEU10pKQoJCQl7CgkJCQkkb3B0aW9uc1tDVVJMT1BUX1BPU1RGSUVMRFNdID0gJHBvc3Rfc3RyaW5nOwoJCQl9CgkJfQoJCWVsc2UgaWYgKCRtZXRob2QgIT0gJ0dFVCcpCgkJewoJCQlpZiAoIWlzc2V0KCRvcHRpb25zW0NVUkxPUFRfQ1VTVE9NUkVRVUVTVF0pKQoJCQl7CgkJCQkkb3B0aW9uc1tDVVJMT1BUX0NVU1RPTVJFUVVFU1RdID0gJHBvc3Rfc3RyaW5nOwoJCQl9CgkJfQoJCQoJCWN1cmxfc2V0b3B0X2FycmF5KCRyZXF1ZXN0LCAkb3B0aW9ucyk7CQoJCQoJCSRyYXdfcmVzcG9uc2UgPSBjdXJsX2V4ZWMoJHJlcXVlc3QpOyAvLyBleGVjdXRlIGN1cmwgcG9zdCBhbmQgc3RvcmUgcmVzdWx0cyBpbiAkcmF3X3Jlc3BvbnNlCgkJCgkJJGN1cmxfZXJyb3IgPSBjdXJsX2Vycm9yKCRyZXF1ZXN0KTsKCQkKCQkkcmVzcG9uc2VPYmogPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkkcmVzcG9uc2VPYmotPmFkZERhdGEoImh0dHBfY29kZSIsY3VybF9nZXRpbmZvKCRyZXF1ZXN0LENVUkxJTkZPX0hUVFBfQ09ERSkpOwoJCQoJCWN1cmxfY2xvc2UoJHJlcXVlc3QpOyAvLyBjbG9zZSBjdXJsIG9iamVjdAkJCgkJCgkJaWYgKCRjdXJsX2Vycm9yID09ICIiKQoJCXsKCQkJJHJlc3BvbnNlT2JqLT5tZXNzYWdlID0gJHJhd19yZXNwb25zZTsKCQkJcmV0dXJuICRyZXNwb25zZU9iajsKCQl9CgkJZWxzZQoJCXsKCQkJJHJlc3BvbnNlT2JqLT5tZXNzYWdlID0gJGN1cmxfZXJyb3I7CgkJCXJldHVybiAkcmVzcG9uc2VPYmo7CgkJfQoJfQoJCgkKCS8qKgoJICogR2V0IGEgc2VydmljZS1zcGVjaWZpYyBwdXJjaGFzZSBsaW5rIGZvciB0aGUgc3VwcGxpZWQgcHJvZHVjdAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHVyY2hhc2VMaW5rKCRwcm9kdWN0SWQpIHsgcmV0dXJuIG51bGw7IH0KCQoJCglwdWJsaWMgZnVuY3Rpb24gaXNTdXBwb3J0ZWRDdXJyZW5jeSgkY3VycmVuY3lDb2RlKSB7IHJldHVybiBpbl9hcnJheShzdHJ0b3VwcGVyKCRjdXJyZW5jeUNvZGUpLCAkdGhpcy0+c3VwcG9ydGVkQ3VycmVuY2llcyk7IH0KICAKCS8qKgoJICogQWxsb3cgcGF5bWVudCBzZXJ2aWNlcyB0byBleGVjdXRlIGNvZGUgaW4gcmVzcG9uc2UgdG8gdGhlIHdvcmRwcmVzcyBpbml0IGhvb2sKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRvSW5pdEhvb2soKSB7IH0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBwZXJmb3JtSW5pdEFjdGlvbnMoKQoJewoJICAgIGdsb2JhbCAkd3BkYjsKCSAgICAKCSAgICAKCSAgICAvL1RPRE86IHRlbXBvcmFyeSBwYXRjaCBmb3IgMi4yLjctMTA2IC4uIGluIDIuMi44LCBtb3ZlIHRvIGEgbW9yZSBwZXJtYW5lbnQgbG9jYXRpb24KCSAgICBpZiggIXdwX25leHRfc2NoZWR1bGVkKCdyZWdpc3Rlcl9vcnBoYW5lZF9zY2hlZHVsZXMnKSkgCgkgICAgewoJICAgICAgICB3cF9zY2hlZHVsZV9ldmVudCggdGltZSgpLCAnZGFpbHknLCAncmVnaXN0ZXJfb3JwaGFuZWRfc2NoZWR1bGVzJyApOwoJICAgIH0KCSAgICBhZGRfYWN0aW9uKCdyZWdpc3Rlcl9vcnBoYW5lZF9zY2hlZHVsZXMnLGFycmF5KCdNTV9NZW1iZXJNb3VzZVNlcnZpY2UnLCdyZWdpc3Rlck9ycGhhbmVkU2NoZWR1bGVzJykpOwoJICAgIC8vZW5kIHRlbXBvcmFyeSBwYXRjaCBmb3IgMi4yLjctMTA2CgkgICAgCgkgICAgCgkJaWYgKGNsYXNzX2V4aXN0cygiTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5IikpCgkJewoJCQkkYWN0aXZlUGF5bWVudFNlcnZpY2VzID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRBdmFpbGFibGVQYXltZW50U2VydmljZXMoKTsKCQkJZm9yZWFjaCAoJGFjdGl2ZVBheW1lbnRTZXJ2aWNlcyBhcyAkYWN0aXZlUGF5bWVudFNlcnZpY2UpCgkJCXsKCQkJCSRhY3RpdmVQYXltZW50U2VydmljZS0+ZG9Jbml0SG9vaygpOwoJCQl9CgkJfQoJfQoJCgkKCS8qKgoJICogRGV0ZXJtaW5lcyBpZiBhbiBvcmRlciBpdGVtIHdpdGggYSBsaW1pdGVkIG51bWJlciBvZiByZWJpbGxzIGhhcyBmaW5pc2hlZCByZWN1cnJpbmcsIGFuZCBzZXRzIHRoZSBzdGF0dXMgYXBwcm9wcmlhdGVseSBpZiBpdCBoYXMKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSBUaGUgb3JkZXIgaXRlbSB0byBjaGVjawoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hlY2tQYXltZW50UGxhbkNvbXBsZXRpb24oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0pCgl7CgkJZ2xvYmFsICR3cGRiOwoJCWlmICgkb3JkZXJJdGVtLT5nZXRNYXhSZWJpbGxzKCkgPiAwKQoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgY291bnQoKikgQVMgbnVtX3JlYmlsbHMgRlJPTSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4gIiBXSEVSRSBvcmRlcl9pdGVtX2lkPSVzIEFORCAiLgoJCQkJCSJ0cmFuc2FjdGlvbl90eXBlPSVzIjsKCQkJJHNxbCA9ICR3cGRiLT5wcmVwYXJlKCRzcWwsJG9yZGVySXRlbS0+Z2V0SWQoKSxNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQpOwoJCQkkbnVtUmViaWxscyA9IGludHZhbCgkd3BkYi0+Z2V0X3Zhcigkc3FsKSk7CgkJCWlmICgkbnVtUmViaWxscyA+PSAkb3JkZXJJdGVtLT5nZXRNYXhSZWJpbGxzKCkpCgkJCXsKCQkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NPTVBMRVRFKTsKCQkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJfQoJCX0KCX0KCQoJCgkvKioKCSAqIENhbGxlZCBmcm9tIGNoZWNrb3V0IHBhZ2UgdG8gYWxsb3cgcGF5bWVudCBzZXJ2aWNlcyB0byBsb2FkIHNwZWNpYWxpemVkIGxpYnJhcmllcyBhbmQgamF2YXNjcmlwdCBhbmQgcGVyZm9ybSBhbnkgcHJlLW9yZGVyIHRhc2tzCgkgKiBFeC4gTG9hZGluZyBsaWJyYXJpZXMgdG8gaG9vayBpbnRvIHN1Ym1pc3Npb24gdG8gZG8gdG9rZW4tZXhjaGFuZ2UgZm9yIHBheW1lbnQgaW5mbwoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hlY2tvdXRJbml0KCkKCXsKCQkvL2ludGVyZmFjZSBtZXRob2QsIG1lYW50IHRvIGJlIGV4dGVuZGVkIGJ5IHN1YmNsYXNzZXMKCX0KCQoJCgkvKioKCSAqIENhbGxlZCBmcm9tICJteSBhY2NvdW50IiBwYWdlIHRvIGFsbG93IHBheW1lbnQgc2VydmljZXMgdG8gbG9hZCBzcGVjaWFsaXplZCBsaWJyYXJpZXMgYW5kIGphdmFzY3JpcHQgYW5kIHBlcmZvcm0gYW55IHRhc2tzIG5lY2Vzc2FyeSBmb3IgYmlsbGluZyBhZG1pbmlzdHJhdGlvbgoJICogRXguIExvYWRpbmcgbGlicmFyaWVzIHRvIGRvIHRva2VuLWV4Y2hhbmdlIGZvciB3aGVuIHRoZSBjdXN0b21lciB1cGRhdGVzIHBheW1lbnQgaW5mbwoJICovCglwdWJsaWMgZnVuY3Rpb24gbXlBY2NvdW50SW5pdCgpCgl7CgkJLy9pbnRlcmZhY2UgbWV0aG9kLCBtZWFudCB0byBiZSBleHRlbmRlZCBieSBzdWJjbGFzc2VzCgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoaXMgcGF5bWVudCBzZXJ2aWNlIGlzIGluIHRlc3QgbW9kZSBvciBub3QKCSAqCgkgKiBAcmV0dXJuIGJvb2wKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGluVGVzdE1vZGUoKQoJewoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKioKCSAqIENoYW5nZXMgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhpcyBwYXltZW50IHNlcnZpY2UgdG8gdXNlIHRoZSB0ZXN0IG1vZGUgc2V0dGluZ3MsIGlmIGF2YWlsYWJsZS4KCSAqIElmIHRoZSBjb25maWd1cmF0aW9uIHdhcyBhYmxlIHRvIGJlIHN1Y2Nlc3NmdWxseSBjaGFuZ2VkIHRvIGJlIGEgdGVzdCBtb2RlIGNvbmZpZ3VyYXRpb24sIHRydWUgaXMgcmV0dXJuZWQsIG90aGVyd2lzZSBmYWxzZQoJICoKCSAqICBAcmV0dXJuIGJvb2wKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHN3aXRjaFRvVGVzdE1vZGUoKQoJewoJCXJldHVybiBmYWxzZTsKCX0KCQp9', 0, '2018-11-21 06:38:55'),
(195, 'supportutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1N1cHBvcnRVdGlscwp7CglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGhhc0VtYWlsU3VwcG9ydCgpCgl7CgkJaWYoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JFNVUFBPUlRfRU1BSUwpKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBoYXNQaG9uZVN1cHBvcnQoKQoJewoJCWlmKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRTVVBQT1JUX1BIT05FKSkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0U3VwcG9ydFBpbigpCgl7CgkJJHBpbiA9ICIiOwoJCQoJCWlmKHNlbGY6Omhhc1Bob25lU3VwcG9ydCgpKQoJCXsKCQkJJHBpbiAuPSAiUCI7CgkJfQoJCQoJCWlmKHNlbGY6Omhhc0VtYWlsU3VwcG9ydCgpKQoJCXsKCQkJJHBpbiAuPSAiRSI7CgkJfQoJCQoJCSRsaWNlbnNlID0gbmV3IE1NX0xpY2Vuc2UoKTsKCQkKCQlpZigkbGljZW5zZS0+aXNWYWxpZCgpKQoJCXsKCQkJJHBpbiAuPSAkbGljZW5zZS0+Z2V0SWQoKTsKCQkJcmV0dXJuICRwaW47CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiIjsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc3VwcG9ydE1lbnVJdGVtKCRtb2R1bGUpCgl7CgkJJHVybCA9ICJodHRwOi8vc3VwcG9ydC5tZW1iZXJtb3VzZS5jb20vc3VwcG9ydCI7CgkJJG1vZHVsZUZvdW5kID0gZmFsc2U7CgkJCgkJc3dpdGNoKCRtb2R1bGUpCgkJewoJCQljYXNlIE1NX01PRFVMRV9BUEk6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09YXBpIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9QVVNIX05PVElGSUNBVElPTlM6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09cHVzaCtub3RpZmljYXRpb25zIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9XT1JEUFJFU1NfSE9PS1M6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09d29yZHByZXNzK2hvb2tzIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9QSFBfSU5URVJGQUNFOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPXBocCtpbnRlcmZhY2UiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX1BBWU1FTlRfTUVUSE9EUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1wYXltZW50K21ldGhvZHMiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX1RFU1RfREFUQToKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT10ZXN0K2RhdGEiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX0NIRUNLT1VUX09USEVSX1NFVFRJTkdTOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWNoZWNrb3V0K3NldHRpbmdzIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9DQU5DRUxMQVRJT05fTUVUSE9EOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWNhbmNlbGxhdGlvbittZXRob2QiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX0xJTUVMSUdIVF9QUk9EVUNUUzoKCQkJY2FzZSBNTV9NT0RVTEVfTElNRUxJR0hUX1NISVBQSU5HX01FVEhPRFM6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09bGltZStsaWdodCI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfQUZGSUxJQVRFX0lOVEVHUkFUSU9OOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWFmZmlsaWF0ZStpbnRlZ3JhdGlvbiI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfQ09NTUlTU0lPTl9QUk9GSUxFUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1jb21taXNzaW9uK3Byb2ZpbGVzIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9BRkZJTElBVEVfVFJBQ0tJTkc6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09YWZmaWxpYXRlK3RyYWNraW5nIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9FTUFJTF9JTlRFR1JBVElPTjoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1lbWFpbCtpbnRlZ3JhdGlvbiI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9FTUFJTF9URU1QTEFURVM6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09ZW1haWwrdGVtcGxhdGVzIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9NRU1CRVJTSElQX0xFVkVMUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1tZW1iZXJzaGlwK2xldmVscyI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfQlVORExFUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1idW5kbGVzIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9QUk9EVUNUUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1wcm9kdWN0cyI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfQ09VUE9OUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1jb3Vwb25zIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9DVVNUT01fRklFTERTOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWN1c3RvbStmaWVsZHMiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX0NPVU5UUklFUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1jb3VudHJpZXMiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX1NISVBQSU5HOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPXNoaXBwaW5nK21ldGhvZHMiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX0ZSRUVfTUVNQkVSX0ZPUk06CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09ZnJlZSttZW1iZXIrd2ViZm9ybSI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfTE9HSU5fRk9STToKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1sb2dpbit3ZWJmb3JtIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9MT0dTOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWxvZyI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfQUNUSVZJVFlfTE9HOgoJCQljYXNlIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19BQ1RJVklUWV9MT0c6CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWFjdGl2aXR5K2xvZyI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9QQVlQQUxfSVBOX0xPRzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1wYXlwYWwraXBuK2xvZyI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfRU1QTE9ZRUVTOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWVtcGxveWVlcyI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfRFJJUF9DT05URU5UX1NDSEVEVUxFOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWRyaXArY29udGVudCtzY2hlZHVsZSI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQoJCQljYXNlIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19HRU5FUkFMOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPW1lbWJlcitkZXRhaWxzK2dlbmVyYWwiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoKCgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0FDQ0VTU19SSUdIVFM6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09bWVtYmVyK2RldGFpbHMrYWNjZXNzK3JpZ2h0cyI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQoJCQljYXNlIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19TVUJTQ1JJUFRJT05TOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPW1lbWJlcitkZXRhaWxzK3N1YnNjcmlwdGlvbnMiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX1RSQU5TQUNUSU9OX0hJU1RPUlk6CgkJCQkkdXJsIC49ICIvc2VhcmNoP3Rlcm09bWVtYmVyK2RldGFpbHMrdHJhbnNhY3Rpb24raGlzdG9yeSI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfR0lGVF9ISVNUT1JZOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPW1lbWJlcitkZXRhaWxzK2dpZnQraGlzdG9yeSI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfQ1VTVE9NX0ZJRUxEUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1tZW1iZXIrZGV0YWlscytjdXN0b20rZmllbGRzIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9JTVBPUlRfV0laQVJEOgoJCQkJJHVybCAuPSAiL3NlYXJjaD90ZXJtPWltcG9ydCt3aXphcmQiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX1VTRVJfREVGSU5FRF9QQUdFUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT11c2VyK2RlZmluZWQrcGFnZXMiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX1NBRkVfTU9ERToKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1zYWZlK21vZGUiOwoJCQkJJG1vZHVsZUZvdW5kID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fTU9EVUxFX0RVUExJQ0FURV9TVUJTQ1JJUFRJT05fVE9PTDoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1kdXBsaWNhdGUrc3Vic2NyaXB0aW9ucyI7CgkJCQkkbW9kdWxlRm91bmQgPSB0cnVlOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBNTV9NT0RVTEVfRVhURU5TSU9OUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1leHRlbnNpb25zIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9PVEhFUl9TRVRUSU5HUzoKCQkJCSR1cmwgLj0gIi9zZWFyY2g/dGVybT1nZW5lcmFsK3NldHRpbmdzIjsKCQkJCSRtb2R1bGVGb3VuZCA9IHRydWU7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX01PRFVMRV9WRVJTSU9OX0hJU1RPUlk6CgkJCWNhc2UgTU1fTU9EVUxFX1JFUEFJUl9NRU1CRVJNT1VTRToKCQkJY2FzZSBNTV9NT0RVTEVfUkVQQUlSX0lOU1RBTEw6CgkJCQlicmVhazsKCQl9CgkJCgkJaWYoISRtb2R1bGVGb3VuZCkKCQl7CgkJCSR1cmwgPSAiaHR0cDovL3N1cHBvcnQubWVtYmVybW91c2UuY29tL3N1cHBvcnQvaG9tZS8iOwoJCX0KCQkKCQllY2hvICI8bGkgY2xhc3M9XCJkcm9wZG93biByaWdodFwiPiI7CgkJZWNobyAiPGEgaHJlZj1cInskdXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPjxpIGNsYXNzPVwiZmEgZmEtc3VwcG9ydFwiPjwvaT4gTmVlZCBoZWxwPzwvYT4iOwoJCQoJCWlmKHNlbGY6Omhhc0VtYWlsU3VwcG9ydCgpIHx8IHNlbGY6Omhhc1Bob25lU3VwcG9ydCgpKQoJCXsKCQkJZWNobyAiPHVsPiI7CgkJCQoJCQllY2hvICI8bGk+PGEgaHJlZj1cInskdXJsfVwiIHRhcmdldD1cIl9ibGFua1wiPjxpIGNsYXNzPVwiZmEgZmEtdmlkZW8tY2FtZXJhXCI+PC9pPiBSZWxhdGVkIFZpZGVvcyAmIEFydGljbGVzPC9hPjwvbGk+IjsKCQkJCQoJCQlpZihzZWxmOjpoYXNFbWFpbFN1cHBvcnQoKSkKCQkJewoJCQkJZWNobyAiPGxpPjxhIGhyZWY9XCIiLk1NX01vZHVsZVV0aWxzOjpnZXRVcmwoTU1fTU9EVUxFX0dFTkVSQUxfU0VUVElOR1MsIE1NX01PRFVMRV9TVVBQT1JUKS4iXCI+PGkgY2xhc3M9XCJmYSBmYS1lbnZlbG9wZVwiPjwvaT4gQ29udGFjdCBTdXBwb3J0PC9hPjwvbGk+IjsKCQkJfQoJCQkKCQkJLyppZihzZWxmOjpoYXNQaG9uZVN1cHBvcnQoKSkKCQkJewoJCQkJZWNobyAiPGxpPjxhIGhyZWY9XCIjXCI+PGkgY2xhc3M9XCJmYSBmYS1waG9uZVwiPjwvaT4gKDUxMikgNjMwLTIyMTk8L2E+PC9saT4iOwoJCQl9Ki8KCQkJCgkJCWVjaG8gIjwvdWw+IjsKCQl9CgkJCgkJZWNobyAiPC9saT4iOwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(196, 'aweberresponseerror', 'LyoqCiAqIE1NX0FXZWJlclJlc3BvbnNlRXJyb3IKICoKICogVGhpcyBpcyByYWlzZWQgd2hlbiB0aGUgc2VydmVyIHJldHVybnMgYSBub24tSlNPTiByZXNwb25zZS4gVGhpcwogKiBzaG91bGQgb25seSBvY2N1ciB3aGVuIHRoZXJlIGlzIGEgc2VydmVyIG9yIHNvbWUgdHlwZSBvZiBjb25uZWN0aXZpdHkKICogaXNzdWUuCiAqCiAqIEB1c2VzIE1NX0FXZWJlckV4Y2VwdGlvbgogKiBAcGFja2FnZQogKiBAdmVyc2lvbiAkaWQkCiAqLwpjbGFzcyBNTV9BV2ViZXJSZXNwb25zZUVycm9yIGV4dGVuZHMgTU1fQVdlYmVyRXhjZXB0aW9uIHsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJHVyaSkgewoJCSR0aGlzLT51cmkgPSAkdXJpOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoIlJlcXVlc3QgZm9yIHskdXJpfSBkaWQgbm90IHJlc3BvbmQgcHJvcGVybHkuIik7Cgl9Cgp9Cg==', 0, '2018-11-21 06:38:55'),
(197, 'response', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUmVzcG9uc2UKewoJcHVibGljIHN0YXRpYyAkU1VDQ0VTUyA9ICJzdWNjZXNzIjsKCXB1YmxpYyBzdGF0aWMgJEVSUk9SID0gImVycm9yIjsKCQoJcHVibGljIHN0YXRpYyAkREFUQV9LRVlfVVJMID0gInVybCI7CgkKCXB1YmxpYyAkbWVzc2FnZSA9ICIiOwoJcHVibGljICR0eXBlID0gIiI7CglwdWJsaWMgJHVybCA9ICIiOwoJcHVibGljICRkYXRhOwoJCgkvL2RpYWdub3N0aWMgZmxhZwoJCgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkbXNnPSIiLCAkdHlwZT0ic3VjY2VzcyIsICRleGNsdWRlRnJvbURpYWdub3N0aWNMb2cgPSBmYWxzZSkgCiAJewogCQlpZiAoISRleGNsdWRlRnJvbURpYWdub3N0aWNMb2cgJiYgY2xhc3NfZXhpc3RzKCJNTV9EaWFnbm9zdGljTG9nIikgJiYgTU1fRGlhZ25vc3RpY0xvZzo6aXNFbmFibGVkKCkpCiAJCXsKIAkJCSRkaWFnRXZlbnRUeXBlID0gKCR0eXBlID09PSBzZWxmOjokRVJST1IpP01NX0RpYWdub3N0aWNMb2c6OiRNTV9FUlJPUjpNTV9EaWFnbm9zdGljTG9nOjokTU1fU1VDQ0VTUzsKIAkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZ1Jlc3BvbnNlKCRkaWFnRXZlbnRUeXBlLCAkbXNnKTsJCiAJCX0KIAkJCiAJCSR0aGlzLT5tZXNzYWdlID0gJG1zZzsKIAkJJHRoaXMtPnR5cGUgPSAkdHlwZTsKIAkJCiAJCSR0aGlzLT5kYXRhID0gYXJyYXkoKTsKIAl9CiAJCiAJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc0Vycm9yKCRyZXNwb25zZSkKIAl7CiAJCWlmKCgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkgJiYgKCRyZXNwb25zZS0+dHlwZSA9PSBNTV9SZXNwb25zZTo6JEVSUk9SKSkKIAkJewogCQkJcmV0dXJuIHRydWU7CiAJCX0KIAkJCiAJCXJldHVybiBmYWxzZTsKIAl9CiAJCiAJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1N1Y2Nlc3MoJHJlc3BvbnNlKQogCXsKIAkJaWYoKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSAmJiAoJHJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUykpCiAJCXsKIAkJCXJldHVybiB0cnVlOwogCQl9CiAJCQogCQlyZXR1cm4gZmFsc2U7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBhZGREYXRhKCRuYW1lLCAkdmFsdWUpCiAJewogCQkkdGhpcy0+ZGF0YVskbmFtZV0gPSAkdmFsdWU7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCRuYW1lKQogCXsKIAkJaWYoaXNzZXQoJHRoaXMtPmRhdGFbJG5hbWVdKSkKIAkJewogCQkJcmV0dXJuICR0aGlzLT5kYXRhWyRuYW1lXTsKIAkJfQogCQlyZXR1cm4gIiI7CiAJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(198, 'awebermethodnotimplemented', 'LyoqCiAqIE1NX0FXZWJlck1ldGhvZE5vdEltcGxlbWVudGVkCiAqCiAqIFRocm93biB3aGVuIGF0dGVtcHRpbmcgdG8gY2FsbCBhIG1ldGhvZCB0aGF0IGlzIG5vdCBpbXBsZW1lbnRlZCBmb3IgYSByZXNvdXJjZQogKiAvIGNvbGxlY3Rpb24uICBEaWZmZXJzIGZyb20gc3RhbmRhcmQgbWV0aG9kIG5vdCBkZWZpbmVkIGVycm9ycywgYXMgdGhpcyB3aWxsCiAqIGJlIHRocm93biB3aGVuIHRoZSBtZXRob2QgaXMgaW5mYWN0IGltcGxlbWVudGVkIG9uIHRoZSBiYXNlIGNsYXNzLCBidXQgdGhlCiAqIGN1cnJlbnQgcmVzb3VyY2UgdHlwZSBkb2VzIG5vdCBwcm92aWRlIGFjY2VzcyB0byB0aGF0IG1ldGhvZCAoaWUgY2FsbGluZwogKiBnZXRCeU1lc3NhZ2VOdW1iZXIgb24gYSB3ZWJfZm9ybXMgY29sbGVjdGlvbikuCiAqCiAqIEB1c2VzIE1NX0FXZWJlckV4Y2VwdGlvbgogKiBAcGFja2FnZQogKiBAdmVyc2lvbiAkaWQkCiAqLwpjbGFzcyBNTV9BV2ViZXJNZXRob2ROb3RJbXBsZW1lbnRlZCBleHRlbmRzIE1NX0FXZWJlckV4Y2VwdGlvbiB7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRvYmplY3QpIHsKCQkkdGhpcy0+b2JqZWN0ID0gJG9iamVjdDsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCJUaGlzIG1ldGhvZCBpcyBub3QgaW1wbGVtZW50ZWQgYnkgdGhlIGN1cnJlbnQgcmVzb3VyY2UuIik7CgoJfQp9Cg==', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(199, 'abstractsocialloginextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIE1NX0Fic3RyYWN0U29jaWFsTG9naW5FeHRlbnNpb24gaXMgYW4gYWJzdHJhY3QgcmVwcmVzZW50YXRpb24gb2YgYSBwcm92aWRlciBzdXBwb3J0ZWQgYnkgdGhlIEh5YnJpZEF1dGggbGlicmFyeSwgCiAqIHVzZWQgdG8gaW1wbGVtZW50IGxvZ2luIGFuZCBzaWdudXAgZnVuY3Rpb25hbGl0eSB1c2luZyB0aGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlIHRoZSB1c2VyLiAKICogCiAqIENvbnN0cmFpbnRzIG9mIHRoZSBzb2NpYWwgbG9naW4gZXh0ZW5zaW9uczoKICogMS4gRWFjaCBleHRlbnNpb24gaGFzIGEgdW5pcXVlIHRva2VuLiBUaGlzIHRva2VuIGlzIGNhc2UtaW5zZW5zaXRpdmUKICogMi4gRWFjaCB0b2tlbiBpcyBhbHNvIHRoZSB2YWx1ZSB1c2VkIHRvIGlkZW50aWZ5IHRoZSBwcm92aWRlciB3aGVuIHVzaW5nIHRoZSAncHJvdmlkZXInIGF0dHJpYnV0ZSBvZiB0aGUgc29jaWFsIGxvZ2luIGFuZCBzb2NpYWwgc2lnbnVwIHNtYXJ0IHRhZ3MKICogMy4gVGhlIHRva2VuIGlzIGFsc28gdXNlZCBhcyB0aGUgaWRlbnRmaWVyIGZvciB0aGUgcHJvdmlkZXIgd2hlbiBjb21tdW5pY2F0aW5nIHdpdGggdGhlIGh5YnJpZGF1dGggbGlicmFyeQogKgogKi8KY2xhc3MgTU1fQWJzdHJhY3RTb2NpYWxMb2dpbkV4dGVuc2lvbiBleHRlbmRzIE1NX0V4dGVuc2lvbgp7CQoJcHJvdGVjdGVkICRpZCAgICAgICAgICAgID0gIiI7Cglwcm90ZWN0ZWQgJHRva2VuICAgICAgICAgPSAiIjsKCXByb3RlY3RlZCAkcHJvdmlkZXJOYW1lICA9ICIiOwoJcHJvdGVjdGVkICRleHRlbnNpb25OYW1lID0gIiI7Cglwcm90ZWN0ZWQgJGFwaUtleSAgICAgICAgPSAiIjsKCXByb3RlY3RlZCAkYXBpU2VjcmV0ICAgICA9ICIiOwoJcHJvdGVjdGVkICRhY3RpdmUgPSBmYWxzZTsKCQoJcHJvdGVjdGVkICRsaXN0aW5nSW1hZ2UgID0gIiI7Cglwcm90ZWN0ZWQgJGtleU5hbWUgICAgICAgPSAiIjsKCXByb3RlY3RlZCAkc2VjcmV0TmFtZSAgICA9ICIiOwoJCglwcm90ZWN0ZWQgJGFsbG93U2lnbnVwcyA9IGZhbHNlOwoJcHJvdGVjdGVkICRzaWdudXBNZW1iZXJzaGlwTGV2ZWwgPSAiIjsKCQoJcHJvdGVjdGVkICRzdXBwb3J0QXJ0aWNsZVVybCA9ICJodHRwOi8vc3VwcG9ydC5tZW1iZXJtb3VzZS5jb20vc3VwcG9ydC9zb2x1dGlvbnMvIjsKCXByb3RlY3RlZCAkcHJvdmlkZXNFbWFpbCA9IHRydWU7Cglwcm90ZWN0ZWQgJGVtYWlsSGFuZGxpbmcgPSAiIjsKCQoJcHJvdGVjdGVkICRlbmRwb2ludFVybCA9ICIiOwoJcHJvdGVjdGVkICRsaWJyYXJ5VXJsICA9ICIiOwoJcHJvdGVjdGVkICRhZGRpdGlvbmFsSW5mbyA9ICIiOwoJCgkvL3RoaXMgdmFsdWUgaG9sZHMgdGhlIGluc3RhbnRpYXRlZCBhdXRoIGxpYnJhcnkKCXByb3RlY3RlZCAkYXV0aCA9ICIiOwoJCglwdWJsaWMgc3RhdGljICRFTUFJTF9QUk9WSURFRCA9ICJlbWFpbF9wcm92aWRlZCI7CgkKCS8vaGFuZGxpbmcgc3RyYXRlZ2llcyBmb3IgcHJvdmlkZXJzIHRoYXQgZG9uJ3QgYWxsb3cgYWNjZXNzIHRvIHVzZXIgZW1haWwKCXB1YmxpYyBzdGF0aWMgJEVNQUlMX1JFVFJJRVZFRF9CWV9QT1BVUCA9ICJyZXRyaWV2ZWRfYnlfcG9wdXAiOwoJcHVibGljIHN0YXRpYyAkRU1BSUxfR0VORVJBVEVfQk9HVVNfRU1BSUwgPSAiZ2VuZXJhdGVfYm9ndXMiOwoJCgkvL2lkZW50aWZpZXJzIGZvciBjb21tb24gcHJvdmlkZXIgYWN0aW9ucwoJcHVibGljIHN0YXRpYyAkQUNUSU9OX0FVVEhFTlRJQ0FURSAgICAgPSAiYXV0aGVudGljYXRlIjsKCXB1YmxpYyBzdGF0aWMgJEFDVElPTl9HRVRfVVNFUl9QUk9GSUxFID0gImdldF91c2VyX3Byb2ZpbGUiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGF1dG9sb2FkRGVwZW5kZW5jaWVzPXRydWUsJGNvbmZpZ0RhdGE9IiIpIAoJeyAKCQkkdGhpcy0+ZW5kcG9pbnRVcmwgPSBwbHVnaW5zX3VybCgpLiIvIi5NTV9QTFVHSU5fTkFNRS4iL2VuZHBvaW50cy9hdXRoLnBocCI7CgkJJHRoaXMtPmxpYnJhcnlVcmwgID0gcGx1Z2luc191cmwoKS4iLyIuTU1fUExVR0lOX05BTUUuIi9saWIvaHlicmlkYXV0aCI7CgkJJGF1dG9sb2FkRGVwZW5kZW5jaWVzID0gKGJvb2wpJGF1dG9sb2FkRGVwZW5kZW5jaWVzOwoJCWlmICgkYXV0b2xvYWREZXBlbmRlbmNpZXMpCgkJewoJCQkkdGhpcy0+bG9hZERlcGVuZGVuY2llcygpOwoJCX0KCQkkdGhpcy0+bG9hZENvbmZpZ3VyYXRpb24oJGNvbmZpZ0RhdGEpOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCX0KCQoJCgkvKioKCSAqIExvYWRzIGFueSBkZXBlbmRlbmNpZXMgbmVlZGVkIGJ5IHNvY2lhbCBsb2dpbiBwcm92aWRlcnMuIEluaXRpYWxseSB0aGlzIGlzIGp1c3QgdGhlIEh5YnJpZEF1dGggbGlicmFyeQoJICogTm90ZTogTXVzdCBiZSBhYmxlIHRvIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyB3aXRob3V0IGdlbmVyYXRpbmcgYW4gZXJyb3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGxvYWREZXBlbmRlbmNpZXMoKQoJewoJCWlmICgkdGhpcy0+cHJvdmlkZXNFbWFpbCAhPT0gdHJ1ZSkKCQl7CgkJCXdwX2VucXVldWVfc2NyaXB0KCJtZW1iZXJtb3VzZS1ibG9ja1VJIiwgcGx1Z2luc191cmwoTU1fUExVR0lOX05BTUUuIi9yZXNvdXJjZXMvanMvY29tbW9uL2pxdWVyeS5ibG9ja1VJLmpzIiksIGFycmF5KCksIE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCksIHRydWUpOwoJCX0KCQkKCQkkY29tbW9uSlNEaXIgPSAiL3Jlc291cmNlcy9qcy9jb21tb24vIjsKCQkkZGVwZW5kZW5jeSAgPSAoKGlzTG9jYWxJbnN0YWxsKCkgJiYgZmlsZV9leGlzdHMoTU1fUExVR0lOX0FCU1BBVEguInskY29tbW9uSlNEaXJ9Y2xhc3MuanMiKSkgfHwgIWZpbGVfZXhpc3RzKE1NX1BMVUdJTl9BQlNQQVRILiJ7JGNvbW1vbkpTRGlyfW1tLWNvbW1vbi1jb3JlLmpzIikpID8gYXJyYXkoJ2NsYXNzLmpzJykgOiBhcnJheSgnbW0tY29tbW9uLWNvcmUuanMnKTsKCQkKCQl3cF9lbnF1ZXVlX3NjcmlwdCgibWVtYmVybW91c2Utc29jaWFsTG9naW4iLCBwbHVnaW5zX3VybChNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9qcy9jb21tb24vbW0tc29jaWFsX2xvZ2luLmpzIiksICRkZXBlbmRlbmN5LCBNZW1iZXJNb3VzZTo6Z2V0UGx1Z2luVmVyc2lvbigpLCB0cnVlKTsKCQl3cF9sb2NhbGl6ZV9zY3JpcHQoJ21lbWJlcm1vdXNlLXNvY2lhbExvZ2luJywgJ3NvY2lhbExvZ2luVmFycycsIGFycmF5KCJlbmRwb2ludFVybCI9PiR0aGlzLT5lbmRwb2ludFVybCkpOwoJCXJlcXVpcmVfb25jZSggTU1fUExVR0lOX0FCU1BBVEguIi9saWIvaHlicmlkYXV0aC9IeWJyaWQvQXV0aC5waHAiICk7Cgl9CgkKCQoJLyoqCgkgKiBMb2FkcyB0aGUgY29uZmlndXJhdGlvbiBmb3IgYW4gaW1wbGVtZW50aW5nIHNvY2lhbCBsb2dpbiBleHRlbnNpb24gZnJvbSB0aGUgZGIKCSAqIAoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhlIGNvbmZpZ3VyYXRpb24gY291bGQgYmUgbG9hZGVkLCBmYWxzZSBpZiBpdCB3YXMgbm90IGZvdW5kIG9yIHRoZXJlIHdhcyBhbiBlcnJvcgoJICovCglwdWJsaWMgZnVuY3Rpb24gbG9hZENvbmZpZ3VyYXRpb24oJGNvbmZpZ0RhdGE9IiIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCWlmICghZW1wdHkoJHRoaXMtPnRva2VuKSkKCQl7CgkJCWlmICghaXNfYXJyYXkoJGNvbmZpZ0RhdGEpKQoJCQl7CgkJCQkkY29uZmlnID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIGZyb20gIi5NTV9UQUJMRV9TT0NJQUxfTE9HSU5fUFJPVklERVJTLiIgV0hFUkUgdG9rZW4gPSAlcyIsJHRoaXMtPnRva2VuKSk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJGNvbmZpZyA9ICRjb25maWdEYXRhOwoJCQl9CgkJCQoJCQlpZiAoIWVtcHR5KCRjb25maWcpKQoJCQl7CgkJCQkkZGJGaWVsZHMgPSBhcnJheSgiaWQiPT4iaWQiLCJhcGlfa2V5Ij0+ImFwaUtleSIsImFwaV9zZWNyZXQiPT4iYXBpU2VjcmV0Iiwic2lnbnVwX21lbWJlcnNoaXBfbGV2ZWwiPT4ic2lnbnVwTWVtYmVyc2hpcExldmVsIik7CgkJCQlmb3JlYWNoICgkZGJGaWVsZHMgYXMgJGs9PiR2KQoJCQkJewoJCQkJCWlmIChpc3NldCgkY29uZmlnLT4kaykpCgkJCQkJewoJCQkJCQkkdGhpcy0+JHYgPSAkY29uZmlnLT4kazsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCSR0aGlzLT5hY3RpdmUgPSAoaXNzZXQoJGNvbmZpZy0+YWN0aXZlKSAmJiAoJGNvbmZpZy0+YWN0aXZlID09IDEpKT90cnVlOmZhbHNlOwoJCQkJJHRoaXMtPmFsbG93U2lnbnVwcyA9IChpc3NldCgkY29uZmlnLT5hbGxvd19zaWdudXBzKSAmJiAoJGNvbmZpZy0+YWxsb3dfc2lnbnVwcyA9PSAxKSk/dHJ1ZTpmYWxzZTsKCQkJCQoJCQkJaWYgKGlzc2V0KCRjb25maWctPnNldHRpbmdzKSkKCQkJCXsKCQkJCQkkc2V0dGluZ3MgPSB1bnNlcmlhbGl6ZSgkY29uZmlnLT5zZXR0aW5ncyk7CgkJCQkJaWYgKGlzX2FycmF5KCRzZXR0aW5ncykpCgkJCQkJewoJCQkJCQlmb3JlYWNoICgkc2V0dGluZ3MgYXMgJGs9PiR2KQoJCQkJCQl7CgkJCQkJCQlpZiAoaXNzZXQoJHRoaXMtPiRrKSkKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+JGsgPSAkdjsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKioKCSAqIFNhdmVzIHRoZSBjb25maWd1cmF0aW9uIG9mIGFuIGltcGxlbWVudGluZyBzb2NpYWwgbG9naW4gZXh0ZW5zaW9uCgkgKiAKCSAqIEByZXR1cm4gYm9vbGVhbiB0cnVlIGlmIGNvbmZpZ3VyYXRpb24gd2FzIHdyaXR0ZW4gdG8gdGhlIGRiIHN1Y2Nlc3NmdWxseSwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzYXZlQ29uZmlndXJhdGlvbigpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICghZW1wdHkoJHRoaXMtPnRva2VuKSkKCQl7CgkJCSRkYXRhID0gYXJyYXkoCgkJCQkJIm5hbWUiCQkJCQkgID0+ICR0aGlzLT5leHRlbnNpb25OYW1lLAoJCQkJCSJ0b2tlbiIgICAgIAkJCSAgPT4gJHRoaXMtPnRva2VuLAoJCQkJCSJhcGlfa2V5IiAgIAkJCSAgPT4gJHRoaXMtPmFwaUtleSwKCQkJCQkiYXBpX3NlY3JldCIJCQkgID0+ICR0aGlzLT5hcGlTZWNyZXQsCgkJCQkJImFjdGl2ZSIgICAgIAkJCSAgPT4gKCR0aGlzLT5hY3RpdmUpPzE6MCwKCQkJCQkic2V0dGluZ3MiICAgCQkJICA9PiAkdGhpcy0+cHJlcGFyZVNldHRpbmdzKCksCgkJCQkJImFsbG93X3NpZ251cHMiIAkJICA9PiAoJHRoaXMtPmFsbG93U2lnbnVwcyk/MTowLAoJCQkJCSJzaWdudXBfbWVtYmVyc2hpcF9sZXZlbCIgPT4gJHRoaXMtPnNpZ251cE1lbWJlcnNoaXBMZXZlbAoJCQkpOwoJCQlpZiAoZW1wdHkoJHRoaXMtPmlkKSkKCQkJewoJCQkJJHJlcyA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfU09DSUFMX0xPR0lOX1BST1ZJREVSUywkZGF0YSk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJHJlcyA9ICR3cGRiLT51cGRhdGUoTU1fVEFCTEVfU09DSUFMX0xPR0lOX1BST1ZJREVSUywkZGF0YSxhcnJheSgiaWQiPT4kdGhpcy0+aWQpKTsKCQkJfQoJCQlpZiAoJHJlcyAhPT0gZmFsc2UpCgkJCXsKCQkJCSR0aGlzLT5pZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHByZXBhcmVTZXR0aW5ncygpCgl7CgkJJGtub3duRmllbGRzID0gYXJyYXkoImlkIiwicHJvdmlkZXJOYW1lIiwiZXh0ZW5zaW9uTmFtZSIsInRva2VuIiwiYXBpS2V5IiwiYXBpU2VjcmV0IiwiYWN0aXZlIiwia2V5TmFtZSIsInNlY3JldE5hbWUiLCJsaXN0aW5nSW1hZ2UiLAoJCQkJCQkJICJwcm92aWRlc0VtYWlsIiwic3VwcG9ydEFydGljbGVVcmwiLCJzaWdudXBNZW1iZXJzaGlwTGV2ZWwiLCJhbGxvd1NpZ251cHMiLCJhdXRoIik7CgkJaWYgKCR0aGlzLT5wcm92aWRlc0VtYWlsKQoJCXsKCQkJJGtub3duRmllbGRzW10gPSAiZW1haWxIYW5kbGluZyI7CgkJfQoJCSRzZXR0aW5ncyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHRoaXMgYXMgJGs9PiR2KQoJCXsKCQkJaWYgKCFpbl9hcnJheSgkaywka25vd25GaWVsZHMpKQoJCQl7CgkJCQkkc2V0dGluZ3NbJGtdID0gJHY7CgkJCX0KCQl9CgkJcmV0dXJuIHNlcmlhbGl6ZSgkc2V0dGluZ3MpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpc0FjdGl2ZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hY3RpdmUgJiYgJHRoaXMtPmhhc1Blcm1pc3Npb24oKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24oKSAKCXsKCQlyZXR1cm4gKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRFWFRFTlNJT05fU09DSUFMX0xPR0lOKSA9PSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRBQ1RJVkUpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUxpc3RpbmdJdGVtKCkgCgl7CgkJJGNybnRQYWdlID0gTU1fTW9kdWxlVXRpbHM6OmdldFBhZ2UoKTsKCQkkdGhpc0V4dFVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoJGNybnRQYWdlLCBNTV9NT0RVTEVfRVhURU5TSU9OUykuIiYiLk1NX1Nlc3Npb246OiRQQVJBTV9TVUJNT0RVTEUuIj0iLiR0aGlzLT50b2tlbjsKCQk/PgoJCTxkaXYgY2xhc3M9Im1tLWV4dGVuc2lvbiA8P3BocCBlY2hvICR0aGlzLT5pc0FjdGl2ZSgpID8gJ21tLWV4dGVuc2lvbi1hY3RpdmUnIDogJyc7ID8+Ij4KCQk8YSBocmVmPSI8P3BocCBlY2hvICR0aGlzRXh0VXJsOyA/PiI+PGltZyBzcmM9Ijw/cGhwIGVjaG8gJHRoaXMtPmxpc3RpbmdJbWFnZSA/PiIgLz48L2E+CgkJPC9kaXY+CgkJPD9waHAKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdTY3JlZW4oKSAKCXsgCgkJJGNybnRQYWdlID0gTU1fTW9kdWxlVXRpbHM6OmdldFBhZ2UoKTsKCQkkdGhpc0V4dFVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoJGNybnRQYWdlLCBNTV9NT0RVTEVfRVhURU5TSU9OUykuIiYiLk1NX1Nlc3Npb246OiRQQVJBTV9TVUJNT0RVTEUuIj0iLiR0aGlzLT50b2tlbjsKCQk/PgoJCQoJCTxkaXYgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I0ZGRjsgcGFkZGluZzoxMHB4OyB3aWR0aDoyNjBweDsiPgoJCQk8aW1nIHNyYz0iPD9waHAgZWNobyAkdGhpcy0+bGlzdGluZ0ltYWdlOyA/PiIgc3R5bGU9IndpZHRoOjI2MHB4OyIgLz4KCQk8L2Rpdj4KCQkKCQk8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjE1cHg7Ij4KCQkJPGEgaHJlZj0iPD9waHAgZWNobyAkdGhpcy0+c3VwcG9ydEFydGljbGVVcmw7ID8+IiB0YXJnZXQ9Il9ibGFuayI+TmVlZCBoZWxwIGNvbmZpZ3VyaW5nIHRoZSA8P3BocCBlY2hvICR0aGlzLT5leHRlbnNpb25OYW1lOz8+IGV4dGVuc2lvbj88L2E+CgkJPC9kaXY+CgkJCgkJPD9waHAgCgkJaWYoJHRoaXMtPmhhc1Blcm1pc3Npb24oKSkKCQl7CgkJCSRkYXRhU2F2ZWQgPSBmYWxzZTsKCQkJJGVycm9ycyA9ICIiOwoJCQkKCQkJaWYoaXNzZXQoJF9QT1NUWyJtbS1zb2NpYWwtbG9naW4tZm9ybSJdKSkKCQkJewoJCQkJJGlzQWN0aXZlID0gaXNzZXQoJF9QT1NUWyJtbS17JHRoaXMtPnRva2VufS1hY3RpdmUiXSkgPyAkX1BPU1RbIm1tLXskdGhpcy0+dG9rZW59LWFjdGl2ZSJdIDogIiI7CgkJCQkkYXBpS2V5ID0gaXNzZXQoJF9QT1NUWyJtbS1zb2NpYWwtbG9naW4tYXBpLWtleSJdKSA/ICRfUE9TVFsibW0tc29jaWFsLWxvZ2luLWFwaS1rZXkiXSA6ICIiOwoJCQkJJGFwaVNlY3JldCA9IGlzc2V0KCRfUE9TVFsibW0tc29jaWFsLWxvZ2luLWFwaS1zZWNyZXQiXSkgPyAkX1BPU1RbIm1tLXNvY2lhbC1sb2dpbi1hcGktc2VjcmV0Il0gOiAiIjsKCQkJCSRlbWFpbEhhbmRsaW5nID0gKGlzc2V0KCRfUE9TVFsibW0tc29jaWFsLWxvZ2luLWVtYWlsSGFuZGxpbmciXSkgJiYgKCRfUE9TVFsibW0tc29jaWFsLWxvZ2luLWVtYWlsSGFuZGxpbmciXSA9PSBzZWxmOjokRU1BSUxfUkVUUklFVkVEX0JZX1BPUFVQKSkgPyBzZWxmOjokRU1BSUxfUkVUUklFVkVEX0JZX1BPUFVQIDogc2VsZjo6JEVNQUlMX0dFTkVSQVRFX0JPR1VTX0VNQUlMOwoJCQkJJGFsbG93U2lnbnVwcyA9IChpc3NldCgkX1BPU1RbJ21tLXNvY2lhbC1sb2dpbi1hbGxvdy1zaWdudXBzJ10pICYmICgkX1BPU1RbJ21tLXNvY2lhbC1sb2dpbi1hbGxvdy1zaWdudXBzJ10gPT0gIm9uIikpOwoJCQkJJHNpZ251cE1lbWJlcnNoaXBMZXZlbCA9ICgkYWxsb3dTaWdudXBzICYmIGlzc2V0KCRfUE9TVFsnbW0tc29jaWFsLWxvZ2luLXNpZ251cC1tZW1iZXJzaGlwLWxldmVsJ10pKT8kX1BPU1RbJ21tLXNvY2lhbC1sb2dpbi1zaWdudXAtbWVtYmVyc2hpcC1sZXZlbCddOiIiOwoJCQkJCgkJCQlpZigkaXNBY3RpdmUgPT0gIm9uIiAmJiAoZW1wdHkoJGFwaUtleSkgfHwgZW1wdHkoJGFwaVNlY3JldCkpKQoJCQkJewoJCQkJCWlmKGVtcHR5KCRhcGlLZXkpKQoJCQkJCXsKCQkJCQkJJGVycm9ycyAuPSAieyR0aGlzLT5nZXRLZXlOYW1lKCl9IGlzIHJlcXVpcmVkLlxcbiI7CQoJCQkJCX0KCQkJCQkKCQkJCQlpZihlbXB0eSgkYXBpU2VjcmV0KSkKCQkJCQl7CgkJCQkJCSRlcnJvcnMgLj0gInskdGhpcy0+Z2V0U2VjcmV0TmFtZSgpfSBpcyByZXF1aXJlZC4iOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJaWYgKGVtcHR5KCRlcnJvcnMpKQoJCQkJewoJCQkJCSR0aGlzLT5zZXRBY3RpdmUoKCRpc0FjdGl2ZSA9PSAib24iKSk7CgkJCQkJJHRoaXMtPnNldEFwaUtleSgkYXBpS2V5KTsKCQkJCQkkdGhpcy0+c2V0QXBpU2VjcmV0KCRhcGlTZWNyZXQpOwoJCQkJCWlmICghJHRoaXMtPnByb3ZpZGVzRW1haWwpCgkJCQkJewoJCQkJCQkkdGhpcy0+ZW1haWxIYW5kbGluZyA9ICRlbWFpbEhhbmRsaW5nOwoJCQkJCX0KCQkJCQkkdGhpcy0+c2V0QWxsb3dTaWdudXBzKCRhbGxvd1NpZ251cHMpOwoJCQkJCSR0aGlzLT5zaWdudXBNZW1iZXJzaGlwTGV2ZWwgPSAoJGFsbG93U2lnbnVwcyk/aW50dmFsKCRzaWdudXBNZW1iZXJzaGlwTGV2ZWwpOjA7CgkJCQkJJGRhdGFTYXZlZCA9ICR0aGlzLT5zYXZlQ29uZmlndXJhdGlvbigpOwoJCQkJCWlmICghJGRhdGFTYXZlZCkKCQkJCQl7CgkJCQkJCSRlcnJvcnMgLj0gIlRoZXJlIHdhcyBhbiBlcnJvciBzYXZpbmcgdGhlIGNvbmZpZ3VyYXRpb24iOwkKCQkJCQl9CgkJCQl9CgkJCX0KCQkJPz4KCQkJCgkJCTxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIiPgoJCQk8aW5wdXQgdHlwZT0iaGlkZGVuIiBuYW1lPSJtbS1zb2NpYWwtbG9naW4tZm9ybSIgdmFsdWU9InNhdmUiIC8+CgkJCTx0YWJsZSBzdHlsZT0id2lkdGg6NTIwcHg7IGJvcmRlci1zcGFjaW5nOiAxMHB4OyBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlOyI+CgkJCTx0cj4KCQkJCTx0ZCBjb2xzcGFuPSIyIj4KCQkJCQk8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHg7Ij4KCQkJCQkJPGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJtbS08P3BocCBlY2hvICR0aGlzLT50b2tlbjsgPz4tYWN0aXZlIiA8P3BocCBlY2hvICgkdGhpcy0+aXNBY3RpdmUoKSkgPyAiY2hlY2tlZCIgOiAiIjsgPz4gLz4gCgkJCQkJCQlFbmFibGUgPHNwYW4gc3R5bGU9J2ZvbnQtd2VpZ2h0OmJvbGQnPjw/cGhwIGVjaG8gJHRoaXMtPmV4dGVuc2lvbk5hbWU7ID8+PC9zcGFuPiBFeHRlbnNpb24KCQkJCQk8L2Rpdj4KCQkJCTwvdGQ+CgkJCTwvdHI+CgkJCTx0cj4KCQkJCTx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246dG9wOyI+PD9waHAgZWNobyAkdGhpcy0+Z2V0S2V5TmFtZSgpOyA/PjwvdGQ+CgkJCQk8dGQ+CgkJCQkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im1tLXNvY2lhbC1sb2dpbi1hcGkta2V5IiBzdHlsZT0iZm9udC1mYW1pbHk6IGNvdXJpZXI7IGZvbnQtc2l6ZToxMXB4OyB3aWR0aDoyNTBweDsiIHZhbHVlPSI8P3BocCBlY2hvICR0aGlzLT5hcGlLZXkgPz4iIC8+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOnRvcDsiPjw/cGhwIGVjaG8gJHRoaXMtPmdldFNlY3JldE5hbWUoKTsgPz48L3RkPgoJCQkJPHRkPgoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJtbS1zb2NpYWwtbG9naW4tYXBpLXNlY3JldCIgc3R5bGU9ImZvbnQtZmFtaWx5OiBjb3VyaWVyOyBmb250LXNpemU6MTFweDsgd2lkdGg6MjUwcHg7IiB2YWx1ZT0iPD9waHAgZWNobyAkdGhpcy0+YXBpU2VjcmV0OyA/PiIgLz4KCQkJCTwvdGQ+CgkJCTwvdHI+CgkJCTx0cj4KCQkJCTx0ZCBzdHlsZT0idmVydGljYWwtYWxpZ246dG9wOyI+QWxsb3cgU2lnbnVwcz88L3RkPgoJCQkJPHRkIGFsaWduPSJsZWZ0Ij4KCQkJCQk8aW5wdXQgdHlwZT0iY2hlY2tib3giIG9uQ2xpY2s9ImpRdWVyeSh0aGlzKS5pcygnOmNoZWNrZWQnKT9qUXVlcnkoJy5tbS1zaWdudXAtbWVtYmVyc2hpcC1sZXZlbC1yb3cnKS5zaG93KCdmYXN0Jyk6alF1ZXJ5KCcubW0tc2lnbnVwLW1lbWJlcnNoaXAtbGV2ZWwtcm93JykuaGlkZSgnZmFzdCcpOyIgbmFtZT0ibW0tc29jaWFsLWxvZ2luLWFsbG93LXNpZ251cHMiIHN0eWxlPSJmb250LWZhbWlseTogY291cmllcjsgZm9udC1zaXplOjExcHg7IiA8P3BocCBlY2hvICgkdGhpcy0+c2lnbnVwTWVtYmVyc2hpcExldmVsICE9ICIiKT8iQ0hFQ0tFRCI6IiI7Pz4gLz4KCQkJCTwvdGQ+CgkJCTwvdHI+CgkJCTw/cGhwIGlmICghJHRoaXMtPnByb3ZpZGVzRW1haWwpIHsgPz4KCQkJPHRyIGNsYXNzPSJtbS1zaWdudXAtbWVtYmVyc2hpcC1sZXZlbC1yb3ciIDw/cGhwIGVjaG8gKCR0aGlzLT5zaWdudXBNZW1iZXJzaGlwTGV2ZWwgPT0gIiIpPyJzdHlsZT0nZGlzcGxheTpub25lOyciOiIiOz8+PgoJCQkJPHRkIGNvbHNwYW49IjIiIE5PV1JBUD48P3BocCBlY2hvIE1NX1V0aWxzOjpnZXRJbmZvSWNvbigiIiwgIm1hcmdpbi1yaWdodDo0cHg7Iik7ID8+PD9waHAgZWNobyAkdGhpcy0+cHJvdmlkZXJOYW1lOyA/PiBkb2VzIG5vdCBhbGxvdyBhY2Nlc3MgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLiBQbGVhc2Ugc2VsZWN0IGhvdyB0byBoYW5kbGUgc2lnbnVwczo8L3RkPgoJCQk8L3RyPgoJCQk8dHIgY2xhc3M9Im1tLXNpZ251cC1tZW1iZXJzaGlwLWxldmVsLXJvdyIgPD9waHAgZWNobyAoJHRoaXMtPnNpZ251cE1lbWJlcnNoaXBMZXZlbCA9PSAiIik/InN0eWxlPSdkaXNwbGF5Om5vbmU7JyI6IiI7Pz4+CgkJCQk8dGQgY29sc3Bhbj0iMiI+CgkJCQkJPGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJtbS1zb2NpYWwtbG9naW4tZW1haWxIYW5kbGluZyIgdmFsdWU9Ijw/cGhwIGVjaG8gc2VsZjo6JEVNQUlMX1JFVFJJRVZFRF9CWV9QT1BVUDs/PiIgPD9waHAgZWNobyAoZW1wdHkoJHRoaXMtPmVtYWlsSGFuZGxpbmcpIHx8ICgkdGhpcy0+ZW1haWxIYW5kbGluZyA9PSBzZWxmOjokRU1BSUxfUkVUUklFVkVEX0JZX1BPUFVQKSk/IkNIRUNLRUQiOiIiOyA/Pj5Qb3B1cCBhIGRpYWxvZyBhbmQgcmVxdWVzdCB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3M8YnIvPgoJCQkJCTxpbnB1dCB0eXBlPSJyYWRpbyIgbmFtZT0ibW0tc29jaWFsLWxvZ2luLWVtYWlsSGFuZGxpbmciIHZhbHVlPSI8P3BocCBlY2hvIHNlbGY6OiRFTUFJTF9HRU5FUkFURV9CT0dVU19FTUFJTDs/PiIgPD9waHAgZWNobyAoJHRoaXMtPmVtYWlsSGFuZGxpbmcgPT0gc2VsZjo6JEVNQUlMX0dFTkVSQVRFX0JPR1VTX0VNQUlMKT8iQ0hFQ0tFRCI6IiI7ID8+PkdlbmVyYXRlIGEgZmFrZSBlbWFpbCBhZGRyZXNzPGJyLz4KCQkJCTwvdGQ+CgkJCQkKCQkJPC90cj4KCQkJPD9waHAgfSA/PgoJCQk8dHIgY2xhc3M9Im1tLXNpZ251cC1tZW1iZXJzaGlwLWxldmVsLXJvdyIgPD9waHAgZWNobyAoJHRoaXMtPnNpZ251cE1lbWJlcnNoaXBMZXZlbCA9PSAiIik/InN0eWxlPSdkaXNwbGF5Om5vbmU7JyI6IiI7Pz4+CgkJCQk8dGQgc3R5bGU9InZlcnRpY2FsLWFsaWduOnRvcDsiIE5PV1JBUD5TaWdudXAgTWVtYmVyc2hpcCBMZXZlbDwvdGQ+CgkJCQk8dGQ+CgkJCQkJPHNlbGVjdCBuYW1lPSJtbS1zb2NpYWwtbG9naW4tc2lnbnVwLW1lbWJlcnNoaXAtbGV2ZWwiPgoJCQkJCQk8P3BocCBlY2hvIE1NX0h0bWxVdGlsczo6Z2V0TWVtYmVyc2hpcHMoJHRoaXMtPnNpZ251cE1lbWJlcnNoaXBMZXZlbCx0cnVlLE1NX01lbWJlcnNoaXBMZXZlbDo6JFNVQl9UWVBFX0ZSRUUpOyA/PgoJCQkJCTwvc2VsZWN0PgoJCQkJPC90ZD4KCQkJPC90cj4KCQkJPD9waHAgaWYgKCFlbXB0eSgkdGhpcy0+YWRkaXRpb25hbEluZm8pKSBlY2hvICR0aGlzLT5hZGRpdGlvbmFsSW5mbzsgPz4KCQkJPHRyPgoJCQkJPHRkIGNvbHNwYW49IjIiIHN0eWxlPSJwYWRkaW5nLXRvcDoxMHB4OyI+CgkJCQkJPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0iU3VibWl0IiBjbGFzcz0ibW0tdWktYnV0dG9uIGJsdWUiIHZhbHVlPSJTYXZlIENvbmZpZ3VyYXRpb24iIC8+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQk8L3RhYmxlPgoJCQk8L2Zvcm0+CgkJCQoJCQk8cCBjbGFzcz0ibW0tc2VjdGlvbi1oZWFkZXIiIHN0eWxlPSJmb250LXNpemU6MjBweCAhaW1wb3J0YW50OyBtYXJnaW4tdG9wOjIwcHg7IG1hcmdpbi1ib3R0b206MjBweDsiPlNpZ251cCBCdXR0b24gU21hcnRUYWc8L3A+CgkJCQogIAkJCTxwPlRoZSBmb2xsb3dpbmcgU21hcnRUYWcgZ2VuZXJhdGVzIGEgYnV0dG9uIHRoYXQgY3VzdG9tZXJzIGNhbiB1c2UgdG8gc2lnbiB1cCBmb3IgYSBuZXcgYWNjb3VudDo8L3A+CiAgCQkJCiAgCQkJPHA+PGNvZGUgc3R5bGU9ImZvbnQtc2l6ZToxNHB4OyI+W01NX1NvY2lhbF9TaWdudXBfQnV0dG9uIHByb3ZpZGVyPSc8P3BocCBlY2hvICR0aGlzLT50b2tlbjsgPz4nXTwvY29kZT48L3A+CiAgCQkJCiAgCQkJPHA+CiAgCQkJCTxlbT5PcHRpb25hbCBBdHRyaWJ1dGVzOjwvZW0+CiAgCQkJCQogIAkJCQk8cCBzdHlsZT0ibWFyZ2luLWxlZnQ6MTVweDsiPgogIAkJCQk8Y29kZT5tZW1iZXJzaGlwTGV2ZWw8L2NvZGU+IC0gWW91IGNhbiBvcHRpb25hbGx5IHVzZSB0aGlzIGF0dHJpYnV0ZSB0byBvdmVycmlkZSB0aGUgZGVmYXVsdCBzaWdudXAgbWVtYmVyc2hpcCBsZXZlbAogIAkJCQlkZWZpbmVkIGFib3ZlLiBJdCB0YWtlcyBhIG1lbWJlcnNoaXAgbGV2ZWwgSUQgZm9yIGZyZWUgbWVtYmVyc2hpcCBsZXZlbHMgb25seS4gRm9yIGV4YW1wbGU6PGJyLz4KICAJCQkJPGNvZGU+W01NX1NvY2lhbF9TaWdudXBfQnV0dG9uIHByb3ZpZGVyPSc8P3BocCBlY2hvICR0aGlzLT50b2tlbjsgPz4nIG1lbWJlcnNoaXBMZXZlbD0nMiddPC9jb2RlPjwvcD4KICAJCQk8L3A+CQogIAkJCQogIAkJCTxwIGNsYXNzPSJtbS1zZWN0aW9uLWhlYWRlciIgc3R5bGU9ImZvbnQtc2l6ZToyMHB4ICFpbXBvcnRhbnQ7IG1hcmdpbi10b3A6MjBweDsgbWFyZ2luLWJvdHRvbToyMHB4OyI+TG9naW4gQnV0dG9uIFNtYXJ0VGFnPC9wPgogIAkJCQogIAkJCTxwPlRoZSBmb2xsb3dpbmcgU21hcnRUYWcgZ2VuZXJhdGVzIGEgYnV0dG9uIHRoYXQgY3VzdG9tZXJzIGNhbiB1c2UgdG8gbG9nIGludG8gYW4gZXhpc3RpbmcgYWNjb3VudDo8L3A+CiAgCQkJCiAgCQkJPHA+PGNvZGUgc3R5bGU9ImZvbnQtc2l6ZToxNHB4OyI+W01NX1NvY2lhbF9Mb2dpbl9CdXR0b24gcHJvdmlkZXI9Jzw/cGhwIGVjaG8gJHRoaXMtPnRva2VuOyA/PiddPC9jb2RlPjwvcD4KICAJCQkKICAJCQk8cCBzdHlsZT0ibWFyZ2luLXRvcDozMHB4OyI+PHN0cm9uZz5OT1RFOjwvc3Ryb25nPiBZb3UgY2FuIHNldCB0aGUgPGNvZGU+cHJvdmlkZXI8L2NvZGU+IGF0dHJpYnV0ZSB0byA8Y29kZT5hbGw8L2NvZGU+IHRvIAogIAkJCWdlbmVyYXRlIHNpZ251cCBvciBsb2dpbiBidXR0b25zIGZvciBhbGwgYWN0aXZlIHNvY2lhbCBsb2dpbiBwcm92aWRlcnMuIFNvIGlmIHlvdSBoYXZlIEdvb2dsZSBhbmQgRmFjZWJvb2sgYWN0aXZlLCB0aGlzIHNpbmdsZSBTbWFydFRhZwogIAkJCXdpbGwgZ2VuZXJhdGUgYSBidXR0b24gZm9yIGVhY2guIEZvciBleGFtcGxlOjwvcD4KICAJCQkKICAJCQk8cD48Y29kZSBzdHlsZT0iZm9udC1zaXplOjE0cHg7Ij5bTU1fU29jaWFsX1NpZ251cF9CdXR0b24gcHJvdmlkZXI9J2FsbCddPC9jb2RlPjwvcD4KICAJCQk8cD48Y29kZSBzdHlsZT0iZm9udC1zaXplOjE0cHg7Ij5bTU1fU29jaWFsX0xvZ2luX0J1dHRvbiBwcm92aWRlcj0nYWxsJ108L2NvZGU+PC9wPgoJCQkKCQkJPD9waHAgCgkJCWlmKCRkYXRhU2F2ZWQpCgkJCXsKCQkJCT8+CgkJCQk8c2NyaXB0PmFsZXJ0KCJDb25maWd1cmF0aW9uIHNhdmVkIHN1Y2Nlc3NmdWxseSIpOzwvc2NyaXB0PgoJCQkJPD9waHAKCQkJfQoJCQkKCQkJaWYoIWVtcHR5KCRlcnJvcnMpKQoJCQl7CgkJCQk/PgoJCQkJPHNjcmlwdD5hbGVydCgiPD9waHAgZWNobyAkZXJyb3JzOyA/PiIpOzwvc2NyaXB0PgoJCQkJPD9waHAKCQkJfQoJCX0KCQllbHNlCgkJewoJCQk/PgoJCSAJPGRpdiBpZD0ibWVzc2FnZSIgY2xhc3M9ImVycm9yIiBzdHlsZT0icGFkZGluZzoxMHB4OyI+CgkJCQlJbiBvcmRlciB0byB1c2UgdGhlIDw/cGhwIGVjaG8gJHRoaXMtPmV4dGVuc2lvbk5hbWU7ID8+IGV4dGVuc2lvbiB5b3UgbXVzdCBiZSBvbiB0aGUgQWR2YW5jZWQgcGxhbiBvciBoaWdoZXIuIFlvdSBjYW4gdXBncmFkZSB5b3VyIGxpY2Vuc2UgYnkgbG9nZ2luZyBpbnRvIHlvdXIgYWNjb3VudCBvbiA8YSBocmVmPSJodHRwOi8vbWVtYmVybW91c2UuY29tIj5tZW1iZXJtb3VzZS5jb208L2E+IGFuZCBnb2luZyB0byB0aGUgPGVtPk15IEFjY291bnQ8L2VtPiBwYWdlLgoJCQk8L2Rpdj4KCQkgCTw/cGhwIAoJCX0KCX0KCQoJCglwdWJsaWMgZmluYWwgZnVuY3Rpb24gZG9Jbml0SG9vaygpCgl7CgkJLy9yZWdpc3RlciBzb2NpYWwgbG9naW4gc21hcnQgdGFncwoJCS8vVE9ETzogb25seSBhZGQgdGhlIHNob3J0Y29kZXMgb25jZSwgZXZlbiBpZiBtdWx0aXBsZSBwcm92aWRlcnMgYXJlIGFjdGl2ZQoJCWFkZF9zaG9ydGNvZGUoJ01NX1NvY2lhbF9Mb2dpbl9CdXR0b24nLCBhcnJheSgkdGhpcywgInByb2Nlc3NTb2NpYWxMb2dpblNob3J0Y29kZSIpKTsKCQlhZGRfc2hvcnRjb2RlKCdNTV9Tb2NpYWxfU2lnbnVwX0J1dHRvbicsIGFycmF5KCR0aGlzLCAicHJvY2Vzc1NvY2lhbFNpZ251cFNob3J0Y29kZSIpKTsJCQoJfQoJCgkKCXB1YmxpYyBmaW5hbCBmdW5jdGlvbiBwcm9jZXNzU29jaWFsTG9naW5TaG9ydGNvZGUoJGF0dHMpCgl7CgkJcmV0dXJuICR0aGlzLT5wcm9jZXNzQ29tbW9uU29jaWFsU2hvcnRjb2RlKCRhdHRzKTsKCX0KCQoJCglwdWJsaWMgZmluYWwgZnVuY3Rpb24gcHJvY2Vzc1NvY2lhbFNpZ251cFNob3J0Y29kZSgkYXR0cykKCXsKCQlyZXR1cm4gJHRoaXMtPnByb2Nlc3NDb21tb25Tb2NpYWxTaG9ydGNvZGUoJGF0dHMsZmFsc2UpOwoJfQoJCgkKCXByb3RlY3RlZCBmaW5hbCBmdW5jdGlvbiBwcm9jZXNzQ29tbW9uU29jaWFsU2hvcnRjb2RlKCRhdHRzLCRpc0xvZ2luPXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRwcm92aWRlcnMgPSBhcnJheSgpOwoJCWlmICghaXNzZXQoJGF0dHNbJ3Byb3ZpZGVyJ10pIHx8IChzdHJ0b2xvd2VyKCRhdHRzWydwcm92aWRlciddKSA9PSAiYWxsIikpCgkJewoJCQkkYWN0aXZlUHJvdmlkZXJUb2tlbnMgPSAkd3BkYi0+Z2V0X2NvbCgiU0VMRUNUIHRva2VuIEZST00gIi5NTV9UQUJMRV9TT0NJQUxfTE9HSU5fUFJPVklERVJTLiIgV0hFUkUgYWN0aXZlPTEiKTsKCQkJZm9yZWFjaCAoJGFjdGl2ZVByb3ZpZGVyVG9rZW5zIGFzICRhY3RpdmVQcm92aWRlclRva2VuKQoJCQl7CgkJCQkkdGhpc1Byb3ZpZGVyID0gTU1fRXh0ZW5zaW9uc0ZhY3Rvcnk6OmdldEV4dGVuc2lvbigkYWN0aXZlUHJvdmlkZXJUb2tlbik7CgkJCQlpZiAoIWlzX251bGwoJHRoaXNQcm92aWRlcikgJiYgKCR0aGlzUHJvdmlkZXIgaW5zdGFuY2VvZiBNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uKSkKCQkJCXsKCQkJCQkkcHJvdmlkZXJzW10gPSAkdGhpc1Byb3ZpZGVyOwoJCQkJfQoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkvL3NpbmdsZSBwcm92aWRlciB3YXMgcmVxdWVzdGVkIC0gbm9ybWFsaXplIHRoZSBwcm92aWRlciBuYW1lIGludG8gdGhlIGZvcm1hdCB1c2VkIGJ5IHRoZSB0b2tlbnMKCQkJJHRoaXNQcm92aWRlciA9IE1NX0V4dGVuc2lvbnNGYWN0b3J5OjpnZXRFeHRlbnNpb24odWNmaXJzdCgkYXR0c1sncHJvdmlkZXInXSkpOwoJCQlpZiAoIWlzX251bGwoJHRoaXNQcm92aWRlcikgJiYgKCR0aGlzUHJvdmlkZXIgaW5zdGFuY2VvZiBNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uKSkKCQkJewoJCQkJJHByb3ZpZGVyc1tdID0gJHRoaXNQcm92aWRlcjsKCQkJfQoJCX0KCQkKCQkvL25vdyB0aGUgcHJvdmlkZXJzIGFycmF5IGNvbnRhaW5zIGFsbCB0aGUgcHJvdmlkZXJzIHRoYXQgbmVlZCB0byBiZSByZW5kZXJlZAoJCQoJCSRvdXRwdXQ9IiI7CgkJZm9yZWFjaCAoJHByb3ZpZGVycyBhcyAkY3VycmVudFByb3ZpZGVyKQoJCXsKCQkJJHNob3J0Y29kZU1lbWJlcnNoaXBMZXZlbCA9IGlzc2V0KCRhdHRzWydtZW1iZXJzaGlwbGV2ZWwnXSk/JGF0dHNbJ21lbWJlcnNoaXBsZXZlbCddOiIiOwoJCQkkc2hvcnRjb2RlUmVkaXJlY3RVcmwgPSBpc3NldCgkYXR0c1sncmVkaXJlY3R1cmwnXSk/JGF0dHNbJ3JlZGlyZWN0dXJsJ106IiI7CgkJCSRzaG9ydGNvZGVGdW5jdGlvbiA9ICRpc0xvZ2luPyJzb2NpYWxsb2dpbl9qcy5zb2NpYWxMb2dpbkxvZ2luIjoic29jaWFsbG9naW5fanMuc29jaWFsTG9naW5TaWdudXAiOwoJCQlpZiAoJGlzTG9naW4pCgkJCXsKCQkJCSRzaG9ydGNvZGVGdW5jdGlvbiA9ICJzb2NpYWxsb2dpbl9qcy5zb2NpYWxMb2dpbkxvZ2luIjsKCQkJfQoJCQllbHNlIGlmICgkY3VycmVudFByb3ZpZGVyLT5nZXRFbWFpbEhhbmRsaW5nU3RyYXRlZ3koKSA9PSBNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uOjokRU1BSUxfUkVUUklFVkVEX0JZX1BPUFVQKQoJCQl7CQoJCQkJJHNob3J0Y29kZUZ1bmN0aW9uID0gInNvY2lhbGxvZ2luX2pzLnNvY2lhbExvZ2luU2lnbnVwUHJvbXB0Rm9yRW1haWwiOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRzaG9ydGNvZGVGdW5jdGlvbiA9ICJzb2NpYWxsb2dpbl9qcy5zb2NpYWxMb2dpblNpZ251cCI7CQoJCQl9CgkJCSRzaG9ydGNvZGVMaW5rVGV4dCA9ICgkaXNMb2dpbj8iTG9naW4gIjoiU2lnbnVwICIpLiJ3aXRoIHskY3VycmVudFByb3ZpZGVyLT5wcm92aWRlck5hbWV9IjsKCQkJJHNob3J0Y29kZVRva2VuTmFtZSA9IHVjZmlyc3QoJGN1cnJlbnRQcm92aWRlci0+dG9rZW4pOwoJCQkkc2hvcnRjb2RlQ2xhc3MgPSAkaXNMb2dpbj8ibW0tc29jaWFsTG9naW57JHNob3J0Y29kZVRva2VuTmFtZX1Mb2dpbiI6Im1tLXNvY2lhbExvZ2lueyRzaG9ydGNvZGVUb2tlbk5hbWV9U2lnbnVwIjsKCQkJJG91dHB1dC49IjxhIGhyZWY9XCJqYXZhc2NyaXB0Onskc2hvcnRjb2RlRnVuY3Rpb259KCd7JGN1cnJlbnRQcm92aWRlci0+dG9rZW59JywneyRzaG9ydGNvZGVNZW1iZXJzaGlwTGV2ZWx9JywneyRzaG9ydGNvZGVSZWRpcmVjdFVybH0nKTtcIiBjbGFzcz0neyRzaG9ydGNvZGVDbGFzc30nIHRpdGxlPSd7JHNob3J0Y29kZUxpbmtUZXh0fSc+eyRzaG9ydGNvZGVMaW5rVGV4dH08L2E+ICI7CgkJfQoJCXJldHVybiAkb3V0cHV0OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBhdXRoZW50aWNhdGUoKQoJewoJCXRyeSAKCQl7CgkJCSRhdXRoID0gJHRoaXMtPmdldEF1dGgoKTsKCQkJQCRhdXRoLT5hdXRoZW50aWNhdGUoJHRoaXMtPnRva2VuKTsgLy9zdXBwcmVzcyBwb29ybHkgaGFuZGxlZCBoeWJyaWRhdXRoIGVycm9ycyB3aGVuIHR3aXR0ZXIgY3JlZGVudGlhbHMgYXJlIHdyb25nCgkJCWlmICgkYXV0aC0+aXNDb25uZWN0ZWRXaXRoKCR0aGlzLT50b2tlbikpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJhdXRoZW50aWNhdGlvbiBmYWlsZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJlcnJvciBhdXRoZW50aWNhdGluZyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRVc2VyUHJvZmlsZSgpCgl7CgkJJGF1dGggPSAkdGhpcy0+Z2V0QXV0aCgpOwoJCWlmICgkYXV0aC0+aXNDb25uZWN0ZWRXaXRoKCR0aGlzLT50b2tlbikpCgkJewoJCQkkYWRhcHRlciA9ICRhdXRoLT5nZXRBZGFwdGVyKCR0aGlzLT50b2tlbik7CgkJCSRwcm9maWxlID0gJGFkYXB0ZXItPmdldFVzZXJQcm9maWxlKCk7CgkJCWlmICgkcHJvZmlsZSBpbnN0YW5jZW9mIEh5YnJpZF9Vc2VyX1Byb2ZpbGUpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHByb2ZpbGUpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgdXNlciBwcm9maWxlIixNTV9SZXNwb25zZTo6JEVSUk9SKTsJCgkJCX0KCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgibm90IGNvbm5lY3RlZCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEFwaUtleSgpIAoJewoJCXJldHVybiAkdGhpcy0+YXBpS2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBcGlLZXkoJGFwaUtleSkgCgl7CgkJJHRoaXMtPmFwaUtleSA9ICRhcGlLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEFwaVNlY3JldCgpIAoJewoJCXJldHVybiAkdGhpcy0+YXBpU2VjcmV0OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBcGlTZWNyZXQoJGFwaVNlY3JldCkgCgl7CgkJJHRoaXMtPmFwaVNlY3JldCA9ICRhcGlTZWNyZXQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEFjdGl2ZSgpIAoJewoJCXJldHVybiAkdGhpcy0+YWN0aXZlOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBY3RpdmUoJGFjdGl2ZSkgCgl7CgkJJHRoaXMtPmFjdGl2ZSA9ICRhY3RpdmU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEtleU5hbWUoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmtleU5hbWU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFNlY3JldE5hbWUoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPnNlY3JldE5hbWU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEVtYWlsSGFuZGxpbmdTdHJhdGVneSgpCgl7CgkJaWYgKCR0aGlzLT5wcm92aWRlc0VtYWlsKQoJCXsKCQkJcmV0dXJuIHNlbGY6OiRFTUFJTF9QUk9WSURFRDsKCQl9CgkJZWxzZSBpZiAoJHRoaXMtPmVtYWlsSGFuZGxpbmcgPT0gc2VsZjo6JEVNQUlMX0dFTkVSQVRFX0JPR1VTX0VNQUlMKQoJCXsKCQkJcmV0dXJuIHNlbGY6OiRFTUFJTF9HRU5FUkFURV9CT0dVU19FTUFJTDsKCQl9CgkJcmV0dXJuIHNlbGY6OiRFTUFJTF9SRVRSSUVWRURfQllfUE9QVVA7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldEF1dGgoKQoJewoJCWlmICghY2xhc3NfZXhpc3RzKCJIeWJyaWRfYXV0aCIpKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwkKCQl9CgkJCgkJaWYgKCFlbXB0eSgkdGhpcy0+YXV0aCkgJiYgKCR0aGlzLT5hdXRoIGluc3RhbmNlb2YgSHlicmlkX0F1dGgpKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5hdXRoOwoJCX0KCQkKCQkkdGhpcy0+YXV0aCA9IG5ldyBIeWJyaWRfQXV0aCgkdGhpcy0+Z2V0SHlicmlkQXV0aENvbmZpZygpKTsKCQlyZXR1cm4gJHRoaXMtPmF1dGg7CQkJCgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGdldEh5YnJpZEF1dGhDb25maWcoKQoJewoJCSRjb25maWcgPSBhcnJheSgKCQkJCSJiYXNlX3VybCIgPT4gTU1fUExVR0lOX1VSTC4iL2xpYi9oeWJyaWRhdXRoLyIsCgkJKTsKCQlyZXR1cm4gJGNvbmZpZzsKCX0KCQoJCgkvKioKCSAqIFNhbWUgYXMgZ2V0QWxsb3dzU2lnbnVwcygpLCBpbmNsdWRlZCBmb3IgaW5jcmVhc2VkIHJlYWRhYmlsaXR5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBhbGxvd3NTaWdudXBzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmFsbG93U2lnbnVwczsJCgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEFsbG93U2lnbnVwcygpIAoJewoJCXJldHVybiAkdGhpcy0+YWxsb3dTaWdudXBzOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRBbGxvd1NpZ251cHMoJGFsbG93U2lnbnVwcykgCgl7CgkJJHRoaXMtPmFsbG93U2lnbnVwcyA9ICRhbGxvd1NpZ251cHM7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGxpbmtVc2VyVG9Tb2NpYWxNZWRpYUFjY291bnQoTU1fVXNlciAkdXNlciwgJHNvY2lhbE1lZGlhVW5pcXVlSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlNvY2lhbCBMb2dpbjogVW5hYmxlIHRvIGxpbmsgdXNlciB0byBzb2NpYWwgbWVkaWEgYWNjb3VudCBiZWNhdXNlIHRoZSB1c2VyIGlzIGludmFsaWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoZW1wdHkoJHNvY2lhbE1lZGlhVW5pcXVlSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiU29jaWFsIExvZ2luOiBVbmFibGUgdG8gbGluayB1c2VyIHRvIHNvY2lhbCBtZWRpYSBhY2NvdW50IGJlY2F1c2UgdGhlIHNvY2lhbCBuZXR3b3JrIHVuaXF1ZSBpZCBpcyBpbnZhbGlkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgoJCS8vY2FuJ3QgcmVtb3ZlIGEgbGlua2VkIGFjY291bnQgd2l0aCBhIGJvZ3VzIGVtYWlsLCBiZWNhdXNlIHRoZW4gdGhlcmUgaXMgbm8gd2F5IHRvIGxvZyBpbgoJCSRyZXMgPSAkd3BkYi0+cmVwbGFjZShNTV9UQUJMRV9TT0NJQUxfTE9HSU5fTElOS0VEX1BST0ZJTEVTLCBhcnJheSgKCQkJCQkicHJvdmlkZXJfaWQiID0+ICR0aGlzLT5pZCwKCQkJCQkidW5pcXVlX2lkIgkgID0+ICRzb2NpYWxNZWRpYVVuaXF1ZUlkLAoJCQkJCSJ1c2VyX2lkIiAgICAgPT4gJHVzZXItPmdldElkKCksCgkJCQkJInJlbW92YWJsZSIJICA9PiAoJHRoaXMtPmdldEVtYWlsSGFuZGxpbmdTdHJhdGVneSgpID09IHNlbGY6OiRFTUFJTF9HRU5FUkFURV9CT0dVU19FTUFJTCk/MDoxCgkJCQkpKTsKCQkKCQlpZiAoJHJlcyA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTb2NpYWwgTG9naW46IFVuYWJsZSB0byBsaW5rIHVzZXIgdG8gc29jaWFsIG1lZGlhIGFjY291bnQgYmVjYXVzZSBvZiBhIGRhdGFiYXNlIGVycm9yIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIFJldHJpZXZlcyBhIHVzZXIgbGlua2VkIHRvIGEgdW5pcXVlIHNvY2lhbCBuZXR3b3JrIGlkZW50aWZpZXIgZm9yIHRoaXMgcHJvdmlkZXIKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkc29jaWFsTWVkaWFVbmlxdWVJZCBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIHVzZXIgb24gdGhlIHNvY2lhbCBuZXR3b3JrCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGNvbnRhaW5pbmcgYW4gTU1fVXNlciBvYmplY3Qgb24gc3VjY2Vzcywgb3IgYW4gZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBmaW5kTGlua2VkVXNlckJ5SWRlbnRpZmllcigkc29jaWFsTWVkaWFVbmlxdWVJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgoJCWlmIChlbXB0eSgkc29jaWFsTWVkaWFVbmlxdWVJZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBsb29raW5nIHVwIGxpbmtlZCBhY2NvdW50LCBzdXBwbGllZCBpZGVudGlmaWVyIHdhcyBlbXB0eSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CQoJCX0KCQkkc3FsID0gIlNFTEVDVCB1c2VyX2lkIEZST00gIi5NTV9UQUJMRV9TT0NJQUxfTE9HSU5fTElOS0VEX1BST0ZJTEVTLiIgV0hFUkUgcHJvdmlkZXJfaWQgPSAlcyBBTkQgdW5pcXVlX2lkID0gJXMiOwoJCSR1c2VySWQgPSAkd3BkYi0+Z2V0X3Zhcigkd3BkYi0+cHJlcGFyZSgkc3FsLCR0aGlzLT5pZCwkc29jaWFsTWVkaWFVbmlxdWVJZCkpOwoJCWlmIChpc19udWxsKCR1c2VySWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgbG9va2luZyB1cCBsaW5rZWQgYWNjb3VudCwgbm8gbGlua2VkIGFjY291bnQgd2FzIGZvdW5kIixNTV9SZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UobmV3IE1NX1VzZXIoJHVzZXJJZCkpOwkKCX0KCQoJCgkvKioKCSAqCgkgKiBAcmV0dXJuIGludCBUaGUgQ29uZmlndXJlZCBkZWZhdWx0IHNpZ251cCBtZW1iZXJzaGlwIGxldmVsCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRTaWdudXBNZW1iZXJzaGlwTGV2ZWwoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPnNpZ251cE1lbWJlcnNoaXBMZXZlbDsKCX0KCQoJCgkvKioKCSAqCgkgKiBAcGFyYW0gaW50ICRzaWdudXBNZW1iZXJzaGlwTGV2ZWwgVGhlIGRlZmF1bHQgc2lnbnVwIG1lbWJlcnNoaXAgbGV2ZWwgICAgICAgCQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0U2lnbnVwTWVtYmVyc2hpcExldmVsKCRzaWdudXBNZW1iZXJzaGlwTGV2ZWwpIAoJewoJCSR0aGlzLT5zaWdudXBNZW1iZXJzaGlwTGV2ZWwgPSAkc2lnbnVwTWVtYmVyc2hpcExldmVsOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0TGlua2VkU29jaWFsTWVkaWFBY2NvdW50c0ZvclVzZXIoJHVzZXJJZCwkbGlua2VkQWNjb3VudD0iIikKCXsKCQlnbG9iYWwgJHdwZGI7CgoJCSRzcWwgPSAiU0VMRUNUIHNscC5uYW1lLCBzbHAudG9rZW4sIHNsbHAuKiBGUk9NICIuTU1fVEFCTEVfU09DSUFMX0xPR0lOX0xJTktFRF9QUk9GSUxFUy4iIHNsbHAgSU5ORVIgSk9JTiAiLk1NX1RBQkxFX1NPQ0lBTF9MT0dJTl9QUk9WSURFUlMuIiBzbHAgT04gKHNsbHAucHJvdmlkZXJfaWQgPSBzbHAuaWQpIFdIRVJFIHNsbHAudXNlcl9pZD0lcyAiOwoJCWlmICghZW1wdHkoJGxpbmtlZEFjY291bnQpKQoJCXsKCQkJJHNxbCAuPSAkd3BkYi0+cHJlcGFyZSgiQU5EIHNsbHAuaWQgPSAlcyIsJGxpbmtlZEFjY291bnQpOwoJCX0KCQkkbGlua2VkQWNjb3VudHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoJHNxbCwkdXNlcklkKSk7CgkJcmV0dXJuICRsaW5rZWRBY2NvdW50czsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJlbW92ZUxpbmtlZFNvY2lhbE1lZGlhQWNjb3VudHMoJHVzZXJJZCwkbGlua2VkQWNjb3VudD0iIikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX1NPQ0lBTF9MT0dJTl9MSU5LRURfUFJPRklMRVMuIiBXSEVSRSB1c2VyX2lkID0gJXMgIjsKCQlpZiAoIWVtcHR5KCRsaW5rZWRBY2NvdW50KSkKCQl7CgkJCSRzcWwgLj0gJHdwZGItPnByZXBhcmUoIkFORCBpZCA9ICVzIiwkbGlua2VkQWNjb3VudCk7CgkJfQoJCSRyZXMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwkdXNlcklkKSk7CgkJcmV0dXJuICgkcmVzICE9PSBmYWxzZSk7CQkKCX0JCgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRydWUgaWYgYW55IHNvY2lhbCBsb2dpbiBleHRlbnNpb24gaXMgZW5hYmxlZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNvY2lhbExvZ2luRW5hYmxlZCgpCgl7CgkJJGV4dGVuc2lvbnMgPSBNTV9FeHRlbnNpb25zRmFjdG9yeTo6Z2V0QXZhaWxhYmxlRXh0ZW5zaW9ucyhmYWxzZSk7CgkJZm9yZWFjaCAoJGV4dGVuc2lvbnMgYXMgJGFuRXh0ZW5zaW9uKQoJCXsKCQkJaWYgKCRhbkV4dGVuc2lvbiBpbnN0YW5jZW9mIE1NX0Fic3RyYWN0U29jaWFsTG9naW5FeHRlbnNpb24pCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvdmlkZXJOYW1lKCkgCgl7CgkJcmV0dXJuICR0aGlzLT5wcm92aWRlck5hbWU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFByb3ZpZGVyTmFtZSgkcHJvdmlkZXJOYW1lKSAKCXsKCQkkdGhpcy0+cHJvdmlkZXJOYW1lID0gJHByb3ZpZGVyTmFtZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RW5kcG9pbnRVcmwoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmVuZHBvaW50VXJsOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFbmRwb2ludFVybCgkZW5kcG9pbnRVcmwpIAoJewoJCSR0aGlzLT5lbmRwb2ludFVybCA9ICRlbmRwb2ludFVybDsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldFRva2VuKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRva2VuOwoJfQkJCn0=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(200, 'transactionhistoryview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1RyYW5zYWN0aW9uSGlzdG9yeVZpZXcgZXh0ZW5kcyBNTV9SQkFDR2VuZXJhbEVtcGxveWVlVmlldwp7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TQVZFX1RSQU5TQUNUSU9OID0gInNhdmVUcmFuc2FjdGlvbiI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TSE9XX0VESVRfVFJBTlNBQ1RJT04gPSAic2hvd0VkaXREaWFsb2ciOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUkVTRU5EX0FGRklMSUFURV9DT01NSVNTSU9OID0gInJlc2VuZEFmZmlsaWF0ZUNvbW1pc3Npb24iOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUkVGVU5EX1RSQU5TQUNUSU9OID0gInJlZnVuZFRyYW5zYWN0aW9uIjsKCQoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFX1RSQU5TQUNUSU9OOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZVRyYW5zYWN0aW9uKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NIT1dfRURJVF9UUkFOU0FDVElPTjoKCQkJCQlyZXR1cm4gJHRoaXMtPnNob3dFZGl0VHJhbnNhY3Rpb25EaWFsb2coJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fUkVTRU5EX0FGRklMSUFURV9DT01NSVNTSU9OOgoJCQkJCXJldHVybiAkdGhpcy0+cmVzZW5kQWZmaWxpYXRlQ29tbWlzc2lvbigkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRUZVTkRfVFJBTlNBQ1RJT046CgkJCQkJcmV0dXJuICR0aGlzLT5yZWZ1bmRUcmFuc2FjdGlvbigkcG9zdCk7CgkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNhdmVUcmFuc2FjdGlvbigkcG9zdCkKCXsKCQlpZighaXNzZXQoJHBvc3RbIm9yZGVyX2lkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSB0cmFuc2FjdGlvbi4gSW52YWxpZCBvcmRlciBwYXNzZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCFpc3NldCgkcG9zdFsib3JkZXJfaXRlbV9pZCJdKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byB1cGRhdGUgdHJhbnNhY3Rpb24uIEludmFsaWQgb3JkZXIgaXRlbSBwYXNzZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRvcmRlciA9IE1NX09yZGVyOjpjcmVhdGUoJHBvc3RbIm9yZGVyX2lkIl0pOwoJCQkKCQlpZigkb3JkZXItPmlzVmFsaWQoKSkKCQl7CgkJCWlmKGlzc2V0KCRwb3N0WyJtbV9hZmZpbGlhdGVfaWQiXSkpCgkJCXsKCQkJCSRvcmRlci0+c2V0QWZmaWxpYXRlSWQoJHBvc3RbIm1tX2FmZmlsaWF0ZV9pZCJdKTsKCQkJfQoJCQkKCQkJaWYoaXNzZXQoJHBvc3RbIm1tX3N1Yl9hZmZpbGlhdGVfaWQiXSkpCgkJCXsKCQkJCSRvcmRlci0+c2V0U3ViQWZmaWxpYXRlSWQoJHBvc3RbIm1tX3N1Yl9hZmZpbGlhdGVfaWQiXSk7CgkJCX0KCQkJCgkJCSRyZXN1bHQgPSAkb3JkZXItPmNvbW1pdERhdGEoKTsKCQkJCQkKCQkJaWYoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRvcmRlckl0ZW0gPSBNTV9PcmRlckl0ZW06OmNyZWF0ZSgkcG9zdFsib3JkZXJfaXRlbV9pZCJdKTsKCQkJCQoJCQkJZG9fYWN0aW9uKE1NX0V2ZW50OjokQUZGSUxJQVRFX0lORk9fQ0hBTkdFRCwgTU1fRXZlbnQ6OnBhY2thZ2VPcmRlckRhdGEoJG9yZGVyLT5nZXRDdXN0b21lcigpLT5nZXRJZCgpLCAkb3JkZXItPmdldElkKCksICRvcmRlckl0ZW0tPmdldElkKCkpKTsKCQkJfQoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVHJhbnNhY3Rpb24gdXBkYXRlZCBzdWNjZXNzZnVsbHkiKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiAkcmVzdWx0OwoJCQl9CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcmVzZW5kQWZmaWxpYXRlQ29tbWlzc2lvbigkcG9zdCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoKCQlpZighaXNzZXQoJHBvc3RbInVzZXJfaWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2VuZCBhZmZpbGlhdGUgY29tbWlzc2lvbi4gSW52YWxpZCB1c2VyIElEIHBhc3NlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYoIWlzc2V0KCRwb3N0WyJvcmRlcl9pZCJdKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzZW5kIGFmZmlsaWF0ZSBjb21taXNzaW9uLiBJbnZhbGlkIG9yZGVyIHBhc3NlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkKCQlpZighaXNzZXQoJHBvc3RbIm9yZGVyX2l0ZW1faWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gc2VuZCBhZmZpbGlhdGUgY29tbWlzc2lvbi4gSW52YWxpZCBvcmRlciBpdGVtIHBhc3NlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkKCQlpZighaXNzZXQoJHBvc3RbInRyYW5zYWN0aW9uX2lkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNlbmQgYWZmaWxpYXRlIGNvbW1pc3Npb24uIEludmFsaWQgdHJhbnNhY3Rpb24gSUQgcGFzc2VkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkYWZmaWxpYXRlU2VydmljZSA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmFjdG9yeTo6Z2V0QWN0aXZlUHJvdmlkZXIoKTsKCQkKCQlpZigkYWZmaWxpYXRlU2VydmljZS0+c3VwcG9ydHNGZWF0dXJlKE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmVhdHVyZXM6OkNPTU1JU1NJT05fVFJBQ0tJTkcpKQoJCXsJCgkJCSRvcmRlckRhdGEgPSBNTV9FdmVudDo6cGFja2FnZU9yZGVyRGF0YSgkcG9zdFsidXNlcl9pZCJdLCAkcG9zdFsib3JkZXJfaWQiXSwgJHBvc3RbIm9yZGVyX2l0ZW1faWQiXSwgJHBvc3RbInRyYW5zYWN0aW9uX2lkIl0pOwoJCQkKCQkJLy8gZGV0ZXJtaW5lIGlmIHRyYW5zYWN0aW9uIGluIGFuIGluaXRpYWwgb3IgcmViaWxsIHBheW1lbnQKCQkJJHNxbCA9ICJTRUxFQ1QgdHJhbnNhY3Rpb25fdHlwZSBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgV0hFUkUgaWQgPSAneyRwb3N0WyJ0cmFuc2FjdGlvbl9pZCJdfSc7IjsKCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkKCQkJaWYoIWlzX251bGwoJHJlc3VsdCkgJiYgaXNzZXQoJHJlc3VsdC0+dHJhbnNhY3Rpb25fdHlwZSkpCgkJCXsKCQkJCSRhZmZpbGlhdGVDb250cm9sbGVyID0gbmV3IE1NX0FmZmlsaWF0ZUNvbnRyb2xsZXIoKTsKCQkJCSRpc1JlYmlsbCA9IGZhbHNlOwoJCQkJJGRvU2VuZENvbW1pc3Npb24gPSBmYWxzZTsKCQkJCQoJCQkJaWYoJHJlc3VsdC0+dHJhbnNhY3Rpb25fdHlwZSA9PSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQpCgkJCQl7CgkJCQkJJGlzUmViaWxsID0gdHJ1ZTsKCQkJCX0KCQkJCQoJCQkJLy8gZGV0ZXJtaW5lIGlmIGNvbW1pc3Npb24gc2hvdWxkIGJlIHNlbnQgYmFzZWQgb24gY29tbWlzc2lvbiBwcm9maWxlCgkJCQkkY29tbWlzc2lvblByb2ZpbGUgPSBudWxsOwoJCQkJJG9yZGVySXRlbSA9IE1NX09yZGVySXRlbTo6Y3JlYXRlKCRwb3N0WyJvcmRlcl9pdGVtX2lkIl0pOwoJCQkJCgkJCQlpZigkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHByb2R1Y3QgPSBNTV9Qcm9kdWN0OjpjcmVhdGUoJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCkpOwoKCQkJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJJGNvbW1pc3Npb25Qcm9maWxlID0gJHByb2R1Y3QtPmdldENvbW1pc3Npb25Qcm9maWxlKCk7CgkJCQkJCQoJCQkJCQlpZighJGNvbW1pc3Npb25Qcm9maWxlLT5pc1ZhbGlkKCkpCgkJCQkJCXsKCQkJCQkJCSRjb21taXNzaW9uUHJvZmlsZSA9IG51bGw7CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWlmKCFpc19udWxsKCRjb21taXNzaW9uUHJvZmlsZSkpCgkJCQl7CgkJCQkJaWYoISRpc1JlYmlsbCkKCQkJCQl7CgkJCQkJCWlmKCRjb21taXNzaW9uUHJvZmlsZS0+aW5pdGlhbENvbW1pc3Npb25FbmFibGVkKCkpCgkJCQkJCXsKCQkJCQkJCSRkb1NlbmRDb21taXNzaW9uID0gdHJ1ZTsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkluaXRpYWwgY29tbWlzc2lvbnMgYXJlIG5vdCBlbmFibGVkIGZvciB0aGUgY29tbWlzc2lvbiBwcm9maWxlIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHByb2R1Y3QuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJaWYoJGNvbW1pc3Npb25Qcm9maWxlLT5yZWJpbGxDb21taXNzaW9uc0VuYWJsZWQoKSkKCQkJCQkJewoJCQkJCQkJJGRvU2VuZENvbW1pc3Npb24gPSB0cnVlOwoJCQkJCQl9CgkJCQkJCWVsc2UgCgkJCQkJCXsKCQkJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlJlYmlsbCBjb21taXNzaW9ucyBhcmUgbm90IGVuYWJsZWQgZm9yIHRoZSBjb21taXNzaW9uIHByb2ZpbGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcHJvZHVjdC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGZpbmQgY29tbWlzc2lvbiBwcm9maWxlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJCgkJCQlpZigkZG9TZW5kQ29tbWlzc2lvbikKCQkJCXsKCQkJCQkkYWZmaWxpYXRlQ29udHJvbGxlci0+dHJhY2tDb21taXNzaW9uKCRvcmRlckRhdGEsICRpc1JlYmlsbCk7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQWZmaWxpYXRlIGNvbW1pc3Npb24gcmVxdWVzdCBzZW50Iik7CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNlbmQgYWZmaWxpYXRlIGNvbW1pc3Npb24uIFRoZSBhY3RpdmUgYWZmaWxpYXRlIHNlcnZpY2UgZG9lc24ndCBzdXBwb3J0IGNvbW1pc3Npb24gdHJhY2tpbmcuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBzZW5kIGFmZmlsaWF0ZSBjb21taXNzaW9uLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2hvd0VkaXRUcmFuc2FjdGlvbkRpYWxvZygkcG9zdCkKCXsKCQlpZighaXNzZXQoJHBvc3RbIm9yZGVyX2lkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZWRpdGluZyB0cmFuc2FjdGlvbi4gT3JkZXIgSUQgaXMgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCFpc3NldCgkcG9zdFsib3JkZXJfaXRlbV9pZCJdKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGVkaXRpbmcgdHJhbnNhY3Rpb24uIE9yZGVyIEl0ZW0gSUQgaXMgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCFpc3NldCgkcG9zdFsidHJhbnNhY3Rpb25faWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBlZGl0aW5nIHRyYW5zYWN0aW9uLiBUcmFuc2FjdGlvbiBJRCBpcyByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCQoJCSRpbmZvID0gbmV3IHN0ZENsYXNzKCk7CgkJJGluZm8tPm9yZGVySWQgPSAkcG9zdFsib3JkZXJfaWQiXTsKCQkkaW5mby0+b3JkZXJJdGVtSWQgPSAkcG9zdFsib3JkZXJfaXRlbV9pZCJdOwoJCSRpbmZvLT50cmFuc2FjdGlvbklkID0gJHBvc3RbInRyYW5zYWN0aW9uX2lkIl07CgkJCgkJJGRhdGEgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iLyIuTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX1RSQU5TQUNUSU9OX0hJU1RPUlkuIi5kaWFsb2cucGhwIiwgJGluZm8pOwoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGRhdGEpOwkJCgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZWZ1bmRUcmFuc2FjdGlvbigkcG9zdCkKCXsKCQlpZiAoIWVtcHR5KCRwb3N0WyJ0cmFuc2FjdGlvbl9pZCJdKSkKCQl7CgkJCSR0cmFuc2FjdGlvbklkID0gJHBvc3RbInRyYW5zYWN0aW9uX2lkIl07CgkJCSR0cmFuc2FjdGlvbkxvb2t1cFJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmdldFRyYW5zYWN0aW9uSW5mbygkdHJhbnNhY3Rpb25JZCk7CgkJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkdHJhbnNhY3Rpb25Mb29rdXBSZXNwb25zZSkpCgkJCXsKCQkJCXJldHVybiAkdHJhbnNhY3Rpb25Mb29rdXBSZXNwb25zZTsKCQkJfQoJCQkkdHJhbnNhY3Rpb25JbmZvID0gJHRyYW5zYWN0aW9uTG9va3VwUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCSRwYXltZW50U2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2VCeUlkKCR0cmFuc2FjdGlvbkluZm8tPnBheW1lbnRfc2VydmljZV9pZCk7CgkJCWlmIChpc19udWxsKCRwYXltZW50U2VydmljZSkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byByZWZ1bmQgdHJhbnNhY3Rpb246IEludmFsaWQgcGF5bWVudCBtZXRob2QiKTsKCQkJfQoJCQkkcmVmdW5kUGF5bWVudFNlcnZpY2VSZXNwb25zZSA9ICRwYXltZW50U2VydmljZS0+cmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQpOwoJCQkvL3RyYW5zbGF0ZSB0aGUgcGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbnRvIGFuIE1NX1Jlc3BvbnNlLiBBbGwgbm9uLXN1Y2Nlc3Mgc3RhdGVzIGJlY29tZSBlcnJvcnMKCQkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVmdW5kUGF5bWVudFNlcnZpY2VSZXNwb25zZSkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlJlZnVuZCB3YXMgc3VjY2Vzc2Z1bCIpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVmdW5kUGF5bWVudFNlcnZpY2VSZXNwb25zZS0+Z2V0TWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkvL3Nob3VsZG50IGV2ZXIgaGFwcGVuIHRocm91Z2ggdGhlIGludGVyZmFjZQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gcmVmdW5kIHRyYW5zYWN0aW9uOiBObyB0cmFuc2FjdGlvbiBpZCB3YXMgc3VwcGxpZWQiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKCR1c2VySWQsTU1fRGF0YUdyaWQgJGRnPW51bGwsJHN0YXJ0RGF0ZT1udWxsKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL3RhYmxlcyB1c2VkIGluIHRoZSBtYXN0ZXIgcXVlcnkuIFBsYWNpbmcgdGhlIGNvbnN0YW50cyBpbnRvIHZhcmlhYmxlcyBhbGxvd3MgdGhlbSB0byBiZSBlbWJlZGRlZCBpbnRvIHRoZSBzdHJpbmcsIGFpZGluZyBpbiByZWFkYWJpbGl0eQoJCSR0cmFuc2FjdGlvbnNUYWJsZSAgICA9IE1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRzsKCQkkcGF5bWVudFNlcnZpY2VzVGFibGUgPSBNTV9UQUJMRV9QQVlNRU5UX1NFUlZJQ0VTOwoJCSRvcmRlcnNUYWJsZSAgICAgICAgICA9IE1NX1RBQkxFX09SREVSUzsKCQkkb3JkZXJJdGVtc1RhYmxlICAgICAgPSBNTV9UQUJMRV9PUkRFUl9JVEVNUzsKCQkKCQkkZGVzaXJlZFRyYW5zYWN0aW9uVHlwZXMgPSBpbXBsb2RlKCIsIixhcnJheShNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCxNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQsTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCkpOwoJCSRyZWZ1bmRUcmFuc2N0aW9uVHlwZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUZVTkQ7CgoJCS8vIGdldCB0b3RhbCBvZiBxdWVyeQoJCSRxdWVyeVdpdGhUb3RhbCA9ICJTRUxFQ1QgY291bnQoKikgYXMgdG90YWwgICI7CgkJJHF1ZXJ5V2l0aFRvdGFsIC49ICJGUk9NIHskdHJhbnNhY3Rpb25zVGFibGV9IHQgTEVGVCBKT0lOIHskcGF5bWVudFNlcnZpY2VzVGFibGV9IHBzIG9uICh0LnBheW1lbnRfc2VydmljZV9pZCA9ICBwcy5pZCkgIi4KCQkJCSJMRUZUIEpPSU4geyRvcmRlcnNUYWJsZX0gbyBvbiAodC5vcmRlcl9pZCA9IG8uaWQpICIuCgkJCQkiTEVGVCBKT0lOIHskb3JkZXJJdGVtc1RhYmxlfSBvaSBvbiAodC5vcmRlcl9pdGVtX2lkID0gb2kuaWQpICIuCgkJCQkiV0hFUkUgKHQudHJhbnNhY3Rpb25fdHlwZSBJTiAoeyRkZXNpcmVkVHJhbnNhY3Rpb25UeXBlc30pKSBBTkQgKG8udXNlcl9pZCA9ICVzKSAiOwoJCSRxdWVyeVdpdGhUb3RhbCA9ICR3cGRiLT5wcmVwYXJlKCRxdWVyeVdpdGhUb3RhbCwkdXNlcklkKTsKCQkkY291bnRSZXN1bHQgPSAkd3BkYi0+Z2V0X3JvdygkcXVlcnlXaXRoVG90YWwpOwoJCQoJCS8vIHBsYWNlIHRvdGFsIHJlc3VsdCBpbnRvIG1hc3RlciBxdWVyeQoJCSRtYXN0ZXJRdWVyeSA9ICJTRUxFQ1QgeyRjb3VudFJlc3VsdC0+dG90YWx9IGFzICd0b3RhbCcsIG8uaWQgYXMgb3JkZXJJZCwgby5vcmRlcl9udW1iZXIgYXMgb3JkZXJOdW1iZXIsIHQuaWQgYXMgbW1UcmFuc0lkLCB0LmlzX3Rlc3QsIG8udXNlcl9pZCwgdC5vcmRlcl9pdGVtX2lkLCB0LnRyYW5zYWN0aW9uX2RhdGUgYXMgZGF0ZSwgaWZudWxsKG9pLmRlc2NyaXB0aW9uLCdtdWx0aXBsZSBwcm9kdWN0cycpIGFzIHByb2R1Y3ROYW1lLCBvaS5pdGVtX2lkIGFzIHByb2R1Y3RJZCwgb2kucmVjdXJyaW5nX2Rpc2NvdW50IGFzIHJlY3VycmluZ0Rpc2NvdW50LCAiLgoJCQkJCSAgICJ0LmFtb3VudCwgdC5jdXJyZW5jeSwgdC50cmFuc2FjdGlvbl90eXBlIGFzIHRyYW5zVHlwZSwgcHMubmFtZSBhcyBweW10U2VydmljZU5hbWUsIHBzLnRva2VuIGFzIHB5bXRTZXJ2aWNlVG9rZW4sIG8uYWZmaWxpYXRlX2lkIGFzIGFmZmlsaWF0ZUlkLCBvLnN1Yl9hZmZpbGlhdGVfaWQgYXMgc3ViQWZmaWxpYXRlSWQsICIuCgkJCQkJICAgImlmKCgodC5yZWZ1bmRfaWQgSVMgTk9UIE5VTEwpIEFORCAodC50cmFuc2FjdGlvbl90eXBlICE9IHskcmVmdW5kVHJhbnNjdGlvblR5cGV9KSksdHJ1ZSxmYWxzZSkgYXMgaXNSZWZ1bmRlZCAiLgoJCQkJCSAgICJGUk9NIHskdHJhbnNhY3Rpb25zVGFibGV9IHQgTEVGVCBKT0lOIHskcGF5bWVudFNlcnZpY2VzVGFibGV9IHBzIG9uICh0LnBheW1lbnRfc2VydmljZV9pZCA9ICBwcy5pZCkgIi4KCQkJCQkgICAiTEVGVCBKT0lOIHskb3JkZXJzVGFibGV9IG8gb24gKHQub3JkZXJfaWQgPSBvLmlkKSAiLgoJCQkJCSAgICJMRUZUIEpPSU4geyRvcmRlckl0ZW1zVGFibGV9IG9pIG9uICh0Lm9yZGVyX2l0ZW1faWQgPSBvaS5pZCkgIi4KCQkJCQkgICAiV0hFUkUgKHQudHJhbnNhY3Rpb25fdHlwZSBJTiAoeyRkZXNpcmVkVHJhbnNhY3Rpb25UeXBlc30pKSBBTkQgKG8udXNlcl9pZCA9ICVzKSAiOwoJCSRtYXN0ZXJRdWVyeSA9ICR3cGRiLT5wcmVwYXJlKCRtYXN0ZXJRdWVyeSwkdXNlcklkKTsgCgkJCgkJaWYoIWlzX251bGwoJGRnKSAmJiAhaXNfbnVsbCgkZGctPnNvcnRCeSkgJiYgIWVtcHR5KCRkZy0+c29ydEJ5KSkgLy9oYW5kbGUgdGhlIHNvcnRpbmcKCQl7IAoJCQkkbWFzdGVyUXVlcnkgLj0gIiBPUkRFUiBCWSB7JGRnLT5zb3J0Qnl9IHskZGctPnNvcnREaXJ9IjsKCQl9CgkJIAoJCSRtYXN0ZXJRdWVyeSAuPSIgIi4kZGctPmdldExpbWl0U3FsKCk7IAoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRtYXN0ZXJRdWVyeSk7CgkJCgkJaWYgKGNvdW50KCRyZXN1bHRzKSA+IDApCgkJewoJCQkvL3JldHJpZXZlIGNvdXBvbiBpbmZvIHdpdGggb25lIHF1ZXJ5IC0gZmlyc3QgZGl2aWRlIHRoZSByZXN1bHRzIHVwIGJ5IG9yZGVyIGlkLiBVc2luZyBvcmRlciBpZCBhcyB0aGUga2V5IGVsaW1pbmF0ZXMgZHVwbGljYXRlIG9yZGVyIGlkcyBhbmQgZ2l2ZXMgdXMgYW4gZWFzeSByZWZlcmVuY2UgYmFjayB0byB0aGUgdHJhbnNhY3Rpb24gcm93cwoJCQkkb3JkZXJJbmRleCA9IGFycmF5KCk7CgkJCWZvcmVhY2ggKCRyZXN1bHRzIGFzICRyb3dPYmplY3QpCgkJCXsKCQkJCWlmICghaXNfbnVsbCgkcm93T2JqZWN0LT5vcmRlcklkKSkKCQkJCXsKCQkJCQkkb3JkZXJJbmRleFskcm93T2JqZWN0LT5vcmRlcklkXVtdID0gJHJvd09iamVjdDsKCQkJCX0KCQkJfQoJCQkKCQkJLy9ub3cgcmV0cmlldmUgYWxsIG9mIHRoZSBvcmRlciBpdGVtcyByZXByZXNlbnRpbmcgY291cG9ucywgam9pbmVkIHdpdGggdGhlIGNvdXBvbiB0YWJsZSwgZm9yIGVhY2ggb2YgdGhlIG9yZGVycyB0aGUgYWJvdmUgdHJhbnNhY3Rpb25zIGJlbG9uZyB0bwoJCQkkb3JkZXJJZHN0cmluZyA9IGltcGxvZGUoIiwiLGFycmF5X2tleXMoJG9yZGVySW5kZXgpKTsKCQkJJGNvdXBvbnNUYWJsZSA9IE1NX1RBQkxFX0NPVVBPTlM7CgkJCSRjb3Vwb25UeXBlID0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX0RJU0NPVU5UOwoJCQkkY291cG9uU3FsID0gIlNFTEVDVCBvaS5vcmRlcl9pZCwgb2kudG90YWwgYXMgZGlzY291bnRBbW91bnQsIGMuY291cG9uX25hbWUsIGMucmVjdXJyaW5nX2JpbGxpbmdfc2V0dGluZyBGUk9NIHskb3JkZXJJdGVtc1RhYmxlfSBvaSBMRUZUIEpPSU4geyRjb3Vwb25zVGFibGV9IGMgIi4KCQkJCQkJICJPTiAob2kuaXRlbV9pZCA9IGMuaWQpIFdIRVJFIChvaS5pdGVtX3R5cGUgPSAneyRjb3Vwb25UeXBlfScpIEFORCAob2kub3JkZXJfaWQgSU4gKHskb3JkZXJJZHN0cmluZ30pKSI7CgkJCSRjb3Vwb25SZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRjb3Vwb25TcWwpOwoJCQkKCQkJLy9maW5hbGx5LCBsb29wIHRocm91Z2ggdGhlIGNvdXBvbnMgYW5kIGFkZCB0aGVpciBkYXRhIHRvIHRoZSB0cmFuc2FjdGlvbiByb3dzLiBFc3NlbnRpYWxseSB3ZSBhcmUgZGVyaXZpbmcgd2hpY2ggdHJhbnNhY3Rpb25zIHJlcHJlc2VudCBwYXltZW50cyBmb3IgaXRlbXMgdGhhdCBoYWQgY291cG9ucyBhcHBsaWVkCgkJCS8vTk9URTogVGhpcyBhc3N1bWVzIHRoYXQgaWYgYSBjb3Vwb24gZXhpc3RzIGluIGFuIG9yZGVyLCB0aGVyZSBpcyBvbmx5IG9uZSBwcm9kdWN0IGluIHRoYXQgb3JkZXIuIFRoZSBtb21lbnQgbXVsdGlwbGUgcHJvZHVjdHMgYXJlIGFsbG93ZWQgaW4gYSBzaW5nbGUgb3JkZXIgdGhhdCBhc3N1bXB0aW9uIGJlY29tZXMgaW52YWxpZCwgYW5kIHRoaXMgY29kZSBiZWNvbWVzIHVucmVsaWFibGUgKGZvciBjb3Vwb24gZGV0ZWN0aW9uKS4KCQkJZm9yZWFjaCAoJGNvdXBvblJlc3VsdHMgYXMgJGFkZGl0aW9uYWxDb3Vwb25EYXRhKQoJCQl7CgkJCQkkY3VycmVudE9yZGVySWQgPSAkYWRkaXRpb25hbENvdXBvbkRhdGEtPm9yZGVyX2lkOwoJCQkJZm9yZWFjaCAoJG9yZGVySW5kZXhbJGN1cnJlbnRPcmRlcklkXSBhcyAkY3VycmVudFRyYW5zYWN0aW9uKQoJCQkJewoJCQkJCXN3aXRjaCAoJGN1cnJlbnRUcmFuc2FjdGlvbi0+dHJhbnNUeXBlKQoJCQkJCXsKCQkJCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVDoKCQkJCQkJCSRjdXJyZW50VHJhbnNhY3Rpb24tPmNvdXBvbkFwcGxpZWQgPSB0cnVlOwoJCQkJCQkJJGN1cnJlbnRUcmFuc2FjdGlvbi0+Y291cG9uTmFtZSA9ICRhZGRpdGlvbmFsQ291cG9uRGF0YS0+Y291cG9uX25hbWU7CgkJCQkJCQkkY3VycmVudFRyYW5zYWN0aW9uLT5jb3Vwb25EaXNjb3VudCA9IGFicyhmbG9hdHZhbCgkYWRkaXRpb25hbENvdXBvbkRhdGEtPmRpc2NvdW50QW1vdW50KSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQ6CgkJCQkJCQlpZiAoJGFkZGl0aW9uYWxDb3Vwb25EYXRhLT5yZWN1cnJpbmdfYmlsbGluZ19zZXR0aW5nID09ICJhbGwiKQoJCQkJCQkJewoJCQkJCQkJCSRjdXJyZW50VHJhbnNhY3Rpb24tPmNvdXBvbkFwcGxpZWQgPSB0cnVlOwoJCQkJCQkJCSRjdXJyZW50VHJhbnNhY3Rpb24tPmNvdXBvbk5hbWUgPSAkYWRkaXRpb25hbENvdXBvbkRhdGEtPmNvdXBvbl9uYW1lOwoJCQkJCQkJCSRjdXJyZW50VHJhbnNhY3Rpb24tPmNvdXBvbkRpc2NvdW50ID0gIiI7CgkJCQkJCQkJCgkJCQkJCQkJaWYoIWlzX251bGwoJGN1cnJlbnRUcmFuc2FjdGlvbi0+cmVjdXJyaW5nRGlzY291bnQpKQoJCQkJCQkJCXsKCQkJCQkJCQkJJGN1cnJlbnRUcmFuc2FjdGlvbi0+Y291cG9uRGlzY291bnQgPSAkY3VycmVudFRyYW5zYWN0aW9uLT5yZWN1cnJpbmdEaXNjb3VudDsKCQkJCQkJCQl9CgkJCQkJCQkJZWxzZSAKCQkJCQkJCQl7CgkJCQkJCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJGN1cnJlbnRUcmFuc2FjdGlvbi0+cHJvZHVjdElkKTsKCQkJCQkJCQkJCgkJCQkJCQkJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRjdXJyZW50VHJhbnNhY3Rpb24tPmNvdXBvbkRpc2NvdW50ID0gJHByb2R1Y3QtPmdldFByaWNlKGZhbHNlKSAtIGFicyhmbG9hdHZhbCgkY3VycmVudFRyYW5zYWN0aW9uLT5hbW91bnQpKTsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCQlicmVhazsKCQkJCQkJCX0KCQkJCQkJCS8vYnJlYWsgaXMgaW50ZW50aW9uYWxseSBpbiB0aGUgaWYuIElmIHRoYXQgY29uZGl0aW9uIGlzbnQgbWF0Y2hlZCwgd2Ugd2FudCBpdCB0byBnbyB0byB0aGUgZGVmYXVsdAoJCQkJCQlkZWZhdWx0OgoJCQkJCQkJJGN1cnJlbnRUcmFuc2FjdGlvbi0+Y291cG9uQXBwbGllZCA9IGZhbHNlOwoJCQkJCQkJJGN1cnJlbnRUcmFuc2FjdGlvbi0+Y291cG9uTmFtZSA9ICIiOwoJCQkJCQkJJGN1cnJlbnRUcmFuc2FjdGlvbi0+Y291cG9uRGlzY291bnQgPSAwLjAwOwoJCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQkvLyByZXRyaWV2ZSBhbGwgb3JkZXIgaXRlbXMgcmVwcmVzZW50aW5nIHByb3JhdGlvbnMKCQkJJG9yZGVySWRzdHJpbmcgPSBpbXBsb2RlKCIsIixhcnJheV9rZXlzKCRvcmRlckluZGV4KSk7CgkJCSRwcm9yYXRpb25UeXBlID0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST1JBVElPTjsKCQkJJHByb3JhdGlvblNxbCA9ICJTRUxFQ1Qgb2kub3JkZXJfaWQsIG9pLnRvdGFsIGFzIGRpc2NvdW50QW1vdW50IEZST00geyRvcmRlckl0ZW1zVGFibGV9IG9pIFdIRVJFIChvaS5pdGVtX3R5cGUgPSAneyRwcm9yYXRpb25UeXBlfScpIEFORCAob2kub3JkZXJfaWQgSU4gKHskb3JkZXJJZHN0cmluZ30pKSI7CgkJCSRwcm9yYXRpb25SZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRwcm9yYXRpb25TcWwpOwoKCQkJLy9maW5hbGx5LCBsb29wIHRocm91Z2ggdGhlIHByb3JhdGlvbnMgYW5kIGFkZCB0aGVpciBkYXRhIHRvIHRoZSB0cmFuc2FjdGlvbiByb3dzLgoJCQlmb3JlYWNoICgkcHJvcmF0aW9uUmVzdWx0cyBhcyAkYWRkaXRpb25hbFByb3JhdGlvbkRhdGEpCgkJCXsKCQkJCSRjdXJyZW50T3JkZXJJZCA9ICRhZGRpdGlvbmFsUHJvcmF0aW9uRGF0YS0+b3JkZXJfaWQ7CgkJCQlmb3JlYWNoICgkb3JkZXJJbmRleFskY3VycmVudE9yZGVySWRdIGFzICRjdXJyZW50VHJhbnNhY3Rpb24pCgkJCQl7CgkJCQkJc3dpdGNoICgkY3VycmVudFRyYW5zYWN0aW9uLT50cmFuc1R5cGUpCgkJCQkJewoJCQkJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UOgoJCQkJCQkJJGN1cnJlbnRUcmFuc2FjdGlvbi0+cHJvcmF0aW9uQXBwbGllZCA9IHRydWU7CgkJCQkJCQkkY3VycmVudFRyYW5zYWN0aW9uLT5wcm9yYXRpb25BbW91bnQgPSBhYnMoZmxvYXR2YWwoJGFkZGl0aW9uYWxQcm9yYXRpb25EYXRhLT5kaXNjb3VudEFtb3VudCkpOwoJCQkJCQkJYnJlYWs7CgkJCQkJCQoJCQkJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVDoKCQkJCQkJZGVmYXVsdDoKCQkJCQkJCSRjdXJyZW50VHJhbnNhY3Rpb24tPnByb3JhdGlvbkFwcGxpZWQgPSBmYWxzZTsKCQkJCQkJCSRjdXJyZW50VHJhbnNhY3Rpb24tPnByb3JhdGlvbkFtb3VudCA9IDAuMDA7CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuICRyZXN1bHRzOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVSb3dzKCRkYXRhLCAkcmVuZGVyRm9yQWRtaW49dHJ1ZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHJvd3MgPSBhcnJheSgpOwoJCQoJCWlmKCRyZW5kZXJGb3JBZG1pbikKCQl7CgkJCSRkYXRlRm9ybWF0ID0gIk0gaiwgWSBnOmkgYSI7CgkJfQoJCWVsc2UKCQl7CgkJCSRkYXRlRm9ybWF0ID0gIk0gaiwgWSI7CgkJfQoJCQoJCSRjcm50UGF5bWVudFNlcnZpY2UgPSBudWxsOwoJCSRjcm50QWZmaWxpYXRlU2VydmljZSA9IG51bGw7CgkJJGFmZmlsaWF0ZUFjdGl2aXR5TG9nRW50cmllcyA9IG51bGw7CgkJCgkJZm9yZWFjaCgkZGF0YSBhcyAkaXRlbSkKCQl7CgkJCS8vIFRyYW5zYWN0aW9uIFR5cGUKCQkJJHB5bXRNZXRob2RJbmZvU3RyID0gIiI7CgkJCQoJCQlpZigkcmVuZGVyRm9yQWRtaW4pCgkJCXsKCQkJCSRweW10TWV0aG9kSW5mb1N0ciA9ICFlbXB0eSgkaXRlbS0+cHltdFNlcnZpY2VOYW1lKT8iXG5QYXltZW50IE1ldGhvZDogIi4kaXRlbS0+cHltdFNlcnZpY2VOYW1lLiJcbiI6IiI7CgkJCX0KCQkJCgkJCWlmICgoJGl0ZW0tPnRyYW5zVHlwZSA9PSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCkgfHwgKCRpdGVtLT50cmFuc1R5cGUgPT0gTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UKSkKCQkJewoJCQkJJHRyYW5zVHlwZSA9IE1NX1V0aWxzOjpnZXRJY29uKCdtb25leScsICdncmVlbicsICcxLjRlbScsICcycHgnLCAiU3VjY2Vzc2Z1bCBQYXltZW50IHskcHltdE1ldGhvZEluZm9TdHJ9Iik7CgkJCX0KCQkJZWxzZSBpZiAoJGl0ZW0tPnRyYW5zVHlwZSA9PSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5EKQoJCQl7CgkJCQkkdHJhbnNUeXBlID0gTU1fVXRpbHM6OmdldEljb24oJ21vbmV5JywgJ3JlZCcsICcxLjRlbScsICcycHgnLCAiU3VjY2Vzc2Z1bCBSZWZ1bmQgeyRweW10TWV0aG9kSW5mb1N0cn0iKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSR0cmFuc1R5cGUgPSBNTV9OT19EQVRBOwoJCQl9CgkJCQoJCQlpZigkaXRlbS0+aXNfdGVzdCkKCQkJewoJCQkJJHRyYW5zVHlwZSAuPSBNTV9VdGlsczo6Z2V0SWNvbignZmxhc2snLCAnZ3JleScsICcxLjNlbScsICcycHgnLCAiVGVzdCBUcmFuc2FjdGlvbiIsICJwYWRkaW5nLWxlZnQ6NHB4OyIpOwoJCQl9CgkJCQkKCQkJaWYoJHJlbmRlckZvckFkbWluKQoJCQl7CgkJCQkvLyBBZmZpbGlhdGUgSW5mbwoJCQkJJGFmZmlsaWF0ZUluZm8gPSAiIjsKCQkJCWlmICghZW1wdHkoJGl0ZW0tPmFmZmlsaWF0ZUlkKSB8fCAhZW1wdHkoJGl0ZW0tPnN1YkFmZmlsaWF0ZUlkKSkKCQkJCXsKCQkJCQkkYWZmaWxpYXRlSW5mb1N0ciA9ICIiOwoJCQkKCQkJCQlpZiAoIWVtcHR5KCRpdGVtLT5hZmZpbGlhdGVJZCkpCgkJCQkJewoJCQkJCQkkYWZmaWxpYXRlSW5mb1N0ciAuPSAiQWZmaWxpYXRlIElEOiAiLiRpdGVtLT5hZmZpbGlhdGVJZC4iXG4iOwoJCQkJCX0KCQkJCgkJCQkJaWYgKCFlbXB0eSgkaXRlbS0+c3ViQWZmaWxpYXRlSWQpKQoJCQkJCXsKCQkJCQkJJGFmZmlsaWF0ZUluZm9TdHIgLj0gIlN1Yi1hZmZpbGlhdGUgSUQ6ICIuJGl0ZW0tPnN1YkFmZmlsaWF0ZUlkLiJcbiI7CgkJCQkJfQoJCQkKCQkJCQkkYWZmaWxpYXRlSW5mbyA9IE1NX1V0aWxzOjpnZXRBZmZpbGlhdGVJY29uKCRhZmZpbGlhdGVJbmZvU3RyKTsKCQkJCX0KCQkJCQoJCQkJJGFjdGlvbnMgPSAiIjsKCQkJCQoJCQkJaWYoKCRpdGVtLT5pc1JlZnVuZGVkICE9ICcxJykgJiYgKCgkaXRlbS0+dHJhbnNUeXBlID09IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UKSB8fCAoJGl0ZW0tPnRyYW5zVHlwZSA9PSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQpKSkKCQkJCXsKCQkJCQkkYWN0aW9ucyA9ICc8YSB0aXRsZT0iSXNzdWUgUmVmdW5kIiBvbmNsaWNrPSJtbWpzLmlzc3VlUmVmdW5kKCcuJGl0ZW0tPm1tVHJhbnNJZC4nLFwnJy5udW1iZXJfZm9ybWF0KGFicygkaXRlbS0+YW1vdW50KSwyLCcuJywnJykuJ1wnKSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyI+Jy5NTV9VdGlsczo6Z2V0SWNvbigndW5kbycsICdyZWQnLCAnMS4zZW0nLCAnMnB4JykuJzwvYT4nOwoJCQkJCQoJCQkJCS8vIGFkZCBhZmZpbGlhdGUgc2VydmljZS1zcGVjaWZpYyBhY3Rpb25zCgkJCQkJaWYoIWVtcHR5KCRpdGVtLT5hZmZpbGlhdGVJZCkpCgkJCQkJewoJCQkJCQlpZihpc19udWxsKCRjcm50QWZmaWxpYXRlU2VydmljZSkpCgkJCQkJCXsKCQkJCQkJCSRjcm50QWZmaWxpYXRlU2VydmljZSA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmFjdG9yeTo6Z2V0QWN0aXZlUHJvdmlkZXIoKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJaWYoaXNfbnVsbCgkYWZmaWxpYXRlQWN0aXZpdHlMb2dFbnRyaWVzKSkKCQkJCQkJewoJCQkJCQkJLy8gcmV0cmlldmUgYWZmaWxpYXRlIGFjdGl2aXR5IGxvZyBlbnRyaWVzIGZvciB0aGUgY3VycmVudCB1c2VyIGZyb20gdGhlIGRhdGFiYXNlCgkJCQkJCQkkZXZlbnRMb2dUYWJsZSA9IE1NX1RBQkxFX0VWRU5UX0xPRzsKCQkJCQkJCSRhZmZpbGlhdGVFdmVudCA9IE1NX0FjdGl2aXR5TG9nOjokRVZFTlRfVFlQRV9BRkZJTElBVEVfVFJBQ0tJTkc7CgkJCQkJCQkkYWZmaWxpYXRlQWN0aXZpdHlTcWwgPSAiU0VMRUNUICogRlJPTSB7JGV2ZW50TG9nVGFibGV9IFdIRVJFIHVzZXJfaWQgPSAneyRpdGVtLT51c2VyX2lkfScgQU5EIGV2ZW50X3R5cGUgPSAneyRhZmZpbGlhdGVFdmVudH0nICI7CgkJCQkJCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkYWZmaWxpYXRlQWN0aXZpdHlTcWwpOwoJCQkJCQkJCgkJCQkJCQlpZigkcmVzdWx0cykKCQkJCQkJCXsKCQkJCQkJCQkkYWZmaWxpYXRlQWN0aXZpdHlMb2dFbnRyaWVzID0gYXJyYXkoKTsKCQkJCQkJCQkKCQkJCQkJCQlmb3JlYWNoKCRyZXN1bHRzIGFzICRhY3Rpdml0eUxvZ0VudHJ5KQoJCQkJCQkJCXsKCQkJCQkJCQkJJHBhcmFtcyA9IHVuc2VyaWFsaXplKCRhY3Rpdml0eUxvZ0VudHJ5LT5hZGRpdGlvbmFsX3BhcmFtcyk7CgkJCQkJCQkJCQoJCQkJCQkJCQlpZigkcGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUZGSUxJQVRFX1RSQUNLSU5HX0VWRU5UXSA9PSBNTV9BZmZpbGlhdGVDb250cm9sbGVyOjokQUZGSUxJQVRFX0VWRU5UX1RSQUNLX0lOSVRJQUxfQ09NTUlTU0lPTgoJCQkJCQkJCQkJfHwgJHBhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9UUkFDS0lOR19FVkVOVF0gPT0gTU1fQWZmaWxpYXRlQ29udHJvbGxlcjo6JEFGRklMSUFURV9FVkVOVF9UUkFDS19SRUJJTExfQ09NTUlTU0lPTikKCQkJCQkJCQkJewoJCQkJCQkJCQkJJGFmZmlsaWF0ZUFjdGl2aXR5TG9nRW50cmllc1tdID0gJHBhcmFtczsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQkKCQkJCQkJaWYoJGNybnRBZmZpbGlhdGVTZXJ2aWNlLT5zdXBwb3J0c0ZlYXR1cmUoTU1fQWZmaWxpYXRlUHJvdmlkZXJGZWF0dXJlczo6Q09NTUlTU0lPTl9UUkFDS0lORykpCgkJCQkJCXsKCQkJCQkJCSRzaG93QWZmaWxpYXRlQ29tbWlzc2lvbkJ0biA9IHRydWU7CgkJCQkJCQkKCQkJCQkJCS8vIGNoZWNrIGlmIGNvbW1pc3Npb24gaGFzIGFscmVhZHkgYmVlbiBzZW50IGFuZCBsb2dnZWQgaW4gdGhlIGFjdGl2aXR5IGxvZwoJCQkJCQkJaWYoIWlzX251bGwoJGFmZmlsaWF0ZUFjdGl2aXR5TG9nRW50cmllcykpCgkJCQkJCQl7CgkJCQkJCQkJZm9yZWFjaCgkYWZmaWxpYXRlQWN0aXZpdHlMb2dFbnRyaWVzIGFzICRhY3Rpdml0eUxvZ0VudHJ5KQoJCQkJCQkJCXsKCQkJCQkJCQkJJGNybnRBZmZpbGF0ZUlkID0gJGl0ZW0tPmFmZmlsaWF0ZUlkOwoJCQkJCQkJCQkkY3JudE9yZGVyTnVtYmVyID0gJGl0ZW0tPm9yZGVyTnVtYmVyLiItIi4kaXRlbS0+bW1UcmFuc0lkOwoJCQkJCQkJCQkKCQkJCQkJCQkJaWYoJGNybnRPcmRlck51bWJlciA9PSAkYWN0aXZpdHlMb2dFbnRyeVtNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9PUkRFUl9OVU1CRVJdIAoJCQkJCQkJCQkJCSYmICRjcm50QWZmaWxhdGVJZCA9PSAkYWN0aXZpdHlMb2dFbnRyeVtNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9JRF0pCgkJCQkJCQkJCXsKCQkJCQkJCQkJCSRzaG93QWZmaWxpYXRlQ29tbWlzc2lvbkJ0biA9IGZhbHNlOwoJCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCWlmKCRzaG93QWZmaWxpYXRlQ29tbWlzc2lvbkJ0bikKCQkJCQkJCXsKCQkJCQkJCQkkYWN0aW9ucyAuPSAnIDxhIHRpdGxlPSJTZW5kIEFmZmlsaWF0ZSBDb21taXNzaW9uIHRvICcuJGNybnRBZmZpbGlhdGVTZXJ2aWNlLT5nZXROYW1lKCkuJyIgb25jbGljaz0ibW1qcy5yZXNlbmRBZmZpbGlhdGVDb21taXNzaW9uKCcuJGl0ZW0tPnVzZXJfaWQuJywgJy4kaXRlbS0+b3JkZXJJZC4nLCAnLiRpdGVtLT5vcmRlck51bWJlci4nLCAnLiRpdGVtLT5vcmRlcl9pdGVtX2lkLicsICcuJGl0ZW0tPm1tVHJhbnNJZC4nLCAnLiRpdGVtLT5hZmZpbGlhdGVJZC4nKSIgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyI+Jy5NTV9VdGlsczo6Z2V0SWNvbigncGFwZXItcGxhbmUnLCAnbGlnaHQtYmx1ZScsICcxLjNlbScsICcycHgnKS4nPC9hPic7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQkJCgkJCQkJLy8gYWRkIGFkdmFuY2VkIHRyYW5zYWN0aW9uIHRvb2xzIGlmIHRoZSBjdXN0b21lciBoYXMgYWNjZXNzIHRvIGFkdmFuY2VkIHN1YnNjcmlwdGlvbiBtZ210IGZlYXR1cmVzCgkJCQkJaWYoKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRGRUFUVVJFX0FEVl9TVUJTQ1JJUFRJT05fTUdNVCkgPT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKSkKCQkJCQl7CgkJCQkJCSRlZGl0QWN0aW9uVXJsID0gImhyZWY9J2phdmFzY3JpcHQ6bW1qcy5lZGl0VHJhbnNhY3Rpb24oeyRpdGVtLT5vcmRlcklkfSwgeyRpdGVtLT5vcmRlcl9pdGVtX2lkfSwgeyRpdGVtLT5tbVRyYW5zSWR9KTsnIjsKCQkJCQkJJGFjdGlvbnMgLj0gIiAiLk1NX1V0aWxzOjpnZXRFZGl0SWNvbigiRWRpdCBUcmFuc2FjdGlvbiIsICcnLCAkZWRpdEFjdGlvblVybCk7CgkJCQkJfQoJCQkJCWVsc2UgaWYoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JEZFQVRVUkVfQURWX1NVQlNDUklQVElPTl9NR01UKSAhPSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRBQ1RJVkUpCgkJCQkJewoJCQkJCQkkYWN0aW9ucyAuPSAiICIuTU1fVXRpbHM6OmdldEVkaXRJY29uKCdBZGRpdGlvbmFsIHRyYW5zYWN0aW9uIG1hbmFnZW1lbnQgZmVhdHVyZXMgYXJlIG9ubHkgYXZhaWxhYmxlIG9uIHRoZSBBZHZhbmNlZCBwbGFuIGFuZCBhYm92ZS4gVmlzaXQgbWVtYmVybW91c2UuY29tIHRvIHVwZ3JhZGUgeW91ciBwbGFuLicsICcnLCAnJywgdHJ1ZSk7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZSBpZigkaXRlbS0+aXNSZWZ1bmRlZCA9PSAnMScpCgkJCQl7CgkJCQkJJHJlZnVuZFB5bXRJbmZvU3RyID0gIiI7CgkJCQkJCQoJCQkJCWlmKCFlbXB0eSgkaXRlbS0+cmVmdW5kUHltdFNlcnZpY2VOYW1lKSkKCQkJCQl7CgkJCQkJCSRyZWZ1bmRQeW10SW5mb1N0ciAuPSAiUGF5bWVudCBNZXRob2Q6ICIuJGl0ZW0tPnJlZnVuZFB5bXRTZXJ2aWNlTmFtZS4iXG4iOwoJCQkKCQkJCQkJaWYoIWVtcHR5KCRpdGVtLT5yZWZ1bmRSZWZJZCkpCgkJCQkJCXsKCQkJCQkJCSRyZWZ1bmRQeW10SW5mb1N0ciAuPSAkaXRlbS0+cmVmdW5kUHltdFNlcnZpY2VOYW1lLiIgUmVmZXJlbmNlIElEOiAiLiRpdGVtLT5yZWZ1bmRSZWZJZDsKCQkJCQkJfQoJCQkJCX0KCQkJCgkJCQkJJGFjdGlvbnMgPSBNTV9VdGlsczo6Z2V0Q2hlY2tJY29uKCkuIiA8ZW0+UmVmdW5kIElzc3VlZDwvZW0+IjsKCQkJCX0KCQkJCQoJCQkJLy8gYWRkIHBheW1lbnQgc2VydmljZS1zcGVjaWZpYyBhY3Rpb25zCgkJCQlpZihpc19udWxsKCRjcm50UGF5bWVudFNlcnZpY2UpIHx8ICRjcm50UGF5bWVudFNlcnZpY2UtPmdldFRva2VuKCkgIT0gJGl0ZW0tPnB5bXRTZXJ2aWNlVG9rZW4pCgkJCQl7CgkJCQkJJGNybnRQYXltZW50U2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2UoJGl0ZW0tPnB5bXRTZXJ2aWNlVG9rZW4pOwkKCQkJCX0KCQkJCQoJCQkJaWYoJGNybnRQYXltZW50U2VydmljZS0+c3VwcG9ydHNGZWF0dXJlKE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OlRSQU5TQUNUSU9OX1BBR0VfQUNUSU9OUykpCgkJCQl7CgkJCQkJJGFjdGlvbnMgLj0gIiAiLiRjcm50UGF5bWVudFNlcnZpY2UtPmdldFRyYW5zYWN0aW9uUGFnZUFjdGlvbnMoJGl0ZW0tPm1tVHJhbnNJZCk7CgkJCQl9CgkJCX0KCQkJCQoJCQkvLyBBbW91bnQKCQkJaWYoZmxvYXR2YWwoJGl0ZW0tPmFtb3VudCkgPT0gMCkKCQkJewoJCQkJJGRlc2MgPSAiV2hlbiByZXF1ZXN0aW5nIGEgcmVmdW5kLCB0aGUgcmVsYXRlZCB0cmFuc2FjdGlvbiBjYW4gYmUgaW4gYSBzZXR0bGVkIG9yIHVuc2V0dGxlZCBzdGF0ZS4gRm9yIHNldHRsZWQgdHJhbnNhY3Rpb25zLCB0aGUgZnVuZHMgIjsKCQkJCSRkZXNjIC49ICJoYXZlIGFjdHVhbGx5IGJlZW4gZGViaXRlZCBmcm9tIHRoZSBjdXN0b21lcidzIGFjY291bnQgc28gaXQncyBwb3NzaWJsZSBmb3IgdGhlbSB0byBiZSByZWZ1bmRlZC4gRm9yIHVuc2V0dGxlZCB0cmFuc2FjdGlvbnMsICI7CgkJCQkkZGVzYyAuPSAidGhlIGRlYml0IGlzIHN0aWxsIHBlbmRpbmcgc28gaW4gdGhpcyBjYXNlIHRoZXJlJ3Mgbm90aGluZyB0byByZWZ1bmQgYW5kIHRoZSB0cmFuc2FjdGlvbiBpcyBzaW1wbHkgdm9pZGVkIHdoaWNoIGNhbmNlbHMgdGhlICI7CgkJCQkkZGVzYyAuPSAicmVxdWVzdCB0byB0cmFuc2ZlciB0aGUgZnVuZHMuIjsKCQkJCSRhbW91bnQgPSAiPHNwYW4gc3R5bGU9J2ZvbnQtZmFtaWx5OmNvdXJpZXI7IGZvbnQtdmFyaWFudDogc21hbGwtY2FwczsnPlZPSURFRDwvc3Bhbj4iLk1NX1V0aWxzOjpnZXRJbmZvSWNvbigkZGVzYyk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkYW1vdW50ID0gIjxzcGFuIHN0eWxlPSdmb250LWZhbWlseTpjb3VyaWVyOyc+Ii5fbW1mKGFicygkaXRlbS0+YW1vdW50KSwkaXRlbS0+Y3VycmVuY3kpLiI8L3NwYW4+IjsKCQkJfQoJCQkJCgkJCWlmICgoaXNzZXQoJGl0ZW0tPmNvdXBvbkFwcGxpZWQpICYmICRpdGVtLT5jb3Vwb25BcHBsaWVkKSB8fCAoaXNzZXQoJGl0ZW0tPnByb3JhdGlvbkFwcGxpZWQpICYmICRpdGVtLT5wcm9yYXRpb25BcHBsaWVkKSkKCQkJewoJCQkJJGRpc2NvdW50RGVzY3JpcHRpb24gPSAiRElTQ09VTlRTIEFQUExJRURcbiI7CgkJCQkKCQkJCWlmKGlzc2V0KCRpdGVtLT5jb3Vwb25BcHBsaWVkKSAmJiAkaXRlbS0+Y291cG9uQXBwbGllZCkKCQkJCXsKCQkJCQlpZighZW1wdHkoJGl0ZW0tPmNvdXBvbkRpc2NvdW50KSkKCQkJCQl7CgkJCQkJCSRkaXNjb3VudERlc2NyaXB0aW9uIC49ICJDb3Vwb246ICIuX21tZigkaXRlbS0+Y291cG9uRGlzY291bnQsICRpdGVtLT5jdXJyZW5jeSkuIiAoeyRpdGVtLT5jb3Vwb25OYW1lfSlcbiI7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQlpZihpc3NldCgkaXRlbS0+cHJvcmF0aW9uQXBwbGllZCkgJiYgJGl0ZW0tPnByb3JhdGlvbkFwcGxpZWQpCgkJCQl7CgkJCQkJaWYoIWVtcHR5KCRpdGVtLT5wcm9yYXRpb25BbW91bnQpKQoJCQkJCXsKCQkJCQkJJGRpc2NvdW50RGVzY3JpcHRpb24gLj0gIlByb3JhdGlvbjogIi5fbW1mKCRpdGVtLT5wcm9yYXRpb25BbW91bnQsICRpdGVtLT5jdXJyZW5jeSkuIlxuIjsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWlmKChpc3NldCgkaXRlbS0+Y291cG9uQXBwbGllZCkgJiYgJGl0ZW0tPmNvdXBvbkFwcGxpZWQpICYmIChpc3NldCgkaXRlbS0+cHJvcmF0aW9uQXBwbGllZCkgJiYgJGl0ZW0tPnByb3JhdGlvbkFwcGxpZWQpCgkJCQkJJiYgIWVtcHR5KCRpdGVtLT5jb3Vwb25EaXNjb3VudCkgJiYgIWVtcHR5KCRpdGVtLT5wcm9yYXRpb25BbW91bnQpKQoJCQkJewoJCQkJCSR0b3RhbERpc2NvdW50ID0gJGl0ZW0tPmNvdXBvbkRpc2NvdW50ICsgJGl0ZW0tPnByb3JhdGlvbkFtb3VudDsKCQkJCQkKCQkJCQkkZGlzY291bnREZXNjcmlwdGlvbiAuPSAiLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4iOwoJCQkJCSRkaXNjb3VudERlc2NyaXB0aW9uIC49ICJUb3RhbCBEaXNjb3VudDogIi5fbW1mKCR0b3RhbERpc2NvdW50LCAkaXRlbS0+Y3VycmVuY3kpOwoJCQkJfQoJCQkJCgkJCQkkYW1vdW50IC49ICIgIi5NTV9VdGlsczo6Z2V0RGlzY291bnRJY29uKCRkaXNjb3VudERlc2NyaXB0aW9uKTsKCQkJfQoJCQkKCQkJJGNybnRSb3cgPSBhcnJheQoJCQkoCgkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICI8c3BhbiBzdHlsZT0nZm9udC1mYW1pbHk6Y291cmllcjsnPnskaXRlbS0+b3JkZXJOdW1iZXJ9PC9zcGFuPiIpLAoJCQkJYXJyYXkoICdjb250ZW50JyA9PiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJGl0ZW0tPmRhdGUsICRkYXRlRm9ybWF0KSksCgkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICRpdGVtLT5wcm9kdWN0TmFtZSksCgkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICRhbW91bnQpLAoJCQkJYXJyYXkoICdjb250ZW50JyA9PiAkdHJhbnNUeXBlKQoJCQkpOwoJCQkKCQkJaWYoJHJlbmRlckZvckFkbWluKQoJCQl7CgkJCQkkY3JudFJvd1tdID0gYXJyYXkoICdjb250ZW50JyA9PiAkYWZmaWxpYXRlSW5mbyk7CgkJCQkkY3JudFJvd1tdID0gYXJyYXkoICdjb250ZW50JyA9PiAkYWN0aW9ucywgImF0dHIiID0+ICJub3dyYXAiKTsKCQkJfQoJCQkKCQkJJHJvd3NbXSA9ICRjcm50Um93OwoJCX0KCQkKCQlyZXR1cm4gJHJvd3M7Cgl9Cn0K', 0, '2018-11-21 06:38:55'),
(201, 'paymentservicefeatures', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzIGlzIGEgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBjb250YWluZXIgZm9yIGEgc2V0IG9mIGNvbnN0YW50cyByZXByZXNlbnRpbmcgZmVhdHVyZXMKICogdGhhdCBtYXkgYmUgaW1wbGVtZW50ZWQgYnkgaW5kaXZpZHVhbCBwYXltZW50IHNlcnZpY2VzCiAqLwpjbGFzcyBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzIAp7Cgljb25zdCBDQVJEX09OX0ZJTEUgCQkJCT0gMTsKCWNvbnN0IE9OU0lURV9TRVJWSUNFICAgIAkJPSAyOwoJY29uc3QgT0ZGU0lURV9TRVJWSUNFICAgCQk9IDM7Cgljb25zdCBDT1VQT05TIAkgICAgCQkJPSA0OwoJY29uc3QgVFJBTlNBQ1RJT05fUEFHRV9BQ1RJT05TICA9IDU7IC8vIGN1c3RvbSBhY3Rpb25zIG9uIHRoZSB0cmFuc2FjdGlvbnMgcGFnZQoJY29uc3QgVE9LRU5fRVhDSEFOR0UJCQk9IDY7IC8vIHN1cHBvcnRzIGphdmFzY3JpcHQgdG9rZW4tZXhjaGFuZ2UgZnJvbSBjaGVja291dCBwcm9jZXNzCgljb25zdCBURVNUX01PREUJCQkJCT0gNzsgLy8gd2hldGhlciB0aGUgZ2F0ZXdheSBzdXBwb3J0cyBhIHRlc3Qvc2FuZGJveCBtb2RlCgljb25zdCBNT0RJRllfUkVCSUxMX0RBVEUJCT0gODsKfQo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(202, 'stripeservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fU3RyaXBlU2VydmljZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTU1fUGF5bWVudFNlcnZpY2UgaW50ZXJmYWNlIHVzaW5nIFN0cmlwZSAod3d3LnN0cmlwZS5jb20pCiAqLwoKY2xhc3MgTU1fU3RyaXBlU2VydmljZSBleHRlbmRzIE1NX1NjaGVkdWxlZFBheW1lbnRTZXJ2aWNlCnsKCXByb3RlY3RlZCAkdG9rZW4gPSAiU1RSSVBFIjsgCgkKCXByb3RlY3RlZCAkdGVzdEFQSUtleSA9ICIiOwoJcHJvdGVjdGVkICRsaXZlQVBJS2V5ID0gIiI7CgkKCXByb3RlY3RlZCAkdGVzdFB1Ymxpc2hhYmxlS2V5ID0gIiI7Cglwcm90ZWN0ZWQgJGxpdmVQdWJsaXNoYWJsZUtleSA9ICIiOwoJCglwcm90ZWN0ZWQgJHRlc3RNb2RlID0gZmFsc2U7CQoJCglwcm90ZWN0ZWQgJHN0cmlwZUpTRW5hYmxlZCA9IGZhbHNlOwoJCglwcm90ZWN0ZWQgJHN1cHBvcnRlZEN1cnJlbmNpZXMgPSBhcnJheSgiQUVEIiwgIkFGTiIsICJBTEwiLCAiQU1EIiwgIkFORyIsICJBT0EiLCAiQVJTIiwgIkFVRCIsICJBV0ciLCAiQVpOIiwgCgkJCSJCQU0iLCAiQkJEIiwgIkJEVCIsICJCR04iLCAiQk1EIiwgIkJORCIsICJCT0IiLCAiQlJMIiwgIkJTRCIsICJCV1AiLCAiQlpEIiwgIkNBRCIsICJDREYiLCAiQ0hGIiwgCgkJCSJDTlkiLCAiQ09QIiwgIkNSQyIsICJDVkUiLCAiQ1pLIiwgIkRLSyIsICJET1AiLCAiRFpEIiwgIkVFSyIsICJFR1AiLCAiRVRCIiwgIkVVUiIsICJGSkQiLCAKCQkJIkZLUCIsICJHQlAiLCAiR0VMIiwgIkdJUCIsICJHTUQiLCAiR1RRIiwgIkdZRCIsICJIS0QiLCAiSE5MIiwgIkhSSyIsICJIVEciLCAiSFVGIiwgIklEUiIsICJJTFMiLCAKCQkJIklOUiIsICJJU0siLCAiSk1EIiwgIktFUyIsICJLR1MiLCAiS0hSIiwgIktZRCIsICJLWlQiLCAiTEFLIiwgIkxCUCIsICJMS1IiLCAiTFJEIiwgCgkJCSJMU0wiLCAiTFRMIiwgIkxWTCIsICJNQUQiLCAiTURMIiwgIk1LRCIsICJNTlQiLCAiTU9QIiwgIk1STyIsICJNVVIiLCAiTVZSIiwgIk1XSyIsICJNWE4iLCAiTVlSIiwgCgkJCSJNWk4iLCAiTkFEIiwgIk5HTiIsICJOSU8iLCAiTk9LIiwgIk5QUiIsICJOWkQiLCAiUEFCIiwgIlBFTiIsICJQR0siLCAiUEhQIiwgIlBLUiIsICJQTE4iLCAiUUFSIiwgCgkJCSJST04iLCAiUlNEIiwgIlJVQiIsICJTQVIiLCAiU0JEIiwgIlNDUiIsICJTRUsiLCAiU0dEIiwgIlNIUCIsICJTTEwiLCAiU09TIiwgIlNSRCIsICJTVEQiLCAiU1ZDIiwgCgkJCSJTWkwiLCAiVEhCIiwgIlRKUyIsICJUT1AiLCAiVFJZIiwgIlRURCIsICJUV0QiLCAiVFpTIiwgIlVBSCIsICJVR1giLCAiVVNEIiwgIlVZVSIsICJVWlMiLCAiVkVGIiwgCgkJCSJXU1QiLCAiWENEIiwgIllFUiIsICJaQVIiLCAiWk1XIiwgLy9lbmQgb2YgZGVjaW1hbCBiYXNlZCBjdXJyZW5jaWVzCgkJCQoJCQkvL3RoZSBmb2xsb3dpbmcgY3VycmVuY2llcyBhcmUgemVyby1kZWNpbWFsIGN1cnJlbmNpZXMKCQkJIkJJRiIsICJDTFAiLCAiREpGIiwgIkdORiIsICJKUFkiLCAiS01GIiwgIktSVyIsICJNR0EiLCAiUFlHIiwgIlJXRiIsICJWTkQiLCAiVlVWIiwgIlhBRiIsICJYT0YiLCAiWFBGIik7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkYXV0b2xvYWQ9dHJ1ZSkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRhdXRvbG9hZCk7CgkJCgkJaWYoJGF1dG9sb2FkKQoJCXsKCQkJJHRoaXMtPnNldHVwU3RyaXBlKCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBsb2FkRGVwZW5kZW5jaWVzKCkKCXsKCQlyZXF1aXJlX29uY2UoTU1fTElCX0RJUi4iL3N0cmlwZS9pbml0LnBocCIpOwoJfQoJCgkKCS8qKgoJICogSW5pdGlhbGl6ZXMgdGhlIFN0cmlwZSBsaWJyYXJpZXMKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBzZXR1cFN0cmlwZSgpCgl7CgkJaWYgKCR0aGlzLT50ZXN0TW9kZSAmJiAhZW1wdHkoJHRoaXMtPnRlc3RBUElLZXkpKQoJCXsKCQkJXFN0cmlwZVxTdHJpcGU6OnNldEFwaUtleSgkdGhpcy0+dGVzdEFQSUtleSk7CgkJfQoJCWVsc2UgaWYgKCFlbXB0eSgkdGhpcy0+bGl2ZUFQSUtleSkpCgkJewoJCQlcU3RyaXBlXFN0cmlwZTo6c2V0QXBpS2V5KCR0aGlzLT5saXZlQVBJS2V5KTsKCQl9Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGluc3RhbGwoKSAKCXsgCgkJcGFyZW50OjppbnN0YWxsKCk7CgkJCgkJJHNxbCA9ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9TVFJJUEVfQ1VTVE9NRVJfTElOS1MuIiAoXG4iLgoJCQkJInN0cmlwZV9jdXN0b21lcl9pZCBWQVJDSEFSKDI1NSkgQ09MTEFURSB1dGY4X2JpbiBOT1QgTlVMTCxcbiIuCgkJCQkibWVtYmVybW91c2VfY3VzdG9tZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkiVU5JUVVFIEtFWSBzdHJpcGVfY3VzdG9tZXJfaWQgKHN0cmlwZV9jdXN0b21lcl9pZCksXG4iLgoJCQkJIlVOSVFVRSBLRVkgbWVtYmVybW91c2VfY3VzdG9tZXJfaWQgKG1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkKVxuIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpO1xuIjsKCQkKCQkkc3FsLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX1NUUklQRV9DSEFSR0VTLiIgKFxuIi4KCQkJCSJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSJvcmRlcl9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJvcmRlcl9pdGVtX2lkIGJpZ2ludCgyMCkgTlVMTCxcbiIuCgkJCQkiY2hhcmdlX2lkIHZhcmNoYXIoMjU1KSBDT0xMQVRFIHV0ZjhfYmluLFxuIi4KCQkJCSJsYXN0X2ZvdXIgdmFyY2hhcig0KSBOVUxMLFxuIi4KCQkJCSJhbW91bnQgZGVjaW1hbCgxMCwyKSBOT1QgTlVMTCxcbiIuCgkJCQkiY3VycmVuY3kgY2hhcigzKSBOT1QgTlVMTCBERUZBVUxUICd1c2QnLFxuIi4KCQkJCSJ0cmFuc2FjdGlvbl9kYXRlIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKGlkKSxcbiIuCgkJCQkiS0VZIG1tX3N0cmlwZV9jaGFyZ2VfY2hhcmdlX2lkX2lkeCAoY2hhcmdlX2lkKVxuIi4KCQkJCSIpIERFRkFVTFQgQ0hBUkFDVEVSIFNFVCB1dGY4IENPTExBVEUgdXRmOF91bmljb2RlX2NpO1xuIjsKCQkKCQkkc3FsLj0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX1NUUklQRV9XRUJIT09LUy4iIChcbiIuCgkJCQkiaWQgYmlnaW50KDIwKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCxcbiIuCgkJCQkid2ViaG9va19pZCB2YXJjaGFyKDI1NSksXG4iLgoJCQkJImRhdGVfcmVjZWl2ZWQgZGF0ZXRpbWUgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7XG4iOwoJCQoJCWRiRGVsdGEoJHNxbCk7Cgl9CgkKCQoJLyoqCgkgKiBSZXBvcnQgdGhlIGZlYXR1cmVzIHRoZSBTdHJpcGUgc2VydmljZSBzdXBwb3J0cwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6c3VwcG9ydHNGZWF0dXJlKCkKCSAqCgkgKiBAcGFyYW0gaW50ZWdlciAkZmVhdHVyZUNvbnN0IGEgY29uc3QgYXMgZGVmaW5lZCBpbiBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdCBzdXBwb3J0ZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHN1cHBvcnRzRmVhdHVyZSgkZmVhdHVyZUNvbnN0KQoJewoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9OU0lURV9TRVJWSUNFOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OkNBUkRfT05fRklMRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDT1VQT05TOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OlRPS0VOX0VYQ0hBTkdFOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OlRFU1RfTU9ERTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpNT0RJRllfUkVCSUxMX0RBVEU7CgkJcmV0dXJuIGluX2FycmF5KCRmZWF0dXJlQ29uc3QsJHN1cHBvcnRlZCx0cnVlKTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGh0bWwgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHBheW1lbnQgbWV0aG9kIHNldHRpbmdzIHNjcmVlbiBmb3IgY29uZmlndXJpbmcgU3RyaXBlCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbmZpZ3VyYXRpb24gZGlhbG9nIGh0bWwKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdPcHRpb25zKCkKCXsKCQkkY29uZmlnX29wdGlvbnMgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoInskdGhpcy0+Z2V0VGVtcGxhdGVEaXIoKX0vc3RyaXBlX2NvbmZpZy5odG1sLnBocCIsJHRoaXMpOwoJCXJldHVybiAkY29uZmlnX29wdGlvbnM7Cgl9CgkKCQoJLyoqCgkgKiBWYWxpZGF0ZXMgYW5kIGNvbmZpZ3VyZXMgdGhlIG9iamVjdCB3aXRoIHRoZSBzZXR0aW5ncyBpbmZvcm1hdGlvbiBnZW5lcmF0ZWQgYnkgc3VibWlzc2lvbiBvZiB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NDb25maWdPcHRpb25zKCkKCSAqCgkgKiBAcGFyYW0gJHBvc3QgQW4gYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSBwb3N0ZWQgZnJvbSB0aGUgcGF5bWVudCBtZXRob2RzIHNldHRpbmdzIHNjcmVlbgoJICogQHJldHVybiBBbiBNTV9SZXNwb25zZSBvZiB0eXBlIE1NX1Jlc3BvbnNlOjpTVUNDRVNTIGluZGljYXRpbmcgc3VjY2Vzc2Z1bCB2YWxpZGF0aW9uIGFuZCBhc3NpZ21lbnQuIE9uIGVycm9yLCB0aGUgdHlwZSB3aWxsIGJlIE1NX1Jlc3BvbnNlOjpFUlJPUiBhbmQgdGhlIG1lc3NhZ2Ugd2lsbCBjb250YWluIHRoZSBlcnJvciBtZXNzYWdlcwoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc0NvbmZpZ09wdGlvbnMoJHBvc3QpIAoJeyAKCQkkYWN0aXZlID0gKGlzc2V0KCRwb3N0WydvbnNpdGVfcGF5bWVudF9zZXJ2aWNlJ10pICYmIChzdHJ0b2xvd2VyKCR0aGlzLT5nZXRUb2tlbigpKSA9PSAkcG9zdFsnb25zaXRlX3BheW1lbnRfc2VydmljZSddKSk7CgkJJHRoaXMtPnNldEFjdGl2ZSgkYWN0aXZlKTsKCQkKCQlpZiAoJGFjdGl2ZSkKCQl7CgkJCSR0aGlzLT5pbnN0YWxsKCk7CgkJCSRjb25maWcgPSBpc3NldCgkcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ3N0cmlwZSddKT8kcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ3N0cmlwZSddOmFycmF5KCk7CgkJCSRlbXB0eUVycm9ycyA9ICIiOwoJCQkkY29uZmlnWyd0ZXN0X21vZGUnXSA9IGlzc2V0KCRjb25maWdbJ3Rlc3RfbW9kZSddKT8oYm9vbCkkY29uZmlnWyd0ZXN0X21vZGUnXTpmYWxzZTsKCQkJJGNvbmZpZ1snc3RyaXBlX2pzX2VuYWJsZWQnXSA9IGlzc2V0KCRjb25maWdbJ3N0cmlwZV9qc19lbmFibGVkJ10pPyhib29sKSRjb25maWdbJ3N0cmlwZV9qc19lbmFibGVkJ106ZmFsc2U7CgkJCQoJCQlpZiAoJGNvbmZpZ1sndGVzdF9tb2RlJ10pCgkJCXsKCQkJCWlmIChlbXB0eSgkY29uZmlnWyd0ZXN0X2FwaV9rZXknXSkpCgkJCQl7CgkJCQkJJGVtcHR5RXJyb3JzIC49ICJTdHJpcGU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgVGVzdCBTZWNyZXQgQVBJIEtleSI7CgkJCQl9CgkJCQkKCQkJCWlmICgoJGNvbmZpZ1snc3RyaXBlX2pzX2VuYWJsZWQnXSkgJiYgZW1wdHkoJGNvbmZpZ1sndGVzdF9wdWJsaXNoYWJsZV9rZXknXSkpCgkJCQl7CgkJCQkJJGVtcHR5RXJyb3JzIC49ICJTdHJpcGU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgVGVzdCBQdWJsaXNoYWJsZSBLZXkiOwoJCQkJfQoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCWlmIChlbXB0eSgkY29uZmlnWydsaXZlX2FwaV9rZXknXSkpCgkJCQl7CgkJCQkJJGVtcHR5RXJyb3JzIC49ICJTdHJpcGU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgTGl2ZSBTZWNyZXQgQVBJIEtleSI7CgkJCQl9CgkJCQkKCQkJCWlmICgoJGNvbmZpZ1snc3RyaXBlX2pzX2VuYWJsZWQnXSkgJiYgZW1wdHkoJGNvbmZpZ1snbGl2ZV9wdWJsaXNoYWJsZV9rZXknXSkpCgkJCQl7CgkJCQkJJGVtcHR5RXJyb3JzIC49ICJTdHJpcGU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgTGl2ZSBQdWJsaXNoYWJsZSBLZXkiOwoJCQkJfQoJCQl9CgkJCQkJCgkJCWlmICgkZW1wdHlFcnJvcnMgIT0gIiIpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGVtcHR5RXJyb3JzLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCS8vaWYgaGVyZSwgdGhhdCBtZWFucyB0aGV5IGFyZSBhbGwgb2sKCQkJCgkJCSR0aGlzLT5zZXRUZXN0TW9kZSgkY29uZmlnWyd0ZXN0X21vZGUnXSk7CgkJCSR0aGlzLT5zZXRTdHJpcGVKU0VuYWJsZWQoJGNvbmZpZ1snc3RyaXBlX2pzX2VuYWJsZWQnXSk7CgkJCQoJCQlpZiAoJHRoaXMtPnRlc3RNb2RlKQoJCQl7CgkJCQkkdGhpcy0+c2V0VGVzdEFQSUtleSgkY29uZmlnWyd0ZXN0X2FwaV9rZXknXSk7CgkJCQlpZiAoJHRoaXMtPnN0cmlwZUpTRW5hYmxlZCkKCQkJCXsKCQkJCQkkY29uZmlnWyd0ZXN0X3B1Ymxpc2hhYmxlX2tleSddID0gdHJpbSgkY29uZmlnWyd0ZXN0X3B1Ymxpc2hhYmxlX2tleSddKTsgLy9yZW1vdmUgd2hpdGVzcGFjZQoJCQkJCSR0aGlzLT5zZXRUZXN0UHVibGlzaGFibGVLZXkoJGNvbmZpZ1sndGVzdF9wdWJsaXNoYWJsZV9rZXknXSk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdGhpcy0+c2V0TGl2ZUFQSUtleSgkY29uZmlnWydsaXZlX2FwaV9rZXknXSk7CgkJCQlpZiAoJHRoaXMtPnN0cmlwZUpTRW5hYmxlZCkKCQkJCXsKCQkJCQkkY29uZmlnWydsaXZlX3B1Ymxpc2hhYmxlX2tleSddID0gdHJpbSgkY29uZmlnWydsaXZlX3B1Ymxpc2hhYmxlX2tleSddKTsgLy9yZW1vdmUgd2hpdGVzcGFjZQoJCQkJCSR0aGlzLT5zZXRMaXZlUHVibGlzaGFibGVLZXkoJGNvbmZpZ1snbGl2ZV9wdWJsaXNoYWJsZV9rZXknXSk7CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQkJCgoJCgkvKioKCSAqIENyZWF0ZXMgYSBjdXN0b21lciBpbiB0aGUgU3RyaXBlIFN5c3RlbQoJICogCgkgKiBAcGFyYW0gTU1fVXNlciAkdXNlciBUaGUgTWVtYmVyTW91c2UgdXNlcgoJICogQHBhcmFtIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MgVGhlIGJpbGxpbmcgYWRkcmVzcyBvZiB0aGUgY3VzdG9tZXIgY3JlZGl0IGNhcmQKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gVGhlIGN1c3RvbWVyJ3MgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24sIG9yIGEgcGF5bWVudCB0b2tlbiBpZiAkY2FyZEluZm8gaXMgb2YgdHlwZSBNTV9QYXltZW50VG9rZW4KCSAqIEBwYXJhbSAkb3JpZ2luYWxPcmRlcklkIChvcHRpb25hbCkgVGhlIG9yZGVyIGlkIHRvIGxpbmsgdGhlIGxvY2FsIGNhcmQgb24gZmlsZSBpbmZvcm1hdGlvbiB0bwoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgd2hldGhlciB0aGUgY3VzdG9tZXIgd2FzIGNyZWF0ZWQgaW4gdGhlIFN0cmlwZSBzeXN0ZW0gc3VjY2Vzc2Z1bGx5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjcmVhdGVDdXN0b21lcihNTV9Vc2VyICR1c2VyLCBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzLCBNTV9DYXJkSW5mbyAkY2FyZEluZm8sICRvcmlnaW5hbE9yZGVySWQ9bnVsbCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJdHJ5IAoJCXsKCQkJaWYgKCRjYXJkSW5mbyBpbnN0YW5jZW9mIE1NX1BheW1lbnRUb2tlbikKCQkJewoJCQkJJHNvdXJjZVBhcmFtZXRlciA9ICRjYXJkSW5mby0+Z2V0VG9rZW4oKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkc291cmNlUGFyYW1ldGVyID0gYXJyYXkoCgkJCQkJCQkJICJvYmplY3QiCQkJPT4gImNhcmQiLAoJCQkJCQkJCSAibmFtZSIJCQkJPT4gJHVzZXItPmdldEZ1bGxOYW1lKCksCgkJCQkJCQkJICJudW1iZXIiICAgIAkJPT4gJGNhcmRJbmZvLT5nZXRDYXJkTnVtYmVyKCksCgkJCQkJCQkJICJleHBfbW9udGgiIAkJPT4gJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKSwKCQkJCQkJCQkgImV4cF95ZWFyIiAgCQk9PiAkY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCksCgkJCQkJCQkJICJjdmMiICAgICAgIAkJPT4gJGNhcmRJbmZvLT5nZXRDVlYoKSwKCQkJCQkJCQkgImFkZHJlc3NfbGluZTEiICAgID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0QWRkcmVzc0xpbmUxKCksCgkJCQkJCQkJICJhZGRyZXNzX2xpbmUyIiAgICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMigpLAoJCQkJCQkJCSAiYWRkcmVzc196aXAiCSAgICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKSwKCQkJCQkJCQkgImFkZHJlc3Nfc3RhdGUiICAgID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKSwKCQkJCQkJCQkgImFkZHJlc3NfY2l0eSIgICAgID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpLAoJCQkJCQkJCSAiYWRkcmVzc19jb3VudHJ5IiAgPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRDb3VudHJ5KCkKCQkJCQkJICAgKTsKCQkJfQoJCQkkY3VzdG9tZXJEYXRhID0gYXJyYXkoCgkJCQkiZGVzY3JpcHRpb24iID0+IGdldF9ibG9naW5mbygpLiIgQ3VzdG9tZXIgSUQjIHskdXNlci0+Z2V0SWQoKX0gKHskdXNlci0+Z2V0RW1haWwoKX0pIiwKCQkJCSJlbWFpbCIgPT4gJHVzZXItPmdldEVtYWlsKCksCgkJCQkic291cmNlIiA9PiAkc291cmNlUGFyYW1ldGVyLAoJCQkJIm1ldGFkYXRhIiA9PiBhcnJheSgKCQkJCQkibmFtZSIgPT4gJHVzZXItPmdldEZ1bGxOYW1lKCksCgkJCQkpLAoJCQkpOwoJCQkKCQkJJHN0cmlwZUN1c3RvbWVyID0gXFN0cmlwZVxDdXN0b21lcjo6Y3JlYXRlKCRjdXN0b21lckRhdGEpOwoJCQkKCQkJLy9jcmVhdGUgbGluayB0byBzdHJpcGUgY3VzdG9tZXIKCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfU1RSSVBFX0NVU1RPTUVSX0xJTktTLGFycmF5KCJzdHJpcGVfY3VzdG9tZXJfaWQiPT4kc3RyaXBlQ3VzdG9tZXItPmlkLCAibWVtYmVybW91c2VfY3VzdG9tZXJfaWQiPT4kdXNlci0+Z2V0SWQoKSkpOwoJCQlpZighJHJlc3VsdCkKCQkJewoJCQkJLy9UT0RPOiBkbyBzb21ldGhpbmcgaWYgdGhpcyBmYWlscyBpbiB0aGUgZnV0dXJlLCBpZSBsb2cuIE5vdCBhIGNyaXRpY2FsIGVub3VnaCBlcnJvciB0byBzdG9wIHRoZSBwcm9jZXNzLCBidXQgd2Ugd291bGQgYmUgaW50ZXJlc3RlZCB0byBrbm93IGl0IGhhcHBlbmVkCgkJCX0KCQkJCgkJCS8vY3JlYXRlIGVudHJ5IGluIGNhcmQgb24gZmlsZSB0YWJsZQoJCQkkY29mRGF0YSA9IGFycmF5KCJ1c2VyX2lkIj0+JHVzZXItPmdldElkKCksICJwYXltZW50X3NlcnZpY2VfaWQiPT4kdGhpcy0+Z2V0SWQoKSwgInBheW1lbnRfc2VydmljZV9pZGVudGlmaWVyIj0+JHN0cmlwZUN1c3RvbWVyLT5pZCk7CgkJCWlmICghaXNfbnVsbCgkb3JpZ2luYWxPcmRlcklkKSkKCQkJewoJCQkJJGNvZkRhdGFbJ29yaWdpbmFsX29yZGVyX2lkJ10gPSAkb3JpZ2luYWxPcmRlcklkOwoJCQl9CgkJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0NBUkRfT05fRklMRSwgJGNvZkRhdGEpOwoJCQlpZighJHJlc3VsdCkKCQkJewoJCQkJLy9UT0RPOiBzYW1lIGRlYWwgYXMgYWJvdmU6IGRvIHNvbWV0aGluZyBpZiB0aGlzIGZhaWxzIGluIHRoZSBmdXR1cmUsIGllIGxvZy4gTm90IGNyaXRpY2FsIGVub3VnaCBlcnJvciB0byBzdG9wIAoJCQl9CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHN0cmlwZUN1c3RvbWVyLT5pZCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlLT5nZXRNZXNzYWdlKCksIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgcHJvZHVjdCdzIHRyaWFsIGRlZmluaXRpb24gYW5kIGNvbnZlcnRzIGl0IGludG8gZGF5cwoJICogCgkgKiBAcGFyYW0gTU1fUHJvZHVjdCAkcHJvZHVjdCBUaGUgcHJvZHVjdCB0byBjb252ZXJ0IHRoZSB0cmlhbCBvZgoJICogQHJldHVybiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgbnVtYmVyIG9mIGRheXMsIDAgb24gZXJyb3IKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBjb252ZXJ0VHJpYWxUb0RheXMoTU1fUHJvZHVjdCAkcHJvZHVjdCkKCXsKCQlpZiAoISRwcm9kdWN0LT5oYXNUcmlhbCgpKQoJCXsKCQkJcmV0dXJuIDA7CgkJfQoJCQoJCSRudW1Vbml0cyA9ICRwcm9kdWN0LT5nZXRUcmlhbER1cmF0aW9uKCk7CgkJJHVuaXRUeXBlID0gJHByb2R1Y3QtPmdldFRyaWFsRnJlcXVlbmN5KCk7CgkJc3dpdGNoICgkdW5pdFR5cGUpCgkJewoJCQljYXNlICdkYXlzJzoKCQkJCXJldHVybiAkbnVtVW5pdHM7CgkJCQlicmVhazsKCQkJY2FzZSAnd2Vla3MnOgoJCQkJcmV0dXJuICgkbnVtVW5pdHMqNyk7CgkJCQlicmVhazsKCQkJY2FzZSAneWVhcnMnOgoJCQkJcmV0dXJuICgkbnVtVW5pdHMqMzY1KTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIDA7CgkJfQoJfQoJCgkKCS8qKgoJICogUmVzcG9uZCB0byBTdHJpcGUgd2ViaG9va3MuIFVzZWQgdG8gZGV0ZWN0IHJlZnVuZHMgaXNzdWVkIGJ5IHRoZSBvdGhlciBzaWRlCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpwcm9jZXNzTm90aWZpY2F0aW9uKCkKCSAqCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgVGhlICRfUE9TVCBzdXBlcmdsb2JhbCBpZiBpdCBleGlzdHMsIGEgYmxhbmsgYXJyYXkgaWYgbm90LiBJZ25vcmVkIGluIHRoaXMgaW1wbGVtZW50YXRpb24gaW4gZmF2b3Igb2YgcGhwOi8vaW5wdXQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHRoZSBzdGF0dXMgb2YgYW55IG9wZXJhdGlvbnMgcGVyZm9ybWVkIGluIHRoZSBtZXRob2QuIFRoZSBtZXNzYWdlIGZpZWxkIG9mIHRoZSByZXNwb25zZSB3aWxsIGJlIGVjaG9lZCB0byB0aGUgc2NyaXB0IGNhbGxlciB2ZXJiYXRpbQoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc05vdGlmaWNhdGlvbigkcmVxdWVzdCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRyYXdSZXF1ZXN0ID0gZmlsZV9nZXRfY29udGVudHMoInBocDovL2lucHV0Iik7CgkJJHdlYmhvb2sgPSBqc29uX2RlY29kZSgkcmF3UmVxdWVzdCk7CgkJCgkJaWYgKCR3ZWJob29rID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCB3ZWJob29rIGZvcm1hdDogQ291bGQgbm90IGRlY29kZSBKU09OIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoaXNzZXQoJHdlYmhvb2stPmlkKSAmJiAkdGhpcy0+aXNEdXBsaWNhdGVXZWJob29rKCR3ZWJob29rLT5pZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkR1cGxpY2F0ZSB3ZWJob29rIik7CgkJfQoJCQoJCS8vbG9nIHRoZSB3ZWJob29rCgkJJHdwZGItPmluc2VydChNTV9UQUJMRV9TVFJJUEVfV0VCSE9PS1MsYXJyYXkoIndlYmhvb2tfaWQiPT4kd2ViaG9vay0+aWQsImRhdGVfcmVjZWl2ZWQiPT5NTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSkpOwoJCQoJCWlmICghaXNzZXQoJHdlYmhvb2stPnR5cGUpKQoJCXsKCQkJLy93ZSBkb24ndCByZWNvZ25pemUgdGhpcyB3ZWJob29rLCBzbyBqdXN0IGlnbm9yZSBpdAoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQl9CgkJCgkJc3dpdGNoICgkd2ViaG9vay0+dHlwZSkKCQl7CgkJCWNhc2UgJ2NoYXJnZS5yZWZ1bmRlZCc6CgkJCQlpZiAoIWlzc2V0KCR3ZWJob29rLT5kYXRhKSB8fCAhaXNzZXQoJHdlYmhvb2stPmRhdGEtPm9iamVjdCkgfHwgIWlzc2V0KCR3ZWJob29rLT5kYXRhLT5vYmplY3QtPmlkKSB8fCAKCQkJCQkhaXNzZXQoJHdlYmhvb2stPmRhdGEtPm9iamVjdC0+cmVmdW5kZWQpIHx8ICgkd2ViaG9vay0+ZGF0YS0+b2JqZWN0LT5yZWZ1bmRlZCAhPSB0cnVlKSkKCQkJCXsKCQkJCQkvL25vdCByZWNvZ25pemluZyB0aGUgb2JqZWN0IGZvcm1hdCwgb3IgdGhpcyBpcyBhIHBhcnRpYWwgcmVmdW5kLCBpZ25vcmUKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJCX0KCQkJCSR0cmFuc2FjdGlvbkxvb2t1cFNRTCA9ICJTRUxFQ1QgdC5pZCBhcyB0cmFuc2FjdGlvbl9pZCBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgdCwgIi5NTV9UQUJMRV9TVFJJUEVfQ0hBUkdFUy4iIGMgIi4KCQkJCQkJCQkJCSJXSEVSRSB0LnBheW1lbnRfc2VydmljZV9pZD0lcyBBTkQgKCh0LnRyYW5zYWN0aW9uX3R5cGU9JXMpIE9SICh0LnRyYW5zYWN0aW9uX3R5cGU9JXMpKSBBTkQgdC5wYXltZW50X3NlcnZpY2VfZGV0YWlsX2lkPWMuaWQgQU5EIGMuY2hhcmdlX2lkPSVzIEFORCB0LnJlZnVuZF9pZCBJUyBOVUxMIjsKCQkJCSRjaGFyZ2VJbmZvID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoJHRyYW5zYWN0aW9uTG9va3VwU1FMLCR0aGlzLT5nZXRJZCgpLE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5ULCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQsJHdlYmhvb2stPmRhdGEtPm9iamVjdC0+aWQpKTsKCQkJCWlmICgkY2hhcmdlSW5mbyAhPSBudWxsKQoJCQkJewoJCQkJCS8vZm91bmQgdGhlIGNoYXJnZQoJCQkJCSRyZWZ1bmRSZXNwb25zZSA9ICR0aGlzLT5fcmVmdW5kVHJhbnNhY3Rpb24oJGNoYXJnZUluZm8tPnRyYW5zYWN0aW9uX2lkLGZhbHNlKTsKCQkJCQkvL2RvZXNudCByZWFsbHkgbWF0dGVyIHdoYXQgdGhlIHJlc3BvbnNlIGlzLCB3ZSBhcmUgb3V0IG9mIG1vdmVzIGlmIHRoZSByZWZ1bmQgZmFpbHMKCQkJCX0KCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQkvL3dlIGRvbid0IHJlY29nbml6ZSB0aGlzIHdlYmhvb2ssIHNvIGp1c3QgaWdub3JlIGl0CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBEZXRlY3RzIGlmIHRoZSB3ZWJob29rIHdpdGggdGhlIHN1cHBsaWVkIGlkIGhhcyBiZWVuIHByb2Nlc3NlZCBiZWZvcmUKCSAqIAoJICogQHBhcmFtIHN0cmluZyAkd2ViaG9va0lkCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGlzIGlzIGEgZHVwbGljYXRlIGlkLCBmYWxzZSBvdGhlcndpc2UKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBpc0R1cGxpY2F0ZVdlYmhvb2soJHdlYmhvb2tJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGNvdW50ID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoIlNFTEVDVCBjb3VudCgqKSBGUk9NICIuTU1fVEFCTEVfU1RSSVBFX1dFQkhPT0tTLiIgV0hFUkUgd2ViaG9va19pZD0lcyIsJHdlYmhvb2tJZCkpOwoJCXJldHVybiAoIWlzX251bGwoJGNvdW50KSAmJiAoJGNvdW50PjApKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRPcmRlckRlc2NyaXB0b3IoTU1fT3JkZXIgJG9yZGVyLCAkZGVmYXVsdFRleHQ9bnVsbCkKCXsgIAoJCWlmKGlzX251bGwoJGRlZmF1bHRUZXh0KSl7CgkJCSRkZWZhdWx0VGV4dD0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSI7CgkJfSAKCQkKCQlyZXR1cm4gYXBwbHlfZmlsdGVycyhNTV9GaWx0ZXJzOjokU1RSSVBFX0JJTExJTkdfU1RBVEVNRU5UX0RFU0NSSVBUT1IsJGRlZmF1bHRUZXh0LCAkb3JkZXItPmdldERhdGFBc1N0ZENsYXNzKCkpOwoJfQoJCgkKCS8qKgoJICogQ2hhcmdlIGFuIG9yZGVyCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGNoYXJnZQoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyBUaGUgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24gdG8gdXNlIGluIGNoYXJnaW5nIHRoZSBvcmRlcgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXR1cyBvZiB0aGUgY2hhcmdlIGF0dGVtcHQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNoYXJnZU9yZGVyKE1NX09yZGVyICRvcmRlciwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsICR2YWxpZGF0ZT10cnVlKSAKCXsgCgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRwYXJlbnRSZXNwb25zZSA9IHBhcmVudDo6Y2hhcmdlT3JkZXIoJG9yZGVyLCRjYXJkSW5mbywkdmFsaWRhdGUpOwoJCWlmICghTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCRwYXJlbnRSZXNwb25zZSkpCgkJewoJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCXJldHVybiAkcGFyZW50UmVzcG9uc2U7ICAKCQl9CgkJCgkJJHRyeUNhcmRPbkZpbGUgPSBpc19udWxsKCRjYXJkSW5mbyk7CgkJaWYgKCEkdHJ5Q2FyZE9uRmlsZSkgCgkJewoJCQkkY2FyZFZhbGlkYXRpb24gPSAkY2FyZEluZm8tPnZhbGlkYXRlKCk7CgkJCWlmICgkY2FyZFZhbGlkYXRpb24gIT09IHRydWUpCgkJCXsgCgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjaGFyZ2Ugb3JkZXI6IHskY2FyZFZhbGlkYXRpb259IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOyAgCgkJCX0KCQl9CQkJCgkJCgkJLy9UaGlzIG5leHQgc2VjdGlvbiBsb29rcyB1cCB0aGUgY3VzdG9tZXIgb24gU3RyaXBlIGFuZCBkb2VzIHRoZSBmb2xsb3dpbmcKCQkvLzEuIGlmIGNhcmQgb24gZmlsZSBpcyBzdXBwb3NlZCB0byBiZSB1c2VkLCBidXQgbm8gY3VzdG9tZXIgd2FzIGZvdW5kLCBpdCBleGl0cyB3aXRoIGFuIGVycm9yCgkJLy8yLiBpZiBhIGNhcmQgd2FzIHN1cHBsaWVkLCBhbmQgbm8gY3VzdG9tZXIgd2FzIGZvdW5kLCBjcmVhdGUgYSBuZXcgY3VzdG9tZXIgb24gU3RyaXBlIGFuZCBhdHRhY2ggdGhlIGNhcmQgdG8gaXQKCQkvLzMuIGlmIGEgY2FyZCB3YXMgc3VwcGxpZWQgQU5EIHRoZSBjdXN0b21lciBhbHJlYWR5IGV4aXN0cyBpbiBTdHJpcGUsIHRoYXQgY3VzdG9tZXIgaXMgdXBkYXRlZCB3aXRoIHRoZSBuZXcgY2FyZCBpbmZvcm1hdGlvbgoJCS8vCSBhbmQgdGhlbiByZXVzZWQuIFRoaXMgbWVhbnMgYW55IHByZXZpb3VzIHN1YnNjcmlwdGlvbnMgZ2V0IHVwZGF0ZWQgdG8gdXNlIHRoZSBuZXcgY2FyZC4gTm90IHN1cmUgaWYgdGhpcyBpcyB0aGUgZGVzaXJlZCBiZWhhdmlvcgoJCQoJCSRzdHJpcGVDdXN0b21lcklkID0gJHRoaXMtPmxvb2t1cEN1c3RvbWVyKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0SWQoKSk7CgkJCgkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQlpZiAoJHN0cmlwZUN1c3RvbWVySWQgPT09IGZhbHNlKQoJCXsKCQkJaWYgKCR0cnlDYXJkT25GaWxlKQoJCQl7CgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkludmFsaWQgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7ICAKCQkJfQoJCQkkY2NSZXNwb25zZSA9ICR0aGlzLT5jcmVhdGVDdXN0b21lcigkb3JkZXItPmdldEN1c3RvbWVyKCksICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKSwgJGNhcmRJbmZvLCAkb3JkZXItPmlkKTsKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRjY1Jlc3BvbnNlKSkKCQkJeyAKCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IHskY2NSZXNwb25zZS0+bWVzc2FnZX0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7ICAgCgkJCX0KCQkJJHN0cmlwZUN1c3RvbWVySWQgPSAkY2NSZXNwb25zZS0+bWVzc2FnZTsKCQl9CgkJZWxzZSAKCQl7CgkJCWlmICghJHRyeUNhcmRPbkZpbGUpCgkJCXsKCQkJCS8vdGhlcmUgaXMgYSBjYXJkIG9uIGZpbGUsIGJ1dCBjcmVkaXQgY2FyZCBpbmZvIHdhcyBzZW50IGFzIHdlbGwuIFVwZGF0ZSB0aGUgY2FyZCBvbiBmaWxlIHRvIGJlIHRoZSBjYXJkIHRoYXQgd2FzIHNlbnQKCQkJCSRhUHJvZHVjdEl0ZW0gPSByZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQkJCSR1cGRhdGVSZXNwb25zZSA9ICR0aGlzLT51cGRhdGVTdWJzY3JpcHRpb25JbmZvKCRhUHJvZHVjdEl0ZW0sJGNhcmRJbmZvLCRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKSk7CgkJCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkdXBkYXRlUmVzcG9uc2UpKQoJCQkJeyAKCQkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQkJcmV0dXJuICR1cGRhdGVSZXNwb25zZTsgICAKCQkJCX0KCQkJfQoJCX0KCQkKCQkvL25vdyBzZXR1cCBzY2hlZHVsZXMgZm9yIHRoZSByZWN1cnJpbmcgcHJvZHVjdHMKCQkkY3JlYXRlU2NoZWR1bGVkUmVzdWx0ID0gJHRoaXMtPmNyZWF0ZVNjaGVkdWxlc0Zyb21Qcm9kdWN0cygkcHJvZHVjdEl0ZW1zKTsKCQkKCQlpZihNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0Vycm9yKCRjcmVhdGVTY2hlZHVsZWRSZXN1bHQpKQoJCXsKCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQlyZXR1cm4gJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdDsgICAgCgkJfQoJCQoJCWlmICgkb3JkZXItPmdldFRvdGFsKCkgPiAwLjAwKQoJCXsKCQkJJGNoYXJnZVJlc3BvbnNlID0gJHRoaXMtPnNlbmRTdHJpcGVDaGFyZ2UoJG9yZGVyLT5nZXRUb3RhbCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksICR0aGlzLT5nZXRPcmRlckRlc2NyaXB0b3IoJG9yZGVyKSwkc3RyaXBlQ3VzdG9tZXJJZCk7CgkJCQoJCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY2hhcmdlUmVzcG9uc2UpIHx8IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRmFpbGVkKCRjaGFyZ2VSZXNwb25zZSkpCgkJCXsKCQkJCSRjcmVhdGVkU3Vic2NyaXB0aW9ucyA9ICRjcmVhdGVTY2hlZHVsZWRSZXN1bHQtPm1lc3NhZ2U7CgkJCQlpZiAoaXNfYXJyYXkoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKSAmJiAoY291bnQoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKSA+IDApKQoJCQkJewoJCQkJCSR0aGlzLT5jYW5jZWxTY2hlZHVsZWRTdWJzY3JpcHRpb25zKCRjcmVhdGVkU3Vic2NyaXB0aW9ucyk7CgkJCQl9CgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gJGNoYXJnZVJlc3BvbnNlOyAgICAKCQkJfQoJCQkKCQkJLy9sb2cgdG8gdHJhbnNhY3Rpb25zIHRhYmxlcwoJCQkkcHJvZHVjdEl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCQkkb3JkZXJJdGVtSWQgPSBudWxsOwoJCQlpZiAoY291bnQoJHByb2R1Y3RJdGVtcykgPT0gMSkKCQkJewoJCQkJJG9yZGVySXRlbSA9IHJlc2V0KCRwcm9kdWN0SXRlbXMpOwoJCQkJJG9yZGVySXRlbUlkID0gJG9yZGVySXRlbS0+Z2V0SWQoKTsKCQkJfQoJCQkKCQkJJGNoYXJnZU9iamVjdCA9ICRjaGFyZ2VSZXNwb25zZS0+Z2V0TWVzc2FnZSgpOwoJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiA9ICJQYXltZW50IGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0iOwoJCQkkdHJhbnNhY3Rpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSRpbnNlcnREYXRhID0gYXJyYXkoICJvcmRlcl9pZCIgICAgICAgICAgPT4gJG9yZGVyLT5nZXRJZCgpLAoJCQkJCQkJCSAib3JkZXJfaXRlbV9pZCIgICAgID0+ICRvcmRlckl0ZW1JZCwKCQkJCQkJCQkgImNoYXJnZV9pZCIgICAgIAkgPT4gJGNoYXJnZU9iamVjdC0+aWQsCgkJCQkJCQkJICJsYXN0X2ZvdXIiICAgICAgICAgPT4gIWVtcHR5KCRjaGFyZ2VPYmplY3QtPmNhcmQtPmxhc3Q0KT9zdWJzdHIoJGNoYXJnZU9iamVjdC0+Y2FyZC0+bGFzdDQsLTQpOiIiLAoJCQkJCQkJCSAiYW1vdW50IiAgICAgICAgICAgID0+ICRvcmRlci0+Z2V0VG90YWwoKSwKCQkJCQkJCQkgImN1cnJlbmN5IiAgICAgICAgICA9PiAkb3JkZXItPmdldEN1cnJlbmN5KCksCgkJCQkJCQkJICJ0cmFuc2FjdGlvbl9kYXRlIiAgPT4gJHRyYW5zYWN0aW9uRGF0ZQoJCQkpOwoJCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX1NUUklQRV9DSEFSR0VTLCRpbnNlcnREYXRhKTsKCQkJJHN0cmlwZUNoYXJnZUlkID0gJHdwZGItPmluc2VydF9pZDsKCQkJCgkJCS8vbm93IGxvZyB0aGUgcGF5bWVudCBpbiB0aGUgdHJhbnNhY3Rpb25zIHRhYmxlCgkJCWlmICgkdGhpcy0+dGVzdE1vZGUpCgkJCXsKCQkJCSRyZXMgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkb3JkZXJJdGVtSWQsJG9yZGVyLT5nZXRUb3RhbCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24sIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5ULHRydWUsJHRoaXMtPmlkLCRzdHJpcGVDaGFyZ2VJZCwkdHJhbnNhY3Rpb25EYXRlKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRyZXMgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkb3JkZXItPmdldElkKCksICRvcmRlckl0ZW1JZCwkb3JkZXItPmdldFRvdGFsKCksICRvcmRlci0+Z2V0Q3VycmVuY3koKSwkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+aWQsJHN0cmlwZUNoYXJnZUlkLCR0cmFuc2FjdGlvbkRhdGUpOwoJCQl9CgkJfQoJCQoJCS8vZXJyb3JzIG9yIGZhaWx1cmVzIHJldHVybiBlYXJseSwgc28gcmVhY2hpbmcgdGhpcyBwb2ludCBtZWFucyBwYXltZW50IHdhcyBzdWNjZXNzZnVsIG9yIHRoZSBpbml0aWFsIHBheW1lbnQgaXMgMAoJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokUEFJRF9DT01QTEVURSk7CgkJCgkJLy9yZWFjaGluZyB0aGlzIHBvaW50IG1lYW5zIHRoZSBzdWJzY3JpcHRpb25zIHdlcmUgc2NoZWR1bGVkIGFuZCB0aGUgaW5pdGlhbCBjaGFyZ2Ugd2FzIHN1Y2Nlc3NmdWwKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIFNlbmQgYSBjaGFyZ2UgdG8gU3RyaXBlLCBhbmQgcmV0dXJucyBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgdW5maWx0ZXJlZCByZXN1bHQuCgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICRhbW91bnQgVGhlIGFtb3VudCB0byBjaGFyZ2UuIFRoaXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gdGhlIHNtYWxsZXN0IGluZGl2aXNpYmxlIHVuaXQgb2YgdGhlIGRlc2lnbmF0ZWQgY3VycmVuY3kKCSAqIEBwYXJhbSBzdHJpbmcgICRjdXJyZW5jeSBUaGUgY3VycmVuY3kgZGVzaWduYXRpb24gdG8gc2VuZC4gRGVmYXVsdHMgdG8gInVzZCIKCSAqIEBwYXJhbSBzdHJpbmcgICRkZXNjcmlwdGlvbiBUaGUgZGVzY3JpcHRpb24gdG8gYXR0YWNoIHRvIHRoZSBjaGFyZ2UKCSAqIEBwYXJhbSBzdHJpbmcgICRzdHJpcGVDdXN0b21lcklkIChvcHRpb25hbCkgVGhlIGFscGhhbnVtZXJpYyBTdHJpcGUgY3VzdG9tZXIgaWQgdG8gY2hhcmdlLiBFaXRoZXIgY3VzdG9tZXIgb3IgY2FyZEluZm8gc2hvdWxkIGJlIHN1cHBsaWVkLCBidXQgbm90IGJvdGgKCSAqIEBwYXJhbSBzdHJpbmcgICRjYXJkSW5mbyAob3B0aW9uYWwpIFRoZSBjcmVkaXQgY2FyZCB0byBjaGFyZ2UuIEVpdGhlciBjdXN0b21lciBvciBjYXJkSW5mbyBzaG91bGQgYmUgc3VwcGxpZWQsIGJ1dCBub3QgYm90aAoJICogCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgT24gc3VjY2VzcywgY29udGFpbnMgdGhlIHN0cmlwZSBjaGFyZ2Ugb2JqZWN0IHJldHVybmVkIGJ5IHRoZSBnYXRld2F5LCBvbiBmYWlsdXJlIGNvbnRhaW5zIGFuIGVycm9yIG1lc3NhZ2UKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNlbmRTdHJpcGVDaGFyZ2UoJGFtb3VudCwgJGN1cnJlbmN5LCAkZGVzY3JpcHRpb24sICRzdHJpcGVDdXN0b21lcklkPW51bGwsICRjYXJkSW5mbz1udWxsLCAkYmlsbGluZ0FkZHJlc3M9bnVsbCkKCXsKCQlpZiAoaXNfbnVsbCgkY3VycmVuY3kpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogTm8gY3VycmVuY3kgd2FzIHNlbGVjdGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoaXNfbnVsbCgkc3RyaXBlQ3VzdG9tZXJJZCkgJiYgaXNfbnVsbCgkY2FyZEluZm8pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogTm8gcGF5bWVudCBtZXRob2Qgd2FzIHByb3ZpZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoaXNfbnVsbCgkc3RyaXBlQ3VzdG9tZXJJZCkgJiYgIWlzX251bGwoJGNhcmRJbmZvKSAmJiBpc19udWxsKCRiaWxsaW5nQWRkcmVzcykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY2hhcmdlOiBObyBiaWxsaW5nIGFkZHJlc3Mgd2FzIHByb3ZpZGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoIWlzX251bWVyaWMoJGFtb3VudCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY2hhcmdlOiBSZWNlaXZlZCBhIG5vbi1udW1lcmljIGFtb3VudCB0byBjaGFyZ2UiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vVkVSWSBJTVBPUlRBTlQ6IGludHZhbCgxOS45OSoxMDApIHlpZWxkcyAxOS45OCwgaW50dmFsKHN0cnZhbCgxOS45OSoxMDApKSB5aWVsZHMgMTkuOTkKCQkvL2NvbnZlcnQgdG8gaW50ZWdlciB0byBhdm9pZCBmbG9hdC1wb2ludCBhcml0aG1ldGljIHJvdW5kaW5nIGVycm9ycwoJCQoJCSRjdXJyZW5jeU1ldGEgPSBNTV9DdXJyZW5jeVV0aWw6OmdldEN1cnJlbmN5TWV0YWRhdGEoJGN1cnJlbmN5KTsKCQkkaW50TXVsdGlwbGllciA9IHBvdygxMCxpbnR2YWwoJGN1cnJlbmN5TWV0YVsnZnJhY19kaWdpdHMnXSkpOwoJCSRhbW91bnQgPSBpbnR2YWwoc3RydmFsKCRhbW91bnQgKiAkaW50TXVsdGlwbGllcikpOwoJCQoJCWlmICghaXNfaW50KCRhbW91bnQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogUmVjZWl2ZWQgYW4gaW1wcm9wZXJseSBmb3JtYXR0ZWQgYW1vdW50IHRvIGNoYXJnZSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNoYXJnZURhdGEgPSBhcnJheSgKCQkgICJhbW91bnQiICAgPT4gJGFtb3VudCwKICAgICAgCSAgImN1cnJlbmN5IiA9PiBzdHJ0b2xvd2VyKCRjdXJyZW5jeSksCQkJCQoJCSk7CgkJCgkJaWYgKCFlbXB0eSgkZGVzY3JpcHRpb24pKQoJCXsKCQkJJGNoYXJnZURhdGFbJ2Rlc2NyaXB0aW9uJ10gPSAkZGVzY3JpcHRpb247CgkJfQoJCQoJCWlmICghaXNfbnVsbCgkY2FyZEluZm8pKQoJCXsKICAJCQlpZiAoJGNhcmRJbmZvIGluc3RhbmNlb2YgTU1fUGF5bWVudFRva2VuKQoJCQl7CgkJCQkkY2hhcmdlRGF0YVsnc291cmNlJ10gPSAkY2FyZEluZm8tPmdldFRva2VuKCk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJICAkY2hhcmdlRGF0YVsnc291cmNlJ10gPSBhcnJheSgKCQkJCSAgCQkib2JqZWN0IgkJICA9PiAiY2FyZCIsCgkJCQkgICAgCSJudW1iZXIiICAgCSAgICAgID0+ICRjYXJkSW5mby0+Z2V0Q2FyZE51bWJlcigpLAoJCQkJIAkJImV4cF9tb250aCIgCSAgPT4gJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKSwKCQkJCSAJCSJleHBfeWVhciIgIAkgID0+ICRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvblllYXIoKSwKCQkJICAgICAgICAgICAgImN2YyIgICAgICAgCSAgPT4gJGNhcmRJbmZvLT5nZXRDVlYoKSwKCQkJICAgICAgICAgICAgImFkZHJlc3NfbGluZTEiICAgPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKSwKCQkJICAgICAgICAgICAgImFkZHJlc3NfbGluZTIiICAgPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTIoKSwKCQkJICAgICAgICAgICAgImFkZHJlc3NfemlwIgkgID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0UG9zdGFsQ29kZSgpLAoJCQkgICAgICAgICAgICAiYWRkcmVzc19zdGF0ZSIgICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldFN0YXRlKCksCgkJCSAgICAgICAgICAgICJhZGRyZXNzX2NpdHkiICAgID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpLAoJCQkgICAgICAgICAgICAiYWRkcmVzc19jb3VudHJ5IiA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKQoJCQkgICAgICAgICk7CiAgICAgIAkJfQoJCX0KCQllbHNlIAoJCXsKCQkJJGNoYXJnZURhdGFbJ2N1c3RvbWVyJ10gPSAkc3RyaXBlQ3VzdG9tZXJJZDsKCQl9CgkJCgkJdHJ5IAoJCXsKCQkJJGNoYXJnZU9iamVjdCA9IFxTdHJpcGVcQ2hhcmdlOjpjcmVhdGUoJGNoYXJnZURhdGEpOwoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGNoYXJnZU9iamVjdCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQkkc3RhdHVzID0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SOwoJCQlpZiAoc3RycG9zKCRlLT5nZXRNZXNzYWdlKCksIkludmFsaWQgY3VycmVuY3kiKSAhPT0gZmFsc2UpCgkJCXsKCQkJCSRzdGF0dXMgPSBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRkFJTEVEOwoJCQl9CgkJCQoJCQlpZiAoKCRlLT5nZXRDb2RlKCkgPT0gImNhcmRfZGVjbGluZWQiKSB8fCAoJGUtPmdldENvZGUoKSA9PSAiZXhwaXJlZF9jYXJkIikgfHwoJGUtPmdldENvZGUoKSA9PSAicHJvY2Vzc2luZ19lcnJvciIpKQoJCQl7CgkJCQkvL3RoZXNlIHN0YXR1c2VzIGluZGljYXRlIHRoYXQgdGhlIGZhaWx1cmUgaXMgb24gdGhlIHJlbW90ZSBzaWRlLCBhbmQgaXMgbm90IGFuIGVycm9yIGluIHRoZSB3YXkgdGhlIHJlcXVlc3QgaXMgY29uc3RydWN0ZWQuCgkJCQkkc3RhdHVzID0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEZBSUxFRDsKCQkJfQoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGUtPmdldE1lc3NhZ2UoKSwgJHN0YXR1cyk7CgkJfQoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiBleGVjdXRlU3Vic2NyaXB0aW9uUGF5bWVudChNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSwgJGN1cnJlbnRSZWJpbGxOdW1iZXIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiU3Vic2NyaXB0aW9uIGZvciBvcmRlciBpdGVtIGlkICIuJG9yZGVySXRlbS0+Z2V0SWQoKS4iIHdhcyBub3QgY2hhcmdlZCBiZWNhdXNlIHRoZSBpdGVtIGlzIGNhbmNlbGxlZCIpOwoJCX0KCQkKCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DT01QTEVURSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiU3Vic2NyaXB0aW9uIGZvciBvcmRlciBpdGVtIGlkICIuJG9yZGVySXRlbS0+Z2V0SWQoKS4iIHdhcyBub3QgY2hhcmdlZCBiZWNhdXNlIGJpbGxpbmcgaXMgY29tcGxldGUgZm9yIHRoaXMgaXRlbSIpOwoJCX0KCQkKCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKTsKCQkKCQkkc3RyaXBlQ3VzdG9tZXJJZCA9ICR0aGlzLT5sb29rdXBDdXN0b21lcihNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlci0+aWQpKTsKCQlpZiAoJHN0cmlwZUN1c3RvbWVySWQgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIGNhcmQgb24gZmlsZSBmb3IgdXNlciBpZCB7JHBheW1lbnRFdmVudC0+Z2V0VXNlcklkKCl9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGRlc2NyaXB0aW9uID0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSwgaXRlbTogeyRvcmRlckl0ZW0tPmdldERlc2NyaXB0aW9uKCl9IjsKCQkkZGVzY3JpcHRvciA9ICR0aGlzLT5nZXRPcmRlckRlc2NyaXB0b3IoJG9yZGVyLCAkZGVzY3JpcHRpb24pOwoJCSRjaGFyZ2VSZXNwb25zZSA9ICR0aGlzLT5zZW5kU3RyaXBlQ2hhcmdlKCRvcmRlckl0ZW0tPmdldFJlY3VycmluZ0Ftb3VudCgpLCAkb3JkZXJJdGVtLT5nZXRDdXJyZW5jeSgpLCAkZGVzY3JpcHRvciwkc3RyaXBlQ3VzdG9tZXJJZCk7CgkJCgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGNoYXJnZVJlc3BvbnNlKSB8fCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0ZhaWxlZCgkY2hhcmdlUmVzcG9uc2UpKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJcGFyZW50OjpoYW5kbGVPdmVyZHVlU3Vic2NyaXB0aW9uSXRlbSgkb3JkZXJJdGVtKTsKCQkJcmV0dXJuICRjaGFyZ2VSZXNwb25zZTsKCQl9CgkJIAoJCS8vbG9nIHN1Y2Nlc3NmdWwgdHJhbnNhY3Rpb24KCQkkY2hhcmdlT2JqZWN0ID0gJGNoYXJnZVJlc3BvbnNlLT5nZXRNZXNzYWdlKCk7CgkJJHRyYW5zYWN0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCSRpbnNlcnREYXRhID0gYXJyYXkoICJvcmRlcl9pZCIgPT4gJG9yZGVyLT5nZXRJZCgpLAoJCQkJIm9yZGVyX2l0ZW1faWQiICAgICA9PiAkb3JkZXJJdGVtLT5nZXRJZCgpLAoJCQkJImNoYXJnZV9pZCIgICAgIAk9PiAkY2hhcmdlT2JqZWN0LT5pZCwKCQkJCSJsYXN0X2ZvdXIiICAgICAgICAgPT4gIWVtcHR5KCRjaGFyZ2VPYmplY3QtPmNhcmQtPmxhc3Q0KT9zdWJzdHIoJGNoYXJnZU9iamVjdC0+Y2FyZC0+bGFzdDQsLTQpOiIiLAoJCQkJImFtb3VudCIgICAgICAgICAgICA9PiAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSwKCQkJCSJjdXJyZW5jeSIgICAgICAgICAgPT4gJG9yZGVyLT5nZXRDdXJyZW5jeSgpLAoJCQkJInRyYW5zYWN0aW9uX2RhdGUiICA9PiAkdHJhbnNhY3Rpb25EYXRlKTsKCQkKCQkKCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX1NUUklQRV9DSEFSR0VTLCRpbnNlcnREYXRhKTsKCQkkc3RyaXBlVGFibGVDaGFyZ2VJZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJCgoJCWlmICgkdGhpcy0+dGVzdE1vZGUpCgkJewoJCQlNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpLCAkb3JkZXJJdGVtLT5nZXRJZCgpLCAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkZGVzY3JpcHRpb24sIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCx0cnVlLCR0aGlzLT5nZXRJZCgpLCRzdHJpcGVUYWJsZUNoYXJnZUlkKTsJCQkKCQl9CgkJZWxzZSAKCQl7CgkJCU1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCksICRvcmRlci0+Z2V0Q3VycmVuY3koKSwgJGRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+Z2V0SWQoKSwkc3RyaXBlVGFibGVDaGFyZ2VJZCk7CgkJfQoKCQkKCQkvLyBzY2hlZHVsZSBhbm90aGVyIHBheW1lbnQgaWYgbmVjZXNzYXJ5CgkJcmV0dXJuICR0aGlzLT5zY2hlZHVsZU5leHRQYXltZW50Rm9yRXhpc3RpbmdTdWJzY3JpcHRpb24oJG9yZGVySXRlbSwgJG9yZGVyLT5nZXRDdXN0b21lcigpLCAkY3VycmVudFJlYmlsbE51bWJlcik7Cgl9CgkKCQoJCgkvKioKCSAqIExvb2tzIHVwIHRoZSBTdHJpcGUgY3VzdG9tZXIgaWQgbGlua2VkIHRvIGEgTWVtYmVyTW91c2UgdXNlcgoJICogCgkgKiBAcGFyYW0gaW50ICR1c2VySWQgVGhlIE1lbWJlck1vdXNlIHVzZXIgaWQKCSAqIEByZXR1cm4gVGhlIChzdHJpbmcpIFN0cmlwZSBjdXN0b21lciBpZCBpZiBmb3VuZCwgYm9vbGVhbiBmYWxzZSBpZiBub3QgZm91bmQgb3IgZXJyb3JlZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gbG9va3VwQ3VzdG9tZXIoJHVzZXJJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGxvb2t1cFNRTCA9ICJTRUxFQ1Qgc3RyaXBlX2N1c3RvbWVyX2lkIGZyb20gIi5NTV9UQUJMRV9TVFJJUEVfQ1VTVE9NRVJfTElOS1MuIiBXSEVSRSBtZW1iZXJtb3VzZV9jdXN0b21lcl9pZD0neyR1c2VySWR9JyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRsb29rdXBTUUwpOwoJCWlmIChpc19udWxsKCRyb3cpKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQlyZXR1cm4gJHJvdy0+c3RyaXBlX2N1c3RvbWVyX2lkOwoJfQoJCgkKCS8qKgoJICogVXBkYXRlcyB0aGUgcGF5bWVudCBnYXRld2F5IHdpdGggbmV3IGluZm9ybWF0aW9uLCBhbmQgdXBkYXRlIHRoZSBNZW1iZXJNb3VzZSBvcmRlciB3aXRoIHRoZSBuZXcgYmlsbGluZyBhZGRyZXNzCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjp1cGRhdGVTdWJzY3JpcHRpb25JbmZvKCkKCSAqIAoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtIFRoZSBvcmRlciBpdGVtIHJlcHJlc2VudGluZyB0aGUgc3Vic2NyaXB0aW9uIGJlaW5nIHVwZGF0ZWQKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gKG9wdGlvbmFsKSBUaGUgbmV3IGNhcmQgdG8gc3RvcmUgb24gZmlsZQoJICogQHBhcmFtIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MgVGhlIG5ldyBiaWxsaW5nIGFkZHJlc3MgdG8gc3RvcmUuIFNob3VsZCBiZSB0aGUgYWRkcmVzcyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1c3RvbWVyJ3MgY2FyZCBvbiBmaWxlCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSByZXByZXNlbnRpbmcgc3VjY2VzcyBvciBlcnJvci4gQ29udGFpbnMgYSBkZXNjcmlwdGl2ZSBlcnJvciBtZXNzYWdlIG9uIGVycm9yCgkgKiAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sIE1NX0NhcmRJbmZvICRjYXJkSW5mbz1udWxsLCBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzPW51bGwpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoaXNfbnVsbCgkY2FyZEluZm8pIHx8IGlzX251bGwoJGJpbGxpbmdBZGRyZXNzKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IEJvdGggYSBjcmVkaXQgY2FyZCBhbmQgYSBiaWxsaW5nIGFkZHJlc3MgbXVzdCBiZSBzdXBwbGllZCB0byB1cGRhdGUgYSBzdWJzY3JpcHRpb24iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRjYXJkVmFsaWQgPSAkY2FyZEluZm8tPnZhbGlkYXRlKCk7CgkJaWYgKCRjYXJkVmFsaWQgIT09IHRydWUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yOiB7JGNhcmRWYWxpZH0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRjdXN0b21lcklkID0gTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCWlmICgkY3VzdG9tZXJJZCA9PSAtMSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBzdWJzY3JpcHRpb246IGN1c3RvbWVyIHdhcyBub3QgZm91bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRzdHJpcGVDdXN0b21lcklkID0gJHRoaXMtPmxvb2t1cEN1c3RvbWVyKCRjdXN0b21lcklkKTsKCQlpZiAoJHN0cmlwZUN1c3RvbWVySWQgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogY3VzdG9tZXIgd2FzIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHVzZXIgPSBuZXcgTU1fVXNlcigkY3VzdG9tZXJJZCk7CgkJdHJ5IAoJCXsKCQkJJHN0cmlwZUN1c3RvbWVyID0gXFN0cmlwZVxDdXN0b21lcjo6cmV0cmlldmUoJHN0cmlwZUN1c3RvbWVySWQpOwoJCQkkc3RyaXBlQ3VzdG9tZXItPmRlc2NyaXB0aW9uID0gZ2V0X2Jsb2dpbmZvKCkuIiBjdXN0b21lciBpZCB7JHVzZXItPmdldElkKCl9ICh7JHVzZXItPmdldEVtYWlsKCl9KSI7CgkJCSRzdHJpcGVDdXN0b21lci0+ZW1haWwgPSAkdXNlci0+Z2V0RW1haWwoKTsKCQkJCgkJCWlmICgkY2FyZEluZm8gaW5zdGFuY2VvZiBNTV9QYXltZW50VG9rZW4pCgkJCXsKCQkJCSRzdHJpcGVDdXN0b21lci0+Y2FyZCA9ICRjYXJkSW5mby0+Z2V0VG9rZW4oKTsKCQkJfQoJCQllbHNlIAoJCQl7CiAgCQkJCSRzdHJpcGVDdXN0b21lci0+Y2FyZCA9IGFycmF5KAoJCSAgCQkJICAibnVtYmVyIiAgICAJCSAgID0+ICRjYXJkSW5mby0+Z2V0Q2FyZE51bWJlcigpLAoJCSAgICAJCSAgImV4cF9tb250aCIgCQkgICA9PiAkY2FyZEluZm8tPmdldEV4cGlyYXRpb25Nb250aCgpLAoJCSAgICAJCSAgImV4cF95ZWFyIiAgCQkgICA9PiAkY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCksCgkJICAgIAkJICAiY3ZjIiAgICAgICAJCSAgID0+ICRjYXJkSW5mby0+Z2V0Q1ZWKCksCgkJICAgIAkJICAiYWRkcmVzc19saW5lMSIgICAgPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKSwKCQkgICAgCQkgICJhZGRyZXNzX2xpbmUyIiAgICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMigpLAoJCSAgICAJCSAgImFkZHJlc3NfemlwIgkgICAgID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0UG9zdGFsQ29kZSgpLAoJCSAgICAJCSAgImFkZHJlc3Nfc3RhdGUiICAgID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKSwKCQkgICAgCQkgICJhZGRyZXNzX2NpdHkiICAgICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldENpdHkoKSwKCQkgICAgCQkgICJhZGRyZXNzX2NvdW50cnkiICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKSwKCQkJICAgICAgICApOwoJCSAgICAgfQoJCSAgICAgIAoJCQkkc3RyaXBlQ3VzdG9tZXItPnNhdmUoKTsKCQkJcGFyZW50Ojp1cGRhdGVTdWJzY3JpcHRpb25JbmZvKCRvcmRlckl0ZW0sJGNhcmRJbmZvLCRiaWxsaW5nQWRkcmVzcyk7CgkJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpCgkJCXsKCQkJCXJldHVybiAkdGhpcy0+cmVzdW1lU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0pOwoJCQl9CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRlLT5nZXRNZXNzYWdlKCksIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQkJCgl9CgkKCQoJLyoqCgkgKiBSZWZ1bmRzIGEgdHJhbnNhY3Rpb24KCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIHRvIHJlZnVuZAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcywgZmFpbHVyZSwgb3IgZXJyb3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkKQoJewoJCXJldHVybiAkdGhpcy0+X3JlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkLHRydWUpOwoJfQoJCgkKCS8qKgoJICogSW50ZXJuYWwgcmVmdW5kIG1ldGhvZCB0aGF0IGFsbG93cyBhIHJlZnVuZCB0byBiZSBwcm9jZXNzZWQgdGhlIHNhbWUgd2F5LCBldmVuIGlmIGl0IGlzIGluaXRpYXRlZCBvbiBTdHJpcGUgYW5kIHNlbnQgdG8gdXMgdmlhIHdlYmhvb2sKCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIGlkIG9mIHRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiBiZWluZyByZWZ1bmRlZAoJICogQHBhcmFtIGJvb2xlYW4gJHNob3VsZEF0dGVtcHRHYXRld2F5UmVmdW5kIChvcHRpb25hbCkgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIG1ldGhvZCBzaG91bGQgYXR0ZW1wdCB0byBpc3N1ZSBhIHJlZnVuZCB0aHJvdWdoIHRoZSBTdHJpcGUgYXBpLiBJZiBTdHJpcGUgbm90aWZpZXMgdXMgdmlhIHdlYmhvb2ssIHRoZSBjaGFyZ2UgaXMgYWxyZWFkeSByZWZ1bmRlZCwgc28gdGhpcyBzaG91bGQgYmUgZmFsc2UKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBfcmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQsJHNob3VsZEF0dGVtcHRHYXRld2F5UmVmdW5kPXRydWUpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL21ha2Ugc3VyZSB3ZSBoYXZlIGEgdmFsaWQgdHJhbnNhY3Rpb24gaWQKCQlpZiAoZW1wdHkoJHRyYW5zYWN0aW9uSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQsIGludmFsaWQgdHJhbnNhY3Rpb24gaWQgc3VwcGxpZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vbWFrZSBzdXJlIHRoZSB0cmFuc2FjdGlvbiBleGlzdHMKCQkkdHJhbnNhY3Rpb25Sb3cgPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIHdoZXJlIGlkID0gJXMiLCR0cmFuc2FjdGlvbklkKSk7CgkJaWYgKGlzX251bGwoJHRyYW5zYWN0aW9uUm93KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kLCB0cmFuc2FjdGlvbiBkb2VzIG5vdCBleGlzdCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9tYWtlIHN1cmUgaXRzIG5vdCBhbHJlYWR5IHJlZnVuZGVkCgkJaWYgKCFpc19udWxsKCR0cmFuc2FjdGlvblJvdy0+cmVmdW5kX2lkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgYmVlbiByZWZ1bmRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9kZXRlcm1pbmUgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIGluZm9ybWF0aW9uIGlzIHN0b3JlZCBiYXNlZCBvbiB0aGUgdHlwZQoJCSR0cmFuc2FjdGlvbkFtb3VudCA9IGFicygkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCk7CgkJJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCA9IGZhbHNlOwoJCXN3aXRjaCAoJHRyYW5zYWN0aW9uUm93LT50cmFuc2FjdGlvbl90eXBlKQoJCXsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVDoKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQ6CgkJCQkkc3RyaXBlQ2hhcmdlUXVlcnkgPSAiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX1NUUklQRV9DSEFSR0VTLiIgV0hFUkUgaWQgPSAlcyI7CgkJCQkkc3RyaXBlQ2hhcmdlSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCRzdHJpcGVDaGFyZ2VRdWVyeSwkdHJhbnNhY3Rpb25Sb3ctPnBheW1lbnRfc2VydmljZV9kZXRhaWxfaWQpKTsKCQkJCSRzdHJpcGVDaGFyZ2VJZCA9ICRzdHJpcGVDaGFyZ2VJbmZvLT5jaGFyZ2VfaWQ7CgkJCQkkZ2F0ZXdheVJlZnVuZFJlcXVpcmVkID0gdHJ1ZTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9DSEFSR0U6CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19DSEFSR0U6CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byByZWZ1bmQgdHJhbnNhY3Rpb246IE5vdCBhIHBheW1lbnQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5rbm93biB0cmFuc2FjdGlvbiB0eXBlLCB1bmFibGUgdG8gcHJvY2VzcyByZWZ1bmQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICgkZ2F0ZXdheVJlZnVuZFJlcXVpcmVkICYmICRzaG91bGRBdHRlbXB0R2F0ZXdheVJlZnVuZCkKCQl7CgkJCWlmIChlbXB0eSgkc3RyaXBlQ2hhcmdlSWQpKSAvL25lY2Vzc2FyeSBmb3IgYm90aCB2b2lkcyBhbmQgY3JlZGl0cwoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkEgY29uZmlndXJhdGlvbiBlcnJvciB3YXMgZW5jb3VudGVyZWQgZHVyaW5nIHRoZSBhdHRlbXB0IHRvIHZvaWQgdGhlIHRyYW5zYWN0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCXJldHVybiAkdGhpcy0+cmVmdW5kU3RyaXBlQ2hhcmdlSWQoJHN0cmlwZUNoYXJnZUlkLCR0cmFuc2FjdGlvbklkKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7IC8vc3VjY2VzcwoJfQkKCQoJCgkvKioKCSAqIFJlZnVuZHMgYSBTdHJpcGUgY2hhcmdlLCBhbmQgbG9ncyB0aGUgcmVmdW5kIGluIHRoZSB0cmFuc2FjdGlvbiB0YWJsZQoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRzdHJpcGVDaGFyZ2VJZCBUaGUgU3RyaXBlIGlkZW50aWZpZXIgZm9yIHRoZSBjaGFyZ2UgdG8gYmUgcmVmdW5kZWQKCSAqIEBwYXJhbSBpbnQgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCBUaGUgaWRlbnRpZmllciBmb3IgdGhlIG1lbWJlcm1vdXNlIHRyYW5zYWN0aW9uCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVmdW5kU3RyaXBlQ2hhcmdlSWQoJHN0cmlwZUNoYXJnZUlkLCAkb3JpZ2luYWxUcmFuc2FjdGlvbklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkYWxyZWFkeVJlZnVuZGVkID0gZmFsc2U7CgkJdHJ5IAoJCXsKCQkJLy9kbyB0aGUgc3RyaXBlIHJlZnVuZAoJCQkkY2ggPSBcU3RyaXBlXENoYXJnZTo6cmV0cmlldmUoJHN0cmlwZUNoYXJnZUlkKTsKCQkJJGNoLT5yZWZ1bmQoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCWlmIChzdHJwb3MoJGUtPmdldE1lc3NhZ2UoKSwiaGFzIGFscmVhZHkgYmVlbiByZWZ1bmRlZCIpICE9PSBmYWxzZSkKCQkJewoJCQkJJGFscmVhZHlSZWZ1bmRlZCA9IHRydWU7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciByZWZ1bmRpbmcgdHJhbnNhY3Rpb246IHskZS0+Z2V0TWVzc2FnZSgpfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkJCgkJLy9nZXQgb3JpZ2luYWwgdHJhbnNhY3Rpb24gZGV0YWlscwoJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgV0hFUkUgaWQ9JXMiLCRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpKTsKCQlpZiAoISRhbHJlYWR5UmVmdW5kZWQgfHwgKCRhbHJlYWR5UmVmdW5kZWQgJiYgaXNfbnVsbCgkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPnJlZnVuZF9pZCkpKQoJCXsKCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUmVmdW5kIGZvciB0cmFuc2FjdGlvbiMgeyRvcmlnaW5hbFRyYW5zYWN0aW9uSWR9IjsKCQkJJHRyYW5zYWN0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkKCQkJaWYgKCR0aGlzLT50ZXN0TW9kZSkKCQkJewoJCQkJJHJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaWQsCgkJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaXRlbV9pZCwKCQkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5hbW91bnQsCgkJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+Y3VycmVuY3ksCgkJCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCQlmYWxzZSwKCQkJCQkJJHRoaXMtPmdldElkKCksCgkJCQkJCW51bGwsCgkJCQkJCSR0cmFuc2FjdGlvbkRhdGUsCgkJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRyZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaWQsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pdGVtX2lkLAoJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+YW1vdW50LAoJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+Y3VycmVuY3ksCgkJCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24sCgkJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCwKCQkJCQlmYWxzZSwKCQkJCQkkdGhpcy0+Z2V0SWQoKSwKCQkJCQludWxsLAoJCQkJCSR0cmFuc2FjdGlvbkRhdGUsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCk7CgkJCX0KCQkJaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3BvbnNlKSkKCQkJewoJCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJVUERBVEUgIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBTRVQgcmVmdW5kX2lkID0gJXMgV0hFUkUgaWQgPSAlcyIsJHJlc3BvbnNlLT5tZXNzYWdlLCRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpKTsKCQkJfQoJCX0KCQkKCQlpZiAoJGFscmVhZHlSZWZ1bmRlZCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhpcyB0cmFuc2FjdGlvbiB3YXMgYWxyZWFkeSByZWZ1bmRlZCBieSBTdHJpcGUuIFRoZSBkYXRhYmFzZSBoYXMgYmVlbiB1cGRhdGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsJCQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUZXN0QVBJS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRlc3RBUElLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFRlc3RBUElLZXkoJHRlc3RBUElLZXkpCgl7CgkJJHRoaXMtPnRlc3RBUElLZXkgPSAkdGVzdEFQSUtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGl2ZUFQSUtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5saXZlQVBJS2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaXZlQVBJS2V5KCRsaXZlQVBJS2V5KQoJewoJCSR0aGlzLT5saXZlQVBJS2V5ID0gJGxpdmVBUElLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFN0cmlwZUpTRW5hYmxlZCgkc3RyaXBlSlNFbmFibGVkKQoJewoJCSR0aGlzLT5zdHJpcGVKU0VuYWJsZWQgPSAoYm9vbCkkc3RyaXBlSlNFbmFibGVkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpc1N0cmlwZUpTRW5hYmxlZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5zdHJpcGVKU0VuYWJsZWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUZXN0UHVibGlzaGFibGVLZXkoKQoJewoJCXJldHVybiAkdGhpcy0+dGVzdFB1Ymxpc2hhYmxlS2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRUZXN0UHVibGlzaGFibGVLZXkoJHRlc3RQdWJsaXNoYWJsZUtleSkKCXsKCQkkdGhpcy0+dGVzdFB1Ymxpc2hhYmxlS2V5ID0gJHRlc3RQdWJsaXNoYWJsZUtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGl2ZVB1Ymxpc2hhYmxlS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxpdmVQdWJsaXNoYWJsZUtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TGl2ZVB1Ymxpc2hhYmxlS2V5KCRsaXZlUHVibGlzaGFibGVLZXkpCgl7CgkJJHRoaXMtPmxpdmVQdWJsaXNoYWJsZUtleSA9ICRsaXZlUHVibGlzaGFibGVLZXk7Cgl9CgkKCQoJLyoqCgkgKiBjaGVja291dEluaXQgaXMgY2FsbGVkIGZyb20gdGhlIGNoZWNrb3V0IGZvcm0gcHJpb3IgdG8gdGhlIHBhZ2UgYmVpbmcgcmVuZGVyZWQuCgkgKiBJZiBTdHJpcGUuanMgaXMgYmVpbmcgdXNlZCwgdGhlIGphdmFzY3JpcHQgbGlicmFyeSBpcyBlbnF1ZXVlZCwgYW5kIGN1c3RvbSAKCSAqIAoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6Y2hlY2tvdXRJbml0KCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNoZWNrb3V0SW5pdCgpCgl7CgkJcmV0dXJuICR0aGlzLT5zdHJpcGVKU0luaXQoYXJyYXkoInN0cmlwZUpTIiwibWVtYmVybW91c2UtY2hlY2tvdXQtZm9ybSIpKTsKCX0JCgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHN0cmlwZUpTSW5pdCgkYnJpZGdlRGVwZW5kZW5jaWVzPWFycmF5KCkpCgl7CgkJLy9UaGUgZnJvbnQtZW5kIHRhc2tzIGFyZSBvbmx5IHJlbGV2ZW50IGlmIFN0cmlwZS5qcyBpcyBlbmFibGVkCgkJaWYgKCR0aGlzLT5zdHJpcGVKU0VuYWJsZWQpCgkJewoJCQl3cF9lbnF1ZXVlX3NjcmlwdCgic3RyaXBlSlMiLCAiaHR0cHM6Ly9qcy5zdHJpcGUuY29tL3YyLyIsIGFycmF5KCksIE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCksIHRydWUpOwoJCQl3cF9lbnF1ZXVlX3NjcmlwdCgibWVtYmVybW91c2Utc3RyaXBlSlMiLCBwbHVnaW5zX3VybChNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9qcy9jb21tb24vbW0tc3RyaXBlLXRva2VuLWV4Y2hhbmdlLmpzIiksICRicmlkZ2VEZXBlbmRlbmNpZXMsIE1lbWJlck1vdXNlOjpnZXRQbHVnaW5WZXJzaW9uKCksIHRydWUpOwoJCQl3cF9sb2NhbGl6ZV9zY3JpcHQoJ21lbWJlcm1vdXNlLXN0cmlwZUpTJywgJ3N0cmlwZUpTSW5mbycsIGFycmF5KCdzdHJpcGVQdWJsaXNoYWJsZUtleScgPT4gJHRoaXMtPmluVGVzdE1vZGUoKT8kdGhpcy0+Z2V0VGVzdFB1Ymxpc2hhYmxlS2V5KCk6JHRoaXMtPmdldExpdmVQdWJsaXNoYWJsZUtleSgpLAoJCQkJCSdpbXByb3BlclN0cmlwZVJlc3BvbnNlRXJyb3JNc2cnID0+IF9tbXQoIkFuIGltcHJvcGVyIHJlc3BvbnNlIHdhcyByZWNlaXZlZCBmcm9tIFN0cmlwZSwgcGxlYXNlIHRyeSBhZ2FpbiIpKSk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRUZXN0TW9kZSgkdGVzdE1vZGUpCgl7CgkJJHRlc3RNb2RlID0gKGJvb2wpJHRlc3RNb2RlOwoJCWlmICgkdGhpcy0+dGVzdE1vZGUgIT0gJHRlc3RNb2RlKQoJCXsKCQkJJHRoaXMtPnNldHVwU3RyaXBlKCk7IC8vYXR0ZW1wdCB0byBjYXRjaCBwcm9ncmFtbWF0aWMgbW9kZSBjaGFuZ2VzIGFuZCByZWluaXRpYWxpemUgU3RyaXBlCgkJfQoJCSR0aGlzLT50ZXN0TW9kZSA9ICR0ZXN0TW9kZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VGVzdE1vZGUoKQoJewoJCXJldHVybiAkdGhpcy0+dGVzdE1vZGU7Cgl9CgkKCQoJLyoqCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjppblRlc3RNb2RlKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGluVGVzdE1vZGUoKQoJewoJCXJldHVybiAkdGhpcy0+Z2V0VGVzdE1vZGUoKTsKCX0KCQoJCgkvKioKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN3aXRjaFRvVGVzdE1vZGUoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gc3dpdGNoVG9UZXN0TW9kZSgpCgl7CgkJJHRoaXMtPnNldFRlc3RNb2RlKHRydWUpOwoJCXJldHVybiB0cnVlOwoJfQoJCgkKCS8qKgoJICogTG9hZCBTdHJpcGUuanMgb24gbXkgYWNjb3VudCBwYWdlIHRvIHN1cHBvcnQgdGhlIGNhcmQgdXBkYXRlIG9wZXJhdGlvbgoJICoKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6Om15QWNjb3VudEluaXQoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gbXlBY2NvdW50SW5pdCgpCgl7CgkJLy9jdXJyZW50bHkgdGhlIG15IGFjY291bnQgaW5pdCBwcm9jZXNzIGZvciBhY2NlcHQuanMgaXMgZXhhY3RseSB0aGUgc2FtZSBhcyB0aGUgY2hlY2tvdXQgaW5pdCBwcm9jZXNzCgkJcmV0dXJuICR0aGlzLT5zdHJpcGVKU0luaXQoYXJyYXkoInN0cmlwZUpTIiwibWVtYmVybW91c2UtbXlhY2NvdW50LWpzIikpOwoJfQp9', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(203, 'salesbyproductreport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fU2FsZXNCeVByb2R1Y3RSZXBvcnQgZXh0ZW5kcyBNTV9BZHZhbmNlZFJlcG9ydEJhc2UgCnsKCQoJcHJvdGVjdGVkICR2aXN1YWxFbGVtZW50cyA9IGFycmF5KCJNTV9SZXBvcnREYXRhR3JpZCIsIk1NX1JlcG9ydENvbHVtbkNoYXJ0Iik7CgkKCXB1YmxpYyBzdGF0aWMgJFNBTEVTQllQUk9EVUNUX1JFUE9SVF9EQVRBR1JJRCA9ICJzYWxlc19ieV9wcm9kdWN0X2RhdGFncmlkIjsKCXB1YmxpYyBzdGF0aWMgJFNBTEVTQllQUk9EVUNUX1JFUE9SVF9DT0xVTU5fQ0hBUlQgPSAic2FsZXNfYnlfcHJvZHVjdF9jb2x1bW5fY2hhcnQiOwoJCgkvL3F1ZXJ5IGlkZW50aWZpZXJzCglwdWJsaWMgc3RhdGljICRTQUxFU19CWV9QUk9EVUNUX1FVRVJZID0gInNhbGVzX2J5X3Byb2R1Y3RfcXVlcnkiOwoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJWaXN1YWxFbGVtZW50KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcyA9ICcnLCAkd2lkdGggPSAnJywgJGhlaWdodCA9ICcnLCAkZGlyZWN0aXZlcz1hcnJheSgpKSAKCXsKCQlzd2l0Y2ggKCRlbGVtZW50SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JFNBTEVTQllQUk9EVUNUX1JFUE9SVF9EQVRBR1JJRDoKCQkJCXJldHVybiAkdGhpcy0+cmVuZGVyU2FsZXNCeVByb2R1Y3RSZXBvcnREYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMsICR3aWR0aCwgJGhlaWdodCwgJGRpcmVjdGl2ZXMpOwoJCQkJYnJlYWs7CgkJCWNhc2Ugc2VsZjo6JFNBTEVTQllQUk9EVUNUX1JFUE9SVF9DT0xVTU5fQ0hBUlQ6CgkJCQlyZXR1cm4gJHRoaXMtPnJlbmRlclNhbGVzQnlQcm9kdWN0UmVwb3J0Q29sdW1uQ2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zLCAkd2lkdGgsICRoZWlnaHQsICRkaXJlY3RpdmVzKTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiVW5hYmxlIHRvIHJlbmRlciB2aXN1YWwgZWxlbWVudDogaWRlbnRpZmllciAiLigoIWlzX2FycmF5KCRlbGVtZW50SWRlbnRpZmllcikgJiYgIWlzX29iamVjdCgkZWxlbWVudElkZW50aWZpZXIpKT8ieyRlbGVtZW50SWRlbnRpZmllcn0gIjoiIikuInVua25vd24iLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyU2FsZXNCeVByb2R1Y3RSZXBvcnREYXRhZ3JpZCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JFNBTEVTX0JZX1BST0RVQ1RfUVVFUlksICRwYXJhbXMpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkKCQkkZ3JpZEhlYWRlcnMgPSBhcnJheSgicHJvZHVjdCI9PmFycmF5KCdsYWJlbCc9PiJQcm9kdWN0IiksInVuaXRzIj0+YXJyYXkoJ2xhYmVsJz0+IlVuaXRzIiksInNhbGVzIj0+YXJyYXkoJ2xhYmVsJz0+IlNhbGVzIiwnY29sdW1uVHlwZSc9Pidtb25leScpKTsKCQkkZ3JpZCA9IE1NX1JlcG9ydERhdGFncmlkOjpjcmVhdGVGcm9tRGF0YShzZWxmOjokU0FMRVNCWVBST0RVQ1RfUkVQT1JUX0RBVEFHUklELCAkZ3JpZEhlYWRlcnMsICRkYXRhUmVzcG9uc2UsJGRpcmVjdGl2ZXMpOwoJCS8vJGdyaWQtPnNldEdyaWRUaXRsZSgiU2FsZXMgQnkgUHJvZHVjdCIpOwoJCSRncmlkLT5zZXRTaG93SGVhZGVyUm93KGZhbHNlKTsKCQkKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRncmlkLT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlclNhbGVzQnlQcm9kdWN0UmVwb3J0Q29sdW1uQ2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksIHNlbGY6OiRTQUxFU19CWV9QUk9EVUNUX1FVRVJZLCAkcGFyYW1zKTsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJCgkJJGNvbHVtbiA9IE1NX1JlcG9ydENvbHVtbkNoYXJ0OjpjcmVhdGVGcm9tVG9wUmVzdWx0cygkZWxlbWVudElkZW50aWZpZXIsICJwcm9kdWN0IiwgInNhbGVzIiwgMTAsICRkYXRhUmVzcG9uc2UpOwoJCSRjb2x1bW4tPnNldEN1cnJlbmN5VmFsdWVzKHRydWUpOwoJCSRjb2x1bW4tPnNldFZhbHVlQXhpc1RpdGxlKCJTYWxlcyBpbiAiLk1NX0N1cnJlbmN5VXRpbDo6Z2V0QWN0aXZlQ3VycmVuY3koKSk7CgkJJGNvbHVtbi0+c2V0Q2F0ZWdvcnlBeGlzVGl0bGUoIlByb2R1Y3RzIik7CgkJLy9UT0RPOiBoYW5kbGUgbm8gZGF0YSBzY2VuYXJpbyAoaGVyZSwgb3IgbG93ZXI/KQoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGNvbHVtbi0+cmVuZGVyKCkpOwoJfQoJCgkKCS8qKgoJICogR2VuZXJhdGUgdGhlIGRhdGEgZm9yIHRoZSBTYWxlcyBCeSBQcm9kdWN0IHJlcG9ydC4gCgkgKiBDb25zdHJhaW50OiBUaGUgc3VwcGxpZWQgcGFyYW1zIG11c3QgY29udGFpbiBhIHN0YXJ0IGFuZCBlbmQgZGF0ZQoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHBhcmFtcwoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSByZXN1bHRzCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVTYWxlc0J5UHJvZHVjdFJlcG9ydERhdGEoJHBhcmFtcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFpc19hcnJheSgkcGFyYW1zKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBnZW5lcmF0ZSBTYWxlcyBCeSBQcm9kdWN0IHJlcG9ydCBkYXRhOiBJbXByb3BlciBwYXJhbWV0ZXJzIGZvcm1hdCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICghaXNzZXQoJHBhcmFtc1snc3RhcnRfZGF0ZSddKSB8fCAhaXNzZXQoJHBhcmFtc1snZW5kX2RhdGUnXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZ2VuZXJhdGUgU2FsZXMgQnkgUHJvZHVjdCByZXBvcnQgZGF0YTogU3RhcnQgYW5kIEVuZCBkYXRlIG11c3QgYmUgc3VwcGxpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL29wdGlvbmFsIHBhcmFtCgkJJGluY2x1ZGVfcmViaWxscyA9IChpc3NldCgkcGFyYW1zWydpbmNsdWRlX3JlYmlsbHMnXSkgJiYgKCRwYXJhbXNbJ2luY2x1ZGVfcmViaWxscyddID09ICJvbiIpKTsKCQkKCQkKCQkkdHJhbnNhY3Rpb25zVGFibGUgPSBNTV9UQUJMRV9UUkFOU0FDVElPTl9MT0c7CgkJJHByb2R1Y3RzVGFibGUgPSBNTV9UQUJMRV9QUk9EVUNUUzsKCQkkb3JkZXJJdGVtc1RhYmxlID0gTU1fVEFCTEVfT1JERVJfSVRFTVM7CgkJCgkJJHN0YXJ0VGltZSA9IHN0cnRvdGltZSgkcGFyYW1zWydzdGFydF9kYXRlJ10pOwoJCSRlbmRUaW1lID0gc3RydG90aW1lKCRwYXJhbXNbJ2VuZF9kYXRlJ10pOwoJCQoJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCAwMDowMCIsJHN0YXJ0VGltZSk7IC8vbXlzcWwgZm9ybWF0CgkJJGVuZERhdGUgPSAgIGRhdGUoIlktbS1kIDIzOjU5OjU5IiwkZW5kVGltZSk7CgkJCgkJJHRyYW5zYWN0aW9uVHlwZXMgPSBhcnJheShNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCk7CgkJaWYgKCRpbmNsdWRlX3JlYmlsbHMpCgkJewoJCQkkdHJhbnNhY3Rpb25UeXBlc1tdID0gTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UOwoJCX0KCQkkdHJhbnNhY3Rpb25UeXBlU3RyaW5nID0gaW1wbG9kZSgiLCIsJHRyYW5zYWN0aW9uVHlwZXMpOwoJCQoJCS8vZ2V0cyB0aGUgdW5pdHMgYW5kIHRvdGFsIHJldmVudWUgZnJvbSB0cmFuc2FjdGlvbnMgbGlua2VkIHRvIHByb2R1Y3Qgc2FsZXMgKG9wdGlvbmFsbHkgaW5jbHVkaW5nIHJlY3VycmluZyBwYXltZW50cykgZm9yIHRyYW5zYWN0aW9ucyB0aGF0IG9jY3VyIHdpdGhpbiBhIGRhdGUgcmFuZ2UKCQkvL3JlZnVuZCBpdGVtcyBkbyBub3QgY291bnQgYWdhaW5zdCB0aGUgdG90YWwuIElmIHRoZXJlIGlzIGEgZGF0YSBlcnJvciAoZm9yIGluc3RhbmNlIHRyYW5zYWN0aW9ucyBleGlzdCB3aGVyZSB0aGUgbGlua2VkIG9yZGVycy9pdGVtcyB3ZXJlIGRlbGV0ZWQpIHRoZW4gdGhlIHByb2R1Y3QgaXMKCQkvL2xpc3RlZCBhcyAnVW5rbm93biBQcm9kdWN0JwoJCQoJCSRzcWwgPSAiU0VMRUNUIElGTlVMTChwLm5hbWUsJzxVbmtub3duIFByb2R1Y3Q+JykgQVMgcHJvZHVjdCwgU1VNKElGTlVMTChvaS5xdWFudGl0eSwxKSkgQVMgdW5pdHMsIEFCUyhTVU0odC5hbW91bnQpKSBBUyBzYWxlcyBGUk9NIHskdHJhbnNhY3Rpb25zVGFibGV9IHQgTEVGVCBKT0lOIHskb3JkZXJJdGVtc1RhYmxlfSBvaSAiLgoJCQkgICAiT04gKHQub3JkZXJfaXRlbV9pZCA9IG9pLmlkKSBMRUZUIEpPSU4geyRwcm9kdWN0c1RhYmxlfSBwIE9OIChvaS5pdGVtX2lkID0gcC5pZCkgIi4KCQkJICAgIldIRVJFIHQudHJhbnNhY3Rpb25fdHlwZSBJTiAoeyR0cmFuc2FjdGlvblR5cGVTdHJpbmd9KSBBTkQgKHQudHJhbnNhY3Rpb25fZGF0ZSBCRVRXRUVOICVzIEFORCAlcykgIi4KCQkJICAgIkFORCB0LnJlZnVuZF9pZCBJUyBOVUxMIEdST1VQIEJZIHAuaWQgT1JERVIgQlkgc2FsZXMgREVTQzsiOwoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCRzcWwsJHN0YXJ0RGF0ZSwkZW5kRGF0ZSksQVJSQVlfQSk7CgkJCgkJJGRhdGFzZXQgPSBNTV9SZXBvcnREYXRhc2V0OjpjcmVhdGVTaW5nbGVSZXBvcnREYXRhc2V0KCRwYXJhbXMsJHJlc3VsdHMpOwoJCXJldHVybiAkZGF0YXNldDsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YSgkcXVlcnlJZGVudGlmaWVyLCAkcGFyYW1zKQoJewoJCXN3aXRjaCAoJHF1ZXJ5SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JFNBTEVTX0JZX1BST0RVQ1RfUVVFUlk6CgkJCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTYWxlc0J5UHJvZHVjdFJlcG9ydERhdGEoJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgZGF0YSBmb3IgdW5rbm93biBxdWVyeSBpZGVudGlmaWVyIHskcXVlcnlJZGVudGlmaWVyfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCn0KCg==', 0, '2018-11-21 06:38:55'),
(204, 'webcontroller', 'Y2xhc3MgV2ViQ29udHJvbGxlciBpbXBsZW1lbnRzIFJlc3RDb250cm9sbGVyIHsKICAgIAogICAgZnVuY3Rpb24gZXhlY3V0ZShSZXN0U2VydmVyICRyZXN0KSAKICAgIHsKICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNWaWV3KCJob21lLnBocCIpOwogICAgfQp9Cg==', 0, '2018-11-21 06:38:55'),
(205, 'shoppingcart', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBNTV9TaG9wcGluZ0NhcnQgaXMgYW4gYWJzdHJhY3Rpb24gb2YgYSB1c2VyJ3MgY2FydCBkdXJpbmcgY2hlY2tvdXQvcmVnaXN0cmF0aW9uLiBJdCBmYWNpbGl0YXRlcyB0aGUgcGVyc2lzdGVuY2Ugb2YgbWVtYmVyc2hpcCBhbmQvb3IKICogcHJvZHVjdCBzZWxlY3Rpb25zICh1c2luZyB0aGUgc2Vzc2lvbikgYmV0d2VlbiBwYWdlIGxvYWRzCiAqLwpjbGFzcyBNTV9TaG9wcGluZ0NhcnQgewoJCglwcm90ZWN0ZWQgJGJpbGxpbmdBZGRyZXNzOyAvL3N0b3JlZCBoZXJlIHRvIGFsbG93IGVhc3kgdHJhbnNmZXIgdG8gb3JkZXIgb2JqZWN0Cglwcm90ZWN0ZWQgJHNoaXBwaW5nQWRkcmVzczsgLy9zdG9yZWQgaGVyZSB0byBhbGxvdyBlYXN5IHRyYW5zZmVyIHRvIG9yZGVyIG9iamVjdCwgYWxzbyBhbGxvd3Mgc2hpcHBpbmcgZXN0aW1hdGVzIHRvIGJlIGNhbGN1bGF0ZWQgb24gdGhlIGNhcnQgd2l0aG91dCBhbiBvcmRlcgoJCglwcm90ZWN0ZWQgJGNhcnRJdGVtcyA9IGFycmF5KCk7Cglwcm90ZWN0ZWQgJGNhcnRDb3Vwb25zID0gYXJyYXkoKTsJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRCaWxsaW5nQWRkcmVzcyhNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzKQoJewoJCSR0aGlzLT5iaWxsaW5nQWRkcmVzcyA9ICRiaWxsaW5nQWRkcmVzczsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEJpbGxpbmdBZGRyZXNzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmJpbGxpbmdBZGRyZXNzOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U2hpcHBpbmdBZGRyZXNzKE1NX0N1c3RvbWVyQWRkcmVzcyAkc2hpcHBpbmdBZGRyZXNzKQoJewoJCSR0aGlzLT5zaGlwcGluZ0FkZHJlc3MgPSAkc2hpcHBpbmdBZGRyZXNzOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0U2hpcHBpbmdBZGRyZXNzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnNoaXBwaW5nQWRkcmVzczsKCX0KCQoJLyoqCgkgKiBQb3B1bGF0ZSB0aGUgYmlsbGluZyBhZGRyZXNzIHVzaW5nIHRoZSBmaWVsZHMgaW4gYXJyYXkgZGF0YQoJICogQHBhcmFtIGFycmF5ICRkYXRhIEFuIGFycmF5IG9mIGtleS92YWx1ZSBwYWlycyByZXByZXNlbnRpbmcgZGF0YSBmcm9tIHRoZSByZWdpc3RyYXRpb24gcHJvY2VzcwoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0QmlsbGluZ0FkZHJlc3NGcm9tRGF0YSgkZGF0YSkKCXsKCQkkYWRkcmVzcyA9IG5ldyBNTV9DdXN0b21lckFkZHJlc3MoKTsKCQkkYWRkcmVzcy0+c2V0RnJvbUJpbGxpbmdBZGRyZXNzRGF0YSgkZGF0YSk7CgkJJHRoaXMtPnNldEJpbGxpbmdBZGRyZXNzKCRhZGRyZXNzKTsKCX0KCQoJLyoqCgkgKiBQb3B1bGF0ZSB0aGUgc2hpcHBpbmcgYWRkcmVzcyB1c2luZyB0aGUgZmllbGRzIGluIGFycmF5IGRhdGEgCgkgKiBAcGFyYW0gYXJyYXkgJGRhdGEgQW4gYXJyYXkgb2Yga2V5L3ZhbHVlIHBhaXJzIHJlcHJlc2VudGluZyBkYXRhIGZyb20gdGhlIHJlZ2lzdHJhdGlvbiBwcm9jZXNzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRTaGlwcGluZ0FkZHJlc3NGcm9tRGF0YSgkZGF0YSkKCXsKCQkkYWRkcmVzcyA9IG5ldyBNTV9DdXN0b21lckFkZHJlc3MoKTsKCQkkYWRkcmVzcy0+c2V0RnJvbVNoaXBwaW5nQWRkcmVzc0RhdGEoJGRhdGEpOwoJCSR0aGlzLT5zZXRTaGlwcGluZ0FkZHJlc3MoJGFkZHJlc3MpOwoJfQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIHRha2VzIGFuIGFycmF5IG9mIGNhcnQgaXRlbXMgYW5kIGFkZHMgdGhlbSB0byB0aGUgY2FydC4gRm9yIGEgc2luZ2xlIGl0ZW0sIGl0IGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5IG9mIHNpemUgb25lCgkgKiBAcGFyYW0gQXJyYXkgJGNhcnRfaXRlbXMgQW4gYXJyYXkgb2Ygb2JqZWN0cyBvZiB0eXBlIE1NX1Nob3BwaW5nQ2FydEl0ZW1zLCB0aGF0IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGNhcnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGFkZEl0ZW1zVG9DYXJ0KCRjYXJ0X2l0ZW1zKQoJewoJCWlmIChpc19hcnJheSgkY2FydF9pdGVtcykpIAoJCXsKCQkJZm9yZWFjaCAoJGNhcnRfaXRlbXMgYXMgJGFuSXRlbSkKCQkJewoJCQkJaWYgKCRhbkl0ZW0gaW5zdGFuY2VvZiBNTV9TaG9wcGluZ0NhcnRJdGVtKQoJCQkJewoJCQkJCWlmICgkYW5JdGVtLT5nZXRJdGVtVHlwZSgpID09IE1NX1Nob3BwaW5nQ2FydEl0ZW06OiRDQVJUX1BST0RVQ1QpCgkJCQkJewoJCQkJCQlpZiAoaXNzZXQoJHRoaXMtPmNhcnRJdGVtc1skYW5JdGVtLT5nZXRJdGVtKCktPmdldElkKCldKSkKCQkJCQkJewoJCQkJCQkJLy9hbiBpdGVtIG9mIHRoaXMgdHlwZSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgY2FydCwgc28gaW5jcmVhc2UgdGhlIHF1YW50aXR5CgkJCQkJCQkkZXhpc3RpbmdfaXRlbSA9ICR0aGlzLT5jYXJ0SXRlbXNbJGFuSXRlbS0+Z2V0SXRlbSgpLT5nZXRJZCgpXTsKCQkJCQkJCSRleGlzdGluZ19pdGVtLT5zZXRRdWFudGl0eShpbnR2YWwoJGV4aXN0aW5nX2l0ZW0tPmdldFF1YW50aXR5KCkpICsgaW50dmFsKCRhbkl0ZW0tPmdldFF1YW50aXR5KCkpKTsKCQkJCQkJfQoJCQkJCQllbHNlIAoJCQkJCQl7CgkJCQkJCQkkdGhpcy0+Y2FydEl0ZW1zWyRhbkl0ZW0tPmdldEl0ZW0oKS0+Z2V0SWQoKV0gPSAkYW5JdGVtOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UgaWYgKCRhbkl0ZW0tPmdldEl0ZW1UeXBlKCkgPT0gTU1fU2hvcHBpbmdDYXJ0SXRlbTo6JENBUlRfQ09VUE9OKQoJCQkJCXsJCgkJCQkJCS8vZm9yIG5vdywgY291cG9ucyBvZiB0aGUgc2FtZSB0eXBlIGFyZSBub3Qgc3RhY2thYmxlCgkJCQkJCSR0aGlzLT5jYXJ0Q291cG9uc1skYW5JdGVtLT5nZXRJdGVtKCktPmdldElkKCldID0gJGFuSXRlbTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9CgoJLyoqCgkgKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBwcm9kdWN0cyBpbiB0aGUgY2FydAoJICogQHJldHVybiBBbiBhcnJheSBvZiBvYmplY3RzIG9mIHR5cGUgTU1fU2hvcHBpbmdDYXJ0SXRlbSByZXByZXNlbnRpbmcgdGhlIHByb2R1Y3RzIGluIHRoZSBjYXJ0CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0c0luQ2FydCgpCgl7CgkJcmV0dXJuICR0aGlzLT5jYXJ0SXRlbXM7Cgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgY291cG9ucyBpbiB0aGUgY2FydAoJICogQHJldHVybiBBbiBhcnJheSBvZiBvYmplY3RzIG9mIHR5cGUgTU1fU2hvcHBpbmdDYXJ0SXRlbSByZXByZXNlbnRpbmcgdGhlIGNvdXBvbnMgaW4gdGhlIGNhcnQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldENvdXBvbnNJbkNhcnQoKQoJewoJCXJldHVybiAkdGhpcy0+Y2FydENvdXBvbnM7Cgl9CgoJLyoqCgkgKiBUaGlzIG1ldGhvZCByZW1vdmVzIGl0ZW1zIGZyb20gdGhlIGNhcnQKCSAqIEBwYXJhbSBBcnJheSAkaXRlbUFycmF5IEFuIGFycmF5IG9mIG9iamVjdHMgb2YgdHlwZSBNTV9TaG9wcGluZ0NhcnRJdGVtLCByZXByZXNlbnRpbmcgdGhlIGl0ZW1zIG9yIGNvdXBvbnMgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSBjYXJ0CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZW1vdmVJdGVtc0Zyb21DYXJ0KCRpdGVtQXJyYXkpCgl7CgkJaWYgKGlzX2FycmF5KCRpdGVtQXJyYXkpKQoJCXsKCQkJZm9yZWFjaCAoJGl0ZW1BcnJheSBhcyAkYW5JdGVtKQoJCQl7CgkJCQlpZiAoJGFuSXRlbSBpbnN0YW5jZW9mIE1NX1Nob3BwaW5nQ2FydEl0ZW0pCgkJCQl7CgkJCQkJJGl0ZW1Ub1JlbW92ZSA9ICRhbkl0ZW0tPmdldEl0ZW0oKTsKCQkJCQlpZiAoKCRhbkl0ZW0tPmdldEl0ZW1UeXBlKCkgPT0gTU1fU2hvcHBpbmdDYXJ0SXRlbTo6JENBUlRfUFJPRFVDVCkgJiYgaXNzZXQoJHRoaXMtPmNhcnRJdGVtc1skaXRlbVRvUmVtb3ZlLT5nZXRJZCgpXSkpCgkJCQkJewoJCQkJCQkvL2lmIHRoZSBpdGVtIHJlcHJlc2VudHMgYSBwcm9kdWN0IGluIHRoZSBjYXJ0LCByZW1vdmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBpdGVtcyAKCQkJCQkJLy9pZiBxdWFudGl0eSBmYWxscyB0byAwIG9yIGxlc3MsIHJlbW92ZSBpdCBmcm9tIHRoZSBjYXJ0CgkJCQkJCSRpdGVtSW5DYXJ0ID0gJHRoaXMtPmNhcnRJdGVtc1skaXRlbVRvUmVtb3ZlLT5nZXRJZCgpXTsKCQkJCQkJJG5ld1F1YW50aXR5ID0gKGludHZhbCgkaXRlbUluQ2FydC0+Z2V0UXVhbnRpdHkpIC0gaW50dmFsKCRpdGVtVG9SZW1vdmUtPmdldFF1YW50aXR5KCkpKTsKCQkJCQkJaWYgKCRuZXdRdWFudGl0eSA+IDApCgkJCQkJCXsKCQkJCQkJCSRpdGVtSW5DYXJ0LT5zZXRRdWFudGl0eSgkbmV3UXVhbnRpdHkpOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJdW5zZXQoJHRoaXMtPmNhcnRJdGVtc1skaXRlbUluQ2FydC0+Z2V0SWQoKV0pOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UgaWYgKCgkYW5JdGVtLT5nZXRJdGVtVHlwZSgpID09IE1NX1Nob3BwaW5nQ2FydEl0ZW06OiRDQVJUX0NPVVBPTikgJiYgaXNzZXQoJHRoaXMtPmNhcnRDb3Vwb25zWyRpdGVtVG9SZW1vdmUtPmdldElkKCldKSkKCQkJCQl7CgkJCQkJCS8vaWYgdGhlIGl0ZW0gcmVwcmVzZW50cyBhIGNvdXBvbiBpbiB0aGUgY2FydCByZW1vdmUgaXQgKGNvdXBvbnMgbm90IGN1cnJlbnRseSBzdGFja2FibGUsIHNvIHF1YXRpdHkgc2hvdWxkIG5ldmVyIGJlID4xKQoJCQkJCQl1bnNldCgkdGhpcy0+Y2FydENvdXBvbnNbJGl0ZW1Ub1JlbW92ZS0+Z2V0SWQoKV0pOwoJCQkJCX0KCQkJCX0JCgkJCX0KCQl9Cgl9CgoJLyoqCgkgKiBUaGlzIGNvbnZlbmllbmNlIG1ldGhvZCByZXNldHMgdGhlIGNhcnQgKHJlbW92ZXMgYWxsIGl0ZW1zKQoJICovCglwdWJsaWMgZnVuY3Rpb24gY2xlYXJDYXJ0KCkKCXsKCQkkdGhpcy0+Y2FydFByb2R1Y3RzID0gYXJyYXkoKTsKCX0KCn0K', 0, '2018-11-21 06:38:55'),
(206, 'reportdataretriever', 'Y2xhc3MgTU1fUmVwb3J0RGF0YVJldHJpZXZlcgp7CgkKCS8vZGF0YSBnZW5lcmF0aW9uIHN0YXR1c2VzCglwdWJsaWMgc3RhdGljICREQVRBX1BFTkRJTkdfU1RBVFVTID0gInBlbmRpbmciOwoJcHVibGljIHN0YXRpYyAkREFUQV9QUk9DRVNTSU5HX1NUQVRVUyA9ICJwcm9jZXNzaW5nIjsKCXB1YmxpYyBzdGF0aWMgJERBVEFfUkVBRFlfU1RBVFVTID0gInJlYWR5IjsKCXB1YmxpYyBzdGF0aWMgJERBVEFfRVJST1JfU1RBVFVTID0gImVycm9yIjsKCQoJLy9kZWZhdWx0IHRpbWVvdXQKCXB1YmxpYyBzdGF0aWMgJERFRkFVTFRfQ0FDSEVfVElNRU9VVCA9IDEyMDA7CgkKCXB1YmxpYyBzdGF0aWMgJFJFU1VMVFNFVF9UWVBFX0NPTVBPVU5EID0gImNvbXBvdW5kIjsKCgkKCS8qKgoJICogUmVxdWVzdHMgZGF0YSB0byBiZSB1c2VkIHRvIHN1cHBseSBhIHZpc3VhbCBlbGVtZW50LiBJZiB0aGUgcmVxdWVzdGVkIGRhdGEgaXMgY2FjaGVkLCBpdCBpcyByZXRyaWV2ZWQgZnJvbSB0aGUgY2FjaGUgCgkgKiBhbmQgcmV0dXJuZWQsIG90aGVyd2lzZSBnZW5lcmF0aW9uIGlzIHN0YXJ0ZWQgaW4gdGhlIGJhY2tncm91bmQKCSAqIAoJICogQHBhcmFtIG1peGVkICRxdWVyeVRhcmdldCBUaGUgY2xhc3MgdGhhdCBoYXMgdGhlIGFiaWxpdHkgdG8gZ2VuZXJhdGUgdGhlIHJlcXVpcmVkIGRhdGEgaWYgaXRzIG5vdCBpbiB0aGUgY2FjaGUKCSAqIEBwYXJhbSBzdHJpbmcgJHF1ZXJ5SWRlbnRpZmllciBBbiBpZGVudGlmaWVyIHJlcHJlc2VudGluZyBhIHNwZWNpZmljIHF1ZXJ5IHRvIGJlIHJ1bgoJICogQHBhcmFtIGFycmF5ICRwYXJhbXMgVGhlIHBhcmFtcyB0byBzdXBwbHkgdG8gdGhlIG1ldGhvZCBnZW5lcmF0aW5nIHRoZSBxdWVyeQoJICogQHBhcmFtIHN0cmluZyAkdGltZW91dCAob3B0aW9uYWwpIFRoZSB0dGwgZm9yIHRoZSBjYWNoZWQgZGF0YSwgZGVmYXVsdHMgdG8gdGhlIGdsb2JhbCB0aW1lb3V0IGRlZmluZWQgaW4gdGhlIGRhdGEgcmV0cmlldmVyICgxMjAwIHNlY3MpCgkgKiBAcGFyYW0gYm9vbGVhbiAkYXN5bmNocm9ub3VzIChvcHRpb25hbCkgV2hldGhlciBvciBub3QgdGhlIGNhY2hlIHJlcXVlc3Qgc2hvdWxkIGJlIGhhbmRsZWQgYnkgYSBzZXBhcmF0ZSBwcm9jZXNzLCBkZWZhdWx0cyB0byB0cnVlCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVwb3J0UmVzcG9uc2UgY29udGFpbmluZyB0aGUgcmVzdWx0cyBvbiBzdWNjZXNzLCBhIGRlc2NyaXB0aXZlIG1lc3NhZ2UgaWYgdGhlIHN0YXR1cyBpcyBlcnJvciBvciBub3QtcmVhZHkKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZXF1ZXN0RGF0YSgkcXVlcnlUYXJnZXQsICRxdWVyeUlkZW50aWZpZXIsJHBhcmFtcywkdGltZW91dD0iIiwkYXN5bmNocm9ub3VzPXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRxdWVyeVRhcmdldCA9IGlzX29iamVjdCgkcXVlcnlUYXJnZXQpP2dldF9jbGFzcygkcXVlcnlUYXJnZXQpOiRxdWVyeVRhcmdldDsKCQkKCQkvL29yZGVyIHRoZSBwYXJhbWV0ZXJzIGFuZCBqc29uIGVuY29kZSB0aGVtCgkJJHBhcmFtU3RyaW5nID0gc2VsZjo6ZW5jb2RlUGFyYW1zKCRwYXJhbXMpOwoJCSRwYXJhbUhhc2ggPSBtZDUoJHBhcmFtU3RyaW5nKTsKCQkKCQkkY3VycmVudFRpbWUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkKCQkvL25vdyBjaGVjayB0aGUgZGF0YSBjYWNoZSBmb3Igbm9uLWV4cGlyZWQgZGF0YSBtYXRjaGluZyB0aGUgcmVxdWVzdAoJCSRjYWNoZVF1ZXJ5ID0gJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9SRVBPUlRfREFUQV9DQUNIRS4iIFdIRVJFIHF1ZXJ5X3RhcmdldD0lcyBBTkQgcXVlcnlfdG9rZW4gPSAlcyBBTkQgIi4KCQkJCQkgICJwYXJhbV9oYXNoID0gJXMgQU5EIGV4cGlyYXRpb25fZGF0ZSA+ICVzIiwkcXVlcnlUYXJnZXQsICRxdWVyeUlkZW50aWZpZXIsJHBhcmFtSGFzaCwkY3VycmVudFRpbWUpOwoJCQkJCQkJICAKCQkkY2FjaGVEYXRhID0gJHdwZGItPmdldF9yb3coJGNhY2hlUXVlcnkpOwoJCQoJCWlmIChpc19udWxsKCRjYWNoZURhdGEpKSAKCQl7CgkJCS8vY2FjaGUgbWlzcwoJCQkvL2lmICgkYXN5bmNocm9ub3VzKQoJCQlpZiAoZmFsc2UpCgkJCXsKCQkJCSRmcmVzaGx5Q2FjaGVkID0gZmFsc2U7CgkJCQlpZiAoaXNfbnVsbCgkY2FjaGVEYXRhKSkKCQkJCXsKCQkJCQkkY2FjaGVSZXNwb25zZSA9IHNlbGY6OmNyZWF0ZUNhY2hlUmVxdWVzdCgkcXVlcnlUYXJnZXQsICRxdWVyeUlkZW50aWZpZXIsJHBhcmFtcywkdGltZW91dCk7CgkJCQkJaWYgKE1NX1JlcG9ydFJlc3BvbnNlOjppc05vdFJlYWR5KCRjYWNoZVJlc3BvbnNlKSkKCQkJCQl7CgkJCQkJCS8vcmVxdWVzdCB3YXMganVzdCBjcmVhdGVkLi4gZGVsYXkgdG8gc2VlIGlmIHRoZSByZXN1bHRzIHdlcmUgaW1tZWRpYXRlbHkgcmVhZHkKCQkJCQkJJGZyZXNobHlDYWNoZWQgPSB0cnVlOwoJCQkJCQl1c2xlZXAoMjAwMDAwKTsKCQkJCQkJJGNhY2hlRGF0YSA9ICR3cGRiLT5nZXRfcm93KCRjYWNoZVF1ZXJ5KTsKCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCXJldHVybiAkY2FjaGVSZXNwb25zZTsKCQkJCQl9CgkJCQl9CgkJCgkJCQlpZiAoaXNfbnVsbCgkY2FjaGVEYXRhKSAmJiAkZnJlc2hseUNhY2hlZCkKCQkJCXsKCQkJCQkkcmV0dXJuVmFsID0gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJDYWNoZSByZXF1ZXN0IHN1Y2NlZWRlZCIsIE1NX1JlcG9ydFJlc3BvbnNlOjokTk9UX1JFQURZKTsKCQkJCQlyZXR1cm4gICRyZXR1cm5WYWw7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJLy9ub24tYXN5bmNocm9ub3VzIC0gZGF0YSBuZWVkcyB0byBiZSByZXRyaWV2ZWQgaW1tZWRpYXRlbHksIGFuZCB0aGVuIGNhY2hlZCBmb3IgbmV4dCBoaXQKCQkJCSRnZW5lcmF0aW9uUmVzcG9uc2UgPSBzZWxmOjpnZW5lcmF0ZURhdGEoJHF1ZXJ5VGFyZ2V0LCAkcXVlcnlJZGVudGlmaWVyLCAkcGFyYW1zLCAkdGltZW91dCk7CQoJCQkJaWYgKE1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGdlbmVyYXRpb25SZXNwb25zZSkpCgkJCQl7CgkJCQkJJGNhY2hlRGF0YSA9ICRnZW5lcmF0aW9uUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCQl9CgkJCQllbHNlIGlmIChNTV9SZXBvcnRSZXNwb25zZTo6aGFzTm9EYXRhKCRnZW5lcmF0aW9uUmVzcG9uc2UpKQoJCQkJewoJCQkJCS8vd2UgY2FuIGJhaWwgZWFybHksIHRoZSBmcm9udC1lbmQga25vd3Mgd2hhdCB0byBkbyB3aXRoIHRoaXMgcmVzcG9uc2UKCQkJCQlyZXR1cm4gJGdlbmVyYXRpb25SZXNwb25zZTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJJGNhY2hlRGF0YSA9IG5ldyBzdGRDbGFzcygpOwoJCQkJCSRjYWNoZURhdGEtPnN0YXR1cyA9ICgkZ2VuZXJhdGlvblJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVwb3J0UmVzcG9uc2UpPyRnZW5lcmF0aW9uUmVzcG9uc2UtPnR5cGU6c2VsZjo6JERBVEFfRVJST1JfU1RBVFVTOwoJCQkJfQoJCQl9CgkJfQoJCQoJCS8vc2hvdWxkIGJlIGEgc3RhdHVzIGF0IHRoaXMgcG9pbnQKCQlpZiAoJGNhY2hlRGF0YS0+c3RhdHVzID09IHNlbGY6OiREQVRBX1JFQURZX1NUQVRVUykgCgkJewoJCQkkcmVzcG9uc2UgPSBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoKTsKCQkJJHJlc3BvbnNlLT5tZXNzYWdlID0gdW5zZXJpYWxpemUoJGNhY2hlRGF0YS0+cXVlcnlfZGF0YSk7CgkJCWlmICgoJHJlc3BvbnNlLT5tZXNzYWdlID09PSAiIikgfHwgKGlzX2FycmF5KCRyZXNwb25zZS0+bWVzc2FnZSkgJiYgKGNvdW50KCRyZXNwb25zZS0+bWVzc2FnZSkgPT0gMCkpKQoJCQl7CgkJCQkkcmVzcG9uc2UtPnR5cGUgPSBNTV9SZXBvcnRSZXNwb25zZTo6JE5PX0RBVEE7CgkJCX0KCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9CgkJZWxzZSBpZiAoKCRjYWNoZURhdGEtPnN0YXR1cyA9PSBzZWxmOjokREFUQV9QRU5ESU5HX1NUQVRVUykgfHwgKCRjYWNoZURhdGEtPnN0YXR1cyA9PSBzZWxmOjokREFUQV9QUk9DRVNTSU5HX1NUQVRVUykpCgkJewoJCQkvL25vdCByZWFkeSwgcmV0dXJuIHN0YXR1cwoJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJEYXRhIG5vdCB5ZXQgYXZhaWxhYmxlIixNTV9SZXBvcnRSZXNwb25zZTo6JE5PVF9SRUFEWSk7CgkJfQoJCQoJCS8vZXJyb3Igc3RhdHVzCgkJJG1zZyA9IGlzc2V0KCRjYWNoZURhdGEtPnF1ZXJ5X2RhdGEpPyRjYWNoZURhdGEtPnF1ZXJ5X2RhdGE6IkVycm9yIGdlbmVyYXRpbmcgZGF0YSI7CgkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgkbXNnLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJfQoJCgkKCS8qKgoJICogQ3JlYXRlcyBhbiBlbnRyeSBpbiB0aGUgcmVwb3J0IGRhdGEgY2FjaGUgdGFibGUgd2l0aCBhIHBlbmRpbmcgc3RhdHVzLCBhbmQgdGhlbiBzdGFydHMgYSBiYWNrZ3JvdW5kIHByb2Nlc3MKCSAqIHJlc3BvbnNpYmxlIGZvciBwb3B1bGF0aW5nIHRoYXQgZGF0YQoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRxdWVyeUlkZW50aWZpZXIgQW4gaWRlbnRpZmllciBkZXNpZ25hdGluZyB0aGUgZGF0YSB0aGF0IHNob3VsZCBiZSBnZW5lcmF0ZWQKCSAqIEBwYXJhbSBhcnJheSAkcGFyYW1zIFRoZSBwYXJhbWV0ZXJzIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmcgdGhlIHJlcXVlc3RlZCBkYXRhCgkgKiBAcGFyYW0gaW50ICR0aW1lb3V0IChvcHRpb25hbCkgaG93IGxvbmcgdGhlIGdlbmVyYXRlZCBkYXRhIGlzIHZhbGlkLiBJZiBub3Qgc2V0LCBkZWZhdWx0cyB0byAxMjAwIHNlY3MgKDIwIG1pbnMpCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVwb3J0UmVzcG9uc2Ugc3VjY2VzcyBpZiBhbGwgb3BlcmF0aW9ucyBzdWNjZWVkLCBmYWlsdXJlIG90aGVyd2lzZQoJICovCglwcm90ZWN0ZWQgc3RhdGljIGZ1bmN0aW9uIGNyZWF0ZUNhY2hlUmVxdWVzdCgkcXVlcnlUYXJnZXQsICRxdWVyeUlkZW50aWZpZXIsJHBhcmFtcywkdGltZW91dD0iIikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHRpbWVvdXQgPSBlbXB0eSgkdGltZW91dCk/c2VsZjo6JERFRkFVTFRfQ0FDSEVfVElNRU9VVDppbnR2YWwoJHRpbWVvdXQpOwoJCSRleHBpcmF0aW9uRGF0ZSA9IGdtZGF0ZSgiWS1tLWQgSDppIixzdHJ0b3RpbWUoIit7JHRpbWVvdXR9IHNlY29uZHMiLE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgidGltZXN0YW1wIikpKTsgLy9ieSBkZWZhdWx0IDEyMDAgc2VjcyAoMzAgbWlucykKCQkkZW5jb2RlZFBhcmFtcyA9IHNlbGY6OmVuY29kZVBhcmFtcygkcGFyYW1zKTsKCQkkcGFyYW1IYXNoID0gbWQ1KCRlbmNvZGVkUGFyYW1zKTsKCQkKCQkkY2FjaGVJZCA9ICR3cGRiLT5nZXRfdmFyKCIKICAJICBTRUxFQ1QgCiAgCSAgYGlkYCAKICAJICBGUk9NIGAiLk1NX1RBQkxFX1JFUE9SVF9EQVRBX0NBQ0hFLiJgIAogIAkgIFdIRVJFIGBxdWVyeV90YXJnZXRgID0gJ3skcXVlcnlUYXJnZXR9JwogIAkgIEFORCBgcXVlcnlfdG9rZW5gID0gJ3skcXVlcnlJZGVudGlmaWVyfScKICAJICBBTkQgYHBhcmFtX2hhc2hgID0gJ3skcGFyYW1IYXNofScKCQkiKTsKCQkKCQlpZigkY2FjaGVJZCkKCQl7CiAgCQkkcmVzID0gJHdwZGItPnVwZGF0ZSggCiAgICAgICAgTU1fVEFCTEVfUkVQT1JUX0RBVEFfQ0FDSEUsIAogICAgICAgIGFycmF5KCAKICAgICAgICAgICJxdWVyeV90YXJnZXQiICAgICA9PiAkcXVlcnlUYXJnZXQsCiAgCQkJCSJxdWVyeV90b2tlbiIgCSAgID0+ICRxdWVyeUlkZW50aWZpZXIsCiAgCQkJCSJxdWVyeV9wYXJhbXMiIAkgICA9PiAkZW5jb2RlZFBhcmFtcywKICAJCQkJInBhcmFtX2hhc2giIAkgICAgID0+ICRwYXJhbUhhc2gsCiAgCQkJCSJzdGF0dXMiIAkJICAgICAgID0+IHNlbGY6OiREQVRBX1BFTkRJTkdfU1RBVFVTLAogIAkJCQkiZXhwaXJhdGlvbl9kYXRlIiAgPT4gJGV4cGlyYXRpb25EYXRlCiAgICAgICAgKSwgCiAgICAgICAgYXJyYXkoCiAgICAgICAgICAnaWQnID0+ICRjYWNoZUlkCiAgICAgICAgKSAKICAgICAgKTsgCQoJCX0KCQllbHNlCgkJewogIAkJJHJlcyA9ICR3cGRiLT5pbnNlcnQoCiAgICAgCSAgTU1fVEFCTEVfUkVQT1JUX0RBVEFfQ0FDSEUsIAogICAgICAgIGFycmF5KCAKICAgICAgICAgICJxdWVyeV90YXJnZXQiICAgICA9PiAkcXVlcnlUYXJnZXQsCiAgCQkJCSJxdWVyeV90b2tlbiIgCSAgID0+ICRxdWVyeUlkZW50aWZpZXIsCiAgCQkJCSJxdWVyeV9wYXJhbXMiIAkgICA9PiAkZW5jb2RlZFBhcmFtcywKICAJCQkJInBhcmFtX2hhc2giIAkgICAgID0+ICRwYXJhbUhhc2gsCiAgCQkJCSJzdGF0dXMiIAkJICAgICAgID0+IHNlbGY6OiREQVRBX1BFTkRJTkdfU1RBVFVTLAogIAkJCQkiZXhwaXJhdGlvbl9kYXRlIiAgPT4gJGV4cGlyYXRpb25EYXRlCiAgICAgICAgKQogICAgICApOwogICAgICAKICAgICAgJGNhY2hlSWQgPSAkd3BkYi0+aW5zZXJ0X2lkOwoJCX0KCgkJaWYgKCRyZXMgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiQ291bGQgbm90IGNyZWF0ZSByZXBvcnQgZGF0YSByZXF1ZXN0IixNTV9SZXBvcnRSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBzZWxmOjpzdGFydEJhY2tncm91bmRQcm9jZXNzKCRjYWNoZUlkKTsKCQl9Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGUgYSBiYWNrZ3JvdW5kIHByb2Nlc3MgcmVzcG9uc2libGUgZm9yIGdlbmVyYXRpbmcgdGhlIGRhdGEgYXR0YWNoZWQgdG8gYSBjYWNoZSBpZAoJICogCgkgKiBAcGFyYW0gaW50ICRjYWNoZUlkIFRoZSBpZCBvZiB0aGUgcmVwb3J0IGNhY2hlIGRhdGEgc2NhbiAKCSAqIEByZXR1cm4gTU1fUmVwb3J0UmVzcG9uc2UgJ25vdCByZWFkeScgc3RhdHVzIGlmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzIHRvIHN0YXJ0IHRoZSBiYWNrZ3JvdW5kIHByb2Nlc3MsIGZhaWx1cmUgb3RoZXJ3aXNlCgkgKi8KCXByb3RlY3RlZCBzdGF0aWMgZnVuY3Rpb24gc3RhcnRCYWNrZ3JvdW5kUHJvY2VzcygkY2FjaGVJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJaWYgKGlzX251bGwoJGNhY2hlSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiVW5hYmxlIHRvIHN0YXJ0IGJhY2tncm91bmQgcHJvY2VzczogTm8gY2FjaGUgaWQgcHJvdmlkZWQiLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkkcmVwb3J0RGF0YUdlbmVyYXRvclVSTCA9IE1NX1BMVUdJTl9VUkwuIi9hc3luYy9yZXBvcnRkYXRhZ2VuZXJhdG9yLnBocCI7CgkJJGFwaVJvdyA9ICR3cGRiLT5nZXRfcm93KCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQVBJX0tFWVMuIiBXSEVSRSBTVEFUVVM9JzEnIExJTUlUIDEiKTsKCQlpZiAoaXNfbnVsbCgkYXBpUm93KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIlVuYWJsZSB0byBzdGFydCBiYWNrZ3JvdW5kIHByb2Nlc3M6IE5vIGFwaSBrZXlzIGF2YWlsYWJsZSIsTU1fUmVwb3J0UmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRyZXNwb25zZSA9IHdwX3JlbW90ZV9wb3N0KCRyZXBvcnREYXRhR2VuZXJhdG9yVVJMLGFycmF5KCdibG9ja2luZyc9PidmYWxzZScsCgkJCQkJCQkJCQkJCQkJCQknYm9keSc9PmFycmF5KCdhcGlrZXknICAgID0+ICRhcGlSb3ctPmFwaV9rZXksCgkJCQkJCQkJCQkJCQkJCQkJCQkgICdhcGlzZWNyZXQnID0+ICRhcGlSb3ctPmFwaV9zZWNyZXQsCgkJCQkJCQkJCQkJCQkJCQkJCQkgICdjYWNoZUlkJyAgID0+ICRjYWNoZUlkKQoJCQkJCQkJCQkJCQkJCQkJKQoJCQkJCQkJCQkpOwoJCWlmIChpc193cF9lcnJvcigkcmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXBvcnRSZXNwb25zZSgiVW5hYmxlIHRvIHN0YXJ0IGJhY2tncm91bmQgcHJvY2VzczoiLiRyZXNwb25zZS0+Z2V0X2Vycm9yX21lc3NhZ2UoKSk7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIkJhY2tncm91bmQgcHJvY2VzcyBzdGFydGVkIHN1Y2Nlc3NmdWxseSIsTU1fUmVwb3J0UmVzcG9uc2U6OiROT1RfUkVBRFkpOwoJfQoJCgkKCS8qKgoJICogUm91dGVzIHRvIHRoZSBjb3JyZWN0IGhhbmRsZXIgbWV0aG9kIGZvciB0aGUgcXVlcnkgd2l0aCB0aGUgaWQgJGNhY2hlSWQgYW5kIHRoZSBwYXJhbWV0ZXJzIGNvbnRhaW5lZCB3aXRoaW4gJHBhcmFtcwoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRxdWVyeVRhcmdldAoJICogQHBhcmFtIFN0cmluZyAkcXVlcnlJZGVudGlmaWVyCgkgKiBAcGFyYW0gYXJyYXkgJHBhcmFtcwoJICogQHBhcmFtIGludCAkdGltZW91dAoJICogCgkgKiBAcmV0dXJuIE1NX1JlcG9ydFJlc3BvbnNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgb24gc3VjY2Vzcywgb3IgYW4gZXJyb3IgbWVzc2FnZSBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVEYXRhKCRxdWVyeVRhcmdldCwgJHF1ZXJ5SWRlbnRpZmllciwgJHBhcmFtcywkdGltZW91dD0xMjAwKQoJewoJCSRxdWVyeVRhcmdldCA9IGlzX29iamVjdCgkcXVlcnlUYXJnZXQpP2dldF9jbGFzcygkcXVlcnlUYXJnZXQpOiRxdWVyeVRhcmdldDsKCQkkcmVzdWx0c2V0UmVzcG9uc2UgPSBjYWxsX3VzZXJfZnVuYyhhcnJheSgkcXVlcnlUYXJnZXQsImdlbmVyYXRlRGF0YSIpLCRxdWVyeUlkZW50aWZpZXIsJHBhcmFtcyk7CgkJaWYgKE1NX1JlcG9ydERhdGFzZXQ6OmlzU3VjY2VzcygkcmVzdWx0c2V0UmVzcG9uc2UpKQoJCXsKCQkJJGRhdGFzZXQgPSAkcmVzdWx0c2V0UmVzcG9uc2UtPmdldFByaW1hcnlEYXRhc2V0KCk7CgkJCSRjYWNoZVJlcXVlc3RSZXNwb25zZSA9IHNlbGY6OmNhY2hlRGF0YXNldCgkcXVlcnlUYXJnZXQsJHF1ZXJ5SWRlbnRpZmllciwkZGF0YXNldC0+cGFyYW1zLCRkYXRhc2V0LT5kYXRhLCR0aW1lb3V0KTsKCQkJaWYgKCRyZXN1bHRzZXRSZXNwb25zZS0+ZGF0YXNldFR5cGUgPT0gTU1fUmVwb3J0RGF0YXNldDo6JENPTVBPVU5EX0RBVEFTRVQpCgkJCXsKCQkJCSRkc0FycmF5ID0gJHJlc3VsdHNldFJlc3BvbnNlLT5nZXRBZGRpdGlvbmFsRGF0YXNldHMoKTsKCQkJCWZvcmVhY2ggKCRkc0FycmF5IGFzICRkYXRhc2V0KQoJCQkJewoJCQkJCXNlbGY6OmNhY2hlRGF0YXNldCgkcXVlcnlUYXJnZXQsJHF1ZXJ5SWRlbnRpZmllciwkZGF0YXNldC0+cGFyYW1zLCRkYXRhc2V0LT5kYXRhLCR0aW1lb3V0KTsKCQkJCX0KCQkJfQoJCQlyZXR1cm4gJGNhY2hlUmVxdWVzdFJlc3BvbnNlOwoJCX0KCQllbHNlIGlmIChNTV9SZXBvcnREYXRhc2V0OjpoYXNOb0RhdGEoJHJlc3VsdHNldFJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkcmVzdWx0c2V0UmVzcG9uc2U7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCJFcnJvciBnZW5lcmF0aW5nIGRhdGEgZm9yIHF1ZXJ5IHskcXVlcnlUYXJnZXR9Ojp7JHF1ZXJ5SWRlbnRpZmllcn0gLSB7JHJlc3VsdHNldFJlc3BvbnNlLT5tZXNzYWdlfSIsTU1fUmVwb3J0UmVzcG9uc2U6OiRFUlJPUik7CgkJfQkJCQoJfQoJCgkKCXByb3RlY3RlZCBzdGF0aWMgZnVuY3Rpb24gY2FjaGVEYXRhc2V0KCRxdWVyeVRhcmdldCwgJHF1ZXJ5SWRlbnRpZmllciwgJHBhcmFtcywgJGRhdGEsICR0aW1lb3V0PTEyMDApCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSR0aW1lb3V0ID0gZW1wdHkoJHRpbWVvdXQpP3NlbGY6OiRERUZBVUxUX0NBQ0hFX1RJTUVPVVQ6JHRpbWVvdXQ7CgkJJGVuY29kZWRQYXJhbXMgPSBzZWxmOjplbmNvZGVQYXJhbXMoJHBhcmFtcyk7CgkJJGVuY29kZWREYXRhID0gc2VyaWFsaXplKCRkYXRhKTsKCQkkcGFyYW1IYXNoID0gbWQ1KCRlbmNvZGVkUGFyYW1zKTsKCQkkZXhwaXJhdGlvbiA9IGRhdGUoIlktbS1kIEg6aTpzIixzdHJ0b3RpbWUoIit7JHRpbWVvdXR9IHNlY29uZHMiLE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgidGltZXN0YW1wIikpKTsgLy9ieSBkZWZhdWx0IDEyMDAgc2VjcyAoMzAgbWlucykKICAgIAoJCSRjYWNoZUlkID0gJHdwZGItPmdldF92YXIoIgogIAkgIFNFTEVDVCAKICAJICBgaWRgIAogIAkgIEZST00gYCIuTU1fVEFCTEVfUkVQT1JUX0RBVEFfQ0FDSEUuImAgCiAgCSAgV0hFUkUgYHF1ZXJ5X3RhcmdldGAgPSAneyRxdWVyeVRhcmdldH0nCiAgCSAgQU5EIGBxdWVyeV90b2tlbmAgPSAneyRxdWVyeUlkZW50aWZpZXJ9JwogIAkgIEFORCBgcGFyYW1faGFzaGAgPSAneyRwYXJhbUhhc2h9JwoJCSIpOwoJCQoJCWlmKCRjYWNoZUlkKQoJCXsKICAJCSRyZXMgPSAkd3BkYi0+dXBkYXRlKCAKICAgICAgICBNTV9UQUJMRV9SRVBPUlRfREFUQV9DQUNIRSwgCiAgICAgICAgYXJyYXkoIAogICAgICAgICAgInF1ZXJ5X3RhcmdldCIgICAgID0+ICRxdWVyeVRhcmdldCwKICAJCQkJInF1ZXJ5X3Rva2VuIiAJICAgPT4gJHF1ZXJ5SWRlbnRpZmllciwKICAJCQkJInF1ZXJ5X3BhcmFtcyIgCSAgID0+ICRlbmNvZGVkUGFyYW1zLAogIAkJCQkicGFyYW1faGFzaCIgCSAgICAgPT4gJHBhcmFtSGFzaCwKICAJCQkJInF1ZXJ5X2RhdGEiICAgICAgID0+ICRlbmNvZGVkRGF0YSwKICAJCQkJInN0YXR1cyIgCQkgICAgICAgPT4gc2VsZjo6JERBVEFfUkVBRFlfU1RBVFVTLAogIAkJCQkiZXhwaXJhdGlvbl9kYXRlIiAgPT4gJGV4cGlyYXRpb24KICAgICAgICApLCAKICAgICAgICBhcnJheSgKICAgICAgICAgICdpZCcgPT4gJGNhY2hlSWQKICAgICAgICApIAogICAgICApOyAJCgkJfQoJCWVsc2UKCQl7CiAgCQkkcmVzID0gJHdwZGItPmluc2VydCgKICAgICAJICBNTV9UQUJMRV9SRVBPUlRfREFUQV9DQUNIRSwgCiAgICAgICAgYXJyYXkoIAogICAgICAgICAgInF1ZXJ5X3RhcmdldCIgICAgID0+ICRxdWVyeVRhcmdldCwKICAJCQkJInF1ZXJ5X3Rva2VuIiAJICAgPT4gJHF1ZXJ5SWRlbnRpZmllciwKICAJCQkJInF1ZXJ5X3BhcmFtcyIgCSAgID0+ICRlbmNvZGVkUGFyYW1zLAogIAkJCQkicGFyYW1faGFzaCIgCSAgICAgPT4gJHBhcmFtSGFzaCwKICAJCQkJInF1ZXJ5X2RhdGEiICAgICAgID0+ICRlbmNvZGVkRGF0YSwKICAJCQkJInN0YXR1cyIgCQkgICAgICAgPT4gc2VsZjo6JERBVEFfUkVBRFlfU1RBVFVTLAogIAkJCQkiZXhwaXJhdGlvbl9kYXRlIiAgPT4gJGV4cGlyYXRpb24KICAgICAgICApCiAgICAgICk7CiAgICAgIAogICAgICAkY2FjaGVJZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJfQoJCQoJCWlmICgkcmVzID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIkNvdWxkIG5vdCBzdG9yZSBnZW5lcmF0ZWQgcmVwb3J0IGRhdGFzZXQiLE1NX1JlcG9ydFJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkY3YgPSBuZXcgc3RkQ2xhc3MoKTsgLy9jYWNoZWQgdmFsdWVzCgkJJGN2LT5xdWVyeV90YXJnZXQgPSAkcXVlcnlUYXJnZXQ7CgkJJGN2LT5xdWVyeV90b2tlbiA9ICRxdWVyeUlkZW50aWZpZXI7CgkJJGN2LT5xdWVyeV9wYXJhbXMgPSAkZW5jb2RlZFBhcmFtczsKCQkkY3YtPnBhcmFtX2hhc2ggPSAkcGFyYW1IYXNoOwoJCSRjdi0+cXVlcnlfZGF0YSA9ICRlbmNvZGVkRGF0YTsKCQkkY3YtPnN0YXR1cyA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OiREQVRBX1JFQURZX1NUQVRVUzsKCQkkY3YtPmV4cGlyYXRpb25fZGF0ZSA9ICRleHBpcmF0aW9uOwoJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoJGN2KTsKCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgaGFzaGVkIGFycmF5IGFuZCBwcm9kdWNlcyBhIGpzb24tZW5jb2RlZCBzdHJpbmcuIAoJICogRXF1aXZhbGVudCBhcnJheXMgd2lsbCBwcm9kdWNlIHRoZSBzYW1lIHN0cmluZywgcmVnYXJkbGVzcyBvZiB0aGUgb3JkZXJpbmcgb2YgdGhlIGNvbnRlbnRzCgkgKiBUaGUgcGFyYW1zIGFycmF5IGNhbm5vdCBjb250YWluIHx8IChkb3VibGUgcGlwZSkgaW4gdGhlIGtleXMgb3IgdmFsdWVzCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcGFyYW1zCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIHRoZSBqc29uLWVuY29kZWQgY29udGVudHMsIGZhbHNlIG9uIGVycm9yCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZW5jb2RlUGFyYW1zKCRwYXJhbXMpCgl7CgkJaWYgKCFpc19hcnJheSgkcGFyYW1zKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJZm9yZWFjaCAoJHBhcmFtcyBhcyAmJHYpCgkJewoJCQlpZiAoaXNfYXJyYXkoJHYpKQoJCQl7CgkJCQlrc29ydCgkdik7CgkJCX0KCQl9CgkJa3NvcnQoJHBhcmFtcyk7CgkJcmV0dXJuIGpzb25fZW5jb2RlKCRwYXJhbXMpOwoJfQoJCgkKCS8qKgoJICogVGFrZXMgYSBzdHJpbmcgZW5jb2RlZCB3aXRoIE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OmVuY29kZVBhcmFtcyguLikgYW5kIGRlY29kZXMgaXQgaW50byBhIGhhc2hlZCBhcnJheQoJICoKCSAqIEBwYXJhbSBTdHJpbmcgJHBhcmFtU3RyaW5nIFRoZSBlbmNvZGVkIHN0cmluZwoJICogQHJldHVybiBhcnJheSBvZiB0aGUgZGVjb2RlZCB2YWx1ZXMsIGZhbHNlIG9uIGVycm9yCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZGVjb2RlUGFyYW1zKCRwYXJhbVN0cmluZykKCXsKCQlyZXR1cm4ganNvbl9kZWNvZGUoJHBhcmFtU3RyaW5nLHRydWUpOwoJfQoKCQoJLyoqCgkgKiBEZWxldGVzIGVudHJpZXMgZnJvbSB0aGUgZGF0YSBjYWNoZQoJICogCgkgKiBAcGFyYW0gYm9vbGVhbiAkZXhwaXJlZE9ubHkgKG9wdGlvbmFsKSBEZXRlcm1pbmVzIHdoZXRoZXIgb25seSBleHBpcmVkIGVudHJpZXMgc2hvdWxkIGJlIGRlbGV0ZWQsIGRlZmF1bHRzIHRvIGZhbHNlCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY2xlYXJEYXRhQ2FjaGUoJGV4cGlyZWRPbmx5PWZhbHNlKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfUkVQT1JUX0RBVEFfQ0FDSEUuKCgkZXhwaXJlZE9ubHkpPyIgV0hFUkUgZXhwaXJhdGlvbl9kYXRlIDw9ICciLk1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpLiInIjoiIik7CgkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJfQp9Cgo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(207, 'subscriptionsview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1N1YnNjcmlwdGlvbnNWaWV3IGV4dGVuZHMgTU1fUkJBQ0dlbmVyYWxFbXBsb3llZVZpZXcKewoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0FWRV9TVUJTQ1JJUFRJT04gPSAic2F2ZVN1YnNjcmlwdGlvbiI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9DQU5DRUxfU1VCX09OTFkgPSAiY2FuY2VsU3Vic2NyaXB0aW9uT25seSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9DQU5DRUxfU1VCX0FORF9BQ0NFU1MgPSAiY2FuY2VsU3Vic2NyaXB0aW9uQW5kQWNjZXNzIjsKCQoKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9DQU5DRUxfU1VCX0FORF9BQ0NFU1M6CgkJCQkJcmV0dXJuICR0aGlzLT5jYW5jZWxTdWJzY3JpcHRpb25BbmRBY2Nlc3MoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fQ0FOQ0VMX1NVQl9PTkxZOgoJCQkJCXJldHVybiAkdGhpcy0+Y2FuY2VsU3Vic2NyaXB0aW9uT25seSgkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFX1NVQlNDUklQVElPTjoKCQkJCQlyZXR1cm4gJHRoaXMtPnNhdmVTdWJzY3JpcHRpb24oJHBvc3QpOwoJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzaG93RWRpdFN1YnNjcmlwdGlvbkRpYWxvZygkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsib3JkZXJfaXRlbV9pZCJdKSkKCQl7CgkJCSRpbmZvID0gbmV3IHN0ZENsYXNzKCk7CgkJCSRpbmZvLT5vcmRlckl0ZW1JZCA9ICRwb3N0WyJvcmRlcl9pdGVtX2lkIl07CgkJCQoJCQkkZGF0YSA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvIi5NTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfU1VCU0NSSVBUSU9OUy4iLmRpYWxvZy5waHAiLCAkaW5mbyk7CgkJCQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRkYXRhKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgZWRpdGluZyBzdWJzY3JpcHRpb24uIE9yZGVyIGl0ZW0gSUQgaXMgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2F2ZVN1YnNjcmlwdGlvbigkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsib3JkZXJfaXRlbV9pZCJdKSkKCQl7CgkJCSRvcmRlckl0ZW0gPSBNTV9PcmRlckl0ZW06OmNyZWF0ZSgkcG9zdFsib3JkZXJfaXRlbV9pZCJdKTsKCQkJCgkJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQkJewoJCQkJZ2xvYmFsICR3cGRiOwoJCQkJCQoJCQkJJHNxbCA9ICR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgcGF5bWVudF9pZCBGUk9NICIuTU1fVEFCTEVfT1JERVJTLiIgV0hFUkUgaWQgPSAlcyBMSU1JVCAxIiwkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQkJJHB5bXRTZXJ2aWNlSWQgPSAkd3BkYi0+Z2V0X3Zhcigkc3FsKTsKCQkJCQkKCQkJCWlmICgkcHltdFNlcnZpY2VJZCAhPT0gZmFsc2UpCgkJCQl7CgkJCQkJJHB5bXRTZXJ2aWNlID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRQYXltZW50U2VydmljZUJ5SWQoJHB5bXRTZXJ2aWNlSWQpOwoJCQkJCQkKCQkJCQlpZigkcHltdFNlcnZpY2UtPnN1cHBvcnRzRmVhdHVyZShNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDQVJEX09OX0ZJTEUpKQoJCQkJCXsKCQkJCQkJLy8gdXBkYXRlIG5leHQgcmViaWxsIGRhdGUKCQkJCQkJaWYoaXNzZXQoJHBvc3RbIm1tX25leHRfcmViaWxsX2RhdGUiXSkpCgkJCQkJCXsJCgkJCQkJCQkvLyBjaGVjayBpZiBuZXh0IHJlYmlsbCBkYXRlIGlzIGluIHRoZSBmdXR1cmUKCQkJCQkJCWlmKHN0cnRvdGltZSgkcG9zdFsibW1fbmV4dF9yZWJpbGxfZGF0ZSJdKSA8IHRpbWUoKSkKCQkJCQkJCXsKCQkJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbi4gTmV4dCByZWJpbGwgZGF0ZSBtdXN0IGJlIHNldCB0byBhIGRhdGUgaW4gdGhlIGZ1dHVyZS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJJG5leHRSZWJpbGxEYXRlID0gTU1fVXRpbHM6OmRhdGVUb1VUQygkcG9zdFsnbW1fbmV4dF9yZWJpbGxfZGF0ZSddLCAiWS1tLWQgSDppIiwgIjAwOjAwOjAwIik7CgkJCQkJCQkkcmVzdWx0ID0gJHB5bXRTZXJ2aWNlLT5tb2RpZnlOZXh0QmlsbGluZ0RhdGUoJG9yZGVySXRlbSwgJG5leHRSZWJpbGxEYXRlKTsKCQkJCQkJCQoJCQkJCQkJaWYoIU1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJCQkJCXsKCQkJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXN1bHQtPmdldE1lc3NhZ2UoKSwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQkJCQkJCgkJCQkJCQlpZigkb3JkZXItPmlzVmFsaWQoKSkKCQkJCQkJCXsKCQkJCQkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRCSUxMSU5HX1NVQlNDUklQVElPTl9SRUJJTExfREFURV9DSEFOR0VELCBNTV9FdmVudDo6cGFja2FnZU9yZGVyRGF0YSgkb3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCksICRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSkpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCQoJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTdWJzY3JpcHRpb24gdXBkYXRlZCBzdWNjZXNzZnVsbHkiKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBzdWJzY3JpcHRpb24uIEludmFsaWQgb3JkZXIgaXRlbSBwYXNzZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gY2FuY2VsU3Vic2NyaXB0aW9uQW5kQWNjZXNzKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJtbV9vcmRlcl9pdGVtX2lkIl0pKQoJCXsKCQkJJG9yZGVySXRlbSA9IE1NX09yZGVySXRlbTo6Y3JlYXRlKCRwb3N0WyJtbV9vcmRlcl9pdGVtX2lkIl0pOwoJCQkJCgkJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQkJewoJCQkJJHZpZXcgPSBuZXcgTU1fTWVtYmVyRGV0YWlsc1ZpZXcoKTsKCQkJCXJldHVybiAkdmlldy0+Y2FuY2VsU3Vic2NyaXB0aW9uRm9yT3JkZXJJdGVtKCRvcmRlckl0ZW0pOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIE9yZGVyIEl0ZW0geyRwb3N0WyJtbV9vcmRlcl9pdGVtX2lkIl19IGlzIGludmFsaWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIE9yZGVyIEl0ZW0gSUQgaXMgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGNhbmNlbFN1YnNjcmlwdGlvbk9ubHkoJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbIm1tX29yZGVyX2l0ZW1faWQiXSkpCgkJewoJCQkkb3JkZXJJdGVtID0gTU1fT3JkZXJJdGVtOjpjcmVhdGUoJHBvc3RbIm1tX29yZGVyX2l0ZW1faWQiXSk7CgkJCQkKCQkJaWYoJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkcmVzdWx0ID0gTU1fUGF5bWVudFV0aWxzOjpjYW5jZWxTdWJzY3JpcHRpb25Gb3JPcmRlckl0ZW0oJG9yZGVySXRlbSk7CgkJCQkKCQkJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCQkJewoJCQkJCXJldHVybiAkcmVzdWx0OwoJCQkJfQoJCQkJCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTdWJzY3JpcHRpb24gY2FuY2VsZWQgc3VjY2Vzc2Z1bGx5LiIpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIE9yZGVyIEl0ZW0geyRwb3N0WyJtbV9vcmRlcl9pdGVtX2lkIl19IGlzIGludmFsaWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2FuY2VsbGluZyBzdWJzY3JpcHRpb24uIE9yZGVyIEl0ZW0gSUQgaXMgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgkdXNlcklkLE1NX0RhdGFHcmlkICRkZz1udWxsLCRzdGFydERhdGU9bnVsbCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy90YWJsZXMgdXNlZCBpbiB0aGUgbWFzdGVyIHF1ZXJ5LgoJCSRvcmRlcnNUYWJsZSAgICAgICAgICAJPSBNTV9UQUJMRV9PUkRFUlM7CgkJJG9yZGVySXRlbXNUYWJsZSAgICAgIAk9IE1NX1RBQkxFX09SREVSX0lURU1TOwoJCSRvcmRlckl0ZW1BY2Nlc3NUYWJsZSAJPSBNTV9UQUJMRV9PUkRFUl9JVEVNX0FDQ0VTUzsKCQkkbWVtYmVyc2hpcExldmVsc1RhYmxlIAk9IE1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTOwoJCSRidW5kbGVzVGFibGUgCQkgICAJPSBNTV9UQUJMRV9CVU5ETEVTOwkKCQkkcHJvZHVjdHNUYWJsZSAJCQk9IE1NX1RBQkxFX1BST0RVQ1RTOwoJCQoJCSRhY2Nlc3NUeXBlTWVtYmVyc2hpcCA9IE1NX09yZGVySXRlbUFjY2Vzczo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVA7CgkJJGFjY2Vzc1R5cGVCdW5kbGUgPSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9CVU5ETEU7CgkJCgkJJHN0YXR1c1JlY3VycmluZyA9IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkc7CgkJJHN0YXR1c1JlYmlsbEZhaWxlZCA9IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRDsKCQkkc3RhdHVzUmVjdXJyaW5nUGVuZGluZ092ZXJkdWUgPSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1BFTkRJTkdfT1ZFUkRVRTsKCgkJJGZyb21XaGVyZVNxbCA9ICJGUk9NIHskb3JkZXJJdGVtc1RhYmxlfSBvaSAiLgoJCQkJIklOTkVSIEpPSU4geyRvcmRlcnNUYWJsZX0gbyBPTiAob2kub3JkZXJfaWQgPSBvLmlkKSAiLgoJCQkJIkxFRlQgSk9JTiB7JHByb2R1Y3RzVGFibGV9IHAgT04gKG9pLml0ZW1faWQgPSBwLmlkKSAiLgoJCQkJIkxFRlQgSk9JTiB7JG9yZGVySXRlbUFjY2Vzc1RhYmxlfSBvaWEgT04gKG9pLmlkID0gb2lhLm9yZGVyX2l0ZW1faWQpICIuCgkJCQkiTEVGVCBKT0lOIHskbWVtYmVyc2hpcExldmVsc1RhYmxlfSBtIE9OICgob2lhLmFjY2Vzc190eXBlPSd7JGFjY2Vzc1R5cGVNZW1iZXJzaGlwfScpIEFORCAob2lhLmFjY2Vzc190eXBlX2lkID0gbS5pZCkpICIuCgkJCQkiTEVGVCBKT0lOIHskYnVuZGxlc1RhYmxlfSBiIE9OICgob2lhLmFjY2Vzc190eXBlPSd7JGFjY2Vzc1R5cGVCdW5kbGV9JykgQU5EIChvaWEuYWNjZXNzX3R5cGVfaWQgPSBiLmlkKSkgIi4KCQkJCSJXSEVSRSAob2kuaXNfcmVjdXJyaW5nPTEpIEFORCAob2kuaXRlbV90eXBlPTEpICIuCgkJCQkiQU5EICgob2kuc3RhdHVzID0neyRzdGF0dXNSZWN1cnJpbmd9JykgT1IgKG9pLnN0YXR1cz0neyRzdGF0dXNSZWJpbGxGYWlsZWR9JykgT1IgKG9pLnN0YXR1cz0neyRzdGF0dXNSZWN1cnJpbmdQZW5kaW5nT3ZlcmR1ZX0nKSkgIi4KCQkJCSJBTkQgKG8udXNlcl9pZD0lcykiOwoJCQoJCS8vIGNvdW50IHF1ZXJ5CgkJJGNvdW50UXVlcnkgPSAic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIHskZnJvbVdoZXJlU3FsfSI7IAoJCSRjb3VudFF1ZXJ5ID0gJHdwZGItPnByZXBhcmUoJGNvdW50UXVlcnksJHVzZXJJZCk7CgkJIAoJCSRjb3VudFJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRjb3VudFF1ZXJ5KTsKCQkKCQkvL21hc3RlciBxdWVyeSwgZmluZHMgYWxsIHJlY3VycmluZyBvcmRlciBpdGVtcyBvZiB0eXBlIHByb2R1Y3QgYW5kIGxlZnRzIGpvaW5zIG1lbWJlcnNoaXAgYW5kIGJ1bmRsZSBpbmZvcm1hdGlvbiBpZiBhY2Nlc3MgaGFzIGJlZW4gZ3JhbnRlZAoJCSRtYXN0ZXJRdWVyeSA9ICAiU0VMRUNUIHskY291bnRSZXN1bHQtPnRvdGFsfSBhcyAndG90YWwnLCAKCQkJCQkJCW9pLmlkLG9pLm9yZGVyX2lkLG9pLml0ZW1fdHlwZSxvaS5kZXNjcmlwdGlvbixvaS5hbW91bnQsb2kuY3VycmVuY3ksb2kucXVhbnRpdHksb2kudG90YWwgYXMgb3JkZXJfaXRlbV90b3RhbCxvaS5pdGVtX2lkLG9pLnN0YXR1cyxvaS5pc19yZWN1cnJpbmcsb2kucmVjdXJyaW5nX2Ftb3VudCxvaS5yZWN1cnJpbmdfZGlzY291bnQsb2kudHJpYWxfYW1vdW50LG9pLnRyaWFsX2ZyZXF1ZW5jeSxvaS50cmlhbF9kdXJhdGlvbixvaS5yZWJpbGxfcGVyaW9kLG9pLnJlYmlsbF9mcmVxdWVuY3ksb2kubWF4X3JlYmlsbHMsb2kuaXNfZ2lmdCxvaS5pc190ZXN0LCAKCQkJCQkJCW8uZGF0ZV9hZGRlZCwgb2kuaXRlbV9pZCBBUyBwcm9kdWN0X2lkLCBvaS5zdGF0dXMgQVMgb3JkZXJfaXRlbV9zdGF0dXMsIG9pLmlkIEFTIG9yZGVyX2l0ZW1faWQsb2lhLmFjY2Vzc190eXBlLCIuCgkJCQkJICAgICJwLm5hbWUgQVMgcHJvZHVjdF9uYW1lLCIuCgkJCQkJICAgICJtLm5hbWUgQVMgbWVtYmVyc2hpcF9sZXZlbF9uYW1lLCIuCgkJCQkJCSJiLm5hbWUgQVMgYnVuZGxlX25hbWUgeyRmcm9tV2hlcmVTcWx9IjsKCgkJJG1hc3RlclF1ZXJ5ID0gJHdwZGItPnByZXBhcmUoJG1hc3RlclF1ZXJ5LCR1c2VySWQpOyAKCQkKCQlpZighaXNfbnVsbCgkZGcpICYmICFpc19udWxsKCRkZy0+c29ydEJ5KSAmJiAhZW1wdHkoJGRnLT5zb3J0QnkpKSAvL2hhbmRsZSB0aGUgc29ydGluZwoJCXsgCgkJCSRtYXN0ZXJRdWVyeS49ICIgT1JERVIgQlkgeyRkZy0+c29ydEJ5fSB7JGRnLT5zb3J0RGlyfSI7CgkJfQogCgkJJG1hc3RlclF1ZXJ5Lj0iICIuJGRnLT5nZXRMaW1pdFNxbCgpOyAvL2ZvciBwYWdpbmF0aW9uCgkJCgkJJHF1ZXJ5UmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkbWFzdGVyUXVlcnkpOwoKCQlmb3JlYWNoICgkcXVlcnlSZXN1bHRzIGFzICRyb3dPYmplY3QpCgkJeyAKCQkJLy8gY3JlYXRlIGFuIG9iamVjdCB0byByZXVzZSB3aGVuIGdlbmVyYXRpbmcgdGhlIGJpbGxpbmcgZGVzY3JpcHRpb24KCQkJLy8gTW92ZWQgaW50byBsb29wIGFzIHRoZSBzY29wZSBvZiB0aGlzIG9iamVjdCB3YXMgY2F1c2luZyBvdmVyd3JpdGluZyB3aGVuIGFib3ZlIHRoZSBmb3JlYWNoLgoJCQkkdG1wT3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgpOwoJCQkKCQkJaWYgKCRyb3dPYmplY3QtPmlzX2dpZnQgPT0gMSkKCQkJewoJCQkJJHJvd09iamVjdC0+YWNjZXNzX3R5cGUgPSAiZ2lmdCI7CgkJCX0KCQkJZWxzZSBpZiAoaXNfbnVsbCgkcm93T2JqZWN0LT5hY2Nlc3NfdHlwZSkgfHwgKCFpbl9hcnJheSgkcm93T2JqZWN0LT5hY2Nlc3NfdHlwZSwgYXJyYXkoTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCxNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9CVU5ETEUpKSkpCgkJCXsKCQkJCSRyb3dPYmplY3QtPmFjY2Vzc190eXBlID0gTU1fTk9fREFUQTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCS8vbm90IGEgZ2lmdCwgYW5kIGFjY2Vzc190eXBlIGlzIGVpdGhlciBtZW1iZXJzaGlwIG9yIGJ1bmRsZQoJCQkJaWYgKCgkcm93T2JqZWN0LT5hY2Nlc3NfdHlwZSA9PSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQKSAmJiAoIWlzX251bGwoJHJvd09iamVjdC0+bWVtYmVyc2hpcF9sZXZlbF9uYW1lKSkpCgkJCQl7CgkJCQkJJHJvd09iamVjdC0+YWNjZXNzX3R5cGVfbmFtZSA9ICRyb3dPYmplY3QtPm1lbWJlcnNoaXBfbGV2ZWxfbmFtZTsKCQkJCX0KCQkJCWVsc2UgaWYgKCgkcm93T2JqZWN0LT5hY2Nlc3NfdHlwZSA9PSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9CVU5ETEUpICYmICghaXNfbnVsbCgkcm93T2JqZWN0LT5idW5kbGVfbmFtZSkpKQoJCQkJewoJCQkJCSRyb3dPYmplY3QtPmFjY2Vzc190eXBlX25hbWUgPSAkcm93T2JqZWN0LT5idW5kbGVfbmFtZTsKCQkJCX0KCQkJfQoJCQkkcm93T2JqZWN0LT5wcm9kdWN0X25hbWUgPSAoaXNzZXQoJHJvd09iamVjdC0+cHJvZHVjdF9uYW1lKSAmJiAhaXNfbnVsbCgkcm93T2JqZWN0LT5wcm9kdWN0X25hbWUpKT8kcm93T2JqZWN0LT5wcm9kdWN0X25hbWU6TU1fTk9fREFUQTsKCQkJJHRtcE9yZGVySXRlbS0+c2V0RGF0YSgkcm93T2JqZWN0KTsKCQkJJHJvd09iamVjdC0+YmlsbGluZ19kZXNjcmlwdGlvbiA9ICR0bXBPcmRlckl0ZW0tPmdldEJpbGxpbmdEZXNjcmlwdGlvbihmYWxzZSk7CgkJfQoJCQoJCXJldHVybiAkcXVlcnlSZXN1bHRzOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVSb3dzKCRkYXRhLCAkcmVuZGVyRm9yQWRtaW49dHJ1ZSkKCXsKCQlnbG9iYWwgJGN1cnJlbnRfdXNlcjsKCQkkcm93cyA9IGFycmF5KCk7CgkJCgkJZm9yZWFjaCgkZGF0YSBhcyAkaXRlbSkKCQl7CgkJCSRiaWxsaW5nRGVzY3JpcHRpb24gPSAkaXRlbS0+YmlsbGluZ19kZXNjcmlwdGlvbjsKCQkJaWYoJHJlbmRlckZvckFkbWluKQoJCQl7CgkJCQkkZGF0ZUZvcm1hdCA9ICJNIGosIFkiOwoJCQkJJGlzQ2FyZE9uRmlsZSA9IGZhbHNlOwoJCQkJJHB5bXRTZXJ2aWNlID0gbnVsbDsKCQkJCQoJCQkJJG9yZGVySXRlbSA9IE1NX09yZGVySXRlbTo6Y3JlYXRlKCRpdGVtLT5vcmRlcl9pdGVtX2lkKTsKCQkJCQoJCQkJLy8gbmV4dCByZWJpbGwgZGF0ZQoJCQkJJG5leHRSZWJpbGxEYXRlID0gTU1fTk9fREFUQTsKCQkJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQlnbG9iYWwgJHdwZGI7CgkJCQkJCgkJCQkJJHNxbCA9ICR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgcGF5bWVudF9pZCBGUk9NICIuTU1fVEFCTEVfT1JERVJTLiIgV0hFUkUgaWQgPSAlcyBMSU1JVCAxIiwkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQkJCSRweW10U2VydmljZUlkID0gJHdwZGItPmdldF92YXIoJHNxbCk7CgkJCQkJCgkJCQkJaWYgKCRweW10U2VydmljZUlkICE9PSBmYWxzZSkKCQkJCQl7CgkJCQkJCSRweW10U2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2VCeUlkKCRweW10U2VydmljZUlkKTsKCQkJCQkJCQoJCQkJCQlpZigkcHltdFNlcnZpY2UtPnN1cHBvcnRzRmVhdHVyZShNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDQVJEX09OX0ZJTEUpKQoJCQkJCQl7CgkJCQkJCQlpZigkcHltdFNlcnZpY2UtPnN1cHBvcnRzRmVhdHVyZShNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpNT0RJRllfUkVCSUxMX0RBVEUpKQoJCQkJCQkJewoJCQkJCQkJCSRpc0NhcmRPbkZpbGUgPSB0cnVlOwoJCQkJCQkJCSRzY2hlZHVsZWRQYXltZW50RXZlbnQgPSBNTV9TY2hlZHVsZWRQYXltZW50RXZlbnQ6OmZpbmROZXh0U2NoZWR1bGVkRXZlbnRCeU9yZGVySXRlbUlkKCRvcmRlckl0ZW0tPmdldElkKCksZmFsc2UpOwoJCQkJCQkJCWlmICgkc2NoZWR1bGVkUGF5bWVudEV2ZW50LT5pc1ZhbGlkKCkpCgkJCQkJCQkJewoJCQkJCQkJCQkkbmV4dFJlYmlsbERhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHNjaGVkdWxlZFBheW1lbnRFdmVudC0+Z2V0U2NoZWR1bGVkRGF0ZSgpLCAkZGF0ZUZvcm1hdCk7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJZWxzZQoJCQkJCQkJewoJCQkJCQkJCSRzZXJ2aWNlTmFtZSA9ICRweW10U2VydmljZS0+Z2V0TmFtZSgpOwoJCQkJCQkJCSRiaWxsaW5nRGVzY3JpcHRpb24gPSAiPGk+U2VlIHskc2VydmljZU5hbWV9IGZvciBkZXRhaWxzLjwvaT4iOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQkvLyBBc3NvY2lhdGVkIEFjY2VzcwoJCQkJJGhhc0Fzc29jaWF0ZWRBY2Nlc3MgPSBmYWxzZTsKCQkJCSRhc3NvY2lhdGVkQWNjZXNzID0gTU1fTk9fREFUQTsKCQkJCWlmICghZW1wdHkoJGl0ZW0tPmFjY2Vzc190eXBlX25hbWUpICYmICFlbXB0eSgkaXRlbS0+YWNjZXNzX3R5cGUpKQoJCQkJewoJCQkJCSRoYXNBc3NvY2lhdGVkQWNjZXNzID0gdHJ1ZTsKCQkJCQkkYXNzb2NpYXRlZEFjY2VzcyA9IE1NX1V0aWxzOjpnZXRBY2Nlc3NJY29uKCRpdGVtLT5hY2Nlc3NfdHlwZSkuIiAiLk1NX1V0aWxzOjphYmJyZXZTdHJpbmcoJGl0ZW0tPmFjY2Vzc190eXBlX25hbWUpOwoJCQkJfQoJCQkJZWxzZSBpZighZW1wdHkoJGl0ZW0tPmFjY2Vzc190eXBlKSAmJiAkaXRlbS0+YWNjZXNzX3R5cGUgPT0gImdpZnQiKQoJCQkJewoJCQkJCSRoYXNBc3NvY2lhdGVkQWNjZXNzID0gdHJ1ZTsKCQkJCQkkYXNzb2NpYXRlZEFjY2VzcyA9IE1NX1V0aWxzOjpnZXRJY29uKCdnaWZ0JywgJ3B1cnBsZScsICcxLjNlbScsICcxcHgnKS4iIDxlbT5UaGlzIHN1YnNjcmlwdGlvbiBpcyBhIGdpZnQ8L2VtPiI7CgkJCQl9CgkJCQkKCQkJCS8vIFN0YXR1cwoJCQkJJHN0YXR1cyA9IE1NX05PX0RBVEE7CgkJCQlpZiAoIWVtcHR5KCRpdGVtLT5vcmRlcl9pdGVtX3N0YXR1cykpCgkJCQl7CgkJCQkJaWYoJGl0ZW0tPm9yZGVyX2l0ZW1fc3RhdHVzID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkcpCgkJCQkJewoJCQkJCQkkc3RhdHVzID0gTU1fU3RhdHVzOjpnZXRJbWFnZShNTV9TdGF0dXM6OiRBQ1RJVkUpOwoJCQkJCX0KCQkJCQllbHNlaWYgKCRpdGVtLT5vcmRlcl9pdGVtX3N0YXR1cyA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpCgkJCQkJewoJCQkJCQkkc3RhdHVzID0gTU1fU3RhdHVzOjpnZXRJbWFnZShNTV9TdGF0dXM6OiRPVkVSRFVFKTsKCQkJCQl9ZWxzZWlmICgkaXRlbS0+b3JkZXJfaXRlbV9zdGF0dXMgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19QRU5ESU5HX09WRVJEVUUpCgkJCQkJewoJCQkJCQkkcGVuZGluZ092ZXJkdWVEZXNjID0gIlRoaXMgc3Vic2NyaXB0aW9uIGlzIGluIHBlbmRpbmcgb3ZlcmR1ZSBzdGF0dXMuIFRoaXMgdXN1YWxseSBoYXBwZW5zIHdoZW4gdGhlIGNyZWRpdCBjYXJkIHVzZWQgYnkgdGhlIGN1c3RvbWVyICI7CgkJCQkJCSRwZW5kaW5nT3ZlcmR1ZURlc2MgLj0gIndpbGwgYmUgZXhwaXJlZCBieSB0aGUgdGltZSB0aGUgZmlyc3QgcmViaWxsIHdhcyBzY2hlZHVsZWQgdG8gaGFwcGVuLiBXaGVuIHRoZSBzY2hlZHVsZWQgcmViaWxsIGRhdGUgYXJyaXZlcyB0aGVpciAiOwoJCQkJCQkkcGVuZGluZ092ZXJkdWVEZXNjIC49ICJhY2Nlc3Mgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIG1hcmtlZCBhcyBvdmVyZHVlLiBJbiBvcmRlciB0byBrZWVwIHRoZWlyIGFjY2VzcywgdGhleSdsbCBoYXZlIHRvIHJlcHVyY2hhc2UgIjsKCQkJCQkJJHBlbmRpbmdPdmVyZHVlRGVzYyAuPSAidGhpcyBzdWJzY3JpcHRpb24gdXNpbmcgYSB2YWxpZCBjcmVkaXQgY2FyZC4iOwoJCQkJCQkkc3RhdHVzID0gTU1fVXRpbHM6OmdldEljb24oJ2Nsb2NrLW8nLCAnb3JhbmdlJywgJzEuM2VtJywgJzFweCcsICRwZW5kaW5nT3ZlcmR1ZURlc2MpOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJJGFjdGlvbnMgPSAiIjsKCQkJCQoJCQkJaWYoJGhhc0Fzc29jaWF0ZWRBY2Nlc3MpCgkJCQl7CgkJCQkJJGFjdGlvbnMgLj0gIjxhIGhyZWY9XCJqYXZhc2NyaXB0Om1tanMuY2FuY2VsU3Vic2NyaXB0aW9uQW5kQWNjZXNzKHskaXRlbS0+b3JkZXJfaXRlbV9pZH0pO1wiIHRpdGxlPSdDYW5jZWwgYmlsbGluZyBhbmQgYXNzb2NpYXRlZCBhY2Nlc3MnIHN0eWxlPSdtYXJnaW4tcmlnaHQ6NHB4Oyc+IjsKCQkJCQkkYWN0aW9ucyAuPSBNTV9VdGlsczo6Z2V0SWNvbignc3RvcCcsICdyZWQnLCAnMS4yZW0nLCAnMnB4Jyk7CgkJCQkJJGFjdGlvbnMgLj0gIjwvYT4iOwoJCQkJfQoJCQkJCgkJCQkkY2FuY2VsQmlsbGluZ0ljb25TdHlsZSA9ICJtYXJnaW4tcmlnaHQ6NnB4OyI7CgkJCQkKCQkJCWlmKCEkaGFzQXNzb2NpYXRlZEFjY2VzcykKCQkJCXsKCQkJCQkkY2FuY2VsQmlsbGluZ0ljb25TdHlsZSA9ICJtYXJnaW4tbGVmdDoyMXB4OyBtYXJnaW4tcmlnaHQ6NnB4OyI7CgkJCQl9CgkJCQkKCQkJCSRhY3Rpb25zIC49ICIgPGEgaHJlZj1cImphdmFzY3JpcHQ6bW1qcy5jYW5jZWxTdWJzY3JpcHRpb25Pbmx5KHskaXRlbS0+b3JkZXJfaXRlbV9pZH0pO1wiIHRpdGxlPSdDYW5jZWwgYmlsbGluZyBvbmx5JyBzdHlsZT0neyRjYW5jZWxCaWxsaW5nSWNvblN0eWxlfSc+IjsKCQkJCSRhY3Rpb25zIC49IE1NX1V0aWxzOjpnZXRJY29uKCdjcmVkaXQtY2FyZCcsICdyZWQnLCAnMS4yZW0nLCAnMnB4Jyk7CgkJCQkkYWN0aW9ucyAuPSAiPC9hPiI7CgkJCQkKCQkJCS8vIGFkZCBhZHZhbmNlZCBzdWJzY3JpcHRpb24gdG9vbHMgaWYgY3VycmVudCBzdWJzY3JpcHRpb24gaXMgYXNzb2NpYXRlZCB3aXRoIGEgY2FyZC1vbi1maWxlIHBheW1lbnQgc2VydmljZQoJCQkJLy8gYW5kIHRoZSBjdXN0b21lciBoYXMgYWNjZXNzIHRvIGFkdmFuY2VkIHN1YnNjcmlwdGlvbiBtZ210IGZlYXR1cmVzCgkJCQlpZigkaXNDYXJkT25GaWxlICYmIChNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokRkVBVFVSRV9BRFZfU1VCU0NSSVBUSU9OX01HTVQpID09IE1NX01lbWJlck1vdXNlU2VydmljZTo6JEFDVElWRSkpCgkJCQl7CgkJCQkJJGVkaXRBY3Rpb25VcmwgPSAiaHJlZj0namF2YXNjcmlwdDptbWpzLmVkaXRTdWJzY3JpcHRpb24oeyRpdGVtLT5vcmRlcl9pdGVtX2lkfSk7JyI7CgkJCQkJJGFjdGlvbnMgLj0gTU1fVXRpbHM6OmdldEVkaXRJY29uKCJFZGl0IFN1YnNjcmlwdGlvbiIsICcnLCAkZWRpdEFjdGlvblVybCk7CgkJCQl9CgkJCQllbHNlIGlmKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRGRUFUVVJFX0FEVl9TVUJTQ1JJUFRJT05fTUdNVCkgIT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKQoJCQkJewoJCQkJCSRhY3Rpb25zIC49IE1NX1V0aWxzOjpnZXRFZGl0SWNvbignQWRkaXRpb25hbCBzdWJzY3JpcHRpb24gbWFuYWdlbWVudCBmZWF0dXJlcyBhcmUgb25seSBhdmFpbGFibGUgb24gdGhlIEFkdmFuY2VkIHBsYW4gYW5kIGFib3ZlLiBWaXNpdCBtZW1iZXJtb3VzZS5jb20gdG8gdXBncmFkZSB5b3VyIHBsYW4uJywgJycsICcnLCB0cnVlKTsKCQkJCX0KCQkJCWVsc2UgaWYoISRpc0NhcmRPbkZpbGUgJiYgIWlzX251bGwoJHB5bXRTZXJ2aWNlKSkKCQkJCXsKCQkJCQkkYWN0aW9ucyAuPSBNTV9VdGlsczo6Z2V0RWRpdEljb24oIlRoaXMgc3Vic2NyaXB0aW9uIGlzIGJlaW5nIG1hbmFnZWQgYnkgeyRweW10U2VydmljZS0+Z2V0TmFtZSgpfS4gQWRkaXRpb25hbCBzdWJzY3JpcHRpb24gbWFuYWdlbWVudCBmZWF0dXJlcyBhcmUgb25seSBhdmFpbGFibGUgZm9yIHN1YnNjcmlwdGlvbnMgYmVpbmcgbWFuYWdlZCBieSBwYXltZW50IHNlcnZpY2VzIHdpdGggY2FyZC1vbi1maWxlIHN1cHBvcnQgKGkuZS4gU3RyaXBlLCBCcmFpbnRyZWUsIEF1dGhvcml6ZS5uZXQgQ0lNKS4iLCAnJywgJycsIHRydWUpOwoJCQkJfQoJCQkJCgkJCQkkY3JudFJvdyA9IGFycmF5CgkJCQkoCgkJCQkJYXJyYXkoICdjb250ZW50JyA9PiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJGl0ZW0tPmRhdGVfYWRkZWQsICRkYXRlRm9ybWF0KSksCgkJCQkJYXJyYXkoICdjb250ZW50JyA9PiAkc3RhdHVzKSwKCQkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICRhc3NvY2lhdGVkQWNjZXNzKSwKCQkJCQlhcnJheSggJ2NvbnRlbnQnID0+IE1NX1V0aWxzOjphYmJyZXZTdHJpbmcoJGl0ZW0tPnByb2R1Y3RfbmFtZSkpLAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gJGJpbGxpbmdEZXNjcmlwdGlvbiksCgkJCQkJYXJyYXkoICdjb250ZW50JyA9PiAkbmV4dFJlYmlsbERhdGUpLAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gJGFjdGlvbnMsICJhdHRyIiA9PiAibm93cmFwIikKCQkJCSk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJGRhdGVGb3JtYXQgPSAiTSBqLCBZIjsKCQkJCQoJCQkJJHByb2R1Y3ROYW1lID0gIiI7CgkJCQlpZighZW1wdHkoJGl0ZW0tPmFjY2Vzc190eXBlKSAmJiAkaXRlbS0+YWNjZXNzX3R5cGUgPT0gImdpZnQiKQoJCQkJewoJCQkJCSRwcm9kdWN0TmFtZSAuPSBNTV9VdGlsczo6Z2V0SWNvbignZ2lmdCcsICdwdXJwbGUnLCAnMS4zZW0nLCAnMXB4JywgJ1RoaXMgc3Vic2NyaXB0aW9uIGlzIGEgZ2lmdCcsICdtYXJnaW4tcmlnaHQ6NHB4OycpOwoJCQkJfQoJCQkJJHByb2R1Y3ROYW1lIC49ICRpdGVtLT5wcm9kdWN0X25hbWU7CQoJCQkJCQkJCgkJCQkvLyBEZXRlcm1pbmUgaWYgdXBkYXRlIGJpbGxpbmcgZGV0YWlscyBsaW5rIHNob3VsZCBiZSBhZGRlZCBiYXNlZCBvbiB0aGUgcGF5bWVudCBtZXRob2QgdXNlZCB0byBwdXJjaGFzZSB0aGUKCQkJCS8vIHN1YnNjcmlwdGlvbi4gT25seSBvbnNpdGUgbWV0aG9kcyBzaG91bGQgYWxsb3cgdGhpcy4KCQkJCSRwYXltZW50TWV0aG9kID0gbnVsbDsKCQkJCSRvcmRlckl0ZW0gPSBNTV9PcmRlckl0ZW06OmNyZWF0ZSgkaXRlbS0+b3JkZXJfaXRlbV9pZCk7CgkJCQkkYWN0aW9ucyA9ICIiOwoJCQkJCgkJCQlpZigkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCQkJCgkJCQkJaWYoJG9yZGVyLT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQkkcGF5bWVudE1ldGhvZCA9ICRvcmRlci0+Z2V0UGF5bWVudE1ldGhvZCgpOwoJCQkJCX0KCgkJCQkJaWYoIWlzX251bGwoJHBheW1lbnRNZXRob2QpICYmICRwYXltZW50TWV0aG9kLT5zdXBwb3J0c0ZlYXR1cmUoTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6T05TSVRFX1NFUlZJQ0UpCgkJCQkJCSYmICRvcmRlckl0ZW0tPmdldFN0YXR1cygpICE9IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUEVORElOR19PVkVSRFVFKQoJCQkJCXsKCQkJCQkJJGFjdGlvbnMgLj0gIjxhIGhyZWY9XCJqYXZhc2NyaXB0Om15YWNjb3VudF9qcy51cGRhdGVTdWJzY3JpcHRpb25JbmZvKHskY3VycmVudF91c2VyLT5JRH0sIHskb3JkZXJJdGVtLT5nZXRJZCgpfSk7XCIgY2xhc3M9XCJtbS11cGRhdGUtc3Vic2NyaXB0aW9uLWJ1dHRvblwiPnVwZGF0ZSBiaWxsaW5nIGRldGFpbHM8L2E+IHwgIjsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWlmKCFlbXB0eSgkaXRlbS0+YWNjZXNzX3R5cGUpICYmICRpdGVtLT5hY2Nlc3NfdHlwZSA9PSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQKQoJCQkJewkKCQkJCQkkYWN0aW9ucyAuPSAiPGEgaHJlZj1cIiIuTU1fQ29yZVBhZ2VFbmdpbmU6OmdldFVybChNTV9Db3JlUGFnZVR5cGU6OiRTQVZFVEhFU0FMRSkuIlwiIGNsYXNzPVwibW0tY2FuY2VsLXN1YnNjcmlwdGlvbi1idXR0b25cIj5jYW5jZWw8L2E+IjsKCQkJCX0KCQkJCWVsc2UgaWYoIWVtcHR5KCRpdGVtLT5hY2Nlc3NfdHlwZSkgJiYgKCRpdGVtLT5hY2Nlc3NfdHlwZSA9PSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9CVU5ETEUgfHwgJGl0ZW0tPmFjY2Vzc190eXBlID09ICJnaWZ0IikpCgkJCQl7CgkJCQkJJGFjdGlvbnMgLj0gIjxhIGhyZWY9XCJqYXZhc2NyaXB0Om15YWNjb3VudF9qcy5jYW5jZWxTdWJzY3JpcHRpb24oeyRpdGVtLT5vcmRlcl9pdGVtX2lkfSk7XCIgY2xhc3M9XCJtbS1jYW5jZWwtc3Vic2NyaXB0aW9uLWJ1dHRvblwiPmNhbmNlbDwvYT4iOwoJCQkJfQoJCQkJCgkJCQkkc3RhdHVzID0gIiI7CgkJCQlpZigkaXRlbS0+b3JkZXJfaXRlbV9zdGF0dXMgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCQkJewoJCQkJCSRzdGF0dXMgPSBNTV9VdGlsczo6Z2V0SWNvbignd2FybmluZycsICd5ZWxsb3cnLCAnMS4zZW0nLCAnMnB4JywgJ1RoaXMgc3Vic2NyaXB0aW9uIGlzIG92ZXJkdWUnKTsKCQkJCX0KCQkJCQoJCQkJJGNybnRSb3cgPSBhcnJheQoJCQkJKAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCRpdGVtLT5kYXRlX2FkZGVkLCAkZGF0ZUZvcm1hdCkpLAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gJHByb2R1Y3ROYW1lKSwKCQkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICRiaWxsaW5nRGVzY3JpcHRpb24pLAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gJGFjdGlvbnMpLAoJCQkJCWFycmF5KCAnY29udGVudCcgPT4gJHN0YXR1cykKCQkJCSk7CgkJCX0KCQkJCgkJCSRyb3dzW10gPSAkY3JudFJvdzsKCQl9CgkJCgkJcmV0dXJuICRyb3dzOwoJfQp9Cg==', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(208, 'currencyutil', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogQ3VycmVuY3lVdGlsIHByb3ZpZGVzIG1ldGhvZHMgdG8gZW5hYmxlIHByb3BlciBkaXNwbGF5IG9mIGludGVybmF0aW9uYWwgY3VycmVuY2llcy4KICoKICogVGhlIGZvcm1hdCBmdW5jdGlvbiB3YXMgYWRhcHRlZCBmcm9tIHRoZSBwdWJsaWMgZG9tYWluIG1vbmV5X2Zvcm1hdCBpbiB0aGUgY29tbWVudHMgbG9jYXRlZCBhdCBodHRwOi8vcGhwLm5ldC9tYW51YWwvZW4vZnVuY3Rpb24ubW9uZXktZm9ybWF0LnBocCAKICovCgpjbGFzcyBNTV9DdXJyZW5jeVV0aWwgCnsKCQoJcHJvdGVjdGVkIHN0YXRpYyAkY3VycmVuY2llcyA9IG51bGw7CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gX19pbml0aWFsaXplQ3VycmVuY3lGb3JtYXRzKCkKCXsKCQkvLyBDdXJyZW5jeSBGb3JtYXQgQWRqdXN0bWVudHMKCQkvLyBDQUQsIFBMTiwgTk9LLCBRQVIgKDUvNi8yMDE0KQoJCQoJCS8vd29ybGQncyAxMCBtb3N0IHRyYWRlZCBjdXJyZW5jaWVzIChhcyBvZiBTZXB0LiAyMDEzKQoJCXNlbGY6OiRjdXJyZW5jaWVzWydVU0QnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1VuaXRlZCBTdGF0ZXMgRG9sbGFyJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzg1OyYjODM7JiM2ODsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJCcsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snQ0FEJ10gPSBhcnJheSAoJ25hbWUnID0+ICdDYW5hZGlhbiBEb2xsYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjc7JiM2NTsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydFVVInXSA9IGFycmF5ICgnbmFtZScgPT4gJ0V1cm8nLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNDU7JiM1NTsmIzUyOyYjMjA7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmZXVybzsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0pQWSddID0gYXJyYXkgKCduYW1lJyA9PiAnSmFwYW5lc2UgWWVuJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc0OyYjODA7JiM4OTsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM2NTUwOTsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcwJywgICdmcmFjX2RpZ2l0cycgPT4gJzAnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnNCcsICAnbl9zaWduX3Bvc24nID0+ICc0JywgICdpbnRfcF9zZXBfYnlfc3BhY2UnID0+ICcyJywgICdpbnRfbl9zZXBfYnlfc3BhY2UnID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydHQlAnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1VuaXRlZCBLaW5nZG9tIFBvdW5kJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzcxOyYjNjY7JiM4MDsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJnBvdW5kOycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snQ0hGJ10gPSBhcnJheSAoJ25hbWUnID0+ICdTd2lzcyBGcmFuYycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NzsmIzcyOyYjNzA7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJ0NIRicsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJyYjMzk7JywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICc0JywgICduX3NpZ25fcG9zbicgPT4gJzQnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0FVRCddID0gYXJyYXkgKCduYW1lJyA9PiAnQXVzdHJhbGlhbiBEb2xsYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjU7JiM4NTsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydTRUsnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1N3ZWRpc2ggS3JvbmEnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODM7JiM2OTsmIzc1OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzEwNzsmIzExNDsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcgJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0hLRCddID0gYXJyYXkgKCduYW1lJyA9PiAnSG9uZyBLb25nIERvbGxhcicsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3MjsmIzc1OyYjNjg7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjNzI7JiM3NTsmIzM2OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzAnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ05PSyddID0gYXJyYXkgKCduYW1lJyA9PiAnTm9yd2VnaWFuIEtyb25lJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgzOyYjNjk7JiM3NTsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMDc7JiMxMTQ7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnNCcsICAnbl9zaWduX3Bvc24nID0+ICc0JywpOwoJCQoJCS8vb3RoZXIgY3VycmVuY2llcwoJCXNlbGY6OiRjdXJyZW5jaWVzWydBRUQnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0VtaXJhdGkgRGlyaGFtJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzY1OyYjNjk7JiM2ODsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxNTgzOyYjNDY7JiMxNTczOyYjNDY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMycsICAnZnJhY19kaWdpdHMnID0+ICczJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMicsKTsKCQlzZWxmOjokY3VycmVuY2llc1snQUxMJ10gPSBhcnJheSAoJ25hbWUnID0+ICdBbGJhbmlhbiBMZWsnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjU7JiM3NjsmIzc2OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzc2OyYjMTAxOyYjMTA3OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJy4nLCAgJ21vbl9ncm91cGluZycgPT4gJzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMycsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0FNRCddID0gYXJyYXkgKCduYW1lJyA9PiAnQXJtZW5pYW4gRHJhbScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NTsmIzc3OyYjNjg7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMTMzMjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0FSUyddID0gYXJyYXkgKCduYW1lJyA9PiAnQXJnZW50aW5lIFBlc28nLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjU7JiM4MjsmIzgzOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydBWk4nXSA9IGFycmF5ICgnbmFtZScgPT4gJ0F6ZXJiYWlqYW5pIE5ldyBNYW5hdCcsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NTsmIzkwOyYjNzc7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMTA5OyYjOTc7JiMxMTA7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcgJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0JBTSddID0gYXJyYXkgKCduYW1lJyA9PiAnQm9zbmlhbiBDb252ZXJ0aWJsZSBNYXJrYScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NjsmIzY1OyYjNzc7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjNzU7JiM3NzsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcgJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0JEVCddID0gYXJyYXkgKCduYW1lJyA9PiAnQmFuZ2xhZGVzaGkgVGFrYScsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMyNTQ3OycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NjsmIzY4OyYjODQ7JiMzMjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzInLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0JHTiddID0gYXJyYXkgKCduYW1lJyA9PiAnQnVsZ2FyaWFuIExldicsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NjsmIzcxOyYjNzg7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMTA4MzsmIzEwNzQ7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnJiMxNjA7JywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0JIRCddID0gYXJyYXkgKCduYW1lJyA9PiAnQmFocmFpbmkgRGluYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjY7JiM3MjsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODM7JiM0NjsmIzE1NzY7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICczJywgICdmcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydCT0InXSA9IGFycmF5ICgnbmFtZScgPT4gJ0JvbGl2aWFuIEJvbGl2aWFubycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NjsmIzc5OyYjNjY7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMzY7JiM5ODsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcuJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0JSTCddID0gYXJyYXkgKCduYW1lJyA9PiAnQnJhemlsaWFuIFJlYWwnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjY7JiM4MjsmIzc2OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgyOyYjMzY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydCV1AnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0JvdHN3YW5hIFB1bGEnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjY7JiM4NzsmIzgwOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgwOyYjMTE3OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snQllSJ10gPSBhcnJheSAoJ25hbWUnID0+ICdCZWxhcnVzaWFuIFJ1YmxlJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzY2OyYjODk7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMDg4OyYjMTA5MTsmIzEwNzM7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnICcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydDTFAnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0NoaWxlYW4gUGVzbycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NzsmIzc2OyYjODA7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyQnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcuJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0NOWSddID0gYXJyYXkgKCduYW1lJyA9PiAnQ2hpbmVzZSBZdWFuIFJlbm1pbmJpJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzY3OyYjNzg7JiM4OTsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM2NTUwOTsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ2ludF9wX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnaW50X3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnaW50X25fY3NfcHJlY2VkZXMnID0+ICcxJywgICdpbnRfbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzQnLCAgJ25fc2lnbl9wb3NuJyA9PiAnNCcsICAnaW50X3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnaW50X25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snQ09QJ10gPSBhcnJheSAoJ25hbWUnID0+ICdDb2xvbWJpYW4gUGVzbycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2NzsmIzc5OyYjODA7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyQnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcuJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0NSQyddID0gYXJyYXkgKCduYW1lJyA9PiAnQ29zdGEgUmljYW4gQ29sb24nLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjc7JiM4MjsmIzY3OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzY3OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snQ1pLJ10gPSBhcnJheSAoJ25hbWUnID0+ICdDemVjaCBLb3J1bmEnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjc7JiM5MDsmIzc1OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzc1OyYjMjY5OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJyYjMTYwOycsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydESkYnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0RqaWJvdXRpYW4gRnJhbmMnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjg7JiM3NDsmIzcwOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnICcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydES0snXSA9IGFycmF5ICgnbmFtZScgPT4gJ0RhbmlzaCBLcm9uZScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2ODsmIzc1OyYjNzU7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMTA3OyYjMTE0OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJy4nLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcyJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcyJywgICdwX3NpZ25fcG9zbicgPT4gJzQnLCAgJ25fc2lnbl9wb3NuJyA9PiAnNCcsKTsKCQlzZWxmOjokY3VycmVuY2llc1snRE9QJ10gPSBhcnJheSAoJ25hbWUnID0+ICdEb21pbmljYW4gUGVzbycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2ODsmIzc5OyYjODA7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyQnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0RaRCddID0gYXJyYXkgKCduYW1lJyA9PiAnQWxnZXJpYW4gRGluYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjg7JiM5MDsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODM7JiM0NjsmIzE1ODA7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICczJywgICdmcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydFR1AnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0VneXB0aWFuIFBvdW5kJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzY5OyYjNzE7JiM4MDsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxNTgwOyYjNDY7JiMxNjA1OyYjNDY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMycsICAnZnJhY19kaWdpdHMnID0+ICczJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMicsKTsKCQlzZWxmOjokY3VycmVuY2llc1snRVJOJ10gPSBhcnJheSAoJ25hbWUnID0+ICdFcml0cmVhbiBOYWtmYScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM2OTsmIzgyOyYjNzg7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyQnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzAnLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMCcsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0VUQiddID0gYXJyYXkgKCduYW1lJyA9PiAnRXRoaW9waWFuIEJpcnInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNjk7JiM4NDsmIzY2OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwkKCQlzZWxmOjokY3VycmVuY2llc1snR0VMJ10gPSBhcnJheSAoJ25hbWUnID0+ICdHZW9yZ2lhbiBMYXJpJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzcxOyYjNjk7JiM3NjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM0MzE0OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJy4nLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snR1RRJ10gPSBhcnJheSAoJ25hbWUnID0+ICdHdWF0ZW1hbGFuIFF1ZXR6YWwnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzE7JiM4NDsmIzgxOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgxOycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snSE5MJ10gPSBhcnJheSAoJ25hbWUnID0+ICdIb25kdXJhbiBMZW1waXJhJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzcyOyYjNzg7JiM3NjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM3NjsmIzQ2OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snSFJLJ10gPSBhcnJheSAoJ25hbWUnID0+ICdDcm9hdGlhbiBLdW5hJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzcyOyYjODI7JiM3NTsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM3NTsmIzExMDsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcgJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0hVRiddID0gYXJyYXkgKCduYW1lJyA9PiAnSHVuZ2FyaWFuIEZvcmludCcsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3MjsmIzg1OyYjNzA7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjNzA7JiMxMTY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ludF9wX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnaW50X3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnaW50X25fY3NfcHJlY2VkZXMnID0+ICcxJywgICdpbnRfbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdpbnRfcF9zaWduX3Bvc24nID0+ICcxJywgICdpbnRfbl9zaWduX3Bvc24nID0+ICcxJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snSURSJ10gPSBhcnJheSAoJ25hbWUnID0+ICdJbmRvbmVzaWFuIFJ1cGlhaCcsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3MzsmIzY4OyYjODI7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjODI7JiMxMTI7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydJTFMnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0lzcmFlbGkgU2hla2VsJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzczOyYjNzY7JiM4MzsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM4MzYyOycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzInLCAgJ25fc2lnbl9wb3NuJyA9PiAnMicsKTsKCQlzZWxmOjokY3VycmVuY2llc1snSU5SJ10gPSBhcnJheSAoJ25hbWUnID0+ICdJbmRpYW4gUnVwZWUnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzM7JiM3ODsmIzgyOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgzNzc7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzsyJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydJUUQnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0lyYXFpIERpbmFyJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzczOyYjODE7JiM2ODsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxNTgzOyYjNDY7JiMxNTkzOyYjNDY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMycsICAnZnJhY19kaWdpdHMnID0+ICczJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMicsKTsKCQlzZWxmOjokY3VycmVuY2llc1snSVJSJ10gPSBhcnJheSAoJ25hbWUnID0+ICdJcmFuaWFuIFJpYWwnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzM7JiM4MjsmIzgyOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODU7JiMxNzQwOyYjMTU3NTsmIzE2MDQ7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJyYjMTY0MzsnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnJiMxNjQ0OycsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMCcsICAnZnJhY19kaWdpdHMnID0+ICcwJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsICAnaW50X3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdpbnRfcF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdpbnRfbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ2ludF9uX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ2ludF9wX3NpZ25fcG9zbicgPT4gJzEnLCAgJ2ludF9uX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0lTSyddID0gYXJyYXkgKCduYW1lJyA9PiAnSWNlbGFuZGljIEtyb25hJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzczOyYjODM7JiM3NTsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMDc7JiMxMTQ7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcwJywgICdmcmFjX2RpZ2l0cycgPT4gJzAnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydKT0QnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0pvcmRhbmlhbiBEaW5hcicsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3NDsmIzc5OyYjNjg7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMTU4MzsmIzQ2OyYjMTU3MTsmIzQ2OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMycsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzInLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0tFUyddID0gYXJyYXkgKCduYW1lJyA9PiAnS2VueWFuIFNoaWxsaW5nJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc1OyYjNjk7JiM4MzsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM3NTsmIzExNTsmIzEwNDsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0tHUyddID0gYXJyYXkgKCduYW1lJyA9PiAnS3lyZ3l6c3RhbmkgU29tJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc1OyYjNzE7JiM4MzsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMDg5OyYjMTA4NjsmIzEwODQ7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnICcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydLSFInXSA9IGFycmF5ICgnbmFtZScgPT4gJ0NhbWJvZGlhbiBSaWVsJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc1OyYjNzI7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM2MTA3OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsICAnaW50X3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdpbnRfcF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdpbnRfbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ2ludF9uX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ2ludF9wX3NpZ25fcG9zbicgPT4gJzEnLCAgJ2ludF9uX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0tSVyddID0gYXJyYXkgKCduYW1lJyA9PiAnU291dGggS29yZWFuIFdvbicsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3NTsmIzgyOyYjODc7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjNjU1MTA7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcwJywgICdmcmFjX2RpZ2l0cycgPT4gJzAnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICc0JywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydLV0QnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0t1d2FpdGkgRGluYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzU7JiM4NzsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODM7JiM0NjsmIzE2MDM7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICczJywgICdmcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydLWlQnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0themFraHN0YW5pIFRlbmdlJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc1OyYjOTA7JiM4NDsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMDkwOyYjMTA3NTsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcgJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0xBSyddID0gYXJyYXkgKCduYW1lJyA9PiAnTGFvdGlhbiBLaXAnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzY7JiM2NTsmIzc1OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgzNjU7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzInLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzInLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnNCcsICAnbl9zaWduX3Bvc24nID0+ICc0JywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydMQlAnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0xlYmFuZXNlIFBvdW5kJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc2OyYjNjY7JiM4MDsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxNjA0OyYjNDY7JiMxNjA0OyYjNDY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMycsICAnZnJhY19kaWdpdHMnID0+ICczJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMicsKTsKCQlzZWxmOjokY3VycmVuY2llc1snTEtSJ10gPSBhcnJheSAoJ25hbWUnID0+ICdTcmkgTGFua2FuIFJ1cGVlJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc2OyYjNzU7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM4MzYwOycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ0xUTCddID0gYXJyYXkgKCduYW1lJyA9PiAnTGl0aHVhbmlhbiBMaXRhcycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3NjsmIzg0OyYjNzY7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjNzY7JiMxMTY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydMVkwnXSA9IGFycmF5ICgnbmFtZScgPT4gJ0xhdHZpYW4gTGF0JywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc2OyYjODY7JiM3NjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM3NjsmIzExNTsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcmIzE2MDsnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzMnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMycsKTsKCQlzZWxmOjokY3VycmVuY2llc1snTFlEJ10gPSBhcnJheSAoJ25hbWUnID0+ICdMaWJ5YW4gRGluYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzY7JiM4OTsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODM7JiM0NjsmIzE2MDQ7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICczJywgICdmcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydNQUQnXSA9IGFycmF5ICgnbmFtZScgPT4gJ01vcm9jY2FuIERpcmhhbScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3NzsmIzY1OyYjNjg7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMTU4MzsmIzQ2OyYjMTYwNTsmIzQ2OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMycsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzInLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ01HQSddID0gYXJyYXkgKCduYW1lJyA9PiAnTWFsYWdhc3kgQXJpYXJ5JywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc3OyYjNzE7JiM2NTsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM2NTsmIzgyOycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJyAnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snTUtEJ10gPSBhcnJheSAoJ25hbWUnID0+ICdNYWNlZG9uaWFuIERlbmFyJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc3OyYjNzU7JiM2ODsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMDc2OyYjMTA3NzsmIzEwODU7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnICcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydNTlQnXSA9IGFycmF5ICgnbmFtZScgPT4gJ01vbmdvbGlhbiBUdWdocmlrJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc3OyYjNzg7JiM4NDsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM4MzY2OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJyAnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snTVhOJ10gPSBhcnJheSAoJ25hbWUnID0+ICdNZXhpY2FuIFBlc28nLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzc7JiM4ODsmIzc4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydNWVInXSA9IGFycmF5ICgnbmFtZScgPT4gJ01hbGF5c2lhbiBSaW5nZ2l0JywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc3OyYjODk7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM4MjsmIzc3OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzAnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ05JTyddID0gYXJyYXkgKCduYW1lJyA9PiAnTmljYXJhZ3VhbiBDb3Jkb2JhJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzc4OyYjNzM7JiM3OTsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMzNjsmIzY3OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snTlBSJ10gPSBhcnJheSAoJ25hbWUnID0+ICdOZXBhbGVzZSBSdXBlZScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM3MzsmIzc4OyYjODI7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMjM1MjsmIzIzNzA7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snTlpEJ10gPSBhcnJheSAoJ25hbWUnID0+ICdOZXcgWmVhbGFuZCBEb2xsYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzg7JiM5MDsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydPTVInXSA9IGFycmF5ICgnbmFtZScgPT4gJ09tYW5pIFJpYWwnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjNzk7JiM3NzsmIzgyOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODU7JiM0NjsmIzE1OTM7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICczJywgICdmcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydQQUInXSA9IGFycmF5ICgnbmFtZScgPT4gJ1BhbmFtYW5pYW4gQmFsYm9hJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgwOyYjNjU7JiM2NjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM2NjsmIzQ3OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJywnLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snUEVOJ10gPSBhcnJheSAoJ25hbWUnID0+ICdQZXJ1dmlhbiBOdWV2byBTb2wnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODA7JiM2OTsmIzc4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgzOyYjNDc7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydQSFAnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1BoaWxpcHBpbmUgUGVzbycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM4MDsmIzcyOyYjODA7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjODA7JiMxMDQ7JiM4MDsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1BLUiddID0gYXJyYXkgKCduYW1lJyA9PiAnUGFraXN0YW5pIFJ1cGVlJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgwOyYjNzU7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM4MjsmIzExNTsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcyJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1BMTiddID0gYXJyYXkgKCduYW1lJyA9PiAnUG9saXNoIFpsb3R5JywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgwOyYjNzY7JiM3ODsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMjI7JiMzMjI7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydQWUcnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1BhcmFndWF5YW4gR3VhcmFuaScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM4MDsmIzg5OyYjNzE7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjNzE7JiMxMTU7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcuJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1FBUiddID0gYXJyYXkgKCduYW1lJyA9PiAnUWF0YXJpIFJpeWFsJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgxOyYjNjU7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM4MTsmIzY1OyYjODI7JiMzMjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydST04nXSA9IGFycmF5ICgnbmFtZScgPT4gJ1JvbWFuaWFuIE5ldyBMZXUnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODI7JiM3OTsmIzc4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzc2OyYjMTAxOyYjMTA1OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJy4nLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snUlVCJ10gPSBhcnJheSAoJ25hbWUnID0+ICdSdXNzaWFuIFJ1YmxlJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgyOyYjODU7JiM2NjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMDg4OyYjMTA5MTsmIzEwNzM7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnICcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydSV0YnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1J3YW5kYW4gRnJhbmMnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODI7JiM4NzsmIzcwOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzcwOyYjMTE0OyYjMTE5OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJy4nLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snU0FSJ10gPSBhcnJheSAoJ25hbWUnID0+ICdTYXVkaSBBcmFiaWFuIFJpeWFsJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgzOyYjNjU7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxNTg1OyYjMTYxMDsmIzE1NzU7JiMxNjA0OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcuJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJycsICAnbW9uX2dyb3VwaW5nJyA9PiAnLTEnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1NERyddID0gYXJyYXkgKCduYW1lJyA9PiAnU3VkYW5lc2UgUG91bmQnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODM7JiM2ODsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODA7JiM0NjsmIzE1ODc7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICczJywgICdmcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydTR0QnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1NpbmdhcG9yZSBEb2xsYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODM7JiM3MTsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMCcsKTsKCQlzZWxmOjokY3VycmVuY2llc1snU09TJ10gPSBhcnJheSAoJ25hbWUnID0+ICdTb21hbGkgU2hpbGxpbmcnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODM7JiM3OTsmIzgzOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICckJywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydTVkMnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1NhbHZhZG9yYW4gQ29sb24nLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODM7JiM4NjsmIzY3OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmY2VudDsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1NZUCddID0gYXJyYXkgKCduYW1lJyA9PiAnU3lyaWFuIFBvdW5kJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzgzOyYjODk7JiM4MDsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxNjA0OyYjNDY7JiMxNTg3OyYjNDY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMycsICAnZnJhY19kaWdpdHMnID0+ICczJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMicsKTsKCQlzZWxmOjokY3VycmVuY2llc1snVEhCJ10gPSBhcnJheSAoJ25hbWUnID0+ICdUaGFpIEJhaHQnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODQ7JiM3MjsmIzY2OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzM2NDc7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcyJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcyJywgICdwX3NpZ25fcG9zbicgPT4gJzQnLCAgJ25fc2lnbl9wb3NuJyA9PiAnNCcsKTsKCQlzZWxmOjokY3VycmVuY2llc1snVEpTJ10gPSBhcnJheSAoJ25hbWUnID0+ICdUYWppa2lzdGFuaSBTb21vbmknLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODQ7JiM3NDsmIzgzOyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzEwODg7JiMxMDkxOyYjMTA3MzsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcgJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzAnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1RORCddID0gYXJyYXkgKCduYW1lJyA9PiAnVHVuaXNpYW4gRGluYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODQ7JiM3ODsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzE1ODM7JiM0NjsmIzE1Nzg7JiM0NjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICczJywgICdmcmFjX2RpZ2l0cycgPT4gJzMnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcyJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydUUlknXSA9IGFycmF5ICgnbmFtZScgPT4gJ1R1cmtpc2ggTGlyYScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM4NDsmIzgyOyYjODk7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgzNzg7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydUV0QnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1RhaXdhbiBOZXcgRG9sbGFyJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzg0OyYjODc7JiM2ODsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM3ODsmIzg0OyYjMzY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdpbnRfcF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ2ludF9wX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ2ludF9uX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnaW50X25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCAgJ2ludF9wX3NpZ25fcG9zbicgPT4gJzEnLCAgJ2ludF9uX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1VBSCddID0gYXJyYXkgKCduYW1lJyA9PiAnVWtyYWluaWFuIEhyeXZuYScsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM4NTsmIzY1OyYjNzI7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyYjMTA3NTsmIzEwODg7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnICcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcwJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzEnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydVR1gnXSA9IGFycmF5ICgnbmFtZScgPT4gJ1VnYW5kYW4gU2hpbGxpbmcnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODU7JiM3MTsmIzg4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzQ3OyYjNDU7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICclJyA9PiAndmFsdWVzLicsICAncF9zZXBfYnlfc3BhY2UnID0+ICcwJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMCcsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcwJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snVVlVJ10gPSBhcnJheSAoJ25hbWUnID0+ICdVcnVndWF5YW4gUGVzbycsICAnaW50X2N1cnJfc3ltYm9sJyA9PiAnJiM4NTsmIzg5OyYjODU7JiMzMjsnLCAgJ2N1cnJlbmN5X3N5bWJvbCcgPT4gJyQnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLCcsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcuJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMScsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMScsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1VaUyddID0gYXJyYXkgKCduYW1lJyA9PiAnVXpiZWtpc3RhbmkgU29tJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzg1OyYjOTA7JiM4MzsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxMTU7JiMxMTE7JiMzOTsmIzEwOTsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1ZFRiddID0gYXJyYXkgKCduYW1lJyA9PiAnVmVuZXp1ZWxhbiBCb2xpdmFyJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzg2OyYjNjk7JiM2NjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM2NjsmIzExNTsmIzQ2OycsICAnbW9uX2RlY2ltYWxfcG9pbnQnID0+ICcsJywgICdtb25fdGhvdXNhbmRzX3NlcCcgPT4gJy4nLCAgJ21vbl9ncm91cGluZycgPT4gJzM7MycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMicsICAnZnJhY19kaWdpdHMnID0+ICcyJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMScsKTsKCQlzZWxmOjokY3VycmVuY2llc1snVk5EJ10gPSBhcnJheSAoJ25hbWUnID0+ICdWaWV0bmFtZXNlIERvbmcnLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjODY7JiM3ODsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzgzNjM7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJywnLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLicsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICc0JywgICdmcmFjX2RpZ2l0cycgPT4gJzQnLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcwJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJCXNlbGY6OiRjdXJyZW5jaWVzWydZRVInXSA9IGFycmF5ICgnbmFtZScgPT4gJ1llbWVuaSBSaWFsJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzg5OyYjNjk7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiMxNTg1OyYjNDY7JiMxNjEwOyYjNDY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMycsICAncG9zaXRpdmVfc2lnbicgPT4gJycsICAnbmVnYXRpdmVfc2lnbicgPT4gJycsICAnaW50X2ZyYWNfZGlnaXRzJyA9PiAnMycsICAnZnJhY19kaWdpdHMnID0+ICczJywgICdwX2NzX3ByZWNlZGVzJyA9PiAnMScsICAncF9zZXBfYnlfc3BhY2UnID0+ICcxJywgICduX2NzX3ByZWNlZGVzJyA9PiAnMScsICAnbl9zZXBfYnlfc3BhY2UnID0+ICcxJywgICdwX3NpZ25fcG9zbicgPT4gJzEnLCAgJ25fc2lnbl9wb3NuJyA9PiAnMicsKTsKCQlzZWxmOjokY3VycmVuY2llc1snWkFSJ10gPSBhcnJheSAoJ25hbWUnID0+ICdTb3V0aCBBZnJpY2FuIFJhbmQnLCAgJyUnID0+ICctJywgICdpbnRfY3Vycl9zeW1ib2wnID0+ICcmIzkwOyYjNjU7JiM4MjsmIzMyOycsICAnY3VycmVuY3lfc3ltYm9sJyA9PiAnJiM4MjsnLCAgJ21vbl9kZWNpbWFsX3BvaW50JyA9PiAnLicsICAnbW9uX3Rob3VzYW5kc19zZXAnID0+ICcsJywgICdtb25fZ3JvdXBpbmcnID0+ICczOzMnLCAgJ3Bvc2l0aXZlX3NpZ24nID0+ICcnLCAgJ25lZ2F0aXZlX3NpZ24nID0+ICcnLCAgJ2ludF9mcmFjX2RpZ2l0cycgPT4gJzInLCAgJ2ZyYWNfZGlnaXRzJyA9PiAnMicsICAncF9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ3Bfc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAnbl9jc19wcmVjZWRlcycgPT4gJzEnLCAgJ25fc2VwX2J5X3NwYWNlJyA9PiAnMCcsICAncF9zaWduX3Bvc24nID0+ICcxJywgICduX3NpZ25fcG9zbicgPT4gJzEnLCk7CgkJc2VsZjo6JGN1cnJlbmNpZXNbJ1pXRCddID0gYXJyYXkgKCduYW1lJyA9PiAnWmltYmFid2VhbiBEb2xsYXInLCAgJ2ludF9jdXJyX3N5bWJvbCcgPT4gJyYjOTA7JiM4NzsmIzY4OyYjMzI7JywgICdjdXJyZW5jeV9zeW1ib2wnID0+ICcmIzkwOyYjMzY7JywgICdtb25fZGVjaW1hbF9wb2ludCcgPT4gJy4nLCAgJ21vbl90aG91c2FuZHNfc2VwJyA9PiAnLCcsICAnbW9uX2dyb3VwaW5nJyA9PiAnMzszJywgICdwb3NpdGl2ZV9zaWduJyA9PiAnJywgICduZWdhdGl2ZV9zaWduJyA9PiAnJywgICdpbnRfZnJhY19kaWdpdHMnID0+ICcyJywgICdmcmFjX2RpZ2l0cycgPT4gJzInLCAgJ3BfY3NfcHJlY2VkZXMnID0+ICcxJywgICdwX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ25fY3NfcHJlY2VkZXMnID0+ICcxJywgICduX3NlcF9ieV9zcGFjZScgPT4gJzAnLCAgJ3Bfc2lnbl9wb3NuJyA9PiAnMScsICAnbl9zaWduX3Bvc24nID0+ICcxJywpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZm9ybWF0KCRmb3JtYXQsICRudW1iZXIsICRjdXJyZW5jeUNvZGU9IiIsICRmb3JtYXRPdmVycmlkZT0iIikgCgl7IAoJICAgICRyZWdleCAgPSAnLyUoKD86W1xeIVwtXXxcK3xcKHxcPS4pKikoWzAtOV0rKT8nLiAKCSAgICAgICAgICAgICAgJyg/OiMoWzAtOV0rKSk/KD86XC4oWzAtOV0rKSk/KFtpbiVdKS8nOyAKCSAgICAKCSAgICAkY3VycmVuY3kgPSBzdHJ0b3VwcGVyKCRjdXJyZW5jeUNvZGUpOwoJICAgIGlmIChlbXB0eSgkY3VycmVuY3kpIHx8ICFpc3NldChzZWxmOjokY3VycmVuY2llc1skY3VycmVuY3lDb2RlXSkpCgkgICAgewoJCSAgICAkY3VycmVuY3kgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9DVVJSRU5DWSk7IAoJCSAgICBpZiAoZW1wdHkoJGN1cnJlbmN5KSkKCQkgICAgewoJCSAgICAJJGxvY2FsZSA9IHNlbGY6OiRjdXJyZW5jaWVzWydVU0QnXTsKCQkgICAgfQoJICAgIH0KCSAgICBlbHNlIAoJICAgIHsKCSAgICAJJGxvY2FsZSA9IHNlbGY6OiRjdXJyZW5jaWVzWyRjdXJyZW5jeUNvZGVdOwoJICAgIH0KCSAgICAKCSAgICBpZiAoaXNfYXJyYXkoJGZvcm1hdE92ZXJyaWRlKSkKCSAgICB7CgkgICAgCSRsb2NhbGUgPSAkZm9ybWF0T3ZlcnJpZGUgKyAkbG9jYWxlOwoJICAgIH0KCSAgICAKCSAgICAKCSAgICBwcmVnX21hdGNoX2FsbCgkcmVnZXgsICRmb3JtYXQsICRtYXRjaGVzLCBQUkVHX1NFVF9PUkRFUik7IAoJICAgIGZvcmVhY2ggKCRtYXRjaGVzIGFzICRmbWF0Y2gpIHsgCgkgICAgICAgICR2YWx1ZSA9IGZsb2F0dmFsKCRudW1iZXIpOyAKCSAgICAgICAgJGZsYWdzID0gYXJyYXkoIAoJICAgICAgICAgICAgJ2ZpbGxjaGFyJyAgPT4gcHJlZ19tYXRjaCgnL1w9KC4pLycsICRmbWF0Y2hbMV0sICRtYXRjaCkgPyAKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICRtYXRjaFsxXSA6ICcgJywgCgkgICAgICAgICAgICAnbm9ncm91cCcgICA9PiBwcmVnX21hdGNoKCcvXF4vJywgJGZtYXRjaFsxXSkgPiAwLCAKCSAgICAgICAgICAgICd1c2VzaWduYWwnID0+IHByZWdfbWF0Y2goJy9cK3xcKC8nLCAkZm1hdGNoWzFdLCAkbWF0Y2gpID8gCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWF0Y2hbMF0gOiAnKycsIAoJICAgICAgICAgICAgJ25vc2ltYm9sJyAgPT4gcHJlZ19tYXRjaCgnL1whLycsICRmbWF0Y2hbMV0pID4gMCwgCgkgICAgICAgICAgICAnaXNsZWZ0JyAgICA9PiBwcmVnX21hdGNoKCcvXC0vJywgJGZtYXRjaFsxXSkgPiAwIAoJICAgICAgICApOyAKCSAgICAgICAgJHdpZHRoICAgICAgPSB0cmltKCRmbWF0Y2hbMl0pID8gKGludCkkZm1hdGNoWzJdIDogMDsgCgkgICAgICAgICRsZWZ0ICAgICAgID0gdHJpbSgkZm1hdGNoWzNdKSA/IChpbnQpJGZtYXRjaFszXSA6IDA7IAoJICAgICAgICAkcmlnaHQgICAgICA9IHRyaW0oJGZtYXRjaFs0XSkgPyAoaW50KSRmbWF0Y2hbNF0gOiAkbG9jYWxlWydpbnRfZnJhY19kaWdpdHMnXTsgCgkgICAgICAgICRjb252ZXJzaW9uID0gJGZtYXRjaFs1XTsgCgkKCSAgICAgICAgJHBvc2l0aXZlID0gdHJ1ZTsgCgkgICAgICAgIGlmICgkdmFsdWUgPCAwKSB7IAoJICAgICAgICAgICAgJHBvc2l0aXZlID0gZmFsc2U7IAoJICAgICAgICAgICAgJHZhbHVlICAqPSAtMTsgCgkgICAgICAgIH0gCgkgICAgICAgICRsZXR0ZXIgPSAkcG9zaXRpdmUgPyAncCcgOiAnbic7IAoJCgkgICAgICAgICRwcmVmaXggPSAkc3VmZml4ID0gJGNwcmVmaXggPSAkY3N1ZmZpeCA9ICRzaWduYWwgPSAnJzsgCgkKCSAgICAgICAgJHNpZ25hbCA9ICRwb3NpdGl2ZSA/ICRsb2NhbGVbJ3Bvc2l0aXZlX3NpZ24nXSA6ICRsb2NhbGVbJ25lZ2F0aXZlX3NpZ24nXTsgCgkgICAgICAgIHN3aXRjaCAodHJ1ZSkgeyAKCSAgICAgICAgICAgIGNhc2UgJGxvY2FsZVsieyRsZXR0ZXJ9X3NpZ25fcG9zbiJdID09IDEgJiYgJGZsYWdzWyd1c2VzaWduYWwnXSA9PSAnKyc6IAoJICAgICAgICAgICAgICAgICRwcmVmaXggPSAkc2lnbmFsOyAKCSAgICAgICAgICAgICAgICBicmVhazsgCgkgICAgICAgICAgICBjYXNlICRsb2NhbGVbInskbGV0dGVyfV9zaWduX3Bvc24iXSA9PSAyICYmICRmbGFnc1sndXNlc2lnbmFsJ10gPT0gJysnOiAKCSAgICAgICAgICAgICAgICAkc3VmZml4ID0gJHNpZ25hbDsgCgkgICAgICAgICAgICAgICAgYnJlYWs7IAoJICAgICAgICAgICAgY2FzZSAkbG9jYWxlWyJ7JGxldHRlcn1fc2lnbl9wb3NuIl0gPT0gMyAmJiAkZmxhZ3NbJ3VzZXNpZ25hbCddID09ICcrJzogCgkgICAgICAgICAgICAgICAgJGNwcmVmaXggPSAkc2lnbmFsOyAKCSAgICAgICAgICAgICAgICBicmVhazsgCgkgICAgICAgICAgICBjYXNlICRsb2NhbGVbInskbGV0dGVyfV9zaWduX3Bvc24iXSA9PSA0ICYmICRmbGFnc1sndXNlc2lnbmFsJ10gPT0gJysnOiAKCSAgICAgICAgICAgICAgICAkY3N1ZmZpeCA9ICRzaWduYWw7IAoJICAgICAgICAgICAgICAgIGJyZWFrOyAKCSAgICAgICAgICAgIGNhc2UgJGZsYWdzWyd1c2VzaWduYWwnXSA9PSAnKCc6IAoJICAgICAgICAgICAgY2FzZSAkbG9jYWxlWyJ7JGxldHRlcn1fc2lnbl9wb3NuIl0gPT0gMDogCgkgICAgICAgICAgICAgICAgJHByZWZpeCA9ICcoJzsgCgkgICAgICAgICAgICAgICAgJHN1ZmZpeCA9ICcpJzsgCgkgICAgICAgICAgICAgICAgYnJlYWs7IAoJICAgICAgICB9IAoJICAgICAgICBpZiAoISRmbGFnc1snbm9zaW1ib2wnXSkgeyAKCSAgICAgICAgICAgICRjdXJyZW5jeSA9ICRjcHJlZml4IC4gCgkgICAgICAgICAgICAgICAgICAgICAgICAoJGNvbnZlcnNpb24gPT0gJ2knID8gJGxvY2FsZVsnaW50X2N1cnJfc3ltYm9sJ10gOiAkbG9jYWxlWydjdXJyZW5jeV9zeW1ib2wnXSkgLiAKCSAgICAgICAgICAgICAgICAgICAgICAgICRjc3VmZml4OyAKCSAgICAgICAgfSBlbHNlIHsgCgkgICAgICAgICAgICAkY3VycmVuY3kgPSAnJzsgCgkgICAgICAgIH0gCgkgICAgICAgICRzcGFjZSAgPSAkbG9jYWxlWyJ7JGxldHRlcn1fc2VwX2J5X3NwYWNlIl0gPyAnICcgOiAnJzsgCgkKCSAgICAgICAgJHZhbHVlID0gbnVtYmVyX2Zvcm1hdCgkdmFsdWUsICRyaWdodCwgJGxvY2FsZVsnbW9uX2RlY2ltYWxfcG9pbnQnXSwgCgkgICAgICAgICAgICAgICAgICRmbGFnc1snbm9ncm91cCddID8gJycgOiAkbG9jYWxlWydtb25fdGhvdXNhbmRzX3NlcCddKTsgCgkgICAgICAgICR2YWx1ZSA9IEBleHBsb2RlKCRsb2NhbGVbJ21vbl9kZWNpbWFsX3BvaW50J10sICR2YWx1ZSk7IAoJCgkgICAgICAgICRuID0gc3RybGVuKCRwcmVmaXgpICsgc3RybGVuKCRjdXJyZW5jeSkgKyBzdHJsZW4oJHZhbHVlWzBdKTsgCgkgICAgICAgIGlmICgkbGVmdCA+IDAgJiYgJGxlZnQgPiAkbikgeyAKCSAgICAgICAgICAgICR2YWx1ZVswXSA9IHN0cl9yZXBlYXQoJGZsYWdzWydmaWxsY2hhciddLCAkbGVmdCAtICRuKSAuICR2YWx1ZVswXTsgCgkgICAgICAgIH0gCgkgICAgICAgICR2YWx1ZSA9IGltcGxvZGUoJGxvY2FsZVsnbW9uX2RlY2ltYWxfcG9pbnQnXSwgJHZhbHVlKTsgCgkgICAgICAgIGlmICgkbG9jYWxlWyJ7JGxldHRlcn1fY3NfcHJlY2VkZXMiXSkgeyAKCSAgICAgICAgICAgICR2YWx1ZSA9ICRwcmVmaXggLiAkY3VycmVuY3kgLiAkc3BhY2UgLiAkdmFsdWUgLiAkc3VmZml4OyAKCSAgICAgICAgfSBlbHNlIHsgCgkgICAgICAgICAgICAkdmFsdWUgPSAkcHJlZml4IC4gJHZhbHVlIC4gJHNwYWNlIC4gJGN1cnJlbmN5IC4gJHN1ZmZpeDsgCgkgICAgICAgIH0gCgkgICAgICAgIGlmICgkd2lkdGggPiAwKSB7IAoJICAgICAgICAgICAgJHZhbHVlID0gc3RyX3BhZCgkdmFsdWUsICR3aWR0aCwgJGZsYWdzWydmaWxsY2hhciddLCAkZmxhZ3NbJ2lzbGVmdCddID8gCgkgICAgICAgICAgICAgICAgICAgICBTVFJfUEFEX1JJR0hUIDogU1RSX1BBRF9MRUZUKTsgCgkgICAgICAgIH0gCgkKCSAgICAgICAgJGZvcm1hdCA9IHN0cl9yZXBsYWNlKCRmbWF0Y2hbMF0sICR2YWx1ZSwgJGZvcm1hdCk7IAoJICAgIH0gCgkgICAgJHBvc3RmaXhJc28gPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9DVVJSRU5DWV9GT1JNQVRfUE9TVEZJWF9JU08pOwoJICAgICRwb3N0Zml4SXNvID0gKGVtcHR5KCRwb3N0Zml4SXNvKSB8fCAoJHBvc3RmaXhJc28gPT0gJ2ZhbHNlJykpP2ZhbHNlOiRwb3N0Zml4SXNvOwoJICAgIAoJICAgIC8vYWxsb3cgdGhpcyBzZXR0aW5nIHRvIGJlIG92ZXJyaWRlbgoJICAgICRwb3N0Zml4SXNvID0gaXNzZXQoJGxvY2FsZVsncG9zdGZpeF9pc28nXSk/JGxvY2FsZVsncG9zdGZpeF9pc28nXTokcG9zdGZpeElzbzsKCSAgICAKCSAgICBpZiAoJHBvc3RmaXhJc28pCgkgICAgewoJICAgIAkkZm9ybWF0Lj0gIiB7JGN1cnJlbmN5Q29kZX0iOwoJICAgIH0KCSAgICByZXR1cm4gJGZvcm1hdDsgCgl9CgkKCQoJLyoqCgkgKiBHZXQgYW4gYXJyYXkgb2Ygc3VwcG9ydGVkIGN1cnJlbmNpZXMKCSAqIAoJICogQHJldHVybiBhcnJheSBvZiBzdXBwb3J0ZWQgY3VycmVuY2llcyBrZXllZCBieSBpc28gY29kZQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFN1cHBvcnRlZEN1cnJlbmNpZXMoKQoJewoJCSRzdXBwb3J0ZWRDdXJyZW5jaWVzID0gYXJyYXkoKTsKCQlmb3JlYWNoIChzZWxmOjokY3VycmVuY2llcyBhcyAkaXNvQ29kZT0+JG1ldGFkYXRhKQoJCXsKCQkJJHN1cHBvcnRlZEN1cnJlbmNpZXNbJGlzb0NvZGVdID0gInskbWV0YWRhdGFbJ25hbWUnXX0gKHskbWV0YWRhdGFbJ2N1cnJlbmN5X3N5bWJvbCddfSkiOwoJCX0KCQlyZXR1cm4gJHN1cHBvcnRlZEN1cnJlbmNpZXM7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1N1cHBvcnRlZEN1cnJlbmN5KCRjdXJyZW5jeUNvZGUpCgl7CgkJcmV0dXJuIGlzc2V0KHNlbGY6OiRjdXJyZW5jaWVzWyRjdXJyZW5jeUNvZGVdKTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFjdGl2ZUN1cnJlbmN5KCkKCXsKCQlyZXR1cm4gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQ1VSUkVOQ1kpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q3VycmVuY3lNZXRhZGF0YSgkY3VycmVuY3lDb2RlKQoJewoJCSRwb3N0Zml4SXNvID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQ1VSUkVOQ1lfRk9STUFUX1BPU1RGSVhfSVNPKTsKCQkkcG9zdGZpeElzbyA9IChlbXB0eSgkcG9zdGZpeElzbykgfHwgKCRwb3N0Zml4SXNvID09ICdmYWxzZScpKT9mYWxzZTokcG9zdGZpeElzbzsKCQlpZiAoaXNzZXQoc2VsZjo6JGN1cnJlbmNpZXNbJGN1cnJlbmN5Q29kZV0pKQoJCXsKCQkJJG1ldGFkYXRhID0gYXJyYXkoImN1cnJlbmN5Ij0+JGN1cnJlbmN5Q29kZSwgInBvc3RmaXhJc28iPT4kcG9zdGZpeElzbykgKyBzZWxmOjokY3VycmVuY2llc1skY3VycmVuY3lDb2RlXTsKCQkJcmV0dXJuICRtZXRhZGF0YTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBudWxsOwoJCX0KCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFjdGl2ZUN1cnJlbmN5TWV0YWRhdGEoKQoJewoJCSRhY3RpdmVDdXJyZW5jeSA9IHNlbGY6OmdldEFjdGl2ZUN1cnJlbmN5KCk7CgkJcmV0dXJuIHNlbGY6OmdldEN1cnJlbmN5TWV0YWRhdGEoJGFjdGl2ZUN1cnJlbmN5KTsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFByZWNpc2lvbkZvckN1cnJlbmN5KCRjdXJyZW5jeUNvZGUpCgl7CgkJJGN1cnJlbmN5ID0gZW1wdHkoJGN1cnJlbmN5Q29kZSk/TU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpOiRjdXJyZW5jeUNvZGU7CgkJJGN1cnJlbmN5TWV0YWRhdGEgPSBzZWxmOjpnZXRDdXJyZW5jeU1ldGFkYXRhKCRjdXJyZW5jeSk7CgkJJHByZWNpc2lvbiA9IGlzc2V0KCRjdXJyZW5jeU1ldGFkYXRhWydmcmFjX2RpZ2l0cyddKT8kY3VycmVuY3lNZXRhZGF0YVsnZnJhY19kaWdpdHMnXToyOwoJCXJldHVybiAkcHJlY2lzaW9uOwoJfQp9Ck1NX0N1cnJlbmN5VXRpbDo6X19pbml0aWFsaXplQ3VycmVuY3lGb3JtYXRzKCk7IC8vc3RhdGljIGluaXRpYWxpemF0aW9uCg==', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(209, 'reportdatagrid', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogCiAqIE1NX1JlcG9ydERhdGFncmlkIGlzIHRoZSBtYWluIGRhdGFncmlkIGNvbXBvbmVudCBvZiB0aGUgcmVwb3J0aW5nIGZyYW1ld29yay4gCiAqIEl0IGhhcyB0aGUgYWJpbGl0eSB0byA6CiAqICogcHJlc2VudCB0YWJ1bGFyIGRhdGEgaW4gcm93cwogKiAqIGRpc3BsYXkgdG9vbHRpcHMgZm9yIGFueSBoZWFkaW5nIG9yIGNvbnRlbnQKICogKiBzaG93IGEgaGVhZGluZyBhbmQvb3IgYSBzdWJoZWFkaW5nCiAqICogYWNjZXB0IGEgZGF0YXNldCBhbmQgYXV0b21hdGljYWxseSBjcmVhdGUgYSBncmlkIGZyb20gaXQKICogKiBkbyBwYWdpbmF0aW9uCiAqICogZHluYW1pY2FsbHkgc2hvdy9oaWRlIGNvbHVtbnMKICogKiBkeW5hbWljYWxseSBleHBhbmQgY29udGVudCBhc3NvY2lhdGVkIHdpdGggYSByb3csIGluIHJlYWN0aW9uIHRvIGEgYnV0dG9uIHByZXNzCiAqICogZGlzcGxheSBzdWJyb3dzLCBpbiBhIHRhYmxldHJlZSBzdHlsZSwgYXNzb2NpYXRlZCB3aXRoIGEgbWFzdGVyIHJvdwogKi8KY2xhc3MgTU1fUmVwb3J0RGF0YWdyaWQgZXh0ZW5kcyBNTV9SZXBvcnRWaXN1YWxFbGVtZW50CnsKCS8vZ3JpZCBjc3MgY2xhc3NlcwoJcHJvdGVjdGVkICRzdWJoZWFkZXJSb3dDbGFzcyAgPSAic3ViaGVhZGVyX3JvdyI7Cglwcm90ZWN0ZWQgJHN1YmhlYWRlckNlbGxDbGFzcyA9ICJzdWJoZWFkZXJfY2VsbCI7Cglwcm90ZWN0ZWQgJHRvb2x0aXBDbGFzcyA9ICJxbGFic190b29sdGlwIjsKCXByb3RlY3RlZCAkb2RkUm93Q2xhc3MgPSAiZGF0YV9vZGQiOwoJcHJvdGVjdGVkICRldmVuUm93Q2xhc3MgPSAiZGF0YV9ldmVuIjsKCXByb3RlY3RlZCAkZGF0YUNlbGxDbGFzcyA9ICJkYXRhX2NlbGwiOwoJCglwcm90ZWN0ZWQgJG9kZFN1YnJvd0NsYXNzID0gImRhdGFfc3Vicm93X29kZCI7Cglwcm90ZWN0ZWQgJGV2ZW5TdWJyb3dDbGFzcyA9ICJkYXRhX3N1YnJvd19ldmVuIjsKCXByb3RlY3RlZCAkc3Vicm93U3RhcnREYXRhQ2VsbENsYXNzID0gImZvbGRvdXRTdGFydCI7Cglwcm90ZWN0ZWQgJHN1YnJvd0VuZERhdGFDZWxsQ2xhc3MgPSAiZm9sZG91dEVuZCI7CgkKCS8vb3B0aW9ucwoJcHJvdGVjdGVkICRjb2x1bW5GaWx0ZXJpbmdFbmFibGVkID0gZmFsc2U7Cglwcm90ZWN0ZWQgJGNvbHVtbkZpbHRlckJ1dHRvbkxhYmVsID0gIlRhYmxlIEZpbHRlciI7Cglwcm90ZWN0ZWQgJGNvbHVtbkZpbHRlclBhbmVsSGVhZGVyID0gIkFjdGl2ZSBjb2x1bW5zIjsKCXByb3RlY3RlZCAkZ3JpZFRpdGxlID0gIiI7Cglwcm90ZWN0ZWQgJHNob3dIZWFkZXJSb3cgPSB0cnVlOwoJCglwcm90ZWN0ZWQgJHBhZ2luYXRlZCA9IHRydWU7Cglwcm90ZWN0ZWQgJGN1cnJlbnRQYWdlID0gMTsKCXByb3RlY3RlZCAkcGFnZVNpemUgPSA1MDsKCXByb3RlY3RlZCAkaGFzQmFja0xpbmsgPSBmYWxzZTsKCXByb3RlY3RlZCAkYmFja2xpbmtUZXh0ID0gIiI7CgkKCXByb3RlY3RlZCAkc29ydENvbHVtbiA9ICIiOwoJcHJvdGVjdGVkICRzb3J0RGlyZWN0aW9uID0gIiI7CgkKCXByb3RlY3RlZCAkbm9EYXRhQ29udGVudCA9ICItLSBObyBEYXRhIC0tIjsKCQoJcHJvdGVjdGVkICRncmlkVGVtcGxhdGU7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkZ3JpZENvbnRhaW5lcklkPSIiLCRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJJHRoaXMtPmdyaWRUZW1wbGF0ZSA9IE1NX1RFTVBMQVRFX1JFUE9SVElORy5ESVJFQ1RPUllfU0VQQVJBVE9SLiJjb21wb25lbnRzIi5ESVJFQ1RPUllfU0VQQVJBVE9SLiJyZXBvcnRkYXRhZ3JpZC5odG1sLnBocCI7CgkJJHRoaXMtPnByb2Nlc3NEaXJlY3RpdmVzKCRkaXJlY3RpdmVzKTsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRncmlkQ29udGFpbmVySWQsJGRpcmVjdGl2ZXMpOwoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiBwcm9jZXNzRGlyZWN0aXZlcygkZGlyZWN0aXZlcykKCXsKCQkkdGhpcy0+aXNQYWdpbmF0ZWQgPSAoIWVtcHR5KCRkaXJlY3RpdmVzWydwYWdpbmF0ZWQnXSkgJiYgKChib29sKSRkaXJlY3RpdmVzWydwYWdpbmF0ZWQnXSkpOwoJCSR0aGlzLT5jdXJyZW50UGFnZSA9ICghZW1wdHkoJGRpcmVjdGl2ZXNbJ3BhZ2UnXSkgJiYgaXNfbnVtZXJpYygkZGlyZWN0aXZlc1sncGFnZSddKSk/JGRpcmVjdGl2ZXNbJ3BhZ2UnXTokdGhpcy0+Y3VycmVudFBhZ2U7CgkJJHRoaXMtPnBhZ2VTaXplICAgID0gKCFlbXB0eSgkZGlyZWN0aXZlc1sncGFnZVNpemUnXSkgJiYgaXNfbnVtZXJpYygkZGlyZWN0aXZlc1sncGFnZVNpemUnXSkpPyRkaXJlY3RpdmVzWydwYWdlU2l6ZSddOiR0aGlzLT5wYWdlU2l6ZTsKCQkKCQlpZiAoaXNzZXQoJGRpcmVjdGl2ZXNbJ3NvcnREaXJlY3Rpb24nXSkgJiYgKCRkaXJlY3RpdmVzWydzb3J0RGlyZWN0aW9uJ10gPT0gIiIpKSAvL2JsYW5rIHNvcnQgZGlyZWN0aW9uIGluZGljYXRlcyBhIHNvcnQgcmVzZXQKCQl7CgkJCSR0aGlzLT5zb3J0Q29sdW1uID0gIiI7CgkJCSR0aGlzLT5zb3J0RGlyZWN0aW9uID0gIiI7CgkJfQoJCWVsc2UgCgkJewoJCQkkdGhpcy0+c29ydENvbHVtbiAgPSAoIWVtcHR5KCRkaXJlY3RpdmVzWydzb3J0Q29sdW1uJ10pKT8kZGlyZWN0aXZlc1snc29ydENvbHVtbiddOiR0aGlzLT5zb3J0Q29sdW1uOwoJCQkkdGhpcy0+c29ydERpcmVjdGlvbiA9ICghZW1wdHkoJGRpcmVjdGl2ZXNbJ3NvcnREaXJlY3Rpb24nXSkpPyRkaXJlY3RpdmVzWydzb3J0RGlyZWN0aW9uJ106JHRoaXMtPnNvcnREaXJlY3Rpb247CgkJfQoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q1NTRGVwZW5kZW5jaWVzKCkKCXsKCQkkZHMgPSBESVJFQ1RPUllfU0VQQVJBVE9SOwoJCSRjc3NEaXIgPSBNTV9SRVNPVVJDRVNfVVJMLiJjc3N7JGRzfWFkbWlueyRkc31yZXBvcnRpbmd7JGRzfWRhdGFncmlkeyRkc30iOwoJCQoJCSRkZXBlbmRlbmNpZXMgPSBhcnJheSgKCQkJInskY3NzRGlyfWRhdGFfZ3JpZHNfbWFpbi5jc3MiLAoJCQkieyRjc3NEaXJ9ZGF0YV9ncmlkc19zdHlsZV8wMS5jc3MiLAoJCQkieyRjc3NEaXJ9ZGF0YV9ncmlkc190b29sdGlwLmNzcyIsCgkJCSJ7JGNzc0Rpcn1kYXRhX2dyaWRzX21tLmNzcyIsCgkJKTsKCQlyZXR1cm4gJGRlcGVuZGVuY2llczsKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVuZGVyQ29sdW1uRmlsdGVyaW5nSW5wdXRzKCkKCXsKCQkkb3V0cHV0ID0gIiI7CgkJJG51bUNvbHVtbnMgPSBjb3VudCgkdGhpcy0+bW9kZWwtPmdldENvbHVtbnMoKSk7CgkJZm9yICgkY291bnQ9MTsgJGNvdW50PD0kbnVtQ29sdW1uczsgJGNvdW50KyspCgkJewoJCQkkb3V0cHV0Lj0gIjxpbnB1dCBpZD1cImNvbHskY291bnR9XCIgbmFtZT1cIiNcIiB0eXBlPVwiY2hlY2tib3hcIiAvPlxuIjsKCQl9CgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIHJlbmRlckNvbHVtbkZpbHRlcmluZ1BhbmVsTGlzdCgpCgl7CgkJJG91dHB1dCA9ICI8dWw+XG4iOwoJCSRjb2x1bW5zID0gJHRoaXMtPm1vZGVsLT5nZXRDb2x1bW5zKCk7CgkJJGNvdW50ID0gMTsKCQkkZm91bmRGaWx0ZXIgPSBmYWxzZTsKCQlmb3JlYWNoICgkY29sdW1ucyBhcyAkY29sdW1uPT4kY29sdW1uRGF0YSkKCQl7CgkJCWlmICgkY29sdW1uRGF0YVsnZmlsdGVyYWJsZSddKQoJCQl7CgkJCQkkb3V0cHV0IC49ICI8bGk+PGxhYmVsIGZvcj1cImNvbHskY291bnR9XCI+eyRjb2x1bW59PC9sYWJlbD48L2xpPlxuIjsKCQkJCSRmb3VuZEZpbHRlciA9IHRydWU7CgkJCX0KCQkJJGNvdW50Kys7CgkJfQoJCSRvdXRwdXQgLj0gIjwvdWw+XG4iOwoJCQoJCXJldHVybiAoJGZvdW5kRmlsdGVyKT8kb3V0cHV0OiIiOwoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiByZW5kZXJJbmxpbmVDU1MoKQoJewoJCSRvdXRwdXQgPSAiIjsKCQkkbW9kZWxDb2x1bW5zID0gJHRoaXMtPm1vZGVsLT5nZXRDb2x1bW5zKCk7CgkJJGk9MDsKCQlmb3JlYWNoICgkbW9kZWxDb2x1bW5zIGFzICRrPT4kdikKCQl7CgkJCSRpKys7CgkJCSRvdXRwdXQgLj0gInRkLmRhdGFfY2VsbDpudGgtb2YtdHlwZSh7JGl9KTpiZWZvcmUsXG4iOwoJCQkkb3V0cHV0IC49ICJ0ZC5sYWJlbF9jZWxsOm50aC1vZi10eXBlKHskaX0pOmJlZm9yZVxuIjsKCQkJJG91dHB1dCAuPSAie1xuIjsKCQkJJG91dHB1dCAuPSAiICAgIGNvbnRlbnQ6IFwieyR2WydsYWJlbCddfTpcIjtcbiI7CgkJCSRvdXRwdXQgLj0gIn1cbiI7CgkJfQoJCWlmICgkb3V0cHV0ICE9ICIiKQoJCXsKCQkJJG91dHB1dCA9ICI8c3R5bGU+XG5AbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ4MHB4KSxcbiIuCgkJCQkJICAiKG1pbi1kZXZpY2Utd2lkdGg6IDBweCkgYW5kIChtYXgtZGV2aWNlLXdpZHRoOiA0NzlweClcbiIuCgkgICAgICAgICAgICAgICAgICAie3skb3V0cHV0fX1cbjwvc3R5bGU+XG4iOwoJCX0KCQlyZXR1cm4gJG91dHB1dDsKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVuZGVyU3ViaGVhZGVyUm93KCkKCXsKCQkkb3V0cHV0ID0gIiI7CgkJJG1vZGVsQ29sdW1ucyA9ICR0aGlzLT5tb2RlbC0+Z2V0Q29sdW1ucygpOwoJCWlmIChjb3VudCgkbW9kZWxDb2x1bW5zKSA+IDApCgkJewoJCQkkb3V0cHV0IC49ICI8dHIgY2xhc3M9XCJ7JHRoaXMtPnN1YmhlYWRlclJvd0NsYXNzfVwiPlxuIjsKCQkJZm9yZWFjaCAoJG1vZGVsQ29sdW1ucyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRjZWxsQ29udGVudCA9ICR2WydsYWJlbCddOwoJCQkJaWYgKGlzc2V0KCR2Wydzb3J0YWJsZSddKSAmJiAoJHZbJ3NvcnRhYmxlJ10gPT0gdHJ1ZSkpCgkJCQl7CgkJCQkJLy9zb3J0aW5nIGRpcmVjdGlvbnMgY3ljbGUgZnJvbSBERVNDIHRvIEFTQyB0byBub25lLiBCeSBleGFtaW5pbmcgd2hlcmUgd2UgYXJlIGluIHRoZSBjeWNsZSwgd2Uga25vdyB3aGF0IGNvbWVzIG5leHQuLgoJCQkJCSRuZXh0U29ydERpciA9IE1NX1JlcG9ydERhdGFncmlkTW9kZWw6OiRTT1JUX0RFU0M7CgkJCQkJaWYgKCgkdGhpcy0+c29ydENvbHVtbiA9PSAkaykgJiYgIWVtcHR5KCR0aGlzLT5zb3J0RGlyZWN0aW9uKSkKCQkJCQl7CgkJCQkJCS8vYWxyZWFkeSBzb3J0aW5nIGJ5IHRoaXMgY29sdW1uLCBmaWd1cmUgb3V0IHdoYXRzIG5leHQKCQkJCQkJaWYgKCR0aGlzLT5zb3J0RGlyZWN0aW9uID09IE1NX1JlcG9ydERhdGFncmlkTW9kZWw6OiRTT1JUX0RFU0MpCgkJCQkJCXsKCQkJCQkJCSRjZWxsQ29udGVudCA9ICRjZWxsQ29udGVudC5NTV9VdGlsczo6Z2V0SWNvbigiY2FyZXQtZG93biIsICdncmV5JywgJzEuM2VtJywgJzJweCcsICdzb3J0aW5nIGJ5IHRoaXMgY29sdW1uIChkZXNjZW5kaW5nKScsICdtYXJnaW4tbGVmdDo0cHg7Jyk7CgkJCQkJCQkkbmV4dFNvcnREaXIgPSBNTV9SZXBvcnREYXRhZ3JpZE1vZGVsOjokU09SVF9BU0M7CgkJCQkJCX0KCQkJCQkJZWxzZSAvL3dlIGFzc3VtZSB0aGlzIGlzIGFuIGFzY2VuZGluZyBzb3J0LCBzaW5jZSB3ZSBrbm93IHRoZSBzb3J0IGNvbHVtbiBpc250IGJsYW5rIGFuZCBpdHMgbm90IGRlc2MKCQkJCQkJewoJCQkJCQkJJGNlbGxDb250ZW50ID0gJGNlbGxDb250ZW50Lk1NX1V0aWxzOjpnZXRJY29uKCJjYXJldC11cCIsICdncmV5JywgJzEuM2VtJywgJzJweCcsICdzb3J0aW5nIGJ5IHRoaXMgY29sdW1uIChhc2NlbmRpbmcpJywgJ21hcmdpbi1sZWZ0OjRweDsnKTsKCQkJCQkJCSRuZXh0U29ydERpciA9ICIiOyAvL2VtcHR5IHNwYWNlIHdpbGwgYmUgdGhlIHNpZ25hbCBmb3IgYSByZXNldAoJCQkJCQl9CgkJCQkJfQoJCQkJCSRjZWxsQ29udGVudCA9ICI8YSBvbkNsaWNrPVwibW1qcy5jaGFuZ2VEaXJlY3RpdmUoJ3skdGhpcy0+Y29udGFpbmVyfScseydzb3J0Q29sdW1uJzoneyRrfScsJ3NvcnREaXJlY3Rpb24nOid7JG5leHRTb3J0RGlyfSd9KTtcIj57JGNlbGxDb250ZW50fTwvYT4iOwoJCQkJfQoJCQkJCgkJCQlpZiAoIWVtcHR5KCR2Wyd0b29sdGlwJ10pKQoJCQkJewoJCQkJCSRjZWxsQ29udGVudCAuPSAiPGRpdiBjbGFzcz1cInskdGhpcy0+dG9vbHRpcENsYXNzfVwiPmk8c3Bhbj4iOwoJCQkJCWlmICghZW1wdHkoJHZbJ3Rvb2x0aXBfbGFiZWwnXSkpCgkJCQkJewoJCQkJCQkkY2VsbENvbnRlbnQgLj0gIjxzdHJvbmc+eyR2Wyd0b29sdGlwX2xhYmVsJ119PC9zdHJvbmc+IjsKCQkJCQl9CgkJCQkJJGNlbGxDb250ZW50IC49ICR2Wyd0b29sdGlwJ107CgkJCQkJJGNlbGxDb250ZW50IC49ICI8L3NwYW4+PC9kaXY+IjsKCQkJCX0KCQkJCSRvdXRwdXQgLj0gIjx0ZCBjbGFzcz1cInskdGhpcy0+c3ViaGVhZGVyQ2VsbENsYXNzfVwiIG5vd3JhcD1cIm5vd3JhcFwiPnskY2VsbENvbnRlbnR9PC90ZD5cbiI7CgkJCX0KCQkJJG91dHB1dCAuPSAiPC90cj5cbiI7CgkJfQoJCXJldHVybiAkb3V0cHV0OwoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiByZW5kZXJEYXRhU2VjdGlvbigpCgl7CQkKCQkkcm93TnVtID0gMDsKCQkkcm93cyA9ICR0aGlzLT5tb2RlbC0+Z2V0Um93cygpOwoJCSRjb2x1bW5zID0gJHRoaXMtPm1vZGVsLT5nZXRDb2x1bW5zKCk7CgkJJG51bUNvbHVtbnMgPSBjb3VudCgkY29sdW1ucyk7IAoJCSRvdXRwdXQgPSAiIjsKCQkKCQlpZiAoIWVtcHR5KCR0aGlzLT5zb3J0Q29sdW1uKSAmJiAhZW1wdHkoJHRoaXMtPnNvcnREaXJlY3Rpb24pKQoJCXsKCQkJJHVzZUNvbHVtbiA9IChpc3NldCgkY29sdW1uc1skdGhpcy0+c29ydENvbHVtbl1bJ3NvcnRWYWx1ZUNvbHVtbiddKSk/JGNvbHVtbnNbJHRoaXMtPnNvcnRDb2x1bW5dWydzb3J0VmFsdWVDb2x1bW4nXTokdGhpcy0+c29ydENvbHVtbjsKCQkJTU1fUmVwb3J0RGF0YWdyaWRNb2RlbDo6c29ydFJlc3VsdHMoJHJvd3MsJHVzZUNvbHVtbiwgJHRoaXMtPnNvcnREaXJlY3Rpb24sdHJ1ZSk7CgkJfQoJCQoJCWlmICgkdGhpcy0+cGFnaW5hdGVkKQoJCXsKCQkJJG1pblRvRGlzcGxheSA9ICgoJHRoaXMtPmN1cnJlbnRQYWdlIC0xKSAqICR0aGlzLT5wYWdlU2l6ZSkgKyAxOwoJCQkkbWF4VG9EaXNwbGF5ID0gKCR0aGlzLT5jdXJyZW50UGFnZSAqICR0aGlzLT5wYWdlU2l6ZSk7CgkJfQoJCWVsc2UgCgkJewoJCQkkbWluVG9EaXNwbGF5ID0gMDsKCQkJJG1heFRvRGlzcGxheSA9IGNvdW50KCRyb3dzKTsKCQl9CgkJCgkJZm9yZWFjaCAoJHJvd3MgYXMgJHJvd0RhdGEpCgkJewoJCQkvL25leHQgbGluZSBzdGFydHMgY291bnRpbmcgdGhlIHJvd3MsIHN0YXJ0aW5nIHdpdGggMQoJCQkkcm93U3R5bGUgPSAoKCsrJHJvd051bSUyKT09MCk/JHRoaXMtPmV2ZW5Sb3dDbGFzczokdGhpcy0+b2RkUm93Q2xhc3M7CgkJCWlmICgoJHJvd051bSA+PSAkbWluVG9EaXNwbGF5KSAmJiAoJHJvd051bSA8PSAkbWF4VG9EaXNwbGF5KSkKCQkJewoJCQkJJG91dHB1dCAuPSAiPCEtLSBST1cgeyRyb3dOdW19IC0tPlxuIjsKCQkJCQoJCQkJaWYgKCRyb3dEYXRhWydkYXRhJ10gPT0gTU1fUmVwb3J0RGF0YWdyaWRNb2RlbDo6JEJMQU5LX1JPVykKCQkJCXsKCQkJCQlmb3IgKCRpPTA7ICRpPCRudW1Db2x1bW5zOyAkaSsrKQoJCQkJCXsKCQkJCQkJJG91dHB1dCAuPSAiPHRyIGNsYXNzPVwieyRyb3dTdHlsZX1cIj5cbiI7CgkJCQkJCSRvdXRwdXQgLj0gIjx0ZCBjbGFzcz1cInskdGhpcy0+ZGF0YUNlbGxDbGFzc31cIj4mbmJzcDs8L3RkPlxuIjsKCQkJCQkJJG91dHB1dCAuPSAiPC90cj5cbiI7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCS8vaWYgKGlzc2V0KCRyb3dEYXRhWydkYXRhJ11bJ3N1YnJvd3MnXSkpCgkJCQkJLy8JZXJyb3JfbG9nKHByaW50X3IoJHJvd0RhdGFbJ2RhdGEnXVsnc3Vicm93cyddLHRydWUpKTsKCQkJCQkkc3ViUm93c1ByZXNlbnQgPSBpc3NldCgkcm93RGF0YVsnZGF0YSddWydzdWJyb3dzJ10pICYmIGlzX2FycmF5KCRyb3dEYXRhWydkYXRhJ11bJ3N1YnJvd3MnXSk7CgkJCQkJJG51bVN1YnJvd3MgPSAkc3ViUm93c1ByZXNlbnQ/Y291bnQoJHJvd0RhdGFbJ2RhdGEnXVsnc3Vicm93cyddWydyb3dzJ10pOjA7CgkJCQkJCgkJCQkJJG91dHB1dCAuPSAiPHRyIGNsYXNzPVwieyRyb3dTdHlsZX1cIj5cbiI7CgkJCQkJJGNvbHVtbkNvdW50ID0gMDsKCQkJCQkkbWV0YU92ZXJyaWRlID0gYXJyYXkoJ3Bvc3RmaXhfaXNvJz0+ZmFsc2UpOwoJCQkJCWZvcmVhY2ggKCRjb2x1bW5zIGFzICRjb2x1bW5OYW1lPT4kY29sdW1uRGF0YSkKCQkJCQl7CgkJCQkJCSRjZWxsQ29udGVudCA9IHRyaW0oJHJvd0RhdGFbJ2RhdGEnXVskY29sdW1uTmFtZV0pOwoJCQkJCQkkY2VsbENvbnRlbnQgPSAoJGNlbGxDb250ZW50ICE9PSAiIik/JHJvd0RhdGFbJ2RhdGEnXVskY29sdW1uTmFtZV06IiZuYnNwOyI7IC8vaWYgaXRzIGp1c3QgYmxhbmsgc3BhY2VzLCB1c2UgaHRtbCBlbnRpdHkgZm9yIHRoYXQKCQkJCQkJaWYgKGlzc2V0KCRjb2x1bW5EYXRhWydjb2x1bW5UeXBlJ10pICYmICgkY29sdW1uRGF0YVsnY29sdW1uVHlwZSddID09ICdtb25leScpICYmIChpc19udW1lcmljKCRjZWxsQ29udGVudCkpKQoJCQkJCQl7CgkJCQkJCQkkY2VsbENvbnRlbnQgPSBfbW1vZigkY2VsbENvbnRlbnQsTU1fQ3VycmVuY3lVdGlsOjpnZXRBY3RpdmVDdXJyZW5jeSgpLCRtZXRhT3ZlcnJpZGUpOwoJCQkJCQl9CgkJCQkJCWVsc2UgCgkJCQkJCXsKCQkJCQkJCS8vZG8gYW55IG5lY2Vzc2FyeSBzdWJzdGl0dXRpb25zCgkJCQkJCQkkY2VsbENvbnRlbnQgPSBzdHJfcmVwbGFjZSgiJXJvd19pZCUiLCAkcm93TnVtLCAkY2VsbENvbnRlbnQpOyAvL3JlbGFjZSAlcm93X2lkJSB3aXRoIHRoZSBhY3R1YWwgcm93IGlkCgkJCQkJCQkkY2VsbENvbnRlbnQgPSBzdHJfcmVwbGFjZSgiJWNvbF9udW0lIiwgJGNvbHVtbkNvdW50LCAkY2VsbENvbnRlbnQpOyAvL3JlcGxhY2UgJWNvbF9udW0lIHdpdGggdGhlIGFjdHVhbCBjb2x1bW4gbnVtYmVyCgkJCQkJCQkkY2VsbENvbnRlbnQgPSBzdHJfcmVwbGFjZSgiJXRvdGFsX3N1YnJvd3MlIiwgJG51bVN1YnJvd3MsICRjZWxsQ29udGVudCk7IC8vcmVwbGFjZSAldG90YWxfc3Vicm93cyUgd2l0aCB0aGUgbnVtYmVyIG9mIGZvbGRvdXQgcm93cwoJCQkJCQl9CgkJCQkJCWlmIChpc3NldCgkY29sdW1uRGF0YVsnbGluayddKSAmJiBpc3NldCgkY29sdW1uRGF0YVsnbGluayddWyduYW1lJ10pICYmIGlzc2V0KCRjb2x1bW5EYXRhWydsaW5rJ11bJ3ZhbHVlJ10pKQoJCQkJCQl7CgkJCQkJCQkkbGlua1BhcmFtTmFtZSA9IGh0bWxlbnRpdGllcygkY29sdW1uRGF0YVsnbGluayddWyduYW1lJ10sRU5UX0NPTVBBVCB8IEVOVF9IVE1MNDAxLCAiVVRGLTgiKTsKCQkJCQkJCSRsaW5rUGFyYW1WYWx1ZSA9IGlzc2V0KCRyb3dEYXRhWydkYXRhJ11bJGNvbHVtbkRhdGFbJ2xpbmsnXVsndmFsdWUnXV0pP2h0bWxlbnRpdGllcygkcm93RGF0YVsnZGF0YSddWyRjb2x1bW5EYXRhWydsaW5rJ11bJ3ZhbHVlJ11dLEVOVF9DT01QQVQgfCBFTlRfSFRNTDQwMSwgIlVURi04Iik6IiI7CgkJCQkJCQkkY2VsbENvbnRlbnQgPSAiPGEgb25DbGljaz1cIm1tanMubmF2aWdhdGUoJ3skdGhpcy0+Y29udGFpbmVyfScseyd7JGxpbmtQYXJhbU5hbWV9JzoneyRsaW5rUGFyYW1WYWx1ZX0nfSk7XCI+eyRjZWxsQ29udGVudH08L2E+IjsKCQkJCQkJfQoJCQkJCQkkY2VsbENsYXNzZXMgPSAoJHN1YlJvd3NQcmVzZW50ICYmICgkY29sdW1uQ291bnQgPT0gMCkpPyJ7JHRoaXMtPmRhdGFDZWxsQ2xhc3N9IHRvcGxldmVsSGVhZGVyIjokdGhpcy0+ZGF0YUNlbGxDbGFzczsKCQkJCQkJJG91dHB1dCAuPSAiPHRkIGNsYXNzPVwieyRjZWxsQ2xhc3Nlc31cIj57JGNlbGxDb250ZW50fTwvdGQ+XG4iOwoJCQkJCQkkY29sdW1uQ291bnQrKzsKCQkJCQl9CgkJCQkJJG91dHB1dCAuPSAiPC90cj5cbiI7CgkJCQkJCgkJCQkJaWYgKCFlbXB0eSgkcm93RGF0YVsnZXhwYW5kZWRDb250ZW50J10pKSAvL2FkZCBleHBhbmRhYmxlIHNlY3Rpb24sIGlmIHRoZXJlIGlzIG9uZQoJCQkJCXsKCQkJCQkJJG91dHB1dCAuPSAiPCEtLSBleHBhbmRhYmxlIHNlY3Rpb24gLS0+XG4iOwoJCQkJCQkkb3V0cHV0IC49ICI8dHIgY2xhc3M9XCJleHBhbmRlZFwiPlxuIjsKCQkJCQkJJG91dHB1dCAuPSAiICAgIDx0ZCBjb2xzcGFuPVwieyRudW1Db2x1bW5zfVwiPlxuIjsKCQkJCQkJJG91dHB1dCAuPSAiICAgICAgIDxpbnB1dCBpZD1cInJvd197JHJvd051bX1cIiBuYW1lPVwiI1wiIHR5cGU9XCJjaGVja2JveFwiIC8+XG4iOwoJCQkJCQkkb3V0cHV0IC49ICIgICAgICAgICAgPGRpdiBjbGFzcz1cImV4cGFuZGVkXCI+XG4iOwoJCQkJCQkkb3V0cHV0IC49ICIgICAgICAgICAgICAgIHskcm93RGF0YVsnZXhwYW5kZWRDb250ZW50J119XG4iOwoJCQkJCQkkb3V0cHV0IC49ICIgICAgICAgICAgPC9kaXY+XG4iOwoJCQkJCQkkb3V0cHV0IC49ICIgICAgPC90ZD5cbiI7CgkJCQkJCSRvdXRwdXQgLj0gIjwvdHI+XG4iOwoJCQkJCQkkb3V0cHV0IC49ICI8IS0tIC8gLS0+XG4iOwkKCQkJCQl9CgkJCQkJCgkJCQkJCgkJCQkJaWYgKCRzdWJSb3dzUHJlc2VudCkgLy9hZGQgc3Vicm93cyBpZiB0aGV5IGFyZSBwcmVzZW50CgkJCQkJewoJCQkJCQkkc3Vicm93TnVtID0gMDsKCQkJCQkJJHN1YnJvd0RhdGEgPSAkcm93RGF0YVsnZGF0YSddWydzdWJyb3dzJ11bJ3Jvd3MnXTsKCQkJCQkJJGNvbHVtbkFsaWFzZXMgPSBpc3NldCgkcm93RGF0YVsnZGF0YSddWydzdWJyb3dzJ11bJ2NvbHVtbkFsaWFzZXMnXSk/JHJvd0RhdGFbJ2RhdGEnXVsnc3Vicm93cyddWydjb2x1bW5BbGlhc2VzJ106YXJyYXkoKTsKCQkJCQkJCgkJCQkJCWZvcmVhY2ggKCRzdWJyb3dEYXRhIGFzICRyb3dEYXRhKQoJCQkJCQl7CgkJCQkJCQkvL25leHQgbGluZSBzdGFydHMgY291bnRpbmcgdGhlIHN1YnJvd3MsIHN0YXJ0aW5nIHdpdGggMQoJCQkJCQkJJHJvd1N0eWxlID0gKCgrKyRzdWJyb3dOdW0lMik9PTApPyR0aGlzLT5ldmVuU3Vicm93Q2xhc3M6JHRoaXMtPm9kZFN1YnJvd0NsYXNzOwoJCQkJCQkJJG91dHB1dCAuPSAiPHRyIGNsYXNzPVwieyRyb3dTdHlsZX1cIj5cbiI7CgkJCQkJCQkkY29sdW1uQ291bnQgPSAwOwoJCQkJCQkJaWYgKCRzdWJyb3dEYXRhID09IE1NX1JlcG9ydERhdGFncmlkTW9kZWw6OiRCTEFOS19ST1cpCgkJCQkJCQl7CgkJCQkJCQkJZm9yICgkaT0wOyAkaTwkbnVtQ29sdW1uczsgJGkrKykKCQkJCQkJCQl7CgkJCQkJCQkJJG91dHB1dCAuPSAiPHRyIGNsYXNzPVwieyRyb3dTdHlsZX1cIj5cbiI7CgkJCQkJCQkJJG91dHB1dCAuPSAiPHRkIGNsYXNzPVwieyR0aGlzLT5kYXRhQ2VsbENsYXNzfVwiPiZuYnNwOzwvdGQ+XG4iOwoJCQkJCQkJCSRvdXRwdXQgLj0gIjwvdHI+XG4iOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCWVsc2UgCgkJCQkJCQl7CgkJCQkJCQkJJGNvbHVtbkNvdW50ID0gMDsKCQkJCQkJCQlmb3JlYWNoICgkY29sdW1ucyBhcyAkY29sdW1uTmFtZT0+JGNvbHVtbkRhdGEpCgkJCQkJCQkJewoJCQkJCQkJCQlpZiAoaXNzZXQoJGNvbHVtbkFsaWFzZXNbJGNvbHVtbk5hbWVdKSkKCQkJCQkJCQkJewoJCQkJCQkJCQkJJGNvbHVtbk5hbWUgPSAkY29sdW1uQWxpYXNlc1skY29sdW1uTmFtZV07CgkJCQkJCQkJCX0KCQkJCQkJCQkJJGNlbGxDb250ZW50ID0gaXNzZXQoJHJvd0RhdGFbJ2RhdGEnXVskY29sdW1uTmFtZV0pP3RyaW0oJHJvd0RhdGFbJ2RhdGEnXVskY29sdW1uTmFtZV0pOicmbmJzcCc7CgkJCQkJCQkJCSRjZWxsQ29udGVudCA9ICgkY2VsbENvbnRlbnQgIT09ICIiKT8kY2VsbENvbnRlbnQ6IiZuYnNwOyI7IC8vaWYgaXRzIGp1c3QgYmxhbmsgc3BhY2VzLCB1c2UgaHRtbCBlbnRpdHkgZm9yIHRoYXQKCQkJCQkJCQkJLy9kbyBhbnkgbmVjZXNzYXJ5IHN1YnN0aXR1dGlvbnMKCQkJCQkJCQkJJGNlbGxDb250ZW50ID0gc3RyX3JlcGxhY2UoIiVyb3dfaWQlIiwgJHJvd051bSwgJGNlbGxDb250ZW50KTsgLy9yZWxhY2UgJXJvd19pZCUgd2l0aCB0aGUgYWN0dWFsIHJvdyBpZAoJCQkJCQkJCQkkY2VsbENvbnRlbnQgPSBzdHJfcmVwbGFjZSgiJXN1YnJvd19pZCUiLCAkc3Vicm93TnVtLCAkY2VsbENvbnRlbnQpOyAvL3JlbGFjZSAlc3Vicm93X2lkJSB3aXRoIHRoZSBhY3R1YWwgc3Vicm93IGlkCgkJCQkJCQkJCSRjZWxsQ29udGVudCA9IHN0cl9yZXBsYWNlKCIlY29sX251bSUiLCAkY29sdW1uQ291bnQsICRjZWxsQ29udGVudCk7IC8vcmVwbGFjZSAlY29sX251bSUgd2l0aCB0aGUgYWN0dWFsIGNvbHVtbiBudW1iZXIKCQkJCQkJCQkJJGNlbGxDbGFzc2VzID0gInskdGhpcy0+ZGF0YUNlbGxDbGFzc30gIjsKCQkJCQkJCQkJaWYgKCRjb2x1bW5Db3VudCA9PSAwKQoJCQkJCQkJCQl7CgkJCQkJCQkJCQkkY2VsbENsYXNzZXMgLj0gKCRzdWJyb3dOdW0gPT0gJG51bVN1YnJvd3MpPyR0aGlzLT5zdWJyb3dFbmREYXRhQ2VsbENsYXNzOiR0aGlzLT5zdWJyb3dTdGFydERhdGFDZWxsQ2xhc3M7CgkJCQkJCQkJCX0KCQkJCQkJCQkJJG91dHB1dCAuPSAiPHRkIGNsYXNzPVwieyRjZWxsQ2xhc3Nlc31cIj57JGNlbGxDb250ZW50fTwvdGQ+XG4iOwoJCQkJCQkJCQkkY29sdW1uQ291bnQrKzsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQkkb3V0cHV0IC49ICI8L3RyPlxuIjsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCSRvdXRwdXQgLj0gIlxuIjsKCQkJfQoJCX0KCQlyZXR1cm4gJG91dHB1dDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyKE1NX1JlcG9ydERhdGFncmlkTW9kZWwgJG1vZGVsID0gbnVsbCkKCXsKCQlpZiAoIWlzX251bGwoJG1vZGVsKSkKCQl7CgkJCSR0aGlzLT5zZXRNb2RlbCgkbW9kZWwpOwoJCX0KCQkkcGFyYW1zID0gbmV3IHN0ZENsYXNzKCk7CgkJJHBhcmFtcy0+Z3JpZElkZW50aWZpZXIgPSAkdGhpcy0+Y29udGFpbmVyOwoJCSRjb2x1bW5GaWx0ZXJpbmdFbmFibGVkID0gJHRoaXMtPmlzQ29sdW1uRmlsdGVyaW5nRW5hYmxlZCgpOwoJCSRwYXJhbXMtPmNvbHVtbkZpbHRlcmluZ0VuYWJsZWQgPSAkY29sdW1uRmlsdGVyaW5nRW5hYmxlZDsKCQlpZiAoJGNvbHVtbkZpbHRlcmluZ0VuYWJsZWQpCgkJewoJCQkkcGFyYW1zLT5jb2x1bW5GaWx0ZXJpbmdJbnB1dHMgPSAkdGhpcy0+cmVuZGVyQ29sdW1uRmlsdGVyaW5nSW5wdXRzKCk7CgkJCSRwYXJhbXMtPmNvbHVtbkZpbHRlckJ1dHRvbkxhYmVsID0gJHRoaXMtPmNvbHVtbkZpbHRlckJ1dHRvbkxhYmVsOwoJCQkkcGFyYW1zLT5jb2x1bW5GaWx0ZXJQYW5lbEhlYWRlciA9ICR0aGlzLT5jb2x1bW5GaWx0ZXJQYW5lbEhlYWRlcjsKCQkJJHBhcmFtcy0+Y29sdW1uRmlsdGVyUGFuZWxMaXN0ID0gJHRoaXMtPnJlbmRlckNvbHVtbkZpbHRlcmluZ1BhbmVsTGlzdCgpOwoJCX0KCQkkcGFyYW1zLT5pbmxpbmVDU1MgPSAkdGhpcy0+cmVuZGVySW5saW5lQ1NTKCk7CgkJJHBhcmFtcy0+Z3JpZFRpdGxlID0gJHRoaXMtPmdyaWRUaXRsZTsKCQkkcGFyYW1zLT5zdWJoZWFkZXJSb3cgPSAkdGhpcy0+cmVuZGVyU3ViaGVhZGVyUm93KCk7CgkJaWYgKCR0aGlzLT5tb2RlbC0+Z2V0TnVtUm93cygpID4gMCkKCQl7CgkJCSRwYXJhbXMtPmRhdGFTZWN0aW9uID0gJHRoaXMtPnJlbmRlckRhdGFTZWN0aW9uKCk7CgkJfQoJCWVsc2UgCgkJewoJCQkkcGFyYW1zLT5kYXRhU2VjdGlvbiA9ICR0aGlzLT5yZW5kZXJFbXB0eURhdGFTZWN0aW9uKCk7CgkJfQoJCSRwYXJhbXMtPmNvbHVtbkhlYWRlckNvdW50ID0gY291bnQoJHRoaXMtPm1vZGVsLT5nZXRDb2x1bW5zKCkpOwoJCWlmICgkdGhpcy0+cGFnaW5hdGVkKQoJCXsKCQkJJHRvdGFsUGFnZXMgPSBjZWlsKCR0aGlzLT5tb2RlbC0+Z2V0TnVtUm93cygpLyR0aGlzLT5wYWdlU2l6ZSk7CgkJCWlmICgkdG90YWxQYWdlcyA+IDEpCgkJCXsKCQkJCSRwYWdlTnVtYmVycyA9IGFycmF5KCk7CgkJCQlmb3IgKCRpPTE7ICRpPD0kdG90YWxQYWdlczsgJGkrKykKCQkJCXsKCQkJCQkkcGFnZU51bWJlcnNbJGldID0gJGk7CgkJCQl9CgkJCQkkcGFyYW1zLT5pc1BhZ2luYXRlZCA9ICR0aGlzLT5wYWdpbmF0ZWQ7CgkJCQkkcGFyYW1zLT5jdXJyZW50UGFnZSA9ICR0aGlzLT5jdXJyZW50UGFnZTsKCQkJCSRwYXJhbXMtPnBhZ2VTZWxlY3RvciA9IE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkcGFnZU51bWJlcnMsJHRoaXMtPmN1cnJlbnRQYWdlKTsKCQkJCSRwYXJhbXMtPnRvdGFsUGFnZXMgPSAkdG90YWxQYWdlczsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRwYXJhbXMtPmlzUGFnaW5hdGVkID0gZmFsc2U7CgkJCX0KCQl9CgkJJG91dHB1dCA9ICIiOwoJCWlmICgkdGhpcy0+aGFzQmFja0xpbmspCgkJewoJCQkkYmFja2xpbmtUZXh0ID0gKCFlbXB0eSgkdGhpcy0+YmFja2xpbmtUZXh0KSk/JHRoaXMtPmJhY2tsaW5rVGV4dDoiQmFjayB0byBwcmV2aW91cyI7CgkJCSRvdXRwdXQuPSAiPGEgb25DbGljaz1cIm1tanMubmF2aWdhdGVCYWNrKCd7JHRoaXMtPmNvbnRhaW5lcn0nKTtcIj57JGJhY2tsaW5rVGV4dH08L2E+PGJyLz4iOwoJCX0KCQkkb3V0cHV0IC49IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgkdGhpcy0+Z3JpZFRlbXBsYXRlLCRwYXJhbXMpOwoJCXJldHVybiAkb3V0cHV0OwoJfQoJCgkKCXByb3RlY3RlZCBmdW5jdGlvbiByZW5kZXJFbXB0eURhdGFTZWN0aW9uKCkKCXsKCQkkbnVtQ29sdW1ucyA9IGNvdW50KCR0aGlzLT5tb2RlbC0+Z2V0Q29sdW1ucygpKTsKCQkkb3V0cHV0ID0gIjx0ciBjbGFzcz0neyR0aGlzLT5vZGRSb3dDbGFzc30nPlxuIjsKCQkkb3V0cHV0Lj0gIjx0ZCBjbGFzcz0neyR0aGlzLT5kYXRhQ2VsbENsYXNzfScgY29sc3Bhbj0neyRudW1Db2x1bW5zfScgYWxpZ249J2NlbnRlcic+eyR0aGlzLT5ub0RhdGFDb250ZW50fTwvdGQ+XG4iOwoJCSRvdXRwdXQuPSAiPC90cj5cbiI7CgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldENvbHVtbkZpbHRlcmluZ0VuYWJsZWQoJGVuYWJsZWQ9dHJ1ZSkKCXsKCQkkdGhpcy0+Y29sdW1uRmlsdGVyaW5nRW5hYmxlZCA9ICRlbmFibGVkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRDb2x1bW5GaWx0ZXJpbmdFbmFibGVkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmNvbHVtbkZpbHRlcmluZ0VuYWJsZWQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGlzQ29sdW1uRmlsdGVyaW5nRW5hYmxlZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5jb2x1bW5GaWx0ZXJpbmdFbmFibGVkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDb2x1bW5GaWx0ZXJCdXR0b25MYWJlbCgkbGFiZWwpCgl7CgkJJHRoaXMtPmNvbHVtbkZpbHRlckJ1dHRvbkxhYmVsID0gJGxhYmVsOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRDb2x1bW5GaWx0ZXJCdXR0b25MYWJlbCgpCgl7CgkJcmV0dXJuICR0aGlzLT5jb2x1bW5GaWx0ZXJCdXR0b25MYWJlbDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0Q29sdW1uRmlsdGVyUGFuZWxIZWFkZXIoJGNvbHVtbkZpbHRlclBhbmVsSGVhZGVyKQoJewoJCSR0aGlzLT5jb2x1bW5GaWx0ZXJQYW5lbEhlYWRlciA9ICRjb2x1bW5GaWx0ZXJQYW5lbEhlYWRlcjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q29sdW1uRmlsdGVyUGFuZWxIZWFkZXIoKQoJewoJCXJldHVybiAkdGhpcy0+Y29sdW1uRmlsdGVyUGFuZWxIZWFkZXI7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldEdyaWRUaXRsZSgkZ3JpZFRpdGxlKQoJewoJCSR0aGlzLT5ncmlkVGl0bGUgPSAkZ3JpZFRpdGxlOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRHcmlkVGl0bGUoKQoJewoJCXJldHVybiAkdGhpcy0+Z3JpZFRpdGxlOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRQYWdpbmF0ZWQoJHBhZ2luYXRlZCkKCXsKCQkkdGhpcy0+cGFnaW5hdGVkID0gJHBhZ2luYXRlZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UGFnaW5hdGVkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnBhZ2luYXRlZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0Q3VycmVudFBhZ2UoJGN1cnJlbnRQYWdlKQoJewoJCSR0aGlzLT5jdXJyZW50UGFnZSA9ICRjdXJyZW50UGFnZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q3VycmVudFBhZ2UoKQoJewoJCXJldHVybiAkdGhpcy0+Y3VycmVudFBhZ2U7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFBhZ2VTaXplKCRwYWdlU2l6ZSkKCXsKCQkkdGhpcy0+cGFnZVNpemUgPSAkcGFnZVNpemU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFBhZ2VTaXplKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnBhZ2VTaXplOwoJfQoKCiAgICAvKioKICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBjcmVhdGUgYSBncmlkIHVzaW5nIGEgd3BkYiByZXN1bHRzZXQgb2YgdHlwZSBBUlJBWV9LLgogICAgICoKICAgICAqIEBwYXJhbSAkZ3JpZElkZW50aWZpZXIgVGhlIGlkZW50aWZpZXIgZm9yIHRoZSB2aXN1YWwgZWxlbWVudAogICAgICogQHBhcmFtICRjb2x1bW5IZWFkZXJzIEFuIGFycmF5IG9mIGNvbHVtbnMgYW5kIHRoZWlyIGRlZmluaXRpb25zCiAgICAgKiBAcGFyYW0gTU1fUmVwb3J0UmVzcG9uc2UgJHJlc3VsdE9iamVjdCBBIHJlcG9ydCByZXNwb25zZSBvYmplY3QgY29udGFpbmluZyB0aGUgZGF0YQogICAgICogQHBhcmFtIGFycmF5ICRkaXJlY3RpdmVzIChvcHRpb25hbCkgQW4gYXJyYXkgb2YgZGlyZWN0aXZlcyB0byBwYXNzIHRvIHRoZSBncmlkCiAgICAgKgogICAgICogQHJldHVybiBNTV9SZXBvcnREYXRhZ3JpZHxudWxsCiAgICAgKi8KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY3JlYXRlRnJvbURhdGEoJGdyaWRJZGVudGlmaWVyLCAkY29sdW1uSGVhZGVycywgTU1fUmVwb3J0UmVzcG9uc2UgJHJlc3VsdE9iamVjdCwgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdE9iamVjdCkpCgkJewoJCQlyZXR1cm4gbnVsbDsKCQl9CgkJCgkJLy9jcmVhdGUgdGhlIGdyaWQKCQkkZ3JpZCA9IG5ldyBNTV9SZXBvcnREYXRhZ3JpZCgkZ3JpZElkZW50aWZpZXIsICRkaXJlY3RpdmVzKTsKCQkKCQkvL2NyZWF0ZSBhbmQgY29uZmlndXJlIHRoZSBkYXRhIG1vZGVsCgkJJGdyaWREYXRhID0gbmV3IE1NX1JlcG9ydERhdGFncmlkTW9kZWwoKTsKCQkkZ3JpZERhdGEtPnNldENvbHVtbkhlYWRlcnNGcm9tQXJyYXkoJGNvbHVtbkhlYWRlcnMpOwoJCQoJCS8vbm93IGFkZCBlYWNoIHJvdyB0byB0aGUgZ3JpZCBkYXRhIG1vZGVsCgkJJHJlc3VsdHNldCA9ICRyZXN1bHRPYmplY3QtPm1lc3NhZ2U7CgkJaWYgKCRyZXN1bHRzZXQpCgkJewoJCQlmb3JlYWNoICgkcmVzdWx0c2V0IGFzICR2KQoJCQl7CgkJCQkkZ3JpZERhdGEtPmFkZFJvdygkdik7CgkJCX0KCQl9CgkJCgkJLy9wbHVnIHRoZSBtb2RlbCBpbnRvIHRoZSBncmlkCgkJJGdyaWQtPnNldE1vZGVsKCRncmlkRGF0YSk7CgkJCgkJcmV0dXJuICRncmlkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gYWRkQmFja0xpbmsoJGhhc0JhY2tsaW5rLCAkYmFja2xpbmtUZXh0PSIiKQoJewoJCSR0aGlzLT5oYXNCYWNrTGluayA9IChib29sKSRoYXNCYWNrbGluazsKCQkkdGhpcy0+YmFja2xpbmtUZXh0ID0gKCR0aGlzLT5oYXNCYWNrTGluayk/JGJhY2tsaW5rVGV4dDoiIjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Tm9EYXRhQ29udGVudCgpCgl7CgkJcmV0dXJuICR0aGlzLT5ub0RhdGFDb250ZW50OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXROb0RhdGFDb250ZW50KCRub0RhdGFDb250ZW50KQoJewoJCSR0aGlzLT5ub0RhdGFDb250ZW50ID0gJG5vRGF0YUNvbnRlbnQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRTaG93SGVhZGVyUm93KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnNob3dIZWFkZXJSb3c7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRTaG93SGVhZGVyUm93KCRzaG93SGVhZGVyUm93KQoJewoJCSR0aGlzLT5zaG93SGVhZGVyUm93ID0gKGJvb2wpJHNob3dIZWFkZXJSb3c7Cgl9CgkKCQp9', 0, '2018-11-21 06:38:55'),
(210, 'logintoken', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fTG9naW5Ub2tlbiBleHRlbmRzIE1NX0VudGl0eQp7CQoJcHJpdmF0ZSAkbG9naW5Ub2tlbj0iIjsKCXByaXZhdGUgJHVzZXJJZD0iIjsKCXByaXZhdGUgJGFnZT0iIjsKCQoJLyoqCgkgKiBnZXREYXRhKCkKCSAqIFJldHJpZXZlIGEgbG9naW4gdG9rZW4gZW50aXR5IGZyb20gdGhlIGRiLiAKCSAqIFJlcXVpcmVzIHRoYXQgdGhlIHRva2VuIG9yIHRoZSBpZCBiZSBzZXQgb24gdGhlIG9iamVjdCAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCFlbXB0eSgkdGhpcy0+bG9naW5Ub2tlbikpIAoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfTE9HSU5fVE9LRU4uIiBXSEVSRSBsb2dpbl90b2tlbj0nIi4kdGhpcy0+bG9naW5Ub2tlbi4iJzsiOwoJCX0KCQllbHNlIAoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfTE9HSU5fVE9LRU4uIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIic7IjsKCQl9CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCS8qKgoJICogCgkgKiBTZXRzIHRoZSBlbnRpdHkgZmllbGRzIGJhc2VkIG9uIHRoZSBjb250ZW50IG9mICRkYXRhCgkgKiBAcGFyYW0gb2JqZWN0ICRkYXRhCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPmxvZ2luVG9rZW4gPSAkZGF0YS0+bG9naW5fdG9rZW47CgkJCSR0aGlzLT51c2VySWQgPSAkZGF0YS0+dXNlcl9pZDsKCQkJJHRoaXMtPmFnZSA9ICRkYXRhLT5hZ2U7CgkJCQkJCQoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJCgkvKioKCSAqIENvbW1pdHMgdGhlIHZhbHVlcyBzdG9yZWQgaW4gdGhlIGVudGl0eSB0byB0aGUgZGIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkZG9VcGRhdGUgPSBpc3NldCgkdGhpcy0+aWQpICYmICR0aGlzLT5pZCAhPSAiIiAmJiBpbnR2YWwoJHRoaXMtPmlkKSA+IDA7CgkJCgkJTU1fVHJhbnNhY3Rpb246OmJlZ2luKCk7CgkJdHJ5CgkJewkKCQkJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfTE9HSU5fVE9LRU4uIiBzZXQgIiAuCgkJCSAJCQkiCWxvZ2luX3Rva2VuID0gJyVzJywiIC4KCQkJIAkJCSIJdXNlcl9pZD0nJXMnLCIgLgoJCQkgCQkJIglvcmRlcl9pZD0nJXMnLCIgLgoJCQkgCQkJIglhZ2U9Tk9XKCkiLgoJCQkgCQkJIiI7CgkJCX0KCQkgCWVsc2UgCgkJIAl7CgkJCQkkc3FsID0gInVwZGF0ZSAiLk1NX1RBQkxFX0xPR0lOX1RPS0VOLiIgc2V0ICIgLgoJCQkgCQkJIglsb2dpbl90b2tlbiA9ICclcycsIiAuCgkJCSAJCQkiCXVzZXJfaWQ9JyVzJywiIC4KCQkJIAkJCSIJYWdlPU5PVygpIHdoZXJlIGlkID0gJ3skdGhpcy0+aWR9JyIuCgkJCSAJCQkiIjsKCQkgCX0KCQkJCgkJIAkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+bG9naW5Ub2tlbiwgJHRoaXMtPnVzZXJJZCk7CgkJIAkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkJIAkKCQkgCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCSAJewoJCSAJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8gY3JlYXRlIGxvZ2luIHRva2VuICgiLiRwcmVwYXJlZFNxbC4iKSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCSAJfQoJCSAJCgkJIAlpZighJGRvVXBkYXRlKSB7CgkJIAkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkgCX0KCQl9CgkJY2F0Y2goRXhjZXB0aW9uICRleCkKCQl7CQoJCSAJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBsb2dpbiB0b2tlbiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlNTV9UcmFuc2FjdGlvbjo6Y29tbWl0KCk7CgkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCS8qKgoJICogRGVsZXRlcyB0aGUgcm93IGhhdmluZyBhbiBpZCBtYXRjaGluZyB0aGF0IHN0b3JlZCBpbiB0aGUgZW50aXR5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkZWxldGUoKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0xPR0lOX1RPS0VOLiIgV0hFUkUgaWQ9JyVkJyBMSU1JVCAxIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+aWQpKTsKCQkKCQlpZigkcmVzdWx0cykgewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJLyoqCgkgKiBEZWxldGVzIGFsbCBsb2dpbiB0b2tlbnMgb2xkZXIgdGhhbiB0aGUgbnVtYmVyIG9mIGRheXMgc3BlY2lmaWVkIGluIHRoZSBsb2dpbiB0b2tlbiBsaWZlc3BhbiBjb25maWd1cmF0aW9uCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBvcGVyYXRpb24gc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZGVsZXRlQWdlZCgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0xPR0lOX1RPS0VOLiIgV0hFUkUgYWdlIDwgKG5vdygpIC0gSU5URVJWQUwgIi5NTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9MT0dJTl9UT0tFTl9MSUZFU1BBTikuIiBEQVkpIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQoJCWlmKCRyZXN1bHRzKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJLyoqCgkgKiBHZW5lcmF0ZXMgYSBuZXcgcmFuZG9tIDMyIGFscGhhbnVtZXJpYyBzdHJpbmcgYW5kIGFzc29jaWF0ZXMgaXQgd2l0aCBhIHVzZXIgaWQgYW5kIG9yZGVyIGlkCgkgKiBAcGFyYW0gaW50ZWdlciAkdXNlcklkIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBBIHJlc3BvbnNlIHRoYXQgY29udGFpbnMgdGhlIGdlbmVyYXRlZCBrZXkgaW4gdGhlIG1lc3NhZ2Ugb24gc3VjY2VzcywgYW5kIGFuIGVycm9yIHJlc3BvbnNlIG9uIGVycm9yCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGVUb2tlbigkdXNlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsgCgkJCgkJTU1fTG9naW5Ub2tlbjo6ZGVsZXRlQWdlZCgpOwoJCQoJCWlmIChlbXB0eSgkdXNlcklkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVzZXIgSUQgbXVzdCBiZSBzZXQgd2hlbiBnZW5lcmF0aW5nIGEgbG9naW4gdG9rZW4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJHJlY2VudExvZ2luVG9rZW4gPSBzZWxmOjpnZXRSZWNlbnRMb2dpblRva2VuQnlVc2VyKCR1c2VySWQpOwoJCQoJCWlmKCFlbXB0eSgkcmVjZW50TG9naW5Ub2tlbikpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZWNlbnRMb2dpblRva2VuLCBNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwkKCQl9CgkJCgkJZG8gewoJCQkvL2dlbmVyYXRlIHRoZSBrZXkKCQkJJG5ld0tleSA9ICIiOwoJCQlmb3IgKCRpPTA7ICRpPDMyOyAkaSsrKSAvL2NyZWF0ZSByYW5kb20gMzIgY2hhciBzdHJpbmcKCQkJewoJCQkJJHR5cGUgPSByYW5kKDEsMyk7CgkJCQlzd2l0Y2ggKCR0eXBlKSB7CgkJCQkJY2FzZSAxOiAvL251bWVyaWMKCQkJCQkJJG5ld0tleS49Y2hyKHJhbmQoNDgsNTcpKTsKCQkJCQkJYnJlYWs7CgkJCQkJY2FzZSAyOiAvL3VwcGVyIGFscGhhCgkJCQkJCSRuZXdLZXkuPWNocihyYW5kKDY1LDkwKSk7CgkJCQkJCWJyZWFrOwoJCQkJCWNhc2UgMzogLy9sb3dlciBhbHBoYQoJCQkJCWRlZmF1bHQ6CgkJCQkJCSRuZXdLZXkuPWNocihyYW5kKDk3LCAxMjIpKTsKCQkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQkJCgkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfTE9HSU5fVE9LRU4uIiB3aGVyZSBsb2dpbl90b2tlbj0nJXMnIiwkbmV3S2V5KSk7CgkJfSB3aGlsZSAoY291bnQoJHJlc3VsdHMpID4gMCk7IC8vaXRlcmF0ZSB3aGlsZSBrZXkgaXMgbm90IHVuaXF1ZS4KCQkKCQkvL3Nob3VsZCBiZSBzYWZlCgkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoImluc2VydCBpbnRvICIuTU1fVEFCTEVfTE9HSU5fVE9LRU4uIiBzZXQgbG9naW5fdG9rZW49JyVzJywgdXNlcl9pZD0nJWQnLCBhZ2U9bm93KCkiLCRuZXdLZXksJHVzZXJJZCkpOwoJCWlmKCRyZXN1bHRzID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNyZWF0aW5nIGxvZ2luIHRva2VuIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG5ld0tleSxNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwkKCQl9Cgl9CgkKCS8qKgoJICogTG9va3VwIGEgbG9naW4gdG9rZW4gYnkga2V5LiBJZiBmb3VuZHMgc3RvcmVzIHRoZSB1c2VyIGlkIGluIHRoZSBzZXNzaW9uCgkgKiBAcGFyYW0gU3RyaW5nICRsb2dpblRva2VuIAoJICogQHJldHVybiBNTV9Mb2dpblRva2VuIFRoZSBsb2dpbiB0b2tlbiBvYmplY3Qgd2l0aCB1c2VyIGlkIGluZm8gcG9wdWxhdGVkIG9uIHN1Y2Nlc3MsIGFuIGludmFsaWQgb2JqZWN0IG9uIGZhaWx1cmUKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRMb2dpblRva2VuQnlUb2tlbigkbG9naW5Ub2tlbikKCXsKCQlNTV9Mb2dpblRva2VuOjpkZWxldGVBZ2VkKCk7CgkJJGtleSA9IG5ldyBNTV9Mb2dpblRva2VuKCk7CgkJJGtleS0+c2V0TG9naW5Ub2tlbigkbG9naW5Ub2tlbik7CgkJJGtleS0+Z2V0RGF0YSgpOwoJCWlmICgka2V5LT5pc1ZhbGlkKCkpCgkJewoJCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xBU1RfVVNFUl9JRCwgJGtleS0+Z2V0VXNlcklkKCkpOwoJCX0KCQlyZXR1cm4gJGtleTsKCX0gCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UmVjZW50TG9naW5Ub2tlbkJ5VXNlcigkdXNlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIlNFTEVDVCBsb2dpbl90b2tlbiBGUk9NICIuTU1fVEFCTEVfTE9HSU5fVE9LRU4uIiBXSEVSRSBhZ2UgPiAobm93KCkgLSBJTlRFUlZBTCAyNCBIT1VSKSBBTkQgdXNlcl9pZCA9IHskdXNlcklkfSBMSU1JVCAxOyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyb3cgJiYgaXNzZXQoJHJvdy0+bG9naW5fdG9rZW4pKSAKCQl7CgkJCXJldHVybiAkcm93LT5sb2dpbl90b2tlbjsKCQl9CgkJcmV0dXJuICIiOwoJfQoJCgkvKioKCSAqIFNldCB0aGUgbG9naW4gdG9rZW4KCSAqIEBwYXJhbSBzdHJpbmcgJGxvZ2luVG9rZW4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldExvZ2luVG9rZW4oJGxvZ2luVG9rZW4pCgl7CgkJJHRoaXMtPmxvZ2luVG9rZW4gPSAkbG9naW5Ub2tlbjsKCX0KCQoJLyoqCgkgKiAKCSAqIFJldHJpZXZlIHRoZSBsb2dpbiB0b2tlbgoJICogQHJldHVybiBzdHJpbmcgdGhlIGxvZ2luIHRva2VuCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRMb2dpblRva2VuKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxvZ2luVG9rZW47Cgl9CgkKCS8qKgoJICogU2V0IHRoZSB1c2VyIGlkCgkgKiBAcGFyYW0gc3RyaW5nICR1c2VyIGlkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRVc2VySWQoJHVzZXJJZCkKCXsKCQkkdGhpcy0+dXNlcklkID0gJHVzZXJJZDsKCX0KCQoJLyoqCgkgKgoJICogUmV0cmlldmUgdGhlIHVzZXIgaWQKCSAqIEByZXR1cm4gc3RyaW5nIHRoZSB1c2VyIGlkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRVc2VySWQoKQoJewoJCXJldHVybiAkdGhpcy0+dXNlcklkOwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(211, 'formtagprocessor', 'Y2xhc3MgTU1fRm9ybVRhZ1Byb2Nlc3Nvcgp7CQoJcHVibGljIHN0YXRpYyAkVEFHX0ZPUk0gPSAibW1fZm9ybSI7CglwdWJsaWMgc3RhdGljICRUQUdfRk9STV9TRUNUSU9OID0gIm1tX2Zvcm1fc2VjdGlvbiI7CglwdWJsaWMgc3RhdGljICRUQUdfRk9STV9TVUJTRUNUSU9OID0gIm1tX2Zvcm1fc3Vic2VjdGlvbiI7CglwdWJsaWMgc3RhdGljICRUQUdfRk9STV9GSUVMRCA9ICJtbV9mb3JtX2ZpZWxkIjsKCXB1YmxpYyBzdGF0aWMgJFRBR19GT1JNX0RBVEEgPSAibW1fZm9ybV9kYXRhIjsKCXB1YmxpYyBzdGF0aWMgJFRBR19GT1JNX01FU1NBR0UgPSAibW1fZm9ybV9tZXNzYWdlIjsKCXB1YmxpYyBzdGF0aWMgJFRBR19GT1JNX0JVVFRPTiA9ICJtbV9mb3JtX2J1dHRvbiI7CgkKCXByb3RlY3RlZCBzdGF0aWMgJHN1YlRhZ3MgPSBhcnJheSgiTU1fRm9ybV9TZWN0aW9uIiwiTU1fRm9ybV9GaWVsZCIsIk1NX0Zvcm1fRGF0YSIsIk1NX0Zvcm1fTWVzc2FnZSIsIk1NX0Zvcm1fQnV0dG9uIiwiTU1fRm9ybV9TdWJzZWN0aW9uIik7CgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgaXMgcmVsYXRlZCB0byBhIGZvcm0uCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHNtYXJ0VGFnIHRoZSBuYW1lIG9mIHRoZSBTbWFydFRhZwoJICogQHJldHVybiBCb29sZWFuIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgcGFzc2VkIGlzIHJlbGF0ZWQgdG8gYSBmb3JtLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzRm9ybVNtYXJ0VGFnKCRzbWFydFRhZykKCXsKCQlzd2l0Y2goJHNtYXJ0VGFnKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JFRBR19GT1JNOgoJCQljYXNlIHNlbGY6OiRUQUdfRk9STV9TRUNUSU9OOgoJCQljYXNlIHNlbGY6OiRUQUdfRk9STV9TVUJTRUNUSU9OOgoJCQljYXNlIHNlbGY6OiRUQUdfRk9STV9GSUVMRDoKCQkJY2FzZSBzZWxmOjokVEFHX0ZPUk1fREFUQToKCQkJY2FzZSBzZWxmOjokVEFHX0ZPUk1fTUVTU0FHRToKCQkJY2FzZSBzZWxmOjokVEFHX0ZPUk1fQlVUVE9OOgoJCQkJcmV0dXJuIHRydWU7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBmYWxzZTsKCQl9Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZWdpc3RlckZvcm1TdWJ0YWdzKCkKCXsKCQkkdXRpbCA9IG5ldyBNTV9TbWFydFRhZ1V0aWwoKTsKCQlmb3JlYWNoIChzZWxmOjokc3ViVGFncyBhcyAkc3ViVGFnKQoJCXsKCQkJYWRkX3Nob3J0Y29kZSgkc3ViVGFnLGFycmF5KCR1dGlsLCAnYWRkU2hvcnRDb2RlJykpOwoJCX0KCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGRlcmVnaXN0ZXJGb3JtU3VidGFncygpCgl7CgkJJHV0aWwgPSBuZXcgTU1fU21hcnRUYWdVdGlsKCk7CgkJZm9yZWFjaCAoc2VsZjo6JHN1YlRhZ3MgYXMgJHN1YlRhZykKCQl7CgkJCXJlbW92ZV9zaG9ydGNvZGUoJHN1YlRhZyk7CgkJfQoJfQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgbmFtZSBhbmQgYSBudW1iZXIgb2YgcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBTbWFydFRhZyBhbmQgbWFrZXMgYSBjYWxsIHRvIAoJICogdGhlIGFwcHJvcHJpYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBTbWFydFRhZyBuYW1lLgoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IHRvIHByb2Nlc3MKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc1NtYXJ0VGFnKCRzbWFydFRhZywgJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkZm9ybVRhZyA9IGZhbHNlOwoJCWlmKCRzbWFydFRhZyA9PSBzZWxmOjokVEFHX0ZPUk0pCgkJewoJCQkkZm9ybVRhZyA9IHRydWU7CgkJCS8vcmVnaXN0ZXJpbmcgc3VidGFncyAoU21hcnRUYWdzIHRoYXQgZGVwZW5kIG9uIHRoZSBjb250ZXh0IG9mIGEgcGFyZW50IHRhZyB0byBydW4gcHJvcGVybHkpIG9ubHkgd2hlbiBpbnNpZGUgb2YgdGhlIHBhcmVudCB0YWcKCQkJLy9wcmV2ZW50cyB0aGVtIGZyb20gYmVpbmcgcnVuIG91dCBvZiBjb250ZXh0IGJ5IHRoZSBuZXcgd29yZHByZXNzIGRvX3Nob3J0Y29kZSgpIGNoYW5nZXMKCQkJc2VsZjo6cmVnaXN0ZXJGb3JtU3VidGFncygpOwoJCQkKCQkJLy9yZXZlcnNlIGFueSBlYXJsaWVyIGVudGl0eSBzdWJzdGl0dXRpb25zIGRvbmUgYnkgd29yZHByZXNzIG9uIHN1YnRhZ3MgY29udGFpbmVkIGluIHRoZSBjb250ZW50IAoJCQkkY29udGVudCA9IHByZWdfcmVwbGFjZSgiLyg8YVxzK1tePl0qaHJlZj1bXj5dKikoJiM5MTtNTV8pKFtePl0qKSgmIzkzOykvaXMiLCIkMVtNTV8kM10iLCRjb250ZW50KTsKCQl9CgkJZWxzZQoJCXsKCQkJLy8gY2hlY2sgdGhhdCBhIGZvcm0gaXMgc3RvcmVkIGluIHRoZSBzZXNzaW9uCgkJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCQkKCQkJaWYoIWlzc2V0KCRmb3JtKSB8fCAkZm9ybSA9PSBudWxsIHx8ICRmb3JtLT5pc1ZhbGlkKCkgPT0gZmFsc2UpCgkJCXsKCQkJCXJldHVybiAiVW5hYmxlIHRvIHByb2Nlc3MgU21hcnRUYWcgeyRjb2RlfS4gSXQgbXVzdCBiZSBjb250YWluZWQgd2l0aGluIGEgTU1fRm9ybSBTbWFydFRhZy4iOwoJCQl9CgkJfQoJCQoJCSRyZXR1cm5WYWx1ZSA9ICIiOwoJCXN3aXRjaCgkc21hcnRUYWcpIAoJCXsKCQkJY2FzZSBzZWxmOjokVEFHX0ZPUk06CgkJCQkkcmV0dXJuVmFsdWUgPSBzZWxmOjptbV9mb3JtKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBzZWxmOjokVEFHX0ZPUk1fU0VDVElPTjoJCQkJCgkJCWNhc2Ugc2VsZjo6JFRBR19GT1JNX1NVQlNFQ1RJT046CgkJCQkkcmV0dXJuVmFsdWUgPSAkZm9ybS0+bW1fZm9ybV9zZWN0aW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBzZWxmOjokVEFHX0ZPUk1fRklFTEQ6CgkJCQkkcmV0dXJuVmFsdWUgPSAkZm9ybS0+bW1fZm9ybV9maWVsZCgkY29udGVudCwgJGF0dHMsICRjb2RlKTsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2Ugc2VsZjo6JFRBR19GT1JNX0RBVEE6CgkJCQkkcmV0dXJuVmFsdWUgPSAkZm9ybS0+bW1fZm9ybV9kYXRhKCRjb250ZW50LCAkYXR0cywgJGNvZGUpOwoJCQkJYnJlYWs7CgkJCQkKCQkJY2FzZSBzZWxmOjokVEFHX0ZPUk1fTUVTU0FHRToKCQkJCSRyZXR1cm5WYWx1ZSA9ICRmb3JtLT5tbV9mb3JtX21lc3NhZ2UoJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIHNlbGY6OiRUQUdfRk9STV9CVVRUT046CgkJCQkkcmV0dXJuVmFsdWUgPSAkZm9ybS0+bW1fZm9ybV9idXR0b24oJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQlicmVhazsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJJHJldHVyblZhbHVlID0gIkludmFsaWQgRm9ybSBTbWFydFRhZyB7JHNtYXJ0VGFnfSBmb3VuZC4iOwoJCQkJYnJlYWs7CgkJfQoJCQoJCWlmICgkZm9ybVRhZykKCQl7CgkJCXNlbGY6OmRlcmVnaXN0ZXJGb3JtU3VidGFncygpOwoJCX0KCQlyZXR1cm4gJHJldHVyblZhbHVlOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gcHJvY2VzcyB0aGUgTU1fRm9ybSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjcmVhdGluZyBhbiBpbnN0YW5jZSBvZiB0aGUKCSAqIE1NX0Zvcm0gY2xhc3MgYmFzZWQgb24gdGhlICRwcm9kdWN0SWQgcmV0cmlldmVkIGZyb20gdGhlIGF0dHJpYnV0ZXMKCSAqIHBhc3NlZCBpbiAkYXR0cyBvciBmcm9tIHRoZSAkX0dFVCBwYXJhbXMuIEl0IGlzIGZ1cnRoZXIgcmVzcG9uc2libGUgZm9yIHNhdmluZyB0aGlzIGluc3RhbmNlIGluIHRoZSAKCSAqIHNlc3Npb24gc28gdGhhdCBhbGwgc3Vic2VxdWVudCBDaGVja291dEZvcm0gdGFncyBwcm9jZXNzZWQgd2lsbCBiZSBhYmxlIHRvIGFjY2VzcyBpdC4gSXQgdGhlbiBjYWxscyB0aGUgZG9fc2hvcnRjb2RlKCkgCgkgKiBtZXRob2Qgb24gdGhlICRjb250ZW50IHBhcmFtZXRlciBpbiBvcmRlciB0byByZWN1cnNpdmVseSBwcm9jZXNzIGFueSBTbWFydFRhZ3MgdGhhdCBvY2N1ciBpbiAkY29udGVudC4KCSAqIEZvbGxvd2luZyBhbGwgcHJvY2Vzc2luZywgdGhlIGluc3RhbmNlIGlzIGNsZWFyZWQgZnJvbSB0aGUgc2Vzc2lvbiBhbmQgdGhlIGZ1bGx5IHByb2Nlc3NlZCBDaGVja291dEZvcm0gCgkgKiB0YWdzIGFyZSByZXR1cm5lZCBhcyBIVE1MLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gbW1fZm9ybSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiIjsKCQkKCQlpZihpc3NldCgkYXR0c1sidHlwZSJdKSAmJiAkYXR0c1sidHlwZSJdICE9ICIiKQoJCXsKCQkJJGZvcm0gPSBNTV9BYnN0cmFjdEZvcm06OmdldEZvcm0oJGF0dHNbInR5cGUiXSwgJGF0dHMpOwoJCQkKCQkJaWYoJGZvcm0tPmlzVmFsaWQoKSkKCQkJewoJCQkJTU1fT2JqZWN0Q2FjaGU6OnNldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0sJGZvcm0pOwoJCQkJCgkJCQkvLyB0aGUgYm9keSBtdXN0IGJlIGdlbmVyYXRlZCBmaXJzdCBiZWNhdXNlIGluIHByb2Nlc3NpbmcgdGhlIFNtYXJ0VGFncyBzb21lCgkJCQkvLyBwYXJhbWV0ZXJzIGFyZSBzZXQgb24gdGhlIGZvcm0gaW5zdGFuY2UgdGhhdCBhcmUgdXNlIGluIGdlbmVyYXRpbmcgdGhlIGhlYWRlcgoJCQkJJGZvcm1Cb2R5ID0gZG9fc2hvcnRjb2RlKCRjb250ZW50KTsKCQkJCQoJCQkJJG91dHB1dFN0ciA9ICRmb3JtLT5nZW5lcmF0ZUZvcm1IZWFkZXIoKS4kZm9ybUJvZHkuJGZvcm0tPmdlbmVyYXRlRm9ybUZvb3RlcigpOwoJCQkJCQoJCQkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkb3V0cHV0U3RyIC49ICI8cCBjbGFzcz1cIm1tLWZvcm0tZXJyb3JcIj4iOwoJCQkJCgkJCQlpZigkZm9ybS0+ZXJyb3IgIT0gIiIpCgkJCQl7CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+ZXJyb3I7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJG91dHB1dFN0ciAuPSAiSW52YWxpZCBmb3JtIHR5cGUgb2YgJ3skYXR0c1sidHlwZSJdfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0uIjsKCQkJCX0KCQkJCQoJCQkJJG91dHB1dFN0ciAuPSAiPC9wPgoiOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCSRvdXRwdXRTdHIgLj0gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGVzIGlzIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9LiI7CgkJfQoKCQlyZXR1cm4gJG91dHB1dFN0cjsKCX0KfQo=', 0, '2018-11-21 06:38:55'),
(212, 'limelightlogview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fTGltZWxpZ2h0TG9nVmlldyBleHRlbmRzIE1NX1JCQUNHZW5lcmFsRW1wbG95ZWVWaWV3CnsKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TRUFSQ0ggPSAic2VhcmNoIjsKCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TRUFSQ0g6CgkJCQkJcmV0dXJuICR0aGlzLT5nZW5lcmF0ZURhdGFHcmlkKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YUdyaWQoJHBvc3Q9bnVsbCkKCXsKCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9saW1lbGlnaHRfbG9nLmRhdGFncmlkLnBocCIsICRwb3N0KTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKCRwb3N0LCBNTV9EYXRhR3JpZCAkZGcpCgl7CgkJJHdoZXJlQ2xhdXNlID0gYXJyYXkoKTsKCQkKCQlpZighZW1wdHkoJHBvc3RbIm1lbWJlcl9pZCJdKSAmJiBpbnR2YWwoJHBvc3RbIm1lbWJlcl9pZCJdKT4wKQoJCXsKCQkJYXJyYXlfcHVzaCgkd2hlcmVDbGF1c2UsICIoY3VzdG9tZXJfaWQ9JyIuaW50dmFsKCRwb3N0WyJtZW1iZXJfaWQiXSkuIicpIik7CgkJfQoJCQoJCWlmKCFlbXB0eSgkcG9zdFsiZnJvbV9kYXRlIl0pKQoJCXsKCQkJJGZyb21EYXRlID0gTU1fVXRpbHM6OmRhdGVUb1VUQygkcG9zdFsnZnJvbV9kYXRlJ10sIlktbS1kIiwiMDA6MDA6MDAiKTsKCQkJYXJyYXlfcHVzaCgkd2hlcmVDbGF1c2UsICIoZGF0ZV9yZWNlaXZlZCA+PSAneyRmcm9tRGF0ZX0nKSIpOwoJCQkKCQkJaWYoIWVtcHR5KCRwb3N0WyJ0b19kYXRlIl0pKQoJCQl7CQkKCQkJCSR0b0RhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvVVRDKCRwb3N0Wyd0b19kYXRlJ10sIlktbS1kIiwiMjM6NTk6NTkiKTsKCQkJCWFycmF5X3B1c2goJHdoZXJlQ2xhdXNlLCAiKGRhdGVfcmVjZWl2ZWQgPD0gJ3skdG9EYXRlfScpIik7CgkJCX0KCQl9CgkKCQkkd2hlcmVDbGF1c2UgPSBqb2luKCIgQU5EICIsICR3aGVyZUNsYXVzZSk7CgkJCgkJJGxsSWRGaWVsZCA9IE1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLiIuaWQiOwoJCSRmaWVsZHMgPSBhcnJheSgKCQkJCQkkbGxJZEZpZWxkLCAnbWVzc2FnZScsICdsb2dfbGV2ZWwnLCAnb3JkZXJfdG90YWwnLCdkYXRlX3JlY2VpdmVkJywgJ29yZGVyX2lkJywgICdjdXN0b21lcl9pZCcsIE1NX1RBQkxFX09SREVSUy4nLnVzZXJfaWQnLAoJCQkJCU1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLicub3JkZXJfc3RhdHVzJyxNTV9UQUJMRV9MSU1FTElHSFRfSVBOX0xPRy4nLnJlZnVuZF9hbW91bnQnLE1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLicuZW1haWwnLAoJCQkJCU1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLicucHJvZHVjdF9pZHMnLE1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLicuc2hpcHBpbmdfaWQnLE1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLicuc3Vic2NyaXB0aW9uc19hY3RpdmUnLAoJCQkJCU1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLicuc3Vic2NyaXB0aW9uX2lkcycsTU1fVEFCTEVfTElNRUxJR0hUX0lQTl9MT0cuJy5hY3Rpb25faWQnLAoJCQkJCU1NX1RBQkxFX0xJTUVMSUdIVF9JUE5fTE9HLicuYWZmaWxpYXRlX2lkJyxNTV9UQUJMRV9MSU1FTElHSFRfSVBOX0xPRy4nLnN1YmFmZmlsaWF0ZV9pZCcsTU1fVEFCTEVfTElNRUxJR0hUX0lQTl9MT0cuJy5pcF9hZGRyZXNzJywKCQkJCQlNTV9UQUJMRV9MSU1FTElHSFRfSVBOX0xPRy4nLmRhdGVfcmVjZWl2ZWQnCgkJKTsKCQlyZXR1cm4gc2VsZjo6Z2V0RGF0YShNTV9UQUJMRV9MSU1FTElHSFRfSVBOX0xPRywgJGZpZWxkcywgJGRnLCAkd2hlcmVDbGF1c2UpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgkdGFibGVOYW1lLCAkZmllbGRzPW51bGwsIE1NX0RhdGFHcmlkICRkZz1udWxsLCAkd2hlcmUgPSAiIiwgJGdldFRvdGFsPWZhbHNlKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRjb2x1bW5zID0gKGlzX251bGwoJGZpZWxkcykpID8gInRibC4qIiA6IGltcGxvZGUoIiwiLCAkZmllbGRzKTsKCQoJCSRzcWxSZXN1bHRDb3VudCA9ICJTRUxFQ1QgY291bnQoZGlzdGluY3QgaWQpIGFzIHRvdGFsIEZST00gIi4kdGFibGVOYW1lOwoJCWlmKCFlbXB0eSgkd2hlcmUpKQoJCXsKCQkJaWYocHJlZ19tYXRjaCgiL14od2hlcmUpLyIsIHN0cnRvbG93ZXIodHJpbSgkd2hlcmUpKSkpCgkJCXsKCQkJCSRzcWxSZXN1bHRDb3VudC49ICIgeyR3aGVyZX0gIjsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRzcWxSZXN1bHRDb3VudC49ICIgd2hlcmUgeyR3aGVyZX0gIjsKCQkJfQoJCX0KCQoJCSRjb3VudFJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWxSZXN1bHRDb3VudCk7CgkKCQkkTGltZWxpZ2h0VGFibGUgPSBNTV9UQUJMRV9MSU1FTElHSFRfSVBOX0xPRzsKCQkkb3JkZXJzVGFibGUgPSBNTV9UQUJMRV9PUkRFUlM7CgkJJGZyb21DbGF1c2UgPSAieyRMaW1lbGlnaHRUYWJsZX0gTEVGVCBKT0lOIHskb3JkZXJzVGFibGV9IG9uICB7JExpbWVsaWdodFRhYmxlfS5vcmRlcl9pZCA9IHskb3JkZXJzVGFibGV9LmlkICI7CgkJCgkJaWYoJGNvdW50Um93KQoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgJ3skY291bnRSb3ctPnRvdGFsfScgYXMgdG90YWwsICIuJGNvbHVtbnMuIiBGUk9NIHskZnJvbUNsYXVzZX0gIjsKCQl9CgkJZWxzZQoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgIi4kY29sdW1ucy4iIEZST00geyRmcm9tQ2xhdXNlfSAiOwoJCX0KCQoJCWlmKCFlbXB0eSgkd2hlcmUpKQoJCXsKCQkJaWYocHJlZ19tYXRjaCgiL14od2hlcmUpLyIsIHN0cnRvbG93ZXIodHJpbSgkd2hlcmUpKSkpCgkJCXsKCQkJCSRzcWwuPSAiIHskd2hlcmV9ICI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc3FsLj0gIiB3aGVyZSB7JHdoZXJlfSAiOwoJCQl9CgkJfQoJCgkJaWYoIWlzX251bGwoJGRnKSAmJiAhaXNfbnVsbCgkZGctPnNvcnRCeSkgJiYgIWVtcHR5KCRkZy0+c29ydEJ5KSkKCQl7CgkJCSRzcWwuPSAiT1JERVIgQlkgeyRkZy0+c29ydEJ5fSB7JGRnLT5zb3J0RGlyfSI7CgkJfQoJCQoJCWlmKCRnZXRUb3RhbCkKCQl7CgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCXJldHVybiAkcmVzdWx0OwoJCX0KCQoJCWlmKCFpc19udWxsKCRkZykpCgkJewoJCQkkc3FsIC49ICRkZy0+Z2V0TGltaXRTcWwoKTsKCQl9IAoJCSAKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoKCQlpZighJHJlc3VsdCB8fCBpc19udWxsKCRyZXN1bHQpKQoJCXsKCQkJcmV0dXJuIGFycmF5KCk7CgkJfQoJCgkJcmV0dXJuICRyZXN1bHQ7Cgl9Cn0K', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(213, 'salesbymembershipreport', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KY2xhc3MgTU1fU2FsZXNCeU1lbWJlcnNoaXBSZXBvcnQgZXh0ZW5kcyBNTV9BZHZhbmNlZFJlcG9ydEJhc2UgCnsKCQoJLy9wcm90ZWN0ZWQgJHZpc3VhbEVsZW1lbnRzID0gYXJyYXkoIk1NX1JlcG9ydERhdGFHcmlkIiwiTU1fUmVwb3J0QmFyQ2hhcnQiLCJNTV9SZXBvcnRQaWVDaGFydCIpOwoJcHJvdGVjdGVkICR2aXN1YWxFbGVtZW50cyA9IGFycmF5KCJNTV9SZXBvcnREYXRhR3JpZCIsIk1NX1JlcG9ydEJhckNoYXJ0Iik7CgkKCXB1YmxpYyBzdGF0aWMgJFNBTEVTQllNRU1CRVJTSElQX1JFUE9SVF9EQVRBR1JJRCA9ICJzYWxlc19ieV9tZW1iZXJzaGlwX2RhdGFncmlkIjsKCXB1YmxpYyBzdGF0aWMgJFNBTEVTQllNRU1CRVJTSElQX1JFUE9SVF9CQVJDSEFSVCA9ICJzYWxlc19ieV9tZW1iZXJzaGlwX2JhcmNoYXJ0IjsKCS8vcHVibGljIHN0YXRpYyAkU0FMRVNCWU1FTUJFUlNISVBfUkVQT1JUX1BJRUNIQVJUID0gInNhbGVzX2J5X21lbWJlcnNoaXBfcGllY2hhcnQiOwoJCgkKCS8vcXVlcnkgaWRlbnRpZmllcnMKCXB1YmxpYyBzdGF0aWMgJFNBTEVTX0JZX01FTUJFUlNISVBfUVVFUlkgPSAic2FsZXNfYnlfbWVtYmVyc2hpcF9xdWVyeSI7CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlclZpc3VhbEVsZW1lbnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpIAoJewoJCXN3aXRjaCAoJGVsZW1lbnRJZGVudGlmaWVyKQoJCXsKCQkJY2FzZSBzZWxmOjokU0FMRVNCWU1FTUJFUlNISVBfUkVQT1JUX0RBVEFHUklEOgoJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJTYWxlc0J5TWVtYmVyc2hpcFJlcG9ydERhdGFncmlkKCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcyk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokU0FMRVNCWU1FTUJFUlNISVBfUkVQT1JUX0JBUkNIQVJUOgoJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJTYWxlc0J5TWVtYmVyc2hpcFJlcG9ydEJhcmNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcyk7CgkJCQlicmVhazsKCQkJY2FzZSBzZWxmOjokU0FMRVNCWU1FTUJFUlNISVBfUkVQT1JUX1BJRUNIQVJUOgoJCQkJcmV0dXJuICR0aGlzLT5yZW5kZXJTYWxlc0J5TWVtYmVyc2hpcFJlcG9ydFBpZWNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwgJHBhcmFtcywgJHdpZHRoLCAkaGVpZ2h0LCAkZGlyZWN0aXZlcyk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUmVwb3J0UmVzcG9uc2UoIlVuYWJsZSB0byByZW5kZXIgdmlzdWFsIGVsZW1lbnQ6IGlkZW50aWZpZXIgIi4oKCFpc19hcnJheSgkZWxlbWVudElkZW50aWZpZXIpICYmICFpc19vYmplY3QoJGVsZW1lbnRJZGVudGlmaWVyKSk/InskZWxlbWVudElkZW50aWZpZXJ9ICI6IiIpLiJ1bmtub3duIixNTV9SZXBvcnRSZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlclNhbGVzQnlNZW1iZXJzaGlwUmVwb3J0RGF0YWdyaWQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksIHNlbGY6OiRTQUxFU19CWV9NRU1CRVJTSElQX1FVRVJZLCAkcGFyYW1zKTsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJCgkJJGdyaWRIZWFkZXJzID0gYXJyYXkoIm1lbWJlcnNoaXBfbmFtZSI9PmFycmF5KCdsYWJlbCc9PiJNZW1iZXJzaGlwIExldmVsIiksIm1lbWJlcl9jb3VudCI9PmFycmF5KCdsYWJlbCc9PiJNZW1iZXJzIiksInJldmVudWUiPT5hcnJheSgnbGFiZWwnPT4iUmV2ZW51ZSIsJ2NvbHVtblR5cGUnPT4nbW9uZXknKSk7CgkJJGdyaWQgPSBNTV9SZXBvcnREYXRhZ3JpZDo6Y3JlYXRlRnJvbURhdGEoc2VsZjo6JFNBTEVTQllNRU1CRVJTSElQX1JFUE9SVF9EQVRBR1JJRCwgJGdyaWRIZWFkZXJzLCAkZGF0YVJlc3BvbnNlLCRkaXJlY3RpdmVzKTsKCQkvLyRncmlkLT5zZXRHcmlkVGl0bGUoIlJldmVudWUgYnkgTWVtYmVyc2hpcCIpOwoJCSRncmlkLT5zZXRTaG93SGVhZGVyUm93KGZhbHNlKTsKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRncmlkLT5yZW5kZXIoKSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlclNhbGVzQnlNZW1iZXJzaGlwUmVwb3J0QmFyY2hhcnQoJGVsZW1lbnRJZGVudGlmaWVyLCAkcGFyYW1zID0gJycsICR3aWR0aCA9ICcnLCAkaGVpZ2h0ID0gJycsICRkaXJlY3RpdmVzPWFycmF5KCkpCgl7CgkJJGRhdGFSZXNwb25zZSA9IE1NX1JlcG9ydERhdGFSZXRyaWV2ZXI6OnJlcXVlc3REYXRhKGdldF9jbGFzcygkdGhpcyksIHNlbGY6OiRTQUxFU19CWV9NRU1CRVJTSElQX1FVRVJZLCAkcGFyYW1zKTsKCQlpZiAoIU1NX1JlcG9ydFJlc3BvbnNlOjppc1N1Y2Nlc3MoJGRhdGFSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJGRhdGFSZXNwb25zZTsKCQl9CgkJJGNvbHVtbiA9IE1NX1JlcG9ydENvbHVtbkNoYXJ0OjpjcmVhdGVGcm9tVG9wUmVzdWx0cygkZWxlbWVudElkZW50aWZpZXIsICJtZW1iZXJzaGlwX25hbWUiLCAicmV2ZW51ZSIsIDEwLCAkZGF0YVJlc3BvbnNlKTsKCQkkY29sdW1uLT5zZXRDdXJyZW5jeVZhbHVlcyh0cnVlKTsKCQkkY29sdW1uLT5zZXRWYWx1ZUF4aXNUaXRsZSgiU2FsZXMgaW4gIi5NTV9DdXJyZW5jeVV0aWw6OmdldEFjdGl2ZUN1cnJlbmN5KCkpOwoJCSRjb2x1bW4tPnNldENhdGVnb3J5QXhpc1RpdGxlKCJNZW1iZXJzaGlwIExldmVscyIpOwoJCS8vVE9ETzogaGFuZGxlIG5vIGRhdGEKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRjb2x1bW4tPnJlbmRlcigpKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVuZGVyU2FsZXNCeU1lbWJlcnNoaXBSZXBvcnRQaWVjaGFydCgkZWxlbWVudElkZW50aWZpZXIsICRwYXJhbXMgPSAnJywgJHdpZHRoID0gJycsICRoZWlnaHQgPSAnJywgJGRpcmVjdGl2ZXM9YXJyYXkoKSkKCXsKCQkkZGF0YVJlc3BvbnNlID0gTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6cmVxdWVzdERhdGEoZ2V0X2NsYXNzKCR0aGlzKSwgc2VsZjo6JFNBTEVTX0JZX01FTUJFUlNISVBfUVVFUlksICRwYXJhbXMpOwoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkZGF0YVJlc3BvbnNlKSkKCQl7CgkJCXJldHVybiAkZGF0YVJlc3BvbnNlOwoJCX0KCQkkcGllID0gTU1fUmVwb3J0UGllQ2hhcnQ6OmNyZWF0ZUZyb21Ub3BSZXN1bHRzKCRlbGVtZW50SWRlbnRpZmllciwgIm1lbWJlcnNoaXBfbmFtZSIsICJyZXZlbnVlIiwgMTAsICRkYXRhUmVzcG9uc2UpOwoJCS8vVE9ETzogaGFuZGxlIG5vIGRhdGEKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCRwaWUtPnJlbmRlcigpKTsKCX0KCQoJCgkvKioKCSAqIEdlbmVyYXRlIHRoZSBkYXRhIGZvciB0aGUgU2FsZXMgYnkgTWVtYmVyc2hpcCByZXBvcnQuIAoJICogQ29uc3RyYWludDogVGhlIHN1cHBsaWVkIHBhcmFtcyBtdXN0IGNvbnRhaW4gYSBzdGFydCBhbmQgZW5kIGRhdGUKCSAqIAoJICogQHBhcmFtIGFycmF5ICRwYXJhbXMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgY29udGFpbmluZyB0aGUgcmVzdWx0cwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlU2FsZXNCeU1lbWJlcnNoaXBSZXBvcnREYXRhKCRwYXJhbXMpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICghaXNfYXJyYXkoJHBhcmFtcykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZ2VuZXJhdGUgU2FsZXMgQnkgTWVtYmVyc2hpcCByZXBvcnQgZGF0YTogSW1wcm9wZXIgcGFyYW1ldGVycyBmb3JtYXQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoIWlzc2V0KCRwYXJhbXNbJ3N0YXJ0X2RhdGUnXSkgfHwgIWlzc2V0KCRwYXJhbXNbJ2VuZF9kYXRlJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGdlbmVyYXRlIFNhbGVzIEJ5IE1lbWJlcnNoaXAgcmVwb3J0IGRhdGE6IFN0YXJ0IGFuZCBFbmQgZGF0ZSBtdXN0IGJlIHN1cHBsaWVkIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9vcHRpb25hbCBwYXJhbQoJCSRpbmNsdWRlX3JlYmlsbHMgPSAoaXNzZXQoJHBhcmFtc1snaW5jbHVkZV9yZWJpbGxzJ10pICYmICgkcGFyYW1zWydpbmNsdWRlX3JlYmlsbHMnXSA9PSAib24iKSk7CgkJCgkJCgkJJHRyYW5zYWN0aW9uc1RhYmxlID0gTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HOwoJCSR1c2VyZGF0YVRhYmxlID0gTU1fVEFCTEVfVVNFUl9EQVRBOwoJCSRvcmRlcnNUYWJsZSA9IE1NX1RBQkxFX09SREVSUzsKCQkkbWVtYmVyc2hpcExldmVsc1RhYmxlID0gTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFM7CgkJCgkJJHN0YXJ0VGltZSA9IHN0cnRvdGltZSgkcGFyYW1zWydzdGFydF9kYXRlJ10pOwoJCSRlbmRUaW1lID0gc3RydG90aW1lKCRwYXJhbXNbJ2VuZF9kYXRlJ10pOwoJCQoJCSRzdGFydERhdGUgPSBkYXRlKCJZLW0tZCAwMDowMCIsJHN0YXJ0VGltZSk7IC8vbXlzcWwgZm9ybWF0CgkJJGVuZERhdGUgPSAgIGRhdGUoIlktbS1kIDIzOjU5OjU5IiwkZW5kVGltZSk7CgkJCgkJJHRyYW5zYWN0aW9uVHlwZXMgPSBhcnJheShNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCk7CgkJaWYgKCRpbmNsdWRlX3JlYmlsbHMpCgkJewoJCQkkdHJhbnNhY3Rpb25UeXBlc1tdID0gTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UOwoJCX0KCQkkdHJhbnNhY3Rpb25UeXBlU3RyaW5nID0gaW1wbG9kZSgiLCIsJHRyYW5zYWN0aW9uVHlwZXMpOwoJCQoJCS8vZ2V0cyB0aGUgbWVtYmVycyBhbmQgdG90YWwgcmV2ZW51ZSBmcm9tIHRyYW5zYWN0aW9ucyBsaW5rZWQgdG8gdXNlcnMgaGF2aW5nIGEgbWVtYmVyc2hpcCAob3B0aW9uYWxseSBpbmNsdWRpbmcgcmVjdXJyaW5nIHBheW1lbnRzKSBmb3IgdHJhbnNhY3Rpb25zIHRoYXQgb2NjdXIgd2l0aGluIGEgZGF0ZSByYW5nZQoJCS8vcmVmdW5kIGl0ZW1zIGRvIG5vdCBjb3VudCBhZ2FpbnN0IHRoZSB0b3RhbC4gCgkJCgkJJHNxbCA9ICJTRUxFQ1QgUS5pZCBBUyBtZW1iZXJzaGlwX2xldmVsX2lkLCBRLm5hbWUgQVMgbWVtYmVyc2hpcF9uYW1lLCBRLnJldmVudWUsIFgubWVtYmVyX2NvdW50IEZST00gIi4KCQkJICAgIihTRUxFQ1QgbWwuaWQsIG1sLm5hbWUsIEFCUyhTVU0odC5hbW91bnQpKSBBUyByZXZlbnVlIEZST00geyR0cmFuc2FjdGlvbnNUYWJsZX0gdCBJTk5FUiBKT0lOIHskb3JkZXJzVGFibGV9IG8gT04gIi4KCQkJICAgIih0Lm9yZGVyX2lkID0gby5pZCkgSU5ORVIgSk9JTiB7JHVzZXJkYXRhVGFibGV9IG11ZCBPTiAoby51c2VyX2lkID0gbXVkLndwX3VzZXJfaWQpIElOTkVSIEpPSU4geyRtZW1iZXJzaGlwTGV2ZWxzVGFibGV9IG1sICIuCgkJCSAgICJPTiAobXVkLm1lbWJlcnNoaXBfbGV2ZWxfaWQgPSBtbC5pZCkgV0hFUkUgdC50cmFuc2FjdGlvbl90eXBlIElOICh7JHRyYW5zYWN0aW9uVHlwZVN0cmluZ30pIEFORCAodC50cmFuc2FjdGlvbl9kYXRlIEJFVFdFRU4gJXMgQU5EICVzKSAiLgoJCQkgICAiR1JPVVAgQlkgbWwuaWQpIEFTIFEgSU5ORVIgSk9JTiAoU0VMRUNUIGNvdW50KGRpc3RpbmN0IG8xLnVzZXJfaWQpIEFTIG1lbWJlcl9jb3VudCwgbXVkMS5tZW1iZXJzaGlwX2xldmVsX2lkIEZST00gIi4KCQkJICAgInskdHJhbnNhY3Rpb25zVGFibGV9IHQxIElOTkVSIEpPSU4geyRvcmRlcnNUYWJsZX0gbzEgT04gKHQxLm9yZGVyX2lkID0gbzEuaWQpIElOTkVSIEpPSU4geyR1c2VyZGF0YVRhYmxlfSBtdWQxIE9OICIuCgkJCSAgICIobzEudXNlcl9pZCA9IG11ZDEud3BfdXNlcl9pZCkgV0hFUkUgdDEudHJhbnNhY3Rpb25fdHlwZSBJTiAoeyR0cmFuc2FjdGlvblR5cGVTdHJpbmd9KSBBTkQgKHQxLnRyYW5zYWN0aW9uX2RhdGUgQkVUV0VFTiAlcyBBTkQgJXMpICIuCgkJCSAgICJHUk9VUCBCWSBtdWQxLm1lbWJlcnNoaXBfbGV2ZWxfaWQpIEFTIFggT04gKFEuaWQgPSBYLm1lbWJlcnNoaXBfbGV2ZWxfaWQpIE9SREVSIEJZIFEucmV2ZW51ZSBERVNDIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkd3BkYi0+cHJlcGFyZSgkc3FsLCRzdGFydERhdGUsJGVuZERhdGUsJHN0YXJ0RGF0ZSwkZW5kRGF0ZSksQVJSQVlfQSk7CgkJCgkJJGRhdGFzZXQgPSBNTV9SZXBvcnREYXRhc2V0OjpjcmVhdGVTaW5nbGVSZXBvcnREYXRhc2V0KCRwYXJhbXMsJHJlc3VsdHMpOwoJCXJldHVybiAkZGF0YXNldDsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YSgkcXVlcnlJZGVudGlmaWVyLCAkcGFyYW1zKQoJewoJCXN3aXRjaCAoJHF1ZXJ5SWRlbnRpZmllcikKCQl7CgkJCWNhc2Ugc2VsZjo6JFNBTEVTX0JZX01FTUJFUlNISVBfUVVFUlk6CgkJCQlyZXR1cm4gc2VsZjo6Z2VuZXJhdGVTYWxlc0J5TWVtYmVyc2hpcFJlcG9ydERhdGEoJHBhcmFtcyk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGdlbmVyYXRpbmcgZGF0YSBmb3IgdW5rbm93biBxdWVyeSBpZGVudGlmaWVyIHskcXVlcnlJZGVudGlmaWVyfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCn0KCg==', 0, '2018-11-21 06:38:55'),
(214, 'googleecommerceextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmNsYXNzIE1NX0dvb2dsZUVDb21tZXJjZUV4dGVuc2lvbiBleHRlbmRzIE1NX0V4dGVuc2lvbgp7CQoJcHJvdGVjdGVkIHN0YXRpYyAkT1BUSU9OX0FDVElWRSA9ICJhY3RpdmUiOwoJcHJvdGVjdGVkIHN0YXRpYyAkT1BUSU9OX0dPT0dMRV9VSUQgPSAiZ29vZ2xlLXVpZCI7Cglwcm90ZWN0ZWQgc3RhdGljICRPUFRJT05fR09PR0xFX1NJVEVfTkFNRSA9ICJnb29nbGUtc2l0ZS1uYW1lIjsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRhdXRvbG9hZERlcGVuZGVuY2llcz10cnVlLCRjb25maWdEYXRhPSIiKSAKCXsgCgkJcGFyZW50OjpfX2NvbnN0cnVjdCgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCSR0aGlzLT50b2tlbiA9IE1NX0V4dGVuc2lvbjo6JEdPT0dMRV9FQ09NTUVSQ0VfVE9LRU47Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkb0luaXRIb29rKCkgCgl7CgkJaWYoJHRoaXMtPmlzQWN0aXZlKCkgJiYgJHRoaXMtPmhhc1Blcm1pc3Npb24oKSkKCQl7CgkJCWFkZF9hY3Rpb24oTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQ0VJVkVELCBhcnJheSgkdGhpcywgJ3RyYWNrUGF5bWVudCcpLCAxMDAwKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpc0FjdGl2ZSgpCgl7CgkJJGlzQWN0aXZlID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX0FDVElWRSk7CgkJCgkJcmV0dXJuICgkaXNBY3RpdmUgPT0gIm9uIikgJiYgJHRoaXMtPmhhc1Blcm1pc3Npb24oKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24oKSAKCXsKCQlyZXR1cm4gKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRFWFRFTlNJT05fR09PR0xFX0VDT01NRVJDRSkgPT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlMaXN0aW5nSXRlbSgpIAoJewoJCSRjcm50UGFnZSA9IE1NX01vZHVsZVV0aWxzOjpnZXRQYWdlKCk7CgkJJHVzZXJWb2ljZVVybCA9IE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoJGNybnRQYWdlLCBNTV9NT0RVTEVfRVhURU5TSU9OUykuIiYiLk1NX3Nlc3Npb246OiRQQVJBTV9TVUJNT0RVTEUuIj0iLk1NX0V4dGVuc2lvbjo6JEdPT0dMRV9FQ09NTUVSQ0VfVE9LRU47CgkJPz4KCQk8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNGRkY7IHBhZGRpbmc6MjBweDsgd2lkdGg6MjAwcHg7IGJvcmRlcjogPD9waHAgZWNobyAkdGhpcy0+aXNBY3RpdmUoKSA/ICcycHggc29saWQgIzdBRDAzQTsnIDogJzFweCBzb2xpZCAjZGRkOyc7ID8+Ij4KCQk8YSBocmVmPSI8P3BocCBlY2hvICR1c2VyVm9pY2VVcmw7ID8+Ij48aW1nIHNyYz0iIiBzdHlsZT0id2lkdGg6MjAwcHg7IiAvPjwvYT4KCQk8L2Rpdj4KCQk8P3BocAoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGlzcGxheUNvbmZpZ1NjcmVlbigpIAoJeyAKCQkkY3JudFBhZ2UgPSBNTV9Nb2R1bGVVdGlsczo6Z2V0UGFnZSgpOwoJCSR1c2VyVm9pY2VVcmwgPSBNTV9Nb2R1bGVVdGlsczo6Z2V0VXJsKCRjcm50UGFnZSwgTU1fTU9EVUxFX0VYVEVOU0lPTlMpLiImIi5NTV9zZXNzaW9uOjokUEFSQU1fU1VCTU9EVUxFLiI9Ii5NTV9FeHRlbnNpb246OiRHT09HTEVfRUNPTU1FUkNFX1RPS0VOOwoJCT8+CgkJCgkJPGRpdiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjojRkZGOyBwYWRkaW5nOjEwcHg7IHdpZHRoOjI1MHB4OyI+CgkJCTxpbWcgc3JjPSIiIHN0eWxlPSJ3aWR0aDoyNTBweDsiIC8+CgkJPC9kaXY+CgkJCgkJPGRpdiBzdHlsZT0ibWFyZ2luLWJvdHRvbToxNXB4OyI+CgkJCTxhIGhyZWY9IiMiIHRhcmdldD0iX2JsYW5rIj5OZWVkIGhlbHAgY29uZmlndXJpbmcgdGhlIEdvb2dsZSBlQ29tbWVyY2UgZXh0ZW5zaW9uPzwvYT4KCQk8L2Rpdj4KCQkKCQk8P3BocCAKCQlpZigkdGhpcy0+aGFzUGVybWlzc2lvbigpKQoJCXsKCQkJJGRhdGFTYXZlZCA9IGZhbHNlOwoJCQkkZXJyb3JzID0gIiI7CgkJCQoJCQlpZihpc3NldCgkX1BPU1RbIm1tLWdvb2dsZS1lY29tbWVyY2UtZm9ybSJdKSkKCQkJewoJCQkJJGlzQWN0aXZlID0gaXNzZXQoJF9QT1NUWyJtbS1nb29nbGUtZWNvbW1lcmNlLWFjdGl2ZSJdKSA/ICRfUE9TVFsibW0tZ29vZ2xlLWVjb21tZXJjZS1hY3RpdmUiXSA6ICIiOwoJCQkJJGdlY1VJRCA9IGlzc2V0KCRfUE9TVFsibW0tZ29vZ2xlLXVpZCJdKSA/ICRfUE9TVFsibW0tZ29vZ2xlLXVpZCJdIDogIiI7CgkJCQkkZ2VjU2l0ZU5hbWUgPSBpc3NldCgkX1BPU1RbIm1tLWdvb2dsZS1zaXRlLW5hbWUiXSkgPyAkX1BPU1RbIm1tLWdvb2dsZS1zaXRlLW5hbWUiXSA6ICIiOwoJCQkJCgkJCQlpZigkaXNBY3RpdmUgPT0gIm9uIiAmJiAoZW1wdHkoJGdlY1VJRCkgfHwgZW1wdHkoJGdlY1NpdGVOYW1lKSkpCgkJCQl7CgkJCQkJaWYoZW1wdHkoJGdlY1VJRCkpCgkJCQkJewoJCQkJCQkkZXJyb3JzIC49ICJHb29nbGUgQW5hbHl0aWNzIFVJRCBpcyByZXF1aXJlZC5cXG4iOwkKCQkJCQl9CgkJCQkJCgkJCQkJaWYoZW1wdHkoJGdlY1NpdGVOYW1lKSkKCQkJCQl7CgkJCQkJCSRlcnJvcnMgLj0gIlNpdGUgbmFtZSBpcyByZXF1aXJlZC4iOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJJHRoaXMtPnNldE9wdGlvbihzZWxmOjokT1BUSU9OX0FDVElWRSwgJGlzQWN0aXZlKTsKCQkJCQkkdGhpcy0+c2V0T3B0aW9uKHNlbGY6OiRPUFRJT05fR09PR0xFX1VJRCwgJGdlY1VJRCk7CgkJCQkJJHRoaXMtPnNldE9wdGlvbihzZWxmOjokT1BUSU9OX0dPT0dMRV9TSVRFX05BTUUsICRnZWNTaXRlTmFtZSk7CgkJCQkJCgkJCQkJJGRhdGFTYXZlZCA9IHRydWU7CgkJCQl9CgkJCX0KCgkJCSRhY3RpdmUgPSAkdGhpcy0+Z2V0T3B0aW9uKHNlbGY6OiRPUFRJT05fQUNUSVZFKTsKCQkJJGdlY1VJRCA9ICR0aGlzLT5nZXRPcHRpb24oc2VsZjo6JE9QVElPTl9HT09HTEVfVUlEKTsKCQkJJGdlY1NpdGVOYW1lID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX0dPT0dMRV9TSVRFX05BTUUpOwoJCQk/PgoJCQkKCQkJPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiI+CgkJCTxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9Im1tLWdvb2dsZS1lY29tbWVyY2UtZm9ybSIgdmFsdWU9InNhdmUiIC8+CgkJCTx0YWJsZSBzdHlsZT0id2lkdGg6NTIwcHg7IGJvcmRlci1zcGFjaW5nOiAxMHB4OyBib3JkZXItY29sbGFwc2U6IHNlcGFyYXRlOyI+CgkJCTx0cj4KCQkJCTx0ZCBjb2xzcGFuPSIyIj4KCQkJCQk8ZGl2IHN0eWxlPSJtYXJnaW4tYm90dG9tOjEwcHg7Ij4KCQkJCQk8aW5wdXQgdHlwZT0iY2hlY2tib3giIG5hbWU9Im1tLWdvb2dsZS1lY29tbWVyY2UtYWN0aXZlIiA8P3BocCBlY2hvICgkdGhpcy0+aXNBY3RpdmUoKSkgPyAiY2hlY2tlZCIgOiAiIjsgPz4gLz4gRW5hYmxlIEdvb2dsZSBlQ29tbWVyY2UgRXh0ZW5zaW9uCgkJCQkJPC9kaXY+CgkJCQk8L3RkPgoJCQk8L3RyPgoJCQk8dHI+CgkJCQk8dGQ+R29vZ2xlIEFuYWx5dGljcyBVSUQ8L3RkPgoJCQkJPHRkPgoJCQkJCTxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJtbS1nb29nbGUtdWlkIiBzdHlsZT0iZm9udC1mYW1pbHk6IGNvdXJpZXI7IGZvbnQtc2l6ZToxMXB4OyB3aWR0aDoyNTBweDsiIHZhbHVlPSI8P3BocCBlY2hvICRnZWNVSUQ7ID8+IiAvPgoJCQkJPC90ZD4KCQkJPC90cj4KCQkJPHRyPgoJCQkJPHRkPlNpdGUgTmFtZTwvdGQ+CgkJCQk8dGQ+CgkJCQkJPGlucHV0IHR5cGU9InRleHQiIG5hbWU9Im1tLWdvb2dsZS1zaXRlLW5hbWUiIHN0eWxlPSJmb250LWZhbWlseTogY291cmllcjsgZm9udC1zaXplOjExcHg7IHdpZHRoOjI1MHB4OyIgdmFsdWU9Ijw/cGhwIGVjaG8gJGdlY1NpdGVOYW1lOyA/PiIgLz4KCQkJCTwvdGQ+CgkJCTwvdHI+CgkJCTx0cj4KCQkJCTx0ZCBjb2xzcGFuPSIyIiBzdHlsZT0icGFkZGluZy10b3A6MTBweDsiPgoJCQkJCTxpbnB1dCB0eXBlPSJzdWJtaXQiIG5hbWU9IlN1Ym1pdCIgY2xhc3M9Im1tLXVpLWJ1dHRvbiBibHVlIiB2YWx1ZT0iU2F2ZSBDb25maWd1cmF0aW9uIiAvPgoJCQkJPC90ZD4KCQkJPC90cj4KCQkJPC90YWJsZT4KCQkJPC9mb3JtPgoJCQkKCQkJCgkJPD9waHAgCQoJCQlpZigkZGF0YVNhdmVkKQoJCQl7CgkJCQk/PgoJCQkJPHNjcmlwdD5hbGVydCgiQ29uZmlndXJhdGlvbiBzYXZlZCBzdWNjZXNzZnVsbHkiKTs8L3NjcmlwdD4KCQkJCTw/cGhwCgkJCX0KCQkJCgkJCWlmKCFlbXB0eSgkZXJyb3JzKSkKCQkJewoJCQkJPz4KCQkJCTxzY3JpcHQ+YWxlcnQoIjw/cGhwIGVjaG8gJGVycm9yczsgPz4iKTs8L3NjcmlwdD4KCQkJCTw/cGhwCgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJPz4KCQkgCTxkaXYgaWQ9Im1lc3NhZ2UiIGNsYXNzPSJlcnJvciIgc3R5bGU9InBhZGRpbmc6MTBweDsiPgoJCQkJSW4gb3JkZXIgdG8gdXNlIHRoZSBHb29nbGUgZUNvbW1lcmNlIGV4dGVuc2lvbiB5b3UgbXVzdCBiZSBvbiB0aGUgQWR2YW5jZWQgcGxhbiBvciBoaWdoZXIuIFlvdSBjYW4gdXBncmFkZSB5b3VyIGxpY2Vuc2UgYnkgbG9nZ2luZyBpbnRvIHlvdXIgYWNjb3VudCBvbiA8YSBocmVmPSJodHRwOi8vbWVtYmVybW91c2UuY29tIj5tZW1iZXJtb3VzZS5jb208L2E+IGFuZCBnb2luZyB0byB0aGUgPGVtPk15IEFjY291bnQ8L2VtPiBwYWdlLgoJCQk8L2Rpdj4KCQkgCTw/cGhwIAoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHRyYWNrUGF5bWVudCgkcGFyYW1zKQoJewoJCSRnZWNVSUQgPSAkdGhpcy0+Z2V0T3B0aW9uKHNlbGY6OiRPUFRJT05fR09PR0xFX1VJRCk7CgkJJGdlY1NpdGVOYW1lID0gJHRoaXMtPmdldE9wdGlvbihzZWxmOjokT1BUSU9OX0dPT0dMRV9TSVRFX05BTUUpOwoJCQoJCSRvcmRlck51bWJlciA9ICRwYXJhbXNbIm9yZGVyX251bWJlciJdOwoJCQoJCWlmKCFlbXB0eSgkcGFyYW1zWyJvcmRlcl9pdGVtX2lkIl0pKQoJCXsKCQkJJG9yZGVyTnVtYmVyIC49ICIteyRwYXJhbXNbIm9yZGVyX2l0ZW1faWQiXX0iOwoJCX0KCQkKCQkkb3JkZXJUb3RhbCA9ICRwYXJhbXNbIm9yZGVyX3RvdGFsIl07CgkJJG9yZGVyU3VidG90YWwgPSAkcGFyYW1zWyJvcmRlcl9zdWJ0b3RhbCJdOwoJCSRvcmRlclNoaXBwaW5nID0gJHBhcmFtc1sib3JkZXJfc2hpcHBpbmciXTsKCQkKCQkkb3JkZXJCaWxsaW5nQ2l0eSA9ICRwYXJhbXNbIm9yZGVyX2JpbGxpbmdfY2l0eSJdOwoJCSRvcmRlckJpbGxpbmdTdGF0ZSA9ICRwYXJhbXNbIm9yZGVyX2JpbGxpbmdfc3RhdGUiXTsKCQkkb3JkZXJCaWxsaW5nQ291bnRyeSA9ICRwYXJhbXNbIm9yZGVyX2JpbGxpbmdfY291bnRyeSJdOwoJCQoJCS8vIGFjY2VzcyBwcm9kdWN0cyBhc3NvY2lhdGVkIHdpdGggdGhlIG9yZGVyCgkJJHByb2R1Y3RzID0ganNvbl9kZWNvZGUoc3RyaXBzbGFzaGVzKCRwYXJhbXNbIm9yZGVyX3Byb2R1Y3RzIl0pKTsKCQk/PgoJCTwhLS0gQmVnaW4gR29vZ2xlIEVjb21tZXJjZSAtLT4KCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CgkJCgkJICAgIHZhciBfZ2FxID0gX2dhcSB8fCBbXTsKCQkgICAgX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnPD9waHAgZWNobyAkZ2VjVUlEOyA/PiddKTsKCQkgICAgX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7CgkJICAgIF9nYXEucHVzaChbJ19hZGRUcmFucycsCgkJICAgICAgICAnPD9waHAgZWNobyAkb3JkZXJOdW1iZXI7ID8+JywgICAgICAgICAgLy8gdHJhbnNhY3Rpb24gSUQgLSByZXF1aXJlZAoJCSAgICAgICAgJzw/cGhwIGVjaG8gJGdlY1NpdGVOYW1lOyA/PicsICAJCS8vIGFmZmlsaWF0aW9uIG9yIHN0b3JlIG5hbWUKCQkgICAgICAgICc8P3BocCBlY2hvICRvcmRlclRvdGFsOyA/PicsICAgICAgICAgICAvLyB0b3RhbCAtIHJlcXVpcmVkCgkJICAgICAgICAnPD9waHAgZWNobyAiIjsgPz4nLCAgICAgICAgICAgCQkJLy8gdGF4CgkJICAgICAgICAnPD9waHAgZWNobyAkb3JkZXJTaGlwcGluZzsgPz4nLCAgICAgICAgLy8gc2hpcHBpbmcKCQkgICAgICAgICc8P3BocCBlY2hvICRvcmRlckJpbGxpbmdDaXR5OyA/PicsICAgICAvLyBjaXR5CgkJICAgICAgICAnPD9waHAgZWNobyAkb3JkZXJCaWxsaW5nU3RhdGU7ID8+JywgICAgLy8gc3RhdGUgb3IgcHJvdmluY2UKCQkgICAgICAgICc8P3BocCBlY2hvICRvcmRlckJpbGxpbmdDb3VudHJ5OyA/PicgICAvLyBjb3VudHJ5CgkJICAgIF0pOwoJCTw/cGhwCgkJCgkJZm9yZWFjaCAoJHByb2R1Y3RzIGFzICRwcm9kdWN0KSAKCQl7CgkJICAgICRwcm9kdWN0SWQgPSAkcHJvZHVjdC0+aWQ7CgkJICAgICRwcm9kdWN0TmFtZSA9ICRwcm9kdWN0LT5uYW1lOwoJCSAgICAkcHJvZHVjdFNrdSA9ICRwcm9kdWN0LT5za3U7CgkJICAgICRwcm9kdWN0QW1vdW50ID0gJHByb2R1Y3QtPmFtb3VudDsKCQkgICAgJHByb2R1Y3RRdWFudGl0eSA9ICRwcm9kdWN0LT5xdWFudGl0eTsKCQkgICAgJHByb2R1Y3RUb3RhbCA9ICRwcm9kdWN0LT50b3RhbDsgICAgICAvLyBhbW91bnQgKiBxdWFudGl0eQoJCSAgICAkcHJvZHVjdElzUmVjdXJyaW5nID0gJHByb2R1Y3QtPmlzX3JlY3VycmluZzsgICAvLyB0cnVlLCBmYWxzZQoJCSAgICAkcHJvZHVjdFJlY3VycmluZ0Ftb3VudCA9ICRwcm9kdWN0LT5yZWN1cnJpbmdfYW1vdW50OyAvLyBhbW91bnQgY2hhcmdlZCBldmVyeSByZWJpbGwgcGVyaW9kCgkJICAgICRwcm9kdWN0UmViaWxsUGVyaW9kID0gJHByb2R1Y3QtPnJlYmlsbF9wZXJpb2Q7ICAvLyBpbnRlZ2VyIC0gY29tcGxldGUgcmViaWxsIHBlcmlvZCBpcyBhIGNvbWJpbmF0aW9uIG9mIHJlYmlsbCBwZXJpb2QgCgkJICAgIC8vIGFuZCBmcmVxdWVuY3kgaS5lLiAxIG1vbnRocywgMzAgZGF5cywgMiB3ZWVrcywgZXRjLgoJCSAgICAkcHJvZHVjdFJlYmlsbEZyZXF1ZW5jeSA9ICRwcm9kdWN0LT5yZWJpbGxfZnJlcXVlbmN5OyAgIC8vIGRheXMsIHdlZWtzLCBtb250aHMsIHllYXJzCgkJCgkJICAgIGlmICgkcHJvZHVjdFNrdSA9PSAiIikgCgkJICAgIHsKCQkgICAgICAgICRwcm9kdWN0U2t1ID0gJHByb2R1Y3RJZDsKCQkgICAgfQoJCSAgICA/PgoJCSAgICAgICAgLy8gYWRkIGl0ZW0gbWlnaHQgYmUgY2FsbGVkIGZvciBldmVyeSBpdGVtIGluIHRoZSBzaG9wcGluZyBjYXJ0CgkJICAgICAgICAvLyB3aGVyZSB5b3VyIGVjb21tZXJjZSBlbmdpbmUgbG9vcHMgdGhyb3VnaCBlYWNoIGl0ZW0gaW4gdGhlIGNhcnQgYW5kCgkJICAgICAgICAvLyBwcmludHMgb3V0IF9hZGRJdGVtIGZvciBlYWNoCgkJICAgICAgICBfZ2FxLnB1c2goWydfYWRkSXRlbScsCgkJICAgICAgICAgICAgJzw/cGhwIGVjaG8gJG9yZGVyTnVtYmVyOyA/PicsICAgICAgICAgICAJLy8gdHJhbnNhY3Rpb24gSUQgLSByZXF1aXJlZAoJCSAgICAgICAgICAgICc8P3BocCBlY2hvICRwcm9kdWN0U2t1OyA/PicsICAgICAgICAgICAJLy8gU0tVL2NvZGUgLSByZXF1aXJlZAoJCSAgICAgICAgICAgICc8P3BocCBlY2hvIGFkZHNsYXNoZXMoJHByb2R1Y3ROYW1lKTsgPz4nLCAgLy8gcHJvZHVjdCBuYW1lCgkJICAgICAgICAgICAgJzw/cGhwIGVjaG8gIiI7ID8+JywgICAJCQkJCQkvLyBjYXRlZ29yeSBvciB2YXJpYXRpb24KCQkgICAgICAgICAgICAnPD9waHAgZWNobyAkcHJvZHVjdEFtb3VudDsgPz4nLCAgICAgICAgICAJLy8gdW5pdCBwcmljZSAtIHJlcXVpcmVkCgkJICAgICAgICAgICAgJzw/cGhwIGVjaG8gJHByb2R1Y3RRdWFudGl0eTsgPz4nICAgICAgICAgICAvLyBxdWFudGl0eSAtIHJlcXVpcmVkCgkJICAgICAgICBdKTsKCQk8P3BocCB9ID8+ICAKCQkgICAgX2dhcS5wdXNoKFsnX3RyYWNrVHJhbnMnXSk7IC8vc3VibWl0cyB0cmFuc2FjdGlvbiB0byB0aGUgQW5hbHl0aWNzIHNlcnZlcnMKCQkKCQkgICAgKGZ1bmN0aW9uKCkgewoJCSAgICAgICAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlOwoJCSAgICAgICAgZ2Euc3JjID0gKCdodHRwczonID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOi8vc3NsJyA6ICdodHRwOi8vd3d3JykgKyAnLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzJzsKCQkgICAgICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3NjcmlwdCcpWzBdOyBzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGdhLCBzKTsKCQkgICAgfSkoKTsKCQkKCQk8L3NjcmlwdD4KCQk8IS0tIEVuZCBHb29nbGUgRWNvbW1lcmNlIC0tPgoJPD9waHAgfQp9Cgo=', 0, '2018-11-21 06:38:55'),
(215, 'cardinfo', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIAogKiBNTV9DYXJkSW5mbyBpcyBhIHZhbHVlLW9iamVjdCBtZWFudCB0byBzdG9yZSBbdHJhbnNpZW50XSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbgogKgogKi8KY2xhc3MgTU1fQ2FyZEluZm8gCnsKCXB1YmxpYyBzdGF0aWMgJENBUkRfVFlQRV9JTlZBTElEID0gImludmFsaWQiOwoJcHVibGljIHN0YXRpYyAkQ0FSRF9UWVBFX1ZJU0EgPSAidmlzYSI7CglwdWJsaWMgc3RhdGljICRDQVJEX1RZUEVfTUFTVEVSQ0FSRCA9ICJtYXN0ZXIiOwoJcHVibGljIHN0YXRpYyAkQ0FSRF9UWVBFX0FNRVggPSAiYW1leCI7CglwdWJsaWMgc3RhdGljICRDQVJEX1RZUEVfRElTQ09WRVIgPSAiZGlzY292ZXIiOwoJcHVibGljIHN0YXRpYyAkQ0FSRF9UWVBFX0RJTkVSUyA9ICJkaW5lcnMiOwoJcHVibGljIHN0YXRpYyAkQ0FSRF9UWVBFX0pDQiA9ICJqY2IiOwoJCglwcml2YXRlICRjYXJkTnVtYmVyID0gIiI7Cglwcml2YXRlICRleHBpcmF0aW9uTW9udGggPSAiIjsKCXByaXZhdGUgJGV4cGlyYXRpb25ZZWFyID0gIiI7Cglwcml2YXRlICRjdnYgPSAiIjsKCQoJcHJvdGVjdGVkICR0ZXN0Q2FyZCA9IGZhbHNlOyAKCQoJCgkvKioKCSAqIENyZWF0ZXMgYSBuZXcgQ2FyZEluZm8gb2JqZWN0LiBPcHRpb25hbCBwYXJhbWV0ZXJzIGFsbG93IGl0IHRvIGJlIHBvcHVsYXRlZCB1cG9uIGNyZWF0aW9uCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgKG9wdGlvbmFsKSAkY2FyZE51bWJlciBUaGUgY3JlZGl0IGNhcmQgbnVtYmVyCgkgKiBAcGFyYW0gU3RyaW5nIChvcHRpb25hbCkgJGV4cGlyYXRpb25Nb250aCBUaGUgY3JlZGl0IGNhcmQgZXhwaXJhdGlvbiBtb250aC4gVGhpcyB2YWx1ZSBpcyBub3QgY2FzdCB0byBpbnQKCSAqIEBwYXJhbSBTdHJpbmcgKG9wdGlvbmFsKSAkZXhwaXJhdGlvblllYXIgVGhlIGNyZWRpdCBjYXJkIGV4cGlyYXRpb24geWVhci4gVGhpcyB2YWx1ZSBpcyBub3QgY2FzdCB0byBpbnQKCSAqIEBwYXJhbSBTdHJpbmcgKG9wdGlvbmFsKSAkY3Z2IFRoZSBDVlYvQ1ZWMiBzZWN1cml0eSBjb2RlLiBUaGlzIHZhbHVlIGlzIG5vdCBjYXN0IHRvIGludAoJICovCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGNhcmROdW1iZXI9IiIsJGV4cGlyYXRpb25Nb250aD0iIiwkZXhwaXJhdGlvblllYXI9IiIsJGN2dj0iIikKCXsKCQkkZmllbGRzID0gYXJyYXkoImNhcmROdW1iZXIiLCJleHBpcmF0aW9uTW9udGgiLCJleHBpcmF0aW9uWWVhciIsImN2diIpOwoJCWZvcmVhY2ggKCRmaWVsZHMgYXMgJGZpZWxkKQoJCXsKCQkJaWYgKCFlbXB0eSgkJGZpZWxkKSkKCQkJewoJCQkJJHRoaXMtPiRmaWVsZCA9ICQkZmllbGQ7CgkJCX0KCQl9Cgl9CgkKCQoJLyoqIFJldHVybnMgdGhlIGNhcmQgdHlwZSBiYXNlZCBvbiB0aGUgY2FyZCBudW1iZXIKCSAqIAoJICogQHJldHVybiBTdHJpbmcgY29udGFpbmluZyB0aGUgY2FyZCB0eXBlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRDYXJkVHlwZSgpCgl7CQoJCWlmKCFlbXB0eSgkdGhpcy0+Y2FyZE51bWJlcikpCgkJewoJCQkkdmlzYVJlZ2V4ID0gIi9eNFswLTldezEyfSg/OlswLTldezN9KT8kLyI7CgkJCSRtYXN0ZXJSZWdleCA9ICIvXjVbMS01XVswLTldezE0fSQvIjsKCQkJJGFtZXhSZWdleCA9ICIvXjNbNDddWzAtOV17MTN9JC8iOwoJCQkkZGluZXJzUmVnZXggPSAiL14zKD86MFswLTVdfFs2OF1bMC05XSlbMC05XXsxMX0kLyI7CgkJCSRkaXNjb3ZlclJlZ2V4ID0gIi9eNig/OjAxMXw1WzAtOV17Mn0pWzAtOV17MTJ9JC8iOwoJCQkkamNiUmVnZXggPSAiL14oPzoyMTMxfDE4MDB8MzVcZHszfSlcZHsxMX0kLyI7CgkJCgkJCWlmKHByZWdfbWF0Y2goJHZpc2FSZWdleCwgJHRoaXMtPmNhcmROdW1iZXIpKSAKCQkJewoJCQkJcmV0dXJuIHNlbGY6OiRDQVJEX1RZUEVfVklTQTsKCQkJfQoJCQkKCQkJaWYocHJlZ19tYXRjaCgkbWFzdGVyUmVnZXgsICR0aGlzLT5jYXJkTnVtYmVyKSkKCQkJewoJCQkJcmV0dXJuIHNlbGY6OiRDQVJEX1RZUEVfTUFTVEVSQ0FSRDsKCQkJfQoJCQkKCQkJaWYocHJlZ19tYXRjaCgkYW1leFJlZ2V4LCAkdGhpcy0+Y2FyZE51bWJlcikpCgkJCXsKCQkJCXJldHVybiBzZWxmOjokQ0FSRF9UWVBFX0FNRVg7CgkJCX0KCQkJCgkJCWlmKHByZWdfbWF0Y2goJGRpbmVyc1JlZ2V4LCAkdGhpcy0+Y2FyZE51bWJlcikpCgkJCXsKCQkJCXJldHVybiBzZWxmOjokQ0FSRF9UWVBFX0RJTkVSUzsKCQkJfQoJCQkKCQkJaWYocHJlZ19tYXRjaCgkZGlzY292ZXJSZWdleCwgJHRoaXMtPmNhcmROdW1iZXIpKQoJCQl7CgkJCQlyZXR1cm4gc2VsZjo6JENBUkRfVFlQRV9ESVNDT1ZFUjsKCQkJfQoJCQkKCQkJaWYocHJlZ19tYXRjaCgkamNiUmVnZXgsICR0aGlzLT5jYXJkTnVtYmVyKSkKCQkJewoJCQkJcmV0dXJuIHNlbGY6OiRDQVJEX1RZUEVfSkNCOwoJCQl9CgkJfQoJCQoJCXJldHVybiBzZWxmOjokQ0FSRF9UWVBFX0lOVkFMSUQ7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBjYXJkIG51bWJlcgoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIHRoZSBjYXJkIG51bWJlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2FyZE51bWJlcigpCgl7CgkJcmV0dXJuICR0aGlzLT5jYXJkTnVtYmVyOwoJfQoJCgkKCS8qKgoJICogU2V0IHRoZSBjYXJkIG51bWJlcgoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRjYXJkTnVtYmVyIFRoZSBjcmVkaXQgY2FyZCBudW1iZXIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldENhcmROdW1iZXIoJGNhcmROdW1iZXIpCgl7CgkJJHRoaXMtPmNhcmROdW1iZXIgPSAkY2FyZE51bWJlcjsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGV4cGlyYXRpb24gbW9udGgKCSAqIAoJICogQHJldHVybiBTdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBleHBpcmF0aW9uIG1vbnRoCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRFeHBpcmF0aW9uTW9udGgoKQoJewoJCXJldHVybiAkdGhpcy0+ZXhwaXJhdGlvbk1vbnRoOwoJfQoJCgkKCS8qKgoJICogU2V0cyB0aGUgZXhwaXJhdGlvbiBtb250aAoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRleHBpcmF0aW9uTW9udGggVGhlIGV4cGlyYXRpb24gbW9udGgKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldEV4cGlyYXRpb25Nb250aCgkZXhwaXJhdGlvbk1vbnRoKQoJewoJCSR0aGlzLT5leHBpcmF0aW9uTW9udGggPSAkZXhwaXJhdGlvbk1vbnRoOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgZXhwaXJhdGlvbiB5ZWFyCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZXhwaXJhdGlvbiB5ZWFyCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRFeHBpcmF0aW9uWWVhcigpCgl7CgkJcmV0dXJuICR0aGlzLT5leHBpcmF0aW9uWWVhcjsKCX0KCQoJCgkvKioKCSAqIFNldHMgdGhlIGV4cGlyYXRpb24geWVhcgoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRleHBpcmF0aW9uWWVhcgoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0RXhwaXJhdGlvblllYXIoJGV4cGlyYXRpb25ZZWFyKQoJewoJCSR0aGlzLT5leHBpcmF0aW9uWWVhciA9ICRleHBpcmF0aW9uWWVhcjsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGN2di9jdnYyIGNvZGUKCSAqIAoJICogQHJldHVybiBTdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBjdnYvY29kZQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q1ZWKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmN2djsKCX0KCQoJCgkvKioKCSAqIFNldCB0aGUgY3Z2L2N2djIgY29kZQoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRjdnYKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldENWVigkY3Z2KQoJewoJCSR0aGlzLT5jdnYgPSAkY3Z2OwoJfQoJCgkvKioKCSAqIENoZWNrcyB0byBtYWtlIHN1cmUgdGhlIG9iamVjdCBoYXMgYWxsIG9mIHRoZSByZXF1aXJlZCBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byBjb25kdWN0IGEgdHJhbnNhY3Rpb24KCSAqIEBwYXJhbSBib29sZWFuICRyZXF1aXJlQ1ZWIChvcHRpb25hbCkgV2hldGhlciBvciBub3QgdGhlIGN2diBzaG91bGQgYmUgY29uc2lkZXJlZCByZXF1aXJlZC4gRGVmYXVsdHMgdG8gdHJ1ZQoJICogQHJldHVybiBib29sZWFuIHZhbHVlIG9mIHRydWUgaWYgYWxsIHJlcXVpcmVkIGluZm9ybWF0aW9uIGlzIHNldCwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBoYXNSZXF1aXJlZEluZm8oJHJlcXVpcmVDVlY9ZmFsc2UpCgl7CgkJJGZpZWxkcyA9IGFycmF5KCJjYXJkTnVtYmVyIiwiZXhwaXJhdGlvbk1vbnRoIiwiZXhwaXJhdGlvblllYXIiKTsKCQlpZiAoJHJlcXVpcmVDVlYpCgkJewoJCQkkZmllbGRzW10gPSAiY3Z2IjsKCQl9CgkJZm9yZWFjaCAoJGZpZWxkcyBhcyAkZmllbGQpCgkJewoJCQlpZiAoZW1wdHkoJHRoaXMtPiRmaWVsZCkpCgkJCXsKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCQlyZXR1cm4gdHJ1ZTsKCX0JCgkKCQoJLyoqCgkgKiBWYWxpZGF0ZXMgd2hldGhlciB0aGUgTU1fQ2FyZEluZm8gb2JqZWN0IGNvbnRhaW5zIHZhbGlkIHZhbHVlcyBmb3IgYSBjcmVkaXQgY2FyZAoJICogCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiB0aGUgaW5mb3JtYXRpb24gaXMgcHJlc2VudCBhbmQgdmFsaWQsIG9yIGEgc3RyaW5nIGVycm9yIG1lc3NhZ2UgaWYgaXQgZG9lcyBub3QKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHZhbGlkYXRlKCkKCXsKCQlpZiAoJHRoaXMtPnRlc3RDYXJkKQoJCXsKCQkJLy9ieXBhc3MgdmFsaWRhdGlvbiB0byBhbGxvdyBib2d1cyB2YWx1ZXMgZm9yIHRlc3RpbmcKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCWlmICghJHRoaXMtPmhhc1JlcXVpcmVkSW5mbygpKQoJCXsKCQkJcmV0dXJuICJOb3QgYWxsIGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uIHdhcyBzdXBwbGllZCI7CgkJfQoJCQoJCSRjYXJkRXJyb3IgPSAiIjsKCQkkY3VycmVudFllYXIgPSBpbnR2YWwoZGF0ZSgnWScpKTsKCQlpZiAoZW1wdHkoJHRoaXMtPmV4cGlyYXRpb25Nb250aCkgfHwgKCR0aGlzLT5leHBpcmF0aW9uTW9udGggPiAxMikgfHwgKCR0aGlzLT5leHBpcmF0aW9uTW9udGggPCAxKQoJCQkJfHwgZW1wdHkoJHRoaXMtPmV4cGlyYXRpb25ZZWFyKSB8fCAoJHRoaXMtPmV4cGlyYXRpb25ZZWFyIDwgJGN1cnJlbnRZZWFyKSkKCQl7CgkJCSRjYXJkRXJyb3IuPSJQbGVhc2UgZW50ZXIgYSB2YWxpZCBleHBpcmF0aW9uIGRhdGVcbiI7CgkJfQoJCQoJCWlmIChzdHJsZW4oJHRoaXMtPmNhcmROdW1iZXIpIDwgMTApCgkJewoJCQkkY2FyZEVycm9yLj0iUGxlYXNlIGVudGVyIGEgdmFsaWQgY2FyZCBudW1iZXJcbiI7CgkJfQoJCQoJCXJldHVybiAoZW1wdHkoJGNhcmRFcnJvcikpP3RydWU6JGNhcmRFcnJvcjsKCX0KCQoJCgkvKioKCSAqIERlc2lnbmF0ZXMgdGhpcyBhcyB0ZXN0IGNhcmQgaW5mbywgd2hpY2ggcmVsYXhlcyB0aGUgdmFsaWRhdGlvbiByZXN0cmljdGlvbnMKCSAqIAoJICogQHBhcmFtIGJvb2xlYW4gJGlzVGVzdCBzZXQgdG8gdHJ1ZSBpZiB0aGlzIGlzIHRlc3QgY2FyZCBpbmZvLCBmYWxzZSBvdGhlcndpc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFRlc3RDYXJkKCRpc1Rlc3QpCgl7CgkJJHRoaXMtPnRlc3RDYXJkID0gKCRpc1Rlc3QgPT09IHRydWUpOwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(216, 'scheduledpaymentevent', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBNTV9TY2hlZHVsZWRQYXltZW50RXZlbnQgcmVwcmVzZW50cyBhIHJlY3VycmluZyBwYXltZW50IHRoYXQgd2FzIHNjaGVkdWxlZCBieSB0aGUgTWVtYmVyTW91c2Ugc2NoZWR1bGluZyBmcmFtZXdvcmsuIEl0IHNwZWNpZmljYWxseSByZXByZXNlbnRzIAogKiBhIHBheW1lbnQgZXZlbnQKICoKICovCmNsYXNzIE1NX1NjaGVkdWxlZFBheW1lbnRFdmVudCBleHRlbmRzIE1NX1NjaGVkdWxlZEV2ZW50CnsKCXByb3RlY3RlZCAkcGF5bWVudE51bWJlciAgICA9ICIiOwoJcHJpdmF0ZSAgICRvcmRlckl0ZW1JZCAgICAgID0gIiI7Cglwcml2YXRlICAgJHVzZXJJZCAgICAgICAgICAgPSAiIjsKCXByaXZhdGUgICAkcGF5bWVudFNlcnZpY2VJZCA9ICIiOwoJCglwcml2YXRlICRiaWxsaW5nU3RhdHVzID0gIiI7CgkKCS8vY29uc3RhbnRzIHJlcHJlc2VudGluZyByZW1vdGUgc3RhdHVzZXMKCXB1YmxpYyBzdGF0aWMgJEZJUlNUX1JFQklMTF9GQUlMRUQgPSAyOwoJcHVibGljIHN0YXRpYyAkU0VDT05EX1JFQklMTF9GQUlMRUQgPSAzOwoJcHVibGljIHN0YXRpYyAkVEhJUkRfUkVCSUxMX0ZBSUxFRCA9IDQ7CglwdWJsaWMgc3RhdGljICRQRVJNQU5FTlRMWV9GQUlMRUQgPSA1OwkKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRpZD0iIiwgJGdldERhdGE9dHJ1ZSkgCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgkaWQsJGdldERhdGEpOwoJCSR0aGlzLT5ldmVudFR5cGUgPSBNTV9TY2hlZHVsZWRFdmVudDo6JFBBWU1FTlRfU0VSVklDRV9FVkVOVDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCXBhcmVudDo6Z2V0RGF0YSgpOwoJCgkJaWYgKGludHZhbCgkdGhpcy0+aWQpID4gMCkKCQl7CgkJCSRzcWwgPSAiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX1NDSEVEVUxFRF9QQVlNRU5UUy4iIHdoZXJlIGlkPXskdGhpcy0+aWR9IjsKCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQlpZigkcmVzdWx0KQoJCQl7CgkJCQkkdGhpcy0+c2V0QWRkaXRpb25hbERhdGEoJHJlc3VsdCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxEYXRhKCRkYXRhKQoJewoJCSR0aGlzLT5vcmRlckl0ZW1JZCA9ICRkYXRhLT5vcmRlcl9pdGVtX2lkOwoJCSR0aGlzLT51c2VySWQgPSAkZGF0YS0+dXNlcl9pZDsKCQkkdGhpcy0+cGF5bWVudFNlcnZpY2VJZCA9ICRkYXRhLT5wYXltZW50X3NlcnZpY2VfaWQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoJHVwZGF0ZVJlbW90ZWx5PXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vZmlndXJlIG91dCBpZiB0aGlzIGlzIGEgbmV3IHJlY29yZCBvciBhbiB1cGRhdGUKCQkkaXNVcGRhdGUgPSAoaW50dmFsKCR0aGlzLT5pZCkgPjApP3RydWU6ZmFsc2U7CgkJJG5ld1JlY29yZCA9ICEkaXNVcGRhdGU7CgkKCQkvL2NhbGwgdGhlIHBhcmVudCBjb21taXQgdG8gZ2VuZXJhdGUgdGhlIGV2ZW50CgkJJHJlc3BvbnNlID0gcGFyZW50Ojpjb21taXREYXRhKCR1cGRhdGVSZW1vdGVseSk7CgkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCQkKCQkvL3ByaW1hcnkgdGFibGUgdXBkYXRlZCwgYW5kIHNjaGVkdWxlIGNyZWF0ZWQsIG5vdyBjcmVhdGUvdXBkYXRlIGRldGFpbHMgdGFibGUKCQkkc2NoZWR1bGVEZXRhaWxEYXRhID0gYXJyYXkoICAidXNlcl9pZCIgIAkJCT0+ICR0aGlzLT51c2VySWQsCgkJCQkJCQkJCSAgIm9yZGVyX2l0ZW1faWQiICAgIAk9PiAkdGhpcy0+b3JkZXJJdGVtSWQsCgkJCQkJCQkJCSAgInBheW1lbnRfc2VydmljZV9pZCIgID0+ICR0aGlzLT5wYXltZW50U2VydmljZUlkCgkJKTsKCQkKCQlpZiAoISRpc1VwZGF0ZSkKCQl7CgkJCS8vdGhpcyBpcyBhIG5ldyByZWNvcmQKCQkJJHNjaGVkdWxlRGV0YWlsRGF0YSA9IGFycmF5KCJpZCIgPT4gJHRoaXMtPmlkKSArICRzY2hlZHVsZURldGFpbERhdGE7CgkJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX1NDSEVEVUxFRF9QQVlNRU5UUywkc2NoZWR1bGVEZXRhaWxEYXRhKTsKCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8gY3JlYXRlIHNjaGVkdWxlZCBldmVudDogZXJyb3IgPSAiLiR3cGRiLT5sYXN0X2Vycm9yLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkdXBkYXRlV2hlcmUgPSBhcnJheSgiaWQiPT4kdGhpcy0+aWQpOwoJCQkkcmVzdWx0ID0gJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9TQ0hFRFVMRURfUEFZTUVOVFMsJHNjaGVkdWxlRGV0YWlsRGF0YSwkdXBkYXRlV2hlcmUpOwoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byB1cGRhdGUgc2NoZWR1bGVkIGV2ZW50OiBlcnJvciA9ICIuJHdwZGItPmxhc3RfZXJyb3IsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCQkKCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBkZWxldGUoJGRlbGV0ZVJlbW90ZWx5PXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJaWYgKGludHZhbCgkdGhpcy0+aWQpID4gMCkKCQl7CgkJCSR3cGRiLT5xdWVyeSgiREVMRVRFIEZST00gIi5NTV9UQUJMRV9TQ0hFRFVMRURfUEFZTUVOVFMuIiBXSEVSRSBpZD0neyR0aGlzLT5pZH0nIik7CgkJCSRyZXNwb25zZSA9IHBhcmVudDo6ZGVsZXRlKCRkZWxldGVSZW1vdGVseSk7CgkJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzcG9uc2UpKQoJCQl7CgkJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCQl9CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBkZWxldGUgdGhpcyBzY2hlZHVsZWQgcGF5bWVudCBldmVudCBiZWNhdXNlIGl0IGlzIGludmFsaWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gcHJlcGFyZVNldHRpbmdzKCRhZGRpdGlvbmFsRXhjbHVzaW9ucz1hcnJheSgpKQoJewoJCSRhZGRpdGlvbmFsRXhjbHVzaW9uc1tdID0gIm9yZGVySXRlbUlkIjsKCQkkYWRkaXRpb25hbEV4Y2x1c2lvbnNbXSA9ICJ1c2VySWQiOwoJCSRhZGRpdGlvbmFsRXhjbHVzaW9uc1tdID0gInBheW1lbnRTZXJ2aWNlSWQiOwoJCXJldHVybiBwYXJlbnQ6OnByZXBhcmVTZXR0aW5ncygkYWRkaXRpb25hbEV4Y2x1c2lvbnMpOwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyB0aGUgcGF5bWVudCBudW1iZXIKCSAqIAoJICogQHJldHVybiBBbiBpbnRlZ2VyIHJlcHJlc2VudGluZyB0aGUgcGF5bWVudCBudW1iZXIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldFBheW1lbnROdW1iZXIoKQoJewoJCXJldHVybiAkdGhpcy0+cGF5bWVudE51bWJlcjsKCX0KCQoJCgkvKioKCSAqIFNldHMgdGhlIHBheW1lbnQgbnVtYmVyCgkgKiAKCSAqIEBwYXJhbSBpbnQgJHBheW1lbnROdW1iZXIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFBheW1lbnROdW1iZXIoJHBheW1lbnROdW1iZXIpCgl7CgkJaWYgKGlzX251bWVyaWMoJHBheW1lbnROdW1iZXIpKQoJCXsKCQkJJHRoaXMtPnBheW1lbnROdW1iZXIgPSBpbnR2YWwoJHBheW1lbnROdW1iZXIpOwoJCX0KCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2V0RXZlbnRUeXBlKCRldmVudFR5cGUpCgl7CgkJLy9kb24ndCBhbGxvdyB0aGUgZXZlbnQgdHlwZSB0byBiZSBjaGFuZ2VkCgkJJHRoaXMtPmV2ZW50VHlwZSA9IE1NX1NjaGVkdWxlZEV2ZW50OjokUEFZTUVOVF9TRVJWSUNFX0VWRU5UOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRPcmRlckl0ZW1JZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5vcmRlckl0ZW1JZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0T3JkZXJJdGVtSWQoJG9yZGVySXRlbUlkKQoJewoJCSR0aGlzLT5vcmRlckl0ZW1JZCA9ICRvcmRlckl0ZW1JZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VXNlcklkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVzZXJJZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VXNlcklkKCR1c2VySWQpCgl7CgkJJHRoaXMtPnVzZXJJZCA9ICR1c2VySWQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFBheW1lbnRTZXJ2aWNlSWQoKQoJewoJCXJldHVybiAkdGhpcy0+cGF5bWVudFNlcnZpY2VJZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UGF5bWVudFNlcnZpY2VJZCgkcGF5bWVudFNlcnZpY2VJZCkKCXsKCQkkdGhpcy0+cGF5bWVudFNlcnZpY2VJZCA9ICRwYXltZW50U2VydmljZUlkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRCaWxsaW5nU3RhdHVzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmJpbGxpbmdTdGF0dXM7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldEJpbGxpbmdTdGF0dXMoJGJpbGxpbmdTdGF0dXMpCgl7CgkJJHRoaXMtPmJpbGxpbmdTdGF0dXMgPSAkYmlsbGluZ1N0YXR1czsKCX0KCQoJCgkvKioKCSAqIEZpbmRzIHRoZSBuZXh0IHNjaGVkdWxlZCBwYXltZW50IGV2ZW50IHVzaW5nIGFuIG9yZGVyIGl0ZW0gaWQgCgkgKiAKCSAqIEBwYXJhbSBzdHJpbmcgJG9yZGVySXRlbUlkIFRoZSBvcmRlciBpdGVtIGlkCgkgKiBAcmV0dXJuIE1NX1NjaGVkdWxlZFBheW1lbnRFdmVudCBmb3IgdGhlIG5leHQgc2NoZWR1bGVkIGV2ZW50IG9uIHRoYXQgb3JkZXIgaXRlbSBpZC4gUmV0dXJucyBib29sZWFuIGZhbHNlIGlmIG5vIG5leHQgZXZlbnQgZXhpc3RzCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZE5leHRTY2hlZHVsZWRFdmVudEJ5T3JkZXJJdGVtSWQoJG9yZGVySXRlbUlkLCRmdXR1cmVPbmx5PXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRjdXJyZW50RGF0ZXRpbWUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkkc3FsID0gIlNFTEVDVCBzcC5pZCBGUk9NICIuTU1fVEFCTEVfU0NIRURVTEVEX1BBWU1FTlRTLiIgc3AgTEVGVCBKT0lOICIuTU1fVEFCTEVfU0NIRURVTEVEX0VWRU5UUy4iIHNlIG9uIChzcC5pZCA9IHNlLmlkKSAiLgoJCQkJIldIRVJFIChvcmRlcl9pdGVtX2lkPSVzKSBBTkQgKHN0YXR1cyA9ICVzKSAiOwoJCWlmICgkZnV0dXJlT25seSkKCQl7CgkJCSRzcWwgLj0gIkFORCAoc2NoZWR1bGVkX2RhdGUgPiAneyRjdXJyZW50RGF0ZXRpbWV9JykgIjsKCQl9CgkJJHNxbCAuPSAiT1JERVIgQlkgaWQgQVNDIExJTUlUIDEiOwoJCSRzcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCRvcmRlckl0ZW1JZCxNTV9TY2hlZHVsZWRFdmVudDo6JEVWRU5UX1BFTkRJTkcpOwoJCSRldmVudElkID0gJHdwZGItPmdldF92YXIoJHNxbCk7CgkJCgkJaWYgKCRldmVudElkICE9PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fU2NoZWR1bGVkUGF5bWVudEV2ZW50KCRldmVudElkKTsKCQl9CgkJcmV0dXJuIGZhbHNlOwoJfQoJCn0=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(217, 'affiliatecontroller', 'LyoqCiAqIAogKiBUaGUgQWZmaWxpYXRlIENvbnRyb2xsZXIgcHJvdmlkZXMgdGhlIG1haW4gaW50ZXJmYWNlIHRoYXQgdGhlIHJlc3Qgb2YgdGhlIGFwcGxpY2F0aW9uIHdpbGwgdXNlIHRvIGV4ZWN1dGUgbWV0aG9kcyBvbiB0aGUKICogYWN0aXZlIGFmZmlsaWF0ZSBwcm92aWRlcgogKgogKi8KY2xhc3MgTU1fQWZmaWxpYXRlQ29udHJvbGxlciAKewkKCXB1YmxpYyBzdGF0aWMgJEFGRklMSUFURV9FVkVOVF9UUkFDS19JTklUSUFMX0NPTU1JU1NJT04gPSAibW1fYWZmaWxpYXRlX3RyYWNrX2luaXRpYWxfY29tbWlzc2lvbiI7CglwdWJsaWMgc3RhdGljICRBRkZJTElBVEVfRVZFTlRfVFJBQ0tfUkVCSUxMX0NPTU1JU1NJT04gPSAibW1fYWZmaWxpYXRlX3RyYWNrX3JlYmlsbF9jb21taXNzaW9uIjsKCXB1YmxpYyBzdGF0aWMgJEFGRklMSUFURV9FVkVOVF9SRVZFUlNFX0NPTU1JU1NJT04gPSAibW1fYWZmaWxpYXRlX3JldmVyc2VfY29tbWlzc2lvbiI7CglwdWJsaWMgc3RhdGljICRBRkZJTElBVEVfRVZFTlRfQ1JFQVRFX0FDQ09VTlQgPSAibW1fYWZmaWxpYXRlX2NyZWF0ZV9hY2NvdW50IjsKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzZXR1cCgpCgl7CgkJJGFjID0gbmV3IE1NX0FmZmlsaWF0ZUNvbnRyb2xsZXIoKTsKCQlhZGRfYWN0aW9uKE1NX0V2ZW50OjokTUVNQkVSX0FERCwgYXJyYXkoJGFjLCAnY3JlYXRlQWZmaWxpYXRlQWNjb3VudCcpKTsKCQlhZGRfYWN0aW9uKE1NX0V2ZW50OjokUEFZTUVOVF9SRUNFSVZFRCwgYXJyYXkoJGFjLCAndHJhY2tDb21taXNzaW9uJykpOwoJCWFkZF9hY3Rpb24oTU1fRXZlbnQ6OiRQQVlNRU5UX1JFQklMTCwgYXJyYXkoJGFjLCAndHJhY2tSZWJpbGxDb21taXNzaW9uJykpOwoJCWFkZF9hY3Rpb24oTU1fRXZlbnQ6OiRSRUZVTkRfSVNTVUVELCBhcnJheSgkYWMsICdyZXZlcnNlQ29tbWlzc2lvbicpKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHRyYWNrQ29tbWlzc2lvbigkZGF0YSwgJGlzUmViaWxsPWZhbHNlKQoJewoJCSRvcmRlck51bWJlciA9ICR0aGlzLT5nZXRPcmRlck51bWJlcigkZGF0YSk7CgkJJGFmZmlsaWF0ZUlkID0gaXNzZXQoJGRhdGFbIm9yZGVyX2FmZmlsaWF0ZV9pZCJdKSA/ICRkYXRhWyJvcmRlcl9hZmZpbGlhdGVfaWQiXSA6ICIiOwoJCQoJCSRjb21taXNzaW9uUHJvZmlsZSA9ICR0aGlzLT5nZXRDb21taXNzaW9uUHJvZmlsZSgkZGF0YSk7CgkJJHRoaXMtPl90cmFja0NvbW1pc3Npb24oJGNvbW1pc3Npb25Qcm9maWxlLCAkYWZmaWxpYXRlSWQsICRvcmRlck51bWJlciwgJGRhdGEsICRpc1JlYmlsbCk7CgkJCgkJLy8gY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBwYXJ0bmVyIHBheW91dHMKCQkkcGFydG5lcnMgPSAkdGhpcy0+Z2V0UGFydG5lclBheW91dHMoJGRhdGEpOwoJCQoJCWZvcmVhY2goJHBhcnRuZXJzIGFzICRwYXJ0bmVyKQoJCXsKCQkJJGNvbW1pc3Npb25Qcm9maWxlID0gbmV3IE1NX0NvbW1pc3Npb25Qcm9maWxlKCRwYXJ0bmVyLT5jb21taXNzaW9uUHJvZmlsZUlkKTsKCQkJCgkJCWlmKCEkY29tbWlzc2lvblByb2ZpbGUtPmlzVmFsaWQoKSkKCQkJewoJCQkJJGNvbW1pc3Npb25Qcm9maWxlID0gTU1fQ29tbWlzc2lvblByb2ZpbGU6OmdldERlZmF1bHRDb21taXNzaW9uUHJvZmlsZSgpOwoJCQl9CgkJCQoJCQkkdGhpcy0+X3RyYWNrQ29tbWlzc2lvbigkY29tbWlzc2lvblByb2ZpbGUsICRwYXJ0bmVyLT5hZmZpbGlhdGVJZCwgJG9yZGVyTnVtYmVyLiIteyRwYXJ0bmVyLT5hZmZpbGlhdGVJZH0iLCAkZGF0YSwgJGlzUmViaWxsKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiB0cmFja1JlYmlsbENvbW1pc3Npb24oJGRhdGEpCgl7CgkJJHRoaXMtPnRyYWNrQ29tbWlzc2lvbigkZGF0YSwgdHJ1ZSk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gX3RyYWNrQ29tbWlzc2lvbihNTV9Db21taXNzaW9uUHJvZmlsZSAkY29tbWlzc2lvblByb2ZpbGUsICRhZmZpbGlhdGVJZCwgJG9yZGVyTnVtYmVyLCAkZGF0YSwgJGlzUmViaWxsKQoJewoJCSRhZmZpbGlhdGVQcm92aWRlciA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmFjdG9yeTo6Z2V0QWN0aXZlUHJvdmlkZXIoKTsKCQkkY291cG9uQ29kZSA9ICIiOwoJCSRkb1RyYWNrQ29tbWlzc2lvbiA9IGZhbHNlOwoJCQoJCS8vIGNoZWNrIGlmIGNvbW1pc3Npb24gc2hvdWxkIGJlIHRyYWNrZWQgYmFzZWQgb24gaWYgaW5pdGlhbCBvciByZWJpbGwgY29tbWlzc2lvbnMKCQkvLyBhcmUgZW5hYmxlZCBvbiB0aGUgcHJvZmlsZSwgYW5kIGlmIHRoaXMgaXMgYSByZWJpbGwgcGF5bWVudCwgaWYgdGhlcmUgaXMgYSBsaW1pdAoJCS8vIGFuZCBpZiBpdCBoYXMgYmVlbiByZWFjaGVkLgoJCWlmKCEkaXNSZWJpbGwgJiYgJGNvbW1pc3Npb25Qcm9maWxlLT5pbml0aWFsQ29tbWlzc2lvbkVuYWJsZWQoKSkKCQl7CgkJCS8vIGNoZWNrIGlmIGNvbW1pc3Npb24gc2hvdWxkIGJlIHRyYWNrZWQgYmFzZWQgb24gaWYgdGhlcmUgaXMgYW4gYWZmaWxpYXRlIElECgkJCWlmKCFlbXB0eSgkYWZmaWxpYXRlSWQpKQoJCQl7CgkJCQkkZG9UcmFja0NvbW1pc3Npb24gPSB0cnVlOwoJCQl9CgkJCQoJCQkvLyBjaGVjayBpZiBjb21taXNzaW9uIHNob3VsZCBiZSB0cmFja2VkIGJhc2VkIG9uIGlmIHRoZXJlIGlzIGEgY291cG9uIGFzc29jaWF0ZWQgd2l0aCB0aGUgb3JkZXIKCQkJaWYoJGFmZmlsaWF0ZVByb3ZpZGVyLT5zdXBwb3J0c0ZlYXR1cmUoTU1fQWZmaWxpYXRlUHJvdmlkZXJGZWF0dXJlczo6Q09NTUlTU0lPTl9UUkFDS0lOR19CWV9DT1VQT04pCgkJCQkmJiBpc3NldCgkZGF0YVsib3JkZXJfY291cG9ucyJdKSkKCQkJewoJCQkJJGNvdXBvbnMgPSBqc29uX2RlY29kZShzdHJpcHNsYXNoZXMoJGRhdGFbIm9yZGVyX2NvdXBvbnMiXSkpOwoJCQkJCQoJCQkJaWYoaXNfYXJyYXkoJGNvdXBvbnMpICYmIGNvdW50KCRjb3Vwb25zKSA+IDApCgkJCQl7CgkJCQkJJGRvVHJhY2tDb21taXNzaW9uID0gdHJ1ZTsKCQkJCQkKCQkJCQlmb3JlYWNoKCRjb3Vwb25zIGFzICRjb3Vwb24pCgkJCQkJewoJCQkJCQkkY291cG9uQ29kZSA9ICRjb3Vwb24tPmNvZGU7CgkJCQkJCgkJCQkJCS8vIG9ubHkgc3VwcG9ydHMgb25lIGNvdXBvbiByaWdodCBub3cKCQkJCQkJYnJlYWs7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCQoJCQkvLyBjaGVjayBpZiBjb21taXNzaW9uIHNob3VsZCBiZSB0cmFja2VkIGJhc2VkIG9uIElQIGFkZHJlc3MKCQkJaWYoJGFmZmlsaWF0ZVByb3ZpZGVyLT5zdXBwb3J0c0ZlYXR1cmUoTU1fQWZmaWxpYXRlUHJvdmlkZXJGZWF0dXJlczo6Q09NTUlTU0lPTl9UUkFDS0lOR19CWV9JUF9BRERSRVNTKQoJCQkJJiYgJGFmZmlsaWF0ZVByb3ZpZGVyLT5nZXRJUFRyYWNraW5nRW5hYmxlZCgpID09ICIxIikKCQkJewoJCQkJJGRvVHJhY2tDb21taXNzaW9uID0gdHJ1ZTsKCQkJfQoJCX0KCQllbHNlIGlmKCRpc1JlYmlsbCAmJiAkY29tbWlzc2lvblByb2ZpbGUtPnJlYmlsbENvbW1pc3Npb25zRW5hYmxlZCgpKQoJCXsKCQkJaWYoJGNvbW1pc3Npb25Qcm9maWxlLT5kb0xpbWl0UmViaWxscygpKQoJCQl7CgkJCQkvLyBjaGVjayBpZiByZWJpbGwgbGltaXQgZXhjZWVkZWQKCQkJCWdsb2JhbCAkd3BkYjsKCQkJCSR0b3RhbFJlYmlsbHMgPSAwOwoJCQkJCQoJCQkJJHByb3ZpZGVyX2VudGl0eSA9IG5ldyBNTV9BZmZpbGlhdGVQcm92aWRlcigpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+c2V0VG9rZW4oJGFmZmlsaWF0ZVByb3ZpZGVyLT5nZXRUb2tlbigpKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPmdldERhdGEoKTsKCQkJCQkKCQkJCSRzcWwgPSAiU0VMRUNUIGNvdW50KCopIGFzIHRvdGFsUmViaWxscyBGUk9NICIuTU1fVEFCTEVfQUZGSUxJQVRFX1JFQklMTF9DT01NSVNTSU9OUyAuIiBXSEVSRSAiOwoJCQkJJHNxbCAuPSAiYWZmaWxpYXRlX3Byb3ZpZGVyX2lkPSd7JHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKX0nIEFORCBhZmZpbGlhdGVfaWQ9J3skYWZmaWxpYXRlSWR9JyAiOwoJCQkJJHNxbCAuPSAiQU5EIG9yZGVyX251bWJlcj0neyRkYXRhWyJvcmRlcl9udW1iZXIiXX0nIjsKCQkJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJCQkKCQkJCWlmKGlzc2V0KCRyb3ctPnRvdGFsUmViaWxscykpCgkJCQl7CgkJCQkJJHRvdGFsUmViaWxscyA9IGludHZhbCgkcm93LT50b3RhbFJlYmlsbHMpOwoJCQkJfQoJCQkJCQoJCQkJaWYoJHRvdGFsUmViaWxscyA8ICRjb21taXNzaW9uUHJvZmlsZS0+Z2V0UmViaWxsQ29tbWlzc2lvbkxpbWl0KCkpCgkJCQl7CgkJCQkJJGRvVHJhY2tDb21taXNzaW9uID0gdHJ1ZTsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRkb1RyYWNrQ29tbWlzc2lvbiA9IHRydWU7CgkJCX0KCQl9CgkJCQoJCWlmKCRkb1RyYWNrQ29tbWlzc2lvbikKCQl7CgkJCSRvcmRlclRvdGFsID0gZmxvYXR2YWwoJGRhdGFbIm9yZGVyX3RvdGFsIl0pIC0gZmxvYXR2YWwoJGRhdGFbIm9yZGVyX3NoaXBwaW5nIl0pOwoJCQoJCQkkcmVzdWx0ID0gJGFmZmlsaWF0ZVByb3ZpZGVyLT50cmFja0NvbW1pc3Npb24oJGNvbW1pc3Npb25Qcm9maWxlLCAkYWZmaWxpYXRlSWQsICRvcmRlck51bWJlciwgJG9yZGVyVG90YWwsICRkYXRhLCAkaXNSZWJpbGwpOwoJCQkKCQkJLy8gdHJhY2sgcmViaWxsIGNvbW1pc3Npb25zCgkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkgJiYgJGlzUmViaWxsKQoJCQl7CgkJCQlnbG9iYWwgJHdwZGI7CgkJCgkJCQkkcHJvdmlkZXJfZW50aXR5ID0gbmV3IE1NX0FmZmlsaWF0ZVByb3ZpZGVyKCk7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5zZXRUb2tlbigkYWZmaWxpYXRlUHJvdmlkZXItPmdldFRva2VuKCkpOwoJCQkJJHByb3ZpZGVyX2VudGl0eS0+Z2V0RGF0YSgpOwoJCQoJCQkJJHJlYmlsbERhdGEgPSBhcnJheSgpOwoJCQkJJHJlYmlsbERhdGFbJ2FmZmlsaWF0ZV9wcm92aWRlcl9pZCddID0gJHByb3ZpZGVyX2VudGl0eS0+Z2V0SWQoKTsKCQkJCSRyZWJpbGxEYXRhWydhZmZpbGlhdGVfaWQnXSA9ICRhZmZpbGlhdGVJZDsKCQkJCSRyZWJpbGxEYXRhWydvcmRlcl9udW1iZXInXSA9ICRkYXRhWyJvcmRlcl9udW1iZXIiXTsKCQkJCSRyZWJpbGxEYXRhWyd0cmFuc2FjdGlvbl9pZCddID0gJGRhdGFbIm9yZGVyX3RyYW5zYWN0aW9uX2lkIl07CgkJCgkJCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0FGRklMSUFURV9SRUJJTExfQ09NTUlTU0lPTlMsICRyZWJpbGxEYXRhKTsKCQkJfQoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJewoJCQkJLy8gZGlzcGF0Y2ggcHVzaCBub3RpZmljYXRpb25zCgkJCQlpZighJGlzUmViaWxsKQoJCQkJewkKCQkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRDT01NSVNTSU9OX0lOSVRJQUwsIE1NX0V2ZW50OjpwYWNrYWdlQWZmaWxpYXRlRGF0YSgkY29tbWlzc2lvblByb2ZpbGUsICRhZmZpbGlhdGVJZCwgJG9yZGVyTnVtYmVyLCAkb3JkZXJUb3RhbCwgJGRhdGEpKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRDT01NSVNTSU9OX1JFQklMTCwgTU1fRXZlbnQ6OnBhY2thZ2VBZmZpbGlhdGVEYXRhKCRjb21taXNzaW9uUHJvZmlsZSwgJGFmZmlsaWF0ZUlkLCAkb3JkZXJOdW1iZXIsICRvcmRlclRvdGFsLCAkZGF0YSwgdHJ1ZSkpOwoJCQkJfQoJCQkJCgkJCQkvLyBsb2cgYWN0aXZpdHkKCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJGRhdGFbIm1lbWJlcl9pZCJdKTsKCQkJCQoJCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkbG9nUGFyYW1zID0gYXJyYXkoKTsKCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUZGSUxJQVRFX1BST1ZJREVSX05BTUVdID0gJGFmZmlsaWF0ZVByb3ZpZGVyLT5nZXROYW1lKCk7CgkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9PUkRFUl9OVU1CRVJdID0gJG9yZGVyTnVtYmVyOwoJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BRkZJTElBVEVfT1JERVJfVE9UQUxdID0gJG9yZGVyVG90YWw7CgkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9PUkRFUl9JUF9BRERSRVNTXSA9ICRkYXRhWyJvcmRlcl9pcF9hZGRyZXNzIl07CgkJCQkJCgkJCQkJaWYoISRpc1JlYmlsbCkKCQkJCQl7CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BRkZJTElBVEVfVFJBQ0tJTkdfRVZFTlRdID0gc2VsZjo6JEFGRklMSUFURV9FVkVOVF9UUkFDS19JTklUSUFMX0NPTU1JU1NJT047CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUZGSUxJQVRFX1RSQUNLSU5HX0VWRU5UXSA9IHNlbGY6OiRBRkZJTElBVEVfRVZFTlRfVFJBQ0tfUkVCSUxMX0NPTU1JU1NJT047CgkJCQkJfQoJCQkJCQoJCQkJCWlmKCFlbXB0eSgkY291cG9uQ29kZSkpCgkJCQkJewoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUZGSUxJQVRFX0NPVVBPTl9DT0RFXSA9ICRjb3Vwb25Db2RlOwoJCQkJCX0KCQkJCQkKCQkJCQlpZighZW1wdHkoJGFmZmlsaWF0ZUlkKSkKCQkJCQl7CgkJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BRkZJTElBVEVfSURdID0gJGFmZmlsaWF0ZUlkOwoJCQkJCX0KCQkJCQkKCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUZGSUxJQVRFX1RSQUNLSU5HX1VSTF0gPSAkcmVzdWx0LT5nZXREYXRhKCJ1cmwiKTsKCQkJCQkKCQkJCQlpZigkYWZmaWxpYXRlUHJvdmlkZXItPmdldFRva2VuKCkgIT0gTU1fQWZmaWxpYXRlUHJvdmlkZXI6OiRERUZBVUxUX1RPS0VOKQoJCQkJCXsKCQkJCQkJTU1fQWN0aXZpdHlMb2c6OmxvZygkdXNlciwgTU1fQWN0aXZpdHlMb2c6OiRFVkVOVF9UWVBFX0FGRklMSUFURV9UUkFDS0lORywgJGxvZ1BhcmFtcyk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJfQoJIAoJcHVibGljIGZ1bmN0aW9uIHJldmVyc2VDb21taXNzaW9uKCRkYXRhKQoJewoJCSRhZmZpbGlhdGVQcm92aWRlciA9IE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmFjdG9yeTo6Z2V0QWN0aXZlUHJvdmlkZXIoKTsKCQkkb3JkZXJOdW1iZXIgPSAkdGhpcy0+Z2V0T3JkZXJOdW1iZXIoJGRhdGEpOwoJCSRjb21taXNzaW9uUHJvZmlsZSA9ICR0aGlzLT5nZXRDb21taXNzaW9uUHJvZmlsZSgkZGF0YSk7CgkJCgkJJGxvZ1BhcmFtcyA9IGFycmF5KCk7CgkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9QUk9WSURFUl9OQU1FXSA9ICRhZmZpbGlhdGVQcm92aWRlci0+Z2V0TmFtZSgpOwoJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BRkZJTElBVEVfVFJBQ0tJTkdfRVZFTlRdID0gc2VsZjo6JEFGRklMSUFURV9FVkVOVF9SRVZFUlNFX0NPTU1JU1NJT047CgkJCgkJaWYoJGNvbW1pc3Npb25Qcm9maWxlLT5kb1JldmVyc2VDb21taXNzaW9ucygpKQoJCXsKCQkJJGFmZmlsaWF0ZUlkID0gJGRhdGFbIm9yZGVyX2FmZmlsaWF0ZV9pZCJdOwoJCSAJJHJlc3VsdCA9ICRhZmZpbGlhdGVQcm92aWRlci0+cmV2ZXJzZUNvbW1pc3Npb24oJGFmZmlsaWF0ZUlkLCAkb3JkZXJOdW1iZXIpOwoJCSAJCgkJIAlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCSAJewoJCQkgCS8vIGRpc3BhdGNoIHB1c2ggbm90aWZpY2F0aW9uCgkJCSAJZG9fYWN0aW9uKE1NX0V2ZW50OjokQ0FOQ0VMX0NPTU1JU1NJT04sIE1NX0V2ZW50OjpwYWNrYWdlQWZmaWxpYXRlRGF0YSgkY29tbWlzc2lvblByb2ZpbGUsICRhZmZpbGlhdGVJZCwgJG9yZGVyTnVtYmVyLCAiIiwgJGRhdGEpKTsKCQkgCQkKCQkJIAkvLyBsb2cgYWN0aXZpdHkKCQkJIAkkdXNlciA9IG5ldyBNTV9Vc2VyKCRkYXRhWyJtZW1iZXJfaWQiXSk7CgkJCSAJCgkJCSAJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJIAl7CgkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9PUkRFUl9OVU1CRVJdID0gJG9yZGVyTnVtYmVyOwoJCQkgCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUZGSUxJQVRFX1RSQUNLSU5HX1VSTF0gPSAkcmVzdWx0LT5nZXREYXRhKCJ1cmwiKTsKCQkJIAkJCgkJCSAJCWlmKCRhZmZpbGlhdGVQcm92aWRlci0+Z2V0VG9rZW4oKSAhPSBNTV9BZmZpbGlhdGVQcm92aWRlcjo6JERFRkFVTFRfVE9LRU4pCgkJCQkJewoJCQkJCQlNTV9BY3Rpdml0eUxvZzo6bG9nKCR1c2VyLCBNTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfQUZGSUxJQVRFX1RSQUNLSU5HLCAkbG9nUGFyYW1zKTsKCQkJCQl9CgkJCSAJfQoJCSAJfQoJCSB9CgkJCgkJLy8gY2hlY2sgaWYgdGhlcmUgYXJlIGFueSBwYXJ0bmVyIHBheW91dHMKCQkkcGFydG5lcnMgPSAkdGhpcy0+Z2V0UGFydG5lclBheW91dHMoJGRhdGEpOwoJCQoJCWZvcmVhY2goJHBhcnRuZXJzIGFzICRwYXJ0bmVyKQoJCXsKCQkJJGNvbW1pc3Npb25Qcm9maWxlID0gbmV3IE1NX0NvbW1pc3Npb25Qcm9maWxlKCRwYXJ0bmVyLT5jb21taXNzaW9uUHJvZmlsZUlkKTsKCQkJCgkJCWlmKCRjb21taXNzaW9uUHJvZmlsZS0+aXNWYWxpZCgpICYmICRjb21taXNzaW9uUHJvZmlsZS0+ZG9SZXZlcnNlQ29tbWlzc2lvbnMoKSkKCQkJewoJCQkJJHJlc3VsdCA9ICRhZmZpbGlhdGVQcm92aWRlci0+cmV2ZXJzZUNvbW1pc3Npb24oJHBhcnRuZXItPmFmZmlsaWF0ZUlkLCAkb3JkZXJOdW1iZXIuIi17JHBhcnRuZXItPmFmZmlsaWF0ZUlkfSIpOwoJCQkJCgkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCSAJCXsKCQkJCSAJLy8gZGlzcGF0Y2ggcHVzaCBub3RpZmljYXRpb24KCQkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRDQU5DRUxfQ09NTUlTU0lPTiwgTU1fRXZlbnQ6OnBhY2thZ2VBZmZpbGlhdGVEYXRhKCRjb21taXNzaW9uUHJvZmlsZSwgJHBhcnRuZXItPmFmZmlsaWF0ZUlkLCAkb3JkZXJOdW1iZXIuIi17JHBhcnRuZXItPmFmZmlsaWF0ZUlkfSIsICIiLCAkZGF0YSkpOwoJCgkJCQkJLy8gbG9nIGFjdGl2aXR5CgkJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkZGF0YVsibWVtYmVyX2lkIl0pOwoJCQkJCQkKCQkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9PUkRFUl9OVU1CRVJdID0gJG9yZGVyTnVtYmVyLiIteyRwYXJ0bmVyLT5hZmZpbGlhdGVJZH0iOwoJCQkJCQkkbG9nUGFyYW1zW01NX0FjdGl2aXR5TG9nOjokUEFSQU1fQUZGSUxJQVRFX1RSQUNLSU5HX1VSTF0gPSAkcmVzdWx0LT5nZXREYXRhKCJ1cmwiKTsKCQkJCQkJCgkJCQkJCWlmKCRhZmZpbGlhdGVQcm92aWRlci0+Z2V0VG9rZW4oKSAhPSBNTV9BZmZpbGlhdGVQcm92aWRlcjo6JERFRkFVTFRfVE9LRU4pCgkJCQkJCXsKCQkJCQkJCU1NX0FjdGl2aXR5TG9nOjpsb2coJHVzZXIsIE1NX0FjdGl2aXR5TG9nOjokRVZFTlRfVFlQRV9BRkZJTElBVEVfVFJBQ0tJTkcsICRsb2dQYXJhbXMpOwoJCQkJCQl9CgkJCQkJfQoJCSAJCX0KCQkJfQoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNyZWF0ZUFmZmlsaWF0ZUFjY291bnQoJGRhdGEpCgl7CgkJJGFmZmlsaWF0ZVByb3ZpZGVyID0gTU1fQWZmaWxpYXRlUHJvdmlkZXJGYWN0b3J5OjpnZXRBY3RpdmVQcm92aWRlcigpOwoJCQoJCWlmKCRhZmZpbGlhdGVQcm92aWRlci0+c3VwcG9ydHNGZWF0dXJlKE1NX0FmZmlsaWF0ZVByb3ZpZGVyRmVhdHVyZXM6OkFGRklMSUFURV9BQ0NPVU5UX0NSRUFUSU9OKSkKCQl7CgkJCSRyZXN1bHQgPSAkYWZmaWxpYXRlUHJvdmlkZXItPmNyZWF0ZUFmZmlsaWF0ZUFjY291bnQoJGRhdGEpOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJewkKCQkJCS8vIGxvZyBhY3Rpdml0eQoJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkZGF0YVsibWVtYmVyX2lkIl0pOwoJCQkKCQkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJGxvZ1BhcmFtcyA9IGFycmF5KCk7CgkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9QUk9WSURFUl9OQU1FXSA9ICRhZmZpbGlhdGVQcm92aWRlci0+Z2V0TmFtZSgpOwoJCQkJCSRsb2dQYXJhbXNbTU1fQWN0aXZpdHlMb2c6OiRQQVJBTV9BRkZJTElBVEVfVFJBQ0tJTkdfRVZFTlRdID0gc2VsZjo6JEFGRklMSUFURV9FVkVOVF9DUkVBVEVfQUNDT1VOVDsJCgkJCQkJJGxvZ1BhcmFtc1tNTV9BY3Rpdml0eUxvZzo6JFBBUkFNX0FGRklMSUFURV9UUkFDS0lOR19VUkxdID0gJHJlc3VsdC0+Z2V0RGF0YSgidXJsIik7CgkJCQkJCQoJCQkJCWlmKCRhZmZpbGlhdGVQcm92aWRlci0+Z2V0VG9rZW4oKSAhPSBNTV9BZmZpbGlhdGVQcm92aWRlcjo6JERFRkFVTFRfVE9LRU4pCgkJCQkJewoJCQkJCQlNTV9BY3Rpdml0eUxvZzo6bG9nKCR1c2VyLCBNTV9BY3Rpdml0eUxvZzo6JEVWRU5UX1RZUEVfQUZGSUxJQVRFX1RSQUNLSU5HLCAkbG9nUGFyYW1zKTsKCQkJCQl9CgkJCQkJCgkJCQkJLy8gc2VuZCBhZmZpbGlhdGUgd2VsY29tZSBlbWFpbAoJCQkJCWlmKCRhZmZpbGlhdGVQcm92aWRlci0+Z2V0U2VuZEFmZmlsaWF0ZVdlbGNvbWVFbWFpbCgpID09ICIxIikKCQkJCQl7CgkJCQkJCSR3ZWxjb21lRW1haWxTdWJqZWN0ID0gJGFmZmlsaWF0ZVByb3ZpZGVyLT5nZXRBZmZpbGlhdGVXZWxjb21lRW1haWxTdWJqZWN0KCk7CgkJCQkJCSR3ZWxjb21lRW1haWxCb2R5ID0gJGFmZmlsaWF0ZVByb3ZpZGVyLT5nZXRBZmZpbGlhdGVXZWxjb21lRW1haWxCb2R5KCk7CgkJCQkJCQoJCQkJCQkvLyByZXBsYWNlIGFmZmlsaWF0ZSBTbWFydFRhZ3MgCgkJCQkJCSRhZmZpbGlhdGVEYXRhID0gJHJlc3VsdC0+Z2V0RGF0YSgiYWZmaWxpYXRlRGF0YSIpOwoJCQkJCQkKCQkJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpnZXREZWZhdWx0KCk7CgkJCQkJCSRjb250ZXh0ID0gbmV3IE1NX0NvbnRleHQoJHVzZXIsICRlbXBsb3llZSk7CgkJCQkJCQoJCQkJCQlpZigkYWZmaWxpYXRlRGF0YSBpbnN0YW5jZW9mIE1NX0FmZmlsaWF0ZVZPKQoJCQkJCQl7CgkJCQkJCQkkY29udGV4dC0+c2V0QWZmaWxpYXRlKCRhZmZpbGlhdGVEYXRhKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJCQkJJGVtYWlsLT5zZXRTdWJqZWN0KCR3ZWxjb21lRW1haWxTdWJqZWN0KTsKCQkJCQkJJGVtYWlsLT5zZXRCb2R5KCR3ZWxjb21lRW1haWxCb2R5KTsKCQkJCQkJCgkJCQkJCSRlbWFpbC0+c2V0VG9OYW1lKCR1c2VyLT5nZXRGdWxsTmFtZSgpKTsKCQkJCQkJJGVtYWlsLT5zZXRUb0FkZHJlc3MoJHVzZXItPmdldEVtYWlsKCkpOwoJCQkJCQkkZW1haWwtPnNldEZyb21OYW1lKCRlbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJCQkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCQkJJHJlc3BvbnNlID0gJGVtYWlsLT5zZW5kKCk7CgkJCQkJCQoJCQkJCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzcG9uc2UpKQoJCQkJCQl7CgkJCQkJCQkvLyBkbyBub3RoaW5nCgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0T3JkZXJOdW1iZXIoJG9yZGVyRGF0YSkKCXsKCQkkb3JkZXJOdW1iZXIgPSAkb3JkZXJEYXRhWyJvcmRlcl9udW1iZXIiXTsKCQkJCgkJaWYoIWVtcHR5KCRvcmRlckRhdGFbIm9yZGVyX3RyYW5zYWN0aW9uX2lkIl0pKQoJCXsKCQkJJG9yZGVyTnVtYmVyIC49ICIteyRvcmRlckRhdGFbIm9yZGVyX3RyYW5zYWN0aW9uX2lkIl19IjsKCQl9CgkJCgkJcmV0dXJuICRvcmRlck51bWJlcjsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRDb21taXNzaW9uUHJvZmlsZSgkb3JkZXJEYXRhKQoJewoJCSRjb21taXNzaW9uUHJvZmlsZSA9IG5ldyBNTV9Db21taXNzaW9uUHJvZmlsZSgpOwoJCQoJCWlmKGlzc2V0KCRvcmRlckRhdGFbIm9yZGVyX3Byb2R1Y3RzIl0pKQoJCXsKCQkJJHByb2R1Y3RzID0ganNvbl9kZWNvZGUoJG9yZGVyRGF0YVsib3JkZXJfcHJvZHVjdHMiXSk7CgkJCQkKCQkJZm9yZWFjaCgkcHJvZHVjdHMgYXMgJHByb2R1Y3QpCgkJCXsKCQkJCSRwID0gbmV3IE1NX1Byb2R1Y3QoJHByb2R1Y3QtPmlkKTsKCQkJCQoJCQkJaWYoJHAtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQlyZXR1cm4gJHAtPmdldENvbW1pc3Npb25Qcm9maWxlKCk7CgkJCQl9CgkJCX0KCQl9CgkJCgkJcmV0dXJuICRjb21taXNzaW9uUHJvZmlsZTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRQYXJ0bmVyUGF5b3V0cygkb3JkZXJEYXRhKQoJewoJCSRwYXJ0bmVycyA9IGFycmF5KCk7CgkJCgkJaWYoaXNzZXQoJG9yZGVyRGF0YVsib3JkZXJfcHJvZHVjdHMiXSkpCgkJewoJCQkkcHJvZHVjdHMgPSBqc29uX2RlY29kZSgkb3JkZXJEYXRhWyJvcmRlcl9wcm9kdWN0cyJdKTsKCQkKCQkJZm9yZWFjaCgkcHJvZHVjdHMgYXMgJGl0ZW0pCgkJCXsKCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJGl0ZW0tPmlkKTsKCQkJCQoJCQkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkcGFydG5lcnMgPSAkcHJvZHVjdC0+Z2V0UGFydG5lcnMoKTsKCQkJCQkKCQkJCQkvLyBvbmx5IHN1cHBvcnRzIG9uZSBwcm9kdWN0IHJpZ2h0IG5vdwoJCQkJCWJyZWFrOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiAkcGFydG5lcnM7Cgl9Cn0KCg==', 0, '2018-11-21 06:38:55'),
(218, 'corepagesview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0NvcmVQYWdlc1ZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsJCglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9DSEFOR0VfQ09SRVBBR0UgPSAiY2hhbmdlRGVmYXVsdFBhZ2UiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fR0VUX09QVElPTlNfQllfQ09SRVBBR0VfVFlQRSA9ICJnZXRPcHRpb25zQnlDb3JlUGFnZVR5cGUiOwoJCgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJIAoJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NIT1dfRElBTE9HOgoJCQkJcmV0dXJuICR0aGlzLT5jaGFuZ2VDb3JlUGFnZURpYWxvZygkcG9zdCk7CgkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NIQU5HRV9DT1JFUEFHRToKCQkJCXJldHVybiAkdGhpcy0+Y2hhbmdlRGVmYXVsdFBhZ2UoJHBvc3QpOwoJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9HRVRfT1BUSU9OU19CWV9DT1JFUEFHRV9UWVBFOgoJCQkJcmV0dXJuICR0aGlzLT5nZXRPcHRpb25zQnlDb3JlUGFnZVR5cGUoJHBvc3QpOwoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuICJNTV9Db3JlUGFnZXNWaWV3LnBlcmZvcm1BY3Rpb24oKTogYWN0aW9uICciLiRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0uIicgaXMgbm90IHN1cHBvcnRlZCI7CgkJfQoJfQogCQoJcHVibGljIGZ1bmN0aW9uIGNoYW5nZUNvcmVQYWdlRGlhbG9nKCRwb3N0KQoJewoJCSRyb3dzID0gTU1fQ29yZVBhZ2U6OmdldEF2YWlsYWJsZVdQUGFnZXMoKTsKCQkKCQkkb3B0aW9ucyA9ICBhcnJheSgpOwoJCWlmKGlzX2FycmF5KCRyb3dzKSkKCQl7CgkJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQkJewoJCQkJJG9wdGlvbnNbJHJvdy0+aWRdID0gJHJvdy0+cG9zdF90aXRsZTsKCQkJfQoJCX0KCQkJCgkJJGluZm8gPSBuZXcgc3RkQ2xhc3MoKTsKCQkkaW5mby0+b3B0aW9ucyA9IE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkb3B0aW9ucyk7CgkJJG1zZyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvY29yZV9wYWdlcy5jaGFuZ2UuZGlhbG9nLnBocCIsICRpbmZvKTsKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRtc2cpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY2hhbmdlRGVmYXVsdFBhZ2UoJHBvc3QpCgl7CgkJZ2xvYmFsICR3cGRiOyAKCQkKCQlpZighaXNzZXQoJHBvc3RbIm5ld19wYWdlX2lkIl0pIHx8ICFpc3NldCgkcG9zdFsicG9zdF9JRCJdKSkKCQkJcmV0dXJuIGFycmF5KCdlcnJvcic9PjEpOwoJCQoJCSRwYWdlID0gTU1fQ29yZVBhZ2U6OmdldENvcmVQYWdlKCRwb3N0WyJwb3N0X0lEIl0pOwoJCWlmKCEkcGFnZSkKCQkJcmV0dXJuIGFycmF5KCdlcnJvcic9PidDb3VsZCBub3QgZmluZCBjb3JlIHBhZ2UgdHlwZSBpZCBmb3IgZXhpc3RpbmcgcGFnZS4nKTsKCQkJCgkJJGNvcmVQYWdlRW5naW5lID0gbmV3IE1NX0NvcmVQYWdlRW5naW5lKCk7CQoJCSRjb3JlUGFnZUVuZ2luZS0+c2F2ZURlZmF1bHRQYWdlKCRwb3N0WyJuZXdfcGFnZV9pZCJdLCAkcGFnZS0+Y29yZV9wYWdlX3R5cGVfaWQsdHJ1ZSk7CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcGFnZS0+Y29yZV9wYWdlX3R5cGVfaWQpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2F2ZUNvcmVQYWdlKCRwb3N0KQoJewoJCWlmKCFpc3NldCgkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl0pIHx8ICFpc3NldCgkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bImNvcmVfcGFnZV90eXBlX2lkIl0pIHx8ICFpc3NldCgkX1BPU1RbInBvc3RfSUQiXSkgfHwgKGlzc2V0KCRfUE9TVFsicG9zdF9JRCJdKSAmJiBpbnR2YWwoJF9QT1NUWyJwb3N0X0lEIl0pPD0wKSkKCQl7CgkJCU1NX01lc3NhZ2VzOjphZGRFcnJvcigiVW5hYmxlIHRvIHNhdmUgTWVtYmVyTW91c2UgQ29yZSBQYWdlIE9wdGlvbnM6IE1pc3NpbmcgY29yZV9wYWdlX3R5cGVfaWQsIHBvc3RfaWQsIG9yIG5vbmNlIHdhcyBub3Qgc2V0IHByb3Blcmx5LiIpOwoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCSRjb3JlUGFnZVR5cGVJZCA9ICRfUE9TVFsic2F2ZS1tbS1jb3JlcGFnZXMiXVsiY29yZV9wYWdlX3R5cGVfaWQiXTsKCQkkcG9zdElkID0gJF9QT1NUWyJwb3N0X0lEIl07CgkJaWYoaXNzZXQoJF9QT1NUWyJzYXZlLW1tLWNvcmVwYWdlcyJdWyJjb25maXJtYXRpb25fdHlwZSJdKSAmJiBwcmVnX21hdGNoKCIvKGZyZWV8cGFpZCkvIiwkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bImNvbmZpcm1hdGlvbl90eXBlIl0pKQoJCXsKCQkJaWYoJF9QT1NUWyJzYXZlLW1tLWNvcmVwYWdlcyJdWyJjb25maXJtYXRpb25fdHlwZSJdID09ICJmcmVlIikKCQkJCSRjb3JlUGFnZVR5cGVJZD1NTV9Db3JlUGFnZVR5cGU6OiRGUkVFX0NPTkZJUk1BVElPTjsKCQl9CgkJCgkJJGNvcmVQYWdlRW5naW5lID0gbmV3IE1NX0NvcmVQYWdlRW5naW5lKCk7CQoJCSRjb250ZW50ID0kX1BPU1RbInBvc3RfY29udGVudCJdOwoJCQoJCS8vLyBob3VzZSBrZWVwaW5nIGlmIHBlcm1pc3Npb25zIHdlcmUgc2V0LgoJCSRwcm90ZWN0ZWRfY29udGVudCA9IG5ldyBNTV9Qcm90ZWN0ZWRDb250ZW50RW5naW5lKCk7CgkJJHByb3RlY3RlZF9jb250ZW50LT5yZW1vdmVBbGxSaWdodHMoJHBvc3RJZCk7CgkJCgkJLy8gbGV0cyB3aXBlIGFsbCBjb3JlIHBhZ2UgYXNzb2NpYXRpb25zIHRvbwoJCWlmKCRjb3JlUGFnZUVuZ2luZS0+aGFzUmVmZXJlbmNlcygkcG9zdElkKSAmJiBpbnR2YWwoJGNvcmVQYWdlVHlwZUlkKT49MCkKCQl7CgkJCSRjb3JlUGFnZUVuZ2luZS0+cmVtb3ZlQWxsUmVmZXJlbmNlcygkcG9zdElkKTsKCQl9CgkJCgkJLy8vIHNlbGVjdGVkIGEgcmVmZXJlbmNlIHR5cGUKCQlpZihpc3NldCgkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bInJlZl9pZCJdKSkKCQl7CgkJCWlmKGlzX2FycmF5KCRfUE9TVFsic2F2ZS1tbS1jb3JlcGFnZXMiXVsicmVmX2lkIl0pIHx8ICRfUE9TVFsic2F2ZS1tbS1jb3JlcGFnZXMiXVsicmVmX2lkIl0+PTApCgkJCXsKCQkJCSRyZWZJZHMgPSAkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bInJlZl9pZCJdOwoJCQkJJHJlZlR5cGUgPSAkX1BPU1RbInNhdmUtbW0tY29yZXBhZ2VzIl1bInJlZl90eXBlIl07CgkJCQkKCQkJCXJldHVybiAkY29yZVBhZ2VFbmdpbmUtPnNhdmVTcGVjaWZpY1BhZ2UoJHBvc3RJZCwgJGNvcmVQYWdlVHlwZUlkLCAkcmVmSWRzLCAkcmVmVHlwZSk7CgkJCX0KCQl9CgkJCgkJLy8gbm8gcmVmZXJlbmNlIHR5cGVzIHNlbGVjdGVkLCB0cnlpbmcgdG8gYmUgZGVmYXVsdCBwYWdlPwoJCXJldHVybiAkY29yZVBhZ2VFbmdpbmUtPnNhdmVEZWZhdWx0UGFnZSgkcG9zdElkLCAkY29yZVBhZ2VUeXBlSWQpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0T3B0aW9uc0J5Q29yZVBhZ2VUeXBlKCRwb3N0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQlpZihpc3NldCgkcG9zdFsiY29yZV9wYWdlX3R5cGVfaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJjb3JlX3BhZ2VfdHlwZV9pZCJdKT4wKQoJCXsKCQkJJHJvdyA9IE1NX0NvcmVQYWdlOjpnZXREZWZhdWx0Q29yZVBhZ2VCeVR5cGUoJHBvc3RbImNvcmVfcGFnZV90eXBlX2lkIl0pOwoJCQlpZighJHJvdykKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgYW55IGNvcmUgcGFnZSBpbmZvcm1hdGlvbi4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQlyZXR1cm4gY2FsbF91c2VyX2Z1bmNfYXJyYXkoYXJyYXkoJHRoaXMsICR0aGlzLT5nZXRBamF4TWV0aG9kKCRwb3N0WyJjb3JlX3BhZ2VfdHlwZV9pZCJdKSksIGFycmF5KCRwb3N0KSk7CQoJCX0KCQlpZihpc3NldCgkcG9zdFsiY29yZV9wYWdlX3R5cGVfaWQiXSkgJiYgZW1wdHkoJHBvc3RbImNvcmVfcGFnZV90eXBlX2lkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGZpbmQgQ29yZSBQYWdlIElELiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZmluZCBhbnkgY29yZSBwYWdlIHN1YiB0eXBlcy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEFqYXhNZXRob2QoJGNvcmVQYWdlVHlwZUlkKQoJewoJCXN3aXRjaCgkY29yZVBhZ2VUeXBlSWQpCgkJewoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JExPR0lOX1BBR0U6CgkJCWNhc2UgTU1fQ29yZVBhZ2VUeXBlOjokRk9SR09UX1BBU1NXT1JEOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JFJFU0VUX1BBU1NXT1JEOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JENIRUNLT1VUOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JFJFREVFTV9HSUZUOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JE1ZX0FDQ09VTlQ6CgkJCQlyZXR1cm4gIm5vUmVmZXJlbmNlVHlwZXMiOwoJCQkKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRQQUlEX0NPTkZJUk1BVElPTjoKCQkJY2FzZSBNTV9Db3JlUGFnZVR5cGU6OiRGUkVFX0NPTkZJUk1BVElPTjoKCQkJCXJldHVybiAiZ2V0UHJvZHVjdERpYWxvZyI7CgkJCQoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JFNBVkVUSEVTQUxFOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JExPR09VVF9QQUdFOgoJCQljYXNlIE1NX0NvcmVQYWdlVHlwZTo6JE1FTUJFUl9IT01FX1BBR0U6CgkJCQlyZXR1cm4gImdldE1lbWJlcnNoaXBMZXZlbERpYWxvZyI7CgkJfQoJfQoJCgkvKgoJICogUGFzc3RocnUgbWV0aG9kIHRvIGVsaW1pbmF0ZSBQSFAgc3RyaWN0IHN0YW5kYXJkcyB3YXJuaW5ncyBwcmlvciB0byBjbGFzcyByZWZhY3RvcmluZwoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgkdGFibGVOYW1lPSIiLCRmaWVsZHM9bnVsbCxNTV9EYXRhR3JpZCAkZGc9bnVsbCwgJHdoZXJlPSIiLCRnZXRUb3RhbD1mYWxzZSkKCXsKCQlyZXR1cm4gJHRoaXMtPmdldFZpZXdEYXRhKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAic2VsZWN0IGlkLCBwb3N0X3RpdGxlIGZyb20geyR3cGRiLT5wb3N0c30gcCB3aGVyZSBwLnBvc3RfdHlwZT0ncGFnZScgYW5kIHAucG9zdF9zdGF0dXMgSU4gKCdwdWJsaXNoJywnZHJhZnQnKSBhbmQgcC5pZCBOT1QgSU4gKHNlbGVjdCBwYWdlX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgYyB3aGVyZSBwYWdlX2lkIElTIE5PVCBOVUxMKSI7CgkKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQkkb3B0aW9ucyA9ICBhcnJheSgpOwoJCWlmKGlzX2FycmF5KCRyb3dzKSkKCQl7CgkJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQkJewoJCQkJJG9wdGlvbnNbJHJvdy0+aWRdID0gJHJvdy0+cG9zdF90aXRsZTsKCQkJfQoJCX0KCQlyZXR1cm4gJG9wdGlvbnM7CQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIG5vUmVmZXJlbmNlVHlwZXMoKQoJewoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoKCSAqIEdlbmVyYXRlcyBhIGRpYWxvZyBmb3IgbWVtYmVyc2hpcCBsZXZlbCBkcml2ZW4gY29yZSBwYWdlIHNlbGVjdGlvbnMKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRNZW1iZXJzaGlwTGV2ZWxEaWFsb2coJHBvc3QpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vL2luaXRpYWxpemUKCQkkbXRzID0gYXJyYXkoKTsKCgkJJG1lbWJlcl9vYmogPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCk7CgkJJHJvd3MgPSAkbWVtYmVyX29iai0+Z2V0QXZhaWxhYmxlTWVtYmVyc2hpcExldmVscygkcG9zdFsiY29yZV9wYWdlX3R5cGVfaWQiXSwgJHBvc3RbInBvc3RfSUQiXSk7CgkJaWYoISRyb3dzKQoJCXsKCQkJLy8vIGlmIG5vIHJlc3VsdHMsIHJldHVybiBub3RoaW5nLgoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgZmluZCBhbnkgbWVtYmVyc2hpcCBsZXZlbHMgYXZhaWxhYmxlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkaW5mbyA9IE1NX0NvcmVQYWdlOjpnZXRDb3JlUGFnZUluZm8oJHBvc3RbInBvc3RfSUQiXSk7CgkJJHNob3VsZFByZVNlbGVjdCA9IGZhbHNlOwoJCWlmKGlzc2V0KCRpbmZvLT5jb3JlX3BhZ2VfdHlwZV9pZCkgJiYgJGluZm8tPmNvcmVfcGFnZV90eXBlX2lkID09ICRwb3N0WyJjb3JlX3BhZ2VfdHlwZV9pZCJdKQoJCXsKCQkJJHNob3VsZFByZVNlbGVjdCA9IHRydWU7CgkJfQoJCSRzZWxfaWQgPSAwOwoJCWlmKCRzaG91bGRQcmVTZWxlY3QpCgkJCSRzZWxfaWQgPSAkdGhpcy0+Z2V0UHJldmlvdXNTZWxlY3Rpb25zKCRwb3N0WyJwb3N0X0lEIl0pOyAKCQkKCQkvLy8gc2V0IHRoZW0gdXAgZm9yIFV0aWxpdHkgb3B0aW9uCgkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQkkbXRzWyRyb3ctPmlkXSA9ICRyb3ctPm5hbWU7IAoJCQkKCQkvLy9jcmVhdGUgc2VsZWN0IGJveAoJCWlmKCEkaW5mbykKCQl7CgkJCSRpbmZvID0gbmV3IHN0ZENsYXNzKCk7CgkJfQoJCSRpbmZvLT5vcHRpb25zID0gTU1fSHRtbFV0aWxzOjpjcmVhdGVDaGVja2JveEdyb3VwKCRtdHMsICJzYXZlLW1tLWNvcmVwYWdlc1tyZWZfaWRdW10iLCAkc2VsX2lkLCAidXNlciIpOwoJCSRpbmZvLT5yZWZfdHlwZSA9ICJtZW1iZXJfdHlwZSI7CgkJJGNvbnRlbnQgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iL2NvcmVfcGFnZXMudHlwZXMucGhwIiwgJGluZm8pOwoJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShhcnJheSgnY29udGVudCc9PiRjb250ZW50KSk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0UHJldmlvdXNTZWxlY3Rpb25zKCRwYWdlX2lkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc2VsX2lkID0gYXJyYXkoKTsKCQkkY3VycmVudF9wb3N0cyA9IE1NX0NvcmVQYWdlOjpnZXRBc3NvY2lhdGVkV1BDb3JlUGFnZXMoJHBhZ2VfaWQpOwoJCQoJCWlmKGlzX2FycmF5KCRjdXJyZW50X3Bvc3RzKSkKCQl7CgkJCWZvcmVhY2goJGN1cnJlbnRfcG9zdHMgYXMgJGN1cnJlbnRfcG9zdCkKCQkJewoJCQkJaWYoaXNzZXQoJGN1cnJlbnRfcG9zdC0+cmVmX2lkKSAmJiBpbnR2YWwoJGN1cnJlbnRfcG9zdC0+cmVmX2lkKT4wKQoJCQkJCSRzZWxfaWRbJGN1cnJlbnRfcG9zdC0+cmVmX2lkXSA9ICRjdXJyZW50X3Bvc3QtPnJlZl9pZDsJCgkJCX0KCQl9CgkJcmV0dXJuICRzZWxfaWQ7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0UHJvZHVjdERpYWxvZygkcG9zdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy8vIGdldCBtZW1iZXIgdHlwZXMgZm9yIHNlbGVjdGlvbgoJCSRwcm9kdWN0cyA9IG5ldyBNTV9Qcm9kdWN0KCk7CgkJJHJvd3MgPSAkcHJvZHVjdHMtPmdldFByb2R1Y3RzQW5kQXNzb2NpYXRpb25zKCRwb3N0WyJjb3JlX3BhZ2VfdHlwZV9pZCJdLCAkcG9zdFsicG9zdF9JRCJdKTsKCQlpZighJHJvd3MpCgkJewoJCQkvLy8gaWYgbm8gcmVzdWx0cywgcmV0dXJuIG5vdGhpbmcuCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvdWxkIG5vdCBmaW5kIGFueSBwcm9kdWN0cyBhdmFpbGFibGUuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCSRzZWxfaWQgPSBhcnJheSgpOwoJCQoJCSRjdXJyZW50X3Bvc3RzID0gbnVsbDsKCQkkc2hvdWxkUHJlU2VsZWN0ID0gZmFsc2U7CgkJCgkJLy8gbGV0cyBzZWUgaWYgdGhpcyBtYXRjaGVzIHdoYXQgd2UgaGF2ZSBzYXZlZCBhbmQgaWYgc28gd2Ugd2lsbCBwcmVzZWxlY3QsIG90aGVyd2lzZSBlbXB0eS4KCQkkaW5mbyA9IE1NX0NvcmVQYWdlOjpnZXRDb3JlUGFnZUluZm8oJHBvc3RbInBvc3RfSUQiXSk7CgkJaWYoaXNzZXQoJGluZm8tPmNvcmVfcGFnZV90eXBlX2lkKSAmJiAoJGluZm8tPmNvcmVfcGFnZV90eXBlX2lkID09ICRwb3N0WyJjb3JlX3BhZ2VfdHlwZV9pZCJdIHx8CgkJCQkJICgkaW5mby0+Y29yZV9wYWdlX3R5cGVfaWQ9PU1NX0NvcmVQYWdlVHlwZTo6JEZSRUVfQ09ORklSTUFUSU9OICYmICRwb3N0WyJjb3JlX3BhZ2VfdHlwZV9pZCJdPT1NTV9Db3JlUGFnZVR5cGU6OiRQQUlEX0NPTkZJUk1BVElPTikgfHwKCQkJCQkgKCRpbmZvLT5jb3JlX3BhZ2VfdHlwZV9pZD09TU1fQ29yZVBhZ2VUeXBlOjokUEFJRF9DT05GSVJNQVRJT04gJiYgJHBvc3RbImNvcmVfcGFnZV90eXBlX2lkIl09PU1NX0NvcmVQYWdlVHlwZTo6JEZSRUVfQ09ORklSTUFUSU9OKQoJCSkpCgkJewoJCQkkc2hvdWxkUHJlU2VsZWN0ID0gdHJ1ZTsKCQl9CgkJCgkJLy8vQ2hlY2sgZm9yIGEgc3BlY2lmaWMgcGFnZSBhbHJlYWR5IGNob3NlbiBmb3IgdGhpcyBJRAoJCWlmKCRzaG91bGRQcmVTZWxlY3QpCgkJewoJCQkkY3VycmVudF9wb3N0cyA9IE1NX0NvcmVQYWdlOjpnZXRBc3NvY2lhdGVkV1BDb3JlUGFnZXMoJHBvc3RbInBvc3RfSUQiXSk7CgkJCWlmKGlzX2FycmF5KCRjdXJyZW50X3Bvc3RzKSkKCQkJewoJCQkJZm9yZWFjaCgkY3VycmVudF9wb3N0cyBhcyAkY3VycmVudF9wb3N0KQoJCQkJewoJCQkJCWlmKGlzc2V0KCRjdXJyZW50X3Bvc3QtPnJlZl9pZCkgJiYgaW50dmFsKCRjdXJyZW50X3Bvc3QtPnJlZl9pZCk+MCkKCQkJCQl7IAoJCQkJCQkkc2VsX2lkWyRjdXJyZW50X3Bvc3QtPnJlZl9pZF0gPSAkY3VycmVudF9wb3N0LT5yZWZfaWQ7CgkJCQkJCSRzZWxfaWRbJGN1cnJlbnRfcG9zdC0+cmVmX2lkLiItIi4kY3VycmVudF9wb3N0LT5yZWZfdHlwZV0gPSAkY3VycmVudF9wb3N0LT5yZWZfaWQ7CgkJCQkJfQkKCQkJCX0KCQkJfQoJCX0KCQkKCQkkcHJvZHMgPSBhcnJheSgpOwoJCSRpc19mcmVlID0gKCRwb3N0WyJpc19mcmVlIl09PSJwYWlkIik/IjAiOiIxIjsKCQkKCQkkd2lkdGggPSAzMDsKCQkvLy8gc2V0IHRoZW0gdXAgZm9yIFV0aWxpdHkgb3B0aW9uCgkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCXsgCgkJCSRvYmogPSBuZXcgc3RkQ2xhc3MoKTsKCQkJaWYoJGlzX2ZyZWUgPT0gJHJvdy0+aXNfZnJlZSkKCQkJewoJCQkJaWYoZW1wdHkoJHJvdy0+cHJvZHVjdF9uYW1lKSl7CgkJCQkJY29udGludWU7CgkJCQl9CgkJCQkKCQkJCSR0eXBlU3RyID0gIiI7CgkJCQlpZigkcm93LT5yZWZfdHlwZT09Im1lbWJlcl90eXBlIil7CgkJCQkJJHRtcE1lbWJlclR5cGUgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCRyb3ctPnR5cGVfaWQpOwoJCQkJCWlmKCR0bXBNZW1iZXJUeXBlLT5pc1ZhbGlkKCkpewoJCQkJCQkkdHlwZVN0ciA9ICR0bXBNZW1iZXJUeXBlLT5nZXROYW1lKCkuIiAoIjsgCgkJCQkJfQoJCQkJfQoJCQkJZWxzZSBpZigkcm93LT5yZWZfdHlwZT09ImFjY2Vzc190YWciKXsKCQkJCQkkdG1wQWNjZXNzVGFnID0gbmV3IE1NX0J1bmRsZSgkcm93LT50eXBlX2lkKTsKCQkJCQlpZigkdG1wQWNjZXNzVGFnLT5pc1ZhbGlkKCkpewoJCQkJCQkkdHlwZVN0ciA9ICR0bXBBY2Nlc3NUYWctPmdldE5hbWUoKS4iICgiOyAKCQkJCQl9CgkJCQl9CgkJCQkkZW5kID0gKCghZW1wdHkoJHR5cGVTdHIpKT8iKSI6IiIpOwoJCQkJJGNhbXBhaWduTmFtZSA9ICghZW1wdHkoJHJvdy0+Y2FtcGFpZ25fbmFtZSkpPyIsICIuJHJvdy0+Y2FtcGFpZ25fbmFtZToiIjsKCQkJCSRvYmotPnZhbHVlID0gKChib29sKSRyb3ctPmlzX2ZyZWUpPyRyb3ctPnR5cGVfbmFtZTokdHlwZVN0ci4kcm93LT5wcm9kdWN0X25hbWUuJGNhbXBhaWduTmFtZS4iIi4kZW5kOwoJCQkJJG9iai0+YWx0ID0gJG9iai0+dmFsdWU7CgkJCQkkb2JqLT5pbWFnZSA9ICgkcm93LT5yZWZfdHlwZT09Im1lbWJlcl90eXBlIik/J3VzZXInOidwYWNrYWdlJzsKCQkJCSRpZCA9IChpbnR2YWwoJHJvdy0+cHJvZHVjdF9pZCk+MCk/JHJvdy0+cHJvZHVjdF9pZDokcm93LT50eXBlX2lkOwoJCQkJCgkJCQlpZigoYm9vbCkkcm93LT5pc19mcmVlKQoJCQkJCSRwcm9kc1skaWQuIi0iLiRyb3ctPnJlZl90eXBlXSA9ICRvYmo7CgkJCQllbHNlCgkJCQkJJHByb2RzWyRpZF0gPSAkb2JqOwkKCQkJfQoJCQllbHNlIGlmKCgkaXNfZnJlZT09IjEiIHx8ICRpc19mcmVlPT09IiIpICAmJiAkcm93LT5pc19mcmVlID09ICIxIikKCQkJewoJCQkJJGNhbXBhaWduTmFtZSA9ICghZW1wdHkoJHJvdy0+Y2FtcGFpZ25fbmFtZSkpPyIsICIuJHJvdy0+Y2FtcGFpZ25fbmFtZToiIjsKCQkJCSRvYmotPnZhbHVlID0gKChib29sKSRyb3ctPmlzX2ZyZWUpPyRyb3ctPnR5cGVfbmFtZTokdHlwZVN0ci4kcm93LT5wcm9kdWN0X25hbWUuJGNhbXBhaWduTmFtZS4iIi4kZW5kOwoJCQkJJG9iai0+YWx0ID0gJG9iai0+dmFsdWU7CgkJCQkkb2JqLT5pbWFnZSA9ICgkcm93LT5yZWZfdHlwZT09Im1lbWJlcl90eXBlIik/J3VzZXInOid0YWcnOwoJCQkJJGlkID0gKGludHZhbCgkcm93LT5wcm9kdWN0X2lkKT4wKT8kcm93LT5wcm9kdWN0X2lkOiRyb3ctPnR5cGVfaWQ7CgkJCQkKCQkJCWlmKChib29sKSRyb3ctPmlzX2ZyZWUpCgkJCQkJJHByb2RzWyRpZC4iLSIuJHJvdy0+cmVmX3R5cGVdID0gJG9iajsKCQkJCWVsc2UKCQkJCQkkcHJvZHNbJGlkXSA9ICRvYmo7CgkJCX0KCQl9CgoJCS8vL2NyZWF0ZSBzZWxlY3QgYm94CgkJJGluZm8gPSBuZXcgc3RkQ2xhc3MoKTsJCQoJCSRpbmZvLT5vcHRpb25zID0gTU1fSHRtbFV0aWxzOjpjcmVhdGVDaGVja2JveEdyb3VwKCRwcm9kcywgInNhdmUtbW0tY29yZXBhZ2VzW3JlZl9pZF1bXSIsICRzZWxfaWQsICIiLCBudWxsLCAiIiwgJHdpZHRoKTsKCQkkaW5mby0+cmVmX3R5cGUgPSAicHJvZHVjdCI7CgkJJGluZm8tPmlzX2ZyZWUgPSAkaXNfZnJlZTsKCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKGFycmF5KCdjb250ZW50Jz0+TU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9jb3JlX3BhZ2VzLnByb2R1Y3RzLnBocCIsICRpbmZvKSkpOwoJfQoJCn0K', 0, '2018-11-21 06:38:55'),
(219, 'reportingview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhpcyBjbGFzcyByZXNwb25kcyB0byBhbGwgb2YgdGhlIGFqYXggY2FsbHMgZnJvbSAKICogCiAqLwpjbGFzcyBNTV9SZXBvcnRpbmdWaWV3IGV4dGVuZHMgTU1fUkJBQ0FuYWx5c3RWaWV3CnsKCQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fUE9MTF9SRVBPUlRfREFUQSA9ICJwb2xsUmVwb3J0RGF0YSI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9DSEFOR0VfVklTVUFMX0VMRU1FTlRfRElSRUNUSVZFID0gImNoYW5nZVZpc3VhbEVsZW1lbnREaXJlY3RpdmUiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0xFQVJfREFUQV9DQUNIRSA9ICJjbGVhckRhdGFDYWNoZSI7CiAJCgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJb2Jfc3RhcnQoKTsKCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJewoJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9QT0xMX1JFUE9SVF9EQVRBOgoJCQkJJHJlc3BvbnNlID0gJHRoaXMtPnBvbGxSZXBvcnREYXRhKCRwb3N0KTsKCQkJCWJyZWFrOwoJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9DTEVBUl9EQVRBX0NBQ0hFOgoJCQkJJHJlc3BvbnNlID0gJHRoaXMtPmNsZWFyRGF0YUNhY2hlKCRwb3N0KTsKCQkJCWJyZWFrOwoJCQlkZWZhdWx0OgoJCQkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkJCSRyZXNwb25zZSA9ICgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXBvcnRSZXNwb25zZSk/JHJlc3BvbnNlOihuZXcgTU1fUmVwb3J0UmVzcG9uc2UoKSk7CgkJCQlicmVhazsKCQl9CgkJaWYgKCFlbXB0eSgkcG9zdFsnZWxlbWVudE5hbWUnXSkpCgkJewoJCQkkcmVzcG9uc2UtPmFkZERhdGEoImVsZW1lbnROYW1lIiwkcG9zdFsnZWxlbWVudE5hbWUnXSk7CgkJfQoJCW9iX2VuZF9jbGVhbigpOwoJCXJldHVybiAkcmVzcG9uc2U7Cgl9CgoJCglwdWJsaWMgZnVuY3Rpb24gcG9sbFJlcG9ydERhdGEoJHBvc3QpIAoJewoJCSR2YWxpZGF0ZVJlc3BvbnNlID0gJHRoaXMtPnZhbGlkYXRlUmVwb3J0QW5kRWxlbWVudHMoJHBvc3QpOwoJCWlmICghTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkdmFsaWRhdGVSZXNwb25zZSkpCgkJewoJCQlyZXR1cm4gJHZhbGlkYXRlUmVzcG9uc2U7CgkJfQoJCSRyZXBvcnQgPSAkdmFsaWRhdGVSZXNwb25zZS0+bWVzc2FnZTsKCQkkZWxlbWVudHMgPSAkcG9zdFsnZWxlbWVudHMnXTsKCQkkcmV0dXJuRWxlbWVudHMgPSBhcnJheSgpOwoJCSRyZXNwb25zZSA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCWZvcmVhY2ggKCRlbGVtZW50cyBhcyAkZWxlbWVudCkKCQl7CgkJCSRlbGVtZW50V2lkdGggID0gKCFlbXB0eSgkZWxlbWVudFsnZWxlbWVudFdpZHRoJ10pKT8kZWxlbWVudFsnZWxlbWVudFdpZHRoJ106IiI7CgkJCSRlbGVtZW50SGVpZ2h0ID0gKCFlbXB0eSgkZWxlbWVudFsnZWxlbWVudEhlaWdodCddKSk/JGVsZW1lbnRbJ2VsZW1lbnRIZWlnaHQnXToiIjsKCQkJJHBhcmFtcyAgICAgICAgPSAoIWVtcHR5KCRlbGVtZW50WydwYXJhbXMnXSkpPyRlbGVtZW50WydwYXJhbXMnXTphcnJheSgpOwoJCQkkZGlyZWN0aXZlcyAgICA9ICghZW1wdHkoJGVsZW1lbnRbJ2RpcmVjdGl2ZXMnXSkpPyRlbGVtZW50WydkaXJlY3RpdmVzJ106YXJyYXkoKTsKCQkJJHJldHVybkVsZW1lbnRzWyRlbGVtZW50WydpZCddXSA9ICRyZXBvcnQtPnJlbmRlclZpc3VhbEVsZW1lbnQoJGVsZW1lbnRbJ2lkJ10sJHBhcmFtcywkZWxlbWVudFdpZHRoLCRlbGVtZW50SGVpZ2h0LCRkaXJlY3RpdmVzKTsKCQl9CgkJJHJlc3BvbnNlLT5hZGREYXRhKCJlbGVtZW50cyIsJHJldHVybkVsZW1lbnRzKTsKCQlyZXR1cm4gJHJlc3BvbnNlOwoJfQoJCgkKCS8qKgoJICogVmVyaWZpZXMgdGhhdCB0aGUgYWpheCBwb3N0IGRhdGEgY29udGFpbmVkIGluICRwb3N0IGNvbnRhaW5zIHRoZSBuYW1lIG9mIGEgdmFsaWQgcmVwb3J0LCBhbmQgcmVmZXJlbmNlcyBhIHZpc3VhbCBlbGVtZW50CgkgKiBBbiBpbnN0YW5jZSBvZiB0aGUgcmVwb3J0IG5lZWRzIHRvIGJlIGNyZWF0ZWQgdG8gdmFsaWRhdGUgaXQsIGFuZCBhcyBhbiBvcHRpbWl6YXRpb24sIGEgcmVmZXJlbmNlIHRvIHRoaXMgaW5zdGFuY2UgaXMKCSAqIHJldHVybmVkIGluIHRoZSByZXNwb25zZSBvbiBzdWNjZXNzCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcG9zdCBUaGUgUE9TVGVkIGRhdGEKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgU3VjY2VzcyBpZiB0aGVyZSBpcyBhIHZhbGlkIHJlcG9ydCBhbmQgZWxlbWVudCByZWZlcmVuY2VkIGluICRwb3N0LCBlcnJvciBvdGhlcndpc2UKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHZhbGlkYXRlUmVwb3J0QW5kRWxlbWVudHMoJHBvc3QpCgl7CgkJaWYgKGVtcHR5KCRwb3N0WydyZXBvcnROYW1lJ10pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3I6IHJlcG9ydCBuYW1lIG5vdCBzcGVjaWZpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoY2xhc3NfZXhpc3RzKCRwb3N0WydyZXBvcnROYW1lJ10pKQoJCXsKCQkJJHRtcCA9IG5ldyAkcG9zdFsncmVwb3J0TmFtZSddKCk7CgkJfQoJCWVsc2UKCQl7CgkJCSR0bXAgPSAiIjsKCQl9CgkJCgkJaWYgKCEkdG1wIGluc3RhbmNlb2YgTU1fUmVwb3J0QmFzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yOiB0aGUgcmVwb3J0IHNwZWNpZmllZCBpcyBub3QgYSB2YWxpZCByZXBvcnQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoZW1wdHkoJHBvc3RbJ2VsZW1lbnRzJ10pIHx8ICFpc19hcnJheSgkcG9zdFsnZWxlbWVudHMnXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvcjogdmlzdWFsIGVsZW1lbnRzIG5vdCBzcGVjaWZpZWQiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkdG1wKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gY2xlYXJEYXRhQ2FjaGUoJHBvc3QpCgl7CgkJTU1fUmVwb3J0RGF0YVJldHJpZXZlcjo6Y2xlYXJEYXRhQ2FjaGUoKTsKCQlyZXR1cm4gbmV3IE1NX1JlcG9ydFJlc3BvbnNlKCk7Cgl9CgkKfQo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(220, 'aweberentry', 'Y2xhc3MgTU1fQVdlYmVyRW50cnkgZXh0ZW5kcyBNTV9BV2ViZXJSZXNwb25zZSB7CgogICAgLyoqCiAgICAgKiBAdmFyIGFycmF5IEhvbGRzIGxpc3Qgb2YgZGF0YSBrZXlzIHRoYXQgYXJlIG5vdCBwdWJsaWNseSBhY2Nlc3NpYmxlCiAgICAgKi8KICAgIHByb3RlY3RlZCAkX3ByaXZhdGVEYXRhID0gYXJyYXkoCiAgICAgICAgJ3Jlc291cmNlX3R5cGVfbGluaycsCiAgICAgICAgJ2h0dHBfZXRhZycsCiAgICApOwoKICAgIC8qKgogICAgICogQHZhciBhcnJheSAgIFN0b3JlcyBsb2NhbCBtb2RpZmljYXRpb25zIHRoYXQgaGF2ZSBub3QgYmVlbiBzYXZlZAogICAgICovCiAgICBwcm90ZWN0ZWQgJF9sb2NhbERpZmYgPSBhcnJheSgpOwoKICAgIC8qKgogICAgICogQHZhciBhcnJheSBIb2xkcyBNTV9BV2ViZXJDb2xsZWN0aW9uIG9iamVjdHMgYWxyZWFkeSBpbnN0YW50aWF0ZWQsIGtleWVkIGJ5CiAgICAgKiAgICAgIHRoZWlyIHJlc291cmNlIG5hbWUgKHBsdXJhbCkKICAgICAqLwogICAgcHJvdGVjdGVkICRfY29sbGVjdGlvbnMgPSBhcnJheSgpOwoKICAgIC8qKgogICAgICogYXR0cnMKICAgICAqCiAgICAgKiBQcm92aWRlcyBhIHNpbXBsZSBhcnJheSBvZiBhbGwgdGhlIGF2YWlsYWJsZSBkYXRhIChhbmQgY29sbGVjdGlvbnMpIGF2YWlsYWJsZQogICAgICogaW4gdGhpcyBlbnRyeS4KICAgICAqCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiBhcnJheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gYXR0cnMoKSB7CiAgICAgICAgJGF0dHJzID0gYXJyYXkoKTsKICAgICAgICBmb3JlYWNoICgkdGhpcy0+ZGF0YSBhcyAka2V5ID0+ICR2YWx1ZSkgewogICAgICAgICAgICBpZiAoIWluX2FycmF5KCRrZXksICR0aGlzLT5fcHJpdmF0ZURhdGEpICYmICFzdHJwb3MoJGtleSwgJ2NvbGxlY3Rpb25fbGluaycpKSB7CiAgICAgICAgICAgICAgICAkYXR0cnNbJGtleV0gPSAkdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFlbXB0eShNTV9BV2ViZXJBUEk6OiRfY29sbGVjdGlvbk1hcFskdGhpcy0+dHlwZV0pKSB7CiAgICAgICAgICAgIGZvcmVhY2ggKE1NX0FXZWJlckFQSTo6JF9jb2xsZWN0aW9uTWFwWyR0aGlzLT50eXBlXSBhcyAkY2hpbGQpIHsKICAgICAgICAgICAgICAgICRhdHRyc1skY2hpbGRdID0gJ2NvbGxlY3Rpb24nOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAkYXR0cnM7CiAgICB9CgogICAgLyoqCiAgICAgKiBfdHlwZSAKICAgICAqCiAgICAgKiBVc2VkIHRvIHB1bGwgdGhlIG5hbWUgb2YgdGhpcyByZXNvdXJjZSBmcm9tIGl0cyByZXNvdXJjZV90eXBlX2xpbmsgCiAgICAgKiBAYWNjZXNzIHByb3RlY3RlZAogICAgICogQHJldHVybiBTdHJpbmcKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF90eXBlKCkgewogICAgICAgIGlmIChlbXB0eSgkdGhpcy0+dHlwZSkpIHsKICAgICAgICAgICAgJHR5cGVMaW5rID0gJHRoaXMtPmRhdGFbJ3Jlc291cmNlX3R5cGVfbGluayddOwogICAgICAgICAgICBpZiAoZW1wdHkoJHR5cGVMaW5rKSkgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIGxpc3QoJHVybCwgJHR5cGUpID0gZXhwbG9kZSgnIycsICR0eXBlTGluayk7CiAgICAgICAgICAgICR0aGlzLT50eXBlID0gJHR5cGU7CiAgICAgICAgfQogICAgICAgIHJldHVybiAkdGhpcy0+dHlwZTsKICAgIH0KCiAgICAvKioKICAgICAqIGRlbGV0ZQogICAgICoKICAgICAqIERlbGV0ZSB0aGlzIG9iamVjdCBmcm9tIHRoZSBBV2ViZXIgc3lzdGVtLiAgTWF5IG5vdCBiZSBzdXBwb3J0ZWQKICAgICAqIGJ5IGFsbCBlbnRyeSB0eXBlcy4KICAgICAqIEBhY2Nlc3MgcHVibGljCiAgICAgKiBAcmV0dXJuIGJvb2xlYW4gIFJldHVybnMgdHJ1ZSBpZiBpdCBpcyBzdWNjZXNzZnVsbHkgZGVsZXRlZCwgZmFsc2UKICAgICAqICAgICAgaWYgdGhlIGRlbGV0ZSByZXF1ZXN0IGZhaWxlZC4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgpIHsKICAgICAgICAkdGhpcy0+YWRhcHRlci0+cmVxdWVzdCgnREVMRVRFJywgJHRoaXMtPnVybCwgYXJyYXkoKSwgYXJyYXkoJ3JldHVybicgPT4gJ3N0YXR1cycpKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICAvKioKICAgICAqIG1vdmUKICAgICAqCiAgICAgKiBJbnZva2UgdGhlIEFQSSBtZXRob2QgdG8gTU9WRSBhbiBlbnRyeSByZXNvdXJjZSB0byBhIGRpZmZlcmVudCBMaXN0LgogICAgICoKICAgICAqIE5vdGU6IE5vdCBhbGwgZW50cnkgcmVzb3VyY2VzIGFyZSBlbGlnaWJsZSB0byBiZSBtb3ZlZCwgcGxlYXNlCiAgICAgKiAgICAgICByZWZlciB0byB0aGUgQVdlYmVyIEFQSSBSZWZlcmVuY2UgRG9jdW1lbnRhdGlvbiBhdAogICAgICogICAgICAgaHR0cHM6Ly9sYWJzLmF3ZWJlci5jb20vZG9jcy9yZWZlcmVuY2UvMS4wIGZvciBtb3JlCiAgICAgKiAgICAgICBkZXRhaWxzIG9uIHdoaWNoIGVudHJ5IHJlc291cmNlcyBtYXkgYmUgbW92ZWQgYW5kIGlmIHRoZXJlCiAgICAgKiAgICAgICBhcmUgYW55IHJlcXVpcmVtZW50cyBmb3IgbW92aW5nIHRoYXQgcmVzb3VyY2UuCiAgICAgKgogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEBwYXJhbSBNTV9BV2ViZXJFbnRyeShMaXN0KSAgIExpc3QgdG8gbW92ZSBSZXNvdXJjZSAodGhpcykgdG9vLgogICAgICogQHJldHVybiBtaXhlZCBNTV9BV2ViZXJFbnRyeShSZXNvdXJjZSkgUmVzb3VyY2UgY3JlYXRlZCBvbiBMaXN0ICgkbGlzdCkKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIEZhbHNlIGlmIHJlc291cmNlIHdhcyBub3QgY3JlYXRlZC4KICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIG1vdmUoJGxpc3QpIHsKICAgICAgICAjIE1vdmUgUmVzb3VyY2UKICAgICAgICAkcGFyYW1zID0gYXJyYXkoJ3dzLm9wJyA9PiAnbW92ZScsICdsaXN0X2xpbmsnID0+ICRsaXN0LT5zZWxmX2xpbmspOwogICAgICAgICRkYXRhID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ1BPU1QnLCAkdGhpcy0+dXJsLCAkcGFyYW1zLCBhcnJheSgncmV0dXJuJyA9PiAnaGVhZGVycycpKTsKCiAgICAgICAgIyBSZXR1cm4gbmV3IFJlc291cmNlCiAgICAgICAgJHVybCA9ICRkYXRhWydMb2NhdGlvbiddOwogICAgICAgICRyZXNvdXJjZV9kYXRhID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICR1cmwpOwogICAgICAgIHJldHVybiBuZXcgTU1fQVdlYmVyRW50cnkoJHJlc291cmNlX2RhdGEsICR1cmwsICR0aGlzLT5hZGFwdGVyKTsKICAgIH0KCiAgICAvKioKICAgICAqIHNhdmUKICAgICAqCiAgICAgKiBTYXZlcyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGlzIG9iamVjdCBpZiBpdCBoYXMgYmVlbiBjaGFuZ2VkLgogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgICBpZiAoIWVtcHR5KCR0aGlzLT5fbG9jYWxEaWZmKSkgewogICAgICAgICAgICAkZGF0YSA9ICR0aGlzLT5hZGFwdGVyLT5yZXF1ZXN0KCdQQVRDSCcsICR0aGlzLT51cmwsICR0aGlzLT5fbG9jYWxEaWZmLCBhcnJheSgncmV0dXJuJyA9PiAnc3RhdHVzJykpOwogICAgICAgIH0KICAgICAgICAkdGhpcy0+X2xvY2FsRGlmZiA9IGFycmF5KCk7CiAgICAgICAgcmV0dXJuIHRydWU7CgogICAgfQoKICAgIC8qKgogICAgICogX19nZXQKICAgICAqCiAgICAgKiBVc2VkIHRvIGxvb2sgdXAgaXRlbXMgaW4gZGF0YSwgYW5kIHNwZWNpYWwgcHJvcGVydGllcyBsaWtlIHR5cGUgYW5kIAogICAgICogY2hpbGQgY29sbGVjdGlvbnMgZHluYW1pY2FsbHkuCiAgICAgKgogICAgICogQHBhcmFtIFN0cmluZyAkdmFsdWUgICAgIEF0dHJpYnV0ZSBiZWluZyBhY2Nlc3NlZCAgCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHRocm93cyBNTV9BV2ViZXJSZXNvdXJjZU5vdEltcGxlbWVudGVkCiAgICAgKiBAcmV0dXJuIG1peGVkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBfX2dldCgkdmFsdWUpIHsKICAgICAgICBpZiAoaW5fYXJyYXkoJHZhbHVlLCAkdGhpcy0+X3ByaXZhdGVEYXRhKSkgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgICAgaWYgKCFlbXB0eSgkdGhpcy0+ZGF0YSkgJiYgYXJyYXlfa2V5X2V4aXN0cygkdmFsdWUsICR0aGlzLT5kYXRhKSkgewogICAgICAgICAgICBpZiAoaXNfYXJyYXkoJHRoaXMtPmRhdGFbJHZhbHVlXSkpIHsKICAgICAgICAgICAgICAgICRhcnJheSA9IG5ldyBNTV9BV2ViZXJFbnRyeURhdGFBcnJheSgkdGhpcy0+ZGF0YVskdmFsdWVdLCAkdmFsdWUsICR0aGlzKTsKICAgICAgICAgICAgICAgICR0aGlzLT5kYXRhWyR2YWx1ZV0gPSAkYXJyYXk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5kYXRhWyR2YWx1ZV07CiAgICAgICAgfQogICAgICAgIGlmICgkdmFsdWUgPT0gJ3R5cGUnKSByZXR1cm4gJHRoaXMtPl90eXBlKCk7CiAgICAgICAgaWYgKCR0aGlzLT5faXNDaGlsZENvbGxlY3Rpb24oJHZhbHVlKSkgewogICAgICAgICAgICByZXR1cm4gJHRoaXMtPl9nZXRDb2xsZWN0aW9uKCR2YWx1ZSk7CiAgICAgICAgfQogICAgICAgIHRocm93IG5ldyBNTV9BV2ViZXJSZXNvdXJjZU5vdEltcGxlbWVudGVkKCR0aGlzLCAkdmFsdWUpOwogICAgfQoKICAgIC8qKgogICAgICogX19zZXQKICAgICAqCiAgICAgKiBJZiB0aGUga2V5IHByb3ZpZGVkIGlzIHBhcnQgb2YgdGhlIGRhdGEgYXJyYXksIHRoZW4gdXBkYXRlIGl0IGluIHRoZQogICAgICogZGF0YSBhcnJheS4gIE90aGVyd2lzZSwgdXNlIHRoZSBkZWZhdWx0IF9fc2V0KCkgYmVoYXZpb3IuCiAgICAgKgogICAgICogQHBhcmFtIG1peGVkICRrZXkgICAgICAgIEtleSBvZiB0aGUgYXR0ciBiZWluZyBzZXQKICAgICAqIEBwYXJhbSBtaXhlZCAkdmFsdWUgICAgICBWYWx1ZSBiZWluZyBzZXQgdG8gdGhlICRrZXkgYXR0cgogICAgICogQGFjY2VzcyBwdWJsaWMKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIF9fc2V0KCRrZXksICR2YWx1ZSkgewogICAgICAgIGlmIChpc3NldCgkdGhpcy0+ZGF0YVska2V5XSkpIHsKICAgICAgICAgICAgJHRoaXMtPl9sb2NhbERpZmZbJGtleV0gPSAkdmFsdWU7CiAgICAgICAgICAgIHJldHVybiAkdGhpcy0+ZGF0YVska2V5XSA9ICR2YWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm4gcGFyZW50OjpfX3NldCgka2V5LCAkdmFsdWUpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIGZpbmRTdWJzY3JpYmVycwogICAgICoKICAgICAqIExvb2tzIHRocm91Z2ggYWxsIGxpc3RzIGZvciBzdWJzY3JpYmVycwogICAgICogdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gZmlsdGVyCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiBNTV9BV2ViZXJDb2xsZWN0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBmaW5kU3Vic2NyaWJlcnMoJHNlYXJjaF9kYXRhKSB7CiAgICAgICAgJHRoaXMtPl9tZXRob2RGb3IoYXJyYXkoJ2FjY291bnQnKSk7CiAgICAgICAgJHBhcmFtcyA9IGFycmF5X21lcmdlKCRzZWFyY2hfZGF0YSwgYXJyYXkoJ3dzLm9wJyA9PiAnZmluZFN1YnNjcmliZXJzJykpOwogICAgICAgICRkYXRhID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICR0aGlzLT51cmwsICRwYXJhbXMpOwoKICAgICAgICAkdHNfcGFyYW1zID0gYXJyYXlfbWVyZ2UoJHBhcmFtcywgYXJyYXkoJ3dzLnNob3cnID0+ICd0b3RhbF9zaXplJykpOwogICAgICAgICR0b3RhbF9zaXplID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICR0aGlzLT51cmwsICR0c19wYXJhbXMsIGFycmF5KCdyZXR1cm4nID0+ICdpbnRlZ2VyJykpOwoKICAgICAgICAjIHJldHVybiBjb2xsZWN0aW9uCiAgICAgICAgJGRhdGFbJ3RvdGFsX3NpemUnXSA9ICR0b3RhbF9zaXplOwogICAgICAgICR1cmwgPSAkdGhpcy0+dXJsIC4gJz8nLiBodHRwX2J1aWxkX3F1ZXJ5KCRwYXJhbXMpOwogICAgICAgIHJldHVybiBuZXcgTU1fQVdlYmVyQ29sbGVjdGlvbigkZGF0YSwgJHVybCwgJHRoaXMtPmFkYXB0ZXIpOwogICAgfQoKICAgIC8qKgogICAgICogZ2V0QWN0aXZpdHkKICAgICAqCiAgICAgKiBSZXR1cm5zIGFuYWx5dGljcyBhY3Rpdml0eSBmb3IgYSBnaXZlbiBzdWJzY3JpYmVyCiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiBNTV9BV2ViZXJDb2xsZWN0aW9uCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRBY3Rpdml0eSgpIHsKICAgICAgICAkdGhpcy0+X21ldGhvZEZvcihhcnJheSgnc3Vic2NyaWJlcicpKTsKICAgICAgICAkcGFyYW1zID0gYXJyYXkoJ3dzLm9wJyA9PiAnZ2V0QWN0aXZpdHknKTsKICAgICAgICAkZGF0YSA9ICR0aGlzLT5hZGFwdGVyLT5yZXF1ZXN0KCdHRVQnLCAkdGhpcy0+dXJsLCAkcGFyYW1zKTsKCiAgICAgICAgJHRzX3BhcmFtcyA9IGFycmF5X21lcmdlKCRwYXJhbXMsIGFycmF5KCd3cy5zaG93JyA9PiAndG90YWxfc2l6ZScpKTsKICAgICAgICAkdG90YWxfc2l6ZSA9ICR0aGlzLT5hZGFwdGVyLT5yZXF1ZXN0KCdHRVQnLCAkdGhpcy0+dXJsLCAkdHNfcGFyYW1zLCBhcnJheSgncmV0dXJuJyA9PiAnaW50ZWdlcicpKTsKCiAgICAgICAgIyByZXR1cm4gY29sbGVjdGlvbgogICAgICAgICRkYXRhWyd0b3RhbF9zaXplJ10gPSAkdG90YWxfc2l6ZTsKICAgICAgICAkdXJsID0gJHRoaXMtPnVybCAuICc/Jy4gaHR0cF9idWlsZF9xdWVyeSgkcGFyYW1zKTsKICAgICAgICByZXR1cm4gbmV3IE1NX0FXZWJlckNvbGxlY3Rpb24oJGRhdGEsICR1cmwsICR0aGlzLT5hZGFwdGVyKTsKICAgIH0KCiAgICAvKiogZ2V0UGFyZW50RW50cnkKICAgICAqCiAgICAgKiBHZXRzIGFuIGVudHJ5J3MgcGFyZW50IGVudHJ5CiAgICAgKiBSZXR1cm5zIE5VTEwgaWYgbm8gcGFyZW50IGVudHJ5CiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBnZXRQYXJlbnRFbnRyeSgpewogICAgICAgICR1cmxfcGFydHMgPSBleHBsb2RlKCcvJywgJHRoaXMtPnVybCk7CiAgICAgICAgJHNpemUgPSBjb3VudCgkdXJsX3BhcnRzKTsKCiAgICAgICAgI1JlbW92ZSBlbnRyeSBpZCBhbmQgc2xhc2ggZnJvbSBlbmQgb2YgdXJsCiAgICAgICAgJHVybCA9IHN1YnN0cigkdGhpcy0+dXJsLCAwLCAtc3RybGVuKCR1cmxfcGFydHNbJHNpemUtMV0pLTEpOwoKICAgICAgICAjUmVtb3ZlIGNvbGxlY3Rpb24gbmFtZSBhbmQgc2xhc2ggZnJvbSBlbmQgb2YgdXJsCiAgICAgICAgJHVybCA9IHN1YnN0cigkdXJsLCAwLCAtc3RybGVuKCR1cmxfcGFydHNbJHNpemUtMl0pLTEpOwoKICAgICAgICB0cnkgewogICAgICAgICAgICAkZGF0YSA9ICR0aGlzLT5hZGFwdGVyLT5yZXF1ZXN0KCdHRVQnLCAkdXJsKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBNTV9BV2ViZXJFbnRyeSgkZGF0YSwgJHVybCwgJHRoaXMtPmFkYXB0ZXIpOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewogICAgICAgICAgICByZXR1cm4gTlVMTDsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBnZXRXZWJGb3JtcwogICAgICoKICAgICAqIEdldHMgYWxsIHdlYl9mb3JtcyBmb3IgdGhpcyBhY2NvdW50CiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiBhcnJheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0V2ViRm9ybXMoKSB7CiAgICAgICAgJHRoaXMtPl9tZXRob2RGb3IoYXJyYXkoJ2FjY291bnQnKSk7CiAgICAgICAgJGRhdGEgPSAkdGhpcy0+YWRhcHRlci0+cmVxdWVzdCgnR0VUJywgJHRoaXMtPnVybC4nP3dzLm9wPWdldFdlYkZvcm1zJywgYXJyYXkoKSwKICAgICAgICAgICAgYXJyYXkoJ2FsbG93X2VtcHR5JyA9PiB0cnVlKSk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5fcGFyc2VOYW1lZE9wZXJhdGlvbigkZGF0YSk7CiAgICB9CgoKICAgIC8qKgogICAgICogZ2V0V2ViRm9ybVNwbGl0VGVzdHMKICAgICAqCiAgICAgKiBHZXRzIGFsbCB3ZWJfZm9ybSBzcGxpdCB0ZXN0cyBmb3IgdGhpcyBhY2NvdW50CiAgICAgKiBAYWNjZXNzIHB1YmxpYwogICAgICogQHJldHVybiBhcnJheQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gZ2V0V2ViRm9ybVNwbGl0VGVzdHMoKSB7CiAgICAgICAgJHRoaXMtPl9tZXRob2RGb3IoYXJyYXkoJ2FjY291bnQnKSk7CiAgICAgICAgJGRhdGEgPSAkdGhpcy0+YWRhcHRlci0+cmVxdWVzdCgnR0VUJywgJHRoaXMtPnVybC4nP3dzLm9wPWdldFdlYkZvcm1TcGxpdFRlc3RzJywgYXJyYXkoKSwKICAgICAgICAgICAgYXJyYXkoJ2FsbG93X2VtcHR5JyA9PiB0cnVlKSk7CiAgICAgICAgcmV0dXJuICR0aGlzLT5fcGFyc2VOYW1lZE9wZXJhdGlvbigkZGF0YSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBfcGFyc2VOYW1lZE9wZXJhdGlvbgogICAgICoKICAgICAqIFR1cm5zIGEgZHVtYiBhcnJheSBvZiBqc29uIGludG8gYW4gYXJyYXkgb2YgRW50cmllcy4gIFRoaXMgaXMgTk9UIAogICAgICogYSBjb2xsZWN0aW9uLCBidXQgc2ltcGx5IGFuIGFycmF5IG9mIGVudHJpZXMsIGFzIHJldHVybmVkIGZyb20gYQogICAgICogbmFtZWQgb3BlcmF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBhcnJheSAkZGF0YSAKICAgICAqIEBhY2Nlc3MgcHJvdGVjdGVkCiAgICAgKiBAcmV0dXJuIGFycmF5CiAgICAgKi8KICAgIHByb3RlY3RlZCBmdW5jdGlvbiBfcGFyc2VOYW1lZE9wZXJhdGlvbigkZGF0YSkgewogICAgICAgICRyZXN1bHRzID0gYXJyYXkoKTsKICAgICAgICBmb3JlYWNoKCRkYXRhIGFzICRlbnRyeURhdGEpIHsKICAgICAgICAgICAgJHJlc3VsdHNbXSA9IG5ldyBNTV9BV2ViZXJFbnRyeSgkZW50cnlEYXRhLCBzdHJfcmVwbGFjZSgkdGhpcy0+YWRhcHRlci0+YXBwLT5nZXRCYXNlVXJpKCksICcnLAogICAgICAgICAgICAgICAkZW50cnlEYXRhWydzZWxmX2xpbmsnXSksICR0aGlzLT5hZGFwdGVyKTsgCiAgICAgICAgfQogICAgICAgIHJldHVybiAkcmVzdWx0czsKICAgIH0KCiAgICAvKioKICAgICAqIF9tZXRob2RGb3IKICAgICAqCiAgICAgKiBSYWlzZXMgZXhjZXB0aW9uIGlmICR0aGlzLT50eXBlIGlzIG5vdCBpbiBhcnJheSBlbnRyeVR5cGVzLgogICAgICogVXNlZCB0byByZXN0cmljdCBtZXRob2RzIHRvIHNwZWNpZmljIGVudHJ5IHR5cGUocykuCiAgICAgKiBAcGFyYW0gbWl4ZWQgJGVudHJ5VHlwZXMgQXJyYXkgb2YgZW50cnkgdHlwZXMgYXMgc3RyaW5ncywgaWUgYXJyYXkoJ2FjY291bnQnKQogICAgICogQGFjY2VzcyBwcm90ZWN0ZWQKICAgICAqIEByZXR1cm4gdm9pZAogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gX21ldGhvZEZvcigkZW50cnlUeXBlcykgewogICAgICAgIGlmIChpbl9hcnJheSgkdGhpcy0+dHlwZSwgJGVudHJ5VHlwZXMpKSByZXR1cm4gdHJ1ZTsKICAgICAgICB0aHJvdyBuZXcgTU1fQVdlYmVyTWV0aG9kTm90SW1wbGVtZW50ZWQoJHRoaXMpOwogICAgfQoKICAgIC8qKgogICAgICogX2dldENvbGxlY3Rpb24gCiAgICAgKgogICAgICogUmV0dXJucyB0aGUgTU1fQVdlYmVyQ29sbGVjdGlvbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBnaXZlbgogICAgICogY29sbGVjdGlvbiBuYW1lLCByZWxhdGl2ZSB0byB0aGlzIGVudHJ5LgogICAgICoKICAgICAqIEBwYXJhbSBTdHJpbmcgJHZhbHVlIFRoZSBuYW1lIG9mIHRoZSBzdWItY29sbGVjdGlvbgogICAgICogQGFjY2VzcyBwcm90ZWN0ZWQKICAgICAqIEByZXR1cm4gTU1fQVdlYmVyQ29sbGVjdGlvbgogICAgICovCiAgICBwcm90ZWN0ZWQgZnVuY3Rpb24gX2dldENvbGxlY3Rpb24oJHZhbHVlKSB7CiAgICAgICAgaWYgKGVtcHR5KCR0aGlzLT5fY29sbGVjdGlvbnNbJHZhbHVlXSkpIHsKICAgICAgICAgICAgJHVybCA9ICJ7JHRoaXMtPnVybH0veyR2YWx1ZX0iOwogICAgICAgICAgICAkZGF0YSA9ICR0aGlzLT5hZGFwdGVyLT5yZXF1ZXN0KCdHRVQnLCAkdXJsKTsKICAgICAgICAgICAgJHRoaXMtPl9jb2xsZWN0aW9uc1skdmFsdWVdID0gbmV3IE1NX0FXZWJlckNvbGxlY3Rpb24oJGRhdGEsICR1cmwsICR0aGlzLT5hZGFwdGVyKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR0aGlzLT5fY29sbGVjdGlvbnNbJHZhbHVlXTsKICAgIH0KCgogICAgLyoqCiAgICAgKiBfaXNDaGlsZENvbGxlY3Rpb24KICAgICAqCiAgICAgKiBJcyB0aGUgZ2l2ZW4gbmFtZSBvZiBhIGNvbGxlY3Rpb24gYSBjaGlsZCBjb2xsZWN0aW9uIG9mIHRoaXMgZW50cnk/CiAgICAgKgogICAgICogQHBhcmFtIFN0cmluZyAkdmFsdWUgVGhlIG5hbWUgb2YgdGhlIGNvbGxlY3Rpb24gd2UgYXJlIGxvb2tpbmcgZm9yCiAgICAgKiBAYWNjZXNzIHByb3RlY3RlZAogICAgICogQHJldHVybiBib29sZWFuCiAgICAgKiBAdGhyb3dzIE1NX0FXZWJlclJlc291cmNlTm90SW1wbGVtZW50ZWQKICAgICAqLwogICAgcHJvdGVjdGVkIGZ1bmN0aW9uIF9pc0NoaWxkQ29sbGVjdGlvbigkdmFsdWUpIHsKICAgICAgICAkdGhpcy0+X3R5cGUoKTsKICAgICAgICBpZiAoIWVtcHR5KE1NX0FXZWJlckFQSTo6JF9jb2xsZWN0aW9uTWFwWyR0aGlzLT50eXBlXSkgJiYKICAgICAgICAgICAgaW5fYXJyYXkoJHZhbHVlLCBNTV9BV2ViZXJBUEk6OiRfY29sbGVjdGlvbk1hcFskdGhpcy0+dHlwZV0pKSByZXR1cm4gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cgp9Cg==', 0, '2018-11-21 06:38:55'),
(221, 'smarttaglibraryview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1NtYXJ0VGFnTGlicmFyeVZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsJCglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9HRVRfTE9PS1VQX0dSSUQgPSAiZ2V0TG9va3VwR3JpZCI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9HRVRfUEFHRV9URU1QTEFURSA9ICJnZXRQYWdlVGVtcGxhdGUiOwoJCglwcml2YXRlIHN0YXRpYyAkVEVNUExBVEVfQ0hFQ0tPVVRfUEFHRSA9ICJjaGVja291dC1wYWdlIjsKCXByaXZhdGUgc3RhdGljICRURU1QTEFURV9SRURFRU1fR0lGVF9QQUdFID0gInJlZGVlbS1naWZ0LXBhZ2UiOwoJcHJpdmF0ZSBzdGF0aWMgJFRFTVBMQVRFX0NPTkZJUk1BVElPTl9QQUdFID0gImNvbmZpcm1hdGlvbi1wYWdlIjsKCXByaXZhdGUgc3RhdGljICRURU1QTEFURV9TQVZFX1RIRV9TQUxFX1BBR0UgPSAic2F2ZS10aGUtc2FsZS1wYWdlIjsKCXByaXZhdGUgc3RhdGljICRURU1QTEFURV9NWV9BQ0NPVU5UX1BBR0UgPSAibXktYWNjb3VudC1wYWdlIjsKCXByaXZhdGUgc3RhdGljICRURU1QTEFURV9MT0dJTl9QQUdFID0gImxvZ2luLXBhZ2UiOwoJcHJpdmF0ZSBzdGF0aWMgJFRFTVBMQVRFX0ZPUkdPVF9QQVNTV09SRF9QQUdFID0gImZvZ290LXBhc3N3b3JkLXBhZ2UiOwoJcHJpdmF0ZSBzdGF0aWMgJFRFTVBMQVRFX1JFU0VUX1BBU1NXT1JEX1BBR0UgPSAicmVzZXQtcGFzc3dvcmQtcGFnZSI7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9uKCRwb3N0KSAKCXsJCgkJJHJlc3BvbnNlID0gcGFyZW50OjpwZXJmb3JtQWN0aW9uKCRwb3N0KTsKCQkKCQlpZighKCRyZXNwb25zZSBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCXN3aXRjaCgkcG9zdFtzZWxmOjokTU1fSlNBQ1RJT05dKSAKCQkJewkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0dFVF9MT09LVVBfR1JJRDoKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbmRlckxvb2t1cEdyaWQoJHBvc3QpOwoJCQkJCSAKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0dFVF9QQUdFX1RFTVBMQVRFOgoJCQkJCXJldHVybiAkdGhpcy0+Z2V0UGFnZVRlbXBsYXRlKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFNtYXJ0VGFncygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRncm91cHMgPSBhcnJheSgpOwoJCQoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1NNQVJUVEFHX0dST1VQUy4iIFdIRVJFIHZpc2libGU9JzEnIEFORCBwYXJlbnRfaWQ9JzAnIE9SREVSIEJZIG5hbWUgYXNjIjsKCQkKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQlmb3JlYWNoKCRyb3dzIGFzICRyb3cpIAoJCXsKCQkJJGdyb3VwID0gbmV3IE1NX1NtYXJ0VGFnR3JvdXAoKTsKCQkJJGdyb3VwLT5zZXREYXRhKCRyb3cpOwoJCQkKCQkJaWYoJGdyb3VwLT5pc1ZhbGlkKCkpIHsKCQkJCWFycmF5X3B1c2goJGdyb3VwcywgJGdyb3VwKTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gJGdyb3VwczsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldExvb2t1cERhdGEoJG9iamVjdFR5cGUsIE1NX0RhdGFHcmlkICRkZz1udWxsKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkd2hlcmUgPSAiIjsKCQkkY29sdW1ucyA9ICJ0YmwuKiI7CgkJCgkJc3dpdGNoKCRvYmplY3RUeXBlKQoJCXsKCQkJY2FzZSBNTV9UWVBFX1BPU1Q6CgkJCQkkZGctPnNvcnRCeSA9ICJwb3N0X3RpdGxlIjsKCQkJCSRjb2x1bW5zID0gInRibC5JRCBhcyBpZCwgdGJsLnBvc3RfdGl0bGUgYXMgbmFtZSI7CgkJCQkkdGFibGVOYW1lID0gJHdwZGItPnBvc3RzOwoJCQkJJHdoZXJlID0gIiB0YmwucG9zdF9zdGF0dXM9J3B1Ymxpc2gnIGFuZCB0YmwucG9zdF90aXRsZSE9JycgQU5EIChzZWxlY3QgY291bnQoKikgYXMgdG90YWwgZnJvbSBtbV9jb3JlX3BhZ2VzIHdoZXJlIHBhZ2VfaWQ9dGJsLklEKTw9MCI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX1RZUEVfQlVORExFOgoJCQkJJHRhYmxlTmFtZSA9IE1NX1RBQkxFX0JVTkRMRVM7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX1RZUEVfTUVNQkVSU0hJUF9MRVZFTDoKCQkJCSR0YWJsZU5hbWUgPSBNTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUzsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fVFlQRV9FTVBMT1lFRV9BQ0NPVU5UOgoJCQkJJGRnLT5zb3J0QnkgPSAiZGlzcGxheV9uYW1lIjsKCQkJCSR0YWJsZU5hbWUgPSBNTV9UQUJMRV9FTVBMT1lFRV9BQ0NPVU5UUzsKCQkJCSRjb2x1bW5zID0gInRibC5pZCwgdGJsLmRpc3BsYXlfbmFtZSBhcyBuYW1lIjsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fVFlQRV9QUk9EVUNUOgoJCQkJJHRhYmxlTmFtZSA9IE1NX1RBQkxFX1BST0RVQ1RTOwoJCQkJJGNvbHVtbnMgPSAidGJsLmlkLCB0YmwubmFtZSI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlIE1NX1RZUEVfQ1VTVE9NX0ZJRUxEOgoJCQkJJHRhYmxlTmFtZSA9IE1NX1RBQkxFX0NVU1RPTV9GSUVMRFM7CgkJCQkkZGctPnNvcnRCeSA9ICJkaXNwbGF5X25hbWUiOwoJCQkJJGNvbHVtbnMgPSAidGJsLmlkIGFzIGlkLCB0YmwuZGlzcGxheV9uYW1lIGFzIG5hbWUiOwoJCQkJYnJlYWs7CgkJfQoJCQoJCSRzcWxSZXN1bHRDb3VudCA9ICJTRUxFQ1QgY291bnQoZGlzdGluY3QgdGJsLmlkKSBhcyB0b3RhbCBGUk9NICIuJHRhYmxlTmFtZSAuIiB0YmwgIjsKCQoJCWlmKCFlbXB0eSgkd2hlcmUpKXsKCQkJJHNxbFJlc3VsdENvdW50Lj0gIiB3aGVyZSB7JHdoZXJlfSAiOwkKCQl9CgkJCgkJJGNvdW50Um93ID0gJHdwZGItPmdldF9yb3coJHNxbFJlc3VsdENvdW50KTsKCQkKCQkkc3FsID0gIlNFTEVDVCAneyRjb3VudFJvdy0+dG90YWx9JyBhcyB0b3RhbCwgeyRjb2x1bW5zfSBGUk9NICIuJHRhYmxlTmFtZS4iIHRibCI7CgkKCQlpZighZW1wdHkoJHdoZXJlKSl7CgkJCSRzcWwgLj0gIiB3aGVyZSB7JHdoZXJlfSAiOwkKCQl9CgkJCgkJaWYoIWlzX251bGwoJGRnKSAmJiAhaXNfbnVsbCgkZGctPnNvcnRCeSkgJiYgIWVtcHR5KCRkZy0+c29ydEJ5KSkgewoJCQkkc3FsIC49ICIgT1JERVIgQlkgdGJsLnskZGctPnNvcnRCeX0geyRkZy0+c29ydERpcn0gIjsKCQl9CgkJCgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJcmV0dXJuICRyb3dzOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHJlbmRlckxvb2t1cEdyaWQoJHBvc3QpCgl7CgkJJGluZm8gPSBuZXcgc3RkQ2xhc3MoKTsKCQkKCQlmb3JlYWNoKCRwb3N0IGFzICRrZXk9PiR2YWx1ZSkKCQl7CgkJCSRpbmZvLT4ka2V5ID0gJHZhbHVlOwoJCX0KCQkKCQlpZihpc3NldCgkaW5mby0+b2JqZWN0VHlwZSkpIAoJCXsKCQkJcmV0dXJuIE1NX1RFTVBMQVRFOjpnZW5lcmF0ZShNTV9NT0RVTEVTLiIvc21hcnR0YWcuaWRsb29rdXAuZGF0YWdyaWQucGhwIiwgJGluZm8pOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTU1fU21hcnRUYWdMaWJyYXJ5Vmlldy5yZW5kZXJMb29rdXBHcmlkKCk6IG9iamVjdCB0eXBlIG1pc3NpbmciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0UGFnZVRlbXBsYXRlKCRwb3N0KQoJewoJCSRpbmZvID0gbmV3IHN0ZENsYXNzKCk7CgkJCgkJZm9yZWFjaCgkcG9zdCBhcyAka2V5PT4kdmFsdWUpCgkJewoJCQkkaW5mby0+JGtleSA9ICR2YWx1ZTsKCQl9CgkJCgkJaWYoaXNzZXQoJGluZm8tPm1tX3RlbXBsYXRlX3R5cGUpKSAKCQl7CgkJCSRtbV90ZW1wbGF0ZV9iYXNlID0gTU1fVEVNUExBVEVfQkFTRTsKCQkJCgkJCSRpbmZvLT5yZXNvdXJjZURpcmVjdG9yeSA9IE1NX1JFU09VUkNFU19VUkw7CgkJCQoJCQlzd2l0Y2goJGluZm8tPm1tX3RlbXBsYXRlX3R5cGUpCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JFRFTVBMQVRFX0NIRUNLT1VUX1BBR0U6CgkJCQkJcmV0dXJuIE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgkbW1fdGVtcGxhdGVfYmFzZS4iL2RlZmF1bHRfdGVtcGxhdGVzL2NoZWNrb3V0Lmh0bWwucGhwIiwgJGluZm8pOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokVEVNUExBVEVfUkVERUVNX0dJRlRfUEFHRToKCQkJCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCRtbV90ZW1wbGF0ZV9iYXNlLiIvZGVmYXVsdF90ZW1wbGF0ZXMvcmVkZWVtZ2lmdC5odG1sLnBocCIsICRpbmZvKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JFRFTVBMQVRFX0NPTkZJUk1BVElPTl9QQUdFOgoJCQkJCXJldHVybiBNTV9URU1QTEFURTo6Z2VuZXJhdGUoJG1tX3RlbXBsYXRlX2Jhc2UuIi9kZWZhdWx0X3RlbXBsYXRlcy9jb25maXJtYXRpb24uaHRtbC5waHAiLCAkaW5mbyk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRURU1QTEFURV9TQVZFX1RIRV9TQUxFX1BBR0U6CgkJCQkJcmV0dXJuIE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgkbW1fdGVtcGxhdGVfYmFzZS4iL2RlZmF1bHRfdGVtcGxhdGVzL2NhbmNlbC5odG1sLnBocCIsICRpbmZvKTsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JFRFTVBMQVRFX01ZX0FDQ09VTlRfUEFHRToKCQkJCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCRtbV90ZW1wbGF0ZV9iYXNlLiIvZGVmYXVsdF90ZW1wbGF0ZXMvbXlhY2NvdW50Lmh0bWwucGhwIiwgJGluZm8pOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokVEVNUExBVEVfTE9HSU5fUEFHRToKCQkJCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCRtbV90ZW1wbGF0ZV9iYXNlLiIvZGVmYXVsdF90ZW1wbGF0ZXMvbG9naW4uaHRtbC5waHAiLCAkaW5mbyk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRURU1QTEFURV9GT1JHT1RfUEFTU1dPUkRfUEFHRToKCQkJCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCRtbV90ZW1wbGF0ZV9iYXNlLiIvZGVmYXVsdF90ZW1wbGF0ZXMvZm9yZ290cGFzc3dvcmQuaHRtbC5waHAiLCAkaW5mbyk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRURU1QTEFURV9SRVNFVF9QQVNTV09SRF9QQUdFOgoJCQkJCXJldHVybiBNTV9URU1QTEFURTo6Z2VuZXJhdGUoJG1tX3RlbXBsYXRlX2Jhc2UuIi9kZWZhdWx0X3RlbXBsYXRlcy9yZXNldHBhc3N3b3JkLmh0bWwucGhwIiwgJGluZm8pOwoJCQkJCWJyZWFrOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJNTV9TbWFydFRhZ0xpYnJhcnlWaWV3LmdldFBhZ2VUZW1wbGF0ZSgpOiB0ZW1wbGF0ZSB0eXBlIGlzIG1pc3NpbmciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkJCglwdWJsaWMgZnVuY3Rpb24gY3VzdG9tTWVkaWFCdXR0b25zKCkgewoJCWdsb2JhbCAkcG9zdF9JRCwgJHRlbXBfSUQ7IAoJCQkKCQkkdXBsb2FkaW5nX2lmcmFtZV9JRCA9IChpbnQpICgwID09ICRwb3N0X0lEID8gJHRlbXBfSUQgOiAkcG9zdF9JRCk7IAoKCQkkb3V0cHV0ID0gIjxzdHlsZT4iOwkKCQkkb3V0cHV0IC49ICIud3AtbWVkaWEtYnV0dG9ucyB7IHBhZGRpbmc6IDA7IH0iOwkKCQkkb3V0cHV0IC49ICIud3AtbWVkaWEtYnV0dG9ucyBhIHsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfSI7CgkJJG91dHB1dCAuPSAiPC9zdHlsZT4iOwoJCQoJCSRvdXRwdXQgLj0gJ1VwbG9hZC9JbnNlcnQ6ICc7CgkJCSAKCQkkbWVkaWFfdXBsb2FkX2lmcmFtZV9zcmMgPSAibWVkaWEtdXBsb2FkLnBocD9wb3N0X2lkPXskdXBsb2FkaW5nX2lmcmFtZV9JRH0iOyAKCQkJCgkJJGltYWdlX3VwbG9hZF9pZnJhbWVfc3JjID0gYXBwbHlfZmlsdGVycygnaW1hZ2VfdXBsb2FkX2lmcmFtZV9zcmMnLCAieyRtZWRpYV91cGxvYWRfaWZyYW1lX3NyY30mYW1wO3R5cGU9aW1hZ2UiKTsgCgkJJGltYWdlX3RpdGxlID0gX18oJ0FkZCBhbiBJbWFnZScpOyAgICAgIAoJCSRpbWFnZV9idXR0b24gPSAiPGEgaHJlZj0neyRpbWFnZV91cGxvYWRfaWZyYW1lX3NyY30mYW1wO1RCX2lmcmFtZT10cnVlJyBpZD0nYWRkX2ltYWdlJyBjbGFzcz0ndGhpY2tib3gnIHRpdGxlPSd7JGltYWdlX3RpdGxlfSc+PGltZyBzcmM9J2ltYWdlcy9tZWRpYS1idXR0b24taW1hZ2UuZ2lmJyBhbHQ9J3skaW1hZ2VfdGl0bGV9JyAvPjwvYT4iOyAKCQkkb3V0cHV0IC49IGFwcGx5X2ZpbHRlcnMoJ2ltYWdlX3VwbG9hZF9idXR0b24nLCAkaW1hZ2VfYnV0dG9uICk7IAoKCQkkdmlkZW9fdXBsb2FkX2lmcmFtZV9zcmMgPSBhcHBseV9maWx0ZXJzKCd2aWRlb191cGxvYWRfaWZyYW1lX3NyYycsICJ7JG1lZGlhX3VwbG9hZF9pZnJhbWVfc3JjfSZhbXA7dHlwZT12aWRlbyIpOyAKCQkkdmlkZW9fdGl0bGUgPSBfXygnQWRkIFZpZGVvJyk7IAogCQkkdmlkZW9fYnV0dG9uID0gIjxhIGhyZWY9J3skdmlkZW9fdXBsb2FkX2lmcmFtZV9zcmN9JmFtcDtUQl9pZnJhbWU9dHJ1ZScgaWQ9J2FkZF92aWRlbycgY2xhc3M9J3RoaWNrYm94JyB0aXRsZT0neyR2aWRlb190aXRsZX0nPjxpbWcgc3JjPSdpbWFnZXMvbWVkaWEtYnV0dG9uLXZpZGVvLmdpZicgYWx0PSd7JHZpZGVvX3RpdGxlfScgLz48L2E+IjsgCiAJCSRvdXRwdXQgLj0gYXBwbHlfZmlsdGVycygndmlkZW9fdXBsb2FkX2J1dHRvbicsICR2aWRlb19idXR0b24gKTsgCiAJCQkKIAkJJGF1ZGlvX3VwbG9hZF9pZnJhbWVfc3JjID0gYXBwbHlfZmlsdGVycygnYXVkaW9fdXBsb2FkX2lmcmFtZV9zcmMnLCAieyRtZWRpYV91cGxvYWRfaWZyYW1lX3NyY30mYW1wO3R5cGU9YXVkaW8iKTsgCgkJJGF1ZGlvX3RpdGxlID0gX18oJ0FkZCBBdWRpbycpOyAKCQkkYXVkaW9fYnV0dG9uID0gIjxhIGhyZWY9J3skYXVkaW9fdXBsb2FkX2lmcmFtZV9zcmN9JmFtcDtUQl9pZnJhbWU9dHJ1ZScgaWQ9J2FkZF9hdWRpbycgY2xhc3M9J3RoaWNrYm94JyB0aXRsZT0neyRhdWRpb190aXRsZX0nPjxpbWcgc3JjPSdpbWFnZXMvbWVkaWEtYnV0dG9uLW11c2ljLmdpZicgYWx0PSd7JGF1ZGlvX3RpdGxlfScgLz48L2E+IjsgCgkJJG91dHB1dCAuPSBhcHBseV9maWx0ZXJzKCdhdWRpb191cGxvYWRfYnV0dG9uJywgJGF1ZGlvX2J1dHRvbiApOyAKCQkKCQkkb3V0cHV0IC49IHNlbGY6OnNtYXJ0VGFnTGlicmFyeUJ1dHRvbnMoIndvcmRwcmVzcyIpOwoJCQoJCSRvdXRwdXQgLj0gIjxzcGFuIHN0eWxlPSdtYXJnaW4tbGVmdDoxNXB4Oyc+TU0gVGVtcGxhdGVzOiA8L3NwYW4+IjsKCQkKCQkkb3V0cHV0IC49ICI8c2VsZWN0IGlkPSdtbS10ZW1wbGF0ZS1zZWxlY3Rvcicgc3R5bGU9Jyc+IjsKCQkkb3V0cHV0IC49ICI8b3B0aW9uIHZhbHVlPScnPjwvb3B0aW9uPiI7CgkJJG91dHB1dCAuPSAiPG9wdGlvbiB2YWx1ZT0nIi5zZWxmOjokVEVNUExBVEVfQ0hFQ0tPVVRfUEFHRS4iJz5DaGVja291dDwvb3B0aW9uPiI7CgkJJG91dHB1dCAuPSAiPG9wdGlvbiB2YWx1ZT0nIi5zZWxmOjokVEVNUExBVEVfUkVERUVNX0dJRlRfUEFHRS4iJz5SZWRlZW0gR2lmdDwvb3B0aW9uPiI7CgkJJG91dHB1dCAuPSAiPG9wdGlvbiB2YWx1ZT0nIi5zZWxmOjokVEVNUExBVEVfQ09ORklSTUFUSU9OX1BBR0UuIic+Q29uZmlybWF0aW9uPC9vcHRpb24+IjsKCQkkb3V0cHV0IC49ICI8b3B0aW9uIHZhbHVlPSciLnNlbGY6OiRURU1QTEFURV9TQVZFX1RIRV9TQUxFX1BBR0UuIic+U2F2ZS10aGUtU2FsZTwvb3B0aW9uPiI7CgkJJG91dHB1dCAuPSAiPG9wdGlvbiB2YWx1ZT0nIi5zZWxmOjokVEVNUExBVEVfTVlfQUNDT1VOVF9QQUdFLiInPk15IEFjY291bnQ8L29wdGlvbj4iOwoJCSRvdXRwdXQgLj0gIjxvcHRpb24gdmFsdWU9JyIuc2VsZjo6JFRFTVBMQVRFX0xPR0lOX1BBR0UuIic+TG9naW48L29wdGlvbj4iOwoJCSRvdXRwdXQgLj0gIjxvcHRpb24gdmFsdWU9JyIuc2VsZjo6JFRFTVBMQVRFX0ZPUkdPVF9QQVNTV09SRF9QQUdFLiInPkZvcmdvdCBQYXNzd29yZDwvb3B0aW9uPiI7CgkJJG91dHB1dCAuPSAiPG9wdGlvbiB2YWx1ZT0nIi5zZWxmOjokVEVNUExBVEVfUkVTRVRfUEFTU1dPUkRfUEFHRS4iJz5SZXNldCBQYXNzd29yZDwvb3B0aW9uPiI7CgkJJG91dHB1dCAuPSAiPC9zZWxlY3Q+IjsKCQkKCQkkb3V0cHV0IC49ICIgPGEgb25jbGljaz1cInN0bF9qcy5pbnNlcnRUZW1wbGF0ZShqUXVlcnkoJyNtbS10ZW1wbGF0ZS1zZWxlY3RvcicpLnZhbCgpLCBqUXVlcnkoJyNtbS10ZW1wbGF0ZS1zZWxlY3RvciA6c2VsZWN0ZWQnKS50ZXh0KCkpXCIgdGl0bGU9XCJJbnNlcnQgVGVtcGxhdGVcIj4iLk1NX1V0aWxzOjpnZXRJY29uKCdwbHVzLWNpcmNsZScsICdncmVlbicsICcxLjVlbScsICczcHgnKS4iPC9hPiI7CgkJCgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBhZGREaWFsb2dDb250YWluZXJzKCkKCXsKCQllY2hvICI8ZGl2IGlkPVwibW0tc21hcnR0YWctbGlicmFyeS1kaWFsb2dcIj48L2Rpdj4iOwoJCWVjaG8gIjxkaXYgaWQ9XCJtbS1pZC1sb29rdXAtZGlhbG9nXCI+PC9kaXY+IjsKCQkKCQllY2hvICI8c2NyaXB0PiI7CgkJZWNobyAialF1ZXJ5KGZ1bmN0aW9uKCkgeyI7CgkJZWNobyAialF1ZXJ5KFwiI21tLXNtYXJ0dGFnLWxpYnJhcnktZGlhbG9nXCIpLmRpYWxvZyh7YXV0b09wZW46IGZhbHNlfSk7IjsKCQllY2hvICJqUXVlcnkoXCIjbW0taWQtbG9va3VwLWRpYWxvZ1wiKS5kaWFsb2coe2F1dG9PcGVuOiBmYWxzZX0pOyI7CgkJZWNobyAifSk7IjsKCQllY2hvICI8L3NjcmlwdD4iOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHNtYXJ0VGFnTGlicmFyeUJ1dHRvbnMoJGNvbnRlbnRBcmVhSWQsICRzaG93SWRMb29rdXA9dHJ1ZSkKCXsKCQkkb3V0cHV0ID0gIiI7CgkJCgkJJG91dHB1dCAuPSAiPGEgb25jbGljaz1cInN0bF9qcy5zaG93U21hcnRUYWdMaWJyYXJ5KCciLiRjb250ZW50QXJlYUlkLiInKVwiIHRpdGxlPVwiU21hcnRUYWcgTGlicmFyeVwiIHN0eWxlPVwiY3Vyc29yOnBvaW50ZXI7XCI+Ii5NTV9VdGlsczo6Z2V0SWNvbignYm9vaycsICdibHVlJywgJzEuM2VtJywgJzJweCcsICcnLCAnbWFyZ2luLWxlZnQ6NXB4OycpLiI8L2E+IjsgCgoJCWlmKCRjb250ZW50QXJlYUlkICE9ICJ3b3JkcHJlc3MiKSAKCQl7CgkJCSRvdXRwdXQgLj0gIiAiOwoJCX0KCQkKCQlpZigkc2hvd0lkTG9va3VwKQoJCXsKCQkJJG91dHB1dCAuPSAiPGEgb25jbGljaz1cInN0bF9qcy5zaG93SWRMb29rdXAoJyIuJGNvbnRlbnRBcmVhSWQuIicpXCIgdGl0bGU9XCJJRCBMb29rdXBcIiBzdHlsZT1cImN1cnNvcjpwb2ludGVyO1wiPiIuTU1fVXRpbHM6OmdldEljb24oJ3NlYXJjaCcsICdvcmFuZ2UnLCAnMS4zZW0nLCAnMnB4JywgJycsICdtYXJnaW4tbGVmdDo1cHg7JykuIjwvYT4iOyAKCQl9CgkJCQoJCXJldHVybiAkb3V0cHV0OwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(222, 'aweberentrydataarray', 'Y2xhc3MgTU1fQVdlYmVyRW50cnlEYXRhQXJyYXkgaW1wbGVtZW50cyBBcnJheUFjY2VzcywgQ291bnRhYmxlLCBJdGVyYXRvciAgewogICAgcHJpdmF0ZSAkY291bnRlciA9IDA7CgogICAgcHJvdGVjdGVkICRkYXRhOwogICAgcHJvdGVjdGVkICRrZXlzOwogICAgcHJvdGVjdGVkICRuYW1lOwogICAgcHJvdGVjdGVkICRwYXJlbnQ7CgogICAgcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRkYXRhLCAkbmFtZSwgJHBhcmVudCkgewogICAgICAgICR0aGlzLT5kYXRhID0gJGRhdGE7CiAgICAgICAgJHRoaXMtPmtleXMgPSBhcnJheV9rZXlzKCRkYXRhKTsKICAgICAgICAkdGhpcy0+bmFtZSA9ICRuYW1lOwogICAgICAgICR0aGlzLT5wYXJlbnQgPSAkcGFyZW50OwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBjb3VudCgpIHsKICAgICAgICByZXR1cm4gc2l6ZU9mKCR0aGlzLT5kYXRhKTsKICAgIH0KCiAgICBwdWJsaWMgZnVuY3Rpb24gb2Zmc2V0RXhpc3RzKCRvZmZzZXQpIHsKICAgICAgICByZXR1cm4gKGlzc2V0KCR0aGlzLT5kYXRhWyRvZmZzZXRdKSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIG9mZnNldEdldCgkb2Zmc2V0KSB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5kYXRhWyRvZmZzZXRdOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBvZmZzZXRTZXQoJG9mZnNldCwgJHZhbHVlKSB7CiAgICAgICAgJHRoaXMtPmRhdGFbJG9mZnNldF0gPSAkdmFsdWU7CiAgICAgICAgJHRoaXMtPnBhcmVudC0+eyR0aGlzLT5uYW1lfSA9ICR0aGlzLT5kYXRhOwogICAgICAgIHJldHVybiAkdmFsdWU7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIG9mZnNldFVuc2V0KCRvZmZzZXQpIHsKICAgICAgICB1bnNldCgkdGhpcy0+ZGF0YVskb2Zmc2V0XSk7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHJld2luZCgpIHsKICAgICAgICAkdGhpcy0+Y291bnRlciA9IDA7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGN1cnJlbnQoKSB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5kYXRhWyR0aGlzLT5rZXkoKV07CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIGtleSgpIHsKICAgICAgICByZXR1cm4gJHRoaXMtPmtleXNbJHRoaXMtPmNvdW50ZXJdOwogICAgfQoKICAgIHB1YmxpYyBmdW5jdGlvbiBuZXh0KCkgewogICAgICAgICR0aGlzLT5jb3VudGVyKys7CiAgICB9CgogICAgcHVibGljIGZ1bmN0aW9uIHZhbGlkKCkgewogICAgICAgIGlmICgkdGhpcy0+Y291bnRlciA+PSBzaXplT2YoJHRoaXMtPmRhdGEpKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9Cn0K', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(223, 'user', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pIAogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1VzZXIgZXh0ZW5kcyBNTV9FbnRpdHkKewkKCXB1YmxpYyBzdGF0aWMgJE5FV19VU0VSX0lEID0gLTE7CgkKCS8vIHRoaXMgaXMgdXNlZCB0byBjcmVhdGUgYSB1c2VyIG9iamVjdCB3aXRoIHNhbXBsZSBkYXRhIGluIGl0CglwdWJsaWMgc3RhdGljICRTQU1QTEVfVVNFUl9JRCA9IC0xMDsKCQoJcHJpdmF0ZSAkbWVtYmVyc2hpcElkID0gIiI7Cglwcml2YXRlICRzdGF0dXMgPSAiMSI7Cglwcml2YXRlICRwZW5kaW5nU3RhdHVzID0gIjAiOwoJcHJpdmF0ZSAkaW1wb3J0ZWRGbGFnID0gIjAiOwoJcHJpdmF0ZSAkbGFzdFVwZGF0ZWREYXRlID0gbnVsbDsKCXByaXZhdGUgJHN0YXR1c1VwZGF0ZWREYXRlID0gbnVsbDsgCglwcml2YXRlICRzdGF0dXNNZXNzYWdlID0gIiI7Cglwcml2YXRlICRkYXlzQ2FsY01ldGhvZCA9ICJqb2luX2RhdGUiOwoJcHJpdmF0ZSAkZGF5c0NhbGNWYWx1ZSA9ICIiOyAKCXByaXZhdGUgJGJlY2FtZUFjdGl2ZURhdGUgPSBudWxsOwoJcHJpdmF0ZSAkcGhvbmUgPSAiIjsKCXByaXZhdGUgJHVzZXJuYW1lID0gIiI7Cglwcml2YXRlICRlbWFpbCA9ICIiOwoJcHJpdmF0ZSAkZmlyc3ROYW1lID0gIiI7Cglwcml2YXRlICRsYXN0TmFtZSA9ICIiOwoJcHJpdmF0ZSAkcmVnaXN0cmF0aW9uRGF0ZSA9IG51bGw7Cglwcml2YXRlICRjYW5jZWxsYXRpb25EYXRlID0gbnVsbDsKCXByaXZhdGUgJGV4cGlyYXRpb25EYXRlID0gbnVsbDsKCXByaXZhdGUgJG5vdGVzID0gIiI7Cglwcml2YXRlICRzdWJzY3JpYmVkTGlzdElkID0gIiI7IAoJcHJpdmF0ZSAkc3Vic2NyaWJlZFByb3ZpZGVySWQgPSAiIjsKCXByaXZhdGUgJGxhc3RMb2dpbkRhdGUgPSBudWxsOyAKCXByaXZhdGUgJGxhc3RMb2dpbklwQWRkcmVzcyA9ICIiOwoJcHJpdmF0ZSAkbG9naW5Db3VudCA9IC0xOwoJcHJpdmF0ZSAkcGFnZUFjY2Vzc0NvdW50ID0gLTE7Cglwcml2YXRlICRlbWFpbENvdW50ID0gLTE7Cglwcml2YXRlICR3ZWxjb21lRW1haWxTZW50RGF0ZSA9IG51bGw7IAoJcHJpdmF0ZSAkYmlsbGluZ0FkZHJlc3MgPSAiIjsKCXByaXZhdGUgJGJpbGxpbmdDaXR5ID0gIiI7Cglwcml2YXRlICRiaWxsaW5nU3RhdGUgPSAiIjsKCXByaXZhdGUgJGJpbGxpbmdaaXAgPSAiIjsKCXByaXZhdGUgJGJpbGxpbmdDb3VudHJ5ID0gIiI7Cglwcml2YXRlICRzaGlwcGluZ0FkZHJlc3MgPSAiIjsKCXByaXZhdGUgJHNoaXBwaW5nQ2l0eSA9ICIiOwoJcHJpdmF0ZSAkc2hpcHBpbmdTdGF0ZSA9ICIiOwoJcHJpdmF0ZSAkc2hpcHBpbmdaaXAgPSAiIjsKCXByaXZhdGUgJHNoaXBwaW5nQ291bnRyeSA9ICIiOwoJcHJpdmF0ZSAkdG90YWxQYXltZW50cyA9IDA7Cglwcml2YXRlICR0b3RhbFJlZnVuZHMgPSAwOwoJcHJpdmF0ZSAkZm9yZ290UGFzc3dvcmRIYXNoOyAvLyBXb3JkcHJlc3MnIHVzZXJfYWN0aXZhdGlvbl9rZXkKCQoJLy8gaW50ZXJuYWwgdXNlCglwcml2YXRlICRtZW1iZXJzaGlwOwoJcHJpdmF0ZSAkbGFzdE1lbWJlcnNoaXBJZCA9ICIiOwoJcHJpdmF0ZSAkbGFzdE1lbWJlcnNoaXBOYW1lID0gIiI7Cglwcml2YXRlICRsYXN0RGF5c0NhbGNNZXRob2QgPSAiIjsKCXByaXZhdGUgJGxhc3REYXlzQ2FsY1ZhbHVlID0gIiI7IAoJcHJpdmF0ZSAkbGFzdENhbmNlbGxhdGlvbkRhdGUgPSAiIjsKCXByaXZhdGUgJGxhc3RFeHBpcmF0aW9uRGF0ZSA9ICIiOwoJcHJpdmF0ZSAkbGFzdEZpcnN0TmFtZSA9ICIiOwoJcHJpdmF0ZSAkbGFzdExhc3ROYW1lID0gIiI7Cglwcml2YXRlICRsYXN0RW1haWwgPSAiIjsKCXByaXZhdGUgJGxhc3RVc2VybmFtZSA9ICIiOwoJcHJpdmF0ZSAkbGFzdFBob25lID0gIiI7Cglwcml2YXRlICRsYXN0Tm90ZXMgPSAiIjsKCXByaXZhdGUgJGxhc3RTdGF0dXMgPSAiIjsKCXByaXZhdGUgJGxhc3RTdGF0dXNOYW1lID0gIiI7Cglwcml2YXRlICRsYXN0QmlsbGluZ0FkZHJlc3MgPSAiIjsKCXByaXZhdGUgJGxhc3RCaWxsaW5nQ2l0eSA9ICIiOwoJcHJpdmF0ZSAkbGFzdEJpbGxpbmdTdGF0ZSA9ICIiOwoJcHJpdmF0ZSAkbGFzdEJpbGxpbmdaaXAgPSAiIjsKCXByaXZhdGUgJGxhc3RCaWxsaW5nQ291bnRyeSA9ICIiOwoJcHJpdmF0ZSAkbGFzdFNoaXBwaW5nQWRkcmVzcyA9ICIiOwoJcHJpdmF0ZSAkbGFzdFNoaXBwaW5nQ2l0eSA9ICIiOwoJcHJpdmF0ZSAkbGFzdFNoaXBwaW5nU3RhdGUgPSAiIjsKCXByaXZhdGUgJGxhc3RTaGlwcGluZ1ppcCA9ICIiOwoJcHJpdmF0ZSAkbGFzdFNoaXBwaW5nQ291bnRyeSA9ICIiOwoJcHJpdmF0ZSAkc3RhdHVzVXBkYXRlZCA9IGZhbHNlOwoJcHJpdmF0ZSAkc2VuZFdlbGNvbWVFbWFpbEZsYWcgPSB0cnVlOwoJcHJpdmF0ZSAkbWVtYmVyc2hpcExldmVsQ2hhbmdlZEZsYWcgPSBmYWxzZTsKCXByaXZhdGUgJGxhc3RGb3Jnb3RQYXNzd29yZEhhc2g7IC8vIFdvcmRwcmVzcycgdXNlcl9hY3RpdmF0aW9uX2tleQoJCglwcml2YXRlICRvcmlnaW5BZmZpbGlhdGVJZCA9ICIiOwoJcHJpdmF0ZSAkb3JpZ2luU3ViYWZmaWxpYXRlSWQgPSAiIjsgCgkKCXByaXZhdGUgJGlzQ1NWSW1wb3J0ID0gZmFsc2U7Cglwcml2YXRlICRmb3Jnb3R0ZW5GbGFnID0gIjAiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGlkPSIiLCAkZ2V0RGF0YT10cnVlKQoJewoJCWlmKCEoJGlkIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJaWYoaXNzZXQoJGlkKSAmJiAoaW50dmFsKCRpZCkgPiAwIHx8IGludHZhbCgkaWQpID09IHNlbGY6OiRTQU1QTEVfVVNFUl9JRCkpCgkJCXsKCQkJCSR0aGlzLT5pZCA9ICRpZDsKCQkJCQkKCQkJCWlmKCRnZXREYXRhID09IHRydWUpCgkJCQl7CgkJCQkJJHRoaXMtPmdldERhdGEoKTsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRpZCA9ICIiOwoJCQl9CgkJfQoJfQoJCgkvKgoJICogUXVpY2sgYWNjZXNzIHRvIGN1cnJlbnRseSBsb2dnZWQgaW4gdXNlci4KCSAqIEByZXR1cm4gaW50IFJldHVybnMgdGhlIGlkIGludGVnZXIgb2YgdGhlIHdwLXVzZXIgb2JqZWN0CgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0Q3VycmVudFdQVXNlcklEKCkKCXsgCgkJZ2xvYmFsICRjdXJyZW50X3VzZXI7ICAKCQkKCQkkdXNlcklkID0gZmFsc2U7CgkJCgkJLy8gQWxzbyB2ZXJ5IHJlZHVuZGFudCAuLi4gCgkJaWYgKGlzc2V0KCRjdXJyZW50X3VzZXIpICYmIGlzc2V0KCRjdXJyZW50X3VzZXItPklEKSAmJiBpbnR2YWwoJGN1cnJlbnRfdXNlci0+SUQpPj0wKQoJCXsKCQkJJHVzZXJJZCA9ICRjdXJyZW50X3VzZXItPklEOwoJCX0KCQllbHNlCgkJewoJCQkvLyB0aGlzIHdvdWxkIHByb2JhYmx5IHN1ZmZpY2UKCQkJJHVzZXJJZCA9IGdldF9jdXJyZW50X3VzZXJfaWQoKTsJCgkJfQoJCQoJCXJldHVybiAkdXNlcklkOwoJfSAKCSAKCS8qCgkgKiBRdWljayBhY2Nlc3MgdG8gY3VycmVudGx5IGxvZ2dlZCBpbiB1c2VyIG9iamVjdC4KCSAqIEByZXR1cm4gTU1fVXNlciBSZXR1cm5zIHRoZSBNTV9Vc2VyIG9iamVjdCAKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDdXJyZW50V1BVc2VyKCkKCXsgCgkJJHVzZXJJZCA9IHNlbGY6OmdldEN1cnJlbnRXUFVzZXJJRCgpOwoJCWlmKCR1c2VySWQ9PT1mYWxzZSB8fCBpbnR2YWwoJHVzZXJJZCk8PTApCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKDAsZmFsc2UpOwoJCQkKCQkJLy9yZWR1bmRhbnQsIHNhbml0eSBjaGVjawoJCQkkdXNlci0+aW52YWxpZGF0ZSgpOwoJCQlyZXR1cm4gJHVzZXI7CgkJfQoJCXJldHVybiBuZXcgTU1fVXNlcigkdXNlcklkKTsKCX0KCQoJLyoqCgkgKiBMb2NhdGUgYSB1c2VyIHVzaW5nIGFuIGVtYWlsIGFkZHJlc3MuCgkgKgoJICogQHBhcmFtIFN0cmluZyAkZW1haWwgVGhlIGVtYWlsIGFkZHJlc3MgdG8gc2VhcmNoIGZvcgoJICogQHJldHVybiBNTV9Vc2VyIFJldHVybnMgdGhlIHVzZXIgb2JqZWN0LCBhbHdheXMgY2hlY2sgaWYgdGhlIHVzZXIgaXMgdmFsaWQgYmVmb3JlIHVzaW5nCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEJ5RW1haWwoJGVtYWlsKQoJewoJCSR1c2VyID0gbmV3IE1NX1VzZXIoKTsKCQkKCQlpZihNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9VU0VfQ0hFQ0tPVVRfRk9STV9URVNUX0RBVEEpID09ICIxIikKCQl7CgkJCSRlbWFpbCA9IE1NX1Rlc3REYXRhVXRpbHM6OmNvbnZlcnRUZXN0RW1haWwoJGVtYWlsKTsKCQl9CgkJCgkJaWYoIWVtcHR5KCRlbWFpbCkpCgkJewoJCQkkd3BVc2VyID0gZ2V0X3VzZXJfYnkoImVtYWlsIiwgJGVtYWlsKTsKCQkJCgkJCWlmKCR3cFVzZXIgPT09IGZhbHNlKQoJCQl7CgkJCQkkdXNlci0+aW52YWxpZGF0ZSgpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHVzZXItPnNldERhdGEoJHdwVXNlcik7CgkJCX0KCQl9CgkJCgkJcmV0dXJuICR1c2VyOwoJfQoKCXByb3RlY3RlZCBmdW5jdGlvbiBnZXREYXRhKCkKCXsKCQlpZigkdGhpcy0+aWQgIT0gc2VsZjo6JFNBTVBMRV9VU0VSX0lEKQoJCXsKCQkJJHdwVXNlciA9IGdldF91c2VyX2J5KCJpZCIsICR0aGlzLT5pZCk7CgkKCQkJaWYoJHdwVXNlciA9PT0gZmFsc2UpCgkJCXsKCQkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRoaXMtPnNldERhdGEoJHdwVXNlcik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJLy8gcG9wdWxhdGUgc2FtcGxlIGRhdGEKCQkJJHRoaXMtPmlkID0gc2VsZjo6JFNBTVBMRV9VU0VSX0lEOwoJCQkkdGhpcy0+dXNlcm5hbWUgPSAic2FtcGxldXNlcm5hbWUiOwoJCQkkdGhpcy0+ZW1haWwgPSAic2FtcGxlQHlvdXJkb21haW4uY29tIjsKCQkJJHRoaXMtPmZpcnN0TmFtZSA9ICJTYW1wbGVGaXJzdE5hbWUiOwoJCQkkdGhpcy0+bGFzdE5hbWUgPSAiU2FtcGxlTGFzdE5hbWUiOwoJCQkkdGhpcy0+cGhvbmUgPSAiKDU1NSkgNTU1LTU1NTUiOwoJCQkkdGhpcy0+bm90ZXMgPSAiU2FtcGxlIG1lbWJlciBub3RlcyI7CgkJCSR0aGlzLT5tZW1iZXJzaGlwSWQgPSBNTV9NZW1iZXJzaGlwTGV2ZWw6OmdldERlZmF1bHRNZW1iZXJzaGlwKCktPmdldElkKCk7CgkJCSR0aGlzLT5zdGF0dXMgPSAkdGhpcy0+bGFzdFN0YXR1cyA9IE1NX1N0YXR1czo6JEFDVElWRTsKCQkJJHRoaXMtPmJpbGxpbmdBZGRyZXNzID0gIjEyMyBTYW1wbGUgU3QuIjsKCQkJJHRoaXMtPmJpbGxpbmdDaXR5ID0gIlNhbXBsZSBDaXR5IjsKCQkJJHRoaXMtPmJpbGxpbmdTdGF0ZSA9ICJOWSI7CgkJCSR0aGlzLT5iaWxsaW5nWmlwID0gIjEyMzQ1IjsKCQkJJHRoaXMtPmJpbGxpbmdDb3VudHJ5ID0gIlVTIjsKCQkJJHRoaXMtPnNoaXBwaW5nQWRkcmVzcyA9ICIxMjMgU2FtcGxlIFN0LiI7CgkJCSR0aGlzLT5zaGlwcGluZ0NpdHkgPSAiU2FtcGxlIENpdHkiOwoJCQkkdGhpcy0+c2hpcHBpbmdTdGF0ZSA9ICJOWSI7CgkJCSR0aGlzLT5zaGlwcGluZ1ppcCA9ICIxMjM0NSI7CgkJCSR0aGlzLT5zaGlwcGluZ0NvdW50cnkgPSAiVVMiOwoJCQkkdGhpcy0+ZGF5c0NhbGNNZXRob2QgPSBNTV9EYXlzQ2FsY3VsYXRpb25UeXBlczo6JEpPSU5fREFURTsKCQkJJHRoaXMtPnJlZ2lzdHJhdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJHRoaXMtPmxhc3RMb2dpbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJHRoaXMtPmJlY2FtZUFjdGl2ZURhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJHRoaXMtPndlbGNvbWVFbWFpbFNlbnREYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSR0aGlzLT5sYXN0VXBkYXRlZERhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJHRoaXMtPnN0YXR1c1VwZGF0ZWREYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCQoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCR3cFVzZXIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCR3cFVzZXIgaW5zdGFuY2VvZiBXUF9Vc2VyKQoJCXsKCQkJdHJ5CgkJCXsKCQkJCSR0aGlzLT5pZCA9ICR3cFVzZXItPklEOwoJCQkJJHRoaXMtPnVzZXJuYW1lID0gJHdwVXNlci0+dXNlcl9sb2dpbjsKCQkJCSR0aGlzLT5yZWdpc3RyYXRpb25EYXRlID0gJHdwVXNlci0+dXNlcl9yZWdpc3RlcmVkOwoJCQkJJHRoaXMtPmVtYWlsID0gJHdwVXNlci0+dXNlcl9lbWFpbDsKCQkJCQoJCQkJLy8gZ2V0IE1NIHVzZXIgZGF0YQoJCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgV0hFUkUgd3BfdXNlcl9pZD0neyR0aGlzLT5pZH0nIExJTUlUIDE7IjsKCQkJCSRtbVVzZXJEYXRhID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQkKCQkJCWlmKCRtbVVzZXJEYXRhICYmIGlzc2V0KCRtbVVzZXJEYXRhLT53cF91c2VyX2lkKSkKCQkJCXsKCQkJCQkkdGhpcy0+Zmlyc3ROYW1lID0gJG1tVXNlckRhdGEtPmZpcnN0X25hbWU7CgkJCQkJJHRoaXMtPmxhc3ROYW1lID0gJG1tVXNlckRhdGEtPmxhc3RfbmFtZTsKCQkJCQkkdGhpcy0+cGhvbmUgPSAkbW1Vc2VyRGF0YS0+cGhvbmU7CgkJCQkJJHRoaXMtPm5vdGVzID0gJG1tVXNlckRhdGEtPm5vdGVzOwoJCQkJCSR0aGlzLT5tZW1iZXJzaGlwSWQgPSAkbW1Vc2VyRGF0YS0+bWVtYmVyc2hpcF9sZXZlbF9pZDsKCQkJCQkkdGhpcy0+c3RhdHVzID0gJHRoaXMtPmxhc3RTdGF0dXMgPSAkbW1Vc2VyRGF0YS0+c3RhdHVzOwoJCQkJCSR0aGlzLT5wZW5kaW5nU3RhdHVzID0gJG1tVXNlckRhdGEtPnBlbmRpbmdfc3RhdHVzOwoJCQkJCSR0aGlzLT5pbXBvcnRlZEZsYWcgPSAkbW1Vc2VyRGF0YS0+aW1wb3J0ZWQ7CgkJCQkJJHRoaXMtPmJpbGxpbmdBZGRyZXNzID0gJG1tVXNlckRhdGEtPmJpbGxpbmdfYWRkcmVzczE7CgkJCQkJJHRoaXMtPmJpbGxpbmdDaXR5ID0gJG1tVXNlckRhdGEtPmJpbGxpbmdfY2l0eTsKCQkJCQkkdGhpcy0+YmlsbGluZ1N0YXRlID0gJG1tVXNlckRhdGEtPmJpbGxpbmdfc3RhdGU7CgkJCQkJJHRoaXMtPmJpbGxpbmdaaXAgPSAkbW1Vc2VyRGF0YS0+YmlsbGluZ19wb3N0YWxfY29kZTsKCQkJCQkkdGhpcy0+YmlsbGluZ0NvdW50cnkgPSAkbW1Vc2VyRGF0YS0+YmlsbGluZ19jb3VudHJ5OwoJCQkJCSR0aGlzLT5zaGlwcGluZ0FkZHJlc3MgPSAkbW1Vc2VyRGF0YS0+c2hpcHBpbmdfYWRkcmVzczE7CgkJCQkJJHRoaXMtPnNoaXBwaW5nQ2l0eSA9ICRtbVVzZXJEYXRhLT5zaGlwcGluZ19jaXR5OwoJCQkJCSR0aGlzLT5zaGlwcGluZ1N0YXRlID0gJG1tVXNlckRhdGEtPnNoaXBwaW5nX3N0YXRlOwoJCQkJCSR0aGlzLT5zaGlwcGluZ1ppcCA9ICRtbVVzZXJEYXRhLT5zaGlwcGluZ19wb3N0YWxfY29kZTsKCQkJCQkkdGhpcy0+c2hpcHBpbmdDb3VudHJ5ID0gJG1tVXNlckRhdGEtPnNoaXBwaW5nX2NvdW50cnk7CgkJCQkJJHRoaXMtPmxhc3RMb2dpbkRhdGUgPSAkbW1Vc2VyRGF0YS0+bGFzdF9sb2dpbl9kYXRlOwoJCQkJCSR0aGlzLT5kYXlzQ2FsY01ldGhvZCA9ICRtbVVzZXJEYXRhLT5kYXlzX2NhbGNfbWV0aG9kOwoJCQkJCQoJCQkJCS8vIFRoaXMgaXMgYSBmYWlsc2FmZSBpbiBjYXNlIHRoZSBkYXlzIGNhbGMgbWV0aG9kIGlzbid0IHNldC4gVGhpcyBjYW4gaGFwcGVuCgkJCQkJLy8gd2l0aCBtaWdyYXRlZCBhY2NvdW50cyBmcm9tIE1NIDEueCB0byBNTSAyLngKCQkJCQlpZihlbXB0eSgkdGhpcy0+ZGF5c0NhbGNNZXRob2QpKQoJCQkJCXsKCQkJCQkJJHRoaXMtPmRheXNDYWxjTWV0aG9kID0gTU1fRGF5c0NhbGN1bGF0aW9uVHlwZXM6OiRKT0lOX0RBVEU7CgkJCQkJfQoJCQkJCQoJCQkJCSR0aGlzLT5kYXlzQ2FsY1ZhbHVlID0gJG1tVXNlckRhdGEtPmRheXNfY2FsY192YWx1ZTsKCQkJCQkkdGhpcy0+c3RhdHVzTWVzc2FnZSA9ICRtbVVzZXJEYXRhLT5zdGF0dXNfbWVzc2FnZTsKCQkJCQkkdGhpcy0+YmVjYW1lQWN0aXZlRGF0ZSA9ICRtbVVzZXJEYXRhLT5iZWNhbWVfYWN0aXZlOwoJCQkJCSR0aGlzLT53ZWxjb21lRW1haWxTZW50RGF0ZSA9ICRtbVVzZXJEYXRhLT53ZWxjb21lX2VtYWlsX3NlbnQ7CgkJCQkJJHRoaXMtPmxhc3RVcGRhdGVkRGF0ZSA9ICRtbVVzZXJEYXRhLT5sYXN0X3VwZGF0ZWQ7CgkJCQkJJHRoaXMtPnN0YXR1c1VwZGF0ZWREYXRlID0gJG1tVXNlckRhdGEtPnN0YXR1c191cGRhdGVkOwoJCQkJCSR0aGlzLT5leHBpcmF0aW9uRGF0ZSA9ICRtbVVzZXJEYXRhLT5leHBpcmF0aW9uX2RhdGU7CgkJCQkJJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGUgPSAkbW1Vc2VyRGF0YS0+Y2FuY2VsbGF0aW9uX2RhdGU7CgkJCQkJJHRoaXMtPnN1YnNjcmliZWRMaXN0SWQgPSAoaXNzZXQoJG1tVXNlckRhdGEtPnN1YnNjcmliZWRfbGlzdF9pZCkpID8gJG1tVXNlckRhdGEtPnN1YnNjcmliZWRfbGlzdF9pZCA6ICIiOwoJCQkJCSR0aGlzLT5zdWJzY3JpYmVkUHJvdmlkZXJJZCA9IChpc3NldCgkbW1Vc2VyRGF0YS0+c3Vic2NyaWJlZF9wcm92aWRlcl9pZCkpID8gJG1tVXNlckRhdGEtPnN1YnNjcmliZWRfcHJvdmlkZXJfaWQgOiAiIjsKCQkJCQkkdGhpcy0+bWVtYmVyc2hpcExldmVsQ2hhbmdlZEZsYWcgPSBmYWxzZTsJCgkJCQkJJHRoaXMtPmZvcmdvdFBhc3N3b3JkSGFzaCA9ICR0aGlzLT5sYXN0Rm9yZ290UGFzc3dvcmRIYXNoID0gJHdwVXNlci0+dXNlcl9hY3RpdmF0aW9uX2tleTsKCQkJCQkKCQkJCQkkdGhpcy0+b3JpZ2luQWZmaWxpYXRlSWQgPSAkbW1Vc2VyRGF0YS0+b3JpZ2luX2FmZmlsaWF0ZV9pZDsKCQkJCQkkdGhpcy0+b3JpZ2luU3ViYWZmaWxpYXRlSWQgPSAkbW1Vc2VyRGF0YS0+b3JpZ2luX3N1YmFmZmlsaWF0ZV9pZDsKCQkJCQkkdGhpcy0+Zm9yZ290dGVuRmxhZyA9ICRtbVVzZXJEYXRhLT5mb3Jnb3R0ZW47CgkJCQl9CgkJCQkKCQkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQkJfQoJCQljYXRjaCAoRXhjZXB0aW9uICRleCkgewoJCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0RGF0YSgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vIGNoZWNrIHRvIG1ha2Ugc3VyZSBlbWFpbCBpcyBzZXQKCQlpZigoaXNzZXQoJHRoaXMtPmVtYWlsKSAmJiAhZW1wdHkoJHRoaXMtPmVtYWlsKSkpCgkJewoJCQkvLyBpZiB1c2VybmFtZSBpcyBub3Qgc2V0IHRoZW4gc2V0IHVzZXJuYW1lIHRvIGVtYWlsCgkJCWlmKCFpc3NldCgkdGhpcy0+dXNlcm5hbWUpIHx8IGVtcHR5KCR0aGlzLT51c2VybmFtZSkpCgkJCXsKCQkJCSR0aGlzLT51c2VybmFtZSA9ICR0aGlzLT5lbWFpbDsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIG9yIHVwZGF0ZSBtZW1iZXIuIEVtYWlsIGlzIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvLyBjaGVjayBpZiB0aGlzIGNvbW1pdCBzaG91bGQgdXBkYXRlIGEgdXNlciBvZiBwZW5kaW5nL2Vycm9yIHN0YXR1cwoJCSRpc1BlbmRpbmdVc2VyID0gJHRoaXMtPmlzUGVuZGluZ1VzZXIoKTsKCQkKCQkvLyBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhbiBpbnNlcnQgb3IgYW4gdXBkYXRlCgkJJGlzVXBkYXRlID0gZmFsc2U7CgkJaWYoaXNzZXQoJHRoaXMtPmlkKSAmJiAhZW1wdHkoJHRoaXMtPmlkKSkKCQl7CgkJCS8vIGRvdWJsZSBjb25maXJtIHRoYXQgdGhpcyBpcyBhbiB1cGRhdGUgLS0gbmVlZCB0byBkbyB0aGlzIGluIGNhc2UgdGhlIFdvcmRQcmVzcyB1c2VyIGFscmVhZHkgZXhpc3RzCgkJCS8vIGJ1dCB0aGUgTU0gdXNlciBkb2Vzbid0CgkJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1VTRVJfREFUQS4iIFdIRVJFIHdwX3VzZXJfaWQ9J3skdGhpcy0+aWR9JyBMSU1JVCAxOyI7CgkJCSRtbVVzZXJEYXRhID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQoJCQlpZigkbW1Vc2VyRGF0YSAmJiBpc3NldCgkbW1Vc2VyRGF0YS0+d3BfdXNlcl9pZCkpCgkJCXsKCQkJCSRpc1VwZGF0ZSA9IHRydWU7CgkJCX0KCQl9CgkJCgkJLy8gaWYgdGhpcyBpcyBub3QgYW4gdXBkYXRlIGZvciBhbiBleGlzdGluZyB1c2VyIG9yIGlmIGl0IGlzIGFuZCB0aGV5J3JlIGNoYW5naW5nIHRoZWlyIGVtYWlsLCAKCQkvLyBjaGVjayBpZiB0aGUgZW1haWwgaXMgYWxyZWFkeSBpbiB1c2UgCgkJJGlzTWlncmF0aW9uID0gZmFsc2U7CgkJJGV4aXN0aW5nV1BVc2VySWQgPSBlbWFpbF9leGlzdHMoJHRoaXMtPmVtYWlsKTsKCQlpZigoISRpc1VwZGF0ZSB8fCAoIWVtcHR5KCR0aGlzLT5sYXN0RW1haWwpICYmIChzdHJ0b2xvd2VyKCR0aGlzLT5sYXN0RW1haWwpICE9IHN0cnRvbG93ZXIoJHRoaXMtPmVtYWlsKSkpKSAmJiAkZXhpc3RpbmdXUFVzZXJJZCkKCQl7CgkJCS8vIG1ha2Ugc3VyZSBleGlzdGluZyBXb3JkUHJlc3MgdXNlciBpcyBub3QgYW4gYWRtaW5pc3RyYXRvcgoJCQkkd3BVc2VyRGF0YSA9IGdldF91c2VyZGF0YSgkZXhpc3RpbmdXUFVzZXJJZCk7CgkJCQoJCQlpZigkd3BVc2VyRGF0YSkKCQkJewoJCQkJJHdwVXNlclJvbGVzID0gaW1wbG9kZSgnLCAnLCAkd3BVc2VyRGF0YS0+cm9sZXMpOwkKCQkJCQoJCQkJaWYoKCR3cFVzZXJSb2xlcyA9PSBNTV9Sb2xlOjokUk9MRV9BRE1JTklTVFJBVE9SKSB8fCAoaXNfYXJyYXkoJHdwVXNlclJvbGVzKSAmJiBpbl9hcnJheShNTV9Sb2xlOjokUk9MRV9BRE1JTklTVFJBVE9SLCAkd3BVc2VyUm9sZXMpKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDYW5ub3QgY3JlYXRlIG1lbWJlci4gJyIuJHRoaXMtPmVtYWlsLiInIGlzIGFzc29jaWF0ZWQgd2l0aCBhIFdvcmRQcmVzcyBhZG1pbmlzdHJhdG9yLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCQoJCQlpZigkdGhpcy0+Y3JlYXRlTU1Vc2VyRm9yRXhpc3RpbmdXUFVzZXIoJGV4aXN0aW5nV1BVc2VySWQpID09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJBIG1lbWJlciB3aXRoIGVtYWlsICciLiR0aGlzLT5lbWFpbC4iJyBhbHJlYWR5IGV4aXN0cy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkdGhpcy0+aWQgPSAkZXhpc3RpbmdXUFVzZXJJZDsKCQkJCSRpc01pZ3JhdGlvbiA9IHRydWU7CgkJCX0KCQl9CgkJCgkJLy8gaWYgdGhpcyBpcyBub3QgYW4gdXBkYXRlIGZvciBhbiBleGlzdGluZyB1c2VyIG9yIGlmIGl0IGlzIGFuZCB0aGV5J3JlIGNoYW5naW5nIHRoZWlyIHVzZXJuYW1lLAoJCS8vIGNoZWNrIGlmIHRoZSB1c2VybmFtZSBpcyBhbHJlYWR5IGluIHVzZQoJCSRleGlzdGluZ1dQVXNlcklkID0gdXNlcm5hbWVfZXhpc3RzKCR0aGlzLT51c2VybmFtZSk7CgkJaWYoKCghJGlzTWlncmF0aW9uICYmICEkaXNVcGRhdGUpIHx8ICghZW1wdHkoJHRoaXMtPmxhc3RVc2VybmFtZSkgJiYgKCR0aGlzLT5sYXN0VXNlcm5hbWUgIT0gJHRoaXMtPnVzZXJuYW1lKSkpICYmICRleGlzdGluZ1dQVXNlcklkKQoJCXsKCQkJLy8gbWFrZSBzdXJlIGV4aXN0aW5nIFdvcmRQcmVzcyB1c2VyIGlzIG5vdCBhbiBhZG1pbmlzdHJhdG9yCgkJCSR3cFVzZXJEYXRhID0gZ2V0X3VzZXJkYXRhKCRleGlzdGluZ1dQVXNlcklkKTsKCQkJCQoJCQlpZigkd3BVc2VyRGF0YSkKCQkJewoJCQkJJHdwVXNlclJvbGVzID0gaW1wbG9kZSgnLCAnLCAkd3BVc2VyRGF0YS0+cm9sZXMpOwoJCQkKCQkJCWlmKCgkd3BVc2VyUm9sZXMgPT0gTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUikgfHwgKGlzX2FycmF5KCR3cFVzZXJSb2xlcykgJiYgaW5fYXJyYXkoTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUiwgJHdwVXNlclJvbGVzKSkpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ2Fubm90IGNyZWF0ZSBtZW1iZXIuICciLiR0aGlzLT51c2VybmFtZS4iJyBpcyBhc3NvY2lhdGVkIHdpdGggYSBXb3JkUHJlc3MgYWRtaW5pc3RyYXRvci4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCQkKCQkJaWYoJHRoaXMtPmNyZWF0ZU1NVXNlckZvckV4aXN0aW5nV1BVc2VyKCRleGlzdGluZ1dQVXNlcklkKSA9PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQSBtZW1iZXIgd2l0aCB1c2VybmFtZSAnIi4kdGhpcy0+dXNlcm5hbWUuIicgYWxyZWFkeSBleGlzdHMuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJHRoaXMtPmlkID0gJGV4aXN0aW5nV1BVc2VySWQ7CgkJCQkkaXNNaWdyYXRpb24gPSB0cnVlOwoJCQl9CgkJfQoJCQoJCS8vIG1ha2Ugc3VyZSB0aGF0IHRoZSBzdGF0dXMgb2YgYW4gYWN0aXZlIHVzZXIgaXMgbm90IGNoYW5nZWQgdG8gcGVuZGluZy9lcnJvciBzdGF0dXMKCQlpZigkaXNVcGRhdGUgJiYgISRpc1BlbmRpbmdVc2VyICYmICgkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTiB8fCAkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JEVSUk9SKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCBjaGFuZ2Ugc3RhdHVzIG9mIGFuIGFjdGl2ZSBtZW1iZXIgdG8gIi5zdHJ0b2xvd2VyKCR0aGlzLT5nZXRTdGF0dXNOYW1lKCkpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy8gZGV0ZXJtaW5lIGlmIHRoaXMgbWVtYmVyIGlzIGJlY29taW5nIGFjdGl2ZSBmb3IgdGhlIGZpcnN0IHRpbWUKCQkkYmVjYW1lQWN0aXZlID0gZmFsc2U7CgkJaWYoJHRoaXMtPnN0YXR1cyA9PSBNTV9TdGF0dXM6OiRBQ1RJVkUgJiYgZW1wdHkoJHRoaXMtPmJlY2FtZUFjdGl2ZURhdGUpICYmICFlbXB0eSgkdGhpcy0+bWVtYmVyc2hpcElkKSkKCQl7CgkJCSRiZWNhbWVBY3RpdmUgPSB0cnVlOwoJCQkkdGhpcy0+YmVjYW1lQWN0aXZlRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCX0KCQkKCQkvLyBjaGVjayBpZiBtZW1iZXJzaGlwIGxldmVsIGlzIHZhbGlkIGFuZCBhY3RpdmUKCQlpZighJGlzVXBkYXRlIHx8ICR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxDaGFuZ2VkRmxhZykKCQl7CgkJCSRtZW1iZXJzaGlwID0gJHRoaXMtPmdldE1lbWJlcnNoaXBMZXZlbCgpOwoJCQlpZigkbWVtYmVyc2hpcC0+aXNWYWxpZCgpICYmICEkbWVtYmVyc2hpcC0+aXNBY3RpdmUoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTWVtYmVyc2hpcCBsZXZlbCAneyRtZW1iZXJzaGlwLT5nZXROYW1lKCl9JyBpcyBub3QgYWN0aXZlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCQoJCU1NX1RyYW5zYWN0aW9uOjpiZWdpbigpOwoJCQoJCWlmKCRpc1VwZGF0ZSB8fCAkaXNNaWdyYXRpb24pCgkJewoJCQkvLyBXUCA0LjMgY2hhbmdlcy9jaGVja3MKCQkJc3dpdGNoKHRydWUpCgkJCXsKCQkJCS8vIGlmIGEgcGFzc3dvcmQgaGFzIG5vdCBiZWVuIGVudGVyZWQsIG5vIG5lZWQgdG8gc2VuZCB0aGUgcGFzc3dvcmQgY2hhbmdlIGVtYWlsCgkJCQljYXNlIGlzX251bGwoJHRoaXMtPmdldFBhc3N3b3JkKCkpOgoJCQkJCWFkZF9maWx0ZXIoJ3NlbmRfcGFzc3dvcmRfY2hhbmdlX2VtYWlsJywgJ19fcmV0dXJuX2ZhbHNlJyk7CgkJCQkJYnJlYWs7CgkJCQkKCQkJCS8vIGlmIGEgcGFzc3dvcmQgV0FTIHByb3ZpZGVkLCBsZXQncyBtYWtlIHN1cmUgaXQncyBkaWZmZXJlbnQgdGhhbiB0aGUgb25lIHdlIGFscmVhZHkgCgkJCQkvLyBoYXZlIG9uIGZpbGUuIElmIHNvLCBzZW5kIHRoZSBwYXNzd29yZCBjaGFuZ2UgZW1haWwsIGlmIG5vdCwgZG8gbm90IHNlbmQgaXQKCQkJCWRlZmF1bHQ6CgkJCQkJJHdwVXNlciA9IG5ldyBXUF9Vc2VyKCR0aGlzLT5nZXRJZCgpKTsKCQkJCQlpZih3cF9jaGVja19wYXNzd29yZCggJHRoaXMtPmdldFBhc3N3b3JkKCksICR3cFVzZXItPmRhdGEtPnVzZXJfcGFzcywgJHdwVXNlci0+SUQpKQoJCQkJCXsKCQkJCQkJYWRkX2ZpbHRlcignc2VuZF9wYXNzd29yZF9jaGFuZ2VfZW1haWwnLCAnX19yZXR1cm5fZmFsc2UnKTsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCX0KCQkJIAoJCQkvLyB1cGRhdGUgV29yZFByZXNzIHVzZXIgCgkJCSRyZXN1bHQgPSB3cF91cGRhdGVfdXNlcigkdGhpcy0+cHJlcGFyZVdQVXNlckRhdGEoJGlzVXBkYXRlKSk7IAoJCQkKCQkJaWYoaXNfd3BfZXJyb3IoJHJlc3VsdCkpCgkJCXsKCQkJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzdWx0LT5nZXRfZXJyb3JfbWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJLy8gV29yZFByZXNzIGRvZXNuJ3QgYWxsb3cgY2VydGFpbiBmaWVsZHMgdG8gYmUgdXBkYXRlZCB2aWEgd3BfdWRhdGVfdXNlcigpIChFeC4gdXNlcl9sb2dpbiBvciB1c2VyX2FjdGl2YXRpb25fa2V5KQoJCQkvLyBzbyB3ZSBuZWVkIHRvIGRvIGl0IG1hbnVhbGx5CgkJCSRhZGRpdGlvbmFsVXBkYXRlcyA9IGFycmF5KCk7CgkJCXN3aXRjaCh0cnVlKQoJCQl7CiAgCQkJY2FzZSAoIWVtcHR5KCR0aGlzLT5sYXN0VXNlcm5hbWUpICYmICgkdGhpcy0+dXNlcm5hbWUgIT0gJHRoaXMtPmxhc3RVc2VybmFtZSkpOgogIAkJCSAgJGFkZGl0aW9uYWxVcGRhdGVzWyd1c2VyX2xvZ2luJ10gPSAkdGhpcy0+dXNlcm5hbWU7CiAgCQkJICBicmVhazsKICAJCQkgIAogIAkJCSBjYXNlICgkdGhpcy0+Zm9yZ290UGFzc3dvcmRIYXNoICE9ICR0aGlzLT5sYXN0Rm9yZ290UGFzc3dvcmRIYXNoKToKICAJCQkgICRhZGRpdGlvbmFsVXBkYXRlc1sndXNlcl9hY3RpdmF0aW9uX2tleSddID0gJHRoaXMtPmZvcmdvdFBhc3N3b3JkSGFzaDsKICAJCQkgIGJyZWFrOwoJCQl9CgkJCQoJCQlpZihjb3VudCgkYWRkaXRpb25hbFVwZGF0ZXMpKQoJCQl7CiAgCQkJJHdoZXJlQ2xhdXNlID0gYXJyYXkoIklEIiA9PiAkdGhpcy0+aWQpOwoJCQkJJHJlc3VsdCA9ICR3cGRiLT51cGRhdGUoJHdwZGItPnVzZXJzLCAkYWRkaXRpb25hbFVwZGF0ZXMsICR3aGVyZUNsYXVzZSk7CgkJCX0KCQkJCgkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQl7CgkJCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkJCQoJCQkJJG1tRmllbGRzID0gYXJyYXkoKTsKCQkJCQoJCQkJaWYoaXNzZXQoJGFkZGl0aW9uYWxVcGRhdGVzWyd1c2VyX2xvZ2luJ10pKQoJCQkJewogIAkJCQkkbW1GaWVsZHNbXSA9ICJ1c2VybmFtZSI7CgkJCQl9CgkJCQkKCQkJCWlmKGlzc2V0KCRhZGRpdGlvbmFsVXBkYXRlc1sndXNlcl9hY3RpdmF0aW9uX2tleSddKSkKCQkJCXsKICAJCQkJJG1tRmllbGRzW10gPSAicGFzc3dvcmQgcmVzZXQgYWN0aXZhdGlvbiBrZXkiOwoJCQkJfQoJCQkJCgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlICciIC4gaW1wbG9kZSgiJyBhbmQgJyIsICRtbUZpZWxkcyksIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCQoJCQkvLyB1cGRhdGUgTU0gdXNlciBkYXRhCgkJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCJ3cF91c2VyX2lkIiA9PiAkdGhpcy0+aWQpOwoJCQkkcmVzdWx0ID0gJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9VU0VSX0RBVEEsICR0aGlzLT5wcmVwYXJlTU1Vc2VyRGF0YSgpLCAkd2hlcmVDbGF1c2UpOwoJCQkKCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCXsKCQkJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBtZW1iZXI6ICIuJHdwZGItPmxhc3RfZXJyb3IsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCS8vIGluc2VydCBXb3JkUHJlc3MgdXNlcgoJCQlpZihpc19udWxsKCR0aGlzLT5nZXRQYXNzd29yZCgpKSkKCQkJewoJCQkJJHRoaXMtPnNldFBhc3N3b3JkKE1NX1V0aWxzOjpjcmVhdGVSYW5kb21TdHJpbmcoKSk7CgkJCX0KCQkJCgkJCS8vIFdQIDQuMyBjaGFuZ2U6IHNpbmNlIHdlJ3JlIGNyZWF0aW5nIGEgbmV3IHVzZXIsIG5vIG5lZWQgdG8gc2VuZCB0aGUgcGFzc3dvcmQgY2hhbmdlIGVtYWlsCgkJCWFkZF9maWx0ZXIoJ3NlbmRfcGFzc3dvcmRfY2hhbmdlX2VtYWlsJywgJ19fcmV0dXJuX2ZhbHNlJyk7CgkJCQoJCQkkcmVzdWx0ID0gd3BfaW5zZXJ0X3VzZXIoJHRoaXMtPnByZXBhcmVXUFVzZXJEYXRhKCRpc1VwZGF0ZSkpOwoJCQkKCQkJaWYoaXNfd3BfZXJyb3IoJHJlc3VsdCkpCgkJCXsKCQkJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzdWx0LT5nZXRfZXJyb3JfbWVzc2FnZSgpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJJHRoaXMtPmlkID0gJHJlc3VsdDsKCQkJCgkJCS8vIGluc2VydCBNTSB1c2VyIGRhdGEKCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfVVNFUl9EQVRBLCAkdGhpcy0+cHJlcGFyZU1NVXNlckRhdGEoKSk7CgkJCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJewoJCQkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIG1lbWJlcjogIi4kd3BkYi0+bGFzdF9lcnJvciwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJTU1fVHJhbnNhY3Rpb246OmNvbW1pdCgpOwoJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQkKCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xBU1RfVVNFUl9JRCwgJHRoaXMtPmlkKTsKCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0NVUlJfVVNFUl9JRCwgJHRoaXMtPmlkKTsKCQkKCQkvLyBzZW5kIHdlbGNvbWUgZW1haWwgaWYgdXNlciBqdXN0IGJlY2FtZSBhY3RpdmUgb3IgaWYgaXQgaGFzbid0IGJlZW4gc2VudAoJCWlmKCRiZWNhbWVBY3RpdmUgJiYgZW1wdHkoJHRoaXMtPndlbGNvbWVFbWFpbFNlbnREYXRlKSAmJiAkdGhpcy0+ZG9TZW5kV2VsY29tZUVtYWlsKCkpCgkJewoJCQkkdGhpcy0+c2VuZFdlbGNvbWVFbWFpbCgpOwoJCX0KCgkJLy8gV2hlbiBhIG5ldyBtb2RpZmljYXRpb24gaXMgbWFkZSAob3IgbmV3IHVzZXIpIHN1YnNlcXVlbnQKCQkvLyByZWZlcmVuY2VzIHRvIG5ldyBVc2VyKGlkKSB1c2Ugb2xkIGRhdGEgYXMgdGhlIFdQX1VzZXI6OmdldF9kYXRhX2J5CgkJLy8gdXNlcyB3cF9jYWNoZSBtZWNoYW5pc20uICBUaGlzIGZhbHNpZmllcyB0aGUgY2FjaGUgZWxlbWVudCB3aGljaAoJCS8vIHdpbGwgZW5mb3JjZSBhIG5ldyBsb29rIHVwLgoJCWlmKCRpc1VwZGF0ZSkKCQl7CgkJCXdwX2NhY2hlX3NldCgkdGhpcy0+aWQsZmFsc2UsInVzZXJzIik7CgkJfQoJCQoJCS8vIGRpc3BhdGNoIE1lbWJlck1vdXNlIGV2ZW50cwoJCWlmKCRiZWNhbWVBY3RpdmUpCgkJewoJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRNRU1CRVJfQURELCBNTV9FdmVudDo6cGFja2FnZU1lbWJlckRhdGEoJHRoaXMtPmdldElkKCkpKTsKCQl9CgkJZWxzZSBpZigkdGhpcy0+c3RhdHVzICE9IE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTiAmJiAkdGhpcy0+c3RhdHVzICE9IE1NX1N0YXR1czo6JEVSUk9SKQoJCXsKCQkJJGFjY3RJbmZvQ2hhbmdlcyA9ICR0aGlzLT5nZXRBY2N0SW5mb0NoYW5nZXMoKTsKCQkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0TWVtYmVyc2hpcElkKSAmJiAoJHRoaXMtPm1lbWJlcnNoaXBJZCAhPSAkdGhpcy0+bGFzdE1lbWJlcnNoaXBJZCkpCgkJCXsKCQkJCWRvX2FjdGlvbihNTV9FdmVudDo6JE1FTUJFUl9NRU1CRVJTSElQX0NIQU5HRSwgTU1fRXZlbnQ6OnBhY2thZ2VNZW1iZXJEYXRhKCR0aGlzLT5nZXRJZCgpLCBhcnJheSgibWVtYmVyc2hpcF9uYW1lIj0+JHRoaXMtPmxhc3RNZW1iZXJzaGlwTmFtZSwibWVtYmVyc2hpcF9pZCI9PiR0aGlzLT5sYXN0TWVtYmVyc2hpcElkKSkpOwoJCQl9CgkJCWVsc2UgaWYoIWVtcHR5KCR0aGlzLT5sYXN0U3RhdHVzKSAmJiAoJHRoaXMtPnN0YXR1cyAhPSAkdGhpcy0+bGFzdFN0YXR1cykpCgkJCXsKCQkJCWRvX2FjdGlvbihNTV9FdmVudDo6JE1FTUJFUl9TVEFUVVNfQ0hBTkdFLCBNTV9FdmVudDo6cGFja2FnZU1lbWJlckRhdGEoJHRoaXMtPmdldElkKCksIGFycmF5KCJzdGF0dXNfbmFtZSI9PiR0aGlzLT5sYXN0U3RhdHVzTmFtZSwgInN0YXR1c19pZCI9PiR0aGlzLT5sYXN0U3RhdHVzKSkpOwoJCQl9IGVsc2UgaWYoY291bnQoJGFjY3RJbmZvQ2hhbmdlcykgPiAwKQoJCQl7CgkJCQlkb19hY3Rpb24oTU1fRXZlbnQ6OiRNRU1CRVJfQUNDT1VOVF9VUERBVEUsIE1NX0V2ZW50OjpwYWNrYWdlTWVtYmVyRGF0YSgkdGhpcy0+Z2V0SWQoKSwgJGFjY3RJbmZvQ2hhbmdlcykpOwoJCQl9CgkJfQoJCQoJCS8vIGNsZWFyIGNvbXBhcmlzb24gdmFsdWVzCgkJJHRoaXMtPmxhc3RTdGF0dXMgPSAiIjsKCQkkdGhpcy0+bGFzdFN0YXR1c05hbWUgPSAiIjsKCQkkdGhpcy0+bGFzdE1lbWJlcnNoaXBOYW1lID0gIiI7CgkJJHRoaXMtPmxhc3RNZW1iZXJzaGlwSWQgPSAiIjsKCQkkdGhpcy0+bGFzdFVzZXJuYW1lID0gIiI7CgkJJHRoaXMtPm1lbWJlcnNoaXBMZXZlbENoYW5nZWRGbGFnID0gZmFsc2U7CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gc2V0IGFuZCBjb21taXQgdGhlIG1lbWJlciBzdGF0dXMgYW5kIHN0YXR1cyBtZXNzYWdlIGluIAoJICogb25lIG1ldGhvZC4gVGhpcyBpcyB1c2VkIGluc3RlYWQgb2YgY29tbWl0RGF0YSgpIGJlY2F1c2UgdGhlIHN0YXR1cyBvZiB0aGUgdXNlcgoJICogbWF5IG5lZWQgdG8gYmUgY2hhbmdlZCBleHBsaWNpdGx5IGJlY2F1c2UgdGhlIGNvbW1pdERhdGEoKSBtZXRob2QgaXMgZmFpbGluZy4gCgkgKiBJbiB0aGlzIGNhc2UgaXQgaXMgbmVjZXNzYXJ5IGp1c3QgdG8gY29tbWl0IHRoZSBzdGF0dXMgYW5kIHN0YXR1cyBtZXNzYWdlLgoJICovCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0U3RhdHVzT25seSgpCgl7CgkJaWYoJHRoaXMtPmlzVmFsaWQoKSkKCQl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJCgkJCSRtbVVzZXJEYXRhID0gYXJyYXkoKTsKCQkJJG1tVXNlckRhdGFbInN0YXR1cyJdID0gJHRoaXMtPnN0YXR1czsKCQkJJG1tVXNlckRhdGFbInN0YXR1c19tZXNzYWdlIl0gPSBzdHJpcF90YWdzKCR0aGlzLT5zdGF0dXNNZXNzYWdlKTsKCQkJJG1tVXNlckRhdGFbImxhc3RfdXBkYXRlZCJdID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCSRtbVVzZXJEYXRhWyJzdGF0dXNfdXBkYXRlZCJdID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCQoJCQkkd2hlcmVDbGF1c2UgPSBhcnJheSgid3BfdXNlcl9pZCIgPT4gJHRoaXMtPmlkKTsKCQkJJHJlc3VsdCA9ICR3cGRiLT51cGRhdGUoTU1fVEFCTEVfVVNFUl9EQVRBLCAkbW1Vc2VyRGF0YSwgJHdoZXJlQ2xhdXNlKTsKCQkJCgkJCWlmKCEkcmVzdWx0KQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIG1lbWJlcjogIi4kd3BkYi0+bGFzdF9lcnJvciwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJCS8vIGRpc3BhdGNoIE1lbWJlck1vdXNlIGV2ZW50CgkJCWlmKCgkdGhpcy0+c3RhdHVzICE9ICR0aGlzLT5sYXN0U3RhdHVzKSkKCQkJewoJCQkJZG9fYWN0aW9uKE1NX0V2ZW50OjokTUVNQkVSX1NUQVRVU19DSEFOR0UsIE1NX0V2ZW50OjpwYWNrYWdlTWVtYmVyRGF0YSgkdGhpcy0+Z2V0SWQoKSkpOwoJCQkJCgkJCQkvLyBjbGVhciBjb21wYXJpc29uIHZhbHVlCgkJCQkkdGhpcy0+bGFzdFN0YXR1cyA9ICIiOwoJCQkJJHRoaXMtPmxhc3RTdGF0dXNOYW1lID0gIiI7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGNvbW1pdCBtZW1iZXIgc3RhdHVzLiBJbnZhbGlkIHVzZXIuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gdXBkYXRlIGEgc2luZ2xlIGZpZWxkIGFzc29jaWF0ZWQgd2l0aCB0aGUgdXNlcgoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRmaWVsZE5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpZWxkIGluIHRoZSBkYXRhYmFzZSB0byB1cGRhdGUKCSAqIEBwYXJhbSBTdHJpbmcgJHZhbHVlIHRoZSB2YWx1ZSB0byBzZXQgaW4gdGhlIGZpZWxkCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZUZpZWxkKCRmaWVsZE5hbWUsICR2YWx1ZSkKCXsKCQlpZigkdGhpcy0+aXNWYWxpZCgpKQoJCXsKCQkJZ2xvYmFsICR3cGRiOwoJCQkKCQkJJG1tVXNlckRhdGEgPSBhcnJheSgpOwoJCQkkbW1Vc2VyRGF0YVskZmllbGROYW1lXSA9ICR2YWx1ZTsKCQkJCgkJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCJ3cF91c2VyX2lkIiA9PiAkdGhpcy0+aWQpOwoJCQkkcmVzdWx0ID0gJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9VU0VSX0RBVEEsICRtbVVzZXJEYXRhLCAkd2hlcmVDbGF1c2UpOwoJCQkKCQkJaWYoISRyZXN1bHQpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byB1cGRhdGUgbWVtYmVyOiAiLiR3cGRiLT5sYXN0X2Vycm9yLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gY29tbWl0IG1lbWJlciBzdGF0dXMuIEludmFsaWQgdXNlci4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkvKioKCSAqIFRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGlmIGEgV29yZFByZXNzIHVzZXIgZXhpc3RzIHdpdGggYSBzcGVjaWZpYyB1c2VybmFtZSBvciBlbWFpbC4KCSAqIFRoaXMgZnVuY3Rpb24gY2hlY2tzIHRvIHNlZSBpZiBhIE1NIHVzZXIgaXMgYXNzb2NpYXRlZCB3aXRoIHRoaXMgV29yZFByZXNzIHVzZXIgYW5kIGlmCgkgKiBpdCdzIG5vdCwgb25lIGlzIGNyZWF0ZWQuCgkgKiAKCSAqIEBwYXJhbSB1c2VySWQgdGhlIElEIG9mIHRoZSBleGlzdGluZyBXb3JkUHJlc3MgdXNlcgoJICogCgkgKiBAcmV0dXJuIEJvb2xlYW4gcmV0dXJucyB0cnVlIGlmIE1NIHVzZXIgd2FzIGNyZWF0ZWQgYW5kIGZhbHNlIGlmIGFuIE1NIHVzZXIgYWxyZWFkeSBleGlzdHMKCSAqLwoJcHJpdmF0ZSBmdW5jdGlvbiBjcmVhdGVNTVVzZXJGb3JFeGlzdGluZ1dQVXNlcigkdXNlcklkKQoJewoJCWlmKGlzX251bGwoJHVzZXJJZCkgfHwgJHVzZXJJZCA9PSBmYWxzZSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJZ2xvYmFsICR3cGRiOwoJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1VTRVJfREFUQS4iIFdIRVJFIHdwX3VzZXJfaWQ9J3skdXNlcklkfScgTElNSVQgMTsiOwoJCSRtbVVzZXJEYXRhID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoISRtbVVzZXJEYXRhKQoJCXsKCQkJJG1tVXNlckRhdGEgPSBhcnJheSgpOwoJCQkkbW1Vc2VyRGF0YVsid3BfdXNlcl9pZCJdID0gJHVzZXJJZDsKCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfVVNFUl9EQVRBLCAkbW1Vc2VyRGF0YSk7CgkJCQoJCQlpZigkcmVzdWx0ICE9PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgkJZWxzZSBpZihpbnR2YWwoJG1tVXNlckRhdGEtPm1lbWJlcnNoaXBfbGV2ZWxfaWQpID09IDAgJiYgaW50dmFsKCRtbVVzZXJEYXRhLT5zdGF0dXMpID09IDApCgkJewoJCQkvLyB0aGlzIGluZGljYXRlcyB0aGF0IHRoZSB1c2VyIGRhdGEgcm93IGhhcyBiZWVuIGNyZWF0ZWQgYnV0IG5ldmVyIHNldAoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGdldEFjY3RJbmZvQ2hhbmdlcygpCgl7CgkJJGFjY3RJbmZvQ2hhbmdlcyA9IGFycmF5KCk7CgkJCgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0RGF5c0NhbGNNZXRob2QpICYmICR0aGlzLT5kYXlzQ2FsY01ldGhvZCAhPSAkdGhpcy0+bGFzdERheXNDYWxjTWV0aG9kKSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbImRheXNfY2FsY19tZXRob2QiXSA9ICR0aGlzLT5sYXN0RGF5c0NhbGNNZXRob2Q7CgkJfQoJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdERheXNDYWxjVmFsdWUpICYmICR0aGlzLT5kYXlzQ2FsY1ZhbHVlICE9ICR0aGlzLT5sYXN0RGF5c0NhbGNWYWx1ZSkgewoJCQkkYWNjdEluZm9DaGFuZ2VzWyJkYXlzX2NhbGNfdmFsdWUiXSA9ICR0aGlzLT5sYXN0RGF5c0NhbGNWYWx1ZTsKCQl9CgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0Rmlyc3ROYW1lKSAmJiAkdGhpcy0+Zmlyc3ROYW1lICE9ICR0aGlzLT5sYXN0Rmlyc3ROYW1lKSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbImZpcnN0X25hbWUiXSA9ICR0aGlzLT5sYXN0Rmlyc3ROYW1lOwoJCX0KCQlpZighZW1wdHkoJHRoaXMtPmxhc3RMYXN0TmFtZSkgJiYgJHRoaXMtPmxhc3ROYW1lICE9ICR0aGlzLT5sYXN0TGFzdE5hbWUpIHsKCQkJJGFjY3RJbmZvQ2hhbmdlc1sibGFzdF9uYW1lIl0gPSAkdGhpcy0+bGFzdExhc3ROYW1lOwoJCX0KCQlpZighZW1wdHkoJHRoaXMtPmxhc3RFbWFpbCkgJiYgJHRoaXMtPmVtYWlsICE9ICR0aGlzLT5sYXN0RW1haWwpIHsKCQkJJGFjY3RJbmZvQ2hhbmdlc1siZW1haWwiXSA9ICR0aGlzLT5sYXN0RW1haWw7CgkJfQoJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdFVzZXJuYW1lKSAmJiAkdGhpcy0+dXNlcm5hbWUgIT0gJHRoaXMtPmxhc3RVc2VybmFtZSkgewoJCQkkYWNjdEluZm9DaGFuZ2VzWyJ1c2VybmFtZSJdID0gJHRoaXMtPmxhc3RVc2VybmFtZTsKCQl9CgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0UGhvbmUpICYmICR0aGlzLT5waG9uZSAhPSAkdGhpcy0+bGFzdFBob25lKSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbInBob25lIl0gPSAkdGhpcy0+bGFzdFBob25lOwoJCX0KCQlpZighZW1wdHkoJHRoaXMtPmxhc3ROb3RlcykgJiYgJHRoaXMtPm5vdGVzICE9ICR0aGlzLT5sYXN0Tm90ZXMpIHsKCQkJJGFjY3RJbmZvQ2hhbmdlc1sibm90ZXMiXSA9ICR0aGlzLT5sYXN0Tm90ZXM7CgkJfQoJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdEJpbGxpbmdBZGRyZXNzKSAmJiAkdGhpcy0+YmlsbGluZ0FkZHJlc3MgIT0gJHRoaXMtPmxhc3RCaWxsaW5nQWRkcmVzcykgewoJCQkkYWNjdEluZm9DaGFuZ2VzWyJiaWxsaW5nX2FkZHJlc3MiXSA9ICR0aGlzLT5sYXN0QmlsbGluZ0FkZHJlc3M7CgkJfQoJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdEJpbGxpbmdDaXR5KSAmJiAkdGhpcy0+YmlsbGluZ0NpdHkgIT0gJHRoaXMtPmxhc3RCaWxsaW5nQ2l0eSkgewoJCQkkYWNjdEluZm9DaGFuZ2VzWyJiaWxsaW5nX2NpdHkiXSA9ICR0aGlzLT5sYXN0QmlsbGluZ0NpdHk7CgkJfQoJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdEJpbGxpbmdTdGF0ZSkgJiYgJHRoaXMtPmJpbGxpbmdTdGF0ZSAhPSAkdGhpcy0+bGFzdEJpbGxpbmdTdGF0ZSkgewoJCQkkYWNjdEluZm9DaGFuZ2VzWyJiaWxsaW5nX3N0YXRlIl0gPSAkdGhpcy0+bGFzdEJpbGxpbmdTdGF0ZTsKCQl9CgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0QmlsbGluZ1ppcCkgJiYgJHRoaXMtPmJpbGxpbmdaaXAgIT0gJHRoaXMtPmxhc3RCaWxsaW5nWmlwKSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbImJpbGxpbmdfemlwX2NvZGUiXSA9ICR0aGlzLT5sYXN0QmlsbGluZ1ppcDsKCQl9CgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0QmlsbGluZ0NvdW50cnkpICYmICR0aGlzLT5iaWxsaW5nQ291bnRyeSAhPSAkdGhpcy0+bGFzdEJpbGxpbmdDb3VudHJ5KSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbImJpbGxpbmdfY291bnRyeSJdID0gJHRoaXMtPmxhc3RCaWxsaW5nQ291bnRyeTsKCQl9CgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0U2hpcHBpbmdBZGRyZXNzKSAmJiAkdGhpcy0+c2hpcHBpbmdBZGRyZXNzICE9ICR0aGlzLT5sYXN0U2hpcHBpbmdBZGRyZXNzKSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbInNoaXBwaW5nX2FkZHJlc3MiXSA9ICR0aGlzLT5sYXN0U2hpcHBpbmdBZGRyZXNzOwoJCX0KCQlpZighZW1wdHkoJHRoaXMtPmxhc3RTaGlwcGluZ0NpdHkpICYmICR0aGlzLT5zaGlwcGluZ0NpdHkgIT0gJHRoaXMtPmxhc3RTaGlwcGluZ0NpdHkpIHsKCQkJJGFjY3RJbmZvQ2hhbmdlc1sic2hpcHBpbmdfY2l0eSJdID0gJHRoaXMtPmxhc3RTaGlwcGluZ0NpdHk7CgkJfQoJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdFNoaXBwaW5nU3RhdGUpICYmICR0aGlzLT5zaGlwcGluZ1N0YXRlICE9ICR0aGlzLT5sYXN0U2hpcHBpbmdTdGF0ZSkgewoJCQkkYWNjdEluZm9DaGFuZ2VzWyJzaGlwcGluZ19zdGF0ZSJdID0gJHRoaXMtPmxhc3RTaGlwcGluZ1N0YXRlOwoJCX0KCQlpZighZW1wdHkoJHRoaXMtPmxhc3RTaGlwcGluZ1ppcCkgJiYgJHRoaXMtPnNoaXBwaW5nWmlwICE9ICR0aGlzLT5sYXN0U2hpcHBpbmdaaXApIHsKCQkJJGFjY3RJbmZvQ2hhbmdlc1sic2hpcHBpbmdfemlwX2NvZGUiXSA9ICR0aGlzLT5sYXN0U2hpcHBpbmdaaXA7CgkJfQoJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdFNoaXBwaW5nQ291bnRyeSkgJiYgJHRoaXMtPnNoaXBwaW5nQ291bnRyeSAhPSAkdGhpcy0+bGFzdFNoaXBwaW5nQ291bnRyeSkgewoJCQkkYWNjdEluZm9DaGFuZ2VzWyJzaGlwcGluZ19jb3VudHJ5Il0gPSAkdGhpcy0+bGFzdFNoaXBwaW5nQ291bnRyeTsKCQl9CgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0RXhwaXJhdGlvbkRhdGUpICYmICR0aGlzLT5leHBpcmF0aW9uRGF0ZSAhPSAkdGhpcy0+bGFzdEV4cGlyYXRpb25EYXRlKSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbImV4cGlyYXRpb25fZGF0ZSJdID0gJHRoaXMtPmxhc3RFeHBpcmF0aW9uRGF0ZTsKCQl9CgkJaWYoIWVtcHR5KCR0aGlzLT5sYXN0Q2FuY2VsbGF0aW9uRGF0ZSkgJiYgJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGUgIT0gJHRoaXMtPmxhc3RDYW5jZWxsYXRpb25EYXRlKSB7CgkJCSRhY2N0SW5mb0NoYW5nZXNbImNhbmNlbGxhdGlvbl9kYXRlIl0gPSAkdGhpcy0+bGFzdENhbmNlbGxhdGlvbkRhdGU7CgkJfQoJCSRmaWVsZHMgPSBNTV9DdXN0b21GaWVsZDo6Z2V0Q3VzdG9tRmllbGRzTGlzdCgpOwoJCWZvcmVhY2goJGZpZWxkcyBhcyAkaWQ9PiR2YWwpCgkJewoJCQlpZihNTV9DdXN0b21GaWVsZERhdGE6Ondhc1JlY2VudGx5VXBkYXRlZCgkaWQsICR0aGlzLT5pZCkpCgkJCXsKCQkJCSRhY2N0SW5mb0NoYW5nZXNbImNmX3skaWR9Il0gPSAkdGhpcy0+Z2V0Q3VzdG9tRGF0YUJ5RmllbGRJZCgkaWQpLT5nZXRWYWx1ZSgpOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkYWNjdEluZm9DaGFuZ2VzOwoJfQogCQogCXByaXZhdGUgZnVuY3Rpb24gaXNQZW5kaW5nVXNlcigpCiAJewogCQlpZighZW1wdHkoJHRoaXMtPmVtYWlsKSkKIAkJewoJIAkJZ2xvYmFsICR3cGRiOwoJIAkJJHNxbCA9ICJTRUxFQ1QgaWQgRlJPTSAiLiR3cGRiLT51c2Vycy4iIGFzIHdwVXNlcnMsICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgYXMgbW1Vc2VyRGF0YSBXSEVSRSAiOwoJCQkkc3FsIC49ICIoKG1tVXNlckRhdGEuc3RhdHVzID0gJyIuTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OLiInKSBPUiAobW1Vc2VyRGF0YS5zdGF0dXMgPSAnIi5NTV9TdGF0dXM6OiRFUlJPUi4iJykgT1IgKG1tVXNlckRhdGEuc3RhdHVzID0gJyIuTU1fU3RhdHVzOjokQ0FOQ0VMRUQuIicpKSBBTkQgIjsKCQkJJHNxbCAuPSAiKCh3cFVzZXJzLnVzZXJfbG9naW49JXMpIE9SICh3cFVzZXJzLnVzZXJfZW1haWw9JXMpKSBBTkQgIjsKCSAJCSRzcWwgLj0gIih3cFVzZXJzLklEID0gbW1Vc2VyRGF0YS53cF91c2VyX2lkKSBMSU1JVCAxOyI7CgkJCQoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoJHNxbCwkdGhpcy0+ZW1haWwsJHRoaXMtPmVtYWlsKSk7CgkJCWlmKGlzc2V0KCRyZXN1bHQtPmlkKSkKCQkJewoJCQkJaWYoaW50dmFsKCRyZXN1bHQtPmlkKSA+IDApCgkJCQl7CgkJCQkJJHRoaXMtPmlkID0gJHJlc3VsdC0+aWQ7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CgkJCX0KIAkJfQogCQkKCQlyZXR1cm4gZmFsc2U7CiAJfQoKIAkKIAkvKgogCSAqIE1vZGlmeWluZyB0aGUgd3Agcm9sZSBvbiB0aGUgZmx5IGhlcmUgd2hlbiB1c2VycyByb2xlIGlzIG9uZSBvZiB0aGUgZm9sbG93aW5nOgogCSoKIAkqIGFkbWluaXN0cmF0b3IgfCBlbXBsb3llZQogCSoKIAkqIElmIGl0IGlzIG9uZSBvZiB0aGVzZSByb2xlcywgbm8gV1AgVXNlciByb2xlIGNoYW5nZSBzaG91bGQgYmUgbWFkZS4gTW9kaWZpY2F0aW9uIG1hZGUgaGVyZQogCSogYXMgYWRtaW5pc3RvciB3YXMgYmVpbmcgZWZmZWN0ZWQgb24gaW1wb3J0LgogCSovCiAJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVdQVXNlclJvbGUoKQogCXsKIAkJaWYoJHRoaXMtPmlzVmFsaWQoKSkKIAkJewoJIAkJJHdwVXNlckRhdGEgPSBhcnJheSgpOyAKCSAJCSR3cFVzZXJEYXRhWyJJRCJdID0gJHRoaXMtPmlkOyAKCSAJCSR3cFVzZXJEYXRhWydyb2xlJ10gPSAkdGhpcy0+Z2V0TWVtYmVyc2hpcFdQUm9sZSh0cnVlKTsKCSAKCSAJCWlmKCR3cFVzZXJEYXRhWydyb2xlJ10hPT1mYWxzZSkKCQkJCXJldHVybiB3cF91cGRhdGVfdXNlcigkd3BVc2VyRGF0YSk7CiAJCX0gCiAJCXJldHVybiBmYWxzZTsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBXUFJvbGUoJHVzZUxhdGVzdE1lbWJlcnNoaXBMZXZlbCA9IGZhbHNlKQogCXsgICAKIAkJJG1lbWJlcnNoaXAgPSAkdGhpcy0+Z2V0TWVtYmVyc2hpcExldmVsKCk7CiAJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCiAJCXsKIAkJCWlmKCR1c2VMYXRlc3RNZW1iZXJzaGlwTGV2ZWwpCiAJCQl7CiAJCQkJJHdwUm9sZSA9ICR0aGlzLT5nZXRNZW1iZXJzaGlwTGV2ZWwoKS0+Z2V0V1BSb2xlKCk7CQoJIAkJCSRjYW5Nb2RpZnlSb2xlID0gdHJ1ZTsKCSAJCQlpZigkdGhpcy0+aXNDU1ZJbXBvcnQpewoJIAkJCQkkd3BVc2VyID0gbmV3IFdQX1VzZXIoICR0aGlzLT5pZCApOyAKCSAJCQkJaWYoaXNzZXQoJHdwVXNlci0+cm9sZXMpICYmIGlzX2FycmF5KCR3cFVzZXItPnJvbGVzKSl7CgkgCQkJCQlmb3JlYWNoKCR3cFVzZXItPnJvbGVzIGFzICRyb2xlKXsKCSAJCQkJCQlpZihwcmVnX21hdGNoKCIvKGFkbWluaXN0cmF0b3J8ZW1wbG95ZWUpLyIsIHN0cnRvbG93ZXIoJHJvbGUpKSl7CgkgCQkJCQkJCSRjYW5Nb2RpZnlSb2xlID0gZmFsc2U7CgkgCQkJCQkJCWJyZWFrOwoJIAkJCQkJCX0KCSAJCQkJCX0KCSAJCQkJfQoJIAkJCX0KCSAJCQoJIAkJCWlmKCR3cFJvbGUgIT0gTU1fUm9sZTo6JFJPTEVfSUdOT1JFICYmICRjYW5Nb2RpZnlSb2xlKQoJIAkJCXsKCSAJCQkJcmV0dXJuICR0aGlzLT5nZXRNZW1iZXJzaGlwTGV2ZWwoKS0+Z2V0V1BSb2xlKCk7CgkgCQkJfQogCQkJfSAgCiAJCX0gCiAJCXJldHVybiBmYWxzZTsKIAl9CiAJCgkKCXByaXZhdGUgZnVuY3Rpb24gcHJlcGFyZVdQVXNlckRhdGEoJGlzVXBkYXRlID0gZmFsc2UpCgl7CgkJJHdwVXNlckRhdGEgPSBhcnJheSgpOwoJCQoJCWlmKCFlbXB0eSgkdGhpcy0+aWQpICYmICR0aGlzLT5pZCAhPT0gMCkKCQl7CgkJCSR3cFVzZXJEYXRhWyJJRCJdID0gJHRoaXMtPmlkOwoJCX0KCQllbHNlCgkJewoJCQkvLyBvbmx5IGRvIHRoaXMgZm9yIG5ldyBtZW1iZXJzCgkJCWlmKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0hJREVfQURNSU5fQkFSKSA9PSAiMSIpCgkJCXsKCQkJCSR3cFVzZXJEYXRhWydzaG93X2FkbWluX2Jhcl9mcm9udCddID0gImZhbHNlIjsKCQkJfQoJCQkKCQkJaWYoIWVtcHR5KCR0aGlzLT5maXJzdE5hbWUpKQoJCQl7CgkJCQkkd3BVc2VyRGF0YVsnZmlyc3RfbmFtZSddID0gc3RyaXBfdGFncygkdGhpcy0+Zmlyc3ROYW1lKTsKCQkJCQkKCQkJCWlmKCFlbXB0eSgkdGhpcy0+bGFzdE5hbWUpKQoJCQkJewoJCQkJCSR3cFVzZXJEYXRhWydsYXN0X25hbWUnXSA9IHN0cmlwX3RhZ3MoJHRoaXMtPmxhc3ROYW1lKTsKCQkJCQkkd3BVc2VyRGF0YVsnZGlzcGxheV9uYW1lJ10gPSAkd3BVc2VyRGF0YVsnZmlyc3RfbmFtZSddLiIgIi5zdWJzdHIoJHdwVXNlckRhdGFbJ2xhc3RfbmFtZSddLCAwLCAxKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkd3BVc2VyRGF0YVsnZGlzcGxheV9uYW1lJ10gPSAkd3BVc2VyRGF0YVsnZmlyc3RfbmFtZSddOwoJCQkJfQoJCQl9CgkJfQoJCQoJCSRtZW1iZXJzaGlwID0gJHRoaXMtPmdldE1lbWJlcnNoaXBMZXZlbCgpOwoJCQoJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJeyAgCgkJCSRyb2xlID0gJHRoaXMtPmdldE1lbWJlcnNoaXBXUFJvbGUoISRpc1VwZGF0ZSk7CgkJCWlmKCRyb2xlICE9PSBmYWxzZSkKCQkJCSR3cFVzZXJEYXRhWydyb2xlJ10gPSAkcm9sZTsgCgkJfQoJCQoJCSR3cFVzZXJEYXRhWyd1c2VyX2xvZ2luJ10gPSBzdHJpcF90YWdzKCR0aGlzLT51c2VybmFtZSk7CgkJCgkJaWYoIWVtcHR5KCR0aGlzLT5yZWdpc3RyYXRpb25EYXRlKSkKCQl7CiAJCQkkd3BVc2VyRGF0YVsndXNlcl9yZWdpc3RlcmVkJ10gPSBzdHJpcF90YWdzKCR0aGlzLT5yZWdpc3RyYXRpb25EYXRlKTsKCQl9CgkJZWxzZQoJCXsKCQkJJHdwVXNlckRhdGFbJ3VzZXJfcmVnaXN0ZXJlZCddID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJfQoJCQoJCS8vIGlmIHVzaW5nIHRlc3QgZGF0YSBjb252ZXJ0IHRoaXMgZW1haWwKCQlpZihNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9VU0VfQ0hFQ0tPVVRfRk9STV9URVNUX0RBVEEpID09ICIxIikKCQl7CgkJCSR0aGlzLT5lbWFpbCA9IE1NX1Rlc3REYXRhVXRpbHM6OmNvbnZlcnRUZXN0RW1haWwoJHRoaXMtPmVtYWlsKTsKCQl9CgkJCgkJJHdwVXNlckRhdGFbJ3VzZXJfZW1haWwnXSA9IHN0cmlwX3RhZ3MoJHRoaXMtPmVtYWlsKTsKCgkJaWYoIWlzX251bGwoJHRoaXMtPmdldFBhc3N3b3JkKCkpKQoJCXsKCQkJJHdwVXNlckRhdGFbJ3VzZXJfcGFzcyddID0gc3RyaXBfdGFncygkdGhpcy0+Z2V0UGFzc3dvcmQoKSk7CgkJfQoJCQoJCWlmKCR0aGlzLT5sYXN0Rm9yZ290UGFzc3dvcmRIYXNoICE9ICR0aGlzLT5mb3Jnb3RQYXNzd29yZEhhc2gpCgkJewoJCQkkd3BVc2VyRGF0YVsndXNlcl9hY3RpdmF0aW9uX2tleSddID0gc3RyaXBfdGFncygkdGhpcy0+Zm9yZ290UGFzc3dvcmRIYXNoKTsKCQl9CgkJCQkKCQlyZXR1cm4gJHdwVXNlckRhdGE7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcHJlcGFyZU1NVXNlckRhdGEoKQoJewoJCSRtbVVzZXJEYXRhID0gYXJyYXkoKTsKCQkKCQkkbW1Vc2VyRGF0YVsid3BfdXNlcl9pZCJdID0gJHRoaXMtPmlkOwoJCSRtbVVzZXJEYXRhWyJtZW1iZXJzaGlwX2xldmVsX2lkIl0gPSAkdGhpcy0+bWVtYmVyc2hpcElkOwoJCQoJCS8vIGNoZWNrIGlmIHRoaXMgbWVtYmVyIGlzIHBlbmRpbmcgY2FuY2VsbGF0aW9uIAoJCWlmKCR0aGlzLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKCQl7CgkJCS8vIGNoZWNrIGlmIHRoaXMgbWVtYmVyIHNob3VsZCBiZSBjYW5jZWxlZAoJCQlpZigkdGhpcy0+bWVtYmVyc2hpcFNob3VsZENhbmNlbCgpKQoJCQl7CgkJCQkkdGhpcy0+c2V0U3RhdHVzKCR0aGlzLT5nZXRQZW5kaW5nU3RhdHVzKCkpOwoJCQkJCgkJCQkvLyBjbGVhciBwZW5kaW5nIGNhbmNlbGxhdGlvbgoJCQkJJHRoaXMtPnNldENhbmNlbGxhdGlvbkRhdGUobnVsbCk7CgkJCQkkdGhpcy0+c2V0UGVuZGluZ1N0YXR1cygiMCIpOwoJCQl9CgkJCWVsc2UgaWYoIWVtcHR5KCR0aGlzLT5sYXN0U3RhdHVzKSAmJiAoJHRoaXMtPnN0YXR1cyAhPSAkdGhpcy0+bGFzdFN0YXR1cykgCgkJCQkmJiAoJHRoaXMtPmxhc3RTdGF0dXMgPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQgfHwgJHRoaXMtPmxhc3RTdGF0dXMgPT0gTU1fU3RhdHVzOjokUEFVU0VEKSkKCQkJewoJCQkJJHRoaXMtPmRheXNDYWxjTWV0aG9kID0gJHRoaXMtPmxhc3REYXlzQ2FsY01ldGhvZDsKCQkJCSR0aGlzLT5kYXlzQ2FsY1ZhbHVlID0gJHRoaXMtPmxhc3REYXlzQ2FsY1ZhbHVlOwoJCQl9CgkJfQoJCQoJCSRtbVVzZXJEYXRhWyJzdGF0dXMiXSA9ICR0aGlzLT5zdGF0dXM7CgkJJG1tVXNlckRhdGFbInBlbmRpbmdfc3RhdHVzIl0gPSAkdGhpcy0+Z2V0UGVuZGluZ1N0YXR1cygpOwoJCSRtbVVzZXJEYXRhWyJpbXBvcnRlZCJdID0gJHRoaXMtPmltcG9ydGVkRmxhZzsKCQkkbW1Vc2VyRGF0YVsibm90ZXMiXSA9IHN0cmlwX3RhZ3MoJHRoaXMtPm5vdGVzKTsKCQkkbW1Vc2VyRGF0YVsicGhvbmUiXSA9IHN0cmlwX3RhZ3MoJHRoaXMtPnBob25lKTsKCQkkbW1Vc2VyRGF0YVsnZmlyc3RfbmFtZSddID0gc3RyaXBfdGFncygkdGhpcy0+Zmlyc3ROYW1lKTsKCQkkbW1Vc2VyRGF0YVsnbGFzdF9uYW1lJ10gPSBzdHJpcF90YWdzKCR0aGlzLT5sYXN0TmFtZSk7CgkJJG1tVXNlckRhdGFbInN0YXR1c19tZXNzYWdlIl0gPSBzdHJpcF90YWdzKCR0aGlzLT5zdGF0dXNNZXNzYWdlKTsKCQkkbW1Vc2VyRGF0YVsiZGF5c19jYWxjX21ldGhvZCJdID0gJHRoaXMtPmRheXNDYWxjTWV0aG9kOyAKCQkkbW1Vc2VyRGF0YVsiZGF5c19jYWxjX3ZhbHVlIl0gPSAkdGhpcy0+ZGF5c0NhbGNWYWx1ZTsKCQkkbW1Vc2VyRGF0YVsic3Vic2NyaWJlZF9wcm92aWRlcl9pZCJdID0gJHRoaXMtPnN1YnNjcmliZWRQcm92aWRlcklkOwoJCSRtbVVzZXJEYXRhWyJzdWJzY3JpYmVkX2xpc3RfaWQiXSA9ICR0aGlzLT5zdWJzY3JpYmVkTGlzdElkOwoJCSRtbVVzZXJEYXRhWyJiaWxsaW5nX2FkZHJlc3MxIl0gPSBzdHJpcF90YWdzKCR0aGlzLT5iaWxsaW5nQWRkcmVzcyk7CgkJJG1tVXNlckRhdGFbImJpbGxpbmdfY2l0eSJdID0gc3RyaXBfdGFncygkdGhpcy0+YmlsbGluZ0NpdHkpOwoJCSRtbVVzZXJEYXRhWyJiaWxsaW5nX3N0YXRlIl0gPSBzdHJpcF90YWdzKCR0aGlzLT5iaWxsaW5nU3RhdGUpOwoJCSRtbVVzZXJEYXRhWyJiaWxsaW5nX3Bvc3RhbF9jb2RlIl0gPSBzdHJpcF90YWdzKCR0aGlzLT5iaWxsaW5nWmlwKTsKCQkkbW1Vc2VyRGF0YVsiYmlsbGluZ19jb3VudHJ5Il0gPSBzdHJpcF90YWdzKCR0aGlzLT5iaWxsaW5nQ291bnRyeSk7CgkJJG1tVXNlckRhdGFbInNoaXBwaW5nX2FkZHJlc3MxIl0gPSBzdHJpcF90YWdzKCR0aGlzLT5zaGlwcGluZ0FkZHJlc3MpOwoJCSRtbVVzZXJEYXRhWyJzaGlwcGluZ19jaXR5Il0gPSBzdHJpcF90YWdzKCR0aGlzLT5zaGlwcGluZ0NpdHkpOwoJCSRtbVVzZXJEYXRhWyJzaGlwcGluZ19zdGF0ZSJdID0gc3RyaXBfdGFncygkdGhpcy0+c2hpcHBpbmdTdGF0ZSk7CgkJJG1tVXNlckRhdGFbInNoaXBwaW5nX3Bvc3RhbF9jb2RlIl0gPSBzdHJpcF90YWdzKCR0aGlzLT5zaGlwcGluZ1ppcCk7CgkJJG1tVXNlckRhdGFbInNoaXBwaW5nX2NvdW50cnkiXSA9IHN0cmlwX3RhZ3MoJHRoaXMtPnNoaXBwaW5nQ291bnRyeSk7CgkJJG1tVXNlckRhdGFbIm9yaWdpbl9hZmZpbGlhdGVfaWQiXSA9IHN0cmlwX3RhZ3MoJHRoaXMtPm9yaWdpbkFmZmlsaWF0ZUlkKTsKCQkkbW1Vc2VyRGF0YVsib3JpZ2luX3N1YmFmZmlsaWF0ZV9pZCJdID0gc3RyaXBfdGFncygkdGhpcy0+b3JpZ2luU3ViYWZmaWxpYXRlSWQpOwoJCSRtbVVzZXJEYXRhWyJmb3Jnb3R0ZW4iXSA9ICR0aGlzLT5mb3Jnb3R0ZW5GbGFnOwoJCQoJCWlmKCR0aGlzLT5kb2VzRXhwaXJlKCkpCgkJewoJCQkkbW1Vc2VyRGF0YVsiZXhwaXJhdGlvbl9kYXRlIl0gPSAkdGhpcy0+Z2V0RXhwaXJhdGlvbkRhdGUoKTsKCQl9CgkJZWxzZSAKCQl7CgkJCSRtbVVzZXJEYXRhWyJleHBpcmF0aW9uX2RhdGUiXSA9IG51bGw7CgkJfQoJCQoJCWlmKCR0aGlzLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKCQl7CgkJCSRtbVVzZXJEYXRhWyJjYW5jZWxsYXRpb25fZGF0ZSJdID0gJHRoaXMtPmdldENhbmNlbGxhdGlvbkRhdGUoKTsKCQl9CgkJZWxzZQoJCXsKCQkJJG1tVXNlckRhdGFbImNhbmNlbGxhdGlvbl9kYXRlIl0gPSBudWxsOwoJCX0KCQkKCQkkbW1Vc2VyRGF0YVsibGFzdF91cGRhdGVkIl0gPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkKCQlpZighZW1wdHkoJHRoaXMtPmxhc3RMb2dpbkRhdGUpKQoJCXsKCQkJJG1tVXNlckRhdGFbImxhc3RfbG9naW5fZGF0ZSJdID0gJHRoaXMtPmxhc3RMb2dpbkRhdGU7CgkJfQoJCQoJCWlmKCR0aGlzLT5sYXN0U3RhdHVzICE9ICR0aGlzLT5zdGF0dXMpCgkJewoJCQkkbW1Vc2VyRGF0YVsic3RhdHVzX3VwZGF0ZWQiXSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCX0KCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+c3RhdHVzVXBkYXRlZERhdGUpKQoJCXsKCQkJJG1tVXNlckRhdGFbInN0YXR1c191cGRhdGVkIl0gPSAkdGhpcy0+c3RhdHVzVXBkYXRlZERhdGU7CgkJfQoJCQoJCWlmKCFlbXB0eSgkdGhpcy0+YmVjYW1lQWN0aXZlRGF0ZSkpCgkJewoJCQkkbW1Vc2VyRGF0YVsiYmVjYW1lX2FjdGl2ZSJdID0gJHRoaXMtPmJlY2FtZUFjdGl2ZURhdGU7CgkJfQoJCQoJCWlmKCFlbXB0eSgkdGhpcy0+d2VsY29tZUVtYWlsU2VudERhdGUpKQoJCXsKCQkJJG1tVXNlckRhdGFbIndlbGNvbWVfZW1haWxfc2VudCJdID0gJHRoaXMtPndlbGNvbWVFbWFpbFNlbnREYXRlOwoJCX0KCQoJCXJldHVybiAkbW1Vc2VyRGF0YTsKCX0KCQogCXB1YmxpYyBmdW5jdGlvbiBkZWxldGUoKQogCXsKIAkJcmVxdWlyZV9vbmNlKEFCU1BBVEguIi93cC1hZG1pbi9pbmNsdWRlcy91c2VyLnBocCIpOwogCQkKIAkJZ2xvYmFsICR3cGRiOwoJCQogCQkvLyBjaGVjayBpZiB1c2VyIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZAogCQkkc3FsID0gIlNFTEVDVCB3cF91c2VyX2lkIEZST00gIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiBXSEVSRSB3cF91c2VyX2lkPSd7JHRoaXMtPmdldElkKCl9JyBMSU1JVCAxOyI7CiAJCSR1c2VyID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwogCQkKIAkJaWYoISR1c2VyKQogCQl7CiAJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVc2VyICciLiR0aGlzLT5nZXRFbWFpbCgpLiInIGhhcyBhbHJlYWR5IGJlZW4gZGVsZXRlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwogCQl9CiAJCQoJCWlmKCEkdGhpcy0+aGFzQWN0aXZlU3Vic2NyaXB0aW9ucygpIHx8ICR0aGlzLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OIHx8ICR0aGlzLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04gfHwgJHRoaXMtPnN0YXR1cyA9PSBNTV9TdGF0dXM6OiRFUlJPUikKCQl7CgkJCS8vIHByZXBhcmUgdXNlciBkYXRhIHRvIHBhc3MgdG8gcHVzaCBub3RpZmljYXRpb25zIHByaW9yIHRvIGRlbGV0aW9uCgkJCSR1c2VyRGF0YSA9IGFycmF5KAoJCQkJCSdtZW1iZXJfaWQnPT4kdGhpcy0+Z2V0SWQoKSwKCQkJCQkncmVnaXN0ZXJlZCc9PiR0aGlzLT5nZXRSZWdpc3RyYXRpb25EYXRlKCksCgkJCQkJJ2xhc3RfbG9nZ2VkX2luJz0+JHRoaXMtPmdldExhc3RMb2dpbkRhdGUoKSwKCQkJCQknbGFzdF91cGRhdGVkJz0+JHRoaXMtPmdldExhc3RVcGRhdGVkRGF0ZSgpLAoJCQkJCSdkYXlzX2FzX21lbWJlcic9PiR0aGlzLT5nZXREYXlzQXNNZW1iZXIoKSwKCQkJCQknc3RhdHVzJz0+JHRoaXMtPmdldFN0YXR1cygpLAoJCQkJCSdzdGF0dXNfbmFtZSc9Pk1NX1N0YXR1czo6Z2V0TmFtZSgkdGhpcy0+Z2V0U3RhdHVzKCkpLAoJCQkJCSdtZW1iZXJzaGlwX2xldmVsJz0+JHRoaXMtPmdldE1lbWJlcnNoaXBJZCgpLAoJCQkJCSdtZW1iZXJzaGlwX2xldmVsX25hbWUnPT4kdGhpcy0+Z2V0TWVtYmVyc2hpcE5hbWUoKSwKCQkJCQknZmlyc3RfbmFtZSc9PiR0aGlzLT5nZXRGaXJzdE5hbWUoKSwKCQkJCQknbGFzdF9uYW1lJz0+JHRoaXMtPmdldExhc3ROYW1lKCksCgkJCQkJJ3VzZXJuYW1lJz0+JHRoaXMtPmdldFVzZXJuYW1lKCksCgkJCQkJJ2VtYWlsJyA9PiAkdGhpcy0+Z2V0RW1haWwoKSwKCQkJCQkncGhvbmUnID0+ICR0aGlzLT5nZXRQaG9uZSgpLAoJCQkJCSdiaWxsaW5nX2FkZHJlc3MnPT4kdGhpcy0+Z2V0QmlsbGluZ0FkZHJlc3MoKSwKCQkJCQknYmlsbGluZ19jaXR5Jz0+JHRoaXMtPmdldEJpbGxpbmdDaXR5KCksCgkJCQkJJ2JpbGxpbmdfc3RhdGUnPT4kdGhpcy0+Z2V0QmlsbGluZ1N0YXRlKCksCgkJCQkJJ2JpbGxpbmdfemlwX2NvZGUnPT4kdGhpcy0+Z2V0QmlsbGluZ1ppcENvZGUoKSwKCQkJCQknYmlsbGluZ19jb3VudHJ5Jz0+JHRoaXMtPmdldEJpbGxpbmdDb3VudHJ5TmFtZSgpLAoJCQkJCSdzaGlwcGluZ19hZGRyZXNzJz0+JHRoaXMtPmdldFNoaXBwaW5nQWRkcmVzcygpLAoJCQkJCSdzaGlwcGluZ19jaXR5Jz0+JHRoaXMtPmdldFNoaXBwaW5nQ2l0eSgpLAoJCQkJCSdzaGlwcGluZ19zdGF0ZSc9PiR0aGlzLT5nZXRTaGlwcGluZ1N0YXRlKCksCgkJCQkJJ3NoaXBwaW5nX3ppcF9jb2RlJz0+JHRoaXMtPmdldFNoaXBwaW5nWmlwQ29kZSgpLAoJCQkJCSdzaGlwcGluZ19jb3VudHJ5Jz0+JHRoaXMtPmdldFNoaXBwaW5nQ291bnRyeU5hbWUoKSwKCQkJCQknc3Vic2NyaWJlZF9saXN0X2lkJz0+JHRoaXMtPnN1YnNjcmliZWRMaXN0SWQsCgkJCQkJJ3N1YnNjcmliZWRfcHJvdmlkZXJfaWQnPT4kdGhpcy0+c3Vic2NyaWJlZFByb3ZpZGVySWQKCQkJKTsKCQkJCgkJCS8vIGN1c3RvbSBmaWVsZHMKCQkJJGZpZWxkcyA9IE1NX0N1c3RvbUZpZWxkOjpnZXRDdXN0b21GaWVsZHNMaXN0KCk7CgkJCWZvcmVhY2goJGZpZWxkcyBhcyAkaWQ9PiR2YWwpCgkJCXsKCQkJCSRjdXN0b21GaWVsZCA9IG5ldyBNTV9DdXN0b21GaWVsZCgkaWQpOwoJCQkJCQoJCQkJaWYoJGN1c3RvbUZpZWxkLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHVzZXJEYXRhWyJjZl8iLiRjdXN0b21GaWVsZC0+Z2V0SWQoKV0gPSBodG1sZW50aXRpZXMoJHRoaXMtPmdldEN1c3RvbURhdGFCeUZpZWxkSWQoJGN1c3RvbUZpZWxkLT5nZXRJZCgpKS0+Z2V0VmFsdWUoKSxFTlRfUVVPVEVTLCAnVVRGLTgnLCB0cnVlKTsKCQkJCX0KCQkJfQoJCQkKCQkJLy8gYnVuZGxlcwoJCQkkYXBwbGllZEJ1bmRsZXMgPSAkdGhpcy0+Z2V0QXBwbGllZEJ1bmRsZXModHJ1ZSk7CgkJCSRhcHBsaWVkQnVuZGxlSW5mbyA9IGFycmF5KCk7CgkJCQkKCQkJZm9yZWFjaCgkYXBwbGllZEJ1bmRsZXMgYXMgJGFwcGxpZWRCdW5kbGUpCgkJCXsKCQkJCSRjcm50QnVuZGxlSW5mbyA9IGFycmF5KCk7CgkJCQkkY3JudEJ1bmRsZUluZm9bImJ1bmRsZV9pZCJdID0gJGFwcGxpZWRCdW5kbGUtPmdldEJ1bmRsZUlkKCk7CgkJCQkkY3JudEJ1bmRsZUluZm9bInN1YnNjcmliZWRfbGlzdF9pZCJdID0gJGFwcGxpZWRCdW5kbGUtPmdldFN1YnNjcmliZWRMaXN0SWQoKTsKCQkJCSRjcm50QnVuZGxlSW5mb1sic3Vic2NyaWJlZF9wcm92aWRlcl9pZCJdID0gJGFwcGxpZWRCdW5kbGUtPmdldFN1YnNjcmliZWRQcm92aWRlcklkKCk7CgkJCQkJCgkJCQkkYXBwbGllZEJ1bmRsZUluZm9bXSA9ICRjcm50QnVuZGxlSW5mbzsKCQkJfQoJCQkKCQkJJHVzZXJEYXRhWyJhcHBsaWVkX2J1bmRsZXMiXSA9IGpzb25fZW5jb2RlKCRhcHBsaWVkQnVuZGxlSW5mbyk7CgkJCQoJCQkvLyBkZWxldGUgYWxsIG1lbWJlciBkYXRhCgkJCU1NX1RyYW5zYWN0aW9uOjpiZWdpbigpOwoJCQkKCQkJJHNxbCA9ICJTRUxFQ1QgaWQgRlJPTSAiLk1NX1RBQkxFX09SREVSUy4iIFdIRVJFIHVzZXJfaWQ9J3skdGhpcy0+Z2V0SWQoKX0nIjsKCQkJJG9yZGVycyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkJCgkJCWlmKCRvcmRlcnMpCgkJCXsKCQkJCWZvcmVhY2goJG9yZGVycyBhcyAkb3JkZXIpCgkJCQl7CgkJCQkJLy8gcmVtb3ZlIG9yZGVyIGl0ZW1zCgkJCQkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX09SREVSX0lURU1TLiIgV0hFUkUgb3JkZXJfaWQ9J3skb3JkZXItPmlkfSc7IjsKCQkJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQkJCgkJCQkJLy8gcmVtb3ZlIHRyYW5zYWN0aW9uIGhpc3RvcnkKCQkJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgV0hFUkUgb3JkZXJfaWQ9J3skb3JkZXItPmlkfSc7IjsKCQkJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQl9CgkJCX0KCQkJCgkJCS8vIHJlbW92ZSBvcmRlcnMKCQkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX09SREVSUy4iIFdIRVJFIHVzZXJfaWQ9J3skdGhpcy0+Z2V0SWQoKX0nOyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCgkJCS8vIHJlbW92ZSBjYXJkIG9uIGZpbGUKCQkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0NBUkRfT05fRklMRS4iIFdIRVJFIHVzZXJfaWQ9J3skdGhpcy0+Z2V0SWQoKX0nOyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCgkJCS8vIHJlbW92ZSBvcmRlciBpdGVtIGFjY2VzcwoJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfT1JERVJfSVRFTV9BQ0NFU1MuIiBXSEVSRSB1c2VyX2lkPSd7JHRoaXMtPmdldElkKCl9JzsiOwoJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQoJCQkvLyByZW1vdmUgYnVuZGxlcwoJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTLiIgV0hFUkUgYWNjZXNzX3R5cGU9JyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIuIicgQU5EIGFjY2Vzc190eXBlX2lkPSd7JHRoaXMtPmdldElkKCl9JzsiOwoJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQoJCQkvLyBkZWxldGUgY3VzdG9tIGZpZWxkIGRhdGEKCQkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0NVU1RPTV9GSUVMRF9EQVRBLiIgV0hFUkUgdXNlcl9pZD0neyR0aGlzLT5nZXRJZCgpfSc7IjsKCQkJJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCQkKCQkJLy8gZGVsZXRlIGV2ZW50IGxvZyBkYXRhCgkJCSRzcWwgPSAiREVMRVRFIEZST00gIi5NTV9UQUJMRV9FVkVOVF9MT0cuIiBXSEVSRSB1c2VyX2lkPSd7JHRoaXMtPmdldElkKCl9JzsiOwoJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQoJCQkvLyBkZWxldGUgTU0gdXNlciBkYXRhCgkJCSRzcWwgPSAiREVMRVRFIEZST00gIi5NTV9UQUJMRV9VU0VSX0RBVEEuIiBXSEVSRSB3cF91c2VyX2lkPSd7JHRoaXMtPmdldElkKCl9JyBMSU1JVCAxOyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCgkJCU1NX1RyYW5zYWN0aW9uOjpjb21taXQoKTsKCQkJCgkJCS8vIGRlbGV0ZSBXb3JkUHJlc3MgdXNlcgoJCQl3cF9kZWxldGVfdXNlcigkdGhpcy0+Z2V0SWQoKSk7CgkJCQoJCQkvLyBpZiB1c2luZyBtdWx0aS1zaXRlLCBkZWxldGUgdXNlciBmcm9tIHRoZSBuZXR3b3JrCgkJCWlmKGlzX211bHRpc2l0ZSgpKSAKCQkJewoJCQkJd3BtdV9kZWxldGVfdXNlcigkdGhpcy0+Z2V0SWQoKSk7CgkJCX0KCQkJCgkJCS8vIGRpc3BhdGNoIE1lbWJlck1vdXNlIGV2ZW50CgkJCWRvX2FjdGlvbihNTV9FdmVudDo6JE1FTUJFUl9ERUxFVEUsICR1c2VyRGF0YSk7CgkJCQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCInIi4kdGhpcy0+Z2V0RW1haWwoKS4iJyBkZWxldGVkIHN1Y2Nlc3NmdWxseSIpOwoJCX0KCQkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSB1c2VyICciLiR0aGlzLT5nZXRFbWFpbCgpLiInIGJlY2F1c2UgdGhleSBoYXZlIGFjdGl2ZSBzdWJzY3JpcHRpb25zIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CiAJfQogCQogCQogCS8qKiBBQ0NFU1MtUkVMQVRFRCBNRVRIT0RTICoqLwoKCXB1YmxpYyBmdW5jdGlvbiBpc0FkbWluKCkKCXsKCQlpZihmdW5jdGlvbl9leGlzdHMoInVzZXJfY2FuIikpCgkJewoJCQlpZiAodXNlcl9jYW4oJHRoaXMtPmlkLCAnbWFuYWdlX29wdGlvbnMnKSkgCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoKCQkkY2FwYWJpbGl0aWVzID0gZ2V0X3VzZXJfbWV0YSgkdGhpcy0+aWQsICJ3cF9jYXBhYmlsaXRpZXMiLCB0cnVlKTsKCQkJCgkJaWYoaXNzZXQoJGNhcGFiaWxpdGllc1siYWRtaW5pc3RyYXRvciJdKSkgCgkJewoJCQlyZXR1cm4gJGNhcGFiaWxpdGllc1siYWRtaW5pc3RyYXRvciJdID09ICIxIjsKCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBoYXNBY3RpdmVTdWJzY3JpcHRpb25zKCkKCXsKCQkvLyBkZXRlcm1pbmUgaWYgbWVtYmVyIGhhcyBhY3RpdmUgc3Vic2NyaXB0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlaXIgbWVtYmVyc2hpcCBsZXZlbAoJCSRtZW1iZXJzaGlwID0gJHRoaXMtPmdldE1lbWJlcnNoaXBMZXZlbCgpOwoJCQkKCQlpZighJG1lbWJlcnNoaXAtPmlzRnJlZSgpICYmICR0aGlzLT5zdGF0dXMgIT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQgJiYgJHRoaXMtPnN0YXR1cyAhPSBNTV9TdGF0dXM6OiRQQVVTRUQpIAoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCSRhcHBsaWVkQnVuZGxlcyA9ICR0aGlzLT5nZXRBcHBsaWVkQnVuZGxlcygpOwoJCQkKCQkvLyBkZXRlcm1pbmUgaWYgbWVtYmVyIGhhcyBhY3RpdmUgc3Vic2NyaXB0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhlaXIgYnVuZGxlcwoJCWZvcmVhY2goJGFwcGxpZWRCdW5kbGVzIGFzICRhcHBsaWVkQnVuZGxlKQoJCXsKCQkJaWYoJGFwcGxpZWRCdW5kbGUtPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JEFDVElWRSkKCQkJewoJCQkJJGJ1bmRsZSA9ICRhcHBsaWVkQnVuZGxlLT5nZXRCdW5kbGUoKTsKCQkJCQoJCQkJaWYoISRidW5kbGUtPmlzRnJlZSgpKQoJCQkJewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQl9CgkJfQoJCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCQoJLyoqIE1FTUJFUlNISVAtUkVMQVRFRCBNRVRIT0RTICoqLwoJIAkKCXB1YmxpYyBmdW5jdGlvbiBzZW5kV2VsY29tZUVtYWlsKCkKCXsKCQlpZigkdGhpcy0+aXNWYWxpZCgpKQoJCXsKCQkJZ2xvYmFsICR3cGRiOwoJCQkKCQkJJG1lbWJlcnNoaXAgPSAkdGhpcy0+Z2V0TWVtYmVyc2hpcExldmVsKCk7CgkJCSRyZXN1bHQgPSAkbWVtYmVyc2hpcC0+c2VuZFdlbGNvbWVFbWFpbCgkdGhpcy0+aWQpOwoJCQkJCgkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCXsKCQkJCSR0aGlzLT53ZWxjb21lRW1haWxTZW50RGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkKCQkJCSR1cGRhdGVWYWx1ZXMgPSBhcnJheSgid2VsY29tZV9lbWFpbF9zZW50IiA9PiAkdGhpcy0+d2VsY29tZUVtYWlsU2VudERhdGUpOwoJCQkJJHdoZXJlQ2xhdXNlID0gYXJyYXkoIndwX3VzZXJfaWQiID0+ICR0aGlzLT5pZCk7CgkJCQkkcmVzdWx0ID0gJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9VU0VSX0RBVEEsICR1cGRhdGVWYWx1ZXMsICR3aGVyZUNsYXVzZSk7CgkJCQoJCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCQl7CgkJCQkJJHRoaXMtPndlbGNvbWVFbWFpbFNlbnREYXRlID0gbnVsbDsKCQkJCX0KCQkJfQoJCX0KCX0gCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXlzQXNNZW1iZXIoKSAKCXsKCQkKCQlpZigkdGhpcy0+ZGF5c0NhbGNNZXRob2QgPT0gTU1fRGF5c0NhbGN1bGF0aW9uVHlwZXM6OiRGSVhFRCkKCQl7CgkJCXJldHVybiBpbnR2YWwoJHRoaXMtPmRheXNDYWxjVmFsdWUpOwoJCX0KCQkKCQkkZHJpcENvbnRlbnRUaW1lU2V0dGluZyA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0RSSVBfQ09OVEVOVF9USU1FX1NFVFRJTkcpOwoJCSRzdGFydCA9IG51bGw7CgkJJGVuZCA9IG51bGw7CgkJCgkJaWYoJGRyaXBDb250ZW50VGltZVNldHRpbmcgPT0gTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZTo6JFRJTUVfU0VUVElOR19MT0NBTCkKCQl7CgkJCSRlbmQgPSBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCksICJZLW0tZCIsICIwMDowMDowMCIpOwoJCX0KCQllbHNlIAoJCXsKCQkJJGVuZCA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgiWS1tLWQiKTsKCQl9IAkKCQkKCQlpZiAoIWlzX251bGwoJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGUpKQoJCXsKCQkJJGVuZCA9IERhdGUoIlktbS1kIiwgc3RydG90aW1lKCR0aGlzLT5nZXRDYW5jZWxsYXRpb25EYXRlKCkpKTsKCQl9CgkJCgkJc3dpdGNoKCR0aGlzLT5kYXlzQ2FsY01ldGhvZCkKCQl7IAoJCQljYXNlIE1NX0RheXNDYWxjdWxhdGlvblR5cGVzOjokQ1VTVE9NX0RBVEU6CgkJCQlpZigkZHJpcENvbnRlbnRUaW1lU2V0dGluZyA9PSBNTV9Qcm90ZWN0ZWRDb250ZW50RW5naW5lOjokVElNRV9TRVRUSU5HX0xPQ0FMKQoJCQkJewoJCQkJCSRzdGFydCA9IE1NX1V0aWxzOjpkYXRlVG9Mb2NhbCgkdGhpcy0+ZGF5c0NhbGNWYWx1ZSwgIlktbS1kIiwgIjAwOjAwOjAwIik7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHN0YXJ0ID0gRGF0ZSgiWS1tLWQiLCBzdHJ0b3RpbWUoJHRoaXMtPmRheXNDYWxjVmFsdWUpKTsKCQkJCX0KCQkJCQoJCQkJJHN0YXJ0X3RzID0gc3RydG90aW1lKCRzdGFydCk7CgkJCQkkZW5kX3RzID0gc3RydG90aW1lKCRlbmQpOwoJCQkJJGRpZmYgPSAkZW5kX3RzIC0gJHN0YXJ0X3RzOwoJCQkJCQoJCQkJLy8gcm91bmQgcmV0dXJucyBhIC0gMAoJCQkJJGRheXMgPSByb3VuZCgkZGlmZiAvIDg2NDAwKTsKCQkJCXJldHVybiAkZGF5czsKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgTU1fRGF5c0NhbGN1bGF0aW9uVHlwZXM6OiRKT0lOX0RBVEU6CgkJCQlpZigkdGhpcy0+aXNJbXBvcnRlZCgpKQoJCQkJewoJCQkJCWlmKCRkcmlwQ29udGVudFRpbWVTZXR0aW5nID09IE1NX1Byb3RlY3RlZENvbnRlbnRFbmdpbmU6OiRUSU1FX1NFVFRJTkdfTE9DQUwpCgkJCQkJewoJCQkJCQkkc3RhcnQgPSBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHRoaXMtPmdldFJlZ2lzdHJhdGlvbkRhdGUoKSwgIlktbS1kIiwgIjAwOjAwOjAwIik7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRzdGFydCA9IERhdGUoIlktbS1kIiwgc3RydG90aW1lKCR0aGlzLT5nZXRSZWdpc3RyYXRpb25EYXRlKCkpKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJaWYgKCR0aGlzLT5iZWNhbWVBY3RpdmVEYXRlID09IG51bGwpCgkJCQkJewoJCQkJCQlyZXR1cm4gMDsgLy9hY2NvdW50IG5ldmVyIGJlY2FtZSBhY3RpdmUgKHByb2JhYmx5IHBlbmRpbmcgb3IgZXJyb3JlZCkKCQkJCQl9CgkJCQkJaWYoJGRyaXBDb250ZW50VGltZVNldHRpbmcgPT0gTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZTo6JFRJTUVfU0VUVElOR19MT0NBTCkKCQkJCQl7CgkJCQkJCSRzdGFydCA9IE1NX1V0aWxzOjpkYXRlVG9Mb2NhbCgkdGhpcy0+Z2V0QmVjYW1lQWN0aXZlRGF0ZSgpLCAiWS1tLWQiLCAiMDA6MDA6MDAiKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJHN0YXJ0ID0gRGF0ZSgiWS1tLWQiLCBzdHJ0b3RpbWUoJHRoaXMtPmdldEJlY2FtZUFjdGl2ZURhdGUoKSkpOwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJJHN0YXJ0X3RzID0gc3RydG90aW1lKCRzdGFydCk7CgkJCQkkZW5kX3RzID0gc3RydG90aW1lKCRlbmQpOwoJCQkJJGRpZmYgPSAkZW5kX3RzIC0gJHN0YXJ0X3RzOwoJCQkJCQoJCQkJLy8gcm91bmQgcmV0dXJucyBhIC0gMAoJCQkJJGRheXMgPSByb3VuZCgkZGlmZiAvIDg2NDAwKTsKCQkJCQkKCQkJCWlmKCRkYXlzPDApCgkJCQl7CgkJCQkJJGRheXMqPS0xOwoJCQkJfQoJCQkJCQoJCQkJcmV0dXJuICRkYXlzOwoJCQkJYnJlYWs7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZG9lc0V4cGlyZSgpCgl7CgkJJG1lbWJlcnNoaXAgPSAkdGhpcy0+Z2V0TWVtYmVyc2hpcExldmVsKCk7CgkJcmV0dXJuICRtZW1iZXJzaGlwLT5kb2VzRXhwaXJlKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBtZW1iZXJzaGlwSGFzRXhwaXJlZCgpCgl7CgkJaWYoJHRoaXMtPmRvZXNFeHBpcmUoKSkKCQl7CgkJCSRleHBpcmF0aW9uRGF0ZSA9IGRhdGUoIlktbS1kIiwgc3RydG90aW1lKCR0aGlzLT5nZXRFeHBpcmF0aW9uRGF0ZSgpKSk7CgkJCSR0b2RheSA9IERhdGUoIlktbS1kIGg6aTpzIik7CgkJCQoJCQlpZigkdG9kYXkgPiAkZXhwaXJhdGlvbkRhdGUpCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGlzUGVuZGluZ0NhbmNlbGxhdGlvbigpCgl7CgkJcmV0dXJuICgkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIG1lbWJlcnNoaXBTaG91bGRDYW5jZWwoKQoJewoJCWlmKCR0aGlzLT5pc1BlbmRpbmdDYW5jZWxsYXRpb24oKSkKCQl7CgkJCSRjYW5jZWxsYXRpb25EYXRlID0gZGF0ZSgiWS1tLWQgSDppOnMiLCBzdHJ0b3RpbWUoJHRoaXMtPmdldENhbmNlbGxhdGlvbkRhdGUoKSkpOwoJCQkkdG9kYXkgPSBEYXRlKCJZLW0tZCBoOmk6cyIpOwoJCQkKCQkJaWYoJHRvZGF5ID4gJGNhbmNlbGxhdGlvbkRhdGUpCgkJCXsKCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkvKioKCSAqIEdldHMgYSBsaXN0IG9mIGFsbCBhY3RpdmUgbWVtYmVyc2hpcCBzdWJzY3JpcHRpb25zCgkgKgoJICogQHBhcmFtICRpbmNsdWRlT3ZlcmR1ZVN1YnNjcmlwdGlvbnMgaW5kaWNhdGVzIHdoZXRoZXIgb3ZlcmR1ZSBzdWJzY3JpcHRpb25zIHNob3VsZCByZXR1cm5lZCBhcyB3ZWxsCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IG9mIGFzc29jaWF0aXZlIGFycmF5cyB3aXRoIHRoZSBmb2xsb3dpbmcgaW5kZWNpZXM6IGlkLCBuYW1lLCBhcHBseURhdGUsIGFtb3VudAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWN0aXZlTWVtYmVyc2hpcFN1YnNjcmlwdGlvbnMoJGluY2x1ZGVPdmVyZHVlU3Vic2NyaXB0aW9ucz1mYWxzZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkYWN0aXZlU3Vic2NyaXB0aW9ucyA9IGFycmF5KCk7CgkJCgkJJHNxbCA9ICAiU0VMRUNUIG8uZGF0ZV9hZGRlZCwgbS5uYW1lLCBtLmlkLCBvaS50b3RhbCwgb2kuaXRlbV9pZCwgb2kuc3RhdHVzLCBvaS5pZCBhcyBvcmRlcl9pdGVtX2lkIEZST00gIi5NTV9UQUJMRV9PUkRFUl9JVEVNX0FDQ0VTUy4iIG9pYSAiLgoJCSAgICAgICAgIklOTkVSIEpPSU4gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIG0gT04gKChvaWEudXNlcl9pZD0neyR0aGlzLT5nZXRJZCgpfScpIEFORCAob2lhLmFjY2Vzc190eXBlX2lkID0gbS5pZCkgQU5EIChvaWEuYWNjZXNzX3R5cGU9JyIuTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUC4iJykpICIuCgkJIAkgICAgIkxFRlQgSk9JTiAiLk1NX1RBQkxFX09SREVSX0lURU1TLiIgb2kgT04gKG9pYS5vcmRlcl9pdGVtX2lkPW9pLmlkKSAiLgoJCSAJICAgICJMRUZUIEpPSU4gIi5NTV9UQUJMRV9PUkRFUlMuIiBvIE9OIChvaS5vcmRlcl9pZCA9IG8uaWQpICIuCgkJIAkgICAgIldIRVJFIChvaS5zdGF0dXM9JyIuTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORy4iJyI7CgoJCWlmKCRpbmNsdWRlT3ZlcmR1ZVN1YnNjcmlwdGlvbnMpCgkJewoJCSAJJHNxbCAuPSAiIE9SIG9pLnN0YXR1cz0nIi5NTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQuIiciOwoJCX0KCQkKCQkkc3FsIC49ICIpOyI7CgkJCgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkKCQlpZigkcmVzdWx0cykKCQl7CgkJCWZvcmVhY2goJHJlc3VsdHMgYXMgJHJvd0RhdGEpCgkJCXsKCQkJCSRjcm50Um93ID0gYXJyYXkoKTsKCQkJCSRjcm50Um93WyJpZCJdID0gJHJvd0RhdGEtPmlkOwoJCQkJJGNybnRSb3dbIm5hbWUiXSA9ICRyb3dEYXRhLT5uYW1lOwoJCQkJJGNybnRSb3dbImFwcGx5RGF0ZSJdID0gJHJvd0RhdGEtPmRhdGVfYWRkZWQ7CgkJCQkkY3JudFJvd1siYW1vdW50Il0gPSAkcm93RGF0YS0+dG90YWw7CgkJCQkKCQkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJHJvd0RhdGEtPml0ZW1faWQpOwoJCQkJJHJlYmlsbERlc2NyaXB0aW9uID0gTU1fTk9fREFUQTsKCQkJCQoJCQkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkcmViaWxsRGVzY3JpcHRpb24gPSAkcHJvZHVjdC0+Z2V0QmlsbGluZ0Rlc2NyaXB0aW9uKGZhbHNlKTsKCQkJCX0KCQkJCQkKCQkJCSRjcm50Um93WyJyZWJpbGxfZGVzY3JpcHRpb24iXSA9ICRyZWJpbGxEZXNjcmlwdGlvbjsKCQkJCSRjcm50Um93WyJzdGF0dXMiXSA9ICRyb3dEYXRhLT5zdGF0dXM7CgkJCQkkY3JudFJvd1sib3JkZXJJdGVtSWQiXSA9ICRyb3dEYXRhLT5vcmRlcl9pdGVtX2lkOwoJCgkJCQlhcnJheV9wdXNoKCRhY3RpdmVTdWJzY3JpcHRpb25zLCAkY3JudFJvdyk7CgkJCX0KCQl9CgkKCQlyZXR1cm4gJGFjdGl2ZVN1YnNjcmlwdGlvbnM7Cgl9CgkKCQoJLyoqIEJVTkRMRS1SRUxFQVRFRCBNRVRIT0RTICoqLwogCQoJLyoqCgkgKiAKCSAqIEBwYXJhbSBOdW1iZXIgJGJ1bmRsZUlkIHRoZSBJRCBvZiB0aGUgYnVuZGxlIHRvIGFkZCB0byB0aGUgdXNlcgoJICogQHBhcmFtIEJvb2xlYW4gJGlzSW1wb3J0ZWQgYSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGlzIGJ1bmRsZSBpcyBiZWluZyBhZGRlZCBmcm9tIGFuIGltcG9ydAoJICovCiAJcHVibGljIGZ1bmN0aW9uIGFkZEJ1bmRsZSgkYnVuZGxlSWQsICRpc0ltcG9ydGVkPWZhbHNlKQogCXsJCiAJCXJldHVybiBNTV9BcHBsaWVkQnVuZGxlOjphcHBseUJ1bmRsZVRvVXNlcigkdGhpcy0+Z2V0SWQoKSwgJGJ1bmRsZUlkLCAkaXNJbXBvcnRlZCk7Cgl9CgoJLyoqCgkgKiBUaGlzIG1ldGhvZCByZW1vdmVzIGEgYnVuZGxlIGZyb20gdGhlIHVzZXIuCgkgKgoJICogQHBhcmFtIE51bWJlciAkYnVuZGxlSWQgdGhlIElEIG9mIHRoZSBidW5kbGUgdG8gcmVtb3ZlIGZyb20gdGhlIHVzZXIKCSAqIEBwYXJhbSBOdW1iZXIgJGZvcmNlU3RhdHVzIGEgdmFsaWQgTU1fU3RhdHVzIElEIHRoYXQgaW5kaWNhdGVzIHdoaWNoIHN0YXR1cyB0byBzZXQgb24gdGhlIGFwcGxpZWQgYnVuZGxlIGFmdGVyIGl0J3MgYmVlbiByZW1vdmVkLiBJZiBsZWZ0IGJsYW5rLCB0aGUgZXZlbnQgaGFuZGxpbmcgc2V0dGluZ3Mgd2lsbCBiZSB1c2VkIGZyb20gdGhlIE1NIGNvbmZpZ3VyYXRpb24uCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGEgcmVzcG9uc2Ugb2JqZWN0IHdpdGggdGhlIHR5cGUgYW5kIG1lc3NhZ2Ugc2V0IGJhc2VkIG9uIHRoZSByZXN1bHQgb2YgdGhlIG9wZXJhdGlvbgoJICovCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQnVuZGxlKCRidW5kbGVJZCwgJGZvcmNlU3RhdHVzPSIiKQoJewoJCXJldHVybiBNTV9BcHBsaWVkQnVuZGxlOjpyZW1vdmVCdW5kbGVGcm9tVXNlcigkdGhpcy0+Z2V0SWQoKSwgJGJ1bmRsZUlkLCAkZm9yY2VTdGF0dXMpOwoJfQogCQoJLyoqCgkgKiBHZXRzIGEgbGlzdCBvZiBhbGwgYXBwbGllZCBidW5kbGVzIHRvIHRoaXMgdXNlciB0aGF0IGFyZSBpbiBhY3RpdmUgb3IgcGF1c2VkIHN0YXR1cwoJICogCgkgKiBAcGFyYW0gQm9vbGVhbiAkaW5jbHVkZUFsbCBpbmRpY2F0ZXMgaWYgYWxsIGFwcGxpZWQgYnVuZGxlcyBzaG91bGQgYmUgcmV0dXJuZWQgb3IganVzdCB0aG9zZSB0aGF0IGFyZSBhY3RpdmUvcGF1c2VkCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IG9mIE1NX0FwcGxpZWRCdW5kbGUgaW5zdGFuY2VzIHRoYXQgYXJlIGluIGFjdGl2ZS9wYXVzZWQgc3RhdHVzIGZvciB0aGUgdXNlcgoJICovCiAJcHVibGljIGZ1bmN0aW9uIGdldEFwcGxpZWRCdW5kbGVzKCRpbmNsdWRlQWxsPWZhbHNlKQogCXsKIAkgCWdsb2JhbCAkd3BkYjsKIAkgCQogCSAJJGFwcGxpZWRCdW5kbGVzID0gYXJyYXkoKTsKIAkgCQogCSAJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQVBQTElFRF9CVU5ETEVTOwoJCSRzcWwgLj0gIiBXSEVSRSAoYWNjZXNzX3R5cGVfaWQgPSAneyR0aGlzLT5pZH0nKSBBTkQgKGFjY2Vzc190eXBlID0gJyIuTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX1VTRVIuIicpICI7CgkJCgkJaWYoISRpbmNsdWRlQWxsKQoJCXsKCQkJJHNxbCAuPSAiIEFORCAoc3RhdHVzID0gJyIuTU1fU3RhdHVzOjokQUNUSVZFLiInIE9SIHN0YXR1cyA9ICciLk1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OLiInIE9SIHN0YXR1cyA9ICciLk1NX1N0YXR1czo6JFBBVVNFRC4iJykiOwoJCX0KCQkKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCgkJaWYoJHJlc3VsdHMpCgkJewoJCQlmb3JlYWNoKCRyZXN1bHRzIGFzICRyb3dEYXRhKQoJCQl7CgkJCQkkYXBwbGllZEJ1bmRsZSA9IG5ldyBNTV9BcHBsaWVkQnVuZGxlKCk7CgkJCQkkYXBwbGllZEJ1bmRsZS0+c2V0RGF0YSgkcm93RGF0YSk7CgkJCQkKCQkJCWlmKCRhcHBsaWVkQnVuZGxlLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJYXJyYXlfcHVzaCgkYXBwbGllZEJ1bmRsZXMsICRhcHBsaWVkQnVuZGxlKTsKCQkJCX0KCQkJfQoJCX0KCgkJcmV0dXJuICRhcHBsaWVkQnVuZGxlczsKCX0KCQoJLyoqCgkgKiBHZXRzIGEgbGlzdCBvZiBhbGwgYnVuZGxlcyB0aGF0IGFyZSBhcHBsaWVkIGFuZCBoYXZlIGFjdGl2ZSBiaWxsaW5nCgkgKgoJICogQHBhcmFtICRpbmNsdWRlT3ZlcmR1ZVN1YnNjcmlwdGlvbnMgaW5kaWNhdGVzIHdoZXRoZXIgb3ZlcmR1ZSBzdWJzY3JpcHRpb25zIHNob3VsZCBiZSByZXR1cm5lZCBhcyB3ZWxsCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IG9mIGFzc29jaWF0aXZlIGFycmF5cyB3aXRoIHRoZSBmb2xsb3dpbmcgaW5kZWNpZXM6IGlkLCBuYW1lLCBhcHBseURhdGUsIGFtb3VudCAgCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRBY3RpdmVCdW5kbGVzKCRpbmNsdWRlT3ZlcmR1ZVN1YnNjcmlwdGlvbnM9ZmFsc2UpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRhY3RpdmVCdW5kbGVzID0gYXJyYXkoKTsKCQkKCQkkc3FsID0gICJTRUxFQ1Qgby5kYXRlX2FkZGVkLCBiLm5hbWUsIGIuaWQsIG9pLnRvdGFsLCBvaS5pdGVtX2lkLCBvaS5zdGF0dXMsIG9pLmlkIGFzIG9yZGVyX2l0ZW1faWQgRlJPTSAiLk1NX1RBQkxFX09SREVSX0lURU1fQUNDRVNTLiIgb2lhICIuCgkJCQkiSU5ORVIgSk9JTiAiLk1NX1RBQkxFX0JVTkRMRVMuIiBiIE9OICgob2lhLnVzZXJfaWQ9J3skdGhpcy0+Z2V0SWQoKX0nKSBBTkQgKG9pYS5hY2Nlc3NfdHlwZV9pZCA9IGIuaWQpIEFORCAob2lhLmFjY2Vzc190eXBlPSciLk1NX09yZGVySXRlbUFjY2Vzczo6JEFDQ0VTU19UWVBFX0JVTkRMRS4iJykpICIuCgkJCQkiTEVGVCBKT0lOICIuTU1fVEFCTEVfT1JERVJfSVRFTVMuIiBvaSBPTiAob2lhLm9yZGVyX2l0ZW1faWQ9b2kuaWQpICIuCgkJCQkiTEVGVCBKT0lOICIuTU1fVEFCTEVfT1JERVJTLiIgbyBPTiAob2kub3JkZXJfaWQgPSBvLmlkKSAiLgoJCQkJIldIRVJFIChvaS5zdGF0dXM9JyIuTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORy4iJyI7CgoJCWlmKCRpbmNsdWRlT3ZlcmR1ZVN1YnNjcmlwdGlvbnMpCgkJewoJCSAJJHNxbCAuPSAiIE9SIG9pLnN0YXR1cz0nIi5NTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQuIiciOwoJCX0KCQkKCQkkc3FsIC49ICIpOyI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJaWYoJHJlc3VsdHMpCgkJewoJCQlmb3JlYWNoKCRyZXN1bHRzIGFzICRyb3dEYXRhKQoJCQl7CgkJCQkkY3JudFJvdyA9IGFycmF5KCk7CgkJCQkkY3JudFJvd1siaWQiXSA9ICRyb3dEYXRhLT5pZDsKCQkJCSRjcm50Um93WyJuYW1lIl0gPSAkcm93RGF0YS0+bmFtZTsKCQkJCSRjcm50Um93WyJhcHBseURhdGUiXSA9ICRyb3dEYXRhLT5kYXRlX2FkZGVkOwoJCQkJJGNybnRSb3dbImFtb3VudCJdID0gJHJvd0RhdGEtPnRvdGFsOwoJCQkJCgkJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRyb3dEYXRhLT5pdGVtX2lkKTsKCQkJCSRyZWJpbGxEZXNjcmlwdGlvbiA9IE1NX05PX0RBVEE7CgkJCQkKCQkJCWlmKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHJlYmlsbERlc2NyaXB0aW9uID0gJHByb2R1Y3QtPmdldEJpbGxpbmdEZXNjcmlwdGlvbihmYWxzZSk7CgkJCQl9CgkJCQkJCgkJCQkkY3JudFJvd1sicmViaWxsX2Rlc2NyaXB0aW9uIl0gPSAkcmViaWxsRGVzY3JpcHRpb247CgkJCQkkY3JudFJvd1sic3RhdHVzIl0gPSAkcm93RGF0YS0+c3RhdHVzOwoJCQkJJGNybnRSb3dbIm9yZGVySXRlbUlkIl0gPSAkcm93RGF0YS0+b3JkZXJfaXRlbV9pZDsKCQkJCQoJCQkJYXJyYXlfcHVzaCgkYWN0aXZlQnVuZGxlcywgJGNybnRSb3cpOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkYWN0aXZlQnVuZGxlczsKCX0KCQoJLyoqCgkgKiBAcmV0dXJuIFN0cmluZyByZXR1cm5zIGEgY29tbWEtZGVsaW1pbmF0ZWQgbGlzdCBvZiBhbGwgYnVuZGxlcyB0aGF0IGFyZSBhY3RpdmUgb24gdGhlIHVzZXIncyBhY2NvdW50CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRBcHBsaWVkQnVuZGxlTmFtZXMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCgkJJHNxbCA9ICJTRUxFQ1QgYnVuZGxlcy5uYW1lLCBhcHBsaWVkQnVuZGxlcy5zdGF0dXMgRlJPTSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUy4iIGFwcGxpZWRCdW5kbGVzLCAiLk1NX1RBQkxFX0JVTkRMRVMuIiBidW5kbGVzICI7CgkJJHNxbCAuPSAiIFdIRVJFIChhcHBsaWVkQnVuZGxlcy5hY2Nlc3NfdHlwZV9pZCA9ICd7JHRoaXMtPmlkfScpIEFORCAoYXBwbGllZEJ1bmRsZXMuYWNjZXNzX3R5cGUgPSAnIi5NTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfVVNFUi4iJykgIjsKCQkkc3FsIC49ICIgQU5EIChhcHBsaWVkQnVuZGxlcy5idW5kbGVfaWQgPSBidW5kbGVzLmlkKSBBTkQgKGFwcGxpZWRCdW5kbGVzLnN0YXR1cyA9ICciLk1NX1N0YXR1czo6JEFDVElWRS4iJyBPUiBhcHBsaWVkQnVuZGxlcy5zdGF0dXMgPSAnIi5NTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTi4iJyBPUiBhcHBsaWVkQnVuZGxlcy5zdGF0dXMgPSAnIi5NTV9TdGF0dXM6OiRPVkVSRFVFLiInKTsiOwoJCSRidW5kbGVzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQoJCWlmKCRidW5kbGVzKQoJCXsKCQkJJGFsbG93T3ZlcmR1ZUFjY2VzcyA9IChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9BTExPV19PVkVSRFVFX0FDQ0VTUykgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCQkJJGJ1bmRsZVN0ciA9ICIiOwoJCQkkY3RyID0gMDsKCQkKCQkJZm9yZWFjaCgkYnVuZGxlcyBhcyAkYnVuZGxlKQoJCQl7CgkJCQlpZigkYnVuZGxlLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokT1ZFUkRVRSAmJiAhJGFsbG93T3ZlcmR1ZUFjY2VzcykKCQkJCXsKCQkJCQljb250aW51ZTsKCQkJCX0KCQkJCQoJCQkJaWYoJGN0ciA+IDApIHsKCQkJCQkkYnVuZGxlU3RyIC49ICIsICI7CgkJCQl9CgkJCgkJCQkkYnVuZGxlU3RyIC49ICRidW5kbGUtPm5hbWU7CgkJCQkkY3RyKys7CgkJCX0KCQkKCQkJcmV0dXJuICRidW5kbGVTdHI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiIjsKCQl9Cgl9CgoJcHVibGljIGZ1bmN0aW9uIGhhc0J1bmRsZSgkYnVuZGxlSWQsICRpbmNsdWRlQWxsU3RhdHVzZXM9dHJ1ZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgY291bnQoKikgYXMgdG90YWwgRlJPTSAiLk1NX1RBQkxFX0FQUExJRURfQlVORExFUzsKCQkkc3FsIC49ICIgV0hFUkUgKGJ1bmRsZV9pZD0neyRidW5kbGVJZH0nKSBBTkQgKChhY2Nlc3NfdHlwZV9pZD0neyR0aGlzLT5nZXRJZCgpfScgQU5EIGFjY2Vzc190eXBlPSciLk1NX0FwcGxpZWRCdW5kbGU6OiRBQ0NFU1NfVFlQRV9VU0VSLiInKSAiOwoJCSRzcWwgLj0gIiBPUiAoYWNjZXNzX3R5cGVfaWQ9JyIuJHRoaXMtPmdldE1lbWJlcnNoaXBJZCgpLiInIEFORCBhY2Nlc3NfdHlwZT0nIi5NTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUC4iJykpICI7CgkJCgkJaWYoISRpbmNsdWRlQWxsU3RhdHVzZXMpCgkJewoJCQkkc3FsLj0gIiBBTkQgKHN0YXR1cz0nIi5NTV9TdGF0dXM6OiRBQ1RJVkUuIicgT1Igc3RhdHVzPSciLk1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OLiInIE9SIHN0YXR1cz0nIi5NTV9TdGF0dXM6OiRQQVVTRUQuIicpICI7CgkJfQoJCQogCSAJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwogCSAJCiAJIAlpZihpc19udWxsKCRyb3cpKSAKIAkgCXsKIAkgCQlyZXR1cm4gZmFsc2U7CiAJIAl9CiAJIAkKIAkgCXJldHVybiAoJHJvdy0+dG90YWwgPiAwKTsKIAl9CgkKIAkvKioKIAkgKiBEZXRlcm1pbmVzIHRoZSBudW1iZXIgb2YgZGF5cyBhIHVzZXIgaGFzIGhhZCBhIHBhcnRpY3VsYXIgYnVuZGxlIGFwcGxpZWQgdG8gdGhlaXIgYWNjb3VudAogCSAqIAogCSAqIEBwYXJhbSBOdW1iZXIgJGJ1bmRsZUlkIHRoZSBJRCBvZiB0aGUgYnVuZGxlIHRvIGNoZWNrCiAJICogQHJldHVybiBOdW1iZXJ8ZmFsc2UgcmV0dXJucyB0aGUgbnVtYmVyIG9mIGRheXMgYSBidW5kbGUgaGFzIGJlZW4gYXBwbGllZCB0byB0aGUgdXNlcidzIGFjY291bnQgb3IgZmFsc2UgaWYgdGhlIGJ1bmRsZSBpcyBub3QgYXBwbGllZCB0byB0aGVpciBhY2NvdW50CiAJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF5c1dpdGhCdW5kbGUoJGJ1bmRsZUlkKQoJewkKCQkkYXBwbGllZEJ1bmRsZSA9IE1NX0FwcGxpZWRCdW5kbGU6OmdldEFwcGxpZWRCdW5kbGUoJHRoaXMtPmlkLCAkYnVuZGxlSWQpOwoJCQoJCWlmKCEkYXBwbGllZEJ1bmRsZS0+aXNWYWxpZCgpKQoJCXsgCgkJCS8vIGNoZWNrIHRvIHNlZSBpZiBtZW1iZXJzaGlwIHJlbGF0ZWQKCQkJJHVzZXJNZW1iZXJCdW5kbGVzID0gJHRoaXMtPmdldE1lbWJlcnNoaXBMZXZlbCgpLT5nZXRCdW5kbGVzKCk7CgkJCSR1c2VyTWVtYmVyQnVuZGxlS2V5cyA9IGFycmF5X2tleXMoJHVzZXJNZW1iZXJCdW5kbGVzKTsgICAKCQkJaWYoaW5fYXJyYXkoJGJ1bmRsZUlkLCAkdXNlck1lbWJlckJ1bmRsZUtleXMpKQoJCQl7IAoJCQkJcmV0dXJuICR0aGlzLT5nZXREYXlzV2l0aEJ1bmRsZVdpdGhBY2Nlc3NUeXBlKCRidW5kbGVJZCwgTU1fQXBwbGllZEJ1bmRsZTo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVAsICR0aGlzLT5nZXRNZW1iZXJzaGlwSWQoKSk7CgkJCX0gCgkJCWVsc2UKCQkJeyAKCQkJCXJldHVybiBmYWxzZTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gJGFwcGxpZWRCdW5kbGUtPmdldERheXNXaXRoQnVuZGxlKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXlzV2l0aEJ1bmRsZVdpdGhBY2Nlc3NUeXBlKCRidW5kbGVJZCwgJGFjY2Vzc1R5cGUsICRyZWZJZCkKCXsJCgkJJGFwcGxpZWRCdW5kbGUgPSBNTV9BcHBsaWVkQnVuZGxlOjpnZXRBcHBsaWVkQnVuZGxlV2l0aEFjY2Vzc1R5cGUoJHJlZklkLCAkYnVuZGxlSWQsICRhY2Nlc3NUeXBlKTsKCQkKCQlpZighJGFwcGxpZWRCdW5kbGUtPmlzVmFsaWQoKSkKCQl7ICAKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQlpZigkYWNjZXNzVHlwZSA9PSBNTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCkKCQl7CgkJCXJldHVybiAkYXBwbGllZEJ1bmRsZS0+Z2V0RGF5c1dpdGhCdW5kbGVBc01lbWJlcigkdGhpcy0+aWQpOwoJCX0KCQlyZXR1cm4gJGFwcGxpZWRCdW5kbGUtPmdldERheXNXaXRoQnVuZGxlKCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBidW5kbGVIYXNFeHBpcmVkKCRidW5kbGVJZCkKCXsKCQlpZigkdGhpcy0+aXNWYWxpZCgpICYmICR0aGlzLT5oYXNCdW5kbGUoJGJ1bmRsZUlkKSkKCQl7CgkJCSRhcHBsaWVkQnVuZGxlID0gTU1fQXBwbGllZEJ1bmRsZTo6Z2V0QXBwbGllZEJ1bmRsZSgkdGhpcy0+Z2V0SWQoKSwgJGJ1bmRsZUlkKTsKCQkJcmV0dXJuICRhcHBsaWVkQnVuZGxlLT5oYXNFeHBpcmVkKCk7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCgkvKiogUFJPRFVDVCBSRUxBVEVEIE1FVEhPRFMgKi8KCS8qKgoJICogR2V0cyBhIGxpc3Qgb2YgSURzIG9mIGFsbCBwcm9kdWN0cyBwdXJjaGFzZWQKCSAqCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IG9mIHByb2R1Y3QgSURzIHB1cmNoYXNlZCBieSB0aGUgdXNlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJvZHVjdHNQdXJjaGFzZWQoJGV4Y2x1ZGVTdGF0dXNJZHM9YXJyYXkoKSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHByb2R1Y3RzUHVyY2hhZWQgPSBhcnJheSgpOwoJCgkJJG9yZGVyc1RhYmxlID0gTU1fVEFCTEVfT1JERVJTOwoJCSRvcmRlckl0ZW1zVGFibGUgPSBNTV9UQUJMRV9PUkRFUl9JVEVNUzsKCQkkcHJvZHVjdEl0ZW1UeXBlID0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1Q7IAoJCQoJCSRzcWwgPSAiU0VMRUNUIGl0ZW1faWQgYXMgcHJvZHVjdF9pZCwgeyRvcmRlckl0ZW1zVGFibGV9LnN0YXR1cyBGUk9NIHskb3JkZXJzVGFibGV9IEpPSU4geyRvcmRlckl0ZW1zVGFibGV9IE9OICh7JG9yZGVyc1RhYmxlfS5pZCA9IHskb3JkZXJJdGVtc1RhYmxlfS5vcmRlcl9pZCkgICI7CgkJJHNxbCAuPSAiIFdIRVJFIChpdGVtX3R5cGUgPSB7JHByb2R1Y3RJdGVtVHlwZX0pIEFORCAodXNlcl9pZCA9ICd7JHRoaXMtPmdldElkKCl9JykgICI7CgkKCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQoJCWlmKCRyZXN1bHRzKQoJCXsKCQkJZm9yZWFjaCgkcmVzdWx0cyBhcyAkcm93RGF0YSkKCQkJewoJCQkJaWYoIWluX2FycmF5KCRyb3dEYXRhLT5zdGF0dXMsICRleGNsdWRlU3RhdHVzSWRzKSkKCQkJCXsKCQkJCQlhcnJheV9wdXNoKCRwcm9kdWN0c1B1cmNoYWVkLCAkcm93RGF0YS0+cHJvZHVjdF9pZCk7CgkJCQl9CgkJCX0KCQl9CgkKCQlyZXR1cm4gJHByb2R1Y3RzUHVyY2hhZWQ7Cgl9CgoJCgkKCS8qKiBHSUZUIFJFTEFURUQgTUVUSE9EUyAqLwoJCglwdWJsaWMgZnVuY3Rpb24gaGFzR2lmdHMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRzcWwgPSAiU0VMRUNUIGNvdW50KCopIGFzIHRvdGFsIEZST00gIi5NTV9UQUJMRV9DT1VQT05TLiIgV0hFUkUgaXNfZ2lmdCA9ICcxJyBBTkQgZ2lmdF91c2VyX2lkID0gJ3skdGhpcy0+Z2V0SWQoKX0nOyI7CgkKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkKCQlpZihpc19udWxsKCRyb3cpKQoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQoJCXJldHVybiAoJHJvdy0+dG90YWwgPiAwKTsKCX0KCQoJCgkvKioKCSAqIEdldHMgYSBsaXN0IG9mIGFsbCBhY3RpdmUgc3Vic2NyaXB0aW9ucyB0aGF0IHdlcmUgZ2lmdGVkCgkgKgoJICogQHBhcmFtICRpbmNsdWRlT3ZlcmR1ZVN1YnNjcmlwdGlvbnMgaW5kaWNhdGVzIHdoZXRoZXIgb3ZlcmR1ZSBzdWJzY3JpcHRpb25zIHNob3VsZCByZXR1cm5lZCBhcyB3ZWxsCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IG9mIGFzc29jaWF0aXZlIGFycmF5cyB3aXRoIHRoZSBmb2xsb3dpbmcgaW5kZWNpZXM6IGlkLCBuYW1lLCBhcHBseURhdGUsIGFtb3VudAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWN0aXZlR2lmdFN1YnNjcmlwdGlvbnMoJGluY2x1ZGVPdmVyZHVlU3Vic2NyaXB0aW9ucz1mYWxzZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkYWN0aXZlU3Vic2NyaXB0aW9ucyA9IGFycmF5KCk7CgkJCgkJJG9yZGVyc1RhYmxlID0gTU1fVEFCTEVfT1JERVJTOwoJCSRvcmRlckl0ZW1zVGFibGUgPSBNTV9UQUJMRV9PUkRFUl9JVEVNUzsKCQkkc3RhdHVzUmVjdXJyaW5nID0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORzsKCQkkc3RhdHVzUmViaWxsRmFpbGVkID0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEOwoJCQoJCSRzcWwgPSAiU0VMRUNUIG9pLnRvdGFsLCBvaS5pdGVtX2lkLCBvaS5zdGF0dXMsIG9pLmlkIGFzIG9yZGVyX2l0ZW1faWQsIG8uZGF0ZV9hZGRlZCBGUk9NIHskb3JkZXJJdGVtc1RhYmxlfSBvaSAiLgoJCQkiTEVGVCBKT0lOIHskb3JkZXJzVGFibGV9IG8gb24gKG9pLm9yZGVyX2lkID0gby5pZCkgIi4KCQkJIkxFRlQgSk9JTiB7JHdwZGItPnVzZXJzfSB1IE9OIChvLnVzZXJfaWQgPSB1LklEKSAiLgoJCQkiV0hFUkUgKG8udXNlcl9pZCA9IHskdGhpcy0+Z2V0SWQoKX0pIEFORCAob2kuc3RhdHVzID0geyRzdGF0dXNSZWN1cnJpbmd9IjsKCQoJCWlmKCRpbmNsdWRlT3ZlcmR1ZVN1YnNjcmlwdGlvbnMpCgkJewoJCQkkc3FsIC49ICIgT1Igb2kuc3RhdHVzPSB7JHN0YXR1c1JlYmlsbEZhaWxlZH0iOwoJCX0KCQoJCSRzcWwgLj0gIikgQU5EIChvaS5pc19naWZ0ID0gMSk7IjsKCQoJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCgkJaWYoJHJlc3VsdHMpCgkJewoJCQlmb3JlYWNoKCRyZXN1bHRzIGFzICRyb3dEYXRhKQoJCQl7CgkJCQkkY3JudFJvdyA9IGFycmF5KCk7CgkJCQkkY3JudFJvd1siYXBwbHlEYXRlIl0gPSAkcm93RGF0YS0+ZGF0ZV9hZGRlZDsKCQkJCSRjcm50Um93WyJhbW91bnQiXSA9ICRyb3dEYXRhLT50b3RhbDsKCQoJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcm93RGF0YS0+aXRlbV9pZCk7CgkJCQkkcmViaWxsRGVzY3JpcHRpb24gPSBNTV9OT19EQVRBOwoJCgkJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRjcm50Um93WyJpZCJdID0gJHByb2R1Y3QtPmdldElkKCk7CgkJCQkJJGNybnRSb3dbIm5hbWUiXSA9ICRwcm9kdWN0LT5nZXROYW1lKCk7CgkJCQkJJHJlYmlsbERlc2NyaXB0aW9uID0gJHByb2R1Y3QtPmdldEJpbGxpbmdEZXNjcmlwdGlvbihmYWxzZSk7CgkJCQl9CgkJCQkJCgkJCQkkY3JudFJvd1sicmViaWxsX2Rlc2NyaXB0aW9uIl0gPSAkcmViaWxsRGVzY3JpcHRpb247CgkJCQkkY3JudFJvd1sic3RhdHVzIl0gPSAkcm93RGF0YS0+c3RhdHVzOwoJCQkJJGNybnRSb3dbIm9yZGVySXRlbUlkIl0gPSAkcm93RGF0YS0+b3JkZXJfaXRlbV9pZDsKCQoJCQkJYXJyYXlfcHVzaCgkYWN0aXZlU3Vic2NyaXB0aW9ucywgJGNybnRSb3cpOwoJCQl9CgkJfQoJCgkJcmV0dXJuICRhY3RpdmVTdWJzY3JpcHRpb25zOwoJfQoJCgkKCQoJLyoqIENVU1RPTSBGSUVMRC1SRUxBVEVEIE1FVEhPRFMgKiovCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDdXN0b21EYXRhKCRjdXN0b21GaWVsZElkLCAkdmFsdWUpCgl7CgkJJGZpZWxkRGF0YSA9IE1NX0N1c3RvbUZpZWxkRGF0YTo6Z2V0Q3VzdG9tRmllbGREYXRhQnlVc2VyKCRjdXN0b21GaWVsZElkLCAkdGhpcy0+Z2V0SWQoKSk7CgkJCgkJLy8gdXBkYXRlIGV4aXN0aW5nIGRhdGEKCQlpZigkZmllbGREYXRhLT5pc1ZhbGlkKCkpCgkJewoJCQlpZihzdHJpcF90YWdzKCR2YWx1ZSkgIT0gc3RyaXBfdGFncygkZmllbGREYXRhLT5nZXRWYWx1ZSgpKSkKCQkJewoJCQkJJGZpZWxkRGF0YS0+c2V0VmFsdWUoc3RyaXBfdGFncygkdmFsdWUpKTsKCQkJCXJldHVybiAkZmllbGREYXRhLT5jb21taXREYXRhKCk7CgkJCX0KCQl9CgkJZWxzZSBpZigkdmFsdWUgIT0gIiIpCgkJewoJCQkkZmllbGREYXRhLT5zZXRVc2VySWQoJHRoaXMtPmlkKTsKCQkJJGZpZWxkRGF0YS0+c2V0Q3VzdG9tRmllbGRJZCgkY3VzdG9tRmllbGRJZCk7CgkJCSRmaWVsZERhdGEtPnNldFZhbHVlKHN0cmlwX3RhZ3MoJHZhbHVlKSk7CgkJCXJldHVybiAkZmllbGREYXRhLT5jb21taXREYXRhKCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBAcGFyYW0gTnVtYmVyICRmaWVsZElkIHRoZSBJRCBvZiB0aGUgY3VzdG9tIGZpZWxkIHRvIGdldCBkYXRhIGZvcgoJICogQHJldHVybiBNTV9DdXN0b21GaWVsZERhdGEKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEN1c3RvbURhdGFCeUZpZWxkSWQoJGZpZWxkSWQpCgl7CgkJcmV0dXJuIE1NX0N1c3RvbUZpZWxkRGF0YTo6Z2V0Q3VzdG9tRmllbGREYXRhQnlVc2VyKCRmaWVsZElkLCAkdGhpcy0+Z2V0SWQoKSk7Cgl9CgkKCQoJCiAJLyoqIEdFVFRFUlMvU0VUVEVSUyAqKi8KCiAJcHVibGljIGZ1bmN0aW9uIGlzRnJlZSgpCiAJewogCQkkbWVtYmVyc2hpcCA9ICR0aGlzLT5nZXRNZW1iZXJzaGlwTGV2ZWwoKTsKIAkJcmV0dXJuICRtZW1iZXJzaGlwLT5pc0ZyZWUoKTsKIAl9CgogCQogCS8qKgogCSAqIFJldHVybnMgd2hldGhlciBhIHVzZXIgaGFzIGEgc3RvcmVkIGNhcmQgb24gZmlsZSB3aXRoIGFuIGFjdGl2ZSBwYXltZW50IHNlcnZpY2UKIAkgKiAKIAkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBvciBmYWxzZQogCSAqLwoJcHVibGljIGZ1bmN0aW9uIGhhc0NhcmRPbkZpbGUoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQlpZiAoISR0aGlzLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCSRzcWwgPSAiU0VMRUNUIENPVU5UKCopIEZST00gIi5NTV9UQUJMRV9DQVJEX09OX0ZJTEUuIiBjb2YsICAiLk1NX1RBQkxFX1BBWU1FTlRfU0VSVklDRVMuIiBwcyAiLgoJCQkgICAiV0hFUkUgKGNvZi5wYXltZW50X3NlcnZpY2VfaWQgPSBwcy5pZCkgQU5EIChjb2YudXNlcl9pZCA9ICd7JHRoaXMtPmdldElkKCl9JykgQU5EIChwcy5hY3RpdmUgPSAxKSI7CgkJJGNhcmRzT25GaWxlID0gJHdwZGItPmdldF92YXIoJHNxbCk7CgkJCgkJaWYgKCRjYXJkc09uRmlsZSA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCQoJCXJldHVybiAoJGNhcmRzT25GaWxlID4gMCk7Cgl9CgkKCS8qKgoJICogUmV0dXJucyB0aGUgYmlsbGluZyBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdXNlcidzIGNhcmQgb24gZmlsZSBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSBpdCB3aWxsIGp1c3QgCgkgKiByZXR1cm4gdGhlIHByaW1hcnkgYmlsbGluZyBhZGRyZXNzIG9uIHRoZSB1c2VyJ3MgYWNjb3VudC4KCSAqIAoJICogQHJldHVybiBNTV9DdXN0b21lckFkZHJlc3MgcmV0dXJucyB0aGUgYmlsbGluZyBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdXNlcidzIGNhcmQgb24gZmlsZSBvciB0aGUgYmlsbGluZyBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGVpciBhY2NvdW50CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRDYXJkT25GaWxlQmlsbGluZ0FkZHJlc3MoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkQ09GT3JkZXJTUUwgPSAiU0VMRUNUIG9yaWdpbmFsX29yZGVyX2lkIEZST00gIi5NTV9UQUJMRV9DQVJEX09OX0ZJTEUuICIgV0hFUkUgdXNlcl9pZCA9ICd7JHRoaXMtPmlkfSciOwoJCSRjb2ZPcmRlcklkID0gJHdwZGItPmdldF92YXIoJENPRk9yZGVyU1FMKTsKCQlpZiAoIWVtcHR5KCRjb2ZPcmRlcklkKSkKCQl7CgkJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkY29mT3JkZXJJZCk7CgkJCWlmICgkb3JkZXItPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKTsKCQkJfQoJCX0KCQlyZXR1cm4gJHRoaXMtPmdldEZ1bGxCaWxsaW5nQWRkcmVzcygpOwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBpc0FjdGl2ZSgpCgl7CgkJaWYoJHRoaXMtPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JENBTkNFTEVEICYmICR0aGlzLT5nZXRTdGF0dXMgIT0gTU1fU3RhdHVzOjokUEFVU0VEKSAKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQllbHNlIHsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFRvdGFsUGF5bWVudHMoKQoJewoJCWlmKCR0aGlzLT50b3RhbFBheW1lbnRzID09IDApCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCSRzcWwgPSAiU0VMRUNUIC0oU1VNKHQuYW1vdW50KSkgQVMgYW1vdW50IEZST00gbW1fdHJhbnNhY3Rpb25fbG9nIHQgSU5ORVIgSk9JTiBtbV9vcmRlcnMgbyBPTiAodC5vcmRlcl9pZCA9IG8uaWQpIFdIRVJFICh0LnRyYW5zYWN0aW9uX3R5cGUgSU4gKDIsNCkpIEFORCAoby51c2VyX2lkID0geyR0aGlzLT5pZH0pICI7CgkJCSR0b3RhbFBheW1lbnRzID0gJHdwZGItPmdldF92YXIoJHNxbCk7CgkJCQoJCQlpZighaXNfbnVsbCgkdG90YWxQYXltZW50cykpCgkJCXsKCQkJCSR0aGlzLT50b3RhbFBheW1lbnRzID0gJHRvdGFsUGF5bWVudHM7CgkJCX0KCQl9CgkJCgkJcmV0dXJuICR0aGlzLT50b3RhbFBheW1lbnRzOwoJfQoJCgkvKioKCSAqIFJldHVybnMgdGhlIHN1bSBvZiBhbGwgcmVmdW5kcywgY3JlZGl0cywgYW5kIGNoYXJnZWJhY2tzIGlzc3VlZCB0byB0aGUgdXNlcgoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0VG90YWxSZWZ1bmRzKCkKCXsKCQlpZigkdGhpcy0+dG90YWxSZWZ1bmRzID09IDApCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCSRzcWwgPSAiU0VMRUNUIC0oU1VNKHQuYW1vdW50KSkgQVMgYW1vdW50IEZST00gbW1fdHJhbnNhY3Rpb25fbG9nIHQgSU5ORVIgSk9JTiBtbV9vcmRlcnMgbyBPTiAodC5vcmRlcl9pZCA9IG8uaWQpIFdIRVJFICh0LnRyYW5zYWN0aW9uX3R5cGUgSU4gKDUsNiw3KSkgQU5EIChvLnVzZXJfaWQgPSB7JHRoaXMtPmlkfSkgIjsKCQkJJHRvdGFsUmVmdW5kcyA9ICR3cGRiLT5nZXRfdmFyKCRzcWwpOwoJCQkKCQkJaWYoIWlzX251bGwoJHRvdGFsUmVmdW5kcykpCgkJCXsKCQkJCSR0aGlzLT50b3RhbFJlZnVuZHMgPSAkdG90YWxSZWZ1bmRzOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkdGhpcy0+dG90YWxSZWZ1bmRzOwoJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBzZXRVc2VybmFtZSgkc3RyKQogCXsKIAkJaWYoJHN0ciAhPSAkdGhpcy0+dXNlcm5hbWUpCiAJCXsKIAkJCSR0aGlzLT5sYXN0VXNlcm5hbWUgPSAkdGhpcy0+dXNlcm5hbWU7CiAJCX0KIAkgCSR0aGlzLT51c2VybmFtZSA9ICRzdHI7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0VXNlcm5hbWUoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+dXNlcm5hbWU7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBzZXRGb3Jnb3RQYXNzd29yZEhhc2goJHN0cikKIAl7CgkJaWYoJHRoaXMtPmZvcmdvdFBhc3N3b3JkSGFzaCAhPSAkc3RyKQogCQl7CiAJCQkkdGhpcy0+bGFzdEZvcmdvdFBhc3N3b3JkSGFzaCA9ICR0aGlzLT5mb3Jnb3RQYXNzd29yZEhhc2g7CiAJCX0KIAkJJHRoaXMtPmZvcmdvdFBhc3N3b3JkSGFzaCA9ICRzdHI7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRGb3Jnb3RQYXNzd29yZEhhc2goKQogCXsKIAkgCXJldHVybiAkdGhpcy0+Zm9yZ290UGFzc3dvcmRIYXNoOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIHNldFBhc3N3b3JkKCRzdHIpCiAJewoJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRQQVJBTV9VU0VSX0RBVEFfUEFTU1dPUkQsICRzdHIpOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldFBhc3N3b3JkKCkKIAl7CiAJIAlyZXR1cm4gTU1fU2Vzc2lvbjo6dmFsdWUoTU1fU2Vzc2lvbjo6JFBBUkFNX1VTRVJfREFUQV9QQVNTV09SRCkgPyBNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokUEFSQU1fVVNFUl9EQVRBX1BBU1NXT1JEKSA6IE5VTEw7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0RW1haWwoJHN0cikKIAl7CiAJCWlmICgkdGhpcy0+aXNWYWxpZCgpICYmICgkc3RyICE9ICR0aGlzLT5lbWFpbCkpCiAJCXsKIAkJCSR0aGlzLT5sYXN0RW1haWwgPSAkdGhpcy0+ZW1haWw7CiAJCX0KIAkgCSR0aGlzLT5lbWFpbCA9ICRzdHI7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0RW1haWwoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+ZW1haWw7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0Rmlyc3ROYW1lKCRzdHIpCiAJewogCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAgJiYgKCRzdHIgIT0gJHRoaXMtPmZpcnN0TmFtZSkpCiAJCXsKIAkJCSR0aGlzLT5sYXN0Rmlyc3ROYW1lID0gJHRoaXMtPmZpcnN0TmFtZTsKIAkJfQogCSAJJHRoaXMtPmZpcnN0TmFtZSA9ICRzdHI7CiAJfQogCSAKICAJcHVibGljIGZ1bmN0aW9uIGdldEZpcnN0TmFtZSgpCiAJewogCQlyZXR1cm4gJHRoaXMtPmZpcnN0TmFtZTsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRMYXN0TmFtZSgkc3RyKQogCXsKIAkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgJiYgKCRzdHIgIT0gJHRoaXMtPmxhc3ROYW1lKSkKIAkJewogCQkJJHRoaXMtPmxhc3RMYXN0TmFtZSA9ICR0aGlzLT5sYXN0TmFtZTsKIAkJfQogCSAJJHRoaXMtPmxhc3ROYW1lID0gJHN0cjsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0TmFtZSgpCiAJewogCQlyZXR1cm4gc3RyaXBzbGFzaGVzKCR0aGlzLT5sYXN0TmFtZSk7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0RnVsbE5hbWUoJGxhc3ROYW1lRmlyc3Q9ZmFsc2UpCiAJewogCQkkZmlyc3RQb3NpdGlvbiA9ICgkbGFzdE5hbWVGaXJzdCk/JHRoaXMtPmdldExhc3ROYW1lKCk6JHRoaXMtPmdldEZpcnN0TmFtZSgpOwogCQkkc2VwYXJhdG9yID0gKCRsYXN0TmFtZUZpcnN0KT8iLCAiOiIgIjsKIAkJJGxhc3RQb3NpdGlvbiA9ICgkbGFzdE5hbWVGaXJzdCk/JHRoaXMtPmdldEZpcnN0TmFtZSgpOiR0aGlzLT5nZXRMYXN0TmFtZSgpOwogCQkKIAkJJG5hbWUgPSAkZmlyc3RQb3NpdGlvbjsKIAkJaWYgKCFlbXB0eSgkZmlyc3RQb3NpdGlvbikgJiYgIWVtcHR5KCRsYXN0UG9zaXRpb24pKQogCQl7CiAJCQkkbmFtZSAuPSAkc2VwYXJhdG9yOwogCQl9CiAJCSRuYW1lIC49ICRsYXN0UG9zaXRpb247CiAJCQogCQlyZXR1cm4gJG5hbWU7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBzZXRJc0NTVkltcG9ydCgkdmFsKQogCXsKIAkJJHRoaXMtPmlzQ1NWSW1wb3J0ID0gJHZhbDsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldElzQ1NWSW1wb3J0KCkKIAl7CiAJCSR0aGlzLT5pc0NTVkltcG9ydDsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRQaG9uZSgkc3RyKQogCXsKIAkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgJiYgKCRzdHIgIT0gJHRoaXMtPnBob25lKSkKIAkJewogCQkJJHRoaXMtPmxhc3RQaG9uZSA9ICR0aGlzLT5waG9uZTsKIAkJfQogCSAJJHRoaXMtPnBob25lID0gJHN0cjsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBnZXRQaG9uZSgpCiAJewogCQlpZihpc3NldCgkdGhpcy0+cGhvbmUpKQogCQl7CiAJIAkJcmV0dXJuICR0aGlzLT5waG9uZTsKIAkJfQogCQlyZXR1cm4gIiI7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBzZXROb3Rlcygkc3RyKQogCXsKIAkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgJiYgKCRzdHIgIT0gJHRoaXMtPm5vdGVzKSkKIAkJewogCQkJJHRoaXMtPmxhc3ROb3RlcyA9ICR0aGlzLT5ub3RlczsKIAkJfQogCSAJJHRoaXMtPm5vdGVzID0gJHN0cjsKIAl9CiAJIAogIAlwdWJsaWMgZnVuY3Rpb24gZ2V0Tm90ZXMoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+bm90ZXM7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0UmVnaXN0cmF0aW9uRGF0ZSgkZGF0ZSkKIAl7CiAJIAkkdGhpcy0+cmVnaXN0cmF0aW9uRGF0ZSA9ICRkYXRlOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldFJlZ2lzdHJhdGlvbkRhdGUoJGRvRm9ybWF0PWZhbHNlKQogCXsKIAkgCWlmKCRkb0Zvcm1hdCA9PSBmYWxzZSkgCiAJIAl7CiAJIAkJcmV0dXJuICR0aGlzLT5yZWdpc3RyYXRpb25EYXRlOwogCSAJfQogCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+cmVnaXN0cmF0aW9uRGF0ZSkpIAogCQl7CiAJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5yZWdpc3RyYXRpb25EYXRlKTsKIAkJfQogCQllbHNlCiAJCXsKIAkJCXJldHVybiBudWxsOwogCQl9CiAJfQogCiAJcHVibGljIGZ1bmN0aW9uIHNldEV4cGlyYXRpb25EYXRlKCRkYXRlKQogCXsKIAkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgICYmICgkZGF0ZSAhPSAkdGhpcy0+ZXhwaXJhdGlvbkRhdGUpKQogCQl7CiAJCQkkdGhpcy0+bGFzdEV4cGlyYXRpb25EYXRlID0gJHRoaXMtPmV4cGlyYXRpb25EYXRlOwogCQl9CiAJCSR0aGlzLT5leHBpcmF0aW9uRGF0ZSA9ICRkYXRlOwogCX0KIAkJCiAJcHVibGljIGZ1bmN0aW9uIGdldEV4cGlyYXRpb25EYXRlKCRkb0Zvcm1hdD1mYWxzZSkKIAl7CiAJCSRtZW1iZXJzaGlwID0gJHRoaXMtPmdldE1lbWJlcnNoaXBMZXZlbCgpOwogCQlpZigkbWVtYmVyc2hpcC0+ZG9lc0V4cGlyZSgpKQogCQl7CiAJCQlpZihlbXB0eSgkdGhpcy0+ZXhwaXJhdGlvbkRhdGUpIHx8ICR0aGlzLT5leHBpcmF0aW9uRGF0ZSA9PSAiMDAwMC0wMC0wMCAwMDowMDowMCIpCiAJCQl7CiAJCQkJJHRoaXMtPnNldEV4cGlyYXRpb25EYXRlKCRtZW1iZXJzaGlwLT5nZXRFeHBpcmF0aW9uRGF0ZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSkpOwogCQkJfQoJIAkJCgkgCQlpZigkZG9Gb3JtYXQgPT0gZmFsc2UpIAoJIAkgCXsKCSAJIAkJcmV0dXJuICR0aGlzLT5leHBpcmF0aW9uRGF0ZTsKCSAJIAl9CgkgCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+ZXhwaXJhdGlvbkRhdGUpKSAKCSAJCXsKCSAJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5leHBpcmF0aW9uRGF0ZSk7CgkgCQl9CiAJCX0KIAkJCiAJCXJldHVybiBudWxsOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gc2V0Q2FuY2VsbGF0aW9uRGF0ZSgkZGF0ZSkKIAl7CiAJCWlmICgkdGhpcy0+aXNWYWxpZCgpICAmJiAoJGRhdGUgIT0gJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGUpKQogCQl7CiAJCQkkdGhpcy0+bGFzdENhbmNlbGxhdGlvbkRhdGUgPSAkdGhpcy0+Y2FuY2VsbGF0aW9uRGF0ZTsKIAkJfQogCQkkdGhpcy0+Y2FuY2VsbGF0aW9uRGF0ZSA9ICRkYXRlOwogCX0KIAkJCiAJcHVibGljIGZ1bmN0aW9uIGdldENhbmNlbGxhdGlvbkRhdGUoJGRvRm9ybWF0PWZhbHNlKQogCXsKIAkJaWYoJGRvRm9ybWF0ID09IGZhbHNlKQogCQl7CiAJCQlyZXR1cm4gJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGU7CiAJCX0KIAkJZWxzZSBpZighZW1wdHkoJHRoaXMtPmNhbmNlbGxhdGlvbkRhdGUpKQogCQl7CiAJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5jYW5jZWxsYXRpb25EYXRlKTsKIAkJfQogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gc2V0UGVuZGluZ1N0YXR1cygkc3RhdHVzKQogCXsKIAkJaWYoJHN0YXR1cyA9PSBNTV9TdGF0dXM6OiRQQVVTRUQgfHwgJHN0YXR1cyA9PSBNTV9TdGF0dXM6OiRDQU5DRUxFRCkKIAkJewogCQkJJHRoaXMtPnBlbmRpbmdTdGF0dXMgPSAkc3RhdHVzOwogCQl9CiAJCWVsc2UgCiAJCXsKIAkJCSR0aGlzLT5wZW5kaW5nU3RhdHVzID0gIjAiOwogCQl9CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRQZW5kaW5nU3RhdHVzKCkKIAl7CiAJCWlmKCR0aGlzLT5wZW5kaW5nU3RhdHVzICE9ICIwIiAmJiAkdGhpcy0+cGVuZGluZ1N0YXR1cyAhPSBNTV9TdGF0dXM6OiRQQVVTRUQgJiYgJHRoaXMtPnBlbmRpbmdTdGF0dXMgIT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpCiAJCXsJCgkgCQkkY2FuY2VsbGF0aW9uTWV0aG9kID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfREZMVF9DQU5DRUxMQVRJT05fTUVUSE9EKTsKCSAJCWlmICgkY2FuY2VsbGF0aW9uTWV0aG9kID09IE1NX0NhbmNlbGxhdGlvbk1ldGhvZDo6JENBTkNFTF9IQVJEKQoJIAkJewoJIAkJCSR0aGlzLT5wZW5kaW5nU3RhdHVzID0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQ7CgkgCQl9CgkgCQllbHNlIGlmICgkY2FuY2VsbGF0aW9uTWV0aG9kID09IE1NX0NhbmNlbGxhdGlvbk1ldGhvZDo6JENBTkNFTF9QQVVTRSkKCSAJCXsKCSAJCQkkdGhpcy0+cGVuZGluZ1N0YXR1cyA9IE1NX1N0YXR1czo6JFBBVVNFRDsKCSAJCX0KCSAJCWVsc2UgCgkgCQl7CgkgCQkJJHRoaXMtPnBlbmRpbmdTdGF0dXMgPSBNTV9TdGF0dXM6OiRDQU5DRUxFRDsKCSAJCX0KIAkJfQogCQkKIAkJcmV0dXJuICR0aGlzLT5wZW5kaW5nU3RhdHVzOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIHNldE1lbWJlcnNoaXBJZCgkc3RyKQogCXsKIAkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgJiYgKCRzdHIgIT0gJHRoaXMtPm1lbWJlcnNoaXBJZCkpCiAJCXsKIAkJCSR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxDaGFuZ2VkRmxhZyA9IHRydWU7CiAJCQkkdGhpcy0+bGFzdE1lbWJlcnNoaXBJZCA9ICR0aGlzLT5tZW1iZXJzaGlwSWQ7CiAJCQkkdGhpcy0+bGFzdE1lbWJlcnNoaXBOYW1lID0gJHRoaXMtPmdldE1lbWJlcnNoaXBOYW1lKCk7CiAJCX0KIAkgCSR0aGlzLT5tZW1iZXJzaGlwSWQgPSAkc3RyOwogCX0KIAkKIAkvKioKIAkgKiBAcmV0dXJuIE1NX01lbWJlcnNoaXBMZXZlbAogCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBnZXRNZW1iZXJzaGlwTGV2ZWwoKQogCXsKIAkJaWYoIWlzc2V0KCR0aGlzLT5tZW1iZXJzaGlwKSB8fCAhJHRoaXMtPm1lbWJlcnNoaXAtPmlzVmFsaWQoKSB8fCAkdGhpcy0+bWVtYmVyc2hpcElkICE9ICR0aGlzLT5tZW1iZXJzaGlwLT5nZXRJZCgpKSAKIAkJewogCQkJJHRoaXMtPm1lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCR0aGlzLT5tZW1iZXJzaGlwSWQpOwogCQl9CiAJCQogCQlyZXR1cm4gJHRoaXMtPm1lbWJlcnNoaXA7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0TWVtYmVyc2hpcElkKCkKIAl7CiAJIAlyZXR1cm4gJHRoaXMtPm1lbWJlcnNoaXBJZDsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldE1lbWJlcnNoaXBOYW1lKCkKIAl7CiAJCSRtZW1iZXJzaGlwID0gJHRoaXMtPmdldE1lbWJlcnNoaXBMZXZlbCgpOwogCSAJcmV0dXJuICRtZW1iZXJzaGlwLT5nZXROYW1lKCk7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0RGF5c0NhbGNWYWx1ZSgkc3RyKQogCXsKIAkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgJiYgKCRzdHIgIT0gJHRoaXMtPmRheXNDYWxjVmFsdWUpKQogCQl7CiAJCQkkdGhpcy0+bGFzdERheXNDYWxjVmFsdWUgPSAkdGhpcy0+ZGF5c0NhbGNWYWx1ZTsKIAkJfQogCSAJJHRoaXMtPmRheXNDYWxjVmFsdWUgPSAkc3RyOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldERheXNDYWxjVmFsdWUoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+ZGF5c0NhbGNWYWx1ZTsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBzZXREYXlzQ2FsY01ldGhvZCgkc3RyKQogCXsKIAkJaWYgKCR0aGlzLT5pc1ZhbGlkKCkgJiYgKCRzdHIgIT0gJHRoaXMtPmRheXNDYWxjTWV0aG9kKSkKIAkJewogCQkJJHRoaXMtPmxhc3REYXlzQ2FsY01ldGhvZCA9ICR0aGlzLT5kYXlzQ2FsY01ldGhvZDsKIAkJfQogCSAJJHRoaXMtPmRheXNDYWxjTWV0aG9kID0gJHN0cjsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldERheXNDYWxjTWV0aG9kKCkKIAl7CiAJIAlyZXR1cm4gJHRoaXMtPmRheXNDYWxjTWV0aG9kOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIHNldFN0YXR1cygkbmV3U3RhdHVzKQogCXsKIAkJaWYoJG5ld1N0YXR1cyAhPSAkdGhpcy0+c3RhdHVzKQogCQl7CiAJCQkkdGhpcy0+bGFzdFN0YXR1cyA9ICR0aGlzLT5zdGF0dXM7CiAJCQkkdGhpcy0+bGFzdFN0YXR1c05hbWUgPSAkdGhpcy0+Z2V0U3RhdHVzTmFtZSgpOwogCQkJJHRoaXMtPnN0YXR1c1VwZGF0ZWQgPSB0cnVlOwogCQl9CiAJCQogCQkvLyB1c2VyIGJlY29taW5nIGFjdGl2ZSBhZnRlciBiZWluZyBpbiBhbiBlcnJvci9wZW5kaW5nIHN0YXRlCiAJCWlmKCgkdGhpcy0+bGFzdFN0YXR1cyA9PSBNTV9TdGF0dXM6OiRQRU5ESU5HX0FDVElWQVRJT04gfHwgJHRoaXMtPmxhc3RTdGF0dXMgPT0gTU1fU3RhdHVzOjokRVJST1IpIAogCQkJJiYgKCRuZXdTdGF0dXMgPT0gTU1fU3RhdHVzOjokQUNUSVZFKSkKIAkJewogCQkJLy8gY2xlYXIgc3RhdHVzIG1lc3NhZ2UKIAkJCSR0aGlzLT5zdGF0dXNNZXNzYWdlID0gIiI7CiAJCX0KIAkJCgkJaWYoKCRuZXdTdGF0dXMgIT0gJHRoaXMtPnN0YXR1cykgJiYgKCRuZXdTdGF0dXMgPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQgfHwgJG5ld1N0YXR1cyA9PSBNTV9TdGF0dXM6OiRQQVVTRUQpKQogCQl7CiAJCQkkdGhpcy0+c2V0RGF5c0NhbGNWYWx1ZSgkdGhpcy0+Z2V0RGF5c0FzTWVtYmVyKCkpOwogCQkJJHRoaXMtPnNldERheXNDYWxjTWV0aG9kKE1NX0RheXNDYWxjdWxhdGlvblR5cGVzOjokRklYRUQpOwogCQkJJHRoaXMtPnN0YXR1cyA9ICRuZXdTdGF0dXM7CiAJCX0KIAkJZWxzZSBpZigoJHRoaXMtPnN0YXR1cyA9PSBNTV9TdGF0dXM6OiRDQU5DRUxFRCB8fCAkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JFBBVVNFRCB8fCAkdGhpcy0+c3RhdHVzID09IE1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OKSAmJiAkbmV3U3RhdHVzID09IE1NX1N0YXR1czo6JEFDVElWRSkKIAkJewogCQkJJHRoaXMtPnBlbmRpbmdTdGF0dXMgPSAwOwogCQkJJHRoaXMtPm1lbWJlcnNoaXBMZXZlbENoYW5nZWRGbGFnID0gdHJ1ZTsKIAkJCSRkYXlzID0gJHRoaXMtPmdldERheXNBc01lbWJlcigpOwogCQkJJG5ld0RhdGUgPSBzdHJ0b3RpbWUoIi0iLiRkYXlzLiIgZGF5cyIpOwogCQkJJHRoaXMtPnNldERheXNDYWxjVmFsdWUoRGF0ZSgiWS1tLWQgaDppOnMiLCRuZXdEYXRlKSk7CiAJCQkkdGhpcy0+c2V0RGF5c0NhbGNNZXRob2QoTU1fRGF5c0NhbGN1bGF0aW9uVHlwZXM6OiRDVVNUT01fREFURSk7CiAJCQkkdGhpcy0+c3RhdHVzID0gJG5ld1N0YXR1czsKIAkJfQogCQllbHNlCiAJCXsJCiAJCQkkdGhpcy0+c3RhdHVzID0gJG5ld1N0YXR1czsKIAkJfQogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1cygpCiAJewogCQlpZigkdGhpcy0+aXNWYWxpZCgpKQogCQl7CiAJCQlpZigkdGhpcy0+ZG9lc0V4cGlyZSgpKQogCQkJewoJCSAJCWlmKCR0aGlzLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokQUNUSVZFKQoJCSAJCXsKCQkgCQkJLy8gY2hlY2sgaWYgbWVtYmVyc2hpcCBoYXMgZXhwaXJlZAkKCQkgCQkJaWYoJHRoaXMtPm1lbWJlcnNoaXBIYXNFeHBpcmVkKCkpCgkJIAkJCXsKCQkgCQkJCSR0aGlzLT5zZXRTdGF0dXMoTU1fU3RhdHVzOjokRVhQSVJFRCk7CgkJIAkJCQkkdGhpcy0+Y29tbWl0U3RhdHVzT25seSgpOwoJCSAJCQl9IAoJCSAJCX0KCQkgCQllbHNlIGlmKCR0aGlzLT5zdGF0dXMgPT0gTU1fU3RhdHVzOjokRVhQSVJFRCkKCQkgCQl7CgkJIAkJCS8vIGNoZWNrIGlmIG1lbWJlcnNoaXAgc2hvdWxkIGJlIG1hZGUgYWN0aXZlCgkJIAkJCWlmKCEkdGhpcy0+bWVtYmVyc2hpcEhhc0V4cGlyZWQoKSkKCQkgCQkJewoJCSAJCQkJJHRoaXMtPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRBQ1RJVkUpOwoJCSAJCQkJJHRoaXMtPmNvbW1pdFN0YXR1c09ubHkoKTsKCQkgCQkJfQoJCSAJCX0KIAkJCX0KIAkJCQogCQkJaWYoJHRoaXMtPmlzUGVuZGluZ0NhbmNlbGxhdGlvbigpKQogCQkJewogCQkJCS8vIGNoZWNrIGlmIG1lbWJlcnNoaXAgc2hvdWxkIGJlIGNhbmNlbGVkCiAJCQkJaWYoJHRoaXMtPm1lbWJlcnNoaXBTaG91bGRDYW5jZWwoKSkKIAkJCQl7CiAJCQkJCSR0aGlzLT5zZXRTdGF0dXMoJHRoaXMtPmdldFBlbmRpbmdTdGF0dXMoKSk7CiAJCQkJCSR0aGlzLT5jb21taXRTdGF0dXNPbmx5KCk7CiAJCQkJfQogCQkJfQogCQl9CiAJCQogCSAJcmV0dXJuICR0aGlzLT5zdGF0dXM7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdHVzTmFtZSgpCiAJewogCSAJcmV0dXJuIE1NX1N0YXR1czo6Z2V0TmFtZSgkdGhpcy0+c3RhdHVzKTsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRTdGF0dXNNZXNzYWdlKCRzdHIpCiAJewogCSAJJHRoaXMtPnN0YXR1c01lc3NhZ2UgPSAkc3RyOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1c01lc3NhZ2UoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+c3RhdHVzTWVzc2FnZTsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldExhc3RVcGRhdGVkRGF0ZSgkZG9Gb3JtYXQ9ZmFsc2UpCiAJewogCQlpZigkZG9Gb3JtYXQgPT0gZmFsc2UpIAogCQl7CiAJCQlyZXR1cm4gJHRoaXMtPmxhc3RVcGRhdGVkRGF0ZTsKIAkJfQogCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+bGFzdFVwZGF0ZWREYXRlKSkgCiAJCXsKIAkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHRoaXMtPmxhc3RVcGRhdGVkRGF0ZSk7CiAJCX0KIAkJZWxzZQogCQl7CiAJCQlyZXR1cm4gbnVsbDsKIAkJfQogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0U3RhdHVzVXBkYXRlZERhdGUoJGRvRm9ybWF0PWZhbHNlKQogCXsKIAkJaWYoJGRvRm9ybWF0ID09IGZhbHNlKSAKIAkJewogCQkJcmV0dXJuICR0aGlzLT5zdGF0dXNVcGRhdGVkRGF0ZTsKIAkJfQogCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+c3RhdHVzVXBkYXRlZERhdGUpKSAKIAkJewogCQkJcmV0dXJuIE1NX1V0aWxzOjpkYXRlVG9Mb2NhbCgkdGhpcy0+c3RhdHVzVXBkYXRlZERhdGUpOwogCQl9CiAJCWVsc2UKIAkJewogCQkJcmV0dXJuIG51bGw7CiAJCX0KIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIHNldEZ1bGxCaWxsaW5nQWRkcmVzcyhNTV9DdXN0b21lckFkZHJlc3MgJGFkZHJlc3MpCiAJewogCQkkdGhpcy0+c2V0QmlsbGluZ0FkZHJlc3MoJGFkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpKTsKIAkJJHRoaXMtPnNldEJpbGxpbmdDaXR5KCRhZGRyZXNzLT5nZXRDaXR5KCkpOwogCQkkdGhpcy0+c2V0QmlsbGluZ1N0YXRlKCRhZGRyZXNzLT5nZXRTdGF0ZSgpKTsKIAkJJHRoaXMtPnNldEJpbGxpbmdaaXBDb2RlKCRhZGRyZXNzLT5nZXRQb3N0YWxDb2RlKCkpOwogCQkkdGhpcy0+c2V0QmlsbGluZ0NvdW50cnkoJGFkZHJlc3MtPmdldENvdW50cnkoKSk7CiAJfQogCQogCS8qKgogCSAqIEByZXR1cm4gTU1fQ3VzdG9tZXJBZGRyZXNzCiAJICovCiAJcHVibGljIGZ1bmN0aW9uIGdldEZ1bGxCaWxsaW5nQWRkcmVzcygpCiAJewogCQkkYWRkcmVzcyA9IG5ldyBNTV9DdXN0b21lckFkZHJlc3MoJHRoaXMtPmdldEZpcnN0TmFtZSgpLCAkdGhpcy0+Z2V0TGFzdE5hbWUoKSk7CiAJCSRhZGRyZXNzLT5zZXRQaG9uZSgkdGhpcy0+Z2V0UGhvbmUoKSk7CiAJCSRhZGRyZXNzLT5zZXRBZGRyZXNzTGluZTEoJHRoaXMtPmdldEJpbGxpbmdBZGRyZXNzKCkpOwogCQkkYWRkcmVzcy0+c2V0Q2l0eSgkdGhpcy0+Z2V0QmlsbGluZ0NpdHkoKSk7CiAJCSRhZGRyZXNzLT5zZXRTdGF0ZSgkdGhpcy0+Z2V0QmlsbGluZ1N0YXRlKCkpOwogCQkkYWRkcmVzcy0+c2V0UG9zdGFsQ29kZSgkdGhpcy0+Z2V0QmlsbGluZ1ppcENvZGUoKSk7CiAJCSRhZGRyZXNzLT5zZXRDb3VudHJ5KCR0aGlzLT5nZXRCaWxsaW5nQ291bnRyeSgpKTsKIAkJcmV0dXJuICRhZGRyZXNzOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gc2V0RnVsbFNoaXBwaW5nQWRkcmVzcyhNTV9DdXN0b21lckFkZHJlc3MgJGFkZHJlc3MpCiAJewogCQkkdGhpcy0+c2V0U2hpcHBpbmdBZGRyZXNzKCRhZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKSk7CiAJCSR0aGlzLT5zZXRTaGlwcGluZ0NpdHkoJGFkZHJlc3MtPmdldENpdHkoKSk7CiAJCSR0aGlzLT5zZXRTaGlwcGluZ1N0YXRlKCRhZGRyZXNzLT5nZXRTdGF0ZSgpKTsKIAkJJHRoaXMtPnNldFNoaXBwaW5nWmlwQ29kZSgkYWRkcmVzcy0+Z2V0UG9zdGFsQ29kZSgpKTsKIAkJJHRoaXMtPnNldFNoaXBwaW5nQ291bnRyeSgkYWRkcmVzcy0+Z2V0Q291bnRyeSgpKTsKIAl9CiAJCiAJLyoqCiAJICogQHJldHVybiBNTV9DdXN0b21lckFkZHJlc3MKIAkgKi8KIAlwdWJsaWMgZnVuY3Rpb24gZ2V0RnVsbFNoaXBwaW5nQWRkcmVzcygpCiAJewogCQkkYWRkcmVzcyA9IG5ldyBNTV9DdXN0b21lckFkZHJlc3MoJHRoaXMtPmdldEZpcnN0TmFtZSgpLCAkdGhpcy0+Z2V0TGFzdE5hbWUoKSk7CiAJCSRhZGRyZXNzLT5zZXRQaG9uZSgkdGhpcy0+Z2V0UGhvbmUoKSk7CiAJCSRhZGRyZXNzLT5zZXRBZGRyZXNzTGluZTEoJHRoaXMtPmdldFNoaXBwaW5nQWRkcmVzcygpKTsKIAkJJGFkZHJlc3MtPnNldENpdHkoJHRoaXMtPmdldFNoaXBwaW5nQ2l0eSgpKTsKIAkJJGFkZHJlc3MtPnNldFN0YXRlKCR0aGlzLT5nZXRTaGlwcGluZ1N0YXRlKCkpOwogCQkkYWRkcmVzcy0+c2V0UG9zdGFsQ29kZSgkdGhpcy0+Z2V0U2hpcHBpbmdaaXBDb2RlKCkpOwogCQkkYWRkcmVzcy0+c2V0Q291bnRyeSgkdGhpcy0+Z2V0U2hpcHBpbmdDb3VudHJ5KCkpOwogCQlyZXR1cm4gJGFkZHJlc3M7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0QmlsbGluZ0FkZHJlc3MoJHN0cikKIAl7CiAJCWlmICgkdGhpcy0+aXNWYWxpZCgpICYmICgkc3RyICE9ICR0aGlzLT5iaWxsaW5nQWRkcmVzcykpCiAJCXsKIAkJCSR0aGlzLT5sYXN0QmlsbGluZ0FkZHJlc3MgPSAkdGhpcy0+YmlsbGluZ0FkZHJlc3M7CiAJCX0KIAkgCSR0aGlzLT5iaWxsaW5nQWRkcmVzcyA9ICRzdHI7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0QmlsbGluZ0FkZHJlc3MoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+YmlsbGluZ0FkZHJlc3M7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0QmlsbGluZ0NpdHkoJHN0cikKIAl7CiAJCWlmICgkdGhpcy0+aXNWYWxpZCgpICYmICgkc3RyICE9ICR0aGlzLT5iaWxsaW5nQ2l0eSkpCiAJCXsKIAkJCSR0aGlzLT5sYXN0QmlsbGluZ0NpdHkgPSAkdGhpcy0+YmlsbGluZ0NpdHk7CiAJCX0KIAkgCSR0aGlzLT5iaWxsaW5nQ2l0eT0gJHN0cjsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBnZXRCaWxsaW5nQ2l0eSgpCiAgCXsKIAkgCXJldHVybiAkdGhpcy0+YmlsbGluZ0NpdHk7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0QmlsbGluZ1N0YXRlKCRzdHIpCiAJewogCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAmJiAoJHN0ciAhPSAkdGhpcy0+YmlsbGluZ1N0YXRlKSkKIAkJewogCQkJJHRoaXMtPmxhc3RCaWxsaW5nU3RhdGUgPSAkdGhpcy0+YmlsbGluZ1N0YXRlOwogCQl9CiAJIAkkdGhpcy0+YmlsbGluZ1N0YXRlID0gJHN0cjsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBnZXRCaWxsaW5nU3RhdGUoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+YmlsbGluZ1N0YXRlOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIHNldEJpbGxpbmdaaXBDb2RlKCRzdHIpCiAJewogCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAmJiAoJHN0ciAhPSAkdGhpcy0+YmlsbGluZ1ppcCkpCiAJCXsKIAkJCSR0aGlzLT5sYXN0QmlsbGluZ1ppcCA9ICR0aGlzLT5iaWxsaW5nWmlwOwogCQl9CiAJIAkkdGhpcy0+YmlsbGluZ1ppcCA9ICRzdHI7CiAJfQogCSAKICAJcHVibGljIGZ1bmN0aW9uIGdldEJpbGxpbmdaaXBDb2RlKCkKIAl7CiAJIAlyZXR1cm4gJHRoaXMtPmJpbGxpbmdaaXA7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0QmlsbGluZ0NvdW50cnkoJGNvZGUpCiAJewogCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAmJiAoJGNvZGUgIT0gJHRoaXMtPmJpbGxpbmdDb3VudHJ5KSkKIAkJewogCQkJJHRoaXMtPmxhc3RCaWxsaW5nQ291bnRyeSA9ICR0aGlzLT5iaWxsaW5nQ291bnRyeTsKIAkJfQogCSAJJHRoaXMtPmJpbGxpbmdDb3VudHJ5ID0gJGNvZGU7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0QmlsbGluZ0NvdW50cnkoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+YmlsbGluZ0NvdW50cnk7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0QmlsbGluZ0NvdW50cnlOYW1lKCkKIAl7CQogCSAJcmV0dXJuIE1NX0NvdW50cnlVdGlsczo6Z2V0Q291bnRyeU5hbWUoJHRoaXMtPmJpbGxpbmdDb3VudHJ5KTsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRTaGlwcGluZ0FkZHJlc3MoJHN0cikKIAl7CiAJCWlmICgkdGhpcy0+aXNWYWxpZCgpICYmICgkc3RyICE9ICR0aGlzLT5zaGlwcGluZ0FkZHJlc3MpKQogCQl7CiAJCQkkdGhpcy0+bGFzdFNoaXBwaW5nQWRkcmVzcyA9ICR0aGlzLT5zaGlwcGluZ0FkZHJlc3M7CiAJCX0KIAkgCSR0aGlzLT5zaGlwcGluZ0FkZHJlc3MgPSAkc3RyOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nQWRkcmVzcygpCiAJewogCSAJcmV0dXJuICR0aGlzLT5zaGlwcGluZ0FkZHJlc3M7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0U2hpcHBpbmdDaXR5KCRzdHIpCiAJewogCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAmJiAoJHN0ciAhPSAkdGhpcy0+c2hpcHBpbmdDaXR5KSkKIAkJewogCQkJJHRoaXMtPmxhc3RTaGlwcGluZ0NpdHkgPSAkdGhpcy0+c2hpcHBpbmdDaXR5OwogCQl9CiAJIAkkdGhpcy0+c2hpcHBpbmdDaXR5ID0gJHN0cjsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBnZXRTaGlwcGluZ0NpdHkoKQogCXsKIAkgCXJldHVybiAkdGhpcy0+c2hpcHBpbmdDaXR5OwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIHNldFNoaXBwaW5nU3RhdGUoJHN0cikKIAl7CiAJCWlmICgkdGhpcy0+aXNWYWxpZCgpICYmICgkc3RyICE9ICR0aGlzLT5zaGlwcGluZ1N0YXRlKSkKIAkJewogCQkJJHRoaXMtPmxhc3RTaGlwcGluZ1N0YXRlID0gJHRoaXMtPnNoaXBwaW5nU3RhdGU7CiAJCX0KIAkgCSR0aGlzLT5zaGlwcGluZ1N0YXRlID0gJHN0cjsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBnZXRTaGlwcGluZ1N0YXRlKCkKIAl7CiAJIAlyZXR1cm4gJHRoaXMtPnNoaXBwaW5nU3RhdGU7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gc2V0U2hpcHBpbmdaaXBDb2RlKCRzdHIpCiAJewogCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAmJiAoJHN0ciAhPSAkdGhpcy0+c2hpcHBpbmdaaXApKQogCQl7CiAJCQkkdGhpcy0+bGFzdFNoaXBwaW5nWmlwID0gJHRoaXMtPnNoaXBwaW5nWmlwOwogCQl9CiAJIAkkdGhpcy0+c2hpcHBpbmdaaXAgPSAkc3RyOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nWmlwQ29kZSgpCiAJewogCSAJcmV0dXJuICR0aGlzLT5zaGlwcGluZ1ppcDsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRTaGlwcGluZ0NvdW50cnkoJGNvZGUpCiAJewogCQlpZiAoJHRoaXMtPmlzVmFsaWQoKSAmJiAoJGNvZGUgIT0gJHRoaXMtPnNoaXBwaW5nQ291bnRyeSkpCiAJCXsKIAkJCSR0aGlzLT5sYXN0U2hpcHBpbmdDb3VudHJ5ID0gJHRoaXMtPnNoaXBwaW5nQ291bnRyeTsKIAkJfQogCSAJJHRoaXMtPnNoaXBwaW5nQ291bnRyeSA9ICRjb2RlOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldFNoaXBwaW5nQ291bnRyeSgpCiAJewogCSAJcmV0dXJuICR0aGlzLT5zaGlwcGluZ0NvdW50cnk7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0U2hpcHBpbmdDb3VudHJ5TmFtZSgpCiAJewogCSAJcmV0dXJuIE1NX0NvdW50cnlVdGlsczo6Z2V0Q291bnRyeU5hbWUoJHRoaXMtPnNoaXBwaW5nQ291bnRyeSk7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0TG9naW5Db3VudCgpCiAJewogCQlpZigkdGhpcy0+bG9naW5Db3VudCA9PSAtMSkKIAkJewogCQkJJHRoaXMtPmxvZ2luQ291bnQgPSBNTV9BY3Rpdml0eUxvZzo6Z2V0TG9naW5Db3VudCgkdGhpcy0+Z2V0SWQoKSk7CiAJCX0KIAkJCiAJIAlyZXR1cm4gbnVtYmVyX2Zvcm1hdCgkdGhpcy0+bG9naW5Db3VudCk7CiAJfQogCSAKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0UGFnZUFjY2Vzc0NvdW50KCR1bmlxdWVQYWdlc09ubHk9dHJ1ZSkKIAl7CiAJCWlmKCR0aGlzLT5wYWdlQWNjZXNzQ291bnQgPT0gLTEpCiAJCXsKIAkJCSR0aGlzLT5wYWdlQWNjZXNzQ291bnQgPSBNTV9BY3Rpdml0eUxvZzo6Z2V0UGFnZUFjY2Vzc0NvdW50KCR0aGlzLT5nZXRJZCgpLCAkdW5pcXVlUGFnZXNPbmx5KTsKIAkJfQogCQkKIAkgCXJldHVybiBudW1iZXJfZm9ybWF0KCR0aGlzLT5wYWdlQWNjZXNzQ291bnQpOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIGdldEVtYWlsQ291bnQoKQogCXsKIAkJaWYoJHRoaXMtPmVtYWlsQ291bnQgPT0gLTEpCiAJCXsKIAkJCSR0aGlzLT5lbWFpbENvdW50ID0gTU1fQWN0aXZpdHlMb2c6OmdldEVtYWlsQ291bnQoJHRoaXMtPmdldElkKCkpOwogCQl9CiAJCQogCSAJcmV0dXJuIG51bWJlcl9mb3JtYXQoJHRoaXMtPmVtYWlsQ291bnQpOwogCX0KIAkgCiAJcHVibGljIGZ1bmN0aW9uIHNldExhc3RMb2dpbkRhdGUoJHN0cikKIAl7CiAJIAkkdGhpcy0+bGFzdExvZ2luRGF0ZSA9ICRzdHI7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0TG9naW5EYXRlKCRkb0Zvcm1hdD1mYWxzZSkKIAl7CiAJCWlmKCRkb0Zvcm1hdCA9PSBmYWxzZSkgCiAJCXsKIAkJCXJldHVybiAkdGhpcy0+bGFzdExvZ2luRGF0ZTsKIAkJfQogCQllbHNlIGlmKCFlbXB0eSgkdGhpcy0+bGFzdExvZ2luRGF0ZSkpIAogCQl7CiAJCQlyZXR1cm4gTU1fVXRpbHM6OmRhdGVUb0xvY2FsKCR0aGlzLT5sYXN0TG9naW5EYXRlKTsKIAkJfQogCQllbHNlCiAJCXsKIAkJCXJldHVybiBudWxsOwogCQl9CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0TG9naW5JcEFkZHJlc3MoKQogCXsKIAkJaWYoZW1wdHkoJHRoaXMtPmxhc3RMb2dpbklwQWRkcmVzcykpCiAJCXsKIAkJCSR0aGlzLT5sYXN0TG9naW5JcEFkZHJlc3MgPSBNTV9BY3Rpdml0eUxvZzo6Z2V0TGFzdExvZ2luSXBBZGRyZXNzKCR0aGlzLT5nZXRJZCgpKTsKIAkJfQogCQkKIAkJcmV0dXJuICR0aGlzLT5sYXN0TG9naW5JcEFkZHJlc3M7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBoYXNSZWFjaGVkTWF4SVBDb3VudCgpCiAJewogCQlyZXR1cm4gTU1fQWN0aXZpdHlMb2c6Omhhc1JlYWNoZWRNYXhJUENvdW50KCR0aGlzLT5nZXRJZCgpKTsKIAl9CiAJIAogCXB1YmxpYyBmdW5jdGlvbiBzZXRXZWxjb21lRW1haWxTZW50RGF0ZSgkc3RyKQogCXsKIAkgCSR0aGlzLT53ZWxjb21lRW1haWxTZW50RGF0ZSA9ICRzdHI7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRXZWxjb21lRW1haWxTZW50RGF0ZSgkZG9Gb3JtYXQ9ZmFsc2UpCiAJewogCQlpZigkZG9Gb3JtYXQgPT0gZmFsc2UpIHsKIAkJCXJldHVybiAkdGhpcy0+d2VsY29tZUVtYWlsU2VudERhdGU7CiAJCX0KIAkJZWxzZSBpZighZW1wdHkoJHRoaXMtPndlbGNvbWVFbWFpbFNlbnREYXRlKSkgCiAJCXsKIAkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHRoaXMtPndlbGNvbWVFbWFpbFNlbnREYXRlKTsKIAkJfQogCQllbHNlCiAJCXsKIAkJCXJldHVybiBudWxsOwogCQl9CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRCZWNhbWVBY3RpdmVEYXRlKCRkb0Zvcm1hdD1mYWxzZSkKIAl7CiAJCWlmKCRkb0Zvcm1hdCA9PSBmYWxzZSkgewogCQkJcmV0dXJuICR0aGlzLT5iZWNhbWVBY3RpdmVEYXRlOwogCQl9CiAJCWVsc2UgaWYoIWVtcHR5KCR0aGlzLT5iZWNhbWVBY3RpdmVEYXRlKSkgCiAJCXsKIAkJCXJldHVybiBNTV9VdGlsczo6ZGF0ZVRvTG9jYWwoJHRoaXMtPmJlY2FtZUFjdGl2ZURhdGUpOwogCQl9CiAJCWVsc2UKIAkJewogCQkJcmV0dXJuIG51bGw7CiAJCX0KIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIHNldFN1YnNjcmliZWRMaXN0SWQoJGxpc3RJZCkgCiAJewogCQkkdGhpcy0+c3Vic2NyaWJlZExpc3RJZCA9ICRsaXN0SWQ7CQogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0U3Vic2NyaWJlZExpc3RJZCgpCiAJewogCQlyZXR1cm4gJHRoaXMtPnN1YnNjcmliZWRMaXN0SWQ7CiAJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0U3Vic2NyaWJlZFByb3ZpZGVySWQoJHByb3ZpZGVySWQpIAogCXsKIAkJJHRoaXMtPnN1YnNjcmliZWRQcm92aWRlcklkID0gJHByb3ZpZGVySWQ7CQogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0U3Vic2NyaWJlZFByb3ZpZGVySWQoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5zdWJzY3JpYmVkUHJvdmlkZXJJZDsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIHNldFNlbmRXZWxjb21lRW1haWxGbGFnKCRib29sKQogCXsKIAkJJHRoaXMtPnNlbmRXZWxjb21lRW1haWxGbGFnID0gJGJvb2w7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBkb1NlbmRXZWxjb21lRW1haWwoKQogCXsKIAkJcmV0dXJuICR0aGlzLT5zZW5kV2VsY29tZUVtYWlsRmxhZzsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIHNldEltcG9ydGVkRmxhZygkYm9vbCkKIAl7CiAJCSR0aGlzLT5pbXBvcnRlZEZsYWcgPSAoJGJvb2wgPT0gdHJ1ZSkgPyAiMSIgOiAiMCI7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBpc0ltcG9ydGVkKCkKIAl7CiAJCXJldHVybiAoJHRoaXMtPmltcG9ydGVkRmxhZyA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwogCX0gCiAJCiAJcHVibGljIGZ1bmN0aW9uIGlzQ29tcGxpbWVudGFyeSgpCiAJewogCQlpZigkdGhpcy0+aXNGcmVlKCkgfHwgJHRoaXMtPmlzSW1wb3J0ZWQoKSB8fCAkdGhpcy0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokUEVORElOR19BQ1RJVkFUSU9OIHx8ICR0aGlzLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRFUlJPUgogCQkJfHwgJHRoaXMtPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JENBTkNFTEVEIHx8ICR0aGlzLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRQQVVTRUQgfHwgJHRoaXMtPmlzUGVuZGluZ0NhbmNlbGxhdGlvbigpKQogCQl7CiAJCQlyZXR1cm4gZmFsc2U7CiAJCX0KIAkJCiAJCS8vIFdhcyBwZW5kaW5nIGNhbmNlbGF0aW9uIGFuZCBub3cgdmlvbGF0ZWQgY29uZGl0aW9ucyB3aGVyZSBhY2NvdW50IGJlY2FtZSAnbG9ja2VkJwogCQlpZigkdGhpcy0+Z2V0UGVuZGluZ1N0YXR1cygpID09IE1NX1N0YXR1czo6JENBTkNFTEVEICYmICR0aGlzLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRMT0NLRUQpCiAJCXsKIAkJCXJldHVybiBmYWxzZTsKIAkJfQogCQkKIAkJJGlzQ29tcGxpbWVudGFyeSA9IGZhbHNlOwogCQkkaXRlbXMgPSBNTV9PcmRlckl0ZW1BY2Nlc3M6OmdldE9yZGVySXRlbUJ5QWNjZXNzKCR0aGlzLT5nZXRJZCgpLCBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQLCAkdGhpcy0+Z2V0TWVtYmVyc2hpcElkKCkpOwogCiAJCWlmKGNvdW50KCRpdGVtcykgPiAwKQoJCXsKCQkJJGlzQ29tcGxpbWVudGFyeSA9IHRydWU7CgkJCQoJCQlmb3JlYWNoKCRpdGVtcyBhcyAkb3JkZXJJdGVtQWNjZXNzKQoJCQl7CgkJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkb3JkZXJJdGVtQWNjZXNzLT5nZXRPcmRlckl0ZW1JZCgpKTsKCQkJCQoJCQkJaWYoJG9yZGVySXRlbS0+aXNWYWxpZCgpICYmICRvcmRlckl0ZW0tPmdldFN0YXR1cygpICE9IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKQoJCQkJewoJCQkJCSRpc0NvbXBsaW1lbnRhcnkgPSBmYWxzZTsKCQkJCQlicmVhazsKCQkJCX0KCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkaXNDb21wbGltZW50YXJ5ID0gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuICRpc0NvbXBsaW1lbnRhcnk7CiAJfQogCQogCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY2FuUGxhY2VPcmRlcigkdXNlcklkLCAkcHJvZHVjdElkLCAkaXNOZXdNZW1iZXIgPSBmYWxzZSwgJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIgPSBmYWxzZSwgJGlzT25lQ2xpY2tQdXJjaGFzZSA9IGZhbHNlKQogCXsKCQlnbG9iYWwgJHdwZGI7CgkJCiAJCSRhbGxvd0R1cGxpY2F0ZVN1YnNjcmlwdGlvbnMgPSAoTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQUxMT1dfRFVQTElDQVRFX1NVQlNDUklQVElPTlMpID09ICIxIikgPyB0cnVlIDogZmFsc2U7CiAJCQogCQlpZighJGFsbG93RHVwbGljYXRlU3Vic2NyaXB0aW9ucykKIAkJeyAKCSAJCSRzcWwgPSAiU0VMRUNUIEVYSVNUUyAoU0VMRUNUIG9pLmlkIEZST00gIi5NTV9UQUJMRV9PUkRFUl9JVEVNUy4iIG9pIExFRlQgSk9JTiAiLk1NX1RBQkxFX09SREVSUy4iIG8gT04gKG9pLm9yZGVyX2lkID0gby5pZCkgIi4KCSAJCQkJIldIRVJFIChvLnVzZXJfaWQ9JXMpIEFORCAob2kuaXNfZ2lmdD0wKSBBTkQgKG9pLmlzX3JlY3VycmluZz0xKSBBTkQgKG9pLml0ZW1faWQ9JXMpIEFORCAob2kuaXRlbV90eXBlPSciLk1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9QUk9EVUNULiInKSBBTkQgIi4KCSAJCQkJIigKCSAJCQkJCQlvaS5zdGF0dXMgPSAnIi5NTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HLiInIE9SCgkgCQkJCQkJb2kuc3RhdHVzID0gJyIuTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVELiInIE9SIAoJIAkJCQkJCW9pLnN0YXR1cyA9ICciLk1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUEVORElOR19PVkVSRFVFLiInIE9SIAoJIAkJCQkJCW9pLnN0YXR1cyA9ICciLk1NX09yZGVySXRlbTo6JFNUQVRVU19HQVRFV0FZX1BBWU1FTlRfTUlTTUFUQ0guIicgIAoJCQkJCSkKCQkJKSI7CgkgCQkkY2FudFB1cmNoYXNlID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHNxbCwkdXNlcklkLCRwcm9kdWN0SWQpKTsKCSAJCWlmICghaXNfbnVsbCgkY2FudFB1cmNoYXNlKSAmJiAoJGNhbnRQdXJjaGFzZSA9PSAnMScpKQoJIAkJewoJIAkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoaXMgcHJvZHVjdCBoYXMgYWxyZWFkeSBiZWVuIHB1cmNoYXNlZCBhbmQgaGFzIGFuIGFjdGl2ZSBzdWJzY3JpcHRpb24iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJIAkJfQogCQl9CiAJCQoJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJHByb2R1Y3RJZCk7CgkJCgkJLy8gSUYgaXQncyBhIGFscmVhZHkgZXhpc3RpbmcgTWVtYmVyIChpZiBpdCdzIGEgT25lIENsaWNrIFB1cmNoYXNlLCBpdCdzIGFzc3VtZWQgYXMgc3VjaCkKCQkvLyBBTkQgaXQncyBOT1QgYSBDdXN0b21lciBTdXBwb3J0IE9yZGVyCgkJLy8gQU5EIHRoZXkncmUgdHJ5aW5nIHRvIHB1cmNoYXNlIGEgVHJpYWwKCQkvLyBBTkQgdGhhdCB0cmlhbCBpcyBzZXQgdG8gbm90IGFsbG93IG11bHRpcGxlIHB1cmNoYXNlcwoJCS8vIFRIRU4gY2hlY2sgdG8gbWFrZSBzdXJlIHRoaXMgbWVtYmVyIGhhcyBub3QgcHVyY2hhc2VkIHRoaXMgZXhhY3QgdHJpYWwgaW4gdGhlIHBhc3QKCQkvLyBJRiBTTywgbm90aWZ5IHRoZW0gdGhhdCB0aGlzIGlzIG5vdCBhbGxvd2VkIGFuZC4uLi4uLi4KCQkvLyAtIElmIE5PVCBPbmUgQ0xpY2sgUHVyY2hhc2U6IHJlZGlyZWN0IHRoZW0gdG8gdGhlIGFsdGVybmF0aXZlIHByb2R1Y3QgdGhhdCByZXByZXNlbnRzIHRoZSB0aGUgZnVsbCBwcm9kdWN0IHRoYXQgdGhlIHRyaWFsIGlzIGFsbG93aW5nIHRoZSB1c2VyIHRvICJ0cnkiIG91dAoJCS8vIC0gSWYgSVMgT25lIENMaWNrIFB1cmNoYXNlOiBzaW1wbHkgbm90aWZ5IHRoZW0gdmlhIEpTIGFsZXJ0IGJveCBzaW5jZSBjaGVjayBpcyBoYXBwZW5pbmcgdmlhIEFKQVgKCQlpZigkaXNOZXdNZW1iZXIgPT0gZmFsc2UgJiYgJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIgPT0gZmFsc2UgJiYgJHByb2R1Y3QtPmhhc1RyaWFsKCkgJiYgJHByb2R1Y3QtPmRvTGltaXRUcmlhbCgpKQoJCXsKCQkJLy9zZWFyY2ggZm9yIHN0YXR1c2VzIGluZGljYXRpbmcgYSBwcmV2aW91c2x5IHN1Y2Nlc3NmdWwgcHVyY2hhc2UKCQkJICRzZWFyY2hTdGF0dXNlcyA9IGFycmF5KAoJCSAgICAgICAgTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklORywKCQkgICAgICAgIE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVELAoJCSAgICAgICAgTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DT01QTEVURSwKCQkgICAgICAgIE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUEVORElOR19PVkVSRFVFLAoJCSAgICAgICAgTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVECgkJICAgICk7CgkJICAgICRzZWFyY2hTdGF0dXNTdHJpbmcgPSBpbXBsb2RlKCIsIiwkc2VhcmNoU3RhdHVzZXMpOwoJCSAgICAKCQkJJHNxbCA9ICJTRUxFQ1QgQ09VTlQoRElTVElOQ1Qgb2kuaWQpIEFTIGMgIi4KCQkJIAkgICAiRlJPTSAiIC4gTU1fVEFCTEVfT1JERVJfSVRFTVMgLiAiIEFTIG9pICIuCgkJCSAJICAgIkxFRlQgSk9JTiAiIC4gTU1fVEFCTEVfT1JERVJTIC4gIiBBUyBvICIuCgkJCQkgICAiT04gKG9pLm9yZGVyX2lkID0gby5pZCkgIi4KCQkJCSAgICJXSEVSRSBvaS5pdGVtX3R5cGUgPSAnIiAuIE1NX09yZGVySXRlbTo6JE9SREVSX0lURU1fVFlQRV9QUk9EVUNUIC4gIiciLgoJCQkJICAgIkFORCBvaS5zdGF0dXMgSU4gKHskc2VhcmNoU3RhdHVzU3RyaW5nfSkgIi4KCQkJCSAgICJBTkQgb2kuaXRlbV9pZCA9ICd7JHByb2R1Y3QtPmdldElkKCl9JyAiLgoJCQkJICAgIkFORCBvLnVzZXJfaWQgPSAneyR1c2VySWR9JyI7CgkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgoJCQlpZigkcmVzdWx0cy0+YyA+IDApCgkJCXsJCgkJCQlpZigkaXNPbmVDbGlja1B1cmNoYXNlID09IGZhbHNlKQoJCQkJewoJCQkJCWlmKCRwcm9kdWN0LT5nZXRMaW1pdFRyaWFsQWx0UHJvZHVjdElkKCkpCgkJCQkJewoJCQkJCQkkYWx0ZXJuYXRpdmVQcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJHByb2R1Y3QtPmdldExpbWl0VHJpYWxBbHRQcm9kdWN0SWQoKSk7CgkJCQkJCSRlcnJvck1lc3NhZ2UgPSAkcHJvZHVjdC0+Z2V0TmFtZSgpIC4gIiBjYW4gb25seSBiZSBwdXJjaGFzZWQgb25jZS4gVG8gZ2FpbiB0aGUgc2FtZSBhY2Nlc3MsIHBsZWFzZSBwdXJjaGFzZSB0aGUgYWx0ZXJuYXRlIHByb2R1Y3Qgc2hvd24gYmVsb3cuIjsKCQkJCQkJJHJlZGlyZWN0VXJsID0gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldENoZWNrb3V0UGFnZVN0YXRpY0xpbmsoJGFsdGVybmF0aXZlUHJvZHVjdC0+Z2V0SWQoKSk7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCSRlcnJvck1lc3NhZ2UgPSAkcHJvZHVjdC0+Z2V0TmFtZSgpIC4gIiBjYW4gb25seSBiZSBwdXJjaGFzZWQgb25jZS4iOwoJCQkJCQkkcmVkaXJlY3RVcmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0Q2hlY2tvdXRQYWdlU3RhdGljTGluaygkcHJvZHVjdC0+Z2V0SWQoKSk7CgkJCQkJfQoJCQkJCgkJCQkJd3BfcmVkaXJlY3QoJHJlZGlyZWN0VXJsIC4gIiZtZXNzYWdlPSIgLiB1cmxlbmNvZGUoJGVycm9yTWVzc2FnZSkpOwoJCQkJCWV4aXQ7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVGhlIHRyaWFsIHByb2R1Y3QsICIgLiAkcHJvZHVjdC0+Z2V0TmFtZSgpIC4gIiwgY2FuIG9ubHkgYmUgcHVyY2hhc2VkIG9uY2UuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQl9CgkJCiAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKIAl9CiAJCiAJCglwdWJsaWMgZnVuY3Rpb24gZ2V0T3JpZ2luQWZmaWxpYXRlSWQoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPm9yaWdpbkFmZmlsaWF0ZUlkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRPcmlnaW5BZmZpbGlhdGVJZCgkb3JpZ2luQWZmaWxpYXRlSWQpIAoJewoJCSR0aGlzLT5vcmlnaW5BZmZpbGlhdGVJZCA9ICRvcmlnaW5BZmZpbGlhdGVJZDsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0T3JpZ2luU3ViYWZmaWxpYXRlSWQoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPm9yaWdpblN1YmFmZmlsaWF0ZUlkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRPcmlnaW5TdWJhZmZpbGlhdGVJZCgkb3JpZ2luU3ViYWZmaWxpYXRlSWQpIAoJewoJCSR0aGlzLT5vcmlnaW5TdWJhZmZpbGlhdGVJZCA9ICRvcmlnaW5TdWJhZmZpbGlhdGVJZDsKCX0KCQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlQW5kU3RvcmVGb3Jnb3RQYXNzd29yZEhhc2goTU1fVXNlciAkdXNlcikKCXsKCQkvL3RvZG86IHJlbW92ZSB3b3JkcHJlc3MgZGVwZW5kZW5jeSBmcm9tIHRoaXMgcHJvY2VzcwoJCQoJCWlmICgkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJLy8gR2VuZXJhdGUgc29tZXRoaW5nIHJhbmRvbSBmb3IgYSBwYXNzd29yZCByZXNldCBrZXkuCgkJCSRmb3Jnb3RQYXNzd29yZEhhc2ggPSB3cF9nZW5lcmF0ZV9wYXNzd29yZCggMjAsIGZhbHNlICk7CgkJCQoJCQkvLyBOb3cgaW5zZXJ0IHRoZSBrZXksIGhhc2hlZCwgaW50byB0aGUgREIuCgkJCWlmICggZW1wdHkoICR3cF9oYXNoZXIgKSApCgkJCXsKCQkJCXJlcXVpcmVfb25jZSBBQlNQQVRIIC4gV1BJTkMgLiAnL2NsYXNzLXBocGFzcy5waHAnOwoJCQkJJHdwX2hhc2hlciA9IG5ldyBQYXNzd29yZEhhc2goIDgsIHRydWUgKTsKCQkJfQoJCQkKCQkJJGZvcmdvdFBhc3N3b3JkSGFzaCA9ICR3cF9oYXNoZXItPkhhc2hQYXNzd29yZCgkZm9yZ290UGFzc3dvcmRIYXNoKTsKCQkJCgkJCSR1c2VyLT5zZXRGb3Jnb3RQYXNzd29yZEhhc2goJGZvcmdvdFBhc3N3b3JkSGFzaCk7CgkJCSR1c2VyLT5jb21taXREYXRhKCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRGb3Jnb3R0ZW5GbGFnKCRib29sKQoJewoJICAgICR0aGlzLT5mb3Jnb3R0ZW5GbGFnID0gKCRib29sID09IHRydWUpID8gIjEiIDogIjAiOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNGb3Jnb3R0ZW4oKQoJewoJICAgIHJldHVybiAoJHRoaXMtPmZvcmdvdHRlbkZsYWcgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCX0gCgkKCQoJLyoqCgkgKiBBbGxvd3MgZm9yIHVzZXIgaW5mb3JtYXRpb24gdG8gYmUgcmVtb3ZlZCB3aGlsZSBrZWVwaW5nIHRoZSByZWZlcmVudGlhbCBpbnRlZ3JpdHkgb2YgdGhlIGRhdGFiYXNlIGludGFjdCAoc3VwcG9ydHMgdGhlIEdEUFIgcmlnaHQgdG8gYmUgZm9yZ290dGVuKQoJICogUGVyc29uYWwgaW5mb3JtYXRpb24gaXMgYW5vbnltaXplZCBvdXQgYW5kIGFjdGl2aXR5IGxvZ2dpbmcgaXMgcmVtb3ZlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gZm9yZ2V0KCkKCXsKCSAgICBnbG9iYWwgJHdwZGI7CgkgICAgCgkgICAgaWYgKCEkdGhpcy0+aXNWYWxpZCgpKQoJICAgIHsKCSAgICAgICAgcmV0dXJuIG5ldyBNTV9SZXNwb25zZShfbW10KCJPbmx5IHZhbGlkIG1lbWJlcnMgY2FuIGJlIGZvcmdvdHRlbiIpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJICAgIH0KCSAgICAKCSAgICAvL2NhbmNlbCB0aGUgdXNlcgoJICAgIGlmICgkdGhpcy0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpCgkgICAgewogICAgCSAgICAkY2FuY2VsUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpjaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKCR0aGlzLCBNTV9TdGF0dXM6OiRDQU5DRUxFRCk7CiAgICAJICAgIGlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkY2FuY2VsUmVzcG9uc2UpKQogICAgCSAgICB7CiAgICAJICAgICAgICByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKF9tbXQoIkFuIGVycm9yIHdhcyBlbmNvdW50ZXJlZCB3aGVuIGF0dGVtcHRpbmcgdG8gY2FuY2VsIHRoZSB1c2VyJ3MgbWVtYmVyc2hpcCIpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwogICAgCSAgICB9CiAgICAJICAgIAogICAgCSAgICAvL25vdyB1cGRhdGUgdGhpcyBlbnRpdHkKICAgIAkgICAgJHRoaXMtPmdldERhdGEoKTsKCSAgICB9CgkgICAgCgkgICAgLy90aGVuLCBjYW5jZWwgYW55IGFjdGl2ZSBidW5kbGVzCgkgICAgJGFwcGxpZWRCdW5kbGVzID0gJHRoaXMtPmdldEFwcGxpZWRCdW5kbGVzKCk7CgkgICAgZm9yZWFjaCAoJGFwcGxpZWRCdW5kbGVzIGFzICRlYWNoQnVuZGxlKQoJICAgIHsKCSAgICAgICAgJGNhbmNlbFJlc3BvbnNlID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6cmVtb3ZlQnVuZGxlRnJvbVVzZXIoJHRoaXMsICRlYWNoQnVuZGxlLT5nZXRCdW5kbGUoKSxNTV9TdGF0dXM6OiRDQU5DRUxFRCk7CgkgICAgICAgIGlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkY2FuY2VsUmVzcG9uc2UpKQoJICAgICAgICB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKHNwcmludGYoX21tdCgiQW4gZXJyb3Igd2FzIGVuY291bnRlcmVkIHdoZW4gYXR0ZW1wdGluZyB0byByZXZva2UgYWNjZXNzIHRvIGJ1bmRsZSBpZCAlcyIpLCRlYWNoQnVuZGxlLT5nZXRCdW5kbGVJZCgpKSxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCSAgICAgICAgfQoJICAgIH0KCSAgICAKCSAgICAvL3JlbW92ZSBhbnkgY2FyZCBvbiBmaWxlIGRhdGEgZm9yIHRoaXMgdXNlciwganVzdCB0byBlbnN1cmUgdGhhdCBvbnNpdGUgYmlsbGluZyB0cnVseSBiZWNvbWVzIGltcG9zc2libGUKCSAgICAkd3BkYi0+ZGVsZXRlKE1NX1RBQkxFX0NBUkRfT05fRklMRSxhcnJheSgidXNlcl9pZCI9PiR0aGlzLT5pZCkpOwoJICAgIAoJICAgICRzdWNjZXNzTGlzdCA9IGFycmF5KCk7CgkgICAgJGZhaWxMaXN0ID0gYXJyYXkoKTsKCSAgICAKCSAgICAkYW5vbnltaXplZExhYmVsID0gIjwiLl9tbXQoInJlbW92ZWQiKS4iPiI7CgkgICAgCgkgICAgCgkgICAgLy9yZW1vdmUgYW55IGN1c3RvbSBmaWVsZCBkYXRhCgkgICAgJGRlbGV0ZUN1c3RvbUZpZWxkRGF0YSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0ZPUkdFVF9NRU1CRVJfQ1VTVE9NX0ZJRUxEUyk7CgkgICAgaWYgKCRkZWxldGVDdXN0b21GaWVsZERhdGEgPT0gdHJ1ZSkKCSAgICB7CgkgICAgICAgIGlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKE1NX0N1c3RvbUZpZWxkRGF0YTo6ZGVsZXRlQnlVc2VySWQoJHRoaXMtPmlkKSkpCgkgICAgICAgIHsKCSAgICAgICAgICAgICRzdWNjZXNzTGlzdFtdID0gc3RydG9sb3dlcihfbW10KCJDdXN0b20gRmllbGRzIikpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgCgkgICAgICAgIHsKCSAgICAgICAgICAgICRmYWlsTGlzdFtdID0gc3RydG9sb3dlcihfbW10KCJDdXN0b20gRmllbGRzIikpOwoJICAgICAgICB9CgkgICAgfQoJICAgIAoJICAgIC8vdGhlbiByZW1vdmUgYWN0aXZpdHkgbG9nZ2luZwoJICAgICRkZWxldGVBY3Rpdml0eUxvZ3MgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9GT1JHRVRfTUVNQkVSX0FDVElWSVRZX0xPRyk7CgkgICAgaWYgKCRkZWxldGVBY3Rpdml0eUxvZ3MgPT0gdHJ1ZSkKCSAgICB7CgkgICAgICAgIGlmIChNTV9BY3Rpdml0eUxvZzo6ZGVsZXRlTWVtYmVyKCR0aGlzLT5pZCkpCgkgICAgICAgIHsKCSAgICAgICAgICAgICRzdWNjZXNzTGlzdFtdID0gc3RydG9sb3dlcihfbW10KCJBY3Rpdml0eSBMb2ciKSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSAKCSAgICAgICAgewoJICAgICAgICAgICAgJGZhaWxMaXN0W10gPSBzdHJ0b2xvd2VyKF9tbXQoIkFjdGl2aXR5IExvZyIpKTsKCSAgICAgICAgfQoJICAgIH0KCSAgICAKCSAgICAvL25leHQgb3JkZXIgaW5mb3JtYXRpb24KCSAgICAkc2NydWJPcmRlckluZm8gPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9GT1JHRVRfTUVNQkVSX09SREVSX0FERFJFU1MpOwoJICAgICRmaWVsZFZhbHVlcyA9IGFycmF5KCk7CgkgICAgJG9yZGVyU2NvcGUgPSBhcnJheSgpOwoJICAgIGlmICgkc2NydWJPcmRlckluZm8gPT0gdHJ1ZSkKCSAgICB7CgkgICAgICAgICRvcmRlclNjb3BlW10gPSBfbW10KCJvcmRlciBpbmZvcm1hdGlvbiIpOwoJICAgICAgICAkZmllbGRWYWx1ZXMgKz0gYXJyYXkoJ2JpbGxpbmdfZmlyc3RfbmFtZSc9PiRhbm9ueW1pemVkTGFiZWwsCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiaWxsaW5nX2xhc3RfbmFtZSc9PiRhbm9ueW1pemVkTGFiZWwsCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdiaWxsaW5nX2FkZHJlc3MxJz0+bnVsbCwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JpbGxpbmdfYWRkcmVzczInPT5udWxsLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYmlsbGluZ19jaXR5Jz0+bnVsbCwKICAgICAgICAgICAgICAgIAkgICAgICAgICAgICAgICAgICdiaWxsaW5nX3Bob25lJz0+bnVsbCwKICAgICAgICAgICAgICAgICAgICAJICAgICAgICAgICAgICdiaWxsaW5nX3Bvc3RhbF9jb2RlJz0+bnVsbCwKICAgICAgICAgICAgICAgICAgICAJICAgICAgICAgICAgICdiaWxsaW5nX3Byb3ZpbmNlJz0+bnVsbCwKICAgICAgICAgICAgICAgICAgICAJICAgICAgICAgICAgICdiaWxsaW5nX3N0YXRlJz0+bnVsbCwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3NoaXBwaW5nX2ZpcnN0X25hbWUnPT4kYW5vbnltaXplZExhYmVsLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc2hpcHBpbmdfbGFzdF9uYW1lJz0+JGFub255bWl6ZWRMYWJlbCwKICAgICAgICAgICAgICAgICAgICAJICAgICAgICAgICAgICdzaGlwcGluZ19hZGRyZXNzMSc9Pm51bGwsCiAgICAgICAgICAgICAgICAgICAgCSAgICAgICAgICAgICAnc2hpcHBpbmdfYWRkcmVzczInPT5udWxsLAogICAgICAgICAgICAgICAgICAgIAkgICAgICAgICAgICAgJ3NoaXBwaW5nX2NpdHknPT5udWxsLAogICAgICAgICAgICAgICAgICAgIAkgICAgICAgICAgICAgJ3NoaXBwaW5nX3Bob25lJz0+bnVsbCwKICAgICAgICAgICAgICAgICAgICAJICAgICAgICAgICAgICdzaGlwcGluZ19wb3N0YWxfY29kZSc9Pm51bGwsCiAgICAgICAgICAgICAgICAgICAgCSAgICAgICAgICAgICAnc2hpcHBpbmdfcHJvdmluY2UnPT5udWxsLAogICAgICAgICAgICAgICAgICAgIAkgICAgICAgICAgICAgJ3NoaXBwaW5nX3N0YXRlJz0+bnVsbCwKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lwX2FkZHJlc3MnPT5udWxsLAoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGF0ZV9tb2RpZmllZCcgPT4gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCkKCSAgICAgICAgKTsKCSAgICB9CgkgICAgCgkgICAgJHNjcnViT3JkZXJDb3VudHJ5ID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfRk9SR0VUX01FTUJFUl9PUkRFUl9DT1VOVFJZKTsKCSAgICBpZiAoJHNjcnViT3JkZXJDb3VudHJ5ID09IHRydWUpCgkgICAgewoJICAgICAgICAkb3JkZXJTY29wZVtdID0gX21tdCgib3JkZXIgY291bnRyeSIpOwoJICAgICAgICAkZmllbGRWYWx1ZXNbImJpbGxpbmdfY291bnRyeSJdID0gbnVsbDsKCSAgICAgICAgJGZpZWxkVmFsdWVzWyJzaGlwcGluZ19jb3VudHJ5Il0gPSBudWxsOwoJICAgIH0KCSAgICAKCSAgICBpZiAoJHNjcnViT3JkZXJJbmZvIHx8ICRzY3J1Yk9yZGVyQ291bnRyeSkKCSAgICB7CgkgICAgICAgICRzdGF0dXMgPSAkd3BkYi0+dXBkYXRlKE1NX1RBQkxFX09SREVSUywkZmllbGRWYWx1ZXMsYXJyYXkoInVzZXJfaWQiPT4kdGhpcy0+aWQpKTsKCSAgICAgICAgaWYgKCRzdGF0dXMgPT09IGZhbHNlKQoJICAgICAgICB7CgkgICAgICAgICAgICAkZmFpbExpc3QgKz0gJG9yZGVyU2NvcGU7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSAKCSAgICAgICAgewoJICAgICAgICAgICAgJHN1Y2Nlc3NMaXN0ICs9ICRvcmRlclNjb3BlOwoJICAgICAgICB9CgkgICAgfQoJICAgIAoJICAgIC8vdGhpcmQsIHN0b3JlZCBtZW1iZXIgYWRkcmVzcyBhbmQgY29udGFjdCBpbmZvCgkgICAgJHVzZXJTY29wZSA9IGFycmF5KCk7CgkgICAgJHNjcnViU3RvcmVkQWRkcmVzcyA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0ZPUkdFVF9NRU1CRVJfQUREUkVTUyk7CgkgICAgaWYgKCRzY3J1YlN0b3JlZEFkZHJlc3MgPT0gdHJ1ZSkKCSAgICB7CgkgICAgICAgICR1c2VyU2NvcGVbXSA9IF9tbXQoInN0b3JlZCBhZGRyZXNzIGluZm9ybWF0aW9uIik7CgkgICAgICAgICR0aGlzLT5zZXRGaXJzdE5hbWUoIiIpOwoJICAgICAgICAkdGhpcy0+c2V0TGFzdE5hbWUoIiIpOwoJICAgICAgICAkdGhpcy0+c2V0QmlsbGluZ0FkZHJlc3MoIiIpOwoJICAgICAgICAkdGhpcy0+c2V0QmlsbGluZ0NpdHkoIiIpOwoJICAgICAgICAkdGhpcy0+c2V0QmlsbGluZ1N0YXRlKCIiKTsKCSAgICAgICAgJHRoaXMtPnNldEJpbGxpbmdaaXBDb2RlKCIiKTsKCSAgICAgICAgJHRoaXMtPnNldFNoaXBwaW5nQWRkcmVzcygiIik7CgkgICAgICAgICR0aGlzLT5zZXRTaGlwcGluZ0NpdHkoIiIpOwoJICAgICAgICAkdGhpcy0+c2V0U2hpcHBpbmdTdGF0ZSgiIik7CgkgICAgICAgICR0aGlzLT5zZXRTaGlwcGluZ1ppcENvZGUoIiIpOwoJICAgICAgICAkdGhpcy0+c2V0UGhvbmUoIiIpOwoJICAgIH0KCSAgICAKCSAgICAkc2NydWJTdG9yZWRBZGRyZXNzQ291bnRyeSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0ZPUkdFVF9NRU1CRVJfQUREUkVTU19DT1VOVFJZKTsKCSAgICBpZiAoJHNjcnViU3RvcmVkQWRkcmVzc0NvdW50cnkgPT0gdHJ1ZSkKCSAgICB7CgkgICAgICAgICR1c2VyU2NvcGVbXSA9IF9tbXQoInN0b3JlZCBhZGRyZXNzIGNvdW50cnkiKTsKCSAgICAgICAgJHRoaXMtPnNldEJpbGxpbmdDb3VudHJ5KCIiKTsKCSAgICAgICAgJHRoaXMtPnNldFNoaXBwaW5nQ291bnRyeSgiIik7CgkgICAgfQoJICAgIAoJICAgICRzaG91bGRBbm9ueW1pemVFbWFpbCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0ZPUkdFVF9NRU1CRVJfRU1BSUxfQUREUkVTUyk7CgkgICAgLy9yZWdhcmRsZXNzIG9mIHdoYXQgZGF0YSBpcyBzY3J1YmJlZCwgdGhlIHVzZXIgbmVlZHMgdG8gYmUgY2FuY2VsbGVkLCBhbmQgdGhlIHVzZXJfbG9naW4gYW5kIHBhc3N3b3JkIG5lZWQgdG8gYmUgY2hhbmdlZAoJICAgICR1c2VyU2NvcGVbXSA9IF9tbXQoInVzZXIgYWNjb3VudCBpbmZvcm1hdGlvbiIpOwoJICAgICR0aGlzLT5sYXN0TG9naW5JcEFkZHJlc3MgPSAiIjsKCSAgICBhZGRfZmlsdGVyKCdzZW5kX3Bhc3N3b3JkX2NoYW5nZV9lbWFpbCcsICdfX3JldHVybl9mYWxzZScpOwoJICAgICR1c2VyTG9naW4gPSAidXNlcnskdGhpcy0+aWR9XyIuTU1fVXRpbHM6OmNyZWF0ZVJhbmRvbVN0cmluZygpOwoJICAgICR1c2VyUGFzcyA9IE1NX1V0aWxzOjpjcmVhdGVSYW5kb21TdHJpbmcoNjQpOwoJICAgICR0aGlzLT5zZXRVc2VybmFtZSgkdXNlckxvZ2luKTsKCSAgICBpZiAoJHNob3VsZEFub255bWl6ZUVtYWlsID09IHRydWUpCgkgICAgewoJICAgICAgIC8vVE9ETzogbWFrZSBzdXJlIG1tIGRvZXMgbm90IHRyeSB0byBzZW5kIHRvIC5pbnZhbGlkIGVtYWlsIGFkZHJlc3NlcyBvciBhZGQgdG8gYSBsaXN0CgkgICAgICAgJHVzZXJFbWFpbCA9ICJ7JHVzZXJMb2dpbn1AZm9yZ290dGVuLmludmFsaWQiOyAvLy5pbnZhbGlkIGRvbWFpbnMgYXJlIHNwZWNpZmllZCBpbiBSRkMgNjc2MSBhcyBiZWluZyBleHByZXNzbHkgZm9yIGFkZHJlc3NlcyB0aGF0IGFyZSBub25leGlzdGVudAoJICAgICAgICR0aGlzLT5zZXRFbWFpbCgkdXNlckVtYWlsKTsKCSAgICB9CgkgICAgJHRoaXMtPnNldFBhc3N3b3JkKCR1c2VyUGFzcyk7CgkgICAgJHRoaXMtPnNldEZvcmdvdHRlbkZsYWcodHJ1ZSk7CgkgICAgaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHRoaXMtPmNvbW1pdERhdGEoKSkpCgkgICAgewoJICAgICAgICAkc3VjY2Vzc0xpc3QgKz0gJHVzZXJTY29wZTsKCSAgICB9CgkgICAgZWxzZSAKCSAgICB7CgkgICAgICAgICRmYWlsTGlzdCArPSAkdXNlclNjb3BlOwoJICAgIH0KCSAgICAKCSAgICAvL2F0IHRoaXMgcG9pbnQsICRzdWNjZXNzTGlzdCBjb250YWlucyBhIGh1bWFuLXJlYWRhYmxlIGxpc3Qgb2YgdGhlIG9wZXJhdGlvbnMgdGhhdCBzdWNjZWVkZWQsIHdoaWxlICRmYWlsTGlzdCBjb250YWlucyB0aGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZAoJICAgIC8vdGhlIGZvcmdldCgpIG9wZXJhdGlvbiBpcyBjb25zaWRlcmVkIHN1Y2Nlc3NmdWxseSwgb25seSBpZiBBTEwgdGhlIHN1Yi1vcGVyYXRpb25zIHN1Y2NlZWRlZAoJICAgIGlmIChjb3VudCgkZmFpbExpc3QpID09IDApCgkgICAgewoJICAgICAgICByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkgICAgfQoJICAgIGVsc2UgCgkgICAgewoJICAgICAgICAkZXJyb3JNc2cgPSBfbW10KCJUaGUgZm9sbG93aW5nIG9wZXJhdGlvbnMgc3VjY2VlZGVkIikuIjpcbiIuCgkgICAJICAgICAgICBpbXBsb2RlKCIsIiwkc3VjY2Vzc0xpc3QpLiJcbiIuCgkgICAJICAgICAgICBfbW10KCJUaGUgZm9sbG93aW5nIG9wZXJhdGlvbnMgZmFpbGVkIikuIjpcbiIuCgkgICAJICAgICAgICBpbXBsb2RlKCIsIiwkZmFpbExpc3QpOwoJICAgICAgICByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlcnJvck1zZyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCSAgICB9Cgl9CgkKfQo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(224, 'rbacadminview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCgphYnN0cmFjdCBjbGFzcyBNTV9SQkFDQWRtaW5WaWV3IGV4dGVuZHMgTU1fUkJBQ0Jhc2VWaWV3CnsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7CgkJJHRoaXMtPnBlcm1pc3Npb25zID0gYXJyYXkoCgkJCQkiKiIgID0+ICBhcnJheShNTV9Sb2xlOjokUk9MRV9BRE1JTklTVFJBVE9SKQoJCQkJKTsKCX0KfQ==', 0, '2018-11-21 06:38:55'),
(225, 'linkedinloginextension', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICovCmNsYXNzIE1NX0xpbmtlZEluTG9naW5FeHRlbnNpb24gZXh0ZW5kcyBNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uCnsJCgkKCXByb3RlY3RlZCAkZXh0ZW5zaW9uTmFtZSA9ICJMb2dpbiB3aXRoIExpbmtlZEluIjsKCXByb3RlY3RlZCAkcHJvdmlkZXJOYW1lICA9ICJMaW5rZWRJbiI7Cglwcm90ZWN0ZWQgJGtleU5hbWUJCSA9ICJDbGllbnQgSUQiOwoJcHJvdGVjdGVkICRzZWNyZXROYW1lIAkgPSAiQ2xpZW50IFNlY3JldCI7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkYXV0b2xvYWREZXBlbmRlbmNpZXM9dHJ1ZSwkY29uZmlnRGF0YT0iIikgCgl7IAoJCS8vbGlua2VkaW4gc3BlY2lmaWMgc2V0dGluZ3MKCQkkdGhpcy0+dG9rZW4gPSBNTV9FeHRlbnNpb246OiRMSU5LRURJTl9MT0dJTl9UT0tFTjsKCQkkdGhpcy0+bGlzdGluZ0ltYWdlID0gImh0dHBzOi8vbWVtYmVybW91c2UuY29tL2Fzc2V0cy9wbHVnaW5faW1hZ2VzL2xvZ29zL2V4dGVuc2lvbnMtbGlua2VkaW4uanBnIjsKCSAJLy8kdGhpcy0+c3VwcG9ydEFydGljbGVVcmwgPSAiaHR0cDovL3N1cHBvcnQubWVtYmVybW91c2UuY29tL3N1cHBvcnQvc29sdXRpb25zL2FydGljbGVzLzkwMDAwMjAyODMtY29uZmlndXJpbmctbGlua2VkaW4tbG9naW4iOwoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0SHlicmlkQXV0aENvbmZpZygpCgl7CgkJJGNvbmZpZyA9IHBhcmVudDo6Z2V0SHlicmlkQXV0aENvbmZpZygpOwoJCSRjb25maWdbInByb3ZpZGVycyJdID0gYXJyYXkgKAoJCQkJCSR0aGlzLT50b2tlbiA9PiBhcnJheSAoCgkJCQkJCQkiZW5hYmxlZCIgPT4gdHJ1ZSwKCQkJCQkJCSJrZXlzIiAgICA9PiBhcnJheSAoICJrZXkiID0+ICR0aGlzLT5hcGlLZXksICJzZWNyZXQiID0+ICR0aGlzLT5hcGlTZWNyZXQgKSwKCQkJCQkJCSJzY29wZSIgICA9PiAiZW1haWwiLAoJCQkJCQkJCgkJCQkJKQoJCQkpOwoJCXJldHVybiAkY29uZmlnOwoJfQp9', 0, '2018-11-21 06:38:55'),
(226, 'template', 'PD9waHAKLyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fVEVNUExBVEUKewoJcHJpdmF0ZSAkaW5mbzsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0ICgpCgl7CgkJJHRoaXMtPmluZm8gPSBuZXcgc3RkQ2xhc3MoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlbmRlcl93aXRoKCR0ZW1wbGF0ZSkKCXsKCQkkcCA9ICR0aGlzLT5pbmZvOwoJCWlmKGZpbGVfZXhpc3RzKCR0ZW1wbGF0ZSkpCgkJewoJCQlyZXR1cm4gaW5jbHVkZSgkdGVtcGxhdGUpOwoJCX0KCQllbHNlCgkJewoJCQllY2hvICJmaWxlIGRvZXMgbm90IGV4aXN0IHskdGVtcGxhdGV9IjsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2VuZXJhdGUoJGZpbGVuYW1lLCAkaW5mbz0iIikKCXsKCQkJJHAgPSAkaW5mbzsKCQkJCgkJCWlmIChpc19maWxlKCRmaWxlbmFtZSkpIHsKCQkJCW9iX3N0YXJ0KCk7CgkJCQlpbmNsdWRlICRmaWxlbmFtZTsKCQkJCSRjb250ZW50cyA9IG9iX2dldF9jb250ZW50cygpOwoJCQkJb2JfZW5kX2NsZWFuKCk7CgkJCQlyZXR1cm4gJGNvbnRlbnRzOwoJCQl9CgkJCQoJCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBhZGRfdmFyKCRuYW1lLCAkdmFsKQoJewoJCSR0aGlzLT5pbmZvLT4kbmFtZSA9ICR2YWw7Cgl9Cgp9CiAK', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(227, 'coinbaseminimalservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIE1NX0NvaW5iYXNlU2VydmljZSBoYW5kbGVzIGhhbmRsZXMgYml0Y29pbiB0cmFuc2FjdGlvbnMgYW5kIG5vdGlmaWNhdGlvbnMgbWFkZSB2aWEgQ29pbmJhc2UKICogCiAqLwogCmNsYXNzIE1NX0NvaW5iYXNlTWluaW1hbFNlcnZpY2UgZXh0ZW5kcyBNTV9TY2hlZHVsZWRQYXltZW50U2VydmljZQp7Cglwcm90ZWN0ZWQgJHRva2VuID0gIkNPSU5CQVNFTUlOSU1BTCI7CgkKCS8vY29pbmJhc2Ugb3JkZXIvcGF5bWVudCBzdGF0dXNlcwoJcHVibGljIHN0YXRpYyAkT1JERVJfU1RBVFVTX0NPTVBMRVRFRCA9ICJjb21wbGV0ZWQiOwoJcHVibGljIHN0YXRpYyAkT1JERVJfU1RBVFVTX01JU1BBSUQgPSAibWlzcGFpZCI7CglwdWJsaWMgc3RhdGljICRPUkRFUl9TVEFUVVNfRVhQSVJFRCA9ICJleHBpcmVkIjsKCXB1YmxpYyBzdGF0aWMgJE9SREVSX1NUQVRVU19DQU5DRUxFRCA9ICJjYW5jZWxlZCI7CgkKCS8vYXBpIGNvbmZpZ3VyYXRpb24gZmllbGRzCglwcm90ZWN0ZWQgJGFwaUtleSAgPSAiIjsKCXByb3RlY3RlZCAkYXBpU2VjcmV0ICA9ICIiOwoJCgkvL3V4IGZpZWxkcwoJcHJvdGVjdGVkICRyZW1pbmRlclRpbWVCZWZvcmUgPSBhcnJheSgxLDMsNyk7Cglwcm90ZWN0ZWQgJHJlbWluZGVyU3ViamVjdCA9IGFycmF5KAoJCSJbTU1fTWVtYmVyX0RhdGEgbmFtZT0nZmlyc3ROYW1lJ10gLSAxIGRheSBsZWZ0IHRvIHNlbmQgeW91ciBbTU1fT3JkZXJfRGF0YSBuYW1lPSdwcm9kdWN0TmFtZSddIGJpdGNvaW4gcGF5bWVudCIsCgkJIltNTV9NZW1iZXJfRGF0YSBuYW1lPSdmaXJzdE5hbWUnXSAtIDMgZGF5cyBsZWZ0IHRvIHNlbmQgeW91ciBbTU1fT3JkZXJfRGF0YSBuYW1lPSdwcm9kdWN0TmFtZSddIGJpdGNvaW4gcGF5bWVudCIsCgkJIltNTV9NZW1iZXJfRGF0YSBuYW1lPSdmaXJzdE5hbWUnXSAtIDcgZGF5cyBsZWZ0IHRvIHNlbmQgeW91ciBbTU1fT3JkZXJfRGF0YSBuYW1lPSdwcm9kdWN0TmFtZSddIGJpdGNvaW4gcGF5bWVudCIKCSk7Cglwcm90ZWN0ZWQgJHJlbWluZGVyVGV4dCA9IGFycmF5KAoJCSJIaSBbTU1fTWVtYmVyX0RhdGEgbmFtZT0nZmlyc3ROYW1lJ10sXG5cbiBZb3VyIFtNTV9PcmRlcl9EYXRhIG5hbWU9J3Byb2R1Y3ROYW1lJ10gbWVtYmVyc2hpcCBpcyBhbG1vc3QgZHVlIC0gdG8gY29udGludWUsIHlvdSdsbCBuZWVkIHRvIHNlbmQgdGhlIGZvbGxvd2luZyBwYXltZW50OiBcblxuIFtNTV9CaXRjb2luX1BheW1lbnRfRGV0YWlsc11cblxuIFdoZW4geW91ciBwYXltZW50IGlzIHJlY2VpdmVkLCB5b3VyIG1lbWJlcnNoaXAgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlbmV3ZWQuXG5cbiBUaGFua3MhXG4gW01NX0VtcGxveWVlX0RhdGEgbmFtZT0nZGlzcGxheU5hbWUnXSIsCgkJIkhpIFtNTV9NZW1iZXJfRGF0YSBuYW1lPSdmaXJzdE5hbWUnXSxcblxuIFlvdXIgW01NX09yZGVyX0RhdGEgbmFtZT0ncHJvZHVjdE5hbWUnXSBtZW1iZXJzaGlwIGlzIGFsbW9zdCBkdWUgLSB0byBjb250aW51ZSwgeW91J2xsIG5lZWQgdG8gc2VuZCB0aGUgZm9sbG93aW5nIHBheW1lbnQ6IFxuXG4gW01NX0JpdGNvaW5fUGF5bWVudF9EZXRhaWxzXVxuXG4gV2hlbiB5b3VyIHBheW1lbnQgaXMgcmVjZWl2ZWQsIHlvdXIgbWVtYmVyc2hpcCB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmVuZXdlZC5cblxuIFRoYW5rcyFcbiBbTU1fRW1wbG95ZWVfRGF0YSBuYW1lPSdkaXNwbGF5TmFtZSddIiwKCQkiSGkgW01NX01lbWJlcl9EYXRhIG5hbWU9J2ZpcnN0TmFtZSddLFxuXG4gWW91ciBbTU1fT3JkZXJfRGF0YSBuYW1lPSdwcm9kdWN0TmFtZSddIG1lbWJlcnNoaXAgaXMgYWxtb3N0IGR1ZSAtIHRvIGNvbnRpbnVlLCB5b3UnbGwgbmVlZCB0byBzZW5kIHRoZSBmb2xsb3dpbmcgcGF5bWVudDogXG5cbiBbTU1fQml0Y29pbl9QYXltZW50X0RldGFpbHNdXG5cbiBXaGVuIHlvdXIgcGF5bWVudCBpcyByZWNlaXZlZCwgeW91ciBtZW1iZXJzaGlwIHdpbGwgYXV0b21hdGljYWxseSBiZSByZW5ld2VkLlxuXG4gVGhhbmtzIVxuIFtNTV9FbXBsb3llZV9EYXRhIG5hbWU9J2Rpc3BsYXlOYW1lJ10iCgkpOwoJCgkvL1RPRE86IFJFRkFDVE9SOiBORVZFUiBTSElQIFRPIFBST0RVQ1RJT04gV0lUSCAkc2tpcFZhbGlkYXRpb24gQVMgVFJVRTsgRk9SIExPQ0FMIFRFU1RJTkcgT05MWSEKCXByaXZhdGUgJHNraXBWYWxpZGF0aW9uID0gZmFsc2U7Cglwcml2YXRlICRhbGxvd09yZGVyQ3JlYXRpb24gPSBmYWxzZTsKCQoJLy9zZXQgdGhyZXNob2xkIG9mIHdoZW4gaXBucyBzaG91bGQgYmUgbG9nZ2VkIHRvIGRhdGFiYXNlCgkvL2FsbCBmYWxzZSBpcyBtYXhpbXVtIGVmZmllbmN5IChsZXNzIGRiIHdyaXRlcykgYW5kCgkvL2FsbCB0cnVlIGlzIG1heGltdW0gc2FmZXR5IChhd2FyZW5lc3Mgb2YgaGFjayBhdHRlbXB0cywgYmV0dGVyIGRlYnVnZ2luZyBpZiBjb2luYmFzZSBjaGFuZ2VzIGZvcm1hdCwgZXRjKQoJcHJpdmF0ZSAkbG9nVW5hdXRob3JpemVkSVBOcyA9IHRydWU7Cglwcml2YXRlICRsb2dJbnZhbGlkSVBOcyA9IHRydWU7Cglwcml2YXRlICRsb2dEdXBsaWNhdGVJUE5zID0gZmFsc2U7CgkKCS8vY291bGQgaW4gdGhlIGZ1dHVyZSBzdXBwb3J0IGFsbCBjdXJyZW5jaWVzIGxpc3RlZCBoZXJlOiBodHRwczovL2NvaW5iYXNlLmNvbS9hcGkvdjEvY3VycmVuY2llcwoJLy9idXQgdGhpcyB3b3VsZCByZXF1aXJlIGFkYXB0aW5nIGlwbiBoYW5kbGluZyB0byBtYWtlIHN1cmUgaXQgY291bGQgaGFuZGxlIGN1cnJlY3RseQoJLy8ocmlnaHQgbm93IHdlIGFzc3VtZSB0aGF0IG9yZGVyLT50b3RhbF9uYXRpdmUtPmNlbnRzLzEwMCA9IHBheW1lbnQgdG90YWwpCgkvL2Fsc28gd291bGQgbmVlZCB0byBtYWtlIHZhbGlkYXRlT3JkZXIoKSwgd2hpY2ggZW5zdXJlcyBubyBvcmRlciBpcyBsZXNzIHRoYW4gJDEuMDAgVVNELAoJLy9pcyBhYmxlIHRvIGNhbGN1bGF0ZSBjb3JyZWN0bHkgZm9yIG90aGVyIGN1cnJlbmNpZXMKCXByb3RlY3RlZCAkc3VwcG9ydGVkQ3VycmVuY2llcyA9IGFycmF5KCJVU0QiKTsKCglwdWJsaWMgZnVuY3Rpb24gbG9hZERlcGVuZGVuY2llcygpCgl7CgkJcmVxdWlyZV9vbmNlKE1NX0xJQl9ESVIuIi9jb2luYmFzZS9Db2luYmFzZS5waHAiKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldEFQSUtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5hcGlLZXk7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldEFQSUtleSgkYXBpS2V5KQoJewoJCSR0aGlzLT5hcGlLZXkgPSAkYXBpS2V5OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBnZXRBUElTZWNyZXQoKQoJewoJCXJldHVybiAkdGhpcy0+YXBpU2VjcmV0OwoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRBUElTZWNyZXQoJGFwaVNlY3JldCkKCXsKCQkkdGhpcy0+YXBpU2VjcmV0ID0gJGFwaVNlY3JldDsKCX0KCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmVtaW5kZXJUaW1lQmVmb3JlKCRlbWFpbE51bT1mYWxzZSkKCXsKCQlyZXR1cm4gKCRlbWFpbE51bSE9PWZhbHNlKT8gJHRoaXMtPnJlbWluZGVyVGltZUJlZm9yZVskZW1haWxOdW1dIDogKGFycmF5KSR0aGlzLT5yZW1pbmRlclRpbWVCZWZvcmU7IAoJfQoKCXB1YmxpYyBmdW5jdGlvbiBzZXRSZW1pbmRlclRpbWVCZWZvcmUoJHJlbWluZGVyVGltZUJlZm9yZSkKCXsKCQkkdGhpcy0+cmVtaW5kZXJUaW1lQmVmb3JlID0gJHJlbWluZGVyVGltZUJlZm9yZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlbWluZGVyU3ViamVjdCgkZW1haWxOdW09ZmFsc2UpCgl7CgkJcmV0dXJuICgkZW1haWxOdW0hPT1mYWxzZSk/ICR0aGlzLT5yZW1pbmRlclN1YmplY3RbJGVtYWlsTnVtXSA6IChhcnJheSkkdGhpcy0+cmVtaW5kZXJTdWJqZWN0OyAKCX0KCglwdWJsaWMgZnVuY3Rpb24gc2V0UmVtaW5kZXJTdWJqZWN0KCRyZW1pbmRlclN1YmplY3QpCgl7CgkJJHRoaXMtPnJlbWluZGVyU3ViamVjdCA9ICRyZW1pbmRlclN1YmplY3Q7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZW1pbmRlclRleHQoJGVtYWlsTnVtPWZhbHNlKQoJewoJCXJldHVybiAoJGVtYWlsTnVtIT09ZmFsc2UpPyAkdGhpcy0+cmVtaW5kZXJUZXh0WyRlbWFpbE51bV0gOiAoYXJyYXkpJHRoaXMtPnJlbWluZGVyVGV4dDsgCgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldFJlbWluZGVyVGV4dCgkcmVtaW5kZXJUZXh0KQoJewoJCSR0aGlzLT5yZW1pbmRlclRleHQgPSAkcmVtaW5kZXJUZXh0OwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gaW5zdGFsbCgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCXBhcmVudDo6aW5zdGFsbCgpOwoJCQoJCS8vcHVycG9zZSBvZiB0aGlzIHRhYmxlIGlzIHRvIGxvZyBldmVyeSBpbmNvbWluZyBpcG4gdHJhbnNhY3Rpb24KCQkkc3FsW10gPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX0lQTl9MT0cuIiAoXG4iLgoJCQkJImlkIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4iLgoJCQkJImJ1dHRvbl9pZCB2YXJjaGFyKDQ4KSxcbiIuCgkJCQkiaXBuX3RyYW5zYWN0aW9uX2lkIHZhcmNoYXIoNDgpLFxuIi4KCQkJCSJpcG5fY29udGVudCB0ZXh0IE5PVCBOVUxMLFxuIi4KCQkJCSJpcG5fc3RhdHVzIHZhcmNoYXIoMjQpLFxuIi4KCQkJCSJlcnJvciBDSEFSKDApIE5VTEwsIFxuIi4KCQkJCSJyZWNlaXZlZCBkYXRldGltZSBOT1QgTlVMTCxcbiIuCgkJCQkiUFJJTUFSWSBLRVkgIChpZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTsiOwoKCQkvL3B1cnBvc2Ugb2YgdGhpcyB0YWJsZSBpcyB0byBtYWtlIGFuIG46MSBsaW5rIG9mIGV2ZXJ5IGNvaW5iYXNlICJidXR0b24iICh1bmlxdWUgY2hlY2tvdXQpIHdpdGggYSBtbSBvcmRlcgoJCSRzcWxbXSA9ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9DT0lOQkFTRU1JTklNQUxfQlVUVE9OX0xJTktTLiIgKFxuIi4KCQkJCSJpZCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuIi4KCQkJCSJidXR0b25faWQgdmFyY2hhcigzMikgTk9UIE5VTEwsXG4iLgoJCQkJIm9yZGVyX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJImNvaW5iYXNlX29yZGVyIHRleHQgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCQkJCQoJCS8vcHVycG9zZSBvZiB0aGlzIHRhYmxlIGlzIHRvIHR5cGlmeSBlYWNoIHNjaGVkdWxlZCBldmVudCBhcyBhIHJlbWluZGVyIG9yIHBheW1lbnQgY2hlY2sgYW5kIHRyYWNrIGl0cyBzdGF0dXMKCQkkc3FsW10gPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1NDSEVEVUxFRF9FVkVOVFMuIiAoXG4iLgoJCQkJImlkIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4iLgoJCQkJIm9yZGVyX2l0ZW1faWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkidHlwZSB2YXJjaGFyKDMyKSBOT1QgTlVMTCxcbiIuCgkJCQkic3RhdHVzIHZhcmNoYXIoMzIpIE5PVCBOVUxMLFxuIi4KCQkJCSJkYXRhIHRleHQsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCQkJCQoJCS8vcHVycG9zZSBvZiB0aGlzIHRhYmxlIGlzIHRvIGxvZyBhbGwgY3JlZGl0cyBhbmQgZGVmaWNpdHMgcGVyIG9yZGVyIGl0ZW0KCQkvL2Vzc2VudGlhbGx5IHNhbWUgZGF0YSBhcyB0cmFuc2FjdGlvbiBsb2cgYnV0IGF2b2lkcyBkZXBlbmRlbmN5IG9uIHRoYXQKCQkkc3FsW10gPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1RSQU5TQUNUSU9OUy4iIChcbiIuCgkJCQkiaWQgYmlnaW50KDIwKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCxcbiIuCgkJCQkib3JkZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkib3JkZXJfaXRlbV9pZCBiaWdpbnQoMjApLFxuIi4KCQkJCSJidXR0b25faWQgdmFyY2hhcig0OCksXG4iLgoJCQkJImJ0Y19hbW91bnQgZGVjaW1hbCgxMCw4KSBOT1QgTlVMTCxcbiIuCgkJCQkiYW1vdW50IGRlY2ltYWwoMTAsNCkgTk9UIE5VTEwsXG4iLgoJCQkJImN1cnJlbmN5IGNoYXIoMykgTk9UIE5VTEwsXG4iLgoJCQkJIm1pc3BhaWRfYW1vdW50IGRlY2ltYWwoMTAsNCkgTk9UIE5VTEwsXG4iLgoJCQkJInRyYW5zYWN0aW9uX2RhdGUgZGF0ZXRpbWUgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7IjsKCgkJZm9yZWFjaCAoJHNxbCBhcyAkcXVlcnkpCgkJewoJCQlkYmRlbHRhKCRxdWVyeSk7CgkJfQoJCQoJfQoKCgkvKioKCSAqIFVzZWQgdG8gcmVwb3J0IHdoYXQgZmVhdHVyZXMgdGhlIENvaW5iYXNlIFNlcnZpY2Ugc3VwcG9ydHMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN1cHBvcnRzRmVhdHVyZSgpCgkgKiAKCSAqIEBwYXJhbSAkZmVhdHVyZUNvbnN0IGEgY29uc3QgYXMgZGVmaW5lZCBpbiBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdCBzdXBwb3J0ZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHN1cHBvcnRzRmVhdHVyZSgkZmVhdHVyZUNvbnN0KQoJewoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9GRlNJVEVfU0VSVklDRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDT1VQT05TOwkJCgkJcmV0dXJuIGluX2FycmF5KCRmZWF0dXJlQ29uc3QsJHN1cHBvcnRlZCx0cnVlKTsKCX0KCgkKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkjIEFETUlOCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCS8qKgoJICogUmV0dXJucyB0aGUgaHRtbCB0aGF0IHdpbGwgYmUgdXNlZCBvbiB0aGUgcGF5bWVudCBtZXRob2Qgc2V0dGluZ3Mgc2NyZWVuIGZvciBjb25maWd1cmluZyBDb2luYmFzZQoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6ZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZyBodG1sCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgl7CgkJJGNvbmZpZ19vcHRpb25zID0gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCJ7JHRoaXMtPmdldFRlbXBsYXRlRGlyKCl9L2NvaW5iYXNlbWluaW1hbF9jb25maWcuaHRtbC5waHAiLCR0aGlzKTsKCQlyZXR1cm4gJGNvbmZpZ19vcHRpb25zOwoJfQoKCgkvKioKCSAqIFZhbGlkYXRlcyBhbmQgY29uZmlndXJlcyB0aGUgb2JqZWN0IHdpdGggdGhlIHNldHRpbmdzIGluZm9ybWF0aW9uIGdlbmVyYXRlZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6cHJvY2Vzc0NvbmZpZ09wdGlvbnMoKQoJICoKCSAqIEBwYXJhbSAkcG9zdCBhcnJheSBjb250YWluaW5nIHRoZSBkYXRhIHBvc3RlZCBmcm9tIHRoZSBwYXltZW50IG1ldGhvZHMgc2V0dGluZ3Mgc2NyZWVuCgkgKiBAcmV0dXJuIEFuIE1NX1Jlc3BvbnNlIG9mIHR5cGUgTU1fUmVzcG9uc2U6OlNVQ0NFU1MgaW5kaWNhdGluZyBzdWNjZXNzZnVsIHZhbGlkYXRpb24gYW5kIGFzc2lnbWVudC4gT24gZXJyb3IsIHRoZSB0eXBlIHdpbGwgYmUgTU1fUmVzcG9uc2U6OkVSUk9SIGFuZCB0aGUgbWVzc2FnZSB3aWxsIGNvbnRhaW4gdGhlIGVycm9yIG1lc3NhZ2VzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzQ29uZmlnT3B0aW9ucygkcG9zdCkKCXsKCQkkYWN0aXZlID0gaXNzZXQoJHBvc3RbJ29mZnNpdGVfcGF5bWVudF9zZXJ2aWNlcyddKSAmJiBpbl9hcnJheShzdHJ0b2xvd2VyKCR0aGlzLT5nZXRUb2tlbigpKSwgJHBvc3RbJ29mZnNpdGVfcGF5bWVudF9zZXJ2aWNlcyddKTsKCQkkdGhpcy0+c2V0QWN0aXZlKCRhY3RpdmUpOwoJCWlmICgkYWN0aXZlKQoJCXsKCQkJJHRoaXMtPmluc3RhbGwoKTsKCQkJJGNvbmZpZyA9IGlzc2V0KCRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsnY29pbmJhc2VtaW5pbWFsJ10pPyRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsnY29pbmJhc2VtaW5pbWFsJ106YXJyYXkoKTsKCQkJCgkJCS8vdmFsaWRhdGUgY29uZmlndXJhdGlvbiAtIHJlbWluZGVyIG11c3Qgbm90IGJlIGVtcHR5LCBhbmQgYXBpIGtleXMgbXVzdCBub3QgYmUgZW1wdHkgYW5kIG11c3Qgbm90IHJldHVybiBhdXRoIGVycm9yIGZyb20gQ29pbmJhc2UKCQkJaWYgKGVtcHR5KCRjb25maWdbJ2FwaV9rZXknXSkgfHwgZW1wdHkoJGNvbmZpZ1snYXBpX3NlY3JldCddKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ29pbmJhc2UgQ29uZmlndXJhdGlvbiBFcnJvcjogQm90aCBBUEkgY3JlZGVudGlhbHMgbXVzdCBiZSBmaWxsZWQgb3V0IGluIG9yZGVyIHRvIHVzZSB0aGUgQ29pbmJhc2UgKFdhbGxldCBJZ25vcmVkKSBwYXltZW50IG1ldGhvZC4iLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJCXRyeQoJCQl7CgkJCQkkdGVzdEFQSSA9IENvaW5iYXNlOjp3aXRoQXBpS2V5KCRjb25maWdbJ2FwaV9rZXknXSwgJGNvbmZpZ1snYXBpX3NlY3JldCddKS0+Y3JlYXRlQnV0dG9uKCd0ZXN0JywnMS4wMCcsJ1VTRCcpOwkKCQkJfQoJCQljYXRjaChFeGNlcHRpb24gJGUpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNvaW5iYXNlIGRlbmllZCBhY2Nlc3MgZm9yIHRob3NlIEFQSSBjcmVkZW50aWFscy4gUGxlYXNlIG1ha2Ugc3VyZSB5b3VyIG1lcmNoYW50IGFjY291bnQgaGFzIGJlZW4gYWN0aXZhdGVkIGFuZCB0aGF0IHlvdSBnYXZlIFwiYnV0dG9uc1wiIHBlcm1pc3Npb25zIHdoZW4geW91IGNyZWF0ZWQgdGhhdCBBUEkga2V5LiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7IAoJCQl9CgkJCWlmICgoaW50KSRjb25maWdbJ3JlbWluZGVyX3RpbWVfYmVmb3JlJ109PTAgfHwgZW1wdHkoJGNvbmZpZ1sncmVtaW5kZXJfc3ViamVjdCddKSB8fCBlbXB0eSgkY29uZmlnWydyZW1pbmRlcl90ZXh0J10pKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb2luYmFzZSAoV2FsbGV0IElnbm9yZWQpIG5lZWRzIHRoZSAjIG9mIGRheXMgbm90aWNlLCBzdWJqZWN0IGFuZCB0ZXh0IHRvIGFsbCBiZSBmaWxsZWQgaW4uIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJJHRoaXMtPnNldEFQSUtleSgkY29uZmlnWydhcGlfa2V5J10pOwoJCQkkdGhpcy0+c2V0QVBJU2VjcmV0KCRjb25maWdbJ2FwaV9zZWNyZXQnXSk7CgkJCSR0aGlzLT5zZXRSZW1pbmRlclRpbWVCZWZvcmUoJGNvbmZpZ1sncmVtaW5kZXJfdGltZV9iZWZvcmUnXSk7CgkJCSR0aGlzLT5zZXRSZW1pbmRlclN1YmplY3QoJGNvbmZpZ1sncmVtaW5kZXJfc3ViamVjdCddKTsKCQkJJHRoaXMtPnNldFJlbWluZGVyVGV4dCgkY29uZmlnWydyZW1pbmRlcl90ZXh0J10pOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgoKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkjIFBBWU1FTlQgLyBDSEVDS09VVCAKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkKCXB1YmxpYyBmdW5jdGlvbiB2YWxpZGF0ZU9yZGVyKE1NX09yZGVyICRvcmRlcikKCXsKCQkkb3JkZXJJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsJCQoJCSRyZWN1cnJpbmdJdGVtcyA9IGFycmF5X2ZpbHRlcigkb3JkZXJJdGVtcyxjcmVhdGVfZnVuY3Rpb24oJyRpJywncmV0dXJuICRpLT5pc1JlY3VycmluZygpOycpKTsKCQkkdG90YWwgPSAkdGhpcy0+Z2V0T3JkZXJUb3RhbCgkb3JkZXIpOwoJCSRpdGVtID0gcmVzZXQoJG9yZGVySXRlbXMpOwoJCQoJCS8vZG9uJ3QgYWxsb3cgZW1wdHkgb3JkZXIKCQlpZiAoZW1wdHkoJG9yZGVySXRlbXMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJDYW5ub3QgcHVyY2hhc2UgZW1wdHkgb3JkZXIuIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwkJCgkJfQoJCS8vZG9uJ3QgYWxsb3cgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyBvciBtaXggb2Ygc3ViL3NpbmdsZSBwYXltZW50CgkJaWYgKGNvdW50KCRyZWN1cnJpbmdJdGVtcyk+MSB8fCAoIWVtcHR5KCRyZWN1cnJpbmdJdGVtcykgJiYgY291bnQoJG9yZGVySXRlbXMpIT1jb3VudCgkcmVjdXJyaW5nSXRlbXMpKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSWYgYSBzdWJzY3JpcHRpb24gaXMgYmVpbmcgcHVyY2hhc2VkLCB0aGF0IG11c3QgYmUgdGhlIG9ubHkgaXRlbSBpbiB0aGUgb3JkZXIiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCS8vcmVxdWlyZSBzdXBwb3J0ZWQgY3VycmVuY2llcwoJCWlmICghaW5fYXJyYXkoJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCR0aGlzLT5zdXBwb3J0ZWRDdXJyZW5jaWVzKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkb3JkZXItPmdldEN1cnJlbmN5KCkuIiBhcyBvcmRlciBjdXJyZW5jeSBpcyB1bnN1cHBvcnRlZCBmb3IgQ29pbmJhc2UgcGF5bWVudHMuIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkvL2NvaW5iYXNlIGRvZXMgbm90IGFsbG93IG9yZGVycyBsZXNzIHRoYXQgYWJvdXQgJDAuNzUgVVNEIAoJCWlmICgkdG90YWwgPiAwICYmICR0b3RhbCA8IDAuNzUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkNvaW5iYXNlIG9yZGVyIHRvdGFsIGNhbm5vdCBiZSBsZXNzIHRoYW4gJDAuNzUgVVNELiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJLy9ubyBlcnJvcnMKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlQYXltZW50Rm9ybShNTV9PcmRlciAkb3JkZXIpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vIGdvIHRocm91Z2ggY29pbmJhc2UgY2hlY2tvdXQgaWYgaXQncyBOT1QgYSBmcmVlIHRyaWFsIC8gcHJvZHVjdAoJCWlmKCAkdGhpcy0+Z2V0T3JkZXJUb3RhbCgkb3JkZXIpID4gMCApCgkJewoJCQkvL2dldCBwYXltZW50IHRlbXBsYXRlCgkJCSRwYXltZW50SW5mbyA9ICR0aGlzLT5nZXRDb2luYmFzZU9yZGVyKCRvcmRlcik7CgkJCSRwYXltZW50SW5mby0+Y29uZmlybWF0aW9uX3VybCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmdldENvbmZpcm1hdGlvblVybEZvck9yZGVyKCRvcmRlcik7CgkJCSRodG1sID0gTU1fVEVNUExBVEU6OmdlbmVyYXRlKCJ7JHRoaXMtPmdldFRlbXBsYXRlRGlyKCl9L2NvaW5iYXNlbWluaW1hbF9wYXltZW50X2Zvcm0uaHRtbC5waHAiLCRwYXltZW50SW5mbyk7CgkJCQoJCQkvL3NhdmUgZGViaXQgdG8gdHJhbnNhY3Rpb25zIGxvZywgaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBsb2dnZWQKCQkJJG9yZGVyVHJhbnNhY3Rpb25zID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1RSQU5TQUNUSU9OUy4iIFdIRVJFIG9yZGVyX2lkPSVkIiwkb3JkZXItPmdldGlkKCkpKTsKCQkJaWYgKGVtcHR5KCRvcmRlclRyYW5zYWN0aW9ucykpCgkJCXsKCQkJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1RSQU5TQUNUSU9OUyxhcnJheSgKCQkJCQkib3JkZXJfaWQiID0+ICRvcmRlci0+Z2V0SWQoKSwKCQkJCQkib3JkZXJfaXRlbV9pZCIgPT4gKGNvdW50KCRvcmRlci0+Z2V0UHJvZHVjdHMoKSk9PTE/IHJlc2V0KCRvcmRlci0+Z2V0UHJvZHVjdHMoKSktPmdldElkKCkgOiBOVUxMKSwKCQkJCQkiYnRjX2Ftb3VudCIgPT4gLShpbnR2YWwoJHBheW1lbnRJbmZvLT5hbW91bnQpKSwKCQkJCQkiYW1vdW50IiA9PiAtKCR0aGlzLT5nZXRPcmRlclRvdGFsKCRvcmRlcikpLAoJCQkJCSJjdXJyZW5jeSIgPT4gJG9yZGVyLT5nZXRDdXJyZW5jeSgpLAoJCQkJCSJ0cmFuc2FjdGlvbl9kYXRlIiA9PiBnbWRhdGUoJ1ktbS1kIEg6aTpzJykKCQkJCSkpOwoJCQl9CgkJCQkKCQkJcmV0dXJuICRodG1sOwoJCX0KCQkvLyBhc3NpZ24gYWNjZXNzIGltbWVkaWF0ZWx5IGZvciB0cmlhbHMKCQllbHNlCgkJewoJCQlNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXIoJG9yZGVyKTsKCQkJJHRoaXMtPmNyZWF0ZVNjaGVkdWxlc0Zyb21Qcm9kdWN0cygkb3JkZXItPmdldFByb2R1Y3RzKCkpOwoJCQlyZXR1cm4gIjxzY3JpcHQ+ZG9jdW1lbnQubG9jYXRpb24ucmVwbGFjZSgnIi5NTV9BY2Nlc3NDb250cm9sRW5naW5lOjpnZXRDb25maXJtYXRpb25VcmxGb3JPcmRlcigkb3JkZXIpLiInKTs8L3NjcmlwdD4iOwoJCX0KCQkKCX0KCgoJLyoqCgkgKiBGZXRjaGVzIGEgdW5pcXVlIGNoZWNrb3V0IGNvZGUgKCBvciAiYnV0dG9uIGlkIikgZnJvbSB0aGUgQ29pbmJhc2UgQVBJCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgZm9yIHRoZSBvcmRlciB3aGljaCBpcyBiZWluZyBwdXJjaGFzZWQKCSAqIEBwYXJhbSBib29sICRpc1JlYmlsbCB3aGV0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgY2hlY2tpbmcgb3V0IGZvciBvbiBvcmRlciAoZmFsc2UpIG9yIHRoZSAxK250aCBjaGVja291dCBmb3IgYSBzdWJzY3JpcHRpb24gKHRydWUpIAoJICogQHJldHVybiBNTV9TZXJ2aWNlUGF5bWVudFJlc3BvbnNlIHdpdGggbWVzc2FnZSBjb250YWluaW5nIGEgdW5pcXVlIENvaW5iYXNlIGNoZWNrb3V0IGNvZGUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgbm90CgkgKi8KCSBwcm90ZWN0ZWQgZnVuY3Rpb24gZ2V0Q29pbmJhc2VDaGVja291dENvZGUoTU1fT3JkZXIgJG9yZGVyLCAkaXNSZWJpbGw9ZmFsc2UpCgkgewoJIAlnbG9iYWwgJHdwZGI7CgkJJG9yZGVySXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJJHJlY3VycmluZ0l0ZW1zID0gYXJyYXlfZmlsdGVyKCRvcmRlckl0ZW1zLGNyZWF0ZV9mdW5jdGlvbignJGknLCdyZXR1cm4gJGktPmlzUmVjdXJyaW5nKCk7JykpOwoJCQoJCXRyeQoJCXsKCQkJJGNvaW5iYXNlID0gQ29pbmJhc2U6OndpdGhBcGlLZXkoJHRoaXMtPmdldEFQSUtleSgpLCR0aGlzLT5nZXRBUElTZWNyZXQoKSk7CgkJCSRpdGVtID0gcmVzZXQoJG9yZGVySXRlbXMpOwoJCQkkcHJvZHVjdCA9ICBuZXcgTU1fUHJvZHVjdCgkaXRlbS0+Z2V0SXRlbUlkKCkpOwoJCQkkcmVxdWVzdCA9ICRjb2luYmFzZS0+Y3JlYXRlQnV0dG9uKAoJCQkJCSgKCQkJCQkoY291bnQoJG9yZGVySXRlbXMpPjEpKT8gIk9yZGVyIG5vLiAiLiRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKSA6ICRwcm9kdWN0LT5nZXROYW1lKCksCgkJCQkJJHRoaXMtPmdldE9yZGVyVG90YWwoJG9yZGVyLCRpc1JlYmlsbCksCgkJCQkJJG9yZGVyLT5nZXRDdXJyZW5jeSgpLAoJCQkJCSRvcmRlci0+Z2V0SWQoKS4ifCIud3BfaGFzaCgiY29pbmJhc2VfaXBuX2F1dGhfb3JkZXJfIi4kb3JkZXItPmdldElkKCkpLAoJCQkJCWFycmF5KAoJCQkJCQknc3R5bGUnID0+ICdub25lJywKCQkJCQkJJ3R5cGUnID0+ICdidXlfbm93JywKCQkJCQkJJ3N1Y2Nlc3NfdXJsJyA9PiBob21lX3VybCgpLiI/bW1fY29pbmJhc2VtaW5pbWFsX3JlZGlyZWN0PSIudXJsZW5jb2RlKE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmdldENvbmZpcm1hdGlvblVybEZvck9yZGVyKCRvcmRlcikpLAoJCQkJCQknY2FuY2VsX3VybCcgPT4gaG9tZV91cmwoKS4iP21tX2NvaW5iYXNlbWluaW1hbF9yZWRpcmVjdD0iLnVybGVuY29kZShtbV9wdXJjaGFzZV9saW5rKGFycmF5KCJwcm9kdWN0SWQiPT4kcHJvZHVjdC0+Z2V0SWQoKSkpKSwKCQkJCQkJJ2NhbGxiYWNrX3VybCcgPT4gTU1fUExVR0lOX1VSTC4iL3gucGhwP3NlcnZpY2U9Y29pbmJhc2VtaW5pbWFsJmhhc2g9Ii53cF9oYXNoKCJjb2luYmFzZW1pbmltYWxfaXBuX2F1dGgiKSwKCQkJCQkJJ2F1dG9fcmVkaXJlY3QnID0+IHRydWUKCQkJCQkpCgkJCQkpOwoJCQlpZiAoIWlzc2V0KCRyZXF1ZXN0LT5idXR0b24tPmNvZGUpIHx8IGVtcHR5KCRyZXF1ZXN0LT5idXR0b24tPmNvZGUpKQoJCQl7CgkJCQl0aHJvdyBuZXcgRXhjZXB0aW9uKCJObyBjaGVja291dCBidXR0b24gaWQgcmV0dXJuZWQiKTsKCQkJfQoJCQkkYnV0dG9uSWQgPSAkcmVxdWVzdC0+YnV0dG9uLT5jb2RlOwoJCX0KCQljYXRjaChFeGNlcHRpb24gJGUpCgkJewoJCQllcnJvcl9sb2coICJcbiIuZGF0ZSgnbS5kLlkgaDppOnMnKS4iXG4iLnByaW50X3IoJGUsdHJ1ZSksIDMsICdjb2luYmFzZS5sb2cnICk7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiQ29pbmJhc2UgQVBJIGVycm9yOiIuJGUtPmdldE1lc3NhZ2UoKSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0NPSU5CQVNFTUlOSU1BTF9CVVRUT05fTElOS1MsYXJyYXkoIm9yZGVyX2lkIj0+JG9yZGVyLT5nZXRJZCgpLCJidXR0b25faWQiPT4kYnV0dG9uSWQpKTsKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGJ1dHRvbklkKTsKCSB9CgoJLyoqCgkgKiBGZXRjaGVzIGEgdW5pcXVlIGJpdGNvaW4gInJlY2VpdmUgYWRkcmVzcyIgZnJvbSB0aGUgQ29pbmJhc2UgQVBJCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgZm9yIHRoZSBvcmRlciB3aGljaCBpcyBiZWluZyBwdXJjaGFzZWQKCSAqIEBwYXJhbSBib29sICRpc1JlYmlsbCB3aGV0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IHRpbWUgY2hlY2tpbmcgb3V0IGZvciBvbiBvcmRlciAoZmFsc2UpIG9yIHRoZSAxK250aCBjaGVja291dCBmb3IgYSBzdWJzY3JpcHRpb24gKHRydWUpIAoJICogQHJldHVybiBNTV9TZXJ2aWNlUGF5bWVudFJlc3BvbnNlIHdpdGggbWVzc2FnZSBjb250YWluaW5nIGEgdW5pcXVlIENvaW5iYXNlIGNoZWNrb3V0IGNvZGUgaWYgc3VjY2Vzc2Z1bCwgZmFsc2UgaWYgbm90CgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBnZXRDb2luYmFzZU9yZGVyKE1NX09yZGVyICRvcmRlciwgJGlzUmViaWxsPWZhbHNlKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkYnV0dG9uUmVxdWVzdCA9ICR0aGlzLT5nZXRDb2luYmFzZUNoZWNrb3V0Q29kZSgkb3JkZXIsJGlzUmViaWxsKTsKCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNTdWNjZXNzKCRidXR0b25SZXF1ZXN0KSkKCQl7CgkJCXRyeQoJCQl7CgkJCQkkY29pbmJhc2UgPSBDb2luYmFzZTo6d2l0aEFwaUtleSgkdGhpcy0+Z2V0QVBJS2V5KCksJHRoaXMtPmdldEFQSVNlY3JldCgpKTsKCQkJCSRjb2luYmFzZU9yZGVyID0gJGNvaW5iYXNlLT5jcmVhdGVPcmRlckZyb21CdXR0b25Db2RlKCRidXR0b25SZXF1ZXN0LT5tZXNzYWdlKTsKCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX0JVVFRPTl9MSU5LUywgYXJyYXkoImNvaW5iYXNlX29yZGVyIj0+anNvbl9lbmNvZGUoJGNvaW5iYXNlT3JkZXIpKSwgYXJyYXkoImJ1dHRvbl9pZCI9PiRidXR0b25SZXF1ZXN0LT5tZXNzYWdlKSk7CgkJCQkKCQkJCSRiaXRjb2luQWRkcmVzcyA9ICRjb2luYmFzZU9yZGVyLT5vcmRlci0+cmVjZWl2ZV9hZGRyZXNzOwoJCQkJJGJpdGNvaW5BbW91bnQgPSAkY29pbmJhc2VPcmRlci0+b3JkZXItPnRvdGFsX2J0Yy0+Y2VudHMgLyAxMDAwMDAwMDA7CgkJCQkkYml0Y29pbkxpbmsgPSAiYml0Y29pbjokYml0Y29pbkFkZHJlc3M/YW1vdW50PSRiaXRjb2luQW1vdW50IjsKCQkJCSRiaXRjb2luUVIgPSAiaHR0cHM6Ly9jaGFydC5nb29nbGVhcGlzLmNvbS9jaGFydD9jaHQ9cXImY2hsPSIudXJsZW5jb2RlKCRiaXRjb2luTGluaykuIiZjaG9lPVVURi04JmNocz0xNzB4MTcwIjsKCQkJCXJldHVybiAob2JqZWN0KSBhcnJheSgKCQkJCQkiYWRkcmVzcyIgPT4gJGJpdGNvaW5BZGRyZXNzLAoJCQkJCSJhbW91bnQiID0+ICRiaXRjb2luQW1vdW50LAoJCQkJCSJsaW5rIiA9PiAkYml0Y29pbkxpbmssCgkJCQkJInFyIiA9PiAkYml0Y29pblFSLAoJCQkJCSJidXR0b25faWQiID0+ICRidXR0b25SZXF1ZXN0LT5tZXNzYWdlCgkJCQkpOwoJCQl9CgkJCWNhdGNoKEV4Y2VwdGlvbiAkZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJDb2luYmFzZSBBUEkgZXJyb3I6Ii4kZS0+Z2V0TWVzc2FnZSgpLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJCgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAkYnV0dG9uUmVxdWVzdDsKCQl9Cgl9CgkJCgkJCgkvKioKCSAqIEdldHMgdGhlIHRvdGFsIGRvbGxhciBhbW91bnQgZm9yIGFuIG9yZGVyIGJhc2VkIG9uIHJlY3VycmluZy9ub24tcmVjdXJyaW5nLCBldGMuCgkgKiBDaGFuZ2VzIHRvIHRvdGFsIGNhbGN1bGF0aW9uIGNhbiB0aHVzIGJlIG1hZGUgaW4gcGxhY2Ugb25seQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIGZvciB0aGUgb3JkZXIgd2hpY2ggaXMgYmVpbmcgcHVyY2hhc2VkCgkgKiBAcGFyYW0gYm9vbCAkaXNSZWJpbGwgd2hldGhlciB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIGNoZWNraW5nIG91dCBmb3Igb24gb3JkZXIgKGZhbHNlKSBvciB0aGUgMStudGggY2hlY2tvdXQgZm9yIGEgc3Vic2NyaXB0aW9uICh0cnVlKSAKCSAqIEByZXR1cm4gZmxvYXQgdG90YWwgcHJpY2UKCSAqLwoJIHByb3RlY3RlZCBmdW5jdGlvbiBnZXRPcmRlclRvdGFsKE1NX09yZGVyICRvcmRlciwgJGlzUmViaWxsPWZhbHNlKQoJIHsKCSAJJG9yZGVySXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJJGlzU3Vic2NyaXB0aW9uID0gY291bnQoJG9yZGVySXRlbXMpPT0xICYmIHJlc2V0KCRvcmRlckl0ZW1zKS0+aXNSZWN1cnJpbmcoKTsKCQkvLyB0b3RhbCBpcyB6ZXJvIGlmIG5vIHByb2R1Y3RzIGFyZSBpbiBvcmRlcgoJCWlmIChlbXB0eSgkb3JkZXJJdGVtcykpCgkJewoJCQlyZXR1cm4gMDsKCQl9CgkJLy8gb25seSBjaGFyZ2UgdGhlIHJlY3VycmluZyBhbW91bnQsIG5vdCBvbmUgdGltZSB0YXhlcy9zaGlwcGluZy9ldGMKCQllbHNlaWYgKCRpc1N1YnNjcmlwdGlvbiAmJiAkaXNSZWJpbGwpCgkJewoJCQlyZXR1cm4gcmVzZXQoJG9yZGVySXRlbXMpLT5nZXRSZWN1cnJpbmdBbW91bnQoKTsKCQl9CgkJLy8gYWxsIG90aGVycyAtIGNoYXJnZSBzdGFuZGFyZAoJCWVsc2UKCQl7CgkJCXJldHVybiAkb3JkZXItPmdldFRvdGFsKCk7CgkJfQoJIH0KCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJIyBTQ0hFRFVMSU5HCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJCgkvKioKCSAqIFNjaGVkdWxlcyBhIGZ1dHVyZSBwYXltZW50IChhbmQgYSByZW1pbmRlciBmb3IgaXQpIHVzaW5nIHRoZSBNZW1iZXJNb3VzZSBzY2hlZHVsaW5nIGZyYW1ld29yawoJICoKCSAqIEBwYXJhbSBNTV9PcmRlckl0ZW0gVGhlIGl0ZW0gKHJlcHJlc2VudGluZyBhIHByb2R1Y3QpIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgY2hhcmdlCgkgKiBAcGFyYW0gc3RyaW5nICRzY2hlZHVsZURhdGUgVGhlIGRhdGUgdG8gc2NoZWR1bGUgdGhlIGNoYXJnZSB0byBvY2N1ciBvbi4gTXVzdCBiZSBhIEdNVCBkYXRlIGluIGEgZm9ybWF0IHBhcnNlYWJsZSBieSB0aGUgcGhwIHN0cnRvdGltZSBmdW5jdGlvbi4gSW5jbHVkaW5nIGEgdGltZSBpcyBvayB0b28sIGFsdGhvdWdoIHRpbWVyIHJlc29sdXRpb24gaXMgY29udHJvbGxlZCBieSB0aGUgc2VydmVyCgkgKiBAcGFyYW0gaW50ICRwYXltZW50TnVtYmVyIERlc2lnbmF0ZXMgd2hpY2ggcGF5bWVudCB0aGlzIGlzLiBUaGlzIGluZm9ybWF0aW9uIGlzIHN0b3JlZCBpbiB0aGUgc2NoZWR1bGVkIGV2ZW50CgkgKgoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZXJyb3IKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIHNjaGVkdWxlU3Vic2NyaXB0aW9uUGF5bWVudChNTV9PcmRlckl0ZW0gJGFQcm9kdWN0SXRlbSwgJHNjaGVkdWxlRGF0ZSwgJHBheW1lbnROdW1iZXI9MikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHVzZXJJZCA9IE1NX09yZGVyOjpnZXRVc2VySWRCeU9yZGVySWQoJGFQcm9kdWN0SXRlbS0+Z2V0T3JkZXJJZCgpKTsKCgkJLy9zY2hlZHVsZSByZW1pbmRlcgoJCWZvcmVhY2ggKCR0aGlzLT5nZXRSZW1pbmRlclRpbWVCZWZvcmUoKSBhcyAkZW1haWxOdW09PiRkYXlzQmVmb3JlKQoJCXsKCQkJaWYoJGRheXNCZWZvcmU9PTApIGNvbnRpbnVlOwoJCQkkcmVtaW5kZXJEYXRlID0gZGF0ZSgiWS1tLWQgSDppIiwgKGlzX251bWVyaWMoJHNjaGVkdWxlRGF0ZSk/JHNjaGVkdWxlRGF0ZTpzdHJ0b3RpbWUoJHNjaGVkdWxlRGF0ZSkpLSgkZGF5c0JlZm9yZSoyNCo2MCo2MCkpOwoJCQkkc2NoZWR1bGVkUmVtaW5kZXIgPSBuZXcgTU1fU2NoZWR1bGVkUGF5bWVudEV2ZW50KCk7CgkJCSRzY2hlZHVsZWRSZW1pbmRlci0+c2V0U2NoZWR1bGVkRGF0ZSgkcmVtaW5kZXJEYXRlKTsKCQkJJHNjaGVkdWxlZFJlbWluZGVyLT5zZXRQYXltZW50TnVtYmVyKCRwYXltZW50TnVtYmVyKTsKCQkJJHNjaGVkdWxlZFJlbWluZGVyLT5zZXRPcmRlckl0ZW1JZCgkYVByb2R1Y3RJdGVtLT5nZXRJZCgpKTsKCQkJJHNjaGVkdWxlZFJlbWluZGVyLT5zZXRVc2VySWQoJHVzZXJJZCk7CgkJCSRzY2hlZHVsZWRSZW1pbmRlci0+c2V0UGF5bWVudFNlcnZpY2VJZCgkdGhpcy0+aWQpOwoJCQkkcmVtaW5kZXJSZXN1bHQgPSAkc2NoZWR1bGVkUmVtaW5kZXItPmNvbW1pdERhdGEodHJ1ZSk7CgkJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1NDSEVEVUxFRF9FVkVOVFMsYXJyYXkoCgkJCQkiaWQiID0+ICRzY2hlZHVsZWRSZW1pbmRlci0+Z2V0SWQoKSwKCQkJCSJvcmRlcl9pdGVtX2lkIiA9PiAkYVByb2R1Y3RJdGVtLT5nZXRJZCgpLAoJCQkJInR5cGUiID0+ICJyZW1pbmRlciIsCgkJCQkic3RhdHVzIiA9PiAic2NoZWR1bGVkIiwKCQkJCSJkYXRhIiA9PiBzZXJpYWxpemUoYXJyYXkoImVtYWlsTnVtIj0+JGVtYWlsTnVtKSkKCQkJKSk7CgkJfQoKCQkvL3NjaGVkdWxlIHBheW1lbnQgY2hlY2sKCQkkc2NoZWR1bGVkUGF5bWVudCA9IG5ldyBNTV9TY2hlZHVsZWRQYXltZW50RXZlbnQoKTsKCQkkc2NoZWR1bGVkUGF5bWVudC0+c2V0U2NoZWR1bGVkRGF0ZSgkc2NoZWR1bGVEYXRlKTsKCQkkc2NoZWR1bGVkUGF5bWVudC0+c2V0UGF5bWVudE51bWJlcigkcGF5bWVudE51bWJlcik7CgkJJHNjaGVkdWxlZFBheW1lbnQtPnNldE9yZGVySXRlbUlkKCRhUHJvZHVjdEl0ZW0tPmdldElkKCkpOwoJCSRzY2hlZHVsZWRQYXltZW50LT5zZXRVc2VySWQoJHVzZXJJZCk7CgkJJHNjaGVkdWxlZFBheW1lbnQtPnNldFBheW1lbnRTZXJ2aWNlSWQoJHRoaXMtPmlkKTsKCQkkcGF5bWVudFJlc3VsdCA9ICRzY2hlZHVsZWRQYXltZW50LT5jb21taXREYXRhKHRydWUpOwoJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1NDSEVEVUxFRF9FVkVOVFMsYXJyYXkoCgkJCSJpZCIgPT4gJHNjaGVkdWxlZFBheW1lbnQtPmdldElkKCksCgkJCSJvcmRlcl9pdGVtX2lkIiA9PiAkYVByb2R1Y3RJdGVtLT5nZXRJZCgpLAoJCQkidHlwZSIgPT4gInBheW1lbnQiLAoJCQkic3RhdHVzIiA9PiAic2NoZWR1bGVkIgoJCSkpOwoJCXJldHVybiAkcGF5bWVudFJlc3VsdDsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIHByb2Nlc3NTY2hlZHVsZWRQYXltZW50RXZlbnQoTU1fU2NoZWR1bGVkUGF5bWVudEV2ZW50ICRwYXltZW50RXZlbnQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRwYXltZW50RXZlbnQtPmdldE9yZGVySXRlbUlkKCkpOwoJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCSRjdXJyZW50UmViaWxsTnVtYmVyID0gaW50dmFsKCRwYXltZW50RXZlbnQtPmdldFBheW1lbnROdW1iZXIoKSk7CgkJJGV2ZW50UmVjb3JkID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DT0lOQkFTRU1JTklNQUxfU0NIRURVTEVEX0VWRU5UUy4iIFdIRVJFIGlkPSVkIiwkcGF5bWVudEV2ZW50LT5nZXRJZCgpKSk7CgkJJGV2ZW50VHlwZSA9IGlzc2V0KCRldmVudFJlY29yZC0+dHlwZSk/ICRldmVudFJlY29yZC0+dHlwZSA6IG51bGw7CgkJJGV2ZW50RGF0YSA9IGlzc2V0KCRldmVudFJlY29yZC0+ZGF0YSk/IG1heWJlX3Vuc2VyaWFsaXplKCRldmVudFJlY29yZC0+ZGF0YSkgOiBhcnJheSgpOwoKCQlpZiAoIWluX2FycmF5KCRldmVudFR5cGUsYXJyYXkoJ3JlbWluZGVyJywncGF5bWVudCcpKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGRldGVjdCB0eXBlIG9mIENvaW5iYXNlIHNjaGVkdWxlZCBwYXltZW50IGV2ZW50LiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCWlmICghJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIFN1YnNjcmlwdGlvbiIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiU3Vic2NyaXB0aW9uIGZvciBvcmRlciBpdGVtIGlkICIuJG9yZGVySXRlbS0+Z2V0SWQoKS4iIHdhcyBub3QgY2hhcmdlZCBiZWNhdXNlIHRoZSBpdGVtIGlzIGNhbmNlbGxlZCIpOwoJCX0JCQoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NPTVBMRVRFKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJTdWJzY3JpcHRpb24gZm9yIG9yZGVyIGl0ZW0gaWQgIi4kb3JkZXJJdGVtLT5nZXRJZCgpLiIgd2FzIG5vdCBjaGFyZ2VkIGJlY2F1c2UgYmlsbGluZyBpcyBjb21wbGV0ZSBmb3IgdGhpcyBpdGVtIik7CgkJfQoJCQoJCS8vIHRoaXMgaXMgYSBlbWFpbCByZW1pbmRlciBldmVudAoJCWlmICgkZXZlbnRUeXBlID09ICdyZW1pbmRlcicpCgkJewoJCQkvLyBtYWtlIHN1cmUgYWNjZXNzIGhhc24ndCBiZWVuIGdpdmVuIGJ5IGFub3RoZXIgcmVjZW50IG9yZGVyCgkJCSRsYXRlc3RfZnV0dXJlX3BheW1lbnRfZGF0ZSA9ICR3cGRiLT5nZXRfY29sKAoJCQkJIlNFTEVDVCBlLnNjaGVkdWxlZF9kYXRlIEZST00gbW1fc2NoZWR1bGVkX3BheW1lbnRzIGFzIHAgIi4KCQkJCQkiam9pbiBtbV9zY2hlZHVsZWRfZXZlbnRzIGFzIGUgb24gcC5pZD1lLmlkICIuCgkJCQkJImpvaW4gbW1fb3JkZXJfaXRlbXMgYXMgb2kgb24gcC5vcmRlcl9pdGVtX2lkPW9pLmlkICIuCgkJCQkJImpvaW4gbW1fYnVuZGxlX3Byb2R1Y3RzIGFzIGJwIG9uIG9pLml0ZW1faWQ9YnAucHJvZHVjdF9pZCAiLgoJCQkJCSJ3aGVyZSBlLnNjaGVkdWxlZF9kYXRlID4gTk9XKCkgKyBJTlRFUlZBTCAxIERBWSAiLgoJCQkJCSJhbmQgcC51c2VyX2lkPSIuZXNjX3NxbCgkcGF5bWVudEV2ZW50LT5nZXRVc2VySWQoKSkuIiAiLgoJCQkJCSJPUkRFUiBCWSBlLnNjaGVkdWxlZF9kYXRlIERFU0MgTElNSVQgMCwxIgoJCQkpOwoJCQlpZiggKHN0cnRvdGltZSgkbGF0ZXN0X2Z1dHVyZV9wYXltZW50X2RhdGUpLXRpbWUoKSkgLyBEQVlfSU5fU0VDT05EUyA+IDEwICkKCQkJewoJCQkJJHdwZGItPnVwZGF0ZSggTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1NDSEVEVUxFRF9FVkVOVFMsIGFycmF5KCJzdGF0dXMiPT4icHJlZW1wdGVkIiksIGFycmF5KCJpZCI9PiRwYXltZW50RXZlbnQtPmdldElkKCkpICk7CgkJCQkkZXZlbnRSZWNvcmQtPnN0YXR1cyA9ICJwcmVlbXB0ZWQiOwoJCQl9CgkJCS8vIGRvbid0IHNlbmQgaWYgcmVtaW5kZXIgaGFzIGJlZW4gcHJvY2Vzc2VkIG9yIHByZWVtcHRlZCBieSBwYXltZW50CgkJCWlmICghaXNzZXQoJGV2ZW50UmVjb3JkLT5zdGF0dXMpIHx8ICRldmVudFJlY29yZC0+c3RhdHVzIT0ic2NoZWR1bGVkIikKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJSZW1pbmRlciBlbWFpbCBub3Qgc2VudCBzaW5jZSBldmVudCBzdGF0dXMgd2FzOiAkZXZlbnRSZWNvcmQtPnN0YXR1cyIpOwoJCQl9CgkJCSRlbWFpbE51bSA9IGlzc2V0KCRldmVudERhdGFbImVtYWlsTnVtIl0pPyAkZXZlbnREYXRhWyJlbWFpbE51bSJdIDogMDsKCQkJJHNlbmRFbWFpbFJlc3VsdCA9ICR0aGlzLT5zZW5kRW1haWxSZW1pbmRlcigkb3JkZXJJdGVtLCRlbWFpbE51bSk7CgkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRzZW5kRW1haWxSZXN1bHQpKQoJCQl7CgkJCQkkcGF5bWVudEV2ZW50LT5zZXRTdGF0dXMoTU1fU2NoZWR1bGVkRXZlbnQ6OiRFVkVOVF9QUk9DRVNTRUQpOwoJCQkJJHBheW1lbnRFdmVudC0+c2V0UHJvY2Vzc2VkRGF0ZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSk7CgkJCQkkcGF5bWVudEV2ZW50LT5jb21taXREYXRhKGZhbHNlKTsKCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1NDSEVEVUxFRF9FVkVOVFMsYXJyYXkoInN0YXR1cyI9PiJwcm9jZXNzZWQiKSxhcnJheSgiaWQiPT4kcGF5bWVudEV2ZW50LT5nZXRJZCgpKSk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiU2VuZGluZyByZW1pbmRlciBlbWFpbCBmYWlsZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJLy8gdGhpcyBpcyBhIHBheW1lbnQgZXZlbnQgKGNoZWNraW5nIGlmIHRoZXkgcGFpZCBhZnRlciB0aGUgcmVtaW5kZXIgYXMgcmVxdWVzdGVkKQoJCWVsc2VpZiAoJGV2ZW50VHlwZSA9PSAncGF5bWVudCcpCgkJewoJCQkvLyBpZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHRoaXMgZXZlbnQgaGFzIGNvbWUgaW4sIGl0IG1lYW5zIHRoZWlyIHBheW1lbnQgaXMgbm93IGR1ZSwgc28gZGViaXQgdGhlIG9yZGVyCgkJCS8vIChzY2hlZHVsZWQgc3RhdHVzIGluZGljYXRlcyB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIE1NIGlzIHByb2Nlc3NpbmcgdGhpcyBldmVudCBiL2Mgb3RoZXJ3aXNlIGl0IHdvdWxkIGhhdmUgdG8gYmUgZWl0aGVyIGZhaWxlZCBvciBwcm9jZXNzZWQpCgkJCWlmKCAkZXZlbnRSZWNvcmQtPnN0YXR1cyA9PSAnc2NoZWR1bGVkJyApCgkJCXsKCQkJCSRwYXltZW50TGluayA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX0JVVFRPTl9MSU5LUy4iIFdIRVJFIG9yZGVyX2lkPSVkIE9SREVSIEJZIGlkIERFU0MgTElNSVQgMSIsJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKSk7CgkJCQkkYnV0dG9uSWQgPSAhaXNfbnVsbCgkcGF5bWVudExpbmspPyAkcGF5bWVudExpbmstPmJ1dHRvbl9pZCA6IG51bGw7CgkJCQkkYnRjQW1vdW50ID0gIWlzX251bGwoJHBheW1lbnRMaW5rKT8ganNvbl9kZWNvZGUoJHBheW1lbnRMaW5rLT5jb2luYmFzZV9vcmRlciktPm9yZGVyLT50b3RhbF9idGMtPmNlbnRzIC8gMTAwMDAwMDAwIDogbnVsbDsKCQkJCS8vIGxvZyBkZWJpdAoJCQkJJHdwZGItPmluc2VydChNTV9UQUJMRV9DT0lOQkFTRU1JTklNQUxfVFJBTlNBQ1RJT05TLGFycmF5KAoJCQkJCSJvcmRlcl9pZCIgPT4gJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpLAoJCQkJCSJvcmRlcl9pdGVtX2lkIiA9PiAkb3JkZXJJdGVtLT5nZXRJZCgpLAoJCQkJCSJidXR0b25faWQiID0+ICRidXR0b25JZCwKCQkJCQkiYnRjX2Ftb3VudCIgPT4gLSgkYnRjQW1vdW50KSwKCQkJCQkiYW1vdW50IiA9PiAtKCRvcmRlckl0ZW0tPmdldFJlY3VycmluZ0Ftb3VudCgpKSwKCQkJCQkiY3VycmVuY3kiID0+ICRvcmRlci0+Z2V0Q3VycmVuY3koKSwKCQkJCQkidHJhbnNhY3Rpb25fZGF0ZSIgPT4gZ21kYXRlKCdZLW0tZCBIOmk6cycpCgkJCQkpKTsKCQkJfQoJCQkKCQkJJG51bWJlck9mUGF5bWVudHMgPSBjb3VudCgkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DT0lOQkFTRU1JTklNQUxfVFJBTlNBQ1RJT05TLiIgV0hFUkUgb3JkZXJfaXRlbV9pZD0lZCBBTkQgbWlzcGFpZF9hbW91bnQ9MCBBTkQgYW1vdW50ID4gMCIsJG9yZGVySXRlbS0+Z2V0SWQoKSkpKTsKCQkJJG51bWJlck9mRGViaXRzID0gY291bnQoJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1RSQU5TQUNUSU9OUy4iIFdIRVJFIG9yZGVyX2l0ZW1faWQ9JWQgQU5EIGFtb3VudCA8IDAiLCRvcmRlckl0ZW0tPmdldElkKCkpKSk7CgkJCS8vIGlmIHRoZXkndmUgcGFpZCAodGhlaXIgcGF5bWVudHMgYXJlIGNhdWdodCB1cCB3aXRoIHRoZWlyIG51bWJlciBvZiByZWJpbGxpbmdzKQoJCQlpZiAoJG51bWJlck9mUGF5bWVudHMgPj0gJG51bWJlck9mRGViaXRzKQoJCQl7CgkJCQkvLyBtYXJrIGV2ZW50IGFzIHByb2Nlc3NlZCBhbmQgbm8gYWN0aW9uIHJlcXVpcmVkCgkJCQkkcGF5bWVudEV2ZW50LT5zZXRTdGF0dXMoTU1fU2NoZWR1bGVkRXZlbnQ6OiRFVkVOVF9QUk9DRVNTRUQpOwoJCQkJJHBheW1lbnRFdmVudC0+c2V0UHJvY2Vzc2VkRGF0ZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSk7CgkJCQkkcGF5bWVudEV2ZW50LT5jb21taXREYXRhKGZhbHNlKTsKCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1NDSEVEVUxFRF9FVkVOVFMsYXJyYXkoInN0YXR1cyI9PiJwcm9jZXNzZWQiKSxhcnJheSgiaWQiPT4kcGF5bWVudEV2ZW50LT5nZXRJZCgpKSk7CgkJCQkvLyBzY2hlZHVsZSBuZXh0IHBheW1lbnQgZXZlbnQgKyByZW1pbmRlcnMKCQkJCSR0aGlzLT5zY2hlZHVsZU5leHRQYXltZW50Rm9yRXhpc3RpbmdTdWJzY3JpcHRpb24oJG9yZGVySXRlbSwgJG9yZGVyLT5nZXRDdXN0b21lcigpLCAkY3VycmVudFJlYmlsbE51bWJlcik7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCQkJfQoJCQkvLyBpZiB0aGV5IGhhdmVuJ3QgcGFpZAoJCQllbHNlCgkJCXsKCQkJCS8vIHVwZGF0ZSBzdGF0dXMgc28gd2Uga25vdyBhIGRlYml0IGhhcyBiZWVuIGNyZWF0ZWQgZm9yIHRoaXMgZXZlbnQgLSBmYWlsZWQgaW5kaWNhdGVzIGEgcGF5bWVudCB3YXMgZHVlIGJ1dCBub3QgbWFkZQoJCQkJJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9DT0lOQkFTRU1JTklNQUxfU0NIRURVTEVEX0VWRU5UUyxhcnJheSgic3RhdHVzIj0+ImZhaWxlZCIpLGFycmF5KCJpZCI9PiRwYXltZW50RXZlbnQtPmdldElkKCkpKTsKCQkJCS8vIGhhbmRsZSBvdmVyZHVlIC0gbm90IHN1cmUgd2hhdCB0aGlzIGRvZXMgLSBkbyB3ZSBuZWVkIHRvIHNlbmQgb3V0IGFub3RoZXIgZW1haWwgcmVtaW5kZXIgaGVyZT8KCQkJCXBhcmVudDo6aGFuZGxlT3ZlcmR1ZVN1YnNjcmlwdGlvbkl0ZW0oJG9yZGVySXRlbSk7CgkJCQkvLyBpZiB0aGlzIGlzIHRoZSAybmQgdGltZSB3ZSdyZSBjaGVja2luZyAobm8gcGF5bWVudCBoYWQgYmVlbiBzZW50IGZpcnN0IHRpbWUpLCBjYW5jZWwvcmV2b2tlCgkJCQlpZiAoJHBheW1lbnRFdmVudC0+Z2V0QmlsbGluZ1N0YXR1cygpID49IE1NX1NjaGVkdWxlZFBheW1lbnRFdmVudDo6JEZJUlNUX1JFQklMTF9GQUlMRUQpCgkJCQl7CgkJCQkJLy8gbWFrZSBzdXJlIGFjY2VzcyBoYXNuJ3QgYmVlbiBnaXZlbiBieSBhbm90aGVyIG9yZGVyCgkJCQkJJGN1cnJlbnRfYnVuZGxlc19pZHNfd2l0aF9mdXR1cmVfYWNjZXNzID0gJHdwZGItPmdldF9jb2woCgkJCQkJCSJTRUxFQ1QgYnAuYnVuZGxlX2lkIEZST00gbW1fc2NoZWR1bGVkX3BheW1lbnRzIGFzIHAgIi4KCQkJCQkJCSJqb2luIG1tX3NjaGVkdWxlZF9ldmVudHMgYXMgZSBvbiBwLmlkPWUuaWQgIi4KCQkJCQkJCSJqb2luIG1tX29yZGVyX2l0ZW1zIGFzIG9pIG9uIHAub3JkZXJfaXRlbV9pZD1vaS5pZCAiLgoJCQkJCQkJImpvaW4gbW1fYnVuZGxlX3Byb2R1Y3RzIGFzIGJwIG9uIG9pLml0ZW1faWQ9YnAucHJvZHVjdF9pZCAiLgoJCQkJCQkJIndoZXJlIGUuc2NoZWR1bGVkX2RhdGUgPiBOT1coKSArIElOVEVSVkFMIDEgREFZICIuCgkJCQkJCQkiYW5kIHAudXNlcl9pZD0iLmVzY19zcWwoJHBheW1lbnRFdmVudC0+Z2V0VXNlcklkKCkpLiIgIi4KCQkJCQkJCSJHUk9VUCBCWSBicC5idW5kbGVfaWQiCgkJCQkJKTsKCQkJCQkkYnVuZGxlX2lkX2Zvcl90aGlzX29yZGVyID0gJHdwZGItPmdldF92YXIoIlNFTEVDVCBidW5kbGVfaWQgZnJvbSBtbV9idW5kbGVfcHJvZHVjdHMgYXMgYnAgd2hlcmUgYnAucHJvZHVjdF9pZD0iLmVzY19zcWwoJG9yZGVySXRlbS0+Z2V0SXRlbUlkKCkpKTsKCQkJCQlpZiggaXNfbnVsbCgkYnVuZGxlX2lkX2Zvcl90aGlzX29yZGVyKSB8fCAhaW5fYXJyYXkoJGJ1bmRsZV9pZF9mb3JfdGhpc19vcmRlciwkY3VycmVudF9idW5kbGVzX2lkc193aXRoX2Z1dHVyZV9hY2Nlc3MpICl7CgkJCQkJCSR0aGlzLT5jYW5jZWxTdWJzY3JpcHRpb24oJG9yZGVySXRlbSk7CgkJCQkJCU1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkJpdGNvaW4gcGF5bWVudCBoYXMgbm90IGJlZW4gcmVjZWl2ZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgoJfQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2VuZEVtYWlsUmVtaW5kZXIoTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sJGVtYWlsTnVtKQoJewoJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCSR1c2VyID0gJG9yZGVyLT5nZXRDdXN0b21lcigpOwoJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpnZXREZWZhdWx0KCk7CgkJJGNvbnRleHQgPSBuZXcgTU1fQ29udGV4dCgkdXNlciwgJGVtcGxveWVlLCAkb3JkZXIpOwoKCQkvL1RPRE8gZ2V0IHNhdmVkIHBheW1lbnQgaW5mbyBpZiBpdCBleGlzdHMKCQkkcGF5bWVudEluZm8gPSAkdGhpcy0+Z2V0Q29pbmJhc2VPcmRlcigkb3JkZXIsdHJ1ZSk7CgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJHBheW1lbnRJbmZvKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgQ29pbmJhc2Ugb3JkZXIuIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJHN1YmplY3QgPSAkdGhpcy0+Z2V0UmVtaW5kZXJTdWJqZWN0KCRlbWFpbE51bSk7CgkJLy9UT0RPIGFkZCBwYXJhbSB0byBmdW5jdGlvbiBhbmQgcGFzcyBpbnRvIGdldHJlbWluZGVydGV4dCBmb3Igd2hpY2ggZW1haWwgdG8gc2VuZAoJCSRib2R5ID0gc3RyX3JlcGxhY2UoCgkJCSJbTU1fQml0Y29pbl9QYXltZW50X0RldGFpbHNdIiwKCQkJIjxwIHN0eWxlPSdiYWNrZ3JvdW5kOiNmM2YzZjM7IGJvcmRlcjpzb2xpZCAxcHggI2RkZDsgYm9yZGVyLXJhZGl1czo1cHg7IG92ZXJmbG93OmhpZGRlbjsnPiIuCgkJCQkiPGEgaHJlZj0nJHBheW1lbnRJbmZvLT5saW5rJyBzdHlsZT0ndGV4dC1kZWNvcmF0aW9uOm5vbmU7Y29sb3I6IzMzMyc+Ii4KCQkJCQkiPHNwYW4gc3R5bGU9J2Rpc3BsYXk6aW5saW5lLWJsb2NrO3BhZGRpbmc6NHB4IDhweDsnPkV4YWN0bHkgJHBheW1lbnRJbmZvLT5hbW91bnQgQlRDIChwbHVzIG1pbmVyIGZlZSkgdG8gJnJBcnI7PC9zcGFuPiIuCgkJCQkJIjxzcGFuIHN0eWxlPSdkaXNwbGF5OmlubGluZS1ibG9jaztwYWRkaW5nOjRweCA4cHg7Zm9udC1mYW1pbHk6Q291cmllcixtb25vc3BhY2U7YmFja2dyb3VuZDojZGRkO2Zsb2F0OnJpZ2h0Oyc+JHBheW1lbnRJbmZvLT5hZGRyZXNzPC9zcGFuPiIuCgkJCQkiPC9hPiIuCgkJCSI8L3A+IiwKCQkJJHRoaXMtPmdldFJlbWluZGVyVGV4dCgkZW1haWxOdW0pCgkJKTsKCQkKCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkkZW1haWwtPnNldENvbnRleHQoJGNvbnRleHQpOwoJCSRlbWFpbC0+c2V0U3ViamVjdCgkc3ViamVjdCk7CgkJJGVtYWlsLT5zZXRCb2R5KCRib2R5KTsKCQkkZW1haWwtPnNldFRvTmFtZSgkdXNlci0+Z2V0Rmlyc3ROYW1lKCkpOwoJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCR1c2VyLT5nZXRFbWFpbCgpKTsKCQkkZW1haWwtPnNldEZyb21OYW1lKCRlbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJJGVtYWlsLT5zZXRGcm9tQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCSAgICAKCQlyZXR1cm4gJGVtYWlsLT5zZW5kKCk7Cgl9CgoJCgkKCSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgkjIElQTgoJIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCQoJLyoqCgkgKiBQcm9jZXNzZXMgSVBOIG5vdGlmaWNhdGlvbnMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NOb3RpZmljYXRpb24oKQoJICogCgkgKiBAcGFyYW0gJHJlcXVlc3QgYXJyYXkgY29udGFpbmluZyB0aGUgSVBOIHZhcmlhYmxlcywgZ2VuZXJhbGx5IGEgY29weSBvZiB0aGUgJF9QT1NUCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUgcHJvY2Vzc2luZyB0aGUgSVBOCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzTm90aWZpY2F0aW9uKCRyZXF1ZXN0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkcmVxdWVzdCA9IGpzb25fZGVjb2RlKGZpbGVfZ2V0X2NvbnRlbnRzKCdwaHA6Ly9pbnB1dCcpKTsKCgkJLy9oYW5kbGUgcG9zc2libGUgZXJyb3JzIGFuZCBzYXZlIGxvZwoJCWlmICghaXNzZXQoJF9SRVFVRVNUWydoYXNoJ10pIHx8ICRfUkVRVUVTVFsnaGFzaCddICE9IHdwX2hhc2goJ2NvaW5iYXNlbWluaW1hbF9pcG5fYXV0aCcpKQoJCXsKCQkJaWYgKCR0aGlzLT5sb2dVbmF1dGhvcml6ZWRJUE5zPT10cnVlKSAkdGhpcy0+bG9nSVBOKCRyZXF1ZXN0KTsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIGF1dGggaGFzaCByZWNlaXZlZCBmb3IgQ29pbmJhc2UgSVBOIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwkKCQl9CgkJaWYgKCFpc3NldCgkcmVxdWVzdC0+b3JkZXItPmN1c3RvbSkpCgkJewoJCQlpZiAoJHRoaXMtPmxvZ1VuYXV0aG9yaXplZElQTnM9PXRydWUpICR0aGlzLT5sb2dJUE4oJHJlcXVlc3QpOwoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIk5vIG9yZGVyLXNwZWNpZmljIGF1dGggaGFzaCByZWNlaXZlZCBpbiBjdXN0b20gcGFyYW1ldGVyIHNsb3QgZm9yIENvaW5iYXNlIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJCWVsc2V7CgkJCSRjdXN0b20gPSBpc3NldCgkcmVxdWVzdC0+b3JkZXItPmN1c3RvbSk/ICRyZXF1ZXN0LT5vcmRlci0+Y3VzdG9tIDogJHJlcXVlc3QtPnJlY3VycmluZ19wYXltZW50LT5jdXN0b207CgkJCSRjdXN0b21fZGF0YSA9IGV4cGxvZGUoJ3wnLCRjdXN0b20pOwoJCQkkY3VzdG9tX2lkID0gcmVzZXQoJGN1c3RvbV9kYXRhKTsKCQkJJGN1c3RvbV9oYXNoID0gZW5kKCRjdXN0b21fZGF0YSk7CgkJCWlmKCRjdXN0b21faGFzaCAhPSB3cF9oYXNoKCJjb2luYmFzZV9pcG5fYXV0aF9vcmRlcl97JGN1c3RvbV9pZH0iKSl7CgkJCQlpZiAoJHRoaXMtPmxvZ1VuYXV0aG9yaXplZElQTnM9PXRydWUpICR0aGlzLT5sb2dJUE4oJHJlcXVlc3QpOwoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIG9yZGVyLXNwZWNpZmljIGF1dGggaGFzaCByZWNlaXZlZCBpbiBjdXN0b20gcGFyYW1ldGVyIHNsb3QgZm9yIENvaW5iYXNlIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgkJCX0KCQl9CgkJaWYgKGlzX251bGwoJHJlcXVlc3QpIHx8IGVtcHR5KCRyZXF1ZXN0KSB8fCAhaXNzZXQoJHJlcXVlc3QtPm9yZGVyLT5pZCkgfHwgIWluX2FycmF5KCRyZXF1ZXN0LT5vcmRlci0+c3RhdHVzLGFycmF5KE1NX0NvaW5iYXNlTWluaW1hbFNlcnZpY2U6OiRPUkRFUl9TVEFUVVNfQ0FOQ0VMRUQsTU1fQ29pbmJhc2VNaW5pbWFsU2VydmljZTo6JE9SREVSX1NUQVRVU19DT01QTEVURUQsTU1fQ29pbmJhc2VNaW5pbWFsU2VydmljZTo6JE9SREVSX1NUQVRVU19FWFBJUkVELE1NX0NvaW5iYXNlTWluaW1hbFNlcnZpY2U6OiRPUkRFUl9TVEFUVVNfTUlTUEFJRCkpKQoJCXsKCQkJaWYgKCR0aGlzLT5sb2dJbnZhbGlkSVBOcz09dHJ1ZSkgJHRoaXMtPmxvZ0lQTigkcmVxdWVzdCk7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBvciBlbXB0eSBKU09OIHJlY2VpdmVkIGluIENvaW5iYXNlIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJCWlmKCAkdGhpcy0+aXNEdXBsaWNhdGVJUE4oJHJlcXVlc3QpICkKCQl7CgkJCWlmICgkdGhpcy0+bG9nRHVwbGljYXRlSVBOcz09dHJ1ZSkgJHRoaXMtPmxvZ0lQTigkcmVxdWVzdCk7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRHVwbGljYXRlIENvaW5iYXNlIElQTiBkZXRlY3RlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJJGlwbklkID0gJHRoaXMtPmxvZ0lQTigkcmVxdWVzdCk7CgoJCS8vZ2V0IG9yZGVyIGRhdGEgYW5kIGl0ZW1zIGZyb20gaXBuCgkJJG9yZGVySWQgPSAkcmVxdWVzdC0+b3JkZXItPmN1c3RvbTsKCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySWQpOwoJCWlmICghJG9yZGVyLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIk5vIHZhbGlkIG9yZGVyIGZvdW5kIGZvciBDb2luYmFzZSBJUE4iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSRvcmRlckl0ZW1zID0gJG9yZGVyLT5nZXRQcm9kdWN0cygpOwoJCS8vZ2V0IGl0ZW0gZGF0YSBmb3Igc2luZ2xlLWl0ZW0tcmVjdXJyaW5nIG9yZGVycwoJCS8vd2UncmUgY291bnRpbmcgb24gdGhlIGZhY3QgdGhhdCB2YWxpZGF0ZU9yZGVyIGRpZG4ndCBsZXQgYW55IG1peGVkIHJlY3VycmluZy9ub24tcmVjdXJyaW5nIG9yIG11bHRpcGxlIHJlY3VycmluZyBvcmRlcnMgZ2V0IHRocm91Z2gKCQkkaXNTdWJzY3JpcHRpb25QYXltZW50ID0gY291bnQoJG9yZGVySXRlbXMpPT0xICYmIHJlc2V0KCRvcmRlckl0ZW1zKS0+aXNSZWN1cnJpbmcoKTsKCQkkb3JkZXJJdGVtID0gcmVzZXQoJG9yZGVySXRlbXMpOwoJCSRvcmRlckl0ZW1JZCA9ICRvcmRlckl0ZW0tPmdldElkKCk7CgkJCgkJLy9oYW5kbGUgZmFpbGVkIHBheW1lbnRzCgkJaWYgKCRyZXF1ZXN0LT5vcmRlci0+c3RhdHVzPT1NTV9Db2luYmFzZU1pbmltYWxTZXJ2aWNlOjokT1JERVJfU1RBVFVTX0NBTkNFTEVEKQoJCXsKCQkJZm9yZWFjaCAoJG9yZGVySXRlbXMgYXMgJHJldm9rZUl0ZW0pCgkJCXsKCQkJCWlmICgkcmV2b2tlSXRlbS0+aXNSZWN1cnJpbmcoKSkKCQkJCXsJCQkJCQoJCQkJCSR0aGlzLT5jYW5jZWxTdWJzY3JpcHRpb24oJG9yZGVySXRlbSk7CgkJCQl9CgkJCQkkcmV2b2tlUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpyZXZva2VBY2Nlc3NGb3JPcmRlckl0ZW0oJGl0ZW0pOwoJCQkJJGNvaW5iYXNlUmVhc29uID0gaXNzZXQoJHJlcXVlc3QtPm9yZGVyLT5jYW5jZWxsYXRpb25fcmVhc29uKT8gJHJlcXVlc3QtPm9yZGVyLT5jYW5jZWxsYXRpb25fcmVhc29uIDogIk5vIHJlYXNvbiBwcm92aWRlZC4iOwoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJDb2luYmFzZSBwYXltZW50IGZhaWxlZC4gJGNvaW5iYXNlUmVhc29uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRkFJTEVEKTsKCQkJfQoJCX0KCQkKCQkvL2hhbmRsZSBtaXNwYXltZW50cwoJCWlmICgkcmVxdWVzdC0+b3JkZXItPnN0YXR1cz09TU1fQ29pbmJhc2VNaW5pbWFsU2VydmljZTo6JE9SREVSX1NUQVRVU19NSVNQQUlEICkKCQl7CgkJCSR1bmRlcnBhaWRBbW91bnQgPSAkcmVxdWVzdC0+b3JkZXItPnRvdGFsX2J0Yy0+Y2VudHMgLSAkcmVxdWVzdC0+b3JkZXItPm1pc3BhaWRfYnRjLT5jZW50czsKCQkJJHVzZXIgPSAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpnZXREZWZhdWx0KCk7CgkJCSRjb250ZXh0ID0gbmV3IE1NX0NvbnRleHQoJHVzZXIsICRlbXBsb3llZSwgJG9yZGVyKTsJCgkJCS8vaWYgaXQgd2FzIG92ZXJwYWlkLCBsZXQgYWRtaW4ga25vdyBhbmQgdHJlYXQgaXQgYXMgc3VjY2Vzc2Z1bAoJCQlpZiAoJHVuZGVycGFpZEFtb3VudCA8PSAwKQoJCQl7CQkJCQogCQkJCSRlbWFpbCA9IG5ldyBNTV9FbWFpbCgpOwoJCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJCSRlbWFpbC0+c2V0U3ViamVjdCgiQ29pbmJhc2Ugb3ZlcnBheW1lbnQgbm90ZmljYXRpb24iKTsKCQkJCSRlbWFpbC0+c2V0Qm9keSgiVGhpcyBub3RpZmljYXRpb24gaXMgdG8gYWxlcnQgeW91IHRoYXQgdGhlIHVzZXIgIi4kb3JkZXItPmdldEN1c3RvbWVyKCktPmdldFVzZXJuYW1lKCkuIiBvdmVycGFpZCBmb3Igb3JkZXIgbm8uICIuJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLiIgYnkgIi4oJHVuZGVycGFpZEFtb3VudC8tMTAwMDAwMDAwKS4iIEJUQy4gSWYgeW91IHdpc2ggdG8gcmVmdW5kIHRoZWlyIG92ZXJwYXltZW50LCB5b3UnbGwgbmVlZCB0byBjb250YWN0IHRoZW0gZm9yIHRoZWlyIGJpdGNvaW4gd2FsbGV0IGFkZHJlc3MuIik7CgkJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJJGVtYWlsLT5zZW5kKCk7CgkJCQkvLyBzZXQgc3RhdHVzIHRvIGNvbXBsZXRlZCBzbyBpdCB3aWxsIGZhbGwgdGhyb3VnaCBhbmQgZ3JhbnQgYWNjZXNzCgkJCQkkcmVxdWVzdC0+b3JkZXItPnN0YXR1cyA9IE1NX0NvaW5iYXNlTWluaW1hbFNlcnZpY2U6OiRPUkRFUl9TVEFUVVNfQ09NUExFVEVEOwoJCQl9CgkJCS8vaWYgaXQgd2FzIHVuZGVycGFpZCwgbGV0IHVzZXIgYW5kIGFkbWluIGtub3cgYW5kIGRvbid0IGdpdmUgYWNjZXNzCgkJCWVsc2UKCQkJewkJCQoJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkkZW1haWwtPnNldENvbnRleHQoJGNvbnRleHQpOwoJCQkJJGVtYWlsLT5zZXRTdWJqZWN0KCJXZSBkaWRuJ3QgcmVjZWl2ZSBlbm91Z2ggcGF5bWVudCBmb3IgeW91ciBbTU1fT3JkZXJfRGF0YSBuYW1lPSdwcm9kdWN0TmFtZSddIHB1cmNoYXNlIik7CgkJCQkkZW1haWwtPnNldEJvZHkoIkhlbGxvIFtNTV9NZW1iZXJfRGF0YSBuYW1lPSdmaXJzdE5hbWUnXSxcblxuIFNvcnJ5IC0gdGhlIGFtb3VudCB5b3Ugc2VudCB2aWEgYml0Y29pbiB3YXMgIi4oJHVuZGVycGFpZEFtb3VudC8xMDAwMDAwMDApLiIgQlRDIGxlc3MgdGhhbiB0aGUgb3JkZXIgdG90YWwuIFlvdSdsbCBuZWVkIHRvIGNoZWNrIG91dCBhZ2FpbiBhbmQgbWFrZSBmdWxsIHBheW1lbnQgaW4gb3JkZXIgdG8gcmVjZWl2ZSBtZW1iZXJzaGlwIGFjY2VzcyAoeW91IGNhbiBnZXQgYSByZWZ1bmQgb24gdGhlICIuKCRyZXF1ZXN0LT5vcmRlci0+bWlzcGFpZF9idGMtPmNlbnRzLzEwMDAwMDAwMCkuIiBCVEMgeW91IGFscmVhZHkgcGFpZCBieSByZXBseWluZyB3aXRoIHRoZSBiaXRjb2luIHdhbGxldCBhZGRyZXNzIHlvdSdkIGxpa2UgdGhlIHJlZnVuZCBzZW50IHRvKS4gXG5cbiBUaGFuayB5b3UhXG4gW01NX0VtcGxveWVlX0RhdGEgbmFtZT0nZGlzcGxheU5hbWUnXSIpOwoJCQkJJGVtYWlsLT5zZXRUb05hbWUoJHVzZXItPmdldEZpcnN0TmFtZSgpKTsKCQkJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCR1c2VyLT5nZXRFbWFpbCgpKTsKCQkJCSRlbWFpbC0+c2V0RnJvbU5hbWUoJGVtcGxveWVlLT5nZXREaXNwbGF5TmFtZSgpKTsKCQkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJICAgICRlbWFpbC0+c2VuZCgpOwoJCQkJCiAJCQkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJCQkkZW1haWwtPnNldENvbnRleHQoJGNvbnRleHQpOwoJCQkJJGVtYWlsLT5zZXRTdWJqZWN0KCJDb2luYmFzZSB1bmRlcnBheW1lbnQgbm90ZmljYXRpb24iKTsKCQkJCSRlbWFpbC0+c2V0Qm9keSgiVGhpcyBub3RpZmljYXRpb24gaXMgdG8gYWxlcnQgeW91IHRoYXQgdGhlIHVzZXIgIi4kb3JkZXItPmdldEN1c3RvbWVyKCktPmdldFVzZXJuYW1lKCkuIiB1bmRlcnBhaWQgZm9yIG9yZGVyIG5vLiAiLiRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKS4iIGJ5ICIuKCR1bmRlcnBhaWRBbW91bnQvMTAwMDAwMDAwKS4iIEJUQy4gVGhleSB3ZXJlIG5vdCBncmFudGVkIGFjY2VzcyBhbmQgaGF2ZSBiZWVuIG5vdGlmaWVkIHRoYXQgdGhleSBuZWVkIHRvIHJlc2VuZCBwYXltZW50IGluIGZ1bGwgYW5kIHNlbmQgeW91IHRoZWlyIGJpdGNvaW4gd2FsbGV0IGFkZHJlc3MgaWYgdGhleSB3YW50IHRvIHJlY2VpdmUgYSByZWZ1bmQgb24gdGhlICIuKCRyZXF1ZXN0LT5vcmRlci0+bWlzcGFpZF9idGMtPmNlbnRzLzEwMDAwMDAwMCkuIiBCVEMgdGhleSBhbHJlYWR5IHBhaWQuIik7CgkJCQkkZW1haWwtPnNldFRvQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkJJGVtYWlsLT5zZW5kKCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkluc3VmZmljaWVudCBwYXltZW50IGRldGVjdGVkIGluIENvaW5iYXNlIElQTiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCgkJLy9oYW5kbGUgZXhwaXJlZCBwYXltZW50cwoJCWlmICgkcmVxdWVzdC0+b3JkZXItPnN0YXR1cz09TU1fQ29pbmJhc2VNaW5pbWFsU2VydmljZTo6JE9SREVSX1NUQVRVU19FWFBJUkVEICkKCQl7CgkJCSR1bmRlcnBhaWRBbW91bnQgPSAkcmVxdWVzdC0+b3JkZXItPnRvdGFsX2J0Yy0+Y2VudHMgLSAkcmVxdWVzdC0+b3JkZXItPm1pc3BhaWRfYnRjLT5jZW50czsKCQkJJHVzZXIgPSAkb3JkZXItPmdldEN1c3RvbWVyKCk7CgkJCSRlbXBsb3llZSA9IE1NX0VtcGxveWVlOjpnZXREZWZhdWx0KCk7CgkJCSRjb250ZXh0ID0gbmV3IE1NX0NvbnRleHQoJHVzZXIsICRlbXBsb3llZSwgJG9yZGVyKTsJCQkJCgkJCS8vaWYgaXQgd2FzIHBhaWQgY29ycmVjdGx5LCBsZXQgYWRtaW4ga25vdyBhbmQgdHJlYXQgaXQgYXMgc3VjY2Vzc2Z1bAoJCQlpZiAoJHVuZGVycGFpZEFtb3VudCA8PSAwKQoJCQl7CQkJCQogCQkJCSRlbWFpbCA9IG5ldyBNTV9FbWFpbCgpOwoJCQkJJGVtYWlsLT5zZXRDb250ZXh0KCRjb250ZXh0KTsKCQkJCSRlbWFpbC0+c2V0U3ViamVjdCgiQ29pbmJhc2UgZXhwaXJlZCBwYXltZW50IG5vdGZpY2F0aW9uIik7CgkJCQkkZW1haWwtPnNldEJvZHkoIlRoaXMgbm90aWZpY2F0aW9uIGlzIHRvIGFsZXJ0IHlvdSB0aGF0IHRoZSB1c2VyICIuJG9yZGVyLT5nZXRDdXN0b21lcigpLT5nZXRVc2VybmFtZSgpLiIgc2VudCBhIGJpdGNvaW4gcGF5bWVudCBmb3Igb3JkZXIgbm8uICIuJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLiIgd2hpY2ggd2FzIG5vdCBjb25maXJtZWQgdW50aWwgYWZ0ZXIgdGhlIENvaW5iYXNlIHRyYW5zYWN0aW9uIGhhZCBleHBpcmVkLiBUaGVpciBwYXltZW50IGFwcGVhcmVkIHRvIGJlIGluIHRoZSBjb3JyZWN0IGFtb3VudCBhbmQgc3VjY2Vzc2Z1bCB0aG91Z2gsIHNvIHRoZXkgaGF2ZSBiZWVuIGdyYW50ZWQgYWNjZXNzLiBZb3UgbWF5IHdpc2ggdG8gdmVyaWZ5IHRoYXQgdGhlIGJpdGNvaW4gZGVwb3NpdCB3YXMgaW5kZWVkIHJlY2VpdmVkIGFzIGV4cGVjdGVkLiIpOwoJCQkJJGVtYWlsLT5zZXRUb0FkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCSRlbWFpbC0+c2V0RnJvbU5hbWUoJGVtcGxveWVlLT5nZXREaXNwbGF5TmFtZSgpKTsKCQkJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkJCSRlbWFpbC0+c2VuZCgpOwoJCQkJLy8gc2V0IHN0YXR1cyB0byBjb21wbGV0ZWQgc28gaXQgd2lsbCBmYWxsIHRocm91Z2ggYW5kIGdyYW50IGFjY2VzcwoJCQkJJHJlcXVlc3QtPm9yZGVyLT5zdGF0dXMgPSBNTV9Db2luYmFzZU1pbmltYWxTZXJ2aWNlOjokT1JERVJfU1RBVFVTX0NPTVBMRVRFRDsKCQkJfQoJCQkvL2lmIGl0IHdhcyB1bmRlcnBhaWQsIGxldCB1c2VyIGFuZCBhZG1pbiBrbm93IGFuZCBkb24ndCBnaXZlIGFjY2VzcwoJCQllbHNlCgkJCXsKIAkJCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkJCSRlbWFpbC0+c2V0Q29udGV4dCgkY29udGV4dCk7CgkJCQkkZW1haWwtPnNldFN1YmplY3QoIldlIGRpZG4ndCByZWNlaXZlIGVub3VnaCBwYXltZW50IGZvciB5b3VyIFtNTV9PcmRlcl9EYXRhIG5hbWU9J3Byb2R1Y3ROYW1lJ10gcHVyY2hhc2UiKTsKCQkJCSRlbWFpbC0+c2V0Qm9keSgiSGVsbG8gW01NX01lbWJlcl9EYXRhIG5hbWU9J2ZpcnN0TmFtZSddLFxuXG4gU29ycnkgLSB0aGUgYW1vdW50IHlvdSBzZW50IHZpYSBiaXRjb2luIHdhcyAiLigkdW5kZXJwYWlkQW1vdW50LzEwMDAwMDAwMCkuIiBCVEMgbGVzcyB0aGFuIHRoZSBvcmRlciB0b3RhbC4gWW91J2xsIG5lZWQgdG8gY2hlY2sgb3V0IGFnYWluIGFuZCBtYWtlIGZ1bGwgcGF5bWVudCBpbiBvcmRlciB0byByZWNlaXZlIG1lbWJlcnNoaXAgYWNjZXNzICh5b3UgY2FuIGdldCBhIHJlZnVuZCBvbiB0aGUgIi4oJHJlcXVlc3QtPm9yZGVyLT5taXNwYWlkX2J0Yy0+Y2VudHMvMTAwMDAwMDAwKS4iIEJUQyB5b3UgYWxyZWFkeSBwYWlkIGJ5IHJlcGx5aW5nIHdpdGggdGhlIGJpdGNvaW4gd2FsbGV0IGFkZHJlc3MgeW91J2QgbGlrZSB0aGUgcmVmdW5kIHNlbnQgdG8pLiBcblxuIFRoYW5rIHlvdSFcbiBbTU1fRW1wbG95ZWVfRGF0YSBuYW1lPSdkaXNwbGF5TmFtZSddIik7CgkJCQkkZW1haWwtPnNldFRvTmFtZSgkdXNlci0+Z2V0Rmlyc3ROYW1lKCkpOwoJCQkJJGVtYWlsLT5zZXRUb0FkZHJlc3MoJHVzZXItPmdldEVtYWlsKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCQkJJGVtYWlsLT5zZXRGcm9tQWRkcmVzcygkZW1wbG95ZWUtPmdldEVtYWlsKCkpOwoJCQkgICAgJGVtYWlsLT5zZW5kKCk7CgkJCQkKIAkJCQkkZW1haWwgPSBuZXcgTU1fRW1haWwoKTsKCQkJCSRlbWFpbC0+c2V0Q29udGV4dCgkY29udGV4dCk7CgkJCQkkZW1haWwtPnNldFN1YmplY3QoIkNvaW5iYXNlIHVuZGVycGF5bWVudCBub3RmaWNhdGlvbiIpOwoJCQkJJGVtYWlsLT5zZXRCb2R5KCJUaGlzIG5vdGlmaWNhdGlvbiBpcyB0byBhbGVydCB5b3UgdGhhdCB0aGUgdXNlciAiLiRvcmRlci0+Z2V0Q3VzdG9tZXIoKS0+Z2V0VXNlcm5hbWUoKS4iIHVuZGVycGFpZCBmb3Igb3JkZXIgbm8uICIuJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLiIgYnkgIi4oJHVuZGVycGFpZEFtb3VudC8xMDAwMDAwMDApLiIgQlRDLiBUaGV5IHdlcmUgbm90IGdyYW50ZWQgYWNjZXNzIGFuZCBoYXZlIGJlZW4gbm90aWZpZWQgdGhhdCB0aGV5IG5lZWQgdG8gcmVzZW5kIHBheW1lbnQgaW4gZnVsbCBhbmQgc2VuZCB5b3UgdGhlaXIgYml0Y29pbiB3YWxsZXQgYWRkcmVzcyBpZiB0aGV5IHdhbnQgdG8gcmVjZWl2ZSBhIHJlZnVuZCBvbiB0aGUgIi4oJHJlcXVlc3QtPm9yZGVyLT5taXNwYWlkX2J0Yy0+Y2VudHMvMTAwMDAwMDAwKS4iIEJUQyB0aGV5IGFscmVhZHkgcGFpZC4iKTsKCQkJCSRlbWFpbC0+c2V0VG9BZGRyZXNzKCRlbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCQkkZW1haWwtPnNldEZyb21OYW1lKCRlbXBsb3llZS0+Z2V0RGlzcGxheU5hbWUoKSk7CgkJCQkkZW1haWwtPnNldEZyb21BZGRyZXNzKCRlbXBsb3llZS0+Z2V0RW1haWwoKSk7CgkJCQkkZW1haWwtPnNlbmQoKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW5zdWZmaWNpZW50IHBheW1lbnQgZGV0ZWN0ZWQgaW4gQ29pbmJhc2UgSVBOIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoKCQkvL2hhbmRsZSBzdWNjZXNmdWwgcGF5bWVudHMKCQlpZiAoJHJlcXVlc3QtPm9yZGVyLT5zdGF0dXM9PU1NX0NvaW5iYXNlTWluaW1hbFNlcnZpY2U6OiRPUkRFUl9TVEFUVVNfQ09NUExFVEVEKQoJCXsKCQkJJG51bWJlck9mQmlsbGluZ3MgPSBjb3VudCgkd3BkYi0+Z2V0X3Jlc3VsdHMoJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DT0lOQkFTRU1JTklNQUxfU0NIRURVTEVEX0VWRU5UUy4iIFdIRVJFIG9yZGVyX2l0ZW1faWQ9JWQgQU5EIHR5cGU9J3BheW1lbnQnIiwkb3JkZXJJdGVtSWQpKSk7CgkJCS8vaGFuZGxlIGFjY2VzcyBmb3Igc3Vic2NyaXB0aW9uIHBheW1lbnRzICsgcHJlZW1wdCBhbnkgc2NoZWR1bGVkIGVtYWlsIHJlbWluZGVycyAobXVzdCBiZSBkb25lIGJlZm9yZSBzY2hlZHVsaW5nIG5ldyBvbmVzISkgKyBzY2hlZHVsZSBwYXltZW50IGV2ZW50IGlmIGZpcnN0IHRpbWUKCQkJaWYgKCRpc1N1YnNjcmlwdGlvblBheW1lbnQpCgkJCXsKCQkJCSR3cGRiLT51cGRhdGUoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1NDSEVEVUxFRF9FVkVOVFMsYXJyYXkoInN0YXR1cyI9PiJwcmVlbXB0ZWQiKSxhcnJheSgic3RhdHVzIj0+InNjaGVkdWxlZCIsIm9yZGVyX2l0ZW1faWQiPT4kb3JkZXJJdGVtSWQsInR5cGUiPT4icmVtaW5kZXIiKSk7CgkJCQlpZiAoJG51bWJlck9mQmlsbGluZ3MgPT0gMCkKCQkJCXsKCQkJCQkkYWNjZXNzUmVzcG9uc2UgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXIoJG9yZGVyKTsKCQkJCQkkdGhpcy0+Y3JlYXRlU2NoZWR1bGVzRnJvbVByb2R1Y3RzKCRvcmRlckl0ZW1zKTsKCQkJCX0KCQkJCS8vIG9yIGFzc2lnbiBhY2Nlc3MgYW5kIHJlc3RhcnQgc2NoZWR1bGUgaWYgdGhpcyBpcyBhIHBheW1lbnQgb24gYW4gZXhwaXJlZCBvcmRlcgoJCQkJZWxzZWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSAhPSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HKQoJCQkJewoJCQkJCSRhY2Nlc3NSZXNwb25zZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbkFjY2Vzc0Zyb21PcmRlcigkb3JkZXIpOwoJCQkJCSRiaWxsaW5nTnVtYmVyT2Zmc2V0ID0gaXNfbnVtZXJpYygkb3JkZXJJdGVtLT5nZXRUcmlhbER1cmF0aW9uKCkpICYmICRvcmRlckl0ZW0tPmdldFRyaWFsRHVyYXRpb24oKT4wID8gMSA6IDI7CgkJCQkJJHRoaXMtPnNjaGVkdWxlTmV4dFBheW1lbnRGb3JFeGlzdGluZ1N1YnNjcmlwdGlvbigkb3JkZXJJdGVtLCAkb3JkZXItPmdldEN1c3RvbWVyKCksICRudW1iZXJPZkJpbGxpbmdzICsgJGJpbGxpbmdOdW1iZXJPZmZzZXQpOwoJCQkJfQoJCQl9CgkJCS8vaGFuZGxlIGFjY2VzcyBmb3Igbm9uLXN1YnNjcmlwdGlvbiBwYXltZW50cyAoZS5nLiBidW5kbGVzKQoJCQllbHNlewoJCQkJJGFjY2Vzc1Jlc3BvbnNlID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQWNjZXNzRnJvbU9yZGVyKCRvcmRlcik7CgkJCX0KCQkJCgkJfQoKCQkvL2xvZyB0cmFuc2FjdGlvbiBpbiBzZXJ2aWNlIHNwZWNpZmljIHRhYmxlICsgZ2VuZXJhbCB0cmFuc2FjdGlvbnMgdGFibGUgLSB0aGlzIHdpbGwgb2NjdXIgZm9yIGNvbXBsZXRlZCBhbmQgbWlzcGFpZCBvcmRlcnMKCQkkdHJhbnNhY3Rpb24gPSBhcnJheSgKCQkJIml0ZW1faWQiID0+ICggY291bnQoJG9yZGVySXRlbXMpPT0xPyAkb3JkZXJJdGVtSWQgOiBudWxsICksCgkJCSJ0eXBlIiA9PiAoICRpc1N1YnNjcmlwdGlvblBheW1lbnQ/IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCA6IE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5UICksCgkJCSJkZXNjcmlwdGlvbiIgPT4gKCRudW1iZXJPZkJpbGxpbmdzPjA/IlJlY3VycmluZyBwYXltZW50IjoiUGF5bWVudCIpIC4iIGZvciBvcmRlciMgeyRvcmRlci0+Z2V0T3JkZXJOdW1iZXIoKX0iLAoJCQkiYW1vdW50IiA9PiAkcmVxdWVzdC0+b3JkZXItPnRvdGFsX25hdGl2ZS0+Y2VudHMvMTAwLAoJCQkiY3VycmVuY3kiID0+ICRyZXF1ZXN0LT5vcmRlci0+dG90YWxfbmF0aXZlLT5jdXJyZW5jeV9pc28sCgkJCSJidGNfYW1vdW50IiA9PiAkcmVxdWVzdC0+b3JkZXItPnRvdGFsX2J0Yy0+Y2VudHMgLyAxMDAwMDAwMDAsCgkJCSJtaXNwYWlkX2Ftb3VudCIgPT4gKCAkcmVxdWVzdC0+b3JkZXItPnN0YXR1cz09J21pc3BhaWQnPyAkcmVxdWVzdC0+b3JkZXItPm1pc3BhaWRfbmF0aXZlLT5jZW50cy8xMDAgOiBudWxsICkKCQkpOwoJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX1RSQU5TQUNUSU9OUyxhcnJheSgKCQkJIm9yZGVyX2lkIiA9PiAkb3JkZXItPmdldElkKCksCgkJCSJvcmRlcl9pdGVtX2lkIiA9PiAkdHJhbnNhY3Rpb25bIml0ZW1faWQiXSwKCQkJImJ1dHRvbl9pZCIgPT4gJHJlcXVlc3QtPm9yZGVyLT5idXR0b24tPmlkLAoJCQkiYW1vdW50IiA9PiAkdHJhbnNhY3Rpb25bImFtb3VudCJdLAoJCQkiY3VycmVuY3kiID0+ICR0cmFuc2FjdGlvblsiY3VycmVuY3kiXSwKCQkJImJ0Y19hbW91bnQiID0+ICR0cmFuc2FjdGlvblsiYnRjX2Ftb3VudCJdLAoJCQkibWlzcGFpZF9hbW91bnQiID0+ICR0cmFuc2FjdGlvblsibWlzcGFpZF9hbW91bnQiXSwKCQkJInRyYW5zYWN0aW9uX2RhdGUiID0+IGdtZGF0ZSgnWS1tLWQgSDppOnMnKQoJCSkpOwoJCSR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRyYW5zYWN0aW9uRW50cnkoJG9yZGVyLT5nZXRJZCgpLCAkdHJhbnNhY3Rpb25bJ2l0ZW1faWQnXSwgJHRyYW5zYWN0aW9uWydhbW91bnQnXSwgJHRyYW5zYWN0aW9uWydjdXJyZW5jeSddLCAkdHJhbnNhY3Rpb25bJ2Rlc2NyaXB0aW9uJ10sICR0cmFuc2FjdGlvblsndHlwZSddLCB0cnVlLCAkdGhpcy0+Z2V0SWQoKSwgJGlwbklkKTsKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJHRyYW5zYWN0aW9uTG9nUmVzcG9uc2UtPm1lc3NhZ2UsKCR0cmFuc2FjdGlvbkxvZ1Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUyk/TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JFNVQ0NFU1M6TU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCgl9CgkKCQoJLyoqCgkgKiBMb2dzIGFuIElQTiByZXF1ZXN0LiBUaGlzIGlzIG5lY2Vzc2FyeSBmb3IgZHVwbGljYXRlIGRldGVjdGlvbiwgcG90ZW50aWFsbHkgZm9yIHRyb3VibGVzaG9vdGluZywKCSAqIGFuZCBmb3IgZGV0ZWN0aW5nICMgb2YgdGltZXMgYSBzdWJzY3JpcHRpb24gaGFzIGJlZW4gYmlsbGVkCgkgKiAKCSAqIEBwYXJhbSBvYmplY3QgJHJlcXVlc3QgVGhpcyBpcyBhbiBvYmplY3QgZGVjb2RlZCBmcm9tIHRoZSBKU09OIGluIHRoZSByYXcgSVBOIFBPU1QgZGF0YSAobnVsbCBpZiBpbnZhbGlkIEpTT04pIAoJICogQHJldHVybiBNTV9SZXNwb25zZSBjb250YWluaW5nIHRoZSBpZCBvZiB0aGUgcm93IGluIHRoZSBJUE4gbG9nIHRhYmxlIGlmIHN1Y2Nlc3NmdWwsIG9yIGFuIGVycm9yIG1lc3NhZ2UgaWYgZmFpbGVkCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBsb2dJUE4oJHJlcXVlc3QpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQlpZiAoaXNzZXQoJHJlcXVlc3QtPm9yZGVyKSkKCQl7CgkJCSRpbnNlcnREYXRhID0gYXJyYXkoCgkJCQkiYnV0dG9uX2lkIiA9PiAkcmVxdWVzdC0+b3JkZXItPmJ1dHRvbi0+aWQsCgkJCQkiaXBuX3RyYW5zYWN0aW9uX2lkIiA9PiAkcmVxdWVzdC0+b3JkZXItPmlkLAoJCQkJImlwbl9jb250ZW50IiA9PiBmaWxlX2dldF9jb250ZW50cygicGhwOi8vaW5wdXQiKSwKCQkJCSJpcG5fc3RhdHVzIiA9PiAkcmVxdWVzdC0+b3JkZXItPnN0YXR1cywKCQkJCSJyZWNlaXZlZCIgPT4gZ21kYXRlKCdZLW0tZCBIOmk6cycpLAoJCQkJImVycm9yIiA9PiAoJHJlcXVlc3QtPm9yZGVyLT5zdGF0dXM9PSJjb21wbGV0ZWQiPyBudWxsIDogJycpCgkJCSk7CgkJfQoJCWVsc2UKCQl7CgkJCSRpbnNlcnREYXRhID0gYXJyYXkoCgkJCQkiZXJyb3IiID0+ICIiLAoJCQkJImlwbl9jb250ZW50IiA9PiBmaWxlX2dldF9jb250ZW50cygicGhwOi8vaW5wdXQiKSwKCQkJCSJyZWNlaXZlZCIgPT4gZ21kYXRlKCdZLW0tZCBIOmk6cycpCgkJCSk7CgkJfQoJCQoJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX0lQTl9MT0csJGluc2VydERhdGEpOwoJCXJldHVybiAkd3BkYi0+aW5zZXJ0X2lkOwoJfQoJCgkKCS8qKgoJICogRGV0ZWN0cyB3aGV0aGVyIHRoaXMgSVBOIGhhcyBiZWVuIHJlY2VpdmVkIG9yIG5vdAoJICogCgkgKiBAcGFyYW0gYXJyYXkgJHJlcXVlc3QgVGhlIElQTiByZXF1ZXN0LgoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgdGhpcyBpcyBhIGR1cGxpY2F0ZSwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBpc0R1cGxpY2F0ZUlQTigkcmVxdWVzdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJLy90cnkgdG8gYWNxdWlyZSBhbiBpcG4tc3BlY2lmaWMgbG9jazsgaWYgbm8gbG9jayB0aGVuIGFub3RoZXIgaXBuIGZvciB0aGlzIGl0ZW0gaXMgYWxyZWFkeSB0YWtpbmcgcGxhY2UKCQkkbG9ja05hbWUgPSAibW1fY29pbmJhc2VtaW5pbWFsX2lwbl9sb2NrLSIubWQ1KCJ7JHJlcXVlc3QtPm9yZGVyLT5pZH0iKTsKCQkkbG9ja0FjcXVpcmVkID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoIlNFTEVDVCBDT0FMRVNDRShHRVRfTE9DSyglcywwKSwwKSIsJGxvY2tOYW1lKSk7CgkJaWYgKCRsb2NrQWNxdWlyZWQgPT0gIjEiKQoJCXsKCQkJJGlzRHVwbGljYXRlID0gIWlzX251bGwoICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQ09JTkJBU0VNSU5JTUFMX0lQTl9MT0cuIiBXSEVSRSBpcG5fY29udGVudD0lcyIsZmlsZV9nZXRfY29udGVudHMoJ3BocDovL2lucHV0JykpKSApOwoJCQkkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoIlNFTEVDVCBSRUxFQVNFX0xPQ0soJXMpIiwkbG9ja05hbWUpKTsKCQl9CgkJZWxzZQoJCXsKCQkJJGlzRHVwbGljYXRlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuICRpc0R1cGxpY2F0ZTsKCX0KCgkjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJIyBGUk9OVEVORAoJIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCglmdW5jdGlvbiByZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCkKCXsKCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkJpdGNvaW4gdHJhbnNhY3Rpb25zIGFyZSBub24tcmVmdW5kYWJsZSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsJCgl9CgkKCQoJLyoqCgkgKiBSZWRpcmVjdCBDb2luYmFzZSByZXR1cm4gdXJscyB3aXRob3V0IHRoZSBleHRyYSBwYXJhbWV0ZXJzIENvaW5iYXNlIGFkZHMgb24gc2luY2UgdGhleSB0cmlnZ2VyIGEgV1BfUXVlcnkgd2FybmluZwoJICogSW4gdGhlIGZ1dHVyZSB0aGlzIGNvdWxkIGJlIG1hZGUgdG8gb3V0cHV0IGEgZm9ybSB3aXRoIGEganMgc3VibWl0IHNvIHRoYXQgdGhlIHBhcmFtZXRlcnMgd291bGQgYmUgYXZhaWxhYmxlIHRvIHRoZSBlbmQgcGFnZSB3aXRob3V0CgkgKiBpbnRlcmZlcmluZyB3aXRoIHRoZSBXUCBHRVQgcXVlcnkgc3RyaW5nIG1lY2hhbmlzbS4gCgkgKi8KCWZ1bmN0aW9uIGRvSW5pdEhvb2soKQoJewoJCWlmIChpc3NldCgkX0dFVFsnbW1fY29pbmJhc2VtaW5pbWFsX3JlZGlyZWN0J10pICYmICFlbXB0eSgkX0dFVFsnbW1fY29pbmJhc2VtaW5pbWFsX3JlZGlyZWN0J10pKQoJCXsKCQkJaGVhZGVyKCJMb2NhdGlvbjogJF9HRVRbbW1fY29pbmJhc2VtaW5pbWFsX3JlZGlyZWN0XVxyXG4iKTsKCQkJZXhpdDsKCQl9Cgl9CgkKfQoK', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(228, 'orderutils', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX09yZGVyVXRpbHMKewkKCS8qKgoJICogVGhpcyBtZXRob2QgdGFrZXMgYW4gJG9yZGVyIG9iamVjdCBhbmQgZGV0ZXJtaW5lcyB0aGUgcmViaWxsIHRvdGFsIGFuZCBkaXNjb3VudCBieSBpdGVyYXRpbmcKCSAqIG92ZXIgdGhlIG9yZGVyIGl0ZW1zLgoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXIgJG9yZGVyIHRoZSBvcmRlciB0byBjYWxjdWxhdGUgcmViaWxsIGFtb3VudHMgZm9yCgkgKiBAcmV0dXJuIGFycmF5IGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHJlYmlsbCB0b3RhbCBhbmQgZGlzY291bnQgYW1vdW50cwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFJlYmlsbEFtb3VudHMoTU1fT3JkZXIgJG9yZGVyKQoJewoJCSRkYXRhID0gYXJyYXkoKTsKCQkkZGF0YVsicmViaWxsX3RvdGFsIl0gPSAwOwoJCSRkYXRhWyJyZWJpbGxfc2hpcHBpbmciXSA9IDA7CgkJJGRhdGFbInJlYmlsbF9zdWJ0b3RhbCJdID0gMDsKCQkkZGF0YVsicmViaWxsX2Rpc2NvdW50Il0gPSAwOwoJCQoJCWlmKCRvcmRlci0+aXNWYWxpZCgpKQoJCXsKCQkJJG9yZGVySXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCSRyZWJpbGxPcmRlclRvdGFsID0gMDsKCQkJJHJlYmlsbERpc2NvdW50ID0gMDsKCQkJCgkJCWZvcmVhY2goJG9yZGVySXRlbXMgYXMgJG9yZGVySXRlbSkKCQkJewoJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkb3JkZXJJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCQkJCgkJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSRkYXRhWyJyZWJpbGxfdG90YWwiXSArPSAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKTsKCQkJCQkKCQkJCQlpZighaXNfbnVsbCgkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdEaXNjb3VudCgpKSkKCQkJCQl7CgkJCQkJCSRkYXRhWyJyZWJpbGxfc3VidG90YWwiXSArPSBmbG9hdHZhbCgkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSkgKyBmbG9hdHZhbCgkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdEaXNjb3VudCgpKTsKCQkJCQkJJGRhdGFbInJlYmlsbF9kaXNjb3VudCJdICs9ICRvcmRlckl0ZW0tPmdldFJlY3VycmluZ0Rpc2NvdW50KCk7CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQkkZGF0YVsicmViaWxsX3N1YnRvdGFsIl0gKz0gJHByb2R1Y3QtPmdldFByaWNlKGZhbHNlKTsKCQkJCQkJCgkJCQkJCS8vIGNoZWNrIGlmIHRoZSBwcmljZSBpcyBkaXNjb3VudGVkCgkJCQkJCWlmKCRwcm9kdWN0LT5nZXRQcmljZShmYWxzZSkgPiAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSkKCQkJCQkJewoJCQkJCQkJJGRhdGFbInJlYmlsbF9kaXNjb3VudCJdICs9IGZsb2F0dmFsKCRwcm9kdWN0LT5nZXRQcmljZShmYWxzZSkpIC0gZmxvYXR2YWwoJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCkpOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiAkZGF0YTsKCX0KfQo=', 0, '2018-11-21 06:38:55'),
(229, 'memberdetailsview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX01lbWJlckRldGFpbHNWaWV3IGV4dGVuZHMgTU1fUkJBQ0dlbmVyYWxFbXBsb3llZVZpZXcKewkKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1VQREFURV9NRU1CRVIgPSAidXBkYXRlTWVtYmVyIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0RFTEVURV9NRU1CRVIgPSAiZGVsZXRlTWVtYmVyIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NFTkRfUEFTU1dPUkQgPSAic2VuZFBhc3N3b3JkRW1haWwiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0VORF9XRUxDT01FX0VNQUlMID0gInNlbmRXZWxjb21lRW1haWwiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fTE9HSU5fQVNfTUVNQkVSID0gImxvZ2luQXNNZW1iZXIiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0hBTkdFX01FTUJFUlNISVBfU1RBVFVTID0gImNoYW5nZU1lbWJlcnNoaXBTdGF0dXMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fQ0hBTkdFX01FTUJFUlNISVAgPSAiY2hhbmdlTWVtYmVyc2hpcCI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9DSEFOR0VfQlVORExFX1NUQVRVUyA9ICJjaGFuZ2VCdW5kbGVTdGF0dXMiOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fVVBEQVRFX1NVQlNDUklQVElPTl9CSUxMSU5HID0gInVwZGF0ZVN1YnNjcmlwdGlvbkJpbGxpbmciOwoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fU0FWRV9CVU5ETEVfQ09ORklHID0gInNhdmVCdW5kbGVDb25maWd1cmF0aW9uIjsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0ZPUkdFVF9NRU1CRVIgPSAiZm9yZ2V0TWVtYmVyIjsKCgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCk7Cgl9CgkKIAlwdWJsaWMgZnVuY3Rpb24gcGVyZm9ybUFjdGlvbigkcG9zdCkgCgl7CQoJCSRyZXNwb25zZSA9IHBhcmVudDo6cGVyZm9ybUFjdGlvbigkcG9zdCk7CgkJCgkJaWYoISgkcmVzcG9uc2UgaW5zdGFuY2VvZiBNTV9SZXNwb25zZSkpCgkJewoJCQlzd2l0Y2goJHBvc3Rbc2VsZjo6JE1NX0pTQUNUSU9OXSkgCgkJCXsKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1VQREFURV9NRU1CRVI6CgkJCQkJcmV0dXJuICR0aGlzLT51cGRhdGVNZW1iZXIoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fREVMRVRFX01FTUJFUjoKCQkJCQlyZXR1cm4gJHRoaXMtPmRlbGV0ZU1lbWJlcigkcG9zdCk7CgkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NFTkRfUEFTU1dPUkQ6CgkJCQkJcmV0dXJuICR0aGlzLT5zZW5kUGFzc3dvcmRSZW1pbmRlcigkcG9zdCk7CgkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NFTkRfV0VMQ09NRV9FTUFJTDoKCQkJCQlyZXR1cm4gJHRoaXMtPnNlbmRXZWxjb21lRW1haWwoJHBvc3QpOwoJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9MT0dJTl9BU19NRU1CRVI6CgkJCQkJcmV0dXJuICR0aGlzLT5sb2dpbkFzTWVtYmVyKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0ZPUkdFVF9NRU1CRVI6CgkJCQkgICAgcmV0dXJuICR0aGlzLT5mb3JnZXRNZW1iZXIoJHBvc3QpOwoJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9DSEFOR0VfTUVNQkVSU0hJUF9TVEFUVVM6CgkJCQkJcmV0dXJuICR0aGlzLT5jaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NIQU5HRV9NRU1CRVJTSElQOgoJCQkJCXJldHVybiAkdGhpcy0+Y2hhbmdlTWVtYmVyc2hpcCgkcG9zdCk7CgkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NIQU5HRV9CVU5ETEVfU1RBVFVTOgoJCQkJCXJldHVybiAkdGhpcy0+Y2hhbmdlQnVuZGxlU3RhdHVzKCRwb3N0KTsKCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fVVBEQVRFX1NVQlNDUklQVElPTl9CSUxMSU5HOgoJCQkJCXJldHVybiAkdGhpcy0+dXBkYXRlU3Vic2NyaXB0aW9uQmlsbGluZ0luZm8oJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0FWRV9CVU5ETEVfQ09ORklHOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZUJ1bmRsZUNvbmZpZ3VyYXRpb24oJHBvc3QpOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHVwZGF0ZU1lbWJlcigkcG9zdCkKCXsJCgkJaWYoaXNzZXQoJHBvc3RbIm1tX2lkIl0pKSAKCQl7CgkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHBvc3RbIm1tX2lkIl0pOwoJCQkKCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkgCgkJCXsKCQkJCSRlbmFibGVVc2VybmFtZUNoYW5nZSA9IChNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9FTkFCTEVfVVNFUk5BTUVfQ0hBTkdFKSA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwoJCQkJCgkJCQkkdXNlci0+c2V0Rmlyc3ROYW1lKCRwb3N0WyJtbV9maXJzdF9uYW1lIl0pOwoJCQkJJHVzZXItPnNldExhc3ROYW1lKCRwb3N0WyJtbV9sYXN0X25hbWUiXSk7CgkJCQkkdXNlci0+c2V0RW1haWwoJHBvc3RbIm1tX2VtYWlsIl0pOwoJCQkJCgkJCQlpZigkZW5hYmxlVXNlcm5hbWVDaGFuZ2UpCgkJCQl7CgkJCQkJJHVzZXItPnNldFVzZXJuYW1lKCRwb3N0WyJtbV91c2VybmFtZSJdKTsKCQkJCX0KCQkJCQoJCQkJJHVzZXItPnNldFBob25lKCRwb3N0WyJtbV9waG9uZSJdKTsKCQkJCSR1c2VyLT5zZXROb3RlcygkcG9zdFsibW1fbm90ZXMiXSk7CgkJCQkKCQkJCS8vIGJpbGxpbmcgaW5mbwoJCQkJJHVzZXItPnNldEJpbGxpbmdBZGRyZXNzKCRwb3N0WyJtbV9iaWxsaW5nX2FkZHJlc3MiXSk7CgkJCQkkdXNlci0+c2V0QmlsbGluZ0NpdHkoJHBvc3RbIm1tX2JpbGxpbmdfY2l0eSJdKTsKCQkJCSR1c2VyLT5zZXRCaWxsaW5nU3RhdGUoJHBvc3RbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSk7CgkJCQkkdXNlci0+c2V0QmlsbGluZ1ppcENvZGUoJHBvc3RbIm1tX2JpbGxpbmdfemlwX2NvZGUiXSk7CgkJCQkkdXNlci0+c2V0QmlsbGluZ0NvdW50cnkoJHBvc3RbIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSJdKTsKCQkJCQoJCQkJLy8gc2hpcHBpbmcgaW5mbwoJCQkJJHVzZXItPnNldFNoaXBwaW5nQWRkcmVzcygkcG9zdFsibW1fc2hpcHBpbmdfYWRkcmVzcyJdKTsKCQkJCSR1c2VyLT5zZXRTaGlwcGluZ0NpdHkoJHBvc3RbIm1tX3NoaXBwaW5nX2NpdHkiXSk7CgkJCQkkdXNlci0+c2V0U2hpcHBpbmdTdGF0ZSgkcG9zdFsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSk7CgkJCQkkdXNlci0+c2V0U2hpcHBpbmdaaXBDb2RlKCRwb3N0WyJtbV9zaGlwcGluZ196aXBfY29kZSJdKTsKCQkJCSR1c2VyLT5zZXRTaGlwcGluZ0NvdW50cnkoJHBvc3RbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXSk7CgkJCQkKCQkJCWlmKGlzc2V0KCRwb3N0WyJtbV9uZXdfcGFzc3dvcmQiXSkgJiYgJHBvc3RbIm1tX25ld19wYXNzd29yZCJdICE9ICIiKSAKCQkJCXsKCQkJCQkkdXNlci0+c2V0UGFzc3dvcmQoJHBvc3RbIm1tX25ld19wYXNzd29yZCJdKTsKCQkJCX0KCQkJCQoJCQkJJHJlc3VsdCA9ICR1c2VyLT5jb21taXREYXRhKCk7CgkJCQkKCQkJCWlmKCRyZXN1bHQtPnR5cGUgPT0gTU1fUmVzcG9uc2U6OiRTVUNDRVNTKSAKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJNZW1iZXIgJyIuJHVzZXItPmdldEVtYWlsKCkuIicgdXBkYXRlZCBzdWNjZXNzZnVsbHkiKTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgdXBkYXRpbmcgbWVtYmVyIHdpdGggSUQgJyIuJHBvc3RbIm1tX2lkIl0uIiciLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgdXBkYXRpbmcgbWVtYmVyLiBJRCBpcyByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVtaW5kZXIoJHBvc3QpCgl7CgkJaWYoIWlzc2V0KCRwb3N0WyJ1c2VyX2lkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTWVtYmVyIElEIGlzIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRwb3N0WyJ1c2VyX2lkIl0pOwoJCQoJCWlmKCEkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBtZW1iZXIgSUQgJ3skcG9zdFsidXNlcl9pZCJdfScuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vc2V0IGEgbmV3IHBhc3N3b3JkIGZvciB0aGUgdXNlcgoJCU1NX1VzZXI6OmdlbmVyYXRlQW5kU3RvcmVGb3Jnb3RQYXNzd29yZEhhc2goJHVzZXIpOwoJCQoJCSRtZW1iZXIgPSBnZXRfdXNlcl9ieV9lbWFpbCgkdXNlci0+Z2V0VXNlcm5hbWUoKSk7CgkJCgkJJGVtYWlsID0gbmV3IE1NX0VtYWlsKCk7CgkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmdldERlZmF1bHQoKTsKCQkkY29udGV4dCA9IG5ldyBNTV9Db250ZXh0KCR1c2VyLCAkZW1wbG95ZWUpOwoJCQoJCSRlbWFpbC0+c2V0Q29udGV4dCgkY29udGV4dCk7CgkJJGVtYWlsLT5zZXRTdWJqZWN0KE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0ZPUkdPVF9QQVNTV09SRF9TVUJKRUNUKSk7CgkJJGVtYWlsLT5zZXRCb2R5KE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0ZPUkdPVF9QQVNTV09SRF9CT0RZKSk7CgkJCgkJJGZpcnN0TmFtZSA9ICR1c2VyLT5nZXRGaXJzdE5hbWUoKTsKCQkkbmFtZSA9ICghZW1wdHkoJGZpcnN0TmFtZSkpID8gJGZpcnN0TmFtZSA6ICR1c2VyLT5nZXRVc2VybmFtZSgpOwoJCSRlbWFpbC0+c2V0VG9OYW1lKCRuYW1lKTsKCQkkZW1haWwtPnNldFRvQWRkcmVzcygkdXNlci0+Z2V0RW1haWwoKSk7CgkJJGVtYWlsLT5zZXRGcm9tTmFtZSgkZW1wbG95ZWUtPmdldERpc3BsYXlOYW1lKCkpOwoJCSRlbWFpbC0+c2V0RnJvbUFkZHJlc3MoJGVtcGxveWVlLT5nZXRFbWFpbCgpKTsKCQkkcmVzcG9uc2UgPSAkZW1haWwtPnNlbmQoKTsKCQkKCQlyZXR1cm4gJHJlc3BvbnNlOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNlbmRXZWxjb21lRW1haWwoJHBvc3QpCgl7CgkJaWYoIWlzc2V0KCRwb3N0WyJ1c2VyX2lkIl0pKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTWVtYmVyIElEIGlzIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHBvc3RbInVzZXJfaWQiXSk7CgkKCQlpZighJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgbWVtYmVyIElEICd7JHBvc3RbInVzZXJfaWQiXX0nLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCSR1c2VyLT5zZW5kV2VsY29tZUVtYWlsKCk7CgkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gbG9naW5Bc01lbWJlcigkcG9zdCkKCXsKCQlpZighaXNzZXQoJHBvc3RbInVzZXJfaWQiXSkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJNZW1iZXIgSUQgaXMgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCgkJJHVzZXIgPSBuZXcgTU1fVXNlcigkcG9zdFsidXNlcl9pZCJdKTsKCQoJCWlmKCEkdXNlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBtZW1iZXIgSUQgJ3skcG9zdFsidXNlcl9pZCJdfScuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIGNoZWNrIGlmIGFuIGFkbWluaXN0cmF0b3IgaXMgbG9nZ2VkIGluCgkJZ2xvYmFsICRjdXJyZW50X3VzZXI7CgkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmZpbmRCeVVzZXJJZCgkY3VycmVudF91c2VyLT5JRCk7CgkJaWYoaXNfdXNlcl9sb2dnZWRfaW4oKSAmJiAkZW1wbG95ZWUtPmNhbkxvZ2luQXNNZW1iZXIoKSkKCQl7CgkJCXdwX3NldF9jdXJyZW50X3VzZXIoJHVzZXItPmdldElkKCksICR1c2VyLT5nZXRVc2VybmFtZSgpKTsKCQkJd3Bfc2V0X2F1dGhfY29va2llKCR1c2VyLT5nZXRJZCgpKTsKCQkJZG9fYWN0aW9uKCd3cF9sb2dpbicsICR1c2VyLT5nZXRVc2VybmFtZSgpKTsgCiAKCQkJLy8gU3RhcnQgb2YgZGV0ZXJtaW5hdGlvbiBvZiBob21lIHBhZ2UgdXJsIAoJCQkkcmVkaXJlY3RfdG8gPSBudWxsOwoJCQlpZigkdXNlci0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokRVhQSVJFRCkKCQkJeyAKCQkJCSRyZWRpcmVjdF90byA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokRVJST1IsIE1NX0Vycm9yOjokQUNDT1VOVF9FWFBJUkVELCAkdXNlcik7CgkJCX0KCQkJZWxzZSBpZigkdXNlci0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQpCgkJCXsgCgkJCQkkcmVkaXJlY3RfdG8gPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SLCBNTV9FcnJvcjo6JEFDQ09VTlRfQ0FOQ0VMRUQsICR1c2VyKTsKCQkJfQoJCQllbHNlIGlmKCR1c2VyLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRMT0NLRUQpCgkJCXsgCgkJCQkkcmVkaXJlY3RfdG8gPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SLCBNTV9FcnJvcjo6JEFDQ09VTlRfTE9DS0VELCAkdXNlcik7CgkJCX0KCQkJZWxzZSBpZigkdXNlci0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokT1ZFUkRVRSkKCQkJewoJCQkJJHJlZGlyZWN0X3RvID0gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldFVybChNTV9Db3JlUGFnZVR5cGU6OiRNWV9BQ0NPVU5ULCAiIiwgJHVzZXIpOwoJCQl9IAoJCQllbHNlCgkJCXsgCgkJCQkkc2V0dGluZyA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX09OX0xPR0lOX1VTRV9XUF9GUk9OVFBBR0UpOwoJCQkJaWYoJHNldHRpbmcgPT0gIjEiKQoJCQkJewoJCQkJCSRyZWRpcmVjdF90byA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oInNpdGV1cmwiKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkcmVkaXJlY3RfdG8gPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JE1FTUJFUl9IT01FX1BBR0UsICIiLCAkdXNlcik7CgkJCQl9ICAKCQkJfSAgCgkJCQoJCQlpZihpc19udWxsKCRyZWRpcmVjdF90bykgfHwgZW1wdHkoJHJlZGlyZWN0X3RvKSkKCQkJewoJCQkJJHJlZGlyZWN0X3RvID0gYWRtaW5fdXJsKCcvaG9tZScpOyAKCQkJfSAKCQkJLy8gZW5kIG9mIGhvbWUgcGFnZSB1cmwgZGV0ZXJtaW5hdGlvbgoJCQkKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVkaXJlY3RfdG8pOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiWW91IGRvbid0IGhhdmUgdGhlIGFwcHJvcHJpYXRlIHBlcm1pc3Npb25zIHRvIGxvZ2luIGFzIHRoaXMgbWVtYmVyIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY2hhbmdlTWVtYmVyc2hpcFN0YXR1cygkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsibW1faWQiXSkgJiYgaXNzZXQoJHBvc3RbIm1tX25ld19zdGF0dXMiXSkpCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRwb3N0WyJtbV9pZCJdKTsKCQkJCgkJCXJldHVybiBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpjaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKCR1c2VyLCAkcG9zdFsibW1fbmV3X3N0YXR1cyJdKTsKCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2hhbmdpbmcgbWVtYmVyc2hpcCBzdGF0dXMuIE1lbWJlciBJRCBhbmQgbmV3IHN0YXR1cyBhcmUgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY2hhbmdlTWVtYmVyc2hpcCgkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsibW1faWQiXSkgJiYgaXNzZXQoJHBvc3RbIm1tX25ld19tZW1iZXJzaGlwIl0pKQoJCXsKCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkcG9zdFsibW1faWQiXSk7CgkJCSRpZ25vcmVQYXltZW50U2VydmljZUVycm9ycyA9IChpc3NldCgkcG9zdFsibW1faWdub3JlX3BheW1lbnRfc2VydmljZV9lcnJvcnMiXSkgJiYgKCRwb3N0WyJtbV9pZ25vcmVfcGF5bWVudF9zZXJ2aWNlX2Vycm9ycyJdID09ICJ0cnVlIikpP3RydWU6ZmFsc2U7CgkJCXJldHVybiBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpjaGFuZ2VNZW1iZXJzaGlwKCR1c2VyLCAkcG9zdFsibW1fbmV3X21lbWJlcnNoaXAiXSwkaWdub3JlUGF5bWVudFNlcnZpY2VFcnJvcnMpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjaGFuZ2luZyBtZW1iZXJzaGlwLiBNZW1iZXIgSUQgYW5kIG5ldyBtZW1iZXJzaGlwIGFyZSByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBjaGFuZ2VCdW5kbGVTdGF0dXMoJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbIm1tX2lkIl0pICYmIGlzc2V0KCRwb3N0WyJtbV9idW5kbGVfaWQiXSkgJiYgaXNzZXQoJHBvc3RbIm1tX25ld19zdGF0dXMiXSkpCgkJewoJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRwb3N0WyJtbV9pZCJdKTsKCQkJJGJ1bmRsZSA9IG5ldyBNTV9CdW5kbGUoJHBvc3RbIm1tX2J1bmRsZV9pZCJdKTsKCQkJJG5ld1N0YXR1cyA9IGludHZhbCgkcG9zdFsibW1fbmV3X3N0YXR1cyJdKTsKCQkJCgkJCXJldHVybiBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpjaGFuZ2VCdW5kbGVTdGF0dXMoJHVzZXIsICRidW5kbGUsICRuZXdTdGF0dXMpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjaGFuZ2luZyBidW5kbGUgc3RhdHVzLiBNZW1iZXIgSUQsIGJ1bmRsZSBJRCBhbmQgbmV3IGJ1bmRsZSBzdGF0dXMgYXJlIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNhbmNlbFN1YnNjcmlwdGlvbkZvck9yZGVySXRlbSgkb3JkZXJJdGVtKQoJewoJCWlmKCRvcmRlckl0ZW0tPmlzVmFsaWQoKSkKCQl7CgkJCSRyZXN1bHQgPSBNTV9QYXltZW50VXRpbHM6OmNhbmNlbFN1YnNjcmlwdGlvbkZvck9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQkJCQoJCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQkJewoJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCX0KCQkJCQoJCQkkcmVzdWx0ID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6cmV2b2tlQWNjZXNzRm9yT3JkZXJJdGVtKCRvcmRlckl0ZW0pOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3VsdCkpCgkJCXsKCQkJCXJldHVybiAkcmVzdWx0OwoJCQl9CgkJCQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTdWJzY3JpcHRpb24gY2FuY2VsZWQgc3VjY2Vzc2Z1bGx5LiIpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjYW5jZWxsaW5nIHN1YnNjcmlwdGlvbi4gT3JkZXIgSXRlbSB7JHBvc3RbIm1tX29yZGVyX2l0ZW1faWQiXX0gaXMgaW52YWxpZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiB1cGRhdGVTdWJzY3JpcHRpb25CaWxsaW5nSW5mbygkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsibW1fb3JkZXJfaXRlbV9pZCJdKSkKCQl7CgkJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRwb3N0WyJtbV9vcmRlcl9pdGVtX2lkIl0pOwoJCQkKCQkJJGJpbGxpbmdBZGRyZXNzID0gbmV3IE1NX0N1c3RvbWVyQWRkcmVzcygpOwoKCQkJJG9yZGVyID0gTU1fT3JkZXI6OmNyZWF0ZSgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQkkcGF5bWVudFNlcnZpY2UgPSAkb3JkZXItPmdldFBheW1lbnRNZXRob2QoKTsKCQkJCgkJCWlmICgoJHBheW1lbnRTZXJ2aWNlIGluc3RhbmNlb2YgTU1fUGF5bWVudFNlcnZpY2UpICYmICgkcGF5bWVudFNlcnZpY2UtPnN1cHBvcnRzRmVhdHVyZShNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpUT0tFTl9FWENIQU5HRSkpICYmICFlbXB0eSgkcG9zdFsnbW1fZmllbGRfcGF5bWVudF90b2tlbiddKSkKCQkJewoJCQkJJGNhcmRJbmZvID0gbmV3IE1NX1BheW1lbnRUb2tlbigkcG9zdFsibW1fZmllbGRfcGF5bWVudF90b2tlbiJdKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkY2FyZEluZm8gPSBuZXcgTU1fQ2FyZEluZm8oKTsKCQkJCSRjYXJkSW5mby0+c2V0Q2FyZE51bWJlcigkcG9zdFsibW1fZmllbGRfY2NfbnVtYmVyIl0pOwoJCQkJJGNhcmRJbmZvLT5zZXRFeHBpcmF0aW9uTW9udGgoJHBvc3RbIm1tX2ZpZWxkX2NjX2V4cF9tb250aCJdKTsKCQkJCSRjYXJkSW5mby0+c2V0RXhwaXJhdGlvblllYXIoJHBvc3RbIm1tX2ZpZWxkX2NjX2V4cF95ZWFyIl0pOwoJCQkJJGNhcmRJbmZvLT5zZXRDVlYoJHBvc3RbIm1tX2ZpZWxkX2NjX2N2diJdKTsKCQkJfQoJCQkKCQkJJGJpbGxpbmdBZGRyZXNzLT5zZXRBZGRyZXNzTGluZTEoJHBvc3RbIm1tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzcyJdKTsKCQkJJGJpbGxpbmdBZGRyZXNzLT5zZXRDaXR5KCRwb3N0WyJtbV9maWVsZF9iaWxsaW5nX2NpdHkiXSk7CgkJCSRiaWxsaW5nQWRkcmVzcy0+c2V0U3RhdGUoJHBvc3RbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSk7CgkJCSRiaWxsaW5nQWRkcmVzcy0+c2V0UG9zdGFsQ29kZSgkcG9zdFsibW1fZmllbGRfYmlsbGluZ196aXAiXSk7CgkJCSRiaWxsaW5nQWRkcmVzcy0+c2V0Q291bnRyeSgkcG9zdFsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0pOwoJCQkKCQkJJHJlc3VsdCA9IE1NX1BheW1lbnRVdGlsczo6dXBkYXRlU3Vic2NyaXB0aW9uQmlsbGluZ0luZm8oJG9yZGVySXRlbSwgJGNhcmRJbmZvLCAkYmlsbGluZ0FkZHJlc3MpOwoJCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkgCgkJCXsKCQkJCS8vIGNoYW5nZSBzdGF0dXMgb2YgbWVtYmVyc2hpcCBvciBidW5kbGUgdG8gYWN0aXZlCgkJCQkkb3JkZXJJdGVtQWNjZXNzID0gTU1fT3JkZXJJdGVtQWNjZXNzOjpnZXRBY2Nlc3NCeU9yZGVySXRlbSgkb3JkZXJJdGVtLT5nZXRJZCgpKTsKCQkKCQkJCWlmKCRvcmRlckl0ZW1BY2Nlc3MtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkdXNlciA9IG5ldyBNTV9Vc2VyKE1NX09yZGVyOjpnZXRVc2VySWRCeU9yZGVySWQoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKSk7CgkJCQkJCQoJCQkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQlpZigkb3JkZXJJdGVtQWNjZXNzLT5nZXRBY2Nlc3NUeXBlKCkgPT0gTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCkKCQkJCQkJewoJCQkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmNoYW5nZU1lbWJlcnNoaXBTdGF0dXMoJHVzZXIsIE1NX1N0YXR1czo6JEFDVElWRSk7CgkJCQkJCX0KCQkJCQkJZWxzZSBpZigkb3JkZXJJdGVtQWNjZXNzLT5nZXRBY2Nlc3NUeXBlKCkgPT0gTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfQlVORExFKQoJCQkJCQl7CgkJCQkJCQkkYnVuZGxlID0gbmV3IE1NX0J1bmRsZSgkb3JkZXJJdGVtQWNjZXNzLT5nZXRBY2Nlc3NUeXBlSWQoKSk7CgkJCQkJCQkJCgkJCQkJCQlpZigkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJCQkJCQl7CgkJCQkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmNoYW5nZUJ1bmRsZVN0YXR1cygkdXNlciwgJGJ1bmRsZSwgTU1fU3RhdHVzOjokQUNUSVZFKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJJHJlc3VsdC0+dHlwZSA9IE1NX1Jlc3BvbnNlOjokU1VDQ0VTUzsKCQkJCSRyZXN1bHQtPm1lc3NhZ2UgPSAiQmlsbGluZyBkZXRhaWxzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5IjsKCQkJfQoJCQkKCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHVwZGF0aW5nIHN1YnNjcmlwdGlvbiBiaWxsaW5nIGRldGFpbHMuIE9yZGVyIGl0ZW0gSUQgYXJlIHJlcXVpcmVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGVkaXRCdW5kbGVDb25maWd1cmF0aW9uKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJtZW1iZXJfaWQiXSkgJiYgaXNzZXQoJHBvc3RbImJ1bmRsZV9pZCJdKSkKCQl7CgkJCSRpbmZvID0gbmV3IHN0ZENsYXNzKCk7CgkJCSRpbmZvLT5tZW1iZXJJZCA9ICRwb3N0WyJtZW1iZXJfaWQiXTsKCQkJJGluZm8tPmJ1bmRsZUlkID0gJHBvc3RbImJ1bmRsZV9pZCJdOwoJCQkKCQkJJGRhdGEgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iLyIuTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0FDQ0VTU19SSUdIVFMuIi5kaWFsb2cucGhwIiwgJGluZm8pOwoJCQkKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkZGF0YSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGVkaXRpbmcgY2FsY3VsYXRpb24gbWV0aG9kLiBNZW1iZXIgSUQgYW5kIGJ1bmRsZSBJRCBhcmUgcmVxdWlyZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2F2ZUJ1bmRsZUNvbmZpZ3VyYXRpb24oJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbIm1lbWJlcl9pZCJdKSAmJiBpc3NldCgkcG9zdFsiYnVuZGxlX2lkIl0pKQoJCXsKCQkJJGFwcGxpZWRCdW5kbGUgPSBNTV9BcHBsaWVkQnVuZGxlOjpnZXRBcHBsaWVkQnVuZGxlKCRwb3N0WyJtZW1iZXJfaWQiXSwgJHBvc3RbImJ1bmRsZV9pZCJdKTsKCQkJCgkJCWlmKCRhcHBsaWVkQnVuZGxlLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCWlmKGlzc2V0KCRwb3N0WyJtbV9jYWxjX21ldGhvZCJdKSkKCQkJCXsKCQkJCQkkYXBwbGllZEJ1bmRsZS0+c2V0RGF5c0NhbGNNZXRob2QoJHBvc3RbIm1tX2NhbGNfbWV0aG9kIl0pOwoJCQkJCQoJCQkJCXN3aXRjaCgkcG9zdFsibW1fY2FsY19tZXRob2QiXSkKCQkJCQl7CgkJCQkJCWNhc2UgTU1fRGF5c0NhbGN1bGF0aW9uVHlwZXM6OiRDVVNUT01fREFURToKCQkJCQkJCSRjYWxjTWV0aG9kQ3VzdG9tRGF0ZSA9IE1NX1V0aWxzOjpkYXRlVG9VVEMoJHBvc3RbJ21tX2N1c3RvbV9kYXRlJ10sICJZLW0tZCBIOmkiLCAiMDA6MDA6MDAiKTsKCQkJCQkJCSRhcHBsaWVkQnVuZGxlLT5zZXREYXlzQ2FsY1ZhbHVlKCRjYWxjTWV0aG9kQ3VzdG9tRGF0ZSk7CgkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQljYXNlIE1NX0RheXNDYWxjdWxhdGlvblR5cGVzOjokRklYRUQ6CgkJCQkJCQkkYXBwbGllZEJ1bmRsZS0+c2V0RGF5c0NhbGNWYWx1ZSgkcG9zdFsibW1fZml4ZWQiXSk7CgkJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCWlmKCRhcHBsaWVkQnVuZGxlLT5kb2VzRXhwaXJlKCkgJiYgaXNzZXQoJHBvc3RbIm1tX2V4cGlyYXRpb25fZGF0ZSJdKSkKCQkJCXsKCQkJCQkkZXhwaXJhdGlvbkRhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvVVRDKCRwb3N0WydtbV9leHBpcmF0aW9uX2RhdGUnXSwgIlktbS1kIEg6aSIsICIwMDowMDowMCIpOwoJCQkJCSRhcHBsaWVkQnVuZGxlLT5zZXRFeHBpcmF0aW9uRGF0ZSgkZXhwaXJhdGlvbkRhdGUpOwoJCQkJfQoJCQkJCgkJCQlpZigkYXBwbGllZEJ1bmRsZS0+aXNQZW5kaW5nQ2FuY2VsbGF0aW9uKCkgJiYgaXNzZXQoJHBvc3RbIm1tX2NhbmNlbGxhdGlvbl9kYXRlIl0pKQoJCQkJewoJCQkJCSRjYW5jZWxsYXRpb25EYXRlID0gTU1fVXRpbHM6OmRhdGVUb1VUQygkcG9zdFsnbW1fY2FuY2VsbGF0aW9uX2RhdGUnXSwgIlktbS1kIEg6aSIsICIwMDowMDowMCIpOwoJCQkJCSRhcHBsaWVkQnVuZGxlLT5zZXRDYW5jZWxsYXRpb25EYXRlKCRjYW5jZWxsYXRpb25EYXRlKTsKCQkJCX0KCQkJCQoJCQkJJGFwcGxpZWRCdW5kbGUtPmNvbW1pdERhdGEoKTsKCQkJCQoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQnVuZGxlIGNvbmZpZ3VyYXRpb24gc2F2ZWQgc3VjY2Vzc2Z1bGx5Iik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBidW5kbGUgY29uZmlndXJhdGlvbi4gVXNlciBJRCBhbmQgYnVuZGxlIElEIGFyZSByZXF1aXJlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsJCgkJfQoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIGRlbGV0ZU1lbWJlcigkcG9zdCkgCgl7CgkJJHVzZXIgPSBuZXcgTU1fVXNlcigkcG9zdFsiaWQiXSk7CgkJCgkJaWYoJHVzZXItPmlzVmFsaWQoKSkgCgkJewoJCQkkcmVzdWx0ID0gJHVzZXItPmRlbGV0ZSgpOwoJCQkKCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBkZWxldGUgbWVtYmVyLiBObyBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2QgaXMgY2FsbGVkIHdoZW4gYW4gcmViaWxsIHBheW1lbnQgZGVsY2xpbmVkIGV2ZW50IGlzIGRpc3BhdGNoZWQuIFRoaXMgbWV0aG9kIGlzIHJlZ2lzdGVyZCAKCSAqIGFzIGEgbGlzdGVuZXIgZm9yIHRoYXQgZXZlbnQgaW4gdGhlIE1NIHBsdWdpbiBpbmRleC5waHAKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGhhbmRsZVJlYmlsbFBheW1lbnREZWNsaW5lZEV2ZW50KCRwYXJhbXMpCgl7CgkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCQoJCWlmKGlzc2V0KCRwYXJhbXNbIm9yZGVyX2l0ZW1faWQiXSkpCgkJewoJCQkkb3JkZXJJdGVtID0gbmV3IE1NX09yZGVySXRlbSgkcGFyYW1zWyJvcmRlcl9pdGVtX2lkIl0pOwoJCQkKCQkJaWYoJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkb3JkZXJJdGVtQWNjZXNzID0gTU1fT3JkZXJJdGVtQWNjZXNzOjpnZXRBY2Nlc3NCeU9yZGVySXRlbSgkb3JkZXJJdGVtLT5nZXRJZCgpKTsKCQkJCQoJCQkJaWYoJG9yZGVySXRlbUFjY2Vzcy0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpKTsKCQkJCQkKCQkJCQlpZigkdXNlci0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJaWYoJG9yZGVySXRlbUFjY2Vzcy0+Z2V0QWNjZXNzVHlwZSgpID09IE1NX09yZGVySXRlbUFjY2Vzczo6JEFDQ0VTU19UWVBFX01FTUJFUlNISVApCgkJCQkJCXsKCQkJCQkJCWlmKCR1c2VyLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRBQ1RJVkUpCgkJCQkJCQl7CgkJCQkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmNoYW5nZU1lbWJlcnNoaXBTdGF0dXMoJHVzZXIsIE1NX1N0YXR1czo6JE9WRVJEVUUpOwoJCQkJCQkJfQoJCQkJCQkJZWxzZSAKCQkJCQkJCXsKCQkJCQkJCQkkcmVzdWx0ID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJZWxzZSBpZigkb3JkZXJJdGVtQWNjZXNzLT5nZXRBY2Nlc3NUeXBlKCkgPT0gTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfQlVORExFKQoJCQkJCQl7CgkJCQkJCQkkYnVuZGxlID0gbmV3IE1NX0J1bmRsZSgkb3JkZXJJdGVtQWNjZXNzLT5nZXRBY2Nlc3NUeXBlSWQoKSk7CgkJCQkJCQkKCQkJCQkJCWlmKCRidW5kbGUtPmlzVmFsaWQoKSkKCQkJCQkJCXsKCQkJCQkJCQlpZigkYnVuZGxlLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRBQ1RJVkUpCgkJCQkJCQkJewoJCQkJCQkJCQkkcmVzdWx0ID0gTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6Y2hhbmdlQnVuZGxlU3RhdHVzKCR1c2VyLCAkYnVuZGxlLCBNTV9TdGF0dXM6OiRPVkVSRFVFKTsKCQkJCQkJCQl9CgkJCQkJCQkJZWxzZSAKCQkJCQkJCQl7CgkJCQkJCQkJCSRyZXN1bHQgPSBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQllbHNlCgkJCQkJCQl7CgkJCQkJCQkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgaGFuZGxpbmcgcmViaWxsIHBheW1lbnQgZGVjbGluZWQgZXZlbnQuIEludmFsaWQgYnVuZGxlIElEICd7JG9yZGVySXRlbUFjY2Vzcy0+Z2V0QWNjZXNzVHlwZUlkKCl9Jy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIAoJCQkJCXsKCQkJCQkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgaGFuZGxpbmcgcmViaWxsIHBheW1lbnQgZGVjbGluZWQgZXZlbnQuIFVuYWJsZSB0byBsb2NhdGUgdmFsaWQgbWVtYmVyIGFzc29jaWF0ZCB3aXRoIG9yZGVyIGl0ZW0gSUQgJ3skcGFyYW1zWyJvcmRlcl9pdGVtX2lkIl19Jy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCSRyZXN1bHQgPSBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGhhbmRsaW5nIHJlYmlsbCBwYXltZW50IGRlY2xpbmVkIGV2ZW50LiBVbmFibGUgdG8gbG9jYXRlIGFjY2VzcyBhc3NvY2lhdGVkIHdpdGggb3JkZXIgaXRlbSBJRCAneyRwYXJhbXNbIm9yZGVyX2l0ZW1faWQiXX0nLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgaGFuZGxpbmcgcmViaWxsIHBheW1lbnQgZGVjbGluZWQgZXZlbnQuIE9yZGVyIGl0ZW0gSUQgJ3skcGFyYW1zWyJvcmRlcl9pdGVtX2lkIl19JyBpcyBpbnZhbGlkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQkkcmVzdWx0ID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBoYW5kbGluZyByZWJpbGwgcGF5bWVudCBkZWNsaW5lZCBldmVudC4gT3JkZXIgaXRlbSBJRCBpcyByZXF1aXJlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlyZXR1cm4gJHJlc3VsdDsKCX0KCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIGEgcmViaWxsIHBheW1lbnQgZXZlbnQgaXMgZGlzcGF0Y2hlZC4gSXQgZW5zdXJlcyB0aGF0IGEgY3VzdG9tZXJzIGFjY2VzcyBpcyBzZXQgdG8gCgkgKiBhY3RpdmUgd2hlbiB0aGlzIGV2ZW50IGlzIHJlY2VpZXZlZC4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGhhbmRsZVJlYmlsbFBheW1lbnRSZWNlaXZlZEV2ZW50KCRwYXJhbXMpCgl7CgkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCgkJaWYoaXNzZXQoJHBhcmFtc1sib3JkZXJfaXRlbV9pZCJdKSkKCQl7CgkJCSRvcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRwYXJhbXNbIm9yZGVyX2l0ZW1faWQiXSk7CgkJCQkKCQkJaWYoJG9yZGVySXRlbS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkb3JkZXJJdGVtQWNjZXNzID0gTU1fT3JkZXJJdGVtQWNjZXNzOjpnZXRBY2Nlc3NCeU9yZGVySXRlbSgkb3JkZXJJdGVtLT5nZXRJZCgpKTsKCQoJCQkJaWYoJG9yZGVySXRlbUFjY2Vzcy0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSR1c2VyID0gbmV3IE1NX1VzZXIoTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpKTsKCQkJCQkJCgkJCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCWlmKCRvcmRlckl0ZW1BY2Nlc3MtPmdldEFjY2Vzc1R5cGUoKSA9PSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQKQoJCQkJCQl7CgkJCQkJCQlpZigkdXNlci0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokQUNUSVZFICYmICR1c2VyLT5nZXRTdGF0dXMoKSAhPSBNTV9TdGF0dXM6OiRMT0NLRUQpCgkJCQkJCQl7CgkJCQkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmNoYW5nZU1lbWJlcnNoaXBTdGF0dXMoJHVzZXIsIE1NX1N0YXR1czo6JEFDVElWRSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJZWxzZSBpZigkb3JkZXJJdGVtQWNjZXNzLT5nZXRBY2Nlc3NUeXBlKCkgPT0gTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfQlVORExFKQoJCQkJCQl7CgkJCQkJCQkkYnVuZGxlID0gbmV3IE1NX0J1bmRsZSgkb3JkZXJJdGVtQWNjZXNzLT5nZXRBY2Nlc3NUeXBlSWQoKSk7CgkJCQkJCQkJCgkJCQkJCQlpZigkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJCQkJCQl7CgkJCQkJCQkJaWYoJGJ1bmRsZS0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokQUNUSVZFKQoJCQkJCQkJCXsKCQkJCQkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmNoYW5nZUJ1bmRsZVN0YXR1cygkdXNlciwgJGJ1bmRsZSwgTU1fU3RhdHVzOjokQUNUSVZFKTsKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCQllbHNlCgkJCQkJCQl7CgkJCQkJCQkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgaGFuZGxpbmcgcmViaWxsIHBheW1lbnQgcmVjZWl2ZWQgZXZlbnQuIEludmFsaWQgYnVuZGxlIElEICd7JG9yZGVySXRlbUFjY2Vzcy0+Z2V0QWNjZXNzVHlwZUlkKCl9Jy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkcmVzdWx0ID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBoYW5kbGluZyByZWJpbGwgcGF5bWVudCByZWNlaXZlZCBldmVudC4gVW5hYmxlIHRvIGxvY2F0ZSB2YWxpZCBtZW1iZXIgYXNzb2NpYXRkIHdpdGggb3JkZXIgaXRlbSBJRCAneyRwYXJhbXNbIm9yZGVyX2l0ZW1faWQiXX0nLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkcmVzdWx0ID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBoYW5kbGluZyByZWJpbGwgcGF5bWVudCByZWNlaXZlZCBldmVudC4gVW5hYmxlIHRvIGxvY2F0ZSBhY2Nlc3MgYXNzb2NpYXRlZCB3aXRoIG9yZGVyIGl0ZW0gSUQgJ3skcGFyYW1zWyJvcmRlcl9pdGVtX2lkIl19Jy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRyZXN1bHQgPSBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGhhbmRsaW5nIHJlYmlsbCBwYXltZW50IHJlY2VpdmVkIGV2ZW50LiBPcmRlciBpdGVtIElEICd7JHBhcmFtc1sib3JkZXJfaXRlbV9pZCJdfScgaXMgaW52YWxpZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQllbHNlCgkJewoJCQkkcmVzdWx0ID0gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBoYW5kbGluZyByZWJpbGwgcGF5bWVudCByZWNlaXZlZCBldmVudC4gT3JkZXIgaXRlbSBJRCBpcyByZXF1aXJlZCIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQoJCXJldHVybiAkcmVzdWx0OwoJfQoJCgkKCS8qKgoJICogT3ZlcnJpZGUgYmFzZSBzaG93RGlhbG9nIG1ldGhvZCB0byBhbGxvdyBjZXJ0YWluIGRpYWxvZ3MgdG8gYmUgZGlzcGxheWVkCgkgKiB7QGluaGVyaXREb2N9CgkgKiBAc2VlIE1NX1ZpZXc6OnNob3dEaWFsb2coKQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gc2hvd0RpYWxvZygkcG9zdCkKCXsKCQkkaW5mbyA9ICR0aGlzLT5jcmVhdGVWYWx1ZU9iamVjdEZyb21SZXF1ZXN0KCRwb3N0KTsKCQkkYWxsb3dlZE1vZHVsZXMgPSBhcnJheShNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfQUNDRVNTX1JJR0hUUyk7CgkJJHJlcXVlc3RlZE1vZHVsZSA9IChpc3NldCgkcG9zdFtzZWxmOjokTU1fSlNNT0RVTEVdKSk/JHBvc3Rbc2VsZjo6JE1NX0pTTU9EVUxFXToiIjsKCQlpZiAoIWVtcHR5KCRyZXF1ZXN0ZWRNb2R1bGUpICYmIGluX2FycmF5KCRyZXF1ZXN0ZWRNb2R1bGUsJGFsbG93ZWRNb2R1bGVzKSkKCQl7CgkJCXJldHVybiBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iL3skcmVxdWVzdGVkTW9kdWxlfS5kaWFsb2cucGhwIiwgJGluZm8pOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gcGFyZW50OjpzaG93RGlhbG9nKCRwb3N0KTsKCQl9Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGZvcmdldE1lbWJlcigkcG9zdCkKCXsKCSAgICBpZighaXNzZXQoJHBvc3RbInVzZXJfaWQiXSkpCgkgICAgewoJICAgICAgICByZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKF9tbXQoIk1lbWJlciBJRCBpcyByZXF1aXJlZCIpLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCSAgICB9CgkgICAgCgkgICAgJHVzZXIgPSBuZXcgTU1fVXNlcigkcG9zdFsidXNlcl9pZCJdKTsKCSAgICAKCSAgICBpZighJHVzZXItPmlzVmFsaWQoKSkKCSAgICB7CgkgICAgICAgIHJldHVybiBuZXcgTU1fUmVzcG9uc2Uoc3ByaW50ZihfbW10KCJJbnZhbGlkIE1lbWJlciBJRCAlcyIpLCRwb3N0WyJ1c2VyX2lkIl0pLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCSAgICB9CgkgICAgCgkgICAgLy9UT0RPOiBjaGVjayBpZiB0aGVyZSBhcmUgb3RoZXIgc2VjdXJpdHkgY29uY2VybnMgYmFzZWQgb24gZW1wbG95ZWUgcGVybWlzc2lvbnMKCSAgICByZXR1cm4gJHVzZXItPmZvcmdldCgpOwoJfQogfQo=', 0, '2018-11-21 06:38:55'),
(230, 'defaultordernumbergenerator', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhlIERlZmF1bHRPcmRlck51bWJlckdlbmVyYXRvciBjbGFzcyBnZW5lcmF0ZXMgYW4gb3JkZXIgbnVtYmVyIGlkZW50aWNhbCB0byB0aGUgc2VxdWVuY2UgaWQgb2YgdGhlIG9yZGVyIG51bWJlcgogKiBQcmlvciB0byBjb21taXQsIGEgcmFuZG9tIHN0cmluZyBpcyBnZW5lcmF0ZWQgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgY29tbWl0IHJlcXVpcmVtZW50cyBvZiB0aGUgb3JkZXIgY2xhc3MKICovCmNsYXNzIE1NX0RlZmF1bHRPcmRlck51bWJlckdlbmVyYXRvciBleHRlbmRzIE1NX09yZGVyTnVtYmVyR2VuZXJhdG9yCnsKCQoJLyoqCgkgKiBHZW5lcmF0ZSBhbiBvcmRlciBudW1iZXIgcHJpb3IgdG8gdGhlIG9yZGVyIGJlaW5nIGNvbW1pdHRlZAoJICogCgkgKiBAc2VlIE1NX09yZGVyTnVtYmVyR2VuZXJhdG9yOjpwcmVDb21taXQoKQoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJlQ29tbWl0KE1NX09yZGVyICRvcmRlcikKCXsKCQkkb3JkZXJOdW1iZXIgPSAiIjsKCQlmb3IgKCRpPTA7ICRpPDMyOyAkaSsrKQoJCXsKCQkJJG9yZGVyTnVtYmVyIC49IGNocihyYW5kKDMzLDEyMikpOwoJCX0KCQlyZXR1cm4gJG9yZGVyTnVtYmVyOwoJfQoJCgkvKioKCSAqIEdlbmVyYXRlIGFuIG9yZGVyIG51bWJlciBhZnRlciB0aGUgb3JkZXIgaGFzIGJlZW4gY29tbWl0dGVkLiBCZWNhdXNlIHRoaXMgbWV0aG9kIHdpbGwgdHlwaWNhbGx5IGJlIGNhbGxlZCBmcm9tIAoJICogaW5zaWRlIGEgdHJhbnNhY3Rpb24sIHRoZSBvcmRlciB3aWxsIG5vdCBoYXZlIGJlZW4gdmFsaWRhdGVkIHlldAoJICogCgkgKiBAc2VlIE1NX09yZGVyTnVtYmVyR2VuZXJhdG9yOjpwb3N0Q29tbWl0KCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHBvc3RDb21taXQoTU1fT3JkZXIgJG9yZGVyKQoJewoJCXJldHVybiAkb3JkZXItPmdldElkKCkgKyAxMDAwOwkJCgl9Cn0KCg==', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(231, 'product', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogCiAqIE1NX1Byb2R1Y3QgaXMgYW4gZW50aXR5IGNsYXNzIHJlcHJlc2VudGluZyBhIHByb2R1Y3QgaW4gdGhlIE1lbWJlck1vdXNlIHN5c3RlbS4gVGhpcyBpcyBjb25jZXB0dWFsbHkgYSAKICogcGh5c2ljYWwgb3IgdmlydHVhbCBwcm9kdWN0IHB1cmNoYXNlZCBmb3IgY29uc3VtcHRpb24sIG9yIGEgcHJvZHVjdCByZXByZXNlbnRpbmcgYSBtZW1iZXJzaGlwIG9yIGJ1bmRsZS4KICovCgpjbGFzcyBNTV9Qcm9kdWN0IGV4dGVuZHMgTU1fRW50aXR5CnsJCglwdWJsaWMgc3RhdGljICRTQU1QTEVfUFJPRFVDVF9JRCA9IC0xMDsKCXB1YmxpYyBzdGF0aWMgJERGTFRfUFVSQ0hBU0VfQ09ORklSTUFUSU9OX01TRyA9ICJbTU1fRm9ybSB0eXBlPScxY2xpY2twdXJjaGFzZSddCkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBwdXJjaGFzZSBbTU1fRm9ybV9EYXRhIG5hbWU9J3Byb2R1Y3ROYW1lJ10/Cjxici8+PGJyLz4KWW91ciBjYXJkIHdpbGwgYmUgYmlsbGVkIFtNTV9Gb3JtX0RhdGEgbmFtZT0ndG90YWxQcmljZSddLgpbL01NX0Zvcm1dIjsKCQoJcHJpdmF0ZSAkcmVmZXJlbmNlS2V5ID0gIiI7Cglwcml2YXRlICRzdGF0dXMgPSAiMSI7Cglwcml2YXRlICRuYW1lID0gIiI7Cglwcml2YXRlICRza3UgPSAiIjsKCXByaXZhdGUgJGRlc2NyaXB0aW9uID0gIiI7Cglwcml2YXRlICRwcmljZSA9ICIiOwoJcHJpdmF0ZSAkY3VycmVuY3kgPSAiIjsKCXByaXZhdGUgJGlzU2hpcHBhYmxlRmxhZyA9ICIiOwoJcHJpdmF0ZSAkaGFzVHJpYWxGbGFnID0gIiI7Cglwcml2YXRlICRyZWJpbGxQZXJpb2QgPSAiIjsKCXByaXZhdGUgJHRyaWFsQW1vdW50ID0gIiI7Cglwcml2YXRlICR0cmlhbER1cmF0aW9uID0gIiI7Cglwcml2YXRlICRyZWJpbGxGcmVxdWVuY3kgPSAiIjsKCXByaXZhdGUgJHRyaWFsRnJlcXVlbmN5ID0gIiI7Cglwcml2YXRlICRsaW1pdFRyaWFsRmxhZyA9ICIwIjsKCXByaXZhdGUgJGxpbWl0VHJpYWxBbHRQcm9kdWN0SWQgPSAiMCI7Cglwcml2YXRlICRsaW1pdFBheW1lbnRzRmxhZyA9ICIwIjsKCXByaXZhdGUgJG51bWJlck9mUGF5bWVudHMgPSAiIjsKCXByaXZhdGUgJHB1cmNoYXNlQ29uZmlybWF0aW9uTXNnID0gIiI7Cglwcml2YXRlICRjb21taXNzaW9uUHJvZmlsZUlkID0gIi0xIjsKCQoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRpZD0iIiwgJGdldERhdGE9dHJ1ZSkKCXsKCQlpZighKCRpZCBpbnN0YW5jZW9mIE1NX1Jlc3BvbnNlKSkKCQl7CgkJCWlmKGlzc2V0KCRpZCkgJiYgKGludHZhbCgkaWQpID4gMCB8fCBpbnR2YWwoJGlkKSA9PSBzZWxmOjokU0FNUExFX1BST0RVQ1RfSUQpKQoJCQl7CgkJCQkkdGhpcy0+aWQgPSAkaWQ7CgkJCQkJCgkJCQlpZigkZ2V0RGF0YSA9PSB0cnVlKQoJCQkJewoJCQkJCSR0aGlzLT5nZXREYXRhKCk7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkaWQgPSAiIjsKCQkJfQoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgoJCWlmKCR0aGlzLT5pZCAhPSBzZWxmOjokU0FNUExFX1BST0RVQ1RfSUQpCgkJewoJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9QUk9EVUNUUy4iIFdIRVJFIGlkPSciLiR0aGlzLT5pZC4iJyI7CgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkJCgkJCWlmKCRyZXN1bHQpCgkJCXsKCQkJCSR0aGlzLT5zZXREYXRhKCRyZXN1bHQpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJCX0JCgkJfQoJCWVsc2UKCQl7IAoJCQkkdGhpcy0+aWQgPSAxOwoJCQkkdGhpcy0+cmVmZXJlbmNlS2V5ID0gInAzMjlnaSI7CgkJCSR0aGlzLT5zdGF0dXMgPSAxOwoJCQkkdGhpcy0+bmFtZSA9ICJUZXN0IFByb2R1Y3QiOwoJCQkkdGhpcy0+c2t1ID0gImExMjNkIjsKCQkJJHRoaXMtPmRlc2NyaXB0aW9uID0gIkEgdGVzdCBwcm9kdWN0IjsKCQkJJHRoaXMtPnByaWNlID0gMTAuMDA7CgkJCSR0aGlzLT5jdXJyZW5jeSA9ICJVU0QiOwoJCQkkdGhpcy0+aXNTaGlwcGFibGVGbGFnID0gMTsKCQkJJHRoaXMtPmhhc1RyaWFsRmxhZyA9IDE7CgkJCSR0aGlzLT5yZWJpbGxQZXJpb2QgPSAxOwoJCQkkdGhpcy0+dHJpYWxBbW91bnQgPSA3Ljk5OwoJCQkkdGhpcy0+dHJpYWxEdXJhdGlvbiA9IDE7CgkJCSR0aGlzLT50cmlhbEZyZXF1ZW5jeSA9ICJtb250aHMiOwoJCQkkdGhpcy0+cmViaWxsRnJlcXVlbmN5ID0gIm1vbnRocyI7CgkJCSR0aGlzLT5saW1pdFRyaWFsRmxhZyA9IDE7CgkJCSR0aGlzLT5saW1pdFRyaWFsQWx0UHJvZHVjdElkID0gMTsKCQkJJHRoaXMtPmxpbWl0UGF5bWVudHNGbGFnID0gMTsKCQkJJHRoaXMtPm51bWJlck9mUGF5bWVudHMgPSA1OwoJCQkkdGhpcy0+cHVyY2hhc2VDb25maXJtYXRpb25Nc2cgPSBNTV9Qcm9kdWN0OjokREZMVF9QVVJDSEFTRV9DT05GSVJNQVRJT05fTVNHOwoJCQkkdGhpcy0+Y29tbWlzc2lvblByb2ZpbGVJZCA9IDA7CgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEJ5UmVmZXJlbmNlS2V5KCRrZXkpCgl7CgkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgpOwoJCQoJCWlmKCFlbXB0eSgka2V5KSkKCQl7CgkJCWdsb2JhbCAkd3BkYjsKCQkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBXSEVSRSByZWZlcmVuY2Vfa2V5PSciLiRrZXkuIiciOwoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQoJCQlpZigkcmVzdWx0KQoJCQl7CgkJCQkkcHJvZHVjdC0+c2V0RGF0YSgkcmVzdWx0KTsKCQkJfQoJCQllbHNlCgkJCXsKCQkJCSRwcm9kdWN0LT5pbnZhbGlkYXRlKCk7CgkJCX0KCQl9CgkJCgkJcmV0dXJuICRwcm9kdWN0OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RGF0YSgkZGF0YSkKCXsKCQl0cnkgCgkJewkKCQkJJHRoaXMtPmlkID0gJGRhdGEtPmlkOwoJCQkkdGhpcy0+cmVmZXJlbmNlS2V5ID0gJGRhdGEtPnJlZmVyZW5jZV9rZXk7CgkJCSR0aGlzLT5zdGF0dXMgPSAkZGF0YS0+c3RhdHVzOwoJCQkkdGhpcy0+bmFtZSA9ICRkYXRhLT5uYW1lOwoJCQkkdGhpcy0+c2t1ID0gJGRhdGEtPnNrdTsKCQkJJHRoaXMtPmRlc2NyaXB0aW9uID0gJGRhdGEtPmRlc2NyaXB0aW9uOwoJCQkkdGhpcy0+cHJpY2UgPSAkZGF0YS0+cHJpY2U7CgkJCSR0aGlzLT5jdXJyZW5jeSA9ICRkYXRhLT5jdXJyZW5jeTsKCQkJJHRoaXMtPmlzU2hpcHBhYmxlRmxhZyA9ICRkYXRhLT5pc19zaGlwcGFibGU7CgkJCSR0aGlzLT5oYXNUcmlhbEZsYWcgPSAkZGF0YS0+aGFzX3RyaWFsOwoJCQkkdGhpcy0+cmViaWxsUGVyaW9kID0gJGRhdGEtPnJlYmlsbF9wZXJpb2Q7CgkJCSR0aGlzLT50cmlhbEFtb3VudCA9ICRkYXRhLT50cmlhbF9hbW91bnQ7CgkJCSR0aGlzLT50cmlhbER1cmF0aW9uID0gJGRhdGEtPnRyaWFsX2R1cmF0aW9uOwoJCQkkdGhpcy0+dHJpYWxGcmVxdWVuY3kgPSAkZGF0YS0+dHJpYWxfZnJlcXVlbmN5OwoJCQkkdGhpcy0+cmViaWxsRnJlcXVlbmN5ID0gJGRhdGEtPnJlYmlsbF9mcmVxdWVuY3k7CgkJCSR0aGlzLT5saW1pdFRyaWFsRmxhZyA9ICRkYXRhLT5kb19saW1pdF90cmlhbDsKCQkJJHRoaXMtPmxpbWl0VHJpYWxBbHRQcm9kdWN0SWQgPSAkZGF0YS0+bGltaXRfdHJpYWxfYWx0X3Byb2R1Y3RfaWQ7CgkJCSR0aGlzLT5saW1pdFBheW1lbnRzRmxhZyA9ICRkYXRhLT5kb19saW1pdF9wYXltZW50czsKCQkJJHRoaXMtPm51bWJlck9mUGF5bWVudHMgPSAkZGF0YS0+bnVtYmVyX29mX3BheW1lbnRzOwoJCQkkdGhpcy0+cHVyY2hhc2VDb25maXJtYXRpb25Nc2cgPSAkZGF0YS0+cHVyY2hhc2VfY29uZmlybWF0aW9uX21lc3NhZ2U7CgkJCSR0aGlzLT5jb21taXNzaW9uUHJvZmlsZUlkID0gJGRhdGEtPmNvbW1pc3Npb25fcHJvZmlsZV9pZDsKCQkJcGFyZW50Ojp2YWxpZGF0ZSgpOwoJCX0KCQljYXRjaCAoRXhjZXB0aW9uICRleCkgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9IAoJCgkKCXB1YmxpYyBmdW5jdGlvbiByZW1vdmUoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZighTU1fUHJvZHVjdDo6aXNCZWluZ1VzZWQoJHRoaXMtPmlkKSkKCQl7CgkJCSRzcWwgPSAiZGVsZXRlIGZyb20gIi5NTV9UQUJMRV9QUk9EVUNUUy4iIHdoZXJlIGlkPSd7JHRoaXMtPmlkfScgbGltaXQgMSI7CgkJCWlmKCR3cGRiLT5xdWVyeSgkc3FsKSkKCQkJewoJCQkJJHRoaXMtPmludmFsaWRhdGUoKTsKCQkJCWlmICgkdGhpcy0+bm90aWZ5U2VydmljZXMpCgkJCQl7CgkJCQkJJG1lZGlhdG9yID0gbmV3IE1NX1BheW1lbnRTZXJ2aWNlTWVkaWF0b3IoKTsKCQkJCQkkbWVkaWF0b3ItPm5vdGlmeVByb2R1Y3RSZW1vdmVkKCR0aGlzKTsKCQkJCX0KCQkJCXJldHVybiB0cnVlOwoJCQl9CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0RGF0YSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkZG9VcGRhdGUgPSAoJHRoaXMtPmlkPjApOwoJCQoJCU1NX1RyYW5zYWN0aW9uOjpiZWdpbigpOwoJCXRyeQoJCXsJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBzZXQgIiAuCgkJCQkJIiAgIHJlZmVyZW5jZV9rZXk9JyVzJywiIC4KCQkJCQkiICAgc3RhdHVzPSclZCcsIiAuCgkJIAkJCSIJbmFtZT0nJXMnLCIgLgoJCSAJCQkiCXNrdT0nJXMnLCIgLgoJCSAJCQkiCWRlc2NyaXB0aW9uPSclcycsIiAuCgkJIAkJCSIJcHJpY2U9JyVzJywiIC4KCQkgCQkJIiAgIGN1cnJlbmN5PSclcycsIiAuCgkJIAkJCSIJcmViaWxsX2ZyZXF1ZW5jeT0nJXMnLCIgLgoJCSAJCQkiCXRyaWFsX2ZyZXF1ZW5jeT0nJXMnLCIgLgoJCSAJCQkiCWlzX3NoaXBwYWJsZT0nJWQnLCIgLgoJCSAJCQkiCWhhc190cmlhbD0nJWQnLCIgLgoJCSAJCQkiCXRyaWFsX2Ftb3VudD0nJWYnLCIgLgoJCSAJCQkiCXRyaWFsX2R1cmF0aW9uPSclZCcsIiAuCgkJIAkJCSIJcmViaWxsX3BlcmlvZD0nJWQnLCIgLgoJCSAJCQkiCWRvX2xpbWl0X3RyaWFsPSclZCcsICIgLgoJCSAJCQkiCWxpbWl0X3RyaWFsX2FsdF9wcm9kdWN0X2lkPSclZCcsICIgLgoJCSAJCQkiCWRvX2xpbWl0X3BheW1lbnRzPSclZCcsICIgLgoJCSAJCQkiCW51bWJlcl9vZl9wYXltZW50cz0nJWQnLCAiIC4KCQkgCQkJIglwdXJjaGFzZV9jb25maXJtYXRpb25fbWVzc2FnZT0nJXMnLCAiIC4KCQkgCQkJIgljb21taXNzaW9uX3Byb2ZpbGVfaWQ9JyVkJyIgLgoJCSAJCQkiIjsKCQkJCgkJCX0KCQkJZWxzZSAKCQkJewkKCQkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBzZXQgIiAuCgkJCQkJIiAgIHJlZmVyZW5jZV9rZXk9JyVzJywiIC4KCQkJCQkiICAgc3RhdHVzPSclZCcsIiAuCgkJIAkJCSIJbmFtZT0nJXMnLCIgLgoJCSAJCQkiCXNrdT0nJXMnLCIgLgoJCSAJCQkiCWRlc2NyaXB0aW9uPSclcycsIiAuCgkJIAkJCSIJcHJpY2U9JyVzJywiIC4KCQkgCQkJIiAgIGN1cnJlbmN5PSclcycsIiAuCgkJIAkJCSIJcmViaWxsX2ZyZXF1ZW5jeT0nJXMnLCIgLgoJCSAJCQkiCXRyaWFsX2ZyZXF1ZW5jeT0nJXMnLCIgLgoJCSAJCQkiCWlzX3NoaXBwYWJsZT0nJWQnLCIgLgoJCSAJCQkiCWhhc190cmlhbD0nJWQnLCIgLgoJCSAJCQkiCXRyaWFsX2Ftb3VudD0nJWYnLCIgLgoJCSAJCQkiCXRyaWFsX2R1cmF0aW9uPSclZCcsIiAuCgkJIAkJCSIJcmViaWxsX3BlcmlvZD0nJWQnLCIgLgoJCSAJCQkiCWRvX2xpbWl0X3RyaWFsPSclZCcsICIgLgoJCSAJCQkiCWxpbWl0X3RyaWFsX2FsdF9wcm9kdWN0X2lkPSclZCcsICIgLgoJCSAJCQkiCWRvX2xpbWl0X3BheW1lbnRzPSclZCcsICIgLgoJCSAJCQkiCW51bWJlcl9vZl9wYXltZW50cz0nJWQnLCAiIC4KCQkgCQkJIglwdXJjaGFzZV9jb25maXJtYXRpb25fbWVzc2FnZT0nJXMnLCAiIC4KCQkgCQkJIgljb21taXNzaW9uX3Byb2ZpbGVfaWQ9JyVkJyAiIC4KCQkgCQkJIgl3aGVyZSBpZD0neyR0aGlzLT5pZH0nIiAuCgkJIAkJCSIiOwoJCSAJfQoJCSAJCgkJIAkkcHJlcGFyZWRTcWwgPSAkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+Z2V0UmVmZXJlbmNlS2V5KCksICR0aGlzLT5zdGF0dXMsICR0aGlzLT5uYW1lLCAkdGhpcy0+c2t1LCAkdGhpcy0+ZGVzY3JpcHRpb24sICR0aGlzLT5wcmljZSwgCgkJCQkJCU1NX0N1cnJlbmN5VXRpbDo6Z2V0QWN0aXZlQ3VycmVuY3koKSwkdGhpcy0+cmViaWxsRnJlcXVlbmN5LCR0aGlzLT50cmlhbEZyZXF1ZW5jeSwgJHRoaXMtPmlzU2hpcHBhYmxlRmxhZywgJHRoaXMtPmhhc1RyaWFsRmxhZywKCQkgCQkJCSR0aGlzLT50cmlhbEFtb3VudCwgJHRoaXMtPnRyaWFsRHVyYXRpb24sICR0aGlzLT5yZWJpbGxQZXJpb2QsICR0aGlzLT5saW1pdFRyaWFsRmxhZywgJHRoaXMtPmxpbWl0VHJpYWxBbHRQcm9kdWN0SWQsIAoJCSAJCQkJJHRoaXMtPmxpbWl0UGF5bWVudHNGbGFnLCAkdGhpcy0+bnVtYmVyT2ZQYXltZW50cywgJHRoaXMtPnB1cmNoYXNlQ29uZmlybWF0aW9uTXNnLCAkdGhpcy0+Y29tbWlzc2lvblByb2ZpbGVJZCk7IAoJCSAJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCQkKCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJIAl7CgkJCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBwcm9kdWN0ICgiLiRwcmVwYXJlZFNxbC4iKSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCSAJfQoJCSAJCgkJIAlpZiAoISRkb1VwZGF0ZSkKCQkgCXsKCQkgCQkkdGhpcy0+c2V0SWQoJHdwZGItPmluc2VydF9pZCk7CgkJIAkJJHRoaXMtPnZhbGlkYXRlKCk7CgkJIAl9CgkJfQoJCWNhdGNoKEV4Y2VwdGlvbiAkZXgpCgkJewoJCSAJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBwcm9kdWN0IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCSAKCQlNTV9UcmFuc2FjdGlvbjo6Y29tbWl0KCk7CgkJCgkJaWYgKCR0aGlzLT5ub3RpZnlTZXJ2aWNlcykKCQl7CgkJCSRtZWRpYXRvciA9IG5ldyBNTV9QYXltZW50U2VydmljZU1lZGlhdG9yKCk7CgkJCWlmICgkZG9VcGRhdGUpCgkJCXsKCQkJCSRtZWRpYXRvci0+bm90aWZ5UHJvZHVjdFVwZGF0ZWQoJHRoaXMpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG1lZGlhdG9yLT5ub3RpZnlQcm9kdWN0QWRkZWQoJHRoaXMpOwoJCQl9CgkJfQoJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRBc3NvY2lhdGVkTWVtYmVyc2hpcCgpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUIG10cC5tZW1iZXJzaGlwX2lkIGFzIGlkIGZyb20gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIG10LCAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxfUFJPRFVDVFMuIiBtdHAgd2hlcmUgbXRwLnByb2R1Y3RfaWQ9J3skdGhpcy0+aWR9JyBhbmQgbXQuaWQgPSBtdHAubWVtYmVyc2hpcF9pZCI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpCgkJewoJCQlyZXR1cm4gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkcmVzdWx0LT5pZCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEFzc29jaWF0ZWRCdW5kbGUoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJJHNxbCA9ICJzZWxlY3QgYXQuaWQgZnJvbSAiLk1NX1RBQkxFX0JVTkRMRV9QUk9EVUNUUy4iIGFhdCwgIi5NTV9UQUJMRV9CVU5ETEVTLiIgYXQgd2hlcmUgYWF0LnByb2R1Y3RfaWQ9J3skdGhpcy0+aWR9JyBhbmQgYWF0LmJ1bmRsZV9pZD1hdC5pZCBMSU1JVCAxOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpCgkJewoJCQlyZXR1cm4gbmV3IE1NX0J1bmRsZSgkcmVzdWx0LT5pZCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fQnVuZGxlKCk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldEJpbGxpbmdEZXNjcmlwdGlvbigkaW5jbHVkZVRyaWFsRGVzY3JpcHRpb249dHJ1ZSwgJGFkbWluRGlzcGxheT10cnVlKQoJewoJCSRiaWxsaW5nRGVzY3JpcHRpb24gPSAiIjsKCQkkdHJpYWxEZXNjcmlwdGlvbiA9ICIiOwoJCQoJCWlmKCRhZG1pbkRpc3BsYXkpCgkJewoJCQkkcHJpY2luZ0Rlc2NyaXB0aW9uID0gIjxzcGFuIHN0eWxlPSdmb250LWZhbWlseTpjb3VyaWVyOyBmb250LXNpemU6MTJweDsnPiIuJHRoaXMtPmdldFByaWNlKHRydWUpLiI8L3NwYW4+IjsKCQl9CgkJZWxzZQoJCXsKCQkJJHByaWNpbmdEZXNjcmlwdGlvbiA9ICR0aGlzLT5nZXRQcmljZSh0cnVlKTsKCQl9CgkJCgkJaWYoJHRoaXMtPmhhc1RyaWFsKCkgJiYgJGluY2x1ZGVUcmlhbERlc2NyaXB0aW9uKQoJCXsKCQkJJHRyaWFsRGVzY3JpcHRpb24gPSAkdGhpcy0+Z2V0VHJpYWxEdXJhdGlvbigpLiIgIi5zdWJzdHIoJHRoaXMtPmdldFRyaWFsRnJlcXVlbmN5KCksIDAsIC0xKS4iICI7CgkJCQkKCQkJaWYoZmxvYXR2YWwoJHRoaXMtPmdldFRyaWFsQW1vdW50KGZhbHNlKSkgPT0gMC4wMCkKCQkJewoJCQkJJHRyaWFsRGVzY3JpcHRpb24gLj0gImZyZWUgdHJpYWwiOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRyaWFsRGVzY3JpcHRpb24gLj0gInRyaWFsIGZvciAiOwoJCQkJCgkJCQlpZigkYWRtaW5EaXNwbGF5KQoJCQkJewoJCQkJCSR0cmlhbERlc2NyaXB0aW9uIC49ICI8c3BhbiBzdHlsZT0nZm9udC1mYW1pbHk6Y291cmllcjsgZm9udC1zaXplOjEycHg7Jz4iLiR0aGlzLT5nZXRUcmlhbEFtb3VudCh0cnVlKS4iPC9zcGFuPiI7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHRyaWFsRGVzY3JpcHRpb24gLj0gJHRoaXMtPmdldFRyaWFsQW1vdW50KHRydWUpOwoJCQkJfQoJCQl9CgkJfQoJCQoJCWlmKCR0aGlzLT5pc1JlY3VycmluZygpKQoJCXsKCQkJaWYoJHRoaXMtPmRvTGltaXRQYXltZW50cygpKSAKCQkJewoJCQkJJHRtcERlc2NyaXB0aW9uID0gJHRoaXMtPmdldE51bWJlck9mUGF5bWVudHMoKS4iICI7CgkJCQkkdG1wRGVzY3JpcHRpb24gLj0gKCR0aGlzLT5nZXROdW1iZXJPZlBheW1lbnRzKCkgPT0gMSkgPyAicGF5bWVudCI6InBheW1lbnRzIjsKCQkJCSR0bXBEZXNjcmlwdGlvbiAuPSAiIG9mICIuJHByaWNpbmdEZXNjcmlwdGlvbjsKCQkJCQoJCQkJJHByaWNpbmdEZXNjcmlwdGlvbiA9ICR0bXBEZXNjcmlwdGlvbjsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQlpZihpbnR2YWwoJHRoaXMtPmdldFJlYmlsbFBlcmlvZCgpKSA9PSAxKQoJCQkJewoJCQkJCWlmKCRhZG1pbkRpc3BsYXkpCgkJCQkJewoJCQkJCQkkcHJpY2luZ0Rlc2NyaXB0aW9uIC49ICIgZXZlcnkgIjsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJHByaWNpbmdEZXNjcmlwdGlvbiAuPSAiLyI7CgkJCQkJfQoJCQkJCQoJCQkJCSRwcmljaW5nRGVzY3JpcHRpb24gLj0gc3Vic3RyKCR0aGlzLT5nZXRSZWJpbGxGcmVxdWVuY3koKSwgMCwgLTEpOwoJCQkJfQoJCQkJZWxzZSAKCQkJCXsKCQkJCQkkcHJpY2luZ0Rlc2NyaXB0aW9uIC49ICIgZXZlcnkgIi4kdGhpcy0+Z2V0UmViaWxsUGVyaW9kKCkuIiAiLiR0aGlzLT5nZXRSZWJpbGxGcmVxdWVuY3koKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQlpZighZW1wdHkoJHRyaWFsRGVzY3JpcHRpb24pICYmICRpbmNsdWRlVHJpYWxEZXNjcmlwdGlvbikKCQl7CgkJCWlmKCRhZG1pbkRpc3BsYXkpCgkJCXsKCQkJCSRiaWxsaW5nRGVzY3JpcHRpb24gPSAkdHJpYWxEZXNjcmlwdGlvbi4iIHRoZW4gIjsKCQkJfQoJCQllbHNlCQoJCQl7CgkJCQkkYmlsbGluZ0Rlc2NyaXB0aW9uID0gJHRyaWFsRGVzY3JpcHRpb24uIiwgIjsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gJGJpbGxpbmdEZXNjcmlwdGlvbi4kcHJpY2luZ0Rlc2NyaXB0aW9uOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQcm9kdWN0c0FuZEFzc29jaWF0aW9ucygkY29yZV9wYWdlX3R5cGVfaWQsICRwYWdlX2lkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkY3BpZF9zcWwgPSAiY29yZV9wYWdlX3R5cGVfaWQ9J3skY29yZV9wYWdlX3R5cGVfaWR9JyI7CgkJaWYoJGNvcmVfcGFnZV90eXBlX2lkID09IE1NX0NvcmVQYWdlVHlwZTo6JFBBSURfQ09ORklSTUFUSU9OKQoJCXsKCQkJJGNwaWRfc3FsID0gImNvcmVfcGFnZV90eXBlX2lkIElOICgnIi5NTV9Db3JlUGFnZVR5cGU6OiRGUkVFX0NPTkZJUk1BVElPTi4iJywnIi5NTV9Db3JlUGFnZVR5cGU6OiRQQUlEX0NPTkZJUk1BVElPTi4iJykiOwkKCQl9CgkJCgkJJHNxbCA9ICJzZWxlY3QgCgkJCQkJJ21lbWJlcl90eXBlJyBhcyByZWZfdHlwZSwgbXQuaWQgYXMgdHlwZV9pZCxtdC5uYW1lIGFzIHR5cGVfbmFtZSwgcC5pZCBhcyBwcm9kdWN0X2lkLCBwLm5hbWUgYXMgcHJvZHVjdF9uYW1lLCBtdC5pc19mcmVlIGFzIGlzX2ZyZWUgCgkJCQlmcm9tIAoJCQkJCSIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFMuIiBtdAoJCQkJCQlMRUZUIEpPSU4gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMX1BST0RVQ1RTLiIgbXRwIE9OIG10cC5tZW1iZXJzaGlwX2lkPW10LmlkICAKCQkJCQkJTEVGVCBKT0lOICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBwIE9OIG10cC5wcm9kdWN0X2lkPXAuaWQgQU5EIHAuaWQgTk9UIElOIAoJCQkJCQkJCShzZWxlY3QgcmVmX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgY3Agd2hlcmUgeyRjcGlkX3NxbH0gYW5kIHJlZl90eXBlPSdwcm9kdWN0JyBhbmQgcGFnZV9pZCE9J3skcGFnZV9pZH0nIGFuZCByZWZfaWQ+MCkKCQkJCXdoZXJlCgkJCQkJbXQuaWQgTk9UIElOIChzZWxlY3QgcmVmX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgY3Agd2hlcmUgeyRjcGlkX3NxbH0gYW5kIHJlZl90eXBlPSdtZW1iZXJfdHlwZScgYW5kIHBhZ2VfaWQhPSd7JHBhZ2VfaWR9JyBhbmQgcmVmX2lkPjApCgkJCQkKCQkJCVVOSU9OCgkJCQkgCgkJCQlzZWxlY3QgCgkJCQkJJ2FjY2Vzc190YWcnIGFzIHJlZl90eXBlLCBhdC5pZCBhcyB0eXBlX2lkLCBhdC5uYW1lIGFzIHR5cGVfbmFtZSwgcC5pZCBhcyBwcm9kdWN0X2lkLCBwLm5hbWUgYXMgcHJvZHVjdF9uYW1lLCBhdC5pc19mcmVlIGFzIGlzX2ZyZWUgIAoJCQkJZnJvbSAKCQkJCQkiLk1NX1RBQkxFX0JVTkRMRVMuIiBhdCAKICAgCQkJCQkJTEVGVCBKT0lOICIuTU1fVEFCTEVfQlVORExFX1BST0RVQ1RTLiIgYXRwIG9uIGF0LmlkPWF0cC5idW5kbGVfaWQKICAgCQkJCQkJTEVGVCBKT0lOICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBwIG9uIGF0cC5wcm9kdWN0X2lkPXAuaWQgQU5EIHAuaWQgTk9UIElOIAogICAJCQkJCQkJCShzZWxlY3QgcmVmX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgY3Agd2hlcmUgeyRjcGlkX3NxbH0gYW5kIHJlZl90eXBlPSdwcm9kdWN0JyBhbmQgcGFnZV9pZCE9J3skcGFnZV9pZH0nIGFuZCByZWZfaWQ+MCkKCQkJCXdoZXJlCgkJCQkJYXQuaWQgTk9UIElOIChzZWxlY3QgcmVmX2lkIGZyb20gIi5NTV9UQUJMRV9DT1JFX1BBR0VTLiIgY3Agd2hlcmUgeyRjcGlkX3NxbH0gYW5kIHJlZl90eXBlPSdhY2Nlc3NfdGFnJyBhbmQgcGFnZV9pZCE9J3skcGFnZV9pZH0nIGFuZCByZWZfaWQ+MCkKCQkgIjsKCQkKCQlyZXR1cm4gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJfQoJCgkKCS8qKiBVVElMSVRJRVMgKiovCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNCZWluZ1VzZWQoJHByb2R1Y3RJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQkkc3FsID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCBmcm9tICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTF9QUk9EVUNUUy4iIG10cCB3aGVyZSBtdHAucHJvZHVjdF9pZD0neyRwcm9kdWN0SWR9JyAgIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJvdy0+dG90YWwgPiAwKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCgkJJHNxbCA9ICJzZWxlY3QgY291bnQoKikgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX0JVTkRMRV9QUk9EVUNUUy4iIG10cCB3aGVyZSBtdHAucHJvZHVjdF9pZD0neyRwcm9kdWN0SWR9JyAgIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJvdy0+dG90YWwgPiAwKQoJCXsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCSRzcWwgPSAic2VsZWN0IGNvdW50KCopIGFzIHRvdGFsIGZyb20gIi5NTV9UQUJMRV9QUk9EVUNUUy4iIG10cCB3aGVyZSBtdHAuaGFzX3RyaWFsPTEgYW5kIG10cC5kb19saW1pdF90cmlhbD0xIGFuZCBtdHAubGltaXRfdHJpYWxfYWx0X3Byb2R1Y3RfaWQ9J3skcHJvZHVjdElkfScgICI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyb3ctPnRvdGFsID4gMCkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaGFzQmVlblB1cmNoYXNlZCgkcHJvZHVjdElkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gJHdwZGItPnByZXBhcmUoIlNFTEVDVCBjb3VudCgqKSBBUyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfT1JERVJfSVRFTVMuIiBXSEVSRSBpdGVtX2lkPSVzIGFuZCBpdGVtX3R5cGU9JXMiLCRwcm9kdWN0SWQsTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpOwoJCSRwdXJjaGFzZXMgPSBpbnR2YWwoJHdwZGItPmdldF92YXIoJHNxbCkpOwoJCXJldHVybiAoJHB1cmNoYXNlcyA+IDApOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UHVyY2hhc2VJbmZvKCRwaWQpCgl7CgkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcGlkKTsKCQkkYnVuZGxlID0gJHByb2R1Y3QtPmdldEFzc29jaWF0ZWRCdW5kbGUoKTsKCQlpZigkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJewoJCQlyZXR1cm4gYXJyYXkoJ25hbWUnPT4kYnVuZGxlLT5nZXROYW1lKCksICdwcmljZSc9PiRwcm9kdWN0LT5nZXRQcmljZSh0cnVlKSk7CgkJfQoJCWVsc2UKCQl7CgkJCSRtZW1iZXJzaGlwID0gJHByb2R1Y3QtPmdldEFzc29jaWF0ZWRNZW1iZXJzaGlwKCk7CgkJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCWdsb2JhbCAkY3VycmVudF91c2VyOwoJCQkJJHVzZXIgPSBNTV9Vc2VyOjpnZXRDdXJyZW50V1BVc2VyKCk7CgkJCQkkY01lbWJlcnNoaXAgPSBuZXcgTU1fTWVtYmVyc2hpcExldmVsKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSk7CgkJCQkkY1Byb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkY01lbWJlcnNoaXAtPmdldERlZmF1bHRQcm9kdWN0KCkpOwoJCQkJcmV0dXJuIGFycmF5KCduYW1lJz0+JG1lbWJlcnNoaXAtPmdldE5hbWUoKSwgJ3ByaWNlJz0+JHByb2R1Y3QtPmdldFByaWNlKHRydWUpLCdjdXJyZW50X21lbWJlcnNoaXBfcHJpY2UnPT4kY1Byb2R1Y3QtPmdldFByaWNlKHRydWUpKTsKCQkJfQoJCX0KCQlyZXR1cm4gYXJyYXkoJ25hbWUnPT4kcHJvZHVjdC0+Z2V0TmFtZSgpLCAncHJpY2UnPT4kcHJvZHVjdC0+Z2V0UHJpY2UodHJ1ZSkpOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QWxsKCRleGNsdWRlUHJvZHVjdElkcz1udWxsKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkkc3FsID0gInNlbGVjdCBpZCwgbmFtZSBmcm9tICIuTU1fVEFCTEVfUFJPRFVDVFM7CgkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJJHByb2R1Y3RzID0gYXJyYXkoKTsKCQlpZihpc19hcnJheSgkcm93cykgJiYgY291bnQoJHJvd3MpPjApewoJCQlmb3JlYWNoKCRyb3dzIGFzICRyb3cpCgkJCXsKCQkJCWlmKCFpc19udWxsKCRleGNsdWRlUHJvZHVjdElkcykgJiYgaXNfYXJyYXkoJGV4Y2x1ZGVQcm9kdWN0SWRzKSAmJiBpbl9hcnJheSgkcm93LT5pZCwgJGV4Y2x1ZGVQcm9kdWN0SWRzKSkKCQkJCXsKCQkJCQljb250aW51ZTsKCQkJCX0KCQkJCQoJCQkJJHByb2R1Y3RzWyRyb3ctPmlkXSA9ICRyb3ctPm5hbWU7CgkJCX0KCQl9CgkJcmV0dXJuICRwcm9kdWN0czsgCgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRNZW1iZXJzaGlwUHJvZHVjdExpc3QoJG1lbWJlcnNoaXBJZCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAiU0VMRUNUIHAuKiBmcm9tICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBwIExFRlQgSk9JTiAiLk1NX1RBQkxFX0JVTkRMRV9QUk9EVUNUUy4iIGF0cCBPTiAocC5pZCA9IGF0cC5wcm9kdWN0X2lkKSB3aGVyZSBhdHAucHJvZHVjdF9pZCBJUyBOVUxMIG9yZGVyIGJ5IHByb2R1Y3RfaWQgYXNjIjsKCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkKCQkkcHJvZHVjdHMgPSBhcnJheSgpOwoJCQoJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKCQl7CgkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoJHJvdy0+aWQsIGZhbHNlKTsKCQkJJGFzc29jaWF0ZWRNZW1iZXJzaGlwID0gJHByb2R1Y3QtPmdldEFzc29jaWF0ZWRNZW1iZXJzaGlwKCk7CgkJCQoJCQlpZigkYXNzb2NpYXRlZE1lbWJlcnNoaXAtPmlzVmFsaWQoKSkgCgkJCXsJCQkJCgkJCQkvLyBpZiBwcm9kdWN0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgbWVtYmVyc2hpcCBwYXNzZWQsIHRoZW4gc2hvdyBpdAoJCQkJaWYoaXNzZXQoJG1lbWJlcnNoaXBJZCkgJiYgKCRtZW1iZXJzaGlwSWQgPT0gJGFzc29jaWF0ZWRNZW1iZXJzaGlwLT5nZXRJZCgpKSkKCQkJCXsKCQkJCQkkcHJvZHVjdHNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkcHJvZHVjdHNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsJCQkJCgkJCX0KCQl9CQoJCQoJCXJldHVybiAkcHJvZHVjdHM7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRCdW5kbGVQcm9kdWN0TGlzdCgkYnVuZGxlSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoKCQkkc3FsID0gIlNFTEVDVCBwLiogZnJvbSAiLk1NX1RBQkxFX1BST0RVQ1RTLiIgcCBMRUZUIEpPSU4gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMX1BST0RVQ1RTLiIgbXRwIE9OIChwLmlkID0gbXRwLnByb2R1Y3RfaWQpIHdoZXJlIG10cC5wcm9kdWN0X2lkIElTIE5VTEwiOwoJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCSRwcm9kdWN0cyA9IGFycmF5KCk7CgkJCgkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCXsKCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgkcm93LT5pZCwgZmFsc2UpOwoJCQkkYXNzb2NpYXRlZEJ1bmRsZSA9ICRwcm9kdWN0LT5nZXRBc3NvY2lhdGVkQnVuZGxlKCk7CgkJCQoJCQlpZigkYXNzb2NpYXRlZEJ1bmRsZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkvLyBpZiBwcm9kdWN0IGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYnVuZGxlIHBhc3NlZCwgdGhlbiBzaG93IGl0CgkJCQlpZihpc3NldCgkYnVuZGxlSWQpICYmICgkYnVuZGxlSWQgPT0gJGFzc29jaWF0ZWRCdW5kbGUtPmdldElkKCkpKSAKCQkJCXsKCQkJCQkkcHJvZHVjdHNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CQoJCQkJCSRwcm9kdWN0c1skcm93LT5pZF0gPSAkcm93LT5uYW1lOwkKCQkJfQoJCX0KCQkKCQlyZXR1cm4gJHByb2R1Y3RzOwoJfQoJCgkKCS8qKiBQQVJUTkVSIE1FVEhPRFMgKi8KCQoJcHVibGljIGZ1bmN0aW9uIGFkZFBhcnRuZXIoJGFmZmlsaWF0ZUlkLCAkY29tbWlzc2lvblByb2ZpbGVJZCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkKCQlpZihpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQkkZGF0YSA9IGFycmF5KCJwcm9kdWN0X2lkIiA9PiAkdGhpcy0+Z2V0SWQoKSwgImFmZmlsaWF0ZV9pZCIgPT4gJGFmZmlsaWF0ZUlkLCAiY29tbWlzc2lvbl9wcm9maWxlX2lkIiA9PiAkY29tbWlzc2lvblByb2ZpbGVJZCk7CgkJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0FGRklMSUFURV9QQVJUTkVSX1BBWU9VVFMsICRkYXRhKTsKCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ291bGQgbm90IGFkZCBwYXJ0bmVyIGR1ZSB0byBTUUwgZXJyb3IuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gYWRkIHBhcnRuZXIuIFByb2R1Y3QgaXMgaW52YWxpZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZVBhcnRuZXJzKCkKCXsKCQlpZihpbnR2YWwoJHRoaXMtPmlkKSA+IDApCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCQkKCQkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX0FGRklMSUFURV9QQVJUTkVSX1BBWU9VVFMuIiB3aGVyZSBwcm9kdWN0X2lkPSd7JHRoaXMtPmdldElkKCl9JzsiOwoJCQkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJCgkJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDb3VsZCBub3QgcmVtb3ZlIHBhcnRuZXJzIGR1ZSB0byBTUUwgZXJyb3IuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0KCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRQYXJ0bmVycygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJJGRhdGEgPSBhcnJheSgpOwoJCSRzcWwgPSAic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX0FGRklMSUFURV9QQVJUTkVSX1BBWU9VVFMuIiB3aGVyZSBwcm9kdWN0X2lkPSd7JHRoaXMtPmdldElkKCl9JyBvcmRlciBieSBhZmZpbGlhdGVfaWQgYXNjOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQoJCWlmKCEkcmVzdWx0IHx8IGlzX251bGwoJHJlc3VsdCkpCgkJewoJCQlyZXR1cm4gJGRhdGE7CgkJfQoJCgkJZm9yZWFjaCgkcmVzdWx0IGFzICRpdGVtKQoJCXsKCQkJJHBhcnRuZXIgPSBuZXcgc3RkQ2xhc3MoKTsKCQkJJHBhcnRuZXItPmFmZmlsaWF0ZUlkID0gJGl0ZW0tPmFmZmlsaWF0ZV9pZDsKCQkJJHBhcnRuZXItPmNvbW1pc3Npb25Qcm9maWxlSWQgPSAkaXRlbS0+Y29tbWlzc2lvbl9wcm9maWxlX2lkOwoJCQkkZGF0YVtdID0gJHBhcnRuZXI7CgkJfQoJCgkJcmV0dXJuICRkYXRhOwoJfQoJCgkKCS8qKiBHRVRURVJTL1NFVFRFUlMgKiovCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZWZlcmVuY2VLZXkoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZihlbXB0eSgkdGhpcy0+cmVmZXJlbmNlS2V5KSkKCQl7CgkJCS8vIGdlbmVyYXRlIGEgcmFuZG9tIDYgYWxwaG51bWVyaWMgc3RyaW5nCgkJCWRvIHsKCQkJCSRuZXdLZXkgPSAicCI7CgkJCQlmb3IgKCRpPTA7ICRpPDU7ICRpKyspCgkJCQl7CgkJCQkJJHR5cGUgPSByYW5kKDEsMyk7CgkJCQkJc3dpdGNoICgkdHlwZSkgewoJCQkJCQljYXNlIDE6IC8vbnVtZXJpYwoJCQkJCQkJJG5ld0tleS49Y2hyKHJhbmQoNDgsNTcpKTsKCQkJCQkJCWJyZWFrOwoJCQkJCQljYXNlIDI6IC8vdXBwZXIgYWxwaGEKCQkJCQkJCSRuZXdLZXkuPWNocihyYW5kKDY1LDkwKSk7CgkJCQkJCQlicmVhazsKCQkJCQkJY2FzZSAzOiAvL2xvd2VyIGFscGhhCgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQkkbmV3S2V5Lj1jaHIocmFuZCg5NywxMjIpKTsKCQkJCQkJCWJyZWFrOwoJCQkJCX0KCQkJCX0KCQkJCQkKCQkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCR3cGRiLT5wcmVwYXJlKCJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfUFJPRFVDVFMuIiB3aGVyZSByZWZlcmVuY2Vfa2V5PSclcyciLCAkbmV3S2V5KSk7CgkJCX0gd2hpbGUgKGNvdW50KCRyZXN1bHRzKSA+IDApOyAvL2l0ZXJhdGUgd2hpbGUga2V5IGlzIG5vdCB1bmlxdWUuCgkJCQoJCQkkdGhpcy0+cmVmZXJlbmNlS2V5ID0gJG5ld0tleTsKCQkJCgkJCS8vIHNhdmUgcmVmZXJlbmNlIGtleQoJCQlpZigkdGhpcy0+aWQgPiAwKQoJCQl7CgkJCQkkd2hlcmVDbGF1c2UgPSBhcnJheSgiaWQiID0+ICR0aGlzLT5pZCk7CgkJCQkkZGF0YSA9IGFycmF5KCJyZWZlcmVuY2Vfa2V5Ij0+JHRoaXMtPnJlZmVyZW5jZUtleSk7CgkJCQkkcmVzdWx0ID0gJHdwZGItPnVwZGF0ZShNTV9UQUJMRV9QUk9EVUNUUywgJGRhdGEsICR3aGVyZUNsYXVzZSk7CgkJCQkJCgkJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBzYXZpbmcgcHJvZHVjdCByZWZlcmVuY2Uga2V5OiAiLiR3cGRiLT5sYXN0X2Vycm9yLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQlyZXR1cm4gJHRoaXMtPnJlZmVyZW5jZUtleTsKCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXROYW1lKCRzdHIpIAoJewoJCSR0aGlzLT5uYW1lID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldE5hbWUoKQoJewoJCXJldHVybiAkdGhpcy0+bmFtZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFN0YXR1cygkc3RyKSAKCXsKCQkkdGhpcy0+c3RhdHVzID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFN0YXR1cygpCgl7CgkJcmV0dXJuICR0aGlzLT5zdGF0dXM7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpc0FjdGl2ZSgpCgl7CgkJcmV0dXJuICgkdGhpcy0+c3RhdHVzID09ICIxIikgPyB0cnVlIDogZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRTa3UoJHN0cikgCgl7CgkJJHRoaXMtPnNrdSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRTa3UoKQoJewoJCXJldHVybiAkdGhpcy0+c2t1OwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0RGVzY3JpcHRpb24oJHN0cikgCgl7CgkJJHRoaXMtPmRlc2NyaXB0aW9uID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldERlc2NyaXB0aW9uKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmRlc2NyaXB0aW9uOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UHJpY2UoJHN0cikgCgl7CgkJJHRoaXMtPnByaWNlID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFByaWNlKCRkb0Zvcm1hdD10cnVlKQoJewoJCWlmKCRkb0Zvcm1hdCkgCgkJewoJCQlyZXR1cm4gX21tZigkdGhpcy0+cHJpY2UsJHRoaXMtPmN1cnJlbmN5KTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBudW1iZXJfZm9ybWF0KGZsb2F0dmFsKCR0aGlzLT5wcmljZSksTU1fQ3VycmVuY3lVdGlsOjpnZXRQcmVjaXNpb25Gb3JDdXJyZW5jeSgkdGhpcy0+Y3VycmVuY3kpLCcuJywnJyk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0SXNTaGlwcGFibGVGbGFnKCRzdHIpIAoJewoJCSR0aGlzLT5pc1NoaXBwYWJsZUZsYWcgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNTaGlwcGFibGUoKQoJewoJCXJldHVybiAoaW50dmFsKCR0aGlzLT5pc1NoaXBwYWJsZUZsYWcpID09IDEpID8gdHJ1ZSA6IGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0SGFzVHJpYWxGbGFnKCRzdHIpIAoJewoJCSR0aGlzLT5oYXNUcmlhbEZsYWcgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaGFzVHJpYWwoKQoJewoJCXJldHVybiAoaW50dmFsKCR0aGlzLT5oYXNUcmlhbEZsYWcpID09IDEpID8gdHJ1ZSA6IGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VHJpYWxBbW91bnQoJHN0cikKCXsKCgkJJHRoaXMtPnRyaWFsQW1vdW50ID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFRyaWFsQW1vdW50KCRkb0Zvcm1hdD10cnVlKQoJewoJCWlmKCRkb0Zvcm1hdCkgCgkJewoJCQlyZXR1cm4gX21tZigkdGhpcy0+dHJpYWxBbW91bnQsICR0aGlzLT5jdXJyZW5jeSk7CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gbnVtYmVyX2Zvcm1hdChmbG9hdHZhbCgkdGhpcy0+dHJpYWxBbW91bnQpLE1NX0N1cnJlbmN5VXRpbDo6Z2V0UHJlY2lzaW9uRm9yQ3VycmVuY3koJHRoaXMtPmN1cnJlbmN5KSwnLicsJycpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFRyaWFsRHVyYXRpb24oJHN0cikKCXsKCQkkdGhpcy0+dHJpYWxEdXJhdGlvbiA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUcmlhbER1cmF0aW9uKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRyaWFsRHVyYXRpb247Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRSZWJpbGxQZXJpb2QoJHN0cikgCgl7CgkJJHRoaXMtPnJlYmlsbFBlcmlvZCA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZWJpbGxQZXJpb2QoKQoJewoJCXJldHVybiAkdGhpcy0+cmViaWxsUGVyaW9kOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmViaWxsRnJlcXVlbmN5KCRzdHIpIAoJewoJCSR0aGlzLT5yZWJpbGxGcmVxdWVuY3kgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmViaWxsRnJlcXVlbmN5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnJlYmlsbEZyZXF1ZW5jeTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldFRyaWFsRnJlcXVlbmN5KCRzdHIpIAoJewoJCSR0aGlzLT50cmlhbEZyZXF1ZW5jeSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUcmlhbEZyZXF1ZW5jeSgpCgl7CgkJcmV0dXJuICR0aGlzLT50cmlhbEZyZXF1ZW5jeTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldExpbWl0VHJpYWxGbGFnKCRzdHIpIAoJewoJCSR0aGlzLT5saW1pdFRyaWFsRmxhZyA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkb0xpbWl0VHJpYWwoKQoJewoJCXJldHVybiAoaW50dmFsKCR0aGlzLT5saW1pdFRyaWFsRmxhZykgPT0gMSkgPyB0cnVlIDogZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaW1pdFRyaWFsQWx0UHJvZHVjdElkKCRwcm9kdWN0SWQpIAoJewoJCSR0aGlzLT5saW1pdFRyaWFsQWx0UHJvZHVjdElkID0gJHByb2R1Y3RJZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldExpbWl0VHJpYWxBbHRQcm9kdWN0SWQoKQoJewoJCXJldHVybiAoaW50dmFsKCR0aGlzLT5saW1pdFRyaWFsQWx0UHJvZHVjdElkKSAhPSAiMCIpID8gaW50dmFsKCR0aGlzLT5saW1pdFRyaWFsQWx0UHJvZHVjdElkKSA6ICIiOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0TnVtYmVyT2ZQYXltZW50cygkc3RyKSAKCXsKCQkkdGhpcy0+bnVtYmVyT2ZQYXltZW50cyA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXROdW1iZXJPZlBheW1lbnRzKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm51bWJlck9mUGF5bWVudHM7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaW1pdFBheW1lbnRzRmxhZygkc3RyKSAKCXsKCQkkdGhpcy0+bGltaXRQYXltZW50c0ZsYWcgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZG9MaW1pdFBheW1lbnRzKCkKCXsKCQlyZXR1cm4gKGludHZhbCgkdGhpcy0+bGltaXRQYXltZW50c0ZsYWcpID09IDEpID8gdHJ1ZSA6IGZhbHNlOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gaXNSZWN1cnJpbmcoKSAKCXsKCQlyZXR1cm4gaW50dmFsKCR0aGlzLT5yZWJpbGxQZXJpb2QpID4gMDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFB1cmNoYXNlQ29uZmlybWF0aW9uTWVzc2FnZSgpCgl7CgkJaWYoIWVtcHR5KCR0aGlzLT5wdXJjaGFzZUNvbmZpcm1hdGlvbk1zZykpCgkJewoJCQlyZXR1cm4gJHRoaXMtPnB1cmNoYXNlQ29uZmlybWF0aW9uTXNnOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gc2VsZjo6JERGTFRfUFVSQ0hBU0VfQ09ORklSTUFUSU9OX01TRzsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRQdXJjaGFzZUNvbmZpcm1hdGlvbk1lc3NhZ2UoJHN0cikKCXsKCQkkdGhpcy0+cHVyY2hhc2VDb25maXJtYXRpb25Nc2cgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q3VycmVuY3koKQoJewoJCXJldHVybiAkdGhpcy0+Y3VycmVuY3k7Cgl9CgoJcHVibGljIGZ1bmN0aW9uIHNldEN1cnJlbmN5KCRjdXJyZW5jeSkKCXsKCQkkdGhpcy0+Y3VycmVuY3kgPSAkY3VycmVuY3k7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRDb21taXNzaW9uUHJvZmlsZUlkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmNvbW1pc3Npb25Qcm9maWxlSWQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDb21taXNzaW9uUHJvZmlsZUlkKCRpZCkKCXsKCQkkdGhpcy0+Y29tbWlzc2lvblByb2ZpbGVJZCA9ICRpZDsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldENvbW1pc3Npb25Qcm9maWxlKCkKCXsKCQlpZigkdGhpcy0+Y29tbWlzc2lvblByb2ZpbGVJZCAhPSBNTV9Db21taXNzaW9uUHJvZmlsZTo6JERGTFRfQ09NTUlTU0lPTl9QUk9GSUxFX0lEKQoJCXsKCQkJJGNvbW1pc3Npb25Qcm9maWxlID0gbmV3IE1NX0NvbW1pc3Npb25Qcm9maWxlKCR0aGlzLT5jb21taXNzaW9uUHJvZmlsZUlkKTsKCgkJCWlmKCRjb21taXNzaW9uUHJvZmlsZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gJGNvbW1pc3Npb25Qcm9maWxlOwoJCQl9CgkJfQoJCQoJCXJldHVybiBNTV9Db21taXNzaW9uUHJvZmlsZTo6Z2V0RGVmYXVsdENvbW1pc3Npb25Qcm9maWxlKCk7Cgl9Cn0K', 0, '2018-11-21 06:38:55'),
(232, 'advancedreportbase', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKi8KYWJzdHJhY3QgY2xhc3MgTU1fQWR2YW5jZWRSZXBvcnRCYXNlIGV4dGVuZHMgTU1fUmVwb3J0QmFzZQp7CglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGF1dG9FbnF1ZXVlRGVwZW5kZW5jaWVzPXRydWUpCgl7CQoJCWlmKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRGRUFUVVJFX1JFUE9SVElOR19TVUlURSkgIT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKQoJCXsKCQkJLy8gZXhpdCBpZiBjdXJyZW50IE1lbWJlck1vdXNlIGxpY2Vuc2UgZG9lc24ndCBoYXZlIGFjY2VzcyB0byB0aGUgcmVwb3J0aW5nIHN1aXRlCgkJCWV4aXQ7CgkJfQoJCQoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJGF1dG9FbnF1ZXVlRGVwZW5kZW5jaWVzKTsKCX0KfQo=', 0, '2018-11-21 06:38:55'),
(233, 'aweberapibase', 'LyoqCiAqIE1NX0FXZWJlckFQSUJhc2UKICoKICogQmFzZSBvYmplY3QgdGhhdCBhbGwgTU1fQVdlYmVyQVBJIG9iamVjdHMgaW5oZXJpdCBmcm9tLiAgQWxsb3dzIHNwZWNpZmljIHBpZWNlcwogKiBvZiBmdW5jdGlvbmFsaXR5IHRvIGJlIHNoYXJlZCBhY3Jvc3MgYW55IG9iamVjdCBpbiB0aGUgQVBJLCBzdWNoIGFzIHRoZQogKiBhYmlsaXR5IHRvIGludHJvc3BlY3QgdGhlIGNvbGxlY3Rpb25zIG1hcC4KICoKICogQHBhY2thZ2UKICogQHZlcnNpb24gJGlkJAogKi8KY2xhc3MgTU1fQVdlYmVyQVBJQmFzZSB7CgoJLyoqCgkgKiBNYWludGFpbnMgZGF0YSBhYm91dCB3aGF0IGNoaWxkcmVuIGNvbGxlY3Rpb25zIGEgZ2l2ZW4gb2JqZWN0IHR5cGUKCSAqIGNvbnRhaW5zLgoJICovCglzdGF0aWMgcHJvdGVjdGVkICRfY29sbGVjdGlvbk1hcCA9IGFycmF5KAonYWNjb3VudCcgICAgICAgICAgICAgID0+IGFycmF5KCdsaXN0cycsICdpbnRlZ3JhdGlvbnMnKSwKJ2Jyb2FkY2FzdF9jYW1wYWlnbicgICA9PiBhcnJheSgnbGlua3MnLCAnbWVzc2FnZXMnKSwKJ2ZvbGxvd3VwX2NhbXBhaWduJyAgICA9PiBhcnJheSgnbGlua3MnLCAnbWVzc2FnZXMnKSwKJ2xpbmsnICAgICAgICAgICAgICAgICA9PiBhcnJheSgnY2xpY2tzJyksCidsaXN0JyAgICAgICAgICAgICAgICAgPT4gYXJyYXkoJ2NhbXBhaWducycsICdjdXN0b21fZmllbGRzJywgJ3N1YnNjcmliZXJzJywKJ3dlYl9mb3JtcycsICd3ZWJfZm9ybV9zcGxpdF90ZXN0cycpLAond2ViX2Zvcm0nICAgICAgICAgICAgID0+IGFycmF5KCksCid3ZWJfZm9ybV9zcGxpdF90ZXN0JyAgPT4gYXJyYXkoJ2NvbXBvbmVudHMnKSwKKTsKCgkvKioKCSAqIGxvYWRGcm9tVXJsCgkgKgoJICogQ3JlYXRlcyBhbiBvYmplY3QsIGVpdGhlciBjb2xsZWN0aW9uIG9yIGVudHJ5LCBiYXNlZCBvbiB0aGUgZ2l2ZW4KCSAqIFVSTC4KCSAqCgkgKiBAcGFyYW0gbWl4ZWQgJHVybCAgICBVUkwgZm9yIHRoaXMgcmVxdWVzdAoJICogQGFjY2VzcyBwdWJsaWMKCSAqIEByZXR1cm4gTU1fQVdlYmVyRW50cnkgb3IgTU1fQVdlYmVyQ29sbGVjdGlvbgoJICovCglwdWJsaWMgZnVuY3Rpb24gbG9hZEZyb21VcmwoJHVybCkgewoJCSRkYXRhID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICR1cmwpOwoJCXJldHVybiAkdGhpcy0+cmVhZFJlc3BvbnNlKCRkYXRhLCAkdXJsKTsKCX0KCglwcm90ZWN0ZWQgZnVuY3Rpb24gX2NsZWFuVXJsKCR1cmwpIHsKCQlyZXR1cm4gc3RyX3JlcGxhY2UoJHRoaXMtPmFkYXB0ZXItPmFwcC0+Z2V0QmFzZVVyaSgpLCAnJywgJHVybCk7Cgl9CgoJLyoqCgkgKiByZWFkUmVzcG9uc2UKCSAqCgkgKiBJbnRlcnByZXRzIGEgcmVzcG9uc2UsIGFuZCBjcmVhdGVzIHRoZSBhcHByb3ByaWF0ZSBvYmplY3QgZnJvbSBpdC4KCSAqIEBwYXJhbSBtaXhlZCAkcmVzcG9uc2UgICBEYXRhIHJldHVybmVkIGZyb20gYSByZXF1ZXN0IHRvIHRoZSBNTV9BV2ViZXJBUEkKCSAqIEBwYXJhbSBtaXhlZCAkdXJsICAgICAgICBVUkwgdGhhdCB0aGlzIGRhdGEgd2FzIHJlcXVlc3RlZCBmcm9tCgkgKiBAYWNjZXNzIHByb3RlY3RlZAoJICogQHJldHVybiBtaXhlZAoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVhZFJlc3BvbnNlKCRyZXNwb25zZSwgJHVybCkgewoJCSR0aGlzLT5hZGFwdGVyLT5wYXJzZUFzRXJyb3IoJHJlc3BvbnNlKTsKCQlpZiAoIWVtcHR5KCRyZXNwb25zZVsnaWQnXSkpIHsKCQkJcmV0dXJuIG5ldyBNTV9BV2ViZXJFbnRyeSgkcmVzcG9uc2UsICR1cmwsICR0aGlzLT5hZGFwdGVyKTsKCQl9IGVsc2UgaWYgKGlzc2V0KCRyZXNwb25zZVsnZW50cmllcyddKSkgewoJCQlyZXR1cm4gbmV3IE1NX0FXZWJlckNvbGxlY3Rpb24oJHJlc3BvbnNlLCAkdXJsLCAkdGhpcy0+YWRhcHRlcik7CgkJfQoJCXJldHVybiBmYWxzZTsKCX0KfQo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(234, 'checkoutform', 'Y2xhc3MgTU1fQ2hlY2tvdXRGb3JtIGV4dGVuZHMgTU1fQWJzdHJhY3RGb3JtCnsKCXB1YmxpYyAkdXNlcjsKCXB1YmxpYyAkbWVtYmVyRGF0YTsKCXB1YmxpYyAkbWVtYmVyc2hpcExldmVsSWQgPSAwOwoJcHVibGljICRkZWJ1Z01vZGUgPSBmYWxzZTsKCXB1YmxpYyAkY3JudFBhZ2VVUkwgPSAiIjsKCXB1YmxpYyAkYWZmaWxpYXRlSWQgPSAiIjsKCXB1YmxpYyAkc3ViQWZmaWxpYXRlSWQgPSAiIjsKCXB1YmxpYyAkY291cG9uc0F2YWlsYWJsZSA9IGZhbHNlOwoJcHVibGljICRwcm9kdWN0SWQgPSAwOwoJcHVibGljICRwcm9kdWN0TmFtZSA9ICIiOwoJcHVibGljICRhY2Nlc3NOYW1lID0gIiI7CglwdWJsaWMgJHByb2R1Y3RQcmljZSA9ICIiOwoJcHVibGljICRwcm9kdWN0UHJpY2VEZXNjcmlwdGlvbiA9ICIiOwoJcHVibGljICRwcm9kdWN0RGVzY3JpcHRpb24gPSAiIjsKCXB1YmxpYyAkaXNGcmVlID0gZmFsc2U7CglwdWJsaWMgJGlzTWVtYmVyID0gZmFsc2U7CglwdWJsaWMgJGlzU2hpcHBhYmxlID0gZmFsc2U7CglwdWJsaWMgJGlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIgPSBmYWxzZTsKCXB1YmxpYyAkcHJvY2Vzc09yZGVyVXJsID0gIiI7CglwdWJsaWMgJGlnbm9yZUZpZWxkcyA9IGFycmF5KCk7CglwdWJsaWMgJG9wdGlvbmFsRmllbGRzID0gYXJyYXkoKTsKCXB1YmxpYyAkZGlzY291bnRCbG9ja3MgPSBhcnJheSgpOwoJcHVibGljICRzaGlwcGluZ1NhbWVBc0JpbGxpbmcgPSBmYWxzZTsKCXB1YmxpYyAkaXNHaWZ0ID0gZmFsc2U7CglwdWJsaWMgJHNoaXBwaW5nTWV0aG9kcyA9ICIiOwoJcHVibGljICRiaWxsaW5nQ291bnRyeUxpc3QgPSAiIjsKCXB1YmxpYyAkc2hpcHBpbmdDb3VudHJ5TGlzdCA9ICIiOwoJcHVibGljICRvblN1Ym1pdENvZGUgPSAiIjsKCSAKCXByaXZhdGUgJGZpcnN0QnRuUGF5bWVudFNlcml2Y2VTZXQgPSBmYWxzZTsKCXByaXZhdGUgJGZpcnN0QnRuU2VydmljZVRva2VuID0gIiI7Cglwcml2YXRlICRkZmx0QnRuUGF5bWVudFNlcnZpY2VTZXQgPSBmYWxzZTsKCXByaXZhdGUgJGRmbHRCdG5QYXltZW50U2VydmljZVRva2VuID0gIiI7CgkKCQoJLyoqCgkgKiBEZWZhdWx0IGNvbnN0cnVjdG9yLiBUYWtlcyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnMKCSAqIEBwYXJhbSBBcnJheSAkcGFyYW1zIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGZvcm0gY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcGFyYW1zPW51bGwpCgl7CQoJCWlmKCFpc19udWxsKCRwYXJhbXMpKQoJCXsKCQkJaWYoaXNfYXJyYXkoJHBhcmFtcykgJiYgY291bnQoJHBhcmFtcykgPiAwKQoJCQl7CgkJCQlmb3JlYWNoKCRwYXJhbXMgYXMgJGs9PiR2KQoJCQkJewoJCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCQkkJGtleSA9ICR2OwoJCQkJfQoJCQl9CgkJCQoJCQkKCQkJLy8gZGV0ZWN0IGlmIHBheW1lbnQgc2VydmljZSBvdmVycmlkZSBzaG91bGQgYmUgYWN0aXZhdGVkCgkJCWlmIChpc3NldCgkX0dFVFsncHNvJ10pKQoJCQl7CgkJCQkkdGVzdFBheW1lbnRTZXJ2aWNlID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRQYXltZW50U2VydmljZShNTV9QYXltZW50U2VydmljZTo6JFRFU1RfU0VSVklDRV9UT0tFTik7CgkJCQlpZiAoJHRlc3RQYXltZW50U2VydmljZS0+aXNBY3RpdmUoKSAmJiAoJHRlc3RQYXltZW50U2VydmljZS0+Z2V0TW9kZSgpICE9PSBNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRNT0RFX0FMV0FZU19PVkVSUklERSkpCgkJCQl7CgkJCQkJaWYgKCgkcHNvID0gdHJpbSgkX0dFVFsncHNvJ10pKSAhPT0gIiIpCgkJCQkJewoJCQkJCQlpZiAoc3RydG9sb3dlcigkcHNvKSA9PSAib2ZmIikKCQkJCQkJewoJCQkJCQkJTU1fU2Vzc2lvbjo6Y2xlYXIoTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokS0VZX1BBWU1FTlRfU0VSVklDRV9PVkVSUklERSk7CgkJCQkJCX0KCQkJCQkJZWxzZSBpZiAoKCR0ZXN0UGF5bWVudFNlcnZpY2UtPmdldE1vZGUoKSA9PSBNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRNT0RFX09WRVJSSURFX1dJVEhfS0VZKSAmJiAoJHBzbyA9PSAkdGVzdFBheW1lbnRTZXJ2aWNlLT5nZXRUZXN0UHJvY2Vzc29yT3ZlcnJpZGVLZXkoKSkpCgkJCQkJCXsgCgkJCQkJCQkvL3NldCBzZXNzaW9uIHZhbHVlIHRvIGluZGljYXRlIHRlc3QgcHJvY2Vzc29yIGlzIG92ZXJyaWRpbmcgcGF5bWVudCBzZXJ2aWNlCgkJCQkJCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRLRVlfUEFZTUVOVF9TRVJWSUNFX09WRVJSSURFLE1NX1Rlc3RQYXltZW50U2VydmljZTo6JE1PREVfT1ZFUlJJREVfV0lUSF9LRVkpOwoJCQkJCQl9CgkJCQkJCWVsc2UgaWYgKCgkdGVzdFBheW1lbnRTZXJ2aWNlLT5nZXRNb2RlKCkgPT0gTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokTU9ERV9QUk9EVUNUSU9OX09WRVJSSURFX1dJVEhfS0VZKSAmJiAoJHBzbyA9PSAkdGVzdFBheW1lbnRTZXJ2aWNlLT5nZXRQcm9kdWN0aW9uUHJvY2Vzc29yT3ZlcnJpZGVLZXkoKSkpCgkJCQkJCXsgCgkJCQkJCQkvL3NldCBzZXNzaW9uIHZhbHVlIHRvIGluZGljYXRlIHByb2R1Y3Rpb24gcHJvY2Vzc29yIHNob3VsZCBiZSBzd2l0Y2hlZCB0byB0ZXN0IG1vZGUKCQkJCQkJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Rlc3RQYXltZW50U2VydmljZTo6JEtFWV9QQVlNRU5UX1NFUlZJQ0VfT1ZFUlJJREUsTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokTU9ERV9QUk9EVUNUSU9OX09WRVJSSURFX1dJVEhfS0VZKTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJJGRpc2FibGVFeHBsaWNpdExpbmtzID0gKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0RJU0FCTEVfRVhQTElDSVRfTElOS1MpID09ICIxIikgPyB0cnVlIDogZmFsc2U7CgkJCQoJCQkvLyBnZXQgcHJvZHVjdCBJRAoJCQlpZighJGRpc2FibGVFeHBsaWNpdExpbmtzICYmIGlzc2V0KCRfR0VUWyJwcm9kdWN0X2lkIl0pKQoJCQl7CgkJCQkkdGhpcy0+cHJvZHVjdElkID0gaW50dmFsKCRfR0VUWyJwcm9kdWN0X2lkIl0pOwoJCQl9CgkJCWVsc2UgaWYoISRkaXNhYmxlRXhwbGljaXRMaW5rcyAmJiBpc3NldCgkX0dFVFsicGlkIl0pKQoJCQl7CgkJCQkkdGhpcy0+cHJvZHVjdElkID0gaW50dmFsKCRfR0VUWyJwaWQiXSk7CgkJCX0KCQkJZWxzZSBpZihpc3NldCgkX0dFVFsicmlkIl0pKQoJCQl7CgkJCQkkcHJvZHVjdCA9IE1NX1Byb2R1Y3Q6OmZpbmRCeVJlZmVyZW5jZUtleSgkX0dFVFsicmlkIl0pOwoJCQkJCgkJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSR0aGlzLT5wcm9kdWN0SWQgPSAkcHJvZHVjdC0+Z2V0SWQoKTsKCQkJCX0KCQkJfQoJCQllbHNlIGlmKGlzc2V0KCRwcm9kdWN0aWQpICYmICRwcm9kdWN0aWQgIT0gIiIpCgkJCXsKCQkJCSR0aGlzLT5wcm9kdWN0SWQgPSBpbnR2YWwoJHByb2R1Y3RpZCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkdGhpcy0+cHJvZHVjdElkID0gMDsKCQkJfQoJCQkJCgkJCS8vIHZhbGlkYXRlIHByb2R1Y3QgSUQKCQkJaWYoJHRoaXMtPnByb2R1Y3RJZCAhPSAwKQoJCQl7CgkJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCR0aGlzLT5wcm9kdWN0SWQpOwoJCQkJCgkJCQlpZighJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkdGhpcy0+cHJvZHVjdElkID0gMDsKCQkJCX0KCQkJfQoJCQkKCQkJLy8gZ2V0IG1lbWJlcnNoaXAgbGV2ZWwgSUQKCQkJaWYoISRkaXNhYmxlRXhwbGljaXRMaW5rcyAmJiAoaXNzZXQoJF9HRVRbIm1lbWJlcnNoaXBfbGV2ZWxfaWQiXSkgfHwgaXNzZXQoJF9HRVRbIm1pZCJdKSkpCgkJCXsKCQkJCWlmKGlzc2V0KCRfR0VUWyJtZW1iZXJzaGlwX2xldmVsX2lkIl0pKQoJCQkJewoJCQkJCSR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCA9IGludHZhbCgkX0dFVFsibWVtYmVyc2hpcF9sZXZlbF9pZCJdKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPSBpbnR2YWwoJF9HRVRbIm1pZCJdKTsKCQkJCX0KCQkJCQkKCQkJCS8vIG92ZXJyaWRlIGRlZmF1bHQgZm9ybSBwcm9kdWN0IGlmIGl0J3Mgc2V0CgkJCQlpZigkdGhpcy0+cHJvZHVjdElkICE9IDAgJiYgIWlzc2V0KCRfR0VUWyJwcm9kdWN0X2lkIl0pICYmICFpc3NldCgkX0dFVFsicGlkIl0pKQoJCQkJewoJCQkJCSR0aGlzLT5wcm9kdWN0SWQgPSAwOwoJCQkJfQoJCQkJCgkJCQkvLyB2YWxpZGF0ZSBtZW1iZXJzaGlwIGxldmVsIElECgkJCQlpZigkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgIT0gMCkKCQkJCXsKCQkJCQkkbWVtYmVyc2hpcCA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkKTsKCQkJCQkKCQkJCQlpZighJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCSR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCA9IDA7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UgaWYoaXNzZXQoJF9HRVRbInJpZCJdKSkKCQkJewoJCQkJJG1lbWJlcnNoaXAgPSBNTV9NZW1iZXJzaGlwTGV2ZWw6OmZpbmRCeVJlZmVyZW5jZUtleSgkX0dFVFsicmlkIl0pOwoJCQkJCgkJCQlpZigkbWVtYmVyc2hpcC0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCA9ICRtZW1iZXJzaGlwLT5nZXRJZCgpOwoJCQkJfQoJCQkJZWxzZSAKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPSAwOwoJCQkJfQoJCQl9CgkJCWVsc2UgaWYoaXNzZXQoJG1lbWJlcnNoaXBsZXZlbGlkKSAmJiAkbWVtYmVyc2hpcGxldmVsaWQgIT0gIiIpCgkJCXsKCQkJCSR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCA9IGludHZhbCgkbWVtYmVyc2hpcGxldmVsaWQpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkID0gMDsKCQkJfQoJCQkKCQkJLy8gc2V0IGRlZmF1bHQgY2hlY2tvdXQgaXRlbSBpZiBubyBwcm9kdWN0IG9yIG1lbWJlcnNoaXAgbGV2ZWwgd2FzIHNwZWNpZmllZAoJCQlpZigkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPT0gMCAmJiAkdGhpcy0+cHJvZHVjdElkID09IDApCgkJCXsKCQkJCSRkZmx0Q2hlY2tvdXRJdGVtSWQgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9ERUZBVUxUX0NIRUNLT1VUX0lURU1fSUQpOwoJCQoJCQkJaWYoZW1wdHkoJGRmbHRDaGVja291dEl0ZW1JZCkgfHwgaW50dmFsKCRkZmx0Q2hlY2tvdXRJdGVtSWQpID09IC0xKQoJCQkJewoJCQkJCSR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZCA9IE1NX01lbWJlcnNoaXBMZXZlbDo6Z2V0RGVmYXVsdE1lbWJlcnNoaXAoKS0+Z2V0SWQoKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkZGZsdENoZWNrb3V0SXRlbVR5cGUgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9ERUZBVUxUX0NIRUNLT1VUX0lURU1fVFlQRSk7CgkJCQkJCQoJCQkJCWlmKCRkZmx0Q2hlY2tvdXRJdGVtVHlwZSA9PSAibWVtYmVyc2hpcF9sZXZlbCIpCgkJCQkJewoJCQkJCQkkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPSAkZGZsdENoZWNrb3V0SXRlbUlkOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkdGhpcy0+cHJvZHVjdElkID0gJGRmbHRDaGVja291dEl0ZW1JZDsKCQkJCQl9CgkJCQl9CgkJCQkKCQkJCS8vIGRvdWJsZSBjaGVjayB0aGF0IHNvbWV0aGluZyB3YXMgc2V0CgkJCQlpZigkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPT0gMCAmJiAkdGhpcy0+cHJvZHVjdElkID09IDApCgkJCQl7CgkJCQkJJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkID0gTU1fTWVtYmVyc2hpcExldmVsOjpnZXREZWZhdWx0TWVtYmVyc2hpcCgpLT5nZXRJZCgpOwoJCQkJfQoJCQl9CgkJCQoJCQkkdGhpcy0+aW5pdGlhbGl6ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGluaXRpYWxpemUoKQoJewoJCWdsb2JhbCAkY3VycmVudF91c2VyOyAKCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCk7IAoJCS8vIGRldGVybWluZSBpZiB0aGlzIGlzIGFuIGFkbWluaXN0cmF0b3IgcHVyY2hhc2luZyBhIHByb2R1Y3QgZm9yIGEgdXNlciAKCQkvLyBvciBhIHVzZXIgcHVyY2hhc2luZyBhIHByb2R1Y3QgZm9yIHRoZW1zZWx2ZXMKCQlpZihpc3NldCgkX0dFVFtNTV9TZXNzaW9uOjokUEFSQU1fVVNFUl9JRF0pKQoJCXsKCQkJLy8gY2hlY2sgdG8gZW5zdXJlIHRoYXQgY3VycmVudCB1c2VyIGhhcyBwZXJtaXNzaW9uCgkJCS8vIHRvIG9yZGVyIHByb2R1Y3RzIGZvciBvdGhlciB1c2VycwoJCQkkZW1wbG95ZWUgPSBNTV9FbXBsb3llZTo6ZmluZEJ5VXNlcklkKCRjdXJyZW50X3VzZXItPklEKTsKCQkJaWYoTU1fVXRpbHM6OmlzTG9nZ2VkSW4oKSAmJiAkZW1wbG95ZWUtPmNhblBsYWNlU3VwcG9ydE9yZGVyKCkpCgkJCXsKCQkJCSR0aGlzLT51c2VyID0gbmV3IE1NX1VzZXIoJF9HRVRbTU1fU2Vzc2lvbjo6JFBBUkFNX1VTRVJfSURdKTsKCQkJCQoJCQkJaWYoJHRoaXMtPnVzZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkdGhpcy0+aXNDdXN0b21lclN1cHBvcnRPcmRlciA9IHRydWU7CgkJCQkJJHRoaXMtPmlzTWVtYmVyID0gdHJ1ZTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJJGV4ZWN1dGlvblN0YXR1cyA9IG5ldyBNTV9SZXNwb25zZSgiVXNlciBJRCAneyRfR0VUW01NX1Nlc3Npb246OiRQQVJBTV9VU0VSX0lEXX0nIGlzIGludmFsaWQiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkZXhlY3V0aW9uU3RhdHVzID0gbmV3IE1NX1Jlc3BvbnNlKCJZb3UgZG9uJ3QgaGF2ZSBzdWZmaWNpZW50IHBlcm1pc3Npb25zIHRvIHBsYWNlIGFuIG9yZGVyIGZvciBhbm90aGVyIHVzZXIuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCS8vIGlzIHVzZXIgbG9nZ2VkIGluPwoJCQkkdGhpcy0+aXNNZW1iZXIgPSBNTV9VdGlsczo6aXNMb2dnZWRJbigpOwoJCQkKCQkJLy8gZ2V0IGN1cnJlbnQgdXNlcgoJCQlpZigkdGhpcy0+aXNNZW1iZXIpCgkJCXsKCQkJCSR0aGlzLT51c2VyID0gTU1fVXNlcjo6Z2V0Q3VycmVudFdQVXNlcigpOwoJCQl9CgkJfQoJCQoJCS8vIGdldCBwcm9jZXNzIG9yZGVyIFVSTAoJCSR0aGlzLT5wcm9jZXNzT3JkZXJVcmwgPSBNTV9QUk9DRVNTX09SREVSX1VSTDsKCQkKCQlpZihNTV9VdGlsczo6aXNTU0woKSkKCQl7CgkJCSR0aGlzLT5wcm9jZXNzT3JkZXJVcmwgPSBwcmVnX3JlcGxhY2UoIi8oaHR0cFw6KS8iLCAiaHR0cHM6IiwgJHRoaXMtPnByb2Nlc3NPcmRlclVybCk7CgkJfQogIAkKCQkvLyBjaGVjayBpZiBwcm9kdWN0IElEIGlzIGFzc29jaWF0ZWQgd2l0aCBhIG1lbWJlcnNoaXAgbGV2ZWwKCQlpZigkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPT0gMCAmJiAkdGhpcy0+cHJvZHVjdElkICE9IDApCgkJewoJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCk7CgkJCSRwcm9kdWN0LT5zZXRJZCgkdGhpcy0+cHJvZHVjdElkKTsKCQkJJHByb2R1Y3QtPmdldERhdGEoKTsKCQkKCQkJaWYoJHByb2R1Y3QtPmlzVmFsaWQoKSkKCQkJewoJCQkJJG1lbWJlcnNoaXAgPSAkcHJvZHVjdC0+Z2V0QXNzb2NpYXRlZE1lbWJlcnNoaXAoKTsKCQkKCQkJCWlmKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCQl7CgkJCQkJJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkID0gJG1lbWJlcnNoaXAtPmdldElkKCk7CgkJCQl9CgkJCX0KCQl9CgkJCgkJLy8gY2hlY2sgZm9yIGRlYnVnIG1vZGUKCQlpZihpc3NldCgkX0dFVFsiY2hlY2tvdXQtZGVidWciXSkgJiYgJF9HRVRbImNoZWNrb3V0LWRlYnVnIl0gPT0gIjEiKQoJCXsKCQkJJHRoaXMtPmRlYnVnTW9kZSA9ICIxIjsKCQl9CgkJZWxzZQoJCXsKCQkJJHRoaXMtPmRlYnVnTW9kZSA9ICIwIjsKCQl9CgkJCgkJLy8gZ2V0IGFmZmlsaWF0ZSBpbmZvIGRpcmVjdGx5IGZyb20gdGhlIFVSTCBpZiB0aGlzIG9yZGVyIGlzIGJlaW5nIHBsYWNlZCBieQoJCS8vIGEgY3VzdG9tZXIgc3VwcG9ydCByZXAsIG90aGVyd2lzZSBnZXQgaXQgZnJvbSBjb29raWVzIG9yIFVSTAoJCWlmKCR0aGlzLT5pc0N1c3RvbWVyU3VwcG9ydE9yZGVyKQoJCXsKCQkJJGFmZmlsaWF0ZUtleSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0FGRklMSUFURSk7CgkJCSRzdWJBZmZpbGlhdGVLZXkgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9TVUJfQUZGSUxJQVRFKTsKCQkJCgkJCWlmKGlzc2V0KCRfR0VUWyRhZmZpbGlhdGVLZXldKSkKCQkJewoJCQkJJHRoaXMtPmFmZmlsaWF0ZUlkID0gJF9HRVRbJGFmZmlsaWF0ZUtleV07CgkJCX0KCQkJCgkJCWlmKGlzc2V0KCRfR0VUWyRzdWJBZmZpbGlhdGVLZXldKSkKCQkJewoJCQkJJHRoaXMtPnN1YkFmZmlsaWF0ZUlkID0gJF9HRVRbJHN1YkFmZmlsaWF0ZUtleV07CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJJHRoaXMtPmFmZmlsaWF0ZUlkID0gTU1fQ29va2llczo6Z2V0QWZmaWxpYXRlVmFsdWUoKTsKCQkJJHRoaXMtPnN1YkFmZmlsaWF0ZUlkID0gTU1fQ29va2llczo6Z2V0U3ViQWZmaWxpYXRlVmFsdWUoKTsKCQl9CgkJCgkJLy8gZ2V0IGNoZWNrb3V0IHBhZ2UgVVJMCgkJJHRoaXMtPmNybnRQYWdlVVJMID0gTU1fVXRpbHM6OmNvbnN0cnVjdFBhZ2VVcmwoKTsKCQkKCQkvLyByZW1vdmUgZXJyb3IgbWVzc2FnZSBmcm9tIFVSTCBpZiBpdCdzIHRoZXJlCgkJJGluZGV4ID0gc3RycG9zKCR0aGlzLT5jcm50UGFnZVVSTCwgIiYiLk1NX1Nlc3Npb246OiRQQVJBTV9NRVNTQUdFX0tFWS4iPSIpOwoJCQoJCWlmKCRpbmRleCkKCQl7CgkJCSR0aGlzLT5jcm50UGFnZVVSTCA9IHN1YnN0cigkdGhpcy0+Y3JudFBhZ2VVUkwsIDAsICRpbmRleCk7CgkJfQoJCQoJCS8vIGNoZWNrIGZvciBlcnJvciBtZXNzYWdlcyBhbmQgZ2V0IHNhdmVkIGZvcm0gZGF0YQoJCSRzYXZlZEZvcm1EYXRhID0gbnVsbDsKCQkKCQlpZihpc3NldCgkX0dFVFtNTV9TZXNzaW9uOjokUEFSQU1fTUVTU0FHRV9LRVldKSkKCQl7CgkJCSR0aGlzLT5lcnJvciA9IGh0bWxzcGVjaWFsY2hhcnMoc3RyaXBzbGFzaGVzKCRfR0VUW01NX1Nlc3Npb246OiRQQVJBTV9NRVNTQUdFX0tFWV0pLCBFTlRfUVVPVEVTLCAnVVRGLTgnKTsKCQkKCQkJJHNhdmVkRm9ybURhdGEgPSBNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0NIRUNLT1VUX0ZPUk0pOwoJCQoJCQlpZihpc19zZXJpYWxpemVkKCRzYXZlZEZvcm1EYXRhKSkKCQkJewoJCQkJJHNhdmVkRm9ybURhdGEgPSB1bnNlcmlhbGl6ZSgkc2F2ZWRGb3JtRGF0YSk7CgkJCX0KCQkKCQkJLy8gY2xlYXIgc2Vzc2lvbgoJCQlNTV9TZXNzaW9uOjpjbGVhcihNTV9TZXNzaW9uOjokS0VZX0NIRUNLT1VUX0ZPUk0pOwoJCQlNTV9TZXNzaW9uOjpjbGVhcihNTV9TZXNzaW9uOjokUEFSQU1fTUVTU0FHRV9LRVkpOwoJCX0KCQkKCQkvLyBnZXQgcHJvZHVjdCBpbmZvcm1hdGlvbiwgdmFsaWRhdGUgb3JkZXIgYW5kIGRldGVybWluZQoJCS8vIGlmIGJpbGxpbmcgaW5mb3JtYXRpb24gaXMgcmVxdWlyZWQKCQlpZigkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgIT0gMCkKCQl7CgkJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgpOwoJCQkkbWVtYmVyc2hpcC0+c2V0SWQoJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkKTsKCQkJJG1lbWJlcnNoaXAtPmdldERhdGEoKTsKCQkKCQkJaWYoJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQkJewoJCQkJJHRoaXMtPmFjY2Vzc05hbWUgPSAkbWVtYmVyc2hpcC0+Z2V0TmFtZSgpOwoJCQoJCQkJaWYoJG1lbWJlcnNoaXAtPmlzRnJlZSgpID09ICIxIikKCQkJCXsKCQkJCQkkdGhpcy0+aXNGcmVlID0gdHJ1ZTsKCQkJCQkkdGhpcy0+cHJvZHVjdFByaWNlID0gIkZyZWUiOwoJCQkJCSR0aGlzLT5wcm9kdWN0UHJpY2VEZXNjcmlwdGlvbiA9ICJGcmVlIjsKCQkJCQkkdGhpcy0+cHJvZHVjdERlc2NyaXB0aW9uID0gJG1lbWJlcnNoaXAtPmdldERlc2NyaXB0aW9uKCk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHByb2R1Y3QgPSBuZXcgTU1fUHJvZHVjdCgpOwoJCQkJCQkKCQkJCQlpZigkdGhpcy0+cHJvZHVjdElkID09IDApCgkJCQkJewoJCQkJCQkkcHJvZHVjdC0+c2V0SWQoJG1lbWJlcnNoaXAtPmdldERlZmF1bHRQcm9kdWN0KCkpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkcHJvZHVjdC0+c2V0SWQoJHRoaXMtPnByb2R1Y3RJZCk7CgkJCQkJfQoJCQkJCQkKCQkJCQkkcHJvZHVjdC0+Z2V0RGF0YSgpOwoJCQkJCQkKCQkJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQkJCXsKCQkJCQkJJHRoaXMtPnByb2R1Y3ROYW1lID0gJHByb2R1Y3QtPmdldE5hbWUoKTsKCQkJCQkJCgkJCQkJCWlmKCRwcm9kdWN0LT5oYXNUcmlhbCgpKQoJCQkJCQl7CgkJCQkJCQkkdGhpcy0+cHJvZHVjdFByaWNlID0gJHByb2R1Y3QtPmdldFRyaWFsQW1vdW50KHRydWUpOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJHRoaXMtPnByb2R1Y3RQcmljZSA9ICRwcm9kdWN0LT5nZXRQcmljZSh0cnVlKTsKCQkJCQkJfQoJCQkJCQkKCQkJCQkJJHRoaXMtPnByb2R1Y3RDdXJyZW5jeSA9ICRwcm9kdWN0LT5nZXRDdXJyZW5jeSgpOwoJCQkJCQkkdGhpcy0+cHJvZHVjdERlc2NyaXB0aW9uID0gJHByb2R1Y3QtPmdldERlc2NyaXB0aW9uKCk7CgkJCQkJCSR0aGlzLT5wcm9kdWN0UHJpY2VEZXNjcmlwdGlvbiA9ICRwcm9kdWN0LT5nZXRCaWxsaW5nRGVzY3JpcHRpb24odHJ1ZSwgZmFsc2UpOwoJCQkJCQkkdGhpcy0+aXNTaGlwcGFibGUgPSAoYm9vbCkgJHByb2R1Y3QtPmlzU2hpcHBhYmxlKCk7CgkJCQkJCSR0aGlzLT5wcm9kdWN0SWQgPSAkcHJvZHVjdC0+Z2V0SWQoKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJLy8gaW52YWxpZGF0ZSBvcmRlcgoJCQkJCQkkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPSAkdGhpcy0+cHJvZHVjdElkID0gMDsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkvLyBpbnZhbGlkYXRlIG9yZGVyCgkJCQkkdGhpcy0+bWVtYmVyc2hpcExldmVsSWQgPSAkdGhpcy0+cHJvZHVjdElkID0gMDsKCQkJfQoJCX0KCQllbHNlIGlmKCR0aGlzLT5wcm9kdWN0SWQgIT0gMCkKCQl7CgkJCSRwcm9kdWN0ID0gbmV3IE1NX1Byb2R1Y3QoKTsKCQkJJHByb2R1Y3QtPnNldElkKCR0aGlzLT5wcm9kdWN0SWQpOwoJCQkkcHJvZHVjdC0+Z2V0RGF0YSgpOwoJCQoJCQlpZigkcHJvZHVjdC0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkdGhpcy0+cHJvZHVjdE5hbWUgPSAkcHJvZHVjdC0+Z2V0TmFtZSgpOwoJCQkJJGJ1bmRsZSA9ICRwcm9kdWN0LT5nZXRBc3NvY2lhdGVkQnVuZGxlKCk7CgkJCgkJCQlpZigkcHJvZHVjdC0+aGFzVHJpYWwoKSkKCQkJCXsKCQkJCQkkdGhpcy0+cHJvZHVjdFByaWNlID0gJHByb2R1Y3QtPmdldFRyaWFsQW1vdW50KHRydWUpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSR0aGlzLT5wcm9kdWN0UHJpY2UgPSAkcHJvZHVjdC0+Z2V0UHJpY2UodHJ1ZSk7CgkJCQl9CgkJCQkkdGhpcy0+cHJvZHVjdEN1cnJlbmN5ID0gJHByb2R1Y3QtPmdldEN1cnJlbmN5KCk7CgkJCQkkdGhpcy0+cHJvZHVjdERlc2NyaXB0aW9uID0gJHByb2R1Y3QtPmdldERlc2NyaXB0aW9uKCk7CgkJCQkkdGhpcy0+cHJvZHVjdFByaWNlRGVzY3JpcHRpb24gPSAkcHJvZHVjdC0+Z2V0QmlsbGluZ0Rlc2NyaXB0aW9uKHRydWUsIGZhbHNlKTsKCQkJCSR0aGlzLT5pc1NoaXBwYWJsZSA9IChib29sKSAkcHJvZHVjdC0+aXNTaGlwcGFibGUoKTsKCQkKCQkJCS8vIGlmIHRoZSBwcm9kdWN0IGlzIGFzc29jaWF0ZWQgd2l0aCBhIGJ1bmRsZQoJCQkJaWYoJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCSR0aGlzLT5hY2Nlc3NOYW1lID0gJGJ1bmRsZS0+Z2V0TmFtZSgpOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJLy8gaW52YWxpZGF0ZSBvcmRlcgoJCQkJJHRoaXMtPm1lbWJlcnNoaXBMZXZlbElkID0gJHRoaXMtPnByb2R1Y3RJZCA9IDA7CgkJCX0KCQl9CgkJCgkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkZXhlY3V0aW9uU3RhdHVzKSkKCQl7CgkJCSR0aGlzLT5pc1ZhbGlkID0gdHJ1ZTsKCQkKCQkJLy8gc2V0IGRlZmF1bHQgbWVtYmVyIGRhdGEgdmFsdWVzCgkJCSR0aGlzLT5tZW1iZXJEYXRhID0gYXJyYXkoKTsKCQkJCgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF91c2VyX2lkIl0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2ZpcnN0X25hbWUiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfbGFzdF9uYW1lIl0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2VtYWlsIl0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2VtYWlsX2NvbmZpcm0iXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfdXNlcm5hbWUiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfcGhvbmUiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfcGFzc3dvcmQiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19hZGRyZXNzIl0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY2l0eSJdID0gIiI7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX3N0YXRlIl0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfemlwIl0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSJdID0gIiI7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19tZXRob2QiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcyJdID0gIiI7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jaXR5Il0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIl0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCJdID0gIiI7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5Il0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2NjX251bWJlciJdID0gIiI7CgkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9jY19leHBfbW9udGgiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfY2NfZXhwX3llYXIiXSA9ICIiOwoJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfY2NfY3Z2Il0gPSAiIjsKCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2NvdXBvbl9jb2RlIl0gPSAiIjsKCQkJCgkJCWlmKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1VTRV9DSEVDS09VVF9GT1JNX1RFU1RfREFUQSkgPT0gIjEiKQoJCQl7CgkJCQkkdGVzdERhdGEgPSBNTV9UZXN0RGF0YVV0aWxzOjpnZXRDaGVja291dEZvcm1UZXN0RGF0YSgpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2ZpcnN0X25hbWUiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9maXJzdF9uYW1lIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfbGFzdF9uYW1lIl0gPSBNTV9UZXN0RGF0YVV0aWxzOjpnZXRUZXN0VmFsdWUoJHRlc3REYXRhLCAibW1fZmllbGRfbGFzdF9uYW1lIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfZW1haWwiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9lbWFpbCIsIHRydWUpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2VtYWlsX2NvbmZpcm0iXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9lbWFpbCIsIHRydWUpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3VzZXJuYW1lIl0gPSBNTV9UZXN0RGF0YVV0aWxzOjpnZXRUZXN0VmFsdWUoJHRlc3REYXRhLCAibW1fZmllbGRfdXNlcm5hbWUiLCB0cnVlKTsKCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9wYXNzd29yZCJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX3Bhc3N3b3JkIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfcGhvbmUiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9waG9uZSIpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzcyJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzcyIpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY2l0eSJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX2JpbGxpbmdfY2l0eSIpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9iaWxsaW5nX3N0YXRlIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ196aXAiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9iaWxsaW5nX3ppcCIpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSIpOwoJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX3NoaXBwaW5nX2NpdHkiKTsKCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfemlwIl0gPSBNTV9UZXN0RGF0YVV0aWxzOjpnZXRUZXN0VmFsdWUoJHRlc3REYXRhLCAibW1fZmllbGRfc2hpcHBpbmdfemlwIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiKTsKCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9jY19udW1iZXIiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9jY19udW1iZXIiKTsKCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9jY19leHBfbW9udGgiXSA9IE1NX1Rlc3REYXRhVXRpbHM6OmdldFRlc3RWYWx1ZSgkdGVzdERhdGEsICJtbV9maWVsZF9jY19leHBfbW9udGgiKTsKCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9jY19leHBfeWVhciJdID0gTU1fVGVzdERhdGFVdGlsczo6Z2V0VGVzdFZhbHVlKCR0ZXN0RGF0YSwgIm1tX2ZpZWxkX2NjX2V4cF95ZWFyIik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfY2NfY3Z2Il0gPSBNTV9UZXN0RGF0YVV0aWxzOjpnZXRUZXN0VmFsdWUoJHRlc3REYXRhLCAibW1fZmllbGRfY2NfY3Z2Iik7CgkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfbWV0aG9kIl0gPSAiIjsKCQkJfQoJCQkKCQkJaWYoJHNhdmVkRm9ybURhdGEgJiYgaXNfYXJyYXkoJHNhdmVkRm9ybURhdGEpKQoJCQl7CgkJCQlmb3JlYWNoKCRzYXZlZEZvcm1EYXRhIGFzICRrZXk9PiR2YWx1ZSkKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVska2V5XSA9IHN0cmlwc2xhc2hlcygkc2F2ZWRGb3JtRGF0YVska2V5XSk7CgkJCQl9CgkJCQkKCQkJCS8vIGdldCBjdXN0b20gZmllbGQgbGFiZWxzCgkJCQkkY3VzdG9tRmllbGRzID0gTU1fQ3VzdG9tRmllbGQ6OmdldEN1c3RvbUZpZWxkc0xpc3QoKTsKCQkJCQkKCQkJCWZvcmVhY2goJGN1c3RvbUZpZWxkcyBhcyAkaWQ9PiRkaXNwbGF5TmFtZSkKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkXyIuJGlkLiJfbGFiZWwiXSA9IHN0cnRvbG93ZXIoJGRpc3BsYXlOYW1lKTsKCQkJCX0KCQkJfQoJCQllbHNlIGlmKCR0aGlzLT5pc01lbWJlcikKCQkJewoJCQkJaWYoJHRoaXMtPnVzZXItPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfdXNlcl9pZCJdID0gJHRoaXMtPnVzZXItPmdldElkKCk7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2VtYWlsIl0gPSAkdGhpcy0+dXNlci0+Z2V0RW1haWwoKTsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfZW1haWxfY29uZmlybSJdID0gJHRoaXMtPnVzZXItPmdldEVtYWlsKCk7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3VzZXJuYW1lIl0gPSAkdGhpcy0+dXNlci0+Z2V0VXNlcm5hbWUoKTsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfZmlyc3RfbmFtZSJdID0gJHRoaXMtPnVzZXItPmdldEZpcnN0TmFtZSgpOwoJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9sYXN0X25hbWUiXSA9ICR0aGlzLT51c2VyLT5nZXRMYXN0TmFtZSgpOwoJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9waG9uZSJdID0gJHRoaXMtPnVzZXItPmdldFBob25lKCk7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzcyJdID0gJHRoaXMtPnVzZXItPmdldEJpbGxpbmdBZGRyZXNzKCk7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY2l0eSJdID0gJHRoaXMtPnVzZXItPmdldEJpbGxpbmdDaXR5KCk7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSA9ICR0aGlzLT51c2VyLT5nZXRCaWxsaW5nU3RhdGUoKTsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ196aXAiXSA9ICR0aGlzLT51c2VyLT5nZXRCaWxsaW5nWmlwQ29kZSgpOwoJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiXSA9ICR0aGlzLT51c2VyLT5nZXRCaWxsaW5nQ291bnRyeSgpOwoJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19tZXRob2QiXSA9ICIiOwoJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIl0gPSAkdGhpcy0+dXNlci0+Z2V0U2hpcHBpbmdBZGRyZXNzKCk7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NpdHkiXSA9ICR0aGlzLT51c2VyLT5nZXRTaGlwcGluZ0NpdHkoKTsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSA9ICR0aGlzLT51c2VyLT5nZXRTaGlwcGluZ1N0YXRlKCk7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCJdID0gJHRoaXMtPnVzZXItPmdldFNoaXBwaW5nWmlwQ29kZSgpOwoJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5Il0gPSAkdGhpcy0+dXNlci0+Z2V0U2hpcHBpbmdDb3VudHJ5KCk7CgkJCQkJCQoJCQkJCS8vIGdldCBjdXN0b20gZmllbGQgZGF0YQoJCQkJCSRjdXN0b21GaWVsZHMgPSBNTV9DdXN0b21GaWVsZDo6Z2V0Q3VzdG9tRmllbGREYXRhQnlVc2VyKCR0aGlzLT51c2VyLT5nZXRJZCgpKTsKCQkJCQkJCgkJCQkJZm9yZWFjaCgkY3VzdG9tRmllbGRzIGFzICRmaWVsZCkKCQkJCQl7CgkJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9jdXN0b21fZmllbGRfIi4kZmllbGQtPmlkXSA9ICRmaWVsZC0+dmFsdWU7CgkJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9jdXN0b21fZmllbGRfIi4kZmllbGQtPmlkLiJfbGFiZWwiXSA9IHN0cnRvbG93ZXIoJGZpZWxkLT5kaXNwbGF5X25hbWUpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCS8vIGdldCBjdXN0b20gZmllbGQgbGFiZWxzCgkJCQkkY3VzdG9tRmllbGRzID0gTU1fQ3VzdG9tRmllbGQ6OmdldEN1c3RvbUZpZWxkc0xpc3QoKTsKCQkJCQkKCQkJCWZvcmVhY2goJGN1c3RvbUZpZWxkcyBhcyAkaWQ9PiRkaXNwbGF5TmFtZSkKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkXyIuJGlkLiJfbGFiZWwiXSA9IHN0cnRvbG93ZXIoJGRpc3BsYXlOYW1lKTsKCQkJCX0KCQkJfQoJCQkKCQkJLy8gZ3JhYiBtZW1iZXIgZGF0YSBmcm9tICRfUkVRVUVTVCBvYmplY3QKCQkJaWYoJF9SRVFVRVNUKQoJCQl7CgkJCQkkdmFsaWRGaWVsZE5hbWVzID0gInVzZXJfaWQsZmlyc3RfbmFtZSxsYXN0X25hbWUsZW1haWwscGhvbmUsYmlsbGluZ19hZGRyZXNzLGJpbGxpbmdfY2l0eSxiaWxsaW5nX3N0YXRlLGJpbGxpbmdfemlwLGJpbGxpbmdfY291bnRyeSwiOwoJCQkJJHZhbGlkRmllbGROYW1lcyAuPSAic2hpcHBpbmdfYWRkcmVzcyxzaGlwcGluZ19jaXR5LHNoaXBwaW5nX3N0YXRlLHNoaXBwaW5nX3ppcCxzaGlwcGluZ19jb3VudHJ5LGdpZnQiOwoJCQkKCQkJCWZvcmVhY2goJF9SRVFVRVNUIGFzICRrZXk9PiR2YWx1ZSkKCQkJCXsKCQkJCQkka2V5ID0gc3RydG9sb3dlcigka2V5KTsKCQkJCQkKCQkJCQkvLyBzZWUgaWYgY3VzdG9tIGZpZWxkIGRhdGEgaXMgY29udGFpbmVkIGluIHRoZSAkX1JFUVVFU1Qgb2JqZWN0CgkJCQkJaWYoc3RycG9zKCRrZXksICJjZl8iKSAhPT0gZmFsc2UpCgkJCQkJewoJCQkJCQkkYXJyID0gZXhwbG9kZSgiXyIsICRrZXkpOwoJCQkJCQkKCQkJCQkJaWYoY291bnQoJGFycikgPT0gMikKCQkJCQkJewoJCQkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF8iLiRhcnJbMV1dID0gJHZhbHVlOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UgaWYoc3RycG9zKCR2YWxpZEZpZWxkTmFtZXMsICRrZXkpICE9PSBmYWxzZSkKCQkJCQl7CgkJCQkJCWlmKCRrZXkgPT0gImdpZnQiKQoJCQkJCQl7CgkJCQkJCQlpZigkdmFsdWUgPT0gInllcyIpCgkJCQkJCQl7CgkJCQkJCQkJJHRoaXMtPmlzR2lmdCA9IHRydWU7CgkJCQkJCQl9CgkJCQkJCQllbHNlIAoJCQkJCQkJewoJCQkJCQkJCSR0aGlzLT5pc0dpZnQgPSBmYWxzZTsKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCQllbHNlIAoJCQkJCQl7CgkJCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfIi4ka2V5XSA9ICR2YWx1ZTsKCQkJCQkJfQoJCQkJCX0KCQkJCX0KCQkJfQoJCQoJCQkvLyBnZXQgY291cG9uIGNvZGUKCQkJaWYoISR0aGlzLT5pc0ZyZWUpCgkJCXsKCQkJCSR0aGlzLT5jb3Vwb25zQXZhaWxhYmxlID0gTU1fQ291cG9uOjpoYXNBdmFpbGFibGVDb3Vwb24oKTsKCQkJCQoJCQkJaWYoaXNzZXQoJF9HRVRbImNvdXBvbiJdKSkKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfY291cG9uX2NvZGUiXSA9ICRfR0VUWyJjb3Vwb24iXTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfY291cG9uX2NvZGUiXSA9IE1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9DT1VQT05fVkFMVUUpOwoJCQkJfQoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRoaXMtPmNvdXBvbnNBdmFpbGFibGUgPSBmYWxzZTsKCQkJfQoJCQoJCQkvLyBzaGlwcGluZyBjb25maWd1cmF0aW9uLCB0ZXN0IHRvIHNlZSBpZiBzaGlwcGluZyBhbmQgYmlsbGluZyBhZGRyZXNzZXMgZXF1YWwKCQkJJGJpbGxpbmdTaGlwcGluZ0ZpZWxkTWFwID0gYXJyYXkoCgkJCQkibW1fZmllbGRfYmlsbGluZ19hZGRyZXNzIiA9PiAibW1fZmllbGRfc2hpcHBpbmdfYWRkcmVzcyIsCgkJCQkibW1fZmllbGRfYmlsbGluZ19jaXR5IiA9PiAibW1fZmllbGRfc2hpcHBpbmdfY2l0eSIsCgkJCQkibW1fZmllbGRfYmlsbGluZ19zdGF0ZSIgPT4gIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIiwKCQkJCSJtbV9maWVsZF9iaWxsaW5nX3ppcCIgPT4gIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCIsCgkJCQkibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5IiA9PiAibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSIKCQkJKTsKCQkJCgkJCSRiaWxsaW5nU2hpcHBpbmdFcXVhbFRlc3QgPSB0cnVlOwoJCQkKCQkJaWYoIWVtcHR5KCR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIl0pIAoJCQkJCSYmICFlbXB0eSgkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdKSAKCQkJCQkmJiAhZW1wdHkoJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCJdKSkKCQkJewoJCQkJZm9yZWFjaCgkYmlsbGluZ1NoaXBwaW5nRmllbGRNYXAgYXMgJGJpbGxpbmdGaWVsZD0+JHNoaXBwaW5nRmllbGQpCgkJCQl7CgkJCQkJJGJpbGxpbmdTaGlwcGluZ0VxdWFsVGVzdCA9ICgkdGhpcy0+bWVtYmVyRGF0YVskYmlsbGluZ0ZpZWxkXSA9PSAkdGhpcy0+bWVtYmVyRGF0YVskc2hpcHBpbmdGaWVsZF0pOwoJCQkJCQoJCQkJCWlmKCRiaWxsaW5nU2hpcHBpbmdFcXVhbFRlc3QgPT0gZmFsc2UpCgkJCQkJewoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCX0KCQkJCgkJCWlmKCR0aGlzLT5pc1NoaXBwYWJsZSA9PSBmYWxzZSB8fCAkYmlsbGluZ1NoaXBwaW5nRXF1YWxUZXN0ID09IHRydWUpCgkJCXsKCQkJCSR0aGlzLT5zaGlwcGluZ1NhbWVBc0JpbGxpbmcgPSB0cnVlOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRoaXMtPnNoaXBwaW5nU2FtZUFzQmlsbGluZyA9IGZhbHNlOwoJCQl9CgkJCQoJCQkvLyBjb3VudHJpZXMKCQkJaWYoaXNfbnVsbCgkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0pIHx8ICR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiXSA9PSAiIikKCQkJewoJCQkJJGRmbHRDb3VudHJ5ID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfREZMVF9DT1VOVFJZX1NFTEVDVElPTik7CgkJCQkKCQkJCWlmKCFlbXB0eSgkZGZsdENvdW50cnkpKQoJCQkJewoJCQkJCSR0aGlzLT5tZW1iZXJEYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiXSA9ICRkZmx0Q291bnRyeTsKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSJdID0gTU1fQ291bnRyeVV0aWxzOjokREZMVF9DT1VOVFJZX0lTTzsKCQkJCX0KCQkJfQoJCQkKCQkJJHRoaXMtPmJpbGxpbmdDb3VudHJ5TGlzdCA9IE1NX0h0bWxVdGlsczo6Z2V0Q291bnRyeUxpc3QoJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSJdKTsKICAgICAgCQkkdGhpcy0+YmlsbGluZ0NvdW50cnlTdWJkaXZpc2lvbkxpc3QgPSBNTV9Db3VudHJ5U3ViZGl2aXNpb25VdGlsczo6Z2V0Q291bnRyeVN1YmRpdnNpb25MaXN0KGFycmF5X2tleXMoTU1fQ291bnRyeVV0aWxzOjpnZXRDb3VudHJ5TGlzdCgpKSk7CgkKCQkJaWYoaXNfbnVsbCgkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdKSB8fCAkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID09ICIiKQoJCQl7CgkJCQkkZGZsdENvdW50cnkgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9ERkxUX0NPVU5UUllfU0VMRUNUSU9OKTsKCQkJCQoJCQkJaWYoIWVtcHR5KCRkZmx0Q291bnRyeSkpCgkJCQl7CgkJCQkJJHRoaXMtPm1lbWJlckRhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXSA9ICRkZmx0Q291bnRyeTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID0gTU1fQ291bnRyeVV0aWxzOjokREZMVF9DT1VOVFJZX0lTTzsKCQkJCX0KCQkJfQoJCgkJCSR0aGlzLT5zaGlwcGluZ0NvdW50cnlMaXN0ID0gTU1fSHRtbFV0aWxzOjpnZXRDb3VudHJ5TGlzdCgkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdKTsKICAgICAgCQkkdGhpcy0+c2hpcHBpbmdDb3VudHJ5U3ViZGl2aXNpb25MaXN0ID0gJHRoaXMtPmJpbGxpbmdDb3VudHJ5U3ViZGl2aXNpb25MaXN0OwoJCX0KCQllbHNlCgkJewoJCQkkdGhpcy0+aXNWYWxpZCA9IGZhbHNlOwoJCQkkdGhpcy0+ZXJyb3IgPSAkZXhlY3V0aW9uU3RhdHVzLT5tZXNzYWdlOwoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIHJlc3BvbnNpYmxlIGZvciBnZW5lcmF0aW5nIGFsbCBvZiB0aGUgSFRNTCB0aGF0IHNob3VsZCBzaG93IHVwIGF0IAoJICogdGhlIHRvcCBvZiB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbi4KCSAqIEByZXR1cm4gU3RyaW5nIGhlYWRlciBIVE1MIGZvciB0aGUgY2hlY2tvdXQgZm9ybQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2VuZXJhdGVGb3JtSGVhZGVyKCkKCXsKCQkkc3RyID0gIiI7CgkJCgkJJHN0ciAuPSAkdGhpcy0+Z2V0SmF2YXNjcmlwdEluY2x1ZGVzKCk7CgkJCgkJJHN0ciAuPSAiPGZvcm0gaWQ9J21tX2NoZWNrb3V0X2Zvcm0nIG5hbWU9J21tX2NoZWNrb3V0X2Zvcm0nIGFjdGlvbj0neyR0aGlzLT5wcm9jZXNzT3JkZXJVcmx9JyAiOwoJCQoJCWlmKCR0aGlzLT5vblN1Ym1pdENvZGUgIT0gIiIpCgkJewoJCQkkc3RyIC49ICR0aGlzLT5vblN1Ym1pdENvZGU7CgkJfQoJCWVsc2UKCQl7CgkJCSRzdHIgLj0gIm9uc3VibWl0PVwicmV0dXJuIGZhbHNlO1wiIjsKCQl9IAoJCQoJCSRzdHIgLj0gIiBtZXRob2Q9J3Bvc3QnPiI7IAoJCSRzdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9tZW1iZXJzaGlwX2xldmVsX2lkJyBuYW1lPSdtbV9tZW1iZXJzaGlwX2xldmVsX2lkJyB2YWx1ZT0neyR0aGlzLT5tZW1iZXJzaGlwTGV2ZWxJZH0nIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fcHJvZHVjdF9pZCcgbmFtZT0nbW1fcHJvZHVjdF9pZCcgdmFsdWU9J3skdGhpcy0+cHJvZHVjdElkfScgLz4iOwoJCSRzdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9pc19tZW1iZXInIG5hbWU9J21tX2lzX21lbWJlcicgdmFsdWU9JyIuKCgkdGhpcy0+aXNNZW1iZXIgPT0gdHJ1ZSkgPyAiMSIgOiAiMCIpLiInIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fZmllbGRfdXNlcl9pZCcgbmFtZT0nbW1fZmllbGRfdXNlcl9pZCcgdmFsdWU9JyIuKCgkdGhpcy0+aXNNZW1iZXIgPT0gdHJ1ZSkgPyAkdGhpcy0+bWVtYmVyRGF0YVsibW1fZmllbGRfdXNlcl9pZCJdIDogIjAiKS4iJyAvPiI7CgkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2lzX2ZyZWUnIG5hbWU9J21tX2lzX2ZyZWUnIHZhbHVlPSciLigoJHRoaXMtPmlzRnJlZSA9PSB0cnVlKSA/ICIxIiA6ICIwIikuIicgLz4iOwoJICAgCSRzdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9pc19naWZ0JyBuYW1lPSdtbV9pc19naWZ0JyB2YWx1ZT0nIi4oKCR0aGlzLT5pc0dpZnQgPT0gdHJ1ZSkgPyAiMSIgOiAiMCIpLiInIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1faXNfc2hpcHBhYmxlJyBuYW1lPSdtbV9pc19zaGlwcGFibGUnIHZhbHVlPSciLigoJHRoaXMtPmlzU2hpcHBhYmxlID09IHRydWUpID8gIjEiIDogIjAiKS4iJyAvPiI7CgkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2NoZWNrb3V0X3VybCcgbmFtZT0nbW1fY2hlY2tvdXRfdXJsJyB2YWx1ZT0neyR0aGlzLT5jcm50UGFnZVVSTH0nIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fY2hlY2tvdXRfZGVidWdfbW9kZScgbmFtZT0nbW1fY2hlY2tvdXRfZGVidWdfbW9kZScgdmFsdWU9J3skdGhpcy0+ZGVidWdNb2RlfScgLz4iOwoJICAgCSRzdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9maWVsZF9wYXltZW50X3NlcnZpY2UnIG5hbWU9J21tX2ZpZWxkX3BheW1lbnRfc2VydmljZScgLz4iOyAKCSAgIAkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fZmllbGRfYmlsbGluZ19lcXVhbHNfc2hpcHBpbmcnIG5hbWU9J21tX2ZpZWxkX2JpbGxpbmdfZXF1YWxzX3NoaXBwaW5nJyB2YWx1ZT0nIi4oKCR0aGlzLT5zaGlwcGluZ1NhbWVBc0JpbGxpbmcgPT0gdHJ1ZSkgPyAiMSIgOiAiMCIpLiInIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1faXNfYWRtaW4nIHZhbHVlPSciLigoTU1fRW1wbG95ZWU6OmlzRW1wbG95ZWUoKSA9PSB0cnVlIHx8IGN1cnJlbnRfdXNlcl9jYW4oJ21hbmFnZV9vcHRpb25zJykpID8gIjEiIDogIjAiKS4iJyAvPiI7CgkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2lzX2N1c3RvbWVyX3N1cHBvcnRfb3JkZXInIG5hbWU9J21tX2lzX2N1c3RvbWVyX3N1cHBvcnRfb3JkZXInIHZhbHVlPSciLigoJHRoaXMtPmlzQ3VzdG9tZXJTdXBwb3J0T3JkZXIgPT0gdHJ1ZSkgPyAiMSIgOiAiMCIpLiInIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fZGF0YV9wcm9kdWN0X3ByaWNlJyB2YWx1ZT0nIi4oKCR0aGlzLT5wcm9kdWN0UHJpY2UgPT0gIiIgfHwgc3RydG9sb3dlcigkdGhpcy0+cHJvZHVjdFByaWNlKSA9PSAiZnJlZSIpID8gX21tZigwLjAwKSA6ICR0aGlzLT5wcm9kdWN0UHJpY2UpLiInIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fZGF0YV9zaGlwcGluZ19wcmljZScgdmFsdWU9JzAnIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fZGF0YV9kaXNjb3VudCcgdmFsdWU9JzAnIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fZG9fY29tcCcgdmFsdWU9JzAnIC8+IjsKCQkkc3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0naGFzRm9ybVN1Ym1pdHRlZCcgdmFsdWU9JycgLz4iOwoJCQoJCWlmKGlzc2V0KCR0aGlzLT5hZmZpbGlhdGVJZCkgJiYgJHRoaXMtPmFmZmlsaWF0ZUlkICE9ICIiKSAKCQl7CgkJCSRzdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIG5hbWU9J21tX2ZpZWxkX2FmZmlsaWF0ZV9pZCcgdmFsdWU9J3skdGhpcy0+YWZmaWxpYXRlSWR9Jy8+IjsKCQl9CgkJCgkJaWYoaXNzZXQoJHRoaXMtPnN1YkFmZmlsaWF0ZUlkKSAmJiAkdGhpcy0+c3ViQWZmaWxpYXRlSWQgIT0gIiIpIAoJCXsKCQkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgbmFtZT0nbW1fZmllbGRfc3ViX2FmZmlsaWF0ZV9pZCcgdmFsdWU9J3skdGhpcy0+c3ViQWZmaWxpYXRlSWR9Jy8+IjsKCQl9CgkJCgkJaWYoISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCXsKCQkJJHN0ciAuPSAiPHAgY2xhc3M9XCJtbS1mb3JtRXJyb3JcIj5NaXNzaW5nIFBheW1lbnQgTWV0aG9kOiBObyBwYXltZW50IG1ldGhvZHMgaGF2ZSBiZWVuIGNvbmZpZ3VyZWQgZm9yIHRoaXMgc2l0ZS48L3A+IjsKCQl9CgkJCgkJcmV0dXJuICRzdHI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZ2VuZXJhdGluZyBhbGwgb2YgdGhlIEhUTUwgdGhhdCBzaG91bGQgc2hvdyB1cCBhdAoJICogdGhlIGJvdHRvbSBvZiB0aGUgZm9ybSBiYXNlZCBvbiB0aGUgdGhlIGN1cnJlbnQgY29uZmlndXJhdGlvbi4KCSAqIAoJICogQHJldHVybiBTdHJpbmcgZm9vdGVyIEhUTUwgZm9yIHRoZSBjaGVja291dCBmb3JtCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZUZvcm1Gb290ZXIoKQoJewoJCSRzdHIgPSAiIjsKCQkKCQkvLyBhZGQgZmllbGRzIHRvIGlnbm9yZQoJCWZvcmVhY2ggKCR0aGlzLT5pZ25vcmVGaWVsZHMgYXMgJGZpZWxkKQoJCXsKCQkJLy8gY3JlZGl0IGNhcmQgaW5mbyBhbmQgZW1haWwgYWRkcmVzcyBjYW4ndCBiZSBpZ25vcmVkCgkJCWlmKGlzc2V0KCRmaWVsZC0+bmFtZSkgJiYgJGZpZWxkLT5uYW1lICE9ICJlbWFpbCIgJiYgJGZpZWxkLT5uYW1lICE9ICJjY19udW1iZXIiCgkJCQkJJiYgJGZpZWxkLT5uYW1lICE9ICJjY19leHBfbW9udGgiICYmICRmaWVsZC0+bmFtZSAhPSAiY2NfZXhwX3llYXIiICYmICRmaWVsZC0+bmFtZSAhPSAiY2NfY3Z2IikKCQkJewoJCQkJJHZhbHVlID0gIiI7CgkJCQkJCgkJCQlpZihpc3NldCgkZmllbGQtPnZhbHVlKSkKCQkJCXsKCQkJCQkkdmFsdWUgPSAkZmllbGQtPnZhbHVlOwoJCQkJfQoJCQkJCQoJCQkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2ZpZWxkX3skZmllbGQtPm5hbWV9X292ZXJyaWRlJyBuYW1lPSdtbV9maWVsZF97JGZpZWxkLT5uYW1lfV9vdmVycmlkZScgdmFsdWU9J3skdmFsdWV9JyAvPgoiOwoJCQl9CgkJfQoJCQoJCS8vIGFkZCBvcHRpb25hbCBmaWVsZHMKCQlmb3JlYWNoICgkdGhpcy0+b3B0aW9uYWxGaWVsZHMgYXMgJGZpZWxkKQoJCXsKCQkJLy8gY3JlZGl0IGNhcmQgaW5mbyBhbmQgZW1haWwgYWRkcmVzcyBjYW4ndCBiZSBvcHRpb25hbAoJCQlpZihpc3NldCgkZmllbGQtPm5hbWUpICYmICRmaWVsZC0+bmFtZSAhPSAiZW1haWwiICYmICRmaWVsZC0+bmFtZSAhPSAiY2NfbnVtYmVyIgoJCQkJCSYmICRmaWVsZC0+bmFtZSAhPSAiY2NfZXhwX21vbnRoIiAmJiAkZmllbGQtPm5hbWUgIT0gImNjX2V4cF95ZWFyIiAmJiAkZmllbGQtPm5hbWUgIT0gImNjX2N2diIpCgkJCXsJCQoJCQkJJHN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2ZpZWxkX3skZmllbGQtPm5hbWV9X29wdGlvbmFsJyBuYW1lPSdtbV9maWVsZF97JGZpZWxkLT5uYW1lfV9vcHRpb25hbCcgLz4KIjsKCQkJfQoJCX0KCQkgICAKCQkkc3RyIC49ICI8ZGl2IHN0eWxlPVwiYm9yZGVyOiAwIG5vbmU7IGhlaWdodDogMDsgd2lkdGg6IDA7IHBhZGRpbmc6IDA7IG1hcmdpbjogMDsgb3ZlcmZsb3c6IGhpZGRlbjtcIj48aW5wdXQgdHlwZT1cInN1Ym1pdFwiIHRhYmluZGV4PVwiLTFcIi8+PC9kaXY+CiI7CgkJCgkJJGZvcm1JZCA9IE1NX1V0aWxzOjpjcmVhdGVSYW5kb21TdHJpbmcoMTApOwoJCSRzdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9zdWJtaXNzaW9uX211dGV4JyBuYW1lPSdtbV9zdWJtaXNzaW9uX211dGV4JyB2YWx1ZT0neyRmb3JtSWR9JyAvPiI7CgkJJHN0ciAuPSAiPC9mb3JtPgoiOwoJCSRzdHIgLj0gJHRoaXMtPmdldEluaXRKYXZhc2NyaXB0KCR0aGlzLT5tZW1iZXJEYXRhKTsKCQoJCQoJCSRzdHIuPSAkdGhpcy0+Z2V0VGVzdE1vZGVCYW5uZXIoKTsKCQlyZXR1cm4gJHN0cjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgdGhlIGluY2x1ZGUgc3RhdGVtZW50cyBmb3IgcmVxdWlyZWQgamF2YXNjcmlwdCBmaWxlcy4KCSAqIEBwYXJhbSBlbnF1ZXVlU2NyaXB0cyBpbmRpY2F0ZXMgd2hpY2ggbWV0aG9kIHRvIHVzZSBmb3IgaW5jbHVkaW5nIHRoZSBqYXZhc2NyaXB0IGZpbGVzCgkgKiBAcmV0dXJuIFN0cmluZyB0aGF0IGNvbnRhaW5zIHRoZSBqYXZhc2NyaXB0IGZvciBpbmNsdWRpbmcgcmVxdWlyZWQgamF2YXNjcmlwdCBmaWxlcy4KCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEphdmFzY3JpcHRJbmNsdWRlcygkZW5xdWV1ZVNjcmlwdHM9dHJ1ZSkKCXsKCQkkdXNlckNTU0RpciA9IE1NX1BMVUdJTl9OQU1FLiIvcmVzb3VyY2VzL2Nzcy91c2VyLyI7CgkJJHVzZXJKU0RpciA9IE1NX1BMVUdJTl9OQU1FLiIvcmVzb3VyY2VzL2pzL3VzZXIvIjsKCQkkY29tbW9uSlNEaXIgPSBNTV9QTFVHSU5fTkFNRS4iL3Jlc291cmNlcy9qcy9jb21tb24vIjsKCgkJJHRlc3RNb2RlQ1NTID0gcGx1Z2luc191cmwoInskdXNlckNTU0Rpcn1tbS10ZXN0bW9kZS5jc3MiKTsKCQkkY2hlY2tvdXRDU1MgPSBwbHVnaW5zX3VybCgieyR1c2VyQ1NTRGlyfW1tLWNoZWNrb3V0LmNzcyIpOwoJCSRjaGVja291dEpTID0gcGx1Z2luc191cmwoInskdXNlckpTRGlyfW1tLWNoZWNrb3V0LWZvcm0uanMiKTsKCQkkalF1ZXJ5QmxvY2tVSSA9IHBsdWdpbnNfdXJsKCJ7JGNvbW1vbkpTRGlyfWpxdWVyeS5ibG9ja1VJLmpzIik7CgoJCSR2ZXJzaW9uID0gTWVtYmVyTW91c2U6OmdldFBsdWdpblZlcnNpb24oKTsKCQkKCQkkdXNlTU1DU1MgPSAoTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfVVNFX01NX0NTU19DSEVDS09VVCkgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCQkKCQlpZigkZW5xdWV1ZVNjcmlwdHMpCgkJewkKCQkJaWYoJHVzZU1NQ1NTKQoJCQl7CgkJCQl3cF9lbnF1ZXVlX3N0eWxlKCJtZW1iZXJtb3VzZS1jaGVja291dC1jc3MiLCAkY2hlY2tvdXRDU1MsIGFycmF5KCksICR2ZXJzaW9uKTsKCQkJfQoJCQkKCQkJLy8gTm8gbmVlZCB0byBhZGQgdGhpcyBzdHlsZSBzaGVldCBpZiB0ZXN0IG1vZGUgaXMgbm90IGVuYWJsZWQuCgkJCWlmKCR0aGlzLT5pc1Rlc3RNb2RlQWx3YXlzT3ZlcnJpZGVuKCkgfHwgJHRoaXMtPmlzVGVzdE1vZGVLZXlPdmVycmlkZW4oKSkKCQkJewoJCQkJd3BfZW5xdWV1ZV9zdHlsZSgibWVtYmVybW91c2UtY2hlY2tvdXQtdGVzdG1vZGUtY3NzIiwgJHRlc3RNb2RlQ1NTLCBhcnJheSgpLCAkdmVyc2lvbik7CgkJCX0KCQkJCgkJCXdwX2VucXVldWVfc2NyaXB0KCJtZW1iZXJtb3VzZS1jaGVja291dC1mb3JtIiwgJGNoZWNrb3V0SlMsIGFycmF5KCksICR2ZXJzaW9uLCB0cnVlKTsKCQkJd3BfZW5xdWV1ZV9zY3JpcHQoIm1lbWJlcm1vdXNlLWJsb2NrVUkiLCAkalF1ZXJ5QmxvY2tVSSwgYXJyYXkoKSwgJHZlcnNpb24sIHRydWUpOwoJCX0KCQllbHNlCgkJewoJCQkkc3RyID0gIiI7CgkJCQoJCQlpZigkdXNlTU1DU1MpCgkJCXsKCQkJCSRzdHIgLj0gIjxsaW5rIHJlbD0nc3R5bGVzaGVldCcgdHlwZT0ndGV4dC9jc3MnIGhyZWY9JyIuJGNoZWNrb3V0Q1NTLic/dmVyPScuJHZlcnNpb24uIicgLz4KIjsKCQkJfQoJCQkKCQkJJHN0ciAuPSAnPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iJy4kalF1ZXJ5QmxvY2tVSS4nP3Zlcj0nLiR2ZXJzaW9uLiciPjwvc2NyaXB0PgonOwoJCQkkc3RyIC49ICc8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCIgc3JjPSInLiRjaGVja291dEpTLic/dmVyPScuJHZlcnNpb24uJyI+PC9zY3JpcHQ+Cic7CgkJCXJldHVybiAkc3RyOwoJCX0KCX0gCgkKCXByaXZhdGUgZnVuY3Rpb24gaXNUZXN0TW9kZUtleU92ZXJyaWRlbigpewoJCWlmKCBNTV9TZXNzaW9uOjp2YWx1ZShNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRLRVlfUEFZTUVOVF9TRVJWSUNFX09WRVJSSURFKSA9PSBNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRNT0RFX09WRVJSSURFX1dJVEhfS0VZIHx8CgkJCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRLRVlfUEFZTUVOVF9TRVJWSUNFX09WRVJSSURFKSA9PSBNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRNT0RFX1BST0RVQ1RJT05fT1ZFUlJJREVfV0lUSF9LRVkKCQkJCSkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gaXNUZXN0TW9kZUFsd2F5c092ZXJyaWRlbigpewoJCSR0ZXN0UGF5bWVudFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldFBheW1lbnRTZXJ2aWNlKE1NX1BheW1lbnRTZXJ2aWNlOjokVEVTVF9TRVJWSUNFX1RPS0VOKTsKCQlpZigkdGVzdFBheW1lbnRTZXJ2aWNlLT5nZXRNb2RlKCkgPT0gTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokTU9ERV9BTFdBWVNfT1ZFUlJJREUgJiYKCQkJCSR0ZXN0UGF5bWVudFNlcnZpY2UtPmlzQWN0aXZlKCkKCQkJCSkKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCS8qCgkgKiBQdXRzIGJhbm5lciBvbiBzaXRlIGluZGljYXRpbmcgdGVzdCBtb2RlIGlzIGFjdGl2YXRlZC4KCSAqIEByZXR1cm4gU3RyaW5nIG9mIHRoZSBodG1sIGRpdiBjb250YWluaW5nIHRoZSBiYW5uZXIgaWYgYWN0aXZhdGVkLCBvdGhlcndpc2UgZW1wdHkgc3RyaW5nLgoJICovIAoJcHJpdmF0ZSBmdW5jdGlvbiBnZXRUZXN0TW9kZUJhbm5lcigpewoJCSRiYW5uZXIgPSAiIjsKCQlpZigkdGhpcy0+aXNUZXN0TW9kZUFsd2F5c092ZXJyaWRlbigpKQoJCXsKCQkJJGJhbm5lciA9ICcKCQkJPGRpdiBpZD0ibW0tdGVzdG1vZGUtY29udGFpbmVyIj4KCQkJCTxhIGlkPSJtbS10ZXN0bW9kZSI+VGVzdCBTZXJ2aWNlIGlzIEFjdGl2YXRlZC48L2E+IAoJCQk8L2Rpdj4nOwoJCX0KCQllbHNlIGlmKCR0aGlzLT5pc1Rlc3RNb2RlS2V5T3ZlcnJpZGVuKCkpCgkJewoJCQkkYmFubmVyID0gJwoJCQk8ZGl2IGlkPSJtbS10ZXN0bW9kZS1jb250YWluZXIiPgoJCQkJPGEgaHJlZj0iP3Bzbz1vZmYiIGlkPSJtbS10ZXN0bW9kZSI+VGVzdCBTZXJ2aWNlIGlzIEFjdGl2YXRlZC4gPHU+Q2xpY2sgSGVyZTwvdT4gdG8gdHVybiBpdCBvZmYuPC9hPiAKCQkJPC9kaXY+JzsKCQl9CgkJcmV0dXJuICRiYW5uZXI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIHRoZSBqYXZhc2NyaXB0IHRvIGluaXRpYWxpemUgdGhlIGNoZWNrb3V0IGZvcm0uIAoJICogQHBhcmFtIGFycmF5ICRkZWZhdWx0RGF0YSB0aGlzIGNvbnRhaW5zIHRoZSBkZWZhdWx0IGRhdGEgdXNlZCB0byBwcmVwb3B1bGF0ZSBjZXJ0YWluIGZvcm0gZWxlbWVudHMKCSAqIEByZXR1cm4gU3RyaW5nIHRoYXQgY29udGFpbnMgdGhlIGphdmFzY3JpcHQgdG8gaW5pdGlhbGl6ZXMgdGhlIGNoZWNrb3V0IGZvcm0uCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRJbml0SmF2YXNjcmlwdCgkZGVmYXVsdERhdGEpCgl7CgkJJHN0ciA9ICI8c2NyaXB0PlxuIjsKCQkkc3RyIC49ICJqUXVlcnkoZnVuY3Rpb24oKSB7XG4iOwoJCSRzdHIgLj0gIm1tanMudG9nZ2xlU2hpcHBpbmdJbmZvKCk7XG4iOwoJCSRzdHIgLj0gIm1tanMudG9nZ2xlR2lmdFNlY3Rpb24oKTtcbiI7Ci8qCgkJJHN0ciAuPSAibW1qcy5jb3VudHJ5Q2hhbmdlSGFuZGxlcihcImJpbGxpbmdcIik7XG4iOwoJCSRzdHIgLj0gIm1tanMuY291bnRyeUNoYW5nZUhhbmRsZXIoXCJzaGlwcGluZ1wiKTtcbiI7CiovCgkJJHN0ciAuPSAibW1qcy5zaGlwcGluZ01ldGhvZENoYW5nZUhhbmRsZXIoKTtcbiI7CgkJJHN0ciAuPSAibW1qcy5kaXNjb3VudENoYW5nZUhhbmRsZXIobW1qcy5mb3JtYXRNb25leShcIjAuMDBcIikpO1xuIjsKCQkKCQlpZighJHRoaXMtPmlzRnJlZSkgCgkJewoJCQkkc3RyIC49ICJtbWpzLmFwcGx5Q291cG9uKCk7XG4iOwoJCX0KCQkkc3RyIC49ICJqUXVlcnkoJyNtbV9maWVsZF9wYXltZW50X3NlcnZpY2UnKS52YWwoJycpO1xuIjsKCQkkc3RyIC49ICJ9KTtcbiI7CgkJJHN0ciAuPSAidmFyIG1tX25vbmNlX25hbWVfY2hlY2tvdXRfZm9ybSA9ICciIC4gTU1fVmlldzo6JE1NX05PTkNFX05BTUVfQ0hFQ0tPVVRfRk9STSAuICInO1xuIjsKCQkkc3RyIC49ICI8L3NjcmlwdD5cbiI7CgkJCgkJcmV0dXJuICRzdHI7Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fU2VjdGlvbiB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciBjaGVja2luZyBpZiB0aGUgY3VycmVudCB1c2VyIAoJICogc2hvdWxkIHNlZSB0aGUgY29udGVudHMgb2YgdGhpcyBzZWN0aW9uIGJhc2VkIG9uIHRoZSBmb3JtIGNvbmZpZ3VyYXRpb24uCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IGNvbnRhaW5lZCB3aXRoaW4gdGhlIFNtYXJ0VGFnIChpZiBhbnkpCgkgKiBAcGFyYW0gQXJyYXkgJGF0dHMgYW4gYXNzb2NpYXRpdmUgYXJyYXkgb2YgYXR0cmlidXRlcyBhc3NvY2lhdGVkIHdpdGggdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb2RlIHRoZSByYXcgdmVyc2lvbiBvZiB0aGUgU21hcnRUYWcgbmFtZSAoaS5lLiBub3QgY2FzZS1pbnNlbnRpdmUsIG5vdCBicm9rZW4gdXAgaW50byBwYXJ0cykKCSAqIEByZXR1cm4gU3RyaW5nIGEgc3RyaW5nIGJhc2VkIG9uIHRoZSAkY29udGVudCBwYXNzZWQgd2l0aCBhbGwgU21hcnRUYWdzIHByb2Nlc3NlZAoJICovCglwdWJsaWMgZnVuY3Rpb24gbW1fZm9ybV9zZWN0aW9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJJG91dHB1dFN0ciA9ICIiOwoJCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkJCgkJaWYoaXNzZXQoJHR5cGUpKQoJCXsKCQkJJHRoaXMtPm9uc2l0ZVNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldE9uc2l0ZVBheW1lbnRTZXJ2aWNlKCk7CgkJCQoJCQlpZigkdGhpcy0+b25zaXRlU2VydmljZSAmJiAkdGhpcy0+b25zaXRlU2VydmljZS0+aXNBY3RpdmUoKSkKCQkJewoJCQkJJG9uc2l0ZVNlcnZpY2VBY3RpdmUgPSB0cnVlOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJG9uc2l0ZVNlcnZpY2VBY3RpdmUgPSBmYWxzZTsKCQkJfQoJCQkKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCQl7CgkJCQljYXNlICJhY2NvdW50aW5mbyI6CgkJCQkJJG91dHB1dFN0ciAuPSAiPGRpdiAiLigoJGZvcm0tPmlzTWVtYmVyID09IHRydWUgJiYgISRmb3JtLT5pc0N1c3RvbWVyU3VwcG9ydE9yZGVyKSA/ICJzdHlsZT1cImRpc3BsYXk6bm9uZTtcIiIgOiAiIikuIj4KIjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgImJpbGxpbmdpbmZvIjoKCQkJCQkkb3V0cHV0U3RyIC49ICI8ZGl2ICIuKCgkZm9ybS0+aXNGcmVlID09IHRydWUgfHwgJG9uc2l0ZVNlcnZpY2VBY3RpdmUgPT0gZmFsc2UpID8gInN0eWxlPVwiZGlzcGxheTpub25lO1wiIiA6ICIiKS4iPgoiOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAic2hpcHBpbmdpbmZvIjoKCQkJCQkkb3V0cHV0U3RyIC49ICI8ZGl2ICIuKCgkZm9ybS0+aXNTaGlwcGFibGUgPT0gZmFsc2UpID8gInN0eWxlPVwiZGlzcGxheTpub25lO1wiIiA6ICIiKS4iPgoiOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiZ2lmdGluZm8iOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxkaXYgaWQ9XCJtbS1naWZ0LWluZm8tYmxvY2tcIiAiLigoJGZvcm0tPmlzR2lmdCA9PSBmYWxzZSkgPyAic3R5bGU9XCJkaXNwbGF5Om5vbmU7XCIiIDogIiIpLiI+CiI7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJzaGlwcGluZ2FkZHJlc3MiOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxkaXYgaWQ9XCJtbS1zaGlwcGluZy1pbmZvLWJsb2NrXCIgc3R5bGU9XCJkaXNwbGF5Om5vbmU7XCI+CiI7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJjb3Vwb24iOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxkaXYgIi4oKCRmb3JtLT5pc0ZyZWUgfHwgISRmb3JtLT5jb3Vwb25zQXZhaWxhYmxlKSA/ICJzdHlsZT1cImRpc3BsYXk6bm9uZTtcIiIgOiAiIikuIj4KIjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IEludmFsaWQgdHlwZSBvZiAneyR0eXBlfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0uIjsKCQkJCQlicmVhazsKCQkJfQoJCQkJCgkJCSRvdXRwdXRTdHIgLj0gZG9fc2hvcnRjb2RlKCRjb250ZW50KS4iPC9kaXY+CiI7CgkJCXJldHVybiAkb3V0cHV0U3RyOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fRmllbGQgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIHRoZSAKCSAqIGZvcm0gZmllbGQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZmllbGQoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCSAKCQlpZighaXNzZXQoJHR5cGUpKQoJCXsKCQkJJHR5cGUgPSAiaW5wdXQiOwoJCX0KCQkKCQlpZighaXNzZXQoJGNsYXNzKSB8fCBlbXB0eSgkY2xhc3MpKQoJCXsKCQkJJGNsYXNzID0gIm1tLXRleHRGaWVsZCI7CgkJfQoJCQoJCWlmKCFpc3NldCgkY3VzdG9tYXR0cmlidXRlcykgfHwgZW1wdHkoJGN1c3RvbWF0dHJpYnV0ZXMpKQoJCXsKCQkJJGN1c3RvbWF0dHJpYnV0ZXMgPSAiIjsKCQl9CgkJCgkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCXsKCQkJY2FzZSAiaW5wdXQiOgoJCQkJaWYoaXNzZXQoJG5hbWUpKQoJCQkJewoJCQkJCSRuYW1lID0gc3RydG9sb3dlcigkbmFtZSk7CgkJCQkJaWYoJG5hbWUgPT0gImNhcHRjaGEiKQoJCQkJCXsKCQkJCQkJJHNpdGVLZXkgCT0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQ0FQVENIQV9LRVkpOwoJCQkJCQkkcHJpdmF0ZUtleSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0NBUFRDSEFfUFJJVkFURV9LRVkpOwoJCQkJCQoJCQkJCQlpZighZW1wdHkoJHNpdGVLZXkpICYmICFlbXB0eSgkcHJpdmF0ZUtleSkpCgkJCQkJCXsJCgkJCQkJCQkkb3V0cHV0U3RyIC49ICIKCQkJCQkJCQk8ZGl2IGNsYXNzPVwiZy1yZWNhcHRjaGFcIiBkYXRhLXNpdGVrZXk9XCJ7JHNpdGVLZXl9XCI+PC9kaXY+CgkJCQkJCQkJPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCIgc3JjPVwiaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLmpzXCI+PC9zY3JpcHQ+CgkJCQkJCQkiOwkKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIkludmFsaWQgQ2FwdGNoYSBDb25maWd1cmF0aW9uIjsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlIAoJCQkJCXsKCQkJCQkJLy8gYWRkIG9wdGlvbmFsIGZpZWxkcyB0byBpZ25vcmVGaWVsZHMgYXJyYXkgd2hlbiAkaXNyZXF1aXJlZCBpcyBzZXQgdG8gZmFsc2UKCQkJCQkJJG9wdGlvbmFsRmllbGRzID0gYXJyYXkoImZpcnN0bmFtZSIsImxhc3RuYW1lIiwicGhvbmUiLCJwYXNzd29yZCIsImJpbGxpbmdhZGRyZXNzIiwiYmlsbGluZ2NpdHkiLAoJCQkJCQkJCSJiaWxsaW5nc3RhdGUiLCJiaWxsaW5nemlwY29kZSIsImJpbGxpbmdjb3VudHJ5Iiwic2hpcHBpbmdhZGRyZXNzIiwic2hpcHBpbmdjaXR5Iiwic2hpcHBpbmdzdGF0ZSIsCgkJCQkJCQkJInNoaXBwaW5nemlwY29kZSIsInNoaXBwaW5nY291bnRyeSIsInNoaXBwaW5nbWV0aG9kIik7CgkJCQkJCQoJCQkJCQlpZihpbl9hcnJheSgkbmFtZSwgJG9wdGlvbmFsRmllbGRzKSAmJiBpc3NldCgkaXNyZXF1aXJlZCkgJiYgJGlzcmVxdWlyZWQgPT0gImZhbHNlIikKCQkJCQkJewoJCQkJCQkJJGZpZWxkID0gbmV3IHN0ZENsYXNzKCk7CgkJCQkJCQkKCQkJCQkJCXN3aXRjaChzdHJ0b2xvd2VyKCRuYW1lKSkKCQkJCQkJCXsKCQkJCQkJCQljYXNlICJmaXJzdG5hbWUiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAiZmlyc3RfbmFtZSI7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCQkJY2FzZSAibGFzdG5hbWUiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAibGFzdF9uYW1lIjsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkKCQkJCQkJCQljYXNlICJwYXNzd29yZCI6CgkJCQkJCQkJCSRmaWVsZC0+bmFtZSA9ICJwYXNzd29yZCI7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCQkJY2FzZSAicGhvbmUiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAicGhvbmUiOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQkJCWNhc2UgImJpbGxpbmdhZGRyZXNzIjoKCQkJCQkJCQkJJGZpZWxkLT5uYW1lID0gImJpbGxpbmdfYWRkcmVzcyI7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCQkJY2FzZSAiYmlsbGluZ2NpdHkiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAiYmlsbGluZ19jaXR5IjsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkKCQkJCQkJCQljYXNlICJiaWxsaW5nc3RhdGUiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAiYmlsbGluZ19zdGF0ZSI7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCQkJY2FzZSAiYmlsbGluZ3ppcGNvZGUiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAiYmlsbGluZ196aXAiOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQkJCWNhc2UgImJpbGxpbmdjb3VudHJ5IjoKCQkJCQkJCQkJJGZpZWxkLT5uYW1lID0gImJpbGxpbmdfY291bnRyeSI7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCQkJY2FzZSAic2hpcHBpbmdhZGRyZXNzIjoKCQkJCQkJCQkJJGZpZWxkLT5uYW1lID0gInNoaXBwaW5nX2FkZHJlc3MiOwoJCQkJCQkJCQlicmVhazsKCQkJCQkJCQoJCQkJCQkJCWNhc2UgInNoaXBwaW5nY2l0eSI6CgkJCQkJCQkJCSRmaWVsZC0+bmFtZSA9ICJzaGlwcGluZ19jaXR5IjsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkKCQkJCQkJCQljYXNlICJzaGlwcGluZ3N0YXRlIjoKCQkJCQkJCQkJJGZpZWxkLT5uYW1lID0gInNoaXBwaW5nX3N0YXRlIjsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkKCQkJCQkJCQljYXNlICJzaGlwcGluZ3ppcGNvZGUiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAic2hpcHBpbmdfemlwIjsKCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkKCQkJCQkJCQljYXNlICJzaGlwcGluZ2NvdW50cnkiOgoJCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAic2hpcHBpbmdfY291bnRyeSI7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJfQoJCQkJCQkJCQoJCQkJCQkJYXJyYXlfcHVzaCgkZm9ybS0+b3B0aW9uYWxGaWVsZHMsICRmaWVsZCk7CgkJCQkJCX0KCQkJCQkJCgkJCQkJCSRvdXRwdXRTdHIgPSBzZWxmOjpnZW5lcmF0ZUlucHV0Rm9ybUZpZWxkKCRuYW1lLCAkZm9ybS0+bWVtYmVyRGF0YSwgJGZvcm0sICRjbGFzcywgJGN1c3RvbWF0dHJpYnV0ZXMsICRhdHRzKTsKCQkJCQl9CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuICJJbnZhbGlkIFNtYXJ0VGFnIENvbmZpZ3VyYXRpb246IFRoZSAnbmFtZScgYXR0cmlidXRlIGlzIHJlcXVpcmVkIGZvciBTbWFydFRhZyB7JGNvZGV9IHdpdGggdHlwZSB7JHR5cGV9LiI7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkJCgkJCWNhc2UgImN1c3RvbSI6CgkJCWNhc2UgImN1c3RvbS1oaWRkZW4iOgoJCQkJaWYoaXNzZXQoJGlkKSkKCQkJCXsKCQkJCQkkY3VzdG9tRmllbGQgPSBNTV9DdXN0b21GaWVsZDo6Z2V0RGF0YUJ5RmllbGRJZCgkaWQpOwoJCQkJCQkKCQkJCQlpZigkY3VzdG9tRmllbGQtPmlzVmFsaWQoKSkKCQkJCQl7CgkJCQkJCSRjcm50VmFsdWUgPSAiIjsKCQkJCQkJaWYoaXNzZXQoJGZvcm0tPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF97JGlkfSJdKSAmJiAkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9Il0gIT0gIiIpCgkJCQkJCXsKCQkJCQkJCSRjcm50VmFsdWUgPSAkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9Il07CgkJCQkJCX0KCQkJCQkJCgkJCQkJCWlmKCR0eXBlID09ICJjdXN0b20taGlkZGVuIikKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2N1c3RvbV9maWVsZF97JGlkfScgbmFtZT0nbW1fY3VzdG9tX2ZpZWxkX3skaWR9JyAiOwoJCQkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkY3JudFZhbHVlKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgIjsJCQkJCQkJCQoJCQkJCQkJJG91dHB1dFN0ciAuPSAiLz4KIjsKCQkJCQkJfQoJCQkJCQllbHNlCgkJCQkJCXsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gJGN1c3RvbUZpZWxkLT5kcmF3KCRjcm50VmFsdWUsICRjbGFzcyk7CgkJCQkJCQkKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9jdXN0b21fZmllbGRfeyRpZH1fdHlwZScgIjsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gInZhbHVlPSciLiRjdXN0b21GaWVsZC0+Z2V0VHlwZSgpLiInICI7CgkJCQkJCQkkb3V0cHV0U3RyIC49ICIvPgoiOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0naGlkZGVuJyBpZD0nbW1fY3VzdG9tX2ZpZWxkX3skaWR9X2xhYmVsJyAiOwoKCQkJCQkJaWYoaXNzZXQoJGZvcm0tPm1lbWJlckRhdGFbIm1tX2N1c3RvbV9maWVsZF97JGlkfV9sYWJlbCJdKSkKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZm9ybS0+bWVtYmVyRGF0YVsibW1fY3VzdG9tX2ZpZWxkX3skaWR9X2xhYmVsIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyAiOwoJCQkJCQl9CgkJCQkJCgkJCQkJCSRvdXRwdXRTdHIgLj0gIi8+CiI7CgkJCQkJCWlmKGlzc2V0KCRpc3JlcXVpcmVkKSAmJiBzdHJ0b2xvd2VyKCRpc3JlcXVpcmVkKSA9PSAidHJ1ZSIpCgkJCQkJCXsKCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGlkPSdtbV9jdXN0b21fZmllbGRfeyRpZH1fcmVxdWlyZWQnIHZhbHVlPScxJyAvPgoiOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J2hpZGRlbicgaWQ9J21tX2N1c3RvbV9maWVsZF97JGlkfV9yZXF1aXJlZCcgdmFsdWU9JzAnIC8+CiI7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAiSW52YWxpZCBjdXN0b20gZmllbGQgSUQgb2YgJ3skaWR9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSI7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ2lkJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0gd2l0aCB0eXBlIHskdHlwZX0uIjsKCQkJCX0KCQkJCQkKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJoaWRkZW4iOgoJCQkJJHZhbGlkRmllbGROYW1lcyA9ICJmaXJzdG5hbWUsbGFzdG5hbWUscGhvbmUscGFzc3dvcmQsYmlsbGluZ2FkZHJlc3MsYmlsbGluZ2NpdHksYmlsbGluZ3N0YXRlLGJpbGxpbmd6aXBjb2RlLGJpbGxpbmdjb3VudHJ5LAoJCQkJCXNoaXBwaW5nYWRkcmVzcyxzaGlwcGluZ2NpdHksc2hpcHBpbmdzdGF0ZSxzaGlwcGluZ3ppcGNvZGUsc2hpcHBpbmdjb3VudHJ5LHNoaXBwaW5nbWV0aG9kIjsKCQkJCQkKCQkJCWlmKGlzc2V0KCRuYW1lKSkKCQkJCXsKCQkJCQkkbmFtZSA9IHN0cnRvbG93ZXIoJG5hbWUpOwoJCQkJCQoJCQkJCWlmKHN0cnBvcygkdmFsaWRGaWVsZE5hbWVzLCAkbmFtZSkgIT09IGZhbHNlKQoJCQkJCXsKCQkJCQkJJGZpZWxkID0gbmV3IHN0ZENsYXNzKCk7CgkJCQkJCQoJCQkJCQlzd2l0Y2goc3RydG9sb3dlcigkbmFtZSkpCgkJCQkJCXsKCQkJCQkJCWNhc2UgImZpcnN0bmFtZSI6CgkJCQkJCQkJJGZpZWxkLT5uYW1lID0gImZpcnN0X25hbWUiOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQoJCQkJCQkJY2FzZSAibGFzdG5hbWUiOgoJCQkJCQkJCSRmaWVsZC0+bmFtZSA9ICJsYXN0X25hbWUiOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQoJCQkJCQkJY2FzZSAicGFzc3dvcmQiOgoJCQkJCQkJCSRmaWVsZC0+bmFtZSA9ICJwYXNzd29yZCI7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCgkJCQkJCQljYXNlICJwaG9uZSI6CgkJCQkJCQkJJGZpZWxkLT5uYW1lID0gInBob25lIjsKCQkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJCWNhc2UgImJpbGxpbmdhZGRyZXNzIjoKCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAiYmlsbGluZ19hZGRyZXNzIjsKCQkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJCWNhc2UgImJpbGxpbmdjaXR5IjoKCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAiYmlsbGluZ19jaXR5IjsKCQkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJCWNhc2UgImJpbGxpbmdzdGF0ZSI6CgkJCQkJCQkJJGZpZWxkLT5uYW1lID0gImJpbGxpbmdfc3RhdGUiOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQoJCQkJCQkJY2FzZSAiYmlsbGluZ3ppcGNvZGUiOgoJCQkJCQkJCSRmaWVsZC0+bmFtZSA9ICJiaWxsaW5nX3ppcCI7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCgkJCQkJCQljYXNlICJiaWxsaW5nY291bnRyeSI6CgkJCQkJCQkJJGZpZWxkLT5uYW1lID0gImJpbGxpbmdfY291bnRyeSI7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCgkJCQkJCQljYXNlICJzaGlwcGluZ2FkZHJlc3MiOgoJCQkJCQkJCSRmaWVsZC0+bmFtZSA9ICJzaGlwcGluZ19hZGRyZXNzIjsKCQkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJCWNhc2UgInNoaXBwaW5nY2l0eSI6CgkJCQkJCQkJJGZpZWxkLT5uYW1lID0gInNoaXBwaW5nX2NpdHkiOwoJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQoJCQkJCQkJY2FzZSAic2hpcHBpbmdzdGF0ZSI6CgkJCQkJCQkJJGZpZWxkLT5uYW1lID0gInNoaXBwaW5nX3N0YXRlIjsKCQkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJCWNhc2UgInNoaXBwaW5nemlwY29kZSI6CgkJCQkJCQkJJGZpZWxkLT5uYW1lID0gInNoaXBwaW5nX3ppcCI7CgkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCgkJCQkJCQljYXNlICJzaGlwcGluZ2NvdW50cnkiOgoJCQkJCQkJCSRmaWVsZC0+bmFtZSA9ICJzaGlwcGluZ19jb3VudHJ5IjsKCQkJCQkJCQlicmVhazsKCQkJCQkJCQkKCQkJCQkJCWNhc2UgInNoaXBwaW5nbWV0aG9kIjoKCQkJCQkJCQkkZmllbGQtPm5hbWUgPSAic2hpcHBpbmdfbWV0aG9kIjsKCQkJCQkJCQlicmVhazsKCQkJCQkJfQoJCQkJCgkJCQkJCWlmKGlzc2V0KCR2YWx1ZSkpCgkJCQkJCXsKCQkJCQkJCSRmaWVsZC0+dmFsdWUgPSAkdmFsdWU7CgkJCQkJCX0KCQkJCQkKCQkJCQkJYXJyYXlfcHVzaCgkZm9ybS0+aWdub3JlRmllbGRzLCAkZmllbGQpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCBuYW1lIG9mICd7JG5hbWV9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSB3aXRoIHR5cGUgJ3skdHlwZX0nLiI7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ25hbWUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgU21hcnRUYWcgeyRjb2RlfSB3aXRoIHR5cGUgJ3skdHlwZX0nLiI7CgkJCQl9CgkJCQkKCQkJCWJyZWFrOwoJCQkJCgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCB0eXBlIG9mICd7JHR5cGV9JyBwYXNzZWQgdG8gU21hcnRUYWcgeyRjb2RlfSI7CgkJCQlicmVhazsKCQl9CgkJCSAKCQlyZXR1cm4gJG91dHB1dFN0cjsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZW5lcmF0ZUlucHV0Rm9ybUZpZWxkKCRuYW1lLCAkZGVmYXVsdERhdGEsICRmb3JtPW51bGwsICRjdXN0b21Dc3NDbGFzcz0ibW0tdGV4dEZpZWxkIiwgJGN1c3RvbUF0dHJpYnV0ZXM9IiIsICRhdHRzPW51bGwpCgl7CgkJJG91dHB1dFN0ciA9ICIiOwoJCQoJCXN3aXRjaChzdHJ0b2xvd2VyKCRuYW1lKSkKCQl7CgkJCWNhc2UgImZpcnN0bmFtZSI6CgkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J21tX2ZpZWxkX2ZpcnN0X25hbWUnIG5hbWU9J21tX2ZpZWxkX2ZpcnN0X25hbWUnIHZhbHVlPSciLmh0bWxlbnRpdGllcyhzdHJpcHNsYXNoZXMoJGRlZmF1bHREYXRhWyJtbV9maWVsZF9maXJzdF9uYW1lIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJsYXN0bmFtZSI6CgkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J21tX2ZpZWxkX2xhc3RfbmFtZScgbmFtZT0nbW1fZmllbGRfbGFzdF9uYW1lJyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfbGFzdF9uYW1lIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJlbWFpbCI6CgkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J21tX2ZpZWxkX2VtYWlsJyBuYW1lPSdtbV9maWVsZF9lbWFpbCcgdmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2VtYWlsIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJlbWFpbC1jb25maXJtIjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nbW1fZmllbGRfZW1haWxfY29uZmlybScgbmFtZT0nbW1fZmllbGRfZW1haWxfY29uZmlybScgdmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2VtYWlsX2NvbmZpcm0iXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgeyRjdXN0b21BdHRyaWJ1dGVzfSAvPgoiOwoJCQkJYnJlYWs7CgkJCQkJCgkJCWNhc2UgInVzZXJuYW1lIjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nbW1fZmllbGRfdXNlcm5hbWUnIG5hbWU9J21tX2ZpZWxkX3VzZXJuYW1lJyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfdXNlcm5hbWUiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgeyRjdXN0b21BdHRyaWJ1dGVzfSAvPgoiOwoJCQkJYnJlYWs7CgkJCQkJCgkJCWNhc2UgInBhc3N3b3JkIjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdwYXNzd29yZCcgYXV0b2NvbXBsZXRlPSdvZmYnIGlkPSdtbV9maWVsZF9wYXNzd29yZCcgbmFtZT0nbW1fZmllbGRfcGFzc3dvcmQnIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgIjsKCQkJCQoJCQkJaWYoTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfVVNFX0NIRUNLT1VUX0ZPUk1fVEVTVF9EQVRBKSA9PSAiMSIpCgkJCQl7CgkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuJGRlZmF1bHREYXRhWyJtbV9maWVsZF9wYXNzd29yZCJdLiInICI7CgkJCQl9CgkJCQkKCQkJCSRvdXRwdXRTdHIgLj0gIiB7JGN1c3RvbUF0dHJpYnV0ZXN9IC8+CiI7CgkJCQlicmVhazsKCQkJCQkKCQkJY2FzZSAicGhvbmUiOgoJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J3RleHQnIG9ua2V5ZG93bj1cInJldHVybiBtbWpzLm9ubHlOdW1iZXJzKGV2ZW50LCdwaG9uZScpXCIgaWQ9J21tX2ZpZWxkX3Bob25lJyBuYW1lPSdtbV9maWVsZF9waG9uZScgdmFsdWU9J3skZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3Bob25lIl19JyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJiaWxsaW5nYWRkcmVzcyI6CgkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J21tX2ZpZWxkX2JpbGxpbmdfYWRkcmVzcycgbmFtZT0nbW1fZmllbGRfYmlsbGluZ19hZGRyZXNzJyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19hZGRyZXNzIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJiaWxsaW5nY2l0eSI6CgkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J21tX2ZpZWxkX2JpbGxpbmdfY2l0eScgbmFtZT0nbW1fZmllbGRfYmlsbGluZ19jaXR5JyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19jaXR5Il0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJiaWxsaW5nc3RhdGUiOgoJCQkKCQkJCSRkZWZhdWx0Q291bnRyeSA9IG51bGw7CgkJCQkKCQkJCWlmKGlzc2V0KCRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0pICYmIGluX2FycmF5KCRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0sIE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0NPVU5UUllfU0VMRUNUSU9OUykpKQoJCQkJewoJCQkJCSRkZWZhdWx0Q291bnRyeSA9ICRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il07CgkJCQl9CgkJCQllbHNlaWYoaW5fYXJyYXkoTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfREZMVF9DT1VOVFJZX1NFTEVDVElPTiksIE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0NPVU5UUllfU0VMRUNUSU9OUykpKQoJCQkJewoJCQkJCSRkZWZhdWx0Q291bnRyeSA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0RGTFRfQ09VTlRSWV9TRUxFQ1RJT04pOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRkZWZhdWx0Q291bnRyeSA9IGFycmF5X3ZhbHVlcyhNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9DT1VOVFJZX1NFTEVDVElPTlMpKTsKCQkJCQkkZGVmYXVsdENvdW50cnkgPSAkZGVmYXVsdENvdW50cnlbMF07CgkJCQl9CgkJCQoJCQkJJGRlZmF1bHREYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiXSA9ICRkZWZhdWx0Q291bnRyeTsKCQkJCQoJCQkJJGJpbGxpbmdDb3VudHJ5U3ViZGl2aXNpb25MaXN0ID0gTU1fQ291bnRyeVN1YmRpdmlzaW9uVXRpbHM6OmdldENvdW50cnlTdWJkaXZzaW9uTGlzdCgkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfY291bnRyeSJdKTsKCQkgICAgICBpZigkY29kZSA9IGFycmF5X3NlYXJjaChzdHJ0b2xvd2VyKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19zdGF0ZSJdKSwgYXJyYXlfbWFwKCdzdHJ0b2xvd2VyJywkYmlsbGluZ0NvdW50cnlTdWJkaXZpc2lvbkxpc3RbJGRlZmF1bHREYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiXV0pKSkKCQkgICAgICB7CgkJICAgICAgICAkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSA9ICRjb2RlOwoJCSAgICAgIH0KCQkJCQoJCSAgICAgIGZvcmVhY2goJGJpbGxpbmdDb3VudHJ5U3ViZGl2aXNpb25MaXN0IGFzICRpc28gPT4gJGNvdW50cnlfc3ViZGl2aXNpb25zKQoJCSAgICAgIHsKCQkgICAgICAJJG91dHB1dFN0ciAuPSAiPHNlbGVjdCBpZD0nbW1fZmllbGRfYmlsbGluZ19zdGF0ZV9kZCcgc2l6ZT0nMScgb25jaGFuZ2U9XCJtbWpzLnN0YXRlQ2hhbmdlSGFuZGxlcignYmlsbGluZycpO1wiIGNsYXNzPVwibW0tc2VsZWN0TGlzdCBiaWxsaW5nX2NvdW50cnlfc3ViZGl2aXNpb25zXCIgeyRjdXN0b21BdHRyaWJ1dGVzfT5cbiI7CgkJICAgICAgCSRvdXRwdXRTdHIgLj0gIjxvcHRpb24gdmFsdWU9Jyc+Ii5fbW10KCJQbGVhc2Ugc2VsZWN0IHlvdXIgc3RhdGUiKS4iPC9vcHRpb24+IjsKCQkgICAgICAJCgkJICAgICAgICAJZm9yZWFjaCgkY291bnRyeV9zdWJkaXZpc2lvbnMgYXMgJGNvdW50cnlfc3ViZGl2aXNpb25fY29kZSA9PiAkY291bnRyeV9zdWJkaXZpc2lvbl9uYW1lKQoJCSAgICAgICAgCXsgCgkJICAgICAgICAgCSRvdXRwdXRTdHIgLj0gIjxvcHRpb24gdmFsdWU9J3skY291bnRyeV9zdWJkaXZpc2lvbl9jb2RlfSciLigoaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpID09ICRjb3VudHJ5X3N1YmRpdmlzaW9uX2NvZGUpID8gIiBzZWxlY3RlZD0nc2VsZWN0ZWQnIiA6ICIiKS4iPnskY291bnRyeV9zdWJkaXZpc2lvbl9uYW1lfTwvb3B0aW9uPlxuIjsKCQkJCQkJCgkJCQkJCS8vIElmIHdlIGRvbid0IGhhdmUgZGVmYXVsdCBiaWxsaW5nIHN0YXRlIGFscmVhZHkgY2hvc2VuIGJ5IHRoZSB1c2VyLCBsZXQncyBzZXQgCgkJCQkJCS8vIHRoZSBkZWZhdWx0IGJpbGxpbmcgc3RhdGUgdG8gdGhlIGZpcnN0IG9wdGlvbiBpbiB0aGUgc3RhdGUgZHJvcCBkb3duIG1lbnUgCgkJCQkJCS8vIDIwMTYtMDItMjYgLSByZW1vdmVkIGFzIGRlZmF1bHQgc2VsZWN0aW9uIGlzIG5vdyBlbXB0eSBzdHJpbmcuCi8vIAkJCQkJCWlmKCF0cmltKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19zdGF0ZSJdKSkKLy8gCQkJCQkJewovLyAJCQkJCQkJJGRlZmF1bHREYXRhWyJtbV9maWVsZF9iaWxsaW5nX3N0YXRlIl0gPSAkY291bnRyeV9zdWJkaXZpc2lvbl9jb2RlOwovLyAJCQkJCQl9CgkJICAgICAgICAJfQoJCQkJCQoJCQkJCSRzZWxlY3RPdGhlciA9ICgkaXNvID09ICRkZWZhdWx0RGF0YVsibW1fZmllbGRfYmlsbGluZ19jb3VudHJ5Il0gJiYgaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpICYmICFpc3NldCgkYmlsbGluZ0NvdW50cnlTdWJkaXZpc2lvbkxpc3RbJGRlZmF1bHREYXRhWyJtbV9maWVsZF9iaWxsaW5nX2NvdW50cnkiXV1bJGRlZmF1bHREYXRhWyJtbV9maWVsZF9iaWxsaW5nX3N0YXRlIl1dKSkgPyB0cnVlIDogZmFsc2U7CgkJCQkJCgkJICAgICAgICAJJG91dHB1dFN0ciAuPSAiPG9wdGlvbiB2YWx1ZT0nLTEnIi4oKCRzZWxlY3RPdGhlciA9PSB0cnVlKSA/ICIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyIgOiAiIikuIj5PdGhlci4uLjwvb3B0aW9uPlxuIjsKCQkgICAgICAgIAkkb3V0cHV0U3RyIC49ICI8L3NlbGVjdD5cbiI7CgkJICAgICAgfQoJCSAgICAgICRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nbW1fZmllbGRfYmlsbGluZ19zdGF0ZScgbmFtZT0nbW1fZmllbGRfYmlsbGluZ19zdGF0ZScgdmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfc3RhdGUiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgeyRjdXN0b21BdHRyaWJ1dGVzfSAiLigoJHNlbGVjdE90aGVyID09IHRydWUpID8gIiIgOiAic3R5bGU9J2Rpc3BsYXk6bm9uZTsnICIpLiIvPlxuIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJiaWxsaW5nemlwY29kZSI6CgkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J21tX2ZpZWxkX2JpbGxpbmdfemlwJyBuYW1lPSdtbV9maWVsZF9iaWxsaW5nX3ppcCcgdmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2JpbGxpbmdfemlwIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJiaWxsaW5nY291bnRyeSI6CgkJCQkkb3V0cHV0U3RyIC49ICI8c2VsZWN0IGlkPSdtbV9maWVsZF9iaWxsaW5nX2NvdW50cnknIG5hbWU9J21tX2ZpZWxkX2JpbGxpbmdfY291bnRyeScgb25jaGFuZ2U9XCJtbWpzLmNvdW50cnlDaGFuZ2VIYW5kbGVyKCdiaWxsaW5nJyk7XCIgY2xhc3M9XCJtbS1zZWxlY3RMaXN0XCIgeyRjdXN0b21BdHRyaWJ1dGVzfT4KIjsKCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPmJpbGxpbmdDb3VudHJ5TGlzdDsKCQkJCSRvdXRwdXRTdHIgLj0gIjwvc2VsZWN0PgoiOwoJCQkJYnJlYWs7CgkJCQkJCgkJCWNhc2UgInNoaXBwaW5nYWRkcmVzcyI6CgkJCQkkb3V0cHV0U3RyIC49ICI8aW5wdXQgdHlwZT0ndGV4dCcgaWQ9J21tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MnIG5hbWU9J21tX2ZpZWxkX3NoaXBwaW5nX2FkZHJlc3MnIHZhbHVlPSciLmh0bWxlbnRpdGllcyhzdHJpcHNsYXNoZXMoJGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19hZGRyZXNzIl0pLCBFTlRfUVVPVEVTLCAiVVRGLTgiKS4iJyBjbGFzcz0neyRjdXN0b21Dc3NDbGFzc30nIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJzaGlwcGluZ2NpdHkiOgoJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdtbV9maWVsZF9zaGlwcGluZ19jaXR5JyBuYW1lPSdtbV9maWVsZF9zaGlwcGluZ19jaXR5JyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY2l0eSJdKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgY2xhc3M9J3skY3VzdG9tQ3NzQ2xhc3N9JyB7JGN1c3RvbUF0dHJpYnV0ZXN9IC8+CiI7CgkJCQlicmVhazsKCQkJCQkKCQkJY2FzZSAic2hpcHBpbmdzdGF0ZSI6CgkJCQkKCQkJCSRkZWZhdWx0Q291bnRyeSA9IG51bGw7CgkJCQoJCQkJaWYoaXNzZXQoJGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5Il0pICYmIGluX2FycmF5KCRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdLCBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9DT1VOVFJZX1NFTEVDVElPTlMpKSkKCQkJCXsKCQkJCQkkZGVmYXVsdENvdW50cnkgPSAkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXTsKCQkJCX0KCQkJCWVsc2VpZihpbl9hcnJheShNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9ERkxUX0NPVU5UUllfU0VMRUNUSU9OKSwgTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQ09VTlRSWV9TRUxFQ1RJT05TKSkpCgkJCQl7CgkJCQkJJGRlZmF1bHRDb3VudHJ5ID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfREZMVF9DT1VOVFJZX1NFTEVDVElPTik7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGRlZmF1bHRDb3VudHJ5ID0gYXJyYXlfdmFsdWVzKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0NPVU5UUllfU0VMRUNUSU9OUykpOwoJCQkJCSRkZWZhdWx0Q291bnRyeSA9ICRkZWZhdWx0Q291bnRyeVswXTsKCQkJCX0KCQkKCQkJCSRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdID0gJGRlZmF1bHRDb3VudHJ5OwoJCQkKCQkJCSRzaGlwcGluZ0NvdW50cnlTdWJkaXZpc2lvbkxpc3QgPSBNTV9Db3VudHJ5U3ViZGl2aXNpb25VdGlsczo6Z2V0Q291bnRyeVN1YmRpdnNpb25MaXN0KCRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdKTsKICAgICAgCQlpZigkY29kZSA9IGFycmF5X3NlYXJjaChzdHJ0b2xvd2VyKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSksIGFycmF5X21hcCgnc3RydG9sb3dlcicsJHNoaXBwaW5nQ291bnRyeVN1YmRpdmlzaW9uTGlzdFskZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnkiXV0pKSkKICAgICAgCQl7CiAgICAgICAgCQkJJGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSJdID0gJGNvZGU7CiAgICAgIAkJfQoJCQkJZm9yZWFjaCgkc2hpcHBpbmdDb3VudHJ5U3ViZGl2aXNpb25MaXN0IGFzICRpc28gPT4gJGNvdW50cnlfc3ViZGl2aXNpb25zKQogICAgICAJCXsKICAgICAgICAJCQkkb3V0cHV0U3RyIC49ICI8c2VsZWN0IGlkPSdtbV9maWVsZF9zaGlwcGluZ19zdGF0ZV9kZCcgc2l6ZT0nMScgb25jaGFuZ2U9XCJtbWpzLnN0YXRlQ2hhbmdlSGFuZGxlcignc2hpcHBpbmcnKTtcIiBjbGFzcz1cIm1tLXNlbGVjdExpc3Qgc2hpcHBpbmdfY291bnRyeV9zdWJkaXZpc2lvbnNcIiB7JGN1c3RvbUF0dHJpYnV0ZXN9PlxuIjsKICAgICAgICAJCQkkb3V0cHV0U3RyIC49ICI8b3B0aW9uIHZhbHVlPScnPiIuX21tdCgiUGxlYXNlIHNlbGVjdCB5b3VyIHN0YXRlIikuIjwvb3B0aW9uPiI7CiAgICAgICAgCQkgCWZvcmVhY2goJGNvdW50cnlfc3ViZGl2aXNpb25zIGFzICRjb3VudHJ5X3N1YmRpdmlzaW9uX2NvZGUgPT4gJGNvdW50cnlfc3ViZGl2aXNpb25fbmFtZSkKICAgICAgICAJCSAJewogICAgICAgICAgCQkgIAkkb3V0cHV0U3RyIC49ICI8b3B0aW9uIHZhbHVlPSd7JGNvdW50cnlfc3ViZGl2aXNpb25fY29kZX0nIi4oKGh0bWxlbnRpdGllcyhzdHJpcHNsYXNoZXMoJGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSJdKSwgRU5UX1FVT1RFUywgIlVURi04IikgPT0gJGNvdW50cnlfc3ViZGl2aXNpb25fY29kZSkgPyAiIHNlbGVjdGVkPSdzZWxlY3RlZCciIDogIiIpLiI+eyRjb3VudHJ5X3N1YmRpdmlzaW9uX25hbWV9PC9vcHRpb24+XG4iOwoJCQkJCSAgCgkJCQkJCS8vIElmIHdlIGRvbid0IGhhdmUgZGVmYXVsdCBzaGlwcGluZyBzdGF0ZSBhbHJlYWR5IGNob3NlbiBieSB0aGUgdXNlciwgbGV0J3Mgc2V0IAoJCQkJCQkvLyB0aGUgZGVmYXVsdCBzaGlwcGluZyBzdGF0ZSB0byB0aGUgZmlyc3Qgb3B0aW9uIGluIHRoZSBzdGF0ZSBkcm9wIGRvd24gbWVudQoJCQkJCQkvLyBkZWZhdWx0IHNob3VsZCBiZSBlbXB0eQovLyAJCQkJCQlpZighdHJpbSgkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIl0pKQovLyAJCQkJCQl7Ci8vIAkJCQkJCQkkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlIl0gPSAkY291bnRyeV9zdWJkaXZpc2lvbl9jb2RlOwovLyAJCQkJCQl9CiAgICAgICAgCQkJfQoJCQkJCQoJCQkJCSRzZWxlY3RPdGhlciA9ICgkaXNvID09ICRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfY291bnRyeSJdICYmIGh0bWxlbnRpdGllcyhzdHJpcHNsYXNoZXMoJGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19zdGF0ZSJdKSwgRU5UX1FVT1RFUywgIlVURi04IikgJiYgIWlzc2V0KCRzaGlwcGluZ0NvdW50cnlTdWJkaXZpc2lvbkxpc3RbJGRlZmF1bHREYXRhWyJtbV9maWVsZF9zaGlwcGluZ19jb3VudHJ5Il1dWyRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXV0pKSA/IHRydWUgOiBmYWxzZTsKCQkJCQkKICAgICAgICAJCSAJJG91dHB1dFN0ciAuPSAiPG9wdGlvbiB2YWx1ZT0nLTEnIi4oKCRzZWxlY3RPdGhlciA9PSB0cnVlKSA/ICIgc2VsZWN0ZWQ9J3NlbGVjdGVkJyIgOiAiIikuIj5PdGhlci4uLjwvb3B0aW9uPlxuIjsKICAgICAgIAkJICAJJG91dHB1dFN0ciAuPSAiPC9zZWxlY3Q+XG4iOwogICAgICAJCX0KCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nbW1fZmllbGRfc2hpcHBpbmdfc3RhdGUnIG5hbWU9J21tX2ZpZWxkX3NoaXBwaW5nX3N0YXRlJyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfc2hpcHBpbmdfc3RhdGUiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgeyRjdXN0b21BdHRyaWJ1dGVzfSAiLigoJHNlbGVjdE90aGVyID09IHRydWUpID8gIiIgOiAic3R5bGU9J2Rpc3BsYXk6bm9uZTsnICIpLiIvPlxuIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJzaGlwcGluZ3ppcGNvZGUiOgoJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J3RleHQnIGlkPSdtbV9maWVsZF9zaGlwcGluZ196aXAnIG5hbWU9J21tX2ZpZWxkX3NoaXBwaW5nX3ppcCcgdmFsdWU9JyIuaHRtbGVudGl0aWVzKHN0cmlwc2xhc2hlcygkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX3ppcCJdKSwgRU5UX1FVT1RFUywgIlVURi04IikuIicgY2xhc3M9J3skY3VzdG9tQ3NzQ2xhc3N9JyB7JGN1c3RvbUF0dHJpYnV0ZXN9IC8+CiI7CgkJCQlicmVhazsKCQkJCQkKCQkJY2FzZSAic2hpcHBpbmdjb3VudHJ5IjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxzZWxlY3QgaWQ9J21tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnknIG5hbWU9J21tX2ZpZWxkX3NoaXBwaW5nX2NvdW50cnknIG9uY2hhbmdlPVwibW1qcy5jb3VudHJ5Q2hhbmdlSGFuZGxlcignc2hpcHBpbmcnKTtcIiBjbGFzcz1cIm1tLXNlbGVjdExpc3RcIiB7JGN1c3RvbUF0dHJpYnV0ZXN9PgoiOwoJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+c2hpcHBpbmdDb3VudHJ5TGlzdDsKCQkJCSRvdXRwdXRTdHIgLj0gIjwvc2VsZWN0PgoiOwoJCQkJYnJlYWs7CgkJCQkJCgkJCWNhc2UgImNjbnVtYmVyIjogCgkJCQkJJGV2ZW50SGFuZGxlck5hbWUgPSAoTU1fVXRpbHM6OmlzQW5kcm9pZCgpKT8ib25rZXl1cCI6Im9ua2V5ZG93biI7CgkJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IHR5cGU9J3RleHQnIG1heGxlbmd0aD0nMTYnIHskZXZlbnRIYW5kbGVyTmFtZX09XCJyZXR1cm4gbW1qcy5vbmx5TnVtYmVycyhldmVudCwnY2MnKVwiIGlkPSdtbV9maWVsZF9jY19udW1iZXInIGF1dG9jb21wbGV0ZT0nb2ZmJyBuYW1lPSdtbV9maWVsZF9jY19udW1iZXInIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgeyRjdXN0b21BdHRyaWJ1dGVzfSAiOwoJCQkJCQoJCQkJCWlmKE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX1VTRV9DSEVDS09VVF9GT1JNX1RFU1RfREFUQSkgPT0gIjEiKQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuJGRlZmF1bHREYXRhWyJtbV9maWVsZF9jY19udW1iZXIiXS4iJyI7CgkJCQkJfQoJCQkJCQoJCQkJCSRvdXRwdXRTdHIgLj0gIi8+CiI7CgkJCQlicmVhazsKCQkJCQkKCQkJY2FzZSAiY2NleHBpcmF0aW9uZGF0ZSI6CgkJCQlpZihpc3NldCgkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2NjX2V4cF9tb250aCJdKSAmJiAkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2NjX2V4cF9tb250aCJdICE9ICIiKQoJCQkJewoJCQkJCSRjY0V4cE1vbnRoID0gJGRlZmF1bHREYXRhWyJtbV9maWVsZF9jY19leHBfbW9udGgiXTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQkkY2NFeHBNb250aCA9IDA7CgkJCQl9CgkJCQkJCgkJCQkkb3V0cHV0U3RyIC49ICI8c2VsZWN0IG5hbWU9J21tX2ZpZWxkX2NjX2V4cF9tb250aCcgaWQ9J21tX2ZpZWxkX2NjX2V4cF9tb250aCcgIGNsYXNzPVwibW0tc2VsZWN0TGlzdCBtbS1leHBNb250aExpc3RcIj4KIjsKCQkJCSRvdXRwdXRTdHIgLj0gTU1fSHRtbFV0aWxzOjpnZXRDQ0V4cE1vbnRoTGlzdCgkY2NFeHBNb250aCk7CgkJCQkkb3V0cHV0U3RyIC49ICI8L3NlbGVjdD4iOwoJCQkJJG91dHB1dFN0ciAuPSAiPHNlbGVjdCBuYW1lPSdtbV9maWVsZF9jY19leHBfeWVhcicgaWQ9J21tX2ZpZWxkX2NjX2V4cF95ZWFyJyBjbGFzcz1cIm1tLXNlbGVjdExpc3QgbW0tZXhwWWVhckxpc3RcIj4KIjsKCQkJCWlmKGlzc2V0KCRkZWZhdWx0RGF0YVsibW1fZmllbGRfY2NfZXhwX3llYXIiXSkgJiYgJGRlZmF1bHREYXRhWyJtbV9maWVsZF9jY19leHBfeWVhciJdICE9ICIiKQoJCQkJewoJCQkJCSRjY0V4cFllYXIgPSAkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX2NjX2V4cF95ZWFyIl07CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGNjRXhwWWVhciA9IDA7CgkJCQl9CgkJCQkJCgkJCQkkb3V0cHV0U3RyIC49IE1NX0h0bWxVdGlsczo6Z2V0Q0NFeHBZZWFyTGlzdCgkY2NFeHBZZWFyKTsKCQkJCQkKCQkJCSRvdXRwdXRTdHIgLj0gIjwvc2VsZWN0PgoiOwoJCQkJYnJlYWs7CgkJCQkJCgkJCWNhc2UgImNjc2VjdXJpdHljb2RlIjoKCQkJCSRldmVudEhhbmRsZXJOYW1lID0gKE1NX1V0aWxzOjppc0FuZHJvaWQoKSk/Im9ua2V5dXAiOiJvbmtleWRvd24iOwoJCQkJJG91dHB1dFN0ciAuPSAiPGlucHV0IGF1dG9jb21wbGV0ZT0nb2ZmJyB0eXBlPSdwYXNzd29yZCcgbWF4bGVuZ3RoPSc0JyB7JGV2ZW50SGFuZGxlck5hbWV9PVwicmV0dXJuIG1tanMub25seU51bWJlcnMoZXZlbnQsJ2NjJylcIiBpZD0nbW1fZmllbGRfY2NfY3Z2JyBuYW1lPSdtbV9maWVsZF9jY19jdnYnIGNsYXNzPSd7JGN1c3RvbUNzc0NsYXNzfScgIjsKCQkJCQoJCQkJaWYoTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfVVNFX0NIRUNLT1VUX0ZPUk1fVEVTVF9EQVRBKSA9PSAiMSIpCgkJCQl7CgkJCQkJJG91dHB1dFN0ciAuPSAidmFsdWU9JyIuJGRlZmF1bHREYXRhWyJtbV9maWVsZF9jY19jdnYiXS4iJyI7CgkJCQl9CgkJCQkKCQkJCSRvdXRwdXRTdHIgLj0gIiB7JGN1c3RvbUF0dHJpYnV0ZXN9IC8+CiI7CgkJCQlicmVhazsKCQkJCQkKCQkJY2FzZSAic2hpcHBpbmdtZXRob2QiOgoJCQkJaWYoIWlzX251bGwoJGF0dHMpICYmIGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCQkJewoJCQkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQkJCXsKCQkJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJCQkkJGtleSA9ICR2OwoJCQkJCX0KCQkJCX0KCQkJCQoJCQkJJHNlbGVjdGVkU2hpcHBpbmdNZXRob2QgPSAkZGVmYXVsdERhdGFbIm1tX2ZpZWxkX3NoaXBwaW5nX21ldGhvZCJdOwoJCQkJCgkJCQlpZihlbXB0eSgkc2VsZWN0ZWRTaGlwcGluZ01ldGhvZCkgJiYgaXNzZXQoJGRlZmF1bHQpKQoJCQkJewoJCQkJCSRzZWxlY3RlZFNoaXBwaW5nTWV0aG9kID0gJGRlZmF1bHQ7CQoJCQkJfQoJCQkJCgkJCQkkZm9ybS0+c2hpcHBpbmdNZXRob2RzID0gTU1fSHRtbFV0aWxzOjpnZXRTaGlwcGluZ01ldGhvZExpc3QoJHNlbGVjdGVkU2hpcHBpbmdNZXRob2QpOwoJCQkJCgkJCQkkb3V0cHV0U3RyIC49ICI8c2VsZWN0IGlkPSdtbV9maWVsZF9zaGlwcGluZ19tZXRob2QnIG5hbWU9J21tX2ZpZWxkX3NoaXBwaW5nX21ldGhvZCcgb25jaGFuZ2U9J21tanMuc2hpcHBpbmdNZXRob2RDaGFuZ2VIYW5kbGVyKCk7JyBjbGFzcz1cIm1tLXNlbGVjdExpc3RcIiB7JGN1c3RvbUF0dHJpYnV0ZXN9PgoiOwoJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+c2hpcHBpbmdNZXRob2RzOwoJCQkJJG91dHB1dFN0ciAuPSAiPC9zZWxlY3Q+CiI7CgkJCQlicmVhazsKCQkJCQkKCQkJY2FzZSAic2hpcHBpbmdzYW1lYXNiaWxsaW5nIjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J21tX2NoZWNrYm94X2JpbGxpbmdfZXF1YWxzX3NoaXBwaW5nJyAiLigoJGZvcm0tPnNoaXBwaW5nU2FtZUFzQmlsbGluZykgPyAiY2hlY2tlZCIgOiAiIikuIiBvbmNsaWNrPSdtbWpzLnRvZ2dsZVNoaXBwaW5nSW5mbygpOycgY2xhc3M9XCJtbS1yYWRpb0J1dHRvblwiIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCQkJCQoJCQljYXNlICJjb3Vwb25jb2RlIjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSd0ZXh0JyBpZD0nbW1fZmllbGRfY291cG9uX2NvZGUnIG5hbWU9J21tX2ZpZWxkX2NvdXBvbl9jb2RlJyB2YWx1ZT0nIi5odG1sZW50aXRpZXMoc3RyaXBzbGFzaGVzKCRkZWZhdWx0RGF0YVsibW1fZmllbGRfY291cG9uX2NvZGUiXSksIEVOVF9RVU9URVMsICJVVEYtOCIpLiInIG9ua2V5ZG93bj0ncmV0dXJuIG1tanMuY291cG9uQ2hlY2soZXZlbnQpOycgY2xhc3M9J3skY3VzdG9tQ3NzQ2xhc3N9JyB7JGN1c3RvbUF0dHJpYnV0ZXN9IC8+CiI7CgkJCQlicmVhazsKCQkJCQoJCQljYXNlICJnaWZ0IjoKCQkJCSRvdXRwdXRTdHIgLj0gIjxpbnB1dCB0eXBlPSdjaGVja2JveCcgaWQ9J21tX2NoZWNrYm94X2lzX2dpZnQnIi4oKCRmb3JtLT5pc0dpZnQpID8gImNoZWNrZWQiIDogIiIpLiIgb25jbGljaz0nbW1qcy50b2dnbGVHaWZ0U2VjdGlvbigpOycgY2xhc3M9XCJtbS1yYWRpb0J1dHRvblwiIHskY3VzdG9tQXR0cmlidXRlc30gLz4KIjsKCQkJCWJyZWFrOwoJCX0KCQkKCQlyZXR1cm4gJG91dHB1dFN0cjsKCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9EYXRhIHRhZy4gSXQgaXMgcmVzcG9uc2libGUgZm9yIHJlbmRlcmluZyB0aGUgCgkgKiBkYXRhIGVsZW1lbnQgYmFzZWQgb24gdGhlIHR5cGUgcGFzc2VkIGFuZCB0aGUgZm9ybSBjb25maWd1cmF0aW9uLgoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fZGF0YSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewoJCSRvdXRwdXRTdHIgPSAiPHNwYW4gY2xhc3M9XCJtbS1kYXRhXCI+IjsKCQoJCWlmKGlzX2FycmF5KCRhdHRzKSAmJiBjb3VudCgkYXR0cykgPiAwKQoJCXsKCQkJZm9yZWFjaCgkYXR0cyBhcyAkaz0+JHYpCgkJCXsKCQkJCSRrZXkgPSBzdHJ0b2xvd2VyKCRrKTsKCQkJCSQka2V5ID0gJHY7CgkJCX0KCQl9CgkJCgkJJGZvcm0gPSBNTV9PYmplY3RDYWNoZTo6Z2V0KE1NX09iamVjdENhY2hlOjokS0VZX0xBU1RfRk9STSk7CgkKCQlpZihpc3NldCgkbmFtZSkpCgkJewoJCQlzd2l0Y2goc3RydG9sb3dlcigkbmFtZSkpCgkJCXsKCQkJCWNhc2UgInByb2R1Y3RuYW1lIjoKCQkJCQkkdXNlQWNjZXNzTmFtZSA9IHRydWU7CgkJCQkJaWYoaXNzZXQoJHVzZWFjY2Vzc25hbWUpKQoJCQkJCXsKCQkJCQkJaWYoJHVzZUFjY2Vzc05hbWUgPT0gImZhbHNlIikKCQkJCQkJewoJCQkJCQkJJHVzZUFjY2Vzc05hbWUgPSBmYWxzZTsKCQkJCQkJfQoJCQkJCX0KCQkJCQkKCQkJCQlpZigkdXNlQWNjZXNzTmFtZSA9PSB0cnVlIHx8IGVtcHR5KCRmb3JtLT5wcm9kdWN0TmFtZSkpCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT5hY2Nlc3NOYW1lOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkb3V0cHV0U3RyIC49ICRmb3JtLT5wcm9kdWN0TmFtZTsKCQkJCQl9CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlICJwcm9kdWN0ZGVzY3JpcHRpb24iOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnByb2R1Y3REZXNjcmlwdGlvbjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInByb2R1Y3RwcmljZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAkZm9ybS0+cHJvZHVjdFByaWNlOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAicHJvZHVjdHByaWNlZGVzY3JpcHRpb24iOgoJCQkJCSRvdXRwdXRTdHIgLj0gJGZvcm0tPnByb2R1Y3RQcmljZURlc2NyaXB0aW9uOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAic2hpcHBpbmdwcmljZSI6CgkJCQkJJG91dHB1dFN0ciAuPSAiPHNwYW4gaWQ9XCJtbV9sYWJlbF9zaGlwcGluZ19wcmljZVwiPjwvc3Bhbj4iOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiZGlzY291bnQiOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxzcGFuIGlkPVwibW1fbGFiZWxfZGlzY291bnRcIj48L3NwYW4+IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWNhc2UgInRvdGFscHJpY2UiOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxzcGFuIGlkPVwibW1fbGFiZWxfdG90YWxfcHJpY2VcIj48L3NwYW4+IjsKCQkJCQlicmVhazsKCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gIkludmFsaWQgbmFtZSBvZiAneyRuYW1lfScgcGFzc2VkIHRvIFNtYXJ0VGFnIHskY29kZX0iOwoJCQkJCWJyZWFrOwoJCQl9CgkJCQoJCQlyZXR1cm4gJG91dHB1dFN0ci4iPC9zcGFuPgoiOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICduYW1lJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIFNtYXJ0VGFnIHskY29kZX0uIjsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Zvcm1fTWVzc2FnZSB0YWcuIEl0IGlzIHJlc3BvbnNpYmxlIGZvciByZW5kZXJpbmcgdGhlIAoJICogbWVzc2FnZSBlbGVtZW50IGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZCBhbmQgdGhlIGZvcm0gY29uZmlndXJhdGlvbi4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBtbV9mb3JtX21lc3NhZ2UoJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQkkb3V0cHV0U3RyID0gIiI7CgkKCQlpZihpc19hcnJheSgkYXR0cykgJiYgY291bnQoJGF0dHMpID4gMCkKCQl7CgkJCWZvcmVhY2goJGF0dHMgYXMgJGs9PiR2KQoJCQl7CgkJCQkka2V5ID0gc3RydG9sb3dlcigkayk7CgkJCQkkJGtleSA9ICR2OwoJCQl9CgkJfQoJCQoJCSRmb3JtID0gTU1fT2JqZWN0Q2FjaGU6OmdldChNTV9PYmplY3RDYWNoZTo6JEtFWV9MQVNUX0ZPUk0pOwoJCgkJaWYoaXNzZXQoJHR5cGUpKQoJCXsKCQkJc3dpdGNoKHN0cnRvbG93ZXIoJHR5cGUpKQoJCQl7CgkJCQljYXNlICJlcnJvciI6CgkJCQkJaWYoJGZvcm0tPmVycm9yICE9ICIiKQoJCQkJCXsKCQkJCQkJJG91dHB1dFN0ciAuPSAiPHAgY2xhc3M9XCJtbS1mb3JtRXJyb3JcIj4iLl9tbXQoJGZvcm0tPmVycm9yKS4iPC9wPiI7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiY291cG9uc3VjY2VzcyI6CgkJCQkJJG91dHB1dFN0ciAuPSAiPHNwYW4gaWQ9XCJtbV9sYWJlbF9jb3Vwb25fc3VjY2Vzc1wiIGNsYXNzPVwibW0tY291cG9uU3VjY2Vzc01lc3NhZ2VcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvc3Bhbj4iOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAiY291cG9uZXJyb3IiOgoJCQkJCSRvdXRwdXRTdHIgLj0gIjxzcGFuIGlkPVwibW1fbGFiZWxfY291cG9uX2Vycm9yXCIgY2xhc3M9XCJtbS1jb3Vwb25FcnJvck1lc3NhZ2VcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjwvc3Bhbj4iOwoJCQkJCWJyZWFrOwoJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiAiSW52YWxpZCB0eXBlIG9mICd7JHR5cGV9JyBwYXNzZWQgdG8geyRjb2RlfSI7CgkJCQkJYnJlYWs7CgkJCX0KCQkJCgkJCXJldHVybiAkb3V0cHV0U3RyOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogVGhlICd0eXBlJyBhdHRyaWJ1dGUgaXMgcmVxdWlyZWQgZm9yIHskY29kZX0gU21hcnRUYWciOwoJCX0KCX0KCQoJLyoqCgkgKiBUaGlzIGZ1bmN0aW9uIHByb2Nlc3NlcyB0aGUgTU1fRm9ybV9CdXR0b24gdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgCgkgKiByZXR1cm5pbmcgdGhlIGFwcHJvcHJpYXRlIGphdmFzY3JpcHQgdG8gc3VibWl0IHRoZSBmb3JtIGJhc2VkIG9uIHRoZSB0eXBlIHBhc3NlZC4KCSAqIAoJICogQHBhcmFtIFN0cmluZyAkY29udGVudCB0aGUgY29udGVudCBjb250YWluZWQgd2l0aGluIHRoZSBTbWFydFRhZyAoaWYgYW55KQoJICogQHBhcmFtIEFycmF5ICRhdHRzIGFuIGFzc29jaWF0aXZlIGFycmF5IG9mIGF0dHJpYnV0ZXMgYXNzb2NpYXRlZCB3aXRoIHRoZSBTbWFydFRhZwoJICogQHBhcmFtIFN0cmluZyAkY29kZSB0aGUgcmF3IHZlcnNpb24gb2YgdGhlIFNtYXJ0VGFnIG5hbWUgKGkuZS4gbm90IGNhc2UtaW5zZW50aXZlLCBub3QgYnJva2VuIHVwIGludG8gcGFydHMpCgkgKiBAcmV0dXJuIFN0cmluZyBhIHN0cmluZyBiYXNlZCBvbiB0aGUgJGNvbnRlbnQgcGFzc2VkIHdpdGggYWxsIFNtYXJ0VGFncyBwcm9jZXNzZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIG1tX2Zvcm1fYnV0dG9uKCRjb250ZW50LCAkYXR0cywgJGNvZGUpCgl7CgkJJG91dHB1dFN0ciA9ICIiOwoJCgkJaWYoaXNfYXJyYXkoJGF0dHMpICYmIGNvdW50KCRhdHRzKSA+IDApCgkJewoJCQlmb3JlYWNoKCRhdHRzIGFzICRrPT4kdikKCQkJewoJCQkJJGtleSA9IHN0cnRvbG93ZXIoJGspOwoJCQkJJCRrZXkgPSAkdjsKCQkJfQoJCX0KCQkKCQkkZm9ybSA9IE1NX09iamVjdENhY2hlOjpnZXQoTU1fT2JqZWN0Q2FjaGU6OiRLRVlfTEFTVF9GT1JNKTsKCQoJCWlmKGlzc2V0KCR0eXBlKSkKCQl7CgkJCXN3aXRjaChzdHJ0b2xvd2VyKCR0eXBlKSkKCQkJewoJCQkJY2FzZSAiYWxsIjoKCQkJCQlpZighaXNzZXQoJGxhYmVsKSkKCQkJCQl7CgkJCQkJCSRsYWJlbCA9ICJTdWJtaXQgT3JkZXIiOwoJCQkJCX0KCQkJCQlpZighaXNzZXQoJGNvbG9yKSkKCQkJCQl7CgkJCQkJCSRjb2xvciA9ICJ3aGl0ZSI7CgkJCQkJfQoJCQkJCQoJCQkJCS8vIGdldCBhbGwgYWN0aXZlIHBheW1lbnQgc2VydmljZSBidXR0b25zCgkJCQkJLy8gZ2V0IG9uc2l0ZSBwYXltZW50IHNlcnZpY2UgKGlmIGF2YWlsYWJsZSkKCQkJCQkkb3ZlcnJpZGVNb2RlID0gTU1fU2Vzc2lvbjo6dmFsdWUoTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokS0VZX1BBWU1FTlRfU0VSVklDRV9PVkVSUklERSk7CgkJCQkJaWYgKCRvdmVycmlkZU1vZGUgPT09IE1NX1Rlc3RQYXltZW50U2VydmljZTo6JE1PREVfT1ZFUlJJREVfV0lUSF9LRVkpCgkJCQkJewoJCQkJCQkkdGhpcy0+b25zaXRlU2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2UoTU1fUGF5bWVudFNlcnZpY2U6OiRURVNUX1NFUlZJQ0VfVE9LRU4pOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkdGhpcy0+b25zaXRlU2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0T25zaXRlUGF5bWVudFNlcnZpY2UoKTsKCQkJCQkJaWYgKCRvdmVycmlkZU1vZGUgPT09IE1NX1Rlc3RQYXltZW50U2VydmljZTo6JE1PREVfUFJPRFVDVElPTl9PVkVSUklERV9XSVRIX0tFWSkKCQkJCQkJewoJCQkJCQkJJHRoaXMtPm9uc2l0ZVNlcnZpY2UtPnN3aXRjaFRvVGVzdE1vZGUoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQkKCQkJCQlpZigkdGhpcy0+b25zaXRlU2VydmljZSAmJiAkdGhpcy0+b25zaXRlU2VydmljZS0+aXNBY3RpdmUoKSkKCQkJCQl7CiAgICAgICAgICAJCQkJJG91dHB1dFN0ciAuPSAiPHA+PGEgaHJlZj1cIiI7CgkJCQkJCSRhdHRzID0gYXJyYXkoInR5cGUiPT4ic3VibWl0IiwiaXNEZWZhdWx0Ij0+InRydWUiKTsKCQkJCQkJJG91dHB1dFN0ciAuPSAkdGhpcy0+bW1fZm9ybV9idXR0b24oIiIsICRhdHRzLCAiTU1fRm9ybV9CdXR0b24iKTsKCQkJCQkJJG91dHB1dFN0ciAuPSAiXCIgY2xhc3M9XCJtbS1idXR0b24gbGFyZ2UgeyRjb2xvcn1cIiBzdHlsZT1cIndpZHRoOjE2MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjtcIj57JGxhYmVsfTwvYT48L3A+IjsKCQkJCQkJCgkJCQkJCS8vYWxsb3cgb25zaXRlIHBheW1lbnQgc2VydmljZSB0byBpbnRlcmFjdCB3aXRoIHRoZSBmcm9udCBlbmQKCQkJCQkJLy9UT0RPOiByZXBsYWNlIHVzZXJob29rcyB3aXRoIGluaXQgaGVyZSBpZiBwb3NzaWJsZQoJCQkJCQkvLyR0aGlzLT5vbnNpdGVTZXJ2aWNlLT5jaGVja291dEluaXQoKTsKCQkJCQl9CgkJCQkJCgkJCQkJLy8gZ2V0IG9mZnNpdGUgcGF5bWVudCBzZXJ2aWNlcwoJCQkJCSRzZXJ2aWNlcyA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0QXZhaWxhYmxlUGF5bWVudFNlcnZpY2VzKCk7CgkJCQkJCgkJCQkJZm9yZWFjaCAoJHNlcnZpY2VzIGFzICRzZXJ2aWNlKQoJCQkJCXsKCQkJCQkJaWYgKCRzZXJ2aWNlIGluc3RhbmNlb2YgTU1fUGF5bWVudFNlcnZpY2UpCgkJCQkJCXsKCQkJCQkJCWlmKCEkc2VydmljZS0+c3VwcG9ydHNGZWF0dXJlKE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9OU0lURV9TRVJWSUNFKSkKCQkJCQkJCXsKCQkJCQkJCQlzd2l0Y2goJHNlcnZpY2UtPmdldFRva2VuKCkpCgkJCQkJCQkJewoJCQkJCQkJCQljYXNlIE1NX1BheW1lbnRTZXJ2aWNlOjokUEFZUEFMX1NFUlZJQ0VfVE9LRU46CgkJCQkJCQkJCQkkb3V0cHV0U3RyIC49ICI8cD48YSBocmVmPVwiIjsKCQkJCQkJCQkJCSRhdHRzID0gYXJyYXkoInR5cGUiPT4ic3VibWl0IiwicGF5bWVudE1ldGhvZCI9PnN0cnRvbG93ZXIoJHNlcnZpY2UtPmdldFRva2VuKCkpKTsKCQkJCQkJCQkJCSRvdXRwdXRTdHIgLj0gJHRoaXMtPm1tX2Zvcm1fYnV0dG9uKCIiLCAkYXR0cywgIk1NX0Zvcm1fQnV0dG9uIik7CgkJCQkJCQkJCQkkb3V0cHV0U3RyIC49ICJcIiBjbGFzcz1cIm1tLXBheXBhbENoZWNrb3V0QnRuXCI+PC9hPjwvcD4iOwoJCQkJCQkJCQkJYnJlYWs7CgkJCQkJCQkJCQkKCQkJCQkJCQkJY2FzZSBNTV9QYXltZW50U2VydmljZTo6JENPSU5CQVNFX1NFUlZJQ0VfVE9LRU46CgkJCQkJCQkJCQkkb3V0cHV0U3RyIC49ICI8cD48YSBocmVmPVwiIjsKCQkJCQkJCQkJCSRhdHRzID0gYXJyYXkoInR5cGUiPT4ic3VibWl0IiwicGF5bWVudE1ldGhvZCI9PnN0cnRvbG93ZXIoJHNlcnZpY2UtPmdldFRva2VuKCkpKTsKCQkJCQkJCQkJCSRvdXRwdXRTdHIgLj0gJHRoaXMtPm1tX2Zvcm1fYnV0dG9uKCIiLCAkYXR0cywgIk1NX0Zvcm1fQnV0dG9uIik7CgkJCQkJCQkJCQkkb3V0cHV0U3RyIC49ICJcIiBjbGFzcz1cIm1tLWNvaW5iYXNlQ2hlY2tvdXRCdG5cIj48L2E+PC9wPiI7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQkJCQoJCQkJCQkJCQljYXNlIE1NX1BheW1lbnRTZXJ2aWNlOjokQ09JTkJBU0VfTUlOSU1BTF9TRVJWSUNFX1RPS0VOOgoJCQkJCQkJCQkJJG91dHB1dFN0ciAuPSAiPHA+PGEgaHJlZj1cIiI7CgkJCQkJCQkJCQkkYXR0cyA9IGFycmF5KCJ0eXBlIj0+InN1Ym1pdCIsInBheW1lbnRNZXRob2QiPT5zdHJ0b2xvd2VyKCRzZXJ2aWNlLT5nZXRUb2tlbigpKSk7CgkJCQkJCQkJCQkkb3V0cHV0U3RyIC49ICR0aGlzLT5tbV9mb3JtX2J1dHRvbigiIiwgJGF0dHMsICJNTV9Gb3JtX0J1dHRvbiIpOwoJCQkJCQkJCQkJJG91dHB1dFN0ciAuPSAiXCIgY2xhc3M9XCJtbS1jb2luYmFzZU1pbmltYWxDaGVja291dEJ0blwiPjwvYT48L3A+IjsKCQkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCQkJCgkJCQkJCQkJCWNhc2UgTU1fUGF5bWVudFNlcnZpY2U6OiRDTElDS0JBTktfU0VSVklDRV9UT0tFTjoKCQkJCQkJCQkJCSRvdXRwdXRTdHIgLj0gIjxwPjxhIGhyZWY9XCIiOwoJCQkJCQkJCQkJJGF0dHMgPSBhcnJheSgidHlwZSI9PiJzdWJtaXQiLCJwYXltZW50TWV0aG9kIj0+c3RydG9sb3dlcigkc2VydmljZS0+Z2V0VG9rZW4oKSkpOwoJCQkJCQkJCQkJJG91dHB1dFN0ciAuPSAkdGhpcy0+bW1fZm9ybV9idXR0b24oIiIsICRhdHRzLCAiTU1fRm9ybV9CdXR0b24iKTsKCQkJCQkJCQkJCSRvdXRwdXRTdHIgLj0gIlwiIGNsYXNzPVwibW0tY2xpY2tiYW5rQ2hlY2tvdXRCdG5cIj48L2E+PC9wPiI7CgkJCQkJCQkJCQlicmVhazsKCQkJCQkJCQl9CgkJCQkJCQkJLy9hbGxvdyBvZmZzaXRlIHBheW1lbnQgc2VydmljZXMgdG8gaW50ZXJhY3Qgd2l0aCB0aGUgZnJvbnQgZW5kCgkJCQkJCQkJJHNlcnZpY2UtPmNoZWNrb3V0SW5pdCgpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSAic3VibWl0IjoKCQkJCQlpZihpc3NldCgkaXNkZWZhdWx0KSAmJiAkaXNkZWZhdWx0ID09ICJ0cnVlIikKCQkJCQl7CgkJCQkJCSRjcm50QnRuSXNEZWZhdWx0ID0gdHJ1ZTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJGNybnRCdG5Jc0RlZmF1bHQgPSBmYWxzZTsKCQkJCQl9CgkJCQkJCgkJCQkJaWYoaXNzZXQoJHBheW1lbnRtZXRob2QpICYmICRwYXltZW50bWV0aG9kICE9ICJkZWZhdWx0IikKCQkJCQl7CgkJCQkJCWlmKHN0cnRvbG93ZXIoJHBheW1lbnRtZXRob2QpID09IHN0cnRvbG93ZXIoTU1fUGF5bWVudFNlcnZpY2U6OiRQQVlQQUxfU0VSVklDRV9UT0tFTikpCgkJCQkJCXsgCgkJCQkJCQlpZigkY3JudEJ0bklzRGVmYXVsdCkKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+ZGZsdEJ0blBheW1lbnRTZXJ2aWNlU2V0ID0gdHJ1ZTsKCQkJCQkJCQkkdGhpcy0+ZGZsdEJ0blBheW1lbnRTZXJ2aWNlVG9rZW4gPSBNTV9QYXltZW50U2VydmljZTo6JFBBWVBBTF9TRVJWSUNFX1RPS0VOOwoJCQkJCQkJfQoJCQkJCQkJIAoJCQkJCQkJaWYoJGNybnRCdG5Jc0RlZmF1bHQgfHwgISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCQkJCQkJeyAKCQkJCQkJCQkkdGhpcy0+b25TdWJtaXRDb2RlID0gIm9uc3VibWl0PVwicmV0dXJuIG1tanMuY2hlY2tvdXR4KCciLk1NX1BheW1lbnRTZXJ2aWNlOjokUEFZUEFMX1NFUlZJQ0VfVE9LRU4uIicsIHRydWUpO1wiIjsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJaWYoISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCQkJCQkJewoJCQkJCQkJCSR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0ID0gdHJ1ZTsKCQkJCQkJCQkkdGhpcy0+Zmlyc3RCdG5TZXJ2aWNlVG9rZW4gPSBNTV9QYXltZW50U2VydmljZTo6JFBBWVBBTF9TRVJWSUNFX1RPS0VOOwoJCQkJCQkJfQoJCQkJCQkJJG91dHB1dFN0ciAuPSAiamF2YXNjcmlwdDptbWpzLmNoZWNrb3V0eCgnIi5NTV9QYXltZW50U2VydmljZTo6JFBBWVBBTF9TRVJWSUNFX1RPS0VOLiInLCB0cnVlKTsiOyAKCQkJCQkJfQoJCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHBheW1lbnRtZXRob2QpID09IHN0cnRvbG93ZXIoTU1fUGF5bWVudFNlcnZpY2U6OiRDTElDS0JBTktfU0VSVklDRV9UT0tFTikpCgkJCQkJCXsKCQkJCQkJCWlmKCRjcm50QnRuSXNEZWZhdWx0KQoJCQkJCQkJewoJCQkJCQkJCSR0aGlzLT5kZmx0QnRuUGF5bWVudFNlcnZpY2VTZXQgPSB0cnVlOwoJCQkJCQkJCSR0aGlzLT5kZmx0QnRuUGF5bWVudFNlcnZpY2VUb2tlbiA9IE1NX1BheW1lbnRTZXJ2aWNlOjokQ0xJQ0tCQU5LX1NFUlZJQ0VfVE9LRU47CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCWlmKCRjcm50QnRuSXNEZWZhdWx0IHx8ICEkdGhpcy0+Zmlyc3RCdG5QYXltZW50U2VyaXZjZVNldCkKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+b25TdWJtaXRDb2RlID0gIm9uc3VibWl0PVwicmV0dXJuIG1tanMuY2hlY2tvdXR4KCciLk1NX1BheW1lbnRTZXJ2aWNlOjokQ0xJQ0tCQU5LX1NFUlZJQ0VfVE9LRU4uIicsIHRydWUpO1wiIjsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJaWYoISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCQkJCQkJewoJCQkJCQkJCSR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0ID0gdHJ1ZTsKCQkJCQkJCQkkdGhpcy0+Zmlyc3RCdG5TZXJ2aWNlVG9rZW4gPSBNTV9QYXltZW50U2VydmljZTo6JENMSUNLQkFOS19TRVJWSUNFX1RPS0VOOwoJCQkJCQkJfQoJCQkJCQkJJG91dHB1dFN0ciAuPSAiamF2YXNjcmlwdDptbWpzLmNoZWNrb3V0eCgnIi5NTV9QYXltZW50U2VydmljZTo6JENMSUNLQkFOS19TRVJWSUNFX1RPS0VOLiInLCB0cnVlKTsiOyAKCQkJCQkJfQoJCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHBheW1lbnRtZXRob2QpID09IHN0cnRvbG93ZXIoTU1fUGF5bWVudFNlcnZpY2U6OiRDT0lOQkFTRV9TRVJWSUNFX1RPS0VOKSkKCQkJCQkJewoJCQkJCQkJaWYoJGNybnRCdG5Jc0RlZmF1bHQpCgkJCQkJCQl7CgkJCQkJCQkJJHRoaXMtPmRmbHRCdG5QYXltZW50U2VydmljZVNldCA9IHRydWU7CgkJCQkJCQkJJHRoaXMtPmRmbHRCdG5QYXltZW50U2VydmljZVRva2VuID0gTU1fUGF5bWVudFNlcnZpY2U6OiRDT0lOQkFTRV9TRVJWSUNFX1RPS0VOOwoJCQkJCQkJfQoJCQkJCQkJCgkJCQkJCQlpZigkY3JudEJ0bklzRGVmYXVsdCB8fCAhJHRoaXMtPmZpcnN0QnRuUGF5bWVudFNlcml2Y2VTZXQpCgkJCQkJCQl7CgkJCQkJCQkJJHRoaXMtPm9uU3VibWl0Q29kZSA9ICJvbnN1Ym1pdD1cInJldHVybiBtbWpzLmNoZWNrb3V0eCgnIi5NTV9QYXltZW50U2VydmljZTo6JENPSU5CQVNFX1NFUlZJQ0VfVE9LRU4uIicsIHRydWUpO1wiIjsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJaWYoISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCQkJCQkJewoJCQkJCQkJCSR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0ID0gdHJ1ZTsKCQkJCQkJCQkkdGhpcy0+Zmlyc3RCdG5TZXJ2aWNlVG9rZW4gPSBNTV9QYXltZW50U2VydmljZTo6JENPSU5CQVNFX1NFUlZJQ0VfVE9LRU47CgkJCQkJCQl9CgkJCQkJCQkkb3V0cHV0U3RyIC49ICJqYXZhc2NyaXB0Om1tanMuY2hlY2tvdXR4KCciLk1NX1BheW1lbnRTZXJ2aWNlOjokQ09JTkJBU0VfU0VSVklDRV9UT0tFTi4iJywgdHJ1ZSk7IjsKCQkJCQkJfQoJCQkJCQllbHNlIGlmKHN0cnRvbG93ZXIoJHBheW1lbnRtZXRob2QpID09IHN0cnRvbG93ZXIoTU1fUGF5bWVudFNlcnZpY2U6OiRDT0lOQkFTRV9NSU5JTUFMX1NFUlZJQ0VfVE9LRU4pKQoJCQkJCQl7CgkJCQkJCQlpZigkY3JudEJ0bklzRGVmYXVsdCkKCQkJCQkJCXsKCQkJCQkJCQkkdGhpcy0+ZGZsdEJ0blBheW1lbnRTZXJ2aWNlU2V0ID0gdHJ1ZTsKCQkJCQkJCQkkdGhpcy0+ZGZsdEJ0blBheW1lbnRTZXJ2aWNlVG9rZW4gPSBNTV9QYXltZW50U2VydmljZTo6JENPSU5CQVNFX01JTklNQUxfU0VSVklDRV9UT0tFTjsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJaWYoJGNybnRCdG5Jc0RlZmF1bHQgfHwgISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCQkJCQkJewoJCQkJCQkJCSR0aGlzLT5vblN1Ym1pdENvZGUgPSAib25zdWJtaXQ9XCJyZXR1cm4gbW1qcy5jaGVja291dHgoJyIuTU1fUGF5bWVudFNlcnZpY2U6OiRDT0lOQkFTRV9NSU5JTUFMX1NFUlZJQ0VfVE9LRU4uIicsIHRydWUpO1wiIjsKCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJaWYoISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCQkJCQkJewoJCQkJCQkJCSR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0ID0gdHJ1ZTsKCQkJCQkJCQkkdGhpcy0+Zmlyc3RCdG5TZXJ2aWNlVG9rZW4gPSBNTV9QYXltZW50U2VydmljZTo6JENPSU5CQVNFX01JTklNQUxfU0VSVklDRV9UT0tFTjsKCQkJCQkJCX0KCQkJCQkJCSRvdXRwdXRTdHIgLj0gImphdmFzY3JpcHQ6bW1qcy5jaGVja291dHgoJyIuTU1fUGF5bWVudFNlcnZpY2U6OiRDT0lOQkFTRV9NSU5JTUFMX1NFUlZJQ0VfVE9LRU4uIicsIHRydWUpOyI7CgkJCQkJCX0KCQkJCQkJZWxzZQoJCQkJCQl7CgkJCQkJCQlyZXR1cm4gIkludmFsaWQgU21hcnRUYWcgQ29uZmlndXJhdGlvbjogSW52YWxpZCBtZXRob2Qgb2YgJ3skcGF5bWVudG1ldGhvZH0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IHdpdGggdHlwZSAneyR0eXBlfScuIjsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlpZigkY3JudEJ0bklzRGVmYXVsdCkKCQkJCQkJewoJCQkJCQkJJHRoaXMtPmRmbHRCdG5QYXltZW50U2VydmljZVNldCA9IHRydWU7CgkJCQkJCQkkdGhpcy0+ZGZsdEJ0blBheW1lbnRTZXJ2aWNlVG9rZW4gPSAiIjsKCQkJCQkJfQoKCQkJCQkJaWYoJGNybnRCdG5Jc0RlZmF1bHQgfHwgISR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0KQoJCQkJCQl7CgkJCQkJCQkkdGhpcy0+b25TdWJtaXRDb2RlID0gIm9uc3VibWl0PVwicmV0dXJuIG1tanMuY2hlY2tvdXQodHJ1ZSk7XCIiOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQlpZighJHRoaXMtPmZpcnN0QnRuUGF5bWVudFNlcml2Y2VTZXQpCgkJCQkJCXsKCQkJCQkJCSR0aGlzLT5maXJzdEJ0blBheW1lbnRTZXJpdmNlU2V0ID0gdHJ1ZTsKCQkJCQkJCSR0aGlzLT5maXJzdEJ0blNlcnZpY2VUb2tlbiA9ICIiOyAKCQkJCQkJfQoJCQkJCQkkb3V0cHV0U3RyIC49ICJqYXZhc2NyaXB0OiBtbWpzLmNoZWNrb3V0KHRydWUpOyI7CgkJCQkJfQoJCQkJCWJyZWFrOwoJCQkJCgkJCQljYXNlICJhcHBseWNvdXBvbiI6CgkJCQkJJG91dHB1dFN0ciAuPSAiamF2YXNjcmlwdDptbWpzLmFwcGx5Q291cG9uKCk7IjsKCQkJCQlicmVhazsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuICJJbnZhbGlkIHR5cGUgb2YgJ3skdHlwZX0nIHBhc3NlZCB0byBTbWFydFRhZyB7JGNvZGV9IjsKCQkJCQlicmVhazsKCQkJfQoJCQkKCQkJcmV0dXJuICRvdXRwdXRTdHI7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiAiSW52YWxpZCBTbWFydFRhZyBDb25maWd1cmF0aW9uOiBUaGUgJ3R5cGUnIGF0dHJpYnV0ZSBpcyByZXF1aXJlZCBmb3IgeyRjb2RlfSBTbWFydFRhZyI7CgkJfQoJCQoJfQp9Cgo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(235, 'protectedcontentengine', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1Byb3RlY3RlZENvbnRlbnRFbmdpbmUKewoJcHVibGljIHN0YXRpYyAkVElNRV9TRVRUSU5HX1NFUlZFUiA9ICJzZXJ2ZXIiOwoJcHVibGljIHN0YXRpYyAkVElNRV9TRVRUSU5HX0xPQ0FMID0gImxvY2FsIjsKCQoJZnVuY3Rpb24gX19jb25zdHJ1Y3QoKXt9CgoJcHVibGljIGZ1bmN0aW9uIHNhdmVTbWFydENvbnRlbnQoJGlkLCAkcG9zdCkKCXsKCQlpZigkcG9zdC0+cG9zdF9zdGF0dXMgIT0gJ2F1dG8tZHJhZnQnCgkJCSYmIGZhbHNlID09PSAod3BfaXNfcG9zdF9hdXRvc2F2ZSgkcG9zdCkgfHwgd3BfaXNfcG9zdF9yZXZpc2lvbigkcG9zdCkpKQoJCXsKCQkJJGNvbnRlbnQgPSAkcG9zdC0+cG9zdF9jb250ZW50OwoJCQkkc21hcnRUYWdFbmdpbmUgPSBuZXcgTU1fU21hcnRUYWdVdGlsKCk7CgkJCSRzbWFydFRhZ0VuZ2luZS0+c2F2ZVRhZ3MoJGNvbnRlbnQsICRwb3N0LT5JRCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gcHJvdGVjdENvbnRlbnQoJHBvc3RJZCwgJGlzQmxvZ1BhZ2U9ZmFsc2UpCgl7CgkJZ2xvYmFsICRjdXJyZW50X3VzZXIsICRwb3N0OwoJCQoJCWlmKGludHZhbCgkcG9zdElkKSA8PSAwKQoJCXsKCQkJaWYoaXNzZXQoJHBvc3QtPklEKSAmJiBpbnR2YWwoJHBvc3QtPklEKT4wKQoJCQl7CgkJCQkkcG9zdElkID0gJHBvc3QtPklEOwoJCQl9CgkJCWVsc2UgaWYoaXNzZXQoJHBvc3QtPmRhdGEtPklEKSAmJiBpbnR2YWwoJHBvc3QtPmRhdGEtPklEKSkKCQkJewoJCQkJJHBvc3RJZCA9ICRwb3N0LT5kYXRhLT5JRDsKCQkJfQoJCX0KCQkKCQkkaXNCbG9nSG9tZVBhZ2UgPSBmYWxzZTsKCQkkc2hvd09uRnJvbnQgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKCJzaG93X29uX2Zyb250Iik7CgkJaWYoJHNob3dPbkZyb250ID09ICJwb3N0cyIgJiYgaXNfaG9tZSgpKQoJCXsKCQkJJGlzQmxvZ0hvbWVQYWdlID0gdHJ1ZTsKCQl9CgkJCgkJaWYoISRpc0Jsb2dIb21lUGFnZSkKCQl7IAoJCQlpZihpc3NldCgkcG9zdElkKSAmJiBpbnR2YWwoJHBvc3RJZCk+MCkKCQkJeyAKCQkJCWlmKCEkdGhpcy0+Y2FuQWNjZXNzUG9zdCgkcG9zdElkLCRjdXJyZW50X3VzZXItPklEKSkKCQkJCXsgCgkJCQkJLy8gZGV0ZXJtaW5lIHR5cGUgb2YgYWNjZXNzIGFuZCBkZXRlcm1pbmUgaWYgcGFnZSBoYXMgYSBwcm90ZWN0ZWQgY29udGVudCBhcmVhCgkJCQkJLy8gdG8gaGFuZGxlIHRoYXQgdHlwZSBvZiBhY2Nlc3MKCQkJCQkkcGNlID0gbmV3IE1NX1Byb3RlY3RlZENvbnRlbnRFbmdpbmUoKTsKCQkJCQkkZGF0ZU9mZnNldCA9ICRwY2UtPmRheXNUb0FjY2VzcygkcG9zdElkLCAkY3VycmVudF91c2VyLT5JRCk7CgkJCQkJCgkJCQkJJHJlcXVlc3RlZEFjY2Vzc1R5cGUgPSAiIjsKCQkJCQkkYWxsb3dBY2Nlc3MgPSBmYWxzZTsKCQkJCQkKCQkJCQlpZigkZGF0ZU9mZnNldCA9PT0gZmFsc2UpCgkJCQkJewoJCQkJCQkkcmVxdWVzdGVkQWNjZXNzVHlwZSA9IE1NX0RlY2lzaW9uVGFnUHJvY2Vzc29yOjokQUNDRVNTX05PTkU7CgkJCQkJfQoJCQkJCWVsc2UgaWYoJGRhdGVPZmZzZXQgPCAwKQoJCQkJCXsKCQkJCQkJJHJlcXVlc3RlZEFjY2Vzc1R5cGUgPSBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcjo6JEFDQ0VTU19GVVRVUkU7CgkJCQkJfQoJCQkJCQoJCQkJCWlmKCRyZXF1ZXN0ZWRBY2Nlc3NUeXBlICE9ICIiKQoJCQkJCXsKCQkJCQkJLy8gY2hlY2sgcGFnZSBjb250ZW50IGZvciB0aGUgZXhpc3RlbmNlIG9mIHRoZSBhcHByb3ByaWF0ZSBjb250ZW50IGFyZWEgdG8gaGFuZGxlCgkJCQkJCS8vIHRoZSByZXF1ZXN0ZWQgYWNjZXNzIHR5cGUuIEZvciBleGFtcGxlLCBpZiByZXF1ZXN0ZWQgYWNjZXNzIHR5cGUgaXMgTm9uZSB0aGVuIAoJCQkJCQkvLyB0aGVyZSBuZWVkcyB0byBiZSBhIE1NX05vQWNjZXNzIGNvbnRlbnQgYXJlYSBvbiB0aGUgcGFnZSBpbiBvcmRlciB0byBhbGxvdyAKCQkJCQkJLy8gYWNjZXNzCgkJCQkJCSR3cFBvc3QgPSBnZXRfcG9zdCgkcG9zdElkKTsKCQkJCQkJCgkJCQkJCWlmKCR3cFBvc3QpCgkJCQkJCXsKCQkJCQkJCSRyZXN1bHQgPSAwOwoJCQkJCQkJJGNvbnRlbnQgPSAkd3BQb3N0LT5wb3N0X2NvbnRlbnQ7CgkJCQkJCQkKCQkJCQkJCWlmKCRyZXF1ZXN0ZWRBY2Nlc3NUeXBlID09IE1NX0RlY2lzaW9uVGFnUHJvY2Vzc29yOjokQUNDRVNTX05PTkUpCgkJCQkJCQl7CgkJCQkJCQkJJHJlZ2V4ID0gIi9cWyIuTU1fRGVjaXNpb25UYWdQcm9jZXNzb3I6OiRUQUdfQUNDRVNTX0RFQ0lTSU9OLiJbXHNdW15cXV0qYWNjZXNzPVsnfFwiXSooIi5NTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcjo6JEFDQ0VTU19OT05FLiIpWyd8XCJdKlteXF1dKlxdL2kiOwoJCQkJCQkJCSRyZXN1bHQgPSBwcmVnX21hdGNoKCRyZWdleCwgJGNvbnRlbnQpOwoJCQkJCQkJfQoJCQkJCQkJZWxzZSBpZigkcmVxdWVzdGVkQWNjZXNzVHlwZSA9PSBNTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcjo6JEFDQ0VTU19GVVRVUkUpCgkJCQkJCQl7CgkJCQkJCQkJJHJlZ2V4ID0gIi9cWyIuTU1fRGVjaXNpb25UYWdQcm9jZXNzb3I6OiRUQUdfQUNDRVNTX0RFQ0lTSU9OLiJbXHNdW15cXV0qYWNjZXNzPVsnfFwiXSooIi5NTV9EZWNpc2lvblRhZ1Byb2Nlc3Nvcjo6JEFDQ0VTU19GVVRVUkUuIilbJ3xcIl0qW15cXV0qXF0vaSI7CgkJCQkJCQkJJHJlc3VsdCA9IHByZWdfbWF0Y2goJHJlZ2V4LCAkY29udGVudCk7CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCWlmKCRyZXN1bHQgPT0gMSkKCQkJCQkJCXsKCQkJCQkJCQkkYWxsb3dBY2Nlc3MgPSB0cnVlOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfQoJCQkJCQoJCQkJCS8vIGFwcGx5IGZpbHRlcgoJCQkJCWlmKGNsYXNzX2V4aXN0cygiTU1fRmlsdGVycyIpKQoJCQkJCXsKCQkJCQkJJGFsbG93QWNjZXNzID0gYXBwbHlfZmlsdGVycyhNTV9GaWx0ZXJzOjokQllQQVNTX0NPTlRFTlRfUFJPVEVDVElPTiwgJGFsbG93QWNjZXNzKTsKCQkJCQl9CgkJCQkJCgkJCQkJaWYoISRhbGxvd0FjY2VzcykKCQkJCQl7CgkJCQkJCSRuZXh0X3BhZ2VfaWQgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0Q29yZVBhZ2VJZChNTV9Db3JlUGFnZVR5cGU6OiRFUlJPUiwgJ2Vycm9yX3R5cGUnLCBNTV9FcnJvcjo6JEFDQ0VTU19ERU5JRUQpOwoJCQkJCQkKCQkJCQkJaWYoJG5leHRfcGFnZV9pZCE9JHBvc3RJZCkKCQkJCQkJewoJCQkJCQkJaWYoaW50dmFsKCRjdXJyZW50X3VzZXItPklEKTw9MCkKCQkJCQkJCXsKCQkJCQkJCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfTEFTVF9QQUdFX0RFTklFRCwgJHBvc3RJZCk7CgkJCQkJCQl9CgkJCQkJCQkKCQkJCQkJCSR1cmwgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0VXJsKE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SLCBNTV9FcnJvcjo6JEFDQ0VTU19ERU5JRUQpOwoJCQkJCQkJCgkJCQkJCQlpZighaXNfZmVlZCgpICYmICEkaXNCbG9nUGFnZSAmJiAhaXNfc2VhcmNoKCkgJiYgIWlzX2FyY2hpdmUoKSkKCQkJCQkJCXsKCQkJCQkJCQl3cF9yZWRpcmVjdCgkdXJsKTsKCQkJCQkJCQlleGl0OwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQl9CgkJCQkJfQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRibG9ja0FjY2VzcyA9IGZhbHNlOwoJCQkJCQoJCQkJCS8vIGFwcGx5IGZpbHRlcgoJCQkJCWlmKGNsYXNzX2V4aXN0cygiTU1fRmlsdGVycyIpKQoJCQkJCXsKCQkJCQkJJGJsb2NrQWNjZXNzID0gYXBwbHlfZmlsdGVycyhNTV9GaWx0ZXJzOjokQkxPQ0tfQUNDRVNTLCAkYmxvY2tBY2Nlc3MpOwoJCQkJCX0KCQkJCQkKCQkJCQlpZigkYmxvY2tBY2Nlc3MpCgkJCQkJewoJCQkJCQkkdXJsID0gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldFVybChNTV9Db3JlUGFnZVR5cGU6OiRFUlJPUiwgTU1fRXJyb3I6OiRBQ0NFU1NfREVOSUVEKTsKCQkJCQkKCQkJCQkJZ2xvYmFsICR3cF9xdWVyeTsKCQkJCQkJaWYoaXNzZXQoJHdwX3F1ZXJ5LT5wb3N0LT5JRCkgJiYgaW50dmFsKCR3cF9xdWVyeS0+cG9zdC0+SUQpPjApCgkJCQkJCXsgCgkJCQkJCQkkcG9zdElkID0gJHdwX3F1ZXJ5LT5wb3N0LT5JRDsKCQkJCQkJCSRjcCA9IG5ldyBNTV9Db3JlUGFnZUVuZ2luZSgpOwoJCQkJCQkJJGVycm9yUGFnZUlkID0gJGNwLT5nZXRDb3JlUGFnZUlkQnlSZWZUeXBlKE1NX0NvcmVQYWdlVHlwZTo6JEVSUk9SLCBudWxsLCBudWxsKTsKCQkJCQkJCQoJCQkJCQkJaWYoKCRwb3N0SWQgIT0gJGVycm9yUGFnZUlkKSAmJiAhaXNfZmVlZCgpICYmICEkaXNCbG9nUGFnZSAmJiAhaXNfc2VhcmNoKCkgJiYgIWlzX2FyY2hpdmUoKSkKCQkJCQkJCXsKCQkJCQkJCQl3cF9yZWRpcmVjdCgkdXJsKTsKCQkJCQkJCQlleGl0OwoJCQkJCQkJfQoJCQkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UgCgkJCQkJewoJCQkJCQkvKgoJCQkJCQkgKiBXZSd2ZSBjaGVja2VkIGZvciBjb250ZW50IGJhc2VkIGFjY2Vzc2liaWxpdHkgYnV0IGJlbG93IGlzIGNoZWNraW5nCgkJCQkJCSAqIHRvIHNlZSBpZiB0aGUgY29yZSBwYWdlIHdhcyBhY2Nlc3NpYmxlIGJ5IHRoZSB1c2VyIChvciBhbm9ueW1vdXMgYnJvd3NlcikKCQkJCQkJICogYW5kIHRoZW4gcmV0dXJuaW5nIGZhbHNlIGlmIGl0IGlzIG5vdCB0aGUgY2FzZS4KCQkJCQkJICovCgkJCQkJCWlmKE1NX0NvcmVQYWdlRW5naW5lOjppc01lbWJlckhvbWVQYWdlKCRwb3N0SWQpKQoJCQkJCQl7CgkJCQkJCQlpZighaXNfdXNlcl9sb2dnZWRfaW4oKSkKCQkJCQkJCXsKCQkJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJCQl9CgkJCQkJCQllbHNlIAoJCQkJCQkJeyAKCQkJCQkJCQkkdXNlck9iaiA9IE1NX1VzZXI6OmdldEN1cnJlbnRXUFVzZXIoKTsKCQkJCQkJCQlpZigkdXNlck9iai0+aXNWYWxpZCgpKQoJCQkJCQkJCXsKCQkJCQkJCQkJJHBhZ2VJblF1ZXN0aW9uSWQgPSBNTV9Db3JlUGFnZUVuZ2luZTo6Z2V0Q29yZVBhZ2VJZChNTV9Db3JlUGFnZVR5cGU6OiRNRU1CRVJfSE9NRV9QQUdFLCBNTV9UWVBFX01FTUJFUlNISVBfTEVWRUwsICR1c2VyT2JqLT5nZXRNZW1iZXJzaGlwTGV2ZWwoKS0+Z2V0SWQoKSk7CgkJCQkJCQkJCWlmKCRwb3N0SWQgIT0gJHBhZ2VJblF1ZXN0aW9uSWQpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCXJldHVybiBmYWxzZTsJCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJTU1fQ29yZVBhZ2VFbmdpbmU6OnJlZGlyZWN0VG9TaXRlSG9tZVBhZ2UoKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuIHRydWU7Cgl9CgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQb3N0RGF5cygkYWNjZXNzX3R5cGUsICRhY2Nlc3NfaWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRzcWwgPSAic2VsZWN0IGRheXMgZnJvbSAiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHdoZXJlIGFjY2Vzc190eXBlPSd7JGFjY2Vzc190eXBlfScgYW5kIGFjY2Vzc19pZD0neyRhY2Nlc3NfaWR9JyI7CiAJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwogCQlpZigkcm93cz09PWZhbHNlKQogCQl7CiAJCQlyZXR1cm4gYXJyYXkoKTsKIAkJfQogCQkkZGF5cyA9IGFycmF5KCk7CiAJCWZvcmVhY2goJHJvd3MgYXMgJHJvdykKIAkJewogCQkJJGRheXNbJHJvdy0+ZGF5c10gPSAkcm93LT5kYXlzOwogCQl9CiAJCXJldHVybiAkZGF5czsKCX0KCQogCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QWNjZXNzUmlnaHRzKCRwYWdlSWQpCiAJewogCQlnbG9iYWwgJHdwZGI7CiAJCSRzcWwgPSAic2VsZWN0IG10Lm5hbWUgYXMgbXRfbmFtZSwgYXQubmFtZSBhcyBhdF9uYW1lLCBwLmFjY2Vzc190eXBlIGZyb20gIi5NTV9UQUJMRV9QT1NUU19BQ0NFU1MuIiBwCiAJCQkJCQlMRUZUIEpPSU4gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIG10IG9uIHAuYWNjZXNzX3R5cGU9J21lbWJlcl90eXBlJyBhbmQgcC5hY2Nlc3NfaWQ9bXQuaWQKIAkJCQkJCUxFRlQgSk9JTiAiLk1NX1RBQkxFX0JVTkRMRVMuIiBhdCBvbiBwLmFjY2Vzc190eXBlPSdhY2Nlc3NfdGFnJyBhbmQgcC5hY2Nlc3NfaWQ9YXQuaWQKCiAJCQkJCXdoZXJlICBwLmlzX3NtYXJ0X2NvbnRlbnQ9JzAnIGFuZCBwb3N0X2lkPSd7JHBhZ2VJZH0nIjsgCiAJCQogCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKIAkJaWYoJHJvd3M9PT1mYWxzZSkKIAkJewogCQkJcmV0dXJuIGFycmF5KCk7CiAJCX0KIAkJcmV0dXJuICRyb3dzOwogCX0KCQogCS8qKgogCSAqIEBwYXJhbSAkdXNlcl9pZCBpcyB0aGUgaWQgb2YgdGhlIHVzZXIKIAkgKiBAcGFyYW0gJGFjY2Vzc190eXBlIGlzIHRoZSBhY2Nlc3MgdHlwZSBvZiB0aGUgZ2l2ZW4gcmVxdWVzdCAoYWNjZXNzX3RhZ3xtZW1iZXJfdHlwZSkKIAkgKiBAcGFyYW0gJGFjY2Vzc19pZCBpcyB0aGUgaWQgb2YgdGhlIGdpdmVuIHR5cGUgKHNlZSBwcmV2aW91cykKIAkgKiBAcGFyYW0gJGRheXMgaXMgdGhlIGRheXMgb2YgdGhlIGNodW5rIHBhcmFtZXRlci4KIAkgKiBAcGFyYW0gJGRheXNDb21wYXJpc29uTWV0aG9kIHRoaXMgY2FuIGVxdWFsICc+JyAoZm9yIGdyZWF0ZXIgdGhhbikgb3IgJzwnIChmb3IgbGVzcyB0aGFuKS4gSXQgCiAJICogaW5kaWNhdGVzIHdoaWNoIHR5cGUgb2YgY29tcGFyaXNvbiB0byB1c2UgdG8gZGV0ZXJtaW5lIGlmIGFjY2VzcyBzaG91bGQgYmUgZ3JhbnRlZAogCSAqIEByZXR1cm4gdHJ1ZSBpZiBhY2Nlc3MgaXMgZ3JhbnRlZCB0byBjb250ZW50IGNodW5rLCBvdGhlcndpc2UgZmFsc2UuCiAJICovCiAJcHVibGljIGZ1bmN0aW9uIGNhbkFjY2Vzc0NodW5rKCR1c2VyX2lkLCAkYWNjZXNzX3R5cGUsICRhY2Nlc3NfaWQsICRkYXlzLCAkZGF5c0NvbXBhcmlzb25NZXRob2QgPSAiPiIpCiAJewogCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCR1c2VyX2lkKTsKIAkJJHVzZXJfcGVybXMgPSBuZXcgc3RkQ2xhc3MoKTsKIAkJCiAJCWlmKCR1c2VyLT5pc0FkbWluKCkgfHwgTU1fRW1wbG95ZWU6OmlzRW1wbG95ZWUoJHVzZXItPmdldElkKCkpKQogCQl7CiAJCQkvLy9nZXQgcHJldmlldyBtb2RlIGFjY2VzcwogCQkJJHVzZXJfcGVybXMgPSAkdGhpcy0+Z2V0UHJldmlld0FjY2VzcygpOwogCQkJCgkgCQlpZihlbXB0eSgkdXNlcl9wZXJtcykpCgkgCQl7CgkgCQkJcmV0dXJuIGZhbHNlOwoJIAkJfQogCQl9CiAJCWVsc2UKIAkJewoJIAkJJHVzZXJfcGVybXMgPSAkdGhpcy0+Z2V0VXNlclBlcm1pc3Npb25zKCR1c2VyX2lkKTsKCSAJCQoJIAkJaWYoZW1wdHkoJHVzZXJfcGVybXMpKQoJIAkJewoJIAkJCXJldHVybiBmYWxzZTsKCSAJCX0KIAkJfQogCQkKIAkJaWYoaXNzZXQoJHVzZXJfcGVybXMtPiRhY2Nlc3NfdHlwZSkgJiYgIWVtcHR5KCR1c2VyX3Blcm1zLT4kYWNjZXNzX3R5cGUpKQoJCXsKCQkJLyoKCQkJICogR2V0IGRheXMgYXMgbWVtYmVyIHRvIGNhbGN1bGF0ZSBmb3IgY29tcGFyaXNvbiBmb3IgdGhlIHBvc3QvcGFnZSBudW1iZXIgb2YgZGF5cwoJCQkgKiBJZiBhIHVzZXItYXBwbGllZCBidW5kbGUgZXhpc3RzIHVzZSB0aGUgZGF0ZSBkaWZmZXJlbmNlIGZvciB0aGF0IHVzZXIgYW5kIHRoYXQgdGFnLgoJCQkgKiBJZiB0aGUgYnVuZGxlIGlzIGRlcml2ZWQgZnJvbSBhIG1lbWJlciB0eXBlLCB1c2UgdGhlIGRheXMgYXMgbWVtYmVyIG51bWJlciBmb3IgY29tcGFyaXNvbi4KCQkJICovCgkJCSR1c2VyX2RheXMgPSAkdXNlcl9wZXJtcy0+ZGF5c19hc19tZW1iZXI7CgkJCQoJCQlpZigkYWNjZXNzX3R5cGUgPT0gImFjY2Vzc190YWdzIikKCQkJewoJCQkJJHVzZXJfZGF5cyA9ICR0aGlzLT5jYWxjdWxhdGVBY2Nlc3NUYWdEYXlzQnlNZW1iZXIoJGFjY2Vzc19pZCwgJHVzZXJfaWQpOwoJCQl9CgkJCQkKCQkJLy8vIGNhc2Ugd2hlbiBidW5kbGUgaXMgbm90IHR5cGUgJ3VzZXInIChpLmUuIHR5cGUgJ21lbWJlcl90eXBlJykgYW5kIHNob3VsZCB1c2UgZGF5cyBhcyBtZW1iZXIgZGF5cyBjb3JyZWxhdGlvbi4KCQkJaWYoJHVzZXJfZGF5cyA9PT0gZmFsc2UpCgkJCXsKCQkJCSR1c2VyX2RheXMgPSAkdXNlcl9wZXJtcy0+ZGF5c19hc19tZW1iZXI7CgkJCX0KCQkJCQoJCQlpZigoJGluZGV4ID0gYXJyYXlfc2VhcmNoKCRhY2Nlc3NfaWQsICR1c2VyX3Blcm1zLT4kYWNjZXNzX3R5cGUpKSAhPT0gZmFsc2UgKQoJCQl7CgkJCQlpZigkZGF5c0NvbXBhcmlzb25NZXRob2QgPT0gIj4iICYmICR1c2VyX2RheXMgPj0gJGRheXMpIAoJCQkJewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQoJCQkJZWxzZSBpZigkZGF5c0NvbXBhcmlzb25NZXRob2QgPT0gIjwiICYmICR1c2VyX2RheXMgPCAkZGF5cykKCQkJCXsKCQkJCQlyZXR1cm4gdHJ1ZTsKCQkJCX0KCQkJfQoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7CiAJfQogCQogCS8qCiAJICogT2J0YWlucyB0aGUgcG9zdCBwZXJtaXNzaW9ucyBhbmQgdGhlIHVzZXIgcGVybWlzc2lvbnMKIAkgKiBpZiB0aGUgcG9zdCBwZXJtaXNzaW9ucyBmaW5kcyBhIG1hdGNoIGluIHRoZSB1c2VycyBpdCB3aWxsIGNvbXBhcmUgZGF5cyBhbmQgcHJlbWl0L2RlbnkuCiAJICogQHBhcmFtICR1c2VyX2lkIGlzIHRoZSBpZCBvZiB0aGUgdXNlcgogCSAqIEBwYXJhbSAkcG9zdF9pZCBpcyB0aGUgaWQgb2YgdGhlIHBvc3QKIAkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBhY2Nlc3NpYmxlLCBvdGhlcndpc2UgZmFsc2U7CiAJICovCiAJcHVibGljIGZ1bmN0aW9uIGNhbkFjY2Vzc1Bvc3QoJHBvc3RfaWQsICR1c2VyX2lkKQogCXsKIAkJZ2xvYmFsICR3cGRiOwogCQkKIAkJJHBvc3RfcGVybXM9IG5ldyBzdGRDbGFzcygpOwogCQkkdXNlcl9wZXJtcyA9IG5ldyBzdGRDbGFzcygpOwogCQogCQkkcG9zdF9wZXJtcyA9ICR0aGlzLT5nZXRQb3N0UGVybXMoJHBvc3RfaWQpOwoJCQogCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCR1c2VyX2lkKTsKIAkJaWYoJHVzZXItPmlzQWRtaW4oKSB8fCBNTV9FbXBsb3llZTo6aXNFbXBsb3llZSgkdXNlci0+Z2V0SWQoKSkpCiAJCXsKIAkJCS8vIGdldCBwcmV2aWV3IG1vZGUgYWNjZXNzCiAJCQkkdXNlcl9wZXJtcyA9ICR0aGlzLT5nZXRQcmV2aWV3QWNjZXNzKCk7CgkgCQkKIAkJCWlmKGVtcHR5KCR1c2VyX3Blcm1zKSB8fCAoaXNzZXQoJHVzZXJfcGVybXMtPm1lbWJlcl90eXBlc1swXSkgJiYgJHVzZXJfcGVybXMtPm1lbWJlcl90eXBlc1swXT09Im5vbmUiKSkKIAkJCXsKIAkJCQlpZihjb3VudCgkcG9zdF9wZXJtcy0+bWVtYmVyX3R5cGVzKT4wIHx8IGNvdW50KCRwb3N0X3Blcm1zLT5hY2Nlc3NfdGFncyk+MCkKIAkJCQl7CgkJCQkJcmV0dXJuIGZhbHNlOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiB0cnVlOwoJCQkJfQkKIAkJCX0KIAkJfQogCQllbHNlCiAJCXsKCSAJCSR1c2VyX3Blcm1zID0gJHRoaXMtPmdldFVzZXJQZXJtaXNzaW9ucygkdXNlcl9pZCk7CiAJCX0KIAkJCiAJCS8vIGNoZWNrIGlmIHRoaXMgcG9zdCBpcyBhc3NvY2lhdGVkIHdpdGggYSBwcm90ZWN0ZWQgY2F0ZWdvcnkKIAkJJGlzUHJvdGVjdGVkQnlDYXRlZ29yeSA9ICR0aGlzLT5pc1Byb3RlY3RlZEJ5Q2F0ZWdvcnkoJHBvc3RfaWQpOwogCQkKIAkJLy8gaWYgdGhpcyBwb3N0IGlzIG5vdCBwcm90ZWN0ZWQgYnkgbWVtYmVyc2hpcCBsZXZlbCwgYnVuZGxlIG9yIGFzc29jaWF0ZWQgd2l0aCBwcm90ZWN0ZWQgY2F0ZWdvcmllcywgZ3JhbnQgYWNjZXNzCiAJCWlmKGVtcHR5KCRwb3N0X3Blcm1zKSB8fCAoZW1wdHkoJHBvc3RfcGVybXMtPmFjY2Vzc190YWdzKSAmJiBlbXB0eSgkcG9zdF9wZXJtcy0+bWVtYmVyX3R5cGVzKSAmJiAhJGlzUHJvdGVjdGVkQnlDYXRlZ29yeSkpCiAJCXsKIAkJCXJldHVybiB0cnVlOwogCQl9CiAJCQogCQkvLyBpZiB0aGUgdXNlciBoYXMgbm8gcGVybWlzc2lvbnMsIGRlbnkgYWNjZXNzCiAJCWlmKGVtcHR5KCR1c2VyX3Blcm1zKSkKIAkJewogCQkJcmV0dXJuIGZhbHNlOwogCQl9CiAJCQogCQkvLyBjaGVjayBhY2Nlc3MgYmFzZWQgb24gbWVtYmVyc2hpcCBsZXZlbCBhbmQgYnVuZGxlIHByb3RlY3Rpb24KIAkJaWYoIWVtcHR5KCRwb3N0X3Blcm1zKSkKIAkJewoJIAkJZm9yZWFjaCgkcG9zdF9wZXJtcyBhcyAkYWNjZXNzX3R5cGU9PiRhcnIpCgkgCQl7CgkgCQkJaWYoZW1wdHkoJGFycikpCgkgCQkJewoJIAkJCQljb250aW51ZTsKCSAJCQl9CgkgCQkJCQoJIAkJCWZvcmVhY2goJGFyciBhcyAkYWNjZXNzX2lkPT4kZGF5cykKCSAJCQl7CgkgCQkJCWlmKGlzc2V0KCR1c2VyX3Blcm1zLT4kYWNjZXNzX3R5cGUpICYmICFlbXB0eSgkdXNlcl9wZXJtcy0+JGFjY2Vzc190eXBlKSkKCSAJCQkJewoJIAkJCQkJLyoKCSAJCQkJCSAqIEdldCBkYXlzIGFzIG1lbWJlciB0byBjYWxjdWxhdGUgZm9yIGNvbXBhcmlzb24gZm9yIHRoZSBwb3N0L3BhZ2UgbnVtYmVyIG9mIGRheXMKCSAJCQkJCSAqIElmIGEgdXNlci1hcHBsaWVkIGJ1bmRsZSBleGlzdHMgdXNlIHRoZSBkYXRlIGRpZmZlcmVuY2UgZm9yIHRoYXQgdXNlciBhbmQgdGhhdCB0YWcuCgkgCQkJCQkgKiBJZiB0aGUgYnVuZGxlIGlzIGRlcml2ZWQgZnJvbSBhIG1lbWJlciB0eXBlLCB1c2UgdGhlIGRheXMgYXMgbWVtYmVyIG51bWJlciBmb3IgY29tcGFyaXNvbi4KCSAJCQkJCSAqLwoJIAkJCQkJJHVzZXJfZGF5cyA9ICR1c2VyX3Blcm1zLT5kYXlzX2FzX21lbWJlcjsKCQoJIAkJCQkJaWYoJGFjY2Vzc190eXBlID09ICJhY2Nlc3NfdGFncyIpCgkgCQkJCQl7CgkgCQkJCQkJJHVzZXJfZGF5cyA9ICR0aGlzLT5jYWxjdWxhdGVBY2Nlc3NUYWdEYXlzQnlNZW1iZXIoJGFjY2Vzc19pZCwgJHVzZXJfaWQpOwoJIAkJCQkJfQoJIAkJCQkJCQoJIAkJCQkJLy8vIGNhc2Ugd2hlbiBidW5kbGUgaXMgbm90IHR5cGUgJ3VzZXInIChpLmUuIHR5cGUgJ21lbWJlcl90eXBlJykgYW5kIHNob3VsZCB1c2UgZGF5cyBhcyBtZW1iZXIgZGF5cyBjb3JyZWxhdGlvbi4KCSAJCQkJCWlmKCR1c2VyX2RheXM9PT1mYWxzZSkKCSAJCQkJCXsKCSAJCQkJCQkkdXNlcl9kYXlzID0gJHVzZXJfcGVybXMtPmRheXNfYXNfbWVtYmVyOwoJIAkJCQkJfQoJIAkJCQkKCSAJCQkJCWlmKCgkaW5kZXggPSBhcnJheV9zZWFyY2goJGFjY2Vzc19pZCwgJHVzZXJfcGVybXMtPiRhY2Nlc3NfdHlwZSkpIT09ZmFsc2UgKQoJCSAJCQkJewoJCSAJCQkJCWlmKCR1c2VyX2RheXM+PSRkYXlzKQoJCSAJCQkJCXsKCQkgCQkJCQkJcmV0dXJuIHRydWU7CgkJIAkJCQkJfQoJCSAJCQkJfQoJIAkJCQl9CQoJIAkJCX0KCSAJCX0KIAkJfQogCQkKIAkJLy8gY2hlY2sgYWNjZXNzIGJhc2VkIG9uIGNhdGVnb3J5IHByb3RlY3Rpb24KIAkJaWYoJGlzUHJvdGVjdGVkQnlDYXRlZ29yeSkKIAkJewogCQkJcmV0dXJuICR0aGlzLT5oYXNBY2Nlc3NUb0NhdGVnb3JpZXMoJHVzZXJfcGVybXMsICRwb3N0X2lkKTsKIAkJfQoJCQogCQlyZXR1cm4gZmFsc2U7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBpc1Byb3RlY3RlZEJ5Q2F0ZWdvcnkoJHBvc3RJZCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkJJGNhdGVnb3JpZXMgPSBnZXRfdGhlX2NhdGVnb3J5KCRwb3N0SWQpOwogCQkJCiAJCWlmKGlzX2FycmF5KCRjYXRlZ29yaWVzKSAmJiBjb3VudCgkY2F0ZWdvcmllcykgPiAwKQogCQl7CiAJCQkkY2F0ZWdvcnlJZHMgPSBhcnJheSgpOwogCQkKIAkJCWZvcmVhY2goJGNhdGVnb3JpZXMgYXMgJGNhdGVnb3J5KQogCQkJewogCQkJCSRjYXRlZ29yeUlkc1tdID0gJGNhdGVnb3J5LT50ZXJtX2lkOwogCQkJfQogCQkKIAkJCSRjYXRlZ29yeUlkTGlzdCA9IGltcGxvZGUoIiwiLCAkY2F0ZWdvcnlJZHMpOwogCQkKIAkJCSRzcWwgPSAiU0VMRUNUIFNVTSh0b3RhbCkgRlJPTSAoU0VMRUNUIENPVU5UKCopIEFTIHRvdGFsIEZST00gIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMX0NBVEVHT1JJRVMuIiBXSEVSRSBjYXRlZ29yeV9pZCBJTiAoeyRjYXRlZ29yeUlkTGlzdH0pICI7CiAJCQkkc3FsIC49ICJVTklPTiBBTEwgU0VMRUNUIENPVU5UKCopIEFTIHRvdGFsIEZST00gIi5NTV9UQUJMRV9CVU5ETEVfQ0FURUdPUklFUy4iIFdIRVJFIGNhdGVnb3J5X2lkIElOICh7JGNhdGVnb3J5SWRMaXN0fSkpIEFTIHQ7IjsKIAkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Zhcigkc3FsKTsKIAkJCiAJCQlpZigkcmVzdWx0ICE9PSBmYWxzZSAmJiBpbnR2YWwoJHJlc3VsdCkgPiAwKQogCQkJewogCQkJCXJldHVybiB0cnVlOwogCQkJfQogCQl9CiAJCQogCQlyZXR1cm4gZmFsc2U7CiAJfQogCQogCXByaXZhdGUgZnVuY3Rpb24gaGFzQWNjZXNzVG9DYXRlZ29yaWVzKCR1c2VyUGVybWlzc2lvbnMsICRwb3N0SWQpCiAJewogCQkkY2F0ZWdvcmllcyA9IGdldF90aGVfY2F0ZWdvcnkoJHBvc3RJZCk7CiAJCQogCQlpZihpc19hcnJheSgkY2F0ZWdvcmllcykgJiYgY291bnQoJGNhdGVnb3JpZXMpID4gMCkKIAkJewogCQkJJGNhdGVnb3J5SWRzID0gYXJyYXkoKTsKIAkJCiAJCQlmb3JlYWNoKCRjYXRlZ29yaWVzIGFzICRjYXRlZ29yeSkKIAkJCXsKIAkJCQkkY2F0ZWdvcnlJZHNbXSA9ICRjYXRlZ29yeS0+dGVybV9pZDsKIAkJCX0KIAkJfQogCQkKIAkJLy8gY2hlY2sgaWYgbWVtYmVyIGhhcyBhY2Nlc3MgdG8gY2F0ZWdvcnkgdGhyb3VnaCB0aGVpciBtZW1iZXJzaGlwIGxldmVsCiAJCWlmKGlzc2V0KCR1c2VyUGVybWlzc2lvbnMtPm1lbWJlcl90eXBlcykgJiYgIWVtcHR5KCR1c2VyUGVybWlzc2lvbnMtPm1lbWJlcl90eXBlcykpCiAJCXsKIAkJCWZvcmVhY2goJHVzZXJQZXJtaXNzaW9ucy0+bWVtYmVyX3R5cGVzIGFzICRtZW1iZXJzaGlwSWQpCiAJCQl7CiAJCQkJJHJlc3VsdCA9IE1NX01lbWJlcnNoaXBMZXZlbDo6aGFzQWNjZXNzVG9DYXRlZ29yeSgkbWVtYmVyc2hpcElkLCAkY2F0ZWdvcnlJZHMpOwogCQkKIAkJCQlpZigkcmVzdWx0ID09PSB0cnVlKQogCQkJCXsKIAkJCQkJcmV0dXJuIHRydWU7CiAJCQkJfQogCQkJfQogCQl9CiAJCQogCQkvLyBjaGVjayBpZiBtZW1iZXIgaGFzIGFjY2VzcyB0byB0aGlzIGNhdGVnb3J5IHRocm91Z2ggYSBidW5kbGUKIAkJaWYoaXNzZXQoJHVzZXJQZXJtaXNzaW9ucy0+YWNjZXNzX3RhZ3MpICYmICFlbXB0eSgkdXNlclBlcm1pc3Npb25zLT5hY2Nlc3NfdGFncykpCiAJCXsKIAkJCWZvcmVhY2goJHVzZXJQZXJtaXNzaW9ucy0+YWNjZXNzX3RhZ3MgYXMgJGJ1bmRsZUlkKQogCQkJewogCQkJCSRyZXN1bHQgPSBNTV9CdW5kbGU6Omhhc0FjY2Vzc1RvQ2F0ZWdvcnkoJGJ1bmRsZUlkLCAkY2F0ZWdvcnlJZHMpOwogCQkJCQkKIAkJCQlpZigkcmVzdWx0ID09PSB0cnVlKQogCQkJCXsKIAkJCQkJcmV0dXJuIHRydWU7CiAJCQkJfQogCQkJfQogCQl9CiAJCQogCQlyZXR1cm4gZmFsc2U7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBpc1VucHJvdGVjdGVkKCRwb3N0SWQpCiAJewogCQkkcG9zdF9wZXJtcyA9ICR0aGlzLT5nZXRQb3N0UGVybXMoJHBvc3RJZCk7CiAJCSRpc1Byb3RlY3RlZEJ5Q2F0ZWdvcnkgPSAkdGhpcy0+aXNQcm90ZWN0ZWRCeUNhdGVnb3J5KCRwb3N0SWQpOwogCQkKIAkJaWYoZW1wdHkoJHBvc3RfcGVybXMpIHx8IChlbXB0eSgkcG9zdF9wZXJtcy0+YWNjZXNzX3RhZ3MpICYmIGVtcHR5KCRwb3N0X3Blcm1zLT5tZW1iZXJfdHlwZXMpICYmICEkaXNQcm90ZWN0ZWRCeUNhdGVnb3J5KSkKIAkJewogCQkJcmV0dXJuIHRydWU7CiAJCX0KIAkJZWxzZQogCQl7CiAJCQlyZXR1cm4gZmFsc2U7CiAJCX0KIAl9CiAJCgkvKgoJICogQ291bnRzIG51bWJlciBvZiBkYXlzIHRvIGFjY2VzcyBjb250ZW50IChuZWdhdGl2ZSBudW1iZXIpCgkgKiBJZiBhbHJlYWR5IGhhZCBhY2Nlc3MsIGl0IHdpbGwgZGlzcGxheSBhIFswLTldKyBkYXlzIHRvIGFjY2Vzcy4KCSAqIE90aGVyd2lzZSBmYWxzZSBpZiBubyBhY2Nlc3MgZXZlci4KCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBkYXlzVG9BY2Nlc3MoJHBvc3RfaWQsICR1c2VyX2lkKQogCXsKIAkJJHBvc3RfcGVybXMgPSBuZXcgc3RkQ2xhc3MoKTsKIAkJJHVzZXJfcGVybXMgPSBuZXcgc3RkQ2xhc3MoKTsKIAkKIAkJJHBvc3RfcGVybXMgPSAkdGhpcy0+Z2V0UG9zdFBlcm1zKCRwb3N0X2lkKTsKIAkJJGlzUHJvdGVjdGVkQnlDYXRlZ29yeSA9ICR0aGlzLT5pc1Byb3RlY3RlZEJ5Q2F0ZWdvcnkoJHBvc3RfaWQpOwogCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCR1c2VyX2lkKTsKIAkJCiAJCWlmKCR1c2VyLT5pc0FkbWluKCkgfHwgTU1fRW1wbG95ZWU6OmlzRW1wbG95ZWUoJHVzZXItPmdldElkKCkpKQogCQl7CiAJCQkvLy9nZXQgcHJldmlldyBtb2RlIGFjY2VzcwogCQkJLy8vdXNlIHRoZXNlIHBlcm1zCiAJCQkkdXNlcl9wZXJtcyA9ICR0aGlzLT5nZXRQcmV2aWV3QWNjZXNzKCk7CgkgCQkKIAkJCWlmKGVtcHR5KCR1c2VyX3Blcm1zKSB8fCAoaXNzZXQoJHVzZXJfcGVybXMtPm1lbWJlcl90eXBlc1swXSkgJiYgJHVzZXJfcGVybXMtPm1lbWJlcl90eXBlc1swXT09Im5vbmUiKSkgCiAJCQl7CiAJCQkJaWYoY291bnQoJHBvc3RfcGVybXMtPm1lbWJlcl90eXBlcykgPiAwIHx8IGNvdW50KCRwb3N0X3Blcm1zLT5hY2Nlc3NfdGFncykgPiAwKQogCQkJCXsKCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuIHRydWU7CgkJCQl9CiAJCQkJCQogCQkJfQogCQl9CiAJCWVsc2UKIAkJewoJIAkJJHVzZXJfcGVybXMgPSAkdGhpcy0+Z2V0VXNlclBlcm1pc3Npb25zKCR1c2VyX2lkKTsKIAkJfQkKIAkJCiAJCWlmKGVtcHR5KCRwb3N0X3Blcm1zKSB8fCAoZW1wdHkoJHBvc3RfcGVybXMtPmFjY2Vzc190YWdzKSAmJiBlbXB0eSgkcG9zdF9wZXJtcy0+bWVtYmVyX3R5cGVzKSAmJiAhJGlzUHJvdGVjdGVkQnlDYXRlZ29yeSkpCiAJCXsKIAkJCXJldHVybiBmYWxzZTsKIAkJfQogCQkKIAkJaWYoIWlzc2V0KCR1c2VyX3Blcm1zLT5kYXlzX2FzX21lbWJlcikpCiAJCXsKIAkJCXJldHVybiBmYWxzZTsKIAkJfQogCQkKIAkJaWYoIWVtcHR5KCRwb3N0X3Blcm1zKSkKIAkJewoJIAkJZm9yZWFjaCgkcG9zdF9wZXJtcyBhcyAkYWNjZXNzX3R5cGU9PiRhcnIpCgkgCQl7CgkgCQkJaWYoZW1wdHkoJGFycikpCgkgCQkJewoJIAkJCQljb250aW51ZTsKCSAJCQl9CgkgCQkJCQoJIAkJCWZvcmVhY2goJGFyciBhcyAkYWNjZXNzX2lkPT4kZGF5cykKCSAJCQl7CgkgCQkJCWlmKGlzc2V0KCR1c2VyX3Blcm1zLT4kYWNjZXNzX3R5cGUpICYmICFlbXB0eSgkdXNlcl9wZXJtcy0+JGFjY2Vzc190eXBlKSkKCSAJCQkJewoJIAkJCQkJJHVzZXJfZGF5cyA9ICR1c2VyX3Blcm1zLT5kYXlzX2FzX21lbWJlcjsKCQoJIAkJCQkJaWYoJGFjY2Vzc190eXBlID09ICJhY2Nlc3NfdGFncyIpCgkgCQkJCQl7CgkgCQkJCQkJJHVzZXJfZGF5cyA9ICR0aGlzLT5jYWxjdWxhdGVBY2Nlc3NUYWdEYXlzQnlNZW1iZXIoJGFjY2Vzc19pZCwgJHVzZXJfaWQpOwoJIAkJCQkJfQoJIAkJCQkKCSAJCQkJCWlmKCgkaW5kZXggPSBhcnJheV9zZWFyY2goJGFjY2Vzc19pZCwgJHVzZXJfcGVybXMtPiRhY2Nlc3NfdHlwZSkpIT09ZmFsc2UgKQoJCSAJCQkJewoJCSAJCQkJCWlmKCRkYXlzPj0wKQoJCSAJCQkJCXsKCQkgCQkJCQkJcmV0dXJuIGludHZhbCgkdXNlcl9kYXlzKS1pbnR2YWwoJGRheXMpOwoJCSAJCQkJCX0KCQkgCQkJCX0KCSAJCQkJfQkKCSAJCQl9CgkgCQl9CiAJCX0KIAkJCiAJCS8vIGNoZWNrIGFjY2VzcyBiYXNlZCBvbiBjYXRlZ29yeSBwcm90ZWN0aW9uCiAJCWlmKCRpc1Byb3RlY3RlZEJ5Q2F0ZWdvcnkpCiAJCXsKIAkJCXJldHVybiAkdGhpcy0+aGFzQWNjZXNzVG9DYXRlZ29yaWVzKCR1c2VyX3Blcm1zLCAkcG9zdF9pZCk7CiAJCX0KIAkJCiAJCXJldHVybiBmYWxzZTsKIAl9CiAJCiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldFBvc3RBY2Nlc3NSaWdodHMoJHBvc3RfaWQpCiAJewogCQlnbG9iYWwgJHdwZGI7CiAJCQogCQkkc3FsID0gInNlbGVjdCBJRihwYS5hY2Nlc3NfdHlwZT0nbWVtYmVyX3R5cGUnLCBtdC5uYW1lLCBhdC5uYW1lKSBhcyBhY2Nlc3NfbmFtZSxwYS5kYXlzLCBwYS5hY2Nlc3NfdHlwZSwgcGEuYWNjZXNzX2lkIGZyb20gIiAuCiAJCQkJIgkiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHBhICIgLgoJIAkJCSIgCUxFRlQgSk9JTiAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxTLiIgbXQgb24gcGEuYWNjZXNzX3R5cGU9J21lbWJlcl90eXBlJyBhbmQgcGEuYWNjZXNzX2lkPW10LmlkICIgLgoJIAkJCSIgCUxFRlQgSk9JTiAiLk1NX1RBQkxFX0JVTkRMRVMuIiBhdCBvbiBwYS5hY2Nlc3NfdHlwZT0nYWNjZXNzX3RhZycgYW5kIHBhLmFjY2Vzc19pZD1hdC5pZCAiIC4KCSAJCQkiCXdoZXJlIHBhLnBvc3RfaWQ9J3skcG9zdF9pZH0nIGFuZCBwYS5pc19zbWFydF9jb250ZW50IT0nMScgIjsKCSAJCQkKIAkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CiAJCWlmKCEkcm93cykKIAkJewogCQkJcmV0dXJuIGFycmF5KCk7CiAJCX0KIAkJCQogCQlyZXR1cm4gJHJvd3M7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiByZW1vdmVBY2Nlc3NSaWdodHMoJHBvc3RfSUQsICRhY2Nlc3NfaWQsICRhY2Nlc3NfdHlwZSkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkJJHNxbCA9ICJkZWxldGUgZnJvbSAiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHdoZXJlIHBvc3RfaWQ9JyVkJyBBTkQgYWNjZXNzX2lkPSclZCcgQU5EIGFjY2Vzc190eXBlPSclcyciOwogCQlyZXR1cm4gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICRwb3N0X0lELCAkYWNjZXNzX2lkLCAkYWNjZXNzX3R5cGUpKTsKIAl9CiAJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQWxsUmlnaHRzKCRwb3N0X2lkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gImRlbGV0ZSBmcm9tICAiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHdoZXJlIHBvc3RfaWQ9J3skcG9zdF9pZH0nIjsKCQlyZXR1cm4gJHdwZGItPnF1ZXJ5KCRzcWwpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHVwZGF0ZVBvc3RBY2Nlc3NSaWdodHMoJHBvc3RfaWQsICRhY2Nlc3NfdHlwZSwgJGFjY2Vzc19pZCwgJGRheXM9MCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfUE9TVFNfQUNDRVNTLiIgc2V0ICIgLgogCQkJCSJkYXlzPSclcycgd2hlcmUgIi4gCiAJCQkJImFjY2Vzc19pZD0nJWQnIGFuZCBhY2Nlc3NfdHlwZT0nJXMnIGFuZCBwb3N0X2lkPSclZCcgIjsKIAkJCQkKCQlyZXR1cm4gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICRkYXlzLCRhY2Nlc3NfaWQsJGFjY2Vzc190eXBlLCRwb3N0X2lkKSk7CiAJfQogCQogCS8qCiAJICogQHBvc3RfaWQgaXMgdGhlIFdQIHBvc3QgaWQKIAkgKiBAcGFyYW0gJGFjY2Vzc190eXBlIChtZW1iZXJfdHlwZXxhY2Nlc3NfdGFnKQogCSAqIEBwYXJhbSAkYWNjZXNzX2lkIGlzIHRoZSBwcmltYXJ5IGtleSBvZiB0aGUgYXNzb2NpYXRlZCBhY2Nlc3NfdHlwZQogCSAqIEBkYXlzIGlzIHRoZSBudW1iZXIgb2YgZGF5cwogCSAqIEByZXR1cm4gdHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UuCiAJICovCiAJcHVibGljIGZ1bmN0aW9uIHNldFBvc3RBY2Nlc3NSaWdodHMoJHBvc3RfaWQsICRhY2Nlc3NfdHlwZSwgJGFjY2Vzc19pZCwgJGRheXM9MCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkJJHNxbCA9ICJzZWxlY3QgY291bnQoKikgYXMgdG90YWwgZnJvbSAiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHdoZXJlIHBvc3RfaWQ9J3skcG9zdF9pZH0nIGFuZCBhY2Nlc3NfdHlwZT0neyRhY2Nlc3NfdHlwZX0nIGFuZCBhY2Nlc3NfaWQ9J3skYWNjZXNzX2lkfSciOwogCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CiAJCWlmKCRyb3ctPnRvdGFsPjApCiAJCQlyZXR1cm4gZmFsc2U7CiAJCQkKIAkJJHNxbCA9ICJpbnNlcnQgaW50byAiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHNldCAiIC4KIAkJCQkicG9zdF9pZD0nJWQnLCAiIC4KIAkJCQkiYWNjZXNzX3R5cGU9JyVzJywgIiAuCiAJCQkJImFjY2Vzc19pZD0nJWQnLCAiIC4KIAkJCQkiZGF5cz0nJXMnICI7CgkJcmV0dXJuICR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkc3FsLCAkcG9zdF9pZCwgJGFjY2Vzc190eXBlLCAkYWNjZXNzX2lkLCAkZGF5cykpOwogCX0KIAkKIAlwdWJsaWMgZnVuY3Rpb24gZ2V0RGF5cygkYWNjZXNzX2lkLCAkYWNjZXNzX3R5cGUsICRwb3N0X2lkKQogCXsKIAkJZ2xvYmFsICR3cGRiOwogCQkkc3FsID0gInNlbGVjdCBkYXlzIGZyb20gICIuTU1fVEFCTEVfUE9TVFNfQUNDRVNTLiIgd2hlcmUgcG9zdF9pZD0neyRwb3N0X2lkfScgYW5kIGFjY2Vzc190eXBlPSd7JGFjY2Vzc190eXBlfScgYW5kIGFjY2Vzc19pZD0neyRhY2Nlc3NfaWR9JyBsaW1pdCAxIjsKIAkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwogCQlpZighJHJvdykKIAkJCXJldHVybiAwOwogCQkKIAkJcmV0dXJuICRyb3ctPmRheXM7CiAJfQogCQogCS8qCiAJICogQWRtaW4gZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHByZXZpZXcgYWNjZXNzIGJhc2VkIG9uIHByZXZpZXcgYmFyCiAJICogQHJldHVybiB0cnVlIGlmIGNhbiBhY2Nlc3MgcG9zdCwgb3RoZXJ3aXNlIGZhbHNlLgogCSAqLwogCXB1YmxpYyBmdW5jdGlvbiBnZXRQcmV2aWV3QWNjZXNzKCkKIAl7CiAJCWdsb2JhbCAkY3VycmVudF91c2VyOwogCSAJCiAJIAkvLy8vIGdldCBpbmZvCiAJIAkkcHJldmlld19vYmogPSBNTV9QcmV2aWV3OjpnZXREYXRhKCk7CiAJIAkKIAkgCWlmKCEkcHJldmlld19vYmopCiAJIAl7CQogCSAJCXJldHVybiBmYWxzZTsKIAkgCX0KIAkgCQogCSAJJHVzZXJQZXJtaXNzaW9ucyA9IG5ldyBzdGRDbGFzcygpOwogCSAJJHVzZXJQZXJtaXNzaW9ucy0+bWVtYmVyX3R5cGVzID0gYXJyYXkoJHByZXZpZXdfb2JqLT5nZXRNZW1iZXJzaGlwSWQoKSk7CiAJIAkkdXNlclBlcm1pc3Npb25zLT5hY2Nlc3NfdGFncyA9ICRwcmV2aWV3X29iai0+Z2V0QnVuZGxlcygpOwogCSAJJHVzZXJQZXJtaXNzaW9ucy0+ZGF5c19hc19tZW1iZXIgPSAkcHJldmlld19vYmotPmdldERheXMoKTsKIAkgCXJldHVybiAkdXNlclBlcm1pc3Npb25zOwogCX0KIAkKIAkvKgogCSAqIEdldCB1c2VyIHJlbGF0ZWQgcGVybWlzc2lvbnMKIAkgKiBtZW1iZXJfdHlwZXM9YXJyYXkobWVtYmVydHlwZV9pZDEsbWVtYmVydHlwZV9pZDIpCiAJICogYWNjZXNzX3RhZ3M9YXJyYXkoYWNjZXNzX3RhZ3NfaWQxLGFjY2Vzc190YWdzX2lkMikKIAkgKiBkYXlzX2FzX21lbWJlcj0+W1VzZXJzIHVzZSBtbV9yZWdpc3RlcmVkXSArIG1tX2ZpeGVkX2RheXMKIAkgKiBAcGFyYW0gJHVzZXJfaWQgaXMgdGhlIGlkIG9mIGdpdmVuIHVzZXIKIAkgKiBAcmV0dXJuIG9iamVjdCBvZiB1c2VyIHBlcm1zLgogCSAqLwogCXByaXZhdGUgZnVuY3Rpb24gZ2V0VXNlclBlcm1pc3Npb25zKCR1c2VyX2lkKQogCXsKIAkgCSR1c2VyUGVybWlzc2lvbnMgPSBuZXcgc3RkQ2xhc3MoKTsKIAkgCSR1c2VyUGVybWlzc2lvbnMtPm1lbWJlcl90eXBlcyA9IGFycmF5KCk7CiAJIAkkdXNlclBlcm1pc3Npb25zLT5hY2Nlc3NfdGFncyA9IGFycmF5KCk7CiAJIAkkdXNlclBlcm1pc3Npb25zLT5kYXlzX2FzX21lbWJlciA9IDA7CiAJIAkKIAkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdXNlcl9pZCk7CiAJCQogCQlpZighJHVzZXItPmlzVmFsaWQoKSkKIAkJewogCQkJcmV0dXJuICR1c2VyUGVybWlzc2lvbnM7CiAJCX0KIAkJCiAJCSRhbGxvd092ZXJkdWVBY2Nlc3MgPSAoTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfQUxMT1dfT1ZFUkRVRV9BQ0NFU1MpID09ICIxIikgPyB0cnVlIDogZmFsc2U7CiAJCQogCQlpZigoJGFsbG93T3ZlcmR1ZUFjY2VzcyB8fCAkdXNlci0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokT1ZFUkRVRSkgJiYgJHVzZXItPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JEVYUElSRUQpCiAJCXsKCSAJIAkkdXNlclBlcm1pc3Npb25zLT5tZW1iZXJfdHlwZXMgPSBhcnJheSgKCSAJIAkJJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpCgkgCSAJKTsKCSAJIAkKCSAJIAkkdXNlclBlcm1pc3Npb25zLT5kYXlzX2FzX21lbWJlciA9ICR1c2VyLT5nZXREYXlzQXNNZW1iZXIoKTsKCSAJIAkKCSAJIAkvLyBnZXQgaW5kaXJlY3RseSBhcHBsaWVkIGJ1bmRsZXMgZnJvbSBtZW1iZXJzaGlwCgkgCSAJJGJ1bmRsZXMgPSAkdXNlci0+Z2V0TWVtYmVyc2hpcExldmVsKCktPmdldEJ1bmRsZXMoKTsKCSAJIAlpZighZW1wdHkoJGJ1bmRsZXMpICYmIGlzX2FycmF5KCRidW5kbGVzKSkKCSAJIAl7CgkgCSAJCWZvcmVhY2goJGJ1bmRsZXMgYXMgJGlkPT4kbmFtZSkKCSAJIAkJewoJIAkgCQkJYXJyYXlfcHVzaCgkdXNlclBlcm1pc3Npb25zLT5hY2Nlc3NfdGFncywgJGlkKTsKCSAJIAkJfQoJIAkgCX0KCSAJIAl1bnNldCgkYnVuZGxlcyk7CiAJCX0KIAkgCQogCSAJLy8gZ2V0IGRpcmVjdGx5IGFwcGxpZWQgYnVuZGxlcyBmcm9tIG1lbWJlcnNoaXAKIAkgCSRidW5kbGVzID0gJHVzZXItPmdldEFwcGxpZWRCdW5kbGVzKHRydWUpOwogCSAJaWYoIWVtcHR5KCRidW5kbGVzKSAmJiBpc19hcnJheSgkYnVuZGxlcykpCiAJIAl7CgkgCSAJZm9yZWFjaCgkYnVuZGxlcyBhcyAkYnVuZGxlKQoJIAkgCXsKCSAJIAkJJGJ1bmRsZVN0YXR1cyA9ICRidW5kbGUtPmdldFN0YXR1cygpOwoJIAkgCQkkaXNBY3RpdmVTdGF0dXMgPSAoJGJ1bmRsZVN0YXR1cyA9PSBNTV9TdGF0dXM6OiRBQ1RJVkUpIHx8ICgkYnVuZGxlU3RhdHVzID09IE1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OKSB8fCAoJGJ1bmRsZVN0YXR1cyA9PSBNTV9TdGF0dXM6OiRQQVVTRUQpOwoJIAkgCQkkYWxsb3dPdmVyZHVlQWNjZXNzID0gKCRidW5kbGVTdGF0dXMgPT0gTU1fU3RhdHVzOjokT1ZFUkRVRSAmJiAkYWxsb3dPdmVyZHVlQWNjZXNzKTsKCSAJIAkJaWYoKCEkdXNlci0+YnVuZGxlSGFzRXhwaXJlZCgkYnVuZGxlLT5nZXRCdW5kbGVJZCgpKSkgJiYgKCRhbGxvd092ZXJkdWVBY2Nlc3MgfHwgJGlzQWN0aXZlU3RhdHVzKSkKCSAJIAkJewoJIAkgCQkJYXJyYXlfcHVzaCgkdXNlclBlcm1pc3Npb25zLT5hY2Nlc3NfdGFncywgJGJ1bmRsZS0+Z2V0QnVuZGxlSWQoKSk7CgkgCSAJCX0KCSAJIAl9CiAJIAl9CiAJIAkKIAkgCXJldHVybiAkdXNlclBlcm1pc3Npb25zOwogCX0KIAkKIAkvKgogCSAqIFByaXZhdGUgZ2V0IHBvc3QgcGVybWlzc2lvbnMKIAkgKiBtZW1iZXJfdHlwZXM9IGFycmF5KG1lbWJlcnR5cGVfaWQ9PmRheSBhY2Nlc3NpYmxlKQogCSAqIGFjY2Vzc190YWdzID0gYXJyYXkoYWNjZXNzX3RhZ19pZD0+ZGF5IGFjY2Vzc2libGUpCiAJICogQHBhcmFtICRwb3N0X2lkIGlzIHRoZSBpZCBvZiB0aGUgcG9zdC9wYWdlCiAJICogQHJldHVybiBhbiBvYmplY3QgaWRlbnRpZnlpbmcgdGhlIG1lbWJlciB0eXBlcyBhbmQgYnVuZGxlcyB0aGF0IGFyZSBhbGxvd2VkIHRvIHZpZXcgcG9zdC4KIAkgKi8KIAkgcHJpdmF0ZSBmdW5jdGlvbiBnZXRQb3N0UGVybXMoJHBvc3RfaWQsICRpc0NodW5rPWZhbHNlKQogCSB7CiAJIAlnbG9iYWwgJHdwZGI7CiAJIAkKIAkgCSRvYmogPSBuZXcgc3RkQ2xhc3MoKTsKIAkgCSRvYmotPm1lbWJlcl90eXBlcyA9IGFycmF5KCk7CiAJIAkkb2JqLT5hY2Nlc3NfdGFncyA9IGFycmF5KCk7CiAJIAkKIAkgCSRjaHVua1NxbCA9ICIgYW5kIGlzX3NtYXJ0X2NvbnRlbnQ9JzAnICI7CiAJIAkKIAkgCWlmKCRpc0NodW5rKQogCSAJewogCSAJCSRjaHVua1NxbCA9ICIgYW5kIGlzX3NtYXJ0X2NvbnRlbnQ9JzEnICI7CiAJIAl9CiAJIAkKIAkgCSRzcWwgPSAic2VsZWN0IGFjY2Vzc190eXBlLCBhY2Nlc3NfaWQsIGRheXMgZnJvbSAiLk1NX1RBQkxFX1BPU1RTX0FDQ0VTUy4iIHdoZXJlIHBvc3RfaWQ9J3skcG9zdF9pZH0nIHskY2h1bmtTcWx9IjsKIAkgCQogCSAJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CiAJIAkKIAkgCWlmKGlzX251bGwoJHJvd3MpIHx8ICEkcm93cykKIAkgCXsKIAkgCQlyZXR1cm4gJG9iajsKIAkgCX0KIAkgCQogCSAJZm9yZWFjaCgkcm93cyBhcyAkcm93KQogCSAJewogCSAJCXN3aXRjaCgkcm93LT5hY2Nlc3NfdHlwZSkKIAkgCQl7CiAJIAkJCWNhc2UgImFjY2Vzc190YWciOgogCSAJCQkJJG9iai0+YWNjZXNzX3RhZ3NbJHJvdy0+YWNjZXNzX2lkXSA9ICRyb3ctPmRheXM7CiAJIAkJCQlicmVhazsKIAkgCQkJCQogCSAJCQlkZWZhdWx0OgogCSAJCQkJJG9iai0+bWVtYmVyX3R5cGVzWyRyb3ctPmFjY2Vzc19pZF0gPSAkcm93LT5kYXlzOwogCSAJCQkJYnJlYWs7CiAJIAkJfQogCSAJfQogCSAJCiAJIAlyZXR1cm4gJG9iajsKIAkgfQogCSAKIAkgcHJpdmF0ZSBmdW5jdGlvbiBjYWxjdWxhdGVBY2Nlc3NUYWdEYXlzQnlNZW1iZXIoJGJ1bmRsZUlkLCAkdXNlcklkKQogCSB7CiAJIAlnbG9iYWwgJHdwZGI7CiAJIAkKIAkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdXNlcklkKTsKIAkJaWYoJHVzZXItPmlzQWRtaW4oKSB8fCBNTV9FbXBsb3llZTo6aXNFbXBsb3llZSgkdXNlci0+Z2V0SWQoKSkpCiAJCXsKIAkJCSRwcmV2aWV3ID0gTU1fUHJldmlldzo6Z2V0RGF0YSgpOwogCQkJcmV0dXJuICRwcmV2aWV3LT5nZXRBcHBsaWVkRGF5cygkYnVuZGxlSWQpOwogCQl9CiAJCQogCSAJcmV0dXJuICR1c2VyLT5nZXREYXlzV2l0aEJ1bmRsZSgkYnVuZGxlSWQpOwkKIAkgfQogfQo=', 0, '2018-11-21 06:38:55'),
(236, 'reportdataset', 'LyoqCioKKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQoqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoqIAoqIE1NX1JlcG9ydERhdGFzZXQgaXMgYSBjb250YWluZXIgZm9yIG9uZSBvciBtb3JlIGdlbmVyYXRlZCBkYXRhc2V0cyB1c2VkIGJ5IHRoZSByZXBvcnRpbmcgbW9kdWxlcwoqIFNvbWV0aW1lcyB3aGVuIGdlbmVyYXRpbmcgZGF0YSwgaXQgaXMgY2hlYXBlciB0byBnZW5lcmF0ZSBtdWx0aXBsZSBkYXRhc2V0cyBhbmQgY2FjaGUgdGhlbSAodnMgb25seSB0aGUgb25lIHJlcXVlc3RlZCkKKiBzbyB0aGlzIG9iamVjdCBhbGxvd3MgbXVsdGlwbGUgZGF0YXNldHMgdG8gYmUgdHJhbnNwb3J0ZWQsIGFuZCBoYXMgbWV0aG9kcyB0byBkZXNpZ25hdGUgd2hpY2ggZGF0YXNldCBpcyB0aGUgb25lIHRoYXQgd2FzCiogcmVxdWVzdGVkIGFzIHdlbGwgYXMgd2hpY2ggYWRkaXRpb25hbCBkYXRhc2V0cyB3ZXJlIGdlbmVyYXRlZCB0aGF0IHNob3VsZCBiZSBjYWNoZWQKKi8KCmNsYXNzIE1NX1JlcG9ydERhdGFzZXQgZXh0ZW5kcyBNTV9SZXBvcnRSZXNwb25zZSAKewoJcHVibGljICRkYXRhc2V0VHlwZTsKCQoJcHJvdGVjdGVkICRwcmltYXJ5RGF0YXNldDsKCXByb3RlY3RlZCAkYWRkaXRpb25hbERhdGFzZXRzOwoJCglwdWJsaWMgc3RhdGljICRTSU5HTEVfREFUQVNFVCA9ICJzaW5nbGVfZGF0YXNldCI7CglwdWJsaWMgc3RhdGljICRDT01QT1VORF9EQVRBU0VUID0gImNvbXBvdW5kX2RhdGFzZXQiOwoJCgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkbXNnPSIiLCAkdHlwZT0ic3VjY2VzcyIpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgkbXNnLCR0eXBlKTsKCQkkdGhpcy0+ZGF0YXNldFR5cGUgPSBzZWxmOjokU0lOR0xFX0RBVEFTRVQ7IC8vZGVmYXVsdAoJfQoJCgkvL2ZhY3RvcnkgbWV0aG9kcwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVTaW5nbGVSZXBvcnREYXRhc2V0KCRwYXJhbXM9IiIsICRkYXRhPSIiKQoJewoJCSRkYXRhc2V0ID0gbmV3IE1NX1JlcG9ydERhdGFzZXQoKTsKCQkkZGF0YXNldC0+c2V0UHJpbWFyeURhdGFzZXQoJHBhcmFtcywgJGRhdGEpOwoKCQlyZXR1cm4gJGRhdGFzZXQ7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVDb21wb3VuZFJlcG9ydERhdGFzZXQoJHByaW1hcnlEYXRhc2V0UGFyYW1zPSIiLCAkcHJpbWFyeURhdGFzZXREYXRhPSIiKQoJewoJCSRkYXRhc2V0ID0gbmV3IE1NX1JlcG9ydERhdGFzZXQoKTsKCQkkZGF0YXNldC0+ZGF0YXNldFR5cGUgPSBzZWxmOjokQ09NUE9VTkRfREFUQVNFVDsKCQkkZGF0YXNldC0+c2V0UHJpbWFyeURhdGFzZXQoJHByaW1hcnlEYXRhc2V0UGFyYW1zLCAkcHJpbWFyeURhdGFzZXREYXRhKTsKCQoJCXJldHVybiAkZGF0YXNldDsKCX0KCQoJCgkvKioKCSAqIFNldHMgdGhlIHByaW1hcnkgZGF0YXNldAoJICogCgkgKiBAcGFyYW0gU3RyaW5nICRwYXJhbXMgVGhlIHBhcmFtcyBzdHJpbmcgdGhhdCB3YXMgdXNlZCB0byBjcmVhdGUgdGhlIGRhdGEKCSAqIEBwYXJhbSBtaXhlZCAkZGF0YSBUaGUgZGF0YS4gVXN1YWxseSBhbiBhcnJheQoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0UHJpbWFyeURhdGFzZXQoJHBhcmFtcywgJGRhdGEpCgl7CgkJaWYgKCEoJHRoaXMtPnByaW1hcnlEYXRhc2V0IGluc3RhbmNlb2Ygc3RkQ2xhc3MpKQoJCXsKCQkJJHRoaXMtPnByaW1hcnlEYXRhc2V0ID0gbmV3IHN0ZENsYXNzKCk7CgkJfQoJCSR0aGlzLT5wcmltYXJ5RGF0YXNldC0+cGFyYW1zID0gJHBhcmFtczsKCQkkdGhpcy0+cHJpbWFyeURhdGFzZXQtPmRhdGEgPSAkZGF0YTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIHByaW1hcnkgZGF0YXNldAoJICogCgkgKiBAcmV0dXJuIG9iamVjdCB3aXRoIGF0dHJpYnV0ZXMgJ3BhcmFtcycgYW5kICdkYXRhJwoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UHJpbWFyeURhdGFzZXQoKQoJewoJCXJldHVybiAkdGhpcy0+cHJpbWFyeURhdGFzZXQ7Cgl9CgkKCQoJLyoqCgkgKiBBZGRzIGFuIGFkZHRpb25hbCBkYXRhc2V0CgkgKgoJICogQHBhcmFtIFN0cmluZyAkcGFyYW1zIFRoZSBwYXJhbXMgc3RyaW5nIHRoYXQgd2FzIHVzZWQgdG8gY3JlYXRlIHRoZSBkYXRhCgkgKiBAcGFyYW0gbWl4ZWQgJGRhdGEgVGhlIGRhdGEuIFVzdWFsbHkgYW4gYXJyYXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGFkZEFkZGl0aW9uYWxEYXRhc2V0KCRwYXJhbXMsICRkYXRhKQoJewoJCWlmICghaXNfYXJyYXkoJHRoaXMtPmFkZGl0aW9uYWxEYXRhc2V0cykpCgkJewoJCQkkdGhpcy0+YWRkaXRpb25hbERhdGFzZXRzID0gYXJyYXkoKTsKCQl9CgkJJG5ld0RhdGFzZXQgPSBuZXcgc3RkQ2xhc3MoKTsKCQkkbmV3RGF0YXNldC0+cGFyYW1zID0gJHBhcmFtczsKCQkkbmV3RGF0YXNldC0+ZGF0YSA9ICRkYXRhOwoJCSR0aGlzLT5hZGRpdGlvbmFsRGF0YXNldHNbXSA9ICRuZXdEYXRhc2V0OwoJfQoJCgkKCS8qKgoJICogUmV0dXJucyBhbiBhcnJheSBvZiBhbnkgYWRkaXRpb25hbCBkYXRhc2V0cwoJICogCgkgKiBAcmV0dXJuIGFycmF5IG9mIG9iamVjdHMgKG9mIHR5cGUgc3RkQ2xhc3MpLCBlYWNoIGhhdmluZyBhdHRyaWJ1dGVzICdwYXJhbXMnIGFuZCAnZGF0YScKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFkZGl0aW9uYWxEYXRhc2V0cygpCgl7CgkJcmV0dXJuICR0aGlzLT5hZGRpdGlvbmFsRGF0YXNldHM7Cgl9Cn0=', 0, '2018-11-21 06:38:55'),
(237, 'reportcategoryvaluemodel', 'LyoqCiAqCiogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KKiAKKiAKKiBNTV9SZXBvcnRDYXRlZ29yeVZhbHVlTW9kZWwgaXMgbWVhbnQgdG8gYmUgYW4gb2JqZWN0LW9yaWVudGVkIHJlcHJlc2VudGF0aW9uIG9mIGEgc2V0LCAKKiBjb250YWluaW5nIG9uZSBvciBwYWlycyBvZiBkYXRhCiovCmNsYXNzIE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbCBleHRlbmRzIE1NX0Fic3RyYWN0UmVwb3J0RGF0YU1vZGVsCnsKCglwcm90ZWN0ZWQgJHZhbHVlcyA9IGFycmF5KCk7Cglwcm90ZWN0ZWQgJHRpdGxlID0gIiI7CgkKCQoJcHVibGljIGZ1bmN0aW9uIGFkZFZhbHVlcygkY2F0ZWdvcnksICR2YWx1ZSkKCXsKCQkkdGhpcy0+dmFsdWVzW10gPSBhcnJheSgnY2F0ZWdvcnknPT4kY2F0ZWdvcnksICd2YWx1ZSc9PiR2YWx1ZSk7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRWYWx1ZXMoKQoJewoJCXJldHVybiAkdGhpcy0+dmFsdWVzOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0VmFsdWVzKCR2YWx1ZXMpCgl7CgkJJHRoaXMtPnZhbHVlcyA9ICR2YWx1ZXM7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGEgbW9kZWwgY29udGFpbmluZyB0aGUgcmVjb3JkcyBpbiB0aGUgc3VwcGxpZWQgYXJyYXkKCSAqIAoJICogQHBhcmFtIGFycmF5ICRyZXN1bHRzIFRoZSByZWNvcmRzIHRoYXQgd2lsbCBiZSB1c2VkIHRvIGNyZWF0ZSB0aGUgbW9kZWwKCSAqIEBwYXJhbSBzdHJpbmcgJGNhdGVnb3J5RmllbGROYW1lIFRoZSBuYW1lIG9mIHRoZSBjYXRlZ29yeSBjb2x1bW4gKGluIHRoZSBzdXBwbGllZCByZXN1bHRzKQoJICogQHBhcmFtIHN0cmluZyAkdmFsdWVGaWVsZE5hbWUgVGhlIG5hbWUgb2YgdGhlIHZhbHVlIGNvbHVtbiAoaW4gdGhlIHN1cHBsaWVkIHJlc3VsdHMpCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVwb3J0Q2F0ZWdvcnlWYWx1ZU1vZGVsIG9uIHN1Y2Nlc3MsIGJvb2xlYW4gZmFsc2Ugb24gZXJyb3IKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVGcm9tRGF0YSgkcmVzdWx0cywkY2F0ZWdvcnlGaWVsZE5hbWUsICR2YWx1ZUZpZWxkTmFtZSkKCXsKCQkkbW9kZWwgPSBuZXcgTU1fUmVwb3J0Q2F0ZWdvcnlWYWx1ZU1vZGVsKCk7CgkJaWYgKCFpc19hcnJheSgkcmVzdWx0cykpCgkJewkKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCQkKCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkdikJCgkJewoJCQlpZiAoaXNzZXQoJHZbJGNhdGVnb3J5RmllbGROYW1lXSkgJiYgaXNzZXQoJHZbJHZhbHVlRmllbGROYW1lXSkpCgkJCXsKCQkJCSRtb2RlbC0+YWRkVmFsdWVzKCR2WyRjYXRlZ29yeUZpZWxkTmFtZV0sICR2WyR2YWx1ZUZpZWxkTmFtZV0pOwoJCQl9CgkJfQoJCXJldHVybiAkbW9kZWw7Cgl9CgkKCQoJLyoqCgkgKiBDcmVhdGVzIGEgbW9kZWwgY29udGFpbmluZyB0aGUgdG9wICRudW1SZWNvcmRzIHJlY29yZHMgaW4gdGhlIHN1cHBsaWVkIGFycmF5IHdoZW4gaXQgaXMgc29ydGVkIGRlc2NlbmRpbmcgdXNpbmcgdGhlIHZhbHVlIGZpZWxkCgkgKiAKCSAqIEBwYXJhbSBhcnJheSAkcmVzdWx0cyBUaGUgcmVzdWx0cyB0byBleHRyYWN0cyB0aGUgcmVjb3JkcyB0aGF0IHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdGhlIG1vZGVsCgkgKiBAcGFyYW0gc3RyaW5nICRjYXRlZ29yeUZpZWxkTmFtZSBUaGUgbmFtZSBvZiB0aGUgY2F0ZWdvcnkgY29sdW1uIChpbiB0aGUgc3VwcGxpZWQgcmVzdWx0cykKCSAqIEBwYXJhbSBzdHJpbmcgJHZhbHVlRmllbGROYW1lIFRoZSBuYW1lIG9mIHRoZSB2YWx1ZSBjb2x1bW4gKGluIHRoZSBzdXBwbGllZCByZXN1bHRzKQoJICogQHBhcmFtIGludGVnZXIgJG51bVJlY29yZHMgVGhlIG51bWJlciBvZiByZWNvcmRzIHRvIHJldHVybgoJICogCgkgKiBAcmV0dXJuIGFuIGluc3RhbmNlIG9mIE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbCBvbiBzdWNjZXNzLCBib29sZWFuIGZhbHNlIG9uIGVycm9yCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY3JlYXRlRnJvbVRvcFJlc3VsdHMoJHJlc3VsdHMsICRjYXRlZ29yeUZpZWxkTmFtZSwgJHZhbHVlRmllbGROYW1lLCAkbnVtUmVjb3JkcykKCXsKCQlpZiAoIWlzX2FycmF5KCRyZXN1bHRzKSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJCgkJc2VsZjo6c29ydFJlc3VsdHMoJHJlc3VsdHMsICR2YWx1ZUZpZWxkTmFtZSwgc2VsZjo6JFNPUlRfREVTQyk7CgkJaWYgKGlzX2ludCgkbnVtUmVjb3JkcykgJiYgKGNvdW50KCRyZXN1bHRzKSA+ICRudW1SZWNvcmRzKSkKCQl7CgkJCSRyZXN1bHRzID0gYXJyYXlfc2xpY2UoJHJlc3VsdHMsMCwkbnVtUmVjb3Jkcyx0cnVlKTsKCQl9CgkJcmV0dXJuIHNlbGY6OmNyZWF0ZUZyb21EYXRhKCRyZXN1bHRzLCAkY2F0ZWdvcnlGaWVsZE5hbWUsICR2YWx1ZUZpZWxkTmFtZSk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRpdGxlKCkgCgl7CgkJcmV0dXJuICR0aGlzLT50aXRsZTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VGl0bGUoJHRpdGxlKSAKCXsKCQkkdGhpcy0+dGl0bGUgPSAkdGl0bGU7Cgl9CgkKCQoJCgkKCQp9CgoK', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(238, 'accesscontrolengine', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KCmNsYXNzIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmUKewoJcHVibGljIHN0YXRpYyAkQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCA9ICJtZW1iZXJzaGlwIjsKCXB1YmxpYyBzdGF0aWMgJEFDQ0VTU19UWVBFX0JVTkRMRSA9ICJidW5kbGUiOwoJCgkvKioKCSAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBleHRyYWN0IHRoZSBwcm9kdWN0cyBmcm9tIGFuIG9yZGVyIGFuZCBwYXNzIHRoZW0gdG8gYXNzaWduQWNjZXNzRnJvbU9yZGVySXRlbXMKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgdG8gdXNlIHdoZW4gYXNzaWduaW5nIGFjY2VzcyByaWdodHMKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgcGFzc2VkIHRocm91Z2ggZnJvbSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjphc3NpZ25BY2Nlc3NGcm9tT3JkZXJJdGVtcwoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGFzc2lnbkFjY2Vzc0Zyb21PcmRlcihNTV9PcmRlciAkb3JkZXIpCgl7CgkJcmV0dXJuIHNlbGY6OmFzc2lnbkFjY2Vzc0Zyb21PcmRlckl0ZW1zKCRvcmRlci0+Z2V0Q3VzdG9tZXIoKSwkb3JkZXItPmdldFByb2R1Y3RzKCkpOwoJfQoJCgkKCS8qKgoJICogQXNzaWduIG1lbWJlcnNoaXAgYW5kL29yIGJ1bmRsZSBhY2Nlc3MgZ2l2ZW4gYSB1c2VyIGFuZCBhbiBhcnJheSBvZiBvcmRlciBpdGVtcwoJICogQ3VycmVudGx5LCBzcGVjaWFsIHByb2R1Y3RzIGFyZSB1c2VkIHRvIHJlcHJlc2VudCBtZW1iZXJzaGlwcyBhbmQgYnVuZGxlcyBhbmQgcHJvZHVjdHMgYXJlIHN0b3JlZCBpbiBvcmRlciBpdGVtcywKCSAqIHNvIHRoZSBvcmRlciBpdGVtcyBhcnJheSBpcyBzY2FubmVkLCBhbmQgYmFzZWQgb24gdGhlIGV4aXN0ZW5jZSBvZiB0aGVzZSBwcm9kdWN0cywgYWNjZXNzIGlzIGFwcGxpZWQuIFByb2R1Y3RzIHRoYXQKCSAqIGRvIG5vdCBncmFudCB0aGUgcHVyY2hhc2VyIGFkZGl0aW9uYWwgcmlnaHRzIGFyZSBpZ25vcmVkCgkgKgoJICogQHBhcmFtIE1NX1VzZXIgJHVzZXIgVGhlIHVzZXIgd2hvIHdpbGwgYmUgcmVjZWl2aW5nIGFjY2VzcyBtb2RpZmljYXRpb24KCSAqIEBwYXJhbSBBcnJheSAkb3JkZXJJdGVtc0FycmF5IEFuIGFycmF5IG9mIE1NX09yZGVySXRlbSBvYmplY3RzCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBvZiB0aGUgYXNzaWdubWVudCBvZiBtZW1iZXJzaGlwIGFuZC9vciBidW5kbGUgYWNjZXNzIHJpZ2h0cyB0byB0aGUgdXNlci4gU2VlIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbk1lbWJlcnNoaXBUb1VzZXIoKSBhbmQgTU1fQWNjZXNzQ29udHJvbEVuZ2luZTo6YXNzaWduQnVuZGxlVG9Vc2VyKCkKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBhc3NpZ25BY2Nlc3NGcm9tT3JkZXJJdGVtcyhNTV9Vc2VyICR1c2VyLCAkb3JkZXJJdGVtc0FycmF5KQoJewoJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgdXNlciwgY2Fubm90IGFzc2lnbiBhY2Nlc3MgcmlnaHRzIixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkKCQlpZiAoIWlzX2FycmF5KCRvcmRlckl0ZW1zQXJyYXkpIHx8IChjb3VudCgkb3JkZXJJdGVtc0FycmF5KSA9PSAwKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGFzc2lnbmluZyBhY2Nlc3MgdG8gdXNlciAiLiR1c2VyLT5nZXRVc2VybmFtZSgpLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkYXNzb2NpYXRlZEFjY2Vzc0ZvdW5kID0gZmFsc2U7CgkJCgkJZm9yZWFjaCAoJG9yZGVySXRlbXNBcnJheSBhcyAkb3JkZXJJdGVtKQoJCXsKCQkJJHJlc3BvbnNlID0gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCQoJCQkvLyBpZiB0aGlzIGlzIGEgZ2lmdCwgY3JlYXRlIGEgZ2lmdCBjb3Vwb24gYW5kIGJ5cGFzcyBhc3NpZ25pbmcgYWNjZXNzIAoJCQlpZigkb3JkZXJJdGVtLT5pc0dpZnQoKSkKCQkJewoJCQkJLy8gY3JlYXRlIGdpZnQgY291cG9uCgkJCQkkY291cG9uQ29kZSA9IE1NX0NvdXBvbjo6Z2VuZXJhdGVDb3Vwb25Db2RlKCk7CgkJCQkKCQkJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRjb3Vwb25Db2RlKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGdpZnQgY291cG9uIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCQkKCQkJCSRjb3Vwb24gPSBuZXcgTU1fQ291cG9uKCk7CgkJCQkkY291cG9uLT5zZXRJc0dpZnQodHJ1ZSk7CgkJCQkkY291cG9uLT5zZXRHaWZ0VXNlcklkKCR1c2VyLT5nZXRJZCgpKTsKCQkJCSRjb3Vwb24tPnNldEdpZnRPcmRlckl0ZW1JZCgkb3JkZXJJdGVtLT5nZXRJZCgpKTsKCQkJCSRjb3Vwb24tPnNldFF1YW50aXR5KDEpOwoJCQkJJGNvdXBvbi0+c2V0Q291cG9uVHlwZShNTV9Db3Vwb246OiRUWVBFX0ZSRUUpOwoJCQkJJGNvdXBvbi0+c2V0Q291cG9uTmFtZSgiR2lmdCBDb3Vwb24gKE1lbWJlciBJRDogI3skdXNlci0+Z2V0SWQoKX0pIik7CgkJCQkkY291cG9uLT5zZXRDb3Vwb25Db2RlKCRjb3Vwb25Db2RlLT5tZXNzYWdlKTsKCQkJCSRwcm9kdWN0cyA9IGFycmF5KCRvcmRlckl0ZW0tPmdldEl0ZW1JZCgpPT4kb3JkZXJJdGVtLT5nZXRJdGVtSWQoKSk7CgkJCQkkY291cG9uLT5zZXRQcm9kdWN0cygkcHJvZHVjdHMpOwoJCQkJJHJlc3VsdCA9ICRjb3Vwb24tPmNvbW1pdERhdGEoKTsKCQkJCQoJCQkJaWYoJHJlc3VsdCA9PT0gZmFsc2UpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBnaWZ0IGNvdXBvbiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJCgkJCQkvLyBieXBhc3MgYXNzaWduaW5nIGFjY2VzcyB0byB0aGlzIGN1c3RvbWVyIHNpbmNlIGFjY2VzcyB3aWxsIGJlIHJlZGVlbWVkIGJ5IAoJCQkJLy8gdGhlIGN1c3RvbWVyIHdobyB1c2VzIHRoZSBjb3Vwb24KCQkJCWNvbnRpbnVlOwoJCQl9CgkJCQoJCQkkcHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRvcmRlckl0ZW0tPmdldEl0ZW1JZCgpKTsKCQkJaWYgKCRwcm9kdWN0LT5pc1ZhbGlkKCkpCgkJCXsKCQkJCSRtZW1iZXJzaGlwID0gJHByb2R1Y3QtPmdldEFzc29jaWF0ZWRNZW1iZXJzaGlwKCk7CgkJCQlpZiAoJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkvLyBwb3B1bGF0ZSB0aGUgb3JkZXIgaXRlbSBhY2Nlc3MgdGFibGUgcHJpb3IgdG8gYXBwbHlpbmcgYWNjZXNzIHNvIHRoYXQgdGhlIGlzQ29tcGxpbWVudGFyeSBtZXRob2QKCQkJCQkvLyB3aWxsIHJldHVybiB0aGUgYXBwcm9wcmlhdGUgdmFsdWUgaW4gdGhlIHB1c2ggbm90aWZpY2F0aW9ucwoJCQkJCSRvcmRlckl0ZW1BY2Nlc3MgPSBuZXcgTU1fT3JkZXJJdGVtQWNjZXNzKCk7CgkJCQkJJG9yZGVySXRlbUFjY2Vzcy0+c2V0T3JkZXJJdGVtSWQoJG9yZGVySXRlbS0+Z2V0SWQoKSk7CgkJCQkJJG9yZGVySXRlbUFjY2Vzcy0+c2V0QWNjZXNzVHlwZShNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQKTsKCQkJCQkkb3JkZXJJdGVtQWNjZXNzLT5zZXRBY2Nlc3NUeXBlSWQoJG1lbWJlcnNoaXAtPmdldElkKCkpOwoJCQkJCSRvcmRlckl0ZW1BY2Nlc3MtPnNldFVzZXJJZCgkdXNlci0+Z2V0SWQoKSk7CgkJCQkJJG9yZGVySXRlbUFjY2Vzcy0+Y29tbWl0RGF0YSgpOwoJCQkJCQoJCQkJCSRyZXNwb25zZSA9IHNlbGY6OmFzc2lnbk1lbWJlcnNoaXBUb1VzZXIoJHVzZXIsICRtZW1iZXJzaGlwKTsKCQkJCQkJCgkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzcG9uc2UpKQoJCQkJCXsKCQkJCQkJJGFzc29jaWF0ZWRBY2Nlc3NGb3VuZCA9IHRydWU7CgkJCQkJCQoJCQkJCQkkcmVzcG9uc2UgPSBzZWxmOjpjYW5jZWxQcmV2aW91c1Byb2R1Y3RzRm9yTWVtYmVyc2hpcCgkdXNlciwgJG1lbWJlcnNoaXAtPmdldElkKCksICRvcmRlckl0ZW0pOyAKCQkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJCQkJewoJCQkJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkvLyBkZWxldGUgb3JkZXIgaXRlbSBhY2Nlc3MgaWYgYWNjZXNzIHdhc24ndCBhcHBsaWVkIHN1Y2Nlc3NmdWxseQoJCQkJCQkkb3JkZXJJdGVtQWNjZXNzLT5kZWxldGUoKTsKCQkJCQl9CgkJCQl9CgkKCQkJCSRidW5kbGUgPSAkcHJvZHVjdC0+Z2V0QXNzb2NpYXRlZEJ1bmRsZSgpOwoJCQkJaWYgKCRidW5kbGUtPmlzVmFsaWQoKSkKCQkJCXsKCQkJCQkvLyBwb3B1bGF0ZSB0aGUgb3JkZXIgaXRlbSBhY2Nlc3MgdGFibGUgcHJpb3IgdG8gYXBwbHlpbmcgYWNjZXNzIHNvIHRoYXQgdGhlIGlzQ29tcGxpbWVudGFyeSBtZXRob2QKCQkJCQkvLyB3aWxsIHJldHVybiB0aGUgYXBwcm9wcmlhdGUgdmFsdWUgaW4gdGhlIHB1c2ggbm90aWZpY2F0aW9ucwoJCQkJCSRvcmRlckl0ZW1BY2Nlc3MgPSBuZXcgTU1fT3JkZXJJdGVtQWNjZXNzKCk7CgkJCQkJJG9yZGVySXRlbUFjY2Vzcy0+c2V0T3JkZXJJdGVtSWQoJG9yZGVySXRlbS0+Z2V0SWQoKSk7CgkJCQkJJG9yZGVySXRlbUFjY2Vzcy0+c2V0QWNjZXNzVHlwZShNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9CVU5ETEUpOwoJCQkJCSRvcmRlckl0ZW1BY2Nlc3MtPnNldEFjY2Vzc1R5cGVJZCgkYnVuZGxlLT5nZXRJZCgpKTsKCQkJCQkkb3JkZXJJdGVtQWNjZXNzLT5zZXRVc2VySWQoJHVzZXItPmdldElkKCkpOwoJCQkJCSRvcmRlckl0ZW1BY2Nlc3MtPmNvbW1pdERhdGEoKTsKCQkJCQkKCQkJCQkkcmVzcG9uc2UgPSBzZWxmOjphc3NpZ25CdW5kbGVUb1VzZXIoJHVzZXIsICRidW5kbGUpOwkKCgkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzcG9uc2UpKQoJCQkJCXsKCQkJCQkJJGFzc29jaWF0ZWRBY2Nlc3NGb3VuZCA9IHRydWU7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCS8vIGRlbGV0ZSBvcmRlciBpdGVtIGFjY2VzcyBpZiBhY2Nlc3Mgd2Fzbid0IGFwcGxpZWQgc3VjY2Vzc2Z1bGx5CgkJCQkJCSRvcmRlckl0ZW1BY2Nlc3MtPmRlbGV0ZSgpOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkJCgkJCS8vIGNoZWNrIGZvciBlcnJvcnMKCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJewoJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJfQoJCX0gCgkJCgkJLy8gaWYgbWVtYmVyIGhhcyB0aGUgZGVmYXVsdCBtZW1iZXJzaGlwIGFuZCB0aGVpciBhY2NvdW50IGlzIHBlbmRpbmd8ZXJyb3Igc3RhdHVzIGFuZCAKCQkvLyBubyBhc3NvY2lhdGVkIGFjY2VzcyByaWdodHMgd2VyZSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb2R1Y3RzIHB1cmNoYXNlZCwgc2V0IHRoZSBhY2NvdW50IHRvIGFjdGl2ZQoJCSRkZmx0TWVtYmVyc2hpcCA9IE1NX01lbWJlcnNoaXBMZXZlbDo6Z2V0RGVmYXVsdE1lbWJlcnNoaXAoKTsKCQkKCQlpZigoJGFzc29jaWF0ZWRBY2Nlc3NGb3VuZCA9PSBmYWxzZSkgJiYgKGludHZhbCgkdXNlci0+Z2V0TWVtYmVyc2hpcElkKCkpID09IGludHZhbCgkZGZsdE1lbWJlcnNoaXAtPmdldElkKCkpKSAKCQkJJiYgKCR1c2VyLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRQRU5ESU5HX0FDVElWQVRJT04gfHwgJHVzZXItPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JEVSUk9SKSkKCQl7CgkJCSR1c2VyLT5zZXRTdGF0dXMoTU1fU3RhdHVzOjokQUNUSVZFKTsKCQkJJHJlc3VsdCA9ICR1c2VyLT5jb21taXREYXRhKCk7CgkJCQoJCQkvLyBjaGVjayBmb3IgZXJyb3JzCgkJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCQl7CgkJCQlyZXR1cm4gJHJlc3VsdDsKCQkJfQoJCX0gCgoJCS8vIGlmIHRoaXMgbGluZSBpcyByZWFjaGVkIGFsbCBhY2Nlc3MgcmlnaHRzIHdlcmUgYXBwbGllZCBzdWNjZXNzZnVsbHkgCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCgkKCS8qKgoJICogQXNzaWduIGFjY2VzcyB0byBhIG1lbWJlcnNoaXAgZ2l2ZW4gYSB1c2VyIGFuZCBhIG1lbWJlcnNoaXAKCSAqCgkgKiBAcGFyYW0gTU1fVXNlciAkdXNlciBUaGUgdXNlciB3aG8gd2lsbCBiZSByZWNlaXZpbmcgdGhlIG1lbWJlcnNoaXAKCSAqIEBwYXJhbSBNTV9NZW1iZXJzaGlwTGV2ZWwgJG1lbWJlcnNoaXAgVGhlIG1lbWJlcnNoaXAgdG8gYXBwbHkgdG8gdGhlIHVzZXIKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3VjY2VzcyBvciBmYWlsdXJlIG9mIHRoZSBjb21taXQgb2YgdGhlIHVzZXIgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgdXNlciB3aXRoIHRoZSBtb2RpZmllZCByaWdodHMuIFNlZSBNTV9Vc2VyOjpjb21taXREYXRhKCkKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBhc3NpZ25NZW1iZXJzaGlwVG9Vc2VyKE1NX1VzZXIgJHVzZXIsIE1NX01lbWJlcnNoaXBMZXZlbCAkbWVtYmVyc2hpcCkKCXsKCQlpZighJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgdXNlciwgY2Fubm90IGFzc2lnbiBhY2Nlc3MgcmlnaHRzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoKCQlpZighJG1lbWJlcnNoaXAtPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgbWVtYmVyc2hpcCwgY2Fubm90IGFzc2lnbiBhY2Nlc3MgcmlnaHRzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIGNoZWNrcyBmb3IgZXhpc3RpbmcgbWVtYmVycyAoYWNjb3VudHMgd2l0aCBwZW5kaW5nL2Vycm9yCgkJLy8gc3RhdHVzIGFyZSBzdGlsbCBjb25zaWRlcmVkIHRvIGJlIGluIGFuIGluaXRpYWwgc3RhdGUgYmVjYXVzZSB0aGV5J3ZlIG5ldmVyIGJlZW4gYWN0aXZlKSAuLi4KCQlpZigoJHVzZXItPmdldFN0YXR1cygpICE9IE1NX1N0YXR1czo6JFBFTkRJTkdfQUNUSVZBVElPTiAmJiAkdXNlci0+Z2V0U3RhdHVzKCkgIT0gTU1fU3RhdHVzOjokRVJST1IpKQoJCXsKCQkJLy8gY2hlY2sgaWYgZXhpc3RpbmcgbWVtYmVyIGlzIGNoYW5naW5nIHRoZWlyIG1lbWJlcnNoaXAgCgkJCWlmKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSAhPSAkbWVtYmVyc2hpcC0+Z2V0SWQoKSkKCQkJewoJCQkJcmV0dXJuIHNlbGY6OmNoYW5nZU1lbWJlcnNoaXAoJHVzZXIsICRtZW1iZXJzaGlwLT5nZXRJZCgpKTsKCQkJfQoJCQkKCQkJLy8gY2hlY2sgaWYgbWVtYmVyIGlzIHB1cmNoYXNpbmcgdGhlIHNhbWUgbWVtYmVyc2hpcCBhZ2FpbiBhbmQgaWYgaXQncyBhbiBleHBpcmluZyBtZW1iZXJzaGlwCgkJCS8vIHVwZGF0ZSB0aGVpciBleHBpcmF0aW9uIGRhdGUKCQkJZWxzZSAKCQkJewoJCQkJaWYoJG1lbWJlcnNoaXAtPmRvZXNFeHBpcmUoKSkKCQkJCXsKCQkJCQkvLyB1cGRhdGUgZXhwaXJhdGlvbiBkYXRlCgkJCQkJaWYoJHVzZXItPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JEVYUElSRUQpCgkJCQkJewoJCQkJCQkkbmV3RXhwaXJhdGlvbkRhdGUgPSAkbWVtYmVyc2hpcC0+Z2V0RXhwaXJhdGlvbkRhdGUoTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCkpOwoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQkkY3JudEV4cGlyYXRpb25EYXRlID0gJHVzZXItPmdldEV4cGlyYXRpb25EYXRlKCk7CgkJCQkJCQkKCQkJCQkJaWYoc3RydG90aW1lKE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpKSA+IHN0cnRvdGltZSgkY3JudEV4cGlyYXRpb25EYXRlKSkKCQkJCQkJewoJCQkJCQkJJGNybnRFeHBpcmF0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkJCQl9CgkJCQkJCQoJCQkJCQkkbmV3RXhwaXJhdGlvbkRhdGUgPSAkbWVtYmVyc2hpcC0+Z2V0RXhwaXJhdGlvbkRhdGUoJGNybnRFeHBpcmF0aW9uRGF0ZSk7CgkJCQkJfQoJCQkJCQoJCQkJCSR1c2VyLT5zZXRFeHBpcmF0aW9uRGF0ZSgkbmV3RXhwaXJhdGlvbkRhdGUpOwoJCQkJfQoJCQl9CgkJfQoJCgkJJHVzZXItPnNldE1lbWJlcnNoaXBJZCgkbWVtYmVyc2hpcC0+Z2V0SWQoKSk7CgkJJHVzZXItPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRBQ1RJVkUpOwoJCSR1c2VyLT51cGRhdGVXUFVzZXJSb2xlKCk7CgkJcmV0dXJuICR1c2VyLT5jb21taXREYXRhKCk7Cgl9CgkKCQoJLyoqCgkgKiBBc3NpZ24gYWNjZXNzIHRvIGEgYnVuZGxlIGdpdmVuIGEgdXNlciBhbmQgYSBidW5kbGUKCSAqCgkgKiBAcGFyYW0gTU1fVXNlciAkdXNlciBUaGUgdXNlciB3aG8gd2lsbCBiZSByZWNlaXZpbmcgdGhlIG1lbWJlcnNoaXAKCSAqIEBwYXJhbSBNTV9CdW5kbGUgJGJ1bmRsZSBUaGUgYnVuZGxlIHRvIGFwcGx5IHRvIHRoZSB1c2VyCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN1Y2Nlc3Mgb3IgZmFpbHVyZSBvZiB0aGUgY29tbWl0IG9mIHRoZSB1c2VyIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHVzZXIgd2l0aCB0aGUgbW9kaWZpZWQgcmlnaHRzLiBTZWUgTU1fVXNlcjo6Y29tbWl0RGF0YSgpCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYXNzaWduQnVuZGxlVG9Vc2VyKE1NX1VzZXIgJHVzZXIsIE1NX0J1bmRsZSAkYnVuZGxlKQoJewoJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgdXNlciwgY2Fubm90IGFzc2lnbiBhY2Nlc3MgcmlnaHRzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICghJGJ1bmRsZS0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBidW5kbGUsIGNhbm5vdCBhc3NpZ24gYWNjZXNzIHJpZ2h0cyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvLyBkZXRlcm1pbmUgaWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSB0aGUgdXNlciBpcyBoYXZpbmcgdGhpcyBidW5kbGUgYXBwbGllZCB0byB0aGVpciBhY2NvdW50IG9yCgkJLy8gaWYgdGhlIGV4cGlyYXRpb24gZGF0ZSBzaG91bGQgYmUgdXBkYXRlZAoJCWlmKCRidW5kbGUtPmRvZXNFeHBpcmUoKSkKCQl7CgkJCSRhcHBsaWVkQnVuZGxlID0gTU1fQXBwbGllZEJ1bmRsZTo6Z2V0QXBwbGllZEJ1bmRsZSgkdXNlci0+Z2V0SWQoKSwgJGJ1bmRsZS0+Z2V0SWQoKSk7CgkJCQoJCQlpZigkYXBwbGllZEJ1bmRsZS0+aXNWYWxpZCgpKQoJCQl7CgkJCQkvLyB1cGRhdGUgZXhwaXJhdGlvbiBkYXRlCgkJCQlpZigkYXBwbGllZEJ1bmRsZS0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokRVhQSVJFRCkKCQkJCXsKCQkJCQkkbmV3RXhwaXJhdGlvbkRhdGUgPSAkYnVuZGxlLT5nZXRFeHBpcmF0aW9uRGF0ZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJGNybnRFeHBpcmF0aW9uRGF0ZSA9ICRhcHBsaWVkQnVuZGxlLT5nZXRFeHBpcmF0aW9uRGF0ZSgpOwoJCQkJCQoJCQkJCWlmKHN0cnRvdGltZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSkgPiBzdHJ0b3RpbWUoJGNybnRFeHBpcmF0aW9uRGF0ZSkpCgkJCQkJewoJCQkJCQkkY3JudEV4cGlyYXRpb25EYXRlID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCk7CgkJCQkJfQoJCQkJCQoJCQkJCSRuZXdFeHBpcmF0aW9uRGF0ZSA9ICRidW5kbGUtPmdldEV4cGlyYXRpb25EYXRlKCRjcm50RXhwaXJhdGlvbkRhdGUpOwoJCQkJfQoJCQkJCQoJCQkJJGFwcGxpZWRCdW5kbGUtPnNldEV4cGlyYXRpb25EYXRlKCRuZXdFeHBpcmF0aW9uRGF0ZSk7CgkJCQkkcmVzcG9uc2UgPSAkYXBwbGllZEJ1bmRsZS0+Y29tbWl0RGF0YSgpOwoJCQkJCQoJCQkJaWYoTU1fUmVzcG9uc2U6OmlzRXJyb3IoJHJlc3BvbnNlKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciB1cGRhdGluZyBleHBpcmF0aW9uIGRhdGUgb24gYnVuZGxlLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJfQoJCQoJCSRyZXN1bHQgPSAkdXNlci0+YWRkQnVuZGxlKCRidW5kbGUtPmdldElkKCkpOwoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXN1bHQpKQoJCXsKCQkJcmV0dXJuICRyZXN1bHQ7CgkJfQoJCQoJCSRkZmx0TWVtYmVyc2hpcCA9ICRidW5kbGUtPmdldERmbHRNZW1iZXJzaGlwKCk7CgkJCgkJLy8gY2hlY2sgaWYgdXNlciBoYXMgYSBtZW1iZXJzaGlwIGFuZCBpZiBub3QsIGFwcGx5IHRoZSBkZWZhdWx0IG1lbWJlcnNoaXAKCQlpZihpc19udWxsKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSkgfHwgaW50dmFsKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSkgPT0gMCkKCQl7CgkJCSRyZXNwb25zZSA9IHNlbGY6OmFzc2lnbk1lbWJlcnNoaXBUb1VzZXIoJHVzZXIsICRkZmx0TWVtYmVyc2hpcCk7CgkJCQoJCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzcG9uc2UpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBhcHBseWluZyBidW5kbGUsIGNvdWxkIG5vdCBhc3NpZ24gZGVmYXVsdCBtZW1iZXJzaXAgbGV2ZWwuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZSBpZigoaW50dmFsKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSkgPT0gaW50dmFsKCRkZmx0TWVtYmVyc2hpcC0+Z2V0SWQoKSkpICYmIAoJCQkJKCR1c2VyLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRQRU5ESU5HX0FDVElWQVRJT04gfHwgJHVzZXItPmdldFN0YXR1cygpID09IE1NX1N0YXR1czo6JEVSUk9SKSkKCQl7CgkJCS8vIGlmIHVzZXIgaGFzIGEgZGVmYXVsdCBtZW1iZXJzaGlwIGJ1dCBpdCdzIHBlbmRpbmcgb3IgaW4gZXJyb3Igc3RhdHVzLCBtYXJrIGl0IGFzIGFjdGl2ZQoJCQkvLyB0aGlzIGNvdmVycyBhIGNhc2Ugd2hlcmUgdGhlIGN1c3RvbWVyJ3MgZmlyc3QgcHVyY2hhc2Ugd2FzIGEgYnVubGRlLCB0aGVyZSB3YXMgYW4gZXJyb3IKCQkJLy8gYW5kIHRoZW4gdGhleSBmaXhlZCB0aGUgZXJyb3IgYW5kIHN1Y2Nlc3NmdWxseSBwdXJjaGFzZWQgdGhlIGJ1bmRsZS4KCQkJJHVzZXItPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRBQ1RJVkUpOwoJCQkkcmVzdWx0ID0gJHVzZXItPmNvbW1pdERhdGEoKTsKCQl9CgkJCgkJcmV0dXJuICRyZXN1bHQ7Cgl9CgkKCQoJLyoqCgkgKiBSZW1vdmUgYWNjZXNzIHRvIGEgYnVuZGxlIGdpdmVuIGEgdXNlciBhbmQgYSBidW5kbGUgYW5kIG9wdGlvbmFsbHkgYSBzdGF0dXMuIFRoaXMgbWV0aG9kIGFsc28gY2FsbHMgCgkgKiBNTV9QYXltZW50VXRpbHM6OmNhbmNlbFN1YnNjcmlwdGlvbiB0byBjYW5jZWwgYW55IHJlY3VycmluZyBiaWxsaW5nLgoJICoKCSAqIEBwYXJhbSBNTV9Vc2VyICR1c2VyIFRoZSB1c2VyIHRvIHJlbW92ZSB0aGUgYnVuZGxlIGZyb20KCSAqIEBwYXJhbSBNTV9CdW5kbGUgJGJ1bmRsZSBUaGUgYnVuZGxlIHRvIHJlbW92ZSBmcm9tIHRoZSB1c2VyCgkgKiBAcGFyYW0gTnVtYmVyICRmb3JjZVN0YXR1cyBvcHRpb25hbGx5IGEgc3RhdHVzIGNhbiBiZSBwYXNzZWQgdG8gZGljdGF0ZSBpZiB0aGUgYnVuZGxlIHNob3VsZCBiZSBwYXVzZWQgb3IgY2FuY2VsZWQKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3VjY2VzcyBvciBmYWlsdXJlIG9mIHRoZSBjb21taXQgb2YgdGhlIHVzZXIgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgdXNlciB3aXRoIHRoZSBtb2RpZmllZCByaWdodHMuIFNlZSBNTV9Vc2VyOjpjb21taXREYXRhKCkKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiByZW1vdmVCdW5kbGVGcm9tVXNlcihNTV9Vc2VyICR1c2VyLCBNTV9CdW5kbGUgJGJ1bmRsZSwgJGZvcmNlU3RhdHVzPSIiKQoJewoJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkludmFsaWQgdXNlciwgY2Fubm90IGFzc2lnbiBhY2Nlc3MgcmlnaHRzIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmICgkYnVuZGxlLT5pc1ZhbGlkKCkpCgkJewoJCQlpZighZW1wdHkoJGZvcmNlU3RhdHVzKSAmJiAkZm9yY2VTdGF0dXMgIT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQgJiYgJGZvcmNlU3RhdHVzICE9IE1NX1N0YXR1czo6JFBBVVNFRCkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBzdGF0dXMgJ3skZm9yY2VTdGF0dXN9Jy4gV2hlbiByZW1vdmluZyBidW5kbGVzLCB0aGV5IGNhbiBvbmx5IGJlIHBhdXNlZCBvciBjYW5jZWxlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJJHJlc3VsdCA9IE1NX1BheW1lbnRVdGlsczo6Y2FuY2VsU3Vic2NyaXB0aW9uKCR1c2VyLCAkYnVuZGxlKTsKCQkJCgkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCXsKCQkJCSRjYW5jZWxlZE9yZGVySXRlbXMgPSAkcmVzdWx0LT5nZXREYXRhKCJvcmRlckl0ZW1zIik7CgkJCQkKCQkJCS8vIGRldGVybWluZSBpZiBjYW5jZWxsYXRpb24gc2hvdWxkIGJlIHBlbmRpbmcKCQkJCWlmKGlzX2FycmF5KCRjYW5jZWxlZE9yZGVySXRlbXMpICYmIGNvdW50KCRjYW5jZWxlZE9yZGVySXRlbXMpID4gMCkKCQkJCXsKCQkJCQkvLyBnZXQgdGhlIGZpcnN0IG9yZGVyIGl0ZW0gd2hvc2Ugc3Vic2NyaXB0aW9uIHdhcyBqdXN0IGNhbmNlbGVkCgkJCQkJJG9yZGVySXRlbSA9IE1NX09yZGVySXRlbTo6Y3JlYXRlKCRjYW5jZWxlZE9yZGVySXRlbXNbMF0pOwoJCQkJCQkKCQkJCQkkY2FuY2VsbGF0aW9uRGF0ZSA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmdldENhbmNlbGxhdGlvbkRhdGVCeU9yZGVySXRlbSgkb3JkZXJJdGVtKTsKCQkJCQoJCQkJCWlmKCFpc19udWxsKCRjYW5jZWxsYXRpb25EYXRlKSkKCQkJCQl7CgkJCQkJCS8vIHNldCB0aGUgY2FuY2VsbGF0aW9uIGRhdGUgZm9yIHRoZSBhcHBsaWVkIGJ1bmRsZSBhbmQKCQkJCQkJLy8gc2V0IHRoZSBwZW5kaW5nIHN0YXR1cyB2YWx1ZQoJCQkJCQkkYXBwbGllZEJ1bmRsZSA9IE1NX0FwcGxpZWRCdW5kbGU6OmdldEFwcGxpZWRCdW5kbGUoJHVzZXItPmdldElkKCksICRidW5kbGUtPmdldElkKCkpOwoJCQkJCQkKCQkJCQkJaWYoJGFwcGxpZWRCdW5kbGUtPmlzVmFsaWQoKSkKCQkJCQkJewoJCQkJCQkJJGFwcGxpZWRCdW5kbGUtPnNldENhbmNlbGxhdGlvbkRhdGUoJGNhbmNlbGxhdGlvbkRhdGUpOwoJCQkJCQkJJHBlbmRpbmdTdGF0dXMgPSAkZm9yY2VTdGF0dXM7CgkJCQkJCQkKCQkJCQkJCWlmKGVtcHR5KCRmb3JjZVN0YXR1cykpCgkJCQkJCQl7CgkJCQkJCQkJJGNhbmNlbGxhdGlvbk1ldGhvZCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0RGTFRfQ0FOQ0VMTEFUSU9OX01FVEhPRCk7CgkJCQkJCQkJaWYgKCRjYW5jZWxsYXRpb25NZXRob2QgPT0gTU1fQ2FuY2VsbGF0aW9uTWV0aG9kOjokQ0FOQ0VMX0hBUkQpCgkJCQkJCQkJewoJCQkJCQkJCQkkcGVuZGluZ1N0YXR1cyA9IE1NX1N0YXR1czo6JENBTkNFTEVEOwoJCQkJCQkJCX0KCQkJCQkJCQllbHNlIGlmICgkY2FuY2VsbGF0aW9uTWV0aG9kID09IE1NX0NhbmNlbGxhdGlvbk1ldGhvZDo6JENBTkNFTF9QQVVTRSkKCQkJCQkJCQl7CgkJCQkJCQkJCSRwZW5kaW5nU3RhdHVzID0gTU1fU3RhdHVzOjokUEFVU0VEOwoJCQkJCQkJCX0KCQkJCQkJCQllbHNlCgkJCQkJCQkJewoJCQkJCQkJCQkkcGVuZGluZ1N0YXR1cyA9IE1NX1N0YXR1czo6JENBTkNFTEVEOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCQoJCQkJCQkJJGFwcGxpZWRCdW5kbGUtPnNldFBlbmRpbmdTdGF0dXMoJHBlbmRpbmdTdGF0dXMpOwoJCQkJCQkJJHJlc3VsdCA9ICRhcHBsaWVkQnVuZGxlLT5jb21taXREYXRhKCk7CgkJCQkJCQkKCQkJCQkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCQkJCQl7CgkJCQkJCQkJJGZvcmNlU3RhdHVzID0gTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT047CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQkKCQkJCXJldHVybiAkdXNlci0+cmVtb3ZlQnVuZGxlKCRidW5kbGUtPmdldElkKCksICRmb3JjZVN0YXR1cyk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gJHJlc3VsdDsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBidW5kbGUsIGNhbm5vdCByZW1vdmUgYWNjZXNzIHJpZ2h0cyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIFJldHVybnMgYSB1cmwgZm9yIHRoZSBwYWlkIGNvbmZpcm1hdGlvbiBwYWdlIHRoYXQgcGVydGFpbnMgdG8gYW4gb3JkZXIKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGdlbmVyYXRlIGEgY29uZmlybWF0aW9uIHVybCBmb3IKCSAqIEByZXR1cm4gU3RyaW5nIGNvbmZpcm1hdGlvbiB1cmwgb24gc3VjY2VzcywgYm9vbGVhbiBmYWxzZSBvbiBlcnJvcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvbmZpcm1hdGlvblVybEZvck9yZGVyKE1NX09yZGVyICRvcmRlcikKCXsKCQkkb3JkZXJQcm9kdWN0cyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkkZmlyc3RQcm9kdWN0ID0gYXJyYXlfc2hpZnQoJG9yZGVyUHJvZHVjdHMpOwoJCSRwYXJhbXMgPSBhcnJheSgpOwoJCQoJCWlmICgoJGZpcnN0UHJvZHVjdCBpbnN0YW5jZW9mIE1NX09yZGVySXRlbSkgJiYgKCRmaXJzdFByb2R1Y3QtPmdldEl0ZW1UeXBlKCkgPT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpKQoJCXsKCQkJJGZpcnN0UHJvZHVjdCA9IG5ldyBNTV9Qcm9kdWN0KCRmaXJzdFByb2R1Y3QtPmdldEl0ZW1JZCgpKTsgLy9yZWFzc2lnbiB0aGUgYXNzb2NpYXRlZCBwcm9kdWN0IGludG8gdGhlIHZhcmlhYmxlCgkJCSRtZW1iZXJzaGlwID0gJGZpcnN0UHJvZHVjdC0+Z2V0QXNzb2NpYXRlZE1lbWJlcnNoaXAoKTsKCQkJJGJ1bmRsZSA9ICRmaXJzdFByb2R1Y3QtPmdldEFzc29jaWF0ZWRCdW5kbGUoKTsKCQkJJHBhcmFtc1sib3JkZXJJZCJdID0gJG9yZGVyLT5nZXRJZCgpOwoJCQkKCQkJaWYgKCRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkgJiYgJG1lbWJlcnNoaXAtPmlzRnJlZSgpKQoJCQl7CgkJCQkkcGFyYW1zWydpc0ZyZWUnXSA9ICRtZW1iZXJzaGlwLT5pc0ZyZWUoKTsKCQkJCSRwYXJhbXNbJ3JlZlR5cGUnXSA9IE1NX1RZUEVfTUVNQkVSU0hJUF9MRVZFTDsKCQkJCSRwYXJhbXNbJ3JlZklkJ10gPSAkbWVtYmVyc2hpcC0+Z2V0SWQoKTsKCQkJfQoJCQllbHNlIGlmICgkYnVuZGxlLT5pc1ZhbGlkKCkgJiYgJGJ1bmRsZS0+aXNGcmVlKCkpCgkJCXsKCQkJCSRwYXJhbXNbJ2lzRnJlZSddID0gJGJ1bmRsZS0+aXNGcmVlKCk7CgkJCQkkcGFyYW1zWydyZWZUeXBlJ10gPSBNTV9UWVBFX0JVTkRMRTsKCQkJCSRwYXJhbXNbJ3JlZklkJ10gPSAkYnVuZGxlLT5nZXRJZCgpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHBhcmFtc1snaXNGcmVlJ10gPSAwOwoJCQkJJHBhcmFtc1sncmVmVHlwZSddID0gTU1fVFlQRV9QUk9EVUNUOwoJCQkJJHBhcmFtc1sncmVmSWQnXSA9ICRmaXJzdFByb2R1Y3QtPmdldElkKCk7CgkJCX0KCQkJCQoJCQkkY29uZmlybWF0aW9uVXJsID0gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldFVybChNTV9Db3JlUGFnZVR5cGU6OiRQQUlEX0NPTkZJUk1BVElPTiwgJHBhcmFtcyk7CgkJCXJldHVybiAkY29uZmlybWF0aW9uVXJsOwoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJCgkvKioKCSAqIEZvciB0aGUgc3BlY2lmaWVkIG9yZGVyIGl0ZW0sIGZpbmQgYW55IGJ1bmRsZXMgb3IgbWVtYmVyc2hpcCBsZXZlbHMgYXR0YWNoZWQgdG8gdGhlIHByb2R1Y3RzIGNvbnRhaW5lZCB3aXRoaW4sIGFuZAoJICogcmV2b2tlIGFjY2VzcyB0byB0aG9zZSBpdGVtcwoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIGl0ZW0gdG8gZGlzYWJsZQoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bCBvciBlbmNvdW50ZXJlZCBhbiBlcnJvcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHJldm9rZUFjY2Vzc0Zvck9yZGVySXRlbShNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKGlzX251bGwoJG9yZGVySXRlbSkgfHwgKCRvcmRlckl0ZW0tPmdldEl0ZW1UeXBlKCkgIT0gTU1fT3JkZXJJdGVtOjokT1JERVJfSVRFTV9UWVBFX1BST0RVQ1QpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBvcmRlciBpdGVtIHNlbnQgdG8gcmV2b2tlQWNjZXNzRm9yT3JkZXJJdGVtKCkiLE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkb3JkZXIgPSBuZXcgTU1fT3JkZXIoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpKTsKCQlpZiAoISRvcmRlci0+aXNWYWxpZCgpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiSW52YWxpZCBvcmRlciBzdXBwbGllZCBpbiByZXZva2VBY2Nlc3NGb3JPcmRlckl0ZW0oKSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vIGlmIHRoaXMgb3JkZXIgaXRlbSBpcyBhIGdpZnQsIGl0IG1heSBiZSB0aGF0IGFjY2VzcyBpcyBhc3NvY2lhdGVkIHdpdGggYW5vdGhlciBvcmRlciBpdGVtIHNvCgkJLy8gYXR0ZW1wdCB0byBsb29rdXAgdGhlIG90aGVyIG9yZGVyIGl0ZW0KCQlpZigkb3JkZXJJdGVtLT5pc0dpZnQoKSkKCQl7CgkJCSRjb3Vwb25zVGFibGUgPSBNTV9UQUJMRV9DT1VQT05TOwoJCQkkY291cG9uVXNhZ2VUYWJsZSA9IE1NX1RBQkxFX0NPVVBPTl9VU0FHRTsKCQkJCQoJCQkkc3FsID0gIlNFTEVDVCBjdS5wcm9kdWN0X29yZGVyX2l0ZW1faWQsIGMuaWQgYXMgY291cG9uX2lkIEZST00geyRjb3Vwb25zVGFibGV9IGMgTEVGVCBKT0lOIHskY291cG9uVXNhZ2VUYWJsZX0gY3UgIi4KCQkJCSJPTiAoYy5pZCA9IGN1LmNvdXBvbl9pZCkgV0hFUkUgYy5naWZ0X29yZGVyX2l0ZW1faWQ9eyRvcmRlckl0ZW0tPmdldElkKCl9IExJTUlUIDE7IjsKCQkJCgkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgoJCQlpZigkcmVzdWx0cykKCQkJewoJCQkJaWYoIWVtcHR5KCRyZXN1bHRzLT5wcm9kdWN0X29yZGVyX2l0ZW1faWQpKQoJCQkJewoJCQkJCSRvcmRlckl0ZW0gPSBNTV9PcmRlckl0ZW06OmNyZWF0ZSgkcmVzdWx0cy0+cHJvZHVjdF9vcmRlcl9pdGVtX2lkKTsKCQkJCQoJCQkJCWlmKCEkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCQkJewoJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJJbnZhbGlkIG9yZGVyIGl0ZW0gd2l0aCBJRCAneyRyZXN1bHRzLT5wcm9kdWN0X29yZGVyX2l0ZW1faWR9JyBhc3NvY2lhdGVkIHdpdGggZ2lmdCIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJfQoJCQkJZWxzZSAKCQkJCXsKCQkJCQkvLyBpZiB3ZSd2ZSBnb3R0ZW4gaGVyZSBpdCBtZWFucyB0aGF0IHRoZSBnaWZ0IGNvdXBvbiBoYXNuJ3QgYmVlbiByZWRlZW1lZCB5ZXQgc28gd2Ugd2FudCB0byByZW1vdmUgdGhlIGNvdXBvbgoJCQkJCWlmKCFlbXB0eSgkcmVzdWx0cy0+Y291cG9uX2lkKSkKCQkJCQl7CgkJCQkJCSRjb3Vwb24gPSBuZXcgTU1fQ291cG9uKCRyZXN1bHRzLT5jb3Vwb25faWQpOwoJCQkJCQkKCQkJCQkJaWYoJGNvdXBvbi0+aXNWYWxpZCgpKQoJCQkJCQl7CgkJCQkJCQkkY291cG9uLT5yZW1vdmUoKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQllbHNlCgkJCQkJewoJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCQkJfQoJCQkJfQoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfQoJCX0KCQkKCQkvLyBnZXQgYWNjZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgb3JkZXIgaXRlbQoJCSRvcmRlckl0ZW1BY2Nlc3NUYWJsZSA9IE1NX1RBQkxFX09SREVSX0lURU1fQUNDRVNTOwoJCSRvcmRlckl0ZW1zVGFibGUgPSBNTV9UQUJMRV9PUkRFUl9JVEVNUzsKCQkkYXBwbGllZEJ1bmRsZXNUYWJsZSA9IE1NX1RBQkxFX0FQUExJRURfQlVORExFUzsKCQkkdXNlckRhdGFUYWJsZSA9IE1NX1RBQkxFX1VTRVJfREFUQTsKCQkKCQkkc3FsID0gIlNFTEVDVCBvcmRlcl9pdGVtX2lkLCB1c2VyX2lkLCBhY2Nlc3NfdHlwZSwgYWNjZXNzX3R5cGVfaWQgRlJPTSB7JG9yZGVySXRlbUFjY2Vzc1RhYmxlfSBXSEVSRSBvcmRlcl9pdGVtX2lkID0gJ3skb3JkZXJJdGVtLT5nZXRJZCgpfSc7IjsKCQkkb3JkZXJJdGVtQWNjZXNzSXRlbXMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJaWYoJG9yZGVySXRlbUFjY2Vzc0l0ZW1zKQoJCXsKCQkJJGNhbmNlbGxhdGlvbk1ldGhvZCA9IE1NX09wdGlvblV0aWxzOjpnZXRPcHRpb24oTU1fT3B0aW9uVXRpbHM6OiRPUFRJT05fS0VZX0RGTFRfQ0FOQ0VMTEFUSU9OX01FVEhPRCk7CgkJCSRuZXdTdGF0dXMgPSBNTV9TdGF0dXM6OiRDQU5DRUxFRDsKCQkJaWYgKCRjYW5jZWxsYXRpb25NZXRob2QgPT0gTU1fQ2FuY2VsbGF0aW9uTWV0aG9kOjokQ0FOQ0VMX0hBUkQpCgkJCXsKCQkJCSRuZXdTdGF0dXMgPSBNTV9TdGF0dXM6OiRDQU5DRUxFRDsKCQkJfQoJCQllbHNlIGlmICgkY2FuY2VsbGF0aW9uTWV0aG9kID09IE1NX0NhbmNlbGxhdGlvbk1ldGhvZDo6JENBTkNFTF9QQVVTRSkKCQkJewoJCQkJJG5ld1N0YXR1cyA9IE1NX1N0YXR1czo6JFBBVVNFRDsKCQkJfQoJCQkKCQkJLy8gZGV0ZXJtaW5lIGlmIG9yZGVyIGl0ZW0gaXMgYXNzb2NpYXRlZCB3aXRoIGEgc3Vic2NyaXB0aW9uIGFuZCBkZXRlcm1pbmUgaWYgYWNjZXNzIHNob3VsZCBiZSAKCQkJLy8gbWFya2VkIHBlbmRpbmcgY2FuY2VsbGF0aW9uCgkJCSRjYW5jZWxsYXRpb25EYXRlID0gbnVsbDsKCQkJaWYoJG9yZGVySXRlbS0+aXNSZWN1cnJpbmcoKSkKCQkJewoJCQkJJGNhbmNlbGxhdGlvbkRhdGUgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpnZXRDYW5jZWxsYXRpb25EYXRlQnlPcmRlckl0ZW0oJG9yZGVySXRlbSk7CgkJCX0KCQkJCgkJCWZvcmVhY2goJG9yZGVySXRlbUFjY2Vzc0l0ZW1zIGFzICRvcmRlckl0ZW1BY2Nlc3NJdGVtKQoJCQl7CQoJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkb3JkZXJJdGVtQWNjZXNzSXRlbS0+dXNlcl9pZCk7CgkJCQkKCQkJCWlmKCEkdXNlci0+aXNWYWxpZCgpKQoJCQkJewoJCQkJCWNvbnRpbnVlOwoJCQkJfQoJCQkJCgkJCQkKCQkJCS8vIHdlIG5lZWQgdG8gY2hlY2sgaWYgdGhlIHNhbWUgYWNjZXNzIGlzIGJlaW5nIHByb3ZpZGVkIGJ5IGFub3RoZXIgcHVyY2hhc2UsIGFuZCBvbmx5IHJldm9rZSBpZiBpdHMgbm90CgkJCQkkb3RoZXJBY2Nlc3MgPSBmYWxzZTsKCQkJCWlmICgkb3JkZXJJdGVtQWNjZXNzSXRlbS0+YWNjZXNzX3R5cGUgPT0gTU1fT3JkZXJJdGVtQWNjZXNzOjokQUNDRVNTX1RZUEVfQlVORExFKQoJCQkJewoJCQkJCSRzcWwgPSAiU0VMRUNUIENPVU5UKCopIEFTIG90aGVyX2FjY2VzcyAiLgoJCQkJCQkgICAiRlJPTSB7JG9yZGVySXRlbUFjY2Vzc1RhYmxlfSBvaWEgSU5ORVIgSk9JTiB7JG9yZGVySXRlbXNUYWJsZX0gb2kgT04gKG9pYS5vcmRlcl9pdGVtX2lkID0gb2kuaWQpICIuCgkJCQkJCSAgICJJTk5FUiBKT0lOIHskYXBwbGllZEJ1bmRsZXNUYWJsZX0gYWIgT04gKG9pYS5hY2Nlc3NfdHlwZV9pZCA9IGFiLmJ1bmRsZV9pZCkgIi4KCQkJCQkJICAgIldIRVJFIG9pYS5vcmRlcl9pdGVtX2lkICE9ICd7JG9yZGVySXRlbUFjY2Vzc0l0ZW0tPm9yZGVyX2l0ZW1faWR9JyAiLgoJCQkJCQkgICAiQU5EIG9pYS51c2VyX2lkID0gJ3skb3JkZXJJdGVtQWNjZXNzSXRlbS0+dXNlcl9pZH0nICIuCgkJCQkJCSAgICJBTkQgb2lhLmFjY2Vzc190eXBlID0gJ3skb3JkZXJJdGVtQWNjZXNzSXRlbS0+YWNjZXNzX3R5cGV9JyAiLgoJCQkJCQkgICAiQU5EIG9pYS5hY2Nlc3NfdHlwZV9pZCA9ICd7JG9yZGVySXRlbUFjY2Vzc0l0ZW0tPmFjY2Vzc190eXBlX2lkfSciLgoJCQkJCQkgICAiQU5EIG9pLnN0YXR1cyAhPSAlcyI7CgkJCQkJCgkJCQkJJG90aGVyQWNjZXNzID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHNxbCxNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkpOwoJCQkJCSRvdGhlckFjY2VzcyA9IChpc19udW1lcmljKCRvdGhlckFjY2VzcykgJiYgKCRvdGhlckFjY2VzcyA+IDApKTsKCQkJCX0KCQkJCWVsc2UgaWYgKCRvcmRlckl0ZW1BY2Nlc3NJdGVtLT5hY2Nlc3NfdHlwZSA9PSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQKQoJCQkJewoJCQkJCSRzcWwgPSAgIlNFTEVDVCBDT1VOVCgqKSBBUyBvdGhlcl9hY2Nlc3MgIi4KCQkJCQkJICAgCSJGUk9NIHskb3JkZXJJdGVtQWNjZXNzVGFibGV9IG9pYSBJTk5FUiBKT0lOIHskb3JkZXJJdGVtc1RhYmxlfSBvaSBPTiAob2lhLm9yZGVyX2l0ZW1faWQgPSBvaS5pZCkgIi4KCQkJCQkJICAgCSJJTk5FUiBKT0lOIHskdXNlckRhdGFUYWJsZX0gdWQgT04gKG9pYS5hY2Nlc3NfdHlwZV9pZCA9IHVkLm1lbWJlcnNoaXBfbGV2ZWxfaWQpICIuCgkJCQkJCSAgIAkiV0hFUkUgb2lhLm9yZGVyX2l0ZW1faWQgIT0gJ3skb3JkZXJJdGVtQWNjZXNzSXRlbS0+b3JkZXJfaXRlbV9pZH0nICIuCgkJCQkJCSAgIAkiQU5EIG9pYS51c2VyX2lkID0gJ3skb3JkZXJJdGVtQWNjZXNzSXRlbS0+dXNlcl9pZH0nICIuCgkJCQkJCSAgIAkiQU5EIG9pYS5hY2Nlc3NfdHlwZSA9ICd7JG9yZGVySXRlbUFjY2Vzc0l0ZW0tPmFjY2Vzc190eXBlfScgIi4KCQkJCQkJICAgCSJBTkQgb2lhLmFjY2Vzc190eXBlX2lkID0gJ3skb3JkZXJJdGVtQWNjZXNzSXRlbS0+YWNjZXNzX3R5cGVfaWR9JyIuCgkJCQkJCQkiQU5EIG9pLnN0YXR1cyAhPSAlcyI7CgkJCQkJCgkJCQkJJG90aGVyQWNjZXNzID0gJHdwZGItPmdldF92YXIoJHdwZGItPnByZXBhcmUoJHNxbCxNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NBTkNFTExFRCkpOwoJCQkJCSRvdGhlckFjY2VzcyA9IChpc19udW1lcmljKCRvdGhlckFjY2VzcykgJiYgKCRvdGhlckFjY2VzcyA+IDApKTsKCQkJCX0KCQkJCQoJCQkJaWYgKCEkb3RoZXJBY2Nlc3MpCgkJCQl7CgkJCQkJLy8gcmVtb3ZlIGFjY2VzcyBiYXNlZCBvbiB0aGUgYWNjZXNzIHR5cGUKCQkJCQlzd2l0Y2goJG9yZGVySXRlbUFjY2Vzc0l0ZW0tPmFjY2Vzc190eXBlKQoJCQkJCXsKCQkJCQkJY2FzZSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQOgoJCQkJCQkJLy8gb25seSB1cGRhdGUgaWYgbWVtYmVyc2hpcCBsZXZlbCBtYXRjaGVzIGFuZCBzdGF0dXMgaXMgZGlmZmVyZW50CgkJCQkJCQlpZigoJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpID09ICRvcmRlckl0ZW1BY2Nlc3NJdGVtLT5hY2Nlc3NfdHlwZV9pZCkgJiYgKCR1c2VyLT5nZXRTdGF0dXMoKSAhPSAkbmV3U3RhdHVzKSkKCQkJCQkJCXsKCQkJCQkJCQkkdXNlci0+c2V0U3RhdHVzKCRuZXdTdGF0dXMpOwoJCQkJCQkJCQoJCQkJCQkJCWlmKCFpc19udWxsKCRjYW5jZWxsYXRpb25EYXRlKSkKCQkJCQkJCQl7CgkJCQkJCQkJCS8vIHNldCB0aGUgY2FuY2VsbGF0aW9uIGRhdGUgZm9yIHRoZSBtZW1iZXJzaGlwIGxldmVsIGFuZAoJCQkJCQkJCQkvLyBzZXQgdGhlIHBlbmRpbmcgc3RhdHVzIHZhbHVlCgkJCQkJCQkJCSR1c2VyLT5zZXRTdGF0dXMoTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04pOwoJCQkJCQkJCQkkdXNlci0+c2V0Q2FuY2VsbGF0aW9uRGF0ZSgkY2FuY2VsbGF0aW9uRGF0ZSk7CgkJCQkJCQkJCSR1c2VyLT5zZXRQZW5kaW5nU3RhdHVzKCRuZXdTdGF0dXMpOwoJCQkJCQkJCX0KCQkJCQkJCQkKCQkJCQkJCQkkcmVzID0gJHVzZXItPmNvbW1pdERhdGEoKTsKCQkJCQkJCQoJCQkJCQkJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRyZXMpKQoJCQkJCQkJCXsKCQkJCQkJCQkJcmV0dXJuICRyZXM7CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQkJYnJlYWs7CgkJCQkJCQkKCQkJCQkJY2FzZSBNTV9PcmRlckl0ZW1BY2Nlc3M6OiRBQ0NFU1NfVFlQRV9CVU5ETEU6CgkJCQkJCQlpZiAoISRvdGhlckFjY2VzcykKCQkJCQkJCXsKCQkJCQkJCQlpZighaXNfbnVsbCgkY2FuY2VsbGF0aW9uRGF0ZSkpCgkJCQkJCQkJewoJCQkJCQkJCQkvLyBzZXQgdGhlIGNhbmNlbGxhdGlvbiBkYXRlIGZvciB0aGUgYXBwbGllZCBidW5kbGUgYW5kCgkJCQkJCQkJCS8vIHNldCB0aGUgcGVuZGluZyBzdGF0dXMgdmFsdWUKCQkJCQkJCQkJJGFwcGxpZWRCdW5kbGUgPSBNTV9BcHBsaWVkQnVuZGxlOjpnZXRBcHBsaWVkQnVuZGxlKCR1c2VyLT5nZXRJZCgpLCAkb3JkZXJJdGVtQWNjZXNzSXRlbS0+YWNjZXNzX3R5cGVfaWQpOwoJCQkJCQkJCQoJCQkJCQkJCQlpZigkYXBwbGllZEJ1bmRsZS0+aXNWYWxpZCgpKQoJCQkJCQkJCQl7CgkJCQkJCQkJCQkkYXBwbGllZEJ1bmRsZS0+c2V0Q2FuY2VsbGF0aW9uRGF0ZSgkY2FuY2VsbGF0aW9uRGF0ZSk7CQoJCQkJCQkJCQkJJGFwcGxpZWRCdW5kbGUtPnNldFBlbmRpbmdTdGF0dXMoJG5ld1N0YXR1cyk7CgkJCQkJCQkJCQkkcmVzdWx0ID0gJGFwcGxpZWRCdW5kbGUtPmNvbW1pdERhdGEoKTsKCQkJCQkJCQkJCQkKCQkJCQkJCQkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCQkJCQkJCQl7CgkJCQkJCQkJCQkJJG5ld1N0YXR1cyA9IE1NX1N0YXR1czo6JFBFTkRJTkdfQ0FOQ0VMTEFUSU9OOwoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJCQoJCQkJCQkJCSR1c2VyLT5yZW1vdmVCdW5kbGUoJG9yZGVySXRlbUFjY2Vzc0l0ZW0tPmFjY2Vzc190eXBlX2lkLCAkbmV3U3RhdHVzKTsKCQkJCQkJCX0KCQkJCQkJCWJyZWFrOwoJCQkJCQkJCgkJCQkJCWRlZmF1bHQ6CgkJCQkJCQljb250aW51ZTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJLy8gdW5hYmxlIHRvIGxvY2F0ZSBhY2Nlc3MgYXNzb2NpYXRlZCB3aXRoIG9yZGVyIGl0ZW0gLyB1c2VyIGNvbWJpbmF0aW9uLiBqdXN0IHJldHVybgoJCQkvLyBzdWNjZXNzIGFzIHRlY2huaWNhbGx5IHRoZSBmdW5jdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseSBpbiB0aGF0IGFueSBhc3NvY2lhdGVkIAoJCQkvLyBhY2Nlc3MgaGFzIGJlZW4gcmVtb3ZlZAoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJfQoJCQoJCS8vaWYgZXhlY3V0aW9uIGdldHMgaGVyZSwgZXZlcnl0aGluZyBpcyBwcm9iYWJseSBvawoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvciBjaGFuZ2luZyBhIHVzZXIncyBtZW1iZXJzaGlwIHN0YXR1cy4gVGhpcyBtZXRob2QgYWxzbyBjYWxscyAKCSAqIE1NX1BheW1lbnRVdGlsczo6Y2FuY2VsU3Vic2NyaXB0aW9uIHRvIGNhbmNlbCBhbnkgcmVjdXJyaW5nIGJpbGxpbmcuCgkgKiAKCSAqIEBwYXJhbSBNTV9Vc2VyICR1c2VyIFRoZSB1c2VyIHRvIGNoYW5nZSB0aGUgbWVtYmVyc2hpcCBzdGF0dXMgb2YKCSAqIEBwYXJhbSBOdW1iZXIgJG5ld1N0YXR1cyBUaGUgSUQgb2YgdGhlIHN0YXR1cyB0byBjaGFuZ2UgdGhlIG1lbWJlcnNoaXAgc3RhdHVzIHRvCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwgb3IgZW5jb3VudGVyZWQgYW4gZXJyb3IKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwU3RhdHVzKE1NX1VzZXIgJHVzZXIsICRuZXdTdGF0dXMpCgl7CSAgCgkJaWYoIWVtcHR5KCRuZXdTdGF0dXMpKQoJCXsKCQkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQkJewoJCQkJaWYoJHVzZXItPmdldFN0YXR1cygpICE9ICRuZXdTdGF0dXMpCgkJCQl7CgkJCQkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgpOwoJCQkJCQoJCQkJCS8vIGlmIGNoYW5naW5nIHRvIHBhdXNlZC9jYW5jZWxlZCBzdGF0dXMsIGNhbmNlbCBzdWJzY3JpcHRpb24KCQkJCQlpZigkbmV3U3RhdHVzID09IE1NX1N0YXR1czo6JENBTkNFTEVEIHx8ICRuZXdTdGF0dXMgPT0gTU1fU3RhdHVzOjokUEFVU0VEKQoJCQkJCXsKCQkJCQkJJHJlc3VsdCA9IE1NX1BheW1lbnRVdGlsczo6Y2FuY2VsU3Vic2NyaXB0aW9uKCR1c2VyLCAkdXNlci0+Z2V0TWVtYmVyc2hpcExldmVsKCkpOwoJCQkJCQkKCQkJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJCQkJeyAKCQkJCQkJCSRjYW5jZWxDaGVja2VkID0gTU1fT3B0aW9uVXRpbHM6OmdldE9wdGlvbihNTV9PcHRpb25VdGlsczo6JE9QVElPTl9LRVlfREZMVF9DQU5DRUxMQVRJT05fTUVUSE9EKTsgCgkJCQkJCQlpZigkbmV3U3RhdHVzID09IE1NX1N0YXR1czo6JENBTkNFTEVEICYmICRjYW5jZWxDaGVja2VkID09IE1NX0NhbmNlbGxhdGlvbk1ldGhvZDo6JENBTkNFTF9QQVVTRSkKCQkJCQkJCXsgCgkJCQkJCQkJJHVzZXItPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRQQVVTRUQpOwoJCQkJCQkJfQoJCQkJCQkJZWxzZQoJCQkJCQkJeyAKCQkJCQkJCQkkdXNlci0+c2V0U3RhdHVzKCRuZXdTdGF0dXMpOwoJCQkJCQkJfSAKCQkJCQkJCQoJCQkJCQkJJGNhbmNlbGVkT3JkZXJJdGVtcyA9ICRyZXN1bHQtPmdldERhdGEoIm9yZGVySXRlbXMiKTsKCQkJCQkJCgkJCQkJCQkvLyBpZiBhdHRlbXB0aW5nIHRvIGNhbmNlbC9wYXVzZSwgZGV0ZXJtaW5lIGlmIGNhbmNlbGxhdGlvbiBzaG91bGQgYmUgcGVuZGluZwoJCQkJCQkJaWYoKCRuZXdTdGF0dXMgPT0gTU1fU3RhdHVzOjokQ0FOQ0VMRUQgfHwgJG5ld1N0YXR1cyA9PSBNTV9TdGF0dXM6OiRQQVVTRUQpCgkJCQkJCQkmJiBpc19hcnJheSgkY2FuY2VsZWRPcmRlckl0ZW1zKSAmJiBjb3VudCgkY2FuY2VsZWRPcmRlckl0ZW1zKSA+IDApCgkJCQkJCQl7CgkJCQkJCQkJLy8gZ2V0IHRoZSBmaXJzdCBvcmRlciBpdGVtIHdob3NlIHN1YnNjcmlwdGlvbiB3YXMganVzdCBjYW5jZWxlZAoJCQkJCQkJCSRvcmRlckl0ZW0gPSBNTV9PcmRlckl0ZW06OmNyZWF0ZSgkY2FuY2VsZWRPcmRlckl0ZW1zWzBdKTsKCQkJCQkJCQkJCgkJCQkJCQkJJGNhbmNlbGxhdGlvbkRhdGUgPSBNTV9BY2Nlc3NDb250cm9sRW5naW5lOjpnZXRDYW5jZWxsYXRpb25EYXRlQnlPcmRlckl0ZW0oJG9yZGVySXRlbSk7CgkJCQkJCQoJCQkJCQkJCWlmKCFpc19udWxsKCRjYW5jZWxsYXRpb25EYXRlKSkKCQkJCQkJCQl7CgkJCQkJCQkJCS8vIHNldCB0aGUgY2FuY2VsbGF0aW9uIGRhdGUgZm9yIHRoZSBtZW1iZXJzaGlwIGxldmVsIGFuZAoJCQkJCQkJCQkvLyBzZXQgdGhlIHBlbmRpbmcgc3RhdHVzIHZhbHVlCgkJCQkJCQkJCSR1c2VyLT5zZXRTdGF0dXMoTU1fU3RhdHVzOjokUEVORElOR19DQU5DRUxMQVRJT04pOwoJCQkJCQkJCQkkdXNlci0+c2V0Q2FuY2VsbGF0aW9uRGF0ZSgkY2FuY2VsbGF0aW9uRGF0ZSk7CgkJCQkJCQkJCSR1c2VyLT5zZXRQZW5kaW5nU3RhdHVzKCRuZXdTdGF0dXMpOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCQkKCQkJCQkJCSRyZXN1bHQgPSAkdXNlci0+Y29tbWl0RGF0YSgpOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCQkJCX0KCQkJCQl9CgkJCQkJZWxzZSAKCQkJCQl7CgkJCQkJCSRtZW1iZXJzaGlwID0gJHVzZXItPmdldE1lbWJlcnNoaXBMZXZlbCgpOwoJCQkJCQlpZigkbWVtYmVyc2hpcC0+ZG9lc0V4cGlyZSgpKQoJCQkJCQl7CgkJCQkJCQkvLyB1cGRhdGUgZXhwaXJhdGlvbiBkYXRlCgkJCQkJCQlpZigkdXNlci0+Z2V0U3RhdHVzKCkgPT0gTU1fU3RhdHVzOjokRVhQSVJFRCkKCQkJCQkJCXsKCQkJCQkJCQkkbmV3RXhwaXJhdGlvbkRhdGUgPSAkbWVtYmVyc2hpcC0+Z2V0RXhwaXJhdGlvbkRhdGUoTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCkpOwoJCQkJCQkJCSR1c2VyLT5zZXRFeHBpcmF0aW9uRGF0ZSgkbmV3RXhwaXJhdGlvbkRhdGUpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJCQoJCQkJCQkkdXNlci0+c2V0U3RhdHVzKCRuZXdTdGF0dXMpOwoJCQkJCQkkcmVzdWx0ID0gJHVzZXItPmNvbW1pdERhdGEoKTsKCQkJCQl9CQkKCQkJCX0KCQkJCWVsc2UgCgkJCQl7CgkJCQkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgiTWVtYmVyc2hpcCBzdGF0dXMgaXMgYWxyZWFkeSBzZXQgdG8gJyIuTU1fU3RhdHVzOjpnZXROYW1lKCRuZXdTdGF0dXMpLiInIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCQoJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJNZW1iZXJzaGlwIHN0YXR1cyBmb3IgJyIuJHVzZXItPmdldFVzZXJuYW1lKCkuIicgc3VjY2Vzc2Z1bGx5IGNoYW5nZWQgdG8gJyIuTU1fU3RhdHVzOjpnZXROYW1lKCRuZXdTdGF0dXMpLiInIik7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCQl9CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjaGFuZ2luZyBtZW1iZXJzaGlwIHN0YXR1cy4gSW52YWxpZCBtZW1iZXIgSUQgJyIuJG1lbWJlcklkLiInLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNoYW5naW5nIG1lbWJlcnNoaXAgc3RhdHVzLiBTdGF0dXMgY2Fubm90IGJlIGVtcHR5LiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCgoJLyoKCSAqIFRoaXMgbWV0aG9kIGxvb2tzIGluIGN1cnJlbnQgbWVtYmVyc2hpcCAocHJvdmlkZWQgdGhleSBhcmUgdGhlIHNhbWUpIGFuZCB0aGVuIGFwcGxpZXMgY2FuY2VsYXRpb24gdG8gYW55CgkgKiBleGlzdGluZyBtZW1iZXJzaGlwcyBwcm9kdWN0cyB0aGF0IGV4aXN0IGN1cnJlbnRseS4gIFRoZXJlZm9yIGlmIGEgdXNlciB1cGdyYWRlcyBhIGN1cnJlbnQgbWVtYmVyc2hpcCBmcm9tIG9uZSBwcm9kdWN0CgkgKiB0byBhbm90aGVyLCB3ZSBjYW5jZWwgdGhlIHByZXZpb3VzIGdyYWNlZnVsbHkuCgkgKgoJICogQHBhcmFtIE1NX1VzZXIgJHVzZXIgVGhlIHVzZXIgdG8gbW9kaWZ5IHRoZSBtZW1iZXJzaGlwIHByb2R1Y3Qgb2YKCSAqIEBwYXJhbSBOdW1iZXIgJG5ld01lbWJlcnNoaXBJZCB0aGUgSUQgb2YgdGhlIG1lbWJlcnNoaXAgdG8gY2hhbmdlIHRvCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtIG5ld09yZGVySXRlbSBpcyBhIG9yZGVyIGl0ZW0gb2JqZWN0IGJlaW5nIHB1cmNoYXNlZAoJICoKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwgb3IgZW5jb3VudGVyZWQgYW4gZXJyb3IKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjYW5jZWxQcmV2aW91c1Byb2R1Y3RzRm9yTWVtYmVyc2hpcChNTV9Vc2VyICR1c2VyLCAkbmV3TWVtYmVyc2hpcElkLCBNTV9PcmRlckl0ZW0gJG5ld09yZGVySXRlbSkKCXsgCgkJaWYoJG5ld09yZGVySXRlbS0+Z2V0SXRlbVR5cGUoKSA9PSBNTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCkKCQl7CgkJCWlmKCR1c2VyLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCWlmKCR1c2VyLT5nZXRNZW1iZXJzaGlwSWQoKSA9PSAkbmV3TWVtYmVyc2hpcElkKQoJCQkJewoJCQkJCSRpdGVtcyA9IE1NX09yZGVySXRlbUFjY2Vzczo6Z2V0T3JkZXJJdGVtQnlBY2Nlc3MoJHVzZXItPmdldElkKCksIE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQLCAkdXNlci0+Z2V0TWVtYmVyc2hpcExldmVsKCktPmdldElkKCkpOwoJCQkJCQkKCQkJCQlmb3JlYWNoKCRpdGVtcyBhcyAkb3JkZXJJdGVtQWNjZXNzKQoJCQkJCXsKCQkJCQkJaWYoJG9yZGVySXRlbUFjY2Vzcy0+aXNWYWxpZCgpKQoJCQkJCQl7CgkJCQkJCQkkZXhpc3RpbmdPcmRlckl0ZW0gPSBuZXcgTU1fT3JkZXJJdGVtKCRvcmRlckl0ZW1BY2Nlc3MtPmdldE9yZGVySXRlbUlkKCkpOwoJCQkJCQkJCQoJCQkJCQkJaWYoJGV4aXN0aW5nT3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJCQkJCQl7CgkJCQkJCQkJaWYoJGV4aXN0aW5nT3JkZXJJdGVtLT5nZXRJdGVtVHlwZSgpPT1NTV9PcmRlckl0ZW06OiRPUkRFUl9JVEVNX1RZUEVfUFJPRFVDVCkKCQkJCQkJCQl7IAoJCQkJCQkJCQlpZigkZXhpc3RpbmdPcmRlckl0ZW0tPmlzUmVjdXJyaW5nKCkpCgkJCQkJCQkJCXsKCQkJCQkJCQkJCWlmKCRuZXdPcmRlckl0ZW0tPmdldElkKCkhPSRleGlzdGluZ09yZGVySXRlbS0+Z2V0SWQoKSkKCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkkcmVzcG9uc2UgPSBNTV9QYXltZW50VXRpbHM6OmNhbmNlbFN1YnNjcmlwdGlvbkZvck9yZGVySXRlbSgkZXhpc3RpbmdPcmRlckl0ZW0pOwoKCQkJCQkJCQkJCQlpZigkcmVzcG9uc2UtPnR5cGUgIT0gTU1fUmVzcG9uc2U6OiRTVUNDRVNTKQoJCQkJCQkJCQkJCXsKCQkJCQkJCQkJCQkJcmV0dXJuICRyZXNwb25zZTsKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfSAKCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvciBjaGFuZ2luZyBhIHVzZXIncyBtZW1iZXJzaGlwLiBUaGlzIG1ldGhvZCBhbHNvIGNhbGxzIAoJICogTU1fUGF5bWVudFV0aWxzOjpjYW5jZWxTdWJzY3JpcHRpb24gdG8gY2FuY2VsIGFueSBhY3RpdmUgcmVjdXJyaW5nIGJpbGxpbmcgb24gdGhlIHByZXZpb3VzIAoJICogbWVtYmVyc2hpcC4gCgkgKiAKCSAqIEBwYXJhbSBNTV9Vc2VyICR1c2VyIFRoZSB1c2VyIHRvIGNoYW5nZSB0aGUgbWVtYmVyc2hpcCBvZgoJICogQHBhcmFtIE51bWJlciAkbmV3TWVtYmVyc2hpcElkIHRoZSBJRCBvZiB0aGUgbWVtYmVyc2hpcCB0byBjaGFuZ2UgdG8KCSAqIEBwYXJhbSBib29sZWFuICRpZ25vcmVQYXltZW50U2VydmljZUVycm9ycyBXaGV0aGVyIHRvIGNvbnRpbnVlIG9yIG5vdCBpZiB0aGUgcGF5bWVudCBzZXJ2aWNlIHJldHVybnMgYW4gZXJyb3IgKGllLiBpZiB0aGUgc3Vic2NyaXB0aW9uIGlzIGFscmVhZHkgY2FuY2VsZWQgcmVtb3RlbHkpCgkgKiAKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBvcGVyYXRpb24gd2FzIHN1Y2Nlc3NmdWwgb3IgZW5jb3VudGVyZWQgYW4gZXJyb3IKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjaGFuZ2VNZW1iZXJzaGlwKE1NX1VzZXIgJHVzZXIsICRuZXdNZW1iZXJzaGlwSWQsICRpZ25vcmVQYXltZW50U2VydmljZUVycm9ycz1mYWxzZSkKCXsJCgkJaWYoJHVzZXItPmlzVmFsaWQoKSkKCQl7CgkJCSRuZXdNZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkbmV3TWVtYmVyc2hpcElkKTsKCQkJCgkJCWlmKCEkbmV3TWVtYmVyc2hpcC0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciBjaGFuZ2luZyBtZW1iZXJzaGlwLiBJbnZhbGlkIG1lbWJlcnNoaXAgSUQgJyIuJG5ld01lbWJlcnNoaXBJZC4iJy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQoJCQlpZigkdXNlci0+Z2V0TWVtYmVyc2hpcElkKCkgIT0gJG5ld01lbWJlcnNoaXBJZCkKCQkJewoJCQkJLy8gY2FuY2VsIHN1YnNjcmlwdGlvbiByZWxhdGVkIHRvIGN1cnJlbnQgbWVtYmVyc2hpcAoJCQkJJHJlc3VsdCA9IE1NX1BheW1lbnRVdGlsczo6Y2FuY2VsU3Vic2NyaXB0aW9uKCR1c2VyLCAkdXNlci0+Z2V0TWVtYmVyc2hpcExldmVsKCkpOwoJCQkJCQoJCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSB8fCAkaWdub3JlUGF5bWVudFNlcnZpY2VFcnJvcnMpCgkJCQl7CgkJCQkJJHVzZXItPnNldE1lbWJlcnNoaXBJZCgkbmV3TWVtYmVyc2hpcC0+Z2V0SWQoKSk7CgkJCQkJJHVzZXItPnNldFN0YXR1cyhNTV9TdGF0dXM6OiRBQ1RJVkUpOwoJCQkJCQoJCQkJCWlmKCRuZXdNZW1iZXJzaGlwLT5kb2VzRXhwaXJlKCkpCgkJCQkJewoJCQkJCQkvLyBzZXQgZXhwaXJhdGlvbiBkYXRlCgkJCQkJCSRleHBpcmF0aW9uRGF0ZSA9ICRuZXdNZW1iZXJzaGlwLT5nZXRFeHBpcmF0aW9uRGF0ZShNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSk7CQoJCQkJCQkkdXNlci0+c2V0RXhwaXJhdGlvbkRhdGUoJGV4cGlyYXRpb25EYXRlKTsKCQkJCQl9CgoJCQkJCSR1c2VyLT51cGRhdGVXUFVzZXJSb2xlKCk7CgkJCQkJJHJlc3VsdCA9ICR1c2VyLT5jb21taXREYXRhKCk7CgkJCQl9CgkJCQllbHNlCgkJCQl7CgkJCQkJJHJlc3VsdC0+YWRkRGF0YSgicGF5bWVudF9zZXJ2aWNlX2NhbmNlbF9mYWlsZWQiLCJ0cnVlIik7IC8vYWRkIGluZGljYXRvciB0byByZXN1bHQgdG8gbGV0IHRoZSBmcm9udC1lbmQga25vdyB0aGF0IHRoZSBvcGVyYXRpb24gZmFpbGVkIGR1ZSB0byBhIHBheW1lbnQgc2VydmljZSBlcnJvciBkdXJpbmcgY2FuY2VsbGF0aW9uCgkJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCQl9CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJHJlc3VsdCA9IG5ldyBNTV9SZXNwb25zZSgiTWVtYmVyc2hpcCBpcyBhbHJlYWR5IHNldCB0byAnIi4kbmV3TWVtYmVyc2hpcC0+Z2V0TmFtZSgpLiInIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkKCQkJaWYoTU1fUmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0KSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiTWVtYmVyc2hpcCBmb3IgJyIuJHVzZXItPmdldFVzZXJuYW1lKCkuIicgc3VjY2Vzc2Z1bGx5IGNoYW5nZWQgdG8gJyIuJG5ld01lbWJlcnNoaXAtPmdldE5hbWUoKS4iJyIpOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJcmV0dXJuICRyZXN1bHQ7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2hhbmdpbmcgbWVtYmVyc2hpcC4gSW52YWxpZCBtZW1iZXIgSUQgJyIuJG1lbWJlcklkLiInLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRoaXMgbWV0aG9kIGlzIHJlc3BvbnNpYmxlIGZvciBjaGFuZ2luZyB0aGUgc3RhdHVzIG9mIGEgYnVuZGxlIG9uIGEgbWVtYmVyJ3MgYWNjb3VudC4KCSAqCgkgKiBAcGFyYW0gTU1fVXNlciAkdXNlciBUaGUgdXNlciB0byBjaGFuZ2UgdGhlIGJ1bmRsZSBzdGF0dXMgb24KCSAqIEBwYXJhbSBNTV9CdW5kbGUgJGJ1bmRsZSBUaGUgYnVuZGxlIHRvIGNoYW5nZSB0aGUgc3RhdHVzIG9mCgkgKiBAcGFyYW0gTnVtYmVyICRuZXdTdGF0dXMgVGhlIElEIG9mIHRoZSBzdGF0dXMgdG8gY2hhbmdlIHRoZSBidW5kbGUgc3RhdHVzIHRvCgkgKgoJICogQHJldHVybiBNTV9SZXNwb25zZSBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIG9wZXJhdGlvbiB3YXMgc3VjY2Vzc2Z1bCBvciBlbmNvdW50ZXJlZCBhbiBlcnJvcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNoYW5nZUJ1bmRsZVN0YXR1cyhNTV9Vc2VyICR1c2VyLCBNTV9CdW5kbGUgJGJ1bmRsZSwgJG5ld1N0YXR1cykKCXsKCQlpZighZW1wdHkoJG5ld1N0YXR1cykpCgkJewoJCQlpZigkdXNlci0+aXNWYWxpZCgpICYmICRidW5kbGUtPmlzVmFsaWQoKSkKCQkJewoJCQkJaWYoJG5ld1N0YXR1cyA9PSBNTV9TdGF0dXM6OiRBQ1RJVkUpCgkJCQl7CgkJCQkJLy8gY2hlY2sgaWYgdXNlciBhbHJlYWR5IGhhcyB0aGUgcmVxdWVzdGVkIGJ1bmRsZQoJCQkJCSRhcHBsaWVkQnVuZGxlID0gTU1fQXBwbGllZEJ1bmRsZTo6Z2V0QXBwbGllZEJ1bmRsZSgkdXNlci0+Z2V0SWQoKSwgJGJ1bmRsZS0+Z2V0SWQoKSk7CgkJCQkKCQkJCQlpZigkYXBwbGllZEJ1bmRsZS0+aXNWYWxpZCgpICYmICRhcHBsaWVkQnVuZGxlLT5nZXRTdGF0dXMoKSA9PSBNTV9TdGF0dXM6OiRBQ1RJVkUpCgkJCQkJewoJCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJUaGlzIG1lbWJlciBhbHJlYWR5IGhhcyB0aGUgJyIuJGJ1bmRsZS0+Z2V0TmFtZSgpLiInIGJ1bmRsZSBhcHBsaWVkIHRvIHRoZWlyIGFjY291bnQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQkJfQoJCQkJCgkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OmFzc2lnbkJ1bmRsZVRvVXNlcigkdXNlciwgJGJ1bmRsZSk7CgkJCQkKCQkJCQkvLyBjYW5jZWwgc3Vic2NyaXB0aW9ucyBmb3Igb3RoZXIgYnVuZGxlcyBpbiB0aGUgc2FtZSBidW5kbGUgZ3JvdXAKCQkJCQkKCQkJCQlpZihNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXN1bHQpKQoJCQkJCXsKCQkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiJ3skYnVuZGxlLT5nZXROYW1lKCl9JyBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgYWN0aXZhdGVkIik7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCXJldHVybiAkcmVzdWx0OwoJCQkJCX0KCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQlpZigkbmV3U3RhdHVzID09IE1NX1N0YXR1czo6JFBBVVNFRCB8fCAkbmV3U3RhdHVzID09IE1NX1N0YXR1czo6JENBTkNFTEVEKQoJCQkJCXsKCQkJCQkJJHJlc3VsdCA9IE1NX0FjY2Vzc0NvbnRyb2xFbmdpbmU6OnJlbW92ZUJ1bmRsZUZyb21Vc2VyKCR1c2VyLCAkYnVuZGxlLCAkbmV3U3RhdHVzKTsKCQkJCQl9CgkJCQkJZWxzZQoJCQkJCXsKCQkJCQkJJGFwcGxpZWRCdW5kbGUgPSBNTV9BcHBsaWVkQnVuZGxlOjpnZXRBcHBsaWVkQnVuZGxlKCR1c2VyLT5nZXRJZCgpLCAkYnVuZGxlLT5nZXRJZCgpKTsKCQkJCQkJJGFwcGxpZWRCdW5kbGUtPnNldFN0YXR1cygkbmV3U3RhdHVzKTsKCQkJCQkJJHJlc3VsdCA9ICRhcHBsaWVkQnVuZGxlLT5jb21taXREYXRhKCk7CgkJCQkJfQoJCQkJCQoJCQkJCWlmKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3VsdCkpCgkJCQkJewoJCQkJCQlpZighZW1wdHkoJG5ld1N0YXR1cykpCgkJCQkJCXsKCQkJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIid7JGJ1bmRsZS0+Z2V0TmFtZSgpfScgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGNoYW5nZWQgdG8gIi5NTV9TdGF0dXM6OmdldE5hbWUoJG5ld1N0YXR1cywgdHJ1ZSkpOwoJCQkJCQl9CgkJCQkJCWVsc2UKCQkJCQkJewoJCQkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiJ3skYnVuZGxlLT5nZXROYW1lKCl9JyBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcmVtb3ZlZCIpOwoJCQkJCQl9CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7CgkJCQkJCXJldHVybiAkcmVzdWx0OwoJCQkJCX0KCQkJCX0KCQkJfQoJCQllbHNlCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIGNoYW5naW5nIGJ1bmRsZSBzdGF0dXMuIEludmFsaWQgbWVtYmVyIG9yIGJ1bmRsZSBwYXNzZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY2hhbmdpbmcgYnVuZGxlIHN0YXR1cy4gU3RhdHVzIGNhbm5vdCBiZSBlbXB0eS4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCS8qKgoJICogVGhpcyBtZXRob2QgaXMgcmVzcG9uc2libGUgZm9yIGRldGVybWluaW5nIHRoZSBhcHByb3ByaWF0ZSBwZW5kaW5nIGNhbmNlbGxhdGlvbiBkYXRlIGZvciB0aGUgb3JkZXIgaXRlbSBwYXNzZWQuCgkgKgoJICogQHBhcmFtIE1NX09yZGVySXRlbSAkb3JkZXJJdGVtIFRoZSBvcmRlciBpdGVtIHRvIGRldGVybWluZSB0aGUgcGVuZGluZyBjYW5jZWxsYXRpb24gZGF0ZSBmb3IKCSAqCgkgKiBAcmV0dXJuIERhdGUgYSBkYXRlIG9iamVjdCB3aXRoIHRoZSBwZW5kaW5nIGNhbmNlbGxhdGlvbiBkYXRlLiBudWxsIGlmIGEgZGF0ZSBjb3VsZG4ndCBiZSBjYWxjdWxhdGVkCgkgKi8KCXByb3RlY3RlZCBzdGF0aWMgZnVuY3Rpb24gZ2V0Q2FuY2VsbGF0aW9uRGF0ZUJ5T3JkZXJJdGVtKE1NX09yZGVySXRlbSAkb3JkZXJJdGVtKQoJewoJCSRjYW5jZWxsYXRpb25EYXRlID0gbnVsbDsKCQkKCQlpZigkb3JkZXJJdGVtLT5pc1ZhbGlkKCkpCgkJewoJCQlnbG9iYWwgJHdwZGI7CgkJCgkJCS8vbm9uLXJlY3VycmluZyBpdGVtcyBzaG91bGQgbmV2ZXIgaGF2ZSB0aGlzIG1ldGhvZCBjYWxsZWQsIGJ1dCBpZiBpdCBpcyBldmVyIGNhbGxlZCBpbiB0aGUgZnV0dXJlLCBjYW5jZWxsYXRpb24gd2lsbCBiZSBpbW1lZGlhdGUKCQkJaWYgKCEkb3JkZXJJdGVtLT5pc1JlY3VycmluZygpKQoJCQl7CgkJCQlyZXR1cm4gbnVsbDsKCQkJfQoJCQkKCQkJLy8gcmV0cmlldmUgdGhlIGxhc3QgcGF5bWVudCBhc3NvY2lhdGVkIHdpdGggdGhlIG9yZGVyIGl0ZW0KCQkJJHRyYW5zYWN0aW9uTG9va3VwU1FMID0gIlNFTEVDVCBNSU4odHJhbnNhY3Rpb25fZGF0ZSkgQVMgZmlyc3RfdHJhbnNhY3Rpb25fZGF0ZSwgTUFYKHRyYW5zYWN0aW9uX2RhdGUpIEFTIGxhc3RfdHJhbnNhY3Rpb25fZGF0ZSAiLgoJCQkJCQkJCSAgICAiRlJPTSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4gIiBXSEVSRSBvcmRlcl9pdGVtX2lkPSVzIEFORCAoKHRyYW5zYWN0aW9uX3R5cGU9JyIuTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQuIicpIE9SICh0cmFuc2FjdGlvbl90eXBlPSciLgoJCQkJCQkJCQkgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULiInKSkiOwoJCQkkdHJhbnNhY3Rpb25Mb29rdXBTUUwgPSAkd3BkYi0+cHJlcGFyZSgkdHJhbnNhY3Rpb25Mb29rdXBTUUwsJG9yZGVySXRlbS0+Z2V0SWQoKSk7CgkJCSRweW10SW5mbyA9ICR3cGRiLT5nZXRfcm93KCR0cmFuc2FjdGlvbkxvb2t1cFNRTCk7CgkJCQkKCQkJaWYgKCRvcmRlckl0ZW0tPmhhc1RyaWFsUGVyaW9kKCkgJiYgKCRvcmRlckl0ZW0tPmdldFRyaWFsQW1vdW50KCkgPT0gMC4wMCkgJiYgKCRweW10SW5mby0+bGFzdF90cmFuc2FjdGlvbl9kYXRlID09IG51bGwpKQoJCQl7CgkJCQkvL2lmIHRoZSBjdXN0b21lciBpcyBpbiBhIGZyZWUgdHJpYWwgcGVyaW9kIGFuZCBubyBwYXltZW50cyBoYXZlIGJlZW4gcmVjZWl2ZWQsIHRoZSBjYW5jZWxsYXRpb24gZGF0ZSBpcyB0aGUgZW5kIG9mIHRoZSB0cmlhbCBwZXJpb2QKCQkJCSRvcmRlckRhdGUgPSAkd3BkYi0+Z2V0X3ZhcigiU0VMRUNUIGRhdGVfYWRkZWQgRlJPTSAiLk1NX1RBQkxFX09SREVSUy4iIFdIRVJFIGlkPSd7JG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpfSciKTsKCQkJCWlmICgkb3JkZXJEYXRlID09IG51bGwpCgkJCQl7CgkJCQkJcmV0dXJuIG51bGw7CgkJCQl9CgkJCQkkbm93ID0gTU1fVXRpbHM6OmdldEN1cnJlbnRUaW1lKCJ0aW1lc3RhbXAiKTsKCQkJCSRwZXJpb2QgPSAkb3JkZXJJdGVtLT5nZXRUcmlhbER1cmF0aW9uKCk7CgkJCQkkZnJlcXVlbmN5ID0gJG9yZGVySXRlbS0+Z2V0VHJpYWxGcmVxdWVuY3koKTsKCQkJCSR0cmlhbEVuZHMgPSBzdHJ0b3RpbWUoIit7JHBlcmlvZH0geyRmcmVxdWVuY3l9IixzdHJ0b3RpbWUoJG9yZGVyRGF0ZSkpOwoJCQkJaWYgKCRub3cgPCAkdHJpYWxFbmRzKQoJCQkJewoJCQkJCXJldHVybiBEYXRlKCJZLW0tZCBIOmk6cyIsICR0cmlhbEVuZHMpOwoJCQkJfQoJCQl9CgkJCQoJCQkvL0Zyb20gdGhpcyBwb2ludCBmb3J3YXJkLCB3ZSBuZWVkIGEgcGF5bWVudCB0byBoYXZlIGJlZW4gbWFkZSB0byBjYWxjdWxhdGUgYSBjYW5jZWxsYXRpb24gZGF0ZQoJCQlpZiAoJHB5bXRJbmZvLT5sYXN0X3RyYW5zYWN0aW9uX2RhdGUgPT0gbnVsbCkKCQkJewoJCQkJcmV0dXJuIG51bGw7CgkJCX0KCQkJCgkJCS8vdGhpcyBjb3ZlcnMgb3JkZXJzIHdpdGhvdXQgdHJpYWxzLCBwYWlkIHRyaWFscywgYW5kIGZyZWUgdHJpYWxzIHdoZXJlIGF0IGxlYXN0IG9uZSB0cmFuc2FjdGlvbiBoYXMgYmVlbiByZWNvcmRlZAoJCQkkaW5UcmlhbFBlcmlvZCA9IGZhbHNlOwoJCQlpZiAoJG9yZGVySXRlbS0+aGFzVHJpYWxQZXJpb2QoKSkgIAoJCQl7CgkJCQkkbGFzdFRyYW5zYWN0aW9uVFMgPSBzdHJ0b3RpbWUoJHB5bXRJbmZvLT5sYXN0X3RyYW5zYWN0aW9uX2RhdGUpOwoJCQkJJGZpcnN0VHJhbnNhY3Rpb25UUyA9IHN0cnRvdGltZSgkcHltdEluZm8tPmZpcnN0X3RyYW5zYWN0aW9uX2RhdGUpOwoJCQkJJHRyaWFsRW5kc1RTID0gc3RydG90aW1lKCJ7JHB5bXRJbmZvLT5maXJzdF90cmFuc2FjdGlvbl9kYXRlfSArIHskb3JkZXJJdGVtLT5nZXRUcmlhbER1cmF0aW9uKCl9IHskb3JkZXJJdGVtLT5nZXRUcmlhbEZyZXF1ZW5jeSgpfSIpOwoJCQkJJGN1cnJlbnRUUyA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgidGltZXN0YW1wIik7CgkJCQlpZiAoKCRmaXJzdFRyYW5zYWN0aW9uVFMgPT0gJGxhc3RUcmFuc2FjdGlvblRTKSAmJiAoJGN1cnJlbnRUUyA8ICR0cmlhbEVuZHNUUykpIC8vYXNzdW1lIG11bHRpcGxlIHBheW1lbnRzIG1lYW5zIHRoZSB0cmlhbCBpcyBvdmVyIAoJCQkJewoJCQkJCSRpblRyaWFsUGVyaW9kID0gdHJ1ZTsKCQkJCQkkbGFzdFB5bXREYXRlID0gJHB5bXRJbmZvLT5sYXN0X3RyYW5zYWN0aW9uX2RhdGU7CgkJCQkJJHBlcmlvZCA9ICRvcmRlckl0ZW0tPmdldFRyaWFsRHVyYXRpb24oKTsKCQkJCQkkZnJlcXVlbmN5ID0gJG9yZGVySXRlbS0+Z2V0VHJpYWxGcmVxdWVuY3koKTsKCQkJCX0KCQkJfQoJCQkKCQkJaWYgKCEkaW5UcmlhbFBlcmlvZCkKCQkJewoJCQkJJGxhc3RQeW10RGF0ZSA9ICRweW10SW5mby0+bGFzdF90cmFuc2FjdGlvbl9kYXRlOwoJCQkJJHBlcmlvZCA9ICRvcmRlckl0ZW0tPmdldFJlYmlsbFBlcmlvZCgpOyAvLyBpLmUuIDEsIDE0CgkJCQkkZnJlcXVlbmN5ID0gJG9yZGVySXRlbS0+Z2V0UmViaWxsRnJlcXVlbmN5KCk7IC8vIGkuZS4gZGF5cywgd2Vla3MsIG1vbnRocwoJCQl9CgkJCQkKCQkJJGNhbmNlbGxhdGlvbkRhdGUgPSBEYXRlKCJZLW0tZCBIOmk6cyIsIHN0cnRvdGltZSgieyRsYXN0UHltdERhdGV9ICsgeyRwZXJpb2R9IHskZnJlcXVlbmN5fSIpKTsKCQkJCgkJfQoJCQoJCXJldHVybiAkY2FuY2VsbGF0aW9uRGF0ZTsKCX0KfQoK', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(239, 'testpaymentservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fVGVzdFBheW1lbnRTZXJ2aWNlIGlzIGFuIGltcGxlbWVudGF0aW9uIG9mIHRoZSBNTV9QYXltZW50U2VydmljZSBpbnRlcmZhY2UgdGhhdCBzaW11bGF0ZXMgYSBnYXRld2F5CiAqLwoKY2xhc3MgTU1fVGVzdFBheW1lbnRTZXJ2aWNlIGV4dGVuZHMgTU1fU2NoZWR1bGVkUGF5bWVudFNlcnZpY2UKewoJcHJvdGVjdGVkICR0b2tlbiA9ICJURVNUIjsgCgkKCXByb3RlY3RlZCAkbW9kZSA9ICIiOwoJcHJvdGVjdGVkICR0ZXN0UHJvY2Vzc29yT3ZlcnJpZGVLZXkgPSAiIjsKCXByb3RlY3RlZCAkcHJvZHVjdGlvblByb2Nlc3Nvck92ZXJyaWRlS2V5ID0gIiI7CgkKCXB1YmxpYyBzdGF0aWMgJE1PREVfQUxXQVlTX09WRVJSSURFID0gImFsd2F5cy1vdmVycmlkZSI7CglwdWJsaWMgc3RhdGljICRNT0RFX09WRVJSSURFX1dJVEhfS0VZID0gIm92ZXJyaWRlLXdpdGgta2V5IjsKCXB1YmxpYyBzdGF0aWMgJE1PREVfUFJPRFVDVElPTl9PVkVSUklERV9XSVRIX0tFWSA9ICJwcm9kdWN0aW9uLW92ZXJyaWRlLXdpdGgta2V5IjsKCQoJcHVibGljIHN0YXRpYyAkS0VZX1BBWU1FTlRfU0VSVklDRV9PVkVSUklERSA9ICJwYXltZW50LXNlcnZpY2Utb3ZlcnJpZGUiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGF1dG9sb2FkPXRydWUpCgl7CgkJJHRoaXMtPm1vZGUgPSBzZWxmOjokTU9ERV9BTFdBWVNfT1ZFUlJJREU7IC8vZGVmYXVsdAoJCXBhcmVudDo6X19jb25zdHJ1Y3QoJGF1dG9sb2FkKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gbG9hZERlcGVuZGVuY2llcygpIHsgfQoJCglwdWJsaWMgZnVuY3Rpb24gaW5zdGFsbCgpCgl7CgkJcGFyZW50OjppbnN0YWxsKCk7CgkKCQkkc3FsID0gIkNSRUFURSBUQUJMRSAiLk1NX1RBQkxFX1RFU1RfQ0FSRE9ORklMRS4iIChcbiIuCgkJCQkidXNlcl9pZCBiaWdpbnQoMjApIE5PVCBOVUxMLFxuIi4KCQkJCSJsYXN0X2ZvdXIgdmFyY2hhcig0KSxcbiIuCgkJCQkiZXhwaXJhdGlvbl9kYXRlIGRhdGV0aW1lIE5PVCBOVUxMLFxuIi4KCQkJCSJQUklNQVJZIEtFWSAgKHVzZXJfaWQpXG4iLgoJCQkJIik7XG4iOwoJCgkJZGJEZWx0YSgkc3FsKTsKCX0KCQoJCgkvKioKCSAqIGlzU3VwcG9ydGVkQ3VycmVuY3kgb3ZlcnJpZGVzIHRoZSBiYXNlIGNsYXNzIGltcGxlbWVudGF0aW9uLiBBbnkgdmFsaWQgY3VycmVuY3kgaXMgc3VwcG9ydGVkIGJ5IHRoZSB0ZXN0IHByb2Nlc3NvcgoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6aXNTdXBwb3J0ZWRDdXJyZW5jeQoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRjdXJyZW5jeUNvZGUKCSAqIEByZXR1cm4gYm9vbCB0cnVlIGlmIGN1cnJlbmN5IGlzIHN1cHBvcnRlZCwgZmFsc2Ugb3RoZXJ3aXNlCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBpc1N1cHBvcnRlZEN1cnJlbmN5KCRjdXJyZW5jeUNvZGUpIAoJeyAKCQlyZXR1cm4gTU1fQ3VycmVuY3lVdGlsOjppc1N1cHBvcnRlZEN1cnJlbmN5KCRjdXJyZW5jeUNvZGUpOwoJfQoJCgkKCS8qKgoJICogUmVwb3J0IHRoZSBmZWF0dXJlcyB0aGUgU3RyaXBlIHNlcnZpY2Ugc3VwcG9ydHMKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnN1cHBvcnRzRmVhdHVyZSgpCgkgKgoJICogQHBhcmFtIGludGVnZXIgJGZlYXR1cmVDb25zdCBhIGNvbnN0IGFzIGRlZmluZWQgaW4gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlcwoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgc3VwcG9ydGVkLCBmYWxzZSBpZiBub3Qgc3VwcG9ydGVkCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzdXBwb3J0c0ZlYXR1cmUoJGZlYXR1cmVDb25zdCkKCXsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpPTlNJVEVfU0VSVklDRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDQVJEX09OX0ZJTEU7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6Q09VUE9OUzsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpURVNUX01PREU7CgkJJHN1cHBvcnRlZFtdID0gTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6TU9ESUZZX1JFQklMTF9EQVRFOwoJCXJldHVybiBpbl9hcnJheSgkZmVhdHVyZUNvbnN0LCRzdXBwb3J0ZWQsdHJ1ZSk7Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIHRoZSBodG1sIHRoYXQgd2lsbCBiZSB1c2VkIG9uIHRoZSBwYXltZW50IG1ldGhvZCBzZXR0aW5ncyBzY3JlZW4gZm9yIGNvbmZpZ3VyaW5nIFN0cmlwZQoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6ZGlzcGxheUNvbmZpZ09wdGlvbnMoKQoJICogCgkgKiBAcmV0dXJuIFN0cmluZyBjb250YWluaW5nIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZyBodG1sCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgl7CQoJCSRjb25maWdfb3B0aW9ucyA9IE1NX1RFTVBMQVRFOjpnZW5lcmF0ZSgieyR0aGlzLT5nZXRUZW1wbGF0ZURpcigpfS90ZXN0X3NlcnZpY2VfY29uZmlnLmh0bWwucGhwIiwkdGhpcyk7CgkJcmV0dXJuICRjb25maWdfb3B0aW9uczsKCX0KCQoJCgkvKioKCSAqIFZhbGlkYXRlcyBhbmQgY29uZmlndXJlcyB0aGUgb2JqZWN0IHdpdGggdGhlIHNldHRpbmdzIGluZm9ybWF0aW9uIGdlbmVyYXRlZCBieSBzdWJtaXNzaW9uIG9mIHRoZSBjb25maWd1cmF0aW9uIGRpYWxvZwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6cHJvY2Vzc0NvbmZpZ09wdGlvbnMoKQoJICoKCSAqIEBwYXJhbSAkcG9zdCBBbiBhcnJheSBjb250YWluaW5nIHRoZSBkYXRhIHBvc3RlZCBmcm9tIHRoZSBwYXltZW50IG1ldGhvZHMgc2V0dGluZ3Mgc2NyZWVuCgkgKiBAcmV0dXJuIEFuIE1NX1Jlc3BvbnNlIG9mIHR5cGUgTU1fUmVzcG9uc2U6OlNVQ0NFU1MgaW5kaWNhdGluZyBzdWNjZXNzZnVsIHZhbGlkYXRpb24gYW5kIGFzc2lnbWVudC4gT24gZXJyb3IsIHRoZSB0eXBlIHdpbGwgYmUgTU1fUmVzcG9uc2U6OkVSUk9SIGFuZCB0aGUgbWVzc2FnZSB3aWxsIGNvbnRhaW4gdGhlIGVycm9yIG1lc3NhZ2VzCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBwcm9jZXNzQ29uZmlnT3B0aW9ucygkcG9zdCkgCgl7IAoJCSRhY3RpdmUgPSAoaXNzZXQoJHBvc3RbJ3Rlc3RfcGF5bWVudF9zZXJ2aWNlX2VuYWJsZWQnXSkgJiYgKCRwb3N0Wyd0ZXN0X3BheW1lbnRfc2VydmljZV9lbmFibGVkJ10gPT0gInRydWUiKSk7CgkJJHRoaXMtPnNldEFjdGl2ZSgkYWN0aXZlKTsKCQkKCQlpZiAoJGFjdGl2ZSA9PSBmYWxzZSkKCQl7CgkJCS8vdXBkYXRlIHRoZSB0cmFuc2llbnQgdG8gcmVmbGVjdCB0aGF0IHRlc3QgbW9kZSBoYXMgYmVlbiBkaXNhYmxlZAoJCQlzZWxmOjpzZXRTaXRlSW5UZXN0TW9kZShmYWxzZSk7CgkJfQoJCQoJCWlmICgkYWN0aXZlKQoJCXsKCQkJJHRoaXMtPmluc3RhbGwoKTsKCQkJJGNvbmZpZyA9IGlzc2V0KCRwb3N0WydwYXltZW50X3NlcnZpY2UnXVsndGVzdCddKT8kcG9zdFsncGF5bWVudF9zZXJ2aWNlJ11bJ3Rlc3QnXTphcnJheSgpOwoJCQkKCQkJJHRlc3RQcm9jZXNzb3JNb2RlID0gaXNzZXQoJGNvbmZpZ1sndGVzdF9wcm9jZXNzb3JfbW9kZSddKT8kY29uZmlnWyd0ZXN0X3Byb2Nlc3Nvcl9tb2RlJ106IiI7CgkJCSR0aGlzLT5zZXRNb2RlKCR0ZXN0UHJvY2Vzc29yTW9kZSk7CgkJCQoJCQlpZiAoJHRlc3RQcm9jZXNzb3JNb2RlID09IHNlbGY6OiRNT0RFX0FMV0FZU19PVkVSUklERSkKCQkJewoJCQkJLy9pZiB0aGUgbW9kZSBpcyBiZWluZyBzd2l0Y2hlZCB0byAiYWx3YXlzIG92ZXJyaWRlIiwgc2V0IHRoZSBzaXRlIGludG8gdGVzdCBtb2RlCgkJCQkkdGhpcy0+c2V0U2l0ZUluVGVzdE1vZGUodHJ1ZSk7CgkJCX0JCgkJCWVsc2UgaWYgKCR0ZXN0UHJvY2Vzc29yTW9kZSA9PSBzZWxmOjokTU9ERV9PVkVSUklERV9XSVRIX0tFWSkKCQkJewoJCQkJJHRoaXMtPnNldFNpdGVJblRlc3RNb2RlKGZhbHNlKTsKCQkJCSRvdmVycmlkZUtleSA9IGlzc2V0KCRjb25maWdbJ3Rlc3RfcHJvY2Vzc29yX292ZXJyaWRlX2tleSddKT8kY29uZmlnWyd0ZXN0X3Byb2Nlc3Nvcl9vdmVycmlkZV9rZXknXToiIjsKCQkJCS8vVE9ETzogZ2VuZXJhdGUga2V5IGlmIGJsYW5rCgkJCQkkdGhpcy0+dGVzdFByb2Nlc3Nvck92ZXJyaWRlS2V5ID0gJG92ZXJyaWRlS2V5OwoJCQl9CgkJCWVsc2UgaWYgKCR0ZXN0UHJvY2Vzc29yTW9kZSA9PSBzZWxmOjokTU9ERV9QUk9EVUNUSU9OX09WRVJSSURFX1dJVEhfS0VZKQoJCQl7CgkJCQkkdGhpcy0+c2V0U2l0ZUluVGVzdE1vZGUoZmFsc2UpOwoJCQkJJHByb2R1Y3Rpb25PdmVycmlkZUtleSA9IGlzc2V0KCRjb25maWdbJ3Byb2R1Y3Rpb25fcHJvY2Vzc29yX292ZXJyaWRlX2tleSddKT8kY29uZmlnWydwcm9kdWN0aW9uX3Byb2Nlc3Nvcl9vdmVycmlkZV9rZXknXToiIjsKCQkJCS8vVE9ETzogZ2VuZXJhdGUga2V5IGlmIGJsYW5rCgkJCQkkdGhpcy0+cHJvZHVjdGlvblByb2Nlc3Nvck92ZXJyaWRlS2V5ID0gJHByb2R1Y3Rpb25PdmVycmlkZUtleTsKCQkJfQoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgkKCQoJLyoqCgkgKiBDaGFyZ2UgYW4gb3JkZXIKCSAqIAoJICogQHBhcmFtIE1NX09yZGVyICRvcmRlciBUaGUgb3JkZXIgdG8gY2hhcmdlCgkgKiBAcGFyYW0gTU1fQ2FyZEluZm8gJGNhcmRJbmZvIFRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byB1c2UgaW4gY2hhcmdpbmcgdGhlIG9yZGVyCgkgKiBAcmV0dXJuIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UgQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhdHVzIG9mIHRoZSBjaGFyZ2UgYXR0ZW1wdAoJICovCglwdWJsaWMgZnVuY3Rpb24gY2hhcmdlT3JkZXIoTU1fT3JkZXIgJG9yZGVyLCBNTV9DYXJkSW5mbyAkY2FyZEluZm89bnVsbCwgJHZhbGlkYXRlPXRydWUpIAoJeyAKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHBhcmVudFJlc3BvbnNlID0gcGFyZW50OjpjaGFyZ2VPcmRlcigkb3JkZXIsJGNhcmRJbmZvLCR2YWxpZGF0ZSk7CgkJaWYgKCFNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc1N1Y2Nlc3MoJHBhcmVudFJlc3BvbnNlKSkKCQl7CgkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJcmV0dXJuICRwYXJlbnRSZXNwb25zZTsKCQl9CgkJCgkJJHRyeUNhcmRPbkZpbGUgPSBpc19udWxsKCRjYXJkSW5mbyk7CgkJaWYgKCEkdHJ5Q2FyZE9uRmlsZSkgCgkJewoJCQkkY2FyZFZhbGlkYXRpb24gPSAkY2FyZEluZm8tPnZhbGlkYXRlKCk7CgkJCWlmICgkY2FyZFZhbGlkYXRpb24gIT09IHRydWUpCgkJCXsKCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNoYXJnZSBvcmRlcjogeyRjYXJkVmFsaWRhdGlvbn0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CQkJCgkJCgkJJHRlc3RDYXJkSW5mbyA9ICR0aGlzLT5sb29rdXBUZXN0Q2FyZE9uRmlsZSgkb3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCkpOwoJCSRwcm9kdWN0SXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJCgkJaWYgKCR0ZXN0Q2FyZEluZm8gPT09IGZhbHNlKQoJCXsKCQkJaWYgKCR0cnlDYXJkT25GaWxlKQoJCQl7CgkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkludmFsaWQgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJJGNjUmVzcG9uc2UgPSAkdGhpcy0+Y3JlYXRlVGVzdENhcmRPbkZpbGUoJG9yZGVyLT5nZXRDdXN0b21lcigpLCAkb3JkZXItPmdldEJpbGxpbmdBZGRyZXNzKCksICRjYXJkSW5mbywgJG9yZGVyLT5pZCk7CgkJCWlmIChNTV9SZXNwb25zZTo6aXNFcnJvcigkY2NSZXNwb25zZSkpCgkJCXsKCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IHskY2NSZXNwb25zZS0+bWVzc2FnZX0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJJHRlc3RDYXJkSW5mbyA9ICRjY1Jlc3BvbnNlLT5tZXNzYWdlOwoJCX0KCQllbHNlIAoJCXsKCQkJaWYgKCEkdHJ5Q2FyZE9uRmlsZSkKCQkJewoJCQkJLy90aGVyZSBpcyBhIGNhcmQgb24gZmlsZSwgYnV0IGNyZWRpdCBjYXJkIGluZm8gd2FzIHNlbnQgYXMgd2VsbC4gVXBkYXRlIHRoZSBjYXJkIG9uIGZpbGUgdG8gYmUgdGhlIGNhcmQgdGhhdCB3YXMgc2VudAoJCQkJJGFQcm9kdWN0SXRlbSA9IHJlc2V0KCRwcm9kdWN0SXRlbXMpOwoJCQkJJHVwZGF0ZVJlc3BvbnNlID0gJHRoaXMtPnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oJGFQcm9kdWN0SXRlbSwkY2FyZEluZm8sJG9yZGVyLT5nZXRCaWxsaW5nQWRkcmVzcygpKTsKCQkJCWlmIChNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0Vycm9yKCR1cGRhdGVSZXNwb25zZSkpCgkJCQl7CgkJCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQkJCXJldHVybiAkdXBkYXRlUmVzcG9uc2U7CgkJCQl9CgkJCX0KCQl9CgkJCgkJLy9ub3cgc2V0dXAgc2NoZWR1bGVzIGZvciB0aGUgcmVjdXJyaW5nIHByb2R1Y3RzCgkJJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdCA9ICR0aGlzLT5jcmVhdGVTY2hlZHVsZXNGcm9tUHJvZHVjdHMoJHByb2R1Y3RJdGVtcyk7CgkJCgkJaWYoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY3JlYXRlU2NoZWR1bGVkUmVzdWx0KSkKCQl7CgkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJcmV0dXJuICRjcmVhdGVTY2hlZHVsZWRSZXN1bHQ7CgkJfQoJCQoJCWlmICgkb3JkZXItPmdldFRvdGFsKCkgPiAwLjAwKQoJCXsKCQkJLyoKCQkJSGVyZSBpcyB3aGVyZSB3ZSB3b3VsZCBjb250YWN0IHRoZSBnYXRld2F5IGFuZCBjcmVhdGUgYSBjaGFyZ2UgaWYgdGhpcyB3YXNudCBhIHRlc3QgcHJvY2Vzc29yOgoJCQkKCQkJJGNoYXJnZVJlc3BvbnNlID0gPGNyZWF0ZSBjaGFyZ2UgdXNpbmcgZ2F0ZXdheT4KCQkJCgkJCWlmIChNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0Vycm9yKCRjaGFyZ2VSZXNwb25zZSkgfHwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNGYWlsZWQoJGNoYXJnZVJlc3BvbnNlKSkKCQkJewoJCQkJJGNyZWF0ZWRTdWJzY3JpcHRpb25zID0gJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdC0+bWVzc2FnZTsKCQkJCWlmIChpc19hcnJheSgkY3JlYXRlZFN1YnNjcmlwdGlvbnMpICYmIChjb3VudCgkY3JlYXRlZFN1YnNjcmlwdGlvbnMpID4gMCkpCgkJCQl7CgkJCQkJJHRoaXMtPmNhbmNlbFNjaGVkdWxlZFN1YnNjcmlwdGlvbnMoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKTsKCQkJCX0KCQkJCXJldHVybiAkY2hhcmdlUmVzcG9uc2U7CgkJCX0KCQkJKi8KCQkJCgkJCS8vbG9nIHRvIHRyYW5zYWN0aW9ucyB0YWJsZXMKCQkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJJG9yZGVySXRlbUlkID0gbnVsbDsKCQkJaWYgKGNvdW50KCRwcm9kdWN0SXRlbXMpID09IDEpCgkJCXsKCQkJCSRvcmRlckl0ZW0gPSByZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQkJCSRvcmRlckl0ZW1JZCA9ICRvcmRlckl0ZW0tPmdldElkKCk7CgkJCX0KCQkJCgkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSI7CgkJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJHBheW1lbnRTZXJ2aWNlRGV0YWlsSWQgPSAwOwoJCQkKCQkJLy9ub3cgbG9nIHRoZSBwYXltZW50IGluIHRoZSB0cmFuc2FjdGlvbnMgdGFibGUKCQkJJHJlcyA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUZXN0VHJhbnNhY3Rpb25FbnRyeSgkb3JkZXItPmdldElkKCksICRvcmRlckl0ZW1JZCwkb3JkZXItPmdldFRvdGFsKCksICRvcmRlci0+Z2V0Q3VycmVuY3koKSwkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+aWQsJHBheW1lbnRTZXJ2aWNlRGV0YWlsSWQsJHRyYW5zYWN0aW9uRGF0ZSk7CgkJfQoJCS8vZXJyb3JzIG9yIGZhaWx1cmVzIHJldHVybiBlYXJseSwgc28gcmVhY2hpbmcgdGhpcyBwb2ludCBtZWFucyBwYXltZW50IHdhcyBzdWNjZXNzZnVsIG9yIHRoZSBpbml0aWFsIHBheW1lbnQgaXMgMAoJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokUEFJRF9DT01QTEVURSk7CgkJCgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CgkKCQoJcHJvdGVjdGVkIGZ1bmN0aW9uIGV4ZWN1dGVTdWJzY3JpcHRpb25QYXltZW50KE1NX09yZGVySXRlbSAkb3JkZXJJdGVtLCAkY3VycmVudFJlYmlsbE51bWJlcikKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ0FOQ0VMTEVEKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJTdWJzY3JpcHRpb24gZm9yIG9yZGVyIGl0ZW0gaWQgIi4kb3JkZXJJdGVtLT5nZXRJZCgpLiIgd2FzIG5vdCBjaGFyZ2VkIGJlY2F1c2UgdGhlIGl0ZW0gaXMgY2FuY2VsbGVkIik7CgkJfQoJCQoJCWlmICgkb3JkZXJJdGVtLT5nZXRTdGF0dXMoKSA9PSBNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX0NPTVBMRVRFKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJTdWJzY3JpcHRpb24gZm9yIG9yZGVyIGl0ZW0gaWQgIi4kb3JkZXJJdGVtLT5nZXRJZCgpLiIgd2FzIG5vdCBjaGFyZ2VkIGJlY2F1c2UgYmlsbGluZyBpcyBjb21wbGV0ZSBmb3IgdGhpcyBpdGVtIik7CgkJfQoJCQoJCSRvcmRlciA9IG5ldyBNTV9PcmRlcigkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCkpOwoJCQoJCSR0ZXN0Q2FyZEluZm8gPSAkdGhpcy0+bG9va3VwVGVzdENhcmRPbkZpbGUoTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXItPmlkKSk7CgkJaWYgKCR0ZXN0Q2FyZEluZm8gPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJJbnZhbGlkIGNhcmQgb24gZmlsZSBmb3IgdXNlciBpZCB7JHBheW1lbnRFdmVudC0+Z2V0VXNlcklkKCl9IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGRlc2NyaXB0aW9uID0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSwgaXRlbTogeyRvcmRlckl0ZW0tPmdldERlc2NyaXB0aW9uKCl9IjsKCQkKCQkvKgoJCSAKCQkvL0hlcmUgaXMgd2hlcmUgd2Ugd291bGQgc2VuZCB0aGUgY2hhcmdlIHRvIHRoZSBnYXRld2F5IGlmIHRoaXMgd2Fzbid0IGEgdGVzdCBwcm9jZXNzb3IsIEV4YW1wbGUKCQkgCgkJJGNoYXJnZVJlc3BvbnNlID0gJHRoaXMtPnNlbmRTdHJpcGVDaGFyZ2UoJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCksICRvcmRlckl0ZW0tPmdldEN1cnJlbmN5KCksICRkZXNjcmlwdGlvbiwkc3RyaXBlQ3VzdG9tZXJJZCk7CgkJCgkJaWYgKE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRXJyb3IoJGNoYXJnZVJlc3BvbnNlKSB8fCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0ZhaWxlZCgkY2hhcmdlUmVzcG9uc2UpKQoJCXsKCQkJJG9yZGVySXRlbS0+c2V0U3RhdHVzKE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfUkVCSUxMX0ZBSUxFRCk7CgkJCSRvcmRlckl0ZW0tPmNvbW1pdERhdGEoKTsKCQkJcGFyZW50OjpoYW5kbGVPdmVyZHVlU3Vic2NyaXB0aW9uSXRlbSgkb3JkZXJJdGVtKTsKCQkJcmV0dXJuICRjaGFyZ2VSZXNwb25zZTsKCQl9CgkJJGNoYXJnZU9iamVjdCA9ICRjaGFyZ2VSZXNwb25zZS0+Z2V0TWVzc2FnZSgpOwoJCSovCgkJCgkJCgkJLy9sb2cgc3VjY2Vzc2Z1bCB0cmFuc2FjdGlvbgoJCSRwYXltZW50U2VydmljZURldGFpbElkID0gMDsKCQlNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yZGVySXRlbS0+Z2V0T3JkZXJJZCgpLCAkb3JkZXJJdGVtLT5nZXRJZCgpLCAkb3JkZXJJdGVtLT5nZXRSZWN1cnJpbmdBbW91bnQoKSwgJG9yZGVyLT5nZXRDdXJyZW5jeSgpLCAkZGVzY3JpcHRpb24sIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfUEFZTUVOVCx0cnVlLCR0aGlzLT5nZXRJZCgpLCRwYXltZW50U2VydmljZURldGFpbElkKTsKCgkJCgkJLy8gc2NoZWR1bGUgYW5vdGhlciBwYXltZW50IGlmIG5lY2Vzc2FyeQoJCXJldHVybiAkdGhpcy0+c2NoZWR1bGVOZXh0UGF5bWVudEZvckV4aXN0aW5nU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0sICRvcmRlci0+Z2V0Q3VzdG9tZXIoKSwgJGN1cnJlbnRSZWJpbGxOdW1iZXIpOwoJfQoJCgkKCS8qKgoJICogQ3JlYXRlcyBhIHRlc3QgY2FyZC1vbi1maWxlIGFuZCBsaW5rcyBpdCB0byBhIE1lbWJlck1vdXNlIHVzZXIKCSAqIAoJICogQHBhcmFtICR1c2VyIE1NX1VzZXIgbGlua2VkIHRvIGNhcmQgb24gZmlsZQoJICogQHBhcmFtICRiaWxsaW5nQWRkcmVzcyBNTV9DdXN0b21lckFkZHJlc3MgY29udGFpbmluZyB0aGUgYmlsbGluZyBhZGRyZXNzCgkgKiBAcGFyYW0gJGNhcmRJbmZvIFRoZSBwYXltZW50IGluZm9ybWF0aW9uLiBPbmx5IGNyZWRpdCBjYXJkIGluZm8gaXMgc3VwcG9ydGVkIGF0IHRoaXMgdGltZQoJICogQHBhcmFtICRvcmlnaW5hbE9yZGVySWQgKG9wdGlvbmFsKQoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIHN1Y2Nlc3MgaWYgY2FyZCB3YXMgY3JlYXRlZCBzdWNjZXNzZnVsbHksIGVycm9yIG90aGVyd2lzZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gY3JlYXRlVGVzdENhcmRPbkZpbGUoTU1fVXNlciAkdXNlciwgTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcywgTU1fQ2FyZEluZm8gJGNhcmRJbmZvLCAkb3JpZ2luYWxPcmRlcklkPW51bGwpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCS8vY2hlY2sgdGhhdCBhbGwgb2YgdGhlIHBhcmFtZXRlcnMgYXJlIG5vbi1udWxsCgkJJG51bGxGaWVsZHMgPSBhcnJheSgpOwoJCWZvcmVhY2ggKGFycmF5KCJ1c2VyIiwiYmlsbGluZ0FkZHJlc3MiLCJjYXJkSW5mbyIpIGFzICR0ZXN0RmllbGQpCgkJewoJCQlpZiAoaXNfbnVsbCgkJHRlc3RGaWVsZCkpCgkJCXsKCQkJCSRudWxsRmllbGRzW10gPSAiXCR7JHRlc3RGaWVsZH0iOwkKCQkJfQoJCX0KCQkKCQlpZiAoY291bnQoJG51bGxGaWVsZHMpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgdGVzdCBjYXJkIG9uIGZpbGUuIFRoZSBmb2xsb3dpbmcgZmllbGRzIHdlcmUgbWlzc2luZzoiLmltcGxvZGUoIiwiLCRudWxsRmllbGRzKSwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CQoJCX0KCQkKCQkkdGVzdENhcmRJbmZvID0gbmV3IHN0ZENsYXNzKCk7CgkJJHRlc3RDYXJkSW5mby0+dXNlcl9pZCA9ICR1c2VyLT5nZXRJZCgpOwoJCQoJCSRjYXJkTnVtYmVyID0gJGNhcmRJbmZvLT5nZXRDYXJkTnVtYmVyKCk7CgkJJHRhaWxFbmQgPSAoc3RybGVuKCRjYXJkTnVtYmVyKSA+PSA0KT8iLTQiOigtMSAqIHN0cmxlbigkY2FyZE51bWJlcikpOwoJCSR0ZXN0Q2FyZEluZm8tPmxhc3RfZm91ciA9IHN1YnN0cigkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKSwgJHRhaWxFbmQpOwoJCQoJCSRleHBNb250aCA9ICRjYXJkSW5mby0+Z2V0RXhwaXJhdGlvbk1vbnRoKCk7CgkJJGV4cFllYXIgPSAgJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uWWVhcigpOwoJCSRleHBEYXkgPSBkYXRlKCJ0IixzdHJ0b3RpbWUoInskZXhwWWVhcn0teyRleHBNb250aH0tMDEiKSk7CgkJJHRlc3RDYXJkSW5mby0+ZXhwaXJhdGlvbl9kYXRlID0gInskZXhwWWVhcn0teyRleHBNb250aH0teyRleHBEYXl9IjsKCQkKCQkvL3Rlc3QgcHJvY2Vzc29yIGN1cnJlbnRseSBvbmx5IHN1cHBvcnRzIDEgY2FyZCBvbiBmaWxlLCBzbyByZXBsYWNlIGFueSB0aGF0IGFscmVhZHkgZXhpc3RzCgkJJHJlc3VsdCA9ICR3cGRiLT5yZXBsYWNlKE1NX1RBQkxFX1RFU1RfQ0FSRE9ORklMRSxhcnJheSgidXNlcl9pZCI9PiR0ZXN0Q2FyZEluZm8tPnVzZXJfaWQsICJsYXN0X2ZvdXIiPT4kdGVzdENhcmRJbmZvLT5sYXN0X2ZvdXIsImV4cGlyYXRpb25fZGF0ZSI9PiR0ZXN0Q2FyZEluZm8tPmV4cGlyYXRpb25fZGF0ZSkpOwoJCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgdGVzdCBjYXJkIG9uIGZpbGUuIERhdGFiYXNlIGVycm9yOiIuJHdwZGItPmxhc3RfZXJyb3IsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL2NyZWF0ZSBlbnRyeSBpbiBnbG9iYWwgY2FyZCBvbiBmaWxlIHRhYmxlCgkJJGNvZkRhdGEgPSBhcnJheSgidXNlcl9pZCI9PiR1c2VyLT5nZXRJZCgpLCAicGF5bWVudF9zZXJ2aWNlX2lkIj0+JHRoaXMtPmdldElkKCksICJwYXltZW50X3NlcnZpY2VfaWRlbnRpZmllciI9PiR1c2VyLT5nZXRJZCgpKTsKCQlpZiAoIWlzX251bGwoJG9yaWdpbmFsT3JkZXJJZCkpCgkJewoJCQkkY29mRGF0YVsnb3JpZ2luYWxfb3JkZXJfaWQnXSA9ICRvcmlnaW5hbE9yZGVySWQ7CgkJfQoJCSRyZXN1bHQgPSAkd3BkYi0+aW5zZXJ0KE1NX1RBQkxFX0NBUkRfT05fRklMRSwgJGNvZkRhdGEpOwoJCWlmKCEkcmVzdWx0KQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgdGVzdCBjYXJkIG9uIGZpbGUuIERhdGFiYXNlIGVycm9yOiIuJHdwZGItPmxhc3RfZXJyb3IsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkdGVzdENhcmRJbmZvKTsKCX0KCQoJCgkKCS8qKgoJICogTG9va3MgdXAgdGhlIHRlc3QgY2FyZCBvbiBmaWxlIGxpbmtlZCB0byBhIE1lbWJlck1vdXNlIHVzZXIKCSAqIAoJICogQHBhcmFtIGludCAkdXNlcklkIFRoZSBNZW1iZXJNb3VzZSB1c2VyIGlkCgkgKiBAcmV0dXJuIFRoZSAoc3RyaW5nKSBTdHJpcGUgY3VzdG9tZXIgaWQgaWYgZm91bmQsIGJvb2xlYW4gZmFsc2UgaWYgbm90IGZvdW5kIG9yIGVycm9yZWQKCSAqLwoJcHJvdGVjdGVkIGZ1bmN0aW9uIGxvb2t1cFRlc3RDYXJkT25GaWxlKCR1c2VySWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRsb29rdXBTUUwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1RFU1RfQ0FSRE9ORklMRS4iIFdIRVJFIHVzZXJfaWQ9J3skdXNlcklkfSciOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3JvdygkbG9va3VwU1FMKTsKCQlpZiAoaXNfbnVsbCgkcm93KSkKCQl7CgkJCXJldHVybiBmYWxzZTsKCQl9CgkJcmV0dXJuICRyb3c7Cgl9CgkKCQoJLyoqCgkgKiBVcGRhdGVzIHRoZSBwYXltZW50IGdhdGV3YXkgd2l0aCBuZXcgaW5mb3JtYXRpb24sIGFuZCB1cGRhdGUgdGhlIE1lbWJlck1vdXNlIG9yZGVyIHdpdGggdGhlIG5ldyBiaWxsaW5nIGFkZHJlc3MKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oKQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG9yZGVyIGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBzdWJzY3JpcHRpb24gYmVpbmcgdXBkYXRlZAoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyAob3B0aW9uYWwpIFRoZSBuZXcgY2FyZCB0byBzdG9yZSBvbiBmaWxlCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyBUaGUgbmV3IGJpbGxpbmcgYWRkcmVzcyB0byBzdG9yZS4gU2hvdWxkIGJlIHRoZSBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VzdG9tZXIncyBjYXJkIG9uIGZpbGUKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIHJlcHJlc2VudGluZyBzdWNjZXNzIG9yIGVycm9yLiBDb250YWlucyBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2Ugb24gZXJyb3IKCSAqIAoJICovCglwdWJsaWMgZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9uSW5mbyhNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3M9bnVsbCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChpc19udWxsKCRjYXJkSW5mbykgfHwgaXNfbnVsbCgkYmlsbGluZ0FkZHJlc3MpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvcjogQm90aCBhIGNyZWRpdCBjYXJkIGFuZCBhIGJpbGxpbmcgYWRkcmVzcyBtdXN0IGJlIHN1cHBsaWVkIHRvIHVwZGF0ZSBhIHN1YnNjcmlwdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNhcmRWYWxpZCA9ICRjYXJkSW5mby0+dmFsaWRhdGUoKTsKCQlpZiAoJGNhcmRWYWxpZCAhPT0gdHJ1ZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IHskY2FyZFZhbGlkfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGN1c3RvbWVySWQgPSBNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJaWYgKCRjdXN0b21lcklkID09IC0xKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogY3VzdG9tZXIgd2FzIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9jcmVhdGVUZXN0Q2FyZE9uRmlsZSByZXBsYWNlcyBhbnkgZXhpc3RpbmcgY2FyZHMsIGFuZCB1c2VzIHRoZSBzYW1lIGxvZ2ljIHdlIG5lZWQgaGVyZSwgc28gcmV1c2UgdGhpcyBtZXRob2QKCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRjdXN0b21lcklkKTsKCQkkcmVzcG9uc2UgPSAkdGhpcy0+Y3JlYXRlVGVzdENhcmRPbkZpbGUoJHVzZXIsICRiaWxsaW5nQWRkcmVzcywgJGNhcmRJbmZvKTsKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzcG9uc2UpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCRyZXNwb25zZS0+bWVzc2FnZSxNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlwYXJlbnQ6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oJG9yZGVySXRlbSwkY2FyZEluZm8sJGJpbGxpbmdBZGRyZXNzKTsKCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCXsKCQkJcmV0dXJuICR0aGlzLT5yZXN1bWVTdWJzY3JpcHRpb24oJG9yZGVySXRlbSk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOwkJCgl9CgkKCQoJLyoqCgkgKiBSZWZ1bmRzIGEgdHJhbnNhY3Rpb24KCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIE1lbWJlck1vdXNlIHRyYW5zYWN0aW9uIHRvIHJlZnVuZAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcywgZmFpbHVyZSwgb3IgZXJyb3IKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHJlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkKQoJewoJCXJldHVybiAkdGhpcy0+X3JlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkLHRydWUpOwoJfQoJCgkKCS8qKgoJICogSW50ZXJuYWwgcmVmdW5kIG1ldGhvZCB0aGF0IGFsbG93cyBhIHJlZnVuZCB0byBiZSBwcm9jZXNzZWQgdGhlIHNhbWUgd2F5LCBldmVuIGlmIGl0IGlzIGluaXRpYXRlZCBvbiBTdHJpcGUgYW5kIHNlbnQgdG8gdXMgdmlhIHdlYmhvb2sKCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHRyYW5zYWN0aW9uSWQgVGhlIGlkIG9mIHRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiBiZWluZyByZWZ1bmRlZAoJICogQHBhcmFtIGJvb2xlYW4gJHNob3VsZEF0dGVtcHRHYXRld2F5UmVmdW5kIChvcHRpb25hbCkgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIG1ldGhvZCBzaG91bGQgYXR0ZW1wdCB0byBpc3N1ZSBhIHJlZnVuZCB0aHJvdWdoIHRoZSBTdHJpcGUgYXBpLiBJZiBTdHJpcGUgbm90aWZpZXMgdXMgdmlhIHdlYmhvb2ssIHRoZSBjaGFyZ2UgaXMgYWxyZWFkeSByZWZ1bmRlZCwgc28gdGhpcyBzaG91bGQgYmUgZmFsc2UKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIGluZGljYXRpbmcgc3VjY2VzcyBvciBmYWlsdXJlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBfcmVmdW5kVHJhbnNhY3Rpb24oJHRyYW5zYWN0aW9uSWQsJHNob3VsZEF0dGVtcHRHYXRld2F5UmVmdW5kPXRydWUpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvL21ha2Ugc3VyZSB3ZSBoYXZlIGEgdmFsaWQgdHJhbnNhY3Rpb24gaWQKCQlpZiAoZW1wdHkoJHRyYW5zYWN0aW9uSWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcHJvY2VzcyByZWZ1bmQsIGludmFsaWQgdHJhbnNhY3Rpb24gaWQgc3VwcGxpZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vbWFrZSBzdXJlIHRoZSB0cmFuc2FjdGlvbiBleGlzdHMsIChhbmQgZm9yIHRoZSB0ZXN0IHNlcnZpY2UsIG1ha2Ugc3VyZSBpdCBpcyBhIHRlc3QgdHJhbnNhY3Rpb24pCgkJJHRyYW5zYWN0aW9uUm93ID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIGZyb20gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiB3aGVyZSBpZCA9ICVzIEFORCBpc190ZXN0PTEiLCR0cmFuc2FjdGlvbklkKSk7CgkJaWYgKGlzX251bGwoJHRyYW5zYWN0aW9uUm93KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kLCB0cmFuc2FjdGlvbiBkb2VzIG5vdCBleGlzdCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9tYWtlIHN1cmUgaXRzIG5vdCBhbHJlYWR5IHJlZnVuZGVkCgkJaWYgKCFpc19udWxsKCR0cmFuc2FjdGlvblJvdy0+cmVmdW5kX2lkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVHJhbnNhY3Rpb24gaGFzIGFscmVhZHkgYmVlbiByZWZ1bmRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9kZXRlcm1pbmUgd2hlcmUgdGhlIHRyYW5zYWN0aW9uIGluZm9ybWF0aW9uIGlzIHN0b3JlZCBiYXNlZCBvbiB0aGUgdHlwZQoJCSR0cmFuc2FjdGlvbkFtb3VudCA9IGFicygkdHJhbnNhY3Rpb25Sb3ctPmFtb3VudCk7CgkJJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCA9IGZhbHNlOwoJCXN3aXRjaCAoJHRyYW5zYWN0aW9uUm93LT50cmFuc2FjdGlvbl90eXBlKQoJCXsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVDoKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQ6CgkJCQkvKgoJCQkJSGVyZSBpcyB3aGVyZSB3ZSB3b3VsZCBsb29rIHVwIHRoZSByZWNvcmRzIHdlIHNob3VsZCBoYXZlIHN0b3JlZCB3aGVuIGNyZWF0aW5nIHRoZSBjaGFyZ2UgdGhhdCBhbGxvdyB1cyB0byBpZGVudGlmeSAKCQkJCXRoZSBpdGVtIGJlaW5nIHJlZnVuZGVkIHRvIHRoZSByZW1vdGUgZ2F0ZXdheQoJCQkJCgkJCQkkc3RyaXBlQ2hhcmdlUXVlcnkgPSAiU0VMRUNUICogZnJvbSAiLk1NX1RBQkxFX1NUUklQRV9DSEFSR0VTLiIgV0hFUkUgaWQgPSAlcyI7CgkJCQkkc3RyaXBlQ2hhcmdlSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCRzdHJpcGVDaGFyZ2VRdWVyeSwkdHJhbnNhY3Rpb25Sb3ctPnBheW1lbnRfc2VydmljZV9kZXRhaWxfaWQpKTsKCQkJCSRzdHJpcGVDaGFyZ2VJZCA9ICRzdHJpcGVDaGFyZ2VJbmZvLT5jaGFyZ2VfaWQ7CgkJCQkkZ2F0ZXdheVJlZnVuZFJlcXVpcmVkID0gdHJ1ZTsKCQkJCSovCgkJCQlicmVhazsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfQ0hBUkdFOgoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfQ0hBUkdFOgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcmVmdW5kIHRyYW5zYWN0aW9uOiBOb3QgYSBwYXltZW50IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZSwgdW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCAmJiAkc2hvdWxkQXR0ZW1wdEdhdGV3YXlSZWZ1bmQpCgkJewoJCQkvKgoJCQkgKiBGb3IgYSByZWFsIGdhdGV3YXksIGluc2VydCBnYXRld2F5LXNwZWNpZmljIGNvZGUgdG8gcmVmdW5kIHRoZSB0cmFuc2FjdGlvbiBoZXJlCgkJCSAqLwoJCX0KCQkKCQkvL2xvZyB0aGUgcmVmdW5kIGluIHRoZSB0cmFuc2FjdGlvbiBsb2cKCQkkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0xPRy4iIFdIRVJFIGlkPSVzIiwkdHJhbnNhY3Rpb25JZCkpOwoJCWlmICghaXNfbnVsbCgkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8pKQoJCXsKCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUmVmdW5kIGZvciB0cmFuc2FjdGlvbiMgeyR0cmFuc2FjdGlvbklkfSI7CgkJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJCQoJCQkkcmVzcG9uc2UgPSBNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVGVzdFRyYW5zYWN0aW9uRW50cnkoJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pZCwKCQkJCQkkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPm9yZGVyX2l0ZW1faWQsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5hbW91bnQsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5jdXJyZW5jeSwKCQkJCQkkdHJhbnNhY3Rpb25EZXNjcmlwdGlvbiwKCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCWZhbHNlLAoJCQkJCSR0aGlzLT5nZXRJZCgpLAoJCQkJCW51bGwsCgkJCQkJJHRyYW5zYWN0aW9uRGF0ZSwKCQkJCQkkdHJhbnNhY3Rpb25JZCk7CgkJCWlmIChNTV9SZXNwb25zZTo6aXNTdWNjZXNzKCRyZXNwb25zZSkpCgkJCXsKCQkJCSR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgiVVBEQVRFICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgU0VUIHJlZnVuZF9pZCA9ICVzIFdIRVJFIGlkID0gJXMiLCRyZXNwb25zZS0+bWVzc2FnZSwkdHJhbnNhY3Rpb25JZCkpOwoJCQl9CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOyAvL3N1Y2Nlc3MKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgcmVmdW5kaW5nIHRyYW5zYWN0aW9uIyB7JHRyYW5zYWN0aW9uSWR9OiBVbmFibGUgdG8gcmV0cmlldmUgdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOyAKCQl9Cgl9CgkKCQoJLyoqCgkgKiBSZXR1cm5zIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBwYXltZW50IHNlcnZpY2UgaXMgaW4gdGVzdCBtb2RlIG9yIG5vdAoJICogCgkgKiBAcmV0dXJuIGJvb2wKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGluVGVzdE1vZGUoKQoJewoJCXJldHVybiB0cnVlOwoJfQoJCgkKCS8qKgoJICogQ2hhbmdlcyB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGUgcGF5bWVudCBzZXJ2aWNlIHRvIHVzZSB0aGUgdGVzdCBtb2RlIHNldHRpbmdzLCBpZiBhdmFpbGFibGUuCgkgKiBJZiB0aGUgY29uZmlndXJhdGlvbiB3YXMgYWJsZSB0byBiZSBzdWNjZXNzZnVsbHkgY2hhbmdlZCB0byBiZSBhIHRlc3QgbW9kZSBjb25maWd1cmF0aW9uLCB0cnVlIGlzIHJldHVybmVkLCBvdGhlcndpc2UgZmFsc2UKCSAqIAoJICogIEByZXR1cm4gYm9vbAoJICovCglwdWJsaWMgZnVuY3Rpb24gc3dpdGNoVG9UZXN0TW9kZSgpCgl7CgkJcmV0dXJuIHRydWU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRNb2RlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm1vZGU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRNb2RlKCRtb2RlKQoJewoJCSR2YWxpZE1vZGVzID0gYXJyYXkoc2VsZjo6JE1PREVfQUxXQVlTX09WRVJSSURFLCBzZWxmOjokTU9ERV9PVkVSUklERV9XSVRIX0tFWSwgc2VsZjo6JE1PREVfUFJPRFVDVElPTl9PVkVSUklERV9XSVRIX0tFWSk7CgkJJHRoaXMtPm1vZGUgPSAoaW5fYXJyYXkoJG1vZGUsJHZhbGlkTW9kZXMpKT8kbW9kZTooc2VsZjo6JE1PREVfQUxXQVlTX09WRVJSSURFKTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldFRlc3RQcm9jZXNzb3JPdmVycmlkZUtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT50ZXN0UHJvY2Vzc29yT3ZlcnJpZGVLZXk7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRUZXN0UHJvY2Vzc29yT3ZlcnJpZGVLZXkoJHRlc3RQcm9jZXNzb3JPdmVycmlkZUtleSkKCXsKCQkkdGhpcy0+dGVzdFByb2Nlc3Nvck92ZXJyaWRlS2V5ID0gJHRlc3RQcm9jZXNzb3JPdmVycmlkZUtleTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldFByb2R1Y3Rpb25Qcm9jZXNzb3JPdmVycmlkZUtleSgpCgl7CgkJcmV0dXJuICR0aGlzLT5wcm9kdWN0aW9uUHJvY2Vzc29yT3ZlcnJpZGVLZXk7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRQcm9kdWN0aW9uUHJvY2Vzc29yT3ZlcnJpZGVLZXkoJHByb2R1Y3Rpb25Qcm9jZXNzb3JPdmVycmlkZUtleSkKCXsKCQkkdGhpcy0+cHJvZHVjdGlvblByb2Nlc3Nvck92ZXJyaWRlS2V5ID0gJHByb2R1Y3Rpb25Qcm9jZXNzb3JPdmVycmlkZUtleTsKCX0KCQoJCgkvKioKCSAqIERldGVybWluZXMgaWYgdGhlIHNpdGUgaXMgaW4gdGVzdCBtb2RlICh0ZXN0IHByb2Nlc3NvciBpcyBvdmVycmlkaW5nIHRoZSBvbnNpdGUgc2VydmljZSkKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc1NpdGVVc2luZ1Rlc3RTZXJ2aWNlKCkKCXsKCQkvL3VzZSB0cmFuc2llbnRzIHRvIHRha2UgYWR2YW50YWdlIG9mIGNhY2hlCgkJaWYgKCgkdGVzdE1vZGUgPSBNTV9PcHRpb25VdGlsczo6Z2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9TSVRFX0lOX1RFU1RfTU9ERSkpID09PSBmYWxzZSkKCQl7CgkJCSR0cCA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2UoTU1fUGF5bWVudFNlcnZpY2U6OiRURVNUX1NFUlZJQ0VfVE9LRU4sZmFsc2UpOwoJCQkkdHJhbnNNb2RlID0gMDsKCQkJaWYgKGlzX251bGwoJHRwKSB8fCAhKCR0cCBpbnN0YW5jZW9mIE1NX1Rlc3RQYXltZW50U2VydmljZSkpCgkJCXsKCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICJVbmFibGUgdG8gcmV0cmlldmUgdGVzdCBwcm9jZXNzb3IgaW4gTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjppc1NpdGVVc2luZ1Rlc3RTZXJ2aWNlKCkiKTsKCQkJfQoJCQllbHNlIGlmICgkdHAtPmlzQWN0aXZlKCkpIAoJCQl7CgkJCQkvLzAgYW5kIDEgYXJlIHVzZWQgZm9yIHRyYW5zbW9kZSB0byBkaWZmZXJlbnRpYXRlIGZyb20gYm9vbGVhbiAiZmFsc2UiLCB3aGljaCBpcyByZXR1cm5lZCB3aGVuIHRoZSB0cmFuc2llbnQgaXMgbm90LXNldC9leHBpcmVkLgoJCQkJJHRyYW5zTW9kZSA9ICgkdHAtPmdldE1vZGUoKSA9PSBNTV9UZXN0UGF5bWVudFNlcnZpY2U6OiRNT0RFX0FMV0FZU19PVkVSUklERSk/MTowOwoJCQl9CgkJCQoJCQlzZWxmOjpzZXRTaXRlSW5UZXN0TW9kZSgoJHRyYW5zTW9kZSA9PT0gMSkpOwoJCQlyZXR1cm4gKCgkdHJhbnNNb2RlID09PSAxKT90cnVlOmZhbHNlKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAoKCR0ZXN0TW9kZSA9PT0gIjEiKSB8fCAoJHRlc3RNb2RlID09PSAxKSk7CgkJfQoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2V0U2l0ZUluVGVzdE1vZGUoJGluVGVzdE1vZGUpCgl7CgkJJGluVGVzdE1vZGUgPSAoYm9vbCkkaW5UZXN0TW9kZTsKCQlNTV9PcHRpb25VdGlsczo6c2V0T3B0aW9uKE1NX09wdGlvblV0aWxzOjokT1BUSU9OX0tFWV9TSVRFX0lOX1RFU1RfTU9ERSwoJGluVGVzdE1vZGU/MTowKSk7Cgl9CgkKCQoJLyoqCgkgKiBHZW5lcmF0ZXMgd29ya2luZyBleGFtcGxlIGxpbmsgCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RXhhbXBsZUNoZWNrb3V0TGluaygpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSR2YWxpZFByb2R1Y3RJRCA9ICR3cGRiLT5nZXRfdmFyKCJTRUxFQ1QgTUlOKGlkKSBGUk9NICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBXSEVSRSBzdGF0dXM9MSIpOwoJCSR2YWxpZFByb2R1Y3RJRCA9IGVtcHR5KCR2YWxpZFByb2R1Y3RJRCk/OTk5OTk5OiR2YWxpZFByb2R1Y3RJRDsgLy9OT1RFOiByZWxpZXMgb24gY29yZXBhZ2UgZW5naW5lIHJldHVybmluZyBhIGNoZWNrb3V0IGxpbmsgZXZlbiB3aGVuIHRoZSBwcm9kdWN0IGlkIGlzIGludmFsaWQKCQlyZXR1cm4gTU1fQ29yZVBhZ2VFbmdpbmU6OmdldENoZWNrb3V0UGFnZVN0YXRpY0xpbmsoJHZhbGlkUHJvZHVjdElEKTsKCX0KCQkKCQp9', 0, '2018-11-21 06:38:55'),
(240, 'extensionsfactory', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhlIEV4dGVudGlvbnMgRmFjdG9yeSByZXRyaWV2ZXMgYSByZXF1ZXN0ZWQgZXh0ZW5zaW9uIGJhc2VkIG9uIGEgdG9rZW4sIG9yIGFsbCBhdmFpbGFibGUgZXh0ZW5zaW9ucwogKi8KIApjbGFzcyBNTV9FeHRlbnNpb25zRmFjdG9yeSAKewoJLy91c2VkIHRvIGhvbGQgaW5zdGFuY2VzIG9mIGV4dGVuc2lvbnMgdGhhdCBjYW4gYmUgcmV1c2VkCglwcml2YXRlIHN0YXRpYyAkaW5zdGFuY2VzID0gYXJyYXkoKTsKCQoJLyoqCgkgKiBSZXRyaWV2ZSBhbGwgb2YgdGhlIGFjdGl2ZSBleHRlbnNpb25zCgkgKiAKCSAqIEByZXR1cm4gYW4gYXJyYXkgY29udGFpbmluZyBhbGwgdGhlIGF2YWlsYWJsZSBleHRlbnNpb24gb2JqZWN0cywga2V5ZWQgYnkgdGhlIHRva2VuCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QWN0aXZlRXh0ZW5zaW9ucygkYXV0b2xvYWREZXBlbmRlbmNpZXM9dHJ1ZSkKCXsKCQkkZXh0ZW5zaW9uc0FycmF5ID0gc2VsZjo6Z2V0QXZhaWxhYmxlRXh0ZW5zaW9ucygkYXV0b2xvYWREZXBlbmRlbmNpZXMpOwoJCQoJCWZvcmVhY2ggKCRleHRlbnNpb25zQXJyYXkgYXMgJHRva2VuPT4kZXh0ZW5zaW9uKQoJCXsKCQkJaWYgKCEkZXh0ZW5zaW9uLT5pc0FjdGl2ZSgpKQoJCQl7CgkJCQl1bnNldCgkZXh0ZW5zaW9uc0FycmF5WyR0b2tlbl0pOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkZXh0ZW5zaW9uc0FycmF5OwoJfQoJCgkvKioKCSAqIFJldHVybnMgYSBzcGVjaWZpYyBleHRlbnNpb24uIEVuZm9yY2VzIHRoZSBzaW5nbGV0b24gbmF0dXJlIG9mIGV4dGVuc2lvbnMgYW5kIHJldHVybnMgYW4gYWxyZWFkeSBpbnN0YW50aWF0ZWQgaW5zdGFuY2UgaWYgdGhlIAoJICogcmVxdWVzdGVkIGV4dGVuc2lvbiBoYXMgYWxyZWFkeSBiZWVuIGNyZWF0ZWQKCSAqIAoJICogQHBhcmFtIFN0cmluZyAkZXh0ZW5zaW9uVG9rZW4KCSAqIEBwYXJhbSBib29sZWFuICRhdXRvbG9hZERlcGVuZGVuY2llcyhvcHRpb25hbCkgV2hldGhlciB0byBsb2FkIGxpYnJhcmllcyByZXF1aXJlZCBieSB0aGUgZXh0ZW5zaW9uLiBGb3Igc2ltcGxlIGNvbmZpZ3VyYXRpb24gdGFza3MsIHRoaXMgY2FuIGJlIGZhbHNlCgkgKiBAcGFyYW0gYXJyYXl8c3RyaW5nIChvcHRpb25hbCkgJGNvbmZpZ0RhdGEgQ29uZmlndXJhdGlvbiBkYXRhIHRoYXQgY2FuIGJlIHBhc3NlZCB0byB0aGUgZXh0ZW5zaW9uIHdoZW4gaXQgaXMgY3JlYXRlZC4gVGhpcyB2YWx1ZSBpcyBhbiBlbXB0eSBzdHJpbmcgd2hlbiBpdCBpcyB1bnVzZWQKCSAqIAoJICogQHJldHVybiBNTV9FeHRlbnNpb24gQW4gaW5zdGFuY2Ugb2YgdGhlIGV4dGVuc2lvbiBtYXRjaGluZyB0aGUgc3VwcGxpZWQgdG9rZW4sIG51bGwgaWYgb25lIGNhbid0IGJlIGZvdW5kCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uKCRleHRlbnNpb25Ub2tlbiwkYXV0b2xvYWREZXBlbmRlbmNpZXM9dHJ1ZSwkY29uZmlnRGF0YT0iIikKCXsKCQlpZiAoaXNzZXQoTU1fRXh0ZW5zaW9uc0ZhY3Rvcnk6OiRpbnN0YW5jZXNbJGV4dGVuc2lvblRva2VuXSkgJiYgKE1NX0V4dGVuc2lvbnNGYWN0b3J5OjokaW5zdGFuY2VzWyRleHRlbnNpb25Ub2tlbl0gaW5zdGFuY2VvZiBNTV9FeHRlbnNpb24pKQoJCXsKCQkJJGV4dCA9IE1NX0V4dGVuc2lvbnNGYWN0b3J5OjokaW5zdGFuY2VzWyRleHRlbnNpb25Ub2tlbl07CgkJCWlmICgkYXV0b2xvYWREZXBlbmRlbmNpZXMpCgkJCXsKCQkJCSRleHQtPmxvYWREZXBlbmRlbmNpZXMoKTsKCQkJfQoJCQlyZXR1cm4gJGV4dDsKCQl9CgkJCgkJc3dpdGNoICgkZXh0ZW5zaW9uVG9rZW4pIAoJCXsKCQkJY2FzZSBNTV9FeHRlbnNpb246OiRVU0VSVk9JQ0VfVE9LRU46CgkJCQlNTV9FeHRlbnNpb25zRmFjdG9yeTo6JGluc3RhbmNlc1skZXh0ZW5zaW9uVG9rZW5dID0gbmV3IE1NX1VzZXJWb2ljZUV4dGVuc2lvbigkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fRXh0ZW5zaW9uOjokTElOS0VESU5fTE9HSU5fVE9LRU46CgkJCQlNTV9FeHRlbnNpb25zRmFjdG9yeTo6JGluc3RhbmNlc1skZXh0ZW5zaW9uVG9rZW5dID0gbmV3IE1NX0xpbmtlZEluTG9naW5FeHRlbnNpb24oJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX0V4dGVuc2lvbjo6JEZBQ0VCT09LX0xPR0lOX1RPS0VOOgoJCQkJTU1fRXh0ZW5zaW9uc0ZhY3Rvcnk6OiRpbnN0YW5jZXNbJGV4dGVuc2lvblRva2VuXSA9IG5ldyBNTV9GYWNlYm9va0xvZ2luRXh0ZW5zaW9uKCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9FeHRlbnNpb246OiRHT09HTEVfTE9HSU5fVE9LRU46CgkJCQlNTV9FeHRlbnNpb25zRmFjdG9yeTo6JGluc3RhbmNlc1skZXh0ZW5zaW9uVG9rZW5dID0gbmV3IE1NX0dvb2dsZUxvZ2luRXh0ZW5zaW9uKCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9FeHRlbnNpb246OiRUV0lUVEVSX0xPR0lOX1RPS0VOOgoJCQkJTU1fRXh0ZW5zaW9uc0ZhY3Rvcnk6OiRpbnN0YW5jZXNbJGV4dGVuc2lvblRva2VuXSA9IG5ldyBNTV9Ud2l0dGVyTG9naW5FeHRlbnNpb24oJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX0V4dGVuc2lvbjo6JEJCUFJFU1NfVE9LRU46CgkJCQlNTV9FeHRlbnNpb25zRmFjdG9yeTo6JGluc3RhbmNlc1skZXh0ZW5zaW9uVG9rZW5dID0gbmV3IE1NX0JCUHJlc3NFeHRlbnNpb24oJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX0V4dGVuc2lvbjo6JEdPT0dMRV9FQ09NTUVSQ0VfVE9LRU46CgkJCQkvLyBUT0RPIE1NX0V4dGVuc2lvbnNGYWN0b3J5OjokaW5zdGFuY2VzWyRleHRlbnNpb25Ub2tlbl0gPSBuZXcgTU1fR29vZ2xlRUNvbW1lcmNlRXh0ZW5zaW9uKCk7CgkJCQlicmVhazsKCQkJZGVmYXVsdDoKCQkJCXJldHVybiBudWxsOwoJCQkJYnJlYWs7CgkJfQoJCQoJCXJldHVybiBNTV9FeHRlbnNpb25zRmFjdG9yeTo6JGluc3RhbmNlc1skZXh0ZW5zaW9uVG9rZW5dOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlRXh0ZW5zaW9ucygkYXV0b2xvYWREZXBlbmRlbmNpZXM9dHJ1ZSkKCXsKCQlnbG9iYWwgJHdwZGI7IAoJCQoJCSR0b2tlbnMgPSBhcnJheShNTV9FeHRlbnNpb246OiRCQlBSRVNTX1RPS0VOLCAKCQkJCQkJTU1fRXh0ZW5zaW9uOjokVVNFUlZPSUNFX1RPS0VOCgkJCQkJKTsKCQkKCQkkZXh0ZW5zaW9ucyA9IGFycmF5KCk7CgkJZm9yZWFjaCAoJHRva2VucyBhcyAkdG9rZW4pCgkJewoJCQkkZXh0ID0gc2VsZjo6Z2V0RXh0ZW5zaW9uKCR0b2tlbiwkYXV0b2xvYWREZXBlbmRlbmNpZXMpOwoJCQlpZiAoKCRleHQgaW5zdGFuY2VvZiBNTV9FeHRlbnNpb24pICYmICgkZXh0LT5oYXNQZXJtaXNzaW9uKCkpKQoJCQl7CgkJCQkkZXh0ZW5zaW9uc1skdG9rZW5dID0gJGV4dDsJCQkKCQkJfQoJCX0KCQkKCQkvL2hhbmRsZSBzb2NpYWwgbG9naW4gZXh0ZW5zaW9ucyBzZXBhcmF0ZWx5IGZvciBlZmZpY2llbmN5IHJlYXNvbnMKCQlpZiAoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JEVYVEVOU0lPTl9TT0NJQUxfTE9HSU4pID09IE1NX01lbWJlck1vdXNlU2VydmljZTo6JEFDVElWRSkKCQl7CgkJCSR0b2tlbnMgPSBhcnJheShNTV9FeHRlbnNpb246OiRMSU5LRURJTl9MT0dJTl9UT0tFTiwKCQkJCQkJCU1NX0V4dGVuc2lvbjo6JEZBQ0VCT09LX0xPR0lOX1RPS0VOLAoJCQkJCQkJTU1fRXh0ZW5zaW9uOjokR09PR0xFX0xPR0lOX1RPS0VOLAoJCQkJCQkJTU1fRXh0ZW5zaW9uOjokVFdJVFRFUl9MT0dJTl9UT0tFTik7CgkJCSR0b2tlblN0cmluZyA9ICInIi5pbXBsb2RlKCInLCciLCAkdG9rZW5zKS4iJyI7CgkJCSRjb25maWdEYXRhID0gYXJyYXkoKTsKCQkJZm9yZWFjaCAoJHRva2VucyBhcyAkdG9rZW4pCgkJCXsKCQkJCSRjb25maWdEYXRhWyR0b2tlbl0gPSBhcnJheSgpOwoJCQl9CgkJCSRzb2NpYWxMb2dpblByb3ZpZGVyU1FMID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9TT0NJQUxfTE9HSU5fUFJPVklERVJTLiIgV0hFUkUgdG9rZW4gSU4gKHskdG9rZW5TdHJpbmd9KSI7CgkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzb2NpYWxMb2dpblByb3ZpZGVyU1FMKTsKCQkJZm9yZWFjaCAoJHJlc3VsdHMgYXMgJHJvdykKCQkJewoJCQkJJGNvbmZpZ0RhdGFbJHJvdy0+dG9rZW5dID0gJHJvdzsJCgkJCX0KCQkJCgkJCWZvcmVhY2ggKCRjb25maWdEYXRhIGFzICR0b2tlbj0+JGNvbmZpZykKCQkJewoJCQkJJGV4dCA9IHNlbGY6OmdldEV4dGVuc2lvbigkdG9rZW4sJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWcpOwoJCQkJaWYgKCgkZXh0IGluc3RhbmNlb2YgTU1fRXh0ZW5zaW9uKSAmJiAoJGV4dC0+aGFzUGVybWlzc2lvbigpKSkKCQkJCXsKCQkJCQkkZXh0ZW5zaW9uc1skdG9rZW5dID0gJGV4dDsJCQkKCQkJCX0KCQkJfQoJCX0KCQkKCQlyZXR1cm4gJGV4dGVuc2lvbnM7Cgl9Cn0=', 0, '2018-11-21 06:38:55'),
(241, 'contentdeliveryengine', 'LyoqCiAqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9Db250ZW50RGVsaXZlcnlFbmdpbmUKewoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZ2V0UG9zdHNXaXRoUmVzdHJpY3Rpb25zKCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJzZWxlY3QgaWQgZnJvbSB7JHdwZGItPnBvc3RzfSB3aGVyZSBwb3N0X3N0YXR1cz0ncHVibGlzaCciOwoJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQoJCSRwb3N0cyA9IGFycmF5KCk7CgkJCgkJaWYoaXNfYXJyYXkoJHJvd3MpICYmIGNvdW50KCRyb3dzKT4wKQoJCXsKCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQl7CgkJCQkkcG9zdHNbXSA9ICRyb3ctPmlkOwoJCQl9CgkJfQoJCQoJCXJldHVybiAkcG9zdHM7Cgl9CgkKCXByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGdldEFjY2Vzc1R5cGUoJG9iaikKCXsKCQlpZigkb2JqIGluc3RhbmNlb2YgTU1fTWVtYmVyc2hpcExldmVsKQoJCXsKCQkJcmV0dXJuICJtZW1iZXJfdHlwZSI7CgkJfQoJCWVsc2UgaWYoJG9iaiBpbnN0YW5jZW9mIE1NX0J1bmRsZSkKCQl7CgkJCXJldHVybiAiYWNjZXNzX3RhZyI7CgkJfQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gZ2V0U2NoZWR1bGUoJGFjY2Vzc0lkLCAkYWNjZXNzVHlwZSkKCXsKCQkkd2hlcmVFbnRyaWVzID0gYXJyYXkoKTsKCQkkd2hlcmUgPSBuZXcgc3RkQ2xhc3MoKTsKCQkkd2hlcmUtPmFjY2Vzc19pZCA9ICRhY2Nlc3NJZDsKCQkkd2hlcmUtPmFjY2Vzc190eXBlID0gJGFjY2Vzc1R5cGU7CgkJJHdoZXJlRW50cmllc1tdID0kd2hlcmU7CgkJCgkJcmV0dXJuIHNlbGY6OmdldENvbnRlbnRTY2hlZHVsZSgkd2hlcmVFbnRyaWVzKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjb3B5U2NoZWR1bGUoJGZyb21PYmosICR0b09iaiwgJG92ZXJ3cml0ZT1mYWxzZSl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRmcm9tQWNjZXNzVHlwZSA9IHNlbGY6OmdldEFjY2Vzc1R5cGUoJGZyb21PYmopOwoJCWlmKCRmcm9tQWNjZXNzVHlwZSA9PT1mYWxzZSl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoImludmFsaWQgZnJvbSBvYmplY3QgdHlwZSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdG9BY2Nlc3NUeXBlID0gc2VsZjo6Z2V0QWNjZXNzVHlwZSgkdG9PYmopOwoJCWlmKCR0b0FjY2Vzc1R5cGUgPT09ZmFsc2UpewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJpbnZhbGlkIHRvIG9iamVjdCB0eXBlIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCWlmKCRvdmVyd3JpdGUpCgkJewoJCQkkc3FsID0gImRlbGV0ZSBmcm9tICIuTU1fVEFCTEVfUE9TVFNfQUNDRVNTLiIgd2hlcmUgYWNjZXNzX2lkPSciLiR0b09iai0+Z2V0SWQoKS4iJyBhbmQgYWNjZXNzX3R5cGU9J3skdG9BY2Nlc3NUeXBlfSciOwoJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJfQoJCQoJCSRlcnJvcnMgPSAiIjsKCQkkZnJvbVNjaGVkdWxlID0gc2VsZjo6Z2V0U2NoZWR1bGUoJGZyb21PYmotPmdldElkKCksICRmcm9tQWNjZXNzVHlwZSk7CgoJCWlmKGNvdW50KCRmcm9tU2NoZWR1bGUpPjApewoJCQlmb3JlYWNoKCRmcm9tU2NoZWR1bGUgYXMgJGRheT0+JHJvd3MpewoJCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KXsKCQkJCQkkcG9zdEVsZW0gPSAibW1fbWVtYmVyX3R5cGVzX29wdCI7CgkJCQkJaWYoJHRvQWNjZXNzVHlwZSAhPSAibWVtYmVyX3R5cGUiKQoJCQkJCQkkcG9zdEVsZW0gPSAibW1fYWNjZXNzX3RhZ3Nfb3B0IjsKCQkJCgkJCQkJJGRhdGEgPSBhcnJheSgKCQkJCQkJJ3Bvc3RfSUQnPT4kcm93LT5wb3N0X2lkLAoJCQkJCQkndHlwZSc9PiR0b0FjY2Vzc1R5cGUsCgkJCQkJCSdlZGl0X2lkJz0+MCwKCQkJCQkJJ2RheSc9PiRkYXksCgkJCQkJCSRwb3N0RWxlbT0+JHRvT2JqLT5nZXRJZCgpLAoJCQkJCSk7CgkJCQkJCgkJCQkJJGFjY2Vzc1JpZ2h0cyA9IG5ldyBNTV9BY2Nlc3NSaWdodHNWaWV3KCk7CgkJCQkJJHJlc3BvbnNlID0gJGFjY2Vzc1JpZ2h0cy0+c2F2ZUFjY2Vzc1JpZ2h0cygkZGF0YSk7CgkJCQkJCgkJCQkJaWYoJHJlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpewoJCQkJCQkkZXJyb3JzIC49ICItXCJ7JHJvdy0+cG9zdF90aXRsZX1cIiBvbiBkYXkgeyRkYXl9IHwiOwoJCQkJCX0KCQkJCX0KCQkJfQoJCQkKCQkJaWYoIWVtcHR5KCRlcnJvcnMpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTY2hlZHVsZSBzdWNjZXNzZnVsbHkgY29waWVkLnxCZWxvdyBhcmUgcGFnZXMgb3IgcG9zdHMgd2UgY291bGQgbm90IGNvcHk6IHwiLiRlcnJvcnMpOwoJCQl9CgkJCQoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJTY2hlZHVsZSBzdWNjZXNzZnVsbHkgY29waWVkIik7CgkJfQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk5vIHNjaGVkdWxlIGZvdW5kIGZvciAiLiRmcm9tT2JqLT5nZXROYW1lKCksIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQoJCgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRDb250ZW50U2NoZWR1bGUoJHdoZXJlRW50cmllcykKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoZW1wdHkoJHdoZXJlRW50cmllcykpCgkJewoJCQlyZXR1cm4gYXJyYXkoKTsKCQl9CgkJCgkJJHNxbCA9ICJzZWxlY3QgcGEuKiwgcC5wb3N0X3RpdGxlIGZyb20gIi5NTV9UQUJMRV9QT1NUU19BQ0NFU1MuIiBwYSwgeyR3cGRiLT5wb3N0c30gcCAKCQkJCQl3aGVyZSAgcC5wb3N0X3N0YXR1cz0ncHVibGlzaCcgYW5kICgiOwoJCWZvcmVhY2goJHdoZXJlRW50cmllcyBhcyAkZW50cnkpCgkJewoJCQlpZighaXNzZXQoJGVudHJ5LT5hY2Nlc3NfdHlwZSkgfHwgIWlzc2V0KCRlbnRyeS0+YWNjZXNzX2lkKSkKCQkJewoJCQkJcmV0dXJuIGFycmF5KCk7CgkJCX0KCQkJCgkJCSRzcWwuPSAiIHBhLmlzX3NtYXJ0X2NvbnRlbnQ9JzAnIGFuZCAoIHBhLmFjY2Vzc190eXBlPSd7JGVudHJ5LT5hY2Nlc3NfdHlwZX0nIGFuZCAgcGEuYWNjZXNzX2lkPSd7JGVudHJ5LT5hY2Nlc3NfaWR9JykgT1IgIjsKCQl9CgkJCgkJJHNxbD0gcHJlZ19yZXBsYWNlKCIvKE9SICkkLyIsICIpIiwgJHNxbCk7IAoJCSRzcWwuPSIgQU5EIHBhLnBvc3RfaWQ9cC5pZCAiOwkKCQkkc3FsLj0iIG9yZGVyIGJ5IEFCUyhkYXlzKSBhc2MgIjsKCQkKCQkkcmV0dXJuQXJyID0gYXJyYXkoKTsKCQkKCQlpZighZW1wdHkoJHNxbCkpCgkJewoJCQkkcm93cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCQkJCgkJCWlmKGlzX2FycmF5KCRyb3dzKSAmJiBjb3VudCgkcm93cyk+MCkKCQkJewoJCQkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQkJewoJCQkJCSRyZXR1cm5BcnJbJHJvdy0+ZGF5c11bXSA9ICRyb3c7CgkJCQl9CgkJCQkKCQkJCXJldHVybiAkcmV0dXJuQXJyOwoJCQl9CgkJfQoJCQoJCXJldHVybiBhcnJheSgpOwoJfQoJCgkvKgoJICogQHBhcmFtICR1c2VycyBpcyBhIGlkPT52YWx1ZSBhc3NvYyBhcnJheSAKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVc2VyU2NoZWR1bGVzKCR1c2VycykKCXsKCQkkbmV3QWNjZXNzQXJyID0gYXJyYXkoKTsKCQkkZGMgPSBuZXcgTU1fUHJvdGVjdGVkQ29udGVudEVuZ2luZSgpOwoJCQoJCWlmKGlzX2FycmF5KCR1c2VycykpCgkJewoJCQkkcG9zdHMgPSBzZWxmOjpnZXRQb3N0c1dpdGhSZXN0cmljdGlvbnMoKTsKCQkJCgkJCWZvcmVhY2goJHVzZXJzIGFzICR1c2VySWQ9PiRlbWFpbCkKCQkJewoJCQkJJHVzZXIgPSBuZXcgTU1fVXNlcigkdXNlcklkKTsKCQkJCQoJCQkJZm9yZWFjaCgkcG9zdHMgYXMgJHBvc3RJZCkKCQkJCXsKCQkJCQkkZGF5cyA9ICRkYy0+ZGF5c1RvQWNjZXNzKCRwb3N0SWQsICR1c2VySWQpOwoJCQkJCQoJCQkJCWlmKCRkYXlzIT09ZmFsc2UgJiYgJGRheXM9PT0wKQoJCQkJCXsKCQkJCQkJJG5ld0FjY2Vzc0FyclskdXNlcklkXSA9ICRwb3N0SWQ7CgkJCQkJfQoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiAkbmV3QWNjZXNzQXJyOwoJfQp9', 0, '2018-11-21 06:38:55'),
(242, 'commissionprofilesview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0NvbW1pc3Npb25Qcm9maWxlc1ZpZXcgZXh0ZW5kcyBNTV9SQkFDQWRtaW5WaWV3CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX1NFVF9ERUZBVUxUID0gInNldERlZmF1bHQiOwoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZUNvbW1pc3Npb25Qcm9maWxlKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUNvbW1pc3Npb25Qcm9maWxlKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NFVF9ERUZBVUxUOgoJCQkJCXJldHVybiAkdGhpcy0+c2V0QXNEZWZhdWx0KCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoJHRhYmxlTmFtZSwgJGZpZWxkcz1udWxsLCBNTV9EYXRhR3JpZCAkZGc9bnVsbCwgJHdoZXJlID0gIiIsICRnZXRUb3RhbD1mYWxzZSkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHJvd3MgPSBwYXJlbnQ6OmdldERhdGEoTU1fVEFCTEVfQ09NTUlTU0lPTl9QUk9GSUxFUywgbnVsbCwgJGRnKTsKCQlyZXR1cm4gJHJvd3M7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc2F2ZUNvbW1pc3Npb25Qcm9maWxlKCRwb3N0KQoJewkKCQkkcHJvZmlsZSA9IG5ldyBNTV9Db21taXNzaW9uUHJvZmlsZSgpOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkgCgkJewoJCQkkcHJvZmlsZSA9IG5ldyBNTV9Db21taXNzaW9uUHJvZmlsZSgkcG9zdFsiaWQiXSk7CgkJCQoJCQlpZighJHByb2ZpbGUtPmlzVmFsaWQoKSkKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiQ2Fubm90IHVwZGF0ZSBjb21taXNzaW9uIHByb2ZpbGUuIEludmFsaWQgSUQgJ3skcG9zdFsnaWQnXX0nIHBhc3NlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCSAJCgkJJHByb2ZpbGUtPnNldE5hbWUoJHBvc3RbIm1tX2Rpc3BsYXlfbmFtZSJdKTsKCSAJJHByb2ZpbGUtPnNldERlc2NyaXB0aW9uKCRwb3N0WyJtbV9kZXNjcmlwdGlvbiJdKTsKCSAJJHByb2ZpbGUtPnNldEluaXRpYWxDb21taXNzaW9uRmxhZygkcG9zdFsibW1fZW5hYmxlX2luaXRpYWxfY29tbWlzc2lvbiJdKTsKCSAJJHByb2ZpbGUtPnNldFJlYmlsbENvbW1pc3Npb25zRmxhZygkcG9zdFsibW1fZW5hYmxlX3JlYmlsbF9jb21taXNzaW9ucyJdKTsKCSAJJHByb2ZpbGUtPnNldERvTGltaXRSZWJpbGxzRmxhZygkcG9zdFsibW1fbGltaXRfcmViaWxsX2NvbW1pc3Npb25zIl0pOwoJIAkkcHJvZmlsZS0+c2V0RG9SZXZlcnNlQ29tbWlzc2lvbnNGbGFnKCRwb3N0WyJtbV9lbmFibGVfcmV2ZXJzZV9jb21taXNzaW9ucyJdKTsKCSAJJHByb2ZpbGUtPnNldFJlYmlsbENvbW1pc3Npb25UeXBlKCRwb3N0WyJtbV9yZWJpbGxfY29tbWlzc2lvbl90eXBlIl0pOwoJIAkkcHJvZmlsZS0+c2V0UmViaWxsQ29tbWlzc2lvblZhbHVlKCRwb3N0WyJtbV9yZWJpbGxfY29tbWlzc2lvbl92YWx1ZSJdKTsKCSAJJHByb2ZpbGUtPnNldFJlYmlsbENvbW1pc3Npb25MaW1pdCgkcG9zdFsibW1fbGltaXRfcmViaWxsX2NvbW1pc3Npb25fdmFsdWUiXSk7CgkJCgkJcmV0dXJuICRwcm9maWxlLT5jb21taXREYXRhKCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcmVtb3ZlQ29tbWlzc2lvblByb2ZpbGUoJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbImlkIl0pICYmIGludHZhbCgkcG9zdFsiaWQiXSkgPiAwKQoJCXsKCQkJJHByb2ZpbGUgPSBuZXcgTU1fQ29tbWlzc2lvblByb2ZpbGUoJHBvc3RbImlkIl0sIGZhbHNlKTsKCQkJJHJlc3VsdCA9ICRwcm9maWxlLT5kZWxldGUoKTsKCQkJCgkJCWlmKCRyZXN1bHQpIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0gCgkJCWVsc2UgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlRoaXMgY29tbWlzc2lvbiBwcm9maWxlIGhhcyBleGlzdGluZyBhc3NvY2lhdGlvbnMgYW5kIGNhbid0IGJlIHJlbW92ZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBjb21taXNzaW9uIHByb2ZpbGUuIE5vIElEIHNwZWNpZmllZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQogCXByaXZhdGUgZnVuY3Rpb24gc2V0QXNEZWZhdWx0KCRwb3N0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZihpc3NldCgkcG9zdFsiaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJpZCJdKSA+IDApCgkJewoJCQkkc3FsID0gInVwZGF0ZSAiLk1NX1RBQkxFX0NPTU1JU1NJT05fUFJPRklMRVMuIiBzZXQgaXNfZGVmYXVsdD0nMCciOwoJCQkkd3BkYi0+cXVlcnkoJHNxbCk7CgkJCQoJCQkkc3FsID0gInVwZGF0ZSAiLk1NX1RBQkxFX0NPTU1JU1NJT05fUFJPRklMRVMuIiBzZXQgaXNfZGVmYXVsdD0nMScgd2hlcmUgaWQ9JyVkJyBsaW1pdCAxIjsKCQkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHBvc3RbImlkIl0pKTsKCQkJCgkJCWlmKCRyZXN1bHRzKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNldCBjb21taXNzaW9uIHByb2ZpbGUgYXMgZGVmYXVsdC4gTm8gSUQgc3BlY2lmaWVkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(243, 'membermouseeventlistener', 'LyoqCioKKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQoqIChjKSBNZW1iZXJtb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgoqIAoqIFRoZSBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXIgaXMgaW1wbGVtZW50ZWQgYnkgcGF5bWVudCBzZXJ2aWNlcyAob3IgcG90ZW50aWFsbHkgb3RoZXIgb2JqZWN0cykgdGhhdCBhcmUgZGVzaWduZWQgdG8gcmVjZWl2ZSBpbmZvcm1hdGlvbiBhYm91dCBldmVudHMgd2hlbiB0aGluZ3MgCiogaGFwcGVuIGluIE1lbWJlck1vdXNlLiBUaGlzIGlzIG5vdCBhIHRydWUgZXZlbnQtZHJpdmVuIG1vZGVsLCBiZWNhdXNlIGEgY29tcG9uZW50IHdpbGwgaGF2ZSB0byBzcGVjaWZpY2FsbHkgYmUgY2FsbGVkIHRvIGdlbmVyYXRlIHRoZSBldmVudHMKKiB0aGF0IGltcGxlbWVudG9ycyB3aWxsIGJlIGludGVyZXN0ZWQgaW4uCioKKi8KCmludGVyZmFjZSBNTV9NZW1iZXJNb3VzZUV2ZW50TGlzdGVuZXIgewoJCgkvL3RoZXNlIGNvbnN0YW50cyByZXByZXNlbnQgdGhlIGV2ZW50IHR5cGVzCgkKCWNvbnN0IFBST0RVQ1RfQURERUQgICAgPSAxOwoJY29uc3QgUFJPRFVDVF9SRU1PVkVEICA9IDI7Cgljb25zdCBQUk9EVUNUX1VQREFURUQgID0gMzsKCWNvbnN0IENPVVBPTl9BRERFRCAgICAgPSA0OwoJY29uc3QgQ09VUE9OX1JFTU9WRUQgICA9IDU7Cgljb25zdCBDT1VQT05fVVBEQVRFRCAgID0gNjsKCQoJLyoqCgkgKiBDYWxsZWQgd2hlbiBhIG5ldyBwcm9kdWN0IGlzIGFkZGVkIHRvIE1lbWJlck1vdXNlLiAKCSAqIEBwYXJhbSAkZXZlbnRUeXBlIEEgY29uc3RhbnQgcmVwcmVzZW50aW5nIHRoZSBldmVudCB0eXBlLCBhcyBkZWZpbmVkIGluIE1NX01lbWJlck1vdXNlRXZlbnRMaXN0ZW5lcgoJICogQHBhcmFtICRldmVudERhdGEgdmFyaWFibGUgVGhlIGRhdGEgdGhhdCBpcyBhdHRhY2hlZCB0byB0aGUgZXZlbnQgCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBldmVudFJlY2VpdmVkKCRldmVudFR5cGUsICRldmVudERhdGEpOwoJCn0KCg==', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(244, 'limelightshippingmethodsview', 'LyoqCiAqIAogKiAKICogTWVtYmVyTW91c2UoVE0pIChodHRwOi8vd3d3Lm1lbWJlcm1vdXNlLmNvbSkKICogKGMpIE1lbWJlck1vdXNlLCBMTEMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqLwpjbGFzcyBNTV9MaW1lTGlnaHRTaGlwcGluZ01ldGhvZHNWaWV3IGV4dGVuZHMgTU1fUkJBQ1Byb2R1Y3RNYW5hZ2VyVmlldwp7CQoJcHVibGljIHN0YXRpYyAkTU1fSlNBQ1RJT05fR0VUX0xJTUVMSUdIVF9TSElQUElOR19NRVRIT0RTID0gImdldExpbWVMaWdodFNoaXBwaW5nTWV0aG9kcyI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9HRVRfTElNRUxJR0hUX1NISVBQSU5HX0RFU0NSSVBUSU9OID0gImdldExMU2hpcHBpbmdEZXNjcmlwdGlvbiI7CgkKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZUxpbWVMaWdodFNoaXBwaW5nTWV0aG9kKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUxpbWVMaWdodFNoaXBwaW5nTWV0aG9kKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0dFVF9MSU1FTElHSFRfU0hJUFBJTkdfTUVUSE9EUzoKCQkJCQlyZXR1cm4gJHRoaXMtPmdldExpbWVMaWdodFNoaXBwaW5nTWV0aG9kcygkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9HRVRfTElNRUxJR0hUX1NISVBQSU5HX0RFU0NSSVBUSU9OOgoJCQkJCXJldHVybiAkdGhpcy0+Z2V0TGltZUxpZ2h0U2hpcHBpbmdEZXNjcmlwdGlvbigkcG9zdCk7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgkcG9zdCkKCXsKCQlyZXR1cm4gcGFyZW50OjpnZXREYXRhKE1NX1RBQkxFX0xJTUVMSUdIVF9TSElQUElOR19NRVRIT0RTLCBudWxsLCAkcG9zdCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gc2F2ZUxpbWVMaWdodFNoaXBwaW5nTWV0aG9kKCRwb3N0KQoJewoJCSRsaW1lTGlnaHRTaGlwcGluZ01ldGhvZCA9IG5ldyBNTV9MaW1lTGlnaHRTaGlwcGluZ01ldGhvZCgpOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkgCgkJewoJCQkkbGltZUxpZ2h0U2hpcHBpbmdNZXRob2QgPSBuZXcgTU1fTGltZUxpZ2h0U2hpcHBpbmdNZXRob2QoJHBvc3RbImlkIl0pOwoJCQkKCQkJaWYoISRsaW1lTGlnaHRTaGlwcGluZ01ldGhvZC0+aXNWYWxpZCgpKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJDYW5ub3QgdXBkYXRlIExpbWUgTGlnaHQgc2hpcHBpbmcgbWV0aG9kIG1hcHBpbmcuIEludmFsaWQgSUQgJ3skcG9zdFsnaWQnXX0nIHBhc3NlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0KCQkKCQkvLyBnZXQgTGltZSBMaWdodCBzaGlwcGluZyBtZXRob2QKCQkkbGltZUxpZ2h0U2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2UoTU1fUGF5bWVudFNlcnZpY2U6OiRMSU1FTElHSFRfU0VSVklDRV9UT0tFTik7CgkJJHJlc3VsdCA9ICRsaW1lTGlnaHRTZXJ2aWNlLT5nZXRTaGlwcGluZ01ldGhvZCgkcG9zdFsibGltZWxpZ2h0X3NoaXBwaW5nX21ldGhvZF9pZCJdKTsKCQkKCQlpZihNTV9SZXNwb25zZTo6aXNFcnJvcigkcmVzdWx0KSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCBzYXZlIExpbWUgTGlnaHQgc2hpcHBpbmcgbWV0aG9kIG1hcHBpbmcuIEludmFsaWQgTGltZSBMaWdodCBzaGlwcGluZyBtZXRob2QgSUQgJ3skcG9zdFsnbGltZWxpZ2h0X3NoaXBwaW5nX21ldGhvZF9pZCddfScgcGFzc2VkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkbGxTaGlwcGluZ0luZm8gPSAkcmVzdWx0LT5tZXNzYWdlOwoJCQoJCS8vIGdldCBNZW1iZXJNb3VzZSBzaGlwcGluZyBtZXRob2QKCQkkc3BsaXQgPSBleHBsb2RlKCItIiwgJHBvc3RbIm1tX29wdGlvbl9rZXkiXSk7CgkJJHRva2VuID0gJHNwbGl0WzBdOwoJCQoJCS8vZ2V0IHRoZSBzaGlwcGluZyBtZXRob2QKCQkkc2hpcHBpbmdNZXRob2QgPSBNTV9TaGlwcGluZ01ldGhvZDo6Z2V0U2hpcHBpbmdNZXRob2RCeVRva2VuKCR0b2tlbik7CgkJJHNoaXBwaW5nT3B0aW9uID0gbnVsbDsKCQkKCQlpZigkc2hpcHBpbmdNZXRob2QpCgkJewoJCQkkb3B0aW9uUmV0cmlldmFsUmVzcG9uc2UgPSAkc2hpcHBpbmdNZXRob2QtPmdldFNoaXBwaW5nT3B0aW9uQnlLZXkobmV3IE1NX09yZGVyKCksICRwb3N0WyJtbV9vcHRpb25fa2V5Il0pOwoJCQkkc2hpcHBpbmdPcHRpb24gPSAkb3B0aW9uUmV0cmlldmFsUmVzcG9uc2UtPm1lc3NhZ2U7CgkJCQoJCQlpZigkc2hpcHBpbmdPcHRpb24pCgkJCXsKCQkJCSRtbVNoaXBwaW5nTWV0aG9kTmFtZSA9ICJ7JHNoaXBwaW5nT3B0aW9uLT5nZXROYW1lKCl9ICh7JHNoaXBwaW5nT3B0aW9uLT5nZXRSYXRlKHRydWUpfSkiOwoJCQl9CgkJfQoJCQoJCWlmKGlzX251bGwoJHNoaXBwaW5nT3B0aW9uKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCBzYXZlIExpbWUgTGlnaHQgc2hpcHBpbmcgbWV0aG9kIG1hcHBpbmcuIEludmFsaWQgTWVtYmVyTW91c2Ugc2hpcHBpbmcgbWV0aG9kICd7JHBvc3RbIm1tX29wdGlvbl9rZXkiXX0nIHBhc3NlZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy8gdmFsaWRhdGUgbWFwcGluZwoJCSRyYXRlTWlzbWF0Y2ggPSAiIjsKCQkKCQlpZihmbG9hdHZhbCgkbGxTaGlwcGluZ0luZm9bImluaXRpYWxfYW1vdW50Il0pICE9ICRzaGlwcGluZ09wdGlvbi0+Z2V0UmF0ZSgpKQoJCXsKCQkJJHJhdGVNaXNtYXRjaCA9ICJSQVRFIE1JU01BVENIXG4iOwoJCQkkcmF0ZU1pc21hdGNoIC49ICJMaW1lIExpZ2h0IFJhdGU6ICIuX21tZigkbGxTaGlwcGluZ0luZm9bImluaXRpYWxfYW1vdW50Il0sICJVU0QiKS4iXG4iOwoJCQkkcmF0ZU1pc21hdGNoIC49ICJNZW1iZXJNb3VzZSBSYXRlOiAiLiRzaGlwcGluZ09wdGlvbi0+Z2V0UmF0ZSh0cnVlKS4iXG5cbiI7CgkJfQoJCQoJCWlmKCFlbXB0eSgkcmF0ZU1pc21hdGNoKSkKCQl7CgkJCSRlcnJvck1zZyA9ICJJbnZhbGlkIHNoaXBwaW5nIG1ldGhvZCBtYXBwaW5nOlxuTGltZSBMaWdodCBzaGlwcGluZyBtZXRob2Qgc2V0dGluZ3MgbXVzdCBtYXRjaCB0aGUgTWVtYmVyTW91c2Ugc2hpcHBpbmcgbWV0aG9kIHNldHRpbmdzLlxuXG4iOwoJCQkJCgkJCSRlcnJvck1zZyAuPSAkcmF0ZU1pc21hdGNoOwoJCQkJCgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGVycm9yTXNnLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkgCQoJIAkkbGltZUxpZ2h0U2hpcHBpbmdNZXRob2QtPnNldE1NT3B0aW9uS2V5KCRwb3N0WyJtbV9vcHRpb25fa2V5Il0pOwoJIAkkbGltZUxpZ2h0U2hpcHBpbmdNZXRob2QtPnNldExpbWVMaWdodFNoaXBwaW5nTWV0aG9kSWQoJHBvc3RbImxpbWVsaWdodF9zaGlwcGluZ19tZXRob2RfaWQiXSk7CgkgCSRsaW1lTGlnaHRTaGlwcGluZ01ldGhvZC0+c2V0TGltZUxpZ2h0U2hpcHBpbmdNZXRob2ROYW1lKCRwb3N0WyJsaW1lbGlnaHRfc2hpcHBpbmdfbWV0aG9kX25hbWUiXSk7CgkJCgkJcmV0dXJuICRsaW1lTGlnaHRTaGlwcGluZ01ldGhvZC0+Y29tbWl0RGF0YSgpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHJlbW92ZUxpbWVMaWdodFNoaXBwaW5nTWV0aG9kKCRwb3N0KQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZihpc3NldCgkcG9zdFsiaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJpZCJdKSA+IDApCgkJewoJCQkkbGltZUxpZ2h0U2hpcHBpbmdNZXRob2QgPSBuZXcgTU1fTGltZUxpZ2h0U2hpcHBpbmdNZXRob2QoJHBvc3RbImlkIl0sIGZhbHNlKTsKCQkJJHJlc3VsdCA9ICRsaW1lTGlnaHRTaGlwcGluZ01ldGhvZC0+ZGVsZXRlKCk7CgkJCQoJCQlpZigkcmVzdWx0KSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJCQl9IAoJCQllbHNlIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZW1vdmluZyBMaW1lIExpZ2h0IHNoaXBwaW5nIG1ldGhvZCBtYXBwaW5nIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBMaW1lIExpZ2h0IHNoaXBwaW5nIG1ldGhvZCBtYXBwaW5nLiBObyBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0TGltZUxpZ2h0U2hpcHBpbmdNZXRob2RzKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJjYW1wYWlnbl9pZCJdKSkKCQl7CgkJCSRsaW1lTGlnaHRTZXJ2aWNlID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRQYXltZW50U2VydmljZShNTV9QYXltZW50U2VydmljZTo6JExJTUVMSUdIVF9TRVJWSUNFX1RPS0VOKTsKCQkJcmV0dXJuIE1NX0h0bWxVdGlsczo6Z2VuZXJhdGVTZWxlY3Rpb25zTGlzdCgkbGltZUxpZ2h0U2VydmljZS0+Z2V0U2hpcHBpbmdNZXRob2RzQnlDYW1wYWlnbigkcG9zdFsiY2FtcGFpZ25faWQiXSkpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFcnJvciByZXRyaWV2aW5nIHNoaXBwaW5nIG1ldGhvZHMuIE5vIGNhbXBhaWduIElEIHNwZWNpZmllZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gZ2V0TGltZUxpZ2h0U2hpcHBpbmdEZXNjcmlwdGlvbigkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsic2hpcHBpbmdfaWQiXSkpCgkJewoJCQkkbGltZUxpZ2h0U2VydmljZSA9IE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6Z2V0UGF5bWVudFNlcnZpY2UoTU1fUGF5bWVudFNlcnZpY2U6OiRMSU1FTElHSFRfU0VSVklDRV9UT0tFTik7CgkJCXJldHVybiAkbGltZUxpZ2h0U2VydmljZS0+Z2V0U2hpcHBpbmdEZXNjcmlwdGlvbigkcG9zdFsic2hpcHBpbmdfaWQiXSk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVycm9yIHJldHJpZXZpbmcgc2hpcHBpbmcgaW5mb3JtYXRpb24uIE5vIHNoaXBwaW5nIG1ldGhvZCBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(245, 'commissionprofile', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0NvbW1pc3Npb25Qcm9maWxlIGV4dGVuZHMgTU1fRW50aXR5CnsJCglwdWJsaWMgc3RhdGljICRERkxUX0NPTU1JU1NJT05fUFJPRklMRV9JRCA9ICItMSI7CgkKCXB1YmxpYyBzdGF0aWMgJENPTU1JU1NJT05fVFlQRV9ERUZBVUxUID0gImRlZmF1bHQiOwoJcHVibGljIHN0YXRpYyAkQ09NTUlTU0lPTl9UWVBFX1BFUkNFTlQgPSAicGVyY2VudCI7CglwdWJsaWMgc3RhdGljICRDT01NSVNTSU9OX1RZUEVfRkxBVFJBVEUgPSAiZmxhdHJhdGUiOwoJCglwcml2YXRlICRuYW1lID0gIiI7Cglwcml2YXRlICRpc0RlZmF1bHRGbGFnID0gIjAiOwoJcHJpdmF0ZSAkZGVzY3JpcHRpb24gPSAiIjsKCXByaXZhdGUgJGluaXRpYWxDb21taXNzaW9uRmxhZyA9ICIxIjsKCXByaXZhdGUgJHJlYmlsbENvbW1pc3Npb25zRmxhZyA9ICIwIjsKCXByaXZhdGUgJHJlYmlsbENvbW1pc3Npb25UeXBlID0gImRlZmF1bHQiOwoJcHJpdmF0ZSAkcmViaWxsQ29tbWlzc2lvblZhbHVlID0gIjAiOwoJcHJpdmF0ZSAkZG9MaW1pdFJlYmlsbHNGbGFnID0gIjAiOwoJcHJpdmF0ZSAkcmViaWxsQ29tbWlzc2lvbkxpbWl0ID0gIjAiOwoJcHJpdmF0ZSAkZG9SZXZlcnNlQ29tbWlzc2lvbnNGbGFnID0gIjEiOwoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RGF0YSgpIAoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9DT01NSVNTSU9OX1BST0ZJTEVTLiIgV0hFUkUgaWQ9JyIuJHRoaXMtPmlkLiInOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIHsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPm5hbWUgPSAkZGF0YS0+bmFtZTsKCQkJJHRoaXMtPmlzRGVmYXVsdEZsYWcgPSAkZGF0YS0+aXNfZGVmYXVsdDsKCQkJJHRoaXMtPmRlc2NyaXB0aW9uID0gJGRhdGEtPmRlc2NyaXB0aW9uOwoJCQkkdGhpcy0+aW5pdGlhbENvbW1pc3Npb25GbGFnID0gJGRhdGEtPmluaXRpYWxfY29tbWlzc2lvbl9lbmFibGVkOwoJCQkkdGhpcy0+cmViaWxsQ29tbWlzc2lvbnNGbGFnID0gJGRhdGEtPnJlYmlsbF9jb21taXNzaW9uc19lbmFibGVkOwoJCQkkdGhpcy0+cmViaWxsQ29tbWlzc2lvblR5cGUgPSAkZGF0YS0+cmViaWxsX2NvbW1pc3Npb25fdHlwZTsKCQkJJHRoaXMtPnJlYmlsbENvbW1pc3Npb25WYWx1ZSA9ICRkYXRhLT5yZWJpbGxfY29tbWlzc2lvbl92YWx1ZTsKCQkJJHRoaXMtPmRvTGltaXRSZWJpbGxzRmxhZyA9ICRkYXRhLT5kb19saW1pdF9yZWJpbGxfY29tbWlzc2lvbnM7CgkJCSR0aGlzLT5yZWJpbGxDb21taXNzaW9uTGltaXQgPSAkZGF0YS0+cmViaWxsX2NvbW1pc3Npb25fbGltaXQ7CgkJCSR0aGlzLT5kb1JldmVyc2VDb21taXNzaW9uc0ZsYWcgPSAkZGF0YS0+ZG9fcmV2ZXJzZV9jb21taXNzaW9uczsKIAkJCQoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSAKCQl7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkZG9VcGRhdGUgPSBpc3NldCgkdGhpcy0+aWQpICYmICR0aGlzLT5pZCAhPSAiIiAmJiBpbnR2YWwoJHRoaXMtPmlkKSA+IDA7CgkJCgkJTU1fVHJhbnNhY3Rpb246OmJlZ2luKCk7CgkJdHJ5CgkJewkKCQkJaWYoISRkb1VwZGF0ZSkgCgkJCXsKCQkJCSRzcWwgPSAiaW5zZXJ0IGludG8gIi5NTV9UQUJMRV9DT01NSVNTSU9OX1BST0ZJTEVTLiIgc2V0ICIgLgoJCQkgCQkJIgluYW1lID0gJyVzJywiIC4KCQkJIAkJCSIJaXNfZGVmYXVsdD0nJWQnLCIgLgoJCQkgCQkJIglkZXNjcmlwdGlvbj0nJXMnLCIgLgoJCQkgCQkJIglpbml0aWFsX2NvbW1pc3Npb25fZW5hYmxlZD0nJWQnLCIgLgoJCQkgCQkJIglyZWJpbGxfY29tbWlzc2lvbnNfZW5hYmxlZD0nJWQnLCIgLgoJCQkgCQkJIglyZWJpbGxfY29tbWlzc2lvbl90eXBlPSclcycsIiAuCgkJCSAJCQkiCXJlYmlsbF9jb21taXNzaW9uX3ZhbHVlPSclZicsIiAuCgkJCSAJCQkiCWRvX2xpbWl0X3JlYmlsbF9jb21taXNzaW9ucz0nJWQnLCIgLgoJCQkgCQkJIglyZWJpbGxfY29tbWlzc2lvbl9saW1pdD0nJWQnLCAiIC4KCQkJIAkJCSIJZG9fcmV2ZXJzZV9jb21taXNzaW9ucz0nJWQnIiAuCgkJCSAJCQkiIjsKCQkJfQoJCSAJZWxzZSAKCQkgCXsKCQkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfQ09NTUlTU0lPTl9QUk9GSUxFUy4iIHNldCAiIC4KCQkJCQkJIgluYW1lID0gJyVzJywiIC4KCQkJIAkJCSIJaXNfZGVmYXVsdD0nJWQnLCIgLgoJCQkgCQkJIglkZXNjcmlwdGlvbj0nJXMnLCIgLgoJCQkgCQkJIglpbml0aWFsX2NvbW1pc3Npb25fZW5hYmxlZD0nJWQnLCIgLgoJCQkgCQkJIglyZWJpbGxfY29tbWlzc2lvbnNfZW5hYmxlZD0nJWQnLCIgLgoJCQkgCQkJIglyZWJpbGxfY29tbWlzc2lvbl90eXBlPSclcycsIiAuCgkJCSAJCQkiCXJlYmlsbF9jb21taXNzaW9uX3ZhbHVlPSclZicsIiAuCgkJCSAJCQkiCWRvX2xpbWl0X3JlYmlsbF9jb21taXNzaW9ucz0nJWQnLCIgLgoJCQkgCQkJIglyZWJpbGxfY29tbWlzc2lvbl9saW1pdD0nJWQnLCIgLgoJCQkgCQkJIglkb19yZXZlcnNlX2NvbW1pc3Npb25zPSclZCcgd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyIgLgoJCQkgCQkJIiI7CgkJIAl9CgkJCQoJCSAJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPm5hbWUsICR0aGlzLT5pc0RlZmF1bHRGbGFnLCAkdGhpcy0+ZGVzY3JpcHRpb24sICR0aGlzLT5pbml0aWFsQ29tbWlzc2lvbkZsYWcsIAoJCSAJCQkJCQkJCQkJJHRoaXMtPnJlYmlsbENvbW1pc3Npb25zRmxhZywgJHRoaXMtPnJlYmlsbENvbW1pc3Npb25UeXBlLCAkdGhpcy0+cmViaWxsQ29tbWlzc2lvblZhbHVlLCAKCQkgCQkJCQkJCQkJCSR0aGlzLT5kb0xpbWl0UmViaWxsc0ZsYWcsICR0aGlzLT5yZWJpbGxDb21taXNzaW9uTGltaXQsICR0aGlzLT5kb1JldmVyc2VDb21taXNzaW9uc0ZsYWcpOwoJCSAJCQkJCQkJCQkJCQoJCSAJJHJlc3VsdCA9ICR3cGRiLT5xdWVyeSgkcHJlcGFyZWRTcWwpOwoJCSAJCgkJIAlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkgCXsKCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNvbW1pc3Npb24gcHJvZmlsZSAoeyR3cGRiLT5sYXN0X2Vycm9yfSkiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkgCX0KCQkgCQoJCSAJaWYoISRkb1VwZGF0ZSkgCgkJIAl7CgkJIAkJJHRoaXMtPmlkID0gJHdwZGItPmluc2VydF9pZDsKCQkgCX0KCQl9CgkJY2F0Y2goRXhjZXB0aW9uICRleCkKCQl7CQoJCSAJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBjb21taXNzaW9uIHByb2ZpbGUiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJTU1fVHJhbnNhY3Rpb246OmNvbW1pdCgpOwoJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCkKCXsJCgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmKCEkdGhpcy0+aGFzQXNzb2NpYXRpb25zKCkpCgkJewoJCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfQ09NTUlTU0lPTl9QUk9GSUxFUy4iIFdIRVJFIGlkPSclZCcgTElNSVQgMSI7CgkJCSRyZXN1bHRzID0gJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5pZCkpOwoJCQkKCQkJaWYoJHJlc3VsdHMpIAoJCQl7CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJfQoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBoYXNBc3NvY2lhdGlvbnMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvLyBjaGVjayBpZiBjb21taXNzaW9uIHByb2ZpbGUgaXMgdGhlIGRlZmF1bHQKCQkkc3FsID0gInNlbGVjdCAqIGZyb20gIi5NTV9UQUJMRV9DT01NSVNTSU9OX1BST0ZJTEVTLiIgd2hlcmUgaWQ9J3skdGhpcy0+aWR9JyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyb3ctPmlzX2RlZmF1bHQgPT0gIjEiKSAKCQl7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQkvLyBjaGVjayBpZiBjb21taXNzaW9uIHByb2ZpbGUgaXMgYXNzb2NpYXRlZCB3aXRoIG9uZSBvciBtb3JlIHByb2R1Y3RzCgkJJHNxbCA9ICJTRUxFQ1QgY291bnQoKikgYXMgdG90YWwgRlJPTSAiLk1NX1RBQkxFX1BST0RVQ1RTLiIgV0hFUkUgY29tbWlzc2lvbl9wcm9maWxlX2lkPSd7JHRoaXMtPmlkfSciOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZigkcm93LT50b3RhbCA+IDApIAoJCXsKCQkJcmV0dXJuIHRydWU7CQoJCX0KCQkKCQkvLyBjaGVjayBpZiBjb21taXNzaW9uIHByb2ZpbGUgaXMgYXNzb2NpYXRlZCB3aXRoIG9uZSBvciBtb3JlIHBhcnRuZXIgcGF5b3V0cwoJCSRzcWwgPSAiU0VMRUNUIGNvdW50KCopIGFzIHRvdGFsIEZST00gIi5NTV9UQUJMRV9BRkZJTElBVEVfUEFSVE5FUl9QQVlPVVRTLiIgV0hFUkUgY29tbWlzc2lvbl9wcm9maWxlX2lkPSd7JHRoaXMtPmlkfSciOwoJCSRyb3cgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZigkcm93LT50b3RhbCA+IDApCgkJewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQoJCgkKCS8qKiBHRVRURVJTL1NFVFRFUlMgKiovCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXROYW1lKCRzdHIpIAoJewoJCSR0aGlzLT5uYW1lID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldE5hbWUoKQoJewoJCXJldHVybiAkdGhpcy0+bmFtZTsKCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXRJc0RlZmF1bHQoJGZsYWcpIAoJewoJCSR0aGlzLT5pc0RlZmF1bHRGbGFnID0gJGZsYWc7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBpc0RlZmF1bHQoKQoJewoJCXJldHVybiAoJHRoaXMtPmlzRGVmYXVsdEZsYWcgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldERlc2NyaXB0aW9uKCRzdHIpIAoJewoJCSR0aGlzLT5kZXNjcmlwdGlvbiA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREZXNjcmlwdGlvbigpCgl7CgkJcmV0dXJuICR0aGlzLT5kZXNjcmlwdGlvbjsKCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXRJbml0aWFsQ29tbWlzc2lvbkZsYWcoJGZsYWcpIAoJewoJCSR0aGlzLT5pbml0aWFsQ29tbWlzc2lvbkZsYWcgPSAkZmxhZzsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGluaXRpYWxDb21taXNzaW9uRW5hYmxlZCgpCgl7CgkJcmV0dXJuICgkdGhpcy0+aW5pdGlhbENvbW1pc3Npb25GbGFnID09ICIxIikgPyB0cnVlIDogZmFsc2U7Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmViaWxsQ29tbWlzc2lvbnNGbGFnKCRmbGFnKSAKCXsKCQkkdGhpcy0+cmViaWxsQ29tbWlzc2lvbnNGbGFnID0gJGZsYWc7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiByZWJpbGxDb21taXNzaW9uc0VuYWJsZWQoKQoJewoJCXJldHVybiAoJHRoaXMtPnJlYmlsbENvbW1pc3Npb25zRmxhZyA9PSAiMSIpID8gdHJ1ZSA6IGZhbHNlOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldFJlYmlsbENvbW1pc3Npb25UeXBlKCR0eXBlKSAKCXsKCQkkdmFsaWRUeXBlcyA9IGFycmF5KCk7CgkJJHZhbGlkVHlwZXNbXSA9IHNlbGY6OiRDT01NSVNTSU9OX1RZUEVfREVGQVVMVDsKCQkkdmFsaWRUeXBlc1tdID0gc2VsZjo6JENPTU1JU1NJT05fVFlQRV9QRVJDRU5UOwoJCSR2YWxpZFR5cGVzW10gPSBzZWxmOjokQ09NTUlTU0lPTl9UWVBFX0ZMQVRSQVRFOwoJCQoJCWlmKGluX2FycmF5KCR0eXBlLCAkdmFsaWRUeXBlcykpCgkJewoJCQkkdGhpcy0+cmViaWxsQ29tbWlzc2lvblR5cGUgPSAkdHlwZTsKCQl9CgkJZWxzZQoJCXsKCQkJJHRoaXMtPnJlYmlsbENvbW1pc3Npb25UeXBlID0gc2VsZjo6JENPTU1JU1NJT05fVFlQRV9ERUZBVUxUOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlYmlsbENvbW1pc3Npb25UeXBlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnJlYmlsbENvbW1pc3Npb25UeXBlOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldFJlYmlsbENvbW1pc3Npb25WYWx1ZSgkdmFsdWUpIAoJewoJCSR0aGlzLT5yZWJpbGxDb21taXNzaW9uVmFsdWUgPSAkdmFsdWU7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZWJpbGxDb21taXNzaW9uVmFsdWUoKQoJewoJCWlmKCR0aGlzLT5nZXRSZWJpbGxDb21taXNzaW9uVHlwZSgpID09IHNlbGY6OiRDT01NSVNTSU9OX1RZUEVfRkxBVFJBVEUpCgkJewoJCQlyZXR1cm4gbnVtYmVyX2Zvcm1hdCgkdGhpcy0+cmViaWxsQ29tbWlzc2lvblZhbHVlLCAyLCcuJywnJyk7CgkJfQoJCWVsc2UgaWYoJHRoaXMtPmdldFJlYmlsbENvbW1pc3Npb25UeXBlKCkgPT0gc2VsZjo6JENPTU1JU1NJT05fVFlQRV9QRVJDRU5UKQoJCXsKCQkJcmV0dXJuIG51bWJlcl9mb3JtYXQoJHRoaXMtPnJlYmlsbENvbW1pc3Npb25WYWx1ZSwgMCwnLicsJycpOwoJCX0KCQllbHNlCgkJewoJCQlyZXR1cm4gMDsKCQl9Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gc2V0RG9MaW1pdFJlYmlsbHNGbGFnKCRmbGFnKSAKCXsKCQkkdGhpcy0+ZG9MaW1pdFJlYmlsbHNGbGFnID0gJGZsYWc7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBkb0xpbWl0UmViaWxscygpCgl7CgkJcmV0dXJuICgkdGhpcy0+ZG9MaW1pdFJlYmlsbHNGbGFnID09ICIxIikgPyB0cnVlIDogZmFsc2U7Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gc2V0UmViaWxsQ29tbWlzc2lvbkxpbWl0KCR2YWx1ZSkgCgl7CgkJJHRoaXMtPnJlYmlsbENvbW1pc3Npb25MaW1pdCA9ICR2YWx1ZTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFJlYmlsbENvbW1pc3Npb25MaW1pdCgpCgl7CgkJcmV0dXJuICR0aGlzLT5yZWJpbGxDb21taXNzaW9uTGltaXQ7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRSZWJpbGxDb25maWdEZXNjcmlwdGlvbigpCgl7CgkJJGRlc2MgPSAiIjsKCQkKCQlpZigkdGhpcy0+Z2V0UmViaWxsQ29tbWlzc2lvblR5cGUoKSA9PSBNTV9Db21taXNzaW9uUHJvZmlsZTo6JENPTU1JU1NJT05fVFlQRV9ERUZBVUxUKQoJCXsKCQkJJGRlc2MgLj0gInNhbWUgY29tbWlzc2lvbiBhcyBpbml0aWFsIjsKCQl9CgkJZWxzZSBpZigkdGhpcy0+Z2V0UmViaWxsQ29tbWlzc2lvblR5cGUoKSA9PSBNTV9Db21taXNzaW9uUHJvZmlsZTo6JENPTU1JU1NJT05fVFlQRV9QRVJDRU5UKQoJCXsKCQkJJGRlc2MgLj0gInskdGhpcy0+Z2V0UmViaWxsQ29tbWlzc2lvblZhbHVlKCl9JSBjb21taXNzaW9uIjsKCQl9CgkJZWxzZSBpZigkdGhpcy0+Z2V0UmViaWxsQ29tbWlzc2lvblR5cGUoKSA9PSBNTV9Db21taXNzaW9uUHJvZmlsZTo6JENPTU1JU1NJT05fVFlQRV9GTEFUUkFURSkKCQl7CgkJCSRkZXNjIC49ICJ7JHRoaXMtPmdldFJlYmlsbENvbW1pc3Npb25WYWx1ZSgpfSBjb21taXNzaW9uIjsKCQl9CgkJCgkJaWYoJHRoaXMtPmRvTGltaXRSZWJpbGxzKCkpCgkJewoJCQkkZGVzYyAuPSAiLCBsaW1pdCB0byB7JHRoaXMtPmdldFJlYmlsbENvbW1pc3Npb25MaW1pdCgpfSBwYXltZW50cyI7CgkJfQoJCQoJCXJldHVybiAkZGVzYzsKCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXREb1JldmVyc2VDb21taXNzaW9uc0ZsYWcoJGZsYWcpIAoJewoJCSR0aGlzLT5kb1JldmVyc2VDb21taXNzaW9uc0ZsYWcgPSAkZmxhZzsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRvUmV2ZXJzZUNvbW1pc3Npb25zKCkKCXsKCQlyZXR1cm4gKCR0aGlzLT5kb1JldmVyc2VDb21taXNzaW9uc0ZsYWcgPT0gIjEiKSA/IHRydWUgOiBmYWxzZTsKCX0KCQoJCgkvKiogVVRJTElURVMgKiovCgkKCS8qKgoJICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZGVmYXVsdCBjb21taXNzaW9uIHByb2ZpbGUKCSAqCgkgKiBAcmV0dXJuIE1NX0NvbW1pc3Npb25Qcm9maWxlIHRoZSBkZWZhdWx0IGNvbW1pc3Npb24gcHJvZmlsZQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldERlZmF1bHRDb21taXNzaW9uUHJvZmlsZSgpCgl7CgkJJGRmbHRDb21taXNzaW9uUHJvZmlsZSA9IG5ldyBNTV9Db21taXNzaW9uUHJvZmlsZSgpOwoJCgkJZ2xvYmFsICR3cGRiOwoJCgkJJHNxbCA9ICJTRUxFQ1QgaWQgRlJPTSAiLk1NX1RBQkxFX0NPTU1JU1NJT05fUFJPRklMRVMuIiBXSEVSRSBpc19kZWZhdWx0PScxJyBMSU1JVCAxOyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCgkJaWYoJHJlc3VsdCkKCQl7CgkJCSRkZmx0Q29tbWlzc2lvblByb2ZpbGUgPSBuZXcgTU1fQ29tbWlzc2lvblByb2ZpbGUoJHJlc3VsdC0+aWQpOwoJCX0KCQoJCXJldHVybiAkZGZsdENvbW1pc3Npb25Qcm9maWxlOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldENvbW1pc3Npb25Qcm9maWxlc0xpc3QoKQoJewoJCWdsb2JhbCAkd3BkYjsKIAkJCgkJJHByb2ZpbGVzID0gYXJyYXkoKTsKIAkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfQ09NTUlTU0lPTl9QUk9GSUxFUy4iIG9yZGVyIGJ5IG5hbWUgYXNjOyI7CiAJCSRyb3dzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwogCQkKIAkJaWYoJHJvd3MgPT09IGZhbHNlKQogCQl7CiAJCQlyZXR1cm4gJHByb2ZpbGVzOwogCQl9CiAJCWlmKCRyb3dzKSAKIAkJewoJIAkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQl7CgkJCQkkcHJvZmlsZXNbJHJvdy0+aWRdID0gJHJvdy0+bmFtZTsKCQkJfQogCQl9CiAJCQogCQlyZXR1cm4gJHByb2ZpbGVzOwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(246, 'membershiplevelsview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX01lbWJlcnNoaXBMZXZlbHNWaWV3IGV4dGVuZHMgTU1fUkJBQ1Byb2R1Y3RNYW5hZ2VyVmlldwp7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TRVRfREVGQVVMVCA9ICJzZXREZWZhdWx0IjsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZU1lbWJlcnNoaXBMZXZlbCgkcG9zdCk7CgkJCQkJCgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9SRU1PVkU6CgkJCQkJcmV0dXJuICR0aGlzLT5yZW1vdmVNZW1iZXJzaGlwTGV2ZWwoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0VUX0RFRkFVTFQ6CgkJCQkJcmV0dXJuICR0aGlzLT5zZXRBc0RlZmF1bHQoJHBvc3QpOwoJCQkJCQoJCQkJY2FzZSBzZWxmOjokTU1fSlNBQ1RJT05fU0hPV19CVVlfTk9XX0xJTktTOgoJCQkJCXJldHVybiAkdGhpcy0+c2hvd1B1cmNoYXNlTGlua3MoJHBvc3QpOwoJCQkJCQoJCQkJZGVmYXVsdDoKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRyZXNwb25zZSk7CgkJCX0KCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiAkcmVzcG9uc2U7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Vmlld0RhdGEoTU1fRGF0YUdyaWQgJGRnKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkcm93cyA9IHBhcmVudDo6Z2V0RGF0YShNTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUywgbnVsbCwgJGRnKTsKCQkKCQlmb3JlYWNoKCRyb3dzIGFzICRyb3cpCgkJewoJCQkkc3FsID0gIlNFTEVDVCBwLmlkLCBwLm5hbWUgRlJPTSAiLk1NX1RBQkxFX01FTUJFUlNISVBfTEVWRUxfUFJPRFVDVFMuIiBtbHAsICIuTU1fVEFCTEVfUFJPRFVDVFMuIiBwICI7CgkJCSRzcWwgLj0gIiBXSEVSRSBtbHAubWVtYmVyc2hpcF9pZD0neyRyb3ctPmlkfScgQU5EIG1scC5wcm9kdWN0X2lkID0gcC5pZCBHUk9VUCBCWSBuYW1lOyI7CgkJCgkJCSRyb3ctPnByb2R1Y3RzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQkKCQkJJHNxbCA9ICJzZWxlY3QgYS4qIGZyb20gIi5NTV9UQUJMRV9BUFBMSUVEX0JVTkRMRVMuIiBhdCwgIi5NTV9UQUJMRV9CVU5ETEVTLiIgYSB3aGVyZSBhdC5hY2Nlc3NfdHlwZT0nIi5NTV9BcHBsaWVkQnVuZGxlOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUC4iJyBhbmQgYXQuYWNjZXNzX3R5cGVfaWQ9J3skcm93LT5pZH0nIGFuZCBhdC5idW5kbGVfaWQ9YS5pZCI7CgkJCSRyb3ctPmJ1bmRsZXMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCQoJCQkkc3FsID0gIlNFTEVDVCBjb3VudCgqKSBhcyB0b3RhbCBGUk9NICIuTU1fVEFCTEVfVVNFUl9EQVRBLiIgd2hlcmUgbWVtYmVyc2hpcF9sZXZlbF9pZCA9ICd7JHJvdy0+aWR9JyBBTkQgKHN0YXR1cyA9ICciLk1NX1N0YXR1czo6JEFDVElWRS4iJyBPUiBzdGF0dXMgPSAnIi5NTV9TdGF0dXM6OiRQRU5ESU5HX0NBTkNFTExBVElPTi4iJyk7IjsKCQkJJG9iaiA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkkcm93LT5tZW1iZXJfY291bnQgPSAkb2JqLT50b3RhbDsKCQl9CgkJCgkJcmV0dXJuICRyb3dzOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNhdmVNZW1iZXJzaGlwTGV2ZWwoJHBvc3QpCgl7CQoJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgpOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkgCgkJewoJCQkkbWVtYmVyc2hpcCA9IG5ldyBNTV9NZW1iZXJzaGlwTGV2ZWwoJHBvc3RbImlkIl0pOwoJCQkKCQkJaWYoISRtZW1iZXJzaGlwLT5pc1ZhbGlkKCkpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkNhbm5vdCB1cGRhdGUgbWVtYmVyc2hpcCBsZXZlbC4gSW52YWxpZCBJRCAneyRwb3N0WydpZCddfScgcGFzc2VkLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQl9CgkJfQoJCQoJCWlmKGlzc2V0KCRwb3N0WyJtbV9zdWJzY3JpcHRpb25fdHlwZSJdKSAmJiAkcG9zdFsibW1fc3Vic2NyaXB0aW9uX3R5cGUiXSA9PSAiZnJlZSIpIAoJCXsgCgkgCQkkcG9zdFsibW1fc3Vic2NyaXB0aW9uX3R5cGUiXSA9ICcxJzsKCSAJCSRwb3N0WyJtbV9wcm9kdWN0cyJdID0gJyc7CgkgCX0gCgkgCWVsc2UgCgkgCXsgCgkgCQkkcG9zdFsibW1fc3Vic2NyaXB0aW9uX3R5cGUiXT0gICcwJzsKCSAJfQoJIAkKCSAJaWYoJHBvc3RbIm1tX3N0YXR1cyJdID09ICJhY3RpdmUiKSAKCSAJewoJIAkJJHBvc3RbIm1tX3N0YXR1cyJdID0gIjEiOwoJIAl9IAoJIAllbHNlIAoJIAl7CgkgCQkkcG9zdFsibW1fc3RhdHVzIl0gPSAiMCI7CgkgCX0KCSAJCgkgCSRtZW1iZXJzaGlwLT5zZXRJc0ZyZWUoJHBvc3RbIm1tX3N1YnNjcmlwdGlvbl90eXBlIl0pOwoJIAkkbWVtYmVyc2hpcC0+c2V0U3RhdHVzKCRwb3N0WyJtbV9zdGF0dXMiXSk7CgkgCSRtZW1iZXJzaGlwLT5zZXRJc0RlZmF1bHQoJHBvc3RbIm1tX2lzX2RlZmF1bHQiXSk7CgkJJG1lbWJlcnNoaXAtPnNldE5hbWUoJHBvc3RbIm1tX2Rpc3BsYXlfbmFtZSJdKTsKCQkkbWVtYmVyc2hpcC0+c2V0V1BSb2xlKCRwb3N0WyJtbV93cF9yb2xlIl0pOwoJIAkkbWVtYmVyc2hpcC0+c2V0RGVzY3JpcHRpb24oJHBvc3RbIm1tX2Rlc2NyaXB0aW9uIl0pOwoJIAkkbWVtYmVyc2hpcC0+c2V0RW1haWxTdWJqZWN0KCRwb3N0WyJtbV9lbWFpbF9zdWJqZWN0Il0pOwoJIAkkbWVtYmVyc2hpcC0+c2V0RW1haWxCb2R5KCRwb3N0WyJtbV9lbWFpbF9ib2R5Il0pOwoJIAkkbWVtYmVyc2hpcC0+c2V0RW1haWxGcm9tSWQoJHBvc3RbIm1tX2VtYWlsX2Zyb20iXSk7CQkKCSAJJG1lbWJlcnNoaXAtPnNldFdlbGNvbWVFbWFpbEVuYWJsZWQoJHBvc3RbIm1tX3dlbGNvbWVfZW1haWxfZW5hYmxlZCJdKTsJCgkgCSRtZW1iZXJzaGlwLT5zZXRFeHBpcmVzKCRwb3N0WyJleHBpcnlfY2hrIl0pOwoJIAkkbWVtYmVyc2hpcC0+c2V0RXhwaXJlQW1vdW50KCRwb3N0WyJleHBpcmVfYW1vdW50Il0pOwoJIAkkbWVtYmVyc2hpcC0+c2V0RXhwaXJlUGVyaW9kKCRwb3N0WyJleHBpcmVfcGVyaW9kIl0pOwkKCSAJCgkgCWlmKGlzc2V0KCRwb3N0WyJtbV9kZWZhdWx0X3Byb2R1Y3RfaWQiXSkpCgkgCXsKCSAJCSRtZW1iZXJzaGlwLT5zZXREZWZhdWx0UHJvZHVjdCgkcG9zdFsibW1fZGVmYXVsdF9wcm9kdWN0X2lkIl0pOwoJIAl9CgkgCQoJIAlpZighZW1wdHkoJHBvc3RbIm1tX3Byb2R1Y3RzIl0pICYmIGlzX2FycmF5KCRwb3N0WyJtbV9wcm9kdWN0cyJdKSAmJiBjb3VudCgkcG9zdFsibW1fcHJvZHVjdHMiXSkgPiAwICYmICRwb3N0WyJtbV9zdWJzY3JpcHRpb25fdHlwZSJdIT0iMSIpIAoJIAl7CgkgCQkkbWVtYmVyc2hpcFNlbCA9IGFycmF5KCk7CgkgCQlmb3JlYWNoKCRwb3N0WyJtbV9wcm9kdWN0cyJdIGFzICRrZXkgPT4gJHZhbCkKCSAJCXsKCSAJCQkkbWVtYmVyc2hpcFNlbFskdmFsXSA9ICR2YWw7CgkgCQl9CgkJIAkkbWVtYmVyc2hpcC0+c2V0UHJvZHVjdElkcygkbWVtYmVyc2hpcFNlbCk7CgkgCX0KCSAJZWxzZQoJIAl7CgkgCQkkbWVtYmVyc2hpcC0+c2V0UHJvZHVjdElkcyhhcnJheSgpKTsKCSAJfQoJIAkKCSAJaWYoIWVtcHR5KCRwb3N0WyJtbV9idW5kbGVzIl0pICYmIGlzX2FycmF5KCRwb3N0WyJtbV9idW5kbGVzIl0pICYmIGNvdW50KCRwb3N0WyJtbV9idW5kbGVzIl0pID4gMCkgCgkgCXsKCSAJCSRtZW1iZXJzaGlwLT5zZXRCdW5kbGVzKCRwb3N0WyJtbV9idW5kbGVzIl0pOwoJIAl9IAoJIAllbHNlIAoJIAl7CgkgCQkkbWVtYmVyc2hpcC0+c2V0QnVuZGxlcyhhcnJheSgpKTsKCSAJfQoJIAkKCSAJaWYoIWVtcHR5KCRwb3N0WyJtbV9jYXRlZ29yaWVzIl0pICYmIGlzX2FycmF5KCRwb3N0WyJtbV9jYXRlZ29yaWVzIl0pICYmIGNvdW50KCRwb3N0WyJtbV9jYXRlZ29yaWVzIl0pID4gMCkKCSAJewoJIAkJJG1lbWJlcnNoaXAtPnNldENhdGVnb3J5SWRzKCRwb3N0WyJtbV9jYXRlZ29yaWVzIl0pOwoJIAl9CgkgCWVsc2UKCSAJewoJIAkJJG1lbWJlcnNoaXAtPnNldENhdGVnb3J5SWRzKGFycmF5KCkpOwoJIAl9CgkJCgkJcmV0dXJuICRtZW1iZXJzaGlwLT5jb21taXREYXRhKCk7Cgl9CgkKCXByaXZhdGUgZnVuY3Rpb24gcmVtb3ZlTWVtYmVyc2hpcExldmVsKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkKCQl7CgkJCSRtZW1iZXJzaGlwID0gbmV3IE1NX01lbWJlcnNoaXBMZXZlbCgkcG9zdFsiaWQiXSwgZmFsc2UpOwoJCQkkcmVzdWx0ID0gJG1lbWJlcnNoaXAtPmRlbGV0ZSgpOwoJCQkKCQkJaWYoJHJlc3VsdCkgCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCQkJfSAKCQkJZWxzZSAKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVGhpcyBtZW1iZXJzaGlwIGxldmVsIGhhcyBleGlzdGluZyBhc3NvY2lhdGlvbnMgYW5kIGNhbid0IGJlIHJlbW92ZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIGRlbGV0ZSBtZW1iZXJzaGlwIGxldmVsLiBObyBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKIAlwcml2YXRlIGZ1bmN0aW9uIHNldEFzRGVmYXVsdCgkcG9zdCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoaXNzZXQoJHBvc3RbImlkIl0pICYmIGludHZhbCgkcG9zdFsiaWQiXSkgPiAwKQoJCXsKCQkJJHNxbCA9ICJ1cGRhdGUgIi5NTV9UQUJMRV9NRU1CRVJTSElQX0xFVkVMUy4iIHNldCBpc19kZWZhdWx0PScwJyI7CgkJCSR3cGRiLT5xdWVyeSgkc3FsKTsKCQkJCgkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFMuIiBzZXQgaXNfZGVmYXVsdD0nMScgd2hlcmUgaWQ9JyVkJyBsaW1pdCAxIjsKCQkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHBvc3RbImlkIl0pKTsKCQkJCgkJCWlmKCRyZXN1bHRzKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVW5hYmxlIHRvIHNldCBtZW1iZXJzaGlwIGxldmVsIGFzIGRlZmF1bHQuIE5vIElEIHNwZWNpZmllZC4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCX0KCQoJcHJpdmF0ZSBmdW5jdGlvbiBzaG93UHVyY2hhc2VMaW5rcygkcG9zdCkKCXsKCQlpZihpc3NldCgkcG9zdFsiYWNjZXNzX3R5cGVfaWQiXSkgJiYgaXNzZXQoJHBvc3RbImFjY2Vzc190eXBlX25hbWUiXSkpCgkJewoJCQkkZGF0YSA9IG5ldyBzdGRDbGFzcygpOwoJCQkkZGF0YS0+YWNjZXNzVHlwZUlkID0gJHBvc3RbImFjY2Vzc190eXBlX2lkIl07CgkJCSRkYXRhLT5hY2Nlc3NUeXBlTmFtZSA9IHN0cmlwc2xhc2hlcygkcG9zdFsiYWNjZXNzX3R5cGVfbmFtZSJdKTsKCQkJCgkJCWlmKGlzc2V0KCRwb3N0WyJwcm9kdWN0X2lkcyJdKSAmJiAhZW1wdHkoJHBvc3RbInByb2R1Y3RfaWRzIl0pKQoJCQl7CgkJCQkkZGF0YS0+cHJvZHVjdElkcyA9IGV4cGxvZGUoIiwiLCAkcG9zdFsicHJvZHVjdF9pZHMiXSk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkZGF0YS0+cHJvZHVjdElkcyA9IGFycmF5KCk7CgkJCX0KCQkJCgkJCSRjb250ZW50ID0gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi8iLk1NX01PRFVMRV9NRU1CRVJTSElQX0xFVkVMUy4iLiIuTU1fTU9EVUxFX1BVUkNIQVNFX0xJTktTLiIuZGlhbG9nLnBocCIsICRkYXRhKTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkY29udGVudCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIk1lbWJlcnNoaXAgbGV2ZWwgSUQgYW5kIG5hbWUgYXJlIHJlcXVpcmVkIHRvIGRpc3BsYXkgcHVyY2hhc2UgbGlua3MiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9Cgl9Cn0K', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(247, 'employee', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0VtcGxveWVlIGV4dGVuZHMgTU1fRW50aXR5CnsKCXB1YmxpYyBzdGF0aWMgJEFDQ0VTU19UWVBFX01FTUJFUlNISVAgPSAibWVtYmVyc2hpcCI7CgkKCXByaXZhdGUgJGRpc3BsYXlOYW1lID0gIiI7Cglwcml2YXRlICRmaXJzdE5hbWUgPSAiIjsKCXByaXZhdGUgJGxhc3ROYW1lID0gIiI7Cglwcml2YXRlICRlbWFpbCA9ICIiOwoJcHJpdmF0ZSAkdXNlcm5hbWUgPSAiIjsKCXByaXZhdGUgJHBhc3N3b3JkID0gIiI7Cglwcml2YXRlICRwaG9uZSA9ICIiOwoJcHJpdmF0ZSAkYWNjZXNzUmVzdHJpY3Rpb25zID0gYXJyYXkoKTsKCXByaXZhdGUgJGFsbG93RXhwb3J0ID0gMDsKCXByaXZhdGUgJHJvbGVJZCA9IDA7Cglwcml2YXRlICR1c2VySWQgPSAwOwkKCXByaXZhdGUgJGlzRGVmYXVsdEZsYWcgPSAiMCI7CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldERhdGEoKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgYWNjLiosIHUudXNlcl9sb2dpbiBhcyB1c2VybmFtZSwgdS51c2VyX3Bhc3MgYXMgcGFzc3dvcmQsIHUuSUQgYXMgdXNlcl9pZCBGUk9NICIuTU1fVEFCTEVfRU1QTE9ZRUVfQUNDT1VOVFMuIiBhY2MgCgkJCQkJCUxFRlQgSk9JTiAiLiR3cGRiLT51c2Vycy4iIHUgb24gYWNjLnVzZXJfaWQgPSB1LklEIAoJCQkJCVdIRVJFIGFjYy5pZD0nIi4kdGhpcy0+aWQuIic7IjsKCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJlc3VsdCkgCgkJewoJCQkkdGhpcy0+c2V0RGF0YSgkcmVzdWx0KTsKCQl9CgkJZWxzZSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIHNldERhdGEoJGRhdGEpCgl7CgkJdHJ5IAoJCXsKCQkJJHRoaXMtPmlkID0gJGRhdGEtPmlkOwoJCQkkdGhpcy0+ZGlzcGxheU5hbWUgPSAkZGF0YS0+ZGlzcGxheV9uYW1lOwoJCQkkdGhpcy0+ZW1haWwgPSAkZGF0YS0+ZW1haWw7CgkJCSR0aGlzLT5maXJzdE5hbWUgPSAoaXNzZXQoJGRhdGEtPmZpcnN0X25hbWUpKT8kZGF0YS0+Zmlyc3RfbmFtZToiIjsKCQkJJHRoaXMtPmxhc3ROYW1lID0gKGlzc2V0KCRkYXRhLT5sYXN0X25hbWUpKT8kZGF0YS0+bGFzdF9uYW1lOiIiOwoJCQkkdGhpcy0+cGhvbmUgPSAoaXNzZXQoJGRhdGEtPnBob25lKSk/JGRhdGEtPnBob25lOiIiOwoJCQkkdGhpcy0+dXNlcm5hbWUgPSAoaXNzZXQoJGRhdGEtPnVzZXJuYW1lKSk/JGRhdGEtPnVzZXJuYW1lOiIiOwoJCQkkdGhpcy0+cGFzc3dvcmQgPSAoaXNzZXQoJGRhdGEtPnBhc3N3b3JkKSk/JGRhdGEtPnBhc3N3b3JkOiIiOwoJCQkkdGhpcy0+YWNjZXNzUmVzdHJpY3Rpb25zID0gKGlzc2V0KCRkYXRhLT5hY2Nlc3NfcmVzdHJpY3Rpb25zKSk/dW5zZXJpYWxpemUoJGRhdGEtPmFjY2Vzc19yZXN0cmljdGlvbnMpOmFycmF5KCk7CgkJCSR0aGlzLT5zZXRBbGxvd0V4cG9ydCgkZGF0YS0+YWxsb3dfZXhwb3J0KTsKCQkJJHRoaXMtPnJvbGVJZCA9ICRkYXRhLT5yb2xlX2lkOwoJCQkkdGhpcy0+dXNlcklkID0gJGRhdGEtPnVzZXJfaWQ7CgkJCSR0aGlzLT5pc0RlZmF1bHRGbGFnID0gJGRhdGEtPmlzX2RlZmF1bHQ7CgkJCXBhcmVudDo6dmFsaWRhdGUoKTsKCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZXgpIAoJCXsKCQkJcGFyZW50OjppbnZhbGlkYXRlKCk7CgkJfQoJfQoJCglwdWJsaWMgZnVuY3Rpb24gY29tbWl0RGF0YSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkZG9VcGRhdGUgPSBpc3NldCgkdGhpcy0+aWQpICYmICgkdGhpcy0+aWQgIT0gIiIpICYmIChpbnR2YWwoJHRoaXMtPmlkKSA+IDApOwoJCQoJCS8vIHNldCB1c2VybmFtZSB0byB0aGUgZW1haWwgYWRkcmVzcyBpZiBlbXB0eQoJCWlmKGVtcHR5KCR0aGlzLT51c2VybmFtZSkpCgkJewoJCQkkdGhpcy0+dXNlcm5hbWUgPSAkdGhpcy0+ZW1haWw7CgkJfQoJCQoJCSRhY2NvdW50RXhpc3RzUmVzdWx0ID0gJHRoaXMtPmFjY291bnRFeGlzdHMoJGRvVXBkYXRlKTsKCQkkbGlua2VkVXNlckV4aXN0cyA9IGZhbHNlOwoJCQoJCWlmKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRhY2NvdW50RXhpc3RzUmVzdWx0KSkgCgkJewoJCQlyZXR1cm4gJGFjY291bnRFeGlzdHNSZXN1bHQ7CgkJfQoJCQoJCSR0aGlzLT5yb2xlSWQgPSAoZW1wdHkoJHRoaXMtPnJvbGVJZCkpID8gTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUiA6ICR0aGlzLT5yb2xlSWQ7CgkJCgkJaWYoJHRoaXMtPnVzZXJJZCA+IDApCgkJewoJCQkvLyBtYWtlIHN1cmUgdGhlIGxpbmtlZCB1c2VyIGlzIHZhbGlkCgkJCSR1c2VyID0gbmV3IE1NX1VzZXIoJHRoaXMtPnVzZXJJZCk7CgkJCWlmICghJHVzZXItPmlzVmFsaWQoKSkKCQkJewoJCQkJJHRoaXMtPnVzZXJJZCA9IG51bGw7IAoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJGxpbmtlZFVzZXJFeGlzdHMgPSB0cnVlOwoJCQl9CgkJfQoJCQoJCS8vc2VhcmNoIGZvciB0aGUgV1AgdXNlciBieSBlbWFpbCBpZiB0aGVyZSBpcyBub3Qgb25lIGFscmVhZHkgYXNzb2NpYXRlZAoJCWlmKCEkbGlua2VkVXNlckV4aXN0cykKCQl7CgkJCS8vc2VhcmNoIGZvciB0aGUgdXNlcgoJCQkkdXNlciA9IE1NX1VzZXI6OmZpbmRCeUVtYWlsKCR0aGlzLT5lbWFpbCk7CgkJCWlmICgkdXNlci0+aXNWYWxpZCgpKQoJCQl7CgkJCQkkdGhpcy0+dXNlcklkID0gJHVzZXItPmdldElkKCk7CgkJCQkkdGhpcy0+dXNlcm5hbWUgPSAoJHRoaXMtPnVzZXJuYW1lID09ICIiKSA/ICR1c2VyLT5nZXRVc2VybmFtZSgpIDogJHRoaXMtPnVzZXJuYW1lOwoJCQkJJGxpbmtlZFVzZXJFeGlzdHMgPSB0cnVlOwoJCQl9CgkJfQoJCQoJCU1NX1RyYW5zYWN0aW9uOjpiZWdpbigpOwoJCXRyeQoJCXsJCgkJCS8vIGRldGVybWluZSB1c2VyIGxldmVsIGFuZCByb2xlIGJhc2VkIG9uIHJvbGUgSUQKCQkJJHVzZXJNZXRhID0gTU1fUm9sZTo6Z2V0VXNlck1ldGEoJHRoaXMtPnJvbGVJZCk7CgkJCQoJCQkvL2ZpcnN0IHVzZSBXUCBzeXN0ZW0gdG8gY3JlYXRlIG9yIHVwZGF0ZSBhIGxpbmtlZCB1c2VyIGFjY291bnQJCQkKCQkgCWlmKCEkbGlua2VkVXNlckV4aXN0cykKCQkgCXsKCQkgCQkvL25vIGV4aXN0aW5nIFdQIHVzZXIgd2FzIGZvdW5kLCBjcmVhdGUgb25lIGFuZCBsaW5rIGl0CQkKCQkJCSR1c2VyRGF0YSA9IGFycmF5KAoJCQkJCSAgJ3VzZXJfcGFzcycgPT4gJHRoaXMtPnBhc3N3b3JkLAoJCQkJCSAgJ3VzZXJfbG9naW4nID0+ICR0aGlzLT51c2VybmFtZSwKCQkJCQkgICd1c2VyX2VtYWlsJyAgPT4gJHRoaXMtPmVtYWlsLAoJCQkJCSAgJ2Rpc3BsYXlfbmFtZScgID0+ICR0aGlzLT5kaXNwbGF5TmFtZSwKCQkJCQkgICduaWNrbmFtZScgID0+ICR0aGlzLT5kaXNwbGF5TmFtZSwKCQkJCQkgICdmaXJzdF9uYW1lJyAgPT4gJHRoaXMtPmZpcnN0TmFtZSwKCQkJCQkgICdsYXN0X25hbWUnICA9PiAkdGhpcy0+bGFzdE5hbWUsCgkJCQkJICAnZGVzY3JpcHRpb24nICA9PiAnRW1wbG95ZWUgYWNjb3VudCBjcmVhdGVkIGJ5IE1lbWJlck1vdXNlJywKCQkJCQkgICd1c2VyX3JlZ2lzdGVyZWQnICA9PiBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKSwKCQkJCQkgICdyb2xlJyAgPT4gJHVzZXJNZXRhWyJyb2xlIl0sCgkJCQkpOwoJCQkJCgkJCQkkdGhpcy0+dXNlcklkID0gd3BfaW5zZXJ0X3VzZXIoJHVzZXJEYXRhKTsKCQkJCWlmKCR0aGlzLT51c2VySWQgaW5zdGFuY2VvZiBXUF9FcnJvcikKCQkJCXsKCQkJCSAJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IFRoZXJlIHdhcyBhbiBlcnJvciBjcmVhdGluZyBhIHVzZXIgYWNjb3VudCBmb3IgdGhpcyBlbXBsb3llZSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJCgkJCQlhZGRfdXNlcl9tZXRhKCR0aGlzLT51c2VySWQsIndwX3VzZXJfbGV2ZWwiLCR1c2VyTWV0YVsidXNlcl9sZXZlbCJdKTsKCQkgCX0KCQkgCWVsc2UKCQkgCXsKCQkgCQkvL3Jlc2V0IHRoZSBsaW5rZWQgdXNlciwgdXNpbmcgd29yZHByZXNzIGFwaQoJCQkJZGVsZXRlX3VzZXJfbWV0YSgkdGhpcy0+dXNlcklkLCAid3BfY2FwYWJpbGl0aWVzIik7CgkJCQlkZWxldGVfdXNlcl9tZXRhKCR0aGlzLT51c2VySWQsICJ3cF91c2VyX2xldmVsIik7CgkJCQkkdXNlckRhdGEgPSBhcnJheSgKCQkJCQkgICdJRCc9PiR0aGlzLT51c2VySWQsCgkJCQkJICAndXNlcl9lbWFpbCcgID0+ICR0aGlzLT5lbWFpbCwKCQkJCQkgICdkaXNwbGF5X25hbWUnICA9PiAkdGhpcy0+ZGlzcGxheU5hbWUsCgkJCQkJICAnbmlja25hbWUnICA9PiAkdGhpcy0+ZGlzcGxheU5hbWUsCgkJCQkJICAnZmlyc3RfbmFtZScgID0+ICR0aGlzLT5maXJzdE5hbWUsCgkJCQkJICAnbGFzdF9uYW1lJyAgPT4gJHRoaXMtPmxhc3ROYW1lLAoJCQkJCSAgJ3JvbGUnICA9PiAkdXNlck1ldGFbInJvbGUiXSwKCQkJCSk7CgkJCQkKCQkgCQkkdGhpcy0+dXNlcklkID0gd3BfdXBkYXRlX3VzZXIoJHVzZXJEYXRhKTsKCQkJCWlmKCR0aGlzLT51c2VySWQgaW5zdGFuY2VvZiBXUF9FcnJvcikKCQkJCXsKCQkJCSAJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IFRoZXJlIHdhcyBhbiBlcnJvciB1cGRhdGluZyB0aGUgdXNlciBhY2NvdW50IGZvciB0aGlzIGVtcGxveWVlIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCQkKCQkJCXVwZGF0ZV91c2VyX21ldGEoJHRoaXMtPnVzZXJJZCwid3BfdXNlcl9sZXZlbCIsJHVzZXJNZXRhWyJ1c2VyX2xldmVsIl0pOwoJCSAJfQoJCSAJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfRU1QTE9ZRUVfQUNDT1VOVFMuIiBzZXQgIiAuCgkJIAkJCSIJZGlzcGxheV9uYW1lPSclcycsIiAuCgkJIAkJCSIJZmlyc3RfbmFtZT0nJXMnLCIgLgoJCSAJCQkiCWxhc3RfbmFtZT0nJXMnLCIgLgoJCSAJCQkiCXJvbGVfaWQ9JyVzJywiIC4KCQkgCQkJIgl1c2VyX2lkPSclZCcsIiAuCgkJIAkJCSIJZW1haWw9JyVzJywiIC4KCQkgCQkJIglwaG9uZT0nJXMnLCIgLgoJCSAJCQkiICAgYWNjZXNzX3Jlc3RyaWN0aW9ucz0nJXMnLCIgLgoJCSAJCQkiICAgYWxsb3dfZXhwb3J0PSclZCcsIiAuCgkJIAkJCSIJaXNfZGVmYXVsdD0nJWQnIiAuCgkJIAkJCSIiOwoJCQl9CgkJCWVsc2UgCgkJCXsJCgkJCQkkc3FsID0gInVwZGF0ZSAiLk1NX1RBQkxFX0VNUExPWUVFX0FDQ09VTlRTLiIgc2V0ICIgLgoJCSAJCQkiCWRpc3BsYXlfbmFtZT0nJXMnLCIgLgoJCSAJCQkiCWZpcnN0X25hbWU9JyVzJywiIC4KCQkgCQkJIglsYXN0X25hbWU9JyVzJywiIC4KCQkgCQkJIglyb2xlX2lkPSclcycsIiAuCgkJIAkJCSIJdXNlcl9pZD0nJWQnLCIgLgoJCSAJCQkiCWVtYWlsPSclcycsIiAuCgkJIAkJCSIJcGhvbmU9JyVzJywiIC4KCQkgCQkJIiAgIGFjY2Vzc19yZXN0cmljdGlvbnM9JyVzJywiIC4KCQkgCQkJIiAgIGFsbG93X2V4cG9ydD0nJWQnLCIgLgoJCSAJCQkiCWlzX2RlZmF1bHQ9JyVkJyIgLgoJCQkgCQkiCXdoZXJlIGlkPSd7JHRoaXMtPmlkfSciIC4KCQkJIAkJIiI7CgkJIAl9CgkJIAkKCQkgCSRwcmVwYXJlZFNxbCA9ICR3cGRiLT5wcmVwYXJlKCRzcWwsICR0aGlzLT5kaXNwbGF5TmFtZSwgJHRoaXMtPmZpcnN0TmFtZSwgJHRoaXMtPmxhc3ROYW1lLCAkdGhpcy0+cm9sZUlkLCAkdGhpcy0+dXNlcklkLCAKCQkgCQkJJHRoaXMtPmVtYWlsLCAkdGhpcy0+cGhvbmUsIHNlcmlhbGl6ZSgkdGhpcy0+YWNjZXNzUmVzdHJpY3Rpb25zKSwgJHRoaXMtPmFsbG93RXhwb3J0LCAkdGhpcy0+aXNEZWZhdWx0RmxhZyk7CgkJIAkKCQkgCSRyZXN1bHQgPSAkd3BkYi0+cXVlcnkoJHByZXBhcmVkU3FsKTsKCQkgCQoJCQlpZigkcmVzdWx0ID09PSBmYWxzZSkKCQkgCXsKCQkgCQlNTV9UcmFuc2FjdGlvbjo6cm9sbGJhY2soKTsKCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBlbXBsb3llZSAoIi4kcHJlcGFyZWRTcWwuIikiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkgCX0KCQkgCgkJIAlpZighJGRvVXBkYXRlKSAKCQkgCXsKCQkgCQkkdGhpcy0+aWQgPSAkd3BkYi0+aW5zZXJ0X2lkOwoJCSAJfQoJCSAJCgkJfQoJCWNhdGNoKEV4Y2VwdGlvbiAkZXgpCgkJewoJCSAJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJIAlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJFUlJPUjogdW5hYmxlIHRvIGNyZWF0ZSBlbXBsb3llZSIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlNTV9UcmFuc2FjdGlvbjo6Y29tbWl0KCk7CgkKIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgpOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZGVsZXRlKCRkZWxldGVMaW5rZWRVc2VyPWZhbHNlKQoJewkKCQlnbG9iYWwgJHdwZGI7CgkJCgkJaWYoIXNlbGY6OmlzQmVpbmdVc2VkKCR0aGlzLT5pZCkpCgkJewoJCQkkbGlua2VkVXNlcklkID0gJHRoaXMtPnVzZXJJZDsKCQkJJHNxbCA9ICJERUxFVEUgRlJPTSAiLk1NX1RBQkxFX0VNUExPWUVFX0FDQ09VTlRTLiIgV0hFUkUgaWQ9JyVkJyBsaW1pdCAxIjsKCQkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPmlkKSk7CgkJCQkKCQkJaWYoJHJlc3VsdHMpIAoJCQl7CgkJCQlpZiAoJGRlbGV0ZUxpbmtlZFVzZXIpCgkJCQl7ICAKCQkJCQkvLyBjaGFuZ2VkIHNpbmNlIHdlIGRvIG5vdCBsZXZlcmFnZSB0aGUgTU1fVXNlciBvYmplY3QgdXBvbiBjcmVhdGlvbgoJCQkJCS8vIG9mIHRoZSBlbXBsb3llZSBvYmplY3QuIAoJCQkJCWlmKHdwX2RlbGV0ZV91c2VyKCRsaW5rZWRVc2VySWQpKQoJCQkJCXsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoJCQkJCWVsc2UKCQkJCQl7IAoJCQkJCQlyZXR1cm4gZmFsc2U7CgkJCQkJfSAKCQkJCX0KCQkJCQoJCQkJcmV0dXJuIHRydWU7CgkJCX0KCQl9CgkJCgkJcmV0dXJuIGZhbHNlOwoJfQogCQogCXByaXZhdGUgZnVuY3Rpb24gYWNjb3VudEV4aXN0cygkZG9VcGRhdGU9ZmFsc2UpIAogCXsKIAkJZ2xvYmFsICR3cGRiOwogCQkKIAkJLy8gY2hlY2sgaWYgZW1haWwgbmFtZSBhbHJlYWR5IGV4aXN0cwoJCWlmKGlzc2V0KCR0aGlzLT5kaXNwbGF5TmFtZSkpCgkJewoJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9FTVBMT1lFRV9BQ0NPVU5UUy4iIFdIRVJFIGRpc3BsYXlfbmFtZT0nIi4kdGhpcy0+ZGlzcGxheU5hbWUuIicgTElNSVQgMSI7CgkJCQoJCQkkcmVzdWx0ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCQoJCQlpZigkcmVzdWx0KQoJCQl7CgkJCQlpZigkZG9VcGRhdGUgPT0gZmFsc2UgfHwgKCRyZXN1bHQtPmlkICE9ICR0aGlzLT5pZCkpCgkJCQl7CgkJCQkJTU1fVHJhbnNhY3Rpb246OnJvbGxiYWNrKCk7CgkJCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkFuIGVtcGxveWVlIHdpdGggdGhlIG5hbWUgJyIuJHRoaXMtPmRpc3BsYXlOYW1lLiInIGFscmVhZHkgZXhpc3RzLiIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJfQogCQkKCQkvLyBjaGVjayBpZiBlbWFpbCBhZGRyZXNzIGFscmVhZHkgZXhpc3RzCgkJaWYoaXNzZXQoJHRoaXMtPmVtYWlsKSkKCQl7CgkJCSRzcWwgPSAiU0VMRUNUICogRlJPTSAiLk1NX1RBQkxFX0VNUExPWUVFX0FDQ09VTlRTLiIgV0hFUkUgZW1haWw9JyIuJHRoaXMtPmVtYWlsLiInIExJTUlUIDEiOwoJCQkKCQkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkKCQkJaWYoJHJlc3VsdCkKCQkJewoJCQkJaWYoJGRvVXBkYXRlID09IGZhbHNlIHx8ICgkcmVzdWx0LT5pZCAhPSAkdGhpcy0+aWQpKQoJCQkJewoJCQkJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCQkgCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJBbiBlbXBsb3llZSB3aXRoIHRoZSBhZGRyZXNzICciLiR0aGlzLT5lbWFpbC4iJyBhbHJlYWR5IGV4aXN0cy4iLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfQoJCX0KCQkKCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBidWlsZE1lbnUoKQogCXsKIAkJaWYoJHRoaXMtPmhhc1Blcm1pc3Npb24oYXJyYXkoIm1vZHVsZSI9Pk1NX01PRFVMRV9EQVNIQk9BUkQpKSkKIAkJewogCQkJYWRkX21lbnVfcGFnZSgnTWVtYmVyTW91c2UnLCAgX21tdCgnTWVtYmVyTW91c2UnLE1NX0xBTkdVQUdFX0RPTUFJTiksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9EQVNIQk9BUkQsIGFycmF5KCR0aGlzLCAibG9hZE1vZHVsZSIpLCBNTV9VdGlsczo6Z2V0SW1hZ2VVcmwoJ21tLWxvZ28tc3ZnLXdoaXRlJyksICczLjEyJyk7CiAJCQkKIAkJCWlmICgkdGhpcy0+aGFzUGVybWlzc2lvbihhcnJheSgibW9kdWxlIj0+TU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0dFTkVSQUwpKSkKIAkJCXsKIAkJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9EQVNIQk9BUkQsIF9tbXQoJ01hbmFnZSBNZW1iZXJzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCBfbW10KCdNYW5hZ2UgTWVtYmVycycsTU1fTEFOR1VBR0VfRE9NQUlOKSwgJ21vZGVyYXRlX2NvbW1lbnRzJywgTU1fTU9EVUxFX01BTkFHRV9NRU1CRVJTLCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CiAJCQl9CiAJCQkKIAkJCWlmICgkdGhpcy0+aGFzUGVybWlzc2lvbihhcnJheSgibW9kdWxlIj0+TU1fTU9EVUxFX01BTkFHRV9UUkFOU0FDVElPTlMpKSkKIAkJCXsKIAkJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9EQVNIQk9BUkQsIF9tbXQoJ0Jyb3dzZSBUcmFuc2FjdGlvbnMnLE1NX0xBTkdVQUdFX0RPTUFJTiksICBfbW10KCdCcm93c2UgVHJhbnNhY3Rpb25zJyxNTV9MQU5HVUFHRV9ET01BSU4pLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfTUFOQUdFX1RSQU5TQUNUSU9OUywgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwogCQkJfQogCQkJCQogCQkJaWYgKCR0aGlzLT5oYXNQZXJtaXNzaW9uKGFycmF5KCJtb2R1bGUiPT5NTV9NT0RVTEVfUFJPRFVDVFMpKSkKIAkJCXsKIAkJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9EQVNIQk9BUkQsIF9tbXQoJ1Byb2R1Y3QgU2V0dGluZ3MnLE1NX0xBTkdVQUdFX0RPTUFJTiksIF9tbXQoJ1Byb2R1Y3QgU2V0dGluZ3MnLE1NX0xBTkdVQUdFX0RPTUFJTiksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9QUk9EVUNUX1NFVFRJTkdTLCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CiAJCQl9CiAJCQkJCiAJCQlpZiAoJHRoaXMtPmhhc1Blcm1pc3Npb24oYXJyYXkoIm1vZHVsZSI9Pk1NX01PRFVMRV9DVVNUT01fRklFTERTKSkpCiAJCQl7CiAJCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfREFTSEJPQVJELCBfbW10KCdDaGVja291dCBTZXR0aW5ncycsTU1fTEFOR1VBR0VfRE9NQUlOKSwgX21tdCgnQ2hlY2tvdXQgU2V0dGluZ3MnLE1NX0xBTkdVQUdFX0RPTUFJTiksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9DSEVDS09VVF9TRVRUSU5HUywgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwogCQkJfQogCQkJCQogCQkJaWYgKCR0aGlzLT5oYXNQZXJtaXNzaW9uKGFycmF5KCJtb2R1bGUiPT5NTV9NT0RVTEVfUEFZTUVOVF9NRVRIT0RTKSkpCiAJCQl7CiAJCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfREFTSEJPQVJELCBfbW10KCdQYXltZW50IFNldHRpbmdzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCBfbW10KCdQYXltZW50IFNldHRpbmdzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfUEFZTUVOVF9TRVRUSU5HUywgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwogCQkJfQogCQkJCQogCQkJaWYgKCR0aGlzLT5oYXNQZXJtaXNzaW9uKGFycmF5KCJtb2R1bGUiPT5NTV9NT0RVTEVfRU1BSUxfSU5URUdSQVRJT04pKSkKIAkJCXsKIAkJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9EQVNIQk9BUkQsIF9tbXQoJ0VtYWlsIFNldHRpbmdzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCBfbW10KCdFbWFpbCBTZXR0aW5ncycsTU1fTEFOR1VBR0VfRE9NQUlOKSwgJ21vZGVyYXRlX2NvbW1lbnRzJywgTU1fTU9EVUxFX0VNQUlMX1NFVFRJTkdTLCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CiAJCQl9CiAJCQkJCiAJCQlpZiAoJHRoaXMtPmhhc1Blcm1pc3Npb24oYXJyYXkoIm1vZHVsZSI9Pk1NX01PRFVMRV9BRkZJTElBVEVfSU5URUdSQVRJT04pKSkKIAkJCXsKIAkJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9EQVNIQk9BUkQsIF9tbXQoJ0FmZmlsaWF0ZSBTZXR0aW5ncycsTU1fTEFOR1VBR0VfRE9NQUlOKSwgX21tdCgnQWZmaWxpYXRlIFNldHRpbmdzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfQUZGSUxJQVRFX1NFVFRJTkdTLCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CiAJCQl9CiAJCQkJCiAJCQlpZiAoJHRoaXMtPmhhc1Blcm1pc3Npb24oYXJyYXkoIm1vZHVsZSI9Pk1NX01PRFVMRV9QVVNIX05PVElGSUNBVElPTlMpKSkKIAkJCXsKIAkJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9EQVNIQk9BUkQsIF9tbXQoJ0RldmVsb3BlciBUb29scycsTU1fTEFOR1VBR0VfRE9NQUlOKSwgX21tdCgnRGV2ZWxvcGVyIFRvb2xzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfREVWRUxPUEVSX1RPT0xTLCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CiAJCQl9CiAJCQkJCiAJCQlpZiAoJHRoaXMtPmhhc1Blcm1pc3Npb24oYXJyYXkoIm1vZHVsZSI9Pk1NX01PRFVMRV9GUkVFX01FTUJFUl9GT1JNKSkpCiAJCQl7CiAJCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfREFTSEJPQVJELCBfbW10KCdXZWJmb3JtcycsTU1fTEFOR1VBR0VfRE9NQUlOKSwgX21tdCgnV2ViZm9ybXMnLE1NX0xBTkdVQUdFX0RPTUFJTiksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9XRUJGT1JNUywgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwogCQkJfQogCQkJCQogCQkJaWYgKCR0aGlzLT5oYXNQZXJtaXNzaW9uKGFycmF5KCJtb2R1bGUiPT5NTV9NT0RVTEVfQUNUSVZJVFlfTE9HKSkpCiAJCQl7CiAJCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfREFTSEJPQVJELCBfbW10KCdMb2dzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCBfbW10KCdMb2dzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfTE9HUywgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwogCQkJfQogCQkJCQogCQkJaWYgKCR0aGlzLT5oYXNQZXJtaXNzaW9uKGFycmF5KCJtb2R1bGUiPT5NTV9NT0RVTEVfRU1QTE9ZRUVTKSkpCiAJCQl7CiAJCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfREFTSEJPQVJELCBfbW10KCdHZW5lcmFsIFNldHRpbmdzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCBfbW10KCdHZW5lcmFsIFNldHRpbmdzJyxNTV9MQU5HVUFHRV9ET01BSU4pLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfR0VORVJBTF9TRVRUSU5HUywgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwogCQkJfQogCQl9CiAJCQogCQlpZiAoJHRoaXMtPmhhc1Blcm1pc3Npb24oYXJyYXkoIm1vZHVsZSI9Pk1NX01PRFVMRV9SRVBPUlRJTkcpKSkKIAkJewogCQkJYWRkX21lbnVfcGFnZSgnTU0gUmVwb3J0aW5nIFN1aXRlJywgX21tdCgnUmVwb3J0aW5nIFN1aXRlJyksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9SRVBPUlRJTkcsIGFycmF5KCR0aGlzLCAibG9hZE1vZHVsZSIpLCAodmVyc2lvbl9jb21wYXJlKGdldF9ibG9naW5mbygndmVyc2lvbicpLCAiMy44IiwgIj49IikpPydkYXNoaWNvbnMtY2hhcnQtYXJlYSc6TU1fVXRpbHM6OmdldEltYWdlVXJsKCdtbS1sb2dvLXN2Zy13aGl0ZScpLCAnMy4xNCcpOwogCQkJCiAJCQlpZihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokRkVBVFVSRV9SRVBPUlRJTkdfU1VJVEUpID09IE1NX01lbWJlck1vdXNlU2VydmljZTo6JEFDVElWRSkKIAkJCXsKCSAJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9SRVBPUlRJTkcsIF9tbXQoJ01lbWJlciBDb3VudCcpLF9tbXQoJ01lbWJlciBDb3VudCcpLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfTkVXX01FTUJFUlNfUkVQT1JULCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CgkgCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfUkVQT1JUSU5HLCBfbW10KCdNZW1iZXJzaGlwIFNhbGVzJyksX21tdCgnTWVtYmVyc2hpcCBTYWxlcycpLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfU0FMRVNfQllfTUVNQkVSU0hJUF9SRVBPUlQsIGFycmF5KCR0aGlzLCAibG9hZE1vZHVsZSIpKTsKCSAJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9SRVBPUlRJTkcsIF9tbXQoJ1Byb2R1Y3QgU2FsZXMnKSxfbW10KCdQcm9kdWN0IFNhbGVzJyksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9TQUxFU19CWV9QUk9EVUNUX1JFUE9SVCwgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwoJIAkJCWFkZF9zdWJtZW51X3BhZ2UoTU1fTU9EVUxFX1JFUE9SVElORywgX21tdCgnQ3VzdG9tZXIgVmFsdWUnKSxfbW10KCdDdXN0b21lciBWYWx1ZScpLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfQ1VTVE9NRVJfVkFMVUVfUkVQT1JULCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CgkgCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfUkVQT1JUSU5HLCBfbW10KCdRdWljayBBdmVyYWdlJyksX21tdCgnUXVpY2sgQXZlcmFnZScpLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfU0lNUExFX0FWRVJBR0VfUkVQT1JULCBhcnJheSgkdGhpcywgImxvYWRNb2R1bGUiKSk7CQkJCgkgCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfUkVQT1JUSU5HLCBfbW10KCdDb21wYXJlIExldmVscycpLF9tbXQoJ0NvbXBhcmUgTGV2ZWxzJyksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9ORVdfTUVNQkVSU19DT01QQVJJU09OX1JFUE9SVCwgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwkKCSAJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9SRVBPUlRJTkcsIF9tbXQoJ1BheW1lbnQgU2VydmljZScpLF9tbXQoJ1BheW1lbnQgU2VydmljZScpLCAnbW9kZXJhdGVfY29tbWVudHMnLCBNTV9NT0RVTEVfU0FMRVNfQllfUEFZTUVOVF9TRVJWSUNFX1JFUE9SVCwgYXJyYXkoJHRoaXMsICJsb2FkTW9kdWxlIikpOwkKCSAJCQlhZGRfc3VibWVudV9wYWdlKE1NX01PRFVMRV9SRVBPUlRJTkcsIF9tbXQoJ0NoYW5uZWwgU2FsZXMnKSxfbW10KCdDaGFubmVsIFNhbGVzJyksICdtb2RlcmF0ZV9jb21tZW50cycsIE1NX01PRFVMRV9UT1RBTF9WQUxVRV9SRVBPUlQsIGFycmF5KCR0aGlzLCAibG9hZE1vZHVsZSIpKTsKIAkJCX0KIAkJCWVsc2UgCiAJCQl7CiAJCQkJYWRkX3N1Ym1lbnVfcGFnZShNTV9NT0RVTEVfUkVQT1JUSU5HLCBfbW10KCdBZHZhbmNlZCBSZXBvcnRzJyksIF9tbXQoJ0FkdmFuY2VkIFJlcG9ydHMnKSwgJ21vZGVyYXRlX2NvbW1lbnRzJywgTU1fTU9EVUxFX0dFVF9SRVBPUlRJTkcsIGFycmF5KCR0aGlzLCAibG9hZE1vZHVsZSIpKTsKIAkJCX0KIAkJfQogCQkKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGxvYWRNb2R1bGUoKQogCXsKIAkJcmVxdWlyZV9vbmNlKE1NX01PRFVMRVMuRElSRUNUT1JZX1NFUEFSQVRPUi4idmlldy5waHAiKTsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGhhc1Blcm1pc3Npb24oJHBhcmFtcz1udWxsKQogCXsKIAkJaWYoJHRoaXMtPmlzVmFsaWQoKSkgCiAJCXsKIAkJCSRjcm50TW9kdWxlID0gaXNzZXQoJHBhcmFtc1snbW9kdWxlJ10pPyRwYXJhbXNbJ21vZHVsZSddOiIiOwogCQkJaWYgKCFlbXB0eSgkY3JudE1vZHVsZSkgJiYgcHJlZ19tYXRjaCgiL15NTV8oW2EtekEtWjAtOV9dKylWaWV3JC8iLCRjcm50TW9kdWxlKSkKIAkJCXsKIAkJCQkkY3JudE1vZHVsZSA9ICR0aGlzLT50cmFuc2xhdGVBSkFYTW9kdWxlKCRjcm50TW9kdWxlKTsJCiAJCQl9CiAJCQkKIAkJCXN3aXRjaCgkdGhpcy0+cm9sZUlkKQogCQkJewogCQkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUjoKIAkJCQkJcmV0dXJuIHRydWU7CiAJCiAJCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9DVVNUT01FUl9TVVBQT1JUOgogCQkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfU0FMRVM6CiAJCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9QUk9EVUNUX01BTkFHRVI6CiAJCQkJCSRhbGxvd2VkTW9kdWxlcyA9IGFycmF5KE1NX01PRFVMRV9EQVNIQk9BUkQsIE1NX01PRFVMRV9NQU5BR0VfTUVNQkVSUywgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0dFTkVSQUwsIE1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19BQ0NFU1NfUklHSFRTLCAKIAkJCQkJCU1NX01PRFVMRV9NRU1CRVJfREVUQUlMU19UUkFOU0FDVElPTl9ISVNUT1JZLCBNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfQ1VTVE9NX0ZJRUxEUywgTU1fTU9EVUxFX0lNUE9SVF9XSVpBUkQsIAogCQkJCQkJTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0FDVElWSVRZX0xPRywgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX1VTRVJfREVGSU5FRCwgTU1fTU9EVUxFX0FDVElWSVRZX0xPRywgTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0dJRlRfSElTVE9SWSwgCiAJCQkJCQlNTV9NT0RVTEVfTUVNQkVSX0RFVEFJTFNfU1VCU0NSSVBUSU9OUywgTU1fTU9EVUxFX1BBWVBBTF9JUE5fTE9HLCBNTV9NT0RVTEVfR0VUX1JFUE9SVElORywgTU1fTU9EVUxFX0JST1dTRV9NRU1CRVJTLCBNTV9NT0RVTEVfTUFOQUdFX1RSQU5TQUNUSU9OUyk7CiAJCQkJCQogCQkJCQlpZigkdGhpcy0+cm9sZUlkID09IE1NX1JvbGU6OiRST0xFX1BST0RVQ1RfTUFOQUdFUikKIAkJCQkJewogCQkJCQkJJHByb2R1Y3RTZXR0aW5nTW9kdWxlcyA9IGFycmF5KE1NX01PRFVMRV9QUk9EVUNUUywgTU1fTU9EVUxFX1BST0RVQ1RfU0VUVElOR1MsIE1NX01PRFVMRV9NRU1CRVJTSElQX0xFVkVMUywgTU1fTU9EVUxFX0JVTkRMRVMsIE1NX01PRFVMRV9DT1VQT05TLCAKIAkJCQkJCQkJTU1fTU9EVUxFX0RSSVBfQ09OVEVOVF9TQ0hFRFVMRSwgTU1fTU9EVUxFX0xJTUVMSUdIVF9QUk9EVUNUUywgTU1fTU9EVUxFX0xJTUVMSUdIVF9TSElQUElOR19NRVRIT0RTKTsKCiAJCQkJCQkkYWxsb3dlZE1vZHVsZXMgPSBhcnJheV9tZXJnZSgkYWxsb3dlZE1vZHVsZXMsICRwcm9kdWN0U2V0dGluZ01vZHVsZXMpOwogCQkJCQl9CiAJCQkJCQogCQkJCQlyZXR1cm4gKCFlbXB0eSgkY3JudE1vZHVsZSkgJiYgaW5fYXJyYXkoJGNybnRNb2R1bGUsICRhbGxvd2VkTW9kdWxlcykpOwkKIAkJCQkJYnJlYWs7CiAJCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9BTkFMWVNUOgogCQkJCQkkYWxsb3dlZE1vZHVsZXMgPSBhcnJheShNTV9NT0RVTEVfREFTSEJPQVJELE1NX01PRFVMRV9SRVBPUlRJTkcsTU1fTU9EVUxFX0dFVF9SRVBPUlRJTkcpOwogCQkJCQlyZXR1cm4gKCFlbXB0eSgkY3JudE1vZHVsZSkgJiYgaW5fYXJyYXkoJGNybnRNb2R1bGUsICRhbGxvd2VkTW9kdWxlcykpOwkKIAkJCQkJYnJlYWs7CiAJCQkJZGVmYXVsdDoKIAkJCQkJcmV0dXJuIGZhbHNlOwogCQkJfQogCQkJcmV0dXJuIGZhbHNlOwogCQl9CiAJCQogCQkvLyBub3QgYSB2YWxpZCBNTSBlbXBsb3llZSBzbyBncmFudCBhY2Nlc3MKIAkJcmV0dXJuIHRydWU7CiAJfQogCQogCQogCXB1YmxpYyBmdW5jdGlvbiB0cmFuc2xhdGVBSkFYTW9kdWxlKCRtb2R1bGUpCiAJewogCQkkbWFwcGluZ3MgPSBhcnJheSggCQkJCiAJCQknTU1fQWNjZXNzUmlnaHRzVmlldycgICAgICAgICAgICAgPT4gTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0FDQ0VTU19SSUdIVFMsCiAJCQknTU1fQWN0aXZpdHlMb2dWaWV3JyAgICAgICAgICAgICAgPT4gTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0FDVElWSVRZX0xPRywKIAkJCSdNTV9BZmZpbGlhdGVJbnRlZ3JhdGlvblZpZXcnICAgICA9PiBNTV9NT0RVTEVfQUZGSUxJQVRFX0lOVEVHUkFUSU9OLAogCQkJJ01NX0FwaVZpZXcnICAgICAgICAgICAgICAgICAgICAgID0+IE1NX01PRFVMRV9BUEksCiAJCQknTU1fQnVuZGxlc1ZpZXcnICAgICAgICAgICAgICAgICAgPT4gTU1fTU9EVUxFX0JVTkRMRVMsCiAJCQknTU1fQ29tbWlzc2lvblByb2ZpbGVzVmlldycgICAgICAgPT4gTU1fTU9EVUxFX0NPTU1JU1NJT05fUFJPRklMRVMsCiAJCQknTU1fQ3VzdG9tRmllbGRWaWV3JyAgICAgICAgICAgICAgPT4gTU1fTU9EVUxFX0NVU1RPTV9GSUVMRFMsCiAJCQknTU1fRGFzaGJvYXJkVmlldycgICAgICAgICAgICAgICAgPT4gTU1fTU9EVUxFX0RBU0hCT0FSRCwKIAkJCSdNTV9EcmlwQ29udGVudFNjaGVkdWxlVmlldycgICAgICA9PiBNTV9NT0RVTEVfRFJJUF9DT05URU5UX1NDSEVEVUxFLAogCQkJJ01NX0R1cGxpY2F0ZVN1YnNjcmlwdGlvbnNWaWV3JyAgID0+IE1NX01PRFVMRV9EVVBMSUNBVEVfU1VCU0NSSVBUSU9OX1RPT0wsCiAJCQknTU1fRW1haWxJbnRlZ3JhdGlvblZpZXcnCQkgID0+IE1NX01PRFVMRV9FTUFJTF9JTlRFR1JBVElPTiwKIAkJCSdNTV9FbXBsb3llZXNWaWV3JwkJCQkgID0+IE1NX01PRFVMRV9FTVBMT1lFRVMsCiAJCQknTU1fR2lmdEhpc3RvcnlWaWV3JwkJICAgCSAgPT4gTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0dJRlRfSElTVE9SWSwKIAkJCSdNTV9JbXBvcnRXaXphcmRWaWV3JwkJCSAgPT4gTU1fTU9EVUxFX0lNUE9SVF9XSVpBUkQsCiAJCQknTU1fVXNlckRlZmluZWRQYWdlVmlldycJCSAgPT4gTU1fTU9EVUxFX1VTRVJfREVGSU5FRF9QQUdFUywKIAkJCSdNTV9MaW1lTGlnaHRQcm9kdWN0c1ZpZXcnCQkgID0+IE1NX01PRFVMRV9MSU1FTElHSFRfUFJPRFVDVFMsCiAJCQknTU1fTGltZUxpZ2h0U2hpcHBpbmdNZXRob2RzVmlldycgPT4gTU1fTU9EVUxFX0xJTUVMSUdIVF9TSElQUElOR19NRVRIT0RTLAogCQkJJ01NX01hbmFnZUluc3RhbGxWaWV3JwkJCSAgPT4gTU1fTU9EVUxFX0dFTkVSQUxfU0VUVElOR1MsCiAJCQknTU1fTWVtYmVyRGV0YWlsc1ZpZXcnICAgICAgICAgICAgPT4gTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX0dFTkVSQUwsCiAJCQknTU1fTWVtYmVyc2hpcExldmVsc1ZpZXcnCQkgID0+IE1NX01PRFVMRV9NRU1CRVJTSElQX0xFVkVMUywKIAkJCSdNTV9NZW1iZXJzVmlldycgICAgICAgICAgICAgICAgICA9PiBNTV9NT0RVTEVfTUFOQUdFX01FTUJFUlMsCiAJCQknTU1fUGF5bWVudFNldHRpbmdzVmlldycJCSAgPT4gTU1fTU9EVUxFX1BBWU1FTlRfU0VUVElOR1MsCiAJCQknTU1fUGF5bWVudFV0aWxzVmlldycJCQkgID0+IE1NX01PRFVMRV9NQU5BR0VfTUVNQkVSUywKIAkJCSdNTV9Qcm9kdWN0VmlldycJCQkJICA9PiBNTV9NT0RVTEVfUFJPRFVDVFMsCiAJCQknTU1fUHVzaE5vdGlmaWNhdGlvblZpZXcnCQkgID0+IE1NX01PRFVMRV9QVVNIX05PVElGSUNBVElPTlMsCiAJCQknTU1fUmVwb3J0aW5nVmlldycJCSAgCQkgID0+IE1NX01PRFVMRV9SRVBPUlRJTkcsCiAJCQknTU1fU2hpcHBpbmdNZXRob2RzVmlldycJCSAgPT4gTU1fTU9EVUxFX1NISVBQSU5HLAogCQkJJ01NX1NvY2lhbExvZ2luVmlldycJCQkgID0+IE1NX01PRFVMRV9FWFRFTlNJT05TLAogCQkJJ01NX1N1YnNjcmlwdGlvbnNWaWV3JwkJCSAgPT4gTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX1NVQlNDUklQVElPTlMsCiAJCQknTU1fVHJhbnNhY3Rpb25IaXN0b3J5VmlldycJCSAgPT4gTU1fTU9EVUxFX01FTUJFUl9ERVRBSUxTX1RSQU5TQUNUSU9OX0hJU1RPUlkKIAkJCQogCQkJCiAJCSk7CiAJCXJldHVybiAoaXNzZXQoJG1hcHBpbmdzWyRtb2R1bGVdKT8kbWFwcGluZ3NbJG1vZHVsZV06JG1vZHVsZSk7CiAJfQogCQogCQogCS8qKgogCSAqIFRoaXMgZnVuY3Rpb24gc2V0cyBhbiBhY2Nlc3MgcmVzdHJpY3Rpb24gb2YgYSBwYXJ0aWN1bGFyIGZvciB0aGUgZW1wbG95ZWUuCiAJICogCiAJICogQHBhcmFtIFN0cmluZyAkdHlwZSBhIGNvbnN0YW50IHJlcHJlc2VudGluZyB0aGUgdHlwZSBvZiBhY2Nlc3MgcmVzdHJpY3Rpb24KIAkgKiBAcGFyYW0gQXJyYXkgJHZhbHVlcyBhbiBhcnJheSBvZiB2YWx1ZXMKIAkgKi8KIAlwdWJsaWMgZnVuY3Rpb24gc2V0QWNjZXNzUmVzdHJpY3Rpb25zKCR0eXBlLCAkdmFsdWVzKQogCXsKIAkJc3dpdGNoKCR0eXBlKQogCQl7CiAJCQljYXNlIHNlbGY6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQOgogCQkJCSR0aGlzLT5hY2Nlc3NSZXN0cmljdGlvbnNbJHR5cGVdID0gJHZhbHVlczsKIAkJCQlicmVhazsKIAkJCQkKIAkJCWRlZmF1bHQ6CiAJCQkJLy8gZG8gbm90aGluZwogCQl9CiAJfQogCQogCS8qKgogCSAqIFJldHVybnMgYW4gYXJyYXkgb2YgdmFsdWVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgYWNjZXNzIHJlc3RyaWN0aW9uIHR5cGUKIAkgKi8KIAlwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjZXNzUmVzY3JpY3Rpb25zKCR0eXBlKQogCXsKIAkJc3dpdGNoKCR0aGlzLT5yb2xlSWQpCiAJCXsKIAkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUjoKIAkJCQlyZXR1cm4gYXJyYXkoKTsKIAkJCQkJCiAJCQljYXNlIE1NX1JvbGU6OiRST0xFX0NVU1RPTUVSX1NVUFBPUlQ6CiAJCQljYXNlIE1NX1JvbGU6OiRST0xFX1NBTEVTOgogCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9QUk9EVUNUX01BTkFHRVI6CgkJIAkJc3dpdGNoKCR0eXBlKQoJCSAJCXsKCQkgCQkJY2FzZSBzZWxmOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUDoKCQkgCQkJCWlmKGlzc2V0KCR0aGlzLT5hY2Nlc3NSZXN0cmljdGlvbnNbJHR5cGVdKSkKCQkgCQkJCXsKCQkgCQkJCQlyZXR1cm4gJHRoaXMtPmFjY2Vzc1Jlc3RyaWN0aW9uc1skdHlwZV07CgkJIAkJCQl9CgkJIAkJCQlicmVhazsKCQkgCQl9CgkJIAkJYnJlYWs7CiAJCX0KIAkJCiAJCXJldHVybiBhcnJheSgpOwogCX0KIAkKIAkvKioKIAkgKiBUaGlzIGZ1bmN0aW9uIGNoZWNrcyBpZiB0aGUgZW1wbG95ZWUgaGFzIGFjY2VzcyBvZiBhIHBhcnRpY3VsYXIgdHlwZQogCSAqIAogCSAqIEBwYXJhbSBTdHJpbmcgJHR5cGUgYSBjb25zdGFudCByZXByZXNlbnRpbmcgdGhlIHR5cGUgb2YgYWNjZXNzIHJlc3RyaWN0aW9uIHRvIGNoZWNrIGZvcgogCSAqIEBwYXJhbSBTdHJpbmcgJHZhbHVlIGEgdmFsdWUgdG8gY2hlY2sgaWYgdGhlIGVtcGxveWVlIGhhcyBhY2Nlc3MgdG8gaXQKIAkgKi8KIAlwdWJsaWMgZnVuY3Rpb24gaGFzQWNjZXNzKCR0eXBlLCAkdmFsdWUpCiAJewogCQlzd2l0Y2goJHRoaXMtPnJvbGVJZCkKIAkJewogCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9BRE1JTklTVFJBVE9SOgogCQkJCXJldHVybiB0cnVlOwogCQkKIAkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfQ1VTVE9NRVJfU1VQUE9SVDoKIAkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfU0FMRVM6CiAJCQljYXNlIE1NX1JvbGU6OiRST0xFX1BST0RVQ1RfTUFOQUdFUjoKIAkJCQlzd2l0Y2goJHR5cGUpCiAJCQkJewogCQkJCQljYXNlIHNlbGY6OiRBQ0NFU1NfVFlQRV9NRU1CRVJTSElQOgogCQkJCQkJaWYoaXNzZXQoJHRoaXMtPmFjY2Vzc1Jlc3RyaWN0aW9uc1skdHlwZV0pICYmIGlzX2FycmF5KCR0aGlzLT5hY2Nlc3NSZXN0cmljdGlvbnNbJHR5cGVdKSAmJiBjb3VudCgkdGhpcy0+YWNjZXNzUmVzdHJpY3Rpb25zWyR0eXBlXSkgPiAwKQogCQkJCQkJewogCQkJCQkJCXJldHVybiBpbl9hcnJheSgkdmFsdWUsICR0aGlzLT5hY2Nlc3NSZXN0cmljdGlvbnNbJHR5cGVdKTsKIAkJCQkJCX0KIAkJCQkJCWVsc2UgCiAJCQkJCQl7CiAJCQkJCQkJcmV0dXJuIHRydWU7CiAJCQkJCQl9CiAJCQkJCQlicmVhazsKIAkJCQl9CiAJCQkJYnJlYWs7CiAJCX0KIAkJCiAJCXJldHVybiBmYWxzZTsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldEhvbWVwYWdlKCkKIAl7CiAJCWlmKCR0aGlzLT5pc1ZhbGlkKCkpCiAJCXsKIAkJCXN3aXRjaCgkdGhpcy0+cm9sZUlkKQogCQkJewogCQkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfQURNSU5JU1RSQVRPUjoKIAkJCQkJcmV0dXJuIE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoTU1fTU9EVUxFX0RBU0hCT0FSRCwgTU1fTU9EVUxFX0RBU0hCT0FSRCk7CiAJCQogCQkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfQ1VTVE9NRVJfU1VQUE9SVDoKIAkJCQljYXNlIE1NX1JvbGU6OiRST0xFX1NBTEVTOgogCQkJCQlyZXR1cm4gTU1fTW9kdWxlVXRpbHM6OmdldFVybChNTV9NT0RVTEVfTUFOQUdFX01FTUJFUlMpOwogCQkJCQkKIAkJCQljYXNlIE1NX1JvbGU6OiRST0xFX0FOQUxZU1Q6CiAJCQkJCXJldHVybiBNTV9Nb2R1bGVVdGlsczo6Z2V0VXJsKE1NX01PRFVMRV9SRVBPUlRJTkcpOwogCQkJCQkKIAkJCQljYXNlIE1NX1JvbGU6OiRST0xFX1BST0RVQ1RfTUFOQUdFUjoKIAkJCQkJcmV0dXJuIE1NX01vZHVsZVV0aWxzOjpnZXRVcmwoTU1fTU9EVUxFX1BST0RVQ1RfU0VUVElOR1MpOwogCQkJfQogCQl9CiAJCQogCQlyZXR1cm4gYWRtaW5fdXJsKCk7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBjYW5QbGFjZVN1cHBvcnRPcmRlcigpCiAJewogCQlpZigkdGhpcy0+aXNWYWxpZCgpKQogCQl7CiAJCQlzd2l0Y2goJHRoaXMtPnJvbGVJZCkKIAkJCXsKIAkJCQljYXNlIE1NX1JvbGU6OiRST0xFX0FETUlOSVNUUkFUT1I6CiAJCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9DVVNUT01FUl9TVVBQT1JUOgogCQkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfU0FMRVM6CiAJCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9QUk9EVUNUX01BTkFHRVI6CiAJCQkJCXJldHVybiB0cnVlOwogCQkJfQogCQl9CiAJCXJldHVybiBmYWxzZTsKIAl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGNhbkxvZ2luQXNNZW1iZXIoKQogCXsKIAkJaWYoJHRoaXMtPmlzVmFsaWQoKSkKIAkJewogCQkJc3dpdGNoKCR0aGlzLT5yb2xlSWQpCiAJCQl7CiAJCQkJY2FzZSBNTV9Sb2xlOjokUk9MRV9BRE1JTklTVFJBVE9SOgogCQkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfQ1VTVE9NRVJfU1VQUE9SVDoKIAkJCQljYXNlIE1NX1JvbGU6OiRST0xFX1NBTEVTOgogCQkJCWNhc2UgTU1fUm9sZTo6JFJPTEVfUFJPRFVDVF9NQU5BR0VSOgogCQkJCQlyZXR1cm4gdHJ1ZTsKIAkJCX0KIAkJfQogCQlyZXR1cm4gZmFsc2U7CiAJfQogCQogCXB1YmxpYyBmdW5jdGlvbiBjYW5NYW5hZ2VNZW1iZXIoTU1fVXNlciAkdXNlcikKIAl7CiAJCWlmKCR0aGlzLT5pc1ZhbGlkKCkgJiYgJHVzZXItPmlzVmFsaWQoKSkKIAkJewogCQkJJG1lbWJlcnNoaXBBY2Nlc3MgPSAkdGhpcy0+aGFzQWNjZXNzKE1NX0VtcGxveWVlOjokQUNDRVNTX1RZUEVfTUVNQkVSU0hJUCwgJHVzZXItPmdldE1lbWJlcnNoaXBJZCgpKTsKIAkJCQogCQkJcmV0dXJuICRtZW1iZXJzaGlwQWNjZXNzOwogCQl9CiAJCXJldHVybiBmYWxzZTsKIAl9CiAJCiAJLyoqIEdFVFRFUlMvU0VUVEVSUyAqLwogCQogCXB1YmxpYyBmdW5jdGlvbiBnZXRVc2VySWQoKXsKIAkJcmV0dXJuICR0aGlzLT51c2VySWQ7CiAJfQoKIAlwdWJsaWMgZnVuY3Rpb24gc2V0VXNlcklkKCRzdHIpCiAJewogCQkkdGhpcy0+dXNlcklkID0gJHN0cjsKIAl9CiAJCglwdWJsaWMgZnVuY3Rpb24gc2V0UGFzc3dvcmQoJHN0cikgCgl7CgkJJHRoaXMtPnBhc3N3b3JkID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFBhc3N3b3JkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnBhc3N3b3JkOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VXNlcm5hbWUoJHN0cikgCgl7CgkJJHRoaXMtPnVzZXJuYW1lID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFVzZXJuYW1lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVzZXJuYW1lOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldFJvbGVJZCgkc3RyKSAKCXsKCQkkdGhpcy0+cm9sZUlkID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFJvbGVJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5yb2xlSWQ7Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gc2V0UGhvbmUoJHN0cikgCgl7CgkJJHRoaXMtPnBob25lID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdldFBob25lKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnBob25lOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldERpc3BsYXlOYW1lKCRzdHIpIAoJewoJCSR0aGlzLT5kaXNwbGF5TmFtZSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREaXNwbGF5TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5kaXNwbGF5TmFtZTsKCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXRGaXJzdE5hbWUoJHN0cikgCgl7CgkJJHRoaXMtPmZpcnN0TmFtZSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRGaXJzdE5hbWUoKQoJewoJCXJldHVybiAkdGhpcy0+Zmlyc3ROYW1lOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldExhc3ROYW1lKCRzdHIpIAoJewoJCSR0aGlzLT5sYXN0TmFtZSA9ICRzdHI7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRMYXN0TmFtZSgpCgl7CgkJcmV0dXJuICR0aGlzLT5sYXN0TmFtZTsKCX0KIAkKCXB1YmxpYyBmdW5jdGlvbiBzZXRFbWFpbCgkc3RyKSAKCXsKCQkkdGhpcy0+ZW1haWwgPSAkc3RyOwoJfQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RW1haWwoKQoJewoJCXJldHVybiAkdGhpcy0+ZW1haWw7Cgl9CiAJCglwdWJsaWMgZnVuY3Rpb24gc2V0SXNEZWZhdWx0KCRzdHIpIAoJewoJCSR0aGlzLT5pc0RlZmF1bHRGbGFnID0gJHN0cjsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIGlzRGVmYXVsdCgpCgl7CgkJcmV0dXJuICR0aGlzLT5pc0RlZmF1bHRGbGFnOwoJfQogCQoJcHVibGljIGZ1bmN0aW9uIHNldEFsbG93RXhwb3J0KCR2YWwpIAoJewoJCSR0aGlzLT5hbGxvd0V4cG9ydCA9IDA7CgkJCgkJaWYoaW50dmFsKCR2YWwpID09IDEpCgkJewoJCQkkdGhpcy0+YWxsb3dFeHBvcnQgPSAkdmFsOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGRvQWxsb3dFeHBvcnQoKQoJewoJCXJldHVybiAoJHRoaXMtPmFsbG93RXhwb3J0ID09IDEpID8gdHJ1ZSA6IGZhbHNlOwoJfQogCQogCQogCS8qKiBVVElMSVRJRVMgKi8KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXREZWZhdWx0KCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJJGVtcGxveWVlID0gbmV3IE1NX0VtcGxveWVlKCk7CgkJCgkJJHNxbCA9ICJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfRU1QTE9ZRUVfQUNDT1VOVFMuIiBXSEVSRSBpc19kZWZhdWx0PScxJzsiOwoJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jvdygkc3FsKTsKCQkKCQlpZigkcmVzdWx0KSAKCQl7CgkJCSRlbXBsb3llZS0+c2V0SWQoJHJlc3VsdC0+aWQpOwoJCQkkZW1wbG95ZWUtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCQoJCXJldHVybiAkZW1wbG95ZWU7Cgl9CgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZmluZEJ5VXNlcklkKCR1c2VySWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRjYWNoZUtleSA9IGdldF9jYWxsZWRfY2xhc3MoKS4iX3VzZXJfaWRfeyR1c2VySWR9IjsKCQkkZW1wbG95ZWUgPSBNTV9PYmplY3RDYWNoZTo6Z2V0KCRjYWNoZUtleSk7CgkJaWYgKCRlbXBsb3llZSAhPSBudWxsKQoJCXsKCQkJcmV0dXJuICRlbXBsb3llZTsKCQl9CgkJCgkJJHNxbCA9ICJTRUxFQ1QgZW1wLiosIHUudXNlcl9sb2dpbiBBUyB1c2VybmFtZSwgdS51c2VyX3Bhc3MgQVMgcGFzc3dvcmQsIHUuSUQgQVMgdXNlcl9pZCBGUk9NICIuTU1fVEFCTEVfRU1QTE9ZRUVfQUNDT1VOVFMuIiBlbXAgIi4KCQkJICAgIkxFRlQgSk9JTiB7JHdwZGItPnVzZXJzfSB1IE9OIGVtcC51c2VyX2lkID0gdS5JRCBXSEVSRSBlbXAudXNlcl9pZD0neyR1c2VySWR9JyI7CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQkKCQlpZigkcmVzdWx0ICYmIGlzc2V0KCRyZXN1bHQtPmlkKSkKCQl7CgkJCSRlbXBsb3llZSA9IG5ldyBNTV9FbXBsb3llZSgkcmVzdWx0LT5pZCwgZmFsc2UpOwoJCQkkZW1wbG95ZWUtPnNldERhdGEoJHJlc3VsdCk7CgkJCU1NX09iamVjdENhY2hlOjpzZXQoJGNhY2hlS2V5LCAkZW1wbG95ZWUpOwoJCQlyZXR1cm4gJGVtcGxveWVlOwoJCX0KCQkJCgkJcmV0dXJuIG5ldyBNTV9FbXBsb3llZSgpOwoJfQoJCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzRW1wbG95ZWUoJHVzZXJJZD0wKQoJewoJCWlmKCR1c2VySWQgPiAwKQoJCXsKCQkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmZpbmRCeVVzZXJJZCgkdXNlcklkKTsKCQl9CgkJZWxzZQoJCXsKCQkJZ2xvYmFsICRjdXJyZW50X3VzZXI7CgkJCQoJCQkvL2lmICRjdXJyZW50X3VzZXIgaXMgbm90IG9mIHR5cGUgV1BfVXNlciwgb3IgaWYgdGhlIFdQX1VzZXIgaGFzIGFuIGludmFsaWQgaWQgb2YgMCwgdGhpcyBpcyBub3QgYSB2YWxpZCBlbXBsb3llZSBhY2NvdW50KQoJCQlpZiAoISgkY3VycmVudF91c2VyIGluc3RhbmNlb2YgV1BfVXNlcikgfHwgKCRjdXJyZW50X3VzZXItPklEID09IDApKQoJCQl7CgkJCQlyZXR1cm4gZmFsc2U7CgkJCX0KCQkJJGVtcGxveWVlID0gTU1fRW1wbG95ZWU6OmZpbmRCeVVzZXJJZCgkY3VycmVudF91c2VyLT5JRCk7CgkJfQoJCQoJCXJldHVybiAkZW1wbG95ZWUtPmlzVmFsaWQoKTsKCX0KCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBpc0JlaW5nVXNlZCgkYWNjb3VudElkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkvLyBjaGVjayBpZiBlbXBsb3llZSBhY2NvdW50IGlzIHRoZSBkZWZhdWx0CgkJJHNxbCA9ICJzZWxlY3QgKiBmcm9tICIuTU1fVEFCTEVfRU1QTE9ZRUVfQUNDT1VOVFMuIiB3aGVyZSBpZD0neyRhY2NvdW50SWR9JyI7CgkJJHJvdyA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyb3ctPmlzX2RlZmF1bHQgPT0gIjEiKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCQkKCQkvLyBjaGVjayBpZiBlbXBsb3llZSBhY2NvdW50IGlzIGFzc29jaWF0ZWQgd2l0aCBhIG1lbWJlcnNoaXAgbGV2ZWwKCQkkc3FsID0gInNlbGVjdCBjb3VudCgqKSBhcyB0b3RhbCBmcm9tICIuTU1fVEFCTEVfTUVNQkVSU0hJUF9MRVZFTFMuIiB3aGVyZSBlbWFpbF9mcm9tX2lkPSd7JGFjY291bnRJZH0nIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJHNxbCk7CgkJCgkJaWYoJHJvdyAmJiAkcm93LT50b3RhbCA+IDApIHsKCQkJcmV0dXJuIHRydWU7CgkJfQoJCQoJCS8vIGNoZWNrIGlmIGVtcGxveWVlIGFjY291bnQgaXMgYXNzb2NpYXRlZCB3aXRoIGEgcHVzaCBub3RpZmljYXRpb24KCQkkc3FsID0gInNlbGVjdCBhY3Rpb25fdmFsdWUgZnJvbSAiLk1NX1RBQkxFX0FDVElPTlMuIiB3aGVyZSBhY3Rpb25fdHlwZT0nIi5NTV9BY3Rpb246OiRNTV9BQ1RJT05fU0VORF9FTUFJTC4iJyI7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCgkJaWYoJHJlc3VsdHMpIAoJCXsKCQkJZm9yZWFjaCgkcmVzdWx0cyBhcyAkcm93KQoJCQl7CgkJCQkkYWN0aW9uVmFsdWUgPSB1bnNlcmlhbGl6ZSgkcm93LT5hY3Rpb25fdmFsdWUpOwoJCQkJCgkJCQlpZihpc3NldCgkYWN0aW9uVmFsdWVbImVtYWlsVG9JZCJdKSkKCQkJCXsKCQkJCQlpZihpbnR2YWwoJGFjY291bnRJZCkgPT0gaW50dmFsKCRhY3Rpb25WYWx1ZVsiZW1haWxUb0lkIl0pKQoJCQkJCXsKCQkJCQkJcmV0dXJuIHRydWU7CgkJCQkJfQoJCQkJfQoJCQkJCgkJCQlpZihpc3NldCgkYWN0aW9uVmFsdWVbImVtYWlsRnJvbUlkIl0pKQoJCQkJewoJCQkJCWlmKGludHZhbCgkYWNjb3VudElkKSA9PSBpbnR2YWwoJGFjdGlvblZhbHVlWyJlbWFpbEZyb21JZCJdKSkKCQkJCQl7CgkJCQkJCXJldHVybiB0cnVlOwoJCQkJCX0KCQkJCX0KCQkJfQoJCX0KCQkKCQlyZXR1cm4gZmFsc2U7Cgl9CgkKCQoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRFbXBsb3llZXNMaXN0KCkKIAl7CiAJCWdsb2JhbCAkd3BkYjsKIAkJCiAJCSRsaXN0ID0gYXJyYXkoKTsKIAkJJGRlZmF1bHQgPSAiIjsKIAkJCiAJCSRzcWwgPSAic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX0VNUExPWUVFX0FDQ09VTlRTOwogCQkKIAkJJHJvd3MgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CiAJCQogCQlpZigkcm93cykKIAkJewoJIAkJZm9yZWFjaCgkcm93cyBhcyAkcm93KQoJCQl7CgkJCQlpZigkcm93LT5pc19kZWZhdWx0ID09ICIxIikgCgkJCQl7CgkJCQkJJGRlZmF1bHQgPSAkcm93LT5pZDsKCQkJCX0KCQkJCQoJCQkJJGxpc3RbJHJvdy0+aWRdID0gJHJvdy0+ZGlzcGxheV9uYW1lIC4gIiAoIiAuICRyb3ctPmVtYWlsIC4gIikiOwkKCQkJfQogCQl9CiAJCQogCQkkZW1haWxzID0gbmV3IHN0ZENsYXNzKCk7CiAJCSRlbWFpbHMtPmRlZmF1bHQgPSAkZGVmYXVsdDsKIAkJJGVtYWlscy0+bGlzdCA9ICRsaXN0OwogCQkJCiAJCXJldHVybiAkZW1haWxzOwogCX0KfQo=', 0, '2018-11-21 06:38:55'),
(248, 'paypalipnlogview', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUGF5UGFsSVBOTG9nVmlldyBleHRlbmRzIE1NX1JCQUNHZW5lcmFsRW1wbG95ZWVWaWV3CnsKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TRUFSQ0ggPSAic2VhcmNoIjsKCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TRUFSQ0g6CgkJCQkJcmV0dXJuICR0aGlzLT5nZW5lcmF0ZURhdGFHcmlkKCRwb3N0KTsKCQkJCQkKCQkJCWRlZmF1bHQ6CgkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkcmVzcG9uc2UpOwoJCQl9CgkJfQoJCWVsc2UgCgkJewoJCQlyZXR1cm4gJHJlc3BvbnNlOwoJCX0KCX0KCQoJcHVibGljIGZ1bmN0aW9uIGdlbmVyYXRlRGF0YUdyaWQoJHBvc3Q9bnVsbCkKCXsKCQlyZXR1cm4gTU1fVEVNUExBVEU6OmdlbmVyYXRlKE1NX01PRFVMRVMuIi9wYXlwYWxfaXBuX2xvZy5kYXRhZ3JpZC5waHAiLCAkcG9zdCk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YSgkcG9zdCwgTU1fRGF0YUdyaWQgJGRnKQoJewoJCSR3aGVyZUNsYXVzZSA9IGFycmF5KCk7CgkJCgkJaWYoIWVtcHR5KCRwb3N0WyJtZW1iZXJfaWQiXSkgJiYgaW50dmFsKCRwb3N0WyJtZW1iZXJfaWQiXSk+MCkKCQl7CgkJCWFycmF5X3B1c2goJHdoZXJlQ2xhdXNlLCAiKHVzZXJfaWQ9JyIuaW50dmFsKCRwb3N0WyJtZW1iZXJfaWQiXSkuIicpIik7CgkJfQoJCWlmKCFlbXB0eSgkcG9zdFsidHJhbnNhY3Rpb25faWQiXSkgJiYgaW50dmFsKCRwb3N0WyJ0cmFuc2FjdGlvbl9pZCJdKT4wKQoJCXsKCQkJYXJyYXlfcHVzaCgkd2hlcmVDbGF1c2UsICIodHhuX2lkPSciLmludHZhbCgkcG9zdFsidHJhbnNhY3Rpb25faWQiXSkuIicpIik7CgkJfSAgCgkJCgkJaWYoIWVtcHR5KCRwb3N0WyJmcm9tX2RhdGUiXSkpCgkJewoJCQkkZnJvbURhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvVVRDKCRwb3N0Wydmcm9tX2RhdGUnXSwiWS1tLWQiLCIwMDowMDowMCIpOwoJCQlhcnJheV9wdXNoKCR3aGVyZUNsYXVzZSwgIihyZWNlaXZlZCA+PSAneyRmcm9tRGF0ZX0nKSIpOwoJCQkKCQkJaWYoIWVtcHR5KCRwb3N0WyJ0b19kYXRlIl0pKQoJCQl7CQkKCQkJCSR0b0RhdGUgPSBNTV9VdGlsczo6ZGF0ZVRvVVRDKCRwb3N0Wyd0b19kYXRlJ10sIlktbS1kIiwiMjM6NTk6NTkiKTsKCQkJCWFycmF5X3B1c2goJHdoZXJlQ2xhdXNlLCAiKHJlY2VpdmVkIDw9ICd7JHRvRGF0ZX0nKSIpOwoJCQl9CgkJfQoJCgkJJHdoZXJlQ2xhdXNlID0gam9pbigiIEFORCAiLCAkd2hlcmVDbGF1c2UpOwoJCQoJCSRwYXlwYWxJZEZpZWxkID0gTU1fVEFCTEVfUEFZUEFMX0lQTl9MT0cuIi5pZCI7CgkJJGZpZWxkcyA9IGFycmF5KCRwYXlwYWxJZEZpZWxkLCAndHhuX2lkJywgJ3R4bl90eXBlJywgJ3N1YnNjcl9pZCcsICdwYXltZW50X3N0YXR1cycsICdpcG5fY29udGVudCcsICdyZWNlaXZlZCcsICdvcmRlcl9pZCcsICdvcmRlcl9udW1iZXInLCAndXNlcl9pZCcpOwoJCXJldHVybiBzZWxmOjpnZXREYXRhKE1NX1RBQkxFX1BBWVBBTF9JUE5fTE9HLCAkZmllbGRzLCAkZGcsICR3aGVyZUNsYXVzZSk7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCR0YWJsZU5hbWUsICRmaWVsZHM9bnVsbCwgTU1fRGF0YUdyaWQgJGRnPW51bGwsICR3aGVyZSA9ICIiLCAkZ2V0VG90YWw9ZmFsc2UpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCgkJJGNvbHVtbnMgPSAoaXNfbnVsbCgkZmllbGRzKSkgPyAidGJsLioiIDogaW1wbG9kZSgiLCIsICRmaWVsZHMpOwoJCgkJJHNxbFJlc3VsdENvdW50ID0gIlNFTEVDVCBjb3VudChkaXN0aW5jdCBpZCkgYXMgdG90YWwgRlJPTSAiLiR0YWJsZU5hbWU7CgkJaWYoIWVtcHR5KCR3aGVyZSkpCgkJewoJCQlpZihwcmVnX21hdGNoKCIvXih3aGVyZSkvIiwgc3RydG9sb3dlcih0cmltKCR3aGVyZSkpKSkKCQkJewoJCQkJJHNxbFJlc3VsdENvdW50Lj0gIiB7JHdoZXJlfSAiOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHNxbFJlc3VsdENvdW50Lj0gIiB3aGVyZSB7JHdoZXJlfSAiOwoJCQl9CgkJfQoJCgkJJGNvdW50Um93ID0gJHdwZGItPmdldF9yb3coJHNxbFJlc3VsdENvdW50KTsKCQoJCSRwYXlwYWxJUE5UYWJsZSA9IE1NX1RBQkxFX1BBWVBBTF9JUE5fTE9HOwoJCSRvcmRlcnNUYWJsZSA9IE1NX1RBQkxFX09SREVSUzsKCQkkZnJvbUNsYXVzZSA9ICJ7JHBheXBhbElQTlRhYmxlfSBKT0lOIHskb3JkZXJzVGFibGV9IG9uICh7JHBheXBhbElQTlRhYmxlfS5vcmRlcl9pZCA9IHskb3JkZXJzVGFibGV9LmlkKSI7CgkJCgkJaWYoJGNvdW50Um93KQoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgJ3skY291bnRSb3ctPnRvdGFsfScgYXMgdG90YWwsICIuJGNvbHVtbnMuIiBGUk9NIHskZnJvbUNsYXVzZX0gIjsKCQl9CgkJZWxzZQoJCXsKCQkJJHNxbCA9ICJTRUxFQ1QgIi4kY29sdW1ucy4iIEZST00geyRmcm9tQ2xhdXNlfSAiOwoJCX0KCQoJCWlmKCFlbXB0eSgkd2hlcmUpKQoJCXsKCQkJaWYocHJlZ19tYXRjaCgiL14od2hlcmUpLyIsIHN0cnRvbG93ZXIodHJpbSgkd2hlcmUpKSkpCgkJCXsKCQkJCSRzcWwuPSAiIHskd2hlcmV9ICI7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc3FsLj0gIiB3aGVyZSB7JHdoZXJlfSAiOwoJCQl9CgkJfQoJCgkJaWYoIWlzX251bGwoJGRnKSAmJiAhaXNfbnVsbCgkZGctPnNvcnRCeSkgJiYgIWVtcHR5KCRkZy0+c29ydEJ5KSkKCQl7CgkJCSRzcWwuPSAiT1JERVIgQlkgeyRkZy0+c29ydEJ5fSB7JGRnLT5zb3J0RGlyfSI7CgkJfQoJCQoJCWlmKCRnZXRUb3RhbCkKCQl7CgkJCSRyZXN1bHQgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCXJldHVybiAkcmVzdWx0OwoJCX0KCQoJCWlmKCFpc19udWxsKCRkZykpCgkJewoJCQkkc3FsIC49ICRkZy0+Z2V0TGltaXRTcWwoKTsKCQl9CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcmVzdWx0cygkc3FsKTsKCgkJaWYoISRyZXN1bHQgfHwgaXNfbnVsbCgkcmVzdWx0KSkKCQl7CgkJCXJldHVybiBhcnJheSgpOwoJCX0KCQoJCXJldHVybiAkcmVzdWx0OwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(249, 'transactionkey', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogTU1fVHJhbnNhY3Rpb25LZXkgZ2VuZXJhdGVzIGEgdW5pcXVlIGtleSB0aGF0IGlzIHVzZWQgdG8gcmVmZXJlbmNlIGFuIG9yZGVyIGFuZCBhIHVzZXIuIAogKiBJdCBpcyB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjb25maXJtYXRpb24gcGFnZSwgYmVjYXVzZSBzaW5jZSBhbiBvcmRlciBjYW4gYmUgZ2VuZXJhdGVkIGNvbXBsZXRlbHkgb3V0c2lkZSBvZiAKICogTWVtYmVyTW91c2UsIHRoZSBjb25maXJtYXRpb24gbWlnaHQgdGhlIHRoZSBmaXJzdCBNZW1iZXJNb3VzZSBwYWdlIHRoZSB1c2VyIGFjY2Vzc2VzLCBzbyB0aGUgb3JkZXIgYW5kIHVzZXIgCiAqIHdvdWxkIG5vdCBiZSBpbiB0aGUgc2Vzc2lvbi4KICogCiAqLwpjbGFzcyBNTV9UcmFuc2FjdGlvbktleSBleHRlbmRzIE1NX0VudGl0eQp7CQoJcHJpdmF0ZSAkdHJhbnNhY3Rpb25LZXk9IiI7Cglwcml2YXRlICR1c2VySWQ9IiI7Cglwcml2YXRlICRvcmRlcklkPSIiOwoJcHJpdmF0ZSAkYWdlPSIiOwkKCQoJLyoqCgkgKiBnZXREYXRhKCkKCSAqIFJldHJpZXZlIGEgdHJhbnNhY3Rpb24ga2V5IGVudGl0eSBmcm9tIHRoZSBkYi4gCgkgKiBSZXF1aXJlcyB0aGF0IHRoZSB0b2tlbiBvciB0aGUgaWQgYmUgc2V0IG9uIHRoZSBvYmplY3QgCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXREYXRhKCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmICghZW1wdHkoJHRoaXMtPnRyYW5zYWN0aW9uS2V5KSkgCgkJewoJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9LRVkuIiBXSEVSRSB0cmFuc2FjdGlvbl9rZXk9JyIuJHRoaXMtPnRyYW5zYWN0aW9uS2V5LiInOyI7CgkJfQoJCWVsc2UgCgkJewoJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9LRVkuIiBXSEVSRSBpZD0nIi4kdGhpcy0+aWQuIic7IjsKCQl9CgkJJHJlc3VsdCA9ICR3cGRiLT5nZXRfcm93KCRzcWwpOwoJCQoJCWlmKCRyZXN1bHQpIAoJCXsKCQkJJHRoaXMtPnNldERhdGEoJHJlc3VsdCk7CgkJfQoJCWVsc2UgCgkJewoJCQlwYXJlbnQ6OmludmFsaWRhdGUoKTsKCQl9Cgl9CgkKCS8qKgoJICogCgkgKiBTZXRzIHRoZSBlbnRpdHkgZmllbGRzIGJhc2VkIG9uIHRoZSBjb250ZW50IG9mICRkYXRhCgkgKiBAcGFyYW0gb2JqZWN0ICRkYXRhCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXREYXRhKCRkYXRhKQoJewoJCXRyeSAKCQl7CgkJCSR0aGlzLT5pZCA9ICRkYXRhLT5pZDsKCQkJJHRoaXMtPnRyYW5zYWN0aW9uS2V5ID0gJGRhdGEtPnRyYW5zYWN0aW9uX2tleTsKCQkJJHRoaXMtPnVzZXJJZCA9ICRkYXRhLT51c2VyX2lkOwoJCQkkdGhpcy0+b3JkZXJJZCA9ICRkYXRhLT5vcmRlcl9pZDsKCQkJJHRoaXMtPmFnZSA9ICRkYXRhLT5hZ2U7CgkJCQkJCQoJCQlwYXJlbnQ6OnZhbGlkYXRlKCk7CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGV4KSB7CgkJCXBhcmVudDo6aW52YWxpZGF0ZSgpOwoJCX0KCX0KCQoJCgkvKioKCSAqIENvbW1pdHMgdGhlIHZhbHVlcyBzdG9yZWQgaW4gdGhlIGVudGl0eSB0byB0aGUgZGIKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNvbW1pdERhdGEoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkZG9VcGRhdGUgPSBpc3NldCgkdGhpcy0+aWQpICYmICR0aGlzLT5pZCAhPSAiIiAmJiBpbnR2YWwoJHRoaXMtPmlkKSA+IDA7CgkJCgkJTU1fVHJhbnNhY3Rpb246OmJlZ2luKCk7CgkJdHJ5CgkJewkKCQkJCgkJCWlmKCEkZG9VcGRhdGUpIAoJCQl7CgkJCQkkc3FsID0gImluc2VydCBpbnRvICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fS0VZLiIgc2V0ICIgLgoJCQkgCQkJIgl0cmFuc2FjdGlvbl9rZXkgPSAnJXMnLCIgLgoJCQkgCQkJIgl1c2VyX2lkPSclcycsIiAuCgkJCSAJCQkiCW9yZGVyX2lkPSclcycsIiAuCgkJCSAJCQkiCWFnZT1OT1coKSIuCgkJCSAJCQkiIjsKCQkJfQoJCSAJZWxzZSAKCQkgCXsKCQkJCSRzcWwgPSAidXBkYXRlICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fS0VZLiIgc2V0ICIgLgoJCQkgCQkJIgl0cmFuc2FjdGlvbl9rZXkgPSAnJXMnLCIgLgoJCQkgCQkJIgl1c2VyX2lkPSclcycsIiAuCgkJCSAJCQkiCW9yZGVyX2lkPSclcycsIiAuCgkJCSAJCQkiCWFnZT1OT1coKSB3aGVyZSBpZCA9ICd7JHRoaXMtPmlkfSciLgoJCQkgCQkJIiI7CgkJIAl9CgkJCQoJCSAJJHByZXBhcmVkU3FsID0gJHdwZGItPnByZXBhcmUoJHNxbCwgJHRoaXMtPnRyYW5zYWN0aW9uS2V5LCAkdGhpcy0+dXNlcklkLCAkdGhpcy0+b3JkZXJJZCk7CgkJIAkkcmVzdWx0ID0gJHdwZGItPnF1ZXJ5KCRwcmVwYXJlZFNxbCk7CgkJIAkKCQkgCWlmKCRyZXN1bHQgPT09IGZhbHNlKQoJCSAJewoJCSAJCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJCSAJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkVSUk9SOiB1bmFibGUgdG8gY3JlYXRlIHRyYW5zYWN0aW9uIGtleSAoIi4kcHJlcGFyZWRTcWwuIikiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkgCX0KCQkgCQoJCSAJaWYoISRkb1VwZGF0ZSkgewoJCSAJCSR0aGlzLT5pZCA9ICR3cGRiLT5pbnNlcnRfaWQ7CgkJIAl9CgkJfQoJCWNhdGNoKEV4Y2VwdGlvbiAkZXgpCgkJewkKCQkgCU1NX1RyYW5zYWN0aW9uOjpyb2xsYmFjaygpOwoJIAkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRVJST1I6IHVuYWJsZSB0byBjcmVhdGUgdHJhbnNhY3Rpb24ga2V5IiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCU1NX1RyYW5zYWN0aW9uOjpjb21taXQoKTsKCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsKCX0KCQoJLyoqCgkgKiBEZWxldGVzIHRoZSByb3cgaGF2aW5nIGFuIGlkIG1hdGNoaW5nIHRoYXQgc3RvcmVkIGluIHRoZSBlbnRpdHkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRlbGV0ZSgpCgl7CQoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkc3FsID0gIkRFTEVURSBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fS0VZLiIgV0hFUkUgaWQ9JyVkJyBMSU1JVCAxIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5xdWVyeSgkd3BkYi0+cHJlcGFyZSgkc3FsLCAkdGhpcy0+aWQpKTsKCQkKCQlpZigkcmVzdWx0cykgewoJCQlyZXR1cm4gdHJ1ZTsKCQl9CQoJCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJLyoqCgkgKiBEZWxldGVzIGFsbCB0cmFuc2FjdGlvbiBrZXlzIG9sZGVyIHRoYW4gMjAgbWlucwoJICogQHJldHVybiBib29sZWFuIHRydWUgaWYgb3BlcmF0aW9uIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZQoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGRlbGV0ZUFnZWQoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQoJCSRzcWwgPSAiREVMRVRFIEZST00gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9LRVkuIiBXSEVSRSBhZ2UgPCAobm93KCkgLSBJTlRFUlZBTCAyMCBtaW51dGUpIjsKCQkkcmVzdWx0cyA9ICR3cGRiLT5xdWVyeSgkc3FsKTsKCQoJCWlmKCRyZXN1bHRzKSB7CgkJCXJldHVybiB0cnVlOwoJCX0KCQoJCXJldHVybiBmYWxzZTsKCX0KCQoJLyoqCgkgKiBHZW5lcmF0ZXMgYSBuZXcgcmFuZG9tIDMyIGFscGhhbnVtZXJpYyBzdHJpbmcgYW5kIGFzc29jaWF0ZXMgaXQgd2l0aCBhIHVzZXIgaWQgYW5kIG9yZGVyIGlkCgkgKiBAcGFyYW0gaW50ZWdlciAkdXNlcklkIAoJICogQHBhcmFtIGludGVnZXIgJG9yZGVySWQKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgQSByZXNwb25zZSB0aGF0IGNvbnRhaW5zIHRoZSBnZW5lcmF0ZWQga2V5IGluIHRoZSBtZXNzYWdlIG9uIHN1Y2Nlc3MsIGFuZCBhbiBlcnJvciByZXNwb25zZSBvbiBlcnJvcgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdlbmVyYXRlS2V5KCR1c2VySWQsICRvcmRlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsgCgkJCgkJaWYgKGVtcHR5KCR1c2VySWQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVXNlciBJRCBtdXN0IGJlIHNldCB3aGVuIGdlbmVyYXRpbmcgYSB0cmFuc2FjdGlvbiBrZXkiLCBNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJLy9jcmVhdGUgYSByYW5kb20gMzItY2hhciBzdHJpbmcgYW5kIG1ha2Ugc3VyZSBpdHMgdW5pcXVlCgkJZG8gCgkJewoJCQkkbmV3S2V5ID0gc2VsZjo6Y3JlYXRlUmFuZG9tSWRlbnRpZmllcigpOwoJCQkkcmVzdWx0cyA9ICR3cGRiLT5nZXRfcmVzdWx0cygkd3BkYi0+cHJlcGFyZSgic2VsZWN0ICogZnJvbSAiLk1NX1RBQkxFX1RSQU5TQUNUSU9OX0tFWS4iIHdoZXJlIHRyYW5zYWN0aW9uX2tleT0nJXMnIiwkbmV3S2V5KSk7CgkJfSAKCQl3aGlsZSAoY291bnQoJHJlc3VsdHMpID4gMCk7IC8vaXRlcmF0ZSB3aGlsZSBrZXkgaXMgbm90IHVuaXF1ZS4KCQkKCQkvL3Nob3VsZCBiZSBzYWZlCgkJJHJlc3VsdHMgPSAkd3BkYi0+cXVlcnkoJHdwZGItPnByZXBhcmUoImluc2VydCBpbnRvICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fS0VZLiIgc2V0IHRyYW5zYWN0aW9uX2tleT0nJXMnLCB1c2VyX2lkPSclZCcsIG9yZGVyX2lkPSclZCcsIGFnZT1ub3coKSIsJG5ld0tleSwkdXNlcklkLCRvcmRlcklkKSk7CgkJaWYoJHJlc3VsdHMgPT09IGZhbHNlKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiRXJyb3IgY3JlYXRpbmcgdHJhbnNhY3Rpb24ga2V5IixNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJZWxzZSAKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJG5ld0tleSxNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwkKCQl9Cgl9CgkKCQoJLyoqCgkgKiBHZW5lcmF0ZXMgYSBuZXcgcmFuZG9tIDMyIGFscGhhbnVtZXJpYyBzdHJpbmcKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjcmVhdGVSYW5kb21JZGVudGlmaWVyKCRrZXlMZW5ndGg9MzIpCgl7CgkJLy9nZW5lcmF0ZSB0aGUga2V5CgkJJG5ld0tleSA9ICIiOwoJCWZvciAoJGk9MDsgJGk8JGtleUxlbmd0aDsgJGkrKykgLy9jcmVhdGUgcmFuZG9tIDMyIGNoYXIgc3RyaW5nCgkJewoJCQkkdHlwZSA9IHJhbmQoMSwzKTsKCQkJc3dpdGNoICgkdHlwZSkgewoJCQkJY2FzZSAxOiAvL251bWVyaWMKCQkJCQkkbmV3S2V5Lj1jaHIocmFuZCg0OCw1NykpOwoJCQkJCWJyZWFrOwoJCQkJY2FzZSAyOiAvL3VwcGVyIGFscGhhCgkJCQkJJG5ld0tleS49Y2hyKHJhbmQoNjUsOTApKTsKCQkJCQlicmVhazsKCQkJCWNhc2UgMzogLy9sb3dlciBhbHBoYQoJCQkJZGVmYXVsdDoKCQkJCQkkbmV3S2V5Lj1jaHIocmFuZCg5NywxMjIpKTsKCQkJCQlicmVhazsKCQkJfQoJCX0KCQlyZXR1cm4gJG5ld0tleTsKCX0KCQoJLyoqCgkgKiBMb29rdXAgYSB0cmFuc2FjdGlvbiBieSBrZXkuIElmIGZvdW5kcyBzdG9yZXMgdGhlIG9yZGVyIGlkIGFuZCB1c2VyIGlkIGluIHRoZSBzZXNzaW9uCgkgKiBAcGFyYW0gU3RyaW5nICR0cmFuc2FjdGlvbktleSAKCSAqIEByZXR1cm4gTU1fVHJhbnNhY3Rpb25LZXkgVGhlIHRyYW5zYWN0aW9uIGtleSBvYmplY3Qgd2l0aCB1c2VyIGlkIGFuZCBvcmRlciBpZCBpbmZvIHBvcHVsYXRlZCBvbiBzdWNjZXNzLCBhbiBpbnZhbGlkIG9iamVjdCBvbiBmYWlsdXJlCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0VHJhbnNhY3Rpb25CeUtleSgkdHJhbnNhY3Rpb25LZXkpCgl7CgkJTU1fVHJhbnNhY3Rpb25LZXk6OmRlbGV0ZUFnZWQoKTsKCQkka2V5ID0gbmV3IE1NX1RyYW5zYWN0aW9uS2V5KCk7CgkJJGtleS0+c2V0VHJhbnNhY3Rpb25LZXkoJHRyYW5zYWN0aW9uS2V5KTsKCQkka2V5LT5nZXREYXRhKCk7CgkJaWYgKCRrZXktPmlzVmFsaWQoKSkKCQl7CgkJCU1NX1Nlc3Npb246OnZhbHVlKE1NX1Nlc3Npb246OiRLRVlfTEFTVF9PUkRFUl9JRCwka2V5LT5nZXRPcmRlcklkKCkpOwoJCQlNTV9TZXNzaW9uOjp2YWx1ZShNTV9TZXNzaW9uOjokS0VZX0xBU1RfVVNFUl9JRCwka2V5LT5nZXRVc2VySWQoKSk7CgkJfQoJCXJldHVybiAka2V5OwoJfSAKCQoJLyoqCgkgKiBTZXQgdGhlIHRyYW5zYWN0aW9uIGtleQoJICogQHBhcmFtIHN0cmluZyAkdHJhbnNhY3Rpb25LZXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHNldFRyYW5zYWN0aW9uS2V5KCR0cmFuc2FjdGlvbktleSkKCXsKCQkkdGhpcy0+dHJhbnNhY3Rpb25LZXkgPSAkdHJhbnNhY3Rpb25LZXk7Cgl9CgkKCS8qKgoJICogCgkgKiBSZXRyaWV2ZSB0aGUgdHJhbnNhY3Rpb24ga2V5CgkgKiBAcmV0dXJuIHN0cmluZyB0aGUgdHJhbnNhY3Rpb24ga2V5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBnZXRUcmFuc2FjdGlvbktleSgpCgl7CgkJcmV0dXJuICR0aGlzLT50cmFuc2FjdGlvbktleTsKCX0KCQoJLyoqCgkgKiBTZXQgdGhlIG9yZGVyIGlkCgkgKiBAcGFyYW0gc3RyaW5nICRvcmRlciBpZAoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0T3JkZXJJZCgkb3JkZXJJZCkKCXsKCQkkdGhpcy0+b3JkZXJJZCA9ICRvcmRlcklkOwoJfQoJCgkvKioKCSAqCgkgKiBSZXRyaWV2ZSB0aGUgb3JkZXIgaWQKCSAqIEByZXR1cm4gc3RyaW5nIHRoZSBvcmRlciBpZAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0T3JkZXJJZCgpCgl7CgkJcmV0dXJuICR0aGlzLT5vcmRlcklkOwoJfQoJCgkvKioKCSAqIFNldCB0aGUgdXNlciBpZAoJICogQHBhcmFtIHN0cmluZyAkdXNlciBpZAoJICovCglwdWJsaWMgZnVuY3Rpb24gc2V0VXNlcklkKCR1c2VySWQpCgl7CgkJJHRoaXMtPnVzZXJJZCA9ICR1c2VySWQ7Cgl9CgkKCS8qKgoJICoKCSAqIFJldHJpZXZlIHRoZSB1c2VyIGlkCgkgKiBAcmV0dXJuIHN0cmluZyB0aGUgdXNlciBpZAoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0VXNlcklkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnVzZXJJZDsKCX0KCQoJCn0K', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(250, 'defaultemailserviceprovider', 'Y2xhc3MgTU1fRGVmYXVsdEVtYWlsU2VydmljZVByb3ZpZGVyIGV4dGVuZHMgTU1fQWJzdHJhY3RFbWFpbFNlcnZpY2VQcm92aWRlciB7CgkJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRwcm92aWRlcl9pbmZvKSB7CgkJCXBhcmVudDo6X19jb25zdHJ1Y3QoJHByb3ZpZGVyX2luZm8pOwoJCX0KCQkKCQkvKioKCQkgKiBSZXR1cm5zIGFuIGVtcHR5IGFycmF5LCBzaW5jZSBubyBsaXN0cyBjYW4gYmUgY29uZmlndXJlZCB1c2luZyB0aGUgZGVmYXVsdCBwcm92aWRlcgoJCSAqLwoJCXB1YmxpYyBmdW5jdGlvbiBnZXRMaXN0cygpIHsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZShhcnJheSgpKTsKCQl9CgkJCgkJLyoqCgkJICogUmV0dXJucyBhbiBvYmplY3QgY2FwYWJsZSBvZiByZW5kZXJpbmcgdGhlIGRlZmF1bHQgb3B0aW9ucyBkaWFsb2cKCQkgKiBAcGFyYW0gQXJyYXkgJHBvc3QgQW55IGRhdGEgcG9zdGVkIG5lY2Vzc2FyeSB0byBkcmF3IHRoZSBvcHRpb25zIGRpYWxvZwoJCSAqIEByZXR1cm4gT2JqZWN0IG9mIHR5cGUgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXJEaWFsb2cgcmVwcmVzZW50aW5nIHRoZSBkaWFsb2cgdG8gZHJhdwoJCSAqLwoJCXB1YmxpYyBmdW5jdGlvbiByZW5kZXJPcHRpb25zRGlhbG9nKCRwb3N0KSB7CgkJCSRmb3JtID0gbmV3IE1NX0VtYWlsU2VydmljZVByb3ZpZGVyRGlhbG9nKCk7CgkJCSRmb3JtLT5jb250cm9scyA9ICc8YnV0dG9uIGlkPSJlbWFpbC1zZXJ2aWNlLXByb3ZpZGVyLXNhdmUiIGNsYXNzPSJtbS11aS1idXR0b24gYmx1ZSIgb25DbGljaz0ibW1qcy5wcm92aWRlck9wdGlvbnNTYXZlKFwnXCcpOyByZXR1cm4gZmFsc2U7IiBzdHlsZT0iY3Vyc29yOnBvaW50ZXI7Ij5TYXZlIFNldHRpbmdzPC9idXR0b24+JzsKCQkJcmV0dXJuICRmb3JtOwoJCX0KCQkKCQkvKioKCQkgKiBSZXNwb25kcyB0byBkYXRhIGNvbGxlY3RlZCBmcm9tIHRoZSBmb3JtIHJlbmRlcmVkIGJ5IHJlbmRlck9wdGlvbnNEaWFsb2cKCQkgKiBAc2VlIE1NX0Fic3RyYWN0RW1haWxTZXJ2aWNlUHJvdmlkZXI6OmhhbmRsZU9wdGlvbnNEaWFsb2coKQoJCSAqIEBwYXJhbSAkb3B0aW9uRGF0YSBBcnJheSBjb250YWluaW5nIHRoZSBwb3N0ZWQgdmFsdWVzCgkJICogQHJldHVybiBNTV9SZXNwb25zZSBvYmplY3QgaW5kaWNhdGluZyBzdWNjZXNzIG9yIGZhaWx1cmUKCQkgKi8KCQlwdWJsaWMgZnVuY3Rpb24gaGFuZGxlT3B0aW9uc0RpYWxvZygkb3B0aW9uRGF0YSkgCgkJewoJCQlpZiAoaXNfYXJyYXkoJG9wdGlvbkRhdGEpKSAKCQkJewoJCQkJJHByb3ZpZGVyX3Rva2VuID0gJG9wdGlvbkRhdGFbJ3Byb3ZpZGVyX3Rva2VuJ107CgkJCQkKCQkJCSRwcm92aWRlcl9lbnRpdHkgPSBuZXcgTU1fRW1haWxTZXJ2aWNlUHJvdmlkZXIoKTsKCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldFRva2VuKCRwcm92aWRlcl90b2tlbik7CgkJCQkkcHJvdmlkZXJfZW50aXR5LT5nZXREYXRhKCk7CgkJCQlpZiAoJHByb3ZpZGVyX2VudGl0eS0+aXNWYWxpZCgpKSAKCQkJCXsKCQkJCQkvL2ZpcnN0IHdyaXRlIHRoZSBwcm92aWRlcidzIGNvbmZpZ3VyYXRpb24gb3B0aW9ucwoJCQkJCSRwcm92aWRlcl9lbnRpdHktPnNldEFjdGl2ZSh0cnVlKTsKCQkJCQkkY29tbWl0X3Jlc3BvbnNlID0gJHByb3ZpZGVyX2VudGl0eS0+Y29tbWl0RGF0YSgpOwoJCQkJCWlmICgkY29tbWl0X3Jlc3BvbnNlLT50eXBlID09IE1NX1Jlc3BvbnNlOjokRVJST1IpIAoJCQkJCXsKCQkJCQkJLy9wYXNzIHRocm91Z2ggZXJyb3JzIGNvbW1pdHRpbmcgdG8gdGhlIGRhdGFiYXNlCgkJCQkJCXJldHVybiAkY29tbWl0X3Jlc3BvbnNlOwoJCQkJCX0KCQkJCQllbHNlIHsKCQkJCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgiVGhlIERlZmF1bHQgTWFpbCBTZXJ2aWNlIFByb3ZpZGVyIGhhcyBiZWVuIGNvbmZpZ3VyZWQgc3VjY2Vzc2Z1bGx5IixNTV9SZXNwb25zZTo6JFNVQ0NFU1MpOwkKCQkJCQl9CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCS8vZmFpbGVkIHRvIGxvYWQgZW50aXR5IGZyb20gdGFibGUKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJGYWlsZWQgdG8gc2F2ZSBzZXR0aW5ncyIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQl9CgkJCgl9Cg==', 0, '2018-11-21 06:38:55'),
(251, 'aweberapi', 'LyoqCiAqIE1NX0FXZWJlckFQSQogKgogKiBDcmVhdGVzIGEgY29ubmVjdGlvbiB0byB0aGUgTU1fQVdlYmVyQVBJIGZvciBhIGdpdmVuIGNvbnN1bWVyIGFwcGxpY2F0aW9uLgogKiBUaGlzIGlzIGdlbmVyYWxseSB0aGUgc3RhcnRpbmcgcG9pbnQgZm9yIHRoaXMgbGlicmFyeS4gIEluc3RhbmNlcyBjYW4gYmUKICogY3JlYXRlZCBkaXJlY3RseSB3aXRoIGNvbnN1bWVyS2V5IGFuZCBjb25zdW1lclNlY3JldC4KICogQHVzZXMgTU1fQVdlYmVyQVBJQmFzZQogKiBAcGFja2FnZQogKiBAdmVyc2lvbiAkaWQkCiAqLwpjbGFzcyBNTV9BV2ViZXJBUEkgZXh0ZW5kcyBNTV9BV2ViZXJBUElCYXNlIHsKCgkvKioKCSAqIEB2YXIgU3RyaW5nIENvbnN1bWVyIEtleQoJICovCglwdWJsaWMgJGNvbnN1bWVyS2V5ICAgID0gZmFsc2U7CgoJLyoqCgkgKiBAdmFyIFN0cmluZyBDb25zdW1lciBTZWNyZXQKCSAqLwoJcHVibGljICRjb25zdW1lclNlY3JldCA9IGZhbHNlOwoKCS8qKgoJICogQHZhciBPYmplY3QgLSBQb3B1bGF0ZWQgaW4gc2V0QWRhcHRlcigpCgkgKi8KCXB1YmxpYyAkYWRhcHRlciA9IGZhbHNlOwoKCS8qKgoJICogVXNlcyB0aGUgYXBwJ3MgYXV0aG9yaXphdGlvbiBjb2RlIHRvIGZldGNoIGFuIGFjY2VzcyB0b2tlbgoJICoKCSAqIEBwYXJhbSBTdHJpbmcgQXV0aG9yaXphdGlvbiBjb2RlIGZyb20gYXV0aG9yaXplIGFwcCBwYWdlCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0RGF0YUZyb21Bd2ViZXJJRCgkc3RyaW5nKSB7CgkJbGlzdCgkY29uc3VtZXJLZXksICRjb25zdW1lclNlY3JldCwgJHJlcXVlc3RUb2tlbiwgJHRva2VuU2VjcmV0LCAkdmVyaWZpZXIpID0gTU1fQVdlYmVyQVBJOjpfcGFyc2VBd2ViZXJJRCgkc3RyaW5nKTsKCgkJaWYgKCEkdmVyaWZpZXIpIHsKCQkJcmV0dXJuIG51bGw7CgkJfQoJCSRhd2ViZXIgPSBuZXcgTU1fQXdlYmVyQVBJKCRjb25zdW1lcktleSwgJGNvbnN1bWVyU2VjcmV0KTsKCQkkYXdlYmVyLT5hZGFwdGVyLT51c2VyLT5yZXF1ZXN0VG9rZW4gPSAkcmVxdWVzdFRva2VuOwoJCSRhd2ViZXItPmFkYXB0ZXItPnVzZXItPnRva2VuU2VjcmV0ID0gJHRva2VuU2VjcmV0OwoJCSRhd2ViZXItPmFkYXB0ZXItPnVzZXItPnZlcmlmaWVyID0gJHZlcmlmaWVyOwoJCWxpc3QoJGFjY2Vzc1Rva2VuLCAkYWNjZXNzU2VjcmV0KSA9ICRhd2ViZXItPmdldEFjY2Vzc1Rva2VuKCk7CgkJcmV0dXJuIGFycmF5KCRjb25zdW1lcktleSwgJGNvbnN1bWVyU2VjcmV0LCAkYWNjZXNzVG9rZW4sICRhY2Nlc3NTZWNyZXQpOwoJfQoKCXByb3RlY3RlZCBzdGF0aWMgZnVuY3Rpb24gX3BhcnNlQVdlYmVySUQoJHN0cmluZykgewoJCSR2YWx1ZXMgPSBleHBsb2RlKCd8JywgJHN0cmluZyk7CgkJaWYgKGNvdW50KCR2YWx1ZXMpIDwgNSkgewoJCQlyZXR1cm4gbnVsbDsKCQl9CgkJcmV0dXJuIGFycmF5X3NsaWNlKCR2YWx1ZXMsIDAsIDUpOwoJfQoKCS8qKgoJICogU2V0cyB0aGUgY29uc3VtZXIga2V5IGFuZCBzZWNyZXQgZm9yIHRoZSBBUEkgb2JqZWN0LiAgVGhlCgkgKiBrZXkgYW5kIHNlY3JldCBhcmUgbGlzdGVkIGluIHRoZSBNeSBBcHBzIHBhZ2UgaW4gdGhlIGxhYnMuYXdlYmVyLmNvbQoJICogQ29udHJvbCBQYW5lbCBPUiwgaW4gdGhlIGNhc2Ugb2YgZGlzdHJpYnV0ZWQgYXBwcywgd2lsbCBiZSByZXR1cm5lZAoJICogZnJvbSB0aGUgZ2V0RGF0YUZyb21Bd2ViZXJJRCgpIGZ1bmN0aW9uCgkgKgoJICogQHBhcmFtIFN0cmluZyBDb25zdW1lciBLZXkKCSAqIEBwYXJhbSBTdHJpbmcgQ29uc3VtZXIgU2VjcmV0CgkgKiBAcmV0dXJuIG51bGwKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRrZXksICRzZWNyZXQpIHsKCQkvLyBMb2FkIGtleSAvIHNlY3JldAoJCSR0aGlzLT5jb25zdW1lcktleSAgICA9ICRrZXk7CgkJJHRoaXMtPmNvbnN1bWVyU2VjcmV0ID0gJHNlY3JldDsKCgkJJHRoaXMtPnNldEFkYXB0ZXIoKTsKCX0KCgkvKioKCSAqIFJldHVybnMgdGhlIGF1dGhvcml6ZSBVUkwgYnkgYXBwZW5kaW5nIHRoZSByZXF1ZXN0CgkgKiB0b2tlbiB0byB0aGUgZW5kIG9mIHRoZSBBdXRob3JpemUgVVJJLCBpZiBpdCBleGlzdHMKCSAqCgkgKiBAcmV0dXJuIHN0cmluZyBUaGUgQXV0aG9yaXphdGlvbiBVUkwKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEF1dGhvcml6ZVVybCgpIHsKCQkkcmVxdWVzdFRva2VuID0gJHRoaXMtPnVzZXItPnJlcXVlc3RUb2tlbjsKCQlyZXR1cm4gKGVtcHR5KCRyZXF1ZXN0VG9rZW4pKSA/CgkJJHRoaXMtPmFkYXB0ZXItPmFwcC0+Z2V0QXV0aG9yaXplVXJsKCkKCQk6CgkJJHRoaXMtPmFkYXB0ZXItPmFwcC0+Z2V0QXV0aG9yaXplVXJsKCkgLiAiP29hdXRoX3Rva2VuPXskdGhpcy0+dXNlci0+cmVxdWVzdFRva2VufSI7Cgl9CgoJLyoqCgkgKiBTZXRzIHRoZSBhZGFwdGVyIGZvciB1c2Ugd2l0aCB0aGUgQVBJCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBzZXRBZGFwdGVyKCRhZGFwdGVyPW51bGwpIHsKCQlpZiAoZW1wdHkoJGFkYXB0ZXIpKSB7CgkJCSRzZXJ2aWNlUHJvdmlkZXIgPSBuZXcgTU1fQVdlYmVyU2VydmljZVByb3ZpZGVyKCk7CgkJCSRhZGFwdGVyID0gbmV3IE1NX09BdXRoQXBwbGljYXRpb24oJHNlcnZpY2VQcm92aWRlcik7CgkJCSRhZGFwdGVyLT5jb25zdW1lcktleSA9ICR0aGlzLT5jb25zdW1lcktleTsKCQkJJGFkYXB0ZXItPmNvbnN1bWVyU2VjcmV0ID0gJHRoaXMtPmNvbnN1bWVyU2VjcmV0OwoJCX0KCQkkdGhpcy0+YWRhcHRlciA9ICRhZGFwdGVyOwoJfQoKCS8qKgoJICogRmV0Y2hlcyBhY2NvdW50IGRhdGEgZm9yIHRoZSBhc3NvY2lhdGVkIGFjY291bnQKCSAqCgkgKiBAcGFyYW0gU3RyaW5nIEFjY2VzcyBUb2tlbiAoT25seSBvcHRpb25hbC9jYWNoZWQgaWYgeW91IGNhbGxlZCBnZXRBY2Nlc3NUb2tlbigpIGVhcmxpZXIKCSAqICAgICAgb24gdGhlIHNhbWUgcGFnZSkKCSAqIEBwYXJhbSBTdHJpbmcgQWNjZXNzIFRva2VuIFNlY3JldCAoT25seSBvcHRpb25hbC9jYWNoZWQgaWYgeW91IGNhbGxlZCBnZXRBY2Nlc3NUb2tlbigpIGVhcmxpZXIKCSAqICAgICAgb24gdGhlIHNhbWUgcGFnZSkKCSAqIEByZXR1cm4gT2JqZWN0IE1NX0FXZWJlckNvbGxlY3Rpb24gT2JqZWN0IHdpdGggdGhlIHJlcXVlc3RlZAoJICogICAgIGFjY291bnQgZGF0YQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0QWNjb3VudCgkdG9rZW49ZmFsc2UsICRzZWNyZXQ9ZmFsc2UpIHsKCQlpZiAoJHRva2VuICYmICRzZWNyZXQpIHsKCQkJJHVzZXIgPSBuZXcgTU1fT0F1dGhVc2VyKCk7CgkJCSR1c2VyLT5hY2Nlc3NUb2tlbiA9ICR0b2tlbjsKCQkJJHVzZXItPnRva2VuU2VjcmV0ID0gJHNlY3JldDsKCQkJJHRoaXMtPmFkYXB0ZXItPnVzZXIgPSAkdXNlcjsKCQl9CgoJCSRib2R5ID0gJHRoaXMtPmFkYXB0ZXItPnJlcXVlc3QoJ0dFVCcsICcvYWNjb3VudHMnKTsKCQkkYWNjb3VudHMgPSAkdGhpcy0+cmVhZFJlc3BvbnNlKCRib2R5LCAnL2FjY291bnRzJyk7CgkJcmV0dXJuICRhY2NvdW50c1swXTsKCX0KCgkvKioKCSAqIFBIUCBBdXRvbWFnaWMKCSAqLwoJcHVibGljIGZ1bmN0aW9uIF9fZ2V0KCRpdGVtKSB7CgkJaWYgKCRpdGVtID09ICd1c2VyJykgcmV0dXJuICR0aGlzLT5hZGFwdGVyLT51c2VyOwoJCXRyaWdnZXJfZXJyb3IoIkNvdWxkIG5vdCBmaW5kIFwieyRpdGVtfVwiIik7Cgl9CgoJLyoqCgkgKiBSZXF1ZXN0IGEgcmVxdWVzdCB0b2tlbiBmcm9tIEFXZWJlciBhbmQgYXNzb2NpYXRlIHRoZQoJICogcHJvdmlkZWQgJGNhbGxiYWNrVXJsIHdpdGggdGhlIG5ldyB0b2tlbgoJICogQHBhcmFtIFN0cmluZyBUaGUgVVJMIHdoZXJlIHVzZXJzIHNob3VsZCBiZSByZWRpcmVjdGVkCgkgKiAgICAgb25jZSB0aGV5IGF1dGhvcml6ZSB5b3VyIGFwcAoJICogQHJldHVybiBBcnJheSBDb250YWlucyB0aGUgcmVxdWVzdCB0b2tlbiBhcyB0aGUgZmlyc3QgaXRlbQoJICogICAgIGFuZCB0aGUgcmVxdWVzdCB0b2tlbiBzZWNyZXQgYXMgdGhlIHNlY29uZCBpdGVtIG9mIHRoZSBhcnJheQoJICovCglwdWJsaWMgZnVuY3Rpb24gZ2V0UmVxdWVzdFRva2VuKCRjYWxsYmFja1VybCkgewoJCSRyZXF1ZXN0VG9rZW4gPSAkdGhpcy0+YWRhcHRlci0+Z2V0UmVxdWVzdFRva2VuKCRjYWxsYmFja1VybCk7CgkJcmV0dXJuIGFycmF5KCRyZXF1ZXN0VG9rZW4sICR0aGlzLT51c2VyLT50b2tlblNlY3JldCk7Cgl9CgoJLyoqCgkgKiBSZXF1ZXN0IGFuIGFjY2VzcyB0b2tlbiB1c2luZyB0aGUgcmVxdWVzdCB0b2tlbnMgc3RvcmVkIGluIHRoZQoJICogY3VycmVudCB1c2VyIG9iamVjdC4gIFlvdSB3b3VsZCB3YW50IHRvIGZpcnN0IHNldCB0aGUgcmVxdWVzdCB0b2tlbnMKCSAqIG9uIHRoZSB1c2VyIGJlZm9yZSBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gdmlhOgoJICoKCSAqICAgICRhd2ViZXItPnVzZXItPnRva2VuU2VjcmV0ICA9ICRfQ09PS0lFWydyZXF1ZXN0VG9rZW5TZWNyZXQnXTsKCSAqICAgICRhd2ViZXItPnVzZXItPnJlcXVlc3RUb2tlbiA9ICRfR0VUWydvYXV0aF90b2tlbiddOwoJICogICAgJGF3ZWJlci0+dXNlci0+dmVyaWZpZXIgICAgID0gJF9HRVRbJ29hdXRoX3ZlcmlmaWVyJ107CgkgKgoJICogQHJldHVybiBBcnJheSBDb250YWlucyB0aGUgYWNjZXNzIHRva2VuIGFzIHRoZSBmaXJzdCBpdGVtCgkgKiAgICAgYW5kIHRoZSBhY2Nlc3MgdG9rZW4gc2VjcmV0IGFzIHRoZSBzZWNvbmQgaXRlbSBvZiB0aGUgYXJyYXkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGdldEFjY2Vzc1Rva2VuKCkgewoJCXJldHVybiAkdGhpcy0+YWRhcHRlci0+Z2V0QWNjZXNzVG9rZW4oKTsKCX0KfQo=', 0, '2018-11-21 06:38:55'),
(252, 'socialloginview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX1NvY2lhbExvZ2luVmlldyBleHRlbmRzIE1NX1ZpZXcKewkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgpCgl7CgkJcGFyZW50OjpfX2NvbnN0cnVjdCgpOwoJfQoJCiAJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CiAJCiAJcHVibGljIGZ1bmN0aW9uIGdldFZpZXdEYXRhKCR1c2VySWQsTU1fRGF0YUdyaWQgJGRnPW51bGwpCgl7CgkJJHJlc3VsdHMgPSBNTV9BYnN0cmFjdFNvY2lhbExvZ2luRXh0ZW5zaW9uOjpnZXRMaW5rZWRTb2NpYWxNZWRpYUFjY291bnRzRm9yVXNlcigkdXNlcklkKTsKCQlyZXR1cm4gJHJlc3VsdHM7Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZW5lcmF0ZVJvd3MoJGRhdGEsICRyZW5kZXJGb3JBZG1pbj10cnVlKQoJewoJCS8vY29sdW1ucyBhcmU6IE5ldHdvcmsgKHByb3ZpZGVyKSwgQWNjb3VudCBOYW1lLCBhbmQgQWN0aW9uCgkJJG15YWNjb3VudFVybCA9IE1NX0NvcmVQYWdlRW5naW5lOjpnZXRVcmwoTU1fQ29yZVBhZ2VUeXBlOjokTVlfQUNDT1VOVCwgbnVsbCk7CgkJJHJvd3MgPSBhcnJheSgpOwoJCQoJCWZvcmVhY2goJGRhdGEgYXMgJGxpbmtlZEFjY291bnQpCgkJewoJCQkkcHJvdmlkZXIgPSBNTV9FeHRlbnNpb25zRmFjdG9yeTo6Z2V0RXh0ZW5zaW9uKCRsaW5rZWRBY2NvdW50LT50b2tlbik7CgkJCSRwcm92aWRlck5hbWUgPSAoIWlzX251bGwoJHByb3ZpZGVyKSk/JHByb3ZpZGVyLT5nZXRQcm92aWRlck5hbWUoKTokbGlua2VkQWNjb3VudC0+bmFtZTsKCQkJCgkJCXN3aXRjaChzdHJ0b2xvd2VyKCRsaW5rZWRBY2NvdW50LT50b2tlbikpCgkJCXsKCQkJCWNhc2Ugc3RydG9sb3dlcihNTV9FeHRlbnNpb246OiRMSU5LRURJTl9MT0dJTl9UT0tFTik6CgkJCQkJJHByb3ZpZGVySW1hZ2UgPSBNTV9VdGlsczo6Z2V0SWNvbignbGlua2VkaW4tc3F1YXJlJywgJ2JsdWUnLCAnMS41ZW0nLCAnMnB4Jyk7CgkJCQkJYnJlYWs7CgkJCQkJCgkJCQljYXNlIHN0cnRvbG93ZXIoTU1fRXh0ZW5zaW9uOjokRkFDRUJPT0tfTE9HSU5fVE9LRU4pOgoJCQkJCSRwcm92aWRlckltYWdlID0gTU1fVXRpbHM6OmdldEljb24oJ2ZhY2Vib29rLXNxdWFyZScsICdibHVlJywgJzEuNWVtJywgJzJweCcpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBzdHJ0b2xvd2VyKE1NX0V4dGVuc2lvbjo6JEdPT0dMRV9MT0dJTl9UT0tFTik6CgkJCQkJJHByb3ZpZGVySW1hZ2UgPSBNTV9VdGlsczo6Z2V0SWNvbignZ29vZ2xlJywgJ2JsYWNrJywgJzEuNWVtJywgJzNweCcpOwoJCQkJCWJyZWFrOwoJCQkJCQoJCQkJY2FzZSBzdHJ0b2xvd2VyKE1NX0V4dGVuc2lvbjo6JFRXSVRURVJfTE9HSU5fVE9LRU4pOgoJCQkJCSRwcm92aWRlckltYWdlID0gTU1fVXRpbHM6OmdldEljb24oJ3R3aXR0ZXInLCAnbGlnaHQtYmx1ZScsICcxLjVlbScsICcycHgnKTsKCQkJCQlicmVhazsKCQkJfQoJCQkKCQkJJGNybnRSb3cgPSBhcnJheQoJCQkoCgkJCQlhcnJheSggJ2NvbnRlbnQnID0+ICJ7JHByb3ZpZGVySW1hZ2V9IHskcHJvdmlkZXJOYW1lfSIpLAoJCQkJYXJyYXkoICdjb250ZW50JyA9PiAkbGlua2VkQWNjb3VudC0+dW5pcXVlX2lkKQoJCQkpOwoJCQkKCQkJaWYoISRyZW5kZXJGb3JBZG1pbikKCQkJewoJCQkJJGFjdGlvbnMgPSAiIjsKCQkJCWlmICgkbGlua2VkQWNjb3VudC0+cmVtb3ZhYmxlID09IDEpCgkJCQl7CgkJCQkJJGFjdGlvbnMgLj0gIjxhIGhyZWY9XCJqYXZhc2NyaXB0Om15YWNjb3VudF9qcy51bmxpbmtTb2NpYWxOZXR3b3JrKCd7JGxpbmtlZEFjY291bnQtPmlkfScsJ3skbGlua2VkQWNjb3VudC0+dXNlcl9pZH0nKTtcIj5EZWxldGU8L2E+ICI7CgkJCQl9CgkJCQllbHNlIAoJCQkJewoJCQkJCSRhY3Rpb25zIC49ICI8YSBocmVmPVwiamF2YXNjcmlwdDpteWFjY291bnRfanMuY2hhbmdlTGlua2VkU29jaWFsTmV0d29yaygneyRsaW5rZWRBY2NvdW50LT5pZH0nLCd7JG15YWNjb3VudFVybH0nKTtcIj5DaGFuZ2U8L2E+ICI7CgkJCQl9CgkJCQkkY3JudFJvd1tdID0gYXJyYXkoICdjb250ZW50JyA9PiAkYWN0aW9ucywgImF0dHIiID0+ICJub3dyYXAiKTsKCQkJfQoJCQkKCQkJJHJvd3NbXSA9ICRjcm50Um93OwoJCX0KCQkKCQlyZXR1cm4gJHJvd3M7Cgl9Cn0K', 0, '2018-11-21 06:38:55'),
(253, 'ordernumbergeneratorfactory', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBUaGUgT3JkZXJOdW1iZXJHZW5lcmF0b3IgRmFjdG9yeSByZXRyaWV2ZXMgYW4gb3JkZXIgbnVtYmVyIGdlbmVyYXRvciBiYXNlZCBvbiBhIHRva2VuCiAqLwogCmNsYXNzIE1NX09yZGVyTnVtYmVyR2VuZXJhdG9yRmFjdG9yeSAKewoJCgkvKioKCSAqIFJldHVybnMgYSBzcGVjaWZpYyBvcmRlciBudW1iZXIgZ2VuZXJhdG9yCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHRva2VuIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgb3JkZXIgbnVtYmVyIGdlbmVyYXRvciB0byByZXRyaWV2ZQoJICogQHJldHVybiBNTV9PcmRlck51bWJlckdlbmVyYXRvciBBbiBpbnN0YW5jZSBvZiB0eXBlIE1NX09yZGVyTnVtYmVyR2VuZXJhdG9yIChvciBzdWJjbGFzcykKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRPcmRlck51bWJlckdlbmVyYXRvcigkdG9rZW4pCgl7CgkJc3dpdGNoICgkdG9rZW4pIAoJCXsKCQkJZGVmYXVsdDoKCQkJCS8vb25seSBvbmUgb3JkZXIgbnVtYmVyIGdlbmVyYXRvciB0byBzdGFydCwgcmV0dXJuIHRoZSBkZWZhdWwKCQkJCXJldHVybiBuZXcgTU1fRGVmYXVsdE9yZGVyTnVtYmVyR2VuZXJhdG9yKCk7CgkJCQlicmVhazsKCQl9Cgl9CQp9Cg==', 0, '2018-11-21 06:38:55'),
(254, 'paymentservicefactory', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiAKICogVGhlIFBheW1lbnRTZXJ2aWNlIEZhY3RvcnkgcmV0cmlldmVzIGEgcmVxdWVzdGVkIHBheW1lbnQgc2VydmljZSBiYXNlZCBvbiBhIHRva2VuLCBvciBhbGwgYXZhaWxhYmxlIHBheW1lbnQgc2VydmljZXMKICovCiAKY2xhc3MgTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5IAp7CgkvL3VzZWQgdG8gaG9sZCBpbnN0YW5jZXMgb2YgcGF5bWVudCBzZXJ2aWNlcyB0aGF0IGNhbiBiZSByZXVzZWQKCXByb3RlY3RlZCBzdGF0aWMgJGluc3RhbmNlcyA9IGFycmF5KCk7CgkKCXB1YmxpYyBzdGF0aWMgJEFWQUlMQUJMRV9TRVJWSUNFU19DQUNIRV9LRVkgPSAibW0tYXZhaWxhYmxlLXBheW1lbnQtc2VydmljZXMiOwoJCgkvKioKCSAqIFJldHJpZXZlIGFsbCBvZiB0aGUgYWN0aXZlIHBheW1lbnQgc2VydmljZXMKCSAqIAoJICogQHJldHVybiBhbiBhcnJheSBjb250YWluaW5nIGFsbCB0aGUgYWN0aXZlIHBheW1lbnQgc2VydmljZSBvYmplY3RzLCBrZXllZCBieSB0aGUgdG9rZW4KCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRBdmFpbGFibGVQYXltZW50U2VydmljZXMoKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkY2FjaGVkID0gZmFsc2U7CgkJJHBheW1lbnRTZXJ2aWNlc0FycmF5ID0gTU1fT2JqZWN0Q2FjaGU6OmdldChzZWxmOjokQVZBSUxBQkxFX1NFUlZJQ0VTX0NBQ0hFX0tFWSwkY2FjaGVkKTsKCQlpZiAoISRjYWNoZWQgfHwgIWlzX2FycmF5KCRwYXltZW50U2VydmljZXNBcnJheSkpCgkJewoJCQkkcGF5bWVudFNlcnZpY2VzQXJyYXkgPSBhcnJheSgpOwoJCQkkc3FsID0gIlNFTEVDVCAqIEZST00gIi5NTV9UQUJMRV9QQVlNRU5UX1NFUlZJQ0VTLiIgd2hlcmUgYWN0aXZlPScxJyI7CgkJCSRyZXN1bHRzID0gJHdwZGItPmdldF9yZXN1bHRzKCRzcWwpOwoJCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkcm93KQoJCQl7CgkJCQkkcGF5bWVudFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldFBheW1lbnRTZXJ2aWNlKCRyb3ctPnRva2VuLHRydWUsJHJvdyk7CgkJCQlpZiAoJHBheW1lbnRTZXJ2aWNlIGluc3RhbmNlb2YgTU1fUGF5bWVudFNlcnZpY2UpCgkJCQl7CgkJCQkJJHBheW1lbnRTZXJ2aWNlc0FycmF5WyRyb3ctPnRva2VuXSA9ICRwYXltZW50U2VydmljZTsKCQkJCX0KCQkJfQoJCQlNTV9PYmplY3RDYWNoZTo6c2V0KHNlbGY6OiRBVkFJTEFCTEVfU0VSVklDRVNfQ0FDSEVfS0VZLCRwYXltZW50U2VydmljZXNBcnJheSk7CgkJfQoJCXJldHVybiAkcGF5bWVudFNlcnZpY2VzQXJyYXk7Cgl9CgkKCQoJLyoqCgkgKiBSZXRyaWV2ZSB0aGUgYWN0aXZlIG9uc2l0ZSBwYXltZW50IHNlcnZpY2UgaWYgdGhlcmUgaXMgb25lLgoJICoKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2UgQW4gaW5zdGFuY2Ugb2YgdGhlIGFjdGl2ZSBvbnNpdGUgcGF5bWVudCBzZXJ2aWNlLCBudWxsIGlmIG9uZSBjYW4ndCBiZSBmb3VuZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE9uc2l0ZVBheW1lbnRTZXJ2aWNlKCkKCXsKCQkvL2dldCBhbGwgYWN0aXZlIHBheW1lbnQgc2VydmljZXMKCQkkc2VydmljZXMgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldEF2YWlsYWJsZVBheW1lbnRTZXJ2aWNlcygpOwoJCQoJCWZvcmVhY2ggKCRzZXJ2aWNlcyBhcyAkc2VydmljZSkKCQl7CgkJCWlmICgkc2VydmljZSBpbnN0YW5jZW9mIE1NX1Rlc3RQYXltZW50U2VydmljZSkKCQkJewoJCQkJaWYgKCRzZXJ2aWNlLT5nZXRNb2RlKCkgPT0gTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokTU9ERV9BTFdBWVNfT1ZFUlJJREUpCgkJCQl7CgkJCQkJcmV0dXJuICRzZXJ2aWNlOwoJCQkJfQoJCQl9CgkJfQoJCQoJCWZvcmVhY2ggKCRzZXJ2aWNlcyBhcyAkc2VydmljZSkKCQl7CgkJCWlmICgkc2VydmljZSBpbnN0YW5jZW9mIE1NX1BheW1lbnRTZXJ2aWNlKQoJCQl7CgkJCQlpZigkc2VydmljZS0+c3VwcG9ydHNGZWF0dXJlKE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9OU0lURV9TRVJWSUNFKSAmJiAoJHNlcnZpY2UtPmdldFRva2VuKCkgIT09IE1NX1BheW1lbnRTZXJ2aWNlOjokVEVTVF9TRVJWSUNFX1RPS0VOKSkKCQkJCXsKCQkJCQlyZXR1cm4gJHNlcnZpY2U7CgkJCQl9CgkJCX0KCQl9CgkJCgkJcmV0dXJuIG51bGw7Cgl9CgkKCS8qKgoJICogUmV0cmlldmUgdGhlIGFjdGl2ZSBvZmZzaXRlIHBheW1lbnQgc2VydmljZSBpZiB0aGVyZSBpcyBvbmUuCgkgKgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZSBBbiBpbnN0YW5jZSBvZiB0aGUgYWN0aXZlIG9mZnNpdGUgcGF5bWVudCBzZXJ2aWNlLCBudWxsIGlmIG9uZSBjYW4ndCBiZSBmb3VuZAoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldE9mZnNpdGVQYXltZW50U2VydmljZSgpCgl7CgkJLy9nZXQgYWxsIGFjdGl2ZSBwYXltZW50IHNlcnZpY2VzCgkJJHNlcnZpY2VzID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRBdmFpbGFibGVQYXltZW50U2VydmljZXMoKTsKCQoJCWZvcmVhY2ggKCRzZXJ2aWNlcyBhcyAkc2VydmljZSkKCQl7CgkJCWlmICgkc2VydmljZSBpbnN0YW5jZW9mIE1NX1Rlc3RQYXltZW50U2VydmljZSkKCQkJewoJCQkJaWYgKCRzZXJ2aWNlLT5nZXRNb2RlKCkgPT0gTU1fVGVzdFBheW1lbnRTZXJ2aWNlOjokTU9ERV9BTFdBWVNfT1ZFUlJJREUpCgkJCQl7CgkJCQkJcmV0dXJuICRzZXJ2aWNlOwoJCQkJfQoJCQl9CgkJfQoJCgkJZm9yZWFjaCAoJHNlcnZpY2VzIGFzICRzZXJ2aWNlKQoJCXsKCQkJaWYgKCRzZXJ2aWNlIGluc3RhbmNlb2YgTU1fUGF5bWVudFNlcnZpY2UpCgkJCXsKCQkJCWlmKCRzZXJ2aWNlLT5zdXBwb3J0c0ZlYXR1cmUoTU1fUGF5bWVudFNlcnZpY2VGZWF0dXJlczo6T0ZGU0lURV9TRVJWSUNFKSAmJiAoJHNlcnZpY2UtPmdldFRva2VuKCkgIT09IE1NX1BheW1lbnRTZXJ2aWNlOjokVEVTVF9TRVJWSUNFX1RPS0VOKSkKCQkJCXsKCQkJCQlyZXR1cm4gJHNlcnZpY2U7CgkJCQl9CgkJCX0KCQl9CgkKCQlyZXR1cm4gbnVsbDsKCX0JCgkKCS8qKgoJICogSW5kaWNhdGVzIHdoZXRoZXIgY291cG9ucyBhcmUgc3VwcG9ydGVkIGJhc2VkIG9uIHRoZSBjdXJyZW50bHkgYWN0aXZlIHBheW1lbnQgc2VydmljZXMuIElmIG9uZSBvciBtb3JlCgkgKiBhY3RpdmUgcGF5bWVudCBzZXJ2aWNlcyBkb24ndCBzdXBwb3J0IGNvdXBvbnMgdGhlbiBjb3Vwb25zIHdvbid0IGJlIGF2YWlsYWJsZQoJICoKCSAqIEByZXR1cm4gTU1fUmVzcG9uc2UgYSByZXNwb25zZSBvYmplY3Qgd2l0aCBhIG1lc3NhZ2UgaW5kaWNhdGluZyB3aGljaCBwYXltZW50IHNlcnZpY2UgZG9lc24ndCBzdXBwb3J0IGNvdXBvbnMKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBjb3Vwb25zU3VwcG9ydGVkKCkKCXsKCQkkc2VydmljZXMgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OmdldEF2YWlsYWJsZVBheW1lbnRTZXJ2aWNlcygpOwoJCQoJCWZvcmVhY2ggKCRzZXJ2aWNlcyBhcyAkc2VydmljZSkKCQl7CgkJCWlmICgkc2VydmljZSBpbnN0YW5jZW9mIE1NX1BheW1lbnRTZXJ2aWNlKQoJCQl7CgkJCQlpZighJHNlcnZpY2UtPnN1cHBvcnRzRmVhdHVyZShNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDT1VQT05TKSkKCQkJCXsKCQkJCQkkbXNnID0gIjxzdHJvbmc+V0FSTklORzo8L3N0cm9uZz4geyRzZXJ2aWNlLT5nZXROYW1lKCl9IGRvZXNuJ3Qgc3VwcG9ydCBjb3Vwb25zIjsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRtc2csIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoKTsgLy8gY291cG9ucyBzdXBwb3J0ZWQKCX0KCQoJLyoqCgkgKiBSZXR1cm5zIGEgc3BlY2lmaWMgcGF5bWVudCBzZXJ2aWNlLiBFbmZvcmNlcyB0aGUgc2luZ2xldG9uIG5hdHVyZSBvZiBwYXltZW50IHNlcnZpY2VzIGFuZCByZXR1cm5zIGFuIGFscmVhZHkgaW5zdGFudGlhdGVkIGluc3RhbmNlIGlmIHRoZSAKCSAqIHJlcXVlc3RlZCBwYXltZW50IHNlcnZpY2UgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHBheW1lbnRTZXJ2aWNlVG9rZW4KCSAqIEBwYXJhbSBCb29sZWFuICRhdXRvbG9hZERlcGVuZGVuY2llcyAob3B0aW9uYWwpIHRoaXMgcGFyYW1ldGVyIGluZGljYXRlcyBpZiB0aGUgZGVwZW5kZW5jaWVzIHNob3VsZCBiZSBsb2FkZWQgd2hlbiB0aGUgcGF5bWVudCBzZXJ2aWNlIGlzIGluc3RhbnRpYXRlZAoJICogQHBhcmFtIGFycmF5fHN0cmluZyAkY29uZmlnRGF0YSAob3B0aW9uYWwpIHdoZW4gc2V0LCB0aGlzIHBhcmFtZXRlciBjYXVzZXMgdGhlIHJlcXVlc3RlZCBwYXltZW50IHNlcnZpY2UgdG8gYmUgaW5zdGFudGlhdGVkIHVzaW5nIHRoZSBzdXBwbGllZCBjb25maWcgZGF0YSwgd2hpY2ggY2FuIHNhdmUgYSByb3VuZHRyaXAgdG8gdGhlIGRiCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2UgQW4gaW5zdGFuY2Ugb2YgdGhlIHBheW1lbnQgc2VydmljZSBtYXRjaGluZyB0aGUgc3VwcGxpZWQgdG9rZW4sIG51bGwgaWYgb25lIGNhbid0IGJlIGZvdW5kCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGF5bWVudFNlcnZpY2UoJHBheW1lbnRTZXJ2aWNlVG9rZW4sICRhdXRvbG9hZERlcGVuZGVuY2llcz10cnVlLCAkY29uZmlnRGF0YT0iIikKCXsKCQlpZiAoaXNzZXQoTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjokaW5zdGFuY2VzWyRwYXltZW50U2VydmljZVRva2VuXSkgJiYgKE1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6JGluc3RhbmNlc1skcGF5bWVudFNlcnZpY2VUb2tlbl0gaW5zdGFuY2VvZiBNTV9QYXltZW50U2VydmljZSkpCgkJewoJCQkkcHltdFNlcnZpY2UgPSBNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OiRpbnN0YW5jZXNbJHBheW1lbnRTZXJ2aWNlVG9rZW5dOwoJCQkKCQkJaWYoJGF1dG9sb2FkRGVwZW5kZW5jaWVzKQoJCQl7CgkJCQkkcHltdFNlcnZpY2UtPmxvYWREZXBlbmRlbmNpZXMoKTsKCQkJfQoJCQkKCQkJcmV0dXJuICRweW10U2VydmljZTsKCQl9CgkJCgkJc3dpdGNoICgkcGF5bWVudFNlcnZpY2VUb2tlbikgCgkJewoJCQljYXNlIE1NX1BheW1lbnRTZXJ2aWNlOjokUEFZUEFMX1NFUlZJQ0VfVE9LRU46CgkJCQlNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OiRpbnN0YW5jZXNbJHBheW1lbnRTZXJ2aWNlVG9rZW5dID0gbmV3IE1NX1BheVBhbFNlcnZpY2UoJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX1BheW1lbnRTZXJ2aWNlOjokQ0xJQ0tCQU5LX1NFUlZJQ0VfVE9LRU46CgkJCQlNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OiRpbnN0YW5jZXNbJHBheW1lbnRTZXJ2aWNlVG9rZW5dID0gbmV3IE1NX0NsaWNrQmFua1NlcnZpY2UoJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX1BheW1lbnRTZXJ2aWNlOjokQVVUSE9SSVpFTkVUX1NFUlZJQ0VfVE9LRU46CgkJCQlNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OiRpbnN0YW5jZXNbJHBheW1lbnRTZXJ2aWNlVG9rZW5dID0gbmV3IE1NX0F1dGhvcml6ZU5ldFNlcnZpY2UoJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX1BheW1lbnRTZXJ2aWNlOjokQVVUSE9SSVpFTkVUX0NJTV9TRVJWSUNFX1RPS0VOOgoJCQkJTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjokaW5zdGFuY2VzWyRwYXltZW50U2VydmljZVRva2VuXSA9IG5ldyBNTV9BdXRob3JpemVOZXRDSU1TZXJ2aWNlKCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9QYXltZW50U2VydmljZTo6JENIQVJHSUZZX1NFUlZJQ0VfVE9LRU46CgkJCQlNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OiRpbnN0YW5jZXNbJHBheW1lbnRTZXJ2aWNlVG9rZW5dID0gbmV3IE1NX0NoYXJnaWZ5U2VydmljZSgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fUGF5bWVudFNlcnZpY2U6OiRTVFJJUEVfU0VSVklDRV9UT0tFTjoKCQkJCU1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6JGluc3RhbmNlc1skcGF5bWVudFNlcnZpY2VUb2tlbl0gPSBuZXcgTU1fU3RyaXBlU2VydmljZSgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fUGF5bWVudFNlcnZpY2U6OiRCUkFJTlRSRUVfU0VSVklDRV9UT0tFTjoKCQkJCU1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6JGluc3RhbmNlc1skcGF5bWVudFNlcnZpY2VUb2tlbl0gPSBuZXcgTU1fQnJhaW50cmVlU2VydmljZSgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fUGF5bWVudFNlcnZpY2U6OiRMSU1FTElHSFRfU0VSVklDRV9UT0tFTjoKCQkJCU1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6JGluc3RhbmNlc1skcGF5bWVudFNlcnZpY2VUb2tlbl0gPSBuZXcgTU1fTGltZUxpZ2h0U2VydmljZSgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fUGF5bWVudFNlcnZpY2U6OiRMSVRMRV9TRVJWSUNFX1RPS0VOOgoJCQkJTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjokaW5zdGFuY2VzWyRwYXltZW50U2VydmljZVRva2VuXSA9IG5ldyBNTV9MaXRsZVNlcnZpY2UoJGF1dG9sb2FkRGVwZW5kZW5jaWVzLCRjb25maWdEYXRhKTsKCQkJCWJyZWFrOwoJCQljYXNlIE1NX1BheW1lbnRTZXJ2aWNlOjokQ09JTkJBU0VfU0VSVklDRV9UT0tFTjoKCQkJCU1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6JGluc3RhbmNlc1skcGF5bWVudFNlcnZpY2VUb2tlbl0gPSBuZXcgTU1fQ29pbmJhc2VTZXJ2aWNlKCRhdXRvbG9hZERlcGVuZGVuY2llcywkY29uZmlnRGF0YSk7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9QYXltZW50U2VydmljZTo6JENPSU5CQVNFX01JTklNQUxfU0VSVklDRV9UT0tFTjoKCQkJCU1NX1BheW1lbnRTZXJ2aWNlRmFjdG9yeTo6JGluc3RhbmNlc1skcGF5bWVudFNlcnZpY2VUb2tlbl0gPSBuZXcgTU1fQ29pbmJhc2VNaW5pbWFsU2VydmljZSgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CiAgICAgIAkJY2FzZSBNTV9QYXltZW50U2VydmljZTo6JFRXT0NIRUNLT1VUX1NFUlZJQ0VfVE9LRU46CgkJCQlNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OiRpbnN0YW5jZXNbJHBheW1lbnRTZXJ2aWNlVG9rZW5dID0gbmV3IE1NX1R3b0NoZWNrb3V0U2VydmljZSgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CgkJCWNhc2UgTU1fUGF5bWVudFNlcnZpY2U6OiRURVNUX1NFUlZJQ0VfVE9LRU46CgkJCQlNTV9QYXltZW50U2VydmljZUZhY3Rvcnk6OiRpbnN0YW5jZXNbJHBheW1lbnRTZXJ2aWNlVG9rZW5dID0gbmV3IE1NX1Rlc3RQYXltZW50U2VydmljZSgkYXV0b2xvYWREZXBlbmRlbmNpZXMsJGNvbmZpZ0RhdGEpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbnVsbDsKCQkJCWJyZWFrOwoJCX0KCQkKCQlyZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjokaW5zdGFuY2VzWyRwYXltZW50U2VydmljZVRva2VuXTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgYSBwYXltZW50IHNlcnZpY2UgaGF2aW5nIHRoZSByZXF1ZXN0IGlkIChwaykKCSAqIAoJICogQHBhcmFtIGludGVnZXIgJHBheW1lbnRTZXJ2aWNlSWQgVGhlIGlkIG9mIHRoZSBwYXltZW50IHNlcnZpY2UgdG8gcmV0cmlldmUKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZSBpbnN0YW5jZSBvbiBzdWNjZXNzLCBudWxsIG9uIGZhaWx1cmUKCSAqLwoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRQYXltZW50U2VydmljZUJ5SWQoJHBheW1lbnRTZXJ2aWNlSWQpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChpc19udWxsKCRwYXltZW50U2VydmljZUlkKSkKCQl7CgkJCXJldHVybiBudWxsOwoJCX0KCQkKCQkkc3FsID0gInNlbGVjdCB0b2tlbiBmcm9tICIuTU1fVEFCTEVfUEFZTUVOVF9TRVJWSUNFUy4iIHdoZXJlIGlkID0gJ3skcGF5bWVudFNlcnZpY2VJZH0nIjsKCQkkdG9rZW5PYmplY3QgPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgkc3FsLCRwYXltZW50U2VydmljZUlkKSk7CgkJaWYgKGlzX251bGwoJHRva2VuT2JqZWN0KSkKCQl7CgkJCXJldHVybiBudWxsOwoJCX0KCQlyZXR1cm4gc2VsZjo6Z2V0UGF5bWVudFNlcnZpY2UoJHRva2VuT2JqZWN0LT50b2tlbik7Cgl9CgkKCQoJLyoqCgkgKiBnZXRQYXltZW50U2VydmljZXNBcnJheSByZXR1cm5zIGFuIGFycmF5IG9mIGFsbCB0aGUgcG90ZW50aWFsIHBheW1lbnQgc2VydmljZXMsIGtleWVkIGJ5IHRva2VuIGFuZCBmaWx0ZXJlZCBieSB0aGUgaW5zdGFsbCB0eXBlIGFuZCB3aGV0aGVyIHRoZXkgY2FuIGJlIHNob3duIG9uIHJlZ2lzdHJhdGlvbgoJICoKCSAqIEBwYXJhbSBCb29sZWFuICRhdXRvbG9hZERlcGVuZGVuY2llcyB0aGlzIHBhcmFtZXRlciBpcyBtZWFudCB0byBwYXNzIHRvIHRoZSBnZXRQYXltZW50U2VydmljZSgpIG1ldGhvZCBhbmQgaW5kaWNhdGVzIGlmIHRoZSBkZXBlbmRlbmNpZXMgc2hvdWxkIGJlIGxvYWRlZCB3aGVuIHRoZSBwYXltZW50IHNlcnZpY2UgaXMgaW5zdGFudGlhdGVkIAoJICoKCSAqIEByZXR1cm4gQW4gYXJyYXkgY29udGFpbmluZyBvYmplY3RzIGZvciBlYWNoIHBheW1lbnQgc2VydmljZSwgZmlsdGVyZWQgYnkgdGhlIHByb2R1Y3QgdmVyc2lvbiwgYWN0aXZlIHN0YXR1cywgYW5kIHdoZXRoZXIgdGhleSBjYW4gYmUgc2hvd24gb24gcmVnaXN0cmF0aW9uCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0UGF5bWVudFNlcnZpY2VzQXJyYXkoJGF1dG9sb2FkRGVwZW5kZW5jaWVzPXRydWUpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCSRwYXltZW50U2VydmljZXNBcnJheSA9IGFycmF5KCk7CgkJJHZhbGlkX3Rva2VucyA9IGFycmF5KCk7CgkJCgkJLy8gYWRkIHZhbGlkIHRva2VucyBiYXNlZCBvbiB0aGUgcGx1Z2luJ3MgcGVybWlzc2lvbnMKCQlpZihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokUFlNVF9TRVJWSUNFX1BBWVBBTCkgPT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKQoJCXsKCQkJYXJyYXlfcHVzaCgkdmFsaWRfdG9rZW5zLCBNTV9QYXltZW50U2VydmljZTo6JFBBWVBBTF9TRVJWSUNFX1RPS0VOKTsKCQl9CgkJCgkJaWYoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JFBZTVRfU0VSVklDRV9DTElDS0JBTkspID09IE1NX01lbWJlck1vdXNlU2VydmljZTo6JEFDVElWRSkKCQl7CgkJCWFycmF5X3B1c2goJHZhbGlkX3Rva2VucywgTU1fUGF5bWVudFNlcnZpY2U6OiRDTElDS0JBTktfU0VSVklDRV9UT0tFTik7CgkJfQoJCQoJCWlmKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRQWU1UX1NFUlZJQ0VfQVVUSE9SSVpFTkVUKSA9PSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRBQ1RJVkUpCgkJewoJCQlhcnJheV9wdXNoKCR2YWxpZF90b2tlbnMsIE1NX1BheW1lbnRTZXJ2aWNlOjokQVVUSE9SSVpFTkVUX1NFUlZJQ0VfVE9LRU4pOwoJCX0KCQkKCQlpZihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokUFlNVF9TRVJWSUNFX0FVVEhPUklaRU5FVF9DSU0pID09IE1NX01lbWJlck1vdXNlU2VydmljZTo6JEFDVElWRSkKCQl7CgkJCWFycmF5X3B1c2goJHZhbGlkX3Rva2VucywgTU1fUGF5bWVudFNlcnZpY2U6OiRBVVRIT1JJWkVORVRfQ0lNX1NFUlZJQ0VfVE9LRU4pOwoJCX0KCQkKCQlpZihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokUFlNVF9TRVJWSUNFX0NIQVJHSUZZKSA9PSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRBQ1RJVkUpCgkJewoJCQlhcnJheV9wdXNoKCR2YWxpZF90b2tlbnMsIE1NX1BheW1lbnRTZXJ2aWNlOjokQ0hBUkdJRllfU0VSVklDRV9UT0tFTik7CgkJfQoJCQoJCWlmKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRQWU1UX1NFUlZJQ0VfU1RSSVBFKSA9PSBNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRBQ1RJVkUpCgkJewoJCQlhcnJheV9wdXNoKCR2YWxpZF90b2tlbnMsIE1NX1BheW1lbnRTZXJ2aWNlOjokU1RSSVBFX1NFUlZJQ0VfVE9LRU4pOwoJCX0KCQkKCQlpZihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6Omhhc1Blcm1pc3Npb24oTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokUFlNVF9TRVJWSUNFX0JSQUlOVFJFRSkgPT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKQoJCXsKCQkJYXJyYXlfcHVzaCgkdmFsaWRfdG9rZW5zLCBNTV9QYXltZW50U2VydmljZTo6JEJSQUlOVFJFRV9TRVJWSUNFX1RPS0VOKTsKCQl9CgkJCgkJaWYoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JFBZTVRfU0VSVklDRV9MSU1FTElHSFQpID09IE1NX01lbWJlck1vdXNlU2VydmljZTo6JEFDVElWRSkKCQl7CgkJCWFycmF5X3B1c2goJHZhbGlkX3Rva2VucywgTU1fUGF5bWVudFNlcnZpY2U6OiRMSU1FTElHSFRfU0VSVklDRV9UT0tFTik7CgkJfQoJCQoJCWlmKE1NX01lbWJlck1vdXNlU2VydmljZTo6aGFzUGVybWlzc2lvbihNTV9NZW1iZXJNb3VzZVNlcnZpY2U6OiRQWU1UX1NFUlZJQ0VfTElUTEUpID09IE1NX01lbWJlck1vdXNlU2VydmljZTo6JEFDVElWRSkKCQl7CgkJCWFycmF5X3B1c2goJHZhbGlkX3Rva2VucywgTU1fUGF5bWVudFNlcnZpY2U6OiRMSVRMRV9TRVJWSUNFX1RPS0VOKTsKCQl9CgkJCgkJaWYoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JFBZTVRfU0VSVklDRV9DT0lOQkFTRSkgPT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKQoJCXsKCQkJYXJyYXlfcHVzaCgkdmFsaWRfdG9rZW5zLCBNTV9QYXltZW50U2VydmljZTo6JENPSU5CQVNFX1NFUlZJQ0VfVE9LRU4pOwoJCQlhcnJheV9wdXNoKCR2YWxpZF90b2tlbnMsIE1NX1BheW1lbnRTZXJ2aWNlOjokQ09JTkJBU0VfTUlOSU1BTF9TRVJWSUNFX1RPS0VOKTsKCQl9CgkKCQkvLyB0ZW1wb3JhcmlseSBkaXNhYmxlIDJDaGVja291dAogICAgCS8qaWYoTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjpoYXNQZXJtaXNzaW9uKE1NX01lbWJlck1vdXNlU2VydmljZTo6JFBZTVRfU0VSVklDRV9UV09DSEVDS09VVCkgPT0gTU1fTWVtYmVyTW91c2VTZXJ2aWNlOjokQUNUSVZFKQoJCXsKCQkJYXJyYXlfcHVzaCgkdmFsaWRfdG9rZW5zLCBNTV9QYXltZW50U2VydmljZTo6JFRXT0NIRUNLT1VUX1NFUlZJQ0VfVE9LRU4pOwoJCX0qLwoJCgkJLy90aGUgdGVzdCBzZXJ2aWNlIGlzIGF2YWlsYWJsZSB3aXRoIGFueSBwZXJtaXNzaW9ucy1zZXQKCQlhcnJheV9wdXNoKCR2YWxpZF90b2tlbnMsTU1fUGF5bWVudFNlcnZpY2U6OiRURVNUX1NFUlZJQ0VfVE9LRU4pOwoJCgkJJHNxbCA9ICJTRUxFQ1QgdG9rZW4gZnJvbSAiLk1NX1RBQkxFX1BBWU1FTlRfU0VSVklDRVM7CgkJJHJlc3VsdHMgPSAkd3BkYi0+Z2V0X3Jlc3VsdHMoJHNxbCk7CgkJCQkKCQkvL2FkZCBlYWNoIHBheW1lbnQgc2VydmljZSBpZiB0aGUgdG9rZW4gaXMgaW4gdGhlIGxpc3Qgb2YgdmFsaWQgdG9rZW5zLCBhbmQgYSB2YWxpZCBwYXltZW50IHNlcnZpY2Ugb2JqZWN0IGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGUgZmFjdG9yeSB1c2luZyB0aGUgdG9rZW4KCQlmb3JlYWNoICgkcmVzdWx0cyBhcyAkcm93KQoJCXsKCQkJJHBheW1lbnRTZXJ2aWNlVG9rZW4gPSBzdHJ0b3VwcGVyKCRyb3ctPnRva2VuKTsKCQkJaWYgKGluX2FycmF5KCRwYXltZW50U2VydmljZVRva2VuLCR2YWxpZF90b2tlbnMpKQoJCQl7CgkJCQl0cnkgCgkJCQl7CgkJCQkJJHBheW1lbnRTZXJ2aWNlID0gTU1fUGF5bWVudFNlcnZpY2VGYWN0b3J5OjpnZXRQYXltZW50U2VydmljZSgkcGF5bWVudFNlcnZpY2VUb2tlbiwgJGF1dG9sb2FkRGVwZW5kZW5jaWVzKTsKCQkJCQlpZiAoKCRwYXltZW50U2VydmljZSAhPSBudWxsKSAmJiAoJHBheW1lbnRTZXJ2aWNlIGluc3RhbmNlT2YgTU1fUGF5bWVudFNlcnZpY2UpKQoJCQkJCXsKCQkJCQkJJHBheW1lbnRTZXJ2aWNlc0FycmF5WyRwYXltZW50U2VydmljZVRva2VuXSA9ICRwYXltZW50U2VydmljZTsKCQkJCQl9CgkJCQl9CgkJCQljYXRjaCAoRXhjZXB0aW9uICRlKQoJCQkJewoJCQkJCS8vdGhlcmUgd2FzIGFuIGVycm9yIGluc3RhbnRpYXRpbmcgdGhlIHNlcnZpY2Ugc28gbG9nIGFuZCBza2lwIGl0CgkJCQkJJGVycm9yTXNnID0gIkVycm9yIGluc3RhbnRpYXRpbmcgeyRwYXltZW50U2VydmljZVRva2VufSA6Ii4kZS0+Z2V0TWVzc2FnZSgpOwoJCQkJCU1NX0RpYWdub3N0aWNMb2c6OmxvZyhNTV9EaWFnbm9zdGljTG9nOjokTU1fRVJST1IsICRlcnJvck1zZyk7CgkJCQl9CgkJCX0KCQl9CgkJcmV0dXJuICRwYXltZW50U2VydmljZXNBcnJheTsKCX0KCQp9', 0, '2018-11-21 06:38:55'),
(255, 'errortagprocessor', 'Y2xhc3MgTU1fRXJyb3JUYWdQcm9jZXNzb3IKewkKCXB1YmxpYyBzdGF0aWMgJFRBR19FUlJPUl9NRVNTQUdFID0gIm1tX2Vycm9yX21lc3NhZ2UiOwoJCgkKCS8qKgoJICogVGFrZXMgYSBTbWFydFRhZyBzdHJpbmcgYW5kIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgaXMgcmVsYXRlZCB0byBlcnJvcnMuCgkgKiAKCSAqIEBwYXJhbSBTdHJpbmcgJHNtYXJ0VGFnIHRoZSBuYW1lIG9mIHRoZSBTbWFydFRhZwoJICogQHJldHVybiBCb29sZWFuIHJldHVybnMgdHJ1ZSBpZiB0aGUgU21hcnRUYWcgcGFzc2VkIGlzIHJlbGF0ZWQgdG8gZXJyb3JzLgoJICovCglwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGlzRXJyb3JTbWFydFRhZygkc21hcnRUYWcpCgl7IAoJCXN3aXRjaCgkc21hcnRUYWcpIAoJCXsKCQkJY2FzZSBzZWxmOjokVEFHX0VSUk9SX01FU1NBR0U6CgkJCQlyZXR1cm4gdHJ1ZTsKCQkJCQoJCQlkZWZhdWx0OgoJCQkJcmV0dXJuIGZhbHNlOwoJCX0KCX0KCQoJCgkvKioKCSAqIFRha2VzIGEgU21hcnRUYWcgbmFtZSBhbmQgYSBudW1iZXIgb2YgcHJvcGVydGllcyByZWxhdGVkIHRvIHRoZSBTbWFydFRhZyBhbmQgbWFrZXMgYSBjYWxsIHRvIAoJICogdGhlIGFwcHJvcHJpYXRlIGZ1bmN0aW9uIGJhc2VkIG9uIHRoZSBTbWFydFRhZyBuYW1lLgoJICogQHBhcmFtIFN0cmluZyAkc21hcnRUYWcgdGhlIG5hbWUgb2YgdGhlIFNtYXJ0VGFnCgkgKiBAcGFyYW0gU3RyaW5nICRjb250ZW50IHRoZSBjb250ZW50IHRvIHByb2Nlc3MKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gcHJvY2Vzc1NtYXJ0VGFnKCRzbWFydFRhZywgJGNvbnRlbnQsICRhdHRzLCAkY29kZSkKCXsKCQlzd2l0Y2goJHNtYXJ0VGFnKSAKCQl7CgkJCWNhc2Ugc2VsZjo6JFRBR19FUlJPUl9NRVNTQUdFOgoJCQkJcmV0dXJuIHNlbGY6Om1tX2Vycm9yX21lc3NhZ2UoJGNvbnRlbnQsICRhdHRzLCAkY29kZSk7CgkJCQkKCQkJZGVmYXVsdDoKCQkJCXJldHVybiAiSW52YWxpZCBFcnJvciBTbWFydFRhZyB7JHNtYXJ0VGFnfSBmb3VuZC4iOwoJCX0KCX0KCgkKCS8qKgoJICogVGhpcyBmdW5jdGlvbiBwcm9jZXNzZXMgdGhlIE1NX0Vycm9yX01lc3NhZ2UgdGFnLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgCgkgKiByZXR1cm5pbmcgdGhlIGVycm9yIG1lc3NhZ2UgYmFzZWQgb24gdGhlIGVycm9yIGNvZGUgb3IgbWVzc2FnZSBwYXNzZWQgaW4gdGhlIFVSTC4KCSAqIEBwYXJhbSBTdHJpbmcgJGNvbnRlbnQgdGhlIGNvbnRlbnQgY29udGFpbmVkIHdpdGhpbiB0aGUgU21hcnRUYWcgKGlmIGFueSkKCSAqIEBwYXJhbSBBcnJheSAkYXR0cyBhbiBhc3NvY2lhdGl2ZSBhcnJheSBvZiBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGUgU21hcnRUYWcKCSAqIEBwYXJhbSBTdHJpbmcgJGNvZGUgdGhlIHJhdyB2ZXJzaW9uIG9mIHRoZSBTbWFydFRhZyBuYW1lIChpLmUuIG5vdCBjYXNlLWluc2VudGl2ZSwgbm90IGJyb2tlbiB1cCBpbnRvIHBhcnRzKQoJICogQHJldHVybiBTdHJpbmcgYSBzdHJpbmcgYmFzZWQgb24gdGhlICRjb250ZW50IHBhc3NlZCB3aXRoIGFsbCBTbWFydFRhZ3MgcHJvY2Vzc2VkCgkgKi8KCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbW1fZXJyb3JfbWVzc2FnZSgkY29udGVudCwgJGF0dHMsICRjb2RlKQoJewkKCQkkbWVzc2FnZSA9IE1NX0Vycm9yOjpnZXRNZXNzYWdlKCk7CgkJcmV0dXJuIF9tbXQoJG1lc3NhZ2UpOwoJfQp9Cg==', 0, '2018-11-21 06:38:55'),
(256, 'customfieldview', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICovCmNsYXNzIE1NX0N1c3RvbUZpZWxkVmlldyBleHRlbmRzIE1NX1JCQUNHZW5lcmFsRW1wbG95ZWVWaWV3CnsKCXB1YmxpYyBzdGF0aWMgJE1NX0pTQUNUSU9OX0NBTkNFTF9DUkVBVElPTiA9ICJjYW5jZWxDcmVhdGlvbiI7CglwdWJsaWMgc3RhdGljICRNTV9KU0FDVElPTl9TSE9XX1NNQVJUVEFHUyA9ICJzaG93Q2hlY2tvdXRGb3JtU21hcnRUYWdzIjsKCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoKQoJewoJCXBhcmVudDo6X19jb25zdHJ1Y3QoKTsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHBlcmZvcm1BY3Rpb24oJHBvc3QpIAoJewkKCQkkcmVzcG9uc2UgPSBwYXJlbnQ6OnBlcmZvcm1BY3Rpb24oJHBvc3QpOwoJCQoJCWlmKCEoJHJlc3BvbnNlIGluc3RhbmNlb2YgTU1fUmVzcG9uc2UpKQoJCXsKCQkJc3dpdGNoKCRwb3N0W3NlbGY6OiRNTV9KU0FDVElPTl0pIAoJCQl7CgkJCQljYXNlIHNlbGY6OiRNTV9KU0FDVElPTl9TQVZFOgoJCQkJCXJldHVybiAkdGhpcy0+c2F2ZUN1c3RvbUZpZWxkKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX0NBTkNFTF9DUkVBVElPTjoKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUN1c3RvbUZpZWxkKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1JFTU9WRToKCQkJCQlyZXR1cm4gJHRoaXMtPnJlbW92ZUN1c3RvbUZpZWxkKCRwb3N0KTsKCQkJCQkKCQkJCWNhc2Ugc2VsZjo6JE1NX0pTQUNUSU9OX1NIT1dfU01BUlRUQUdTOgoJCQkJCXJldHVybiAkdGhpcy0+c2hvd0NoZWNrb3V0Rm9ybVNtYXJ0VGFncygkcG9zdCk7CgkJCQkJCgkJCQlkZWZhdWx0OgoJCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJHJlc3BvbnNlKTsKCQkJfQoJCX0KCQllbHNlIAoJCXsKCQkJcmV0dXJuICRyZXNwb25zZTsKCQl9Cgl9CgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRWaWV3RGF0YShNTV9EYXRhR3JpZCAkZGcpCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCSRyb3dzID0gcGFyZW50OjpnZXREYXRhKE1NX1RBQkxFX0NVU1RPTV9GSUVMRFMsIG51bGwsICRkZywgImlzX2hpZGRlbiA9ICcwJyIpOwoJCQoJCXJldHVybiAkcm93czsKCX0KCQoJcHVibGljIGZ1bmN0aW9uIHJlbW92ZUN1c3RvbUZpZWxkKCRwb3N0KQoJewoJCWlmKGlzc2V0KCRwb3N0WyJpZCJdKSAmJiBpbnR2YWwoJHBvc3RbImlkIl0pID4gMCkKCQl7CgkJCSRjdXN0b21GaWVsZCA9IG5ldyBNTV9DdXN0b21GaWVsZCgkcG9zdFsiaWQiXSwgZmFsc2UpOwoJCQkkcmVzdWx0ID0gJGN1c3RvbUZpZWxkLT5kZWxldGUoKTsKCQkJCgkJCWlmKCRyZXN1bHQpIAoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7CgkJCX0gCgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIlVuYWJsZSB0byBkZWxldGUgY3VzdG9tIGZpZWxkLiBObyBJRCBzcGVjaWZpZWQuIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7Cgl9CgkKCQoJcHJpdmF0ZSBmdW5jdGlvbiBzYXZlQ3VzdG9tRmllbGQoJHBvc3QpCgl7CQoJCSRjdXN0b21GaWVsZCA9IG5ldyBNTV9DdXN0b21GaWVsZCgpOwoJCQoJCWlmKGlzc2V0KCRwb3N0WyJtbV9pZCJdKSAmJiBpbnR2YWwoJHBvc3RbIm1tX2lkIl0pID4gMCkgCgkJewoJCQkkY3VzdG9tRmllbGQtPnNldElkKCRwb3N0WyJtbV9pZCJdKTsKCQl9CgkJCgkJJGN1c3RvbUZpZWxkLT5zZXREaXNwbGF5TmFtZSgkcG9zdFsibW1fZGlzcGxheV9uYW1lIl0pOwoJCSRjdXN0b21GaWVsZC0+c2V0U2hvd09uTXlBY2NvdW50KCRwb3N0WyJtbV9zaG93X29uX215X2FjY291bnQiXSk7CgkJJGN1c3RvbUZpZWxkLT5zZXRUeXBlKCRwb3N0WyJtbV9maWVsZF90eXBlIl0pOwoJCQoJCS8vIHNldCBvcHRpb25zCgkJJGN1c3RvbUZpZWxkLT5kZWxldGVPcHRpb25zKCk7CgkJCgkJaWYoTU1fQ3VzdG9tRmllbGQ6OnR5cGVSZXF1aXJlc09wdGlvbnMoJHBvc3RbIm1tX2ZpZWxkX3R5cGUiXSkpCgkJewoJCQlmb3JlYWNoKCRwb3N0IGFzICRrZXkgPT4gJHZhbHVlKSAKCQkJewoJCQkJaWYoc3RycG9zKCRrZXksICdtbV9maWVsZF9vcHRpb25fJykgPT09IDApIAoJCQkJewoJCQkJCWlmKCFlbXB0eSgkdmFsdWUpKQoJCQkJCXsKCQkJCQkJJGN1c3RvbUZpZWxkLT5hZGRPcHRpb24oJHZhbHVlKTsKCQkJCQl9CgkJCQl9CgkJCX0KCQl9CgkJCgkJcmV0dXJuICRjdXN0b21GaWVsZC0+Y29tbWl0RGF0YSgpOwoJfQoJCglwcml2YXRlIGZ1bmN0aW9uIHNob3dDaGVja291dEZvcm1TbWFydFRhZ3MoJHBvc3QpCgl7CgkJaWYoaXNzZXQoJHBvc3RbImN1c3RvbV9maWVsZF9pZCJdKSAmJiBpc3NldCgkcG9zdFsiY3VzdG9tX2ZpZWxkX25hbWUiXSkpCgkJewoJCQkkZGF0YSA9IG5ldyBzdGRDbGFzcygpOwoJCQkkZGF0YS0+Y3VzdG9tRmllbGRJZCA9ICRwb3N0WyJjdXN0b21fZmllbGRfaWQiXTsKCQkJJGRhdGEtPmN1c3RvbUZpZWxkTmFtZSA9IHN0cmlwc2xhc2hlcygkcG9zdFsiY3VzdG9tX2ZpZWxkX25hbWUiXSk7CgkJCQkKCQkJJGNvbnRlbnQgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoTU1fTU9EVUxFUy4iLyIuTU1fTU9EVUxFX0NVU1RPTV9GSUVMRFMuIi5zbWFydHRhZ3MuZGlhbG9nLnBocCIsICRkYXRhKTsKCQkJcmV0dXJuIG5ldyBNTV9SZXNwb25zZSgkY29udGVudCk7CgkJfQoJCWVsc2UKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoIkN1c3RvbSBmaWVsZCBJRCBhbmQgbmFtZSBhcmUgcmVxdWlyZWQgdG8gZGlzcGxheSBjaGVja291dCBmb3JtIFNtYXJ0VGFncyIsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KfQo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(257, 'braintreeservice', 'LyoqCiAqIAogKiBNZW1iZXJNb3VzZShUTSkgKGh0dHA6Ly93d3cubWVtYmVybW91c2UuY29tKQogKiAoYykgTWVtYmVyTW91c2UsIExMQy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICoKICogTU1fQnJhaW50cmVlU2VydmljZSBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgTU1fUGF5bWVudFNlcnZpY2UgaW50ZXJmYWNlIHVzaW5nIEJyYWludHJlZSAod3d3LmJyYWludHJlZXBheW1lbnRzLmNvbSkKICovIApjbGFzcyBNTV9CcmFpbnRyZWVTZXJ2aWNlIGV4dGVuZHMgTU1fU2NoZWR1bGVkUGF5bWVudFNlcnZpY2UKewoJcHJvdGVjdGVkICR0b2tlbiA9ICJCUkFJTlRSRUUiOwoJCglwcm90ZWN0ZWQgJHRlc3RNZXJjaGFudElkID0gIiI7Cglwcm90ZWN0ZWQgJHRlc3RQdWJsaWNLZXkgPSAiIjsKCXByb3RlY3RlZCAkdGVzdFByaXZhdGVLZXkgPSAiIjsKCQoJcHJvdGVjdGVkICRsaXZlTWVyY2hhbnRJZCA9ICIiOwoJcHJvdGVjdGVkICRsaXZlUHVibGljS2V5ID0gIiI7Cglwcm90ZWN0ZWQgJGxpdmVQcml2YXRlS2V5ID0gIiI7CgkKCXByb3RlY3RlZCAkdGVzdE1vZGUgPSBmYWxzZTsJCgkKCXByb3RlY3RlZCAkc3VwcG9ydGVkQ3VycmVuY2llcyA9IGFycmF5KCJBRkEiLCJBTEwiLCJEWkQiLCJBUlMiLCJBTUQiLCJBV0ciLCJBVUQiLCJBWk4iLCJCU0QiLCJCSEQiLAoJCQkiQkRUIiwiQkJEIiwiQllSIiwiQlpEIiwiQk1EIiwiQk9CIiwiQldQIiwiQlJMIiwiQk5EIiwiQkdOIiwiQklGIiwiS0hSIiwiQ0FEIiwiQ1ZFIiwiS1lEIiwKCQkJIlhBRiIsIlhQRiIsIkNMUCIsIkNOWSIsIkNPUCIsIktNRiIsIkJBTSIsIkNSQyIsIkhSSyIsIkNVUCIsIkNZUCIsIkNaSyIsIkRLSyIsIkRKRiIsIkRPUCIsIlhDRCIsCgkJCSJFQ1MiLCJFR1AiLCJTVkMiLCJFUk4iLCJFRUsiLCJFVEIiLCJFVVIiLCJGS1AiLCJGSkQiLCJDREYiLCJHTUQiLCJHRUwiLCJHSFMiLCJHSVAiLCJHVFEiLCJHTkYiLAoJCQkiR1dQIiwiR1lEIiwiSFRHIiwiSE5MIiwiSEtEIiwiSFVGIiwiSVNLIiwiSU5SIiwiSURSIiwiSVJSIiwiSVFEIiwiSUxTIiwiSk1EIiwiSlBZIiwiSk9EIiwiS1pUIiwKCQkJIktFUyIsIktXRCIsIkFPQSIsIktHUyIsIktJUCIsIkxBSyIsIkxWTCIsIkxCUCIsIkxSRCIsIkxZRCIsIkxUTCIsIkxTTCIsIk1PUCIsIk1LRCIsIk1HRiIsCgkJCSJNR0EiLCJNV0siLCJNWVIiLCJNVlIiLCJNVEwiLCJNUk8iLCJNVVIiLCJNWE4iLCJNREwiLCJNTlQiLCJNQUQiLCJNWk0iLCJNTUsiLCJOQUQiLCJOUFIiLCJBTkciLAoJCQkiUEdLIiwiVFdEIiwiVFJZIiwiTlpEIiwiTklPIiwiTkdOIiwiS1BXIiwiTk9LIiwiUEtSIiwiUEFCIiwiUFlHIiwiUEVOIiwiUEhQIiwiUExOIiwiUUFSIiwiT01SIiwKCQkJIlJPTiIsIlJVQiIsIlJXRiIsIldTVCIsIlNURCIsIlNBUiIsIlJTRCIsIlNDUiIsIlNMTCIsIlNHRCIsIlNLSyIsIlNJVCIsIlNCRCIsIlNPUyIsIlpBUiIsIktSVyIsCgkJCSJMS1IiLCJTSFAiLCJTREQiLCJTUkQiLCJTWkwiLCJTRUsiLCJDSEYiLCJTWVAiLCJUSlMiLCJUWlMiLCJUSEIiLCJUT1AiLCJUVEQiLCJUTkQiLCJUTU0iLCJVR1giLAoJCQkiVUFIIiwiQUVEIiwiR0JQIiwiVVNEIiwiVVlVIiwiVVpTIiwiVlVWIiwiVkVGIiwiVk5EIiwiWE9GIiwiWUVSIiwiWVVNIiwiWk1LIiwiWldEIik7CgkKCXB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkYXV0b2xvYWQ9dHJ1ZSkKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRhdXRvbG9hZCk7CgkJCgkJaWYoJGF1dG9sb2FkKQoJCXsKCQkJJHRoaXMtPnNldHVwQnJhaW50cmVlKCk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBsb2FkRGVwZW5kZW5jaWVzKCkKCXsKCQlyZXF1aXJlX29uY2UoTU1fTElCX0RJUi4iL2JyYWludHJlZS9CcmFpbnRyZWUucGhwIik7Cgl9CgkKCQoJLyoqCgkgKiBJbml0aWFsaXplcyB0aGUgQnJhaW50cmVlIGVudmlyb25tZW50CgkgKi8KCXByaXZhdGUgZnVuY3Rpb24gc2V0dXBCcmFpbnRyZWUoKQoJewkKCQl0cnkgCgkJewoJCQlpZiAoJHRoaXMtPnRlc3RNb2RlICYmICFlbXB0eSgkdGhpcy0+dGVzdE1lcmNoYW50SWQpICYmICFlbXB0eSgkdGhpcy0+dGVzdFB1YmxpY0tleSkgJiYgIWVtcHR5KCR0aGlzLT50ZXN0UHJpdmF0ZUtleSkpCgkJCXsKCQkJCUJyYWludHJlZV9Db25maWd1cmF0aW9uOjplbnZpcm9ubWVudCgnc2FuZGJveCcpOwoJCQkJQnJhaW50cmVlX0NvbmZpZ3VyYXRpb246Om1lcmNoYW50SWQoJHRoaXMtPnRlc3RNZXJjaGFudElkKTsKCQkJCUJyYWludHJlZV9Db25maWd1cmF0aW9uOjpwdWJsaWNLZXkoJHRoaXMtPnRlc3RQdWJsaWNLZXkpOwoJCQkJQnJhaW50cmVlX0NvbmZpZ3VyYXRpb246OnByaXZhdGVLZXkoJHRoaXMtPnRlc3RQcml2YXRlS2V5KTsKCQkJfQoJCQllbHNlIGlmICghZW1wdHkoJHRoaXMtPmxpdmVNZXJjaGFudElkKSAmJiAhZW1wdHkoJHRoaXMtPmxpdmVQdWJsaWNLZXkpICYmICFlbXB0eSgkdGhpcy0+bGl2ZVByaXZhdGVLZXkpKQoJCQl7CgkJCQlCcmFpbnRyZWVfQ29uZmlndXJhdGlvbjo6ZW52aXJvbm1lbnQoJ3Byb2R1Y3Rpb24nKTsKCQkJCUJyYWludHJlZV9Db25maWd1cmF0aW9uOjptZXJjaGFudElkKCR0aGlzLT5saXZlTWVyY2hhbnRJZCk7CgkJCQlCcmFpbnRyZWVfQ29uZmlndXJhdGlvbjo6cHVibGljS2V5KCR0aGlzLT5saXZlUHVibGljS2V5KTsKCQkJCUJyYWludHJlZV9Db25maWd1cmF0aW9uOjpwcml2YXRlS2V5KCR0aGlzLT5saXZlUHJpdmF0ZUtleSk7CgkJCX0KCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgCgkJewoJCQkvLyBkbyBub3RoaW5nCgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsKCkgCgl7IAoJCXBhcmVudDo6aW5zdGFsbCgpOwoJCQoJCSRzcWwgPSAiQ1JFQVRFIFRBQkxFICIuTU1fVEFCTEVfQlJBSU5UUkVFX0NVU1RPTUVSX0xJTktTLiIgKFxuIi4KCQkJCSJicmFpbnRyZWVfY3VzdG9tZXJfaWQgVkFSQ0hBUig0MCkgTk9UIE5VTEwsXG4iLgoJCQkJIm1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIGJpZ2ludCgyMCkgTk9UIE5VTEwsXG4iLgoJCQkJIlVOSVFVRSBLRVkgYnJhaW50cmVlX2N1c3RvbWVyX2lkIChicmFpbnRyZWVfY3VzdG9tZXJfaWQpLFxuIi4KCQkJCSJVTklRVUUgS0VZIG1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIChtZW1iZXJtb3VzZV9jdXN0b21lcl9pZClcbiIuCgkJCQkiKSBERUZBVUxUIENIQVJBQ1RFUiBTRVQgdXRmOCBDT0xMQVRFIHV0ZjhfdW5pY29kZV9jaTtcbiI7CgkJCgkJJHNxbC49ICJDUkVBVEUgVEFCTEUgIi5NTV9UQUJMRV9CUkFJTlRSRUVfQ0hBUkdFUy4iIChcbiIuCgkJCQkiaWQgYmlnaW50KDIwKSBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCxcbiIuCgkJCQkib3JkZXJfaWQgYmlnaW50KDIwKSBOT1QgTlVMTCxcbiIuCgkJCQkib3JkZXJfaXRlbV9pZCBiaWdpbnQoMjApIE5VTEwsXG4iLgoJCQkJImNoYXJnZV9pZCB2YXJjaGFyKDQwKSxcbiIuCgkJCQkicGF5bWVudF90b2tlbiB2YXJjaGFyKDQwKSxcbiIuCgkJCQkibGFzdF9mb3VyIHZhcmNoYXIoNCkgTlVMTCxcbiIuCgkJCQkiYW1vdW50IGRlY2ltYWwoMTAsMikgTk9UIE5VTEwsXG4iLgoJCQkJInRyYW5zYWN0aW9uX2RhdGUgZGF0ZXRpbWUgTk9UIE5VTEwsXG4iLgoJCQkJIlBSSU1BUlkgS0VZICAoaWQpLFxuIi4KCQkJCSJLRVkgbW1fYnJhaW50cmVlX2NoYXJnZV9jaGFyZ2VfaWRfaWR4IChjaGFyZ2VfaWQpXG4iLgoJCQkJIikgREVGQVVMVCBDSEFSQUNURVIgU0VUIHV0ZjggQ09MTEFURSB1dGY4X3VuaWNvZGVfY2k7XG4iOwoJCQoJCWRiRGVsdGEoJHNxbCk7Cgl9CgkKCQoJLyoqCgkgKiBSZXBvcnQgdGhlIGZlYXR1cmVzIHRoZSBCcmFpbnRyZWUgc2VydmljZSBzdXBwb3J0cwoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6c3VwcG9ydHNGZWF0dXJlKCkKCSAqCgkgKiBAcGFyYW0gaW50ZWdlciAkZmVhdHVyZUNvbnN0IGEgY29uc3QgYXMgZGVmaW5lZCBpbiBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzCgkgKiBAcmV0dXJuIGJvb2xlYW4gdHJ1ZSBpZiBzdXBwb3J0ZWQsIGZhbHNlIGlmIG5vdCBzdXBwb3J0ZWQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHN1cHBvcnRzRmVhdHVyZSgkZmVhdHVyZUNvbnN0KQoJewoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6Ok9OU0lURV9TRVJWSUNFOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OkNBUkRfT05fRklMRTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpDT1VQT05TOwoJCSRzdXBwb3J0ZWRbXSA9IE1NX1BheW1lbnRTZXJ2aWNlRmVhdHVyZXM6OlRFU1RfTU9ERTsKCQkkc3VwcG9ydGVkW10gPSBNTV9QYXltZW50U2VydmljZUZlYXR1cmVzOjpNT0RJRllfUkVCSUxMX0RBVEU7CgkJcmV0dXJuIGluX2FycmF5KCRmZWF0dXJlQ29uc3QsJHN1cHBvcnRlZCx0cnVlKTsKCX0KCQoJCgkvKioKCSAqIFJldHVybnMgdGhlIGh0bWwgdGhhdCB3aWxsIGJlIHVzZWQgb24gdGhlIHBheW1lbnQgbWV0aG9kIHNldHRpbmdzIHNjcmVlbiBmb3IgY29uZmlndXJpbmcgQnJhaW50cmVlCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpkaXNwbGF5Q29uZmlnT3B0aW9ucygpCgkgKiAKCSAqIEByZXR1cm4gU3RyaW5nIGNvbnRhaW5pbmcgdGhlIGNvbmZpZ3VyYXRpb24gZGlhbG9nIGh0bWwKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGRpc3BsYXlDb25maWdPcHRpb25zKCkKCXsKCQkkY29uZmlnX29wdGlvbnMgPSBNTV9URU1QTEFURTo6Z2VuZXJhdGUoInskdGhpcy0+Z2V0VGVtcGxhdGVEaXIoKX0vYnJhaW50cmVlX2NvbmZpZy5odG1sLnBocCIsJHRoaXMpOwoJCXJldHVybiAkY29uZmlnX29wdGlvbnM7Cgl9CgkKCQoJLyoqCgkgKiBWYWxpZGF0ZXMgYW5kIGNvbmZpZ3VyZXMgdGhlIG9iamVjdCB3aXRoIHRoZSBzZXR0aW5ncyBpbmZvcm1hdGlvbiBnZW5lcmF0ZWQgYnkgc3VibWlzc2lvbiBvZiB0aGUgY29uZmlndXJhdGlvbiBkaWFsb2cKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnByb2Nlc3NDb25maWdPcHRpb25zKCkKCSAqCgkgKiBAcGFyYW0gJHBvc3QgQW4gYXJyYXkgY29udGFpbmluZyB0aGUgZGF0YSBwb3N0ZWQgZnJvbSB0aGUgcGF5bWVudCBtZXRob2RzIHNldHRpbmdzIHNjcmVlbgoJICogQHJldHVybiBBbiBNTV9SZXNwb25zZSBvZiB0eXBlIE1NX1Jlc3BvbnNlOjpTVUNDRVNTIGluZGljYXRpbmcgc3VjY2Vzc2Z1bCB2YWxpZGF0aW9uIGFuZCBhc3NpZ21lbnQuIE9uIGVycm9yLCB0aGUgdHlwZSB3aWxsIGJlIE1NX1Jlc3BvbnNlOjpFUlJPUiBhbmQgdGhlIG1lc3NhZ2Ugd2lsbCBjb250YWluIHRoZSBlcnJvciBtZXNzYWdlcwoJICovCglwdWJsaWMgZnVuY3Rpb24gcHJvY2Vzc0NvbmZpZ09wdGlvbnMoJHBvc3QpIAoJeyAKCQkkYWN0aXZlID0gKGlzc2V0KCRwb3N0WydvbnNpdGVfcGF5bWVudF9zZXJ2aWNlJ10pICYmIChzdHJ0b2xvd2VyKCR0aGlzLT5nZXRUb2tlbigpKSA9PSAkcG9zdFsnb25zaXRlX3BheW1lbnRfc2VydmljZSddKSk7CgkJJHRoaXMtPnNldEFjdGl2ZSgkYWN0aXZlKTsKCgkJaWYgKCRhY3RpdmUpCgkJewoJCQkkdGhpcy0+aW5zdGFsbCgpOwoJCQkkY29uZmlnID0gaXNzZXQoJHBvc3RbJ3BheW1lbnRfc2VydmljZSddWydicmFpbnRyZWUnXSk/JHBvc3RbJ3BheW1lbnRfc2VydmljZSddWydicmFpbnRyZWUnXTphcnJheSgpOwoJCQkkZW1wdHlfZXJyb3JzID0gIiI7CgkJCSRjb25maWdbJ3Rlc3RfbW9kZSddID0gaXNzZXQoJGNvbmZpZ1sndGVzdF9tb2RlJ10pPyhib29sKSRjb25maWdbJ3Rlc3RfbW9kZSddOmZhbHNlOwoJCQkKCQkJaWYgKCRjb25maWdbJ3Rlc3RfbW9kZSddKQoJCQl7CgkJCQlpZihlbXB0eSgkY29uZmlnWyd0ZXN0X21lcmNoYW50X2lkJ10pKQoJCQkJewoJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkJyYWludHJlZTogUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHRoZSBUZXN0IE1lcmNoYW50IElEXG4iOwoJCQkJfQoJCQkJCgkJCQlpZihlbXB0eSgkY29uZmlnWyd0ZXN0X3B1YmxpY19rZXknXSkpCgkJCQl7CgkJCQkJJGVtcHR5X2Vycm9ycyAuPSAiQnJhaW50cmVlOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIFRlc3QgUHVibGljIEtleVxuIjsKCQkJCX0KCQkJCQoJCQkJaWYoZW1wdHkoJGNvbmZpZ1sndGVzdF9wcml2YXRlX2tleSddKSkKCQkJCXsKCQkJCQkkZW1wdHlfZXJyb3JzIC49ICJCcmFpbnRyZWU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgVGVzdCBQcml2YXRlIEtleSI7CgkJCQl9CgkJCX0KCQkJCgkJCWlmICghJGNvbmZpZ1sndGVzdF9tb2RlJ10pCgkJCXsKCQkJCWlmKGVtcHR5KCRjb25maWdbJ2xpdmVfbWVyY2hhbnRfaWQnXSkpCgkJCQl7CgkJCQkJJGVtcHR5X2Vycm9ycyAuPSAiQnJhaW50cmVlOiBQbGVhc2UgZW50ZXIgYSB2YWx1ZSBmb3IgdGhlIExpdmUgTWVyY2hhbnQgSURcbiI7CgkJCQl9CgkJCQkKCQkJCWlmKGVtcHR5KCRjb25maWdbJ2xpdmVfcHVibGljX2tleSddKSkKCQkJCXsKCQkJCQkkZW1wdHlfZXJyb3JzIC49ICJCcmFpbnRyZWU6IFBsZWFzZSBlbnRlciBhIHZhbHVlIGZvciB0aGUgTGl2ZSBQdWJsaWMgS2V5XG4iOwoJCQkJfQoJCQkJCgkJCQlpZihlbXB0eSgkY29uZmlnWydsaXZlX3ByaXZhdGVfa2V5J10pKQoJCQkJewoJCQkJCSRlbXB0eV9lcnJvcnMgLj0gIkJyYWludHJlZTogUGxlYXNlIGVudGVyIGEgdmFsdWUgZm9yIHRoZSBMaXZlIFByaXZhdGUgS2V5IjsKCQkJCX0KCQkJfQoJCQkKCQkJaWYgKCRlbXB0eV9lcnJvcnMgIT0gIiIpCgkJCXsKCQkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGVtcHR5X2Vycm9ycyxNTV9SZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkKCQkJLy9pZiBoZXJlLCB0aGF0IG1lYW5zIHRoZXkgYXJlIGFsbCB2YWx1ZXMgYXJlIHNldAoJCQkkdGhpcy0+c2V0VGVzdE1vZGUoJGNvbmZpZ1sndGVzdF9tb2RlJ10pOwoJCQlpZiAoJHRoaXMtPnRlc3RNb2RlKQoJCQl7CgkJCQkkdGhpcy0+c2V0VGVzdE1lcmNoYW50SWQoJGNvbmZpZ1sndGVzdF9tZXJjaGFudF9pZCddKTsKCQkJCSR0aGlzLT5zZXRUZXN0UHVibGljS2V5KCRjb25maWdbJ3Rlc3RfcHVibGljX2tleSddKTsKCQkJCSR0aGlzLT5zZXRUZXN0UHJpdmF0ZUtleSgkY29uZmlnWyd0ZXN0X3ByaXZhdGVfa2V5J10pOwoJCQl9CgkJCWVsc2UKCQkJewoJCQkJJHRoaXMtPnNldExpdmVNZXJjaGFudElkKCRjb25maWdbJ2xpdmVfbWVyY2hhbnRfaWQnXSk7CgkJCQkkdGhpcy0+c2V0TGl2ZVB1YmxpY0tleSgkY29uZmlnWydsaXZlX3B1YmxpY19rZXknXSk7CgkJCQkkdGhpcy0+c2V0TGl2ZVByaXZhdGVLZXkoJGNvbmZpZ1snbGl2ZV9wcml2YXRlX2tleSddKTsKCQkJfQoJCX0KCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCk7Cgl9CgoJCgkvKioKCSAqIENyZWF0ZXMgYSBjdXN0b21lciBpbiB0aGUgQnJhaW50cmVlIFN5c3RlbQoJICogCgkgKiBAcGFyYW0gTU1fVXNlciAkdXNlciBUaGUgTWVtYmVyTW91c2UgdXNlcgoJICogQHBhcmFtIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3MgVGhlIGJpbGxpbmcgYWRkcmVzcyBvZiB0aGUgY3VzdG9tZXIgY3JlZGl0IGNhcmQKCSAqIEBwYXJhbSBNTV9DYXJkSW5mbyAkY2FyZEluZm8gVGhlIGN1c3RvbWVyJ3MgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24KCSAqIEBwYXJhbSAkb3JpZ2luYWxPcmRlcklkIChvcHRpb25hbCkgVGhlIG9yZGVyIGlkIHRvIGxpbmsgdGhlIGxvY2FsIGNhcmQgb24gZmlsZSBpbmZvcm1hdGlvbiB0bwoJICogCgkgKiBAcmV0dXJuIE1NX1Jlc3BvbnNlIGluZGljYXRpbmcgd2hldGhlciB0aGUgY3VzdG9tZXIgd2FzIGNyZWF0ZWQgaW4gdGhlIEJyYWludHJlZSBzeXN0ZW0gc3VjY2Vzc2Z1bGx5CgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBjcmVhdGVDdXN0b21lcihNTV9Vc2VyICR1c2VyLCBNTV9DdXN0b21lckFkZHJlc3MgJGJpbGxpbmdBZGRyZXNzLCBNTV9DYXJkSW5mbyAkY2FyZEluZm8sICRvcmlnaW5hbE9yZGVySWQ9bnVsbCkKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJdHJ5IAoJCXsKCQkJJGN1c3RvbWVyRGF0YSA9IGFycmF5KAoJCQkJCSdmaXJzdE5hbWUnID0+ICR1c2VyLT5nZXRGaXJzdE5hbWUoKSwKCQkJCQknbGFzdE5hbWUnID0+ICR1c2VyLT5nZXRMYXN0TmFtZSgpLAoJCQkJCSdlbWFpbCcgPT4gJHVzZXItPmdldEVtYWlsKCksCgkJCQkJJ3Bob25lJyA9PiAkdXNlci0+Z2V0UGhvbmUoKSwKCQkJCQknY3JlZGl0Q2FyZCcgPT4gYXJyYXkoCgkJCQkJCQknbnVtYmVyJyA9PiAkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKSwKCQkJCQkJCSdleHBpcmF0aW9uRGF0ZScgPT4gJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKS4iLyIuJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uWWVhcigpLAoJCQkJCQkJJ2N2dicgPT4gJGNhcmRJbmZvLT5nZXRDVlYoKSwKCQkJCQkJCSdjYXJkaG9sZGVyTmFtZScgPT4gJHVzZXItPmdldEZ1bGxOYW1lKCksCgkJCQkJCQknYmlsbGluZ0FkZHJlc3MnID0+IGFycmF5KAoJCQkJCQkJCQknZmlyc3ROYW1lJyA9PiAkdXNlci0+Z2V0Rmlyc3ROYW1lKCksCgkJCQkJCQkJCSdsYXN0TmFtZScgPT4gJHVzZXItPmdldExhc3ROYW1lKCksCgkJCQkJCQkJCSdzdHJlZXRBZGRyZXNzJyA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpLAoJCQkJCQkJCQknZXh0ZW5kZWRBZGRyZXNzJyA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMigpLAoJCQkJCQkJCQknbG9jYWxpdHknID0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Q2l0eSgpLAoJCQkJCQkJCQkncmVnaW9uJyA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldFN0YXRlKCksCgkJCQkJCQkJCSdwb3N0YWxDb2RlJyA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKSwKCQkJCQkJCQkJJ2NvdW50cnlDb2RlQWxwaGEyJyA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKQoJCQkJCQkJKQoJCQkJCSkKCQkJKTsKCQkJCgkJCSRicmFpbnRyZWVDdXN0b21lclJlc3VsdCA9IEJyYWludHJlZV9DdXN0b21lcjo6Y3JlYXRlKCRjdXN0b21lckRhdGEpOwoJCQkKCQkJaWYoJGJyYWludHJlZUN1c3RvbWVyUmVzdWx0LT5zdWNjZXNzKQoJCQl7CgkJCQkvL2NyZWF0ZSBsaW5rIHRvIGJyYWludHJlZSBjdXN0b21lcgoJCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQlJBSU5UUkVFX0NVU1RPTUVSX0xJTktTLGFycmF5KCJicmFpbnRyZWVfY3VzdG9tZXJfaWQiPT4kYnJhaW50cmVlQ3VzdG9tZXJSZXN1bHQtPmN1c3RvbWVyLT5pZCwgIm1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkIj0+JHVzZXItPmdldElkKCkpKTsKCQkJCWlmKCEkcmVzdWx0KQoJCQkJewoJCQkJCS8vVE9ETzogZG8gc29tZXRoaW5nIGlmIHRoaXMgZmFpbHMgaW4gdGhlIGZ1dHVyZSwgaWUgbG9nLiBOb3QgYSBjcml0aWNhbCBlbm91Z2ggZXJyb3IgdG8gc3RvcCB0aGUgcHJvY2VzcywgYnV0IHdlIHdvdWxkIGJlIGludGVyZXN0ZWQgdG8ga25vdyBpdCBoYXBwZW5lZAoJCQkJfQoJCQkJCgkJCQkvL2NyZWF0ZSBlbnRyeSBpbiBjYXJkIG9uIGZpbGUgdGFibGUKCQkJCSRjb2ZEYXRhID0gYXJyYXkoInVzZXJfaWQiPT4kdXNlci0+Z2V0SWQoKSwgInBheW1lbnRfc2VydmljZV9pZCI9PiR0aGlzLT5nZXRJZCgpLCAicGF5bWVudF9zZXJ2aWNlX2lkZW50aWZpZXIiPT4kYnJhaW50cmVlQ3VzdG9tZXJSZXN1bHQtPmN1c3RvbWVyLT5pZCk7CgkJCQlpZiAoIWlzX251bGwoJG9yaWdpbmFsT3JkZXJJZCkpCgkJCQl7CgkJCQkJJGNvZkRhdGFbJ29yaWdpbmFsX29yZGVyX2lkJ10gPSAkb3JpZ2luYWxPcmRlcklkOwoJCQkJfQoJCQkJJHJlc3VsdCA9ICR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQ0FSRF9PTl9GSUxFLCAkY29mRGF0YSk7CgkJCQlpZighJHJlc3VsdCkKCQkJCXsKCQkJCQkvL1RPRE86IHNhbWUgZGVhbCBhcyBhYm92ZTogZG8gc29tZXRoaW5nIGlmIHRoaXMgZmFpbHMgaW4gdGhlIGZ1dHVyZSwgaWUgbG9nLiBOb3QgY3JpdGljYWwgZW5vdWdoIGVycm9yIHRvIHN0b3AgCgkJCQl9CgkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRicmFpbnRyZWVDdXN0b21lclJlc3VsdC0+Y3VzdG9tZXItPmlkKTsKCQkJfQoJCQllbHNlIAoJCQl7CgkJCQkkZXJyb3JzID0gIiI7CgkJCQlmb3JlYWNoKCRicmFpbnRyZWVDdXN0b21lclJlc3VsdC0+ZXJyb3JzLT5kZWVwQWxsKCkgQVMgJGVycm9yKSAKCQkJCXsKCQkJCQlpZighZW1wdHkoJGVycm9ycykpCgkJCQkJewoJCQkJCQkkZXJyb3JzIC49ICIsICI7CgkJCQkJfQoJCQkJCQoJICAJCQkJJGVycm9ycyAuPSAkZXJyb3ItPm1lc3NhZ2U7CgkJCQl9CgkJCQkKCQkJCWlmKCFlbXB0eSgkZXJyb3JzKSkKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCRlcnJvcnMsIE1NX1Jlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJZWxzZSAKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1Jlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGN1c3RvbWVyIiwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJCQl9CgkJCX0KCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUmVzcG9uc2UoJGUtPmdldE1lc3NhZ2UoKSwgTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJICogQ2hhcmdlIGFuIG9yZGVyCgkgKiAKCSAqIEBwYXJhbSBNTV9PcmRlciAkb3JkZXIgVGhlIG9yZGVyIHRvIGNoYXJnZQoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyBUaGUgY3JlZGl0IGNhcmQgaW5mb3JtYXRpb24gdG8gdXNlIGluIGNoYXJnaW5nIHRoZSBvcmRlcgoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHN0YXR1cyBvZiB0aGUgY2hhcmdlIGF0dGVtcHQKCSAqLwoJcHVibGljIGZ1bmN0aW9uIGNoYXJnZU9yZGVyKE1NX09yZGVyICRvcmRlciwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsICR2YWxpZGF0ZT10cnVlKSAKCXsgCgkJZ2xvYmFsICR3cGRiOwoJCQoJCXBhcmVudDo6Y2hhcmdlT3JkZXIoJG9yZGVyLCRjYXJkSW5mbywkdmFsaWRhdGUpOwoJCQoJCSR0cnlDYXJkT25GaWxlID0gaXNfbnVsbCgkY2FyZEluZm8pOwoJCQoJCWlmICghJHRyeUNhcmRPbkZpbGUpIAoJCXsKCQkJJGNhcmRWYWxpZGF0aW9uID0gJGNhcmRJbmZvLT52YWxpZGF0ZSgpOwoJCQlpZiAoJGNhcmRWYWxpZGF0aW9uICE9PSB0cnVlKQoJCQl7IAoJCQkJJG9yZGVyLT5zYXZlT3JkZXJTdGF0dXMoTU1fT3JkZXI6OiRFUlJPUl9GQUlMRUQpOwoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY2hhcmdlIG9yZGVyOiB7JGNhcmRWYWxpZGF0aW9ufSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCX0JCQkKCQkJCQkKCQkkYnJhaW50cmVlQ3VzdG9tZXJJZCA9ICR0aGlzLT5sb29rdXBDdXN0b21lcigkb3JkZXItPmdldEN1c3RvbWVyKCktPmdldElkKCkpOwoJCQoJCSRwcm9kdWN0SXRlbXMgPSAkb3JkZXItPmdldFByb2R1Y3RzKCk7CgkJaWYgKCRicmFpbnRyZWVDdXN0b21lcklkID09PSBmYWxzZSkKCQl7CgkJCWlmICgkdHJ5Q2FyZE9uRmlsZSkKCQkJeyAKCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQkkY2NSZXNwb25zZSA9ICR0aGlzLT5jcmVhdGVDdXN0b21lcigkb3JkZXItPmdldEN1c3RvbWVyKCksICRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKSwgJGNhcmRJbmZvLCAkb3JkZXItPmlkKTsKCQkJaWYgKE1NX1Jlc3BvbnNlOjppc0Vycm9yKCRjY1Jlc3BvbnNlKSkKCQkJeyAKCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IHskY2NSZXNwb25zZS0+bWVzc2FnZX0iLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJCX0KCQkJJGJyYWludHJlZUN1c3RvbWVySWQgPSAkY2NSZXNwb25zZS0+bWVzc2FnZTsKCQl9CgkJZWxzZSAKCQl7CgkJCWlmICghJHRyeUNhcmRPbkZpbGUpCgkJCXsKCQkJCS8vdGhlcmUgaXMgYSBjYXJkIG9uIGZpbGUsIGJ1dCBjcmVkaXQgY2FyZCBpbmZvIHdhcyBzZW50IGFzIHdlbGwuIFVwZGF0ZSB0aGUgY2FyZCBvbiBmaWxlIHRvIGJlIHRoZSBjYXJkIHRoYXQgd2FzIHNlbnQKCQkJCSRhUHJvZHVjdEl0ZW0gPSByZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQkJCSR1cGRhdGVSZXNwb25zZSA9ICR0aGlzLT51cGRhdGVTdWJzY3JpcHRpb25JbmZvKCRhUHJvZHVjdEl0ZW0sJGNhcmRJbmZvLCRvcmRlci0+Z2V0QmlsbGluZ0FkZHJlc3MoKSk7CgkJCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkdXBkYXRlUmVzcG9uc2UpKQoJCQkJeyAKCQkJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCQkJcmV0dXJuICR1cGRhdGVSZXNwb25zZTsKCQkJCX0KCQkJfQoJCX0KCgkJLy9ub3cgc2V0dXAgc2NoZWR1bGVzIGZvciB0aGUgcmVjdXJyaW5nIHByb2R1Y3RzCgkJJGNyZWF0ZVNjaGVkdWxlZFJlc3VsdCA9ICR0aGlzLT5jcmVhdGVTY2hlZHVsZXNGcm9tUHJvZHVjdHMoJHByb2R1Y3RJdGVtcyk7CgkJCgkJaWYoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY3JlYXRlU2NoZWR1bGVkUmVzdWx0KSkKCQl7IAoJCQkkb3JkZXItPnNhdmVPcmRlclN0YXR1cyhNTV9PcmRlcjo6JEVSUk9SX0ZBSUxFRCk7CgkJCXJldHVybiAkY3JlYXRlU2NoZWR1bGVkUmVzdWx0OwoJCX0KCQkKCQlpZiAoJG9yZGVyLT5nZXRUb3RhbCgpID4gMC4wMCkKCQl7CgkJCSRjaGFyZ2VSZXNwb25zZSA9ICR0aGlzLT5zZW5kQnJhaW50cmVlQ2hhcmdlKCRvcmRlci0+Z2V0VG90YWwoKSwgJG9yZGVyLT5nZXRPcmRlck51bWJlcigpLCAkYnJhaW50cmVlQ3VzdG9tZXJJZCk7CgkJCQoJCQlpZiAoTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNFcnJvcigkY2hhcmdlUmVzcG9uc2UpIHx8IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OmlzRmFpbGVkKCRjaGFyZ2VSZXNwb25zZSkpCgkJCXsKCQkJCSRjcmVhdGVkU3Vic2NyaXB0aW9ucyA9ICRjcmVhdGVTY2hlZHVsZWRSZXN1bHQtPm1lc3NhZ2U7CgkJCQlpZiAoaXNfYXJyYXkoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKSAmJiAoY291bnQoJGNyZWF0ZWRTdWJzY3JpcHRpb25zKSA+IDApKQoJCQkJewoJCQkJCSR0aGlzLT5jYW5jZWxTY2hlZHVsZWRTdWJzY3JpcHRpb25zKCRjcmVhdGVkU3Vic2NyaXB0aW9ucyk7CgkJCQl9ICAKCQkJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokRVJST1JfRkFJTEVEKTsKCQkJCXJldHVybiAkY2hhcmdlUmVzcG9uc2U7CgkJCX0KCQkJCgkJCS8vbG9nIHRvIHRyYW5zYWN0aW9ucyB0YWJsZXMKCQkJJHByb2R1Y3RJdGVtcyA9ICRvcmRlci0+Z2V0UHJvZHVjdHMoKTsKCQkJJG9yZGVySXRlbUlkID0gbnVsbDsKCQkJaWYgKGNvdW50KCRwcm9kdWN0SXRlbXMpID09IDEpCgkJCXsKCQkJCSRvcmRlckl0ZW0gPSByZXNldCgkcHJvZHVjdEl0ZW1zKTsKCQkJCSRvcmRlckl0ZW1JZCA9ICRvcmRlckl0ZW0tPmdldElkKCk7CgkJCX0KCQkJCgkJCSRjaGFyZ2VPYmplY3QgPSAkY2hhcmdlUmVzcG9uc2UtPmdldE1lc3NhZ2UoKTsKCQkJCgkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uID0gIlBheW1lbnQgZm9yIG9yZGVyIyB7JG9yZGVyLT5nZXRPcmRlck51bWJlcigpfSI7CgkJCSR0cmFuc2FjdGlvbkRhdGUgPSBNTV9VdGlsczo6Z2V0Q3VycmVudFRpbWUoKTsKCQkJJGxhc3RGb3VyID0gJGNoYXJnZU9iamVjdC0+dHJhbnNhY3Rpb24tPmNyZWRpdENhcmRbImxhc3Q0Il07CgkJCSRsYXN0Rm91ciA9IHN1YnN0cigkbGFzdEZvdXIsIDAsIDQpOwoJCQkKCQkJJGluc2VydERhdGEgPSBhcnJheSggIm9yZGVyX2lkIiAgICAgICAgICA9PiAkb3JkZXItPmdldElkKCksCgkJCQkJCQkJICJvcmRlcl9pdGVtX2lkIiAgICAgPT4gJG9yZGVySXRlbUlkLAoJCQkJCQkJCSAiY2hhcmdlX2lkIiAgICAgCSA9PiAkY2hhcmdlT2JqZWN0LT50cmFuc2FjdGlvbi0+aWQsCgkJCQkJCQkJICJwYXltZW50X3Rva2VuIiAgICAgPT4gJGNoYXJnZU9iamVjdC0+dHJhbnNhY3Rpb24tPmNyZWRpdENhcmRbInRva2VuIl0sCgkJCQkJCQkJICJsYXN0X2ZvdXIiICAgICAgICAgPT4gJGxhc3RGb3VyLAoJCQkJCQkJCSAiYW1vdW50IiAgICAgICAgICAgID0+ICRvcmRlci0+Z2V0VG90YWwoKSwKCQkJCQkJCQkgInRyYW5zYWN0aW9uX2RhdGUiICA9PiAkdHJhbnNhY3Rpb25EYXRlCgkJCSk7CgkJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQlJBSU5UUkVFX0NIQVJHRVMsJGluc2VydERhdGEpOwoJCQkkYnJhaW50cmVlQ2hhcmdlSWQgPSAkd3BkYi0+aW5zZXJ0X2lkOwoJCQkKCQkJLy9ub3cgbG9nIHRoZSBwYXltZW50IGluIHRoZSB0cmFuc2FjdGlvbnMgdGFibGUKCQkJaWYgKCR0aGlzLT50ZXN0TW9kZSkKCQkJewoJCQkJJHJlcyA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUZXN0VHJhbnNhY3Rpb25FbnRyeSgkb3JkZXItPmdldElkKCksICRvcmRlckl0ZW1JZCwgJG9yZGVyLT5nZXRUb3RhbCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksICR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUEFZTUVOVCx0cnVlLCR0aGlzLT5pZCwkYnJhaW50cmVlQ2hhcmdlSWQsJHRyYW5zYWN0aW9uRGF0ZSk7CgkJCX0KCQkJZWxzZSAKCQkJewoJCQkJJHJlcyA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmRlci0+Z2V0SWQoKSwgJG9yZGVySXRlbUlkLCAkb3JkZXItPmdldFRvdGFsKCksICRvcmRlci0+Z2V0Q3VycmVuY3koKSwgJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24sIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9QQVlNRU5ULHRydWUsJHRoaXMtPmlkLCRicmFpbnRyZWVDaGFyZ2VJZCwkdHJhbnNhY3Rpb25EYXRlKTsKCQkJfQoJCX0KCQkKCQkvL3JlYWNoaW5nIHRoaXMgcG9pbnQgbWVhbnMgdGhlIHN1YnNjcmlwdGlvbnMgd2VyZSBzY2hlZHVsZWQgYW5kIHRoZSBpbml0aWFsIGNoYXJnZSB3YXMgc3VjY2Vzc2Z1bAoJCSRvcmRlci0+c2F2ZU9yZGVyU3RhdHVzKE1NX09yZGVyOjokUEFJRF9DT01QTEVURSk7CgkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7Cgl9CQoJCgkKCS8qKgoJICogU2VuZCBhIGNoYXJnZSB0byBCcmFpbnRyZWUsIGFuZCByZXR1cm5zIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSB1bmZpbHRlcmVkIHJlc3VsdC4KCSAqIAoJICogQHBhcmFtIGludGVnZXIgJGFtb3VudCBUaGUgYW1vdW50IHRvIGNoYXJnZSBpbiBjZW50cy4gSWYgYSBhbW91bnQgaXMgZ2l2ZW4gdGhhdCBpcyBhIGZsb2F0LCBpdCBpcyBhc3N1bWVkIHRvIGJlIGRvbGxhcnMgYW5kIG11bHRpcGxpZWQgYnkgMTAwIHRvIGdldCB0aGUgaW50ZWdlciB2YWx1ZQoJICogQHBhcmFtIHN0cmluZyAkb3JkZXJOdW1iZXIgVGhlIG9yZGVyIG51bWJlciB0byBhdHRhY2ggdG8gdGhlIGNoYXJnZQoJICogQHBhcmFtIHN0cmluZyAkYnJhaW50cmVlQ3VzdG9tZXJJZCAob3B0aW9uYWwpIFRoZSBhbHBoYW51bWVyaWMgQnJhaW50cmVlIGN1c3RvbWVyIGlkIHRvIGNoYXJnZS4gRWl0aGVyIGN1c3RvbWVyIG9yIGNhcmRJbmZvIHNob3VsZCBiZSBzdXBwbGllZCwgYnV0IG5vdCBib3RoCgkgKiBAcGFyYW0gc3RyaW5nICRjYXJkSW5mbyAob3B0aW9uYWwpIFRoZSBjcmVkaXQgY2FyZCB0byBjaGFyZ2UuIEVpdGhlciBjdXN0b21lciBvciBjYXJkSW5mbyBzaG91bGQgYmUgc3VwcGxpZWQsIGJ1dCBub3QgYm90aAoJICogQHBhcmFtIHN0cmluZyAkY3VycmVuY3kgKG9wdGlvbmFsKSBUaGUgY3VycmVuY3kgZGVzaWduYXRpb24gdG8gc2VuZC4gRGVmYXVsdHMgdG8gInVzZCIKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIE9uIHN1Y2Nlc3MsIGNvbnRhaW5zIHRoZSBicmFpbnRyZWUgY2hhcmdlIG9iamVjdCByZXR1cm5lZCBieSB0aGUgZ2F0ZXdheSwgb24gZmFpbHVyZSBjb250YWlucyBhbiBlcnJvciBtZXNzYWdlCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBzZW5kQnJhaW50cmVlQ2hhcmdlKCRhbW91bnQsICRvcmRlck51bWJlciwgJGJyYWludHJlZUN1c3RvbWVySWQ9bnVsbCwgJGNhcmRJbmZvPW51bGwsICRiaWxsaW5nQWRkcmVzcz1udWxsLCAkY3VycmVuY3k9InVzZCIpCgl7CgkJaWYgKGlzX251bGwoJGJyYWludHJlZUN1c3RvbWVySWQpICYmIGlzX251bGwoJGNhcmRJbmZvKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBjaGFyZ2U6IE5vIHBheW1lbnQgbWV0aG9kIHdhcyBwcm92aWRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKGlzX251bGwoJGJyYWludHJlZUN1c3RvbWVySWQpICYmICFpc19udWxsKCRjYXJkSW5mbykgJiYgaXNfbnVsbCgkYmlsbGluZ0FkZHJlc3MpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogTm8gYmlsbGluZyBhZGRyZXNzIHdhcyBwcm92aWRlZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJaWYgKCFpc19udW1lcmljKCRhbW91bnQpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gY3JlYXRlIGNoYXJnZTogUmVjZWl2ZWQgYSBub24tbnVtZXJpYyBhbW91bnQgdG8gY2hhcmdlIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkY2hhcmdlRGF0YSA9IGFycmF5KCJhbW91bnQiPT4kYW1vdW50LAoJCQkib3JkZXJJZCI9PiRvcmRlck51bWJlcgkKCQkpOwoJCQoJCWlmICghaXNfbnVsbCgkY2FyZEluZm8pKQoJCXsKCQkJCgkJCSRjaGFyZ2VEYXRhWydjcmVkaXRDYXJkJ10gPSBhcnJheSgibnVtYmVyIiAgIAk9PiAkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKSwKCQkJCQkJCQkgCQkiZXhwaXJhdGlvbk1vbnRoIiAJPT4gJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uTW9udGgoKSwKCQkJCQkJCQkgCQkiZXhwaXJhdGlvblllYXIiICAJPT4gJGNhcmRJbmZvLT5nZXRFeHBpcmF0aW9uWWVhcigpLAoJCQkJCQkJCQkJImN2diIgICAgICAgCQk9PiAkY2FyZEluZm8tPmdldENWVigpKTsKCQkJCgkJCSRjaGFyZ2VEYXRhWydiaWxsaW5nJ10gPSBhcnJheSgiZmlyc3ROYW1lIiAJCT0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0Rmlyc3ROYW1lKCksCiAgICAJCQkJCQkJCQkibGFzdE5hbWUiIAkJCT0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0TGFzdE5hbWUoKSwKCQkJCQkJCQkJCSJzdHJlZXRBZGRyZXNzIgkJPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTEoKSwKCQkJCQkJCQkJCSJleHRlbmRlZEFkZHJlc3MiICAgPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRBZGRyZXNzTGluZTIoKSwKCQkJCQkJCQkJCSJwb3N0YWxDb2RlIgkgICAgPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRQb3N0YWxDb2RlKCksCgkJCQkJCQkJCQkibG9jYWxpdHkiCQkJPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRDaXR5KCksCgkJCQkJCQkJCQkicmVnaW9uIiAgICAJCT0+ICRiaWxsaW5nQWRkcmVzcy0+Z2V0U3RhdGUoKSwKCQkJCQkJCQkJCSJjb3VudHJ5Q29kZUFscGhhMiIgPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRDb3VudHJ5KCkpOwoJCQkKCQkJJGNoYXJnZURhdGFbJ29wdGlvbnMnXSA9IGFycmF5KCJzdWJtaXRGb3JTZXR0bGVtZW50IgkJCQk9PiB0cnVlLAogICAgCQkJCQkJCQkJCSJzdG9yZUluVmF1bHQiIAkJCQkJCT0+IHRydWUsCgkJCQkJCQkJCQkJImFkZEJpbGxpbmdBZGRyZXNzVG9QYXltZW50TWV0aG9kIgk9PiB0cnVlKTsKCQkJCgkJfQoJCWVsc2UgCgkJeyAKCQkJJGNoYXJnZURhdGFbJ2N1c3RvbWVySWQnXSA9ICRicmFpbnRyZWVDdXN0b21lcklkOwoJCQkkY2hhcmdlRGF0YVsnb3B0aW9ucyddID0gYXJyYXkoInN1Ym1pdEZvclNldHRsZW1lbnQiID0+IHRydWUpOwoJCX0KCQkKCQl0cnkgCgkJeyAKCQkJJGNoYXJnZVJlc3VsdCA9IEJyYWludHJlZV9UcmFuc2FjdGlvbjo6c2FsZSgkY2hhcmdlRGF0YSk7CgkJCQoJCQlpZigkY2hhcmdlUmVzdWx0LT5zdWNjZXNzKQoJCQl7CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoJGNoYXJnZVJlc3VsdCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkc3RhdHVzID0gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEZBSUxFRDsKCQkJCQoJCQkJJGVycm9ycyA9ICIiOwoJCQkJZm9yZWFjaCgkY2hhcmdlUmVzdWx0LT5lcnJvcnMtPmRlZXBBbGwoKSBBUyAkZXJyb3IpCgkJCQl7CgkJCQkJaWYoIWVtcHR5KCRlcnJvcnMpKQoJCQkJCXsKCQkJCQkJJGVycm9ycyAuPSAiLCAiOwoJCQkJCX0KCQkJCQkJCgkJCQkJJGVycm9ycyAuPSAkZXJyb3ItPm1lc3NhZ2U7CgkJCQl9CgkJCQoJCQkJaWYoIWVtcHR5KCRlcnJvcnMpKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JzLCAkc3RhdHVzKTsKCQkJCX0KCQkJCWVsc2UKCQkJCXsKCQkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBjcmVhdGUgY2hhcmdlIiwgJHN0YXR1cyk7CgkJCQl9CgkJCX0KCQl9CgkJY2F0Y2ggKEV4Y2VwdGlvbiAkZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIGNyZWF0ZSBjaGFyZ2UiLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCX0KCQoJCglwcm90ZWN0ZWQgZnVuY3Rpb24gZXhlY3V0ZVN1YnNjcmlwdGlvblBheW1lbnQoTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0sICRjdXJyZW50UmViaWxsTnVtYmVyKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19DQU5DRUxMRUQpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlN1YnNjcmlwdGlvbiBmb3Igb3JkZXIgaXRlbSBpZCAiLiRvcmRlckl0ZW0tPmdldElkKCkuIiB3YXMgbm90IGNoYXJnZWQgYmVjYXVzZSB0aGUgaXRlbSBpcyBjYW5jZWxsZWQiKTsKCQl9CgkJCgkJaWYgKCRvcmRlckl0ZW0tPmdldFN0YXR1cygpID09IE1NX09yZGVySXRlbTo6JFNUQVRVU19SRUNVUlJJTkdfQ09NUExFVEUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlN1YnNjcmlwdGlvbiBmb3Igb3JkZXIgaXRlbSBpZCAiLiRvcmRlckl0ZW0tPmdldElkKCkuIiB3YXMgbm90IGNoYXJnZWQgYmVjYXVzZSBiaWxsaW5nIGlzIGNvbXBsZXRlIGZvciB0aGlzIGl0ZW0iKTsKCQl9CgkJCgkJJG9yZGVyID0gbmV3IE1NX09yZGVyKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJCgkJJGJyYWludHJlZUN1c3RvbWVySWQgPSAkdGhpcy0+bG9va3VwQ3VzdG9tZXIoTU1fT3JkZXI6OmdldFVzZXJJZEJ5T3JkZXJJZCgkb3JkZXItPmlkKSk7CgkJaWYgKCRicmFpbnRyZWVDdXN0b21lcklkID09PSBmYWxzZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiSW52YWxpZCBjYXJkIG9uIGZpbGUgZm9yIHVzZXIgaWQgeyRwYXltZW50RXZlbnQtPmdldFVzZXJJZCgpfSIsTU1fUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoKCQkkZGVzY3JpcHRpb24gPSAiUGF5bWVudCBmb3Igb3JkZXIjIHskb3JkZXItPmdldE9yZGVyTnVtYmVyKCl9LCBpdGVtOiB7JG9yZGVySXRlbS0+Z2V0RGVzY3JpcHRpb24oKX0iOwoJCSRjaGFyZ2VSZXNwb25zZSA9ICR0aGlzLT5zZW5kQnJhaW50cmVlQ2hhcmdlKCRvcmRlckl0ZW0tPmdldFJlY3VycmluZ0Ftb3VudCgpLCAkb3JkZXItPmdldE9yZGVyTnVtYmVyKCksICRicmFpbnRyZWVDdXN0b21lcklkKTsKCQoJCWlmIChNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjppc0Vycm9yKCRjaGFyZ2VSZXNwb25zZSkgfHwgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6aXNGYWlsZWQoJGNoYXJnZVJlc3BvbnNlKSkKCQl7CgkJCSRvcmRlckl0ZW0tPnNldFN0YXR1cyhNTV9PcmRlckl0ZW06OiRTVEFUVVNfUkVDVVJSSU5HX1JFQklMTF9GQUlMRUQpOwoJCQkkb3JkZXJJdGVtLT5jb21taXREYXRhKCk7CgkJCXBhcmVudDo6aGFuZGxlT3ZlcmR1ZVN1YnNjcmlwdGlvbkl0ZW0oJG9yZGVySXRlbSk7CgkJCXJldHVybiAkY2hhcmdlUmVzcG9uc2U7CgkJfQoJCQoJCQoJCS8vbG9nIHN1Y2Nlc3NmdWwgdHJhbnNhY3Rpb24KCQkkY2hhcmdlT2JqZWN0ID0gJGNoYXJnZVJlc3BvbnNlLT5nZXRNZXNzYWdlKCk7CgkJJHRyYW5zYWN0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCSRpbnNlcnREYXRhID0gYXJyYXkoICJvcmRlcl9pZCIgPT4gJG9yZGVyLT5nZXRJZCgpLAoJCQkJIm9yZGVyX2l0ZW1faWQiICAgICA9PiAkb3JkZXJJdGVtLT5nZXRJZCgpLAoJCQkJImNoYXJnZV9pZCIgICAgIAk9PiAkY2hhcmdlT2JqZWN0LT50cmFuc2FjdGlvbi0+aWQsCgkJCQkicGF5bWVudF90b2tlbiIgICAgID0+ICRjaGFyZ2VPYmplY3QtPnRyYW5zYWN0aW9uLT5jcmVkaXRDYXJkWyJ0b2tlbiJdLAoJCQkJImxhc3RfZm91ciIgICAgICAgICA9PiAkY2hhcmdlT2JqZWN0LT50cmFuc2FjdGlvbi0+Y3JlZGl0Q2FyZFsibGFzdDQiXSwKCQkJCSJhbW91bnQiICAgICAgICAgICAgPT4gJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCksCgkJCQkidHJhbnNhY3Rpb25fZGF0ZSIgID0+ICR0cmFuc2FjdGlvbkRhdGUpOwoJCQoJCSR3cGRiLT5pbnNlcnQoTU1fVEFCTEVfQlJBSU5UUkVFX0NIQVJHRVMsJGluc2VydERhdGEpOwoJCSRicmFpbnRyZWVUYWJsZUNoYXJnZUlkID0gJHdwZGItPmluc2VydF9pZDsKCQkKCQlpZiAoJHRoaXMtPnRlc3RNb2RlKQoJCXsKCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSwgJG9yZGVySXRlbS0+Z2V0SWQoKSwgJG9yZGVySXRlbS0+Z2V0UmVjdXJyaW5nQW1vdW50KCksICRvcmRlci0+Z2V0Q3VycmVuY3koKSwgJGRlc2NyaXB0aW9uLCBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVDVVJSSU5HX1BBWU1FTlQsdHJ1ZSwkdGhpcy0+Z2V0SWQoKSwkYnJhaW50cmVlVGFibGVDaGFyZ2VJZCk7CgkJfQoJCWVsc2UgCgkJewoJCQlNTV9UcmFuc2FjdGlvbkxvZzo6Y3JlYXRlVHJhbnNhY3Rpb25FbnRyeSgkb3JkZXJJdGVtLT5nZXRPcmRlcklkKCksICRvcmRlckl0ZW0tPmdldElkKCksICRvcmRlckl0ZW0tPmdldFJlY3VycmluZ0Ftb3VudCgpLCAkb3JkZXItPmdldEN1cnJlbmN5KCksICRkZXNjcmlwdGlvbiwgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5ULHRydWUsJHRoaXMtPmdldElkKCksJGJyYWludHJlZVRhYmxlQ2hhcmdlSWQpOwoJCX0KCgkJLy8gc2NoZWR1bGUgYW5vdGhlciBwYXltZW50IGlmIG5lY2Vzc2FyeQoJCXJldHVybiAkdGhpcy0+c2NoZWR1bGVOZXh0UGF5bWVudEZvckV4aXN0aW5nU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0sICRvcmRlci0+Z2V0Q3VzdG9tZXIoKSwgJGN1cnJlbnRSZWJpbGxOdW1iZXIpOwoJfQoJCgkKCS8qKgoJICogTG9va3MgdXAgdGhlIEJyYWludHJlZSBjdXN0b21lciBpZCBsaW5rZWQgdG8gYSBNZW1iZXJNb3VzZSB1c2VyCgkgKiAKCSAqIEBwYXJhbSBpbnQgJHVzZXJJZCBUaGUgTWVtYmVyTW91c2UgdXNlciBpZAoJICogQHJldHVybiBUaGUgKHN0cmluZykgQnJhaW50cmVlIGN1c3RvbWVyIGlkIGlmIGZvdW5kLCBib29sZWFuIGZhbHNlIGlmIG5vdCBmb3VuZCBvciBlcnJvcmVkCgkgKi8KCXByb3RlY3RlZCBmdW5jdGlvbiBsb29rdXBDdXN0b21lcigkdXNlcklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkbG9va3VwU1FMID0gIlNFTEVDVCBicmFpbnRyZWVfY3VzdG9tZXJfaWQgZnJvbSAiLk1NX1RBQkxFX0JSQUlOVFJFRV9DVVNUT01FUl9MSU5LUy4iIFdIRVJFIG1lbWJlcm1vdXNlX2N1c3RvbWVyX2lkPSd7JHVzZXJJZH0nIjsKCQkkcm93ID0gJHdwZGItPmdldF9yb3coJGxvb2t1cFNRTCk7CgkJaWYgKGlzX251bGwoJHJvdykpCgkJewoJCQlyZXR1cm4gZmFsc2U7CgkJfQoJCXJldHVybiAkcm93LT5icmFpbnRyZWVfY3VzdG9tZXJfaWQ7Cgl9CgkKCQoJLyoqCgkgKiBVcGRhdGVzIHRoZSBwYXltZW50IGdhdGV3YXkgd2l0aCBuZXcgaW5mb3JtYXRpb24sIGFuZCB1cGRhdGUgdGhlIE1lbWJlck1vdXNlIG9yZGVyIHdpdGggdGhlIG5ldyBiaWxsaW5nIGFkZHJlc3MKCSAqIEBzZWUgTU1fUGF5bWVudFNlcnZpY2U6OnVwZGF0ZVN1YnNjcmlwdGlvbkluZm8oKQoJICogCgkgKiBAcGFyYW0gTU1fT3JkZXJJdGVtICRvcmRlckl0ZW0gVGhlIG9yZGVyIGl0ZW0gcmVwcmVzZW50aW5nIHRoZSBzdWJzY3JpcHRpb24gYmVpbmcgdXBkYXRlZAoJICogQHBhcmFtIE1NX0NhcmRJbmZvICRjYXJkSW5mbyAob3B0aW9uYWwpIFRoZSBuZXcgY2FyZCB0byBzdG9yZSBvbiBmaWxlCgkgKiBAcGFyYW0gTU1fQ3VzdG9tZXJBZGRyZXNzICRiaWxsaW5nQWRkcmVzcyBUaGUgbmV3IGJpbGxpbmcgYWRkcmVzcyB0byBzdG9yZS4gU2hvdWxkIGJlIHRoZSBhZGRyZXNzIGFzc29jaWF0ZWQgd2l0aCB0aGUgY3VzdG9tZXIncyBjYXJkIG9uIGZpbGUKCSAqIAoJICogQHJldHVybiBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlIHJlcHJlc2VudGluZyBzdWNjZXNzIG9yIGVycm9yLiBDb250YWlucyBhIGRlc2NyaXB0aXZlIGVycm9yIG1lc3NhZ2Ugb24gZXJyb3IKCSAqIAoJICovCglwdWJsaWMgZnVuY3Rpb24gdXBkYXRlU3Vic2NyaXB0aW9uSW5mbyhNTV9PcmRlckl0ZW0gJG9yZGVySXRlbSwgTU1fQ2FyZEluZm8gJGNhcmRJbmZvPW51bGwsIE1NX0N1c3RvbWVyQWRkcmVzcyAkYmlsbGluZ0FkZHJlc3M9bnVsbCkgCgl7CgkJZ2xvYmFsICR3cGRiOwoJCQoJCWlmIChpc19udWxsKCRjYXJkSW5mbykgfHwgaXNfbnVsbCgkYmlsbGluZ0FkZHJlc3MpKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvcjogQm90aCBhIGNyZWRpdCBjYXJkIGFuZCBhIGJpbGxpbmcgYWRkcmVzcyBtdXN0IGJlIHN1cHBsaWVkIHRvIHVwZGF0ZSBhIHN1YnNjcmlwdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGNhcmRWYWxpZCA9ICRjYXJkSW5mby0+dmFsaWRhdGUoKTsKCQlpZiAoJGNhcmRWYWxpZCAhPT0gdHJ1ZSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3I6IHskY2FyZFZhbGlkfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGN1c3RvbWVySWQgPSBNTV9PcmRlcjo6Z2V0VXNlcklkQnlPcmRlcklkKCRvcmRlckl0ZW0tPmdldE9yZGVySWQoKSk7CgkJaWYgKCRjdXN0b21lcklkID09IC0xKQoJCXsKCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbjogY3VzdG9tZXIgd2FzIG5vdCBmb3VuZCIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQl9CgkJCgkJJGJyYWludHJlZUN1c3RvbWVySWQgPSAkdGhpcy0+bG9va3VwQ3VzdG9tZXIoJGN1c3RvbWVySWQpOwoJCWlmICgkYnJhaW50cmVlQ3VzdG9tZXJJZCA9PT0gZmFsc2UpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byB1cGRhdGUgc3Vic2NyaXB0aW9uOiBjdXN0b21lciB3YXMgbm90IGZvdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkkdXNlciA9IG5ldyBNTV9Vc2VyKCRjdXN0b21lcklkKTsKCQl0cnkgCgkJewoJCQkkYnJhaW50cmVlQ3VzdG9tZXIgPSBCcmFpbnRyZWVfQ3VzdG9tZXI6OmZpbmQoJGJyYWludHJlZUN1c3RvbWVySWQpOwoJCQkkY3JlZGl0Q2FyZFRva2VuID0gJGJyYWludHJlZUN1c3RvbWVyLT5jcmVkaXRDYXJkc1swXS0+dG9rZW47CgkJCQoJCQkkcmVzdWx0ID0gQnJhaW50cmVlX0NyZWRpdENhcmQ6OnVwZGF0ZSgKCQkJCQkkY3JlZGl0Q2FyZFRva2VuLAoJCQkJCWFycmF5KAoJCQkJCQknbnVtYmVyJyA9PiAkY2FyZEluZm8tPmdldENhcmROdW1iZXIoKSwKCQkJCQkJJ2V4cGlyYXRpb25EYXRlJyA9PiAkY2FyZEluZm8tPmdldEV4cGlyYXRpb25Nb250aCgpLiIvIi4kY2FyZEluZm8tPmdldEV4cGlyYXRpb25ZZWFyKCksCgkJCQkJCSdjdnYnID0+ICRjYXJkSW5mby0+Z2V0Q1ZWKCksCgkJCQkJCSdiaWxsaW5nQWRkcmVzcycgCT0+IGFycmF5KAoJCQkJCQkJInN0cmVldEFkZHJlc3MiCQk9PiAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMSgpLAoJCQkJCQkJImV4dGVuZGVkQWRkcmVzcyIgICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldEFkZHJlc3NMaW5lMigpLAoJCQkJCQkJInBvc3RhbENvZGUiCSAgICA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldFBvc3RhbENvZGUoKSwKCQkJCQkJCSJsb2NhbGl0eSIJCQk9PiAkYmlsbGluZ0FkZHJlc3MtPmdldENpdHkoKSwKCQkJCQkJCSJyZWdpb24iICAgIAkJPT4gJGJpbGxpbmdBZGRyZXNzLT5nZXRTdGF0ZSgpLAoJCQkJCQkJImNvdW50cnlDb2RlQWxwaGEyIiA9PiAkYmlsbGluZ0FkZHJlc3MtPmdldENvdW50cnkoKSwKCQkJCQkJCSdvcHRpb25zJyA9PiBhcnJheSgKCQkJCQkJCQkndXBkYXRlRXhpc3RpbmcnID0+IHRydWUKCQkJCQkJCSkKCQkJCQkpCgkJCSkpOwoJCQkKCQkJaWYoJHJlc3VsdC0+c3VjY2VzcykKCQkJewoJCQkJcGFyZW50Ojp1cGRhdGVTdWJzY3JpcHRpb25JbmZvKCRvcmRlckl0ZW0sJGNhcmRJbmZvLCRiaWxsaW5nQWRkcmVzcyk7CgkJCQlpZiAoJG9yZGVySXRlbS0+Z2V0U3RhdHVzKCkgPT0gTU1fT3JkZXJJdGVtOjokU1RBVFVTX1JFQ1VSUklOR19SRUJJTExfRkFJTEVEKQoJCQkJewoJCQkJCXJldHVybiAkdGhpcy0+cmVzdW1lU3Vic2NyaXB0aW9uKCRvcmRlckl0ZW0pOwoJCQkJfQoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCk7CgkJCX0KCQkJZWxzZQoJCQl7CgkJCQkkZXJyb3JzID0gIiI7CgkJCQlmb3JlYWNoKCRyZXN1bHQtPmVycm9ycy0+ZGVlcEFsbCgpIEFTICRlcnJvcikKCQkJCXsKCQkJCQlpZighZW1wdHkoJGVycm9ycykpCgkJCQkJewoJCQkJCQkkZXJyb3JzIC49ICIsICI7CgkJCQkJfQoJCQkJCQkKCQkJCQkkZXJyb3JzIC49ICRlcnJvci0+bWVzc2FnZTsKCQkJCX0KCQkJCQoJCQkJaWYoIWVtcHR5KCRlcnJvcnMpKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgkZXJyb3JzLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHVwZGF0ZSBjcmVkaXQgY2FyZCBvbiBzdWJzY3JpcHRpb24iLCBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byB1cGRhdGUgc3Vic2NyaXB0aW9uOiAiLiRlLT5nZXRNZXNzYWdlKCksIE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJfQoJCgkKCS8qKgoJICogUmVmdW5kcyBhIHRyYW5zYWN0aW9uCgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICR0cmFuc2FjdGlvbklkIFRoZSBNZW1iZXJNb3VzZSB0cmFuc2FjdGlvbiB0byByZWZ1bmQKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3MsIGZhaWx1cmUsIG9yIGVycm9yCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiByZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCkKCXsKCQlyZXR1cm4gJHRoaXMtPl9yZWZ1bmRUcmFuc2FjdGlvbigkdHJhbnNhY3Rpb25JZCx0cnVlKTsKCX0KCQoJCgkvKioKCSAqIEludGVybmFsIHJlZnVuZCBtZXRob2QgdGhhdCBhbGxvd3MgYSByZWZ1bmQgdG8gYmUgcHJvY2Vzc2VkIHRoZSBzYW1lIHdheSwgZXZlbiBpZiBpdCBpcyBpbml0aWF0ZWQgb24gQnJhaW50cmVlIGFuZCBzZW50IHRvIHVzIHZpYSB3ZWJob29rCgkgKiAKCSAqIEBwYXJhbSBpbnRlZ2VyICR0cmFuc2FjdGlvbklkIFRoZSBpZCBvZiB0aGUgTWVtYmVyTW91c2UgdHJhbnNhY3Rpb24gYmVpbmcgcmVmdW5kZWQKCSAqIEBwYXJhbSBib29sZWFuICRzaG91bGRBdHRlbXB0R2F0ZXdheVJlZnVuZCAob3B0aW9uYWwpIEluZGljYXRlcyB3aGV0aGVyIHRoZSBtZXRob2Qgc2hvdWxkIGF0dGVtcHQgdG8gaXNzdWUgYSByZWZ1bmQgdGhyb3VnaCB0aGUgQnJhaW50cmVlIGFwaS4gSWYgQnJhaW50cmVlIG5vdGlmaWVzIHVzIHZpYSB3ZWJob29rLCB0aGUgY2hhcmdlIGlzIGFscmVhZHkgcmVmdW5kZWQsIHNvIHRoaXMgc2hvdWxkIGJlIGZhbHNlCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gX3JlZnVuZFRyYW5zYWN0aW9uKCR0cmFuc2FjdGlvbklkLCRzaG91bGRBdHRlbXB0R2F0ZXdheVJlZnVuZD10cnVlKSAKCXsKCQlnbG9iYWwgJHdwZGI7CgkJCgkJLy9tYWtlIHN1cmUgd2UgaGF2ZSBhIHZhbGlkIHRyYW5zYWN0aW9uIGlkCgkJaWYgKGVtcHR5KCR0cmFuc2FjdGlvbklkKSkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kLCBpbnZhbGlkIHRyYW5zYWN0aW9uIGlkIHN1cHBsaWVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQkvL21ha2Ugc3VyZSB0aGUgdHJhbnNhY3Rpb24gZXhpc3RzCgkJJHRyYW5zYWN0aW9uUm93ID0gJHdwZGItPmdldF9yb3coJHdwZGItPnByZXBhcmUoIlNFTEVDVCAqIGZyb20gIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiB3aGVyZSBpZCA9ICVzIiwkdHJhbnNhY3Rpb25JZCkpOwoJCWlmIChpc19udWxsKCR0cmFuc2FjdGlvblJvdykpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVuYWJsZSB0byBwcm9jZXNzIHJlZnVuZCwgdHJhbnNhY3Rpb24gZG9lcyBub3QgZXhpc3QiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vbWFrZSBzdXJlIGl0cyBub3QgYWxyZWFkeSByZWZ1bmRlZAoJCWlmICghaXNfbnVsbCgkdHJhbnNhY3Rpb25Sb3ctPnJlZnVuZF9pZCkpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlRyYW5zYWN0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVmdW5kZWQiLE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2U6OiRFUlJPUik7CgkJfQoJCQoJCS8vZGV0ZXJtaW5lIHdoZXJlIHRoZSB0cmFuc2FjdGlvbiBpbmZvcm1hdGlvbiBpcyBzdG9yZWQgYmFzZWQgb24gdGhlIHR5cGUKCQkkdHJhbnNhY3Rpb25BbW91bnQgPSBhYnMoJHRyYW5zYWN0aW9uUm93LT5hbW91bnQpOwoJCSRnYXRld2F5UmVmdW5kUmVxdWlyZWQgPSBmYWxzZTsKCQlzd2l0Y2ggKCR0cmFuc2FjdGlvblJvdy0+dHJhbnNhY3Rpb25fdHlwZSkKCQl7CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1BBWU1FTlQ6CgkJCWNhc2UgTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFQ1VSUklOR19QQVlNRU5UOgoJCQkJJGJyYWludHJlZUNoYXJnZVF1ZXJ5ID0gIlNFTEVDVCAqIGZyb20gIi5NTV9UQUJMRV9CUkFJTlRSRUVfQ0hBUkdFUy4iIFdIRVJFIGlkID0gJXMiOwoJCQkJJGJyYWludHJlZUNoYXJnZUluZm8gPSAkd3BkYi0+Z2V0X3Jvdygkd3BkYi0+cHJlcGFyZSgkYnJhaW50cmVlQ2hhcmdlUXVlcnksJHRyYW5zYWN0aW9uUm93LT5wYXltZW50X3NlcnZpY2VfZGV0YWlsX2lkKSk7CgkJCQkkYnJhaW50cmVlQ2hhcmdlSWQgPSAkYnJhaW50cmVlQ2hhcmdlSW5mby0+Y2hhcmdlX2lkOwoJCQkJJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCA9IHRydWU7CgkJCQlicmVhazsKCQkJY2FzZSBNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfQ0hBUkdFOgoJCQljYXNlIE1NX1RyYW5zYWN0aW9uTG9nOjokVFJBTlNBQ1RJT05fVFlQRV9SRUNVUlJJTkdfQ0hBUkdFOgoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJVbmFibGUgdG8gcmVmdW5kIHRyYW5zYWN0aW9uOiBOb3QgYSBwYXltZW50IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJYnJlYWs7CgkJCWRlZmF1bHQ6CgkJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIlVua25vd24gdHJhbnNhY3Rpb24gdHlwZSwgdW5hYmxlIHRvIHByb2Nlc3MgcmVmdW5kIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkKCQlpZiAoJGdhdGV3YXlSZWZ1bmRSZXF1aXJlZCAmJiAkc2hvdWxkQXR0ZW1wdEdhdGV3YXlSZWZ1bmQpCgkJewoJCQlpZiAoZW1wdHkoJGJyYWludHJlZUNoYXJnZUlkKSkgLy9uZWNlc3NhcnkgZm9yIGJvdGggdm9pZHMgYW5kIGNyZWRpdHMKCQkJewoJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJBIGNvbmZpZ3VyYXRpb24gZXJyb3Igd2FzIGVuY291bnRlcmVkIGR1cmluZyB0aGUgYXR0ZW1wdCB0byB2b2lkIHRoZSB0cmFuc2FjdGlvbiIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJfQoJCQlyZXR1cm4gJHRoaXMtPnJlZnVuZEJyYWludHJlZUNoYXJnZUlkKCRicmFpbnRyZWVDaGFyZ2VJZCwkdHJhbnNhY3Rpb25JZCk7CgkJfQoJCQoJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgpOyAvL3N1Y2Nlc3MqLwoJfQkKCQoJCgkvKioKCSAqIFJlZnVuZHMgYSBCcmFpbnRyZWUgY2hhcmdlLCBhbmQgbG9ncyB0aGUgcmVmdW5kIGluIHRoZSB0cmFuc2FjdGlvbiB0YWJsZQoJICogCgkgKiBAcGFyYW0gc3RyaW5nICRicmFpbnRyZWVDaGFyZ2VJZCBUaGUgQnJhaW50cmVlIGlkZW50aWZpZXIgZm9yIHRoZSBjaGFyZ2UgdG8gYmUgcmVmdW5kZWQKCSAqIEBwYXJhbSBpbnQgJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCBUaGUgaWRlbnRpZmllciBmb3IgdGhlIG1lbWJlcm1vdXNlIHRyYW5zYWN0aW9uCgkgKiAKCSAqIEByZXR1cm4gTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSBpbmRpY2F0aW5nIHN1Y2Nlc3Mgb3IgZmFpbHVyZQoJICovCglwcm90ZWN0ZWQgZnVuY3Rpb24gcmVmdW5kQnJhaW50cmVlQ2hhcmdlSWQoJGJyYWludHJlZUNoYXJnZUlkLCAkb3JpZ2luYWxUcmFuc2FjdGlvbklkKQoJewoJCWdsb2JhbCAkd3BkYjsKCQkKCQkkYWxyZWFkeVJlZnVuZGVkID0gZmFsc2U7CgkJCgkJdHJ5IAoJCXsKCQkJLy8gZ2V0IHRoZSB0cmFuc2FjdGlvbiBmcm9tIEJyYWludHJlZQoJCQkkdHJhbnNhY3Rpb24gPSBCcmFpbnRyZWVfVHJhbnNhY3Rpb246OmZpbmQoJGJyYWludHJlZUNoYXJnZUlkKTsKCQkJCgkJCS8vIGNoZWNrIGlmIHRyYW5zYWN0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVmdW5kZWQgYW5kIGlmIHNvLCBkZXRlcm1pbmUgaWYgdHJhbnNhY3Rpb24gc2hvdWxkIGJlIHJlZnVuZGVkIG9yIHZvaWRlZCAKCQkJLy8gYmFzZWQgb24gdHJhbnNhY3Rpb24gc3RhdHVzCgkJCWlmKGlzc2V0KCR0cmFuc2FjdGlvbi0+cmVmdW5kSWRzKSAmJiBpc19hcnJheSgkdHJhbnNhY3Rpb24tPnJlZnVuZElkcykgJiYgY291bnQoJHRyYW5zYWN0aW9uLT5yZWZ1bmRJZHMpID4gMCkKCQkJewoJCQkJJGFscmVhZHlSZWZ1bmRlZCA9IHRydWU7CgkJCX0KCQkJZWxzZSBpZigkdHJhbnNhY3Rpb24tPnN0YXR1cyA9PSAic2V0dGxlZCIgfHwgJHRyYW5zYWN0aW9uLT5zdGF0dXMgPT0gInNldHRsaW5nIikKCQkJewoJCQkJJHJlc3VsdCA9IEJyYWludHJlZV9UcmFuc2FjdGlvbjo6cmVmdW5kKCRicmFpbnRyZWVDaGFyZ2VJZCk7CgkJCQkKCQkJCWlmKCEkcmVzdWx0LT5zdWNjZXNzKQoJCQkJewoJCQkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiRXJyb3IgcmVmdW5kaW5nIHRyYW5zYWN0aW9uOiB7JHJlc3VsdC0+ZXJyb3JzfSIsTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZTo6JEVSUk9SKTsKCQkJCX0KCQkJfSAKCQkJZWxzZSBpZigkdHJhbnNhY3Rpb24tPnN0YXR1cyA9PSAiYXV0aG9yaXplZCIgfHwgJHRyYW5zYWN0aW9uLT5zdGF0dXMgPT0gInN1Ym1pdHRlZF9mb3Jfc2V0dGxlbWVudCIpCgkJCXsKCQkJCSRyZXN1bHQgPSBCcmFpbnRyZWVfVHJhbnNhY3Rpb246OnZvaWQoJGJyYWludHJlZUNoYXJnZUlkKTsKCQkJCQoJCQkJaWYoISRyZXN1bHQtPnN1Y2Nlc3MpCgkJCQl7CgkJCQkJcmV0dXJuIG5ldyBNTV9QYXltZW50U2VydmljZVJlc3BvbnNlKCJFcnJvciByZWZ1bmRpbmcgdHJhbnNhY3Rpb246IHskcmVzdWx0LT5lcnJvcnN9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCQkJfQoJCQl9CgkJfQoJCWNhdGNoIChFeGNlcHRpb24gJGUpCgkJewoJCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoIkVycm9yIHJlZnVuZGluZyB0cmFuc2FjdGlvbjogeyRlLT5nZXRNZXNzYWdlKCl9IixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQkJCgkJLy9nZXQgb3JpZ2luYWwgdHJhbnNhY3Rpb24gZGV0YWlscwoJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mbyA9ICR3cGRiLT5nZXRfcm93KCR3cGRiLT5wcmVwYXJlKCJTRUxFQ1QgKiBGUk9NICIuTU1fVEFCTEVfVFJBTlNBQ1RJT05fTE9HLiIgV0hFUkUgaWQ9JXMiLCRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpKTsKCQlpZiAoISRhbHJlYWR5UmVmdW5kZWQgfHwgKCRhbHJlYWR5UmVmdW5kZWQgJiYgaXNfbnVsbCgkb3JpZ2luYWxUcmFuc2FjdGlvbkluZm8tPnJlZnVuZF9pZCkpKQoJCXsKCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24gPSAiUmVmdW5kIGZvciB0cmFuc2FjdGlvbiMgeyRvcmlnaW5hbFRyYW5zYWN0aW9uSWR9IjsKCQkJJHRyYW5zYWN0aW9uRGF0ZSA9IE1NX1V0aWxzOjpnZXRDdXJyZW50VGltZSgpOwoJCQkKCQkJaWYgKCR0aGlzLT50ZXN0TW9kZSkKCQkJewoJCQkJJHJlc3BvbnNlID0gTU1fVHJhbnNhY3Rpb25Mb2c6OmNyZWF0ZVRlc3RUcmFuc2FjdGlvbkVudHJ5KCRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaWQsCgkJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaXRlbV9pZCwKCQkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5hbW91bnQsCgkJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+Y3VycmVuY3ksCgkJCQkJCSR0cmFuc2FjdGlvbkRlc2NyaXB0aW9uLAoJCQkJCQlNTV9UcmFuc2FjdGlvbkxvZzo6JFRSQU5TQUNUSU9OX1RZUEVfUkVGVU5ELAoJCQkJCQlmYWxzZSwKCQkJCQkJJHRoaXMtPmdldElkKCksCgkJCQkJCW51bGwsCgkJCQkJCSR0cmFuc2FjdGlvbkRhdGUsCgkJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpOwoJCQl9CgkJCWVsc2UgCgkJCXsKCQkJCSRyZXNwb25zZSA9IE1NX1RyYW5zYWN0aW9uTG9nOjpjcmVhdGVUcmFuc2FjdGlvbkVudHJ5KCRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+b3JkZXJfaWQsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JbmZvLT5vcmRlcl9pdGVtX2lkLAoJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+YW1vdW50LAoJCQkJCSRvcmlnaW5hbFRyYW5zYWN0aW9uSW5mby0+Y3VycmVuY3ksCgkJCQkJJHRyYW5zYWN0aW9uRGVzY3JpcHRpb24sCgkJCQkJTU1fVHJhbnNhY3Rpb25Mb2c6OiRUUkFOU0FDVElPTl9UWVBFX1JFRlVORCwKCQkJCQlmYWxzZSwKCQkJCQkkdGhpcy0+Z2V0SWQoKSwKCQkJCQludWxsLAoJCQkJCSR0cmFuc2FjdGlvbkRhdGUsCgkJCQkJJG9yaWdpbmFsVHJhbnNhY3Rpb25JZCk7CgkJCX0KCQkJaWYgKE1NX1Jlc3BvbnNlOjppc1N1Y2Nlc3MoJHJlc3BvbnNlKSkKCQkJewoJCQkJJHdwZGItPnF1ZXJ5KCR3cGRiLT5wcmVwYXJlKCJVUERBVEUgIi5NTV9UQUJMRV9UUkFOU0FDVElPTl9MT0cuIiBTRVQgcmVmdW5kX2lkID0gJXMgV0hFUkUgaWQgPSAlcyIsJHJlc3BvbnNlLT5tZXNzYWdlLCRvcmlnaW5hbFRyYW5zYWN0aW9uSWQpKTsKCQkJfQoJCX0KCQkKCQlpZiAoJGFscmVhZHlSZWZ1bmRlZCkKCQl7CgkJCXJldHVybiBuZXcgTU1fUGF5bWVudFNlcnZpY2VSZXNwb25zZSgiVGhpcyB0cmFuc2FjdGlvbiB3YXMgYWxyZWFkeSByZWZ1bmRlZCBieSBCcmFpbnRyZWUuIFRoZSBkYXRhYmFzZSBoYXMgYmVlbiB1cGRhdGVkIixNTV9QYXltZW50U2VydmljZVJlc3BvbnNlOjokRVJST1IpOwoJCX0KCQlyZXR1cm4gbmV3IE1NX1BheW1lbnRTZXJ2aWNlUmVzcG9uc2UoKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0VGVzdE1lcmNoYW50SWQoKQoJewoJCXJldHVybiAkdGhpcy0+dGVzdE1lcmNoYW50SWQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFRlc3RNZXJjaGFudElkKCRtZXJjaGFudElkKQoJewoJCSR0aGlzLT50ZXN0TWVyY2hhbnRJZCA9ICRtZXJjaGFudElkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRUZXN0UHVibGljS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRlc3RQdWJsaWNLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldFRlc3RQdWJsaWNLZXkoJHB1YmxpY0tleSkKCXsKCQkkdGhpcy0+dGVzdFB1YmxpY0tleSA9ICRwdWJsaWNLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRlc3RQcml2YXRlS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRlc3RQcml2YXRlS2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRUZXN0UHJpdmF0ZUtleSgkcHJpdmF0ZUtleSkKCXsKCQkkdGhpcy0+dGVzdFByaXZhdGVLZXkgPSAkcHJpdmF0ZUtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TGl2ZU1lcmNoYW50SWQoKQoJewoJCXJldHVybiAkdGhpcy0+bGl2ZU1lcmNoYW50SWQ7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldExpdmVNZXJjaGFudElkKCRtZXJjaGFudElkKQoJewoJCSR0aGlzLT5saXZlTWVyY2hhbnRJZCA9ICRtZXJjaGFudElkOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBnZXRMaXZlUHVibGljS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxpdmVQdWJsaWNLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIHNldExpdmVQdWJsaWNLZXkoJHB1YmxpY0tleSkKCXsKCQkkdGhpcy0+bGl2ZVB1YmxpY0tleSA9ICRwdWJsaWNLZXk7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldExpdmVQcml2YXRlS2V5KCkKCXsKCQlyZXR1cm4gJHRoaXMtPmxpdmVQcml2YXRlS2V5OwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRMaXZlUHJpdmF0ZUtleSgkcHJpdmF0ZUtleSkKCXsKCQkkdGhpcy0+bGl2ZVByaXZhdGVLZXkgPSAkcHJpdmF0ZUtleTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0VGVzdE1vZGUoJHRlc3RNb2RlKQoJewoJCSR0ZXN0TW9kZSA9IChib29sKSR0ZXN0TW9kZTsKCQlpZiAoJHRoaXMtPnRlc3RNb2RlICE9ICR0ZXN0TW9kZSkKCQl7CgkJCSR0aGlzLT5zZXR1cEJyYWludHJlZSgpOyAvL2F0dGVtcHQgdG8gY2F0Y2ggcHJvZ3JhbW1hdGljIG1vZGUgY2hhbmdlcyBhbmQgcmVpbml0aWFsaXplIEJyYWludHJlZQoJCX0KCQkkdGhpcy0+dGVzdE1vZGUgPSAkdGVzdE1vZGU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldFRlc3RNb2RlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPnRlc3RNb2RlOwoJfQoJCgkKCS8qKgoJICogQHNlZSBNTV9QYXltZW50U2VydmljZTo6aW5UZXN0TW9kZSgpCgkgKi8KCXB1YmxpYyBmdW5jdGlvbiBpblRlc3RNb2RlKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmdldFRlc3RNb2RlKCk7Cgl9CgkKCQoJLyoqCgkgKiBAc2VlIE1NX1BheW1lbnRTZXJ2aWNlOjpzd2l0Y2hUb1Rlc3RNb2RlKCkKCSAqLwoJcHVibGljIGZ1bmN0aW9uIHN3aXRjaFRvVGVzdE1vZGUoKQoJewoJCSR0aGlzLT50ZXN0TW9kZSA9IHRydWU7CgkJcmV0dXJuIHRydWU7Cgl9CgkKCSAgCn0=', 0, '2018-11-21 06:38:55'),
(258, 'reportdatagridmodel', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUmVwb3J0RGF0YWdyaWRNb2RlbCBleHRlbmRzIE1NX0Fic3RyYWN0UmVwb3J0RGF0YU1vZGVsCnsKCXB1YmxpYyBzdGF0aWMgJEJMQU5LX1JPVyA9ICJibGFua19yb3ciOwoJcHJvdGVjdGVkICRjb2x1bW5IZWFkZXJzID0gYXJyYXkoKTsKCXByb3RlY3RlZCAkcm93cyA9IGFycmF5KCk7Cglwcm90ZWN0ZWQgJG9wdGlvbnMgPSBhcnJheSgpOwkKCQoJCglwdWJsaWMgZnVuY3Rpb24gc2V0Q29sdW1uSGVhZGVyc0Zyb21BcnJheSgkaGVhZGVyQXJyYXk9YXJyYXkoKSkKCXsKCQlmb3JlYWNoICgkaGVhZGVyQXJyYXkgYXMgJGNvbHVtbk5hbWU9PiRoZWFkZXJJbmZvKQoJCXsKCQkJJHRoaXMtPmFkZENvbHVtbkhlYWRlcigkY29sdW1uTmFtZSwkaGVhZGVySW5mbyk7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBhZGRDb2x1bW5IZWFkZXIoJGNvbHVtbk5hbWUsICRjb2x1bW5EZWZpbml0aW9ucykKCXsKCQkkdGhpcy0+Y29sdW1uSGVhZGVyc1skY29sdW1uTmFtZV0gPSAkY29sdW1uRGVmaW5pdGlvbnMgKyBhcnJheSgic29ydGFibGUiPT50cnVlKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gcmVtb3ZlQ29sdW1uSGVhZGVyKCRjb2x1bW5OYW1lKQoJewoJCWlmIChpc3NldCgkdGhpcy0+Y29sdW1uSGVhZGVyc1skY29sdW1uTmFtZV0pKQoJCXsKCQkJdW5zZXQoJHRoaXMtPmNvbHVtbkhlYWRlcnNbJGNvbHVtbk5hbWVdKTsKCQl9Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGFkZFJvdygkcm93RGF0YSwkZXhwYW5kZWRDb250ZW50PSIiLCRleHBhbmRPbkxvYWQ9ZmFsc2UpCgl7CgkJaWYgKGlzX2FycmF5KCRyb3dEYXRhKSkKCQl7CgkJCSRuZXdSb3cgPSBhcnJheSgiZGF0YSIgPT4gJHJvd0RhdGEpOwoJCQlpZiAoIWVtcHR5KCRleHBhbmRlZENvbnRlbnQpKQoJCQl7CgkJCQkkbmV3Um93WydleHBhbmRlZENvbnRlbnQnXSA9ICRleHBhbmRlZENvbnRlbnQ7CgkJCQkkbmV3Um93WydleHBhbmRPbkxvYWQnXSA9ICRleHBhbmRPbkxvYWQ7CgkJCX0KCQkJJHRoaXMtPnJvd3NbXSA9ICRuZXdSb3c7CgkJfQoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBhZGRCbGFua1JvdygpCgl7CgkJJHRoaXMtPnJvd3NbXSA9IGFycmF5KCJkYXRhIiA9PiBzZWxmOjokQkxBTktfUk9XKTsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0RmlsdGVyYWJsZUNvbHVtbnMoKQoJewoJCSRmaWx0ZXJhYmxlID0gYXJyYXkoKTsKCQlmb3JlYWNoICgkdGhpcy0+Y29sdW1uSGVhZGVycyBhcyAkaz0+JHYpCgkJewoJCQlpZiAoJHZbImZpbHRlcmFibGUiXSA9PSB0cnVlKQoJCQl7CgkJCQkkZmlsdGVyYWJsZVska10gPSAkdjsKCQkJfQoJCX0KCQlyZXR1cm4gJGZpbHRlcmFibGU7Cgl9CgkKCQoJcHVibGljIGZ1bmN0aW9uIGdldENvbHVtbnMoKQoJewoJCXJldHVybiAkdGhpcy0+Y29sdW1uSGVhZGVyczsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Um93cygpCgl7CgkJcmV0dXJuICR0aGlzLT5yb3dzOwoJfQkKCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0TnVtUm93cygpCgl7CgkJcmV0dXJuIGlzX2FycmF5KCR0aGlzLT5yb3dzKT9jb3VudCgkdGhpcy0+cm93cyk6MDsKCX0KfQ==', 0, '2018-11-21 06:38:55'),
(259, 'affiliateproviderfeatures', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKgogKiBNTV9BZmZpbGlhdGVQcm92aWRlckZlYXR1cmVzIGlzIGEgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBjb250YWluZXIgZm9yIGEgc2V0IG9mIGNvbnN0YW50cyByZXByZXNlbnRpbmcgZmVhdHVyZXMKICogdGhhdCBtYXkgYmUgaW1wbGVtZW50ZWQgYnkgaW5kaXZpZHVhbCBhZmZpbGlhdGUgcHJvdmlkZXJzCiAqLwpjbGFzcyBNTV9BZmZpbGlhdGVQcm92aWRlckZlYXR1cmVzIAp7Cgljb25zdCBDVVNUT01fUkVCSUxMX0NPTU1JU1NJT05TID0gMTsKCWNvbnN0IERFRkFVTFRfQUZGSUxJQVRFX0lEID0gMjsKCWNvbnN0IEFGRklMSUFURV9BQ0NPVU5UX0NSRUFUSU9OID0gMzsKCWNvbnN0IENPTU1JU1NJT05fVFJBQ0tJTkcgPSA0OwoJY29uc3QgQ09NTUlTU0lPTl9UUkFDS0lOR19CWV9DT1VQT04gPSA1OwoJY29uc3QgQ09NTUlTU0lPTl9UUkFDS0lOR19CWV9JUF9BRERSRVNTID0gNjsKfQo=', 0, '2018-11-21 06:38:55');
INSERT INTO `mm_container` (`id`, `name`, `obj`, `is_system`, `date_added`) VALUES
(260, 'reportbarchart', 'LyoqCiAqCiAqIE1lbWJlck1vdXNlKFRNKSAoaHR0cDovL3d3dy5tZW1iZXJtb3VzZS5jb20pCiAqIChjKSBNZW1iZXJNb3VzZSwgTExDLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKi8KY2xhc3MgTU1fUmVwb3J0QmFyQ2hhcnQgZXh0ZW5kcyBNTV9SZXBvcnRWaXN1YWxFbGVtZW50CnsKCQoJcHJvdGVjdGVkICRjYXRlZ29yeUZpZWxkID0gImNhdGVnb3J5IjsKCQoJcHJvdGVjdGVkICR2YWx1ZUZpZWxkID0gInZhbHVlIjsKCQoJcHJvdGVjdGVkICRvcmllbnRhdGlvbiA9ICIiOwoJCglwcm90ZWN0ZWQgJHZhbHVlQXhpc1RpdGxlID0gIiI7CgkKCXByb3RlY3RlZCAkY2F0ZWdvcnlBeGlzVGl0bGUgPSAiIjsKCQoJcHJvdGVjdGVkICRiYWxsb29uVGV4dCA9ICIiOwoJCglwcm90ZWN0ZWQgJHRpdGxlID0gIiI7CgkKCXByb3RlY3RlZCAkY3VycmVuY3lWYWx1ZXMgPSBmYWxzZTsKCQoJcHJvdGVjdGVkICRsYWJlbFJvdGF0aW9uID0gNDU7CgkKCXB1YmxpYyBzdGF0aWMgJEhPUklaT05UQUxfT1JJRU5UQVRJT04gPSAiaG9yaXpvbnRhbCI7CglwdWJsaWMgc3RhdGljICRWRVJUSUNBTF9PUklFTlRBVElPTiA9ICJ2ZXJ0aWNhbCI7CgoJCglwdWJsaWMgZnVuY3Rpb24gX19jb25zdHJ1Y3QoJGNvbnRhaW5lcj0iIiwkZGlyZWN0aXZlcz0iIikKCXsKCQlwYXJlbnQ6Ol9fY29uc3RydWN0KCRjb250YWluZXIsJGRpcmVjdGl2ZXMpOwoJfQoJCgoJcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRKYXZhc2NyaXB0RGVwZW5kZW5jaWVzKCkKCXsKCQlyZXR1cm4gYXJyYXkgKAoJCQkJTU1fUExVR0lOX1VSTC4iL3Jlc291cmNlcy9qcy9hbWNoYXJ0cy9hbWNoYXJ0cy9hbWNoYXJ0cy5qcyIsCgkJCQlNTV9QTFVHSU5fVVJMLiIvcmVzb3VyY2VzL2pzL2FtY2hhcnRzL2FtY2hhcnRzL3NlcmlhbC5qcyIgCgkJKTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIHJlbmRlcihNTV9SZXBvcnRDYXRlZ29yeVZhbHVlTW9kZWwgJG1vZGVsID0gbnVsbCkKCXsKCQlpZiAoZW1wdHkoJHRoaXMtPmJhbGxvb25UZXh0KSkKCQl7CgkJCSR0aGlzLT5zZXRCYWxsb29uVGV4dCgiW1t7JHRoaXMtPmNhdGVnb3J5RmllbGR9XV0gOiBbW3skdGhpcy0+dmFsdWVGaWVsZH1dXSIpOwoJCX0KCQkKCQlpZiAoIWlzX251bGwoJG1vZGVsKSkKCQl7CgkJCSR0aGlzLT5zZXRNb2RlbCgkbW9kZWwpOwoJCX0KCQkKCQkkb3V0cHV0ID0gIiI7CgkJaWYgKCFlbXB0eSgkdGhpcy0+Y29udGFpbmVyKSYmKCR0aGlzLT5tb2RlbCBpbnN0YW5jZW9mIE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbCkpCgkJewoJCQkkdmFsdWVzID0gJHRoaXMtPm1vZGVsLT5nZXRWYWx1ZXMoKTsKCQkJaWYgKGlzX2FycmF5KCR2YWx1ZXMpKQoJCQl7CgkJCQlpZiAoJHRoaXMtPmN1cnJlbmN5VmFsdWVzKQoJCQkJewoJCQkJCSR0aGlzLT5zZXRCYWxsb29uVGV4dCgiW1t7JHRoaXMtPmNhdGVnb3J5RmllbGR9XV0gOiBbW2JhbGxvb25dXSIpOwoJCQkJfQoJCQkJJGNvbG9yQ291bnRlciA9IDA7CgkJCQkkbWV0YU92ZXJyaWRlID0gYXJyYXkoJ3Bvc3RmaXhfaXNvJz0+ZmFsc2UpOwoJCQkJZm9yZWFjaCgkdmFsdWVzIGFzICYkdikKCQkJCXsKCQkJCQlpZiAoJHRoaXMtPmN1cnJlbmN5VmFsdWVzICYmIGlzX251bWVyaWMoJHZbJHRoaXMtPnZhbHVlRmllbGRdKSkKCQkJCQl7CgkJCQkJCSR2WydiYWxsb29uJ10gPSBfbW1vZigkdlskdGhpcy0+dmFsdWVGaWVsZF0sX21tZmMoKSwkbWV0YU92ZXJyaWRlKTsKCQkJCQl9CgkJCQkJJHZbJ2NvbG9yJ10gPSAkdGhpcy0+Z2V0Q29sb3JGb3JQb3NpdGlvbigkY29sb3JDb3VudGVyKyspOwoJCQkJfQoJCQl9CgkJCSRqc29uRGF0YSA9IGpzb25fZW5jb2RlKCR2YWx1ZXMpOwoJCQkkb3V0cHV0IC49ICI8c2NyaXB0IHR5cGU9J3RleHQvamF2YXNjcmlwdCc+XG4iOwoJCQkkb3V0cHV0IC49ICJqUXVlcnkoZnVuY3Rpb24oKSB7XG4iOwoJCQkkb3V0cHV0IC49ICJ2YXIgeyR0aGlzLT5jb250YWluZXJ9X2NoYXJ0ID0gQW1DaGFydHMubWFrZUNoYXJ0KCd7JHRoaXMtPmNvbnRhaW5lcn0nLCB7XG4iOwoJCQkkb3V0cHV0IC49ICIJJ3RoZW1lJzogJ25vbmUnLFxuIjsKCQkJJG91dHB1dCAuPSAiCSd0eXBlJzogJ3NlcmlhbCcsXG4iOwoJCQkkb3V0cHV0IC49ICIJJ3N0YXJ0RHVyYXRpb24nOiAyLFxuIjsKCQkJJG91dHB1dCAuPSAiCSdkYXRhUHJvdmlkZXInOiB7JGpzb25EYXRhfSxcbiI7CgkJCSRvdXRwdXQgLj0gIgkndmFsdWVBeGVzJzogW3tcbiI7CgkJCSRvdXRwdXQgLj0gIgkJJ3Bvc2l0aW9uJzogJ2xlZnQnLFxuIjsKCQkJaWYgKCR0aGlzLT5jdXJyZW5jeVZhbHVlcykKCQkJewoJCQkJJG91dHB1dCAuPSAiCSdwcmVjaXNpb24nOiAyLFxuIjsKCQkJfQoJCQkkb3V0cHV0IC49ICIJCSd0aXRsZSc6ICd7JHRoaXMtPnZhbHVlQXhpc1RpdGxlfSdcbiI7CgkJCSRvdXRwdXQgLj0gIgl9XSxcbiI7CgkJCSRvdXRwdXQgLj0gIgknZ3JhcGhzJzogW3tcbiI7CgkJCWlmICghZW1wdHkoJHRoaXMtPmJhbGxvb25UZXh0KSkKCQkJewoJCQkJJG91dHB1dCAuPSAiJ2JhbGxvb25UZXh0JzogJ3skdGhpcy0+YmFsbG9vblRleHR9JyxcbiI7CgkJCX0KCQkJJG91dHB1dCAuPSAiCSdjb2xvckZpZWxkJzogJ2NvbG9yJyxcbiI7CgkJCSRvdXRwdXQgLj0gIgknZmlsbEFscGhhcyc6IDEsXG4iOwoJCQkkb3V0cHV0IC49ICIJJ2xpbmVBbHBoYSc6IDAuMSxcbiI7CgkJCSRvdXRwdXQgLj0gIgknZml4ZWRDb2x1bW5XaWR0aCc6IDUwLFxuIjsKCQkJJG91dHB1dCAuPSAiCSd0eXBlJzogJ2NvbHVtbicsXG4iOwoJCQkkb3V0cHV0IC49ICIJJ3ZhbHVlRmllbGQnOiAneyR0aGlzLT52YWx1ZUZpZWxkfSdcbiI7CgkJCSRvdXRwdXQgLj0gIgl9XSxcbiI7CgkJCSRvdXRwdXQgLj0gIgknZGVwdGgzRCc6IDIwLFxuIjsKCQkJJG91dHB1dCAuPSAiCSdhbmdsZSc6IDMwLFxuIjsKCQkJJHJvdGF0ZSA9ICgkdGhpcy0+b3JpZW50YXRpb24gIT09IHNlbGY6OiRWRVJUSUNBTF9PUklFTlRBVElPTik/InRydWUiOiJmYWxzZSI7CgkJCSRvdXRwdXQgLj0gIgkncm90YXRlJzogeyRyb3RhdGV9LFxuIjsKCQkJJG91dHB1dCAuPSAiCSdjaGFydEN1cnNvcic6IHtcbiI7CgkJCSRvdXRwdXQgLj0gIgknY2F0ZWdvcnlCYWxsb29uRW5hYmxlZCc6IGZhbHNlLFxuIjsKCQkJJG91dHB1dCAuPSAiCSdjdXJzb3JBbHBoYSc6IDAsXG4iOwoJCQkkb3V0cHV0IC49ICIJJ3pvb21hYmxlJzogZmFsc2VcbiI7CgkJCSRvdXRwdXQgLj0gIgl9LFxuIjsKCQkJJG91dHB1dCAuPSAiCSdjYXRlZ29yeUZpZWxkJzogJ3skdGhpcy0+Y2F0ZWdvcnlGaWVsZH0nLFxuIjsKCQkJJG91dHB1dCAuPSAiCSdjYXRlZ29yeUF4aXMnOiB7XG4iOwoJCQkkb3V0cHV0IC49ICIJJ2dyaWRQb3NpdGlvbic6ICdzdGFydCcsXG4iOwoJCQkkb3V0cHV0IC49ICIJJ3RpdGxlJzoneyR0aGlzLT5jYXRlZ29yeUF4aXNUaXRsZX0nLFxuIjsKCQkJJG91dHB1dCAuPSAiCSdsYWJlbFJvdGF0aW9uJzogeyR0aGlzLT5sYWJlbFJvdGF0aW9ufSxcbiI7CgkJCSRvdXRwdXQgLj0gIgl9XG4iOwoJCQkkb3V0cHV0IC49ICJ9KTtcbiI7CgkJCSRvdXRwdXQgLj0gIn0pOyI7CgkJCSRvdXRwdXQgLj0gIjwvc2NyaXB0PlxuIjsKCQl9CgkJcmV0dXJuICRvdXRwdXQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRDYXRlZ29yeUZpZWxkKCkKCXsKCQlyZXR1cm4gJHRoaXMtPmNhdGVnb3J5RmllbGQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRDYXRlZ29yeUZpZWxkKCRjYXRlZ29yeUZpZWxkKQoJewoJCSR0aGlzLT5jYXRlZ29yeUZpZWxkID0gJGNhdGVnb3J5RmllbGQ7CgkJcmV0dXJuICR0aGlzOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0VmFsdWVGaWVsZCgpCgl7CgkJcmV0dXJuICR0aGlzLT52YWx1ZUZpZWxkOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0VmFsdWVGaWVsZCgkdmFsdWVGaWVsZCkKCXsKCQkkdGhpcy0+dmFsdWVGaWVsZCA9ICR2YWx1ZUZpZWxkOwoJCXJldHVybiAkdGhpczsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldE9yaWVudGF0aW9uKCkKCXsKCQlyZXR1cm4gJHRoaXMtPm9yaWVudGF0aW9uOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gc2V0T3JpZW50YXRpb24oJG9yaWVudGF0aW9uKQoJewoJCSR0aGlzLT5vcmllbnRhdGlvbiA9ICRvcmllbnRhdGlvbjsKCQlyZXR1cm4gJHRoaXM7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRWYWx1ZUF4aXNUaXRsZSgpCgl7CgkJcmV0dXJuICR0aGlzLT52YWx1ZUF4aXNUaXRsZTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIHNldFZhbHVlQXhpc1RpdGxlKCR2YWx1ZUF4aXNUaXRsZSkKCXsKCQkkdGhpcy0+dmFsdWVBeGlzVGl0bGUgPSAkdmFsdWVBeGlzVGl0bGU7CgkJcmV0dXJuICR0aGlzOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q2F0ZWdvcnlBeGlzVGl0bGUoKQoJewoJCXJldHVybiAkdGhpcy0+Y2F0ZWdvcnlBeGlzVGl0bGU7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRDYXRlZ29yeUF4aXNUaXRsZSgkY2F0ZWdvcnlBeGlzVGl0bGUpCgl7CgkJJHRoaXMtPmNhdGVnb3J5QXhpc1RpdGxlID0gJGNhdGVnb3J5QXhpc1RpdGxlOwoJfQoKCglwdWJsaWMgZnVuY3Rpb24gZ2V0QmFsbG9vblRleHQoKQoJewoJCXJldHVybiAkdGhpcy0+YmFsbG9vblRleHQ7Cgl9CgoKCXB1YmxpYyBmdW5jdGlvbiBzZXRCYWxsb29uVGV4dCgkYmFsbG9vblRleHQpCgl7CgkJJHRoaXMtPmJhbGxvb25UZXh0ID0gJGJhbGxvb25UZXh0OwoJCXJldHVybiAkdGhpczsKCX0gCgoKCXB1YmxpYyBmdW5jdGlvbiBnZXRUaXRsZSgpCgl7CgkJcmV0dXJuICR0aGlzLT50aXRsZTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIHNldFRpdGxlKCR0aXRsZSkKCXsKCQkkdGhpcy0+dGl0bGUgPSAkdGl0bGU7CgkJcmV0dXJuICR0aGlzOwoJfQoJCgkKCXB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gY3JlYXRlRnJvbVRvcFJlc3VsdHMoJGVsZW1lbnRJZGVudGlmaWVyLCAkY2F0ZWdvcnlGaWVsZCwgJHZhbHVlRmllbGQsICRudW1SZWNvcmRzLCBNTV9SZXBvcnRSZXNwb25zZSAkcmVzdWx0T2JqZWN0LCAkZGlyZWN0aXZlcz1hcnJheSgpKQoJewoJCWlmICghTU1fUmVwb3J0UmVzcG9uc2U6OmlzU3VjY2VzcygkcmVzdWx0T2JqZWN0KSkKCQl7CgkJCXJldHVybiBudWxsOwoJCX0KCQkkYmFyID0gbmV3IE1NX1JlcG9ydEJhckNoYXJ0KCRlbGVtZW50SWRlbnRpZmllciwkZGlyZWN0aXZlcyk7CgkJCgkJLy9jcmVhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgZGF0YSBtb2RlbAoJCSRtb2RlbCA9IE1NX1JlcG9ydENhdGVnb3J5VmFsdWVNb2RlbDo6Y3JlYXRlRnJvbVRvcFJlc3VsdHMoJHJlc3VsdE9iamVjdC0+bWVzc2FnZSwgJGNhdGVnb3J5RmllbGQsICR2YWx1ZUZpZWxkLCAkbnVtUmVjb3Jkcyk7CgkJJGJhci0+c2V0TW9kZWwoJG1vZGVsKTsKCQlyZXR1cm4gJGJhcjsKCX0KCQoJCglwdWJsaWMgZnVuY3Rpb24gZ2V0Q3VycmVuY3lWYWx1ZXMoKSAKCXsKCQlyZXR1cm4gJHRoaXMtPmN1cnJlbmN5VmFsdWVzOwoJfQoJCgkKCXB1YmxpYyBmdW5jdGlvbiBzZXRDdXJyZW5jeVZhbHVlcygkdmFsdWVzQXJlQ3VycmVuY3kpIAoJewoJCSR0aGlzLT5jdXJyZW5jeVZhbHVlcyA9ICR2YWx1ZXNBcmVDdXJyZW5jeTsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIGdldExhYmVsUm90YXRpb24oKQoJewoJCXJldHVybiAkdGhpcy0+bGFiZWxSb3RhdGlvbjsKCX0KCgoJcHVibGljIGZ1bmN0aW9uIHNldExhYmVsUm90YXRpb24oJGxhYmVsUm90YXRpb24pCgl7CgkJJHRoaXMtPmxhYmVsUm90YXRpb24gPSAkbGFiZWxSb3RhdGlvbjsKCX0KCQoJCn0K', 0, '2018-11-21 06:38:55'),
(261, 'aweberapiexception', 'LyoqCiAqIFRocm93biB3aGVuIHRoZSBBUEkgcmV0dXJucyBhbiBlcnJvci4gKEhUVFAgc3RhdHVzID49IDQwMCkKICoKICoKICogQHVzZXMgTU1fQVdlYmVyRXhjZXB0aW9uCiAqIEBwYWNrYWdlCiAqIEB2ZXJzaW9uICRpZCQKICovCmNsYXNzIE1NX0FXZWJlckFQSUV4Y2VwdGlvbiBleHRlbmRzIE1NX0FXZWJlckV4Y2VwdGlvbiB7CgoJcHVibGljICR0eXBlOwoJcHVibGljICRzdGF0dXM7CglwdWJsaWMgJG1lc3NhZ2U7CglwdWJsaWMgJGRvY3VtZW50YXRpb25fdXJsOwoJcHVibGljICR1cmw7CgoJcHVibGljIGZ1bmN0aW9uIF9fY29uc3RydWN0KCRlcnJvciwgJHVybCkgewoJCS8vIHJlY29yZCBzcGVjaWZpYyBkZXRhaWxzIG9mIHRoZSBBUEkgZXhjZXB0aW9uIGZvciBwcm9jZXNzaW5nCgkJJHRoaXMtPnVybCA9ICR1cmw7CgkJJHRoaXMtPnR5cGUgPSAkZXJyb3JbJ3R5cGUnXTsKCQkkdGhpcy0+c3RhdHVzID0gYXJyYXlfa2V5X2V4aXN0cygnc3RhdHVzJywgJGVycm9yKSA/ICRlcnJvclsnc3RhdHVzJ10gOiAnJzsKCQkkdGhpcy0+bWVzc2FnZSA9ICRlcnJvclsnbWVzc2FnZSddOwoJCSR0aGlzLT5kb2N1bWVudGF0aW9uX3VybCA9ICRlcnJvclsnZG9jdW1lbnRhdGlvbl91cmwnXTsKCgkJcGFyZW50OjpfX2NvbnN0cnVjdCgkdGhpcy0+bWVzc2FnZSk7Cgl9Cn0K', 0, '2018-11-21 06:38:55');

-- --------------------------------------------------------

--
-- Table structure for table `mm_core_pages`
--

CREATE TABLE `mm_core_pages` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `page_id` bigint(20) UNSIGNED DEFAULT NULL,
  `core_page_type_id` int(11) UNSIGNED NOT NULL,
  `ref_type` enum('member_type','error_type','access_tag','product') COLLATE utf8_unicode_ci DEFAULT NULL,
  `ref_id` int(11) UNSIGNED DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_core_pages`
--

INSERT INTO `mm_core_pages` (`id`, `page_id`, `core_page_type_id`, `ref_type`, `ref_id`) VALUES
(1, 5, 1, NULL, NULL),
(2, 6, 2, NULL, NULL),
(3, 7, 3, NULL, NULL),
(4, 8, 4, NULL, NULL),
(5, 10, 5, NULL, NULL),
(6, 12, 6, NULL, NULL),
(7, 15, 7, NULL, NULL),
(9, NULL, 9, NULL, NULL),
(10, 14, 10, NULL, NULL),
(11, 9, 11, NULL, NULL),
(12, 13, 12, NULL, NULL),
(13, 11, 13, NULL, NULL);

-- --------------------------------------------------------

--
-- Table structure for table `mm_core_page_types`
--

CREATE TABLE `mm_core_page_types` (
  `id` int(11) UNSIGNED NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `visible` tinyint(4) NOT NULL DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_core_page_types`
--

INSERT INTO `mm_core_page_types` (`id`, `name`, `visible`) VALUES
(1, 'Member Home', 1),
(2, 'Save the Sale', 1),
(3, 'Error', 1),
(4, 'Login', 1),
(5, 'Forgot Password', 1),
(6, 'Checkout', 1),
(7, 'Confirmation', 1),
(9, 'Free Confirmation', 0),
(10, 'My Account', 1),
(11, 'Logout', 1),
(12, 'Redeem Gift', 1),
(13, 'Reset Password', 1);

-- --------------------------------------------------------

--
-- Table structure for table `mm_countries`
--

CREATE TABLE `mm_countries` (
  `iso` char(2) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(80) COLLATE utf8_unicode_ci NOT NULL,
  `printable_name` varchar(80) COLLATE utf8_unicode_ci NOT NULL,
  `iso3` char(3) COLLATE utf8_unicode_ci DEFAULT NULL,
  `numcode` smallint(6) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_countries`
--

INSERT INTO `mm_countries` (`iso`, `name`, `printable_name`, `iso3`, `numcode`) VALUES
('AD', 'ANDORRA', 'Andorra', 'AND', 20),
('AE', 'UNITED ARAB EMIRATES', 'United Arab Emirates', 'ARE', 784),
('AF', 'AFGHANISTAN', 'Afghanistan', 'AFG', 4),
('AG', 'ANTIGUA AND BARBUDA', 'Antigua and Barbuda', 'ATG', 28),
('AI', 'ANGUILLA', 'Anguilla', 'AIA', 660),
('AL', 'ALBANIA', 'Albania', 'ALB', 8),
('AM', 'ARMENIA', 'Armenia', 'ARM', 51),
('AN', 'NETHERLANDS ANTILLES', 'Netherlands Antilles', 'ANT', 530),
('AO', 'ANGOLA', 'Angola', 'AGO', 24),
('AQ', 'ANTARCTICA', 'Antarctica', NULL, NULL),
('AR', 'ARGENTINA', 'Argentina', 'ARG', 32),
('AS', 'AMERICAN SAMOA', 'American Samoa', 'ASM', 16),
('AT', 'AUSTRIA', 'Austria', 'AUT', 40),
('AU', 'AUSTRALIA', 'Australia', 'AUS', 36),
('AW', 'ARUBA', 'Aruba', 'ABW', 533),
('AZ', 'AZERBAIJAN', 'Azerbaijan', 'AZE', 31),
('BA', 'BOSNIA AND HERZEGOVINA', 'Bosnia and Herzegovina', 'BIH', 70),
('BB', 'BARBADOS', 'Barbados', 'BRB', 52),
('BD', 'BANGLADESH', 'Bangladesh', 'BGD', 50),
('BE', 'BELGIUM', 'Belgium', 'BEL', 56),
('BF', 'BURKINA FASO', 'Burkina Faso', 'BFA', 854),
('BG', 'BULGARIA', 'Bulgaria', 'BGR', 100),
('BH', 'BAHRAIN', 'Bahrain', 'BHR', 48),
('BI', 'BURUNDI', 'Burundi', 'BDI', 108),
('BJ', 'BENIN', 'Benin', 'BEN', 204),
('BM', 'BERMUDA', 'Bermuda', 'BMU', 60),
('BN', 'BRUNEI DARUSSALAM', 'Brunei Darussalam', 'BRN', 96),
('BO', 'BOLIVIA', 'Bolivia', 'BOL', 68),
('BR', 'BRAZIL', 'Brazil', 'BRA', 76),
('BS', 'BAHAMAS', 'Bahamas', 'BHS', 44),
('BT', 'BHUTAN', 'Bhutan', 'BTN', 64),
('BV', 'BOUVET ISLAND', 'Bouvet Island', NULL, NULL),
('BW', 'BOTSWANA', 'Botswana', 'BWA', 72),
('BY', 'BELARUS', 'Belarus', 'BLR', 112),
('BZ', 'BELIZE', 'Belize', 'BLZ', 84),
('CA', 'CANADA', 'Canada', 'CAN', 124),
('CC', 'COCOS (KEELING) ISLANDS', 'Cocos (Keeling) Islands', NULL, NULL),
('CD', 'CONGO, THE DEMOCRATIC REPUBLIC OF THE', 'Congo, the Democratic Republic of the', 'COD', 180),
('CF', 'CENTRAL AFRICAN REPUBLIC', 'Central African Republic', 'CAF', 140),
('CG', 'CONGO', 'Congo', 'COG', 178),
('CH', 'SWITZERLAND', 'Switzerland', 'CHE', 756),
('CI', 'COTE D\'IVOIRE', 'Cote D\'Ivoire', 'CIV', 384),
('CK', 'COOK ISLANDS', 'Cook Islands', 'COK', 184),
('CL', 'CHILE', 'Chile', 'CHL', 152),
('CM', 'CAMEROON', 'Cameroon', 'CMR', 120),
('CN', 'CHINA', 'China', 'CHN', 156),
('CO', 'COLOMBIA', 'Colombia', 'COL', 170),
('CR', 'COSTA RICA', 'Costa Rica', 'CRI', 188),
('CS', 'SERBIA AND MONTENEGRO', 'Serbia and Montenegro', NULL, NULL),
('CU', 'CUBA', 'Cuba', 'CUB', 192),
('CV', 'CAPE VERDE', 'Cape Verde', 'CPV', 132),
('CX', 'CHRISTMAS ISLAND', 'Christmas Island', NULL, NULL),
('CY', 'CYPRUS', 'Cyprus', 'CYP', 196),
('CZ', 'CZECH REPUBLIC', 'Czech Republic', 'CZE', 203),
('DE', 'GERMANY', 'Germany', 'DEU', 276),
('DJ', 'DJIBOUTI', 'Djibouti', 'DJI', 262),
('DK', 'DENMARK', 'Denmark', 'DNK', 208),
('DM', 'DOMINICA', 'Dominica', 'DMA', 212),
('DO', 'DOMINICAN REPUBLIC', 'Dominican Republic', 'DOM', 214),
('DZ', 'ALGERIA', 'Algeria', 'DZA', 12),
('EC', 'ECUADOR', 'Ecuador', 'ECU', 218),
('EE', 'ESTONIA', 'Estonia', 'EST', 233),
('EG', 'EGYPT', 'Egypt', 'EGY', 818),
('EH', 'WESTERN SAHARA', 'Western Sahara', 'ESH', 732),
('ER', 'ERITREA', 'Eritrea', 'ERI', 232),
('ES', 'SPAIN', 'Spain', 'ESP', 724),
('ET', 'ETHIOPIA', 'Ethiopia', 'ETH', 231),
('FI', 'FINLAND', 'Finland', 'FIN', 246),
('FJ', 'FIJI', 'Fiji', 'FJI', 242),
('FK', 'FALKLAND ISLANDS (MALVINAS)', 'Falkland Islands (Malvinas)', 'FLK', 238),
('FM', 'MICRONESIA, FEDERATED STATES OF', 'Micronesia, Federated States of', 'FSM', 583),
('FO', 'FAROE ISLANDS', 'Faroe Islands', 'FRO', 234),
('FR', 'FRANCE', 'France', 'FRA', 250),
('GA', 'GABON', 'Gabon', 'GAB', 266),
('GB', 'UNITED KINGDOM', 'United Kingdom', 'GBR', 826),
('GD', 'GRENADA', 'Grenada', 'GRD', 308),
('GE', 'GEORGIA', 'Georgia', 'GEO', 268),
('GF', 'FRENCH GUIANA', 'French Guiana', 'GUF', 254),
('GH', 'GHANA', 'Ghana', 'GHA', 288),
('GI', 'GIBRALTAR', 'Gibraltar', 'GIB', 292),
('GL', 'GREENLAND', 'Greenland', 'GRL', 304),
('GM', 'GAMBIA', 'Gambia', 'GMB', 270),
('GN', 'GUINEA', 'Guinea', 'GIN', 324),
('GP', 'GUADELOUPE', 'Guadeloupe', 'GLP', 312),
('GQ', 'EQUATORIAL GUINEA', 'Equatorial Guinea', 'GNQ', 226),
('GR', 'GREECE', 'Greece', 'GRC', 300),
('GS', 'SOUTH GEORGIA AND THE SOUTH SANDWICH ISLANDS', 'South Georgia and the South Sandwich Islands', NULL, NULL),
('GT', 'GUATEMALA', 'Guatemala', 'GTM', 320),
('GU', 'GUAM', 'Guam', 'GUM', 316),
('GW', 'GUINEA-BISSAU', 'Guinea-Bissau', 'GNB', 624),
('GY', 'GUYANA', 'Guyana', 'GUY', 328),
('HK', 'HONG KONG', 'Hong Kong', 'HKG', 344),
('HM', 'HEARD ISLAND AND MCDONALD ISLANDS', 'Heard Island and Mcdonald Islands', NULL, NULL),
('HN', 'HONDURAS', 'Honduras', 'HND', 340),
('HR', 'CROATIA', 'Croatia', 'HRV', 191),
('HT', 'HAITI', 'Haiti', 'HTI', 332),
('HU', 'HUNGARY', 'Hungary', 'HUN', 348),
('ID', 'INDONESIA', 'Indonesia', 'IDN', 360),
('IE', 'IRELAND', 'Ireland', 'IRL', 372),
('IL', 'ISRAEL', 'Israel', 'ISR', 376),
('IN', 'INDIA', 'India', 'IND', 356),
('IO', 'BRITISH INDIAN OCEAN TERRITORY', 'British Indian Ocean Territory', NULL, NULL),
('IQ', 'IRAQ', 'Iraq', 'IRQ', 368),
('IR', 'IRAN, ISLAMIC REPUBLIC OF', 'Iran, Islamic Republic of', 'IRN', 364),
('IS', 'ICELAND', 'Iceland', 'ISL', 352),
('IT', 'ITALY', 'Italy', 'ITA', 380),
('JM', 'JAMAICA', 'Jamaica', 'JAM', 388),
('JO', 'JORDAN', 'Jordan', 'JOR', 400),
('JP', 'JAPAN', 'Japan', 'JPN', 392),
('KE', 'KENYA', 'Kenya', 'KEN', 404),
('KG', 'KYRGYZSTAN', 'Kyrgyzstan', 'KGZ', 417),
('KH', 'CAMBODIA', 'Cambodia', 'KHM', 116),
('KI', 'KIRIBATI', 'Kiribati', 'KIR', 296),
('KM', 'COMOROS', 'Comoros', 'COM', 174),
('KN', 'SAINT KITTS AND NEVIS', 'Saint Kitts and Nevis', 'KNA', 659),
('KP', 'KOREA, DEMOCRATIC PEOPLE\'S REPUBLIC OF', 'Korea, Democratic People\'s Republic of', 'PRK', 408),
('KR', 'KOREA, REPUBLIC OF', 'Korea, Republic of', 'KOR', 410),
('KW', 'KUWAIT', 'Kuwait', 'KWT', 414),
('KY', 'CAYMAN ISLANDS', 'Cayman Islands', 'CYM', 136),
('KZ', 'KAZAKHSTAN', 'Kazakhstan', 'KAZ', 398),
('LA', 'LAO PEOPLE\'S DEMOCRATIC REPUBLIC', 'Lao People\'s Democratic Republic', 'LAO', 418),
('LB', 'LEBANON', 'Lebanon', 'LBN', 422),
('LC', 'SAINT LUCIA', 'Saint Lucia', 'LCA', 662),
('LI', 'LIECHTENSTEIN', 'Liechtenstein', 'LIE', 438),
('LK', 'SRI LANKA', 'Sri Lanka', 'LKA', 144),
('LR', 'LIBERIA', 'Liberia', 'LBR', 430),
('LS', 'LESOTHO', 'Lesotho', 'LSO', 426),
('LT', 'LITHUANIA', 'Lithuania', 'LTU', 440),
('LU', 'LUXEMBOURG', 'Luxembourg', 'LUX', 442),
('LV', 'LATVIA', 'Latvia', 'LVA', 428),
('LY', 'LIBYAN ARAB JAMAHIRIYA', 'Libyan Arab Jamahiriya', 'LBY', 434),
('MA', 'MOROCCO', 'Morocco', 'MAR', 504),
('MC', 'MONACO', 'Monaco', 'MCO', 492),
('MD', 'MOLDOVA, REPUBLIC OF', 'Moldova, Republic of', 'MDA', 498),
('MG', 'MADAGASCAR', 'Madagascar', 'MDG', 450),
('MH', 'MARSHALL ISLANDS', 'Marshall Islands', 'MHL', 584),
('MK', 'MACEDONIA, THE FORMER YUGOSLAV REPUBLIC OF', 'Macedonia, the Former Yugoslav Republic of', 'MKD', 807),
('ML', 'MALI', 'Mali', 'MLI', 466),
('MM', 'MYANMAR', 'Myanmar', 'MMR', 104),
('MN', 'MONGOLIA', 'Mongolia', 'MNG', 496),
('MO', 'MACAO', 'Macao', 'MAC', 446),
('MP', 'NORTHERN MARIANA ISLANDS', 'Northern Mariana Islands', 'MNP', 580),
('MQ', 'MARTINIQUE', 'Martinique', 'MTQ', 474),
('MR', 'MAURITANIA', 'Mauritania', 'MRT', 478),
('MS', 'MONTSERRAT', 'Montserrat', 'MSR', 500),
('MT', 'MALTA', 'Malta', 'MLT', 470),
('MU', 'MAURITIUS', 'Mauritius', 'MUS', 480),
('MV', 'MALDIVES', 'Maldives', 'MDV', 462),
('MW', 'MALAWI', 'Malawi', 'MWI', 454),
('MX', 'MEXICO', 'Mexico', 'MEX', 484),
('MY', 'MALAYSIA', 'Malaysia', 'MYS', 458),
('MZ', 'MOZAMBIQUE', 'Mozambique', 'MOZ', 508),
('NA', 'NAMIBIA', 'Namibia', 'NAM', 516),
('NC', 'NEW CALEDONIA', 'New Caledonia', 'NCL', 540),
('NE', 'NIGER', 'Niger', 'NER', 562),
('NF', 'NORFOLK ISLAND', 'Norfolk Island', 'NFK', 574),
('NG', 'NIGERIA', 'Nigeria', 'NGA', 566),
('NI', 'NICARAGUA', 'Nicaragua', 'NIC', 558),
('NL', 'NETHERLANDS', 'Netherlands', 'NLD', 528),
('NO', 'NORWAY', 'Norway', 'NOR', 578),
('NP', 'NEPAL', 'Nepal', 'NPL', 524),
('NR', 'NAURU', 'Nauru', 'NRU', 520),
('NU', 'NIUE', 'Niue', 'NIU', 570),
('NZ', 'NEW ZEALAND', 'New Zealand', 'NZL', 554),
('OM', 'OMAN', 'Oman', 'OMN', 512),
('PA', 'PANAMA', 'Panama', 'PAN', 591),
('PE', 'PERU', 'Peru', 'PER', 604),
('PF', 'FRENCH POLYNESIA', 'French Polynesia', 'PYF', 258),
('PG', 'PAPUA NEW GUINEA', 'Papua New Guinea', 'PNG', 598),
('PH', 'PHILIPPINES', 'Philippines', 'PHL', 608),
('PK', 'PAKISTAN', 'Pakistan', 'PAK', 586),
('PL', 'POLAND', 'Poland', 'POL', 616),
('PM', 'SAINT PIERRE AND MIQUELON', 'Saint Pierre and Miquelon', 'SPM', 666),
('PN', 'PITCAIRN', 'Pitcairn', 'PCN', 612),
('PR', 'PUERTO RICO', 'Puerto Rico', 'PRI', 630),
('PS', 'PALESTINIAN TERRITORY, OCCUPIED', 'Palestinian Territory, Occupied', NULL, NULL),
('PT', 'PORTUGAL', 'Portugal', 'PRT', 620),
('PW', 'PALAU', 'Palau', 'PLW', 585),
('PY', 'PARAGUAY', 'Paraguay', 'PRY', 600),
('QA', 'QATAR', 'Qatar', 'QAT', 634),
('RE', 'REUNION', 'Reunion', 'REU', 638),
('RO', 'ROMANIA', 'Romania', 'ROM', 642),
('RU', 'RUSSIAN FEDERATION', 'Russian Federation', 'RUS', 643),
('RW', 'RWANDA', 'Rwanda', 'RWA', 646),
('SA', 'SAUDI ARABIA', 'Saudi Arabia', 'SAU', 682),
('SB', 'SOLOMON ISLANDS', 'Solomon Islands', 'SLB', 90),
('SC', 'SEYCHELLES', 'Seychelles', 'SYC', 690),
('SD', 'SUDAN', 'Sudan', 'SDN', 736),
('SE', 'SWEDEN', 'Sweden', 'SWE', 752),
('SG', 'SINGAPORE', 'Singapore', 'SGP', 702),
('SH', 'SAINT HELENA', 'Saint Helena', 'SHN', 654),
('SI', 'SLOVENIA', 'Slovenia', 'SVN', 705),
('SJ', 'SVALBARD AND JAN MAYEN', 'Svalbard and Jan Mayen', 'SJM', 744),
('SK', 'SLOVAKIA', 'Slovakia', 'SVK', 703),
('SL', 'SIERRA LEONE', 'Sierra Leone', 'SLE', 694),
('SM', 'SAN MARINO', 'San Marino', 'SMR', 674),
('SN', 'SENEGAL', 'Senegal', 'SEN', 686),
('SO', 'SOMALIA', 'Somalia', 'SOM', 706),
('SR', 'SURINAME', 'Suriname', 'SUR', 740),
('ST', 'SAO TOME AND PRINCIPE', 'Sao Tome and Principe', 'STP', 678),
('SV', 'EL SALVADOR', 'El Salvador', 'SLV', 222),
('SY', 'SYRIAN ARAB REPUBLIC', 'Syrian Arab Republic', 'SYR', 760),
('SZ', 'SWAZILAND', 'Swaziland', 'SWZ', 748),
('TC', 'TURKS AND CAICOS ISLANDS', 'Turks and Caicos Islands', 'TCA', 796),
('TD', 'CHAD', 'Chad', 'TCD', 148),
('TF', 'FRENCH SOUTHERN TERRITORIES', 'French Southern Territories', NULL, NULL),
('TG', 'TOGO', 'Togo', 'TGO', 768),
('TH', 'THAILAND', 'Thailand', 'THA', 764),
('TJ', 'TAJIKISTAN', 'Tajikistan', 'TJK', 762),
('TK', 'TOKELAU', 'Tokelau', 'TKL', 772),
('TL', 'TIMOR-LESTE', 'Timor-Leste', NULL, NULL),
('TM', 'TURKMENISTAN', 'Turkmenistan', 'TKM', 795),
('TN', 'TUNISIA', 'Tunisia', 'TUN', 788),
('TO', 'TONGA', 'Tonga', 'TON', 776),
('TR', 'TURKEY', 'Turkey', 'TUR', 792),
('TT', 'TRINIDAD AND TOBAGO', 'Trinidad and Tobago', 'TTO', 780),
('TV', 'TUVALU', 'Tuvalu', 'TUV', 798),
('TW', 'TAIWAN', 'Taiwan', 'TWN', 158),
('TZ', 'TANZANIA, UNITED REPUBLIC OF', 'Tanzania, United Republic of', 'TZA', 834),
('UA', 'UKRAINE', 'Ukraine', 'UKR', 804),
('UG', 'UGANDA', 'Uganda', 'UGA', 800),
('UM', 'UNITED STATES MINOR OUTLYING ISLANDS', 'United States Minor Outlying Islands', 'UMI', 581),
('US', 'UNITED STATES', 'United States', 'USA', 840),
('UY', 'URUGUAY', 'Uruguay', 'URY', 858),
('UZ', 'UZBEKISTAN', 'Uzbekistan', 'UZB', 860),
('VA', 'HOLY SEE (VATICAN CITY STATE)', 'Holy See (Vatican City State)', 'VAT', 336),
('VC', 'SAINT VINCENT AND THE GRENADINES', 'Saint Vincent and the Grenadines', 'VCT', 670),
('VE', 'VENEZUELA', 'Venezuela', 'VEN', 862),
('VG', 'VIRGIN ISLANDS, BRITISH', 'Virgin Islands, British', 'VGB', 92),
('VI', 'VIRGIN ISLANDS, U.S.', 'Virgin Islands, U.s.', 'VIR', 850),
('VN', 'VIET NAM', 'Viet Nam', 'VNM', 704),
('VU', 'VANUATU', 'Vanuatu', 'VUT', 548),
('WF', 'WALLIS AND FUTUNA', 'Wallis and Futuna', 'WLF', 876),
('WS', 'SAMOA', 'Samoa', 'WSM', 882),
('YE', 'YEMEN', 'Yemen', 'YEM', 887),
('YT', 'MAYOTTE', 'Mayotte', NULL, NULL),
('ZA', 'SOUTH AFRICA', 'South Africa', 'ZAF', 710),
('ZM', 'ZAMBIA', 'Zambia', 'ZMB', 894),
('ZW', 'ZIMBABWE', 'Zimbabwe', 'ZWE', 716);

-- --------------------------------------------------------

--
-- Table structure for table `mm_country_subdivisions`
--

CREATE TABLE `mm_country_subdivisions` (
  `iso` char(2) COLLATE utf8_unicode_ci NOT NULL,
  `code` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(80) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(55) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_country_subdivisions`
--

INSERT INTO `mm_country_subdivisions` (`iso`, `code`, `name`, `type`) VALUES
('AD', '03', 'Encamp', 'Parish'),
('AD', '04', 'La Massana', 'Parish'),
('AD', '05', 'Ordino', 'Parish'),
('AD', '06', 'Sant Julià de Lòria', 'Parish'),
('AD', '07', 'Andorra la Vella', 'Parish'),
('AD', '08', 'Escaldes-Engordany', 'Parish'),
('AE', 'AJ', '\'Ajman', 'Emirate'),
('AE', 'AZ', 'Abu Z¸aby [Abu Dhabi]', 'Emirate'),
('AE', 'DU', 'Dubayy [Dubai]', 'Emirate'),
('AE', 'FU', 'Al Fujayrah', 'Emirate'),
('AE', 'RK', 'Ras al Khaymah', 'Emirate'),
('AE', 'SH', 'Ash Shariqah [Sharjah]', 'Emirate'),
('AE', 'UQ', 'Umm al Qaywayn', 'Emirate'),
('AF', 'BAL', 'Balkh', 'Province'),
('AF', 'BAM', 'Bamyan', 'Province'),
('AF', 'BDG', 'Badghis', 'Province'),
('AF', 'BDS', 'Badakhshan', 'Province'),
('AF', 'BGL', 'Baghlan', 'Province'),
('AF', 'DAY', 'Daykundi', 'Province'),
('AF', 'FRA', 'Farah', 'Province'),
('AF', 'FYB', 'Faryab', 'Province'),
('AF', 'GHA', 'Ghazni', 'Province'),
('AF', 'GHO', 'Ghor', 'Province'),
('AF', 'HEL', 'Helmand', 'Province'),
('AF', 'HER', 'Herat', 'Province'),
('AF', 'JOW', 'Jowzjan', 'Province'),
('AF', 'KAB', 'Kabul [Kabol]', 'Province'),
('AF', 'KAN', 'Kandahar', 'Province'),
('AF', 'KAP', 'Kapisa', 'Province'),
('AF', 'KDZ', 'Kondoz [Kunduz]', 'Province'),
('AF', 'KHO', 'Khost', 'Province'),
('AF', 'KNR', 'Konar [Kunar]', 'Province'),
('AF', 'LAG', 'Laghman', 'Province'),
('AF', 'LOG', 'Logar', 'Province'),
('AF', 'NAN', 'Nangrahar [Nangarhar]', 'Province'),
('AF', 'NIM', 'Nimroz', 'Province'),
('AF', 'NUR', 'Nuristan', 'Province'),
('AF', 'PAN', 'Panjshayr', 'Province'),
('AF', 'PAR', 'Parwan', 'Province'),
('AF', 'PIA', 'Paktia', 'Province'),
('AF', 'PKA', 'Paktika', 'Province'),
('AF', 'SAM', 'Samangan', 'Province'),
('AF', 'SAR', 'Sar-e Pul', 'Province'),
('AF', 'TAK', 'Takhar', 'Province'),
('AF', 'URU', 'Oruzgan [Uruzgan]', 'Province'),
('AF', 'WAR', 'Wardak [Wardag]', 'Province'),
('AF', 'ZAB', 'Zabol [Zabul]', 'Province'),
('AG', '03', 'Saint George', 'Parish'),
('AG', '04', 'Saint Johns', 'Parish'),
('AG', '05', 'Saint Mary', 'Parish'),
('AG', '06', 'Saint Paul', 'Parish'),
('AG', '07', 'Saint Peter', 'Parish'),
('AG', '08', 'Saint Philip', 'Parish'),
('AG', '10', 'Barbuda', 'Dependency'),
('AG', '11', 'Redonda', ''),
('AL', 'BR', 'Berat', 'District'),
('AL', 'BU', 'Bulqizë', 'District'),
('AL', 'DI', 'Dibër', 'District'),
('AL', 'DL', 'Delvinë', 'District'),
('AL', 'DR', 'Durrës', 'District'),
('AL', 'DV', 'Devoll', 'District'),
('AL', 'EL', 'Elbasan', 'District'),
('AL', 'ER', 'Kolonjë', 'District'),
('AL', 'FR', 'Fier', 'District'),
('AL', 'GJ', 'Gjirokastër', 'District'),
('AL', 'GR', 'Gramsh', 'District'),
('AL', 'HA', 'Has', 'District'),
('AL', 'KA', 'Kavajë', 'District'),
('AL', 'KB', 'Kurbin', 'District'),
('AL', 'KC', 'Kuçovë', 'District'),
('AL', 'KO', 'Korçë', 'District'),
('AL', 'KR', 'Krujë', 'District'),
('AL', 'KU', 'Kukës', 'District'),
('AL', 'LB', 'Librazhd', 'District'),
('AL', 'LE', 'Lezhë', 'District'),
('AL', 'LU', 'Lushnjë', 'District'),
('AL', 'MK', 'Mallakastër', 'District'),
('AL', 'MM', 'Malësi e Madhe', 'District'),
('AL', 'MR', 'Mirditë', 'District'),
('AL', 'MT', 'Mat', 'District'),
('AL', 'PG', 'Pogradec', 'District'),
('AL', 'PQ', 'Peqin', 'District'),
('AL', 'PR', 'Përmet', 'District'),
('AL', 'PU', 'Pukë', 'District'),
('AL', 'SH', 'Shkodër', 'District'),
('AL', 'SK', 'Skrapar', 'District'),
('AL', 'SR', 'Sarandë', 'District'),
('AL', 'TE', 'Tepelenë', 'District'),
('AL', 'TP', 'Tropojë', 'District'),
('AL', 'TR', 'Tiranë', 'District'),
('AL', 'VL', 'Vlorë', 'District'),
('AM', 'AG', 'Aragac?otn', 'Region'),
('AM', 'AR', 'Ararat', 'Region'),
('AM', 'AV', 'Armavir', 'Region'),
('AM', 'ER', 'Erevan', 'City'),
('AM', 'GR', 'Gegark\'unik\'', 'Region'),
('AM', 'KT', 'Kotayk\'', 'Region'),
('AM', 'LO', 'Lo?y', 'Region'),
('AM', 'SH', 'irak', 'Region'),
('AM', 'SU', 'Syunik\'', 'Region'),
('AM', 'TV', 'Tavu', 'Region'),
('AM', 'VD', 'Vayoc Jor', 'Region'),
('AO', 'BGO', 'Bengo', 'Province'),
('AO', 'BGU', 'Benguela', 'Province'),
('AO', 'BIE', 'Bié', 'Province'),
('AO', 'CAB', 'Cabinda', 'Province'),
('AO', 'CCU', 'Cuando-Cubango', 'Province'),
('AO', 'CNN', 'Cunene', 'Province'),
('AO', 'CNO', 'Cuanza Norte', 'Province'),
('AO', 'CUS', 'Cuanza Sul', 'Province'),
('AO', 'HUA', 'Huambo', 'Province'),
('AO', 'HUI', 'Huíla', 'Province'),
('AO', 'LNO', 'Lunda Norte', 'Province'),
('AO', 'LSU', 'Lunda Sul', 'Province'),
('AO', 'LUA', 'Luanda', 'Province'),
('AO', 'MAL', 'Malange', 'Province'),
('AO', 'MOX', 'Moxico', 'Province'),
('AO', 'NAM', 'Namibe', 'Province'),
('AO', 'UIG', 'Uíge', 'Province'),
('AO', 'ZAI', 'Zaire', 'Province'),
('AR', 'A', 'Salta', 'Province'),
('AR', 'B', 'Buenos Aires', 'Province'),
('AR', 'C', 'Ciudad Autónoma de Buenos Aires', 'City'),
('AR', 'D', 'San Luis', 'Province'),
('AR', 'E', 'Entre Ríos', 'Province'),
('AR', 'F', 'La Rioja', 'Province'),
('AR', 'G', 'Santiago del Estero', 'Province'),
('AR', 'H', 'Chaco', 'Province'),
('AR', 'J', 'San Juan', 'Province'),
('AR', 'K', 'Catamarca', 'Province'),
('AR', 'L', 'La Pampa', 'Province'),
('AR', 'M', 'Mendoza', 'Province'),
('AR', 'N', 'Misiones', 'Province'),
('AR', 'P', 'Formosa', 'Province'),
('AR', 'Q', 'Neuquén', 'Province'),
('AR', 'R', 'Río Negro', 'Province'),
('AR', 'S', 'Santa Fe', 'Province'),
('AR', 'T', 'Tucumán', 'Province'),
('AR', 'U', 'Chubut', 'Province'),
('AR', 'V', 'Tierra del Fuego', 'Province'),
('AR', 'W', 'Corrientes', 'Province'),
('AR', 'X', 'Córdoba', 'Province'),
('AR', 'Y', 'Jujuy', 'Province'),
('AR', 'Z', 'Santa Cruz', 'Province'),
('AT', '1', 'Burgenland', 'Bundesland'),
('AT', '2', 'Kärnten', 'Bundesland'),
('AT', '3', 'Niederösterreich', 'Bundesland'),
('AT', '4', 'Oberösterreich', 'Bundesland'),
('AT', '5', 'Salzburg', 'Bundesland'),
('AT', '6', 'Steiermark', 'Bundesland'),
('AT', '7', 'Tirol', 'Bundesland'),
('AT', '8', 'Vorarlberg', 'Bundesland'),
('AT', '9', 'Wien', 'Bundesland'),
('AU', 'ACT', 'Australian Capital Territory', 'Territory'),
('AU', 'NSW', 'New South Wales', 'State'),
('AU', 'NT', 'Northern Territory', 'Territory'),
('AU', 'QLD', 'Queensland', 'State'),
('AU', 'SA', 'South Australia', 'State'),
('AU', 'TAS', 'Tasmania', 'State'),
('AU', 'VIC', 'Victoria', 'State'),
('AU', 'WA', 'Western Australia', 'State'),
('AZ', 'ABS', 'Abseron', 'Rayon'),
('AZ', 'AGA', 'Agstafa', 'Rayon'),
('AZ', 'AGC', 'Agcab?di', 'Rayon'),
('AZ', 'AGM', 'Agdam', 'Rayon'),
('AZ', 'AGS', 'Agdas', 'Rayon'),
('AZ', 'AGU', 'Agsu', 'Rayon'),
('AZ', 'AST', 'Astara', 'Rayon'),
('AZ', 'BA', 'Baki', 'City'),
('AZ', 'BAB', 'Bab?k', 'Rayon'),
('AZ', 'BAL', 'Balak?n', 'Rayon'),
('AZ', 'BAR', 'B?rd?', 'Rayon'),
('AZ', 'BEY', 'Beyl?qan', 'Rayon'),
('AZ', 'BIL', 'Bil?suvar', 'Rayon'),
('AZ', 'CAB', 'C?brayil', 'Rayon'),
('AZ', 'CAL', 'C?lilabad', 'Rayon'),
('AZ', 'CUL', 'Culfa', 'Rayon'),
('AZ', 'DAS', 'Dask?s?n', 'Rayon'),
('AZ', 'FUZ', 'Füzuli', 'Rayon'),
('AZ', 'GA', 'G?nc?', 'City'),
('AZ', 'GAD', 'G?d?b?y', 'Rayon'),
('AZ', 'GOR', 'Goranboy', 'Rayon'),
('AZ', 'GOY', 'Göyçay', 'Rayon'),
('AZ', 'GYG', 'Göygöl', 'Rayon'),
('AZ', 'HAC', 'Haciqabul', 'Rayon'),
('AZ', 'IMI', 'Imisli', 'Rayon'),
('AZ', 'ISM', 'Ismayilli', 'Rayon'),
('AZ', 'KAL', 'K?lb?c?r', 'Rayon'),
('AZ', 'KAN', 'K?ng?rli', 'Rayon'),
('AZ', 'KUR', 'Kürd?mir', 'Rayon'),
('AZ', 'LA', 'L?nk?ran', 'City'),
('AZ', 'LAC', 'Laçin', 'Rayon'),
('AZ', 'LAN', 'L?nk?ran', 'Rayon'),
('AZ', 'LER', 'Lerik', 'Rayon'),
('AZ', 'MAS', 'Masalli', 'Rayon'),
('AZ', 'MI', 'Ming?çevir', 'City'),
('AZ', 'NA', 'Naftalan', 'City'),
('AZ', 'NEF', 'Neftçala', 'Rayon'),
('AZ', 'NV', 'Naxçývan', 'Municipality'),
('AZ', 'NX', 'Naxçivan', 'Autonomous republic'),
('AZ', 'OGU', 'Oguz', 'Rayon'),
('AZ', 'ORD', 'Ordubad', 'Rayon'),
('AZ', 'QAB', 'Q?b?l?', 'Rayon'),
('AZ', 'QAX', 'Qax', 'Rayon'),
('AZ', 'QAZ', 'Qazax', 'Rayon'),
('AZ', 'QBA', 'Quba', 'Rayon'),
('AZ', 'QBI', 'Qubadli', 'Rayon'),
('AZ', 'QOB', 'Qobustan', 'Rayon'),
('AZ', 'QUS', 'Qusar', 'Rayon'),
('AZ', 'SA', 'S?ki', 'City'),
('AZ', 'SAB', 'Sabirabad', 'Rayon'),
('AZ', 'SAD', 'S?d?r?k', 'Rayon'),
('AZ', 'SAH', 'Sahbuz', 'Rayon'),
('AZ', 'SAK', 'S?ki', 'Rayon'),
('AZ', 'SAL', 'Salyan', 'Rayon'),
('AZ', 'SAR', 'S?rur', 'Rayon'),
('AZ', 'SAT', 'Saatli', 'Rayon'),
('AZ', 'SBN', 'Sabran', 'Rayon'),
('AZ', 'SIY', 'Siy?z?n', 'Rayon'),
('AZ', 'SKR', 'S?mkir', 'Rayon'),
('AZ', 'SM', 'Sumqayit', 'City'),
('AZ', 'SMI', 'Samaxi', 'Rayon'),
('AZ', 'SMX', 'Samux', 'Rayon'),
('AZ', 'SR', 'Sirvan', 'Municipality'),
('AZ', 'SUS', 'Susa', 'Rayon'),
('AZ', 'TAR', 'T?rt?r', 'Rayon'),
('AZ', 'TOV', 'Tovuz', 'Rayon'),
('AZ', 'UCA', 'Ucar', 'Rayon'),
('AZ', 'XA', 'Xank?ndi', 'City'),
('AZ', 'XAC', 'Xaçmaz', 'Rayon'),
('AZ', 'XCI', 'Xocali', 'Rayon'),
('AZ', 'XIZ', 'Xizi', 'Rayon'),
('AZ', 'XVD', 'Xocav?nd', 'Rayon'),
('AZ', 'YAR', 'Yardimli', 'Rayon'),
('AZ', 'YE', 'Yevlax', 'City'),
('AZ', 'YEV', 'Yevlax', 'Rayon'),
('AZ', 'ZAN', 'Z?ngilan', 'Rayon'),
('AZ', 'ZAQ', 'Zaqatala', 'Rayon'),
('AZ', 'ZAR', 'Z?rdab', 'Rayon'),
('BA', '01', 'Unsko-Sanski Kanton', 'Kanton'),
('BA', '02', 'Posavski Kanton', 'Kanton'),
('BA', '03', 'Tuzlanski Kanton', 'Kanton'),
('BA', '04', 'Zenicko-Dobojski Kanton', 'Kanton'),
('BA', '05', 'Bosansko-Podrinjski Kanton', 'Kanton'),
('BA', '06', 'Srednjobosanski Kanton', 'Kanton'),
('BA', '07', 'Hercegovacko-Neretvanski Kanton', 'Kanton'),
('BA', '08', 'Zapadno-Hercegovacki Kanton', 'Kanton'),
('BA', '09', 'Kanton Sarajevo', 'Kanton'),
('BA', '10', 'Hercegovacko-Bosanski Kanton', 'Kanton'),
('BA', 'BRC', 'Brcko distrikt', 'Entity'),
('BA', 'SRP', 'Republika Srpska', 'Entity'),
('BB', '01', 'Christ Church', 'Parish'),
('BB', '02', 'Saint Andrew', 'Parish'),
('BB', '03', 'Saint George', 'Parish'),
('BB', '04', 'Saint James', 'Parish'),
('BB', '05', 'Saint John', 'Parish'),
('BB', '06', 'Saint Joseph', 'Parish'),
('BB', '07', 'Saint Lucy', 'Parish'),
('BB', '08', 'Saint Michael', 'Parish'),
('BB', '09', 'Saint Peter', 'Parish'),
('BB', '10', 'Saint Philip', 'Parish'),
('BB', '11', 'Saint Thomas', 'Parish'),
('BD', '01', 'Bandarban zila', 'District'),
('BD', '02', 'Barguna zila', 'District'),
('BD', '03', 'Bogra zila', 'District'),
('BD', '04', 'Brahmanbaria zila', 'District'),
('BD', '05', 'Bagerhat zila', 'District'),
('BD', '06', 'Barisal zila', 'District'),
('BD', '07', 'Bhola zila', 'District'),
('BD', '08', 'Comilla zila', 'District'),
('BD', '09', 'Chandpur zila', 'District'),
('BD', '10', 'Chittagong zila', 'District'),
('BD', '11', 'Cox\'s Bazar zila', 'District'),
('BD', '12', 'Chuadanga zila', 'District'),
('BD', '13', 'Dhaka zila', 'District'),
('BD', '14', 'Dinajpur zila', 'District'),
('BD', '15', 'Faridpur zila', 'District'),
('BD', '16', 'Feni zila', 'District'),
('BD', '17', 'Gopalganj zila', 'District'),
('BD', '18', 'Gazipur zila', 'District'),
('BD', '19', 'Gaibandha zila', 'District'),
('BD', '20', 'Habiganj zila', 'District'),
('BD', '21', 'Jamalpur zila', 'District'),
('BD', '22', 'Jessore zila', 'District'),
('BD', '23', 'Jhenaidah zila', 'District'),
('BD', '24', 'Jaipurhat zila', 'District'),
('BD', '25', 'Jhalakati zila', 'District'),
('BD', '26', 'Kishoreganj zila', 'District'),
('BD', '27', 'Khulna zila', 'District'),
('BD', '28', 'Kurigram zila', 'District'),
('BD', '29', 'Khagrachari zila', 'District'),
('BD', '30', 'Kushtia zila', 'District'),
('BD', '31', 'Lakshmipur zila', 'District'),
('BD', '32', 'Lalmonirhat zila', 'District'),
('BD', '33', 'Manikganj zila', 'District'),
('BD', '34', 'Mymensingh zila', 'District'),
('BD', '35', 'Munshiganj zila', 'District'),
('BD', '36', 'Madaripur zila', 'District'),
('BD', '37', 'Magura zila', 'District'),
('BD', '38', 'Moulvibazar zila', 'District'),
('BD', '39', 'Meherpur zila', 'District'),
('BD', '40', 'Narayanganj zila', 'District'),
('BD', '41', 'Netrakona zila', 'District'),
('BD', '42', 'Narsingdi zila', 'District'),
('BD', '43', 'Narail zila', 'District'),
('BD', '44', 'Natore zila', 'District'),
('BD', '45', 'Nawabganj zila', 'District'),
('BD', '46', 'Nilphamari zila', 'District'),
('BD', '47', 'Noakhali zila', 'District'),
('BD', '48', 'Naogaon zila', 'District'),
('BD', '49', 'Pabna zila', 'District'),
('BD', '50', 'Pirojpur zila', 'District'),
('BD', '51', 'Patuakhali zila', 'District'),
('BD', '52', 'Panchagarh zila', 'District'),
('BD', '53', 'Rajbari zila', 'District'),
('BD', '54', 'Rajshahi zila', 'District'),
('BD', '55', 'Rangpur zila', 'District'),
('BD', '56', 'Rangamati zila', 'District'),
('BD', '57', 'Sherpur zila', 'District'),
('BD', '58', 'Satkhira zila', 'District'),
('BD', '59', 'Sirajganj zila', 'District'),
('BD', '60', 'Sylhet zila', 'District'),
('BD', '61', 'Sunamganj zila', 'District'),
('BD', '62', 'Shariatpur zila', 'District'),
('BD', '63', 'Tangail zila', 'District'),
('BD', '64', 'Thakurgaon zila', 'District'),
('BE', 'BRU', 'Bruxelles-Capitale, Région de (fr), Brussels Hoofdstedelijk Gewest (nl)', 'Region'),
('BE', 'VAN', 'Antwerpen   (VLG)', 'Province'),
('BE', 'VBR', 'Vlaams Brabant (VLG)', 'Province'),
('BE', 'VLG', 'Vlaamse Gewest (nl)', 'Region'),
('BE', 'VLI', 'Limburg (VLG)', 'Province'),
('BE', 'VOV', 'Oost-Vlaanderen (VLG)', 'Province'),
('BE', 'VWV', 'West-Vlaanderen (VLG)', 'Province'),
('BE', 'WAL', 'Wallonne, Région (fr)', 'Region'),
('BE', 'WBR', 'Brabant Wallon (WAL)', 'Province'),
('BE', 'WHT', 'Hainaut (WAL)', 'Province'),
('BE', 'WLG', 'Liège (WAL)', 'Province'),
('BE', 'WLX', 'Luxembourg (WAL)', 'Province'),
('BE', 'WNA', 'Namur (WAL)', 'Province'),
('BF', 'BAL', 'Balé', 'Province'),
('BF', 'BAM', 'Bam', 'Province'),
('BF', 'BAN', 'Banwa', 'Province'),
('BF', 'BAZ', 'Bazégaga', 'Province'),
('BF', 'BGR', 'Bougouriba', 'Province'),
('BF', 'BLG', 'Boulgou', 'Province'),
('BF', 'BLK', 'Boulkiemdé', 'Province'),
('BF', 'COM', 'Comoé', 'Province'),
('BF', 'GAN', 'Ganzourgou', 'Province'),
('BF', 'GNA', 'Gnagna', 'Province'),
('BF', 'GOU', 'Gourma', 'Province'),
('BF', 'HOU', 'Houet', 'Province'),
('BF', 'IOB', 'Ioba', 'Province'),
('BF', 'KAD', 'Kadiogo', 'Province'),
('BF', 'KEN', 'Kénédougou', 'Province'),
('BF', 'KMD', 'Komondjari', 'Province'),
('BF', 'KMP', 'Kompienga', 'Province'),
('BF', 'KOP', 'Koulpélogo', 'Province'),
('BF', 'KOS', 'Kossi', 'Province'),
('BF', 'KOT', 'Kouritenga', 'Province'),
('BF', 'KOW', 'Kourwéogo', 'Province'),
('BF', 'LER', 'Léraba', 'Province'),
('BF', 'LOR', 'Loroum', 'Province'),
('BF', 'MOU', 'Mouhoun', 'Province'),
('BF', 'NAM', 'Namentenga', 'Province'),
('BF', 'NAO', 'Nahouri', 'Province'),
('BF', 'NAY', 'Nayala', 'Province'),
('BF', 'NOU', 'Noumbiel', 'Province'),
('BF', 'OUB', 'Oubritenga', 'Province'),
('BF', 'OUD', 'Oudalan', 'Province'),
('BF', 'PAS', 'Passoré', 'Province'),
('BF', 'PON', 'Poni', 'Province'),
('BF', 'SEN', 'Séno', 'Province'),
('BF', 'SIS', 'Sissili', 'Province'),
('BF', 'SMT', 'Sanmatenga', 'Province'),
('BF', 'SNG', 'Sanguié', 'Province'),
('BF', 'SOM', 'Soum', 'Province'),
('BF', 'SOR', 'Sourou', 'Province'),
('BF', 'TAP', 'Tapoa', 'Province'),
('BF', 'TUI', 'Tui', 'Province'),
('BF', 'YAG', 'Yagha', 'Province'),
('BF', 'YAT', 'Yatenga', 'Province'),
('BF', 'ZIR', 'Ziro', 'Province'),
('BF', 'ZON', 'Zondoma', 'Province'),
('BF', 'ZOU', 'Zoundwéogo', 'Province'),
('BG', '01', 'Blagoevgrad', 'Region'),
('BG', '02', 'Burgas', 'Region'),
('BG', '03', 'Varna', 'Region'),
('BG', '04', 'Veliko Tarnovo', 'Region'),
('BG', '05', 'Vidin', 'Region'),
('BG', '06', 'Vratsa', 'Region'),
('BG', '07', 'Gabrovo', 'Region'),
('BG', '08', 'Dobrich', 'Region'),
('BG', '09', 'Kardzhali', 'Region'),
('BG', '10', 'Kjustendil', 'Region'),
('BG', '11', 'Lovech', 'Region'),
('BG', '12', 'Montana', 'Region'),
('BG', '13', 'Pazardzik', 'Region'),
('BG', '14', 'Pernik', 'Region'),
('BG', '15', 'Pleven', 'Region'),
('BG', '16', 'Plovdiv', 'Region'),
('BG', '17', 'Razgrad', 'Region'),
('BG', '18', 'Ruse', 'Region'),
('BG', '19', 'Silistra', 'Region'),
('BG', '20', 'Sliven', 'Region'),
('BG', '21', 'Smolyan', 'Region'),
('BG', '22', 'Sofija-Grad', 'Region'),
('BG', '23', 'Sofija', 'Region'),
('BG', '24', 'Stara Zagora', 'Region'),
('BG', '25', 'Targovishte', 'Region'),
('BG', '26', 'Haskovo', 'Region'),
('BG', '27', 'Shumen', 'Region'),
('BG', '28', 'Yambol', 'Region'),
('BH', '13', 'Al Manamah (Al Asimah)', 'Governorat'),
('BH', '14', 'Al Janubiyah', 'Governorat'),
('BH', '15', 'Al Mu?arraq', 'Governorat'),
('BH', '16', 'Al Wustá', 'Governorat'),
('BH', '17', 'Ash Shamaliyah', 'Governorat'),
('BI', 'BB', 'Bubanza', 'Province'),
('BI', 'BL', 'Bujumbura Rural', 'Province'),
('BI', 'BM', 'Bujumbura Mairie', 'Province'),
('BI', 'BR', 'Bururi', 'Province'),
('BI', 'CA', 'Cankuzo', 'Province'),
('BI', 'CI', 'Cibitoke', 'Province'),
('BI', 'GI', 'Gitega', 'Province'),
('BI', 'KI', 'Kirundo', 'Province'),
('BI', 'KR', 'Karuzi', 'Province'),
('BI', 'KY', 'Kayanza', 'Province'),
('BI', 'MA', 'Makamba', 'Province'),
('BI', 'MU', 'Muramvya', 'Province'),
('BI', 'MW', 'Mwaro', 'Province'),
('BI', 'MY', 'Muyinga', 'Province'),
('BI', 'NG', 'Ngozi', 'Province'),
('BI', 'RT', 'Rutana', 'Province'),
('BI', 'RY', 'Ruyigi', 'Province'),
('BJ', 'AK', 'Atakora', 'Department'),
('BJ', 'AL', 'Alibori', 'Department'),
('BJ', 'AQ', 'Atlantique', 'Department'),
('BJ', 'BO', 'Borgou', 'Department'),
('BJ', 'CO', 'Collines', 'Department'),
('BJ', 'DO', 'Donga', 'Department'),
('BJ', 'KO', 'Kouffo', 'Department'),
('BJ', 'LI', 'Littoral', 'Department'),
('BJ', 'MO', 'Mono', 'Department'),
('BJ', 'OU', 'Ouémé', 'Department'),
('BJ', 'PL', 'Plateau', 'Department'),
('BJ', 'ZO', 'Zou', 'Department'),
('BN', 'BE', 'Belait', 'District'),
('BN', 'BM', 'Brunei-Muara', 'District'),
('BN', 'TE', 'Temburong', 'District'),
('BN', 'TU', 'Tutong', 'District'),
('BO', 'B', 'El Beni', 'Department'),
('BO', 'C', 'Cochabamba', 'Department'),
('BO', 'H', 'Chuquisaca', 'Department'),
('BO', 'L', 'La Paz', 'Department'),
('BO', 'N', 'Pando', 'Department'),
('BO', 'O', 'Oruro', 'Department'),
('BO', 'P', 'Potosí', 'Department'),
('BO', 'S', 'Santa Cruz', 'Department'),
('BO', 'T', 'Tarija', 'Department'),
('BR', 'AC', 'Acre', 'State'),
('BR', 'AL', 'Alagoas', 'State'),
('BR', 'AM', 'Amazonas', 'State'),
('BR', 'AP', 'Amapá', 'State'),
('BR', 'BA', 'Bahia', 'State'),
('BR', 'CE', 'Ceará', 'State'),
('BR', 'DF', 'Distrito Federal', 'Federal district'),
('BR', 'ES', 'Espírito Santo', 'State'),
('BR', 'GO', 'Goiás', 'State'),
('BR', 'MA', 'Maranhão', 'State'),
('BR', 'MG', 'Minas Gerais', 'State'),
('BR', 'MS', 'Mato Grosso do Sul', 'State'),
('BR', 'MT', 'Mato Grosso', 'State'),
('BR', 'PA', 'Pará', 'State'),
('BR', 'PB', 'Paraíba', 'State'),
('BR', 'PE', 'Pernambuco', 'State'),
('BR', 'PI', 'Piauí', 'State'),
('BR', 'PR', 'Paraná', 'State'),
('BR', 'RJ', 'Rio de Janeiro', 'State'),
('BR', 'RN', 'Rio Grande do Norte', 'State'),
('BR', 'RO', 'Rondônia', 'State'),
('BR', 'RR', 'Roraima', 'State'),
('BR', 'RS', 'Rio Grande do Sul', 'State'),
('BR', 'SC', 'Santa Catarina', 'State'),
('BR', 'SE', 'Sergipe', 'State'),
('BR', 'SP', 'São Paulo', 'State'),
('BR', 'TO', 'Tocantins', 'State'),
('BS', 'AK', 'Acklins', 'District'),
('BS', 'BI', 'Bimini', 'District'),
('BS', 'BP', 'Black Point', 'District'),
('BS', 'BY', 'Berry Islands', 'District'),
('BS', 'CE', 'Central Eleuthera', 'District'),
('BS', 'CI', 'Cat Island', 'District'),
('BS', 'CK', 'Crooked Island and Long Cay', 'District'),
('BS', 'CO', 'Central Abaco', 'District'),
('BS', 'CS', 'Central Andros', 'District'),
('BS', 'EG', 'East Grand Bahama', 'District'),
('BS', 'EX', 'Exuma', 'District'),
('BS', 'FP', 'Freeport', 'District'),
('BS', 'GC', 'Grand Cay', 'District'),
('BS', 'HI', 'Harbour Island', 'District'),
('BS', 'HT', 'Hope Town', 'District'),
('BS', 'IN', 'Inagua', 'District'),
('BS', 'LI', 'Long Island', 'District'),
('BS', 'MC', 'Mangrove Cay', 'District'),
('BS', 'MG', 'Mayaguana', 'District'),
('BS', 'MI', 'Moores Island', 'District'),
('BS', 'NE', 'North Eleuthera', 'District'),
('BS', 'NO', 'North Abaco', 'District'),
('BS', 'NS', 'North Andros', 'District'),
('BS', 'RC', 'Rum Cay', 'District'),
('BS', 'RI', 'Ragged Island', 'District'),
('BS', 'SA', 'South Andros', 'District'),
('BS', 'SE', 'South Eleuthera', 'District'),
('BS', 'SO', 'South Abaco', 'District'),
('BS', 'SS', 'San Salvador', 'District'),
('BS', 'SW', 'Spanish Wells', 'District'),
('BS', 'WG', 'West Grand Bahama', 'District'),
('BT', '11', 'Paro', 'District'),
('BT', '12', 'Chhukha', 'District'),
('BT', '13', 'Ha', 'District'),
('BT', '14', 'Samtse', 'District'),
('BT', '15', 'Thimphu', 'District'),
('BT', '21', 'Tsirang', 'District'),
('BT', '22', 'Dagana', 'District'),
('BT', '23', 'Punakha', 'District'),
('BT', '24', 'Wangdue Phodrang', 'District'),
('BT', '31', 'Sarpang', 'District'),
('BT', '32', 'Trongsa', 'District'),
('BT', '33', 'Bumthang', 'District'),
('BT', '34', 'Zhemgang', 'District'),
('BT', '41', 'Trashigang', 'District'),
('BT', '42', 'Monggar', 'District'),
('BT', '43', 'Pemagatshel', 'District'),
('BT', '44', 'Lhuentse', 'District'),
('BT', '45', 'Samdrup Jongkha', 'District'),
('BT', 'GA', 'Gasa', 'District'),
('BT', 'TY', 'Trashi Yangtse', 'District'),
('BW', 'CE', 'Central', 'District'),
('BW', 'GH', 'Ghanzi', 'District'),
('BW', 'KG', 'Kgalagadi', 'District'),
('BW', 'KL', 'Kgatleng', 'District'),
('BW', 'KW', 'Kweneng', 'District'),
('BW', 'NE', 'North-East', 'District'),
('BW', 'NW', 'North-West', 'District'),
('BW', 'SE', 'South-East', 'District'),
('BW', 'SO', 'Southern', 'District'),
('BY', 'BR', 'Brestskaya voblasts\' (be) - Brestskaya oblast\' (ru)', 'Oblast'),
('BY', 'HM', 'Horad Minsk', 'City'),
('BY', 'HO', 'Homyel\'skaya voblasts\' (be) - Gomel\'skaya oblast\' (ru)', 'Oblast'),
('BY', 'HR', 'Hrodzenskaya voblasts\' (be) - Grodnenskaya oblast\' (ru)', 'Oblast'),
('BY', 'MA', 'Mahilyowskaya voblasts\' (be) - Mogilevskaya oblast\' (ru)', 'Oblast'),
('BY', 'MI', 'Minskaya voblasts\' (be) - Minskaya oblast\' (ru)', 'Oblast'),
('BY', 'VI', 'Vitsyebskaya voblasts\' (be) - Vitebskaya oblast\' (ru)', 'Oblast'),
('BZ', 'BZ', 'Belize', 'District'),
('BZ', 'CY', 'Cayo', 'District'),
('BZ', 'CZL', 'Corozal', 'District'),
('BZ', 'OW', 'Orange Walk', 'District'),
('BZ', 'SC', 'Stann Creek', 'District'),
('BZ', 'TOL', 'Toledo', 'District'),
('CA', 'AB', 'Alberta', 'Province'),
('CA', 'BC', 'British Columbia', 'Province'),
('CA', 'MB', 'Manitoba', 'Province'),
('CA', 'NB', 'New Brunswick', 'Province'),
('CA', 'NL', 'Newfoundland and Labrador', 'Province'),
('CA', 'NS', 'Nova Scotia', 'Province'),
('CA', 'NT', 'Northwest Territories', 'Territory'),
('CA', 'NU', 'Nunavut', 'Territory'),
('CA', 'ON', 'Ontario', 'Province'),
('CA', 'PE', 'Prince Edward Island', 'Province'),
('CA', 'QC', 'Quebec', 'Province'),
('CA', 'SK', 'Saskatchewan', 'Province'),
('CA', 'YT', 'Yukon Territory', 'Territory'),
('CD', 'BC', 'Bas-Congo', 'Province'),
('CD', 'BN', 'Bandundu', 'Province'),
('CD', 'EQ', 'Équateur', 'Province'),
('CD', 'KA', 'Katanga', 'Province'),
('CD', 'KE', 'Kasai-Oriental', 'Province'),
('CD', 'KN', 'Kinshasa', 'City'),
('CD', 'KW', 'Kasai-Occidental', 'Province'),
('CD', 'MA', 'Maniema', 'Province'),
('CD', 'NK', 'Nord-Kivu', 'Province'),
('CD', 'OR', 'Orientale', 'Province'),
('CD', 'SK', 'Sud-Kivu', 'Province'),
('CF', 'AC', 'Ouham', 'Prefecture'),
('CF', 'BB', 'Bamingui-Bangoran', 'Prefecture'),
('CF', 'BGF', 'Bangui', 'Commune'),
('CF', 'BK', 'Basse-Kotto', 'Prefecture'),
('CF', 'HK', 'Haute-Kotto', 'Prefecture'),
('CF', 'HM', 'Haut-Mbomou', 'Prefecture'),
('CF', 'HS', 'Mambéré-Kadéï', 'Prefecture'),
('CF', 'KB', 'Nana-Grébizi', 'economic prefecture'),
('CF', 'KG', 'Kémo', 'Prefecture'),
('CF', 'LB', 'Lobaye', 'Prefecture'),
('CF', 'MB', 'Mbomou', 'Prefecture'),
('CF', 'MP', 'Ombella-Mpoko', 'Prefecture'),
('CF', 'NM', 'Nana-Mambéré', 'Prefecture'),
('CF', 'OP', 'Ouham-Pendé', 'Prefecture'),
('CF', 'SE', 'Sangha-Mbaéré', 'economic prefecture'),
('CF', 'UK', 'Ouaka', 'Prefecture'),
('CF', 'VK', 'Vakaga', 'Prefecture'),
('CG', '11', 'Bouenza', 'Region'),
('CG', '12', 'Pool', 'Region'),
('CG', '13', 'Sangha', 'Region'),
('CG', '14', 'Plateaux', 'Region'),
('CG', '15', 'Cuvette-Ouest', 'Region'),
('CG', '2', 'Lékoumou', 'Region'),
('CG', '5', 'Kouilou', 'Region'),
('CG', '7', 'Likouala', 'Region'),
('CG', '8', 'Cuvette', 'Region'),
('CG', '9', 'Niari', 'Region'),
('CG', 'BZV', 'Brazzaville', 'Capital'),
('CH', 'AG', 'Aargau (de)', 'Canton'),
('CH', 'AI', 'Appenzell Innerrhoden (de)', 'Canton'),
('CH', 'AR', 'Appenzell Ausserrhoden (de)', 'Canton'),
('CH', 'BE', 'Bern (de)', 'Canton'),
('CH', 'BL', 'Basel-Landschaft (de)', 'Canton'),
('CH', 'BS', 'Basel-Stadt (de)', 'Canton'),
('CH', 'FR', 'Fribourg (fr)', 'Canton'),
('CH', 'GE', 'Genève (fr)', 'Canton'),
('CH', 'GL', 'Glarus (de)', 'Canton'),
('CH', 'GR', 'Graubünden (de)', 'Canton'),
('CH', 'JU', 'Jura (fr)', 'Canton'),
('CH', 'LU', 'Luzern (de)', 'Canton'),
('CH', 'NE', 'Neuchâtel (fr)', 'Canton'),
('CH', 'NW', 'Nidwalden (de)', 'Canton'),
('CH', 'OW', 'Obwalden (de)', 'Canton'),
('CH', 'SG', 'Sankt Gallen (de)', 'Canton'),
('CH', 'SH', 'Schaffhausen (de)', 'Canton'),
('CH', 'SO', 'Solothurn (de)', 'Canton'),
('CH', 'SZ', 'Schwyz (de)', 'Canton'),
('CH', 'TG', 'Thurgau (de)', 'Canton'),
('CH', 'TI', 'Ticino (it)', 'Canton'),
('CH', 'UR', 'Uri (de)', 'Canton'),
('CH', 'VD', 'Vaud (fr)', 'Canton'),
('CH', 'VS', 'Valais (fr)', 'Canton'),
('CH', 'ZG', 'Zug (de)', 'Canton'),
('CH', 'ZH', 'Zürich (de)', 'Canton'),
('CI', '01', 'Lagunes (Région des)', 'Region'),
('CI', '02', 'Haut-Sassandra (Région du)', 'Region'),
('CI', '03', 'Savanes (Région des)', 'Region'),
('CI', '04', 'Vallée du Bandama (Région de la)', 'Region'),
('CI', '05', 'Moyen-Comoé (Région du)', 'Region'),
('CI', '06', '18 Montagnes (Région des)', 'Region'),
('CI', '07', 'Lacs (Région des)', 'Region'),
('CI', '08', 'Zanzan (Région du)', 'Region'),
('CI', '09', 'Bas-Sassandra (Région du)', 'Region'),
('CI', '10', 'Denguélé (Région du)', 'Region'),
('CI', '11', 'Nzi-Comoé (Région)', 'Region'),
('CI', '12', 'Marahoué (Région de la)', 'Region'),
('CI', '13', 'Sud-Comoé (Région du)', 'Region'),
('CI', '14', 'Worodougou (Région du)', 'Region'),
('CI', '15', 'Sud-Bandama (Région du)', 'Region'),
('CI', '16', 'Agnébi (Région de l\')', 'Region'),
('CI', '17', 'Bafing (Région du)', 'Region'),
('CI', '18', 'Fromager (Région du)', 'Region'),
('CI', '19', 'Moyen-Cavally (Région du)', 'Region'),
('CL', 'AI', 'Aisén del General Carlos Ibáñez del Campo', 'Region'),
('CL', 'AN', 'Antofagasta', 'Region'),
('CL', 'AP', 'Arica y Parinacota', 'Region'),
('CL', 'AR', 'Araucanía', 'Region'),
('CL', 'AT', 'Atacama', 'Region'),
('CL', 'BI', 'Bío-Bío', 'Region'),
('CL', 'CO', 'Coquimbo', 'Region'),
('CL', 'LI', 'Libertador General Bernardo O\'Higgins', 'Region'),
('CL', 'LL', 'Los Lagos', 'Region'),
('CL', 'LR', 'Los Ríos', 'Region'),
('CL', 'MA', 'Magallanes y Antártica Chilena', 'Region'),
('CL', 'ML', 'Maule', 'Region'),
('CL', 'RM', 'Región Metropolitana de Santiago', 'Region'),
('CL', 'TA', 'Tarapacá', 'Region'),
('CL', 'VS', 'Valparaíso', 'Region'),
('CM', 'AD', 'Adamaoua', 'Region'),
('CM', 'CE', 'Centre', 'Region'),
('CM', 'EN', 'Far North', 'Region'),
('CM', 'ES', 'East', 'Region'),
('CM', 'LT', 'Littoral', 'Region'),
('CM', 'NO', 'North', 'Region'),
('CM', 'NW', 'North-West', 'Region'),
('CM', 'OU', 'West', 'Region'),
('CM', 'SU', 'South', 'Region'),
('CM', 'SW', 'South-West', 'Region'),
('CN', '11', 'Beijing', 'Municipality'),
('CN', '12', 'Tianjin', 'Municipality'),
('CN', '13', 'Hebei', 'Province'),
('CN', '14', 'Shanxi', 'Province'),
('CN', '15', 'Nei Mongol (mn)', 'Autonomous Region'),
('CN', '21', 'Liaoning', 'Province'),
('CN', '22', 'Jilin', 'Province'),
('CN', '23', 'Heilongjiang', 'Province'),
('CN', '31', 'Shanghai', 'Municipality'),
('CN', '32', 'Jiangsu', 'Province'),
('CN', '33', 'Zhejiang', 'Province'),
('CN', '34', 'Anhui', 'Province'),
('CN', '35', 'Fujian', 'Province'),
('CN', '36', 'Jiangxi', 'Province'),
('CN', '37', 'Shandong', 'Province'),
('CN', '41', 'Henan', 'Province'),
('CN', '42', 'Hubei', 'Province'),
('CN', '43', 'Hunan', 'Province'),
('CN', '44', 'Guangdong', 'Province'),
('CN', '45', 'Guangxi', 'Autonomous Region'),
('CN', '46', 'Hainan', 'Province'),
('CN', '50', 'Chongqing', 'Municipality'),
('CN', '51', 'Sichuan', 'Province'),
('CN', '52', 'Guizhou', 'Province'),
('CN', '53', 'Yunnan', 'Province'),
('CN', '54', 'Xizang', 'Autonomous Region'),
('CN', '61', 'Shaanxi', 'Province'),
('CN', '62', 'Gansu', 'Province'),
('CN', '63', 'Qinghai', 'Province'),
('CN', '64', 'Ningxia', 'Autonomous Region'),
('CN', '65', 'Xinjiang', 'Autonomous Region'),
('CN', '71', 'Taiwan', 'Province'),
('CN', '91', 'Xianggang', 'Special Administrative Region'),
('CN', '92', 'Aomen', 'Special Administrative Region'),
('CO', 'AMA', 'Amazonas', 'Department'),
('CO', 'ANT', 'Antioquia', 'Department'),
('CO', 'ARA', 'Arauca', 'Department'),
('CO', 'ATL', 'Atlántico', 'Department'),
('CO', 'BOL', 'Bolívar', 'Department'),
('CO', 'BOY', 'Boyacá', 'Department'),
('CO', 'CAL', 'Caldas', 'Department'),
('CO', 'CAQ', 'Caquetá', 'Department'),
('CO', 'CAS', 'Casanare', 'Department'),
('CO', 'CAU', 'Cauca', 'Department'),
('CO', 'CES', 'Cesar', 'Department'),
('CO', 'CHO', 'Chocó', 'Department'),
('CO', 'COR', 'Córdoba', 'Department'),
('CO', 'CUN', 'Cundinamarca', 'Department'),
('CO', 'DC', 'Distrito Capital de Bogotá', 'Capital district'),
('CO', 'GUA', 'Guainía', 'Department'),
('CO', 'GUV', 'Guaviare', 'Department'),
('CO', 'HUI', 'Huila', 'Department'),
('CO', 'LAG', 'La Guajira', 'Department'),
('CO', 'MAG', 'Magdalena', 'Department'),
('CO', 'MET', 'Meta', 'Department'),
('CO', 'NAR', 'Nariño', 'Department'),
('CO', 'NSA', 'Norte de Santander', 'Department'),
('CO', 'PUT', 'Putumayo', 'Department'),
('CO', 'QUI', 'Quindío', 'Department'),
('CO', 'RIS', 'Risaralda', 'Department'),
('CO', 'SAN', 'Santander', 'Department'),
('CO', 'SAP', 'San Andrés, Providencia y Santa Catalina', 'Department'),
('CO', 'SUC', 'Sucre', 'Department'),
('CO', 'TOL', 'Tolima', 'Department'),
('CO', 'VAC', 'Valle del Cauca', 'Department'),
('CO', 'VAU', 'Vaupés', 'Department'),
('CO', 'VID', 'Vichada', 'Department'),
('CR', 'A', 'Alajuela', 'Province'),
('CR', 'C', 'Cartago', 'Province'),
('CR', 'G', 'Guanacaste', 'Province'),
('CR', 'H', 'Heredia', 'Province'),
('CR', 'L', 'Limón', 'Province'),
('CR', 'P', 'Puntarenas', 'Province'),
('CR', 'SJ', 'San José', 'Province'),
('CU', '01', 'Pinar del Río', 'Province'),
('CU', '02', 'La Habana', 'Province'),
('CU', '03', 'Ciudad de La Habana', 'Province'),
('CU', '04', 'Matanzas', 'Province'),
('CU', '05', 'Villa Clara', 'Province'),
('CU', '06', 'Cienfuegos', 'Province'),
('CU', '07', 'Sancti Spíritus', 'Province'),
('CU', '08', 'Ciego de Ávila', 'Province'),
('CU', '09', 'Camagüey', 'Province'),
('CU', '10', 'Las Tunas', 'Province'),
('CU', '11', 'Holguín', 'Province'),
('CU', '12', 'Granma', 'Province'),
('CU', '13', 'Santiago de Cuba', 'Province'),
('CU', '14', 'Guantánamo', 'Province'),
('CU', '99', 'Isla de la Juventud', 'Special municipality'),
('CV', 'BR', 'Brava', 'Municipality'),
('CV', 'BV', 'Boa Vista', 'Municipality'),
('CV', 'CA', 'Santa Catarina', 'Municipality'),
('CV', 'CF', 'Santa Catarina do Fogo', 'Municipality'),
('CV', 'CR', 'Santa Cruz', 'Municipality'),
('CV', 'CS', 'Calheta de São Miguel', 'Municipality'),
('CV', 'MA', 'Maio', 'Municipality'),
('CV', 'MO', 'Mosteiros', 'Municipality'),
('CV', 'PA', 'Paúl', 'Municipality'),
('CV', 'PN', 'Porto Novo', 'Municipality'),
('CV', 'PR', 'Praia', 'Municipality'),
('CV', 'RB', 'Ribeira Brava', 'Municipality'),
('CV', 'RG', 'Ribeira Grande', 'Municipality'),
('CV', 'RS', 'Ribeira Grande de Santiago', 'Municipality'),
('CV', 'SD', 'São Domingos', 'Municipality'),
('CV', 'SF', 'São Filipe', 'Municipality'),
('CV', 'SL', 'Sal', 'Municipality'),
('CV', 'SM', 'São Miguel', 'Municipality'),
('CV', 'SS', 'São Salvador do Mundo', 'Municipality'),
('CV', 'SV', 'São Vicente', 'Municipality'),
('CV', 'TA', 'Tarrafal', 'Municipality'),
('CV', 'TS', 'Tarrafal de São Nicolau', 'Municipality'),
('CY', '01', 'Lefkosia', 'District'),
('CY', '02', 'Lemesos', 'District'),
('CY', '03', 'Larnaka', 'District'),
('CY', '04', 'Ammochostos', 'District'),
('CY', '05', 'Pafos', 'District'),
('CY', '06', 'Keryneia', 'District'),
('CZ', 'JC', 'Jihoceský kraj', 'Region'),
('CZ', 'JM', 'Jihomoravský kraj', 'Region'),
('CZ', 'KA', 'Karlovarský kraj', 'Region'),
('CZ', 'KR', 'Královéhradecký kraj', 'Region'),
('CZ', 'LI', 'Liberecký kraj', 'Region'),
('CZ', 'MO', 'Moravskoslezský kraj', 'Region'),
('CZ', 'OL', 'Olomoucký kraj', 'Region'),
('CZ', 'PA', 'Pardubický kraj', 'Region'),
('CZ', 'PL', 'Plzenský kraj', 'Region'),
('CZ', 'PR', 'Praha, hlavní mesto', 'Region'),
('CZ', 'ST', 'Stredoceský kraj', 'Region'),
('CZ', 'US', 'Ústecký kraj', 'Region'),
('CZ', 'VY', 'Vysocina', 'Region'),
('CZ', 'ZL', 'Zlínský kraj', 'Region'),
('DE', 'BB', 'Brandenburg', 'Land'),
('DE', 'BE', 'Berlin', 'Land'),
('DE', 'BW', 'Baden-Württemberg', 'Land'),
('DE', 'BY', 'Bayern', 'Land'),
('DE', 'HB', 'Bremen', 'Land'),
('DE', 'HE', 'Hessen', 'Land'),
('DE', 'HH', 'Hamburg', 'Land'),
('DE', 'MV', 'Mecklenburg-Vorpommern', 'Land'),
('DE', 'NI', 'Niedersachsen', 'Land'),
('DE', 'NW', 'Nordrhein-Westfalen', 'Land'),
('DE', 'RP', 'Rheinland-Pfalz', 'Land'),
('DE', 'SH', 'Schleswig-Holstein', 'Land'),
('DE', 'SL', 'Saarland', 'Land'),
('DE', 'SN', 'Sachsen', 'Land'),
('DE', 'ST', 'Sachsen-Anhalt', 'Land'),
('DE', 'TH', 'Thüringen', 'Land'),
('DJ', 'AR', 'Arta', 'District'),
('DJ', 'AS', 'Ali Sabieh', 'District'),
('DJ', 'DI', 'Dikhil', 'District'),
('DJ', 'DJ', 'Djibouti', 'City'),
('DJ', 'OB', 'Obock', 'District'),
('DJ', 'TA', 'Tadjoura', 'District'),
('DK', '81', 'Region Nordjylland', 'Region'),
('DK', '82', 'Region Midtjylland', 'Region'),
('DK', '83', 'Region Syddanmark', 'Region'),
('DK', '84', 'Region Hovedstaden', 'Region'),
('DK', '85', 'Region Sjælland', 'Region'),
('DM', '02', 'Saint Andrew', ''),
('DM', '03', 'Saint David', ''),
('DM', '04', 'Saint George', ''),
('DM', '05', 'Saint John', ''),
('DM', '06', 'Saint Joseph', ''),
('DM', '07', 'Saint Luke', ''),
('DM', '08', 'Saint Mark', ''),
('DM', '09', 'Saint Patrick', ''),
('DM', '10', 'Saint Paul', ''),
('DM', '11', 'Saint Peter', ''),
('DO', '01', 'Distrito Nacional (Santo Domingo)', 'District'),
('DO', '02', 'Azua', 'Province'),
('DO', '03', 'Bahoruco', 'Province'),
('DO', '04', 'Barahona', 'Province'),
('DO', '05', 'Dajabón', 'Province'),
('DO', '06', 'Duarte', 'Province'),
('DO', '07', 'La Estrelleta [Elías Piña]', 'Province'),
('DO', '08', 'El Seybo [El Seibo]', 'Province'),
('DO', '09', 'Espaillat', 'Province'),
('DO', '10', 'Independencia', 'Province'),
('DO', '11', 'La Altagracia', 'Province'),
('DO', '12', 'La Romana', 'Province'),
('DO', '13', 'La Vega', 'Province'),
('DO', '14', 'María Trinidad Sánchez', 'Province'),
('DO', '15', 'Monte Cristi', 'Province'),
('DO', '16', 'Pedernales', 'Province'),
('DO', '17', 'Peravia', 'Province'),
('DO', '18', 'Puerto Plata', 'Province'),
('DO', '19', 'Salcedo', 'Province'),
('DO', '20', 'Samaná', 'Province'),
('DO', '21', 'San Cristóbal', 'Province'),
('DO', '22', 'San Juan', 'Province'),
('DO', '23', 'San Pedro de Macorís', 'Province'),
('DO', '24', 'Sánchez Ramírez', 'Province'),
('DO', '25', 'Santiago', 'Province'),
('DO', '26', 'Santiago Rodríguez', 'Province'),
('DO', '27', 'Valverde', 'Province'),
('DO', '28', 'Monseñor Nouel', 'Province'),
('DO', '29', 'Monte Plata', 'Province'),
('DO', '30', 'Hato Mayor', 'Province'),
('DO', '31', 'San José de Ocoa', 'Province'),
('DO', '32', 'Santo Domingo', 'Province'),
('DZ', '01', 'Adrar', 'Province'),
('DZ', '02', 'Chlef', 'Province'),
('DZ', '03', 'Laghouat', 'Province'),
('DZ', '04', 'Oum el Bouaghi', 'Province'),
('DZ', '05', 'Batna', 'Province'),
('DZ', '06', 'Béjaïa', 'Province'),
('DZ', '07', 'Biskra', 'Province'),
('DZ', '08', 'Béchar', 'Province'),
('DZ', '09', 'Blida', 'Province'),
('DZ', '10', 'Bouira', 'Province'),
('DZ', '11', 'Tamanghasset', 'Province'),
('DZ', '12', 'Tébessa', 'Province'),
('DZ', '13', 'Tlemcen', 'Province'),
('DZ', '14', 'Tiaret', 'Province'),
('DZ', '15', 'Tizi Ouzou', 'Province'),
('DZ', '16', 'Alger', 'Province'),
('DZ', '17', 'Djelfa', 'Province'),
('DZ', '18', 'Jijel', 'Province'),
('DZ', '19', 'Sétif', 'Province'),
('DZ', '20', 'Saïda', 'Province'),
('DZ', '21', 'Skikda', 'Province'),
('DZ', '22', 'Sidi Bel Abbès', 'Province'),
('DZ', '23', 'Annaba', 'Province'),
('DZ', '24', 'Guelma', 'Province'),
('DZ', '25', 'Constantine', 'Province'),
('DZ', '26', 'Médéa', 'Province'),
('DZ', '27', 'Mostaganem', 'Province'),
('DZ', '28', 'Msila', 'Province'),
('DZ', '29', 'Mascara', 'Province'),
('DZ', '30', 'Ouargla', 'Province'),
('DZ', '31', 'Oran', 'Province'),
('DZ', '32', 'El Bayadh', 'Province'),
('DZ', '33', 'Illizi', 'Province'),
('DZ', '34', 'Bordj Bou Arréridj', 'Province'),
('DZ', '35', 'Boumerdès', 'Province'),
('DZ', '36', 'El Tarf', 'Province'),
('DZ', '37', 'Tindouf', 'Province'),
('DZ', '38', 'Tissemsilt', 'Province'),
('DZ', '39', 'El Oued', 'Province'),
('DZ', '40', 'Khenchela', 'Province'),
('DZ', '41', 'Souk Ahras', 'Province'),
('DZ', '42', 'Tipaza', 'Province'),
('DZ', '43', 'Mila', 'Province'),
('DZ', '44', 'Aïn Defla', 'Province'),
('DZ', '45', 'Naama', 'Province'),
('DZ', '46', 'Aïn Témouchent', 'Province'),
('DZ', '47', 'Ghardaïa', 'Province'),
('DZ', '48', 'Relizane', 'Province'),
('EC', 'A', 'Azuay', 'Province'),
('EC', 'B', 'Bolívar', 'Province'),
('EC', 'C', 'Carchi', 'Province'),
('EC', 'D', 'Orellana', 'Province'),
('EC', 'E', 'Esmeraldas', 'Province'),
('EC', 'F', 'Cañar', 'Province'),
('EC', 'G', 'Guayas', 'Province'),
('EC', 'H', 'Chimborazo', 'Province'),
('EC', 'I', 'Imbabura', 'Province'),
('EC', 'L', 'Loja', 'Province'),
('EC', 'M', 'Manabí', 'Province'),
('EC', 'N', 'Napo', 'Province'),
('EC', 'O', 'El Oro', 'Province'),
('EC', 'P', 'Pichincha', 'Province'),
('EC', 'R', 'Los Ríos', 'Province'),
('EC', 'S', 'Morona-Santiago', 'Province'),
('EC', 'SD', 'Santo Domingo de los Tsáchilas', 'Province'),
('EC', 'SE', 'Santa Elena', 'Province'),
('EC', 'T', 'Tungurahua', 'Province'),
('EC', 'U', 'Sucumbíos', 'Province'),
('EC', 'W', 'Galápagos', 'Province'),
('EC', 'X', 'Cotopaxi', 'Province'),
('EC', 'Y', 'Pastaza', 'Province'),
('EC', 'Z', 'Zamora-Chinchipe', 'Province'),
('EE', '37', 'Harjumaa', 'County'),
('EE', '39', 'Hiiumaa', 'County'),
('EE', '44', 'Ida-Virumaa', 'County'),
('EE', '49', 'Jõgevamaa', 'County'),
('EE', '51', 'Järvamaa', 'County'),
('EE', '57', 'Läänemaa', 'County'),
('EE', '59', 'Lääne-Virumaa', 'County'),
('EE', '65', 'Põlvamaa', 'County'),
('EE', '67', 'Pärnumaa', 'County'),
('EE', '70', 'Raplamaa', 'County'),
('EE', '74', 'Saaremaa', 'County'),
('EE', '78', 'Tartumaa', 'County'),
('EE', '82', 'Valgamaa', 'County'),
('EE', '84', 'Viljandimaa', 'County'),
('EE', '86', 'Võrumaa', 'County'),
('EG', 'ALX', 'AI Iskandariyah', 'Governorate'),
('EG', 'ASN', 'Aswan', 'Governorate'),
('EG', 'AST', 'Asyut', 'Governorate'),
('EG', 'BA', 'AI Bah¸r al Ah¸mar', 'Governorate'),
('EG', 'BH', 'AI Buh¸ayrah', 'Governorate'),
('EG', 'BNS', 'Bani Suwayf', 'Governorate'),
('EG', 'C', 'AI Qahirah', 'Governorate'),
('EG', 'DK', 'Ad Daqahliyah', 'Governorate'),
('EG', 'DT', 'Dumyat', 'Governorate'),
('EG', 'FYM', 'AI Fayyum', 'Governorate'),
('EG', 'GH', 'AI Gharbiyah', 'Governorate'),
('EG', 'GZ', 'AI Jizah', 'Governorate'),
('EG', 'HU', '?ulwan', 'Governorate'),
('EG', 'IS', 'AI Isma \'iliyah', 'Governorate'),
('EG', 'JS', 'Janub Sina\'', 'Governorate'),
('EG', 'KB', 'AI Qalyubiyah', 'Governorate'),
('EG', 'KFS', 'Kafr ash Shaykh', 'Governorate'),
('EG', 'KN', 'Qina', 'Governorate'),
('EG', 'LX', 'Al Uqsur', 'Governorate'),
('EG', 'MN', 'AI Minya', 'Governorate'),
('EG', 'MNF', 'AI Minufiyah', 'Governorate'),
('EG', 'MT', 'Matruh', 'Governorate'),
('EG', 'PTS', 'Bur Sa\'id', 'Governorate'),
('EG', 'SHG', 'Suhaj', 'Governorate'),
('EG', 'SHR', 'Ash Sharqiyah', 'Governorate'),
('EG', 'SIN', 'Shamal Sina\'', 'Governorate'),
('EG', 'SU', 'As Sadis min Uktubar', 'Governorate'),
('EG', 'SUZ', 'As Suways', 'Governorate'),
('EG', 'WAD', 'AI Wadi al Jadid', 'Governorate'),
('ER', 'AN', 'Anseba', 'Region'),
('ER', 'DK', 'Debubawi Keyih Bahri [Debub-Keih-Bahri]', 'Region'),
('ER', 'DU', 'Debub', 'Region'),
('ER', 'GB', 'Gash-Barka', 'Region'),
('ER', 'MA', 'Maakel [Maekel]', 'Region'),
('ER', 'SK', 'Semenawi Keyih Bahri [Semien-Keih-Bahri]', 'Region'),
('ES', 'A', 'Alicante / Alacant', 'Province'),
('ES', 'AB', 'Albacete', 'Province'),
('ES', 'AL', 'Almería', 'Province'),
('ES', 'AV', 'Ávila', 'Province'),
('ES', 'B', 'Barcelona  [Barcelona]', 'Province'),
('ES', 'BA', 'Badajoz', 'Province'),
('ES', 'BI', 'Vizcaya / Biskaia', 'Province'),
('ES', 'BU', 'Burgos', 'Province'),
('ES', 'C', 'A Coruña  [La Coruña]', 'Province'),
('ES', 'CA', 'Cádiz', 'Province'),
('ES', 'CC', 'Cáceres', 'Province'),
('ES', 'CE', 'Ceuta', 'Autonomous city in North Africa'),
('ES', 'CO', 'Córdoba', 'Province'),
('ES', 'CR', 'Ciudad Real', 'Province'),
('ES', 'CS', 'Castellón / Castelló', 'Province'),
('ES', 'CU', 'Cuenca', 'Province'),
('ES', 'GC', 'Las Palmas', 'Province'),
('ES', 'GI', 'Girona  [Gerona]', 'Province'),
('ES', 'GR', 'Granada', 'Province'),
('ES', 'GU', 'Guadalajara', 'Province'),
('ES', 'H', 'Huelva', 'Province'),
('ES', 'HU', 'Huesca', 'Province'),
('ES', 'J', 'Jaén', 'Province'),
('ES', 'L', 'Lleida  [Lérida]', 'Province'),
('ES', 'LE', 'León', 'Province'),
('ES', 'LO', 'La Rioja', 'Province'),
('ES', 'LU', 'Lugo  [Lugo]', 'Province'),
('ES', 'M', 'Madrid', 'Province'),
('ES', 'MA', 'Málaga', 'Province'),
('ES', 'ML', 'Melilla', 'Autonomous city in North Africa'),
('ES', 'MU', 'Murcia', 'Province'),
('ES', 'NA', 'Navarra / Nafarroa', 'Province'),
('ES', 'O', 'Asturias', 'Province'),
('ES', 'OR', 'Ourense  [Orense]', 'Province'),
('ES', 'P', 'Palencia', 'Province'),
('ES', 'PM', 'Balears  [Baleares]', 'Province'),
('ES', 'PO', 'Pontevedra  [Pontevedra]', 'Province'),
('ES', 'S', 'Cantabria', 'Province'),
('ES', 'SA', 'Salamanca', 'Province'),
('ES', 'SE', 'Sevilla', 'Province'),
('ES', 'SG', 'Segovia', 'Province'),
('ES', 'SO', 'Soria', 'Province'),
('ES', 'SS', 'Guipúzcoa / Gipuzkoa', 'Province'),
('ES', 'T', 'Tarragona  [Tarragona]', 'Province'),
('ES', 'TE', 'Teruel', 'Province'),
('ES', 'TF', 'Santa Cruz de Tenerife', 'Province'),
('ES', 'TO', 'Toledo', 'Province'),
('ES', 'V', 'Valencia / València', 'Province'),
('ES', 'VA', 'Valladolid', 'Province'),
('ES', 'VI', 'Álava / Araba', 'Province'),
('ES', 'Z', 'Zaragoza', 'Province'),
('ES', 'ZA', 'Zamora', 'Province'),
('ET', 'AA', 'Adis Abeba', 'Administration'),
('ET', 'AF', 'Afar', 'State'),
('ET', 'AM', 'Amara', 'State'),
('ET', 'BE', 'Binshangul Gumuz', 'State'),
('ET', 'DD', 'Dire Dawa', 'Administration'),
('ET', 'GA', 'Gambela Hizboch', 'State'),
('ET', 'HA', 'Hareri Hizb', 'State'),
('ET', 'OR', 'Oromiya', 'State'),
('ET', 'SN', 'YeDebub Biheroch Bihereseboch na Hizboch', 'State'),
('ET', 'SO', 'Sumale', 'State'),
('ET', 'TI', 'Tigray', 'State'),
('FI', '01', 'Ahvenanmaan maakunta', 'Region'),
('FI', '02', 'Etelä-Karjala', 'Region'),
('FI', '03', 'Etelä-Pohjanmaa', 'Region'),
('FI', '04', 'Etelä-Savo', 'Region'),
('FI', '05', 'Kainuu', 'Region'),
('FI', '06', 'Kanta-Häme', 'Region'),
('FI', '07', 'Keski-Pohjanmaa', 'Region'),
('FI', '08', 'Keski-Suomi', 'Region'),
('FI', '09', 'Kymenlaakso', 'Region'),
('FI', '10', 'Lappi', 'Region'),
('FI', '11', 'Pirkanmaa', 'Region'),
('FI', '12', 'Pohjanmaa', 'Region'),
('FI', '13', 'Pohjois-Karjala', 'Region'),
('FI', '14', 'Pohjois-Pohjanmaa', 'Region'),
('FI', '15', 'Pohjois-Savo', 'Region'),
('FI', '16', 'Päijät-Häme', 'Region'),
('FI', '17', 'Satakunta', 'Region'),
('FI', '18', 'Uusimaa', 'Region'),
('FI', '19', 'Varsinais-Suomi', 'Region'),
('FJ', 'C', 'Central', 'Division'),
('FJ', 'E', 'Eastern', 'Division'),
('FJ', 'N', 'Northern', 'Division'),
('FJ', 'R', 'Rotuma', 'Dependency'),
('FJ', 'W', 'Western', 'Division'),
('FM', 'KSA', 'Kosrae', 'State'),
('FM', 'PNI', 'Pohnpei', 'State'),
('FM', 'TRK', 'Chuuk', 'State'),
('FM', 'YAP', 'Yap', 'State'),
('FR', '01', 'Ain', 'Metropolitan department'),
('FR', '02', 'Aisne', 'Metropolitan department'),
('FR', '03', 'Allier', 'Metropolitan department'),
('FR', '04', 'Alpes-de-Haute-Provence', 'Metropolitan department'),
('FR', '05', 'Hautes-Alpes', 'Metropolitan department'),
('FR', '06', 'Alpes-Maritimes', 'Metropolitan department'),
('FR', '07', 'Ardèche', 'Metropolitan department'),
('FR', '08', 'Ardennes', 'Metropolitan department'),
('FR', '09', 'Ariège', 'Metropolitan department'),
('FR', '10', 'Aube', 'Metropolitan department'),
('FR', '11', 'Aude', 'Metropolitan department'),
('FR', '12', 'Aveyron', 'Metropolitan department'),
('FR', '13', 'Bouches-du-Rhône', 'Metropolitan department'),
('FR', '14', 'Calvados', 'Metropolitan department'),
('FR', '15', 'Cantal', 'Metropolitan department'),
('FR', '16', 'Charente', 'Metropolitan department'),
('FR', '17', 'Charente-Maritime', 'Metropolitan department'),
('FR', '18', 'Cher', 'Metropolitan department'),
('FR', '19', 'Corrèze', 'Metropolitan department'),
('FR', '21', 'Côte-d\'Or', 'Metropolitan department'),
('FR', '22', 'Côtes-d\'Armor', 'Metropolitan department'),
('FR', '23', 'Creuse', 'Metropolitan department'),
('FR', '24', 'Dordogne', 'Metropolitan department'),
('FR', '25', 'Doubs', 'Metropolitan department'),
('FR', '26', 'Drôme', 'Metropolitan department'),
('FR', '27', 'Eure', 'Metropolitan department'),
('FR', '28', 'Eure-et-Loir', 'Metropolitan department'),
('FR', '29', 'Finistère', 'Metropolitan department'),
('FR', '2A', 'Corse-du-Sud', 'Metropolitan department'),
('FR', '2B', 'Haute-Corse', 'Metropolitan department'),
('FR', '30', 'Gard', 'Metropolitan department'),
('FR', '31', 'Haute-Garonne', 'Metropolitan department'),
('FR', '32', 'Gers', 'Metropolitan department'),
('FR', '33', 'Gironde', 'Metropolitan department'),
('FR', '34', 'Hérault', 'Metropolitan department'),
('FR', '35', 'Ille-et-Vilaine', 'Metropolitan department'),
('FR', '36', 'Indre', 'Metropolitan department'),
('FR', '37', 'Indre-et-Loire', 'Metropolitan department'),
('FR', '38', 'Isère', 'Metropolitan department'),
('FR', '39', 'Jura', 'Metropolitan department'),
('FR', '40', 'Landes', 'Metropolitan department'),
('FR', '41', 'Loir-et-Cher', 'Metropolitan department'),
('FR', '42', 'Loire', 'Metropolitan department'),
('FR', '43', 'Haute-Loire', 'Metropolitan department'),
('FR', '44', 'Loire-Atlantique', 'Metropolitan department'),
('FR', '45', 'Loiret', 'Metropolitan department'),
('FR', '46', 'Lot', 'Metropolitan department'),
('FR', '47', 'Lot-et-Garonne', 'Metropolitan department'),
('FR', '48', 'Lozère', 'Metropolitan department'),
('FR', '49', 'Maine-et-Loire', 'Metropolitan department'),
('FR', '50', 'Manche', 'Metropolitan department'),
('FR', '51', 'Marne', 'Metropolitan department'),
('FR', '52', 'Haute-Marne', 'Metropolitan department'),
('FR', '53', 'Mayenne', 'Metropolitan department'),
('FR', '54', 'Meurthe-et-Moselle', 'Metropolitan department'),
('FR', '55', 'Meuse', 'Metropolitan department'),
('FR', '56', 'Morbihan', 'Metropolitan department'),
('FR', '57', 'Moselle', 'Metropolitan department'),
('FR', '58', 'Nièvre', 'Metropolitan department'),
('FR', '59', 'Nord', 'Metropolitan department'),
('FR', '60', 'Oise', 'Metropolitan department'),
('FR', '61', 'Orne', 'Metropolitan department'),
('FR', '62', 'Pas-de-Calais', 'Metropolitan department'),
('FR', '63', 'Puy-de-Dôme', 'Metropolitan department'),
('FR', '64', 'Pyrénées-Atlantiques', 'Metropolitan department'),
('FR', '65', 'Hautes-Pyrénées', 'Metropolitan department'),
('FR', '66', 'Pyrénées-Orientales', 'Metropolitan department'),
('FR', '67', 'Bas-Rhin', 'Metropolitan department'),
('FR', '68', 'Haut-Rhin', 'Metropolitan department'),
('FR', '69', 'Rhône', 'Metropolitan department'),
('FR', '70', 'Haute-Saône', 'Metropolitan department'),
('FR', '71', 'Saône-et-Loire', 'Metropolitan department'),
('FR', '72', 'Sarthe', 'Metropolitan department'),
('FR', '73', 'Savoie', 'Metropolitan department'),
('FR', '74', 'Haute-Savoie', 'Metropolitan department'),
('FR', '75', 'Paris', 'Metropolitan department'),
('FR', '76', 'Seine-Maritime', 'Metropolitan department'),
('FR', '77', 'Seine-et-Marne', 'Metropolitan department'),
('FR', '78', 'Yvelines', 'Metropolitan department'),
('FR', '79', 'Deux-Sèvres', 'Metropolitan department'),
('FR', '80', 'Somme', 'Metropolitan department'),
('FR', '81', 'Tarn', 'Metropolitan department'),
('FR', '82', 'Tarn-et-Garonne', 'Metropolitan department'),
('FR', '83', 'Var', 'Metropolitan department'),
('FR', '84', 'Vaucluse', 'Metropolitan department'),
('FR', '85', 'Vendée', 'Metropolitan department'),
('FR', '86', 'Vienne', 'Metropolitan department'),
('FR', '87', 'Haute-Vienne', 'Metropolitan department'),
('FR', '88', 'Vosges', 'Metropolitan department'),
('FR', '89', 'Yonne', 'Metropolitan department'),
('FR', '90', 'Territoire de Belfort', 'Metropolitan department'),
('FR', '91', 'Essonne', 'Metropolitan department'),
('FR', '92', 'Hauts-de-Seine', 'Metropolitan department'),
('FR', '93', 'Seine-Saint-Denis', 'Metropolitan department'),
('FR', '94', 'Val-de-Marne', 'Metropolitan department'),
('FR', '95', 'Val-d\'Oise', 'Metropolitan department'),
('GA', '1', 'Estuaire', 'Province'),
('GA', '2', 'Haut-Ogooué', 'Province'),
('GA', '3', 'Moyen-Ogooué', 'Province'),
('GA', '4', 'Ngounié', 'Province'),
('GA', '5', 'Nyanga', 'Province'),
('GA', '6', 'Ogooué-Ivindo', 'Province'),
('GA', '7', 'Ogooué-Lolo', 'Province'),
('GA', '8', 'Ogooué-Maritime', 'Province'),
('GA', '9', 'Woleu-Ntem', 'Province'),
('GB', 'ABD', 'Aberdeenshire', 'Subdivision'),
('GB', 'ABE', 'Aberdeen City', 'Subdivision'),
('GB', 'AGB', 'Argyll and Bute', 'Subdivision'),
('GB', 'AGY', 'Isle of Anglesey [Sir Ynys Môn GB-YNM]', 'Subdivision'),
('GB', 'ANS', 'Angus', 'Subdivision'),
('GB', 'ANT', 'Antrim', 'Subdivision'),
('GB', 'ARD', 'Ards', 'Subdivision'),
('GB', 'ARM', 'Armagh', 'Subdivision'),
('GB', 'BAS', 'Bath and North East Somerset', 'Subdivision'),
('GB', 'BBD', 'Blackburn with Darwen', 'Subdivision'),
('GB', 'BDF', 'Bedford', 'Subdivision'),
('GB', 'BDG', 'Barking and Dagenham', 'Subdivision'),
('GB', 'BEN', 'Brent', 'Subdivision'),
('GB', 'BEX', 'Bexley', 'Subdivision'),
('GB', 'BFS', 'Belfast', 'Subdivision'),
('GB', 'BGE', 'Bridgend [Pen-y-bont ar Ogwr GB-POG]', 'Subdivision'),
('GB', 'BGW', 'Blaenau Gwent', 'Subdivision'),
('GB', 'BIR', 'Birmingham', 'Subdivision'),
('GB', 'BKM', 'Buckinghamshire', 'County'),
('GB', 'BLA', 'Ballymena', 'Subdivision'),
('GB', 'BLY', 'Ballymoney', 'Subdivision'),
('GB', 'BMH', 'Bournemouth', 'Subdivision'),
('GB', 'BNB', 'Banbridge', 'Subdivision'),
('GB', 'BNE', 'Barnet', 'Subdivision'),
('GB', 'BNH', 'Brighton and Hove', 'Subdivision'),
('GB', 'BNS', 'Barnsley', 'Subdivision'),
('GB', 'BOL', 'Bolton', 'Subdivision'),
('GB', 'BPL', 'Blackpool', 'Subdivision'),
('GB', 'BRC', 'Bracknell Forest', 'Subdivision'),
('GB', 'BRD', 'Bradford', 'Subdivision'),
('GB', 'BRY', 'Bromley', 'Subdivision'),
('GB', 'BST', 'Bristol, City of', 'Subdivision'),
('GB', 'BUR', 'Bury', 'Subdivision'),
('GB', 'CAM', 'Cambridgeshire', 'County'),
('GB', 'CAY', 'Caerphilly [Caerffili GB-CAF]', 'Subdivision'),
('GB', 'CBF', 'Central Bedfordshire', ''),
('GB', 'CGN', 'Ceredigion [Sir Ceredigion]', 'Subdivision'),
('GB', 'CGV', 'Craigavon', 'Subdivision'),
('GB', 'CHE', 'Cheshire East', ''),
('GB', 'CHW', 'Cheshire West and Chester', ''),
('GB', 'CKF', 'Carrickfergus', 'Subdivision'),
('GB', 'CKT', 'Cookstown', 'Subdivision'),
('GB', 'CLD', 'Calderdale', 'Subdivision'),
('GB', 'CLK', 'Clackmannanshire', 'Subdivision'),
('GB', 'CLR', 'Coleraine', 'Subdivision'),
('GB', 'CMA', 'Cumbria', 'County'),
('GB', 'CMD', 'Camden', 'Subdivision'),
('GB', 'CMN', 'Carmarthenshire [Sir Gaerfyrddin GB-GFY]', 'Subdivision'),
('GB', 'CON', 'Cornwall', 'Subdivision'),
('GB', 'COV', 'Coventry', 'Subdivision'),
('GB', 'CRF', 'Cardiff [Caerdydd GB-CRD]', 'Subdivision'),
('GB', 'CRY', 'Croydon', 'Subdivision'),
('GB', 'CSR', 'Castlereagh', 'Subdivision'),
('GB', 'CWY', 'Conwy', 'Subdivision'),
('GB', 'DAL', 'Darlington', 'Subdivision'),
('GB', 'DBY', 'Derbyshire', 'County'),
('GB', 'DEN', 'Denbighshire [Sir Ddinbych GB-DDB]', 'Subdivision'),
('GB', 'DER', 'Derby', 'Subdivision'),
('GB', 'DEV', 'Devon', 'County'),
('GB', 'DGN', 'Dungannon', 'Subdivision'),
('GB', 'DGY', 'Dumfries and Galloway', 'Subdivision'),
('GB', 'DNC', 'Doncaster', 'Subdivision'),
('GB', 'DND', 'Dundee City', 'Subdivision'),
('GB', 'DOR', 'Dorset', 'County'),
('GB', 'DOW', 'Down', 'Subdivision');
INSERT INTO `mm_country_subdivisions` (`iso`, `code`, `name`, `type`) VALUES
('GB', 'DRY', 'Derry', 'Subdivision'),
('GB', 'DUD', 'Dudley', 'Subdivision'),
('GB', 'DUR', 'Durham', 'Subdivision'),
('GB', 'DVV', 'Devon', 'Subdivision'),
('GB', 'EAL', 'Ealing', 'Subdivision'),
('GB', 'EAY', 'East Ayrshire', 'Subdivision'),
('GB', 'EDH', 'Edinburgh, City of', 'Subdivision'),
('GB', 'EDU', 'East Dunbartonshire', 'Subdivision'),
('GB', 'ELN', 'East Lothian', 'Subdivision'),
('GB', 'ELS', 'Eilean Siar', 'Subdivision'),
('GB', 'ENF', 'Enfield', 'Subdivision'),
('GB', 'ERW', 'East Renfrewshire', 'Subdivision'),
('GB', 'ERY', 'East Riding of Yorkshire', 'Subdivision'),
('GB', 'ESS', 'Essex', 'County'),
('GB', 'ESX', 'East Sussex', 'County'),
('GB', 'FAL', 'Falkirk', 'Subdivision'),
('GB', 'FER', 'Fermanagh', 'Subdivision'),
('GB', 'FIF', 'Fife', 'Subdivision'),
('GB', 'FLN', 'Flintshire [Sir y Fflint GB-FFL]', 'Subdivision'),
('GB', 'GAT', 'Gateshead', 'Subdivision'),
('GB', 'GLG', 'Glasgow City', 'Subdivision'),
('GB', 'GLS', 'Gloucestershire', 'County'),
('GB', 'GRE', 'Greenwich', 'Subdivision'),
('GB', 'GWN', 'Gwynedd', 'Subdivision'),
('GB', 'HAL', 'Halton', 'Subdivision'),
('GB', 'HAM', 'Hampshire', 'County'),
('GB', 'HAV', 'Havering', 'Subdivision'),
('GB', 'HCK', 'Hackney', 'Subdivision'),
('GB', 'HEF', 'Herefordshire, County of', 'Subdivision'),
('GB', 'HIL', 'Hillingdon', 'Subdivision'),
('GB', 'HLD', 'Highland', 'Subdivision'),
('GB', 'HMF', 'Hammersmith and Fulham', 'Subdivision'),
('GB', 'HNS', 'Hounslow', 'Subdivision'),
('GB', 'HPL', 'Hartlepool', 'Subdivision'),
('GB', 'HRT', 'Hertfordshire', 'County'),
('GB', 'HRW', 'Harrow', 'Subdivision'),
('GB', 'HRY', 'Haringey', 'Subdivision'),
('GB', 'IOW', 'Isle of Wight', 'Subdivision'),
('GB', 'ISL', 'Islington', 'Subdivision'),
('GB', 'IVC', 'Inverclyde', 'Subdivision'),
('GB', 'KEC', 'Kensington and Chelsea', 'Subdivision'),
('GB', 'KEN', 'Kent', 'County'),
('GB', 'KHL', 'Kingston upon Hull, City of', 'Subdivision'),
('GB', 'KIR', 'Kirklees', 'Subdivision'),
('GB', 'KTT', 'Kingston upon Thames', 'Subdivision'),
('GB', 'KWL', 'Knowsley', 'Subdivision'),
('GB', 'LAN', 'Lancashire', 'County'),
('GB', 'LBH', 'Lambeth', 'Subdivision'),
('GB', 'LCE', 'Leicester', 'Subdivision'),
('GB', 'LDS', 'Leeds', 'Subdivision'),
('GB', 'LEC', 'Leicestershire', 'County'),
('GB', 'LEW', 'Lewisham', 'Subdivision'),
('GB', 'LIN', 'Lincolnshire', 'County'),
('GB', 'LIV', 'Liverpool', 'Subdivision'),
('GB', 'LMV', 'Limavady', 'Subdivision'),
('GB', 'LND', 'London, City of', 'City Corporation'),
('GB', 'LRN', 'Larne', 'Subdivision'),
('GB', 'LSB', 'Lisburn', 'Subdivision'),
('GB', 'LUT', 'Luton', 'Subdivision'),
('GB', 'MAN', 'Manchester', 'Subdivision'),
('GB', 'MDB', 'Middlesbrough', 'Subdivision'),
('GB', 'MDW', 'Medway', 'Subdivision'),
('GB', 'MFT', 'Magherafelt', 'Subdivision'),
('GB', 'MIK', 'Milton Keynes', 'Subdivision'),
('GB', 'MLN', 'Midlothian', 'Subdivision'),
('GB', 'MON', 'Monmouthshire [Sir Fynwy GB-FYN]', 'Subdivision'),
('GB', 'MRT', 'Merton', 'Subdivision'),
('GB', 'MRY', 'Moray', 'Subdivision'),
('GB', 'MTY', 'Merthyr Tydfil [Merthyr Tudful GB-MTU]', 'Subdivision'),
('GB', 'MYL', 'Moyle', 'Subdivision'),
('GB', 'NAY', 'North Ayrshire', 'Subdivision'),
('GB', 'NBL', 'Northumberland', 'Subdivision'),
('GB', 'NDN', 'North Down', 'Subdivision'),
('GB', 'NEL', 'North East Lincolnshire', 'Subdivision'),
('GB', 'NET', 'Newcastle upon Tyne', 'Subdivision'),
('GB', 'NFK', 'Norfolk', 'County'),
('GB', 'NGM', 'Nottingham', 'Subdivision'),
('GB', 'NLK', 'North Lanarkshire', 'Subdivision'),
('GB', 'NLN', 'North Lincolnshire', 'Subdivision'),
('GB', 'NSM', 'North Somerset', 'Subdivision'),
('GB', 'NTA', 'Newtownabbey', 'Subdivision'),
('GB', 'NTH', 'Northamptonshire', 'County'),
('GB', 'NTL', 'Neath Port Talbot [Castell-nedd Port Talbot GB-CTL]', 'Subdivision'),
('GB', 'NTT', 'Nottinghamshire', 'County'),
('GB', 'NTY', 'North Tyneside', 'Subdivision'),
('GB', 'NWM', 'Newham', 'Subdivision'),
('GB', 'NWP', 'Newport [Casnewydd GB-CNW]', 'Subdivision'),
('GB', 'NYK', 'North Yorkshire', 'County'),
('GB', 'NYM', 'Newry and Mourne', 'Subdivision'),
('GB', 'OLD', 'Oldham', 'Subdivision'),
('GB', 'OMH', 'Omagh', 'Subdivision'),
('GB', 'ORK', 'Orkney Islands', 'Subdivision'),
('GB', 'OXF', 'Oxfordshire', 'County'),
('GB', 'PEM', 'Pembrokeshire [Sir Benfro GB-BNF]', 'Subdivision'),
('GB', 'PKN', 'Perth and Kinross', 'Subdivision'),
('GB', 'PLY', 'Plymouth', 'Subdivision'),
('GB', 'POL', 'Poole', 'Subdivision'),
('GB', 'POR', 'Portsmouth', 'Subdivision'),
('GB', 'POW', 'Powys', 'Subdivision'),
('GB', 'PTE', 'Peterborough', 'Subdivision'),
('GB', 'RCC', 'Redcar and Cleveland', 'Subdivision'),
('GB', 'RCH', 'Rochdale', 'Subdivision'),
('GB', 'RCT', 'Rhondda, Cynon, Taff [Rhondda, Cynon,Taf]', 'Subdivision'),
('GB', 'RDB', 'Redbridge', 'Subdivision'),
('GB', 'RDG', 'Reading', 'Subdivision'),
('GB', 'RFW', 'Renfrewshire', 'Subdivision'),
('GB', 'RIC', 'Richmond upon Thames', 'Subdivision'),
('GB', 'ROT', 'Rotherham', 'Subdivision'),
('GB', 'RUT', 'Rutland', 'Subdivision'),
('GB', 'SAW', 'Sandwell', 'Subdivision'),
('GB', 'SAY', 'South Ayrshire', 'Subdivision'),
('GB', 'SCB', 'Scottish Borders, The', 'Subdivision'),
('GB', 'SFK', 'Suffolk', 'County'),
('GB', 'SFT', 'Sefton', 'Subdivision'),
('GB', 'SGC', 'South Gloucestershire', 'Subdivision'),
('GB', 'SHF', 'Sheffield', 'Subdivision'),
('GB', 'SHN', 'St. Helens', 'Subdivision'),
('GB', 'SHR', 'Shropshire', 'Subdivision'),
('GB', 'SKP', 'Stockport', 'Subdivision'),
('GB', 'SLF', 'Salford', 'Subdivision'),
('GB', 'SLG', 'Slough', 'Subdivision'),
('GB', 'SLK', 'South Lanarkshire', 'Subdivision'),
('GB', 'SND', 'Sunderland', 'Subdivision'),
('GB', 'SOL', 'Solihull', 'Subdivision'),
('GB', 'SOM', 'Somerset', 'County'),
('GB', 'SOS', 'Southend-on-Sea', 'Subdivision'),
('GB', 'SRY', 'Surrey', 'County'),
('GB', 'STB', 'Strabane', 'Subdivision'),
('GB', 'STE', 'Stoke-on-Trent', 'Subdivision'),
('GB', 'STG', 'Stirling', 'Subdivision'),
('GB', 'STH', 'Southampton', 'Subdivision'),
('GB', 'STN', 'Sutton', 'Subdivision'),
('GB', 'STS', 'Staffordshire', 'County'),
('GB', 'STT', 'Stockton-on-Tees', 'Subdivision'),
('GB', 'STY', 'South Tyneside', 'Subdivision'),
('GB', 'SWA', 'Swansea [Abertawe GB-ATA]', 'Subdivision'),
('GB', 'SWD', 'Swindon', 'Subdivision'),
('GB', 'SWK', 'Southwark', 'Subdivision'),
('GB', 'TAM', 'Tameside', 'Subdivision'),
('GB', 'TFW', 'Telford and Wrekin', 'Subdivision'),
('GB', 'THR', 'Thurrock', 'Subdivision'),
('GB', 'TOB', 'Torbay', 'Subdivision'),
('GB', 'TOF', 'Torfaen [Tor-faen]', 'Subdivision'),
('GB', 'TRF', 'Trafford', 'Subdivision'),
('GB', 'TWH', 'Tower Hamlets', 'Subdivision'),
('GB', 'VGL', 'Vale of Glamorgan, The [Bro Morgannwg GB-BMG]', 'Subdivision'),
('GB', 'WAR', 'Warwickshire', 'County'),
('GB', 'WBK', 'West Berkshire', 'Subdivision'),
('GB', 'WDU', 'West Dunbartonshire', 'Subdivision'),
('GB', 'WFT', 'Waltham Forest', 'Subdivision'),
('GB', 'WGN', 'Wigan', 'Subdivision'),
('GB', 'WIL', 'Wiltshire', 'Subdivision'),
('GB', 'WKF', 'Wakefield', 'Subdivision'),
('GB', 'WLL', 'Walsall', 'Subdivision'),
('GB', 'WLN', 'West Lothian', 'Subdivision'),
('GB', 'WLV', 'Wolverhampton', 'Subdivision'),
('GB', 'WND', 'Wandsworth', 'Subdivision'),
('GB', 'WNM', 'Windsor and Maidenhead', 'Subdivision'),
('GB', 'WOK', 'Wokingham', 'Subdivision'),
('GB', 'WOR', 'Worcestershire', 'County'),
('GB', 'WRL', 'Wirral', 'Subdivision'),
('GB', 'WRT', 'Warrington', 'Subdivision'),
('GB', 'WRX', 'Wrexham [Wrecsam GB-WRC]', 'Subdivision'),
('GB', 'WSM', 'Westminster', 'Subdivision'),
('GB', 'WSX', 'West Sussex', 'County'),
('GB', 'YOR', 'York', 'Subdivision'),
('GB', 'ZET', 'Shetland Islands', 'Subdivision'),
('GD', '01', 'Saint Andrew', 'Parish'),
('GD', '02', 'Saint David', 'Parish'),
('GD', '03', 'Saint George', 'Parish'),
('GD', '04', 'Saint John', 'Parish'),
('GD', '05', 'Saint Mark', 'Parish'),
('GD', '06', 'Saint Patrick', 'Parish'),
('GD', '10', 'Southern Grenadine Islands', 'Dependency'),
('GE', 'AB', 'Abkhazia', 'Autonomous republic'),
('GE', 'AJ', 'Ajaria', 'Autonomous republic'),
('GE', 'GU', 'Guria', 'Region'),
('GE', 'IM', 'Imeret\'i', 'Region'),
('GE', 'KA', 'Kakhet\'i', 'Region'),
('GE', 'KK', 'K\'vemo K\'art\'li', 'Region'),
('GE', 'MM', 'Mts\'khet\'a-Mt\'ianet\'i', 'Region'),
('GE', 'RL', 'Racha-Lechkhumi-Kvemo Svaneti', 'Region'),
('GE', 'SJ', 'Samts\'khe-Javakhet\'i', 'Region'),
('GE', 'SK', 'Shida K\'art\'li', 'Region'),
('GE', 'SZ', 'Samegrelo-Zemo Svanet\'i', 'Region'),
('GE', 'TB', 'T\'bilisi', 'City'),
('GH', 'AA', 'Greater Accra', 'Region'),
('GH', 'AH', 'Ashanti', 'Region'),
('GH', 'BA', 'Brong-Ahafo', 'Region'),
('GH', 'CP', 'Central', 'Region'),
('GH', 'EP', 'Eastern', 'Region'),
('GH', 'NP', 'Northern', 'Region'),
('GH', 'TV', 'Volta', 'Region'),
('GH', 'UE', 'Upper East', 'Region'),
('GH', 'UW', 'Upper West', 'Region'),
('GH', 'WP', 'Western', 'Region'),
('GM', 'B', 'Banjul', 'City'),
('GM', 'L', 'Lower River', 'Division'),
('GM', 'M', 'Central River', 'Division'),
('GM', 'N', 'North Bank', 'Division'),
('GM', 'U', 'Upper River', 'Division'),
('GM', 'W', 'Western', 'Division'),
('GN', 'BE', 'Beyla', 'Prefecture'),
('GN', 'BF', 'Boffa', 'Prefecture'),
('GN', 'BK', 'Boké', 'Prefecture'),
('GN', 'CO', 'Coyah', 'Prefecture'),
('GN', 'DB', 'Dabola', 'Prefecture'),
('GN', 'DI', 'Dinguiraye', 'Prefecture'),
('GN', 'DL', 'Dalaba', 'Prefecture'),
('GN', 'DU', 'Dubréka', 'Prefecture'),
('GN', 'FA', 'Faranah', 'Prefecture'),
('GN', 'FO', 'Forécariah', 'Prefecture'),
('GN', 'FR', 'Fria', 'Prefecture'),
('GN', 'GA', 'Gaoual', 'Prefecture'),
('GN', 'GU', 'Guékédou', 'Prefecture'),
('GN', 'KA', 'Kankan', 'Prefecture'),
('GN', 'KB', 'Koubia', 'Prefecture'),
('GN', 'KD', 'Kindia', 'Prefecture'),
('GN', 'KE', 'Kérouané', 'Prefecture'),
('GN', 'KN', 'Koundara', 'Prefecture'),
('GN', 'KO', 'Kouroussa', 'Prefecture'),
('GN', 'KS', 'Kissidougou', 'Prefecture'),
('GN', 'LA', 'Labé', 'Prefecture'),
('GN', 'LE', 'Lélouma', 'Prefecture'),
('GN', 'LO', 'Lola', 'Prefecture'),
('GN', 'MC', 'Macenta', 'Prefecture'),
('GN', 'MD', 'Mandiana', 'Prefecture'),
('GN', 'ML', 'Mali', 'Prefecture'),
('GN', 'MM', 'Mamou', 'Prefecture'),
('GN', 'NZ', 'Nzérékoré', 'Prefecture'),
('GN', 'PI', 'Pita', 'Prefecture'),
('GN', 'SI', 'Siguiri', 'Prefecture'),
('GN', 'TE', 'Télimélé', 'Prefecture'),
('GN', 'TO', 'Tougué', 'Prefecture'),
('GN', 'YO', 'Yomou', 'Prefecture'),
('GQ', 'AN', 'Annobón', 'Province'),
('GQ', 'BN', 'Bioko Norte', 'Province'),
('GQ', 'BS', 'Bioko Sur', 'Province'),
('GQ', 'CS', 'Centro Sur', 'Province'),
('GQ', 'KN', 'Kie-Ntem', 'Province'),
('GQ', 'LI', 'Litoral', 'Province'),
('GQ', 'WN', 'Wele-Nzás', 'Province'),
('GR', '01', 'Aitolia kai Akarnania', 'Department'),
('GR', '03', 'Voiotia', 'Department'),
('GR', '04', 'Evvoia', 'Department'),
('GR', '05', 'Evrytania', 'Department'),
('GR', '06', 'Fthiotida', 'Department'),
('GR', '07', 'Fokida', 'Department'),
('GR', '11', 'Argolida', 'Department'),
('GR', '12', 'Arkadia', 'Department'),
('GR', '13', 'Achaïa', 'Department'),
('GR', '14', 'Ileia', 'Department'),
('GR', '15', 'Korinthia', 'Department'),
('GR', '16', 'Lakonia', 'Department'),
('GR', '17', 'Messinia', 'Department'),
('GR', '21', 'Zakynthos', 'Department'),
('GR', '22', 'Kerkyra', 'Department'),
('GR', '23', 'Kefallonia', 'Department'),
('GR', '24', 'Lefkada', 'Department'),
('GR', '31', 'Arta', 'Department'),
('GR', '32', 'Thesprotia', 'Department'),
('GR', '33', 'Ioannina', 'Department'),
('GR', '34', 'Preveza', 'Department'),
('GR', '41', 'Karditsa', 'Department'),
('GR', '42', 'Larisa', 'Department'),
('GR', '43', 'Magnisia', 'Department'),
('GR', '44', 'Trikala', 'Department'),
('GR', '51', 'Grevena', 'Department'),
('GR', '52', 'Drama', 'Department'),
('GR', '53', 'Imathia', 'Department'),
('GR', '54', 'Thessaloniki', 'Department'),
('GR', '55', 'Kavala', 'Department'),
('GR', '56', 'Kastoria', 'Department'),
('GR', '57', 'Kilkis', 'Department'),
('GR', '58', 'Kozani', 'Department'),
('GR', '59', 'Pella', 'Department'),
('GR', '61', 'Pieria', 'Department'),
('GR', '62', 'Serres', 'Department'),
('GR', '63', 'Florina', 'Department'),
('GR', '64', 'Chalkidiki', 'Department'),
('GR', '69', 'Agio Oros', 'Self-Governed part'),
('GR', '71', 'Evros', 'Department'),
('GR', '72', 'Xanthi', 'Department'),
('GR', '73', 'Rodopi', 'Department'),
('GR', '81', 'Dodekanisos', 'Department'),
('GR', '82', 'Kyklades', 'Department'),
('GR', '83', 'Lesvos', 'Department'),
('GR', '84', 'Samos', 'Department'),
('GR', '85', 'Chios', 'Department'),
('GR', '91', 'Irakleio', 'Department'),
('GR', '92', 'Lasithi', 'Department'),
('GR', '93', 'Rethymno', 'Department'),
('GR', '94', 'Chania', 'Department'),
('GR', 'A1', 'Attiki', 'Department'),
('GT', 'AV', 'Alta Verapaz', 'Department'),
('GT', 'BV', 'Baja Verapaz', 'Department'),
('GT', 'CM', 'Chimaltenango', 'Department'),
('GT', 'CQ', 'Chiquimula', 'Department'),
('GT', 'ES', 'Escuintla', 'Department'),
('GT', 'GU', 'Guatemala', 'Department'),
('GT', 'HU', 'Huehuetenango', 'Department'),
('GT', 'IZ', 'Izabal', 'Department'),
('GT', 'JA', 'Jalapa', 'Department'),
('GT', 'JU', 'Jutiapa', 'Department'),
('GT', 'PE', 'Petén', 'Department'),
('GT', 'PR', 'El Progreso', 'Department'),
('GT', 'QC', 'Quiché', 'Department'),
('GT', 'QZ', 'Quetzaltenango', 'Department'),
('GT', 'RE', 'Retalhuleu', 'Department'),
('GT', 'SA', 'Sacatepéquez', 'Department'),
('GT', 'SM', 'San Marcos', 'Department'),
('GT', 'SO', 'Sololá', 'Department'),
('GT', 'SR', 'Santa Rosa', 'Department'),
('GT', 'SU', 'Suchitepéquez', 'Department'),
('GT', 'TO', 'Totonicapán', 'Department'),
('GT', 'ZA', 'Zacapa', 'Department'),
('GW', 'BA', 'Bafatá', 'Region'),
('GW', 'BL', 'Bolama', 'Region'),
('GW', 'BM', 'Biombo', 'Region'),
('GW', 'BS', 'Bissau', 'Autonomous sector'),
('GW', 'CA', 'Cacheu', 'Region'),
('GW', 'GA', 'Gabú', 'Region'),
('GW', 'OI', 'Oio', 'Region'),
('GW', 'QU', 'Quinara', 'Region'),
('GW', 'TO', 'Tombali', 'Region'),
('GY', 'BA', 'Barima-Waini', 'Region'),
('GY', 'CU', 'Cuyuni-Mazaruni', 'Region'),
('GY', 'DE', 'Demerara-Mahaica', 'Region'),
('GY', 'EB', 'East Berbice-Corentyne', 'Region'),
('GY', 'ES', 'Essequibo Islands-West Demerara', 'Region'),
('GY', 'MA', 'Mahaica-Berbice', 'Region'),
('GY', 'PM', 'Pomeroon-Supenaam', 'Region'),
('GY', 'PT', 'Potaro-Siparuni', 'Region'),
('GY', 'UD', 'Upper Demerara-Berbice', 'Region'),
('GY', 'UT', 'Upper Takutu-Upper Essequibo', 'Region'),
('HN', 'AT', 'Atlántida', 'Department'),
('HN', 'CH', 'Choluteca', 'Department'),
('HN', 'CL', 'Colón', 'Department'),
('HN', 'CM', 'Comayagua', 'Department'),
('HN', 'CP', 'Copán', 'Department'),
('HN', 'CR', 'Cortés', 'Department'),
('HN', 'EP', 'El Paraíso', 'Department'),
('HN', 'FM', 'Francisco Morazán', 'Department'),
('HN', 'GD', 'Gracias a Dios', 'Department'),
('HN', 'IB', 'Islas de la Bahía', 'Department'),
('HN', 'IN', 'Intibucá', 'Department'),
('HN', 'LE', 'Lempira', 'Department'),
('HN', 'LP', 'La Paz', 'Department'),
('HN', 'OC', 'Ocotepeque', 'Department'),
('HN', 'OL', 'Olancho', 'Department'),
('HN', 'SB', 'Santa Bárbara', 'Department'),
('HN', 'VA', 'Valle', 'Department'),
('HN', 'YO', 'Yoro', 'Department'),
('HR', '01', 'Zagrebacka upanija', 'County'),
('HR', '02', 'Krapinsko-zagorska upanija', 'County'),
('HR', '03', 'Sisacko-moslavacka upanija', 'County'),
('HR', '04', 'Karlovacka upanija', 'County'),
('HR', '05', 'Varadinska upanija', 'County'),
('HR', '06', 'Koprivnicko-krievacka upanija', 'County'),
('HR', '07', 'Bjelovarsko-bilogorska upanija', 'County'),
('HR', '08', 'Primorsko-goranska upanija', 'County'),
('HR', '09', 'Licko-senjska upanija', 'County'),
('HR', '10', 'Viroviticko-podravska upanija', 'County'),
('HR', '11', 'Poeko-slavonska upanija', 'County'),
('HR', '12', 'Brodsko-posavska upanija', 'County'),
('HR', '13', 'Zadarska upanija', 'County'),
('HR', '14', 'Osjecko-baranjska upanija', 'County'),
('HR', '15', 'ibensko-kninska upanija', 'County'),
('HR', '16', 'Vukovarsko-srijemska upanija', 'County'),
('HR', '17', 'Splitsko-dalmatinska upanija', 'County'),
('HR', '18', 'Istarska upanija', 'County'),
('HR', '19', 'Dubrovacko-neretvanska upanija', 'County'),
('HR', '20', 'Medimurska upanija', 'County'),
('HR', '21', 'Grad Zagreb', 'City'),
('HT', 'AR', 'Artibonite', 'Department'),
('HT', 'CE', 'Centre', 'Department'),
('HT', 'GA', 'Grande-Anse', 'Department'),
('HT', 'ND', 'Nord', 'Department'),
('HT', 'NE', 'Nord-Est', 'Department'),
('HT', 'NI', 'Nippes', 'Department'),
('HT', 'NO', 'Nord-Ouest', 'Department'),
('HT', 'OU', 'Ouest', 'Department'),
('HT', 'SD', 'Sud', 'Department'),
('HT', 'SE', 'Sud-Est', 'Department'),
('HU', 'BA', 'Baranya', 'County'),
('HU', 'BC', 'Békéscsaba', 'City of county right'),
('HU', 'BE', 'Békés', 'County'),
('HU', 'BK', 'Bács-Kiskun', 'County'),
('HU', 'BU', 'Budapest', 'Capital City'),
('HU', 'BZ', 'Borsod-Abaúj-Zemplén', 'County'),
('HU', 'CS', 'Csongrád', 'County'),
('HU', 'DE', 'Debrecen', 'City of county right'),
('HU', 'DU', 'Dunaujváros', 'City of county right'),
('HU', 'EG', 'Eger', 'City of county right'),
('HU', 'ER', 'Érd', 'City of county right'),
('HU', 'FE', 'Fejér', 'County'),
('HU', 'GS', 'Gyór-Moson-Sopron', 'County'),
('HU', 'GY', 'Gyór', 'City of county right'),
('HU', 'HB', 'Hajdú-Bihar', 'County'),
('HU', 'HE', 'Heves', 'County'),
('HU', 'HV', 'Hódmezóvásárhely', 'City of county right'),
('HU', 'JN', 'Jász-Nagykun-Szolnok', 'County'),
('HU', 'KE', 'Komárom-Esztergom', 'County'),
('HU', 'KM', 'Kecskemét', 'City of county right'),
('HU', 'KV', 'Kaposvár', 'City of county right'),
('HU', 'MI', 'Miskolc', 'City of county right'),
('HU', 'NK', 'Nagykanizsa', 'City of county right'),
('HU', 'NO', 'Nógrád', 'County'),
('HU', 'NY', 'Nyíregyháza', 'City of county right'),
('HU', 'PE', 'Pest', 'County'),
('HU', 'PS', 'Pécs', 'City of county right'),
('HU', 'SD', 'Szeged', 'City of county right'),
('HU', 'SF', 'Székesfehérvár', 'City of county right'),
('HU', 'SH', 'Szombathely', 'City of county right'),
('HU', 'SK', 'Szolnok', 'City of county right'),
('HU', 'SN', 'Sopron', 'City of county right'),
('HU', 'SO', 'Somogy', 'County'),
('HU', 'SS', 'Szekszárd', 'City of county right'),
('HU', 'ST', 'Salgótarján', 'City of county right'),
('HU', 'SZ', 'Szabolcs-Szatmár-Bereg', 'County'),
('HU', 'TB', 'Tatabánya', 'City of county right'),
('HU', 'TO', 'Tolna', 'County'),
('HU', 'VA', 'Vas', 'County'),
('HU', 'VE', 'Veszprém', 'County'),
('HU', 'VM', 'Veszprém', 'City of county right'),
('HU', 'ZA', 'Zala', 'County'),
('HU', 'ZE', 'Zalaegerszeg', 'City of county right'),
('ID', 'AC', 'Aceh', 'Autononous province'),
('ID', 'BA', 'Bali', 'Province'),
('ID', 'BB', 'Bangka Belitung', 'Province'),
('ID', 'BE', 'Bengkulu', 'Province'),
('ID', 'BT', 'Banten', 'Province'),
('ID', 'GO', 'Gorontalo', 'Province'),
('ID', 'JA', 'Jambi', 'Province'),
('ID', 'JB', 'Jawa Barat', 'Province'),
('ID', 'JI', 'Jawa Timur', 'Province'),
('ID', 'JK', 'Jakarta Raya', 'Special district'),
('ID', 'JT', 'Jawa Tengah', 'Province'),
('ID', 'KB', 'Kalimantan Barat', 'Province'),
('ID', 'KI', 'Kalimantan Timur', 'Province'),
('ID', 'KR', 'Kepulauan Riau', 'Province'),
('ID', 'KS', 'Kalimantan Selatan', 'Province'),
('ID', 'KT', 'Kalimantan Tengah', 'Province'),
('ID', 'LA', 'Lampung', 'Province'),
('ID', 'ML', 'Maluku', 'Province'),
('ID', 'MU', 'Maluku Utara', 'Province'),
('ID', 'NB', 'Nusa Tenggara Barat', 'Province'),
('ID', 'NT', 'Nusa Tenggara Timur', 'Province'),
('ID', 'PA', 'Papua', 'Province'),
('ID', 'PB', 'Papua Barat', 'Province'),
('ID', 'RI', 'Riau', 'Province'),
('ID', 'SA', 'Sulawesi Utara', 'Province'),
('ID', 'SB', 'Sumatera Barat', 'Province'),
('ID', 'SG', 'Sulawesi Tenggara', 'Province'),
('ID', 'SN', 'Sulawesi Selatan', 'Province'),
('ID', 'SR', 'Sulawesi Barat', 'Province'),
('ID', 'SS', 'Sumatera Selatan', 'Province'),
('ID', 'ST', 'Sulawesi Tengah', 'Province'),
('ID', 'SU', 'Sumatera Utara', 'Province'),
('ID', 'YO', 'Yogyakarta', 'Special region'),
('IE', 'CE', 'Clare', 'County'),
('IE', 'CN', 'Cavan', 'County'),
('IE', 'CO', 'Cork', 'Province'),
('IE', 'CW', 'Carlow', 'County'),
('IE', 'D', 'Dublin', 'County'),
('IE', 'DL', 'Donegal', 'County'),
('IE', 'G', 'Galway', 'County'),
('IE', 'KE', 'Kildare', 'County'),
('IE', 'KK', 'Kilkenny', 'County'),
('IE', 'KY', 'Kerry', 'County'),
('IE', 'LD', 'Longford', 'County'),
('IE', 'LH', 'Louth', 'County'),
('IE', 'LK', 'Limerick', 'County'),
('IE', 'LM', 'Leitrim', 'County'),
('IE', 'LS', 'Laois', 'County'),
('IE', 'MH', 'Meath', 'County'),
('IE', 'MN', 'Monaghan', 'County'),
('IE', 'MO', 'Mayo', 'County'),
('IE', 'OY', 'Offaly', 'County'),
('IE', 'RN', 'Roscommon', 'County'),
('IE', 'SO', 'Sligo', 'County'),
('IE', 'TA', 'Tipperary', 'County'),
('IE', 'WD', 'Waterford', 'County'),
('IE', 'WH', 'Westmeath', 'County'),
('IE', 'WW', 'Wicklow', 'County'),
('IE', 'WX', 'Wexford', 'County'),
('IL', 'D', 'HaDarom', 'District'),
('IL', 'HA', 'Hefa', 'District'),
('IL', 'JM', 'Yerushalayim', 'District'),
('IL', 'M', 'HaMerkaz', 'District'),
('IL', 'TA', 'Tel-Aviv', 'District'),
('IL', 'Z', 'HaZafon', 'District'),
('IN', 'AN', 'Andaman and Nicobar Islands', 'Union territory'),
('IN', 'AP', 'Andhra Pradesh', 'State'),
('IN', 'AR', 'Arunachal Pradesh', 'State'),
('IN', 'AS', 'Assam', 'State'),
('IN', 'BR', 'Bihar', 'State'),
('IN', 'CH', 'Chandigarh', 'Union territory'),
('IN', 'CT', 'Chhattisgarh', 'State'),
('IN', 'DD', 'Daman and Diu', 'Union territory'),
('IN', 'DL', 'Delhi', 'Union territory'),
('IN', 'DN', 'Dadra and Nagar Haveli', 'Union territory'),
('IN', 'GA', 'Goa', 'State'),
('IN', 'GJ', 'Gujarat', 'State'),
('IN', 'HP', 'Himachal Pradesh', 'State'),
('IN', 'HR', 'Haryana', 'State'),
('IN', 'JH', 'Jharkhand', 'State'),
('IN', 'JK', 'Jammu and Kashmir', 'State'),
('IN', 'KA', 'Karnataka', 'State'),
('IN', 'KL', 'Kerala', 'State'),
('IN', 'LD', 'Lakshadweep', 'Union territory'),
('IN', 'MH', 'Maharashtra', 'State'),
('IN', 'ML', 'Meghalaya', 'State'),
('IN', 'MN', 'Manipur', 'State'),
('IN', 'MP', 'Madhya Pradesh', 'State'),
('IN', 'MZ', 'Mizoram', 'State'),
('IN', 'NL', 'Nagaland', 'State'),
('IN', 'OR', 'Orissa', 'State'),
('IN', 'PB', 'Punjab', 'State'),
('IN', 'PY', 'Pondicherry', 'Union territory'),
('IN', 'RJ', 'Rajasthan', 'State'),
('IN', 'SK', 'Sikkim', 'State'),
('IN', 'TN', 'Tamil Nadu', 'State'),
('IN', 'TR', 'Tripura', 'State'),
('IN', 'UP', 'Uttar Pradesh', 'State'),
('IN', 'UT', 'Uttarakhand', 'State'),
('IN', 'WB', 'West Bengal', 'State'),
('IQ', 'AN', 'AI Anbar', 'Governorate'),
('IQ', 'AR', 'Arbil', 'Governorate'),
('IQ', 'BA', 'Al Basrah', 'Governorate'),
('IQ', 'BB', 'Babil', 'Governorate'),
('IQ', 'BG', 'Baghdad', 'Governorate'),
('IQ', 'DA', 'Dahuk', 'Governorate'),
('IQ', 'DI', 'Diyalá', 'Governorate'),
('IQ', 'DQ', 'Dhi Qar', 'Governorate'),
('IQ', 'KA', 'Karbala\'', 'Governorate'),
('IQ', 'MA', 'Maysan', 'Governorate'),
('IQ', 'MU', 'AI Muthanná', 'Governorate'),
('IQ', 'NA', 'An Najaf', 'Governorate'),
('IQ', 'NI', 'Ninawá', 'Governorate'),
('IQ', 'QA', 'Al Qadisiyah', 'Governorate'),
('IQ', 'SD', 'Salah ad Din', 'Governorate'),
('IQ', 'SU', 'As Sulaymaniyah', 'Governorate'),
('IQ', 'TS', 'At Ta\'mim', 'Governorate'),
('IQ', 'WA', 'Wasit', 'Governorate'),
('IR', '01', 'AZarbayjan-e Sharqi', 'Province'),
('IR', '02', 'AZarbayjan-e Gharbi', 'Province'),
('IR', '03', 'Ardabil', 'Province'),
('IR', '04', 'Esfahan', 'Province'),
('IR', '05', 'Ilam', 'Province'),
('IR', '06', 'Bushehr', 'Province'),
('IR', '07', 'Tehran', 'Province'),
('IR', '08', 'Chahar Mahall va Bakhtiari', 'Province'),
('IR', '10', 'Khuzestan', 'Province'),
('IR', '11', 'Zanjan', 'Province'),
('IR', '12', 'Semnan', 'Province'),
('IR', '13', 'Sistan va Baluchestan', 'Province'),
('IR', '14', 'Fars', 'Province'),
('IR', '15', 'Kerman', 'Province'),
('IR', '16', 'Kordestan', 'Province'),
('IR', '17', 'Kermanshah', 'Province'),
('IR', '18', 'Kohkiluyeh va Buyer Ahmad', 'Province'),
('IR', '19', 'Gilan', 'Province'),
('IR', '20', 'Lorestan', 'Province'),
('IR', '21', 'Mazandaran', 'Province'),
('IR', '22', 'Markazi', 'Province'),
('IR', '23', 'Hormozgan', 'Province'),
('IR', '24', 'Hamadan', 'Province'),
('IR', '25', 'Yazd', 'Province'),
('IR', '26', 'Qom', 'Province'),
('IR', '27', 'Golestan', 'Province'),
('IR', '28', 'Qazvin', 'Province'),
('IR', '29', 'Khorasan-e Janubi', 'Province'),
('IR', '30', 'Khorasan-e Razavi', 'Province'),
('IR', '31', 'Khorasan-e Shemali', 'Province'),
('IS', '0', 'Reykjavík', 'Region'),
('IS', '1', 'Höfuðborgarsvæði utan Reykjavíkur', 'Region'),
('IS', '2', 'Suðurnes', 'Region'),
('IS', '3', 'Vesturland', 'Region'),
('IS', '4', 'Vestfirðir', 'Region'),
('IS', '5', 'Norðurland vestra', 'Region'),
('IS', '6', 'Norðurland eystra', 'Region'),
('IS', '7', 'Austurland', 'Region'),
('IS', '8', 'Suðurland', 'Region'),
('IT', 'AG', 'Agrigento', 'Province'),
('IT', 'AL', 'Alessandria', 'Province'),
('IT', 'AN', 'Ancona', 'Province'),
('IT', 'AO', 'Aosta / Aoste (fr)', 'Province'),
('IT', 'AP', 'Ascoli Piceno', 'Province'),
('IT', 'AQ', 'L\'Aquila', 'Province'),
('IT', 'AR', 'Arezzo', 'Province'),
('IT', 'AT', 'Asti', 'Province'),
('IT', 'AV', 'Avellino', 'Province'),
('IT', 'BA', 'Bari', 'Province'),
('IT', 'BG', 'Bergamo', 'Province'),
('IT', 'BI', 'Biella', 'Province'),
('IT', 'BL', 'Belluno', 'Province'),
('IT', 'BN', 'Benevento', 'Province'),
('IT', 'BO', 'Bologna', 'Province'),
('IT', 'BR', 'Brindisi', 'Province'),
('IT', 'BS', 'Brescia', 'Province'),
('IT', 'BT', 'Barletta-Andria-Trani', 'Province'),
('IT', 'BZ', 'Bolzano / Bozen (de)', 'Province'),
('IT', 'CA', 'Cagliari', 'Province'),
('IT', 'CB', 'Campobasso', 'Province'),
('IT', 'CE', 'Caserta', 'Province'),
('IT', 'CH', 'Chieti', 'Province'),
('IT', 'CI', 'Carbonia-Iglesias', 'Province'),
('IT', 'CL', 'Caltanissetta', 'Province'),
('IT', 'CN', 'Cuneo', 'Province'),
('IT', 'CO', 'Como', 'Province'),
('IT', 'CR', 'Cremona', 'Province'),
('IT', 'CS', 'Cosenza', 'Province'),
('IT', 'CT', 'Catania', 'Province'),
('IT', 'CZ', 'Catanzaro', 'Province'),
('IT', 'EN', 'Enna', 'Province'),
('IT', 'FC', 'Forlì-Cesena', 'Province'),
('IT', 'FE', 'Ferrara', 'Province'),
('IT', 'FG', 'Foggia', 'Province'),
('IT', 'FI', 'Firenze', 'Province'),
('IT', 'FM', 'Fermo', 'Province'),
('IT', 'FR', 'Frosinone', 'Province'),
('IT', 'GE', 'Genova', 'Province'),
('IT', 'GO', 'Gorizia', 'Province'),
('IT', 'GR', 'Grosseto', 'Province'),
('IT', 'IM', 'Imperia', 'Province'),
('IT', 'IS', 'Isernia', 'Province'),
('IT', 'KR', 'Crotone', 'Province'),
('IT', 'LC', 'Lecco', 'Province'),
('IT', 'LE', 'Lecce', 'Province'),
('IT', 'LI', 'Livorno', 'Province'),
('IT', 'LO', 'Lodi', 'Province'),
('IT', 'LT', 'Latina', 'Province'),
('IT', 'LU', 'Lucca', 'Province'),
('IT', 'MB', 'Monza e Brianza', 'Province'),
('IT', 'MC', 'Macerata', 'Province'),
('IT', 'ME', 'Messina', 'Province'),
('IT', 'MI', 'Milano', 'Province'),
('IT', 'MN', 'Mantova', 'Province'),
('IT', 'MO', 'Modena', 'Province'),
('IT', 'MS', 'Massa-Carrara', 'Province'),
('IT', 'MT', 'Matera', 'Province'),
('IT', 'NA', 'Napoli', 'Province'),
('IT', 'NO', 'Novara', 'Province'),
('IT', 'NU', 'Nuoro', 'Province'),
('IT', 'OG', 'Ogliastra', 'Province'),
('IT', 'OR', 'Oristano', 'Province'),
('IT', 'OT', 'Olbia-Tempio', 'Province'),
('IT', 'PA', 'Palermo', 'Province'),
('IT', 'PC', 'Piacenza', 'Province'),
('IT', 'PD', 'Padova', 'Province'),
('IT', 'PE', 'Pescara', 'Province'),
('IT', 'PG', 'Perugia', 'Province'),
('IT', 'PI', 'Pisa', 'Province'),
('IT', 'PN', 'Pordenone', 'Province'),
('IT', 'PO', 'Prato', 'Province'),
('IT', 'PR', 'Parma', 'Province'),
('IT', 'PT', 'Pistoia', 'Province'),
('IT', 'PU', 'Pesaro e Urbino', 'Province'),
('IT', 'PV', 'Pavia', 'Province'),
('IT', 'PZ', 'Potenza', 'Province'),
('IT', 'RA', 'Ravenna', 'Province'),
('IT', 'RC', 'Reggio Calabria', 'Province'),
('IT', 'RE', 'Reggio Emilia', 'Province'),
('IT', 'RG', 'Ragusa', 'Province'),
('IT', 'RI', 'Rieti', 'Province'),
('IT', 'RM', 'Roma', 'Province'),
('IT', 'RN', 'Rimini', 'Province'),
('IT', 'RO', 'Rovigo', 'Province'),
('IT', 'SA', 'Salerno', 'Province'),
('IT', 'SI', 'Siena', 'Province'),
('IT', 'SO', 'Sondrio', 'Province'),
('IT', 'SP', 'La Spezia', 'Province'),
('IT', 'SR', 'Siracusa', 'Province'),
('IT', 'SS', 'Sassari', 'Province'),
('IT', 'SV', 'Savona', 'Province'),
('IT', 'TA', 'Taranto', 'Province'),
('IT', 'TE', 'Teramo', 'Province'),
('IT', 'TN', 'Trento', 'Province'),
('IT', 'TO', 'Torino', 'Province'),
('IT', 'TP', 'Trapani', 'Province'),
('IT', 'TR', 'Terni', 'Province'),
('IT', 'TS', 'Trieste', 'Province'),
('IT', 'TV', 'Treviso', 'Province'),
('IT', 'UD', 'Udine', 'Province'),
('IT', 'VA', 'Varese', 'Province'),
('IT', 'VB', 'Verbano-Cusio-Ossola', 'Province'),
('IT', 'VC', 'Vercelli', 'Province'),
('IT', 'VE', 'Venezia', 'Province'),
('IT', 'VI', 'Vicenza', 'Province'),
('IT', 'VR', 'Verona', 'Province'),
('IT', 'VS', 'Medio Campidano', 'Province'),
('IT', 'VT', 'Viterbo', 'Province'),
('IT', 'VV', 'Vibo Valentia', 'Province'),
('JM', '01', 'Kingston', 'Partish'),
('JM', '02', 'Saint Andrew', 'Partish'),
('JM', '03', 'Saint Thomas', 'Partish'),
('JM', '04', 'Portland', 'Partish'),
('JM', '05', 'Saint Mary', 'Partish'),
('JM', '06', 'Saint Ann', 'Partish'),
('JM', '07', 'Trelawny', 'Partish'),
('JM', '08', 'Saint James', 'Partish'),
('JM', '09', 'Hanover', 'Partish'),
('JM', '10', 'Westmoreland', 'Partish'),
('JM', '11', 'Saint Elizabeth', 'Partish'),
('JM', '12', 'Manchester', 'Partish'),
('JM', '13', 'Clarendon', 'Partish'),
('JM', '14', 'Saint Catherine', 'Partish'),
('JO', 'AJ', '\'Ajlun', 'Governorate'),
('JO', 'AM', '\'Amman', 'Governorate'),
('JO', 'AQ', 'Al\'Aqaba', 'Governorate'),
('JO', 'AT', 'At Tafilah', 'Governorate'),
('JO', 'AZ', 'Az Zarqa\'', 'Governorate'),
('JO', 'BA', 'AI Balqa\'', 'Governorate'),
('JO', 'IR', 'Irbid', 'Governorate'),
('JO', 'JA', 'Jarash', 'Governorate'),
('JO', 'KA', 'AI Karak', 'Governorate'),
('JO', 'MA', 'AI Mafraq', 'Governorate'),
('JO', 'MD', 'Madaba', 'Governorate'),
('JO', 'MN', 'Ma\'an', 'Governorate'),
('JP', '01', 'Hokkaido', 'Prefecture'),
('JP', '02', 'Aomori', 'Prefecture'),
('JP', '03', 'Iwate', 'Prefecture'),
('JP', '04', 'Miyagi', 'Prefecture'),
('JP', '05', 'Akita', 'Prefecture'),
('JP', '06', 'Yamagata', 'Prefecture'),
('JP', '07', 'Hukusima [Fukushima]', 'Prefecture'),
('JP', '08', 'Ibaraki', 'Prefecture'),
('JP', '09', 'Totigi [Tochigi]', 'Prefecture'),
('JP', '10', 'Gunma', 'Prefecture'),
('JP', '11', 'Saitama', 'Prefecture'),
('JP', '12', 'Tiba [Chiba]', 'Prefecture'),
('JP', '13', 'Tokyo', 'Prefecture'),
('JP', '14', 'Kanagawa', 'Prefecture'),
('JP', '15', 'Niigata', 'Prefecture'),
('JP', '16', 'Toyama', 'Prefecture'),
('JP', '17', 'Isikawa [Ishikawa]', 'Prefecture'),
('JP', '18', 'Hukui [Fukui]', 'Prefecture'),
('JP', '19', 'Yamanasi [Yamanashi]', 'Prefecture'),
('JP', '20', 'Nagano', 'Prefecture'),
('JP', '21', 'Gihu [Gifu]', 'Prefecture'),
('JP', '22', 'Sizuoka [Shizuoka]', 'Prefecture'),
('JP', '23', 'Aiti [Aichi]', 'Prefecture'),
('JP', '24', 'Mie', 'Prefecture'),
('JP', '25', 'Siga [Shiga]', 'Prefecture'),
('JP', '26', 'Kyoto', 'Prefecture'),
('JP', '27', 'Osaka', 'Prefecture'),
('JP', '28', 'Hyogo', 'Prefecture'),
('JP', '29', 'Nara', 'Prefecture'),
('JP', '30', 'Wakayama', 'Prefecture'),
('JP', '31', 'Tottori', 'Prefecture'),
('JP', '32', 'Simane [Shimane]', 'Prefecture'),
('JP', '33', 'Okayama', 'Prefecture'),
('JP', '34', 'Hirosima [Hiroshima]', 'Prefecture'),
('JP', '35', 'Yamaguti [Yamaguchi]', 'Prefecture'),
('JP', '36', 'Tokusima [Tokushima]', 'Prefecture'),
('JP', '37', 'Kagawa', 'Prefecture'),
('JP', '38', 'Ehime', 'Prefecture'),
('JP', '39', 'Koti [Kochi]', 'Prefecture'),
('JP', '40', 'Hukuoka [Fukuoka]', 'Prefecture'),
('JP', '41', 'Saga', 'Prefecture'),
('JP', '42', 'Nagasaki', 'Prefecture'),
('JP', '43', 'Kumamoto', 'Prefecture'),
('JP', '44', 'Oita', 'Prefecture'),
('JP', '45', 'Miyazaki', 'Prefecture'),
('JP', '46', 'Kagosima [Kagoshima]', 'Prefecture'),
('JP', '47', 'Okinawa', 'Prefecture'),
('KE', '110', 'Nairobi Municipality', 'Municipality'),
('KE', '200', 'Central', 'Province'),
('KE', '300', 'Coast', 'Province'),
('KE', '400', 'Eastern', 'Province'),
('KE', '500', 'North-Eastern', 'Province'),
('KE', '600', 'Nyanza', 'Province'),
('KE', '700', 'Rift Valley', 'Province'),
('KE', '800', 'Western', 'Province'),
('KG', 'B', 'Batken', 'Region'),
('KG', 'C', 'Chü', 'Region'),
('KG', 'GB', 'Bishkek', 'City'),
('KG', 'J', 'Jalal-Abad', 'Region'),
('KG', 'N', 'Naryn', 'Region'),
('KG', 'O', 'Osh', 'Region'),
('KG', 'T', 'Talas', 'Region'),
('KG', 'Y', 'Ysyk-Köl', 'Region'),
('KH', '1', 'Banteay Mean Chey [Bântéay Méanchey]', 'Province'),
('KH', '10', 'Kracheh [Krâchéh]', 'Province'),
('KH', '11', 'Mondol Kiri [Môndól Kiri]', 'Province'),
('KH', '12', 'Phnom Penh [Phnum Pénh]', 'Autonomous municipality'),
('KH', '13', 'Preah Vihear [Preah Vihéar]', 'Province'),
('KH', '14', 'Prey Veaeng [Prey Vêng]', 'Province'),
('KH', '15', 'Pousaat [Pouthisat]', 'Province'),
('KH', '16', 'Rotanak Kiri [Rôtânôkiri]', 'Province'),
('KH', '17', 'Siem Reab [Siemréab]', 'Province'),
('KH', '18', 'Krong Preah Sihanouk [Krong Preah Sihanouk]', 'Autonomous municipality'),
('KH', '19', 'Stueng Traeng [Stng Trêng]', 'Province'),
('KH', '2', 'Baat Dambang [Batdâmbâng]', 'Province'),
('KH', '20', 'Svaay Rieng [Svay Rieng]', 'Province'),
('KH', '21', 'Taakaev [Takêv]', 'Province'),
('KH', '22', 'Otdar Mean Chey [Otdâr Méanchey]', 'Province'),
('KH', '23', 'Krong Kaeb [Krong Kêb]', 'Autonomous municipality'),
('KH', '24', 'Krong Pailin [Krong Pailin]', 'Autonomous municipality'),
('KH', '3', 'Kampong Chaam [Kâmpóng Cham]', 'Province'),
('KH', '4', 'Kampong Chhnang [Kâmpóng Chhnang]', 'Province'),
('KH', '5', 'Kampong Spueu [Kâmpóng Sp]', 'Province'),
('KH', '6', 'Kampong Thum [Kâmpóng Thum]', 'Province'),
('KH', '7', 'Kampot [Kâmpôt]', 'Province'),
('KH', '8', 'Kandaal [Kândal]', 'Province'),
('KH', '9', 'Kaoh Kong [Kaôh Kong]', 'Province'),
('KI', 'G', 'Gilbert Islands', 'Group of islands'),
('KI', 'L', 'Line Islands', 'Group of islands'),
('KI', 'P', 'Phoenix Islands', 'Group of islands'),
('KM', 'A', 'Anjouan', 'Governorate'),
('KM', 'G', 'Grande Comore', 'Governorate'),
('KM', 'M', 'Mohéli', 'Governorate'),
('KN', '01', 'Christ Church Nichola Town', 'Parish'),
('KN', '02', 'Saint Anne Sandy Point', 'Parish'),
('KN', '03', 'Saint George Basseterre', 'Parish'),
('KN', '04', 'Saint George Gingerland', 'Parish'),
('KN', '05', 'Saint James Windward', 'Parish'),
('KN', '06', 'Saint John Capisterre', 'Parish'),
('KN', '07', 'Saint John Figtree', 'Parish'),
('KN', '08', 'Saint Mary Cayon', 'Parish'),
('KN', '09', 'Saint Paul Capisterre', 'Parish'),
('KN', '10', 'Saint Paul Charlestown', 'Parish'),
('KN', '11', 'Saint Peter Basseterre', 'Parish'),
('KN', '12', 'Saint Thomas Lowland', 'Parish'),
('KN', '13', 'Saint Thomas Middle Island', 'Parish'),
('KN', '15', 'Trinity Palmetto Point', 'Parish'),
('KP', '01', 'Phyeongyang', 'Capital City'),
('KP', '02', 'Phyeongannamto', 'Province'),
('KP', '03', 'Phyeonganpukto', 'Province'),
('KP', '04', 'Jakangto', 'Province'),
('KP', '05', 'Hwanghainamto', 'Province'),
('KP', '06', 'Hwanghaipukto', 'Province'),
('KP', '07', 'Kangweonto', 'Province'),
('KP', '08', 'Hamkyeongnamto', 'Province'),
('KP', '09', 'Hamkyeongpukto', 'Province'),
('KP', '10', 'Yanggang-do', 'Province'),
('KP', '13', 'Nason', 'Special City'),
('KR', '11', 'Seoul Teugbyeolsi [Seoul-T\'ukpyolshi]', 'Capital Metropolitan City'),
('KR', '26', 'Busan Gwang\'yeogsi [Pusan-Kwangyokshi]', 'Metropolitan city'),
('KR', '27', 'Daegu Gwang\'yeogsi [Taegu-Kwangyokshi]', 'Metropolitan city'),
('KR', '28', 'Incheon Gwang\'yeogsi [Inch\'on-Kwangyokshi]', 'Metropolitan city'),
('KR', '29', 'Gwangju Gwang\'yeogsi [Kwangju-Kwangyokshi]', 'Metropolitan city'),
('KR', '30', 'Daejeon Gwang\'yeogsi [Taejon-Kwangyokshi]', 'Metropolitan city'),
('KR', '31', 'Ulsan Gwang\'yeogsi [Ulsan-Kwangyokshi]', 'Metropolitan city'),
('KR', '41', 'Gyeonggido [Kyonggi-do]', 'Province'),
('KR', '42', 'Gang\'weondo [Kang-won-do]', 'Province'),
('KR', '43', 'Chungcheongbugdo [Ch\'ungch\'ongbuk-do]', 'Province'),
('KR', '44', 'Chungcheongnamdo [Ch\'ungch\'ongnam-do]', 'Province'),
('KR', '45', 'Jeonrabugdo [Chollabuk-do]', 'Province'),
('KR', '46', 'Jeonranamdo [Chollanam-do]', 'Province'),
('KR', '47', 'Gyeongsangbugdo [Kyongsangbuk-do]', 'Province'),
('KR', '48', 'Gyeongsangnamdo [Kyongsangnam-do]', 'Province'),
('KR', '49', 'Jejudo [Cheju-do]', 'Province'),
('KW', 'AH', 'Al Ahmadi', ''),
('KW', 'FA', 'Al Farwaniyah', ''),
('KW', 'HA', 'Hawalli', ''),
('KW', 'JA', 'Al Jahrah', ''),
('KW', 'KU', 'Al Kuwayt', ''),
('KW', 'MU', 'Mubarak al Kabir', ''),
('KZ', 'AKM', 'Aqmola oblysy', 'Region'),
('KZ', 'AKT', 'Aqtobe oblysy', 'Region'),
('KZ', 'ALA', 'Almaty', 'City'),
('KZ', 'ALM', 'Almaty oblysy', 'Region'),
('KZ', 'AST', 'Astana', 'City'),
('KZ', 'ATY', 'Atyrau oblysy', 'Region'),
('KZ', 'KAR', 'Qaraghandy oblysy', 'Region'),
('KZ', 'KUS', 'Qostanay oblysy', 'Region'),
('KZ', 'KZY', 'Qyzylorda oblysy', 'Region'),
('KZ', 'MAN', 'Mangghystau oblysy', 'Region'),
('KZ', 'PAV', 'Pavlodar oblysy', 'Region'),
('KZ', 'SEV', 'Soltüstik Qazaqstan oblysy', 'Region'),
('KZ', 'VOS', 'Shyghys Qazaqstan oblysy', 'Region'),
('KZ', 'YUZ', 'Ongtüstik Qazaqstan oblysy', 'Region'),
('KZ', 'ZAP', 'Batys Qazaqstan oblysy', 'Region'),
('KZ', 'ZHA', 'Zhambyl oblysy', 'Region'),
('LA', 'AT', 'Attapu [Attopeu]', 'Province'),
('LA', 'BK', 'Bokèo', 'Province'),
('LA', 'BL', 'Bolikhamxai [Borikhane]', 'Province'),
('LA', 'CH', 'Champasak [Champassak]', 'Province'),
('LA', 'HO', 'Houaphan', 'Province'),
('LA', 'KH', 'Khammouan', 'Province'),
('LA', 'LM', 'Louang Namtha', 'Province'),
('LA', 'LP', 'Louangphabang [Louang Prabang)', 'Province'),
('LA', 'OU', 'Oudomxai [Oudomsai]', 'Province'),
('LA', 'PH', 'Phôngsali [Phong Saly]', 'Province'),
('LA', 'SL', 'Salavan [Saravane]', 'Province'),
('LA', 'SV', 'Savannakhét', 'Province'),
('LA', 'VI', 'Vientiane', 'Province'),
('LA', 'VT', 'Vientiane', 'Prefecture'),
('LA', 'XA', 'Xaignabouli [Sayaboury]', 'Province'),
('LA', 'XE', 'Xékong [Sékong]', 'Province'),
('LA', 'XI', 'Xiangkhoang [Xieng Khouang]', 'Province'),
('LA', 'XN', 'Xaisômboun', ''),
('LB', 'AK', 'Aakkâr', 'Governorate'),
('LB', 'AS', 'Loubnâne ech Chemâli', 'Governorate'),
('LB', 'BA', 'Beiroût', 'Governorate'),
('LB', 'BH', 'Baalbek-Hermel', 'Governorate'),
('LB', 'BI', 'El Béqaa', 'Governorate'),
('LB', 'JA', 'Loubnâne ej Jnoûbi', 'Governorate'),
('LB', 'JL', 'Jabal Loubnâne', 'Governorate'),
('LB', 'NA', 'Nabatîyé', 'Governorate'),
('LI', '01', 'Balzers', ''),
('LI', '02', 'Eschen', ''),
('LI', '03', 'Gamprin', ''),
('LI', '04', 'Mauren', ''),
('LI', '05', 'Planken', ''),
('LI', '06', 'Ruggell', ''),
('LI', '07', 'Schaan', ''),
('LI', '08', 'Schellenberg', ''),
('LI', '09', 'Triesen', ''),
('LI', '10', 'Triesenberg', ''),
('LI', '11', 'Vaduz', ''),
('LK', '1', 'Basnahira Palata', 'Province'),
('LK', '11', 'Colombo', 'District'),
('LK', '12', 'Gampaha', 'District'),
('LK', '13', 'Kalutara', 'District'),
('LK', '2', 'Madhyama Palata', 'Province'),
('LK', '21', 'Kandy', 'District'),
('LK', '22', 'Matale', 'District'),
('LK', '23', 'Nuwara Eliya', 'District'),
('LK', '3', 'Dakunu Palata', 'Province'),
('LK', '31', 'Galle', 'District'),
('LK', '32', 'Matara', 'District'),
('LK', '33', 'Hambantota', 'District'),
('LK', '4', 'Uturu Palata', 'Province'),
('LK', '41', 'Jaffna', 'District'),
('LK', '42', 'Kilinochchi', 'District'),
('LK', '43', 'Mannar', 'District'),
('LK', '44', 'Vavuniya', 'District'),
('LK', '45', 'Mullaittivu', 'District'),
('LK', '5', 'Negenahira Palata', 'Province'),
('LK', '51', 'Batticaloa', 'District'),
('LK', '52', 'Ampara', 'District'),
('LK', '53', 'Trincomalee', 'District'),
('LK', '6', 'Wayamba Palata', 'Province'),
('LK', '61', 'Kurunegala', 'District'),
('LK', '62', 'Puttalam', 'District'),
('LK', '7', 'Uturumeda Palata', 'Province'),
('LK', '71', 'Anuradhapura', 'District'),
('LK', '72', 'Polonnaruwa', 'District'),
('LK', '8', 'Uva Palata', 'Province'),
('LK', '81', 'Badulla', 'District'),
('LK', '82', 'Monaragala', 'District'),
('LK', '9', 'Sabaragamuwa Palata', 'Province'),
('LK', '91', 'Ratnapura', 'District'),
('LK', '92', 'Kegalla', 'District'),
('LR', 'BG', 'Bong', 'County'),
('LR', 'BM', 'Bomi', 'County'),
('LR', 'CM', 'Grand Cape Mount', 'County'),
('LR', 'GB', 'Grand Bassa', 'County'),
('LR', 'GG', 'Grand Gedeh', 'County'),
('LR', 'GK', 'Grand Kru', 'County'),
('LR', 'GP', 'Gbarpolu', 'County'),
('LR', 'LO', 'Lofa', 'County'),
('LR', 'MG', 'Margibi', 'County'),
('LR', 'MO', 'Montserrado', 'County'),
('LR', 'MY', 'Maryland', 'County'),
('LR', 'NI', 'Nimba', 'County'),
('LR', 'RG', 'River Gee', 'County'),
('LR', 'RI', 'Rivercess', 'County'),
('LR', 'SI', 'Sinoe', 'County'),
('LS', 'A', 'Maseru', 'District'),
('LS', 'B', 'Butha-Buthe', 'District'),
('LS', 'C', 'Leribe', 'District'),
('LS', 'D', 'Berea', 'District'),
('LS', 'E', 'Mafeteng', 'District'),
('LS', 'F', 'Mohale\'s Hoek', 'District'),
('LS', 'G', 'Quthing', 'District'),
('LS', 'H', 'Qacha\'s Nek', 'District'),
('LS', 'J', 'Mokhotlong', 'District'),
('LS', 'K', 'Thaba-Tseka', 'District'),
('LT', 'AL', 'Alytaus Apskritis', 'County'),
('LT', 'KL', 'Klaipédos Apskritis', 'County'),
('LT', 'KU', 'Kauno Apskritis', 'County'),
('LT', 'MR', 'Marijampolés Apskritis', 'County'),
('LT', 'PN', 'Panevéio Apskritis', 'County'),
('LT', 'SA', 'iauliu Apskritis', 'County'),
('LT', 'TA', 'Tauragés Apskritis', 'County'),
('LT', 'TE', 'Teliu Apskritis', 'County'),
('LT', 'UT', 'Utenos Apskritis', 'County'),
('LT', 'VL', 'Vilniaus Apskritis', 'County'),
('LU', 'D', 'Diekirch', 'District'),
('LU', 'G', 'Grevenmacher', 'District'),
('LU', 'L', 'Luxembourg (fr)', 'District'),
('LV', '001', 'Aglonas novads (Aglona)', 'Municipality'),
('LV', '002', 'Aizkraukles novads (Aizkraukle)', 'Municipality'),
('LV', '003', 'Aizputes novads (Aizpute)', 'Municipality'),
('LV', '004', 'Aknistes novads (Akniste)', 'Municipality'),
('LV', '005', 'Alojas novads (Aloja)', 'Municipality'),
('LV', '006', 'Alsungas novads (Alsunga)', 'Municipality'),
('LV', '007', 'Aluksnes novads (Aluksne)', 'Municipality'),
('LV', '008', 'Amatas novads (Amata)', 'Municipality'),
('LV', '009', 'Apes novads (Ape)', 'Municipality'),
('LV', '010', 'Auces novads (Auce)', 'Municipality'),
('LV', '011', 'Adau novads (Adai)', 'Municipality'),
('LV', '012', 'Babites novads (Babite)', 'Municipality'),
('LV', '013', 'Baldones novads (Baldone)', 'Municipality'),
('LV', '014', 'Baltinavas novads (Baltinava)', 'Municipality'),
('LV', '015', 'Balvu novads (Balvi)', 'Municipality'),
('LV', '016', 'Bauskas novads (Bauska)', 'Municipality'),
('LV', '017', 'Beverinas novads (Beverina)', 'Municipality'),
('LV', '018', 'Brocenu novads (Broceni)', 'Municipality'),
('LV', '019', 'Burtnieku novads (Burtnieki)', 'Municipality'),
('LV', '020', 'Carnikavas novads (Carnikava)', 'Municipality'),
('LV', '021', 'Cesvaines novads (Cesvaine)', 'Municipality'),
('LV', '022', 'Cesu novads (Cesis)', 'Municipality'),
('LV', '023', 'Ciblas novads (Cibla)', 'Municipality'),
('LV', '024', 'Dagdas novads (Dagda)', 'Municipality'),
('LV', '025', 'Daugavpils novads (Daugavpils)', 'Municipality'),
('LV', '026', 'Dobeles novads (Dobele)', 'Municipality'),
('LV', '027', 'Dundagas novads (Dundaga)', 'Municipality'),
('LV', '028', 'Durbes novads (Durbe)', 'Municipality'),
('LV', '029', 'Engures novads (Engure)', 'Municipality'),
('LV', '030', 'Erglu novads (Ergli)', 'Municipality'),
('LV', '031', 'Garkalnes novads (Garkalne)', 'Municipality'),
('LV', '032', 'Grobinas novads (Grobina)', 'Municipality'),
('LV', '033', 'Gulbenes novads (Gulbene)', 'Municipality'),
('LV', '034', 'Iecavas novads (Iecava)', 'Municipality'),
('LV', '035', 'Ikkiles novads (Ikkile)', 'Municipality'),
('LV', '036', 'Ilukstes novads (Ilukste)', 'Municipality'),
('LV', '037', 'Incukalna novads (Incukalns)', 'Municipality'),
('LV', '038', 'Jaunjelgavas novads (Jaunjelgava)', 'Municipality'),
('LV', '039', 'Jaunpiebalgas novads (Jaunpiebalga)', 'Municipality'),
('LV', '040', 'Jaunpils novads (Jaunpils)', 'Municipality'),
('LV', '041', 'Jelgavas novads (Jelgava)', 'Municipality'),
('LV', '042', 'Jekabpils novads (Jekabpils)', 'Municipality'),
('LV', '043', 'Kandavas novads (Kandava)', 'Municipality'),
('LV', '044', 'Karsavas novads (Karsava)', 'Municipality'),
('LV', '045', 'Kocenu novads', 'Municipality'),
('LV', '046', 'Kokneses novads (Koknese)', 'Municipality'),
('LV', '047', 'Kraslavas novads (Kraslava)', 'Municipality'),
('LV', '048', 'Krimuldas novads (Krimulda)', 'Municipality'),
('LV', '049', 'Krustpils novads (Krustpils)', 'Municipality'),
('LV', '050', 'Kuldigas novads (Kuldiga)', 'Municipality'),
('LV', '051', 'Keguma novads (Kegums)', 'Municipality'),
('LV', '052', 'Kekavas novads (Kekava)', 'Municipality'),
('LV', '053', 'Lielvardes novads (Lielvarde)', 'Municipality'),
('LV', '054', 'Limbau novads (Limbai)', 'Municipality'),
('LV', '055', 'Ligatnes novads (Ligatne)', 'Municipality'),
('LV', '056', 'Livanu novads (Livani)', 'Municipality'),
('LV', '057', 'Lubanas novads (Lubana)', 'Municipality'),
('LV', '058', 'Ludzas novads (Ludza)', 'Municipality'),
('LV', '059', 'Madonas novads (Madona)', 'Municipality'),
('LV', '060', 'Mazsalacas novads (Mazsalaca)', 'Municipality'),
('LV', '061', 'Malpils novads (Malpils)', 'Municipality'),
('LV', '062', 'Marupes novads (Marupe)', 'Municipality'),
('LV', '063', 'Mersraga novads', 'Municipality'),
('LV', '064', 'Naukenu novads (Naukeni)', 'Municipality'),
('LV', '065', 'Neretas novads (Nereta)', 'Municipality'),
('LV', '066', 'Nicas novads (Nica)', 'Municipality'),
('LV', '067', 'Ogres novads (Ogre)', 'Municipality'),
('LV', '068', 'Olaines novads (Olaine)', 'Municipality'),
('LV', '069', 'Ozolnieku novads (Ozolnieki)', 'Municipality'),
('LV', '070', 'Pargaujas novads (Pargauja)', 'Municipality'),
('LV', '071', 'Pavilostas novads (Pavilosta)', 'Municipality'),
('LV', '072', 'Plavinu novads (Plavinas)', 'Municipality'),
('LV', '073', 'Preilu novads (Preili)', 'Municipality'),
('LV', '074', 'Priekules novads (Priekule)', 'Municipality'),
('LV', '075', 'Priekulu novads (Priekuli)', 'Municipality'),
('LV', '076', 'Raunas novads (Rauna)', 'Municipality'),
('LV', '077', 'Rezeknes novads (Rezekne)', 'Municipality'),
('LV', '078', 'Riebinu novads (Riebini)', 'Municipality'),
('LV', '079', 'Rojas novads (Roja)', 'Municipality'),
('LV', '080', 'Ropau novads (Ropai)', 'Municipality'),
('LV', '081', 'Rucavas novads (Rucava)', 'Municipality'),
('LV', '082', 'Rugaju novads (Rugaji)', 'Municipality'),
('LV', '083', 'Rundales novads (Rundale)', 'Municipality'),
('LV', '084', 'Rujienas novads (Rujiena)', 'Municipality'),
('LV', '085', 'Salas novads (Sala)', 'Municipality'),
('LV', '086', 'Salacgrivas novads (Salacgriva)', 'Municipality'),
('LV', '087', 'Salaspils novads (Salaspils)', 'Municipality'),
('LV', '088', 'Saldus novads (Saldus)', 'Municipality'),
('LV', '089', 'Saulkrastu novads (Saulkrasti)', 'Municipality'),
('LV', '090', 'Sejas novads (Seja)', 'Municipality'),
('LV', '091', 'Siguldas novads (Sigulda)', 'Municipality'),
('LV', '092', 'Skriveru novads (Skriveri)', 'Municipality'),
('LV', '093', 'Skrundas novads (Skrunda)', 'Municipality'),
('LV', '094', 'Smiltenes novads (Smiltene)', 'Municipality'),
('LV', '095', 'Stopinu novads (Stopini)', 'Municipality'),
('LV', '096', 'Strencu novads (Strenci)', 'Municipality'),
('LV', '097', 'Talsu novads (Talsi)', 'Municipality'),
('LV', '098', 'Tervetes novads (Tervete)', 'Municipality'),
('LV', '099', 'Tukuma novads (Tukums)', 'Municipality'),
('LV', '100', 'Vainodes novads (Vainode)', 'Municipality'),
('LV', '101', 'Valkas novads (Valka)', 'Municipality'),
('LV', '102', 'Varaklanu novads (Varaklani)', 'Municipality'),
('LV', '103', 'Varkavas novads (Varkava)', 'Municipality'),
('LV', '104', 'Vecpiebalgas novads (Vecpiebalga)', 'Municipality'),
('LV', '105', 'Vecumnieku novads (Vecumnieki)', 'Municipality'),
('LV', '106', 'Ventspils novads (Ventspils)', 'Municipality'),
('LV', '107', 'Viesites novads (Viesite)', 'Municipality'),
('LV', '108', 'Vilakas novads (Vilaka)', 'Municipality'),
('LV', '109', 'Vilanu novads (Vilani)', 'Municipality'),
('LV', '110', 'Zilupes novads (Zilupe)', 'Municipality'),
('LV', 'DGV', 'Daugavpils', 'City'),
('LV', 'JEL', 'Jelgava', 'City'),
('LV', 'JKB', 'Jekabpils', 'City'),
('LV', 'JUR', 'Jurmala', 'City'),
('LV', 'LPX', 'Liepdja', 'City'),
('LV', 'REZ', 'Rezekne', 'City'),
('LV', 'RIX', 'Riga', 'City'),
('LV', 'VEN', 'Ventspils', 'City'),
('LV', 'VMR', 'Valmiera', 'City'),
('LY', 'BU', 'Al Butnan', 'Popularate'),
('LY', 'DR', 'Darnah', 'Popularate'),
('LY', 'GT', 'Ghat', 'Popularate'),
('LY', 'JA', 'Al Jabal al Akhdar', 'Popularate'),
('LY', 'JG', 'Al Jabal al Gharbi', 'Popularate'),
('LY', 'JI', 'Al Jifarah', 'Popularate'),
('LY', 'JU', 'Al Jufrah', 'Popularate'),
('LY', 'KF', 'Al Kufrah', 'Popularate'),
('LY', 'MB', 'Al Marqab', 'Popularate'),
('LY', 'MI', 'Misratah', 'Popularate'),
('LY', 'MJ', 'Al Marj', 'Popularate'),
('LY', 'MQ', 'Murzuq', 'Popularate'),
('LY', 'NL', 'Nalut', 'Popularate'),
('LY', 'NQ', 'An Nuqat al Khams', 'Popularate'),
('LY', 'SB', 'Sabha', 'Popularate'),
('LY', 'SR', 'Surt', 'Popularate'),
('LY', 'TB', 'Tarabulus', 'Popularate'),
('LY', 'WA', 'Al Wa?at', 'Popularate'),
('LY', 'WD', 'Wadi al Hayat', 'Popularate'),
('LY', 'WS', 'Wadi ash Shati?', 'Popularate'),
('LY', 'ZA', 'Az Zawiyah', 'Popularate'),
('MA', '01', 'Tanger-Tétouan', 'Economic Region'),
('MA', '02', 'Gharb-Chrarda-Beni Hssen', 'Economic Region'),
('MA', '03', 'Taza-Al Hoceima-Taounate', 'Economic Region'),
('MA', '04', 'L\'Oriental', 'Economic Region'),
('MA', '05', 'Fès-Boulemane', 'Economic Region'),
('MA', '06', 'Meknès-Tafilalet', 'Economic Region'),
('MA', '07', 'Rabat-Salé-Zemmour-Zaer', 'Economic Region'),
('MA', '08', 'Grand Casablanca', 'Economic Region'),
('MA', '09', 'Chaouia-Ouardigha', 'Economic Region'),
('MA', '10', 'Doukhala-Abda', 'Economic Region'),
('MA', '11', 'Marrakech-Tensift-Al Haouz', 'Economic Region'),
('MA', '12', 'Tadla-Azilal', 'Economic Region'),
('MA', '13', 'Sous-Massa-Draa', 'Economic Region'),
('MA', '14', 'Guelmim-Es Smara', 'Economic Region'),
('MA', '15', 'Laâyoune-Boujdour-Sakia el Hamra', 'Economic Region'),
('MA', '16', 'Oued ed Dahab-Lagouira', 'Economic Region'),
('MA', 'AGD', 'Agadir*', 'Prefecture'),
('MA', 'AOU', 'Aousserd', 'Prefecture'),
('MA', 'ASZ', 'Assa-Zag', 'Province'),
('MA', 'AZI', 'Azilal', 'Province'),
('MA', 'BEM', 'Beni Mellal', 'Province'),
('MA', 'BER', 'Berkane', 'Province'),
('MA', 'BES', 'Ben Slimane', 'Province'),
('MA', 'BOD', 'Boujdour (EH)', 'Province'),
('MA', 'BOM', 'Boulemane', 'Province'),
('MA', 'CAS', 'Casablanca [Dar el Beïda]*', 'Prefecture'),
('MA', 'CHE', 'Chefchaouene', 'Province'),
('MA', 'CHI', 'Chichaoua', 'Province'),
('MA', 'CHT', 'Chtouka-Ait Baha', 'Province'),
('MA', 'ERR', 'Errachidia', 'Province'),
('MA', 'ESI', 'Essaouira', 'Province'),
('MA', 'ESM', 'Es Smara (EH)', 'Province'),
('MA', 'FAH', 'Fahs-Beni Makada', 'Prefecture'),
('MA', 'FES', 'Fès*', 'Prefecture'),
('MA', 'FIG', 'Figuig', 'Province'),
('MA', 'GUE', 'Guelmim', 'Province'),
('MA', 'HAJ', 'El Hajeb', 'Province'),
('MA', 'HAO', 'Al Haouz', 'Province'),
('MA', 'HOC', 'Al Hoceïma', 'Province'),
('MA', 'IFR', 'Ifrane', 'Province'),
('MA', 'INE', 'Inezgane-Ait Melloul', 'Prefecture'),
('MA', 'IRA', 'Jerada', 'Province'),
('MA', 'JDI', 'El Jadida', 'Province'),
('MA', 'KEN', 'Kènitra', 'Province'),
('MA', 'KES', 'Kelaat Sraghna', 'Province'),
('MA', 'KHE', 'Khemisset', 'Province'),
('MA', 'KHN', 'Khenifra', 'Province'),
('MA', 'KHO', 'Khouribga', 'Province'),
('MA', 'LAA', 'Laâyoune* (EH)', 'Prefecture'),
('MA', 'LAR', 'Larache', 'Province'),
('MA', 'MED', 'Médiouna', 'Province'),
('MA', 'MEK', 'Meknès*', 'Prefecture'),
('MA', 'MMD', 'Marrakech-Medina', 'Prefecture'),
('MA', 'MMN', 'Marrakech-Menara', 'Prefecture'),
('MA', 'MOH', 'Mohammadia', 'Prefecture'),
('MA', 'MOU', 'Moulay Yacoub', 'Province'),
('MA', 'NAD', 'Nador', 'Province'),
('MA', 'NOU', 'Nouaceur', 'Province'),
('MA', 'OUA', 'Ouarzazate', 'Province'),
('MA', 'OUD', 'Oued ed Dahab (EH)', 'Province'),
('MA', 'OUJ', 'Oujda*', 'Prefecture'),
('MA', 'RAB', 'Rabat', 'Prefecture'),
('MA', 'SAF', 'Safi', 'Province'),
('MA', 'SAL', 'Salé', 'Prefecture'),
('MA', 'SEF', 'Sefrou', 'Province');
INSERT INTO `mm_country_subdivisions` (`iso`, `code`, `name`, `type`) VALUES
('MA', 'SET', 'Settat', 'Province'),
('MA', 'SIK', 'Sidi Kacem', 'Province'),
('MA', 'SKH', 'Skhirate-Témara', 'Prefecture'),
('MA', 'SYB', 'Sidi Youssef Ben Ali', 'Prefecture'),
('MA', 'TAI', 'Taourirt', 'Province'),
('MA', 'TAO', 'Taounate', 'Province'),
('MA', 'TAR', 'Taroudannt', 'Province'),
('MA', 'TAT', 'Tata', 'Province'),
('MA', 'TAZ', 'Taza', 'Province'),
('MA', 'TET', 'Tétouan*', 'Prefecture'),
('MA', 'TIZ', 'Tiznit', 'Province'),
('MA', 'TNG', 'Tanger', 'Province'),
('MA', 'TNT', 'Tan-Tan', 'Province'),
('MA', 'ZAG', 'Zagora', 'Province'),
('MD', 'AN', 'Anenii Noi', 'District'),
('MD', 'BA', 'Balti', 'City'),
('MD', 'BD', 'Tighina', 'City'),
('MD', 'BR', 'Briceni', 'District'),
('MD', 'BS', 'Basarabeasca', 'District'),
('MD', 'CA', 'Cahul', 'District'),
('MD', 'CL', 'Calarasi', 'District'),
('MD', 'CM', 'Cimislia', 'District'),
('MD', 'CR', 'Criuleni', 'District'),
('MD', 'CS', 'Causeni', 'District'),
('MD', 'CT', 'Cantemir', 'District'),
('MD', 'CU', 'Chisinau', 'City'),
('MD', 'DO', 'Donduseni', 'District'),
('MD', 'DR', 'Drochia', 'District'),
('MD', 'DU', 'Dubasari', 'District'),
('MD', 'ED', 'Edinet', 'District'),
('MD', 'FA', 'Falesti', 'District'),
('MD', 'FL', 'Floresti', 'District'),
('MD', 'GA', 'Gagauzia, Unitatea teritoriala autonoma (UTAG)', 'Autonomous territory unit'),
('MD', 'GL', 'Glodeni', 'District'),
('MD', 'HI', 'Hîncesti', 'District'),
('MD', 'IA', 'Ialoveni', 'District'),
('MD', 'LE', 'Leova', 'District'),
('MD', 'NI', 'Nisporeni', 'District'),
('MD', 'OC', 'Ocniþa', 'District'),
('MD', 'OR', 'Orhei', 'District'),
('MD', 'RE', 'Rezina', 'District'),
('MD', 'RI', 'Rîºcani', 'District'),
('MD', 'SD', 'Soldanesti', 'District'),
('MD', 'SI', 'Sîngerei', 'District'),
('MD', 'SN', 'Stînga Nistrului, unitatea teritoriala din', 'Territorial unit'),
('MD', 'SO', 'Soroca', 'District'),
('MD', 'ST', 'Straseni', 'District'),
('MD', 'SV', 'Stefan Voda', 'District'),
('MD', 'TA', 'Taraclia', 'District'),
('MD', 'TE', 'Telenesti', 'District'),
('MD', 'UN', 'Ungheni', 'District'),
('ME', '01', 'Andrijevica', ''),
('ME', '02', 'Bar', ''),
('ME', '03', 'Berane', ''),
('ME', '04', 'Bijelo Polje', ''),
('ME', '05', 'Budva', ''),
('ME', '06', 'Cetinje', ''),
('ME', '07', 'Danilovgrad', ''),
('ME', '08', 'Herceg-Novi', ''),
('ME', '09', 'Kolain', ''),
('ME', '10', 'Kotor', ''),
('ME', '11', 'Mojkovac', ''),
('ME', '12', 'Nikic´', ''),
('ME', '13', 'Plav', ''),
('ME', '14', 'Pljevlja', ''),
('ME', '15', 'Pluine', ''),
('ME', '16', 'Podgorica', ''),
('ME', '17', 'Roaje', ''),
('ME', '18', 'avnik', ''),
('ME', '19', 'Tivat', ''),
('ME', '20', 'Ulcinj', ''),
('ME', '21', 'abljak', ''),
('MG', 'A', 'Toamasina', 'Province'),
('MG', 'D', 'Antsiranana', 'Province'),
('MG', 'F', 'Fianarantsoa', 'Province'),
('MG', 'M', 'Mahajanga', 'Province'),
('MG', 'T', 'Antananarivo', 'Province'),
('MG', 'U', 'Toliara', 'Province'),
('MH', 'ALK', 'Ailuk', 'Municipality'),
('MH', 'ALL', 'Ailinglapalap', 'Municipality'),
('MH', 'ARN', 'Arno', 'Municipality'),
('MH', 'AUR', 'Aur', 'Municipality'),
('MH', 'EBO', 'Ebon', 'Municipality'),
('MH', 'ENI', 'Eniwetok', 'Municipality'),
('MH', 'JAB', 'Jabat', 'Municipality'),
('MH', 'JAL', 'Jaluit', 'Municipality'),
('MH', 'KIL', 'Kili', 'Municipality'),
('MH', 'KWA', 'Kwajalein', 'Municipality'),
('MH', 'L', 'Ralik chain', 'Chains (of islands)'),
('MH', 'LAE', 'Lae', 'Municipality'),
('MH', 'LIB', 'Lib', 'Municipality'),
('MH', 'LIK', 'Likiep', 'Municipality'),
('MH', 'MAJ', 'Majuro', 'Municipality'),
('MH', 'MAL', 'Maloelap', 'Municipality'),
('MH', 'MEJ', 'Mejit', 'Municipality'),
('MH', 'MIL', 'Mili', 'Municipality'),
('MH', 'NMK', 'Namorik', 'Municipality'),
('MH', 'NMU', 'Namu', 'Municipality'),
('MH', 'RON', 'Rongelap', 'Municipality'),
('MH', 'T', 'Ratak chain', 'Chains (of islands)'),
('MH', 'UJA', 'Ujae', 'Municipality'),
('MH', 'UTI', 'Utirik', 'Municipality'),
('MH', 'WTH', 'Wotho', 'Municipality'),
('MH', 'WW', 'Wotje', 'Municipality'),
('MK', '01', 'Aerodrom *', ''),
('MK', '02', 'Aracinovo', ''),
('MK', '03', 'Berovo', ''),
('MK', '04', 'Bitola', ''),
('MK', '05', 'Bogdanci', ''),
('MK', '06', 'Bogovinje', ''),
('MK', '07', 'Bosilovo', ''),
('MK', '08', 'Brvenica', ''),
('MK', '09', 'Butel *', ''),
('MK', '10', 'Valandovo', ''),
('MK', '11', 'Vasilevo', ''),
('MK', '12', 'Vevcani', ''),
('MK', '13', 'Veles', ''),
('MK', '14', 'Vinica', ''),
('MK', '15', 'Vranetica', ''),
('MK', '16', 'Vrapcite', ''),
('MK', '17', 'Gazi Baba *', ''),
('MK', '18', 'Gevgelija', ''),
('MK', '19', 'Gostivar', ''),
('MK', '20', 'Gradsko', ''),
('MK', '21', 'Debar', ''),
('MK', '22', 'Debarca', ''),
('MK', '23', 'Delcevo', ''),
('MK', '24', 'Demir Kapija', ''),
('MK', '25', 'Demir Hisar', ''),
('MK', '26', 'Dojran', ''),
('MK', '27', 'Dolneni', ''),
('MK', '28', 'Drugovo', ''),
('MK', '29', 'Gjorce Petrov *', ''),
('MK', '30', 'elino', ''),
('MK', '31', 'Zajas', ''),
('MK', '32', 'Zelenikovo', ''),
('MK', '33', 'Zrnovci', ''),
('MK', '34', 'Ilinden', ''),
('MK', '35', 'Jegunovce', ''),
('MK', '36', 'Kavadarci', ''),
('MK', '37', 'Karbinci', ''),
('MK', '38', 'Karpo *', ''),
('MK', '39', 'Kisela Voda *', ''),
('MK', '40', 'Kicevo', ''),
('MK', '41', 'Konce', ''),
('MK', '42', 'Kocani', ''),
('MK', '43', 'Kratovo', ''),
('MK', '44', 'Kriva Palanka', ''),
('MK', '45', 'Krivogatani', ''),
('MK', '46', 'Kruevo', ''),
('MK', '47', 'Kumanovo', ''),
('MK', '48', 'Lipkovo', ''),
('MK', '49', 'Lozovo', ''),
('MK', '50', 'Mavrovo-i-Rostua', ''),
('MK', '51', 'Makedonska Kamenica', ''),
('MK', '52', 'Makedonski Brod', ''),
('MK', '53', 'Mogila', ''),
('MK', '54', 'Negotino', ''),
('MK', '55', 'Novaci', ''),
('MK', '56', 'Novo Selo', ''),
('MK', '57', 'Oslomej', ''),
('MK', '58', 'Ohrid', ''),
('MK', '59', 'Petrovec', ''),
('MK', '60', 'Pehcevo', ''),
('MK', '61', 'Plasnica', ''),
('MK', '62', 'Prilep', ''),
('MK', '63', 'Probitip', ''),
('MK', '64', 'Radovi', ''),
('MK', '65', 'Rankovce', ''),
('MK', '66', 'Resen', ''),
('MK', '67', 'Rosoman', ''),
('MK', '68', 'Saraj *', ''),
('MK', '69', 'Sveti Nikole', ''),
('MK', '70', 'Sopite', ''),
('MK', '71', 'Staro Nagoricane', ''),
('MK', '72', 'Struga', ''),
('MK', '73', 'Strumica', ''),
('MK', '74', 'Studenicani', ''),
('MK', '75', 'Tearce', ''),
('MK', '76', 'Tetovo', ''),
('MK', '77', 'Centar *', ''),
('MK', '78', 'Centar upa', ''),
('MK', '79', 'Cair *', ''),
('MK', '80', 'Caka', ''),
('MK', '81', 'Ceinovo-Obleevo', ''),
('MK', '82', 'Cucer Sandevo', ''),
('MK', '83', 'tip', ''),
('MK', '84', 'uto Orizari *', ''),
('ML', '1', 'Kayes', 'Region'),
('ML', '2', 'Koulikoro', 'Region'),
('ML', '3', 'Sikasso', 'Region'),
('ML', '4', 'Ségou', 'Region'),
('ML', '5', 'Mopti', 'Region'),
('ML', '6', 'Tombouctou', 'Region'),
('ML', '7', 'Gao', 'Region'),
('ML', '8', 'Kidal', 'Region'),
('ML', 'BKO', 'Bamako', 'District'),
('MM', '01', 'Sagaing', 'Division'),
('MM', '02', 'Bago', 'Division'),
('MM', '03', 'Magway', 'Division'),
('MM', '04', 'Mandalay', 'Division'),
('MM', '05', 'Tanintharyi', 'Division'),
('MM', '06', 'Yangon', 'Division'),
('MM', '07', 'Ayeyarwady', 'Division'),
('MM', '11', 'Kachin', 'State'),
('MM', '12', 'Kayah', 'State'),
('MM', '13', 'Kayin', 'State'),
('MM', '14', 'Chin', 'State'),
('MM', '15', 'Mon', 'State'),
('MM', '16', 'Rakhine', 'State'),
('MM', '17', 'Shan', 'State'),
('MN', '035', 'Orhon', 'Province'),
('MN', '037', 'Darhan uul', 'Province'),
('MN', '039', 'Hentiy', 'Province'),
('MN', '041', 'Hövagöl', 'Province'),
('MN', '043', 'Hovd', 'Province'),
('MN', '046', 'Uvs', 'Province'),
('MN', '047', 'Töv', 'Province'),
('MN', '049', 'Selenge', 'Province'),
('MN', '051', 'Sühbaatar', 'Province'),
('MN', '053', 'Ömnögovi', 'Province'),
('MN', '055', 'Övörhangay', 'Province'),
('MN', '057', 'Dzavhan', 'Province'),
('MN', '059', 'Dundgovi', 'Province'),
('MN', '061', 'Dornod', 'Province'),
('MN', '063', 'Dornogovi', 'Province'),
('MN', '064', 'Govi-Sumber', 'Province'),
('MN', '065', 'Govi-Altay', 'Province'),
('MN', '067', 'Bulgan', 'Province'),
('MN', '069', 'Bayanhongor', 'Province'),
('MN', '071', 'Bayan-Ölgiy', 'Province'),
('MN', '073', 'Arhangay', 'Province'),
('MN', '1', 'Ulaanbaatar', 'Capital city'),
('MR', '01', 'Hodh ech Chargui', 'Region'),
('MR', '02', 'Hodh el Gharbi', 'Region'),
('MR', '03', 'Assaba', 'Region'),
('MR', '04', 'Gorgol', 'Region'),
('MR', '05', 'Brakna', 'Region'),
('MR', '06', 'Trarza', 'Region'),
('MR', '07', 'Adrar', 'Region'),
('MR', '08', 'Dakhlet Nouadhibou', 'Region'),
('MR', '09', 'Tagant', 'Region'),
('MR', '10', 'Guidimaka', 'Region'),
('MR', '11', 'Tiris Zemmour', 'Region'),
('MR', '12', 'Inchiri', 'Region'),
('MR', 'NKC', 'Nouakchott', 'District'),
('MT', '01', 'Attard', ''),
('MT', '02', 'Balzan', ''),
('MT', '03', 'Birgu', ''),
('MT', '04', 'Birkirkara', ''),
('MT', '05', 'Birzebbuga', ''),
('MT', '06', 'Bormla', ''),
('MT', '07', 'Dingli', ''),
('MT', '08', 'Fgura', ''),
('MT', '09', 'Floriana', ''),
('MT', '10', 'Fontana', ''),
('MT', '11', 'Gudja', ''),
('MT', '12', 'Gzira', ''),
('MT', '13', 'Ghajnsielem', ''),
('MT', '14', 'Gharb', ''),
('MT', '15', 'Gharghur', ''),
('MT', '16', 'Ghasri', ''),
('MT', '17', 'Ghaxaq', ''),
('MT', '18', 'Hamrun', ''),
('MT', '19', 'Iklin', ''),
('MT', '20', 'Isla', ''),
('MT', '21', 'Kalkara', ''),
('MT', '22', 'Kercem', ''),
('MT', '23', 'Kirkop', ''),
('MT', '24', 'Lija', ''),
('MT', '25', 'Luqa', ''),
('MT', '26', 'Marsa', ''),
('MT', '27', 'Marsaskala', ''),
('MT', '28', 'Marsaxlokk', ''),
('MT', '29', 'Mdina', ''),
('MT', '30', 'Mellieha', ''),
('MT', '31', 'Mgarr', ''),
('MT', '32', 'Mosta', ''),
('MT', '33', 'Mqabba', ''),
('MT', '34', 'Msida', ''),
('MT', '35', 'Mtarfa', ''),
('MT', '36', 'Munxar', ''),
('MT', '37', 'Nadur', ''),
('MT', '38', 'Naxxar', ''),
('MT', '39', 'Paola', ''),
('MT', '40', 'Pembroke', ''),
('MT', '41', 'Pietà', ''),
('MT', '42', 'Qala', ''),
('MT', '43', 'Qormi', ''),
('MT', '44', 'Qrendi', ''),
('MT', '45', 'Rabat Gozo', ''),
('MT', '46', 'Rabat Malta', ''),
('MT', '47', 'Safi', ''),
('MT', '48', 'Saint Julian\'s', ''),
('MT', '49', 'Saint John', ''),
('MT', '50', 'Saint Lawrence', ''),
('MT', '51', 'Saint Paul\'s Bay', ''),
('MT', '52', 'Sannat', ''),
('MT', '53', 'Saint Lucia\'s', ''),
('MT', '54', 'Santa Venera', ''),
('MT', '55', 'Siggiewi', ''),
('MT', '56', 'Sliema', ''),
('MT', '57', 'Swieqi', ''),
('MT', '58', 'Ta\' Xbiex', ''),
('MT', '59', 'Tarxien', ''),
('MT', '60', 'Valletta', ''),
('MT', '61', 'Xaghra', ''),
('MT', '62', 'Xewkija', ''),
('MT', '63', 'Xghajra', ''),
('MT', '64', 'Zabbar', ''),
('MT', '65', 'Zebbug Gozo', ''),
('MT', '66', 'Zebbug Malta', ''),
('MT', '67', 'Zejtun', ''),
('MT', '68', 'Zurrieq', ''),
('MU', 'AG', 'Agalega Islands', 'Dependency'),
('MU', 'BL', 'Black River', 'District'),
('MU', 'BR', 'Beau Bassin-Rose Hill', 'City'),
('MU', 'CC', 'Cargados Carajos Shoals [Saint Brandon Islands]', 'Dependency'),
('MU', 'CU', 'Curepipe', 'City'),
('MU', 'FL', 'Flacq', 'District'),
('MU', 'GP', 'Grand Port', 'District'),
('MU', 'MO', 'Moka', 'District'),
('MU', 'PA', 'Pamplemousses', 'District'),
('MU', 'PLx', 'Port Louis', 'City'),
('MU', 'PU', 'Part Louis', 'District'),
('MU', 'PW', 'Plaines wilhems', 'District'),
('MU', 'QB', 'Quatre Bornes', 'City'),
('MU', 'RO', 'Rodrigues Island', 'Dependency'),
('MU', 'RR', 'Rivière du Rempart', 'District'),
('MU', 'SA', 'Savanne', 'District'),
('MU', 'VP', 'Vacoas-Phoenix', 'City'),
('MV', '00', 'Ari Atholhu Dhekunuburi', 'Administrative atoll'),
('MV', '01', 'Seenu', 'Administrative atoll'),
('MV', '02', 'Alif', 'Administrative atoll'),
('MV', '03', 'Lhaviyani', 'Administrative atoll'),
('MV', '04', 'Vaavu', 'Administrative atoll'),
('MV', '05', 'Laamu', 'Administrative atoll'),
('MV', '07', 'Haa Alif', 'Administrative atoll'),
('MV', '08', 'Thaa', 'Administrative atoll'),
('MV', '12', 'Meemu', 'Administrative atoll'),
('MV', '13', 'Raa', 'Administrative atoll'),
('MV', '14', 'Faafu', 'Administrative atoll'),
('MV', '17', 'Dhaalu', 'Administrative atoll'),
('MV', '20', 'Baa', 'Administrative atoll'),
('MV', '23', 'Haa Dhaalu', 'Administrative atoll'),
('MV', '24', 'Shaviyani', 'Administrative atoll'),
('MV', '25', 'Noonu', 'Administrative atoll'),
('MV', '26', 'Kaafu', 'Administrative atoll'),
('MV', '27', 'Gaaf Alif', 'Administrative atoll'),
('MV', '28', 'Gaafu Dhaalu', 'Administrative atoll'),
('MV', '29', 'Gnaviyani', 'Administrative atoll'),
('MV', 'CE', 'Medhu', 'Province'),
('MV', 'LE', 'Neno', 'District'),
('MV', 'MLE', 'Male', 'Capital'),
('MV', 'NC', 'Medhu-Uthuru', 'Province'),
('MV', 'NO', 'Uthuru', 'Province'),
('MV', 'SC', 'Medhu-Dhekunu', 'Province'),
('MV', 'SU', 'Dhekunu', 'Province'),
('MV', 'UN', 'Mathi-Uthuru', 'Province'),
('MV', 'US', 'Mathi-Dhekunu', 'Province'),
('MW', 'BA', 'Balaka', 'District'),
('MW', 'BL', 'Blantyre', 'District'),
('MW', 'C', 'Central', 'Region'),
('MW', 'CK', 'Chikwawa', 'District'),
('MW', 'CR', 'Chiradzulu', 'District'),
('MW', 'CT', 'Chitipa', 'District'),
('MW', 'DE', 'Dedza', 'District'),
('MW', 'DO', 'Dowa', 'District'),
('MW', 'KR', 'Karonga', 'District'),
('MW', 'KS', 'Kasungu', 'District'),
('MW', 'LI', 'Lilongwe', 'District'),
('MW', 'LK', 'Likoma Island', 'District'),
('MW', 'MC', 'Mchinji', 'District'),
('MW', 'MG', 'Mangochi', 'District'),
('MW', 'MH', 'Machinga', 'District'),
('MW', 'MU', 'Mulanje', 'District'),
('MW', 'MW', 'Mwanza', 'District'),
('MW', 'MZ', 'Mzimba', 'District'),
('MW', 'N', 'Northern', 'Region'),
('MW', 'NB', 'Nkhata Bay', 'District'),
('MW', 'NI', 'Ntchisi', 'District'),
('MW', 'NK', 'Nkhotakota', 'District'),
('MW', 'NS', 'Nsanje', 'District'),
('MW', 'NU', 'Ntcheu', 'District'),
('MW', 'PH', 'Phalombe', 'District'),
('MW', 'RU', 'Rumphi', 'District'),
('MW', 'S', 'Southern', 'Region'),
('MW', 'SA', 'Salima', 'District'),
('MW', 'TH', 'Thyolo', 'District'),
('MW', 'ZO', 'Zomba', 'District'),
('MX', 'AGU', 'Aguascalientes', 'State'),
('MX', 'BCN', 'Baja California', 'State'),
('MX', 'BCS', 'Baja California Sur', 'State'),
('MX', 'CAM', 'Campeche', 'State'),
('MX', 'CHH', 'Chihuahua', 'State'),
('MX', 'CHP', 'Chiapas', 'State'),
('MX', 'COA', 'Coahuila', 'State'),
('MX', 'COL', 'Colima', 'State'),
('MX', 'DIF', 'Distrito Federal', 'Federal District'),
('MX', 'DUR', 'Durango', 'State'),
('MX', 'GRO', 'Guerrero', 'State'),
('MX', 'GUA', 'Guanajuato', 'State'),
('MX', 'HID', 'Hidalgo', 'State'),
('MX', 'JAL', 'Jalisco', 'State'),
('MX', 'MEX', 'México', 'State'),
('MX', 'MIC', 'Michoacán', 'State'),
('MX', 'MOR', 'Morelos', 'State'),
('MX', 'NAY', 'Nayarit', 'State'),
('MX', 'NLE', 'Nuevo León', 'State'),
('MX', 'OAX', 'Oaxaca', 'State'),
('MX', 'PUE', 'Puebla', 'State'),
('MX', 'QUE', 'Querétaro', 'State'),
('MX', 'ROO', 'Quintana Roo', 'State'),
('MX', 'SIN', 'Sinaloa', 'State'),
('MX', 'SLP', 'San Luis Potosí', 'State'),
('MX', 'SON', 'Sonora', 'State'),
('MX', 'TAB', 'Tabasco', 'State'),
('MX', 'TAM', 'Tamaulipas', 'State'),
('MX', 'TLA', 'Tlaxcala', 'State'),
('MX', 'VER', 'Veracruz', 'State'),
('MX', 'YUC', 'Yucatán', 'State'),
('MX', 'ZAC', 'Zacatecas', 'State'),
('MY', '01', 'Johor', 'State'),
('MY', '02', 'Kedah', 'State'),
('MY', '03', 'Kelantan', 'State'),
('MY', '04', 'Melaka', 'State'),
('MY', '05', 'Negeri Sembilan', 'State'),
('MY', '06', 'Pahang', 'State'),
('MY', '07', 'Pulau Pinang', 'State'),
('MY', '08', 'Perak', 'State'),
('MY', '09', 'Perlis', 'State'),
('MY', '10', 'Selangor', 'State'),
('MY', '11', 'Terengganu', 'State'),
('MY', '12', 'Sabah', 'State'),
('MY', '13', 'Sarawak', 'State'),
('MY', '14', 'Wilayah Persekutuan Kuala Lumpur', 'Federal territory'),
('MY', '15', 'Wilayah Persekutuan Labuan', 'Federal territory'),
('MY', '16', 'Wilayah Persekutuan Putrajaya', 'Federal territory'),
('MZ', 'A', 'Niaosa', 'Province'),
('MZ', 'B', 'Manica', 'Province'),
('MZ', 'G', 'Gaza', 'Province'),
('MZ', 'I', 'Inhambane', 'Province'),
('MZ', 'L', 'Maputo', 'Province'),
('MZ', 'MPM', 'Maputo', 'City'),
('MZ', 'N', 'Nampula', 'Province'),
('MZ', 'P', 'Cabo Delgado', 'Province'),
('MZ', 'Q', 'Zambézia', 'Province'),
('MZ', 'S', 'Sofala', 'Province'),
('MZ', 'T', 'Tete', 'Province'),
('NA', 'CA', 'Caprivi', 'Region'),
('NA', 'ER', 'Erongo', 'Region'),
('NA', 'HA', 'Hardap', 'Region'),
('NA', 'KA', 'Karas', 'Region'),
('NA', 'KH', 'Khomas', 'Region'),
('NA', 'KU', 'Kunene', 'Region'),
('NA', 'OD', 'Otjozondjupa', 'Region'),
('NA', 'OH', 'Omaheke', 'Region'),
('NA', 'OK', 'Okavango', 'Region'),
('NA', 'ON', 'Oshana', 'Region'),
('NA', 'OS', 'Omusati', 'Region'),
('NA', 'OT', 'Oshikoto', 'Region'),
('NA', 'OW', 'Ohangwena', 'Region'),
('NE', '1', 'Agadez', 'Department'),
('NE', '2', 'Diffa', 'Department'),
('NE', '3', 'Dosso', 'Department'),
('NE', '4', 'Maradi', 'Department'),
('NE', '5', 'Tahoua', 'Department'),
('NE', '6', 'Tillabéri', 'Department'),
('NE', '7', 'Zinder', 'Department'),
('NE', '8', 'Niamey', 'Urban community'),
('NG', 'AB', 'Abia', 'State'),
('NG', 'AD', 'Adamawa', 'State'),
('NG', 'AK', 'Akwa Ibom', 'State'),
('NG', 'AN', 'Anambra', 'State'),
('NG', 'BA', 'Bauchi', 'State'),
('NG', 'BB', 'Bbonyi', 'State'),
('NG', 'BE', 'Benue', 'State'),
('NG', 'BK', 'Bkiti', 'State'),
('NG', 'BO', 'Borno', 'State'),
('NG', 'BY', 'Bayelsa', 'State'),
('NG', 'CR', 'Cross River', 'State'),
('NG', 'DE', 'Delta', 'State'),
('NG', 'ED', 'Edo', 'State'),
('NG', 'EN', 'Enugu', 'State'),
('NG', 'FC', 'Abuja Capital Territory', 'Capital territory'),
('NG', 'GO', 'Gombe', 'State'),
('NG', 'IM', 'Imo', 'State'),
('NG', 'JI', 'Jigawa', 'State'),
('NG', 'KD', 'Kaduna', 'State'),
('NG', 'KE', 'Kebbi', 'State'),
('NG', 'KN', 'Kano', 'State'),
('NG', 'KO', 'Kogi', 'State'),
('NG', 'KT', 'Katsina', 'State'),
('NG', 'KW', 'Kwara', 'State'),
('NG', 'LA', 'Lagos', 'State'),
('NG', 'NA', 'Nassarawa', 'State'),
('NG', 'NI', 'Niger', 'State'),
('NG', 'OG', 'Ogun', 'State'),
('NG', 'ON', 'Ondo', 'State'),
('NG', 'OS', 'Osun', 'State'),
('NG', 'OY', 'Oyo', 'State'),
('NG', 'PL', 'Plateau', 'State'),
('NG', 'RI', 'Rivers', 'State'),
('NG', 'SO', 'Sokoto', 'State'),
('NG', 'TA', 'Taraba', 'State'),
('NG', 'YO', 'Yobe', 'State'),
('NG', 'ZA', 'Zamfara', 'State'),
('NI', 'AN', 'Atlántico Norte', 'Autonomous region'),
('NI', 'AS', 'Atlántico Sur', 'Autonomous region'),
('NI', 'BO', 'Boaco', 'Department'),
('NI', 'CA', 'Carazo', 'Department'),
('NI', 'CI', 'Chinandega', 'Department'),
('NI', 'CO', 'Chontales', 'Department'),
('NI', 'ES', 'Estelí', 'Department'),
('NI', 'GR', 'Granada', 'Department'),
('NI', 'JI', 'Jinotega', 'Department'),
('NI', 'LE', 'León', 'Department'),
('NI', 'MD', 'Madriz', 'Department'),
('NI', 'MN', 'Managua', 'Department'),
('NI', 'MS', 'Masaya', 'Department'),
('NI', 'MT', 'Matagalpa', 'Department'),
('NI', 'NS', 'Nueva Segovia', 'Department'),
('NI', 'RI', 'Rivas', 'Department'),
('NI', 'SJ', 'Río San Juan', 'Department'),
('NL', 'DR', 'Drenthe', 'Province'),
('NL', 'FL', 'Flevoland', 'Province'),
('NL', 'FR', 'Friesland', 'Province'),
('NL', 'GE', 'Gelderland', 'Province'),
('NL', 'GR', 'Groningen', 'Province'),
('NL', 'LI', 'Limburg', 'Province'),
('NL', 'NB', 'Noord-Brabant', 'Province'),
('NL', 'NH', 'Noord-Holland', 'Province'),
('NL', 'OV', 'Overijssel', 'Province'),
('NL', 'UT', 'Utrecht', 'Province'),
('NL', 'ZE', 'Zeeland', 'Province'),
('NL', 'ZH', 'Zuid-Holland', 'Province'),
('NO', '01', 'Østfold', 'County'),
('NO', '02', 'Akershus', 'County'),
('NO', '03', 'Oslo', 'County'),
('NO', '04', 'Hedmark', 'County'),
('NO', '05', 'Oppland', 'County'),
('NO', '06', 'Buskerud', 'County'),
('NO', '07', 'Vestfold', 'County'),
('NO', '08', 'Telemark', 'County'),
('NO', '09', 'Aust-Agder', 'County'),
('NO', '10', 'Vest-Agder', 'County'),
('NO', '11', 'Rogaland', 'County'),
('NO', '12', 'Hordaland', 'County'),
('NO', '14', 'Sogn og Fjordane', 'County'),
('NO', '15', 'Møre og Romsdal', 'County'),
('NO', '16', 'Sør-Trøndelag', 'County'),
('NO', '17', 'Nord-Trøndelag', 'County'),
('NO', '18', 'Nordland', 'County'),
('NO', '19', 'Troms', 'County'),
('NO', '20', 'Finnmark', 'County'),
('NO', '21', 'Svalbard (Arctic Region) (See also country code SJ)', 'Arctic region'),
('NO', '22', 'Jan Mayen (Arctic Region) (See also country code SJ)', 'Arctic region'),
('NP', 'BA', 'Bagmati', 'Zone'),
('NP', 'BH', 'Bheri', 'Zone'),
('NP', 'DH', 'Dhawalagiri', 'Zone'),
('NP', 'GA', 'Gandaki', 'Zone'),
('NP', 'JA', 'Janakpur', 'Zone'),
('NP', 'KA', 'Karnali', 'Zone'),
('NP', 'KO', 'Kosi [Koshi]', 'Zone'),
('NP', 'LU', 'Lumbini', 'Zone'),
('NP', 'MA', 'Mahakali', 'Zone'),
('NP', 'ME', 'Mechi', 'Zone'),
('NP', 'NA', 'Narayani', 'Zone'),
('NP', 'RA', 'Rapti', 'Zone'),
('NP', 'SA', 'Sagarmatha', 'Zone'),
('NP', 'SE', 'Seti', 'Zone'),
('NR', '01', 'Aiwo', ''),
('NR', '02', 'Anabar', ''),
('NR', '03', 'Anetan', ''),
('NR', '04', 'Anibare', ''),
('NR', '05', 'Baiti', ''),
('NR', '06', 'Boe', ''),
('NR', '07', 'Buada', ''),
('NR', '08', 'Denigomodu', ''),
('NR', '09', 'Ewa', ''),
('NR', '10', 'Ijuw', ''),
('NR', '11', 'Meneng', ''),
('NR', '12', 'Nibok', ''),
('NR', '13', 'Uaboe', ''),
('NR', '14', 'Yaren', ''),
('NZ', 'AUK', 'Auckland', 'Region'),
('NZ', 'BOP', 'Bay of Plenty', 'Region'),
('NZ', 'CAN', 'Canterbury', 'Region'),
('NZ', 'CIT', 'Chatham Islands Territory', 'Special Island Authorithy'),
('NZ', 'GIS', 'Gisborne District', 'Unitary Authority'),
('NZ', 'HKB', 'Hawkes\'s Bay', 'Region'),
('NZ', 'MBH', 'Marlborough District', 'Unitary Authority'),
('NZ', 'MWT', 'Manawatu-Wanganui', 'Region'),
('NZ', 'NSN', 'Nelson City', 'Unitary Authority'),
('NZ', 'NTL', 'Northland', 'Region'),
('NZ', 'OTA', 'Otago', 'Region'),
('NZ', 'STL', 'Southland', 'Region'),
('NZ', 'TAS', 'Tasman District', 'Unitary Authority'),
('NZ', 'TKI', 'Taranaki', 'Region'),
('NZ', 'WGN', 'Wellington', 'Region'),
('NZ', 'WKO', 'Waikato', 'Region'),
('NZ', 'WTC', 'West Coast', 'Region'),
('OM', 'BA', 'Al Batinah', 'Region'),
('OM', 'BU', 'Al Buraymi', 'governorate'),
('OM', 'DA', 'Ad Dakhiliyah', 'Region'),
('OM', 'MA', 'Masqat', 'governorate'),
('OM', 'MU', 'Musandam', 'governorate'),
('OM', 'SH', 'Ash Sharqiyah', 'Region'),
('OM', 'WU', 'AI Wusta', 'Region'),
('OM', 'ZA', 'Az Zahirah', 'Region'),
('OM', 'ZU', 'Z¸ufar', 'governorate'),
('PA', '1', 'Bocas del Toro', 'Province'),
('PA', '2', 'Coclé', 'Province'),
('PA', '3', 'Colón', 'Province'),
('PA', '4', 'Chiriquí', 'Province'),
('PA', '5', 'Darién', 'Province'),
('PA', '6', 'Herrera', 'Province'),
('PA', '7', 'Los Santos', 'Province'),
('PA', '8', 'Panamá', 'Province'),
('PA', '9', 'Veraguas', 'Province'),
('PA', 'EM', 'Emberá', 'indigenous region'),
('PA', 'KY', 'Kuna Yala', 'indigenous region'),
('PA', 'NB', 'Ngöbe-Buglé', 'indigenous region'),
('PE', 'AMA', 'Amazonas', 'Department'),
('PE', 'ANC', 'Ancash', 'Department'),
('PE', 'APU', 'Apurímac', 'Department'),
('PE', 'ARE', 'Arequipa', 'Department'),
('PE', 'AYA', 'Ayacucho', 'Department'),
('PE', 'CAJ', 'Cajamarca', 'Department'),
('PE', 'CAL', 'El Callao', 'Constitutiona Provincel'),
('PE', 'CUS', 'Cuzco [Cusco]', 'Department'),
('PE', 'HUC', 'Huánuco', 'Department'),
('PE', 'HUV', 'Huancavelica', 'Department'),
('PE', 'ICA', 'Ica', 'Department'),
('PE', 'JUN', 'Junín', 'Department'),
('PE', 'LAL', 'La Libertad', 'Department'),
('PE', 'LAM', 'Lambayeque', 'Department'),
('PE', 'LIM', 'Lima', 'Department'),
('PE', 'LOR', 'Loreto', 'Department'),
('PE', 'MDD', 'Madre de Dios', 'Department'),
('PE', 'MOQ', 'Moquegua', 'Department'),
('PE', 'PAS', 'Pasco', 'Department'),
('PE', 'PIU', 'Piura', 'Department'),
('PE', 'PUN', 'Puno', 'Department'),
('PE', 'SAM', 'San Martín', 'Department'),
('PE', 'TAC', 'Tacna', 'Department'),
('PE', 'TUM', 'Tumbes', 'Department'),
('PE', 'UCA', 'Ucayali', 'Department'),
('PG', 'CPK', 'Chimbu', 'Province'),
('PG', 'CPM', 'Central', 'Province'),
('PG', 'EBR', 'East New Britain', 'Province'),
('PG', 'EHG', 'Eastern Highlands', 'Province'),
('PG', 'EPW', 'Enga', 'Province'),
('PG', 'ESW', 'East Sepik', 'Province'),
('PG', 'GPK', 'Gulf', 'Province'),
('PG', 'MBA', 'Milne Bay', 'Province'),
('PG', 'MPL', 'Morobe', 'Province'),
('PG', 'MPM', 'Madang', 'Province'),
('PG', 'MRL', 'Manus', 'Province'),
('PG', 'NCD', 'National Capital District (Port Moresby)', 'District'),
('PG', 'NIK', 'New Ireland', 'Province'),
('PG', 'NPP', 'Northern', 'Province'),
('PG', 'NSB', 'Bougainville', 'autonomous region'),
('PG', 'SAN', 'Sandaun (West Sepik)', 'Province'),
('PG', 'SHM', 'Southern Highlands', 'Province'),
('PG', 'WBK', 'West New Britain', 'Province'),
('PG', 'WHM', 'Western Highlands', 'Province'),
('PG', 'WPD', 'Western', 'Province'),
('PH', 'ABR', 'Abra', 'Province'),
('PH', 'AGN', 'Agusan del Norte', 'Province'),
('PH', 'AGS', 'Agusan del Sur', 'Province'),
('PH', 'AKL', 'Aklan', 'Province'),
('PH', 'ALB', 'Albay', 'Province'),
('PH', 'ANT', 'Antique', 'Province'),
('PH', 'APA', 'Apayao', 'Province'),
('PH', 'AUR', 'Aurora', 'Province'),
('PH', 'BAN', 'Bataan', 'Province'),
('PH', 'BAS', 'Basilan', 'Province'),
('PH', 'BEN', 'Benguet', 'Province'),
('PH', 'BIL', 'Biliran', 'Province'),
('PH', 'BOH', 'Bohol', 'Province'),
('PH', 'BTG', 'Batangas', 'Province'),
('PH', 'BTN', 'Batanes', 'Province'),
('PH', 'BUK', 'Bukidnon', 'Province'),
('PH', 'BUL', 'Bulacan', 'Province'),
('PH', 'CAG', 'Cagayan', 'Province'),
('PH', 'CAM', 'Camiguin', 'Province'),
('PH', 'CAN', 'Camarines Norte', 'Province'),
('PH', 'CAP', 'Capiz', 'Province'),
('PH', 'CAS', 'Camarines Sur', 'Province'),
('PH', 'CAT', 'Catanduanes', 'Province'),
('PH', 'CAV', 'Cavite', 'Province'),
('PH', 'CEB', 'Cebu', 'Province'),
('PH', 'COM', 'Compostela Valley', 'Province'),
('PH', 'DAO', 'Davao Oriental', 'Province'),
('PH', 'DAS', 'Davao del Sur', 'Province'),
('PH', 'DAV', 'Davao', 'Province'),
('PH', 'DIN', 'Dinagat Islands', 'Province'),
('PH', 'EAS', 'Eastern Samar', 'Province'),
('PH', 'GUI', 'Guimaras', 'Province'),
('PH', 'IFU', 'Ifugao', 'Province'),
('PH', 'ILI', 'Iloilo', 'Province'),
('PH', 'ILN', 'Ilocos Norte', 'Province'),
('PH', 'ILS', 'Ilocoq Sur', 'Province'),
('PH', 'ISA', 'Isabela', 'Province'),
('PH', 'KAL', 'Kalinga-Apayao', 'Province'),
('PH', 'LAG', 'Laguna', 'Province'),
('PH', 'LAN', 'Lanao del Norte', 'Province'),
('PH', 'LAS', 'Lanao del Sur', 'Province'),
('PH', 'LEY', 'Leyte', 'Province'),
('PH', 'LUN', 'La Union', 'Province'),
('PH', 'MAG', 'Maguindanao', 'Province'),
('PH', 'MAS', 'Masbate', 'Province'),
('PH', 'MDC', 'Mindoro Occidental', 'Province'),
('PH', 'MDR', 'Mindoro Oriental', 'Province'),
('PH', 'MOU', 'Mountain Province', 'Province'),
('PH', 'MSC', 'Misamis Occidental', 'Province'),
('PH', 'MSR', 'Misamis Oriental', 'Province'),
('PH', 'NCO', 'North Cotabato', 'Province'),
('PH', 'NEC', 'Negros occidental', 'Province'),
('PH', 'NER', 'Negros oriental', 'Province'),
('PH', 'NSA', 'Northern Samar', 'Province'),
('PH', 'NUE', 'Nueva Ecija', 'Province'),
('PH', 'NUV', 'Nueva Vizcaya', 'Province'),
('PH', 'PAM', 'Pampanga', 'Province'),
('PH', 'PAN', 'Pangasinan', 'Province'),
('PH', 'PLW', 'Palawan', 'Province'),
('PH', 'QUE', 'Quezon', 'Province'),
('PH', 'QUI', 'Quirino', 'Province'),
('PH', 'RIZ', 'Rizal', 'Province'),
('PH', 'ROM', 'Romblon', 'Province'),
('PH', 'SAR', 'Sarangani', 'Province'),
('PH', 'SCO', 'South Cotabato', 'Province'),
('PH', 'SIG', 'Siquijor', 'Province'),
('PH', 'SLE', 'Southern Leyte', 'Province'),
('PH', 'SLU', 'Sulu', 'Province'),
('PH', 'SOR', 'Sorsogon', 'Province'),
('PH', 'SUK', 'Sultan Kudarat', 'Province'),
('PH', 'SUN', 'Surigao del Norte', 'Province'),
('PH', 'SUR', 'Surigao del Sur', 'Province'),
('PH', 'TAR', 'Tarlac', 'Province'),
('PH', 'TAW', 'Tawi-Tawi', 'Province'),
('PH', 'WSA', 'Western Samar', 'Province'),
('PH', 'ZAN', 'Zamboanga del Norte', 'Province'),
('PH', 'ZAS', 'Zamboanga del Sur', 'Province'),
('PH', 'ZMB', 'Zambales', 'Province'),
('PH', 'ZSI', 'Zamboanga Sibuguey [Zamboanga Sibugay]', 'Province'),
('PK', 'BA', 'Baluchistan', 'Province'),
('PK', 'GB', 'Gilgit-Baltistan', 'Pakistan administrered area'),
('PK', 'IS', 'Islamabad', 'Federal capital territory'),
('PK', 'JK', 'Azad Kashmir', 'Pakistan administrered area'),
('PK', 'KP', 'Khyber Pakhtunkhwa', 'Province'),
('PK', 'PB', 'Punjab', 'Province'),
('PK', 'SD', 'Sind', 'Province'),
('PK', 'TA', 'Federally Administered Tribal Areas', 'Territory'),
('PL', 'DS', 'Dolnoslaskie', 'Province'),
('PL', 'KP', 'Kujawsko-pomorskie', 'Province'),
('PL', 'LB', 'Lubuskie', 'Province'),
('PL', 'LD', 'Lódzkie', 'Province'),
('PL', 'LU', 'Lubelskie', 'Province'),
('PL', 'MA', 'Malopolskie', 'Province'),
('PL', 'MZ', 'Mazowieckie', 'Province'),
('PL', 'OP', 'Opolskie', 'Province'),
('PL', 'PD', 'Podlaskie', 'Province'),
('PL', 'PK', 'Podkarpackie', 'Province'),
('PL', 'PM', 'Pomorskie', 'Province'),
('PL', 'SK', 'Swietokrzyskie', 'Province'),
('PL', 'SL', 'Slaskie', 'Province'),
('PL', 'WN', 'Warminsko-mazurskie', 'Province'),
('PL', 'WP', 'Wielkopolskie', 'Province'),
('PL', 'ZP', 'Zachodniopomorskie', 'Province'),
('PT', '01', 'Aveiro', 'District'),
('PT', '02', 'Beja', 'District'),
('PT', '03', 'Braga', 'District'),
('PT', '04', 'Bragança', 'District'),
('PT', '05', 'Castelo Branco', 'District'),
('PT', '06', 'Coimbra', 'District'),
('PT', '07', 'Évora', 'District'),
('PT', '08', 'Faro', 'District'),
('PT', '09', 'Guarda', 'District'),
('PT', '10', 'Leiria', 'District'),
('PT', '11', 'Lisboa', 'District'),
('PT', '12', 'Portalegre', 'District'),
('PT', '13', 'Porto', 'District'),
('PT', '14', 'Santarém', 'District'),
('PT', '15', 'Setúbal', 'District'),
('PT', '16', 'Viana do Castelo', 'District'),
('PT', '17', 'Vila Real', 'District'),
('PT', '18', 'Viseu', 'District'),
('PT', '20', 'Região Autónoma dos Açores', 'Autonomous region'),
('PT', '30', 'Região Autónoma da Madeira', 'Autonomous region'),
('PW', '002', 'Aimeliik', ''),
('PW', '004', 'Airai', ''),
('PW', '010', 'Angaur', ''),
('PW', '050', 'Hatobohei', ''),
('PW', '100', 'Kayangel', ''),
('PW', '150', 'Koror', ''),
('PW', '212', 'Melekeok', ''),
('PW', '214', 'Ngaraard', ''),
('PW', '218', 'Ngarchelong', ''),
('PW', '222', 'Ngardmau', ''),
('PW', '224', 'Ngatpang', ''),
('PW', '226', 'Ngchesar', ''),
('PW', '227', 'Ngeremlengui', ''),
('PW', '228', 'Ngiwal', ''),
('PW', '350', 'Peleliu', ''),
('PW', '370', 'Sonsorol', ''),
('PY', '1', 'Concepción', 'Department'),
('PY', '10', 'Alto Paraná', 'Department'),
('PY', '11', 'Central', 'Department'),
('PY', '12', 'Ñeembucú', 'Department'),
('PY', '13', 'Amambay', 'Department'),
('PY', '14', 'Canindeyú', 'Department'),
('PY', '15', 'Presidente Hayes', 'Department'),
('PY', '16', 'Alto Paraguay', 'Department'),
('PY', '19', 'Boquerón', 'Department'),
('PY', '2', 'San Pedro', 'Department'),
('PY', '3', 'Cordillera', 'Department'),
('PY', '4', 'Guairá', 'Department'),
('PY', '5', 'Caaguazú', 'Department'),
('PY', '6', 'Caazapá', 'Department'),
('PY', '7', 'Itapúa', 'Department'),
('PY', '8', 'Misiones', 'Department'),
('PY', '9', 'Paraguarí', 'Department'),
('PY', 'ASU', 'Asunción', 'Capital'),
('QA', 'DA', 'Ad Dawhah', 'Municipality'),
('QA', 'KH', 'Al Khawr', 'Municipality'),
('QA', 'MS', 'Madinat ash Shamal', 'Municipality'),
('QA', 'RA', 'Ar Rayyan', 'Municipality'),
('QA', 'US', 'Umm Salal', 'Municipality'),
('QA', 'WA', 'Al Wakrah', 'Municipality'),
('QA', 'ZA', 'Az¸ Z¸aayin', 'Municipality'),
('RO', 'AB', 'Alba', 'Departments'),
('RO', 'AG', 'Arges', 'Departments'),
('RO', 'AR', 'Arad', 'Departments'),
('RO', 'B', 'Bucuresti', 'Municipality'),
('RO', 'BC', 'Bacau', 'Departments'),
('RO', 'BH', 'Bihor', 'Departments'),
('RO', 'BN', 'Bistrita-Nasaud', 'Departments'),
('RO', 'BR', 'Braila', 'Departments'),
('RO', 'BT', 'Botosani', 'Departments'),
('RO', 'BV', 'Brasov', 'Departments'),
('RO', 'BZ', 'Buzau', 'Departments'),
('RO', 'CJ', 'Cluj', 'Departments'),
('RO', 'CL', 'Calarasi', 'Departments'),
('RO', 'CS', 'Caras-Severin', 'Departments'),
('RO', 'CT', 'Constarta', 'Departments'),
('RO', 'CV', 'Covasna', 'Departments'),
('RO', 'DB', 'Dâmbovita', 'Departments'),
('RO', 'DJ', 'Dolj', 'Departments'),
('RO', 'GJ', 'Gorj', 'Departments'),
('RO', 'GL', 'Galati', 'Departments'),
('RO', 'GR', 'Giurgiu', 'Departments'),
('RO', 'HD', 'Hunedoara', 'Departments'),
('RO', 'HR', 'Harghita', 'Departments'),
('RO', 'IF', 'Ilfov', 'Departments'),
('RO', 'IL', 'Ialomita', 'Departments'),
('RO', 'IS', 'Iasi', 'Departments'),
('RO', 'MH', 'Mehedinti', 'Departments'),
('RO', 'MM', 'Maramures', 'Departments'),
('RO', 'MS', 'Mures', 'Departments'),
('RO', 'NT', 'Neamt', 'Departments'),
('RO', 'OT', 'Olt', 'Departments'),
('RO', 'PH', 'Prahova', 'Departments'),
('RO', 'SB', 'Sibiu', 'Departments'),
('RO', 'SJ', 'Salaj', 'Departments'),
('RO', 'SM', 'Satu Mare', 'Departments'),
('RO', 'SV', 'Suceava', 'Departments'),
('RO', 'TL', 'Tulcea', 'Departments'),
('RO', 'TM', 'Timis', 'Departments'),
('RO', 'TR', 'Teleorman', 'Departments'),
('RO', 'VL', 'Vâlcea', 'Departments'),
('RO', 'VN', 'Vrancea', 'Departments'),
('RO', 'VS', 'Vaslui', 'Departments'),
('RS', '00', 'Beograd', 'City'),
('RS', '01', 'Severna Backa', 'District'),
('RS', '02', 'Srednji Banat', 'District'),
('RS', '03', 'Severni Banat', 'District'),
('RS', '04', 'Juni Banat', 'District'),
('RS', '05', 'Zapadna Backa', 'District'),
('RS', '06', 'Juna Backa', 'District'),
('RS', '07', 'Srem', 'District'),
('RS', '08', 'Macva', 'District'),
('RS', '09', 'Kolubara', 'District'),
('RS', '10', 'Podunavlje', 'District'),
('RS', '11', 'Branicevo', 'District'),
('RS', '12', 'umadija', 'District'),
('RS', '13', 'Pomoravlje', 'District'),
('RS', '14', 'Bor', 'District'),
('RS', '15', 'Zajecar', 'District'),
('RS', '16', 'Zlatibor', 'District'),
('RS', '17', 'Moravica', 'District'),
('RS', '18', 'Raka', 'District'),
('RS', '19', 'Rasina', 'District'),
('RS', '20', 'Niava', 'District'),
('RS', '21', 'Toplica', 'District'),
('RS', '22', 'Pirot', 'District'),
('RS', '23', 'Jablanica', 'District'),
('RS', '24', 'Pcinja', 'District'),
('RS', '25', 'Kosovo', 'District'),
('RS', '26', 'Pec´', 'District'),
('RS', '27', 'Prizren', 'District'),
('RS', '28', 'Kosovska Mitrovica', 'District'),
('RS', '29', 'Kosovo-Pomoravlje', 'District'),
('RS', 'KM', 'Kosovo-Metohija', 'Autonomous province'),
('RS', 'VO', 'Vojvodina', 'Autonomous province'),
('RU', 'AD', 'Adygeya, Respublika', 'Republic'),
('RU', 'AL', 'Altay, Respublika', 'Republic'),
('RU', 'ALT', 'Altayskiy kray', 'Administrative territory'),
('RU', 'AMU', 'Amurskaya oblast\'', 'Administrative region'),
('RU', 'ARK', 'Arkhangel\'skaya oblast,', 'Administrative region'),
('RU', 'AST', 'Astrakhanskaya oblast\'', 'Administrative region'),
('RU', 'BA', 'Bashkortostan, Respublika', 'Republic'),
('RU', 'BEL', 'Belgorodskaya oblast\'', 'Administrative region'),
('RU', 'BRY', 'Bryanskaya oblast\'', 'Administrative region'),
('RU', 'BU', 'Buryatiya, Respublika', 'Republic'),
('RU', 'CE', 'Chechenskaya Respublika', 'Republic'),
('RU', 'CHE', 'Chelyabinskaya oblast\'', 'Administrative region'),
('RU', 'CHU', 'Chukotskiy avtonomnyy okrug', 'Autonomous district'),
('RU', 'CU', 'Chuvashskaya Respublika', 'Republic'),
('RU', 'DA', 'Dagestan, Respublika', 'Republic'),
('RU', 'IN', 'Ingushskaya Respublika [Respublika Ingushetiya]', 'Republic'),
('RU', 'IRK', 'Irkutskaya oblast\'', 'Administrative region'),
('RU', 'IVA', 'Ivanovskaya oblast\'', 'Administrative region'),
('RU', 'KAM', 'Kamchatskaya oblast\'', 'Administrative region'),
('RU', 'KB', 'Kabardino-Balkarskaya Respublika', 'Republic'),
('RU', 'KC', 'Karachayevo-Cherkesskaya Respublika', 'Republic'),
('RU', 'KDA', 'Krasnodarskiy kray', 'Administrative territory'),
('RU', 'KEM', 'Kemerovskaya oblast\'', 'Administrative region'),
('RU', 'KGD', 'Kaliningradskaya oblast,', 'Administrative region'),
('RU', 'KGN', 'Kurganskaya oblast\'', 'Administrative region'),
('RU', 'KHA', 'Khabarovskiy kray', 'Administrative territory'),
('RU', 'KHM', 'Khanty-Mansiyskiy avtonomnyy okrug', 'Autonomous district'),
('RU', 'KIR', 'Kirovskaya oblast\'', 'Administrative region'),
('RU', 'KK', 'Khakasiya, Respublika', 'Republic'),
('RU', 'KL', 'Kalmykiya, Respublika', 'Republic'),
('RU', 'KLU', 'Kaluzhskaya oblast\'', 'Administrative region'),
('RU', 'KO', 'Komi, Respublika', 'Republic'),
('RU', 'KOS', 'Kostromskaya oblast\'', 'Administrative region'),
('RU', 'KR', 'Kareliya, Respublika', 'Republic'),
('RU', 'KRS', 'Kurskaya oblast\'', 'Administrative region'),
('RU', 'KYA', 'Krasnoyarskiy kray', 'Administrative territory'),
('RU', 'LEN', 'Leningradskaya oblast\'', 'Administrative region'),
('RU', 'LIP', 'Lipetskaya oblast\'', 'Administrative region'),
('RU', 'MAG', 'Magadanskaya oblast\'', 'Administrative region'),
('RU', 'ME', 'Mariy El, Respublika', 'Republic'),
('RU', 'MO', 'Mordoviya, Respublika', 'Republic'),
('RU', 'MOS', 'Moskovskaya oblast\'', 'Administrative region'),
('RU', 'MOW', 'Moskva', 'Autonomous city'),
('RU', 'MUR', 'Murmanskaya oblast\'', 'Administrative region'),
('RU', 'NEN', 'Nenetskiy avtonomnyy okrug', 'Autonomous district'),
('RU', 'NGR', 'Novgorodskaya oblast\'', 'Administrative region'),
('RU', 'NIZ', 'Nizhegorodskaya oblast\'', 'Administrative region'),
('RU', 'NVS', 'Novosibirskaya oblast\'', 'Administrative region'),
('RU', 'OMS', 'Omskaya oblast\'', 'Administrative region'),
('RU', 'ORE', 'Orenburgskaya oblast\'', 'Administrative region'),
('RU', 'ORL', 'Orlovskaya oblast\'', 'Administrative region'),
('RU', 'PER', 'Perm', 'Administrative territory'),
('RU', 'PNZ', 'Penzenskaya oblast\'', 'Administrative region'),
('RU', 'PRI', 'Primorskiy kray', 'Administrative territory'),
('RU', 'PSK', 'Pskovskaya oblast\'', 'Administrative region'),
('RU', 'ROS', 'Rostovskaya oblast\'', 'Administrative region'),
('RU', 'RYA', 'Ryazanskaya oblast\'', 'Administrative region'),
('RU', 'SA', 'Sakha, Respublika [Yakutiya]', 'Republic'),
('RU', 'SAK', 'Sakhalinskaya oblast\'', 'Administrative region'),
('RU', 'SAM', 'Samarskaya oblast\'', 'Administrative region'),
('RU', 'SAR', 'Saratovskaya oblast\'', 'Administrative region'),
('RU', 'SE', 'Severnaya Osetiya, Respublika Alaniya] [Respublika Severnaya Osetiya-Alaniya]', 'Republic'),
('RU', 'SMO', 'Smolenskaya oblast\'', 'Administrative region'),
('RU', 'SPE', 'Sankt-Peterburg', 'Autonomous city'),
('RU', 'STA', 'Stavropol\'skiy kray', 'Administrative territory'),
('RU', 'SVE', 'Sverdlovskaya oblast\'', 'Administrative region'),
('RU', 'TA', 'Tatarstan, Respublika', 'Republic'),
('RU', 'TAM', 'Tambovskaya oblast\'', 'Administrative region'),
('RU', 'TOM', 'Tomskaya oblast\'', 'Administrative region'),
('RU', 'TUL', 'Tul\'skaya oblast\'', 'Administrative region'),
('RU', 'TVE', 'Tverskaya oblast\'', 'Administrative region'),
('RU', 'TY', 'Tyva, Respublika [Tuva]', 'Republic'),
('RU', 'TYU', 'Tyumenskaya oblast\'', 'Administrative region'),
('RU', 'UD', 'Udmurtskaya Respublika', 'Republic'),
('RU', 'ULY', 'Ul\'yanovskaya oblast\'', 'Administrative region'),
('RU', 'VGG', 'Volgogradskaya oblast\'', 'Administrative region'),
('RU', 'VLA', 'Vladimirskaya oblast\'', 'Administrative region'),
('RU', 'VLG', 'Vologodskaya oblast\'', 'Administrative region'),
('RU', 'VOR', 'Voronezhskaya oblast\'', 'Administrative region'),
('RU', 'YAN', 'Yamalo-Nenetskiy avtonomnyy okrug', 'Autonomous district'),
('RU', 'YAR', 'Yaroslavskaya oblast\'', 'Administrative region'),
('RU', 'YEV', 'Yevreyskaya avtonomnaya oblast\'', 'Autonomous region'),
('RU', 'ZAB', 'Zabaykal\'skiy kray', 'Administrative territory'),
('RW', '01', 'Ville de Kigali', 'Town council'),
('RW', '02', 'Est', 'Province'),
('RW', '03', 'Nord', 'Province'),
('RW', '04', 'Ouest', 'Province'),
('RW', '05', 'Sud', 'Province'),
('SA', '01', 'Ar Riyad', 'Province'),
('SA', '02', 'Makkah', 'Province'),
('SA', '03', 'AI Madinah', 'Province'),
('SA', '04', 'Ash Sharqiyah', 'Province'),
('SA', '05', 'AI Qasim', 'Province'),
('SA', '06', 'Ha\'il', 'Province'),
('SA', '07', 'Tabuk', 'Province'),
('SA', '08', 'AI Hudud ash Shamaliyah', 'Province'),
('SA', '09', 'Jizan', 'Province'),
('SA', '10', 'Najran', 'Province'),
('SA', '11', 'AI Bahah', 'Province'),
('SA', '12', 'AI Jawf', 'Province'),
('SA', '14', '\'Asir', 'Province'),
('SB', 'CE', 'Central', 'Province'),
('SB', 'CH', 'Choiseul', 'Province'),
('SB', 'CT', 'Capital Territory (Honiara)', 'Capital territory'),
('SB', 'GU', 'Guadalcanal', 'Province'),
('SB', 'IS', 'Isabel', 'Province'),
('SB', 'MK', 'Makira', 'Province'),
('SB', 'ML', 'Malaita', 'Province'),
('SB', 'RB', 'Rennell and Bellona', 'Province'),
('SB', 'TE', 'Temotu', 'Province'),
('SB', 'WE', 'Western', 'Province'),
('SC', '01', 'Anse aux Pins', ''),
('SC', '02', 'Anse Boileau', ''),
('SC', '03', 'Anse Étoile', ''),
('SC', '04', 'Anse Louis', ''),
('SC', '05', 'Anse Royale', ''),
('SC', '06', 'Baie Lazare', ''),
('SC', '07', 'Baie Sainte Anne', ''),
('SC', '08', 'Beau Vallon', ''),
('SC', '09', 'Bel Air', ''),
('SC', '10', 'Bel Ombre', ''),
('SC', '11', 'Cascade', ''),
('SC', '12', 'Glacis', ''),
('SC', '13', 'Grand\' Anse (Mahé)', ''),
('SC', '14', 'Grand\' Anse (Praslin)', ''),
('SC', '15', 'La Digue', ''),
('SC', '16', 'La Rivière Anglaise', ''),
('SC', '17', 'Mont Buxton', ''),
('SC', '18', 'Mont Fleuri', ''),
('SC', '19', 'Plaisance', ''),
('SC', '20', 'Pointe La Rue', ''),
('SC', '21', 'Port Glaud', ''),
('SC', '22', 'Saint Louis', ''),
('SC', '23', 'Takamaka', ''),
('SC', '24', 'Lemamel', ''),
('SC', '25', 'Ros Kaiman', ''),
('SD', 'DC', 'Zalingei', 'State'),
('SD', 'DE', 'Sharq Darfur', 'State'),
('SD', 'DN', 'Shamal Darfur', 'State'),
('SD', 'DS', 'Janub Darfur', 'State'),
('SD', 'DW', 'Gharb Darfur', 'State'),
('SD', 'GD', 'Al Qadarif', 'State'),
('SD', 'GZ', 'Al Jazirah', 'State'),
('SD', 'KA', 'Kassala', 'State'),
('SD', 'KH', 'Al Khartum', 'State'),
('SD', 'KN', 'Shamal Kurdufan', 'State'),
('SD', 'KS', 'Gharb Kurdufan', 'State'),
('SD', 'NB', 'An Nil al Azraq', 'State'),
('SD', 'NO', 'Ash Shamaliyah', 'State'),
('SD', 'NR', 'An Nil', 'State'),
('SD', 'NW', 'An Nil al Abyad', 'State'),
('SD', 'RS', 'Al Bahr al Ahmar', 'State'),
('SD', 'SI', 'Sinnar', 'State'),
('SE', 'AB', 'Stockholms län', 'Province'),
('SE', 'AC', 'Västerbottens län', 'Province'),
('SE', 'BD', 'Norrbottens län', 'Province'),
('SE', 'C', 'Uppsala län', 'Province'),
('SE', 'D', 'Södermanlands län', 'Province'),
('SE', 'E', 'Östergötlands län', 'Province'),
('SE', 'F', 'Jönköpings län', 'Province'),
('SE', 'G', 'Kronoborgs län', 'Province'),
('SE', 'H', 'Kalmar län', 'Province'),
('SE', 'I', 'Gotlands län', 'Province'),
('SE', 'K', 'Blekinge län', 'Province'),
('SE', 'M', 'Skåne län', 'Province'),
('SE', 'N', 'Hallands län', 'Province'),
('SE', 'O', 'Västra Götalands län', 'Province'),
('SE', 'S', 'Värmlands län', 'Province'),
('SE', 'T', 'Örebro län', 'Province'),
('SE', 'U', 'Västmanlands län', 'Province'),
('SE', 'W', 'Dalarnes län', 'Province'),
('SE', 'X', 'Gävleborgs län', 'Province'),
('SE', 'Y', 'Västernorrlands län', 'Province'),
('SE', 'Z', 'Jämtlands län', 'Province'),
('SG', '01', 'Central Singapore', ''),
('SG', '02', 'North East', ''),
('SG', '03', 'North West', ''),
('SG', '04', 'South East', ''),
('SG', '05', 'South West', ''),
('SH', 'AC', 'Ascension', 'Dependency'),
('SH', 'SH', 'Saint Helena', 'Administrative area'),
('SH', 'TA', 'Tristan da Cunha', 'Dependency'),
('SI', '001', 'Ajdovcina', 'Commune'),
('SI', '002', 'Beltinci', 'Commune'),
('SI', '003', 'Bled', 'Commune'),
('SI', '004', 'Bohinj', 'Commune'),
('SI', '005', 'Borovnica', 'Commune'),
('SI', '006', 'Bovec', 'Commune'),
('SI', '007', 'Brda', 'Commune'),
('SI', '008', 'Brezovica', 'Commune'),
('SI', '009', 'Breice', 'Commune'),
('SI', '010', 'Tiina', 'Commune'),
('SI', '011', 'Celje', 'Commune'),
('SI', '012', 'Cerklje na Gorenjskem', 'Commune'),
('SI', '013', 'Cerknica', 'Commune'),
('SI', '014', 'Cerkno', 'Commune'),
('SI', '015', 'Crenovci', 'Commune'),
('SI', '016', 'Crna na Korokem', 'Commune'),
('SI', '017', 'Crnomelj', 'Commune'),
('SI', '018', 'Destrnik', 'Commune'),
('SI', '019', 'Divaca', 'Commune'),
('SI', '020', 'Dobrepolje', 'Commune'),
('SI', '021', 'Dobrova-Polhov Gradec', 'Commune'),
('SI', '022', 'Dol pri Ljubljani', 'Commune'),
('SI', '023', 'Domale', 'Commune'),
('SI', '024', 'Dornava', 'Commune'),
('SI', '025', 'Dravograd', 'Commune'),
('SI', '026', 'Duplek', 'Commune'),
('SI', '027', 'Gorenja vas-Poljane', 'Commune'),
('SI', '028', 'Gorinica', 'Commune'),
('SI', '029', 'Gornja Radgona', 'Commune'),
('SI', '030', 'Gornji Grad', 'Commune'),
('SI', '031', 'Gornji Petrovci', 'Commune'),
('SI', '032', 'Grosuplje', 'Commune'),
('SI', '033', 'alovci', 'Commune'),
('SI', '034', 'Hrastnik', 'Commune'),
('SI', '035', 'Hrpelje-Kozina', 'Commune'),
('SI', '036', 'Idrija', 'Commune'),
('SI', '037', 'Ig', 'Commune'),
('SI', '038', 'Ilirska Bistrica', 'Commune'),
('SI', '039', 'Ivancna Gorica', 'Commune'),
('SI', '040', 'Izola', 'Commune'),
('SI', '041', 'Jesenice', 'Commune'),
('SI', '042', 'Jurinci', 'Commune'),
('SI', '043', 'Kamnik', 'Commune'),
('SI', '044', 'Kanal', 'Commune'),
('SI', '045', 'Kidricevo', 'Commune'),
('SI', '046', 'Kobarid', 'Commune'),
('SI', '047', 'Kobilje', 'Commune'),
('SI', '048', 'Kocevje', 'Commune'),
('SI', '049', 'Komen', 'Commune'),
('SI', '050', 'Koper', 'Commune'),
('SI', '051', 'Kozje', 'Commune'),
('SI', '052', 'Kranj', 'Commune'),
('SI', '053', 'Kranjska Gora', 'Commune'),
('SI', '054', 'Krko', 'Commune'),
('SI', '055', 'Kungota', 'Commune'),
('SI', '056', 'Kuzma', 'Commune'),
('SI', '057', 'Lako', 'Commune'),
('SI', '058', 'Lenart', 'Commune'),
('SI', '059', 'Lendava', 'Commune'),
('SI', '060', 'Litija', 'Commune'),
('SI', '061', 'Ljubljana', 'Commune'),
('SI', '062', 'Ljubno', 'Commune'),
('SI', '063', 'Ljutomer', 'Commune'),
('SI', '064', 'Logatec', 'Commune'),
('SI', '065', 'Loka dolina', 'Commune'),
('SI', '066', 'Loki Potok', 'Commune'),
('SI', '067', 'Luce', 'Commune'),
('SI', '068', 'Lukovica', 'Commune'),
('SI', '069', 'Majperk', 'Commune'),
('SI', '070', 'Maribor', 'Commune'),
('SI', '071', 'Medvode', 'Commune'),
('SI', '072', 'Menge', 'Commune'),
('SI', '073', 'Metlika', 'Commune'),
('SI', '074', 'Meica', 'Commune'),
('SI', '075', 'Miren-Kostanjevica', 'Commune'),
('SI', '076', 'Mislinja', 'Commune'),
('SI', '077', 'Moravce', 'Commune'),
('SI', '078', 'Moravske Toplice', 'Commune'),
('SI', '079', 'Mozirje', 'Commune'),
('SI', '080', 'Murska Sobota', 'Commune'),
('SI', '081', 'Muta', 'Commune'),
('SI', '082', 'Naklo', 'Commune'),
('SI', '083', 'Nazarje', 'Commune'),
('SI', '084', 'Nova Gorica', 'Commune'),
('SI', '085', 'Novo mesto', 'Commune'),
('SI', '086', 'Odranci', 'Commune'),
('SI', '087', 'Ormo', 'Commune'),
('SI', '088', 'Osilnica', 'Commune'),
('SI', '089', 'Pesnica', 'Commune'),
('SI', '090', 'Piran', 'Commune'),
('SI', '091', 'Pivka', 'Commune'),
('SI', '092', 'Podcetrtek', 'Commune'),
('SI', '093', 'Podvelka', 'Commune'),
('SI', '094', 'Postojna', 'Commune'),
('SI', '095', 'Preddvor', 'Commune'),
('SI', '096', 'Ptuj', 'Commune'),
('SI', '097', 'Puconci', 'Commune'),
('SI', '098', 'Race-Fram', 'Commune'),
('SI', '099', 'Radece', 'Commune'),
('SI', '100', 'Radenci', 'Commune'),
('SI', '101', 'Radlje ob Dravi', 'Commune'),
('SI', '102', 'Radovljica', 'Commune'),
('SI', '103', 'Ravne na Korokem', 'Commune'),
('SI', '104', 'Ribnica', 'Commune'),
('SI', '105', 'Rogaovci', 'Commune'),
('SI', '106', 'Rogaka Slatina', 'Commune'),
('SI', '107', 'Rogatec', 'Commune'),
('SI', '108', 'Rue', 'Commune'),
('SI', '109', 'Semic', 'Commune'),
('SI', '110', 'Semic', 'Commune'),
('SI', '111', 'Semic', 'Commune'),
('SI', '112', 'Slovenj Gradec', 'Commune'),
('SI', '113', 'Slovenska Bistrica', 'Commune'),
('SI', '114', 'Slovenske Konjice', 'Commune'),
('SI', '115', 'Stare', 'Commune'),
('SI', '116', 'Sveti Jurij', 'Commune'),
('SI', '117', 'encur', 'Commune'),
('SI', '118', 'entilj', 'Commune'),
('SI', '119', 'entjernej', 'Commune'),
('SI', '120', 'entjur pri Celju', 'Commune'),
('SI', '121', 'kocjan', 'Commune'),
('SI', '122', 'kofja Loka', 'Commune'),
('SI', '123', 'kofljica', 'Commune'),
('SI', '124', 'marje pri Jelah', 'Commune'),
('SI', '125', 'martno ob Paki', 'Commune'),
('SI', '126', 'otanj', 'Commune'),
('SI', '127', 'tore', 'Commune'),
('SI', '128', 'Tolmin', 'Commune'),
('SI', '129', 'Trbovlje', 'Commune'),
('SI', '130', 'Trebnje', 'Commune'),
('SI', '131', 'Tric', 'Commune'),
('SI', '132', 'Turnice', 'Commune'),
('SI', '133', 'Velenje', 'Commune'),
('SI', '134', 'Velike Lace', 'Commune'),
('SI', '135', 'Videm', 'Commune'),
('SI', '136', 'Vipava', 'Commune'),
('SI', '137', 'Vitanje', 'Commune'),
('SI', '138', 'Vodice', 'Commune'),
('SI', '139', 'Vojnik', 'Commune'),
('SI', '140', 'Vrhnika', 'Commune'),
('SI', '141', 'Vuzenica', 'Commune'),
('SI', '142', 'Zagorje ob Savi', 'Commune'),
('SI', '143', 'Zavrc', 'Commune'),
('SI', '144', 'Zrece', 'Commune'),
('SI', '146', 'elezniki', 'Commune'),
('SI', '147', 'iri', 'Commune'),
('SI', '148', 'Benedikt', 'Commune'),
('SI', '149', 'Bistrica ob Sotli', 'Commune'),
('SI', '150', 'Bloke', 'Commune'),
('SI', '151', 'Braslovce', 'Commune'),
('SI', '152', 'Cankova', 'Commune'),
('SI', '153', 'Cerkvenjak', 'Commune'),
('SI', '154', 'Dobje', 'Commune'),
('SI', '155', 'Dobrna', 'Commune'),
('SI', '156', 'Dobrovnik', 'Commune'),
('SI', '157', 'Dolenjske Toplice', 'Commune'),
('SI', '158', 'Grad', 'Commune'),
('SI', '159', 'Hajdina', 'Commune'),
('SI', '160', 'Hoce-Slivnica', 'Commune'),
('SI', '161', 'Hodo', 'Commune'),
('SI', '162', 'Horjul', 'Commune'),
('SI', '163', 'Jezersko', 'Commune'),
('SI', '164', 'Komenda', 'Commune'),
('SI', '165', 'Kostel', 'Commune'),
('SI', '166', 'Krievci', 'Commune'),
('SI', '167', 'Lovrenc na Pohorju', 'Commune'),
('SI', '168', 'Markovci', 'Commune'),
('SI', '169', 'Miklav na Dravskem polju', 'Commune'),
('SI', '170', 'Mirna Pec', 'Commune'),
('SI', '171', 'Oplotnica', 'Commune'),
('SI', '172', 'Podlehnik', 'Commune'),
('SI', '173', 'Polzela', 'Commune'),
('SI', '174', 'Prebold', 'Commune'),
('SI', '175', 'Prevalje', 'Commune'),
('SI', '176', 'Razkrije', 'Commune'),
('SI', '177', 'Ribnica na Pohorju', 'Commune'),
('SI', '178', 'Selnica ob Dravi', 'Commune'),
('SI', '179', 'Sodraica', 'Commune'),
('SI', '180', 'Solcava', 'Commune'),
('SI', '181', 'Sveta Ana', 'Commune'),
('SI', '182', 'Sveti Andra v Slovenskih goricah', 'Commune'),
('SI', '183', 'empeter-Vrtojba', 'Commune'),
('SI', '184', 'Tabor', 'Commune'),
('SI', '185', 'Trnovska vas', 'Commune'),
('SI', '186', 'Trzin', 'Commune'),
('SI', '187', 'Velika Polana', 'Commune'),
('SI', '188', 'Verej', 'Commune'),
('SI', '189', 'Vransko', 'Commune'),
('SI', '190', 'alec', 'Commune'),
('SI', '191', 'etale', 'Commune'),
('SI', '192', 'irovnica', 'Commune'),
('SI', '193', 'uemberk', 'Commune'),
('SI', '194', 'martno pri Litiji', 'Commune'),
('SI', '195', 'Apace', 'Commune'),
('SI', '196', 'Cirkulane', 'Commune'),
('SI', '197', 'Kosanjevica na Krki', 'Commune'),
('SI', '198', 'Makole', 'Commune'),
('SI', '199', 'Mokronog-Trebelno', 'Commune'),
('SI', '200', 'Poljèane', 'Commune'),
('SI', '201', 'Renèe-Vogrsko', 'Commune'),
('SI', '202', 'Sredice ob Dravi', 'Commune'),
('SI', '203', 'Straa', 'Commune'),
('SI', '204', 'Sveta Trojica v Slovenskih Goricah', 'Commune'),
('SI', '205', 'Sveti Toma', 'Commune'),
('SI', '206', 'marjeke Toplice', 'Commune'),
('SI', '207', 'Gorje', 'Commune'),
('SI', '208', 'Log-Dragomer', 'Commune'),
('SI', '209', 'Reèica ob Savinji', 'Commune'),
('SI', '210', 'Sveti Jurij v Slovenskih Goricah', 'Commune'),
('SI', '211', 'entrupert', 'Commune'),
('SK', 'BC', 'Banskobystrický kraj', 'Region'),
('SK', 'BL', 'Bratislavský kraj', 'Region'),
('SK', 'KI', 'Koický kraj', 'Region'),
('SK', 'NI', 'Nitriansky kraj', 'Region'),
('SK', 'PV', 'Preovský kraj', 'Region'),
('SK', 'TA', 'Trnavský kraj', 'Region'),
('SK', 'TC', 'Trenciansky kraj', 'Region'),
('SK', 'ZI', 'ilinský kraj', 'Region'),
('SL', 'E', 'Eastern', 'Province'),
('SL', 'N', 'Northern', 'Province'),
('SL', 'S', 'Southern', 'Province'),
('SL', 'W', 'Western Area (Freetown)', 'Area'),
('SM', '01', 'Acquaviva', ''),
('SM', '02', 'Chiesanuova', ''),
('SM', '03', 'Domagnano', ''),
('SM', '04', 'Faetano', ''),
('SM', '05', 'Fiorentino', ''),
('SM', '06', 'Borgo Maggiore', ''),
('SM', '07', 'San Marino', ''),
('SM', '08', 'Montegiardino', ''),
('SM', '09', 'Serravalle', ''),
('SN', 'DB', 'Diourbel', 'Region'),
('SN', 'FK', 'Fatick', 'Region'),
('SN', 'KA', 'Kaffrine', 'Region'),
('SN', 'KD', 'Kolda', 'Region'),
('SN', 'KE', 'Kédougou', 'Region'),
('SN', 'KL', 'Kaolack', 'Region'),
('SN', 'LG', 'Louga', 'Region'),
('SN', 'M', 'Dakar', 'Region'),
('SN', 'MT', 'Matam', 'Region'),
('SN', 'SE', 'Sédhiou', 'Region'),
('SN', 'SL', 'Saint-Louis', 'Region'),
('SN', 'TC', 'Tambacounda', 'Region'),
('SN', 'TH', 'Thiès', 'Region'),
('SN', 'ZG', 'Ziguinchor', 'Region'),
('SO', 'AW', 'Awdal', 'Region');
INSERT INTO `mm_country_subdivisions` (`iso`, `code`, `name`, `type`) VALUES
('SO', 'BK', 'Bakool', 'Region'),
('SO', 'BN', 'Banaadir', 'Region'),
('SO', 'BR', 'Bari', 'Region'),
('SO', 'BY', 'Bay', 'Region'),
('SO', 'GA', 'Galguduud', 'Region'),
('SO', 'GE', 'Gedo', 'Region'),
('SO', 'HI', 'Hiiraan', 'Region'),
('SO', 'JD', 'Jubbada Dhexe', 'Region'),
('SO', 'JH', 'Jubbada Hoose', 'Region'),
('SO', 'MU', 'Mudug', 'Region'),
('SO', 'NU', 'Nugaal', 'Region'),
('SO', 'SA', 'Sanaag', 'Region'),
('SO', 'SD', 'Shabeellaha Dhexe', 'Region'),
('SO', 'SH', 'Shabeellaha Hoose', 'Region'),
('SO', 'SO', 'Sool', 'Region'),
('SO', 'TO', 'Togdheer', 'Region'),
('SO', 'WO', 'Woqooyi Galbeed', 'Region'),
('SR', 'BR', 'Brokopondo', 'District'),
('SR', 'CM', 'Commewijne', 'District'),
('SR', 'CR', 'Coronie', 'District'),
('SR', 'MA', 'Marowijne', 'District'),
('SR', 'NI', 'Nickerie', 'District'),
('SR', 'PM', 'Paramaribo', ''),
('SR', 'PR', 'Para', 'District'),
('SR', 'SA', 'Saramacca', 'District'),
('SR', 'SI', 'Sipaliwini', 'District'),
('SR', 'WA', 'Wanica', 'District'),
('SS', 'BN', 'Northern Bahr el-Ghazal', 'State'),
('SS', 'BW', 'Western Bahr el-Ghazal', 'State'),
('SS', 'EC', 'Central Equatoria', 'State'),
('SS', 'EE', 'Eastern Equatoria', 'State'),
('SS', 'EW', 'Western Equatoria', 'State'),
('SS', 'JG', 'Jonglei', 'State'),
('SS', 'LK', 'Lakes', 'State'),
('SS', 'NU', 'Upper Nile', 'State'),
('SS', 'UY', 'Unity', 'State'),
('SS', 'WR', 'Warrap', 'State'),
('ST', 'P', 'Príncipe', 'Province'),
('ST', 'S', 'São Tomé', 'Province'),
('SV', 'AH', 'Ahuachapán', ''),
('SV', 'CA', 'Cabañas', ''),
('SV', 'CH', 'Chalatenango', ''),
('SV', 'CU', 'Cuscatlán', ''),
('SV', 'LI', 'La Libertad', ''),
('SV', 'MO', 'Morazán', ''),
('SV', 'PA', 'La Paz', ''),
('SV', 'SA', 'Santa Ana', ''),
('SV', 'SM', 'San Miguel', ''),
('SV', 'SO', 'Sonsonate', ''),
('SV', 'SS', 'San Salvador', ''),
('SV', 'SV', 'San Vicente', ''),
('SV', 'UN', 'La Unión', ''),
('SV', 'US', 'Usulután', ''),
('SY', 'DI', 'Dimashq', ''),
('SY', 'DR', 'Dar\'a', ''),
('SY', 'DY', 'Dayr az Zawr', ''),
('SY', 'HA', 'AI Hasakah', ''),
('SY', 'HI', 'Hims', ''),
('SY', 'HL', 'Halab', ''),
('SY', 'HM', 'Hamah', ''),
('SY', 'ID', 'Idlib', ''),
('SY', 'LA', 'AI Ladhiqiyah', ''),
('SY', 'Qu', 'AI Qunaytirah', ''),
('SY', 'RA', 'Ar Raqqah', ''),
('SY', 'RD', 'Rif Dimashq', ''),
('SY', 'SU', 'As Suwayda\'', ''),
('SY', 'TA', 'Tartus', ''),
('SZ', 'HH', 'Hhohho', 'District'),
('SZ', 'LU', 'Lubombo', 'District'),
('SZ', 'MA', 'Manzini', 'District'),
('SZ', 'SH', 'Shiselweni', 'District'),
('TD', 'BA', 'Batha', ''),
('TD', 'BG', 'Ba?r al Ghazal', ''),
('TD', 'BO', 'Burku', ''),
('TD', 'CB', 'Chari-Baguirmi', ''),
('TD', 'EN', 'Innidi', ''),
('TD', 'GR', 'Guéra', ''),
('TD', 'HL', 'Hadjer Lamis', ''),
('TD', 'KA', 'Kanem', ''),
('TD', 'LC', 'Lac', ''),
('TD', 'LO', 'Logone-Occidental', ''),
('TD', 'LR', 'Logone-Oriental', ''),
('TD', 'MA', 'Mandoul', ''),
('TD', 'MC', 'Moyen-Chari', ''),
('TD', 'ME', 'Mayo-Kébbi-Est', ''),
('TD', 'MO', 'Mayo-Kébbi-Ouest', ''),
('TD', 'ND', 'Ndjamena', ''),
('TD', 'OD', 'Ouaddaï', ''),
('TD', 'SA', 'Salamat', ''),
('TD', 'SI', 'Sila', ''),
('TD', 'TA', 'Tandjilé', ''),
('TD', 'TI', 'Tibasti', ''),
('TD', 'WF', 'Wadi Fira', ''),
('TG', 'C', 'Centre', ''),
('TG', 'K', 'Kara', ''),
('TG', 'M', 'Maritime (Région)', ''),
('TG', 'P', 'Plateaux', ''),
('TG', 'S', 'Savannes', ''),
('TH', '10', 'Krung Thep Maha Nakhon [Bangkok]', ''),
('TH', '11', 'Samut Prakan', ''),
('TH', '12', 'Nonthaburi', ''),
('TH', '13', 'Pathum Thani', ''),
('TH', '14', 'Phra Nakhon Si Ayutthaya', ''),
('TH', '15', 'Ang Thong', ''),
('TH', '16', 'Lop Buri', ''),
('TH', '17', 'Sing Buri', ''),
('TH', '18', 'Chai Nat', ''),
('TH', '19', 'Saraburi', ''),
('TH', '20', 'Chon Buri', ''),
('TH', '21', 'Rayong', ''),
('TH', '22', 'Chanthaburi', ''),
('TH', '23', 'Trat', ''),
('TH', '24', 'Chachoengsao', ''),
('TH', '25', 'Prachin Buri', ''),
('TH', '26', 'Nakhon Nayok', ''),
('TH', '27', 'Sa Kaeo', ''),
('TH', '30', 'Nakhon Ratchasima', ''),
('TH', '31', 'Buri Ram', ''),
('TH', '32', 'Surin', ''),
('TH', '33', 'Si Sa Ket', ''),
('TH', '34', 'Ubon Ratchathani', ''),
('TH', '35', 'Yasothon', ''),
('TH', '36', 'Chaiyaphum', ''),
('TH', '37', 'Amnat Charoen', ''),
('TH', '39', 'Nong Bua Lam Phu', ''),
('TH', '40', 'Khon Kaen', ''),
('TH', '41', 'Udon Thani', ''),
('TH', '42', 'Loei', ''),
('TH', '43', 'Nong Khai', ''),
('TH', '44', 'Maha Sarakham', ''),
('TH', '45', 'Roi Et', ''),
('TH', '46', 'Kalasin', ''),
('TH', '47', 'Sakon Nakhon', ''),
('TH', '48', 'Nakhon Phanom', ''),
('TH', '49', 'Mukdahan', ''),
('TH', '50', 'Chiang Mai', ''),
('TH', '51', 'Lamphun', ''),
('TH', '52', 'Lampang', ''),
('TH', '53', 'Uttaradit', ''),
('TH', '54', 'Phrae', ''),
('TH', '55', 'Nan', ''),
('TH', '56', 'Phayao', ''),
('TH', '57', 'Chiang Rai', ''),
('TH', '58', 'Mae Hong Son', ''),
('TH', '60', 'Nakhon Sawan', ''),
('TH', '61', 'Uthai Thani', ''),
('TH', '62', 'Kamphaeng Phet', ''),
('TH', '63', 'Tak', ''),
('TH', '64', 'Sukhothai', ''),
('TH', '65', 'Phitsanulok', ''),
('TH', '66', 'Phichit', ''),
('TH', '67', 'Phetchabun', ''),
('TH', '70', 'Ratchaburi', ''),
('TH', '71', 'Kanchanaburi', ''),
('TH', '72', 'Suphan Buri', ''),
('TH', '73', 'Nakhon Pathom', ''),
('TH', '74', 'Samut Sakhon', ''),
('TH', '75', 'Samut Songkhram', ''),
('TH', '76', 'Phetchaburi', ''),
('TH', '77', 'Prachuap Khiri Khan', ''),
('TH', '80', 'Nakhon Si Thammarat', ''),
('TH', '81', 'Krabi', ''),
('TH', '82', 'Phangnga', ''),
('TH', '83', 'Phuket', ''),
('TH', '84', 'Surat Thani', ''),
('TH', '85', 'Ranong', ''),
('TH', '86', 'Chumphon', ''),
('TH', '90', 'Songkhla', ''),
('TH', '91', 'Satun', ''),
('TH', '92', 'Trang', ''),
('TH', '93', 'Phatthalung', ''),
('TH', '94', 'Pattani', ''),
('TH', '95', 'Yala', ''),
('TH', '96', 'Narathiwat', ''),
('TH', 'S', 'Phatthaya', ''),
('TJ', 'GB', 'Gorno-Badakhshan', ''),
('TJ', 'KT', 'Khatlon', ''),
('TJ', 'SU', 'Sughd', ''),
('TL', 'AL', 'Aileu', ''),
('TL', 'AN', 'Ainaro', ''),
('TL', 'BA', 'Baucau', ''),
('TL', 'BO', 'Bobonaro', ''),
('TL', 'CO', 'Cova Lima', ''),
('TL', 'DI', 'Dili', ''),
('TL', 'ER', 'Ermera', ''),
('TL', 'LA', 'Lautem', ''),
('TL', 'LI', 'Liquiça', ''),
('TL', 'MF', 'Manufahi', ''),
('TL', 'MT', 'Manatuto', ''),
('TL', 'OE', 'Oecussi', ''),
('TL', 'VI', 'Viqueque', ''),
('TM', 'A', 'Ahal', ''),
('TM', 'B', 'Balkan', ''),
('TM', 'D', 'Dashowuz', ''),
('TM', 'L', 'Lebap', ''),
('TM', 'M', 'Mary', ''),
('TM', 'S', 'Asgabat', ''),
('TN', '11', 'Tunis', 'Governorate'),
('TN', '12', 'L\'Ariana', 'Governorate'),
('TN', '13', 'Ben Arous', 'Governorate'),
('TN', '14', 'La Manouba', 'Governorate'),
('TN', '21', 'Nabeul', 'Governorate'),
('TN', '22', 'Zaghouan', 'Governorate'),
('TN', '23', 'Bizerte', 'Governorate'),
('TN', '31', 'Béja', 'Governorate'),
('TN', '32', 'Jendouba', 'Governorate'),
('TN', '33', 'Le Kef', 'Governorate'),
('TN', '34', 'Siliana', 'Governorate'),
('TN', '41', 'Kairouan', 'Governorate'),
('TN', '42', 'Kasserine', 'Governorate'),
('TN', '43', 'Sidi Bouzid', 'Governorate'),
('TN', '51', 'Sousse', 'Governorate'),
('TN', '52', 'Monastir', 'Governorate'),
('TN', '53', 'Mahdia', 'Governorate'),
('TN', '61', 'Sfax', 'Governorate'),
('TN', '71', 'Gafsa', 'Governorate'),
('TN', '72', 'Tozeur', 'Governorate'),
('TN', '73', 'Kebili', 'Governorate'),
('TN', '81', 'Gabès', 'Governorate'),
('TN', '82', 'Medenine', 'Governorate'),
('TN', '83', 'Tataouine', 'Governorate'),
('TO', '01', '\'Eua', ''),
('TO', '02', 'Ha\'apai', ''),
('TO', '03', 'Niuas', ''),
('TO', '04', 'Tongatapu', ''),
('TO', '05', 'Vava\'u', ''),
('TR', '01', 'Adana', 'Province'),
('TR', '02', 'Adiyaman', 'Province'),
('TR', '03', 'Afyon', 'Province'),
('TR', '04', 'Agri', 'Province'),
('TR', '05', 'Amasya', 'Province'),
('TR', '06', 'Ankara', 'Province'),
('TR', '07', 'Antalya', 'Province'),
('TR', '08', 'Artvin', 'Province'),
('TR', '09', 'Aydin', 'Province'),
('TR', '10', 'Balikesir', 'Province'),
('TR', '11', 'Bilecik', 'Province'),
('TR', '12', 'Bingol', 'Province'),
('TR', '13', 'Bitlis', 'Province'),
('TR', '14', 'Bolu', 'Province'),
('TR', '15', 'Burdur', 'Province'),
('TR', '16', 'Bursa', 'Province'),
('TR', '17', 'Canakkale', 'Province'),
('TR', '18', 'Cankiri', 'Province'),
('TR', '19', 'Corum', 'Province'),
('TR', '20', 'Denizli', 'Province'),
('TR', '21', 'Diyarbakir', 'Province'),
('TR', '22', 'Edirne', 'Province'),
('TR', '23', 'Elazig', 'Province'),
('TR', '24', 'Erzincan', 'Province'),
('TR', '25', 'Erzurum', 'Province'),
('TR', '26', 'Eskisehir', 'Province'),
('TR', '27', 'Gaziantep', 'Province'),
('TR', '28', 'Giresun', 'Province'),
('TR', '29', 'Gümüshane', 'Province'),
('TR', '30', 'Hakkari', 'Province'),
('TR', '31', 'Hatay', 'Province'),
('TR', '32', 'Isparta', 'Province'),
('TR', '33', 'Icel', 'Province'),
('TR', '34', 'Istanbul', 'Province'),
('TR', '35', 'Izmir', 'Province'),
('TR', '36', 'Kars', 'Province'),
('TR', '37', 'Kastamonu', 'Province'),
('TR', '38', 'Kayseri', 'Province'),
('TR', '39', 'Kirklareli', 'Province'),
('TR', '40', 'Kirsehir', 'Province'),
('TR', '41', 'Kocaeli', 'Province'),
('TR', '42', 'Konya', 'Province'),
('TR', '43', 'Kütahya', 'Province'),
('TR', '44', 'Malatya', 'Province'),
('TR', '45', 'Manisa', 'Province'),
('TR', '46', 'Kahramanmaras', 'Province'),
('TR', '47', 'Mardin', 'Province'),
('TR', '48', 'Mugla', 'Province'),
('TR', '49', 'Mus', 'Province'),
('TR', '50', 'Nevsehir', 'Province'),
('TR', '51', 'Nigde', 'Province'),
('TR', '52', 'Ordu', 'Province'),
('TR', '53', 'Rize', 'Province'),
('TR', '54', 'Sakarya', 'Province'),
('TR', '55', 'Samsun', 'Province'),
('TR', '56', 'Siirt', 'Province'),
('TR', '57', 'Sinop', 'Province'),
('TR', '58', 'Sivas', 'Province'),
('TR', '59', 'Tekirdag', 'Province'),
('TR', '60', 'Tokat', 'Province'),
('TR', '61', 'Trabzon', 'Province'),
('TR', '62', 'Tunceli', 'Province'),
('TR', '63', 'Sanliurfa', 'Province'),
('TR', '64', 'Usak', 'Province'),
('TR', '65', 'Van', 'Province'),
('TR', '66', 'Yozgat', 'Province'),
('TR', '67', 'Zonguldak', 'Province'),
('TR', '68', 'Aksaray', 'Province'),
('TR', '69', 'Bayburt', 'Province'),
('TR', '70', 'Karaman', 'Province'),
('TR', '71', 'Kirkkale', 'Province'),
('TR', '72', 'Batman', 'Province'),
('TR', '73', 'Sirnak', 'Province'),
('TR', '74', 'Bartin', 'Province'),
('TR', '75', 'Ardahan', 'Province'),
('TR', '76', 'Igdir', 'Province'),
('TR', '77', 'Yalova', 'Province'),
('TR', '78', 'Karabuk', 'Province'),
('TR', '79', 'Kilis', 'Province'),
('TR', '80', 'Osmaniye', 'Province'),
('TR', '81', 'Düzce', 'Province'),
('TT', 'ARI', 'Arima', 'Municipality'),
('TT', 'CHA', 'Chaguanas', 'Municipality'),
('TT', 'CTT', 'Couva-Tabaquite-Talparo', ''),
('TT', 'DMN', 'Diego Martin', ''),
('TT', 'ETO', 'Eastern Tobago', ''),
('TT', 'PED', 'Penal-Debe', ''),
('TT', 'POS', 'Port of Spain', 'Municipality'),
('TT', 'PRT', 'Princes Town', ''),
('TT', 'PTF', 'Point Fortin', 'Municipality'),
('TT', 'RCM', 'Rio Claro-Mayaro', ''),
('TT', 'SFO', 'San Fernando', 'Municipality'),
('TT', 'SGE', 'Sangre Grande', ''),
('TT', 'SIP', 'Siparia', ''),
('TT', 'SJL', 'San Juan-Laventille', ''),
('TT', 'TUP', 'Tunapuna-Piarco', ''),
('TT', 'WTO', 'Western Tobago', ''),
('TV', 'FUN', 'Funafuti', 'Town council'),
('TV', 'NIT', 'Niutao', 'Island council'),
('TV', 'NIU', 'Nui', 'Island council'),
('TV', 'NKF', 'Nukufetau', 'Island council'),
('TV', 'NKL', 'Nukulaelae', 'Island council'),
('TV', 'NMA', 'Nanumea', 'Island council'),
('TV', 'NMG', 'Nanumanga', 'Island council'),
('TV', 'VAI', 'Vaitupu', 'Island council'),
('TW', 'CHA', 'Changhua', 'district'),
('TW', 'CYI', 'Chiayi', 'Municipality'),
('TW', 'CYQ', 'Chiayi', 'district'),
('TW', 'HSQ', 'Chiayi', 'district'),
('TW', 'HSZ', 'Hsinchu', 'Municipality'),
('TW', 'HUA', 'Hualien', 'district'),
('TW', 'ILA', 'Ilan', 'district'),
('TW', 'KEE', 'Keelung', 'Municipality'),
('TW', 'KHH', 'Kaohsiung', 'special municipality'),
('TW', 'KHQ', 'Kaohsiung', 'district'),
('TW', 'MIA', 'Miaoli', 'district'),
('TW', 'NAN', 'Nantou', 'district'),
('TW', 'PEN', 'Penghu', 'district'),
('TW', 'PIF', 'Pingtung', 'district'),
('TW', 'TAO', 'Taoyuan', 'district'),
('TW', 'TNN', 'Tainan', 'Municipality'),
('TW', 'TNQ', 'Tainan', 'district'),
('TW', 'TPE', 'Taipei', 'special municipality'),
('TW', 'TPQ', 'Taipei', 'district'),
('TW', 'TTT', 'Taitung', 'district'),
('TW', 'TXG', 'Taichung', 'Municipality'),
('TW', 'TXQ', 'Taichung', 'district'),
('TW', 'YUN', 'Yunlin', 'district'),
('TZ', '01', 'Arusha', 'Region'),
('TZ', '02', 'Dar es Salaam', 'Region'),
('TZ', '03', 'Dodoma', 'Region'),
('TZ', '04', 'Iringa', 'Region'),
('TZ', '05', 'Kagera', 'Region'),
('TZ', '06', 'Kaskazini Pemba', 'Region'),
('TZ', '07', 'Kaskazini Unguja', 'Region'),
('TZ', '08', 'Kigoma', 'Region'),
('TZ', '09', 'Kilimanjaro', 'Region'),
('TZ', '10', 'Kusini Pemba', 'Region'),
('TZ', '11', 'Kusini Unguja', 'Region'),
('TZ', '12', 'Lindi', 'Region'),
('TZ', '13', 'Mara', 'Region'),
('TZ', '14', 'Mbeya', 'Region'),
('TZ', '15', 'Mjini Magharibi', 'Region'),
('TZ', '16', 'Morogoro', 'Region'),
('TZ', '17', 'Mtwara', 'Region'),
('TZ', '18', 'Mwanza', 'Region'),
('TZ', '19', 'Pwani', 'Region'),
('TZ', '20', 'Rukwa', 'Region'),
('TZ', '21', 'Ruvuma', 'Region'),
('TZ', '22', 'Shinyanga', 'Region'),
('TZ', '23', 'Singida', 'Region'),
('TZ', '24', 'Tabora', 'Region'),
('TZ', '25', 'Tanga', 'Region'),
('TZ', '26', 'Manyara', 'Region'),
('UA', '05', 'Vinnyts\'ka Oblast\'', ''),
('UA', '07', 'Volyns\'ka Oblast\'', ''),
('UA', '09', 'Luhans\'ka Oblast\'', ''),
('UA', '12', 'Dnipropetrovs\'ka Oblast\'', ''),
('UA', '14', 'Donets\'ka Oblast\'', ''),
('UA', '18', 'Zhytomyrs\'ka Oblast\'', ''),
('UA', '21', 'Zakarpats\'ka Oblast\'', ''),
('UA', '23', 'Zaporiz\'ka Oblast\'', ''),
('UA', '26', 'Ivano-Frankivs\'ka Oblast\'', ''),
('UA', '30', 'Kyïv', ''),
('UA', '32', 'Kylvs\'ka Oblast\'', ''),
('UA', '35', 'Kirovohrads\'ka Oblast\'', ''),
('UA', '40', 'Sevastopol\'', ''),
('UA', '43', 'Respublika Krym', ''),
('UA', '46', 'L\'vivs\'ka Oblast\'', ''),
('UA', '48', 'Mykolaivs\'ka Oblast\'', ''),
('UA', '51', 'Odes\'ka Oblast\'', ''),
('UA', '53', 'Poltavs\'ka Oblast\'', ''),
('UA', '56', 'Rivnens\'ka Oblast\'', ''),
('UA', '59', 'Sums\'ka Oblast\'', ''),
('UA', '61', 'Ternopil\'s\'ka Oblast\'', ''),
('UA', '63', 'Kharkivs\'ka Oblast\'', ''),
('UA', '65', 'Khersons\'ka Oblast\'', ''),
('UA', '68', 'Khmel\'nyts\'ka Oblast\'', ''),
('UA', '71', 'Cherkas\'ka Oblast\'', ''),
('UA', '74', 'Chernihivs\'ka Oblast\'', ''),
('UA', '77', 'Chernivets\'ka Oblast\'', ''),
('UG', '101', 'Kalangala', 'District'),
('UG', '102', 'Kampala', 'District'),
('UG', '103', 'Kiboga', 'District'),
('UG', '104', 'Luwero', 'District'),
('UG', '105', 'Masaka', 'District'),
('UG', '106', 'Mpigi', 'District'),
('UG', '107', 'Mubende', 'District'),
('UG', '108', 'Mukono', 'District'),
('UG', '109', 'Nakasongola', 'District'),
('UG', '110', 'Rakai', 'District'),
('UG', '111', 'Sembabule', 'District'),
('UG', '112', 'Kayunga', 'District'),
('UG', '113', 'Wakiso', 'District'),
('UG', '114', 'Mityana', ''),
('UG', '115', 'Nakaseke', ''),
('UG', '116', 'Lyantonde', ''),
('UG', '201', 'Bugiri', 'District'),
('UG', '202', 'Busia', 'District'),
('UG', '203', 'Iganga', 'District'),
('UG', '204', 'Jinja', 'District'),
('UG', '205', 'Kamuli', 'District'),
('UG', '206', 'Kapchorwa', 'District'),
('UG', '207', 'Katakwi', 'District'),
('UG', '208', 'Kumi', 'District'),
('UG', '209', 'Mbale', 'District'),
('UG', '210', 'Pallisa', 'District'),
('UG', '211', 'Soroti', 'District'),
('UG', '212', 'Tororo', 'District'),
('UG', '213', 'Kaberamaido', 'District'),
('UG', '215', 'Sironko', 'District'),
('UG', '216', 'Amuria', ''),
('UG', '217', 'Budaka', ''),
('UG', '218', 'Bukwa', ''),
('UG', '219', 'Butaleja', ''),
('UG', '220', 'Kaliro', ''),
('UG', '221', 'Manafwa', ''),
('UG', '222', 'Namutumba', ''),
('UG', '223', 'Bududa', ''),
('UG', '224', 'Bukedea', ''),
('UG', '244', 'Mayuge', 'District'),
('UG', '301', 'Adjumani', 'District'),
('UG', '302', 'Apac', 'District'),
('UG', '303', 'Arua', 'District'),
('UG', '304', 'Gulu', 'District'),
('UG', '305', 'Kitgum', 'District'),
('UG', '306', 'Kotido', 'District'),
('UG', '307', 'Lira', 'District'),
('UG', '308', 'Moroto', 'District'),
('UG', '309', 'Moyo', 'District'),
('UG', '310', 'Nebbi', 'District'),
('UG', '311', 'Nakapiripirit', 'District'),
('UG', '312', 'Pader', 'District'),
('UG', '313', 'Yumbe', 'District'),
('UG', '314', 'Amolatar', ''),
('UG', '315', 'Kaabong', ''),
('UG', '316', 'Koboko', ''),
('UG', '317', 'Abim', ''),
('UG', '318', 'Dokolo', ''),
('UG', '319', 'Amuru', ''),
('UG', '320', 'Maracha', ''),
('UG', '321', 'Oyam', ''),
('UG', '401', 'Bundibugyo', 'District'),
('UG', '402', 'Bushenyi', 'District'),
('UG', '403', 'Hoima', 'District'),
('UG', '404', 'Kabale', 'District'),
('UG', '405', 'Kabarole', 'District'),
('UG', '406', 'Kasese', 'District'),
('UG', '407', 'Kibaale', 'District'),
('UG', '408', 'Kisoro', 'District'),
('UG', '409', 'Masindi', 'District'),
('UG', '410', 'Mbarara', 'District'),
('UG', '411', 'Ntungamo', 'District'),
('UG', '412', 'Rukungiri', 'District'),
('UG', '413', 'Kamwenge', 'District'),
('UG', '414', 'Kanungu', 'District'),
('UG', '415', 'Kyenjojo', 'District'),
('UG', '416', 'Ibanda', ''),
('UG', '417', 'Isingiro', ''),
('UG', '418', 'Kiruhura', ''),
('UG', '419', 'Buliisa', ''),
('UM', '67', 'Johnston Atoll (ISO reserved code = JT)', 'Islands/Groups of Islands'),
('UM', '71', 'Midway Islands (ISO reserved code = I)', 'Islands/Groups of Islands'),
('UM', '76', 'Navassa Island (ISO reserved code = NV)', 'Islands/Groups of Islands'),
('UM', '79', 'Wake Island (ISO reserved code = WK)', 'Islands/Groups of Islands'),
('UM', '81', 'Baker Island', 'Islands/Groups of Islands'),
('UM', '84', 'Howland Island', 'Islands/Groups of Islands'),
('UM', '86', 'Jarvis Island', 'Islands/Groups of Islands'),
('UM', '89', 'Kingman Reef', 'Islands/Groups of Islands'),
('UM', '95', 'Palmyra Atoll', 'Islands/Groups of Islands'),
('US', 'AK', 'Alaska', 'State'),
('US', 'AL', 'Alabama', 'State'),
('US', 'AR', 'Arkansas', 'State'),
('US', 'AS', 'American Samoa (see also separate entry under AS)', 'Outlying area'),
('US', 'AZ', 'Arizona', 'State'),
('US', 'CA', 'California', 'State'),
('US', 'CO', 'Colorado', 'State'),
('US', 'CT', 'Connecticut', 'State'),
('US', 'DC', 'District of Columbia', 'District'),
('US', 'DE', 'Delaware', 'State'),
('US', 'FL', 'Florida', 'State'),
('US', 'GA', 'Georgia', 'State'),
('US', 'GU', 'Guam (see also separate entry under GU)', 'Outlying area'),
('US', 'HI', 'Hawaii', 'State'),
('US', 'IA', 'Iowa', 'State'),
('US', 'ID', 'Idaho', 'State'),
('US', 'IL', 'Illinois', 'State'),
('US', 'IN', 'Indiana', 'State'),
('US', 'KS', 'Kansas', 'State'),
('US', 'KY', 'Kentucky', 'State'),
('US', 'LA', 'Louisiana', 'State'),
('US', 'MA', 'Massachusetts', 'State'),
('US', 'MD', 'Maryland', 'State'),
('US', 'ME', 'Maine', 'State'),
('US', 'MI', 'Michigan', 'State'),
('US', 'MN', 'Minnesota', 'State'),
('US', 'MO', 'Missouri', 'State'),
('US', 'MP', 'Northern Mariana Islands (see also separate entry MP)', 'Outlying area'),
('US', 'MS', 'Mississippi', 'State'),
('US', 'MT', 'Montana', 'State'),
('US', 'NC', 'North Carolina', 'State'),
('US', 'ND', 'North Dakota', 'State'),
('US', 'NE', 'Nebraska', 'State'),
('US', 'NH', 'New Hampshire', 'State'),
('US', 'NJ', 'New Jersey', 'State'),
('US', 'NM', 'New Mexico', 'State'),
('US', 'NV', 'Nevada', 'State'),
('US', 'NY', 'New York', 'State'),
('US', 'OH', 'Ohio', 'State'),
('US', 'OK', 'Oklahoma', 'State'),
('US', 'OR', 'Oregon', 'State'),
('US', 'PA', 'Pennsylvania', 'State'),
('US', 'PR', 'Puerto Rico (see also separate entry under PR)', 'Outlying area'),
('US', 'RI', 'Rhode Island', 'State'),
('US', 'SC', 'South Carolina', 'State'),
('US', 'SD', 'South Dakota', 'State'),
('US', 'TN', 'Tennessee', 'State'),
('US', 'TX', 'Texas', 'State'),
('US', 'UM', 'U.S. Minor Outlying Islands (cf. separate entry UM)', 'Outlying area'),
('US', 'UT', 'Utah', 'State'),
('US', 'VA', 'Virginia', 'State'),
('US', 'VI', 'Virgin Islands of the U.S. (see also separate entry VI)', 'Outlying area'),
('US', 'VT', 'Vermont', 'State'),
('US', 'WA', 'Washington', 'State'),
('US', 'WI', 'Wisconsin', 'State'),
('US', 'WV', 'West Virginia', 'State'),
('US', 'WY', 'Wyoming', 'State'),
('UY', 'AR', 'Artigas', ''),
('UY', 'CA', 'Canelones', ''),
('UY', 'CL', 'Cerro Largo', ''),
('UY', 'CO', 'Colonia', ''),
('UY', 'DU', 'Durazno', ''),
('UY', 'FD', 'Florida', ''),
('UY', 'FS', 'Flores', ''),
('UY', 'LA', 'Lavalleja', ''),
('UY', 'MA', 'Maldonado', ''),
('UY', 'MO', 'Montevideo', ''),
('UY', 'PA', 'Paysandú', ''),
('UY', 'RN', 'Río Negro', ''),
('UY', 'RO', 'Rocha', ''),
('UY', 'RV', 'Rivera', ''),
('UY', 'SA', 'Salto', ''),
('UY', 'SJ', 'San José', ''),
('UY', 'SO', 'Soriano', ''),
('UY', 'TA', 'Tacuarembó', ''),
('UY', 'TT', 'Treinta y Tres', ''),
('UZ', 'AN', 'Andijon', 'Region'),
('UZ', 'BU', 'Bukhoro', 'Region'),
('UZ', 'FA', 'Farghona', 'Region'),
('UZ', 'JI', 'Jizzakh', 'Region'),
('UZ', 'KH', 'Khorazm', 'Region'),
('UZ', 'NG', 'Namangan', 'Region'),
('UZ', 'NW', 'Nawoiy', 'Region'),
('UZ', 'QA', 'Qashqadaryo', 'Region'),
('UZ', 'QR', 'Qoraqalpoghiston Respublikasi', 'Republic'),
('UZ', 'SA', 'Samarqand', 'Region'),
('UZ', 'SI', 'Sirdaryo', 'Region'),
('UZ', 'SU', 'Surkhondaryo', 'Region'),
('UZ', 'TK', 'Toshkent', 'City'),
('UZ', 'TO', 'Toshkent', 'Region'),
('UZ', 'XO', 'Xorazm', 'Region'),
('VC', '01', 'Charlotte', ''),
('VC', '02', 'Saint Andrew', ''),
('VC', '03', 'Saint David', ''),
('VC', '04', 'Saint George', ''),
('VC', '05', 'Saint Patrick', ''),
('VC', '06', 'Grenadines', ''),
('VE', 'A', 'Distrito Federal', 'Federal district'),
('VE', 'B', 'Anzoátegui', 'State'),
('VE', 'C', 'Apure', 'State'),
('VE', 'D', 'Aragua', 'State'),
('VE', 'E', 'Barinas', 'State'),
('VE', 'F', 'Bolívar', 'State'),
('VE', 'G', 'Carabobo', 'State'),
('VE', 'H', 'Cojedes', 'State'),
('VE', 'I', 'Falcón', 'State'),
('VE', 'J', 'Guárico', 'State'),
('VE', 'K', 'Lara', 'State'),
('VE', 'L', 'Mérida', 'State'),
('VE', 'M', 'Miranda', 'State'),
('VE', 'N', 'Monagas', 'State'),
('VE', 'O', 'Nueva Esparta', 'State'),
('VE', 'P', 'Portuguesa', 'State'),
('VE', 'R', 'Sucre', 'State'),
('VE', 'S', 'Táchira', 'State'),
('VE', 'T', 'Trujillo', 'State'),
('VE', 'U', 'Yaracuy', 'State'),
('VE', 'V', 'Zulia', 'State'),
('VE', 'W', 'Dependencias Federales', 'Federal dependencies'),
('VE', 'X', 'vargas', 'State'),
('VE', 'Y', 'Delta Amacuro', 'State'),
('VE', 'Z', 'Amazonas', 'State'),
('VN', '01', 'Lai Chau', 'Province'),
('VN', '02', 'Lao Cai', 'Province'),
('VN', '03', 'Ha Giang', 'Province'),
('VN', '04', 'Cao Bang', 'Province'),
('VN', '05', 'Son La', 'Province'),
('VN', '06', 'Yen Bai', 'Province'),
('VN', '07', 'Tuyen Quang', 'Province'),
('VN', '09', 'Lang Son', 'Province'),
('VN', '13', 'Quang Ninh', 'Province'),
('VN', '14', 'Hoa Binh', 'Province'),
('VN', '15', 'Ha Tay', 'Province'),
('VN', '18', 'Ninh Binh', 'Province'),
('VN', '20', 'Thai Binh', 'Province'),
('VN', '21', 'Thanh Hoa', 'Province'),
('VN', '22', 'Nghe An', 'Province'),
('VN', '23', 'Ha Tinh', 'Province'),
('VN', '24', 'Quang Binh', 'Province'),
('VN', '25', 'Quang Tri', 'Province'),
('VN', '26', 'Thua Thien-Hue', 'Province'),
('VN', '27', 'Quang Nam', 'Province'),
('VN', '28', 'Kon Tum', 'Province'),
('VN', '29', 'Quang Ngai', 'Province'),
('VN', '30', 'Gia Lai', 'Province'),
('VN', '31', 'Binh Dinh', 'Province'),
('VN', '32', 'Phu Yen', 'Province'),
('VN', '33', 'Dak Lak', 'Province'),
('VN', '34', 'Khanh Hoa', 'Province'),
('VN', '35', 'Lam Dong', 'Province'),
('VN', '36', 'Ninh Thuan', 'Province'),
('VN', '37', 'Tay Ninh', 'Province'),
('VN', '39', 'Dong Nai', 'Province'),
('VN', '40', 'Binh Thuan', 'Province'),
('VN', '41', 'Long An', 'Province'),
('VN', '43', 'Ba Ria-Vung Tau', 'Province'),
('VN', '44', 'An Giang', 'Province'),
('VN', '45', 'Dong Thap', 'Province'),
('VN', '46', 'Tien Giang', 'Province'),
('VN', '47', 'Kien Giang', 'Province'),
('VN', '49', 'Vinh Long', 'Province'),
('VN', '50', 'Ben Tre', 'Province'),
('VN', '51', 'Tra Vinh', 'Province'),
('VN', '52', 'Soc Trang', 'Province'),
('VN', '53', 'Bac Kan', 'Province'),
('VN', '54', 'Bac Giang', 'Province'),
('VN', '55', 'Bac Lieu', 'Province'),
('VN', '56', 'Bac Ninh', 'Province'),
('VN', '57', 'Binh Duong', 'Province'),
('VN', '58', 'Binh Phuoc', 'Province'),
('VN', '59', 'Ca Mau', 'Province'),
('VN', '61', 'Hai Duong', 'Province'),
('VN', '63', 'Ha Nam', 'Province'),
('VN', '66', 'Hung Yen', 'Province'),
('VN', '67', 'Nam Dinh', 'Province'),
('VN', '68', 'Phu Tho', 'Province'),
('VN', '69', 'Thai Nguyen', 'Province'),
('VN', '70', 'Vinh Phuc', 'Province'),
('VN', '71', 'Dien Bien', 'Province'),
('VN', '72', 'Dak Nong', 'Province'),
('VN', '73', 'Hau Giang', 'Province'),
('VN', 'CT', 'Can Tho', 'Municipality'),
('VN', 'DN', 'Da Nang, thanh pho', 'Municipality'),
('VN', 'HN', 'Ha Noi, thu do', 'Municipality'),
('VN', 'HP', 'Hai Phong', 'Municipality'),
('VN', 'SG', 'Ho Chi Minh, thanh pho [Sai Gon]', 'Municipality'),
('VU', 'MAP', 'Malampa', ''),
('VU', 'PAM', 'Pénama', ''),
('VU', 'SAM', 'Sanma', ''),
('VU', 'SEE', 'Shéfa', ''),
('VU', 'TAE', 'Taféa', ''),
('VU', 'TOB', 'Torba', ''),
('WS', 'AA', 'Alana', ''),
('WS', 'AL', 'Aiga-I-le-Tai', ''),
('WS', 'AT', 'Atua', ''),
('WS', 'FA', 'Fa\'asaleleaga', ''),
('WS', 'GE', 'Gaga\'emauga', ''),
('WS', 'GI', 'Gagaifomauga', ''),
('WS', 'PA', 'Palauli', ''),
('WS', 'SA', 'Satupa \'itea', ''),
('WS', 'TU', 'Tuamasaga', ''),
('WS', 'VF', 'Va\'a-o-Fonoti', ''),
('WS', 'VS', 'Vaisigano', ''),
('YE', 'AB', 'Abyan', 'Governorate'),
('YE', 'AD', '\'Adan', 'Governorate'),
('YE', 'AM', '\'Amran', 'Governorate'),
('YE', 'BA', 'Al Bayda\'', 'Governorate'),
('YE', 'DA', 'A? ?ali\'', 'Governorate'),
('YE', 'DH', 'Dharnar', 'Governorate'),
('YE', 'HD', 'Haqramawt', 'Governorate'),
('YE', 'HJ', 'Hiajjah', 'Governorate'),
('YE', 'HU', 'Al Hudaydah', 'Governorate'),
('YE', 'IB', 'Ibb', 'Governorate'),
('YE', 'JA', 'Al Jawf', 'Governorate'),
('YE', 'LA', 'Lahij', 'Governorate'),
('YE', 'MA', 'Ma\'rib', 'Governorate'),
('YE', 'MR', 'Al Mahrah', 'Governorate'),
('YE', 'MW', 'Al Mahwit', 'Governorate'),
('YE', 'RA', 'Raymah', 'Governorate'),
('YE', 'SA', 'San?a\' [city]', 'Municipality'),
('YE', 'SD', 'Sa\'dah', 'Governorate'),
('YE', 'SH', 'Shabwah', 'Governorate'),
('YE', 'SN', 'San\'a,', 'Governorate'),
('YE', 'TA', 'Ta\'izz', 'Governorate'),
('ZA', 'EC', 'Eastern Cape', ''),
('ZA', 'FS', 'Free State', ''),
('ZA', 'GT', 'Gauteng', ''),
('ZA', 'LP', 'Limpopo', ''),
('ZA', 'MP', 'Mpumalanga', ''),
('ZA', 'NC', 'Northern Cape', ''),
('ZA', 'NL', 'Kwazulu-Natal', ''),
('ZA', 'NW', 'North-West', ''),
('ZA', 'WC', 'Western Cape', ''),
('ZM', '01', 'Western', ''),
('ZM', '02', 'Central', ''),
('ZM', '03', 'Eastern', ''),
('ZM', '04', 'Luapula', ''),
('ZM', '05', 'Northern', ''),
('ZM', '06', 'North-Western', ''),
('ZM', '07', 'Southern', ''),
('ZM', '08', 'Copperbelt', ''),
('ZM', '09', 'Lusaka', ''),
('ZW', 'BU', 'Bulawayo', ''),
('ZW', 'HA', 'Harare', ''),
('ZW', 'MA', 'Manicaland', ''),
('ZW', 'MC', 'Mashonaland Central', ''),
('ZW', 'ME', 'Mashonaland East', ''),
('ZW', 'MI', 'Midlands', ''),
('ZW', 'MN', 'Matabeleland North', ''),
('ZW', 'MS', 'Matabeleland South', ''),
('ZW', 'MV', 'Masvingo', ''),
('ZW', 'MW', 'Mashonaland West', '');

-- --------------------------------------------------------

--
-- Table structure for table `mm_coupons`
--

CREATE TABLE `mm_coupons` (
  `id` int(11) UNSIGNED NOT NULL,
  `coupon_name` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `coupon_code` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `coupon_type` enum('percentage','dollar','free') COLLATE utf8_unicode_ci DEFAULT 'percentage',
  `coupon_value` decimal(19,4) NOT NULL,
  `coupon_value_currency` char(3) COLLATE utf8_unicode_ci DEFAULT NULL,
  `description` text COLLATE utf8_unicode_ci,
  `quantity` int(11) NOT NULL DEFAULT '0',
  `start_date` timestamp NULL DEFAULT NULL,
  `end_date` timestamp NULL DEFAULT NULL,
  `recurring_billing_setting` enum('all','first') COLLATE utf8_unicode_ci DEFAULT 'all',
  `is_gift` smallint(1) NOT NULL DEFAULT '0',
  `is_archived` smallint(1) NOT NULL DEFAULT '0',
  `gift_user_id` bigint(20) UNSIGNED NOT NULL,
  `gift_order_item_id` bigint(20) UNSIGNED NOT NULL,
  `date_modified` timestamp NULL DEFAULT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_coupon_restrictions`
--

CREATE TABLE `mm_coupon_restrictions` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `coupon_id` int(11) UNSIGNED NOT NULL,
  `product_id` int(11) UNSIGNED NOT NULL,
  `date_modified` timestamp NULL DEFAULT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_coupon_usage`
--

CREATE TABLE `mm_coupon_usage` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `coupon_id` int(11) UNSIGNED NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `product_id` int(11) UNSIGNED NOT NULL,
  `product_order_item_id` bigint(20) UNSIGNED NOT NULL,
  `date_modified` timestamp NULL DEFAULT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_custom_fields`
--

CREATE TABLE `mm_custom_fields` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `display_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `type` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
  `show_on_my_account` tinyint(4) DEFAULT '1',
  `is_hidden` tinyint(4) DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_custom_field_data`
--

CREATE TABLE `mm_custom_field_data` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `custom_field_id` bigint(20) UNSIGNED NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `value` text COLLATE utf8_unicode_ci NOT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `last_updated` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_custom_field_options`
--

CREATE TABLE `mm_custom_field_options` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `custom_field_id` bigint(20) UNSIGNED NOT NULL,
  `value` varchar(255) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_diagnostic_log`
--

CREATE TABLE `mm_diagnostic_log` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `type` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `ip_address` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `session` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `location` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `line` int(11) DEFAULT NULL,
  `event` text COLLATE utf8_unicode_ci NOT NULL,
  `event_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_email_provider_bundle_mappings`
--

CREATE TABLE `mm_email_provider_bundle_mappings` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `list_type` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
  `bundle_id` int(11) UNSIGNED NOT NULL,
  `list_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email_service_provider_id` int(11) UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_email_provider_mappings`
--

CREATE TABLE `mm_email_provider_mappings` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `member_type_id` int(11) UNSIGNED NOT NULL,
  `list_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `email_service_provider_id` int(11) UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_email_service_providers`
--

CREATE TABLE `mm_email_service_providers` (
  `id` int(11) UNSIGNED NOT NULL,
  `provider_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `provider_token` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `username` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `password` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `api_key` text COLLATE utf8_unicode_ci,
  `additional_data` text COLLATE utf8_unicode_ci,
  `active` smallint(5) UNSIGNED NOT NULL DEFAULT '0',
  `prospect_list_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `cancellation_list_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_email_service_providers`
--

INSERT INTO `mm_email_service_providers` (`id`, `provider_name`, `provider_token`, `username`, `password`, `api_key`, `additional_data`, `active`, `prospect_list_id`, `cancellation_list_id`) VALUES
(1, 'None', 'default', NULL, NULL, NULL, NULL, 1, NULL, NULL),
(2, 'ActiveCampaign', 'activecampaign', NULL, NULL, NULL, NULL, 0, NULL, NULL),
(3, 'MailChimp', 'mailchimp', NULL, NULL, NULL, NULL, 0, NULL, NULL),
(4, 'iContact', 'icontact', NULL, NULL, '3Nnuk4Mt6sFTbDzzRQe6piN6S9qq2TLW', NULL, 0, NULL, NULL),
(5, 'AWeber', 'aweber', NULL, NULL, NULL, NULL, 0, NULL, NULL),
(6, 'GetResponse', 'getresponse', NULL, NULL, NULL, NULL, 0, NULL, NULL);

-- --------------------------------------------------------

--
-- Table structure for table `mm_employee_accounts`
--

CREATE TABLE `mm_employee_accounts` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `display_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `first_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `last_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `phone` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `access_restrictions` longtext COLLATE utf8_unicode_ci NOT NULL,
  `allow_export` tinyint(4) NOT NULL DEFAULT '0',
  `role_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `user_id` bigint(20) UNSIGNED DEFAULT NULL,
  `is_default` tinyint(4) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_employee_accounts`
--

INSERT INTO `mm_employee_accounts` (`id`, `display_name`, `first_name`, `last_name`, `email`, `phone`, `access_restrictions`, `allow_export`, `role_id`, `user_id`, `is_default`) VALUES
(1, 'admin', NULL, NULL, 'cqthanh.zx@gmail.com', NULL, '', 0, 'administrator', 1, 1);

-- --------------------------------------------------------

--
-- Table structure for table `mm_flatrate_shipping_options`
--

CREATE TABLE `mm_flatrate_shipping_options` (
  `id` bigint(20) NOT NULL,
  `option_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `rate` decimal(19,4) NOT NULL,
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'USD'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_login_token`
--

CREATE TABLE `mm_login_token` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `login_token` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `age` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_login_token`
--

INSERT INTO `mm_login_token` (`id`, `login_token`, `user_id`, `age`) VALUES
(1, '7ta3zSGf8sMoDPm1o0aR88UxwSqPfLgN', 2, '2018-12-14 08:54:29');

-- --------------------------------------------------------

--
-- Table structure for table `mm_log_api`
--

CREATE TABLE `mm_log_api` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `request` varchar(355) COLLATE utf8_unicode_ci NOT NULL,
  `message` text COLLATE utf8_unicode_ci NOT NULL,
  `ipaddress` varchar(355) COLLATE utf8_unicode_ci NOT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_log_events`
--

CREATE TABLE `mm_log_events` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `event_type` varchar(100) COLLATE utf8_unicode_ci DEFAULT NULL,
  `ip` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `referrer` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `additional_params` text COLLATE utf8_unicode_ci NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `date_modified` timestamp NULL DEFAULT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_log_events`
--

INSERT INTO `mm_log_events` (`id`, `event_type`, `ip`, `url`, `referrer`, `additional_params`, `user_id`, `date_modified`, `date_added`) VALUES
(1, 'email', '', '', '', 'a:5:{s:16:\"email-to-address\";s:17:\"cqthanh@gmail.com\";s:18:\"email-cc-addresses\";s:0:\"\";s:18:\"email-from-address\";s:20:\"cqthanh.zx@gmail.com\";s:13:\"email-subject\";s:14:\"Welcome Thanh!\";s:10:\"email-body\";s:406:\"Hi Thanh,\n\nThanks for joining our community!\n\nYou can login with the following credentials:\nUsername: cqthanh@gmail.com\nPassword: ## password hidden for security ##\n\n<a href=\"http://localhost/wordpress/home/?reftok=7ta3zSGf8sMoDPm1o0aR88UxwSqPfLgN\">Click here to login</a>\n\nIf you have any questions, feel free to contact us at <a href=\"mailto:cqthanh.zx@gmail.com\">cqthanh.zx@gmail.com</a>.\n\nThanks!\nadmin\";}', 2, '2018-12-13 18:54:30', '2018-12-13 18:54:30'),
(2, 'access-rights', '', '', '', 'a:3:{s:12:\"access-event\";s:13:\"mm_member_add\";s:9:\"access-id\";s:1:\"1\";s:23:\"access-is-complimentary\";s:5:\"false\";}', 2, '2018-12-13 18:54:30', '2018-12-13 18:54:30');

-- --------------------------------------------------------

--
-- Table structure for table `mm_membership_levels`
--

CREATE TABLE `mm_membership_levels` (
  `id` int(11) UNSIGNED NOT NULL,
  `reference_key` varchar(6) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(191) COLLATE utf8_unicode_ci NOT NULL,
  `is_free` tinyint(4) NOT NULL DEFAULT '0',
  `is_default` tinyint(4) NOT NULL DEFAULT '0',
  `description` text COLLATE utf8_unicode_ci,
  `wp_role` varchar(120) COLLATE utf8_unicode_ci DEFAULT 'mm-ignore-role',
  `default_product_id` int(11) UNSIGNED DEFAULT NULL,
  `status` tinyint(4) NOT NULL,
  `email_subject` text COLLATE utf8_unicode_ci NOT NULL,
  `email_body` text COLLATE utf8_unicode_ci NOT NULL,
  `email_from_id` bigint(20) UNSIGNED NOT NULL,
  `welcome_email_enabled` tinyint(4) DEFAULT '1',
  `expire_amount` int(10) DEFAULT NULL,
  `expire_period` enum('days','weeks','months') COLLATE utf8_unicode_ci DEFAULT 'months',
  `expires` tinyint(4) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_membership_levels`
--

INSERT INTO `mm_membership_levels` (`id`, `reference_key`, `name`, `is_free`, `is_default`, `description`, `wp_role`, `default_product_id`, `status`, `email_subject`, `email_body`, `email_from_id`, `welcome_email_enabled`, `expire_amount`, `expire_period`, `expires`) VALUES
(1, '', 'Free Membership', 1, 1, 'Default Free Membership', 'mm-ignore-role', NULL, 1, 'Welcome [MM_Member_Data name=\'firstName\']!', 'Hi [MM_Member_Data name=\'firstName\'],\n\nThanks for joining our community!\n\nYou can login with the following credentials:\nUsername: [MM_Member_Data name=\'username\']\nPassword: [MM_Member_Data name=\'password\']\n\n<a href=\"[MM_CorePage_Link type=\'homepage\' autoLogin=\'true\']\">Click here to login</a>\n\nIf you have any questions, feel free to contact us at <a href=\"mailto:[MM_Employee_Data name=\'email\']\">[MM_Employee_Data name=\'email\']</a>.\n\nThanks!\n[MM_Employee_Data name=\'displayName\']', 1, 1, NULL, 'months', 0);

-- --------------------------------------------------------

--
-- Table structure for table `mm_membership_level_categories`
--

CREATE TABLE `mm_membership_level_categories` (
  `category_id` bigint(20) UNSIGNED NOT NULL,
  `membership_level_id` int(11) UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_membership_level_products`
--

CREATE TABLE `mm_membership_level_products` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `membership_id` int(11) UNSIGNED NOT NULL,
  `product_id` int(11) UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_orders`
--

CREATE TABLE `mm_orders` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `order_number` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `payment_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `affiliate_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `sub_affiliate_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_first_name` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_last_name` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_phone` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_address1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_address2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_city` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_state` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_province` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_postal_code` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_country` varchar(2) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_first_name` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_last_name` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_phone` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_address1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_address2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_city` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_state` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_province` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_postal_code` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_country` char(2) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_option_key` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_option_description` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `subtotal` decimal(19,4) DEFAULT NULL,
  `shipping` decimal(19,4) DEFAULT NULL,
  `discount` decimal(19,4) DEFAULT NULL,
  `tax` decimal(19,4) DEFAULT NULL,
  `total` decimal(19,4) DEFAULT NULL,
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'USD',
  `status` tinyint(4) NOT NULL,
  `ip_address` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `form_submission_id` char(10) COLLATE utf8_unicode_ci DEFAULT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `date_modified` timestamp NULL DEFAULT NULL,
  `is_test` tinyint(1) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_order_items`
--

CREATE TABLE `mm_order_items` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `order_id` bigint(20) UNSIGNED NOT NULL,
  `item_type` smallint(6) NOT NULL,
  `description` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `amount` decimal(19,4) NOT NULL,
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'USD',
  `quantity` int(11) NOT NULL,
  `total` decimal(19,4) NOT NULL,
  `item_id` int(11) UNSIGNED DEFAULT NULL,
  `status` smallint(6) NOT NULL DEFAULT '0',
  `is_recurring` smallint(1) NOT NULL DEFAULT '0',
  `recurring_amount` decimal(19,4) DEFAULT NULL,
  `recurring_discount` decimal(19,4) DEFAULT NULL,
  `trial_amount` decimal(19,4) DEFAULT NULL,
  `trial_frequency` enum('months','days','weeks','years') COLLATE utf8_unicode_ci DEFAULT NULL,
  `trial_duration` int(11) DEFAULT NULL,
  `rebill_period` int(11) DEFAULT NULL,
  `rebill_frequency` enum('months','days','weeks','years') COLLATE utf8_unicode_ci DEFAULT NULL,
  `max_rebills` int(11) DEFAULT NULL,
  `is_gift` tinyint(1) NOT NULL DEFAULT '0',
  `is_test` tinyint(1) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_order_item_access`
--

CREATE TABLE `mm_order_item_access` (
  `order_item_id` bigint(20) UNSIGNED NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `access_type` enum('membership','bundle') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'membership',
  `access_type_id` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_payment_services`
--

CREATE TABLE `mm_payment_services` (
  `id` int(11) UNSIGNED NOT NULL,
  `token` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `settings` longtext COLLATE utf8_unicode_ci NOT NULL,
  `active` smallint(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_payment_services`
--

INSERT INTO `mm_payment_services` (`id`, `token`, `name`, `settings`, `active`) VALUES
(1, 'PAYPAL', 'PayPal', '', 0),
(2, 'AUTHORIZENET', 'Authorize.net', '', 0),
(3, 'AUTHORIZENETCIM', 'Authorize.net CIM', '', 0),
(4, 'BRAINTREE', 'Braintree', '', 0),
(5, 'CHARGIFY', 'Chargify', '', 0),
(6, 'LIMELIGHT', 'Lime Light', '', 0),
(7, 'STRIPE', 'Stripe', '', 0),
(8, 'TWOCHECKOUT', '2Checkout', '', 0),
(9, 'CLICKBANK', 'ClickBank', '', 0),
(10, 'LITLE', 'Litle', '', 0),
(11, 'COINBASE', 'Coinbase (Wallet Required)', '', 0),
(12, 'COINBASEMINIMAL', 'Coinbase (Wallet Ignored)', '', 0),
(13, 'TEST', 'Test Payment Service', '', 0);

-- --------------------------------------------------------

--
-- Table structure for table `mm_posts_access`
--

CREATE TABLE `mm_posts_access` (
  `post_id` bigint(20) UNSIGNED NOT NULL,
  `access_type` enum('member_type','access_tag') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'member_type',
  `access_id` int(11) UNSIGNED NOT NULL,
  `days` char(5) COLLATE utf8_unicode_ci DEFAULT NULL,
  `is_smart_content` tinyint(4) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_products`
--

CREATE TABLE `mm_products` (
  `id` int(11) UNSIGNED NOT NULL,
  `reference_key` varchar(6) COLLATE utf8_unicode_ci NOT NULL,
  `status` tinyint(4) DEFAULT '1',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `sku` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `description` text COLLATE utf8_unicode_ci NOT NULL,
  `price` decimal(20,4) NOT NULL,
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'USD',
  `is_shippable` tinyint(4) NOT NULL,
  `has_trial` tinyint(4) NOT NULL,
  `trial_frequency` enum('months','days','weeks','years') COLLATE utf8_unicode_ci DEFAULT 'months',
  `rebill_period` int(11) NOT NULL,
  `rebill_frequency` enum('months','days','weeks','years') COLLATE utf8_unicode_ci DEFAULT 'months',
  `trial_amount` decimal(20,2) NOT NULL,
  `trial_duration` int(11) DEFAULT NULL,
  `do_limit_trial` tinyint(4) DEFAULT '0',
  `limit_trial_alt_product_id` int(11) UNSIGNED DEFAULT '0',
  `do_limit_payments` tinyint(4) DEFAULT '0',
  `number_of_payments` int(11) DEFAULT NULL,
  `last_modified` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `purchase_confirmation_message` longtext COLLATE utf8_unicode_ci NOT NULL,
  `commission_profile_id` int(11) DEFAULT '-1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_queued_scheduled_events`
--

CREATE TABLE `mm_queued_scheduled_events` (
  `event_id` bigint(20) UNSIGNED NOT NULL,
  `command` tinyint(3) UNSIGNED NOT NULL,
  `queued_date` datetime NOT NULL,
  `batch_id` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `batch_started` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_report_data_cache`
--

CREATE TABLE `mm_report_data_cache` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `query_target` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `query_token` varchar(256) COLLATE utf8_unicode_ci NOT NULL,
  `query_params` mediumtext COLLATE utf8_unicode_ci NOT NULL,
  `param_hash` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `query_data` longtext COLLATE utf8_unicode_ci,
  `status` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `expiration_date` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_scheduled_events`
--

CREATE TABLE `mm_scheduled_events` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `event_type` tinyint(3) UNSIGNED NOT NULL,
  `event_data` text COLLATE utf8_unicode_ci NOT NULL,
  `scheduled_date` datetime NOT NULL,
  `processed_date` datetime DEFAULT NULL,
  `status` tinyint(3) UNSIGNED NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_scheduled_payments`
--

CREATE TABLE `mm_scheduled_payments` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `order_item_id` bigint(20) UNSIGNED NOT NULL,
  `payment_service_id` int(11) UNSIGNED NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_sessions`
--

CREATE TABLE `mm_sessions` (
  `id` varchar(55) COLLATE utf8_unicode_ci NOT NULL,
  `data` longtext COLLATE utf8_unicode_ci NOT NULL,
  `ip_address` varchar(191) COLLATE utf8_unicode_ci NOT NULL,
  `expiration_date` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_sessions`
--

INSERT INTO `mm_sessions` (`id`, `data`, `ip_address`, `expiration_date`) VALUES
('223baede026a8e19c34af86819a9aed6', 'YToxOntzOjIyOiJtbV9tbS1sYXN0LWRlbmllZC1wYWdlIjtpOjE0O30=', '127.0.0.1', '2018-12-20 04:13:17'),
('d6547259ddd0170d01619c1b322aa92b', 'YToxOntzOjEwOiJtbV9wcmV2aWV3IjtzOjMxMjY6Ik86MTA6Ik1NX1ByZXZpZXciOjU6e3M6MjI6IgBNTV9QcmV2aWV3AGFjY2Vzc1RhZ3MiO2E6MDp7fXM6MTY6IgBNTV9QcmV2aWV3AHVzZXIiO086NzoiTU1fVXNlciI6Nzc6e3M6MjE6IgBNTV9Vc2VyAG1lbWJlcnNoaXBJZCI7TjtzOjE1OiIATU1fVXNlcgBzdGF0dXMiO3M6MToiMSI7czoyMjoiAE1NX1VzZXIAcGVuZGluZ1N0YXR1cyI7czoxOiIwIjtzOjIxOiIATU1fVXNlcgBpbXBvcnRlZEZsYWciO3M6MToiMCI7czoyNDoiAE1NX1VzZXIAbGFzdFVwZGF0ZWREYXRlIjtOO3M6MjY6IgBNTV9Vc2VyAHN0YXR1c1VwZGF0ZWREYXRlIjtOO3M6MjI6IgBNTV9Vc2VyAHN0YXR1c01lc3NhZ2UiO3M6MDoiIjtzOjIzOiIATU1fVXNlcgBkYXlzQ2FsY01ldGhvZCI7czo5OiJqb2luX2RhdGUiO3M6MjI6IgBNTV9Vc2VyAGRheXNDYWxjVmFsdWUiO3M6MDoiIjtzOjI1OiIATU1fVXNlcgBiZWNhbWVBY3RpdmVEYXRlIjtOO3M6MTQ6IgBNTV9Vc2VyAHBob25lIjtzOjE0OiIoNTU1KSA1NTUtNTU1NSI7czoxNzoiAE1NX1VzZXIAdXNlcm5hbWUiO3M6MTQ6InNhbXBsZXVzZXJuYW1lIjtzOjE0OiIATU1fVXNlcgBlbWFpbCI7czoxNToic2FtcGxlQHRlc3QuY29tIjtzOjE4OiIATU1fVXNlcgBmaXJzdE5hbWUiO3M6NToiQWRtaW4iO3M6MTc6IgBNTV9Vc2VyAGxhc3ROYW1lIjtzOjQ6IlRlc3QiO3M6MjU6IgBNTV9Vc2VyAHJlZ2lzdHJhdGlvbkRhdGUiO047czoyNToiAE1NX1VzZXIAY2FuY2VsbGF0aW9uRGF0ZSI7TjtzOjIzOiIATU1fVXNlcgBleHBpcmF0aW9uRGF0ZSI7TjtzOjE0OiIATU1fVXNlcgBub3RlcyI7czowOiIiO3M6MjU6IgBNTV9Vc2VyAHN1YnNjcmliZWRMaXN0SWQiO3M6MDoiIjtzOjI5OiIATU1fVXNlcgBzdWJzY3JpYmVkUHJvdmlkZXJJZCI7czowOiIiO3M6MjI6IgBNTV9Vc2VyAGxhc3RMb2dpbkRhdGUiO047czoyNzoiAE1NX1VzZXIAbGFzdExvZ2luSXBBZGRyZXNzIjtzOjA6IiI7czoxOToiAE1NX1VzZXIAbG9naW5Db3VudCI7aTotMTtzOjI0OiIATU1fVXNlcgBwYWdlQWNjZXNzQ291bnQiO2k6LTE7czoxOToiAE1NX1VzZXIAZW1haWxDb3VudCI7aTotMTtzOjI5OiIATU1fVXNlcgB3ZWxjb21lRW1haWxTZW50RGF0ZSI7TjtzOjIzOiIATU1fVXNlcgBiaWxsaW5nQWRkcmVzcyI7czoxMjoiMTIzIEZha2UgU3QuIjtzOjIwOiIATU1fVXNlcgBiaWxsaW5nQ2l0eSI7czo3OiJOb3doZXJlIjtzOjIxOiIATU1fVXNlcgBiaWxsaW5nU3RhdGUiO3M6MjoiVFgiO3M6MTk6IgBNTV9Vc2VyAGJpbGxpbmdaaXAiO3M6NToiNTU1NTUiO3M6MjM6IgBNTV9Vc2VyAGJpbGxpbmdDb3VudHJ5IjtzOjI6IlVTIjtzOjI0OiIATU1fVXNlcgBzaGlwcGluZ0FkZHJlc3MiO3M6MTI6IjEyMyBGYWtlIFN0LiI7czoyMToiAE1NX1VzZXIAc2hpcHBpbmdDaXR5IjtzOjc6Ik5vd2hlcmUiO3M6MjI6IgBNTV9Vc2VyAHNoaXBwaW5nU3RhdGUiO3M6MjoiVFgiO3M6MjA6IgBNTV9Vc2VyAHNoaXBwaW5nWmlwIjtzOjU6IjU1NTU1IjtzOjI0OiIATU1fVXNlcgBzaGlwcGluZ0NvdW50cnkiO3M6MjoiVVMiO3M6MjI6IgBNTV9Vc2VyAHRvdGFsUGF5bWVudHMiO2k6MDtzOjIxOiIATU1fVXNlcgB0b3RhbFJlZnVuZHMiO2k6MDtzOjI3OiIATU1fVXNlcgBmb3Jnb3RQYXNzd29yZEhhc2giO047czoxOToiAE1NX1VzZXIAbWVtYmVyc2hpcCI7TjtzOjI1OiIATU1fVXNlcgBsYXN0TWVtYmVyc2hpcElkIjtzOjA6IiI7czoyNzoiAE1NX1VzZXIAbGFzdE1lbWJlcnNoaXBOYW1lIjtzOjA6IiI7czoyNzoiAE1NX1VzZXIAbGFzdERheXNDYWxjTWV0aG9kIjtzOjA6IiI7czoyNjoiAE1NX1VzZXIAbGFzdERheXNDYWxjVmFsdWUiO3M6MDoiIjtzOjI5OiIATU1fVXNlcgBsYXN0Q2FuY2VsbGF0aW9uRGF0ZSI7czowOiIiO3M6Mjc6IgBNTV9Vc2VyAGxhc3RFeHBpcmF0aW9uRGF0ZSI7czowOiIiO3M6MjI6IgBNTV9Vc2VyAGxhc3RGaXJzdE5hbWUiO3M6MDoiIjtzOjIxOiIATU1fVXNlcgBsYXN0TGFzdE5hbWUiO3M6MDoiIjtzOjE4OiIATU1fVXNlcgBsYXN0RW1haWwiO3M6MDoiIjtzOjIxOiIATU1fVXNlcgBsYXN0VXNlcm5hbWUiO3M6MDoiIjtzOjE4OiIATU1fVXNlcgBsYXN0UGhvbmUiO3M6MDoiIjtzOjE4OiIATU1fVXNlcgBsYXN0Tm90ZXMiO3M6MDoiIjtzOjE5OiIATU1fVXNlcgBsYXN0U3RhdHVzIjtzOjA6IiI7czoyMzoiAE1NX1VzZXIAbGFzdFN0YXR1c05hbWUiO3M6MDoiIjtzOjI3OiIATU1fVXNlcgBsYXN0QmlsbGluZ0FkZHJlc3MiO3M6MDoiIjtzOjI0OiIATU1fVXNlcgBsYXN0QmlsbGluZ0NpdHkiO3M6MDoiIjtzOjI1OiIATU1fVXNlcgBsYXN0QmlsbGluZ1N0YXRlIjtzOjA6IiI7czoyMzoiAE1NX1VzZXIAbGFzdEJpbGxpbmdaaXAiO3M6MDoiIjtzOjI3OiIATU1fVXNlcgBsYXN0QmlsbGluZ0NvdW50cnkiO3M6MDoiIjtzOjI4OiIATU1fVXNlcgBsYXN0U2hpcHBpbmdBZGRyZXNzIjtzOjA6IiI7czoyNToiAE1NX1VzZXIAbGFzdFNoaXBwaW5nQ2l0eSI7czowOiIiO3M6MjY6IgBNTV9Vc2VyAGxhc3RTaGlwcGluZ1N0YXRlIjtzOjA6IiI7czoyNDoiAE1NX1VzZXIAbGFzdFNoaXBwaW5nWmlwIjtzOjA6IiI7czoyODoiAE1NX1VzZXIAbGFzdFNoaXBwaW5nQ291bnRyeSI7czowOiIiO3M6MjI6IgBNTV9Vc2VyAHN0YXR1c1VwZGF0ZWQiO2I6MDtzOjI5OiIATU1fVXNlcgBzZW5kV2VsY29tZUVtYWlsRmxhZyI7YjoxO3M6MzU6IgBNTV9Vc2VyAG1lbWJlcnNoaXBMZXZlbENoYW5nZWRGbGFnIjtiOjA7czozMToiAE1NX1VzZXIAbGFzdEZvcmdvdFBhc3N3b3JkSGFzaCI7TjtzOjI2OiIATU1fVXNlcgBvcmlnaW5BZmZpbGlhdGVJZCI7czowOiIiO3M6Mjk6IgBNTV9Vc2VyAG9yaWdpblN1YmFmZmlsaWF0ZUlkIjtzOjA6IiI7czoyMDoiAE1NX1VzZXIAaXNDU1ZJbXBvcnQiO2I6MDtzOjIyOiIATU1fVXNlcgBmb3Jnb3R0ZW5GbGFnIjtzOjE6IjAiO3M6NToiACoAaWQiO2k6MDtzOjE2OiIATU1fRW50aXR5AHZhbGlkIjtiOjE7czoxODoiAE1NX0VudGl0eQBhdXRoS2V5IjtzOjA6IiI7czoxNzoiACoAbm90aWZ5U2VydmljZXMiO2I6MTt9czoxNjoiAE1NX1ByZXZpZXcAZGF5cyI7aTowO3M6MjQ6IgBNTV9QcmV2aWV3AG1lbWJlclR5cGVJZCI7aTowO3M6Mjg6IgBNTV9QcmV2aWV3AGFjY2Vzc1RhZ0FwcGxpZWQiO047fSI7fQ==', '127.0.0.1', '2018-12-20 04:13:19');

-- --------------------------------------------------------

--
-- Table structure for table `mm_shipping_methods`
--

CREATE TABLE `mm_shipping_methods` (
  `id` int(11) UNSIGNED NOT NULL,
  `token` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `settings` longtext COLLATE utf8_unicode_ci NOT NULL,
  `active` smallint(6) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_shipping_methods`
--

INSERT INTO `mm_shipping_methods` (`id`, `token`, `name`, `settings`, `active`) VALUES
(1, 'FLATRATE', 'Flat Rate', '', 1);

-- --------------------------------------------------------

--
-- Table structure for table `mm_smarttags`
--

CREATE TABLE `mm_smarttags` (
  `id` int(11) UNSIGNED NOT NULL,
  `group_id` int(11) UNSIGNED NOT NULL,
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `visible` tinyint(4) NOT NULL DEFAULT '1',
  `autoload` tinyint(1) NOT NULL DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_smarttags`
--

INSERT INTO `mm_smarttags` (`id`, `group_id`, `name`, `visible`, `autoload`) VALUES
(100, 1, 'MM_Content_Data', 1, 1),
(101, 1, 'MM_Content_Link', 1, 1),
(200, 2, 'MM_CorePage_Link', 1, 1),
(300, 3, 'MM_CustomField_Data', 1, 1),
(400, 4, 'MM_Employee_Data', 1, 1),
(500, 5, 'MM_Error_Message', 1, 1),
(600, 6, 'MM_Form', 1, 1),
(601, 6, 'MM_Form_Section', 1, 0),
(602, 6, 'MM_Form_Field', 1, 0),
(603, 6, 'MM_Form_Data', 1, 0),
(604, 6, 'MM_Form_Message', 1, 0),
(605, 6, 'MM_Form_Button', 1, 0),
(606, 6, 'MM_Form_Subsection', 1, 0),
(700, 7, 'MM_Member_Data', 1, 1),
(701, 7, 'MM_Member_Link', 1, 1),
(800, 8, 'MM_Order_Data', 1, 1),
(801, 8, 'MM_Purchase_Link', 1, 1),
(900, 9, 'MM_Access_Decision', 1, 1),
(901, 9, 'MM_Affiliate_Decision', 1, 1),
(902, 9, 'MM_Custom_Decision', 1, 1),
(903, 9, 'MM_Member_Decision', 1, 1),
(904, 9, 'MM_Order_Decision', 1, 1),
(905, 9, 'MM_Order_Subdecision', 1, 1),
(1000, 10, 'MM_Product_Data', 1, 1),
(1100, 11, 'MM_Affiliate_Data', 1, 1);

-- --------------------------------------------------------

--
-- Table structure for table `mm_smarttag_groups`
--

CREATE TABLE `mm_smarttag_groups` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `parent_id` bigint(20) UNSIGNED DEFAULT '0',
  `name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `visible` tinyint(4) NOT NULL DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_smarttag_groups`
--

INSERT INTO `mm_smarttag_groups` (`id`, `parent_id`, `name`, `visible`) VALUES
(1, 0, 'Content', 1),
(2, 0, 'Core Pages', 1),
(3, 0, 'Custom Fields', 1),
(4, 0, 'Employees', 1),
(5, 0, 'Errors', 1),
(6, 0, 'Forms', 1),
(7, 0, 'Members', 1),
(8, 0, 'Orders', 1),
(9, 0, 'Decisions', 1),
(10, 0, 'Products', 1),
(11, 0, 'Affiliates', 0);

-- --------------------------------------------------------

--
-- Table structure for table `mm_social_login_linked_profiles`
--

CREATE TABLE `mm_social_login_linked_profiles` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `provider_id` bigint(20) NOT NULL,
  `unique_id` varchar(191) COLLATE utf8_unicode_ci NOT NULL,
  `user_id` bigint(20) NOT NULL,
  `removable` tinyint(1) DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_social_login_providers`
--

CREATE TABLE `mm_social_login_providers` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `token` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `active` tinyint(1) DEFAULT '0',
  `api_key` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `api_secret` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `allow_signups` tinyint(4) DEFAULT '1',
  `signup_membership_level` bigint(20) DEFAULT '0',
  `settings` longtext COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_top_level_domains`
--

CREATE TABLE `mm_top_level_domains` (
  `suffix` varchar(55) COLLATE utf8_unicode_ci NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_transaction_key`
--

CREATE TABLE `mm_transaction_key` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `transaction_key` varchar(32) COLLATE utf8_unicode_ci NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL,
  `order_id` bigint(20) UNSIGNED NOT NULL,
  `age` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_transaction_log`
--

CREATE TABLE `mm_transaction_log` (
  `id` bigint(20) NOT NULL,
  `order_id` bigint(20) UNSIGNED NOT NULL,
  `order_item_id` bigint(20) UNSIGNED DEFAULT NULL,
  `amount` decimal(19,4) NOT NULL,
  `currency` char(3) COLLATE utf8_unicode_ci NOT NULL DEFAULT 'USD',
  `description` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `payment_service_id` int(11) UNSIGNED DEFAULT NULL,
  `payment_service_detail_id` bigint(20) UNSIGNED DEFAULT NULL,
  `transaction_type` int(11) UNSIGNED NOT NULL,
  `transaction_date` datetime NOT NULL,
  `is_test` tinyint(4) NOT NULL DEFAULT '0',
  `refund_id` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_user_data`
--

CREATE TABLE `mm_user_data` (
  `wp_user_id` bigint(20) NOT NULL,
  `membership_level_id` int(11) UNSIGNED NOT NULL,
  `status` tinyint(4) NOT NULL,
  `pending_status` tinyint(4) NOT NULL DEFAULT '0',
  `imported` tinyint(4) NOT NULL DEFAULT '0',
  `status_message` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `days_calc_method` enum('join_date','custom_date','fixed') COLLATE utf8_unicode_ci NOT NULL DEFAULT 'join_date',
  `days_calc_value` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `notes` text COLLATE utf8_unicode_ci,
  `first_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `last_name` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `phone` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_address1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_address2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_city` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_state` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_province` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_postal_code` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `billing_country` varchar(2) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_address1` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_address2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_city` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_state` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_province` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_postal_code` varchar(16) COLLATE utf8_unicode_ci DEFAULT NULL,
  `shipping_country` varchar(2) COLLATE utf8_unicode_ci DEFAULT NULL,
  `subscribed_provider_id` int(11) UNSIGNED DEFAULT NULL,
  `subscribed_list_id` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `origin_affiliate_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `origin_subaffiliate_id` varchar(255) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `became_active` timestamp NULL DEFAULT NULL,
  `welcome_email_sent` timestamp NULL DEFAULT NULL,
  `forgotten` tinyint(4) NOT NULL DEFAULT '0',
  `last_login_date` timestamp NULL DEFAULT NULL,
  `status_updated` timestamp NULL DEFAULT NULL,
  `cancellation_date` timestamp NULL DEFAULT NULL,
  `expiration_date` timestamp NULL DEFAULT NULL,
  `last_updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_user_data`
--

INSERT INTO `mm_user_data` (`wp_user_id`, `membership_level_id`, `status`, `pending_status`, `imported`, `status_message`, `days_calc_method`, `days_calc_value`, `notes`, `first_name`, `last_name`, `phone`, `billing_address1`, `billing_address2`, `billing_city`, `billing_state`, `billing_province`, `billing_postal_code`, `billing_country`, `shipping_address1`, `shipping_address2`, `shipping_city`, `shipping_state`, `shipping_province`, `shipping_postal_code`, `shipping_country`, `subscribed_provider_id`, `subscribed_list_id`, `origin_affiliate_id`, `origin_subaffiliate_id`, `became_active`, `welcome_email_sent`, `forgotten`, `last_login_date`, `status_updated`, `cancellation_date`, `expiration_date`, `last_updated`) VALUES
(2, 1, 1, 0, 0, '', 'join_date', '', '', 'Thanh', 'Che', '0967077834', '', NULL, '', '', NULL, '', '', '', NULL, '', '', NULL, '', '', 0, '', '', '', '2018-12-13 18:54:29', '2018-12-13 18:54:30', 0, NULL, '2018-12-13 18:54:29', NULL, NULL, '2018-12-13 18:54:29');

-- --------------------------------------------------------

--
-- Table structure for table `mm_user_defined_pages`
--

CREATE TABLE `mm_user_defined_pages` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `name` varchar(128) COLLATE utf8_unicode_ci NOT NULL,
  `url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `icon_type` tinyint(1) DEFAULT '1'
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `mm_version_releases`
--

CREATE TABLE `mm_version_releases` (
  `id` bigint(20) UNSIGNED NOT NULL,
  `version` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `date_added` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `date_modified` timestamp NULL DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

--
-- Dumping data for table `mm_version_releases`
--

INSERT INTO `mm_version_releases` (`id`, `version`, `date_added`, `date_modified`) VALUES
(1, '2.2.8-102', '2018-11-20 23:34:48', '2018-11-20 16:38:56');

-- --------------------------------------------------------

--
-- Table structure for table `wp_commentmeta`
--

CREATE TABLE `wp_commentmeta` (
  `meta_id` bigint(20) UNSIGNED NOT NULL,
  `comment_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `meta_key` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `meta_value` longtext COLLATE utf8mb4_unicode_ci
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `wp_comments`
--

CREATE TABLE `wp_comments` (
  `comment_ID` bigint(20) UNSIGNED NOT NULL,
  `comment_post_ID` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `comment_author` tinytext COLLATE utf8mb4_unicode_ci NOT NULL,
  `comment_author_email` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `comment_author_url` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `comment_author_IP` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `comment_date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `comment_date_gmt` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `comment_content` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `comment_karma` int(11) NOT NULL DEFAULT '0',
  `comment_approved` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '1',
  `comment_agent` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `comment_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `comment_parent` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `user_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_comments`
--

INSERT INTO `wp_comments` (`comment_ID`, `comment_post_ID`, `comment_author`, `comment_author_email`, `comment_author_url`, `comment_author_IP`, `comment_date`, `comment_date_gmt`, `comment_content`, `comment_karma`, `comment_approved`, `comment_agent`, `comment_type`, `comment_parent`, `user_id`) VALUES
(1, 1, 'A WordPress Commenter', 'wapuu@wordpress.example', 'https://wordpress.org/', '', '2018-11-20 23:34:16', '2018-11-20 23:34:16', 'Hi, this is a comment.\nTo get started with moderating, editing, and deleting comments, please visit the Comments screen in the dashboard.\nCommenter avatars come from <a href=\"https://gravatar.com\">Gravatar</a>.', 0, '1', '', '', 0, 0);

-- --------------------------------------------------------

--
-- Table structure for table `wp_links`
--

CREATE TABLE `wp_links` (
  `link_id` bigint(20) UNSIGNED NOT NULL,
  `link_url` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link_image` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link_target` varchar(25) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link_description` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link_visible` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'Y',
  `link_owner` bigint(20) UNSIGNED NOT NULL DEFAULT '1',
  `link_rating` int(11) NOT NULL DEFAULT '0',
  `link_updated` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `link_rel` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `link_notes` mediumtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `link_rss` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT ''
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `wp_options`
--

CREATE TABLE `wp_options` (
  `option_id` bigint(20) UNSIGNED NOT NULL,
  `option_name` varchar(191) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `option_value` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `autoload` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'yes'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_options`
--

INSERT INTO `wp_options` (`option_id`, `option_name`, `option_value`, `autoload`) VALUES
(1, 'siteurl', 'http://renshawspt.local', 'yes'),
(2, 'home', 'http://renshawspt.local', 'yes'),
(3, 'blogname', 'Renshawspt', 'yes'),
(4, 'blogdescription', 'Just another WordPress site', 'yes'),
(5, 'users_can_register', '0', 'yes'),
(6, 'admin_email', 'cqthanh.zx@gmail.com', 'yes'),
(7, 'start_of_week', '1', 'yes'),
(8, 'use_balanceTags', '0', 'yes'),
(9, 'use_smilies', '1', 'yes'),
(10, 'require_name_email', '1', 'yes'),
(11, 'comments_notify', '1', 'yes'),
(12, 'posts_per_rss', '10', 'yes'),
(13, 'rss_use_excerpt', '0', 'yes'),
(14, 'mailserver_url', 'mail.example.com', 'yes'),
(15, 'mailserver_login', 'login@example.com', 'yes'),
(16, 'mailserver_pass', 'password', 'yes'),
(17, 'mailserver_port', '110', 'yes'),
(18, 'default_category', '1', 'yes'),
(19, 'default_comment_status', 'open', 'yes'),
(20, 'default_ping_status', 'open', 'yes'),
(21, 'default_pingback_flag', '1', 'yes'),
(22, 'posts_per_page', '10', 'yes'),
(23, 'date_format', 'F j, Y', 'yes'),
(24, 'time_format', 'g:i a', 'yes'),
(25, 'links_updated_date_format', 'F j, Y g:i a', 'yes'),
(26, 'comment_moderation', '0', 'yes'),
(27, 'moderation_notify', '1', 'yes'),
(28, 'permalink_structure', '/%year%/%monthnum%/%day%/%postname%/', 'yes'),
(29, 'rewrite_rules', 'a:89:{s:11:\"^wp-json/?$\";s:22:\"index.php?rest_route=/\";s:14:\"^wp-json/(.*)?\";s:33:\"index.php?rest_route=/$matches[1]\";s:21:\"^index.php/wp-json/?$\";s:22:\"index.php?rest_route=/\";s:24:\"^index.php/wp-json/(.*)?\";s:33:\"index.php?rest_route=/$matches[1]\";s:47:\"category/(.+?)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:52:\"index.php?category_name=$matches[1]&feed=$matches[2]\";s:42:\"category/(.+?)/(feed|rdf|rss|rss2|atom)/?$\";s:52:\"index.php?category_name=$matches[1]&feed=$matches[2]\";s:23:\"category/(.+?)/embed/?$\";s:46:\"index.php?category_name=$matches[1]&embed=true\";s:35:\"category/(.+?)/page/?([0-9]{1,})/?$\";s:53:\"index.php?category_name=$matches[1]&paged=$matches[2]\";s:17:\"category/(.+?)/?$\";s:35:\"index.php?category_name=$matches[1]\";s:44:\"tag/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:42:\"index.php?tag=$matches[1]&feed=$matches[2]\";s:39:\"tag/([^/]+)/(feed|rdf|rss|rss2|atom)/?$\";s:42:\"index.php?tag=$matches[1]&feed=$matches[2]\";s:20:\"tag/([^/]+)/embed/?$\";s:36:\"index.php?tag=$matches[1]&embed=true\";s:32:\"tag/([^/]+)/page/?([0-9]{1,})/?$\";s:43:\"index.php?tag=$matches[1]&paged=$matches[2]\";s:14:\"tag/([^/]+)/?$\";s:25:\"index.php?tag=$matches[1]\";s:45:\"type/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:50:\"index.php?post_format=$matches[1]&feed=$matches[2]\";s:40:\"type/([^/]+)/(feed|rdf|rss|rss2|atom)/?$\";s:50:\"index.php?post_format=$matches[1]&feed=$matches[2]\";s:21:\"type/([^/]+)/embed/?$\";s:44:\"index.php?post_format=$matches[1]&embed=true\";s:33:\"type/([^/]+)/page/?([0-9]{1,})/?$\";s:51:\"index.php?post_format=$matches[1]&paged=$matches[2]\";s:15:\"type/([^/]+)/?$\";s:33:\"index.php?post_format=$matches[1]\";s:48:\".*wp-(atom|rdf|rss|rss2|feed|commentsrss2)\\.php$\";s:18:\"index.php?feed=old\";s:20:\".*wp-app\\.php(/.*)?$\";s:19:\"index.php?error=403\";s:18:\".*wp-register.php$\";s:23:\"index.php?register=true\";s:32:\"feed/(feed|rdf|rss|rss2|atom)/?$\";s:27:\"index.php?&feed=$matches[1]\";s:27:\"(feed|rdf|rss|rss2|atom)/?$\";s:27:\"index.php?&feed=$matches[1]\";s:8:\"embed/?$\";s:21:\"index.php?&embed=true\";s:20:\"page/?([0-9]{1,})/?$\";s:28:\"index.php?&paged=$matches[1]\";s:41:\"comments/feed/(feed|rdf|rss|rss2|atom)/?$\";s:42:\"index.php?&feed=$matches[1]&withcomments=1\";s:36:\"comments/(feed|rdf|rss|rss2|atom)/?$\";s:42:\"index.php?&feed=$matches[1]&withcomments=1\";s:17:\"comments/embed/?$\";s:21:\"index.php?&embed=true\";s:44:\"search/(.+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:40:\"index.php?s=$matches[1]&feed=$matches[2]\";s:39:\"search/(.+)/(feed|rdf|rss|rss2|atom)/?$\";s:40:\"index.php?s=$matches[1]&feed=$matches[2]\";s:20:\"search/(.+)/embed/?$\";s:34:\"index.php?s=$matches[1]&embed=true\";s:32:\"search/(.+)/page/?([0-9]{1,})/?$\";s:41:\"index.php?s=$matches[1]&paged=$matches[2]\";s:14:\"search/(.+)/?$\";s:23:\"index.php?s=$matches[1]\";s:47:\"author/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:50:\"index.php?author_name=$matches[1]&feed=$matches[2]\";s:42:\"author/([^/]+)/(feed|rdf|rss|rss2|atom)/?$\";s:50:\"index.php?author_name=$matches[1]&feed=$matches[2]\";s:23:\"author/([^/]+)/embed/?$\";s:44:\"index.php?author_name=$matches[1]&embed=true\";s:35:\"author/([^/]+)/page/?([0-9]{1,})/?$\";s:51:\"index.php?author_name=$matches[1]&paged=$matches[2]\";s:17:\"author/([^/]+)/?$\";s:33:\"index.php?author_name=$matches[1]\";s:69:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/feed/(feed|rdf|rss|rss2|atom)/?$\";s:80:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&feed=$matches[4]\";s:64:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/(feed|rdf|rss|rss2|atom)/?$\";s:80:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&feed=$matches[4]\";s:45:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/embed/?$\";s:74:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&embed=true\";s:57:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/page/?([0-9]{1,})/?$\";s:81:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&paged=$matches[4]\";s:39:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/?$\";s:63:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]\";s:56:\"([0-9]{4})/([0-9]{1,2})/feed/(feed|rdf|rss|rss2|atom)/?$\";s:64:\"index.php?year=$matches[1]&monthnum=$matches[2]&feed=$matches[3]\";s:51:\"([0-9]{4})/([0-9]{1,2})/(feed|rdf|rss|rss2|atom)/?$\";s:64:\"index.php?year=$matches[1]&monthnum=$matches[2]&feed=$matches[3]\";s:32:\"([0-9]{4})/([0-9]{1,2})/embed/?$\";s:58:\"index.php?year=$matches[1]&monthnum=$matches[2]&embed=true\";s:44:\"([0-9]{4})/([0-9]{1,2})/page/?([0-9]{1,})/?$\";s:65:\"index.php?year=$matches[1]&monthnum=$matches[2]&paged=$matches[3]\";s:26:\"([0-9]{4})/([0-9]{1,2})/?$\";s:47:\"index.php?year=$matches[1]&monthnum=$matches[2]\";s:43:\"([0-9]{4})/feed/(feed|rdf|rss|rss2|atom)/?$\";s:43:\"index.php?year=$matches[1]&feed=$matches[2]\";s:38:\"([0-9]{4})/(feed|rdf|rss|rss2|atom)/?$\";s:43:\"index.php?year=$matches[1]&feed=$matches[2]\";s:19:\"([0-9]{4})/embed/?$\";s:37:\"index.php?year=$matches[1]&embed=true\";s:31:\"([0-9]{4})/page/?([0-9]{1,})/?$\";s:44:\"index.php?year=$matches[1]&paged=$matches[2]\";s:13:\"([0-9]{4})/?$\";s:26:\"index.php?year=$matches[1]\";s:58:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/attachment/([^/]+)/?$\";s:32:\"index.php?attachment=$matches[1]\";s:68:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/attachment/([^/]+)/trackback/?$\";s:37:\"index.php?attachment=$matches[1]&tb=1\";s:88:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/attachment/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:49:\"index.php?attachment=$matches[1]&feed=$matches[2]\";s:83:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/attachment/([^/]+)/(feed|rdf|rss|rss2|atom)/?$\";s:49:\"index.php?attachment=$matches[1]&feed=$matches[2]\";s:83:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/attachment/([^/]+)/comment-page-([0-9]{1,})/?$\";s:50:\"index.php?attachment=$matches[1]&cpage=$matches[2]\";s:64:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/attachment/([^/]+)/embed/?$\";s:43:\"index.php?attachment=$matches[1]&embed=true\";s:53:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/([^/]+)/embed/?$\";s:91:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&name=$matches[4]&embed=true\";s:57:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/([^/]+)/trackback/?$\";s:85:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&name=$matches[4]&tb=1\";s:77:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:97:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&name=$matches[4]&feed=$matches[5]\";s:72:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/([^/]+)/(feed|rdf|rss|rss2|atom)/?$\";s:97:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&name=$matches[4]&feed=$matches[5]\";s:65:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/([^/]+)/page/?([0-9]{1,})/?$\";s:98:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&name=$matches[4]&paged=$matches[5]\";s:72:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/([^/]+)/comment-page-([0-9]{1,})/?$\";s:98:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&name=$matches[4]&cpage=$matches[5]\";s:61:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/([^/]+)(?:/([0-9]+))?/?$\";s:97:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&name=$matches[4]&page=$matches[5]\";s:47:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/([^/]+)/?$\";s:32:\"index.php?attachment=$matches[1]\";s:57:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/([^/]+)/trackback/?$\";s:37:\"index.php?attachment=$matches[1]&tb=1\";s:77:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:49:\"index.php?attachment=$matches[1]&feed=$matches[2]\";s:72:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/([^/]+)/(feed|rdf|rss|rss2|atom)/?$\";s:49:\"index.php?attachment=$matches[1]&feed=$matches[2]\";s:72:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/([^/]+)/comment-page-([0-9]{1,})/?$\";s:50:\"index.php?attachment=$matches[1]&cpage=$matches[2]\";s:53:\"[0-9]{4}/[0-9]{1,2}/[0-9]{1,2}/[^/]+/([^/]+)/embed/?$\";s:43:\"index.php?attachment=$matches[1]&embed=true\";s:64:\"([0-9]{4})/([0-9]{1,2})/([0-9]{1,2})/comment-page-([0-9]{1,})/?$\";s:81:\"index.php?year=$matches[1]&monthnum=$matches[2]&day=$matches[3]&cpage=$matches[4]\";s:51:\"([0-9]{4})/([0-9]{1,2})/comment-page-([0-9]{1,})/?$\";s:65:\"index.php?year=$matches[1]&monthnum=$matches[2]&cpage=$matches[3]\";s:38:\"([0-9]{4})/comment-page-([0-9]{1,})/?$\";s:44:\"index.php?year=$matches[1]&cpage=$matches[2]\";s:27:\".?.+?/attachment/([^/]+)/?$\";s:32:\"index.php?attachment=$matches[1]\";s:37:\".?.+?/attachment/([^/]+)/trackback/?$\";s:37:\"index.php?attachment=$matches[1]&tb=1\";s:57:\".?.+?/attachment/([^/]+)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:49:\"index.php?attachment=$matches[1]&feed=$matches[2]\";s:52:\".?.+?/attachment/([^/]+)/(feed|rdf|rss|rss2|atom)/?$\";s:49:\"index.php?attachment=$matches[1]&feed=$matches[2]\";s:52:\".?.+?/attachment/([^/]+)/comment-page-([0-9]{1,})/?$\";s:50:\"index.php?attachment=$matches[1]&cpage=$matches[2]\";s:33:\".?.+?/attachment/([^/]+)/embed/?$\";s:43:\"index.php?attachment=$matches[1]&embed=true\";s:16:\"(.?.+?)/embed/?$\";s:41:\"index.php?pagename=$matches[1]&embed=true\";s:20:\"(.?.+?)/trackback/?$\";s:35:\"index.php?pagename=$matches[1]&tb=1\";s:40:\"(.?.+?)/feed/(feed|rdf|rss|rss2|atom)/?$\";s:47:\"index.php?pagename=$matches[1]&feed=$matches[2]\";s:35:\"(.?.+?)/(feed|rdf|rss|rss2|atom)/?$\";s:47:\"index.php?pagename=$matches[1]&feed=$matches[2]\";s:28:\"(.?.+?)/page/?([0-9]{1,})/?$\";s:48:\"index.php?pagename=$matches[1]&paged=$matches[2]\";s:35:\"(.?.+?)/comment-page-([0-9]{1,})/?$\";s:48:\"index.php?pagename=$matches[1]&cpage=$matches[2]\";s:24:\"(.?.+?)(?:/([0-9]+))?/?$\";s:47:\"index.php?pagename=$matches[1]&page=$matches[2]\";}', 'yes'),
(30, 'hack_file', '0', 'yes'),
(31, 'blog_charset', 'UTF-8', 'yes'),
(32, 'moderation_keys', '', 'no'),
(33, 'active_plugins', 'a:2:{i:0;s:27:\"gdpr-banner/gdpr-banner.php\";i:1;s:21:\"membermouse/index.php\";}', 'yes'),
(34, 'category_base', '', 'yes'),
(35, 'ping_sites', 'http://rpc.pingomatic.com/', 'yes'),
(36, 'comment_max_links', '2', 'yes'),
(37, 'gmt_offset', '0', 'yes'),
(38, 'default_email_category', '1', 'yes'),
(39, 'recently_edited', '', 'no'),
(40, 'template', 'renshawspt', 'yes'),
(41, 'stylesheet', 'renshawspt', 'yes'),
(42, 'comment_whitelist', '1', 'yes'),
(43, 'blacklist_keys', '', 'no'),
(44, 'comment_registration', '0', 'yes'),
(45, 'html_type', 'text/html', 'yes'),
(46, 'use_trackback', '0', 'yes'),
(47, 'default_role', 'subscriber', 'yes'),
(48, 'db_version', '38590', 'yes'),
(49, 'uploads_use_yearmonth_folders', '1', 'yes'),
(50, 'upload_path', '', 'yes'),
(51, 'blog_public', '1', 'yes'),
(52, 'default_link_category', '2', 'yes'),
(53, 'show_on_front', 'posts', 'yes'),
(54, 'tag_base', '', 'yes'),
(55, 'show_avatars', '1', 'yes'),
(56, 'avatar_rating', 'G', 'yes'),
(57, 'upload_url_path', '', 'yes'),
(58, 'thumbnail_size_w', '150', 'yes'),
(59, 'thumbnail_size_h', '150', 'yes'),
(60, 'thumbnail_crop', '1', 'yes'),
(61, 'medium_size_w', '300', 'yes'),
(62, 'medium_size_h', '300', 'yes'),
(63, 'avatar_default', 'mystery', 'yes'),
(64, 'large_size_w', '1024', 'yes'),
(65, 'large_size_h', '1024', 'yes'),
(66, 'image_default_link_type', 'none', 'yes'),
(67, 'image_default_size', '', 'yes'),
(68, 'image_default_align', '', 'yes'),
(69, 'close_comments_for_old_posts', '0', 'yes'),
(70, 'close_comments_days_old', '14', 'yes'),
(71, 'thread_comments', '1', 'yes'),
(72, 'thread_comments_depth', '5', 'yes'),
(73, 'page_comments', '0', 'yes'),
(74, 'comments_per_page', '50', 'yes'),
(75, 'default_comments_page', 'newest', 'yes'),
(76, 'comment_order', 'asc', 'yes'),
(77, 'sticky_posts', 'a:0:{}', 'yes'),
(78, 'widget_categories', 'a:2:{i:2;a:4:{s:5:\"title\";s:0:\"\";s:5:\"count\";i:0;s:12:\"hierarchical\";i:0;s:8:\"dropdown\";i:0;}s:12:\"_multiwidget\";i:1;}', 'yes'),
(79, 'widget_text', 'a:0:{}', 'yes'),
(80, 'widget_rss', 'a:0:{}', 'yes'),
(81, 'uninstall_plugins', 'a:0:{}', 'no'),
(82, 'timezone_string', '', 'yes'),
(83, 'page_for_posts', '0', 'yes'),
(84, 'page_on_front', '0', 'yes'),
(85, 'default_post_format', '0', 'yes'),
(86, 'link_manager_enabled', '0', 'yes'),
(87, 'finished_splitting_shared_terms', '1', 'yes'),
(88, 'site_icon', '0', 'yes'),
(89, 'medium_large_size_w', '768', 'yes'),
(90, 'medium_large_size_h', '0', 'yes'),
(91, 'wp_page_for_privacy_policy', '3', 'yes'),
(92, 'show_comments_cookies_opt_in', '0', 'yes'),
(93, 'initial_db_version', '38590', 'yes'),
(94, 'wp_user_roles', 'a:9:{s:13:\"administrator\";a:2:{s:4:\"name\";s:13:\"Administrator\";s:12:\"capabilities\";a:61:{s:13:\"switch_themes\";b:1;s:11:\"edit_themes\";b:1;s:16:\"activate_plugins\";b:1;s:12:\"edit_plugins\";b:1;s:10:\"edit_users\";b:1;s:10:\"edit_files\";b:1;s:14:\"manage_options\";b:1;s:17:\"moderate_comments\";b:1;s:17:\"manage_categories\";b:1;s:12:\"manage_links\";b:1;s:12:\"upload_files\";b:1;s:6:\"import\";b:1;s:15:\"unfiltered_html\";b:1;s:10:\"edit_posts\";b:1;s:17:\"edit_others_posts\";b:1;s:20:\"edit_published_posts\";b:1;s:13:\"publish_posts\";b:1;s:10:\"edit_pages\";b:1;s:4:\"read\";b:1;s:8:\"level_10\";b:1;s:7:\"level_9\";b:1;s:7:\"level_8\";b:1;s:7:\"level_7\";b:1;s:7:\"level_6\";b:1;s:7:\"level_5\";b:1;s:7:\"level_4\";b:1;s:7:\"level_3\";b:1;s:7:\"level_2\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:17:\"edit_others_pages\";b:1;s:20:\"edit_published_pages\";b:1;s:13:\"publish_pages\";b:1;s:12:\"delete_pages\";b:1;s:19:\"delete_others_pages\";b:1;s:22:\"delete_published_pages\";b:1;s:12:\"delete_posts\";b:1;s:19:\"delete_others_posts\";b:1;s:22:\"delete_published_posts\";b:1;s:20:\"delete_private_posts\";b:1;s:18:\"edit_private_posts\";b:1;s:18:\"read_private_posts\";b:1;s:20:\"delete_private_pages\";b:1;s:18:\"edit_private_pages\";b:1;s:18:\"read_private_pages\";b:1;s:12:\"delete_users\";b:1;s:12:\"create_users\";b:1;s:17:\"unfiltered_upload\";b:1;s:14:\"edit_dashboard\";b:1;s:14:\"update_plugins\";b:1;s:14:\"delete_plugins\";b:1;s:15:\"install_plugins\";b:1;s:13:\"update_themes\";b:1;s:14:\"install_themes\";b:1;s:11:\"update_core\";b:1;s:10:\"list_users\";b:1;s:12:\"remove_users\";b:1;s:13:\"promote_users\";b:1;s:18:\"edit_theme_options\";b:1;s:13:\"delete_themes\";b:1;s:6:\"export\";b:1;}}s:6:\"editor\";a:2:{s:4:\"name\";s:6:\"Editor\";s:12:\"capabilities\";a:34:{s:17:\"moderate_comments\";b:1;s:17:\"manage_categories\";b:1;s:12:\"manage_links\";b:1;s:12:\"upload_files\";b:1;s:15:\"unfiltered_html\";b:1;s:10:\"edit_posts\";b:1;s:17:\"edit_others_posts\";b:1;s:20:\"edit_published_posts\";b:1;s:13:\"publish_posts\";b:1;s:10:\"edit_pages\";b:1;s:4:\"read\";b:1;s:7:\"level_7\";b:1;s:7:\"level_6\";b:1;s:7:\"level_5\";b:1;s:7:\"level_4\";b:1;s:7:\"level_3\";b:1;s:7:\"level_2\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:17:\"edit_others_pages\";b:1;s:20:\"edit_published_pages\";b:1;s:13:\"publish_pages\";b:1;s:12:\"delete_pages\";b:1;s:19:\"delete_others_pages\";b:1;s:22:\"delete_published_pages\";b:1;s:12:\"delete_posts\";b:1;s:19:\"delete_others_posts\";b:1;s:22:\"delete_published_posts\";b:1;s:20:\"delete_private_posts\";b:1;s:18:\"edit_private_posts\";b:1;s:18:\"read_private_posts\";b:1;s:20:\"delete_private_pages\";b:1;s:18:\"edit_private_pages\";b:1;s:18:\"read_private_pages\";b:1;}}s:6:\"author\";a:2:{s:4:\"name\";s:6:\"Author\";s:12:\"capabilities\";a:10:{s:12:\"upload_files\";b:1;s:10:\"edit_posts\";b:1;s:20:\"edit_published_posts\";b:1;s:13:\"publish_posts\";b:1;s:4:\"read\";b:1;s:7:\"level_2\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:12:\"delete_posts\";b:1;s:22:\"delete_published_posts\";b:1;}}s:11:\"contributor\";a:2:{s:4:\"name\";s:11:\"Contributor\";s:12:\"capabilities\";a:5:{s:10:\"edit_posts\";b:1;s:4:\"read\";b:1;s:7:\"level_1\";b:1;s:7:\"level_0\";b:1;s:12:\"delete_posts\";b:1;}}s:10:\"subscriber\";a:2:{s:4:\"name\";s:10:\"Subscriber\";s:12:\"capabilities\";a:2:{s:4:\"read\";b:1;s:7:\"level_0\";b:1;}}s:24:\"mm_role_customer_support\";a:2:{s:4:\"name\";s:7:\"Support\";s:12:\"capabilities\";a:2:{s:4:\"read\";b:1;s:17:\"moderate_comments\";b:1;}}s:22:\"mm_role_customer_sales\";a:2:{s:4:\"name\";s:5:\"Sales\";s:12:\"capabilities\";a:2:{s:4:\"read\";b:1;s:17:\"moderate_comments\";b:1;}}s:15:\"mm_role_analyst\";a:2:{s:4:\"name\";s:7:\"Analyst\";s:12:\"capabilities\";a:2:{s:4:\"read\";b:1;s:17:\"moderate_comments\";b:1;}}s:23:\"mm_role_product_manager\";a:2:{s:4:\"name\";s:15:\"Product Manager\";s:12:\"capabilities\";a:2:{s:4:\"read\";b:1;s:17:\"moderate_comments\";b:1;}}}', 'yes'),
(95, 'fresh_site', '0', 'yes'),
(96, 'widget_search', 'a:2:{i:2;a:1:{s:5:\"title\";s:0:\"\";}s:12:\"_multiwidget\";i:1;}', 'yes'),
(97, 'widget_recent-posts', 'a:2:{i:2;a:2:{s:5:\"title\";s:0:\"\";s:6:\"number\";i:5;}s:12:\"_multiwidget\";i:1;}', 'yes'),
(98, 'widget_recent-comments', 'a:2:{i:2;a:2:{s:5:\"title\";s:0:\"\";s:6:\"number\";i:5;}s:12:\"_multiwidget\";i:1;}', 'yes'),
(99, 'widget_archives', 'a:2:{i:2;a:3:{s:5:\"title\";s:0:\"\";s:5:\"count\";i:0;s:8:\"dropdown\";i:0;}s:12:\"_multiwidget\";i:1;}', 'yes'),
(100, 'widget_meta', 'a:2:{i:2;a:1:{s:5:\"title\";s:0:\"\";}s:12:\"_multiwidget\";i:1;}', 'yes'),
(101, 'sidebars_widgets', 'a:5:{s:19:\"wp_inactive_widgets\";a:0:{}s:9:\"sidebar-1\";a:6:{i:0;s:8:\"search-2\";i:1;s:14:\"recent-posts-2\";i:2;s:17:\"recent-comments-2\";i:3;s:10:\"archives-2\";i:4;s:12:\"categories-2\";i:5;s:6:\"meta-2\";}s:9:\"sidebar-2\";a:0:{}s:9:\"sidebar-3\";a:0:{}s:13:\"array_version\";i:3;}', 'yes'),
(102, 'widget_pages', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(103, 'widget_calendar', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(104, 'widget_media_audio', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(105, 'widget_media_image', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(106, 'widget_media_gallery', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(107, 'widget_media_video', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(108, 'widget_tag_cloud', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(109, 'widget_nav_menu', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(110, 'widget_custom_html', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(111, 'cron', 'a:9:{i:1545272094;a:1:{s:15:\"mm_session_reap\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:21:\"session_reap_interval\";s:4:\"args\";a:0:{}s:8:\"interval\";i:300;}}}i:1545273256;a:1:{s:34:\"wp_privacy_delete_old_export_files\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:6:\"hourly\";s:4:\"args\";a:0:{}s:8:\"interval\";i:3600;}}}i:1545273294;a:1:{s:30:\"mm_check_scheduled_event_queue\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:20:\"queue_check_interval\";s:4:\"args\";a:0:{}s:8:\"interval\";i:1800;}}}i:1545305656;a:3:{s:16:\"wp_version_check\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}s:17:\"wp_update_plugins\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}s:16:\"wp_update_themes\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}}i:1545305931;a:1:{s:12:\"mm_cron_hook\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:10:\"twicedaily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:43200;}}}i:1545348868;a:2:{s:19:\"wp_scheduled_delete\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}s:25:\"delete_expired_transients\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}i:1545348894;a:1:{s:27:\"register_orphaned_schedules\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}i:1545357936;a:1:{s:30:\"wp_scheduled_auto_draft_delete\";a:1:{s:32:\"40cd750bba9870f18aada2478b24840a\";a:3:{s:8:\"schedule\";s:5:\"daily\";s:4:\"args\";a:0:{}s:8:\"interval\";i:86400;}}}s:7:\"version\";i:2;}', 'yes'),
(112, 'theme_mods_twentyseventeen', 'a:2:{s:18:\"custom_css_post_id\";i:-1;s:16:\"sidebars_widgets\";a:2:{s:4:\"time\";i:1542757119;s:4:\"data\";a:4:{s:19:\"wp_inactive_widgets\";a:0:{}s:9:\"sidebar-1\";a:6:{i:0;s:8:\"search-2\";i:1;s:14:\"recent-posts-2\";i:2;s:17:\"recent-comments-2\";i:3;s:10:\"archives-2\";i:4;s:12:\"categories-2\";i:5;s:6:\"meta-2\";}s:9:\"sidebar-2\";a:0:{}s:9:\"sidebar-3\";a:0:{}}}}', 'yes'),
(116, '_site_transient_update_core', 'O:8:\"stdClass\":4:{s:7:\"updates\";a:3:{i:0;O:8:\"stdClass\":10:{s:8:\"response\";s:7:\"upgrade\";s:8:\"download\";s:59:\"https://downloads.wordpress.org/release/wordpress-5.0.2.zip\";s:6:\"locale\";s:5:\"en_US\";s:8:\"packages\";O:8:\"stdClass\":5:{s:4:\"full\";s:59:\"https://downloads.wordpress.org/release/wordpress-5.0.2.zip\";s:10:\"no_content\";s:70:\"https://downloads.wordpress.org/release/wordpress-5.0.2-no-content.zip\";s:11:\"new_bundled\";s:71:\"https://downloads.wordpress.org/release/wordpress-5.0.2-new-bundled.zip\";s:7:\"partial\";b:0;s:8:\"rollback\";b:0;}s:7:\"current\";s:5:\"5.0.2\";s:7:\"version\";s:5:\"5.0.2\";s:11:\"php_version\";s:5:\"5.2.4\";s:13:\"mysql_version\";s:3:\"5.0\";s:11:\"new_bundled\";s:3:\"5.0\";s:15:\"partial_version\";s:0:\"\";}i:1;O:8:\"stdClass\":11:{s:8:\"response\";s:10:\"autoupdate\";s:8:\"download\";s:59:\"https://downloads.wordpress.org/release/wordpress-5.0.2.zip\";s:6:\"locale\";s:5:\"en_US\";s:8:\"packages\";O:8:\"stdClass\":5:{s:4:\"full\";s:59:\"https://downloads.wordpress.org/release/wordpress-5.0.2.zip\";s:10:\"no_content\";s:70:\"https://downloads.wordpress.org/release/wordpress-5.0.2-no-content.zip\";s:11:\"new_bundled\";s:71:\"https://downloads.wordpress.org/release/wordpress-5.0.2-new-bundled.zip\";s:7:\"partial\";b:0;s:8:\"rollback\";b:0;}s:7:\"current\";s:5:\"5.0.2\";s:7:\"version\";s:5:\"5.0.2\";s:11:\"php_version\";s:5:\"5.2.4\";s:13:\"mysql_version\";s:3:\"5.0\";s:11:\"new_bundled\";s:3:\"5.0\";s:15:\"partial_version\";s:0:\"\";s:9:\"new_files\";s:1:\"1\";}i:2;O:8:\"stdClass\":11:{s:8:\"response\";s:10:\"autoupdate\";s:8:\"download\";s:59:\"https://downloads.wordpress.org/release/wordpress-4.9.9.zip\";s:6:\"locale\";s:5:\"en_US\";s:8:\"packages\";O:8:\"stdClass\":5:{s:4:\"full\";s:59:\"https://downloads.wordpress.org/release/wordpress-4.9.9.zip\";s:10:\"no_content\";s:70:\"https://downloads.wordpress.org/release/wordpress-4.9.9-no-content.zip\";s:11:\"new_bundled\";s:71:\"https://downloads.wordpress.org/release/wordpress-4.9.9-new-bundled.zip\";s:7:\"partial\";s:69:\"https://downloads.wordpress.org/release/wordpress-4.9.9-partial-8.zip\";s:8:\"rollback\";s:70:\"https://downloads.wordpress.org/release/wordpress-4.9.9-rollback-8.zip\";}s:7:\"current\";s:5:\"4.9.9\";s:7:\"version\";s:5:\"4.9.9\";s:11:\"php_version\";s:5:\"5.2.4\";s:13:\"mysql_version\";s:3:\"5.0\";s:11:\"new_bundled\";s:3:\"5.0\";s:15:\"partial_version\";s:5:\"4.9.8\";s:9:\"new_files\";s:0:\"\";}}s:12:\"last_checked\";i:1545270345;s:15:\"version_checked\";s:5:\"4.9.8\";s:12:\"translations\";a:0:{}}', 'no'),
(125, 'can_compress_scripts', '1', 'no'),
(130, 'recently_activated', 'a:1:{s:13:\"gdpr/gdpr.php\";i:1545271930;}', 'yes'),
(142, 'mm-last-code-refresh', '1542756871', 'yes'),
(143, 'mm-option-failed-checkin-count', '1', 'yes'),
(144, 'mm-last-checkin', 'MjAxOC0xMi0xOCAwMjowODoyNw==', 'yes'),
(145, 'mm-license-data', 'Tzo4OiJzdGRDbGFzcyI6MTQ6e3M6MjoiaWQiO3M6NToiMTE5OTMiO3M6ODoibWVtYmVySWQiO3M6NDoiMzc4OSI7czo0OiJuYW1lIjtzOjA6IiI7czozOiJ1cmwiO3M6MjY6Imh0dHA6Ly9sb2NhbGhvc3Qvd29yZHByZXNzIjtzOjY6ImFwaUtleSI7czozMjoibnVneHJrY3Bhd3VqbjZ6Nm83Ym1manhqNmNiN2V5djciO3M6OToiYXBpU2VjcmV0IjtzOjMyOiJjNmZxZ3l5eDhtbzY5dGpnb3pxaTIydHR4NW4ydXF2eCI7czoxMjoibWFqb3JWZXJzaW9uIjtzOjU6IjIuMi44IjtzOjEyOiJtaW5vclZlcnNpb24iO3M6MzoiMTAyIjtzOjIwOiJwZXJtaXNzaW9uc1Byb2ZpbGVJZCI7czoyOiItMSI7czoxMToicGVybWlzc2lvbnMiO3M6NzA0OiJ7InB5bXRfc2VydmljZV9hdXRob3JpemVuZXQiOjEsInB5bXRfc2VydmljZV9hdXRob3JpemVuZXRfY2ltIjoxLCJweW10X3NlcnZpY2VfcGF5cGFsIjoxLCJweW10X3NlcnZpY2VfY2xpY2tiYW5rIjoxLCJweW10X3NlcnZpY2VfY2hhcmdpZnkiOjAsInB5bXRfc2VydmljZV9zdHJpcGUiOjEsInB5bXRfc2VydmljZV9icmFpbnRyZWUiOjEsInB5bXRfc2VydmljZV9saW1lbGlnaHQiOjAsInB5bXRfc2VydmljZV9jb2luYmFzZSI6MSwicHltdF9zZXJ2aWNlX2xpdGxlIjowLCJzaG93X21tX2Zvb3RlciI6MCwibWF4X251bWJlcl9tZW1iZXJzIjoxMDAsImZlYXR1cmVfYnVuZGxlcyI6MSwiZmVhdHVyZV9kcmlwX2NvbnRlbnRfc2NoZWR1bGUiOjEsImZlYXR1cmVfYXBpIjoxLCJmZWF0dXJlX3B1c2hfbm90aWZpY2F0aW9ucyI6MSwiZmVhdHVyZV9waHBfaW50ZXJmYWNlIjoxLCJmZWF0dXJlX3NtYXJ0X2NvbnRlbnRfdGFncyI6MSwiZmVhdHVyZV9hZmZpbGlhdGVfbWdtdCI6MSwiZmVhdHVyZV9sb2FkX2JhbGFuY2luZyI6MCwiZmVhdHVyZV9lbXBsb3llZV9hY2NvdW50cyI6MCwiZmVhdHVyZV9hZHZfc3Vic2NyaXB0aW9uX21nbXQiOjAsImZlYXR1cmVfcmVwb3J0aW5nX3N1aXRlIjowLCJleHRlbnNpb25fdXNlcnZvaWNlIjowLCJleHRlbnNpb25fc29jaWFsX2xvZ2luIjowLCJzdXBwb3J0X2VtYWlsIjoxLCJzdXBwb3J0X3Bob25lIjowfSI7czo2OiJzdGF0dXMiO3M6MToiMSI7czoxNDoiaXNBcmNoaXZlZEZsYWciO2I6MDtzOjExOiJsYXN0VXBkYXRlZCI7czoxOToiMjAxOC0xMi0xNCAwMTo0MToxMSI7czo5OiJkYXRlQWRkZWQiO3M6MTk6IjIwMTctMDQtMTMgMjM6NDI6MjYiO30=', 'yes'),
(146, 'mm-minor-version', '102', 'yes'),
(147, 'wp_-mm-scheduling-regulator', 'completed', 'yes'),
(148, 'mm-option-acct-security', '1', 'yes'),
(149, 'mm-option-acct-security-max-ips', '5', 'yes'),
(150, 'mm-option-homepage-setting', '0', 'yes'),
(151, 'mm-option-use-member-homepage', '1', 'yes'),
(152, 'mm-option-show-login-logout-link', '0', 'yes'),
(153, 'mm-option-hide-protected-menu-items', '1', 'yes'),
(154, 'mm-option-use-mm-login-page', '1', 'yes'),
(155, 'mm-option-use-mm-reset-password-page', '1', 'yes'),
(156, 'mm-option-country-selections', 'a:1:{s:2:\"US\";s:2:\"US\";}', 'yes'),
(157, 'mm-forgot-password-email-subject', 'Reset your password', 'yes'),
(158, 'mm-forgot-password-email-body', 'Hi [MM_Member_Data name=\'firstName\'],\n\nClick the link below to reset your account password:\n	\n<a href=\"[MM_CorePage_Link type=\'resetpassword\']\">[MM_CorePage_Link type=\'resetpassword\']</a>\n	\nIf you have any questions, please contact us at [MM_Employee_Data name=\'email\'].\n	\nThanks,\n[MM_Employee_Data name=\'displayName\']', 'yes'),
(159, 'mm-option-affiliate', 'affid', 'yes'),
(160, 'mm-option-sub-affiliate', 'sid', 'yes'),
(161, 'mm-option-affiliate-lifespan', '30', 'yes'),
(162, 'mm-option-login-token-lifespan', '15', 'yes'),
(163, 'mm-option-use-checkout-form-test-data', '0', 'yes'),
(164, 'mm-option-purchase-confirmation-dialog-width', '450', 'yes'),
(165, 'mm-option-purchase-confirmation-dialog-height', '200', 'yes'),
(166, 'mm-option-dflt-checkout-item-type', 'membership_level', 'yes'),
(167, 'mm-option-dflt-checkout-item-id', '-1', 'yes'),
(168, 'mm-option-show-preview-bar', '1', 'yes'),
(169, 'mm-option-hide-admin-bar', '1', 'yes'),
(170, 'mm-option-enable-wp-autop', '1', 'yes'),
(171, 'mm-option-enable-username-change', '0', 'yes'),
(172, 'mm-option-allow-logged-out-purchases', '1', 'yes'),
(173, 'mm-option-allow-duplicate-subscriptions', '0', 'yes'),
(174, 'mm-option-checkout-paid-message', 'Please wait while we process your order...', 'yes'),
(175, 'mm-option-checkout-free-message', 'Please wait while we create your account...', 'yes'),
(176, 'mm-option-checkout-message-css', 'mm-checkout-processing-message', 'yes'),
(177, 'mm-option-currency', 'USD', 'yes'),
(178, 'mm-option-use-jquery-ui', '1', 'yes'),
(179, 'mm-option-allow-overdue-access', '0', 'yes'),
(180, 'mm-option-captcha-enabled', '0', 'yes'),
(181, 'mm-option-use-mm-css-reset-password', '1', 'yes'),
(182, 'mm-option-diagnostic-mode', 'off', 'yes'),
(183, 'mm-force-use-db-cache', '0', 'yes'),
(184, 'mm-option-currency-format-postfix-iso', 'false', 'yes'),
(185, 'mm-option-affiliate-alias', '', 'yes'),
(186, 'mm-option-sub-affiliate-alias', '', 'yes'),
(187, 'mm-site-in-test-mode', '0', 'yes'),
(188, 'mm-option-captcha-key', '', 'yes'),
(189, 'mm-option-captcha-private-key', '', 'yes'),
(190, 'mm-option-forget-member-email_address', '1', 'yes'),
(191, 'mm-option-forget-member-address', '1', 'yes'),
(192, 'mm-option-forget-member-country', '1', 'yes'),
(193, 'mm-option-forget-member-order-address', '1', 'yes'),
(194, 'mm-option-forget-member-order-country', '1', 'yes'),
(195, 'mm-option-forget-member-activity-log', '1', 'yes'),
(196, 'mm-option-forget-member-custom-fields', '1', 'yes'),
(197, 'mm-option-disable-explicit-links', '1', 'yes'),
(198, 'mm-option-purchase-link-style', 'reference-links', 'yes'),
(199, 'mm-option-smarttag-version', '2.1', 'yes'),
(200, 'mm-option-activity-log-cleanup-enabled', '1', 'yes'),
(201, 'mm-option-activity-log-cleanup-interval', '365', 'yes'),
(202, 'mm-option-use-mm-css-checkout', '1', 'yes'),
(203, 'mm-option-use-mm-css-my-account', '1', 'yes'),
(204, 'mm-option-use-mm-css-login', '1', 'yes'),
(205, 'mm-option-use-mm-css-forgot-password', '1', 'yes'),
(206, 'mm-option-enable-membership-proration', '1', 'yes'),
(207, 'mm-option-drip-content-time-setting', 'local', 'yes'),
(208, 'mm-overdue-payment-notification-installed', '1', 'yes'),
(209, 'smarttags', 'a:19:{i:0;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"100\";s:8:\"group_id\";s:1:\"1\";s:4:\"name\";s:15:\"MM_Content_Data\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:1;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"101\";s:8:\"group_id\";s:1:\"1\";s:4:\"name\";s:15:\"MM_Content_Link\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:2;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"200\";s:8:\"group_id\";s:1:\"2\";s:4:\"name\";s:16:\"MM_CorePage_Link\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:3;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"300\";s:8:\"group_id\";s:1:\"3\";s:4:\"name\";s:19:\"MM_CustomField_Data\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:4;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"400\";s:8:\"group_id\";s:1:\"4\";s:4:\"name\";s:16:\"MM_Employee_Data\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:5;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"500\";s:8:\"group_id\";s:1:\"5\";s:4:\"name\";s:16:\"MM_Error_Message\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:6;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"600\";s:8:\"group_id\";s:1:\"6\";s:4:\"name\";s:7:\"MM_Form\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:7;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"700\";s:8:\"group_id\";s:1:\"7\";s:4:\"name\";s:14:\"MM_Member_Data\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:8;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"701\";s:8:\"group_id\";s:1:\"7\";s:4:\"name\";s:14:\"MM_Member_Link\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:9;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"800\";s:8:\"group_id\";s:1:\"8\";s:4:\"name\";s:13:\"MM_Order_Data\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:10;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"801\";s:8:\"group_id\";s:1:\"8\";s:4:\"name\";s:16:\"MM_Purchase_Link\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:11;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"900\";s:8:\"group_id\";s:1:\"9\";s:4:\"name\";s:18:\"MM_Access_Decision\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:12;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"901\";s:8:\"group_id\";s:1:\"9\";s:4:\"name\";s:21:\"MM_Affiliate_Decision\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:13;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"902\";s:8:\"group_id\";s:1:\"9\";s:4:\"name\";s:18:\"MM_Custom_Decision\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:14;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"903\";s:8:\"group_id\";s:1:\"9\";s:4:\"name\";s:18:\"MM_Member_Decision\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:15;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"904\";s:8:\"group_id\";s:1:\"9\";s:4:\"name\";s:17:\"MM_Order_Decision\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:16;O:8:\"stdClass\":5:{s:2:\"id\";s:3:\"905\";s:8:\"group_id\";s:1:\"9\";s:4:\"name\";s:20:\"MM_Order_Subdecision\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:17;O:8:\"stdClass\":5:{s:2:\"id\";s:4:\"1000\";s:8:\"group_id\";s:2:\"10\";s:4:\"name\";s:15:\"MM_Product_Data\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}i:18;O:8:\"stdClass\":5:{s:2:\"id\";s:4:\"1100\";s:8:\"group_id\";s:2:\"11\";s:4:\"name\";s:17:\"MM_Affiliate_Data\";s:7:\"visible\";s:1:\"1\";s:8:\"autoload\";s:1:\"1\";}}', 'yes'),
(210, 'mm-major-version', '2.2.8', 'yes'),
(211, 'mm-upgrade-notice', '', 'yes'),
(212, 'widget_mm_smartwidget', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(213, 'widget_mm_dripcontentwidget', 'a:1:{s:12:\"_multiwidget\";i:1;}', 'yes'),
(215, 'mm-option-core-page-cache', 'a:11:{i:1;a:1:{i:5;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:22:\"renshawspt.local/home/\";}}i:2;a:1:{i:6;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:24:\"renshawspt.local/cancel/\";}}i:3;a:1:{i:7;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:26:\"renshawspt.local/mm-error/\";}}i:4;a:1:{i:8;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:23:\"renshawspt.local/login/\";}}i:5;a:1:{i:10;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:33:\"renshawspt.local/forgot-password/\";}}i:6;a:1:{i:12;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:26:\"renshawspt.local/checkout/\";}}i:7;a:1:{i:15;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:30:\"renshawspt.local/confirmation/\";}}i:10;a:1:{i:14;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:27:\"renshawspt.local/myaccount/\";}}i:11;a:1:{i:9;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:24:\"renshawspt.local/logout/\";}}i:12;a:1:{i:13;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:29:\"renshawspt.local/redeem-gift/\";}}i:13;a:1:{i:11;a:3:{s:8:\"ref_type\";N;s:6:\"ref_id\";N;s:9:\"permalink\";s:32:\"renshawspt.local/reset-password/\";}}}', 'yes'),
(216, 'mm-option-safe-mode', 'off', 'yes'),
(219, 'WPLANG', '', 'yes'),
(220, 'new_admin_email', 'cqthanh.zx@gmail.com', 'yes'),
(232, 'current_theme', 'Twenty Seventeen/renshawspt', 'yes'),
(233, 'theme_mods_renshawspt', 'a:2:{i:0;b:0;s:18:\"nav_menu_locations\";a:0:{}}', 'yes'),
(234, 'theme_switched', '', 'yes'),
(243, '_transient_timeout_mmlogintrackid_admin', '1547862718', 'no'),
(244, '_transient_mmlogintrackid_admin', 'a:5:{i:0;s:32:\"93d507bf46a912a03dad7d8c1889eee2\";i:1;s:32:\"1458c57c074bfb9a91a4a9c428d79891\";i:2;s:32:\"aafdcce51719220fef13297ea4994dba\";i:3;s:32:\"fea1db4d11edc1bfa2d70fc1136bc4f9\";i:4;s:32:\"86847f8a9e5de70926aa25d72ec8e6aa\";}', 'no'),
(287, '_site_transient_timeout_theme_roots', '1545272149', 'no'),
(288, '_site_transient_theme_roots', 'a:5:{s:10:\"renshawspt\";s:7:\"/themes\";s:13:\"themify-ultra\";s:7:\"/themes\";s:13:\"twentyfifteen\";s:7:\"/themes\";s:15:\"twentyseventeen\";s:7:\"/themes\";s:13:\"twentysixteen\";s:7:\"/themes\";}', 'no'),
(289, '_site_transient_update_themes', 'O:8:\"stdClass\":4:{s:12:\"last_checked\";i:1545270355;s:7:\"checked\";a:4:{s:10:\"renshawspt\";s:3:\"1.4\";s:13:\"twentyfifteen\";s:3:\"2.0\";s:15:\"twentyseventeen\";s:3:\"1.7\";s:13:\"twentysixteen\";s:3:\"1.5\";}s:8:\"response\";a:3:{s:13:\"twentyfifteen\";a:4:{s:5:\"theme\";s:13:\"twentyfifteen\";s:11:\"new_version\";s:3:\"2.2\";s:3:\"url\";s:43:\"https://wordpress.org/themes/twentyfifteen/\";s:7:\"package\";s:59:\"https://downloads.wordpress.org/theme/twentyfifteen.2.2.zip\";}s:15:\"twentyseventeen\";a:4:{s:5:\"theme\";s:15:\"twentyseventeen\";s:11:\"new_version\";s:3:\"1.9\";s:3:\"url\";s:45:\"https://wordpress.org/themes/twentyseventeen/\";s:7:\"package\";s:61:\"https://downloads.wordpress.org/theme/twentyseventeen.1.9.zip\";}s:13:\"twentysixteen\";a:4:{s:5:\"theme\";s:13:\"twentysixteen\";s:11:\"new_version\";s:3:\"1.7\";s:3:\"url\";s:43:\"https://wordpress.org/themes/twentysixteen/\";s:7:\"package\";s:59:\"https://downloads.wordpress.org/theme/twentysixteen.1.7.zip\";}}s:12:\"translations\";a:0:{}}', 'no'),
(290, '_site_transient_update_plugins', 'O:8:\"stdClass\":5:{s:12:\"last_checked\";i:1545271928;s:7:\"checked\";a:6:{s:19:\"akismet/akismet.php\";s:5:\"4.0.8\";s:13:\"gdpr/gdpr.php\";s:5:\"2.1.0\";s:27:\"gdpr-banner/gdpr-banner.php\";s:7:\"1.1.0.5\";s:9:\"hello.php\";s:3:\"1.7\";s:21:\"membermouse/index.php\";s:5:\"2.2.8\";s:35:\"themify-builder/themify-builder.php\";s:5:\"4.1.1\";}s:8:\"response\";a:2:{s:19:\"akismet/akismet.php\";O:8:\"stdClass\":12:{s:2:\"id\";s:21:\"w.org/plugins/akismet\";s:4:\"slug\";s:7:\"akismet\";s:6:\"plugin\";s:19:\"akismet/akismet.php\";s:11:\"new_version\";s:3:\"4.1\";s:3:\"url\";s:38:\"https://wordpress.org/plugins/akismet/\";s:7:\"package\";s:54:\"https://downloads.wordpress.org/plugin/akismet.4.1.zip\";s:5:\"icons\";a:2:{s:2:\"2x\";s:59:\"https://ps.w.org/akismet/assets/icon-256x256.png?rev=969272\";s:2:\"1x\";s:59:\"https://ps.w.org/akismet/assets/icon-128x128.png?rev=969272\";}s:7:\"banners\";a:1:{s:2:\"1x\";s:61:\"https://ps.w.org/akismet/assets/banner-772x250.jpg?rev=479904\";}s:11:\"banners_rtl\";a:0:{}s:6:\"tested\";s:3:\"5.0\";s:12:\"requires_php\";b:0;s:13:\"compatibility\";O:8:\"stdClass\":0:{}}s:35:\"themify-builder/themify-builder.php\";O:8:\"stdClass\":12:{s:2:\"id\";s:29:\"w.org/plugins/themify-builder\";s:4:\"slug\";s:15:\"themify-builder\";s:6:\"plugin\";s:35:\"themify-builder/themify-builder.php\";s:11:\"new_version\";s:5:\"4.1.3\";s:3:\"url\";s:46:\"https://wordpress.org/plugins/themify-builder/\";s:7:\"package\";s:58:\"https://downloads.wordpress.org/plugin/themify-builder.zip\";s:5:\"icons\";a:1:{s:2:\"1x\";s:68:\"https://ps.w.org/themify-builder/assets/icon-128x128.png?rev=1995752\";}s:7:\"banners\";a:1:{s:2:\"1x\";s:70:\"https://ps.w.org/themify-builder/assets/banner-772x250.png?rev=1995753\";}s:11:\"banners_rtl\";a:0:{}s:6:\"tested\";s:5:\"5.0.1\";s:12:\"requires_php\";b:0;s:13:\"compatibility\";O:8:\"stdClass\":0:{}}}s:12:\"translations\";a:0:{}s:9:\"no_update\";a:3:{s:13:\"gdpr/gdpr.php\";O:8:\"stdClass\":9:{s:2:\"id\";s:18:\"w.org/plugins/gdpr\";s:4:\"slug\";s:4:\"gdpr\";s:6:\"plugin\";s:13:\"gdpr/gdpr.php\";s:11:\"new_version\";s:5:\"2.1.0\";s:3:\"url\";s:35:\"https://wordpress.org/plugins/gdpr/\";s:7:\"package\";s:53:\"https://downloads.wordpress.org/plugin/gdpr.2.1.0.zip\";s:5:\"icons\";a:3:{s:2:\"2x\";s:57:\"https://ps.w.org/gdpr/assets/icon-256x256.png?rev=1837142\";s:2:\"1x\";s:49:\"https://ps.w.org/gdpr/assets/icon.svg?rev=1837142\";s:3:\"svg\";s:49:\"https://ps.w.org/gdpr/assets/icon.svg?rev=1837142\";}s:7:\"banners\";a:2:{s:2:\"2x\";s:60:\"https://ps.w.org/gdpr/assets/banner-1544x500.png?rev=1837142\";s:2:\"1x\";s:59:\"https://ps.w.org/gdpr/assets/banner-772x250.png?rev=1837142\";}s:11:\"banners_rtl\";a:2:{s:2:\"2x\";s:64:\"https://ps.w.org/gdpr/assets/banner-1544x500-rtl.png?rev=1837142\";s:2:\"1x\";s:63:\"https://ps.w.org/gdpr/assets/banner-772x250-rtl.png?rev=1837142\";}}s:27:\"gdpr-banner/gdpr-banner.php\";O:8:\"stdClass\":9:{s:2:\"id\";s:25:\"w.org/plugins/gdpr-banner\";s:4:\"slug\";s:11:\"gdpr-banner\";s:6:\"plugin\";s:27:\"gdpr-banner/gdpr-banner.php\";s:11:\"new_version\";s:7:\"1.1.0.5\";s:3:\"url\";s:42:\"https://wordpress.org/plugins/gdpr-banner/\";s:7:\"package\";s:54:\"https://downloads.wordpress.org/plugin/gdpr-banner.zip\";s:5:\"icons\";a:2:{s:2:\"2x\";s:64:\"https://ps.w.org/gdpr-banner/assets/icon-256x256.jpg?rev=1804068\";s:2:\"1x\";s:64:\"https://ps.w.org/gdpr-banner/assets/icon-128x128.jpg?rev=1804068\";}s:7:\"banners\";a:1:{s:2:\"1x\";s:66:\"https://ps.w.org/gdpr-banner/assets/banner-772x250.jpg?rev=1804069\";}s:11:\"banners_rtl\";a:0:{}}s:9:\"hello.php\";O:8:\"stdClass\":9:{s:2:\"id\";s:25:\"w.org/plugins/hello-dolly\";s:4:\"slug\";s:11:\"hello-dolly\";s:6:\"plugin\";s:9:\"hello.php\";s:11:\"new_version\";s:3:\"1.6\";s:3:\"url\";s:42:\"https://wordpress.org/plugins/hello-dolly/\";s:7:\"package\";s:58:\"https://downloads.wordpress.org/plugin/hello-dolly.1.6.zip\";s:5:\"icons\";a:2:{s:2:\"2x\";s:63:\"https://ps.w.org/hello-dolly/assets/icon-256x256.jpg?rev=969907\";s:2:\"1x\";s:63:\"https://ps.w.org/hello-dolly/assets/icon-128x128.jpg?rev=969907\";}s:7:\"banners\";a:1:{s:2:\"1x\";s:65:\"https://ps.w.org/hello-dolly/assets/banner-772x250.png?rev=478342\";}s:11:\"banners_rtl\";a:0:{}}}}', 'no'),
(292, '_transient_timeout_feed_b27b5af21d80cf3c571790d64af7e81d', '1545277921', 'no');
INSERT INTO `wp_options` (`option_id`, `option_name`, `option_value`, `autoload`) VALUES
(293, '_transient_feed_b27b5af21d80cf3c571790d64af7e81d', 'a:4:{s:5:\"child\";a:1:{s:0:\"\";a:1:{s:3:\"rss\";a:1:{i:0;a:6:{s:4:\"data\";s:3:\"\n\n\n\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:7:\"version\";s:3:\"2.0\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:1:{s:0:\"\";a:1:{s:7:\"channel\";a:1:{i:0;a:6:{s:4:\"data\";s:49:\"\n	\n	\n	\n	\n	\n	\n	\n	\n	\n	\n		\n		\n		\n		\n		\n		\n		\n		\n		\n	\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:3:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:23:\"Updates – MemberMouse\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:23:\"https://membermouse.com\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:0:\"\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:13:\"lastBuildDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Wed, 19 Dec 2018 18:44:25 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"language\";a:1:{i:0;a:5:{s:4:\"data\";s:5:\"en-US\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:9:\"generator\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"https://wordpress.org/?v=4.9.7\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"item\";a:10:{i:0;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:26:\"MemberMouse 2.2.8 Released\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:59:\"https://membermouse.com/updates/membermouse-2-2-8-released/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:67:\"https://membermouse.com/updates/membermouse-2-2-8-released/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Thu, 10 May 2018 18:45:27 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"https://membermouse.com/?p=2226\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:646:\"MemberMouse 2.2.8 is now available &#8211; you can upgrade directly from your WordPress Dashboard or download using the link below to manually upgrade. In addition, we’ve updated our legal documentation (End User Licensing Agreement, Terms of Sale, Terms of Service and Privacy Policy) and these can all be reviewed on our site. We want to give you an overview of what you can expect in this latest release and with our updated legal policies: GDPR tools. The upcoming General Data Protection Regulation (GDPR) places new obligations <a class=\"moretag\" href=\"https://membermouse.com/updates/membermouse-2-2-8-released/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:15:\"Cynthia Bennett\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:64:\"https://membermouse.com/updates/membermouse-2-2-8-released/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:1;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:27:\"MemberMouse 2.2.7 Released!\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:59:\"https://membermouse.com/updates/membermouse-2-2-7-released/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:67:\"https://membermouse.com/updates/membermouse-2-2-7-released/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Fri, 12 May 2017 16:00:27 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"https://membermouse.com/?p=1990\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:727:\"The MemberMouse team is happy to announce our new release, version 2.2.7. This version includes enhancements to the plugin deactivation protocol, support for Authorize.net Accept.js, updates to Facebook Social Login as well as several enhancements and bug fixes. See the remainder of this article for details on the release and instructions on how to upgrade. Release Highlights Updated MemberMouse license deactivation protocol to alert the site admin prior to deactivation and allow for a longer window before the plugin deactivates. Implemented Authorize.net&#8217;s new Accept.js token exchange, minimizing the <a class=\"moretag\" href=\"https://membermouse.com/updates/membermouse-2-2-7-released/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:15:\"Cynthia Bennett\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:64:\"https://membermouse.com/updates/membermouse-2-2-7-released/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:2;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:27:\"MemberMouse 2.2.6 Released!\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:59:\"https://membermouse.com/updates/membermouse-2-2-6-released/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:67:\"https://membermouse.com/updates/membermouse-2-2-6-released/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Wed, 28 Sep 2016 17:09:59 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1910\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:705:\"The MemberMouse team is excited to bring you a fantastic new release, version 2.2.6. This version includes updates relating to WordPress 4.6, localization support, Zapier and ActiveCampaign integrations and numerous enhancements and bug fixes. See the remainder of this article for details on the release and instructions on how to upgrade. Release Highlights Tested with WordPress 4.6 ActiveCampaign email integration Localization support. Now it&#8217;s possible to translate most text in MemberMouse to the language of your choice Zapier is now integrated directly into the push notification <a class=\"moretag\" href=\"https://membermouse.com/updates/membermouse-2-2-6-released/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:15:\"Eric Turnnessen\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:64:\"https://membermouse.com/updates/membermouse-2-2-6-released/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:3;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:27:\"MemberMouse 2.2.5 Released!\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:59:\"https://membermouse.com/updates/membermouse-2-2-5-released/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:67:\"https://membermouse.com/updates/membermouse-2-2-5-released/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Tue, 12 Apr 2016 19:28:52 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1603\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:696:\"The MemberMouse team is excited to bring you a fantastic new release, version 2.2.5. This version includes updates relating to WordPress 4.5, infrastructure upgrades, security enhancements and numerous bug fixes. As part of our continuing commitment to provide a secure platform for our customers, we engaged Pritect.net to conduct a security audit on our full codebase. This release addresses multiple issues that were discovered, ranging from privilege escalation vulnerabilities to strengthening the source of entropy used in API key and password generation. Special thanks to James <a class=\"moretag\" href=\"https://membermouse.com/updates/membermouse-2-2-5-released/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:15:\"Eric Turnnessen\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:64:\"https://membermouse.com/updates/membermouse-2-2-5-released/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:4;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:32:\"MemberMouse 2.2.4 Release Today!\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:64:\"https://membermouse.com/updates/membermouse-2-2-4-release-today/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:72:\"https://membermouse.com/updates/membermouse-2-2-4-release-today/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Mon, 14 Dec 2015 21:02:12 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1490\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:672:\"The MemberMouse team is excited to bring you a fantastic new release, version 2.2.4. This version brings a handful of powerful new features, essential security updates, performance enhancements and more. This release is something we consider as an essential release for anyone using MemberMouse. In addition to a host of new features and bug fixes, this release includes necessary security updates and amazing performance enhancements which increase the performance of the MemberMouse plugin between 100% and 300% across the board. A big thank you to those <a class=\"moretag\" href=\"https://membermouse.com/updates/membermouse-2-2-4-release-today/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:15:\"Eric Turnnessen\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:69:\"https://membermouse.com/updates/membermouse-2-2-4-release-today/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:5;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:33:\"MemberMouse 2.2.3 Released Today!\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:65:\"https://membermouse.com/updates/membermouse-2-2-3-released-today/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:73:\"https://membermouse.com/updates/membermouse-2-2-3-released-today/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Thu, 23 Apr 2015 22:05:16 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1381\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:640:\"The MemberMouse team is excited to bring you a fantastic new release, version 2.2.3. This version brings more than a handful of powerful new features. If some of these things sound awfully technical, don’t sweat it. Just know that our developers are hard at work making improvements to the platform, adding new features, and making sure things are always up to date with WordPress and the other services with which we integrate. In fact, there are a lot of very technical things in this release that we won&#8217;t get <a class=\"moretag\" href=\"https://membermouse.com/updates/membermouse-2-2-3-released-today/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:70:\"https://membermouse.com/updates/membermouse-2-2-3-released-today/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:6;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:37:\"MemberMouse 2.2.0 – Massive Update!\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:65:\"https://membermouse.com/updates/membermouse-2-2-0-massive-update/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:73:\"https://membermouse.com/updates/membermouse-2-2-0-massive-update/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Tue, 19 Aug 2014 18:09:36 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1115\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:664:\"I’m pleased to announce the release of MemberMouse 2.2.0. This release contains major improvements for all plans. Here are a few of the highlights. As always, you can see the release notes for more details… Customer Value, Churn &#38; Retention Reporting is Here! We’ve upgraded the basic reporting for Starter, Builder, and Growth Plans, and we’ve released a series of enhanced reports for Advanced plans and up. This reporting suite gives you all of the powerful metrics you’ve been requesting. I am absolutely convinced this reporting <a class=\"moretag\" href=\"https://membermouse.com/updates/membermouse-2-2-0-massive-update/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:70:\"https://membermouse.com/updates/membermouse-2-2-0-massive-update/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:7;a:6:{s:4:\"data\";s:27:\"\n		\n		\n		\n		\n				\n\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:2:{s:0:\"\";a:6:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:86:\"2.1.1 Release – MM Community! Gifting, Pending Cancellation, UserVoice &amp; More…\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:95:\"https://membermouse.com/updates/2-1-1-release-mm-community-gifting-cancellation-uservoice-more/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Wed, 26 Mar 2014 18:03:11 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1026\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:726:\"The team at MemberMouse is excited to bring you another feature packed release. This new version of the plugin includes some excellent new functionality. In addition to this release, we&#8217;re also introducing the &#8220;MemberMouse Community.&#8221; Introducing the MemberMouse Community! We invite you to participate in the brand new MemberMouse community. Consider it a place to share tips and tricks, best practices, and success stories. We believe that there is tremendous value in building a community that can foster growth and provide ancillary support above and beyond <a class=\"moretag\" href=\"https://membermouse.com/updates/2-1-1-release-mm-community-gifting-cancellation-uservoice-more/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:8;a:6:{s:4:\"data\";s:27:\"\n		\n		\n		\n		\n				\n\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:2:{s:0:\"\";a:6:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:27:\"Introducing MemberMouse 2.0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:60:\"https://membermouse.com/updates/introducing-membermouse-2-0/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Fri, 01 Mar 2013 21:05:53 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:28:\"http://membermouse.com/?p=72\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:501:\"Welcome to MemberMouse 2.0! This version represents a big step forward for the MemberMouse platform. You will notice many improvements in usability and functionality. What you won&#8217;t see are the major improvements that have been made under the hood. These include speed improvements and database query optimization that truly position MemberMouse as the only enterprise-class membership platform available to small businesses today. Look for more improvements to our reporting system coming soon.\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:15:\"Eric Turnnessen\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:9;a:6:{s:4:\"data\";s:27:\"\n		\n		\n		\n		\n				\n\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:2:{s:0:\"\";a:6:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:62:\"Start Collecting Money in Minutes with Powerful Checkout Pages\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:95:\"https://membermouse.com/updates/start-collecting-money-in-minutes-with-powerful-checkout-pages/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Thu, 20 Dec 2012 23:09:39 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Updates\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:28:\"http://membermouse.com/?p=78\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:687:\"We\'re really excited about the new checkout page! We have given you more opportunities than ever to directly sign up members. All you have to do is start with our built-in template, customize it to your needs and within minutes you can start collecting payments. Collecting payments from your customers the most critical part of your business. That\'s why your checkout page should have advanced technical functionality to run smoothly and securely, a clean design that is easy to understand, dynamic marketing capabilities proven to convert <a class=\"moretag\" href=\"https://membermouse.com/updates/start-collecting-money-in-minutes-with-powerful-checkout-pages/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:15:\"Eric Turnnessen\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}}}s:27:\"http://www.w3.org/2005/Atom\";a:1:{s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:0:\"\";s:7:\"attribs\";a:1:{s:0:\"\";a:3:{s:4:\"href\";s:46:\"https://membermouse.com/category/updates/feed/\";s:3:\"rel\";s:4:\"self\";s:4:\"type\";s:19:\"application/rss+xml\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:44:\"http://purl.org/rss/1.0/modules/syndication/\";a:2:{s:12:\"updatePeriod\";a:1:{i:0;a:5:{s:4:\"data\";s:6:\"hourly\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:15:\"updateFrequency\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"1\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}}}}}}}}s:4:\"type\";i:128;s:7:\"headers\";O:42:\"Requests_Utility_CaseInsensitiveDictionary\":1:{s:7:\"\0*\0data\";a:12:{s:4:\"date\";s:29:\"Thu, 20 Dec 2018 01:52:01 GMT\";s:12:\"content-type\";s:34:\"application/rss+xml; charset=UTF-8\";s:12:\"x-robots-tag\";s:15:\"noindex, follow\";s:4:\"link\";s:60:\"<https://membermouse.com/wp-json/>; rel=\"https://api.w.org/\"\";s:4:\"vary\";s:33:\"X-Forwarded-Proto,Accept-Encoding\";s:13:\"last-modified\";s:29:\"Wed, 19 Dec 2018 18:44:25 GMT\";s:4:\"etag\";s:34:\"\"19868d4ac3f1a5bf1fbeba259e0f9c36\"\";s:3:\"via\";s:10:\"1.1 google\";s:7:\"alt-svc\";s:5:\"clear\";s:9:\"expect-ct\";s:87:\"max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"\";s:6:\"server\";s:10:\"cloudflare\";s:6:\"cf-ray\";s:20:\"48be7794488533d3-HKG\";}}s:5:\"build\";s:14:\"20181217023028\";}', 'no'),
(294, '_transient_timeout_feed_mod_b27b5af21d80cf3c571790d64af7e81d', '1545277921', 'no'),
(295, '_transient_feed_mod_b27b5af21d80cf3c571790d64af7e81d', '1545270721', 'no'),
(296, '_transient_timeout_feed_6f6b8787c147114b57a3f79e3384e027', '1545277922', 'no');
INSERT INTO `wp_options` (`option_id`, `option_name`, `option_value`, `autoload`) VALUES
(297, '_transient_feed_6f6b8787c147114b57a3f79e3384e027', 'a:4:{s:5:\"child\";a:1:{s:0:\"\";a:1:{s:3:\"rss\";a:1:{i:0;a:6:{s:4:\"data\";s:3:\"\n\n\n\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:7:\"version\";s:3:\"2.0\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:1:{s:0:\"\";a:1:{s:7:\"channel\";a:1:{i:0;a:6:{s:4:\"data\";s:40:\"\n	\n	\n	\n	\n	\n	\n	\n	\n	\n	\n		\n		\n		\n		\n		\n		\n	\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:3:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:23:\"Academy – MemberMouse\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:23:\"https://membermouse.com\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:0:\"\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:13:\"lastBuildDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Wed, 19 Dec 2018 18:44:25 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"language\";a:1:{i:0;a:5:{s:4:\"data\";s:5:\"en-US\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:9:\"generator\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"https://wordpress.org/?v=4.9.7\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"item\";a:7:{i:0;a:6:{s:4:\"data\";s:51:\"\n		\n		\n		\n		\n		\n				\n		\n		\n		\n		\n		\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:42:\"MM Academy EP7: Sales Process Optimization\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:74:\"https://membermouse.com/academy/mm-academy-ep7-sales-process-optimization/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:82:\"https://membermouse.com/academy/mm-academy-ep7-sales-process-optimization/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Sat, 18 Aug 2018 20:32:49 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:6:{i:0;a:5:{s:4:\"data\";s:7:\"Academy\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:1;a:5:{s:4:\"data\";s:24:\"conversion rate increase\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:2;a:5:{s:4:\"data\";s:21:\"membership businesses\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:3;a:5:{s:4:\"data\";s:20:\"membership marketing\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:4;a:5:{s:4:\"data\";s:26:\"sales process optimization\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:5;a:5:{s:4:\"data\";s:25:\"wordpress membership site\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1475\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:673:\"MemberMouse Academy Episode 7: Sales Process Optimization. Learn what Mitch Bowler is doing to increase his conversion rate and get new members for his art technique wordpress membership website. This episode is jam packed with great conversion tips and tricks! Run time is just over an hour, but it&#8217;s worth watching. Here&#8217;s an overview of what you&#8217;ll learn in this instructive Academy call on sales process optimization: How Mitch Built a Successful Art Technique Site How to Transform Your Passion into a Business (1:44) How to <a class=\"moretag\" href=\"https://membermouse.com/academy/mm-academy-ep7-sales-process-optimization/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:79:\"https://membermouse.com/academy/mm-academy-ep7-sales-process-optimization/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:1;a:6:{s:4:\"data\";s:54:\"\n		\n		\n		\n		\n		\n				\n		\n		\n		\n		\n		\n		\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:44:\"MM Academy EP6: 2 Million Page Views / Month\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:74:\"https://membermouse.com/academy/mm-academy-ep6-2-million-page-views-month/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:82:\"https://membermouse.com/academy/mm-academy-ep6-2-million-page-views-month/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Fri, 20 Jul 2018 15:41:44 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:7:{i:0;a:5:{s:4:\"data\";s:7:\"Academy\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:1;a:5:{s:4:\"data\";s:11:\"copywriting\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:2;a:5:{s:4:\"data\";s:23:\"lifetime customer value\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:3;a:5:{s:4:\"data\";s:11:\"membermouse\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:4;a:5:{s:4:\"data\";s:19:\"membership business\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:5;a:5:{s:4:\"data\";s:3:\"seo\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:6;a:5:{s:4:\"data\";s:28:\"wordpress membership plugins\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1423\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:659:\"MemberMouse Academy Episode 6: In this episode, I interview Special Guest Jason Glaspey, one of the original producers of PaleoPlan.com Jason reveals how he helped bring the site to 2 Million Page Views per month, with revenues well into the six figures. He also shares some great tips on copywriting and how to continuously improve your business. A strong call overall and definitely worth watching. Here&#8217;s an overview of what you&#8217;ll learn in this Academy call: How PaleoPlan Reached 2 Million Page Views / Month How to <a class=\"moretag\" href=\"https://membermouse.com/academy/mm-academy-ep6-2-million-page-views-month/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:79:\"https://membermouse.com/academy/mm-academy-ep6-2-million-page-views-month/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:2;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"MM Academy EP5: John Warrillow\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:62:\"https://membermouse.com/academy/mm-academy-ep5-john-warrillow/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:70:\"https://membermouse.com/academy/mm-academy-ep5-john-warrillow/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Sun, 10 Jun 2018 20:07:51 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Academy\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1413\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:732:\"MemberMouse Academy Episode 5: In this episode, I interview Special Guest John Warrillow, author of &#8220;Built to Sell,&#8221; and &#8220;The Automatic Customer.&#8221; John talks about the critical metrics of a membership business, including Lifetime Customer Value, Valuation, Retention and more&#8230; This is an audio only call, but it contains some of the most important topics you need to consider when growing a for-profit membership business. Specifically, the relationship between customer value and customer acquisition cost. Here&#8217;s an overview of what you&#8217;ll learn this this Academy call: How <a class=\"moretag\" href=\"https://membermouse.com/academy/mm-academy-ep5-john-warrillow/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:67:\"https://membermouse.com/academy/mm-academy-ep5-john-warrillow/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:3;a:6:{s:4:\"data\";s:51:\"\n		\n		\n		\n		\n		\n				\n		\n		\n		\n		\n		\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:37:\"MM Academy EP4: Landing Page Critique\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:54:\"https://membermouse.com/academy/landing-page-critique/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:62:\"https://membermouse.com/academy/landing-page-critique/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Sat, 21 Apr 2018 18:16:01 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:6:{i:0;a:5:{s:4:\"data\";s:7:\"Academy\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:1;a:5:{s:4:\"data\";s:15:\"conversion rate\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:2;a:5:{s:4:\"data\";s:17:\"marketing funnels\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:3;a:5:{s:4:\"data\";s:11:\"membermouse\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:4;a:5:{s:4:\"data\";s:15:\"membership site\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:5;a:5:{s:4:\"data\";s:26:\"sales process optimization\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1367\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:627:\"MemberMouse Academy Episode 4: I’m with Ryan Fritz from HurlbutVisuals.com, and we look at ways to improve the conversion rate of his membership site, so his team can bring their world-class cinematography education to a broader audience. Well worth watching! Here’s a few things you’ll learn in this week’s video: * How to improve the perception of value of your membership site * How to better communicate your value proposition with images * How to use video and 3rd party testimonials to increase desire * How <a class=\"moretag\" href=\"https://membermouse.com/academy/landing-page-critique/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:59:\"https://membermouse.com/academy/landing-page-critique/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:4;a:6:{s:4:\"data\";s:60:\"\n		\n		\n		\n		\n		\n				\n		\n		\n		\n		\n		\n		\n		\n		\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:48:\"MM Academy EP3: Growing Beyond 5 Figures A Month\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:65:\"https://membermouse.com/academy/growing-beyond-5-figures-a-month/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:73:\"https://membermouse.com/academy/growing-beyond-5-figures-a-month/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Sat, 14 Apr 2018 17:41:23 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:9:{i:0;a:5:{s:4:\"data\";s:7:\"Academy\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:1;a:5:{s:4:\"data\";s:7:\"adwords\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:2;a:5:{s:4:\"data\";s:9:\"authority\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:3;a:5:{s:4:\"data\";s:15:\"conversion rate\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:4;a:5:{s:4:\"data\";s:12:\"free to paid\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:5;a:5:{s:4:\"data\";s:23:\"lifetime customer value\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:6;a:5:{s:4:\"data\";s:11:\"membermouse\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:7;a:5:{s:4:\"data\";s:7:\"options\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:8;a:5:{s:4:\"data\";s:13:\"product shots\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1315\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:590:\"MemberMouse Academy Episode 3: I’m with Kirk Du Plessis from OptionAlpha.com, and we look at ways for him to grow beyond 5 figures a month. Here’s a few things you’ll learn in this week’s video: * How to improve your checkout page for higher conversion * How to better communicate your value proposition with images * How to move members from free to paying customers * How to increase the perceived value of a free product * How to go from being a good marketer to <a class=\"moretag\" href=\"https://membermouse.com/academy/growing-beyond-5-figures-a-month/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:70:\"https://membermouse.com/academy/growing-beyond-5-figures-a-month/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:5;a:6:{s:4:\"data\";s:54:\"\n		\n		\n		\n		\n		\n				\n		\n		\n		\n		\n		\n		\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:42:\"MM Academy EP2: Sales Process Optimization\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:59:\"https://membermouse.com/academy/sales-process-optimization/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:67:\"https://membermouse.com/academy/sales-process-optimization/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Fri, 06 Apr 2018 16:55:39 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:7:{i:0;a:5:{s:4:\"data\";s:7:\"Academy\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:1;a:5:{s:4:\"data\";s:7:\"adwords\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:2;a:5:{s:4:\"data\";s:13:\"checkout page\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:3;a:5:{s:4:\"data\";s:15:\"conversion rate\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:4;a:5:{s:4:\"data\";s:16:\"get more members\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:5;a:5:{s:4:\"data\";s:16:\"paid advertising\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}i:6;a:5:{s:4:\"data\";s:13:\"sales process\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1307\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:635:\"MemberMouse Academy Episode 2: I&#8217;m with my new friend Luke Ward from BassGorilla.com, and I go through all the very important parts of a membership site sales process. I estimate that if Luke implements my changes, he&#8217;ll be able to 5x his sales! Here&#8217;s a few things you&#8217;ll learn in this week&#8217;s video: * How to improve your checkout page for higher conversion * How to better communicate your value proposition with images * How to streamline your product offering for higher conversion * How to <a class=\"moretag\" href=\"https://membermouse.com/academy/sales-process-optimization/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:64:\"https://membermouse.com/academy/sales-process-optimization/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}i:6;a:6:{s:4:\"data\";s:36:\"\n		\n		\n		\n		\n		\n				\n\n		\n		\n		\n		\n		\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";s:5:\"child\";a:4:{s:0:\"\";a:7:{s:5:\"title\";a:1:{i:0;a:5:{s:4:\"data\";s:41:\"MM Academy EP1: Growing to 11,000 Members\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:57:\"https://membermouse.com/academy/growing-to-11000-members/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:65:\"https://membermouse.com/academy/growing-to-11000-members/#respond\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:7:\"pubDate\";a:1:{i:0;a:5:{s:4:\"data\";s:31:\"Fri, 30 Mar 2018 15:37:54 +0000\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:8:\"category\";a:1:{i:0;a:5:{s:4:\"data\";s:7:\"Academy\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:4:\"guid\";a:1:{i:0;a:5:{s:4:\"data\";s:30:\"http://membermouse.com/?p=1303\";s:7:\"attribs\";a:1:{s:0:\"\";a:1:{s:11:\"isPermaLink\";s:5:\"false\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:11:\"description\";a:1:{i:0;a:5:{s:4:\"data\";s:676:\"MemberMouse Academy Episode 1: Growing to 11,000 Members with Special Guest Chris Palmer from AngleofAttack.com. Learn how Chris grew his membership site to 11,000 members, plus tips and tricks for scaling your own membership website. Hosted by Dan Caron and Eric Turnnessen of MemberMouse. What you&#8217;ll learn: Why Uniques Products Are Ideal for Membership Sites Automating Customer Support At Every Opportunity How Chris Grew His Membership Site to 11,000 Members Leveraging a Free Product to Get New Members Moving Customers From Free to Paid Subscriptions Use <a class=\"moretag\" href=\"https://membermouse.com/academy/growing-to-11000-members/\">... Continue Reading</a>\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:32:\"http://purl.org/dc/elements/1.1/\";a:1:{s:7:\"creator\";a:1:{i:0;a:5:{s:4:\"data\";s:9:\"Dan Caron\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:36:\"http://wellformedweb.org/CommentAPI/\";a:1:{s:10:\"commentRss\";a:1:{i:0;a:5:{s:4:\"data\";s:62:\"https://membermouse.com/academy/growing-to-11000-members/feed/\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:38:\"http://purl.org/rss/1.0/modules/slash/\";a:1:{s:8:\"comments\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"0\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}}}s:27:\"http://www.w3.org/2005/Atom\";a:1:{s:4:\"link\";a:1:{i:0;a:5:{s:4:\"data\";s:0:\"\";s:7:\"attribs\";a:1:{s:0:\"\";a:3:{s:4:\"href\";s:46:\"https://membermouse.com/category/academy/feed/\";s:3:\"rel\";s:4:\"self\";s:4:\"type\";s:19:\"application/rss+xml\";}}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}s:44:\"http://purl.org/rss/1.0/modules/syndication/\";a:2:{s:12:\"updatePeriod\";a:1:{i:0;a:5:{s:4:\"data\";s:6:\"hourly\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}s:15:\"updateFrequency\";a:1:{i:0;a:5:{s:4:\"data\";s:1:\"1\";s:7:\"attribs\";a:0:{}s:8:\"xml_base\";s:0:\"\";s:17:\"xml_base_explicit\";b:0;s:8:\"xml_lang\";s:0:\"\";}}}}}}}}}}}}s:4:\"type\";i:128;s:7:\"headers\";O:42:\"Requests_Utility_CaseInsensitiveDictionary\":1:{s:7:\"\0*\0data\";a:12:{s:4:\"date\";s:29:\"Thu, 20 Dec 2018 01:52:02 GMT\";s:12:\"content-type\";s:34:\"application/rss+xml; charset=UTF-8\";s:12:\"x-robots-tag\";s:15:\"noindex, follow\";s:4:\"link\";s:60:\"<https://membermouse.com/wp-json/>; rel=\"https://api.w.org/\"\";s:4:\"vary\";s:33:\"X-Forwarded-Proto,Accept-Encoding\";s:13:\"last-modified\";s:29:\"Wed, 19 Dec 2018 18:44:25 GMT\";s:4:\"etag\";s:34:\"\"19868d4ac3f1a5bf1fbeba259e0f9c36\"\";s:3:\"via\";s:10:\"1.1 google\";s:7:\"alt-svc\";s:5:\"clear\";s:9:\"expect-ct\";s:87:\"max-age=604800, report-uri=\"https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct\"\";s:6:\"server\";s:10:\"cloudflare\";s:6:\"cf-ray\";s:20:\"48be779e2f5d84e4-HKG\";}}s:5:\"build\";s:14:\"20181217023028\";}', 'no'),
(298, '_transient_timeout_feed_mod_6f6b8787c147114b57a3f79e3384e027', '1545277923', 'no'),
(299, '_transient_feed_mod_6f6b8787c147114b57a3f79e3384e027', '1545270723', 'no'),
(305, '_transient_timeout_plugin_slugs', '1545358338', 'no'),
(306, '_transient_plugin_slugs', 'a:5:{i:0;s:19:\"akismet/akismet.php\";i:1;s:27:\"gdpr-banner/gdpr-banner.php\";i:2;s:9:\"hello.php\";i:3;s:21:\"membermouse/index.php\";i:4;s:35:\"themify-builder/themify-builder.php\";}', 'no'),
(307, 'gdpr_disable_css', '', 'yes'),
(308, 'gdpr_enable_telemetry_tracker', '', 'yes'),
(309, 'gdpr_use_recaptcha', '', 'yes'),
(310, 'gdpr_recaptcha_site_key', '', 'yes'),
(311, 'gdpr_recaptcha_secret_key', '', 'yes'),
(312, 'gdpr_add_consent_checkboxes_registration', '1', 'yes'),
(313, 'gdpr_add_consent_checkboxes_checkout', '1', 'yes'),
(314, 'gdpr_cookie_popup_content', 'a:4:{s:9:\"necessary\";a:4:{s:4:\"name\";s:9:\"Necessary\";s:6:\"status\";s:8:\"required\";s:12:\"cookies_used\";s:0:\"\";s:10:\"how_we_use\";s:0:\"\";}s:11:\"advertising\";a:4:{s:4:\"name\";s:11:\"Advertising\";s:6:\"status\";s:2:\"on\";s:12:\"cookies_used\";s:0:\"\";s:10:\"how_we_use\";s:0:\"\";}s:9:\"analytics\";a:4:{s:4:\"name\";s:9:\"Analytics\";s:6:\"status\";s:2:\"on\";s:12:\"cookies_used\";s:0:\"\";s:10:\"how_we_use\";s:0:\"\";}s:5:\"other\";a:4:{s:4:\"name\";s:5:\"Other\";s:6:\"status\";s:2:\"on\";s:12:\"cookies_used\";s:0:\"\";s:10:\"how_we_use\";s:0:\"\";}}', 'yes'),
(315, 'gdpr_refresh_after_preferences_update', '1', 'yes'),
(316, 'gdpr_enable_privacy_bar', '1', 'yes'),
(317, 'gdpr_display_cookie_categories_in_bar', '', 'yes'),
(318, 'gdpr_hide_from_bots', '1', 'yes'),
(319, 'gdpr_reconsent_template', 'modal', 'yes');

-- --------------------------------------------------------

--
-- Table structure for table `wp_postmeta`
--

CREATE TABLE `wp_postmeta` (
  `meta_id` bigint(20) UNSIGNED NOT NULL,
  `post_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `meta_key` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `meta_value` longtext COLLATE utf8mb4_unicode_ci
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_postmeta`
--

INSERT INTO `wp_postmeta` (`meta_id`, `post_id`, `meta_key`, `meta_value`) VALUES
(1, 2, '_wp_page_template', 'default'),
(2, 3, '_wp_page_template', 'default'),
(3, 16, '_edit_last', '1'),
(4, 16, '_edit_lock', '1544753551:1'),
(5, 8, '_edit_lock', '1545100903:1'),
(6, 8, '_edit_last', '1'),
(7, 25, '_edit_last', '1'),
(8, 25, '_edit_lock', '1545271702:1');

-- --------------------------------------------------------

--
-- Table structure for table `wp_posts`
--

CREATE TABLE `wp_posts` (
  `ID` bigint(20) UNSIGNED NOT NULL,
  `post_author` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `post_date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_date_gmt` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_content` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `post_title` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `post_excerpt` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `post_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'publish',
  `comment_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'open',
  `ping_status` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'open',
  `post_password` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `post_name` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `to_ping` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `pinged` text COLLATE utf8mb4_unicode_ci NOT NULL,
  `post_modified` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_modified_gmt` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `post_content_filtered` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `post_parent` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `guid` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `menu_order` int(11) NOT NULL DEFAULT '0',
  `post_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'post',
  `post_mime_type` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `comment_count` bigint(20) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_posts`
--

INSERT INTO `wp_posts` (`ID`, `post_author`, `post_date`, `post_date_gmt`, `post_content`, `post_title`, `post_excerpt`, `post_status`, `comment_status`, `ping_status`, `post_password`, `post_name`, `to_ping`, `pinged`, `post_modified`, `post_modified_gmt`, `post_content_filtered`, `post_parent`, `guid`, `menu_order`, `post_type`, `post_mime_type`, `comment_count`) VALUES
(1, 1, '2018-11-20 23:34:16', '2018-11-20 23:34:16', 'Welcome to WordPress. This is your first post. Edit or delete it, then start writing!', 'Hello world!', '', 'publish', 'open', 'open', '', 'hello-world', '', '', '2018-11-20 23:34:16', '2018-11-20 23:34:16', '', 0, 'http://localhost/wordpress/?p=1', 0, 'post', '', 1),
(2, 1, '2018-11-20 23:34:16', '2018-11-20 23:34:16', 'This is an example page. It\'s different from a blog post because it will stay in one place and will show up in your site navigation (in most themes). Most people start with an About page that introduces them to potential site visitors. It might say something like this:\n\n<blockquote>Hi there! I\'m a bike messenger by day, aspiring actor by night, and this is my website. I live in Los Angeles, have a great dog named Jack, and I like pi&#241;a coladas. (And gettin\' caught in the rain.)</blockquote>\n\n...or something like this:\n\n<blockquote>The XYZ Doohickey Company was founded in 1971, and has been providing quality doohickeys to the public ever since. Located in Gotham City, XYZ employs over 2,000 people and does all kinds of awesome things for the Gotham community.</blockquote>\n\nAs a new WordPress user, you should go to <a href=\"http://localhost/wordpress/wp-admin/\">your dashboard</a> to delete this page and create new pages for your content. Have fun!', 'Sample Page', '', 'publish', 'closed', 'open', '', 'sample-page', '', '', '2018-11-20 23:34:16', '2018-11-20 23:34:16', '', 0, 'http://localhost/wordpress/?page_id=2', 0, 'page', '', 0),
(3, 1, '2018-11-20 23:34:16', '2018-11-20 23:34:16', '<h2>Who we are</h2><p>Our website address is: http://localhost/wordpress.</p><h2>What personal data we collect and why we collect it</h2><h3>Comments</h3><p>When visitors leave comments on the site we collect the data shown in the comments form, and also the visitor&#8217;s IP address and browser user agent string to help spam detection.</p><p>An anonymized string created from your email address (also called a hash) may be provided to the Gravatar service to see if you are using it. The Gravatar service privacy policy is available here: https://automattic.com/privacy/. After approval of your comment, your profile picture is visible to the public in the context of your comment.</p><h3>Media</h3><p>If you upload images to the website, you should avoid uploading images with embedded location data (EXIF GPS) included. Visitors to the website can download and extract any location data from images on the website.</p><h3>Contact forms</h3><h3>Cookies</h3><p>If you leave a comment on our site you may opt-in to saving your name, email address and website in cookies. These are for your convenience so that you do not have to fill in your details again when you leave another comment. These cookies will last for one year.</p><p>If you have an account and you log in to this site, we will set a temporary cookie to determine if your browser accepts cookies. This cookie contains no personal data and is discarded when you close your browser.</p><p>When you log in, we will also set up several cookies to save your login information and your screen display choices. Login cookies last for two days, and screen options cookies last for a year. If you select &quot;Remember Me&quot;, your login will persist for two weeks. If you log out of your account, the login cookies will be removed.</p><p>If you edit or publish an article, an additional cookie will be saved in your browser. This cookie includes no personal data and simply indicates the post ID of the article you just edited. It expires after 1 day.</p><h3>Embedded content from other websites</h3><p>Articles on this site may include embedded content (e.g. videos, images, articles, etc.). Embedded content from other websites behaves in the exact same way as if the visitor has visited the other website.</p><p>These websites may collect data about you, use cookies, embed additional third-party tracking, and monitor your interaction with that embedded content, including tracking your interaction with the embedded content if you have an account and are logged in to that website.</p><h3>Analytics</h3><h2>Who we share your data with</h2><h2>How long we retain your data</h2><p>If you leave a comment, the comment and its metadata are retained indefinitely. This is so we can recognize and approve any follow-up comments automatically instead of holding them in a moderation queue.</p><p>For users that register on our website (if any), we also store the personal information they provide in their user profile. All users can see, edit, or delete their personal information at any time (except they cannot change their username). Website administrators can also see and edit that information.</p><h2>What rights you have over your data</h2><p>If you have an account on this site, or have left comments, you can request to receive an exported file of the personal data we hold about you, including any data you have provided to us. You can also request that we erase any personal data we hold about you. This does not include any data we are obliged to keep for administrative, legal, or security purposes.</p><h2>Where we send your data</h2><p>Visitor comments may be checked through an automated spam detection service.</p><h2>Your contact information</h2><h2>Additional information</h2><h3>How we protect your data</h3><h3>What data breach procedures we have in place</h3><h3>What third parties we receive data from</h3><h3>What automated decision making and/or profiling we do with user data</h3><h3>Industry regulatory disclosure requirements</h3>', 'Privacy Policy', '', 'draft', 'closed', 'open', '', 'privacy-policy', '', '', '2018-11-20 23:34:16', '2018-11-20 23:34:16', '', 0, 'http://localhost/wordpress/?page_id=3', 0, 'page', '', 0),
(5, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', 'Welcome [MM_Member_Data name=\'firstName\']!\nThis is the member home page for [MM_Member_Data name=\'membershipName\'] members.', '[MM_Member_Data name=\"membershipName\"] Home Page', '', 'publish', 'open', 'open', '', 'home', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(6, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', '[MM_Member_Decision isMember=\'true\' status=\'active|overdue\']\nClick the link below to cancel your membership:\n<a href=\"[MM_Member_Link type=\'cancelMembership\']\">Cancel Membership</a>\n[/MM_Member_Decision]\n\n[MM_Member_Decision isMember=\'true\' status=\'pending_cancel\']\nYour subscription has been canceled and you will no longer be billed.\nYour account will remain active until [MM_Member_Data name=\'cancellationDate\' dateFormat=\'M j, Y\'].\n[/MM_Member_Decision]\n\n[MM_Member_Decision status=\'canceled\']\nYour account is now canceled.\n[/MM_Member_Decision]\n\n[MM_Member_Decision isMember=\'false\']\nYour account is canceled.\n[/MM_Member_Decision]', 'Cancel Membership', '', 'publish', 'open', 'open', '', 'cancel', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(7, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', 'An error has occurred:\n<span style=\"color:#cc0000;\">[MM_Error_Message]</span>\n\nIf you continue to experience this problem, please contact our support team at <a href=\"mailto:[MM_Employee_Data name=\'email\']\">[MM_Employee_Data name=\'email\']</a>.', 'Error', '', 'publish', 'open', 'open', '', 'mm-error', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(8, 1, '2018-11-21 06:34:48', '2018-11-21 06:34:48', '[MM_Member_Decision isMember=\'true\']\r\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\r\n[/MM_Member_Decision]\r\n\r\n[MM_Member_Decision isMember=\'false\']\r\n[MM_Form type=\'login\']\r\n<div class=\"mm-login\">\r\n<div class=\"loginbox\">\r\n\r\n[MM_Form_Message type=\'success\']\r\n[MM_Form_Message type=\'error\']\r\n<h3>Members Login Here</h3>\r\n<div class=\"mm-field-column username\">[MM_Form_Field name=\'username\']</div>\r\n<div class=\"mm-field-column password\">[MM_Form_Field name=\'password\']</div>\r\n<div class=\"forgotpass\"><a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a></div>\r\n<div class=\"loginbtn\">[MM_Form_Button type=\'login\' label=\'Login\']</div>\r\n<div class=\"rememberme\">\r\n<label for=\"rememberme\" class=\"mm-remember-me\">\r\n<input name=\"rememberme\" id=\"rememberme\" type=\"checkbox\" checked=\"checked\" value=\"forever\">\r\nRemember me</label>\r\n</div>\r\n</div>\r\n</div>\r\n[/MM_Form]\r\n[/MM_Member_Decision]', 'Login', '', 'publish', 'open', 'open', '', 'login', '', '', '2018-12-18 02:13:09', '2018-12-18 02:13:09', '', 0, '', 0, 'page', '', 0),
(9, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', 'You have successfully logged out.', 'Logout', '', 'publish', 'open', 'open', '', 'logout', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(10, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', '[MM_Form type=\'forgotPassword\']\n<div class=\"mm-forgot-password\">\n[MM_Form_Message type=\'error\']\n[MM_Form_Message type=\'success\']\n\n<h3>Enter your email address below</h3>\n[MM_Form_Field name=\'email\']\n[MM_Form_Button type=\'submit\' label=\'Submit\']\n</div>\n[/MM_Form]', 'Forgot Password', '', 'publish', 'open', 'open', '', 'forgot-password', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(11, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', '[MM_Member_Decision isMember=\'true\']\nYou are already logged in! Need to log out? You can do that <a href=\"[MM_CorePage_Link type=\'logout\']\" title=\"Log out\">here</a>.\n[/MM_Member_Decision]\n\n[MM_Member_Decision isMember=\'false\']\n[MM_Form type=\'resetPassword\']\n<div class=\"mm-resetpassword\">\n[MM_Form_Message type=\'error\']\n\n<h3>Reset your password</h3>\n\n<table>\n    <tr>\n      	<td class=\"mm-label-column\">\n      		<span class=\'mm-label\'>Password</span>\n      	</td>\n      	<td class=\"mm-field-column\">\n      		[MM_Form_Field name=\'password\']\n      	</td>\n    </tr>\n    <tr>\n      	<td class=\"mm-label-column\">\n      		<span class=\'mm-label\'>Confirm Password</span>\n      	</td>\n      	<td class=\"mm-field-column\">\n      		[MM_Form_Field name=\'password-confirm\']\n      	</td>\n    </tr>\n    <tr>\n      	<td class=\"mm-label-column\"></td>\n      	<td class=\"mm-field-column\">\n      		[MM_Form_Button type=\'submit\' label=\'Submit\']\n      	</td>\n    </tr>\n</table>\n</div>\n[/MM_Form]\n[/MM_Member_Decision]', 'Reset Password', '', 'publish', 'open', 'open', '', 'reset-password', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(12, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', '<div class=\"mm-checkoutContainer\">\n[MM_Form type=\'checkout\']\n[MM_Form_Message type=\'error\']\n	<div class=\"mm_left_column\">\n		[MM_Form_Section type=\'accountInfo\']\n		<div id=\"mm-account-information-section\" class=\"mm-checkoutInfoBlock\">\n			<h3>Account Information</h3>\n			<p class=\"mm-formField\">\n				<label>First Name:</label>\n				[MM_Form_Field type=\'input\' name=\'firstName\' customAttributes=\'placeholder=\"First Name\"\']\n			</p>\n			<p class=\"mm-formField\">\n				<label>Last Name:</label>\n				[MM_Form_Field type=\'input\' name=\'lastName\' customAttributes=\'placeholder=\"Last Name\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Email:</label>\n				[MM_Form_Field type=\'input\' name=\'email\' customAttributes=\'placeholder=\"Email Address\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Password:</label>\n				[MM_Form_Field type=\'input\' name=\'password\' customAttributes=\'placeholder=\"Password\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Phone:</label>\n				[MM_Form_Field type=\'input\' name=\'phone\' isRequired=\'false\' customAttributes=\'placeholder=\"Phone Number\"\'] \n			</p>\n\n		</div>\n		[/MM_Form_Section]		\n		[MM_Form_Section type=\'billingInfo\']\n		<div id=\"mm-billing-information-section\" class=\"mm-checkoutInfoBlock\">\n			<h3>Billing Details</h3>\n			<p class=\"mm-ccLogos\"><img src=\"http://localhost/wordpress/wp-content/plugins/membermouse/resources/images/cclogos.gif\" width=\"199\" height=\"30\" alt=\"Visa, Master Card, American Express, Discover\" />\n			</p>\n			<p class=\"mm-formField\">\n				<label>Credit Card:</label>\n				[MM_Form_Field name=\'ccNumber\' customAttributes=\'placeholder=\"Credit Card Number\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Security Code:</label>\n				[MM_Form_Field name=\'ccSecurityCode\' customAttributes=\'placeholder=\"Security Code\"\'] \n			</p>\n			<p id=\"mm-checkout-expiration-date\" class=\"mm-checkout-expiration-date mm-formField\">\n				<label>Expiration Date: </label>\n				[MM_Form_Field name=\'ccExpirationDate\'] \n			</p>\n			\n			<p style=\"clear:both;\"></p>\n			 \n			<h3 class=\"mm-hr\">Billing Address</h3>\n			\n			<p class=\"mm-formField\">\n				<label>Address:</label>\n				[MM_Form_Field name=\'billingAddress\' customAttributes=\'placeholder=\"Billing Address\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>City:</label>\n				[MM_Form_Field name=\'billingCity\' customAttributes=\'placeholder=\"Billing City\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>State:</label>\n				[MM_Form_Field name=\'billingState\' customAttributes=\'placeholder=\"Billing State\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Zip:</label>\n				[MM_Form_Field name=\'billingZipCode\' customAttributes=\'placeholder=\"Billing Zip Code\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Country:</label>\n				[MM_Form_Field name=\'billingCountry\'] \n			</p>\n\n		</div>\n		[/MM_Form_Section]\n		[MM_Form_Section type=\'shippingInfo\']\n		<div id=\"mm-shipping-information-section\" class=\"mm-checkoutInfoBlock\">\n\n			<h3>Shipping Address</h3>\n			\n			<p id=\"mm-shipping-method-block\" class=\"mm-formField\">\n				<label>Shipping Method:</label>\n				[MM_Form_Field name=\'shippingMethod\'] \n			</p>\n			<p class=\"mm-formField\"> \n				Shipping is the same as billing\n				[MM_Form_Field name=\'shippingSameAsBilling\']\n			</p>\n			\n			[MM_Form_Subsection type=\'shippingAddress\']\n			<div>\n				<p class=\"mm-formField\">\n					<label>Address:</label>\n					[MM_Form_Field name=\'shippingAddress\' customAttributes=\'placeholder=\"Shipping Address\"\'] \n				</p>\n				<p class=\"mm-formField\">\n					<label>City:</label>\n					[MM_Form_Field name=\'shippingCity\' customAttributes=\'placeholder=\"Shipping City\"\'] \n				</p>\n				<p class=\"mm-formField\">\n					<label>State:</label>\n					[MM_Form_Field name=\'shippingState\' customAttributes=\'placeholder=\"Shipping State\"\'] \n				</p>\n				<p class=\"mm-formField\">\n					<label>Zip :</label>\n					[MM_Form_Field name=\'shippingZipCode\' customAttributes=\'placeholder=\"Shipping Zip Code\"\'] \n				</p>\n				<p class=\"mm-formField\">\n					<label>Country:</label>\n					[MM_Form_Field name=\'shippingCountry\'] \n				</p>\n			</div>\n			[/MM_Form_Subsection] 			\n		</div>\n		[/MM_Form_Section]\n		[MM_Form_Section type=\'coupon\']\n		<div id=\"mm-coupon-block\" class=\"mm-couponSection mm-checkoutInfoBlock\">\n\n			<h3>Coupons</h3>\n			<p class=\"mm-formField\"> \n				[MM_Form_Field name=\'couponCode\'] \n				<a href=\"[MM_Form_Button type=\'applyCoupon\']\" class=\"mm-button\">Apply Coupon</a>\n			</p>\n				\n			[MM_Form_Message type=\'couponSuccess\']\n			[MM_Form_Message type=\'couponError\']  \n		</div>\n		[/MM_Form_Section]\n	</div>\n	<div class=\"mm_right_column\">\n		<div class=\"mm-checkoutSection2\">\n			<h2>[MM_Form_Data name=\'productName\' useAccessName=\'false\']</h2>\n			<p class=\"mm-productDesc\">[MM_Form_Data name=\'productDescription\']</p>\n			<ul>\n				<li><span class=\"mm-prices\">Product Price:</span> [MM_Form_Data name=\'productPriceDescription\'] </li>\n				[MM_Order_Decision isShippable=\'true\']\n				<li><span class=\"mm-prices\">Shipping Price:</span> [MM_Form_Data name=\'shippingPrice\'] </li>\n				[/MM_Order_Decision]\n				[MM_Order_Decision isDiscounted=\'true\']\n				<li><span class=\"mm-prices\">Discount:</span> [MM_Form_Data name=\'discount\'] </li>\n				[/MM_Order_Decision]\n				<li><span class=\"mm-prices\">Total Price:</span> [MM_Form_Data name=\'totalPrice\'] </li>\n			</ul>\n		</div>\n		<div class=\"mm-purchaseSection\">\n			<div class=\"mm-giftsection\">\n				[MM_Member_Decision isMember=\'true\']\n				<p>[MM_Form_Field type=\'input\' name=\'gift\'] Is this a gift?</p>\n				[/MM_Member_Decision]\n			</div>\n			<div class=\"mm-paymentbuttons\">\n				[MM_Form_Button type=\'all\' label=\'Submit Order\' color=\'orange\']\n			</div>\n		</div>\n	</div>\n[/MM_Form]\n</div>', 'Checkout', '', 'publish', 'open', 'open', '', 'checkout', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(13, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', '<div class=\"mm-checkoutContainer\">\n[MM_Form type=\'checkout\']\n[MM_Form_Message type=\'error\']\n	<div class=\"mm_left_column\">\n		[MM_Form_Section type=\'accountInfo\']\n		<div id=\"mm-account-information-section\" class=\"mm-checkoutInfoBlock\">\n			<h3>Account Information</h3>\n			<p class=\"mm-formField\">\n				<label>First Name:</label>\n				[MM_Form_Field type=\'input\' name=\'firstName\' customAttributes=\'placeholder=\"First Name\"\']\n			</p>\n			<p class=\"mm-formField\">\n				<label>Last Name:</label>\n				[MM_Form_Field type=\'input\' name=\'lastName\' customAttributes=\'placeholder=\"Last Name\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Email:</label>\n				[MM_Form_Field type=\'input\' name=\'email\' customAttributes=\'placeholder=\"Email Address\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Password:</label>\n				[MM_Form_Field type=\'input\' name=\'password\' customAttributes=\'placeholder=\"Password\"\'] \n			</p>\n			<p class=\"mm-formField\">\n				<label>Phone:</label>\n				[MM_Form_Field type=\'input\' name=\'phone\' isRequired=\'false\' customAttributes=\'placeholder=\"Phone Number\"\'] \n			</p>\n		</div>\n		[/MM_Form_Section]		\n		\n		[MM_Form_Section type=\'coupon\']\n		<div id=\"mm-coupon-block\" class=\"mm-couponSection mm-checkoutInfoBlock\">\n\n			<h3>Gift Code</h3>\n			<p class=\"mm-formField\"> \n				[MM_Form_Field name=\'couponCode\'] \n				<a href=\"[MM_Form_Button type=\'applyCoupon\']\" class=\"mm-button\">Apply Gift Code</a>\n			</p>\n				\n			[MM_Form_Message type=\'couponSuccess\']\n			[MM_Form_Message type=\'couponError\']  \n		</div>\n		[/MM_Form_Section]\n	</div>\n	<div class=\"mm_right_column\">\n		<div class=\"mm-checkoutSection2\">\n			<h2>[MM_Form_Data name=\'productName\']</h2>\n			<p class=\"mm-productDesc\">[MM_Form_Data name=\'productDescription\']</p>\n		</div>\n		<div class=\"mm-purchaseSection\">\n			[MM_Order_Decision isDiscounted=\'true\']\n				<a href=\"[MM_Form_Button type=\'submit\']\" class=\"mm-button large green\">Redeem Gift</a>\n			[/MM_Order_Decision]\n			[MM_Order_Decision isDiscounted=\'false\']\n				<em>Enter a valid gift code to redeem your gift</em>\n			[/MM_Order_Decision]\n		</div>\n	</div>\n	\n	[MM_Form_Field type=\'hidden\' name=\'phone\'] \n	[MM_Form_Field type=\'hidden\' name=\'billingAddress\'] \n	[MM_Form_Field type=\'hidden\' name=\'billingCity\']\n	[MM_Form_Field type=\'hidden\' name=\'billingState\'] \n	[MM_Form_Field type=\'hidden\' name=\'billingZipCode\'] \n	[MM_Form_Field type=\'hidden\' name=\'billingCountry\'] \n	[MM_Form_Field type=\'hidden\' name=\'shippingAddress\'] \n	[MM_Form_Field type=\'hidden\' name=\'shippingCity\'] \n	[MM_Form_Field type=\'hidden\' name=\'shippingState\'] \n	[MM_Form_Field type=\'hidden\' name=\'shippingZipCode\'] \n	[MM_Form_Field type=\'hidden\' name=\'shippingCountry\']\n[/MM_Form]\n</div>', 'Redeem Gift', '', 'publish', 'open', 'open', '', 'redeem-gift', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(14, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', '[MM_Form type=\'myaccount\']\n<div class=\"mm-myaccount\">\n  	[MM_Form_Message type=\'error\']\n  \n  	<div id=\"mm-account-details-section\" class=\"mm-myaccount-module\">\n	    <div id=\"mm-account-details-header\" class=\"mm-myaccount-module-header\"> \n	    	<i class=\"fa fa-user mm-icon blue\" style=\" font-size:1.2em; position:relative; top:1px;\"></i>	    	Account Details \n	    	<a href=\"[MM_Form_Button type=\'updateAccountDetails\']\" id=\"mm-account-details-update-button\" class=\"mm-update-button\">update</a>\n	    </div>\n	    <div class=\"mm-myaccount-content-wrapper\">\n		    <div id=\"mm-account-details-body\" class=\"mm-myaccount-block\">\n		    	<p id=\"mm-element-first-name\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-first-name\" class=\"mm-myaccount-label\">\n			    		First Name: \n			    	</span>\n			    	<span id=\"mm-data-first-name\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'firstName\']\n			    	</span>\n		    	</p>\n		    	<p id=\"mm-element-last-name\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-last-name\" class=\"mm-myaccount-label\">\n			    		Last Name: \n			    	</span>\n			    	<span id=\"mm-data-last-name\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'lastName\']\n			    	</span>\n		    	</p>\n		    	<p id=\"mm-element-phone\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-phone\" class=\"mm-myaccount-label\">\n			    		Phone: \n			    	</span>\n			    	<span id=\"mm-data-phone\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'phone\']\n			    	</span>\n		    	</p>\n		    	<p id=\"mm-element-email\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-email\" class=\"mm-myaccount-label\">\n			    		Email: \n			    	</span>\n			    	<span id=\"mm-data-email\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'email\']\n			    	</span>\n		    	</p>\n		    	<p id=\"mm-element-username\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-username\" class=\"mm-myaccount-label\">\n			    		Username: \n			    	</span>\n			    	<span id=\"mm-data-username\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'username\']\n			    	</span>\n		    	</p>\n		    	<p id=\"mm-element-password\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-password\" class=\"mm-myaccount-label\">\n			    		Password: \n			    	</span>\n			    	<span id=\"mm-data-password\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'password\']\n			    	</span>\n		    	</p>\n		    	<p id=\"mm-element-registration\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-registration\" class=\"mm-myaccount-label\">\n			    		Member Since: \n			    	</span>\n			    	<span id=\"mm-data-registration\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'registrationDate\']\n			    	</span>\n		    	</p>\n		    	[MM_Member_Decision status=\'pending_cancel\']\n		    	<p id=\"mm-element-pending-cancellation\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-pending-cancellation\" class=\"mm-myaccount-label\">\n			    		Account will cancel on [MM_Member_Data name=\'cancellationDate\' dateFormat=\'M j, Y\']\n			    	</span>\n		    	</p>\n		    	[/MM_Member_Decision]\n		    	<p id=\"mm-element-membership-level\" class=\"mm-myaccount-element\">\n			    	<span id=\"mm-label-membership-level\" class=\"mm-myaccount-label\">\n			    		Membership Level: \n			    	</span>\n			    	<span id=\"mm-data-membership-level\" class=\"mm-myaccount-data\">\n			    		[MM_Form_Data name=\'membershipLevelName\']\n			    		[MM_Member_Decision status=\'!pending_cancel\']\n			    		<a href=\"[MM_Form_Button type=\'cancelMembership\']\" class=\"mm-cancel-membership-button\">cancel</a>\n			    		[/MM_Member_Decision]\n			    	</span>\n		    	</p>\n		    </div>\n		    <div id=\"mm-account-profile-body\" class=\"mm-myaccount-block\">\n		    	[MM_Form_Data name=\'customFields\']\n		    </div>\n	    </div>\n  	</div>\n  \n  	<div id=\"mm-billing-shipping-info-section\" class=\"mm-myaccount-module\">\n    	<div id=\"mm-billing-info-container\" class=\"mm-myaccount-block\">\n      		<div id=\"mm-billing-info-header\" class=\"mm-myaccount-module-header\">\n      			<i class=\"fa fa-credit-card mm-icon blue\" style=\" font-size:1.2em; position:relative; top:1px;\"></i> \n      			Billing Address \n      			<a href=\"[MM_Form_Button type=\'updateBillingInfo\']\" id=\"mm-billing-info-update-button\" class=\"mm-update-button\">update</a>\n      		</div>\n      		<div class=\"mm-myaccount-content-wrapper\">\n	      		<div id=\"mm-billing-info-body\"> \n			    	<p id=\"mm-element-billing-address\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-billing-address\" class=\"mm-myaccount-label\">\n				    		Address: \n				    	</span>\n				    	<span id=\"mm-data-billing-address\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'billingAddress\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-billing-city\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-billing-city\" class=\"mm-myaccount-label\">\n				    		City: \n				    	</span>\n				    	<span id=\"mm-data-billing-city\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'billingCity\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-billing-state\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-billing-state\" class=\"mm-myaccount-label\">\n				    		State: \n				    	</span>\n				    	<span id=\"mm-data-billing-state\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'billingState\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-billing-zip-code\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-billing-zip-code\" class=\"mm-myaccount-label\">\n				    		Zip Code: \n				    	</span>\n				    	<span id=\"mm-data-billing-zip-code\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'billingZipCode\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-billing-country\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-billing-country\" class=\"mm-myaccount-label\">\n				    		Country: \n				    	</span>\n				    	<span id=\"mm-data-billing-country\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'billingCountry\']\n				    	</span>\n			    	</p>\n	      		</div>\n      		</div>\n    	</div>\n    	<div id=\"mm-shipping-info-container\" class=\"mm-myaccount-block\">\n      		<div id=\"mm-shipping-info-header\" class=\"mm-myaccount-module-header\">\n      			<i class=\"fa fa-truck mm-icon blue\" style=\" font-size:1.2em; position:relative; top:1px;\"></i>      			Shipping Address \n      			<a href=\"[MM_Form_Button type=\'updateShippingInfo\']\" id=\"mm-shipping-info-update-button\" class=\"mm-update-button\">update</a>\n      		</div>\n      		<div class=\"mm-myaccount-content-wrapper\">\n	      		<div id=\"mm-shipping-info-body\"> \n	      			<p id=\"mm-element-shipping-address\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-shipping-address\" class=\"mm-myaccount-label\">\n				    		Address: \n				    	</span>\n				    	<span id=\"mm-data-shipping-address\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'shippingAddress\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-shipping-city\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-shipping-city\" class=\"mm-myaccount-label\">\n				    		City: \n				    	</span>\n				    	<span id=\"mm-data-shipping-city\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'shippingCity\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-shipping-state\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-shipping-state\" class=\"mm-myaccount-label\">\n				    		State: \n				    	</span>\n				    	<span id=\"mm-data-shipping-state\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'shippingState\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-shipping-zip-code\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-shipping-zip-code\" class=\"mm-myaccount-label\">\n				    		Zip Code: \n				    	</span>\n				    	<span id=\"mm-data-shipping-zip-code\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'shippingZipCode\']\n				    	</span>\n			    	</p>\n			    	<p id=\"mm-element-shipping-country\" class=\"mm-myaccount-element\">\n				    	<span id=\"mm-label-shipping-country\" class=\"mm-myaccount-label\">\n				    		Country: \n				    	</span>\n				    	<span id=\"mm-data-shipping-country\" class=\"mm-myaccount-data\">\n				    		[MM_Form_Data name=\'shippingCountry\']\n				    	</span>\n			    	</p>\n	      		</div>\n      		</div>\n    	</div>\n	</div>\n  \n  	<div id=\"mm-subscription-info-section\" class=\"mm-myaccount-module\">\n    	<div id=\"mm-subscription-info-header\" class=\"mm-myaccount-module-header\"> \n    		<i class=\"fa fa-refresh mm-icon blue\" style=\" font-size:1.2em; position:relative; top:1px;\"></i> \n    		Subscriptions \n    	</div>\n    	<div class=\"mm-myaccount-content-wrapper\">\n	    	<div id=\"mm-subscription-info-body\"> \n	    		[MM_Form_Data name=\'subscriptions\']\n	    	</div>\n    	</div>\n  	</div>\n  \n  	<div id=\"mm-order-history-section\" class=\"mm-myaccount-module\">\n    	<div id=\"mm-order-history-header\" class=\"mm-myaccount-module-header\">\n    		<i class=\"fa fa-shopping-cart mm-icon blue\" style=\" font-size:1.2em; position:relative; top:1px;\"></i>    		Order History (most recent orders)\n    		<a href=\"[MM_Form_Button type=\'viewOrderHistory\']\" id=\"mm-order-history-view-all-button\" class=\"mm-update-button\">view all</a>\n    	</div>\n    	<div id=\"mm-order-history-body\" class=\"mm-myaccount-content-wrapper\">\n      		[MM_Form_Data name=\'orderHistory\']\n    	</div>\n  	</div>\n  	\n  	[MM_Form_Section type=\'gifts\']\n  	<div id=\"mm-gifts-section\" class=\"mm-myaccount-module\">\n    	<div id=\"mm-gifts-header\" class=\"mm-myaccount-module-header\">\n    		<i class=\"fa fa-gift mm-icon purple\" style=\" font-size:1.2em; position:relative; top:1px;\"></i>    		Gifts Purchased (most recent gifts)\n    		<a href=\"[MM_Form_Button type=\'viewGiftHistory\']\" id=\"mm-gifts-view-all-button\" class=\"mm-update-button\">view all</a>\n    	</div>\n    	<div id=\"mm-gifts-body\" class=\"mm-myaccount-content-wrapper\">\n      		[MM_Form_Data name=\'gifts\']\n    	</div>\n  	</div>\n  	[/MM_Form_Section]\n    \n    [MM_Form_Section type=\'socialLogin\']\n    <div id=\"mm-social-login-section\" class=\"mm-myaccount-module\">\n   		<div id=\"mm-social-login-header\" class=\"mm-myaccount-module-header\"> \n    	Social Networks\n    	</div>\n        <div class=\"mm-myaccount-content-wrapper\">\n	   	<div id=\"mm-social-login-body\">\n	    	[MM_Form_Data name=\'socialLogin\']\n	    </div>\n   		</div>\n     </div>\n     [/MM_Form_Section]\n\n</div>\n[/MM_Form]', 'My Account', '', 'publish', 'open', 'open', '', 'myaccount', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(15, 1, '2018-11-21 06:34:48', '0000-00-00 00:00:00', '\n<h3>Thank you for your order, [MM_Member_Data name=\'firstName\']!</h3>\n\n<p>\n<strong>Your login credentials are:</strong><br/>\nUsername: [MM_Member_Data name=\'username\']<br/>\nPassword: <em>Hidden for security purposes</em>\n</p>\n\n[MM_Order_Decision isGift=\'true\']\n<p>\nThis item was purchased as a gift. The following link can be used to redeem the gift:<br/>\n[MM_Order_Data name=\'giftLink\']\n</p>\n[/MM_Order_Decision]\n\n<p>\n<strong>Here are your order details:</strong><br/>\nName: [MM_Member_Data name=\'firstName\'] [MM_Member_Data name=\'lastName\']<br/>\nEmail: [MM_Member_Data name=\'email\']\n</p>\n\n[MM_Order_Decision isFree=\'false\']\n<p>\nOrder ID: [MM_Order_Data name=\'id\']<br/>\nSubtotal: [MM_Order_Data name=\'subtotal\' doFormat=\'true\']<br/>\n[MM_Order_Subdecision isDiscounted=\'true\']\nDiscount: [MM_Order_Data name=\'discount\' doFormat=\'true\']<br/>\n[/MM_Order_Subdecision]\n[MM_Order_Subdecision isShippable=\'true\']\nShipping: [MM_Order_Data name=\'shipping\' doFormat=\'true\']<br/>\n[/MM_Order_Subdecision]\nOrder Total: [MM_Order_Data name=\'total\' doFormat=\'true\']\n</p>\n\n<p>\nBilling Address:<br/>\n[MM_Order_Data name=\'billingAddress\']<br/>\n[MM_Order_Data name=\'billingCity\'], [MM_Order_Data name=\'billingState\'] [MM_Order_Data name=\'billingZipCode\']<br/>\n[MM_Order_Data name=\'billingCountry\']<br/>\n</p>\n[/MM_Order_Decision]\n\n[MM_Order_Decision isShippable=\'true\']\n<p>\nShipping Address:<br/>\n[MM_Order_Data name=\'shippingAddress\']<br/>\n[MM_Order_Data name=\'shippingCity\'], [MM_Order_Data name=\'shippingState\'] [MM_Order_Data name=\'shippingZipCode\']<br/>\n[MM_Order_Data name=\'shippingCountry\']<br/><br/>\n\nShipping Method: [MM_Order_Data name=\'shippingMethod\']\n</p>\n[/MM_Order_Decision]\n\n<p>If you have any questions concerning your order, feel free to contact us at <a href=\"mailto:[MM_Employee_Data name=\'email\']\">[MM_Employee_Data name=\'email\']</a>.</p>', 'Thank You', '', 'publish', 'open', 'open', '', 'confirmation', '', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', 0, '', 0, 'page', '', 0),
(16, 1, '2018-12-14 02:05:49', '2018-12-14 02:05:49', '', 'Member dashboard', '', 'publish', 'closed', 'closed', '', 'member-dashboard', '', '', '2018-12-14 02:05:49', '2018-12-14 02:05:49', '', 0, 'http://localhost/wordpress/?page_id=16', 0, 'page', '', 0),
(17, 1, '2018-12-14 02:05:49', '2018-12-14 02:05:49', '', 'Member dashboard', '', 'inherit', 'closed', 'closed', '', '16-revision-v1', '', '', '2018-12-14 02:05:49', '2018-12-14 02:05:49', '', 16, 'http://localhost/wordpress/2018/12/14/16-revision-v1/', 0, 'revision', '', 0),
(18, 1, '2018-12-17 02:05:45', '2018-12-17 02:05:45', '[MM_Member_Decision isMember=\'true\']\r\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\r\n[/MM_Member_Decision]\r\n\r\n[MM_Member_Decision isMember=\'false\']\r\n[MM_Form type=\'login\']\r\n<div class=\"mm-login\">[MM_Form_Message type=\'error\']\r\n[MM_Form_Message type=\'success\']\r\n<h3>Members Login Here</h3>\r\n<table>\r\n<tbody>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\">[MM_Form_Field name=\'username\']</td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\">[MM_Form_Field name=\'password\']</td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\">[MM_Form_Button type=\'login\' label=\'Login\']\r\n[MM_Form_Field name=\'rememberMe\' label=\'Remember me\']</td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"><a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n</div>\r\n[/MM_Form]\r\n[/MM_Member_Decision]', 'Login', '', 'inherit', 'closed', 'closed', '', '8-revision-v1', '', '', '2018-12-17 02:05:45', '2018-12-17 02:05:45', '', 8, 'http://localhost/wordpress/2018/12/17/8-revision-v1/', 0, 'revision', '', 0),
(19, 1, '2018-12-18 02:12:57', '2018-12-18 02:12:57', '[MM_Member_Decision isMember=\'true\']\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\n[/MM_Member_Decision]\n\n[MM_Member_Decision isMember=\'false\']\n[MM_Form type=\'login\']\n<div class=\"mm-login\">\n<div class=\"loginbox\">\n\n[MM_Form_Message type=\'success\']\n[MM_Form_Message type=\'error\']\n<h3>Members Login Here</h3>\n<div class=\"mm-field-column username\">[MM_Form_Field name=\'username\']</div>\n<div class=\"mm-field-column password\">[MM_Form_Field name=\'password\']</div>\n<div class=\"forgotpass\"><a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a></div>\n<div class=\"loginbtn\">[MM_Form_Button type=\'login\' label=\'Login\']</div>\n<div class=\"rememberme\">\n[MM_Form_Field name=\'rememberMe\' label=\'Remember me\']\n</div>\n</div>\n</div>\n[/MM_Form]\n[/MM_Member_Decision]', 'Login', '', 'inherit', 'closed', 'closed', '', '8-autosave-v1', '', '', '2018-12-18 02:12:57', '2018-12-18 02:12:57', '', 8, 'http://localhost/wordpress/2018/12/17/8-autosave-v1/', 0, 'revision', '', 0),
(20, 1, '2018-12-17 02:11:24', '2018-12-17 02:11:24', '[MM_Member_Decision isMember=\'true\']\r\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\r\n[/MM_Member_Decision]\r\n\r\n[MM_Member_Decision isMember=\'false\']\r\n[MM_Form type=\'login\']\r\n<div class=\"mm-login\">[MM_Form_Message type=\'error\']\r\n[MM_Form_Message type=\'success\']\r\n<div class=\"loginbox\">\r\n<h3>Members Login Here</h3>\r\n[MM_Form_Field name=\'username\']\r\n\r\n[MM_Form_Field name=\'password\']\r\n\r\n[MM_Form_Button type=\'login\' label=\'Login\']\r\n\r\n[MM_Form_Field name=\'rememberMe\' label=\'Remember me\']\r\n\r\n<a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a>\r\n</div>\r\n<table>\r\n<tbody>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n</div>\r\n[/MM_Form]\r\n[/MM_Member_Decision]', 'Login', '', 'inherit', 'closed', 'closed', '', '8-revision-v1', '', '', '2018-12-17 02:11:24', '2018-12-17 02:11:24', '', 8, 'http://localhost/wordpress/2018/12/17/8-revision-v1/', 0, 'revision', '', 0),
(21, 1, '2018-12-17 02:17:04', '2018-12-17 02:17:04', '[MM_Member_Decision isMember=\'true\']\r\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\r\n[/MM_Member_Decision]\r\n\r\n[MM_Member_Decision isMember=\'false\']\r\n[MM_Form type=\'login\']\r\n<div class=\"mm-login\">[MM_Form_Message type=\'error\']\r\n[MM_Form_Message type=\'success\']\r\n<div class=\"loginbox\">\r\n<h3>Members Login Here</h3>\r\n\r\n<div class=\"mm-field-column username\">\r\n[MM_Form_Field name=\'username\']\r\n</div>\r\n\r\n<div class=\"mm-field-column password\">\r\n[MM_Form_Field name=\'password\']\r\n</div>\r\n\r\n<div class=\"forgotpass\">\r\n<a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a>\r\n</div>\r\n<div class=\"loginbtn\">\r\n[MM_Form_Button type=\'login\' label=\'Login\']\r\n</div>\r\n<div class=\"rememberme\">\r\n[MM_Form_Field name=\'rememberMe\' label=\'Remember me\']\r\n</div>\r\n</div>\r\n<table>\r\n<tbody>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n</div>\r\n[/MM_Form]\r\n[/MM_Member_Decision]', 'Login', '', 'inherit', 'closed', 'closed', '', '8-revision-v1', '', '', '2018-12-17 02:17:04', '2018-12-17 02:17:04', '', 8, 'http://localhost/wordpress/2018/12/17/8-revision-v1/', 0, 'revision', '', 0),
(22, 1, '2018-12-17 02:18:34', '2018-12-17 02:18:34', '[MM_Member_Decision isMember=\'true\']\r\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\r\n[/MM_Member_Decision]\r\n\r\n[MM_Member_Decision isMember=\'false\']\r\n[MM_Form type=\'login\']\r\n<div class=\"mm-login\">\r\n\r\n<div class=\"loginbox\">\r\n<h3>Members Login Here</h3>\r\n\r\n[MM_Form_Message type=\'success\']\r\n[MM_Form_Message type=\'error\']\r\n\r\n<div class=\"mm-field-column username\">\r\n[MM_Form_Field name=\'username\']\r\n</div>\r\n\r\n<div class=\"mm-field-column password\">\r\n[MM_Form_Field name=\'password\']\r\n</div>\r\n\r\n<div class=\"forgotpass\">\r\n<a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a>\r\n</div>\r\n<div class=\"loginbtn\">\r\n[MM_Form_Button type=\'login\' label=\'Login\']\r\n</div>\r\n<div class=\"rememberme\">\r\n[MM_Form_Field name=\'rememberMe\' label=\'Remember me\']\r\n</div>\r\n</div>\r\n<table>\r\n<tbody>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n</div>\r\n[/MM_Form]\r\n[/MM_Member_Decision]', 'Login', '', 'inherit', 'closed', 'closed', '', '8-revision-v1', '', '', '2018-12-17 02:18:34', '2018-12-17 02:18:34', '', 8, 'http://localhost/wordpress/2018/12/17/8-revision-v1/', 0, 'revision', '', 0),
(23, 1, '2018-12-17 02:19:08', '2018-12-17 02:19:08', '[MM_Member_Decision isMember=\'true\']\r\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\r\n[/MM_Member_Decision]\r\n\r\n[MM_Member_Decision isMember=\'false\']\r\n[MM_Form type=\'login\']\r\n<div class=\"mm-login\">\r\n\r\n<div class=\"loginbox\">\r\n\r\n[MM_Form_Message type=\'success\']\r\n[MM_Form_Message type=\'error\']\r\n\r\n<h3>Members Login Here</h3>\r\n\r\n\r\n<div class=\"mm-field-column username\">\r\n[MM_Form_Field name=\'username\']\r\n</div>\r\n\r\n<div class=\"mm-field-column password\">\r\n[MM_Form_Field name=\'password\']\r\n</div>\r\n\r\n<div class=\"forgotpass\">\r\n<a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a>\r\n</div>\r\n<div class=\"loginbtn\">\r\n[MM_Form_Button type=\'login\' label=\'Login\']\r\n</div>\r\n<div class=\"rememberme\">\r\n[MM_Form_Field name=\'rememberMe\' label=\'Remember me\']\r\n</div>\r\n</div>\r\n<table>\r\n<tbody>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n<tr>\r\n<td class=\"mm-label-column\"></td>\r\n<td class=\"mm-field-column\"></td>\r\n</tr>\r\n</tbody>\r\n</table>\r\n</div>\r\n[/MM_Form]\r\n[/MM_Member_Decision]', 'Login', '', 'inherit', 'closed', 'closed', '', '8-revision-v1', '', '', '2018-12-17 02:19:08', '2018-12-17 02:19:08', '', 8, 'http://localhost/wordpress/2018/12/17/8-revision-v1/', 0, 'revision', '', 0),
(24, 1, '2018-12-18 02:13:09', '2018-12-18 02:13:09', '[MM_Member_Decision isMember=\'true\']\r\nYou are already logged in! Need to log out? You can do that <a title=\"Log out\" href=\"[MM_CorePage_Link type=\'logout\']\">here</a>.\r\n[/MM_Member_Decision]\r\n\r\n[MM_Member_Decision isMember=\'false\']\r\n[MM_Form type=\'login\']\r\n<div class=\"mm-login\">\r\n<div class=\"loginbox\">\r\n\r\n[MM_Form_Message type=\'success\']\r\n[MM_Form_Message type=\'error\']\r\n<h3>Members Login Here</h3>\r\n<div class=\"mm-field-column username\">[MM_Form_Field name=\'username\']</div>\r\n<div class=\"mm-field-column password\">[MM_Form_Field name=\'password\']</div>\r\n<div class=\"forgotpass\"><a class=\"mm-forgot-password\" href=\"[MM_CorePage_Link type=\'forgotPassword\']\">Forgot Password</a></div>\r\n<div class=\"loginbtn\">[MM_Form_Button type=\'login\' label=\'Login\']</div>\r\n<div class=\"rememberme\">\r\n<label for=\"rememberme\" class=\"mm-remember-me\">\r\n<input name=\"rememberme\" id=\"rememberme\" type=\"checkbox\" checked=\"checked\" value=\"forever\">\r\nRemember me</label>\r\n</div>\r\n</div>\r\n</div>\r\n[/MM_Form]\r\n[/MM_Member_Decision]', 'Login', '', 'inherit', 'closed', 'closed', '', '8-revision-v1', '', '', '2018-12-18 02:13:09', '2018-12-18 02:13:09', '', 8, 'http://renshawspt.local/2018/12/18/8-revision-v1/', 0, 'revision', '', 0),
(25, 1, '2018-12-20 01:52:13', '2018-12-20 01:52:13', '', 'Get Started', '', 'publish', 'closed', 'closed', '', 'get-started', '', '', '2018-12-20 01:52:13', '2018-12-20 01:52:13', '', 0, 'http://renshawspt.local/?page_id=25', 0, 'page', '', 0),
(26, 1, '2018-12-20 01:52:13', '2018-12-20 01:52:13', '', 'Get Started', '', 'inherit', 'closed', 'closed', '', '25-revision-v1', '', '', '2018-12-20 01:52:13', '2018-12-20 01:52:13', '', 25, 'http://renshawspt.local/2018/12/20/25-revision-v1/', 0, 'revision', '', 0);

-- --------------------------------------------------------

--
-- Table structure for table `wp_termmeta`
--

CREATE TABLE `wp_termmeta` (
  `meta_id` bigint(20) UNSIGNED NOT NULL,
  `term_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `meta_key` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `meta_value` longtext COLLATE utf8mb4_unicode_ci
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- --------------------------------------------------------

--
-- Table structure for table `wp_terms`
--

CREATE TABLE `wp_terms` (
  `term_id` bigint(20) UNSIGNED NOT NULL,
  `name` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `slug` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `term_group` bigint(10) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_terms`
--

INSERT INTO `wp_terms` (`term_id`, `name`, `slug`, `term_group`) VALUES
(1, 'Uncategorized', 'uncategorized', 0);

-- --------------------------------------------------------

--
-- Table structure for table `wp_term_relationships`
--

CREATE TABLE `wp_term_relationships` (
  `object_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `term_taxonomy_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `term_order` int(11) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_term_relationships`
--

INSERT INTO `wp_term_relationships` (`object_id`, `term_taxonomy_id`, `term_order`) VALUES
(1, 1, 0);

-- --------------------------------------------------------

--
-- Table structure for table `wp_term_taxonomy`
--

CREATE TABLE `wp_term_taxonomy` (
  `term_taxonomy_id` bigint(20) UNSIGNED NOT NULL,
  `term_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `taxonomy` varchar(32) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `description` longtext COLLATE utf8mb4_unicode_ci NOT NULL,
  `parent` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `count` bigint(20) NOT NULL DEFAULT '0'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_term_taxonomy`
--

INSERT INTO `wp_term_taxonomy` (`term_taxonomy_id`, `term_id`, `taxonomy`, `description`, `parent`, `count`) VALUES
(1, 1, 'category', '', 0, 1);

-- --------------------------------------------------------

--
-- Table structure for table `wp_usermeta`
--

CREATE TABLE `wp_usermeta` (
  `umeta_id` bigint(20) UNSIGNED NOT NULL,
  `user_id` bigint(20) UNSIGNED NOT NULL DEFAULT '0',
  `meta_key` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `meta_value` longtext COLLATE utf8mb4_unicode_ci
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_usermeta`
--

INSERT INTO `wp_usermeta` (`umeta_id`, `user_id`, `meta_key`, `meta_value`) VALUES
(1, 1, 'nickname', 'admin'),
(2, 1, 'first_name', ''),
(3, 1, 'last_name', ''),
(4, 1, 'description', ''),
(5, 1, 'rich_editing', 'true'),
(6, 1, 'syntax_highlighting', 'true'),
(7, 1, 'comment_shortcuts', 'false'),
(8, 1, 'admin_color', 'fresh'),
(9, 1, 'use_ssl', '0'),
(10, 1, 'show_admin_bar_front', 'true'),
(11, 1, 'locale', ''),
(12, 1, 'wp_capabilities', 'a:1:{s:13:\"administrator\";b:1;}'),
(13, 1, 'wp_user_level', '10'),
(14, 1, 'dismissed_wp_pointers', 'wp496_privacy'),
(15, 1, 'show_welcome_panel', '1'),
(17, 1, 'wp_dashboard_quick_press_last_post_id', '4'),
(18, 2, 'nickname', 'cqthanh@gmail.com'),
(19, 2, 'first_name', 'Thanh'),
(20, 2, 'last_name', 'Che'),
(21, 2, 'description', ''),
(22, 2, 'rich_editing', 'true'),
(23, 2, 'syntax_highlighting', 'true'),
(24, 2, 'comment_shortcuts', 'false'),
(25, 2, 'admin_color', 'fresh'),
(26, 2, 'use_ssl', '0'),
(27, 2, 'show_admin_bar_front', 'false'),
(28, 2, 'locale', ''),
(29, 2, 'wp_capabilities', 'a:1:{s:10:\"subscriber\";b:1;}'),
(30, 2, 'wp_user_level', '0'),
(31, 2, 'dismissed_wp_pointers', 'wp496_privacy'),
(32, 1, 'session_tokens', 'a:4:{s:64:\"4fc9a1fe5c83952659b9875be5728deafdeafed1b8626b5d3d80fb7e9e0aa50c\";a:4:{s:10:\"expiration\";i:1545962722;s:2:\"ip\";s:3:\"::1\";s:2:\"ua\";s:114:\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.17 Safari/537.36\";s:5:\"login\";i:1544753122;}s:64:\"29bbc10c2e41cfabe952edd4bf8c792f9d8a603dc7a5eb4c4f2080c095b53e6a\";a:4:{s:10:\"expiration\";i:1546221870;s:2:\"ip\";s:3:\"::1\";s:2:\"ua\";s:114:\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.17 Safari/537.36\";s:5:\"login\";i:1545012270;}s:64:\"a7d8a0be64e9a4d07c20d15ddd649ba5574af5cfccb900b46f25ef4eed0ad489\";a:4:{s:10:\"expiration\";i:1546308619;s:2:\"ip\";s:9:\"127.0.0.1\";s:2:\"ua\";s:114:\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.17 Safari/537.36\";s:5:\"login\";i:1545099019;}s:64:\"3efd1b0db65f29229f3155ae7deca99f41cc1947fe00d6a426375630db961a24\";a:4:{s:10:\"expiration\";i:1546480318;s:2:\"ip\";s:9:\"127.0.0.1\";s:2:\"ua\";s:114:\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.28 Safari/537.36\";s:5:\"login\";i:1545270718;}}'),
(33, 1, 'wp_user-settings', 'editor=html'),
(34, 1, 'wp_user-settings-time', '1545012680');

-- --------------------------------------------------------

--
-- Table structure for table `wp_users`
--

CREATE TABLE `wp_users` (
  `ID` bigint(20) UNSIGNED NOT NULL,
  `user_login` varchar(60) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `user_pass` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `user_nicename` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `user_email` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `user_url` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `user_registered` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `user_activation_key` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '',
  `user_status` int(11) NOT NULL DEFAULT '0',
  `display_name` varchar(250) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT ''
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

--
-- Dumping data for table `wp_users`
--

INSERT INTO `wp_users` (`ID`, `user_login`, `user_pass`, `user_nicename`, `user_email`, `user_url`, `user_registered`, `user_activation_key`, `user_status`, `display_name`) VALUES
(1, 'admin', '$P$BBfYDuoHyIIq4g8WKYSiqnnHJD08dp1', 'admin', 'cqthanh.zx@gmail.com', '', '2018-11-20 23:34:16', '', 0, 'admin'),
(2, 'cqthanh@gmail.com', '$P$BlmtwIGS5/jdwogwPXUbbjLhF00TFg/', 'cqthanhgmail-com', 'cqthanh@gmail.com', '', '2018-12-14 01:54:29', '', 0, 'Thanh C');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `mm_actions`
--
ALTER TABLE `mm_actions`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_affiliate_partner_payouts`
--
ALTER TABLE `mm_affiliate_partner_payouts`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_affiliate_providers`
--
ALTER TABLE `mm_affiliate_providers`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `provider_token` (`provider_token`);

--
-- Indexes for table `mm_affiliate_provider_mappings`
--
ALTER TABLE `mm_affiliate_provider_mappings`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_affiliate_rebill_commissions`
--
ALTER TABLE `mm_affiliate_rebill_commissions`
  ADD PRIMARY KEY (`affiliate_provider_id`,`affiliate_id`,`order_number`,`transaction_id`);

--
-- Indexes for table `mm_api_keys`
--
ALTER TABLE `mm_api_keys`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_applied_bundles`
--
ALTER TABLE `mm_applied_bundles`
  ADD UNIQUE KEY `unique_access_type` (`access_type`,`bundle_id`,`access_type_id`),
  ADD KEY `access_type` (`access_type`),
  ADD KEY `bundle_id` (`bundle_id`);

--
-- Indexes for table `mm_bundles`
--
ALTER TABLE `mm_bundles`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_card_on_file`
--
ALTER TABLE `mm_card_on_file`
  ADD PRIMARY KEY (`id`),
  ADD KEY `card_on_file_user_id_idx` (`user_id`);

--
-- Indexes for table `mm_commission_profiles`
--
ALTER TABLE `mm_commission_profiles`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_commission_profiles_name_unique` (`name`);

--
-- Indexes for table `mm_container`
--
ALTER TABLE `mm_container`
  ADD PRIMARY KEY (`id`),
  ADD KEY `name` (`name`);

--
-- Indexes for table `mm_core_pages`
--
ALTER TABLE `mm_core_pages`
  ADD PRIMARY KEY (`id`),
  ADD KEY `core_page_idx1` (`core_page_type_id`,`ref_type`,`ref_id`,`page_id`);

--
-- Indexes for table `mm_core_page_types`
--
ALTER TABLE `mm_core_page_types`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_countries`
--
ALTER TABLE `mm_countries`
  ADD PRIMARY KEY (`iso`);

--
-- Indexes for table `mm_country_subdivisions`
--
ALTER TABLE `mm_country_subdivisions`
  ADD PRIMARY KEY (`iso`,`code`);

--
-- Indexes for table `mm_coupons`
--
ALTER TABLE `mm_coupons`
  ADD PRIMARY KEY (`id`),
  ADD KEY `coupons_coupon_code_idx` (`coupon_code`),
  ADD KEY `coupons_start_date_end_date_idx` (`start_date`,`end_date`),
  ADD KEY `coupons_gift_user_id_idx` (`gift_user_id`),
  ADD KEY `coupons_gift_order_item_id_idx` (`gift_order_item_id`);

--
-- Indexes for table `mm_coupon_restrictions`
--
ALTER TABLE `mm_coupon_restrictions`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_coupon_usage`
--
ALTER TABLE `mm_coupon_usage`
  ADD PRIMARY KEY (`id`),
  ADD KEY `coupon_usage_coupon_id_idx` (`coupon_id`);

--
-- Indexes for table `mm_custom_fields`
--
ALTER TABLE `mm_custom_fields`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_custom_field_data`
--
ALTER TABLE `mm_custom_field_data`
  ADD PRIMARY KEY (`id`),
  ADD KEY `custom_field_id` (`custom_field_id`);

--
-- Indexes for table `mm_custom_field_options`
--
ALTER TABLE `mm_custom_field_options`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_diagnostic_log`
--
ALTER TABLE `mm_diagnostic_log`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_email_provider_bundle_mappings`
--
ALTER TABLE `mm_email_provider_bundle_mappings`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_email_provider_mappings`
--
ALTER TABLE `mm_email_provider_mappings`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_email_service_providers`
--
ALTER TABLE `mm_email_service_providers`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `provider_token` (`provider_token`);

--
-- Indexes for table `mm_employee_accounts`
--
ALTER TABLE `mm_employee_accounts`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_flatrate_shipping_options`
--
ALTER TABLE `mm_flatrate_shipping_options`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_login_token`
--
ALTER TABLE `mm_login_token`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_login_token_login_token_unique` (`login_token`);

--
-- Indexes for table `mm_log_api`
--
ALTER TABLE `mm_log_api`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_log_events`
--
ALTER TABLE `mm_log_events`
  ADD PRIMARY KEY (`id`),
  ADD KEY `event_user_id_idx` (`user_id`),
  ADD KEY `mm_log_events_idx1` (`event_type`,`user_id`);

--
-- Indexes for table `mm_membership_levels`
--
ALTER TABLE `mm_membership_levels`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_membership_levels_name_unique` (`name`);

--
-- Indexes for table `mm_membership_level_products`
--
ALTER TABLE `mm_membership_level_products`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_orders`
--
ALTER TABLE `mm_orders`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_orders_order_number_unique` (`order_number`),
  ADD KEY `order_user_id_idx` (`user_id`),
  ADD KEY `order_form_submission_idx` (`form_submission_id`),
  ADD KEY `mm_order_is_test_idx` (`is_test`);

--
-- Indexes for table `mm_order_items`
--
ALTER TABLE `mm_order_items`
  ADD PRIMARY KEY (`id`),
  ADD KEY `order_items_order_id_idx` (`order_id`),
  ADD KEY `item_type_item_id_idx` (`item_type`,`item_id`),
  ADD KEY `mm_order_items_is_test_idx` (`is_test`);

--
-- Indexes for table `mm_order_item_access`
--
ALTER TABLE `mm_order_item_access`
  ADD KEY `order_item_access_order_item_id_idx` (`order_item_id`),
  ADD KEY `order_item_access_user_id_idx` (`user_id`);

--
-- Indexes for table `mm_payment_services`
--
ALTER TABLE `mm_payment_services`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_payment_services_token_unique` (`token`);

--
-- Indexes for table `mm_posts_access`
--
ALTER TABLE `mm_posts_access`
  ADD KEY `post_id` (`post_id`),
  ADD KEY `access_type` (`access_type`),
  ADD KEY `is_smart_content` (`is_smart_content`),
  ADD KEY `access_id` (`access_id`);

--
-- Indexes for table `mm_products`
--
ALTER TABLE `mm_products`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_queued_scheduled_events`
--
ALTER TABLE `mm_queued_scheduled_events`
  ADD PRIMARY KEY (`event_id`),
  ADD KEY `queued_event_command_type_lookup_idx` (`command`,`queued_date`),
  ADD KEY `queued_event_batch_id_lookup_idx` (`batch_id`);

--
-- Indexes for table `mm_report_data_cache`
--
ALTER TABLE `mm_report_data_cache`
  ADD PRIMARY KEY (`id`),
  ADD KEY `mm_report_data_cache_date_idx` (`expiration_date`);

--
-- Indexes for table `mm_scheduled_events`
--
ALTER TABLE `mm_scheduled_events`
  ADD PRIMARY KEY (`id`),
  ADD KEY `mm_scheduler_event_type_idx` (`event_type`),
  ADD KEY `mm_scheduler_scheduled_date_idx` (`scheduled_date`),
  ADD KEY `mm_scheduler_status_idx` (`status`);

--
-- Indexes for table `mm_scheduled_payments`
--
ALTER TABLE `mm_scheduled_payments`
  ADD PRIMARY KEY (`id`),
  ADD KEY `scheduled_payment_oiu_lookup_idx` (`order_item_id`,`user_id`);

--
-- Indexes for table `mm_sessions`
--
ALTER TABLE `mm_sessions`
  ADD PRIMARY KEY (`id`),
  ADD KEY `mm_session_lookup_idx` (`id`,`ip_address`),
  ADD KEY `mm_session_reap_idx` (`expiration_date`);

--
-- Indexes for table `mm_shipping_methods`
--
ALTER TABLE `mm_shipping_methods`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_shipping_methods_token_unique` (`token`);

--
-- Indexes for table `mm_smarttags`
--
ALTER TABLE `mm_smarttags`
  ADD PRIMARY KEY (`id`),
  ADD KEY `mm_smarttags_autoload_idx` (`autoload`),
  ADD KEY `group_id` (`group_id`,`visible`);

--
-- Indexes for table `mm_smarttag_groups`
--
ALTER TABLE `mm_smarttag_groups`
  ADD PRIMARY KEY (`id`),
  ADD KEY `parent_id` (`parent_id`,`visible`);

--
-- Indexes for table `mm_social_login_linked_profiles`
--
ALTER TABLE `mm_social_login_linked_profiles`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `social_login_unique_id_lookup_idx` (`provider_id`,`unique_id`);

--
-- Indexes for table `mm_social_login_providers`
--
ALTER TABLE `mm_social_login_providers`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_social_login_providers_token_unique` (`token`);

--
-- Indexes for table `mm_top_level_domains`
--
ALTER TABLE `mm_top_level_domains`
  ADD PRIMARY KEY (`suffix`);

--
-- Indexes for table `mm_transaction_key`
--
ALTER TABLE `mm_transaction_key`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `mm_transaction_key_transaction_key_unique` (`transaction_key`);

--
-- Indexes for table `mm_transaction_log`
--
ALTER TABLE `mm_transaction_log`
  ADD PRIMARY KEY (`id`),
  ADD KEY `transaction_type_idx` (`transaction_type`,`transaction_date`),
  ADD KEY `order_order_item_id` (`order_id`,`order_item_id`),
  ADD KEY `payment_service_detail_lookup_idx` (`payment_service_id`,`payment_service_detail_id`),
  ADD KEY `mm_transaction_log_is_test_idx` (`is_test`);

--
-- Indexes for table `mm_user_data`
--
ALTER TABLE `mm_user_data`
  ADD PRIMARY KEY (`wp_user_id`),
  ADD KEY `mm_user_data_mls_lookup` (`membership_level_id`,`status`),
  ADD KEY `mm_user_data_statdate_idx` (`status`,`status_updated`);

--
-- Indexes for table `mm_user_defined_pages`
--
ALTER TABLE `mm_user_defined_pages`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `mm_version_releases`
--
ALTER TABLE `mm_version_releases`
  ADD PRIMARY KEY (`id`);

--
-- Indexes for table `wp_commentmeta`
--
ALTER TABLE `wp_commentmeta`
  ADD PRIMARY KEY (`meta_id`),
  ADD KEY `comment_id` (`comment_id`),
  ADD KEY `meta_key` (`meta_key`(191));

--
-- Indexes for table `wp_comments`
--
ALTER TABLE `wp_comments`
  ADD PRIMARY KEY (`comment_ID`),
  ADD KEY `comment_post_ID` (`comment_post_ID`),
  ADD KEY `comment_approved_date_gmt` (`comment_approved`,`comment_date_gmt`),
  ADD KEY `comment_date_gmt` (`comment_date_gmt`),
  ADD KEY `comment_parent` (`comment_parent`),
  ADD KEY `comment_author_email` (`comment_author_email`(10));

--
-- Indexes for table `wp_links`
--
ALTER TABLE `wp_links`
  ADD PRIMARY KEY (`link_id`),
  ADD KEY `link_visible` (`link_visible`);

--
-- Indexes for table `wp_options`
--
ALTER TABLE `wp_options`
  ADD PRIMARY KEY (`option_id`),
  ADD UNIQUE KEY `option_name` (`option_name`);

--
-- Indexes for table `wp_postmeta`
--
ALTER TABLE `wp_postmeta`
  ADD PRIMARY KEY (`meta_id`),
  ADD KEY `post_id` (`post_id`),
  ADD KEY `meta_key` (`meta_key`(191));

--
-- Indexes for table `wp_posts`
--
ALTER TABLE `wp_posts`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `post_name` (`post_name`(191)),
  ADD KEY `type_status_date` (`post_type`,`post_status`,`post_date`,`ID`),
  ADD KEY `post_parent` (`post_parent`),
  ADD KEY `post_author` (`post_author`);

--
-- Indexes for table `wp_termmeta`
--
ALTER TABLE `wp_termmeta`
  ADD PRIMARY KEY (`meta_id`),
  ADD KEY `term_id` (`term_id`),
  ADD KEY `meta_key` (`meta_key`(191));

--
-- Indexes for table `wp_terms`
--
ALTER TABLE `wp_terms`
  ADD PRIMARY KEY (`term_id`),
  ADD KEY `slug` (`slug`(191)),
  ADD KEY `name` (`name`(191));

--
-- Indexes for table `wp_term_relationships`
--
ALTER TABLE `wp_term_relationships`
  ADD PRIMARY KEY (`object_id`,`term_taxonomy_id`),
  ADD KEY `term_taxonomy_id` (`term_taxonomy_id`);

--
-- Indexes for table `wp_term_taxonomy`
--
ALTER TABLE `wp_term_taxonomy`
  ADD PRIMARY KEY (`term_taxonomy_id`),
  ADD UNIQUE KEY `term_id_taxonomy` (`term_id`,`taxonomy`),
  ADD KEY `taxonomy` (`taxonomy`);

--
-- Indexes for table `wp_usermeta`
--
ALTER TABLE `wp_usermeta`
  ADD PRIMARY KEY (`umeta_id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `meta_key` (`meta_key`(191));

--
-- Indexes for table `wp_users`
--
ALTER TABLE `wp_users`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `user_login_key` (`user_login`),
  ADD KEY `user_nicename` (`user_nicename`),
  ADD KEY `user_email` (`user_email`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `mm_actions`
--
ALTER TABLE `mm_actions`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `mm_affiliate_partner_payouts`
--
ALTER TABLE `mm_affiliate_partner_payouts`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_affiliate_providers`
--
ALTER TABLE `mm_affiliate_providers`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT for table `mm_affiliate_provider_mappings`
--
ALTER TABLE `mm_affiliate_provider_mappings`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_api_keys`
--
ALTER TABLE `mm_api_keys`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `mm_bundles`
--
ALTER TABLE `mm_bundles`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_card_on_file`
--
ALTER TABLE `mm_card_on_file`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_commission_profiles`
--
ALTER TABLE `mm_commission_profiles`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `mm_container`
--
ALTER TABLE `mm_container`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=262;

--
-- AUTO_INCREMENT for table `mm_core_pages`
--
ALTER TABLE `mm_core_pages`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=14;

--
-- AUTO_INCREMENT for table `mm_core_page_types`
--
ALTER TABLE `mm_core_page_types`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=14;

--
-- AUTO_INCREMENT for table `mm_coupons`
--
ALTER TABLE `mm_coupons`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_coupon_restrictions`
--
ALTER TABLE `mm_coupon_restrictions`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_coupon_usage`
--
ALTER TABLE `mm_coupon_usage`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_custom_fields`
--
ALTER TABLE `mm_custom_fields`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_custom_field_data`
--
ALTER TABLE `mm_custom_field_data`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_custom_field_options`
--
ALTER TABLE `mm_custom_field_options`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_diagnostic_log`
--
ALTER TABLE `mm_diagnostic_log`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_email_provider_bundle_mappings`
--
ALTER TABLE `mm_email_provider_bundle_mappings`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_email_provider_mappings`
--
ALTER TABLE `mm_email_provider_mappings`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_email_service_providers`
--
ALTER TABLE `mm_email_service_providers`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;

--
-- AUTO_INCREMENT for table `mm_employee_accounts`
--
ALTER TABLE `mm_employee_accounts`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `mm_flatrate_shipping_options`
--
ALTER TABLE `mm_flatrate_shipping_options`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_login_token`
--
ALTER TABLE `mm_login_token`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `mm_log_api`
--
ALTER TABLE `mm_log_api`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_log_events`
--
ALTER TABLE `mm_log_events`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;

--
-- AUTO_INCREMENT for table `mm_membership_levels`
--
ALTER TABLE `mm_membership_levels`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `mm_membership_level_products`
--
ALTER TABLE `mm_membership_level_products`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_orders`
--
ALTER TABLE `mm_orders`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_order_items`
--
ALTER TABLE `mm_order_items`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_payment_services`
--
ALTER TABLE `mm_payment_services`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=14;

--
-- AUTO_INCREMENT for table `mm_products`
--
ALTER TABLE `mm_products`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_report_data_cache`
--
ALTER TABLE `mm_report_data_cache`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_scheduled_events`
--
ALTER TABLE `mm_scheduled_events`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_shipping_methods`
--
ALTER TABLE `mm_shipping_methods`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `mm_smarttags`
--
ALTER TABLE `mm_smarttags`
  MODIFY `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=1101;

--
-- AUTO_INCREMENT for table `mm_smarttag_groups`
--
ALTER TABLE `mm_smarttag_groups`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=12;

--
-- AUTO_INCREMENT for table `mm_social_login_linked_profiles`
--
ALTER TABLE `mm_social_login_linked_profiles`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_social_login_providers`
--
ALTER TABLE `mm_social_login_providers`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_transaction_key`
--
ALTER TABLE `mm_transaction_key`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_transaction_log`
--
ALTER TABLE `mm_transaction_log`
  MODIFY `id` bigint(20) NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_user_defined_pages`
--
ALTER TABLE `mm_user_defined_pages`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `mm_version_releases`
--
ALTER TABLE `mm_version_releases`
  MODIFY `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `wp_commentmeta`
--
ALTER TABLE `wp_commentmeta`
  MODIFY `meta_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `wp_comments`
--
ALTER TABLE `wp_comments`
  MODIFY `comment_ID` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `wp_links`
--
ALTER TABLE `wp_links`
  MODIFY `link_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `wp_options`
--
ALTER TABLE `wp_options`
  MODIFY `option_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=320;

--
-- AUTO_INCREMENT for table `wp_postmeta`
--
ALTER TABLE `wp_postmeta`
  MODIFY `meta_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT for table `wp_posts`
--
ALTER TABLE `wp_posts`
  MODIFY `ID` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=27;

--
-- AUTO_INCREMENT for table `wp_termmeta`
--
ALTER TABLE `wp_termmeta`
  MODIFY `meta_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT;

--
-- AUTO_INCREMENT for table `wp_terms`
--
ALTER TABLE `wp_terms`
  MODIFY `term_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `wp_term_taxonomy`
--
ALTER TABLE `wp_term_taxonomy`
  MODIFY `term_taxonomy_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `wp_usermeta`
--
ALTER TABLE `wp_usermeta`
  MODIFY `umeta_id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=35;

--
-- AUTO_INCREMENT for table `wp_users`
--
ALTER TABLE `wp_users`
  MODIFY `ID` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=3;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
